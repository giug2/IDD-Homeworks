<article class="ltx_document ltx_authors_1line">
 <h1 class="ltx_title ltx_title_document">
  Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning
 </h1>
 <div class="ltx_authors">
  <span class="ltx_creator ltx_role_author">
   <span class="ltx_personname">
    Qinhao Zhou
    <sup class="ltx_sup" id="id2.2.id1">
     1
    </sup>
    Zihan Zhang
    <sup class="ltx_sup" id="id3.3.id2">
     1
    </sup>
    Xiang Xiang
    <sup class="ltx_sup" id="id4.4.id3">
     1
    </sup>
    <br class="ltx_break"/>
    <span class="ltx_text ltx_font_bold" id="id5.5.id4">
     Ke Wang
     <sup class="ltx_sup" id="id5.5.id4.1">
      <span class="ltx_text ltx_font_medium" id="id5.5.id4.1.1">
       2
      </span>
     </sup>
    </span>
    <span class="ltx_text ltx_font_bold" id="id6.6.id5">
     Yuchuan Wu
     <sup class="ltx_sup" id="id6.6.id5.1">
      <span class="ltx_text ltx_font_medium" id="id6.6.id5.1.1">
       2
      </span>
     </sup>
    </span>
    <span class="ltx_text ltx_font_bold" id="id7.7.id6">
     Yongbin Li
    </span>
    <sup class="ltx_sup" id="id8.8.id7">
     2
    </sup>
    <br class="ltx_break"/>
    <sup class="ltx_sup" id="id9.9.id8">
     1
    </sup>
    National Key Lab of MSIIPT, School of Artificial Intelligence and Automation,
    <br class="ltx_break"/>
    Huazhong University of Science and Technology, Wuhan, China
    <br class="ltx_break"/>
    <sup class="ltx_sup" id="id10.10.id9">
     2
    </sup>
    DAMO Academy, Alibaba Group, Beijing, China
    <br class="ltx_break"/>
   </span>
   <span class="ltx_author_notes">
    <sup class="ltx_sup" id="id11.11.id1">
     ∗
    </sup>
    Corresponding author (e-mail:
    <a class="ltx_ref ltx_url ltx_font_typewriter" href="xex@hust.edu.cn" title="">
     xex@hust.edu.cn
    </a>
    ); also with Peng Cheng Laboratory, Shenzhen, China.
   </span>
  </span>
 </div>
 <div class="ltx_abstract">
  <h6 class="ltx_title ltx_title_abstract">
   Abstract
  </h6>
  <p class="ltx_p" id="id12.id1">
   Open-source pre-trained Large Language Models (LLMs) exhibit strong language understanding and generation capabilities, making them highly successful in a variety of tasks.
However, when used as agents for dealing with complex problems in the real world, their performance is far inferior to large commercial models such as ChatGPT and GPT-4.
As intelligent agents, LLMs need to have the capabilities of task planning, long-term memory, and the ability to leverage external tools to achieve satisfactory performance.
Various methods have been proposed to enhance the agent capabilities of LLMs. On the one hand, methods involve constructing agent-specific data and fine-tuning the models.
On the other hand, some methods focus on designing prompts that effectively activate the reasoning abilities of the LLMs. We explore both strategies on the 7B and 13B models.
We propose a comprehensive method for constructing agent-specific data using GPT-4.
Through supervised fine-tuning with constructed data, we find that for these models with a relatively small number of parameters, supervised fine-tuning can significantly reduce hallucination outputs and formatting errors in agent tasks.
Furthermore, techniques such as multi-path reasoning and task decomposition can effectively decrease problem complexity and enhance the performance of LLMs as agents.
We evaluate our method on five agent tasks of AgentBench and achieve satisfactory results.
  </p>
 </div>
 <section class="ltx_section" id="S1">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    1
   </span>
   Introduction
  </h2>
  <figure class="ltx_figure" id="S1.F1">
   <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="214" id="S1.F1.g1" src="/html/2403.19962/assets/Figs/agent-intro.png" width="287"/>
   <figcaption class="ltx_caption ltx_centering">
    <span class="ltx_tag ltx_tag_figure">
     Figure 1:
    </span>
    The agent performance of open-source LLMs and commercial LLMs. Agent Overall Score is the average accuracy of several agent tasks.
   </figcaption>
  </figure>
  <div class="ltx_para" id="S1.p1">
   <p class="ltx_p" id="S1.p1.1">
    Large Language Models (LLMs) have been extensively employed in a wide range of natural language processing tasks, yielding groundbreaking achievements.
Furthermore, LLMs have demonstrated their capability to undertake more challenging tasks, such as functioning as AI agents.
Unlike conventional reasoning tasks, an AI agent is an entity that needs to interact with the human or external environment, draw inferences, and judge subsequent actions based on feedback.
Each single task typically involves multiple rounds of dialogue to accomplish.
For instance, in a home environment, an agent may be tasked with various household tasks that require continuous interaction with the environment. The agent needs to evaluate its actions based on the feedback from the environment and make timely adjustments to its strategies.
Traditional AI agents are usually effective in specific domains or environments, but their generalization and adaptability are obviously insufficient
    <cite class="ltx_cite ltx_citemacro_cite">
     Liu et al. (
     <a class="ltx_ref" href="#bib.bib8" title="">
      2023
     </a>
     )
    </cite>
    .
   </p>
  </div>
  <div class="ltx_para" id="S1.p2">
   <p class="ltx_p" id="S1.p2.1">
    In recent years, an increasing number of work
    <cite class="ltx_cite ltx_citemacro_cite">
     Brown et al. (
     <a class="ltx_ref" href="#bib.bib1" title="">
      2020
     </a>
     ); OpenAI (
     <a class="ltx_ref" href="#bib.bib11" title="">
      2023
     </a>
     ); Qin et al. (
     <a class="ltx_ref" href="#bib.bib16" title="">
      2023
     </a>
     ); Shinn et al. (
     <a class="ltx_ref" href="#bib.bib18" title="">
      2023
     </a>
     ); Zhu et al. (
     <a class="ltx_ref" href="#bib.bib36" title="">
      2023
     </a>
     )
    </cite>
    have demonstrated that LLMs possess strong capabilities in reasoning, planning, memory, and utilizing external tools.
This has propelled LLMs towards becoming more generalized and adaptive agents.
Recently, AgentBench
    <cite class="ltx_cite ltx_citemacro_cite">
     Liu et al. (
     <a class="ltx_ref" href="#bib.bib8" title="">
      2023
     </a>
     )
    </cite>
    conducts extensive evaluations of both commercial and open-source LLMs on eight different agent tasks. The results reveal that commercial API models show superior agent capabilities.
In addition, work such as AutoGPT
    <cite class="ltx_cite ltx_citemacro_cite">
     Gravitas (
     <a class="ltx_ref" href="#bib.bib4" title="">
      2023
     </a>
     )
    </cite>
    and GPT-Engineer
    <cite class="ltx_cite ltx_citemacro_cite">
     Osika et al. (
     <a class="ltx_ref" href="#bib.bib12" title="">
      2023
     </a>
     )
    </cite>
    also use LLMs as agents to build a complete framework for solving complex real-world problems.
However, open-source models, especially those with smaller parameter sizes, still have substantial potential for enhancement.
As shown in Fig.
    <a class="ltx_ref" href="#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
     <span class="ltx_text ltx_ref_tag">
      1
     </span>
    </a>
    , the average performance of 7B and 13B LLMs on each agent task is significantly lower than the commercial models.
   </p>
  </div>
  <div class="ltx_para" id="S1.p3">
   <p class="ltx_p" id="S1.p3.1">
    Unlike commercial LLMs, small-scale open-source LLMs are relatively inefficient in general knowledge
    <cite class="ltx_cite ltx_citemacro_cite">
     Peters et al. (
     <a class="ltx_ref" href="#bib.bib14" title="">
      2019
     </a>
     )
    </cite>
    .
Besides, lower parameter sizes limit reasoning and memory capacity, often leading to hallucinations in the agent dialogue process
    <cite class="ltx_cite ltx_citemacro_cite">
     Zhang et al. (
     <a class="ltx_ref" href="#bib.bib33" title="">
      2023b
     </a>
     )
    </cite>
    . However, in practical applications, LLMs with 7B and 13B parameters are the most widely used due to their relative ease of deployment and fine-tuning. Therefore, enhancing the capabilities of such LLMs is of great practical significance. Currently, studies on LLMs agents or enhancing model reasoning capabilities
    <cite class="ltx_cite ltx_citemacro_cite">
     Xi et al. (
     <a class="ltx_ref" href="#bib.bib25" title="">
      2023a
     </a>
     ); Wang et al. (
     <a class="ltx_ref" href="#bib.bib20" title="">
      2023
     </a>
     )
    </cite>
    primarily focus on large-scale models. The investigation of agent capabilities on 7B and 13B LLMs is still in its early stages of exploration.
As explained, a proficient agent requires task-planning abilities, proficiency in utilizing external tools, and long-term memory capabilities. Task planning refers to the ability of the model to decompose large-scale tasks into manageable sub-goals, facilitating efficient handling of complex tasks.
Long-term memory capabilities reflect the ability of the LLMs to retain and recall historical information during their interactive processes with the environment. Considering these abilities, we propose a method to enhance the performance of 7B and 13B LLMs on agent tasks.
   </p>
  </div>
  <div class="ltx_para" id="S1.p4">
   <p class="ltx_p" id="S1.p4.1">
    In our proposed approach, We focus on enhancing the agent capabilities of LLMs from two key aspects. First, improving the agent capabilities through Supervised Fine-Tuning (SFT). This approach fundamentally enhances the LLMs themselves.
Unlike general reasoning tasks, an agent’s role goes beyond planning and reasoning. It also involves continuous interaction with the environment or humans to execute subsequent actions until a desired outcome is achieved.
To improve the agent abilities of LLMs, it is essential to train them on diverse datasets that reflect the full range of interactive behaviors between the agent and the environment. This involves constructing data that not only records the actions taken by the agent but also captures the internal thought processes and decision-making. Additionally, the environment should provide meaningful feedback to guide the learning of the agent. We propose to use GPT-4
    <cite class="ltx_cite ltx_citemacro_cite">
     OpenAI (
     <a class="ltx_ref" href="#bib.bib11" title="">
      2023
     </a>
     )
    </cite>
    to construct data. By designing a framework that involves GPT-4 engaging the multi-turn dialogues, we can generate conversational data that captures the interaction between different roles. During these conversations, GPT-4 can take on different roles, such as playing the part of an agent, a user, or the environment, and actively participate in dynamic exchanges. In addition, we incorporate a significant amount of general instruction tuning data into the constructed dataset to preserve the general capabilities of the LLMs.
   </p>
  </div>
  <div class="ltx_para" id="S1.p5">
   <p class="ltx_p" id="S1.p5.1">
    Besides, we optimize the reasoning path through task decomposition and backtracking. Inspired by Chain of Thought
    <cite class="ltx_cite ltx_citemacro_cite">
     Wei et al. (
     <a class="ltx_ref" href="#bib.bib23" title="">
      2022
     </a>
     )
    </cite>
    , significant efforts have been dedicated to activating the reasoning ability of the LLMs. For instance, ReAct
    <cite class="ltx_cite ltx_citemacro_cite">
     Yao et al. (
     <a class="ltx_ref" href="#bib.bib30" title="">
      2022b
     </a>
     )
    </cite>
    integrates the thinking process into the task of multi-step reasoning. ToT
    <cite class="ltx_cite ltx_citemacro_cite">
     Yao et al. (
     <a class="ltx_ref" href="#bib.bib29" title="">
      2023
     </a>
     )
    </cite>
    uses depth-first and breadth-first traversal of reasoning nodes, which is more conducive to finding the optimal solution. We migrate the idea of ToT to the agent tasks and combine it with task decomposition and backtracking. Task decomposition leverages the task planning capability of the LLMs to decompose complex and lengthy tasks into several smaller subtasks. Considering that it is difficult for LLMs to find optimal answers or complete tasks through a single reasoning path, we introduce a judgment process where the reasoning process goes back to the starting point, termed backtracking. Through the integration of task decomposition and backtracking, we aim to enhance LLMs’ ability to handle complex tasks effectively.
   </p>
  </div>
  <div class="ltx_para" id="S1.p6">
   <p class="ltx_p" id="S1.p6.1">
    The main contributions of this paper are: 1) We explore the capabilities of 7B and 13B open-source LLMs as agents, exploring their potential in performing agent tasks. 2) We propose supervised fine-tuning with specific agent data as a fundamental approach to improving the capability of open-source LLMs as agents. To achieve this, we develop a method for constructing agent data. 3) We find that task decomposition and backtracking are effective approaches for addressing complex agent tasks. We conduct experiments on AgentBench and achieve promising results.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S2">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    2
   </span>
   Related Works
  </h2>
  <div class="ltx_para" id="S2.p1">
   <p class="ltx_p" id="S2.p1.1">
    <span class="ltx_text ltx_font_bold" id="S2.p1.1.1">
     Planning and Reasoning.
    </span>
    Planning and reasoning are crucial capacities for agents to solve complex tasks. Through the in-context of the thinking chain, Chain-of-Thought
    <cite class="ltx_cite ltx_citemacro_cite">
     Wei et al. (
     <a class="ltx_ref" href="#bib.bib23" title="">
      2022
     </a>
     )
    </cite>
    activates the reasoning capabilities of LLMs and enables the generation of intermediate thought processes before producing answers. Some other strategies have also been proposed to further enhance the thinking process of models. For example, SC
    <cite class="ltx_cite ltx_citemacro_cite">
     Wang et al. (
     <a class="ltx_ref" href="#bib.bib21" title="">
      2022
     </a>
     )
    </cite>
    leverages the self-consistency of LLMs by generating multiple thinking chains and determining the final answer through voting. Reconcile
    <cite class="ltx_cite ltx_citemacro_cite">
     Chen et al. (
     <a class="ltx_ref" href="#bib.bib2" title="">
      2023
     </a>
     )
    </cite>
    enhances the reasoning capabilities of LLMs through multiple rounds of discussions and using confidence-weighted voting. Besides, self-polish
    <cite class="ltx_cite ltx_citemacro_cite">
     Xi et al. (
     <a class="ltx_ref" href="#bib.bib26" title="">
      2023b
     </a>
     )
    </cite>
    , and self-refine
    <cite class="ltx_cite ltx_citemacro_cite">
     Madaan et al. (
     <a class="ltx_ref" href="#bib.bib9" title="">
      2023
     </a>
     )
    </cite>
    augment the thinking process of LLMs from other perspectives. Furthermore, ToT
    <cite class="ltx_cite ltx_citemacro_cite">
     Yao et al. (
     <a class="ltx_ref" href="#bib.bib29" title="">
      2023
     </a>
     )
    </cite>
    explores the abstracting reasoning process into deep tree search. In addition, there are some works
    <cite class="ltx_cite ltx_citemacro_cite">
     Zhang et al. (
     <a class="ltx_ref" href="#bib.bib34" title="">
      2023c
     </a>
     )
    </cite>
    that apply the idea of chain thinking to multi-modal tasks.
   </p>
  </div>
  <div class="ltx_para" id="S2.p2">
   <p class="ltx_p" id="S2.p2.1">
    <span class="ltx_text ltx_font_bold" id="S2.p2.1.1">
     Large Language Model as Agent.
    </span>
    With the rapid advancement of LLMs, extensive research has been conducted to explore their powerful capabilities in planning and reasoning
    <cite class="ltx_cite ltx_citemacro_cite">
     Xi et al. (
     <a class="ltx_ref" href="#bib.bib25" title="">
      2023a
     </a>
     ); Wang et al. (
     <a class="ltx_ref" href="#bib.bib20" title="">
      2023
     </a>
     )
    </cite>
    . This has opened up the possibility of employing LLMs as agents. On the one hand, there have been several efforts to apply LLMs to various agent tasks and construct agent simulation frameworks. On the other hand, several works
    <cite class="ltx_cite ltx_citemacro_cite">
     Xu et al. (
     <a class="ltx_ref" href="#bib.bib27" title="">
      2023
     </a>
     ); Kim et al. (
     <a class="ltx_ref" href="#bib.bib7" title="">
      2023
     </a>
     )
    </cite>
    , such as ReAct
    <cite class="ltx_cite ltx_citemacro_cite">
     Yao et al. (
     <a class="ltx_ref" href="#bib.bib30" title="">
      2022b
     </a>
     )
    </cite>
    , have focused on incorporating reasoning and deliberation into the agent process for LLMs. In addition, some works apply the reasoning methods to the agent interaction process. PET
    <cite class="ltx_cite ltx_citemacro_cite">
     Wu et al. (
     <a class="ltx_ref" href="#bib.bib24" title="">
      2023
     </a>
     )
    </cite>
    applies task decomposition to the household agent environment, which is helpful for LLMs to complete complex tasks. LATS
    <cite class="ltx_cite ltx_citemacro_cite">
     Zhou et al. (
     <a class="ltx_ref" href="#bib.bib35" title="">
      2023
     </a>
     )
    </cite>
    and RAP
    <cite class="ltx_cite ltx_citemacro_cite">
     Hao et al. (
     <a class="ltx_ref" href="#bib.bib5" title="">
      2023
     </a>
     )
    </cite>
    apply Monte Carlo tree search to the agent reasoning process. It is advantageous to find better answers compared with ToT. In addition, research works such as AutoGPT
    <cite class="ltx_cite ltx_citemacro_cite">
     Gravitas (
     <a class="ltx_ref" href="#bib.bib4" title="">
      2023
     </a>
     )
    </cite>
    and GPT-Engineer
    <cite class="ltx_cite ltx_citemacro_cite">
     Osika et al. (
     <a class="ltx_ref" href="#bib.bib12" title="">
      2023
     </a>
     )
    </cite>
    utilize commercial LLMs as agent core of their frameworks, enabling the development of comprehensive agent architectures to tackle complex real-world problems.
   </p>
  </div>
  <div class="ltx_para" id="S2.p3">
   <p class="ltx_p" id="S2.p3.1">
    <span class="ltx_text ltx_font_bold" id="S2.p3.1.1">
     Instruction Tuning for Language Model.
    </span>
    Instruction tuning plays a crucial role in training LLMs. After pre-training with massive unsupervised data, LLMs acquire a substantial amount of knowledge and process language understanding and generation capabilities. Further supervised instruction fine-tuning
    <cite class="ltx_cite ltx_citemacro_cite">
     Zhang et al. (
     <a class="ltx_ref" href="#bib.bib32" title="">
      2023a
     </a>
     ); Dong et al. (
     <a class="ltx_ref" href="#bib.bib3" title="">
      2022
     </a>
     )
    </cite>
    is conducted to align the model with human instructions and generate outputs that better align with human preferences. Instruction tuning mainly focuses on constructing complex and diverse general-purpose tasks to train LLMs to answer questions in a human manner. For example, FLAN
    <cite class="ltx_cite ltx_citemacro_cite">
     Wei et al. (
     <a class="ltx_ref" href="#bib.bib22" title="">
      2021
     </a>
     )
    </cite>
    and T0
    <cite class="ltx_cite ltx_citemacro_cite">
     Sanh et al. (
     <a class="ltx_ref" href="#bib.bib17" title="">
      2021
     </a>
     )
    </cite>
    construct a multi-task instruction tuning dataset using massive publicly available datasets. The fine-tuned model shows strong zero-shot generalizability. In addition to utilizing existing datasets, another common approach is to generate data using commercial LLMs. Self-Instruct
    <cite class="ltx_cite ltx_citemacro_cite">
     Wang et al. (
     <a class="ltx_ref" href="#bib.bib21" title="">
      2022
     </a>
     ); Peng et al. (
     <a class="ltx_ref" href="#bib.bib13" title="">
      2023
     </a>
     )
    </cite>
    leverages GPT-4 to generate a large amount of diverse data, given a few seed tasks. These data are used for fine-tuning open-source LLMs and get significant improvements in various tasks. To enhance the agent capability of LLMs, AgentTuning
    <cite class="ltx_cite ltx_citemacro_cite">
     Zeng et al. (
     <a class="ltx_ref" href="#bib.bib31" title="">
      2023
     </a>
     )
    </cite>
    utilizes commercial LLMs to construct data in specific agent environments containing multi-turn dialogues.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S3">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    3
   </span>
   Methodology
  </h2>
  <div class="ltx_para" id="S3.p1">
   <p class="ltx_p" id="S3.p1.1">
    In this section, we first give a formal definition of LLMs as agents. Then, we introduce the two components of our approach. In the first part, we construct agent-tuning data to fine-tune LLMs with parameter-efficient tuning methods. This is a way to fundamentally improve the capabilities of LLMs. In the second part, we propose enhancing the reasoning capabilities of LLMs through task decomposition and backtracking.
   </p>
  </div>
  <section class="ltx_subsection" id="S3.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     3.1
    </span>
    Problem Formulation
   </h3>
   <div class="ltx_para" id="S3.SS1.p1">
    <p class="ltx_p" id="S3.SS1.p1.4">
     For a given agent task, the interaction trajectory of LLMs as agents can be represented as a dialogue history
     <math alttext="(e_{1},a_{1},...,e_{n},a_{n})" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.5">
      <semantics id="S3.SS1.p1.1.m1.5a">
       <mrow id="S3.SS1.p1.1.m1.5.5.4" xref="S3.SS1.p1.1.m1.5.5.5.cmml">
        <mo id="S3.SS1.p1.1.m1.5.5.4.5" stretchy="false" xref="S3.SS1.p1.1.m1.5.5.5.cmml">
         (
        </mo>
        <msub id="S3.SS1.p1.1.m1.2.2.1.1" xref="S3.SS1.p1.1.m1.2.2.1.1.cmml">
         <mi id="S3.SS1.p1.1.m1.2.2.1.1.2" xref="S3.SS1.p1.1.m1.2.2.1.1.2.cmml">
          e
         </mi>
         <mn id="S3.SS1.p1.1.m1.2.2.1.1.3" xref="S3.SS1.p1.1.m1.2.2.1.1.3.cmml">
          1
         </mn>
        </msub>
        <mo id="S3.SS1.p1.1.m1.5.5.4.6" xref="S3.SS1.p1.1.m1.5.5.5.cmml">
         ,
        </mo>
        <msub id="S3.SS1.p1.1.m1.3.3.2.2" xref="S3.SS1.p1.1.m1.3.3.2.2.cmml">
         <mi id="S3.SS1.p1.1.m1.3.3.2.2.2" xref="S3.SS1.p1.1.m1.3.3.2.2.2.cmml">
          a
         </mi>
         <mn id="S3.SS1.p1.1.m1.3.3.2.2.3" xref="S3.SS1.p1.1.m1.3.3.2.2.3.cmml">
          1
         </mn>
        </msub>
        <mo id="S3.SS1.p1.1.m1.5.5.4.7" xref="S3.SS1.p1.1.m1.5.5.5.cmml">
         ,
        </mo>
        <mi id="S3.SS1.p1.1.m1.1.1" mathvariant="normal" xref="S3.SS1.p1.1.m1.1.1.cmml">
         …
        </mi>
        <mo id="S3.SS1.p1.1.m1.5.5.4.8" xref="S3.SS1.p1.1.m1.5.5.5.cmml">
         ,
        </mo>
        <msub id="S3.SS1.p1.1.m1.4.4.3.3" xref="S3.SS1.p1.1.m1.4.4.3.3.cmml">
         <mi id="S3.SS1.p1.1.m1.4.4.3.3.2" xref="S3.SS1.p1.1.m1.4.4.3.3.2.cmml">
          e
         </mi>
         <mi id="S3.SS1.p1.1.m1.4.4.3.3.3" xref="S3.SS1.p1.1.m1.4.4.3.3.3.cmml">
          n
         </mi>
        </msub>
        <mo id="S3.SS1.p1.1.m1.5.5.4.9" xref="S3.SS1.p1.1.m1.5.5.5.cmml">
         ,
        </mo>
        <msub id="S3.SS1.p1.1.m1.5.5.4.4" xref="S3.SS1.p1.1.m1.5.5.4.4.cmml">
         <mi id="S3.SS1.p1.1.m1.5.5.4.4.2" xref="S3.SS1.p1.1.m1.5.5.4.4.2.cmml">
          a
         </mi>
         <mi id="S3.SS1.p1.1.m1.5.5.4.4.3" xref="S3.SS1.p1.1.m1.5.5.4.4.3.cmml">
          n
         </mi>
        </msub>
        <mo id="S3.SS1.p1.1.m1.5.5.4.10" stretchy="false" xref="S3.SS1.p1.1.m1.5.5.5.cmml">
         )
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.5b">
        <vector id="S3.SS1.p1.1.m1.5.5.5.cmml" xref="S3.SS1.p1.1.m1.5.5.4">
         <apply id="S3.SS1.p1.1.m1.2.2.1.1.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.2.2.1.1.1.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.p1.1.m1.2.2.1.1.2.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1.2">
           𝑒
          </ci>
          <cn id="S3.SS1.p1.1.m1.2.2.1.1.3.cmml" type="integer" xref="S3.SS1.p1.1.m1.2.2.1.1.3">
           1
          </cn>
         </apply>
         <apply id="S3.SS1.p1.1.m1.3.3.2.2.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2">
          <csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.3.3.2.2.1.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2">
           subscript
          </csymbol>
          <ci id="S3.SS1.p1.1.m1.3.3.2.2.2.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2.2">
           𝑎
          </ci>
          <cn id="S3.SS1.p1.1.m1.3.3.2.2.3.cmml" type="integer" xref="S3.SS1.p1.1.m1.3.3.2.2.3">
           1
          </cn>
         </apply>
         <ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">
          …
         </ci>
         <apply id="S3.SS1.p1.1.m1.4.4.3.3.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3">
          <csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.4.4.3.3.1.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3">
           subscript
          </csymbol>
          <ci id="S3.SS1.p1.1.m1.4.4.3.3.2.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.2">
           𝑒
          </ci>
          <ci id="S3.SS1.p1.1.m1.4.4.3.3.3.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3">
           𝑛
          </ci>
         </apply>
         <apply id="S3.SS1.p1.1.m1.5.5.4.4.cmml" xref="S3.SS1.p1.1.m1.5.5.4.4">
          <csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.5.5.4.4.1.cmml" xref="S3.SS1.p1.1.m1.5.5.4.4">
           subscript
          </csymbol>
          <ci id="S3.SS1.p1.1.m1.5.5.4.4.2.cmml" xref="S3.SS1.p1.1.m1.5.5.4.4.2">
           𝑎
          </ci>
          <ci id="S3.SS1.p1.1.m1.5.5.4.4.3.cmml" xref="S3.SS1.p1.1.m1.5.5.4.4.3">
           𝑛
          </ci>
         </apply>
        </vector>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.5c">
        (e_{1},a_{1},...,e_{n},a_{n})
       </annotation>
      </semantics>
     </math>
     . During this process, there are typically two roles involved: environment and agent.
     <math alttext="e_{i}" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.1">
      <semantics id="S3.SS1.p1.2.m2.1a">
       <msub id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml">
        <mi id="S3.SS1.p1.2.m2.1.1.2" xref="S3.SS1.p1.2.m2.1.1.2.cmml">
         e
        </mi>
        <mi id="S3.SS1.p1.2.m2.1.1.3" xref="S3.SS1.p1.2.m2.1.1.3.cmml">
         i
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b">
        <apply id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">
         <csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS1.p1.2.m2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.1.1.2">
          𝑒
         </ci>
         <ci id="S3.SS1.p1.2.m2.1.1.3.cmml" xref="S3.SS1.p1.2.m2.1.1.3">
          𝑖
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">
        e_{i}
       </annotation>
      </semantics>
     </math>
     represents the hints and feedback from the environment and the agent engages in thinking and actions represented as
     <math alttext="a_{i}" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.1">
      <semantics id="S3.SS1.p1.3.m3.1a">
       <msub id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml">
        <mi id="S3.SS1.p1.3.m3.1.1.2" xref="S3.SS1.p1.3.m3.1.1.2.cmml">
         a
        </mi>
        <mi id="S3.SS1.p1.3.m3.1.1.3" xref="S3.SS1.p1.3.m3.1.1.3.cmml">
         i
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b">
        <apply id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">
         <csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.1.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS1.p1.3.m3.1.1.2.cmml" xref="S3.SS1.p1.3.m3.1.1.2">
          𝑎
         </ci>
         <ci id="S3.SS1.p1.3.m3.1.1.3.cmml" xref="S3.SS1.p1.3.m3.1.1.3">
          𝑖
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">
        a_{i}
       </annotation>
      </semantics>
     </math>
     . Each dialogue track corresponds to a final reward
     <math alttext="r\in[0,1]" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m4.2">
      <semantics id="S3.SS1.p1.4.m4.2a">
       <mrow id="S3.SS1.p1.4.m4.2.3" xref="S3.SS1.p1.4.m4.2.3.cmml">
        <mi id="S3.SS1.p1.4.m4.2.3.2" xref="S3.SS1.p1.4.m4.2.3.2.cmml">
         r
        </mi>
        <mo id="S3.SS1.p1.4.m4.2.3.1" xref="S3.SS1.p1.4.m4.2.3.1.cmml">
         ∈
        </mo>
        <mrow id="S3.SS1.p1.4.m4.2.3.3.2" xref="S3.SS1.p1.4.m4.2.3.3.1.cmml">
         <mo id="S3.SS1.p1.4.m4.2.3.3.2.1" stretchy="false" xref="S3.SS1.p1.4.m4.2.3.3.1.cmml">
          [
         </mo>
         <mn id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml">
          0
         </mn>
         <mo id="S3.SS1.p1.4.m4.2.3.3.2.2" xref="S3.SS1.p1.4.m4.2.3.3.1.cmml">
          ,
         </mo>
         <mn id="S3.SS1.p1.4.m4.2.2" xref="S3.SS1.p1.4.m4.2.2.cmml">
          1
         </mn>
         <mo id="S3.SS1.p1.4.m4.2.3.3.2.3" stretchy="false" xref="S3.SS1.p1.4.m4.2.3.3.1.cmml">
          ]
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.2b">
        <apply id="S3.SS1.p1.4.m4.2.3.cmml" xref="S3.SS1.p1.4.m4.2.3">
         <in id="S3.SS1.p1.4.m4.2.3.1.cmml" xref="S3.SS1.p1.4.m4.2.3.1">
         </in>
         <ci id="S3.SS1.p1.4.m4.2.3.2.cmml" xref="S3.SS1.p1.4.m4.2.3.2">
          𝑟
         </ci>
         <interval closure="closed" id="S3.SS1.p1.4.m4.2.3.3.1.cmml" xref="S3.SS1.p1.4.m4.2.3.3.2">
          <cn id="S3.SS1.p1.4.m4.1.1.cmml" type="integer" xref="S3.SS1.p1.4.m4.1.1">
           0
          </cn>
          <cn id="S3.SS1.p1.4.m4.2.2.cmml" type="integer" xref="S3.SS1.p1.4.m4.2.2">
           1
          </cn>
         </interval>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.2c">
        r\in[0,1]
       </annotation>
      </semantics>
     </math>
     , which reflects the completion of the task.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S3.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     3.2
    </span>
    Supervised Tuning with General and Constructed Agent Data
   </h3>
   <div class="ltx_para" id="S3.SS2.p1">
    <p class="ltx_p" id="S3.SS2.p1.1">
     We observe a significant disparity in the agent capabilities between the open-source 7B and 13B LLMs and the commercial models. In the dialogue process, open-source models often exhibit issues such as formatting errors, getting stuck in infinite loops, and generating hallucinatory outputs. To reduce the occurrence of the above issues, a fundamental approach is to fine-tune the LLMs with appropriate data. However, the agent is engaged in multi-turn dialogues and interacts with specific environments, which is different from currently available open-source general-purpose instruction data. To solve this challenge, we leverage commercial models API to construct agent-specific data and merge them with general instruction datasets to fine-tune the low-parameter LLMs.
    </p>
   </div>
   <figure class="ltx_figure" id="S3.F2">
    <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="183" id="S3.F2.g1" src="/html/2403.19962/assets/Figs/agent-data-sft-1.png" width="293"/>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_figure">
      Figure 2:
     </span>
     The process of constructing agent data. For task planning and external tool usage capabilities, we use two strategies, respectively.
    </figcaption>
   </figure>
   <div class="ltx_para" id="S3.SS2.p2">
    <p class="ltx_p" id="S3.SS2.p2.1">
     As agents, LLMs need to possess three fundamental capabilities: task planning, long-term memory, and tool usage. To enhance the task planning capabilities of LLMs, we take ALFworld
     <cite class="ltx_cite ltx_citemacro_cite">
      Shridhar et al. (
      <a class="ltx_ref" href="#bib.bib19" title="">
       2020
      </a>
      )
     </cite>
     as an example to construct data with interactive trajectories. Unlike current methods of constructing data using models like GPT-3.5
     <cite class="ltx_cite ltx_citemacro_cite">
      OpenAI (
      <a class="ltx_ref" href="#bib.bib10" title="">
       2022
      </a>
      )
     </cite>
     , data for agents should not only involve multi-turn dialogues but also need to reflect task planning and trajectory. Therefore, we meticulously design the construction process of the dataset, dividing the process of each piece of data into three steps. It includes task construction, trajectory interaction, and manual filtering. This approach ensures that each piece of data captures the necessary elements for training agents effectively.
We utilize GPT-3.5 or GPT-4 to generate questions and interaction trajectories and this process can be easily extended to other agent tasks. As illustrated in Fig.
     <a class="ltx_ref" href="#S3.F2" title="Figure 2 ‣ 3.2 Supervised Tuning with General and Constructed Agent Data ‣ 3 Methodology ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     right, to generate a complete interaction trajectory, we simulate GPT playing three distinct roles in a household environment. These roles are named as
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.1">
      question generator
     </span>
     ,
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.2">
      action maker
     </span>
     , and
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.3">
      environmental agent
     </span>
     .
    </p>
   </div>
   <div class="ltx_para" id="S3.SS2.p3">
    <p class="ltx_p" id="S3.SS2.p3.1">
     First, we randomly initialize a specific room environment, determining the number and placement of household items. The
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p3.1.1">
      question generator
     </span>
     role is then responsible for generating intelligent household-related questions based on the provided environment. Subsequently, the
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p3.1.2">
      action maker
     </span>
     role continuously offers its thoughts and actions based on the environment feedback, simultaneously, the
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p3.1.3">
      environment agent
     </span>
     role provides reasonable feedback and cues corresponding to the actions taken in each step. These two roles continue to interact until the problem is completed or the maximum number of interactions is reached, thus generating a complete trajectory. However, as there is no assurance of the logical consistency of the
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p3.1.4">
      environment agent
     </span>
     ’s feedback and the
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p3.1.5">
      action maker
     </span>
     ’s actions, manual screening is required after the data is generated.
    </p>
   </div>
   <div class="ltx_para" id="S3.SS2.p4">
    <p class="ltx_p" id="S3.SS2.p4.1">
     In addition to agent tasks that focus on task planning, there are also agent tasks such as Operating System, and WebShop
     <cite class="ltx_cite ltx_citemacro_cite">
      Yao et al. (
      <a class="ltx_ref" href="#bib.bib28" title="">
       2022a
      </a>
      )
     </cite>
     that have fewer dialogue rounds and prioritize the use of external tools. For this type of task, we draw on the idea of in-context learning. Specifically, as shown in Fig.
     <a class="ltx_ref" href="#S3.F2" title="Figure 2 ‣ 3.2 Supervised Tuning with General and Constructed Agent Data ‣ 3 Methodology ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     left, we provide GPT with examples with complete reasoning trajectories to enable it to imitate. Subsequently, we manually filter and select logically consistent data from generated outputs. We expect to use this type of data to improve the retrieval capabilities and tool usage capabilities of LLMs.
    </p>
   </div>
   <div class="ltx_para" id="S3.SS2.p5">
    <p class="ltx_p" id="S3.SS2.p5.6">
     Existing work on agent fine-tuning
     <cite class="ltx_cite ltx_citemacro_cite">
      Zeng et al. (
      <a class="ltx_ref" href="#bib.bib31" title="">
       2023
      </a>
      )
     </cite>
     shows that using only agent data to fine-tune LLMs compromises their generalizability. Therefore, we mix some general instruction tunning data into our agent data when fine-tuning LLMs. Suppose
     <math alttext="M_{\theta}" class="ltx_Math" display="inline" id="S3.SS2.p5.1.m1.1">
      <semantics id="S3.SS2.p5.1.m1.1a">
       <msub id="S3.SS2.p5.1.m1.1.1" xref="S3.SS2.p5.1.m1.1.1.cmml">
        <mi id="S3.SS2.p5.1.m1.1.1.2" xref="S3.SS2.p5.1.m1.1.1.2.cmml">
         M
        </mi>
        <mi id="S3.SS2.p5.1.m1.1.1.3" xref="S3.SS2.p5.1.m1.1.1.3.cmml">
         θ
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p5.1.m1.1b">
        <apply id="S3.SS2.p5.1.m1.1.1.cmml" xref="S3.SS2.p5.1.m1.1.1">
         <csymbol cd="ambiguous" id="S3.SS2.p5.1.m1.1.1.1.cmml" xref="S3.SS2.p5.1.m1.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS2.p5.1.m1.1.1.2.cmml" xref="S3.SS2.p5.1.m1.1.1.2">
          𝑀
         </ci>
         <ci id="S3.SS2.p5.1.m1.1.1.3.cmml" xref="S3.SS2.p5.1.m1.1.1.3">
          𝜃
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p5.1.m1.1c">
        M_{\theta}
       </annotation>
      </semantics>
     </math>
     represents pre-trained LLMs and the
     <math alttext="M_{\theta}(y|x)" class="ltx_Math" display="inline" id="S3.SS2.p5.2.m2.1">
      <semantics id="S3.SS2.p5.2.m2.1a">
       <mrow id="S3.SS2.p5.2.m2.1.1" xref="S3.SS2.p5.2.m2.1.1.cmml">
        <msub id="S3.SS2.p5.2.m2.1.1.3" xref="S3.SS2.p5.2.m2.1.1.3.cmml">
         <mi id="S3.SS2.p5.2.m2.1.1.3.2" xref="S3.SS2.p5.2.m2.1.1.3.2.cmml">
          M
         </mi>
         <mi id="S3.SS2.p5.2.m2.1.1.3.3" xref="S3.SS2.p5.2.m2.1.1.3.3.cmml">
          θ
         </mi>
        </msub>
        <mo id="S3.SS2.p5.2.m2.1.1.2" lspace="0em" rspace="0em" xref="S3.SS2.p5.2.m2.1.1.2.cmml">
         ​
        </mo>
        <mrow id="S3.SS2.p5.2.m2.1.1.1.1" xref="S3.SS2.p5.2.m2.1.1.1.1.1.cmml">
         <mo id="S3.SS2.p5.2.m2.1.1.1.1.2" stretchy="false" xref="S3.SS2.p5.2.m2.1.1.1.1.1.cmml">
          (
         </mo>
         <mrow id="S3.SS2.p5.2.m2.1.1.1.1.1" xref="S3.SS2.p5.2.m2.1.1.1.1.1.cmml">
          <mi id="S3.SS2.p5.2.m2.1.1.1.1.1.2" xref="S3.SS2.p5.2.m2.1.1.1.1.1.2.cmml">
           y
          </mi>
          <mo fence="false" id="S3.SS2.p5.2.m2.1.1.1.1.1.1" xref="S3.SS2.p5.2.m2.1.1.1.1.1.1.cmml">
           |
          </mo>
          <mi id="S3.SS2.p5.2.m2.1.1.1.1.1.3" xref="S3.SS2.p5.2.m2.1.1.1.1.1.3.cmml">
           x
          </mi>
         </mrow>
         <mo id="S3.SS2.p5.2.m2.1.1.1.1.3" stretchy="false" xref="S3.SS2.p5.2.m2.1.1.1.1.1.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p5.2.m2.1b">
        <apply id="S3.SS2.p5.2.m2.1.1.cmml" xref="S3.SS2.p5.2.m2.1.1">
         <times id="S3.SS2.p5.2.m2.1.1.2.cmml" xref="S3.SS2.p5.2.m2.1.1.2">
         </times>
         <apply id="S3.SS2.p5.2.m2.1.1.3.cmml" xref="S3.SS2.p5.2.m2.1.1.3">
          <csymbol cd="ambiguous" id="S3.SS2.p5.2.m2.1.1.3.1.cmml" xref="S3.SS2.p5.2.m2.1.1.3">
           subscript
          </csymbol>
          <ci id="S3.SS2.p5.2.m2.1.1.3.2.cmml" xref="S3.SS2.p5.2.m2.1.1.3.2">
           𝑀
          </ci>
          <ci id="S3.SS2.p5.2.m2.1.1.3.3.cmml" xref="S3.SS2.p5.2.m2.1.1.3.3">
           𝜃
          </ci>
         </apply>
         <apply id="S3.SS2.p5.2.m2.1.1.1.1.1.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1">
          <csymbol cd="latexml" id="S3.SS2.p5.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1.1.1">
           conditional
          </csymbol>
          <ci id="S3.SS2.p5.2.m2.1.1.1.1.1.2.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1.1.2">
           𝑦
          </ci>
          <ci id="S3.SS2.p5.2.m2.1.1.1.1.1.3.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1.1.3">
           𝑥
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p5.2.m2.1c">
        M_{\theta}(y|x)
       </annotation>
      </semantics>
     </math>
     represents the probability distribution of output
     <math alttext="y" class="ltx_Math" display="inline" id="S3.SS2.p5.3.m3.1">
      <semantics id="S3.SS2.p5.3.m3.1a">
       <mi id="S3.SS2.p5.3.m3.1.1" xref="S3.SS2.p5.3.m3.1.1.cmml">
        y
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p5.3.m3.1b">
        <ci id="S3.SS2.p5.3.m3.1.1.cmml" xref="S3.SS2.p5.3.m3.1.1">
         𝑦
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p5.3.m3.1c">
        y
       </annotation>
      </semantics>
     </math>
     when given history
     <math alttext="x" class="ltx_Math" display="inline" id="S3.SS2.p5.4.m4.1">
      <semantics id="S3.SS2.p5.4.m4.1a">
       <mi id="S3.SS2.p5.4.m4.1.1" xref="S3.SS2.p5.4.m4.1.1.cmml">
        x
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p5.4.m4.1b">
        <ci id="S3.SS2.p5.4.m4.1.1.cmml" xref="S3.SS2.p5.4.m4.1.1">
         𝑥
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p5.4.m4.1c">
        x
       </annotation>
      </semantics>
     </math>
     . We consider two datasets: the agent data
     <math alttext="D_{agent}" class="ltx_Math" display="inline" id="S3.SS2.p5.5.m5.1">
      <semantics id="S3.SS2.p5.5.m5.1a">
       <msub id="S3.SS2.p5.5.m5.1.1" xref="S3.SS2.p5.5.m5.1.1.cmml">
        <mi id="S3.SS2.p5.5.m5.1.1.2" xref="S3.SS2.p5.5.m5.1.1.2.cmml">
         D
        </mi>
        <mrow id="S3.SS2.p5.5.m5.1.1.3" xref="S3.SS2.p5.5.m5.1.1.3.cmml">
         <mi id="S3.SS2.p5.5.m5.1.1.3.2" xref="S3.SS2.p5.5.m5.1.1.3.2.cmml">
          a
         </mi>
         <mo id="S3.SS2.p5.5.m5.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.p5.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.5.m5.1.1.3.3" xref="S3.SS2.p5.5.m5.1.1.3.3.cmml">
          g
         </mi>
         <mo id="S3.SS2.p5.5.m5.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.p5.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.5.m5.1.1.3.4" xref="S3.SS2.p5.5.m5.1.1.3.4.cmml">
          e
         </mi>
         <mo id="S3.SS2.p5.5.m5.1.1.3.1b" lspace="0em" rspace="0em" xref="S3.SS2.p5.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.5.m5.1.1.3.5" xref="S3.SS2.p5.5.m5.1.1.3.5.cmml">
          n
         </mi>
         <mo id="S3.SS2.p5.5.m5.1.1.3.1c" lspace="0em" rspace="0em" xref="S3.SS2.p5.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.5.m5.1.1.3.6" xref="S3.SS2.p5.5.m5.1.1.3.6.cmml">
          t
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p5.5.m5.1b">
        <apply id="S3.SS2.p5.5.m5.1.1.cmml" xref="S3.SS2.p5.5.m5.1.1">
         <csymbol cd="ambiguous" id="S3.SS2.p5.5.m5.1.1.1.cmml" xref="S3.SS2.p5.5.m5.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS2.p5.5.m5.1.1.2.cmml" xref="S3.SS2.p5.5.m5.1.1.2">
          𝐷
         </ci>
         <apply id="S3.SS2.p5.5.m5.1.1.3.cmml" xref="S3.SS2.p5.5.m5.1.1.3">
          <times id="S3.SS2.p5.5.m5.1.1.3.1.cmml" xref="S3.SS2.p5.5.m5.1.1.3.1">
          </times>
          <ci id="S3.SS2.p5.5.m5.1.1.3.2.cmml" xref="S3.SS2.p5.5.m5.1.1.3.2">
           𝑎
          </ci>
          <ci id="S3.SS2.p5.5.m5.1.1.3.3.cmml" xref="S3.SS2.p5.5.m5.1.1.3.3">
           𝑔
          </ci>
          <ci id="S3.SS2.p5.5.m5.1.1.3.4.cmml" xref="S3.SS2.p5.5.m5.1.1.3.4">
           𝑒
          </ci>
          <ci id="S3.SS2.p5.5.m5.1.1.3.5.cmml" xref="S3.SS2.p5.5.m5.1.1.3.5">
           𝑛
          </ci>
          <ci id="S3.SS2.p5.5.m5.1.1.3.6.cmml" xref="S3.SS2.p5.5.m5.1.1.3.6">
           𝑡
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p5.5.m5.1c">
        D_{agent}
       </annotation>
      </semantics>
     </math>
     and the general instruction tuning data
     <math alttext="D_{general}" class="ltx_Math" display="inline" id="S3.SS2.p5.6.m6.1">
      <semantics id="S3.SS2.p5.6.m6.1a">
       <msub id="S3.SS2.p5.6.m6.1.1" xref="S3.SS2.p5.6.m6.1.1.cmml">
        <mi id="S3.SS2.p5.6.m6.1.1.2" xref="S3.SS2.p5.6.m6.1.1.2.cmml">
         D
        </mi>
        <mrow id="S3.SS2.p5.6.m6.1.1.3" xref="S3.SS2.p5.6.m6.1.1.3.cmml">
         <mi id="S3.SS2.p5.6.m6.1.1.3.2" xref="S3.SS2.p5.6.m6.1.1.3.2.cmml">
          g
         </mi>
         <mo id="S3.SS2.p5.6.m6.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.p5.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.6.m6.1.1.3.3" xref="S3.SS2.p5.6.m6.1.1.3.3.cmml">
          e
         </mi>
         <mo id="S3.SS2.p5.6.m6.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.p5.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.6.m6.1.1.3.4" xref="S3.SS2.p5.6.m6.1.1.3.4.cmml">
          n
         </mi>
         <mo id="S3.SS2.p5.6.m6.1.1.3.1b" lspace="0em" rspace="0em" xref="S3.SS2.p5.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.6.m6.1.1.3.5" xref="S3.SS2.p5.6.m6.1.1.3.5.cmml">
          e
         </mi>
         <mo id="S3.SS2.p5.6.m6.1.1.3.1c" lspace="0em" rspace="0em" xref="S3.SS2.p5.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.6.m6.1.1.3.6" xref="S3.SS2.p5.6.m6.1.1.3.6.cmml">
          r
         </mi>
         <mo id="S3.SS2.p5.6.m6.1.1.3.1d" lspace="0em" rspace="0em" xref="S3.SS2.p5.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.6.m6.1.1.3.7" xref="S3.SS2.p5.6.m6.1.1.3.7.cmml">
          a
         </mi>
         <mo id="S3.SS2.p5.6.m6.1.1.3.1e" lspace="0em" rspace="0em" xref="S3.SS2.p5.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p5.6.m6.1.1.3.8" xref="S3.SS2.p5.6.m6.1.1.3.8.cmml">
          l
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p5.6.m6.1b">
        <apply id="S3.SS2.p5.6.m6.1.1.cmml" xref="S3.SS2.p5.6.m6.1.1">
         <csymbol cd="ambiguous" id="S3.SS2.p5.6.m6.1.1.1.cmml" xref="S3.SS2.p5.6.m6.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS2.p5.6.m6.1.1.2.cmml" xref="S3.SS2.p5.6.m6.1.1.2">
          𝐷
         </ci>
         <apply id="S3.SS2.p5.6.m6.1.1.3.cmml" xref="S3.SS2.p5.6.m6.1.1.3">
          <times id="S3.SS2.p5.6.m6.1.1.3.1.cmml" xref="S3.SS2.p5.6.m6.1.1.3.1">
          </times>
          <ci id="S3.SS2.p5.6.m6.1.1.3.2.cmml" xref="S3.SS2.p5.6.m6.1.1.3.2">
           𝑔
          </ci>
          <ci id="S3.SS2.p5.6.m6.1.1.3.3.cmml" xref="S3.SS2.p5.6.m6.1.1.3.3">
           𝑒
          </ci>
          <ci id="S3.SS2.p5.6.m6.1.1.3.4.cmml" xref="S3.SS2.p5.6.m6.1.1.3.4">
           𝑛
          </ci>
          <ci id="S3.SS2.p5.6.m6.1.1.3.5.cmml" xref="S3.SS2.p5.6.m6.1.1.3.5">
           𝑒
          </ci>
          <ci id="S3.SS2.p5.6.m6.1.1.3.6.cmml" xref="S3.SS2.p5.6.m6.1.1.3.6">
           𝑟
          </ci>
          <ci id="S3.SS2.p5.6.m6.1.1.3.7.cmml" xref="S3.SS2.p5.6.m6.1.1.3.7">
           𝑎
          </ci>
          <ci id="S3.SS2.p5.6.m6.1.1.3.8.cmml" xref="S3.SS2.p5.6.m6.1.1.3.8">
           𝑙
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p5.6.m6.1c">
        D_{general}
       </annotation>
      </semantics>
     </math>
     . We optimize the loss function as follows:
    </p>
   </div>
   <div class="ltx_para" id="S3.SS2.p6">
    <table class="ltx_equation ltx_eqn_table" id="S3.E1">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_eqn_cell ltx_align_center">
        <math alttext="\begin{split}\mathcal{L}(\theta)&amp;=\lambda\cdot\mathbf{E}_{(x,y)~{}D_{agent}}[logM_{\theta}(y|x)]\\
&amp;+(1-\lambda)\cdot\mathbf{E}_{(x,y)~{}D_{general}}[logM_{\theta}(y|x)].\end{split}" class="ltx_Math" display="block" id="S3.E1.m1.46">
         <semantics id="S3.E1.m1.46a">
          <mtable columnspacing="0pt" displaystyle="true" id="S3.E1.m1.46.46.3" rowspacing="0pt">
           <mtr id="S3.E1.m1.46.46.3a">
            <mtd class="ltx_align_right" columnalign="right" id="S3.E1.m1.46.46.3b">
             <mrow id="S3.E1.m1.4.4.4.4.4">
              <mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.1.1.1.1.1.1" xref="S3.E1.m1.1.1.1.1.1.1.cmml">
               ℒ
              </mi>
              <mo id="S3.E1.m1.4.4.4.4.4.5" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
               ​
              </mo>
              <mrow id="S3.E1.m1.4.4.4.4.4.6">
               <mo id="S3.E1.m1.2.2.2.2.2.2" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                (
               </mo>
               <mi id="S3.E1.m1.3.3.3.3.3.3" xref="S3.E1.m1.3.3.3.3.3.3.cmml">
                θ
               </mi>
               <mo id="S3.E1.m1.4.4.4.4.4.4" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                )
               </mo>
              </mrow>
             </mrow>
            </mtd>
            <mtd class="ltx_align_left" columnalign="left" id="S3.E1.m1.46.46.3c">
             <mrow id="S3.E1.m1.45.45.2.44.22.18">
              <mi id="S3.E1.m1.45.45.2.44.22.18.19" xref="S3.E1.m1.44.44.1.1.1.cmml">
              </mi>
              <mo id="S3.E1.m1.5.5.5.5.1.1" xref="S3.E1.m1.5.5.5.5.1.1.cmml">
               =
              </mo>
              <mrow id="S3.E1.m1.45.45.2.44.22.18.18">
               <mrow id="S3.E1.m1.45.45.2.44.22.18.18.3">
                <mi id="S3.E1.m1.6.6.6.6.2.2" xref="S3.E1.m1.6.6.6.6.2.2.cmml">
                 λ
                </mi>
                <mo id="S3.E1.m1.7.7.7.7.3.3" lspace="0.222em" rspace="0.222em" xref="S3.E1.m1.7.7.7.7.3.3.cmml">
                 ⋅
                </mo>
                <msub id="S3.E1.m1.45.45.2.44.22.18.18.3.1">
                 <mi id="S3.E1.m1.8.8.8.8.4.4" xref="S3.E1.m1.8.8.8.8.4.4.cmml">
                  𝐄
                 </mi>
                 <mrow id="S3.E1.m1.9.9.9.9.5.5.1" xref="S3.E1.m1.9.9.9.9.5.5.1.cmml">
                  <mrow id="S3.E1.m1.9.9.9.9.5.5.1.4.2" xref="S3.E1.m1.9.9.9.9.5.5.1.4.1.cmml">
                   <mo id="S3.E1.m1.9.9.9.9.5.5.1.4.2.1" stretchy="false" xref="S3.E1.m1.9.9.9.9.5.5.1.4.1.cmml">
                    (
                   </mo>
                   <mi id="S3.E1.m1.9.9.9.9.5.5.1.1" xref="S3.E1.m1.9.9.9.9.5.5.1.1.cmml">
                    x
                   </mi>
                   <mo id="S3.E1.m1.9.9.9.9.5.5.1.4.2.2" xref="S3.E1.m1.9.9.9.9.5.5.1.4.1.cmml">
                    ,
                   </mo>
                   <mi id="S3.E1.m1.9.9.9.9.5.5.1.2" xref="S3.E1.m1.9.9.9.9.5.5.1.2.cmml">
                    y
                   </mi>
                   <mo id="S3.E1.m1.9.9.9.9.5.5.1.4.2.3" stretchy="false" xref="S3.E1.m1.9.9.9.9.5.5.1.4.1.cmml">
                    )
                   </mo>
                  </mrow>
                  <mo id="S3.E1.m1.9.9.9.9.5.5.1.3" lspace="0.230em" rspace="0em" xref="S3.E1.m1.9.9.9.9.5.5.1.3.cmml">
                   ​
                  </mo>
                  <msub id="S3.E1.m1.9.9.9.9.5.5.1.5" xref="S3.E1.m1.9.9.9.9.5.5.1.5.cmml">
                   <mi id="S3.E1.m1.9.9.9.9.5.5.1.5.2" xref="S3.E1.m1.9.9.9.9.5.5.1.5.2.cmml">
                    D
                   </mi>
                   <mrow id="S3.E1.m1.9.9.9.9.5.5.1.5.3" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.cmml">
                    <mi id="S3.E1.m1.9.9.9.9.5.5.1.5.3.2" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.2.cmml">
                     a
                    </mi>
                    <mo id="S3.E1.m1.9.9.9.9.5.5.1.5.3.1" lspace="0em" rspace="0em" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.1.cmml">
                     ​
                    </mo>
                    <mi id="S3.E1.m1.9.9.9.9.5.5.1.5.3.3" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.3.cmml">
                     g
                    </mi>
                    <mo id="S3.E1.m1.9.9.9.9.5.5.1.5.3.1a" lspace="0em" rspace="0em" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.1.cmml">
                     ​
                    </mo>
                    <mi id="S3.E1.m1.9.9.9.9.5.5.1.5.3.4" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.4.cmml">
                     e
                    </mi>
                    <mo id="S3.E1.m1.9.9.9.9.5.5.1.5.3.1b" lspace="0em" rspace="0em" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.1.cmml">
                     ​
                    </mo>
                    <mi id="S3.E1.m1.9.9.9.9.5.5.1.5.3.5" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.5.cmml">
                     n
                    </mi>
                    <mo id="S3.E1.m1.9.9.9.9.5.5.1.5.3.1c" lspace="0em" rspace="0em" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.1.cmml">
                     ​
                    </mo>
                    <mi id="S3.E1.m1.9.9.9.9.5.5.1.5.3.6" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.6.cmml">
                     t
                    </mi>
                   </mrow>
                  </msub>
                 </mrow>
                </msub>
               </mrow>
               <mo id="S3.E1.m1.45.45.2.44.22.18.18.2" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                ​
               </mo>
               <mrow id="S3.E1.m1.45.45.2.44.22.18.18.1.1">
                <mo id="S3.E1.m1.10.10.10.10.6.6" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                 [
                </mo>
                <mrow id="S3.E1.m1.45.45.2.44.22.18.18.1.1.1">
                 <mi id="S3.E1.m1.11.11.11.11.7.7" xref="S3.E1.m1.11.11.11.11.7.7.cmml">
                  l
                 </mi>
                 <mo id="S3.E1.m1.45.45.2.44.22.18.18.1.1.1.2" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                  ​
                 </mo>
                 <mi id="S3.E1.m1.12.12.12.12.8.8" xref="S3.E1.m1.12.12.12.12.8.8.cmml">
                  o
                 </mi>
                 <mo id="S3.E1.m1.45.45.2.44.22.18.18.1.1.1.2a" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                  ​
                 </mo>
                 <mi id="S3.E1.m1.13.13.13.13.9.9" xref="S3.E1.m1.13.13.13.13.9.9.cmml">
                  g
                 </mi>
                 <mo id="S3.E1.m1.45.45.2.44.22.18.18.1.1.1.2b" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                  ​
                 </mo>
                 <msub id="S3.E1.m1.45.45.2.44.22.18.18.1.1.1.3">
                  <mi id="S3.E1.m1.14.14.14.14.10.10" xref="S3.E1.m1.14.14.14.14.10.10.cmml">
                   M
                  </mi>
                  <mi id="S3.E1.m1.15.15.15.15.11.11.1" xref="S3.E1.m1.15.15.15.15.11.11.1.cmml">
                   θ
                  </mi>
                 </msub>
                 <mo id="S3.E1.m1.45.45.2.44.22.18.18.1.1.1.2c" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                  ​
                 </mo>
                 <mrow id="S3.E1.m1.45.45.2.44.22.18.18.1.1.1.1.1">
                  <mo id="S3.E1.m1.16.16.16.16.12.12" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                   (
                  </mo>
                  <mrow id="S3.E1.m1.45.45.2.44.22.18.18.1.1.1.1.1.1">
                   <mi id="S3.E1.m1.17.17.17.17.13.13" xref="S3.E1.m1.17.17.17.17.13.13.cmml">
                    y
                   </mi>
                   <mo fence="false" id="S3.E1.m1.18.18.18.18.14.14" xref="S3.E1.m1.18.18.18.18.14.14.cmml">
                    |
                   </mo>
                   <mi id="S3.E1.m1.19.19.19.19.15.15" xref="S3.E1.m1.19.19.19.19.15.15.cmml">
                    x
                   </mi>
                  </mrow>
                  <mo id="S3.E1.m1.20.20.20.20.16.16" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                   )
                  </mo>
                 </mrow>
                </mrow>
                <mo id="S3.E1.m1.21.21.21.21.17.17" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                 ]
                </mo>
               </mrow>
              </mrow>
             </mrow>
            </mtd>
           </mtr>
           <mtr id="S3.E1.m1.46.46.3d">
            <mtd id="S3.E1.m1.46.46.3e" xref="S3.E1.m1.44.44.1.1.1.cmml">
            </mtd>
            <mtd class="ltx_align_left" columnalign="left" id="S3.E1.m1.46.46.3f">
             <mrow id="S3.E1.m1.46.46.3.45.23.23.23">
              <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1">
               <mo id="S3.E1.m1.46.46.3.45.23.23.23.1a" xref="S3.E1.m1.44.44.1.1.1.cmml">
                +
               </mo>
               <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1.2">
                <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1.1.1">
                 <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1.1.1.1.1">
                  <mo id="S3.E1.m1.23.23.23.2.2.2" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                   (
                  </mo>
                  <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1.1.1.1.1.1">
                   <mn id="S3.E1.m1.24.24.24.3.3.3" xref="S3.E1.m1.24.24.24.3.3.3.cmml">
                    1
                   </mn>
                   <mo id="S3.E1.m1.25.25.25.4.4.4" xref="S3.E1.m1.25.25.25.4.4.4.cmml">
                    −
                   </mo>
                   <mi id="S3.E1.m1.26.26.26.5.5.5" xref="S3.E1.m1.26.26.26.5.5.5.cmml">
                    λ
                   </mi>
                  </mrow>
                  <mo id="S3.E1.m1.27.27.27.6.6.6" rspace="0.055em" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                   )
                  </mo>
                 </mrow>
                 <mo id="S3.E1.m1.28.28.28.7.7.7" rspace="0.222em" xref="S3.E1.m1.28.28.28.7.7.7.cmml">
                  ⋅
                 </mo>
                 <msub id="S3.E1.m1.46.46.3.45.23.23.23.1.1.1.2">
                  <mi id="S3.E1.m1.29.29.29.8.8.8" xref="S3.E1.m1.29.29.29.8.8.8.cmml">
                   𝐄
                  </mi>
                  <mrow id="S3.E1.m1.30.30.30.9.9.9.1" xref="S3.E1.m1.30.30.30.9.9.9.1.cmml">
                   <mrow id="S3.E1.m1.30.30.30.9.9.9.1.4.2" xref="S3.E1.m1.30.30.30.9.9.9.1.4.1.cmml">
                    <mo id="S3.E1.m1.30.30.30.9.9.9.1.4.2.1" stretchy="false" xref="S3.E1.m1.30.30.30.9.9.9.1.4.1.cmml">
                     (
                    </mo>
                    <mi id="S3.E1.m1.30.30.30.9.9.9.1.1" xref="S3.E1.m1.30.30.30.9.9.9.1.1.cmml">
                     x
                    </mi>
                    <mo id="S3.E1.m1.30.30.30.9.9.9.1.4.2.2" xref="S3.E1.m1.30.30.30.9.9.9.1.4.1.cmml">
                     ,
                    </mo>
                    <mi id="S3.E1.m1.30.30.30.9.9.9.1.2" xref="S3.E1.m1.30.30.30.9.9.9.1.2.cmml">
                     y
                    </mi>
                    <mo id="S3.E1.m1.30.30.30.9.9.9.1.4.2.3" stretchy="false" xref="S3.E1.m1.30.30.30.9.9.9.1.4.1.cmml">
                     )
                    </mo>
                   </mrow>
                   <mo id="S3.E1.m1.30.30.30.9.9.9.1.3" lspace="0.230em" rspace="0em" xref="S3.E1.m1.30.30.30.9.9.9.1.3.cmml">
                    ​
                   </mo>
                   <msub id="S3.E1.m1.30.30.30.9.9.9.1.5" xref="S3.E1.m1.30.30.30.9.9.9.1.5.cmml">
                    <mi id="S3.E1.m1.30.30.30.9.9.9.1.5.2" xref="S3.E1.m1.30.30.30.9.9.9.1.5.2.cmml">
                     D
                    </mi>
                    <mrow id="S3.E1.m1.30.30.30.9.9.9.1.5.3" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.cmml">
                     <mi id="S3.E1.m1.30.30.30.9.9.9.1.5.3.2" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.2.cmml">
                      g
                     </mi>
                     <mo id="S3.E1.m1.30.30.30.9.9.9.1.5.3.1" lspace="0em" rspace="0em" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.1.cmml">
                      ​
                     </mo>
                     <mi id="S3.E1.m1.30.30.30.9.9.9.1.5.3.3" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.3.cmml">
                      e
                     </mi>
                     <mo id="S3.E1.m1.30.30.30.9.9.9.1.5.3.1a" lspace="0em" rspace="0em" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.1.cmml">
                      ​
                     </mo>
                     <mi id="S3.E1.m1.30.30.30.9.9.9.1.5.3.4" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.4.cmml">
                      n
                     </mi>
                     <mo id="S3.E1.m1.30.30.30.9.9.9.1.5.3.1b" lspace="0em" rspace="0em" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.1.cmml">
                      ​
                     </mo>
                     <mi id="S3.E1.m1.30.30.30.9.9.9.1.5.3.5" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.5.cmml">
                      e
                     </mi>
                     <mo id="S3.E1.m1.30.30.30.9.9.9.1.5.3.1c" lspace="0em" rspace="0em" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.1.cmml">
                      ​
                     </mo>
                     <mi id="S3.E1.m1.30.30.30.9.9.9.1.5.3.6" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.6.cmml">
                      r
                     </mi>
                     <mo id="S3.E1.m1.30.30.30.9.9.9.1.5.3.1d" lspace="0em" rspace="0em" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.1.cmml">
                      ​
                     </mo>
                     <mi id="S3.E1.m1.30.30.30.9.9.9.1.5.3.7" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.7.cmml">
                      a
                     </mi>
                     <mo id="S3.E1.m1.30.30.30.9.9.9.1.5.3.1e" lspace="0em" rspace="0em" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.1.cmml">
                      ​
                     </mo>
                     <mi id="S3.E1.m1.30.30.30.9.9.9.1.5.3.8" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.8.cmml">
                      l
                     </mi>
                    </mrow>
                   </msub>
                  </mrow>
                 </msub>
                </mrow>
                <mo id="S3.E1.m1.46.46.3.45.23.23.23.1.2.3" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                 ​
                </mo>
                <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1">
                 <mo id="S3.E1.m1.31.31.31.10.10.10" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                  [
                 </mo>
                 <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1.1">
                  <mi id="S3.E1.m1.32.32.32.11.11.11" xref="S3.E1.m1.32.32.32.11.11.11.cmml">
                   l
                  </mi>
                  <mo id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1.1.2" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                   ​
                  </mo>
                  <mi id="S3.E1.m1.33.33.33.12.12.12" xref="S3.E1.m1.33.33.33.12.12.12.cmml">
                   o
                  </mi>
                  <mo id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1.1.2a" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                   ​
                  </mo>
                  <mi id="S3.E1.m1.34.34.34.13.13.13" xref="S3.E1.m1.34.34.34.13.13.13.cmml">
                   g
                  </mi>
                  <mo id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1.1.2b" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                   ​
                  </mo>
                  <msub id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1.1.3">
                   <mi id="S3.E1.m1.35.35.35.14.14.14" xref="S3.E1.m1.35.35.35.14.14.14.cmml">
                    M
                   </mi>
                   <mi id="S3.E1.m1.36.36.36.15.15.15.1" xref="S3.E1.m1.36.36.36.15.15.15.1.cmml">
                    θ
                   </mi>
                  </msub>
                  <mo id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1.1.2c" lspace="0em" rspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
                   ​
                  </mo>
                  <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1.1.1.1">
                   <mo id="S3.E1.m1.37.37.37.16.16.16" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                    (
                   </mo>
                   <mrow id="S3.E1.m1.46.46.3.45.23.23.23.1.2.2.1.1.1.1.1">
                    <mi id="S3.E1.m1.38.38.38.17.17.17" xref="S3.E1.m1.38.38.38.17.17.17.cmml">
                     y
                    </mi>
                    <mo fence="false" id="S3.E1.m1.39.39.39.18.18.18" xref="S3.E1.m1.39.39.39.18.18.18.cmml">
                     |
                    </mo>
                    <mi id="S3.E1.m1.40.40.40.19.19.19" xref="S3.E1.m1.40.40.40.19.19.19.cmml">
                     x
                    </mi>
                   </mrow>
                   <mo id="S3.E1.m1.41.41.41.20.20.20" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                    )
                   </mo>
                  </mrow>
                 </mrow>
                 <mo id="S3.E1.m1.42.42.42.21.21.21" stretchy="false" xref="S3.E1.m1.44.44.1.1.1.cmml">
                  ]
                 </mo>
                </mrow>
               </mrow>
              </mrow>
              <mo id="S3.E1.m1.43.43.43.22.22.22" lspace="0em" xref="S3.E1.m1.44.44.1.1.1.cmml">
               .
              </mo>
             </mrow>
            </mtd>
           </mtr>
          </mtable>
          <annotation-xml encoding="MathML-Content" id="S3.E1.m1.46b">
           <apply id="S3.E1.m1.44.44.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
            <eq id="S3.E1.m1.5.5.5.5.1.1.cmml" xref="S3.E1.m1.5.5.5.5.1.1">
            </eq>
            <apply id="S3.E1.m1.44.44.1.1.1.5.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
             <times id="S3.E1.m1.44.44.1.1.1.5.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
             </times>
             <ci id="S3.E1.m1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1">
              ℒ
             </ci>
             <ci id="S3.E1.m1.3.3.3.3.3.3.cmml" xref="S3.E1.m1.3.3.3.3.3.3">
              𝜃
             </ci>
            </apply>
            <apply id="S3.E1.m1.44.44.1.1.1.3.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
             <plus id="S3.E1.m1.22.22.22.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
             </plus>
             <apply id="S3.E1.m1.44.44.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
              <times id="S3.E1.m1.44.44.1.1.1.1.1.2.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
              </times>
              <apply id="S3.E1.m1.44.44.1.1.1.1.1.3.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
               <ci id="S3.E1.m1.7.7.7.7.3.3.cmml" xref="S3.E1.m1.7.7.7.7.3.3">
                ⋅
               </ci>
               <ci id="S3.E1.m1.6.6.6.6.2.2.cmml" xref="S3.E1.m1.6.6.6.6.2.2">
                𝜆
               </ci>
               <apply id="S3.E1.m1.44.44.1.1.1.1.1.3.3.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                <csymbol cd="ambiguous" id="S3.E1.m1.44.44.1.1.1.1.1.3.3.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                 subscript
                </csymbol>
                <ci id="S3.E1.m1.8.8.8.8.4.4.cmml" xref="S3.E1.m1.8.8.8.8.4.4">
                 𝐄
                </ci>
                <apply id="S3.E1.m1.9.9.9.9.5.5.1.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1">
                 <times id="S3.E1.m1.9.9.9.9.5.5.1.3.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.3">
                 </times>
                 <interval closure="open" id="S3.E1.m1.9.9.9.9.5.5.1.4.1.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.4.2">
                  <ci id="S3.E1.m1.9.9.9.9.5.5.1.1.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.1">
                   𝑥
                  </ci>
                  <ci id="S3.E1.m1.9.9.9.9.5.5.1.2.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.2">
                   𝑦
                  </ci>
                 </interval>
                 <apply id="S3.E1.m1.9.9.9.9.5.5.1.5.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5">
                  <csymbol cd="ambiguous" id="S3.E1.m1.9.9.9.9.5.5.1.5.1.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5">
                   subscript
                  </csymbol>
                  <ci id="S3.E1.m1.9.9.9.9.5.5.1.5.2.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5.2">
                   𝐷
                  </ci>
                  <apply id="S3.E1.m1.9.9.9.9.5.5.1.5.3.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3">
                   <times id="S3.E1.m1.9.9.9.9.5.5.1.5.3.1.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.1">
                   </times>
                   <ci id="S3.E1.m1.9.9.9.9.5.5.1.5.3.2.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.2">
                    𝑎
                   </ci>
                   <ci id="S3.E1.m1.9.9.9.9.5.5.1.5.3.3.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.3">
                    𝑔
                   </ci>
                   <ci id="S3.E1.m1.9.9.9.9.5.5.1.5.3.4.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.4">
                    𝑒
                   </ci>
                   <ci id="S3.E1.m1.9.9.9.9.5.5.1.5.3.5.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.5">
                    𝑛
                   </ci>
                   <ci id="S3.E1.m1.9.9.9.9.5.5.1.5.3.6.cmml" xref="S3.E1.m1.9.9.9.9.5.5.1.5.3.6">
                    𝑡
                   </ci>
                  </apply>
                 </apply>
                </apply>
               </apply>
              </apply>
              <apply id="S3.E1.m1.44.44.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
               <csymbol cd="latexml" id="S3.E1.m1.44.44.1.1.1.1.1.1.2.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                delimited-[]
               </csymbol>
               <apply id="S3.E1.m1.44.44.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                <times id="S3.E1.m1.44.44.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                </times>
                <ci id="S3.E1.m1.11.11.11.11.7.7.cmml" xref="S3.E1.m1.11.11.11.11.7.7">
                 𝑙
                </ci>
                <ci id="S3.E1.m1.12.12.12.12.8.8.cmml" xref="S3.E1.m1.12.12.12.12.8.8">
                 𝑜
                </ci>
                <ci id="S3.E1.m1.13.13.13.13.9.9.cmml" xref="S3.E1.m1.13.13.13.13.9.9">
                 𝑔
                </ci>
                <apply id="S3.E1.m1.44.44.1.1.1.1.1.1.1.1.6.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                 <csymbol cd="ambiguous" id="S3.E1.m1.44.44.1.1.1.1.1.1.1.1.6.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                  subscript
                 </csymbol>
                 <ci id="S3.E1.m1.14.14.14.14.10.10.cmml" xref="S3.E1.m1.14.14.14.14.10.10">
                  𝑀
                 </ci>
                 <ci id="S3.E1.m1.15.15.15.15.11.11.1.cmml" xref="S3.E1.m1.15.15.15.15.11.11.1">
                  𝜃
                 </ci>
                </apply>
                <apply id="S3.E1.m1.44.44.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                 <csymbol cd="latexml" id="S3.E1.m1.18.18.18.18.14.14.cmml" xref="S3.E1.m1.18.18.18.18.14.14">
                  conditional
                 </csymbol>
                 <ci id="S3.E1.m1.17.17.17.17.13.13.cmml" xref="S3.E1.m1.17.17.17.17.13.13">
                  𝑦
                 </ci>
                 <ci id="S3.E1.m1.19.19.19.19.15.15.cmml" xref="S3.E1.m1.19.19.19.19.15.15">
                  𝑥
                 </ci>
                </apply>
               </apply>
              </apply>
             </apply>
             <apply id="S3.E1.m1.44.44.1.1.1.3.3.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
              <times id="S3.E1.m1.44.44.1.1.1.3.3.3.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
              </times>
              <apply id="S3.E1.m1.44.44.1.1.1.2.2.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
               <ci id="S3.E1.m1.28.28.28.7.7.7.cmml" xref="S3.E1.m1.28.28.28.7.7.7">
                ⋅
               </ci>
               <apply id="S3.E1.m1.44.44.1.1.1.2.2.1.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                <minus id="S3.E1.m1.25.25.25.4.4.4.cmml" xref="S3.E1.m1.25.25.25.4.4.4">
                </minus>
                <cn id="S3.E1.m1.24.24.24.3.3.3.cmml" type="integer" xref="S3.E1.m1.24.24.24.3.3.3">
                 1
                </cn>
                <ci id="S3.E1.m1.26.26.26.5.5.5.cmml" xref="S3.E1.m1.26.26.26.5.5.5">
                 𝜆
                </ci>
               </apply>
               <apply id="S3.E1.m1.44.44.1.1.1.2.2.1.3.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                <csymbol cd="ambiguous" id="S3.E1.m1.44.44.1.1.1.2.2.1.3.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                 subscript
                </csymbol>
                <ci id="S3.E1.m1.29.29.29.8.8.8.cmml" xref="S3.E1.m1.29.29.29.8.8.8">
                 𝐄
                </ci>
                <apply id="S3.E1.m1.30.30.30.9.9.9.1.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1">
                 <times id="S3.E1.m1.30.30.30.9.9.9.1.3.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.3">
                 </times>
                 <interval closure="open" id="S3.E1.m1.30.30.30.9.9.9.1.4.1.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.4.2">
                  <ci id="S3.E1.m1.30.30.30.9.9.9.1.1.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.1">
                   𝑥
                  </ci>
                  <ci id="S3.E1.m1.30.30.30.9.9.9.1.2.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.2">
                   𝑦
                  </ci>
                 </interval>
                 <apply id="S3.E1.m1.30.30.30.9.9.9.1.5.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5">
                  <csymbol cd="ambiguous" id="S3.E1.m1.30.30.30.9.9.9.1.5.1.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5">
                   subscript
                  </csymbol>
                  <ci id="S3.E1.m1.30.30.30.9.9.9.1.5.2.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.2">
                   𝐷
                  </ci>
                  <apply id="S3.E1.m1.30.30.30.9.9.9.1.5.3.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3">
                   <times id="S3.E1.m1.30.30.30.9.9.9.1.5.3.1.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.1">
                   </times>
                   <ci id="S3.E1.m1.30.30.30.9.9.9.1.5.3.2.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.2">
                    𝑔
                   </ci>
                   <ci id="S3.E1.m1.30.30.30.9.9.9.1.5.3.3.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.3">
                    𝑒
                   </ci>
                   <ci id="S3.E1.m1.30.30.30.9.9.9.1.5.3.4.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.4">
                    𝑛
                   </ci>
                   <ci id="S3.E1.m1.30.30.30.9.9.9.1.5.3.5.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.5">
                    𝑒
                   </ci>
                   <ci id="S3.E1.m1.30.30.30.9.9.9.1.5.3.6.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.6">
                    𝑟
                   </ci>
                   <ci id="S3.E1.m1.30.30.30.9.9.9.1.5.3.7.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.7">
                    𝑎
                   </ci>
                   <ci id="S3.E1.m1.30.30.30.9.9.9.1.5.3.8.cmml" xref="S3.E1.m1.30.30.30.9.9.9.1.5.3.8">
                    𝑙
                   </ci>
                  </apply>
                 </apply>
                </apply>
               </apply>
              </apply>
              <apply id="S3.E1.m1.44.44.1.1.1.3.3.2.2.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
               <csymbol cd="latexml" id="S3.E1.m1.44.44.1.1.1.3.3.2.2.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                delimited-[]
               </csymbol>
               <apply id="S3.E1.m1.44.44.1.1.1.3.3.2.1.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                <times id="S3.E1.m1.44.44.1.1.1.3.3.2.1.1.2.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                </times>
                <ci id="S3.E1.m1.32.32.32.11.11.11.cmml" xref="S3.E1.m1.32.32.32.11.11.11">
                 𝑙
                </ci>
                <ci id="S3.E1.m1.33.33.33.12.12.12.cmml" xref="S3.E1.m1.33.33.33.12.12.12">
                 𝑜
                </ci>
                <ci id="S3.E1.m1.34.34.34.13.13.13.cmml" xref="S3.E1.m1.34.34.34.13.13.13">
                 𝑔
                </ci>
                <apply id="S3.E1.m1.44.44.1.1.1.3.3.2.1.1.6.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                 <csymbol cd="ambiguous" id="S3.E1.m1.44.44.1.1.1.3.3.2.1.1.6.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                  subscript
                 </csymbol>
                 <ci id="S3.E1.m1.35.35.35.14.14.14.cmml" xref="S3.E1.m1.35.35.35.14.14.14">
                  𝑀
                 </ci>
                 <ci id="S3.E1.m1.36.36.36.15.15.15.1.cmml" xref="S3.E1.m1.36.36.36.15.15.15.1">
                  𝜃
                 </ci>
                </apply>
                <apply id="S3.E1.m1.44.44.1.1.1.3.3.2.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.4.4.4.5">
                 <csymbol cd="latexml" id="S3.E1.m1.39.39.39.18.18.18.cmml" xref="S3.E1.m1.39.39.39.18.18.18">
                  conditional
                 </csymbol>
                 <ci id="S3.E1.m1.38.38.38.17.17.17.cmml" xref="S3.E1.m1.38.38.38.17.17.17">
                  𝑦
                 </ci>
                 <ci id="S3.E1.m1.40.40.40.19.19.19.cmml" xref="S3.E1.m1.40.40.40.19.19.19">
                  𝑥
                 </ci>
                </apply>
               </apply>
              </apply>
             </apply>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S3.E1.m1.46c">
           \begin{split}\mathcal{L}(\theta)&amp;=\lambda\cdot\mathbf{E}_{(x,y)~{}D_{agent}}[logM_{\theta}(y|x)]\\
&amp;+(1-\lambda)\cdot\mathbf{E}_{(x,y)~{}D_{general}}[logM_{\theta}(y|x)].\end{split}
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
       <td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1">
        <span class="ltx_tag ltx_tag_equation ltx_align_right">
         (1)
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </div>
   <div class="ltx_para" id="S3.SS2.p7">
    <p class="ltx_p" id="S3.SS2.p7.5">
     Where
     <math alttext="\lambda\in[0,1]" class="ltx_Math" display="inline" id="S3.SS2.p7.1.m1.2">
      <semantics id="S3.SS2.p7.1.m1.2a">
       <mrow id="S3.SS2.p7.1.m1.2.3" xref="S3.SS2.p7.1.m1.2.3.cmml">
        <mi id="S3.SS2.p7.1.m1.2.3.2" xref="S3.SS2.p7.1.m1.2.3.2.cmml">
         λ
        </mi>
        <mo id="S3.SS2.p7.1.m1.2.3.1" xref="S3.SS2.p7.1.m1.2.3.1.cmml">
         ∈
        </mo>
        <mrow id="S3.SS2.p7.1.m1.2.3.3.2" xref="S3.SS2.p7.1.m1.2.3.3.1.cmml">
         <mo id="S3.SS2.p7.1.m1.2.3.3.2.1" stretchy="false" xref="S3.SS2.p7.1.m1.2.3.3.1.cmml">
          [
         </mo>
         <mn id="S3.SS2.p7.1.m1.1.1" xref="S3.SS2.p7.1.m1.1.1.cmml">
          0
         </mn>
         <mo id="S3.SS2.p7.1.m1.2.3.3.2.2" xref="S3.SS2.p7.1.m1.2.3.3.1.cmml">
          ,
         </mo>
         <mn id="S3.SS2.p7.1.m1.2.2" xref="S3.SS2.p7.1.m1.2.2.cmml">
          1
         </mn>
         <mo id="S3.SS2.p7.1.m1.2.3.3.2.3" stretchy="false" xref="S3.SS2.p7.1.m1.2.3.3.1.cmml">
          ]
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p7.1.m1.2b">
        <apply id="S3.SS2.p7.1.m1.2.3.cmml" xref="S3.SS2.p7.1.m1.2.3">
         <in id="S3.SS2.p7.1.m1.2.3.1.cmml" xref="S3.SS2.p7.1.m1.2.3.1">
         </in>
         <ci id="S3.SS2.p7.1.m1.2.3.2.cmml" xref="S3.SS2.p7.1.m1.2.3.2">
          𝜆
         </ci>
         <interval closure="closed" id="S3.SS2.p7.1.m1.2.3.3.1.cmml" xref="S3.SS2.p7.1.m1.2.3.3.2">
          <cn id="S3.SS2.p7.1.m1.1.1.cmml" type="integer" xref="S3.SS2.p7.1.m1.1.1">
           0
          </cn>
          <cn id="S3.SS2.p7.1.m1.2.2.cmml" type="integer" xref="S3.SS2.p7.1.m1.2.2">
           1
          </cn>
         </interval>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p7.1.m1.2c">
        \lambda\in[0,1]
       </annotation>
      </semantics>
     </math>
     denotes the mix ratio of the two datasets. A larger
     <math alttext="\lambda" class="ltx_Math" display="inline" id="S3.SS2.p7.2.m2.1">
      <semantics id="S3.SS2.p7.2.m2.1a">
       <mi id="S3.SS2.p7.2.m2.1.1" xref="S3.SS2.p7.2.m2.1.1.cmml">
        λ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p7.2.m2.1b">
        <ci id="S3.SS2.p7.2.m2.1.1.cmml" xref="S3.SS2.p7.2.m2.1.1">
         𝜆
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p7.2.m2.1c">
        \lambda
       </annotation>
      </semantics>
     </math>
     means that the LLMs are inclined to specific agent capabilities, whereas a small
     <math alttext="\lambda" class="ltx_Math" display="inline" id="S3.SS2.p7.3.m3.1">
      <semantics id="S3.SS2.p7.3.m3.1a">
       <mi id="S3.SS2.p7.3.m3.1.1" xref="S3.SS2.p7.3.m3.1.1.cmml">
        λ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p7.3.m3.1b">
        <ci id="S3.SS2.p7.3.m3.1.1.cmml" xref="S3.SS2.p7.3.m3.1.1">
         𝜆
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p7.3.m3.1c">
        \lambda
       </annotation>
      </semantics>
     </math>
     makes LLMs more inclined to general capabilities. We observe that deterioration of the general ability of LLMs will also decrease the agent ability, so we set a small value for
     <math alttext="\lambda" class="ltx_Math" display="inline" id="S3.SS2.p7.4.m4.1">
      <semantics id="S3.SS2.p7.4.m4.1a">
       <mi id="S3.SS2.p7.4.m4.1.1" xref="S3.SS2.p7.4.m4.1.1.cmml">
        λ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p7.4.m4.1b">
        <ci id="S3.SS2.p7.4.m4.1.1.cmml" xref="S3.SS2.p7.4.m4.1.1">
         𝜆
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p7.4.m4.1c">
        \lambda
       </annotation>
      </semantics>
     </math>
     . This is identical to AgentTuning
     <cite class="ltx_cite ltx_citemacro_cite">
      Zeng et al. (
      <a class="ltx_ref" href="#bib.bib31" title="">
       2023
      </a>
      )
     </cite>
     . In the experimental section, we analyze different values of
     <math alttext="\lambda" class="ltx_Math" display="inline" id="S3.SS2.p7.5.m5.1">
      <semantics id="S3.SS2.p7.5.m5.1a">
       <mi id="S3.SS2.p7.5.m5.1.1" xref="S3.SS2.p7.5.m5.1.1.cmml">
        λ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p7.5.m5.1b">
        <ci id="S3.SS2.p7.5.m5.1.1.cmml" xref="S3.SS2.p7.5.m5.1.1">
         𝜆
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p7.5.m5.1c">
        \lambda
       </annotation>
      </semantics>
     </math>
     .
    </p>
   </div>
   <div class="ltx_para" id="S3.SS2.p8">
    <p class="ltx_p" id="S3.SS2.p8.7">
     In the context of fine-tuning strategiy, we adopt Low-Rank Adaptation (LORA)
     <cite class="ltx_cite ltx_citemacro_cite">
      Hu et al. (
      <a class="ltx_ref" href="#bib.bib6" title="">
       2021
      </a>
      )
     </cite>
     fine-tuning which is based on making low-rank modifications to the weight matrices in LLMs. For each linear layer in the model, the original weight matrix
     <math alttext="W" class="ltx_Math" display="inline" id="S3.SS2.p8.1.m1.1">
      <semantics id="S3.SS2.p8.1.m1.1a">
       <mi id="S3.SS2.p8.1.m1.1.1" xref="S3.SS2.p8.1.m1.1.1.cmml">
        W
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p8.1.m1.1b">
        <ci id="S3.SS2.p8.1.m1.1.1.cmml" xref="S3.SS2.p8.1.m1.1.1">
         𝑊
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p8.1.m1.1c">
        W
       </annotation>
      </semantics>
     </math>
     is adjusted to
     <math alttext="W+\Delta W" class="ltx_Math" display="inline" id="S3.SS2.p8.2.m2.1">
      <semantics id="S3.SS2.p8.2.m2.1a">
       <mrow id="S3.SS2.p8.2.m2.1.1" xref="S3.SS2.p8.2.m2.1.1.cmml">
        <mi id="S3.SS2.p8.2.m2.1.1.2" xref="S3.SS2.p8.2.m2.1.1.2.cmml">
         W
        </mi>
        <mo id="S3.SS2.p8.2.m2.1.1.1" xref="S3.SS2.p8.2.m2.1.1.1.cmml">
         +
        </mo>
        <mrow id="S3.SS2.p8.2.m2.1.1.3" xref="S3.SS2.p8.2.m2.1.1.3.cmml">
         <mi id="S3.SS2.p8.2.m2.1.1.3.2" mathvariant="normal" xref="S3.SS2.p8.2.m2.1.1.3.2.cmml">
          Δ
         </mi>
         <mo id="S3.SS2.p8.2.m2.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.p8.2.m2.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p8.2.m2.1.1.3.3" xref="S3.SS2.p8.2.m2.1.1.3.3.cmml">
          W
         </mi>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p8.2.m2.1b">
        <apply id="S3.SS2.p8.2.m2.1.1.cmml" xref="S3.SS2.p8.2.m2.1.1">
         <plus id="S3.SS2.p8.2.m2.1.1.1.cmml" xref="S3.SS2.p8.2.m2.1.1.1">
         </plus>
         <ci id="S3.SS2.p8.2.m2.1.1.2.cmml" xref="S3.SS2.p8.2.m2.1.1.2">
          𝑊
         </ci>
         <apply id="S3.SS2.p8.2.m2.1.1.3.cmml" xref="S3.SS2.p8.2.m2.1.1.3">
          <times id="S3.SS2.p8.2.m2.1.1.3.1.cmml" xref="S3.SS2.p8.2.m2.1.1.3.1">
          </times>
          <ci id="S3.SS2.p8.2.m2.1.1.3.2.cmml" xref="S3.SS2.p8.2.m2.1.1.3.2">
           Δ
          </ci>
          <ci id="S3.SS2.p8.2.m2.1.1.3.3.cmml" xref="S3.SS2.p8.2.m2.1.1.3.3">
           𝑊
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p8.2.m2.1c">
        W+\Delta W
       </annotation>
      </semantics>
     </math>
     , where
     <math alttext="\Delta W" class="ltx_Math" display="inline" id="S3.SS2.p8.3.m3.1">
      <semantics id="S3.SS2.p8.3.m3.1a">
       <mrow id="S3.SS2.p8.3.m3.1.1" xref="S3.SS2.p8.3.m3.1.1.cmml">
        <mi id="S3.SS2.p8.3.m3.1.1.2" mathvariant="normal" xref="S3.SS2.p8.3.m3.1.1.2.cmml">
         Δ
        </mi>
        <mo id="S3.SS2.p8.3.m3.1.1.1" lspace="0em" rspace="0em" xref="S3.SS2.p8.3.m3.1.1.1.cmml">
         ​
        </mo>
        <mi id="S3.SS2.p8.3.m3.1.1.3" xref="S3.SS2.p8.3.m3.1.1.3.cmml">
         W
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p8.3.m3.1b">
        <apply id="S3.SS2.p8.3.m3.1.1.cmml" xref="S3.SS2.p8.3.m3.1.1">
         <times id="S3.SS2.p8.3.m3.1.1.1.cmml" xref="S3.SS2.p8.3.m3.1.1.1">
         </times>
         <ci id="S3.SS2.p8.3.m3.1.1.2.cmml" xref="S3.SS2.p8.3.m3.1.1.2">
          Δ
         </ci>
         <ci id="S3.SS2.p8.3.m3.1.1.3.cmml" xref="S3.SS2.p8.3.m3.1.1.3">
          𝑊
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p8.3.m3.1c">
        \Delta W
       </annotation>
      </semantics>
     </math>
     is generated through the product of low-rank matrices as
     <math alttext="\Delta W=A\times B" class="ltx_Math" display="inline" id="S3.SS2.p8.4.m4.1">
      <semantics id="S3.SS2.p8.4.m4.1a">
       <mrow id="S3.SS2.p8.4.m4.1.1" xref="S3.SS2.p8.4.m4.1.1.cmml">
        <mrow id="S3.SS2.p8.4.m4.1.1.2" xref="S3.SS2.p8.4.m4.1.1.2.cmml">
         <mi id="S3.SS2.p8.4.m4.1.1.2.2" mathvariant="normal" xref="S3.SS2.p8.4.m4.1.1.2.2.cmml">
          Δ
         </mi>
         <mo id="S3.SS2.p8.4.m4.1.1.2.1" lspace="0em" rspace="0em" xref="S3.SS2.p8.4.m4.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="S3.SS2.p8.4.m4.1.1.2.3" xref="S3.SS2.p8.4.m4.1.1.2.3.cmml">
          W
         </mi>
        </mrow>
        <mo id="S3.SS2.p8.4.m4.1.1.1" xref="S3.SS2.p8.4.m4.1.1.1.cmml">
         =
        </mo>
        <mrow id="S3.SS2.p8.4.m4.1.1.3" xref="S3.SS2.p8.4.m4.1.1.3.cmml">
         <mi id="S3.SS2.p8.4.m4.1.1.3.2" xref="S3.SS2.p8.4.m4.1.1.3.2.cmml">
          A
         </mi>
         <mo id="S3.SS2.p8.4.m4.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="S3.SS2.p8.4.m4.1.1.3.1.cmml">
          ×
         </mo>
         <mi id="S3.SS2.p8.4.m4.1.1.3.3" xref="S3.SS2.p8.4.m4.1.1.3.3.cmml">
          B
         </mi>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p8.4.m4.1b">
        <apply id="S3.SS2.p8.4.m4.1.1.cmml" xref="S3.SS2.p8.4.m4.1.1">
         <eq id="S3.SS2.p8.4.m4.1.1.1.cmml" xref="S3.SS2.p8.4.m4.1.1.1">
         </eq>
         <apply id="S3.SS2.p8.4.m4.1.1.2.cmml" xref="S3.SS2.p8.4.m4.1.1.2">
          <times id="S3.SS2.p8.4.m4.1.1.2.1.cmml" xref="S3.SS2.p8.4.m4.1.1.2.1">
          </times>
          <ci id="S3.SS2.p8.4.m4.1.1.2.2.cmml" xref="S3.SS2.p8.4.m4.1.1.2.2">
           Δ
          </ci>
          <ci id="S3.SS2.p8.4.m4.1.1.2.3.cmml" xref="S3.SS2.p8.4.m4.1.1.2.3">
           𝑊
          </ci>
         </apply>
         <apply id="S3.SS2.p8.4.m4.1.1.3.cmml" xref="S3.SS2.p8.4.m4.1.1.3">
          <times id="S3.SS2.p8.4.m4.1.1.3.1.cmml" xref="S3.SS2.p8.4.m4.1.1.3.1">
          </times>
          <ci id="S3.SS2.p8.4.m4.1.1.3.2.cmml" xref="S3.SS2.p8.4.m4.1.1.3.2">
           𝐴
          </ci>
          <ci id="S3.SS2.p8.4.m4.1.1.3.3.cmml" xref="S3.SS2.p8.4.m4.1.1.3.3">
           𝐵
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p8.4.m4.1c">
        \Delta W=A\times B
       </annotation>
      </semantics>
     </math>
     , where
     <math alttext="A" class="ltx_Math" display="inline" id="S3.SS2.p8.5.m5.1">
      <semantics id="S3.SS2.p8.5.m5.1a">
       <mi id="S3.SS2.p8.5.m5.1.1" xref="S3.SS2.p8.5.m5.1.1.cmml">
        A
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p8.5.m5.1b">
        <ci id="S3.SS2.p8.5.m5.1.1.cmml" xref="S3.SS2.p8.5.m5.1.1">
         𝐴
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p8.5.m5.1c">
        A
       </annotation>
      </semantics>
     </math>
     and
     <math alttext="B" class="ltx_Math" display="inline" id="S3.SS2.p8.6.m6.1">
      <semantics id="S3.SS2.p8.6.m6.1a">
       <mi id="S3.SS2.p8.6.m6.1.1" xref="S3.SS2.p8.6.m6.1.1.cmml">
        B
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p8.6.m6.1b">
        <ci id="S3.SS2.p8.6.m6.1.1.cmml" xref="S3.SS2.p8.6.m6.1.1">
         𝐵
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p8.6.m6.1c">
        B
       </annotation>
      </semantics>
     </math>
     are low-rank matrices, with ranks significantly smaller than the rank of the original weight matrix
     <math alttext="W" class="ltx_Math" display="inline" id="S3.SS2.p8.7.m7.1">
      <semantics id="S3.SS2.p8.7.m7.1a">
       <mi id="S3.SS2.p8.7.m7.1.1" xref="S3.SS2.p8.7.m7.1.1.cmml">
        W
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS2.p8.7.m7.1b">
        <ci id="S3.SS2.p8.7.m7.1.1.cmml" xref="S3.SS2.p8.7.m7.1.1">
         𝑊
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS2.p8.7.m7.1c">
        W
       </annotation>
      </semantics>
     </math>
     .
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S3.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     3.3
    </span>
    Multi-Path Reasoning under Task Decomposition
   </h3>
   <div class="ltx_para" id="S3.SS3.p1">
    <p class="ltx_p" id="S3.SS3.p1.1">
     Recently, because it is difficult for a single agent to complete complex multi-step tasks, more and more work tends to involve multi-agent collaboration, allowing models to play different roles to jointly advance tasks
     <cite class="ltx_cite ltx_citemacro_cite">
      Qiao et al. (
      <a class="ltx_ref" href="#bib.bib15" title="">
       2024
      </a>
      )
     </cite>
     . We take a similar approach. On the one hand, we we instruct LLMs to generate multiple available actions in each reasoning step. On the other hand, we employ a judge model to select one action from the provided set and continue the reasoning process until a final output is obtained.
    </p>
   </div>
   <figure class="ltx_figure" id="S3.F3">
    <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="239" id="S3.F3.g1" src="/html/2403.19962/assets/Figs/agent-taskde.png" width="287"/>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_figure">
      Figure 3:
     </span>
     The process of task decomposition. The planning model breaks the entire task into several small subtasks.
    </figcaption>
   </figure>
   <div class="ltx_para" id="S3.SS3.p2">
    <p class="ltx_p" id="S3.SS3.p2.18">
     For LLMs with small parameter sizes, due to their limited long-term memory capacity, it is challenging for them to handle complex long dialogue tasks. To address this issue, we employ a task decomposition strategy, where complex tasks that require multiple steps are broken down into simpler subtasks. We use another LLM with the same number of parameters as our planning module and we name it as
     <math alttext="M_{p}" class="ltx_Math" display="inline" id="S3.SS3.p2.1.m1.1">
      <semantics id="S3.SS3.p2.1.m1.1a">
       <msub id="S3.SS3.p2.1.m1.1.1" xref="S3.SS3.p2.1.m1.1.1.cmml">
        <mi id="S3.SS3.p2.1.m1.1.1.2" xref="S3.SS3.p2.1.m1.1.1.2.cmml">
         M
        </mi>
        <mi id="S3.SS3.p2.1.m1.1.1.3" xref="S3.SS3.p2.1.m1.1.1.3.cmml">
         p
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.1.m1.1b">
        <apply id="S3.SS3.p2.1.m1.1.1.cmml" xref="S3.SS3.p2.1.m1.1.1">
         <csymbol cd="ambiguous" id="S3.SS3.p2.1.m1.1.1.1.cmml" xref="S3.SS3.p2.1.m1.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS3.p2.1.m1.1.1.2.cmml" xref="S3.SS3.p2.1.m1.1.1.2">
          𝑀
         </ci>
         <ci id="S3.SS3.p2.1.m1.1.1.3.cmml" xref="S3.SS3.p2.1.m1.1.1.3">
          𝑝
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.1.m1.1c">
        M_{p}
       </annotation>
      </semantics>
     </math>
     . For a given task
     <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S3.SS3.p2.2.m2.1">
      <semantics id="S3.SS3.p2.2.m2.1a">
       <mi class="ltx_font_mathcaligraphic" id="S3.SS3.p2.2.m2.1.1" xref="S3.SS3.p2.2.m2.1.1.cmml">
        𝒯
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.2.m2.1b">
        <ci id="S3.SS3.p2.2.m2.1.1.cmml" xref="S3.SS3.p2.2.m2.1.1">
         𝒯
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.2.m2.1c">
        \mathcal{T}
       </annotation>
      </semantics>
     </math>
     , we compose query prompt
     <math alttext="P_{sub}" class="ltx_Math" display="inline" id="S3.SS3.p2.3.m3.1">
      <semantics id="S3.SS3.p2.3.m3.1a">
       <msub id="S3.SS3.p2.3.m3.1.1" xref="S3.SS3.p2.3.m3.1.1.cmml">
        <mi id="S3.SS3.p2.3.m3.1.1.2" xref="S3.SS3.p2.3.m3.1.1.2.cmml">
         P
        </mi>
        <mrow id="S3.SS3.p2.3.m3.1.1.3" xref="S3.SS3.p2.3.m3.1.1.3.cmml">
         <mi id="S3.SS3.p2.3.m3.1.1.3.2" xref="S3.SS3.p2.3.m3.1.1.3.2.cmml">
          s
         </mi>
         <mo id="S3.SS3.p2.3.m3.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS3.p2.3.m3.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS3.p2.3.m3.1.1.3.3" xref="S3.SS3.p2.3.m3.1.1.3.3.cmml">
          u
         </mi>
         <mo id="S3.SS3.p2.3.m3.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS3.p2.3.m3.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS3.p2.3.m3.1.1.3.4" xref="S3.SS3.p2.3.m3.1.1.3.4.cmml">
          b
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.3.m3.1b">
        <apply id="S3.SS3.p2.3.m3.1.1.cmml" xref="S3.SS3.p2.3.m3.1.1">
         <csymbol cd="ambiguous" id="S3.SS3.p2.3.m3.1.1.1.cmml" xref="S3.SS3.p2.3.m3.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS3.p2.3.m3.1.1.2.cmml" xref="S3.SS3.p2.3.m3.1.1.2">
          𝑃
         </ci>
         <apply id="S3.SS3.p2.3.m3.1.1.3.cmml" xref="S3.SS3.p2.3.m3.1.1.3">
          <times id="S3.SS3.p2.3.m3.1.1.3.1.cmml" xref="S3.SS3.p2.3.m3.1.1.3.1">
          </times>
          <ci id="S3.SS3.p2.3.m3.1.1.3.2.cmml" xref="S3.SS3.p2.3.m3.1.1.3.2">
           𝑠
          </ci>
          <ci id="S3.SS3.p2.3.m3.1.1.3.3.cmml" xref="S3.SS3.p2.3.m3.1.1.3.3">
           𝑢
          </ci>
          <ci id="S3.SS3.p2.3.m3.1.1.3.4.cmml" xref="S3.SS3.p2.3.m3.1.1.3.4">
           𝑏
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.3.m3.1c">
        P_{sub}
       </annotation>
      </semantics>
     </math>
     as "break down the task
     <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S3.SS3.p2.4.m4.1">
      <semantics id="S3.SS3.p2.4.m4.1a">
       <mi class="ltx_font_mathcaligraphic" id="S3.SS3.p2.4.m4.1.1" xref="S3.SS3.p2.4.m4.1.1.cmml">
        𝒯
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.4.m4.1b">
        <ci id="S3.SS3.p2.4.m4.1.1.cmml" xref="S3.SS3.p2.4.m4.1.1">
         𝒯
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.4.m4.1c">
        \mathcal{T}
       </annotation>
      </semantics>
     </math>
     into subtasks in the following format…". The
     <math alttext="M_{p}" class="ltx_Math" display="inline" id="S3.SS3.p2.5.m5.1">
      <semantics id="S3.SS3.p2.5.m5.1a">
       <msub id="S3.SS3.p2.5.m5.1.1" xref="S3.SS3.p2.5.m5.1.1.cmml">
        <mi id="S3.SS3.p2.5.m5.1.1.2" xref="S3.SS3.p2.5.m5.1.1.2.cmml">
         M
        </mi>
        <mi id="S3.SS3.p2.5.m5.1.1.3" xref="S3.SS3.p2.5.m5.1.1.3.cmml">
         p
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.5.m5.1b">
        <apply id="S3.SS3.p2.5.m5.1.1.cmml" xref="S3.SS3.p2.5.m5.1.1">
         <csymbol cd="ambiguous" id="S3.SS3.p2.5.m5.1.1.1.cmml" xref="S3.SS3.p2.5.m5.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS3.p2.5.m5.1.1.2.cmml" xref="S3.SS3.p2.5.m5.1.1.2">
          𝑀
         </ci>
         <ci id="S3.SS3.p2.5.m5.1.1.3.cmml" xref="S3.SS3.p2.5.m5.1.1.3">
          𝑝
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.5.m5.1c">
        M_{p}
       </annotation>
      </semantics>
     </math>
     will generate a sub-task list
     <math alttext="S_{\mathcal{T}}=\{s_{1},...,s_{k}\}" class="ltx_Math" display="inline" id="S3.SS3.p2.6.m6.3">
      <semantics id="S3.SS3.p2.6.m6.3a">
       <mrow id="S3.SS3.p2.6.m6.3.3" xref="S3.SS3.p2.6.m6.3.3.cmml">
        <msub id="S3.SS3.p2.6.m6.3.3.4" xref="S3.SS3.p2.6.m6.3.3.4.cmml">
         <mi id="S3.SS3.p2.6.m6.3.3.4.2" xref="S3.SS3.p2.6.m6.3.3.4.2.cmml">
          S
         </mi>
         <mi class="ltx_font_mathcaligraphic" id="S3.SS3.p2.6.m6.3.3.4.3" xref="S3.SS3.p2.6.m6.3.3.4.3.cmml">
          𝒯
         </mi>
        </msub>
        <mo id="S3.SS3.p2.6.m6.3.3.3" xref="S3.SS3.p2.6.m6.3.3.3.cmml">
         =
        </mo>
        <mrow id="S3.SS3.p2.6.m6.3.3.2.2" xref="S3.SS3.p2.6.m6.3.3.2.3.cmml">
         <mo id="S3.SS3.p2.6.m6.3.3.2.2.3" stretchy="false" xref="S3.SS3.p2.6.m6.3.3.2.3.cmml">
          {
         </mo>
         <msub id="S3.SS3.p2.6.m6.2.2.1.1.1" xref="S3.SS3.p2.6.m6.2.2.1.1.1.cmml">
          <mi id="S3.SS3.p2.6.m6.2.2.1.1.1.2" xref="S3.SS3.p2.6.m6.2.2.1.1.1.2.cmml">
           s
          </mi>
          <mn id="S3.SS3.p2.6.m6.2.2.1.1.1.3" xref="S3.SS3.p2.6.m6.2.2.1.1.1.3.cmml">
           1
          </mn>
         </msub>
         <mo id="S3.SS3.p2.6.m6.3.3.2.2.4" xref="S3.SS3.p2.6.m6.3.3.2.3.cmml">
          ,
         </mo>
         <mi id="S3.SS3.p2.6.m6.1.1" mathvariant="normal" xref="S3.SS3.p2.6.m6.1.1.cmml">
          …
         </mi>
         <mo id="S3.SS3.p2.6.m6.3.3.2.2.5" xref="S3.SS3.p2.6.m6.3.3.2.3.cmml">
          ,
         </mo>
         <msub id="S3.SS3.p2.6.m6.3.3.2.2.2" xref="S3.SS3.p2.6.m6.3.3.2.2.2.cmml">
          <mi id="S3.SS3.p2.6.m6.3.3.2.2.2.2" xref="S3.SS3.p2.6.m6.3.3.2.2.2.2.cmml">
           s
          </mi>
          <mi id="S3.SS3.p2.6.m6.3.3.2.2.2.3" xref="S3.SS3.p2.6.m6.3.3.2.2.2.3.cmml">
           k
          </mi>
         </msub>
         <mo id="S3.SS3.p2.6.m6.3.3.2.2.6" stretchy="false" xref="S3.SS3.p2.6.m6.3.3.2.3.cmml">
          }
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.6.m6.3b">
        <apply id="S3.SS3.p2.6.m6.3.3.cmml" xref="S3.SS3.p2.6.m6.3.3">
         <eq id="S3.SS3.p2.6.m6.3.3.3.cmml" xref="S3.SS3.p2.6.m6.3.3.3">
         </eq>
         <apply id="S3.SS3.p2.6.m6.3.3.4.cmml" xref="S3.SS3.p2.6.m6.3.3.4">
          <csymbol cd="ambiguous" id="S3.SS3.p2.6.m6.3.3.4.1.cmml" xref="S3.SS3.p2.6.m6.3.3.4">
           subscript
          </csymbol>
          <ci id="S3.SS3.p2.6.m6.3.3.4.2.cmml" xref="S3.SS3.p2.6.m6.3.3.4.2">
           𝑆
          </ci>
          <ci id="S3.SS3.p2.6.m6.3.3.4.3.cmml" xref="S3.SS3.p2.6.m6.3.3.4.3">
           𝒯
          </ci>
         </apply>
         <set id="S3.SS3.p2.6.m6.3.3.2.3.cmml" xref="S3.SS3.p2.6.m6.3.3.2.2">
          <apply id="S3.SS3.p2.6.m6.2.2.1.1.1.cmml" xref="S3.SS3.p2.6.m6.2.2.1.1.1">
           <csymbol cd="ambiguous" id="S3.SS3.p2.6.m6.2.2.1.1.1.1.cmml" xref="S3.SS3.p2.6.m6.2.2.1.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS3.p2.6.m6.2.2.1.1.1.2.cmml" xref="S3.SS3.p2.6.m6.2.2.1.1.1.2">
            𝑠
           </ci>
           <cn id="S3.SS3.p2.6.m6.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS3.p2.6.m6.2.2.1.1.1.3">
            1
           </cn>
          </apply>
          <ci id="S3.SS3.p2.6.m6.1.1.cmml" xref="S3.SS3.p2.6.m6.1.1">
           …
          </ci>
          <apply id="S3.SS3.p2.6.m6.3.3.2.2.2.cmml" xref="S3.SS3.p2.6.m6.3.3.2.2.2">
           <csymbol cd="ambiguous" id="S3.SS3.p2.6.m6.3.3.2.2.2.1.cmml" xref="S3.SS3.p2.6.m6.3.3.2.2.2">
            subscript
           </csymbol>
           <ci id="S3.SS3.p2.6.m6.3.3.2.2.2.2.cmml" xref="S3.SS3.p2.6.m6.3.3.2.2.2.2">
            𝑠
           </ci>
           <ci id="S3.SS3.p2.6.m6.3.3.2.2.2.3.cmml" xref="S3.SS3.p2.6.m6.3.3.2.2.2.3">
            𝑘
           </ci>
          </apply>
         </set>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.6.m6.3c">
        S_{\mathcal{T}}=\{s_{1},...,s_{k}\}
       </annotation>
      </semantics>
     </math>
     .
     <math alttext="k" class="ltx_Math" display="inline" id="S3.SS3.p2.7.m7.1">
      <semantics id="S3.SS3.p2.7.m7.1a">
       <mi id="S3.SS3.p2.7.m7.1.1" xref="S3.SS3.p2.7.m7.1.1.cmml">
        k
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.7.m7.1b">
        <ci id="S3.SS3.p2.7.m7.1.1.cmml" xref="S3.SS3.p2.7.m7.1.1">
         𝑘
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.7.m7.1c">
        k
       </annotation>
      </semantics>
     </math>
     is the number of sub-tasks and to avoid an excessive number of subtasks, we typically set
     <math alttext="k" class="ltx_Math" display="inline" id="S3.SS3.p2.8.m8.1">
      <semantics id="S3.SS3.p2.8.m8.1a">
       <mi id="S3.SS3.p2.8.m8.1.1" xref="S3.SS3.p2.8.m8.1.1.cmml">
        k
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.8.m8.1b">
        <ci id="S3.SS3.p2.8.m8.1.1.cmml" xref="S3.SS3.p2.8.m8.1.1">
         𝑘
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.8.m8.1c">
        k
       </annotation>
      </semantics>
     </math>
     to
     <math alttext="3" class="ltx_Math" display="inline" id="S3.SS3.p2.9.m9.1">
      <semantics id="S3.SS3.p2.9.m9.1a">
       <mn id="S3.SS3.p2.9.m9.1.1" xref="S3.SS3.p2.9.m9.1.1.cmml">
        3
       </mn>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.9.m9.1b">
        <cn id="S3.SS3.p2.9.m9.1.1.cmml" type="integer" xref="S3.SS3.p2.9.m9.1.1">
         3
        </cn>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.9.m9.1c">
        3
       </annotation>
      </semantics>
     </math>
     . For example, for task
     <math alttext="\mathcal{T}=" class="ltx_Math" display="inline" id="S3.SS3.p2.10.m10.1">
      <semantics id="S3.SS3.p2.10.m10.1a">
       <mrow id="S3.SS3.p2.10.m10.1.1" xref="S3.SS3.p2.10.m10.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S3.SS3.p2.10.m10.1.1.2" xref="S3.SS3.p2.10.m10.1.1.2.cmml">
         𝒯
        </mi>
        <mo id="S3.SS3.p2.10.m10.1.1.1" xref="S3.SS3.p2.10.m10.1.1.1.cmml">
         =
        </mo>
        <mi id="S3.SS3.p2.10.m10.1.1.3" xref="S3.SS3.p2.10.m10.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.10.m10.1b">
        <apply id="S3.SS3.p2.10.m10.1.1.cmml" xref="S3.SS3.p2.10.m10.1.1">
         <eq id="S3.SS3.p2.10.m10.1.1.1.cmml" xref="S3.SS3.p2.10.m10.1.1.1">
         </eq>
         <ci id="S3.SS3.p2.10.m10.1.1.2.cmml" xref="S3.SS3.p2.10.m10.1.1.2">
          𝒯
         </ci>
         <csymbol cd="latexml" id="S3.SS3.p2.10.m10.1.1.3.cmml" xref="S3.SS3.p2.10.m10.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.10.m10.1c">
        \mathcal{T}=
       </annotation>
      </semantics>
     </math>
     "put a soap bottle in the toilet", the LLMs can describe three steps as
     <math alttext="s_{1}=" class="ltx_Math" display="inline" id="S3.SS3.p2.11.m11.1">
      <semantics id="S3.SS3.p2.11.m11.1a">
       <mrow id="S3.SS3.p2.11.m11.1.1" xref="S3.SS3.p2.11.m11.1.1.cmml">
        <msub id="S3.SS3.p2.11.m11.1.1.2" xref="S3.SS3.p2.11.m11.1.1.2.cmml">
         <mi id="S3.SS3.p2.11.m11.1.1.2.2" xref="S3.SS3.p2.11.m11.1.1.2.2.cmml">
          s
         </mi>
         <mn id="S3.SS3.p2.11.m11.1.1.2.3" xref="S3.SS3.p2.11.m11.1.1.2.3.cmml">
          1
         </mn>
        </msub>
        <mo id="S3.SS3.p2.11.m11.1.1.1" xref="S3.SS3.p2.11.m11.1.1.1.cmml">
         =
        </mo>
        <mi id="S3.SS3.p2.11.m11.1.1.3" xref="S3.SS3.p2.11.m11.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.11.m11.1b">
        <apply id="S3.SS3.p2.11.m11.1.1.cmml" xref="S3.SS3.p2.11.m11.1.1">
         <eq id="S3.SS3.p2.11.m11.1.1.1.cmml" xref="S3.SS3.p2.11.m11.1.1.1">
         </eq>
         <apply id="S3.SS3.p2.11.m11.1.1.2.cmml" xref="S3.SS3.p2.11.m11.1.1.2">
          <csymbol cd="ambiguous" id="S3.SS3.p2.11.m11.1.1.2.1.cmml" xref="S3.SS3.p2.11.m11.1.1.2">
           subscript
          </csymbol>
          <ci id="S3.SS3.p2.11.m11.1.1.2.2.cmml" xref="S3.SS3.p2.11.m11.1.1.2.2">
           𝑠
          </ci>
          <cn id="S3.SS3.p2.11.m11.1.1.2.3.cmml" type="integer" xref="S3.SS3.p2.11.m11.1.1.2.3">
           1
          </cn>
         </apply>
         <csymbol cd="latexml" id="S3.SS3.p2.11.m11.1.1.3.cmml" xref="S3.SS3.p2.11.m11.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.11.m11.1c">
        s_{1}=
       </annotation>
      </semantics>
     </math>
     "look around and find a soap bottle",
     <math alttext="s_{2}=" class="ltx_Math" display="inline" id="S3.SS3.p2.12.m12.1">
      <semantics id="S3.SS3.p2.12.m12.1a">
       <mrow id="S3.SS3.p2.12.m12.1.1" xref="S3.SS3.p2.12.m12.1.1.cmml">
        <msub id="S3.SS3.p2.12.m12.1.1.2" xref="S3.SS3.p2.12.m12.1.1.2.cmml">
         <mi id="S3.SS3.p2.12.m12.1.1.2.2" xref="S3.SS3.p2.12.m12.1.1.2.2.cmml">
          s
         </mi>
         <mn id="S3.SS3.p2.12.m12.1.1.2.3" xref="S3.SS3.p2.12.m12.1.1.2.3.cmml">
          2
         </mn>
        </msub>
        <mo id="S3.SS3.p2.12.m12.1.1.1" xref="S3.SS3.p2.12.m12.1.1.1.cmml">
         =
        </mo>
        <mi id="S3.SS3.p2.12.m12.1.1.3" xref="S3.SS3.p2.12.m12.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.12.m12.1b">
        <apply id="S3.SS3.p2.12.m12.1.1.cmml" xref="S3.SS3.p2.12.m12.1.1">
         <eq id="S3.SS3.p2.12.m12.1.1.1.cmml" xref="S3.SS3.p2.12.m12.1.1.1">
         </eq>
         <apply id="S3.SS3.p2.12.m12.1.1.2.cmml" xref="S3.SS3.p2.12.m12.1.1.2">
          <csymbol cd="ambiguous" id="S3.SS3.p2.12.m12.1.1.2.1.cmml" xref="S3.SS3.p2.12.m12.1.1.2">
           subscript
          </csymbol>
          <ci id="S3.SS3.p2.12.m12.1.1.2.2.cmml" xref="S3.SS3.p2.12.m12.1.1.2.2">
           𝑠
          </ci>
          <cn id="S3.SS3.p2.12.m12.1.1.2.3.cmml" type="integer" xref="S3.SS3.p2.12.m12.1.1.2.3">
           2
          </cn>
         </apply>
         <csymbol cd="latexml" id="S3.SS3.p2.12.m12.1.1.3.cmml" xref="S3.SS3.p2.12.m12.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.12.m12.1c">
        s_{2}=
       </annotation>
      </semantics>
     </math>
     "take up the soap bottle and go to the toilet",
     <math alttext="s_{3}=" class="ltx_Math" display="inline" id="S3.SS3.p2.13.m13.1">
      <semantics id="S3.SS3.p2.13.m13.1a">
       <mrow id="S3.SS3.p2.13.m13.1.1" xref="S3.SS3.p2.13.m13.1.1.cmml">
        <msub id="S3.SS3.p2.13.m13.1.1.2" xref="S3.SS3.p2.13.m13.1.1.2.cmml">
         <mi id="S3.SS3.p2.13.m13.1.1.2.2" xref="S3.SS3.p2.13.m13.1.1.2.2.cmml">
          s
         </mi>
         <mn id="S3.SS3.p2.13.m13.1.1.2.3" xref="S3.SS3.p2.13.m13.1.1.2.3.cmml">
          3
         </mn>
        </msub>
        <mo id="S3.SS3.p2.13.m13.1.1.1" xref="S3.SS3.p2.13.m13.1.1.1.cmml">
         =
        </mo>
        <mi id="S3.SS3.p2.13.m13.1.1.3" xref="S3.SS3.p2.13.m13.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.13.m13.1b">
        <apply id="S3.SS3.p2.13.m13.1.1.cmml" xref="S3.SS3.p2.13.m13.1.1">
         <eq id="S3.SS3.p2.13.m13.1.1.1.cmml" xref="S3.SS3.p2.13.m13.1.1.1">
         </eq>
         <apply id="S3.SS3.p2.13.m13.1.1.2.cmml" xref="S3.SS3.p2.13.m13.1.1.2">
          <csymbol cd="ambiguous" id="S3.SS3.p2.13.m13.1.1.2.1.cmml" xref="S3.SS3.p2.13.m13.1.1.2">
           subscript
          </csymbol>
          <ci id="S3.SS3.p2.13.m13.1.1.2.2.cmml" xref="S3.SS3.p2.13.m13.1.1.2.2">
           𝑠
          </ci>
          <cn id="S3.SS3.p2.13.m13.1.1.2.3.cmml" type="integer" xref="S3.SS3.p2.13.m13.1.1.2.3">
           3
          </cn>
         </apply>
         <csymbol cd="latexml" id="S3.SS3.p2.13.m13.1.1.3.cmml" xref="S3.SS3.p2.13.m13.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.13.m13.1c">
        s_{3}=
       </annotation>
      </semantics>
     </math>
     "put the soap bottle in the toilet". Then, the agent will complete it one by one according to the subtask list
     <math alttext="S_{\mathcal{T}}" class="ltx_Math" display="inline" id="S3.SS3.p2.14.m14.1">
      <semantics id="S3.SS3.p2.14.m14.1a">
       <msub id="S3.SS3.p2.14.m14.1.1" xref="S3.SS3.p2.14.m14.1.1.cmml">
        <mi id="S3.SS3.p2.14.m14.1.1.2" xref="S3.SS3.p2.14.m14.1.1.2.cmml">
         S
        </mi>
        <mi class="ltx_font_mathcaligraphic" id="S3.SS3.p2.14.m14.1.1.3" xref="S3.SS3.p2.14.m14.1.1.3.cmml">
         𝒯
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.14.m14.1b">
        <apply id="S3.SS3.p2.14.m14.1.1.cmml" xref="S3.SS3.p2.14.m14.1.1">
         <csymbol cd="ambiguous" id="S3.SS3.p2.14.m14.1.1.1.cmml" xref="S3.SS3.p2.14.m14.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS3.p2.14.m14.1.1.2.cmml" xref="S3.SS3.p2.14.m14.1.1.2">
          𝑆
         </ci>
         <ci id="S3.SS3.p2.14.m14.1.1.3.cmml" xref="S3.SS3.p2.14.m14.1.1.3">
          𝒯
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.14.m14.1c">
        S_{\mathcal{T}}
       </annotation>
      </semantics>
     </math>
     . We introduce another LLM as judgment module
     <math alttext="M_{jdg}" class="ltx_Math" display="inline" id="S3.SS3.p2.15.m15.1">
      <semantics id="S3.SS3.p2.15.m15.1a">
       <msub id="S3.SS3.p2.15.m15.1.1" xref="S3.SS3.p2.15.m15.1.1.cmml">
        <mi id="S3.SS3.p2.15.m15.1.1.2" xref="S3.SS3.p2.15.m15.1.1.2.cmml">
         M
        </mi>
        <mrow id="S3.SS3.p2.15.m15.1.1.3" xref="S3.SS3.p2.15.m15.1.1.3.cmml">
         <mi id="S3.SS3.p2.15.m15.1.1.3.2" xref="S3.SS3.p2.15.m15.1.1.3.2.cmml">
          j
         </mi>
         <mo id="S3.SS3.p2.15.m15.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS3.p2.15.m15.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS3.p2.15.m15.1.1.3.3" xref="S3.SS3.p2.15.m15.1.1.3.3.cmml">
          d
         </mi>
         <mo id="S3.SS3.p2.15.m15.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS3.p2.15.m15.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS3.p2.15.m15.1.1.3.4" xref="S3.SS3.p2.15.m15.1.1.3.4.cmml">
          g
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.15.m15.1b">
        <apply id="S3.SS3.p2.15.m15.1.1.cmml" xref="S3.SS3.p2.15.m15.1.1">
         <csymbol cd="ambiguous" id="S3.SS3.p2.15.m15.1.1.1.cmml" xref="S3.SS3.p2.15.m15.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS3.p2.15.m15.1.1.2.cmml" xref="S3.SS3.p2.15.m15.1.1.2">
          𝑀
         </ci>
         <apply id="S3.SS3.p2.15.m15.1.1.3.cmml" xref="S3.SS3.p2.15.m15.1.1.3">
          <times id="S3.SS3.p2.15.m15.1.1.3.1.cmml" xref="S3.SS3.p2.15.m15.1.1.3.1">
          </times>
          <ci id="S3.SS3.p2.15.m15.1.1.3.2.cmml" xref="S3.SS3.p2.15.m15.1.1.3.2">
           𝑗
          </ci>
          <ci id="S3.SS3.p2.15.m15.1.1.3.3.cmml" xref="S3.SS3.p2.15.m15.1.1.3.3">
           𝑑
          </ci>
          <ci id="S3.SS3.p2.15.m15.1.1.3.4.cmml" xref="S3.SS3.p2.15.m15.1.1.3.4">
           𝑔
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.15.m15.1c">
        M_{jdg}
       </annotation>
      </semantics>
     </math>
     to judge the completion of each subtask. For subtask
     <math alttext="s_{t}" class="ltx_Math" display="inline" id="S3.SS3.p2.16.m16.1">
      <semantics id="S3.SS3.p2.16.m16.1a">
       <msub id="S3.SS3.p2.16.m16.1.1" xref="S3.SS3.p2.16.m16.1.1.cmml">
        <mi id="S3.SS3.p2.16.m16.1.1.2" xref="S3.SS3.p2.16.m16.1.1.2.cmml">
         s
        </mi>
        <mi id="S3.SS3.p2.16.m16.1.1.3" xref="S3.SS3.p2.16.m16.1.1.3.cmml">
         t
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.16.m16.1b">
        <apply id="S3.SS3.p2.16.m16.1.1.cmml" xref="S3.SS3.p2.16.m16.1.1">
         <csymbol cd="ambiguous" id="S3.SS3.p2.16.m16.1.1.1.cmml" xref="S3.SS3.p2.16.m16.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS3.p2.16.m16.1.1.2.cmml" xref="S3.SS3.p2.16.m16.1.1.2">
          𝑠
         </ci>
         <ci id="S3.SS3.p2.16.m16.1.1.3.cmml" xref="S3.SS3.p2.16.m16.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.16.m16.1c">
        s_{t}
       </annotation>
      </semantics>
     </math>
     , we compose the judge prompt
     <math alttext="P_{jdg}" class="ltx_Math" display="inline" id="S3.SS3.p2.17.m17.1">
      <semantics id="S3.SS3.p2.17.m17.1a">
       <msub id="S3.SS3.p2.17.m17.1.1" xref="S3.SS3.p2.17.m17.1.1.cmml">
        <mi id="S3.SS3.p2.17.m17.1.1.2" xref="S3.SS3.p2.17.m17.1.1.2.cmml">
         P
        </mi>
        <mrow id="S3.SS3.p2.17.m17.1.1.3" xref="S3.SS3.p2.17.m17.1.1.3.cmml">
         <mi id="S3.SS3.p2.17.m17.1.1.3.2" xref="S3.SS3.p2.17.m17.1.1.3.2.cmml">
          j
         </mi>
         <mo id="S3.SS3.p2.17.m17.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS3.p2.17.m17.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS3.p2.17.m17.1.1.3.3" xref="S3.SS3.p2.17.m17.1.1.3.3.cmml">
          d
         </mi>
         <mo id="S3.SS3.p2.17.m17.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS3.p2.17.m17.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS3.p2.17.m17.1.1.3.4" xref="S3.SS3.p2.17.m17.1.1.3.4.cmml">
          g
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.17.m17.1b">
        <apply id="S3.SS3.p2.17.m17.1.1.cmml" xref="S3.SS3.p2.17.m17.1.1">
         <csymbol cd="ambiguous" id="S3.SS3.p2.17.m17.1.1.1.cmml" xref="S3.SS3.p2.17.m17.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS3.p2.17.m17.1.1.2.cmml" xref="S3.SS3.p2.17.m17.1.1.2">
          𝑃
         </ci>
         <apply id="S3.SS3.p2.17.m17.1.1.3.cmml" xref="S3.SS3.p2.17.m17.1.1.3">
          <times id="S3.SS3.p2.17.m17.1.1.3.1.cmml" xref="S3.SS3.p2.17.m17.1.1.3.1">
          </times>
          <ci id="S3.SS3.p2.17.m17.1.1.3.2.cmml" xref="S3.SS3.p2.17.m17.1.1.3.2">
           𝑗
          </ci>
          <ci id="S3.SS3.p2.17.m17.1.1.3.3.cmml" xref="S3.SS3.p2.17.m17.1.1.3.3">
           𝑑
          </ci>
          <ci id="S3.SS3.p2.17.m17.1.1.3.4.cmml" xref="S3.SS3.p2.17.m17.1.1.3.4">
           𝑔
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.17.m17.1c">
        P_{jdg}
       </annotation>
      </semantics>
     </math>
     as "Judge whether the subtask is completed, output Yes or No", each time the agent executes a step, we feed
     <math alttext="P_{jdg}" class="ltx_Math" display="inline" id="S3.SS3.p2.18.m18.1">
      <semantics id="S3.SS3.p2.18.m18.1a">
       <msub id="S3.SS3.p2.18.m18.1.1" xref="S3.SS3.p2.18.m18.1.1.cmml">
        <mi id="S3.SS3.p2.18.m18.1.1.2" xref="S3.SS3.p2.18.m18.1.1.2.cmml">
         P
        </mi>
        <mrow id="S3.SS3.p2.18.m18.1.1.3" xref="S3.SS3.p2.18.m18.1.1.3.cmml">
         <mi id="S3.SS3.p2.18.m18.1.1.3.2" xref="S3.SS3.p2.18.m18.1.1.3.2.cmml">
          j
         </mi>
         <mo id="S3.SS3.p2.18.m18.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS3.p2.18.m18.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS3.p2.18.m18.1.1.3.3" xref="S3.SS3.p2.18.m18.1.1.3.3.cmml">
          d
         </mi>
         <mo id="S3.SS3.p2.18.m18.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS3.p2.18.m18.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.SS3.p2.18.m18.1.1.3.4" xref="S3.SS3.p2.18.m18.1.1.3.4.cmml">
          g
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p2.18.m18.1b">
        <apply id="S3.SS3.p2.18.m18.1.1.cmml" xref="S3.SS3.p2.18.m18.1.1">
         <csymbol cd="ambiguous" id="S3.SS3.p2.18.m18.1.1.1.cmml" xref="S3.SS3.p2.18.m18.1.1">
          subscript
         </csymbol>
         <ci id="S3.SS3.p2.18.m18.1.1.2.cmml" xref="S3.SS3.p2.18.m18.1.1.2">
          𝑃
         </ci>
         <apply id="S3.SS3.p2.18.m18.1.1.3.cmml" xref="S3.SS3.p2.18.m18.1.1.3">
          <times id="S3.SS3.p2.18.m18.1.1.3.1.cmml" xref="S3.SS3.p2.18.m18.1.1.3.1">
          </times>
          <ci id="S3.SS3.p2.18.m18.1.1.3.2.cmml" xref="S3.SS3.p2.18.m18.1.1.3.2">
           𝑗
          </ci>
          <ci id="S3.SS3.p2.18.m18.1.1.3.3.cmml" xref="S3.SS3.p2.18.m18.1.1.3.3">
           𝑑
          </ci>
          <ci id="S3.SS3.p2.18.m18.1.1.3.4.cmml" xref="S3.SS3.p2.18.m18.1.1.3.4">
           𝑔
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p2.18.m18.1c">
        P_{jdg}
       </annotation>
      </semantics>
     </math>
     to a LLM and get the output of "Yes" or "No" until the subtask is completed.
    </p>
   </div>
   <div class="ltx_para" id="S3.SS3.p3">
    <p class="ltx_p" id="S3.SS3.p3.1">
     Agent tasks in the real world are often complex and one single reasoning path may not yield the optimal answer. Inspired by the reflective ability in human thinking processes, we propose to take multi-path reasoning with LLMs. We call this method
     <span class="ltx_text ltx_font_italic" id="S3.SS3.p3.1.1">
      backtracking
     </span>
     . When a particular reasoning path yields a suboptimal output, we compose a backtracking prompt as "it was observed that the answer was not the optimal choice for task
     <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S3.SS3.p3.1.m1.1">
      <semantics id="S3.SS3.p3.1.m1.1a">
       <mi class="ltx_font_mathcaligraphic" id="S3.SS3.p3.1.m1.1.1" xref="S3.SS3.p3.1.m1.1.1.cmml">
        𝒯
       </mi>
       <annotation-xml encoding="MathML-Content" id="S3.SS3.p3.1.m1.1b">
        <ci id="S3.SS3.p3.1.m1.1.1.cmml" xref="S3.SS3.p3.1.m1.1.1">
         𝒯
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.SS3.p3.1.m1.1c">
        \mathcal{T}
       </annotation>
      </semantics>
     </math>
     …". We also prompt the LLMs to eschew reasoning paths that have been previously deduced. To this end, we compose the prompt as "it is important to note that actions should be adjusted appropriately based on the historical information" and we splice this prompt behind the backtracking prompt. Furthermore, backtracking and task decomposition are not mutually exclusive and can be applied together in the reasoning process of LLMs. We find that task decomposition is more effective for agent tasks that emphasize planning abilities, while backtracking is more effective for agent tasks that emphasize API invocation capabilities.
    </p>
   </div>
   <figure class="ltx_figure" id="S3.F4">
    <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="127" id="S3.F4.g1" src="/html/2403.19962/assets/Figs/agent-backtracking.png" width="287"/>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_figure">
      Figure 4:
     </span>
     The comparison of different reasoning methods. From the left to right are Input Output (IO), ToT and our method.
    </figcaption>
   </figure>
   <div class="ltx_para" id="S3.SS3.p4">
    <p class="ltx_p" id="S3.SS3.p4.1">
     Overall, our method is divided into two parts. The first part uses commercial LLMs to construct agent data and employs SFT to fundamentally enhance the agent capabilities of low-parameter LLMs. In the second part, while keeping the LLMs unchanged, it maximizes the activation of the agent capabilities by incorporating multi-path reasoning and task decomposition. For 7B and 13B LLMs, common issues such as hallucinatory outputs and forgetting errors often occur. By fine-tuning the LLMs on domain-specific data that adheres to the desired format, these issues can be significantly mitigated. For reasoning problems with vast search spaces, finding the optimal solution through a single inference path is challenging. This issue cannot be effectively addressed through supervised fine-tuning alone. However, by introducing techniques such as multi-path reasoning and task decomposition, the complexity of the problem can be reduced, facilitating the identification of the optimal solution.
    </p>
   </div>
   <figure class="ltx_table" id="S3.T1">
    <div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S3.T1.1" style="width:455.8pt;height:191.1pt;vertical-align:-1.0pt;">
     <span class="ltx_transformed_inner" style="transform:translate(-9.5pt,4.0pt) scale(0.96,0.96) ;">
      <table class="ltx_tabular ltx_align_middle" id="S3.T1.1.1">
       <tbody class="ltx_tbody">
        <tr class="ltx_tr" id="S3.T1.1.1.1">
         <td class="ltx_td ltx_border_tt" id="S3.T1.1.1.1.2" style="padding-left:3.0pt;padding-right:3.0pt;">
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          Data type
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          Operating System
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          DataBase
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          Webshop
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          ALFWorld
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.8" style="padding-left:3.0pt;padding-right:3.0pt;">
          Mind2web
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          Avg.
          <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T1.1.1.1.1.m1.1">
           <semantics id="S3.T1.1.1.1.1.m1.1a">
            <mo id="S3.T1.1.1.1.1.m1.1.1" stretchy="false" xref="S3.T1.1.1.1.1.m1.1.1.cmml">
             ↑
            </mo>
            <annotation-xml encoding="MathML-Content" id="S3.T1.1.1.1.1.m1.1b">
             <ci id="S3.T1.1.1.1.1.m1.1.1.cmml" xref="S3.T1.1.1.1.1.m1.1.1">
              ↑
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="S3.T1.1.1.1.1.m1.1c">
             \uparrow
            </annotation>
           </semantics>
          </math>
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.2.1">
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.2.1.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          GPT-4
         </td>
         <td class="ltx_td ltx_border_tt" id="S3.T1.1.1.2.1.2" style="padding-left:3.0pt;padding-right:3.0pt;">
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.2.1.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          42.4
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.2.1.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          32
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.2.1.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          61.1
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.2.1.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          78
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.2.1.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          29
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.2.1.8" style="padding-left:3.0pt;padding-right:3.0pt;">
          48.50
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.3.2">
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.3.2.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          GPT-3.5-turbo
         </td>
         <td class="ltx_td" id="S3.T1.1.1.3.2.2" style="padding-left:3.0pt;padding-right:3.0pt;">
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.3.2.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          32.6
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.3.2.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          36.7
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.3.2.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          64.1
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.3.2.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          16
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.3.2.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          20
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.3.2.8" style="padding-left:3.0pt;padding-right:3.0pt;">
          33.88
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.4.3">
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.4.3.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          claude
         </td>
         <td class="ltx_td" id="S3.T1.1.1.4.3.2" style="padding-left:3.0pt;padding-right:3.0pt;">
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.4.3.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          9.7
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.4.3.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          22
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.4.3.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          55.7
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.4.3.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          58
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.4.3.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          25
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.4.3.8" style="padding-left:3.0pt;padding-right:3.0pt;">
          34.08
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.5.4">
         <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.1.5.4.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          llama2-chat w/o sft
         </td>
         <td class="ltx_td ltx_border_t" id="S3.T1.1.1.5.4.2" style="padding-left:3.0pt;padding-right:3.0pt;">
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.1.5.4.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          3.8
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.1.5.4.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          2.66
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.1.5.4.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.1.5.4.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.1.5.4.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          5.68
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.1.5.4.8" style="padding-left:3.0pt;padding-right:3.0pt;">
          2.43
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.6.5">
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.6.5.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          codegen-struct
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.6.5.2" rowspan="2" style="padding-left:3.0pt;padding-right:3.0pt;">
          <span class="ltx_text" id="S3.T1.1.1.6.5.2.1">
           code
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.6.5.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          3.8
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.6.5.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          1.3
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.6.5.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.6.5.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.6.5.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.6.5.8" style="padding-left:3.0pt;padding-right:3.0pt;">
          1.27
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.7.6">
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.7.6.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          alpaca-code
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.7.6.2" style="padding-left:3.0pt;padding-right:3.0pt;">
          3.8
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.7.6.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          1.3
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.7.6.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          4.20
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.7.6.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.7.6.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          5.68
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.7.6.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          2.99
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.8.7">
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.8.7.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          open-assistant
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.8.7.2" style="padding-left:3.0pt;padding-right:3.0pt;">
          dialog
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.8.7.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.8.7.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          2.67
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.8.7.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          2.70
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.8.7.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.8.7.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          3.41
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.8.7.8" style="padding-left:3.0pt;padding-right:3.0pt;">
          1.76
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.9.8">
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.9.8.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          alpaca
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.1.9.8.2" rowspan="3" style="padding-left:3.0pt;padding-right:3.0pt;">
          <span class="ltx_text" id="S3.T1.1.1.9.8.2.1">
           instro+agent
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.9.8.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          15.38
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.9.8.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          3.33
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.9.8.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          31.10
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.9.8.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          0
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.9.8.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          8.52
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.9.8.8" style="padding-left:3.0pt;padding-right:3.0pt;">
          11.67
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.10.9">
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.10.9.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          agenttuning
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.10.9.2" style="padding-left:3.0pt;padding-right:3.0pt;">
          15.38
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.10.9.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          38.30
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.10.9.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          32.60
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.10.9.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          10
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.10.9.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          7.38
         </td>
         <td class="ltx_td ltx_align_center" id="S3.T1.1.1.10.9.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          20.73
         </td>
        </tr>
        <tr class="ltx_tr" id="S3.T1.1.1.11.10">
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.1.11.10.1" style="padding-left:3.0pt;padding-right:3.0pt;">
          ours
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.1.11.10.2" style="padding-left:3.0pt;padding-right:3.0pt;">
          11.54
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.1.11.10.3" style="padding-left:3.0pt;padding-right:3.0pt;">
          27.0
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.1.11.10.4" style="padding-left:3.0pt;padding-right:3.0pt;">
          34.53
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.1.11.10.5" style="padding-left:3.0pt;padding-right:3.0pt;">
          10
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.1.11.10.6" style="padding-left:3.0pt;padding-right:3.0pt;">
          9.66
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T1.1.1.11.10.7" style="padding-left:3.0pt;padding-right:3.0pt;">
          18.33
         </td>
        </tr>
       </tbody>
      </table>
     </span>
    </div>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_table">
      Table 1:
     </span>
     The experimental results of fine-tuning LLMs with different instruction tuning datasets on AgentBench tasks. We use llama2-7b-chat as the base model.
    </figcaption>
   </figure>
  </section>
 </section>
 <section class="ltx_section" id="S4">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    4
   </span>
   Experiments
  </h2>
  <div class="ltx_para" id="S4.p1">
   <p class="ltx_p" id="S4.p1.1">
    <span class="ltx_text ltx_font_bold" id="S4.p1.1.1">
     Agent Datasets:
    </span>
    We select five tasks from AgentBench benchmark
    <cite class="ltx_cite ltx_citemacro_cite">
     Liu et al. (
     <a class="ltx_ref" href="#bib.bib8" title="">
      2023
     </a>
     )
    </cite>
    : ALFWorld, WebShop, Mind2Web, Operating System, and Database. Next, we will introduce each agent task one by one in detail.
   </p>
  </div>
  <div class="ltx_para" id="S4.p2">
   <p class="ltx_p" id="S4.p2.1">
    <span class="ltx_text ltx_font_bold" id="S4.p2.1.1">
     ALFWorld
    </span>
    is designed to evaluate the planning ability of LLMs in a simulated home environment. The model needs to make decisions and execute actions through a text interface based on the environment description and target instructions, and dynamically adjust the plan to complete the task.
   </p>
  </div>
  <div class="ltx_para" id="S4.p3">
   <p class="ltx_p" id="S4.p3.1">
    <span class="ltx_text ltx_font_bold" id="S4.p3.1.1">
     WebShop
    </span>
    aims to evaluate the performance of LLMs in a simulated online shopping environment that mimics a real e-commerce website.The goal of the evaluation is to require LLMs to shop in a virtual shopping environment according to instructions and select products that meet desired attributes.
   </p>
  </div>
  <div class="ltx_para" id="S4.p4">
   <p class="ltx_p" id="S4.p4.1">
    <span class="ltx_text ltx_font_bold" id="S4.p4.1.1">
     Mind2Web
    </span>
    is a general web agent evaluation benchmark designed to evaluate the ability of LLMs to perform complex tasks on websites in different domains. The dataset covers a cross-domain test set across multiple websites. Each task includes a task description, a reference action sequence, and web page information and is designed to test the performance of LLMs in web browsing and interactive environments.
   </p>
  </div>
  <div class="ltx_para" id="S4.p5">
   <p class="ltx_p" id="S4.p5.1">
    <span class="ltx_text ltx_font_bold" id="S4.p5.1.1">
     Operating System
    </span>
    is designed to evaluate the ability of LLMs to perform tasks in the Bash environment of a real operating system. Tasks includes question answering and action, where the model needs to generate commands to solve a problem or perform an action.
   </p>
  </div>
  <div class="ltx_para" id="S4.p6">
   <p class="ltx_p" id="S4.p6.1">
    <span class="ltx_text ltx_font_bold" id="S4.p6.1.1">
     DataBase
    </span>
    is designed to evaluate the ability of LLMs to operate via SQL on real databases. The dataset contains a diverse set of instructions and databases, created by combining multiple existing datasets and performing data augmentation.
   </p>
  </div>
  <div class="ltx_para" id="S4.p7">
   <p class="ltx_p" id="S4.p7.1">
    <span class="ltx_text ltx_font_bold" id="S4.p7.1.1">
     Implementation details:
    </span>
    We use AgentBench as our benchmark and conduct experiments based on it. For 13B models, we choose OpenChat. OpenChat is a series of open-source LLMs fine-tuned on diverse and high-quality datasets of multi-round conversations. We select two models, openchat-v3.2 and openchat-v3.2-super for experiments. For the 7B models, we select llama2 and agentlm
    <cite class="ltx_cite ltx_citemacro_cite">
     Zeng et al. (
     <a class="ltx_ref" href="#bib.bib31" title="">
      2023
     </a>
     )
    </cite>
    for experiments. We use the fastchat framework to deploy LLMs and we use four RTX 4090 NVIDIA GPUs. See also the project page
    <span class="ltx_note ltx_role_footnote" id="footnote1">
     <sup class="ltx_note_mark">
      1
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        1
       </sup>
       <span class="ltx_tag ltx_tag_note">
        1
       </span>
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/HAIV-Lab/LLM-TMBR" target="_blank" title="">
        https://github.com/HAIV-Lab/LLM-TMBR
       </a>
      </span>
     </span>
    </span>
    .
   </p>
  </div>
  <section class="ltx_subsection" id="S4.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.1
    </span>
    Experimental Results
   </h3>
   <div class="ltx_para" id="S4.SS1.p1">
    <p class="ltx_p" id="S4.SS1.p1.1">
     <span class="ltx_text ltx_font_bold" id="S4.SS1.p1.1.1">
      Supervised fine-tuning with constructed dataset.
     </span>
     The experiments of supervised fine-tuning are shown in Tab.
     <a class="ltx_ref" href="#S3.T1" title="Table 1 ‣ 3.3 Multi-Path Reasoning under Task Decomposition ‣ 3 Methodology ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     . We fine-tune the 7B model on various instruction-tuning datasets and test it on five agent tasks. It can be seen that fine-tuning on various instruction datasets has a positive effect on improving the capabilities of agents. Among them, we find that fine-tuning the LLMs using code-type instructions has shown relatively limited effectiveness in improving agent capabilities. For example, after fine-tuning on alpaca-code dataset, the performance of llama2 on operating system task does not improve, and its performance on database tasks actually declined by
     <math alttext="1.33\%" class="ltx_Math" display="inline" id="S4.SS1.p1.1.m1.1">
      <semantics id="S4.SS1.p1.1.m1.1a">
       <mrow id="S4.SS1.p1.1.m1.1.1" xref="S4.SS1.p1.1.m1.1.1.cmml">
        <mn id="S4.SS1.p1.1.m1.1.1.2" xref="S4.SS1.p1.1.m1.1.1.2.cmml">
         1.33
        </mn>
        <mo id="S4.SS1.p1.1.m1.1.1.1" xref="S4.SS1.p1.1.m1.1.1.1.cmml">
         %
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.1b">
        <apply id="S4.SS1.p1.1.m1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1">
         <csymbol cd="latexml" id="S4.SS1.p1.1.m1.1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1.1">
          percent
         </csymbol>
         <cn id="S4.SS1.p1.1.m1.1.1.2.cmml" type="float" xref="S4.SS1.p1.1.m1.1.1.2">
          1.33
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.1c">
        1.33\%
       </annotation>
      </semantics>
     </math>
     . We analyze that although code-type data can enhance the understanding of the code of LLMs, it lacks dialogue processes and the decomposition of complex problems. Similar to code-type data, fine-tuning LLMs on regular dialog data alone is not an appropriate choice for enhancing its agent capabilities. For instance, after fine-tuning on Open-Assistant, llama2 exhibited a decrease in performance on operating system task and a lower improvement on the webshop task compared to other datasets.
    </p>
   </div>
   <figure class="ltx_table" id="S4.T2">
    <table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.1">
     <thead class="ltx_thead">
      <tr class="ltx_tr" id="S4.T2.1.1">
       <th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.2" style="padding:-0.5pt 4.0pt;">
        Size
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.3" style="padding:-0.5pt 4.0pt;">
        LLMs
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.4" style="padding:-0.5pt 4.0pt;">
        Methods
       </th>
       <th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.5" style="padding:-0.5pt 4.0pt;">
        Webshop
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.6" style="padding:-0.5pt 4.0pt;">
        ALFWorld
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.7" style="padding:-0.5pt 4.0pt;">
        Operate System
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1" style="padding:-0.5pt 4.0pt;">
        Avg.
        <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T2.1.1.1.m1.1">
         <semantics id="S4.T2.1.1.1.m1.1a">
          <mo id="S4.T2.1.1.1.m1.1.1" stretchy="false" xref="S4.T2.1.1.1.m1.1.1.cmml">
           ↑
          </mo>
          <annotation-xml encoding="MathML-Content" id="S4.T2.1.1.1.m1.1b">
           <ci id="S4.T2.1.1.1.m1.1.1.cmml" xref="S4.T2.1.1.1.m1.1.1">
            ↑
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.T2.1.1.1.m1.1c">
           \uparrow
          </annotation>
         </semantics>
        </math>
       </th>
      </tr>
     </thead>
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="S4.T2.1.2.1">
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.2.1.1" rowspan="8" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text" id="S4.T2.1.2.1.1.1">
         13B
        </span>
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.2.1.2" rowspan="4" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text" id="S4.T2.1.2.1.2.1">
         openchat_v3.2
        </span>
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.2.1.3" style="padding:-0.5pt 4.0pt;">
        IO
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.2.1.4" style="padding:-0.5pt 4.0pt;">
        1
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.2.1.5" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.2.1.6" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_left ltx_border_tt" id="S4.T2.1.2.1.7" style="padding:-0.5pt 4.0pt;">
        0.33
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.3.2">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.1" style="padding:-0.5pt 4.0pt;">
        CoT
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.2" style="padding:-0.5pt 4.0pt;">
        19
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.3" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.4" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.3.2.5" style="padding:-0.5pt 4.0pt;">
        6.33
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.4.3">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.1" style="padding:-0.5pt 4.0pt;">
        ReAct
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.2" style="padding:-0.5pt 4.0pt;">
        26
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.3" style="padding:-0.5pt 4.0pt;">
        5
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.4" style="padding:-0.5pt 4.0pt;">
        7.6
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.4.3.5" style="padding:-0.5pt 4.0pt;">
        12.86
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.5.4">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.1" style="padding:-0.5pt 4.0pt;">
        Ours
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.2" style="padding:-0.5pt 4.0pt;">
        27
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.3" style="padding:-0.5pt 4.0pt;">
        10
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.4" style="padding:-0.5pt 4.0pt;">
        7.6
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.5.4.5" style="padding:-0.5pt 4.0pt;">
        14.86
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.6.5">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.6.5.1" rowspan="4" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text" id="S4.T2.1.6.5.1.1">
         openchat_v3.2_super
        </span>
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.6.5.2" style="padding:-0.5pt 4.0pt;">
        IO
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.6.5.3" style="padding:-0.5pt 4.0pt;">
        5
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.6.5.4" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.6.5.5" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_left ltx_border_t" id="S4.T2.1.6.5.6" style="padding:-0.5pt 4.0pt;">
        1.66
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.7.6">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.7.6.1" style="padding:-0.5pt 4.0pt;">
        CoT
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.7.6.2" style="padding:-0.5pt 4.0pt;">
        23
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.7.6.3" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.7.6.4" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.7.6.5" style="padding:-0.5pt 4.0pt;">
        7.66
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.8.7">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.8.7.1" style="padding:-0.5pt 4.0pt;">
        ReAct
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.8.7.2" style="padding:-0.5pt 4.0pt;">
        30
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.8.7.3" style="padding:-0.5pt 4.0pt;">
        5
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.8.7.4" style="padding:-0.5pt 4.0pt;">
        3.8
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.8.7.5" style="padding:-0.5pt 4.0pt;">
        12.93
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.9.8">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.9.8.1" style="padding:-0.5pt 4.0pt;">
        Ours
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.9.8.2" style="padding:-0.5pt 4.0pt;">
        31
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.9.8.3" style="padding:-0.5pt 4.0pt;">
        11
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.9.8.4" style="padding:-0.5pt 4.0pt;">
        3.8
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.9.8.5" style="padding:-0.5pt 4.0pt;">
        15.26
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.10.9">
       <td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S4.T2.1.10.9.1" rowspan="8" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text" id="S4.T2.1.10.9.1.1">
         7B
        </span>
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.9.2" rowspan="4" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text" id="S4.T2.1.10.9.2.1">
         AgentLM-7B
        </span>
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.9.3" style="padding:-0.5pt 4.0pt;">
        IO
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.9.4" style="padding:-0.5pt 4.0pt;">
        50
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.9.5" style="padding:-0.5pt 4.0pt;">
        5
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.9.6" style="padding:-0.5pt 4.0pt;">
        3.8
       </td>
       <td class="ltx_td ltx_align_left ltx_border_t" id="S4.T2.1.10.9.7" style="padding:-0.5pt 4.0pt;">
        20.86
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.11.10">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.11.10.1" style="padding:-0.5pt 4.0pt;">
        CoT
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.11.10.2" style="padding:-0.5pt 4.0pt;">
        34
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.11.10.3" style="padding:-0.5pt 4.0pt;">
        5
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.11.10.4" style="padding:-0.5pt 4.0pt;">
        7.6
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.11.10.5" style="padding:-0.5pt 4.0pt;">
        19.50
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.12.11">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.12.11.1" style="padding:-0.5pt 4.0pt;">
        ReAct
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.12.11.2" style="padding:-0.5pt 4.0pt;">
        33
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.12.11.3" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.12.11.4" style="padding:-0.5pt 4.0pt;">
        7.6
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.12.11.5" style="padding:-0.5pt 4.0pt;">
        13.53
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.13.12">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.13.12.1" style="padding:-0.5pt 4.0pt;">
        Ours
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.13.12.2" style="padding:-0.5pt 4.0pt;">
        51
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.13.12.3" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.13.12.4" style="padding:-0.5pt 4.0pt;">
        7.6
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.13.12.5" style="padding:-0.5pt 4.0pt;">
        19.53
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.14.13">
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.14.13.1" rowspan="4" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text" id="S4.T2.1.14.13.1.1">
         llama2-7B
        </span>
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.13.2" style="padding:-0.5pt 4.0pt;">
        IO
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.13.3" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.13.4" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.13.5" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_left ltx_border_t" id="S4.T2.1.14.13.6" style="padding:-0.5pt 4.0pt;">
        0
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.15.14">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.15.14.1" style="padding:-0.5pt 4.0pt;">
        CoT
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.15.14.2" style="padding:-0.5pt 4.0pt;">
        4
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.15.14.3" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.15.14.4" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.15.14.5" style="padding:-0.5pt 4.0pt;">
        1.33
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.16.15">
       <td class="ltx_td ltx_align_center" id="S4.T2.1.16.15.1" style="padding:-0.5pt 4.0pt;">
        ReAct
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.16.15.2" style="padding:-0.5pt 4.0pt;">
        13.35
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.16.15.3" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T2.1.16.15.4" style="padding:-0.5pt 4.0pt;">
        7.6
       </td>
       <td class="ltx_td ltx_align_left" id="S4.T2.1.16.15.5" style="padding:-0.5pt 4.0pt;">
        6.98
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T2.1.17.16">
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.17.16.1" style="padding:-0.5pt 4.0pt;">
        Ours
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.17.16.2" style="padding:-0.5pt 4.0pt;">
        13.40
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.17.16.3" style="padding:-0.5pt 4.0pt;">
        0
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.17.16.4" style="padding:-0.5pt 4.0pt;">
        7.6
       </td>
       <td class="ltx_td ltx_align_left ltx_border_bb" id="S4.T2.1.17.16.5" style="padding:-0.5pt 4.0pt;">
        7.00
       </td>
      </tr>
     </tbody>
    </table>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_table">
      Table 2:
     </span>
     Experimental results of different reasoning methods on three agent benchmarks.
    </figcaption>
   </figure>
   <div class="ltx_para" id="S4.SS1.p2">
    <p class="ltx_p" id="S4.SS1.p2.2">
     Besides, we find that fine-tuning LLMs on high-quality general instruction tuning datasets can significantly improve its agent capabilities. For example, after fine-tuning with alpaca instruction tuning data, llama2 exhibit significant improvements across multiple agent tasks. In the operating system tasks and webshop tasks, llama2 tuning with alpaca data achieves nearly comparable results to those obtained through agenttuning. Agenttuning is the most effective tuning dataset. It combines GPT-4 assisted trajectory-labeled agent data with general instruction tuning data, resulting in significant improvements for llama2 across different agent tasks. Its performance in the database even exceeds that of the commercial model.
Fine-tuning the model using our constructed data can also improve the performance of LLMs on agent tasks. Although we construct limited and easy-to-collect data, the performance of LLMs fine-tuned with our data exceeds other datasets on some agent tasks. For example, on operating system tasks, our results are
     <math alttext="7.74\%" class="ltx_Math" display="inline" id="S4.SS1.p2.1.m1.1">
      <semantics id="S4.SS1.p2.1.m1.1a">
       <mrow id="S4.SS1.p2.1.m1.1.1" xref="S4.SS1.p2.1.m1.1.1.cmml">
        <mn id="S4.SS1.p2.1.m1.1.1.2" xref="S4.SS1.p2.1.m1.1.1.2.cmml">
         7.74
        </mn>
        <mo id="S4.SS1.p2.1.m1.1.1.1" xref="S4.SS1.p2.1.m1.1.1.1.cmml">
         %
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.1b">
        <apply id="S4.SS1.p2.1.m1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1">
         <csymbol cd="latexml" id="S4.SS1.p2.1.m1.1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1.1">
          percent
         </csymbol>
         <cn id="S4.SS1.p2.1.m1.1.1.2.cmml" type="float" xref="S4.SS1.p2.1.m1.1.1.2">
          7.74
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p2.1.m1.1c">
        7.74\%
       </annotation>
      </semantics>
     </math>
     higher than code-type datasets and
     <math alttext="11.54\%" class="ltx_Math" display="inline" id="S4.SS1.p2.2.m2.1">
      <semantics id="S4.SS1.p2.2.m2.1a">
       <mrow id="S4.SS1.p2.2.m2.1.1" xref="S4.SS1.p2.2.m2.1.1.cmml">
        <mn id="S4.SS1.p2.2.m2.1.1.2" xref="S4.SS1.p2.2.m2.1.1.2.cmml">
         11.54
        </mn>
        <mo id="S4.SS1.p2.2.m2.1.1.1" xref="S4.SS1.p2.2.m2.1.1.1.cmml">
         %
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p2.2.m2.1b">
        <apply id="S4.SS1.p2.2.m2.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1">
         <csymbol cd="latexml" id="S4.SS1.p2.2.m2.1.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1.1">
          percent
         </csymbol>
         <cn id="S4.SS1.p2.2.m2.1.1.2.cmml" type="float" xref="S4.SS1.p2.2.m2.1.1.2">
          11.54
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p2.2.m2.1c">
        11.54\%
       </annotation>
      </semantics>
     </math>
     higher than dialog-type datasets. Compared with agenttuning, our results are still far behind, which can be attributed to the limited amount of data. In addition, there are fewer complex tasks involving long conversations in our data, which is also one of the reasons.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS1.p3">
    <p class="ltx_p" id="S4.SS1.p3.4">
     <span class="ltx_text ltx_font_bold" id="S4.SS1.p3.4.1">
      Reasoning with task decomposition and backtracking.
     </span>
     We compare different reasoning methods on 7B and 13B LLMs, and the results are shown in Tab.
     <a class="ltx_ref" href="#S4.T2" title="Table 2 ‣ 4.1 Experimental Results ‣ 4 Experiments ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     . The 7B LLMs we evaluated are fine-tuned with agent data. AgentLM is fine-tuned with agenttuning data, and llama2 is fine-tuned with the data we constructed. We mainly conduct evaluations on webshop, household and operating system tasks. It can be seen that applying ReAct to various tasks is usually better than direct input and output (IO). For example, on the openchat-v3.2 model, ReAct is
     <math alttext="18\%" class="ltx_Math" display="inline" id="S4.SS1.p3.1.m1.1">
      <semantics id="S4.SS1.p3.1.m1.1a">
       <mrow id="S4.SS1.p3.1.m1.1.1" xref="S4.SS1.p3.1.m1.1.1.cmml">
        <mn id="S4.SS1.p3.1.m1.1.1.2" xref="S4.SS1.p3.1.m1.1.1.2.cmml">
         18
        </mn>
        <mo id="S4.SS1.p3.1.m1.1.1.1" xref="S4.SS1.p3.1.m1.1.1.1.cmml">
         %
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.1.m1.1b">
        <apply id="S4.SS1.p3.1.m1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1">
         <csymbol cd="latexml" id="S4.SS1.p3.1.m1.1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1.1">
          percent
         </csymbol>
         <cn id="S4.SS1.p3.1.m1.1.1.2.cmml" type="integer" xref="S4.SS1.p3.1.m1.1.1.2">
          18
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.1.m1.1c">
        18\%
       </annotation>
      </semantics>
     </math>
     higher than IO on webshop. Besides, our method can further achieve small improvements based on ReAct. On the webshop task, our results are on average about
     <math alttext="1\%" class="ltx_Math" display="inline" id="S4.SS1.p3.2.m2.1">
      <semantics id="S4.SS1.p3.2.m2.1a">
       <mrow id="S4.SS1.p3.2.m2.1.1" xref="S4.SS1.p3.2.m2.1.1.cmml">
        <mn id="S4.SS1.p3.2.m2.1.1.2" xref="S4.SS1.p3.2.m2.1.1.2.cmml">
         1
        </mn>
        <mo id="S4.SS1.p3.2.m2.1.1.1" xref="S4.SS1.p3.2.m2.1.1.1.cmml">
         %
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.2.m2.1b">
        <apply id="S4.SS1.p3.2.m2.1.1.cmml" xref="S4.SS1.p3.2.m2.1.1">
         <csymbol cd="latexml" id="S4.SS1.p3.2.m2.1.1.1.cmml" xref="S4.SS1.p3.2.m2.1.1.1">
          percent
         </csymbol>
         <cn id="S4.SS1.p3.2.m2.1.1.2.cmml" type="integer" xref="S4.SS1.p3.2.m2.1.1.2">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.2.m2.1c">
        1\%
       </annotation>
      </semantics>
     </math>
     higher than the second-best result. And on the household task, our method achieve improvements of
     <math alttext="5\%" class="ltx_Math" display="inline" id="S4.SS1.p3.3.m3.1">
      <semantics id="S4.SS1.p3.3.m3.1a">
       <mrow id="S4.SS1.p3.3.m3.1.1" xref="S4.SS1.p3.3.m3.1.1.cmml">
        <mn id="S4.SS1.p3.3.m3.1.1.2" xref="S4.SS1.p3.3.m3.1.1.2.cmml">
         5
        </mn>
        <mo id="S4.SS1.p3.3.m3.1.1.1" xref="S4.SS1.p3.3.m3.1.1.1.cmml">
         %
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.3.m3.1b">
        <apply id="S4.SS1.p3.3.m3.1.1.cmml" xref="S4.SS1.p3.3.m3.1.1">
         <csymbol cd="latexml" id="S4.SS1.p3.3.m3.1.1.1.cmml" xref="S4.SS1.p3.3.m3.1.1.1">
          percent
         </csymbol>
         <cn id="S4.SS1.p3.3.m3.1.1.2.cmml" type="integer" xref="S4.SS1.p3.3.m3.1.1.2">
          5
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.3.m3.1c">
        5\%
       </annotation>
      </semantics>
     </math>
     and
     <math alttext="6\%" class="ltx_Math" display="inline" id="S4.SS1.p3.4.m4.1">
      <semantics id="S4.SS1.p3.4.m4.1a">
       <mrow id="S4.SS1.p3.4.m4.1.1" xref="S4.SS1.p3.4.m4.1.1.cmml">
        <mn id="S4.SS1.p3.4.m4.1.1.2" xref="S4.SS1.p3.4.m4.1.1.2.cmml">
         6
        </mn>
        <mo id="S4.SS1.p3.4.m4.1.1.1" xref="S4.SS1.p3.4.m4.1.1.1.cmml">
         %
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.4.m4.1b">
        <apply id="S4.SS1.p3.4.m4.1.1.cmml" xref="S4.SS1.p3.4.m4.1.1">
         <csymbol cd="latexml" id="S4.SS1.p3.4.m4.1.1.1.cmml" xref="S4.SS1.p3.4.m4.1.1.1">
          percent
         </csymbol>
         <cn id="S4.SS1.p3.4.m4.1.1.2.cmml" type="integer" xref="S4.SS1.p3.4.m4.1.1.2">
          6
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.4.m4.1c">
        6\%
       </annotation>
      </semantics>
     </math>
     , respectively, on the 13B LLMs.
    </p>
   </div>
   <figure class="ltx_figure" id="S4.F5">
    <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="287" id="S4.F5.g1" src="/html/2403.19962/assets/Figs/agent-analysis.png" width="287"/>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_figure">
      Figure 5:
     </span>
     Comparison of ReAct and our method in agent task reasoning. We show the action and observation in webshop and household tasks.
    </figcaption>
   </figure>
   <div class="ltx_para" id="S4.SS1.p4">
    <p class="ltx_p" id="S4.SS1.p4.1">
     To delve into the impact of different reasoning methods on the results, we compare ReAct and our reasoning process as shown in Fig.
     <a class="ltx_ref" href="#S4.F5" title="Figure 5 ‣ 4.1 Experimental Results ‣ 4 Experiments ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
      <span class="ltx_text ltx_ref_tag">
       5
      </span>
     </a>
     . It can be seen that ReAct can prompt LLMs to think in each reasoning step, the models can still experience issues such as getting stuck in infinite loops and suffering from memory confusion. In contrast, on household tasks, since we break down complex tasks into several smaller tasks, model thinking is less error-prone than ReAct.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S4.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.2
    </span>
    Ablation Study
   </h3>
   <div class="ltx_para" id="S4.SS2.p1">
    <p class="ltx_p" id="S4.SS2.p1.2">
     <span class="ltx_text ltx_font_bold" id="S4.SS2.p1.2.1">
      The experiments of num path and branch.
     </span>
     "num path" refers to the number of backtracking iterations conducted, with a higher value indicating an increase in the number of reasoning paths explored. We conduct experiments of "num path" shown in Tab.
     <a class="ltx_ref" href="#S4.T3" title="Table 3 ‣ 4.2 Ablation Study ‣ 4 Experiments ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
      <span class="ltx_text ltx_ref_tag">
       3
      </span>
     </a>
     left. It can be seen that appropriately increasing "num path" can improve performance, but when "num path" is greater than
     <math alttext="2" class="ltx_Math" display="inline" id="S4.SS2.p1.1.m1.1">
      <semantics id="S4.SS2.p1.1.m1.1a">
       <mn id="S4.SS2.p1.1.m1.1.1" xref="S4.SS2.p1.1.m1.1.1.cmml">
        2
       </mn>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1b">
        <cn id="S4.SS2.p1.1.m1.1.1.cmml" type="integer" xref="S4.SS2.p1.1.m1.1.1">
         2
        </cn>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1c">
        2
       </annotation>
      </semantics>
     </math>
     , performance decreases.
We also conduct the experiments of "num branch" shown in Tab.
     <a class="ltx_ref" href="#S4.T3" title="Table 3 ‣ 4.2 Ablation Study ‣ 4 Experiments ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
      <span class="ltx_text ltx_ref_tag">
       3
      </span>
     </a>
     right.
"num branch" is the number of nodes expanded at each reasoning step. It is shown that properly increasing "num branch" can also improve performance: when "num branch" is greater than
     <math alttext="2" class="ltx_Math" display="inline" id="S4.SS2.p1.2.m2.1">
      <semantics id="S4.SS2.p1.2.m2.1a">
       <mn id="S4.SS2.p1.2.m2.1.1" xref="S4.SS2.p1.2.m2.1.1.cmml">
        2
       </mn>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p1.2.m2.1b">
        <cn id="S4.SS2.p1.2.m2.1.1.cmml" type="integer" xref="S4.SS2.p1.2.m2.1.1">
         2
        </cn>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p1.2.m2.1c">
        2
       </annotation>
      </semantics>
     </math>
     , performance decreases.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS2.p2">
    <p class="ltx_p" id="S4.SS2.p2.1">
     We conduct experiments on the mixing ratio of different general data and agent data as shown in Fig.
     <a class="ltx_ref" href="#S4.T4" title="Table 4 ‣ 4.2 Ablation Study ‣ 4 Experiments ‣ Enhancing the General Agent Capabilities of Low-Parameter LLMs through Tuning and Multi-Branch Reasoning">
      <span class="ltx_text ltx_ref_tag">
       4
      </span>
     </a>
     . We find that too much agent data will not bring huge improvements, and general data is equally important.
    </p>
   </div>
   <figure class="ltx_table" id="S4.T3">
    <table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T3.1">
     <thead class="ltx_thead">
      <tr class="ltx_tr" id="S4.T3.1.1.1">
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.1" style="padding:-0.5pt 4.0pt;">
        num path
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.2" style="padding:-0.5pt 4.0pt;">
        Webshop
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.3" style="padding:-0.5pt 4.0pt;">
        num branch
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1.4" style="padding:-0.5pt 4.0pt;">
        Webshop
       </th>
      </tr>
     </thead>
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="S4.T3.1.2.1">
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T3.1.2.1.1" style="padding:-0.5pt 4.0pt;">
        1
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T3.1.2.1.2" style="padding:-0.5pt 4.0pt;">
        20.29
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T3.1.2.1.3" style="padding:-0.5pt 4.0pt;">
        1
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T3.1.2.1.4" style="padding:-0.5pt 4.0pt;">
        26.00
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T3.1.3.2">
       <td class="ltx_td ltx_align_center" id="S4.T3.1.3.2.1" style="padding:-0.5pt 4.0pt;">
        2
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T3.1.3.2.2" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text ltx_font_bold" id="S4.T3.1.3.2.2.1">
         27.00
        </span>
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T3.1.3.2.3" style="padding:-0.5pt 4.0pt;">
        2
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T3.1.3.2.4" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text ltx_font_bold" id="S4.T3.1.3.2.4.1">
         27.00
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T3.1.4.3">
       <td class="ltx_td ltx_align_center" id="S4.T3.1.4.3.1" style="padding:-0.5pt 4.0pt;">
        3
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T3.1.4.3.2" style="padding:-0.5pt 4.0pt;">
        17.84
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T3.1.4.3.3" style="padding:-0.5pt 4.0pt;">
        3
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T3.1.4.3.4" style="padding:-0.5pt 4.0pt;">
        6.80
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T3.1.5.4">
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.1.5.4.1" style="padding:-0.5pt 4.0pt;">
        4
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.1.5.4.2" style="padding:-0.5pt 4.0pt;">
        16.67
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.1.5.4.3" style="padding:-0.5pt 4.0pt;">
        4
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.1.5.4.4" style="padding:-0.5pt 4.0pt;">
        15.80
       </td>
      </tr>
     </tbody>
    </table>
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table 3:
     </span>
     The experimental results of the effect of num path and num branch in our reasoning method.
    </figcaption>
   </figure>
   <figure class="ltx_table" id="S4.T4">
    <table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T4.1">
     <thead class="ltx_thead">
      <tr class="ltx_tr" id="S4.T4.1.1">
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1" style="padding:-0.5pt 4.0pt;">
        <math alttext="\lambda" class="ltx_Math" display="inline" id="S4.T4.1.1.1.m1.1">
         <semantics id="S4.T4.1.1.1.m1.1a">
          <mi id="S4.T4.1.1.1.m1.1.1" xref="S4.T4.1.1.1.m1.1.1.cmml">
           λ
          </mi>
          <annotation-xml encoding="MathML-Content" id="S4.T4.1.1.1.m1.1b">
           <ci id="S4.T4.1.1.1.m1.1.1.cmml" xref="S4.T4.1.1.1.m1.1.1">
            𝜆
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.T4.1.1.1.m1.1c">
           \lambda
          </annotation>
         </semantics>
        </math>
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.2" style="padding:-0.5pt 4.0pt;">
        Alfworld
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.3" style="padding:-0.5pt 4.0pt;">
        Webshop
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.4" style="padding:-0.5pt 4.0pt;">
        Mind2web
       </th>
       <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.5" style="padding:-0.5pt 4.0pt;">
        OS
       </th>
      </tr>
     </thead>
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="S4.T4.1.2.1">
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.2.1.1" style="padding:-0.5pt 4.0pt;">
        0.1
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.2.1.2" style="padding:-0.5pt 4.0pt;">
        0.0
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.2.1.3" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text ltx_font_bold" id="S4.T4.1.2.1.3.1">
         38.13
        </span>
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.2.1.4" style="padding:-0.5pt 4.0pt;">
        6.81
       </td>
       <td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.1.2.1.5" style="padding:-0.5pt 4.0pt;">
        0
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T4.1.3.2">
       <td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.1" style="padding:-0.5pt 4.0pt;">
        0.3
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.2" style="padding:-0.5pt 4.0pt;">
        0.0
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.3" style="padding:-0.5pt 4.0pt;">
        30.06
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.4" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text ltx_font_bold" id="S4.T4.1.3.2.4.1">
         7.95
        </span>
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T4.1.3.2.5" style="padding:-0.5pt 4.0pt;">
        0
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T4.1.4.3">
       <td class="ltx_td ltx_align_center" id="S4.T4.1.4.3.1" style="padding:-0.5pt 4.0pt;">
        0.5
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T4.1.4.3.2" style="padding:-0.5pt 4.0pt;">
        0.0
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T4.1.4.3.3" style="padding:-0.5pt 4.0pt;">
        36.42
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T4.1.4.3.4" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text ltx_font_bold" id="S4.T4.1.4.3.4.1">
         7.95
        </span>
       </td>
       <td class="ltx_td ltx_align_center" id="S4.T4.1.4.3.5" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text ltx_font_bold" id="S4.T4.1.4.3.5.1">
         3.8
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="S4.T4.1.5.4">
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.5.4.1" style="padding:-0.5pt 4.0pt;">
        0.8
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.5.4.2" style="padding:-0.5pt 4.0pt;">
        <span class="ltx_text ltx_font_bold" id="S4.T4.1.5.4.2.1">
         5
        </span>
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.5.4.3" style="padding:-0.5pt 4.0pt;">
        23.35
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.5.4.4" style="padding:-0.5pt 4.0pt;">
        3.97
       </td>
       <td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.1.5.4.5" style="padding:-0.5pt 4.0pt;">
        0
       </td>
      </tr>
     </tbody>
    </table>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_table">
      Table 4:
     </span>
     Experimental results after mixing different general data and agent data.
    </figcaption>
   </figure>
  </section>
 </section>
 <section class="ltx_section" id="S5">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    5
   </span>
   Conclusion
  </h2>
  <div class="ltx_para" id="S5.p1">
   <p class="ltx_p" id="S5.p1.1">
    LLMs as intelligent agents have demonstrated powerful agent capabilities. In this work, we explore the 7B and 13B LLMs as agents, and propose to enhance the agent performance of these open-source models by supervised fine-tuning through agent data as well as multi-branch reasoning. SFT can effectively reduce format errors and hallucination output of the LLMs, which not only improves the agent performance but also facilitates the application of various reasoning methods to agent tasks.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S6">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    6
   </span>
   Limitations
  </h2>
  <div class="ltx_para" id="S6.p1">
   <p class="ltx_p" id="S6.p1.1">
    This study presents several limitations. First, our experiments are limited to 7B and 13B LLMs, and thus, the applicability of our findings to models of different sizes is not verified. The methods we propose may also not be feasible for all researchers due to the computational demands of fine-tuning larger models. Additionally, measuring reductions in hallucinations and formatting errors is inherently subjective, and the performance metrics used may not fully capture the agent capabilities in complex real-world tasks.
   </p>
  </div>
  <div class="ltx_para" id="S6.p2">
   <p class="ltx_p" id="S6.p2.1">
    The constructed data for SFT could introduce biases and the potential for model overfitting, limiting the performance of LLMs on unencountered tasks. Moreover, while we implement multi-path reasoning and task decomposition, the strategies for optimizing these techniques are not definitive. Our evaluation on a limited set of tasks does not account for the full range of an agent capabilities, necessitating broader evaluations in future research.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="Sx1">
  <h2 class="ltx_title ltx_title_section">
   Acknowledgement
  </h2>
  <div class="ltx_para" id="Sx1.p1">
   <p class="ltx_p" id="Sx1.p1.1">
    The funding for this research was generously provided by the Alibaba Innovation Research program under Grant Contract # CRAQ7WHZ11220001-20978282, Natural Science Fund of Hubei Province (Grant # 2022CFB823), and HUST Independent Innovation Research Fund (Grant # 2021XXJS096).
   </p>
  </div>
 </section>
 <section class="ltx_bibliography" id="bib">
  <h2 class="ltx_title ltx_title_bibliography">
   References
  </h2>
  <ul class="ltx_biblist">
   <li class="ltx_bibitem" id="bib.bib1">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Brown et al. (2020)
    </span>
    <span class="ltx_bibblock">
     Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, et al. 2020.
    </span>
    <span class="ltx_bibblock">
     Language models are few-shot learners.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">
      Advances in neural information processing systems
     </em>
     , 33:1877–1901.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib2">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Chen et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Justin Chih-Yao Chen, Swarnadeep Saha, and Mohit Bansal. 2023.
    </span>
    <span class="ltx_bibblock">
     Reconcile: Round-table conference improves reasoning via consensus among diverse llms.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">
      arXiv preprint arXiv:2309.13007
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib3">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Dong et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Qingxiu Dong, Lei Li, Damai Dai, Ce Zheng, Zhiyong Wu, Baobao Chang, Xu Sun, Jingjing Xu, and Zhifang Sui. 2022.
    </span>
    <span class="ltx_bibblock">
     A survey for in-context learning.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">
      arXiv preprint arXiv:2301.00234
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib4">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Gravitas (2023)
    </span>
    <span class="ltx_bibblock">
     Significant Gravitas. 2023.
    </span>
    <span class="ltx_bibblock">
     Auto-gpt: An autonomous gpt-4 experiment.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib5">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Hao et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Shibo Hao, Yi Gu, Haodi Ma, Joshua Jiahua Hong, Zhen Wang, Daisy Zhe Wang, and Zhiting Hu. 2023.
    </span>
    <span class="ltx_bibblock">
     Reasoning with language model is planning with world model.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">
      arXiv preprint arXiv:2305.14992
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib6">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Hu et al. (2021)
    </span>
    <span class="ltx_bibblock">
     Edward J Hu, Yelong Shen, Phillip Wallis, Zeyuan Allen-Zhu, Yuanzhi Li, Shean Wang, Lu Wang, and Weizhu Chen. 2021.
    </span>
    <span class="ltx_bibblock">
     Lora: Low-rank adaptation of large language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">
      arXiv preprint arXiv:2106.09685
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib7">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Kim et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Geunwoo Kim, Pierre Baldi, and Stephen McAleer. 2023.
    </span>
    <span class="ltx_bibblock">
     Language models can solve computer tasks.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">
      arXiv preprint arXiv:2303.17491
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib8">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Liu et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Xiao Liu, Hao Yu, Hanchen Zhang, Yifan Xu, Xuanyu Lei, Hanyu Lai, Yu Gu, Hangliang Ding, Kaiwen Men, Kejuan Yang, et al. 2023.
    </span>
    <span class="ltx_bibblock">
     Agentbench: Evaluating llms as agents.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">
      arXiv preprint arXiv:2308.03688
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib9">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Madaan et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Aman Madaan, Niket Tandon, Prakhar Gupta, Skyler Hallinan, Luyu Gao, Sarah Wiegreffe, Uri Alon, Nouha Dziri, Shrimai Prabhumoye, Yiming Yang, et al. 2023.
    </span>
    <span class="ltx_bibblock">
     Self-refine: Iterative refinement with self-feedback.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">
      arXiv preprint arXiv:2303.17651
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib10">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     OpenAI (2022)
    </span>
    <span class="ltx_bibblock">
     OpenAI. 2022.
    </span>
    <span class="ltx_bibblock">
     Introducing chatgpt.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib11">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     OpenAI (2023)
    </span>
    <span class="ltx_bibblock">
     R OpenAI. 2023.
    </span>
    <span class="ltx_bibblock">
     Gpt-4 technical report. arxiv 2303.08774.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">
      View in Article
     </em>
     , 2:3.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib12">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Osika et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Anton Osika et al. 2023.
    </span>
    <span class="ltx_bibblock">
     Gpt engineer.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib13">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Peng et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Baolin Peng, Chunyuan Li, Pengcheng He, Michel Galley, and Jianfeng Gao. 2023.
    </span>
    <span class="ltx_bibblock">
     Instruction tuning with gpt-4.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">
      arXiv preprint arXiv:2304.03277
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib14">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Peters et al. (2019)
    </span>
    <span class="ltx_bibblock">
     Matthew E Peters, Mark Neumann, Robert L Logan IV, Roy Schwartz, Vidur Joshi, Sameer Singh, and Noah A Smith. 2019.
    </span>
    <span class="ltx_bibblock">
     Knowledge enhanced contextual word representations.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">
      arXiv preprint arXiv:1909.04164
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib15">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Qiao et al. (2024)
    </span>
    <span class="ltx_bibblock">
     Shuofei Qiao, Ningyu Zhang, Runnan Fang, Yujie Luo, Wangchunshu Zhou, Yuchen Eleanor Jiang, Chengfei Lv, and Huajun Chen. 2024.
    </span>
    <span class="ltx_bibblock">
     Autoact: Automatic agent learning from scratch via self-planning.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">
      arXiv preprint arXiv:2401.05268
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib16">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Qin et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Yujia Qin, Shihao Liang, Yining Ye, Kunlun Zhu, Lan Yan, Yaxi Lu, Yankai Lin, Xin Cong, Xiangru Tang, Bill Qian, et al. 2023.
    </span>
    <span class="ltx_bibblock">
     Toolllm: Facilitating large language models to master 16000+ real-world apis.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">
      arXiv preprint arXiv:2307.16789
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib17">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Sanh et al. (2021)
    </span>
    <span class="ltx_bibblock">
     Victor Sanh, Albert Webson, Colin Raffel, Stephen H Bach, Lintang Sutawika, Zaid Alyafeai, Antoine Chaffin, Arnaud Stiegler, Teven Le Scao, Arun Raja, et al. 2021.
    </span>
    <span class="ltx_bibblock">
     Multitask prompted training enables zero-shot task generalization.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">
      arXiv preprint arXiv:2110.08207
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib18">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Shinn et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Noah Shinn, Federico Cassano, Ashwin Gopinath, Karthik R Narasimhan, and Shunyu Yao. 2023.
    </span>
    <span class="ltx_bibblock">
     Reflexion: Language agents with verbal reinforcement learning.
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">
      Thirty-seventh Conference on Neural Information Processing Systems
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib19">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Shridhar et al. (2020)
    </span>
    <span class="ltx_bibblock">
     Mohit Shridhar, Xingdi Yuan, Marc-Alexandre Côté, Yonatan Bisk, Adam Trischler, and Matthew Hausknecht. 2020.
    </span>
    <span class="ltx_bibblock">
     Alfworld: Aligning text and embodied environments for interactive learning.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">
      arXiv preprint arXiv:2010.03768
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib20">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wang et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Lei Wang, Chen Ma, Xueyang Feng, Zeyu Zhang, Hao Yang, Jingsen Zhang, Zhiyuan Chen, Jiakai Tang, Xu Chen, Yankai Lin, et al. 2023.
    </span>
    <span class="ltx_bibblock">
     A survey on large language model based autonomous agents.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">
      arXiv preprint arXiv:2308.11432
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib21">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wang et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. 2022.
    </span>
    <span class="ltx_bibblock">
     Self-consistency improves chain of thought reasoning in language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">
      arXiv preprint arXiv:2203.11171
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib22">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wei et al. (2021)
    </span>
    <span class="ltx_bibblock">
     Jason Wei, Maarten Bosma, Vincent Y Zhao, Kelvin Guu, Adams Wei Yu, Brian Lester, Nan Du, Andrew M Dai, and Quoc V Le. 2021.
    </span>
    <span class="ltx_bibblock">
     Finetuned language models are zero-shot learners.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">
      arXiv preprint arXiv:2109.01652
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib23">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wei et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Fei Xia, Ed Chi, Quoc V Le, Denny Zhou, et al. 2022.
    </span>
    <span class="ltx_bibblock">
     Chain-of-thought prompting elicits reasoning in large language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">
      Advances in Neural Information Processing Systems
     </em>
     , 35:24824–24837.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib24">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wu et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Yue Wu, So Yeon Min, Yonatan Bisk, Ruslan Salakhutdinov, Amos Azaria, Yuanzhi Li, Tom Mitchell, and Shrimai Prabhumoye. 2023.
    </span>
    <span class="ltx_bibblock">
     Plan, eliminate, and track–language models are good teachers for embodied agents.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">
      arXiv preprint arXiv:2305.02412
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib25">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Xi et al. (2023a)
    </span>
    <span class="ltx_bibblock">
     Zhiheng Xi, Wenxiang Chen, Xin Guo, Wei He, Yiwen Ding, Boyang Hong, Ming Zhang, Junzhe Wang, Senjie Jin, Enyu Zhou, et al. 2023a.
    </span>
    <span class="ltx_bibblock">
     The rise and potential of large language model based agents: A survey.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">
      arXiv preprint arXiv:2309.07864
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib26">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Xi et al. (2023b)
    </span>
    <span class="ltx_bibblock">
     Zhiheng Xi, Senjie Jin, Yuhao Zhou, Rui Zheng, Songyang Gao, Tao Gui, Qi Zhang, and Xuanjing Huang. 2023b.
    </span>
    <span class="ltx_bibblock">
     Self-polish: Enhance reasoning in large language models via problem refinement.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">
      arXiv preprint arXiv:2305.14497
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib27">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Xu et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Binfeng Xu, Zhiyuan Peng, Bowen Lei, Subhabrata Mukherjee, Yuchen Liu, and Dongkuan Xu. 2023.
    </span>
    <span class="ltx_bibblock">
     Rewoo: Decoupling reasoning from observations for efficient augmented language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">
      arXiv preprint arXiv:2305.18323
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib28">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Yao et al. (2022a)
    </span>
    <span class="ltx_bibblock">
     Shunyu Yao, Howard Chen, John Yang, and Karthik Narasimhan. 2022a.
    </span>
    <span class="ltx_bibblock">
     Webshop: Towards scalable real-world web interaction with grounded language agents.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">
      Advances in Neural Information Processing Systems
     </em>
     , 35:20744–20757.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib29">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Yao et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Shunyu Yao, Dian Yu, Jeffrey Zhao, Izhak Shafran, Thomas L Griffiths, Yuan Cao, and Karthik Narasimhan. 2023.
    </span>
    <span class="ltx_bibblock">
     Tree of thoughts: Deliberate problem solving with large language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">
      arXiv preprint arXiv:2305.10601
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib30">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Yao et al. (2022b)
    </span>
    <span class="ltx_bibblock">
     Shunyu Yao, Jeffrey Zhao, Dian Yu, Nan Du, Izhak Shafran, Karthik Narasimhan, and Yuan Cao. 2022b.
    </span>
    <span class="ltx_bibblock">
     React: Synergizing reasoning and acting in language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">
      arXiv preprint arXiv:2210.03629
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib31">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Zeng et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Aohan Zeng, Mingdao Liu, Rui Lu, Bowen Wang, Xiao Liu, Yuxiao Dong, and Jie Tang. 2023.
    </span>
    <span class="ltx_bibblock">
     Agenttuning: Enabling generalized agent abilities for llms.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">
      arXiv preprint arXiv:2310.12823
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib32">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Zhang et al. (2023a)
    </span>
    <span class="ltx_bibblock">
     Shengyu Zhang, Linfeng Dong, Xiaoya Li, Sen Zhang, Xiaofei Sun, Shuhe Wang, Jiwei Li, Runyi Hu, Tianwei Zhang, Fei Wu, et al. 2023a.
    </span>
    <span class="ltx_bibblock">
     Instruction tuning for large language models: A survey.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">
      arXiv preprint arXiv:2308.10792
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib33">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Zhang et al. (2023b)
    </span>
    <span class="ltx_bibblock">
     Yue Zhang, Yafu Li, Leyang Cui, Deng Cai, Lemao Liu, Tingchen Fu, Xinting Huang, Enbo Zhao, Yu Zhang, Yulong Chen, et al. 2023b.
    </span>
    <span class="ltx_bibblock">
     Siren’s song in the ai ocean: A survey on hallucination in large language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">
      arXiv preprint arXiv:2309.01219
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib34">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Zhang et al. (2023c)
    </span>
    <span class="ltx_bibblock">
     Zhuosheng Zhang, Aston Zhang, Mu Li, Hai Zhao, George Karypis, and Alex Smola. 2023c.
    </span>
    <span class="ltx_bibblock">
     Multimodal chain-of-thought reasoning in language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">
      arXiv preprint arXiv:2302.00923
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib35">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Zhou et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Andy Zhou, Kai Yan, Michal Shlapentokh-Rothman, Haohan Wang, and Yu-Xiong Wang. 2023.
    </span>
    <span class="ltx_bibblock">
     Language agent tree search unifies reasoning acting and planning in language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">
      arXiv preprint arXiv:2310.04406
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib36">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Zhu et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Xizhou Zhu, Yuntao Chen, Hao Tian, Chenxin Tao, Weijie Su, Chenyu Yang, Gao Huang, Bin Li, Lewei Lu, Xiaogang Wang, et al. 2023.
    </span>
    <span class="ltx_bibblock">
     Ghost in the minecraft: Generally capable agents for open-world enviroments via large language models with text-based knowledge and memory.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">
      arXiv preprint arXiv:2305.17144
     </em>
     .
    </span>
   </li>
  </ul>
 </section>
</article>
