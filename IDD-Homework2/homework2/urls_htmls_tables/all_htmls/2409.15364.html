<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>VERA: Validation and Enhancement for Retrieval Augmented systems</title>
<!--Generated on Wed Sep 18 15:54:33 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2409.15364v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx1" title="In VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx2" title="In VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Related Works</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx2.SSx1" title="In Related Works ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">RARR</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx2.SSx2" title="In Related Works ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">SELF-RAG</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx2.SSx3" title="In Related Works ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">CRAG</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx2.SSx4" title="In Related Works ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">FACTScore</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx3" title="In VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Methodology</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx3.SSx1" title="In Methodology ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Retrieval Requirement check</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx3.SSx2" title="In Methodology ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Retrieval Quality Evaluation and Correction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx3.SSx3" title="In Methodology ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Response Relevancy Evaluation and Correction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx3.SSx4" title="In Methodology ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Response Adherence Evaluation and Correction</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx4" title="In VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx4.SSx1" title="In Experiments ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Tasks and Datasets</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx4.SSx1.SSSx1" title="In Tasks and Datasets ‣ Experiments ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">SQuAD-2.0 Dataset</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx4.SSx1.SSSx2" title="In Tasks and Datasets ‣ Experiments ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">DROP Dataset</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx4.SSx1.SSSx3" title="In Tasks and Datasets ‣ Experiments ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Real World Downstream Tasks</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx4.SSx2" title="In Experiments ‣ VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Baselines</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx5" title="In VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx6" title="In VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#Sx7" title="In VERA: Validation and Enhancement for Retrieval Augmented systems"><span class="ltx_text ltx_ref_title">Limitations and Future Work</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">VERA: Validation and Enhancement for Retrieval Augmented systems</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Nitin Aravind Birur, Tanay Baswa, Divyanshu Kumar, Jatan Loya, Sahil Agarwal, Prashanth Harshangi
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id1.id1">Large language models (LLMs) exhibit remarkable capabilities but often produce inaccurate responses, as they rely solely on their embedded knowledge. Retrieval-Augmented Generation (RAG) enhances LLMs by incorporating an external information retrieval system, supplying additional context along with the query to mitigate inaccuracies for a particular context. However, accuracy issues still remain, as the model may rely on irrelevant documents or extrapolate incorrectly from its training knowledge. To assess and improve the performance of both the retrieval system and the LLM in a RAG framework, we propose <span class="ltx_text ltx_font_bold" id="id1.id1.1">VERA</span> (<span class="ltx_text ltx_font_bold" id="id1.id1.2">V</span>alidation and <span class="ltx_text ltx_font_bold" id="id1.id1.3">E</span>nhancement for <span class="ltx_text ltx_font_bold" id="id1.id1.4">R</span>etrieval <span class="ltx_text ltx_font_bold" id="id1.id1.5">A</span>ugmented systems), a system designed to: 1) Evaluate and enhance the retrieved context before response generation, and 2) Evaluate and refine the LLM-generated response to ensure precision and minimize errors. VERA employs an evaluator-cum-enhancer LLM that first checks if external retrieval is necessary, evaluates the relevance and redundancy of the retrieved context, and refines it to eliminate non-essential information. Post-response generation, VERA splits the response into atomic statements, assesses their relevance to the query, and ensures adherence to the context. Our experiments demonstrate VERA’s remarkable efficacy not only in improving the performance of smaller open-source models, but also larger state-of-the art models. These enhancements underscore VERA’s potential to produce accurate and relevant responses, advancing the state-of-the-art in retrieval-augmented language modeling. VERA’s robust methodology, combining multiple evaluation and refinement steps, effectively mitigates hallucinations and improves retrieval and response processes, making it a valuable tool for applications demanding high accuracy and reliability in information generation.</p>
</div>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Introduction</h2>
<figure class="ltx_figure" id="Sx1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="263" id="Sx1.F1.g1" src="extracted/5863653/figures/figure_1.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>An overview of VERA</figcaption>
</figure>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">Retrieval-Augmented Generation (RAG) <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib14" title="">2020</a>)</cite> techniques enhance the inputs to Large Language Models (LLMs) by incorporating relevant retrieved passages, thus reducing factual errors in knowledge-intensive tasks. These passages are retrieved using methods such as vector similarity search. However, previous research has demonstrated that retrieval-augmented models may generate text that includes additional information beyond the retrieved documents <cite class="ltx_cite ltx_citemacro_citep">(Dziri et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib5" title="">2022</a>)</cite>, disregards the documents altogether <cite class="ltx_cite ltx_citemacro_citep">(Krishna, Roy, and Iyyer <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib12" title="">2021</a>)</cite>, or even contradicts the documents <cite class="ltx_cite ltx_citemacro_citep">(Longpre et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib15" title="">2021</a>)</cite>. The quality of the LLM’s response can also be compromised by erroneous or irrelevant retrievals <cite class="ltx_cite ltx_citemacro_citep">(Khandelwal et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib11" title="">2019</a>)</cite>. In reality, retrievals are not always necessary and are primarily needed for knowledge-intensive tasks. Therefore, there is a critical need to enhance both the quality of retrievals and the quality of responses.</p>
</div>
<div class="ltx_para" id="Sx1.p2">
<p class="ltx_p" id="Sx1.p2.1">To quantify and evaluate the quality of retrievals and responses, we employ the following metrics:</p>
<ul class="ltx_itemize" id="Sx1.I1">
<li class="ltx_item" id="Sx1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="Sx1.I1.i1.p1">
<p class="ltx_p" id="Sx1.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="Sx1.I1.i1.p1.1.1">Response Adherence:</span> This metric measures the extent to which the LLM’s response is grounded in the provided context.</p>
</div>
</li>
<li class="ltx_item" id="Sx1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="Sx1.I1.i2.p1">
<p class="ltx_p" id="Sx1.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="Sx1.I1.i2.p1.1.1">Response Relevance:</span> This metric evaluates the amount of information in the LLM’s response that is relevant to and helps in answering the given query.</p>
</div>
</li>
<li class="ltx_item" id="Sx1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="Sx1.I1.i3.p1">
<p class="ltx_p" id="Sx1.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="Sx1.I1.i3.p1.1.1">Context Relevance:</span> This metric assesses the amount of information in the retrieved context that is pertinent to and aids in answering the given query.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="Sx1.p3">
<p class="ltx_p" id="Sx1.p3.1">These metrics allow for a comprehensive evaluation of both the retrieval process and the subsequent response generation, ensuring improvements in the overall performance of RAG systems.</p>
</div>
<div class="ltx_para" id="Sx1.p4">
<p class="ltx_p" id="Sx1.p4.1">VERA enhances the Context Relevance of retrieved sources prior to their input into the LLM and subsequently improves the Response Adherence and Relevance after the LLM generates its response. To achieve this, VERA employs an evaluator-cum-enhancer LLM that assesses the content, utilizing reasoning to determine optimal edits, which are then executed while preserving the original structure and style of both the context and the response as much as possible.</p>
</div>
<div class="ltx_para" id="Sx1.p5">
<p class="ltx_p" id="Sx1.p5.1">In our effort to enhance the performance of RAG systems with any arbitrary retrieval system and LLM, we contribute the following advancements:</p>
</div>
<div class="ltx_para" id="Sx1.p6">
<ol class="ltx_enumerate" id="Sx1.I2">
<li class="ltx_item" id="Sx1.I2.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="Sx1.I2.i1.p1">
<p class="ltx_p" id="Sx1.I2.i1.p1.1"><span class="ltx_text ltx_font_bold" id="Sx1.I2.i1.p1.1.1">Robust and Fine-Grained Evaluation Technique:</span> We introduce a comprehensive evaluation method to assess any given retrieval system and LLM using the previously mentioned metrics.</p>
</div>
</li>
<li class="ltx_item" id="Sx1.I2.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="Sx1.I2.i2.p1">
<p class="ltx_p" id="Sx1.I2.i2.p1.1"><span class="ltx_text ltx_font_bold" id="Sx1.I2.i2.p1.1.1">System for Context and Response Enhancement:</span> We propose a system that leverages the fine-grained evaluation results to analyze and perform appropriate edits to the context (before response generation) and the response. The ultimate goal is to produce error-free, relevant responses using a RAG system.</p>
</div>
</li>
</ol>
<p class="ltx_p" id="Sx1.p6.1">Moreover, our method is designed to be easily reproducible, allowing seamless integration into any existing RAG system.</p>
</div>
</section>
<section class="ltx_section" id="Sx2">
<h2 class="ltx_title ltx_title_section">Related Works</h2>
<section class="ltx_subsection" id="Sx2.SSx1">
<h3 class="ltx_title ltx_title_subsection">RARR</h3>
<div class="ltx_para" id="Sx2.SSx1.p1">
<p class="ltx_p" id="Sx2.SSx1.p1.1">The RARR <cite class="ltx_cite ltx_citemacro_citep">(Gao et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib8" title="">2023</a>)</cite> framework retroactively enables large language models (LLMs) to attribute external evidence through a process termed Editing for Attribution. Given a model-generated text, RARR conducts a research stage to locate evidence supporting the text’s statements. Subsequently, in the revision stage, the framework utilizes this gathered evidence to amend any facts in the original text that lack support, while striving to preserve the initial content as much as possible. RARR primarily aims to correct and attribute model-generated texts within open domain scenarios that lack supporting context in the input prompt. Although this approach can be applied to closed-domain retrieval-augmented generation (RAG) pipelines, it does not enhance the relevance of the context or answers.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx2.SSx2">
<h3 class="ltx_title ltx_title_subsection">SELF-RAG</h3>
<div class="ltx_para" id="Sx2.SSx2.p1">
<p class="ltx_p" id="Sx2.SSx2.p1.1">The Self-RAG framework, as introduced by <cite class="ltx_cite ltx_citemacro_citep">(Asai et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib1" title="">2023</a>)</cite>, represents a pioneering approach in natural language generation (NLG) by integrating self-reflection mechanisms into the training and generation process of a language model (LM). This end-to-end trained LM generates output in segmented form, guided by specialized reflection tokens designed to enhance its performance. Key among these tokens is the Retrieve token, which determines whether the model should retrieve multiple documents in parallel to inform its generation process. If retrieval is activated (Retrieve == yes), the model evaluates the relevance of retrieved documents using the IsRel token. This token categorizes relevance as either ”relevant” or ”irrelevant,” thereby assisting the model in selecting pertinent information. Subsequently, the IsSup token assesses the degree to which the generated output is supported by the retrieved documents, while the IsUse token judges the usefulness of the generated text on a predefined scale. By iteratively applying these tokens, Self-RAG aims to improve the quality, relevance, and utility of its generated outputs through self-critique and refinement. However, SELF-RAG is not very flexible or versatile as training a language model is both resource-intensive and time-consuming.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx2.SSx3">
<h3 class="ltx_title ltx_title_subsection">CRAG</h3>
<div class="ltx_para" id="Sx2.SSx3.p1">
<p class="ltx_p" id="Sx2.SSx3.p1.1">The Corrective RAG (CRAG) paper <cite class="ltx_cite ltx_citemacro_citep">(Yan et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib24" title="">2024</a>)</cite> introduces a method to enhance the accuracy of language models by reintegrating information from retrieved documents. It employs an evaluator to assess the quality of the documents obtained for a query and then determines whether to use, ignore, or request additional data from these documents. CRAG also utilizes web searches to expand its information beyond static databases, ensuring access to a broader, up-to-date range of information. Additionally, it employs a unique strategy to decompose and reconstruct retrieved documents, emphasizing the extraction of the most relevant information while eliminating distractions. Although CRAG improves the quality of retrieval, it does not address inaccuracies and irrelevancies in the final response. While CRAG’s ability to access the web for external information may be useful for general-purpose question answering, most critical applications of RAG systems aim to limit the LLM’s scope of knowledge to the provided documents (e.g., customer service bots).</p>
</div>
</section>
<section class="ltx_subsection" id="Sx2.SSx4">
<h3 class="ltx_title ltx_title_subsection">FACTScore</h3>
<div class="ltx_para" id="Sx2.SSx4.p1">
<p class="ltx_p" id="Sx2.SSx4.p1.1">FACTSCORE <cite class="ltx_cite ltx_citemacro_citep">(Min et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib16" title="">2023</a>)</cite> introduces a method to evaluate the factual accuracy of language models by decomposing their outputs into atomic facts and verifying each one against a specified knowledge source. It also presents a model that approximates FACTSCORE with an error rate of less than 2%, enabling the evaluation of a large set of new LMs without requiring manual human effort. VERA employs a similar technique to assess the context adherence of responses. However, FACTSCORE is purely an evaluation technique for testing adherence quality and does not address the quality enhancement of context retrieval or the responses.</p>
</div>
</section>
</section>
<section class="ltx_section" id="Sx3">
<h2 class="ltx_title ltx_title_section">Methodology</h2>
<figure class="ltx_figure" id="Sx3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="889" id="Sx3.F2.g1" src="extracted/5863653/figures/figure_3.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>An overview of methodology of VERA</figcaption>
</figure>
<div class="ltx_para" id="Sx3.p1">
<p class="ltx_p" id="Sx3.p1.1">We present VERA, a fine-grained evaluator and enhancer for retrievers and LLMs within a RAG system. As depicted in the accompanying figure, VERA first evaluates and edits the retrieved context to increase its relevance and conciseness in relation to the query. This refined context is then provided to the LLM for response generation. After the response is generated, it undergoes further evaluation and editing to ensure it is concise and error-free, resulting in the final response.</p>
</div>
<div class="ltx_para" id="Sx3.p2">
<p class="ltx_p" id="Sx3.p2.1">All components of VERA are implemented using few-shot prompting. In all our experiments, we employ GPT-4o as the evaluator-cum-enhancer model due to its state-of-the-art capabilities.</p>
</div>
<section class="ltx_subsection" id="Sx3.SSx1">
<h3 class="ltx_title ltx_title_subsection">Retrieval Requirement check</h3>
<figure class="ltx_figure" id="Sx3.F3">
<p class="ltx_p ltx_align_center" id="Sx3.F3.1"><span class="ltx_text ltx_framed ltx_framed_rectangle" id="Sx3.F3.1.1" style="border-color: #000000;"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="263" id="Sx3.F3.1.1.g1" src="extracted/5863653/figures/retrieval_check.png" width="598"/></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Retrieval Requirement Check</figcaption>
</figure>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.3.1.1">Algorithm 1</span> </span> Retrieval Requirement Check</figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="alg1.1"><span class="ltx_text ltx_font_bold" id="alg1.1.1">Input:</span> User query <math alttext="Q" class="ltx_Math" display="inline" id="alg1.1.m1.1"><semantics id="alg1.1.m1.1a"><mi id="alg1.1.m1.1.1" xref="alg1.1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="alg1.1.m1.1b"><ci id="alg1.1.m1.1.1.cmml" xref="alg1.1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="alg1.1.m1.1d">italic_Q</annotation></semantics></math>
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="alg1.1.2">Output:</span> Boolean indicating if retrieval is needed</p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<div class="ltx_listing ltx_figure_panel ltx_listing" id="alg1.4">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="alg1.l1.1">function</span> <span class="ltx_text ltx_font_smallcaps" id="alg1.l1.2">NeedsRetrieval</span>(<math alttext="Q" class="ltx_Math" display="inline" id="alg1.l1.m1.1"><semantics id="alg1.l1.m1.1a"><mi id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b"><ci id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.1d">italic_Q</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l2.1">if</span> <math alttext="Q" class="ltx_Math" display="inline" id="alg1.l2.m1.1"><semantics id="alg1.l2.m1.1a"><mi id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.1b"><ci id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.1d">italic_Q</annotation></semantics></math> <span class="ltx_text" id="alg1.l2.2">is knowledge-intensive</span> <span class="ltx_text ltx_font_bold" id="alg1.l2.3">then</span>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>         <span class="ltx_text ltx_font_bold" id="alg1.l3.1">return</span> <span class="ltx_text" id="alg1.l3.2">True</span>
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l4.1">else</span>
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>         <span class="ltx_text ltx_font_bold" id="alg1.l5.1"> return</span> <span class="ltx_text" id="alg1.l5.2">False</span>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>     <span class="ltx_text ltx_font_bold" id="alg1.l6.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l6.2">if</span>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span><span class="ltx_text ltx_font_bold" id="alg1.l7.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l7.2">function</span>
</div>
</div>
</div>
</div>
</figure>
<div class="ltx_para" id="Sx3.SSx1.p1">
<p class="ltx_p" id="Sx3.SSx1.p1.1">Not all queries necessitate retrieval; only those that are knowledge-intensive do. Upon receiving a user prompt, VERA determines whether external context is required to answer the prompt or if it can be addressed using the model’s internal knowledge. If retrieval is necessary, VERA proceeds to retrieve the required context. Otherwise, the prompt is passed directly to the LLM for response generation.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx3.SSx2">
<h3 class="ltx_title ltx_title_subsection">Retrieval Quality Evaluation and Correction</h3>
<figure class="ltx_figure" id="Sx3.F4">
<p class="ltx_p ltx_align_center" id="Sx3.F4.1"><span class="ltx_text ltx_framed ltx_framed_rectangle" id="Sx3.F4.1.1" style="border-color: #000000;">
<img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="530" id="Sx3.F4.1.1.g1" src="extracted/5863653/figures/context_edit.png" width="598"/>
</span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Retrieval Quality Evaluation and Correction</figcaption>
</figure>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg2.4.1.1">Algorithm 2</span> </span> Retrieval Quality Evaluation and Correction</figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="alg2.2"><span class="ltx_text ltx_font_bold" id="alg2.2.1">Input:</span> Retrieved context <math alttext="C" class="ltx_Math" display="inline" id="alg2.1.m1.1"><semantics id="alg2.1.m1.1a"><mi id="alg2.1.m1.1.1" xref="alg2.1.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="alg2.1.m1.1b"><ci id="alg2.1.m1.1.1.cmml" xref="alg2.1.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="alg2.1.m1.1c">C</annotation><annotation encoding="application/x-llamapun" id="alg2.1.m1.1d">italic_C</annotation></semantics></math>
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="alg2.2.2">Output:</span> Edited context <math alttext="C^{\prime}" class="ltx_Math" display="inline" id="alg2.2.m2.1"><semantics id="alg2.2.m2.1a"><msup id="alg2.2.m2.1.1" xref="alg2.2.m2.1.1.cmml"><mi id="alg2.2.m2.1.1.2" xref="alg2.2.m2.1.1.2.cmml">C</mi><mo id="alg2.2.m2.1.1.3" xref="alg2.2.m2.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="alg2.2.m2.1b"><apply id="alg2.2.m2.1.1.cmml" xref="alg2.2.m2.1.1"><csymbol cd="ambiguous" id="alg2.2.m2.1.1.1.cmml" xref="alg2.2.m2.1.1">superscript</csymbol><ci id="alg2.2.m2.1.1.2.cmml" xref="alg2.2.m2.1.1.2">𝐶</ci><ci id="alg2.2.m2.1.1.3.cmml" xref="alg2.2.m2.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.2.m2.1c">C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="alg2.2.m2.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math></p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<div class="ltx_listing ltx_figure_panel ltx_listing" id="alg2.5">
<div class="ltx_listingline" id="alg2.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="alg2.l1.1">function</span> <span class="ltx_text ltx_font_smallcaps" id="alg2.l1.2">EvaluateAndEditContext</span>(<math alttext="C" class="ltx_Math" display="inline" id="alg2.l1.m1.1"><semantics id="alg2.l1.m1.1a"><mi id="alg2.l1.m1.1.1" xref="alg2.l1.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="alg2.l1.m1.1b"><ci id="alg2.l1.m1.1.1.cmml" xref="alg2.l1.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="alg2.l1.m1.1c">C</annotation><annotation encoding="application/x-llamapun" id="alg2.l1.m1.1d">italic_C</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg2.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>     <math alttext="C^{\prime}\leftarrow\text{EliminateRedundantInformation}(C)" class="ltx_Math" display="inline" id="alg2.l2.m1.1"><semantics id="alg2.l2.m1.1a"><mrow id="alg2.l2.m1.1.2" xref="alg2.l2.m1.1.2.cmml"><msup id="alg2.l2.m1.1.2.2" xref="alg2.l2.m1.1.2.2.cmml"><mi id="alg2.l2.m1.1.2.2.2" xref="alg2.l2.m1.1.2.2.2.cmml">C</mi><mo id="alg2.l2.m1.1.2.2.3" xref="alg2.l2.m1.1.2.2.3.cmml">′</mo></msup><mo id="alg2.l2.m1.1.2.1" stretchy="false" xref="alg2.l2.m1.1.2.1.cmml">←</mo><mrow id="alg2.l2.m1.1.2.3" xref="alg2.l2.m1.1.2.3.cmml"><mtext id="alg2.l2.m1.1.2.3.2" xref="alg2.l2.m1.1.2.3.2a.cmml">EliminateRedundantInformation</mtext><mo id="alg2.l2.m1.1.2.3.1" xref="alg2.l2.m1.1.2.3.1.cmml">⁢</mo><mrow id="alg2.l2.m1.1.2.3.3.2" xref="alg2.l2.m1.1.2.3.cmml"><mo id="alg2.l2.m1.1.2.3.3.2.1" stretchy="false" xref="alg2.l2.m1.1.2.3.cmml">(</mo><mi id="alg2.l2.m1.1.1" xref="alg2.l2.m1.1.1.cmml">C</mi><mo id="alg2.l2.m1.1.2.3.3.2.2" stretchy="false" xref="alg2.l2.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l2.m1.1b"><apply id="alg2.l2.m1.1.2.cmml" xref="alg2.l2.m1.1.2"><ci id="alg2.l2.m1.1.2.1.cmml" xref="alg2.l2.m1.1.2.1">←</ci><apply id="alg2.l2.m1.1.2.2.cmml" xref="alg2.l2.m1.1.2.2"><csymbol cd="ambiguous" id="alg2.l2.m1.1.2.2.1.cmml" xref="alg2.l2.m1.1.2.2">superscript</csymbol><ci id="alg2.l2.m1.1.2.2.2.cmml" xref="alg2.l2.m1.1.2.2.2">𝐶</ci><ci id="alg2.l2.m1.1.2.2.3.cmml" xref="alg2.l2.m1.1.2.2.3">′</ci></apply><apply id="alg2.l2.m1.1.2.3.cmml" xref="alg2.l2.m1.1.2.3"><times id="alg2.l2.m1.1.2.3.1.cmml" xref="alg2.l2.m1.1.2.3.1"></times><ci id="alg2.l2.m1.1.2.3.2a.cmml" xref="alg2.l2.m1.1.2.3.2"><mtext id="alg2.l2.m1.1.2.3.2.cmml" xref="alg2.l2.m1.1.2.3.2">EliminateRedundantInformation</mtext></ci><ci id="alg2.l2.m1.1.1.cmml" xref="alg2.l2.m1.1.1">𝐶</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l2.m1.1c">C^{\prime}\leftarrow\text{EliminateRedundantInformation}(C)</annotation><annotation encoding="application/x-llamapun" id="alg2.l2.m1.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ← EliminateRedundantInformation ( italic_C )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>     <math alttext="R_{\text{retrieval}}\leftarrow\frac{|C^{\prime}|}{|C|}" class="ltx_Math" display="inline" id="alg2.l3.m1.2"><semantics id="alg2.l3.m1.2a"><mrow id="alg2.l3.m1.2.3" xref="alg2.l3.m1.2.3.cmml"><msub id="alg2.l3.m1.2.3.2" xref="alg2.l3.m1.2.3.2.cmml"><mi id="alg2.l3.m1.2.3.2.2" xref="alg2.l3.m1.2.3.2.2.cmml">R</mi><mtext id="alg2.l3.m1.2.3.2.3" xref="alg2.l3.m1.2.3.2.3a.cmml">retrieval</mtext></msub><mo id="alg2.l3.m1.2.3.1" stretchy="false" xref="alg2.l3.m1.2.3.1.cmml">←</mo><mfrac id="alg2.l3.m1.2.2" xref="alg2.l3.m1.2.2.cmml"><mrow id="alg2.l3.m1.1.1.1.1" xref="alg2.l3.m1.1.1.1.2.cmml"><mo id="alg2.l3.m1.1.1.1.1.2" stretchy="false" xref="alg2.l3.m1.1.1.1.2.1.cmml">|</mo><msup id="alg2.l3.m1.1.1.1.1.1" xref="alg2.l3.m1.1.1.1.1.1.cmml"><mi id="alg2.l3.m1.1.1.1.1.1.2" xref="alg2.l3.m1.1.1.1.1.1.2.cmml">C</mi><mo id="alg2.l3.m1.1.1.1.1.1.3" xref="alg2.l3.m1.1.1.1.1.1.3.cmml">′</mo></msup><mo id="alg2.l3.m1.1.1.1.1.3" stretchy="false" xref="alg2.l3.m1.1.1.1.2.1.cmml">|</mo></mrow><mrow id="alg2.l3.m1.2.2.2.3" xref="alg2.l3.m1.2.2.2.2.cmml"><mo id="alg2.l3.m1.2.2.2.3.1" stretchy="false" xref="alg2.l3.m1.2.2.2.2.1.cmml">|</mo><mi id="alg2.l3.m1.2.2.2.1" xref="alg2.l3.m1.2.2.2.1.cmml">C</mi><mo id="alg2.l3.m1.2.2.2.3.2" stretchy="false" xref="alg2.l3.m1.2.2.2.2.1.cmml">|</mo></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="alg2.l3.m1.2b"><apply id="alg2.l3.m1.2.3.cmml" xref="alg2.l3.m1.2.3"><ci id="alg2.l3.m1.2.3.1.cmml" xref="alg2.l3.m1.2.3.1">←</ci><apply id="alg2.l3.m1.2.3.2.cmml" xref="alg2.l3.m1.2.3.2"><csymbol cd="ambiguous" id="alg2.l3.m1.2.3.2.1.cmml" xref="alg2.l3.m1.2.3.2">subscript</csymbol><ci id="alg2.l3.m1.2.3.2.2.cmml" xref="alg2.l3.m1.2.3.2.2">𝑅</ci><ci id="alg2.l3.m1.2.3.2.3a.cmml" xref="alg2.l3.m1.2.3.2.3"><mtext id="alg2.l3.m1.2.3.2.3.cmml" mathsize="70%" xref="alg2.l3.m1.2.3.2.3">retrieval</mtext></ci></apply><apply id="alg2.l3.m1.2.2.cmml" xref="alg2.l3.m1.2.2"><divide id="alg2.l3.m1.2.2.3.cmml" xref="alg2.l3.m1.2.2"></divide><apply id="alg2.l3.m1.1.1.1.2.cmml" xref="alg2.l3.m1.1.1.1.1"><abs id="alg2.l3.m1.1.1.1.2.1.cmml" xref="alg2.l3.m1.1.1.1.1.2"></abs><apply id="alg2.l3.m1.1.1.1.1.1.cmml" xref="alg2.l3.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg2.l3.m1.1.1.1.1.1.1.cmml" xref="alg2.l3.m1.1.1.1.1.1">superscript</csymbol><ci id="alg2.l3.m1.1.1.1.1.1.2.cmml" xref="alg2.l3.m1.1.1.1.1.1.2">𝐶</ci><ci id="alg2.l3.m1.1.1.1.1.1.3.cmml" xref="alg2.l3.m1.1.1.1.1.1.3">′</ci></apply></apply><apply id="alg2.l3.m1.2.2.2.2.cmml" xref="alg2.l3.m1.2.2.2.3"><abs id="alg2.l3.m1.2.2.2.2.1.cmml" xref="alg2.l3.m1.2.2.2.3.1"></abs><ci id="alg2.l3.m1.2.2.2.1.cmml" xref="alg2.l3.m1.2.2.2.1">𝐶</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l3.m1.2c">R_{\text{retrieval}}\leftarrow\frac{|C^{\prime}|}{|C|}</annotation><annotation encoding="application/x-llamapun" id="alg2.l3.m1.2d">italic_R start_POSTSUBSCRIPT retrieval end_POSTSUBSCRIPT ← divide start_ARG | italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT | end_ARG start_ARG | italic_C | end_ARG</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <span class="ltx_text ltx_font_bold" id="alg2.l4.1">if</span> <math alttext="|C^{\prime}|=0" class="ltx_Math" display="inline" id="alg2.l4.m1.1"><semantics id="alg2.l4.m1.1a"><mrow id="alg2.l4.m1.1.1" xref="alg2.l4.m1.1.1.cmml"><mrow id="alg2.l4.m1.1.1.1.1" xref="alg2.l4.m1.1.1.1.2.cmml"><mo id="alg2.l4.m1.1.1.1.1.2" stretchy="false" xref="alg2.l4.m1.1.1.1.2.1.cmml">|</mo><msup id="alg2.l4.m1.1.1.1.1.1" xref="alg2.l4.m1.1.1.1.1.1.cmml"><mi id="alg2.l4.m1.1.1.1.1.1.2" xref="alg2.l4.m1.1.1.1.1.1.2.cmml">C</mi><mo id="alg2.l4.m1.1.1.1.1.1.3" xref="alg2.l4.m1.1.1.1.1.1.3.cmml">′</mo></msup><mo id="alg2.l4.m1.1.1.1.1.3" stretchy="false" xref="alg2.l4.m1.1.1.1.2.1.cmml">|</mo></mrow><mo id="alg2.l4.m1.1.1.2" xref="alg2.l4.m1.1.1.2.cmml">=</mo><mn id="alg2.l4.m1.1.1.3" xref="alg2.l4.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="alg2.l4.m1.1b"><apply id="alg2.l4.m1.1.1.cmml" xref="alg2.l4.m1.1.1"><eq id="alg2.l4.m1.1.1.2.cmml" xref="alg2.l4.m1.1.1.2"></eq><apply id="alg2.l4.m1.1.1.1.2.cmml" xref="alg2.l4.m1.1.1.1.1"><abs id="alg2.l4.m1.1.1.1.2.1.cmml" xref="alg2.l4.m1.1.1.1.1.2"></abs><apply id="alg2.l4.m1.1.1.1.1.1.cmml" xref="alg2.l4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg2.l4.m1.1.1.1.1.1.1.cmml" xref="alg2.l4.m1.1.1.1.1.1">superscript</csymbol><ci id="alg2.l4.m1.1.1.1.1.1.2.cmml" xref="alg2.l4.m1.1.1.1.1.1.2">𝐶</ci><ci id="alg2.l4.m1.1.1.1.1.1.3.cmml" xref="alg2.l4.m1.1.1.1.1.1.3">′</ci></apply></apply><cn id="alg2.l4.m1.1.1.3.cmml" type="integer" xref="alg2.l4.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l4.m1.1c">|C^{\prime}|=0</annotation><annotation encoding="application/x-llamapun" id="alg2.l4.m1.1d">| italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT | = 0</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg2.l4.2">then</span>
</div>
<div class="ltx_listingline" id="alg2.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>         <span class="ltx_text ltx_font_bold" id="alg2.l5.1">return</span> Query cannot be answered with retrieved context

</div>
<div class="ltx_listingline" id="alg2.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>     <span class="ltx_text ltx_font_bold" id="alg2.l6.1">else</span>
</div>
<div class="ltx_listingline" id="alg2.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>         <span class="ltx_text ltx_font_bold" id="alg2.l7.1"> return</span> <math alttext="C^{\prime}" class="ltx_Math" display="inline" id="alg2.l7.m1.1"><semantics id="alg2.l7.m1.1a"><msup id="alg2.l7.m1.1.1" xref="alg2.l7.m1.1.1.cmml"><mi id="alg2.l7.m1.1.1.2" xref="alg2.l7.m1.1.1.2.cmml">C</mi><mo id="alg2.l7.m1.1.1.3" xref="alg2.l7.m1.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="alg2.l7.m1.1b"><apply id="alg2.l7.m1.1.1.cmml" xref="alg2.l7.m1.1.1"><csymbol cd="ambiguous" id="alg2.l7.m1.1.1.1.cmml" xref="alg2.l7.m1.1.1">superscript</csymbol><ci id="alg2.l7.m1.1.1.2.cmml" xref="alg2.l7.m1.1.1.2">𝐶</ci><ci id="alg2.l7.m1.1.1.3.cmml" xref="alg2.l7.m1.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l7.m1.1c">C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="alg2.l7.m1.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>     <span class="ltx_text ltx_font_bold" id="alg2.l8.1">end</span> <span class="ltx_text ltx_font_bold" id="alg2.l8.2">if</span>
</div>
<div class="ltx_listingline" id="alg2.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span><span class="ltx_text ltx_font_bold" id="alg2.l9.1">end</span> <span class="ltx_text ltx_font_bold" id="alg2.l9.2">function</span>
</div>
</div>
</div>
</div>
</figure>
<div class="ltx_para" id="Sx3.SSx2.p1">
<p class="ltx_p" id="Sx3.SSx2.p1.1">After the retriever system retrieves the necessary context, VERA evaluates its relevance. VERA then edits the context to eliminate any redundant information that would not aid in answering the query without changing any other details or style.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.p2">
<p class="ltx_p" id="Sx3.SSx2.p2.2">Let <math alttext="C" class="ltx_Math" display="inline" id="Sx3.SSx2.p2.1.m1.1"><semantics id="Sx3.SSx2.p2.1.m1.1a"><mi id="Sx3.SSx2.p2.1.m1.1.1" xref="Sx3.SSx2.p2.1.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p2.1.m1.1b"><ci id="Sx3.SSx2.p2.1.m1.1.1.cmml" xref="Sx3.SSx2.p2.1.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p2.1.m1.1c">C</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p2.1.m1.1d">italic_C</annotation></semantics></math> be the original context retrieved by the retriever system and <math alttext="C^{\prime}" class="ltx_Math" display="inline" id="Sx3.SSx2.p2.2.m2.1"><semantics id="Sx3.SSx2.p2.2.m2.1a"><msup id="Sx3.SSx2.p2.2.m2.1.1" xref="Sx3.SSx2.p2.2.m2.1.1.cmml"><mi id="Sx3.SSx2.p2.2.m2.1.1.2" xref="Sx3.SSx2.p2.2.m2.1.1.2.cmml">C</mi><mo id="Sx3.SSx2.p2.2.m2.1.1.3" xref="Sx3.SSx2.p2.2.m2.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p2.2.m2.1b"><apply id="Sx3.SSx2.p2.2.m2.1.1.cmml" xref="Sx3.SSx2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.p2.2.m2.1.1.1.cmml" xref="Sx3.SSx2.p2.2.m2.1.1">superscript</csymbol><ci id="Sx3.SSx2.p2.2.m2.1.1.2.cmml" xref="Sx3.SSx2.p2.2.m2.1.1.2">𝐶</ci><ci id="Sx3.SSx2.p2.2.m2.1.1.3.cmml" xref="Sx3.SSx2.p2.2.m2.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p2.2.m2.1c">C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p2.2.m2.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> be the edited context after VERA has eliminated redundant information.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.p3">
<p class="ltx_p" id="Sx3.SSx2.p3.3">The retrieval relevance score <math alttext="R_{\text{retrieval}}" class="ltx_Math" display="inline" id="Sx3.SSx2.p3.1.m1.1"><semantics id="Sx3.SSx2.p3.1.m1.1a"><msub id="Sx3.SSx2.p3.1.m1.1.1" xref="Sx3.SSx2.p3.1.m1.1.1.cmml"><mi id="Sx3.SSx2.p3.1.m1.1.1.2" xref="Sx3.SSx2.p3.1.m1.1.1.2.cmml">R</mi><mtext id="Sx3.SSx2.p3.1.m1.1.1.3" xref="Sx3.SSx2.p3.1.m1.1.1.3a.cmml">retrieval</mtext></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p3.1.m1.1b"><apply id="Sx3.SSx2.p3.1.m1.1.1.cmml" xref="Sx3.SSx2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.p3.1.m1.1.1.1.cmml" xref="Sx3.SSx2.p3.1.m1.1.1">subscript</csymbol><ci id="Sx3.SSx2.p3.1.m1.1.1.2.cmml" xref="Sx3.SSx2.p3.1.m1.1.1.2">𝑅</ci><ci id="Sx3.SSx2.p3.1.m1.1.1.3a.cmml" xref="Sx3.SSx2.p3.1.m1.1.1.3"><mtext id="Sx3.SSx2.p3.1.m1.1.1.3.cmml" mathsize="70%" xref="Sx3.SSx2.p3.1.m1.1.1.3">retrieval</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p3.1.m1.1c">R_{\text{retrieval}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p3.1.m1.1d">italic_R start_POSTSUBSCRIPT retrieval end_POSTSUBSCRIPT</annotation></semantics></math> is given by the ratio of the length of the edited context <math alttext="|C^{\prime}|" class="ltx_Math" display="inline" id="Sx3.SSx2.p3.2.m2.1"><semantics id="Sx3.SSx2.p3.2.m2.1a"><mrow id="Sx3.SSx2.p3.2.m2.1.1.1" xref="Sx3.SSx2.p3.2.m2.1.1.2.cmml"><mo id="Sx3.SSx2.p3.2.m2.1.1.1.2" stretchy="false" xref="Sx3.SSx2.p3.2.m2.1.1.2.1.cmml">|</mo><msup id="Sx3.SSx2.p3.2.m2.1.1.1.1" xref="Sx3.SSx2.p3.2.m2.1.1.1.1.cmml"><mi id="Sx3.SSx2.p3.2.m2.1.1.1.1.2" xref="Sx3.SSx2.p3.2.m2.1.1.1.1.2.cmml">C</mi><mo id="Sx3.SSx2.p3.2.m2.1.1.1.1.3" xref="Sx3.SSx2.p3.2.m2.1.1.1.1.3.cmml">′</mo></msup><mo id="Sx3.SSx2.p3.2.m2.1.1.1.3" stretchy="false" xref="Sx3.SSx2.p3.2.m2.1.1.2.1.cmml">|</mo></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p3.2.m2.1b"><apply id="Sx3.SSx2.p3.2.m2.1.1.2.cmml" xref="Sx3.SSx2.p3.2.m2.1.1.1"><abs id="Sx3.SSx2.p3.2.m2.1.1.2.1.cmml" xref="Sx3.SSx2.p3.2.m2.1.1.1.2"></abs><apply id="Sx3.SSx2.p3.2.m2.1.1.1.1.cmml" xref="Sx3.SSx2.p3.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.p3.2.m2.1.1.1.1.1.cmml" xref="Sx3.SSx2.p3.2.m2.1.1.1.1">superscript</csymbol><ci id="Sx3.SSx2.p3.2.m2.1.1.1.1.2.cmml" xref="Sx3.SSx2.p3.2.m2.1.1.1.1.2">𝐶</ci><ci id="Sx3.SSx2.p3.2.m2.1.1.1.1.3.cmml" xref="Sx3.SSx2.p3.2.m2.1.1.1.1.3">′</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p3.2.m2.1c">|C^{\prime}|</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p3.2.m2.1d">| italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT |</annotation></semantics></math> to the length of the original context <math alttext="|C|" class="ltx_Math" display="inline" id="Sx3.SSx2.p3.3.m3.1"><semantics id="Sx3.SSx2.p3.3.m3.1a"><mrow id="Sx3.SSx2.p3.3.m3.1.2.2" xref="Sx3.SSx2.p3.3.m3.1.2.1.cmml"><mo id="Sx3.SSx2.p3.3.m3.1.2.2.1" stretchy="false" xref="Sx3.SSx2.p3.3.m3.1.2.1.1.cmml">|</mo><mi id="Sx3.SSx2.p3.3.m3.1.1" xref="Sx3.SSx2.p3.3.m3.1.1.cmml">C</mi><mo id="Sx3.SSx2.p3.3.m3.1.2.2.2" stretchy="false" xref="Sx3.SSx2.p3.3.m3.1.2.1.1.cmml">|</mo></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p3.3.m3.1b"><apply id="Sx3.SSx2.p3.3.m3.1.2.1.cmml" xref="Sx3.SSx2.p3.3.m3.1.2.2"><abs id="Sx3.SSx2.p3.3.m3.1.2.1.1.cmml" xref="Sx3.SSx2.p3.3.m3.1.2.2.1"></abs><ci id="Sx3.SSx2.p3.3.m3.1.1.cmml" xref="Sx3.SSx2.p3.3.m3.1.1">𝐶</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p3.3.m3.1c">|C|</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p3.3.m3.1d">| italic_C |</annotation></semantics></math>:</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.p4">
<table class="ltx_equation ltx_eqn_table" id="Sx3.Ex1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="R_{\text{retrieval}}=\frac{|C^{\prime}|}{|C|}" class="ltx_Math" display="block" id="Sx3.Ex1.m1.2"><semantics id="Sx3.Ex1.m1.2a"><mrow id="Sx3.Ex1.m1.2.3" xref="Sx3.Ex1.m1.2.3.cmml"><msub id="Sx3.Ex1.m1.2.3.2" xref="Sx3.Ex1.m1.2.3.2.cmml"><mi id="Sx3.Ex1.m1.2.3.2.2" xref="Sx3.Ex1.m1.2.3.2.2.cmml">R</mi><mtext id="Sx3.Ex1.m1.2.3.2.3" xref="Sx3.Ex1.m1.2.3.2.3a.cmml">retrieval</mtext></msub><mo id="Sx3.Ex1.m1.2.3.1" xref="Sx3.Ex1.m1.2.3.1.cmml">=</mo><mfrac id="Sx3.Ex1.m1.2.2" xref="Sx3.Ex1.m1.2.2.cmml"><mrow id="Sx3.Ex1.m1.1.1.1.1" xref="Sx3.Ex1.m1.1.1.1.2.cmml"><mo id="Sx3.Ex1.m1.1.1.1.1.2" stretchy="false" xref="Sx3.Ex1.m1.1.1.1.2.1.cmml">|</mo><msup id="Sx3.Ex1.m1.1.1.1.1.1" xref="Sx3.Ex1.m1.1.1.1.1.1.cmml"><mi id="Sx3.Ex1.m1.1.1.1.1.1.2" xref="Sx3.Ex1.m1.1.1.1.1.1.2.cmml">C</mi><mo id="Sx3.Ex1.m1.1.1.1.1.1.3" xref="Sx3.Ex1.m1.1.1.1.1.1.3.cmml">′</mo></msup><mo id="Sx3.Ex1.m1.1.1.1.1.3" stretchy="false" xref="Sx3.Ex1.m1.1.1.1.2.1.cmml">|</mo></mrow><mrow id="Sx3.Ex1.m1.2.2.2.3" xref="Sx3.Ex1.m1.2.2.2.2.cmml"><mo id="Sx3.Ex1.m1.2.2.2.3.1" stretchy="false" xref="Sx3.Ex1.m1.2.2.2.2.1.cmml">|</mo><mi id="Sx3.Ex1.m1.2.2.2.1" xref="Sx3.Ex1.m1.2.2.2.1.cmml">C</mi><mo id="Sx3.Ex1.m1.2.2.2.3.2" stretchy="false" xref="Sx3.Ex1.m1.2.2.2.2.1.cmml">|</mo></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="Sx3.Ex1.m1.2b"><apply id="Sx3.Ex1.m1.2.3.cmml" xref="Sx3.Ex1.m1.2.3"><eq id="Sx3.Ex1.m1.2.3.1.cmml" xref="Sx3.Ex1.m1.2.3.1"></eq><apply id="Sx3.Ex1.m1.2.3.2.cmml" xref="Sx3.Ex1.m1.2.3.2"><csymbol cd="ambiguous" id="Sx3.Ex1.m1.2.3.2.1.cmml" xref="Sx3.Ex1.m1.2.3.2">subscript</csymbol><ci id="Sx3.Ex1.m1.2.3.2.2.cmml" xref="Sx3.Ex1.m1.2.3.2.2">𝑅</ci><ci id="Sx3.Ex1.m1.2.3.2.3a.cmml" xref="Sx3.Ex1.m1.2.3.2.3"><mtext id="Sx3.Ex1.m1.2.3.2.3.cmml" mathsize="70%" xref="Sx3.Ex1.m1.2.3.2.3">retrieval</mtext></ci></apply><apply id="Sx3.Ex1.m1.2.2.cmml" xref="Sx3.Ex1.m1.2.2"><divide id="Sx3.Ex1.m1.2.2.3.cmml" xref="Sx3.Ex1.m1.2.2"></divide><apply id="Sx3.Ex1.m1.1.1.1.2.cmml" xref="Sx3.Ex1.m1.1.1.1.1"><abs id="Sx3.Ex1.m1.1.1.1.2.1.cmml" xref="Sx3.Ex1.m1.1.1.1.1.2"></abs><apply id="Sx3.Ex1.m1.1.1.1.1.1.cmml" xref="Sx3.Ex1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.Ex1.m1.1.1.1.1.1.1.cmml" xref="Sx3.Ex1.m1.1.1.1.1.1">superscript</csymbol><ci id="Sx3.Ex1.m1.1.1.1.1.1.2.cmml" xref="Sx3.Ex1.m1.1.1.1.1.1.2">𝐶</ci><ci id="Sx3.Ex1.m1.1.1.1.1.1.3.cmml" xref="Sx3.Ex1.m1.1.1.1.1.1.3">′</ci></apply></apply><apply id="Sx3.Ex1.m1.2.2.2.2.cmml" xref="Sx3.Ex1.m1.2.2.2.3"><abs id="Sx3.Ex1.m1.2.2.2.2.1.cmml" xref="Sx3.Ex1.m1.2.2.2.3.1"></abs><ci id="Sx3.Ex1.m1.2.2.2.1.cmml" xref="Sx3.Ex1.m1.2.2.2.1">𝐶</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.Ex1.m1.2c">R_{\text{retrieval}}=\frac{|C^{\prime}|}{|C|}</annotation><annotation encoding="application/x-llamapun" id="Sx3.Ex1.m1.2d">italic_R start_POSTSUBSCRIPT retrieval end_POSTSUBSCRIPT = divide start_ARG | italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT | end_ARG start_ARG | italic_C | end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="Sx3.SSx2.p5">
<p class="ltx_p" id="Sx3.SSx2.p5.4">If <math alttext="R_{\text{retrieval}}=0" class="ltx_Math" display="inline" id="Sx3.SSx2.p5.1.m1.1"><semantics id="Sx3.SSx2.p5.1.m1.1a"><mrow id="Sx3.SSx2.p5.1.m1.1.1" xref="Sx3.SSx2.p5.1.m1.1.1.cmml"><msub id="Sx3.SSx2.p5.1.m1.1.1.2" xref="Sx3.SSx2.p5.1.m1.1.1.2.cmml"><mi id="Sx3.SSx2.p5.1.m1.1.1.2.2" xref="Sx3.SSx2.p5.1.m1.1.1.2.2.cmml">R</mi><mtext id="Sx3.SSx2.p5.1.m1.1.1.2.3" xref="Sx3.SSx2.p5.1.m1.1.1.2.3a.cmml">retrieval</mtext></msub><mo id="Sx3.SSx2.p5.1.m1.1.1.1" xref="Sx3.SSx2.p5.1.m1.1.1.1.cmml">=</mo><mn id="Sx3.SSx2.p5.1.m1.1.1.3" xref="Sx3.SSx2.p5.1.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p5.1.m1.1b"><apply id="Sx3.SSx2.p5.1.m1.1.1.cmml" xref="Sx3.SSx2.p5.1.m1.1.1"><eq id="Sx3.SSx2.p5.1.m1.1.1.1.cmml" xref="Sx3.SSx2.p5.1.m1.1.1.1"></eq><apply id="Sx3.SSx2.p5.1.m1.1.1.2.cmml" xref="Sx3.SSx2.p5.1.m1.1.1.2"><csymbol cd="ambiguous" id="Sx3.SSx2.p5.1.m1.1.1.2.1.cmml" xref="Sx3.SSx2.p5.1.m1.1.1.2">subscript</csymbol><ci id="Sx3.SSx2.p5.1.m1.1.1.2.2.cmml" xref="Sx3.SSx2.p5.1.m1.1.1.2.2">𝑅</ci><ci id="Sx3.SSx2.p5.1.m1.1.1.2.3a.cmml" xref="Sx3.SSx2.p5.1.m1.1.1.2.3"><mtext id="Sx3.SSx2.p5.1.m1.1.1.2.3.cmml" mathsize="70%" xref="Sx3.SSx2.p5.1.m1.1.1.2.3">retrieval</mtext></ci></apply><cn id="Sx3.SSx2.p5.1.m1.1.1.3.cmml" type="integer" xref="Sx3.SSx2.p5.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p5.1.m1.1c">R_{\text{retrieval}}=0</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p5.1.m1.1d">italic_R start_POSTSUBSCRIPT retrieval end_POSTSUBSCRIPT = 0</annotation></semantics></math> (i.e., <math alttext="|C^{\prime}|=0" class="ltx_Math" display="inline" id="Sx3.SSx2.p5.2.m2.1"><semantics id="Sx3.SSx2.p5.2.m2.1a"><mrow id="Sx3.SSx2.p5.2.m2.1.1" xref="Sx3.SSx2.p5.2.m2.1.1.cmml"><mrow id="Sx3.SSx2.p5.2.m2.1.1.1.1" xref="Sx3.SSx2.p5.2.m2.1.1.1.2.cmml"><mo id="Sx3.SSx2.p5.2.m2.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.p5.2.m2.1.1.1.2.1.cmml">|</mo><msup id="Sx3.SSx2.p5.2.m2.1.1.1.1.1" xref="Sx3.SSx2.p5.2.m2.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.p5.2.m2.1.1.1.1.1.2" xref="Sx3.SSx2.p5.2.m2.1.1.1.1.1.2.cmml">C</mi><mo id="Sx3.SSx2.p5.2.m2.1.1.1.1.1.3" xref="Sx3.SSx2.p5.2.m2.1.1.1.1.1.3.cmml">′</mo></msup><mo id="Sx3.SSx2.p5.2.m2.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.p5.2.m2.1.1.1.2.1.cmml">|</mo></mrow><mo id="Sx3.SSx2.p5.2.m2.1.1.2" xref="Sx3.SSx2.p5.2.m2.1.1.2.cmml">=</mo><mn id="Sx3.SSx2.p5.2.m2.1.1.3" xref="Sx3.SSx2.p5.2.m2.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p5.2.m2.1b"><apply id="Sx3.SSx2.p5.2.m2.1.1.cmml" xref="Sx3.SSx2.p5.2.m2.1.1"><eq id="Sx3.SSx2.p5.2.m2.1.1.2.cmml" xref="Sx3.SSx2.p5.2.m2.1.1.2"></eq><apply id="Sx3.SSx2.p5.2.m2.1.1.1.2.cmml" xref="Sx3.SSx2.p5.2.m2.1.1.1.1"><abs id="Sx3.SSx2.p5.2.m2.1.1.1.2.1.cmml" xref="Sx3.SSx2.p5.2.m2.1.1.1.1.2"></abs><apply id="Sx3.SSx2.p5.2.m2.1.1.1.1.1.cmml" xref="Sx3.SSx2.p5.2.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.p5.2.m2.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.p5.2.m2.1.1.1.1.1">superscript</csymbol><ci id="Sx3.SSx2.p5.2.m2.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.p5.2.m2.1.1.1.1.1.2">𝐶</ci><ci id="Sx3.SSx2.p5.2.m2.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.p5.2.m2.1.1.1.1.1.3">′</ci></apply></apply><cn id="Sx3.SSx2.p5.2.m2.1.1.3.cmml" type="integer" xref="Sx3.SSx2.p5.2.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p5.2.m2.1c">|C^{\prime}|=0</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p5.2.m2.1d">| italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT | = 0</annotation></semantics></math>), it indicates that the retrieved context fails to provide any useful information, and the process is halted. The user is then informed that their query cannot be answered. If <math alttext="R_{\text{retrieval}}&gt;0" class="ltx_Math" display="inline" id="Sx3.SSx2.p5.3.m3.1"><semantics id="Sx3.SSx2.p5.3.m3.1a"><mrow id="Sx3.SSx2.p5.3.m3.1.1" xref="Sx3.SSx2.p5.3.m3.1.1.cmml"><msub id="Sx3.SSx2.p5.3.m3.1.1.2" xref="Sx3.SSx2.p5.3.m3.1.1.2.cmml"><mi id="Sx3.SSx2.p5.3.m3.1.1.2.2" xref="Sx3.SSx2.p5.3.m3.1.1.2.2.cmml">R</mi><mtext id="Sx3.SSx2.p5.3.m3.1.1.2.3" xref="Sx3.SSx2.p5.3.m3.1.1.2.3a.cmml">retrieval</mtext></msub><mo id="Sx3.SSx2.p5.3.m3.1.1.1" xref="Sx3.SSx2.p5.3.m3.1.1.1.cmml">&gt;</mo><mn id="Sx3.SSx2.p5.3.m3.1.1.3" xref="Sx3.SSx2.p5.3.m3.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p5.3.m3.1b"><apply id="Sx3.SSx2.p5.3.m3.1.1.cmml" xref="Sx3.SSx2.p5.3.m3.1.1"><gt id="Sx3.SSx2.p5.3.m3.1.1.1.cmml" xref="Sx3.SSx2.p5.3.m3.1.1.1"></gt><apply id="Sx3.SSx2.p5.3.m3.1.1.2.cmml" xref="Sx3.SSx2.p5.3.m3.1.1.2"><csymbol cd="ambiguous" id="Sx3.SSx2.p5.3.m3.1.1.2.1.cmml" xref="Sx3.SSx2.p5.3.m3.1.1.2">subscript</csymbol><ci id="Sx3.SSx2.p5.3.m3.1.1.2.2.cmml" xref="Sx3.SSx2.p5.3.m3.1.1.2.2">𝑅</ci><ci id="Sx3.SSx2.p5.3.m3.1.1.2.3a.cmml" xref="Sx3.SSx2.p5.3.m3.1.1.2.3"><mtext id="Sx3.SSx2.p5.3.m3.1.1.2.3.cmml" mathsize="70%" xref="Sx3.SSx2.p5.3.m3.1.1.2.3">retrieval</mtext></ci></apply><cn id="Sx3.SSx2.p5.3.m3.1.1.3.cmml" type="integer" xref="Sx3.SSx2.p5.3.m3.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p5.3.m3.1c">R_{\text{retrieval}}&gt;0</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p5.3.m3.1d">italic_R start_POSTSUBSCRIPT retrieval end_POSTSUBSCRIPT &gt; 0</annotation></semantics></math>, it indicates that there is sufficient information in the context, and this edited context <math alttext="C^{\prime}" class="ltx_Math" display="inline" id="Sx3.SSx2.p5.4.m4.1"><semantics id="Sx3.SSx2.p5.4.m4.1a"><msup id="Sx3.SSx2.p5.4.m4.1.1" xref="Sx3.SSx2.p5.4.m4.1.1.cmml"><mi id="Sx3.SSx2.p5.4.m4.1.1.2" xref="Sx3.SSx2.p5.4.m4.1.1.2.cmml">C</mi><mo id="Sx3.SSx2.p5.4.m4.1.1.3" xref="Sx3.SSx2.p5.4.m4.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.p5.4.m4.1b"><apply id="Sx3.SSx2.p5.4.m4.1.1.cmml" xref="Sx3.SSx2.p5.4.m4.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.p5.4.m4.1.1.1.cmml" xref="Sx3.SSx2.p5.4.m4.1.1">superscript</csymbol><ci id="Sx3.SSx2.p5.4.m4.1.1.2.cmml" xref="Sx3.SSx2.p5.4.m4.1.1.2">𝐶</ci><ci id="Sx3.SSx2.p5.4.m4.1.1.3.cmml" xref="Sx3.SSx2.p5.4.m4.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.p5.4.m4.1c">C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.p5.4.m4.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> is used to generate the LLM’s response to the user query.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx3.SSx3">
<h3 class="ltx_title ltx_title_subsection">Response Relevancy Evaluation and Correction</h3>
<figure class="ltx_figure" id="Sx3.F5">
<p class="ltx_p ltx_align_center" id="Sx3.F5.1"><span class="ltx_text ltx_framed ltx_framed_rectangle" id="Sx3.F5.1.1" style="border-color: #000000;">
<img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="500" id="Sx3.F5.1.1.g1" src="extracted/5863653/figures/relevance.png" width="598"/>
</span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>Response Relevancy Evaluation and Correction</figcaption>
</figure>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg3">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg3.5.1.1">Algorithm 3</span> </span> Response Relevancy Evaluation and Correction</figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="alg3.3"><span class="ltx_text ltx_font_bold" id="alg3.3.1">Input:</span> Generated response <math alttext="R" class="ltx_Math" display="inline" id="alg3.1.m1.1"><semantics id="alg3.1.m1.1a"><mi id="alg3.1.m1.1.1" xref="alg3.1.m1.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="alg3.1.m1.1b"><ci id="alg3.1.m1.1.1.cmml" xref="alg3.1.m1.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.1.m1.1c">R</annotation><annotation encoding="application/x-llamapun" id="alg3.1.m1.1d">italic_R</annotation></semantics></math>, User query <math alttext="Q" class="ltx_Math" display="inline" id="alg3.2.m2.1"><semantics id="alg3.2.m2.1a"><mi id="alg3.2.m2.1.1" xref="alg3.2.m2.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="alg3.2.m2.1b"><ci id="alg3.2.m2.1.1.cmml" xref="alg3.2.m2.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.2.m2.1c">Q</annotation><annotation encoding="application/x-llamapun" id="alg3.2.m2.1d">italic_Q</annotation></semantics></math>
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="alg3.3.2">Output:</span> Edited response <math alttext="R^{\prime}" class="ltx_Math" display="inline" id="alg3.3.m3.1"><semantics id="alg3.3.m3.1a"><msup id="alg3.3.m3.1.1" xref="alg3.3.m3.1.1.cmml"><mi id="alg3.3.m3.1.1.2" xref="alg3.3.m3.1.1.2.cmml">R</mi><mo id="alg3.3.m3.1.1.3" xref="alg3.3.m3.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="alg3.3.m3.1b"><apply id="alg3.3.m3.1.1.cmml" xref="alg3.3.m3.1.1"><csymbol cd="ambiguous" id="alg3.3.m3.1.1.1.cmml" xref="alg3.3.m3.1.1">superscript</csymbol><ci id="alg3.3.m3.1.1.2.cmml" xref="alg3.3.m3.1.1.2">𝑅</ci><ci id="alg3.3.m3.1.1.3.cmml" xref="alg3.3.m3.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.3.m3.1c">R^{\prime}</annotation><annotation encoding="application/x-llamapun" id="alg3.3.m3.1d">italic_R start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math></p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<div class="ltx_listing ltx_figure_panel ltx_listing" id="alg3.6">
<div class="ltx_listingline" id="alg3.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="alg3.l1.1">function</span> <span class="ltx_text ltx_font_smallcaps" id="alg3.l1.2">EvaluateAndEditResponseRelevancy</span>(<math alttext="R,Q" class="ltx_Math" display="inline" id="alg3.l1.m1.2"><semantics id="alg3.l1.m1.2a"><mrow id="alg3.l1.m1.2.3.2" xref="alg3.l1.m1.2.3.1.cmml"><mi id="alg3.l1.m1.1.1" xref="alg3.l1.m1.1.1.cmml">R</mi><mo id="alg3.l1.m1.2.3.2.1" xref="alg3.l1.m1.2.3.1.cmml">,</mo><mi id="alg3.l1.m1.2.2" xref="alg3.l1.m1.2.2.cmml">Q</mi></mrow><annotation-xml encoding="MathML-Content" id="alg3.l1.m1.2b"><list id="alg3.l1.m1.2.3.1.cmml" xref="alg3.l1.m1.2.3.2"><ci id="alg3.l1.m1.1.1.cmml" xref="alg3.l1.m1.1.1">𝑅</ci><ci id="alg3.l1.m1.2.2.cmml" xref="alg3.l1.m1.2.2">𝑄</ci></list></annotation-xml><annotation encoding="application/x-tex" id="alg3.l1.m1.2c">R,Q</annotation><annotation encoding="application/x-llamapun" id="alg3.l1.m1.2d">italic_R , italic_Q</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg3.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>     <math alttext="S\leftarrow\text{SplitIntoAtomicStatements}(R)" class="ltx_Math" display="inline" id="alg3.l2.m1.1"><semantics id="alg3.l2.m1.1a"><mrow id="alg3.l2.m1.1.2" xref="alg3.l2.m1.1.2.cmml"><mi id="alg3.l2.m1.1.2.2" xref="alg3.l2.m1.1.2.2.cmml">S</mi><mo id="alg3.l2.m1.1.2.1" stretchy="false" xref="alg3.l2.m1.1.2.1.cmml">←</mo><mrow id="alg3.l2.m1.1.2.3" xref="alg3.l2.m1.1.2.3.cmml"><mtext id="alg3.l2.m1.1.2.3.2" xref="alg3.l2.m1.1.2.3.2a.cmml">SplitIntoAtomicStatements</mtext><mo id="alg3.l2.m1.1.2.3.1" xref="alg3.l2.m1.1.2.3.1.cmml">⁢</mo><mrow id="alg3.l2.m1.1.2.3.3.2" xref="alg3.l2.m1.1.2.3.cmml"><mo id="alg3.l2.m1.1.2.3.3.2.1" stretchy="false" xref="alg3.l2.m1.1.2.3.cmml">(</mo><mi id="alg3.l2.m1.1.1" xref="alg3.l2.m1.1.1.cmml">R</mi><mo id="alg3.l2.m1.1.2.3.3.2.2" stretchy="false" xref="alg3.l2.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l2.m1.1b"><apply id="alg3.l2.m1.1.2.cmml" xref="alg3.l2.m1.1.2"><ci id="alg3.l2.m1.1.2.1.cmml" xref="alg3.l2.m1.1.2.1">←</ci><ci id="alg3.l2.m1.1.2.2.cmml" xref="alg3.l2.m1.1.2.2">𝑆</ci><apply id="alg3.l2.m1.1.2.3.cmml" xref="alg3.l2.m1.1.2.3"><times id="alg3.l2.m1.1.2.3.1.cmml" xref="alg3.l2.m1.1.2.3.1"></times><ci id="alg3.l2.m1.1.2.3.2a.cmml" xref="alg3.l2.m1.1.2.3.2"><mtext id="alg3.l2.m1.1.2.3.2.cmml" xref="alg3.l2.m1.1.2.3.2">SplitIntoAtomicStatements</mtext></ci><ci id="alg3.l2.m1.1.1.cmml" xref="alg3.l2.m1.1.1">𝑅</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l2.m1.1c">S\leftarrow\text{SplitIntoAtomicStatements}(R)</annotation><annotation encoding="application/x-llamapun" id="alg3.l2.m1.1d">italic_S ← SplitIntoAtomicStatements ( italic_R )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>     <math alttext="S^{\prime}\leftarrow\emptyset" class="ltx_Math" display="inline" id="alg3.l3.m1.1"><semantics id="alg3.l3.m1.1a"><mrow id="alg3.l3.m1.1.1" xref="alg3.l3.m1.1.1.cmml"><msup id="alg3.l3.m1.1.1.2" xref="alg3.l3.m1.1.1.2.cmml"><mi id="alg3.l3.m1.1.1.2.2" xref="alg3.l3.m1.1.1.2.2.cmml">S</mi><mo id="alg3.l3.m1.1.1.2.3" xref="alg3.l3.m1.1.1.2.3.cmml">′</mo></msup><mo id="alg3.l3.m1.1.1.1" stretchy="false" xref="alg3.l3.m1.1.1.1.cmml">←</mo><mi id="alg3.l3.m1.1.1.3" mathvariant="normal" xref="alg3.l3.m1.1.1.3.cmml">∅</mi></mrow><annotation-xml encoding="MathML-Content" id="alg3.l3.m1.1b"><apply id="alg3.l3.m1.1.1.cmml" xref="alg3.l3.m1.1.1"><ci id="alg3.l3.m1.1.1.1.cmml" xref="alg3.l3.m1.1.1.1">←</ci><apply id="alg3.l3.m1.1.1.2.cmml" xref="alg3.l3.m1.1.1.2"><csymbol cd="ambiguous" id="alg3.l3.m1.1.1.2.1.cmml" xref="alg3.l3.m1.1.1.2">superscript</csymbol><ci id="alg3.l3.m1.1.1.2.2.cmml" xref="alg3.l3.m1.1.1.2.2">𝑆</ci><ci id="alg3.l3.m1.1.1.2.3.cmml" xref="alg3.l3.m1.1.1.2.3">′</ci></apply><emptyset id="alg3.l3.m1.1.1.3.cmml" xref="alg3.l3.m1.1.1.3"></emptyset></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l3.m1.1c">S^{\prime}\leftarrow\emptyset</annotation><annotation encoding="application/x-llamapun" id="alg3.l3.m1.1d">italic_S start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ← ∅</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <span class="ltx_text ltx_font_bold" id="alg3.l4.1">for all</span> <math alttext="s_{i}\in S" class="ltx_Math" display="inline" id="alg3.l4.m1.1"><semantics id="alg3.l4.m1.1a"><mrow id="alg3.l4.m1.1.1" xref="alg3.l4.m1.1.1.cmml"><msub id="alg3.l4.m1.1.1.2" xref="alg3.l4.m1.1.1.2.cmml"><mi id="alg3.l4.m1.1.1.2.2" xref="alg3.l4.m1.1.1.2.2.cmml">s</mi><mi id="alg3.l4.m1.1.1.2.3" xref="alg3.l4.m1.1.1.2.3.cmml">i</mi></msub><mo id="alg3.l4.m1.1.1.1" xref="alg3.l4.m1.1.1.1.cmml">∈</mo><mi id="alg3.l4.m1.1.1.3" xref="alg3.l4.m1.1.1.3.cmml">S</mi></mrow><annotation-xml encoding="MathML-Content" id="alg3.l4.m1.1b"><apply id="alg3.l4.m1.1.1.cmml" xref="alg3.l4.m1.1.1"><in id="alg3.l4.m1.1.1.1.cmml" xref="alg3.l4.m1.1.1.1"></in><apply id="alg3.l4.m1.1.1.2.cmml" xref="alg3.l4.m1.1.1.2"><csymbol cd="ambiguous" id="alg3.l4.m1.1.1.2.1.cmml" xref="alg3.l4.m1.1.1.2">subscript</csymbol><ci id="alg3.l4.m1.1.1.2.2.cmml" xref="alg3.l4.m1.1.1.2.2">𝑠</ci><ci id="alg3.l4.m1.1.1.2.3.cmml" xref="alg3.l4.m1.1.1.2.3">𝑖</ci></apply><ci id="alg3.l4.m1.1.1.3.cmml" xref="alg3.l4.m1.1.1.3">𝑆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l4.m1.1c">s_{i}\in S</annotation><annotation encoding="application/x-llamapun" id="alg3.l4.m1.1d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ italic_S</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg3.l4.2">do</span>
</div>
<div class="ltx_listingline" id="alg3.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>         <span class="ltx_text ltx_font_bold" id="alg3.l5.1">if</span> <math alttext="\text{IsRelevant}(s_{i},Q)" class="ltx_Math" display="inline" id="alg3.l5.m1.2"><semantics id="alg3.l5.m1.2a"><mrow id="alg3.l5.m1.2.2" xref="alg3.l5.m1.2.2.cmml"><mtext id="alg3.l5.m1.2.2.3" xref="alg3.l5.m1.2.2.3a.cmml">IsRelevant</mtext><mo id="alg3.l5.m1.2.2.2" xref="alg3.l5.m1.2.2.2.cmml">⁢</mo><mrow id="alg3.l5.m1.2.2.1.1" xref="alg3.l5.m1.2.2.1.2.cmml"><mo id="alg3.l5.m1.2.2.1.1.2" stretchy="false" xref="alg3.l5.m1.2.2.1.2.cmml">(</mo><msub id="alg3.l5.m1.2.2.1.1.1" xref="alg3.l5.m1.2.2.1.1.1.cmml"><mi id="alg3.l5.m1.2.2.1.1.1.2" xref="alg3.l5.m1.2.2.1.1.1.2.cmml">s</mi><mi id="alg3.l5.m1.2.2.1.1.1.3" xref="alg3.l5.m1.2.2.1.1.1.3.cmml">i</mi></msub><mo id="alg3.l5.m1.2.2.1.1.3" xref="alg3.l5.m1.2.2.1.2.cmml">,</mo><mi id="alg3.l5.m1.1.1" xref="alg3.l5.m1.1.1.cmml">Q</mi><mo id="alg3.l5.m1.2.2.1.1.4" stretchy="false" xref="alg3.l5.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l5.m1.2b"><apply id="alg3.l5.m1.2.2.cmml" xref="alg3.l5.m1.2.2"><times id="alg3.l5.m1.2.2.2.cmml" xref="alg3.l5.m1.2.2.2"></times><ci id="alg3.l5.m1.2.2.3a.cmml" xref="alg3.l5.m1.2.2.3"><mtext id="alg3.l5.m1.2.2.3.cmml" xref="alg3.l5.m1.2.2.3">IsRelevant</mtext></ci><interval closure="open" id="alg3.l5.m1.2.2.1.2.cmml" xref="alg3.l5.m1.2.2.1.1"><apply id="alg3.l5.m1.2.2.1.1.1.cmml" xref="alg3.l5.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="alg3.l5.m1.2.2.1.1.1.1.cmml" xref="alg3.l5.m1.2.2.1.1.1">subscript</csymbol><ci id="alg3.l5.m1.2.2.1.1.1.2.cmml" xref="alg3.l5.m1.2.2.1.1.1.2">𝑠</ci><ci id="alg3.l5.m1.2.2.1.1.1.3.cmml" xref="alg3.l5.m1.2.2.1.1.1.3">𝑖</ci></apply><ci id="alg3.l5.m1.1.1.cmml" xref="alg3.l5.m1.1.1">𝑄</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l5.m1.2c">\text{IsRelevant}(s_{i},Q)</annotation><annotation encoding="application/x-llamapun" id="alg3.l5.m1.2d">IsRelevant ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_Q )</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg3.l5.2">then</span>
</div>
<div class="ltx_listingline" id="alg3.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>              <math alttext="S^{\prime}\leftarrow S^{\prime}\cup\{s_{i}\}" class="ltx_Math" display="inline" id="alg3.l6.m1.1"><semantics id="alg3.l6.m1.1a"><mrow id="alg3.l6.m1.1.1" xref="alg3.l6.m1.1.1.cmml"><msup id="alg3.l6.m1.1.1.3" xref="alg3.l6.m1.1.1.3.cmml"><mi id="alg3.l6.m1.1.1.3.2" xref="alg3.l6.m1.1.1.3.2.cmml">S</mi><mo id="alg3.l6.m1.1.1.3.3" xref="alg3.l6.m1.1.1.3.3.cmml">′</mo></msup><mo id="alg3.l6.m1.1.1.2" stretchy="false" xref="alg3.l6.m1.1.1.2.cmml">←</mo><mrow id="alg3.l6.m1.1.1.1" xref="alg3.l6.m1.1.1.1.cmml"><msup id="alg3.l6.m1.1.1.1.3" xref="alg3.l6.m1.1.1.1.3.cmml"><mi id="alg3.l6.m1.1.1.1.3.2" xref="alg3.l6.m1.1.1.1.3.2.cmml">S</mi><mo id="alg3.l6.m1.1.1.1.3.3" xref="alg3.l6.m1.1.1.1.3.3.cmml">′</mo></msup><mo id="alg3.l6.m1.1.1.1.2" xref="alg3.l6.m1.1.1.1.2.cmml">∪</mo><mrow id="alg3.l6.m1.1.1.1.1.1" xref="alg3.l6.m1.1.1.1.1.2.cmml"><mo id="alg3.l6.m1.1.1.1.1.1.2" stretchy="false" xref="alg3.l6.m1.1.1.1.1.2.cmml">{</mo><msub id="alg3.l6.m1.1.1.1.1.1.1" xref="alg3.l6.m1.1.1.1.1.1.1.cmml"><mi id="alg3.l6.m1.1.1.1.1.1.1.2" xref="alg3.l6.m1.1.1.1.1.1.1.2.cmml">s</mi><mi id="alg3.l6.m1.1.1.1.1.1.1.3" xref="alg3.l6.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg3.l6.m1.1.1.1.1.1.3" stretchy="false" xref="alg3.l6.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l6.m1.1b"><apply id="alg3.l6.m1.1.1.cmml" xref="alg3.l6.m1.1.1"><ci id="alg3.l6.m1.1.1.2.cmml" xref="alg3.l6.m1.1.1.2">←</ci><apply id="alg3.l6.m1.1.1.3.cmml" xref="alg3.l6.m1.1.1.3"><csymbol cd="ambiguous" id="alg3.l6.m1.1.1.3.1.cmml" xref="alg3.l6.m1.1.1.3">superscript</csymbol><ci id="alg3.l6.m1.1.1.3.2.cmml" xref="alg3.l6.m1.1.1.3.2">𝑆</ci><ci id="alg3.l6.m1.1.1.3.3.cmml" xref="alg3.l6.m1.1.1.3.3">′</ci></apply><apply id="alg3.l6.m1.1.1.1.cmml" xref="alg3.l6.m1.1.1.1"><union id="alg3.l6.m1.1.1.1.2.cmml" xref="alg3.l6.m1.1.1.1.2"></union><apply id="alg3.l6.m1.1.1.1.3.cmml" xref="alg3.l6.m1.1.1.1.3"><csymbol cd="ambiguous" id="alg3.l6.m1.1.1.1.3.1.cmml" xref="alg3.l6.m1.1.1.1.3">superscript</csymbol><ci id="alg3.l6.m1.1.1.1.3.2.cmml" xref="alg3.l6.m1.1.1.1.3.2">𝑆</ci><ci id="alg3.l6.m1.1.1.1.3.3.cmml" xref="alg3.l6.m1.1.1.1.3.3">′</ci></apply><set id="alg3.l6.m1.1.1.1.1.2.cmml" xref="alg3.l6.m1.1.1.1.1.1"><apply id="alg3.l6.m1.1.1.1.1.1.1.cmml" xref="alg3.l6.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg3.l6.m1.1.1.1.1.1.1.1.cmml" xref="alg3.l6.m1.1.1.1.1.1.1">subscript</csymbol><ci id="alg3.l6.m1.1.1.1.1.1.1.2.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.2">𝑠</ci><ci id="alg3.l6.m1.1.1.1.1.1.1.3.cmml" xref="alg3.l6.m1.1.1.1.1.1.1.3">𝑖</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l6.m1.1c">S^{\prime}\leftarrow S^{\prime}\cup\{s_{i}\}</annotation><annotation encoding="application/x-llamapun" id="alg3.l6.m1.1d">italic_S start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ← italic_S start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ∪ { italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT }</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>         <span class="ltx_text ltx_font_bold" id="alg3.l7.1">end</span> <span class="ltx_text ltx_font_bold" id="alg3.l7.2">if</span>
</div>
<div class="ltx_listingline" id="alg3.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>     <span class="ltx_text ltx_font_bold" id="alg3.l8.1">end</span> <span class="ltx_text ltx_font_bold" id="alg3.l8.2">for</span>
</div>
<div class="ltx_listingline" id="alg3.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>     <math alttext="R_{\text{response}}\leftarrow\frac{1}{|S|}\sum_{i=1}^{|S|}r(s_{i})" class="ltx_Math" display="inline" id="alg3.l9.m1.3"><semantics id="alg3.l9.m1.3a"><mrow id="alg3.l9.m1.3.3" xref="alg3.l9.m1.3.3.cmml"><msub id="alg3.l9.m1.3.3.3" xref="alg3.l9.m1.3.3.3.cmml"><mi id="alg3.l9.m1.3.3.3.2" xref="alg3.l9.m1.3.3.3.2.cmml">R</mi><mtext id="alg3.l9.m1.3.3.3.3" xref="alg3.l9.m1.3.3.3.3a.cmml">response</mtext></msub><mo id="alg3.l9.m1.3.3.2" stretchy="false" xref="alg3.l9.m1.3.3.2.cmml">←</mo><mrow id="alg3.l9.m1.3.3.1" xref="alg3.l9.m1.3.3.1.cmml"><mfrac id="alg3.l9.m1.1.1" xref="alg3.l9.m1.1.1.cmml"><mn id="alg3.l9.m1.1.1.3" xref="alg3.l9.m1.1.1.3.cmml">1</mn><mrow id="alg3.l9.m1.1.1.1.3" xref="alg3.l9.m1.1.1.1.2.cmml"><mo id="alg3.l9.m1.1.1.1.3.1" stretchy="false" xref="alg3.l9.m1.1.1.1.2.1.cmml">|</mo><mi id="alg3.l9.m1.1.1.1.1" xref="alg3.l9.m1.1.1.1.1.cmml">S</mi><mo id="alg3.l9.m1.1.1.1.3.2" stretchy="false" xref="alg3.l9.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo id="alg3.l9.m1.3.3.1.2" xref="alg3.l9.m1.3.3.1.2.cmml">⁢</mo><mrow id="alg3.l9.m1.3.3.1.1" xref="alg3.l9.m1.3.3.1.1.cmml"><msubsup id="alg3.l9.m1.3.3.1.1.2" xref="alg3.l9.m1.3.3.1.1.2.cmml"><mo id="alg3.l9.m1.3.3.1.1.2.2.2" xref="alg3.l9.m1.3.3.1.1.2.2.2.cmml">∑</mo><mrow id="alg3.l9.m1.3.3.1.1.2.2.3" xref="alg3.l9.m1.3.3.1.1.2.2.3.cmml"><mi id="alg3.l9.m1.3.3.1.1.2.2.3.2" xref="alg3.l9.m1.3.3.1.1.2.2.3.2.cmml">i</mi><mo id="alg3.l9.m1.3.3.1.1.2.2.3.1" xref="alg3.l9.m1.3.3.1.1.2.2.3.1.cmml">=</mo><mn id="alg3.l9.m1.3.3.1.1.2.2.3.3" xref="alg3.l9.m1.3.3.1.1.2.2.3.3.cmml">1</mn></mrow><mrow id="alg3.l9.m1.2.2.1.3" xref="alg3.l9.m1.2.2.1.2.cmml"><mo id="alg3.l9.m1.2.2.1.3.1" stretchy="false" xref="alg3.l9.m1.2.2.1.2.1.cmml">|</mo><mi id="alg3.l9.m1.2.2.1.1" xref="alg3.l9.m1.2.2.1.1.cmml">S</mi><mo id="alg3.l9.m1.2.2.1.3.2" stretchy="false" xref="alg3.l9.m1.2.2.1.2.1.cmml">|</mo></mrow></msubsup><mrow id="alg3.l9.m1.3.3.1.1.1" xref="alg3.l9.m1.3.3.1.1.1.cmml"><mi id="alg3.l9.m1.3.3.1.1.1.3" xref="alg3.l9.m1.3.3.1.1.1.3.cmml">r</mi><mo id="alg3.l9.m1.3.3.1.1.1.2" xref="alg3.l9.m1.3.3.1.1.1.2.cmml">⁢</mo><mrow id="alg3.l9.m1.3.3.1.1.1.1.1" xref="alg3.l9.m1.3.3.1.1.1.1.1.1.cmml"><mo id="alg3.l9.m1.3.3.1.1.1.1.1.2" stretchy="false" xref="alg3.l9.m1.3.3.1.1.1.1.1.1.cmml">(</mo><msub id="alg3.l9.m1.3.3.1.1.1.1.1.1" xref="alg3.l9.m1.3.3.1.1.1.1.1.1.cmml"><mi id="alg3.l9.m1.3.3.1.1.1.1.1.1.2" xref="alg3.l9.m1.3.3.1.1.1.1.1.1.2.cmml">s</mi><mi id="alg3.l9.m1.3.3.1.1.1.1.1.1.3" xref="alg3.l9.m1.3.3.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg3.l9.m1.3.3.1.1.1.1.1.3" stretchy="false" xref="alg3.l9.m1.3.3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l9.m1.3b"><apply id="alg3.l9.m1.3.3.cmml" xref="alg3.l9.m1.3.3"><ci id="alg3.l9.m1.3.3.2.cmml" xref="alg3.l9.m1.3.3.2">←</ci><apply id="alg3.l9.m1.3.3.3.cmml" xref="alg3.l9.m1.3.3.3"><csymbol cd="ambiguous" id="alg3.l9.m1.3.3.3.1.cmml" xref="alg3.l9.m1.3.3.3">subscript</csymbol><ci id="alg3.l9.m1.3.3.3.2.cmml" xref="alg3.l9.m1.3.3.3.2">𝑅</ci><ci id="alg3.l9.m1.3.3.3.3a.cmml" xref="alg3.l9.m1.3.3.3.3"><mtext id="alg3.l9.m1.3.3.3.3.cmml" mathsize="70%" xref="alg3.l9.m1.3.3.3.3">response</mtext></ci></apply><apply id="alg3.l9.m1.3.3.1.cmml" xref="alg3.l9.m1.3.3.1"><times id="alg3.l9.m1.3.3.1.2.cmml" xref="alg3.l9.m1.3.3.1.2"></times><apply id="alg3.l9.m1.1.1.cmml" xref="alg3.l9.m1.1.1"><divide id="alg3.l9.m1.1.1.2.cmml" xref="alg3.l9.m1.1.1"></divide><cn id="alg3.l9.m1.1.1.3.cmml" type="integer" xref="alg3.l9.m1.1.1.3">1</cn><apply id="alg3.l9.m1.1.1.1.2.cmml" xref="alg3.l9.m1.1.1.1.3"><abs id="alg3.l9.m1.1.1.1.2.1.cmml" xref="alg3.l9.m1.1.1.1.3.1"></abs><ci id="alg3.l9.m1.1.1.1.1.cmml" xref="alg3.l9.m1.1.1.1.1">𝑆</ci></apply></apply><apply id="alg3.l9.m1.3.3.1.1.cmml" xref="alg3.l9.m1.3.3.1.1"><apply id="alg3.l9.m1.3.3.1.1.2.cmml" xref="alg3.l9.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="alg3.l9.m1.3.3.1.1.2.1.cmml" xref="alg3.l9.m1.3.3.1.1.2">superscript</csymbol><apply id="alg3.l9.m1.3.3.1.1.2.2.cmml" xref="alg3.l9.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="alg3.l9.m1.3.3.1.1.2.2.1.cmml" xref="alg3.l9.m1.3.3.1.1.2">subscript</csymbol><sum id="alg3.l9.m1.3.3.1.1.2.2.2.cmml" xref="alg3.l9.m1.3.3.1.1.2.2.2"></sum><apply id="alg3.l9.m1.3.3.1.1.2.2.3.cmml" xref="alg3.l9.m1.3.3.1.1.2.2.3"><eq id="alg3.l9.m1.3.3.1.1.2.2.3.1.cmml" xref="alg3.l9.m1.3.3.1.1.2.2.3.1"></eq><ci id="alg3.l9.m1.3.3.1.1.2.2.3.2.cmml" xref="alg3.l9.m1.3.3.1.1.2.2.3.2">𝑖</ci><cn id="alg3.l9.m1.3.3.1.1.2.2.3.3.cmml" type="integer" xref="alg3.l9.m1.3.3.1.1.2.2.3.3">1</cn></apply></apply><apply id="alg3.l9.m1.2.2.1.2.cmml" xref="alg3.l9.m1.2.2.1.3"><abs id="alg3.l9.m1.2.2.1.2.1.cmml" xref="alg3.l9.m1.2.2.1.3.1"></abs><ci id="alg3.l9.m1.2.2.1.1.cmml" xref="alg3.l9.m1.2.2.1.1">𝑆</ci></apply></apply><apply id="alg3.l9.m1.3.3.1.1.1.cmml" xref="alg3.l9.m1.3.3.1.1.1"><times id="alg3.l9.m1.3.3.1.1.1.2.cmml" xref="alg3.l9.m1.3.3.1.1.1.2"></times><ci id="alg3.l9.m1.3.3.1.1.1.3.cmml" xref="alg3.l9.m1.3.3.1.1.1.3">𝑟</ci><apply id="alg3.l9.m1.3.3.1.1.1.1.1.1.cmml" xref="alg3.l9.m1.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="alg3.l9.m1.3.3.1.1.1.1.1.1.1.cmml" xref="alg3.l9.m1.3.3.1.1.1.1.1">subscript</csymbol><ci id="alg3.l9.m1.3.3.1.1.1.1.1.1.2.cmml" xref="alg3.l9.m1.3.3.1.1.1.1.1.1.2">𝑠</ci><ci id="alg3.l9.m1.3.3.1.1.1.1.1.1.3.cmml" xref="alg3.l9.m1.3.3.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l9.m1.3c">R_{\text{response}}\leftarrow\frac{1}{|S|}\sum_{i=1}^{|S|}r(s_{i})</annotation><annotation encoding="application/x-llamapun" id="alg3.l9.m1.3d">italic_R start_POSTSUBSCRIPT response end_POSTSUBSCRIPT ← divide start_ARG 1 end_ARG start_ARG | italic_S | end_ARG ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT | italic_S | end_POSTSUPERSCRIPT italic_r ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>     <span class="ltx_text ltx_font_bold" id="alg3.l10.1">return</span> <span class="ltx_text" id="alg3.l10.2">JoinStatements</span>(S’)

</div>
<div class="ltx_listingline" id="alg3.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span><span class="ltx_text ltx_font_bold" id="alg3.l11.1">end</span> <span class="ltx_text ltx_font_bold" id="alg3.l11.2">function</span>
</div>
</div>
</div>
</div>
</figure>
<div class="ltx_para" id="Sx3.SSx3.p1">
<p class="ltx_p" id="Sx3.SSx3.p1.1">To ensure that the generated response contains only information pertinent to answering the query, VERA evaluates and edits the response to eliminate any superfluous details. This process involves splitting the response into atomic statements and assessing the relevance of each statement in addressing the query using reasoning. Irrelevant atomic statements are removed from the original response while ensuring that the remaining content is preserved. This meticulous approach guarantees that the final response is concise and focused, devoid of any unnecessary information, thereby enhancing the overall quality and accuracy of the answer provided.</p>
</div>
<div class="ltx_para" id="Sx3.SSx3.p2">
<p class="ltx_p" id="Sx3.SSx3.p2.5">Let <math alttext="S=\{s_{1},s_{2},\ldots,s_{n}\}" class="ltx_Math" display="inline" id="Sx3.SSx3.p2.1.m1.4"><semantics id="Sx3.SSx3.p2.1.m1.4a"><mrow id="Sx3.SSx3.p2.1.m1.4.4" xref="Sx3.SSx3.p2.1.m1.4.4.cmml"><mi id="Sx3.SSx3.p2.1.m1.4.4.5" xref="Sx3.SSx3.p2.1.m1.4.4.5.cmml">S</mi><mo id="Sx3.SSx3.p2.1.m1.4.4.4" xref="Sx3.SSx3.p2.1.m1.4.4.4.cmml">=</mo><mrow id="Sx3.SSx3.p2.1.m1.4.4.3.3" xref="Sx3.SSx3.p2.1.m1.4.4.3.4.cmml"><mo id="Sx3.SSx3.p2.1.m1.4.4.3.3.4" stretchy="false" xref="Sx3.SSx3.p2.1.m1.4.4.3.4.cmml">{</mo><msub id="Sx3.SSx3.p2.1.m1.2.2.1.1.1" xref="Sx3.SSx3.p2.1.m1.2.2.1.1.1.cmml"><mi id="Sx3.SSx3.p2.1.m1.2.2.1.1.1.2" xref="Sx3.SSx3.p2.1.m1.2.2.1.1.1.2.cmml">s</mi><mn id="Sx3.SSx3.p2.1.m1.2.2.1.1.1.3" xref="Sx3.SSx3.p2.1.m1.2.2.1.1.1.3.cmml">1</mn></msub><mo id="Sx3.SSx3.p2.1.m1.4.4.3.3.5" xref="Sx3.SSx3.p2.1.m1.4.4.3.4.cmml">,</mo><msub id="Sx3.SSx3.p2.1.m1.3.3.2.2.2" xref="Sx3.SSx3.p2.1.m1.3.3.2.2.2.cmml"><mi id="Sx3.SSx3.p2.1.m1.3.3.2.2.2.2" xref="Sx3.SSx3.p2.1.m1.3.3.2.2.2.2.cmml">s</mi><mn id="Sx3.SSx3.p2.1.m1.3.3.2.2.2.3" xref="Sx3.SSx3.p2.1.m1.3.3.2.2.2.3.cmml">2</mn></msub><mo id="Sx3.SSx3.p2.1.m1.4.4.3.3.6" xref="Sx3.SSx3.p2.1.m1.4.4.3.4.cmml">,</mo><mi id="Sx3.SSx3.p2.1.m1.1.1" mathvariant="normal" xref="Sx3.SSx3.p2.1.m1.1.1.cmml">…</mi><mo id="Sx3.SSx3.p2.1.m1.4.4.3.3.7" xref="Sx3.SSx3.p2.1.m1.4.4.3.4.cmml">,</mo><msub id="Sx3.SSx3.p2.1.m1.4.4.3.3.3" xref="Sx3.SSx3.p2.1.m1.4.4.3.3.3.cmml"><mi id="Sx3.SSx3.p2.1.m1.4.4.3.3.3.2" xref="Sx3.SSx3.p2.1.m1.4.4.3.3.3.2.cmml">s</mi><mi id="Sx3.SSx3.p2.1.m1.4.4.3.3.3.3" xref="Sx3.SSx3.p2.1.m1.4.4.3.3.3.3.cmml">n</mi></msub><mo id="Sx3.SSx3.p2.1.m1.4.4.3.3.8" stretchy="false" xref="Sx3.SSx3.p2.1.m1.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx3.p2.1.m1.4b"><apply id="Sx3.SSx3.p2.1.m1.4.4.cmml" xref="Sx3.SSx3.p2.1.m1.4.4"><eq id="Sx3.SSx3.p2.1.m1.4.4.4.cmml" xref="Sx3.SSx3.p2.1.m1.4.4.4"></eq><ci id="Sx3.SSx3.p2.1.m1.4.4.5.cmml" xref="Sx3.SSx3.p2.1.m1.4.4.5">𝑆</ci><set id="Sx3.SSx3.p2.1.m1.4.4.3.4.cmml" xref="Sx3.SSx3.p2.1.m1.4.4.3.3"><apply id="Sx3.SSx3.p2.1.m1.2.2.1.1.1.cmml" xref="Sx3.SSx3.p2.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx3.p2.1.m1.2.2.1.1.1.1.cmml" xref="Sx3.SSx3.p2.1.m1.2.2.1.1.1">subscript</csymbol><ci id="Sx3.SSx3.p2.1.m1.2.2.1.1.1.2.cmml" xref="Sx3.SSx3.p2.1.m1.2.2.1.1.1.2">𝑠</ci><cn id="Sx3.SSx3.p2.1.m1.2.2.1.1.1.3.cmml" type="integer" xref="Sx3.SSx3.p2.1.m1.2.2.1.1.1.3">1</cn></apply><apply id="Sx3.SSx3.p2.1.m1.3.3.2.2.2.cmml" xref="Sx3.SSx3.p2.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="Sx3.SSx3.p2.1.m1.3.3.2.2.2.1.cmml" xref="Sx3.SSx3.p2.1.m1.3.3.2.2.2">subscript</csymbol><ci id="Sx3.SSx3.p2.1.m1.3.3.2.2.2.2.cmml" xref="Sx3.SSx3.p2.1.m1.3.3.2.2.2.2">𝑠</ci><cn id="Sx3.SSx3.p2.1.m1.3.3.2.2.2.3.cmml" type="integer" xref="Sx3.SSx3.p2.1.m1.3.3.2.2.2.3">2</cn></apply><ci id="Sx3.SSx3.p2.1.m1.1.1.cmml" xref="Sx3.SSx3.p2.1.m1.1.1">…</ci><apply id="Sx3.SSx3.p2.1.m1.4.4.3.3.3.cmml" xref="Sx3.SSx3.p2.1.m1.4.4.3.3.3"><csymbol cd="ambiguous" id="Sx3.SSx3.p2.1.m1.4.4.3.3.3.1.cmml" xref="Sx3.SSx3.p2.1.m1.4.4.3.3.3">subscript</csymbol><ci id="Sx3.SSx3.p2.1.m1.4.4.3.3.3.2.cmml" xref="Sx3.SSx3.p2.1.m1.4.4.3.3.3.2">𝑠</ci><ci id="Sx3.SSx3.p2.1.m1.4.4.3.3.3.3.cmml" xref="Sx3.SSx3.p2.1.m1.4.4.3.3.3.3">𝑛</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx3.p2.1.m1.4c">S=\{s_{1},s_{2},\ldots,s_{n}\}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx3.p2.1.m1.4d">italic_S = { italic_s start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_s start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , … , italic_s start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT }</annotation></semantics></math> be the set of atomic statements in the response. Each statement <math alttext="s_{i}" class="ltx_Math" display="inline" id="Sx3.SSx3.p2.2.m2.1"><semantics id="Sx3.SSx3.p2.2.m2.1a"><msub id="Sx3.SSx3.p2.2.m2.1.1" xref="Sx3.SSx3.p2.2.m2.1.1.cmml"><mi id="Sx3.SSx3.p2.2.m2.1.1.2" xref="Sx3.SSx3.p2.2.m2.1.1.2.cmml">s</mi><mi id="Sx3.SSx3.p2.2.m2.1.1.3" xref="Sx3.SSx3.p2.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx3.p2.2.m2.1b"><apply id="Sx3.SSx3.p2.2.m2.1.1.cmml" xref="Sx3.SSx3.p2.2.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx3.p2.2.m2.1.1.1.cmml" xref="Sx3.SSx3.p2.2.m2.1.1">subscript</csymbol><ci id="Sx3.SSx3.p2.2.m2.1.1.2.cmml" xref="Sx3.SSx3.p2.2.m2.1.1.2">𝑠</ci><ci id="Sx3.SSx3.p2.2.m2.1.1.3.cmml" xref="Sx3.SSx3.p2.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx3.p2.2.m2.1c">s_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx3.p2.2.m2.1d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is assigned a binary score <math alttext="r(s_{i})" class="ltx_Math" display="inline" id="Sx3.SSx3.p2.3.m3.1"><semantics id="Sx3.SSx3.p2.3.m3.1a"><mrow id="Sx3.SSx3.p2.3.m3.1.1" xref="Sx3.SSx3.p2.3.m3.1.1.cmml"><mi id="Sx3.SSx3.p2.3.m3.1.1.3" xref="Sx3.SSx3.p2.3.m3.1.1.3.cmml">r</mi><mo id="Sx3.SSx3.p2.3.m3.1.1.2" xref="Sx3.SSx3.p2.3.m3.1.1.2.cmml">⁢</mo><mrow id="Sx3.SSx3.p2.3.m3.1.1.1.1" xref="Sx3.SSx3.p2.3.m3.1.1.1.1.1.cmml"><mo id="Sx3.SSx3.p2.3.m3.1.1.1.1.2" stretchy="false" xref="Sx3.SSx3.p2.3.m3.1.1.1.1.1.cmml">(</mo><msub id="Sx3.SSx3.p2.3.m3.1.1.1.1.1" xref="Sx3.SSx3.p2.3.m3.1.1.1.1.1.cmml"><mi id="Sx3.SSx3.p2.3.m3.1.1.1.1.1.2" xref="Sx3.SSx3.p2.3.m3.1.1.1.1.1.2.cmml">s</mi><mi id="Sx3.SSx3.p2.3.m3.1.1.1.1.1.3" xref="Sx3.SSx3.p2.3.m3.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx3.p2.3.m3.1.1.1.1.3" stretchy="false" xref="Sx3.SSx3.p2.3.m3.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx3.p2.3.m3.1b"><apply id="Sx3.SSx3.p2.3.m3.1.1.cmml" xref="Sx3.SSx3.p2.3.m3.1.1"><times id="Sx3.SSx3.p2.3.m3.1.1.2.cmml" xref="Sx3.SSx3.p2.3.m3.1.1.2"></times><ci id="Sx3.SSx3.p2.3.m3.1.1.3.cmml" xref="Sx3.SSx3.p2.3.m3.1.1.3">𝑟</ci><apply id="Sx3.SSx3.p2.3.m3.1.1.1.1.1.cmml" xref="Sx3.SSx3.p2.3.m3.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx3.p2.3.m3.1.1.1.1.1.1.cmml" xref="Sx3.SSx3.p2.3.m3.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx3.p2.3.m3.1.1.1.1.1.2.cmml" xref="Sx3.SSx3.p2.3.m3.1.1.1.1.1.2">𝑠</ci><ci id="Sx3.SSx3.p2.3.m3.1.1.1.1.1.3.cmml" xref="Sx3.SSx3.p2.3.m3.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx3.p2.3.m3.1c">r(s_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx3.p2.3.m3.1d">italic_r ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, where <math alttext="r(s_{i})=1" class="ltx_Math" display="inline" id="Sx3.SSx3.p2.4.m4.1"><semantics id="Sx3.SSx3.p2.4.m4.1a"><mrow id="Sx3.SSx3.p2.4.m4.1.1" xref="Sx3.SSx3.p2.4.m4.1.1.cmml"><mrow id="Sx3.SSx3.p2.4.m4.1.1.1" xref="Sx3.SSx3.p2.4.m4.1.1.1.cmml"><mi id="Sx3.SSx3.p2.4.m4.1.1.1.3" xref="Sx3.SSx3.p2.4.m4.1.1.1.3.cmml">r</mi><mo id="Sx3.SSx3.p2.4.m4.1.1.1.2" xref="Sx3.SSx3.p2.4.m4.1.1.1.2.cmml">⁢</mo><mrow id="Sx3.SSx3.p2.4.m4.1.1.1.1.1" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.cmml"><mo id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.2" stretchy="false" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.cmml">(</mo><msub id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.cmml"><mi id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.2" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.2.cmml">s</mi><mi id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.3" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.3" stretchy="false" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="Sx3.SSx3.p2.4.m4.1.1.2" xref="Sx3.SSx3.p2.4.m4.1.1.2.cmml">=</mo><mn id="Sx3.SSx3.p2.4.m4.1.1.3" xref="Sx3.SSx3.p2.4.m4.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx3.p2.4.m4.1b"><apply id="Sx3.SSx3.p2.4.m4.1.1.cmml" xref="Sx3.SSx3.p2.4.m4.1.1"><eq id="Sx3.SSx3.p2.4.m4.1.1.2.cmml" xref="Sx3.SSx3.p2.4.m4.1.1.2"></eq><apply id="Sx3.SSx3.p2.4.m4.1.1.1.cmml" xref="Sx3.SSx3.p2.4.m4.1.1.1"><times id="Sx3.SSx3.p2.4.m4.1.1.1.2.cmml" xref="Sx3.SSx3.p2.4.m4.1.1.1.2"></times><ci id="Sx3.SSx3.p2.4.m4.1.1.1.3.cmml" xref="Sx3.SSx3.p2.4.m4.1.1.1.3">𝑟</ci><apply id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.cmml" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.1.cmml" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.2.cmml" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.2">𝑠</ci><ci id="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.3.cmml" xref="Sx3.SSx3.p2.4.m4.1.1.1.1.1.1.3">𝑖</ci></apply></apply><cn id="Sx3.SSx3.p2.4.m4.1.1.3.cmml" type="integer" xref="Sx3.SSx3.p2.4.m4.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx3.p2.4.m4.1c">r(s_{i})=1</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx3.p2.4.m4.1d">italic_r ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = 1</annotation></semantics></math> if the statement is relevant and <math alttext="r(s_{i})=0" class="ltx_Math" display="inline" id="Sx3.SSx3.p2.5.m5.1"><semantics id="Sx3.SSx3.p2.5.m5.1a"><mrow id="Sx3.SSx3.p2.5.m5.1.1" xref="Sx3.SSx3.p2.5.m5.1.1.cmml"><mrow id="Sx3.SSx3.p2.5.m5.1.1.1" xref="Sx3.SSx3.p2.5.m5.1.1.1.cmml"><mi id="Sx3.SSx3.p2.5.m5.1.1.1.3" xref="Sx3.SSx3.p2.5.m5.1.1.1.3.cmml">r</mi><mo id="Sx3.SSx3.p2.5.m5.1.1.1.2" xref="Sx3.SSx3.p2.5.m5.1.1.1.2.cmml">⁢</mo><mrow id="Sx3.SSx3.p2.5.m5.1.1.1.1.1" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.cmml"><mo id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.2" stretchy="false" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.cmml">(</mo><msub id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.cmml"><mi id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.2" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.2.cmml">s</mi><mi id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.3" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.3" stretchy="false" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="Sx3.SSx3.p2.5.m5.1.1.2" xref="Sx3.SSx3.p2.5.m5.1.1.2.cmml">=</mo><mn id="Sx3.SSx3.p2.5.m5.1.1.3" xref="Sx3.SSx3.p2.5.m5.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx3.p2.5.m5.1b"><apply id="Sx3.SSx3.p2.5.m5.1.1.cmml" xref="Sx3.SSx3.p2.5.m5.1.1"><eq id="Sx3.SSx3.p2.5.m5.1.1.2.cmml" xref="Sx3.SSx3.p2.5.m5.1.1.2"></eq><apply id="Sx3.SSx3.p2.5.m5.1.1.1.cmml" xref="Sx3.SSx3.p2.5.m5.1.1.1"><times id="Sx3.SSx3.p2.5.m5.1.1.1.2.cmml" xref="Sx3.SSx3.p2.5.m5.1.1.1.2"></times><ci id="Sx3.SSx3.p2.5.m5.1.1.1.3.cmml" xref="Sx3.SSx3.p2.5.m5.1.1.1.3">𝑟</ci><apply id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.cmml" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.1.cmml" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.2.cmml" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.2">𝑠</ci><ci id="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.3.cmml" xref="Sx3.SSx3.p2.5.m5.1.1.1.1.1.1.3">𝑖</ci></apply></apply><cn id="Sx3.SSx3.p2.5.m5.1.1.3.cmml" type="integer" xref="Sx3.SSx3.p2.5.m5.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx3.p2.5.m5.1c">r(s_{i})=0</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx3.p2.5.m5.1d">italic_r ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = 0</annotation></semantics></math> if it is not.</p>
</div>
<div class="ltx_para" id="Sx3.SSx3.p3">
<p class="ltx_p" id="Sx3.SSx3.p3.1">The final response relevance score <math alttext="R_{\text{response}}" class="ltx_Math" display="inline" id="Sx3.SSx3.p3.1.m1.1"><semantics id="Sx3.SSx3.p3.1.m1.1a"><msub id="Sx3.SSx3.p3.1.m1.1.1" xref="Sx3.SSx3.p3.1.m1.1.1.cmml"><mi id="Sx3.SSx3.p3.1.m1.1.1.2" xref="Sx3.SSx3.p3.1.m1.1.1.2.cmml">R</mi><mtext id="Sx3.SSx3.p3.1.m1.1.1.3" xref="Sx3.SSx3.p3.1.m1.1.1.3a.cmml">response</mtext></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx3.p3.1.m1.1b"><apply id="Sx3.SSx3.p3.1.m1.1.1.cmml" xref="Sx3.SSx3.p3.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx3.p3.1.m1.1.1.1.cmml" xref="Sx3.SSx3.p3.1.m1.1.1">subscript</csymbol><ci id="Sx3.SSx3.p3.1.m1.1.1.2.cmml" xref="Sx3.SSx3.p3.1.m1.1.1.2">𝑅</ci><ci id="Sx3.SSx3.p3.1.m1.1.1.3a.cmml" xref="Sx3.SSx3.p3.1.m1.1.1.3"><mtext id="Sx3.SSx3.p3.1.m1.1.1.3.cmml" mathsize="70%" xref="Sx3.SSx3.p3.1.m1.1.1.3">response</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx3.p3.1.m1.1c">R_{\text{response}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx3.p3.1.m1.1d">italic_R start_POSTSUBSCRIPT response end_POSTSUBSCRIPT</annotation></semantics></math> is given by:</p>
</div>
<div class="ltx_para" id="Sx3.SSx3.p4">
<table class="ltx_equation ltx_eqn_table" id="Sx3.Ex2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="R_{\text{response}}=\frac{1}{n}\sum_{i=1}^{n}r(s_{i})" class="ltx_Math" display="block" id="Sx3.Ex2.m1.1"><semantics id="Sx3.Ex2.m1.1a"><mrow id="Sx3.Ex2.m1.1.1" xref="Sx3.Ex2.m1.1.1.cmml"><msub id="Sx3.Ex2.m1.1.1.3" xref="Sx3.Ex2.m1.1.1.3.cmml"><mi id="Sx3.Ex2.m1.1.1.3.2" xref="Sx3.Ex2.m1.1.1.3.2.cmml">R</mi><mtext id="Sx3.Ex2.m1.1.1.3.3" xref="Sx3.Ex2.m1.1.1.3.3a.cmml">response</mtext></msub><mo id="Sx3.Ex2.m1.1.1.2" xref="Sx3.Ex2.m1.1.1.2.cmml">=</mo><mrow id="Sx3.Ex2.m1.1.1.1" xref="Sx3.Ex2.m1.1.1.1.cmml"><mfrac id="Sx3.Ex2.m1.1.1.1.3" xref="Sx3.Ex2.m1.1.1.1.3.cmml"><mn id="Sx3.Ex2.m1.1.1.1.3.2" xref="Sx3.Ex2.m1.1.1.1.3.2.cmml">1</mn><mi id="Sx3.Ex2.m1.1.1.1.3.3" xref="Sx3.Ex2.m1.1.1.1.3.3.cmml">n</mi></mfrac><mo id="Sx3.Ex2.m1.1.1.1.2" xref="Sx3.Ex2.m1.1.1.1.2.cmml">⁢</mo><mrow id="Sx3.Ex2.m1.1.1.1.1" xref="Sx3.Ex2.m1.1.1.1.1.cmml"><munderover id="Sx3.Ex2.m1.1.1.1.1.2" xref="Sx3.Ex2.m1.1.1.1.1.2.cmml"><mo id="Sx3.Ex2.m1.1.1.1.1.2.2.2" movablelimits="false" xref="Sx3.Ex2.m1.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="Sx3.Ex2.m1.1.1.1.1.2.2.3" xref="Sx3.Ex2.m1.1.1.1.1.2.2.3.cmml"><mi id="Sx3.Ex2.m1.1.1.1.1.2.2.3.2" xref="Sx3.Ex2.m1.1.1.1.1.2.2.3.2.cmml">i</mi><mo id="Sx3.Ex2.m1.1.1.1.1.2.2.3.1" xref="Sx3.Ex2.m1.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="Sx3.Ex2.m1.1.1.1.1.2.2.3.3" xref="Sx3.Ex2.m1.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="Sx3.Ex2.m1.1.1.1.1.2.3" xref="Sx3.Ex2.m1.1.1.1.1.2.3.cmml">n</mi></munderover><mrow id="Sx3.Ex2.m1.1.1.1.1.1" xref="Sx3.Ex2.m1.1.1.1.1.1.cmml"><mi id="Sx3.Ex2.m1.1.1.1.1.1.3" xref="Sx3.Ex2.m1.1.1.1.1.1.3.cmml">r</mi><mo id="Sx3.Ex2.m1.1.1.1.1.1.2" xref="Sx3.Ex2.m1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="Sx3.Ex2.m1.1.1.1.1.1.1.1" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.cmml"><mo id="Sx3.Ex2.m1.1.1.1.1.1.1.1.2" stretchy="false" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="Sx3.Ex2.m1.1.1.1.1.1.1.1.1" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.cmml"><mi id="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.2" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.3" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.Ex2.m1.1.1.1.1.1.1.1.3" stretchy="false" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.Ex2.m1.1b"><apply id="Sx3.Ex2.m1.1.1.cmml" xref="Sx3.Ex2.m1.1.1"><eq id="Sx3.Ex2.m1.1.1.2.cmml" xref="Sx3.Ex2.m1.1.1.2"></eq><apply id="Sx3.Ex2.m1.1.1.3.cmml" xref="Sx3.Ex2.m1.1.1.3"><csymbol cd="ambiguous" id="Sx3.Ex2.m1.1.1.3.1.cmml" xref="Sx3.Ex2.m1.1.1.3">subscript</csymbol><ci id="Sx3.Ex2.m1.1.1.3.2.cmml" xref="Sx3.Ex2.m1.1.1.3.2">𝑅</ci><ci id="Sx3.Ex2.m1.1.1.3.3a.cmml" xref="Sx3.Ex2.m1.1.1.3.3"><mtext id="Sx3.Ex2.m1.1.1.3.3.cmml" mathsize="70%" xref="Sx3.Ex2.m1.1.1.3.3">response</mtext></ci></apply><apply id="Sx3.Ex2.m1.1.1.1.cmml" xref="Sx3.Ex2.m1.1.1.1"><times id="Sx3.Ex2.m1.1.1.1.2.cmml" xref="Sx3.Ex2.m1.1.1.1.2"></times><apply id="Sx3.Ex2.m1.1.1.1.3.cmml" xref="Sx3.Ex2.m1.1.1.1.3"><divide id="Sx3.Ex2.m1.1.1.1.3.1.cmml" xref="Sx3.Ex2.m1.1.1.1.3"></divide><cn id="Sx3.Ex2.m1.1.1.1.3.2.cmml" type="integer" xref="Sx3.Ex2.m1.1.1.1.3.2">1</cn><ci id="Sx3.Ex2.m1.1.1.1.3.3.cmml" xref="Sx3.Ex2.m1.1.1.1.3.3">𝑛</ci></apply><apply id="Sx3.Ex2.m1.1.1.1.1.cmml" xref="Sx3.Ex2.m1.1.1.1.1"><apply id="Sx3.Ex2.m1.1.1.1.1.2.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="Sx3.Ex2.m1.1.1.1.1.2.1.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2">superscript</csymbol><apply id="Sx3.Ex2.m1.1.1.1.1.2.2.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="Sx3.Ex2.m1.1.1.1.1.2.2.1.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2">subscript</csymbol><sum id="Sx3.Ex2.m1.1.1.1.1.2.2.2.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2.2.2"></sum><apply id="Sx3.Ex2.m1.1.1.1.1.2.2.3.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2.2.3"><eq id="Sx3.Ex2.m1.1.1.1.1.2.2.3.1.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2.2.3.1"></eq><ci id="Sx3.Ex2.m1.1.1.1.1.2.2.3.2.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2.2.3.2">𝑖</ci><cn id="Sx3.Ex2.m1.1.1.1.1.2.2.3.3.cmml" type="integer" xref="Sx3.Ex2.m1.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="Sx3.Ex2.m1.1.1.1.1.2.3.cmml" xref="Sx3.Ex2.m1.1.1.1.1.2.3">𝑛</ci></apply><apply id="Sx3.Ex2.m1.1.1.1.1.1.cmml" xref="Sx3.Ex2.m1.1.1.1.1.1"><times id="Sx3.Ex2.m1.1.1.1.1.1.2.cmml" xref="Sx3.Ex2.m1.1.1.1.1.1.2"></times><ci id="Sx3.Ex2.m1.1.1.1.1.1.3.cmml" xref="Sx3.Ex2.m1.1.1.1.1.1.3">𝑟</ci><apply id="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.cmml" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.1.cmml" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.2.cmml" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.2">𝑠</ci><ci id="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.3.cmml" xref="Sx3.Ex2.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.Ex2.m1.1c">R_{\text{response}}=\frac{1}{n}\sum_{i=1}^{n}r(s_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx3.Ex2.m1.1d">italic_R start_POSTSUBSCRIPT response end_POSTSUBSCRIPT = divide start_ARG 1 end_ARG start_ARG italic_n end_ARG ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT italic_r ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="Sx3.SSx3.p5">
<p class="ltx_p" id="Sx3.SSx3.p5.1">where <math alttext="n" class="ltx_Math" display="inline" id="Sx3.SSx3.p5.1.m1.1"><semantics id="Sx3.SSx3.p5.1.m1.1a"><mi id="Sx3.SSx3.p5.1.m1.1.1" xref="Sx3.SSx3.p5.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx3.p5.1.m1.1b"><ci id="Sx3.SSx3.p5.1.m1.1.1.cmml" xref="Sx3.SSx3.p5.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx3.p5.1.m1.1c">n</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx3.p5.1.m1.1d">italic_n</annotation></semantics></math> is the total number of atomic statements in the response. This score reflects the proportion of the original response that is relevant to the query.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx3.SSx4">
<h3 class="ltx_title ltx_title_subsection">Response Adherence Evaluation and Correction</h3>
<figure class="ltx_figure" id="Sx3.F6">
<p class="ltx_p ltx_align_center" id="Sx3.F6.1"><span class="ltx_text ltx_framed ltx_framed_rectangle" id="Sx3.F6.1.1" style="border-color: #000000;">
<img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="571" id="Sx3.F6.1.1.g1" src="extracted/5863653/figures/adherence.png" width="598"/>
</span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>Response Adherence Evaluation and Correction</figcaption>
</figure>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg4">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg4.5.1.1">Algorithm 4</span> </span> Response Adherence Evaluation and Correction</figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="alg4.3"><span class="ltx_text ltx_font_bold" id="alg4.3.1">Input:</span> Edited response <math alttext="R" class="ltx_Math" display="inline" id="alg4.1.m1.1"><semantics id="alg4.1.m1.1a"><mi id="alg4.1.m1.1.1" xref="alg4.1.m1.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="alg4.1.m1.1b"><ci id="alg4.1.m1.1.1.cmml" xref="alg4.1.m1.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="alg4.1.m1.1c">R</annotation><annotation encoding="application/x-llamapun" id="alg4.1.m1.1d">italic_R</annotation></semantics></math>, Edited context <math alttext="C^{\prime}" class="ltx_Math" display="inline" id="alg4.2.m2.1"><semantics id="alg4.2.m2.1a"><msup id="alg4.2.m2.1.1" xref="alg4.2.m2.1.1.cmml"><mi id="alg4.2.m2.1.1.2" xref="alg4.2.m2.1.1.2.cmml">C</mi><mo id="alg4.2.m2.1.1.3" xref="alg4.2.m2.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="alg4.2.m2.1b"><apply id="alg4.2.m2.1.1.cmml" xref="alg4.2.m2.1.1"><csymbol cd="ambiguous" id="alg4.2.m2.1.1.1.cmml" xref="alg4.2.m2.1.1">superscript</csymbol><ci id="alg4.2.m2.1.1.2.cmml" xref="alg4.2.m2.1.1.2">𝐶</ci><ci id="alg4.2.m2.1.1.3.cmml" xref="alg4.2.m2.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg4.2.m2.1c">C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="alg4.2.m2.1d">italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math>
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="alg4.3.2">Output:</span> Final response <math alttext="R^{\prime}" class="ltx_Math" display="inline" id="alg4.3.m3.1"><semantics id="alg4.3.m3.1a"><msup id="alg4.3.m3.1.1" xref="alg4.3.m3.1.1.cmml"><mi id="alg4.3.m3.1.1.2" xref="alg4.3.m3.1.1.2.cmml">R</mi><mo id="alg4.3.m3.1.1.3" xref="alg4.3.m3.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="alg4.3.m3.1b"><apply id="alg4.3.m3.1.1.cmml" xref="alg4.3.m3.1.1"><csymbol cd="ambiguous" id="alg4.3.m3.1.1.1.cmml" xref="alg4.3.m3.1.1">superscript</csymbol><ci id="alg4.3.m3.1.1.2.cmml" xref="alg4.3.m3.1.1.2">𝑅</ci><ci id="alg4.3.m3.1.1.3.cmml" xref="alg4.3.m3.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg4.3.m3.1c">R^{\prime}</annotation><annotation encoding="application/x-llamapun" id="alg4.3.m3.1d">italic_R start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math></p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<div class="ltx_listing ltx_figure_panel ltx_listing" id="alg4.6">
<div class="ltx_listingline" id="alg4.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span><span class="ltx_text ltx_font_bold" id="alg4.l1.1">function</span> <span class="ltx_text ltx_font_smallcaps" id="alg4.l1.2">EvaluateAndEditResponseAdherence</span>(<math alttext="R,C^{\prime}" class="ltx_Math" display="inline" id="alg4.l1.m1.2"><semantics id="alg4.l1.m1.2a"><mrow id="alg4.l1.m1.2.2.1" xref="alg4.l1.m1.2.2.2.cmml"><mi id="alg4.l1.m1.1.1" xref="alg4.l1.m1.1.1.cmml">R</mi><mo id="alg4.l1.m1.2.2.1.2" xref="alg4.l1.m1.2.2.2.cmml">,</mo><msup id="alg4.l1.m1.2.2.1.1" xref="alg4.l1.m1.2.2.1.1.cmml"><mi id="alg4.l1.m1.2.2.1.1.2" xref="alg4.l1.m1.2.2.1.1.2.cmml">C</mi><mo id="alg4.l1.m1.2.2.1.1.3" xref="alg4.l1.m1.2.2.1.1.3.cmml">′</mo></msup></mrow><annotation-xml encoding="MathML-Content" id="alg4.l1.m1.2b"><list id="alg4.l1.m1.2.2.2.cmml" xref="alg4.l1.m1.2.2.1"><ci id="alg4.l1.m1.1.1.cmml" xref="alg4.l1.m1.1.1">𝑅</ci><apply id="alg4.l1.m1.2.2.1.1.cmml" xref="alg4.l1.m1.2.2.1.1"><csymbol cd="ambiguous" id="alg4.l1.m1.2.2.1.1.1.cmml" xref="alg4.l1.m1.2.2.1.1">superscript</csymbol><ci id="alg4.l1.m1.2.2.1.1.2.cmml" xref="alg4.l1.m1.2.2.1.1.2">𝐶</ci><ci id="alg4.l1.m1.2.2.1.1.3.cmml" xref="alg4.l1.m1.2.2.1.1.3">′</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="alg4.l1.m1.2c">R,C^{\prime}</annotation><annotation encoding="application/x-llamapun" id="alg4.l1.m1.2d">italic_R , italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg4.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>     <math alttext="S\leftarrow\text{SplitIntoAtomicStatements}(R)" class="ltx_Math" display="inline" id="alg4.l2.m1.1"><semantics id="alg4.l2.m1.1a"><mrow id="alg4.l2.m1.1.2" xref="alg4.l2.m1.1.2.cmml"><mi id="alg4.l2.m1.1.2.2" xref="alg4.l2.m1.1.2.2.cmml">S</mi><mo id="alg4.l2.m1.1.2.1" stretchy="false" xref="alg4.l2.m1.1.2.1.cmml">←</mo><mrow id="alg4.l2.m1.1.2.3" xref="alg4.l2.m1.1.2.3.cmml"><mtext id="alg4.l2.m1.1.2.3.2" xref="alg4.l2.m1.1.2.3.2a.cmml">SplitIntoAtomicStatements</mtext><mo id="alg4.l2.m1.1.2.3.1" xref="alg4.l2.m1.1.2.3.1.cmml">⁢</mo><mrow id="alg4.l2.m1.1.2.3.3.2" xref="alg4.l2.m1.1.2.3.cmml"><mo id="alg4.l2.m1.1.2.3.3.2.1" stretchy="false" xref="alg4.l2.m1.1.2.3.cmml">(</mo><mi id="alg4.l2.m1.1.1" xref="alg4.l2.m1.1.1.cmml">R</mi><mo id="alg4.l2.m1.1.2.3.3.2.2" stretchy="false" xref="alg4.l2.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg4.l2.m1.1b"><apply id="alg4.l2.m1.1.2.cmml" xref="alg4.l2.m1.1.2"><ci id="alg4.l2.m1.1.2.1.cmml" xref="alg4.l2.m1.1.2.1">←</ci><ci id="alg4.l2.m1.1.2.2.cmml" xref="alg4.l2.m1.1.2.2">𝑆</ci><apply id="alg4.l2.m1.1.2.3.cmml" xref="alg4.l2.m1.1.2.3"><times id="alg4.l2.m1.1.2.3.1.cmml" xref="alg4.l2.m1.1.2.3.1"></times><ci id="alg4.l2.m1.1.2.3.2a.cmml" xref="alg4.l2.m1.1.2.3.2"><mtext id="alg4.l2.m1.1.2.3.2.cmml" xref="alg4.l2.m1.1.2.3.2">SplitIntoAtomicStatements</mtext></ci><ci id="alg4.l2.m1.1.1.cmml" xref="alg4.l2.m1.1.1">𝑅</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg4.l2.m1.1c">S\leftarrow\text{SplitIntoAtomicStatements}(R)</annotation><annotation encoding="application/x-llamapun" id="alg4.l2.m1.1d">italic_S ← SplitIntoAtomicStatements ( italic_R )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg4.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>     <math alttext="S^{\prime}\leftarrow\emptyset" class="ltx_Math" display="inline" id="alg4.l3.m1.1"><semantics id="alg4.l3.m1.1a"><mrow id="alg4.l3.m1.1.1" xref="alg4.l3.m1.1.1.cmml"><msup id="alg4.l3.m1.1.1.2" xref="alg4.l3.m1.1.1.2.cmml"><mi id="alg4.l3.m1.1.1.2.2" xref="alg4.l3.m1.1.1.2.2.cmml">S</mi><mo id="alg4.l3.m1.1.1.2.3" xref="alg4.l3.m1.1.1.2.3.cmml">′</mo></msup><mo id="alg4.l3.m1.1.1.1" stretchy="false" xref="alg4.l3.m1.1.1.1.cmml">←</mo><mi id="alg4.l3.m1.1.1.3" mathvariant="normal" xref="alg4.l3.m1.1.1.3.cmml">∅</mi></mrow><annotation-xml encoding="MathML-Content" id="alg4.l3.m1.1b"><apply id="alg4.l3.m1.1.1.cmml" xref="alg4.l3.m1.1.1"><ci id="alg4.l3.m1.1.1.1.cmml" xref="alg4.l3.m1.1.1.1">←</ci><apply id="alg4.l3.m1.1.1.2.cmml" xref="alg4.l3.m1.1.1.2"><csymbol cd="ambiguous" id="alg4.l3.m1.1.1.2.1.cmml" xref="alg4.l3.m1.1.1.2">superscript</csymbol><ci id="alg4.l3.m1.1.1.2.2.cmml" xref="alg4.l3.m1.1.1.2.2">𝑆</ci><ci id="alg4.l3.m1.1.1.2.3.cmml" xref="alg4.l3.m1.1.1.2.3">′</ci></apply><emptyset id="alg4.l3.m1.1.1.3.cmml" xref="alg4.l3.m1.1.1.3"></emptyset></apply></annotation-xml><annotation encoding="application/x-tex" id="alg4.l3.m1.1c">S^{\prime}\leftarrow\emptyset</annotation><annotation encoding="application/x-llamapun" id="alg4.l3.m1.1d">italic_S start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ← ∅</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg4.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <span class="ltx_text ltx_font_bold" id="alg4.l4.1">for all</span> <math alttext="s_{i}\in S" class="ltx_Math" display="inline" id="alg4.l4.m1.1"><semantics id="alg4.l4.m1.1a"><mrow id="alg4.l4.m1.1.1" xref="alg4.l4.m1.1.1.cmml"><msub id="alg4.l4.m1.1.1.2" xref="alg4.l4.m1.1.1.2.cmml"><mi id="alg4.l4.m1.1.1.2.2" xref="alg4.l4.m1.1.1.2.2.cmml">s</mi><mi id="alg4.l4.m1.1.1.2.3" xref="alg4.l4.m1.1.1.2.3.cmml">i</mi></msub><mo id="alg4.l4.m1.1.1.1" xref="alg4.l4.m1.1.1.1.cmml">∈</mo><mi id="alg4.l4.m1.1.1.3" xref="alg4.l4.m1.1.1.3.cmml">S</mi></mrow><annotation-xml encoding="MathML-Content" id="alg4.l4.m1.1b"><apply id="alg4.l4.m1.1.1.cmml" xref="alg4.l4.m1.1.1"><in id="alg4.l4.m1.1.1.1.cmml" xref="alg4.l4.m1.1.1.1"></in><apply id="alg4.l4.m1.1.1.2.cmml" xref="alg4.l4.m1.1.1.2"><csymbol cd="ambiguous" id="alg4.l4.m1.1.1.2.1.cmml" xref="alg4.l4.m1.1.1.2">subscript</csymbol><ci id="alg4.l4.m1.1.1.2.2.cmml" xref="alg4.l4.m1.1.1.2.2">𝑠</ci><ci id="alg4.l4.m1.1.1.2.3.cmml" xref="alg4.l4.m1.1.1.2.3">𝑖</ci></apply><ci id="alg4.l4.m1.1.1.3.cmml" xref="alg4.l4.m1.1.1.3">𝑆</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg4.l4.m1.1c">s_{i}\in S</annotation><annotation encoding="application/x-llamapun" id="alg4.l4.m1.1d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ italic_S</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg4.l4.2">do</span>
</div>
<div class="ltx_listingline" id="alg4.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>         <span class="ltx_text ltx_font_bold" id="alg4.l5.1">if</span> <math alttext="\text{IsGroundedInContext}(s_{i},C^{\prime})" class="ltx_Math" display="inline" id="alg4.l5.m1.2"><semantics id="alg4.l5.m1.2a"><mrow id="alg4.l5.m1.2.2" xref="alg4.l5.m1.2.2.cmml"><mtext id="alg4.l5.m1.2.2.4" xref="alg4.l5.m1.2.2.4a.cmml">IsGroundedInContext</mtext><mo id="alg4.l5.m1.2.2.3" xref="alg4.l5.m1.2.2.3.cmml">⁢</mo><mrow id="alg4.l5.m1.2.2.2.2" xref="alg4.l5.m1.2.2.2.3.cmml"><mo id="alg4.l5.m1.2.2.2.2.3" stretchy="false" xref="alg4.l5.m1.2.2.2.3.cmml">(</mo><msub id="alg4.l5.m1.1.1.1.1.1" xref="alg4.l5.m1.1.1.1.1.1.cmml"><mi id="alg4.l5.m1.1.1.1.1.1.2" xref="alg4.l5.m1.1.1.1.1.1.2.cmml">s</mi><mi id="alg4.l5.m1.1.1.1.1.1.3" xref="alg4.l5.m1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg4.l5.m1.2.2.2.2.4" xref="alg4.l5.m1.2.2.2.3.cmml">,</mo><msup id="alg4.l5.m1.2.2.2.2.2" xref="alg4.l5.m1.2.2.2.2.2.cmml"><mi id="alg4.l5.m1.2.2.2.2.2.2" xref="alg4.l5.m1.2.2.2.2.2.2.cmml">C</mi><mo id="alg4.l5.m1.2.2.2.2.2.3" xref="alg4.l5.m1.2.2.2.2.2.3.cmml">′</mo></msup><mo id="alg4.l5.m1.2.2.2.2.5" stretchy="false" xref="alg4.l5.m1.2.2.2.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg4.l5.m1.2b"><apply id="alg4.l5.m1.2.2.cmml" xref="alg4.l5.m1.2.2"><times id="alg4.l5.m1.2.2.3.cmml" xref="alg4.l5.m1.2.2.3"></times><ci id="alg4.l5.m1.2.2.4a.cmml" xref="alg4.l5.m1.2.2.4"><mtext id="alg4.l5.m1.2.2.4.cmml" xref="alg4.l5.m1.2.2.4">IsGroundedInContext</mtext></ci><interval closure="open" id="alg4.l5.m1.2.2.2.3.cmml" xref="alg4.l5.m1.2.2.2.2"><apply id="alg4.l5.m1.1.1.1.1.1.cmml" xref="alg4.l5.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg4.l5.m1.1.1.1.1.1.1.cmml" xref="alg4.l5.m1.1.1.1.1.1">subscript</csymbol><ci id="alg4.l5.m1.1.1.1.1.1.2.cmml" xref="alg4.l5.m1.1.1.1.1.1.2">𝑠</ci><ci id="alg4.l5.m1.1.1.1.1.1.3.cmml" xref="alg4.l5.m1.1.1.1.1.1.3">𝑖</ci></apply><apply id="alg4.l5.m1.2.2.2.2.2.cmml" xref="alg4.l5.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="alg4.l5.m1.2.2.2.2.2.1.cmml" xref="alg4.l5.m1.2.2.2.2.2">superscript</csymbol><ci id="alg4.l5.m1.2.2.2.2.2.2.cmml" xref="alg4.l5.m1.2.2.2.2.2.2">𝐶</ci><ci id="alg4.l5.m1.2.2.2.2.2.3.cmml" xref="alg4.l5.m1.2.2.2.2.2.3">′</ci></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="alg4.l5.m1.2c">\text{IsGroundedInContext}(s_{i},C^{\prime})</annotation><annotation encoding="application/x-llamapun" id="alg4.l5.m1.2d">IsGroundedInContext ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_C start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT )</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg4.l5.2">then</span>
</div>
<div class="ltx_listingline" id="alg4.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>              <math alttext="S^{\prime}\leftarrow S^{\prime}\cup\{s_{i}\}" class="ltx_Math" display="inline" id="alg4.l6.m1.1"><semantics id="alg4.l6.m1.1a"><mrow id="alg4.l6.m1.1.1" xref="alg4.l6.m1.1.1.cmml"><msup id="alg4.l6.m1.1.1.3" xref="alg4.l6.m1.1.1.3.cmml"><mi id="alg4.l6.m1.1.1.3.2" xref="alg4.l6.m1.1.1.3.2.cmml">S</mi><mo id="alg4.l6.m1.1.1.3.3" xref="alg4.l6.m1.1.1.3.3.cmml">′</mo></msup><mo id="alg4.l6.m1.1.1.2" stretchy="false" xref="alg4.l6.m1.1.1.2.cmml">←</mo><mrow id="alg4.l6.m1.1.1.1" xref="alg4.l6.m1.1.1.1.cmml"><msup id="alg4.l6.m1.1.1.1.3" xref="alg4.l6.m1.1.1.1.3.cmml"><mi id="alg4.l6.m1.1.1.1.3.2" xref="alg4.l6.m1.1.1.1.3.2.cmml">S</mi><mo id="alg4.l6.m1.1.1.1.3.3" xref="alg4.l6.m1.1.1.1.3.3.cmml">′</mo></msup><mo id="alg4.l6.m1.1.1.1.2" xref="alg4.l6.m1.1.1.1.2.cmml">∪</mo><mrow id="alg4.l6.m1.1.1.1.1.1" xref="alg4.l6.m1.1.1.1.1.2.cmml"><mo id="alg4.l6.m1.1.1.1.1.1.2" stretchy="false" xref="alg4.l6.m1.1.1.1.1.2.cmml">{</mo><msub id="alg4.l6.m1.1.1.1.1.1.1" xref="alg4.l6.m1.1.1.1.1.1.1.cmml"><mi id="alg4.l6.m1.1.1.1.1.1.1.2" xref="alg4.l6.m1.1.1.1.1.1.1.2.cmml">s</mi><mi id="alg4.l6.m1.1.1.1.1.1.1.3" xref="alg4.l6.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg4.l6.m1.1.1.1.1.1.3" stretchy="false" xref="alg4.l6.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg4.l6.m1.1b"><apply id="alg4.l6.m1.1.1.cmml" xref="alg4.l6.m1.1.1"><ci id="alg4.l6.m1.1.1.2.cmml" xref="alg4.l6.m1.1.1.2">←</ci><apply id="alg4.l6.m1.1.1.3.cmml" xref="alg4.l6.m1.1.1.3"><csymbol cd="ambiguous" id="alg4.l6.m1.1.1.3.1.cmml" xref="alg4.l6.m1.1.1.3">superscript</csymbol><ci id="alg4.l6.m1.1.1.3.2.cmml" xref="alg4.l6.m1.1.1.3.2">𝑆</ci><ci id="alg4.l6.m1.1.1.3.3.cmml" xref="alg4.l6.m1.1.1.3.3">′</ci></apply><apply id="alg4.l6.m1.1.1.1.cmml" xref="alg4.l6.m1.1.1.1"><union id="alg4.l6.m1.1.1.1.2.cmml" xref="alg4.l6.m1.1.1.1.2"></union><apply id="alg4.l6.m1.1.1.1.3.cmml" xref="alg4.l6.m1.1.1.1.3"><csymbol cd="ambiguous" id="alg4.l6.m1.1.1.1.3.1.cmml" xref="alg4.l6.m1.1.1.1.3">superscript</csymbol><ci id="alg4.l6.m1.1.1.1.3.2.cmml" xref="alg4.l6.m1.1.1.1.3.2">𝑆</ci><ci id="alg4.l6.m1.1.1.1.3.3.cmml" xref="alg4.l6.m1.1.1.1.3.3">′</ci></apply><set id="alg4.l6.m1.1.1.1.1.2.cmml" xref="alg4.l6.m1.1.1.1.1.1"><apply id="alg4.l6.m1.1.1.1.1.1.1.cmml" xref="alg4.l6.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg4.l6.m1.1.1.1.1.1.1.1.cmml" xref="alg4.l6.m1.1.1.1.1.1.1">subscript</csymbol><ci id="alg4.l6.m1.1.1.1.1.1.1.2.cmml" xref="alg4.l6.m1.1.1.1.1.1.1.2">𝑠</ci><ci id="alg4.l6.m1.1.1.1.1.1.1.3.cmml" xref="alg4.l6.m1.1.1.1.1.1.1.3">𝑖</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg4.l6.m1.1c">S^{\prime}\leftarrow S^{\prime}\cup\{s_{i}\}</annotation><annotation encoding="application/x-llamapun" id="alg4.l6.m1.1d">italic_S start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ← italic_S start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT ∪ { italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT }</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg4.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>         <span class="ltx_text ltx_font_bold" id="alg4.l7.1">end</span> <span class="ltx_text ltx_font_bold" id="alg4.l7.2">if</span>
</div>
<div class="ltx_listingline" id="alg4.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>     <span class="ltx_text ltx_font_bold" id="alg4.l8.1">end</span> <span class="ltx_text ltx_font_bold" id="alg4.l8.2">for</span>
</div>
<div class="ltx_listingline" id="alg4.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>     <math alttext="A_{\text{response}}\leftarrow\frac{1}{|S|}\sum_{i=1}^{|S|}g(s_{i})" class="ltx_Math" display="inline" id="alg4.l9.m1.3"><semantics id="alg4.l9.m1.3a"><mrow id="alg4.l9.m1.3.3" xref="alg4.l9.m1.3.3.cmml"><msub id="alg4.l9.m1.3.3.3" xref="alg4.l9.m1.3.3.3.cmml"><mi id="alg4.l9.m1.3.3.3.2" xref="alg4.l9.m1.3.3.3.2.cmml">A</mi><mtext id="alg4.l9.m1.3.3.3.3" xref="alg4.l9.m1.3.3.3.3a.cmml">response</mtext></msub><mo id="alg4.l9.m1.3.3.2" stretchy="false" xref="alg4.l9.m1.3.3.2.cmml">←</mo><mrow id="alg4.l9.m1.3.3.1" xref="alg4.l9.m1.3.3.1.cmml"><mfrac id="alg4.l9.m1.1.1" xref="alg4.l9.m1.1.1.cmml"><mn id="alg4.l9.m1.1.1.3" xref="alg4.l9.m1.1.1.3.cmml">1</mn><mrow id="alg4.l9.m1.1.1.1.3" xref="alg4.l9.m1.1.1.1.2.cmml"><mo id="alg4.l9.m1.1.1.1.3.1" stretchy="false" xref="alg4.l9.m1.1.1.1.2.1.cmml">|</mo><mi id="alg4.l9.m1.1.1.1.1" xref="alg4.l9.m1.1.1.1.1.cmml">S</mi><mo id="alg4.l9.m1.1.1.1.3.2" stretchy="false" xref="alg4.l9.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo id="alg4.l9.m1.3.3.1.2" xref="alg4.l9.m1.3.3.1.2.cmml">⁢</mo><mrow id="alg4.l9.m1.3.3.1.1" xref="alg4.l9.m1.3.3.1.1.cmml"><msubsup id="alg4.l9.m1.3.3.1.1.2" xref="alg4.l9.m1.3.3.1.1.2.cmml"><mo id="alg4.l9.m1.3.3.1.1.2.2.2" xref="alg4.l9.m1.3.3.1.1.2.2.2.cmml">∑</mo><mrow id="alg4.l9.m1.3.3.1.1.2.2.3" xref="alg4.l9.m1.3.3.1.1.2.2.3.cmml"><mi id="alg4.l9.m1.3.3.1.1.2.2.3.2" xref="alg4.l9.m1.3.3.1.1.2.2.3.2.cmml">i</mi><mo id="alg4.l9.m1.3.3.1.1.2.2.3.1" xref="alg4.l9.m1.3.3.1.1.2.2.3.1.cmml">=</mo><mn id="alg4.l9.m1.3.3.1.1.2.2.3.3" xref="alg4.l9.m1.3.3.1.1.2.2.3.3.cmml">1</mn></mrow><mrow id="alg4.l9.m1.2.2.1.3" xref="alg4.l9.m1.2.2.1.2.cmml"><mo id="alg4.l9.m1.2.2.1.3.1" stretchy="false" xref="alg4.l9.m1.2.2.1.2.1.cmml">|</mo><mi id="alg4.l9.m1.2.2.1.1" xref="alg4.l9.m1.2.2.1.1.cmml">S</mi><mo id="alg4.l9.m1.2.2.1.3.2" stretchy="false" xref="alg4.l9.m1.2.2.1.2.1.cmml">|</mo></mrow></msubsup><mrow id="alg4.l9.m1.3.3.1.1.1" xref="alg4.l9.m1.3.3.1.1.1.cmml"><mi id="alg4.l9.m1.3.3.1.1.1.3" xref="alg4.l9.m1.3.3.1.1.1.3.cmml">g</mi><mo id="alg4.l9.m1.3.3.1.1.1.2" xref="alg4.l9.m1.3.3.1.1.1.2.cmml">⁢</mo><mrow id="alg4.l9.m1.3.3.1.1.1.1.1" xref="alg4.l9.m1.3.3.1.1.1.1.1.1.cmml"><mo id="alg4.l9.m1.3.3.1.1.1.1.1.2" stretchy="false" xref="alg4.l9.m1.3.3.1.1.1.1.1.1.cmml">(</mo><msub id="alg4.l9.m1.3.3.1.1.1.1.1.1" xref="alg4.l9.m1.3.3.1.1.1.1.1.1.cmml"><mi id="alg4.l9.m1.3.3.1.1.1.1.1.1.2" xref="alg4.l9.m1.3.3.1.1.1.1.1.1.2.cmml">s</mi><mi id="alg4.l9.m1.3.3.1.1.1.1.1.1.3" xref="alg4.l9.m1.3.3.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg4.l9.m1.3.3.1.1.1.1.1.3" stretchy="false" xref="alg4.l9.m1.3.3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg4.l9.m1.3b"><apply id="alg4.l9.m1.3.3.cmml" xref="alg4.l9.m1.3.3"><ci id="alg4.l9.m1.3.3.2.cmml" xref="alg4.l9.m1.3.3.2">←</ci><apply id="alg4.l9.m1.3.3.3.cmml" xref="alg4.l9.m1.3.3.3"><csymbol cd="ambiguous" id="alg4.l9.m1.3.3.3.1.cmml" xref="alg4.l9.m1.3.3.3">subscript</csymbol><ci id="alg4.l9.m1.3.3.3.2.cmml" xref="alg4.l9.m1.3.3.3.2">𝐴</ci><ci id="alg4.l9.m1.3.3.3.3a.cmml" xref="alg4.l9.m1.3.3.3.3"><mtext id="alg4.l9.m1.3.3.3.3.cmml" mathsize="70%" xref="alg4.l9.m1.3.3.3.3">response</mtext></ci></apply><apply id="alg4.l9.m1.3.3.1.cmml" xref="alg4.l9.m1.3.3.1"><times id="alg4.l9.m1.3.3.1.2.cmml" xref="alg4.l9.m1.3.3.1.2"></times><apply id="alg4.l9.m1.1.1.cmml" xref="alg4.l9.m1.1.1"><divide id="alg4.l9.m1.1.1.2.cmml" xref="alg4.l9.m1.1.1"></divide><cn id="alg4.l9.m1.1.1.3.cmml" type="integer" xref="alg4.l9.m1.1.1.3">1</cn><apply id="alg4.l9.m1.1.1.1.2.cmml" xref="alg4.l9.m1.1.1.1.3"><abs id="alg4.l9.m1.1.1.1.2.1.cmml" xref="alg4.l9.m1.1.1.1.3.1"></abs><ci id="alg4.l9.m1.1.1.1.1.cmml" xref="alg4.l9.m1.1.1.1.1">𝑆</ci></apply></apply><apply id="alg4.l9.m1.3.3.1.1.cmml" xref="alg4.l9.m1.3.3.1.1"><apply id="alg4.l9.m1.3.3.1.1.2.cmml" xref="alg4.l9.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="alg4.l9.m1.3.3.1.1.2.1.cmml" xref="alg4.l9.m1.3.3.1.1.2">superscript</csymbol><apply id="alg4.l9.m1.3.3.1.1.2.2.cmml" xref="alg4.l9.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="alg4.l9.m1.3.3.1.1.2.2.1.cmml" xref="alg4.l9.m1.3.3.1.1.2">subscript</csymbol><sum id="alg4.l9.m1.3.3.1.1.2.2.2.cmml" xref="alg4.l9.m1.3.3.1.1.2.2.2"></sum><apply id="alg4.l9.m1.3.3.1.1.2.2.3.cmml" xref="alg4.l9.m1.3.3.1.1.2.2.3"><eq id="alg4.l9.m1.3.3.1.1.2.2.3.1.cmml" xref="alg4.l9.m1.3.3.1.1.2.2.3.1"></eq><ci id="alg4.l9.m1.3.3.1.1.2.2.3.2.cmml" xref="alg4.l9.m1.3.3.1.1.2.2.3.2">𝑖</ci><cn id="alg4.l9.m1.3.3.1.1.2.2.3.3.cmml" type="integer" xref="alg4.l9.m1.3.3.1.1.2.2.3.3">1</cn></apply></apply><apply id="alg4.l9.m1.2.2.1.2.cmml" xref="alg4.l9.m1.2.2.1.3"><abs id="alg4.l9.m1.2.2.1.2.1.cmml" xref="alg4.l9.m1.2.2.1.3.1"></abs><ci id="alg4.l9.m1.2.2.1.1.cmml" xref="alg4.l9.m1.2.2.1.1">𝑆</ci></apply></apply><apply id="alg4.l9.m1.3.3.1.1.1.cmml" xref="alg4.l9.m1.3.3.1.1.1"><times id="alg4.l9.m1.3.3.1.1.1.2.cmml" xref="alg4.l9.m1.3.3.1.1.1.2"></times><ci id="alg4.l9.m1.3.3.1.1.1.3.cmml" xref="alg4.l9.m1.3.3.1.1.1.3">𝑔</ci><apply id="alg4.l9.m1.3.3.1.1.1.1.1.1.cmml" xref="alg4.l9.m1.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="alg4.l9.m1.3.3.1.1.1.1.1.1.1.cmml" xref="alg4.l9.m1.3.3.1.1.1.1.1">subscript</csymbol><ci id="alg4.l9.m1.3.3.1.1.1.1.1.1.2.cmml" xref="alg4.l9.m1.3.3.1.1.1.1.1.1.2">𝑠</ci><ci id="alg4.l9.m1.3.3.1.1.1.1.1.1.3.cmml" xref="alg4.l9.m1.3.3.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg4.l9.m1.3c">A_{\text{response}}\leftarrow\frac{1}{|S|}\sum_{i=1}^{|S|}g(s_{i})</annotation><annotation encoding="application/x-llamapun" id="alg4.l9.m1.3d">italic_A start_POSTSUBSCRIPT response end_POSTSUBSCRIPT ← divide start_ARG 1 end_ARG start_ARG | italic_S | end_ARG ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT | italic_S | end_POSTSUPERSCRIPT italic_g ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg4.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>     <span class="ltx_text ltx_font_bold" id="alg4.l10.1">return</span> <span class="ltx_text" id="alg4.l10.2">JoinStatements</span>(S’)

</div>
<div class="ltx_listingline" id="alg4.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span><span class="ltx_text ltx_font_bold" id="alg4.l11.1">end</span> <span class="ltx_text ltx_font_bold" id="alg4.l11.2">function</span>
</div>
</div>
</div>
</div>
</figure>
<div class="ltx_para" id="Sx3.SSx4.p1">
<p class="ltx_p" id="Sx3.SSx4.p1.1">As discussed earlier, LLMs in RAG system may generate text that includes additional information beyond the retrieved documents <cite class="ltx_cite ltx_citemacro_citep">(Shuster et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib20" title="">2021</a>)</cite>, disregards the documents altogether, or even contradicts the documents. This was observed by us even in state-of-the-art LLMs like GPT-4o. VERA addresses this by splitting the response from the previous step (relevancy correction) into atomic statements similar to what is proposed in FactScore <cite class="ltx_cite ltx_citemacro_citep">(Min et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib16" title="">2023</a>)</cite> and then assessing each of them. However, this approach of using a binary score to classify each statement as adherent or non-adherent yielded sub-optimal evaluation accuracy, as some statements, while not explicitly present in the context, could be logically inferred and should therefore be classified as adherent. To improve accuracy, we propose a more nuanced classification system for atomic statements, prompting the evaluator to categorize them into three distinct classes: (1) directly derivable from the context, (2) not directly derivable but logically inferable from the context, and (3) entirely inaccurate and not grounded in the context. This classification process is guided by chain-of-thought reasoning <cite class="ltx_cite ltx_citemacro_citep">(Wei et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib23" title="">2022</a>)</cite> to maximize precision. VERA then uses reasoning to make necessary edits by correcting any incorrect statements and removing statements which are not grounded in the context.</p>
</div>
<div class="ltx_para" id="Sx3.SSx4.p2">
<p class="ltx_p" id="Sx3.SSx4.p2.1">The response adherence score is calculated by assigning a binary score to each atomic statement. If a statement is grounded in the context or deducible from the context, it is assigned a score of 1; otherwise, it receives a score of 0. The final response adherence score <math alttext="A_{\text{response}}" class="ltx_Math" display="inline" id="Sx3.SSx4.p2.1.m1.1"><semantics id="Sx3.SSx4.p2.1.m1.1a"><msub id="Sx3.SSx4.p2.1.m1.1.1" xref="Sx3.SSx4.p2.1.m1.1.1.cmml"><mi id="Sx3.SSx4.p2.1.m1.1.1.2" xref="Sx3.SSx4.p2.1.m1.1.1.2.cmml">A</mi><mtext id="Sx3.SSx4.p2.1.m1.1.1.3" xref="Sx3.SSx4.p2.1.m1.1.1.3a.cmml">response</mtext></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx4.p2.1.m1.1b"><apply id="Sx3.SSx4.p2.1.m1.1.1.cmml" xref="Sx3.SSx4.p2.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx4.p2.1.m1.1.1.1.cmml" xref="Sx3.SSx4.p2.1.m1.1.1">subscript</csymbol><ci id="Sx3.SSx4.p2.1.m1.1.1.2.cmml" xref="Sx3.SSx4.p2.1.m1.1.1.2">𝐴</ci><ci id="Sx3.SSx4.p2.1.m1.1.1.3a.cmml" xref="Sx3.SSx4.p2.1.m1.1.1.3"><mtext id="Sx3.SSx4.p2.1.m1.1.1.3.cmml" mathsize="70%" xref="Sx3.SSx4.p2.1.m1.1.1.3">response</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx4.p2.1.m1.1c">A_{\text{response}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx4.p2.1.m1.1d">italic_A start_POSTSUBSCRIPT response end_POSTSUBSCRIPT</annotation></semantics></math> is given by:</p>
</div>
<div class="ltx_para" id="Sx3.SSx4.p3">
<table class="ltx_equation ltx_eqn_table" id="Sx3.Ex3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="A_{\text{response}}=\frac{1}{n}\sum_{i=1}^{n}g(s_{i})" class="ltx_Math" display="block" id="Sx3.Ex3.m1.1"><semantics id="Sx3.Ex3.m1.1a"><mrow id="Sx3.Ex3.m1.1.1" xref="Sx3.Ex3.m1.1.1.cmml"><msub id="Sx3.Ex3.m1.1.1.3" xref="Sx3.Ex3.m1.1.1.3.cmml"><mi id="Sx3.Ex3.m1.1.1.3.2" xref="Sx3.Ex3.m1.1.1.3.2.cmml">A</mi><mtext id="Sx3.Ex3.m1.1.1.3.3" xref="Sx3.Ex3.m1.1.1.3.3a.cmml">response</mtext></msub><mo id="Sx3.Ex3.m1.1.1.2" xref="Sx3.Ex3.m1.1.1.2.cmml">=</mo><mrow id="Sx3.Ex3.m1.1.1.1" xref="Sx3.Ex3.m1.1.1.1.cmml"><mfrac id="Sx3.Ex3.m1.1.1.1.3" xref="Sx3.Ex3.m1.1.1.1.3.cmml"><mn id="Sx3.Ex3.m1.1.1.1.3.2" xref="Sx3.Ex3.m1.1.1.1.3.2.cmml">1</mn><mi id="Sx3.Ex3.m1.1.1.1.3.3" xref="Sx3.Ex3.m1.1.1.1.3.3.cmml">n</mi></mfrac><mo id="Sx3.Ex3.m1.1.1.1.2" xref="Sx3.Ex3.m1.1.1.1.2.cmml">⁢</mo><mrow id="Sx3.Ex3.m1.1.1.1.1" xref="Sx3.Ex3.m1.1.1.1.1.cmml"><munderover id="Sx3.Ex3.m1.1.1.1.1.2" xref="Sx3.Ex3.m1.1.1.1.1.2.cmml"><mo id="Sx3.Ex3.m1.1.1.1.1.2.2.2" movablelimits="false" xref="Sx3.Ex3.m1.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="Sx3.Ex3.m1.1.1.1.1.2.2.3" xref="Sx3.Ex3.m1.1.1.1.1.2.2.3.cmml"><mi id="Sx3.Ex3.m1.1.1.1.1.2.2.3.2" xref="Sx3.Ex3.m1.1.1.1.1.2.2.3.2.cmml">i</mi><mo id="Sx3.Ex3.m1.1.1.1.1.2.2.3.1" xref="Sx3.Ex3.m1.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="Sx3.Ex3.m1.1.1.1.1.2.2.3.3" xref="Sx3.Ex3.m1.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="Sx3.Ex3.m1.1.1.1.1.2.3" xref="Sx3.Ex3.m1.1.1.1.1.2.3.cmml">n</mi></munderover><mrow id="Sx3.Ex3.m1.1.1.1.1.1" xref="Sx3.Ex3.m1.1.1.1.1.1.cmml"><mi id="Sx3.Ex3.m1.1.1.1.1.1.3" xref="Sx3.Ex3.m1.1.1.1.1.1.3.cmml">g</mi><mo id="Sx3.Ex3.m1.1.1.1.1.1.2" xref="Sx3.Ex3.m1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="Sx3.Ex3.m1.1.1.1.1.1.1.1" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.cmml"><mo id="Sx3.Ex3.m1.1.1.1.1.1.1.1.2" stretchy="false" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="Sx3.Ex3.m1.1.1.1.1.1.1.1.1" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.cmml"><mi id="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.2" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.3" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.Ex3.m1.1.1.1.1.1.1.1.3" stretchy="false" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.Ex3.m1.1b"><apply id="Sx3.Ex3.m1.1.1.cmml" xref="Sx3.Ex3.m1.1.1"><eq id="Sx3.Ex3.m1.1.1.2.cmml" xref="Sx3.Ex3.m1.1.1.2"></eq><apply id="Sx3.Ex3.m1.1.1.3.cmml" xref="Sx3.Ex3.m1.1.1.3"><csymbol cd="ambiguous" id="Sx3.Ex3.m1.1.1.3.1.cmml" xref="Sx3.Ex3.m1.1.1.3">subscript</csymbol><ci id="Sx3.Ex3.m1.1.1.3.2.cmml" xref="Sx3.Ex3.m1.1.1.3.2">𝐴</ci><ci id="Sx3.Ex3.m1.1.1.3.3a.cmml" xref="Sx3.Ex3.m1.1.1.3.3"><mtext id="Sx3.Ex3.m1.1.1.3.3.cmml" mathsize="70%" xref="Sx3.Ex3.m1.1.1.3.3">response</mtext></ci></apply><apply id="Sx3.Ex3.m1.1.1.1.cmml" xref="Sx3.Ex3.m1.1.1.1"><times id="Sx3.Ex3.m1.1.1.1.2.cmml" xref="Sx3.Ex3.m1.1.1.1.2"></times><apply id="Sx3.Ex3.m1.1.1.1.3.cmml" xref="Sx3.Ex3.m1.1.1.1.3"><divide id="Sx3.Ex3.m1.1.1.1.3.1.cmml" xref="Sx3.Ex3.m1.1.1.1.3"></divide><cn id="Sx3.Ex3.m1.1.1.1.3.2.cmml" type="integer" xref="Sx3.Ex3.m1.1.1.1.3.2">1</cn><ci id="Sx3.Ex3.m1.1.1.1.3.3.cmml" xref="Sx3.Ex3.m1.1.1.1.3.3">𝑛</ci></apply><apply id="Sx3.Ex3.m1.1.1.1.1.cmml" xref="Sx3.Ex3.m1.1.1.1.1"><apply id="Sx3.Ex3.m1.1.1.1.1.2.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="Sx3.Ex3.m1.1.1.1.1.2.1.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2">superscript</csymbol><apply id="Sx3.Ex3.m1.1.1.1.1.2.2.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="Sx3.Ex3.m1.1.1.1.1.2.2.1.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2">subscript</csymbol><sum id="Sx3.Ex3.m1.1.1.1.1.2.2.2.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2.2.2"></sum><apply id="Sx3.Ex3.m1.1.1.1.1.2.2.3.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2.2.3"><eq id="Sx3.Ex3.m1.1.1.1.1.2.2.3.1.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2.2.3.1"></eq><ci id="Sx3.Ex3.m1.1.1.1.1.2.2.3.2.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2.2.3.2">𝑖</ci><cn id="Sx3.Ex3.m1.1.1.1.1.2.2.3.3.cmml" type="integer" xref="Sx3.Ex3.m1.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="Sx3.Ex3.m1.1.1.1.1.2.3.cmml" xref="Sx3.Ex3.m1.1.1.1.1.2.3">𝑛</ci></apply><apply id="Sx3.Ex3.m1.1.1.1.1.1.cmml" xref="Sx3.Ex3.m1.1.1.1.1.1"><times id="Sx3.Ex3.m1.1.1.1.1.1.2.cmml" xref="Sx3.Ex3.m1.1.1.1.1.1.2"></times><ci id="Sx3.Ex3.m1.1.1.1.1.1.3.cmml" xref="Sx3.Ex3.m1.1.1.1.1.1.3">𝑔</ci><apply id="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.cmml" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.1.cmml" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.2.cmml" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.2">𝑠</ci><ci id="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.3.cmml" xref="Sx3.Ex3.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.Ex3.m1.1c">A_{\text{response}}=\frac{1}{n}\sum_{i=1}^{n}g(s_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx3.Ex3.m1.1d">italic_A start_POSTSUBSCRIPT response end_POSTSUBSCRIPT = divide start_ARG 1 end_ARG start_ARG italic_n end_ARG ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT italic_g ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="Sx3.SSx4.p4">
<p class="ltx_p" id="Sx3.SSx4.p4.4">where <math alttext="S=\{s_{1},s_{2},\ldots,s_{n}\}" class="ltx_Math" display="inline" id="Sx3.SSx4.p4.1.m1.4"><semantics id="Sx3.SSx4.p4.1.m1.4a"><mrow id="Sx3.SSx4.p4.1.m1.4.4" xref="Sx3.SSx4.p4.1.m1.4.4.cmml"><mi id="Sx3.SSx4.p4.1.m1.4.4.5" xref="Sx3.SSx4.p4.1.m1.4.4.5.cmml">S</mi><mo id="Sx3.SSx4.p4.1.m1.4.4.4" xref="Sx3.SSx4.p4.1.m1.4.4.4.cmml">=</mo><mrow id="Sx3.SSx4.p4.1.m1.4.4.3.3" xref="Sx3.SSx4.p4.1.m1.4.4.3.4.cmml"><mo id="Sx3.SSx4.p4.1.m1.4.4.3.3.4" stretchy="false" xref="Sx3.SSx4.p4.1.m1.4.4.3.4.cmml">{</mo><msub id="Sx3.SSx4.p4.1.m1.2.2.1.1.1" xref="Sx3.SSx4.p4.1.m1.2.2.1.1.1.cmml"><mi id="Sx3.SSx4.p4.1.m1.2.2.1.1.1.2" xref="Sx3.SSx4.p4.1.m1.2.2.1.1.1.2.cmml">s</mi><mn id="Sx3.SSx4.p4.1.m1.2.2.1.1.1.3" xref="Sx3.SSx4.p4.1.m1.2.2.1.1.1.3.cmml">1</mn></msub><mo id="Sx3.SSx4.p4.1.m1.4.4.3.3.5" xref="Sx3.SSx4.p4.1.m1.4.4.3.4.cmml">,</mo><msub id="Sx3.SSx4.p4.1.m1.3.3.2.2.2" xref="Sx3.SSx4.p4.1.m1.3.3.2.2.2.cmml"><mi id="Sx3.SSx4.p4.1.m1.3.3.2.2.2.2" xref="Sx3.SSx4.p4.1.m1.3.3.2.2.2.2.cmml">s</mi><mn id="Sx3.SSx4.p4.1.m1.3.3.2.2.2.3" xref="Sx3.SSx4.p4.1.m1.3.3.2.2.2.3.cmml">2</mn></msub><mo id="Sx3.SSx4.p4.1.m1.4.4.3.3.6" xref="Sx3.SSx4.p4.1.m1.4.4.3.4.cmml">,</mo><mi id="Sx3.SSx4.p4.1.m1.1.1" mathvariant="normal" xref="Sx3.SSx4.p4.1.m1.1.1.cmml">…</mi><mo id="Sx3.SSx4.p4.1.m1.4.4.3.3.7" xref="Sx3.SSx4.p4.1.m1.4.4.3.4.cmml">,</mo><msub id="Sx3.SSx4.p4.1.m1.4.4.3.3.3" xref="Sx3.SSx4.p4.1.m1.4.4.3.3.3.cmml"><mi id="Sx3.SSx4.p4.1.m1.4.4.3.3.3.2" xref="Sx3.SSx4.p4.1.m1.4.4.3.3.3.2.cmml">s</mi><mi id="Sx3.SSx4.p4.1.m1.4.4.3.3.3.3" xref="Sx3.SSx4.p4.1.m1.4.4.3.3.3.3.cmml">n</mi></msub><mo id="Sx3.SSx4.p4.1.m1.4.4.3.3.8" stretchy="false" xref="Sx3.SSx4.p4.1.m1.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx4.p4.1.m1.4b"><apply id="Sx3.SSx4.p4.1.m1.4.4.cmml" xref="Sx3.SSx4.p4.1.m1.4.4"><eq id="Sx3.SSx4.p4.1.m1.4.4.4.cmml" xref="Sx3.SSx4.p4.1.m1.4.4.4"></eq><ci id="Sx3.SSx4.p4.1.m1.4.4.5.cmml" xref="Sx3.SSx4.p4.1.m1.4.4.5">𝑆</ci><set id="Sx3.SSx4.p4.1.m1.4.4.3.4.cmml" xref="Sx3.SSx4.p4.1.m1.4.4.3.3"><apply id="Sx3.SSx4.p4.1.m1.2.2.1.1.1.cmml" xref="Sx3.SSx4.p4.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx4.p4.1.m1.2.2.1.1.1.1.cmml" xref="Sx3.SSx4.p4.1.m1.2.2.1.1.1">subscript</csymbol><ci id="Sx3.SSx4.p4.1.m1.2.2.1.1.1.2.cmml" xref="Sx3.SSx4.p4.1.m1.2.2.1.1.1.2">𝑠</ci><cn id="Sx3.SSx4.p4.1.m1.2.2.1.1.1.3.cmml" type="integer" xref="Sx3.SSx4.p4.1.m1.2.2.1.1.1.3">1</cn></apply><apply id="Sx3.SSx4.p4.1.m1.3.3.2.2.2.cmml" xref="Sx3.SSx4.p4.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="Sx3.SSx4.p4.1.m1.3.3.2.2.2.1.cmml" xref="Sx3.SSx4.p4.1.m1.3.3.2.2.2">subscript</csymbol><ci id="Sx3.SSx4.p4.1.m1.3.3.2.2.2.2.cmml" xref="Sx3.SSx4.p4.1.m1.3.3.2.2.2.2">𝑠</ci><cn id="Sx3.SSx4.p4.1.m1.3.3.2.2.2.3.cmml" type="integer" xref="Sx3.SSx4.p4.1.m1.3.3.2.2.2.3">2</cn></apply><ci id="Sx3.SSx4.p4.1.m1.1.1.cmml" xref="Sx3.SSx4.p4.1.m1.1.1">…</ci><apply id="Sx3.SSx4.p4.1.m1.4.4.3.3.3.cmml" xref="Sx3.SSx4.p4.1.m1.4.4.3.3.3"><csymbol cd="ambiguous" id="Sx3.SSx4.p4.1.m1.4.4.3.3.3.1.cmml" xref="Sx3.SSx4.p4.1.m1.4.4.3.3.3">subscript</csymbol><ci id="Sx3.SSx4.p4.1.m1.4.4.3.3.3.2.cmml" xref="Sx3.SSx4.p4.1.m1.4.4.3.3.3.2">𝑠</ci><ci id="Sx3.SSx4.p4.1.m1.4.4.3.3.3.3.cmml" xref="Sx3.SSx4.p4.1.m1.4.4.3.3.3.3">𝑛</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx4.p4.1.m1.4c">S=\{s_{1},s_{2},\ldots,s_{n}\}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx4.p4.1.m1.4d">italic_S = { italic_s start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_s start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , … , italic_s start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT }</annotation></semantics></math> is the set of atomic statements in the response, <math alttext="g(s_{i})" class="ltx_Math" display="inline" id="Sx3.SSx4.p4.2.m2.1"><semantics id="Sx3.SSx4.p4.2.m2.1a"><mrow id="Sx3.SSx4.p4.2.m2.1.1" xref="Sx3.SSx4.p4.2.m2.1.1.cmml"><mi id="Sx3.SSx4.p4.2.m2.1.1.3" xref="Sx3.SSx4.p4.2.m2.1.1.3.cmml">g</mi><mo id="Sx3.SSx4.p4.2.m2.1.1.2" xref="Sx3.SSx4.p4.2.m2.1.1.2.cmml">⁢</mo><mrow id="Sx3.SSx4.p4.2.m2.1.1.1.1" xref="Sx3.SSx4.p4.2.m2.1.1.1.1.1.cmml"><mo id="Sx3.SSx4.p4.2.m2.1.1.1.1.2" stretchy="false" xref="Sx3.SSx4.p4.2.m2.1.1.1.1.1.cmml">(</mo><msub id="Sx3.SSx4.p4.2.m2.1.1.1.1.1" xref="Sx3.SSx4.p4.2.m2.1.1.1.1.1.cmml"><mi id="Sx3.SSx4.p4.2.m2.1.1.1.1.1.2" xref="Sx3.SSx4.p4.2.m2.1.1.1.1.1.2.cmml">s</mi><mi id="Sx3.SSx4.p4.2.m2.1.1.1.1.1.3" xref="Sx3.SSx4.p4.2.m2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx4.p4.2.m2.1.1.1.1.3" stretchy="false" xref="Sx3.SSx4.p4.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx4.p4.2.m2.1b"><apply id="Sx3.SSx4.p4.2.m2.1.1.cmml" xref="Sx3.SSx4.p4.2.m2.1.1"><times id="Sx3.SSx4.p4.2.m2.1.1.2.cmml" xref="Sx3.SSx4.p4.2.m2.1.1.2"></times><ci id="Sx3.SSx4.p4.2.m2.1.1.3.cmml" xref="Sx3.SSx4.p4.2.m2.1.1.3">𝑔</ci><apply id="Sx3.SSx4.p4.2.m2.1.1.1.1.1.cmml" xref="Sx3.SSx4.p4.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx4.p4.2.m2.1.1.1.1.1.1.cmml" xref="Sx3.SSx4.p4.2.m2.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx4.p4.2.m2.1.1.1.1.1.2.cmml" xref="Sx3.SSx4.p4.2.m2.1.1.1.1.1.2">𝑠</ci><ci id="Sx3.SSx4.p4.2.m2.1.1.1.1.1.3.cmml" xref="Sx3.SSx4.p4.2.m2.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx4.p4.2.m2.1c">g(s_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx4.p4.2.m2.1d">italic_g ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> is the binary score for each statement <math alttext="s_{i}" class="ltx_Math" display="inline" id="Sx3.SSx4.p4.3.m3.1"><semantics id="Sx3.SSx4.p4.3.m3.1a"><msub id="Sx3.SSx4.p4.3.m3.1.1" xref="Sx3.SSx4.p4.3.m3.1.1.cmml"><mi id="Sx3.SSx4.p4.3.m3.1.1.2" xref="Sx3.SSx4.p4.3.m3.1.1.2.cmml">s</mi><mi id="Sx3.SSx4.p4.3.m3.1.1.3" xref="Sx3.SSx4.p4.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx4.p4.3.m3.1b"><apply id="Sx3.SSx4.p4.3.m3.1.1.cmml" xref="Sx3.SSx4.p4.3.m3.1.1"><csymbol cd="ambiguous" id="Sx3.SSx4.p4.3.m3.1.1.1.cmml" xref="Sx3.SSx4.p4.3.m3.1.1">subscript</csymbol><ci id="Sx3.SSx4.p4.3.m3.1.1.2.cmml" xref="Sx3.SSx4.p4.3.m3.1.1.2">𝑠</ci><ci id="Sx3.SSx4.p4.3.m3.1.1.3.cmml" xref="Sx3.SSx4.p4.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx4.p4.3.m3.1c">s_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx4.p4.3.m3.1d">italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> (1 if grounded and accurate, 0 otherwise), and <math alttext="n" class="ltx_Math" display="inline" id="Sx3.SSx4.p4.4.m4.1"><semantics id="Sx3.SSx4.p4.4.m4.1a"><mi id="Sx3.SSx4.p4.4.m4.1.1" xref="Sx3.SSx4.p4.4.m4.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx4.p4.4.m4.1b"><ci id="Sx3.SSx4.p4.4.m4.1.1.cmml" xref="Sx3.SSx4.p4.4.m4.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx4.p4.4.m4.1c">n</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx4.p4.4.m4.1d">italic_n</annotation></semantics></math> is the total number of atomic statements in the response. This score reflects the proportion of the initial response that is accurate and adherent to the context.</p>
</div>
</section>
</section>
<section class="ltx_section" id="Sx4">
<h2 class="ltx_title ltx_title_section">Experiments</h2>
<section class="ltx_subsection" id="Sx4.SSx1">
<h3 class="ltx_title ltx_title_subsection">Tasks and Datasets</h3>
<div class="ltx_para" id="Sx4.SSx1.p1">
<p class="ltx_p" id="Sx4.SSx1.p1.1">We rigorously assess VERA’s effectiveness across various datasets and downstream tasks <cite class="ltx_cite ltx_citemacro_citep">(Kucharavy <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib13" title="">2024</a>)</cite>. Our tests are designed to establish a fair baseline and accurately reflect real-world scenarios.</p>
</div>
<section class="ltx_subsubsection" id="Sx4.SSx1.SSSx1">
<h4 class="ltx_title ltx_title_subsubsection">SQuAD-2.0 Dataset</h4>
<div class="ltx_para" id="Sx4.SSx1.SSSx1.p1">
<p class="ltx_p" id="Sx4.SSx1.SSSx1.p1.1">Stanford Question Answering Dataset (SQuAD) <cite class="ltx_cite ltx_citemacro_citep">(Rajpurkar et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib18" title="">2016</a>)</cite> is a reading comprehension dataset, consisting of questions posed by crowdworkers on a set of Wikipedia articles, where the answer to every question is a segment of text, or span, from the corresponding reading passage, or the question might be unanswerable. This dataset is challenging as there are questions that might not be answerable from the provided context.</p>
</div>
</section>
<section class="ltx_subsubsection" id="Sx4.SSx1.SSSx2">
<h4 class="ltx_title ltx_title_subsubsection">DROP Dataset</h4>
<div class="ltx_para" id="Sx4.SSx1.SSSx2.p1">
<p class="ltx_p" id="Sx4.SSx1.SSSx2.p1.1">The DROP dataset <cite class="ltx_cite ltx_citemacro_citep">(Dua et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib4" title="">2019</a>)</cite> serves as a reading comprehension benchmark designed for Discrete Reasoning Over Paragraphs. Comprising 96,000 questions, this dataset was adversarially crowd-sourced to challenge systems in a variety of tasks. To successfully navigate DROP, a system must interpret references within a question—potentially across multiple parts of the input—and carry out discrete operations such as addition, counting, or sorting. These tasks demand a thorough understanding of the paragraph’s content.</p>
</div>
</section>
<section class="ltx_subsubsection" id="Sx4.SSx1.SSSx3">
<h4 class="ltx_title ltx_title_subsubsection">Real World Downstream Tasks</h4>
<div class="ltx_para" id="Sx4.SSx1.SSSx3.p1">
<p class="ltx_p" id="Sx4.SSx1.SSSx3.p1.1">To evaluate the effectiveness of VERA on real-world downstream tasks, we compiled a set of three documents representing diverse use cases of a RAG based LLM. These documents include:</p>
</div>
<div class="ltx_para" id="Sx4.SSx1.SSSx3.p2">
<ol class="ltx_enumerate" id="Sx4.I3">
<li class="ltx_item" id="Sx4.I3.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="Sx4.I3.i1.p1">
<p class="ltx_p" id="Sx4.I3.i1.p1.1"><span class="ltx_text ltx_font_bold" id="Sx4.I3.i1.p1.1.1">World War II Wikipedia Page:</span> The Wikipedia article on World War II presents a challenging evaluation, testing the model’s capacity to adhere to the provided context without deviating due to its pre-existing knowledge from prior training.</p>
</div>
</li>
<li class="ltx_item" id="Sx4.I3.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="Sx4.I3.i2.p1">
<p class="ltx_p" id="Sx4.I3.i2.p1.1"><span class="ltx_text ltx_font_bold" id="Sx4.I3.i2.p1.1.1">Apple 10-K Report:</span> The 2023 fiscal year Form 10-K for Apple was chosen to assess the RAG system’s ability to handle numerical and financial data <cite class="ltx_cite ltx_citemacro_citep">(Setty et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib19" title="">2024</a>)</cite>, reflecting a common application of RAG models in processing and interpreting financial documents.</p>
</div>
</li>
</ol>
</div>
</section>
</section>
<section class="ltx_subsection" id="Sx4.SSx2">
<h3 class="ltx_title ltx_title_subsection">Baselines</h3>
<div class="ltx_para" id="Sx4.SSx2.p1">
<p class="ltx_p" id="Sx4.SSx2.p1.1">We assess publicly available pre-trained language models such as Mistral-7B-instruct-v0.1 <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib10" title="">2023</a>)</cite>, GPT-3.5-turbo <cite class="ltx_cite ltx_citemacro_citep">(Brown <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib2" title="">2020</a>)</cite>, and GPT-4o <cite class="ltx_cite ltx_citemacro_citep">(OpenAI et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib17" title="">2024</a>)</cite> to demonstrate VERA’s effectiveness across different model sizes. Mistral-7B-instruct-v0.1 represents a smaller model, while GPT-4o exemplifies a state-of-the-art model. Additionally, we compare these with the 7B Self-Rag <cite class="ltx_cite ltx_citemacro_citep">(Asai et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib1" title="">2023</a>)</cite> <cite class="ltx_cite ltx_citemacro_citep">(Touvron et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib22" title="">2023</a>)</cite> model available on HuggingFace.</p>
</div>
<div class="ltx_para" id="Sx4.SSx2.p2">
<p class="ltx_p" id="Sx4.SSx2.p2.1">For downstream tasks, we utilize FAISS <cite class="ltx_cite ltx_citemacro_citep">(Douze et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib3" title="">2024</a>)</cite> as a vector store and use similarity search retrieval, setting the chunk size to 512 tokens and chunk overlap to 25 tokens. To ensure consistency, GPT-4o is used as the evaluator model for VERA in all tests. The answers generated by VERA are further evaluated using GPT-4o to obtain post-enhancement scores. The questions to create a QA dataset from the given documents were created using the ragas library <cite class="ltx_cite ltx_citemacro_citep">(Es et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib7" title="">2023</a>)</cite>. There was an equal proportion of questions testing reasoning abilities and questions that required multiple contexts to answer.</p>
</div>
<div class="ltx_para" id="Sx4.SSx2.p3">
<p class="ltx_p" id="Sx4.SSx2.p3.1">The SQuAD-2.0 and DROP datasets do not require a retriever system, as they provide the context directly within the dataset itself.</p>
</div>
</section>
</section>
<section class="ltx_section" id="Sx5">
<h2 class="ltx_title ltx_title_section">Results</h2>
<figure class="ltx_table" id="Sx5.T1">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="Sx5.T1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="Sx5.T1.1.1.1">
<th class="ltx_td ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T1.1.1.1.1"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.1.1.2.1">SQuAD2.0</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.1.1.3.1">DROP</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx5.T1.1.2.1">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T1.1.2.1.1"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.2.1.1.1">mistral-7B-instruct-v0.1</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.2.1.2">0.416</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.2.1.3">0.432</td>
</tr>
<tr class="ltx_tr" id="Sx5.T1.1.3.2">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T1.1.3.2.1"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.3.2.1.1">gpt-3.5-turbo</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.3.2.2">0.490</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.3.2.3">0.696</td>
</tr>
<tr class="ltx_tr" id="Sx5.T1.1.4.3">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T1.1.4.3.1"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.4.3.1.1">gpt-4o</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.4.3.2">0.582</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.4.3.3">0.816</td>
</tr>
<tr class="ltx_tr" id="Sx5.T1.1.5.4">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T1.1.5.4.1"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.5.4.1.1">selfrag 7B</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.5.4.2">0.302</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.5.4.3">0.234</td>
</tr>
<tr class="ltx_tr" id="Sx5.T1.1.6.5">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T1.1.6.5.1"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.6.5.1.1">mistral-7B-instruct-v0.1 + VERA</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.6.5.2">0.582</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.6.5.3">0.752</td>
</tr>
<tr class="ltx_tr" id="Sx5.T1.1.7.6">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T1.1.7.6.1"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.7.6.1.1">gpt-3.5-turbo + VERA</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.7.6.2">0.640</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T1.1.7.6.3">0.764</td>
</tr>
<tr class="ltx_tr" id="Sx5.T1.1.8.7">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T1.1.8.7.1"><span class="ltx_text ltx_font_bold" id="Sx5.T1.1.8.7.1.1">gpt-4o + VERA</span></td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="Sx5.T1.1.8.7.2">0.690</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="Sx5.T1.1.8.7.3">0.854</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>SQuAD2.0 and DROP Results</figcaption>
</figure>
<figure class="ltx_table" id="Sx5.T2">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="Sx5.T2.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="Sx5.T2.1.1.1">
<th class="ltx_td ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T2.1.1.1.1"></th>
<th class="ltx_td ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T2.1.1.1.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T2.1.1.1.3"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.1.1.3.1">mistral-7B-instruct-v0.1</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T2.1.1.1.4"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.1.1.4.1">gpt-3.5-turbo</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T2.1.1.1.5"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.1.1.5.1">gpt-4o</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx5.T2.1.2.1">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T2.1.2.1.1" rowspan="3"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.2.1.1.1">Without VERA</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T2.1.2.1.2"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.2.1.2.1">Response Adherence</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T2.1.2.1.3">0.740</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T2.1.2.1.4">0.862</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T2.1.2.1.5">0.906</td>
</tr>
<tr class="ltx_tr" id="Sx5.T2.1.3.2">
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.3.2.1"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.3.2.1.1">Response Relevance</span></td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.3.2.2">0.761</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.3.2.3">0.917</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.3.2.4">0.920</td>
</tr>
<tr class="ltx_tr" id="Sx5.T2.1.4.3">
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.4.3.1"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.4.3.1.1">Context Relevance</span></td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.4.3.2">0.311</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.4.3.3">0.308</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.4.3.4">0.309</td>
</tr>
<tr class="ltx_tr" id="Sx5.T2.1.5.4">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T2.1.5.4.1" rowspan="3"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.5.4.1.1">With VERA</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T2.1.5.4.2"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.5.4.2.1">Response Adherence</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T2.1.5.4.3">0.911</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T2.1.5.4.4"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.5.4.4.1">0.970</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T2.1.5.4.5">0.964</td>
</tr>
<tr class="ltx_tr" id="Sx5.T2.1.6.5">
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.6.5.1"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.6.5.1.1">Response Relevance</span></td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.6.5.2">0.927</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.6.5.3"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.6.5.3.1">0.982</span></td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T2.1.6.5.4">0.944</td>
</tr>
<tr class="ltx_tr" id="Sx5.T2.1.7.6">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="Sx5.T2.1.7.6.1"><span class="ltx_text ltx_font_bold" id="Sx5.T2.1.7.6.1.1">Context Relevance</span></td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="Sx5.T2.1.7.6.2">0.876</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="Sx5.T2.1.7.6.3">0.883</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="Sx5.T2.1.7.6.4">0.872</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Comparison of models with and without VERA - WWII Wikipedia</figcaption>
</figure>
<figure class="ltx_table" id="Sx5.T3">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="Sx5.T3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="Sx5.T3.1.1.1">
<th class="ltx_td ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T3.1.1.1.1"></th>
<th class="ltx_td ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T3.1.1.1.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T3.1.1.1.3"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.1.1.3.1">mistral-7B-instruct-v0.1</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T3.1.1.1.4"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.1.1.4.1">gpt-3.5-turbo</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx5.T3.1.1.1.5"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.1.1.5.1">gpt-4o</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx5.T3.1.2.1">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T3.1.2.1.1" rowspan="3"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.2.1.1.1">Without VERA</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T3.1.2.1.2"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.2.1.2.1">Response Adherence</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T3.1.2.1.3">0.828</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T3.1.2.1.4">0.900</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T3.1.2.1.5">0.943</td>
</tr>
<tr class="ltx_tr" id="Sx5.T3.1.3.2">
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.3.2.1"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.3.2.1.1">Response Relevance</span></td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.3.2.2">0.716</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.3.2.3">0.935</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.3.2.4">0.943</td>
</tr>
<tr class="ltx_tr" id="Sx5.T3.1.4.3">
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.4.3.1"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.4.3.1.1">Context Relevance</span></td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.4.3.2">0.412</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.4.3.3">0.427</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.4.3.4">0.396</td>
</tr>
<tr class="ltx_tr" id="Sx5.T3.1.5.4">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="Sx5.T3.1.5.4.1" rowspan="3"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.5.4.1.1">With VERA</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T3.1.5.4.2"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.5.4.2.1">Response Adherence</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T3.1.5.4.3">0.896</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T3.1.5.4.4">0.950</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="Sx5.T3.1.5.4.5"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.5.4.5.1">0.971</span></td>
</tr>
<tr class="ltx_tr" id="Sx5.T3.1.6.5">
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.6.5.1"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.6.5.1.1">Response Relevance</span></td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.6.5.2">0.945</td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.6.5.3"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.6.5.3.1">0.984</span></td>
<td class="ltx_td ltx_align_left ltx_border_r" id="Sx5.T3.1.6.5.4">0.972</td>
</tr>
<tr class="ltx_tr" id="Sx5.T3.1.7.6">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="Sx5.T3.1.7.6.1"><span class="ltx_text ltx_font_bold" id="Sx5.T3.1.7.6.1.1">Context Relevance</span></td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="Sx5.T3.1.7.6.2">0.895</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="Sx5.T3.1.7.6.3">0.871</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r" id="Sx5.T3.1.7.6.4">0.881</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Comparison of models with and without VERA - Apple 10k Report</figcaption>
</figure>
<figure class="ltx_figure" id="Sx5.F7">
<p class="ltx_p ltx_align_center" id="Sx5.F7.1"><span class="ltx_text ltx_framed ltx_framed_rectangle" id="Sx5.F7.1.1" style="border-color: #000000;">
<img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="369" id="Sx5.F7.1.1.g1" src="extracted/5863653/figures/ww2.png" width="598"/>
</span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>WWII Wikipedia Adherence Scores</figcaption>
</figure>
<figure class="ltx_figure" id="Sx5.F8">
<p class="ltx_p ltx_align_center" id="Sx5.F8.1"><span class="ltx_text ltx_framed ltx_framed_rectangle" id="Sx5.F8.1.1" style="border-color: #000000;">
<img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="369" id="Sx5.F8.1.1.g1" src="extracted/5863653/figures/drop.png" width="598"/>
</span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8: </span>DROP Accuracy</figcaption>
</figure>
<div class="ltx_para" id="Sx5.p1">
<p class="ltx_p" id="Sx5.p1.1">We observed a substantial improvement in accuracy for both the SQuAD2.0 and DROP datasets (Table 1) when employing VERA. Specifically, Mistral-7B-instruct-v0.1 exhibited a 20% increase in accuracy on the SQuAD2.0 dataset and a 15% increase on the DROP dataset. Additionally, VERA enhanced the performance of GPT-4o by 5% on SQuAD2.0 and 10% on DROP. These results underscore VERA’s effectiveness in enhancing the performance of large language models on tasks that demand advanced comprehension capabilities.</p>
</div>
<div class="ltx_para" id="Sx5.p2">
<p class="ltx_p" id="Sx5.p2.1">The results of downstream tasks demonstrated a significant increase in adherence and relevance scores for smaller models like Mistral-7B-instruct-v0.1. Notable improvements were also observed in larger models such as GPT-4o and GPT-3.5-turbo. Specifically, Mistral-7B-instruct-v0.1 exhibited an increase in Response Adherence by up to 18.7% (Table 2) and an increase in Response Relevance by up to 17.9% (Table 2) when using VERA.</p>
</div>
<div class="ltx_para" id="Sx5.p3">
<p class="ltx_p" id="Sx5.p3.1">The improvements in Response Adherence and Relevance for GPT-4o indicate that VERA can be effectively used for self-improvement <cite class="ltx_cite ltx_citemacro_citep">(Huang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib9" title="">2022</a>)</cite>, as the evaluator model employed was also GPT-4o. This finding is significant because it demonstrates that VERA’s performance enhancements are not solely attributable to the use of GPT-4o but rather to the systematic evaluation and refinement processes implemented by VERA.</p>
</div>
<div class="ltx_para" id="Sx5.p4">
<p class="ltx_p" id="Sx5.p4.1">In all the downstream tasks, the initial Context Relevance was below 0.45. This can be attributed to the larger chunk size of 512 tokens <cite class="ltx_cite ltx_citemacro_citep">(Eibich, Nagpal, and Fred-Ojala <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib6" title="">2024</a>)</cite>, of which only approximately 30% to 45% of the information was relevant to the context. While Context Relevance is not directly dependent on the LLM used, we still observed variations in the scores due to the stochastic nature of the LLM serving as the evaluator <cite class="ltx_cite ltx_citemacro_citep">(Sun et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.15364v1#bib.bib21" title="">2024</a>)</cite>. Despite this inherent variability, the use of VERA led to a clear and consistent increase in Context Relevance across all experiments.</p>
</div>
</section>
<section class="ltx_section" id="Sx6">
<h2 class="ltx_title ltx_title_section">Conclusion</h2>
<div class="ltx_para" id="Sx6.p1">
<p class="ltx_p" id="Sx6.p1.1">In this work, we presented VERA, a novel system designed to address the limitations of Retrieval-Augmented Generation (RAG) in enhancing Large Language Models (LLMs). By incorporating an evaluator-cum-enhancer LLM, VERA significantly improves the relevance, adherence, and overall quality of responses. Our approach involves a multi-step process that determines the necessity of retrieval, evaluates and refines retrieved documents, and rigorously assesses and corrects the generated responses</p>
</div>
<div class="ltx_para" id="Sx6.p2">
<p class="ltx_p" id="Sx6.p2.1">VERA’s method of breaking down responses into atomic facts and ensuring each statement’s grounding in the retrieved context leads to higher fidelity and relevance in the final outputs. Our experimental results demonstrate that VERA increases adherence and relevance significantly for both smaller LLMs like Mistral 7B instruct v0.1 and larger models like GPT-4o, showcasing its versatility and effectiveness across different model scales.</p>
</div>
<div class="ltx_para" id="Sx6.p3">
<p class="ltx_p" id="Sx6.p3.1">The improvements brought by VERA highlight its potential in applications where accurate and reliable information generation is crucial. By mitigating hallucinations and refining the retrieval and response process, VERA paves the way for more trustworthy and contextually appropriate LLM outputs, advancing the state-of-the-art in retrieval-augmented language modeling.</p>
</div>
</section>
<section class="ltx_section" id="Sx7">
<h2 class="ltx_title ltx_title_section">Limitations and Future Work</h2>
<div class="ltx_para" id="Sx7.p1">
<p class="ltx_p" id="Sx7.p1.1">VERA demonstrates strong capabilities in understanding semantic changes between the response and context, avoiding unnecessary penalties for semantically equivalent statements (e.g., ”World War II is a deeply engraved event in history” and ”World War II is an important event in history”). However, during our experimentation, we observed that smaller models like Mistral-7B-instruct or Llama3 8B, when used as evaluators instead of GPT-4o, struggled to handle such semantic nuances effectively. This limitation could potentially be addressed by improving the few-shot prompting technique, thereby enhancing evaluation performance with smaller models and making the method more cost-efficient.</p>
</div>
<div class="ltx_para" id="Sx7.p2">
<p class="ltx_p" id="Sx7.p2.1">Due to the stochastic nature of the evaluator LLM, the splitting of the response into atomic statements may vary slightly with each evaluation, resulting in minor differences in scores. Although this limitation is largely mitigated by using a large dataset in our experiments, it can still cause minor variations in scores for individual evaluations.</p>
</div>
<div class="ltx_para" id="Sx7.p3">
<p class="ltx_p" id="Sx7.p3.1">Since VERA necessitates LLM evaluation at each step of the process, it might not be suitable for real-time applications. This limitation could potentially be addressed in the future by combining multiple evaluation calls into a single step, thereby making the process more streamlined and time-efficient.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Asai et al. (2023)</span>
<span class="ltx_bibblock">
Asai, A.; Wu, Z.; Wang, Y.; Sil, A.; and Hajishirzi, H. 2023.

</span>
<span class="ltx_bibblock">Self-rag: Learning to retrieve, generate, and critique through self-reflection.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">arXiv preprint arXiv:2310.11511</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Brown (2020)</span>
<span class="ltx_bibblock">
Brown, T. B. 2020.

</span>
<span class="ltx_bibblock">Language models are few-shot learners.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv preprint ArXiv:2005.14165</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Douze et al. (2024)</span>
<span class="ltx_bibblock">
Douze, M.; Guzhva, A.; Deng, C.; Johnson, J.; Szilvasy, G.; Mazaré, P.-E.; Lomeli, M.; Hosseini, L.; and Jégou, H. 2024.

</span>
<span class="ltx_bibblock">The faiss library.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">arXiv preprint arXiv:2401.08281</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dua et al. (2019)</span>
<span class="ltx_bibblock">
Dua, D.; Wang, Y.; Dasigi, P.; Stanovsky, G.; Singh, S.; and Gardner, M. 2019.

</span>
<span class="ltx_bibblock">DROP: A reading comprehension benchmark requiring discrete reasoning over paragraphs.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">arXiv preprint arXiv:1903.00161</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dziri et al. (2022)</span>
<span class="ltx_bibblock">
Dziri, N.; Milton, S.; Yu, M.; Zaiane, O.; and Reddy, S. 2022.

</span>
<span class="ltx_bibblock">On the origin of hallucinations in conversational models: Is it the datasets or the models?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">arXiv preprint arXiv:2204.07931</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Eibich, Nagpal, and Fred-Ojala (2024)</span>
<span class="ltx_bibblock">
Eibich, M.; Nagpal, S.; and Fred-Ojala, A. 2024.

</span>
<span class="ltx_bibblock">ARAGOG: Advanced RAG Output Grading.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">arXiv preprint arXiv:2404.01037</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Es et al. (2023)</span>
<span class="ltx_bibblock">
Es, S.; James, J.; Espinosa-Anke, L.; and Schockaert, S. 2023.

</span>
<span class="ltx_bibblock">Ragas: Automated evaluation of retrieval augmented generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">arXiv preprint arXiv:2309.15217</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2023)</span>
<span class="ltx_bibblock">
Gao, L.; Dai, Z.; Pasupat, P.; Chen, A.; Chaganty, A. T.; Fan, Y.; Zhao, V. Y.; Lao, N.; Lee, H.; Juan, D.-C.; and Guu, K. 2023.

</span>
<span class="ltx_bibblock">RARR: Researching and Revising What Language Models Say, Using Language Models.

</span>
<span class="ltx_bibblock">arXiv:2210.08726.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2022)</span>
<span class="ltx_bibblock">
Huang, J.; Gu, S. S.; Hou, L.; Wu, Y.; Wang, X.; Yu, H.; and Han, J. 2022.

</span>
<span class="ltx_bibblock">Large language models can self-improve.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">arXiv preprint arXiv:2210.11610</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023)</span>
<span class="ltx_bibblock">
Jiang, A. Q.; Sablayrolles, A.; Mensch, A.; Bamford, C.; Chaplot, D. S.; Casas, D. d. l.; Bressand, F.; Lengyel, G.; Lample, G.; Saulnier, L.; et al. 2023.

</span>
<span class="ltx_bibblock">Mistral 7B.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">arXiv preprint arXiv:2310.06825</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Khandelwal et al. (2019)</span>
<span class="ltx_bibblock">
Khandelwal, U.; Levy, O.; Jurafsky, D.; Zettlemoyer, L.; and Lewis, M. 2019.

</span>
<span class="ltx_bibblock">Generalization through memorization: Nearest neighbor language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">arXiv preprint arXiv:1911.00172</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Krishna, Roy, and Iyyer (2021)</span>
<span class="ltx_bibblock">
Krishna, K.; Roy, A.; and Iyyer, M. 2021.

</span>
<span class="ltx_bibblock">Hurdles to progress in long-form question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">arXiv preprint arXiv:2103.06332</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kucharavy (2024)</span>
<span class="ltx_bibblock">
Kucharavy, A. 2024.

</span>
<span class="ltx_bibblock">Adapting LLMs to Downstream Applications.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Large Language Models in Cybersecurity: Threats, Exposure and Mitigation</em>, 19–29. Springer Nature Switzerland Cham.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Lewis, P.; Perez, E.; Piktus, A.; Petroni, F.; Karpukhin, V.; Goyal, N.; Küttler, H.; Lewis, M.; Yih, W.-t.; Rocktäschel, T.; Riedel, S.; and Kiela, D. 2020.

</span>
<span class="ltx_bibblock">Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks.

</span>
<span class="ltx_bibblock">In Larochelle, H.; Ranzato, M.; Hadsell, R.; Balcan, M.; and Lin, H., eds., <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Advances in Neural Information Processing Systems</em>, volume 33, 9459–9474. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Longpre et al. (2021)</span>
<span class="ltx_bibblock">
Longpre, S.; Perisetla, K.; Chen, A.; Ramesh, N.; DuBois, C.; and Singh, S. 2021.

</span>
<span class="ltx_bibblock">Entity-based knowledge conflicts in question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">arXiv preprint arXiv:2109.05052</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Min et al. (2023)</span>
<span class="ltx_bibblock">
Min, S.; Krishna, K.; Lyu, X.; Lewis, M.; Yih, W.-t.; Koh, P. W.; Iyyer, M.; Zettlemoyer, L.; and Hajishirzi, H. 2023.

</span>
<span class="ltx_bibblock">Factscore: Fine-grained atomic evaluation of factual precision in long form text generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:2305.14251</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI et al. (2024)</span>
<span class="ltx_bibblock">
OpenAI; Achiam, J.; Adler, S.; Agarwal, S.; Ahmad, L.; Akkaya, I.; Aleman, F. L.; Almeida, D.; Altenschmidt, J.; Altman, S.; Anadkat, S.; Avila, R.; Babuschkin, I.; Balaji, S.; Balcom, V.; Baltescu, P.; Bao, H.; Bavarian, M.; Belgum, J.; Bello, I.; Berdine, J.; Bernadett-Shapiro, G.; Berner, C.; Bogdonoff, L.; Boiko, O.; Boyd, M.; Brakman, A.-L.; Brockman, G.; Brooks, T.; Brundage, M.; Button, K.; Cai, T.; Campbell, R.; Cann, A.; Carey, B.; Carlson, C.; Carmichael, R.; Chan, B.; Chang, C.; Chantzis, F.; Chen, D.; Chen, S.; Chen, R.; Chen, J.; Chen, M.; Chess, B.; Cho, C.; Chu, C.; Chung, H. W.; Cummings, D.; Currier, J.; Dai, Y.; Decareaux, C.; Degry, T.; Deutsch, N.; Deville, D.; Dhar, A.; Dohan, D.; Dowling, S.; Dunning, S.; Ecoffet, A.; Eleti, A.; Eloundou, T.; Farhi, D.; Fedus, L.; Felix, N.; Fishman, S. P.; Forte, J.; Fulford, I.; Gao, L.; Georges, E.; Gibson, C.; Goel, V.; Gogineni, T.; Goh, G.; Gontijo-Lopes, R.; Gordon, J.; Grafstein, M.; Gray, S.; Greene, R.; Gross, J.; Gu, S. S.; Guo, Y.; Hallacy,
C.; Han, J.; Harris, J.; He, Y.; Heaton, M.; Heidecke, J.; Hesse, C.; Hickey, A.; Hickey, W.; Hoeschele, P.; Houghton, B.; Hsu, K.; Hu, S.; Hu, X.; Huizinga, J.; Jain, S.; Jain, S.; Jang, J.; Jiang, A.; Jiang, R.; Jin, H.; Jin, D.; Jomoto, S.; Jonn, B.; Jun, H.; Kaftan, T.; Łukasz Kaiser; Kamali, A.; Kanitscheider, I.; Keskar, N. S.; Khan, T.; Kilpatrick, L.; Kim, J. W.; Kim, C.; Kim, Y.; Kirchner, J. H.; Kiros, J.; Knight, M.; Kokotajlo, D.; Łukasz Kondraciuk; Kondrich, A.; Konstantinidis, A.; Kosic, K.; Krueger, G.; Kuo, V.; Lampe, M.; Lan, I.; Lee, T.; Leike, J.; Leung, J.; Levy, D.; Li, C. M.; Lim, R.; Lin, M.; Lin, S.; Litwin, M.; Lopez, T.; Lowe, R.; Lue, P.; Makanju, A.; Malfacini, K.; Manning, S.; Markov, T.; Markovski, Y.; Martin, B.; Mayer, K.; Mayne, A.; McGrew, B.; McKinney, S. M.; McLeavey, C.; McMillan, P.; McNeil, J.; Medina, D.; Mehta, A.; Menick, J.; Metz, L.; Mishchenko, A.; Mishkin, P.; Monaco, V.; Morikawa, E.; Mossing, D.; Mu, T.; Murati, M.; Murk, O.; Mély, D.; Nair, A.; Nakano, R.;
Nayak, R.; Neelakantan, A.; Ngo, R.; Noh, H.; Ouyang, L.; O’Keefe, C.; Pachocki, J.; Paino, A.; Palermo, J.; Pantuliano, A.; Parascandolo, G.; Parish, J.; Parparita, E.; Passos, A.; Pavlov, M.; Peng, A.; Perelman, A.; de Avila Belbute Peres, F.; Petrov, M.; de Oliveira Pinto, H. P.; Michael; Pokorny; Pokrass, M.; Pong, V. H.; Powell, T.; Power, A.; Power, B.; Proehl, E.; Puri, R.; Radford, A.; Rae, J.; Ramesh, A.; Raymond, C.; Real, F.; Rimbach, K.; Ross, C.; Rotsted, B.; Roussez, H.; Ryder, N.; Saltarelli, M.; Sanders, T.; Santurkar, S.; Sastry, G.; Schmidt, H.; Schnurr, D.; Schulman, J.; Selsam, D.; Sheppard, K.; Sherbakov, T.; Shieh, J.; Shoker, S.; Shyam, P.; Sidor, S.; Sigler, E.; Simens, M.; Sitkin, J.; Slama, K.; Sohl, I.; Sokolowsky, B.; Song, Y.; Staudacher, N.; Such, F. P.; Summers, N.; Sutskever, I.; Tang, J.; Tezak, N.; Thompson, M. B.; Tillet, P.; Tootoonchian, A.; Tseng, E.; Tuggle, P.; Turley, N.; Tworek, J.; Uribe, J. F. C.; Vallone, A.; Vijayvergiya, A.; Voss, C.; Wainwright, C.; Wang,
J. J.; Wang, A.; Wang, B.; Ward, J.; Wei, J.; Weinmann, C.; Welihinda, A.; Welinder, P.; Weng, J.; Weng, L.; Wiethoff, M.; Willner, D.; Winter, C.; Wolrich, S.; Wong, H.; Workman, L.; Wu, S.; Wu, J.; Wu, M.; Xiao, K.; Xu, T.; Yoo, S.; Yu, K.; Yuan, Q.; Zaremba, W.; Zellers, R.; Zhang, C.; Zhang, M.; Zhao, S.; Zheng, T.; Zhuang, J.; Zhuk, W.; and Zoph, B. 2024.

</span>
<span class="ltx_bibblock">GPT-4 Technical Report.

</span>
<span class="ltx_bibblock">arXiv:2303.08774.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rajpurkar et al. (2016)</span>
<span class="ltx_bibblock">
Rajpurkar, P.; Zhang, J.; Lopyrev, K.; and Liang, P. 2016.

</span>
<span class="ltx_bibblock">Squad: 100,000+ questions for machine comprehension of text.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">arXiv preprint arXiv:1606.05250</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Setty et al. (2024)</span>
<span class="ltx_bibblock">
Setty, S.; Jijo, K.; Chung, E.; and Vidra, N. 2024.

</span>
<span class="ltx_bibblock">Improving Retrieval for RAG based Question Answering Models on Financial Documents.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">arXiv preprint arXiv:2404.07221</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shuster et al. (2021)</span>
<span class="ltx_bibblock">
Shuster, K.; Poff, S.; Chen, M.; Kiela, D.; and Weston, J. 2021.

</span>
<span class="ltx_bibblock">Retrieval augmentation reduces hallucination in conversation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">arXiv preprint arXiv:2104.07567</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sun et al. (2024)</span>
<span class="ltx_bibblock">
Sun, K.; Wang, R.; Liu, H.; and Søgaard, A. 2024.

</span>
<span class="ltx_bibblock">Comprehensive Reassessment of Large-Scale Evaluation Outcomes in LLMs: A Multifaceted Statistical Approach.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">arXiv preprint arXiv:2403.15250</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et al. (2023)</span>
<span class="ltx_bibblock">
Touvron, H.; Martin, L.; Stone, K.; Albert, P.; Almahairi, A.; Babaei, Y.; Bashlykov, N.; Batra, S.; Bhargava, P.; Bhosale, S.; Bikel, D.; Blecher, L.; Ferrer, C. C.; Chen, M.; Cucurull, G.; Esiobu, D.; Fernandes, J.; Fu, J.; Fu, W.; Fuller, B.; Gao, C.; Goswami, V.; Goyal, N.; Hartshorn, A.; Hosseini, S.; Hou, R.; Inan, H.; Kardas, M.; Kerkez, V.; Khabsa, M.; Kloumann, I.; Korenev, A.; Koura, P. S.; Lachaux, M.-A.; Lavril, T.; Lee, J.; Liskovich, D.; Lu, Y.; Mao, Y.; Martinet, X.; Mihaylov, T.; Mishra, P.; Molybog, I.; Nie, Y.; Poulton, A.; Reizenstein, J.; Rungta, R.; Saladi, K.; Schelten, A.; Silva, R.; Smith, E. M.; Subramanian, R.; Tan, X. E.; Tang, B.; Taylor, R.; Williams, A.; Kuan, J. X.; Xu, P.; Yan, Z.; Zarov, I.; Zhang, Y.; Fan, A.; Kambadur, M.; Narang, S.; Rodriguez, A.; Stojnic, R.; Edunov, S.; and Scialom, T. 2023.

</span>
<span class="ltx_bibblock">Llama 2: Open Foundation and Fine-Tuned Chat Models.

</span>
<span class="ltx_bibblock">arXiv:2307.09288.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2022)</span>
<span class="ltx_bibblock">
Wei, J.; Wang, X.; Schuurmans, D.; Bosma, M.; Xia, F.; Chi, E.; Le, Q. V.; Zhou, D.; et al. 2022.

</span>
<span class="ltx_bibblock">Chain-of-thought prompting elicits reasoning in large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Advances in neural information processing systems</em>, 35: 24824–24837.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yan et al. (2024)</span>
<span class="ltx_bibblock">
Yan, S.-Q.; Gu, J.-C.; Zhu, Y.; and Ling, Z.-H. 2024.

</span>
<span class="ltx_bibblock">Corrective retrieval augmented generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">arXiv preprint arXiv:2401.15884</em>.

</span>
</li>
</ul>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Wed Sep 18 15:54:33 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
