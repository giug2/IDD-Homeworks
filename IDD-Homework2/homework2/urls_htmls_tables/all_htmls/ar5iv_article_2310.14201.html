<article class="ltx_document ltx_authors_1line">
 <h1 class="ltx_title ltx_title_document">
  Prompt Engineering Through the Lens of Optimal Control
 </h1>
 <div class="ltx_authors">
  <span class="ltx_creator ltx_role_author">
   <span class="ltx_personname">
    Yifan Luo,
    <span class="ltx_note ltx_role_footnote" id="footnotex1">
     <sup class="ltx_note_mark">
      1
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        1
       </sup>
       <span class="ltx_tag ltx_tag_note">
        1
       </span>
       School of Mathematical Science, Peking University.
       <br class="ltx_break"/>
       (luoyf@pku.edu.cn; 2201110049@pku.edu.cn; 1900010740@pku.edu.cn)
      </span>
     </span>
    </span>
    <span class="ltx_note ltx_role_footnote" id="footnotex2">
     <sup class="ltx_note_mark">
      4
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        4
       </sup>
       <span class="ltx_tag ltx_tag_note">
        4
       </span>
       Equal contribution.
      </span>
     </span>
    </span>
    &amp;Yiming Tang,
    <span class="ltx_note ltx_role_footnote" id="footnotex3">
     <sup class="ltx_note_mark">
      1
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        1
       </sup>
       <span class="ltx_tag ltx_tag_note">
        1
       </span>
       School of Mathematical Science, Peking University.
       <br class="ltx_break"/>
       (luoyf@pku.edu.cn; 2201110049@pku.edu.cn; 1900010740@pku.edu.cn)
      </span>
     </span>
    </span>
    <span class="ltx_note ltx_role_footnote" id="footnotex4">
     <sup class="ltx_note_mark">
      4
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        4
       </sup>
       <span class="ltx_tag ltx_tag_note">
        4
       </span>
       Equal contribution.
      </span>
     </span>
    </span>
    &amp;Chengfeng Shen,
    <span class="ltx_note ltx_role_footnote" id="footnotex5">
     <sup class="ltx_note_mark">
      1
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        1
       </sup>
       <span class="ltx_tag ltx_tag_note">
        1
       </span>
       School of Mathematical Science, Peking University.
       <br class="ltx_break"/>
       (luoyf@pku.edu.cn; 2201110049@pku.edu.cn; 1900010740@pku.edu.cn)
      </span>
     </span>
    </span>
    <span class="ltx_note ltx_role_footnote" id="footnotex6">
     <sup class="ltx_note_mark">
      4
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        4
       </sup>
       <span class="ltx_tag ltx_tag_note">
        4
       </span>
       Equal contribution.
      </span>
     </span>
    </span>
    &amp;Zhennan Zhou,
    <span class="ltx_note ltx_role_footnote" id="footnotex7">
     <sup class="ltx_note_mark">
      2
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        2
       </sup>
       <span class="ltx_tag ltx_tag_note">
        2
       </span>
       Beijing International Center for Mathematical Research, Peking University. (zhennan@bicmr.pku.edu.cn)
      </span>
     </span>
    </span>
    &amp;Bin Dong
    <span class="ltx_note ltx_role_footnote" id="footnotex8">
     <sup class="ltx_note_mark">
      3
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        3
       </sup>
       <span class="ltx_tag ltx_tag_note">
        3
       </span>
       Beijing International Center for Mathematical Research, Peking University; Center for Machine Learning Research, Peking University; National Biomedical Imaging Center, Peking University.
       <br class="ltx_break"/>
       (dongbin@math.pku.edu.cn)
      </span>
     </span>
    </span>
   </span>
  </span>
 </div>
 <div class="ltx_abstract">
  <h6 class="ltx_title ltx_title_abstract">
   Abstract
  </h6>
  <p class="ltx_p" id="id1.id1">
   Prompt Engineering (PE) has emerged as a critical technique for guiding Large Language Models (LLMs) in solving intricate tasks. Its importance is highlighted by its potential to significantly enhance the efficiency and effectiveness of human-machine interaction. As tasks grow increasingly complex, recent advanced PE methods have extended beyond the limitations of single-round interactions to embrace multi-round interactions, which allows for a deeper and more nuanced engagement with LLMs. In this paper, we propose an optimal control framework tailored for multi-round interactions with LLMs. This framework provides a unified mathematical structure that not only systematizes the existing PE methods but also sets the stage for rigorous analytical improvements. Furthermore, we extend this framework to include PE via ensemble methods and multi-agent collaboration, thereby enlarging the scope of applicability. By adopting an optimal control perspective, we offer fresh insights into existing PE methods and highlight theoretical challenges that warrant future research. Besides, our work lays a foundation for the development of more effective and interpretable PE methods.
  </p>
 </div>
 <section class="ltx_section" id="S1">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    1
   </span>
   Introduction
  </h2>
  <div class="ltx_para" id="S1.p1">
   <p class="ltx_p" id="S1.p1.1">
    Prompt engineering (PE) first emerged in the field of Large Language Models (LLMs) in 2020, as researchers realized that well-designed prompts could significantly enhance the capabilities of LLMs without additional model training
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib1" title="">
      1
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib2" title="">
      2
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib3" title="">
      3
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib4" title="">
      4
     </a>
     ]
    </cite>
    . The development of PE can be contextualized within the larger scope of natural language programming
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib5" title="">
      5
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib6" title="">
      6
     </a>
     ]
    </cite>
    – an increasingly prevalent paradigm that allows for the manipulation of computational systems through natural language, thus offering a more intuitive alternative to traditional programming languages.
Much like the transition from machine language to higher-level languages like C marked a significant leap in expressive power and ease of use, prompt engineering – or natural language programming in a broader sense – represents a further evolutionary leap, making it easier than ever to instruct machines in performing complex tasks.
When implemented properly, PE can yield dramatic performance improvements, particularly in the context of advanced LLMs such as GPT-4 and Claude. In these sophisticated models, the gap between well-engineered and poorly conceived prompts can be stark, reinforcing the critical role of effective PE in leveraging the full potential of LLMs.
   </p>
  </div>
  <div class="ltx_para" id="S1.p2">
   <p class="ltx_p" id="S1.p2.1">
    Initially, the focus of PE was on single-round prompting, a mechanism suited for relatively straightforward tasks. However, as the need for more complex problem-solving through natural language programming became evident, the field saw a shift towards more intricate forms of engagement, such as multi-round and even multi-agent interactions with LLMs
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib7" title="">
      7
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib8" title="">
      8
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib9" title="">
      9
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib10" title="">
      10
     </a>
     ]
    </cite>
    . This evolution in PE bears a striking resemblance to the historical trajectory of optimal control theory
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib11" title="">
      11
     </a>
     ]
    </cite>
    , which itself originated from the need for point-to-point trajectory optimization and later expanded its scope to accommodate dynamic systems with feedback mechanisms.
   </p>
  </div>
  <div class="ltx_para" id="S1.p3">
   <p class="ltx_p" id="S1.p3.1">
    The growing complexity of multi-round PE interactions presents significant challenges. Traditional PE approaches
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib1" title="">
      1
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib12" title="">
      12
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib13" title="">
      13
     </a>
     ]
    </cite>
    often rely on heuristic or empirical methods that, while effective in specific scenarios, lack a systematic foundation amenable to rigorous analysis. This highlights the pressing need for a unified mathematical framework that can serve as a descriptive foundation and facilitate optimization of multi-round PE dynamics.
   </p>
  </div>
  <div class="ltx_para" id="S1.p4">
   <p class="ltx_p" id="S1.p4.1">
    The primary aim of this paper is to introduce a novel optimal control framework tailored for multi-round interactions with LLMs. Unlike previous works with limited theoretical scopes
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib14" title="">
      14
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib15" title="">
      15
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib16" title="">
      16
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib17" title="">
      17
     </a>
     ]
    </cite>
    , our approach offers a comprehensive mathematical structure for the systematic design, analysis, and optimization of PE methods, broadening its applicability to include ensemble and multi-agent strategies.
   </p>
  </div>
  <div class="ltx_para" id="S1.p5">
   <p class="ltx_p" id="S1.p5.1">
    Adopting an optimal control perspective holds the promise of evolving PE along a trajectory similar to that of optimal control theory itself. Initial methodologies in PE mainly focused on single-round prompts, comparable to point-to-point trajectory optimization problems
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib18" title="">
      18
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib19" title="">
      19
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib20" title="">
      20
     </a>
     ]
    </cite>
    . As optimal control theory incorporated feedback mechanisms for handling complex systems, our framework is designed to accommodate both single-round and multi-round interactions. This shift aims to offer a coherent understanding of the dynamics governing these intricate exchanges and to foster innovative applications transcending current limitations.
   </p>
  </div>
  <div class="ltx_para" id="S1.p6">
   <p class="ltx_p" id="S1.p6.1">
    To realize these objectives, our methodology employs optimal control to conceptualize multi-round LLM interactions. While acknowledging existing gaps in mathematical rigor due to poorly understood metrics in discrete language spaces, the framework aims to serve as a unified lens for qualitatively evaluating existing PE techniques. Thus, it lays the groundwork for potential improvements in PE by providing an intuitive, structurally coherent approach to model extended dialogic interactions.
   </p>
  </div>
  <div class="ltx_para" id="S1.p7">
   <p class="ltx_p" id="S1.p7.1">
    Contributions of this paper are summarized as follows:
   </p>
   <ol class="ltx_enumerate" id="S1.I1">
    <li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      1.
     </span>
     <div class="ltx_para" id="S1.I1.i1.p1">
      <p class="ltx_p" id="S1.I1.i1.p1.1">
       We introduce a novel optimal control formulation that unifies a wide range of existing methods under a single mathematical framework. This provides a rigorous foundation for analyzing and improving prompt design.
      </p>
     </div>
    </li>
    <li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      2.
     </span>
     <div class="ltx_para" id="S1.I1.i2.p1">
      <p class="ltx_p" id="S1.I1.i2.p1.1">
       We highlight theoretical challenges revealed by the framework, specifically regarding the formalization and optimization of multi-round interactions. While complex, these issues offer exciting directions for future studies to deepen the mathematical understanding of PE.
      </p>
     </div>
    </li>
    <li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      3.
     </span>
     <div class="ltx_para" id="S1.I1.i3.p1">
      <p class="ltx_p" id="S1.I1.i3.p1.1">
       Our perspective yields valuable insights into the inherent capabilities and limitations of current techniques. These could catalyze innovations in PE, pushing the boundaries of human-computer interaction.
      </p>
     </div>
    </li>
    <li class="ltx_item" id="S1.I1.i4" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      4.
     </span>
     <div class="ltx_para" id="S1.I1.i4.p1">
      <p class="ltx_p" id="S1.I1.i4.p1.1">
       We extend the framework to ensemble PE methods and multi-agent PE, serving as an important stepping stone for studying complex interactions with LLMs.
      </p>
     </div>
    </li>
   </ol>
   <p class="ltx_p" id="S1.p7.2">
    We note that the primary aim of this paper is not to present new theoretical results or algorithmic improvements substantiated by experiments; rather, we introduce an optimal control framework to systematize and interpret existing PE methods, thereby laying the groundwork for future rigorous analysis in the domain of PE.
   </p>
  </div>
  <div class="ltx_para" id="S1.p8">
   <p class="ltx_p" id="S1.p8.1">
    The remainder of this paper is structured as follows. Section 2 elaborates on the pivotal concepts in PE and introduces the optimal control framework designed to systematize PE. In this section, we also shed light on the significance of multi-round interactions, highlighting the challenges and opportunities that multi-round PE presents. In Section 3, we review several well-established PE methods, integrating them into the proposed optimal control framework and elucidating the new insights that emerge from this integration. Section 4 is dedicated to extended PE methodologies, such as ensemble and multi-agent PE strategies. We illustrate how minor adaptations to the proposed framework can accommodate these more sophisticated, yet potent, PE methods. The paper concludes with Section 5, where we summarize our contributions.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S2">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    2
   </span>
   A General Framework for Prompt Engineering
  </h2>
  <section class="ltx_subsection" id="S2.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     2.1
    </span>
    Concepts and Terminologies
   </h3>
   <div class="ltx_para" id="S2.SS1.p1">
    <p class="ltx_p" id="S2.SS1.p1.1">
     In the context of LLMs, a
     <span class="ltx_text ltx_font_bold" id="S2.SS1.p1.1.1">
      prompt
     </span>
     serves as a starting point for an interaction with the LLM. It could be a question, a statement, or a command that are given in natural language. The quality of prompts are important because they have a strong effect on the quality of the LLM’s responses. Well-designed prompts can lead to useful and accurate responses, while a poorly designed ones may result in irrelevant or wrong responses.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS1.p2">
    <p class="ltx_p" id="S2.SS1.p2.1">
     In this paper, our main focus is on
     <span class="ltx_text ltx_font_bold" id="S2.SS1.p2.1.1">
      multi-round interactions
     </span>
     with LLMs. In these situations, a user interacts with the model multiple times to complete one specific task. For multi-round interactions, the user gives a series of prompts and later prompts can be influenced by LLM’s previous responses. This approach allows the user to get more detailed information and helps the model to handle tasks that are too complex for a single interaction.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS1.p3">
    <p class="ltx_p" id="S2.SS1.p3.1">
     <span class="ltx_text ltx_font_bold" id="S2.SS1.p3.1.1">
      Prompt engineering (PE)
     </span>
     is the process of designing and refining a sequence of prompts to be used in a multi-round interaction with an LLM, with the goal of eliciting a satisfactory final response. By "satisfactory", we mean that the final response should score high on some measurable standard. In Section
     <a class="ltx_ref" href="#S2.SS3" title="2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
      <span class="ltx_text ltx_ref_tag">
       2.3
      </span>
     </a>
     , we will show how the idea of finding refined prompts can be described as an optimal control problem.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S2.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     2.2
    </span>
    Why is Multi-Round Interaction Necessary?
   </h3>
   <div class="ltx_para" id="S2.SS2.p1">
    <p class="ltx_p" id="S2.SS2.p1.1">
     It is important to emphasize the significance of engaging in multiple rounds of interaction for obtaining high-quality responses from LLMs
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib21" title="">
       21
      </a>
      ]
     </cite>
     . One could argue that a single well-crafted prompt should be sufficient if the LLM is highly advanced. However, this is often not achievable. Even with a sophisticated LLM, crafting the ideal prompt can be challenging, especially when the user is not an expert in the subject matter at hand.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS2.p2">
    <p class="ltx_p" id="S2.SS2.p2.1">
     For instance, consider a medical diagnosis scenario where a user is experiencing symptoms and seeks advice from an LLM. An initial prompt might capture a basic description of the symptoms; however, lacking medical expertise, the user may miss pertinent information. For example, the user might overlook some crucial connections between their symptoms and lifestyle habits or other factors. These unstated contextual factors could be vital for the LLM to provide an accurate or useful response in a single interaction round.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS2.p3">
    <p class="ltx_p" id="S2.SS2.p3.1">
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib22" title="">
       22
      </a>
      , Chapter 4]
     </cite>
     provides a detailed example of GPT-4 assisting a physician with a neonatal diagnosis. Initially, the physician outlines a set of symptoms, eliciting from GPT-4 a list of four possible conditions. In subsequent rounds of dialogue, supplemented with extra clinical details including ultrasound images and hormone level data, GPT-4 refines its assessment and identify the most probable diagnosis among the four possibilities. This collaborative process culminates in the accurate detection of a remarkably rare disorder, with an incidence of less than one in every 100,000 newborns. Given the technical nature and length of the original conversation, it has been excluded from this text. Readers seeking an in-depth understanding are directed to consult
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib22" title="">
       22
      </a>
      , Chapter 4]
     </cite>
     .
    </p>
   </div>
   <div class="ltx_para" id="S2.SS2.p4">
    <p class="ltx_p" id="S2.SS2.p4.1">
     In a multi-round interaction, both the user and the LLM have the opportunity for a more extended exchange of information. The user can adapt their prompts based on the LLM’s previous responses, adding details or context that were initially lacking. Similarly, the LLM might ask clarifying questions that help guide the user to provide additional, more relevant information.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS2.p5">
    <p class="ltx_p" id="S2.SS2.p5.1">
     Through this iterative process of exchanging information, the specialized knowledge of the LLM assists the user in crafting more effective prompts, enabling a more productive dialogue. In summary, engaging in multi-round interactions enhances the cooperation between users and LLMs. The back-and-forth conversations facilitate more contextual and nuanced exchanges that are vital to unlocking the full potential of LLMs.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S2.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     2.3
    </span>
    General Framework
   </h3>
   <div class="ltx_para" id="S2.SS3.p1">
    <p class="ltx_p" id="S2.SS3.p1.8">
     Let us define the text space as
     <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS3.p1.1.m1.1">
      <semantics id="S2.SS3.p1.1.m1.1a">
       <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.1.m1.1.1" xref="S2.SS3.p1.1.m1.1.1.cmml">
        𝒵
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.1b">
        <ci id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1">
         𝒵
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.1c">
        \mathcal{Z}
       </annotation>
      </semantics>
     </math>
     . Elements in
     <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS3.p1.2.m2.1">
      <semantics id="S2.SS3.p1.2.m2.1a">
       <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.2.m2.1.1" xref="S2.SS3.p1.2.m2.1.1.cmml">
        𝒵
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p1.2.m2.1b">
        <ci id="S2.SS3.p1.2.m2.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1">
         𝒵
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p1.2.m2.1c">
        \mathcal{Z}
       </annotation>
      </semantics>
     </math>
     are compositions of some tokens selected from the token vocabulary
     <math alttext="\mathcal{T}" class="ltx_Math" display="inline" id="S2.SS3.p1.3.m3.1">
      <semantics id="S2.SS3.p1.3.m3.1a">
       <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.3.m3.1.1" xref="S2.SS3.p1.3.m3.1.1.cmml">
        𝒯
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p1.3.m3.1b">
        <ci id="S2.SS3.p1.3.m3.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1">
         𝒯
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p1.3.m3.1c">
        \mathcal{T}
       </annotation>
      </semantics>
     </math>
     , i.e.
     <math alttext="z=[t_{1},\ldots,t_{m}]\in\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS3.p1.4.m4.3">
      <semantics id="S2.SS3.p1.4.m4.3a">
       <mrow id="S2.SS3.p1.4.m4.3.3" xref="S2.SS3.p1.4.m4.3.3.cmml">
        <mi id="S2.SS3.p1.4.m4.3.3.4" xref="S2.SS3.p1.4.m4.3.3.4.cmml">
         z
        </mi>
        <mo id="S2.SS3.p1.4.m4.3.3.5" xref="S2.SS3.p1.4.m4.3.3.5.cmml">
         =
        </mo>
        <mrow id="S2.SS3.p1.4.m4.3.3.2.2" xref="S2.SS3.p1.4.m4.3.3.2.3.cmml">
         <mo id="S2.SS3.p1.4.m4.3.3.2.2.3" stretchy="false" xref="S2.SS3.p1.4.m4.3.3.2.3.cmml">
          [
         </mo>
         <msub id="S2.SS3.p1.4.m4.2.2.1.1.1" xref="S2.SS3.p1.4.m4.2.2.1.1.1.cmml">
          <mi id="S2.SS3.p1.4.m4.2.2.1.1.1.2" xref="S2.SS3.p1.4.m4.2.2.1.1.1.2.cmml">
           t
          </mi>
          <mn id="S2.SS3.p1.4.m4.2.2.1.1.1.3" xref="S2.SS3.p1.4.m4.2.2.1.1.1.3.cmml">
           1
          </mn>
         </msub>
         <mo id="S2.SS3.p1.4.m4.3.3.2.2.4" xref="S2.SS3.p1.4.m4.3.3.2.3.cmml">
          ,
         </mo>
         <mi id="S2.SS3.p1.4.m4.1.1" mathvariant="normal" xref="S2.SS3.p1.4.m4.1.1.cmml">
          …
         </mi>
         <mo id="S2.SS3.p1.4.m4.3.3.2.2.5" xref="S2.SS3.p1.4.m4.3.3.2.3.cmml">
          ,
         </mo>
         <msub id="S2.SS3.p1.4.m4.3.3.2.2.2" xref="S2.SS3.p1.4.m4.3.3.2.2.2.cmml">
          <mi id="S2.SS3.p1.4.m4.3.3.2.2.2.2" xref="S2.SS3.p1.4.m4.3.3.2.2.2.2.cmml">
           t
          </mi>
          <mi id="S2.SS3.p1.4.m4.3.3.2.2.2.3" xref="S2.SS3.p1.4.m4.3.3.2.2.2.3.cmml">
           m
          </mi>
         </msub>
         <mo id="S2.SS3.p1.4.m4.3.3.2.2.6" stretchy="false" xref="S2.SS3.p1.4.m4.3.3.2.3.cmml">
          ]
         </mo>
        </mrow>
        <mo id="S2.SS3.p1.4.m4.3.3.6" xref="S2.SS3.p1.4.m4.3.3.6.cmml">
         ∈
        </mo>
        <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.4.m4.3.3.7" xref="S2.SS3.p1.4.m4.3.3.7.cmml">
         𝒵
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p1.4.m4.3b">
        <apply id="S2.SS3.p1.4.m4.3.3.cmml" xref="S2.SS3.p1.4.m4.3.3">
         <and id="S2.SS3.p1.4.m4.3.3a.cmml" xref="S2.SS3.p1.4.m4.3.3">
         </and>
         <apply id="S2.SS3.p1.4.m4.3.3b.cmml" xref="S2.SS3.p1.4.m4.3.3">
          <eq id="S2.SS3.p1.4.m4.3.3.5.cmml" xref="S2.SS3.p1.4.m4.3.3.5">
          </eq>
          <ci id="S2.SS3.p1.4.m4.3.3.4.cmml" xref="S2.SS3.p1.4.m4.3.3.4">
           𝑧
          </ci>
          <list id="S2.SS3.p1.4.m4.3.3.2.3.cmml" xref="S2.SS3.p1.4.m4.3.3.2.2">
           <apply id="S2.SS3.p1.4.m4.2.2.1.1.1.cmml" xref="S2.SS3.p1.4.m4.2.2.1.1.1">
            <csymbol cd="ambiguous" id="S2.SS3.p1.4.m4.2.2.1.1.1.1.cmml" xref="S2.SS3.p1.4.m4.2.2.1.1.1">
             subscript
            </csymbol>
            <ci id="S2.SS3.p1.4.m4.2.2.1.1.1.2.cmml" xref="S2.SS3.p1.4.m4.2.2.1.1.1.2">
             𝑡
            </ci>
            <cn id="S2.SS3.p1.4.m4.2.2.1.1.1.3.cmml" type="integer" xref="S2.SS3.p1.4.m4.2.2.1.1.1.3">
             1
            </cn>
           </apply>
           <ci id="S2.SS3.p1.4.m4.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1">
            …
           </ci>
           <apply id="S2.SS3.p1.4.m4.3.3.2.2.2.cmml" xref="S2.SS3.p1.4.m4.3.3.2.2.2">
            <csymbol cd="ambiguous" id="S2.SS3.p1.4.m4.3.3.2.2.2.1.cmml" xref="S2.SS3.p1.4.m4.3.3.2.2.2">
             subscript
            </csymbol>
            <ci id="S2.SS3.p1.4.m4.3.3.2.2.2.2.cmml" xref="S2.SS3.p1.4.m4.3.3.2.2.2.2">
             𝑡
            </ci>
            <ci id="S2.SS3.p1.4.m4.3.3.2.2.2.3.cmml" xref="S2.SS3.p1.4.m4.3.3.2.2.2.3">
             𝑚
            </ci>
           </apply>
          </list>
         </apply>
         <apply id="S2.SS3.p1.4.m4.3.3c.cmml" xref="S2.SS3.p1.4.m4.3.3">
          <in id="S2.SS3.p1.4.m4.3.3.6.cmml" xref="S2.SS3.p1.4.m4.3.3.6">
          </in>
          <share href="#S2.SS3.p1.4.m4.3.3.2.cmml" id="S2.SS3.p1.4.m4.3.3d.cmml" xref="S2.SS3.p1.4.m4.3.3">
          </share>
          <ci id="S2.SS3.p1.4.m4.3.3.7.cmml" xref="S2.SS3.p1.4.m4.3.3.7">
           𝒵
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p1.4.m4.3c">
        z=[t_{1},\ldots,t_{m}]\in\mathcal{Z}
       </annotation>
      </semantics>
     </math>
     where
     <math alttext="t_{k}\in\mathcal{T}" class="ltx_Math" display="inline" id="S2.SS3.p1.5.m5.1">
      <semantics id="S2.SS3.p1.5.m5.1a">
       <mrow id="S2.SS3.p1.5.m5.1.1" xref="S2.SS3.p1.5.m5.1.1.cmml">
        <msub id="S2.SS3.p1.5.m5.1.1.2" xref="S2.SS3.p1.5.m5.1.1.2.cmml">
         <mi id="S2.SS3.p1.5.m5.1.1.2.2" xref="S2.SS3.p1.5.m5.1.1.2.2.cmml">
          t
         </mi>
         <mi id="S2.SS3.p1.5.m5.1.1.2.3" xref="S2.SS3.p1.5.m5.1.1.2.3.cmml">
          k
         </mi>
        </msub>
        <mo id="S2.SS3.p1.5.m5.1.1.1" xref="S2.SS3.p1.5.m5.1.1.1.cmml">
         ∈
        </mo>
        <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.5.m5.1.1.3" xref="S2.SS3.p1.5.m5.1.1.3.cmml">
         𝒯
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p1.5.m5.1b">
        <apply id="S2.SS3.p1.5.m5.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1">
         <in id="S2.SS3.p1.5.m5.1.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1.1">
         </in>
         <apply id="S2.SS3.p1.5.m5.1.1.2.cmml" xref="S2.SS3.p1.5.m5.1.1.2">
          <csymbol cd="ambiguous" id="S2.SS3.p1.5.m5.1.1.2.1.cmml" xref="S2.SS3.p1.5.m5.1.1.2">
           subscript
          </csymbol>
          <ci id="S2.SS3.p1.5.m5.1.1.2.2.cmml" xref="S2.SS3.p1.5.m5.1.1.2.2">
           𝑡
          </ci>
          <ci id="S2.SS3.p1.5.m5.1.1.2.3.cmml" xref="S2.SS3.p1.5.m5.1.1.2.3">
           𝑘
          </ci>
         </apply>
         <ci id="S2.SS3.p1.5.m5.1.1.3.cmml" xref="S2.SS3.p1.5.m5.1.1.3">
          𝒯
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p1.5.m5.1c">
        t_{k}\in\mathcal{T}
       </annotation>
      </semantics>
     </math>
     . Later in this paper, we also use
     <math alttext="[z_{1}z_{2}]" class="ltx_Math" display="inline" id="S2.SS3.p1.6.m6.1">
      <semantics id="S2.SS3.p1.6.m6.1a">
       <mrow id="S2.SS3.p1.6.m6.1.1.1" xref="S2.SS3.p1.6.m6.1.1.2.cmml">
        <mo id="S2.SS3.p1.6.m6.1.1.1.2" stretchy="false" xref="S2.SS3.p1.6.m6.1.1.2.1.cmml">
         [
        </mo>
        <mrow id="S2.SS3.p1.6.m6.1.1.1.1" xref="S2.SS3.p1.6.m6.1.1.1.1.cmml">
         <msub id="S2.SS3.p1.6.m6.1.1.1.1.2" xref="S2.SS3.p1.6.m6.1.1.1.1.2.cmml">
          <mi id="S2.SS3.p1.6.m6.1.1.1.1.2.2" xref="S2.SS3.p1.6.m6.1.1.1.1.2.2.cmml">
           z
          </mi>
          <mn id="S2.SS3.p1.6.m6.1.1.1.1.2.3" xref="S2.SS3.p1.6.m6.1.1.1.1.2.3.cmml">
           1
          </mn>
         </msub>
         <mo id="S2.SS3.p1.6.m6.1.1.1.1.1" lspace="0em" rspace="0em" xref="S2.SS3.p1.6.m6.1.1.1.1.1.cmml">
          ​
         </mo>
         <msub id="S2.SS3.p1.6.m6.1.1.1.1.3" xref="S2.SS3.p1.6.m6.1.1.1.1.3.cmml">
          <mi id="S2.SS3.p1.6.m6.1.1.1.1.3.2" xref="S2.SS3.p1.6.m6.1.1.1.1.3.2.cmml">
           z
          </mi>
          <mn id="S2.SS3.p1.6.m6.1.1.1.1.3.3" xref="S2.SS3.p1.6.m6.1.1.1.1.3.3.cmml">
           2
          </mn>
         </msub>
        </mrow>
        <mo id="S2.SS3.p1.6.m6.1.1.1.3" stretchy="false" xref="S2.SS3.p1.6.m6.1.1.2.1.cmml">
         ]
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p1.6.m6.1b">
        <apply id="S2.SS3.p1.6.m6.1.1.2.cmml" xref="S2.SS3.p1.6.m6.1.1.1">
         <csymbol cd="latexml" id="S2.SS3.p1.6.m6.1.1.2.1.cmml" xref="S2.SS3.p1.6.m6.1.1.1.2">
          delimited-[]
         </csymbol>
         <apply id="S2.SS3.p1.6.m6.1.1.1.1.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1">
          <times id="S2.SS3.p1.6.m6.1.1.1.1.1.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1.1">
          </times>
          <apply id="S2.SS3.p1.6.m6.1.1.1.1.2.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1.2">
           <csymbol cd="ambiguous" id="S2.SS3.p1.6.m6.1.1.1.1.2.1.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1.2">
            subscript
           </csymbol>
           <ci id="S2.SS3.p1.6.m6.1.1.1.1.2.2.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1.2.2">
            𝑧
           </ci>
           <cn id="S2.SS3.p1.6.m6.1.1.1.1.2.3.cmml" type="integer" xref="S2.SS3.p1.6.m6.1.1.1.1.2.3">
            1
           </cn>
          </apply>
          <apply id="S2.SS3.p1.6.m6.1.1.1.1.3.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1.3">
           <csymbol cd="ambiguous" id="S2.SS3.p1.6.m6.1.1.1.1.3.1.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1.3">
            subscript
           </csymbol>
           <ci id="S2.SS3.p1.6.m6.1.1.1.1.3.2.cmml" xref="S2.SS3.p1.6.m6.1.1.1.1.3.2">
            𝑧
           </ci>
           <cn id="S2.SS3.p1.6.m6.1.1.1.1.3.3.cmml" type="integer" xref="S2.SS3.p1.6.m6.1.1.1.1.3.3">
            2
           </cn>
          </apply>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p1.6.m6.1c">
        [z_{1}z_{2}]
       </annotation>
      </semantics>
     </math>
     to represent the text obtained by concatenating
     <math alttext="z_{1}" class="ltx_Math" display="inline" id="S2.SS3.p1.7.m7.1">
      <semantics id="S2.SS3.p1.7.m7.1a">
       <msub id="S2.SS3.p1.7.m7.1.1" xref="S2.SS3.p1.7.m7.1.1.cmml">
        <mi id="S2.SS3.p1.7.m7.1.1.2" xref="S2.SS3.p1.7.m7.1.1.2.cmml">
         z
        </mi>
        <mn id="S2.SS3.p1.7.m7.1.1.3" xref="S2.SS3.p1.7.m7.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p1.7.m7.1b">
        <apply id="S2.SS3.p1.7.m7.1.1.cmml" xref="S2.SS3.p1.7.m7.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p1.7.m7.1.1.1.cmml" xref="S2.SS3.p1.7.m7.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS3.p1.7.m7.1.1.2.cmml" xref="S2.SS3.p1.7.m7.1.1.2">
          𝑧
         </ci>
         <cn id="S2.SS3.p1.7.m7.1.1.3.cmml" type="integer" xref="S2.SS3.p1.7.m7.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p1.7.m7.1c">
        z_{1}
       </annotation>
      </semantics>
     </math>
     and
     <math alttext="z_{2}" class="ltx_Math" display="inline" id="S2.SS3.p1.8.m8.1">
      <semantics id="S2.SS3.p1.8.m8.1a">
       <msub id="S2.SS3.p1.8.m8.1.1" xref="S2.SS3.p1.8.m8.1.1.cmml">
        <mi id="S2.SS3.p1.8.m8.1.1.2" xref="S2.SS3.p1.8.m8.1.1.2.cmml">
         z
        </mi>
        <mn id="S2.SS3.p1.8.m8.1.1.3" xref="S2.SS3.p1.8.m8.1.1.3.cmml">
         2
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p1.8.m8.1b">
        <apply id="S2.SS3.p1.8.m8.1.1.cmml" xref="S2.SS3.p1.8.m8.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p1.8.m8.1.1.1.cmml" xref="S2.SS3.p1.8.m8.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS3.p1.8.m8.1.1.2.cmml" xref="S2.SS3.p1.8.m8.1.1.2">
          𝑧
         </ci>
         <cn id="S2.SS3.p1.8.m8.1.1.3.cmml" type="integer" xref="S2.SS3.p1.8.m8.1.1.3">
          2
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p1.8.m8.1c">
        z_{2}
       </annotation>
      </semantics>
     </math>
     one after another.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS3.p2">
    <p class="ltx_p" id="S2.SS3.p2.1">
     Under these notations, a given LLM can be mathematically modeled as a transformation over
     <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS3.p2.1.m1.1">
      <semantics id="S2.SS3.p2.1.m1.1a">
       <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p2.1.m1.1.1" xref="S2.SS3.p2.1.m1.1.1.cmml">
        𝒵
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p2.1.m1.1b">
        <ci id="S2.SS3.p2.1.m1.1.1.cmml" xref="S2.SS3.p2.1.m1.1.1">
         𝒵
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p2.1.m1.1c">
        \mathcal{Z}
       </annotation>
      </semantics>
     </math>
     :
    </p>
    <table class="ltx_equation ltx_eqn_table" id="S2.Ex1">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_eqn_cell ltx_align_center">
        <math alttext="\operatorname{LLM}:\begin{aligned} \mathcal{Z}&amp;\to\mathcal{Z}\\
z^{p}&amp;\mapsto z^{r}\end{aligned}" class="ltx_Math" display="block" id="S2.Ex1.m1.1">
         <semantics id="S2.Ex1.m1.1a">
          <mrow id="S2.Ex1.m1.1.1" xref="S2.Ex1.m1.1.1.cmml">
           <mi id="S2.Ex1.m1.1.1.2" xref="S2.Ex1.m1.1.1.2.cmml">
            LLM
           </mi>
           <mo id="S2.Ex1.m1.1.1.1" lspace="0.278em" rspace="0.278em" xref="S2.Ex1.m1.1.1.1.cmml">
            :
           </mo>
           <mtable columnspacing="0pt" displaystyle="true" id="S2.Ex1.m1.1.1.3" rowspacing="0pt" xref="S2.Ex1.m1.1.1.3.cmml">
            <mtr id="S2.Ex1.m1.1.1.3a" xref="S2.Ex1.m1.1.1.3.cmml">
             <mtd class="ltx_align_right" columnalign="right" id="S2.Ex1.m1.1.1.3b" xref="S2.Ex1.m1.1.1.3.cmml">
              <mi class="ltx_font_mathcaligraphic" id="S2.Ex1.m1.1.1.3.1.1.1" xref="S2.Ex1.m1.1.1.3.1.1.1.cmml">
               𝒵
              </mi>
             </mtd>
             <mtd class="ltx_align_left" columnalign="left" id="S2.Ex1.m1.1.1.3c" xref="S2.Ex1.m1.1.1.3.cmml">
              <mrow id="S2.Ex1.m1.1.1.3.1.2.1" xref="S2.Ex1.m1.1.1.3.1.2.1.cmml">
               <mi id="S2.Ex1.m1.1.1.3.1.2.1.2" xref="S2.Ex1.m1.1.1.3.1.2.1.2.cmml">
               </mi>
               <mo id="S2.Ex1.m1.1.1.3.1.2.1.1" stretchy="false" xref="S2.Ex1.m1.1.1.3.1.2.1.1.cmml">
                →
               </mo>
               <mi class="ltx_font_mathcaligraphic" id="S2.Ex1.m1.1.1.3.1.2.1.3" xref="S2.Ex1.m1.1.1.3.1.2.1.3.cmml">
                𝒵
               </mi>
              </mrow>
             </mtd>
            </mtr>
            <mtr id="S2.Ex1.m1.1.1.3d" xref="S2.Ex1.m1.1.1.3.cmml">
             <mtd class="ltx_align_right" columnalign="right" id="S2.Ex1.m1.1.1.3e" xref="S2.Ex1.m1.1.1.3.cmml">
              <msup id="S2.Ex1.m1.1.1.3.2.1.1" xref="S2.Ex1.m1.1.1.3.2.1.1.cmml">
               <mi id="S2.Ex1.m1.1.1.3.2.1.1.2" xref="S2.Ex1.m1.1.1.3.2.1.1.2.cmml">
                z
               </mi>
               <mi id="S2.Ex1.m1.1.1.3.2.1.1.3" xref="S2.Ex1.m1.1.1.3.2.1.1.3.cmml">
                p
               </mi>
              </msup>
             </mtd>
             <mtd class="ltx_align_left" columnalign="left" id="S2.Ex1.m1.1.1.3f" xref="S2.Ex1.m1.1.1.3.cmml">
              <mrow id="S2.Ex1.m1.1.1.3.2.2.1" xref="S2.Ex1.m1.1.1.3.2.2.1.cmml">
               <mi id="S2.Ex1.m1.1.1.3.2.2.1.2" xref="S2.Ex1.m1.1.1.3.2.2.1.2.cmml">
               </mi>
               <mo id="S2.Ex1.m1.1.1.3.2.2.1.1" stretchy="false" xref="S2.Ex1.m1.1.1.3.2.2.1.1.cmml">
                ↦
               </mo>
               <msup id="S2.Ex1.m1.1.1.3.2.2.1.3" xref="S2.Ex1.m1.1.1.3.2.2.1.3.cmml">
                <mi id="S2.Ex1.m1.1.1.3.2.2.1.3.2" xref="S2.Ex1.m1.1.1.3.2.2.1.3.2.cmml">
                 z
                </mi>
                <mi id="S2.Ex1.m1.1.1.3.2.2.1.3.3" xref="S2.Ex1.m1.1.1.3.2.2.1.3.3.cmml">
                 r
                </mi>
               </msup>
              </mrow>
             </mtd>
            </mtr>
           </mtable>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S2.Ex1.m1.1b">
           <apply id="S2.Ex1.m1.1.1.cmml" xref="S2.Ex1.m1.1.1">
            <ci id="S2.Ex1.m1.1.1.1.cmml" xref="S2.Ex1.m1.1.1.1">
             :
            </ci>
            <ci id="S2.Ex1.m1.1.1.2.cmml" xref="S2.Ex1.m1.1.1.2">
             LLM
            </ci>
            <matrix id="S2.Ex1.m1.1.1.3.cmml" xref="S2.Ex1.m1.1.1.3">
             <matrixrow id="S2.Ex1.m1.1.1.3a.cmml" xref="S2.Ex1.m1.1.1.3">
              <ci id="S2.Ex1.m1.1.1.3.1.1.1.cmml" xref="S2.Ex1.m1.1.1.3.1.1.1">
               𝒵
              </ci>
              <apply id="S2.Ex1.m1.1.1.3.1.2.1.cmml" xref="S2.Ex1.m1.1.1.3.1.2.1">
               <ci id="S2.Ex1.m1.1.1.3.1.2.1.1.cmml" xref="S2.Ex1.m1.1.1.3.1.2.1.1">
                →
               </ci>
               <csymbol cd="latexml" id="S2.Ex1.m1.1.1.3.1.2.1.2.cmml" xref="S2.Ex1.m1.1.1.3.1.2.1.2">
                absent
               </csymbol>
               <ci id="S2.Ex1.m1.1.1.3.1.2.1.3.cmml" xref="S2.Ex1.m1.1.1.3.1.2.1.3">
                𝒵
               </ci>
              </apply>
             </matrixrow>
             <matrixrow id="S2.Ex1.m1.1.1.3b.cmml" xref="S2.Ex1.m1.1.1.3">
              <apply id="S2.Ex1.m1.1.1.3.2.1.1.cmml" xref="S2.Ex1.m1.1.1.3.2.1.1">
               <csymbol cd="ambiguous" id="S2.Ex1.m1.1.1.3.2.1.1.1.cmml" xref="S2.Ex1.m1.1.1.3.2.1.1">
                superscript
               </csymbol>
               <ci id="S2.Ex1.m1.1.1.3.2.1.1.2.cmml" xref="S2.Ex1.m1.1.1.3.2.1.1.2">
                𝑧
               </ci>
               <ci id="S2.Ex1.m1.1.1.3.2.1.1.3.cmml" xref="S2.Ex1.m1.1.1.3.2.1.1.3">
                𝑝
               </ci>
              </apply>
              <apply id="S2.Ex1.m1.1.1.3.2.2.1.cmml" xref="S2.Ex1.m1.1.1.3.2.2.1">
               <csymbol cd="latexml" id="S2.Ex1.m1.1.1.3.2.2.1.1.cmml" xref="S2.Ex1.m1.1.1.3.2.2.1.1">
                maps-to
               </csymbol>
               <csymbol cd="latexml" id="S2.Ex1.m1.1.1.3.2.2.1.2.cmml" xref="S2.Ex1.m1.1.1.3.2.2.1.2">
                absent
               </csymbol>
               <apply id="S2.Ex1.m1.1.1.3.2.2.1.3.cmml" xref="S2.Ex1.m1.1.1.3.2.2.1.3">
                <csymbol cd="ambiguous" id="S2.Ex1.m1.1.1.3.2.2.1.3.1.cmml" xref="S2.Ex1.m1.1.1.3.2.2.1.3">
                 superscript
                </csymbol>
                <ci id="S2.Ex1.m1.1.1.3.2.2.1.3.2.cmml" xref="S2.Ex1.m1.1.1.3.2.2.1.3.2">
                 𝑧
                </ci>
                <ci id="S2.Ex1.m1.1.1.3.2.2.1.3.3.cmml" xref="S2.Ex1.m1.1.1.3.2.2.1.3.3">
                 𝑟
                </ci>
               </apply>
              </apply>
             </matrixrow>
            </matrix>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.Ex1.m1.1c">
           \operatorname{LLM}:\begin{aligned} \mathcal{Z}&amp;\to\mathcal{Z}\\
z^{p}&amp;\mapsto z^{r}\end{aligned}
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
      </tr>
     </tbody>
    </table>
    <p class="ltx_p" id="S2.SS3.p2.3">
     where
     <math alttext="z^{p}" class="ltx_Math" display="inline" id="S2.SS3.p2.2.m1.1">
      <semantics id="S2.SS3.p2.2.m1.1a">
       <msup id="S2.SS3.p2.2.m1.1.1" xref="S2.SS3.p2.2.m1.1.1.cmml">
        <mi id="S2.SS3.p2.2.m1.1.1.2" xref="S2.SS3.p2.2.m1.1.1.2.cmml">
         z
        </mi>
        <mi id="S2.SS3.p2.2.m1.1.1.3" xref="S2.SS3.p2.2.m1.1.1.3.cmml">
         p
        </mi>
       </msup>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p2.2.m1.1b">
        <apply id="S2.SS3.p2.2.m1.1.1.cmml" xref="S2.SS3.p2.2.m1.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p2.2.m1.1.1.1.cmml" xref="S2.SS3.p2.2.m1.1.1">
          superscript
         </csymbol>
         <ci id="S2.SS3.p2.2.m1.1.1.2.cmml" xref="S2.SS3.p2.2.m1.1.1.2">
          𝑧
         </ci>
         <ci id="S2.SS3.p2.2.m1.1.1.3.cmml" xref="S2.SS3.p2.2.m1.1.1.3">
          𝑝
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p2.2.m1.1c">
        z^{p}
       </annotation>
      </semantics>
     </math>
     stands for prompt and
     <math alttext="z^{r}" class="ltx_Math" display="inline" id="S2.SS3.p2.3.m2.1">
      <semantics id="S2.SS3.p2.3.m2.1a">
       <msup id="S2.SS3.p2.3.m2.1.1" xref="S2.SS3.p2.3.m2.1.1.cmml">
        <mi id="S2.SS3.p2.3.m2.1.1.2" xref="S2.SS3.p2.3.m2.1.1.2.cmml">
         z
        </mi>
        <mi id="S2.SS3.p2.3.m2.1.1.3" xref="S2.SS3.p2.3.m2.1.1.3.cmml">
         r
        </mi>
       </msup>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p2.3.m2.1b">
        <apply id="S2.SS3.p2.3.m2.1.1.cmml" xref="S2.SS3.p2.3.m2.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p2.3.m2.1.1.1.cmml" xref="S2.SS3.p2.3.m2.1.1">
          superscript
         </csymbol>
         <ci id="S2.SS3.p2.3.m2.1.1.2.cmml" xref="S2.SS3.p2.3.m2.1.1.2">
          𝑧
         </ci>
         <ci id="S2.SS3.p2.3.m2.1.1.3.cmml" xref="S2.SS3.p2.3.m2.1.1.3">
          𝑟
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p2.3.m2.1c">
        z^{r}
       </annotation>
      </semantics>
     </math>
     stands for response.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS3.p3">
    <p class="ltx_p" id="S2.SS3.p3.1">
     <span class="ltx_text ltx_font_bold" id="S2.SS3.p3.1.1">
      Remark.
     </span>
     While our current formulation treats LLMs as deterministic transformations for the sake of conceptual clarity, it is noteworthy that all LLMs operate in a stochastic setting. The inherent variability due to stochastic sampling in text generation can yield different outputs for the same input prompt. Interestingly, certain PE methods such as ensemble methods can benefit from this stochastic property. We will explore this with more details in section
     <a class="ltx_ref" href="#S4" title="4 Further Extensions ‣ Prompt Engineering Through the Lens of Optimal Control">
      <span class="ltx_text ltx_ref_tag">
       4
      </span>
     </a>
     . Nevertheless, the primary insights and conclusions drawn in this paper remain valid in both deterministic and stochastic settings.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS3.p4">
    <p class="ltx_p" id="S2.SS3.p4.2">
     Given a task description (or a query)
     <math alttext="z^{q}" class="ltx_Math" display="inline" id="S2.SS3.p4.1.m1.1">
      <semantics id="S2.SS3.p4.1.m1.1a">
       <msup id="S2.SS3.p4.1.m1.1.1" xref="S2.SS3.p4.1.m1.1.1.cmml">
        <mi id="S2.SS3.p4.1.m1.1.1.2" xref="S2.SS3.p4.1.m1.1.1.2.cmml">
         z
        </mi>
        <mi id="S2.SS3.p4.1.m1.1.1.3" xref="S2.SS3.p4.1.m1.1.1.3.cmml">
         q
        </mi>
       </msup>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p4.1.m1.1b">
        <apply id="S2.SS3.p4.1.m1.1.1.cmml" xref="S2.SS3.p4.1.m1.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p4.1.m1.1.1.1.cmml" xref="S2.SS3.p4.1.m1.1.1">
          superscript
         </csymbol>
         <ci id="S2.SS3.p4.1.m1.1.1.2.cmml" xref="S2.SS3.p4.1.m1.1.1.2">
          𝑧
         </ci>
         <ci id="S2.SS3.p4.1.m1.1.1.3.cmml" xref="S2.SS3.p4.1.m1.1.1.3">
          𝑞
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p4.1.m1.1c">
        z^{q}
       </annotation>
      </semantics>
     </math>
     , our objective is to obtain an optimal response, where optimality is measured using an evaluation function
     <math alttext="f" class="ltx_Math" display="inline" id="S2.SS3.p4.2.m2.1">
      <semantics id="S2.SS3.p4.2.m2.1a">
       <mi id="S2.SS3.p4.2.m2.1.1" xref="S2.SS3.p4.2.m2.1.1.cmml">
        f
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p4.2.m2.1b">
        <ci id="S2.SS3.p4.2.m2.1.1.cmml" xref="S2.SS3.p4.2.m2.1.1">
         𝑓
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p4.2.m2.1c">
        f
       </annotation>
      </semantics>
     </math>
     :
    </p>
    <table class="ltx_equation ltx_eqn_table" id="S2.Ex2">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_eqn_cell ltx_align_center">
        <math alttext="f:\begin{aligned} \mathcal{Z}&amp;\to\mathbb{R}\\
z&amp;\mapsto f(z;z^{q})\end{aligned}" class="ltx_Math" display="block" id="S2.Ex2.m1.2">
         <semantics id="S2.Ex2.m1.2a">
          <mrow id="S2.Ex2.m1.2.3" xref="S2.Ex2.m1.2.3.cmml">
           <mi id="S2.Ex2.m1.2.3.2" xref="S2.Ex2.m1.2.3.2.cmml">
            f
           </mi>
           <mo id="S2.Ex2.m1.2.3.1" lspace="0.278em" rspace="0.278em" xref="S2.Ex2.m1.2.3.1.cmml">
            :
           </mo>
           <mtable columnspacing="0pt" displaystyle="true" id="S2.Ex2.m1.2.2" rowspacing="0pt" xref="S2.Ex2.m1.2.2.cmml">
            <mtr id="S2.Ex2.m1.2.2a" xref="S2.Ex2.m1.2.2.cmml">
             <mtd class="ltx_align_right" columnalign="right" id="S2.Ex2.m1.2.2b" xref="S2.Ex2.m1.2.2.cmml">
              <mi class="ltx_font_mathcaligraphic" id="S2.Ex2.m1.2.2.3.1.1" xref="S2.Ex2.m1.2.2.3.1.1.cmml">
               𝒵
              </mi>
             </mtd>
             <mtd class="ltx_align_left" columnalign="left" id="S2.Ex2.m1.2.2c" xref="S2.Ex2.m1.2.2.cmml">
              <mrow id="S2.Ex2.m1.2.2.3.2.1" xref="S2.Ex2.m1.2.2.3.2.1.cmml">
               <mi id="S2.Ex2.m1.2.2.3.2.1.2" xref="S2.Ex2.m1.2.2.3.2.1.2.cmml">
               </mi>
               <mo id="S2.Ex2.m1.2.2.3.2.1.1" stretchy="false" xref="S2.Ex2.m1.2.2.3.2.1.1.cmml">
                →
               </mo>
               <mi id="S2.Ex2.m1.2.2.3.2.1.3" xref="S2.Ex2.m1.2.2.3.2.1.3.cmml">
                ℝ
               </mi>
              </mrow>
             </mtd>
            </mtr>
            <mtr id="S2.Ex2.m1.2.2d" xref="S2.Ex2.m1.2.2.cmml">
             <mtd class="ltx_align_right" columnalign="right" id="S2.Ex2.m1.2.2e" xref="S2.Ex2.m1.2.2.cmml">
              <mi id="S2.Ex2.m1.2.2.2.3.1" xref="S2.Ex2.m1.2.2.2.3.1.cmml">
               z
              </mi>
             </mtd>
             <mtd class="ltx_align_left" columnalign="left" id="S2.Ex2.m1.2.2f" xref="S2.Ex2.m1.2.2.cmml">
              <mrow id="S2.Ex2.m1.2.2.2.2.2" xref="S2.Ex2.m1.2.2.2.2.2.cmml">
               <mi id="S2.Ex2.m1.2.2.2.2.2.4" xref="S2.Ex2.m1.2.2.2.2.2.4.cmml">
               </mi>
               <mo id="S2.Ex2.m1.2.2.2.2.2.3" stretchy="false" xref="S2.Ex2.m1.2.2.2.2.2.3.cmml">
                ↦
               </mo>
               <mrow id="S2.Ex2.m1.2.2.2.2.2.2" xref="S2.Ex2.m1.2.2.2.2.2.2.cmml">
                <mi id="S2.Ex2.m1.2.2.2.2.2.2.3" xref="S2.Ex2.m1.2.2.2.2.2.2.3.cmml">
                 f
                </mi>
                <mo id="S2.Ex2.m1.2.2.2.2.2.2.2" lspace="0em" rspace="0em" xref="S2.Ex2.m1.2.2.2.2.2.2.2.cmml">
                 ​
                </mo>
                <mrow id="S2.Ex2.m1.2.2.2.2.2.2.1.1" xref="S2.Ex2.m1.2.2.2.2.2.2.1.2.cmml">
                 <mo id="S2.Ex2.m1.2.2.2.2.2.2.1.1.2" stretchy="false" xref="S2.Ex2.m1.2.2.2.2.2.2.1.2.cmml">
                  (
                 </mo>
                 <mi id="S2.Ex2.m1.1.1.1.1.1.1" xref="S2.Ex2.m1.1.1.1.1.1.1.cmml">
                  z
                 </mi>
                 <mo id="S2.Ex2.m1.2.2.2.2.2.2.1.1.3" xref="S2.Ex2.m1.2.2.2.2.2.2.1.2.cmml">
                  ;
                 </mo>
                 <msup id="S2.Ex2.m1.2.2.2.2.2.2.1.1.1" xref="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.cmml">
                  <mi id="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.2" xref="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.2.cmml">
                   z
                  </mi>
                  <mi id="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.3" xref="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.3.cmml">
                   q
                  </mi>
                 </msup>
                 <mo id="S2.Ex2.m1.2.2.2.2.2.2.1.1.4" stretchy="false" xref="S2.Ex2.m1.2.2.2.2.2.2.1.2.cmml">
                  )
                 </mo>
                </mrow>
               </mrow>
              </mrow>
             </mtd>
            </mtr>
           </mtable>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S2.Ex2.m1.2b">
           <apply id="S2.Ex2.m1.2.3.cmml" xref="S2.Ex2.m1.2.3">
            <ci id="S2.Ex2.m1.2.3.1.cmml" xref="S2.Ex2.m1.2.3.1">
             :
            </ci>
            <ci id="S2.Ex2.m1.2.3.2.cmml" xref="S2.Ex2.m1.2.3.2">
             𝑓
            </ci>
            <matrix id="S2.Ex2.m1.2.2.cmml" xref="S2.Ex2.m1.2.2">
             <matrixrow id="S2.Ex2.m1.2.2a.cmml" xref="S2.Ex2.m1.2.2">
              <ci id="S2.Ex2.m1.2.2.3.1.1.cmml" xref="S2.Ex2.m1.2.2.3.1.1">
               𝒵
              </ci>
              <apply id="S2.Ex2.m1.2.2.3.2.1.cmml" xref="S2.Ex2.m1.2.2.3.2.1">
               <ci id="S2.Ex2.m1.2.2.3.2.1.1.cmml" xref="S2.Ex2.m1.2.2.3.2.1.1">
                →
               </ci>
               <csymbol cd="latexml" id="S2.Ex2.m1.2.2.3.2.1.2.cmml" xref="S2.Ex2.m1.2.2.3.2.1.2">
                absent
               </csymbol>
               <ci id="S2.Ex2.m1.2.2.3.2.1.3.cmml" xref="S2.Ex2.m1.2.2.3.2.1.3">
                ℝ
               </ci>
              </apply>
             </matrixrow>
             <matrixrow id="S2.Ex2.m1.2.2b.cmml" xref="S2.Ex2.m1.2.2">
              <ci id="S2.Ex2.m1.2.2.2.3.1.cmml" xref="S2.Ex2.m1.2.2.2.3.1">
               𝑧
              </ci>
              <apply id="S2.Ex2.m1.2.2.2.2.2.cmml" xref="S2.Ex2.m1.2.2.2.2.2">
               <csymbol cd="latexml" id="S2.Ex2.m1.2.2.2.2.2.3.cmml" xref="S2.Ex2.m1.2.2.2.2.2.3">
                maps-to
               </csymbol>
               <csymbol cd="latexml" id="S2.Ex2.m1.2.2.2.2.2.4.cmml" xref="S2.Ex2.m1.2.2.2.2.2.4">
                absent
               </csymbol>
               <apply id="S2.Ex2.m1.2.2.2.2.2.2.cmml" xref="S2.Ex2.m1.2.2.2.2.2.2">
                <times id="S2.Ex2.m1.2.2.2.2.2.2.2.cmml" xref="S2.Ex2.m1.2.2.2.2.2.2.2">
                </times>
                <ci id="S2.Ex2.m1.2.2.2.2.2.2.3.cmml" xref="S2.Ex2.m1.2.2.2.2.2.2.3">
                 𝑓
                </ci>
                <list id="S2.Ex2.m1.2.2.2.2.2.2.1.2.cmml" xref="S2.Ex2.m1.2.2.2.2.2.2.1.1">
                 <ci id="S2.Ex2.m1.1.1.1.1.1.1.cmml" xref="S2.Ex2.m1.1.1.1.1.1.1">
                  𝑧
                 </ci>
                 <apply id="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.cmml" xref="S2.Ex2.m1.2.2.2.2.2.2.1.1.1">
                  <csymbol cd="ambiguous" id="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.1.cmml" xref="S2.Ex2.m1.2.2.2.2.2.2.1.1.1">
                   superscript
                  </csymbol>
                  <ci id="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.2.cmml" xref="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.2">
                   𝑧
                  </ci>
                  <ci id="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.3.cmml" xref="S2.Ex2.m1.2.2.2.2.2.2.1.1.1.3">
                   𝑞
                  </ci>
                 </apply>
                </list>
               </apply>
              </apply>
             </matrixrow>
            </matrix>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.Ex2.m1.2c">
           f:\begin{aligned} \mathcal{Z}&amp;\to\mathbb{R}\\
z&amp;\mapsto f(z;z^{q})\end{aligned}
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
      </tr>
     </tbody>
    </table>
   </div>
   <div class="ltx_para" id="S2.SS3.p5">
    <p class="ltx_p" id="S2.SS3.p5.1">
     The purpose of PE is to find a sequence of prompts
     <math alttext="\{z_{t}^{p}\}_{t=1}^{\tau}" class="ltx_Math" display="inline" id="S2.SS3.p5.1.m1.1">
      <semantics id="S2.SS3.p5.1.m1.1a">
       <msubsup id="S2.SS3.p5.1.m1.1.1" xref="S2.SS3.p5.1.m1.1.1.cmml">
        <mrow id="S2.SS3.p5.1.m1.1.1.1.1.1" xref="S2.SS3.p5.1.m1.1.1.1.1.2.cmml">
         <mo id="S2.SS3.p5.1.m1.1.1.1.1.1.2" stretchy="false" xref="S2.SS3.p5.1.m1.1.1.1.1.2.cmml">
          {
         </mo>
         <msubsup id="S2.SS3.p5.1.m1.1.1.1.1.1.1" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1.cmml">
          <mi id="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.2" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.2.cmml">
           z
          </mi>
          <mi id="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.3" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.3.cmml">
           t
          </mi>
          <mi id="S2.SS3.p5.1.m1.1.1.1.1.1.1.3" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1.3.cmml">
           p
          </mi>
         </msubsup>
         <mo id="S2.SS3.p5.1.m1.1.1.1.1.1.3" stretchy="false" xref="S2.SS3.p5.1.m1.1.1.1.1.2.cmml">
          }
         </mo>
        </mrow>
        <mrow id="S2.SS3.p5.1.m1.1.1.1.3" xref="S2.SS3.p5.1.m1.1.1.1.3.cmml">
         <mi id="S2.SS3.p5.1.m1.1.1.1.3.2" xref="S2.SS3.p5.1.m1.1.1.1.3.2.cmml">
          t
         </mi>
         <mo id="S2.SS3.p5.1.m1.1.1.1.3.1" xref="S2.SS3.p5.1.m1.1.1.1.3.1.cmml">
          =
         </mo>
         <mn id="S2.SS3.p5.1.m1.1.1.1.3.3" xref="S2.SS3.p5.1.m1.1.1.1.3.3.cmml">
          1
         </mn>
        </mrow>
        <mi id="S2.SS3.p5.1.m1.1.1.3" xref="S2.SS3.p5.1.m1.1.1.3.cmml">
         τ
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p5.1.m1.1b">
        <apply id="S2.SS3.p5.1.m1.1.1.cmml" xref="S2.SS3.p5.1.m1.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p5.1.m1.1.1.2.cmml" xref="S2.SS3.p5.1.m1.1.1">
          superscript
         </csymbol>
         <apply id="S2.SS3.p5.1.m1.1.1.1.cmml" xref="S2.SS3.p5.1.m1.1.1">
          <csymbol cd="ambiguous" id="S2.SS3.p5.1.m1.1.1.1.2.cmml" xref="S2.SS3.p5.1.m1.1.1">
           subscript
          </csymbol>
          <set id="S2.SS3.p5.1.m1.1.1.1.1.2.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.1">
           <apply id="S2.SS3.p5.1.m1.1.1.1.1.1.1.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1">
            <csymbol cd="ambiguous" id="S2.SS3.p5.1.m1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1">
             superscript
            </csymbol>
            <apply id="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1">
             <csymbol cd="ambiguous" id="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.1.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1">
              subscript
             </csymbol>
             <ci id="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.2.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.2">
              𝑧
             </ci>
             <ci id="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.3.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1.2.3">
              𝑡
             </ci>
            </apply>
            <ci id="S2.SS3.p5.1.m1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.1.1.3">
             𝑝
            </ci>
           </apply>
          </set>
          <apply id="S2.SS3.p5.1.m1.1.1.1.3.cmml" xref="S2.SS3.p5.1.m1.1.1.1.3">
           <eq id="S2.SS3.p5.1.m1.1.1.1.3.1.cmml" xref="S2.SS3.p5.1.m1.1.1.1.3.1">
           </eq>
           <ci id="S2.SS3.p5.1.m1.1.1.1.3.2.cmml" xref="S2.SS3.p5.1.m1.1.1.1.3.2">
            𝑡
           </ci>
           <cn id="S2.SS3.p5.1.m1.1.1.1.3.3.cmml" type="integer" xref="S2.SS3.p5.1.m1.1.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
         <ci id="S2.SS3.p5.1.m1.1.1.3.cmml" xref="S2.SS3.p5.1.m1.1.1.3">
          𝜏
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p5.1.m1.1c">
        \{z_{t}^{p}\}_{t=1}^{\tau}
       </annotation>
      </semantics>
     </math>
     that lead to an optimal response. Formally, this can be viewed as an optimal control problem:
    </p>
    <table class="ltx_equationgroup ltx_eqn_table" id="S2.E1">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S2.E1X">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_td ltx_align_right ltx_eqn_cell">
        <math alttext="\displaystyle\max_{\tau}" class="ltx_Math" display="inline" id="S2.E1X.2.1.1.m1.1">
         <semantics id="S2.E1X.2.1.1.m1.1a">
          <munder id="S2.E1X.2.1.1.m1.1.1" xref="S2.E1X.2.1.1.m1.1.1.cmml">
           <mi id="S2.E1X.2.1.1.m1.1.1.2" xref="S2.E1X.2.1.1.m1.1.1.2.cmml">
            max
           </mi>
           <mi id="S2.E1X.2.1.1.m1.1.1.3" xref="S2.E1X.2.1.1.m1.1.1.3.cmml">
            τ
           </mi>
          </munder>
          <annotation-xml encoding="MathML-Content" id="S2.E1X.2.1.1.m1.1b">
           <apply id="S2.E1X.2.1.1.m1.1.1.cmml" xref="S2.E1X.2.1.1.m1.1.1">
            <csymbol cd="ambiguous" id="S2.E1X.2.1.1.m1.1.1.1.cmml" xref="S2.E1X.2.1.1.m1.1.1">
             subscript
            </csymbol>
            <max id="S2.E1X.2.1.1.m1.1.1.2.cmml" xref="S2.E1X.2.1.1.m1.1.1.2">
            </max>
            <ci id="S2.E1X.2.1.1.m1.1.1.3.cmml" xref="S2.E1X.2.1.1.m1.1.1.3">
             𝜏
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.E1X.2.1.1.m1.1c">
           \displaystyle\max_{\tau}
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_td ltx_align_left ltx_eqn_cell">
        <math alttext="\displaystyle\max_{z_{t}^{p}\in\mathcal{P}_{t}}f(z_{\tau}^{r};z^{q})+R(\tau)" class="ltx_Math" display="inline" id="S2.E1X.3.2.2.m1.3">
         <semantics id="S2.E1X.3.2.2.m1.3a">
          <mrow id="S2.E1X.3.2.2.m1.3.3" xref="S2.E1X.3.2.2.m1.3.3.cmml">
           <mrow id="S2.E1X.3.2.2.m1.3.3.2" xref="S2.E1X.3.2.2.m1.3.3.2.cmml">
            <mrow id="S2.E1X.3.2.2.m1.3.3.2.4" xref="S2.E1X.3.2.2.m1.3.3.2.4.cmml">
             <munder id="S2.E1X.3.2.2.m1.3.3.2.4.1" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.cmml">
              <mi id="S2.E1X.3.2.2.m1.3.3.2.4.1.2" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.2.cmml">
               max
              </mi>
              <mrow id="S2.E1X.3.2.2.m1.3.3.2.4.1.3" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.cmml">
               <msubsup id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.cmml">
                <mi id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.2" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.2.cmml">
                 z
                </mi>
                <mi id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.3" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.3.cmml">
                 t
                </mi>
                <mi id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.3" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.3.cmml">
                 p
                </mi>
               </msubsup>
               <mo id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.1" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.1.cmml">
                ∈
               </mo>
               <msub id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.cmml">
                <mi class="ltx_font_mathcaligraphic" id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.2" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.2.cmml">
                 𝒫
                </mi>
                <mi id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.3" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.3.cmml">
                 t
                </mi>
               </msub>
              </mrow>
             </munder>
             <mo id="S2.E1X.3.2.2.m1.3.3.2.4a" lspace="0.167em" xref="S2.E1X.3.2.2.m1.3.3.2.4.cmml">
              ⁡
             </mo>
             <mi id="S2.E1X.3.2.2.m1.3.3.2.4.2" xref="S2.E1X.3.2.2.m1.3.3.2.4.2.cmml">
              f
             </mi>
            </mrow>
            <mo id="S2.E1X.3.2.2.m1.3.3.2.3" lspace="0em" rspace="0em" xref="S2.E1X.3.2.2.m1.3.3.2.3.cmml">
             ​
            </mo>
            <mrow id="S2.E1X.3.2.2.m1.3.3.2.2.2" xref="S2.E1X.3.2.2.m1.3.3.2.2.3.cmml">
             <mo id="S2.E1X.3.2.2.m1.3.3.2.2.2.3" stretchy="false" xref="S2.E1X.3.2.2.m1.3.3.2.2.3.cmml">
              (
             </mo>
             <msubsup id="S2.E1X.3.2.2.m1.2.2.1.1.1.1" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1.cmml">
              <mi id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.2" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.2.cmml">
               z
              </mi>
              <mi id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.3" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.3.cmml">
               τ
              </mi>
              <mi id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.3" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1.3.cmml">
               r
              </mi>
             </msubsup>
             <mo id="S2.E1X.3.2.2.m1.3.3.2.2.2.4" xref="S2.E1X.3.2.2.m1.3.3.2.2.3.cmml">
              ;
             </mo>
             <msup id="S2.E1X.3.2.2.m1.3.3.2.2.2.2" xref="S2.E1X.3.2.2.m1.3.3.2.2.2.2.cmml">
              <mi id="S2.E1X.3.2.2.m1.3.3.2.2.2.2.2" xref="S2.E1X.3.2.2.m1.3.3.2.2.2.2.2.cmml">
               z
              </mi>
              <mi id="S2.E1X.3.2.2.m1.3.3.2.2.2.2.3" xref="S2.E1X.3.2.2.m1.3.3.2.2.2.2.3.cmml">
               q
              </mi>
             </msup>
             <mo id="S2.E1X.3.2.2.m1.3.3.2.2.2.5" stretchy="false" xref="S2.E1X.3.2.2.m1.3.3.2.2.3.cmml">
              )
             </mo>
            </mrow>
           </mrow>
           <mo id="S2.E1X.3.2.2.m1.3.3.3" xref="S2.E1X.3.2.2.m1.3.3.3.cmml">
            +
           </mo>
           <mrow id="S2.E1X.3.2.2.m1.3.3.4" xref="S2.E1X.3.2.2.m1.3.3.4.cmml">
            <mi id="S2.E1X.3.2.2.m1.3.3.4.2" xref="S2.E1X.3.2.2.m1.3.3.4.2.cmml">
             R
            </mi>
            <mo id="S2.E1X.3.2.2.m1.3.3.4.1" lspace="0em" rspace="0em" xref="S2.E1X.3.2.2.m1.3.3.4.1.cmml">
             ​
            </mo>
            <mrow id="S2.E1X.3.2.2.m1.3.3.4.3.2" xref="S2.E1X.3.2.2.m1.3.3.4.cmml">
             <mo id="S2.E1X.3.2.2.m1.3.3.4.3.2.1" stretchy="false" xref="S2.E1X.3.2.2.m1.3.3.4.cmml">
              (
             </mo>
             <mi id="S2.E1X.3.2.2.m1.1.1" xref="S2.E1X.3.2.2.m1.1.1.cmml">
              τ
             </mi>
             <mo id="S2.E1X.3.2.2.m1.3.3.4.3.2.2" stretchy="false" xref="S2.E1X.3.2.2.m1.3.3.4.cmml">
              )
             </mo>
            </mrow>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S2.E1X.3.2.2.m1.3b">
           <apply id="S2.E1X.3.2.2.m1.3.3.cmml" xref="S2.E1X.3.2.2.m1.3.3">
            <plus id="S2.E1X.3.2.2.m1.3.3.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.3">
            </plus>
            <apply id="S2.E1X.3.2.2.m1.3.3.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2">
             <times id="S2.E1X.3.2.2.m1.3.3.2.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.3">
             </times>
             <apply id="S2.E1X.3.2.2.m1.3.3.2.4.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4">
              <apply id="S2.E1X.3.2.2.m1.3.3.2.4.1.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1">
               <csymbol cd="ambiguous" id="S2.E1X.3.2.2.m1.3.3.2.4.1.1.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1">
                subscript
               </csymbol>
               <max id="S2.E1X.3.2.2.m1.3.3.2.4.1.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.2">
               </max>
               <apply id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3">
                <in id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.1.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.1">
                </in>
                <apply id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2">
                 <csymbol cd="ambiguous" id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.1.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2">
                  superscript
                 </csymbol>
                 <apply id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2">
                  <csymbol cd="ambiguous" id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.1.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2">
                   subscript
                  </csymbol>
                  <ci id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.2">
                   𝑧
                  </ci>
                  <ci id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.2.3">
                   𝑡
                  </ci>
                 </apply>
                 <ci id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.2.3">
                  𝑝
                 </ci>
                </apply>
                <apply id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3">
                 <csymbol cd="ambiguous" id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.1.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3">
                  subscript
                 </csymbol>
                 <ci id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.2">
                  𝒫
                 </ci>
                 <ci id="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.1.3.3.3">
                  𝑡
                 </ci>
                </apply>
               </apply>
              </apply>
              <ci id="S2.E1X.3.2.2.m1.3.3.2.4.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.4.2">
               𝑓
              </ci>
             </apply>
             <list id="S2.E1X.3.2.2.m1.3.3.2.2.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.2.2">
              <apply id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.cmml" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1">
               <csymbol cd="ambiguous" id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.1.cmml" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1">
                superscript
               </csymbol>
               <apply id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.cmml" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1">
                <csymbol cd="ambiguous" id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.1.cmml" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1">
                 subscript
                </csymbol>
                <ci id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.2.cmml" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.2">
                 𝑧
                </ci>
                <ci id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.3.cmml" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1.2.3">
                 𝜏
                </ci>
               </apply>
               <ci id="S2.E1X.3.2.2.m1.2.2.1.1.1.1.3.cmml" xref="S2.E1X.3.2.2.m1.2.2.1.1.1.1.3">
                𝑟
               </ci>
              </apply>
              <apply id="S2.E1X.3.2.2.m1.3.3.2.2.2.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.2.2.2">
               <csymbol cd="ambiguous" id="S2.E1X.3.2.2.m1.3.3.2.2.2.2.1.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.2.2.2">
                superscript
               </csymbol>
               <ci id="S2.E1X.3.2.2.m1.3.3.2.2.2.2.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.2.2.2.2">
                𝑧
               </ci>
               <ci id="S2.E1X.3.2.2.m1.3.3.2.2.2.2.3.cmml" xref="S2.E1X.3.2.2.m1.3.3.2.2.2.2.3">
                𝑞
               </ci>
              </apply>
             </list>
            </apply>
            <apply id="S2.E1X.3.2.2.m1.3.3.4.cmml" xref="S2.E1X.3.2.2.m1.3.3.4">
             <times id="S2.E1X.3.2.2.m1.3.3.4.1.cmml" xref="S2.E1X.3.2.2.m1.3.3.4.1">
             </times>
             <ci id="S2.E1X.3.2.2.m1.3.3.4.2.cmml" xref="S2.E1X.3.2.2.m1.3.3.4.2">
              𝑅
             </ci>
             <ci id="S2.E1X.3.2.2.m1.1.1.cmml" xref="S2.E1X.3.2.2.m1.1.1">
              𝜏
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.E1X.3.2.2.m1.3c">
           \displaystyle\max_{z_{t}^{p}\in\mathcal{P}_{t}}f(z_{\tau}^{r};z^{q})+R(\tau)
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
       <td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="2">
        <span class="ltx_tag ltx_tag_equationgroup ltx_align_right">
         (1)
        </span>
       </td>
      </tr>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S2.E1Xa">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_td ltx_align_right ltx_eqn_cell">
        <math alttext="\displaystyle s.t." class="ltx_Math" display="inline" id="S2.E1Xa.2.1.1.m1.3">
         <semantics id="S2.E1Xa.2.1.1.m1.3a">
          <mrow id="S2.E1Xa.2.1.1.m1.3.3.1">
           <mrow id="S2.E1Xa.2.1.1.m1.3.3.1.1.2" xref="S2.E1Xa.2.1.1.m1.3.3.1.1.1.cmml">
            <mi id="S2.E1Xa.2.1.1.m1.1.1" xref="S2.E1Xa.2.1.1.m1.1.1.cmml">
             s
            </mi>
            <mo id="S2.E1Xa.2.1.1.m1.3.3.1.1.2.1" lspace="0em" rspace="0.167em" xref="S2.E1Xa.2.1.1.m1.3.3.1.1.1a.cmml">
             .
            </mo>
            <mi id="S2.E1Xa.2.1.1.m1.2.2" xref="S2.E1Xa.2.1.1.m1.2.2.cmml">
             t
            </mi>
           </mrow>
           <mo id="S2.E1Xa.2.1.1.m1.3.3.1.2" lspace="0em">
            .
           </mo>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S2.E1Xa.2.1.1.m1.3b">
           <apply id="S2.E1Xa.2.1.1.m1.3.3.1.1.1.cmml" xref="S2.E1Xa.2.1.1.m1.3.3.1.1.2">
            <csymbol cd="ambiguous" id="S2.E1Xa.2.1.1.m1.3.3.1.1.1a.cmml" xref="S2.E1Xa.2.1.1.m1.3.3.1.1.2.1">
             formulae-sequence
            </csymbol>
            <ci id="S2.E1Xa.2.1.1.m1.1.1.cmml" xref="S2.E1Xa.2.1.1.m1.1.1">
             𝑠
            </ci>
            <ci id="S2.E1Xa.2.1.1.m1.2.2.cmml" xref="S2.E1Xa.2.1.1.m1.2.2">
             𝑡
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.E1Xa.2.1.1.m1.3c">
           \displaystyle s.t.
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_td ltx_align_left ltx_eqn_cell">
        <math alttext="\displaystyle z_{t}^{r}=\operatorname{LLM}(z_{t}^{p})" class="ltx_Math" display="inline" id="S2.E1Xa.3.2.2.m1.2">
         <semantics id="S2.E1Xa.3.2.2.m1.2a">
          <mrow id="S2.E1Xa.3.2.2.m1.2.2" xref="S2.E1Xa.3.2.2.m1.2.2.cmml">
           <msubsup id="S2.E1Xa.3.2.2.m1.2.2.3" xref="S2.E1Xa.3.2.2.m1.2.2.3.cmml">
            <mi id="S2.E1Xa.3.2.2.m1.2.2.3.2.2" xref="S2.E1Xa.3.2.2.m1.2.2.3.2.2.cmml">
             z
            </mi>
            <mi id="S2.E1Xa.3.2.2.m1.2.2.3.2.3" xref="S2.E1Xa.3.2.2.m1.2.2.3.2.3.cmml">
             t
            </mi>
            <mi id="S2.E1Xa.3.2.2.m1.2.2.3.3" xref="S2.E1Xa.3.2.2.m1.2.2.3.3.cmml">
             r
            </mi>
           </msubsup>
           <mo id="S2.E1Xa.3.2.2.m1.2.2.2" xref="S2.E1Xa.3.2.2.m1.2.2.2.cmml">
            =
           </mo>
           <mrow id="S2.E1Xa.3.2.2.m1.2.2.1.1" xref="S2.E1Xa.3.2.2.m1.2.2.1.2.cmml">
            <mi id="S2.E1Xa.3.2.2.m1.1.1" xref="S2.E1Xa.3.2.2.m1.1.1.cmml">
             LLM
            </mi>
            <mo id="S2.E1Xa.3.2.2.m1.2.2.1.1a" xref="S2.E1Xa.3.2.2.m1.2.2.1.2.cmml">
             ⁡
            </mo>
            <mrow id="S2.E1Xa.3.2.2.m1.2.2.1.1.1" xref="S2.E1Xa.3.2.2.m1.2.2.1.2.cmml">
             <mo id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.2" stretchy="false" xref="S2.E1Xa.3.2.2.m1.2.2.1.2.cmml">
              (
             </mo>
             <msubsup id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.cmml">
              <mi id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.2" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.2.cmml">
               z
              </mi>
              <mi id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.3" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.3.cmml">
               t
              </mi>
              <mi id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.3" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.3.cmml">
               p
              </mi>
             </msubsup>
             <mo id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.3" stretchy="false" xref="S2.E1Xa.3.2.2.m1.2.2.1.2.cmml">
              )
             </mo>
            </mrow>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S2.E1Xa.3.2.2.m1.2b">
           <apply id="S2.E1Xa.3.2.2.m1.2.2.cmml" xref="S2.E1Xa.3.2.2.m1.2.2">
            <eq id="S2.E1Xa.3.2.2.m1.2.2.2.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.2">
            </eq>
            <apply id="S2.E1Xa.3.2.2.m1.2.2.3.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.3">
             <csymbol cd="ambiguous" id="S2.E1Xa.3.2.2.m1.2.2.3.1.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.3">
              superscript
             </csymbol>
             <apply id="S2.E1Xa.3.2.2.m1.2.2.3.2.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.3">
              <csymbol cd="ambiguous" id="S2.E1Xa.3.2.2.m1.2.2.3.2.1.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.3">
               subscript
              </csymbol>
              <ci id="S2.E1Xa.3.2.2.m1.2.2.3.2.2.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.3.2.2">
               𝑧
              </ci>
              <ci id="S2.E1Xa.3.2.2.m1.2.2.3.2.3.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.3.2.3">
               𝑡
              </ci>
             </apply>
             <ci id="S2.E1Xa.3.2.2.m1.2.2.3.3.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.3.3">
              𝑟
             </ci>
            </apply>
            <apply id="S2.E1Xa.3.2.2.m1.2.2.1.2.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.1.1">
             <ci id="S2.E1Xa.3.2.2.m1.1.1.cmml" xref="S2.E1Xa.3.2.2.m1.1.1">
              LLM
             </ci>
             <apply id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1">
              <csymbol cd="ambiguous" id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.1.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1">
               superscript
              </csymbol>
              <apply id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1">
               <csymbol cd="ambiguous" id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.1.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1">
                subscript
               </csymbol>
               <ci id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.2.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.2">
                𝑧
               </ci>
               <ci id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.3.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.2.3">
                𝑡
               </ci>
              </apply>
              <ci id="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.3.cmml" xref="S2.E1Xa.3.2.2.m1.2.2.1.1.1.1.3">
               𝑝
              </ci>
             </apply>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.E1Xa.3.2.2.m1.2c">
           \displaystyle z_{t}^{r}=\operatorname{LLM}(z_{t}^{p})
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
      </tr>
     </tbody>
    </table>
    <p class="ltx_p" id="S2.SS3.p5.4">
     where
     <math alttext="R(\tau)" class="ltx_Math" display="inline" id="S2.SS3.p5.2.m1.1">
      <semantics id="S2.SS3.p5.2.m1.1a">
       <mrow id="S2.SS3.p5.2.m1.1.2" xref="S2.SS3.p5.2.m1.1.2.cmml">
        <mi id="S2.SS3.p5.2.m1.1.2.2" xref="S2.SS3.p5.2.m1.1.2.2.cmml">
         R
        </mi>
        <mo id="S2.SS3.p5.2.m1.1.2.1" lspace="0em" rspace="0em" xref="S2.SS3.p5.2.m1.1.2.1.cmml">
         ​
        </mo>
        <mrow id="S2.SS3.p5.2.m1.1.2.3.2" xref="S2.SS3.p5.2.m1.1.2.cmml">
         <mo id="S2.SS3.p5.2.m1.1.2.3.2.1" stretchy="false" xref="S2.SS3.p5.2.m1.1.2.cmml">
          (
         </mo>
         <mi id="S2.SS3.p5.2.m1.1.1" xref="S2.SS3.p5.2.m1.1.1.cmml">
          τ
         </mi>
         <mo id="S2.SS3.p5.2.m1.1.2.3.2.2" stretchy="false" xref="S2.SS3.p5.2.m1.1.2.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p5.2.m1.1b">
        <apply id="S2.SS3.p5.2.m1.1.2.cmml" xref="S2.SS3.p5.2.m1.1.2">
         <times id="S2.SS3.p5.2.m1.1.2.1.cmml" xref="S2.SS3.p5.2.m1.1.2.1">
         </times>
         <ci id="S2.SS3.p5.2.m1.1.2.2.cmml" xref="S2.SS3.p5.2.m1.1.2.2">
          𝑅
         </ci>
         <ci id="S2.SS3.p5.2.m1.1.1.cmml" xref="S2.SS3.p5.2.m1.1.1">
          𝜏
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p5.2.m1.1c">
        R(\tau)
       </annotation>
      </semantics>
     </math>
     is a regularization term. An example of
     <math alttext="R(t)" class="ltx_Math" display="inline" id="S2.SS3.p5.3.m2.1">
      <semantics id="S2.SS3.p5.3.m2.1a">
       <mrow id="S2.SS3.p5.3.m2.1.2" xref="S2.SS3.p5.3.m2.1.2.cmml">
        <mi id="S2.SS3.p5.3.m2.1.2.2" xref="S2.SS3.p5.3.m2.1.2.2.cmml">
         R
        </mi>
        <mo id="S2.SS3.p5.3.m2.1.2.1" lspace="0em" rspace="0em" xref="S2.SS3.p5.3.m2.1.2.1.cmml">
         ​
        </mo>
        <mrow id="S2.SS3.p5.3.m2.1.2.3.2" xref="S2.SS3.p5.3.m2.1.2.cmml">
         <mo id="S2.SS3.p5.3.m2.1.2.3.2.1" stretchy="false" xref="S2.SS3.p5.3.m2.1.2.cmml">
          (
         </mo>
         <mi id="S2.SS3.p5.3.m2.1.1" xref="S2.SS3.p5.3.m2.1.1.cmml">
          t
         </mi>
         <mo id="S2.SS3.p5.3.m2.1.2.3.2.2" stretchy="false" xref="S2.SS3.p5.3.m2.1.2.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p5.3.m2.1b">
        <apply id="S2.SS3.p5.3.m2.1.2.cmml" xref="S2.SS3.p5.3.m2.1.2">
         <times id="S2.SS3.p5.3.m2.1.2.1.cmml" xref="S2.SS3.p5.3.m2.1.2.1">
         </times>
         <ci id="S2.SS3.p5.3.m2.1.2.2.cmml" xref="S2.SS3.p5.3.m2.1.2.2">
          𝑅
         </ci>
         <ci id="S2.SS3.p5.3.m2.1.1.cmml" xref="S2.SS3.p5.3.m2.1.1">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p5.3.m2.1c">
        R(t)
       </annotation>
      </semantics>
     </math>
     is the following function, which enforces a maximum interaction limit of
     <math alttext="T" class="ltx_Math" display="inline" id="S2.SS3.p5.4.m3.1">
      <semantics id="S2.SS3.p5.4.m3.1a">
       <mi id="S2.SS3.p5.4.m3.1.1" xref="S2.SS3.p5.4.m3.1.1.cmml">
        T
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p5.4.m3.1b">
        <ci id="S2.SS3.p5.4.m3.1.1.cmml" xref="S2.SS3.p5.4.m3.1.1">
         𝑇
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p5.4.m3.1c">
        T
       </annotation>
      </semantics>
     </math>
     :
    </p>
    <table class="ltx_equation ltx_eqn_table" id="S2.Ex3">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_eqn_cell ltx_align_center">
        <math alttext="R(t)=\begin{cases}0,\quad&amp;t\leq T\\
-\infty,&amp;t&gt;T\end{cases}" class="ltx_Math" display="block" id="S2.Ex3.m1.5">
         <semantics id="S2.Ex3.m1.5a">
          <mrow id="S2.Ex3.m1.5.6" xref="S2.Ex3.m1.5.6.cmml">
           <mrow id="S2.Ex3.m1.5.6.2" xref="S2.Ex3.m1.5.6.2.cmml">
            <mi id="S2.Ex3.m1.5.6.2.2" xref="S2.Ex3.m1.5.6.2.2.cmml">
             R
            </mi>
            <mo id="S2.Ex3.m1.5.6.2.1" lspace="0em" rspace="0em" xref="S2.Ex3.m1.5.6.2.1.cmml">
             ​
            </mo>
            <mrow id="S2.Ex3.m1.5.6.2.3.2" xref="S2.Ex3.m1.5.6.2.cmml">
             <mo id="S2.Ex3.m1.5.6.2.3.2.1" stretchy="false" xref="S2.Ex3.m1.5.6.2.cmml">
              (
             </mo>
             <mi id="S2.Ex3.m1.5.5" xref="S2.Ex3.m1.5.5.cmml">
              t
             </mi>
             <mo id="S2.Ex3.m1.5.6.2.3.2.2" stretchy="false" xref="S2.Ex3.m1.5.6.2.cmml">
              )
             </mo>
            </mrow>
           </mrow>
           <mo id="S2.Ex3.m1.5.6.1" xref="S2.Ex3.m1.5.6.1.cmml">
            =
           </mo>
           <mrow id="S2.Ex3.m1.4.4" xref="S2.Ex3.m1.5.6.3.1.cmml">
            <mo id="S2.Ex3.m1.4.4.5" xref="S2.Ex3.m1.5.6.3.1.1.cmml">
             {
            </mo>
            <mtable columnspacing="5pt" displaystyle="true" id="S2.Ex3.m1.4.4.4" rowspacing="0pt" xref="S2.Ex3.m1.5.6.3.1.cmml">
             <mtr id="S2.Ex3.m1.4.4.4a" xref="S2.Ex3.m1.5.6.3.1.cmml">
              <mtd class="ltx_align_left" columnalign="left" id="S2.Ex3.m1.4.4.4b" xref="S2.Ex3.m1.5.6.3.1.cmml">
               <mrow id="S2.Ex3.m1.1.1.1.1.1.1.3" xref="S2.Ex3.m1.5.6.3.1.cmml">
                <mn id="S2.Ex3.m1.1.1.1.1.1.1.1" xref="S2.Ex3.m1.1.1.1.1.1.1.1.cmml">
                 0
                </mn>
                <mo id="S2.Ex3.m1.1.1.1.1.1.1.3.1" xref="S2.Ex3.m1.5.6.3.1.cmml">
                 ,
                </mo>
               </mrow>
              </mtd>
              <mtd class="ltx_align_left" columnalign="left" id="S2.Ex3.m1.4.4.4c" xref="S2.Ex3.m1.5.6.3.1.cmml">
               <mrow id="S2.Ex3.m1.2.2.2.2.2.1" xref="S2.Ex3.m1.2.2.2.2.2.1.cmml">
                <mi id="S2.Ex3.m1.2.2.2.2.2.1.2" xref="S2.Ex3.m1.2.2.2.2.2.1.2.cmml">
                 t
                </mi>
                <mo id="S2.Ex3.m1.2.2.2.2.2.1.1" xref="S2.Ex3.m1.2.2.2.2.2.1.1.cmml">
                 ≤
                </mo>
                <mi id="S2.Ex3.m1.2.2.2.2.2.1.3" xref="S2.Ex3.m1.2.2.2.2.2.1.3.cmml">
                 T
                </mi>
               </mrow>
              </mtd>
             </mtr>
             <mtr id="S2.Ex3.m1.4.4.4d" xref="S2.Ex3.m1.5.6.3.1.cmml">
              <mtd class="ltx_align_left" columnalign="left" id="S2.Ex3.m1.4.4.4e" xref="S2.Ex3.m1.5.6.3.1.cmml">
               <mrow id="S2.Ex3.m1.3.3.3.3.1.1.1" xref="S2.Ex3.m1.3.3.3.3.1.1.1.1.cmml">
                <mrow id="S2.Ex3.m1.3.3.3.3.1.1.1.1" xref="S2.Ex3.m1.3.3.3.3.1.1.1.1.cmml">
                 <mo id="S2.Ex3.m1.3.3.3.3.1.1.1.1a" xref="S2.Ex3.m1.3.3.3.3.1.1.1.1.cmml">
                  −
                 </mo>
                 <mi id="S2.Ex3.m1.3.3.3.3.1.1.1.1.2" mathvariant="normal" xref="S2.Ex3.m1.3.3.3.3.1.1.1.1.2.cmml">
                  ∞
                 </mi>
                </mrow>
                <mo id="S2.Ex3.m1.3.3.3.3.1.1.1.2" xref="S2.Ex3.m1.3.3.3.3.1.1.1.1.cmml">
                 ,
                </mo>
               </mrow>
              </mtd>
              <mtd class="ltx_align_left" columnalign="left" id="S2.Ex3.m1.4.4.4f" xref="S2.Ex3.m1.5.6.3.1.cmml">
               <mrow id="S2.Ex3.m1.4.4.4.4.2.1" xref="S2.Ex3.m1.4.4.4.4.2.1.cmml">
                <mi id="S2.Ex3.m1.4.4.4.4.2.1.2" xref="S2.Ex3.m1.4.4.4.4.2.1.2.cmml">
                 t
                </mi>
                <mo id="S2.Ex3.m1.4.4.4.4.2.1.1" xref="S2.Ex3.m1.4.4.4.4.2.1.1.cmml">
                 &gt;
                </mo>
                <mi id="S2.Ex3.m1.4.4.4.4.2.1.3" xref="S2.Ex3.m1.4.4.4.4.2.1.3.cmml">
                 T
                </mi>
               </mrow>
              </mtd>
             </mtr>
            </mtable>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S2.Ex3.m1.5b">
           <apply id="S2.Ex3.m1.5.6.cmml" xref="S2.Ex3.m1.5.6">
            <eq id="S2.Ex3.m1.5.6.1.cmml" xref="S2.Ex3.m1.5.6.1">
            </eq>
            <apply id="S2.Ex3.m1.5.6.2.cmml" xref="S2.Ex3.m1.5.6.2">
             <times id="S2.Ex3.m1.5.6.2.1.cmml" xref="S2.Ex3.m1.5.6.2.1">
             </times>
             <ci id="S2.Ex3.m1.5.6.2.2.cmml" xref="S2.Ex3.m1.5.6.2.2">
              𝑅
             </ci>
             <ci id="S2.Ex3.m1.5.5.cmml" xref="S2.Ex3.m1.5.5">
              𝑡
             </ci>
            </apply>
            <apply id="S2.Ex3.m1.5.6.3.1.cmml" xref="S2.Ex3.m1.4.4">
             <csymbol cd="latexml" id="S2.Ex3.m1.5.6.3.1.1.cmml" xref="S2.Ex3.m1.4.4.5">
              cases
             </csymbol>
             <cn id="S2.Ex3.m1.1.1.1.1.1.1.1.cmml" type="integer" xref="S2.Ex3.m1.1.1.1.1.1.1.1">
              0
             </cn>
             <apply id="S2.Ex3.m1.2.2.2.2.2.1.cmml" xref="S2.Ex3.m1.2.2.2.2.2.1">
              <leq id="S2.Ex3.m1.2.2.2.2.2.1.1.cmml" xref="S2.Ex3.m1.2.2.2.2.2.1.1">
              </leq>
              <ci id="S2.Ex3.m1.2.2.2.2.2.1.2.cmml" xref="S2.Ex3.m1.2.2.2.2.2.1.2">
               𝑡
              </ci>
              <ci id="S2.Ex3.m1.2.2.2.2.2.1.3.cmml" xref="S2.Ex3.m1.2.2.2.2.2.1.3">
               𝑇
              </ci>
             </apply>
             <apply id="S2.Ex3.m1.3.3.3.3.1.1.1.1.cmml" xref="S2.Ex3.m1.3.3.3.3.1.1.1">
              <minus id="S2.Ex3.m1.3.3.3.3.1.1.1.1.1.cmml" xref="S2.Ex3.m1.3.3.3.3.1.1.1">
              </minus>
              <infinity id="S2.Ex3.m1.3.3.3.3.1.1.1.1.2.cmml" xref="S2.Ex3.m1.3.3.3.3.1.1.1.1.2">
              </infinity>
             </apply>
             <apply id="S2.Ex3.m1.4.4.4.4.2.1.cmml" xref="S2.Ex3.m1.4.4.4.4.2.1">
              <gt id="S2.Ex3.m1.4.4.4.4.2.1.1.cmml" xref="S2.Ex3.m1.4.4.4.4.2.1.1">
              </gt>
              <ci id="S2.Ex3.m1.4.4.4.4.2.1.2.cmml" xref="S2.Ex3.m1.4.4.4.4.2.1.2">
               𝑡
              </ci>
              <ci id="S2.Ex3.m1.4.4.4.4.2.1.3.cmml" xref="S2.Ex3.m1.4.4.4.4.2.1.3">
               𝑇
              </ci>
             </apply>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.Ex3.m1.5c">
           R(t)=\begin{cases}0,\quad&amp;t\leq T\\
-\infty,&amp;t&gt;T\end{cases}
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
      </tr>
     </tbody>
    </table>
   </div>
   <div class="ltx_para" id="S2.SS3.p6">
    <p class="ltx_p" id="S2.SS3.p6.1">
     In this formulation,
     <math alttext="\{\mathcal{P}_{t}\}_{t=1}^{\tau}" class="ltx_Math" display="inline" id="S2.SS3.p6.1.m1.1">
      <semantics id="S2.SS3.p6.1.m1.1a">
       <msubsup id="S2.SS3.p6.1.m1.1.1" xref="S2.SS3.p6.1.m1.1.1.cmml">
        <mrow id="S2.SS3.p6.1.m1.1.1.1.1.1" xref="S2.SS3.p6.1.m1.1.1.1.1.2.cmml">
         <mo id="S2.SS3.p6.1.m1.1.1.1.1.1.2" stretchy="false" xref="S2.SS3.p6.1.m1.1.1.1.1.2.cmml">
          {
         </mo>
         <msub id="S2.SS3.p6.1.m1.1.1.1.1.1.1" xref="S2.SS3.p6.1.m1.1.1.1.1.1.1.cmml">
          <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p6.1.m1.1.1.1.1.1.1.2" xref="S2.SS3.p6.1.m1.1.1.1.1.1.1.2.cmml">
           𝒫
          </mi>
          <mi id="S2.SS3.p6.1.m1.1.1.1.1.1.1.3" xref="S2.SS3.p6.1.m1.1.1.1.1.1.1.3.cmml">
           t
          </mi>
         </msub>
         <mo id="S2.SS3.p6.1.m1.1.1.1.1.1.3" stretchy="false" xref="S2.SS3.p6.1.m1.1.1.1.1.2.cmml">
          }
         </mo>
        </mrow>
        <mrow id="S2.SS3.p6.1.m1.1.1.1.3" xref="S2.SS3.p6.1.m1.1.1.1.3.cmml">
         <mi id="S2.SS3.p6.1.m1.1.1.1.3.2" xref="S2.SS3.p6.1.m1.1.1.1.3.2.cmml">
          t
         </mi>
         <mo id="S2.SS3.p6.1.m1.1.1.1.3.1" xref="S2.SS3.p6.1.m1.1.1.1.3.1.cmml">
          =
         </mo>
         <mn id="S2.SS3.p6.1.m1.1.1.1.3.3" xref="S2.SS3.p6.1.m1.1.1.1.3.3.cmml">
          1
         </mn>
        </mrow>
        <mi id="S2.SS3.p6.1.m1.1.1.3" xref="S2.SS3.p6.1.m1.1.1.3.cmml">
         τ
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p6.1.m1.1b">
        <apply id="S2.SS3.p6.1.m1.1.1.cmml" xref="S2.SS3.p6.1.m1.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p6.1.m1.1.1.2.cmml" xref="S2.SS3.p6.1.m1.1.1">
          superscript
         </csymbol>
         <apply id="S2.SS3.p6.1.m1.1.1.1.cmml" xref="S2.SS3.p6.1.m1.1.1">
          <csymbol cd="ambiguous" id="S2.SS3.p6.1.m1.1.1.1.2.cmml" xref="S2.SS3.p6.1.m1.1.1">
           subscript
          </csymbol>
          <set id="S2.SS3.p6.1.m1.1.1.1.1.2.cmml" xref="S2.SS3.p6.1.m1.1.1.1.1.1">
           <apply id="S2.SS3.p6.1.m1.1.1.1.1.1.1.cmml" xref="S2.SS3.p6.1.m1.1.1.1.1.1.1">
            <csymbol cd="ambiguous" id="S2.SS3.p6.1.m1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p6.1.m1.1.1.1.1.1.1">
             subscript
            </csymbol>
            <ci id="S2.SS3.p6.1.m1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.p6.1.m1.1.1.1.1.1.1.2">
             𝒫
            </ci>
            <ci id="S2.SS3.p6.1.m1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.p6.1.m1.1.1.1.1.1.1.3">
             𝑡
            </ci>
           </apply>
          </set>
          <apply id="S2.SS3.p6.1.m1.1.1.1.3.cmml" xref="S2.SS3.p6.1.m1.1.1.1.3">
           <eq id="S2.SS3.p6.1.m1.1.1.1.3.1.cmml" xref="S2.SS3.p6.1.m1.1.1.1.3.1">
           </eq>
           <ci id="S2.SS3.p6.1.m1.1.1.1.3.2.cmml" xref="S2.SS3.p6.1.m1.1.1.1.3.2">
            𝑡
           </ci>
           <cn id="S2.SS3.p6.1.m1.1.1.1.3.3.cmml" type="integer" xref="S2.SS3.p6.1.m1.1.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
         <ci id="S2.SS3.p6.1.m1.1.1.3.cmml" xref="S2.SS3.p6.1.m1.1.1.3">
          𝜏
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p6.1.m1.1c">
        \{\mathcal{P}_{t}\}_{t=1}^{\tau}
       </annotation>
      </semantics>
     </math>
     is a sequence of
     <span class="ltx_text ltx_font_bold" id="S2.SS3.p6.1.1">
      prompt candidate sets
     </span>
     that expand over rounds:
    </p>
    <table class="ltx_equation ltx_eqn_table" id="S2.Ex4">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_eqn_cell ltx_align_center">
        <math alttext="\mathcal{P}_{t}\subset\mathcal{P}_{t+1}." class="ltx_Math" display="block" id="S2.Ex4.m1.1">
         <semantics id="S2.Ex4.m1.1a">
          <mrow id="S2.Ex4.m1.1.1.1" xref="S2.Ex4.m1.1.1.1.1.cmml">
           <mrow id="S2.Ex4.m1.1.1.1.1" xref="S2.Ex4.m1.1.1.1.1.cmml">
            <msub id="S2.Ex4.m1.1.1.1.1.2" xref="S2.Ex4.m1.1.1.1.1.2.cmml">
             <mi class="ltx_font_mathcaligraphic" id="S2.Ex4.m1.1.1.1.1.2.2" xref="S2.Ex4.m1.1.1.1.1.2.2.cmml">
              𝒫
             </mi>
             <mi id="S2.Ex4.m1.1.1.1.1.2.3" xref="S2.Ex4.m1.1.1.1.1.2.3.cmml">
              t
             </mi>
            </msub>
            <mo id="S2.Ex4.m1.1.1.1.1.1" xref="S2.Ex4.m1.1.1.1.1.1.cmml">
             ⊂
            </mo>
            <msub id="S2.Ex4.m1.1.1.1.1.3" xref="S2.Ex4.m1.1.1.1.1.3.cmml">
             <mi class="ltx_font_mathcaligraphic" id="S2.Ex4.m1.1.1.1.1.3.2" xref="S2.Ex4.m1.1.1.1.1.3.2.cmml">
              𝒫
             </mi>
             <mrow id="S2.Ex4.m1.1.1.1.1.3.3" xref="S2.Ex4.m1.1.1.1.1.3.3.cmml">
              <mi id="S2.Ex4.m1.1.1.1.1.3.3.2" xref="S2.Ex4.m1.1.1.1.1.3.3.2.cmml">
               t
              </mi>
              <mo id="S2.Ex4.m1.1.1.1.1.3.3.1" xref="S2.Ex4.m1.1.1.1.1.3.3.1.cmml">
               +
              </mo>
              <mn id="S2.Ex4.m1.1.1.1.1.3.3.3" xref="S2.Ex4.m1.1.1.1.1.3.3.3.cmml">
               1
              </mn>
             </mrow>
            </msub>
           </mrow>
           <mo id="S2.Ex4.m1.1.1.1.2" lspace="0em" xref="S2.Ex4.m1.1.1.1.1.cmml">
            .
           </mo>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S2.Ex4.m1.1b">
           <apply id="S2.Ex4.m1.1.1.1.1.cmml" xref="S2.Ex4.m1.1.1.1">
            <subset id="S2.Ex4.m1.1.1.1.1.1.cmml" xref="S2.Ex4.m1.1.1.1.1.1">
            </subset>
            <apply id="S2.Ex4.m1.1.1.1.1.2.cmml" xref="S2.Ex4.m1.1.1.1.1.2">
             <csymbol cd="ambiguous" id="S2.Ex4.m1.1.1.1.1.2.1.cmml" xref="S2.Ex4.m1.1.1.1.1.2">
              subscript
             </csymbol>
             <ci id="S2.Ex4.m1.1.1.1.1.2.2.cmml" xref="S2.Ex4.m1.1.1.1.1.2.2">
              𝒫
             </ci>
             <ci id="S2.Ex4.m1.1.1.1.1.2.3.cmml" xref="S2.Ex4.m1.1.1.1.1.2.3">
              𝑡
             </ci>
            </apply>
            <apply id="S2.Ex4.m1.1.1.1.1.3.cmml" xref="S2.Ex4.m1.1.1.1.1.3">
             <csymbol cd="ambiguous" id="S2.Ex4.m1.1.1.1.1.3.1.cmml" xref="S2.Ex4.m1.1.1.1.1.3">
              subscript
             </csymbol>
             <ci id="S2.Ex4.m1.1.1.1.1.3.2.cmml" xref="S2.Ex4.m1.1.1.1.1.3.2">
              𝒫
             </ci>
             <apply id="S2.Ex4.m1.1.1.1.1.3.3.cmml" xref="S2.Ex4.m1.1.1.1.1.3.3">
              <plus id="S2.Ex4.m1.1.1.1.1.3.3.1.cmml" xref="S2.Ex4.m1.1.1.1.1.3.3.1">
              </plus>
              <ci id="S2.Ex4.m1.1.1.1.1.3.3.2.cmml" xref="S2.Ex4.m1.1.1.1.1.3.3.2">
               𝑡
              </ci>
              <cn id="S2.Ex4.m1.1.1.1.1.3.3.3.cmml" type="integer" xref="S2.Ex4.m1.1.1.1.1.3.3.3">
               1
              </cn>
             </apply>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.Ex4.m1.1c">
           \mathcal{P}_{t}\subset\mathcal{P}_{t+1}.
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
      </tr>
     </tbody>
    </table>
    <p class="ltx_p" id="S2.SS3.p6.4">
     This expansion encapsulates the user’s growing understanding through iterative interactions. Initially, the prompt candidate set contains only general queries. However, as the conversation progresses, as the user get access to
     <math alttext="\{z^{r}_{s}\}_{s=1}^{t}" class="ltx_Math" display="inline" id="S2.SS3.p6.2.m1.1">
      <semantics id="S2.SS3.p6.2.m1.1a">
       <msubsup id="S2.SS3.p6.2.m1.1.1" xref="S2.SS3.p6.2.m1.1.1.cmml">
        <mrow id="S2.SS3.p6.2.m1.1.1.1.1.1" xref="S2.SS3.p6.2.m1.1.1.1.1.2.cmml">
         <mo id="S2.SS3.p6.2.m1.1.1.1.1.1.2" stretchy="false" xref="S2.SS3.p6.2.m1.1.1.1.1.2.cmml">
          {
         </mo>
         <msubsup id="S2.SS3.p6.2.m1.1.1.1.1.1.1" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1.cmml">
          <mi id="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.2" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.2.cmml">
           z
          </mi>
          <mi id="S2.SS3.p6.2.m1.1.1.1.1.1.1.3" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1.3.cmml">
           s
          </mi>
          <mi id="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.3" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.3.cmml">
           r
          </mi>
         </msubsup>
         <mo id="S2.SS3.p6.2.m1.1.1.1.1.1.3" stretchy="false" xref="S2.SS3.p6.2.m1.1.1.1.1.2.cmml">
          }
         </mo>
        </mrow>
        <mrow id="S2.SS3.p6.2.m1.1.1.1.3" xref="S2.SS3.p6.2.m1.1.1.1.3.cmml">
         <mi id="S2.SS3.p6.2.m1.1.1.1.3.2" xref="S2.SS3.p6.2.m1.1.1.1.3.2.cmml">
          s
         </mi>
         <mo id="S2.SS3.p6.2.m1.1.1.1.3.1" xref="S2.SS3.p6.2.m1.1.1.1.3.1.cmml">
          =
         </mo>
         <mn id="S2.SS3.p6.2.m1.1.1.1.3.3" xref="S2.SS3.p6.2.m1.1.1.1.3.3.cmml">
          1
         </mn>
        </mrow>
        <mi id="S2.SS3.p6.2.m1.1.1.3" xref="S2.SS3.p6.2.m1.1.1.3.cmml">
         t
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p6.2.m1.1b">
        <apply id="S2.SS3.p6.2.m1.1.1.cmml" xref="S2.SS3.p6.2.m1.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p6.2.m1.1.1.2.cmml" xref="S2.SS3.p6.2.m1.1.1">
          superscript
         </csymbol>
         <apply id="S2.SS3.p6.2.m1.1.1.1.cmml" xref="S2.SS3.p6.2.m1.1.1">
          <csymbol cd="ambiguous" id="S2.SS3.p6.2.m1.1.1.1.2.cmml" xref="S2.SS3.p6.2.m1.1.1">
           subscript
          </csymbol>
          <set id="S2.SS3.p6.2.m1.1.1.1.1.2.cmml" xref="S2.SS3.p6.2.m1.1.1.1.1.1">
           <apply id="S2.SS3.p6.2.m1.1.1.1.1.1.1.cmml" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1">
            <csymbol cd="ambiguous" id="S2.SS3.p6.2.m1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1">
             subscript
            </csymbol>
            <apply id="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1">
             <csymbol cd="ambiguous" id="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.1.cmml" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1">
              superscript
             </csymbol>
             <ci id="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.2.cmml" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.2">
              𝑧
             </ci>
             <ci id="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.3.cmml" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1.2.3">
              𝑟
             </ci>
            </apply>
            <ci id="S2.SS3.p6.2.m1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.p6.2.m1.1.1.1.1.1.1.3">
             𝑠
            </ci>
           </apply>
          </set>
          <apply id="S2.SS3.p6.2.m1.1.1.1.3.cmml" xref="S2.SS3.p6.2.m1.1.1.1.3">
           <eq id="S2.SS3.p6.2.m1.1.1.1.3.1.cmml" xref="S2.SS3.p6.2.m1.1.1.1.3.1">
           </eq>
           <ci id="S2.SS3.p6.2.m1.1.1.1.3.2.cmml" xref="S2.SS3.p6.2.m1.1.1.1.3.2">
            𝑠
           </ci>
           <cn id="S2.SS3.p6.2.m1.1.1.1.3.3.cmml" type="integer" xref="S2.SS3.p6.2.m1.1.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
         <ci id="S2.SS3.p6.2.m1.1.1.3.cmml" xref="S2.SS3.p6.2.m1.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p6.2.m1.1c">
        \{z^{r}_{s}\}_{s=1}^{t}
       </annotation>
      </semantics>
     </math>
     , the set
     <math alttext="\mathcal{P}_{t+1}" class="ltx_Math" display="inline" id="S2.SS3.p6.3.m2.1">
      <semantics id="S2.SS3.p6.3.m2.1a">
       <msub id="S2.SS3.p6.3.m2.1.1" xref="S2.SS3.p6.3.m2.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p6.3.m2.1.1.2" xref="S2.SS3.p6.3.m2.1.1.2.cmml">
         𝒫
        </mi>
        <mrow id="S2.SS3.p6.3.m2.1.1.3" xref="S2.SS3.p6.3.m2.1.1.3.cmml">
         <mi id="S2.SS3.p6.3.m2.1.1.3.2" xref="S2.SS3.p6.3.m2.1.1.3.2.cmml">
          t
         </mi>
         <mo id="S2.SS3.p6.3.m2.1.1.3.1" xref="S2.SS3.p6.3.m2.1.1.3.1.cmml">
          +
         </mo>
         <mn id="S2.SS3.p6.3.m2.1.1.3.3" xref="S2.SS3.p6.3.m2.1.1.3.3.cmml">
          1
         </mn>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p6.3.m2.1b">
        <apply id="S2.SS3.p6.3.m2.1.1.cmml" xref="S2.SS3.p6.3.m2.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p6.3.m2.1.1.1.cmml" xref="S2.SS3.p6.3.m2.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS3.p6.3.m2.1.1.2.cmml" xref="S2.SS3.p6.3.m2.1.1.2">
          𝒫
         </ci>
         <apply id="S2.SS3.p6.3.m2.1.1.3.cmml" xref="S2.SS3.p6.3.m2.1.1.3">
          <plus id="S2.SS3.p6.3.m2.1.1.3.1.cmml" xref="S2.SS3.p6.3.m2.1.1.3.1">
          </plus>
          <ci id="S2.SS3.p6.3.m2.1.1.3.2.cmml" xref="S2.SS3.p6.3.m2.1.1.3.2">
           𝑡
          </ci>
          <cn id="S2.SS3.p6.3.m2.1.1.3.3.cmml" type="integer" xref="S2.SS3.p6.3.m2.1.1.3.3">
           1
          </cn>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p6.3.m2.1c">
        \mathcal{P}_{t+1}
       </annotation>
      </semantics>
     </math>
     enlarges because of the additional information acquired through the conversations, i.e.
     <math alttext="\mathcal{P}_{t+1}=\mathcal{P}_{t}\cup\{\text{new prompts based on $z^{r}_{t}$}\}" class="ltx_Math" display="inline" id="S2.SS3.p6.4.m3.1">
      <semantics id="S2.SS3.p6.4.m3.1a">
       <mrow id="S2.SS3.p6.4.m3.1.2" xref="S2.SS3.p6.4.m3.1.2.cmml">
        <msub id="S2.SS3.p6.4.m3.1.2.2" xref="S2.SS3.p6.4.m3.1.2.2.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p6.4.m3.1.2.2.2" xref="S2.SS3.p6.4.m3.1.2.2.2.cmml">
          𝒫
         </mi>
         <mrow id="S2.SS3.p6.4.m3.1.2.2.3" xref="S2.SS3.p6.4.m3.1.2.2.3.cmml">
          <mi id="S2.SS3.p6.4.m3.1.2.2.3.2" xref="S2.SS3.p6.4.m3.1.2.2.3.2.cmml">
           t
          </mi>
          <mo id="S2.SS3.p6.4.m3.1.2.2.3.1" xref="S2.SS3.p6.4.m3.1.2.2.3.1.cmml">
           +
          </mo>
          <mn id="S2.SS3.p6.4.m3.1.2.2.3.3" xref="S2.SS3.p6.4.m3.1.2.2.3.3.cmml">
           1
          </mn>
         </mrow>
        </msub>
        <mo id="S2.SS3.p6.4.m3.1.2.1" xref="S2.SS3.p6.4.m3.1.2.1.cmml">
         =
        </mo>
        <mrow id="S2.SS3.p6.4.m3.1.2.3" xref="S2.SS3.p6.4.m3.1.2.3.cmml">
         <msub id="S2.SS3.p6.4.m3.1.2.3.2" xref="S2.SS3.p6.4.m3.1.2.3.2.cmml">
          <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p6.4.m3.1.2.3.2.2" xref="S2.SS3.p6.4.m3.1.2.3.2.2.cmml">
           𝒫
          </mi>
          <mi id="S2.SS3.p6.4.m3.1.2.3.2.3" xref="S2.SS3.p6.4.m3.1.2.3.2.3.cmml">
           t
          </mi>
         </msub>
         <mo id="S2.SS3.p6.4.m3.1.2.3.1" xref="S2.SS3.p6.4.m3.1.2.3.1.cmml">
          ∪
         </mo>
         <mrow id="S2.SS3.p6.4.m3.1.2.3.3.2" xref="S2.SS3.p6.4.m3.1.2.3.3.1.cmml">
          <mo id="S2.SS3.p6.4.m3.1.2.3.3.2.1" stretchy="false" xref="S2.SS3.p6.4.m3.1.2.3.3.1.cmml">
           {
          </mo>
          <mrow id="S2.SS3.p6.4.m3.1.1.1" xref="S2.SS3.p6.4.m3.1.1.1b.cmml">
           <mtext id="S2.SS3.p6.4.m3.1.1.1a" xref="S2.SS3.p6.4.m3.1.1.1b.cmml">
            new prompts based on
           </mtext>
           <msubsup id="S2.SS3.p6.4.m3.1.1.1.m1.1.1" xref="S2.SS3.p6.4.m3.1.1.1.m1.1.1.cmml">
            <mi id="S2.SS3.p6.4.m3.1.1.1.m1.1.1.2.2" xref="S2.SS3.p6.4.m3.1.1.1.m1.1.1.2.2.cmml">
             z
            </mi>
            <mi id="S2.SS3.p6.4.m3.1.1.1.m1.1.1.3" xref="S2.SS3.p6.4.m3.1.1.1.m1.1.1.3.cmml">
             t
            </mi>
            <mi id="S2.SS3.p6.4.m3.1.1.1.m1.1.1.2.3" xref="S2.SS3.p6.4.m3.1.1.1.m1.1.1.2.3.cmml">
             r
            </mi>
           </msubsup>
          </mrow>
          <mo id="S2.SS3.p6.4.m3.1.2.3.3.2.2" stretchy="false" xref="S2.SS3.p6.4.m3.1.2.3.3.1.cmml">
           }
          </mo>
         </mrow>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p6.4.m3.1b">
        <apply id="S2.SS3.p6.4.m3.1.2.cmml" xref="S2.SS3.p6.4.m3.1.2">
         <eq id="S2.SS3.p6.4.m3.1.2.1.cmml" xref="S2.SS3.p6.4.m3.1.2.1">
         </eq>
         <apply id="S2.SS3.p6.4.m3.1.2.2.cmml" xref="S2.SS3.p6.4.m3.1.2.2">
          <csymbol cd="ambiguous" id="S2.SS3.p6.4.m3.1.2.2.1.cmml" xref="S2.SS3.p6.4.m3.1.2.2">
           subscript
          </csymbol>
          <ci id="S2.SS3.p6.4.m3.1.2.2.2.cmml" xref="S2.SS3.p6.4.m3.1.2.2.2">
           𝒫
          </ci>
          <apply id="S2.SS3.p6.4.m3.1.2.2.3.cmml" xref="S2.SS3.p6.4.m3.1.2.2.3">
           <plus id="S2.SS3.p6.4.m3.1.2.2.3.1.cmml" xref="S2.SS3.p6.4.m3.1.2.2.3.1">
           </plus>
           <ci id="S2.SS3.p6.4.m3.1.2.2.3.2.cmml" xref="S2.SS3.p6.4.m3.1.2.2.3.2">
            𝑡
           </ci>
           <cn id="S2.SS3.p6.4.m3.1.2.2.3.3.cmml" type="integer" xref="S2.SS3.p6.4.m3.1.2.2.3.3">
            1
           </cn>
          </apply>
         </apply>
         <apply id="S2.SS3.p6.4.m3.1.2.3.cmml" xref="S2.SS3.p6.4.m3.1.2.3">
          <union id="S2.SS3.p6.4.m3.1.2.3.1.cmml" xref="S2.SS3.p6.4.m3.1.2.3.1">
          </union>
          <apply id="S2.SS3.p6.4.m3.1.2.3.2.cmml" xref="S2.SS3.p6.4.m3.1.2.3.2">
           <csymbol cd="ambiguous" id="S2.SS3.p6.4.m3.1.2.3.2.1.cmml" xref="S2.SS3.p6.4.m3.1.2.3.2">
            subscript
           </csymbol>
           <ci id="S2.SS3.p6.4.m3.1.2.3.2.2.cmml" xref="S2.SS3.p6.4.m3.1.2.3.2.2">
            𝒫
           </ci>
           <ci id="S2.SS3.p6.4.m3.1.2.3.2.3.cmml" xref="S2.SS3.p6.4.m3.1.2.3.2.3">
            𝑡
           </ci>
          </apply>
          <set id="S2.SS3.p6.4.m3.1.2.3.3.1.cmml" xref="S2.SS3.p6.4.m3.1.2.3.3.2">
           <ci id="S2.SS3.p6.4.m3.1.1.1b.cmml" xref="S2.SS3.p6.4.m3.1.1.1">
            <mrow id="S2.SS3.p6.4.m3.1.1.1.cmml" xref="S2.SS3.p6.4.m3.1.1.1">
             <mtext id="S2.SS3.p6.4.m3.1.1.1a.cmml" xref="S2.SS3.p6.4.m3.1.1.1">
              new prompts based on
             </mtext>
             <msubsup id="S2.SS3.p6.4.m3.1.1.1.m1.1.1.cmml" xref="S2.SS3.p6.4.m3.1.1.1.m1.1.1">
              <mi id="S2.SS3.p6.4.m3.1.1.1.m1.1.1.2.2.cmml" xref="S2.SS3.p6.4.m3.1.1.1.m1.1.1.2.2">
               z
              </mi>
              <mi id="S2.SS3.p6.4.m3.1.1.1.m1.1.1.3.cmml" xref="S2.SS3.p6.4.m3.1.1.1.m1.1.1.3">
               t
              </mi>
              <mi id="S2.SS3.p6.4.m3.1.1.1.m1.1.1.2.3.cmml" xref="S2.SS3.p6.4.m3.1.1.1.m1.1.1.2.3">
               r
              </mi>
             </msubsup>
            </mrow>
           </ci>
          </set>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p6.4.m3.1c">
        \mathcal{P}_{t+1}=\mathcal{P}_{t}\cup\{\text{new prompts based on $z^{r}_{t}$}\}
       </annotation>
      </semantics>
     </math>
     . Thus, it may include more specific and relevant prompts, culminating in a sufficiently large set that holds an optimal prompts for task completion.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS3.p7">
    <p class="ltx_p" id="S2.SS3.p7.6">
     Some readers may question the necessity of constraining the prompt candidate set
     <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.SS3.p7.1.m1.1">
      <semantics id="S2.SS3.p7.1.m1.1a">
       <msub id="S2.SS3.p7.1.m1.1.1" xref="S2.SS3.p7.1.m1.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p7.1.m1.1.1.2" xref="S2.SS3.p7.1.m1.1.1.2.cmml">
         𝒫
        </mi>
        <mi id="S2.SS3.p7.1.m1.1.1.3" xref="S2.SS3.p7.1.m1.1.1.3.cmml">
         t
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p7.1.m1.1b">
        <apply id="S2.SS3.p7.1.m1.1.1.cmml" xref="S2.SS3.p7.1.m1.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p7.1.m1.1.1.1.cmml" xref="S2.SS3.p7.1.m1.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS3.p7.1.m1.1.1.2.cmml" xref="S2.SS3.p7.1.m1.1.1.2">
          𝒫
         </ci>
         <ci id="S2.SS3.p7.1.m1.1.1.3.cmml" xref="S2.SS3.p7.1.m1.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p7.1.m1.1c">
        \mathcal{P}_{t}
       </annotation>
      </semantics>
     </math>
     rather than setting it equal to the entire prompt space
     <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS3.p7.2.m2.1">
      <semantics id="S2.SS3.p7.2.m2.1a">
       <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p7.2.m2.1.1" xref="S2.SS3.p7.2.m2.1.1.cmml">
        𝒵
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p7.2.m2.1b">
        <ci id="S2.SS3.p7.2.m2.1.1.cmml" xref="S2.SS3.p7.2.m2.1.1">
         𝒵
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p7.2.m2.1c">
        \mathcal{Z}
       </annotation>
      </semantics>
     </math>
     for all
     <math alttext="t" class="ltx_Math" display="inline" id="S2.SS3.p7.3.m3.1">
      <semantics id="S2.SS3.p7.3.m3.1a">
       <mi id="S2.SS3.p7.3.m3.1.1" xref="S2.SS3.p7.3.m3.1.1.cmml">
        t
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p7.3.m3.1b">
        <ci id="S2.SS3.p7.3.m3.1.1.cmml" xref="S2.SS3.p7.3.m3.1.1">
         𝑡
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p7.3.m3.1c">
        t
       </annotation>
      </semantics>
     </math>
     . It is imperative to understand that the cardinality of
     <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS3.p7.4.m4.1">
      <semantics id="S2.SS3.p7.4.m4.1a">
       <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p7.4.m4.1.1" xref="S2.SS3.p7.4.m4.1.1.cmml">
        𝒵
       </mi>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p7.4.m4.1b">
        <ci id="S2.SS3.p7.4.m4.1.1.cmml" xref="S2.SS3.p7.4.m4.1.1">
         𝒵
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p7.4.m4.1c">
        \mathcal{Z}
       </annotation>
      </semantics>
     </math>
     is overwhelmingly large, making optimization within this comprehensive space computationally infeasible. In our optimal control framework, the enlargement of the prompt candidate set
     <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.SS3.p7.5.m5.1">
      <semantics id="S2.SS3.p7.5.m5.1a">
       <msub id="S2.SS3.p7.5.m5.1.1" xref="S2.SS3.p7.5.m5.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p7.5.m5.1.1.2" xref="S2.SS3.p7.5.m5.1.1.2.cmml">
         𝒫
        </mi>
        <mi id="S2.SS3.p7.5.m5.1.1.3" xref="S2.SS3.p7.5.m5.1.1.3.cmml">
         t
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p7.5.m5.1b">
        <apply id="S2.SS3.p7.5.m5.1.1.cmml" xref="S2.SS3.p7.5.m5.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p7.5.m5.1.1.1.cmml" xref="S2.SS3.p7.5.m5.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS3.p7.5.m5.1.1.2.cmml" xref="S2.SS3.p7.5.m5.1.1.2">
          𝒫
         </ci>
         <ci id="S2.SS3.p7.5.m5.1.1.3.cmml" xref="S2.SS3.p7.5.m5.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p7.5.m5.1c">
        \mathcal{P}_{t}
       </annotation>
      </semantics>
     </math>
     is permitted only after the associated information for new prompts has undergone scrutiny. This ensures that the size of
     <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.SS3.p7.6.m6.1">
      <semantics id="S2.SS3.p7.6.m6.1a">
       <msub id="S2.SS3.p7.6.m6.1.1" xref="S2.SS3.p7.6.m6.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S2.SS3.p7.6.m6.1.1.2" xref="S2.SS3.p7.6.m6.1.1.2.cmml">
         𝒫
        </mi>
        <mi id="S2.SS3.p7.6.m6.1.1.3" xref="S2.SS3.p7.6.m6.1.1.3.cmml">
         t
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS3.p7.6.m6.1b">
        <apply id="S2.SS3.p7.6.m6.1.1.cmml" xref="S2.SS3.p7.6.m6.1.1">
         <csymbol cd="ambiguous" id="S2.SS3.p7.6.m6.1.1.1.cmml" xref="S2.SS3.p7.6.m6.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS3.p7.6.m6.1.1.2.cmml" xref="S2.SS3.p7.6.m6.1.1.2">
          𝒫
         </ci>
         <ci id="S2.SS3.p7.6.m6.1.1.3.cmml" xref="S2.SS3.p7.6.m6.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS3.p7.6.m6.1c">
        \mathcal{P}_{t}
       </annotation>
      </semantics>
     </math>
     remains within computationally manageable bounds. Importantly, this feature of having an enlarging candidate set is a novel aspect that departs from traditional optimal control theory. Although it introduces additional analytical and computational complexities, such a formulation is naturally motivated by the practical requirements of PE as well as other real-world scenarios. A thorough discussion on this matter is deferred to Section 3.1.
    </p>
   </div>
   <div class="ltx_para" id="S2.SS3.p8">
    <p class="ltx_p" id="S2.SS3.p8.1">
     To summarize, within our framework, PE is essentially the formulation and resolution of problem (
     <a class="ltx_ref" href="#S2.E1" title="In 2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     ). More specifically, it encompasses the following tasks:
    </p>
    <ul class="ltx_itemize" id="S2.I1">
     <li class="ltx_item" id="S2.I1.i1" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       •
      </span>
      <div class="ltx_para" id="S2.I1.i1.p1">
       <p class="ltx_p" id="S2.I1.i1.p1.1">
        Determining a suitable evaluation function
        <math alttext="f" class="ltx_Math" display="inline" id="S2.I1.i1.p1.1.m1.1">
         <semantics id="S2.I1.i1.p1.1.m1.1a">
          <mi id="S2.I1.i1.p1.1.m1.1.1" xref="S2.I1.i1.p1.1.m1.1.1.cmml">
           f
          </mi>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.1.m1.1b">
           <ci id="S2.I1.i1.p1.1.m1.1.1.cmml" xref="S2.I1.i1.p1.1.m1.1.1">
            𝑓
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i1.p1.1.m1.1c">
           f
          </annotation>
         </semantics>
        </math>
        ;
       </p>
      </div>
     </li>
     <li class="ltx_item" id="S2.I1.i2" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       •
      </span>
      <div class="ltx_para" id="S2.I1.i2.p1">
       <p class="ltx_p" id="S2.I1.i2.p1.1">
        Establishing an update rule for the prompt candidate set
        <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.I1.i2.p1.1.m1.1">
         <semantics id="S2.I1.i2.p1.1.m1.1a">
          <msub id="S2.I1.i2.p1.1.m1.1.1" xref="S2.I1.i2.p1.1.m1.1.1.cmml">
           <mi class="ltx_font_mathcaligraphic" id="S2.I1.i2.p1.1.m1.1.1.2" xref="S2.I1.i2.p1.1.m1.1.1.2.cmml">
            𝒫
           </mi>
           <mi id="S2.I1.i2.p1.1.m1.1.1.3" xref="S2.I1.i2.p1.1.m1.1.1.3.cmml">
            t
           </mi>
          </msub>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.1.m1.1b">
           <apply id="S2.I1.i2.p1.1.m1.1.1.cmml" xref="S2.I1.i2.p1.1.m1.1.1">
            <csymbol cd="ambiguous" id="S2.I1.i2.p1.1.m1.1.1.1.cmml" xref="S2.I1.i2.p1.1.m1.1.1">
             subscript
            </csymbol>
            <ci id="S2.I1.i2.p1.1.m1.1.1.2.cmml" xref="S2.I1.i2.p1.1.m1.1.1.2">
             𝒫
            </ci>
            <ci id="S2.I1.i2.p1.1.m1.1.1.3.cmml" xref="S2.I1.i2.p1.1.m1.1.1.3">
             𝑡
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i2.p1.1.m1.1c">
           \mathcal{P}_{t}
          </annotation>
         </semantics>
        </math>
        ;
       </p>
      </div>
     </li>
     <li class="ltx_item" id="S2.I1.i3" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       •
      </span>
      <div class="ltx_para" id="S2.I1.i3.p1">
       <p class="ltx_p" id="S2.I1.i3.p1.2">
        Solving the resultant optimal control problem, i.e. choosing
        <math alttext="z_{t}^{p}" class="ltx_Math" display="inline" id="S2.I1.i3.p1.1.m1.1">
         <semantics id="S2.I1.i3.p1.1.m1.1a">
          <msubsup id="S2.I1.i3.p1.1.m1.1.1" xref="S2.I1.i3.p1.1.m1.1.1.cmml">
           <mi id="S2.I1.i3.p1.1.m1.1.1.2.2" xref="S2.I1.i3.p1.1.m1.1.1.2.2.cmml">
            z
           </mi>
           <mi id="S2.I1.i3.p1.1.m1.1.1.2.3" xref="S2.I1.i3.p1.1.m1.1.1.2.3.cmml">
            t
           </mi>
           <mi id="S2.I1.i3.p1.1.m1.1.1.3" xref="S2.I1.i3.p1.1.m1.1.1.3.cmml">
            p
           </mi>
          </msubsup>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i3.p1.1.m1.1b">
           <apply id="S2.I1.i3.p1.1.m1.1.1.cmml" xref="S2.I1.i3.p1.1.m1.1.1">
            <csymbol cd="ambiguous" id="S2.I1.i3.p1.1.m1.1.1.1.cmml" xref="S2.I1.i3.p1.1.m1.1.1">
             superscript
            </csymbol>
            <apply id="S2.I1.i3.p1.1.m1.1.1.2.cmml" xref="S2.I1.i3.p1.1.m1.1.1">
             <csymbol cd="ambiguous" id="S2.I1.i3.p1.1.m1.1.1.2.1.cmml" xref="S2.I1.i3.p1.1.m1.1.1">
              subscript
             </csymbol>
             <ci id="S2.I1.i3.p1.1.m1.1.1.2.2.cmml" xref="S2.I1.i3.p1.1.m1.1.1.2.2">
              𝑧
             </ci>
             <ci id="S2.I1.i3.p1.1.m1.1.1.2.3.cmml" xref="S2.I1.i3.p1.1.m1.1.1.2.3">
              𝑡
             </ci>
            </apply>
            <ci id="S2.I1.i3.p1.1.m1.1.1.3.cmml" xref="S2.I1.i3.p1.1.m1.1.1.3">
             𝑝
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i3.p1.1.m1.1c">
           z_{t}^{p}
          </annotation>
         </semantics>
        </math>
        from
        <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.I1.i3.p1.2.m2.1">
         <semantics id="S2.I1.i3.p1.2.m2.1a">
          <msub id="S2.I1.i3.p1.2.m2.1.1" xref="S2.I1.i3.p1.2.m2.1.1.cmml">
           <mi class="ltx_font_mathcaligraphic" id="S2.I1.i3.p1.2.m2.1.1.2" xref="S2.I1.i3.p1.2.m2.1.1.2.cmml">
            𝒫
           </mi>
           <mi id="S2.I1.i3.p1.2.m2.1.1.3" xref="S2.I1.i3.p1.2.m2.1.1.3.cmml">
            t
           </mi>
          </msub>
          <annotation-xml encoding="MathML-Content" id="S2.I1.i3.p1.2.m2.1b">
           <apply id="S2.I1.i3.p1.2.m2.1.1.cmml" xref="S2.I1.i3.p1.2.m2.1.1">
            <csymbol cd="ambiguous" id="S2.I1.i3.p1.2.m2.1.1.1.cmml" xref="S2.I1.i3.p1.2.m2.1.1">
             subscript
            </csymbol>
            <ci id="S2.I1.i3.p1.2.m2.1.1.2.cmml" xref="S2.I1.i3.p1.2.m2.1.1.2">
             𝒫
            </ci>
            <ci id="S2.I1.i3.p1.2.m2.1.1.3.cmml" xref="S2.I1.i3.p1.2.m2.1.1.3">
             𝑡
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S2.I1.i3.p1.2.m2.1c">
           \mathcal{P}_{t}
          </annotation>
         </semantics>
        </math>
        .
       </p>
      </div>
     </li>
    </ul>
    <p class="ltx_p" id="S2.SS3.p8.2">
     Here, the first two tasks pertain to problem formulation, while the final task focuses on solving the underlying problem. Figure
     <a class="ltx_ref" href="#S2.F1" title="Figure 1 ‣ 2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     shows a schematic diagram of our framework.
    </p>
   </div>
   <figure class="ltx_figure" id="S2.F1">
    <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="245" id="S2.F1.g1" src="/html/2310.14201/assets/img/multiround.png" width="550"/>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_figure">
      Figure 1:
     </span>
     The general framework of multi-round PE. In our optimal control formulation (
     <a class="ltx_ref" href="#S2.E1" title="In 2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     ), the task (or query) is denoted by
     <math alttext="z^{q}" class="ltx_Math" display="inline" id="S2.F1.8.m1.1">
      <semantics id="S2.F1.8.m1.1b">
       <msup id="S2.F1.8.m1.1.1" xref="S2.F1.8.m1.1.1.cmml">
        <mi id="S2.F1.8.m1.1.1.2" xref="S2.F1.8.m1.1.1.2.cmml">
         z
        </mi>
        <mi id="S2.F1.8.m1.1.1.3" xref="S2.F1.8.m1.1.1.3.cmml">
         q
        </mi>
       </msup>
       <annotation-xml encoding="MathML-Content" id="S2.F1.8.m1.1c">
        <apply id="S2.F1.8.m1.1.1.cmml" xref="S2.F1.8.m1.1.1">
         <csymbol cd="ambiguous" id="S2.F1.8.m1.1.1.1.cmml" xref="S2.F1.8.m1.1.1">
          superscript
         </csymbol>
         <ci id="S2.F1.8.m1.1.1.2.cmml" xref="S2.F1.8.m1.1.1.2">
          𝑧
         </ci>
         <ci id="S2.F1.8.m1.1.1.3.cmml" xref="S2.F1.8.m1.1.1.3">
          𝑞
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.F1.8.m1.1d">
        z^{q}
       </annotation>
      </semantics>
     </math>
     , the prompt candidate sets are denoted as
     <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.F1.9.m2.1">
      <semantics id="S2.F1.9.m2.1b">
       <msub id="S2.F1.9.m2.1.1" xref="S2.F1.9.m2.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S2.F1.9.m2.1.1.2" xref="S2.F1.9.m2.1.1.2.cmml">
         𝒫
        </mi>
        <mi id="S2.F1.9.m2.1.1.3" xref="S2.F1.9.m2.1.1.3.cmml">
         t
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.F1.9.m2.1c">
        <apply id="S2.F1.9.m2.1.1.cmml" xref="S2.F1.9.m2.1.1">
         <csymbol cd="ambiguous" id="S2.F1.9.m2.1.1.1.cmml" xref="S2.F1.9.m2.1.1">
          subscript
         </csymbol>
         <ci id="S2.F1.9.m2.1.1.2.cmml" xref="S2.F1.9.m2.1.1.2">
          𝒫
         </ci>
         <ci id="S2.F1.9.m2.1.1.3.cmml" xref="S2.F1.9.m2.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.F1.9.m2.1d">
        \mathcal{P}_{t}
       </annotation>
      </semantics>
     </math>
     , which is updated based on preceding response
     <math alttext="z_{t-1}^{r}" class="ltx_Math" display="inline" id="S2.F1.10.m3.1">
      <semantics id="S2.F1.10.m3.1b">
       <msubsup id="S2.F1.10.m3.1.1" xref="S2.F1.10.m3.1.1.cmml">
        <mi id="S2.F1.10.m3.1.1.2.2" xref="S2.F1.10.m3.1.1.2.2.cmml">
         z
        </mi>
        <mrow id="S2.F1.10.m3.1.1.2.3" xref="S2.F1.10.m3.1.1.2.3.cmml">
         <mi id="S2.F1.10.m3.1.1.2.3.2" xref="S2.F1.10.m3.1.1.2.3.2.cmml">
          t
         </mi>
         <mo id="S2.F1.10.m3.1.1.2.3.1" xref="S2.F1.10.m3.1.1.2.3.1.cmml">
          −
         </mo>
         <mn id="S2.F1.10.m3.1.1.2.3.3" xref="S2.F1.10.m3.1.1.2.3.3.cmml">
          1
         </mn>
        </mrow>
        <mi id="S2.F1.10.m3.1.1.3" xref="S2.F1.10.m3.1.1.3.cmml">
         r
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S2.F1.10.m3.1c">
        <apply id="S2.F1.10.m3.1.1.cmml" xref="S2.F1.10.m3.1.1">
         <csymbol cd="ambiguous" id="S2.F1.10.m3.1.1.1.cmml" xref="S2.F1.10.m3.1.1">
          superscript
         </csymbol>
         <apply id="S2.F1.10.m3.1.1.2.cmml" xref="S2.F1.10.m3.1.1">
          <csymbol cd="ambiguous" id="S2.F1.10.m3.1.1.2.1.cmml" xref="S2.F1.10.m3.1.1">
           subscript
          </csymbol>
          <ci id="S2.F1.10.m3.1.1.2.2.cmml" xref="S2.F1.10.m3.1.1.2.2">
           𝑧
          </ci>
          <apply id="S2.F1.10.m3.1.1.2.3.cmml" xref="S2.F1.10.m3.1.1.2.3">
           <minus id="S2.F1.10.m3.1.1.2.3.1.cmml" xref="S2.F1.10.m3.1.1.2.3.1">
           </minus>
           <ci id="S2.F1.10.m3.1.1.2.3.2.cmml" xref="S2.F1.10.m3.1.1.2.3.2">
            𝑡
           </ci>
           <cn id="S2.F1.10.m3.1.1.2.3.3.cmml" type="integer" xref="S2.F1.10.m3.1.1.2.3.3">
            1
           </cn>
          </apply>
         </apply>
         <ci id="S2.F1.10.m3.1.1.3.cmml" xref="S2.F1.10.m3.1.1.3">
          𝑟
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.F1.10.m3.1d">
        z_{t-1}^{r}
       </annotation>
      </semantics>
     </math>
     . The answer is the final response from the LLM. We use bold arrows to demonstrate two procedures: choosing
     <math alttext="z_{t}^{p}" class="ltx_Math" display="inline" id="S2.F1.11.m4.1">
      <semantics id="S2.F1.11.m4.1b">
       <msubsup id="S2.F1.11.m4.1.1" xref="S2.F1.11.m4.1.1.cmml">
        <mi id="S2.F1.11.m4.1.1.2.2" xref="S2.F1.11.m4.1.1.2.2.cmml">
         z
        </mi>
        <mi id="S2.F1.11.m4.1.1.2.3" xref="S2.F1.11.m4.1.1.2.3.cmml">
         t
        </mi>
        <mi id="S2.F1.11.m4.1.1.3" xref="S2.F1.11.m4.1.1.3.cmml">
         p
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S2.F1.11.m4.1c">
        <apply id="S2.F1.11.m4.1.1.cmml" xref="S2.F1.11.m4.1.1">
         <csymbol cd="ambiguous" id="S2.F1.11.m4.1.1.1.cmml" xref="S2.F1.11.m4.1.1">
          superscript
         </csymbol>
         <apply id="S2.F1.11.m4.1.1.2.cmml" xref="S2.F1.11.m4.1.1">
          <csymbol cd="ambiguous" id="S2.F1.11.m4.1.1.2.1.cmml" xref="S2.F1.11.m4.1.1">
           subscript
          </csymbol>
          <ci id="S2.F1.11.m4.1.1.2.2.cmml" xref="S2.F1.11.m4.1.1.2.2">
           𝑧
          </ci>
          <ci id="S2.F1.11.m4.1.1.2.3.cmml" xref="S2.F1.11.m4.1.1.2.3">
           𝑡
          </ci>
         </apply>
         <ci id="S2.F1.11.m4.1.1.3.cmml" xref="S2.F1.11.m4.1.1.3">
          𝑝
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.F1.11.m4.1d">
        z_{t}^{p}
       </annotation>
      </semantics>
     </math>
     from
     <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.F1.12.m5.1">
      <semantics id="S2.F1.12.m5.1b">
       <msub id="S2.F1.12.m5.1.1" xref="S2.F1.12.m5.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S2.F1.12.m5.1.1.2" xref="S2.F1.12.m5.1.1.2.cmml">
         𝒫
        </mi>
        <mi id="S2.F1.12.m5.1.1.3" xref="S2.F1.12.m5.1.1.3.cmml">
         t
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.F1.12.m5.1c">
        <apply id="S2.F1.12.m5.1.1.cmml" xref="S2.F1.12.m5.1.1">
         <csymbol cd="ambiguous" id="S2.F1.12.m5.1.1.1.cmml" xref="S2.F1.12.m5.1.1">
          subscript
         </csymbol>
         <ci id="S2.F1.12.m5.1.1.2.cmml" xref="S2.F1.12.m5.1.1.2">
          𝒫
         </ci>
         <ci id="S2.F1.12.m5.1.1.3.cmml" xref="S2.F1.12.m5.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.F1.12.m5.1d">
        \mathcal{P}_{t}
       </annotation>
      </semantics>
     </math>
     and the enlarging of
     <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.F1.13.m6.1">
      <semantics id="S2.F1.13.m6.1b">
       <msub id="S2.F1.13.m6.1.1" xref="S2.F1.13.m6.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S2.F1.13.m6.1.1.2" xref="S2.F1.13.m6.1.1.2.cmml">
         𝒫
        </mi>
        <mi id="S2.F1.13.m6.1.1.3" xref="S2.F1.13.m6.1.1.3.cmml">
         t
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.F1.13.m6.1c">
        <apply id="S2.F1.13.m6.1.1.cmml" xref="S2.F1.13.m6.1.1">
         <csymbol cd="ambiguous" id="S2.F1.13.m6.1.1.1.cmml" xref="S2.F1.13.m6.1.1">
          subscript
         </csymbol>
         <ci id="S2.F1.13.m6.1.1.2.cmml" xref="S2.F1.13.m6.1.1.2">
          𝒫
         </ci>
         <ci id="S2.F1.13.m6.1.1.3.cmml" xref="S2.F1.13.m6.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.F1.13.m6.1d">
        \mathcal{P}_{t}
       </annotation>
      </semantics>
     </math>
     . We can interpret
     <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.F1.14.m7.1">
      <semantics id="S2.F1.14.m7.1b">
       <msub id="S2.F1.14.m7.1.1" xref="S2.F1.14.m7.1.1.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S2.F1.14.m7.1.1.2" xref="S2.F1.14.m7.1.1.2.cmml">
         𝒫
        </mi>
        <mi id="S2.F1.14.m7.1.1.3" xref="S2.F1.14.m7.1.1.3.cmml">
         t
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.F1.14.m7.1c">
        <apply id="S2.F1.14.m7.1.1.cmml" xref="S2.F1.14.m7.1.1">
         <csymbol cd="ambiguous" id="S2.F1.14.m7.1.1.1.cmml" xref="S2.F1.14.m7.1.1">
          subscript
         </csymbol>
         <ci id="S2.F1.14.m7.1.1.2.cmml" xref="S2.F1.14.m7.1.1.2">
          𝒫
         </ci>
         <ci id="S2.F1.14.m7.1.1.3.cmml" xref="S2.F1.14.m7.1.1.3">
          𝑡
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.F1.14.m7.1d">
        \mathcal{P}_{t}
       </annotation>
      </semantics>
     </math>
     as the embodiment of our "action space" when prompting.
    </figcaption>
   </figure>
  </section>
  <section class="ltx_subsection" id="S2.SS4">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     2.4
    </span>
    Potentials and Challenges in Prompt Engineering
   </h3>
   <div class="ltx_para" id="S2.SS4.p1">
    <p class="ltx_p" id="S2.SS4.p1.1">
     Within our framework, the multi-round interaction with an LLM constitutes a dynamic system, and PE is framed as a control problem defined over the dynamic system. From this optimal control perspective, we will discuss the potentials that PE may achieve and the challenges that PE presents.
    </p>
   </div>
   <section class="ltx_subsubsection" id="S2.SS4.SSSx1">
    <h4 class="ltx_title ltx_title_subsubsection">
     Potentials
    </h4>
    <div class="ltx_para" id="S2.SS4.SSSx1.p1">
     <p class="ltx_p" id="S2.SS4.SSSx1.p1.1">
      Let us first briefly discuss the characteristics of LLM which help gain insight into PE methodologies via the optimal control framework. In our view, the key traits of LLMs that enable effective PE are their immense knowledge capacity and inherent variability.
     </p>
    </div>
    <div class="ltx_para" id="S2.SS4.SSSx1.p2">
     <p class="ltx_p" id="S2.SS4.SSSx1.p2.1">
      With knowledge capacity, an adept LLM contains extensive information on a vast array of topics and concepts. This allows it to understand and engage with prompts across diverse domains. The user aims to steer the LLM through multiple rounds of interaction, activating relevant knowledge in a back-and-forth process. From this viewpoint, an adept LLM should function comparably to a sampler endeavoring to canvas the entire distribution of a particular concept or domain of knowledge that the user seeks to explore. In each interaction round, the LLM can be seen as drawing samples from a probability distribution defined over
      <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS4.SSSx1.p2.1.m1.1">
       <semantics id="S2.SS4.SSSx1.p2.1.m1.1a">
        <mi class="ltx_font_mathcaligraphic" id="S2.SS4.SSSx1.p2.1.m1.1.1" xref="S2.SS4.SSSx1.p2.1.m1.1.1.cmml">
         𝒵
        </mi>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx1.p2.1.m1.1b">
         <ci id="S2.SS4.SSSx1.p2.1.m1.1.1.cmml" xref="S2.SS4.SSSx1.p2.1.m1.1.1">
          𝒵
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx1.p2.1.m1.1c">
         \mathcal{Z}
        </annotation>
       </semantics>
      </math>
      which is conditioned on the prior prompts and responses. The goal of PE is for the LLM to facilitate a sequence of samples that approaches the true distribution of the user’s targeted knowledge. This is an idealized assumption, considering the practical limitations, but it offers a clear objective for the development of LLMs in the context of PE: to refine their sampling process to better approximate the desired knowledge distribution through iterative prompting.
     </p>
    </div>
    <div class="ltx_para" id="S2.SS4.SSSx1.p3">
     <p class="ltx_p" id="S2.SS4.SSSx1.p3.1">
      Regarding variability, it has been shown that LLM outputs depend heavily on the prompt provided. A superior LLM should produce varied, nuanced responses to small prompt variations. This allows prompt engineers to refine prompts iteratively, coaxing the LLM to generate high-quality, targeted responses. On the other hand, an adept LLM should indicate when a prompt lacks key information, rather than providing inconsistent outputs. This meta-cognitive capacity highlights areas for the user to enhance the prompt through subsequent iterations.
     </p>
    </div>
    <div class="ltx_para" id="S2.SS4.SSSx1.p4">
     <p class="ltx_p" id="S2.SS4.SSSx1.p4.1">
      In summary, the immense knowledge and inherent variability of LLMs enable PE to unlock their potential through iterative refinement. However, these properties still lacks rigorous study. More investigation into these properties will undoubtedly lead to more efficient PE methods.
     </p>
    </div>
   </section>
   <section class="ltx_subsubsection" id="S2.SS4.SSSx2">
    <h4 class="ltx_title ltx_title_subsubsection">
     Challenges
    </h4>
    <div class="ltx_para" id="S2.SS4.SSSx2.p1">
     <p class="ltx_p" id="S2.SS4.SSSx2.p1.1">
      By examining the issues related to the three key tasks of PE listed in Section
      <a class="ltx_ref" href="#S2.SS3" title="2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
       <span class="ltx_text ltx_ref_tag">
        2.3
       </span>
      </a>
      , we gain a clearer understanding of the challenges for PE in both formulating problems and optimizing the prompting process.
     </p>
    </div>
    <div class="ltx_para" id="S2.SS4.SSSx2.p2">
     <p class="ltx_p" id="S2.SS4.SSSx2.p2.9">
      For problem formulation of PE, the complexities often arise from the discrete and structured nature of the language set
      <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.1.m1.1">
       <semantics id="S2.SS4.SSSx2.p2.1.m1.1a">
        <mi class="ltx_font_mathcaligraphic" id="S2.SS4.SSSx2.p2.1.m1.1.1" xref="S2.SS4.SSSx2.p2.1.m1.1.1.cmml">
         𝒵
        </mi>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.1.m1.1b">
         <ci id="S2.SS4.SSSx2.p2.1.m1.1.1.cmml" xref="S2.SS4.SSSx2.p2.1.m1.1.1">
          𝒵
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.1.m1.1c">
         \mathcal{Z}
        </annotation>
       </semantics>
      </math>
      . Both the evaluation function
      <math alttext="f" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.2.m2.1">
       <semantics id="S2.SS4.SSSx2.p2.2.m2.1a">
        <mi id="S2.SS4.SSSx2.p2.2.m2.1.1" xref="S2.SS4.SSSx2.p2.2.m2.1.1.cmml">
         f
        </mi>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.2.m2.1b">
         <ci id="S2.SS4.SSSx2.p2.2.m2.1.1.cmml" xref="S2.SS4.SSSx2.p2.2.m2.1.1">
          𝑓
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.2.m2.1c">
         f
        </annotation>
       </semantics>
      </math>
      and the prompt candidate sets
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.3.m3.1">
       <semantics id="S2.SS4.SSSx2.p2.3.m3.1a">
        <msub id="S2.SS4.SSSx2.p2.3.m3.1.1" xref="S2.SS4.SSSx2.p2.3.m3.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S2.SS4.SSSx2.p2.3.m3.1.1.2" xref="S2.SS4.SSSx2.p2.3.m3.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S2.SS4.SSSx2.p2.3.m3.1.1.3" xref="S2.SS4.SSSx2.p2.3.m3.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.3.m3.1b">
         <apply id="S2.SS4.SSSx2.p2.3.m3.1.1.cmml" xref="S2.SS4.SSSx2.p2.3.m3.1.1">
          <csymbol cd="ambiguous" id="S2.SS4.SSSx2.p2.3.m3.1.1.1.cmml" xref="S2.SS4.SSSx2.p2.3.m3.1.1">
           subscript
          </csymbol>
          <ci id="S2.SS4.SSSx2.p2.3.m3.1.1.2.cmml" xref="S2.SS4.SSSx2.p2.3.m3.1.1.2">
           𝒫
          </ci>
          <ci id="S2.SS4.SSSx2.p2.3.m3.1.1.3.cmml" xref="S2.SS4.SSSx2.p2.3.m3.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.3.m3.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      are defined over
      <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.4.m4.1">
       <semantics id="S2.SS4.SSSx2.p2.4.m4.1a">
        <mi class="ltx_font_mathcaligraphic" id="S2.SS4.SSSx2.p2.4.m4.1.1" xref="S2.SS4.SSSx2.p2.4.m4.1.1.cmml">
         𝒵
        </mi>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.4.m4.1b">
         <ci id="S2.SS4.SSSx2.p2.4.m4.1.1.cmml" xref="S2.SS4.SSSx2.p2.4.m4.1.1">
          𝒵
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.4.m4.1c">
         \mathcal{Z}
        </annotation>
       </semantics>
      </math>
      . Given that
      <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.5.m5.1">
       <semantics id="S2.SS4.SSSx2.p2.5.m5.1a">
        <mi class="ltx_font_mathcaligraphic" id="S2.SS4.SSSx2.p2.5.m5.1.1" xref="S2.SS4.SSSx2.p2.5.m5.1.1.cmml">
         𝒵
        </mi>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.5.m5.1b">
         <ci id="S2.SS4.SSSx2.p2.5.m5.1.1.cmml" xref="S2.SS4.SSSx2.p2.5.m5.1.1">
          𝒵
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.5.m5.1c">
         \mathcal{Z}
        </annotation>
       </semantics>
      </math>
      is a discrete space that possesses its own intricate linguistic structure, devising rule-based manipulations becomes inherently challenging. In addition, the changing of the prompt candidate set
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.6.m6.1">
       <semantics id="S2.SS4.SSSx2.p2.6.m6.1a">
        <msub id="S2.SS4.SSSx2.p2.6.m6.1.1" xref="S2.SS4.SSSx2.p2.6.m6.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S2.SS4.SSSx2.p2.6.m6.1.1.2" xref="S2.SS4.SSSx2.p2.6.m6.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S2.SS4.SSSx2.p2.6.m6.1.1.3" xref="S2.SS4.SSSx2.p2.6.m6.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.6.m6.1b">
         <apply id="S2.SS4.SSSx2.p2.6.m6.1.1.cmml" xref="S2.SS4.SSSx2.p2.6.m6.1.1">
          <csymbol cd="ambiguous" id="S2.SS4.SSSx2.p2.6.m6.1.1.1.cmml" xref="S2.SS4.SSSx2.p2.6.m6.1.1">
           subscript
          </csymbol>
          <ci id="S2.SS4.SSSx2.p2.6.m6.1.1.2.cmml" xref="S2.SS4.SSSx2.p2.6.m6.1.1.2">
           𝒫
          </ci>
          <ci id="S2.SS4.SSSx2.p2.6.m6.1.1.3.cmml" xref="S2.SS4.SSSx2.p2.6.m6.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.6.m6.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      with time
      <math alttext="t" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.7.m7.1">
       <semantics id="S2.SS4.SSSx2.p2.7.m7.1a">
        <mi id="S2.SS4.SSSx2.p2.7.m7.1.1" xref="S2.SS4.SSSx2.p2.7.m7.1.1.cmml">
         t
        </mi>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.7.m7.1b">
         <ci id="S2.SS4.SSSx2.p2.7.m7.1.1.cmml" xref="S2.SS4.SSSx2.p2.7.m7.1.1">
          𝑡
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.7.m7.1c">
         t
        </annotation>
       </semantics>
      </math>
      adds another layer of complication in analyzing the underlying optimal control problem. Furthermore, it is often difficult to provide explicit definitions for
      <math alttext="f" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.8.m8.1">
       <semantics id="S2.SS4.SSSx2.p2.8.m8.1a">
        <mi id="S2.SS4.SSSx2.p2.8.m8.1.1" xref="S2.SS4.SSSx2.p2.8.m8.1.1.cmml">
         f
        </mi>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.8.m8.1b">
         <ci id="S2.SS4.SSSx2.p2.8.m8.1.1.cmml" xref="S2.SS4.SSSx2.p2.8.m8.1.1">
          𝑓
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.8.m8.1c">
         f
        </annotation>
       </semantics>
      </math>
      and
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p2.9.m9.1">
       <semantics id="S2.SS4.SSSx2.p2.9.m9.1a">
        <msub id="S2.SS4.SSSx2.p2.9.m9.1.1" xref="S2.SS4.SSSx2.p2.9.m9.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S2.SS4.SSSx2.p2.9.m9.1.1.2" xref="S2.SS4.SSSx2.p2.9.m9.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S2.SS4.SSSx2.p2.9.m9.1.1.3" xref="S2.SS4.SSSx2.p2.9.m9.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p2.9.m9.1b">
         <apply id="S2.SS4.SSSx2.p2.9.m9.1.1.cmml" xref="S2.SS4.SSSx2.p2.9.m9.1.1">
          <csymbol cd="ambiguous" id="S2.SS4.SSSx2.p2.9.m9.1.1.1.cmml" xref="S2.SS4.SSSx2.p2.9.m9.1.1">
           subscript
          </csymbol>
          <ci id="S2.SS4.SSSx2.p2.9.m9.1.1.2.cmml" xref="S2.SS4.SSSx2.p2.9.m9.1.1.2">
           𝒫
          </ci>
          <ci id="S2.SS4.SSSx2.p2.9.m9.1.1.3.cmml" xref="S2.SS4.SSSx2.p2.9.m9.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p2.9.m9.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      , which presents obstacles to the progress of PE in various fields.
     </p>
    </div>
    <div class="ltx_para" id="S2.SS4.SSSx2.p3">
     <p class="ltx_p" id="S2.SS4.SSSx2.p3.1">
      With respect to optimizing the prompting process, the lack of access to the LLM’s internal parameters necessitates the use of gradient-free optimization techniques such as random search or reinforcement learning. The efficiency of these methods is problematic, especially when factoring in the computational cost of interaction with the LLM. Additionally, the prompt candidate set
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S2.SS4.SSSx2.p3.1.m1.1">
       <semantics id="S2.SS4.SSSx2.p3.1.m1.1a">
        <msub id="S2.SS4.SSSx2.p3.1.m1.1.1" xref="S2.SS4.SSSx2.p3.1.m1.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S2.SS4.SSSx2.p3.1.m1.1.1.2" xref="S2.SS4.SSSx2.p3.1.m1.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S2.SS4.SSSx2.p3.1.m1.1.1.3" xref="S2.SS4.SSSx2.p3.1.m1.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S2.SS4.SSSx2.p3.1.m1.1b">
         <apply id="S2.SS4.SSSx2.p3.1.m1.1.1.cmml" xref="S2.SS4.SSSx2.p3.1.m1.1.1">
          <csymbol cd="ambiguous" id="S2.SS4.SSSx2.p3.1.m1.1.1.1.cmml" xref="S2.SS4.SSSx2.p3.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S2.SS4.SSSx2.p3.1.m1.1.1.2.cmml" xref="S2.SS4.SSSx2.p3.1.m1.1.1.2">
           𝒫
          </ci>
          <ci id="S2.SS4.SSSx2.p3.1.m1.1.1.3.cmml" xref="S2.SS4.SSSx2.p3.1.m1.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S2.SS4.SSSx2.p3.1.m1.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      often comprises an extensive array of potential prompts, thus inflating the action space for the optimal control problem considerably. This extensive action space further exacerbates the challenge of solving the optimal control problem, more so when coupled with the constraint of gradient-free optimization.
     </p>
    </div>
    <div class="ltx_para" id="S2.SS4.SSSx2.p4">
     <p class="ltx_p" id="S2.SS4.SSSx2.p4.1">
      Despite these complexities, extensive empirical studies indicate that the quality of PE significantly influences the performance of LLMs
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib23" title="">
        23
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib24" title="">
        24
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib25" title="">
        25
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib26" title="">
        26
       </a>
       ]
      </cite>
      . An intriguing question then arises: what are the limits to the effectiveness of PE? Amid these challenges and complexities lies a fertile ground for future investigation.
     </p>
    </div>
   </section>
  </section>
 </section>
 <section class="ltx_section" id="S3">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    3
   </span>
   Prompt Engineering Methods
  </h2>
  <div class="ltx_para" id="S3.p1">
   <p class="ltx_p" id="S3.p1.4">
    In this section, we direct our attention towards some specific PE methods in the literature. As detailed in Section
    <a class="ltx_ref" href="#S2.SS3" title="2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
     <span class="ltx_text ltx_ref_tag">
      2.3
     </span>
    </a>
    , PE encompasses three pivotal elements: the evaluation function
    <math alttext="f" class="ltx_Math" display="inline" id="S3.p1.1.m1.1">
     <semantics id="S3.p1.1.m1.1a">
      <mi id="S3.p1.1.m1.1.1" xref="S3.p1.1.m1.1.1.cmml">
       f
      </mi>
      <annotation-xml encoding="MathML-Content" id="S3.p1.1.m1.1b">
       <ci id="S3.p1.1.m1.1.1.cmml" xref="S3.p1.1.m1.1.1">
        𝑓
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S3.p1.1.m1.1c">
       f
      </annotation>
     </semantics>
    </math>
    , the prompt candidate set
    <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S3.p1.2.m2.1">
     <semantics id="S3.p1.2.m2.1a">
      <msub id="S3.p1.2.m2.1.1" xref="S3.p1.2.m2.1.1.cmml">
       <mi class="ltx_font_mathcaligraphic" id="S3.p1.2.m2.1.1.2" xref="S3.p1.2.m2.1.1.2.cmml">
        𝒫
       </mi>
       <mi id="S3.p1.2.m2.1.1.3" xref="S3.p1.2.m2.1.1.3.cmml">
        t
       </mi>
      </msub>
      <annotation-xml encoding="MathML-Content" id="S3.p1.2.m2.1b">
       <apply id="S3.p1.2.m2.1.1.cmml" xref="S3.p1.2.m2.1.1">
        <csymbol cd="ambiguous" id="S3.p1.2.m2.1.1.1.cmml" xref="S3.p1.2.m2.1.1">
         subscript
        </csymbol>
        <ci id="S3.p1.2.m2.1.1.2.cmml" xref="S3.p1.2.m2.1.1.2">
         𝒫
        </ci>
        <ci id="S3.p1.2.m2.1.1.3.cmml" xref="S3.p1.2.m2.1.1.3">
         𝑡
        </ci>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S3.p1.2.m2.1c">
       \mathcal{P}_{t}
      </annotation>
     </semantics>
    </math>
    , and methods for solving the optimal control problem. Given that the evaluation function
    <math alttext="f" class="ltx_Math" display="inline" id="S3.p1.3.m3.1">
     <semantics id="S3.p1.3.m3.1a">
      <mi id="S3.p1.3.m3.1.1" xref="S3.p1.3.m3.1.1.cmml">
       f
      </mi>
      <annotation-xml encoding="MathML-Content" id="S3.p1.3.m3.1b">
       <ci id="S3.p1.3.m3.1.1.cmml" xref="S3.p1.3.m3.1.1">
        𝑓
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S3.p1.3.m3.1c">
       f
      </annotation>
     </semantics>
    </math>
    is highly task-specific and subject to substantial variations, we opt not to concentrate on it within the scope of this section. Instead, our primary interest lies in the latter two elements: the mechanisms for enlarging
    <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S3.p1.4.m4.1">
     <semantics id="S3.p1.4.m4.1a">
      <msub id="S3.p1.4.m4.1.1" xref="S3.p1.4.m4.1.1.cmml">
       <mi class="ltx_font_mathcaligraphic" id="S3.p1.4.m4.1.1.2" xref="S3.p1.4.m4.1.1.2.cmml">
        𝒫
       </mi>
       <mi id="S3.p1.4.m4.1.1.3" xref="S3.p1.4.m4.1.1.3.cmml">
        t
       </mi>
      </msub>
      <annotation-xml encoding="MathML-Content" id="S3.p1.4.m4.1b">
       <apply id="S3.p1.4.m4.1.1.cmml" xref="S3.p1.4.m4.1.1">
        <csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.cmml" xref="S3.p1.4.m4.1.1">
         subscript
        </csymbol>
        <ci id="S3.p1.4.m4.1.1.2.cmml" xref="S3.p1.4.m4.1.1.2">
         𝒫
        </ci>
        <ci id="S3.p1.4.m4.1.1.3.cmml" xref="S3.p1.4.m4.1.1.3">
         𝑡
        </ci>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S3.p1.4.m4.1c">
       \mathcal{P}_{t}
      </annotation>
     </semantics>
    </math>
    and the algorithms capable of solving the ensuing optimal control problem.
   </p>
  </div>
  <div class="ltx_para" id="S3.p2">
   <p class="ltx_p" id="S3.p2.1">
    Accordingly, in this section, we feature several notable methods pertinent to these two aspects. For each aspect, we first describe the task at hand and offer an interpretation of the highlighted PE methods within the context of our proposed optimal control framework. Following this, we present some insights that can be garnered by examining these PE methods through the lens of the proposed framework.
   </p>
  </div>
  <section class="ltx_subsection" id="S3.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     3.1
    </span>
    Enlarging the Prompt Candidate Set
   </h3>
   <section class="ltx_subsubsection" id="S3.SS1.SSS1">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.1.1
     </span>
     Enlarging via Previous Responses
    </h4>
    <div class="ltx_para" id="S3.SS1.SSS1.p1">
     <p class="ltx_p" id="S3.SS1.SSS1.p1.1">
      A branch of multi-round PE methods
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib27" title="">
        27
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib28" title="">
        28
       </a>
       ]
      </cite>
      enlarge their prompt candidate set by adopting previous responses as part of later prompts. Here, we use Progressive-Hint Prompting (PHP)
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib28" title="">
        28
       </a>
       ]
      </cite>
      as an example to illustrate how these methods work.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS1.SSS1.p2">
     <p class="ltx_p" id="S3.SS1.SSS1.p2.1">
      PHP concentrates on arithmetic tasks. The evaluation function
      <math alttext="f" class="ltx_Math" display="inline" id="S3.SS1.SSS1.p2.1.m1.1">
       <semantics id="S3.SS1.SSS1.p2.1.m1.1a">
        <mi id="S3.SS1.SSS1.p2.1.m1.1.1" xref="S3.SS1.SSS1.p2.1.m1.1.1.cmml">
         f
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS1.p2.1.m1.1b">
         <ci id="S3.SS1.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS1.SSS1.p2.1.m1.1.1">
          𝑓
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS1.p2.1.m1.1c">
         f
        </annotation>
       </semantics>
      </math>
      is an identification function, signaling the correctness of the provided answer (e.g., having value 1 when the answer is correct and 0 otherwise).
     </p>
    </div>
    <div class="ltx_para" id="S3.SS1.SSS1.p3">
     <p class="ltx_p" id="S3.SS1.SSS1.p3.4">
      In PHP, the previous outputs of the LLM are used to construct subsequent inputs. Mathematically, this is given by
     </p>
     <table class="ltx_equation ltx_eqn_table" id="S3.Ex5">
      <tbody>
       <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
        <td class="ltx_eqn_cell ltx_eqn_center_padleft">
        </td>
        <td class="ltx_eqn_cell ltx_align_center">
         <math alttext='z_{t}^{p}=[\text{{Question} ``Hint: the answer is close to }z^{r}_{1},\dots,z^{r}_{t-1}"].' class="ltx_Math" display="block" id="S3.Ex5.m1.2">
          <semantics id="S3.Ex5.m1.2a">
           <mrow id="S3.Ex5.m1.2.2.1" xref="S3.Ex5.m1.2.2.1.1.cmml">
            <mrow id="S3.Ex5.m1.2.2.1.1" xref="S3.Ex5.m1.2.2.1.1.cmml">
             <msubsup id="S3.Ex5.m1.2.2.1.1.4" xref="S3.Ex5.m1.2.2.1.1.4.cmml">
              <mi id="S3.Ex5.m1.2.2.1.1.4.2.2" xref="S3.Ex5.m1.2.2.1.1.4.2.2.cmml">
               z
              </mi>
              <mi id="S3.Ex5.m1.2.2.1.1.4.2.3" xref="S3.Ex5.m1.2.2.1.1.4.2.3.cmml">
               t
              </mi>
              <mi id="S3.Ex5.m1.2.2.1.1.4.3" xref="S3.Ex5.m1.2.2.1.1.4.3.cmml">
               p
              </mi>
             </msubsup>
             <mo id="S3.Ex5.m1.2.2.1.1.3" xref="S3.Ex5.m1.2.2.1.1.3.cmml">
              =
             </mo>
             <mrow id="S3.Ex5.m1.2.2.1.1.2.2" xref="S3.Ex5.m1.2.2.1.1.2.3.cmml">
              <mo id="S3.Ex5.m1.2.2.1.1.2.2.3" stretchy="false" xref="S3.Ex5.m1.2.2.1.1.2.3.cmml">
               [
              </mo>
              <mrow id="S3.Ex5.m1.2.2.1.1.1.1.1" xref="S3.Ex5.m1.2.2.1.1.1.1.1.cmml">
               <mrow id="S3.Ex5.m1.2.2.1.1.1.1.1.2" xref="S3.Ex5.m1.2.2.1.1.1.1.1.2c.cmml">
                <mtext class="ltx_mathvariant_bold" id="S3.Ex5.m1.2.2.1.1.1.1.1.2a" xref="S3.Ex5.m1.2.2.1.1.1.1.1.2c.cmml">
                 Question
                </mtext>
                <mtext id="S3.Ex5.m1.2.2.1.1.1.1.1.2b" xref="S3.Ex5.m1.2.2.1.1.1.1.1.2c.cmml">
                 “Hint: the answer is close to
                </mtext>
               </mrow>
               <mo id="S3.Ex5.m1.2.2.1.1.1.1.1.1" lspace="0em" rspace="0em" xref="S3.Ex5.m1.2.2.1.1.1.1.1.1.cmml">
                ​
               </mo>
               <msubsup id="S3.Ex5.m1.2.2.1.1.1.1.1.3" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3.cmml">
                <mi id="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.2" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.2.cmml">
                 z
                </mi>
                <mn id="S3.Ex5.m1.2.2.1.1.1.1.1.3.3" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3.3.cmml">
                 1
                </mn>
                <mi id="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.3" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.3.cmml">
                 r
                </mi>
               </msubsup>
              </mrow>
              <mo id="S3.Ex5.m1.2.2.1.1.2.2.4" xref="S3.Ex5.m1.2.2.1.1.2.3.cmml">
               ,
              </mo>
              <mi id="S3.Ex5.m1.1.1" mathvariant="normal" xref="S3.Ex5.m1.1.1.cmml">
               …
              </mi>
              <mo id="S3.Ex5.m1.2.2.1.1.2.2.5" xref="S3.Ex5.m1.2.2.1.1.2.3.cmml">
               ,
              </mo>
              <mrow id="S3.Ex5.m1.2.2.1.1.2.2.2" xref="S3.Ex5.m1.2.2.1.1.2.2.2.cmml">
               <msubsup id="S3.Ex5.m1.2.2.1.1.2.2.2.2" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.cmml">
                <mi id="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.2" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.2.cmml">
                 z
                </mi>
                <mrow id="S3.Ex5.m1.2.2.1.1.2.2.2.2.3" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.cmml">
                 <mi id="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.2" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.2.cmml">
                  t
                 </mi>
                 <mo id="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.1" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.1.cmml">
                  −
                 </mo>
                 <mn id="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.3" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.3.cmml">
                  1
                 </mn>
                </mrow>
                <mi id="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.3" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.3.cmml">
                 r
                </mi>
               </msubsup>
               <mo id="S3.Ex5.m1.2.2.1.1.2.2.2.1" lspace="0em" rspace="0em" xref="S3.Ex5.m1.2.2.1.1.2.2.2.1.cmml">
                ​
               </mo>
               <mi id="S3.Ex5.m1.2.2.1.1.2.2.2.3" mathvariant="normal" xref="S3.Ex5.m1.2.2.1.1.2.2.2.3.cmml">
                "
               </mi>
              </mrow>
              <mo id="S3.Ex5.m1.2.2.1.1.2.2.6" stretchy="false" xref="S3.Ex5.m1.2.2.1.1.2.3.cmml">
               ]
              </mo>
             </mrow>
            </mrow>
            <mo id="S3.Ex5.m1.2.2.1.2" lspace="0em" xref="S3.Ex5.m1.2.2.1.1.cmml">
             .
            </mo>
           </mrow>
           <annotation-xml encoding="MathML-Content" id="S3.Ex5.m1.2b">
            <apply id="S3.Ex5.m1.2.2.1.1.cmml" xref="S3.Ex5.m1.2.2.1">
             <eq id="S3.Ex5.m1.2.2.1.1.3.cmml" xref="S3.Ex5.m1.2.2.1.1.3">
             </eq>
             <apply id="S3.Ex5.m1.2.2.1.1.4.cmml" xref="S3.Ex5.m1.2.2.1.1.4">
              <csymbol cd="ambiguous" id="S3.Ex5.m1.2.2.1.1.4.1.cmml" xref="S3.Ex5.m1.2.2.1.1.4">
               superscript
              </csymbol>
              <apply id="S3.Ex5.m1.2.2.1.1.4.2.cmml" xref="S3.Ex5.m1.2.2.1.1.4">
               <csymbol cd="ambiguous" id="S3.Ex5.m1.2.2.1.1.4.2.1.cmml" xref="S3.Ex5.m1.2.2.1.1.4">
                subscript
               </csymbol>
               <ci id="S3.Ex5.m1.2.2.1.1.4.2.2.cmml" xref="S3.Ex5.m1.2.2.1.1.4.2.2">
                𝑧
               </ci>
               <ci id="S3.Ex5.m1.2.2.1.1.4.2.3.cmml" xref="S3.Ex5.m1.2.2.1.1.4.2.3">
                𝑡
               </ci>
              </apply>
              <ci id="S3.Ex5.m1.2.2.1.1.4.3.cmml" xref="S3.Ex5.m1.2.2.1.1.4.3">
               𝑝
              </ci>
             </apply>
             <list id="S3.Ex5.m1.2.2.1.1.2.3.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2">
              <apply id="S3.Ex5.m1.2.2.1.1.1.1.1.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1">
               <times id="S3.Ex5.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.1">
               </times>
               <ci id="S3.Ex5.m1.2.2.1.1.1.1.1.2c.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.2">
                <mrow id="S3.Ex5.m1.2.2.1.1.1.1.1.2.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.2">
                 <mtext class="ltx_mathvariant_bold" id="S3.Ex5.m1.2.2.1.1.1.1.1.2a.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.2">
                  Question
                 </mtext>
                 <mtext id="S3.Ex5.m1.2.2.1.1.1.1.1.2b.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.2">
                  “Hint: the answer is close to
                 </mtext>
                </mrow>
               </ci>
               <apply id="S3.Ex5.m1.2.2.1.1.1.1.1.3.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3">
                <csymbol cd="ambiguous" id="S3.Ex5.m1.2.2.1.1.1.1.1.3.1.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3">
                 subscript
                </csymbol>
                <apply id="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3">
                 <csymbol cd="ambiguous" id="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.1.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3">
                  superscript
                 </csymbol>
                 <ci id="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.2.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.2">
                  𝑧
                 </ci>
                 <ci id="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.3.cmml" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3.2.3">
                  𝑟
                 </ci>
                </apply>
                <cn id="S3.Ex5.m1.2.2.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.Ex5.m1.2.2.1.1.1.1.1.3.3">
                 1
                </cn>
               </apply>
              </apply>
              <ci id="S3.Ex5.m1.1.1.cmml" xref="S3.Ex5.m1.1.1">
               …
              </ci>
              <apply id="S3.Ex5.m1.2.2.1.1.2.2.2.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2">
               <times id="S3.Ex5.m1.2.2.1.1.2.2.2.1.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.1">
               </times>
               <apply id="S3.Ex5.m1.2.2.1.1.2.2.2.2.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2">
                <csymbol cd="ambiguous" id="S3.Ex5.m1.2.2.1.1.2.2.2.2.1.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2">
                 subscript
                </csymbol>
                <apply id="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2">
                 <csymbol cd="ambiguous" id="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.1.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2">
                  superscript
                 </csymbol>
                 <ci id="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.2.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.2">
                  𝑧
                 </ci>
                 <ci id="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.3.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.2.3">
                  𝑟
                 </ci>
                </apply>
                <apply id="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.3">
                 <minus id="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.1.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.1">
                 </minus>
                 <ci id="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.2.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.2">
                  𝑡
                 </ci>
                 <cn id="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.3.cmml" type="integer" xref="S3.Ex5.m1.2.2.1.1.2.2.2.2.3.3">
                  1
                 </cn>
                </apply>
               </apply>
               <ci id="S3.Ex5.m1.2.2.1.1.2.2.2.3.cmml" xref="S3.Ex5.m1.2.2.1.1.2.2.2.3">
                "
               </ci>
              </apply>
             </list>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="S3.Ex5.m1.2c">
            z_{t}^{p}=[\text{{Question} ``Hint: the answer is close to }z^{r}_{1},\dots,z^{r}_{t-1}"].
           </annotation>
          </semantics>
         </math>
        </td>
        <td class="ltx_eqn_cell ltx_eqn_center_padright">
        </td>
       </tr>
      </tbody>
     </table>
     <p class="ltx_p" id="S3.SS1.SSS1.p3.3">
      The stopping criterion
      <math alttext="\tau" class="ltx_Math" display="inline" id="S3.SS1.SSS1.p3.1.m1.1">
       <semantics id="S3.SS1.SSS1.p3.1.m1.1a">
        <mi id="S3.SS1.SSS1.p3.1.m1.1.1" xref="S3.SS1.SSS1.p3.1.m1.1.1.cmml">
         τ
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS1.p3.1.m1.1b">
         <ci id="S3.SS1.SSS1.p3.1.m1.1.1.cmml" xref="S3.SS1.SSS1.p3.1.m1.1.1">
          𝜏
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS1.p3.1.m1.1c">
         \tau
        </annotation>
       </semantics>
      </math>
      is formulated as follows: terminate if
      <math alttext="z_{\tau}^{r}" class="ltx_Math" display="inline" id="S3.SS1.SSS1.p3.2.m2.1">
       <semantics id="S3.SS1.SSS1.p3.2.m2.1a">
        <msubsup id="S3.SS1.SSS1.p3.2.m2.1.1" xref="S3.SS1.SSS1.p3.2.m2.1.1.cmml">
         <mi id="S3.SS1.SSS1.p3.2.m2.1.1.2.2" xref="S3.SS1.SSS1.p3.2.m2.1.1.2.2.cmml">
          z
         </mi>
         <mi id="S3.SS1.SSS1.p3.2.m2.1.1.2.3" xref="S3.SS1.SSS1.p3.2.m2.1.1.2.3.cmml">
          τ
         </mi>
         <mi id="S3.SS1.SSS1.p3.2.m2.1.1.3" xref="S3.SS1.SSS1.p3.2.m2.1.1.3.cmml">
          r
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS1.p3.2.m2.1b">
         <apply id="S3.SS1.SSS1.p3.2.m2.1.1.cmml" xref="S3.SS1.SSS1.p3.2.m2.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS1.p3.2.m2.1.1.1.cmml" xref="S3.SS1.SSS1.p3.2.m2.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS1.SSS1.p3.2.m2.1.1.2.cmml" xref="S3.SS1.SSS1.p3.2.m2.1.1">
           <csymbol cd="ambiguous" id="S3.SS1.SSS1.p3.2.m2.1.1.2.1.cmml" xref="S3.SS1.SSS1.p3.2.m2.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS1.p3.2.m2.1.1.2.2.cmml" xref="S3.SS1.SSS1.p3.2.m2.1.1.2.2">
            𝑧
           </ci>
           <ci id="S3.SS1.SSS1.p3.2.m2.1.1.2.3.cmml" xref="S3.SS1.SSS1.p3.2.m2.1.1.2.3">
            𝜏
           </ci>
          </apply>
          <ci id="S3.SS1.SSS1.p3.2.m2.1.1.3.cmml" xref="S3.SS1.SSS1.p3.2.m2.1.1.3">
           𝑟
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS1.p3.2.m2.1c">
         z_{\tau}^{r}
        </annotation>
       </semantics>
      </math>
      reiterates a portion of the prompt. This stopping rule relies on the heuristic notion that the correct answer, when present in the prompt, likely leads to an output that adheres to that answer. We give an example of PHP interactions in Figure
      <a class="ltx_ref ltx_markedasmath ltx_font_italic" href="#S3.F2" title="Figure 2 ‣ 3.1.1 Enlarging via Previous Responses ‣ 3.1 Enlarging the Prompt Candidate Set ‣ 3 Prompt Engineering Methods ‣ Prompt Engineering Through the Lens of Optimal Control">
       <span class="ltx_text ltx_ref_tag">
        2
       </span>
      </a>
      .
     </p>
    </div>
    <figure class="ltx_figure" id="S3.F2">
     <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="191" id="S3.F2.g1" src="/html/2310.14201/assets/img/fig1.png" width="538"/>
     <figcaption class="ltx_caption ltx_centering">
      <span class="ltx_tag ltx_tag_figure">
       Figure 2:
      </span>
      An example of PHP interactions. The subsequent prompt
      <math alttext="z^{p}_{t+1}" class="ltx_Math" display="inline" id="S3.F2.9.m1.1">
       <semantics id="S3.F2.9.m1.1b">
        <msubsup id="S3.F2.9.m1.1.1" xref="S3.F2.9.m1.1.1.cmml">
         <mi id="S3.F2.9.m1.1.1.2.2" xref="S3.F2.9.m1.1.1.2.2.cmml">
          z
         </mi>
         <mrow id="S3.F2.9.m1.1.1.3" xref="S3.F2.9.m1.1.1.3.cmml">
          <mi id="S3.F2.9.m1.1.1.3.2" xref="S3.F2.9.m1.1.1.3.2.cmml">
           t
          </mi>
          <mo id="S3.F2.9.m1.1.1.3.1" xref="S3.F2.9.m1.1.1.3.1.cmml">
           +
          </mo>
          <mn id="S3.F2.9.m1.1.1.3.3" xref="S3.F2.9.m1.1.1.3.3.cmml">
           1
          </mn>
         </mrow>
         <mi id="S3.F2.9.m1.1.1.2.3" xref="S3.F2.9.m1.1.1.2.3.cmml">
          p
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.F2.9.m1.1c">
         <apply id="S3.F2.9.m1.1.1.cmml" xref="S3.F2.9.m1.1.1">
          <csymbol cd="ambiguous" id="S3.F2.9.m1.1.1.1.cmml" xref="S3.F2.9.m1.1.1">
           subscript
          </csymbol>
          <apply id="S3.F2.9.m1.1.1.2.cmml" xref="S3.F2.9.m1.1.1">
           <csymbol cd="ambiguous" id="S3.F2.9.m1.1.1.2.1.cmml" xref="S3.F2.9.m1.1.1">
            superscript
           </csymbol>
           <ci id="S3.F2.9.m1.1.1.2.2.cmml" xref="S3.F2.9.m1.1.1.2.2">
            𝑧
           </ci>
           <ci id="S3.F2.9.m1.1.1.2.3.cmml" xref="S3.F2.9.m1.1.1.2.3">
            𝑝
           </ci>
          </apply>
          <apply id="S3.F2.9.m1.1.1.3.cmml" xref="S3.F2.9.m1.1.1.3">
           <plus id="S3.F2.9.m1.1.1.3.1.cmml" xref="S3.F2.9.m1.1.1.3.1">
           </plus>
           <ci id="S3.F2.9.m1.1.1.3.2.cmml" xref="S3.F2.9.m1.1.1.3.2">
            𝑡
           </ci>
           <cn id="S3.F2.9.m1.1.1.3.3.cmml" type="integer" xref="S3.F2.9.m1.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F2.9.m1.1d">
         z^{p}_{t+1}
        </annotation>
       </semantics>
      </math>
      is constructed based on the previous round’s prompt
      <math alttext="z^{p}_{t}" class="ltx_Math" display="inline" id="S3.F2.10.m2.1">
       <semantics id="S3.F2.10.m2.1b">
        <msubsup id="S3.F2.10.m2.1.1" xref="S3.F2.10.m2.1.1.cmml">
         <mi id="S3.F2.10.m2.1.1.2.2" xref="S3.F2.10.m2.1.1.2.2.cmml">
          z
         </mi>
         <mi id="S3.F2.10.m2.1.1.3" xref="S3.F2.10.m2.1.1.3.cmml">
          t
         </mi>
         <mi id="S3.F2.10.m2.1.1.2.3" xref="S3.F2.10.m2.1.1.2.3.cmml">
          p
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.F2.10.m2.1c">
         <apply id="S3.F2.10.m2.1.1.cmml" xref="S3.F2.10.m2.1.1">
          <csymbol cd="ambiguous" id="S3.F2.10.m2.1.1.1.cmml" xref="S3.F2.10.m2.1.1">
           subscript
          </csymbol>
          <apply id="S3.F2.10.m2.1.1.2.cmml" xref="S3.F2.10.m2.1.1">
           <csymbol cd="ambiguous" id="S3.F2.10.m2.1.1.2.1.cmml" xref="S3.F2.10.m2.1.1">
            superscript
           </csymbol>
           <ci id="S3.F2.10.m2.1.1.2.2.cmml" xref="S3.F2.10.m2.1.1.2.2">
            𝑧
           </ci>
           <ci id="S3.F2.10.m2.1.1.2.3.cmml" xref="S3.F2.10.m2.1.1.2.3">
            𝑝
           </ci>
          </apply>
          <ci id="S3.F2.10.m2.1.1.3.cmml" xref="S3.F2.10.m2.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F2.10.m2.1d">
         z^{p}_{t}
        </annotation>
       </semantics>
      </math>
      and the response
      <math alttext="z^{r}_{t}" class="ltx_Math" display="inline" id="S3.F2.11.m3.1">
       <semantics id="S3.F2.11.m3.1b">
        <msubsup id="S3.F2.11.m3.1.1" xref="S3.F2.11.m3.1.1.cmml">
         <mi id="S3.F2.11.m3.1.1.2.2" xref="S3.F2.11.m3.1.1.2.2.cmml">
          z
         </mi>
         <mi id="S3.F2.11.m3.1.1.3" xref="S3.F2.11.m3.1.1.3.cmml">
          t
         </mi>
         <mi id="S3.F2.11.m3.1.1.2.3" xref="S3.F2.11.m3.1.1.2.3.cmml">
          r
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.F2.11.m3.1c">
         <apply id="S3.F2.11.m3.1.1.cmml" xref="S3.F2.11.m3.1.1">
          <csymbol cd="ambiguous" id="S3.F2.11.m3.1.1.1.cmml" xref="S3.F2.11.m3.1.1">
           subscript
          </csymbol>
          <apply id="S3.F2.11.m3.1.1.2.cmml" xref="S3.F2.11.m3.1.1">
           <csymbol cd="ambiguous" id="S3.F2.11.m3.1.1.2.1.cmml" xref="S3.F2.11.m3.1.1">
            superscript
           </csymbol>
           <ci id="S3.F2.11.m3.1.1.2.2.cmml" xref="S3.F2.11.m3.1.1.2.2">
            𝑧
           </ci>
           <ci id="S3.F2.11.m3.1.1.2.3.cmml" xref="S3.F2.11.m3.1.1.2.3">
            𝑟
           </ci>
          </apply>
          <ci id="S3.F2.11.m3.1.1.3.cmml" xref="S3.F2.11.m3.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F2.11.m3.1d">
         z^{r}_{t}
        </annotation>
       </semantics>
      </math>
      , by appending
      <math alttext="z^{r}_{t}" class="ltx_Math" display="inline" id="S3.F2.12.m4.1">
       <semantics id="S3.F2.12.m4.1b">
        <msubsup id="S3.F2.12.m4.1.1" xref="S3.F2.12.m4.1.1.cmml">
         <mi id="S3.F2.12.m4.1.1.2.2" xref="S3.F2.12.m4.1.1.2.2.cmml">
          z
         </mi>
         <mi id="S3.F2.12.m4.1.1.3" xref="S3.F2.12.m4.1.1.3.cmml">
          t
         </mi>
         <mi id="S3.F2.12.m4.1.1.2.3" xref="S3.F2.12.m4.1.1.2.3.cmml">
          r
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.F2.12.m4.1c">
         <apply id="S3.F2.12.m4.1.1.cmml" xref="S3.F2.12.m4.1.1">
          <csymbol cd="ambiguous" id="S3.F2.12.m4.1.1.1.cmml" xref="S3.F2.12.m4.1.1">
           subscript
          </csymbol>
          <apply id="S3.F2.12.m4.1.1.2.cmml" xref="S3.F2.12.m4.1.1">
           <csymbol cd="ambiguous" id="S3.F2.12.m4.1.1.2.1.cmml" xref="S3.F2.12.m4.1.1">
            superscript
           </csymbol>
           <ci id="S3.F2.12.m4.1.1.2.2.cmml" xref="S3.F2.12.m4.1.1.2.2">
            𝑧
           </ci>
           <ci id="S3.F2.12.m4.1.1.2.3.cmml" xref="S3.F2.12.m4.1.1.2.3">
            𝑟
           </ci>
          </apply>
          <ci id="S3.F2.12.m4.1.1.3.cmml" xref="S3.F2.12.m4.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F2.12.m4.1d">
         z^{r}_{t}
        </annotation>
       </semantics>
      </math>
      to the end of the hint array
      <math alttext="z^{p}_{t}" class="ltx_Math" display="inline" id="S3.F2.13.m5.1">
       <semantics id="S3.F2.13.m5.1b">
        <msubsup id="S3.F2.13.m5.1.1" xref="S3.F2.13.m5.1.1.cmml">
         <mi id="S3.F2.13.m5.1.1.2.2" xref="S3.F2.13.m5.1.1.2.2.cmml">
          z
         </mi>
         <mi id="S3.F2.13.m5.1.1.3" xref="S3.F2.13.m5.1.1.3.cmml">
          t
         </mi>
         <mi id="S3.F2.13.m5.1.1.2.3" xref="S3.F2.13.m5.1.1.2.3.cmml">
          p
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.F2.13.m5.1c">
         <apply id="S3.F2.13.m5.1.1.cmml" xref="S3.F2.13.m5.1.1">
          <csymbol cd="ambiguous" id="S3.F2.13.m5.1.1.1.cmml" xref="S3.F2.13.m5.1.1">
           subscript
          </csymbol>
          <apply id="S3.F2.13.m5.1.1.2.cmml" xref="S3.F2.13.m5.1.1">
           <csymbol cd="ambiguous" id="S3.F2.13.m5.1.1.2.1.cmml" xref="S3.F2.13.m5.1.1">
            superscript
           </csymbol>
           <ci id="S3.F2.13.m5.1.1.2.2.cmml" xref="S3.F2.13.m5.1.1.2.2">
            𝑧
           </ci>
           <ci id="S3.F2.13.m5.1.1.2.3.cmml" xref="S3.F2.13.m5.1.1.2.3">
            𝑝
           </ci>
          </apply>
          <ci id="S3.F2.13.m5.1.1.3.cmml" xref="S3.F2.13.m5.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F2.13.m5.1d">
         z^{p}_{t}
        </annotation>
       </semantics>
      </math>
      .
Only when
      <math alttext="z^{r}_{1}=" class="ltx_Math" display="inline" id="S3.F2.14.m6.1">
       <semantics id="S3.F2.14.m6.1b">
        <mrow id="S3.F2.14.m6.1.1" xref="S3.F2.14.m6.1.1.cmml">
         <msubsup id="S3.F2.14.m6.1.1.2" xref="S3.F2.14.m6.1.1.2.cmml">
          <mi id="S3.F2.14.m6.1.1.2.2.2" xref="S3.F2.14.m6.1.1.2.2.2.cmml">
           z
          </mi>
          <mn id="S3.F2.14.m6.1.1.2.3" xref="S3.F2.14.m6.1.1.2.3.cmml">
           1
          </mn>
          <mi id="S3.F2.14.m6.1.1.2.2.3" xref="S3.F2.14.m6.1.1.2.2.3.cmml">
           r
          </mi>
         </msubsup>
         <mo id="S3.F2.14.m6.1.1.1" xref="S3.F2.14.m6.1.1.1.cmml">
          =
         </mo>
         <mi id="S3.F2.14.m6.1.1.3" xref="S3.F2.14.m6.1.1.3.cmml">
         </mi>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.F2.14.m6.1c">
         <apply id="S3.F2.14.m6.1.1.cmml" xref="S3.F2.14.m6.1.1">
          <eq id="S3.F2.14.m6.1.1.1.cmml" xref="S3.F2.14.m6.1.1.1">
          </eq>
          <apply id="S3.F2.14.m6.1.1.2.cmml" xref="S3.F2.14.m6.1.1.2">
           <csymbol cd="ambiguous" id="S3.F2.14.m6.1.1.2.1.cmml" xref="S3.F2.14.m6.1.1.2">
            subscript
           </csymbol>
           <apply id="S3.F2.14.m6.1.1.2.2.cmml" xref="S3.F2.14.m6.1.1.2">
            <csymbol cd="ambiguous" id="S3.F2.14.m6.1.1.2.2.1.cmml" xref="S3.F2.14.m6.1.1.2">
             superscript
            </csymbol>
            <ci id="S3.F2.14.m6.1.1.2.2.2.cmml" xref="S3.F2.14.m6.1.1.2.2.2">
             𝑧
            </ci>
            <ci id="S3.F2.14.m6.1.1.2.2.3.cmml" xref="S3.F2.14.m6.1.1.2.2.3">
             𝑟
            </ci>
           </apply>
           <cn id="S3.F2.14.m6.1.1.2.3.cmml" type="integer" xref="S3.F2.14.m6.1.1.2.3">
            1
           </cn>
          </apply>
          <csymbol cd="latexml" id="S3.F2.14.m6.1.1.3.cmml" xref="S3.F2.14.m6.1.1.3">
           absent
          </csymbol>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F2.14.m6.1d">
         z^{r}_{1}=
        </annotation>
       </semantics>
      </math>
      "…730391." is present can
      <math alttext="\mathcal{P}_{2}" class="ltx_Math" display="inline" id="S3.F2.15.m7.1">
       <semantics id="S3.F2.15.m7.1b">
        <msub id="S3.F2.15.m7.1.1" xref="S3.F2.15.m7.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.F2.15.m7.1.1.2" xref="S3.F2.15.m7.1.1.2.cmml">
          𝒫
         </mi>
         <mn id="S3.F2.15.m7.1.1.3" xref="S3.F2.15.m7.1.1.3.cmml">
          2
         </mn>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.F2.15.m7.1c">
         <apply id="S3.F2.15.m7.1.1.cmml" xref="S3.F2.15.m7.1.1">
          <csymbol cd="ambiguous" id="S3.F2.15.m7.1.1.1.cmml" xref="S3.F2.15.m7.1.1">
           subscript
          </csymbol>
          <ci id="S3.F2.15.m7.1.1.2.cmml" xref="S3.F2.15.m7.1.1.2">
           𝒫
          </ci>
          <cn id="S3.F2.15.m7.1.1.3.cmml" type="integer" xref="S3.F2.15.m7.1.1.3">
           2
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F2.15.m7.1d">
         \mathcal{P}_{2}
        </annotation>
       </semantics>
      </math>
      include prompts such as "…the answer is close to 730391." More generally,
      <math alttext="\mathcal{P}_{t}=\mathcal{P}_{t-1}\cup\{z^{p}_{t}\text{ motivated by }z^{r}_{1},\dots,z^{r}_{t-1}\}" class="ltx_Math" display="inline" id="S3.F2.16.m8.3">
       <semantics id="S3.F2.16.m8.3b">
        <mrow id="S3.F2.16.m8.3.3" xref="S3.F2.16.m8.3.3.cmml">
         <msub id="S3.F2.16.m8.3.3.4" xref="S3.F2.16.m8.3.3.4.cmml">
          <mi class="ltx_font_mathcaligraphic" id="S3.F2.16.m8.3.3.4.2" xref="S3.F2.16.m8.3.3.4.2.cmml">
           𝒫
          </mi>
          <mi id="S3.F2.16.m8.3.3.4.3" xref="S3.F2.16.m8.3.3.4.3.cmml">
           t
          </mi>
         </msub>
         <mo id="S3.F2.16.m8.3.3.3" xref="S3.F2.16.m8.3.3.3.cmml">
          =
         </mo>
         <mrow id="S3.F2.16.m8.3.3.2" xref="S3.F2.16.m8.3.3.2.cmml">
          <msub id="S3.F2.16.m8.3.3.2.4" xref="S3.F2.16.m8.3.3.2.4.cmml">
           <mi class="ltx_font_mathcaligraphic" id="S3.F2.16.m8.3.3.2.4.2" xref="S3.F2.16.m8.3.3.2.4.2.cmml">
            𝒫
           </mi>
           <mrow id="S3.F2.16.m8.3.3.2.4.3" xref="S3.F2.16.m8.3.3.2.4.3.cmml">
            <mi id="S3.F2.16.m8.3.3.2.4.3.2" xref="S3.F2.16.m8.3.3.2.4.3.2.cmml">
             t
            </mi>
            <mo id="S3.F2.16.m8.3.3.2.4.3.1" xref="S3.F2.16.m8.3.3.2.4.3.1.cmml">
             −
            </mo>
            <mn id="S3.F2.16.m8.3.3.2.4.3.3" xref="S3.F2.16.m8.3.3.2.4.3.3.cmml">
             1
            </mn>
           </mrow>
          </msub>
          <mo id="S3.F2.16.m8.3.3.2.3" xref="S3.F2.16.m8.3.3.2.3.cmml">
           ∪
          </mo>
          <mrow id="S3.F2.16.m8.3.3.2.2.2" xref="S3.F2.16.m8.3.3.2.2.3.cmml">
           <mo id="S3.F2.16.m8.3.3.2.2.2.3" stretchy="false" xref="S3.F2.16.m8.3.3.2.2.3.cmml">
            {
           </mo>
           <mrow id="S3.F2.16.m8.2.2.1.1.1.1" xref="S3.F2.16.m8.2.2.1.1.1.1.cmml">
            <msubsup id="S3.F2.16.m8.2.2.1.1.1.1.2" xref="S3.F2.16.m8.2.2.1.1.1.1.2.cmml">
             <mi id="S3.F2.16.m8.2.2.1.1.1.1.2.2.2" xref="S3.F2.16.m8.2.2.1.1.1.1.2.2.2.cmml">
              z
             </mi>
             <mi id="S3.F2.16.m8.2.2.1.1.1.1.2.3" xref="S3.F2.16.m8.2.2.1.1.1.1.2.3.cmml">
              t
             </mi>
             <mi id="S3.F2.16.m8.2.2.1.1.1.1.2.2.3" xref="S3.F2.16.m8.2.2.1.1.1.1.2.2.3.cmml">
              p
             </mi>
            </msubsup>
            <mo id="S3.F2.16.m8.2.2.1.1.1.1.1" lspace="0em" rspace="0em" xref="S3.F2.16.m8.2.2.1.1.1.1.1.cmml">
             ​
            </mo>
            <mtext id="S3.F2.16.m8.2.2.1.1.1.1.3" xref="S3.F2.16.m8.2.2.1.1.1.1.3a.cmml">
             motivated by
            </mtext>
            <mo id="S3.F2.16.m8.2.2.1.1.1.1.1b" lspace="0em" rspace="0em" xref="S3.F2.16.m8.2.2.1.1.1.1.1.cmml">
             ​
            </mo>
            <msubsup id="S3.F2.16.m8.2.2.1.1.1.1.4" xref="S3.F2.16.m8.2.2.1.1.1.1.4.cmml">
             <mi id="S3.F2.16.m8.2.2.1.1.1.1.4.2.2" xref="S3.F2.16.m8.2.2.1.1.1.1.4.2.2.cmml">
              z
             </mi>
             <mn id="S3.F2.16.m8.2.2.1.1.1.1.4.3" xref="S3.F2.16.m8.2.2.1.1.1.1.4.3.cmml">
              1
             </mn>
             <mi id="S3.F2.16.m8.2.2.1.1.1.1.4.2.3" xref="S3.F2.16.m8.2.2.1.1.1.1.4.2.3.cmml">
              r
             </mi>
            </msubsup>
           </mrow>
           <mo id="S3.F2.16.m8.3.3.2.2.2.4" xref="S3.F2.16.m8.3.3.2.2.3.cmml">
            ,
           </mo>
           <mi id="S3.F2.16.m8.1.1" mathvariant="normal" xref="S3.F2.16.m8.1.1.cmml">
            …
           </mi>
           <mo id="S3.F2.16.m8.3.3.2.2.2.5" xref="S3.F2.16.m8.3.3.2.2.3.cmml">
            ,
           </mo>
           <msubsup id="S3.F2.16.m8.3.3.2.2.2.2" xref="S3.F2.16.m8.3.3.2.2.2.2.cmml">
            <mi id="S3.F2.16.m8.3.3.2.2.2.2.2.2" xref="S3.F2.16.m8.3.3.2.2.2.2.2.2.cmml">
             z
            </mi>
            <mrow id="S3.F2.16.m8.3.3.2.2.2.2.3" xref="S3.F2.16.m8.3.3.2.2.2.2.3.cmml">
             <mi id="S3.F2.16.m8.3.3.2.2.2.2.3.2" xref="S3.F2.16.m8.3.3.2.2.2.2.3.2.cmml">
              t
             </mi>
             <mo id="S3.F2.16.m8.3.3.2.2.2.2.3.1" xref="S3.F2.16.m8.3.3.2.2.2.2.3.1.cmml">
              −
             </mo>
             <mn id="S3.F2.16.m8.3.3.2.2.2.2.3.3" xref="S3.F2.16.m8.3.3.2.2.2.2.3.3.cmml">
              1
             </mn>
            </mrow>
            <mi id="S3.F2.16.m8.3.3.2.2.2.2.2.3" xref="S3.F2.16.m8.3.3.2.2.2.2.2.3.cmml">
             r
            </mi>
           </msubsup>
           <mo id="S3.F2.16.m8.3.3.2.2.2.6" stretchy="false" xref="S3.F2.16.m8.3.3.2.2.3.cmml">
            }
           </mo>
          </mrow>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.F2.16.m8.3c">
         <apply id="S3.F2.16.m8.3.3.cmml" xref="S3.F2.16.m8.3.3">
          <eq id="S3.F2.16.m8.3.3.3.cmml" xref="S3.F2.16.m8.3.3.3">
          </eq>
          <apply id="S3.F2.16.m8.3.3.4.cmml" xref="S3.F2.16.m8.3.3.4">
           <csymbol cd="ambiguous" id="S3.F2.16.m8.3.3.4.1.cmml" xref="S3.F2.16.m8.3.3.4">
            subscript
           </csymbol>
           <ci id="S3.F2.16.m8.3.3.4.2.cmml" xref="S3.F2.16.m8.3.3.4.2">
            𝒫
           </ci>
           <ci id="S3.F2.16.m8.3.3.4.3.cmml" xref="S3.F2.16.m8.3.3.4.3">
            𝑡
           </ci>
          </apply>
          <apply id="S3.F2.16.m8.3.3.2.cmml" xref="S3.F2.16.m8.3.3.2">
           <union id="S3.F2.16.m8.3.3.2.3.cmml" xref="S3.F2.16.m8.3.3.2.3">
           </union>
           <apply id="S3.F2.16.m8.3.3.2.4.cmml" xref="S3.F2.16.m8.3.3.2.4">
            <csymbol cd="ambiguous" id="S3.F2.16.m8.3.3.2.4.1.cmml" xref="S3.F2.16.m8.3.3.2.4">
             subscript
            </csymbol>
            <ci id="S3.F2.16.m8.3.3.2.4.2.cmml" xref="S3.F2.16.m8.3.3.2.4.2">
             𝒫
            </ci>
            <apply id="S3.F2.16.m8.3.3.2.4.3.cmml" xref="S3.F2.16.m8.3.3.2.4.3">
             <minus id="S3.F2.16.m8.3.3.2.4.3.1.cmml" xref="S3.F2.16.m8.3.3.2.4.3.1">
             </minus>
             <ci id="S3.F2.16.m8.3.3.2.4.3.2.cmml" xref="S3.F2.16.m8.3.3.2.4.3.2">
              𝑡
             </ci>
             <cn id="S3.F2.16.m8.3.3.2.4.3.3.cmml" type="integer" xref="S3.F2.16.m8.3.3.2.4.3.3">
              1
             </cn>
            </apply>
           </apply>
           <set id="S3.F2.16.m8.3.3.2.2.3.cmml" xref="S3.F2.16.m8.3.3.2.2.2">
            <apply id="S3.F2.16.m8.2.2.1.1.1.1.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1">
             <times id="S3.F2.16.m8.2.2.1.1.1.1.1.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.1">
             </times>
             <apply id="S3.F2.16.m8.2.2.1.1.1.1.2.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.2">
              <csymbol cd="ambiguous" id="S3.F2.16.m8.2.2.1.1.1.1.2.1.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.2">
               subscript
              </csymbol>
              <apply id="S3.F2.16.m8.2.2.1.1.1.1.2.2.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.2">
               <csymbol cd="ambiguous" id="S3.F2.16.m8.2.2.1.1.1.1.2.2.1.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.2">
                superscript
               </csymbol>
               <ci id="S3.F2.16.m8.2.2.1.1.1.1.2.2.2.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.2.2.2">
                𝑧
               </ci>
               <ci id="S3.F2.16.m8.2.2.1.1.1.1.2.2.3.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.2.2.3">
                𝑝
               </ci>
              </apply>
              <ci id="S3.F2.16.m8.2.2.1.1.1.1.2.3.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.2.3">
               𝑡
              </ci>
             </apply>
             <ci id="S3.F2.16.m8.2.2.1.1.1.1.3a.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.3">
              <mtext id="S3.F2.16.m8.2.2.1.1.1.1.3.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.3">
               motivated by
              </mtext>
             </ci>
             <apply id="S3.F2.16.m8.2.2.1.1.1.1.4.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.4">
              <csymbol cd="ambiguous" id="S3.F2.16.m8.2.2.1.1.1.1.4.1.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.4">
               subscript
              </csymbol>
              <apply id="S3.F2.16.m8.2.2.1.1.1.1.4.2.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.4">
               <csymbol cd="ambiguous" id="S3.F2.16.m8.2.2.1.1.1.1.4.2.1.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.4">
                superscript
               </csymbol>
               <ci id="S3.F2.16.m8.2.2.1.1.1.1.4.2.2.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.4.2.2">
                𝑧
               </ci>
               <ci id="S3.F2.16.m8.2.2.1.1.1.1.4.2.3.cmml" xref="S3.F2.16.m8.2.2.1.1.1.1.4.2.3">
                𝑟
               </ci>
              </apply>
              <cn id="S3.F2.16.m8.2.2.1.1.1.1.4.3.cmml" type="integer" xref="S3.F2.16.m8.2.2.1.1.1.1.4.3">
               1
              </cn>
             </apply>
            </apply>
            <ci id="S3.F2.16.m8.1.1.cmml" xref="S3.F2.16.m8.1.1">
             …
            </ci>
            <apply id="S3.F2.16.m8.3.3.2.2.2.2.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2">
             <csymbol cd="ambiguous" id="S3.F2.16.m8.3.3.2.2.2.2.1.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2">
              subscript
             </csymbol>
             <apply id="S3.F2.16.m8.3.3.2.2.2.2.2.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2">
              <csymbol cd="ambiguous" id="S3.F2.16.m8.3.3.2.2.2.2.2.1.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2">
               superscript
              </csymbol>
              <ci id="S3.F2.16.m8.3.3.2.2.2.2.2.2.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2.2.2">
               𝑧
              </ci>
              <ci id="S3.F2.16.m8.3.3.2.2.2.2.2.3.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2.2.3">
               𝑟
              </ci>
             </apply>
             <apply id="S3.F2.16.m8.3.3.2.2.2.2.3.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2.3">
              <minus id="S3.F2.16.m8.3.3.2.2.2.2.3.1.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2.3.1">
              </minus>
              <ci id="S3.F2.16.m8.3.3.2.2.2.2.3.2.cmml" xref="S3.F2.16.m8.3.3.2.2.2.2.3.2">
               𝑡
              </ci>
              <cn id="S3.F2.16.m8.3.3.2.2.2.2.3.3.cmml" type="integer" xref="S3.F2.16.m8.3.3.2.2.2.2.3.3">
               1
              </cn>
             </apply>
            </apply>
           </set>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F2.16.m8.3d">
         \mathcal{P}_{t}=\mathcal{P}_{t-1}\cup\{z^{p}_{t}\text{ motivated by }z^{r}_{1},\dots,z^{r}_{t-1}\}
        </annotation>
       </semantics>
      </math>
      .
     </figcaption>
    </figure>
    <div class="ltx_para" id="S3.SS1.SSS1.p4">
     <p class="ltx_p" id="S3.SS1.SSS1.p4.1">
      PHP-like PE methods review the responses from the LLM and utilize them to formulate subsequent prompts. These subsequent prompts may serve to clarify or provide additional guidance to the LLM, creating a feedback loop interaction paradigm that enhances adaptability across different LLMs and tasks.
     </p>
    </div>
   </section>
   <section class="ltx_subsubsection" id="S3.SS1.SSS2">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.1.2
     </span>
     Enlarging via Direct Prompts
    </h4>
    <div class="ltx_para" id="S3.SS1.SSS2.p1">
     <p class="ltx_p" id="S3.SS1.SSS2.p1.1">
      Some multi-round PE methods utilize specially crafted prompts to expand their prompt candidate sets. These tactics may include directing the LLM to decompose the initial task
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib7" title="">
        7
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib29" title="">
        29
       </a>
       ]
      </cite>
      , or eliciting background information from the LLM
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib8" title="">
        8
       </a>
       ]
      </cite>
      , among other approaches. Although such interactions do not directly influence the final output, they effectively augment the prompt candidate sets, thereby aiding the generation of more impactful subsequent prompts. To demonstrate this approach, we refer to the Least-to-Most (LtM) method
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib7" title="">
        7
       </a>
       ]
      </cite>
      as an illustrative example.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS1.SSS2.p2">
     <p class="ltx_p" id="S3.SS1.SSS2.p2.2">
      LtM is primarily oriented towards reasoning tasks. It assume that the task
      <math alttext="z^{q}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.1.m1.1">
       <semantics id="S3.SS1.SSS2.p2.1.m1.1a">
        <msup id="S3.SS1.SSS2.p2.1.m1.1.1" xref="S3.SS1.SSS2.p2.1.m1.1.1.cmml">
         <mi id="S3.SS1.SSS2.p2.1.m1.1.1.2" xref="S3.SS1.SSS2.p2.1.m1.1.1.2.cmml">
          z
         </mi>
         <mi id="S3.SS1.SSS2.p2.1.m1.1.1.3" xref="S3.SS1.SSS2.p2.1.m1.1.1.3.cmml">
          q
         </mi>
        </msup>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.1.m1.1b">
         <apply id="S3.SS1.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.1.m1.1.1.1.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1">
           superscript
          </csymbol>
          <ci id="S3.SS1.SSS2.p2.1.m1.1.1.2.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.2">
           𝑧
          </ci>
          <ci id="S3.SS1.SSS2.p2.1.m1.1.1.3.cmml" xref="S3.SS1.SSS2.p2.1.m1.1.1.3">
           𝑞
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.1.m1.1c">
         z^{q}
        </annotation>
       </semantics>
      </math>
      takes the form of [
      <span class="ltx_text ltx_font_bold" id="S3.SS1.SSS2.p2.2.1">
       Description
      </span>
      <span class="ltx_text ltx_font_bold" id="S3.SS1.SSS2.p2.2.2">
       Question
      </span>
      ]. Similar to PHP, LtM employs the identification function as its evaluation function
      <math alttext="f" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.2.m2.1">
       <semantics id="S3.SS1.SSS2.p2.2.m2.1a">
        <mi id="S3.SS1.SSS2.p2.2.m2.1.1" xref="S3.SS1.SSS2.p2.2.m2.1.1.cmml">
         f
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.2.m2.1b">
         <ci id="S3.SS1.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS1.SSS2.p2.2.m2.1.1">
          𝑓
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.2.m2.1c">
         f
        </annotation>
       </semantics>
      </math>
      . The LtM strategy employs the LLM to break down a complex task into simpler sub-tasks by using specially crafted initial prompts. Formally, LtM defines
     </p>
     <table class="ltx_equation ltx_eqn_table" id="S3.Ex6">
      <tbody>
       <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
        <td class="ltx_eqn_cell ltx_eqn_center_padleft">
        </td>
        <td class="ltx_eqn_cell ltx_align_center">
         <math alttext='z^{p}_{t}=[\text{{Description}\ "In order to solve }z^{r}_{t-1}\text{, we have to solve:"}],\quad t=1,\dots,T,' class="ltx_Math" display="block" id="S3.Ex6.m1.4">
          <semantics id="S3.Ex6.m1.4a">
           <mrow id="S3.Ex6.m1.4.4.1">
            <mrow id="S3.Ex6.m1.4.4.1.1.2" xref="S3.Ex6.m1.4.4.1.1.3.cmml">
             <mrow id="S3.Ex6.m1.4.4.1.1.1.1" xref="S3.Ex6.m1.4.4.1.1.1.1.cmml">
              <msubsup id="S3.Ex6.m1.4.4.1.1.1.1.3" xref="S3.Ex6.m1.4.4.1.1.1.1.3.cmml">
               <mi id="S3.Ex6.m1.4.4.1.1.1.1.3.2.2" xref="S3.Ex6.m1.4.4.1.1.1.1.3.2.2.cmml">
                z
               </mi>
               <mi id="S3.Ex6.m1.4.4.1.1.1.1.3.3" xref="S3.Ex6.m1.4.4.1.1.1.1.3.3.cmml">
                t
               </mi>
               <mi id="S3.Ex6.m1.4.4.1.1.1.1.3.2.3" xref="S3.Ex6.m1.4.4.1.1.1.1.3.2.3.cmml">
                p
               </mi>
              </msubsup>
              <mo id="S3.Ex6.m1.4.4.1.1.1.1.2" xref="S3.Ex6.m1.4.4.1.1.1.1.2.cmml">
               =
              </mo>
              <mrow id="S3.Ex6.m1.4.4.1.1.1.1.1.1" xref="S3.Ex6.m1.4.4.1.1.1.1.1.2.cmml">
               <mo id="S3.Ex6.m1.4.4.1.1.1.1.1.1.2" stretchy="false" xref="S3.Ex6.m1.4.4.1.1.1.1.1.2.1.cmml">
                [
               </mo>
               <mrow id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.cmml">
                <mrow id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2c.cmml">
                 <mtext class="ltx_mathvariant_bold" id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2a" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2c.cmml">
                  Description
                 </mtext>
                 <mtext id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2b" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2c.cmml">
                  "In order to solve
                 </mtext>
                </mrow>
                <mo id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.1" lspace="0em" rspace="0em" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.1.cmml">
                 ​
                </mo>
                <msubsup id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.cmml">
                 <mi id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.2" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.2.cmml">
                  z
                 </mi>
                 <mrow id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.cmml">
                  <mi id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.2" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.2.cmml">
                   t
                  </mi>
                  <mo id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.1" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.1.cmml">
                   −
                  </mo>
                  <mn id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.3" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.3.cmml">
                   1
                  </mn>
                 </mrow>
                 <mi id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.3" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.3.cmml">
                  r
                 </mi>
                </msubsup>
                <mo id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.1a" lspace="0em" rspace="0em" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.1.cmml">
                 ​
                </mo>
                <mtext id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.4" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.4a.cmml">
                 , we have to solve:"
                </mtext>
               </mrow>
               <mo id="S3.Ex6.m1.4.4.1.1.1.1.1.1.3" stretchy="false" xref="S3.Ex6.m1.4.4.1.1.1.1.1.2.1.cmml">
                ]
               </mo>
              </mrow>
             </mrow>
             <mo id="S3.Ex6.m1.4.4.1.1.2.3" rspace="1.167em" xref="S3.Ex6.m1.4.4.1.1.3a.cmml">
              ,
             </mo>
             <mrow id="S3.Ex6.m1.4.4.1.1.2.2" xref="S3.Ex6.m1.4.4.1.1.2.2.cmml">
              <mi id="S3.Ex6.m1.4.4.1.1.2.2.2" xref="S3.Ex6.m1.4.4.1.1.2.2.2.cmml">
               t
              </mi>
              <mo id="S3.Ex6.m1.4.4.1.1.2.2.1" xref="S3.Ex6.m1.4.4.1.1.2.2.1.cmml">
               =
              </mo>
              <mrow id="S3.Ex6.m1.4.4.1.1.2.2.3.2" xref="S3.Ex6.m1.4.4.1.1.2.2.3.1.cmml">
               <mn id="S3.Ex6.m1.1.1" xref="S3.Ex6.m1.1.1.cmml">
                1
               </mn>
               <mo id="S3.Ex6.m1.4.4.1.1.2.2.3.2.1" xref="S3.Ex6.m1.4.4.1.1.2.2.3.1.cmml">
                ,
               </mo>
               <mi id="S3.Ex6.m1.2.2" mathvariant="normal" xref="S3.Ex6.m1.2.2.cmml">
                …
               </mi>
               <mo id="S3.Ex6.m1.4.4.1.1.2.2.3.2.2" xref="S3.Ex6.m1.4.4.1.1.2.2.3.1.cmml">
                ,
               </mo>
               <mi id="S3.Ex6.m1.3.3" xref="S3.Ex6.m1.3.3.cmml">
                T
               </mi>
              </mrow>
             </mrow>
            </mrow>
            <mo id="S3.Ex6.m1.4.4.1.2">
             ,
            </mo>
           </mrow>
           <annotation-xml encoding="MathML-Content" id="S3.Ex6.m1.4b">
            <apply id="S3.Ex6.m1.4.4.1.1.3.cmml" xref="S3.Ex6.m1.4.4.1.1.2">
             <csymbol cd="ambiguous" id="S3.Ex6.m1.4.4.1.1.3a.cmml" xref="S3.Ex6.m1.4.4.1.1.2.3">
              formulae-sequence
             </csymbol>
             <apply id="S3.Ex6.m1.4.4.1.1.1.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1">
              <eq id="S3.Ex6.m1.4.4.1.1.1.1.2.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.2">
              </eq>
              <apply id="S3.Ex6.m1.4.4.1.1.1.1.3.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.3">
               <csymbol cd="ambiguous" id="S3.Ex6.m1.4.4.1.1.1.1.3.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.3">
                subscript
               </csymbol>
               <apply id="S3.Ex6.m1.4.4.1.1.1.1.3.2.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.3">
                <csymbol cd="ambiguous" id="S3.Ex6.m1.4.4.1.1.1.1.3.2.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.3">
                 superscript
                </csymbol>
                <ci id="S3.Ex6.m1.4.4.1.1.1.1.3.2.2.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.3.2.2">
                 𝑧
                </ci>
                <ci id="S3.Ex6.m1.4.4.1.1.1.1.3.2.3.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.3.2.3">
                 𝑝
                </ci>
               </apply>
               <ci id="S3.Ex6.m1.4.4.1.1.1.1.3.3.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.3.3">
                𝑡
               </ci>
              </apply>
              <apply id="S3.Ex6.m1.4.4.1.1.1.1.1.2.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1">
               <csymbol cd="latexml" id="S3.Ex6.m1.4.4.1.1.1.1.1.2.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.2">
                delimited-[]
               </csymbol>
               <apply id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1">
                <times id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.1">
                </times>
                <ci id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2c.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2">
                 <mrow id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2">
                  <mtext class="ltx_mathvariant_bold" id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2a.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2">
                   Description
                  </mtext>
                  <mtext id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2b.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.2">
                   "In order to solve
                  </mtext>
                 </mrow>
                </ci>
                <apply id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3">
                 <csymbol cd="ambiguous" id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3">
                  subscript
                 </csymbol>
                 <apply id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3">
                  <csymbol cd="ambiguous" id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3">
                   superscript
                  </csymbol>
                  <ci id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.2.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.2">
                   𝑧
                  </ci>
                  <ci id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.3.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.2.3">
                   𝑟
                  </ci>
                 </apply>
                 <apply id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3">
                  <minus id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.1.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.1">
                  </minus>
                  <ci id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.2.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.2">
                   𝑡
                  </ci>
                  <cn id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.3.cmml" type="integer" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.3.3.3">
                   1
                  </cn>
                 </apply>
                </apply>
                <ci id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.4a.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.4">
                 <mtext id="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.4.cmml" xref="S3.Ex6.m1.4.4.1.1.1.1.1.1.1.4">
                  , we have to solve:"
                 </mtext>
                </ci>
               </apply>
              </apply>
             </apply>
             <apply id="S3.Ex6.m1.4.4.1.1.2.2.cmml" xref="S3.Ex6.m1.4.4.1.1.2.2">
              <eq id="S3.Ex6.m1.4.4.1.1.2.2.1.cmml" xref="S3.Ex6.m1.4.4.1.1.2.2.1">
              </eq>
              <ci id="S3.Ex6.m1.4.4.1.1.2.2.2.cmml" xref="S3.Ex6.m1.4.4.1.1.2.2.2">
               𝑡
              </ci>
              <list id="S3.Ex6.m1.4.4.1.1.2.2.3.1.cmml" xref="S3.Ex6.m1.4.4.1.1.2.2.3.2">
               <cn id="S3.Ex6.m1.1.1.cmml" type="integer" xref="S3.Ex6.m1.1.1">
                1
               </cn>
               <ci id="S3.Ex6.m1.2.2.cmml" xref="S3.Ex6.m1.2.2">
                …
               </ci>
               <ci id="S3.Ex6.m1.3.3.cmml" xref="S3.Ex6.m1.3.3">
                𝑇
               </ci>
              </list>
             </apply>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="S3.Ex6.m1.4c">
            z^{p}_{t}=[\text{{Description}\ "In order to solve }z^{r}_{t-1}\text{, we have to solve:"}],\quad t=1,\dots,T,
           </annotation>
          </semantics>
         </math>
        </td>
        <td class="ltx_eqn_cell ltx_eqn_center_padright">
        </td>
       </tr>
      </tbody>
     </table>
     <p class="ltx_p" id="S3.SS1.SSS2.p2.3">
      with
      <math alttext="z_{0}^{r}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.3.m1.1">
       <semantics id="S3.SS1.SSS2.p2.3.m1.1a">
        <msubsup id="S3.SS1.SSS2.p2.3.m1.1.1" xref="S3.SS1.SSS2.p2.3.m1.1.1.cmml">
         <mi id="S3.SS1.SSS2.p2.3.m1.1.1.2.2" xref="S3.SS1.SSS2.p2.3.m1.1.1.2.2.cmml">
          z
         </mi>
         <mn id="S3.SS1.SSS2.p2.3.m1.1.1.2.3" xref="S3.SS1.SSS2.p2.3.m1.1.1.2.3.cmml">
          0
         </mn>
         <mi id="S3.SS1.SSS2.p2.3.m1.1.1.3" xref="S3.SS1.SSS2.p2.3.m1.1.1.3.cmml">
          r
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.3.m1.1b">
         <apply id="S3.SS1.SSS2.p2.3.m1.1.1.cmml" xref="S3.SS1.SSS2.p2.3.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.3.m1.1.1.1.cmml" xref="S3.SS1.SSS2.p2.3.m1.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS1.SSS2.p2.3.m1.1.1.2.cmml" xref="S3.SS1.SSS2.p2.3.m1.1.1">
           <csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.3.m1.1.1.2.1.cmml" xref="S3.SS1.SSS2.p2.3.m1.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS2.p2.3.m1.1.1.2.2.cmml" xref="S3.SS1.SSS2.p2.3.m1.1.1.2.2">
            𝑧
           </ci>
           <cn id="S3.SS1.SSS2.p2.3.m1.1.1.2.3.cmml" type="integer" xref="S3.SS1.SSS2.p2.3.m1.1.1.2.3">
            0
           </cn>
          </apply>
          <ci id="S3.SS1.SSS2.p2.3.m1.1.1.3.cmml" xref="S3.SS1.SSS2.p2.3.m1.1.1.3">
           𝑟
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.3.m1.1c">
         z_{0}^{r}
        </annotation>
       </semantics>
      </math>
      setting as the original question:
      <span class="ltx_text ltx_font_bold" id="S3.SS1.SSS2.p2.3.1">
       Question
      </span>
      . Additionally,
     </p>
     <table class="ltx_equation ltx_eqn_table" id="S3.Ex7">
      <tbody>
       <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
        <td class="ltx_eqn_cell ltx_eqn_center_padleft">
        </td>
        <td class="ltx_eqn_cell ltx_align_center">
         <math alttext="z^{p}_{t}=\begin{cases}[\textbf{Description}\ z^{r}_{T}],&amp;t=T+1\\
[z^{p}_{t-1}\ z^{r}_{t-1}\ z^{r}_{2T+1-t}],&amp;t=T+2,\dots,2T+1\end{cases}." class="ltx_Math" display="block" id="S3.Ex7.m1.5">
          <semantics id="S3.Ex7.m1.5a">
           <mrow id="S3.Ex7.m1.5.5.1" xref="S3.Ex7.m1.5.5.1.1.cmml">
            <mrow id="S3.Ex7.m1.5.5.1.1" xref="S3.Ex7.m1.5.5.1.1.cmml">
             <msubsup id="S3.Ex7.m1.5.5.1.1.2" xref="S3.Ex7.m1.5.5.1.1.2.cmml">
              <mi id="S3.Ex7.m1.5.5.1.1.2.2.2" xref="S3.Ex7.m1.5.5.1.1.2.2.2.cmml">
               z
              </mi>
              <mi id="S3.Ex7.m1.5.5.1.1.2.3" xref="S3.Ex7.m1.5.5.1.1.2.3.cmml">
               t
              </mi>
              <mi id="S3.Ex7.m1.5.5.1.1.2.2.3" xref="S3.Ex7.m1.5.5.1.1.2.2.3.cmml">
               p
              </mi>
             </msubsup>
             <mo id="S3.Ex7.m1.5.5.1.1.1" xref="S3.Ex7.m1.5.5.1.1.1.cmml">
              =
             </mo>
             <mrow id="S3.Ex7.m1.4.4" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
              <mo id="S3.Ex7.m1.4.4.5" xref="S3.Ex7.m1.5.5.1.1.3.1.1.cmml">
               {
              </mo>
              <mtable columnspacing="5pt" displaystyle="true" id="S3.Ex7.m1.4.4.4" rowspacing="0pt" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
               <mtr id="S3.Ex7.m1.4.4.4a" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                <mtd class="ltx_align_left" columnalign="left" id="S3.Ex7.m1.4.4.4b" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                 <mrow id="S3.Ex7.m1.1.1.1.1.1.1.1" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                  <mrow id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.2.cmml">
                   <mo id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.2.1.cmml">
                    [
                   </mo>
                   <mrow id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.cmml">
                    <mtext class="ltx_mathvariant_bold" id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.2a.cmml">
                     Description
                    </mtext>
                    <mo id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.1" lspace="0.500em" rspace="0em" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.1.cmml">
                     ​
                    </mo>
                    <msubsup id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.cmml">
                     <mi id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.2" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.cmml">
                      z
                     </mi>
                     <mi id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.3.cmml">
                      T
                     </mi>
                     <mi id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.3" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.cmml">
                      r
                     </mi>
                    </msubsup>
                   </mrow>
                   <mo id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.2.1.cmml">
                    ]
                   </mo>
                  </mrow>
                  <mo id="S3.Ex7.m1.1.1.1.1.1.1.1.2" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                   ,
                  </mo>
                 </mrow>
                </mtd>
                <mtd class="ltx_align_left" columnalign="left" id="S3.Ex7.m1.4.4.4c" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                 <mrow id="S3.Ex7.m1.2.2.2.2.2.1" xref="S3.Ex7.m1.2.2.2.2.2.1.cmml">
                  <mi id="S3.Ex7.m1.2.2.2.2.2.1.2" xref="S3.Ex7.m1.2.2.2.2.2.1.2.cmml">
                   t
                  </mi>
                  <mo id="S3.Ex7.m1.2.2.2.2.2.1.1" xref="S3.Ex7.m1.2.2.2.2.2.1.1.cmml">
                   =
                  </mo>
                  <mrow id="S3.Ex7.m1.2.2.2.2.2.1.3" xref="S3.Ex7.m1.2.2.2.2.2.1.3.cmml">
                   <mi id="S3.Ex7.m1.2.2.2.2.2.1.3.2" xref="S3.Ex7.m1.2.2.2.2.2.1.3.2.cmml">
                    T
                   </mi>
                   <mo id="S3.Ex7.m1.2.2.2.2.2.1.3.1" xref="S3.Ex7.m1.2.2.2.2.2.1.3.1.cmml">
                    +
                   </mo>
                   <mn id="S3.Ex7.m1.2.2.2.2.2.1.3.3" xref="S3.Ex7.m1.2.2.2.2.2.1.3.3.cmml">
                    1
                   </mn>
                  </mrow>
                 </mrow>
                </mtd>
               </mtr>
               <mtr id="S3.Ex7.m1.4.4.4d" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                <mtd class="ltx_align_left" columnalign="left" id="S3.Ex7.m1.4.4.4e" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                 <mrow id="S3.Ex7.m1.3.3.3.3.1.1.1" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                  <mrow id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.2.cmml">
                   <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.2" stretchy="false" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.2.1.cmml">
                    [
                   </mo>
                   <mrow id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.cmml">
                    <msubsup id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.cmml">
                     <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.2.cmml">
                      z
                     </mi>
                     <mrow id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.cmml">
                      <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.2.cmml">
                       t
                      </mi>
                      <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.1" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.1.cmml">
                       −
                      </mo>
                      <mn id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.3.cmml">
                       1
                      </mn>
                     </mrow>
                     <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.3.cmml">
                      p
                     </mi>
                    </msubsup>
                    <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.1" lspace="0em" rspace="0em" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.1.cmml">
                     ​
                    </mo>
                    <msubsup id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.cmml">
                     <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.2.cmml">
                      z
                     </mi>
                     <mrow id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.cmml">
                      <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.2.cmml">
                       t
                      </mi>
                      <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.1" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.1.cmml">
                       −
                      </mo>
                      <mn id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.3.cmml">
                       1
                      </mn>
                     </mrow>
                     <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.3.cmml">
                      r
                     </mi>
                    </msubsup>
                    <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.1a" lspace="0em" rspace="0em" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.1.cmml">
                     ​
                    </mo>
                    <msubsup id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.cmml">
                     <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.2.cmml">
                      z
                     </mi>
                     <mrow id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.cmml">
                      <mrow id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.cmml">
                       <mrow id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.cmml">
                        <mn id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.2" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.2.cmml">
                         2
                        </mn>
                        <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.1" lspace="0em" rspace="0em" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.1.cmml">
                         ​
                        </mo>
                        <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.3.cmml">
                         T
                        </mi>
                       </mrow>
                       <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.1" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.1.cmml">
                        +
                       </mo>
                       <mn id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.3.cmml">
                        1
                       </mn>
                      </mrow>
                      <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.1" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.1.cmml">
                       −
                      </mo>
                      <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.3.cmml">
                       t
                      </mi>
                     </mrow>
                     <mi id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.3" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.3.cmml">
                      r
                     </mi>
                    </msubsup>
                   </mrow>
                   <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.3" stretchy="false" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.2.1.cmml">
                    ]
                   </mo>
                  </mrow>
                  <mo id="S3.Ex7.m1.3.3.3.3.1.1.1.2" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                   ,
                  </mo>
                 </mrow>
                </mtd>
                <mtd class="ltx_align_left" columnalign="left" id="S3.Ex7.m1.4.4.4f" xref="S3.Ex7.m1.5.5.1.1.3.1.cmml">
                 <mrow id="S3.Ex7.m1.4.4.4.4.2.1" xref="S3.Ex7.m1.4.4.4.4.2.1.cmml">
                  <mi id="S3.Ex7.m1.4.4.4.4.2.1.5" xref="S3.Ex7.m1.4.4.4.4.2.1.5.cmml">
                   t
                  </mi>
                  <mo id="S3.Ex7.m1.4.4.4.4.2.1.4" xref="S3.Ex7.m1.4.4.4.4.2.1.4.cmml">
                   =
                  </mo>
                  <mrow id="S3.Ex7.m1.4.4.4.4.2.1.3.2" xref="S3.Ex7.m1.4.4.4.4.2.1.3.3.cmml">
                   <mrow id="S3.Ex7.m1.4.4.4.4.2.1.2.1.1" xref="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.cmml">
                    <mi id="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.2" xref="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.2.cmml">
                     T
                    </mi>
                    <mo id="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.1" xref="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.1.cmml">
                     +
                    </mo>
                    <mn id="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.3" xref="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.3.cmml">
                     2
                    </mn>
                   </mrow>
                   <mo id="S3.Ex7.m1.4.4.4.4.2.1.3.2.3" xref="S3.Ex7.m1.4.4.4.4.2.1.3.3.cmml">
                    ,
                   </mo>
                   <mi id="S3.Ex7.m1.4.4.4.4.2.1.1" mathvariant="normal" xref="S3.Ex7.m1.4.4.4.4.2.1.1.cmml">
                    …
                   </mi>
                   <mo id="S3.Ex7.m1.4.4.4.4.2.1.3.2.4" xref="S3.Ex7.m1.4.4.4.4.2.1.3.3.cmml">
                    ,
                   </mo>
                   <mrow id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.cmml">
                    <mrow id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.cmml">
                     <mn id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.2" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.2.cmml">
                      2
                     </mn>
                     <mo id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.1" lspace="0em" rspace="0em" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.1.cmml">
                      ​
                     </mo>
                     <mi id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.3" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.3.cmml">
                      T
                     </mi>
                    </mrow>
                    <mo id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.1" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.1.cmml">
                     +
                    </mo>
                    <mn id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.3" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.3.cmml">
                     1
                    </mn>
                   </mrow>
                  </mrow>
                 </mrow>
                </mtd>
               </mtr>
              </mtable>
             </mrow>
            </mrow>
            <mo id="S3.Ex7.m1.5.5.1.2" lspace="0em" xref="S3.Ex7.m1.5.5.1.1.cmml">
             .
            </mo>
           </mrow>
           <annotation-xml encoding="MathML-Content" id="S3.Ex7.m1.5b">
            <apply id="S3.Ex7.m1.5.5.1.1.cmml" xref="S3.Ex7.m1.5.5.1">
             <eq id="S3.Ex7.m1.5.5.1.1.1.cmml" xref="S3.Ex7.m1.5.5.1.1.1">
             </eq>
             <apply id="S3.Ex7.m1.5.5.1.1.2.cmml" xref="S3.Ex7.m1.5.5.1.1.2">
              <csymbol cd="ambiguous" id="S3.Ex7.m1.5.5.1.1.2.1.cmml" xref="S3.Ex7.m1.5.5.1.1.2">
               subscript
              </csymbol>
              <apply id="S3.Ex7.m1.5.5.1.1.2.2.cmml" xref="S3.Ex7.m1.5.5.1.1.2">
               <csymbol cd="ambiguous" id="S3.Ex7.m1.5.5.1.1.2.2.1.cmml" xref="S3.Ex7.m1.5.5.1.1.2">
                superscript
               </csymbol>
               <ci id="S3.Ex7.m1.5.5.1.1.2.2.2.cmml" xref="S3.Ex7.m1.5.5.1.1.2.2.2">
                𝑧
               </ci>
               <ci id="S3.Ex7.m1.5.5.1.1.2.2.3.cmml" xref="S3.Ex7.m1.5.5.1.1.2.2.3">
                𝑝
               </ci>
              </apply>
              <ci id="S3.Ex7.m1.5.5.1.1.2.3.cmml" xref="S3.Ex7.m1.5.5.1.1.2.3">
               𝑡
              </ci>
             </apply>
             <apply id="S3.Ex7.m1.5.5.1.1.3.1.cmml" xref="S3.Ex7.m1.4.4">
              <csymbol cd="latexml" id="S3.Ex7.m1.5.5.1.1.3.1.1.cmml" xref="S3.Ex7.m1.4.4.5">
               cases
              </csymbol>
              <apply id="S3.Ex7.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1">
               <csymbol cd="latexml" id="S3.Ex7.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.2">
                delimited-[]
               </csymbol>
               <apply id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1">
                <times id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.1">
                </times>
                <ci id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.2a.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.2">
                 <mtext class="ltx_mathvariant_bold" id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.2">
                  Description
                 </mtext>
                </ci>
                <apply id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3">
                 <csymbol cd="ambiguous" id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3">
                  subscript
                 </csymbol>
                 <apply id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3">
                  <csymbol cd="ambiguous" id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.1.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3">
                   superscript
                  </csymbol>
                  <ci id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.2">
                   𝑧
                  </ci>
                  <ci id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.2.3">
                   𝑟
                  </ci>
                 </apply>
                 <ci id="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.Ex7.m1.1.1.1.1.1.1.1.1.1.1.3.3">
                  𝑇
                 </ci>
                </apply>
               </apply>
              </apply>
              <apply id="S3.Ex7.m1.2.2.2.2.2.1.cmml" xref="S3.Ex7.m1.2.2.2.2.2.1">
               <eq id="S3.Ex7.m1.2.2.2.2.2.1.1.cmml" xref="S3.Ex7.m1.2.2.2.2.2.1.1">
               </eq>
               <ci id="S3.Ex7.m1.2.2.2.2.2.1.2.cmml" xref="S3.Ex7.m1.2.2.2.2.2.1.2">
                𝑡
               </ci>
               <apply id="S3.Ex7.m1.2.2.2.2.2.1.3.cmml" xref="S3.Ex7.m1.2.2.2.2.2.1.3">
                <plus id="S3.Ex7.m1.2.2.2.2.2.1.3.1.cmml" xref="S3.Ex7.m1.2.2.2.2.2.1.3.1">
                </plus>
                <ci id="S3.Ex7.m1.2.2.2.2.2.1.3.2.cmml" xref="S3.Ex7.m1.2.2.2.2.2.1.3.2">
                 𝑇
                </ci>
                <cn id="S3.Ex7.m1.2.2.2.2.2.1.3.3.cmml" type="integer" xref="S3.Ex7.m1.2.2.2.2.2.1.3.3">
                 1
                </cn>
               </apply>
              </apply>
              <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1">
               <csymbol cd="latexml" id="S3.Ex7.m1.3.3.3.3.1.1.1.1.2.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.2">
                delimited-[]
               </csymbol>
               <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1">
                <times id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.1">
                </times>
                <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2">
                 <csymbol cd="ambiguous" id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2">
                  subscript
                 </csymbol>
                 <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2">
                  <csymbol cd="ambiguous" id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2">
                   superscript
                  </csymbol>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.2">
                   𝑧
                  </ci>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.2.3">
                   𝑝
                  </ci>
                 </apply>
                 <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3">
                  <minus id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.1">
                  </minus>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.2">
                   𝑡
                  </ci>
                  <cn id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.3.cmml" type="integer" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.2.3.3">
                   1
                  </cn>
                 </apply>
                </apply>
                <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3">
                 <csymbol cd="ambiguous" id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3">
                  subscript
                 </csymbol>
                 <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3">
                  <csymbol cd="ambiguous" id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3">
                   superscript
                  </csymbol>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.2">
                   𝑧
                  </ci>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.2.3">
                   𝑟
                  </ci>
                 </apply>
                 <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3">
                  <minus id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.1">
                  </minus>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.2">
                   𝑡
                  </ci>
                  <cn id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.3.cmml" type="integer" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.3.3.3">
                   1
                  </cn>
                 </apply>
                </apply>
                <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4">
                 <csymbol cd="ambiguous" id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4">
                  subscript
                 </csymbol>
                 <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4">
                  <csymbol cd="ambiguous" id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4">
                   superscript
                  </csymbol>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.2">
                   𝑧
                  </ci>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.2.3">
                   𝑟
                  </ci>
                 </apply>
                 <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3">
                  <minus id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.1">
                  </minus>
                  <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2">
                   <plus id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.1">
                   </plus>
                   <apply id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2">
                    <times id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.1.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.1">
                    </times>
                    <cn id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.2.cmml" type="integer" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.2">
                     2
                    </cn>
                    <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.2.3">
                     𝑇
                    </ci>
                   </apply>
                   <cn id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.3.cmml" type="integer" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.2.3">
                    1
                   </cn>
                  </apply>
                  <ci id="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.3.cmml" xref="S3.Ex7.m1.3.3.3.3.1.1.1.1.1.1.4.3.3">
                   𝑡
                  </ci>
                 </apply>
                </apply>
               </apply>
              </apply>
              <apply id="S3.Ex7.m1.4.4.4.4.2.1.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1">
               <eq id="S3.Ex7.m1.4.4.4.4.2.1.4.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.4">
               </eq>
               <ci id="S3.Ex7.m1.4.4.4.4.2.1.5.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.5">
                𝑡
               </ci>
               <list id="S3.Ex7.m1.4.4.4.4.2.1.3.3.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2">
                <apply id="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.2.1.1">
                 <plus id="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.1.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.1">
                 </plus>
                 <ci id="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.2.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.2">
                  𝑇
                 </ci>
                 <cn id="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.3.cmml" type="integer" xref="S3.Ex7.m1.4.4.4.4.2.1.2.1.1.3">
                  2
                 </cn>
                </apply>
                <ci id="S3.Ex7.m1.4.4.4.4.2.1.1.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.1">
                 …
                </ci>
                <apply id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2">
                 <plus id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.1.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.1">
                 </plus>
                 <apply id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2">
                  <times id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.1.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.1">
                  </times>
                  <cn id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.2.cmml" type="integer" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.2">
                   2
                  </cn>
                  <ci id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.3.cmml" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.2.3">
                   𝑇
                  </ci>
                 </apply>
                 <cn id="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.3.cmml" type="integer" xref="S3.Ex7.m1.4.4.4.4.2.1.3.2.2.3">
                  1
                 </cn>
                </apply>
               </list>
              </apply>
             </apply>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="S3.Ex7.m1.5c">
            z^{p}_{t}=\begin{cases}[\textbf{Description}\ z^{r}_{T}],&amp;t=T+1\\
[z^{p}_{t-1}\ z^{r}_{t-1}\ z^{r}_{2T+1-t}],&amp;t=T+2,\dots,2T+1\end{cases}.
           </annotation>
          </semantics>
         </math>
        </td>
        <td class="ltx_eqn_cell ltx_eqn_center_padright">
        </td>
       </tr>
      </tbody>
     </table>
     <p class="ltx_p" id="S3.SS1.SSS2.p2.9">
      In the first
      <math alttext="T" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.4.m1.1">
       <semantics id="S3.SS1.SSS2.p2.4.m1.1a">
        <mi id="S3.SS1.SSS2.p2.4.m1.1.1" xref="S3.SS1.SSS2.p2.4.m1.1.1.cmml">
         T
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.4.m1.1b">
         <ci id="S3.SS1.SSS2.p2.4.m1.1.1.cmml" xref="S3.SS1.SSS2.p2.4.m1.1.1">
          𝑇
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.4.m1.1c">
         T
        </annotation>
       </semantics>
      </math>
      rounds, LtM uses the prompt "In order to solve …, we have to solve …" to iteratively dissect the original task
      <math alttext="z^{q}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.5.m2.1">
       <semantics id="S3.SS1.SSS2.p2.5.m2.1a">
        <msup id="S3.SS1.SSS2.p2.5.m2.1.1" xref="S3.SS1.SSS2.p2.5.m2.1.1.cmml">
         <mi id="S3.SS1.SSS2.p2.5.m2.1.1.2" xref="S3.SS1.SSS2.p2.5.m2.1.1.2.cmml">
          z
         </mi>
         <mi id="S3.SS1.SSS2.p2.5.m2.1.1.3" xref="S3.SS1.SSS2.p2.5.m2.1.1.3.cmml">
          q
         </mi>
        </msup>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.5.m2.1b">
         <apply id="S3.SS1.SSS2.p2.5.m2.1.1.cmml" xref="S3.SS1.SSS2.p2.5.m2.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.5.m2.1.1.1.cmml" xref="S3.SS1.SSS2.p2.5.m2.1.1">
           superscript
          </csymbol>
          <ci id="S3.SS1.SSS2.p2.5.m2.1.1.2.cmml" xref="S3.SS1.SSS2.p2.5.m2.1.1.2">
           𝑧
          </ci>
          <ci id="S3.SS1.SSS2.p2.5.m2.1.1.3.cmml" xref="S3.SS1.SSS2.p2.5.m2.1.1.3">
           𝑞
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.5.m2.1c">
         z^{q}
        </annotation>
       </semantics>
      </math>
      into sub-tasks
      <math alttext="\{z_{t}^{r}\}_{t=0}^{T}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.6.m3.1">
       <semantics id="S3.SS1.SSS2.p2.6.m3.1a">
        <msubsup id="S3.SS1.SSS2.p2.6.m3.1.1" xref="S3.SS1.SSS2.p2.6.m3.1.1.cmml">
         <mrow id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.2.cmml">
          <mo id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.2.cmml">
           {
          </mo>
          <msubsup id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.cmml">
           <mi id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.2" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.2.cmml">
            z
           </mi>
           <mi id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.3" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.3.cmml">
            t
           </mi>
           <mi id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.3" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.3.cmml">
            r
           </mi>
          </msubsup>
          <mo id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.2.cmml">
           }
          </mo>
         </mrow>
         <mrow id="S3.SS1.SSS2.p2.6.m3.1.1.1.3" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.3.cmml">
          <mi id="S3.SS1.SSS2.p2.6.m3.1.1.1.3.2" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.3.2.cmml">
           t
          </mi>
          <mo id="S3.SS1.SSS2.p2.6.m3.1.1.1.3.1" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.3.1.cmml">
           =
          </mo>
          <mn id="S3.SS1.SSS2.p2.6.m3.1.1.1.3.3" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.3.3.cmml">
           0
          </mn>
         </mrow>
         <mi id="S3.SS1.SSS2.p2.6.m3.1.1.3" xref="S3.SS1.SSS2.p2.6.m3.1.1.3.cmml">
          T
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.6.m3.1b">
         <apply id="S3.SS1.SSS2.p2.6.m3.1.1.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.6.m3.1.1.2.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS1.SSS2.p2.6.m3.1.1.1.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1">
           <csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.6.m3.1.1.1.2.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1">
            subscript
           </csymbol>
           <set id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.2.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1">
            <apply id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1">
             <csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.1.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1">
              superscript
             </csymbol>
             <apply id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1">
              <csymbol cd="ambiguous" id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1">
               subscript
              </csymbol>
              <ci id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.2">
               𝑧
              </ci>
              <ci id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.2.3">
               𝑡
              </ci>
             </apply>
             <ci id="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.3.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.1.1.1.3">
              𝑟
             </ci>
            </apply>
           </set>
           <apply id="S3.SS1.SSS2.p2.6.m3.1.1.1.3.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.3">
            <eq id="S3.SS1.SSS2.p2.6.m3.1.1.1.3.1.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.3.1">
            </eq>
            <ci id="S3.SS1.SSS2.p2.6.m3.1.1.1.3.2.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.3.2">
             𝑡
            </ci>
            <cn id="S3.SS1.SSS2.p2.6.m3.1.1.1.3.3.cmml" type="integer" xref="S3.SS1.SSS2.p2.6.m3.1.1.1.3.3">
             0
            </cn>
           </apply>
          </apply>
          <ci id="S3.SS1.SSS2.p2.6.m3.1.1.3.cmml" xref="S3.SS1.SSS2.p2.6.m3.1.1.3">
           𝑇
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.6.m3.1c">
         \{z_{t}^{r}\}_{t=0}^{T}
        </annotation>
       </semantics>
      </math>
      . Then, from rounds
      <math alttext="T+1" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.7.m4.1">
       <semantics id="S3.SS1.SSS2.p2.7.m4.1a">
        <mrow id="S3.SS1.SSS2.p2.7.m4.1.1" xref="S3.SS1.SSS2.p2.7.m4.1.1.cmml">
         <mi id="S3.SS1.SSS2.p2.7.m4.1.1.2" xref="S3.SS1.SSS2.p2.7.m4.1.1.2.cmml">
          T
         </mi>
         <mo id="S3.SS1.SSS2.p2.7.m4.1.1.1" xref="S3.SS1.SSS2.p2.7.m4.1.1.1.cmml">
          +
         </mo>
         <mn id="S3.SS1.SSS2.p2.7.m4.1.1.3" xref="S3.SS1.SSS2.p2.7.m4.1.1.3.cmml">
          1
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.7.m4.1b">
         <apply id="S3.SS1.SSS2.p2.7.m4.1.1.cmml" xref="S3.SS1.SSS2.p2.7.m4.1.1">
          <plus id="S3.SS1.SSS2.p2.7.m4.1.1.1.cmml" xref="S3.SS1.SSS2.p2.7.m4.1.1.1">
          </plus>
          <ci id="S3.SS1.SSS2.p2.7.m4.1.1.2.cmml" xref="S3.SS1.SSS2.p2.7.m4.1.1.2">
           𝑇
          </ci>
          <cn id="S3.SS1.SSS2.p2.7.m4.1.1.3.cmml" type="integer" xref="S3.SS1.SSS2.p2.7.m4.1.1.3">
           1
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.7.m4.1c">
         T+1
        </annotation>
       </semantics>
      </math>
      to
      <math alttext="2T+1" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p2.8.m5.1">
       <semantics id="S3.SS1.SSS2.p2.8.m5.1a">
        <mrow id="S3.SS1.SSS2.p2.8.m5.1.1" xref="S3.SS1.SSS2.p2.8.m5.1.1.cmml">
         <mrow id="S3.SS1.SSS2.p2.8.m5.1.1.2" xref="S3.SS1.SSS2.p2.8.m5.1.1.2.cmml">
          <mn id="S3.SS1.SSS2.p2.8.m5.1.1.2.2" xref="S3.SS1.SSS2.p2.8.m5.1.1.2.2.cmml">
           2
          </mn>
          <mo id="S3.SS1.SSS2.p2.8.m5.1.1.2.1" lspace="0em" rspace="0em" xref="S3.SS1.SSS2.p2.8.m5.1.1.2.1.cmml">
           ​
          </mo>
          <mi id="S3.SS1.SSS2.p2.8.m5.1.1.2.3" xref="S3.SS1.SSS2.p2.8.m5.1.1.2.3.cmml">
           T
          </mi>
         </mrow>
         <mo id="S3.SS1.SSS2.p2.8.m5.1.1.1" xref="S3.SS1.SSS2.p2.8.m5.1.1.1.cmml">
          +
         </mo>
         <mn id="S3.SS1.SSS2.p2.8.m5.1.1.3" xref="S3.SS1.SSS2.p2.8.m5.1.1.3.cmml">
          1
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p2.8.m5.1b">
         <apply id="S3.SS1.SSS2.p2.8.m5.1.1.cmml" xref="S3.SS1.SSS2.p2.8.m5.1.1">
          <plus id="S3.SS1.SSS2.p2.8.m5.1.1.1.cmml" xref="S3.SS1.SSS2.p2.8.m5.1.1.1">
          </plus>
          <apply id="S3.SS1.SSS2.p2.8.m5.1.1.2.cmml" xref="S3.SS1.SSS2.p2.8.m5.1.1.2">
           <times id="S3.SS1.SSS2.p2.8.m5.1.1.2.1.cmml" xref="S3.SS1.SSS2.p2.8.m5.1.1.2.1">
           </times>
           <cn id="S3.SS1.SSS2.p2.8.m5.1.1.2.2.cmml" type="integer" xref="S3.SS1.SSS2.p2.8.m5.1.1.2.2">
            2
           </cn>
           <ci id="S3.SS1.SSS2.p2.8.m5.1.1.2.3.cmml" xref="S3.SS1.SSS2.p2.8.m5.1.1.2.3">
            𝑇
           </ci>
          </apply>
          <cn id="S3.SS1.SSS2.p2.8.m5.1.1.3.cmml" type="integer" xref="S3.SS1.SSS2.p2.8.m5.1.1.3">
           1
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p2.8.m5.1c">
         2T+1
        </annotation>
       </semantics>
      </math>
      , it addresses these sub-tasks in a dialogue format and in reverse order. We give an example of LtM interactions in Figure
      <a class="ltx_ref ltx_markedasmath ltx_font_italic" href="#S3.F3" title="Figure 3 ‣ 3.1.2 Enlarging via Direct Prompts ‣ 3.1 Enlarging the Prompt Candidate Set ‣ 3 Prompt Engineering Methods ‣ Prompt Engineering Through the Lens of Optimal Control">
       <span class="ltx_text ltx_ref_tag">
        3
       </span>
      </a>
      .
     </p>
    </div>
    <figure class="ltx_figure" id="S3.F3">
     <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="231" id="S3.F3.g1" src="/html/2310.14201/assets/img/fig2.png" width="538"/>
     <figcaption class="ltx_caption ltx_centering">
      <span class="ltx_tag ltx_tag_figure">
       Figure 3:
      </span>
      An example of LtM interactions with
      <math alttext="T=1" class="ltx_Math" display="inline" id="S3.F3.8.m1.1">
       <semantics id="S3.F3.8.m1.1b">
        <mrow id="S3.F3.8.m1.1.1" xref="S3.F3.8.m1.1.1.cmml">
         <mi id="S3.F3.8.m1.1.1.2" xref="S3.F3.8.m1.1.1.2.cmml">
          T
         </mi>
         <mo id="S3.F3.8.m1.1.1.1" xref="S3.F3.8.m1.1.1.1.cmml">
          =
         </mo>
         <mn id="S3.F3.8.m1.1.1.3" xref="S3.F3.8.m1.1.1.3.cmml">
          1
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.F3.8.m1.1c">
         <apply id="S3.F3.8.m1.1.1.cmml" xref="S3.F3.8.m1.1.1">
          <eq id="S3.F3.8.m1.1.1.1.cmml" xref="S3.F3.8.m1.1.1.1">
          </eq>
          <ci id="S3.F3.8.m1.1.1.2.cmml" xref="S3.F3.8.m1.1.1.2">
           𝑇
          </ci>
          <cn id="S3.F3.8.m1.1.1.3.cmml" type="integer" xref="S3.F3.8.m1.1.1.3">
           1
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F3.8.m1.1d">
         T=1
        </annotation>
       </semantics>
      </math>
      . LtM employs the template "In order to solve …, we have to solve …" to break the original task into sub-tasks
      <math alttext="\{z_{t}^{r}\}_{t=1}^{T}" class="ltx_Math" display="inline" id="S3.F3.9.m2.1">
       <semantics id="S3.F3.9.m2.1b">
        <msubsup id="S3.F3.9.m2.1.1" xref="S3.F3.9.m2.1.1.cmml">
         <mrow id="S3.F3.9.m2.1.1.1.1.1" xref="S3.F3.9.m2.1.1.1.1.2.cmml">
          <mo id="S3.F3.9.m2.1.1.1.1.1.2" stretchy="false" xref="S3.F3.9.m2.1.1.1.1.2.cmml">
           {
          </mo>
          <msubsup id="S3.F3.9.m2.1.1.1.1.1.1" xref="S3.F3.9.m2.1.1.1.1.1.1.cmml">
           <mi id="S3.F3.9.m2.1.1.1.1.1.1.2.2" xref="S3.F3.9.m2.1.1.1.1.1.1.2.2.cmml">
            z
           </mi>
           <mi id="S3.F3.9.m2.1.1.1.1.1.1.2.3" xref="S3.F3.9.m2.1.1.1.1.1.1.2.3.cmml">
            t
           </mi>
           <mi id="S3.F3.9.m2.1.1.1.1.1.1.3" xref="S3.F3.9.m2.1.1.1.1.1.1.3.cmml">
            r
           </mi>
          </msubsup>
          <mo id="S3.F3.9.m2.1.1.1.1.1.3" stretchy="false" xref="S3.F3.9.m2.1.1.1.1.2.cmml">
           }
          </mo>
         </mrow>
         <mrow id="S3.F3.9.m2.1.1.1.3" xref="S3.F3.9.m2.1.1.1.3.cmml">
          <mi id="S3.F3.9.m2.1.1.1.3.2" xref="S3.F3.9.m2.1.1.1.3.2.cmml">
           t
          </mi>
          <mo id="S3.F3.9.m2.1.1.1.3.1" xref="S3.F3.9.m2.1.1.1.3.1.cmml">
           =
          </mo>
          <mn id="S3.F3.9.m2.1.1.1.3.3" xref="S3.F3.9.m2.1.1.1.3.3.cmml">
           1
          </mn>
         </mrow>
         <mi id="S3.F3.9.m2.1.1.3" xref="S3.F3.9.m2.1.1.3.cmml">
          T
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.F3.9.m2.1c">
         <apply id="S3.F3.9.m2.1.1.cmml" xref="S3.F3.9.m2.1.1">
          <csymbol cd="ambiguous" id="S3.F3.9.m2.1.1.2.cmml" xref="S3.F3.9.m2.1.1">
           superscript
          </csymbol>
          <apply id="S3.F3.9.m2.1.1.1.cmml" xref="S3.F3.9.m2.1.1">
           <csymbol cd="ambiguous" id="S3.F3.9.m2.1.1.1.2.cmml" xref="S3.F3.9.m2.1.1">
            subscript
           </csymbol>
           <set id="S3.F3.9.m2.1.1.1.1.2.cmml" xref="S3.F3.9.m2.1.1.1.1.1">
            <apply id="S3.F3.9.m2.1.1.1.1.1.1.cmml" xref="S3.F3.9.m2.1.1.1.1.1.1">
             <csymbol cd="ambiguous" id="S3.F3.9.m2.1.1.1.1.1.1.1.cmml" xref="S3.F3.9.m2.1.1.1.1.1.1">
              superscript
             </csymbol>
             <apply id="S3.F3.9.m2.1.1.1.1.1.1.2.cmml" xref="S3.F3.9.m2.1.1.1.1.1.1">
              <csymbol cd="ambiguous" id="S3.F3.9.m2.1.1.1.1.1.1.2.1.cmml" xref="S3.F3.9.m2.1.1.1.1.1.1">
               subscript
              </csymbol>
              <ci id="S3.F3.9.m2.1.1.1.1.1.1.2.2.cmml" xref="S3.F3.9.m2.1.1.1.1.1.1.2.2">
               𝑧
              </ci>
              <ci id="S3.F3.9.m2.1.1.1.1.1.1.2.3.cmml" xref="S3.F3.9.m2.1.1.1.1.1.1.2.3">
               𝑡
              </ci>
             </apply>
             <ci id="S3.F3.9.m2.1.1.1.1.1.1.3.cmml" xref="S3.F3.9.m2.1.1.1.1.1.1.3">
              𝑟
             </ci>
            </apply>
           </set>
           <apply id="S3.F3.9.m2.1.1.1.3.cmml" xref="S3.F3.9.m2.1.1.1.3">
            <eq id="S3.F3.9.m2.1.1.1.3.1.cmml" xref="S3.F3.9.m2.1.1.1.3.1">
            </eq>
            <ci id="S3.F3.9.m2.1.1.1.3.2.cmml" xref="S3.F3.9.m2.1.1.1.3.2">
             𝑡
            </ci>
            <cn id="S3.F3.9.m2.1.1.1.3.3.cmml" type="integer" xref="S3.F3.9.m2.1.1.1.3.3">
             1
            </cn>
           </apply>
          </apply>
          <ci id="S3.F3.9.m2.1.1.3.cmml" xref="S3.F3.9.m2.1.1.3">
           𝑇
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F3.9.m2.1d">
         \{z_{t}^{r}\}_{t=1}^{T}
        </annotation>
       </semantics>
      </math>
      . These sub-tasks contribute to the construction of
      <math alttext="\mathcal{P}_{T+1}=\mathcal{P}_{1}\cup\{z^{p}\text{ related to }z^{r}_{1},...,z^{r}_{T}\}" class="ltx_Math" display="inline" id="S3.F3.10.m3.3">
       <semantics id="S3.F3.10.m3.3b">
        <mrow id="S3.F3.10.m3.3.3" xref="S3.F3.10.m3.3.3.cmml">
         <msub id="S3.F3.10.m3.3.3.4" xref="S3.F3.10.m3.3.3.4.cmml">
          <mi class="ltx_font_mathcaligraphic" id="S3.F3.10.m3.3.3.4.2" xref="S3.F3.10.m3.3.3.4.2.cmml">
           𝒫
          </mi>
          <mrow id="S3.F3.10.m3.3.3.4.3" xref="S3.F3.10.m3.3.3.4.3.cmml">
           <mi id="S3.F3.10.m3.3.3.4.3.2" xref="S3.F3.10.m3.3.3.4.3.2.cmml">
            T
           </mi>
           <mo id="S3.F3.10.m3.3.3.4.3.1" xref="S3.F3.10.m3.3.3.4.3.1.cmml">
            +
           </mo>
           <mn id="S3.F3.10.m3.3.3.4.3.3" xref="S3.F3.10.m3.3.3.4.3.3.cmml">
            1
           </mn>
          </mrow>
         </msub>
         <mo id="S3.F3.10.m3.3.3.3" xref="S3.F3.10.m3.3.3.3.cmml">
          =
         </mo>
         <mrow id="S3.F3.10.m3.3.3.2" xref="S3.F3.10.m3.3.3.2.cmml">
          <msub id="S3.F3.10.m3.3.3.2.4" xref="S3.F3.10.m3.3.3.2.4.cmml">
           <mi class="ltx_font_mathcaligraphic" id="S3.F3.10.m3.3.3.2.4.2" xref="S3.F3.10.m3.3.3.2.4.2.cmml">
            𝒫
           </mi>
           <mn id="S3.F3.10.m3.3.3.2.4.3" xref="S3.F3.10.m3.3.3.2.4.3.cmml">
            1
           </mn>
          </msub>
          <mo id="S3.F3.10.m3.3.3.2.3" xref="S3.F3.10.m3.3.3.2.3.cmml">
           ∪
          </mo>
          <mrow id="S3.F3.10.m3.3.3.2.2.2" xref="S3.F3.10.m3.3.3.2.2.3.cmml">
           <mo id="S3.F3.10.m3.3.3.2.2.2.3" stretchy="false" xref="S3.F3.10.m3.3.3.2.2.3.cmml">
            {
           </mo>
           <mrow id="S3.F3.10.m3.2.2.1.1.1.1" xref="S3.F3.10.m3.2.2.1.1.1.1.cmml">
            <msup id="S3.F3.10.m3.2.2.1.1.1.1.2" xref="S3.F3.10.m3.2.2.1.1.1.1.2.cmml">
             <mi id="S3.F3.10.m3.2.2.1.1.1.1.2.2" xref="S3.F3.10.m3.2.2.1.1.1.1.2.2.cmml">
              z
             </mi>
             <mi id="S3.F3.10.m3.2.2.1.1.1.1.2.3" xref="S3.F3.10.m3.2.2.1.1.1.1.2.3.cmml">
              p
             </mi>
            </msup>
            <mo id="S3.F3.10.m3.2.2.1.1.1.1.1" lspace="0em" rspace="0em" xref="S3.F3.10.m3.2.2.1.1.1.1.1.cmml">
             ​
            </mo>
            <mtext id="S3.F3.10.m3.2.2.1.1.1.1.3" xref="S3.F3.10.m3.2.2.1.1.1.1.3a.cmml">
             related to
            </mtext>
            <mo id="S3.F3.10.m3.2.2.1.1.1.1.1b" lspace="0em" rspace="0em" xref="S3.F3.10.m3.2.2.1.1.1.1.1.cmml">
             ​
            </mo>
            <msubsup id="S3.F3.10.m3.2.2.1.1.1.1.4" xref="S3.F3.10.m3.2.2.1.1.1.1.4.cmml">
             <mi id="S3.F3.10.m3.2.2.1.1.1.1.4.2.2" xref="S3.F3.10.m3.2.2.1.1.1.1.4.2.2.cmml">
              z
             </mi>
             <mn id="S3.F3.10.m3.2.2.1.1.1.1.4.3" xref="S3.F3.10.m3.2.2.1.1.1.1.4.3.cmml">
              1
             </mn>
             <mi id="S3.F3.10.m3.2.2.1.1.1.1.4.2.3" xref="S3.F3.10.m3.2.2.1.1.1.1.4.2.3.cmml">
              r
             </mi>
            </msubsup>
           </mrow>
           <mo id="S3.F3.10.m3.3.3.2.2.2.4" xref="S3.F3.10.m3.3.3.2.2.3.cmml">
            ,
           </mo>
           <mi id="S3.F3.10.m3.1.1" mathvariant="normal" xref="S3.F3.10.m3.1.1.cmml">
            …
           </mi>
           <mo id="S3.F3.10.m3.3.3.2.2.2.5" xref="S3.F3.10.m3.3.3.2.2.3.cmml">
            ,
           </mo>
           <msubsup id="S3.F3.10.m3.3.3.2.2.2.2" xref="S3.F3.10.m3.3.3.2.2.2.2.cmml">
            <mi id="S3.F3.10.m3.3.3.2.2.2.2.2.2" xref="S3.F3.10.m3.3.3.2.2.2.2.2.2.cmml">
             z
            </mi>
            <mi id="S3.F3.10.m3.3.3.2.2.2.2.3" xref="S3.F3.10.m3.3.3.2.2.2.2.3.cmml">
             T
            </mi>
            <mi id="S3.F3.10.m3.3.3.2.2.2.2.2.3" xref="S3.F3.10.m3.3.3.2.2.2.2.2.3.cmml">
             r
            </mi>
           </msubsup>
           <mo id="S3.F3.10.m3.3.3.2.2.2.6" stretchy="false" xref="S3.F3.10.m3.3.3.2.2.3.cmml">
            }
           </mo>
          </mrow>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.F3.10.m3.3c">
         <apply id="S3.F3.10.m3.3.3.cmml" xref="S3.F3.10.m3.3.3">
          <eq id="S3.F3.10.m3.3.3.3.cmml" xref="S3.F3.10.m3.3.3.3">
          </eq>
          <apply id="S3.F3.10.m3.3.3.4.cmml" xref="S3.F3.10.m3.3.3.4">
           <csymbol cd="ambiguous" id="S3.F3.10.m3.3.3.4.1.cmml" xref="S3.F3.10.m3.3.3.4">
            subscript
           </csymbol>
           <ci id="S3.F3.10.m3.3.3.4.2.cmml" xref="S3.F3.10.m3.3.3.4.2">
            𝒫
           </ci>
           <apply id="S3.F3.10.m3.3.3.4.3.cmml" xref="S3.F3.10.m3.3.3.4.3">
            <plus id="S3.F3.10.m3.3.3.4.3.1.cmml" xref="S3.F3.10.m3.3.3.4.3.1">
            </plus>
            <ci id="S3.F3.10.m3.3.3.4.3.2.cmml" xref="S3.F3.10.m3.3.3.4.3.2">
             𝑇
            </ci>
            <cn id="S3.F3.10.m3.3.3.4.3.3.cmml" type="integer" xref="S3.F3.10.m3.3.3.4.3.3">
             1
            </cn>
           </apply>
          </apply>
          <apply id="S3.F3.10.m3.3.3.2.cmml" xref="S3.F3.10.m3.3.3.2">
           <union id="S3.F3.10.m3.3.3.2.3.cmml" xref="S3.F3.10.m3.3.3.2.3">
           </union>
           <apply id="S3.F3.10.m3.3.3.2.4.cmml" xref="S3.F3.10.m3.3.3.2.4">
            <csymbol cd="ambiguous" id="S3.F3.10.m3.3.3.2.4.1.cmml" xref="S3.F3.10.m3.3.3.2.4">
             subscript
            </csymbol>
            <ci id="S3.F3.10.m3.3.3.2.4.2.cmml" xref="S3.F3.10.m3.3.3.2.4.2">
             𝒫
            </ci>
            <cn id="S3.F3.10.m3.3.3.2.4.3.cmml" type="integer" xref="S3.F3.10.m3.3.3.2.4.3">
             1
            </cn>
           </apply>
           <set id="S3.F3.10.m3.3.3.2.2.3.cmml" xref="S3.F3.10.m3.3.3.2.2.2">
            <apply id="S3.F3.10.m3.2.2.1.1.1.1.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1">
             <times id="S3.F3.10.m3.2.2.1.1.1.1.1.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.1">
             </times>
             <apply id="S3.F3.10.m3.2.2.1.1.1.1.2.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.2">
              <csymbol cd="ambiguous" id="S3.F3.10.m3.2.2.1.1.1.1.2.1.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.2">
               superscript
              </csymbol>
              <ci id="S3.F3.10.m3.2.2.1.1.1.1.2.2.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.2.2">
               𝑧
              </ci>
              <ci id="S3.F3.10.m3.2.2.1.1.1.1.2.3.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.2.3">
               𝑝
              </ci>
             </apply>
             <ci id="S3.F3.10.m3.2.2.1.1.1.1.3a.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.3">
              <mtext id="S3.F3.10.m3.2.2.1.1.1.1.3.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.3">
               related to
              </mtext>
             </ci>
             <apply id="S3.F3.10.m3.2.2.1.1.1.1.4.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.4">
              <csymbol cd="ambiguous" id="S3.F3.10.m3.2.2.1.1.1.1.4.1.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.4">
               subscript
              </csymbol>
              <apply id="S3.F3.10.m3.2.2.1.1.1.1.4.2.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.4">
               <csymbol cd="ambiguous" id="S3.F3.10.m3.2.2.1.1.1.1.4.2.1.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.4">
                superscript
               </csymbol>
               <ci id="S3.F3.10.m3.2.2.1.1.1.1.4.2.2.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.4.2.2">
                𝑧
               </ci>
               <ci id="S3.F3.10.m3.2.2.1.1.1.1.4.2.3.cmml" xref="S3.F3.10.m3.2.2.1.1.1.1.4.2.3">
                𝑟
               </ci>
              </apply>
              <cn id="S3.F3.10.m3.2.2.1.1.1.1.4.3.cmml" type="integer" xref="S3.F3.10.m3.2.2.1.1.1.1.4.3">
               1
              </cn>
             </apply>
            </apply>
            <ci id="S3.F3.10.m3.1.1.cmml" xref="S3.F3.10.m3.1.1">
             …
            </ci>
            <apply id="S3.F3.10.m3.3.3.2.2.2.2.cmml" xref="S3.F3.10.m3.3.3.2.2.2.2">
             <csymbol cd="ambiguous" id="S3.F3.10.m3.3.3.2.2.2.2.1.cmml" xref="S3.F3.10.m3.3.3.2.2.2.2">
              subscript
             </csymbol>
             <apply id="S3.F3.10.m3.3.3.2.2.2.2.2.cmml" xref="S3.F3.10.m3.3.3.2.2.2.2">
              <csymbol cd="ambiguous" id="S3.F3.10.m3.3.3.2.2.2.2.2.1.cmml" xref="S3.F3.10.m3.3.3.2.2.2.2">
               superscript
              </csymbol>
              <ci id="S3.F3.10.m3.3.3.2.2.2.2.2.2.cmml" xref="S3.F3.10.m3.3.3.2.2.2.2.2.2">
               𝑧
              </ci>
              <ci id="S3.F3.10.m3.3.3.2.2.2.2.2.3.cmml" xref="S3.F3.10.m3.3.3.2.2.2.2.2.3">
               𝑟
              </ci>
             </apply>
             <ci id="S3.F3.10.m3.3.3.2.2.2.2.3.cmml" xref="S3.F3.10.m3.3.3.2.2.2.2.3">
              𝑇
             </ci>
            </apply>
           </set>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F3.10.m3.3d">
         \mathcal{P}_{T+1}=\mathcal{P}_{1}\cup\{z^{p}\text{ related to }z^{r}_{1},...,z^{r}_{T}\}
        </annotation>
       </semantics>
      </math>
      , which makes it a better prompt candidate set comparing with
      <math alttext="\mathcal{P}_{1}" class="ltx_Math" display="inline" id="S3.F3.11.m4.1">
       <semantics id="S3.F3.11.m4.1b">
        <msub id="S3.F3.11.m4.1.1" xref="S3.F3.11.m4.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.F3.11.m4.1.1.2" xref="S3.F3.11.m4.1.1.2.cmml">
          𝒫
         </mi>
         <mn id="S3.F3.11.m4.1.1.3" xref="S3.F3.11.m4.1.1.3.cmml">
          1
         </mn>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.F3.11.m4.1c">
         <apply id="S3.F3.11.m4.1.1.cmml" xref="S3.F3.11.m4.1.1">
          <csymbol cd="ambiguous" id="S3.F3.11.m4.1.1.1.cmml" xref="S3.F3.11.m4.1.1">
           subscript
          </csymbol>
          <ci id="S3.F3.11.m4.1.1.2.cmml" xref="S3.F3.11.m4.1.1.2">
           𝒫
          </ci>
          <cn id="S3.F3.11.m4.1.1.3.cmml" type="integer" xref="S3.F3.11.m4.1.1.3">
           1
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F3.11.m4.1d">
         \mathcal{P}_{1}
        </annotation>
       </semantics>
      </math>
      . For
      <math alttext="t\geq T+1" class="ltx_Math" display="inline" id="S3.F3.12.m5.1">
       <semantics id="S3.F3.12.m5.1b">
        <mrow id="S3.F3.12.m5.1.1" xref="S3.F3.12.m5.1.1.cmml">
         <mi id="S3.F3.12.m5.1.1.2" xref="S3.F3.12.m5.1.1.2.cmml">
          t
         </mi>
         <mo id="S3.F3.12.m5.1.1.1" xref="S3.F3.12.m5.1.1.1.cmml">
          ≥
         </mo>
         <mrow id="S3.F3.12.m5.1.1.3" xref="S3.F3.12.m5.1.1.3.cmml">
          <mi id="S3.F3.12.m5.1.1.3.2" xref="S3.F3.12.m5.1.1.3.2.cmml">
           T
          </mi>
          <mo id="S3.F3.12.m5.1.1.3.1" xref="S3.F3.12.m5.1.1.3.1.cmml">
           +
          </mo>
          <mn id="S3.F3.12.m5.1.1.3.3" xref="S3.F3.12.m5.1.1.3.3.cmml">
           1
          </mn>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.F3.12.m5.1c">
         <apply id="S3.F3.12.m5.1.1.cmml" xref="S3.F3.12.m5.1.1">
          <geq id="S3.F3.12.m5.1.1.1.cmml" xref="S3.F3.12.m5.1.1.1">
          </geq>
          <ci id="S3.F3.12.m5.1.1.2.cmml" xref="S3.F3.12.m5.1.1.2">
           𝑡
          </ci>
          <apply id="S3.F3.12.m5.1.1.3.cmml" xref="S3.F3.12.m5.1.1.3">
           <plus id="S3.F3.12.m5.1.1.3.1.cmml" xref="S3.F3.12.m5.1.1.3.1">
           </plus>
           <ci id="S3.F3.12.m5.1.1.3.2.cmml" xref="S3.F3.12.m5.1.1.3.2">
            𝑇
           </ci>
           <cn id="S3.F3.12.m5.1.1.3.3.cmml" type="integer" xref="S3.F3.12.m5.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F3.12.m5.1d">
         t\geq T+1
        </annotation>
       </semantics>
      </math>
      ,
      <math alttext="\mathcal{P}_{t+1}" class="ltx_Math" display="inline" id="S3.F3.13.m6.1">
       <semantics id="S3.F3.13.m6.1b">
        <msub id="S3.F3.13.m6.1.1" xref="S3.F3.13.m6.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.F3.13.m6.1.1.2" xref="S3.F3.13.m6.1.1.2.cmml">
          𝒫
         </mi>
         <mrow id="S3.F3.13.m6.1.1.3" xref="S3.F3.13.m6.1.1.3.cmml">
          <mi id="S3.F3.13.m6.1.1.3.2" xref="S3.F3.13.m6.1.1.3.2.cmml">
           t
          </mi>
          <mo id="S3.F3.13.m6.1.1.3.1" xref="S3.F3.13.m6.1.1.3.1.cmml">
           +
          </mo>
          <mn id="S3.F3.13.m6.1.1.3.3" xref="S3.F3.13.m6.1.1.3.3.cmml">
           1
          </mn>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.F3.13.m6.1c">
         <apply id="S3.F3.13.m6.1.1.cmml" xref="S3.F3.13.m6.1.1">
          <csymbol cd="ambiguous" id="S3.F3.13.m6.1.1.1.cmml" xref="S3.F3.13.m6.1.1">
           subscript
          </csymbol>
          <ci id="S3.F3.13.m6.1.1.2.cmml" xref="S3.F3.13.m6.1.1.2">
           𝒫
          </ci>
          <apply id="S3.F3.13.m6.1.1.3.cmml" xref="S3.F3.13.m6.1.1.3">
           <plus id="S3.F3.13.m6.1.1.3.1.cmml" xref="S3.F3.13.m6.1.1.3.1">
           </plus>
           <ci id="S3.F3.13.m6.1.1.3.2.cmml" xref="S3.F3.13.m6.1.1.3.2">
            𝑡
           </ci>
           <cn id="S3.F3.13.m6.1.1.3.3.cmml" type="integer" xref="S3.F3.13.m6.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F3.13.m6.1d">
         \mathcal{P}_{t+1}
        </annotation>
       </semantics>
      </math>
      consists of the intermediate results obtained during the dialog interactions starting from
      <math alttext="t=T+1" class="ltx_Math" display="inline" id="S3.F3.14.m7.1">
       <semantics id="S3.F3.14.m7.1b">
        <mrow id="S3.F3.14.m7.1.1" xref="S3.F3.14.m7.1.1.cmml">
         <mi id="S3.F3.14.m7.1.1.2" xref="S3.F3.14.m7.1.1.2.cmml">
          t
         </mi>
         <mo id="S3.F3.14.m7.1.1.1" xref="S3.F3.14.m7.1.1.1.cmml">
          =
         </mo>
         <mrow id="S3.F3.14.m7.1.1.3" xref="S3.F3.14.m7.1.1.3.cmml">
          <mi id="S3.F3.14.m7.1.1.3.2" xref="S3.F3.14.m7.1.1.3.2.cmml">
           T
          </mi>
          <mo id="S3.F3.14.m7.1.1.3.1" xref="S3.F3.14.m7.1.1.3.1.cmml">
           +
          </mo>
          <mn id="S3.F3.14.m7.1.1.3.3" xref="S3.F3.14.m7.1.1.3.3.cmml">
           1
          </mn>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.F3.14.m7.1c">
         <apply id="S3.F3.14.m7.1.1.cmml" xref="S3.F3.14.m7.1.1">
          <eq id="S3.F3.14.m7.1.1.1.cmml" xref="S3.F3.14.m7.1.1.1">
          </eq>
          <ci id="S3.F3.14.m7.1.1.2.cmml" xref="S3.F3.14.m7.1.1.2">
           𝑡
          </ci>
          <apply id="S3.F3.14.m7.1.1.3.cmml" xref="S3.F3.14.m7.1.1.3">
           <plus id="S3.F3.14.m7.1.1.3.1.cmml" xref="S3.F3.14.m7.1.1.3.1">
           </plus>
           <ci id="S3.F3.14.m7.1.1.3.2.cmml" xref="S3.F3.14.m7.1.1.3.2">
            𝑇
           </ci>
           <cn id="S3.F3.14.m7.1.1.3.3.cmml" type="integer" xref="S3.F3.14.m7.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.F3.14.m7.1d">
         t=T+1
        </annotation>
       </semantics>
      </math>
      .
     </figcaption>
    </figure>
    <div class="ltx_para" id="S3.SS1.SSS2.p3">
     <p class="ltx_p" id="S3.SS1.SSS2.p3.6">
      Creating a rule-based decomposition of the original task is challenging, which means it’s difficult to formulate an initial prompt candidate set
      <math alttext="\mathcal{P}_{1}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p3.1.m1.1">
       <semantics id="S3.SS1.SSS2.p3.1.m1.1a">
        <msub id="S3.SS1.SSS2.p3.1.m1.1.1" xref="S3.SS1.SSS2.p3.1.m1.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS2.p3.1.m1.1.1.2" xref="S3.SS1.SSS2.p3.1.m1.1.1.2.cmml">
          𝒫
         </mi>
         <mn id="S3.SS1.SSS2.p3.1.m1.1.1.3" xref="S3.SS1.SSS2.p3.1.m1.1.1.3.cmml">
          1
         </mn>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p3.1.m1.1b">
         <apply id="S3.SS1.SSS2.p3.1.m1.1.1.cmml" xref="S3.SS1.SSS2.p3.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p3.1.m1.1.1.1.cmml" xref="S3.SS1.SSS2.p3.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS2.p3.1.m1.1.1.2.cmml" xref="S3.SS1.SSS2.p3.1.m1.1.1.2">
           𝒫
          </ci>
          <cn id="S3.SS1.SSS2.p3.1.m1.1.1.3.cmml" type="integer" xref="S3.SS1.SSS2.p3.1.m1.1.1.3">
           1
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p3.1.m1.1c">
         \mathcal{P}_{1}
        </annotation>
       </semantics>
      </math>
      that encompass sub-tasks
      <math alttext="\{z_{t}^{r}\}_{t=0}^{T}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p3.2.m2.1">
       <semantics id="S3.SS1.SSS2.p3.2.m2.1a">
        <msubsup id="S3.SS1.SSS2.p3.2.m2.1.1" xref="S3.SS1.SSS2.p3.2.m2.1.1.cmml">
         <mrow id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.2.cmml">
          <mo id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.2" stretchy="false" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.2.cmml">
           {
          </mo>
          <msubsup id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.cmml">
           <mi id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.2" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.2.cmml">
            z
           </mi>
           <mi id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.3" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.3.cmml">
            t
           </mi>
           <mi id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.3" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.3.cmml">
            r
           </mi>
          </msubsup>
          <mo id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.3" stretchy="false" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.2.cmml">
           }
          </mo>
         </mrow>
         <mrow id="S3.SS1.SSS2.p3.2.m2.1.1.1.3" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.3.cmml">
          <mi id="S3.SS1.SSS2.p3.2.m2.1.1.1.3.2" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.3.2.cmml">
           t
          </mi>
          <mo id="S3.SS1.SSS2.p3.2.m2.1.1.1.3.1" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.3.1.cmml">
           =
          </mo>
          <mn id="S3.SS1.SSS2.p3.2.m2.1.1.1.3.3" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.3.3.cmml">
           0
          </mn>
         </mrow>
         <mi id="S3.SS1.SSS2.p3.2.m2.1.1.3" xref="S3.SS1.SSS2.p3.2.m2.1.1.3.cmml">
          T
         </mi>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p3.2.m2.1b">
         <apply id="S3.SS1.SSS2.p3.2.m2.1.1.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p3.2.m2.1.1.2.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS1.SSS2.p3.2.m2.1.1.1.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1">
           <csymbol cd="ambiguous" id="S3.SS1.SSS2.p3.2.m2.1.1.1.2.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1">
            subscript
           </csymbol>
           <set id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.2.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1">
            <apply id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1">
             <csymbol cd="ambiguous" id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.1.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1">
              superscript
             </csymbol>
             <apply id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1">
              <csymbol cd="ambiguous" id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1">
               subscript
              </csymbol>
              <ci id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.2">
               𝑧
              </ci>
              <ci id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.2.3">
               𝑡
              </ci>
             </apply>
             <ci id="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.3.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.1.1.1.3">
              𝑟
             </ci>
            </apply>
           </set>
           <apply id="S3.SS1.SSS2.p3.2.m2.1.1.1.3.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.3">
            <eq id="S3.SS1.SSS2.p3.2.m2.1.1.1.3.1.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.3.1">
            </eq>
            <ci id="S3.SS1.SSS2.p3.2.m2.1.1.1.3.2.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.3.2">
             𝑡
            </ci>
            <cn id="S3.SS1.SSS2.p3.2.m2.1.1.1.3.3.cmml" type="integer" xref="S3.SS1.SSS2.p3.2.m2.1.1.1.3.3">
             0
            </cn>
           </apply>
          </apply>
          <ci id="S3.SS1.SSS2.p3.2.m2.1.1.3.cmml" xref="S3.SS1.SSS2.p3.2.m2.1.1.3">
           𝑇
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p3.2.m2.1c">
         \{z_{t}^{r}\}_{t=0}^{T}
        </annotation>
       </semantics>
      </math>
      . Nevertheless, through the first
      <math alttext="T" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p3.3.m3.1">
       <semantics id="S3.SS1.SSS2.p3.3.m3.1a">
        <mi id="S3.SS1.SSS2.p3.3.m3.1.1" xref="S3.SS1.SSS2.p3.3.m3.1.1.cmml">
         T
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p3.3.m3.1b">
         <ci id="S3.SS1.SSS2.p3.3.m3.1.1.cmml" xref="S3.SS1.SSS2.p3.3.m3.1.1">
          𝑇
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p3.3.m3.1c">
         T
        </annotation>
       </semantics>
      </math>
      interactions and a fixed prompt template, LtM effectively expands its prompt candidate set
      <math alttext="\mathcal{P}_{T+1}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p3.4.m4.1">
       <semantics id="S3.SS1.SSS2.p3.4.m4.1a">
        <msub id="S3.SS1.SSS2.p3.4.m4.1.1" xref="S3.SS1.SSS2.p3.4.m4.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS2.p3.4.m4.1.1.2" xref="S3.SS1.SSS2.p3.4.m4.1.1.2.cmml">
          𝒫
         </mi>
         <mrow id="S3.SS1.SSS2.p3.4.m4.1.1.3" xref="S3.SS1.SSS2.p3.4.m4.1.1.3.cmml">
          <mi id="S3.SS1.SSS2.p3.4.m4.1.1.3.2" xref="S3.SS1.SSS2.p3.4.m4.1.1.3.2.cmml">
           T
          </mi>
          <mo id="S3.SS1.SSS2.p3.4.m4.1.1.3.1" xref="S3.SS1.SSS2.p3.4.m4.1.1.3.1.cmml">
           +
          </mo>
          <mn id="S3.SS1.SSS2.p3.4.m4.1.1.3.3" xref="S3.SS1.SSS2.p3.4.m4.1.1.3.3.cmml">
           1
          </mn>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p3.4.m4.1b">
         <apply id="S3.SS1.SSS2.p3.4.m4.1.1.cmml" xref="S3.SS1.SSS2.p3.4.m4.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p3.4.m4.1.1.1.cmml" xref="S3.SS1.SSS2.p3.4.m4.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS2.p3.4.m4.1.1.2.cmml" xref="S3.SS1.SSS2.p3.4.m4.1.1.2">
           𝒫
          </ci>
          <apply id="S3.SS1.SSS2.p3.4.m4.1.1.3.cmml" xref="S3.SS1.SSS2.p3.4.m4.1.1.3">
           <plus id="S3.SS1.SSS2.p3.4.m4.1.1.3.1.cmml" xref="S3.SS1.SSS2.p3.4.m4.1.1.3.1">
           </plus>
           <ci id="S3.SS1.SSS2.p3.4.m4.1.1.3.2.cmml" xref="S3.SS1.SSS2.p3.4.m4.1.1.3.2">
            𝑇
           </ci>
           <cn id="S3.SS1.SSS2.p3.4.m4.1.1.3.3.cmml" type="integer" xref="S3.SS1.SSS2.p3.4.m4.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p3.4.m4.1c">
         \mathcal{P}_{T+1}
        </annotation>
       </semantics>
      </math>
      to include all these sub-tasks, which makes
      <math alttext="\mathcal{P}_{T+1}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p3.5.m5.1">
       <semantics id="S3.SS1.SSS2.p3.5.m5.1a">
        <msub id="S3.SS1.SSS2.p3.5.m5.1.1" xref="S3.SS1.SSS2.p3.5.m5.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS2.p3.5.m5.1.1.2" xref="S3.SS1.SSS2.p3.5.m5.1.1.2.cmml">
          𝒫
         </mi>
         <mrow id="S3.SS1.SSS2.p3.5.m5.1.1.3" xref="S3.SS1.SSS2.p3.5.m5.1.1.3.cmml">
          <mi id="S3.SS1.SSS2.p3.5.m5.1.1.3.2" xref="S3.SS1.SSS2.p3.5.m5.1.1.3.2.cmml">
           T
          </mi>
          <mo id="S3.SS1.SSS2.p3.5.m5.1.1.3.1" xref="S3.SS1.SSS2.p3.5.m5.1.1.3.1.cmml">
           +
          </mo>
          <mn id="S3.SS1.SSS2.p3.5.m5.1.1.3.3" xref="S3.SS1.SSS2.p3.5.m5.1.1.3.3.cmml">
           1
          </mn>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p3.5.m5.1b">
         <apply id="S3.SS1.SSS2.p3.5.m5.1.1.cmml" xref="S3.SS1.SSS2.p3.5.m5.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p3.5.m5.1.1.1.cmml" xref="S3.SS1.SSS2.p3.5.m5.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS2.p3.5.m5.1.1.2.cmml" xref="S3.SS1.SSS2.p3.5.m5.1.1.2">
           𝒫
          </ci>
          <apply id="S3.SS1.SSS2.p3.5.m5.1.1.3.cmml" xref="S3.SS1.SSS2.p3.5.m5.1.1.3">
           <plus id="S3.SS1.SSS2.p3.5.m5.1.1.3.1.cmml" xref="S3.SS1.SSS2.p3.5.m5.1.1.3.1">
           </plus>
           <ci id="S3.SS1.SSS2.p3.5.m5.1.1.3.2.cmml" xref="S3.SS1.SSS2.p3.5.m5.1.1.3.2">
            𝑇
           </ci>
           <cn id="S3.SS1.SSS2.p3.5.m5.1.1.3.3.cmml" type="integer" xref="S3.SS1.SSS2.p3.5.m5.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p3.5.m5.1c">
         \mathcal{P}_{T+1}
        </annotation>
       </semantics>
      </math>
      a much better prompt candidate set comparing with
      <math alttext="\mathcal{P}_{1}" class="ltx_Math" display="inline" id="S3.SS1.SSS2.p3.6.m6.1">
       <semantics id="S3.SS1.SSS2.p3.6.m6.1a">
        <msub id="S3.SS1.SSS2.p3.6.m6.1.1" xref="S3.SS1.SSS2.p3.6.m6.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS2.p3.6.m6.1.1.2" xref="S3.SS1.SSS2.p3.6.m6.1.1.2.cmml">
          𝒫
         </mi>
         <mn id="S3.SS1.SSS2.p3.6.m6.1.1.3" xref="S3.SS1.SSS2.p3.6.m6.1.1.3.cmml">
          1
         </mn>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS2.p3.6.m6.1b">
         <apply id="S3.SS1.SSS2.p3.6.m6.1.1.cmml" xref="S3.SS1.SSS2.p3.6.m6.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS2.p3.6.m6.1.1.1.cmml" xref="S3.SS1.SSS2.p3.6.m6.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS2.p3.6.m6.1.1.2.cmml" xref="S3.SS1.SSS2.p3.6.m6.1.1.2">
           𝒫
          </ci>
          <cn id="S3.SS1.SSS2.p3.6.m6.1.1.3.cmml" type="integer" xref="S3.SS1.SSS2.p3.6.m6.1.1.3">
           1
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS2.p3.6.m6.1c">
         \mathcal{P}_{1}
        </annotation>
       </semantics>
      </math>
      .
     </p>
    </div>
    <div class="ltx_para" id="S3.SS1.SSS2.p4">
     <p class="ltx_p" id="S3.SS1.SSS2.p4.1">
      Both PHP and LtM use previous responses to generate future prompts, but they differ significantly in their strategies for expanding the prompt candidate set. The prompt "In order to solve …, we have to solve …." used by LtM may not directly contribute to completing the final task but facilitates a deeper understanding of the task, which in turn enhances the quality of subsequent prompts. While this strategy enriches the understanding of the task, it also introduces new complexity and potential misdirection if the decomposition does not align well with the final task’s requirements. Thus, the strategy offers both advantages and challenges.
     </p>
    </div>
   </section>
   <section class="ltx_subsubsection" id="S3.SS1.SSS3">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.1.3
     </span>
     Insights and Future Directions
    </h4>
    <div class="ltx_para" id="S3.SS1.SSS3.p1">
     <p class="ltx_p" id="S3.SS1.SSS3.p1.2">
      Building upon the PE methods such as PHP and LtM, which employ an evolving
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.p1.1.m1.1">
       <semantics id="S3.SS1.SSS3.p1.1.m1.1a">
        <msub id="S3.SS1.SSS3.p1.1.m1.1.1" xref="S3.SS1.SSS3.p1.1.m1.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS3.p1.1.m1.1.1.2" xref="S3.SS1.SSS3.p1.1.m1.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S3.SS1.SSS3.p1.1.m1.1.1.3" xref="S3.SS1.SSS3.p1.1.m1.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.p1.1.m1.1b">
         <apply id="S3.SS1.SSS3.p1.1.m1.1.1.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS3.p1.1.m1.1.1.1.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS3.p1.1.m1.1.1.2.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.2">
           𝒫
          </ci>
          <ci id="S3.SS1.SSS3.p1.1.m1.1.1.3.cmml" xref="S3.SS1.SSS3.p1.1.m1.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS3.p1.1.m1.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      for prompt candidate sets, the implications for optimal control theory are substantial. One compelling direction for future research lies in the theoretical formulation of non-stationary action spaces, which deviates notably from the assumptions of traditional optimal control frameworks. The conventional models often presuppose a static set of controls or actions, whereas the concept of an evolving
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.p1.2.m2.1">
       <semantics id="S3.SS1.SSS3.p1.2.m2.1a">
        <msub id="S3.SS1.SSS3.p1.2.m2.1.1" xref="S3.SS1.SSS3.p1.2.m2.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS3.p1.2.m2.1.1.2" xref="S3.SS1.SSS3.p1.2.m2.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S3.SS1.SSS3.p1.2.m2.1.1.3" xref="S3.SS1.SSS3.p1.2.m2.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.p1.2.m2.1b">
         <apply id="S3.SS1.SSS3.p1.2.m2.1.1.cmml" xref="S3.SS1.SSS3.p1.2.m2.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS3.p1.2.m2.1.1.1.cmml" xref="S3.SS1.SSS3.p1.2.m2.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS3.p1.2.m2.1.1.2.cmml" xref="S3.SS1.SSS3.p1.2.m2.1.1.2">
           𝒫
          </ci>
          <ci id="S3.SS1.SSS3.p1.2.m2.1.1.3.cmml" xref="S3.SS1.SSS3.p1.2.m2.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS3.p1.2.m2.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      introduces new layers of complexity and richness into the system dynamics. This demands a reevaluation of existing mathematical tools, from optimality conditions such as the Hamilton-Jacobi-Bellman equation to traditional concepts like stability and convergence.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS1.SSS3.p2">
     <p class="ltx_p" id="S3.SS1.SSS3.p2.2">
      On the algorithmic front, a dynamically evolving
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.p2.1.m1.1">
       <semantics id="S3.SS1.SSS3.p2.1.m1.1a">
        <msub id="S3.SS1.SSS3.p2.1.m1.1.1" xref="S3.SS1.SSS3.p2.1.m1.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS3.p2.1.m1.1.1.2" xref="S3.SS1.SSS3.p2.1.m1.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S3.SS1.SSS3.p2.1.m1.1.1.3" xref="S3.SS1.SSS3.p2.1.m1.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.p2.1.m1.1b">
         <apply id="S3.SS1.SSS3.p2.1.m1.1.1.cmml" xref="S3.SS1.SSS3.p2.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS3.p2.1.m1.1.1.1.cmml" xref="S3.SS1.SSS3.p2.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS3.p2.1.m1.1.1.2.cmml" xref="S3.SS1.SSS3.p2.1.m1.1.1.2">
           𝒫
          </ci>
          <ci id="S3.SS1.SSS3.p2.1.m1.1.1.3.cmml" xref="S3.SS1.SSS3.p2.1.m1.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS3.p2.1.m1.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      presents intriguing challenges as well as opportunities. For instance, real-time adaptation becomes crucial; as an AI agent dynamically uncovers new actions or strategies, efficient algorithms are needed to incorporate these changes online. Additionally, a dynamic
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.p2.2.m2.1">
       <semantics id="S3.SS1.SSS3.p2.2.m2.1a">
        <msub id="S3.SS1.SSS3.p2.2.m2.1.1" xref="S3.SS1.SSS3.p2.2.m2.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS3.p2.2.m2.1.1.2" xref="S3.SS1.SSS3.p2.2.m2.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S3.SS1.SSS3.p2.2.m2.1.1.3" xref="S3.SS1.SSS3.p2.2.m2.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.p2.2.m2.1b">
         <apply id="S3.SS1.SSS3.p2.2.m2.1.1.cmml" xref="S3.SS1.SSS3.p2.2.m2.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS3.p2.2.m2.1.1.1.cmml" xref="S3.SS1.SSS3.p2.2.m2.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS3.p2.2.m2.1.1.2.cmml" xref="S3.SS1.SSS3.p2.2.m2.1.1.2">
           𝒫
          </ci>
          <ci id="S3.SS1.SSS3.p2.2.m2.1.1.3.cmml" xref="S3.SS1.SSS3.p2.2.m2.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS3.p2.2.m2.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      could exacerbate computational complexities, warranting new numerical methods that can adaptively optimize the system’s behavior. This setting offers an interesting twist to existing methodologies like reinforcement learning, which typically operate in fixed action spaces, although some existing studies have already explored evolving action spaces
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib30" title="">
        30
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib31" title="">
        31
       </a>
       ]
      </cite>
      . By allowing the action space to evolve, one could model more complex, adaptive behaviors.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS1.SSS3.p3">
     <p class="ltx_p" id="S3.SS1.SSS3.p3.1">
      Therefore, the practice of dynamically updating
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S3.SS1.SSS3.p3.1.m1.1">
       <semantics id="S3.SS1.SSS3.p3.1.m1.1a">
        <msub id="S3.SS1.SSS3.p3.1.m1.1.1" xref="S3.SS1.SSS3.p3.1.m1.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS1.SSS3.p3.1.m1.1.1.2" xref="S3.SS1.SSS3.p3.1.m1.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S3.SS1.SSS3.p3.1.m1.1.1.3" xref="S3.SS1.SSS3.p3.1.m1.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS3.p3.1.m1.1b">
         <apply id="S3.SS1.SSS3.p3.1.m1.1.1.cmml" xref="S3.SS1.SSS3.p3.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS3.p3.1.m1.1.1.1.cmml" xref="S3.SS1.SSS3.p3.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS3.p3.1.m1.1.1.2.cmml" xref="S3.SS1.SSS3.p3.1.m1.1.1.2">
           𝒫
          </ci>
          <ci id="S3.SS1.SSS3.p3.1.m1.1.1.3.cmml" xref="S3.SS1.SSS3.p3.1.m1.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS3.p3.1.m1.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      as seen in PE methods in general not only adds empirical value to the task at hand but also poses sophisticated theoretical and algorithmic challenges. These challenges, in turn, offer fertile ground for extending the prevailing paradigms in optimal control theory to capture more intricate, evolving systems.
     </p>
    </div>
   </section>
  </section>
  <section class="ltx_subsection" id="S3.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     3.2
    </span>
    Optimizing Prompts
   </h3>
   <section class="ltx_subsubsection" id="S3.SS2.SSS1">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.2.1
     </span>
     Random Search
    </h4>
    <div class="ltx_para" id="S3.SS2.SSS1.p1">
     <p class="ltx_p" id="S3.SS2.SSS1.p1.1">
      Random search methods generate prompts at random and evaluate them using specific tasks to identify an optimal prompt
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib8" title="">
        8
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib9" title="">
        9
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib10" title="">
        10
       </a>
       ]
      </cite>
      . There is a wide variety of random search methods available. Here, we have chosen Automatic Prompt Engineering (APE)
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib8" title="">
        8
       </a>
       ]
      </cite>
      as an illustrative example.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS2.SSS1.p2">
     <p class="ltx_p" id="S3.SS2.SSS1.p2.9">
      APE aims to find an optimal prompt within all candidate prompts the LLM can provide. In other words,
     </p>
     <table class="ltx_equation ltx_eqn_table" id="S3.Ex8">
      <tbody>
       <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
        <td class="ltx_eqn_cell ltx_eqn_center_padleft">
        </td>
        <td class="ltx_eqn_cell ltx_align_center">
         <math alttext="\mathcal{P}_{1}=\{\text{all possible prompts LLM can generate based on }z^{q}\}." class="ltx_Math" display="block" id="S3.Ex8.m1.1">
          <semantics id="S3.Ex8.m1.1a">
           <mrow id="S3.Ex8.m1.1.1.1" xref="S3.Ex8.m1.1.1.1.1.cmml">
            <mrow id="S3.Ex8.m1.1.1.1.1" xref="S3.Ex8.m1.1.1.1.1.cmml">
             <msub id="S3.Ex8.m1.1.1.1.1.3" xref="S3.Ex8.m1.1.1.1.1.3.cmml">
              <mi class="ltx_font_mathcaligraphic" id="S3.Ex8.m1.1.1.1.1.3.2" xref="S3.Ex8.m1.1.1.1.1.3.2.cmml">
               𝒫
              </mi>
              <mn id="S3.Ex8.m1.1.1.1.1.3.3" xref="S3.Ex8.m1.1.1.1.1.3.3.cmml">
               1
              </mn>
             </msub>
             <mo id="S3.Ex8.m1.1.1.1.1.2" xref="S3.Ex8.m1.1.1.1.1.2.cmml">
              =
             </mo>
             <mrow id="S3.Ex8.m1.1.1.1.1.1.1" xref="S3.Ex8.m1.1.1.1.1.1.2.cmml">
              <mo id="S3.Ex8.m1.1.1.1.1.1.1.2" stretchy="false" xref="S3.Ex8.m1.1.1.1.1.1.2.cmml">
               {
              </mo>
              <mrow id="S3.Ex8.m1.1.1.1.1.1.1.1" xref="S3.Ex8.m1.1.1.1.1.1.1.1.cmml">
               <mtext id="S3.Ex8.m1.1.1.1.1.1.1.1.2" xref="S3.Ex8.m1.1.1.1.1.1.1.1.2a.cmml">
                all possible prompts LLM can generate based on
               </mtext>
               <mo id="S3.Ex8.m1.1.1.1.1.1.1.1.1" lspace="0em" rspace="0em" xref="S3.Ex8.m1.1.1.1.1.1.1.1.1.cmml">
                ​
               </mo>
               <msup id="S3.Ex8.m1.1.1.1.1.1.1.1.3" xref="S3.Ex8.m1.1.1.1.1.1.1.1.3.cmml">
                <mi id="S3.Ex8.m1.1.1.1.1.1.1.1.3.2" xref="S3.Ex8.m1.1.1.1.1.1.1.1.3.2.cmml">
                 z
                </mi>
                <mi id="S3.Ex8.m1.1.1.1.1.1.1.1.3.3" xref="S3.Ex8.m1.1.1.1.1.1.1.1.3.3.cmml">
                 q
                </mi>
               </msup>
              </mrow>
              <mo id="S3.Ex8.m1.1.1.1.1.1.1.3" stretchy="false" xref="S3.Ex8.m1.1.1.1.1.1.2.cmml">
               }
              </mo>
             </mrow>
            </mrow>
            <mo id="S3.Ex8.m1.1.1.1.2" lspace="0em" xref="S3.Ex8.m1.1.1.1.1.cmml">
             .
            </mo>
           </mrow>
           <annotation-xml encoding="MathML-Content" id="S3.Ex8.m1.1b">
            <apply id="S3.Ex8.m1.1.1.1.1.cmml" xref="S3.Ex8.m1.1.1.1">
             <eq id="S3.Ex8.m1.1.1.1.1.2.cmml" xref="S3.Ex8.m1.1.1.1.1.2">
             </eq>
             <apply id="S3.Ex8.m1.1.1.1.1.3.cmml" xref="S3.Ex8.m1.1.1.1.1.3">
              <csymbol cd="ambiguous" id="S3.Ex8.m1.1.1.1.1.3.1.cmml" xref="S3.Ex8.m1.1.1.1.1.3">
               subscript
              </csymbol>
              <ci id="S3.Ex8.m1.1.1.1.1.3.2.cmml" xref="S3.Ex8.m1.1.1.1.1.3.2">
               𝒫
              </ci>
              <cn id="S3.Ex8.m1.1.1.1.1.3.3.cmml" type="integer" xref="S3.Ex8.m1.1.1.1.1.3.3">
               1
              </cn>
             </apply>
             <set id="S3.Ex8.m1.1.1.1.1.1.2.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1">
              <apply id="S3.Ex8.m1.1.1.1.1.1.1.1.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1.1">
               <times id="S3.Ex8.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1.1.1">
               </times>
               <ci id="S3.Ex8.m1.1.1.1.1.1.1.1.2a.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1.1.2">
                <mtext id="S3.Ex8.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1.1.2">
                 all possible prompts LLM can generate based on
                </mtext>
               </ci>
               <apply id="S3.Ex8.m1.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1.1.3">
                <csymbol cd="ambiguous" id="S3.Ex8.m1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1.1.3">
                 superscript
                </csymbol>
                <ci id="S3.Ex8.m1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1.1.3.2">
                 𝑧
                </ci>
                <ci id="S3.Ex8.m1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.Ex8.m1.1.1.1.1.1.1.1.3.3">
                 𝑞
                </ci>
               </apply>
              </apply>
             </set>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="S3.Ex8.m1.1c">
            \mathcal{P}_{1}=\{\text{all possible prompts LLM can generate based on }z^{q}\}.
           </annotation>
          </semantics>
         </math>
        </td>
        <td class="ltx_eqn_cell ltx_eqn_center_padright">
        </td>
       </tr>
      </tbody>
     </table>
     <p class="ltx_p" id="S3.SS2.SSS1.p2.2">
      APE independently generated
      <math alttext="N" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p2.1.m1.1">
       <semantics id="S3.SS2.SSS1.p2.1.m1.1a">
        <mi id="S3.SS2.SSS1.p2.1.m1.1.1" xref="S3.SS2.SSS1.p2.1.m1.1.1.cmml">
         N
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.1.m1.1b">
         <ci id="S3.SS2.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1">
          𝑁
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.1.m1.1c">
         N
        </annotation>
       </semantics>
      </math>
      proposed prompts, forming a sub-candidate set
      <math alttext="\hat{\mathcal{P}}\subset\mathcal{P}_{1}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p2.2.m2.1">
       <semantics id="S3.SS2.SSS1.p2.2.m2.1a">
        <mrow id="S3.SS2.SSS1.p2.2.m2.1.1" xref="S3.SS2.SSS1.p2.2.m2.1.1.cmml">
         <mover accent="true" id="S3.SS2.SSS1.p2.2.m2.1.1.2" xref="S3.SS2.SSS1.p2.2.m2.1.1.2.cmml">
          <mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p2.2.m2.1.1.2.2" xref="S3.SS2.SSS1.p2.2.m2.1.1.2.2.cmml">
           𝒫
          </mi>
          <mo id="S3.SS2.SSS1.p2.2.m2.1.1.2.1" xref="S3.SS2.SSS1.p2.2.m2.1.1.2.1.cmml">
           ^
          </mo>
         </mover>
         <mo id="S3.SS2.SSS1.p2.2.m2.1.1.1" xref="S3.SS2.SSS1.p2.2.m2.1.1.1.cmml">
          ⊂
         </mo>
         <msub id="S3.SS2.SSS1.p2.2.m2.1.1.3" xref="S3.SS2.SSS1.p2.2.m2.1.1.3.cmml">
          <mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p2.2.m2.1.1.3.2" xref="S3.SS2.SSS1.p2.2.m2.1.1.3.2.cmml">
           𝒫
          </mi>
          <mn id="S3.SS2.SSS1.p2.2.m2.1.1.3.3" xref="S3.SS2.SSS1.p2.2.m2.1.1.3.3.cmml">
           1
          </mn>
         </msub>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.2.m2.1b">
         <apply id="S3.SS2.SSS1.p2.2.m2.1.1.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1">
          <subset id="S3.SS2.SSS1.p2.2.m2.1.1.1.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.1">
          </subset>
          <apply id="S3.SS2.SSS1.p2.2.m2.1.1.2.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.2">
           <ci id="S3.SS2.SSS1.p2.2.m2.1.1.2.1.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.2.1">
            ^
           </ci>
           <ci id="S3.SS2.SSS1.p2.2.m2.1.1.2.2.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.2.2">
            𝒫
           </ci>
          </apply>
          <apply id="S3.SS2.SSS1.p2.2.m2.1.1.3.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.2.m2.1.1.3.1.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS1.p2.2.m2.1.1.3.2.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.3.2">
            𝒫
           </ci>
           <cn id="S3.SS2.SSS1.p2.2.m2.1.1.3.3.cmml" type="integer" xref="S3.SS2.SSS1.p2.2.m2.1.1.3.3">
            1
           </cn>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.2.m2.1c">
         \hat{\mathcal{P}}\subset\mathcal{P}_{1}
        </annotation>
       </semantics>
      </math>
      as follows:
     </p>
     <table class="ltx_equation ltx_eqn_table" id="S3.Ex9">
      <tbody>
       <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
        <td class="ltx_eqn_cell ltx_eqn_center_padleft">
        </td>
        <td class="ltx_eqn_cell ltx_align_center">
         <math alttext="\hat{\mathcal{P}}=\{z^{p,(k)}\overset{\mathrm{iid}}{\sim}\mathcal{D}_{\operatorname{LLM}},\ k=1,\dots,N\}," class="ltx_math_unparsed" display="block" id="S3.Ex9.m1.4">
          <semantics id="S3.Ex9.m1.4a">
           <mrow id="S3.Ex9.m1.4b">
            <mover accent="true" id="S3.Ex9.m1.4.5">
             <mi class="ltx_font_mathcaligraphic" id="S3.Ex9.m1.4.5.2">
              𝒫
             </mi>
             <mo id="S3.Ex9.m1.4.5.1">
              ^
             </mo>
            </mover>
            <mo id="S3.Ex9.m1.4.6">
             =
            </mo>
            <mrow id="S3.Ex9.m1.4.7">
             <mo id="S3.Ex9.m1.4.7.1" stretchy="false">
              {
             </mo>
             <msup id="S3.Ex9.m1.4.7.2">
              <mi id="S3.Ex9.m1.4.7.2.2">
               z
              </mi>
              <mrow id="S3.Ex9.m1.3.3.3.3">
               <mi id="S3.Ex9.m1.2.2.2.2">
                p
               </mi>
               <mo id="S3.Ex9.m1.3.3.3.3.2">
                ,
               </mo>
               <mrow id="S3.Ex9.m1.3.3.3.3.1.2">
                <mo id="S3.Ex9.m1.3.3.3.3.1.2.1" stretchy="false">
                 (
                </mo>
                <mi id="S3.Ex9.m1.1.1.1.1">
                 k
                </mi>
                <mo id="S3.Ex9.m1.3.3.3.3.1.2.2" stretchy="false">
                 )
                </mo>
               </mrow>
              </mrow>
             </msup>
             <mover accent="true" id="S3.Ex9.m1.4.7.3">
              <mo id="S3.Ex9.m1.4.7.3.2">
               ∼
              </mo>
              <mo id="S3.Ex9.m1.4.7.3.1">
               iid
              </mo>
             </mover>
             <msub id="S3.Ex9.m1.4.7.4">
              <mi class="ltx_font_mathcaligraphic" id="S3.Ex9.m1.4.7.4.2">
               𝒟
              </mi>
              <mi id="S3.Ex9.m1.4.7.4.3">
               LLM
              </mi>
             </msub>
             <mo id="S3.Ex9.m1.4.7.5" rspace="0.667em">
              ,
             </mo>
             <mi id="S3.Ex9.m1.4.4">
              k
             </mi>
             <mo id="S3.Ex9.m1.4.7.6">
              =
             </mo>
             <mn id="S3.Ex9.m1.4.7.7">
              1
             </mn>
             <mo id="S3.Ex9.m1.4.7.8">
              ,
             </mo>
             <mi id="S3.Ex9.m1.4.7.9" mathvariant="normal">
              …
             </mi>
             <mo id="S3.Ex9.m1.4.7.10">
              ,
             </mo>
             <mi id="S3.Ex9.m1.4.7.11">
              N
             </mi>
             <mo id="S3.Ex9.m1.4.7.12" stretchy="false">
              }
             </mo>
            </mrow>
            <mo id="S3.Ex9.m1.4.8">
             ,
            </mo>
           </mrow>
           <annotation encoding="application/x-tex" id="S3.Ex9.m1.4c">
            \hat{\mathcal{P}}=\{z^{p,(k)}\overset{\mathrm{iid}}{\sim}\mathcal{D}_{\operatorname{LLM}},\ k=1,\dots,N\},
           </annotation>
          </semantics>
         </math>
        </td>
        <td class="ltx_eqn_cell ltx_eqn_center_padright">
        </td>
       </tr>
      </tbody>
     </table>
     <p class="ltx_p" id="S3.SS2.SSS1.p2.8">
      where
      <math alttext="\mathcal{D}_{\operatorname{LLM}}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p2.3.m1.1">
       <semantics id="S3.SS2.SSS1.p2.3.m1.1a">
        <msub id="S3.SS2.SSS1.p2.3.m1.1.1" xref="S3.SS2.SSS1.p2.3.m1.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p2.3.m1.1.1.2" xref="S3.SS2.SSS1.p2.3.m1.1.1.2.cmml">
          𝒟
         </mi>
         <mi id="S3.SS2.SSS1.p2.3.m1.1.1.3" xref="S3.SS2.SSS1.p2.3.m1.1.1.3.cmml">
          LLM
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.3.m1.1b">
         <apply id="S3.SS2.SSS1.p2.3.m1.1.1.cmml" xref="S3.SS2.SSS1.p2.3.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.3.m1.1.1.1.cmml" xref="S3.SS2.SSS1.p2.3.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p2.3.m1.1.1.2.cmml" xref="S3.SS2.SSS1.p2.3.m1.1.1.2">
           𝒟
          </ci>
          <ci id="S3.SS2.SSS1.p2.3.m1.1.1.3.cmml" xref="S3.SS2.SSS1.p2.3.m1.1.1.3">
           LLM
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.3.m1.1c">
         \mathcal{D}_{\operatorname{LLM}}
        </annotation>
       </semantics>
      </math>
      represents the prior distribution, which characterizes the distribution of proposed prompts generated by an independent LLM. APE evaluates these prompts
      <math alttext="z^{p,(k)}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p2.4.m2.3">
       <semantics id="S3.SS2.SSS1.p2.4.m2.3a">
        <msup id="S3.SS2.SSS1.p2.4.m2.3.4" xref="S3.SS2.SSS1.p2.4.m2.3.4.cmml">
         <mi id="S3.SS2.SSS1.p2.4.m2.3.4.2" xref="S3.SS2.SSS1.p2.4.m2.3.4.2.cmml">
          z
         </mi>
         <mrow id="S3.SS2.SSS1.p2.4.m2.3.3.3.3" xref="S3.SS2.SSS1.p2.4.m2.3.3.3.4.cmml">
          <mi id="S3.SS2.SSS1.p2.4.m2.2.2.2.2" xref="S3.SS2.SSS1.p2.4.m2.2.2.2.2.cmml">
           p
          </mi>
          <mo id="S3.SS2.SSS1.p2.4.m2.3.3.3.3.2" xref="S3.SS2.SSS1.p2.4.m2.3.3.3.4.cmml">
           ,
          </mo>
          <mrow id="S3.SS2.SSS1.p2.4.m2.3.3.3.3.1.2" xref="S3.SS2.SSS1.p2.4.m2.3.3.3.4.cmml">
           <mo id="S3.SS2.SSS1.p2.4.m2.3.3.3.3.1.2.1" stretchy="false" xref="S3.SS2.SSS1.p2.4.m2.3.3.3.4.cmml">
            (
           </mo>
           <mi id="S3.SS2.SSS1.p2.4.m2.1.1.1.1" xref="S3.SS2.SSS1.p2.4.m2.1.1.1.1.cmml">
            k
           </mi>
           <mo id="S3.SS2.SSS1.p2.4.m2.3.3.3.3.1.2.2" stretchy="false" xref="S3.SS2.SSS1.p2.4.m2.3.3.3.4.cmml">
            )
           </mo>
          </mrow>
         </mrow>
        </msup>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.4.m2.3b">
         <apply id="S3.SS2.SSS1.p2.4.m2.3.4.cmml" xref="S3.SS2.SSS1.p2.4.m2.3.4">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.4.m2.3.4.1.cmml" xref="S3.SS2.SSS1.p2.4.m2.3.4">
           superscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p2.4.m2.3.4.2.cmml" xref="S3.SS2.SSS1.p2.4.m2.3.4.2">
           𝑧
          </ci>
          <list id="S3.SS2.SSS1.p2.4.m2.3.3.3.4.cmml" xref="S3.SS2.SSS1.p2.4.m2.3.3.3.3">
           <ci id="S3.SS2.SSS1.p2.4.m2.2.2.2.2.cmml" xref="S3.SS2.SSS1.p2.4.m2.2.2.2.2">
            𝑝
           </ci>
           <ci id="S3.SS2.SSS1.p2.4.m2.1.1.1.1.cmml" xref="S3.SS2.SSS1.p2.4.m2.1.1.1.1">
            𝑘
           </ci>
          </list>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.4.m2.3c">
         z^{p,(k)}
        </annotation>
       </semantics>
      </math>
      through their scores
      <math alttext="f^{(k)}=f(z^{p,(k)};z^{q})" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p2.5.m3.6">
       <semantics id="S3.SS2.SSS1.p2.5.m3.6a">
        <mrow id="S3.SS2.SSS1.p2.5.m3.6.6" xref="S3.SS2.SSS1.p2.5.m3.6.6.cmml">
         <msup id="S3.SS2.SSS1.p2.5.m3.6.6.4" xref="S3.SS2.SSS1.p2.5.m3.6.6.4.cmml">
          <mi id="S3.SS2.SSS1.p2.5.m3.6.6.4.2" xref="S3.SS2.SSS1.p2.5.m3.6.6.4.2.cmml">
           f
          </mi>
          <mrow id="S3.SS2.SSS1.p2.5.m3.1.1.1.3" xref="S3.SS2.SSS1.p2.5.m3.6.6.4.cmml">
           <mo id="S3.SS2.SSS1.p2.5.m3.1.1.1.3.1" stretchy="false" xref="S3.SS2.SSS1.p2.5.m3.6.6.4.cmml">
            (
           </mo>
           <mi id="S3.SS2.SSS1.p2.5.m3.1.1.1.1" xref="S3.SS2.SSS1.p2.5.m3.1.1.1.1.cmml">
            k
           </mi>
           <mo id="S3.SS2.SSS1.p2.5.m3.1.1.1.3.2" stretchy="false" xref="S3.SS2.SSS1.p2.5.m3.6.6.4.cmml">
            )
           </mo>
          </mrow>
         </msup>
         <mo id="S3.SS2.SSS1.p2.5.m3.6.6.3" xref="S3.SS2.SSS1.p2.5.m3.6.6.3.cmml">
          =
         </mo>
         <mrow id="S3.SS2.SSS1.p2.5.m3.6.6.2" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.cmml">
          <mi id="S3.SS2.SSS1.p2.5.m3.6.6.2.4" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.4.cmml">
           f
          </mi>
          <mo id="S3.SS2.SSS1.p2.5.m3.6.6.2.3" lspace="0em" rspace="0em" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.3.cmml">
           ​
          </mo>
          <mrow id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.3.cmml">
           <mo id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.3" stretchy="false" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.3.cmml">
            (
           </mo>
           <msup id="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1" xref="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1.cmml">
            <mi id="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1.2" xref="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1.2.cmml">
             z
            </mi>
            <mrow id="S3.SS2.SSS1.p2.5.m3.4.4.3.3" xref="S3.SS2.SSS1.p2.5.m3.4.4.3.4.cmml">
             <mi id="S3.SS2.SSS1.p2.5.m3.3.3.2.2" xref="S3.SS2.SSS1.p2.5.m3.3.3.2.2.cmml">
              p
             </mi>
             <mo id="S3.SS2.SSS1.p2.5.m3.4.4.3.3.2" xref="S3.SS2.SSS1.p2.5.m3.4.4.3.4.cmml">
              ,
             </mo>
             <mrow id="S3.SS2.SSS1.p2.5.m3.4.4.3.3.1.2" xref="S3.SS2.SSS1.p2.5.m3.4.4.3.4.cmml">
              <mo id="S3.SS2.SSS1.p2.5.m3.4.4.3.3.1.2.1" stretchy="false" xref="S3.SS2.SSS1.p2.5.m3.4.4.3.4.cmml">
               (
              </mo>
              <mi id="S3.SS2.SSS1.p2.5.m3.2.2.1.1" xref="S3.SS2.SSS1.p2.5.m3.2.2.1.1.cmml">
               k
              </mi>
              <mo id="S3.SS2.SSS1.p2.5.m3.4.4.3.3.1.2.2" stretchy="false" xref="S3.SS2.SSS1.p2.5.m3.4.4.3.4.cmml">
               )
              </mo>
             </mrow>
            </mrow>
           </msup>
           <mo id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.4" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.3.cmml">
            ;
           </mo>
           <msup id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.cmml">
            <mi id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.2" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.2.cmml">
             z
            </mi>
            <mi id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.3" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.3.cmml">
             q
            </mi>
           </msup>
           <mo id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.5" stretchy="false" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.3.cmml">
            )
           </mo>
          </mrow>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.5.m3.6b">
         <apply id="S3.SS2.SSS1.p2.5.m3.6.6.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6">
          <eq id="S3.SS2.SSS1.p2.5.m3.6.6.3.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.3">
          </eq>
          <apply id="S3.SS2.SSS1.p2.5.m3.6.6.4.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.4">
           <csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.5.m3.6.6.4.1.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.4">
            superscript
           </csymbol>
           <ci id="S3.SS2.SSS1.p2.5.m3.6.6.4.2.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.4.2">
            𝑓
           </ci>
           <ci id="S3.SS2.SSS1.p2.5.m3.1.1.1.1.cmml" xref="S3.SS2.SSS1.p2.5.m3.1.1.1.1">
            𝑘
           </ci>
          </apply>
          <apply id="S3.SS2.SSS1.p2.5.m3.6.6.2.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.2">
           <times id="S3.SS2.SSS1.p2.5.m3.6.6.2.3.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.3">
           </times>
           <ci id="S3.SS2.SSS1.p2.5.m3.6.6.2.4.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.4">
            𝑓
           </ci>
           <list id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.3.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2">
            <apply id="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1.cmml" xref="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1">
             <csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1.1.cmml" xref="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1">
              superscript
             </csymbol>
             <ci id="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1.2.cmml" xref="S3.SS2.SSS1.p2.5.m3.5.5.1.1.1.1.2">
              𝑧
             </ci>
             <list id="S3.SS2.SSS1.p2.5.m3.4.4.3.4.cmml" xref="S3.SS2.SSS1.p2.5.m3.4.4.3.3">
              <ci id="S3.SS2.SSS1.p2.5.m3.3.3.2.2.cmml" xref="S3.SS2.SSS1.p2.5.m3.3.3.2.2">
               𝑝
              </ci>
              <ci id="S3.SS2.SSS1.p2.5.m3.2.2.1.1.cmml" xref="S3.SS2.SSS1.p2.5.m3.2.2.1.1">
               𝑘
              </ci>
             </list>
            </apply>
            <apply id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2">
             <csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.1.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2">
              superscript
             </csymbol>
             <ci id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.2.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.2">
              𝑧
             </ci>
             <ci id="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.3.cmml" xref="S3.SS2.SSS1.p2.5.m3.6.6.2.2.2.2.3">
              𝑞
             </ci>
            </apply>
           </list>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.5.m3.6c">
         f^{(k)}=f(z^{p,(k)};z^{q})
        </annotation>
       </semantics>
      </math>
      and discards the
      <math alttext="M" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p2.6.m4.1">
       <semantics id="S3.SS2.SSS1.p2.6.m4.1a">
        <mi id="S3.SS2.SSS1.p2.6.m4.1.1" xref="S3.SS2.SSS1.p2.6.m4.1.1.cmml">
         M
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.6.m4.1b">
         <ci id="S3.SS2.SSS1.p2.6.m4.1.1.cmml" xref="S3.SS2.SSS1.p2.6.m4.1.1">
          𝑀
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.6.m4.1c">
         M
        </annotation>
       </semantics>
      </math>
      least effective prompts. Subsequently,
      <math alttext="M" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p2.7.m5.1">
       <semantics id="S3.SS2.SSS1.p2.7.m5.1a">
        <mi id="S3.SS2.SSS1.p2.7.m5.1.1" xref="S3.SS2.SSS1.p2.7.m5.1.1.cmml">
         M
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.7.m5.1b">
         <ci id="S3.SS2.SSS1.p2.7.m5.1.1.cmml" xref="S3.SS2.SSS1.p2.7.m5.1.1">
          𝑀
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.7.m5.1c">
         M
        </annotation>
       </semantics>
      </math>
      new prompts are sampled to replenish
      <math alttext="\hat{\mathcal{P}}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p2.8.m6.1">
       <semantics id="S3.SS2.SSS1.p2.8.m6.1a">
        <mover accent="true" id="S3.SS2.SSS1.p2.8.m6.1.1" xref="S3.SS2.SSS1.p2.8.m6.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p2.8.m6.1.1.2" xref="S3.SS2.SSS1.p2.8.m6.1.1.2.cmml">
          𝒫
         </mi>
         <mo id="S3.SS2.SSS1.p2.8.m6.1.1.1" xref="S3.SS2.SSS1.p2.8.m6.1.1.1.cmml">
          ^
         </mo>
        </mover>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.8.m6.1b">
         <apply id="S3.SS2.SSS1.p2.8.m6.1.1.cmml" xref="S3.SS2.SSS1.p2.8.m6.1.1">
          <ci id="S3.SS2.SSS1.p2.8.m6.1.1.1.cmml" xref="S3.SS2.SSS1.p2.8.m6.1.1.1">
           ^
          </ci>
          <ci id="S3.SS2.SSS1.p2.8.m6.1.1.2.cmml" xref="S3.SS2.SSS1.p2.8.m6.1.1.2">
           𝒫
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.8.m6.1c">
         \hat{\mathcal{P}}
        </annotation>
       </semantics>
      </math>
      . The process is iterated until a termination criterion is met.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS2.SSS1.p3">
     <p class="ltx_p" id="S3.SS2.SSS1.p3.1">
      APE illustrates that a well-informed prior for
      <math alttext="\mathcal{P}_{t}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p3.1.m1.1">
       <semantics id="S3.SS2.SSS1.p3.1.m1.1a">
        <msub id="S3.SS2.SSS1.p3.1.m1.1.1" xref="S3.SS2.SSS1.p3.1.m1.1.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS1.p3.1.m1.1.1.2" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.cmml">
          𝒫
         </mi>
         <mi id="S3.SS2.SSS1.p3.1.m1.1.1.3" xref="S3.SS2.SSS1.p3.1.m1.1.1.3.cmml">
          t
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p3.1.m1.1b">
         <apply id="S3.SS2.SSS1.p3.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p3.1.m1.1.1.1.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p3.1.m1.1.1.2.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2">
           𝒫
          </ci>
          <ci id="S3.SS2.SSS1.p3.1.m1.1.1.3.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.3">
           𝑡
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p3.1.m1.1c">
         \mathcal{P}_{t}
        </annotation>
       </semantics>
      </math>
      , such as an LLM, can make random search a viable strategy for prompt optimization. However, the efficacy of this approach diminishes if the prior is less reliable, necessitating a large sample size and increased computational costs.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS2.SSS1.p4">
     <p class="ltx_p" id="S3.SS2.SSS1.p4.1">
      Additional examples include Tree of Thought (ToT)
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib9" title="">
        9
       </a>
       ]
      </cite>
      , which specializes in multi-round PE. ToT utilizes a tree-search-like optimization strategy, systematically exploring sequences of prompts through iterative evaluation.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS2.SSS1.p5">
     <p class="ltx_p" id="S3.SS2.SSS1.p5.1">
      Random search methods are a promising tool for PE, and these methods could be improved to become even more efficient, effective, and versatile. For example, it is possible to develop new sampling algorithms that can quickly identify high-performing prompts, or to create hybrid methods that combine random search with other optimization techniques. Additionally, random search methods could be tailored to specific PE tasks, and better priors and evaluation metrics could be developed.
     </p>
    </div>
   </section>
   <section class="ltx_subsubsection" id="S3.SS2.SSS2">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.2.2
     </span>
     Reinforcement Learning Methods
    </h4>
    <div class="ltx_para" id="S3.SS2.SSS2.p1">
     <p class="ltx_p" id="S3.SS2.SSS2.p1.1">
      In proposed optimal control framework for PE, it is crucial to recognize the inherent challenges in optimizing prompts for LLMs. A foremost challenge lies in the discrete nature of the underlying language space
      <math alttext="\mathcal{Z}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.1.m1.1">
       <semantics id="S3.SS2.SSS2.p1.1.m1.1a">
        <mi class="ltx_font_mathcaligraphic" id="S3.SS2.SSS2.p1.1.m1.1.1" xref="S3.SS2.SSS2.p1.1.m1.1.1.cmml">
         𝒵
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.1.m1.1b">
         <ci id="S3.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1">
          𝒵
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.1.m1.1c">
         \mathcal{Z}
        </annotation>
       </semantics>
      </math>
      , which does not lend itself to conventional optimization techniques that assume continuous spaces. Additionally, the dynamics governing the LLMs are often opaque; we lack access to the internal parameters and can treat these models only as black boxes. In such a complex setting, reinforcement learning has emerged as an especially effective approach to tackle these challenges.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS2.SSS2.p2">
     <p class="ltx_p" id="S3.SS2.SSS2.p2.1">
      Particularly, model-free RL algorithms align well with the black-box nature of LLMs. These algorithms, operating without knowledge of the underlying model, offer a viable strategy for optimizing control problems like those in PE. Methods like RLPrompt
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib32" title="">
        32
       </a>
       ]
      </cite>
      and PromptPG
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib33" title="">
        33
       </a>
       ]
      </cite>
      are paradigmatic examples that adapt established RL techniques to optimize the quality of generated prompts. While these approaches show substantial promise, they necessitate numerous trial-and-error iterations, thereby elevating the computational overhead. This sets up an intriguing trade-off between the performance gains achieved and the computational resources expended, warranting a more thorough investigation.
     </p>
    </div>
    <div class="ltx_para" id="S3.SS2.SSS2.p3">
     <p class="ltx_p" id="S3.SS2.SSS2.p3.1">
      Looking ahead, there is a multitude of directions for future research. One area deserving particular attention is the development of more sample-efficient RL algorithms that can achieve reliable performance without incurring prohibitive computational costs. Another avenue could involve devising hybrid methods that integrate domain knowledge into the RL framework, thereby potentially enhancing both the effectiveness and efficiency of the prompt optimization process.
     </p>
    </div>
   </section>
   <section class="ltx_subsubsection" id="S3.SS2.SSS3">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.2.3
     </span>
     Comparing Random Search and Reinforcement Learning Methods
    </h4>
    <div class="ltx_para" id="S3.SS2.SSS3.p1">
     <p class="ltx_p" id="S3.SS2.SSS3.p1.1">
      The key distinction between random search methods and RL methods lies in the strategy for exploration and evaluation. RL methods, particularly model-free variants, operate on a principle of "evaluate and look ahead," allowing them to update their strategies based on the feedback received from prior interactions. This facilitates a more nuanced navigation of the prompt space, enabling RL to potentially find better prompts more efficiently. On the other hand, random search methods, such as APE and ToT, predominantly operate on a "generate and evaluate" paradigm without a look-ahead mechanism. They sample from a distribution, assess the samples, and make replacements, but do not typically leverage past evaluations to inform future explorations. While RL methods can incur higher computational costs due to their iterative nature and may require a well-defined reward function, random search methods are often simpler to implement and can be effective when a reliable prior is available. However, they may require a larger sample space and could be less efficient in navigating complex landscapes due to the lack of a lookahead mechanism. Thus, each approach comes with its inherent advantages and challenges, shaping their suitability for different PE scenarios.
     </p>
    </div>
   </section>
  </section>
  <section class="ltx_subsection" id="S3.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     3.3
    </span>
    Discussions
   </h3>
   <div class="ltx_para" id="S3.SS3.p1">
    <p class="ltx_p" id="S3.SS3.p1.1">
     Existing PE methods have made valuable progress on certain challenges mentioned in Section 2.4, displaying ingenuity in solving key facets like optimization and prompt candidate set expansion. However, their focused approaches also reveal opportunities for further advancement. For instance, APE and ToT concentrate on a rather specific optimization approach lacking generalized strategies, while LtM and PHP expand prompt candidate sets for specific tasks without wider applicability.
    </p>
   </div>
   <div class="ltx_para" id="S3.SS3.p2">
    <p class="ltx_p" id="S3.SS3.p2.1">
     Within our framework (
     <a class="ltx_ref" href="#S2.E1" title="In 2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     ), optimization and prompt candidate set expansion could potentially be unified, enabling joint optimization instead of the isolated treatment seen in current methods. Additionally, task-specific strategies developed for existing techniques could be translated into more generalizable principles via the formal optimal control perspective offered by our framework.
    </p>
   </div>
   <div class="ltx_para" id="S3.SS3.p3">
    <p class="ltx_p" id="S3.SS3.p3.1">
     By enabling a holistic, mathematically grounded understanding, our framework provides tools to elevate PE solutions to the next level of sophistication. We see great potential in moving from independent methods toward comprehensive techniques with broader applicability. We hope by adopting this systematic view, we can unlock the full capabilities of human-LLM interaction.
    </p>
   </div>
  </section>
 </section>
 <section class="ltx_section" id="S4">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    4
   </span>
   Further Extensions
  </h2>
  <div class="ltx_para" id="S4.p1">
   <p class="ltx_p" id="S4.p1.1">
    The optimal control framework given by (
    <a class="ltx_ref" href="#S2.E1" title="In 2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
     <span class="ltx_text ltx_ref_tag">
      1
     </span>
    </a>
    ) serves as a foundational structure for the mathematical description of numerous prevalent PE methods. Nevertheless, it is imperative to acknowledge that (
    <a class="ltx_ref" href="#S2.E1" title="In 2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
     <span class="ltx_text ltx_ref_tag">
      1
     </span>
    </a>
    ) is not universally adequate for capturing all aspects of the existing PE techniques and applications. In this section, we intend to delve into specific instances of certain advanced PE methodologies and articulate how they can be recast as optimal control problems.
   </p>
  </div>
  <section class="ltx_subsection" id="S4.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.1
    </span>
    Prompt Engineering via Ensemble Methods
   </h3>
   <div class="ltx_para" id="S4.SS1.p1">
    <p class="ltx_p" id="S4.SS1.p1.1">
     In statistics and machine learning, ensemble methods have long been instrumental for augmenting predictive accuracy and robustness. These techniques leverage multiple instances of similar procedures to yield superior performance compared to single trials
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib34" title="">
       34
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib35" title="">
       35
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib36" title="">
       36
      </a>
      ]
     </cite>
     . Building on this established groundwork, ensemble techniques have been naturally adapted to the realm of PE, where they have yielded noteworthy outcomes
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib37" title="">
       37
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib38" title="">
       38
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib39" title="">
       39
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib40" title="">
       40
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib41" title="">
       41
      </a>
      ]
     </cite>
     .
    </p>
   </div>
   <div class="ltx_para" id="S4.SS1.p2">
    <p class="ltx_p" id="S4.SS1.p2.1">
     By examining the optimal control framework (
     <a class="ltx_ref" href="#S2.E1" title="In 2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     ), it becomes evident that specialized PE methods like Self-Consistency CoT
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib37" title="">
       37
      </a>
      ]
     </cite>
     and Mutual Information
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib40" title="">
       40
      </a>
      ]
     </cite>
     do not align seamlessly with the existing formalism. To address this, this subsection presents an adapted framework based on (
     <a class="ltx_ref" href="#S2.E1" title="In 2.3 General Framework ‣ 2 A General Framework for Prompt Engineering ‣ Prompt Engineering Through the Lens of Optimal Control">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     ) to better accommodate these ensemble PE methods.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS1.p3">
    <p class="ltx_p" id="S4.SS1.p3.7">
     Consider a general human-LLM multi-query scenario for one task
     <math alttext="z^{q}" class="ltx_Math" display="inline" id="S4.SS1.p3.1.m1.1">
      <semantics id="S4.SS1.p3.1.m1.1a">
       <msup id="S4.SS1.p3.1.m1.1.1" xref="S4.SS1.p3.1.m1.1.1.cmml">
        <mi id="S4.SS1.p3.1.m1.1.1.2" xref="S4.SS1.p3.1.m1.1.1.2.cmml">
         z
        </mi>
        <mi id="S4.SS1.p3.1.m1.1.1.3" xref="S4.SS1.p3.1.m1.1.1.3.cmml">
         q
        </mi>
       </msup>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.1.m1.1b">
        <apply id="S4.SS1.p3.1.m1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1">
         <csymbol cd="ambiguous" id="S4.SS1.p3.1.m1.1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1">
          superscript
         </csymbol>
         <ci id="S4.SS1.p3.1.m1.1.1.2.cmml" xref="S4.SS1.p3.1.m1.1.1.2">
          𝑧
         </ci>
         <ci id="S4.SS1.p3.1.m1.1.1.3.cmml" xref="S4.SS1.p3.1.m1.1.1.3">
          𝑞
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.1.m1.1c">
        z^{q}
       </annotation>
      </semantics>
     </math>
     . Each query is denoted by a prompt
     <math alttext="z_{i}^{p}" class="ltx_Math" display="inline" id="S4.SS1.p3.2.m2.1">
      <semantics id="S4.SS1.p3.2.m2.1a">
       <msubsup id="S4.SS1.p3.2.m2.1.1" xref="S4.SS1.p3.2.m2.1.1.cmml">
        <mi id="S4.SS1.p3.2.m2.1.1.2.2" xref="S4.SS1.p3.2.m2.1.1.2.2.cmml">
         z
        </mi>
        <mi id="S4.SS1.p3.2.m2.1.1.2.3" xref="S4.SS1.p3.2.m2.1.1.2.3.cmml">
         i
        </mi>
        <mi id="S4.SS1.p3.2.m2.1.1.3" xref="S4.SS1.p3.2.m2.1.1.3.cmml">
         p
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.2.m2.1b">
        <apply id="S4.SS1.p3.2.m2.1.1.cmml" xref="S4.SS1.p3.2.m2.1.1">
         <csymbol cd="ambiguous" id="S4.SS1.p3.2.m2.1.1.1.cmml" xref="S4.SS1.p3.2.m2.1.1">
          superscript
         </csymbol>
         <apply id="S4.SS1.p3.2.m2.1.1.2.cmml" xref="S4.SS1.p3.2.m2.1.1">
          <csymbol cd="ambiguous" id="S4.SS1.p3.2.m2.1.1.2.1.cmml" xref="S4.SS1.p3.2.m2.1.1">
           subscript
          </csymbol>
          <ci id="S4.SS1.p3.2.m2.1.1.2.2.cmml" xref="S4.SS1.p3.2.m2.1.1.2.2">
           𝑧
          </ci>
          <ci id="S4.SS1.p3.2.m2.1.1.2.3.cmml" xref="S4.SS1.p3.2.m2.1.1.2.3">
           𝑖
          </ci>
         </apply>
         <ci id="S4.SS1.p3.2.m2.1.1.3.cmml" xref="S4.SS1.p3.2.m2.1.1.3">
          𝑝
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.2.m2.1c">
        z_{i}^{p}
       </annotation>
      </semantics>
     </math>
     and the corresponding response
     <math alttext="z_{i}^{r}" class="ltx_Math" display="inline" id="S4.SS1.p3.3.m3.1">
      <semantics id="S4.SS1.p3.3.m3.1a">
       <msubsup id="S4.SS1.p3.3.m3.1.1" xref="S4.SS1.p3.3.m3.1.1.cmml">
        <mi id="S4.SS1.p3.3.m3.1.1.2.2" xref="S4.SS1.p3.3.m3.1.1.2.2.cmml">
         z
        </mi>
        <mi id="S4.SS1.p3.3.m3.1.1.2.3" xref="S4.SS1.p3.3.m3.1.1.2.3.cmml">
         i
        </mi>
        <mi id="S4.SS1.p3.3.m3.1.1.3" xref="S4.SS1.p3.3.m3.1.1.3.cmml">
         r
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.3.m3.1b">
        <apply id="S4.SS1.p3.3.m3.1.1.cmml" xref="S4.SS1.p3.3.m3.1.1">
         <csymbol cd="ambiguous" id="S4.SS1.p3.3.m3.1.1.1.cmml" xref="S4.SS1.p3.3.m3.1.1">
          superscript
         </csymbol>
         <apply id="S4.SS1.p3.3.m3.1.1.2.cmml" xref="S4.SS1.p3.3.m3.1.1">
          <csymbol cd="ambiguous" id="S4.SS1.p3.3.m3.1.1.2.1.cmml" xref="S4.SS1.p3.3.m3.1.1">
           subscript
          </csymbol>
          <ci id="S4.SS1.p3.3.m3.1.1.2.2.cmml" xref="S4.SS1.p3.3.m3.1.1.2.2">
           𝑧
          </ci>
          <ci id="S4.SS1.p3.3.m3.1.1.2.3.cmml" xref="S4.SS1.p3.3.m3.1.1.2.3">
           𝑖
          </ci>
         </apply>
         <ci id="S4.SS1.p3.3.m3.1.1.3.cmml" xref="S4.SS1.p3.3.m3.1.1.3">
          𝑟
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.3.m3.1c">
        z_{i}^{r}
       </annotation>
      </semantics>
     </math>
     , where
     <math alttext="i\in I" class="ltx_Math" display="inline" id="S4.SS1.p3.4.m4.1">
      <semantics id="S4.SS1.p3.4.m4.1a">
       <mrow id="S4.SS1.p3.4.m4.1.1" xref="S4.SS1.p3.4.m4.1.1.cmml">
        <mi id="S4.SS1.p3.4.m4.1.1.2" xref="S4.SS1.p3.4.m4.1.1.2.cmml">
         i
        </mi>
        <mo id="S4.SS1.p3.4.m4.1.1.1" xref="S4.SS1.p3.4.m4.1.1.1.cmml">
         ∈
        </mo>
        <mi id="S4.SS1.p3.4.m4.1.1.3" xref="S4.SS1.p3.4.m4.1.1.3.cmml">
         I
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.4.m4.1b">
        <apply id="S4.SS1.p3.4.m4.1.1.cmml" xref="S4.SS1.p3.4.m4.1.1">
         <in id="S4.SS1.p3.4.m4.1.1.1.cmml" xref="S4.SS1.p3.4.m4.1.1.1">
         </in>
         <ci id="S4.SS1.p3.4.m4.1.1.2.cmml" xref="S4.SS1.p3.4.m4.1.1.2">
          𝑖
         </ci>
         <ci id="S4.SS1.p3.4.m4.1.1.3.cmml" xref="S4.SS1.p3.4.m4.1.1.3">
          𝐼
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.4.m4.1c">
        i\in I
       </annotation>
      </semantics>
     </math>
     is the query’s index with
     <math alttext="I" class="ltx_Math" display="inline" id="S4.SS1.p3.5.m5.1">
      <semantics id="S4.SS1.p3.5.m5.1a">
       <mi id="S4.SS1.p3.5.m5.1.1" xref="S4.SS1.p3.5.m5.1.1.cmml">
        I
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.5.m5.1b">
        <ci id="S4.SS1.p3.5.m5.1.1.cmml" xref="S4.SS1.p3.5.m5.1.1">
         𝐼
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.5.m5.1c">
        I
       </annotation>
      </semantics>
     </math>
     being the index set. The final response
     <math alttext="z^{r}" class="ltx_Math" display="inline" id="S4.SS1.p3.6.m6.1">
      <semantics id="S4.SS1.p3.6.m6.1a">
       <msup id="S4.SS1.p3.6.m6.1.1" xref="S4.SS1.p3.6.m6.1.1.cmml">
        <mi id="S4.SS1.p3.6.m6.1.1.2" xref="S4.SS1.p3.6.m6.1.1.2.cmml">
         z
        </mi>
        <mi id="S4.SS1.p3.6.m6.1.1.3" xref="S4.SS1.p3.6.m6.1.1.3.cmml">
         r
        </mi>
       </msup>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.6.m6.1b">
        <apply id="S4.SS1.p3.6.m6.1.1.cmml" xref="S4.SS1.p3.6.m6.1.1">
         <csymbol cd="ambiguous" id="S4.SS1.p3.6.m6.1.1.1.cmml" xref="S4.SS1.p3.6.m6.1.1">
          superscript
         </csymbol>
         <ci id="S4.SS1.p3.6.m6.1.1.2.cmml" xref="S4.SS1.p3.6.m6.1.1.2">
          𝑧
         </ci>
         <ci id="S4.SS1.p3.6.m6.1.1.3.cmml" xref="S4.SS1.p3.6.m6.1.1.3">
          𝑟
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.6.m6.1c">
        z^{r}
       </annotation>
      </semantics>
     </math>
     to the task is formulated using an ensemble function
     <math alttext="\operatorname{En}(\cdot)" class="ltx_Math" display="inline" id="S4.SS1.p3.7.m7.2">
      <semantics id="S4.SS1.p3.7.m7.2a">
       <mrow id="S4.SS1.p3.7.m7.2.3.2" xref="S4.SS1.p3.7.m7.2.3.1.cmml">
        <mi id="S4.SS1.p3.7.m7.1.1" xref="S4.SS1.p3.7.m7.1.1.cmml">
         En
        </mi>
        <mo id="S4.SS1.p3.7.m7.2.3.2a" xref="S4.SS1.p3.7.m7.2.3.1.cmml">
         ⁡
        </mo>
        <mrow id="S4.SS1.p3.7.m7.2.3.2.1" xref="S4.SS1.p3.7.m7.2.3.1.cmml">
         <mo id="S4.SS1.p3.7.m7.2.3.2.1.1" stretchy="false" xref="S4.SS1.p3.7.m7.2.3.1.cmml">
          (
         </mo>
         <mo id="S4.SS1.p3.7.m7.2.2" lspace="0em" rspace="0em" xref="S4.SS1.p3.7.m7.2.2.cmml">
          ⋅
         </mo>
         <mo id="S4.SS1.p3.7.m7.2.3.2.1.2" stretchy="false" xref="S4.SS1.p3.7.m7.2.3.1.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.7.m7.2b">
        <apply id="S4.SS1.p3.7.m7.2.3.1.cmml" xref="S4.SS1.p3.7.m7.2.3.2">
         <ci id="S4.SS1.p3.7.m7.1.1.cmml" xref="S4.SS1.p3.7.m7.1.1">
          En
         </ci>
         <ci id="S4.SS1.p3.7.m7.2.2.cmml" xref="S4.SS1.p3.7.m7.2.2">
          ⋅
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.7.m7.2c">
        \operatorname{En}(\cdot)
       </annotation>
      </semantics>
     </math>
     applied to all these responses:
    </p>
    <table class="ltx_equation ltx_eqn_table" id="S4.Ex10">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_eqn_cell ltx_align_center">
        <math alttext="z^{r}=\operatorname{En}(\{z_{i}^{r}\}_{i\in I})," class="ltx_Math" display="block" id="S4.Ex10.m1.2">
         <semantics id="S4.Ex10.m1.2a">
          <mrow id="S4.Ex10.m1.2.2.1" xref="S4.Ex10.m1.2.2.1.1.cmml">
           <mrow id="S4.Ex10.m1.2.2.1.1" xref="S4.Ex10.m1.2.2.1.1.cmml">
            <msup id="S4.Ex10.m1.2.2.1.1.3" xref="S4.Ex10.m1.2.2.1.1.3.cmml">
             <mi id="S4.Ex10.m1.2.2.1.1.3.2" xref="S4.Ex10.m1.2.2.1.1.3.2.cmml">
              z
             </mi>
             <mi id="S4.Ex10.m1.2.2.1.1.3.3" xref="S4.Ex10.m1.2.2.1.1.3.3.cmml">
              r
             </mi>
            </msup>
            <mo id="S4.Ex10.m1.2.2.1.1.2" xref="S4.Ex10.m1.2.2.1.1.2.cmml">
             =
            </mo>
            <mrow id="S4.Ex10.m1.2.2.1.1.1.1" xref="S4.Ex10.m1.2.2.1.1.1.2.cmml">
             <mi id="S4.Ex10.m1.1.1" xref="S4.Ex10.m1.1.1.cmml">
              En
             </mi>
             <mo id="S4.Ex10.m1.2.2.1.1.1.1a" xref="S4.Ex10.m1.2.2.1.1.1.2.cmml">
              ⁡
             </mo>
             <mrow id="S4.Ex10.m1.2.2.1.1.1.1.1" xref="S4.Ex10.m1.2.2.1.1.1.2.cmml">
              <mo id="S4.Ex10.m1.2.2.1.1.1.1.1.2" stretchy="false" xref="S4.Ex10.m1.2.2.1.1.1.2.cmml">
               (
              </mo>
              <msub id="S4.Ex10.m1.2.2.1.1.1.1.1.1" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.cmml">
               <mrow id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.2.cmml">
                <mo id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.2.cmml">
                 {
                </mo>
                <msubsup id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">
                 <mi id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.2" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.cmml">
                  z
                 </mi>
                 <mi id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.3" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.cmml">
                  i
                 </mi>
                 <mi id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.3" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml">
                  r
                 </mi>
                </msubsup>
                <mo id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.2.cmml">
                 }
                </mo>
               </mrow>
               <mrow id="S4.Ex10.m1.2.2.1.1.1.1.1.1.3" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.cmml">
                <mi id="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.2" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.2.cmml">
                 i
                </mi>
                <mo id="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.1" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.1.cmml">
                 ∈
                </mo>
                <mi id="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.3" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.3.cmml">
                 I
                </mi>
               </mrow>
              </msub>
              <mo id="S4.Ex10.m1.2.2.1.1.1.1.1.3" stretchy="false" xref="S4.Ex10.m1.2.2.1.1.1.2.cmml">
               )
              </mo>
             </mrow>
            </mrow>
           </mrow>
           <mo id="S4.Ex10.m1.2.2.1.2" xref="S4.Ex10.m1.2.2.1.1.cmml">
            ,
           </mo>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S4.Ex10.m1.2b">
           <apply id="S4.Ex10.m1.2.2.1.1.cmml" xref="S4.Ex10.m1.2.2.1">
            <eq id="S4.Ex10.m1.2.2.1.1.2.cmml" xref="S4.Ex10.m1.2.2.1.1.2">
            </eq>
            <apply id="S4.Ex10.m1.2.2.1.1.3.cmml" xref="S4.Ex10.m1.2.2.1.1.3">
             <csymbol cd="ambiguous" id="S4.Ex10.m1.2.2.1.1.3.1.cmml" xref="S4.Ex10.m1.2.2.1.1.3">
              superscript
             </csymbol>
             <ci id="S4.Ex10.m1.2.2.1.1.3.2.cmml" xref="S4.Ex10.m1.2.2.1.1.3.2">
              𝑧
             </ci>
             <ci id="S4.Ex10.m1.2.2.1.1.3.3.cmml" xref="S4.Ex10.m1.2.2.1.1.3.3">
              𝑟
             </ci>
            </apply>
            <apply id="S4.Ex10.m1.2.2.1.1.1.2.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1">
             <ci id="S4.Ex10.m1.1.1.cmml" xref="S4.Ex10.m1.1.1">
              En
             </ci>
             <apply id="S4.Ex10.m1.2.2.1.1.1.1.1.1.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1">
              <csymbol cd="ambiguous" id="S4.Ex10.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1">
               subscript
              </csymbol>
              <set id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.2.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1">
               <apply id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1">
                <csymbol cd="ambiguous" id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1">
                 superscript
                </csymbol>
                <apply id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1">
                 <csymbol cd="ambiguous" id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1">
                  subscript
                 </csymbol>
                 <ci id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.2">
                  𝑧
                 </ci>
                 <ci id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.2.3">
                  𝑖
                 </ci>
                </apply>
                <ci id="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.1.1.1.3">
                 𝑟
                </ci>
               </apply>
              </set>
              <apply id="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.3">
               <in id="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.1.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.1">
               </in>
               <ci id="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.2.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.2">
                𝑖
               </ci>
               <ci id="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.3.cmml" xref="S4.Ex10.m1.2.2.1.1.1.1.1.1.3.3">
                𝐼
               </ci>
              </apply>
             </apply>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.Ex10.m1.2c">
           z^{r}=\operatorname{En}(\{z_{i}^{r}\}_{i\in I}),
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
      </tr>
     </tbody>
    </table>
    <p class="ltx_p" id="S4.SS1.p3.9">
     where
     <math alttext="\operatorname{En}(\cdot)" class="ltx_Math" display="inline" id="S4.SS1.p3.8.m1.2">
      <semantics id="S4.SS1.p3.8.m1.2a">
       <mrow id="S4.SS1.p3.8.m1.2.3.2" xref="S4.SS1.p3.8.m1.2.3.1.cmml">
        <mi id="S4.SS1.p3.8.m1.1.1" xref="S4.SS1.p3.8.m1.1.1.cmml">
         En
        </mi>
        <mo id="S4.SS1.p3.8.m1.2.3.2a" xref="S4.SS1.p3.8.m1.2.3.1.cmml">
         ⁡
        </mo>
        <mrow id="S4.SS1.p3.8.m1.2.3.2.1" xref="S4.SS1.p3.8.m1.2.3.1.cmml">
         <mo id="S4.SS1.p3.8.m1.2.3.2.1.1" stretchy="false" xref="S4.SS1.p3.8.m1.2.3.1.cmml">
          (
         </mo>
         <mo id="S4.SS1.p3.8.m1.2.2" lspace="0em" rspace="0em" xref="S4.SS1.p3.8.m1.2.2.cmml">
          ⋅
         </mo>
         <mo id="S4.SS1.p3.8.m1.2.3.2.1.2" stretchy="false" xref="S4.SS1.p3.8.m1.2.3.1.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.8.m1.2b">
        <apply id="S4.SS1.p3.8.m1.2.3.1.cmml" xref="S4.SS1.p3.8.m1.2.3.2">
         <ci id="S4.SS1.p3.8.m1.1.1.cmml" xref="S4.SS1.p3.8.m1.1.1">
          En
         </ci>
         <ci id="S4.SS1.p3.8.m1.2.2.cmml" xref="S4.SS1.p3.8.m1.2.2">
          ⋅
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.8.m1.2c">
        \operatorname{En}(\cdot)
       </annotation>
      </semantics>
     </math>
     represents the ensemble strategy in use. Using
     <math alttext="\omega_{i}" class="ltx_Math" display="inline" id="S4.SS1.p3.9.m2.1">
      <semantics id="S4.SS1.p3.9.m2.1a">
       <msub id="S4.SS1.p3.9.m2.1.1" xref="S4.SS1.p3.9.m2.1.1.cmml">
        <mi id="S4.SS1.p3.9.m2.1.1.2" xref="S4.SS1.p3.9.m2.1.1.2.cmml">
         ω
        </mi>
        <mi id="S4.SS1.p3.9.m2.1.1.3" xref="S4.SS1.p3.9.m2.1.1.3.cmml">
         i
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p3.9.m2.1b">
        <apply id="S4.SS1.p3.9.m2.1.1.cmml" xref="S4.SS1.p3.9.m2.1.1">
         <csymbol cd="ambiguous" id="S4.SS1.p3.9.m2.1.1.1.cmml" xref="S4.SS1.p3.9.m2.1.1">
          subscript
         </csymbol>
         <ci id="S4.SS1.p3.9.m2.1.1.2.cmml" xref="S4.SS1.p3.9.m2.1.1.2">
          𝜔
         </ci>
         <ci id="S4.SS1.p3.9.m2.1.1.3.cmml" xref="S4.SS1.p3.9.m2.1.1.3">
          𝑖
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p3.9.m2.1c">
        \omega_{i}
       </annotation>
      </semantics>
     </math>
     to denote the randomness within the LLM, the optimal control problem for PE via ensemble methods can be formulated as:
    </p>
    <table class="ltx_equationgroup ltx_eqn_table" id="S4.E2">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S4.E2X">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_td ltx_align_right ltx_eqn_cell">
        <math alttext="\displaystyle\max_{z_{i}^{p}\in\mathcal{P}}" class="ltx_Math" display="inline" id="S4.E2X.2.1.1.m1.1">
         <semantics id="S4.E2X.2.1.1.m1.1a">
          <munder id="S4.E2X.2.1.1.m1.1.1" xref="S4.E2X.2.1.1.m1.1.1.cmml">
           <mi id="S4.E2X.2.1.1.m1.1.1.2" xref="S4.E2X.2.1.1.m1.1.1.2.cmml">
            max
           </mi>
           <mrow id="S4.E2X.2.1.1.m1.1.1.3" xref="S4.E2X.2.1.1.m1.1.1.3.cmml">
            <msubsup id="S4.E2X.2.1.1.m1.1.1.3.2" xref="S4.E2X.2.1.1.m1.1.1.3.2.cmml">
             <mi id="S4.E2X.2.1.1.m1.1.1.3.2.2.2" xref="S4.E2X.2.1.1.m1.1.1.3.2.2.2.cmml">
              z
             </mi>
             <mi id="S4.E2X.2.1.1.m1.1.1.3.2.2.3" xref="S4.E2X.2.1.1.m1.1.1.3.2.2.3.cmml">
              i
             </mi>
             <mi id="S4.E2X.2.1.1.m1.1.1.3.2.3" xref="S4.E2X.2.1.1.m1.1.1.3.2.3.cmml">
              p
             </mi>
            </msubsup>
            <mo id="S4.E2X.2.1.1.m1.1.1.3.1" xref="S4.E2X.2.1.1.m1.1.1.3.1.cmml">
             ∈
            </mo>
            <mi class="ltx_font_mathcaligraphic" id="S4.E2X.2.1.1.m1.1.1.3.3" xref="S4.E2X.2.1.1.m1.1.1.3.3.cmml">
             𝒫
            </mi>
           </mrow>
          </munder>
          <annotation-xml encoding="MathML-Content" id="S4.E2X.2.1.1.m1.1b">
           <apply id="S4.E2X.2.1.1.m1.1.1.cmml" xref="S4.E2X.2.1.1.m1.1.1">
            <csymbol cd="ambiguous" id="S4.E2X.2.1.1.m1.1.1.1.cmml" xref="S4.E2X.2.1.1.m1.1.1">
             subscript
            </csymbol>
            <max id="S4.E2X.2.1.1.m1.1.1.2.cmml" xref="S4.E2X.2.1.1.m1.1.1.2">
            </max>
            <apply id="S4.E2X.2.1.1.m1.1.1.3.cmml" xref="S4.E2X.2.1.1.m1.1.1.3">
             <in id="S4.E2X.2.1.1.m1.1.1.3.1.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.1">
             </in>
             <apply id="S4.E2X.2.1.1.m1.1.1.3.2.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.2">
              <csymbol cd="ambiguous" id="S4.E2X.2.1.1.m1.1.1.3.2.1.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.2">
               superscript
              </csymbol>
              <apply id="S4.E2X.2.1.1.m1.1.1.3.2.2.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.2">
               <csymbol cd="ambiguous" id="S4.E2X.2.1.1.m1.1.1.3.2.2.1.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.2">
                subscript
               </csymbol>
               <ci id="S4.E2X.2.1.1.m1.1.1.3.2.2.2.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.2.2.2">
                𝑧
               </ci>
               <ci id="S4.E2X.2.1.1.m1.1.1.3.2.2.3.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.2.2.3">
                𝑖
               </ci>
              </apply>
              <ci id="S4.E2X.2.1.1.m1.1.1.3.2.3.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.2.3">
               𝑝
              </ci>
             </apply>
             <ci id="S4.E2X.2.1.1.m1.1.1.3.3.cmml" xref="S4.E2X.2.1.1.m1.1.1.3.3">
              𝒫
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.E2X.2.1.1.m1.1c">
           \displaystyle\max_{z_{i}^{p}\in\mathcal{P}}
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_td ltx_align_left ltx_eqn_cell">
        <math alttext="\displaystyle\,\mathbb{E}_{\omega_{i}}f(\operatorname{En}(\{z_{i}^{r}\});z^{q})" class="ltx_Math" display="inline" id="S4.E2X.3.2.2.m1.3">
         <semantics id="S4.E2X.3.2.2.m1.3a">
          <mrow id="S4.E2X.3.2.2.m1.3.3" xref="S4.E2X.3.2.2.m1.3.3.cmml">
           <msub id="S4.E2X.3.2.2.m1.3.3.4" xref="S4.E2X.3.2.2.m1.3.3.4.cmml">
            <mi id="S4.E2X.3.2.2.m1.3.3.4.2" xref="S4.E2X.3.2.2.m1.3.3.4.2.cmml">
             𝔼
            </mi>
            <msub id="S4.E2X.3.2.2.m1.3.3.4.3" xref="S4.E2X.3.2.2.m1.3.3.4.3.cmml">
             <mi id="S4.E2X.3.2.2.m1.3.3.4.3.2" xref="S4.E2X.3.2.2.m1.3.3.4.3.2.cmml">
              ω
             </mi>
             <mi id="S4.E2X.3.2.2.m1.3.3.4.3.3" xref="S4.E2X.3.2.2.m1.3.3.4.3.3.cmml">
              i
             </mi>
            </msub>
           </msub>
           <mo id="S4.E2X.3.2.2.m1.3.3.3" lspace="0em" rspace="0em" xref="S4.E2X.3.2.2.m1.3.3.3.cmml">
            ​
           </mo>
           <mi id="S4.E2X.3.2.2.m1.3.3.5" xref="S4.E2X.3.2.2.m1.3.3.5.cmml">
            f
           </mi>
           <mo id="S4.E2X.3.2.2.m1.3.3.3a" lspace="0em" rspace="0em" xref="S4.E2X.3.2.2.m1.3.3.3.cmml">
            ​
           </mo>
           <mrow id="S4.E2X.3.2.2.m1.3.3.2.2" xref="S4.E2X.3.2.2.m1.3.3.2.3.cmml">
            <mo id="S4.E2X.3.2.2.m1.3.3.2.2.3" stretchy="false" xref="S4.E2X.3.2.2.m1.3.3.2.3.cmml">
             (
            </mo>
            <mrow id="S4.E2X.3.2.2.m1.2.2.1.1.1.1" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.2.cmml">
             <mi id="S4.E2X.3.2.2.m1.1.1" xref="S4.E2X.3.2.2.m1.1.1.cmml">
              En
             </mi>
             <mo id="S4.E2X.3.2.2.m1.2.2.1.1.1.1a" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.2.cmml">
              ⁡
             </mo>
             <mrow id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.2.cmml">
              <mo id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.2" stretchy="false" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.2.cmml">
               (
              </mo>
              <mrow id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.2.cmml">
               <mo id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.2" stretchy="false" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.2.cmml">
                {
               </mo>
               <msubsup id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.cmml">
                <mi id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.2" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.2.cmml">
                 z
                </mi>
                <mi id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.3" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.3.cmml">
                 i
                </mi>
                <mi id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.3.cmml">
                 r
                </mi>
               </msubsup>
               <mo id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.3" stretchy="false" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.2.cmml">
                }
               </mo>
              </mrow>
              <mo id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.3" stretchy="false" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.2.cmml">
               )
              </mo>
             </mrow>
            </mrow>
            <mo id="S4.E2X.3.2.2.m1.3.3.2.2.4" xref="S4.E2X.3.2.2.m1.3.3.2.3.cmml">
             ;
            </mo>
            <msup id="S4.E2X.3.2.2.m1.3.3.2.2.2" xref="S4.E2X.3.2.2.m1.3.3.2.2.2.cmml">
             <mi id="S4.E2X.3.2.2.m1.3.3.2.2.2.2" xref="S4.E2X.3.2.2.m1.3.3.2.2.2.2.cmml">
              z
             </mi>
             <mi id="S4.E2X.3.2.2.m1.3.3.2.2.2.3" xref="S4.E2X.3.2.2.m1.3.3.2.2.2.3.cmml">
              q
             </mi>
            </msup>
            <mo id="S4.E2X.3.2.2.m1.3.3.2.2.5" stretchy="false" xref="S4.E2X.3.2.2.m1.3.3.2.3.cmml">
             )
            </mo>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S4.E2X.3.2.2.m1.3b">
           <apply id="S4.E2X.3.2.2.m1.3.3.cmml" xref="S4.E2X.3.2.2.m1.3.3">
            <times id="S4.E2X.3.2.2.m1.3.3.3.cmml" xref="S4.E2X.3.2.2.m1.3.3.3">
            </times>
            <apply id="S4.E2X.3.2.2.m1.3.3.4.cmml" xref="S4.E2X.3.2.2.m1.3.3.4">
             <csymbol cd="ambiguous" id="S4.E2X.3.2.2.m1.3.3.4.1.cmml" xref="S4.E2X.3.2.2.m1.3.3.4">
              subscript
             </csymbol>
             <ci id="S4.E2X.3.2.2.m1.3.3.4.2.cmml" xref="S4.E2X.3.2.2.m1.3.3.4.2">
              𝔼
             </ci>
             <apply id="S4.E2X.3.2.2.m1.3.3.4.3.cmml" xref="S4.E2X.3.2.2.m1.3.3.4.3">
              <csymbol cd="ambiguous" id="S4.E2X.3.2.2.m1.3.3.4.3.1.cmml" xref="S4.E2X.3.2.2.m1.3.3.4.3">
               subscript
              </csymbol>
              <ci id="S4.E2X.3.2.2.m1.3.3.4.3.2.cmml" xref="S4.E2X.3.2.2.m1.3.3.4.3.2">
               𝜔
              </ci>
              <ci id="S4.E2X.3.2.2.m1.3.3.4.3.3.cmml" xref="S4.E2X.3.2.2.m1.3.3.4.3.3">
               𝑖
              </ci>
             </apply>
            </apply>
            <ci id="S4.E2X.3.2.2.m1.3.3.5.cmml" xref="S4.E2X.3.2.2.m1.3.3.5">
             𝑓
            </ci>
            <list id="S4.E2X.3.2.2.m1.3.3.2.3.cmml" xref="S4.E2X.3.2.2.m1.3.3.2.2">
             <apply id="S4.E2X.3.2.2.m1.2.2.1.1.1.2.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1">
              <ci id="S4.E2X.3.2.2.m1.1.1.cmml" xref="S4.E2X.3.2.2.m1.1.1">
               En
              </ci>
              <set id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1">
               <apply id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1">
                <csymbol cd="ambiguous" id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1">
                 superscript
                </csymbol>
                <apply id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1">
                 <csymbol cd="ambiguous" id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.1.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1">
                  subscript
                 </csymbol>
                 <ci id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.2.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.2">
                  𝑧
                 </ci>
                 <ci id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.3.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.2.3">
                  𝑖
                 </ci>
                </apply>
                <ci id="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E2X.3.2.2.m1.2.2.1.1.1.1.1.1.1.1.3">
                 𝑟
                </ci>
               </apply>
              </set>
             </apply>
             <apply id="S4.E2X.3.2.2.m1.3.3.2.2.2.cmml" xref="S4.E2X.3.2.2.m1.3.3.2.2.2">
              <csymbol cd="ambiguous" id="S4.E2X.3.2.2.m1.3.3.2.2.2.1.cmml" xref="S4.E2X.3.2.2.m1.3.3.2.2.2">
               superscript
              </csymbol>
              <ci id="S4.E2X.3.2.2.m1.3.3.2.2.2.2.cmml" xref="S4.E2X.3.2.2.m1.3.3.2.2.2.2">
               𝑧
              </ci>
              <ci id="S4.E2X.3.2.2.m1.3.3.2.2.2.3.cmml" xref="S4.E2X.3.2.2.m1.3.3.2.2.2.3">
               𝑞
              </ci>
             </apply>
            </list>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.E2X.3.2.2.m1.3c">
           \displaystyle\,\mathbb{E}_{\omega_{i}}f(\operatorname{En}(\{z_{i}^{r}\});z^{q})
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
       <td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="2">
        <span class="ltx_tag ltx_tag_equationgroup ltx_align_right">
         (2)
        </span>
       </td>
      </tr>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S4.E2Xa">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_td ltx_align_right ltx_eqn_cell">
        <math alttext="\displaystyle s.t." class="ltx_Math" display="inline" id="S4.E2Xa.2.1.1.m1.3">
         <semantics id="S4.E2Xa.2.1.1.m1.3a">
          <mrow id="S4.E2Xa.2.1.1.m1.3.3.1">
           <mrow id="S4.E2Xa.2.1.1.m1.3.3.1.1.2" xref="S4.E2Xa.2.1.1.m1.3.3.1.1.1.cmml">
            <mi id="S4.E2Xa.2.1.1.m1.1.1" xref="S4.E2Xa.2.1.1.m1.1.1.cmml">
             s
            </mi>
            <mo id="S4.E2Xa.2.1.1.m1.3.3.1.1.2.1" lspace="0em" rspace="0.167em" xref="S4.E2Xa.2.1.1.m1.3.3.1.1.1a.cmml">
             .
            </mo>
            <mi id="S4.E2Xa.2.1.1.m1.2.2" xref="S4.E2Xa.2.1.1.m1.2.2.cmml">
             t
            </mi>
           </mrow>
           <mo id="S4.E2Xa.2.1.1.m1.3.3.1.2" lspace="0em">
            .
           </mo>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S4.E2Xa.2.1.1.m1.3b">
           <apply id="S4.E2Xa.2.1.1.m1.3.3.1.1.1.cmml" xref="S4.E2Xa.2.1.1.m1.3.3.1.1.2">
            <csymbol cd="ambiguous" id="S4.E2Xa.2.1.1.m1.3.3.1.1.1a.cmml" xref="S4.E2Xa.2.1.1.m1.3.3.1.1.2.1">
             formulae-sequence
            </csymbol>
            <ci id="S4.E2Xa.2.1.1.m1.1.1.cmml" xref="S4.E2Xa.2.1.1.m1.1.1">
             𝑠
            </ci>
            <ci id="S4.E2Xa.2.1.1.m1.2.2.cmml" xref="S4.E2Xa.2.1.1.m1.2.2">
             𝑡
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.E2Xa.2.1.1.m1.3c">
           \displaystyle s.t.
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_td ltx_align_left ltx_eqn_cell">
        <math alttext="\displaystyle z_{i}^{r}=\operatorname{LLM}(z_{i}^{p},\omega_{i}),\ i\in I" class="ltx_Math" display="inline" id="S4.E2Xa.3.2.2.m1.3">
         <semantics id="S4.E2Xa.3.2.2.m1.3a">
          <mrow id="S4.E2Xa.3.2.2.m1.3.3.2" xref="S4.E2Xa.3.2.2.m1.3.3.3.cmml">
           <mrow id="S4.E2Xa.3.2.2.m1.2.2.1.1" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.cmml">
            <msubsup id="S4.E2Xa.3.2.2.m1.2.2.1.1.4" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4.cmml">
             <mi id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.2" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.2.cmml">
              z
             </mi>
             <mi id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.3" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.3.cmml">
              i
             </mi>
             <mi id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.3" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4.3.cmml">
              r
             </mi>
            </msubsup>
            <mo id="S4.E2Xa.3.2.2.m1.2.2.1.1.3" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.3.cmml">
             =
            </mo>
            <mrow id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.3.cmml">
             <mi id="S4.E2Xa.3.2.2.m1.1.1" xref="S4.E2Xa.3.2.2.m1.1.1.cmml">
              LLM
             </mi>
             <mo id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2a" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.3.cmml">
              ⁡
             </mo>
             <mrow id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.3.cmml">
              <mo id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.3" stretchy="false" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.3.cmml">
               (
              </mo>
              <msubsup id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.cmml">
               <mi id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.2" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.2.cmml">
                z
               </mi>
               <mi id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.3" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.3.cmml">
                i
               </mi>
               <mi id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.3" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.3.cmml">
                p
               </mi>
              </msubsup>
              <mo id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.4" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.3.cmml">
               ,
              </mo>
              <msub id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.cmml">
               <mi id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.2" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.2.cmml">
                ω
               </mi>
               <mi id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.3" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.3.cmml">
                i
               </mi>
              </msub>
              <mo id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.5" stretchy="false" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.3.cmml">
               )
              </mo>
             </mrow>
            </mrow>
           </mrow>
           <mo id="S4.E2Xa.3.2.2.m1.3.3.2.3" rspace="0.667em" xref="S4.E2Xa.3.2.2.m1.3.3.3a.cmml">
            ,
           </mo>
           <mrow id="S4.E2Xa.3.2.2.m1.3.3.2.2" xref="S4.E2Xa.3.2.2.m1.3.3.2.2.cmml">
            <mi id="S4.E2Xa.3.2.2.m1.3.3.2.2.2" xref="S4.E2Xa.3.2.2.m1.3.3.2.2.2.cmml">
             i
            </mi>
            <mo id="S4.E2Xa.3.2.2.m1.3.3.2.2.1" xref="S4.E2Xa.3.2.2.m1.3.3.2.2.1.cmml">
             ∈
            </mo>
            <mi id="S4.E2Xa.3.2.2.m1.3.3.2.2.3" xref="S4.E2Xa.3.2.2.m1.3.3.2.2.3.cmml">
             I
            </mi>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S4.E2Xa.3.2.2.m1.3b">
           <apply id="S4.E2Xa.3.2.2.m1.3.3.3.cmml" xref="S4.E2Xa.3.2.2.m1.3.3.2">
            <csymbol cd="ambiguous" id="S4.E2Xa.3.2.2.m1.3.3.3a.cmml" xref="S4.E2Xa.3.2.2.m1.3.3.2.3">
             formulae-sequence
            </csymbol>
            <apply id="S4.E2Xa.3.2.2.m1.2.2.1.1.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1">
             <eq id="S4.E2Xa.3.2.2.m1.2.2.1.1.3.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.3">
             </eq>
             <apply id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4">
              <csymbol cd="ambiguous" id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.1.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4">
               superscript
              </csymbol>
              <apply id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4">
               <csymbol cd="ambiguous" id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.1.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4">
                subscript
               </csymbol>
               <ci id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.2.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.2">
                𝑧
               </ci>
               <ci id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.3.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4.2.3">
                𝑖
               </ci>
              </apply>
              <ci id="S4.E2Xa.3.2.2.m1.2.2.1.1.4.3.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.4.3">
               𝑟
              </ci>
             </apply>
             <apply id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.3.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2">
              <ci id="S4.E2Xa.3.2.2.m1.1.1.cmml" xref="S4.E2Xa.3.2.2.m1.1.1">
               LLM
              </ci>
              <apply id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1">
               <csymbol cd="ambiguous" id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1">
                superscript
               </csymbol>
               <apply id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1">
                <csymbol cd="ambiguous" id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.1.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1">
                 subscript
                </csymbol>
                <ci id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.2.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.2">
                 𝑧
                </ci>
                <ci id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.3.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.2.3">
                 𝑖
                </ci>
               </apply>
               <ci id="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.1.1.1.1.3">
                𝑝
               </ci>
              </apply>
              <apply id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2">
               <csymbol cd="ambiguous" id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.1.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2">
                subscript
               </csymbol>
               <ci id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.2.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.2">
                𝜔
               </ci>
               <ci id="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.3.cmml" xref="S4.E2Xa.3.2.2.m1.2.2.1.1.2.2.2.2.3">
                𝑖
               </ci>
              </apply>
             </apply>
            </apply>
            <apply id="S4.E2Xa.3.2.2.m1.3.3.2.2.cmml" xref="S4.E2Xa.3.2.2.m1.3.3.2.2">
             <in id="S4.E2Xa.3.2.2.m1.3.3.2.2.1.cmml" xref="S4.E2Xa.3.2.2.m1.3.3.2.2.1">
             </in>
             <ci id="S4.E2Xa.3.2.2.m1.3.3.2.2.2.cmml" xref="S4.E2Xa.3.2.2.m1.3.3.2.2.2">
              𝑖
             </ci>
             <ci id="S4.E2Xa.3.2.2.m1.3.3.2.2.3.cmml" xref="S4.E2Xa.3.2.2.m1.3.3.2.2.3">
              𝐼
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.E2Xa.3.2.2.m1.3c">
           \displaystyle z_{i}^{r}=\operatorname{LLM}(z_{i}^{p},\omega_{i}),\ i\in I
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
      </tr>
     </tbody>
    </table>
    <p class="ltx_p" id="S4.SS1.p3.10">
     The mathematical formulation presented is sufficiently versatile to subsume a diverse array of ensemble PE methods.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS1.p4">
    <p class="ltx_p" id="S4.SS1.p4.3">
     In one class of approaches, a same prompt is utilized across multiple queries, leveraging the inherent stochasticity of the LLM to introduce variation. The specific ensemble function, denoted as
     <math alttext="\operatorname{En}(\cdot)" class="ltx_Math" display="inline" id="S4.SS1.p4.1.m1.2">
      <semantics id="S4.SS1.p4.1.m1.2a">
       <mrow id="S4.SS1.p4.1.m1.2.3.2" xref="S4.SS1.p4.1.m1.2.3.1.cmml">
        <mi id="S4.SS1.p4.1.m1.1.1" xref="S4.SS1.p4.1.m1.1.1.cmml">
         En
        </mi>
        <mo id="S4.SS1.p4.1.m1.2.3.2a" xref="S4.SS1.p4.1.m1.2.3.1.cmml">
         ⁡
        </mo>
        <mrow id="S4.SS1.p4.1.m1.2.3.2.1" xref="S4.SS1.p4.1.m1.2.3.1.cmml">
         <mo id="S4.SS1.p4.1.m1.2.3.2.1.1" stretchy="false" xref="S4.SS1.p4.1.m1.2.3.1.cmml">
          (
         </mo>
         <mo id="S4.SS1.p4.1.m1.2.2" lspace="0em" rspace="0em" xref="S4.SS1.p4.1.m1.2.2.cmml">
          ⋅
         </mo>
         <mo id="S4.SS1.p4.1.m1.2.3.2.1.2" stretchy="false" xref="S4.SS1.p4.1.m1.2.3.1.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p4.1.m1.2b">
        <apply id="S4.SS1.p4.1.m1.2.3.1.cmml" xref="S4.SS1.p4.1.m1.2.3.2">
         <ci id="S4.SS1.p4.1.m1.1.1.cmml" xref="S4.SS1.p4.1.m1.1.1">
          En
         </ci>
         <ci id="S4.SS1.p4.1.m1.2.2.cmml" xref="S4.SS1.p4.1.m1.2.2">
          ⋅
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p4.1.m1.2c">
        \operatorname{En}(\cdot)
       </annotation>
      </semantics>
     </math>
     , further dictates the characteristics of the ensemble PE method. For instance, when employing
     <math alttext="\operatorname{En}(\cdot)" class="ltx_Math" display="inline" id="S4.SS1.p4.2.m2.2">
      <semantics id="S4.SS1.p4.2.m2.2a">
       <mrow id="S4.SS1.p4.2.m2.2.3.2" xref="S4.SS1.p4.2.m2.2.3.1.cmml">
        <mi id="S4.SS1.p4.2.m2.1.1" xref="S4.SS1.p4.2.m2.1.1.cmml">
         En
        </mi>
        <mo id="S4.SS1.p4.2.m2.2.3.2a" xref="S4.SS1.p4.2.m2.2.3.1.cmml">
         ⁡
        </mo>
        <mrow id="S4.SS1.p4.2.m2.2.3.2.1" xref="S4.SS1.p4.2.m2.2.3.1.cmml">
         <mo id="S4.SS1.p4.2.m2.2.3.2.1.1" stretchy="false" xref="S4.SS1.p4.2.m2.2.3.1.cmml">
          (
         </mo>
         <mo id="S4.SS1.p4.2.m2.2.2" lspace="0em" rspace="0em" xref="S4.SS1.p4.2.m2.2.2.cmml">
          ⋅
         </mo>
         <mo id="S4.SS1.p4.2.m2.2.3.2.1.2" stretchy="false" xref="S4.SS1.p4.2.m2.2.3.1.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p4.2.m2.2b">
        <apply id="S4.SS1.p4.2.m2.2.3.1.cmml" xref="S4.SS1.p4.2.m2.2.3.2">
         <ci id="S4.SS1.p4.2.m2.1.1.cmml" xref="S4.SS1.p4.2.m2.1.1">
          En
         </ci>
         <ci id="S4.SS1.p4.2.m2.2.2.cmml" xref="S4.SS1.p4.2.m2.2.2">
          ⋅
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p4.2.m2.2c">
        \operatorname{En}(\cdot)
       </annotation>
      </semantics>
     </math>
     as a majority-voting scheme, the method of Self-Consistency CoT
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib37" title="">
       37
      </a>
      ]
     </cite>
     is naturally encapsulated. Conversely, Complexity-CoT
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib38" title="">
       38
      </a>
      ]
     </cite>
     arises when
     <math alttext="\operatorname{En}(\cdot)" class="ltx_Math" display="inline" id="S4.SS1.p4.3.m3.2">
      <semantics id="S4.SS1.p4.3.m3.2a">
       <mrow id="S4.SS1.p4.3.m3.2.3.2" xref="S4.SS1.p4.3.m3.2.3.1.cmml">
        <mi id="S4.SS1.p4.3.m3.1.1" xref="S4.SS1.p4.3.m3.1.1.cmml">
         En
        </mi>
        <mo id="S4.SS1.p4.3.m3.2.3.2a" xref="S4.SS1.p4.3.m3.2.3.1.cmml">
         ⁡
        </mo>
        <mrow id="S4.SS1.p4.3.m3.2.3.2.1" xref="S4.SS1.p4.3.m3.2.3.1.cmml">
         <mo id="S4.SS1.p4.3.m3.2.3.2.1.1" stretchy="false" xref="S4.SS1.p4.3.m3.2.3.1.cmml">
          (
         </mo>
         <mo id="S4.SS1.p4.3.m3.2.2" lspace="0em" rspace="0em" xref="S4.SS1.p4.3.m3.2.2.cmml">
          ⋅
         </mo>
         <mo id="S4.SS1.p4.3.m3.2.3.2.1.2" stretchy="false" xref="S4.SS1.p4.3.m3.2.3.1.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p4.3.m3.2b">
        <apply id="S4.SS1.p4.3.m3.2.3.1.cmml" xref="S4.SS1.p4.3.m3.2.3.2">
         <ci id="S4.SS1.p4.3.m3.1.1.cmml" xref="S4.SS1.p4.3.m3.1.1">
          En
         </ci>
         <ci id="S4.SS1.p4.3.m3.2.2.cmml" xref="S4.SS1.p4.3.m3.2.2">
          ⋅
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p4.3.m3.2c">
        \operatorname{En}(\cdot)
       </annotation>
      </semantics>
     </math>
     is implemented as a complexity threshold.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS1.p5">
    <p class="ltx_p" id="S4.SS1.p5.3">
     An alternative avenue for ensemble construction involves the introduction of nuanced variations in the prompts across different trials. For instance, Mutual Information
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib40" title="">
       40
      </a>
      ]
     </cite>
     uses disparate prompt templates to generate different
     <math alttext="\{z^{p}_{i}\}" class="ltx_Math" display="inline" id="S4.SS1.p5.1.m1.1">
      <semantics id="S4.SS1.p5.1.m1.1a">
       <mrow id="S4.SS1.p5.1.m1.1.1.1" xref="S4.SS1.p5.1.m1.1.1.2.cmml">
        <mo id="S4.SS1.p5.1.m1.1.1.1.2" stretchy="false" xref="S4.SS1.p5.1.m1.1.1.2.cmml">
         {
        </mo>
        <msubsup id="S4.SS1.p5.1.m1.1.1.1.1" xref="S4.SS1.p5.1.m1.1.1.1.1.cmml">
         <mi id="S4.SS1.p5.1.m1.1.1.1.1.2.2" xref="S4.SS1.p5.1.m1.1.1.1.1.2.2.cmml">
          z
         </mi>
         <mi id="S4.SS1.p5.1.m1.1.1.1.1.3" xref="S4.SS1.p5.1.m1.1.1.1.1.3.cmml">
          i
         </mi>
         <mi id="S4.SS1.p5.1.m1.1.1.1.1.2.3" xref="S4.SS1.p5.1.m1.1.1.1.1.2.3.cmml">
          p
         </mi>
        </msubsup>
        <mo id="S4.SS1.p5.1.m1.1.1.1.3" stretchy="false" xref="S4.SS1.p5.1.m1.1.1.2.cmml">
         }
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p5.1.m1.1b">
        <set id="S4.SS1.p5.1.m1.1.1.2.cmml" xref="S4.SS1.p5.1.m1.1.1.1">
         <apply id="S4.SS1.p5.1.m1.1.1.1.1.cmml" xref="S4.SS1.p5.1.m1.1.1.1.1">
          <csymbol cd="ambiguous" id="S4.SS1.p5.1.m1.1.1.1.1.1.cmml" xref="S4.SS1.p5.1.m1.1.1.1.1">
           subscript
          </csymbol>
          <apply id="S4.SS1.p5.1.m1.1.1.1.1.2.cmml" xref="S4.SS1.p5.1.m1.1.1.1.1">
           <csymbol cd="ambiguous" id="S4.SS1.p5.1.m1.1.1.1.1.2.1.cmml" xref="S4.SS1.p5.1.m1.1.1.1.1">
            superscript
           </csymbol>
           <ci id="S4.SS1.p5.1.m1.1.1.1.1.2.2.cmml" xref="S4.SS1.p5.1.m1.1.1.1.1.2.2">
            𝑧
           </ci>
           <ci id="S4.SS1.p5.1.m1.1.1.1.1.2.3.cmml" xref="S4.SS1.p5.1.m1.1.1.1.1.2.3">
            𝑝
           </ci>
          </apply>
          <ci id="S4.SS1.p5.1.m1.1.1.1.1.3.cmml" xref="S4.SS1.p5.1.m1.1.1.1.1.3">
           𝑖
          </ci>
         </apply>
        </set>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p5.1.m1.1c">
        \{z^{p}_{i}\}
       </annotation>
      </semantics>
     </math>
     . MathPrompter
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib41" title="">
       41
      </a>
      ]
     </cite>
     , on the other hand, deploys two different classes of prompts (algebraic and Python prompts) to prompt the LLM. Further extending this notion, Step-Aware Verifier
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib39" title="">
       39
      </a>
      ]
     </cite>
     recommends querying a single LLM with
     <math alttext="M_{1}" class="ltx_Math" display="inline" id="S4.SS1.p5.2.m2.1">
      <semantics id="S4.SS1.p5.2.m2.1a">
       <msub id="S4.SS1.p5.2.m2.1.1" xref="S4.SS1.p5.2.m2.1.1.cmml">
        <mi id="S4.SS1.p5.2.m2.1.1.2" xref="S4.SS1.p5.2.m2.1.1.2.cmml">
         M
        </mi>
        <mn id="S4.SS1.p5.2.m2.1.1.3" xref="S4.SS1.p5.2.m2.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p5.2.m2.1b">
        <apply id="S4.SS1.p5.2.m2.1.1.cmml" xref="S4.SS1.p5.2.m2.1.1">
         <csymbol cd="ambiguous" id="S4.SS1.p5.2.m2.1.1.1.cmml" xref="S4.SS1.p5.2.m2.1.1">
          subscript
         </csymbol>
         <ci id="S4.SS1.p5.2.m2.1.1.2.cmml" xref="S4.SS1.p5.2.m2.1.1.2">
          𝑀
         </ci>
         <cn id="S4.SS1.p5.2.m2.1.1.3.cmml" type="integer" xref="S4.SS1.p5.2.m2.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p5.2.m2.1c">
        M_{1}
       </annotation>
      </semantics>
     </math>
     distinct (types of) prompts, each replicated
     <math alttext="M_{2}" class="ltx_Math" display="inline" id="S4.SS1.p5.3.m3.1">
      <semantics id="S4.SS1.p5.3.m3.1a">
       <msub id="S4.SS1.p5.3.m3.1.1" xref="S4.SS1.p5.3.m3.1.1.cmml">
        <mi id="S4.SS1.p5.3.m3.1.1.2" xref="S4.SS1.p5.3.m3.1.1.2.cmml">
         M
        </mi>
        <mn id="S4.SS1.p5.3.m3.1.1.3" xref="S4.SS1.p5.3.m3.1.1.3.cmml">
         2
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p5.3.m3.1b">
        <apply id="S4.SS1.p5.3.m3.1.1.cmml" xref="S4.SS1.p5.3.m3.1.1">
         <csymbol cd="ambiguous" id="S4.SS1.p5.3.m3.1.1.1.cmml" xref="S4.SS1.p5.3.m3.1.1">
          subscript
         </csymbol>
         <ci id="S4.SS1.p5.3.m3.1.1.2.cmml" xref="S4.SS1.p5.3.m3.1.1.2">
          𝑀
         </ci>
         <cn id="S4.SS1.p5.3.m3.1.1.3.cmml" type="integer" xref="S4.SS1.p5.3.m3.1.1.3">
          2
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p5.3.m3.1c">
        M_{2}
       </annotation>
      </semantics>
     </math>
     times, thereby offering a generalized methodology that could be viewed as an extension of MathPrompter’s approach. Empirical validation corroborates the effectiveness of these ensemble PE methodologies.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS1.p6">
    <p class="ltx_p" id="S4.SS1.p6.1">
     The inherent stochasticity of LLMs is sometime perceived as a drawback, particularly in applications where deterministic outputs are traditionally sought. However, ensemble PE methods compellingly illustrate that this stochastic nature can be exploited to advantageous ends. By introducing ensemble methods into the optimal control framework for PE, we can harness this stochasticity to improve performance, rather than treating it as an impediment.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS1.p7">
    <p class="ltx_p" id="S4.SS1.p7.1">
     One direction for future work is to extend the framework to include the function
     <math alttext="\operatorname{En}(\cdot)" class="ltx_Math" display="inline" id="S4.SS1.p7.1.m1.2">
      <semantics id="S4.SS1.p7.1.m1.2a">
       <mrow id="S4.SS1.p7.1.m1.2.3.2" xref="S4.SS1.p7.1.m1.2.3.1.cmml">
        <mi id="S4.SS1.p7.1.m1.1.1" xref="S4.SS1.p7.1.m1.1.1.cmml">
         En
        </mi>
        <mo id="S4.SS1.p7.1.m1.2.3.2a" xref="S4.SS1.p7.1.m1.2.3.1.cmml">
         ⁡
        </mo>
        <mrow id="S4.SS1.p7.1.m1.2.3.2.1" xref="S4.SS1.p7.1.m1.2.3.1.cmml">
         <mo id="S4.SS1.p7.1.m1.2.3.2.1.1" stretchy="false" xref="S4.SS1.p7.1.m1.2.3.1.cmml">
          (
         </mo>
         <mo id="S4.SS1.p7.1.m1.2.2" lspace="0em" rspace="0em" xref="S4.SS1.p7.1.m1.2.2.cmml">
          ⋅
         </mo>
         <mo id="S4.SS1.p7.1.m1.2.3.2.1.2" stretchy="false" xref="S4.SS1.p7.1.m1.2.3.1.cmml">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p7.1.m1.2b">
        <apply id="S4.SS1.p7.1.m1.2.3.1.cmml" xref="S4.SS1.p7.1.m1.2.3.2">
         <ci id="S4.SS1.p7.1.m1.1.1.cmml" xref="S4.SS1.p7.1.m1.1.1">
          En
         </ci>
         <ci id="S4.SS1.p7.1.m1.2.2.cmml" xref="S4.SS1.p7.1.m1.2.2">
          ⋅
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p7.1.m1.2c">
        \operatorname{En}(\cdot)
       </annotation>
      </semantics>
     </math>
     as an explicit control variable. By doing so, the framework could offer a systematic way to optimize ensemble strategies for specific LLMs and tasks. Whether the optimal strategy employs majority voting, complexity thresholds, or more nuanced mechanisms could be determined within this formalism, providing a unified metric for evaluation. Additionally, the optimal control framework supports adaptive selection of the ensemble strategy based on observed performance along with each additional query, allowing real-time fine-tuning of ensemble methods.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S4.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.2
    </span>
    Prompt Engineering via Multi-Agent Collaboration
   </h3>
   <div class="ltx_para" id="S4.SS2.p1">
    <p class="ltx_p" id="S4.SS2.p1.1">
     In the context of LLMs, multi-agent systems refer to a collection of interactive agents that work collaboratively to achieve a collective objective. An "agent" in this context is defined as an LLM operating under a given initial instruction. Different initial instructions yield distinct agents, which can display considerable heterogeneity in their behavior and capabilities. Each agent is responsible for generating prompts to facilitate interactions with each other.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS2.p2">
    <p class="ltx_p" id="S4.SS2.p2.8">
     We extend our terminology to accommodate the intricacies of multi-agent PE. Denote
     <math alttext="i\in I" class="ltx_Math" display="inline" id="S4.SS2.p2.1.m1.1">
      <semantics id="S4.SS2.p2.1.m1.1a">
       <mrow id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml">
        <mi id="S4.SS2.p2.1.m1.1.1.2" xref="S4.SS2.p2.1.m1.1.1.2.cmml">
         i
        </mi>
        <mo id="S4.SS2.p2.1.m1.1.1.1" xref="S4.SS2.p2.1.m1.1.1.1.cmml">
         ∈
        </mo>
        <mi id="S4.SS2.p2.1.m1.1.1.3" xref="S4.SS2.p2.1.m1.1.1.3.cmml">
         I
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.1b">
        <apply id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1">
         <in id="S4.SS2.p2.1.m1.1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1.1">
         </in>
         <ci id="S4.SS2.p2.1.m1.1.1.2.cmml" xref="S4.SS2.p2.1.m1.1.1.2">
          𝑖
         </ci>
         <ci id="S4.SS2.p2.1.m1.1.1.3.cmml" xref="S4.SS2.p2.1.m1.1.1.3">
          𝐼
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.1c">
        i\in I
       </annotation>
      </semantics>
     </math>
     as the index for LLM-based agents. Then the prompt candidate sets are designated as
     <math alttext="\mathcal{P}_{(i,t)}" class="ltx_Math" display="inline" id="S4.SS2.p2.2.m2.2">
      <semantics id="S4.SS2.p2.2.m2.2a">
       <msub id="S4.SS2.p2.2.m2.2.3" xref="S4.SS2.p2.2.m2.2.3.cmml">
        <mi class="ltx_font_mathcaligraphic" id="S4.SS2.p2.2.m2.2.3.2" xref="S4.SS2.p2.2.m2.2.3.2.cmml">
         𝒫
        </mi>
        <mrow id="S4.SS2.p2.2.m2.2.2.2.4" xref="S4.SS2.p2.2.m2.2.2.2.3.cmml">
         <mo id="S4.SS2.p2.2.m2.2.2.2.4.1" stretchy="false" xref="S4.SS2.p2.2.m2.2.2.2.3.cmml">
          (
         </mo>
         <mi id="S4.SS2.p2.2.m2.1.1.1.1" xref="S4.SS2.p2.2.m2.1.1.1.1.cmml">
          i
         </mi>
         <mo id="S4.SS2.p2.2.m2.2.2.2.4.2" xref="S4.SS2.p2.2.m2.2.2.2.3.cmml">
          ,
         </mo>
         <mi id="S4.SS2.p2.2.m2.2.2.2.2" xref="S4.SS2.p2.2.m2.2.2.2.2.cmml">
          t
         </mi>
         <mo id="S4.SS2.p2.2.m2.2.2.2.4.3" stretchy="false" xref="S4.SS2.p2.2.m2.2.2.2.3.cmml">
          )
         </mo>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p2.2.m2.2b">
        <apply id="S4.SS2.p2.2.m2.2.3.cmml" xref="S4.SS2.p2.2.m2.2.3">
         <csymbol cd="ambiguous" id="S4.SS2.p2.2.m2.2.3.1.cmml" xref="S4.SS2.p2.2.m2.2.3">
          subscript
         </csymbol>
         <ci id="S4.SS2.p2.2.m2.2.3.2.cmml" xref="S4.SS2.p2.2.m2.2.3.2">
          𝒫
         </ci>
         <interval closure="open" id="S4.SS2.p2.2.m2.2.2.2.3.cmml" xref="S4.SS2.p2.2.m2.2.2.2.4">
          <ci id="S4.SS2.p2.2.m2.1.1.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1.1.1">
           𝑖
          </ci>
          <ci id="S4.SS2.p2.2.m2.2.2.2.2.cmml" xref="S4.SS2.p2.2.m2.2.2.2.2">
           𝑡
          </ci>
         </interval>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p2.2.m2.2c">
        \mathcal{P}_{(i,t)}
       </annotation>
      </semantics>
     </math>
     , the prompt for the
     <math alttext="i" class="ltx_Math" display="inline" id="S4.SS2.p2.3.m3.1">
      <semantics id="S4.SS2.p2.3.m3.1a">
       <mi id="S4.SS2.p2.3.m3.1.1" xref="S4.SS2.p2.3.m3.1.1.cmml">
        i
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p2.3.m3.1b">
        <ci id="S4.SS2.p2.3.m3.1.1.cmml" xref="S4.SS2.p2.3.m3.1.1">
         𝑖
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p2.3.m3.1c">
        i
       </annotation>
      </semantics>
     </math>
     -th agent at time-step
     <math alttext="t" class="ltx_Math" display="inline" id="S4.SS2.p2.4.m4.1">
      <semantics id="S4.SS2.p2.4.m4.1a">
       <mi id="S4.SS2.p2.4.m4.1.1" xref="S4.SS2.p2.4.m4.1.1.cmml">
        t
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p2.4.m4.1b">
        <ci id="S4.SS2.p2.4.m4.1.1.cmml" xref="S4.SS2.p2.4.m4.1.1">
         𝑡
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p2.4.m4.1c">
        t
       </annotation>
      </semantics>
     </math>
     is denoted as
     <math alttext="z_{(i,t)}^{p}" class="ltx_Math" display="inline" id="S4.SS2.p2.5.m5.2">
      <semantics id="S4.SS2.p2.5.m5.2a">
       <msubsup id="S4.SS2.p2.5.m5.2.3" xref="S4.SS2.p2.5.m5.2.3.cmml">
        <mi id="S4.SS2.p2.5.m5.2.3.2.2" xref="S4.SS2.p2.5.m5.2.3.2.2.cmml">
         z
        </mi>
        <mrow id="S4.SS2.p2.5.m5.2.2.2.4" xref="S4.SS2.p2.5.m5.2.2.2.3.cmml">
         <mo id="S4.SS2.p2.5.m5.2.2.2.4.1" stretchy="false" xref="S4.SS2.p2.5.m5.2.2.2.3.cmml">
          (
         </mo>
         <mi id="S4.SS2.p2.5.m5.1.1.1.1" xref="S4.SS2.p2.5.m5.1.1.1.1.cmml">
          i
         </mi>
         <mo id="S4.SS2.p2.5.m5.2.2.2.4.2" xref="S4.SS2.p2.5.m5.2.2.2.3.cmml">
          ,
         </mo>
         <mi id="S4.SS2.p2.5.m5.2.2.2.2" xref="S4.SS2.p2.5.m5.2.2.2.2.cmml">
          t
         </mi>
         <mo id="S4.SS2.p2.5.m5.2.2.2.4.3" stretchy="false" xref="S4.SS2.p2.5.m5.2.2.2.3.cmml">
          )
         </mo>
        </mrow>
        <mi id="S4.SS2.p2.5.m5.2.3.3" xref="S4.SS2.p2.5.m5.2.3.3.cmml">
         p
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p2.5.m5.2b">
        <apply id="S4.SS2.p2.5.m5.2.3.cmml" xref="S4.SS2.p2.5.m5.2.3">
         <csymbol cd="ambiguous" id="S4.SS2.p2.5.m5.2.3.1.cmml" xref="S4.SS2.p2.5.m5.2.3">
          superscript
         </csymbol>
         <apply id="S4.SS2.p2.5.m5.2.3.2.cmml" xref="S4.SS2.p2.5.m5.2.3">
          <csymbol cd="ambiguous" id="S4.SS2.p2.5.m5.2.3.2.1.cmml" xref="S4.SS2.p2.5.m5.2.3">
           subscript
          </csymbol>
          <ci id="S4.SS2.p2.5.m5.2.3.2.2.cmml" xref="S4.SS2.p2.5.m5.2.3.2.2">
           𝑧
          </ci>
          <interval closure="open" id="S4.SS2.p2.5.m5.2.2.2.3.cmml" xref="S4.SS2.p2.5.m5.2.2.2.4">
           <ci id="S4.SS2.p2.5.m5.1.1.1.1.cmml" xref="S4.SS2.p2.5.m5.1.1.1.1">
            𝑖
           </ci>
           <ci id="S4.SS2.p2.5.m5.2.2.2.2.cmml" xref="S4.SS2.p2.5.m5.2.2.2.2">
            𝑡
           </ci>
          </interval>
         </apply>
         <ci id="S4.SS2.p2.5.m5.2.3.3.cmml" xref="S4.SS2.p2.5.m5.2.3.3">
          𝑝
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p2.5.m5.2c">
        z_{(i,t)}^{p}
       </annotation>
      </semantics>
     </math>
     , and the corresponding response is
     <math alttext="z_{(i,t)}^{r}" class="ltx_Math" display="inline" id="S4.SS2.p2.6.m6.2">
      <semantics id="S4.SS2.p2.6.m6.2a">
       <msubsup id="S4.SS2.p2.6.m6.2.3" xref="S4.SS2.p2.6.m6.2.3.cmml">
        <mi id="S4.SS2.p2.6.m6.2.3.2.2" xref="S4.SS2.p2.6.m6.2.3.2.2.cmml">
         z
        </mi>
        <mrow id="S4.SS2.p2.6.m6.2.2.2.4" xref="S4.SS2.p2.6.m6.2.2.2.3.cmml">
         <mo id="S4.SS2.p2.6.m6.2.2.2.4.1" stretchy="false" xref="S4.SS2.p2.6.m6.2.2.2.3.cmml">
          (
         </mo>
         <mi id="S4.SS2.p2.6.m6.1.1.1.1" xref="S4.SS2.p2.6.m6.1.1.1.1.cmml">
          i
         </mi>
         <mo id="S4.SS2.p2.6.m6.2.2.2.4.2" xref="S4.SS2.p2.6.m6.2.2.2.3.cmml">
          ,
         </mo>
         <mi id="S4.SS2.p2.6.m6.2.2.2.2" xref="S4.SS2.p2.6.m6.2.2.2.2.cmml">
          t
         </mi>
         <mo id="S4.SS2.p2.6.m6.2.2.2.4.3" stretchy="false" xref="S4.SS2.p2.6.m6.2.2.2.3.cmml">
          )
         </mo>
        </mrow>
        <mi id="S4.SS2.p2.6.m6.2.3.3" xref="S4.SS2.p2.6.m6.2.3.3.cmml">
         r
        </mi>
       </msubsup>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p2.6.m6.2b">
        <apply id="S4.SS2.p2.6.m6.2.3.cmml" xref="S4.SS2.p2.6.m6.2.3">
         <csymbol cd="ambiguous" id="S4.SS2.p2.6.m6.2.3.1.cmml" xref="S4.SS2.p2.6.m6.2.3">
          superscript
         </csymbol>
         <apply id="S4.SS2.p2.6.m6.2.3.2.cmml" xref="S4.SS2.p2.6.m6.2.3">
          <csymbol cd="ambiguous" id="S4.SS2.p2.6.m6.2.3.2.1.cmml" xref="S4.SS2.p2.6.m6.2.3">
           subscript
          </csymbol>
          <ci id="S4.SS2.p2.6.m6.2.3.2.2.cmml" xref="S4.SS2.p2.6.m6.2.3.2.2">
           𝑧
          </ci>
          <interval closure="open" id="S4.SS2.p2.6.m6.2.2.2.3.cmml" xref="S4.SS2.p2.6.m6.2.2.2.4">
           <ci id="S4.SS2.p2.6.m6.1.1.1.1.cmml" xref="S4.SS2.p2.6.m6.1.1.1.1">
            𝑖
           </ci>
           <ci id="S4.SS2.p2.6.m6.2.2.2.2.cmml" xref="S4.SS2.p2.6.m6.2.2.2.2">
            𝑡
           </ci>
          </interval>
         </apply>
         <ci id="S4.SS2.p2.6.m6.2.3.3.cmml" xref="S4.SS2.p2.6.m6.2.3.3">
          𝑟
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p2.6.m6.2c">
        z_{(i,t)}^{r}
       </annotation>
      </semantics>
     </math>
     . Here we extend the optimization target
     <math alttext="f" class="ltx_Math" display="inline" id="S4.SS2.p2.7.m7.1">
      <semantics id="S4.SS2.p2.7.m7.1a">
       <mi id="S4.SS2.p2.7.m7.1.1" xref="S4.SS2.p2.7.m7.1.1.cmml">
        f
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p2.7.m7.1b">
        <ci id="S4.SS2.p2.7.m7.1.1.cmml" xref="S4.SS2.p2.7.m7.1.1">
         𝑓
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p2.7.m7.1c">
        f
       </annotation>
      </semantics>
     </math>
     to
     <math alttext="f_{i}" class="ltx_Math" display="inline" id="S4.SS2.p2.8.m8.1">
      <semantics id="S4.SS2.p2.8.m8.1a">
       <msub id="S4.SS2.p2.8.m8.1.1" xref="S4.SS2.p2.8.m8.1.1.cmml">
        <mi id="S4.SS2.p2.8.m8.1.1.2" xref="S4.SS2.p2.8.m8.1.1.2.cmml">
         f
        </mi>
        <mi id="S4.SS2.p2.8.m8.1.1.3" xref="S4.SS2.p2.8.m8.1.1.3.cmml">
         i
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p2.8.m8.1b">
        <apply id="S4.SS2.p2.8.m8.1.1.cmml" xref="S4.SS2.p2.8.m8.1.1">
         <csymbol cd="ambiguous" id="S4.SS2.p2.8.m8.1.1.1.cmml" xref="S4.SS2.p2.8.m8.1.1">
          subscript
         </csymbol>
         <ci id="S4.SS2.p2.8.m8.1.1.2.cmml" xref="S4.SS2.p2.8.m8.1.1.2">
          𝑓
         </ci>
         <ci id="S4.SS2.p2.8.m8.1.1.3.cmml" xref="S4.SS2.p2.8.m8.1.1.3">
          𝑖
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p2.8.m8.1c">
        f_{i}
       </annotation>
      </semantics>
     </math>
     as well to evaluate the PE quality for each corresponding agent.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS2.p3">
    <p class="ltx_p" id="S4.SS2.p3.1">
     The extended framework for the multi-agent PE is given as follows
    </p>
    <table class="ltx_equationgroup ltx_eqn_table" id="S4.E3">
     <tbody>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S4.E3X">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_td ltx_align_right ltx_eqn_cell">
        <math alttext="\displaystyle\max_{\{\tau_{i}\}}" class="ltx_Math" display="inline" id="S4.E3X.2.1.1.m1.1">
         <semantics id="S4.E3X.2.1.1.m1.1a">
          <munder id="S4.E3X.2.1.1.m1.1.2" xref="S4.E3X.2.1.1.m1.1.2.cmml">
           <mi id="S4.E3X.2.1.1.m1.1.2.2" xref="S4.E3X.2.1.1.m1.1.2.2.cmml">
            max
           </mi>
           <mrow id="S4.E3X.2.1.1.m1.1.1.1.1" xref="S4.E3X.2.1.1.m1.1.1.1.2.cmml">
            <mo id="S4.E3X.2.1.1.m1.1.1.1.1.2" stretchy="false" xref="S4.E3X.2.1.1.m1.1.1.1.2.cmml">
             {
            </mo>
            <msub id="S4.E3X.2.1.1.m1.1.1.1.1.1" xref="S4.E3X.2.1.1.m1.1.1.1.1.1.cmml">
             <mi id="S4.E3X.2.1.1.m1.1.1.1.1.1.2" xref="S4.E3X.2.1.1.m1.1.1.1.1.1.2.cmml">
              τ
             </mi>
             <mi id="S4.E3X.2.1.1.m1.1.1.1.1.1.3" xref="S4.E3X.2.1.1.m1.1.1.1.1.1.3.cmml">
              i
             </mi>
            </msub>
            <mo id="S4.E3X.2.1.1.m1.1.1.1.1.3" stretchy="false" xref="S4.E3X.2.1.1.m1.1.1.1.2.cmml">
             }
            </mo>
           </mrow>
          </munder>
          <annotation-xml encoding="MathML-Content" id="S4.E3X.2.1.1.m1.1b">
           <apply id="S4.E3X.2.1.1.m1.1.2.cmml" xref="S4.E3X.2.1.1.m1.1.2">
            <csymbol cd="ambiguous" id="S4.E3X.2.1.1.m1.1.2.1.cmml" xref="S4.E3X.2.1.1.m1.1.2">
             subscript
            </csymbol>
            <max id="S4.E3X.2.1.1.m1.1.2.2.cmml" xref="S4.E3X.2.1.1.m1.1.2.2">
            </max>
            <set id="S4.E3X.2.1.1.m1.1.1.1.2.cmml" xref="S4.E3X.2.1.1.m1.1.1.1.1">
             <apply id="S4.E3X.2.1.1.m1.1.1.1.1.1.cmml" xref="S4.E3X.2.1.1.m1.1.1.1.1.1">
              <csymbol cd="ambiguous" id="S4.E3X.2.1.1.m1.1.1.1.1.1.1.cmml" xref="S4.E3X.2.1.1.m1.1.1.1.1.1">
               subscript
              </csymbol>
              <ci id="S4.E3X.2.1.1.m1.1.1.1.1.1.2.cmml" xref="S4.E3X.2.1.1.m1.1.1.1.1.1.2">
               𝜏
              </ci>
              <ci id="S4.E3X.2.1.1.m1.1.1.1.1.1.3.cmml" xref="S4.E3X.2.1.1.m1.1.1.1.1.1.3">
               𝑖
              </ci>
             </apply>
            </set>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.E3X.2.1.1.m1.1c">
           \displaystyle\max_{\{\tau_{i}\}}
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_td ltx_align_left ltx_eqn_cell">
        <math alttext="\displaystyle\ \ \max_{\left\{z_{(i,t)}^{p}\in\mathcal{P}_{(i,t)}\right\}}\ \ \sum_{i\in I}f_{i}(z_{(i,\tau_{i})}^{r};z_{i}^{q})" class="ltx_Math" display="inline" id="S4.E3X.3.2.2.m1.9">
         <semantics id="S4.E3X.3.2.2.m1.9a">
          <mrow id="S4.E3X.3.2.2.m1.9.9.2" xref="S4.E3X.3.2.2.m1.9.9.3.cmml">
           <munder id="S4.E3X.3.2.2.m1.8.8.1.1" xref="S4.E3X.3.2.2.m1.8.8.1.1.cmml">
            <mi id="S4.E3X.3.2.2.m1.8.8.1.1.2" xref="S4.E3X.3.2.2.m1.8.8.1.1.2.cmml">
             max
            </mi>
            <mrow id="S4.E3X.3.2.2.m1.5.5.5.5" xref="S4.E3X.3.2.2.m1.5.5.5.6.cmml">
             <mo id="S4.E3X.3.2.2.m1.5.5.5.5.2" xref="S4.E3X.3.2.2.m1.5.5.5.6.cmml">
              {
             </mo>
             <mrow id="S4.E3X.3.2.2.m1.5.5.5.5.1" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.cmml">
              <msubsup id="S4.E3X.3.2.2.m1.5.5.5.5.1.2" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2.cmml">
               <mi id="S4.E3X.3.2.2.m1.5.5.5.5.1.2.2.2" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2.2.2.cmml">
                z
               </mi>
               <mrow id="S4.E3X.3.2.2.m1.2.2.2.2.2.4" xref="S4.E3X.3.2.2.m1.2.2.2.2.2.3.cmml">
                <mo id="S4.E3X.3.2.2.m1.2.2.2.2.2.4.1" stretchy="false" xref="S4.E3X.3.2.2.m1.2.2.2.2.2.3.cmml">
                 (
                </mo>
                <mi id="S4.E3X.3.2.2.m1.1.1.1.1.1.1" xref="S4.E3X.3.2.2.m1.1.1.1.1.1.1.cmml">
                 i
                </mi>
                <mo id="S4.E3X.3.2.2.m1.2.2.2.2.2.4.2" xref="S4.E3X.3.2.2.m1.2.2.2.2.2.3.cmml">
                 ,
                </mo>
                <mi id="S4.E3X.3.2.2.m1.2.2.2.2.2.2" xref="S4.E3X.3.2.2.m1.2.2.2.2.2.2.cmml">
                 t
                </mi>
                <mo id="S4.E3X.3.2.2.m1.2.2.2.2.2.4.3" stretchy="false" xref="S4.E3X.3.2.2.m1.2.2.2.2.2.3.cmml">
                 )
                </mo>
               </mrow>
               <mi id="S4.E3X.3.2.2.m1.5.5.5.5.1.2.3" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2.3.cmml">
                p
               </mi>
              </msubsup>
              <mo id="S4.E3X.3.2.2.m1.5.5.5.5.1.1" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.1.cmml">
               ∈
              </mo>
              <msub id="S4.E3X.3.2.2.m1.5.5.5.5.1.3" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.3.cmml">
               <mi class="ltx_font_mathcaligraphic" id="S4.E3X.3.2.2.m1.5.5.5.5.1.3.2" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.3.2.cmml">
                𝒫
               </mi>
               <mrow id="S4.E3X.3.2.2.m1.4.4.4.4.2.4" xref="S4.E3X.3.2.2.m1.4.4.4.4.2.3.cmml">
                <mo id="S4.E3X.3.2.2.m1.4.4.4.4.2.4.1" stretchy="false" xref="S4.E3X.3.2.2.m1.4.4.4.4.2.3.cmml">
                 (
                </mo>
                <mi id="S4.E3X.3.2.2.m1.3.3.3.3.1.1" xref="S4.E3X.3.2.2.m1.3.3.3.3.1.1.cmml">
                 i
                </mi>
                <mo id="S4.E3X.3.2.2.m1.4.4.4.4.2.4.2" xref="S4.E3X.3.2.2.m1.4.4.4.4.2.3.cmml">
                 ,
                </mo>
                <mi id="S4.E3X.3.2.2.m1.4.4.4.4.2.2" xref="S4.E3X.3.2.2.m1.4.4.4.4.2.2.cmml">
                 t
                </mi>
                <mo id="S4.E3X.3.2.2.m1.4.4.4.4.2.4.3" stretchy="false" xref="S4.E3X.3.2.2.m1.4.4.4.4.2.3.cmml">
                 )
                </mo>
               </mrow>
              </msub>
             </mrow>
             <mo id="S4.E3X.3.2.2.m1.5.5.5.5.3" xref="S4.E3X.3.2.2.m1.5.5.5.6.cmml">
              }
             </mo>
            </mrow>
           </munder>
           <mspace id="S4.E3X.3.2.2.m1.9.9.2.3" width="1.167em" xref="S4.E3X.3.2.2.m1.9.9.3.cmml">
           </mspace>
           <mrow id="S4.E3X.3.2.2.m1.9.9.2.2" xref="S4.E3X.3.2.2.m1.9.9.2.2.cmml">
            <mstyle displaystyle="true" id="S4.E3X.3.2.2.m1.9.9.2.2.3" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.cmml">
             <munder id="S4.E3X.3.2.2.m1.9.9.2.2.3a" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.cmml">
              <mo id="S4.E3X.3.2.2.m1.9.9.2.2.3.2" movablelimits="false" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.2.cmml">
               ∑
              </mo>
              <mrow id="S4.E3X.3.2.2.m1.9.9.2.2.3.3" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.3.cmml">
               <mi id="S4.E3X.3.2.2.m1.9.9.2.2.3.3.2" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.3.2.cmml">
                i
               </mi>
               <mo id="S4.E3X.3.2.2.m1.9.9.2.2.3.3.1" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.3.1.cmml">
                ∈
               </mo>
               <mi id="S4.E3X.3.2.2.m1.9.9.2.2.3.3.3" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.3.3.cmml">
                I
               </mi>
              </mrow>
             </munder>
            </mstyle>
            <mrow id="S4.E3X.3.2.2.m1.9.9.2.2.2" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.cmml">
             <msub id="S4.E3X.3.2.2.m1.9.9.2.2.2.4" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.4.cmml">
              <mi id="S4.E3X.3.2.2.m1.9.9.2.2.2.4.2" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.4.2.cmml">
               f
              </mi>
              <mi id="S4.E3X.3.2.2.m1.9.9.2.2.2.4.3" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.4.3.cmml">
               i
              </mi>
             </msub>
             <mo id="S4.E3X.3.2.2.m1.9.9.2.2.2.3" lspace="0em" rspace="0em" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.3.cmml">
              ​
             </mo>
             <mrow id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.3.cmml">
              <mo id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.3" stretchy="false" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.3.cmml">
               (
              </mo>
              <msubsup id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.cmml">
               <mi id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.2.2" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.2.2.cmml">
                z
               </mi>
               <mrow id="S4.E3X.3.2.2.m1.7.7.2.2" xref="S4.E3X.3.2.2.m1.7.7.2.3.cmml">
                <mo id="S4.E3X.3.2.2.m1.7.7.2.2.2" stretchy="false" xref="S4.E3X.3.2.2.m1.7.7.2.3.cmml">
                 (
                </mo>
                <mi id="S4.E3X.3.2.2.m1.6.6.1.1" xref="S4.E3X.3.2.2.m1.6.6.1.1.cmml">
                 i
                </mi>
                <mo id="S4.E3X.3.2.2.m1.7.7.2.2.3" xref="S4.E3X.3.2.2.m1.7.7.2.3.cmml">
                 ,
                </mo>
                <msub id="S4.E3X.3.2.2.m1.7.7.2.2.1" xref="S4.E3X.3.2.2.m1.7.7.2.2.1.cmml">
                 <mi id="S4.E3X.3.2.2.m1.7.7.2.2.1.2" xref="S4.E3X.3.2.2.m1.7.7.2.2.1.2.cmml">
                  τ
                 </mi>
                 <mi id="S4.E3X.3.2.2.m1.7.7.2.2.1.3" xref="S4.E3X.3.2.2.m1.7.7.2.2.1.3.cmml">
                  i
                 </mi>
                </msub>
                <mo id="S4.E3X.3.2.2.m1.7.7.2.2.4" stretchy="false" xref="S4.E3X.3.2.2.m1.7.7.2.3.cmml">
                 )
                </mo>
               </mrow>
               <mi id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.3" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.3.cmml">
                r
               </mi>
              </msubsup>
              <mo id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.4" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.3.cmml">
               ;
              </mo>
              <msubsup id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.cmml">
               <mi id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.2" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.2.cmml">
                z
               </mi>
               <mi id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.3" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.3.cmml">
                i
               </mi>
               <mi id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.3" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.3.cmml">
                q
               </mi>
              </msubsup>
              <mo id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.5" stretchy="false" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.3.cmml">
               )
              </mo>
             </mrow>
            </mrow>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S4.E3X.3.2.2.m1.9b">
           <list id="S4.E3X.3.2.2.m1.9.9.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2">
            <apply id="S4.E3X.3.2.2.m1.8.8.1.1.cmml" xref="S4.E3X.3.2.2.m1.8.8.1.1">
             <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.8.8.1.1.1.cmml" xref="S4.E3X.3.2.2.m1.8.8.1.1">
              subscript
             </csymbol>
             <max id="S4.E3X.3.2.2.m1.8.8.1.1.2.cmml" xref="S4.E3X.3.2.2.m1.8.8.1.1.2">
             </max>
             <set id="S4.E3X.3.2.2.m1.5.5.5.6.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5">
              <apply id="S4.E3X.3.2.2.m1.5.5.5.5.1.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1">
               <in id="S4.E3X.3.2.2.m1.5.5.5.5.1.1.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.1">
               </in>
               <apply id="S4.E3X.3.2.2.m1.5.5.5.5.1.2.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2">
                <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.5.5.5.5.1.2.1.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2">
                 superscript
                </csymbol>
                <apply id="S4.E3X.3.2.2.m1.5.5.5.5.1.2.2.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2">
                 <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.5.5.5.5.1.2.2.1.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2">
                  subscript
                 </csymbol>
                 <ci id="S4.E3X.3.2.2.m1.5.5.5.5.1.2.2.2.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2.2.2">
                  𝑧
                 </ci>
                 <interval closure="open" id="S4.E3X.3.2.2.m1.2.2.2.2.2.3.cmml" xref="S4.E3X.3.2.2.m1.2.2.2.2.2.4">
                  <ci id="S4.E3X.3.2.2.m1.1.1.1.1.1.1.cmml" xref="S4.E3X.3.2.2.m1.1.1.1.1.1.1">
                   𝑖
                  </ci>
                  <ci id="S4.E3X.3.2.2.m1.2.2.2.2.2.2.cmml" xref="S4.E3X.3.2.2.m1.2.2.2.2.2.2">
                   𝑡
                  </ci>
                 </interval>
                </apply>
                <ci id="S4.E3X.3.2.2.m1.5.5.5.5.1.2.3.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.2.3">
                 𝑝
                </ci>
               </apply>
               <apply id="S4.E3X.3.2.2.m1.5.5.5.5.1.3.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.3">
                <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.5.5.5.5.1.3.1.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.3">
                 subscript
                </csymbol>
                <ci id="S4.E3X.3.2.2.m1.5.5.5.5.1.3.2.cmml" xref="S4.E3X.3.2.2.m1.5.5.5.5.1.3.2">
                 𝒫
                </ci>
                <interval closure="open" id="S4.E3X.3.2.2.m1.4.4.4.4.2.3.cmml" xref="S4.E3X.3.2.2.m1.4.4.4.4.2.4">
                 <ci id="S4.E3X.3.2.2.m1.3.3.3.3.1.1.cmml" xref="S4.E3X.3.2.2.m1.3.3.3.3.1.1">
                  𝑖
                 </ci>
                 <ci id="S4.E3X.3.2.2.m1.4.4.4.4.2.2.cmml" xref="S4.E3X.3.2.2.m1.4.4.4.4.2.2">
                  𝑡
                 </ci>
                </interval>
               </apply>
              </apply>
             </set>
            </apply>
            <apply id="S4.E3X.3.2.2.m1.9.9.2.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2">
             <apply id="S4.E3X.3.2.2.m1.9.9.2.2.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.3">
              <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.9.9.2.2.3.1.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.3">
               subscript
              </csymbol>
              <sum id="S4.E3X.3.2.2.m1.9.9.2.2.3.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.2">
              </sum>
              <apply id="S4.E3X.3.2.2.m1.9.9.2.2.3.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.3">
               <in id="S4.E3X.3.2.2.m1.9.9.2.2.3.3.1.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.3.1">
               </in>
               <ci id="S4.E3X.3.2.2.m1.9.9.2.2.3.3.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.3.2">
                𝑖
               </ci>
               <ci id="S4.E3X.3.2.2.m1.9.9.2.2.3.3.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.3.3.3">
                𝐼
               </ci>
              </apply>
             </apply>
             <apply id="S4.E3X.3.2.2.m1.9.9.2.2.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2">
              <times id="S4.E3X.3.2.2.m1.9.9.2.2.2.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.3">
              </times>
              <apply id="S4.E3X.3.2.2.m1.9.9.2.2.2.4.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.4">
               <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.9.9.2.2.2.4.1.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.4">
                subscript
               </csymbol>
               <ci id="S4.E3X.3.2.2.m1.9.9.2.2.2.4.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.4.2">
                𝑓
               </ci>
               <ci id="S4.E3X.3.2.2.m1.9.9.2.2.2.4.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.4.3">
                𝑖
               </ci>
              </apply>
              <list id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2">
               <apply id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1">
                <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.1.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1">
                 superscript
                </csymbol>
                <apply id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1">
                 <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.2.1.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1">
                  subscript
                 </csymbol>
                 <ci id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.2.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.2.2">
                  𝑧
                 </ci>
                 <interval closure="open" id="S4.E3X.3.2.2.m1.7.7.2.3.cmml" xref="S4.E3X.3.2.2.m1.7.7.2.2">
                  <ci id="S4.E3X.3.2.2.m1.6.6.1.1.cmml" xref="S4.E3X.3.2.2.m1.6.6.1.1">
                   𝑖
                  </ci>
                  <apply id="S4.E3X.3.2.2.m1.7.7.2.2.1.cmml" xref="S4.E3X.3.2.2.m1.7.7.2.2.1">
                   <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.7.7.2.2.1.1.cmml" xref="S4.E3X.3.2.2.m1.7.7.2.2.1">
                    subscript
                   </csymbol>
                   <ci id="S4.E3X.3.2.2.m1.7.7.2.2.1.2.cmml" xref="S4.E3X.3.2.2.m1.7.7.2.2.1.2">
                    𝜏
                   </ci>
                   <ci id="S4.E3X.3.2.2.m1.7.7.2.2.1.3.cmml" xref="S4.E3X.3.2.2.m1.7.7.2.2.1.3">
                    𝑖
                   </ci>
                  </apply>
                 </interval>
                </apply>
                <ci id="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.1.1.1.1.3">
                 𝑟
                </ci>
               </apply>
               <apply id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2">
                <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.1.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2">
                 superscript
                </csymbol>
                <apply id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2">
                 <csymbol cd="ambiguous" id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.1.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2">
                  subscript
                 </csymbol>
                 <ci id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.2.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.2">
                  𝑧
                 </ci>
                 <ci id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.2.3">
                  𝑖
                 </ci>
                </apply>
                <ci id="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.3.cmml" xref="S4.E3X.3.2.2.m1.9.9.2.2.2.2.2.2.3">
                 𝑞
                </ci>
               </apply>
              </list>
             </apply>
            </apply>
           </list>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.E3X.3.2.2.m1.9c">
           \displaystyle\ \ \max_{\left\{z_{(i,t)}^{p}\in\mathcal{P}_{(i,t)}\right\}}\ \ \sum_{i\in I}f_{i}(z_{(i,\tau_{i})}^{r};z_{i}^{q})
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
       <td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="2">
        <span class="ltx_tag ltx_tag_equationgroup ltx_align_right">
         (3)
        </span>
       </td>
      </tr>
      <tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S4.E3Xa">
       <td class="ltx_eqn_cell ltx_eqn_center_padleft">
       </td>
       <td class="ltx_td ltx_align_right ltx_eqn_cell">
        <span class="ltx_text ltx_markedasmath ltx_font_italic" id="S4.E3Xa.2.1.1.1">
         s.t.
        </span>
       </td>
       <td class="ltx_td ltx_align_left ltx_eqn_cell">
        <math alttext="\displaystyle\quad z_{(i,t)}^{r}=\operatorname{LLM}(z_{(i,t)}^{p}),\ i\in I." class="ltx_Math" display="inline" id="S4.E3Xa.3.2.2.m1.6">
         <semantics id="S4.E3Xa.3.2.2.m1.6a">
          <mrow id="S4.E3Xa.3.2.2.m1.6.6.1">
           <mrow id="S4.E3Xa.3.2.2.m1.6.6.1.1.2" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.3.cmml">
            <mrow id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.cmml">
             <msubsup id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.cmml">
              <mi id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.2.2" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.2.2.cmml">
               z
              </mi>
              <mrow id="S4.E3Xa.3.2.2.m1.2.2.2.4" xref="S4.E3Xa.3.2.2.m1.2.2.2.3.cmml">
               <mo id="S4.E3Xa.3.2.2.m1.2.2.2.4.1" stretchy="false" xref="S4.E3Xa.3.2.2.m1.2.2.2.3.cmml">
                (
               </mo>
               <mi id="S4.E3Xa.3.2.2.m1.1.1.1.1" xref="S4.E3Xa.3.2.2.m1.1.1.1.1.cmml">
                i
               </mi>
               <mo id="S4.E3Xa.3.2.2.m1.2.2.2.4.2" xref="S4.E3Xa.3.2.2.m1.2.2.2.3.cmml">
                ,
               </mo>
               <mi id="S4.E3Xa.3.2.2.m1.2.2.2.2" xref="S4.E3Xa.3.2.2.m1.2.2.2.2.cmml">
                t
               </mi>
               <mo id="S4.E3Xa.3.2.2.m1.2.2.2.4.3" stretchy="false" xref="S4.E3Xa.3.2.2.m1.2.2.2.3.cmml">
                )
               </mo>
              </mrow>
              <mi id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.3" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.3.cmml">
               r
              </mi>
             </msubsup>
             <mo id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.2" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.2.cmml">
              =
             </mo>
             <mrow id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.2.cmml">
              <mi id="S4.E3Xa.3.2.2.m1.5.5" xref="S4.E3Xa.3.2.2.m1.5.5.cmml">
               LLM
              </mi>
              <mo id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1a" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.2.cmml">
               ⁡
              </mo>
              <mrow id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.2.cmml">
               <mo id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.2" stretchy="false" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.2.cmml">
                (
               </mo>
               <msubsup id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.cmml">
                <mi id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.2.2" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.2.2.cmml">
                 z
                </mi>
                <mrow id="S4.E3Xa.3.2.2.m1.4.4.2.4" xref="S4.E3Xa.3.2.2.m1.4.4.2.3.cmml">
                 <mo id="S4.E3Xa.3.2.2.m1.4.4.2.4.1" stretchy="false" xref="S4.E3Xa.3.2.2.m1.4.4.2.3.cmml">
                  (
                 </mo>
                 <mi id="S4.E3Xa.3.2.2.m1.3.3.1.1" xref="S4.E3Xa.3.2.2.m1.3.3.1.1.cmml">
                  i
                 </mi>
                 <mo id="S4.E3Xa.3.2.2.m1.4.4.2.4.2" xref="S4.E3Xa.3.2.2.m1.4.4.2.3.cmml">
                  ,
                 </mo>
                 <mi id="S4.E3Xa.3.2.2.m1.4.4.2.2" xref="S4.E3Xa.3.2.2.m1.4.4.2.2.cmml">
                  t
                 </mi>
                 <mo id="S4.E3Xa.3.2.2.m1.4.4.2.4.3" stretchy="false" xref="S4.E3Xa.3.2.2.m1.4.4.2.3.cmml">
                  )
                 </mo>
                </mrow>
                <mi id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.3" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.3.cmml">
                 p
                </mi>
               </msubsup>
               <mo id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.3" stretchy="false" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.2.cmml">
                )
               </mo>
              </mrow>
             </mrow>
            </mrow>
            <mo id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.3" rspace="0.667em" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.3a.cmml">
             ,
            </mo>
            <mrow id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.cmml">
             <mi id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.2" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.2.cmml">
              i
             </mi>
             <mo id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.1" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.1.cmml">
              ∈
             </mo>
             <mi id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.3" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.3.cmml">
              I
             </mi>
            </mrow>
           </mrow>
           <mo id="S4.E3Xa.3.2.2.m1.6.6.1.2" lspace="0em">
            .
           </mo>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="S4.E3Xa.3.2.2.m1.6b">
           <apply id="S4.E3Xa.3.2.2.m1.6.6.1.1.3.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2">
            <csymbol cd="ambiguous" id="S4.E3Xa.3.2.2.m1.6.6.1.1.3a.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.3">
             formulae-sequence
            </csymbol>
            <apply id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1">
             <eq id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.2.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.2">
             </eq>
             <apply id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3">
              <csymbol cd="ambiguous" id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.1.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3">
               superscript
              </csymbol>
              <apply id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.2.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3">
               <csymbol cd="ambiguous" id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.2.1.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3">
                subscript
               </csymbol>
               <ci id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.2.2.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.2.2">
                𝑧
               </ci>
               <interval closure="open" id="S4.E3Xa.3.2.2.m1.2.2.2.3.cmml" xref="S4.E3Xa.3.2.2.m1.2.2.2.4">
                <ci id="S4.E3Xa.3.2.2.m1.1.1.1.1.cmml" xref="S4.E3Xa.3.2.2.m1.1.1.1.1">
                 𝑖
                </ci>
                <ci id="S4.E3Xa.3.2.2.m1.2.2.2.2.cmml" xref="S4.E3Xa.3.2.2.m1.2.2.2.2">
                 𝑡
                </ci>
               </interval>
              </apply>
              <ci id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.3.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.3.3">
               𝑟
              </ci>
             </apply>
             <apply id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.2.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1">
              <ci id="S4.E3Xa.3.2.2.m1.5.5.cmml" xref="S4.E3Xa.3.2.2.m1.5.5">
               LLM
              </ci>
              <apply id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1">
               <csymbol cd="ambiguous" id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1">
                superscript
               </csymbol>
               <apply id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1">
                <csymbol cd="ambiguous" id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.2.1.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1">
                 subscript
                </csymbol>
                <ci id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.2.2.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.2.2">
                 𝑧
                </ci>
                <interval closure="open" id="S4.E3Xa.3.2.2.m1.4.4.2.3.cmml" xref="S4.E3Xa.3.2.2.m1.4.4.2.4">
                 <ci id="S4.E3Xa.3.2.2.m1.3.3.1.1.cmml" xref="S4.E3Xa.3.2.2.m1.3.3.1.1">
                  𝑖
                 </ci>
                 <ci id="S4.E3Xa.3.2.2.m1.4.4.2.2.cmml" xref="S4.E3Xa.3.2.2.m1.4.4.2.2">
                  𝑡
                 </ci>
                </interval>
               </apply>
               <ci id="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.1.1.1.1.1.1.3">
                𝑝
               </ci>
              </apply>
             </apply>
            </apply>
            <apply id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2">
             <in id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.1.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.1">
             </in>
             <ci id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.2.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.2">
              𝑖
             </ci>
             <ci id="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.3.cmml" xref="S4.E3Xa.3.2.2.m1.6.6.1.1.2.2.3">
              𝐼
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="S4.E3Xa.3.2.2.m1.6c">
           \displaystyle\quad z_{(i,t)}^{r}=\operatorname{LLM}(z_{(i,t)}^{p}),\ i\in I.
          </annotation>
         </semantics>
        </math>
       </td>
       <td class="ltx_eqn_cell ltx_eqn_center_padright">
       </td>
      </tr>
     </tbody>
    </table>
   </div>
   <div class="ltx_para" id="S4.SS2.p4">
    <p class="ltx_p" id="S4.SS2.p4.2">
     The framework articulated by
     <math alttext="\eqref{def:PE_multi-agent}" class="ltx_Math" display="inline" id="S4.SS2.p4.1.m1.1">
      <semantics id="S4.SS2.p4.1.m1.1a">
       <mrow id="S4.SS2.p4.1.m1.1.1" xref="S4.SS2.p4.1.m1.1.1.cmml">
        <mi id="S4.SS2.p4.1.m1.1.1.2" xref="S4.SS2.p4.1.m1.1.1.2.cmml">
         (
        </mi>
        <mo id="S4.SS2.p4.1.m1.1.1.1" lspace="0em" rspace="0em" xref="S4.SS2.p4.1.m1.1.1.1.cmml">
         ​
        </mo>
        <mtext class="ltx_mathvariant_italic" id="S4.SS2.p4.1.m1.1.1.3" xref="S4.SS2.p4.1.m1.1.1.3c.cmml">
         <a class="ltx_ref ltx_font_italic" href="#S4.E3" title="In 4.2 Prompt Engineering via Multi-Agent Collaboration ‣ 4 Further Extensions ‣ Prompt Engineering Through the Lens of Optimal Control">
          <span class="ltx_text ltx_ref_tag">
           3
          </span>
         </a>
        </mtext>
        <mo id="S4.SS2.p4.1.m1.1.1.1a" lspace="0em" rspace="0em" xref="S4.SS2.p4.1.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="S4.SS2.p4.1.m1.1.1.4" xref="S4.SS2.p4.1.m1.1.1.4.cmml">
         )
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p4.1.m1.1b">
        <apply id="S4.SS2.p4.1.m1.1.1.cmml" xref="S4.SS2.p4.1.m1.1.1">
         <times id="S4.SS2.p4.1.m1.1.1.1.cmml" xref="S4.SS2.p4.1.m1.1.1.1">
         </times>
         <ci id="S4.SS2.p4.1.m1.1.1.2.cmml" xref="S4.SS2.p4.1.m1.1.1.2">
          italic-(
         </ci>
         <ci id="S4.SS2.p4.1.m1.1.1.3c.cmml" xref="S4.SS2.p4.1.m1.1.1.3">
          <mtext class="ltx_mathvariant_italic" id="S4.SS2.p4.1.m1.1.1.3.cmml" xref="S4.SS2.p4.1.m1.1.1.3">
           <a class="ltx_ref ltx_font_italic" href="#S4.E3" title="In 4.2 Prompt Engineering via Multi-Agent Collaboration ‣ 4 Further Extensions ‣ Prompt Engineering Through the Lens of Optimal Control">
            <span class="ltx_text ltx_ref_tag">
             3
            </span>
           </a>
          </mtext>
         </ci>
         <ci id="S4.SS2.p4.1.m1.1.1.4.cmml" xref="S4.SS2.p4.1.m1.1.1.4">
          italic-)
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p4.1.m1.1c">
        \eqref{def:PE_multi-agent}
       </annotation>
      </semantics>
     </math>
     can be used to describe a variety of multi-agent PE techniques, among which a predominant focus is the automated problem solvers, exemplified by task-specific applications like automated program development
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib42" title="">
       42
      </a>
      ]
     </cite>
     , or general problem solving with improved factuality and reasoning
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib43" title="">
       43
      </a>
      ]
     </cite>
     . In these systems, each agent can be meticulously designed with a well-defined role, articulated through their initial prompts. This enables a collaborative environment in which agents, each specializing in a particular aspect of the problem at hand, work collaboratively to achieve an efficient and effective task completion. In the realm of social simulations, multi-agent PE serves to model complex interactions like trading negotiations or role-playing scenarios
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib44" title="">
       44
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib45" title="">
       45
      </a>
      ]
     </cite>
     . Here, utility functions
     <math alttext="f_{i}" class="ltx_Math" display="inline" id="S4.SS2.p4.2.m2.1">
      <semantics id="S4.SS2.p4.2.m2.1a">
       <msub id="S4.SS2.p4.2.m2.1.1" xref="S4.SS2.p4.2.m2.1.1.cmml">
        <mi id="S4.SS2.p4.2.m2.1.1.2" xref="S4.SS2.p4.2.m2.1.1.2.cmml">
         f
        </mi>
        <mi id="S4.SS2.p4.2.m2.1.1.3" xref="S4.SS2.p4.2.m2.1.1.3.cmml">
         i
        </mi>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p4.2.m2.1b">
        <apply id="S4.SS2.p4.2.m2.1.1.cmml" xref="S4.SS2.p4.2.m2.1.1">
         <csymbol cd="ambiguous" id="S4.SS2.p4.2.m2.1.1.1.cmml" xref="S4.SS2.p4.2.m2.1.1">
          subscript
         </csymbol>
         <ci id="S4.SS2.p4.2.m2.1.1.2.cmml" xref="S4.SS2.p4.2.m2.1.1.2">
          𝑓
         </ci>
         <ci id="S4.SS2.p4.2.m2.1.1.3.cmml" xref="S4.SS2.p4.2.m2.1.1.3">
          𝑖
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p4.2.m2.1c">
        f_{i}
       </annotation>
      </semantics>
     </math>
     are often tailored to assess the meaningfulness of the simulated dynamics, rather than achieving a specific task.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS2.p5">
    <p class="ltx_p" id="S4.SS2.p5.1">
     Embedding multi-agent PE within the framework of optimal control offers several advantages and insights. For instance, by conceptualizing each agent as an individual control unit guided by its utility function, one may gain a structured view for analyzing the coordinated actions and objectives of a multi-agent system. This allows for a mathematical description of how different agents, each with their unique initial prompt defining its role, contribute to the global objective, thereby unifying disparate approaches under a single mathematical umbrella.
    </p>
   </div>
  </section>
 </section>
 <section class="ltx_section" id="S5">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    5
   </span>
   Conclusions
  </h2>
  <div class="ltx_para" id="S5.p1">
   <p class="ltx_p" id="S5.p1.1">
    In this paper, we have introduced an optimal control framework to describe multi-round prompt engineering. The framework is shown to be rather flexible, accommodating an expansive array of problem settings and objectives that frequently appear in the literature. The proposed framework has the potential to facilitate the development of more efficient PE algorithms, enabling more effective control over the LLMs and further broadening the scope of achievable tasks. Furthermore, the framework can be extended to incorporate ensemble methods and multi-agent scenarios. As discussed in various sections of this paper, the proposed frameworks grant a unified perspective on PE methods, has enabled us to propose various possible improvements to existing PE methods and has illuminated new directions for future research.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="Sx1">
  <h2 class="ltx_title ltx_title_section">
   Acknowledge
  </h2>
  <div class="ltx_para" id="Sx1.p1">
   <p class="ltx_p" id="Sx1.p1.1">
    ZZ is supported by the National Key R&amp;D Program of China, Project Number 2021YFA1001200, and the NSFC, grant Number 12031013, 12171013. BD is supported by the NSFC, grant Number 12090022.
   </p>
  </div>
 </section>
 <section class="ltx_bibliography" id="bib">
  <h2 class="ltx_title ltx_title_bibliography">
   References
  </h2>
  <ul class="ltx_biblist">
   <li class="ltx_bibitem" id="bib.bib1">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [1]
    </span>
    <span class="ltx_bibblock">
     Tom B. Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared Kaplan,
Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda
Askell, Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, Tom Henighan,
Rewon Child, Aditya Ramesh, Daniel M. Ziegler, Jeffrey Wu, Clemens Winter,
Christopher Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, Scott Gray,
Benjamin Chess, Jack Clark, Christopher Berner, Sam McCandlish, Alec Radford,
Ilya Sutskever, and Dario Amodei.
    </span>
    <span class="ltx_bibblock">
     Language models are few-shot learners, 2020.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib2">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [2]
    </span>
    <span class="ltx_bibblock">
     Wissam Antoun, Fady Baly, and Hazem Hajj.
    </span>
    <span class="ltx_bibblock">
     Aragpt2: Pre-trained transformer for arabic language generation.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib2.1.1">
      arXiv preprint arXiv:2012.15520
     </span>
     , 2020.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib3">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [3]
    </span>
    <span class="ltx_bibblock">
     Robert L. Logan IV au2, Ivana Balažević, Eric Wallace, Fabio Petroni, Sameer
Singh, and Sebastian Riedel.
    </span>
    <span class="ltx_bibblock">
     Cutting down on prompts and parameters: Simple few-shot learning with
language models, 2021.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib4">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [4]
    </span>
    <span class="ltx_bibblock">
     Golam Md Muktadir.
    </span>
    <span class="ltx_bibblock">
     A brief history of prompt: Leveraging language models, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib5">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [5]
    </span>
    <span class="ltx_bibblock">
     Rada Mihalcea, Hugo Liu, and Henry Lieberman.
    </span>
    <span class="ltx_bibblock">
     Nlp (natural language processing) for nlp (natural language
programming).
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib5.1.1">
      Computational Linguistics and Intelligent Text Processing:
7th International Conference, CICLing 2006, Mexico City, Mexico, February
19-25, 2006. Proceedings 7
     </span>
     , pages 319–330. Springer, 2006.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib6">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [6]
    </span>
    <span class="ltx_bibblock">
     Lance A Miller.
    </span>
    <span class="ltx_bibblock">
     Natural language programming: Styles, strategies, and contrasts.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib6.1.1">
      IBM Systems Journal
     </span>
     , 20(2):184–215, 1981.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib7">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [7]
    </span>
    <span class="ltx_bibblock">
     Denny Zhou, Nathanael Schärli, Le Hou, Jason Wei, Nathan Scales, Xuezhi Wang,
Dale Schuurmans, Claire Cui, Olivier Bousquet, Quoc Le, and Ed Chi.
    </span>
    <span class="ltx_bibblock">
     Least-to-most prompting enables complex reasoning in large language
models, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib8">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [8]
    </span>
    <span class="ltx_bibblock">
     Yongchao Zhou, Andrei Ioan Muresanu, Ziwen Han, Keiran Paster, Silviu Pitis,
Harris Chan, and Jimmy Ba.
    </span>
    <span class="ltx_bibblock">
     Large language models are human-level prompt engineers.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib8.1.1">
      ArXiv
     </span>
     , abs/2211.01910, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib9">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [9]
    </span>
    <span class="ltx_bibblock">
     Shunyu Yao, Dian Yu, Jeffrey Zhao, Izhak Shafran, Thomas L. Griffiths, Yuan
Cao, and Karthik Narasimhan.
    </span>
    <span class="ltx_bibblock">
     Tree of thoughts: Deliberate problem solving with large language
models, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib10">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [10]
    </span>
    <span class="ltx_bibblock">
     Maciej Besta, Nils Blach, Ales Kubicek, Robert Gerstenberger, Lukas Gianinazzi,
Joanna Gajda, Tomasz Lehmann, Michal Podstawski, Hubert Niewiadomski, Piotr
Nyczyk, and Torsten Hoefler.
    </span>
    <span class="ltx_bibblock">
     Graph of thoughts: Solving elaborate problems with large language
models, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib11">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [11]
    </span>
    <span class="ltx_bibblock">
     Donald E Kirk.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib11.1.1">
      Optimal control theory: an introduction
     </span>
     .
    </span>
    <span class="ltx_bibblock">
     Courier Corporation, 2004.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib12">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [12]
    </span>
    <span class="ltx_bibblock">
     Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Ed Huai hsin Chi,
F. Xia, Quoc Le, and Denny Zhou.
    </span>
    <span class="ltx_bibblock">
     Chain of thought prompting elicits reasoning in large language
models.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib12.1.1">
      ArXiv
     </span>
     , abs/2201.11903, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib13">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [13]
    </span>
    <span class="ltx_bibblock">
     Takeshi Kojima, Shixiang Shane Gu, Machel Reid, Yutaka Matsuo, and Yusuke
Iwasawa.
    </span>
    <span class="ltx_bibblock">
     Large language models are zero-shot reasoners, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib14">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [14]
    </span>
    <span class="ltx_bibblock">
     Pengfei Liu, Weizhe Yuan, Jinlan Fu, Zhengbao Jiang, Hiroaki Hayashi, and
Graham Neubig.
    </span>
    <span class="ltx_bibblock">
     Pre-train, prompt, and predict: A systematic survey of prompting
methods in natural language processing.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib14.1.1">
      ACM Computing Surveys
     </span>
     , 55(9):1–35, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib15">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [15]
    </span>
    <span class="ltx_bibblock">
     Qingxiu Dong, Lei Li, Damai Dai, Ce Zheng, Zhiyong Wu, Baobao Chang, Xu Sun,
Jingjing Xu, Lei Li, and Zhifang Sui.
    </span>
    <span class="ltx_bibblock">
     A survey on in-context learning, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib16">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [16]
    </span>
    <span class="ltx_bibblock">
     Shuofei Qiao, Yixin Ou, Ningyu Zhang, Xiang Chen, Yunzhi Yao, Shumin Deng,
Chuanqi Tan, Fei Huang, and Huajun Chen.
    </span>
    <span class="ltx_bibblock">
     Reasoning with language model prompting: A survey, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib17">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [17]
    </span>
    <span class="ltx_bibblock">
     Aman Bhargava, Cameron Witkowski, Manav Shah, and Matt Thomson.
    </span>
    <span class="ltx_bibblock">
     What’s the magic word? a control theory of llm prompting, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib18">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [18]
    </span>
    <span class="ltx_bibblock">
     Zhuosheng Zhang, Aston Zhang, Mu Li, and Alex Smola.
    </span>
    <span class="ltx_bibblock">
     Automatic chain of thought prompting in large language models, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib19">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [19]
    </span>
    <span class="ltx_bibblock">
     Luyu Gao, Aman Madaan, Shuyan Zhou, Uri Alon, Pengfei Liu, Yiming Yang, Jamie
Callan, and Graham Neubig.
    </span>
    <span class="ltx_bibblock">
     Pal: Program-aided language models.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib19.1.1">
      ArXiv
     </span>
     , abs/2211.10435, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib20">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [20]
    </span>
    <span class="ltx_bibblock">
     Fobo Shi, Peijun Qing, D. Yang, Nan Wang, Youbo Lei, H. Lu, and Xiaodong Lin.
    </span>
    <span class="ltx_bibblock">
     Prompt space optimizing few-shot reasoning success with large
language models.
    </span>
    <span class="ltx_bibblock">
     2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib21">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [21]
    </span>
    <span class="ltx_bibblock">
     Xingyao Wang, Zihan Wang, Jiateng Liu, Yangyi Chen, Lifan Yuan, Hao Peng, and
Heng Ji.
    </span>
    <span class="ltx_bibblock">
     Mint: Evaluating llms in multi-turn interaction with tools and
language feedback, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib22">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [22]
    </span>
    <span class="ltx_bibblock">
     Peter Lee, Carey Goldberg, and Isaac Kohane.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib22.1.1">
      The AI revolution in medicine: GPT-4 and beyond
     </span>
     .
    </span>
    <span class="ltx_bibblock">
     Pearson, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib23">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [23]
    </span>
    <span class="ltx_bibblock">
     Jiacheng Liu, Alisa Liu, Ximing Lu, Sean Welleck, Peter West, Ronan Le Bras,
Yejin Choi, and Hannaneh Hajishirzi.
    </span>
    <span class="ltx_bibblock">
     Generated knowledge prompting for commonsense reasoning, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib24">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [24]
    </span>
    <span class="ltx_bibblock">
     Damai Dai, Yutao Sun, Li Dong, Yaru Hao, Shuming Ma, Zhifang Sui, and Furu Wei.
    </span>
    <span class="ltx_bibblock">
     Why can gpt learn in-context? language models implicitly perform
gradient descent as meta-optimizers, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib25">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [25]
    </span>
    <span class="ltx_bibblock">
     Jaehun Jung, Lianhui Qin, Sean Welleck, Faeze Brahman, Chandra Bhagavatula,
Ronan Le Bras, and Yejin Choi.
    </span>
    <span class="ltx_bibblock">
     Maieutic prompting: Logically consistent reasoning with recursive
explanations, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib26">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [26]
    </span>
    <span class="ltx_bibblock">
     Wenhu Chen, Xueguang Ma, Xinyi Wang, and William W. Cohen.
    </span>
    <span class="ltx_bibblock">
     Program of thoughts prompting: Disentangling computation from
reasoning for numerical reasoning tasks, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib27">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [27]
    </span>
    <span class="ltx_bibblock">
     Yixuan Weng, Minjun Zhu, Fei Xia, Bin Li, Shizhu He, Kang Liu, and Jun Zhao.
    </span>
    <span class="ltx_bibblock">
     Large language models are better reasoners with self-verification.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib27.1.1">
      CoRR, abs/2212.09561
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib28">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [28]
    </span>
    <span class="ltx_bibblock">
     Chuanyang Zheng, Zhengying Liu, Enze Xie, Zhenguo Li, and Yu Li.
    </span>
    <span class="ltx_bibblock">
     Progressive-hint prompting improves reasoning in large language
models.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib28.1.1">
      arXiv preprint arXiv:2304.09797
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib29">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [29]
    </span>
    <span class="ltx_bibblock">
     IokTong Lei and ZhiDong Deng.
    </span>
    <span class="ltx_bibblock">
     Selfzcot: a self-prompt zero-shot cot from semantic-level to
code-level for a better utilization of llms, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib30">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [30]
    </span>
    <span class="ltx_bibblock">
     Gregory Farquhar, Laura Gustafson, Zeming Lin, Shimon Whiteson, Nicolas
Usunier, and Gabriel Synnaeve.
    </span>
    <span class="ltx_bibblock">
     Growing action spaces.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib30.1.1">
      International Conference on Machine Learning
     </span>
     , pages
3040–3051. PMLR, 2020.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib31">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [31]
    </span>
    <span class="ltx_bibblock">
     Jeffrey L Elman.
    </span>
    <span class="ltx_bibblock">
     Learning and development in neural networks: The importance of
starting small.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib31.1.1">
      Cognition
     </span>
     , 48(1):71–99, 1993.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib32">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [32]
    </span>
    <span class="ltx_bibblock">
     Mingkai Deng, Jianyu Wang, Cheng-Ping Hsieh, Yihan Wang, Han Guo, Tianmin Shu,
Meng Song, Eric P. Xing, and Zhiting Hu.
    </span>
    <span class="ltx_bibblock">
     Rlprompt: Optimizing discrete text prompts with reinforcement
learning, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib33">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [33]
    </span>
    <span class="ltx_bibblock">
     Pan Lu, Liang Qiu, Kai-Wei Chang, Ying Nian Wu, Song-Chun Zhu, Tanmay
Rajpurohit, Peter Clark, and Ashwin Kalyan.
    </span>
    <span class="ltx_bibblock">
     Dynamic prompt learning via policy gradient for semi-structured
mathematical reasoning, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib34">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [34]
    </span>
    <span class="ltx_bibblock">
     D. Opitz and R. Maclin.
    </span>
    <span class="ltx_bibblock">
     Popular ensemble methods: An empirical study.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib34.1.1">
      Journal of Artificial Intelligence Research
     </span>
     , 11:169–198, aug
1999.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib35">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [35]
    </span>
    <span class="ltx_bibblock">
     Robi Polikar.
    </span>
    <span class="ltx_bibblock">
     Ensemble based systems in decision making.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib35.1.1">
      IEEE Circuits and systems magazine
     </span>
     , 6(3):21–45, 2006.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib36">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [36]
    </span>
    <span class="ltx_bibblock">
     Lior Rokach.
    </span>
    <span class="ltx_bibblock">
     Ensemble-based classifiers.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib36.1.1">
      Artificial intelligence review
     </span>
     , 33:1–39, 2010.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib37">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [37]
    </span>
    <span class="ltx_bibblock">
     Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed Huai hsin Chi, and Denny
Zhou.
    </span>
    <span class="ltx_bibblock">
     Self-consistency improves chain of thought reasoning in language
models.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib37.1.1">
      ArXiv
     </span>
     , abs/2203.11171, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib38">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [38]
    </span>
    <span class="ltx_bibblock">
     Yao Fu, Hao Peng, Ashish Sabharwal, Peter Clark, and Tushar Khot.
    </span>
    <span class="ltx_bibblock">
     Complexity-based prompting for multi-step reasoning, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib39">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [39]
    </span>
    <span class="ltx_bibblock">
     Yifei Li, Zeqi Lin, Shizhuo Zhang, Qiang Fu, Bei Chen, Jian-Guang Lou, and
Weizhu Chen.
    </span>
    <span class="ltx_bibblock">
     Making large language models better reasoners with step-aware
verifier, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib40">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [40]
    </span>
    <span class="ltx_bibblock">
     Taylor Sorensen, Joshua Robinson, Christopher Rytting, Alexander Shaw, Kyle
Rogers, Alexia Delorey, Mahmoud Khalil, Nancy Fulda, and David Wingate.
    </span>
    <span class="ltx_bibblock">
     An information-theoretic approach to prompt engineering without
ground truth labels.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib40.1.1">
      Proceedings of the 60th Annual Meeting of the Association for
Computational Linguistics (Volume 1: Long Papers)
     </span>
     . Association for
Computational Linguistics, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib41">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [41]
    </span>
    <span class="ltx_bibblock">
     Shima Imani, Liang Du, and H. Shrivastava.
    </span>
    <span class="ltx_bibblock">
     Mathprompter: Mathematical reasoning using large language models.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib41.1.1">
      ArXiv
     </span>
     , abs/2303.05398, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib42">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [42]
    </span>
    <span class="ltx_bibblock">
     Chen Qian, Xin Cong, Wei Liu, Cheng Yang, Weize Chen, Yusheng Su, Yufan Dang,
Jiahao Li, Juyuan Xu, Dahai Li, Zhiyuan Liu, and Maosong Sun.
    </span>
    <span class="ltx_bibblock">
     Communicative agents for software development, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib43">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [43]
    </span>
    <span class="ltx_bibblock">
     Yilun Du, Shuang Li, Antonio Torralba, Joshua B. Tenenbaum, and Igor Mordatch.
    </span>
    <span class="ltx_bibblock">
     Improving factuality and reasoning in language models through
multiagent debate, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib44">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [44]
    </span>
    <span class="ltx_bibblock">
     Yao Fu, Hao Peng, Tushar Khot, and Mirella Lapata.
    </span>
    <span class="ltx_bibblock">
     Improving language model negotiation with self-play and in-context
learning from ai feedback, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib45">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [45]
    </span>
    <span class="ltx_bibblock">
     Edward Junprung.
    </span>
    <span class="ltx_bibblock">
     Exploring the intersection of large language models and agent-based
modeling via prompt engineering, 2023.
    </span>
   </li>
  </ul>
 </section>
 <div class="ltx_pagination ltx_role_newpage">
 </div>
</article>
