<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Consistent Autoformalization for Constructing Mathematical Libraries</title>
<!--Generated on Sat Oct  5 15:06:20 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2410.04194v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S1" title="In Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S2" title="In Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Proposed Approach</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S2.SS1" title="In 2 Proposed Approach ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Most-Similar Retrieval Augmented Generation (MS-RAG)</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S2.SS2" title="In 2 Proposed Approach ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Denoising Formalization Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S2.SS3" title="In 2 Proposed Approach ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>Auto-correction with Syntax Error Feedback (Auto-SEF)</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S3" title="In Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Evaluation Benchmark</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S3.SS1" title="In 3 Evaluation Benchmark ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>MathLibForm</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S3.SS2" title="In 3 Evaluation Benchmark ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Evaluation Metrics</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4" title="In Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments and Analysis</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.SS1" title="In 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Retrieval Augmented Autoformalization</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.SS2" title="In 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Output Denoising</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.SS2.SSS0.Px1" title="In 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title">Case Study</span></a>
<ol class="ltx_toclist ltx_toclist_paragraph">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.SS3" title="In Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Iterative Symbolic Refinement</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.SS4" title="In 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>A Critique of the Metrics</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S5" title="In 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S5.SS0.SSS0.Px1" title="In 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title">Autoformalization</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S5.SS0.SSS0.Px2" title="In 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title">Retrieval Augmented Generation <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al., <span class="ltx_ref">2020</span>)</cite></span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S5.SS0.SSS0.Px3" title="In 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title">LLMs Refinement</span></a>
<ol class="ltx_toclist ltx_toclist_paragraph">
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S6" title="In LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A1" title="In Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Large Language Models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A2" title="In Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Evaluation Metrics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A3" title="In Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Prompts</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A4" title="In Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Detailed Results</span></a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document">
<h1 class="ltx_title ltx_title_document">Consistent Autoformalization for Constructing Mathematical Libraries</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
<span class="ltx_text ltx_font_bold" id="id1.1.id1">Lan Zhang<sup class="ltx_sup" id="id1.1.id1.1">1</sup></span>,
<span class="ltx_text ltx_font_bold" id="id2.2.id2">Xin Quan<sup class="ltx_sup" id="id2.2.id2.1">1</sup></span>,
<span class="ltx_text ltx_font_bold" id="id3.3.id3">André Freitas<sup class="ltx_sup" id="id3.3.id3.1">1,2,3</sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id3.3.id3.2"><span class="ltx_text ltx_font_medium" id="id3.3.id3.2.1">1</span></sup></span>Department of Computer Science, University of Manchester, United Kingdom
<br class="ltx_break"/><sup class="ltx_sup" id="id4.4.id4">2</sup>Idiap Research Institute, Switzerland
<br class="ltx_break"/><sup class="ltx_sup" id="id5.5.id5">3</sup>National Biomarker Centre, CRUK Manchester Institute, United Kingdom
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id6.6.id6">{lan.zhang-6, xin.quan}@postgrad.manchester.ac.uk
<br class="ltx_break"/>andre.freitas@idiap.ch</span>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id7.id1">Autoformalization is the task of automatically translating mathematical content written in natural language to a formal language expression. The growing language interpretation capabilities of Large Language Models (LLMs), including in formal languages, are lowering the barriers for autoformalization. However, LLMs alone are not capable of consistently and reliably delivering autoformalization, in particular as the complexity and specialization of the target domain grows. As the field evolves into the direction of systematically applying autoformalization towards large mathematical libraries, the need to improve syntactic, terminological and semantic control increases. This paper proposes the coordinated use of three mechanisms, most-similar retrieval augmented generation (MS-RAG), denoising steps, and auto-correction with syntax error feedback (Auto-SEF) to improve autoformalization quality. The empirical analysis, across different models, demonstrates that these mechanisms can deliver autoformalizaton results which are syntactically, terminologically and semantically more consistent. These mechanisms can be applied across different LLMs and have shown to deliver improve results across different model types.<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>Code and datasets are available at <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/lanzhang128/retrieval_augmented_autoformalization" title="">https://github.com/lanzhang128/retrieval_augmented_autoformalization</a></span></span></span></p>
</div>
<div class="ltx_para ltx_noindent" id="p1">
<div class="ltx_block ltx_align_bottom" id="p1.1">
<p class="ltx_p" id="p1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.1.1">Consistent Autoformalization for Constructing Mathematical Libraries</span></p>
<br class="ltx_break ltx_centering"/>
<p class="ltx_p ltx_align_center" id="p1.1.2" style="width:433.6pt;"><span class="ltx_text ltx_inline-block" id="p1.1.2.1" style="width:0.0pt;">
<span class="ltx_tabular ltx_align_top" id="p1.1.2.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="p1.1.2.1.1.1.1">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.1.1.1.1">
Lan Zhang<sup class="ltx_sup" id="p1.1.2.1.1.1.1.1.1.1">1</sup>,
Xin Quan<sup class="ltx_sup" id="p1.1.2.1.1.1.1.1.1.2">1</sup>,
André Freitas<sup class="ltx_sup" id="p1.1.2.1.1.1.1.1.1.3">1,2,3</sup></span></span></span>
<span class="ltx_tr" id="p1.1.2.1.1.2.2">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.2.2.1"><sup class="ltx_sup" id="p1.1.2.1.1.2.2.1.1">1</sup>Department of Computer Science, University of Manchester, United Kingdom</span></span>
<span class="ltx_tr" id="p1.1.2.1.1.3.3">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.3.3.1"><sup class="ltx_sup" id="p1.1.2.1.1.3.3.1.1">2</sup>Idiap Research Institute, Switzerland</span></span>
<span class="ltx_tr" id="p1.1.2.1.1.4.4">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.4.4.1"><sup class="ltx_sup" id="p1.1.2.1.1.4.4.1.1">3</sup>National Biomarker Centre, CRUK Manchester Institute, United Kingdom</span></span>
<span class="ltx_tr" id="p1.1.2.1.1.5.5">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.5.5.1"><span class="ltx_text ltx_font_typewriter" id="p1.1.2.1.1.5.5.1.1">{lan.zhang-6, xin.quan}@postgrad.manchester.ac.uk</span></span></span>
<span class="ltx_tr" id="p1.1.2.1.1.6.6">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.6.6.1"><span class="ltx_text ltx_font_typewriter" id="p1.1.2.1.1.6.6.1.1">andre.freitas@idiap.ch</span></span></span>
</span>
</span></span></p>
<br class="ltx_break ltx_centering"/>
</div>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="904" id="S1.F1.g1" src="extracted/5903910/figures/framework.png" width="2495"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>The overall framework consists of three stages: Stage 1 contains one round for retrieval augmented autoformalization; Stage 2 contains one round for denoising; Stage 3 is composed of several iterative rounds to refine the code based on syntax errors. For better illustration, we change \&lt;in&gt;, \&lt;nat&gt;, \&lt;lsq&gt;, $+$ to their LaTeX version <math alttext="\in" class="ltx_Math" display="inline" id="S1.F1.10.m1.1"><semantics id="S1.F1.10.m1.1b"><mo id="S1.F1.10.m1.1.1" xref="S1.F1.10.m1.1.1.cmml">∈</mo><annotation-xml encoding="MathML-Content" id="S1.F1.10.m1.1c"><in id="S1.F1.10.m1.1.1.cmml" xref="S1.F1.10.m1.1.1"></in></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.10.m1.1d">\in</annotation><annotation encoding="application/x-llamapun" id="S1.F1.10.m1.1e">∈</annotation></semantics></math>, <math alttext="\mathbb{N}" class="ltx_Math" display="inline" id="S1.F1.11.m2.1"><semantics id="S1.F1.11.m2.1b"><mi id="S1.F1.11.m2.1.1" xref="S1.F1.11.m2.1.1.cmml">ℕ</mi><annotation-xml encoding="MathML-Content" id="S1.F1.11.m2.1c"><ci id="S1.F1.11.m2.1.1.cmml" xref="S1.F1.11.m2.1.1">ℕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.11.m2.1d">\mathbb{N}</annotation><annotation encoding="application/x-llamapun" id="S1.F1.11.m2.1e">blackboard_N</annotation></semantics></math>, <math alttext="\leq" class="ltx_Math" display="inline" id="S1.F1.12.m3.1"><semantics id="S1.F1.12.m3.1b"><mo id="S1.F1.12.m3.1.1" xref="S1.F1.12.m3.1.1.cmml">≤</mo><annotation-xml encoding="MathML-Content" id="S1.F1.12.m3.1c"><leq id="S1.F1.12.m3.1.1.cmml" xref="S1.F1.12.m3.1.1"></leq></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.12.m3.1d">\leq</annotation><annotation encoding="application/x-llamapun" id="S1.F1.12.m3.1e">≤</annotation></semantics></math>, <math alttext="+" class="ltx_Math" display="inline" id="S1.F1.13.m4.1"><semantics id="S1.F1.13.m4.1b"><mo id="S1.F1.13.m4.1.1" xref="S1.F1.13.m4.1.1.cmml">+</mo><annotation-xml encoding="MathML-Content" id="S1.F1.13.m4.1c"><plus id="S1.F1.13.m4.1.1.cmml" xref="S1.F1.13.m4.1.1"></plus></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.13.m4.1d">+</annotation><annotation encoding="application/x-llamapun" id="S1.F1.13.m4.1e">+</annotation></semantics></math>. The ground truth code is <span class="ltx_text ltx_font_italic" id="S1.F1.20.1">lemma (in int0) Int_ZF_1_5_L7A: assumes "a\&lt;in&gt;\&lt;int&gt;" "b \&lt;in&gt;\&lt;int&gt;\&lt;^sub&gt;+"shows "a \&lt;lsq&gt;a\&lt;ra&gt;b" "a \&lt;noteq&gt;a\&lt;ra&gt;b" "a\&lt;ra&gt;b \&lt;in&gt;\&lt;int&gt;"</span> (assumes "<math alttext="a\in\mathbb{Z}" class="ltx_Math" display="inline" id="S1.F1.14.m5.1"><semantics id="S1.F1.14.m5.1b"><mrow id="S1.F1.14.m5.1.1" xref="S1.F1.14.m5.1.1.cmml"><mi id="S1.F1.14.m5.1.1.2" xref="S1.F1.14.m5.1.1.2.cmml">a</mi><mo id="S1.F1.14.m5.1.1.1" xref="S1.F1.14.m5.1.1.1.cmml">∈</mo><mi id="S1.F1.14.m5.1.1.3" xref="S1.F1.14.m5.1.1.3.cmml">ℤ</mi></mrow><annotation-xml encoding="MathML-Content" id="S1.F1.14.m5.1c"><apply id="S1.F1.14.m5.1.1.cmml" xref="S1.F1.14.m5.1.1"><in id="S1.F1.14.m5.1.1.1.cmml" xref="S1.F1.14.m5.1.1.1"></in><ci id="S1.F1.14.m5.1.1.2.cmml" xref="S1.F1.14.m5.1.1.2">𝑎</ci><ci id="S1.F1.14.m5.1.1.3.cmml" xref="S1.F1.14.m5.1.1.3">ℤ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.14.m5.1d">a\in\mathbb{Z}</annotation><annotation encoding="application/x-llamapun" id="S1.F1.14.m5.1e">italic_a ∈ blackboard_Z</annotation></semantics></math>" "<math alttext="b\in\mathbb{Z}^{+}" class="ltx_Math" display="inline" id="S1.F1.15.m6.1"><semantics id="S1.F1.15.m6.1b"><mrow id="S1.F1.15.m6.1.1" xref="S1.F1.15.m6.1.1.cmml"><mi id="S1.F1.15.m6.1.1.2" xref="S1.F1.15.m6.1.1.2.cmml">b</mi><mo id="S1.F1.15.m6.1.1.1" xref="S1.F1.15.m6.1.1.1.cmml">∈</mo><msup id="S1.F1.15.m6.1.1.3" xref="S1.F1.15.m6.1.1.3.cmml"><mi id="S1.F1.15.m6.1.1.3.2" xref="S1.F1.15.m6.1.1.3.2.cmml">ℤ</mi><mo id="S1.F1.15.m6.1.1.3.3" xref="S1.F1.15.m6.1.1.3.3.cmml">+</mo></msup></mrow><annotation-xml encoding="MathML-Content" id="S1.F1.15.m6.1c"><apply id="S1.F1.15.m6.1.1.cmml" xref="S1.F1.15.m6.1.1"><in id="S1.F1.15.m6.1.1.1.cmml" xref="S1.F1.15.m6.1.1.1"></in><ci id="S1.F1.15.m6.1.1.2.cmml" xref="S1.F1.15.m6.1.1.2">𝑏</ci><apply id="S1.F1.15.m6.1.1.3.cmml" xref="S1.F1.15.m6.1.1.3"><csymbol cd="ambiguous" id="S1.F1.15.m6.1.1.3.1.cmml" xref="S1.F1.15.m6.1.1.3">superscript</csymbol><ci id="S1.F1.15.m6.1.1.3.2.cmml" xref="S1.F1.15.m6.1.1.3.2">ℤ</ci><plus id="S1.F1.15.m6.1.1.3.3.cmml" xref="S1.F1.15.m6.1.1.3.3"></plus></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.15.m6.1d">b\in\mathbb{Z}^{+}</annotation><annotation encoding="application/x-llamapun" id="S1.F1.15.m6.1e">italic_b ∈ blackboard_Z start_POSTSUPERSCRIPT + end_POSTSUPERSCRIPT</annotation></semantics></math>" shows "<math alttext="a\leq a+b" class="ltx_Math" display="inline" id="S1.F1.16.m7.1"><semantics id="S1.F1.16.m7.1b"><mrow id="S1.F1.16.m7.1.1" xref="S1.F1.16.m7.1.1.cmml"><mi id="S1.F1.16.m7.1.1.2" xref="S1.F1.16.m7.1.1.2.cmml">a</mi><mo id="S1.F1.16.m7.1.1.1" xref="S1.F1.16.m7.1.1.1.cmml">≤</mo><mrow id="S1.F1.16.m7.1.1.3" xref="S1.F1.16.m7.1.1.3.cmml"><mi id="S1.F1.16.m7.1.1.3.2" xref="S1.F1.16.m7.1.1.3.2.cmml">a</mi><mo id="S1.F1.16.m7.1.1.3.1" xref="S1.F1.16.m7.1.1.3.1.cmml">+</mo><mi id="S1.F1.16.m7.1.1.3.3" xref="S1.F1.16.m7.1.1.3.3.cmml">b</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.F1.16.m7.1c"><apply id="S1.F1.16.m7.1.1.cmml" xref="S1.F1.16.m7.1.1"><leq id="S1.F1.16.m7.1.1.1.cmml" xref="S1.F1.16.m7.1.1.1"></leq><ci id="S1.F1.16.m7.1.1.2.cmml" xref="S1.F1.16.m7.1.1.2">𝑎</ci><apply id="S1.F1.16.m7.1.1.3.cmml" xref="S1.F1.16.m7.1.1.3"><plus id="S1.F1.16.m7.1.1.3.1.cmml" xref="S1.F1.16.m7.1.1.3.1"></plus><ci id="S1.F1.16.m7.1.1.3.2.cmml" xref="S1.F1.16.m7.1.1.3.2">𝑎</ci><ci id="S1.F1.16.m7.1.1.3.3.cmml" xref="S1.F1.16.m7.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.16.m7.1d">a\leq a+b</annotation><annotation encoding="application/x-llamapun" id="S1.F1.16.m7.1e">italic_a ≤ italic_a + italic_b</annotation></semantics></math>" "<math alttext="a\neq a+b" class="ltx_Math" display="inline" id="S1.F1.17.m8.1"><semantics id="S1.F1.17.m8.1b"><mrow id="S1.F1.17.m8.1.1" xref="S1.F1.17.m8.1.1.cmml"><mi id="S1.F1.17.m8.1.1.2" xref="S1.F1.17.m8.1.1.2.cmml">a</mi><mo id="S1.F1.17.m8.1.1.1" xref="S1.F1.17.m8.1.1.1.cmml">≠</mo><mrow id="S1.F1.17.m8.1.1.3" xref="S1.F1.17.m8.1.1.3.cmml"><mi id="S1.F1.17.m8.1.1.3.2" xref="S1.F1.17.m8.1.1.3.2.cmml">a</mi><mo id="S1.F1.17.m8.1.1.3.1" xref="S1.F1.17.m8.1.1.3.1.cmml">+</mo><mi id="S1.F1.17.m8.1.1.3.3" xref="S1.F1.17.m8.1.1.3.3.cmml">b</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.F1.17.m8.1c"><apply id="S1.F1.17.m8.1.1.cmml" xref="S1.F1.17.m8.1.1"><neq id="S1.F1.17.m8.1.1.1.cmml" xref="S1.F1.17.m8.1.1.1"></neq><ci id="S1.F1.17.m8.1.1.2.cmml" xref="S1.F1.17.m8.1.1.2">𝑎</ci><apply id="S1.F1.17.m8.1.1.3.cmml" xref="S1.F1.17.m8.1.1.3"><plus id="S1.F1.17.m8.1.1.3.1.cmml" xref="S1.F1.17.m8.1.1.3.1"></plus><ci id="S1.F1.17.m8.1.1.3.2.cmml" xref="S1.F1.17.m8.1.1.3.2">𝑎</ci><ci id="S1.F1.17.m8.1.1.3.3.cmml" xref="S1.F1.17.m8.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.17.m8.1d">a\neq a+b</annotation><annotation encoding="application/x-llamapun" id="S1.F1.17.m8.1e">italic_a ≠ italic_a + italic_b</annotation></semantics></math>" "<math alttext="a+b\in\mathbb{Z}" class="ltx_Math" display="inline" id="S1.F1.18.m9.1"><semantics id="S1.F1.18.m9.1b"><mrow id="S1.F1.18.m9.1.1" xref="S1.F1.18.m9.1.1.cmml"><mrow id="S1.F1.18.m9.1.1.2" xref="S1.F1.18.m9.1.1.2.cmml"><mi id="S1.F1.18.m9.1.1.2.2" xref="S1.F1.18.m9.1.1.2.2.cmml">a</mi><mo id="S1.F1.18.m9.1.1.2.1" xref="S1.F1.18.m9.1.1.2.1.cmml">+</mo><mi id="S1.F1.18.m9.1.1.2.3" xref="S1.F1.18.m9.1.1.2.3.cmml">b</mi></mrow><mo id="S1.F1.18.m9.1.1.1" xref="S1.F1.18.m9.1.1.1.cmml">∈</mo><mi id="S1.F1.18.m9.1.1.3" xref="S1.F1.18.m9.1.1.3.cmml">ℤ</mi></mrow><annotation-xml encoding="MathML-Content" id="S1.F1.18.m9.1c"><apply id="S1.F1.18.m9.1.1.cmml" xref="S1.F1.18.m9.1.1"><in id="S1.F1.18.m9.1.1.1.cmml" xref="S1.F1.18.m9.1.1.1"></in><apply id="S1.F1.18.m9.1.1.2.cmml" xref="S1.F1.18.m9.1.1.2"><plus id="S1.F1.18.m9.1.1.2.1.cmml" xref="S1.F1.18.m9.1.1.2.1"></plus><ci id="S1.F1.18.m9.1.1.2.2.cmml" xref="S1.F1.18.m9.1.1.2.2">𝑎</ci><ci id="S1.F1.18.m9.1.1.2.3.cmml" xref="S1.F1.18.m9.1.1.2.3">𝑏</ci></apply><ci id="S1.F1.18.m9.1.1.3.cmml" xref="S1.F1.18.m9.1.1.3">ℤ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.F1.18.m9.1d">a+b\in\mathbb{Z}</annotation><annotation encoding="application/x-llamapun" id="S1.F1.18.m9.1e">italic_a + italic_b ∈ blackboard_Z</annotation></semantics></math>").</figcaption>
</figure>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Mathematical reasoning constitutes an essential aspect of human intelligence <cite class="ltx_cite ltx_citemacro_citep">(Saxton et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib33" title="">2019</a>; Lu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib19" title="">2023</a>)</cite>. It centers on symbolic-level reasoning, as manifested through systematic, abstract and and step-wise logical inference. Mathematical reasoning models has been clustered under two types: deep learning models  <cite class="ltx_cite ltx_citemacro_citep">(Hendrycks et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib10" title="">2021</a>; Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib38" title="">2022</a>; Meadows and Freitas, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib22" title="">2023</a>; Liu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib17" title="">2023</a>)</cite> and formal models <cite class="ltx_cite ltx_citemacro_citep">(Polu and Sutskever, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib28" title="">2020</a>; Wang and Deng, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib37" title="">2020</a>; Han et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib9" title="">2022</a>; Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib13" title="">2022</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib14" title="">2023b</a>)</cite>. Mathematical reasoning in Large Language Models (LLMs) predominantly uses statements expressed in informal mathematical statements. More recent models have aimed towards bridging both informal and formal mathematical reasoning  <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib39" title="">2022</a>; First et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib8" title="">2023</a>; Azerbayev et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib1" title="">2023</a>; Quan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib30" title="">2024a</a>)</cite>, where the material (content-based) inference strengths of LLMs are complemented by external formal/symbolic reasoning methods such as automated theorem provers (e.g. Isabelle <cite class="ltx_cite ltx_citemacro_citep">(Paulson, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib27" title="">2000</a>)</cite> and Lean <cite class="ltx_cite ltx_citemacro_citep">(de Moura et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib6" title="">2015</a>)</cite>), which can systematically assess the logical validity of the reasoning process <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib39" title="">2022</a>)</cite>, facilitating LLMs to perform controlled and consistent inference.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">However, formal and verifiable mathematical reasoning with theorem provers requires the manual formalization of logical formulae from informal statements, in order to build the supporting mathematical libraries, knowledge bases (KBs) which express previous axioms, definitions, theorems and proofs, a process that demands considerable effort and domain-specific knowledge. A prototypical case in point is the liquid tensor experiment  <cite class="ltx_cite ltx_citemacro_citep">(Scholze, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib34" title="">2022</a>)</cite>, an initiative aimed at formalizing analytical geometry results from Scholze &amp; Clausen, requiring a community coordinated effort of experts.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Contemporary LLMs have demonstrated considerable efficacy  <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib39" title="">2022</a>; Xin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib40" title="">2023</a>; First et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib8" title="">2023</a>)</cite> for supporting autoformalization efforts within an in-context learning paradigm, being largely evaluated in less specialized domains and tasks. Existing methods are still limited in delivering a method for systematically and consistently building large formal and specialized mathematical libraries. The essence of the challenge is twofold: (i) <span class="ltx_text ltx_font_italic" id="S1.p3.1.1">specialization and out-of-distribution (OOD) drifts:</span> as one moves towards more specialized and newer domains to be autoformalized, models are progressively exposed to more challenging OOD cases, and (ii) <span class="ltx_text ltx_font_italic" id="S1.p3.1.2">library consistency and coherence:</span> new formalized need to be consistently built-up on previously statements, cohering terminologically, syntactically and semantically.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">This work targets the overarching research question: ‘how to systematically support the creation of consistent and coherent formal mathematical libraries from informal mathematical statements?’. In order to address this task, we decompose this broader aim into the following research questions: <span class="ltx_text ltx_font_italic" id="S1.p4.1.1">RQ1: ‘To what extent contemporary LLMs are capable of formalizing specialized mathematical statements into formal representations for mathematical libraries?’; RQ2: ‘Which metrics can be used to assess the quality of the formalized outputs?’; RQ3: ‘Which mechanisms can be used to extend the autoformalization properties of LLMs to achieve better generative control and enhance terminological, syntactic and semantic consistency and coherence?’</span>. To address these research questions, we propose a novel framework (See Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">1</span></a>) that leverages LLMs with most-similar retrieval augmented generation (MS-RAG), denoising steps and iterative feedback-guided syntax error refinement cycles (Auto-SEF) to deliver a syntactically consistent and semantically coherent autoformalization.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">To assess the effectiveness of our proposed framework, we construct a supporting dataset for the task of mathematical library autoformalization (MathLibForm) and build a supporting empirical analysis methodology guided by a critical selection of a set of automated metrics. We conduct a systematic empirical analysis with a diverse sample of state-of-the-art LLMs, in order to compare and contrast their autoformalization properties and the impact of the proposed library autoformalization mechanisms. Our results demonstrate that leveraging LLMs with MS-RAG and Auto-SEF, combined with denoising strategies, can significantly enhance the syntactic correctness of formalization results, reaching improvements from 5.47% to 33.58%. In summary, the contributions of the paper are:</p>
<ol class="ltx_enumerate" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">Proposal of a novel neuro-symbolic framework targeting the autoformalization of mathematical libraries, which employs LLMs with MS-RAG, denoising and Auto-SEF to consistently and iteratively enhance and refine the formalization results;</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">Definition of a new task (formalization of mathematical libraries) and creation of a supporting dataset (MathLibForm);</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">Proposal of an evaluation methodology.</p>
</div>
</li>
</ol>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Proposed Approach</h2>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">In this section, we start by defining the target task and then describe the proposed mechanisms for improving autoformalization.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p2">
<p class="ltx_p" id="S2.p2.8"><span class="ltx_text ltx_font_bold" id="S2.p2.8.1">Autoformalization:</span> An autoformalization is a transformation function which maps an informal mathematical statement <math alttext="s" class="ltx_Math" display="inline" id="S2.p2.1.m1.1"><semantics id="S2.p2.1.m1.1a"><mi id="S2.p2.1.m1.1.1" xref="S2.p2.1.m1.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="S2.p2.1.m1.1b"><ci id="S2.p2.1.m1.1.1.cmml" xref="S2.p2.1.m1.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.1.m1.1c">s</annotation><annotation encoding="application/x-llamapun" id="S2.p2.1.m1.1d">italic_s</annotation></semantics></math> in the domain of natural language and LaTeX symbols <math alttext="\mathcal{S}" class="ltx_Math" display="inline" id="S2.p2.2.m2.1"><semantics id="S2.p2.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p2.2.m2.1.1" xref="S2.p2.2.m2.1.1.cmml">𝒮</mi><annotation-xml encoding="MathML-Content" id="S2.p2.2.m2.1b"><ci id="S2.p2.2.m2.1.1.cmml" xref="S2.p2.2.m2.1.1">𝒮</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.2.m2.1c">\mathcal{S}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.2.m2.1d">caligraphic_S</annotation></semantics></math> into a formal mathematical statement <math alttext="\phi" class="ltx_Math" display="inline" id="S2.p2.3.m3.1"><semantics id="S2.p2.3.m3.1a"><mi id="S2.p2.3.m3.1.1" xref="S2.p2.3.m3.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.p2.3.m3.1b"><ci id="S2.p2.3.m3.1.1.cmml" xref="S2.p2.3.m3.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.3.m3.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p2.3.m3.1d">italic_ϕ</annotation></semantics></math>, under a formal language <math alttext="\mathcal{F}" class="ltx_Math" display="inline" id="S2.p2.4.m4.1"><semantics id="S2.p2.4.m4.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p2.4.m4.1.1" xref="S2.p2.4.m4.1.1.cmml">ℱ</mi><annotation-xml encoding="MathML-Content" id="S2.p2.4.m4.1b"><ci id="S2.p2.4.m4.1.1.cmml" xref="S2.p2.4.m4.1.1">ℱ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.4.m4.1c">\mathcal{F}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.4.m4.1d">caligraphic_F</annotation></semantics></math>, <math alttext="f:\mathcal{S}\to\mathcal{F}" class="ltx_Math" display="inline" id="S2.p2.5.m5.1"><semantics id="S2.p2.5.m5.1a"><mrow id="S2.p2.5.m5.1.1" xref="S2.p2.5.m5.1.1.cmml"><mi id="S2.p2.5.m5.1.1.2" xref="S2.p2.5.m5.1.1.2.cmml">f</mi><mo id="S2.p2.5.m5.1.1.1" lspace="0.278em" rspace="0.278em" xref="S2.p2.5.m5.1.1.1.cmml">:</mo><mrow id="S2.p2.5.m5.1.1.3" xref="S2.p2.5.m5.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p2.5.m5.1.1.3.2" xref="S2.p2.5.m5.1.1.3.2.cmml">𝒮</mi><mo id="S2.p2.5.m5.1.1.3.1" stretchy="false" xref="S2.p2.5.m5.1.1.3.1.cmml">→</mo><mi class="ltx_font_mathcaligraphic" id="S2.p2.5.m5.1.1.3.3" xref="S2.p2.5.m5.1.1.3.3.cmml">ℱ</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p2.5.m5.1b"><apply id="S2.p2.5.m5.1.1.cmml" xref="S2.p2.5.m5.1.1"><ci id="S2.p2.5.m5.1.1.1.cmml" xref="S2.p2.5.m5.1.1.1">:</ci><ci id="S2.p2.5.m5.1.1.2.cmml" xref="S2.p2.5.m5.1.1.2">𝑓</ci><apply id="S2.p2.5.m5.1.1.3.cmml" xref="S2.p2.5.m5.1.1.3"><ci id="S2.p2.5.m5.1.1.3.1.cmml" xref="S2.p2.5.m5.1.1.3.1">→</ci><ci id="S2.p2.5.m5.1.1.3.2.cmml" xref="S2.p2.5.m5.1.1.3.2">𝒮</ci><ci id="S2.p2.5.m5.1.1.3.3.cmml" xref="S2.p2.5.m5.1.1.3.3">ℱ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.5.m5.1c">f:\mathcal{S}\to\mathcal{F}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.5.m5.1d">italic_f : caligraphic_S → caligraphic_F</annotation></semantics></math>, such that for every <math alttext="s\in\mathcal{S}" class="ltx_Math" display="inline" id="S2.p2.6.m6.1"><semantics id="S2.p2.6.m6.1a"><mrow id="S2.p2.6.m6.1.1" xref="S2.p2.6.m6.1.1.cmml"><mi id="S2.p2.6.m6.1.1.2" xref="S2.p2.6.m6.1.1.2.cmml">s</mi><mo id="S2.p2.6.m6.1.1.1" xref="S2.p2.6.m6.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S2.p2.6.m6.1.1.3" xref="S2.p2.6.m6.1.1.3.cmml">𝒮</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p2.6.m6.1b"><apply id="S2.p2.6.m6.1.1.cmml" xref="S2.p2.6.m6.1.1"><in id="S2.p2.6.m6.1.1.1.cmml" xref="S2.p2.6.m6.1.1.1"></in><ci id="S2.p2.6.m6.1.1.2.cmml" xref="S2.p2.6.m6.1.1.2">𝑠</ci><ci id="S2.p2.6.m6.1.1.3.cmml" xref="S2.p2.6.m6.1.1.3">𝒮</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.6.m6.1c">s\in\mathcal{S}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.6.m6.1d">italic_s ∈ caligraphic_S</annotation></semantics></math>, there exists a <math alttext="\phi\in\mathcal{F}" class="ltx_Math" display="inline" id="S2.p2.7.m7.1"><semantics id="S2.p2.7.m7.1a"><mrow id="S2.p2.7.m7.1.1" xref="S2.p2.7.m7.1.1.cmml"><mi id="S2.p2.7.m7.1.1.2" xref="S2.p2.7.m7.1.1.2.cmml">ϕ</mi><mo id="S2.p2.7.m7.1.1.1" xref="S2.p2.7.m7.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S2.p2.7.m7.1.1.3" xref="S2.p2.7.m7.1.1.3.cmml">ℱ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p2.7.m7.1b"><apply id="S2.p2.7.m7.1.1.cmml" xref="S2.p2.7.m7.1.1"><in id="S2.p2.7.m7.1.1.1.cmml" xref="S2.p2.7.m7.1.1.1"></in><ci id="S2.p2.7.m7.1.1.2.cmml" xref="S2.p2.7.m7.1.1.2">italic-ϕ</ci><ci id="S2.p2.7.m7.1.1.3.cmml" xref="S2.p2.7.m7.1.1.3">ℱ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.7.m7.1c">\phi\in\mathcal{F}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.7.m7.1d">italic_ϕ ∈ caligraphic_F</annotation></semantics></math> where <math alttext="f(s)=\phi" class="ltx_Math" display="inline" id="S2.p2.8.m8.1"><semantics id="S2.p2.8.m8.1a"><mrow id="S2.p2.8.m8.1.2" xref="S2.p2.8.m8.1.2.cmml"><mrow id="S2.p2.8.m8.1.2.2" xref="S2.p2.8.m8.1.2.2.cmml"><mi id="S2.p2.8.m8.1.2.2.2" xref="S2.p2.8.m8.1.2.2.2.cmml">f</mi><mo id="S2.p2.8.m8.1.2.2.1" xref="S2.p2.8.m8.1.2.2.1.cmml">⁢</mo><mrow id="S2.p2.8.m8.1.2.2.3.2" xref="S2.p2.8.m8.1.2.2.cmml"><mo id="S2.p2.8.m8.1.2.2.3.2.1" stretchy="false" xref="S2.p2.8.m8.1.2.2.cmml">(</mo><mi id="S2.p2.8.m8.1.1" xref="S2.p2.8.m8.1.1.cmml">s</mi><mo id="S2.p2.8.m8.1.2.2.3.2.2" stretchy="false" xref="S2.p2.8.m8.1.2.2.cmml">)</mo></mrow></mrow><mo id="S2.p2.8.m8.1.2.1" xref="S2.p2.8.m8.1.2.1.cmml">=</mo><mi id="S2.p2.8.m8.1.2.3" xref="S2.p2.8.m8.1.2.3.cmml">ϕ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p2.8.m8.1b"><apply id="S2.p2.8.m8.1.2.cmml" xref="S2.p2.8.m8.1.2"><eq id="S2.p2.8.m8.1.2.1.cmml" xref="S2.p2.8.m8.1.2.1"></eq><apply id="S2.p2.8.m8.1.2.2.cmml" xref="S2.p2.8.m8.1.2.2"><times id="S2.p2.8.m8.1.2.2.1.cmml" xref="S2.p2.8.m8.1.2.2.1"></times><ci id="S2.p2.8.m8.1.2.2.2.cmml" xref="S2.p2.8.m8.1.2.2.2">𝑓</ci><ci id="S2.p2.8.m8.1.1.cmml" xref="S2.p2.8.m8.1.1">𝑠</ci></apply><ci id="S2.p2.8.m8.1.2.3.cmml" xref="S2.p2.8.m8.1.2.3">italic-ϕ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.8.m8.1c">f(s)=\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p2.8.m8.1d">italic_f ( italic_s ) = italic_ϕ</annotation></semantics></math>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p3">
<p class="ltx_p" id="S2.p3.2"><span class="ltx_text ltx_font_bold" id="S2.p3.2.1">Semantic correctness:</span> A transformation <math alttext="f(s)=\phi" class="ltx_Math" display="inline" id="S2.p3.1.m1.1"><semantics id="S2.p3.1.m1.1a"><mrow id="S2.p3.1.m1.1.2" xref="S2.p3.1.m1.1.2.cmml"><mrow id="S2.p3.1.m1.1.2.2" xref="S2.p3.1.m1.1.2.2.cmml"><mi id="S2.p3.1.m1.1.2.2.2" xref="S2.p3.1.m1.1.2.2.2.cmml">f</mi><mo id="S2.p3.1.m1.1.2.2.1" xref="S2.p3.1.m1.1.2.2.1.cmml">⁢</mo><mrow id="S2.p3.1.m1.1.2.2.3.2" xref="S2.p3.1.m1.1.2.2.cmml"><mo id="S2.p3.1.m1.1.2.2.3.2.1" stretchy="false" xref="S2.p3.1.m1.1.2.2.cmml">(</mo><mi id="S2.p3.1.m1.1.1" xref="S2.p3.1.m1.1.1.cmml">s</mi><mo id="S2.p3.1.m1.1.2.2.3.2.2" stretchy="false" xref="S2.p3.1.m1.1.2.2.cmml">)</mo></mrow></mrow><mo id="S2.p3.1.m1.1.2.1" xref="S2.p3.1.m1.1.2.1.cmml">=</mo><mi id="S2.p3.1.m1.1.2.3" xref="S2.p3.1.m1.1.2.3.cmml">ϕ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p3.1.m1.1b"><apply id="S2.p3.1.m1.1.2.cmml" xref="S2.p3.1.m1.1.2"><eq id="S2.p3.1.m1.1.2.1.cmml" xref="S2.p3.1.m1.1.2.1"></eq><apply id="S2.p3.1.m1.1.2.2.cmml" xref="S2.p3.1.m1.1.2.2"><times id="S2.p3.1.m1.1.2.2.1.cmml" xref="S2.p3.1.m1.1.2.2.1"></times><ci id="S2.p3.1.m1.1.2.2.2.cmml" xref="S2.p3.1.m1.1.2.2.2">𝑓</ci><ci id="S2.p3.1.m1.1.1.cmml" xref="S2.p3.1.m1.1.1">𝑠</ci></apply><ci id="S2.p3.1.m1.1.2.3.cmml" xref="S2.p3.1.m1.1.2.3">italic-ϕ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p3.1.m1.1c">f(s)=\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p3.1.m1.1d">italic_f ( italic_s ) = italic_ϕ</annotation></semantics></math> is semantically correct if there exists a model <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="S2.p3.2.m2.1"><semantics id="S2.p3.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p3.2.m2.1.1" xref="S2.p3.2.m2.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="S2.p3.2.m2.1b"><ci id="S2.p3.2.m2.1.1.cmml" xref="S2.p3.2.m2.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p3.2.m2.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="S2.p3.2.m2.1d">caligraphic_M</annotation></semantics></math> such that:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.Ex1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\exists\mathcal{M}\quad\text{:}\quad\mathcal{M}\models s\quad\text{and}\quad%
\mathcal{M}\models\phi," class="ltx_Math" display="block" id="S2.Ex1.m1.5"><semantics id="S2.Ex1.m1.5a"><mrow id="S2.Ex1.m1.5.5.1"><mrow id="S2.Ex1.m1.5.5.1.1.2" xref="S2.Ex1.m1.5.5.1.1.3.cmml"><mrow id="S2.Ex1.m1.5.5.1.1.1.1" xref="S2.Ex1.m1.5.5.1.1.1.1.cmml"><mrow id="S2.Ex1.m1.5.5.1.1.1.1.1.1" xref="S2.Ex1.m1.5.5.1.1.1.1.1.2.cmml"><mrow id="S2.Ex1.m1.5.5.1.1.1.1.1.1.1" xref="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.cmml"><mo id="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.1" rspace="0.167em" xref="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.1.cmml">∃</mo><mi class="ltx_font_mathcaligraphic" id="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.2" xref="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.2.cmml">ℳ</mi></mrow><mspace id="S2.Ex1.m1.5.5.1.1.1.1.1.1.2" width="1em" xref="S2.Ex1.m1.5.5.1.1.1.1.1.2.cmml"></mspace><mtext id="S2.Ex1.m1.1.1" xref="S2.Ex1.m1.1.1a.cmml">:</mtext><mspace id="S2.Ex1.m1.5.5.1.1.1.1.1.1.3" width="1em" xref="S2.Ex1.m1.5.5.1.1.1.1.1.2.cmml"></mspace><mi class="ltx_font_mathcaligraphic" id="S2.Ex1.m1.2.2" xref="S2.Ex1.m1.2.2.cmml">ℳ</mi></mrow><mo id="S2.Ex1.m1.5.5.1.1.1.1.2" xref="S2.Ex1.m1.5.5.1.1.1.1.2.cmml">⊧</mo><mi id="S2.Ex1.m1.5.5.1.1.1.1.3" xref="S2.Ex1.m1.5.5.1.1.1.1.3.cmml">s</mi></mrow><mspace id="S2.Ex1.m1.5.5.1.1.2.3" width="1em" xref="S2.Ex1.m1.5.5.1.1.3a.cmml"></mspace><mrow id="S2.Ex1.m1.5.5.1.1.2.2" xref="S2.Ex1.m1.5.5.1.1.2.2.cmml"><mrow id="S2.Ex1.m1.5.5.1.1.2.2.2.2" xref="S2.Ex1.m1.5.5.1.1.2.2.2.1.cmml"><mtext id="S2.Ex1.m1.3.3" xref="S2.Ex1.m1.3.3a.cmml">and</mtext><mspace id="S2.Ex1.m1.5.5.1.1.2.2.2.2.1" width="1em" xref="S2.Ex1.m1.5.5.1.1.2.2.2.1.cmml"></mspace><mi class="ltx_font_mathcaligraphic" id="S2.Ex1.m1.4.4" xref="S2.Ex1.m1.4.4.cmml">ℳ</mi></mrow><mo id="S2.Ex1.m1.5.5.1.1.2.2.1" xref="S2.Ex1.m1.5.5.1.1.2.2.1.cmml">⊧</mo><mi id="S2.Ex1.m1.5.5.1.1.2.2.3" xref="S2.Ex1.m1.5.5.1.1.2.2.3.cmml">ϕ</mi></mrow></mrow><mo id="S2.Ex1.m1.5.5.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex1.m1.5b"><apply id="S2.Ex1.m1.5.5.1.1.3.cmml" xref="S2.Ex1.m1.5.5.1.1.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.5.5.1.1.3a.cmml" xref="S2.Ex1.m1.5.5.1.1.2.3">formulae-sequence</csymbol><apply id="S2.Ex1.m1.5.5.1.1.1.1.cmml" xref="S2.Ex1.m1.5.5.1.1.1.1"><csymbol cd="latexml" id="S2.Ex1.m1.5.5.1.1.1.1.2.cmml" xref="S2.Ex1.m1.5.5.1.1.1.1.2">models</csymbol><list id="S2.Ex1.m1.5.5.1.1.1.1.1.2.cmml" xref="S2.Ex1.m1.5.5.1.1.1.1.1.1"><apply id="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m1.5.5.1.1.1.1.1.1.1"><exists id="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.1"></exists><ci id="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.2.cmml" xref="S2.Ex1.m1.5.5.1.1.1.1.1.1.1.2">ℳ</ci></apply><ci id="S2.Ex1.m1.1.1a.cmml" xref="S2.Ex1.m1.1.1"><mtext id="S2.Ex1.m1.1.1.cmml" xref="S2.Ex1.m1.1.1">:</mtext></ci><ci id="S2.Ex1.m1.2.2.cmml" xref="S2.Ex1.m1.2.2">ℳ</ci></list><ci id="S2.Ex1.m1.5.5.1.1.1.1.3.cmml" xref="S2.Ex1.m1.5.5.1.1.1.1.3">𝑠</ci></apply><apply id="S2.Ex1.m1.5.5.1.1.2.2.cmml" xref="S2.Ex1.m1.5.5.1.1.2.2"><csymbol cd="latexml" id="S2.Ex1.m1.5.5.1.1.2.2.1.cmml" xref="S2.Ex1.m1.5.5.1.1.2.2.1">models</csymbol><list id="S2.Ex1.m1.5.5.1.1.2.2.2.1.cmml" xref="S2.Ex1.m1.5.5.1.1.2.2.2.2"><ci id="S2.Ex1.m1.3.3a.cmml" xref="S2.Ex1.m1.3.3"><mtext id="S2.Ex1.m1.3.3.cmml" xref="S2.Ex1.m1.3.3">and</mtext></ci><ci id="S2.Ex1.m1.4.4.cmml" xref="S2.Ex1.m1.4.4">ℳ</ci></list><ci id="S2.Ex1.m1.5.5.1.1.2.2.3.cmml" xref="S2.Ex1.m1.5.5.1.1.2.2.3">italic-ϕ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex1.m1.5c">\exists\mathcal{M}\quad\text{:}\quad\mathcal{M}\models s\quad\text{and}\quad%
\mathcal{M}\models\phi,</annotation><annotation encoding="application/x-llamapun" id="S2.Ex1.m1.5d">∃ caligraphic_M : caligraphic_M ⊧ italic_s and caligraphic_M ⊧ italic_ϕ ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.p3.3">where <math alttext="\models" class="ltx_Math" display="inline" id="S2.p3.3.m1.1"><semantics id="S2.p3.3.m1.1a"><mo id="S2.p3.3.m1.1.1" xref="S2.p3.3.m1.1.1.cmml">⊧</mo><annotation-xml encoding="MathML-Content" id="S2.p3.3.m1.1b"><csymbol cd="latexml" id="S2.p3.3.m1.1.1.cmml" xref="S2.p3.3.m1.1.1">models</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.p3.3.m1.1c">\models</annotation><annotation encoding="application/x-llamapun" id="S2.p3.3.m1.1d">⊧</annotation></semantics></math> denotes that the former item satisfies or correctly interprets the latter.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p4">
<p class="ltx_p" id="S2.p4.5"><span class="ltx_text ltx_font_bold" id="S2.p4.5.1">Library-based autoformalization:</span> Given a Knowledge Base (<math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S2.p4.1.m1.1"><semantics id="S2.p4.1.m1.1a"><mrow id="S2.p4.1.m1.1.1" xref="S2.p4.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p4.1.m1.1.1.2" xref="S2.p4.1.m1.1.1.2.cmml">𝒦</mi><mo id="S2.p4.1.m1.1.1.1" xref="S2.p4.1.m1.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p4.1.m1.1.1.3" xref="S2.p4.1.m1.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p4.1.m1.1b"><apply id="S2.p4.1.m1.1.1.cmml" xref="S2.p4.1.m1.1.1"><times id="S2.p4.1.m1.1.1.1.cmml" xref="S2.p4.1.m1.1.1.1"></times><ci id="S2.p4.1.m1.1.1.2.cmml" xref="S2.p4.1.m1.1.1.2">𝒦</ci><ci id="S2.p4.1.m1.1.1.3.cmml" xref="S2.p4.1.m1.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p4.1.m1.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.p4.1.m1.1d">caligraphic_K caligraphic_B</annotation></semantics></math>) of formalised mathematical statements under a formal language <math alttext="\mathcal{F}" class="ltx_Math" display="inline" id="S2.p4.2.m2.1"><semantics id="S2.p4.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p4.2.m2.1.1" xref="S2.p4.2.m2.1.1.cmml">ℱ</mi><annotation-xml encoding="MathML-Content" id="S2.p4.2.m2.1b"><ci id="S2.p4.2.m2.1.1.cmml" xref="S2.p4.2.m2.1.1">ℱ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p4.2.m2.1c">\mathcal{F}</annotation><annotation encoding="application/x-llamapun" id="S2.p4.2.m2.1d">caligraphic_F</annotation></semantics></math>, a <span class="ltx_text ltx_font_italic" id="S2.p4.5.2">library-based autoformalization transformation function</span> <math alttext="f_{\Phi}" class="ltx_Math" display="inline" id="S2.p4.3.m3.1"><semantics id="S2.p4.3.m3.1a"><msub id="S2.p4.3.m3.1.1" xref="S2.p4.3.m3.1.1.cmml"><mi id="S2.p4.3.m3.1.1.2" xref="S2.p4.3.m3.1.1.2.cmml">f</mi><mi id="S2.p4.3.m3.1.1.3" mathvariant="normal" xref="S2.p4.3.m3.1.1.3.cmml">Φ</mi></msub><annotation-xml encoding="MathML-Content" id="S2.p4.3.m3.1b"><apply id="S2.p4.3.m3.1.1.cmml" xref="S2.p4.3.m3.1.1"><csymbol cd="ambiguous" id="S2.p4.3.m3.1.1.1.cmml" xref="S2.p4.3.m3.1.1">subscript</csymbol><ci id="S2.p4.3.m3.1.1.2.cmml" xref="S2.p4.3.m3.1.1.2">𝑓</ci><ci id="S2.p4.3.m3.1.1.3.cmml" xref="S2.p4.3.m3.1.1.3">Φ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p4.3.m3.1c">f_{\Phi}</annotation><annotation encoding="application/x-llamapun" id="S2.p4.3.m3.1d">italic_f start_POSTSUBSCRIPT roman_Φ end_POSTSUBSCRIPT</annotation></semantics></math> is defined such that the generated statement <math alttext="\phi" class="ltx_Math" display="inline" id="S2.p4.4.m4.1"><semantics id="S2.p4.4.m4.1a"><mi id="S2.p4.4.m4.1.1" xref="S2.p4.4.m4.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.p4.4.m4.1b"><ci id="S2.p4.4.m4.1.1.cmml" xref="S2.p4.4.m4.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p4.4.m4.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p4.4.m4.1d">italic_ϕ</annotation></semantics></math> is semantically consistent with the set of statements <math alttext="\Phi\in\mathcal{KB}" class="ltx_Math" display="inline" id="S2.p4.5.m5.1"><semantics id="S2.p4.5.m5.1a"><mrow id="S2.p4.5.m5.1.1" xref="S2.p4.5.m5.1.1.cmml"><mi id="S2.p4.5.m5.1.1.2" mathvariant="normal" xref="S2.p4.5.m5.1.1.2.cmml">Φ</mi><mo id="S2.p4.5.m5.1.1.1" xref="S2.p4.5.m5.1.1.1.cmml">∈</mo><mrow id="S2.p4.5.m5.1.1.3" xref="S2.p4.5.m5.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p4.5.m5.1.1.3.2" xref="S2.p4.5.m5.1.1.3.2.cmml">𝒦</mi><mo id="S2.p4.5.m5.1.1.3.1" xref="S2.p4.5.m5.1.1.3.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p4.5.m5.1.1.3.3" xref="S2.p4.5.m5.1.1.3.3.cmml">ℬ</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p4.5.m5.1b"><apply id="S2.p4.5.m5.1.1.cmml" xref="S2.p4.5.m5.1.1"><in id="S2.p4.5.m5.1.1.1.cmml" xref="S2.p4.5.m5.1.1.1"></in><ci id="S2.p4.5.m5.1.1.2.cmml" xref="S2.p4.5.m5.1.1.2">Φ</ci><apply id="S2.p4.5.m5.1.1.3.cmml" xref="S2.p4.5.m5.1.1.3"><times id="S2.p4.5.m5.1.1.3.1.cmml" xref="S2.p4.5.m5.1.1.3.1"></times><ci id="S2.p4.5.m5.1.1.3.2.cmml" xref="S2.p4.5.m5.1.1.3.2">𝒦</ci><ci id="S2.p4.5.m5.1.1.3.3.cmml" xref="S2.p4.5.m5.1.1.3.3">ℬ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p4.5.m5.1c">\Phi\in\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.p4.5.m5.1d">roman_Φ ∈ caligraphic_K caligraphic_B</annotation></semantics></math>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p5">
<p class="ltx_p" id="S2.p5.9"><span class="ltx_text ltx_font_bold" id="S2.p5.9.1">Semantic consistency:</span> A statement <math alttext="\phi" class="ltx_Math" display="inline" id="S2.p5.1.m1.1"><semantics id="S2.p5.1.m1.1a"><mi id="S2.p5.1.m1.1.1" xref="S2.p5.1.m1.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.p5.1.m1.1b"><ci id="S2.p5.1.m1.1.1.cmml" xref="S2.p5.1.m1.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.1.m1.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p5.1.m1.1d">italic_ϕ</annotation></semantics></math> is semantically consistent with respect to <math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S2.p5.2.m2.1"><semantics id="S2.p5.2.m2.1a"><mrow id="S2.p5.2.m2.1.1" xref="S2.p5.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p5.2.m2.1.1.2" xref="S2.p5.2.m2.1.1.2.cmml">𝒦</mi><mo id="S2.p5.2.m2.1.1.1" xref="S2.p5.2.m2.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p5.2.m2.1.1.3" xref="S2.p5.2.m2.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p5.2.m2.1b"><apply id="S2.p5.2.m2.1.1.cmml" xref="S2.p5.2.m2.1.1"><times id="S2.p5.2.m2.1.1.1.cmml" xref="S2.p5.2.m2.1.1.1"></times><ci id="S2.p5.2.m2.1.1.2.cmml" xref="S2.p5.2.m2.1.1.2">𝒦</ci><ci id="S2.p5.2.m2.1.1.3.cmml" xref="S2.p5.2.m2.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.2.m2.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.p5.2.m2.1d">caligraphic_K caligraphic_B</annotation></semantics></math> if all terms in <math alttext="\phi" class="ltx_Math" display="inline" id="S2.p5.3.m3.1"><semantics id="S2.p5.3.m3.1a"><mi id="S2.p5.3.m3.1.1" xref="S2.p5.3.m3.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.p5.3.m3.1b"><ci id="S2.p5.3.m3.1.1.cmml" xref="S2.p5.3.m3.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.3.m3.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p5.3.m3.1d">italic_ϕ</annotation></semantics></math> that have references in <math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S2.p5.4.m4.1"><semantics id="S2.p5.4.m4.1a"><mrow id="S2.p5.4.m4.1.1" xref="S2.p5.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p5.4.m4.1.1.2" xref="S2.p5.4.m4.1.1.2.cmml">𝒦</mi><mo id="S2.p5.4.m4.1.1.1" xref="S2.p5.4.m4.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p5.4.m4.1.1.3" xref="S2.p5.4.m4.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p5.4.m4.1b"><apply id="S2.p5.4.m4.1.1.cmml" xref="S2.p5.4.m4.1.1"><times id="S2.p5.4.m4.1.1.1.cmml" xref="S2.p5.4.m4.1.1.1"></times><ci id="S2.p5.4.m4.1.1.2.cmml" xref="S2.p5.4.m4.1.1.2">𝒦</ci><ci id="S2.p5.4.m4.1.1.3.cmml" xref="S2.p5.4.m4.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.4.m4.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.p5.4.m4.1d">caligraphic_K caligraphic_B</annotation></semantics></math> are used consistently with the terms in <math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S2.p5.5.m5.1"><semantics id="S2.p5.5.m5.1a"><mrow id="S2.p5.5.m5.1.1" xref="S2.p5.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p5.5.m5.1.1.2" xref="S2.p5.5.m5.1.1.2.cmml">𝒦</mi><mo id="S2.p5.5.m5.1.1.1" xref="S2.p5.5.m5.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p5.5.m5.1.1.3" xref="S2.p5.5.m5.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p5.5.m5.1b"><apply id="S2.p5.5.m5.1.1.cmml" xref="S2.p5.5.m5.1.1"><times id="S2.p5.5.m5.1.1.1.cmml" xref="S2.p5.5.m5.1.1.1"></times><ci id="S2.p5.5.m5.1.1.2.cmml" xref="S2.p5.5.m5.1.1.2">𝒦</ci><ci id="S2.p5.5.m5.1.1.3.cmml" xref="S2.p5.5.m5.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.5.m5.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.p5.5.m5.1d">caligraphic_K caligraphic_B</annotation></semantics></math>. Formally, let <math alttext="\phi" class="ltx_Math" display="inline" id="S2.p5.6.m6.1"><semantics id="S2.p5.6.m6.1a"><mi id="S2.p5.6.m6.1.1" xref="S2.p5.6.m6.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.p5.6.m6.1b"><ci id="S2.p5.6.m6.1.1.cmml" xref="S2.p5.6.m6.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.6.m6.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p5.6.m6.1d">italic_ϕ</annotation></semantics></math> be a statement and <math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S2.p5.7.m7.1"><semantics id="S2.p5.7.m7.1a"><mrow id="S2.p5.7.m7.1.1" xref="S2.p5.7.m7.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p5.7.m7.1.1.2" xref="S2.p5.7.m7.1.1.2.cmml">𝒦</mi><mo id="S2.p5.7.m7.1.1.1" xref="S2.p5.7.m7.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p5.7.m7.1.1.3" xref="S2.p5.7.m7.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p5.7.m7.1b"><apply id="S2.p5.7.m7.1.1.cmml" xref="S2.p5.7.m7.1.1"><times id="S2.p5.7.m7.1.1.1.cmml" xref="S2.p5.7.m7.1.1.1"></times><ci id="S2.p5.7.m7.1.1.2.cmml" xref="S2.p5.7.m7.1.1.2">𝒦</ci><ci id="S2.p5.7.m7.1.1.3.cmml" xref="S2.p5.7.m7.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.7.m7.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.p5.7.m7.1d">caligraphic_K caligraphic_B</annotation></semantics></math> be a knowledge base. <math alttext="\phi" class="ltx_Math" display="inline" id="S2.p5.8.m8.1"><semantics id="S2.p5.8.m8.1a"><mi id="S2.p5.8.m8.1.1" xref="S2.p5.8.m8.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.p5.8.m8.1b"><ci id="S2.p5.8.m8.1.1.cmml" xref="S2.p5.8.m8.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.8.m8.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p5.8.m8.1d">italic_ϕ</annotation></semantics></math> is semantically consistent with respect to <math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S2.p5.9.m9.1"><semantics id="S2.p5.9.m9.1a"><mrow id="S2.p5.9.m9.1.1" xref="S2.p5.9.m9.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p5.9.m9.1.1.2" xref="S2.p5.9.m9.1.1.2.cmml">𝒦</mi><mo id="S2.p5.9.m9.1.1.1" xref="S2.p5.9.m9.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p5.9.m9.1.1.3" xref="S2.p5.9.m9.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p5.9.m9.1b"><apply id="S2.p5.9.m9.1.1.cmml" xref="S2.p5.9.m9.1.1"><times id="S2.p5.9.m9.1.1.1.cmml" xref="S2.p5.9.m9.1.1.1"></times><ci id="S2.p5.9.m9.1.1.2.cmml" xref="S2.p5.9.m9.1.1.2">𝒦</ci><ci id="S2.p5.9.m9.1.1.3.cmml" xref="S2.p5.9.m9.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.9.m9.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.p5.9.m9.1d">caligraphic_K caligraphic_B</annotation></semantics></math> if:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.Ex2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\forall t\in\text{terms}(\phi)\cap\text{references}(\mathcal{KB}),\quad t_{%
\phi}=t_{\mathcal{KB}}," class="ltx_Math" display="block" id="S2.Ex2.m1.2"><semantics id="S2.Ex2.m1.2a"><mrow id="S2.Ex2.m1.2.2.1"><mrow id="S2.Ex2.m1.2.2.1.1.2" xref="S2.Ex2.m1.2.2.1.1.3.cmml"><mrow id="S2.Ex2.m1.2.2.1.1.1.1" xref="S2.Ex2.m1.2.2.1.1.1.1.cmml"><mrow id="S2.Ex2.m1.2.2.1.1.1.1.3" xref="S2.Ex2.m1.2.2.1.1.1.1.3.cmml"><mo id="S2.Ex2.m1.2.2.1.1.1.1.3.1" rspace="0.167em" xref="S2.Ex2.m1.2.2.1.1.1.1.3.1.cmml">∀</mo><mi id="S2.Ex2.m1.2.2.1.1.1.1.3.2" xref="S2.Ex2.m1.2.2.1.1.1.1.3.2.cmml">t</mi></mrow><mo id="S2.Ex2.m1.2.2.1.1.1.1.2" xref="S2.Ex2.m1.2.2.1.1.1.1.2.cmml">∈</mo><mrow id="S2.Ex2.m1.2.2.1.1.1.1.1" xref="S2.Ex2.m1.2.2.1.1.1.1.1.cmml"><mrow id="S2.Ex2.m1.2.2.1.1.1.1.1.3" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.cmml"><mtext id="S2.Ex2.m1.2.2.1.1.1.1.1.3.2" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.2a.cmml">terms</mtext><mo id="S2.Ex2.m1.2.2.1.1.1.1.1.3.1" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.1.cmml">⁢</mo><mrow id="S2.Ex2.m1.2.2.1.1.1.1.1.3.3.2" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.cmml"><mo id="S2.Ex2.m1.2.2.1.1.1.1.1.3.3.2.1" stretchy="false" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.cmml">(</mo><mi id="S2.Ex2.m1.1.1" xref="S2.Ex2.m1.1.1.cmml">ϕ</mi><mo id="S2.Ex2.m1.2.2.1.1.1.1.1.3.3.2.2" stretchy="false" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.cmml">)</mo></mrow></mrow><mo id="S2.Ex2.m1.2.2.1.1.1.1.1.2" xref="S2.Ex2.m1.2.2.1.1.1.1.1.2.cmml">∩</mo><mrow id="S2.Ex2.m1.2.2.1.1.1.1.1.1" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.cmml"><mtext id="S2.Ex2.m1.2.2.1.1.1.1.1.1.3" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.3a.cmml">references</mtext><mo id="S2.Ex2.m1.2.2.1.1.1.1.1.1.2" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><mo id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.2" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml">𝒦</mi><mo id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.1" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.3" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml">ℬ</mi></mrow><mo id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S2.Ex2.m1.2.2.1.1.2.3" rspace="1.167em" xref="S2.Ex2.m1.2.2.1.1.3a.cmml">,</mo><mrow id="S2.Ex2.m1.2.2.1.1.2.2" xref="S2.Ex2.m1.2.2.1.1.2.2.cmml"><msub id="S2.Ex2.m1.2.2.1.1.2.2.2" xref="S2.Ex2.m1.2.2.1.1.2.2.2.cmml"><mi id="S2.Ex2.m1.2.2.1.1.2.2.2.2" xref="S2.Ex2.m1.2.2.1.1.2.2.2.2.cmml">t</mi><mi id="S2.Ex2.m1.2.2.1.1.2.2.2.3" xref="S2.Ex2.m1.2.2.1.1.2.2.2.3.cmml">ϕ</mi></msub><mo id="S2.Ex2.m1.2.2.1.1.2.2.1" xref="S2.Ex2.m1.2.2.1.1.2.2.1.cmml">=</mo><msub id="S2.Ex2.m1.2.2.1.1.2.2.3" xref="S2.Ex2.m1.2.2.1.1.2.2.3.cmml"><mi id="S2.Ex2.m1.2.2.1.1.2.2.3.2" xref="S2.Ex2.m1.2.2.1.1.2.2.3.2.cmml">t</mi><mrow id="S2.Ex2.m1.2.2.1.1.2.2.3.3" xref="S2.Ex2.m1.2.2.1.1.2.2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.Ex2.m1.2.2.1.1.2.2.3.3.2" xref="S2.Ex2.m1.2.2.1.1.2.2.3.3.2.cmml">𝒦</mi><mo id="S2.Ex2.m1.2.2.1.1.2.2.3.3.1" xref="S2.Ex2.m1.2.2.1.1.2.2.3.3.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.Ex2.m1.2.2.1.1.2.2.3.3.3" xref="S2.Ex2.m1.2.2.1.1.2.2.3.3.3.cmml">ℬ</mi></mrow></msub></mrow></mrow><mo id="S2.Ex2.m1.2.2.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex2.m1.2b"><apply id="S2.Ex2.m1.2.2.1.1.3.cmml" xref="S2.Ex2.m1.2.2.1.1.2"><csymbol cd="ambiguous" id="S2.Ex2.m1.2.2.1.1.3a.cmml" xref="S2.Ex2.m1.2.2.1.1.2.3">formulae-sequence</csymbol><apply id="S2.Ex2.m1.2.2.1.1.1.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1"><in id="S2.Ex2.m1.2.2.1.1.1.1.2.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.2"></in><apply id="S2.Ex2.m1.2.2.1.1.1.1.3.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.3"><csymbol cd="latexml" id="S2.Ex2.m1.2.2.1.1.1.1.3.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.3.1">for-all</csymbol><ci id="S2.Ex2.m1.2.2.1.1.1.1.3.2.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.3.2">𝑡</ci></apply><apply id="S2.Ex2.m1.2.2.1.1.1.1.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1"><intersect id="S2.Ex2.m1.2.2.1.1.1.1.1.2.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.2"></intersect><apply id="S2.Ex2.m1.2.2.1.1.1.1.1.3.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3"><times id="S2.Ex2.m1.2.2.1.1.1.1.1.3.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.1"></times><ci id="S2.Ex2.m1.2.2.1.1.1.1.1.3.2a.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.2"><mtext id="S2.Ex2.m1.2.2.1.1.1.1.1.3.2.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.3.2">terms</mtext></ci><ci id="S2.Ex2.m1.1.1.cmml" xref="S2.Ex2.m1.1.1">italic-ϕ</ci></apply><apply id="S2.Ex2.m1.2.2.1.1.1.1.1.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1"><times id="S2.Ex2.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.2"></times><ci id="S2.Ex2.m1.2.2.1.1.1.1.1.1.3a.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.3"><mtext id="S2.Ex2.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.3">references</mtext></ci><apply id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1"><times id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.1"></times><ci id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.2">𝒦</ci><ci id="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.Ex2.m1.2.2.1.1.1.1.1.1.1.1.1.3">ℬ</ci></apply></apply></apply></apply><apply id="S2.Ex2.m1.2.2.1.1.2.2.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2"><eq id="S2.Ex2.m1.2.2.1.1.2.2.1.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.1"></eq><apply id="S2.Ex2.m1.2.2.1.1.2.2.2.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.Ex2.m1.2.2.1.1.2.2.2.1.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.2">subscript</csymbol><ci id="S2.Ex2.m1.2.2.1.1.2.2.2.2.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.2.2">𝑡</ci><ci id="S2.Ex2.m1.2.2.1.1.2.2.2.3.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.2.3">italic-ϕ</ci></apply><apply id="S2.Ex2.m1.2.2.1.1.2.2.3.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.3"><csymbol cd="ambiguous" id="S2.Ex2.m1.2.2.1.1.2.2.3.1.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.3">subscript</csymbol><ci id="S2.Ex2.m1.2.2.1.1.2.2.3.2.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.3.2">𝑡</ci><apply id="S2.Ex2.m1.2.2.1.1.2.2.3.3.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.3.3"><times id="S2.Ex2.m1.2.2.1.1.2.2.3.3.1.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.3.3.1"></times><ci id="S2.Ex2.m1.2.2.1.1.2.2.3.3.2.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.3.3.2">𝒦</ci><ci id="S2.Ex2.m1.2.2.1.1.2.2.3.3.3.cmml" xref="S2.Ex2.m1.2.2.1.1.2.2.3.3.3">ℬ</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex2.m1.2c">\forall t\in\text{terms}(\phi)\cap\text{references}(\mathcal{KB}),\quad t_{%
\phi}=t_{\mathcal{KB}},</annotation><annotation encoding="application/x-llamapun" id="S2.Ex2.m1.2d">∀ italic_t ∈ terms ( italic_ϕ ) ∩ references ( caligraphic_K caligraphic_B ) , italic_t start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT = italic_t start_POSTSUBSCRIPT caligraphic_K caligraphic_B end_POSTSUBSCRIPT ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.p5.13">where <math alttext="\text{terms}(\phi)" class="ltx_Math" display="inline" id="S2.p5.10.m1.1"><semantics id="S2.p5.10.m1.1a"><mrow id="S2.p5.10.m1.1.2" xref="S2.p5.10.m1.1.2.cmml"><mtext id="S2.p5.10.m1.1.2.2" xref="S2.p5.10.m1.1.2.2a.cmml">terms</mtext><mo id="S2.p5.10.m1.1.2.1" xref="S2.p5.10.m1.1.2.1.cmml">⁢</mo><mrow id="S2.p5.10.m1.1.2.3.2" xref="S2.p5.10.m1.1.2.cmml"><mo id="S2.p5.10.m1.1.2.3.2.1" stretchy="false" xref="S2.p5.10.m1.1.2.cmml">(</mo><mi id="S2.p5.10.m1.1.1" xref="S2.p5.10.m1.1.1.cmml">ϕ</mi><mo id="S2.p5.10.m1.1.2.3.2.2" stretchy="false" xref="S2.p5.10.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p5.10.m1.1b"><apply id="S2.p5.10.m1.1.2.cmml" xref="S2.p5.10.m1.1.2"><times id="S2.p5.10.m1.1.2.1.cmml" xref="S2.p5.10.m1.1.2.1"></times><ci id="S2.p5.10.m1.1.2.2a.cmml" xref="S2.p5.10.m1.1.2.2"><mtext id="S2.p5.10.m1.1.2.2.cmml" xref="S2.p5.10.m1.1.2.2">terms</mtext></ci><ci id="S2.p5.10.m1.1.1.cmml" xref="S2.p5.10.m1.1.1">italic-ϕ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.10.m1.1c">\text{terms}(\phi)</annotation><annotation encoding="application/x-llamapun" id="S2.p5.10.m1.1d">terms ( italic_ϕ )</annotation></semantics></math> denotes the set of terms in <math alttext="\phi" class="ltx_Math" display="inline" id="S2.p5.11.m2.1"><semantics id="S2.p5.11.m2.1a"><mi id="S2.p5.11.m2.1.1" xref="S2.p5.11.m2.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.p5.11.m2.1b"><ci id="S2.p5.11.m2.1.1.cmml" xref="S2.p5.11.m2.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.11.m2.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S2.p5.11.m2.1d">italic_ϕ</annotation></semantics></math> and <math alttext="\text{references}(\mathcal{KB})" class="ltx_Math" display="inline" id="S2.p5.12.m3.1"><semantics id="S2.p5.12.m3.1a"><mrow id="S2.p5.12.m3.1.1" xref="S2.p5.12.m3.1.1.cmml"><mtext id="S2.p5.12.m3.1.1.3" xref="S2.p5.12.m3.1.1.3a.cmml">references</mtext><mo id="S2.p5.12.m3.1.1.2" xref="S2.p5.12.m3.1.1.2.cmml">⁢</mo><mrow id="S2.p5.12.m3.1.1.1.1" xref="S2.p5.12.m3.1.1.1.1.1.cmml"><mo id="S2.p5.12.m3.1.1.1.1.2" stretchy="false" xref="S2.p5.12.m3.1.1.1.1.1.cmml">(</mo><mrow id="S2.p5.12.m3.1.1.1.1.1" xref="S2.p5.12.m3.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p5.12.m3.1.1.1.1.1.2" xref="S2.p5.12.m3.1.1.1.1.1.2.cmml">𝒦</mi><mo id="S2.p5.12.m3.1.1.1.1.1.1" xref="S2.p5.12.m3.1.1.1.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p5.12.m3.1.1.1.1.1.3" xref="S2.p5.12.m3.1.1.1.1.1.3.cmml">ℬ</mi></mrow><mo id="S2.p5.12.m3.1.1.1.1.3" stretchy="false" xref="S2.p5.12.m3.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p5.12.m3.1b"><apply id="S2.p5.12.m3.1.1.cmml" xref="S2.p5.12.m3.1.1"><times id="S2.p5.12.m3.1.1.2.cmml" xref="S2.p5.12.m3.1.1.2"></times><ci id="S2.p5.12.m3.1.1.3a.cmml" xref="S2.p5.12.m3.1.1.3"><mtext id="S2.p5.12.m3.1.1.3.cmml" xref="S2.p5.12.m3.1.1.3">references</mtext></ci><apply id="S2.p5.12.m3.1.1.1.1.1.cmml" xref="S2.p5.12.m3.1.1.1.1"><times id="S2.p5.12.m3.1.1.1.1.1.1.cmml" xref="S2.p5.12.m3.1.1.1.1.1.1"></times><ci id="S2.p5.12.m3.1.1.1.1.1.2.cmml" xref="S2.p5.12.m3.1.1.1.1.1.2">𝒦</ci><ci id="S2.p5.12.m3.1.1.1.1.1.3.cmml" xref="S2.p5.12.m3.1.1.1.1.1.3">ℬ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.12.m3.1c">\text{references}(\mathcal{KB})</annotation><annotation encoding="application/x-llamapun" id="S2.p5.12.m3.1d">references ( caligraphic_K caligraphic_B )</annotation></semantics></math> denotes the set of referenced terms in <math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S2.p5.13.m4.1"><semantics id="S2.p5.13.m4.1a"><mrow id="S2.p5.13.m4.1.1" xref="S2.p5.13.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p5.13.m4.1.1.2" xref="S2.p5.13.m4.1.1.2.cmml">𝒦</mi><mo id="S2.p5.13.m4.1.1.1" xref="S2.p5.13.m4.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.p5.13.m4.1.1.3" xref="S2.p5.13.m4.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.p5.13.m4.1b"><apply id="S2.p5.13.m4.1.1.cmml" xref="S2.p5.13.m4.1.1"><times id="S2.p5.13.m4.1.1.1.cmml" xref="S2.p5.13.m4.1.1.1"></times><ci id="S2.p5.13.m4.1.1.2.cmml" xref="S2.p5.13.m4.1.1.2">𝒦</ci><ci id="S2.p5.13.m4.1.1.3.cmml" xref="S2.p5.13.m4.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p5.13.m4.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.p5.13.m4.1d">caligraphic_K caligraphic_B</annotation></semantics></math>.</p>
</div>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Most-Similar Retrieval Augmented Generation (MS-RAG)</h3>
<div class="ltx_para ltx_noindent" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.5">Under the aforementioned formal notations, autoformalization via LLMs defines the transformation function as:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.Ex3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="f(s)=\text{LLM}(p_{\text{auto}},\{(s_{i},\phi_{i})\},s)," class="ltx_Math" display="block" id="S2.Ex3.m1.3"><semantics id="S2.Ex3.m1.3a"><mrow id="S2.Ex3.m1.3.3.1" xref="S2.Ex3.m1.3.3.1.1.cmml"><mrow id="S2.Ex3.m1.3.3.1.1" xref="S2.Ex3.m1.3.3.1.1.cmml"><mrow id="S2.Ex3.m1.3.3.1.1.4" xref="S2.Ex3.m1.3.3.1.1.4.cmml"><mi id="S2.Ex3.m1.3.3.1.1.4.2" xref="S2.Ex3.m1.3.3.1.1.4.2.cmml">f</mi><mo id="S2.Ex3.m1.3.3.1.1.4.1" xref="S2.Ex3.m1.3.3.1.1.4.1.cmml">⁢</mo><mrow id="S2.Ex3.m1.3.3.1.1.4.3.2" xref="S2.Ex3.m1.3.3.1.1.4.cmml"><mo id="S2.Ex3.m1.3.3.1.1.4.3.2.1" stretchy="false" xref="S2.Ex3.m1.3.3.1.1.4.cmml">(</mo><mi id="S2.Ex3.m1.1.1" xref="S2.Ex3.m1.1.1.cmml">s</mi><mo id="S2.Ex3.m1.3.3.1.1.4.3.2.2" stretchy="false" xref="S2.Ex3.m1.3.3.1.1.4.cmml">)</mo></mrow></mrow><mo id="S2.Ex3.m1.3.3.1.1.3" xref="S2.Ex3.m1.3.3.1.1.3.cmml">=</mo><mrow id="S2.Ex3.m1.3.3.1.1.2" xref="S2.Ex3.m1.3.3.1.1.2.cmml"><mtext id="S2.Ex3.m1.3.3.1.1.2.4" xref="S2.Ex3.m1.3.3.1.1.2.4a.cmml">LLM</mtext><mo id="S2.Ex3.m1.3.3.1.1.2.3" xref="S2.Ex3.m1.3.3.1.1.2.3.cmml">⁢</mo><mrow id="S2.Ex3.m1.3.3.1.1.2.2.2" xref="S2.Ex3.m1.3.3.1.1.2.2.3.cmml"><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.3" stretchy="false" xref="S2.Ex3.m1.3.3.1.1.2.2.3.cmml">(</mo><msub id="S2.Ex3.m1.3.3.1.1.1.1.1.1" xref="S2.Ex3.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S2.Ex3.m1.3.3.1.1.1.1.1.1.2" xref="S2.Ex3.m1.3.3.1.1.1.1.1.1.2.cmml">p</mi><mtext id="S2.Ex3.m1.3.3.1.1.1.1.1.1.3" xref="S2.Ex3.m1.3.3.1.1.1.1.1.1.3a.cmml">auto</mtext></msub><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.4" xref="S2.Ex3.m1.3.3.1.1.2.2.3.cmml">,</mo><mrow id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.2.cmml"><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.2" stretchy="false" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.2.cmml">{</mo><mrow id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.3.cmml"><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.3" stretchy="false" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.3.cmml">(</mo><msub id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.cmml"><mi id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.2" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.2.cmml">s</mi><mi id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.3" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.4" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.3.cmml">,</mo><msub id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.cmml"><mi id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.2" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.2.cmml">ϕ</mi><mi id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.3" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.3.cmml">i</mi></msub><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.5" stretchy="false" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.3.cmml">)</mo></mrow><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.3" stretchy="false" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.2.cmml">}</mo></mrow><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.5" xref="S2.Ex3.m1.3.3.1.1.2.2.3.cmml">,</mo><mi id="S2.Ex3.m1.2.2" xref="S2.Ex3.m1.2.2.cmml">s</mi><mo id="S2.Ex3.m1.3.3.1.1.2.2.2.6" stretchy="false" xref="S2.Ex3.m1.3.3.1.1.2.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S2.Ex3.m1.3.3.1.2" xref="S2.Ex3.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex3.m1.3b"><apply id="S2.Ex3.m1.3.3.1.1.cmml" xref="S2.Ex3.m1.3.3.1"><eq id="S2.Ex3.m1.3.3.1.1.3.cmml" xref="S2.Ex3.m1.3.3.1.1.3"></eq><apply id="S2.Ex3.m1.3.3.1.1.4.cmml" xref="S2.Ex3.m1.3.3.1.1.4"><times id="S2.Ex3.m1.3.3.1.1.4.1.cmml" xref="S2.Ex3.m1.3.3.1.1.4.1"></times><ci id="S2.Ex3.m1.3.3.1.1.4.2.cmml" xref="S2.Ex3.m1.3.3.1.1.4.2">𝑓</ci><ci id="S2.Ex3.m1.1.1.cmml" xref="S2.Ex3.m1.1.1">𝑠</ci></apply><apply id="S2.Ex3.m1.3.3.1.1.2.cmml" xref="S2.Ex3.m1.3.3.1.1.2"><times id="S2.Ex3.m1.3.3.1.1.2.3.cmml" xref="S2.Ex3.m1.3.3.1.1.2.3"></times><ci id="S2.Ex3.m1.3.3.1.1.2.4a.cmml" xref="S2.Ex3.m1.3.3.1.1.2.4"><mtext id="S2.Ex3.m1.3.3.1.1.2.4.cmml" xref="S2.Ex3.m1.3.3.1.1.2.4">LLM</mtext></ci><vector id="S2.Ex3.m1.3.3.1.1.2.2.3.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2"><apply id="S2.Ex3.m1.3.3.1.1.1.1.1.1.cmml" xref="S2.Ex3.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex3.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S2.Ex3.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex3.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S2.Ex3.m1.3.3.1.1.1.1.1.1.2">𝑝</ci><ci id="S2.Ex3.m1.3.3.1.1.1.1.1.1.3a.cmml" xref="S2.Ex3.m1.3.3.1.1.1.1.1.1.3"><mtext id="S2.Ex3.m1.3.3.1.1.1.1.1.1.3.cmml" mathsize="70%" xref="S2.Ex3.m1.3.3.1.1.1.1.1.1.3">auto</mtext></ci></apply><set id="S2.Ex3.m1.3.3.1.1.2.2.2.2.2.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1"><interval closure="open" id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.3.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2"><apply id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1">subscript</csymbol><ci id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.2.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.2">𝑠</ci><ci id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.3.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.1.1.3">𝑖</ci></apply><apply id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2"><csymbol cd="ambiguous" id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.1.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2">subscript</csymbol><ci id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.2.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.2">italic-ϕ</ci><ci id="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.3.cmml" xref="S2.Ex3.m1.3.3.1.1.2.2.2.2.1.1.2.2.3">𝑖</ci></apply></interval></set><ci id="S2.Ex3.m1.2.2.cmml" xref="S2.Ex3.m1.2.2">𝑠</ci></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex3.m1.3c">f(s)=\text{LLM}(p_{\text{auto}},\{(s_{i},\phi_{i})\},s),</annotation><annotation encoding="application/x-llamapun" id="S2.Ex3.m1.3d">italic_f ( italic_s ) = LLM ( italic_p start_POSTSUBSCRIPT auto end_POSTSUBSCRIPT , { ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } , italic_s ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS1.p1.4">where <math alttext="p_{\text{auto}}" class="ltx_Math" display="inline" id="S2.SS1.p1.1.m1.1"><semantics id="S2.SS1.p1.1.m1.1a"><msub id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml"><mi id="S2.SS1.p1.1.m1.1.1.2" xref="S2.SS1.p1.1.m1.1.1.2.cmml">p</mi><mtext id="S2.SS1.p1.1.m1.1.1.3" xref="S2.SS1.p1.1.m1.1.1.3a.cmml">auto</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.1b"><apply id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.1.m1.1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS1.p1.1.m1.1.1.2.cmml" xref="S2.SS1.p1.1.m1.1.1.2">𝑝</ci><ci id="S2.SS1.p1.1.m1.1.1.3a.cmml" xref="S2.SS1.p1.1.m1.1.1.3"><mtext id="S2.SS1.p1.1.m1.1.1.3.cmml" mathsize="70%" xref="S2.SS1.p1.1.m1.1.1.3">auto</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.1c">p_{\text{auto}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.1.m1.1d">italic_p start_POSTSUBSCRIPT auto end_POSTSUBSCRIPT</annotation></semantics></math> is a prompt for autoformalization and <math alttext="\{(s_{i},\phi_{i})\}" class="ltx_Math" display="inline" id="S2.SS1.p1.2.m2.1"><semantics id="S2.SS1.p1.2.m2.1a"><mrow id="S2.SS1.p1.2.m2.1.1.1" xref="S2.SS1.p1.2.m2.1.1.2.cmml"><mo id="S2.SS1.p1.2.m2.1.1.1.2" stretchy="false" xref="S2.SS1.p1.2.m2.1.1.2.cmml">{</mo><mrow id="S2.SS1.p1.2.m2.1.1.1.1.2" xref="S2.SS1.p1.2.m2.1.1.1.1.3.cmml"><mo id="S2.SS1.p1.2.m2.1.1.1.1.2.3" stretchy="false" xref="S2.SS1.p1.2.m2.1.1.1.1.3.cmml">(</mo><msub id="S2.SS1.p1.2.m2.1.1.1.1.1.1" xref="S2.SS1.p1.2.m2.1.1.1.1.1.1.cmml"><mi id="S2.SS1.p1.2.m2.1.1.1.1.1.1.2" xref="S2.SS1.p1.2.m2.1.1.1.1.1.1.2.cmml">s</mi><mi id="S2.SS1.p1.2.m2.1.1.1.1.1.1.3" xref="S2.SS1.p1.2.m2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.SS1.p1.2.m2.1.1.1.1.2.4" xref="S2.SS1.p1.2.m2.1.1.1.1.3.cmml">,</mo><msub id="S2.SS1.p1.2.m2.1.1.1.1.2.2" xref="S2.SS1.p1.2.m2.1.1.1.1.2.2.cmml"><mi id="S2.SS1.p1.2.m2.1.1.1.1.2.2.2" xref="S2.SS1.p1.2.m2.1.1.1.1.2.2.2.cmml">ϕ</mi><mi id="S2.SS1.p1.2.m2.1.1.1.1.2.2.3" xref="S2.SS1.p1.2.m2.1.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S2.SS1.p1.2.m2.1.1.1.1.2.5" stretchy="false" xref="S2.SS1.p1.2.m2.1.1.1.1.3.cmml">)</mo></mrow><mo id="S2.SS1.p1.2.m2.1.1.1.3" stretchy="false" xref="S2.SS1.p1.2.m2.1.1.2.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.2.m2.1b"><set id="S2.SS1.p1.2.m2.1.1.2.cmml" xref="S2.SS1.p1.2.m2.1.1.1"><interval closure="open" id="S2.SS1.p1.2.m2.1.1.1.1.3.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.2"><apply id="S2.SS1.p1.2.m2.1.1.1.1.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.2.m2.1.1.1.1.1.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS1.p1.2.m2.1.1.1.1.1.1.2.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.1.1.2">𝑠</ci><ci id="S2.SS1.p1.2.m2.1.1.1.1.1.1.3.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS1.p1.2.m2.1.1.1.1.2.2.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.SS1.p1.2.m2.1.1.1.1.2.2.1.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.2.2">subscript</csymbol><ci id="S2.SS1.p1.2.m2.1.1.1.1.2.2.2.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.2.2.2">italic-ϕ</ci><ci id="S2.SS1.p1.2.m2.1.1.1.1.2.2.3.cmml" xref="S2.SS1.p1.2.m2.1.1.1.1.2.2.3">𝑖</ci></apply></interval></set></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.2.m2.1c">\{(s_{i},\phi_{i})\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.2.m2.1d">{ ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) }</annotation></semantics></math> is a set of exemplars. The initial attempt <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib39" title="">2022</a>)</cite> defined subcategories <math alttext="\mathcal{SC}_{j}" class="ltx_Math" display="inline" id="S2.SS1.p1.3.m3.1"><semantics id="S2.SS1.p1.3.m3.1a"><mrow id="S2.SS1.p1.3.m3.1.1" xref="S2.SS1.p1.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.3.m3.1.1.2" xref="S2.SS1.p1.3.m3.1.1.2.cmml">𝒮</mi><mo id="S2.SS1.p1.3.m3.1.1.1" xref="S2.SS1.p1.3.m3.1.1.1.cmml">⁢</mo><msub id="S2.SS1.p1.3.m3.1.1.3" xref="S2.SS1.p1.3.m3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.3.m3.1.1.3.2" xref="S2.SS1.p1.3.m3.1.1.3.2.cmml">𝒞</mi><mi id="S2.SS1.p1.3.m3.1.1.3.3" xref="S2.SS1.p1.3.m3.1.1.3.3.cmml">j</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.3.m3.1b"><apply id="S2.SS1.p1.3.m3.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1"><times id="S2.SS1.p1.3.m3.1.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1.1"></times><ci id="S2.SS1.p1.3.m3.1.1.2.cmml" xref="S2.SS1.p1.3.m3.1.1.2">𝒮</ci><apply id="S2.SS1.p1.3.m3.1.1.3.cmml" xref="S2.SS1.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S2.SS1.p1.3.m3.1.1.3.1.cmml" xref="S2.SS1.p1.3.m3.1.1.3">subscript</csymbol><ci id="S2.SS1.p1.3.m3.1.1.3.2.cmml" xref="S2.SS1.p1.3.m3.1.1.3.2">𝒞</ci><ci id="S2.SS1.p1.3.m3.1.1.3.3.cmml" xref="S2.SS1.p1.3.m3.1.1.3.3">𝑗</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.3.m3.1c">\mathcal{SC}_{j}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.3.m3.1d">caligraphic_S caligraphic_C start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT</annotation></semantics></math> in math and chose fixed examples <math alttext="\{(s_{i},\phi_{i})\}_{j}\in\mathcal{SC}_{j}" class="ltx_Math" display="inline" id="S2.SS1.p1.4.m4.1"><semantics id="S2.SS1.p1.4.m4.1a"><mrow id="S2.SS1.p1.4.m4.1.1" xref="S2.SS1.p1.4.m4.1.1.cmml"><msub id="S2.SS1.p1.4.m4.1.1.1" xref="S2.SS1.p1.4.m4.1.1.1.cmml"><mrow id="S2.SS1.p1.4.m4.1.1.1.1.1" xref="S2.SS1.p1.4.m4.1.1.1.1.2.cmml"><mo id="S2.SS1.p1.4.m4.1.1.1.1.1.2" stretchy="false" xref="S2.SS1.p1.4.m4.1.1.1.1.2.cmml">{</mo><mrow id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.3.cmml"><mo id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.3" stretchy="false" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.3.cmml">(</mo><msub id="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.cmml"><mi id="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.2" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.2.cmml">s</mi><mi id="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.3" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.4" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.3.cmml">,</mo><msub id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.cmml"><mi id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.2" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.2.cmml">ϕ</mi><mi id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.3" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.5" stretchy="false" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.3.cmml">)</mo></mrow><mo id="S2.SS1.p1.4.m4.1.1.1.1.1.3" stretchy="false" xref="S2.SS1.p1.4.m4.1.1.1.1.2.cmml">}</mo></mrow><mi id="S2.SS1.p1.4.m4.1.1.1.3" xref="S2.SS1.p1.4.m4.1.1.1.3.cmml">j</mi></msub><mo id="S2.SS1.p1.4.m4.1.1.2" xref="S2.SS1.p1.4.m4.1.1.2.cmml">∈</mo><mrow id="S2.SS1.p1.4.m4.1.1.3" xref="S2.SS1.p1.4.m4.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.4.m4.1.1.3.2" xref="S2.SS1.p1.4.m4.1.1.3.2.cmml">𝒮</mi><mo id="S2.SS1.p1.4.m4.1.1.3.1" xref="S2.SS1.p1.4.m4.1.1.3.1.cmml">⁢</mo><msub id="S2.SS1.p1.4.m4.1.1.3.3" xref="S2.SS1.p1.4.m4.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.4.m4.1.1.3.3.2" xref="S2.SS1.p1.4.m4.1.1.3.3.2.cmml">𝒞</mi><mi id="S2.SS1.p1.4.m4.1.1.3.3.3" xref="S2.SS1.p1.4.m4.1.1.3.3.3.cmml">j</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.4.m4.1b"><apply id="S2.SS1.p1.4.m4.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1"><in id="S2.SS1.p1.4.m4.1.1.2.cmml" xref="S2.SS1.p1.4.m4.1.1.2"></in><apply id="S2.SS1.p1.4.m4.1.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.4.m4.1.1.1.2.cmml" xref="S2.SS1.p1.4.m4.1.1.1">subscript</csymbol><set id="S2.SS1.p1.4.m4.1.1.1.1.2.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1"><interval closure="open" id="S2.SS1.p1.4.m4.1.1.1.1.1.1.3.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.2"><apply id="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.2.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.2">𝑠</ci><ci id="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.3.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.1.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2">subscript</csymbol><ci id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.2.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.2">italic-ϕ</ci><ci id="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.3.cmml" xref="S2.SS1.p1.4.m4.1.1.1.1.1.1.2.2.3">𝑖</ci></apply></interval></set><ci id="S2.SS1.p1.4.m4.1.1.1.3.cmml" xref="S2.SS1.p1.4.m4.1.1.1.3">𝑗</ci></apply><apply id="S2.SS1.p1.4.m4.1.1.3.cmml" xref="S2.SS1.p1.4.m4.1.1.3"><times id="S2.SS1.p1.4.m4.1.1.3.1.cmml" xref="S2.SS1.p1.4.m4.1.1.3.1"></times><ci id="S2.SS1.p1.4.m4.1.1.3.2.cmml" xref="S2.SS1.p1.4.m4.1.1.3.2">𝒮</ci><apply id="S2.SS1.p1.4.m4.1.1.3.3.cmml" xref="S2.SS1.p1.4.m4.1.1.3.3"><csymbol cd="ambiguous" id="S2.SS1.p1.4.m4.1.1.3.3.1.cmml" xref="S2.SS1.p1.4.m4.1.1.3.3">subscript</csymbol><ci id="S2.SS1.p1.4.m4.1.1.3.3.2.cmml" xref="S2.SS1.p1.4.m4.1.1.3.3.2">𝒞</ci><ci id="S2.SS1.p1.4.m4.1.1.3.3.3.cmml" xref="S2.SS1.p1.4.m4.1.1.3.3.3">𝑗</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.4.m4.1c">\{(s_{i},\phi_{i})\}_{j}\in\mathcal{SC}_{j}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.4.m4.1d">{ ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ∈ caligraphic_S caligraphic_C start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT</annotation></semantics></math> for each subcategory, where the transformation function becomes:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.Ex4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="f(s)=\text{LLM}(p_{\text{auto}},\{(s_{i},\phi_{i})\}_{j},s)\text{, if }s\in%
\mathcal{SC}_{j}." class="ltx_Math" display="block" id="S2.Ex4.m1.3"><semantics id="S2.Ex4.m1.3a"><mrow id="S2.Ex4.m1.3.3.1" xref="S2.Ex4.m1.3.3.1.1.cmml"><mrow id="S2.Ex4.m1.3.3.1.1" xref="S2.Ex4.m1.3.3.1.1.cmml"><mrow id="S2.Ex4.m1.3.3.1.1.4" xref="S2.Ex4.m1.3.3.1.1.4.cmml"><mi id="S2.Ex4.m1.3.3.1.1.4.2" xref="S2.Ex4.m1.3.3.1.1.4.2.cmml">f</mi><mo id="S2.Ex4.m1.3.3.1.1.4.1" xref="S2.Ex4.m1.3.3.1.1.4.1.cmml">⁢</mo><mrow id="S2.Ex4.m1.3.3.1.1.4.3.2" xref="S2.Ex4.m1.3.3.1.1.4.cmml"><mo id="S2.Ex4.m1.3.3.1.1.4.3.2.1" stretchy="false" xref="S2.Ex4.m1.3.3.1.1.4.cmml">(</mo><mi id="S2.Ex4.m1.1.1" xref="S2.Ex4.m1.1.1.cmml">s</mi><mo id="S2.Ex4.m1.3.3.1.1.4.3.2.2" stretchy="false" xref="S2.Ex4.m1.3.3.1.1.4.cmml">)</mo></mrow></mrow><mo id="S2.Ex4.m1.3.3.1.1.5" xref="S2.Ex4.m1.3.3.1.1.5.cmml">=</mo><mrow id="S2.Ex4.m1.3.3.1.1.2" xref="S2.Ex4.m1.3.3.1.1.2.cmml"><mtext id="S2.Ex4.m1.3.3.1.1.2.4" xref="S2.Ex4.m1.3.3.1.1.2.4a.cmml">LLM</mtext><mo id="S2.Ex4.m1.3.3.1.1.2.3" xref="S2.Ex4.m1.3.3.1.1.2.3.cmml">⁢</mo><mrow id="S2.Ex4.m1.3.3.1.1.2.2.2" xref="S2.Ex4.m1.3.3.1.1.2.2.3.cmml"><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.3" stretchy="false" xref="S2.Ex4.m1.3.3.1.1.2.2.3.cmml">(</mo><msub id="S2.Ex4.m1.3.3.1.1.1.1.1.1" xref="S2.Ex4.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S2.Ex4.m1.3.3.1.1.1.1.1.1.2" xref="S2.Ex4.m1.3.3.1.1.1.1.1.1.2.cmml">p</mi><mtext id="S2.Ex4.m1.3.3.1.1.1.1.1.1.3" xref="S2.Ex4.m1.3.3.1.1.1.1.1.1.3a.cmml">auto</mtext></msub><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.4" xref="S2.Ex4.m1.3.3.1.1.2.2.3.cmml">,</mo><msub id="S2.Ex4.m1.3.3.1.1.2.2.2.2" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.cmml"><mrow id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.2.cmml"><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.2" stretchy="false" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.2.cmml">{</mo><mrow id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml"><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.3" stretchy="false" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">(</mo><msub id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.cmml"><mi id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2.cmml">s</mi><mi id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.4" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">,</mo><msub id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.cmml"><mi id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2.cmml">ϕ</mi><mi id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.5" stretchy="false" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">)</mo></mrow><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.3" stretchy="false" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.2.cmml">}</mo></mrow><mi id="S2.Ex4.m1.3.3.1.1.2.2.2.2.3" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.3.cmml">j</mi></msub><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.5" xref="S2.Ex4.m1.3.3.1.1.2.2.3.cmml">,</mo><mi id="S2.Ex4.m1.2.2" xref="S2.Ex4.m1.2.2.cmml">s</mi><mo id="S2.Ex4.m1.3.3.1.1.2.2.2.6" stretchy="false" xref="S2.Ex4.m1.3.3.1.1.2.2.3.cmml">)</mo></mrow><mo id="S2.Ex4.m1.3.3.1.1.2.3a" xref="S2.Ex4.m1.3.3.1.1.2.3.cmml">⁢</mo><mtext id="S2.Ex4.m1.3.3.1.1.2.5" xref="S2.Ex4.m1.3.3.1.1.2.5a.cmml">, if </mtext><mo id="S2.Ex4.m1.3.3.1.1.2.3b" xref="S2.Ex4.m1.3.3.1.1.2.3.cmml">⁢</mo><mi id="S2.Ex4.m1.3.3.1.1.2.6" xref="S2.Ex4.m1.3.3.1.1.2.6.cmml">s</mi></mrow><mo id="S2.Ex4.m1.3.3.1.1.6" xref="S2.Ex4.m1.3.3.1.1.6.cmml">∈</mo><mrow id="S2.Ex4.m1.3.3.1.1.7" xref="S2.Ex4.m1.3.3.1.1.7.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.Ex4.m1.3.3.1.1.7.2" xref="S2.Ex4.m1.3.3.1.1.7.2.cmml">𝒮</mi><mo id="S2.Ex4.m1.3.3.1.1.7.1" xref="S2.Ex4.m1.3.3.1.1.7.1.cmml">⁢</mo><msub id="S2.Ex4.m1.3.3.1.1.7.3" xref="S2.Ex4.m1.3.3.1.1.7.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.Ex4.m1.3.3.1.1.7.3.2" xref="S2.Ex4.m1.3.3.1.1.7.3.2.cmml">𝒞</mi><mi id="S2.Ex4.m1.3.3.1.1.7.3.3" xref="S2.Ex4.m1.3.3.1.1.7.3.3.cmml">j</mi></msub></mrow></mrow><mo id="S2.Ex4.m1.3.3.1.2" lspace="0em" xref="S2.Ex4.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex4.m1.3b"><apply id="S2.Ex4.m1.3.3.1.1.cmml" xref="S2.Ex4.m1.3.3.1"><and id="S2.Ex4.m1.3.3.1.1a.cmml" xref="S2.Ex4.m1.3.3.1"></and><apply id="S2.Ex4.m1.3.3.1.1b.cmml" xref="S2.Ex4.m1.3.3.1"><eq id="S2.Ex4.m1.3.3.1.1.5.cmml" xref="S2.Ex4.m1.3.3.1.1.5"></eq><apply id="S2.Ex4.m1.3.3.1.1.4.cmml" xref="S2.Ex4.m1.3.3.1.1.4"><times id="S2.Ex4.m1.3.3.1.1.4.1.cmml" xref="S2.Ex4.m1.3.3.1.1.4.1"></times><ci id="S2.Ex4.m1.3.3.1.1.4.2.cmml" xref="S2.Ex4.m1.3.3.1.1.4.2">𝑓</ci><ci id="S2.Ex4.m1.1.1.cmml" xref="S2.Ex4.m1.1.1">𝑠</ci></apply><apply id="S2.Ex4.m1.3.3.1.1.2.cmml" xref="S2.Ex4.m1.3.3.1.1.2"><times id="S2.Ex4.m1.3.3.1.1.2.3.cmml" xref="S2.Ex4.m1.3.3.1.1.2.3"></times><ci id="S2.Ex4.m1.3.3.1.1.2.4a.cmml" xref="S2.Ex4.m1.3.3.1.1.2.4"><mtext id="S2.Ex4.m1.3.3.1.1.2.4.cmml" xref="S2.Ex4.m1.3.3.1.1.2.4">LLM</mtext></ci><vector id="S2.Ex4.m1.3.3.1.1.2.2.3.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2"><apply id="S2.Ex4.m1.3.3.1.1.1.1.1.1.cmml" xref="S2.Ex4.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex4.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S2.Ex4.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex4.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S2.Ex4.m1.3.3.1.1.1.1.1.1.2">𝑝</ci><ci id="S2.Ex4.m1.3.3.1.1.1.1.1.1.3a.cmml" xref="S2.Ex4.m1.3.3.1.1.1.1.1.1.3"><mtext id="S2.Ex4.m1.3.3.1.1.1.1.1.1.3.cmml" mathsize="70%" xref="S2.Ex4.m1.3.3.1.1.1.1.1.1.3">auto</mtext></ci></apply><apply id="S2.Ex4.m1.3.3.1.1.2.2.2.2.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2"><csymbol cd="ambiguous" id="S2.Ex4.m1.3.3.1.1.2.2.2.2.2.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2">subscript</csymbol><set id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.2.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1"><interval closure="open" id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2"><apply id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.1.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2">𝑠</ci><ci id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.1.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2">subscript</csymbol><ci id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2">italic-ϕ</ci><ci id="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3">𝑖</ci></apply></interval></set><ci id="S2.Ex4.m1.3.3.1.1.2.2.2.2.3.cmml" xref="S2.Ex4.m1.3.3.1.1.2.2.2.2.3">𝑗</ci></apply><ci id="S2.Ex4.m1.2.2.cmml" xref="S2.Ex4.m1.2.2">𝑠</ci></vector><ci id="S2.Ex4.m1.3.3.1.1.2.5a.cmml" xref="S2.Ex4.m1.3.3.1.1.2.5"><mtext id="S2.Ex4.m1.3.3.1.1.2.5.cmml" xref="S2.Ex4.m1.3.3.1.1.2.5">, if </mtext></ci><ci id="S2.Ex4.m1.3.3.1.1.2.6.cmml" xref="S2.Ex4.m1.3.3.1.1.2.6">𝑠</ci></apply></apply><apply id="S2.Ex4.m1.3.3.1.1c.cmml" xref="S2.Ex4.m1.3.3.1"><in id="S2.Ex4.m1.3.3.1.1.6.cmml" xref="S2.Ex4.m1.3.3.1.1.6"></in><share href="https://arxiv.org/html/2410.04194v1#S2.Ex4.m1.3.3.1.1.2.cmml" id="S2.Ex4.m1.3.3.1.1d.cmml" xref="S2.Ex4.m1.3.3.1"></share><apply id="S2.Ex4.m1.3.3.1.1.7.cmml" xref="S2.Ex4.m1.3.3.1.1.7"><times id="S2.Ex4.m1.3.3.1.1.7.1.cmml" xref="S2.Ex4.m1.3.3.1.1.7.1"></times><ci id="S2.Ex4.m1.3.3.1.1.7.2.cmml" xref="S2.Ex4.m1.3.3.1.1.7.2">𝒮</ci><apply id="S2.Ex4.m1.3.3.1.1.7.3.cmml" xref="S2.Ex4.m1.3.3.1.1.7.3"><csymbol cd="ambiguous" id="S2.Ex4.m1.3.3.1.1.7.3.1.cmml" xref="S2.Ex4.m1.3.3.1.1.7.3">subscript</csymbol><ci id="S2.Ex4.m1.3.3.1.1.7.3.2.cmml" xref="S2.Ex4.m1.3.3.1.1.7.3.2">𝒞</ci><ci id="S2.Ex4.m1.3.3.1.1.7.3.3.cmml" xref="S2.Ex4.m1.3.3.1.1.7.3.3">𝑗</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex4.m1.3c">f(s)=\text{LLM}(p_{\text{auto}},\{(s_{i},\phi_{i})\}_{j},s)\text{, if }s\in%
\mathcal{SC}_{j}.</annotation><annotation encoding="application/x-llamapun" id="S2.Ex4.m1.3d">italic_f ( italic_s ) = LLM ( italic_p start_POSTSUBSCRIPT auto end_POSTSUBSCRIPT , { ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT , italic_s ) , if italic_s ∈ caligraphic_S caligraphic_C start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS1.p2">
<p class="ltx_p" id="S2.SS1.p2.2">However, fixed examples cannot reflect the usage of various novel definitions and notions in each subcategory. Therefore, with the assumption of the existence of <math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S2.SS1.p2.1.m1.1"><semantics id="S2.SS1.p2.1.m1.1a"><mrow id="S2.SS1.p2.1.m1.1.1" xref="S2.SS1.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.1.m1.1.1.2" xref="S2.SS1.p2.1.m1.1.1.2.cmml">𝒦</mi><mo id="S2.SS1.p2.1.m1.1.1.1" xref="S2.SS1.p2.1.m1.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.1.m1.1.1.3" xref="S2.SS1.p2.1.m1.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.1.m1.1b"><apply id="S2.SS1.p2.1.m1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1"><times id="S2.SS1.p2.1.m1.1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1.1"></times><ci id="S2.SS1.p2.1.m1.1.1.2.cmml" xref="S2.SS1.p2.1.m1.1.1.2">𝒦</ci><ci id="S2.SS1.p2.1.m1.1.1.3.cmml" xref="S2.SS1.p2.1.m1.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.1.m1.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.1.m1.1d">caligraphic_K caligraphic_B</annotation></semantics></math>, we propose to first retrieve a set of samples based on a similarity relevance function <math alttext="\mathcal{MS}(s)\in\mathcal{KB}" class="ltx_Math" display="inline" id="S2.SS1.p2.2.m2.1"><semantics id="S2.SS1.p2.2.m2.1a"><mrow id="S2.SS1.p2.2.m2.1.2" xref="S2.SS1.p2.2.m2.1.2.cmml"><mrow id="S2.SS1.p2.2.m2.1.2.2" xref="S2.SS1.p2.2.m2.1.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.2.m2.1.2.2.2" xref="S2.SS1.p2.2.m2.1.2.2.2.cmml">ℳ</mi><mo id="S2.SS1.p2.2.m2.1.2.2.1" xref="S2.SS1.p2.2.m2.1.2.2.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.2.m2.1.2.2.3" xref="S2.SS1.p2.2.m2.1.2.2.3.cmml">𝒮</mi><mo id="S2.SS1.p2.2.m2.1.2.2.1a" xref="S2.SS1.p2.2.m2.1.2.2.1.cmml">⁢</mo><mrow id="S2.SS1.p2.2.m2.1.2.2.4.2" xref="S2.SS1.p2.2.m2.1.2.2.cmml"><mo id="S2.SS1.p2.2.m2.1.2.2.4.2.1" stretchy="false" xref="S2.SS1.p2.2.m2.1.2.2.cmml">(</mo><mi id="S2.SS1.p2.2.m2.1.1" xref="S2.SS1.p2.2.m2.1.1.cmml">s</mi><mo id="S2.SS1.p2.2.m2.1.2.2.4.2.2" stretchy="false" xref="S2.SS1.p2.2.m2.1.2.2.cmml">)</mo></mrow></mrow><mo id="S2.SS1.p2.2.m2.1.2.1" xref="S2.SS1.p2.2.m2.1.2.1.cmml">∈</mo><mrow id="S2.SS1.p2.2.m2.1.2.3" xref="S2.SS1.p2.2.m2.1.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.2.m2.1.2.3.2" xref="S2.SS1.p2.2.m2.1.2.3.2.cmml">𝒦</mi><mo id="S2.SS1.p2.2.m2.1.2.3.1" xref="S2.SS1.p2.2.m2.1.2.3.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.2.m2.1.2.3.3" xref="S2.SS1.p2.2.m2.1.2.3.3.cmml">ℬ</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.2.m2.1b"><apply id="S2.SS1.p2.2.m2.1.2.cmml" xref="S2.SS1.p2.2.m2.1.2"><in id="S2.SS1.p2.2.m2.1.2.1.cmml" xref="S2.SS1.p2.2.m2.1.2.1"></in><apply id="S2.SS1.p2.2.m2.1.2.2.cmml" xref="S2.SS1.p2.2.m2.1.2.2"><times id="S2.SS1.p2.2.m2.1.2.2.1.cmml" xref="S2.SS1.p2.2.m2.1.2.2.1"></times><ci id="S2.SS1.p2.2.m2.1.2.2.2.cmml" xref="S2.SS1.p2.2.m2.1.2.2.2">ℳ</ci><ci id="S2.SS1.p2.2.m2.1.2.2.3.cmml" xref="S2.SS1.p2.2.m2.1.2.2.3">𝒮</ci><ci id="S2.SS1.p2.2.m2.1.1.cmml" xref="S2.SS1.p2.2.m2.1.1">𝑠</ci></apply><apply id="S2.SS1.p2.2.m2.1.2.3.cmml" xref="S2.SS1.p2.2.m2.1.2.3"><times id="S2.SS1.p2.2.m2.1.2.3.1.cmml" xref="S2.SS1.p2.2.m2.1.2.3.1"></times><ci id="S2.SS1.p2.2.m2.1.2.3.2.cmml" xref="S2.SS1.p2.2.m2.1.2.3.2">𝒦</ci><ci id="S2.SS1.p2.2.m2.1.2.3.3.cmml" xref="S2.SS1.p2.2.m2.1.2.3.3">ℬ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.2.m2.1c">\mathcal{MS}(s)\in\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.2.m2.1d">caligraphic_M caligraphic_S ( italic_s ) ∈ caligraphic_K caligraphic_B</annotation></semantics></math> and then define the transformation function as:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.Ex5">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="f_{\phi}(s)=\text{LLM}(p_{\text{auto}},\{(s_{i},\phi_{i})\}_{s},s)," class="ltx_Math" display="block" id="S2.Ex5.m1.3"><semantics id="S2.Ex5.m1.3a"><mrow id="S2.Ex5.m1.3.3.1" xref="S2.Ex5.m1.3.3.1.1.cmml"><mrow id="S2.Ex5.m1.3.3.1.1" xref="S2.Ex5.m1.3.3.1.1.cmml"><mrow id="S2.Ex5.m1.3.3.1.1.4" xref="S2.Ex5.m1.3.3.1.1.4.cmml"><msub id="S2.Ex5.m1.3.3.1.1.4.2" xref="S2.Ex5.m1.3.3.1.1.4.2.cmml"><mi id="S2.Ex5.m1.3.3.1.1.4.2.2" xref="S2.Ex5.m1.3.3.1.1.4.2.2.cmml">f</mi><mi id="S2.Ex5.m1.3.3.1.1.4.2.3" xref="S2.Ex5.m1.3.3.1.1.4.2.3.cmml">ϕ</mi></msub><mo id="S2.Ex5.m1.3.3.1.1.4.1" xref="S2.Ex5.m1.3.3.1.1.4.1.cmml">⁢</mo><mrow id="S2.Ex5.m1.3.3.1.1.4.3.2" xref="S2.Ex5.m1.3.3.1.1.4.cmml"><mo id="S2.Ex5.m1.3.3.1.1.4.3.2.1" stretchy="false" xref="S2.Ex5.m1.3.3.1.1.4.cmml">(</mo><mi id="S2.Ex5.m1.1.1" xref="S2.Ex5.m1.1.1.cmml">s</mi><mo id="S2.Ex5.m1.3.3.1.1.4.3.2.2" stretchy="false" xref="S2.Ex5.m1.3.3.1.1.4.cmml">)</mo></mrow></mrow><mo id="S2.Ex5.m1.3.3.1.1.3" xref="S2.Ex5.m1.3.3.1.1.3.cmml">=</mo><mrow id="S2.Ex5.m1.3.3.1.1.2" xref="S2.Ex5.m1.3.3.1.1.2.cmml"><mtext id="S2.Ex5.m1.3.3.1.1.2.4" xref="S2.Ex5.m1.3.3.1.1.2.4a.cmml">LLM</mtext><mo id="S2.Ex5.m1.3.3.1.1.2.3" xref="S2.Ex5.m1.3.3.1.1.2.3.cmml">⁢</mo><mrow id="S2.Ex5.m1.3.3.1.1.2.2.2" xref="S2.Ex5.m1.3.3.1.1.2.2.3.cmml"><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.3" stretchy="false" xref="S2.Ex5.m1.3.3.1.1.2.2.3.cmml">(</mo><msub id="S2.Ex5.m1.3.3.1.1.1.1.1.1" xref="S2.Ex5.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S2.Ex5.m1.3.3.1.1.1.1.1.1.2" xref="S2.Ex5.m1.3.3.1.1.1.1.1.1.2.cmml">p</mi><mtext id="S2.Ex5.m1.3.3.1.1.1.1.1.1.3" xref="S2.Ex5.m1.3.3.1.1.1.1.1.1.3a.cmml">auto</mtext></msub><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.4" xref="S2.Ex5.m1.3.3.1.1.2.2.3.cmml">,</mo><msub id="S2.Ex5.m1.3.3.1.1.2.2.2.2" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.cmml"><mrow id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.2.cmml"><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.2" stretchy="false" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.2.cmml">{</mo><mrow id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml"><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.3" stretchy="false" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">(</mo><msub id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.cmml"><mi id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2.cmml">s</mi><mi id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.4" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">,</mo><msub id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.cmml"><mi id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2.cmml">ϕ</mi><mi id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.5" stretchy="false" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">)</mo></mrow><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.3" stretchy="false" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.2.cmml">}</mo></mrow><mi id="S2.Ex5.m1.3.3.1.1.2.2.2.2.3" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.3.cmml">s</mi></msub><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.5" xref="S2.Ex5.m1.3.3.1.1.2.2.3.cmml">,</mo><mi id="S2.Ex5.m1.2.2" xref="S2.Ex5.m1.2.2.cmml">s</mi><mo id="S2.Ex5.m1.3.3.1.1.2.2.2.6" stretchy="false" xref="S2.Ex5.m1.3.3.1.1.2.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S2.Ex5.m1.3.3.1.2" xref="S2.Ex5.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex5.m1.3b"><apply id="S2.Ex5.m1.3.3.1.1.cmml" xref="S2.Ex5.m1.3.3.1"><eq id="S2.Ex5.m1.3.3.1.1.3.cmml" xref="S2.Ex5.m1.3.3.1.1.3"></eq><apply id="S2.Ex5.m1.3.3.1.1.4.cmml" xref="S2.Ex5.m1.3.3.1.1.4"><times id="S2.Ex5.m1.3.3.1.1.4.1.cmml" xref="S2.Ex5.m1.3.3.1.1.4.1"></times><apply id="S2.Ex5.m1.3.3.1.1.4.2.cmml" xref="S2.Ex5.m1.3.3.1.1.4.2"><csymbol cd="ambiguous" id="S2.Ex5.m1.3.3.1.1.4.2.1.cmml" xref="S2.Ex5.m1.3.3.1.1.4.2">subscript</csymbol><ci id="S2.Ex5.m1.3.3.1.1.4.2.2.cmml" xref="S2.Ex5.m1.3.3.1.1.4.2.2">𝑓</ci><ci id="S2.Ex5.m1.3.3.1.1.4.2.3.cmml" xref="S2.Ex5.m1.3.3.1.1.4.2.3">italic-ϕ</ci></apply><ci id="S2.Ex5.m1.1.1.cmml" xref="S2.Ex5.m1.1.1">𝑠</ci></apply><apply id="S2.Ex5.m1.3.3.1.1.2.cmml" xref="S2.Ex5.m1.3.3.1.1.2"><times id="S2.Ex5.m1.3.3.1.1.2.3.cmml" xref="S2.Ex5.m1.3.3.1.1.2.3"></times><ci id="S2.Ex5.m1.3.3.1.1.2.4a.cmml" xref="S2.Ex5.m1.3.3.1.1.2.4"><mtext id="S2.Ex5.m1.3.3.1.1.2.4.cmml" xref="S2.Ex5.m1.3.3.1.1.2.4">LLM</mtext></ci><vector id="S2.Ex5.m1.3.3.1.1.2.2.3.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2"><apply id="S2.Ex5.m1.3.3.1.1.1.1.1.1.cmml" xref="S2.Ex5.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex5.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S2.Ex5.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex5.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S2.Ex5.m1.3.3.1.1.1.1.1.1.2">𝑝</ci><ci id="S2.Ex5.m1.3.3.1.1.1.1.1.1.3a.cmml" xref="S2.Ex5.m1.3.3.1.1.1.1.1.1.3"><mtext id="S2.Ex5.m1.3.3.1.1.1.1.1.1.3.cmml" mathsize="70%" xref="S2.Ex5.m1.3.3.1.1.1.1.1.1.3">auto</mtext></ci></apply><apply id="S2.Ex5.m1.3.3.1.1.2.2.2.2.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2"><csymbol cd="ambiguous" id="S2.Ex5.m1.3.3.1.1.2.2.2.2.2.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2">subscript</csymbol><set id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.2.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1"><interval closure="open" id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2"><apply id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.1.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2">𝑠</ci><ci id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.1.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2">subscript</csymbol><ci id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2">italic-ϕ</ci><ci id="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3">𝑖</ci></apply></interval></set><ci id="S2.Ex5.m1.3.3.1.1.2.2.2.2.3.cmml" xref="S2.Ex5.m1.3.3.1.1.2.2.2.2.3">𝑠</ci></apply><ci id="S2.Ex5.m1.2.2.cmml" xref="S2.Ex5.m1.2.2">𝑠</ci></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex5.m1.3c">f_{\phi}(s)=\text{LLM}(p_{\text{auto}},\{(s_{i},\phi_{i})\}_{s},s),</annotation><annotation encoding="application/x-llamapun" id="S2.Ex5.m1.3d">italic_f start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( italic_s ) = LLM ( italic_p start_POSTSUBSCRIPT auto end_POSTSUBSCRIPT , { ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT , italic_s ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS1.p2.3">where <math alttext="(s_{i},\phi_{i})\in\mathcal{MS}(s)" class="ltx_Math" display="inline" id="S2.SS1.p2.3.m1.3"><semantics id="S2.SS1.p2.3.m1.3a"><mrow id="S2.SS1.p2.3.m1.3.3" xref="S2.SS1.p2.3.m1.3.3.cmml"><mrow id="S2.SS1.p2.3.m1.3.3.2.2" xref="S2.SS1.p2.3.m1.3.3.2.3.cmml"><mo id="S2.SS1.p2.3.m1.3.3.2.2.3" stretchy="false" xref="S2.SS1.p2.3.m1.3.3.2.3.cmml">(</mo><msub id="S2.SS1.p2.3.m1.2.2.1.1.1" xref="S2.SS1.p2.3.m1.2.2.1.1.1.cmml"><mi id="S2.SS1.p2.3.m1.2.2.1.1.1.2" xref="S2.SS1.p2.3.m1.2.2.1.1.1.2.cmml">s</mi><mi id="S2.SS1.p2.3.m1.2.2.1.1.1.3" xref="S2.SS1.p2.3.m1.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S2.SS1.p2.3.m1.3.3.2.2.4" xref="S2.SS1.p2.3.m1.3.3.2.3.cmml">,</mo><msub id="S2.SS1.p2.3.m1.3.3.2.2.2" xref="S2.SS1.p2.3.m1.3.3.2.2.2.cmml"><mi id="S2.SS1.p2.3.m1.3.3.2.2.2.2" xref="S2.SS1.p2.3.m1.3.3.2.2.2.2.cmml">ϕ</mi><mi id="S2.SS1.p2.3.m1.3.3.2.2.2.3" xref="S2.SS1.p2.3.m1.3.3.2.2.2.3.cmml">i</mi></msub><mo id="S2.SS1.p2.3.m1.3.3.2.2.5" stretchy="false" xref="S2.SS1.p2.3.m1.3.3.2.3.cmml">)</mo></mrow><mo id="S2.SS1.p2.3.m1.3.3.3" xref="S2.SS1.p2.3.m1.3.3.3.cmml">∈</mo><mrow id="S2.SS1.p2.3.m1.3.3.4" xref="S2.SS1.p2.3.m1.3.3.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.3.m1.3.3.4.2" xref="S2.SS1.p2.3.m1.3.3.4.2.cmml">ℳ</mi><mo id="S2.SS1.p2.3.m1.3.3.4.1" xref="S2.SS1.p2.3.m1.3.3.4.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.3.m1.3.3.4.3" xref="S2.SS1.p2.3.m1.3.3.4.3.cmml">𝒮</mi><mo id="S2.SS1.p2.3.m1.3.3.4.1a" xref="S2.SS1.p2.3.m1.3.3.4.1.cmml">⁢</mo><mrow id="S2.SS1.p2.3.m1.3.3.4.4.2" xref="S2.SS1.p2.3.m1.3.3.4.cmml"><mo id="S2.SS1.p2.3.m1.3.3.4.4.2.1" stretchy="false" xref="S2.SS1.p2.3.m1.3.3.4.cmml">(</mo><mi id="S2.SS1.p2.3.m1.1.1" xref="S2.SS1.p2.3.m1.1.1.cmml">s</mi><mo id="S2.SS1.p2.3.m1.3.3.4.4.2.2" stretchy="false" xref="S2.SS1.p2.3.m1.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.3.m1.3b"><apply id="S2.SS1.p2.3.m1.3.3.cmml" xref="S2.SS1.p2.3.m1.3.3"><in id="S2.SS1.p2.3.m1.3.3.3.cmml" xref="S2.SS1.p2.3.m1.3.3.3"></in><interval closure="open" id="S2.SS1.p2.3.m1.3.3.2.3.cmml" xref="S2.SS1.p2.3.m1.3.3.2.2"><apply id="S2.SS1.p2.3.m1.2.2.1.1.1.cmml" xref="S2.SS1.p2.3.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.3.m1.2.2.1.1.1.1.cmml" xref="S2.SS1.p2.3.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.SS1.p2.3.m1.2.2.1.1.1.2.cmml" xref="S2.SS1.p2.3.m1.2.2.1.1.1.2">𝑠</ci><ci id="S2.SS1.p2.3.m1.2.2.1.1.1.3.cmml" xref="S2.SS1.p2.3.m1.2.2.1.1.1.3">𝑖</ci></apply><apply id="S2.SS1.p2.3.m1.3.3.2.2.2.cmml" xref="S2.SS1.p2.3.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.3.m1.3.3.2.2.2.1.cmml" xref="S2.SS1.p2.3.m1.3.3.2.2.2">subscript</csymbol><ci id="S2.SS1.p2.3.m1.3.3.2.2.2.2.cmml" xref="S2.SS1.p2.3.m1.3.3.2.2.2.2">italic-ϕ</ci><ci id="S2.SS1.p2.3.m1.3.3.2.2.2.3.cmml" xref="S2.SS1.p2.3.m1.3.3.2.2.2.3">𝑖</ci></apply></interval><apply id="S2.SS1.p2.3.m1.3.3.4.cmml" xref="S2.SS1.p2.3.m1.3.3.4"><times id="S2.SS1.p2.3.m1.3.3.4.1.cmml" xref="S2.SS1.p2.3.m1.3.3.4.1"></times><ci id="S2.SS1.p2.3.m1.3.3.4.2.cmml" xref="S2.SS1.p2.3.m1.3.3.4.2">ℳ</ci><ci id="S2.SS1.p2.3.m1.3.3.4.3.cmml" xref="S2.SS1.p2.3.m1.3.3.4.3">𝒮</ci><ci id="S2.SS1.p2.3.m1.1.1.cmml" xref="S2.SS1.p2.3.m1.1.1">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.3.m1.3c">(s_{i},\phi_{i})\in\mathcal{MS}(s)</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.3.m1.3d">( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ∈ caligraphic_M caligraphic_S ( italic_s )</annotation></semantics></math>.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Denoising Formalization Results</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">Bias inherited from instruction fine-tuning <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib23" title="">2022</a>)</cite> causes LLMs during autoformalization to occasionally generate redundant texts not integral to the formal statement, thereby infusing the final output with noisy information. Consequently, the direct output of LLMs frequently fails to meet the criteria for a valid formal code. Please note that despite the fact that output conditions can be communicated on the initial prompt, typically the output behaviour of the models cannot be fully controlled, nor fully enforceable. To alleviate this issue, we propose two types of denoising:</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.2"><span class="ltx_text ltx_font_bold" id="S2.SS2.p2.2.1">Code-Based Denoising (CBD).</span> Definition of a set of post-processing rules <math alttext="\mathcal{R}" class="ltx_Math" display="inline" id="S2.SS2.p2.1.m1.1"><semantics id="S2.SS2.p2.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p2.1.m1.1.1" xref="S2.SS2.p2.1.m1.1.1.cmml">ℛ</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.1.m1.1b"><ci id="S2.SS2.p2.1.m1.1.1.cmml" xref="S2.SS2.p2.1.m1.1.1">ℛ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.1.m1.1c">\mathcal{R}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.1.m1.1d">caligraphic_R</annotation></semantics></math> to remove irrelevant outputs such as <span class="ltx_text ltx_font_italic" id="S2.SS2.p2.2.2">extra explanations</span> and <span class="ltx_text ltx_font_italic" id="S2.SS2.p2.2.3">unsolicited proofs</span> , where a new formal statement is obtained: <math alttext="d(s)=\mathcal{R}(f_{\phi}(s))" class="ltx_Math" display="inline" id="S2.SS2.p2.2.m2.3"><semantics id="S2.SS2.p2.2.m2.3a"><mrow id="S2.SS2.p2.2.m2.3.3" xref="S2.SS2.p2.2.m2.3.3.cmml"><mrow id="S2.SS2.p2.2.m2.3.3.3" xref="S2.SS2.p2.2.m2.3.3.3.cmml"><mi id="S2.SS2.p2.2.m2.3.3.3.2" xref="S2.SS2.p2.2.m2.3.3.3.2.cmml">d</mi><mo id="S2.SS2.p2.2.m2.3.3.3.1" xref="S2.SS2.p2.2.m2.3.3.3.1.cmml">⁢</mo><mrow id="S2.SS2.p2.2.m2.3.3.3.3.2" xref="S2.SS2.p2.2.m2.3.3.3.cmml"><mo id="S2.SS2.p2.2.m2.3.3.3.3.2.1" stretchy="false" xref="S2.SS2.p2.2.m2.3.3.3.cmml">(</mo><mi id="S2.SS2.p2.2.m2.1.1" xref="S2.SS2.p2.2.m2.1.1.cmml">s</mi><mo id="S2.SS2.p2.2.m2.3.3.3.3.2.2" stretchy="false" xref="S2.SS2.p2.2.m2.3.3.3.cmml">)</mo></mrow></mrow><mo id="S2.SS2.p2.2.m2.3.3.2" xref="S2.SS2.p2.2.m2.3.3.2.cmml">=</mo><mrow id="S2.SS2.p2.2.m2.3.3.1" xref="S2.SS2.p2.2.m2.3.3.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p2.2.m2.3.3.1.3" xref="S2.SS2.p2.2.m2.3.3.1.3.cmml">ℛ</mi><mo id="S2.SS2.p2.2.m2.3.3.1.2" xref="S2.SS2.p2.2.m2.3.3.1.2.cmml">⁢</mo><mrow id="S2.SS2.p2.2.m2.3.3.1.1.1" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.cmml"><mo id="S2.SS2.p2.2.m2.3.3.1.1.1.2" stretchy="false" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p2.2.m2.3.3.1.1.1.1" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.cmml"><msub id="S2.SS2.p2.2.m2.3.3.1.1.1.1.2" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.cmml"><mi id="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.2" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.2.cmml">f</mi><mi id="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.3" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.3.cmml">ϕ</mi></msub><mo id="S2.SS2.p2.2.m2.3.3.1.1.1.1.1" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.1.cmml">⁢</mo><mrow id="S2.SS2.p2.2.m2.3.3.1.1.1.1.3.2" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.cmml"><mo id="S2.SS2.p2.2.m2.3.3.1.1.1.1.3.2.1" stretchy="false" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.cmml">(</mo><mi id="S2.SS2.p2.2.m2.2.2" xref="S2.SS2.p2.2.m2.2.2.cmml">s</mi><mo id="S2.SS2.p2.2.m2.3.3.1.1.1.1.3.2.2" stretchy="false" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.SS2.p2.2.m2.3.3.1.1.1.3" stretchy="false" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.2.m2.3b"><apply id="S2.SS2.p2.2.m2.3.3.cmml" xref="S2.SS2.p2.2.m2.3.3"><eq id="S2.SS2.p2.2.m2.3.3.2.cmml" xref="S2.SS2.p2.2.m2.3.3.2"></eq><apply id="S2.SS2.p2.2.m2.3.3.3.cmml" xref="S2.SS2.p2.2.m2.3.3.3"><times id="S2.SS2.p2.2.m2.3.3.3.1.cmml" xref="S2.SS2.p2.2.m2.3.3.3.1"></times><ci id="S2.SS2.p2.2.m2.3.3.3.2.cmml" xref="S2.SS2.p2.2.m2.3.3.3.2">𝑑</ci><ci id="S2.SS2.p2.2.m2.1.1.cmml" xref="S2.SS2.p2.2.m2.1.1">𝑠</ci></apply><apply id="S2.SS2.p2.2.m2.3.3.1.cmml" xref="S2.SS2.p2.2.m2.3.3.1"><times id="S2.SS2.p2.2.m2.3.3.1.2.cmml" xref="S2.SS2.p2.2.m2.3.3.1.2"></times><ci id="S2.SS2.p2.2.m2.3.3.1.3.cmml" xref="S2.SS2.p2.2.m2.3.3.1.3">ℛ</ci><apply id="S2.SS2.p2.2.m2.3.3.1.1.1.1.cmml" xref="S2.SS2.p2.2.m2.3.3.1.1.1"><times id="S2.SS2.p2.2.m2.3.3.1.1.1.1.1.cmml" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.1"></times><apply id="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.cmml" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.1.cmml" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.2">subscript</csymbol><ci id="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.2.cmml" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.2">𝑓</ci><ci id="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.3.cmml" xref="S2.SS2.p2.2.m2.3.3.1.1.1.1.2.3">italic-ϕ</ci></apply><ci id="S2.SS2.p2.2.m2.2.2.cmml" xref="S2.SS2.p2.2.m2.2.2">𝑠</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.2.m2.3c">d(s)=\mathcal{R}(f_{\phi}(s))</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.2.m2.3d">italic_d ( italic_s ) = caligraphic_R ( italic_f start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( italic_s ) )</annotation></semantics></math>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p3">
<p class="ltx_p" id="S2.SS2.p3.3"><span class="ltx_text ltx_font_bold" id="S2.SS2.p3.3.1">Prompt-Based Denoising (PBD).</span> The rigidity of a CBD method can be contrasted to a post-hoc prompt-based approach for the same purpose. Hence, we propose the design of a prompt <math alttext="p_{\text{den}}" class="ltx_Math" display="inline" id="S2.SS2.p3.1.m1.1"><semantics id="S2.SS2.p3.1.m1.1a"><msub id="S2.SS2.p3.1.m1.1.1" xref="S2.SS2.p3.1.m1.1.1.cmml"><mi id="S2.SS2.p3.1.m1.1.1.2" xref="S2.SS2.p3.1.m1.1.1.2.cmml">p</mi><mtext id="S2.SS2.p3.1.m1.1.1.3" xref="S2.SS2.p3.1.m1.1.1.3a.cmml">den</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.1.m1.1b"><apply id="S2.SS2.p3.1.m1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p3.1.m1.1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1">subscript</csymbol><ci id="S2.SS2.p3.1.m1.1.1.2.cmml" xref="S2.SS2.p3.1.m1.1.1.2">𝑝</ci><ci id="S2.SS2.p3.1.m1.1.1.3a.cmml" xref="S2.SS2.p3.1.m1.1.1.3"><mtext id="S2.SS2.p3.1.m1.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p3.1.m1.1.1.3">den</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.1.m1.1c">p_{\text{den}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.1.m1.1d">italic_p start_POSTSUBSCRIPT den end_POSTSUBSCRIPT</annotation></semantics></math> which performs the denoising of the autoformalization results. Denoising with only a prompt raises the risk of losing semantic consistency because of the bias in the training data of LLMs. Therefore, the set of retrieved items <math alttext="\mathcal{MS}(s)" class="ltx_Math" display="inline" id="S2.SS2.p3.2.m2.1"><semantics id="S2.SS2.p3.2.m2.1a"><mrow id="S2.SS2.p3.2.m2.1.2" xref="S2.SS2.p3.2.m2.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p3.2.m2.1.2.2" xref="S2.SS2.p3.2.m2.1.2.2.cmml">ℳ</mi><mo id="S2.SS2.p3.2.m2.1.2.1" xref="S2.SS2.p3.2.m2.1.2.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p3.2.m2.1.2.3" xref="S2.SS2.p3.2.m2.1.2.3.cmml">𝒮</mi><mo id="S2.SS2.p3.2.m2.1.2.1a" xref="S2.SS2.p3.2.m2.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.p3.2.m2.1.2.4.2" xref="S2.SS2.p3.2.m2.1.2.cmml"><mo id="S2.SS2.p3.2.m2.1.2.4.2.1" stretchy="false" xref="S2.SS2.p3.2.m2.1.2.cmml">(</mo><mi id="S2.SS2.p3.2.m2.1.1" xref="S2.SS2.p3.2.m2.1.1.cmml">s</mi><mo id="S2.SS2.p3.2.m2.1.2.4.2.2" stretchy="false" xref="S2.SS2.p3.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.2.m2.1b"><apply id="S2.SS2.p3.2.m2.1.2.cmml" xref="S2.SS2.p3.2.m2.1.2"><times id="S2.SS2.p3.2.m2.1.2.1.cmml" xref="S2.SS2.p3.2.m2.1.2.1"></times><ci id="S2.SS2.p3.2.m2.1.2.2.cmml" xref="S2.SS2.p3.2.m2.1.2.2">ℳ</ci><ci id="S2.SS2.p3.2.m2.1.2.3.cmml" xref="S2.SS2.p3.2.m2.1.2.3">𝒮</ci><ci id="S2.SS2.p3.2.m2.1.1.cmml" xref="S2.SS2.p3.2.m2.1.1">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.2.m2.1c">\mathcal{MS}(s)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.2.m2.1d">caligraphic_M caligraphic_S ( italic_s )</annotation></semantics></math> from MS-RAG could be used to maintain semantic consistency. The denoising becomes: <math alttext="d(s)=\text{LLM}(p_{\text{den}},\{(s_{i},\phi_{i})\}_{s},f_{\phi}(s))" class="ltx_Math" display="inline" id="S2.SS2.p3.3.m3.5"><semantics id="S2.SS2.p3.3.m3.5a"><mrow id="S2.SS2.p3.3.m3.5.5" xref="S2.SS2.p3.3.m3.5.5.cmml"><mrow id="S2.SS2.p3.3.m3.5.5.5" xref="S2.SS2.p3.3.m3.5.5.5.cmml"><mi id="S2.SS2.p3.3.m3.5.5.5.2" xref="S2.SS2.p3.3.m3.5.5.5.2.cmml">d</mi><mo id="S2.SS2.p3.3.m3.5.5.5.1" xref="S2.SS2.p3.3.m3.5.5.5.1.cmml">⁢</mo><mrow id="S2.SS2.p3.3.m3.5.5.5.3.2" xref="S2.SS2.p3.3.m3.5.5.5.cmml"><mo id="S2.SS2.p3.3.m3.5.5.5.3.2.1" stretchy="false" xref="S2.SS2.p3.3.m3.5.5.5.cmml">(</mo><mi id="S2.SS2.p3.3.m3.1.1" xref="S2.SS2.p3.3.m3.1.1.cmml">s</mi><mo id="S2.SS2.p3.3.m3.5.5.5.3.2.2" stretchy="false" xref="S2.SS2.p3.3.m3.5.5.5.cmml">)</mo></mrow></mrow><mo id="S2.SS2.p3.3.m3.5.5.4" xref="S2.SS2.p3.3.m3.5.5.4.cmml">=</mo><mrow id="S2.SS2.p3.3.m3.5.5.3" xref="S2.SS2.p3.3.m3.5.5.3.cmml"><mtext id="S2.SS2.p3.3.m3.5.5.3.5" xref="S2.SS2.p3.3.m3.5.5.3.5a.cmml">LLM</mtext><mo id="S2.SS2.p3.3.m3.5.5.3.4" xref="S2.SS2.p3.3.m3.5.5.3.4.cmml">⁢</mo><mrow id="S2.SS2.p3.3.m3.5.5.3.3.3" xref="S2.SS2.p3.3.m3.5.5.3.3.4.cmml"><mo id="S2.SS2.p3.3.m3.5.5.3.3.3.4" stretchy="false" xref="S2.SS2.p3.3.m3.5.5.3.3.4.cmml">(</mo><msub id="S2.SS2.p3.3.m3.3.3.1.1.1.1" xref="S2.SS2.p3.3.m3.3.3.1.1.1.1.cmml"><mi id="S2.SS2.p3.3.m3.3.3.1.1.1.1.2" xref="S2.SS2.p3.3.m3.3.3.1.1.1.1.2.cmml">p</mi><mtext id="S2.SS2.p3.3.m3.3.3.1.1.1.1.3" xref="S2.SS2.p3.3.m3.3.3.1.1.1.1.3a.cmml">den</mtext></msub><mo id="S2.SS2.p3.3.m3.5.5.3.3.3.5" xref="S2.SS2.p3.3.m3.5.5.3.3.4.cmml">,</mo><msub id="S2.SS2.p3.3.m3.4.4.2.2.2.2" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.cmml"><mrow id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.2.cmml"><mo id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.2" stretchy="false" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.2.cmml">{</mo><mrow id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.3.cmml"><mo id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.3" stretchy="false" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.3.cmml">(</mo><msub id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.cmml"><mi id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.2" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.2.cmml">s</mi><mi id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.3" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.4" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.3.cmml">,</mo><msub id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.cmml"><mi id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.2" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.2.cmml">ϕ</mi><mi id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.3" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.5" stretchy="false" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.3.cmml">)</mo></mrow><mo id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.3" stretchy="false" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.2.cmml">}</mo></mrow><mi id="S2.SS2.p3.3.m3.4.4.2.2.2.2.3" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.3.cmml">s</mi></msub><mo id="S2.SS2.p3.3.m3.5.5.3.3.3.6" xref="S2.SS2.p3.3.m3.5.5.3.3.4.cmml">,</mo><mrow id="S2.SS2.p3.3.m3.5.5.3.3.3.3" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.cmml"><msub id="S2.SS2.p3.3.m3.5.5.3.3.3.3.2" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.cmml"><mi id="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.2" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.2.cmml">f</mi><mi id="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.3" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.3.cmml">ϕ</mi></msub><mo id="S2.SS2.p3.3.m3.5.5.3.3.3.3.1" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.1.cmml">⁢</mo><mrow id="S2.SS2.p3.3.m3.5.5.3.3.3.3.3.2" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.cmml"><mo id="S2.SS2.p3.3.m3.5.5.3.3.3.3.3.2.1" stretchy="false" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.cmml">(</mo><mi id="S2.SS2.p3.3.m3.2.2" xref="S2.SS2.p3.3.m3.2.2.cmml">s</mi><mo id="S2.SS2.p3.3.m3.5.5.3.3.3.3.3.2.2" stretchy="false" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.cmml">)</mo></mrow></mrow><mo id="S2.SS2.p3.3.m3.5.5.3.3.3.7" stretchy="false" xref="S2.SS2.p3.3.m3.5.5.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.3.m3.5b"><apply id="S2.SS2.p3.3.m3.5.5.cmml" xref="S2.SS2.p3.3.m3.5.5"><eq id="S2.SS2.p3.3.m3.5.5.4.cmml" xref="S2.SS2.p3.3.m3.5.5.4"></eq><apply id="S2.SS2.p3.3.m3.5.5.5.cmml" xref="S2.SS2.p3.3.m3.5.5.5"><times id="S2.SS2.p3.3.m3.5.5.5.1.cmml" xref="S2.SS2.p3.3.m3.5.5.5.1"></times><ci id="S2.SS2.p3.3.m3.5.5.5.2.cmml" xref="S2.SS2.p3.3.m3.5.5.5.2">𝑑</ci><ci id="S2.SS2.p3.3.m3.1.1.cmml" xref="S2.SS2.p3.3.m3.1.1">𝑠</ci></apply><apply id="S2.SS2.p3.3.m3.5.5.3.cmml" xref="S2.SS2.p3.3.m3.5.5.3"><times id="S2.SS2.p3.3.m3.5.5.3.4.cmml" xref="S2.SS2.p3.3.m3.5.5.3.4"></times><ci id="S2.SS2.p3.3.m3.5.5.3.5a.cmml" xref="S2.SS2.p3.3.m3.5.5.3.5"><mtext id="S2.SS2.p3.3.m3.5.5.3.5.cmml" xref="S2.SS2.p3.3.m3.5.5.3.5">LLM</mtext></ci><vector id="S2.SS2.p3.3.m3.5.5.3.3.4.cmml" xref="S2.SS2.p3.3.m3.5.5.3.3.3"><apply id="S2.SS2.p3.3.m3.3.3.1.1.1.1.cmml" xref="S2.SS2.p3.3.m3.3.3.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p3.3.m3.3.3.1.1.1.1.1.cmml" xref="S2.SS2.p3.3.m3.3.3.1.1.1.1">subscript</csymbol><ci id="S2.SS2.p3.3.m3.3.3.1.1.1.1.2.cmml" xref="S2.SS2.p3.3.m3.3.3.1.1.1.1.2">𝑝</ci><ci id="S2.SS2.p3.3.m3.3.3.1.1.1.1.3a.cmml" xref="S2.SS2.p3.3.m3.3.3.1.1.1.1.3"><mtext id="S2.SS2.p3.3.m3.3.3.1.1.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p3.3.m3.3.3.1.1.1.1.3">den</mtext></ci></apply><apply id="S2.SS2.p3.3.m3.4.4.2.2.2.2.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.p3.3.m3.4.4.2.2.2.2.2.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2">subscript</csymbol><set id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.2.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1"><interval closure="open" id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.3.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2"><apply id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.1.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.2.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.2">𝑠</ci><ci id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.3.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.1.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2">subscript</csymbol><ci id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.2.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.2">italic-ϕ</ci><ci id="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.3.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.1.1.1.2.2.3">𝑖</ci></apply></interval></set><ci id="S2.SS2.p3.3.m3.4.4.2.2.2.2.3.cmml" xref="S2.SS2.p3.3.m3.4.4.2.2.2.2.3">𝑠</ci></apply><apply id="S2.SS2.p3.3.m3.5.5.3.3.3.3.cmml" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3"><times id="S2.SS2.p3.3.m3.5.5.3.3.3.3.1.cmml" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.1"></times><apply id="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.cmml" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.2"><csymbol cd="ambiguous" id="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.1.cmml" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.2">subscript</csymbol><ci id="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.2.cmml" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.2">𝑓</ci><ci id="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.3.cmml" xref="S2.SS2.p3.3.m3.5.5.3.3.3.3.2.3">italic-ϕ</ci></apply><ci id="S2.SS2.p3.3.m3.2.2.cmml" xref="S2.SS2.p3.3.m3.2.2">𝑠</ci></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.3.m3.5c">d(s)=\text{LLM}(p_{\text{den}},\{(s_{i},\phi_{i})\}_{s},f_{\phi}(s))</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.3.m3.5d">italic_d ( italic_s ) = LLM ( italic_p start_POSTSUBSCRIPT den end_POSTSUBSCRIPT , { ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT , italic_f start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( italic_s ) )</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S2.SS2.p4">
<p class="ltx_p" id="S2.SS2.p4.1">Using reported syntax errors as a feedback have been established as a systematic mechanism for guiding the correction of formal models  <cite class="ltx_cite ltx_citemacro_citep">(Quan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib30" title="">2024a</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib31" title="">b</a>)</cite> for LLMs potentially automatically correct the formalization results. In contrast, PBD and CBD provides a template-based/prescribed mechanism for output control.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>Auto-correction with Syntax Error Feedback (Auto-SEF)</h3>
<div class="ltx_para ltx_noindent" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.5">The validity of a formal code <math alttext="\phi" class="ltx_Math" display="inline" id="S2.SS3.p1.1.m1.1"><semantics id="S2.SS3.p1.1.m1.1a"><mi id="S2.SS3.p1.1.m1.1.1" xref="S2.SS3.p1.1.m1.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.1b"><ci id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.1c">\phi</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.1.m1.1d">italic_ϕ</annotation></semantics></math> can be checked by a theorem prover <math alttext="\mathcal{TP}" class="ltx_Math" display="inline" id="S2.SS3.p1.2.m2.1"><semantics id="S2.SS3.p1.2.m2.1a"><mrow id="S2.SS3.p1.2.m2.1.1" xref="S2.SS3.p1.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.2.m2.1.1.2" xref="S2.SS3.p1.2.m2.1.1.2.cmml">𝒯</mi><mo id="S2.SS3.p1.2.m2.1.1.1" xref="S2.SS3.p1.2.m2.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.2.m2.1.1.3" xref="S2.SS3.p1.2.m2.1.1.3.cmml">𝒫</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.2.m2.1b"><apply id="S2.SS3.p1.2.m2.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1"><times id="S2.SS3.p1.2.m2.1.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1.1"></times><ci id="S2.SS3.p1.2.m2.1.1.2.cmml" xref="S2.SS3.p1.2.m2.1.1.2">𝒯</ci><ci id="S2.SS3.p1.2.m2.1.1.3.cmml" xref="S2.SS3.p1.2.m2.1.1.3">𝒫</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.2.m2.1c">\mathcal{TP}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.2.m2.1d">caligraphic_T caligraphic_P</annotation></semantics></math> that supports its written formal language <math alttext="\mathcal{F}" class="ltx_Math" display="inline" id="S2.SS3.p1.3.m3.1"><semantics id="S2.SS3.p1.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.3.m3.1.1" xref="S2.SS3.p1.3.m3.1.1.cmml">ℱ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.3.m3.1b"><ci id="S2.SS3.p1.3.m3.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1">ℱ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.3.m3.1c">\mathcal{F}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.3.m3.1d">caligraphic_F</annotation></semantics></math>. If the formal code is not valid, the theorem prover can output a set of syntax errors <math alttext="\{e_{k}\}=\mathcal{TP}(\phi)" class="ltx_Math" display="inline" id="S2.SS3.p1.4.m4.2"><semantics id="S2.SS3.p1.4.m4.2a"><mrow id="S2.SS3.p1.4.m4.2.2" xref="S2.SS3.p1.4.m4.2.2.cmml"><mrow id="S2.SS3.p1.4.m4.2.2.1.1" xref="S2.SS3.p1.4.m4.2.2.1.2.cmml"><mo id="S2.SS3.p1.4.m4.2.2.1.1.2" stretchy="false" xref="S2.SS3.p1.4.m4.2.2.1.2.cmml">{</mo><msub id="S2.SS3.p1.4.m4.2.2.1.1.1" xref="S2.SS3.p1.4.m4.2.2.1.1.1.cmml"><mi id="S2.SS3.p1.4.m4.2.2.1.1.1.2" xref="S2.SS3.p1.4.m4.2.2.1.1.1.2.cmml">e</mi><mi id="S2.SS3.p1.4.m4.2.2.1.1.1.3" xref="S2.SS3.p1.4.m4.2.2.1.1.1.3.cmml">k</mi></msub><mo id="S2.SS3.p1.4.m4.2.2.1.1.3" stretchy="false" xref="S2.SS3.p1.4.m4.2.2.1.2.cmml">}</mo></mrow><mo id="S2.SS3.p1.4.m4.2.2.2" xref="S2.SS3.p1.4.m4.2.2.2.cmml">=</mo><mrow id="S2.SS3.p1.4.m4.2.2.3" xref="S2.SS3.p1.4.m4.2.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.4.m4.2.2.3.2" xref="S2.SS3.p1.4.m4.2.2.3.2.cmml">𝒯</mi><mo id="S2.SS3.p1.4.m4.2.2.3.1" xref="S2.SS3.p1.4.m4.2.2.3.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.4.m4.2.2.3.3" xref="S2.SS3.p1.4.m4.2.2.3.3.cmml">𝒫</mi><mo id="S2.SS3.p1.4.m4.2.2.3.1a" xref="S2.SS3.p1.4.m4.2.2.3.1.cmml">⁢</mo><mrow id="S2.SS3.p1.4.m4.2.2.3.4.2" xref="S2.SS3.p1.4.m4.2.2.3.cmml"><mo id="S2.SS3.p1.4.m4.2.2.3.4.2.1" stretchy="false" xref="S2.SS3.p1.4.m4.2.2.3.cmml">(</mo><mi id="S2.SS3.p1.4.m4.1.1" xref="S2.SS3.p1.4.m4.1.1.cmml">ϕ</mi><mo id="S2.SS3.p1.4.m4.2.2.3.4.2.2" stretchy="false" xref="S2.SS3.p1.4.m4.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.4.m4.2b"><apply id="S2.SS3.p1.4.m4.2.2.cmml" xref="S2.SS3.p1.4.m4.2.2"><eq id="S2.SS3.p1.4.m4.2.2.2.cmml" xref="S2.SS3.p1.4.m4.2.2.2"></eq><set id="S2.SS3.p1.4.m4.2.2.1.2.cmml" xref="S2.SS3.p1.4.m4.2.2.1.1"><apply id="S2.SS3.p1.4.m4.2.2.1.1.1.cmml" xref="S2.SS3.p1.4.m4.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.4.m4.2.2.1.1.1.1.cmml" xref="S2.SS3.p1.4.m4.2.2.1.1.1">subscript</csymbol><ci id="S2.SS3.p1.4.m4.2.2.1.1.1.2.cmml" xref="S2.SS3.p1.4.m4.2.2.1.1.1.2">𝑒</ci><ci id="S2.SS3.p1.4.m4.2.2.1.1.1.3.cmml" xref="S2.SS3.p1.4.m4.2.2.1.1.1.3">𝑘</ci></apply></set><apply id="S2.SS3.p1.4.m4.2.2.3.cmml" xref="S2.SS3.p1.4.m4.2.2.3"><times id="S2.SS3.p1.4.m4.2.2.3.1.cmml" xref="S2.SS3.p1.4.m4.2.2.3.1"></times><ci id="S2.SS3.p1.4.m4.2.2.3.2.cmml" xref="S2.SS3.p1.4.m4.2.2.3.2">𝒯</ci><ci id="S2.SS3.p1.4.m4.2.2.3.3.cmml" xref="S2.SS3.p1.4.m4.2.2.3.3">𝒫</ci><ci id="S2.SS3.p1.4.m4.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1">italic-ϕ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.4.m4.2c">\{e_{k}\}=\mathcal{TP}(\phi)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.4.m4.2d">{ italic_e start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT } = caligraphic_T caligraphic_P ( italic_ϕ )</annotation></semantics></math>. Using reported syntax errors as feedback has been established as a systematic mechanism for guiding the correction of formal models  <cite class="ltx_cite ltx_citemacro_citep">(Quan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib30" title="">2024a</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib31" title="">b</a>)</cite>, potentially allowing LLMs to automatically correcting the results of formalization. Hence, we design a prompt <math alttext="p_{\text{err}}" class="ltx_Math" display="inline" id="S2.SS3.p1.5.m5.1"><semantics id="S2.SS3.p1.5.m5.1a"><msub id="S2.SS3.p1.5.m5.1.1" xref="S2.SS3.p1.5.m5.1.1.cmml"><mi id="S2.SS3.p1.5.m5.1.1.2" xref="S2.SS3.p1.5.m5.1.1.2.cmml">p</mi><mtext id="S2.SS3.p1.5.m5.1.1.3" xref="S2.SS3.p1.5.m5.1.1.3a.cmml">err</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.5.m5.1b"><apply id="S2.SS3.p1.5.m5.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.5.m5.1.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1">subscript</csymbol><ci id="S2.SS3.p1.5.m5.1.1.2.cmml" xref="S2.SS3.p1.5.m5.1.1.2">𝑝</ci><ci id="S2.SS3.p1.5.m5.1.1.3a.cmml" xref="S2.SS3.p1.5.m5.1.1.3"><mtext id="S2.SS3.p1.5.m5.1.1.3.cmml" mathsize="70%" xref="S2.SS3.p1.5.m5.1.1.3">err</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.5.m5.1c">p_{\text{err}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.5.m5.1d">italic_p start_POSTSUBSCRIPT err end_POSTSUBSCRIPT</annotation></semantics></math> to add an auto-correction component to let LLMs recognize previously produced errors and correct mistakes. To maintain semantic consistency, retrieved examples are also used and the generation becomes:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.Ex6">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="g(s)=\text{LLM}(p_{\text{err}},\{(s_{i},\phi_{i})\}_{s},\{e_{k}\},d(s))." class="ltx_Math" display="block" id="S2.Ex6.m1.3"><semantics id="S2.Ex6.m1.3a"><mrow id="S2.Ex6.m1.3.3.1" xref="S2.Ex6.m1.3.3.1.1.cmml"><mrow id="S2.Ex6.m1.3.3.1.1" xref="S2.Ex6.m1.3.3.1.1.cmml"><mrow id="S2.Ex6.m1.3.3.1.1.6" xref="S2.Ex6.m1.3.3.1.1.6.cmml"><mi id="S2.Ex6.m1.3.3.1.1.6.2" xref="S2.Ex6.m1.3.3.1.1.6.2.cmml">g</mi><mo id="S2.Ex6.m1.3.3.1.1.6.1" xref="S2.Ex6.m1.3.3.1.1.6.1.cmml">⁢</mo><mrow id="S2.Ex6.m1.3.3.1.1.6.3.2" xref="S2.Ex6.m1.3.3.1.1.6.cmml"><mo id="S2.Ex6.m1.3.3.1.1.6.3.2.1" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.6.cmml">(</mo><mi id="S2.Ex6.m1.1.1" xref="S2.Ex6.m1.1.1.cmml">s</mi><mo id="S2.Ex6.m1.3.3.1.1.6.3.2.2" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.6.cmml">)</mo></mrow></mrow><mo id="S2.Ex6.m1.3.3.1.1.5" xref="S2.Ex6.m1.3.3.1.1.5.cmml">=</mo><mrow id="S2.Ex6.m1.3.3.1.1.4" xref="S2.Ex6.m1.3.3.1.1.4.cmml"><mtext id="S2.Ex6.m1.3.3.1.1.4.6" xref="S2.Ex6.m1.3.3.1.1.4.6a.cmml">LLM</mtext><mo id="S2.Ex6.m1.3.3.1.1.4.5" xref="S2.Ex6.m1.3.3.1.1.4.5.cmml">⁢</mo><mrow id="S2.Ex6.m1.3.3.1.1.4.4.4" xref="S2.Ex6.m1.3.3.1.1.4.4.5.cmml"><mo id="S2.Ex6.m1.3.3.1.1.4.4.4.5" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.4.4.5.cmml">(</mo><msub id="S2.Ex6.m1.3.3.1.1.1.1.1.1" xref="S2.Ex6.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S2.Ex6.m1.3.3.1.1.1.1.1.1.2" xref="S2.Ex6.m1.3.3.1.1.1.1.1.1.2.cmml">p</mi><mtext id="S2.Ex6.m1.3.3.1.1.1.1.1.1.3" xref="S2.Ex6.m1.3.3.1.1.1.1.1.1.3a.cmml">err</mtext></msub><mo id="S2.Ex6.m1.3.3.1.1.4.4.4.6" xref="S2.Ex6.m1.3.3.1.1.4.4.5.cmml">,</mo><msub id="S2.Ex6.m1.3.3.1.1.2.2.2.2" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.cmml"><mrow id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.2.cmml"><mo id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.2" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.2.cmml">{</mo><mrow id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml"><mo id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.3" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">(</mo><msub id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.cmml"><mi id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2.cmml">s</mi><mi id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.4" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">,</mo><msub id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.cmml"><mi id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2.cmml">ϕ</mi><mi id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.5" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml">)</mo></mrow><mo id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.3" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.2.cmml">}</mo></mrow><mi id="S2.Ex6.m1.3.3.1.1.2.2.2.2.3" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.3.cmml">s</mi></msub><mo id="S2.Ex6.m1.3.3.1.1.4.4.4.7" xref="S2.Ex6.m1.3.3.1.1.4.4.5.cmml">,</mo><mrow id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.2.cmml"><mo id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.2" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.2.cmml">{</mo><msub id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.cmml"><mi id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.2" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.2.cmml">e</mi><mi id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.3" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.3.cmml">k</mi></msub><mo id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.3" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.2.cmml">}</mo></mrow><mo id="S2.Ex6.m1.3.3.1.1.4.4.4.8" xref="S2.Ex6.m1.3.3.1.1.4.4.5.cmml">,</mo><mrow id="S2.Ex6.m1.3.3.1.1.4.4.4.4" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4.cmml"><mi id="S2.Ex6.m1.3.3.1.1.4.4.4.4.2" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4.2.cmml">d</mi><mo id="S2.Ex6.m1.3.3.1.1.4.4.4.4.1" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4.1.cmml">⁢</mo><mrow id="S2.Ex6.m1.3.3.1.1.4.4.4.4.3.2" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4.cmml"><mo id="S2.Ex6.m1.3.3.1.1.4.4.4.4.3.2.1" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4.cmml">(</mo><mi id="S2.Ex6.m1.2.2" xref="S2.Ex6.m1.2.2.cmml">s</mi><mo id="S2.Ex6.m1.3.3.1.1.4.4.4.4.3.2.2" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4.cmml">)</mo></mrow></mrow><mo id="S2.Ex6.m1.3.3.1.1.4.4.4.9" stretchy="false" xref="S2.Ex6.m1.3.3.1.1.4.4.5.cmml">)</mo></mrow></mrow></mrow><mo id="S2.Ex6.m1.3.3.1.2" lspace="0em" xref="S2.Ex6.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex6.m1.3b"><apply id="S2.Ex6.m1.3.3.1.1.cmml" xref="S2.Ex6.m1.3.3.1"><eq id="S2.Ex6.m1.3.3.1.1.5.cmml" xref="S2.Ex6.m1.3.3.1.1.5"></eq><apply id="S2.Ex6.m1.3.3.1.1.6.cmml" xref="S2.Ex6.m1.3.3.1.1.6"><times id="S2.Ex6.m1.3.3.1.1.6.1.cmml" xref="S2.Ex6.m1.3.3.1.1.6.1"></times><ci id="S2.Ex6.m1.3.3.1.1.6.2.cmml" xref="S2.Ex6.m1.3.3.1.1.6.2">𝑔</ci><ci id="S2.Ex6.m1.1.1.cmml" xref="S2.Ex6.m1.1.1">𝑠</ci></apply><apply id="S2.Ex6.m1.3.3.1.1.4.cmml" xref="S2.Ex6.m1.3.3.1.1.4"><times id="S2.Ex6.m1.3.3.1.1.4.5.cmml" xref="S2.Ex6.m1.3.3.1.1.4.5"></times><ci id="S2.Ex6.m1.3.3.1.1.4.6a.cmml" xref="S2.Ex6.m1.3.3.1.1.4.6"><mtext id="S2.Ex6.m1.3.3.1.1.4.6.cmml" xref="S2.Ex6.m1.3.3.1.1.4.6">LLM</mtext></ci><vector id="S2.Ex6.m1.3.3.1.1.4.4.5.cmml" xref="S2.Ex6.m1.3.3.1.1.4.4.4"><apply id="S2.Ex6.m1.3.3.1.1.1.1.1.1.cmml" xref="S2.Ex6.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex6.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S2.Ex6.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex6.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S2.Ex6.m1.3.3.1.1.1.1.1.1.2">𝑝</ci><ci id="S2.Ex6.m1.3.3.1.1.1.1.1.1.3a.cmml" xref="S2.Ex6.m1.3.3.1.1.1.1.1.1.3"><mtext id="S2.Ex6.m1.3.3.1.1.1.1.1.1.3.cmml" mathsize="70%" xref="S2.Ex6.m1.3.3.1.1.1.1.1.1.3">err</mtext></ci></apply><apply id="S2.Ex6.m1.3.3.1.1.2.2.2.2.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2"><csymbol cd="ambiguous" id="S2.Ex6.m1.3.3.1.1.2.2.2.2.2.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2">subscript</csymbol><set id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.2.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1"><interval closure="open" id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.3.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2"><apply id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.1.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.2">𝑠</ci><ci id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.1.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2">subscript</csymbol><ci id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.2">italic-ϕ</ci><ci id="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.1.1.1.2.2.3">𝑖</ci></apply></interval></set><ci id="S2.Ex6.m1.3.3.1.1.2.2.2.2.3.cmml" xref="S2.Ex6.m1.3.3.1.1.2.2.2.2.3">𝑠</ci></apply><set id="S2.Ex6.m1.3.3.1.1.3.3.3.3.2.cmml" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.1"><apply id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.cmml" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1"><csymbol cd="ambiguous" id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.1.cmml" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1">subscript</csymbol><ci id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.2.cmml" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.2">𝑒</ci><ci id="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.3.cmml" xref="S2.Ex6.m1.3.3.1.1.3.3.3.3.1.1.3">𝑘</ci></apply></set><apply id="S2.Ex6.m1.3.3.1.1.4.4.4.4.cmml" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4"><times id="S2.Ex6.m1.3.3.1.1.4.4.4.4.1.cmml" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4.1"></times><ci id="S2.Ex6.m1.3.3.1.1.4.4.4.4.2.cmml" xref="S2.Ex6.m1.3.3.1.1.4.4.4.4.2">𝑑</ci><ci id="S2.Ex6.m1.2.2.cmml" xref="S2.Ex6.m1.2.2">𝑠</ci></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex6.m1.3c">g(s)=\text{LLM}(p_{\text{err}},\{(s_{i},\phi_{i})\}_{s},\{e_{k}\},d(s)).</annotation><annotation encoding="application/x-llamapun" id="S2.Ex6.m1.3d">italic_g ( italic_s ) = LLM ( italic_p start_POSTSUBSCRIPT err end_POSTSUBSCRIPT , { ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT , { italic_e start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT } , italic_d ( italic_s ) ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS3.p1.6">where <math alttext="\{e_{k}\}=\mathcal{TP}(d(s))" class="ltx_Math" display="inline" id="S2.SS3.p1.6.m1.3"><semantics id="S2.SS3.p1.6.m1.3a"><mrow id="S2.SS3.p1.6.m1.3.3" xref="S2.SS3.p1.6.m1.3.3.cmml"><mrow id="S2.SS3.p1.6.m1.2.2.1.1" xref="S2.SS3.p1.6.m1.2.2.1.2.cmml"><mo id="S2.SS3.p1.6.m1.2.2.1.1.2" stretchy="false" xref="S2.SS3.p1.6.m1.2.2.1.2.cmml">{</mo><msub id="S2.SS3.p1.6.m1.2.2.1.1.1" xref="S2.SS3.p1.6.m1.2.2.1.1.1.cmml"><mi id="S2.SS3.p1.6.m1.2.2.1.1.1.2" xref="S2.SS3.p1.6.m1.2.2.1.1.1.2.cmml">e</mi><mi id="S2.SS3.p1.6.m1.2.2.1.1.1.3" xref="S2.SS3.p1.6.m1.2.2.1.1.1.3.cmml">k</mi></msub><mo id="S2.SS3.p1.6.m1.2.2.1.1.3" stretchy="false" xref="S2.SS3.p1.6.m1.2.2.1.2.cmml">}</mo></mrow><mo id="S2.SS3.p1.6.m1.3.3.3" xref="S2.SS3.p1.6.m1.3.3.3.cmml">=</mo><mrow id="S2.SS3.p1.6.m1.3.3.2" xref="S2.SS3.p1.6.m1.3.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.6.m1.3.3.2.3" xref="S2.SS3.p1.6.m1.3.3.2.3.cmml">𝒯</mi><mo id="S2.SS3.p1.6.m1.3.3.2.2" xref="S2.SS3.p1.6.m1.3.3.2.2.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.6.m1.3.3.2.4" xref="S2.SS3.p1.6.m1.3.3.2.4.cmml">𝒫</mi><mo id="S2.SS3.p1.6.m1.3.3.2.2a" xref="S2.SS3.p1.6.m1.3.3.2.2.cmml">⁢</mo><mrow id="S2.SS3.p1.6.m1.3.3.2.1.1" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.cmml"><mo id="S2.SS3.p1.6.m1.3.3.2.1.1.2" stretchy="false" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.cmml">(</mo><mrow id="S2.SS3.p1.6.m1.3.3.2.1.1.1" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.cmml"><mi id="S2.SS3.p1.6.m1.3.3.2.1.1.1.2" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.2.cmml">d</mi><mo id="S2.SS3.p1.6.m1.3.3.2.1.1.1.1" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.1.cmml">⁢</mo><mrow id="S2.SS3.p1.6.m1.3.3.2.1.1.1.3.2" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.cmml"><mo id="S2.SS3.p1.6.m1.3.3.2.1.1.1.3.2.1" stretchy="false" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.cmml">(</mo><mi id="S2.SS3.p1.6.m1.1.1" xref="S2.SS3.p1.6.m1.1.1.cmml">s</mi><mo id="S2.SS3.p1.6.m1.3.3.2.1.1.1.3.2.2" stretchy="false" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.SS3.p1.6.m1.3.3.2.1.1.3" stretchy="false" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.6.m1.3b"><apply id="S2.SS3.p1.6.m1.3.3.cmml" xref="S2.SS3.p1.6.m1.3.3"><eq id="S2.SS3.p1.6.m1.3.3.3.cmml" xref="S2.SS3.p1.6.m1.3.3.3"></eq><set id="S2.SS3.p1.6.m1.2.2.1.2.cmml" xref="S2.SS3.p1.6.m1.2.2.1.1"><apply id="S2.SS3.p1.6.m1.2.2.1.1.1.cmml" xref="S2.SS3.p1.6.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.6.m1.2.2.1.1.1.1.cmml" xref="S2.SS3.p1.6.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.SS3.p1.6.m1.2.2.1.1.1.2.cmml" xref="S2.SS3.p1.6.m1.2.2.1.1.1.2">𝑒</ci><ci id="S2.SS3.p1.6.m1.2.2.1.1.1.3.cmml" xref="S2.SS3.p1.6.m1.2.2.1.1.1.3">𝑘</ci></apply></set><apply id="S2.SS3.p1.6.m1.3.3.2.cmml" xref="S2.SS3.p1.6.m1.3.3.2"><times id="S2.SS3.p1.6.m1.3.3.2.2.cmml" xref="S2.SS3.p1.6.m1.3.3.2.2"></times><ci id="S2.SS3.p1.6.m1.3.3.2.3.cmml" xref="S2.SS3.p1.6.m1.3.3.2.3">𝒯</ci><ci id="S2.SS3.p1.6.m1.3.3.2.4.cmml" xref="S2.SS3.p1.6.m1.3.3.2.4">𝒫</ci><apply id="S2.SS3.p1.6.m1.3.3.2.1.1.1.cmml" xref="S2.SS3.p1.6.m1.3.3.2.1.1"><times id="S2.SS3.p1.6.m1.3.3.2.1.1.1.1.cmml" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.1"></times><ci id="S2.SS3.p1.6.m1.3.3.2.1.1.1.2.cmml" xref="S2.SS3.p1.6.m1.3.3.2.1.1.1.2">𝑑</ci><ci id="S2.SS3.p1.6.m1.1.1.cmml" xref="S2.SS3.p1.6.m1.1.1">𝑠</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.6.m1.3c">\{e_{k}\}=\mathcal{TP}(d(s))</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.6.m1.3d">{ italic_e start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT } = caligraphic_T caligraphic_P ( italic_d ( italic_s ) )</annotation></semantics></math>. Within this setting we propose an iterative process:</p>
</div>
<div class="ltx_para" id="S2.SS3.p2">
<table class="ltx_equation ltx_eqn_table" id="S2.Ex7">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="g_{k+1}(s)=\text{LLM}(p_{\text{err}},\{(s_{i},\phi_{i})\}_{s},e_{k,1},g_{k}(s))" class="ltx_Math" display="block" id="S2.Ex7.m1.8"><semantics id="S2.Ex7.m1.8a"><mrow id="S2.Ex7.m1.8.8" xref="S2.Ex7.m1.8.8.cmml"><mrow id="S2.Ex7.m1.8.8.6" xref="S2.Ex7.m1.8.8.6.cmml"><msub id="S2.Ex7.m1.8.8.6.2" xref="S2.Ex7.m1.8.8.6.2.cmml"><mi id="S2.Ex7.m1.8.8.6.2.2" xref="S2.Ex7.m1.8.8.6.2.2.cmml">g</mi><mrow id="S2.Ex7.m1.8.8.6.2.3" xref="S2.Ex7.m1.8.8.6.2.3.cmml"><mi id="S2.Ex7.m1.8.8.6.2.3.2" xref="S2.Ex7.m1.8.8.6.2.3.2.cmml">k</mi><mo id="S2.Ex7.m1.8.8.6.2.3.1" xref="S2.Ex7.m1.8.8.6.2.3.1.cmml">+</mo><mn id="S2.Ex7.m1.8.8.6.2.3.3" xref="S2.Ex7.m1.8.8.6.2.3.3.cmml">1</mn></mrow></msub><mo id="S2.Ex7.m1.8.8.6.1" xref="S2.Ex7.m1.8.8.6.1.cmml">⁢</mo><mrow id="S2.Ex7.m1.8.8.6.3.2" xref="S2.Ex7.m1.8.8.6.cmml"><mo id="S2.Ex7.m1.8.8.6.3.2.1" stretchy="false" xref="S2.Ex7.m1.8.8.6.cmml">(</mo><mi id="S2.Ex7.m1.3.3" xref="S2.Ex7.m1.3.3.cmml">s</mi><mo id="S2.Ex7.m1.8.8.6.3.2.2" stretchy="false" xref="S2.Ex7.m1.8.8.6.cmml">)</mo></mrow></mrow><mo id="S2.Ex7.m1.8.8.5" xref="S2.Ex7.m1.8.8.5.cmml">=</mo><mrow id="S2.Ex7.m1.8.8.4" xref="S2.Ex7.m1.8.8.4.cmml"><mtext id="S2.Ex7.m1.8.8.4.6" xref="S2.Ex7.m1.8.8.4.6a.cmml">LLM</mtext><mo id="S2.Ex7.m1.8.8.4.5" xref="S2.Ex7.m1.8.8.4.5.cmml">⁢</mo><mrow id="S2.Ex7.m1.8.8.4.4.4" xref="S2.Ex7.m1.8.8.4.4.5.cmml"><mo id="S2.Ex7.m1.8.8.4.4.4.5" stretchy="false" xref="S2.Ex7.m1.8.8.4.4.5.cmml">(</mo><msub id="S2.Ex7.m1.5.5.1.1.1.1" xref="S2.Ex7.m1.5.5.1.1.1.1.cmml"><mi id="S2.Ex7.m1.5.5.1.1.1.1.2" xref="S2.Ex7.m1.5.5.1.1.1.1.2.cmml">p</mi><mtext id="S2.Ex7.m1.5.5.1.1.1.1.3" xref="S2.Ex7.m1.5.5.1.1.1.1.3a.cmml">err</mtext></msub><mo id="S2.Ex7.m1.8.8.4.4.4.6" xref="S2.Ex7.m1.8.8.4.4.5.cmml">,</mo><msub id="S2.Ex7.m1.6.6.2.2.2.2" xref="S2.Ex7.m1.6.6.2.2.2.2.cmml"><mrow id="S2.Ex7.m1.6.6.2.2.2.2.1.1" xref="S2.Ex7.m1.6.6.2.2.2.2.1.2.cmml"><mo id="S2.Ex7.m1.6.6.2.2.2.2.1.1.2" stretchy="false" xref="S2.Ex7.m1.6.6.2.2.2.2.1.2.cmml">{</mo><mrow id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.3.cmml"><mo id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.3" stretchy="false" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.3.cmml">(</mo><msub id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.cmml"><mi id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.2" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.2.cmml">s</mi><mi id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.3" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.4" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.3.cmml">,</mo><msub id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.cmml"><mi id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.2" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.2.cmml">ϕ</mi><mi id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.3" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.5" stretchy="false" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.3.cmml">)</mo></mrow><mo id="S2.Ex7.m1.6.6.2.2.2.2.1.1.3" stretchy="false" xref="S2.Ex7.m1.6.6.2.2.2.2.1.2.cmml">}</mo></mrow><mi id="S2.Ex7.m1.6.6.2.2.2.2.3" xref="S2.Ex7.m1.6.6.2.2.2.2.3.cmml">s</mi></msub><mo id="S2.Ex7.m1.8.8.4.4.4.7" xref="S2.Ex7.m1.8.8.4.4.5.cmml">,</mo><msub id="S2.Ex7.m1.7.7.3.3.3.3" xref="S2.Ex7.m1.7.7.3.3.3.3.cmml"><mi id="S2.Ex7.m1.7.7.3.3.3.3.2" xref="S2.Ex7.m1.7.7.3.3.3.3.2.cmml">e</mi><mrow id="S2.Ex7.m1.2.2.2.4" xref="S2.Ex7.m1.2.2.2.3.cmml"><mi id="S2.Ex7.m1.1.1.1.1" xref="S2.Ex7.m1.1.1.1.1.cmml">k</mi><mo id="S2.Ex7.m1.2.2.2.4.1" xref="S2.Ex7.m1.2.2.2.3.cmml">,</mo><mn id="S2.Ex7.m1.2.2.2.2" xref="S2.Ex7.m1.2.2.2.2.cmml">1</mn></mrow></msub><mo id="S2.Ex7.m1.8.8.4.4.4.8" xref="S2.Ex7.m1.8.8.4.4.5.cmml">,</mo><mrow id="S2.Ex7.m1.8.8.4.4.4.4" xref="S2.Ex7.m1.8.8.4.4.4.4.cmml"><msub id="S2.Ex7.m1.8.8.4.4.4.4.2" xref="S2.Ex7.m1.8.8.4.4.4.4.2.cmml"><mi id="S2.Ex7.m1.8.8.4.4.4.4.2.2" xref="S2.Ex7.m1.8.8.4.4.4.4.2.2.cmml">g</mi><mi id="S2.Ex7.m1.8.8.4.4.4.4.2.3" xref="S2.Ex7.m1.8.8.4.4.4.4.2.3.cmml">k</mi></msub><mo id="S2.Ex7.m1.8.8.4.4.4.4.1" xref="S2.Ex7.m1.8.8.4.4.4.4.1.cmml">⁢</mo><mrow id="S2.Ex7.m1.8.8.4.4.4.4.3.2" xref="S2.Ex7.m1.8.8.4.4.4.4.cmml"><mo id="S2.Ex7.m1.8.8.4.4.4.4.3.2.1" stretchy="false" xref="S2.Ex7.m1.8.8.4.4.4.4.cmml">(</mo><mi id="S2.Ex7.m1.4.4" xref="S2.Ex7.m1.4.4.cmml">s</mi><mo id="S2.Ex7.m1.8.8.4.4.4.4.3.2.2" stretchy="false" xref="S2.Ex7.m1.8.8.4.4.4.4.cmml">)</mo></mrow></mrow><mo id="S2.Ex7.m1.8.8.4.4.4.9" stretchy="false" xref="S2.Ex7.m1.8.8.4.4.5.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex7.m1.8b"><apply id="S2.Ex7.m1.8.8.cmml" xref="S2.Ex7.m1.8.8"><eq id="S2.Ex7.m1.8.8.5.cmml" xref="S2.Ex7.m1.8.8.5"></eq><apply id="S2.Ex7.m1.8.8.6.cmml" xref="S2.Ex7.m1.8.8.6"><times id="S2.Ex7.m1.8.8.6.1.cmml" xref="S2.Ex7.m1.8.8.6.1"></times><apply id="S2.Ex7.m1.8.8.6.2.cmml" xref="S2.Ex7.m1.8.8.6.2"><csymbol cd="ambiguous" id="S2.Ex7.m1.8.8.6.2.1.cmml" xref="S2.Ex7.m1.8.8.6.2">subscript</csymbol><ci id="S2.Ex7.m1.8.8.6.2.2.cmml" xref="S2.Ex7.m1.8.8.6.2.2">𝑔</ci><apply id="S2.Ex7.m1.8.8.6.2.3.cmml" xref="S2.Ex7.m1.8.8.6.2.3"><plus id="S2.Ex7.m1.8.8.6.2.3.1.cmml" xref="S2.Ex7.m1.8.8.6.2.3.1"></plus><ci id="S2.Ex7.m1.8.8.6.2.3.2.cmml" xref="S2.Ex7.m1.8.8.6.2.3.2">𝑘</ci><cn id="S2.Ex7.m1.8.8.6.2.3.3.cmml" type="integer" xref="S2.Ex7.m1.8.8.6.2.3.3">1</cn></apply></apply><ci id="S2.Ex7.m1.3.3.cmml" xref="S2.Ex7.m1.3.3">𝑠</ci></apply><apply id="S2.Ex7.m1.8.8.4.cmml" xref="S2.Ex7.m1.8.8.4"><times id="S2.Ex7.m1.8.8.4.5.cmml" xref="S2.Ex7.m1.8.8.4.5"></times><ci id="S2.Ex7.m1.8.8.4.6a.cmml" xref="S2.Ex7.m1.8.8.4.6"><mtext id="S2.Ex7.m1.8.8.4.6.cmml" xref="S2.Ex7.m1.8.8.4.6">LLM</mtext></ci><vector id="S2.Ex7.m1.8.8.4.4.5.cmml" xref="S2.Ex7.m1.8.8.4.4.4"><apply id="S2.Ex7.m1.5.5.1.1.1.1.cmml" xref="S2.Ex7.m1.5.5.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex7.m1.5.5.1.1.1.1.1.cmml" xref="S2.Ex7.m1.5.5.1.1.1.1">subscript</csymbol><ci id="S2.Ex7.m1.5.5.1.1.1.1.2.cmml" xref="S2.Ex7.m1.5.5.1.1.1.1.2">𝑝</ci><ci id="S2.Ex7.m1.5.5.1.1.1.1.3a.cmml" xref="S2.Ex7.m1.5.5.1.1.1.1.3"><mtext id="S2.Ex7.m1.5.5.1.1.1.1.3.cmml" mathsize="70%" xref="S2.Ex7.m1.5.5.1.1.1.1.3">err</mtext></ci></apply><apply id="S2.Ex7.m1.6.6.2.2.2.2.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2"><csymbol cd="ambiguous" id="S2.Ex7.m1.6.6.2.2.2.2.2.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2">subscript</csymbol><set id="S2.Ex7.m1.6.6.2.2.2.2.1.2.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1"><interval closure="open" id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.3.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2"><apply id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.1.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.2.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.2">𝑠</ci><ci id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.3.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.1.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2">subscript</csymbol><ci id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.2.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.2">italic-ϕ</ci><ci id="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.3.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.1.1.1.2.2.3">𝑖</ci></apply></interval></set><ci id="S2.Ex7.m1.6.6.2.2.2.2.3.cmml" xref="S2.Ex7.m1.6.6.2.2.2.2.3">𝑠</ci></apply><apply id="S2.Ex7.m1.7.7.3.3.3.3.cmml" xref="S2.Ex7.m1.7.7.3.3.3.3"><csymbol cd="ambiguous" id="S2.Ex7.m1.7.7.3.3.3.3.1.cmml" xref="S2.Ex7.m1.7.7.3.3.3.3">subscript</csymbol><ci id="S2.Ex7.m1.7.7.3.3.3.3.2.cmml" xref="S2.Ex7.m1.7.7.3.3.3.3.2">𝑒</ci><list id="S2.Ex7.m1.2.2.2.3.cmml" xref="S2.Ex7.m1.2.2.2.4"><ci id="S2.Ex7.m1.1.1.1.1.cmml" xref="S2.Ex7.m1.1.1.1.1">𝑘</ci><cn id="S2.Ex7.m1.2.2.2.2.cmml" type="integer" xref="S2.Ex7.m1.2.2.2.2">1</cn></list></apply><apply id="S2.Ex7.m1.8.8.4.4.4.4.cmml" xref="S2.Ex7.m1.8.8.4.4.4.4"><times id="S2.Ex7.m1.8.8.4.4.4.4.1.cmml" xref="S2.Ex7.m1.8.8.4.4.4.4.1"></times><apply id="S2.Ex7.m1.8.8.4.4.4.4.2.cmml" xref="S2.Ex7.m1.8.8.4.4.4.4.2"><csymbol cd="ambiguous" id="S2.Ex7.m1.8.8.4.4.4.4.2.1.cmml" xref="S2.Ex7.m1.8.8.4.4.4.4.2">subscript</csymbol><ci id="S2.Ex7.m1.8.8.4.4.4.4.2.2.cmml" xref="S2.Ex7.m1.8.8.4.4.4.4.2.2">𝑔</ci><ci id="S2.Ex7.m1.8.8.4.4.4.4.2.3.cmml" xref="S2.Ex7.m1.8.8.4.4.4.4.2.3">𝑘</ci></apply><ci id="S2.Ex7.m1.4.4.cmml" xref="S2.Ex7.m1.4.4">𝑠</ci></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex7.m1.8c">g_{k+1}(s)=\text{LLM}(p_{\text{err}},\{(s_{i},\phi_{i})\}_{s},e_{k,1},g_{k}(s))</annotation><annotation encoding="application/x-llamapun" id="S2.Ex7.m1.8d">italic_g start_POSTSUBSCRIPT italic_k + 1 end_POSTSUBSCRIPT ( italic_s ) = LLM ( italic_p start_POSTSUBSCRIPT err end_POSTSUBSCRIPT , { ( italic_s start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_ϕ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT , italic_e start_POSTSUBSCRIPT italic_k , 1 end_POSTSUBSCRIPT , italic_g start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT ( italic_s ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS3.p2.3">with initial state <math alttext="g_{0}(s)=d(s)" class="ltx_Math" display="inline" id="S2.SS3.p2.1.m1.2"><semantics id="S2.SS3.p2.1.m1.2a"><mrow id="S2.SS3.p2.1.m1.2.3" xref="S2.SS3.p2.1.m1.2.3.cmml"><mrow id="S2.SS3.p2.1.m1.2.3.2" xref="S2.SS3.p2.1.m1.2.3.2.cmml"><msub id="S2.SS3.p2.1.m1.2.3.2.2" xref="S2.SS3.p2.1.m1.2.3.2.2.cmml"><mi id="S2.SS3.p2.1.m1.2.3.2.2.2" xref="S2.SS3.p2.1.m1.2.3.2.2.2.cmml">g</mi><mn id="S2.SS3.p2.1.m1.2.3.2.2.3" xref="S2.SS3.p2.1.m1.2.3.2.2.3.cmml">0</mn></msub><mo id="S2.SS3.p2.1.m1.2.3.2.1" xref="S2.SS3.p2.1.m1.2.3.2.1.cmml">⁢</mo><mrow id="S2.SS3.p2.1.m1.2.3.2.3.2" xref="S2.SS3.p2.1.m1.2.3.2.cmml"><mo id="S2.SS3.p2.1.m1.2.3.2.3.2.1" stretchy="false" xref="S2.SS3.p2.1.m1.2.3.2.cmml">(</mo><mi id="S2.SS3.p2.1.m1.1.1" xref="S2.SS3.p2.1.m1.1.1.cmml">s</mi><mo id="S2.SS3.p2.1.m1.2.3.2.3.2.2" stretchy="false" xref="S2.SS3.p2.1.m1.2.3.2.cmml">)</mo></mrow></mrow><mo id="S2.SS3.p2.1.m1.2.3.1" xref="S2.SS3.p2.1.m1.2.3.1.cmml">=</mo><mrow id="S2.SS3.p2.1.m1.2.3.3" xref="S2.SS3.p2.1.m1.2.3.3.cmml"><mi id="S2.SS3.p2.1.m1.2.3.3.2" xref="S2.SS3.p2.1.m1.2.3.3.2.cmml">d</mi><mo id="S2.SS3.p2.1.m1.2.3.3.1" xref="S2.SS3.p2.1.m1.2.3.3.1.cmml">⁢</mo><mrow id="S2.SS3.p2.1.m1.2.3.3.3.2" xref="S2.SS3.p2.1.m1.2.3.3.cmml"><mo id="S2.SS3.p2.1.m1.2.3.3.3.2.1" stretchy="false" xref="S2.SS3.p2.1.m1.2.3.3.cmml">(</mo><mi id="S2.SS3.p2.1.m1.2.2" xref="S2.SS3.p2.1.m1.2.2.cmml">s</mi><mo id="S2.SS3.p2.1.m1.2.3.3.3.2.2" stretchy="false" xref="S2.SS3.p2.1.m1.2.3.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p2.1.m1.2b"><apply id="S2.SS3.p2.1.m1.2.3.cmml" xref="S2.SS3.p2.1.m1.2.3"><eq id="S2.SS3.p2.1.m1.2.3.1.cmml" xref="S2.SS3.p2.1.m1.2.3.1"></eq><apply id="S2.SS3.p2.1.m1.2.3.2.cmml" xref="S2.SS3.p2.1.m1.2.3.2"><times id="S2.SS3.p2.1.m1.2.3.2.1.cmml" xref="S2.SS3.p2.1.m1.2.3.2.1"></times><apply id="S2.SS3.p2.1.m1.2.3.2.2.cmml" xref="S2.SS3.p2.1.m1.2.3.2.2"><csymbol cd="ambiguous" id="S2.SS3.p2.1.m1.2.3.2.2.1.cmml" xref="S2.SS3.p2.1.m1.2.3.2.2">subscript</csymbol><ci id="S2.SS3.p2.1.m1.2.3.2.2.2.cmml" xref="S2.SS3.p2.1.m1.2.3.2.2.2">𝑔</ci><cn id="S2.SS3.p2.1.m1.2.3.2.2.3.cmml" type="integer" xref="S2.SS3.p2.1.m1.2.3.2.2.3">0</cn></apply><ci id="S2.SS3.p2.1.m1.1.1.cmml" xref="S2.SS3.p2.1.m1.1.1">𝑠</ci></apply><apply id="S2.SS3.p2.1.m1.2.3.3.cmml" xref="S2.SS3.p2.1.m1.2.3.3"><times id="S2.SS3.p2.1.m1.2.3.3.1.cmml" xref="S2.SS3.p2.1.m1.2.3.3.1"></times><ci id="S2.SS3.p2.1.m1.2.3.3.2.cmml" xref="S2.SS3.p2.1.m1.2.3.3.2">𝑑</ci><ci id="S2.SS3.p2.1.m1.2.2.cmml" xref="S2.SS3.p2.1.m1.2.2">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p2.1.m1.2c">g_{0}(s)=d(s)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p2.1.m1.2d">italic_g start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ( italic_s ) = italic_d ( italic_s )</annotation></semantics></math> and <math alttext="e_{k,1}" class="ltx_Math" display="inline" id="S2.SS3.p2.2.m2.2"><semantics id="S2.SS3.p2.2.m2.2a"><msub id="S2.SS3.p2.2.m2.2.3" xref="S2.SS3.p2.2.m2.2.3.cmml"><mi id="S2.SS3.p2.2.m2.2.3.2" xref="S2.SS3.p2.2.m2.2.3.2.cmml">e</mi><mrow id="S2.SS3.p2.2.m2.2.2.2.4" xref="S2.SS3.p2.2.m2.2.2.2.3.cmml"><mi id="S2.SS3.p2.2.m2.1.1.1.1" xref="S2.SS3.p2.2.m2.1.1.1.1.cmml">k</mi><mo id="S2.SS3.p2.2.m2.2.2.2.4.1" xref="S2.SS3.p2.2.m2.2.2.2.3.cmml">,</mo><mn id="S2.SS3.p2.2.m2.2.2.2.2" xref="S2.SS3.p2.2.m2.2.2.2.2.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p2.2.m2.2b"><apply id="S2.SS3.p2.2.m2.2.3.cmml" xref="S2.SS3.p2.2.m2.2.3"><csymbol cd="ambiguous" id="S2.SS3.p2.2.m2.2.3.1.cmml" xref="S2.SS3.p2.2.m2.2.3">subscript</csymbol><ci id="S2.SS3.p2.2.m2.2.3.2.cmml" xref="S2.SS3.p2.2.m2.2.3.2">𝑒</ci><list id="S2.SS3.p2.2.m2.2.2.2.3.cmml" xref="S2.SS3.p2.2.m2.2.2.2.4"><ci id="S2.SS3.p2.2.m2.1.1.1.1.cmml" xref="S2.SS3.p2.2.m2.1.1.1.1">𝑘</ci><cn id="S2.SS3.p2.2.m2.2.2.2.2.cmml" type="integer" xref="S2.SS3.p2.2.m2.2.2.2.2">1</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p2.2.m2.2c">e_{k,1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p2.2.m2.2d">italic_e start_POSTSUBSCRIPT italic_k , 1 end_POSTSUBSCRIPT</annotation></semantics></math> is the first item in <math alttext="\mathcal{TP}(g_{k}(s))" class="ltx_Math" display="inline" id="S2.SS3.p2.3.m3.2"><semantics id="S2.SS3.p2.3.m3.2a"><mrow id="S2.SS3.p2.3.m3.2.2" xref="S2.SS3.p2.3.m3.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p2.3.m3.2.2.3" xref="S2.SS3.p2.3.m3.2.2.3.cmml">𝒯</mi><mo id="S2.SS3.p2.3.m3.2.2.2" xref="S2.SS3.p2.3.m3.2.2.2.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p2.3.m3.2.2.4" xref="S2.SS3.p2.3.m3.2.2.4.cmml">𝒫</mi><mo id="S2.SS3.p2.3.m3.2.2.2a" xref="S2.SS3.p2.3.m3.2.2.2.cmml">⁢</mo><mrow id="S2.SS3.p2.3.m3.2.2.1.1" xref="S2.SS3.p2.3.m3.2.2.1.1.1.cmml"><mo id="S2.SS3.p2.3.m3.2.2.1.1.2" stretchy="false" xref="S2.SS3.p2.3.m3.2.2.1.1.1.cmml">(</mo><mrow id="S2.SS3.p2.3.m3.2.2.1.1.1" xref="S2.SS3.p2.3.m3.2.2.1.1.1.cmml"><msub id="S2.SS3.p2.3.m3.2.2.1.1.1.2" xref="S2.SS3.p2.3.m3.2.2.1.1.1.2.cmml"><mi id="S2.SS3.p2.3.m3.2.2.1.1.1.2.2" xref="S2.SS3.p2.3.m3.2.2.1.1.1.2.2.cmml">g</mi><mi id="S2.SS3.p2.3.m3.2.2.1.1.1.2.3" xref="S2.SS3.p2.3.m3.2.2.1.1.1.2.3.cmml">k</mi></msub><mo id="S2.SS3.p2.3.m3.2.2.1.1.1.1" xref="S2.SS3.p2.3.m3.2.2.1.1.1.1.cmml">⁢</mo><mrow id="S2.SS3.p2.3.m3.2.2.1.1.1.3.2" xref="S2.SS3.p2.3.m3.2.2.1.1.1.cmml"><mo id="S2.SS3.p2.3.m3.2.2.1.1.1.3.2.1" stretchy="false" xref="S2.SS3.p2.3.m3.2.2.1.1.1.cmml">(</mo><mi id="S2.SS3.p2.3.m3.1.1" xref="S2.SS3.p2.3.m3.1.1.cmml">s</mi><mo id="S2.SS3.p2.3.m3.2.2.1.1.1.3.2.2" stretchy="false" xref="S2.SS3.p2.3.m3.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.SS3.p2.3.m3.2.2.1.1.3" stretchy="false" xref="S2.SS3.p2.3.m3.2.2.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p2.3.m3.2b"><apply id="S2.SS3.p2.3.m3.2.2.cmml" xref="S2.SS3.p2.3.m3.2.2"><times id="S2.SS3.p2.3.m3.2.2.2.cmml" xref="S2.SS3.p2.3.m3.2.2.2"></times><ci id="S2.SS3.p2.3.m3.2.2.3.cmml" xref="S2.SS3.p2.3.m3.2.2.3">𝒯</ci><ci id="S2.SS3.p2.3.m3.2.2.4.cmml" xref="S2.SS3.p2.3.m3.2.2.4">𝒫</ci><apply id="S2.SS3.p2.3.m3.2.2.1.1.1.cmml" xref="S2.SS3.p2.3.m3.2.2.1.1"><times id="S2.SS3.p2.3.m3.2.2.1.1.1.1.cmml" xref="S2.SS3.p2.3.m3.2.2.1.1.1.1"></times><apply id="S2.SS3.p2.3.m3.2.2.1.1.1.2.cmml" xref="S2.SS3.p2.3.m3.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p2.3.m3.2.2.1.1.1.2.1.cmml" xref="S2.SS3.p2.3.m3.2.2.1.1.1.2">subscript</csymbol><ci id="S2.SS3.p2.3.m3.2.2.1.1.1.2.2.cmml" xref="S2.SS3.p2.3.m3.2.2.1.1.1.2.2">𝑔</ci><ci id="S2.SS3.p2.3.m3.2.2.1.1.1.2.3.cmml" xref="S2.SS3.p2.3.m3.2.2.1.1.1.2.3">𝑘</ci></apply><ci id="S2.SS3.p2.3.m3.1.1.cmml" xref="S2.SS3.p2.3.m3.1.1">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p2.3.m3.2c">\mathcal{TP}(g_{k}(s))</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p2.3.m3.2d">caligraphic_T caligraphic_P ( italic_g start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT ( italic_s ) )</annotation></semantics></math>.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Evaluation Benchmark</h2>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>MathLibForm</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">Formal mathematical datasets, such as miniF2F <cite class="ltx_cite ltx_citemacro_citep">(Zheng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib43" title="">2022</a>)</cite>, predominantly concentrate on distinct mathematical problems representing simpler mathematical solving tasks. In contrast, the creation of mathematical libraries demands the autoformalization of statements which can be more specialized, conceptually more complex and potentially out-of-distribution. In this work we use <span class="ltx_text ltx_font_italic" id="S3.SS1.p1.1.1">IsarMathLib<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note"><span class="ltx_text ltx_font_upright" id="footnote2.1.1.1">2</span></span><a class="ltx_ref ltx_url ltx_font_typewriter ltx_font_upright" href="https://github.com/SKolodynski/IsarMathLib" title="">https://github.com/SKolodynski/IsarMathLib</a></span></span></span></span>, as a reference setting within the environment of the Isabelle/ZF theorem prover framework. Formal statements in IsarMathLib are frequently accompanied by textual comments, which serve as the corresponding natural language statements of the formal expressions. Mathematical items, such as <span class="ltx_text ltx_font_italic" id="S3.SS1.p1.1.2">lemma</span>, <span class="ltx_text ltx_font_italic" id="S3.SS1.p1.1.3">definition</span>, <span class="ltx_text ltx_font_italic" id="S3.SS1.p1.1.4">corollary</span>, <span class="ltx_text ltx_font_italic" id="S3.SS1.p1.1.5">theorem</span>, along with textual comments and proofs, were first systematically extracted via a script. This led to a total of 2,744 items, which were then randomly divided into training and test sets in a 90% to 10% split, resulting in 2,470 training samples and 274 test samples for constructing the MathLibForm dataset. To enrich the information contained in MathLibForm, we also informalize formal statements with Mistral and add the generated textual descriptions. The training and testing sets are used to define the knowledge base <math alttext="\mathcal{KB}" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.1"><semantics id="S3.SS1.p1.1.m1.1a"><mrow id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.1.m1.1.1.2" xref="S3.SS1.p1.1.m1.1.1.2.cmml">𝒦</mi><mo id="S3.SS1.p1.1.m1.1.1.1" xref="S3.SS1.p1.1.m1.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.1.m1.1.1.3" xref="S3.SS1.p1.1.m1.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><apply id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1"><times id="S3.SS1.p1.1.m1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1.1"></times><ci id="S3.SS1.p1.1.m1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.1.1.2">𝒦</ci><ci id="S3.SS1.p1.1.m1.1.1.3.cmml" xref="S3.SS1.p1.1.m1.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">\mathcal{KB}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.1d">caligraphic_K caligraphic_B</annotation></semantics></math> and the evaluation.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Evaluation Metrics</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">Assessing the overall correctness of autoformalized code outputs requires resource intensive specialized/expert-level human feedback. In addition, human evaluations can become largely subjective in situations where the assessment criteria is too complex to be elicited (i.e., the validation process cannot be systematized into a protocol), which, we argue, is the case for autoformalization. The dependency on multiple human validators with skills in both theorem provers and the underlying multi-domain mathematics makes this problem particularly severe.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1">We mentioned semantic correctness and consistency in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S2" title="2 Proposed Approach ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">2</span></a> as the final desirable properties as an outcome of an autoformalization process, which can become too strict for evaluating autoformalization tasks with current LLMs. Therefore, in this work, we propose two distinct proxies to assess code correctness: <span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.1">semantic similarity</span> and <span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.2">syntactic correctness</span>. Utilizing the ground truth as a reference, we measure semantic similarity using pairwise metrics, including BLEU <cite class="ltx_cite ltx_citemacro_citep">(Papineni et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib26" title="">2002</a>)</cite>, ChrF <cite class="ltx_cite ltx_citemacro_citep">(Popović, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib29" title="">2015</a>)</cite>, RUBY <cite class="ltx_cite ltx_citemacro_citep">(Tran et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib36" title="">2019</a>)</cite>, and CodeBERTScore (CBS) <cite class="ltx_cite ltx_citemacro_citep">(Zhou et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib44" title="">2023</a>)</cite>. The description of these metrics are provided in the <span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.3">Appendix</span>. For syntactic correctness, we use the Isabelle theorem prover to detect syntax errors in formal statements and use the <span class="ltx_text ltx_font_italic" id="S3.SS2.p2.1.4">Pass</span> metric which represents the success rate at which the generated formal statement does not exhibit any syntax errors, as verified by the theorem prover. The integration between the transformer and Isabelle is done on a ToolFormer setting with the support of an Isabelle client<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/inpefess/isabelle-client" title="">https://github.com/inpefess/isabelle-client</a></span></span></span> <cite class="ltx_cite ltx_citemacro_citep">(Shminke, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib35" title="">2022</a>)</cite>.</p>
</div>
<figure class="ltx_table" id="S3.T1">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S3.T1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="S3.T1.1.1.1.1">LLM</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_tt" id="S3.T1.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.1.1.2.1">
<span class="ltx_p" id="S3.T1.1.1.1.2.1.1" style="width:117.1pt;">Method</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.3">BLEU-2</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.4">ChrF</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.5">RUBY</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.6">CBS</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T1.1.1.1.7">Pass</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="7" id="S3.T1.1.2.2.1"><span class="ltx_text ltx_font_italic" id="S3.T1.1.2.2.1.1">Baselines</span></th>
</tr>
<tr class="ltx_tr" id="S3.T1.1.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.3.3.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.3.3.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.3.3.2.1">
<span class="ltx_p" id="S3.T1.1.3.3.2.1.1" style="width:117.1pt;">Zero-Shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.3.3.3">0.30</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.3.3.4">17.14</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.3.3.5">16.13</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.3.3.6">51.13</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.3.3.7">0.0</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.4.4.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.4.4.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.4.4.2.1">
<span class="ltx_p" id="S3.T1.1.4.4.2.1.1" style="width:117.1pt;">3-Shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.4.4.3">1.77</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.4.4.4">27.30</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.4.4.5">24.02</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.4.4.6">62.73</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.4.4.7">5.47</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.5.5.1">Llemma 7B</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.5.5.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.5.5.2.1">
<span class="ltx_p" id="S3.T1.1.5.5.2.1.1" style="width:117.1pt;">Zero-Shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.5.5.3">0.91</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.5.5.4">16.67</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.5.5.5">14.77</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.5.5.6">47.74</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.5.5.7">9.12</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.6.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.6.6.1">Llemma 7B</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.6.6.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.6.6.2.1">
<span class="ltx_p" id="S3.T1.1.6.6.2.1.1" style="width:117.1pt;">3-Shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.6.6.3">2.43</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.6.6.4">28.81</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.6.6.5">21.93</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.6.6.6">66.68</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.6.6.7">8.76</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.7.7.1">Mixtral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.7.7.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.7.7.2.1">
<span class="ltx_p" id="S3.T1.1.7.7.2.1.1" style="width:117.1pt;">Zero-Shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.7.7.3">0.65</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.7.7.4">16.33</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.7.7.5">17.97</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.7.7.6">51.07</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.7.7.7">0.36</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.8.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.8.8.1">Mixtral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.8.8.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.8.8.2.1">
<span class="ltx_p" id="S3.T1.1.8.8.2.1.1" style="width:117.1pt;">3-Shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.8.8.3">5.37</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.8.8.4">30.53</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.8.8.5">28.51</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.8.8.6">62.86</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.8.8.7">1.09</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.9.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.9.9.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.9.9.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.9.9.2.1">
<span class="ltx_p" id="S3.T1.1.9.9.2.1.1" style="width:117.1pt;">Zero-Shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.9.9.3">2.15</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.9.9.4">17.81</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.9.9.5">21.93</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.9.9.6">51.69</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.9.9.7">40.51</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.10.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.10.10.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.10.10.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.10.10.2.1">
<span class="ltx_p" id="S3.T1.1.10.10.2.1.1" style="width:117.1pt;">3-Shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.10.10.3">14.23</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.10.10.4">37.95</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.10.10.5">39.13</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.10.10.6">67.26</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.10.10.7">38.69</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.11.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="7" id="S3.T1.1.11.11.1"><span class="ltx_text ltx_font_italic" id="S3.T1.1.11.11.1.1">Retrieval Augmented Autoformalization</span></th>
</tr>
<tr class="ltx_tr" id="S3.T1.1.12.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.12.12.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.12.12.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.12.12.2.1">
<span class="ltx_p" id="S3.T1.1.12.12.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.12.12.2.1.1.1">T</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.12.12.2.1.1.2">T</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.12.12.3">10.05</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.12.12.4">51.38</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.12.12.5">44.82</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.12.12.6">76.93</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.12.12.7">21.53</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.13.13">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.13.13.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.13.13.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.13.13.2.1">
<span class="ltx_p" id="S3.T1.1.13.13.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.13.13.2.1.1.1">T</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.13.13.2.1.1.2">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.13.13.2.1.1.3">S</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.13.13.3">9.96</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.13.13.4">50.79</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.13.13.5">43.92</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.13.13.6">76.21</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.13.13.7">19.71</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.14.14">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.14.14.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.14.14.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.14.14.2.1">
<span class="ltx_p" id="S3.T1.1.14.14.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.14.14.2.1.1.1">T</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.14.14.2.1.1.2">I</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.14.14.2.1.1.3">S</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.14.14.3">5.65</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.14.14.4">36.92</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.14.14.5">32.23</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.14.14.6">67.47</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.14.14.7">8.76</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.15.15">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.15.15.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.15.15.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.15.15.2.1">
<span class="ltx_p" id="S3.T1.1.15.15.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.15.15.2.1.1.1">T</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.15.15.2.1.1.2">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.15.15.2.1.1.3">I</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.15.15.2.1.1.4">S</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.15.15.3">10.53</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.15.15.4">49.61</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.15.15.5">43.28</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.15.15.6">75.17</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.15.15.7">22.26</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.16.16">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.16.16.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.16.16.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.16.16.2.1">
<span class="ltx_p" id="S3.T1.1.16.16.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.16.16.2.1.1.1">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.16.16.2.1.1.2">ZS</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.16.16.2.1.1.3">T</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.16.16.3">10.14</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.16.16.4">46.89</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.16.16.5">40.76</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.16.16.6">73.69</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.16.16.7">12.77</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.17.17">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.17.17.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.17.17.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.17.17.2.1">
<span class="ltx_p" id="S3.T1.1.17.17.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.17.17.2.1.1.1">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.17.17.2.1.1.2">ZS</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.17.17.2.1.1.3">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.17.17.2.1.1.4">S</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.17.17.3">8.40</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.17.17.4">46.26</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.17.17.5">39.91</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.17.17.6">73.40</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.17.17.7">14.96</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.18.18">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.18.18.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.18.18.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.18.18.2.1">
<span class="ltx_p" id="S3.T1.1.18.18.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.18.18.2.1.1.1">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.18.18.2.1.1.2">ZS</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.18.18.2.1.1.3">I</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.18.18.2.1.1.4">S</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.18.18.3">5.51</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.18.18.4">36.71</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.18.18.5">31.94</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.18.18.6">66.91</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.18.18.7">10.95</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.19.19">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.19.19.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.19.19.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.19.19.2.1">
<span class="ltx_p" id="S3.T1.1.19.19.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.19.19.2.1.1.1">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.19.19.2.1.1.2">ZS</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.19.19.2.1.1.3">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.19.19.2.1.1.4">I</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.19.19.2.1.1.5">S</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.19.19.3">8.85</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.19.19.4">45.14</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.19.19.5">39.27</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.19.19.6">72.47</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.19.19.7">16.06</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.20.20">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.20.20.1">Llemma 7B</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.20.20.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.20.20.2.1">
<span class="ltx_p" id="S3.T1.1.20.20.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.20.20.2.1.1.1">T</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.20.20.2.1.1.2">T</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.20.20.3">4.18</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.20.20.4">36.93</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.20.20.5">28.68</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.20.20.6">69.93</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.20.20.7">12.77</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.21.21">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.21.21.1">Llemma 7B</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.21.21.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.21.21.2.1">
<span class="ltx_p" id="S3.T1.1.21.21.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.21.21.2.1.1.1">T</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.21.21.2.1.1.2">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.21.21.2.1.1.3">S</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.21.21.3">4.61</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.21.21.4">37.48</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.21.21.5">29.39</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.21.21.6">69.56</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.21.21.7">14.23</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.22.22">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.22.22.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="S3.T1.1.22.22.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.22.22.2.1">
<span class="ltx_p" id="S3.T1.1.22.22.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.22.22.2.1.1.1">T</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.22.22.2.1.1.2">T</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.22.22.3">36.32</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.22.22.4"><span class="ltx_text ltx_font_bold" id="S3.T1.1.22.22.4.1">59.63</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.22.22.5"><span class="ltx_text ltx_font_bold" id="S3.T1.1.22.22.5.1">58.51</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.22.22.6"><span class="ltx_text ltx_font_bold" id="S3.T1.1.22.22.6.1">79.14</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.22.22.7"><span class="ltx_text ltx_font_bold" id="S3.T1.1.22.22.7.1">64.60</span></td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.23.23">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S3.T1.1.23.23.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S3.T1.1.23.23.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T1.1.23.23.2.1">
<span class="ltx_p" id="S3.T1.1.23.23.2.1.1" style="width:117.1pt;">Query: <span class="ltx_text ltx_font_bold" id="S3.T1.1.23.23.2.1.1.1">T</span> Index: <span class="ltx_text ltx_font_bold" id="S3.T1.1.23.23.2.1.1.2">T</span>+<span class="ltx_text ltx_font_bold" id="S3.T1.1.23.23.2.1.1.3">S</span></span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T1.1.23.23.3"><span class="ltx_text ltx_font_bold" id="S3.T1.1.23.23.3.1">37.11</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T1.1.23.23.4">58.56</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T1.1.23.23.5">57.71</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T1.1.23.23.6">78.89</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T1.1.23.23.7">62.77</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Autoformalization results for different settings. BM25 retriever is used to retrieve Top-3 most similar samples for retrieval augmented autoformalization. Greedy decoding is used in generation for reproducibility. Code-based denoising is applied to all outputs. The query used to retrieve relevant exemplars includes: (<span class="ltx_text ltx_font_bold" id="S3.T1.8.1">T</span>): natural language textual description; (<span class="ltx_text ltx_font_bold" id="S3.T1.9.2">ZS</span>): zero-shot autoformalization result from Mistral. The index used for knowledge base has the following options: (<span class="ltx_text ltx_font_bold" id="S3.T1.10.3">T</span>): natural language textual description; (<span class="ltx_text ltx_font_bold" id="S3.T1.11.4">I</span>): informalization of formal statement generated from Mistral; (<span class="ltx_text ltx_font_bold" id="S3.T1.12.5">S</span>): formal statement. The setting with highest scores is highlighted in <span class="ltx_text ltx_font_bold" id="S3.T1.13.6">bold</span>.</figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments and Analysis</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Retrieval Augmented Autoformalization</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">We establish baselines in zero-shot and 3-shot settings on several state-of-the-art LLMs: Mistral <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib11" title="">2023a</a>)</cite>, Llemma 7B <cite class="ltx_cite ltx_citemacro_citep">(Azerbayev et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib2" title="">2024</a>)</cite>, Mixtral <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib12" title="">2024a</a>)</cite>, GPT-3.5-Turbo (descriptions of the models can be found in the <span class="ltx_text ltx_font_italic" id="S4.SS1.p1.1.1">Appendix</span>). The inclusion criteria for the selected foundation models prioritized: (i) sample diversity across the three modalities (model size, type, and specialization level), leading to 4 baseline foundation models; and (ii) a priority on open models, where the underlying modeling strategies are more transparent.</p>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1">For MS-RAG, BM25 <cite class="ltx_cite ltx_citemacro_citep">(Robertson et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib32" title="">1994</a>)</cite> is used as the primary ranking function to retrieve Top-k (k=3) most similar samples for exemplars (BM25 will concentrate a terminological similarity function). Different settings are contrasted for querying and indexing the reference KB. There are two choices for query: 1. natural language textual description; 2. description along with zero-shot autoformalization result from Mistral. The choices for indexing KB elements combine three content sources: 1. natural language textual description; 2. informalization of formal statements; 3. formal statements. For this specific analysis, we constrain the foundation model to Mistral. All results are reported in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S3.T1" title="Table 1 ‣ 3.2 Evaluation Metrics ‣ 3 Evaluation Benchmark ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p3.1.1">MS-RAG can improve autoformalization in mathematical libraries settings.</span>
As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S3.T1" title="Table 1 ‣ 3.2 Evaluation Metrics ‣ 3 Evaluation Benchmark ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">1</span></a>, for the same type of LLMs, using retrieved examples rather than fixed examples leads to an improvement in both semantic similarity and syntactic correctness of the generated formal statements. This mechanism can lift the performance of smaller models: e.g. as a smaller model, Mistral (7B) with MS-RAG can outperform Mixtral (8<math alttext="\times" class="ltx_Math" display="inline" id="S4.SS1.p3.1.m1.1"><semantics id="S4.SS1.p3.1.m1.1a"><mo id="S4.SS1.p3.1.m1.1.1" xref="S4.SS1.p3.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.1.m1.1b"><times id="S4.SS1.p3.1.m1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.1.m1.1c">\times</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p3.1.m1.1d">×</annotation></semantics></math>7B) with standard prompting across all metrics and is comparable to GPT-3.5 (175B) without MS-RAG according to some metrics such as RUBY.</p>
</div>
<figure class="ltx_table" id="S4.T2">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T2.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.1">Metric</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.2">MS-RAG</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.3">PBD 1A</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.4">PBD 1B</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.5">PBD 1C</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T2.1.1.1.6">PBD 1D</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T2.1.2.1">
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.T2.1.2.1.1">BLEU-2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.2">6.33 (+3.72)</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.3">8.88 (+1.61)</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.4">11.30 (+1.99)</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.5">15.21 (+1.49)</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.2.1.6">14.90 (<span class="ltx_text ltx_font_bold" id="S4.T2.1.2.1.6.1">+2.42</span>)</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.3.2">
<td class="ltx_td ltx_align_left" id="S4.T2.1.3.2.1">ChrF</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.2">48.45 (<span class="ltx_text ltx_font_bold" id="S4.T2.1.3.2.2.1">+2.93</span>)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.3">38.27 (-0.35)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.4">43.25 (-0.06)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.5">44.52 (-0.23)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.3.2.6">48.51 (+0.11)</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.4.3">
<td class="ltx_td ltx_align_left" id="S4.T2.1.4.3.1">RUBY</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.2">28.99 (+15.83)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.3">38.23 (+2.12)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.4">42.08 (+1.91)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.5">44.59 (+0.79)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.3.6">46.43 (<span class="ltx_text ltx_font_bold" id="S4.T2.1.4.3.6.1">+0.98</span>)</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.5.4">
<td class="ltx_td ltx_align_left" id="S4.T2.1.5.4.1">CBS</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.2">76.40 (<span class="ltx_text ltx_font_bold" id="S4.T2.1.5.4.2.1">+0.53</span>)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.3">68.04 (-0.03)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.4">70.51 (-0.07)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.5">71.92 (+0.01)</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.4.6">74.07 (+0.03)</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.6.5">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S4.T2.1.6.5.1">Pass</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.2">17.15 (+4.38)</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.3">6.57 (+0.00)</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.4">9.12 (+0.00)</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.5">13.50 (+0.37)</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.6.5.6">28.10 (<span class="ltx_text ltx_font_bold" id="S4.T2.1.6.5.6.1">+0.00</span>)</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>The effect of denoising on Mistral. The change of scores after applying CBD is recorded in round brackets. The setting with highest final scores is marked in <span class="ltx_text ltx_font_bold" id="S4.T2.3.1">bold</span>.</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS1.p4">
<p class="ltx_p" id="S4.SS1.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p4.1.1">Similarity-based few-shot outperforms zero-shot learning.</span> For all LLMs, autoformalization results with 3-shot exemplars are generally better than those from the zero-shot setting in terms of semantic similarity metrics. For syntactic correctness, Llemma 7B and GPT-3.5 in the zero-shot setting have slightly higher pass rates compared to the 3-shot setting.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p5">
<p class="ltx_p" id="S4.SS1.p5.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p5.1.1">MS-RAG levels the playing field across models of different scales.</span> As the largest LLM in this experimental setting, GPT-3.5 with MS-RAG significantly outperforms all other models. However, comparing its best performance with MS-RAG to its performance in the 3-shot setting, its relative change in syntactic correctness (67%) is much lower than that with Mistral (307%). The relative change for Llemma 7B is the smallest (62%). We attribute this to the fact that Llemma was not fine-tuned with instructions. These differences suggest that smaller LLM with instruction tuning benefits more from RAG.</p>
</div>
<figure class="ltx_table" id="S4.SS1.1">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_2">
<table class="ltx_tabular ltx_figure_panel ltx_guessed_headers ltx_align_middle" id="S4.SS1.1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.SS1.1.1.1">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="S4.SS1.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.1.2.1">
<span class="ltx_p" id="S4.SS1.1.1.1.2.1.1" style="width:65.0pt;">NL Statement</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="S4.SS1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.1.1.1">
<span class="ltx_p" id="S4.SS1.1.1.1.1.1.1" style="width:325.2pt;">The next lemma shows that open sets are members of (what we will prove later to be) the natural neighborhood system on <math alttext="X=\bigcup T" class="ltx_Math" display="inline" id="S4.SS1.1.1.1.1.1.1.m1.1"><semantics id="S4.SS1.1.1.1.1.1.1.m1.1a"><mrow id="S4.SS1.1.1.1.1.1.1.m1.1.1" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.cmml"><mi id="S4.SS1.1.1.1.1.1.1.m1.1.1.2" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.2.cmml">X</mi><mo id="S4.SS1.1.1.1.1.1.1.m1.1.1.1" rspace="0.111em" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.1.cmml">=</mo><mrow id="S4.SS1.1.1.1.1.1.1.m1.1.1.3" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.3.cmml"><mo id="S4.SS1.1.1.1.1.1.1.m1.1.1.3.1" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.3.1.cmml">⋃</mo><mi id="S4.SS1.1.1.1.1.1.1.m1.1.1.3.2" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.3.2.cmml">T</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.1.1.1.1.1.1.m1.1b"><apply id="S4.SS1.1.1.1.1.1.1.m1.1.1.cmml" xref="S4.SS1.1.1.1.1.1.1.m1.1.1"><eq id="S4.SS1.1.1.1.1.1.1.m1.1.1.1.cmml" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.1"></eq><ci id="S4.SS1.1.1.1.1.1.1.m1.1.1.2.cmml" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.2">𝑋</ci><apply id="S4.SS1.1.1.1.1.1.1.m1.1.1.3.cmml" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.3"><union id="S4.SS1.1.1.1.1.1.1.m1.1.1.3.1.cmml" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.3.1"></union><ci id="S4.SS1.1.1.1.1.1.1.m1.1.1.3.2.cmml" xref="S4.SS1.1.1.1.1.1.1.m1.1.1.3.2">𝑇</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.1.1.1.1.1.1.m1.1c">X=\bigcup T</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.1.1.1.1.1.1.m1.1d">italic_X = ⋃ italic_T</annotation></semantics></math>.</span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.SS1.1.1.2.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.2.1.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.2.1.1.1">
<span class="ltx_p" id="S4.SS1.1.1.2.1.1.1.1" style="width:65.0pt;">Ground Truth</span>
</span>
</td>
<td class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.2.1.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.2.1.2.1">
<span class="ltx_p" id="S4.SS1.1.1.2.1.2.1.1" style="width:325.2pt;">
<span class="ltx_listing ltx_lst_language_isabelle ltx_lstlisting ltx_listing" id="S4.SS1.1.1.2.1.2.1.1.1"><span class="ltx_listing_data"><a download="" href="data:text/plain;base64,bGVtbWEgb3Blbl9hcmVfbmVpZ2hzOiBhc3N1bWVzICJVXDxpbj5UIiAieFw8aW4+VSIKICBzaG93cyAieCBcPGluPiBcPFVuaW9uPlQiIGFuZCAiVSBcPGluPiB7Vlw8aW4+UG93KFw8VW5pb24+VCkKICAuXDxleGlzdHM+VVw8aW4+VC4gKHhcPGluPlUgXDxhbmQ+IFVcPHN1YnNldGVxPlYpfSI=">⬇</a></span>
<span class="ltx_listingline" id="lstnumberx1"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx1.1" style="color:#006699;">lemma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx1.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx1.3">open_are_neighs</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.4">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx1.5"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx1.6" style="color:#009966;">assumes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx1.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.8">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx1.9">U</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.10">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx1.11" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.12">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx1.13">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.14">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx1.15"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.16">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx1.17">x</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.18">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx1.19" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.20">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx1.21">U</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx1.22">"</span>
</span>
<span class="ltx_listingline" id="lstnumberx2"><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.1"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx2.2" style="color:#009966;">shows</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.4">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.5">x</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.7">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx2.8" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.9">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.11">\&lt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.12">Union</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.13">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.14">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.15">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.16"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx2.17" style="color:#009966;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.18"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.19">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.20">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.21"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.22">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx2.23" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.24">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx2.25"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.26">{</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.27">V</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.28">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx2.29" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.30">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.31">Pow</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.32">(\&lt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.33">Union</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.34">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx2.35">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx2.36">)</span>
</span>
<span class="ltx_listingline" id="lstnumberx3"><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx3.1"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.2">.\&lt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.3">exists</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.4">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.5">U</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.6">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx3.7" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.8">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.9">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.10">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx3.11"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.12">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.13">x</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.14">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx3.15" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.16">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.17">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx3.18"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.19">\&lt;</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx3.20" style="color:#009966;">and</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.21">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx3.22"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.23">U</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.24">\&lt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.25">subseteq</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.26">&gt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx3.27">V</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx3.28">)}"</span>
</span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.SS1.1.1.3.2">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.3.2.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.3.2.1.1">
<span class="ltx_p" id="S4.SS1.1.1.3.2.1.1.1" style="width:65.0pt;">3-shot</span>
</span>
</td>
<td class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.3.2.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.3.2.2.1">
<span class="ltx_p" id="S4.SS1.1.1.3.2.2.1.1" style="width:325.2pt;">
<span class="ltx_listing ltx_lst_language_isabelle ltx_lstlisting ltx_listing" id="S4.SS1.1.1.3.2.2.1.1.1"><span class="ltx_listing_data"><a download="" href="data:text/plain;base64,bGVtbWEgb3Blbl9zZXRfaW5fbmhzOiBhc3N1bWVzICJYID0gXDxiaWdjdXA+IFQiICJUIFw8aW4+CiAgQ292ZXJzKFgpIiAiVSBcPGluPiBPcGVuKFgpInNob3dzICJVIFw8aW4+IE5IUyhYKSIKd2hlcmUgTkhTKFgpIGlzIGEgcHJlZGljYXRlIHJlcHJlc2VudGluZyB0aGUgbmF0dXJhbApuZWlnaGJvcmhvb2Qgc3lzdGVtIG9uIFguIE5vdGU6IFRoZSBkZWZpbml0aW9uIG9mIE5IUyhYKQpzaG91bGQgYmUgcHJvdmlkZWQgYmVmb3JlIHVzaW5nIHRoaXMgbGVtbWEu">⬇</a></span>
<span class="ltx_listingline" id="lstnumberx4"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx4.1" style="color:#006699;">lemma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx4.3">open_set_in_nhs</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.4">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.5"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx4.6" style="color:#009966;">assumes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.8">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx4.9">X</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.11">=</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.12"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.13">\&lt;</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx4.14">bigcup</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.15">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.16"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx4.17">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.18">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.19"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.20">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx4.21">T</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx4.22"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.23">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx4.24" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx4.25">&gt;</span>
</span>
<span class="ltx_listingline" id="lstnumberx5"><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.1"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.2">Covers</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.3">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.4">X</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.5">)"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.7">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.8">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.9"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.10">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx5.11" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.12">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.13"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.14">Open</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.15">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.16">X</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.17">)"</span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx5.18" style="color:#009966;">shows</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.19"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.20">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.21">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.22"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.23">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx5.24" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.25">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx5.26"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.27">NHS</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.28">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx5.29">X</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx5.30">)"</span>
</span>
<span class="ltx_listingline" id="lstnumberx6"><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx6.1" style="color:#009966;">where</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.3">NHS</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx6.4">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.5">X</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx6.6">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.7"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.8">is</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.9"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.10">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.11"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.12">predicate</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.13"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.14">representing</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.15"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.16">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx6.17"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx6.18">natural</span>
</span>
<span class="ltx_listingline" id="lstnumberx7"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.1">neighborhood</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.3">system</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.4"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.5">on</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.6"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.7">X</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx7.8">.</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.9"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.10">Note</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx7.11">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.12"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.13">The</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.14"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx7.15" style="color:#006699;">definition</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.16"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx7.17" style="color:#006699;">of</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx7.18"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.19">NHS</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx7.20">(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx7.21">X</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx7.22">)</span>
</span>
<span class="ltx_listingline" id="lstnumberx8"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.1">should</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.3">be</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.4"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.5">provided</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.6"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.7">before</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.8"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx8.9" style="color:#006699;">using</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.10"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx8.11">this</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx8.12"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx8.13" style="color:#006699;">lemma</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx8.14">.</span>
</span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.SS1.1.1.4.3">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.4.3.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.4.3.1.1">
<span class="ltx_p" id="S4.SS1.1.1.4.3.1.1.1" style="width:65.0pt;">MS-RAG</span>
</span>
</td>
<td class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.4.3.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.4.3.2.1">
<span class="ltx_p" id="S4.SS1.1.1.4.3.2.1.1" style="width:325.2pt;">
<span class="ltx_listing ltx_lst_language_isabelle ltx_lstlisting ltx_listing" id="S4.SS1.1.1.4.3.2.1.1.1"><span class="ltx_listing_data"><a download="" href="data:text/plain;base64,bGVtbWEgb3Blbl9pc19uZWlnaGJvcnM6IGFzc3VtZXMgIlUgXDxpbj4gVCIgYW5kICJ4IFw8aW4+IFUiCiAgc2hvd3MgIlUgXDxpbj4gKHtuZWlnaGJvcmhvb2Qgc3lzdGVtIG9mfSBUKWAoeCkiCigqIE5vdGU6IFRoaXMgbGVtbWEgYXNzdW1lcyB0aGF0IFQgaXMgYSB0b3BvbG9neSwgYnV0IGl0IGlzCm5vdCBleHBsaWNpdGx5IHN0YXRlZCBpbiB0aGUgbmF0dXJhbCBsYW5ndWFnZSB2ZXJzaW9uLiop">⬇</a></span>
<span class="ltx_listingline" id="lstnumberx9"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx9.1" style="color:#006699;">lemma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.3">open_is_neighbors</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.4">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.5"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx9.6" style="color:#009966;">assumes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.8">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.9">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.11">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx9.12" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.13">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.14"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.15">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.16">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.17"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx9.18" style="color:#009966;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.19"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.20">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.21">x</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.22"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.23">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx9.24" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.25">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx9.26"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx9.27">U</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx9.28">"</span>
</span>
<span class="ltx_listingline" id="lstnumberx10"><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.1"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx10.2" style="color:#009966;">shows</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.4">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx10.5">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.7">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx10.8" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.9">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.11">({</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx10.12">neighborhood</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.13"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx10.14">system</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.15"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx10.16" style="color:#006699;">of</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.17">}</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx10.18"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx10.19">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.20">)‘(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx10.21">x</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx10.22">)"</span>
</span>
<span class="ltx_listingline" id="lstnumberx11"><span class="ltx_text ltx_font_typewriter" id="lstnumberx11.1">(*</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.3">Note</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx11.4">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.5"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.6">This</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.7"> </span><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx11.8" style="color:#006699;">lemma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.9"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx11.10" style="color:#009966;">assumes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.11"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.12">that</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.13"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.14">T</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.15"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.16">is</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.17"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.18">a</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.19"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.20">topology</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx11.21">,</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.22"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.23">but</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.24"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.25">it</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx11.26"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx11.27">is</span>
</span>
<span class="ltx_listingline" id="lstnumberx12"><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.1">not</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.3">explicitly</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.4"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.5">stated</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.6"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx12.7" style="color:#006699;">in</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.8"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.9">the</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.10"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.11">natural</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.12"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.13">language</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx12.14"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx12.15">version</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx12.16">.*)</span>
</span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.SS1.1.1.5.4">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.5.4.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.5.4.1.1">
<span class="ltx_p" id="S4.SS1.1.1.5.4.1.1.1" style="width:65.0pt;">PBD 1A</span>
</span>
</td>
<td class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.5.4.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.5.4.2.1">
<span class="ltx_p" id="S4.SS1.1.1.5.4.2.1.1" style="width:325.2pt;">
<span class="ltx_listing ltx_lst_language_isabelle ltx_lstlisting ltx_listing" id="S4.SS1.1.1.5.4.2.1.1.1"><span class="ltx_listing_data"><a download="" href="data:text/plain;base64,bGVtbWEgb3Blbl9pc19uZWlnaGJvcnM6IGFzc3VtZXMgIlUgOjogc2V0IFQiIGFuZCAieCA6OiBUIgogIHNob3dzICJVIDo6ICh7bmVpZ2hib3Job29kIHN5c3RlbSBvZn0gVCkgeCI=">⬇</a></span>
<span class="ltx_listingline" id="lstnumberx13"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx13.1" style="color:#006699;">lemma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx13.3">open_is_neighbors</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx13.4">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.5"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx13.6" style="color:#009966;">assumes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx13.8">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx13.9">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx13.11">::</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.12"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx13.13">set</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.14"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx13.15">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx13.16">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.17"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx13.18" style="color:#009966;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.19"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx13.20">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx13.21">x</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.22"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx13.23">::</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx13.24"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx13.25">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx13.26">"</span>
</span>
<span class="ltx_listingline" id="lstnumberx14"><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.1"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx14.2" style="color:#009966;">shows</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx14.4">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx14.5">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx14.7">::</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.8"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx14.9">({</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx14.10">neighborhood</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.11"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx14.12">system</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.13"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx14.14" style="color:#006699;">of</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx14.15">}</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.16"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx14.17">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx14.18">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx14.19"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx14.20">x</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx14.21">"</span>
</span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.SS1.1.1.6.5">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.6.5.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.6.5.1.1">
<span class="ltx_p" id="S4.SS1.1.1.6.5.1.1.1" style="width:65.0pt;">PBD 1B</span>
</span>
</td>
<td class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.6.5.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.6.5.2.1">
<span class="ltx_p" id="S4.SS1.1.1.6.5.2.1.1" style="width:325.2pt;">
<span class="ltx_listing ltx_lst_language_isabelle ltx_lstlisting ltx_listing" id="S4.SS1.1.1.6.5.2.1.1.1"><span class="ltx_listing_data"><a download="" href="data:text/plain;base64,bGVtbWEgb3Blbl9pc19uZWlnaGJvcnM6IGFzc3VtZXMgIlUgXDxpbj4gVCIgYW5kICJ4IFw8aW4+IFUiCiAgc2hvd3MgIlUgXDxpbj4gKHtuZWlnaGJvcmhvb2RcX3N5c3RlbX0gVClgKHgpIg==">⬇</a></span>
<span class="ltx_listingline" id="lstnumberx15"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx15.1" style="color:#006699;">lemma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.3">open_is_neighbors</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.4">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.5"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx15.6" style="color:#009966;">assumes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.8">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.9">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.11">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx15.12" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.13">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.14"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.15">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.16">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.17"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx15.18" style="color:#009966;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.19"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.20">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.21">x</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.22"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.23">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx15.24" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.25">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx15.26"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx15.27">U</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx15.28">"</span>
</span>
<span class="ltx_listingline" id="lstnumberx16"><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx16.1"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx16.2" style="color:#009966;">shows</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx16.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.4">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx16.5">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx16.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.7">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx16.8" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.9">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx16.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.11">({</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx16.12">neighborhood</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.13">\</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx16.14">_system</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.15">}</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx16.16"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx16.17">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.18">)‘(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx16.19">x</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx16.20">)"</span>
</span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.SS1.1.1.7.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.7.6.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.7.6.1.1">
<span class="ltx_p" id="S4.SS1.1.1.7.6.1.1.1" style="width:65.0pt;">PBD 1C</span>
</span>
</td>
<td class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="S4.SS1.1.1.7.6.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.7.6.2.1">
<span class="ltx_p" id="S4.SS1.1.1.7.6.2.1.1" style="width:325.2pt;">
<span class="ltx_listing ltx_lst_language_isabelle ltx_lstlisting ltx_listing" id="S4.SS1.1.1.7.6.2.1.1.1"><span class="ltx_listing_data"><a download="" href="data:text/plain;base64,bGVtbWEgb3Blbl9pc19uZWlnaGJvcnM6IGFzc3VtZXMgIlUgXDxpbj4gVCIgInggXDxpbj4gVSIKICBzaG93cyAiVSBcPGluPiAoe25laWdoYm9yaG9vZCBzeXN0ZW0gb2Z9IFQpIHgi">⬇</a></span>
<span class="ltx_listingline" id="lstnumberx17"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx17.1" style="color:#006699;">lemma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.3">open_is_neighbors</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.4">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.5"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx17.6" style="color:#009966;">assumes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.8">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.9">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.11">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx17.12" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.13">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.14"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.15">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.16">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.17"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.18">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.19">x</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.20"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.21">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx17.22" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.23">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx17.24"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx17.25">U</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx17.26">"</span>
</span>
<span class="ltx_listingline" id="lstnumberx18"><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.1"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx18.2" style="color:#009966;">shows</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.4">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx18.5">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.7">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx18.8" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.9">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.11">({</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx18.12">neighborhood</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.13"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx18.14">system</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.15"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx18.16" style="color:#006699;">of</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.17">}</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.18"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx18.19">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.20">)</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx18.21"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx18.22">x</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx18.23">"</span>
</span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.SS1.1.1.8.7">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S4.SS1.1.1.8.7.1">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.8.7.1.1">
<span class="ltx_p" id="S4.SS1.1.1.8.7.1.1.1" style="width:65.0pt;">PBD 1D</span>
</span>
</td>
<td class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S4.SS1.1.1.8.7.2">
<span class="ltx_inline-block ltx_align_top" id="S4.SS1.1.1.8.7.2.1">
<span class="ltx_p" id="S4.SS1.1.1.8.7.2.1.1" style="width:325.2pt;">
<span class="ltx_listing ltx_lst_language_isabelle ltx_lstlisting ltx_listing" id="S4.SS1.1.1.8.7.2.1.1.1"><span class="ltx_listing_data"><a download="" href="data:text/plain;base64,bGVtbWEgb3Blbl9pc19uZWlnaGJvcnM6IGFzc3VtZXMgIlUgXDxpbj4gVCIgYW5kICJ4IFw8aW4+IFUiCiAgc2hvd3MgIlUgXDxpbj4gKHtuZWlnaGJvcmhvb2Qgc3lzdGVtIG9mfSBUKWAoeCki">⬇</a></span>
<span class="ltx_listingline" id="lstnumberx19"><span class="ltx_text ltx_lst_keyword ltx_font_typewriter ltx_font_bold" id="lstnumberx19.1" style="color:#006699;">lemma</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.2"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx19.3">open_is_neighbors</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.4">:</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.5"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx19.6" style="color:#009966;">assumes</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.7"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.8">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx19.9">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.11">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx19.12" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.13">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.14"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx19.15">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.16">"</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.17"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx19.18" style="color:#009966;">and</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.19"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.20">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx19.21">x</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.22"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.23">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx19.24" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.25">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx19.26"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx19.27">U</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx19.28">"</span>
</span>
<span class="ltx_listingline" id="lstnumberx20"><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.1"> </span><span class="ltx_text ltx_lst_keywords2 ltx_font_typewriter ltx_font_bold" id="lstnumberx20.2" style="color:#009966;">shows</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.3"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.4">"</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.5">U</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.6"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.7">\&lt;</span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx20.8" style="color:#006699;">in</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.9">&gt;</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.10"> </span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.11">({</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.12">neighborhood</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.13"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.14">system</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.15"> </span><span class="ltx_text ltx_lst_keywords3 ltx_font_typewriter ltx_font_bold" id="lstnumberx20.16" style="color:#006699;">of</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.17">}</span><span class="ltx_text ltx_lst_space ltx_font_typewriter" id="lstnumberx20.18"> </span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.19">T</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.20">)‘(</span><span class="ltx_text ltx_lst_identifier ltx_font_typewriter" id="lstnumberx20.21">x</span><span class="ltx_text ltx_font_typewriter" id="lstnumberx20.22">)"</span>
</span>
</span></span>
</span>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 3: </span>An example using Mistral shows that only MS-RAG and PBD 1D have no syntax errors of formalization.</figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel" id="S4.SS1.1.2"><span class="ltx_text ltx_font_bold" id="S4.SS1.1.2.1">Augmenting the index with auto-informalization or the query with zero-shot auto-formalization does not lead to better retrieval.</span> Among all results in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S3.T1" title="Table 1 ‣ 3.2 Evaluation Metrics ‣ 3 Evaluation Benchmark ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">1</span></a>, GPT-3.5 with textual description query and textual description index achieves highest scores in four metrics except BLEU-2. This query and index combination setting is also an optimal choice for Mistral, as this setting leads to highest scores in ChrF, RUBY and CBS and second highest scores in Pass. Incorporating zero-shot results from Mistral as queries generally yields worse results compared to its counterpart. This is probably caused by the low quality of zero-shot formalization results. The application of informalized descriptions during indexing also does not lead to a performance improvement.</p>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<section class="ltx_subsection ltx_figure_panel" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Output Denoising</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">In this section, we investigate the impact of denoising. We select the result of MS-RAG (Query: T, Index: T) to apply PBD with four prompts: (<span class="ltx_text ltx_font_bold" id="S4.SS2.p1.1.1">1A</span>) The prompt only contains instructions to remove explanations and proofs; (<span class="ltx_text ltx_font_bold" id="S4.SS2.p1.1.2">1B</span>) 1A adds an additional instruction for <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.3">stylistic alignment</span> to declare that the final output after refinement should maintain the same syntactic style; (<span class="ltx_text ltx_font_bold" id="S4.SS2.p1.1.4">1C</span>) Includes some fixed formal statement examples for the stylistic alignment instruction in 1B; (<span class="ltx_text ltx_font_bold" id="S4.SS2.p1.1.5">1D</span>) Changes the fixed examples in 1C to retrieved examples from MS-RAG. We record the results of Mistral in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.T2" title="Table 2 ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p2.1.1">Denoising significantly impacts the quality of the formal statements.</span> Compared to results without denoising, using either denoising method can significantly improve BLEU and RUBY scores. Applying CBD to the original MS-RAG results can lead to an improvement across metrics. However, the effect of CBD decreases after we apply PBD to the results. For the Pass metric, performing CBD after PBD had no observable impact. This demonstrates the impact of PBD as a syntactic control mechanism. Our results suggest that a composition of PBD and CBD can yield the best performance in syntactic correctness while maintaining semantic similarity at the same or higher level.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p3">
<p class="ltx_p" id="S4.SS2.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p3.1.1">Denoising can reduce the performance gap between smaller and larger LLMs.</span> We also conducted similar experiments on GPT-3.5 (results in <span class="ltx_text ltx_font_italic" id="S4.SS2.p3.1.2">Appendix</span>). Denoising methods have a comparatively lower effect on the results of GPT-3.5, serving more as a function of control for smaller models, approaching their performance to larger models.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS2.p4">
<p class="ltx_p" id="S4.SS2.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS2.p4.1.1">Stylistic alignment is necessary when applying PBD.</span> Without the explicit declaration of stylistic alignment (1A), the syntactic correctness drops 10.58% compared to the results of MS-RAG. The reason is that when only prompted to remove redundant strings, some models tend to neglect the original syntactic style of the formal statements and rewrite them in the style that it was trained on. However, merely specifying that the model should maintain such a style without explicit examples (1B) does not effectively communicate the intent to preserve the style. This is demonstrated by the higher performance of 1C compared to 1B. In addition, using retrieved examples (1D) rather than fixed examples (1C) can further improve the results.</p>
</div>
<section class="ltx_paragraph" id="S4.SS2.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Case Study</h4>
<div class="ltx_para" id="S4.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S4.SS2.SSS0.Px1.p1.1">The example in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.SS1" title="4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">4.1</span></a> communicates the necessity of denoising. As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.SS1" title="4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">4.1</span></a>, both 3-shot and MS-RAG results include an additional textual description in the final output which does not form a formal statement. PBD 1A changes “\&lt;in&gt;” into “::” which is another way of expressing “<math alttext="\in" class="ltx_Math" display="inline" id="S4.SS2.SSS0.Px1.p1.1.m1.1"><semantics id="S4.SS2.SSS0.Px1.p1.1.m1.1a"><mo id="S4.SS2.SSS0.Px1.p1.1.m1.1.1" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.1.cmml">∈</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS0.Px1.p1.1.m1.1b"><in id="S4.SS2.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS0.Px1.p1.1.m1.1.1"></in></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS0.Px1.p1.1.m1.1c">\in</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS0.Px1.p1.1.m1.1d">∈</annotation></semantics></math>” but this expression is not provided in its prompt, so this behaviour is highly likely to be an inherited bias. PBD 1B and 1C mitigate this behaviour but they also introduce other syntactic errors, such as the missing word “of” or the special character “`”. <span class="ltx_text ltx_font_bold" id="S4.SS2.SSS0.Px1.p1.1.1">Only PBD 1D maintains the validity of the formal statement because the similarity of the retrieved examples and are thus emphasized during generation.</span></p>
</div>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Iterative Symbolic Refinement</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">In this section, we mainly focus on answering the question on whether syntactic errors can be corrected by LLMs in coordination with symbolic solvers. This process is iteratively run for up to nine cycles. To better illustrate the changes, we plot the scores of each iteration on the Pass metric in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.F2" title="Figure 2 ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<figure class="ltx_figure" id="S4.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="150" id="S4.F2.g1" src="x1.png" width="300"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Pass rate of each iteration with Auto-SEF. Iteration 0 is the start point before applying Auto-SEF.</figcaption>
</figure>
<figure class="ltx_figure" id="S4.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="150" id="S4.F3.g1" src="x2.png" width="300"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>BLEU-2 scores of each Auto-SEF iteration.</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS3.p2.1.1">Iterative Auto-SEF improves syntactic correctness of the formalization results.</span> As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.F2" title="Figure 2 ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">2</span></a>, both GPT-3.5 and Mistral can receive improvements from the iterative Auto-SEF method. This result demonstrates that Auto-SEF can indeed enable LLMs to fix some syntactic errors. The first iteration brings the largest increase (2.56% for Mistral, 4.38% for GPT-3.5) in pass rate. After that, the change becomes smoother and iterative improvements are limited to a small number of cycles.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS3.p3">
<p class="ltx_p" id="S4.SS3.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS3.p3.1.1">Smaller LLM tends to trade-off semantic similarity for syntactic correctness when applying Auto-SEF.</span> We focus on BLEU-2 as a proxy for semantic similarity and illustrate the scores of each iteration in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.F3" title="Figure 3 ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">3</span></a>. The BLEU-2 scores for GPT-3.5 remain steady across different iterations, whereas for Mistral, the scores decrease in the first few iterations. Combining this result with the improvement in pass rate, we hypothesize that a trade-off occurs due to the comparatively lower capacity of the model to perform syntactic correction while controlling for semantic drifting during the Auto-SEF prompting.</p>
</div>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>A Critique of the Metrics</h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">Evaluation metrics for autoformalization can disagree with each other <cite class="ltx_cite ltx_citemacro_citep">(Evtikhiev et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib7" title="">2023</a>)</cite>. We use all the results under CBD to calculate the Pearson product-moment correlation coefficients across the metrics, illustrating these coefficients with a heatmap in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.F4" title="Figure 4 ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">4</span></a>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS4.p2">
<p class="ltx_p" id="S4.SS4.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS4.p2.1.1">RUBY can serve as an initial metric when evaluating formalization results.</span> All correlation coefficients are larger than 0.6. This suggests that all metrics are positively related to each other and that any one of them is a reasonable indicator for evaluating formalization results. Among these metrics, RUBY has the strongest correlation (<math alttext="&gt;0.85" class="ltx_Math" display="inline" id="S4.SS4.p2.1.m1.1"><semantics id="S4.SS4.p2.1.m1.1a"><mrow id="S4.SS4.p2.1.m1.1.1" xref="S4.SS4.p2.1.m1.1.1.cmml"><mi id="S4.SS4.p2.1.m1.1.1.2" xref="S4.SS4.p2.1.m1.1.1.2.cmml"></mi><mo id="S4.SS4.p2.1.m1.1.1.1" xref="S4.SS4.p2.1.m1.1.1.1.cmml">&gt;</mo><mn id="S4.SS4.p2.1.m1.1.1.3" xref="S4.SS4.p2.1.m1.1.1.3.cmml">0.85</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.p2.1.m1.1b"><apply id="S4.SS4.p2.1.m1.1.1.cmml" xref="S4.SS4.p2.1.m1.1.1"><gt id="S4.SS4.p2.1.m1.1.1.1.cmml" xref="S4.SS4.p2.1.m1.1.1.1"></gt><csymbol cd="latexml" id="S4.SS4.p2.1.m1.1.1.2.cmml" xref="S4.SS4.p2.1.m1.1.1.2">absent</csymbol><cn id="S4.SS4.p2.1.m1.1.1.3.cmml" type="float" xref="S4.SS4.p2.1.m1.1.1.3">0.85</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p2.1.m1.1c">&gt;0.85</annotation><annotation encoding="application/x-llamapun" id="S4.SS4.p2.1.m1.1d">&gt; 0.85</annotation></semantics></math>) with the other metrics.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS4.p3">
<p class="ltx_p" id="S4.SS4.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS4.p3.1.1">Pass and BLEU metrics should be jointly used to prevent evaluation bias.</span> Some zero-shot results in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S3.T1" title="Table 1 ‣ 3.2 Evaluation Metrics ‣ 3 Evaluation Benchmark ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">1</span></a> lead to a high score on the Pass metric but lower scores on other metrics due to internal LLM style biases. According to Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#S4.F4" title="Figure 4 ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">4</span></a>, among metrics for semantic similarity, BLEU-2 has the strongest correlation with the Pass metric and hence can indicate syntactic correctness to some extent. We suggest considering both BLEU scores and Pass rate when comparing results.</p>
</div>
<figure class="ltx_figure" id="S4.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="280" id="S4.F4.g1" src="x3.png" width="280"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Correlation coefficients between metrics.</figcaption>
</figure>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Related Work</h2>
<section class="ltx_paragraph" id="S5.SS0.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Autoformalization</h4>
<div class="ltx_para" id="S5.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S5.SS0.SSS0.Px1.p1.1">Autoformalization bridges the gap between natural language and formal language. <cite class="ltx_cite ltx_citemacro_citet">Cunningham et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib5" title="">2022</a>)</cite> trained a standard transformer for proof autoformalization in Coq. <cite class="ltx_cite ltx_citemacro_citet">Lu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib18" title="">2024</a>)</cite> proposed a process-driven framework for autoformalization in Lean4. With the increased inference capabilities of LLMs in recent years, <cite class="ltx_cite ltx_citemacro_citet">Wu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib39" title="">2022</a>); Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib14" title="">2023b</a>)</cite> employ LLMs to autoformalize mathematical contents to Isabelle/HOL. Building on this foundation, our work also focuses on the improvement of autoformalization capabilities over LLMs.</p>
</div>
</section>
<section class="ltx_paragraph" id="S5.SS0.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Retrieval Augmented Generation <cite class="ltx_cite ltx_citemacro_citep">(Lewis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib16" title="">2020</a>)</cite>
</h4>
<div class="ltx_para" id="S5.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S5.SS0.SSS0.Px2.p1.1">RAG has demonstrated improvements for code generation <cite class="ltx_cite ltx_citemacro_citep">(Lu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib20" title="">2022</a>; Zhang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib42" title="">2023</a>)</cite> and in formal settings, <cite class="ltx_cite ltx_citemacro_citet">Yang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib41" title="">2023</a>)</cite> trained a retrieval-augmented language model for formal premise selection and theorem proving. Meanwhile, our work focuses on utilizing RAG for the task of improving autoformalization performance and coherence with respect to mathematical libraries.</p>
</div>
</section>
<section class="ltx_paragraph" id="S5.SS0.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">LLMs Refinement</h4>
<div class="ltx_para" id="S5.SS0.SSS0.Px3.p1">
<p class="ltx_p" id="S5.SS0.SSS0.Px3.p1.1">Through feedback-guided refinement strategies LLMs can perform self-correction <cite class="ltx_cite ltx_citemacro_citep">(Pan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib25" title="">2024</a>)</cite>. Recent studies <cite class="ltx_cite ltx_citemacro_citep">(Madaan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib21" title="">2023</a>; Quan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib30" title="">2024a</a>)</cite> evaluate strategies using iterative feedback to refine LLM-generated answers for downstream tasks. Previous work has used error messages generated by theorem provers as a mechanism to support the interface between LLMs and formal models <cite class="ltx_cite ltx_citemacro_citep">(Pan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib24" title="">2023</a>; Quan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib30" title="">2024a</a>; Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib15" title="">2024b</a>; Quan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib31" title="">2024b</a>)</cite> and also repair models <cite class="ltx_cite ltx_citemacro_citep">(First et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib8" title="">2023</a>)</cite> to address syntactic or proof errors. Similarly, our work applies prompt-based refinement from external feedback error messages generated by Isabelle/ZF to iteratively refine the formalized logical forms with specific error code locations.</p>
</div>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">This paper examined the effects of using RAG for autoformalization with LLMs and explored methods to refine formalization results. Our experiments demonstrated the effectiveness of incorporating a retrieval process for autoformalization. Further experiments indicated that denoising and iteratively refining syntax errors can enhance autoformalization quality. We evaluated results on different LLMs and found that smaller LLMs with instruction fine-tuning benefited more from the proposed methods, pointing in the direction of serving as a mechanism for reducing the formal performance gaps between larger and smaller models. We also built a dataset and assessed metrics for evaluating autoformalization, which could serve as resources/methodological contributions for formal mathematical reasoning tasks. We believe combining the semantic similarity metrics with the syntactic correctness metric is a reasonable proxy for semantic correctness.</p>
</div>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Acknowledgements</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">This work was partially funded by the Swiss National Science Foundation (SNSF) project NeuMath (<a class="ltx_ref ltx_href" href="https://data.snf.ch/grants/grant/204617" title="">200021_204617</a>).</p>
</div>
<section class="ltx_section" id="Sx2">
<h2 class="ltx_title ltx_title_section">Limitations</h2>
<div class="ltx_para" id="Sx2.p1">
<p class="ltx_p" id="Sx2.p1.1">Some natural language statements in our dataset are too general or informal, failing to provide a substantial content for autoformalization. Although our proposed framework, Auto-SEF, enhances syntactic control in autoformalization, increasing iterations do not yield significant improvements in the Pass metric. This limitation is due to the inability of LLMs to generate syntactically correct complex formal representations.</p>
</div>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Azerbayev et al. (2023)</span>
<span class="ltx_bibblock">
Zhangir Azerbayev, Bartosz Piotrowski, Hailey Schoelkopf, Edward W. Ayers, Dragomir Radev, and Jeremy Avigad. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2302.12433" title="">Proofnet: Autoformalizing and formally proving undergraduate-level mathematics</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">Preprint</em>, arXiv:2302.12433.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Azerbayev et al. (2024)</span>
<span class="ltx_bibblock">
Zhangir Azerbayev, Hailey Schoelkopf, Keiran Paster, Marco Dos Santos, Stephen Marcus McAleer, Albert Q. Jiang, Jia Deng, Stella Biderman, and Sean Welleck. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=4WnqRR915j" title="">Llemma: An open language model for mathematics</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bird and Loper (2004)</span>
<span class="ltx_bibblock">
Steven Bird and Edward Loper. 2004.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/P04-3031" title="">NLTK: The natural language toolkit</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Proceedings of the ACL Interactive Poster and Demonstration Sessions</em>, pages 214–217, Barcelona, Spain. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Brown et al. (2020)</span>
<span class="ltx_bibblock">
Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, Tom Henighan, Rewon Child, Aditya Ramesh, Daniel Ziegler, Jeffrey Wu, Clemens Winter, Chris Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, Scott Gray, Benjamin Chess, Jack Clark, Christopher Berner, Sam McCandlish, Alec Radford, Ilya Sutskever, and Dario Amodei. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2020/file/1457c0d6bfcb4967418bfb8ac142f64a-Paper.pdf" title="">Language models are few-shot learners</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">Advances in Neural Information Processing Systems</em>, volume 33, pages 1877–1901. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cunningham et al. (2022)</span>
<span class="ltx_bibblock">
Garett Cunningham, Razvan Bunescu, and David Juedes. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.mathnlp-1.4" title="">Towards autoformalization of mathematics and code correctness: Experiments with elementary proofs</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">Proceedings of the 1st Workshop on Mathematical Natural Language Processing (MathNLP)</em>, pages 25–32, Abu Dhabi, United Arab Emirates (Hybrid). Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">de Moura et al. (2015)</span>
<span class="ltx_bibblock">
Leonardo de Moura, Soonho Kong, Jeremy Avigad, Floris van Doorn, and Jakob von Raumer. 2015.

</span>
<span class="ltx_bibblock">The lean theorem prover (system description).

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">Automated Deduction - CADE-25</em>, pages 378–388, Cham. Springer International Publishing.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Evtikhiev et al. (2023)</span>
<span class="ltx_bibblock">
Mikhail Evtikhiev, Egor Bogomolov, Yaroslav Sokolov, and Timofey Bryksin. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1016/j.jss.2023.111741" title="">Out of the bleu: How should we assess quality of the code generation models?</a>
</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">J. Syst. Softw.</em>, 203(C).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">First et al. (2023)</span>
<span class="ltx_bibblock">
Emily C First, Markus Norman Rabe, Talia Ringer, and Yuriy Brun. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://api.semanticscholar.org/CorpusID:257427444" title="">Baldur: Whole-proof generation and repair with large language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">Proceedings of the 31st ACM Joint European Software Engineering Conference and Symposium on the Foundations of Software Engineering</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Han et al. (2022)</span>
<span class="ltx_bibblock">
Jesse Michael Han, Jason Rute, Yuhuai Wu, Edward Ayers, and Stanislas Polu. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=rpxJc9j04U" title="">Proof artifact co-training for theorem proving with language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hendrycks et al. (2021)</span>
<span class="ltx_bibblock">
Dan Hendrycks, Collin Burns, Saurav Kadavath, Akul Arora, Steven Basart, Eric Tang, Dawn Song, and Jacob Steinhardt. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=7Bywt2mQsCe" title="">Measuring mathematical problem solving with the MATH dataset</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Thirty-fifth Conference on Neural Information Processing Systems Datasets and Benchmarks Track (Round 2)</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023a)</span>
<span class="ltx_bibblock">
Albert Q. Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel, Guillaume Lample, Lucile Saulnier, Lélio Renard Lavaud, Marie-Anne Lachaux, Pierre Stock, Teven Le Scao, Thibaut Lavril, Thomas Wang, Timothée Lacroix, and William El Sayed. 2023a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2310.06825" title="">Mistral 7b</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Preprint</em>, arXiv:2310.06825.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2024a)</span>
<span class="ltx_bibblock">
Albert Q. Jiang, Alexandre Sablayrolles, Antoine Roux, Arthur Mensch, Blanche Savary, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Emma Bou Hanna, Florian Bressand, Gianna Lengyel, Guillaume Bour, Guillaume Lample, Lélio Renard Lavaud, Lucile Saulnier, Marie-Anne Lachaux, Pierre Stock, Sandeep Subramanian, Sophia Yang, Szymon Antoniak, Teven Le Scao, Théophile Gervet, Thibaut Lavril, Thomas Wang, Timothée Lacroix, and William El Sayed. 2024a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2401.04088" title="">Mixtral of experts</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Preprint</em>, arXiv:2401.04088.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2022)</span>
<span class="ltx_bibblock">
Albert Qiaochu Jiang, Wenda Li, Szymon Tworkowski, Konrad Czechowski, Tomasz Odrzygóźdź, Piotr Mił oś, Yuhuai Wu, and Mateja Jamnik. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2022/file/377c25312668e48f2e531e2f2c422483-Paper-Conference.pdf" title="">Thor: Wielding hammers to integrate language models and automated theorem provers</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Advances in Neural Information Processing Systems</em>, volume 35, pages 8360–8373. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023b)</span>
<span class="ltx_bibblock">
Albert Qiaochu Jiang, Sean Welleck, Jin Peng Zhou, Timothee Lacroix, Jiacheng Liu, Wenda Li, Mateja Jamnik, Guillaume Lample, and Yuhuai Wu. 2023b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=SMa9EAovKMC" title="">Draft, sketch, and prove: Guiding formal theorem provers with informal proofs</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">The Eleventh International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2024b)</span>
<span class="ltx_bibblock">
Dongwei Jiang, Marcio Fonseca, and Shay B. Cohen. 2024b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2403.13312" title="">Leanreasoner: Boosting complex logical reasoning with lean</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">Preprint</em>, arXiv:2403.13312.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim Rocktäschel, Sebastian Riedel, and Douwe Kiela. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2020/file/6b493230205f780e1bc26945df7481e5-Paper.pdf" title="">Retrieval-augmented generation for knowledge-intensive nlp tasks</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Advances in Neural Information Processing Systems</em>, volume 33, pages 9459–9474. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2023)</span>
<span class="ltx_bibblock">
Jiayu Liu, Zhenya Huang, ChengXiang Zhai, and Qi Liu. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1609/aaai.v37i4.25571" title="">Learning by applying: A general framework for mathematical reasoning via enhancing explicit knowledge learning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Proceedings of the AAAI Conference on Artificial Intelligence</em>, 37(4):4497–4506.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lu et al. (2024)</span>
<span class="ltx_bibblock">
Jianqiao Lu, Zhengying Liu, Yingjia Wan, Yinya Huang, Haiming Wang, Zhicheng Yang, Jing Tang, and Zhijiang Guo. 2024.

</span>
<span class="ltx_bibblock">Process-driven autoformalization in lean 4.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">arXiv preprint arXiv:2406.01940</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lu et al. (2023)</span>
<span class="ltx_bibblock">
Pan Lu, Liang Qiu, Wenhao Yu, Sean Welleck, and Kai-Wei Chang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.acl-long.817" title="">A survey of deep learning for mathematical reasoning</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 14605–14631, Toronto, Canada. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lu et al. (2022)</span>
<span class="ltx_bibblock">
Shuai Lu, Nan Duan, Hojae Han, Daya Guo, Seung-won Hwang, and Alexey Svyatkovskiy. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.acl-long.431" title="">ReACC: A retrieval-augmented code completion framework</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Proceedings of the 60th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 6227–6240, Dublin, Ireland. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Madaan et al. (2023)</span>
<span class="ltx_bibblock">
Aman Madaan, Niket Tandon, Prakhar Gupta, Skyler Hallinan, Luyu Gao, Sarah Wiegreffe, Uri Alon, Nouha Dziri, Shrimai Prabhumoye, Yiming Yang, Shashank Gupta, Bodhisattwa Prasad Majumder, Katherine Hermann, Sean Welleck, Amir Yazdanbakhsh, and Peter Clark. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2303.17651" title="">Self-refine: Iterative refinement with self-feedback</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">Preprint</em>, arXiv:2303.17651.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Meadows and Freitas (2023)</span>
<span class="ltx_bibblock">
Jordan Meadows and André Freitas. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1162/tacl_a_00594" title="">Introduction to mathematical language processing: Informal proofs, word problems, and supporting tasks</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">Transactions of the Association for Computational Linguistics</em>, 11:1162–1184.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et al. (2022)</span>
<span class="ltx_bibblock">
Long Ouyang, Jeffrey Wu, Xu Jiang, Diogo Almeida, Carroll Wainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, John Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda Askell, Peter Welinder, Paul F Christiano, Jan Leike, and Ryan Lowe. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2022/file/b1efde53be364a73914f58805a001731-Paper-Conference.pdf" title="">Training language models to follow instructions with human feedback</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Advances in Neural Information Processing Systems</em>, volume 35, pages 27730–27744. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pan et al. (2023)</span>
<span class="ltx_bibblock">
Liangming Pan, Alon Albalak, Xinyi Wang, and William Wang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.findings-emnlp.248" title="">Logic-LM: Empowering large language models with symbolic solvers for faithful logical reasoning</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">Findings of the Association for Computational Linguistics: EMNLP 2023</em>, pages 3806–3824, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pan et al. (2024)</span>
<span class="ltx_bibblock">
Liangming Pan, Michael Saxon, Wenda Xu, Deepak Nathani, Xinyi Wang, and William Yang Wang. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1162/tacl_a_00660" title="">Automatically correcting large language models: Surveying the landscape of diverse automated correction strategies</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Transactions of the Association for Computational Linguistics</em>, 11:484–506.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Papineni et al. (2002)</span>
<span class="ltx_bibblock">
Kishore Papineni, Salim Roukos, Todd Ward, and Wei-Jing Zhu. 2002.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.3115/1073083.1073135" title="">Bleu: a method for automatic evaluation of machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">Proceedings of the 40th Annual Meeting of the Association for Computational Linguistics</em>, pages 311–318, Philadelphia, Pennsylvania, USA. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Paulson (2000)</span>
<span class="ltx_bibblock">
Lawrence C. Paulson. 2000.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/cs/9301106" title="">Isabelle: The next 700 theorem provers</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">Preprint</em>, arXiv:cs/9301106.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Polu and Sutskever (2020)</span>
<span class="ltx_bibblock">
Stanislas Polu and Ilya Sutskever. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2009.03393" title="">Generative language modeling for automated theorem proving</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">Preprint</em>, arXiv:2009.03393.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Popović (2015)</span>
<span class="ltx_bibblock">
Maja Popović. 2015.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/W15-3049" title="">chrF: character n-gram F-score for automatic MT evaluation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">Proceedings of the Tenth Workshop on Statistical Machine Translation</em>, pages 392–395, Lisbon, Portugal. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Quan et al. (2024a)</span>
<span class="ltx_bibblock">
Xin Quan, Marco Valentino, Louise Dennis, and Andre Freitas. 2024a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2024.eacl-long.1" title="">Enhancing ethical explanations of large language models through iterative symbolic refinement</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">Proceedings of the 18th Conference of the European Chapter of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 1–22, St. Julian’s, Malta. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Quan et al. (2024b)</span>
<span class="ltx_bibblock">
Xin Quan, Marco Valentino, Louise A. Dennis, and André Freitas. 2024b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2405.01379" title="">Verification and refinement of natural language explanations through llm-symbolic theorem proving</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">Preprint</em>, arXiv:2405.01379.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Robertson et al. (1994)</span>
<span class="ltx_bibblock">
Stephen E. Robertson, Steve Walker, Susan Jones, Micheline Hancock-Beaulieu, and Mike Gatford. 1994.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://dblp.uni-trier.de/db/conf/trec/trec94.html#RobertsonWJHG94" title="">Okapi at trec-3.</a>
</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">TREC</em>, volume 500-225 of <em class="ltx_emph ltx_font_italic" id="bib.bib32.2.2">NIST Special Publication</em>, pages 109–126. National Institute of Standards and Technology (NIST).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Saxton et al. (2019)</span>
<span class="ltx_bibblock">
David Saxton, Edward Grefenstette, Felix Hill, and Pushmeet Kohli. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://api.semanticscholar.org/CorpusID:85504763" title="">Analysing mathematical reasoning abilities of neural models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">ArXiv</em>, abs/1904.01557.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Scholze (2022)</span>
<span class="ltx_bibblock">
Peter Scholze. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1080/10586458.2021.1926016" title="">Liquid tensor experiment</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">Experimental Mathematics</em>, 31(2):349–354.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shminke (2022)</span>
<span class="ltx_bibblock">
Boris Shminke. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2212.11173" title="">Python client for isabelle server</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">Preprint</em>, arXiv:2212.11173.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tran et al. (2019)</span>
<span class="ltx_bibblock">
Ngoc Tran, Hieu Tran, Son Nguyen, Hoan Nguyen, and Tien N. Nguyen. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1109/ICPC.2019.00034" title="">Does bleu score work for code migration?</a>
</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">Proceedings of the 27th International Conference on Program Comprehension</em>, ICPC ’19, page 165–176. IEEE Press.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang and Deng (2020)</span>
<span class="ltx_bibblock">
Mingzhe Wang and Jia Deng. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2020/file/d2a27e83d429f0dcae6b937cf440aeb1-Paper.pdf" title="">Learning to prove theorems by learning to generate theorems</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">Advances in Neural Information Processing Systems</em>, volume 33, pages 18146–18157. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2022)</span>
<span class="ltx_bibblock">
Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, brian ichter, Fei Xia, Ed Chi, Quoc V Le, and Denny Zhou. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper_files/paper/2022/file/9d5609613524ecf4f15af0f7b31abca4-Paper-Conference.pdf" title="">Chain-of-thought prompting elicits reasoning in large language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">Advances in Neural Information Processing Systems</em>, volume 35, pages 24824–24837. Curran Associates, Inc.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al. (2022)</span>
<span class="ltx_bibblock">
Yuhuai Wu, Albert Qiaochu Jiang, Wenda Li, Markus Norman Rabe, Charles E Staats, Mateja Jamnik, and Christian Szegedy. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=IUikebJ1Bf0" title="">Autoformalization with large language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib39.1.1">Advances in Neural Information Processing Systems</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xin et al. (2023)</span>
<span class="ltx_bibblock">
Huajian Xin, Haiming Wang, Chuanyang Zheng, Lin Li, Zhengying Liu, Qingxing Cao, Yinya Huang, Jing Xiong, Han Shi, Enze Xie, Jian Yin, Zhenguo Li, Xiaodan Liang, and Heng Liao. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://api.semanticscholar.org/CorpusID:263334074" title="">Lego-prover: Neural theorem proving with growing libraries</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib40.1.1">ArXiv</em>, abs/2310.00656.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang et al. (2023)</span>
<span class="ltx_bibblock">
Kaiyu Yang, Aidan Swope, Alex Gu, Rahul Chalamala, Peiyang Song, Shixing Yu, Saad Godil, Ryan Prenger, and Anima Anandkumar. 2023.

</span>
<span class="ltx_bibblock">LeanDojo: Theorem proving with retrieval-augmented language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib41.1.1">Neural Information Processing Systems (NeurIPS)</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2023)</span>
<span class="ltx_bibblock">
Kun Zhang, Xiexiong Lin, Yuanzhuo Wang, Xin Zhang, Fei Sun, Cen Jianhe, Hexiang Tan, Xuhui Jiang, and Huawei Shen. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.findings-emnlp.48" title="">ReFSQL: A retrieval-augmentation framework for text-to-SQL generation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib42.1.1">Findings of the Association for Computational Linguistics: EMNLP 2023</em>, pages 664–673, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zheng et al. (2022)</span>
<span class="ltx_bibblock">
Kunhao Zheng, Jesse Michael Han, and Stanislas Polu. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=9ZPegFuFTFv" title="">minif2f: a cross-system benchmark for formal olympiad-level mathematics</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib43.1.1">International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al. (2023)</span>
<span class="ltx_bibblock">
Shuyan Zhou, Uri Alon, Sumit Agarwal, and Graham Neubig. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.emnlp-main.859" title="">CodeBERTScore: Evaluating code generation with pretrained models of code</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib44.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 13921–13937, Singapore. Association for Computational Linguistics.

</span>
</li>
</ul>
</section>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Large Language Models</h2>
<div class="ltx_para" id="A1.p1">
<p class="ltx_p" id="A1.p1.1">We describe the large language models used in our experiments in this section.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.p2">
<p class="ltx_p" id="A1.p2.1"><span class="ltx_text ltx_font_bold" id="A1.p2.1.1">Mistral <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib11" title="">2023a</a>)</cite></span> Mistral is a large language model with 7 billion parameters which is fine-tuned on instruction datasets. It leverages several techniques such as Sliding Window Attention to boost model efficiency. To the best of our knowledge, it is also the strongest model in the domain of code and mathematics at this size.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.p3">
<p class="ltx_p" id="A1.p3.1"><span class="ltx_text ltx_font_bold" id="A1.p3.1.1">Llemma <cite class="ltx_cite ltx_citemacro_citep">(Azerbayev et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib2" title="">2024</a>)</cite></span> Llemma is an open large language model trained specifically for mathematics. It is pre-trained on Proof-Pile-2 which is a diverse mixture of math-related textual and code content. However, it has not been trained to follow instructions. Llemma has two scales in 7B and 34B. We only use the 7B model in our experiments.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.p4">
<p class="ltx_p" id="A1.p4.1"><span class="ltx_text ltx_font_bold" id="A1.p4.1.1">Mixtral <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib12" title="">2024a</a>)</cite></span> Mixtral is a large language model with sparse mixture of experts method and instruction fine-tuning. It has the same architecture as Mistral 7B but each layer of it consists of 8 feed-forward blocks, making it a 8<math alttext="\times" class="ltx_Math" display="inline" id="A1.p4.1.m1.1"><semantics id="A1.p4.1.m1.1a"><mo id="A1.p4.1.m1.1.1" xref="A1.p4.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.p4.1.m1.1b"><times id="A1.p4.1.m1.1.1.cmml" xref="A1.p4.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.p4.1.m1.1c">\times</annotation><annotation encoding="application/x-llamapun" id="A1.p4.1.m1.1d">×</annotation></semantics></math>7B size model. However, during inference, only 13B parameters are activated.</p>
</div>
<div class="ltx_para ltx_noindent" id="A1.p5">
<p class="ltx_p" id="A1.p5.1"><span class="ltx_text ltx_font_bold" id="A1.p5.1.1">GPT-3.5-Turbo</span> GPT-3.5-Turbo is a large language models of OpenAI GPT-3.5 series. It shares the same architecture as GPT-3 <cite class="ltx_cite ltx_citemacro_citep">(Brown et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib4" title="">2020</a>)</cite> and is instruction fine-tuned. The number of parameters in GPT-3.5-Turbo is 175 billion.</p>
</div>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Evaluation Metrics</h2>
<div class="ltx_para" id="A2.p1">
<p class="ltx_p" id="A2.p1.1">We describe the implementation of metrics to measure semantic similarity in this section.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p2">
<p class="ltx_p" id="A2.p2.1"><span class="ltx_text ltx_font_bold" id="A2.p2.1.1">BLEU <cite class="ltx_cite ltx_citemacro_citep">(Papineni et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib26" title="">2002</a>)</cite></span> The autoformalization task is a type of translation task so the most common metric in translation tasks, BLEU, is used as one evaluation metric for autoformalization. This metric is also used in <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib39" title="">2022</a>)</cite> within the same context. An implementation from NLTK <cite class="ltx_cite ltx_citemacro_citep">(Bird and Loper, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib3" title="">2004</a>)</cite> is used.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p3">
<p class="ltx_p" id="A2.p3.1"><span class="ltx_text ltx_font_bold" id="A2.p3.1.1">ChrF <cite class="ltx_cite ltx_citemacro_citep">(Popović, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib29" title="">2015</a>)</cite></span> ChrF is another n-gram metric in translation task that focuses on characters instead of words in BLEU. We leverage this character level metric in NLTK to take character-level granularity into account.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p4">
<p class="ltx_p" id="A2.p4.1"><span class="ltx_text ltx_font_bold" id="A2.p4.1.1">RUBY <cite class="ltx_cite ltx_citemacro_citep">(Tran et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib36" title="">2019</a>)</cite></span> The autoformalization task is also a code generation task. RUBY is a metric designed specifically for code generation evaluation and uses edit distance to calculate the similarity score. If program dependence graph (PDG) or abstract syntax tree (AST) is provided, it calculates graph similarity based on graph edit distance or tree similarity based on tree edit distance. Otherwise, it calculates string edit distance to determine the string similarity between the reference code and candidate code as the score. In our experiments, because of the difficulty of obtaining PDG or AST of formal statements, we use string edit distance from NLTK to calculate string similarity as the score. This implementation focuses on characters rather than tokens as in the original paper but it still makes the score a reasonable indicator of performance.</p>
</div>
<div class="ltx_para ltx_noindent" id="A2.p5">
<p class="ltx_p" id="A2.p5.1"><span class="ltx_text ltx_font_bold" id="A2.p5.1.1">CodeBERTScore <cite class="ltx_cite ltx_citemacro_citep">(Zhou et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib44" title="">2023</a>)</cite></span> CodeBERTScore is a model-based metric to evaluate performance on code generation. It uses token representations of reference code and candidate code to determine a final score. The original paper trained different models for different programming languages to get representations: however Isabelle is not within this scope. Therefore, we use a mathematical specific model, Llemma 7B <cite class="ltx_cite ltx_citemacro_citep">(Azerbayev et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#bib.bib2" title="">2024</a>)</cite>, as the supporting representation model. Although this model is not a BERT-based model, it can still generate meaningful representations for score calculation.</p>
</div>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Prompts</h2>
<div class="ltx_para" id="A3.p1">
<p class="ltx_p" id="A3.p1.1">We provide prompts for informalization, autoformalization, denoising, and Auto-SEF in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A3.T4" title="Table 4 ‣ Appendix C Prompts ‣ Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">4</span></a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A3.T5" title="Table 5 ‣ Appendix C Prompts ‣ Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">5</span></a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A3.T6" title="Table 6 ‣ Appendix C Prompts ‣ Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">6</span></a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A3.T7" title="Table 7 ‣ Appendix C Prompts ‣ Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">7</span></a>, respectively.</p>
</div>
<figure class="ltx_table" id="A3.T4">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="A3.T4.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A3.T4.1.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_tt" id="A3.T4.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T4.1.1.1.1.1">
<span class="ltx_p" id="A3.T4.1.1.1.1.1.1" style="width:195.1pt;">Translate the following Isabelle/ZF code: 
<br class="ltx_break"/>{statement}
<br class="ltx_break"/>into a natural language version statement as brief as possible:</span>
</span>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Prompt for informalization.</figcaption>
</figure>
<figure class="ltx_table" id="A3.T5">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="A3.T5.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A3.T5.1.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_tt" id="A3.T5.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T5.1.1.1.1.1">
<span class="ltx_p" id="A3.T5.1.1.1.1.1.1" style="width:195.1pt;">Natural language version: {Natural Language Text} 
<br class="ltx_break"/>Translate the natural language version to an Isabelle/ZF version without any additional text and do not give any proof: {Formal Statement}</span>
</span>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Prompt for autoformalization.</figcaption>
</figure>
<figure class="ltx_table" id="A3.T6">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A3.T6.1" style="width:428.7pt;height:289.9pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-37.8pt,25.6pt) scale(0.85,0.85) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A3.T6.1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A3.T6.1.1.1.1">
<td class="ltx_td ltx_align_top ltx_border_tt" id="A3.T6.1.1.1.1.1"></td>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A3.T6.1.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.1.1.2.1">
<span class="ltx_p" id="A3.T6.1.1.1.1.2.1.1" style="width:433.6pt;">Prompt</span>
</span>
</th>
</tr>
<tr class="ltx_tr" id="A3.T6.1.1.2.2">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A3.T6.1.1.2.2.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.2.2.1.1">
<span class="ltx_p" id="A3.T6.1.1.2.2.1.1.1" style="width:43.4pt;">PBD 1A</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A3.T6.1.1.2.2.2">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.2.2.2.1">
<span class="ltx_p" id="A3.T6.1.1.2.2.2.1.1" style="width:433.6pt;">You are an expert in Isabelle theorem prover. You will be provided with an Isabelle/ZF code generated by a language model. Your task is to clean the provided Isabelle/ZF code with following instructions. Instructions:

<br class="ltx_break"/>1. The provided code might contain several lemmas or definitions or theorems. The cleaned code must only keep the best one lemma or definition or theorem.

<br class="ltx_break"/>2. Do not write any proof and if there is a proof in the provided code, remove it from the cleaned code.

<br class="ltx_break"/>3. You should only output tokens that compose the cleaned code. Anything else, including but not limited to note, description, explanation and comment, must be removed from the final answer. Giving any additional text is prohibited.

<br class="ltx_break"/>Strictly follow the instructions that I have claimed.

<br class="ltx_break"/>Provided Isabelle/ZF Code: {isabelle code}

<br class="ltx_break"/>Cleaned Code:</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A3.T6.1.1.3.3">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A3.T6.1.1.3.3.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.3.3.1.1">
<span class="ltx_p" id="A3.T6.1.1.3.3.1.1.1" style="width:43.4pt;">PBD 1B</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A3.T6.1.1.3.3.2">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.3.3.2.1">
<span class="ltx_p" id="A3.T6.1.1.3.3.2.1.1" style="width:433.6pt;">1A + An additional instruction:

<br class="ltx_break"/>4. The cleaned code must have the same style and usage of operators as the original provided code. Operators usually start with “\” such as “\&lt;in&gt;”, “\&lt;cdot&gt;”.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A3.T6.1.1.4.4">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A3.T6.1.1.4.4.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.4.4.1.1">
<span class="ltx_p" id="A3.T6.1.1.4.4.1.1.1" style="width:43.4pt;">PBD 1C</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A3.T6.1.1.4.4.2">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.4.4.2.1">
<span class="ltx_p" id="A3.T6.1.1.4.4.2.1.1" style="width:433.6pt;">1A + An additional instruction:

<br class="ltx_break"/>4. The cleaned code must have the same style and usage of operators as the original provided code. Operators usually start with “\” such as “\&lt;in&gt;”, “\&lt;cdot&gt;”. Here are some additional Isabelle/ZF code examples which have the same style as the original provided code:

<br class="ltx_break"/>{fixed 3-shot formal statements}</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A3.T6.1.1.5.5">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A3.T6.1.1.5.5.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.5.5.1.1">
<span class="ltx_p" id="A3.T6.1.1.5.5.1.1.1" style="width:43.4pt;">PBD 1D</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A3.T6.1.1.5.5.2">
<span class="ltx_inline-block ltx_align_top" id="A3.T6.1.1.5.5.2.1">
<span class="ltx_p" id="A3.T6.1.1.5.5.2.1.1" style="width:433.6pt;">1A + An additional instruction:

<br class="ltx_break"/>4. The cleaned code must have the same style and usage of operators as the original provided code. Operators usually start with “\” such as “\&lt;in&gt;”, “\&lt;cdot&gt;”. Here are some additional Isabelle/ZF code examples which have the same style as the original provided code:

<br class="ltx_break"/>{retrieved 3-shot formal statements}</span>
</span>
</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>Prompts for informalization.</figcaption>
</figure>
<figure class="ltx_table" id="A3.T7">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A3.T7.1" style="width:433.2pt;height:222.2pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-29.5pt,15.2pt) scale(0.88,0.88) ;">
<table class="ltx_tabular ltx_align_middle" id="A3.T7.1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A3.T7.1.1.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_tt" id="A3.T7.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="A3.T7.1.1.1.1.1.1">
<span class="ltx_p" id="A3.T7.1.1.1.1.1.1.1" style="width:477.0pt;">You are an expert in Isabelle theorem prover. You will be provided with an Isabelle/ZF code generated by a language model. The provided code has some Isabelle/ZF syntax errors according to the Isabelle prover. You will also be provided with the error details and where the error code is located in the code. Your task is to fix related errors in the provided Isabelle/ZF code with following instructions. Instructions:
<br class="ltx_break"/>1. Only refine the code part which is related to provided error details. You must keep other code parts unchanged.
<br class="ltx_break"/>2. The syntax errors might cause by the mismatch of brackets, incorrect using of operators or invalid representation of Isabelle/ZF code. You should only refine the error codes based on the error details by rewriting, fixing or removing error codes.
<br class="ltx_break"/>3. You should only output tokens that compose the cleaned code. Anything else, including but not limited to note, description, explanation and comment, must be removed from the final answer. Giving any additional text is prohibited.
<br class="ltx_break"/>4. The cleaned code must have the same style and usage of operators as the original provided code. Operators usually start with “\” such as “\&lt;in&gt;”, “\&lt;cdot&gt;”. Here are some additional Isabelle/ZF code examples which have the same style as the original provided code:
<br class="ltx_break"/>{retrieved 3-shot formal statements}
<br class="ltx_break"/>Strictly follow the instructions that I have claimed.
<br class="ltx_break"/>Provided Isabelle/ZF Code:
<br class="ltx_break"/>{isabelle code}
<br class="ltx_break"/>{first syntax error details}
<br class="ltx_break"/>Refined Code:</span>
</span>
</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Auto-SEF prompt.</figcaption>
</figure>
</section>
<section class="ltx_appendix" id="A4">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix D </span>Detailed Results</h2>
<div class="ltx_para" id="A4.p1">
<p class="ltx_p" id="A4.p1.1">We provide the exact number of scores of denoising in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A4.T8" title="Table 8 ‣ Appendix D Detailed Results ‣ Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">8</span></a> and Auto-SEF in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04194v1#A4.T9" title="Table 9 ‣ Appendix D Detailed Results ‣ Limitations ‣ Acknowledgements ‣ 6 Conclusion ‣ LLMs Refinement ‣ 5 Related Work ‣ 4.4 A Critique of the Metrics ‣ 4.3 Iterative Symbolic Refinement ‣ Case Study ‣ 4.2 Output Denoising ‣ 4.1 Retrieval Augmented Autoformalization ‣ 4 Experiments and Analysis ‣ Consistent Autoformalization for Constructing Mathematical Libraries"><span class="ltx_text ltx_ref_tag">9</span></a>.</p>
</div>
<figure class="ltx_table" id="A4.T8">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A4.T8.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A4.T8.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="A4.T8.1.1.1.1">LLM</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_tt" id="A4.T8.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.1.1.2.1">
<span class="ltx_p" id="A4.T8.1.1.1.2.1.1" style="width:108.4pt;">Method</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.1.1.3">BLEU-2</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.1.1.4">ChrF</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.1.1.5">RUBY</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.1.1.6">CBS</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.1.1.7">Pass</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.2.2.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.2.2.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.2.2.2.1">
<span class="ltx_p" id="A4.T8.1.2.2.2.1.1" style="width:108.4pt;">Retrieval 3-shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.2.2.3">6.33</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.2.2.4">48.45</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.2.2.5">28.99</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.2.2.6">76.40</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.2.2.7">17.15</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.3.3.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.3.3.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.3.3.2.1">
<span class="ltx_p" id="A4.T8.1.3.3.2.1.1" style="width:108.4pt;">Retrieval 3-shot+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.3.3.3">10.05</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.3.3.4"><span class="ltx_text ltx_font_bold" id="A4.T8.1.3.3.4.1">51.38</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.3.3.5">44.82</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.3.3.6"><span class="ltx_text ltx_font_bold" id="A4.T8.1.3.3.6.1">76.93</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.3.3.7">21.53</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.4.4.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.4.4.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.4.4.2.1">
<span class="ltx_p" id="A4.T8.1.4.4.2.1.1" style="width:108.4pt;">PBD 1A</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.4.4.3">8.88</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.4.4.4">38.27</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.4.4.5">38.23</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.4.4.6">68.04</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.4.4.7">6.57</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.5.5.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.5.5.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.5.5.2.1">
<span class="ltx_p" id="A4.T8.1.5.5.2.1.1" style="width:108.4pt;">PBD 1A+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.5.5.3">10.49</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.5.5.4">37.92</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.5.5.5">40.35</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.5.5.6">68.01</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.5.5.7">6.57</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.6.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.6.6.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.6.6.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.6.6.2.1">
<span class="ltx_p" id="A4.T8.1.6.6.2.1.1" style="width:108.4pt;">PBD 1B</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.6.6.3">11.30</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.6.6.4">43.25</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.6.6.5">42.08</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.6.6.6">70.51</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.6.6.7">9.12</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.7.7.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.7.7.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.7.7.2.1">
<span class="ltx_p" id="A4.T8.1.7.7.2.1.1" style="width:108.4pt;">PBD 1B+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.7.7.3">13.29</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.7.7.4">43.19</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.7.7.5">43.99</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.7.7.6">70.44</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.7.7.7">9.12</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.8.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.8.8.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.8.8.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.8.8.2.1">
<span class="ltx_p" id="A4.T8.1.8.8.2.1.1" style="width:108.4pt;">PBD 1C</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.8.8.3">15.21</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.8.8.4">44.52</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.8.8.5">44.59</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.8.8.6">71.92</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.8.8.7">13.50</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.9.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.9.9.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.9.9.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.9.9.2.1">
<span class="ltx_p" id="A4.T8.1.9.9.2.1.1" style="width:108.4pt;">PBD 1C+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.9.9.3">16.70</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.9.9.4">44.29</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.9.9.5">45.38</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.9.9.6">71.93</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.9.9.7">13.87</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.10.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.10.10.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.10.10.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.10.10.2.1">
<span class="ltx_p" id="A4.T8.1.10.10.2.1.1" style="width:108.4pt;">PBD 1D</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.10.10.3">14.90</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.10.10.4">48.51</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.10.10.5">46.43</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.10.10.6">74.07</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.10.10.7">28.10</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.11.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.11.11.1">Mistral</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.11.11.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.11.11.2.1">
<span class="ltx_p" id="A4.T8.1.11.11.2.1.1" style="width:108.4pt;">PBD 1D+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.11.11.3"><span class="ltx_text ltx_font_bold" id="A4.T8.1.11.11.3.1">17.32</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.11.11.4">48.62</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.11.11.5"><span class="ltx_text ltx_font_bold" id="A4.T8.1.11.11.5.1">47.41</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.11.11.6">74.10</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.11.11.7">28.10</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.12.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="A4.T8.1.12.12.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_tt" id="A4.T8.1.12.12.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.12.12.2.1">
<span class="ltx_p" id="A4.T8.1.12.12.2.1.1" style="width:108.4pt;">Retrieval 3-shot</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.12.12.3">36.06</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.12.12.4"><span class="ltx_text ltx_font_bold" id="A4.T8.1.12.12.4.1">59.70</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.12.12.5"><span class="ltx_text ltx_font_bold" id="A4.T8.1.12.12.5.1">58.56</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.12.12.6"><span class="ltx_text ltx_font_bold" id="A4.T8.1.12.12.6.1">79.34</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T8.1.12.12.7"><span class="ltx_text ltx_font_bold" id="A4.T8.1.12.12.7.1">64.96</span></td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.13.13">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.13.13.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.13.13.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.13.13.2.1">
<span class="ltx_p" id="A4.T8.1.13.13.2.1.1" style="width:108.4pt;">Retrieval 3-shot+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.13.13.3">36.32</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.13.13.4">59.63</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.13.13.5">58.51</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.13.13.6">79.14</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.13.13.7">64.60</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.14.14">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.14.14.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.14.14.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.14.14.2.1">
<span class="ltx_p" id="A4.T8.1.14.14.2.1.1" style="width:108.4pt;">PBD 1A</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.14.14.3"><span class="ltx_text ltx_font_bold" id="A4.T8.1.14.14.3.1">38.60</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.14.14.4">57.90</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.14.14.5">58.16</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.14.14.6">78.79</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.14.14.7">63.87</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.15.15">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.15.15.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.15.15.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.15.15.2.1">
<span class="ltx_p" id="A4.T8.1.15.15.2.1.1" style="width:108.4pt;">PBD 1A+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.15.15.3">38.59</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.15.15.4">57.86</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.15.15.5">58.12</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.15.15.6">78.63</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.15.15.7">63.87</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.16.16">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.16.16.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.16.16.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.16.16.2.1">
<span class="ltx_p" id="A4.T8.1.16.16.2.1.1" style="width:108.4pt;">PBD 1B</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.16.16.3">36.49</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.16.16.4">57.08</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.16.16.5">57.79</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.16.16.6">78.27</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.16.16.7">62.04</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.17.17">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.17.17.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.17.17.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.17.17.2.1">
<span class="ltx_p" id="A4.T8.1.17.17.2.1.1" style="width:108.4pt;">PBD 1B+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.17.17.3">36.49</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.17.17.4">57.08</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.17.17.5">57.79</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.17.17.6">78.27</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.17.17.7">62.04</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.18.18">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.18.18.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.18.18.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.18.18.2.1">
<span class="ltx_p" id="A4.T8.1.18.18.2.1.1" style="width:108.4pt;">PBD 1C</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.18.18.3">37.10</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.18.18.4">57.28</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.18.18.5">57.83</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.18.18.6">78.62</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.18.18.7">63.50</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.19.19">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.19.19.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.19.19.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.19.19.2.1">
<span class="ltx_p" id="A4.T8.1.19.19.2.1.1" style="width:108.4pt;">PBD 1C+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.19.19.3">37.10</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.19.19.4">57.28</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.19.19.5">57.83</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.19.19.6">78.62</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.19.19.7">63.50</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.20.20">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.20.20.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T8.1.20.20.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.20.20.2.1">
<span class="ltx_p" id="A4.T8.1.20.20.2.1.1" style="width:108.4pt;">PBD 1D</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.20.20.3">38.50</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.20.20.4">58.09</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.20.20.5">58.17</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.20.20.6">78.99</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T8.1.20.20.7">64.60</td>
</tr>
<tr class="ltx_tr" id="A4.T8.1.21.21">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="A4.T8.1.21.21.1">GPT-3.5-Turbo</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="A4.T8.1.21.21.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T8.1.21.21.2.1">
<span class="ltx_p" id="A4.T8.1.21.21.2.1.1" style="width:108.4pt;">PBD 1D+CBD</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A4.T8.1.21.21.3">38.50</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A4.T8.1.21.21.4">58.09</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A4.T8.1.21.21.5">58.17</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A4.T8.1.21.21.6">78.99</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A4.T8.1.21.21.7">64.60</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>The effect of denoising.</figcaption>
</figure>
<figure class="ltx_table" id="A4.T9">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A4.T9.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A4.T9.1.1.1">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="A4.T9.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.1.1.1.1">
<span class="ltx_p" id="A4.T9.1.1.1.1.1.1" style="width:86.7pt;">LLM</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="A4.T9.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.1.1.2.1">
<span class="ltx_p" id="A4.T9.1.1.1.2.1.1" style="width:86.7pt;">Method</span>
</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A4.T9.1.1.1.3">BLEU-2</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A4.T9.1.1.1.4">ChrF</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A4.T9.1.1.1.5">RUBY</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A4.T9.1.1.1.6">CBS</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A4.T9.1.1.1.7">Pass</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A4.T9.1.2.1">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T9.1.2.1.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.2.1.1.1">
<span class="ltx_p" id="A4.T9.1.2.1.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_t" id="A4.T9.1.2.1.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.2.1.2.1">
<span class="ltx_p" id="A4.T9.1.2.1.2.1.1" style="width:86.7pt;">Iteration1</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T9.1.2.1.3">14.91</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T9.1.2.1.4">45.69</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T9.1.2.1.5">44.16</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T9.1.2.1.6">72.22</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A4.T9.1.2.1.7">30.66</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.3.2">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.3.2.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.3.2.1.1">
<span class="ltx_p" id="A4.T9.1.3.2.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.3.2.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.3.2.2.1">
<span class="ltx_p" id="A4.T9.1.3.2.2.1.1" style="width:86.7pt;">Iteration2</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.3.2.3">13.23</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.3.2.4">44.84</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.3.2.5">43.72</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.3.2.6">72.04</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.3.2.7">32.12</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.4.3">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.4.3.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.4.3.1.1">
<span class="ltx_p" id="A4.T9.1.4.3.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.4.3.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.4.3.2.1">
<span class="ltx_p" id="A4.T9.1.4.3.2.1.1" style="width:86.7pt;">Iteration3</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.4.3.3">12.69</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.4.3.4">44.10</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.4.3.5">42.19</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.4.3.6">71.63</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.4.3.7">32.48</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.5.4">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.5.4.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.5.4.1.1">
<span class="ltx_p" id="A4.T9.1.5.4.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.5.4.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.5.4.2.1">
<span class="ltx_p" id="A4.T9.1.5.4.2.1.1" style="width:86.7pt;">Iteration4</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.5.4.3">11.29</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.5.4.4">44.18</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.5.4.5">42.30</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.5.4.6">71.53</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.5.4.7">32.85</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.6.5">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.6.5.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.6.5.1.1">
<span class="ltx_p" id="A4.T9.1.6.5.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.6.5.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.6.5.2.1">
<span class="ltx_p" id="A4.T9.1.6.5.2.1.1" style="width:86.7pt;">Iteration5</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.6.5.3">11.91</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.6.5.4">43.57</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.6.5.5">41.72</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.6.5.6">71.06</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.6.5.7">33.58</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.7.6">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.7.6.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.7.6.1.1">
<span class="ltx_p" id="A4.T9.1.7.6.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.7.6.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.7.6.2.1">
<span class="ltx_p" id="A4.T9.1.7.6.2.1.1" style="width:86.7pt;">Iteration6</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.7.6.3">11.87</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.7.6.4">43.48</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.7.6.5">41.69</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.7.6.6">71.09</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.7.6.7">33.58</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.8.7">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.8.7.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.8.7.1.1">
<span class="ltx_p" id="A4.T9.1.8.7.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.8.7.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.8.7.2.1">
<span class="ltx_p" id="A4.T9.1.8.7.2.1.1" style="width:86.7pt;">Iteration7</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.8.7.3">11.72</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.8.7.4">43.64</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.8.7.5">41.26</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.8.7.6">70.91</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.8.7.7">33.58</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.9.8">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.9.8.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.9.8.1.1">
<span class="ltx_p" id="A4.T9.1.9.8.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.9.8.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.9.8.2.1">
<span class="ltx_p" id="A4.T9.1.9.8.2.1.1" style="width:86.7pt;">Iteration8</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.9.8.3">11.10</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.9.8.4">43.24</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.9.8.5">41.55</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.9.8.6">71.00</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.9.8.7">33.58</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.10.9">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.10.9.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.10.9.1.1">
<span class="ltx_p" id="A4.T9.1.10.9.1.1.1" style="width:86.7pt;">Mistral</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.10.9.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.10.9.2.1">
<span class="ltx_p" id="A4.T9.1.10.9.2.1.1" style="width:86.7pt;">Iteration9</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.10.9.3">11.17</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.10.9.4">43.09</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.10.9.5">40.85</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.10.9.6">70.80</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.10.9.7">33.58</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.11.10">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_tt" id="A4.T9.1.11.10.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.11.10.1.1">
<span class="ltx_p" id="A4.T9.1.11.10.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_tt" id="A4.T9.1.11.10.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.11.10.2.1">
<span class="ltx_p" id="A4.T9.1.11.10.2.1.1" style="width:86.7pt;">Iteration1</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T9.1.11.10.3">38.11</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T9.1.11.10.4">57.66</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T9.1.11.10.5">57.45</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T9.1.11.10.6">78.71</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A4.T9.1.11.10.7">68.98</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.12.11">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.12.11.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.12.11.1.1">
<span class="ltx_p" id="A4.T9.1.12.11.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.12.11.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.12.11.2.1">
<span class="ltx_p" id="A4.T9.1.12.11.2.1.1" style="width:86.7pt;">Iteration2</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.12.11.3">38.10</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.12.11.4">57.55</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.12.11.5">57.55</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.12.11.6">78.47</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.12.11.7">69.71</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.13.12">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.13.12.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.13.12.1.1">
<span class="ltx_p" id="A4.T9.1.13.12.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.13.12.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.13.12.2.1">
<span class="ltx_p" id="A4.T9.1.13.12.2.1.1" style="width:86.7pt;">Iteration3</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.13.12.3">38.09</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.13.12.4">57.55</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.13.12.5">57.57</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.13.12.6">78.48</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.13.12.7">70.07</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.14.13">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.14.13.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.14.13.1.1">
<span class="ltx_p" id="A4.T9.1.14.13.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.14.13.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.14.13.2.1">
<span class="ltx_p" id="A4.T9.1.14.13.2.1.1" style="width:86.7pt;">Iteration4</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.14.13.3">37.99</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.14.13.4">57.54</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.14.13.5">57.50</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.14.13.6">78.45</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.14.13.7">70.44</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.15.14">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.15.14.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.15.14.1.1">
<span class="ltx_p" id="A4.T9.1.15.14.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.15.14.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.15.14.2.1">
<span class="ltx_p" id="A4.T9.1.15.14.2.1.1" style="width:86.7pt;">Iteration5</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.15.14.3">38.08</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.15.14.4">57.58</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.15.14.5">57.62</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.15.14.6">78.51</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.15.14.7">70.44</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.16.15">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.16.15.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.16.15.1.1">
<span class="ltx_p" id="A4.T9.1.16.15.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.16.15.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.16.15.2.1">
<span class="ltx_p" id="A4.T9.1.16.15.2.1.1" style="width:86.7pt;">Iteration6</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.16.15.3">38.05</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.16.15.4">57.57</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.16.15.5">57.46</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.16.15.6">78.47</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.16.15.7">70.44</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.17.16">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.17.16.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.17.16.1.1">
<span class="ltx_p" id="A4.T9.1.17.16.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.17.16.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.17.16.2.1">
<span class="ltx_p" id="A4.T9.1.17.16.2.1.1" style="width:86.7pt;">Iteration7</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.17.16.3">38.00</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.17.16.4">57.53</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.17.16.5">57.39</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.17.16.6">78.49</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.17.16.7">70.44</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.18.17">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.18.17.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.18.17.1.1">
<span class="ltx_p" id="A4.T9.1.18.17.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row" id="A4.T9.1.18.17.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.18.17.2.1">
<span class="ltx_p" id="A4.T9.1.18.17.2.1.1" style="width:86.7pt;">Iteration8</span>
</span>
</th>
<td class="ltx_td ltx_align_center" id="A4.T9.1.18.17.3">37.99</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.18.17.4">57.57</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.18.17.5">57.37</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.18.17.6">78.50</td>
<td class="ltx_td ltx_align_center" id="A4.T9.1.18.17.7">70.80</td>
</tr>
<tr class="ltx_tr" id="A4.T9.1.19.18">
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_bb" id="A4.T9.1.19.18.1">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.19.18.1.1">
<span class="ltx_p" id="A4.T9.1.19.18.1.1.1" style="width:86.7pt;">GPT-3.5-Turbo</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_row ltx_border_bb" id="A4.T9.1.19.18.2">
<span class="ltx_inline-block ltx_align_top" id="A4.T9.1.19.18.2.1">
<span class="ltx_p" id="A4.T9.1.19.18.2.1.1" style="width:86.7pt;">Iteration9</span>
</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A4.T9.1.19.18.3">38.01</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A4.T9.1.19.18.4">57.55</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A4.T9.1.19.18.5">57.42</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A4.T9.1.19.18.6">78.48</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A4.T9.1.19.18.7">70.80</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 9: </span>Auto-SEF results with applied CBD.</figcaption>
</figure>
</section>
</section>
</section>
</section>
</section>
</section>
</section>
</section>
</section>
</section>
</div>
</div>
</figure>
</section>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Sat Oct  5 15:06:20 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
