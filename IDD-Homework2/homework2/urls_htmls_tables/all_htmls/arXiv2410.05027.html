<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting</title>
<!--Generated on Mon Oct  7 13:25:24 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2410.05027v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S1" title="In Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>INTRODUCTION</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S2" title="In Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>METHOD</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S2.SS1" title="In 2 METHOD ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Training DDPM with lesion mask guidance</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S2.SS2" title="In 2 METHOD ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Inference: Lesion filling and generation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3" title="In Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>EXPERIMENTS</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.SS1" title="In 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Setup</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.SS2" title="In 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Results</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S4" title="In Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>DISCUSSION AND CONCLUSION</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S5" title="In Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>PLANNED WORK</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<div class="ltx_para" id="p1">
<span class="ltx_ERROR undefined" id="p1.1">\authorinfo</span>
<p class="ltx_p" id="p1.2">* Co-first author with equal contribution. 
<br class="ltx_break"/>Further author information: Send correspondence to Jinwei Zhang. E-mail: <a class="ltx_ref ltx_url ltx_font_typewriter" href="jwzhang@jhu.edu" title="">jwzhang@jhu.edu</a></p>
</div>
<h1 class="ltx_title ltx_title_document">Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Jinwei Zhang<sup class="ltx_sup" id="id3.2.id1">∗</sup>
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Image Analysis and Communications Laboratory, Department of Electrical and Computer Engineering, Johns Hopkins University, Baltimore, MD 21218, United States
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Lianrui Zuo<sup class="ltx_sup" id="id4.2.id1">∗</sup>
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Department of Electrical and Computer Engineering, Vanderbilt University, Nashville, TN 37235, United States
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Yihao Liu
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Department of Electrical and Computer Engineering, Vanderbilt University, Nashville, TN 37235, United States
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Samuel Remedios
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Department of Computer Science, Johns Hopkins University, Baltimore, MD 21218, United States
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
<br class="ltx_break"/>Bennett A. Landman
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Department of Electrical and Computer Engineering, Vanderbilt University, Nashville, TN 37235, United States
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Jerry L. Prince
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Image Analysis and Communications Laboratory, Department of Electrical and Computer Engineering, Johns Hopkins University, Baltimore, MD 21218, United States
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Aaron Carass
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Image Analysis and Communications Laboratory, Department of Electrical and Computer Engineering, Johns Hopkins University, Baltimore, MD 21218, United States
</span></span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id5.id1">Automatic magnetic resonance (MR) image processing pipelines are widely used to study people with multiple sclerosis (PwMS), encompassing tasks such as lesion segmentation and brain parcellation.
However, the presence of lesion often complicates these analysis, particularly in brain parcellation.
Lesion filling is commonly used to mitigate this issue, but existing lesion filling algorithms often fall short in accurately reconstructing realistic lesion-free images, which are vital for consistent downstream analysis.
Additionally, the performance of lesion segmentation algorithms is often limited by insufficient data with lesion delineation as training labels.
In this paper, we propose a novel approach leveraging Denoising Diffusion Implicit Models (DDIMs) for both MS lesion filling and synthesis based on image inpainting.
Our modified DDIM architecture, once trained, enables both MS lesion filing and synthesis.
Specifically, it can generate lesion-free T1-weighted or FLAIR images from those containing lesions; Or it can add lesions to T1-weighted or FLAIR images of healthy subjects.
The former is essential for downstream analyses that require lesion-free images, while the latter is valuable for augmenting training datasets for lesion segmentation tasks.
We validate our approach through initial experiments in this paper and demonstrate promising results in both lesion filling and synthesis, paving the way for future work.
Our code is available at <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://gitlab.com/IACL/UponAcceptance" title="">https://gitlab.com/IACL/UponAcceptance</a>.</p>
</div>
<div class="ltx_classification">
<h6 class="ltx_title ltx_title_classification">keywords: </h6>Diffusion models, multiple sclerosis, lesion filling, lesion synthesis, image inpainting
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>INTRODUCTION</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Multiple sclerosis (MS) is a chronic central nervous system disease characterized by inflammation, demyelination, and axonal damage <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib1" title="">1</a>]</cite>.
Magnetic resonance (MR) imaging is a common imaging modality used to diagnose and monitor MS lesions.
Automatic MR image processing pipelines facilitate the study of people with multiple sclerosis (PwMS) at scale.
However, limitations exist at several steps within these pipelines related to MS lesions, such as insufficient training data with manual lesion mask delineation for developing reliable automatic lesion segmentation models, and difficulties in generating realistic lesion-free images during the lesion-filling step, which are crucial for accurate downstream brain parcellation.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Denoising diffusion probabilistic models (DDPMs) are state-of-the-art deep generative models that synthesize realistic data by converting random noise into structured output through many iterations of a reverse Markov process <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib2" title="">2</a>]</cite>.
In this work, we explore the feasibility of applying DDPMs to address MS lesion filling and synthesis in multi-contrast magnetic resonance (MR) images.
Specifically, we propose a bi-directional MS lesion filling and synthesis method using T1-weighted (T1w) and fluid attenuated inversion recovery (FLAIR) MR images, inspired by a natural image inpainting approach using a DDPM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib3" title="">3</a>]</cite>.
Our approach includes DDIM-based inference acceleration with a few modifications, taking into account the non-Markovian nature of DDIMs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib4" title="">4</a>]</cite>.
We validate the performance of the proposed lesion filling and synthesis in downstream whole-brain parcellation and lesion segmentation tasks.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>METHOD</h2>
<figure class="ltx_figure" id="S2.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="367" id="S2.F1.g1" src="x1.png" width="664"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>During inference, the DDPM is guided by the target lesion mask <math alttext="M^{\text{target}}" class="ltx_Math" display="inline" id="S2.F1.3.m1.1"><semantics id="S2.F1.3.m1.1b"><msup id="S2.F1.3.m1.1.1" xref="S2.F1.3.m1.1.1.cmml"><mi id="S2.F1.3.m1.1.1.2" xref="S2.F1.3.m1.1.1.2.cmml">M</mi><mtext id="S2.F1.3.m1.1.1.3" xref="S2.F1.3.m1.1.1.3a.cmml">target</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.F1.3.m1.1c"><apply id="S2.F1.3.m1.1.1.cmml" xref="S2.F1.3.m1.1.1"><csymbol cd="ambiguous" id="S2.F1.3.m1.1.1.1.cmml" xref="S2.F1.3.m1.1.1">superscript</csymbol><ci id="S2.F1.3.m1.1.1.2.cmml" xref="S2.F1.3.m1.1.1.2">𝑀</ci><ci id="S2.F1.3.m1.1.1.3a.cmml" xref="S2.F1.3.m1.1.1.3"><mtext id="S2.F1.3.m1.1.1.3.cmml" mathsize="70%" xref="S2.F1.3.m1.1.1.3">target</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F1.3.m1.1d">M^{\text{target}}</annotation><annotation encoding="application/x-llamapun" id="S2.F1.3.m1.1e">italic_M start_POSTSUPERSCRIPT target end_POSTSUPERSCRIPT</annotation></semantics></math> either generating lesion-free or synthetic lesion images. The mask <math alttext="M^{\text{repaint}}" class="ltx_Math" display="inline" id="S2.F1.4.m2.1"><semantics id="S2.F1.4.m2.1b"><msup id="S2.F1.4.m2.1.1" xref="S2.F1.4.m2.1.1.cmml"><mi id="S2.F1.4.m2.1.1.2" xref="S2.F1.4.m2.1.1.2.cmml">M</mi><mtext id="S2.F1.4.m2.1.1.3" xref="S2.F1.4.m2.1.1.3a.cmml">repaint</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.F1.4.m2.1c"><apply id="S2.F1.4.m2.1.1.cmml" xref="S2.F1.4.m2.1.1"><csymbol cd="ambiguous" id="S2.F1.4.m2.1.1.1.cmml" xref="S2.F1.4.m2.1.1">superscript</csymbol><ci id="S2.F1.4.m2.1.1.2.cmml" xref="S2.F1.4.m2.1.1.2">𝑀</ci><ci id="S2.F1.4.m2.1.1.3a.cmml" xref="S2.F1.4.m2.1.1.3"><mtext id="S2.F1.4.m2.1.1.3.cmml" mathsize="70%" xref="S2.F1.4.m2.1.1.3">repaint</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F1.4.m2.1d">M^{\text{repaint}}</annotation><annotation encoding="application/x-llamapun" id="S2.F1.4.m2.1e">italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT</annotation></semantics></math> controls the pixels to replace and preserve during the reverse process.</figcaption>
</figure>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">MS lesion filling and generation can both be formalized as image inpainting problems, where the objective is to modify pixel characteristics within a given region of interest.
The two primary tasks of the DDPM in this context are: 1) to discern when to perform lesion filling versus lesion generation, and 2) to replace lesion voxels with healthy-looking voxels for lesion filling or vice-versa for lesion generation.
</p>
</div>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Training DDPM with lesion mask guidance</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.13">During training, we use datasets comprising 2D MR image slices (axial, coronal, and sagittal) along with their lesion masks (either from manual annotation or automatic segmentation).
Given a 2D MR image <math alttext="{x_{0}}" class="ltx_Math" display="inline" id="S2.SS1.p1.1.m1.1"><semantics id="S2.SS1.p1.1.m1.1a"><msub id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml"><mi id="S2.SS1.p1.1.m1.1.1.2" xref="S2.SS1.p1.1.m1.1.1.2.cmml">x</mi><mn id="S2.SS1.p1.1.m1.1.1.3" xref="S2.SS1.p1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.1b"><apply id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.1.m1.1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS1.p1.1.m1.1.1.2.cmml" xref="S2.SS1.p1.1.m1.1.1.2">𝑥</ci><cn id="S2.SS1.p1.1.m1.1.1.3.cmml" type="integer" xref="S2.SS1.p1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.1c">{x_{0}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.1.m1.1d">italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> and its corresponding lesion mask <math alttext="{M^{\text{target}}}" class="ltx_Math" display="inline" id="S2.SS1.p1.2.m2.1"><semantics id="S2.SS1.p1.2.m2.1a"><msup id="S2.SS1.p1.2.m2.1.1" xref="S2.SS1.p1.2.m2.1.1.cmml"><mi id="S2.SS1.p1.2.m2.1.1.2" xref="S2.SS1.p1.2.m2.1.1.2.cmml">M</mi><mtext id="S2.SS1.p1.2.m2.1.1.3" xref="S2.SS1.p1.2.m2.1.1.3a.cmml">target</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.2.m2.1b"><apply id="S2.SS1.p1.2.m2.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.2.m2.1.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1">superscript</csymbol><ci id="S2.SS1.p1.2.m2.1.1.2.cmml" xref="S2.SS1.p1.2.m2.1.1.2">𝑀</ci><ci id="S2.SS1.p1.2.m2.1.1.3a.cmml" xref="S2.SS1.p1.2.m2.1.1.3"><mtext id="S2.SS1.p1.2.m2.1.1.3.cmml" mathsize="70%" xref="S2.SS1.p1.2.m2.1.1.3">target</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.2.m2.1c">{M^{\text{target}}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.2.m2.1d">italic_M start_POSTSUPERSCRIPT target end_POSTSUPERSCRIPT</annotation></semantics></math>, a forward diffusion process <math alttext="\{{x_{1:T}}\}" class="ltx_Math" display="inline" id="S2.SS1.p1.3.m3.1"><semantics id="S2.SS1.p1.3.m3.1a"><mrow id="S2.SS1.p1.3.m3.1.1.1" xref="S2.SS1.p1.3.m3.1.1.2.cmml"><mo id="S2.SS1.p1.3.m3.1.1.1.2" stretchy="false" xref="S2.SS1.p1.3.m3.1.1.2.cmml">{</mo><msub id="S2.SS1.p1.3.m3.1.1.1.1" xref="S2.SS1.p1.3.m3.1.1.1.1.cmml"><mi id="S2.SS1.p1.3.m3.1.1.1.1.2" xref="S2.SS1.p1.3.m3.1.1.1.1.2.cmml">x</mi><mrow id="S2.SS1.p1.3.m3.1.1.1.1.3" xref="S2.SS1.p1.3.m3.1.1.1.1.3.cmml"><mn id="S2.SS1.p1.3.m3.1.1.1.1.3.2" xref="S2.SS1.p1.3.m3.1.1.1.1.3.2.cmml">1</mn><mo id="S2.SS1.p1.3.m3.1.1.1.1.3.1" lspace="0.278em" rspace="0.278em" xref="S2.SS1.p1.3.m3.1.1.1.1.3.1.cmml">:</mo><mi id="S2.SS1.p1.3.m3.1.1.1.1.3.3" xref="S2.SS1.p1.3.m3.1.1.1.1.3.3.cmml">T</mi></mrow></msub><mo id="S2.SS1.p1.3.m3.1.1.1.3" stretchy="false" xref="S2.SS1.p1.3.m3.1.1.2.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.3.m3.1b"><set id="S2.SS1.p1.3.m3.1.1.2.cmml" xref="S2.SS1.p1.3.m3.1.1.1"><apply id="S2.SS1.p1.3.m3.1.1.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.3.m3.1.1.1.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1.1.1">subscript</csymbol><ci id="S2.SS1.p1.3.m3.1.1.1.1.2.cmml" xref="S2.SS1.p1.3.m3.1.1.1.1.2">𝑥</ci><apply id="S2.SS1.p1.3.m3.1.1.1.1.3.cmml" xref="S2.SS1.p1.3.m3.1.1.1.1.3"><ci id="S2.SS1.p1.3.m3.1.1.1.1.3.1.cmml" xref="S2.SS1.p1.3.m3.1.1.1.1.3.1">:</ci><cn id="S2.SS1.p1.3.m3.1.1.1.1.3.2.cmml" type="integer" xref="S2.SS1.p1.3.m3.1.1.1.1.3.2">1</cn><ci id="S2.SS1.p1.3.m3.1.1.1.1.3.3.cmml" xref="S2.SS1.p1.3.m3.1.1.1.1.3.3">𝑇</ci></apply></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.3.m3.1c">\{{x_{1:T}}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.3.m3.1d">{ italic_x start_POSTSUBSCRIPT 1 : italic_T end_POSTSUBSCRIPT }</annotation></semantics></math> is generated by gradually adding Gaussian noise to <math alttext="{x_{0}}" class="ltx_Math" display="inline" id="S2.SS1.p1.4.m4.1"><semantics id="S2.SS1.p1.4.m4.1a"><msub id="S2.SS1.p1.4.m4.1.1" xref="S2.SS1.p1.4.m4.1.1.cmml"><mi id="S2.SS1.p1.4.m4.1.1.2" xref="S2.SS1.p1.4.m4.1.1.2.cmml">x</mi><mn id="S2.SS1.p1.4.m4.1.1.3" xref="S2.SS1.p1.4.m4.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.4.m4.1b"><apply id="S2.SS1.p1.4.m4.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.4.m4.1.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1">subscript</csymbol><ci id="S2.SS1.p1.4.m4.1.1.2.cmml" xref="S2.SS1.p1.4.m4.1.1.2">𝑥</ci><cn id="S2.SS1.p1.4.m4.1.1.3.cmml" type="integer" xref="S2.SS1.p1.4.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.4.m4.1c">{x_{0}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.4.m4.1d">italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> with a pre-defined mean and variance schedule <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib2" title="">2</a>]</cite>.
During reverse diffusion, we use a U-Net-based denoiser to predict the noise between two adjacent time steps <math alttext="t" class="ltx_Math" display="inline" id="S2.SS1.p1.5.m5.1"><semantics id="S2.SS1.p1.5.m5.1a"><mi id="S2.SS1.p1.5.m5.1.1" xref="S2.SS1.p1.5.m5.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.5.m5.1b"><ci id="S2.SS1.p1.5.m5.1.1.cmml" xref="S2.SS1.p1.5.m5.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.5.m5.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.5.m5.1d">italic_t</annotation></semantics></math> and <math alttext="t-1" class="ltx_Math" display="inline" id="S2.SS1.p1.6.m6.1"><semantics id="S2.SS1.p1.6.m6.1a"><mrow id="S2.SS1.p1.6.m6.1.1" xref="S2.SS1.p1.6.m6.1.1.cmml"><mi id="S2.SS1.p1.6.m6.1.1.2" xref="S2.SS1.p1.6.m6.1.1.2.cmml">t</mi><mo id="S2.SS1.p1.6.m6.1.1.1" xref="S2.SS1.p1.6.m6.1.1.1.cmml">−</mo><mn id="S2.SS1.p1.6.m6.1.1.3" xref="S2.SS1.p1.6.m6.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.6.m6.1b"><apply id="S2.SS1.p1.6.m6.1.1.cmml" xref="S2.SS1.p1.6.m6.1.1"><minus id="S2.SS1.p1.6.m6.1.1.1.cmml" xref="S2.SS1.p1.6.m6.1.1.1"></minus><ci id="S2.SS1.p1.6.m6.1.1.2.cmml" xref="S2.SS1.p1.6.m6.1.1.2">𝑡</ci><cn id="S2.SS1.p1.6.m6.1.1.3.cmml" type="integer" xref="S2.SS1.p1.6.m6.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.6.m6.1c">t-1</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.6.m6.1d">italic_t - 1</annotation></semantics></math>.
The DDPM takes both <math alttext="{x_{t}}" class="ltx_Math" display="inline" id="S2.SS1.p1.7.m7.1"><semantics id="S2.SS1.p1.7.m7.1a"><msub id="S2.SS1.p1.7.m7.1.1" xref="S2.SS1.p1.7.m7.1.1.cmml"><mi id="S2.SS1.p1.7.m7.1.1.2" xref="S2.SS1.p1.7.m7.1.1.2.cmml">x</mi><mi id="S2.SS1.p1.7.m7.1.1.3" xref="S2.SS1.p1.7.m7.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.7.m7.1b"><apply id="S2.SS1.p1.7.m7.1.1.cmml" xref="S2.SS1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.7.m7.1.1.1.cmml" xref="S2.SS1.p1.7.m7.1.1">subscript</csymbol><ci id="S2.SS1.p1.7.m7.1.1.2.cmml" xref="S2.SS1.p1.7.m7.1.1.2">𝑥</ci><ci id="S2.SS1.p1.7.m7.1.1.3.cmml" xref="S2.SS1.p1.7.m7.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.7.m7.1c">{x_{t}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.7.m7.1d">italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="{M^{\text{target}}}" class="ltx_Math" display="inline" id="S2.SS1.p1.8.m8.1"><semantics id="S2.SS1.p1.8.m8.1a"><msup id="S2.SS1.p1.8.m8.1.1" xref="S2.SS1.p1.8.m8.1.1.cmml"><mi id="S2.SS1.p1.8.m8.1.1.2" xref="S2.SS1.p1.8.m8.1.1.2.cmml">M</mi><mtext id="S2.SS1.p1.8.m8.1.1.3" xref="S2.SS1.p1.8.m8.1.1.3a.cmml">target</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.8.m8.1b"><apply id="S2.SS1.p1.8.m8.1.1.cmml" xref="S2.SS1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.8.m8.1.1.1.cmml" xref="S2.SS1.p1.8.m8.1.1">superscript</csymbol><ci id="S2.SS1.p1.8.m8.1.1.2.cmml" xref="S2.SS1.p1.8.m8.1.1.2">𝑀</ci><ci id="S2.SS1.p1.8.m8.1.1.3a.cmml" xref="S2.SS1.p1.8.m8.1.1.3"><mtext id="S2.SS1.p1.8.m8.1.1.3.cmml" mathsize="70%" xref="S2.SS1.p1.8.m8.1.1.3">target</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.8.m8.1c">{M^{\text{target}}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.8.m8.1d">italic_M start_POSTSUPERSCRIPT target end_POSTSUPERSCRIPT</annotation></semantics></math> as input, and predicts <math alttext="{\hat{x}_{t-1}}" class="ltx_Math" display="inline" id="S2.SS1.p1.9.m9.1"><semantics id="S2.SS1.p1.9.m9.1a"><msub id="S2.SS1.p1.9.m9.1.1" xref="S2.SS1.p1.9.m9.1.1.cmml"><mover accent="true" id="S2.SS1.p1.9.m9.1.1.2" xref="S2.SS1.p1.9.m9.1.1.2.cmml"><mi id="S2.SS1.p1.9.m9.1.1.2.2" xref="S2.SS1.p1.9.m9.1.1.2.2.cmml">x</mi><mo id="S2.SS1.p1.9.m9.1.1.2.1" xref="S2.SS1.p1.9.m9.1.1.2.1.cmml">^</mo></mover><mrow id="S2.SS1.p1.9.m9.1.1.3" xref="S2.SS1.p1.9.m9.1.1.3.cmml"><mi id="S2.SS1.p1.9.m9.1.1.3.2" xref="S2.SS1.p1.9.m9.1.1.3.2.cmml">t</mi><mo id="S2.SS1.p1.9.m9.1.1.3.1" xref="S2.SS1.p1.9.m9.1.1.3.1.cmml">−</mo><mn id="S2.SS1.p1.9.m9.1.1.3.3" xref="S2.SS1.p1.9.m9.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.9.m9.1b"><apply id="S2.SS1.p1.9.m9.1.1.cmml" xref="S2.SS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.9.m9.1.1.1.cmml" xref="S2.SS1.p1.9.m9.1.1">subscript</csymbol><apply id="S2.SS1.p1.9.m9.1.1.2.cmml" xref="S2.SS1.p1.9.m9.1.1.2"><ci id="S2.SS1.p1.9.m9.1.1.2.1.cmml" xref="S2.SS1.p1.9.m9.1.1.2.1">^</ci><ci id="S2.SS1.p1.9.m9.1.1.2.2.cmml" xref="S2.SS1.p1.9.m9.1.1.2.2">𝑥</ci></apply><apply id="S2.SS1.p1.9.m9.1.1.3.cmml" xref="S2.SS1.p1.9.m9.1.1.3"><minus id="S2.SS1.p1.9.m9.1.1.3.1.cmml" xref="S2.SS1.p1.9.m9.1.1.3.1"></minus><ci id="S2.SS1.p1.9.m9.1.1.3.2.cmml" xref="S2.SS1.p1.9.m9.1.1.3.2">𝑡</ci><cn id="S2.SS1.p1.9.m9.1.1.3.3.cmml" type="integer" xref="S2.SS1.p1.9.m9.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.9.m9.1c">{\hat{x}_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.9.m9.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math>, which is a slightly denoised version of <math alttext="{x}_{t}" class="ltx_Math" display="inline" id="S2.SS1.p1.10.m10.1"><semantics id="S2.SS1.p1.10.m10.1a"><msub id="S2.SS1.p1.10.m10.1.1" xref="S2.SS1.p1.10.m10.1.1.cmml"><mi id="S2.SS1.p1.10.m10.1.1.2" xref="S2.SS1.p1.10.m10.1.1.2.cmml">x</mi><mi id="S2.SS1.p1.10.m10.1.1.3" xref="S2.SS1.p1.10.m10.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.10.m10.1b"><apply id="S2.SS1.p1.10.m10.1.1.cmml" xref="S2.SS1.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.10.m10.1.1.1.cmml" xref="S2.SS1.p1.10.m10.1.1">subscript</csymbol><ci id="S2.SS1.p1.10.m10.1.1.2.cmml" xref="S2.SS1.p1.10.m10.1.1.2">𝑥</ci><ci id="S2.SS1.p1.10.m10.1.1.3.cmml" xref="S2.SS1.p1.10.m10.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.10.m10.1c">{x}_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.10.m10.1d">italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>.
The conditioning mask <math alttext="{M^{\text{target}}}" class="ltx_Math" display="inline" id="S2.SS1.p1.11.m11.1"><semantics id="S2.SS1.p1.11.m11.1a"><msup id="S2.SS1.p1.11.m11.1.1" xref="S2.SS1.p1.11.m11.1.1.cmml"><mi id="S2.SS1.p1.11.m11.1.1.2" xref="S2.SS1.p1.11.m11.1.1.2.cmml">M</mi><mtext id="S2.SS1.p1.11.m11.1.1.3" xref="S2.SS1.p1.11.m11.1.1.3a.cmml">target</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.11.m11.1b"><apply id="S2.SS1.p1.11.m11.1.1.cmml" xref="S2.SS1.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.11.m11.1.1.1.cmml" xref="S2.SS1.p1.11.m11.1.1">superscript</csymbol><ci id="S2.SS1.p1.11.m11.1.1.2.cmml" xref="S2.SS1.p1.11.m11.1.1.2">𝑀</ci><ci id="S2.SS1.p1.11.m11.1.1.3a.cmml" xref="S2.SS1.p1.11.m11.1.1.3"><mtext id="S2.SS1.p1.11.m11.1.1.3.cmml" mathsize="70%" xref="S2.SS1.p1.11.m11.1.1.3">target</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.11.m11.1c">{M^{\text{target}}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.11.m11.1d">italic_M start_POSTSUPERSCRIPT target end_POSTSUPERSCRIPT</annotation></semantics></math> represents the desired lesion mask of the synthetic image, and it is used to guide the DDPM for either lesion filling (<math alttext="{M^{\text{target}}}=0" class="ltx_Math" display="inline" id="S2.SS1.p1.12.m12.1"><semantics id="S2.SS1.p1.12.m12.1a"><mrow id="S2.SS1.p1.12.m12.1.1" xref="S2.SS1.p1.12.m12.1.1.cmml"><msup id="S2.SS1.p1.12.m12.1.1.2" xref="S2.SS1.p1.12.m12.1.1.2.cmml"><mi id="S2.SS1.p1.12.m12.1.1.2.2" xref="S2.SS1.p1.12.m12.1.1.2.2.cmml">M</mi><mtext id="S2.SS1.p1.12.m12.1.1.2.3" xref="S2.SS1.p1.12.m12.1.1.2.3a.cmml">target</mtext></msup><mo id="S2.SS1.p1.12.m12.1.1.1" xref="S2.SS1.p1.12.m12.1.1.1.cmml">=</mo><mn id="S2.SS1.p1.12.m12.1.1.3" xref="S2.SS1.p1.12.m12.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.12.m12.1b"><apply id="S2.SS1.p1.12.m12.1.1.cmml" xref="S2.SS1.p1.12.m12.1.1"><eq id="S2.SS1.p1.12.m12.1.1.1.cmml" xref="S2.SS1.p1.12.m12.1.1.1"></eq><apply id="S2.SS1.p1.12.m12.1.1.2.cmml" xref="S2.SS1.p1.12.m12.1.1.2"><csymbol cd="ambiguous" id="S2.SS1.p1.12.m12.1.1.2.1.cmml" xref="S2.SS1.p1.12.m12.1.1.2">superscript</csymbol><ci id="S2.SS1.p1.12.m12.1.1.2.2.cmml" xref="S2.SS1.p1.12.m12.1.1.2.2">𝑀</ci><ci id="S2.SS1.p1.12.m12.1.1.2.3a.cmml" xref="S2.SS1.p1.12.m12.1.1.2.3"><mtext id="S2.SS1.p1.12.m12.1.1.2.3.cmml" mathsize="70%" xref="S2.SS1.p1.12.m12.1.1.2.3">target</mtext></ci></apply><cn id="S2.SS1.p1.12.m12.1.1.3.cmml" type="integer" xref="S2.SS1.p1.12.m12.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.12.m12.1c">{M^{\text{target}}}=0</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.12.m12.1d">italic_M start_POSTSUPERSCRIPT target end_POSTSUPERSCRIPT = 0</annotation></semantics></math>) or lesion generation.
Once trained, the DDPM can generate lesion-free images by providing an all-zero <math alttext="M^{\text{target}}" class="ltx_Math" display="inline" id="S2.SS1.p1.13.m13.1"><semantics id="S2.SS1.p1.13.m13.1a"><msup id="S2.SS1.p1.13.m13.1.1" xref="S2.SS1.p1.13.m13.1.1.cmml"><mi id="S2.SS1.p1.13.m13.1.1.2" xref="S2.SS1.p1.13.m13.1.1.2.cmml">M</mi><mtext id="S2.SS1.p1.13.m13.1.1.3" xref="S2.SS1.p1.13.m13.1.1.3a.cmml">target</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.13.m13.1b"><apply id="S2.SS1.p1.13.m13.1.1.cmml" xref="S2.SS1.p1.13.m13.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.13.m13.1.1.1.cmml" xref="S2.SS1.p1.13.m13.1.1">superscript</csymbol><ci id="S2.SS1.p1.13.m13.1.1.2.cmml" xref="S2.SS1.p1.13.m13.1.1.2">𝑀</ci><ci id="S2.SS1.p1.13.m13.1.1.3a.cmml" xref="S2.SS1.p1.13.m13.1.1.3"><mtext id="S2.SS1.p1.13.m13.1.1.3.cmml" mathsize="70%" xref="S2.SS1.p1.13.m13.1.1.3">target</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.13.m13.1c">M^{\text{target}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.13.m13.1d">italic_M start_POSTSUPERSCRIPT target end_POSTSUPERSCRIPT</annotation></semantics></math>.
It can also generate synthetic lesion images by providing the desired lesion mask.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Inference: Lesion filling and generation</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.6">To preserve the pixels outside the region of interest, we introduce another mask <math alttext="M^{\text{repaint}}" class="ltx_Math" display="inline" id="S2.SS2.p1.1.m1.1"><semantics id="S2.SS2.p1.1.m1.1a"><msup id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml"><mi id="S2.SS2.p1.1.m1.1.1.2" xref="S2.SS2.p1.1.m1.1.1.2.cmml">M</mi><mtext id="S2.SS2.p1.1.m1.1.1.3" xref="S2.SS2.p1.1.m1.1.1.3a.cmml">repaint</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b"><apply id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.1.m1.1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">superscript</csymbol><ci id="S2.SS2.p1.1.m1.1.1.2.cmml" xref="S2.SS2.p1.1.m1.1.1.2">𝑀</ci><ci id="S2.SS2.p1.1.m1.1.1.3a.cmml" xref="S2.SS2.p1.1.m1.1.1.3"><mtext id="S2.SS2.p1.1.m1.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p1.1.m1.1.1.3">repaint</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">M^{\text{repaint}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.1.m1.1d">italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT</annotation></semantics></math>.
Only pixels within this mask will be updated for lesion filling or generation at inference time.
Inspired by the RePaint method <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib3" title="">3</a>]</cite>, we introduce an additional step after the regular DDPM reverse diffusion step.
Once we have the predicted denoised image <math alttext="{\hat{x}_{t-1}}" class="ltx_Math" display="inline" id="S2.SS2.p1.2.m2.1"><semantics id="S2.SS2.p1.2.m2.1a"><msub id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml"><mover accent="true" id="S2.SS2.p1.2.m2.1.1.2" xref="S2.SS2.p1.2.m2.1.1.2.cmml"><mi id="S2.SS2.p1.2.m2.1.1.2.2" xref="S2.SS2.p1.2.m2.1.1.2.2.cmml">x</mi><mo id="S2.SS2.p1.2.m2.1.1.2.1" xref="S2.SS2.p1.2.m2.1.1.2.1.cmml">^</mo></mover><mrow id="S2.SS2.p1.2.m2.1.1.3" xref="S2.SS2.p1.2.m2.1.1.3.cmml"><mi id="S2.SS2.p1.2.m2.1.1.3.2" xref="S2.SS2.p1.2.m2.1.1.3.2.cmml">t</mi><mo id="S2.SS2.p1.2.m2.1.1.3.1" xref="S2.SS2.p1.2.m2.1.1.3.1.cmml">−</mo><mn id="S2.SS2.p1.2.m2.1.1.3.3" xref="S2.SS2.p1.2.m2.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.1b"><apply id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">subscript</csymbol><apply id="S2.SS2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.p1.2.m2.1.1.2"><ci id="S2.SS2.p1.2.m2.1.1.2.1.cmml" xref="S2.SS2.p1.2.m2.1.1.2.1">^</ci><ci id="S2.SS2.p1.2.m2.1.1.2.2.cmml" xref="S2.SS2.p1.2.m2.1.1.2.2">𝑥</ci></apply><apply id="S2.SS2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.p1.2.m2.1.1.3"><minus id="S2.SS2.p1.2.m2.1.1.3.1.cmml" xref="S2.SS2.p1.2.m2.1.1.3.1"></minus><ci id="S2.SS2.p1.2.m2.1.1.3.2.cmml" xref="S2.SS2.p1.2.m2.1.1.3.2">𝑡</ci><cn id="S2.SS2.p1.2.m2.1.1.3.3.cmml" type="integer" xref="S2.SS2.p1.2.m2.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.1c">{\hat{x}_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.2.m2.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math> from time <math alttext="t" class="ltx_Math" display="inline" id="S2.SS2.p1.3.m3.1"><semantics id="S2.SS2.p1.3.m3.1a"><mi id="S2.SS2.p1.3.m3.1.1" xref="S2.SS2.p1.3.m3.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.3.m3.1b"><ci id="S2.SS2.p1.3.m3.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.3.m3.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.3.m3.1d">italic_t</annotation></semantics></math>, it is then updated by mixing <math alttext="{\hat{x}_{t-1}}" class="ltx_Math" display="inline" id="S2.SS2.p1.4.m4.1"><semantics id="S2.SS2.p1.4.m4.1a"><msub id="S2.SS2.p1.4.m4.1.1" xref="S2.SS2.p1.4.m4.1.1.cmml"><mover accent="true" id="S2.SS2.p1.4.m4.1.1.2" xref="S2.SS2.p1.4.m4.1.1.2.cmml"><mi id="S2.SS2.p1.4.m4.1.1.2.2" xref="S2.SS2.p1.4.m4.1.1.2.2.cmml">x</mi><mo id="S2.SS2.p1.4.m4.1.1.2.1" xref="S2.SS2.p1.4.m4.1.1.2.1.cmml">^</mo></mover><mrow id="S2.SS2.p1.4.m4.1.1.3" xref="S2.SS2.p1.4.m4.1.1.3.cmml"><mi id="S2.SS2.p1.4.m4.1.1.3.2" xref="S2.SS2.p1.4.m4.1.1.3.2.cmml">t</mi><mo id="S2.SS2.p1.4.m4.1.1.3.1" xref="S2.SS2.p1.4.m4.1.1.3.1.cmml">−</mo><mn id="S2.SS2.p1.4.m4.1.1.3.3" xref="S2.SS2.p1.4.m4.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.4.m4.1b"><apply id="S2.SS2.p1.4.m4.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.4.m4.1.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1">subscript</csymbol><apply id="S2.SS2.p1.4.m4.1.1.2.cmml" xref="S2.SS2.p1.4.m4.1.1.2"><ci id="S2.SS2.p1.4.m4.1.1.2.1.cmml" xref="S2.SS2.p1.4.m4.1.1.2.1">^</ci><ci id="S2.SS2.p1.4.m4.1.1.2.2.cmml" xref="S2.SS2.p1.4.m4.1.1.2.2">𝑥</ci></apply><apply id="S2.SS2.p1.4.m4.1.1.3.cmml" xref="S2.SS2.p1.4.m4.1.1.3"><minus id="S2.SS2.p1.4.m4.1.1.3.1.cmml" xref="S2.SS2.p1.4.m4.1.1.3.1"></minus><ci id="S2.SS2.p1.4.m4.1.1.3.2.cmml" xref="S2.SS2.p1.4.m4.1.1.3.2">𝑡</ci><cn id="S2.SS2.p1.4.m4.1.1.3.3.cmml" type="integer" xref="S2.SS2.p1.4.m4.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.4.m4.1c">{\hat{x}_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.4.m4.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math> with the true noisy image <math alttext="x_{t-1}" class="ltx_Math" display="inline" id="S2.SS2.p1.5.m5.1"><semantics id="S2.SS2.p1.5.m5.1a"><msub id="S2.SS2.p1.5.m5.1.1" xref="S2.SS2.p1.5.m5.1.1.cmml"><mi id="S2.SS2.p1.5.m5.1.1.2" xref="S2.SS2.p1.5.m5.1.1.2.cmml">x</mi><mrow id="S2.SS2.p1.5.m5.1.1.3" xref="S2.SS2.p1.5.m5.1.1.3.cmml"><mi id="S2.SS2.p1.5.m5.1.1.3.2" xref="S2.SS2.p1.5.m5.1.1.3.2.cmml">t</mi><mo id="S2.SS2.p1.5.m5.1.1.3.1" xref="S2.SS2.p1.5.m5.1.1.3.1.cmml">−</mo><mn id="S2.SS2.p1.5.m5.1.1.3.3" xref="S2.SS2.p1.5.m5.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.5.m5.1b"><apply id="S2.SS2.p1.5.m5.1.1.cmml" xref="S2.SS2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.5.m5.1.1.1.cmml" xref="S2.SS2.p1.5.m5.1.1">subscript</csymbol><ci id="S2.SS2.p1.5.m5.1.1.2.cmml" xref="S2.SS2.p1.5.m5.1.1.2">𝑥</ci><apply id="S2.SS2.p1.5.m5.1.1.3.cmml" xref="S2.SS2.p1.5.m5.1.1.3"><minus id="S2.SS2.p1.5.m5.1.1.3.1.cmml" xref="S2.SS2.p1.5.m5.1.1.3.1"></minus><ci id="S2.SS2.p1.5.m5.1.1.3.2.cmml" xref="S2.SS2.p1.5.m5.1.1.3.2">𝑡</ci><cn id="S2.SS2.p1.5.m5.1.1.3.3.cmml" type="integer" xref="S2.SS2.p1.5.m5.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.5.m5.1c">x_{t-1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.5.m5.1d">italic_x start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math> calculated from the forward diffusion process.
The updated image, <math alttext="\hat{x}_{t-1}^{\prime}" class="ltx_Math" display="inline" id="S2.SS2.p1.6.m6.1"><semantics id="S2.SS2.p1.6.m6.1a"><msubsup id="S2.SS2.p1.6.m6.1.1" xref="S2.SS2.p1.6.m6.1.1.cmml"><mover accent="true" id="S2.SS2.p1.6.m6.1.1.2.2" xref="S2.SS2.p1.6.m6.1.1.2.2.cmml"><mi id="S2.SS2.p1.6.m6.1.1.2.2.2" xref="S2.SS2.p1.6.m6.1.1.2.2.2.cmml">x</mi><mo id="S2.SS2.p1.6.m6.1.1.2.2.1" xref="S2.SS2.p1.6.m6.1.1.2.2.1.cmml">^</mo></mover><mrow id="S2.SS2.p1.6.m6.1.1.2.3" xref="S2.SS2.p1.6.m6.1.1.2.3.cmml"><mi id="S2.SS2.p1.6.m6.1.1.2.3.2" xref="S2.SS2.p1.6.m6.1.1.2.3.2.cmml">t</mi><mo id="S2.SS2.p1.6.m6.1.1.2.3.1" xref="S2.SS2.p1.6.m6.1.1.2.3.1.cmml">−</mo><mn id="S2.SS2.p1.6.m6.1.1.2.3.3" xref="S2.SS2.p1.6.m6.1.1.2.3.3.cmml">1</mn></mrow><mo id="S2.SS2.p1.6.m6.1.1.3" xref="S2.SS2.p1.6.m6.1.1.3.cmml">′</mo></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.6.m6.1b"><apply id="S2.SS2.p1.6.m6.1.1.cmml" xref="S2.SS2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.6.m6.1.1.1.cmml" xref="S2.SS2.p1.6.m6.1.1">superscript</csymbol><apply id="S2.SS2.p1.6.m6.1.1.2.cmml" xref="S2.SS2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.6.m6.1.1.2.1.cmml" xref="S2.SS2.p1.6.m6.1.1">subscript</csymbol><apply id="S2.SS2.p1.6.m6.1.1.2.2.cmml" xref="S2.SS2.p1.6.m6.1.1.2.2"><ci id="S2.SS2.p1.6.m6.1.1.2.2.1.cmml" xref="S2.SS2.p1.6.m6.1.1.2.2.1">^</ci><ci id="S2.SS2.p1.6.m6.1.1.2.2.2.cmml" xref="S2.SS2.p1.6.m6.1.1.2.2.2">𝑥</ci></apply><apply id="S2.SS2.p1.6.m6.1.1.2.3.cmml" xref="S2.SS2.p1.6.m6.1.1.2.3"><minus id="S2.SS2.p1.6.m6.1.1.2.3.1.cmml" xref="S2.SS2.p1.6.m6.1.1.2.3.1"></minus><ci id="S2.SS2.p1.6.m6.1.1.2.3.2.cmml" xref="S2.SS2.p1.6.m6.1.1.2.3.2">𝑡</ci><cn id="S2.SS2.p1.6.m6.1.1.2.3.3.cmml" type="integer" xref="S2.SS2.p1.6.m6.1.1.2.3.3">1</cn></apply></apply><ci id="S2.SS2.p1.6.m6.1.1.3.cmml" xref="S2.SS2.p1.6.m6.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.6.m6.1c">\hat{x}_{t-1}^{\prime}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.6.m6.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math>, is defined as</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="Sx1.EGx1">
<tbody id="S2.E1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle{\hat{x}_{t-1}}^{\prime}={\hat{x}_{t-1}}\cdot{M^{\text{repaint}}}%
+{x_{t-1}}\cdot({1}-{M^{\text{repaint}}})." class="ltx_Math" display="inline" id="S2.E1.m1.1"><semantics id="S2.E1.m1.1a"><mrow id="S2.E1.m1.1.1.1" xref="S2.E1.m1.1.1.1.1.cmml"><mrow id="S2.E1.m1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.cmml"><mmultiscripts id="S2.E1.m1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.3.cmml"><mover accent="true" id="S2.E1.m1.1.1.1.1.3.2.2" xref="S2.E1.m1.1.1.1.1.3.2.2.cmml"><mi id="S2.E1.m1.1.1.1.1.3.2.2.2" xref="S2.E1.m1.1.1.1.1.3.2.2.2.cmml">x</mi><mo id="S2.E1.m1.1.1.1.1.3.2.2.1" xref="S2.E1.m1.1.1.1.1.3.2.2.1.cmml">^</mo></mover><mrow id="S2.E1.m1.1.1.1.1.3.2.3" xref="S2.E1.m1.1.1.1.1.3.2.3.cmml"><mi id="S2.E1.m1.1.1.1.1.3.2.3.2" xref="S2.E1.m1.1.1.1.1.3.2.3.2.cmml">t</mi><mo id="S2.E1.m1.1.1.1.1.3.2.3.1" xref="S2.E1.m1.1.1.1.1.3.2.3.1.cmml">−</mo><mn id="S2.E1.m1.1.1.1.1.3.2.3.3" xref="S2.E1.m1.1.1.1.1.3.2.3.3.cmml">1</mn></mrow><mrow id="S2.E1.m1.1.1.1.1.3a" xref="S2.E1.m1.1.1.1.1.3.cmml"></mrow><mrow id="S2.E1.m1.1.1.1.1.3b" xref="S2.E1.m1.1.1.1.1.3.cmml"></mrow><mo id="S2.E1.m1.1.1.1.1.3.3" xref="S2.E1.m1.1.1.1.1.3.3.cmml">′</mo></mmultiscripts><mo id="S2.E1.m1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.2.cmml">=</mo><mrow id="S2.E1.m1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.cmml"><mrow id="S2.E1.m1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.3.cmml"><msub id="S2.E1.m1.1.1.1.1.1.3.2" xref="S2.E1.m1.1.1.1.1.1.3.2.cmml"><mover accent="true" id="S2.E1.m1.1.1.1.1.1.3.2.2" xref="S2.E1.m1.1.1.1.1.1.3.2.2.cmml"><mi id="S2.E1.m1.1.1.1.1.1.3.2.2.2" xref="S2.E1.m1.1.1.1.1.1.3.2.2.2.cmml">x</mi><mo id="S2.E1.m1.1.1.1.1.1.3.2.2.1" xref="S2.E1.m1.1.1.1.1.1.3.2.2.1.cmml">^</mo></mover><mrow id="S2.E1.m1.1.1.1.1.1.3.2.3" xref="S2.E1.m1.1.1.1.1.1.3.2.3.cmml"><mi id="S2.E1.m1.1.1.1.1.1.3.2.3.2" xref="S2.E1.m1.1.1.1.1.1.3.2.3.2.cmml">t</mi><mo id="S2.E1.m1.1.1.1.1.1.3.2.3.1" xref="S2.E1.m1.1.1.1.1.1.3.2.3.1.cmml">−</mo><mn id="S2.E1.m1.1.1.1.1.1.3.2.3.3" xref="S2.E1.m1.1.1.1.1.1.3.2.3.3.cmml">1</mn></mrow></msub><mo id="S2.E1.m1.1.1.1.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="S2.E1.m1.1.1.1.1.1.3.1.cmml">⋅</mo><msup id="S2.E1.m1.1.1.1.1.1.3.3" xref="S2.E1.m1.1.1.1.1.1.3.3.cmml"><mi id="S2.E1.m1.1.1.1.1.1.3.3.2" xref="S2.E1.m1.1.1.1.1.1.3.3.2.cmml">M</mi><mtext id="S2.E1.m1.1.1.1.1.1.3.3.3" xref="S2.E1.m1.1.1.1.1.1.3.3.3a.cmml">repaint</mtext></msup></mrow><mo id="S2.E1.m1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.2.cmml">+</mo><mrow id="S2.E1.m1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.cmml"><msub id="S2.E1.m1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.3.cmml"><mi id="S2.E1.m1.1.1.1.1.1.1.3.2" xref="S2.E1.m1.1.1.1.1.1.1.3.2.cmml">x</mi><mrow id="S2.E1.m1.1.1.1.1.1.1.3.3" xref="S2.E1.m1.1.1.1.1.1.1.3.3.cmml"><mi id="S2.E1.m1.1.1.1.1.1.1.3.3.2" xref="S2.E1.m1.1.1.1.1.1.1.3.3.2.cmml">t</mi><mo id="S2.E1.m1.1.1.1.1.1.1.3.3.1" xref="S2.E1.m1.1.1.1.1.1.1.3.3.1.cmml">−</mo><mn id="S2.E1.m1.1.1.1.1.1.1.3.3.3" xref="S2.E1.m1.1.1.1.1.1.1.3.3.3.cmml">1</mn></mrow></msub><mo id="S2.E1.m1.1.1.1.1.1.1.2" lspace="0.222em" rspace="0.222em" xref="S2.E1.m1.1.1.1.1.1.1.2.cmml">⋅</mo><mrow id="S2.E1.m1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E1.m1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.cmml"><mn id="S2.E1.m1.1.1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.2.cmml">1</mn><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml">−</mo><msup id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.2.cmml">M</mi><mtext id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.3a.cmml">repaint</mtext></msup></mrow><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S2.E1.m1.1.1.1.2" lspace="0em" xref="S2.E1.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.1b"><apply id="S2.E1.m1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1"><eq id="S2.E1.m1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.2"></eq><apply id="S2.E1.m1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.1.1.3">superscript</csymbol><apply id="S2.E1.m1.1.1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.3.2.1.cmml" xref="S2.E1.m1.1.1.1.1.3">subscript</csymbol><apply id="S2.E1.m1.1.1.1.1.3.2.2.cmml" xref="S2.E1.m1.1.1.1.1.3.2.2"><ci id="S2.E1.m1.1.1.1.1.3.2.2.1.cmml" xref="S2.E1.m1.1.1.1.1.3.2.2.1">^</ci><ci id="S2.E1.m1.1.1.1.1.3.2.2.2.cmml" xref="S2.E1.m1.1.1.1.1.3.2.2.2">𝑥</ci></apply><apply id="S2.E1.m1.1.1.1.1.3.2.3.cmml" xref="S2.E1.m1.1.1.1.1.3.2.3"><minus id="S2.E1.m1.1.1.1.1.3.2.3.1.cmml" xref="S2.E1.m1.1.1.1.1.3.2.3.1"></minus><ci id="S2.E1.m1.1.1.1.1.3.2.3.2.cmml" xref="S2.E1.m1.1.1.1.1.3.2.3.2">𝑡</ci><cn id="S2.E1.m1.1.1.1.1.3.2.3.3.cmml" type="integer" xref="S2.E1.m1.1.1.1.1.3.2.3.3">1</cn></apply></apply><ci id="S2.E1.m1.1.1.1.1.3.3.cmml" xref="S2.E1.m1.1.1.1.1.3.3">′</ci></apply><apply id="S2.E1.m1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1"><plus id="S2.E1.m1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.2"></plus><apply id="S2.E1.m1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.3"><ci id="S2.E1.m1.1.1.1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.1.1.1.3.1">⋅</ci><apply id="S2.E1.m1.1.1.1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.3.2.1.cmml" xref="S2.E1.m1.1.1.1.1.1.3.2">subscript</csymbol><apply id="S2.E1.m1.1.1.1.1.1.3.2.2.cmml" xref="S2.E1.m1.1.1.1.1.1.3.2.2"><ci id="S2.E1.m1.1.1.1.1.1.3.2.2.1.cmml" xref="S2.E1.m1.1.1.1.1.1.3.2.2.1">^</ci><ci id="S2.E1.m1.1.1.1.1.1.3.2.2.2.cmml" xref="S2.E1.m1.1.1.1.1.1.3.2.2.2">𝑥</ci></apply><apply id="S2.E1.m1.1.1.1.1.1.3.2.3.cmml" xref="S2.E1.m1.1.1.1.1.1.3.2.3"><minus id="S2.E1.m1.1.1.1.1.1.3.2.3.1.cmml" xref="S2.E1.m1.1.1.1.1.1.3.2.3.1"></minus><ci id="S2.E1.m1.1.1.1.1.1.3.2.3.2.cmml" xref="S2.E1.m1.1.1.1.1.1.3.2.3.2">𝑡</ci><cn id="S2.E1.m1.1.1.1.1.1.3.2.3.3.cmml" type="integer" xref="S2.E1.m1.1.1.1.1.1.3.2.3.3">1</cn></apply></apply><apply id="S2.E1.m1.1.1.1.1.1.3.3.cmml" xref="S2.E1.m1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.3.3.1.cmml" xref="S2.E1.m1.1.1.1.1.1.3.3">superscript</csymbol><ci id="S2.E1.m1.1.1.1.1.1.3.3.2.cmml" xref="S2.E1.m1.1.1.1.1.1.3.3.2">𝑀</ci><ci id="S2.E1.m1.1.1.1.1.1.3.3.3a.cmml" xref="S2.E1.m1.1.1.1.1.1.3.3.3"><mtext id="S2.E1.m1.1.1.1.1.1.3.3.3.cmml" mathsize="70%" xref="S2.E1.m1.1.1.1.1.1.3.3.3">repaint</mtext></ci></apply></apply><apply id="S2.E1.m1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1"><ci id="S2.E1.m1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.2">⋅</ci><apply id="S2.E1.m1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E1.m1.1.1.1.1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.3.2">𝑥</ci><apply id="S2.E1.m1.1.1.1.1.1.1.3.3.cmml" xref="S2.E1.m1.1.1.1.1.1.1.3.3"><minus id="S2.E1.m1.1.1.1.1.1.1.3.3.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.3.3.1"></minus><ci id="S2.E1.m1.1.1.1.1.1.1.3.3.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.3.3.2">𝑡</ci><cn id="S2.E1.m1.1.1.1.1.1.1.3.3.3.cmml" type="integer" xref="S2.E1.m1.1.1.1.1.1.1.3.3.3">1</cn></apply></apply><apply id="S2.E1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1"><minus id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1"></minus><cn id="S2.E1.m1.1.1.1.1.1.1.1.1.1.2.cmml" type="integer" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.2">1</cn><apply id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3">superscript</csymbol><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.2">𝑀</ci><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.3a.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.3"><mtext id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.3.cmml" mathsize="70%" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.3.3">repaint</mtext></ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.1c">\displaystyle{\hat{x}_{t-1}}^{\prime}={\hat{x}_{t-1}}\cdot{M^{\text{repaint}}}%
+{x_{t-1}}\cdot({1}-{M^{\text{repaint}}}).</annotation><annotation encoding="application/x-llamapun" id="S2.E1.m1.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT = over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT ⋅ italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT + italic_x start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT ⋅ ( 1 - italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS2.p1.12">This guarantees that pixels outside <math alttext="M^{\text{repaint}}" class="ltx_Math" display="inline" id="S2.SS2.p1.7.m1.1"><semantics id="S2.SS2.p1.7.m1.1a"><msup id="S2.SS2.p1.7.m1.1.1" xref="S2.SS2.p1.7.m1.1.1.cmml"><mi id="S2.SS2.p1.7.m1.1.1.2" xref="S2.SS2.p1.7.m1.1.1.2.cmml">M</mi><mtext id="S2.SS2.p1.7.m1.1.1.3" xref="S2.SS2.p1.7.m1.1.1.3a.cmml">repaint</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.7.m1.1b"><apply id="S2.SS2.p1.7.m1.1.1.cmml" xref="S2.SS2.p1.7.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.7.m1.1.1.1.cmml" xref="S2.SS2.p1.7.m1.1.1">superscript</csymbol><ci id="S2.SS2.p1.7.m1.1.1.2.cmml" xref="S2.SS2.p1.7.m1.1.1.2">𝑀</ci><ci id="S2.SS2.p1.7.m1.1.1.3a.cmml" xref="S2.SS2.p1.7.m1.1.1.3"><mtext id="S2.SS2.p1.7.m1.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p1.7.m1.1.1.3">repaint</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.7.m1.1c">M^{\text{repaint}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.7.m1.1d">italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT</annotation></semantics></math> are preserved, and only pixels within the mask are updated.
For better consistency between lesion and non-lesion regions, after updating <math alttext="{\hat{x}_{t-1}}" class="ltx_Math" display="inline" id="S2.SS2.p1.8.m2.1"><semantics id="S2.SS2.p1.8.m2.1a"><msub id="S2.SS2.p1.8.m2.1.1" xref="S2.SS2.p1.8.m2.1.1.cmml"><mover accent="true" id="S2.SS2.p1.8.m2.1.1.2" xref="S2.SS2.p1.8.m2.1.1.2.cmml"><mi id="S2.SS2.p1.8.m2.1.1.2.2" xref="S2.SS2.p1.8.m2.1.1.2.2.cmml">x</mi><mo id="S2.SS2.p1.8.m2.1.1.2.1" xref="S2.SS2.p1.8.m2.1.1.2.1.cmml">^</mo></mover><mrow id="S2.SS2.p1.8.m2.1.1.3" xref="S2.SS2.p1.8.m2.1.1.3.cmml"><mi id="S2.SS2.p1.8.m2.1.1.3.2" xref="S2.SS2.p1.8.m2.1.1.3.2.cmml">t</mi><mo id="S2.SS2.p1.8.m2.1.1.3.1" xref="S2.SS2.p1.8.m2.1.1.3.1.cmml">−</mo><mn id="S2.SS2.p1.8.m2.1.1.3.3" xref="S2.SS2.p1.8.m2.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.8.m2.1b"><apply id="S2.SS2.p1.8.m2.1.1.cmml" xref="S2.SS2.p1.8.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.8.m2.1.1.1.cmml" xref="S2.SS2.p1.8.m2.1.1">subscript</csymbol><apply id="S2.SS2.p1.8.m2.1.1.2.cmml" xref="S2.SS2.p1.8.m2.1.1.2"><ci id="S2.SS2.p1.8.m2.1.1.2.1.cmml" xref="S2.SS2.p1.8.m2.1.1.2.1">^</ci><ci id="S2.SS2.p1.8.m2.1.1.2.2.cmml" xref="S2.SS2.p1.8.m2.1.1.2.2">𝑥</ci></apply><apply id="S2.SS2.p1.8.m2.1.1.3.cmml" xref="S2.SS2.p1.8.m2.1.1.3"><minus id="S2.SS2.p1.8.m2.1.1.3.1.cmml" xref="S2.SS2.p1.8.m2.1.1.3.1"></minus><ci id="S2.SS2.p1.8.m2.1.1.3.2.cmml" xref="S2.SS2.p1.8.m2.1.1.3.2">𝑡</ci><cn id="S2.SS2.p1.8.m2.1.1.3.3.cmml" type="integer" xref="S2.SS2.p1.8.m2.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.8.m2.1c">{\hat{x}_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.8.m2.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math> with <math alttext="{\hat{x}_{t-1}}^{\prime}" class="ltx_Math" display="inline" id="S2.SS2.p1.9.m3.1"><semantics id="S2.SS2.p1.9.m3.1a"><mmultiscripts id="S2.SS2.p1.9.m3.1.1" xref="S2.SS2.p1.9.m3.1.1.cmml"><mover accent="true" id="S2.SS2.p1.9.m3.1.1.2.2" xref="S2.SS2.p1.9.m3.1.1.2.2.cmml"><mi id="S2.SS2.p1.9.m3.1.1.2.2.2" xref="S2.SS2.p1.9.m3.1.1.2.2.2.cmml">x</mi><mo id="S2.SS2.p1.9.m3.1.1.2.2.1" xref="S2.SS2.p1.9.m3.1.1.2.2.1.cmml">^</mo></mover><mrow id="S2.SS2.p1.9.m3.1.1.2.3" xref="S2.SS2.p1.9.m3.1.1.2.3.cmml"><mi id="S2.SS2.p1.9.m3.1.1.2.3.2" xref="S2.SS2.p1.9.m3.1.1.2.3.2.cmml">t</mi><mo id="S2.SS2.p1.9.m3.1.1.2.3.1" xref="S2.SS2.p1.9.m3.1.1.2.3.1.cmml">−</mo><mn id="S2.SS2.p1.9.m3.1.1.2.3.3" xref="S2.SS2.p1.9.m3.1.1.2.3.3.cmml">1</mn></mrow><mrow id="S2.SS2.p1.9.m3.1.1a" xref="S2.SS2.p1.9.m3.1.1.cmml"></mrow><mrow id="S2.SS2.p1.9.m3.1.1b" xref="S2.SS2.p1.9.m3.1.1.cmml"></mrow><mo id="S2.SS2.p1.9.m3.1.1.3" xref="S2.SS2.p1.9.m3.1.1.3.cmml">′</mo></mmultiscripts><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.9.m3.1b"><apply id="S2.SS2.p1.9.m3.1.1.cmml" xref="S2.SS2.p1.9.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.9.m3.1.1.1.cmml" xref="S2.SS2.p1.9.m3.1.1">superscript</csymbol><apply id="S2.SS2.p1.9.m3.1.1.2.cmml" xref="S2.SS2.p1.9.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.9.m3.1.1.2.1.cmml" xref="S2.SS2.p1.9.m3.1.1">subscript</csymbol><apply id="S2.SS2.p1.9.m3.1.1.2.2.cmml" xref="S2.SS2.p1.9.m3.1.1.2.2"><ci id="S2.SS2.p1.9.m3.1.1.2.2.1.cmml" xref="S2.SS2.p1.9.m3.1.1.2.2.1">^</ci><ci id="S2.SS2.p1.9.m3.1.1.2.2.2.cmml" xref="S2.SS2.p1.9.m3.1.1.2.2.2">𝑥</ci></apply><apply id="S2.SS2.p1.9.m3.1.1.2.3.cmml" xref="S2.SS2.p1.9.m3.1.1.2.3"><minus id="S2.SS2.p1.9.m3.1.1.2.3.1.cmml" xref="S2.SS2.p1.9.m3.1.1.2.3.1"></minus><ci id="S2.SS2.p1.9.m3.1.1.2.3.2.cmml" xref="S2.SS2.p1.9.m3.1.1.2.3.2">𝑡</ci><cn id="S2.SS2.p1.9.m3.1.1.2.3.3.cmml" type="integer" xref="S2.SS2.p1.9.m3.1.1.2.3.3">1</cn></apply></apply><ci id="S2.SS2.p1.9.m3.1.1.3.cmml" xref="S2.SS2.p1.9.m3.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.9.m3.1c">{\hat{x}_{t-1}}^{\prime}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.9.m3.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> using Eq. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S2.E1" title="In 2.2 Inference: Lesion filling and generation ‣ 2 METHOD ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">1</span></a>, <math alttext="{x_{t}}" class="ltx_Math" display="inline" id="S2.SS2.p1.10.m4.1"><semantics id="S2.SS2.p1.10.m4.1a"><msub id="S2.SS2.p1.10.m4.1.1" xref="S2.SS2.p1.10.m4.1.1.cmml"><mi id="S2.SS2.p1.10.m4.1.1.2" xref="S2.SS2.p1.10.m4.1.1.2.cmml">x</mi><mi id="S2.SS2.p1.10.m4.1.1.3" xref="S2.SS2.p1.10.m4.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.10.m4.1b"><apply id="S2.SS2.p1.10.m4.1.1.cmml" xref="S2.SS2.p1.10.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.10.m4.1.1.1.cmml" xref="S2.SS2.p1.10.m4.1.1">subscript</csymbol><ci id="S2.SS2.p1.10.m4.1.1.2.cmml" xref="S2.SS2.p1.10.m4.1.1.2">𝑥</ci><ci id="S2.SS2.p1.10.m4.1.1.3.cmml" xref="S2.SS2.p1.10.m4.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.10.m4.1c">{x_{t}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.10.m4.1d">italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> is regenerated from <math alttext="{\hat{x}_{t-1}}" class="ltx_Math" display="inline" id="S2.SS2.p1.11.m5.1"><semantics id="S2.SS2.p1.11.m5.1a"><msub id="S2.SS2.p1.11.m5.1.1" xref="S2.SS2.p1.11.m5.1.1.cmml"><mover accent="true" id="S2.SS2.p1.11.m5.1.1.2" xref="S2.SS2.p1.11.m5.1.1.2.cmml"><mi id="S2.SS2.p1.11.m5.1.1.2.2" xref="S2.SS2.p1.11.m5.1.1.2.2.cmml">x</mi><mo id="S2.SS2.p1.11.m5.1.1.2.1" xref="S2.SS2.p1.11.m5.1.1.2.1.cmml">^</mo></mover><mrow id="S2.SS2.p1.11.m5.1.1.3" xref="S2.SS2.p1.11.m5.1.1.3.cmml"><mi id="S2.SS2.p1.11.m5.1.1.3.2" xref="S2.SS2.p1.11.m5.1.1.3.2.cmml">t</mi><mo id="S2.SS2.p1.11.m5.1.1.3.1" xref="S2.SS2.p1.11.m5.1.1.3.1.cmml">−</mo><mn id="S2.SS2.p1.11.m5.1.1.3.3" xref="S2.SS2.p1.11.m5.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.11.m5.1b"><apply id="S2.SS2.p1.11.m5.1.1.cmml" xref="S2.SS2.p1.11.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.11.m5.1.1.1.cmml" xref="S2.SS2.p1.11.m5.1.1">subscript</csymbol><apply id="S2.SS2.p1.11.m5.1.1.2.cmml" xref="S2.SS2.p1.11.m5.1.1.2"><ci id="S2.SS2.p1.11.m5.1.1.2.1.cmml" xref="S2.SS2.p1.11.m5.1.1.2.1">^</ci><ci id="S2.SS2.p1.11.m5.1.1.2.2.cmml" xref="S2.SS2.p1.11.m5.1.1.2.2">𝑥</ci></apply><apply id="S2.SS2.p1.11.m5.1.1.3.cmml" xref="S2.SS2.p1.11.m5.1.1.3"><minus id="S2.SS2.p1.11.m5.1.1.3.1.cmml" xref="S2.SS2.p1.11.m5.1.1.3.1"></minus><ci id="S2.SS2.p1.11.m5.1.1.3.2.cmml" xref="S2.SS2.p1.11.m5.1.1.3.2">𝑡</ci><cn id="S2.SS2.p1.11.m5.1.1.3.3.cmml" type="integer" xref="S2.SS2.p1.11.m5.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.11.m5.1c">{\hat{x}_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.11.m5.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math> with one-step forward diffusion and then run through the reverse process at timestep <math alttext="t" class="ltx_Math" display="inline" id="S2.SS2.p1.12.m6.1"><semantics id="S2.SS2.p1.12.m6.1a"><mi id="S2.SS2.p1.12.m6.1.1" xref="S2.SS2.p1.12.m6.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.12.m6.1b"><ci id="S2.SS2.p1.12.m6.1.1.cmml" xref="S2.SS2.p1.12.m6.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.12.m6.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.12.m6.1d">italic_t</annotation></semantics></math> to ‘repaint’ lesions <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib3" title="">3</a>]</cite>.
This repaint process can be repeated several times, with the number of repetitions as a hyperparameter.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.3"><span class="ltx_text ltx_font_bold" id="S2.SS2.p2.3.1">Lesion filling:</span>
Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S2.F1" title="Figure 1 ‣ 2 METHOD ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">1</span></a> shows the overall diagram of inference.
For lesion filling, the goal is to replace pixels of image <math alttext="x_{0}" class="ltx_Math" display="inline" id="S2.SS2.p2.1.m1.1"><semantics id="S2.SS2.p2.1.m1.1a"><msub id="S2.SS2.p2.1.m1.1.1" xref="S2.SS2.p2.1.m1.1.1.cmml"><mi id="S2.SS2.p2.1.m1.1.1.2" xref="S2.SS2.p2.1.m1.1.1.2.cmml">x</mi><mn id="S2.SS2.p2.1.m1.1.1.3" xref="S2.SS2.p2.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.1.m1.1b"><apply id="S2.SS2.p2.1.m1.1.1.cmml" xref="S2.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.1.m1.1.1.1.cmml" xref="S2.SS2.p2.1.m1.1.1">subscript</csymbol><ci id="S2.SS2.p2.1.m1.1.1.2.cmml" xref="S2.SS2.p2.1.m1.1.1.2">𝑥</ci><cn id="S2.SS2.p2.1.m1.1.1.3.cmml" type="integer" xref="S2.SS2.p2.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.1.m1.1c">x_{0}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.1.m1.1d">italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> within <math alttext="M^{\text{repaint}}" class="ltx_Math" display="inline" id="S2.SS2.p2.2.m2.1"><semantics id="S2.SS2.p2.2.m2.1a"><msup id="S2.SS2.p2.2.m2.1.1" xref="S2.SS2.p2.2.m2.1.1.cmml"><mi id="S2.SS2.p2.2.m2.1.1.2" xref="S2.SS2.p2.2.m2.1.1.2.cmml">M</mi><mtext id="S2.SS2.p2.2.m2.1.1.3" xref="S2.SS2.p2.2.m2.1.1.3a.cmml">repaint</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.2.m2.1b"><apply id="S2.SS2.p2.2.m2.1.1.cmml" xref="S2.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.2.m2.1.1.1.cmml" xref="S2.SS2.p2.2.m2.1.1">superscript</csymbol><ci id="S2.SS2.p2.2.m2.1.1.2.cmml" xref="S2.SS2.p2.2.m2.1.1.2">𝑀</ci><ci id="S2.SS2.p2.2.m2.1.1.3a.cmml" xref="S2.SS2.p2.2.m2.1.1.3"><mtext id="S2.SS2.p2.2.m2.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p2.2.m2.1.1.3">repaint</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.2.m2.1c">M^{\text{repaint}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.2.m2.1d">italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT</annotation></semantics></math> with healthy-looking pixels.
Therefore, <math alttext="M^{\text{target}}" class="ltx_Math" display="inline" id="S2.SS2.p2.3.m3.1"><semantics id="S2.SS2.p2.3.m3.1a"><msup id="S2.SS2.p2.3.m3.1.1" xref="S2.SS2.p2.3.m3.1.1.cmml"><mi id="S2.SS2.p2.3.m3.1.1.2" xref="S2.SS2.p2.3.m3.1.1.2.cmml">M</mi><mtext id="S2.SS2.p2.3.m3.1.1.3" xref="S2.SS2.p2.3.m3.1.1.3a.cmml">target</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.3.m3.1b"><apply id="S2.SS2.p2.3.m3.1.1.cmml" xref="S2.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.3.m3.1.1.1.cmml" xref="S2.SS2.p2.3.m3.1.1">superscript</csymbol><ci id="S2.SS2.p2.3.m3.1.1.2.cmml" xref="S2.SS2.p2.3.m3.1.1.2">𝑀</ci><ci id="S2.SS2.p2.3.m3.1.1.3a.cmml" xref="S2.SS2.p2.3.m3.1.1.3"><mtext id="S2.SS2.p2.3.m3.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p2.3.m3.1.1.3">target</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.3.m3.1c">M^{\text{target}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.3.m3.1d">italic_M start_POSTSUPERSCRIPT target end_POSTSUPERSCRIPT</annotation></semantics></math> is set to be all-zero to guide the DDPM to generate lesion-free images.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p3">
<p class="ltx_p" id="S2.SS2.p3.3"><span class="ltx_text ltx_font_bold" id="S2.SS2.p3.3.1">Lesion generation:</span> Similarly, lesion generation during inference involves replacing healthy-looking pixels with lesion-looking pixels.
This replacement is controlled by <math alttext="M^{\text{repaint}}" class="ltx_Math" display="inline" id="S2.SS2.p3.1.m1.1"><semantics id="S2.SS2.p3.1.m1.1a"><msup id="S2.SS2.p3.1.m1.1.1" xref="S2.SS2.p3.1.m1.1.1.cmml"><mi id="S2.SS2.p3.1.m1.1.1.2" xref="S2.SS2.p3.1.m1.1.1.2.cmml">M</mi><mtext id="S2.SS2.p3.1.m1.1.1.3" xref="S2.SS2.p3.1.m1.1.1.3a.cmml">repaint</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.1.m1.1b"><apply id="S2.SS2.p3.1.m1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p3.1.m1.1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1">superscript</csymbol><ci id="S2.SS2.p3.1.m1.1.1.2.cmml" xref="S2.SS2.p3.1.m1.1.1.2">𝑀</ci><ci id="S2.SS2.p3.1.m1.1.1.3a.cmml" xref="S2.SS2.p3.1.m1.1.1.3"><mtext id="S2.SS2.p3.1.m1.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p3.1.m1.1.1.3">repaint</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.1.m1.1c">M^{\text{repaint}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.1.m1.1d">italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT</annotation></semantics></math>.
To guide the DDPM to generate lesion looking images, <math alttext="M^{\text{target}}" class="ltx_Math" display="inline" id="S2.SS2.p3.2.m2.1"><semantics id="S2.SS2.p3.2.m2.1a"><msup id="S2.SS2.p3.2.m2.1.1" xref="S2.SS2.p3.2.m2.1.1.cmml"><mi id="S2.SS2.p3.2.m2.1.1.2" xref="S2.SS2.p3.2.m2.1.1.2.cmml">M</mi><mtext id="S2.SS2.p3.2.m2.1.1.3" xref="S2.SS2.p3.2.m2.1.1.3a.cmml">target</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.2.m2.1b"><apply id="S2.SS2.p3.2.m2.1.1.cmml" xref="S2.SS2.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p3.2.m2.1.1.1.cmml" xref="S2.SS2.p3.2.m2.1.1">superscript</csymbol><ci id="S2.SS2.p3.2.m2.1.1.2.cmml" xref="S2.SS2.p3.2.m2.1.1.2">𝑀</ci><ci id="S2.SS2.p3.2.m2.1.1.3a.cmml" xref="S2.SS2.p3.2.m2.1.1.3"><mtext id="S2.SS2.p3.2.m2.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p3.2.m2.1.1.3">target</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.2.m2.1c">M^{\text{target}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.2.m2.1d">italic_M start_POSTSUPERSCRIPT target end_POSTSUPERSCRIPT</annotation></semantics></math> is set to <math alttext="M^{\text{repaint}}" class="ltx_Math" display="inline" id="S2.SS2.p3.3.m3.1"><semantics id="S2.SS2.p3.3.m3.1a"><msup id="S2.SS2.p3.3.m3.1.1" xref="S2.SS2.p3.3.m3.1.1.cmml"><mi id="S2.SS2.p3.3.m3.1.1.2" xref="S2.SS2.p3.3.m3.1.1.2.cmml">M</mi><mtext id="S2.SS2.p3.3.m3.1.1.3" xref="S2.SS2.p3.3.m3.1.1.3a.cmml">repaint</mtext></msup><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.3.m3.1b"><apply id="S2.SS2.p3.3.m3.1.1.cmml" xref="S2.SS2.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p3.3.m3.1.1.1.cmml" xref="S2.SS2.p3.3.m3.1.1">superscript</csymbol><ci id="S2.SS2.p3.3.m3.1.1.2.cmml" xref="S2.SS2.p3.3.m3.1.1.2">𝑀</ci><ci id="S2.SS2.p3.3.m3.1.1.3a.cmml" xref="S2.SS2.p3.3.m3.1.1.3"><mtext id="S2.SS2.p3.3.m3.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p3.3.m3.1.1.3">repaint</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.3.m3.1c">M^{\text{repaint}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.3.m3.1d">italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT</annotation></semantics></math> to indicate the desired lesion masks.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p4">
<p class="ltx_p" id="S2.SS2.p4.11"><span class="ltx_text ltx_font_bold" id="S2.SS2.p4.11.1">Inference acceleration with DDIM:</span>
To accelerate the inference process, we apply a DDIM with a sub-sequence <math alttext="[\tau_{1},...,\tau_{S}]" class="ltx_Math" display="inline" id="S2.SS2.p4.1.m1.3"><semantics id="S2.SS2.p4.1.m1.3a"><mrow id="S2.SS2.p4.1.m1.3.3.2" xref="S2.SS2.p4.1.m1.3.3.3.cmml"><mo id="S2.SS2.p4.1.m1.3.3.2.3" stretchy="false" xref="S2.SS2.p4.1.m1.3.3.3.cmml">[</mo><msub id="S2.SS2.p4.1.m1.2.2.1.1" xref="S2.SS2.p4.1.m1.2.2.1.1.cmml"><mi id="S2.SS2.p4.1.m1.2.2.1.1.2" xref="S2.SS2.p4.1.m1.2.2.1.1.2.cmml">τ</mi><mn id="S2.SS2.p4.1.m1.2.2.1.1.3" xref="S2.SS2.p4.1.m1.2.2.1.1.3.cmml">1</mn></msub><mo id="S2.SS2.p4.1.m1.3.3.2.4" xref="S2.SS2.p4.1.m1.3.3.3.cmml">,</mo><mi id="S2.SS2.p4.1.m1.1.1" mathvariant="normal" xref="S2.SS2.p4.1.m1.1.1.cmml">…</mi><mo id="S2.SS2.p4.1.m1.3.3.2.5" xref="S2.SS2.p4.1.m1.3.3.3.cmml">,</mo><msub id="S2.SS2.p4.1.m1.3.3.2.2" xref="S2.SS2.p4.1.m1.3.3.2.2.cmml"><mi id="S2.SS2.p4.1.m1.3.3.2.2.2" xref="S2.SS2.p4.1.m1.3.3.2.2.2.cmml">τ</mi><mi id="S2.SS2.p4.1.m1.3.3.2.2.3" xref="S2.SS2.p4.1.m1.3.3.2.2.3.cmml">S</mi></msub><mo id="S2.SS2.p4.1.m1.3.3.2.6" stretchy="false" xref="S2.SS2.p4.1.m1.3.3.3.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.1.m1.3b"><list id="S2.SS2.p4.1.m1.3.3.3.cmml" xref="S2.SS2.p4.1.m1.3.3.2"><apply id="S2.SS2.p4.1.m1.2.2.1.1.cmml" xref="S2.SS2.p4.1.m1.2.2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.1.m1.2.2.1.1.1.cmml" xref="S2.SS2.p4.1.m1.2.2.1.1">subscript</csymbol><ci id="S2.SS2.p4.1.m1.2.2.1.1.2.cmml" xref="S2.SS2.p4.1.m1.2.2.1.1.2">𝜏</ci><cn id="S2.SS2.p4.1.m1.2.2.1.1.3.cmml" type="integer" xref="S2.SS2.p4.1.m1.2.2.1.1.3">1</cn></apply><ci id="S2.SS2.p4.1.m1.1.1.cmml" xref="S2.SS2.p4.1.m1.1.1">…</ci><apply id="S2.SS2.p4.1.m1.3.3.2.2.cmml" xref="S2.SS2.p4.1.m1.3.3.2.2"><csymbol cd="ambiguous" id="S2.SS2.p4.1.m1.3.3.2.2.1.cmml" xref="S2.SS2.p4.1.m1.3.3.2.2">subscript</csymbol><ci id="S2.SS2.p4.1.m1.3.3.2.2.2.cmml" xref="S2.SS2.p4.1.m1.3.3.2.2.2">𝜏</ci><ci id="S2.SS2.p4.1.m1.3.3.2.2.3.cmml" xref="S2.SS2.p4.1.m1.3.3.2.2.3">𝑆</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.1.m1.3c">[\tau_{1},...,\tau_{S}]</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.1.m1.3d">[ italic_τ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_τ start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT ]</annotation></semantics></math> of <math alttext="[1,...,T]" class="ltx_Math" display="inline" id="S2.SS2.p4.2.m2.3"><semantics id="S2.SS2.p4.2.m2.3a"><mrow id="S2.SS2.p4.2.m2.3.4.2" xref="S2.SS2.p4.2.m2.3.4.1.cmml"><mo id="S2.SS2.p4.2.m2.3.4.2.1" stretchy="false" xref="S2.SS2.p4.2.m2.3.4.1.cmml">[</mo><mn id="S2.SS2.p4.2.m2.1.1" xref="S2.SS2.p4.2.m2.1.1.cmml">1</mn><mo id="S2.SS2.p4.2.m2.3.4.2.2" xref="S2.SS2.p4.2.m2.3.4.1.cmml">,</mo><mi id="S2.SS2.p4.2.m2.2.2" mathvariant="normal" xref="S2.SS2.p4.2.m2.2.2.cmml">…</mi><mo id="S2.SS2.p4.2.m2.3.4.2.3" xref="S2.SS2.p4.2.m2.3.4.1.cmml">,</mo><mi id="S2.SS2.p4.2.m2.3.3" xref="S2.SS2.p4.2.m2.3.3.cmml">T</mi><mo id="S2.SS2.p4.2.m2.3.4.2.4" stretchy="false" xref="S2.SS2.p4.2.m2.3.4.1.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.2.m2.3b"><list id="S2.SS2.p4.2.m2.3.4.1.cmml" xref="S2.SS2.p4.2.m2.3.4.2"><cn id="S2.SS2.p4.2.m2.1.1.cmml" type="integer" xref="S2.SS2.p4.2.m2.1.1">1</cn><ci id="S2.SS2.p4.2.m2.2.2.cmml" xref="S2.SS2.p4.2.m2.2.2">…</ci><ci id="S2.SS2.p4.2.m2.3.3.cmml" xref="S2.SS2.p4.2.m2.3.3">𝑇</ci></list></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.2.m2.3c">[1,...,T]</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.2.m2.3d">[ 1 , … , italic_T ]</annotation></semantics></math> for reverse sampling (<math alttext="S\ll T" class="ltx_Math" display="inline" id="S2.SS2.p4.3.m3.1"><semantics id="S2.SS2.p4.3.m3.1a"><mrow id="S2.SS2.p4.3.m3.1.1" xref="S2.SS2.p4.3.m3.1.1.cmml"><mi id="S2.SS2.p4.3.m3.1.1.2" xref="S2.SS2.p4.3.m3.1.1.2.cmml">S</mi><mo id="S2.SS2.p4.3.m3.1.1.1" xref="S2.SS2.p4.3.m3.1.1.1.cmml">≪</mo><mi id="S2.SS2.p4.3.m3.1.1.3" xref="S2.SS2.p4.3.m3.1.1.3.cmml">T</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.3.m3.1b"><apply id="S2.SS2.p4.3.m3.1.1.cmml" xref="S2.SS2.p4.3.m3.1.1"><csymbol cd="latexml" id="S2.SS2.p4.3.m3.1.1.1.cmml" xref="S2.SS2.p4.3.m3.1.1.1">much-less-than</csymbol><ci id="S2.SS2.p4.3.m3.1.1.2.cmml" xref="S2.SS2.p4.3.m3.1.1.2">𝑆</ci><ci id="S2.SS2.p4.3.m3.1.1.3.cmml" xref="S2.SS2.p4.3.m3.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.3.m3.1c">S\ll T</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.3.m3.1d">italic_S ≪ italic_T</annotation></semantics></math>).
Since the foward process is no longer Markovian in DDIM, we regenerate <math alttext="{x_{t}}" class="ltx_Math" display="inline" id="S2.SS2.p4.4.m4.1"><semantics id="S2.SS2.p4.4.m4.1a"><msub id="S2.SS2.p4.4.m4.1.1" xref="S2.SS2.p4.4.m4.1.1.cmml"><mi id="S2.SS2.p4.4.m4.1.1.2" xref="S2.SS2.p4.4.m4.1.1.2.cmml">x</mi><mi id="S2.SS2.p4.4.m4.1.1.3" xref="S2.SS2.p4.4.m4.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.4.m4.1b"><apply id="S2.SS2.p4.4.m4.1.1.cmml" xref="S2.SS2.p4.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.4.m4.1.1.1.cmml" xref="S2.SS2.p4.4.m4.1.1">subscript</csymbol><ci id="S2.SS2.p4.4.m4.1.1.2.cmml" xref="S2.SS2.p4.4.m4.1.1.2">𝑥</ci><ci id="S2.SS2.p4.4.m4.1.1.3.cmml" xref="S2.SS2.p4.4.m4.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.4.m4.1c">{x_{t}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.4.m4.1d">italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> for lesion repaint using a inpainted <math alttext="{\hat{x}_{0}}^{\prime}" class="ltx_Math" display="inline" id="S2.SS2.p4.5.m5.1"><semantics id="S2.SS2.p4.5.m5.1a"><mmultiscripts id="S2.SS2.p4.5.m5.1.1" xref="S2.SS2.p4.5.m5.1.1.cmml"><mover accent="true" id="S2.SS2.p4.5.m5.1.1.2.2" xref="S2.SS2.p4.5.m5.1.1.2.2.cmml"><mi id="S2.SS2.p4.5.m5.1.1.2.2.2" xref="S2.SS2.p4.5.m5.1.1.2.2.2.cmml">x</mi><mo id="S2.SS2.p4.5.m5.1.1.2.2.1" xref="S2.SS2.p4.5.m5.1.1.2.2.1.cmml">^</mo></mover><mn id="S2.SS2.p4.5.m5.1.1.2.3" xref="S2.SS2.p4.5.m5.1.1.2.3.cmml">0</mn><mrow id="S2.SS2.p4.5.m5.1.1a" xref="S2.SS2.p4.5.m5.1.1.cmml"></mrow><mrow id="S2.SS2.p4.5.m5.1.1b" xref="S2.SS2.p4.5.m5.1.1.cmml"></mrow><mo id="S2.SS2.p4.5.m5.1.1.3" xref="S2.SS2.p4.5.m5.1.1.3.cmml">′</mo></mmultiscripts><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.5.m5.1b"><apply id="S2.SS2.p4.5.m5.1.1.cmml" xref="S2.SS2.p4.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.5.m5.1.1.1.cmml" xref="S2.SS2.p4.5.m5.1.1">superscript</csymbol><apply id="S2.SS2.p4.5.m5.1.1.2.cmml" xref="S2.SS2.p4.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.5.m5.1.1.2.1.cmml" xref="S2.SS2.p4.5.m5.1.1">subscript</csymbol><apply id="S2.SS2.p4.5.m5.1.1.2.2.cmml" xref="S2.SS2.p4.5.m5.1.1.2.2"><ci id="S2.SS2.p4.5.m5.1.1.2.2.1.cmml" xref="S2.SS2.p4.5.m5.1.1.2.2.1">^</ci><ci id="S2.SS2.p4.5.m5.1.1.2.2.2.cmml" xref="S2.SS2.p4.5.m5.1.1.2.2.2">𝑥</ci></apply><cn id="S2.SS2.p4.5.m5.1.1.2.3.cmml" type="integer" xref="S2.SS2.p4.5.m5.1.1.2.3">0</cn></apply><ci id="S2.SS2.p4.5.m5.1.1.3.cmml" xref="S2.SS2.p4.5.m5.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.5.m5.1c">{\hat{x}_{0}}^{\prime}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.5.m5.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> instead of <math alttext="{\hat{x}_{t-1}}^{\prime}" class="ltx_Math" display="inline" id="S2.SS2.p4.6.m6.1"><semantics id="S2.SS2.p4.6.m6.1a"><mmultiscripts id="S2.SS2.p4.6.m6.1.1" xref="S2.SS2.p4.6.m6.1.1.cmml"><mover accent="true" id="S2.SS2.p4.6.m6.1.1.2.2" xref="S2.SS2.p4.6.m6.1.1.2.2.cmml"><mi id="S2.SS2.p4.6.m6.1.1.2.2.2" xref="S2.SS2.p4.6.m6.1.1.2.2.2.cmml">x</mi><mo id="S2.SS2.p4.6.m6.1.1.2.2.1" xref="S2.SS2.p4.6.m6.1.1.2.2.1.cmml">^</mo></mover><mrow id="S2.SS2.p4.6.m6.1.1.2.3" xref="S2.SS2.p4.6.m6.1.1.2.3.cmml"><mi id="S2.SS2.p4.6.m6.1.1.2.3.2" xref="S2.SS2.p4.6.m6.1.1.2.3.2.cmml">t</mi><mo id="S2.SS2.p4.6.m6.1.1.2.3.1" xref="S2.SS2.p4.6.m6.1.1.2.3.1.cmml">−</mo><mn id="S2.SS2.p4.6.m6.1.1.2.3.3" xref="S2.SS2.p4.6.m6.1.1.2.3.3.cmml">1</mn></mrow><mrow id="S2.SS2.p4.6.m6.1.1a" xref="S2.SS2.p4.6.m6.1.1.cmml"></mrow><mrow id="S2.SS2.p4.6.m6.1.1b" xref="S2.SS2.p4.6.m6.1.1.cmml"></mrow><mo id="S2.SS2.p4.6.m6.1.1.3" xref="S2.SS2.p4.6.m6.1.1.3.cmml">′</mo></mmultiscripts><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.6.m6.1b"><apply id="S2.SS2.p4.6.m6.1.1.cmml" xref="S2.SS2.p4.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.6.m6.1.1.1.cmml" xref="S2.SS2.p4.6.m6.1.1">superscript</csymbol><apply id="S2.SS2.p4.6.m6.1.1.2.cmml" xref="S2.SS2.p4.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.6.m6.1.1.2.1.cmml" xref="S2.SS2.p4.6.m6.1.1">subscript</csymbol><apply id="S2.SS2.p4.6.m6.1.1.2.2.cmml" xref="S2.SS2.p4.6.m6.1.1.2.2"><ci id="S2.SS2.p4.6.m6.1.1.2.2.1.cmml" xref="S2.SS2.p4.6.m6.1.1.2.2.1">^</ci><ci id="S2.SS2.p4.6.m6.1.1.2.2.2.cmml" xref="S2.SS2.p4.6.m6.1.1.2.2.2">𝑥</ci></apply><apply id="S2.SS2.p4.6.m6.1.1.2.3.cmml" xref="S2.SS2.p4.6.m6.1.1.2.3"><minus id="S2.SS2.p4.6.m6.1.1.2.3.1.cmml" xref="S2.SS2.p4.6.m6.1.1.2.3.1"></minus><ci id="S2.SS2.p4.6.m6.1.1.2.3.2.cmml" xref="S2.SS2.p4.6.m6.1.1.2.3.2">𝑡</ci><cn id="S2.SS2.p4.6.m6.1.1.2.3.3.cmml" type="integer" xref="S2.SS2.p4.6.m6.1.1.2.3.3">1</cn></apply></apply><ci id="S2.SS2.p4.6.m6.1.1.3.cmml" xref="S2.SS2.p4.6.m6.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.6.m6.1c">{\hat{x}_{t-1}}^{\prime}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.6.m6.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT</annotation></semantics></math> in Eq. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S2.E1" title="In 2.2 Inference: Lesion filling and generation ‣ 2 METHOD ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">1</span></a>.
Inpainting <math alttext="{\hat{x}_{0}}" class="ltx_Math" display="inline" id="S2.SS2.p4.7.m7.1"><semantics id="S2.SS2.p4.7.m7.1a"><msub id="S2.SS2.p4.7.m7.1.1" xref="S2.SS2.p4.7.m7.1.1.cmml"><mover accent="true" id="S2.SS2.p4.7.m7.1.1.2" xref="S2.SS2.p4.7.m7.1.1.2.cmml"><mi id="S2.SS2.p4.7.m7.1.1.2.2" xref="S2.SS2.p4.7.m7.1.1.2.2.cmml">x</mi><mo id="S2.SS2.p4.7.m7.1.1.2.1" xref="S2.SS2.p4.7.m7.1.1.2.1.cmml">^</mo></mover><mn id="S2.SS2.p4.7.m7.1.1.3" xref="S2.SS2.p4.7.m7.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.7.m7.1b"><apply id="S2.SS2.p4.7.m7.1.1.cmml" xref="S2.SS2.p4.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.7.m7.1.1.1.cmml" xref="S2.SS2.p4.7.m7.1.1">subscript</csymbol><apply id="S2.SS2.p4.7.m7.1.1.2.cmml" xref="S2.SS2.p4.7.m7.1.1.2"><ci id="S2.SS2.p4.7.m7.1.1.2.1.cmml" xref="S2.SS2.p4.7.m7.1.1.2.1">^</ci><ci id="S2.SS2.p4.7.m7.1.1.2.2.cmml" xref="S2.SS2.p4.7.m7.1.1.2.2">𝑥</ci></apply><cn id="S2.SS2.p4.7.m7.1.1.3.cmml" type="integer" xref="S2.SS2.p4.7.m7.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.7.m7.1c">{\hat{x}_{0}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.7.m7.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> is similar to Eq. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S2.E1" title="In 2.2 Inference: Lesion filling and generation ‣ 2 METHOD ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">1</span></a> with <math alttext="t=0" class="ltx_Math" display="inline" id="S2.SS2.p4.8.m8.1"><semantics id="S2.SS2.p4.8.m8.1a"><mrow id="S2.SS2.p4.8.m8.1.1" xref="S2.SS2.p4.8.m8.1.1.cmml"><mi id="S2.SS2.p4.8.m8.1.1.2" xref="S2.SS2.p4.8.m8.1.1.2.cmml">t</mi><mo id="S2.SS2.p4.8.m8.1.1.1" xref="S2.SS2.p4.8.m8.1.1.1.cmml">=</mo><mn id="S2.SS2.p4.8.m8.1.1.3" xref="S2.SS2.p4.8.m8.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.8.m8.1b"><apply id="S2.SS2.p4.8.m8.1.1.cmml" xref="S2.SS2.p4.8.m8.1.1"><eq id="S2.SS2.p4.8.m8.1.1.1.cmml" xref="S2.SS2.p4.8.m8.1.1.1"></eq><ci id="S2.SS2.p4.8.m8.1.1.2.cmml" xref="S2.SS2.p4.8.m8.1.1.2">𝑡</ci><cn id="S2.SS2.p4.8.m8.1.1.3.cmml" type="integer" xref="S2.SS2.p4.8.m8.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.8.m8.1c">t=0</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.8.m8.1d">italic_t = 0</annotation></semantics></math>: <math alttext="{\hat{x}_{0}}^{\prime}={\hat{x}_{0}}\cdot{M^{\text{repaint}}}+{x_{0}}\cdot({1}%
-{M^{\text{repaint}}})" class="ltx_Math" display="inline" id="S2.SS2.p4.9.m9.1"><semantics id="S2.SS2.p4.9.m9.1a"><mrow id="S2.SS2.p4.9.m9.1.1" xref="S2.SS2.p4.9.m9.1.1.cmml"><mmultiscripts id="S2.SS2.p4.9.m9.1.1.3" xref="S2.SS2.p4.9.m9.1.1.3.cmml"><mover accent="true" id="S2.SS2.p4.9.m9.1.1.3.2.2" xref="S2.SS2.p4.9.m9.1.1.3.2.2.cmml"><mi id="S2.SS2.p4.9.m9.1.1.3.2.2.2" xref="S2.SS2.p4.9.m9.1.1.3.2.2.2.cmml">x</mi><mo id="S2.SS2.p4.9.m9.1.1.3.2.2.1" xref="S2.SS2.p4.9.m9.1.1.3.2.2.1.cmml">^</mo></mover><mn id="S2.SS2.p4.9.m9.1.1.3.2.3" xref="S2.SS2.p4.9.m9.1.1.3.2.3.cmml">0</mn><mrow id="S2.SS2.p4.9.m9.1.1.3a" xref="S2.SS2.p4.9.m9.1.1.3.cmml"></mrow><mrow id="S2.SS2.p4.9.m9.1.1.3b" xref="S2.SS2.p4.9.m9.1.1.3.cmml"></mrow><mo id="S2.SS2.p4.9.m9.1.1.3.3" xref="S2.SS2.p4.9.m9.1.1.3.3.cmml">′</mo></mmultiscripts><mo id="S2.SS2.p4.9.m9.1.1.2" xref="S2.SS2.p4.9.m9.1.1.2.cmml">=</mo><mrow id="S2.SS2.p4.9.m9.1.1.1" xref="S2.SS2.p4.9.m9.1.1.1.cmml"><mrow id="S2.SS2.p4.9.m9.1.1.1.3" xref="S2.SS2.p4.9.m9.1.1.1.3.cmml"><msub id="S2.SS2.p4.9.m9.1.1.1.3.2" xref="S2.SS2.p4.9.m9.1.1.1.3.2.cmml"><mover accent="true" id="S2.SS2.p4.9.m9.1.1.1.3.2.2" xref="S2.SS2.p4.9.m9.1.1.1.3.2.2.cmml"><mi id="S2.SS2.p4.9.m9.1.1.1.3.2.2.2" xref="S2.SS2.p4.9.m9.1.1.1.3.2.2.2.cmml">x</mi><mo id="S2.SS2.p4.9.m9.1.1.1.3.2.2.1" xref="S2.SS2.p4.9.m9.1.1.1.3.2.2.1.cmml">^</mo></mover><mn id="S2.SS2.p4.9.m9.1.1.1.3.2.3" xref="S2.SS2.p4.9.m9.1.1.1.3.2.3.cmml">0</mn></msub><mo id="S2.SS2.p4.9.m9.1.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="S2.SS2.p4.9.m9.1.1.1.3.1.cmml">⋅</mo><msup id="S2.SS2.p4.9.m9.1.1.1.3.3" xref="S2.SS2.p4.9.m9.1.1.1.3.3.cmml"><mi id="S2.SS2.p4.9.m9.1.1.1.3.3.2" xref="S2.SS2.p4.9.m9.1.1.1.3.3.2.cmml">M</mi><mtext id="S2.SS2.p4.9.m9.1.1.1.3.3.3" xref="S2.SS2.p4.9.m9.1.1.1.3.3.3a.cmml">repaint</mtext></msup></mrow><mo id="S2.SS2.p4.9.m9.1.1.1.2" xref="S2.SS2.p4.9.m9.1.1.1.2.cmml">+</mo><mrow id="S2.SS2.p4.9.m9.1.1.1.1" xref="S2.SS2.p4.9.m9.1.1.1.1.cmml"><msub id="S2.SS2.p4.9.m9.1.1.1.1.3" xref="S2.SS2.p4.9.m9.1.1.1.1.3.cmml"><mi id="S2.SS2.p4.9.m9.1.1.1.1.3.2" xref="S2.SS2.p4.9.m9.1.1.1.1.3.2.cmml">x</mi><mn id="S2.SS2.p4.9.m9.1.1.1.1.3.3" xref="S2.SS2.p4.9.m9.1.1.1.1.3.3.cmml">0</mn></msub><mo id="S2.SS2.p4.9.m9.1.1.1.1.2" lspace="0.222em" rspace="0.222em" xref="S2.SS2.p4.9.m9.1.1.1.1.2.cmml">⋅</mo><mrow id="S2.SS2.p4.9.m9.1.1.1.1.1.1" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.cmml"><mo id="S2.SS2.p4.9.m9.1.1.1.1.1.1.2" stretchy="false" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.cmml"><mn id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.2" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.2.cmml">1</mn><mo id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.1" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.1.cmml">−</mo><msup id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.cmml"><mi id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.2" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.2.cmml">M</mi><mtext id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.3" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.3a.cmml">repaint</mtext></msup></mrow><mo id="S2.SS2.p4.9.m9.1.1.1.1.1.1.3" stretchy="false" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.9.m9.1b"><apply id="S2.SS2.p4.9.m9.1.1.cmml" xref="S2.SS2.p4.9.m9.1.1"><eq id="S2.SS2.p4.9.m9.1.1.2.cmml" xref="S2.SS2.p4.9.m9.1.1.2"></eq><apply id="S2.SS2.p4.9.m9.1.1.3.cmml" xref="S2.SS2.p4.9.m9.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p4.9.m9.1.1.3.1.cmml" xref="S2.SS2.p4.9.m9.1.1.3">superscript</csymbol><apply id="S2.SS2.p4.9.m9.1.1.3.2.cmml" xref="S2.SS2.p4.9.m9.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p4.9.m9.1.1.3.2.1.cmml" xref="S2.SS2.p4.9.m9.1.1.3">subscript</csymbol><apply id="S2.SS2.p4.9.m9.1.1.3.2.2.cmml" xref="S2.SS2.p4.9.m9.1.1.3.2.2"><ci id="S2.SS2.p4.9.m9.1.1.3.2.2.1.cmml" xref="S2.SS2.p4.9.m9.1.1.3.2.2.1">^</ci><ci id="S2.SS2.p4.9.m9.1.1.3.2.2.2.cmml" xref="S2.SS2.p4.9.m9.1.1.3.2.2.2">𝑥</ci></apply><cn id="S2.SS2.p4.9.m9.1.1.3.2.3.cmml" type="integer" xref="S2.SS2.p4.9.m9.1.1.3.2.3">0</cn></apply><ci id="S2.SS2.p4.9.m9.1.1.3.3.cmml" xref="S2.SS2.p4.9.m9.1.1.3.3">′</ci></apply><apply id="S2.SS2.p4.9.m9.1.1.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1"><plus id="S2.SS2.p4.9.m9.1.1.1.2.cmml" xref="S2.SS2.p4.9.m9.1.1.1.2"></plus><apply id="S2.SS2.p4.9.m9.1.1.1.3.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3"><ci id="S2.SS2.p4.9.m9.1.1.1.3.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.1">⋅</ci><apply id="S2.SS2.p4.9.m9.1.1.1.3.2.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.2"><csymbol cd="ambiguous" id="S2.SS2.p4.9.m9.1.1.1.3.2.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.2">subscript</csymbol><apply id="S2.SS2.p4.9.m9.1.1.1.3.2.2.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.2.2"><ci id="S2.SS2.p4.9.m9.1.1.1.3.2.2.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.2.2.1">^</ci><ci id="S2.SS2.p4.9.m9.1.1.1.3.2.2.2.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.2.2.2">𝑥</ci></apply><cn id="S2.SS2.p4.9.m9.1.1.1.3.2.3.cmml" type="integer" xref="S2.SS2.p4.9.m9.1.1.1.3.2.3">0</cn></apply><apply id="S2.SS2.p4.9.m9.1.1.1.3.3.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.3"><csymbol cd="ambiguous" id="S2.SS2.p4.9.m9.1.1.1.3.3.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.3">superscript</csymbol><ci id="S2.SS2.p4.9.m9.1.1.1.3.3.2.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.3.2">𝑀</ci><ci id="S2.SS2.p4.9.m9.1.1.1.3.3.3a.cmml" xref="S2.SS2.p4.9.m9.1.1.1.3.3.3"><mtext id="S2.SS2.p4.9.m9.1.1.1.3.3.3.cmml" mathsize="70%" xref="S2.SS2.p4.9.m9.1.1.1.3.3.3">repaint</mtext></ci></apply></apply><apply id="S2.SS2.p4.9.m9.1.1.1.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1"><ci id="S2.SS2.p4.9.m9.1.1.1.1.2.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.2">⋅</ci><apply id="S2.SS2.p4.9.m9.1.1.1.1.3.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p4.9.m9.1.1.1.1.3.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.3">subscript</csymbol><ci id="S2.SS2.p4.9.m9.1.1.1.1.3.2.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.3.2">𝑥</ci><cn id="S2.SS2.p4.9.m9.1.1.1.1.3.3.cmml" type="integer" xref="S2.SS2.p4.9.m9.1.1.1.1.3.3">0</cn></apply><apply id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1"><minus id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.1"></minus><cn id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.2.cmml" type="integer" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.2">1</cn><apply id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.1.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3">superscript</csymbol><ci id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.2.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.2">𝑀</ci><ci id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.3a.cmml" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.3"><mtext id="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.3.cmml" mathsize="70%" xref="S2.SS2.p4.9.m9.1.1.1.1.1.1.1.3.3">repaint</mtext></ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.9.m9.1c">{\hat{x}_{0}}^{\prime}={\hat{x}_{0}}\cdot{M^{\text{repaint}}}+{x_{0}}\cdot({1}%
-{M^{\text{repaint}}})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.9.m9.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT ′ end_POSTSUPERSCRIPT = over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ⋅ italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT + italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ⋅ ( 1 - italic_M start_POSTSUPERSCRIPT repaint end_POSTSUPERSCRIPT )</annotation></semantics></math>, where <math alttext="\hat{x}_{0}" class="ltx_Math" display="inline" id="S2.SS2.p4.10.m10.1"><semantics id="S2.SS2.p4.10.m10.1a"><msub id="S2.SS2.p4.10.m10.1.1" xref="S2.SS2.p4.10.m10.1.1.cmml"><mover accent="true" id="S2.SS2.p4.10.m10.1.1.2" xref="S2.SS2.p4.10.m10.1.1.2.cmml"><mi id="S2.SS2.p4.10.m10.1.1.2.2" xref="S2.SS2.p4.10.m10.1.1.2.2.cmml">x</mi><mo id="S2.SS2.p4.10.m10.1.1.2.1" xref="S2.SS2.p4.10.m10.1.1.2.1.cmml">^</mo></mover><mn id="S2.SS2.p4.10.m10.1.1.3" xref="S2.SS2.p4.10.m10.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.10.m10.1b"><apply id="S2.SS2.p4.10.m10.1.1.cmml" xref="S2.SS2.p4.10.m10.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.10.m10.1.1.1.cmml" xref="S2.SS2.p4.10.m10.1.1">subscript</csymbol><apply id="S2.SS2.p4.10.m10.1.1.2.cmml" xref="S2.SS2.p4.10.m10.1.1.2"><ci id="S2.SS2.p4.10.m10.1.1.2.1.cmml" xref="S2.SS2.p4.10.m10.1.1.2.1">^</ci><ci id="S2.SS2.p4.10.m10.1.1.2.2.cmml" xref="S2.SS2.p4.10.m10.1.1.2.2">𝑥</ci></apply><cn id="S2.SS2.p4.10.m10.1.1.3.cmml" type="integer" xref="S2.SS2.p4.10.m10.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.10.m10.1c">\hat{x}_{0}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.10.m10.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> on the right-hand side is also estimated from the reverse process at timestep <math alttext="t" class="ltx_Math" display="inline" id="S2.SS2.p4.11.m11.1"><semantics id="S2.SS2.p4.11.m11.1a"><mi id="S2.SS2.p4.11.m11.1.1" xref="S2.SS2.p4.11.m11.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.11.m11.1b"><ci id="S2.SS2.p4.11.m11.1.1.cmml" xref="S2.SS2.p4.11.m11.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.11.m11.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.11.m11.1d">italic_t</annotation></semantics></math>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p5">
<p class="ltx_p" id="S2.SS2.p5.4"><span class="ltx_text ltx_font_bold" id="S2.SS2.p5.4.1">Additional forward and reverse sampling:</span>
To further improve consistency between non-lesion and inpainted regions, the estimated <math alttext="{\hat{x}_{0}}" class="ltx_Math" display="inline" id="S2.SS2.p5.1.m1.1"><semantics id="S2.SS2.p5.1.m1.1a"><msub id="S2.SS2.p5.1.m1.1.1" xref="S2.SS2.p5.1.m1.1.1.cmml"><mover accent="true" id="S2.SS2.p5.1.m1.1.1.2" xref="S2.SS2.p5.1.m1.1.1.2.cmml"><mi id="S2.SS2.p5.1.m1.1.1.2.2" xref="S2.SS2.p5.1.m1.1.1.2.2.cmml">x</mi><mo id="S2.SS2.p5.1.m1.1.1.2.1" xref="S2.SS2.p5.1.m1.1.1.2.1.cmml">^</mo></mover><mn id="S2.SS2.p5.1.m1.1.1.3" xref="S2.SS2.p5.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.1.m1.1b"><apply id="S2.SS2.p5.1.m1.1.1.cmml" xref="S2.SS2.p5.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p5.1.m1.1.1.1.cmml" xref="S2.SS2.p5.1.m1.1.1">subscript</csymbol><apply id="S2.SS2.p5.1.m1.1.1.2.cmml" xref="S2.SS2.p5.1.m1.1.1.2"><ci id="S2.SS2.p5.1.m1.1.1.2.1.cmml" xref="S2.SS2.p5.1.m1.1.1.2.1">^</ci><ci id="S2.SS2.p5.1.m1.1.1.2.2.cmml" xref="S2.SS2.p5.1.m1.1.1.2.2">𝑥</ci></apply><cn id="S2.SS2.p5.1.m1.1.1.3.cmml" type="integer" xref="S2.SS2.p5.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.1.m1.1c">{\hat{x}_{0}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.1.m1.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> after DDIM reverse sampling undergoes additional forward diffusion and reverse sampling (using the DDIM scheme) process:
<math alttext="{\hat{x}_{0}}\xrightarrow{\text{Diffusion}}{\hat{x}}_{\tau_{I}}\xrightarrow{%
\text{Reverse}}{\hat{x}_{0}}" class="ltx_Math" display="inline" id="S2.SS2.p5.2.m2.1"><semantics id="S2.SS2.p5.2.m2.1a"><mrow id="S2.SS2.p5.2.m2.1.1" xref="S2.SS2.p5.2.m2.1.1.cmml"><msub id="S2.SS2.p5.2.m2.1.1.2" xref="S2.SS2.p5.2.m2.1.1.2.cmml"><mover accent="true" id="S2.SS2.p5.2.m2.1.1.2.2" xref="S2.SS2.p5.2.m2.1.1.2.2.cmml"><mi id="S2.SS2.p5.2.m2.1.1.2.2.2" xref="S2.SS2.p5.2.m2.1.1.2.2.2.cmml">x</mi><mo id="S2.SS2.p5.2.m2.1.1.2.2.1" xref="S2.SS2.p5.2.m2.1.1.2.2.1.cmml">^</mo></mover><mn id="S2.SS2.p5.2.m2.1.1.2.3" xref="S2.SS2.p5.2.m2.1.1.2.3.cmml">0</mn></msub><mover accent="true" id="S2.SS2.p5.2.m2.1.1.3" xref="S2.SS2.p5.2.m2.1.1.3.cmml"><mo id="S2.SS2.p5.2.m2.1.1.3.2" stretchy="false" xref="S2.SS2.p5.2.m2.1.1.3.2.cmml">→</mo><mtext id="S2.SS2.p5.2.m2.1.1.3.1" xref="S2.SS2.p5.2.m2.1.1.3.1a.cmml">Diffusion</mtext></mover><msub id="S2.SS2.p5.2.m2.1.1.4" xref="S2.SS2.p5.2.m2.1.1.4.cmml"><mover accent="true" id="S2.SS2.p5.2.m2.1.1.4.2" xref="S2.SS2.p5.2.m2.1.1.4.2.cmml"><mi id="S2.SS2.p5.2.m2.1.1.4.2.2" xref="S2.SS2.p5.2.m2.1.1.4.2.2.cmml">x</mi><mo id="S2.SS2.p5.2.m2.1.1.4.2.1" xref="S2.SS2.p5.2.m2.1.1.4.2.1.cmml">^</mo></mover><msub id="S2.SS2.p5.2.m2.1.1.4.3" xref="S2.SS2.p5.2.m2.1.1.4.3.cmml"><mi id="S2.SS2.p5.2.m2.1.1.4.3.2" xref="S2.SS2.p5.2.m2.1.1.4.3.2.cmml">τ</mi><mi id="S2.SS2.p5.2.m2.1.1.4.3.3" xref="S2.SS2.p5.2.m2.1.1.4.3.3.cmml">I</mi></msub></msub><mover accent="true" id="S2.SS2.p5.2.m2.1.1.5" xref="S2.SS2.p5.2.m2.1.1.5.cmml"><mo id="S2.SS2.p5.2.m2.1.1.5.2" stretchy="false" xref="S2.SS2.p5.2.m2.1.1.5.2.cmml">→</mo><mtext id="S2.SS2.p5.2.m2.1.1.5.1" xref="S2.SS2.p5.2.m2.1.1.5.1a.cmml">Reverse</mtext></mover><msub id="S2.SS2.p5.2.m2.1.1.6" xref="S2.SS2.p5.2.m2.1.1.6.cmml"><mover accent="true" id="S2.SS2.p5.2.m2.1.1.6.2" xref="S2.SS2.p5.2.m2.1.1.6.2.cmml"><mi id="S2.SS2.p5.2.m2.1.1.6.2.2" xref="S2.SS2.p5.2.m2.1.1.6.2.2.cmml">x</mi><mo id="S2.SS2.p5.2.m2.1.1.6.2.1" xref="S2.SS2.p5.2.m2.1.1.6.2.1.cmml">^</mo></mover><mn id="S2.SS2.p5.2.m2.1.1.6.3" xref="S2.SS2.p5.2.m2.1.1.6.3.cmml">0</mn></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.2.m2.1b"><apply id="S2.SS2.p5.2.m2.1.1.cmml" xref="S2.SS2.p5.2.m2.1.1"><and id="S2.SS2.p5.2.m2.1.1a.cmml" xref="S2.SS2.p5.2.m2.1.1"></and><apply id="S2.SS2.p5.2.m2.1.1b.cmml" xref="S2.SS2.p5.2.m2.1.1"><apply id="S2.SS2.p5.2.m2.1.1.3.cmml" xref="S2.SS2.p5.2.m2.1.1.3"><ci id="S2.SS2.p5.2.m2.1.1.3.1a.cmml" xref="S2.SS2.p5.2.m2.1.1.3.1"><mtext id="S2.SS2.p5.2.m2.1.1.3.1.cmml" xref="S2.SS2.p5.2.m2.1.1.3.1">Diffusion</mtext></ci><ci id="S2.SS2.p5.2.m2.1.1.3.2.cmml" xref="S2.SS2.p5.2.m2.1.1.3.2">→</ci></apply><apply id="S2.SS2.p5.2.m2.1.1.2.cmml" xref="S2.SS2.p5.2.m2.1.1.2"><csymbol cd="ambiguous" id="S2.SS2.p5.2.m2.1.1.2.1.cmml" xref="S2.SS2.p5.2.m2.1.1.2">subscript</csymbol><apply id="S2.SS2.p5.2.m2.1.1.2.2.cmml" xref="S2.SS2.p5.2.m2.1.1.2.2"><ci id="S2.SS2.p5.2.m2.1.1.2.2.1.cmml" xref="S2.SS2.p5.2.m2.1.1.2.2.1">^</ci><ci id="S2.SS2.p5.2.m2.1.1.2.2.2.cmml" xref="S2.SS2.p5.2.m2.1.1.2.2.2">𝑥</ci></apply><cn id="S2.SS2.p5.2.m2.1.1.2.3.cmml" type="integer" xref="S2.SS2.p5.2.m2.1.1.2.3">0</cn></apply><apply id="S2.SS2.p5.2.m2.1.1.4.cmml" xref="S2.SS2.p5.2.m2.1.1.4"><csymbol cd="ambiguous" id="S2.SS2.p5.2.m2.1.1.4.1.cmml" xref="S2.SS2.p5.2.m2.1.1.4">subscript</csymbol><apply id="S2.SS2.p5.2.m2.1.1.4.2.cmml" xref="S2.SS2.p5.2.m2.1.1.4.2"><ci id="S2.SS2.p5.2.m2.1.1.4.2.1.cmml" xref="S2.SS2.p5.2.m2.1.1.4.2.1">^</ci><ci id="S2.SS2.p5.2.m2.1.1.4.2.2.cmml" xref="S2.SS2.p5.2.m2.1.1.4.2.2">𝑥</ci></apply><apply id="S2.SS2.p5.2.m2.1.1.4.3.cmml" xref="S2.SS2.p5.2.m2.1.1.4.3"><csymbol cd="ambiguous" id="S2.SS2.p5.2.m2.1.1.4.3.1.cmml" xref="S2.SS2.p5.2.m2.1.1.4.3">subscript</csymbol><ci id="S2.SS2.p5.2.m2.1.1.4.3.2.cmml" xref="S2.SS2.p5.2.m2.1.1.4.3.2">𝜏</ci><ci id="S2.SS2.p5.2.m2.1.1.4.3.3.cmml" xref="S2.SS2.p5.2.m2.1.1.4.3.3">𝐼</ci></apply></apply></apply><apply id="S2.SS2.p5.2.m2.1.1c.cmml" xref="S2.SS2.p5.2.m2.1.1"><apply id="S2.SS2.p5.2.m2.1.1.5.cmml" xref="S2.SS2.p5.2.m2.1.1.5"><ci id="S2.SS2.p5.2.m2.1.1.5.1a.cmml" xref="S2.SS2.p5.2.m2.1.1.5.1"><mtext id="S2.SS2.p5.2.m2.1.1.5.1.cmml" xref="S2.SS2.p5.2.m2.1.1.5.1">Reverse</mtext></ci><ci id="S2.SS2.p5.2.m2.1.1.5.2.cmml" xref="S2.SS2.p5.2.m2.1.1.5.2">→</ci></apply><share href="https://arxiv.org/html/2410.05027v1#S2.SS2.p5.2.m2.1.1.4.cmml" id="S2.SS2.p5.2.m2.1.1d.cmml" xref="S2.SS2.p5.2.m2.1.1"></share><apply id="S2.SS2.p5.2.m2.1.1.6.cmml" xref="S2.SS2.p5.2.m2.1.1.6"><csymbol cd="ambiguous" id="S2.SS2.p5.2.m2.1.1.6.1.cmml" xref="S2.SS2.p5.2.m2.1.1.6">subscript</csymbol><apply id="S2.SS2.p5.2.m2.1.1.6.2.cmml" xref="S2.SS2.p5.2.m2.1.1.6.2"><ci id="S2.SS2.p5.2.m2.1.1.6.2.1.cmml" xref="S2.SS2.p5.2.m2.1.1.6.2.1">^</ci><ci id="S2.SS2.p5.2.m2.1.1.6.2.2.cmml" xref="S2.SS2.p5.2.m2.1.1.6.2.2">𝑥</ci></apply><cn id="S2.SS2.p5.2.m2.1.1.6.3.cmml" type="integer" xref="S2.SS2.p5.2.m2.1.1.6.3">0</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.2.m2.1c">{\hat{x}_{0}}\xrightarrow{\text{Diffusion}}{\hat{x}}_{\tau_{I}}\xrightarrow{%
\text{Reverse}}{\hat{x}_{0}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.2.m2.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT start_ARROW overDiffusion → end_ARROW over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_τ start_POSTSUBSCRIPT italic_I end_POSTSUBSCRIPT end_POSTSUBSCRIPT start_ARROW overReverse → end_ARROW over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>
with <math alttext="\tau_{I}\in[\tau_{1},...\tau_{S}]" class="ltx_Math" display="inline" id="S2.SS2.p5.3.m3.2"><semantics id="S2.SS2.p5.3.m3.2a"><mrow id="S2.SS2.p5.3.m3.2.2" xref="S2.SS2.p5.3.m3.2.2.cmml"><msub id="S2.SS2.p5.3.m3.2.2.4" xref="S2.SS2.p5.3.m3.2.2.4.cmml"><mi id="S2.SS2.p5.3.m3.2.2.4.2" xref="S2.SS2.p5.3.m3.2.2.4.2.cmml">τ</mi><mi id="S2.SS2.p5.3.m3.2.2.4.3" xref="S2.SS2.p5.3.m3.2.2.4.3.cmml">I</mi></msub><mo id="S2.SS2.p5.3.m3.2.2.3" xref="S2.SS2.p5.3.m3.2.2.3.cmml">∈</mo><mrow id="S2.SS2.p5.3.m3.2.2.2.2" xref="S2.SS2.p5.3.m3.2.2.2.3.cmml"><mo id="S2.SS2.p5.3.m3.2.2.2.2.3" stretchy="false" xref="S2.SS2.p5.3.m3.2.2.2.3.cmml">[</mo><msub id="S2.SS2.p5.3.m3.1.1.1.1.1" xref="S2.SS2.p5.3.m3.1.1.1.1.1.cmml"><mi id="S2.SS2.p5.3.m3.1.1.1.1.1.2" xref="S2.SS2.p5.3.m3.1.1.1.1.1.2.cmml">τ</mi><mn id="S2.SS2.p5.3.m3.1.1.1.1.1.3" xref="S2.SS2.p5.3.m3.1.1.1.1.1.3.cmml">1</mn></msub><mo id="S2.SS2.p5.3.m3.2.2.2.2.4" xref="S2.SS2.p5.3.m3.2.2.2.3.cmml">,</mo><mrow id="S2.SS2.p5.3.m3.2.2.2.2.2" xref="S2.SS2.p5.3.m3.2.2.2.2.2.cmml"><mi id="S2.SS2.p5.3.m3.2.2.2.2.2.2" mathvariant="normal" xref="S2.SS2.p5.3.m3.2.2.2.2.2.2.cmml">…</mi><mo id="S2.SS2.p5.3.m3.2.2.2.2.2.1" xref="S2.SS2.p5.3.m3.2.2.2.2.2.1.cmml">⁢</mo><msub id="S2.SS2.p5.3.m3.2.2.2.2.2.3" xref="S2.SS2.p5.3.m3.2.2.2.2.2.3.cmml"><mi id="S2.SS2.p5.3.m3.2.2.2.2.2.3.2" xref="S2.SS2.p5.3.m3.2.2.2.2.2.3.2.cmml">τ</mi><mi id="S2.SS2.p5.3.m3.2.2.2.2.2.3.3" xref="S2.SS2.p5.3.m3.2.2.2.2.2.3.3.cmml">S</mi></msub></mrow><mo id="S2.SS2.p5.3.m3.2.2.2.2.5" stretchy="false" xref="S2.SS2.p5.3.m3.2.2.2.3.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.3.m3.2b"><apply id="S2.SS2.p5.3.m3.2.2.cmml" xref="S2.SS2.p5.3.m3.2.2"><in id="S2.SS2.p5.3.m3.2.2.3.cmml" xref="S2.SS2.p5.3.m3.2.2.3"></in><apply id="S2.SS2.p5.3.m3.2.2.4.cmml" xref="S2.SS2.p5.3.m3.2.2.4"><csymbol cd="ambiguous" id="S2.SS2.p5.3.m3.2.2.4.1.cmml" xref="S2.SS2.p5.3.m3.2.2.4">subscript</csymbol><ci id="S2.SS2.p5.3.m3.2.2.4.2.cmml" xref="S2.SS2.p5.3.m3.2.2.4.2">𝜏</ci><ci id="S2.SS2.p5.3.m3.2.2.4.3.cmml" xref="S2.SS2.p5.3.m3.2.2.4.3">𝐼</ci></apply><interval closure="closed" id="S2.SS2.p5.3.m3.2.2.2.3.cmml" xref="S2.SS2.p5.3.m3.2.2.2.2"><apply id="S2.SS2.p5.3.m3.1.1.1.1.1.cmml" xref="S2.SS2.p5.3.m3.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p5.3.m3.1.1.1.1.1.1.cmml" xref="S2.SS2.p5.3.m3.1.1.1.1.1">subscript</csymbol><ci id="S2.SS2.p5.3.m3.1.1.1.1.1.2.cmml" xref="S2.SS2.p5.3.m3.1.1.1.1.1.2">𝜏</ci><cn id="S2.SS2.p5.3.m3.1.1.1.1.1.3.cmml" type="integer" xref="S2.SS2.p5.3.m3.1.1.1.1.1.3">1</cn></apply><apply id="S2.SS2.p5.3.m3.2.2.2.2.2.cmml" xref="S2.SS2.p5.3.m3.2.2.2.2.2"><times id="S2.SS2.p5.3.m3.2.2.2.2.2.1.cmml" xref="S2.SS2.p5.3.m3.2.2.2.2.2.1"></times><ci id="S2.SS2.p5.3.m3.2.2.2.2.2.2.cmml" xref="S2.SS2.p5.3.m3.2.2.2.2.2.2">…</ci><apply id="S2.SS2.p5.3.m3.2.2.2.2.2.3.cmml" xref="S2.SS2.p5.3.m3.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S2.SS2.p5.3.m3.2.2.2.2.2.3.1.cmml" xref="S2.SS2.p5.3.m3.2.2.2.2.2.3">subscript</csymbol><ci id="S2.SS2.p5.3.m3.2.2.2.2.2.3.2.cmml" xref="S2.SS2.p5.3.m3.2.2.2.2.2.3.2">𝜏</ci><ci id="S2.SS2.p5.3.m3.2.2.2.2.2.3.3.cmml" xref="S2.SS2.p5.3.m3.2.2.2.2.2.3.3">𝑆</ci></apply></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.3.m3.2c">\tau_{I}\in[\tau_{1},...\tau_{S}]</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.3.m3.2d">italic_τ start_POSTSUBSCRIPT italic_I end_POSTSUBSCRIPT ∈ [ italic_τ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … italic_τ start_POSTSUBSCRIPT italic_S end_POSTSUBSCRIPT ]</annotation></semantics></math> as a small timestep used to inject a small amount of Gaussian noise into <math alttext="{\hat{x}_{0}}" class="ltx_Math" display="inline" id="S2.SS2.p5.4.m4.1"><semantics id="S2.SS2.p5.4.m4.1a"><msub id="S2.SS2.p5.4.m4.1.1" xref="S2.SS2.p5.4.m4.1.1.cmml"><mover accent="true" id="S2.SS2.p5.4.m4.1.1.2" xref="S2.SS2.p5.4.m4.1.1.2.cmml"><mi id="S2.SS2.p5.4.m4.1.1.2.2" xref="S2.SS2.p5.4.m4.1.1.2.2.cmml">x</mi><mo id="S2.SS2.p5.4.m4.1.1.2.1" xref="S2.SS2.p5.4.m4.1.1.2.1.cmml">^</mo></mover><mn id="S2.SS2.p5.4.m4.1.1.3" xref="S2.SS2.p5.4.m4.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.4.m4.1b"><apply id="S2.SS2.p5.4.m4.1.1.cmml" xref="S2.SS2.p5.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p5.4.m4.1.1.1.cmml" xref="S2.SS2.p5.4.m4.1.1">subscript</csymbol><apply id="S2.SS2.p5.4.m4.1.1.2.cmml" xref="S2.SS2.p5.4.m4.1.1.2"><ci id="S2.SS2.p5.4.m4.1.1.2.1.cmml" xref="S2.SS2.p5.4.m4.1.1.2.1">^</ci><ci id="S2.SS2.p5.4.m4.1.1.2.2.cmml" xref="S2.SS2.p5.4.m4.1.1.2.2">𝑥</ci></apply><cn id="S2.SS2.p5.4.m4.1.1.3.cmml" type="integer" xref="S2.SS2.p5.4.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.4.m4.1c">{\hat{x}_{0}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.4.m4.1d">over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> for additional reverse sampling.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>EXPERIMENTS</h2>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Setup</h3>
<div class="ltx_para ltx_noindent" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1"><span class="ltx_text ltx_font_bold" id="S3.SS1.p1.1.1">Dataset:</span>
The training dataset includes T1w and FLAIR images of 66 MS subjects from 8 private sites and their corresponding lesion masks, resulting in 26,800 and 26,000 2D slices of T1w and FLAIR images, respectively, in axial, coronal, or sagittal planes.
The test dataset for lesion filling includes T1w and FLAIR images along with the corresponding lesion masks of 15 MS subjects from a different site.
The test dataset for lesion synthesis includes T1w and FLAIR images of 10 healthy subjects and lesion masks of 10 MS subjects.
Each 3D lesion mask was intersected with the corresponding white matter mask of a healthy subject to generate plausible lesion masks for lesion synthesis.
All MS lesion masks were generated using SELF <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib5" title="">5</a>]</cite>, which was trained on both the 2015 ISBI challenge training data (21 longitudinal multi-contrast images from 5 subjects) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib6" title="">6</a>]</cite> and in-house data with manual lesion delineation (20 multi-contrast images from 10 subjects and 2 sites).</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.3"><span class="ltx_text ltx_font_bold" id="S3.SS1.p2.3.1">Training and Inference:</span>
The reverse process is modeled using a time-embedded U-Net backbone with <math alttext="T=1000" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.1"><semantics id="S3.SS1.p2.1.m1.1a"><mrow id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml"><mi id="S3.SS1.p2.1.m1.1.1.2" xref="S3.SS1.p2.1.m1.1.1.2.cmml">T</mi><mo id="S3.SS1.p2.1.m1.1.1.1" xref="S3.SS1.p2.1.m1.1.1.1.cmml">=</mo><mn id="S3.SS1.p2.1.m1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.3.cmml">1000</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><apply id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1"><eq id="S3.SS1.p2.1.m1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1"></eq><ci id="S3.SS1.p2.1.m1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.2">𝑇</ci><cn id="S3.SS1.p2.1.m1.1.1.3.cmml" type="integer" xref="S3.SS1.p2.1.m1.1.1.3">1000</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">T=1000</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.1d">italic_T = 1000</annotation></semantics></math> time steps.
A cosine noise schedule of the forward process was applied for improved image quality <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib7" title="">7</a>]</cite>.
Training used the Adam optimizer with an initial learning rate of <math alttext="3\times 10^{-4}" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.1"><semantics id="S3.SS1.p2.2.m2.1a"><mrow id="S3.SS1.p2.2.m2.1.1" xref="S3.SS1.p2.2.m2.1.1.cmml"><mn id="S3.SS1.p2.2.m2.1.1.2" xref="S3.SS1.p2.2.m2.1.1.2.cmml">3</mn><mo id="S3.SS1.p2.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS1.p2.2.m2.1.1.1.cmml">×</mo><msup id="S3.SS1.p2.2.m2.1.1.3" xref="S3.SS1.p2.2.m2.1.1.3.cmml"><mn id="S3.SS1.p2.2.m2.1.1.3.2" xref="S3.SS1.p2.2.m2.1.1.3.2.cmml">10</mn><mrow id="S3.SS1.p2.2.m2.1.1.3.3" xref="S3.SS1.p2.2.m2.1.1.3.3.cmml"><mo id="S3.SS1.p2.2.m2.1.1.3.3a" xref="S3.SS1.p2.2.m2.1.1.3.3.cmml">−</mo><mn id="S3.SS1.p2.2.m2.1.1.3.3.2" xref="S3.SS1.p2.2.m2.1.1.3.3.2.cmml">4</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.1b"><apply id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1"><times id="S3.SS1.p2.2.m2.1.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1.1"></times><cn id="S3.SS1.p2.2.m2.1.1.2.cmml" type="integer" xref="S3.SS1.p2.2.m2.1.1.2">3</cn><apply id="S3.SS1.p2.2.m2.1.1.3.cmml" xref="S3.SS1.p2.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p2.2.m2.1.1.3.1.cmml" xref="S3.SS1.p2.2.m2.1.1.3">superscript</csymbol><cn id="S3.SS1.p2.2.m2.1.1.3.2.cmml" type="integer" xref="S3.SS1.p2.2.m2.1.1.3.2">10</cn><apply id="S3.SS1.p2.2.m2.1.1.3.3.cmml" xref="S3.SS1.p2.2.m2.1.1.3.3"><minus id="S3.SS1.p2.2.m2.1.1.3.3.1.cmml" xref="S3.SS1.p2.2.m2.1.1.3.3"></minus><cn id="S3.SS1.p2.2.m2.1.1.3.3.2.cmml" type="integer" xref="S3.SS1.p2.2.m2.1.1.3.3.2">4</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.1c">3\times 10^{-4}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.1d">3 × 10 start_POSTSUPERSCRIPT - 4 end_POSTSUPERSCRIPT</annotation></semantics></math>, a batch size of 32 randomly selected from 2D slices in the three cardinal planes, and was conducted over 300 epochs.
DDIM inference used a subset of the original time steps, with every 10<math alttext="{}^{\text{th}}" class="ltx_Math" display="inline" id="S3.SS1.p2.3.m3.1"><semantics id="S3.SS1.p2.3.m3.1a"><msup id="S3.SS1.p2.3.m3.1.1" xref="S3.SS1.p2.3.m3.1.1.cmml"><mi id="S3.SS1.p2.3.m3.1.1a" xref="S3.SS1.p2.3.m3.1.1.cmml"></mi><mtext id="S3.SS1.p2.3.m3.1.1.1" xref="S3.SS1.p2.3.m3.1.1.1a.cmml">th</mtext></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m3.1b"><apply id="S3.SS1.p2.3.m3.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1"><ci id="S3.SS1.p2.3.m3.1.1.1a.cmml" xref="S3.SS1.p2.3.m3.1.1.1"><mtext id="S3.SS1.p2.3.m3.1.1.1.cmml" mathsize="70%" xref="S3.SS1.p2.3.m3.1.1.1">th</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m3.1c">{}^{\text{th}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.3.m3.1d">start_FLOATSUPERSCRIPT th end_FLOATSUPERSCRIPT</annotation></semantics></math> step included.
Lesion repainting was repeated twice at each timestep.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Results</h3>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="369" id="S3.F2.g1" src="extracted/5907274/Figures/Figure2_3.png" width="449"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span><span class="ltx_text ltx_font_bold" id="S3.F2.8.1">(a)-(c): Lesion filling results.</span> <span class="ltx_text ltx_font_bold" id="S3.F2.9.2">(a1-3)</span>: Original T1w, FLAIR, and lesion mask. <span class="ltx_text ltx_font_bold" id="S3.F2.10.3">(b1-3)</span>: Lesion filling of T1w and FLAIR by FSL and the corresponding SLANT brain parcellation on lesion-filled T1w image. <span class="ltx_text ltx_font_bold" id="S3.F2.11.4">(c1-3)</span>: Lesion filling results using the proposed method and the corresponding brain parcellation.
<span class="ltx_text ltx_font_bold" id="S3.F2.12.5">(d)-(e): Lesion Synthesis results.</span> <span class="ltx_text ltx_font_bold" id="S3.F2.13.6">(d1-3)</span>: T1w and FLAIR images from a healthy subject, and the binary lesion mask for the lesion synthesis task. <span class="ltx_text ltx_font_bold" id="S3.F2.14.7">(e1-3)</span>: Synthetic T1w and FLAIR images with lesions, and the corresponding lesion segmentation mask.
</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.9"><span class="ltx_text ltx_font_bold" id="S3.SS2.p1.9.1">Lesion Filling:</span>
In Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.F2" title="Figure 2 ‣ 3.2 Results ‣ 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">2</span></a>, (a) shows T1w, FLAIR, and lesion mask images of a representative MS subject.
(b) shows FSL lesion filling <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib8" title="">8</a>]</cite> results on the T1w, FLAIR, and the SLANT <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib9" title="">9</a>]</cite> brain parcellation map derived from the corresponding lesion-filled T1w image, while (c) shows results for our proposed DDPM lesion filling method.
The red arrows, in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.F2" title="Figure 2 ‣ 3.2 Results ‣ 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">2</span></a>, highlight the regions of lesion infilling.
Mean Dice similarity scores (DSCs) with standard deviations for regions of interest (ROIs) between SLANT using FSL and the proposed filling methods across 15 test subjects were as follows: Ventricles: 0.932 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.1.m1.1"><semantics id="S3.SS2.p1.1.m1.1a"><mo id="S3.SS2.p1.1.m1.1.1" xref="S3.SS2.p1.1.m1.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.1.m1.1b"><csymbol cd="latexml" id="S3.SS2.p1.1.m1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.1.m1.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.1.m1.1d">±</annotation></semantics></math> 0.144, Cerebral White Matter: 0.915 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.2.m2.1"><semantics id="S3.SS2.p1.2.m2.1a"><mo id="S3.SS2.p1.2.m2.1.1" xref="S3.SS2.p1.2.m2.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.2.m2.1b"><csymbol cd="latexml" id="S3.SS2.p1.2.m2.1.1.cmml" xref="S3.SS2.p1.2.m2.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.2.m2.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.2.m2.1d">±</annotation></semantics></math> 0.174, Brainstem: 0.971 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.3.m3.1"><semantics id="S3.SS2.p1.3.m3.1a"><mo id="S3.SS2.p1.3.m3.1.1" xref="S3.SS2.p1.3.m3.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.3.m3.1b"><csymbol cd="latexml" id="S3.SS2.p1.3.m3.1.1.cmml" xref="S3.SS2.p1.3.m3.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.3.m3.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.3.m3.1d">±</annotation></semantics></math> 0.053, Caudate: 0.864 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.4.m4.1"><semantics id="S3.SS2.p1.4.m4.1a"><mo id="S3.SS2.p1.4.m4.1.1" xref="S3.SS2.p1.4.m4.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.4.m4.1b"><csymbol cd="latexml" id="S3.SS2.p1.4.m4.1.1.cmml" xref="S3.SS2.p1.4.m4.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.4.m4.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.4.m4.1d">±</annotation></semantics></math> 0.301, Cerebellar Gray Matter: 0.949 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.5.m5.1"><semantics id="S3.SS2.p1.5.m5.1a"><mo id="S3.SS2.p1.5.m5.1.1" xref="S3.SS2.p1.5.m5.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.5.m5.1b"><csymbol cd="latexml" id="S3.SS2.p1.5.m5.1.1.cmml" xref="S3.SS2.p1.5.m5.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.5.m5.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.5.m5.1d">±</annotation></semantics></math> 0.102, Cerebellar White Matter: 0.901 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.6.m6.1"><semantics id="S3.SS2.p1.6.m6.1a"><mo id="S3.SS2.p1.6.m6.1.1" xref="S3.SS2.p1.6.m6.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.6.m6.1b"><csymbol cd="latexml" id="S3.SS2.p1.6.m6.1.1.cmml" xref="S3.SS2.p1.6.m6.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.6.m6.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.6.m6.1d">±</annotation></semantics></math> 0.213, Putamen: 0.854 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.7.m7.1"><semantics id="S3.SS2.p1.7.m7.1a"><mo id="S3.SS2.p1.7.m7.1.1" xref="S3.SS2.p1.7.m7.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.7.m7.1b"><csymbol cd="latexml" id="S3.SS2.p1.7.m7.1.1.cmml" xref="S3.SS2.p1.7.m7.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.7.m7.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.7.m7.1d">±</annotation></semantics></math> 0.334, Thalamus: 0.936 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.8.m8.1"><semantics id="S3.SS2.p1.8.m8.1a"><mo id="S3.SS2.p1.8.m8.1.1" xref="S3.SS2.p1.8.m8.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.8.m8.1b"><csymbol cd="latexml" id="S3.SS2.p1.8.m8.1.1.cmml" xref="S3.SS2.p1.8.m8.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.8.m8.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.8.m8.1d">±</annotation></semantics></math> 0.161, and Cerebrum Gray Matter: 0.908 <math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p1.9.m9.1"><semantics id="S3.SS2.p1.9.m9.1a"><mo id="S3.SS2.p1.9.m9.1.1" xref="S3.SS2.p1.9.m9.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.9.m9.1b"><csymbol cd="latexml" id="S3.SS2.p1.9.m9.1.1.cmml" xref="S3.SS2.p1.9.m9.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.9.m9.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.9.m9.1d">±</annotation></semantics></math> 0.188.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1"><span class="ltx_text ltx_font_bold" id="S3.SS2.p2.1.1">Lesion Synthesis:</span>
In Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.F2" title="Figure 2 ‣ 3.2 Results ‣ 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">2</span></a>, (d) shows the T1w and FLAIR images of a representative healthy subject, along with the corresponding binary mask used for lesion synthesis.
(e) shows the T1w and FLAIR images with synthetic lesions, and the corresponding SELF lesion segmentation mask after applying SELF on the synthetic T1w and FLAIR pair.
Realistic lesions were generated with white matter hypo-intensity on the T1w image and hyper-intensity on the FLAIR image, see Figs. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.F2" title="Figure 2 ‣ 3.2 Results ‣ 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">2</span></a>(e1) and (e2) respectively.
Lesion segmentation (Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.F2" title="Figure 2 ‣ 3.2 Results ‣ 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">2</span></a>(e3)) from the synthetic T1w and FLAIR images shows a generally consistent lesion mask, compared to the original lesion mask used for synthesis, see Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.F2" title="Figure 2 ‣ 3.2 Results ‣ 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">2</span></a>(d3).
A mean DSC of 0.832 (<math alttext="\pm" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><mo id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><csymbol cd="latexml" id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">\pm</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">±</annotation></semantics></math> 0.049) across 10 test subjects was achieved between the segmented lesion mask from synthetic images and the original lesion mask used for synthesis.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>DISCUSSION AND CONCLUSION</h2>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">In this work, we present preliminary results of bi-directional lesion filling and synthesis using a single trained DDPM model with DDIM-based inference acceleration.
In the lesion filling task, DDIM generates regions filled with normal appearing white matter tissue contrast (red arrows in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.F2" title="Figure 2 ‣ 3.2 Results ‣ 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">2</span></a>(c)), which can be attributed to the DDPM training process using reliable lesion masks that correspond to lesion regions only.
As a result, after DDPM training, the non-lesion regions will be filled with normal appearing white matter resembling that of the training dataset.
For the downstream whole-brain parcellation, some inconsistencies between the SLANT results of FSL lesion filling and our lesion filling were observed, this is an area for further analysis.
In the lesion synthesis task, DDIM generates realistic lesions in both T1w and FLAIR images (Figs. <a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#S3.F2" title="Figure 2 ‣ 3.2 Results ‣ 3 EXPERIMENTS ‣ Bi-Directional MS Lesion Filling and Synthesis Using Denoising Diffusion Implicit Model-based Lesion Repainting"><span class="ltx_text ltx_ref_tag">2</span></a>(e1) and (e2)) with high DSCs after lesion segmentation on the synthetic images.
Such synthetic images with ground truth lesion masks could be useful for training more domain-generalizable lesion segmentation models <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.05027v1#bib.bib10" title="">10</a>]</cite>.</p>
</div>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>PLANNED WORK</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">The full paper will include further validation of lesion filling accuracy and additional exploration of using synthetic multi-contrast MR images with lesions to augment training datasets for lesion segmentation models.</p>
</div>
<div class="ltx_para" id="S5.p2">
<p class="ltx_p ltx_align_center" id="S5.p2.1"><span class="ltx_text ltx_font_bold" id="S5.p2.1.1">This work has not been submitted for publication or presentation elsewhere.</span></p>
</div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Acknowledgments</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">This work was partially supported by the National Science Foundation Graduate Research Fellowship under Grant No. DGE-1746891 (Remedios).
Development is partially supported by CDMRP W81XWH2010912 (Prince), NIH R01 CA253923 (Landman), NIH R01 CA275015 (Landman), the NMSS grant RG-1507-05243 (Pham) and PCORI grant MS-1610-37115 (Newsome and Mowry).
The statements in this publication are solely the responsibility of the authors and do not necessarily represent the views of PCORI, its Board of Governors or Methodology Committee.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Haider, L., Zrzavy, T., Hametner, S., Höftberger, R., Bagnato, F., Grabner, G., Trattnig, S., Pfeifenbring, S., Brück, W., and Lassmann, H., “The topograpy of demyelination and neurodegeneration in the multiple sclerosis brain,” <span class="ltx_text ltx_font_italic" id="bib.bib1.1.1">Brain</span> <span class="ltx_text ltx_font_bold" id="bib.bib1.2.2">139</span>(3), 807–815 (2016).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Ho, J. et al., “Denoising diffusion probabilistic models,” <span class="ltx_text ltx_font_italic" id="bib.bib2.1.1">Advances in Neural Information Processing Systems</span> <span class="ltx_text ltx_font_bold" id="bib.bib2.2.2">33</span>, 6840–6851 (2020).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Lugmayr, A. et al., “Repaint: Inpainting using denoising diffusion probabilistic models,” in [<span class="ltx_text ltx_font_italic" id="bib.bib3.1.1">Proceedings of the IEEE/CVF conference on computer vision and pattern recognition</span> ], 11461–11471 (2022).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Song, J. et al., “Denoising diffusion implicit models,” in [<span class="ltx_text ltx_font_italic" id="bib.bib4.1.1">International Conference on Learning Representations</span> ], arXiv:2010.02502 (2021).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Zhang, J. et al., “Towards an accurate and generalizable multiple sclerosis lesion segmentation model using self-ensembled lesion fusion,” in [<span class="ltx_text ltx_font_italic" id="bib.bib5.1.1">21<math alttext="{}^{\mbox{\tiny{th}}}" class="ltx_Math" display="inline" id="bib.bib5.1.1.m1.1"><semantics id="bib.bib5.1.1.m1.1a"><msup id="bib.bib5.1.1.m1.1.1" xref="bib.bib5.1.1.m1.1.1.cmml"><mi id="bib.bib5.1.1.m1.1.1a" xref="bib.bib5.1.1.m1.1.1.cmml"></mi><mtext class="ltx_mathvariant_italic" id="bib.bib5.1.1.m1.1.1.1" mathsize="71%" xref="bib.bib5.1.1.m1.1.1.1a.cmml">th</mtext></msup><annotation-xml encoding="MathML-Content" id="bib.bib5.1.1.m1.1b"><apply id="bib.bib5.1.1.m1.1.1.cmml" xref="bib.bib5.1.1.m1.1.1"><ci id="bib.bib5.1.1.m1.1.1.1a.cmml" xref="bib.bib5.1.1.m1.1.1.1"><mtext class="ltx_mathvariant_italic" id="bib.bib5.1.1.m1.1.1.1.cmml" mathsize="50%" xref="bib.bib5.1.1.m1.1.1.1">th</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="bib.bib5.1.1.m1.1c">{}^{\mbox{\tiny{th}}}</annotation><annotation encoding="application/x-llamapun" id="bib.bib5.1.1.m1.1d">start_FLOATSUPERSCRIPT th end_FLOATSUPERSCRIPT</annotation></semantics></math> International Symposium on Biomedical Imaging (ISBI 2024)</span> ], (2024).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Carass, A. et al., “Longitudinal multiple sclerosis lesion segmentation: resource and challenge,” <span class="ltx_text ltx_font_italic" id="bib.bib6.1.1">NeuroImage</span> <span class="ltx_text ltx_font_bold" id="bib.bib6.2.2">148</span>, 77–102 (2017).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Nichol, A. Q. and Dhariwal, P., “Improved denoising diffusion probabilistic models,” in [<span class="ltx_text ltx_font_italic" id="bib.bib7.1.1">International conference on machine learning</span> ], 8162–8171, PMLR (2021).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Battaglini, M., Jenkinson, M., and De Stefano, N., “Evaluating and reducing the impact of white matter lesions on brain volume measurements,” <span class="ltx_text ltx_font_italic" id="bib.bib8.1.1">Human Brain Mapping</span> <span class="ltx_text ltx_font_bold" id="bib.bib8.2.2">33</span>(9), 2062–2071 (2012).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Huo, Y. et al., “3d whole brain segmentation using spatially localized atlas network tiles,” <span class="ltx_text ltx_font_italic" id="bib.bib9.1.1">NeuroImage</span> <span class="ltx_text ltx_font_bold" id="bib.bib9.2.2">194</span>, 105–119 (2019).

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Zhang, J. et al., “Harmonization-enriched domain adaptation with light fine-tuning for multiple sclerosis lesion segmentation,” in [<span class="ltx_text ltx_font_italic" id="bib.bib10.1.1">Proceedings of SPIE Medical Imaging (SPIE-MI 2024), San Diego, CA, February 18 – 22, 2024</span> ], <span class="ltx_text ltx_font_bold" id="bib.bib10.2.2">12930</span>, 635–641 (2024).

</span>
</li>
</ul>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Mon Oct  7 13:25:24 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
