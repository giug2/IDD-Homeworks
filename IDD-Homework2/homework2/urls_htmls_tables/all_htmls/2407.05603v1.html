<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2407.05603] WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering</title><meta property="og:description" content="Whole slide imaging is routinely adopted for carcinoma diagnosis and prognosis. Abundant experience is required for pathologists to achieve accurate and reliable diagnostic results of whole slide images (WSI). The huge…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2407.05603">

<!--Generated on Mon Aug  5 14:41:11 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="Whole Slide imaging Visual Question Answering">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<div id="p1" class="ltx_para">
<p id="p1.1" class="ltx_p">(eccv)                Package eccv Warning: Package ‘hyperref’ is loaded with option ‘pagebackref’, which is *not* recommended for camera-ready version</p>
</div>
<span id="id1" class="ltx_note ltx_role_institutetext"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">institutetext: </span>Zhejiang University </span></span></span><span id="id2" class="ltx_note ltx_role_institutetext"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_note_type">institutetext: </span>Research Center for Industries of the Future, Westlake University</span></span></span><span id="id3" class="ltx_note ltx_role_institutetext"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_note_type">institutetext: </span>School of Engineering, Westlake University.

<br class="ltx_break"><span id="id3.1" class="ltx_note ltx_role_email"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_note_type">email: </span>{chenpingyi,yanglin}@westlake.edu.cn</span></span></span></span></span></span>
<h1 class="ltx_title ltx_title_document">WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Pingyi Chen
</span><span class="ltx_author_notes">112233
<span class="ltx_contact ltx_role_orcid"><a target="_blank" href="https://orcid.org/0000-0001-5569-5725" title="ORCID identifier" class="ltx_ref">0000-0001-5569-5725</a></span>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Chenglu Zhu
</span><span class="ltx_author_notes">2233
<span class="ltx_contact ltx_role_orcid"><a target="_blank" href="https://orcid.org/0000-0001-5705-3718" title="ORCID identifier" class="ltx_ref">0000-0001-5705-3718</a></span>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Sunyi Zheng
</span><span class="ltx_author_notes">2233
<span class="ltx_contact ltx_role_orcid"><a target="_blank" href="https://orcid.org/0000-0002-9005-4875" title="ORCID identifier" class="ltx_ref">0000-0002-9005-4875</a></span>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Honglin Li
</span><span class="ltx_author_notes">112233</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Lin Yang
</span><span class="ltx_author_notes">2233</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id1.id1" class="ltx_p">Whole slide imaging is routinely adopted for carcinoma diagnosis and prognosis. Abundant experience is required for pathologists to achieve accurate and reliable diagnostic results of whole slide images (WSI). The huge size and heterogeneous features of WSIs make the workflow of pathological reading extremely time-consuming. In this paper, we propose a novel framework (WSI-VQA) to interpret WSIs by generative visual question answering. WSI-VQA shows universality by reframing various kinds of slide-level tasks in a question-answering pattern, in which pathologists can achieve immunohistochemical grading, survival prediction, and tumor subtyping following human-machine interaction. Furthermore, we establish a WSI-VQA dataset which contains 8672 slide-level question-answering pairs with 977 WSIs. Besides the ability to deal with different slide-level tasks, our generative model which is named Wsi2Text Transformer (W2T) outperforms existing discriminative models in medical correctness, which reveals the potential of our model to be applied in the clinical scenario. Additionally, we also visualize the co-attention mapping between word embeddings and WSIs as an intuitive explanation for diagnostic results. The dataset and related code are available at <a target="_blank" href="https://github.com/cpystan/WSI-VQA" title="" class="ltx_ref ltx_href">https://github.com/cpystan/WSI-VQA</a>.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Keywords: </h6>Whole Slide imaging Visual Question Answering
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Multimodal large language models (MLLM), such as GPT-4V <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib37" title="" class="ltx_ref">37</a>]</cite>, LLaVa <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite>, Qwen-VL <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>, have demonstrated remarkable superiority over a wide range of visual-language tasks. Even in medical domains requiring specialized knowledge and where a large visual gap exists, MLLMs continue to exhibit exceptional performance <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib37" title="" class="ltx_ref">37</a>, <a href="#bib.bib22" title="" class="ltx_ref">22</a>, <a href="#bib.bib20" title="" class="ltx_ref">20</a>, <a href="#bib.bib33" title="" class="ltx_ref">33</a>, <a href="#bib.bib39" title="" class="ltx_ref">39</a>]</cite>. Despite their impressive performance in the medical area, these MLLMs can not be easily applied to achieve visual understanding for WSIs which are characterized by a tremendous size (the maximum can be 100,000×100,000 pixels at 20<math id="S1.p1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S1.p1.1.m1.1a"><mo id="S1.p1.1.m1.1.1" xref="S1.p1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S1.p1.1.m1.1b"><times id="S1.p1.1.m1.1.1.cmml" xref="S1.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.p1.1.m1.1c">\times</annotation></semantics></math> magnification). Recent years have also witnessed the emergence of pathological MLLMs (MI-Zero <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>, PLIP <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>, CONCH <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref">25</a>]</cite>). Although a large number of pathological images are seen by the MLLMs, the patch-level pre-training makes it challenging to achieve promising performance on slide-level tasks which requires an understanding of the whole WSI like carcinoma subtyping.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.2" class="ltx_p">In VQA for natural images, the input with the approximate size of <math id="S1.p2.1.m1.1" class="ltx_Math" alttext="256\times 256" display="inline"><semantics id="S1.p2.1.m1.1a"><mrow id="S1.p2.1.m1.1.1" xref="S1.p2.1.m1.1.1.cmml"><mn id="S1.p2.1.m1.1.1.2" xref="S1.p2.1.m1.1.1.2.cmml">256</mn><mo lspace="0.222em" rspace="0.222em" id="S1.p2.1.m1.1.1.1" xref="S1.p2.1.m1.1.1.1.cmml">×</mo><mn id="S1.p2.1.m1.1.1.3" xref="S1.p2.1.m1.1.1.3.cmml">256</mn></mrow><annotation-xml encoding="MathML-Content" id="S1.p2.1.m1.1b"><apply id="S1.p2.1.m1.1.1.cmml" xref="S1.p2.1.m1.1.1"><times id="S1.p2.1.m1.1.1.1.cmml" xref="S1.p2.1.m1.1.1.1"></times><cn type="integer" id="S1.p2.1.m1.1.1.2.cmml" xref="S1.p2.1.m1.1.1.2">256</cn><cn type="integer" id="S1.p2.1.m1.1.1.3.cmml" xref="S1.p2.1.m1.1.1.3">256</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.1.m1.1c">256\times 256</annotation></semantics></math> is worth <math id="S1.p2.2.m2.1" class="ltx_Math" alttext="16\times 16" display="inline"><semantics id="S1.p2.2.m2.1a"><mrow id="S1.p2.2.m2.1.1" xref="S1.p2.2.m2.1.1.cmml"><mn id="S1.p2.2.m2.1.1.2" xref="S1.p2.2.m2.1.1.2.cmml">16</mn><mo lspace="0.222em" rspace="0.222em" id="S1.p2.2.m2.1.1.1" xref="S1.p2.2.m2.1.1.1.cmml">×</mo><mn id="S1.p2.2.m2.1.1.3" xref="S1.p2.2.m2.1.1.3.cmml">16</mn></mrow><annotation-xml encoding="MathML-Content" id="S1.p2.2.m2.1b"><apply id="S1.p2.2.m2.1.1.cmml" xref="S1.p2.2.m2.1.1"><times id="S1.p2.2.m2.1.1.1.cmml" xref="S1.p2.2.m2.1.1.1"></times><cn type="integer" id="S1.p2.2.m2.1.1.2.cmml" xref="S1.p2.2.m2.1.1.2">16</cn><cn type="integer" id="S1.p2.2.m2.1.1.3.cmml" xref="S1.p2.2.m2.1.1.3">16</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.2.m2.1c">16\times 16</annotation></semantics></math> words with visually descriptive labels. In the pathology field, the slide-level prediction for WSIs is a knotty problem that is usually formulated in a multiple-instance learning (MIL) framework <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>, <a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib9" title="" class="ltx_ref">9</a>, <a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite>. Patches are cropped from the whole image followed by reducing dimensions to make computation feasible. Patch embeddings act as individual instances which are then aggregated to generate the final result in a weakly-supervised manner. The whole image acts as a bag exhibiting enormous heterogeneity with labels that are visually hard to distinguish. Differentiating tumors, as a basic slide-level task, depends on the fine-grained visual features that localize in a very small region. Survival outcome prediction is a challenging regression task where the field of view needs to be expanded to the entire WSI and to understand the interactions of different components (stroma, lymphocyte, microenvironment, etc).</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">Visual-language MLLMs unify a variety of visual tasks such as object segmentation, scene understanding, and optical character recognition by elaborately building appropriate prompts and obtaining textual descriptions <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib37" title="" class="ltx_ref">37</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>, <a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>. In the pathology field, previous task-specialized MIL models can only solve certain problems like tumor grading despite their remarkable performance. To promote the development of visual language learning for whole slide images, we propose a novel paradigm of WSI-VQA in which the input is the whole slide image and the output is the text. In WSI-VQA, a visual encoder is applied to extract and aggregate patch-level embeddings, and a text encoder gets word embeddings of the questions. Patch embeddings and word embeddings are aligned by a co-attention mapping in the decoder to generate the answers. In contrast to those VQA approaches <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>, <a href="#bib.bib28" title="" class="ltx_ref">28</a>, <a href="#bib.bib31" title="" class="ltx_ref">31</a>, <a href="#bib.bib40" title="" class="ltx_ref">40</a>]</cite> which introduce a classifier to select the right answer given a finite set of choices, our generative model can predict the answer word by word in free form, which enables our model to deal with diverse problems especially when contrastive or classification candidate answers are not available in clinical practice.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">In the field of pathology, visual-language models lag behind due to insufficient training data for MLLMs. The large resolution and visually challenging features make it especially difficult to annotate WSIs. In addition, the concern about data privacy and security also prevents enough slide-level data from being widely accessible. We are glad to see that some researchers collect pathological text from a wide range of resources like books <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite> and social media (Twitter) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>. However, these textual descriptions are constrained to narrating pathological patches instead of the whole slide image, which makes models struggle to achieve promising slide-level performance like tumor subtyping <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">To effectively train our proposed WSI-VQA models, we propose an automatic and scalable pipeline to curate a slide-level question-answering dataset, termed WSI-VQA. It contains 977 WSIs equipped with 8672 question-answering pairs. Our VQA pairs are generated based on well-established WSI captions <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite> and TCGA clinical information (TCGA is the largest publicly available database for cancers), covering a variety of WSI-related tasks. It brings several benefits. Firstly, since the labels are well-annotated by experts in TCGA, the pathological text is reliable and provides abundant slide-level information. Secondly, the correspondence between WSIs and the text is clear and well-aligned. Last but not least, considering related data is already de-identified and public, we have no problem opening our collected dataset. In our experiment, we train and evaluate our generative model on the collected WSI-VQA as the benchmark. According to the results, our approach demonstrates superiority by unifying different clinical tasks and surpassing previous multiple instance learning (MIL) methods which are specially designed for WSI classification.
To the best of our knowledge, our collected dataset is the first slide-level question-answering dataset and our approach is also the pioneering work of WSI-VQA. Our contributions can be summarized as follows:</p>
</div>
<div id="S1.p6" class="ltx_para">
<ol id="S1.I1" class="ltx_enumerate">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p">We propose a novel framework of WSI-VQA which reframes various slide-level tasks in the pathology field into the question-answering paradigm. Our generative model can achieve competitive performance on these different WSI-related tasks. The universality and scalability of our approach reveal its potential as the foundation MLLM for computational pathology.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p">We propose the WSI-VQA dataset, which is named WSI-VQA. It contains 977 WSIs and their corresponding QA pairs. The dataset which is going to be publicly available will promote the development of pathological visual-language learning.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p">Visualizing the co-attention map improves the interpretability of our model and can provide clinical clues for pathologists.</p>
</div>
</li>
</ol>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Dataset Construction</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">In this section, we will provide more details about the construction process of our proposed dataset WSI-VQA, as shown in Fig. <a href="#S2.F1" title="Figure 1 ‣ 2.1.2 Open-ended Subset. ‣ 2.1 Data Generation ‣ 2 Dataset Construction ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>. We will first give a brief introduction to the source data and comprehensively explain the scalable generation process of question-answering pairs, followed by analyzing and visualizing data statistics.</p>
</div>
<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Data Generation</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">TCGA establishes an infrastructure which collects and characterizes a large number of cancer samples. It contains diagnostic WSIs and relevant clinical information of various modalities. We resort to TCGA-BRCA (the largest subset of TCGA about breast cancer) to curate our slide-level VQA dataset because of its reliability and security. From the captions of TCGA, as shown in Fig. <a href="#S2.F1" title="Figure 1 ‣ 2.1.2 Open-ended Subset. ‣ 2.1 Data Generation ‣ 2 Dataset Construction ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, we generate question-answering pairs equipped with multiple choices with the aid of LLMs. The other question-answering pairs are obtained from the clinical files in TCGA by extracting keywords to fit templates.</p>
</div>
<section id="S2.SS1.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.1.1 </span>Close-ended Subset.</h4>

<div id="S2.SS1.SSS1.p1" class="ltx_para">
<p id="S2.SS1.SSS1.p1.1" class="ltx_p">Based on the largest WSI caption dataset which summarized pathological reports from TCGA <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>, we can automatically generate several questions accompanied with candidate answers for each caption with the aid of large language models (LLM) like GPT<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>. Following the work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>, we use the following prompt to generate WSI-VQA pairs:</p>
</div>
<div id="S2.SS1.SSS1.p2" class="ltx_para">
<p id="S2.SS1.SSS1.p2.1" class="ltx_p"><span id="S2.SS1.SSS1.p2.1.1" class="ltx_text ltx_font_italic">Ask 6 questions about the content and generate four options for each question. The output should use the following template: i:‘the question index’ question:‘the generate question’ choice: ‘A: option content B: option content C: option content D: option content’ answer: The correct option.</span></p>
</div>
<div id="S2.SS1.SSS1.p3" class="ltx_para">
<p id="S2.SS1.SSS1.p3.1" class="ltx_p">Although this approach makes the automation of VQA pair generation feasible, the problem of hallucination brought by LLMs can not be ignored. The hallucination means that LLMs may generate content that is contradictory to the common knowledge or unfaithful to the provided content. Therefore, we adopt data filtering to discard those pairs that own significant defects. In addition, the answers that can not be inferred from WSIs are also removed from our collected dataset. Finally, we obtained 4535 close-ended VQA pairs which not only contain questions and answers but also provide candidate choices. Since the close-ended subset has choices for each question, we can compute the medical accuracy to measure the performance of our generative model.</p>
</div>
</section>
<section id="S2.SS1.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.1.2 </span>Open-ended Subset.</h4>

<div id="S2.SS1.SSS2.p1" class="ltx_para">
<p id="S2.SS1.SSS2.p1.1" class="ltx_p">TCGA-BRCA includes various clinical indexes: subtyping, immunohistochemical testing, and survival prediction. By matching the keywords and their corresponding values in the question-answering templates, we can obtain high-quality VQA pairs which contain abundant clinical information. We designed several question-answering templates and one of the templates is shown below:</p>
</div>
<div id="S2.SS1.SSS2.p2" class="ltx_para">
<p id="S2.SS1.SSS2.p2.1" class="ltx_p"><span id="S2.SS1.SSS2.p2.1.1" class="ltx_text ltx_font_bold">Q: What is the result of [KEY]? A: [VALUE].</span></p>
</div>
<div id="S2.SS1.SSS2.p3" class="ltx_para">
<p id="S2.SS1.SSS2.p3.1" class="ltx_p">During the training process, we randomly select a template for each pair. To make our generative model reasonable, we discard those clinical indexes that can not be inferred from diagnostic WSIs. As a result, the open-ended subset contains 4137 VQA pairs.</p>
</div>
<figure id="S2.F1" class="ltx_figure"><img src="/html/2407.05603/assets/pic/framework.png" id="S2.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="201" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S2.F1.2.1.1" class="ltx_text" style="font-size:90%;">Figure 1</span>: </span><span id="S2.F1.3.2" class="ltx_text" style="font-size:90%;">Flow diagram of the WSI-VQA construction. We first select pathological captions and clinical indexes in TCGA. Then, close-ended and open-ended VQA pairs are obtained through GPT and fixing templates respectively. Finally, clinical validation is adopted to remove the pairs which are flawed or can not be inferred from the WSI.
</span></figcaption>
</figure>
<figure id="S2.F2" class="ltx_figure"><img src="/html/2407.05603/assets/pic/distribution.png" id="S2.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="427" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S2.F2.4.2.1" class="ltx_text" style="font-size:90%;">Figure 2</span>: </span><span id="S2.F2.2.1" class="ltx_text" style="font-size:90%;">(a) The distribution of biological entities in our proposed dataset. The center circle shows the distribution of close-ended pairs and open-ended pairs. The outer circle presents the entities in the dataset from which we can see that our questions cover a wide range of slide-level characteristics. Several examples of questions are also demonstrated. (b) The frequency of different categories of questions set by the first word. The ’what’ questions dominate the VQA pairs with a frequency of <math id="S2.F2.2.1.m1.1" class="ltx_Math" alttext="79.9\%" display="inline"><semantics id="S2.F2.2.1.m1.1b"><mrow id="S2.F2.2.1.m1.1.1" xref="S2.F2.2.1.m1.1.1.cmml"><mn id="S2.F2.2.1.m1.1.1.2" xref="S2.F2.2.1.m1.1.1.2.cmml">79.9</mn><mo id="S2.F2.2.1.m1.1.1.1" xref="S2.F2.2.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.F2.2.1.m1.1c"><apply id="S2.F2.2.1.m1.1.1.cmml" xref="S2.F2.2.1.m1.1.1"><csymbol cd="latexml" id="S2.F2.2.1.m1.1.1.1.cmml" xref="S2.F2.2.1.m1.1.1.1">percent</csymbol><cn type="float" id="S2.F2.2.1.m1.1.1.2.cmml" xref="S2.F2.2.1.m1.1.1.2">79.9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.2.1.m1.1d">79.9\%</annotation></semantics></math>. (c) The ratio of various entities in the open-ended subset. ’Her-2’ and ’PR’ are two biomarkers for breast cancer.
</span></figcaption>
</figure>
</section>
<section id="S2.SS1.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.1.3 </span>Data Statistics.</h4>

<div id="S2.SS1.SSS3.p1" class="ltx_para">
<p id="S2.SS1.SSS3.p1.5" class="ltx_p">We provide a statistical overview of our proposed dataset. The dataset contains 977 WSIs and 8672 QA pairs where each WSI is associated with an average of 8.9 QA pairs. Among these QA pairs, the close-ended subset has 4535 QA pairs while the open-ended one has 4137 pairs. As shown in Fig. <a href="#S2.F2" title="Figure 2 ‣ 2.1.2 Open-ended Subset. ‣ 2.1 Data Generation ‣ 2 Dataset Construction ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> (a), the questions in the dataset demonstrate a diversity ranging from the questions that require spatial information such as identifying the margin status to challenging questions like immunohistochemical grading of the WSI. Fig. <a href="#S2.F2" title="Figure 2 ‣ 2.1.2 Open-ended Subset. ‣ 2.1 Data Generation ‣ 2 Dataset Construction ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> (b) shows the distribution of different categories of questions. The dataset is predominantly characterized by ’what’ questions, accounting for <math id="S2.SS1.SSS3.p1.1.m1.1" class="ltx_Math" alttext="80\%" display="inline"><semantics id="S2.SS1.SSS3.p1.1.m1.1a"><mrow id="S2.SS1.SSS3.p1.1.m1.1.1" xref="S2.SS1.SSS3.p1.1.m1.1.1.cmml"><mn id="S2.SS1.SSS3.p1.1.m1.1.1.2" xref="S2.SS1.SSS3.p1.1.m1.1.1.2.cmml">80</mn><mo id="S2.SS1.SSS3.p1.1.m1.1.1.1" xref="S2.SS1.SSS3.p1.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS3.p1.1.m1.1b"><apply id="S2.SS1.SSS3.p1.1.m1.1.1.cmml" xref="S2.SS1.SSS3.p1.1.m1.1.1"><csymbol cd="latexml" id="S2.SS1.SSS3.p1.1.m1.1.1.1.cmml" xref="S2.SS1.SSS3.p1.1.m1.1.1.1">percent</csymbol><cn type="integer" id="S2.SS1.SSS3.p1.1.m1.1.1.2.cmml" xref="S2.SS1.SSS3.p1.1.m1.1.1.2">80</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS3.p1.1.m1.1c">80\%</annotation></semantics></math> of its content. There are also other types of questions such as <math id="S2.SS1.SSS3.p1.2.m2.1" class="ltx_Math" alttext="13.2\%" display="inline"><semantics id="S2.SS1.SSS3.p1.2.m2.1a"><mrow id="S2.SS1.SSS3.p1.2.m2.1.1" xref="S2.SS1.SSS3.p1.2.m2.1.1.cmml"><mn id="S2.SS1.SSS3.p1.2.m2.1.1.2" xref="S2.SS1.SSS3.p1.2.m2.1.1.2.cmml">13.2</mn><mo id="S2.SS1.SSS3.p1.2.m2.1.1.1" xref="S2.SS1.SSS3.p1.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS3.p1.2.m2.1b"><apply id="S2.SS1.SSS3.p1.2.m2.1.1.cmml" xref="S2.SS1.SSS3.p1.2.m2.1.1"><csymbol cd="latexml" id="S2.SS1.SSS3.p1.2.m2.1.1.1.cmml" xref="S2.SS1.SSS3.p1.2.m2.1.1.1">percent</csymbol><cn type="float" id="S2.SS1.SSS3.p1.2.m2.1.1.2.cmml" xref="S2.SS1.SSS3.p1.2.m2.1.1.2">13.2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS3.p1.2.m2.1c">13.2\%</annotation></semantics></math> ’Yes/No’ questions, <math id="S2.SS1.SSS3.p1.3.m3.1" class="ltx_Math" alttext="1.4\%" display="inline"><semantics id="S2.SS1.SSS3.p1.3.m3.1a"><mrow id="S2.SS1.SSS3.p1.3.m3.1.1" xref="S2.SS1.SSS3.p1.3.m3.1.1.cmml"><mn id="S2.SS1.SSS3.p1.3.m3.1.1.2" xref="S2.SS1.SSS3.p1.3.m3.1.1.2.cmml">1.4</mn><mo id="S2.SS1.SSS3.p1.3.m3.1.1.1" xref="S2.SS1.SSS3.p1.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS3.p1.3.m3.1b"><apply id="S2.SS1.SSS3.p1.3.m3.1.1.cmml" xref="S2.SS1.SSS3.p1.3.m3.1.1"><csymbol cd="latexml" id="S2.SS1.SSS3.p1.3.m3.1.1.1.cmml" xref="S2.SS1.SSS3.p1.3.m3.1.1.1">percent</csymbol><cn type="float" id="S2.SS1.SSS3.p1.3.m3.1.1.2.cmml" xref="S2.SS1.SSS3.p1.3.m3.1.1.2">1.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS3.p1.3.m3.1c">1.4\%</annotation></semantics></math> ’where’ questions, and <math id="S2.SS1.SSS3.p1.4.m4.1" class="ltx_Math" alttext="3\%" display="inline"><semantics id="S2.SS1.SSS3.p1.4.m4.1a"><mrow id="S2.SS1.SSS3.p1.4.m4.1.1" xref="S2.SS1.SSS3.p1.4.m4.1.1.cmml"><mn id="S2.SS1.SSS3.p1.4.m4.1.1.2" xref="S2.SS1.SSS3.p1.4.m4.1.1.2.cmml">3</mn><mo id="S2.SS1.SSS3.p1.4.m4.1.1.1" xref="S2.SS1.SSS3.p1.4.m4.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS3.p1.4.m4.1b"><apply id="S2.SS1.SSS3.p1.4.m4.1.1.cmml" xref="S2.SS1.SSS3.p1.4.m4.1.1"><csymbol cd="latexml" id="S2.SS1.SSS3.p1.4.m4.1.1.1.cmml" xref="S2.SS1.SSS3.p1.4.m4.1.1.1">percent</csymbol><cn type="integer" id="S2.SS1.SSS3.p1.4.m4.1.1.2.cmml" xref="S2.SS1.SSS3.p1.4.m4.1.1.2">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS3.p1.4.m4.1c">3\%</annotation></semantics></math> ’which’ questions. Since the open-ended subset is collected from the clinical files in TCGA, we calculate the coverage ratio of different entities in Fig. <a href="#S2.F2" title="Figure 2 ‣ 2.1.2 Open-ended Subset. ‣ 2.1 Data Generation ‣ 2 Dataset Construction ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> (c). For example, the coverage ratio of ’her2’ is around <math id="S2.SS1.SSS3.p1.5.m5.1" class="ltx_Math" alttext="50\%" display="inline"><semantics id="S2.SS1.SSS3.p1.5.m5.1a"><mrow id="S2.SS1.SSS3.p1.5.m5.1.1" xref="S2.SS1.SSS3.p1.5.m5.1.1.cmml"><mn id="S2.SS1.SSS3.p1.5.m5.1.1.2" xref="S2.SS1.SSS3.p1.5.m5.1.1.2.cmml">50</mn><mo id="S2.SS1.SSS3.p1.5.m5.1.1.1" xref="S2.SS1.SSS3.p1.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS3.p1.5.m5.1b"><apply id="S2.SS1.SSS3.p1.5.m5.1.1.cmml" xref="S2.SS1.SSS3.p1.5.m5.1.1"><csymbol cd="latexml" id="S2.SS1.SSS3.p1.5.m5.1.1.1.cmml" xref="S2.SS1.SSS3.p1.5.m5.1.1.1">percent</csymbol><cn type="integer" id="S2.SS1.SSS3.p1.5.m5.1.1.2.cmml" xref="S2.SS1.SSS3.p1.5.m5.1.1.2">50</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS3.p1.5.m5.1c">50\%</annotation></semantics></math>, which means nearly half of the cases in the open-end subset are not provided with Her-2 results.</p>
</div>
</section>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Method</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">In this section, we elaborate on our WSI-VQA model, the Wsi2Text Transformer (W2T) the structure of which is visualized in Fig. <a href="#S3.F3" title="Figure 3 ‣ 3.2 Preprocessing for Bag Construction ‣ 3 Method ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>. Firstly, we explain the theoretical base of our VQA method in Section <a href="#S3.SS1" title="3.1 Problem Formulation ‣ 3 Method ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.1</span></a>. We introduce our way of pre-processing for WSIs and the formulation of patch embeddings and word embeddings in Section <a href="#S3.SS2" title="3.2 Preprocessing for Bag Construction ‣ 3 Method ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>. In Section <a href="#S3.SS3" title="3.3 Interaction between WSI and Text ‣ 3 Method ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.3</span></a>, we present the interaction between visual and textual features showing how word embeddings attend to relevant patches when responding to a question.</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Problem Formulation</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.11" class="ltx_p">The inputs <math id="S3.SS1.p1.1.m1.3" class="ltx_Math" alttext="(X_{i},Q_{i},Y_{i})" display="inline"><semantics id="S3.SS1.p1.1.m1.3a"><mrow id="S3.SS1.p1.1.m1.3.3.3" xref="S3.SS1.p1.1.m1.3.3.4.cmml"><mo stretchy="false" id="S3.SS1.p1.1.m1.3.3.3.4" xref="S3.SS1.p1.1.m1.3.3.4.cmml">(</mo><msub id="S3.SS1.p1.1.m1.1.1.1.1" xref="S3.SS1.p1.1.m1.1.1.1.1.cmml"><mi id="S3.SS1.p1.1.m1.1.1.1.1.2" xref="S3.SS1.p1.1.m1.1.1.1.1.2.cmml">X</mi><mi id="S3.SS1.p1.1.m1.1.1.1.1.3" xref="S3.SS1.p1.1.m1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p1.1.m1.3.3.3.5" xref="S3.SS1.p1.1.m1.3.3.4.cmml">,</mo><msub id="S3.SS1.p1.1.m1.2.2.2.2" xref="S3.SS1.p1.1.m1.2.2.2.2.cmml"><mi id="S3.SS1.p1.1.m1.2.2.2.2.2" xref="S3.SS1.p1.1.m1.2.2.2.2.2.cmml">Q</mi><mi id="S3.SS1.p1.1.m1.2.2.2.2.3" xref="S3.SS1.p1.1.m1.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.SS1.p1.1.m1.3.3.3.6" xref="S3.SS1.p1.1.m1.3.3.4.cmml">,</mo><msub id="S3.SS1.p1.1.m1.3.3.3.3" xref="S3.SS1.p1.1.m1.3.3.3.3.cmml"><mi id="S3.SS1.p1.1.m1.3.3.3.3.2" xref="S3.SS1.p1.1.m1.3.3.3.3.2.cmml">Y</mi><mi id="S3.SS1.p1.1.m1.3.3.3.3.3" xref="S3.SS1.p1.1.m1.3.3.3.3.3.cmml">i</mi></msub><mo stretchy="false" id="S3.SS1.p1.1.m1.3.3.3.7" xref="S3.SS1.p1.1.m1.3.3.4.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.3b"><vector id="S3.SS1.p1.1.m1.3.3.4.cmml" xref="S3.SS1.p1.1.m1.3.3.3"><apply id="S3.SS1.p1.1.m1.1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.1.1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.1.m1.1.1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.1.1.1.1.2">𝑋</ci><ci id="S3.SS1.p1.1.m1.1.1.1.1.3.cmml" xref="S3.SS1.p1.1.m1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.SS1.p1.1.m1.2.2.2.2.cmml" xref="S3.SS1.p1.1.m1.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.2.2.2.2.1.cmml" xref="S3.SS1.p1.1.m1.2.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.1.m1.2.2.2.2.2.cmml" xref="S3.SS1.p1.1.m1.2.2.2.2.2">𝑄</ci><ci id="S3.SS1.p1.1.m1.2.2.2.2.3.cmml" xref="S3.SS1.p1.1.m1.2.2.2.2.3">𝑖</ci></apply><apply id="S3.SS1.p1.1.m1.3.3.3.3.cmml" xref="S3.SS1.p1.1.m1.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.3.3.3.3.1.cmml" xref="S3.SS1.p1.1.m1.3.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.1.m1.3.3.3.3.2.cmml" xref="S3.SS1.p1.1.m1.3.3.3.3.2">𝑌</ci><ci id="S3.SS1.p1.1.m1.3.3.3.3.3.cmml" xref="S3.SS1.p1.1.m1.3.3.3.3.3">𝑖</ci></apply></vector></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.3c">(X_{i},Q_{i},Y_{i})</annotation></semantics></math> are the whole slide image <math id="S3.SS1.p1.2.m2.1" class="ltx_Math" alttext="X_{i}" display="inline"><semantics id="S3.SS1.p1.2.m2.1a"><msub id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml"><mi id="S3.SS1.p1.2.m2.1.1.2" xref="S3.SS1.p1.2.m2.1.1.2.cmml">X</mi><mi id="S3.SS1.p1.2.m2.1.1.3" xref="S3.SS1.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><apply id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.1.1.2">𝑋</ci><ci id="S3.SS1.p1.2.m2.1.1.3.cmml" xref="S3.SS1.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">X_{i}</annotation></semantics></math> and the question <math id="S3.SS1.p1.3.m3.1" class="ltx_Math" alttext="Q_{i}" display="inline"><semantics id="S3.SS1.p1.3.m3.1a"><msub id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml"><mi id="S3.SS1.p1.3.m3.1.1.2" xref="S3.SS1.p1.3.m3.1.1.2.cmml">Q</mi><mi id="S3.SS1.p1.3.m3.1.1.3" xref="S3.SS1.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><apply id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.1.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS1.p1.3.m3.1.1.2.cmml" xref="S3.SS1.p1.3.m3.1.1.2">𝑄</ci><ci id="S3.SS1.p1.3.m3.1.1.3.cmml" xref="S3.SS1.p1.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">Q_{i}</annotation></semantics></math>, predicting <math id="S3.SS1.p1.4.m4.1" class="ltx_Math" alttext="Y_{i}" display="inline"><semantics id="S3.SS1.p1.4.m4.1a"><msub id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml"><mi id="S3.SS1.p1.4.m4.1.1.2" xref="S3.SS1.p1.4.m4.1.1.2.cmml">Y</mi><mi id="S3.SS1.p1.4.m4.1.1.3" xref="S3.SS1.p1.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.1b"><apply id="S3.SS1.p1.4.m4.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.1.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS1.p1.4.m4.1.1.2.cmml" xref="S3.SS1.p1.4.m4.1.1.2">𝑌</ci><ci id="S3.SS1.p1.4.m4.1.1.3.cmml" xref="S3.SS1.p1.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.1c">Y_{i}</annotation></semantics></math> as the output.
The large resolution necessitates the pre-processing of WSIs. The WSI can be treated as the aggregation of a group of instances which are patches with a much smaller resolution. It is denoted as <math id="S3.SS1.p1.5.m5.1" class="ltx_Math" alttext="X_{i}=\{x_{i}^{j}\}_{j=1}^{M_{i}}" display="inline"><semantics id="S3.SS1.p1.5.m5.1a"><mrow id="S3.SS1.p1.5.m5.1.1" xref="S3.SS1.p1.5.m5.1.1.cmml"><msub id="S3.SS1.p1.5.m5.1.1.3" xref="S3.SS1.p1.5.m5.1.1.3.cmml"><mi id="S3.SS1.p1.5.m5.1.1.3.2" xref="S3.SS1.p1.5.m5.1.1.3.2.cmml">X</mi><mi id="S3.SS1.p1.5.m5.1.1.3.3" xref="S3.SS1.p1.5.m5.1.1.3.3.cmml">i</mi></msub><mo id="S3.SS1.p1.5.m5.1.1.2" xref="S3.SS1.p1.5.m5.1.1.2.cmml">=</mo><msubsup id="S3.SS1.p1.5.m5.1.1.1" xref="S3.SS1.p1.5.m5.1.1.1.cmml"><mrow id="S3.SS1.p1.5.m5.1.1.1.1.1.1" xref="S3.SS1.p1.5.m5.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.SS1.p1.5.m5.1.1.1.1.1.1.2" xref="S3.SS1.p1.5.m5.1.1.1.1.1.2.cmml">{</mo><msubsup id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.2" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.2.cmml">x</mi><mi id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.3" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.3" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.SS1.p1.5.m5.1.1.1.1.1.1.3" xref="S3.SS1.p1.5.m5.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS1.p1.5.m5.1.1.1.1.3" xref="S3.SS1.p1.5.m5.1.1.1.1.3.cmml"><mi id="S3.SS1.p1.5.m5.1.1.1.1.3.2" xref="S3.SS1.p1.5.m5.1.1.1.1.3.2.cmml">j</mi><mo id="S3.SS1.p1.5.m5.1.1.1.1.3.1" xref="S3.SS1.p1.5.m5.1.1.1.1.3.1.cmml">=</mo><mn id="S3.SS1.p1.5.m5.1.1.1.1.3.3" xref="S3.SS1.p1.5.m5.1.1.1.1.3.3.cmml">1</mn></mrow><msub id="S3.SS1.p1.5.m5.1.1.1.3" xref="S3.SS1.p1.5.m5.1.1.1.3.cmml"><mi id="S3.SS1.p1.5.m5.1.1.1.3.2" xref="S3.SS1.p1.5.m5.1.1.1.3.2.cmml">M</mi><mi id="S3.SS1.p1.5.m5.1.1.1.3.3" xref="S3.SS1.p1.5.m5.1.1.1.3.3.cmml">i</mi></msub></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m5.1b"><apply id="S3.SS1.p1.5.m5.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1"><eq id="S3.SS1.p1.5.m5.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.2"></eq><apply id="S3.SS1.p1.5.m5.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.3.1.cmml" xref="S3.SS1.p1.5.m5.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.5.m5.1.1.3.2.cmml" xref="S3.SS1.p1.5.m5.1.1.3.2">𝑋</ci><ci id="S3.SS1.p1.5.m5.1.1.3.3.cmml" xref="S3.SS1.p1.5.m5.1.1.3.3">𝑖</ci></apply><apply id="S3.SS1.p1.5.m5.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.1">superscript</csymbol><apply id="S3.SS1.p1.5.m5.1.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.1">subscript</csymbol><set id="S3.SS1.p1.5.m5.1.1.1.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1"><apply id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.2">𝑥</ci><ci id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.1.1.1.3">𝑗</ci></apply></set><apply id="S3.SS1.p1.5.m5.1.1.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.3"><eq id="S3.SS1.p1.5.m5.1.1.1.1.3.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.3.1"></eq><ci id="S3.SS1.p1.5.m5.1.1.1.1.3.2.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.3.2">𝑗</ci><cn type="integer" id="S3.SS1.p1.5.m5.1.1.1.1.3.3.cmml" xref="S3.SS1.p1.5.m5.1.1.1.1.3.3">1</cn></apply></apply><apply id="S3.SS1.p1.5.m5.1.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.3.1.cmml" xref="S3.SS1.p1.5.m5.1.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.5.m5.1.1.1.3.2.cmml" xref="S3.SS1.p1.5.m5.1.1.1.3.2">𝑀</ci><ci id="S3.SS1.p1.5.m5.1.1.1.3.3.cmml" xref="S3.SS1.p1.5.m5.1.1.1.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m5.1c">X_{i}=\{x_{i}^{j}\}_{j=1}^{M_{i}}</annotation></semantics></math> where <math id="S3.SS1.p1.6.m6.1" class="ltx_Math" alttext="X_{i}" display="inline"><semantics id="S3.SS1.p1.6.m6.1a"><msub id="S3.SS1.p1.6.m6.1.1" xref="S3.SS1.p1.6.m6.1.1.cmml"><mi id="S3.SS1.p1.6.m6.1.1.2" xref="S3.SS1.p1.6.m6.1.1.2.cmml">X</mi><mi id="S3.SS1.p1.6.m6.1.1.3" xref="S3.SS1.p1.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m6.1b"><apply id="S3.SS1.p1.6.m6.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.6.m6.1.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1">subscript</csymbol><ci id="S3.SS1.p1.6.m6.1.1.2.cmml" xref="S3.SS1.p1.6.m6.1.1.2">𝑋</ci><ci id="S3.SS1.p1.6.m6.1.1.3.cmml" xref="S3.SS1.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m6.1c">X_{i}</annotation></semantics></math> is the <math id="S3.SS1.p1.7.m7.1" class="ltx_Math" alttext="i-th" display="inline"><semantics id="S3.SS1.p1.7.m7.1a"><mrow id="S3.SS1.p1.7.m7.1.1" xref="S3.SS1.p1.7.m7.1.1.cmml"><mi id="S3.SS1.p1.7.m7.1.1.2" xref="S3.SS1.p1.7.m7.1.1.2.cmml">i</mi><mo id="S3.SS1.p1.7.m7.1.1.1" xref="S3.SS1.p1.7.m7.1.1.1.cmml">−</mo><mrow id="S3.SS1.p1.7.m7.1.1.3" xref="S3.SS1.p1.7.m7.1.1.3.cmml"><mi id="S3.SS1.p1.7.m7.1.1.3.2" xref="S3.SS1.p1.7.m7.1.1.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.SS1.p1.7.m7.1.1.3.1" xref="S3.SS1.p1.7.m7.1.1.3.1.cmml">​</mo><mi id="S3.SS1.p1.7.m7.1.1.3.3" xref="S3.SS1.p1.7.m7.1.1.3.3.cmml">h</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.7.m7.1b"><apply id="S3.SS1.p1.7.m7.1.1.cmml" xref="S3.SS1.p1.7.m7.1.1"><minus id="S3.SS1.p1.7.m7.1.1.1.cmml" xref="S3.SS1.p1.7.m7.1.1.1"></minus><ci id="S3.SS1.p1.7.m7.1.1.2.cmml" xref="S3.SS1.p1.7.m7.1.1.2">𝑖</ci><apply id="S3.SS1.p1.7.m7.1.1.3.cmml" xref="S3.SS1.p1.7.m7.1.1.3"><times id="S3.SS1.p1.7.m7.1.1.3.1.cmml" xref="S3.SS1.p1.7.m7.1.1.3.1"></times><ci id="S3.SS1.p1.7.m7.1.1.3.2.cmml" xref="S3.SS1.p1.7.m7.1.1.3.2">𝑡</ci><ci id="S3.SS1.p1.7.m7.1.1.3.3.cmml" xref="S3.SS1.p1.7.m7.1.1.3.3">ℎ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.7.m7.1c">i-th</annotation></semantics></math> WSI and <math id="S3.SS1.p1.8.m8.1" class="ltx_Math" alttext="M_{i}" display="inline"><semantics id="S3.SS1.p1.8.m8.1a"><msub id="S3.SS1.p1.8.m8.1.1" xref="S3.SS1.p1.8.m8.1.1.cmml"><mi id="S3.SS1.p1.8.m8.1.1.2" xref="S3.SS1.p1.8.m8.1.1.2.cmml">M</mi><mi id="S3.SS1.p1.8.m8.1.1.3" xref="S3.SS1.p1.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.8.m8.1b"><apply id="S3.SS1.p1.8.m8.1.1.cmml" xref="S3.SS1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.8.m8.1.1.1.cmml" xref="S3.SS1.p1.8.m8.1.1">subscript</csymbol><ci id="S3.SS1.p1.8.m8.1.1.2.cmml" xref="S3.SS1.p1.8.m8.1.1.2">𝑀</ci><ci id="S3.SS1.p1.8.m8.1.1.3.cmml" xref="S3.SS1.p1.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.8.m8.1c">M_{i}</annotation></semantics></math> is the sequence length which is usually larger than 10000. A visual extractor <math id="S3.SS1.p1.9.m9.1" class="ltx_Math" alttext="h" display="inline"><semantics id="S3.SS1.p1.9.m9.1a"><mi id="S3.SS1.p1.9.m9.1.1" xref="S3.SS1.p1.9.m9.1.1.cmml">h</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.9.m9.1b"><ci id="S3.SS1.p1.9.m9.1.1.cmml" xref="S3.SS1.p1.9.m9.1.1">ℎ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.9.m9.1c">h</annotation></semantics></math> is adopted to extract patch embeddings, denoted as <math id="S3.SS1.p1.10.m10.1" class="ltx_Math" alttext="h(\{x_{i}^{j}\})\in\mathbb{R}^{M_{i}\times l}" display="inline"><semantics id="S3.SS1.p1.10.m10.1a"><mrow id="S3.SS1.p1.10.m10.1.1" xref="S3.SS1.p1.10.m10.1.1.cmml"><mrow id="S3.SS1.p1.10.m10.1.1.1" xref="S3.SS1.p1.10.m10.1.1.1.cmml"><mi id="S3.SS1.p1.10.m10.1.1.1.3" xref="S3.SS1.p1.10.m10.1.1.1.3.cmml">h</mi><mo lspace="0em" rspace="0em" id="S3.SS1.p1.10.m10.1.1.1.2" xref="S3.SS1.p1.10.m10.1.1.1.2.cmml">​</mo><mrow id="S3.SS1.p1.10.m10.1.1.1.1.1" xref="S3.SS1.p1.10.m10.1.1.1.cmml"><mo stretchy="false" id="S3.SS1.p1.10.m10.1.1.1.1.1.2" xref="S3.SS1.p1.10.m10.1.1.1.cmml">(</mo><mrow id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.2" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.2.cmml">{</mo><msubsup id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.2" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.2.cmml">x</mi><mi id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.3" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.3" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.3" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.2.cmml">}</mo></mrow><mo stretchy="false" id="S3.SS1.p1.10.m10.1.1.1.1.1.3" xref="S3.SS1.p1.10.m10.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS1.p1.10.m10.1.1.2" xref="S3.SS1.p1.10.m10.1.1.2.cmml">∈</mo><msup id="S3.SS1.p1.10.m10.1.1.3" xref="S3.SS1.p1.10.m10.1.1.3.cmml"><mi id="S3.SS1.p1.10.m10.1.1.3.2" xref="S3.SS1.p1.10.m10.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS1.p1.10.m10.1.1.3.3" xref="S3.SS1.p1.10.m10.1.1.3.3.cmml"><msub id="S3.SS1.p1.10.m10.1.1.3.3.2" xref="S3.SS1.p1.10.m10.1.1.3.3.2.cmml"><mi id="S3.SS1.p1.10.m10.1.1.3.3.2.2" xref="S3.SS1.p1.10.m10.1.1.3.3.2.2.cmml">M</mi><mi id="S3.SS1.p1.10.m10.1.1.3.3.2.3" xref="S3.SS1.p1.10.m10.1.1.3.3.2.3.cmml">i</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS1.p1.10.m10.1.1.3.3.1" xref="S3.SS1.p1.10.m10.1.1.3.3.1.cmml">×</mo><mi id="S3.SS1.p1.10.m10.1.1.3.3.3" xref="S3.SS1.p1.10.m10.1.1.3.3.3.cmml">l</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.10.m10.1b"><apply id="S3.SS1.p1.10.m10.1.1.cmml" xref="S3.SS1.p1.10.m10.1.1"><in id="S3.SS1.p1.10.m10.1.1.2.cmml" xref="S3.SS1.p1.10.m10.1.1.2"></in><apply id="S3.SS1.p1.10.m10.1.1.1.cmml" xref="S3.SS1.p1.10.m10.1.1.1"><times id="S3.SS1.p1.10.m10.1.1.1.2.cmml" xref="S3.SS1.p1.10.m10.1.1.1.2"></times><ci id="S3.SS1.p1.10.m10.1.1.1.3.cmml" xref="S3.SS1.p1.10.m10.1.1.1.3">ℎ</ci><set id="S3.SS1.p1.10.m10.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1"><apply id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.2">𝑥</ci><ci id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p1.10.m10.1.1.1.1.1.1.1.1.3">𝑗</ci></apply></set></apply><apply id="S3.SS1.p1.10.m10.1.1.3.cmml" xref="S3.SS1.p1.10.m10.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.10.m10.1.1.3.1.cmml" xref="S3.SS1.p1.10.m10.1.1.3">superscript</csymbol><ci id="S3.SS1.p1.10.m10.1.1.3.2.cmml" xref="S3.SS1.p1.10.m10.1.1.3.2">ℝ</ci><apply id="S3.SS1.p1.10.m10.1.1.3.3.cmml" xref="S3.SS1.p1.10.m10.1.1.3.3"><times id="S3.SS1.p1.10.m10.1.1.3.3.1.cmml" xref="S3.SS1.p1.10.m10.1.1.3.3.1"></times><apply id="S3.SS1.p1.10.m10.1.1.3.3.2.cmml" xref="S3.SS1.p1.10.m10.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.SS1.p1.10.m10.1.1.3.3.2.1.cmml" xref="S3.SS1.p1.10.m10.1.1.3.3.2">subscript</csymbol><ci id="S3.SS1.p1.10.m10.1.1.3.3.2.2.cmml" xref="S3.SS1.p1.10.m10.1.1.3.3.2.2">𝑀</ci><ci id="S3.SS1.p1.10.m10.1.1.3.3.2.3.cmml" xref="S3.SS1.p1.10.m10.1.1.3.3.2.3">𝑖</ci></apply><ci id="S3.SS1.p1.10.m10.1.1.3.3.3.cmml" xref="S3.SS1.p1.10.m10.1.1.3.3.3">𝑙</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.10.m10.1c">h(\{x_{i}^{j}\})\in\mathbb{R}^{M_{i}\times l}</annotation></semantics></math> where <math id="S3.SS1.p1.11.m11.1" class="ltx_Math" alttext="l" display="inline"><semantics id="S3.SS1.p1.11.m11.1a"><mi id="S3.SS1.p1.11.m11.1.1" xref="S3.SS1.p1.11.m11.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.11.m11.1b"><ci id="S3.SS1.p1.11.m11.1.1.cmml" xref="S3.SS1.p1.11.m11.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.11.m11.1c">l</annotation></semantics></math> is the embedding size.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.5" class="ltx_p">The question can be seen as a sequence of tokens after tokenization, which is formulated as <math id="S3.SS1.p2.1.m1.1" class="ltx_Math" alttext="Q_{i}=\{q_{i}^{j}\}_{j=1}^{T_{i}}" display="inline"><semantics id="S3.SS1.p2.1.m1.1a"><mrow id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml"><msub id="S3.SS1.p2.1.m1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.3.cmml"><mi id="S3.SS1.p2.1.m1.1.1.3.2" xref="S3.SS1.p2.1.m1.1.1.3.2.cmml">Q</mi><mi id="S3.SS1.p2.1.m1.1.1.3.3" xref="S3.SS1.p2.1.m1.1.1.3.3.cmml">i</mi></msub><mo id="S3.SS1.p2.1.m1.1.1.2" xref="S3.SS1.p2.1.m1.1.1.2.cmml">=</mo><msubsup id="S3.SS1.p2.1.m1.1.1.1" xref="S3.SS1.p2.1.m1.1.1.1.cmml"><mrow id="S3.SS1.p2.1.m1.1.1.1.1.1.1" xref="S3.SS1.p2.1.m1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.SS1.p2.1.m1.1.1.1.1.1.1.2" xref="S3.SS1.p2.1.m1.1.1.1.1.1.2.cmml">{</mo><msubsup id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.2" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.2.cmml">q</mi><mi id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.3" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.SS1.p2.1.m1.1.1.1.1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS1.p2.1.m1.1.1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.1.1.3.cmml"><mi id="S3.SS1.p2.1.m1.1.1.1.1.3.2" xref="S3.SS1.p2.1.m1.1.1.1.1.3.2.cmml">j</mi><mo id="S3.SS1.p2.1.m1.1.1.1.1.3.1" xref="S3.SS1.p2.1.m1.1.1.1.1.3.1.cmml">=</mo><mn id="S3.SS1.p2.1.m1.1.1.1.1.3.3" xref="S3.SS1.p2.1.m1.1.1.1.1.3.3.cmml">1</mn></mrow><msub id="S3.SS1.p2.1.m1.1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.1.3.cmml"><mi id="S3.SS1.p2.1.m1.1.1.1.3.2" xref="S3.SS1.p2.1.m1.1.1.1.3.2.cmml">T</mi><mi id="S3.SS1.p2.1.m1.1.1.1.3.3" xref="S3.SS1.p2.1.m1.1.1.1.3.3.cmml">i</mi></msub></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><apply id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1"><eq id="S3.SS1.p2.1.m1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.2"></eq><apply id="S3.SS1.p2.1.m1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.3.1.cmml" xref="S3.SS1.p2.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS1.p2.1.m1.1.1.3.2.cmml" xref="S3.SS1.p2.1.m1.1.1.3.2">𝑄</ci><ci id="S3.SS1.p2.1.m1.1.1.3.3.cmml" xref="S3.SS1.p2.1.m1.1.1.3.3">𝑖</ci></apply><apply id="S3.SS1.p2.1.m1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.1">superscript</csymbol><apply id="S3.SS1.p2.1.m1.1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.1">subscript</csymbol><set id="S3.SS1.p2.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1"><apply id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.2">𝑞</ci><ci id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.1.3">𝑗</ci></apply></set><apply id="S3.SS1.p2.1.m1.1.1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.3"><eq id="S3.SS1.p2.1.m1.1.1.1.1.3.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.3.1"></eq><ci id="S3.SS1.p2.1.m1.1.1.1.1.3.2.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.3.2">𝑗</ci><cn type="integer" id="S3.SS1.p2.1.m1.1.1.1.1.3.3.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.3.3">1</cn></apply></apply><apply id="S3.SS1.p2.1.m1.1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.1.3.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1.3">subscript</csymbol><ci id="S3.SS1.p2.1.m1.1.1.1.3.2.cmml" xref="S3.SS1.p2.1.m1.1.1.1.3.2">𝑇</ci><ci id="S3.SS1.p2.1.m1.1.1.1.3.3.cmml" xref="S3.SS1.p2.1.m1.1.1.1.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">Q_{i}=\{q_{i}^{j}\}_{j=1}^{T_{i}}</annotation></semantics></math> where <math id="S3.SS1.p2.2.m2.1" class="ltx_Math" alttext="T_{i}" display="inline"><semantics id="S3.SS1.p2.2.m2.1a"><msub id="S3.SS1.p2.2.m2.1.1" xref="S3.SS1.p2.2.m2.1.1.cmml"><mi id="S3.SS1.p2.2.m2.1.1.2" xref="S3.SS1.p2.2.m2.1.1.2.cmml">T</mi><mi id="S3.SS1.p2.2.m2.1.1.3" xref="S3.SS1.p2.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.1b"><apply id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.2.m2.1.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.p2.2.m2.1.1.2.cmml" xref="S3.SS1.p2.2.m2.1.1.2">𝑇</ci><ci id="S3.SS1.p2.2.m2.1.1.3.cmml" xref="S3.SS1.p2.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.1c">T_{i}</annotation></semantics></math> is the number of tokens. We use a text extractor <math id="S3.SS1.p2.3.m3.1" class="ltx_Math" alttext="g" display="inline"><semantics id="S3.SS1.p2.3.m3.1a"><mi id="S3.SS1.p2.3.m3.1.1" xref="S3.SS1.p2.3.m3.1.1.cmml">g</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m3.1b"><ci id="S3.SS1.p2.3.m3.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1">𝑔</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m3.1c">g</annotation></semantics></math> to transform the tokens into word embeddings, denoted as <math id="S3.SS1.p2.4.m4.1" class="ltx_Math" alttext="g(\{q_{i}^{j}\})\in\mathbb{R}^{T_{i}\times k}" display="inline"><semantics id="S3.SS1.p2.4.m4.1a"><mrow id="S3.SS1.p2.4.m4.1.1" xref="S3.SS1.p2.4.m4.1.1.cmml"><mrow id="S3.SS1.p2.4.m4.1.1.1" xref="S3.SS1.p2.4.m4.1.1.1.cmml"><mi id="S3.SS1.p2.4.m4.1.1.1.3" xref="S3.SS1.p2.4.m4.1.1.1.3.cmml">g</mi><mo lspace="0em" rspace="0em" id="S3.SS1.p2.4.m4.1.1.1.2" xref="S3.SS1.p2.4.m4.1.1.1.2.cmml">​</mo><mrow id="S3.SS1.p2.4.m4.1.1.1.1.1" xref="S3.SS1.p2.4.m4.1.1.1.cmml"><mo stretchy="false" id="S3.SS1.p2.4.m4.1.1.1.1.1.2" xref="S3.SS1.p2.4.m4.1.1.1.cmml">(</mo><mrow id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.2" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.2.cmml">{</mo><msubsup id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.2" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.2.cmml">q</mi><mi id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.3" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.3" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.3" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.2.cmml">}</mo></mrow><mo stretchy="false" id="S3.SS1.p2.4.m4.1.1.1.1.1.3" xref="S3.SS1.p2.4.m4.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS1.p2.4.m4.1.1.2" xref="S3.SS1.p2.4.m4.1.1.2.cmml">∈</mo><msup id="S3.SS1.p2.4.m4.1.1.3" xref="S3.SS1.p2.4.m4.1.1.3.cmml"><mi id="S3.SS1.p2.4.m4.1.1.3.2" xref="S3.SS1.p2.4.m4.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS1.p2.4.m4.1.1.3.3" xref="S3.SS1.p2.4.m4.1.1.3.3.cmml"><msub id="S3.SS1.p2.4.m4.1.1.3.3.2" xref="S3.SS1.p2.4.m4.1.1.3.3.2.cmml"><mi id="S3.SS1.p2.4.m4.1.1.3.3.2.2" xref="S3.SS1.p2.4.m4.1.1.3.3.2.2.cmml">T</mi><mi id="S3.SS1.p2.4.m4.1.1.3.3.2.3" xref="S3.SS1.p2.4.m4.1.1.3.3.2.3.cmml">i</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS1.p2.4.m4.1.1.3.3.1" xref="S3.SS1.p2.4.m4.1.1.3.3.1.cmml">×</mo><mi id="S3.SS1.p2.4.m4.1.1.3.3.3" xref="S3.SS1.p2.4.m4.1.1.3.3.3.cmml">k</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.4.m4.1b"><apply id="S3.SS1.p2.4.m4.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1"><in id="S3.SS1.p2.4.m4.1.1.2.cmml" xref="S3.SS1.p2.4.m4.1.1.2"></in><apply id="S3.SS1.p2.4.m4.1.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1.1"><times id="S3.SS1.p2.4.m4.1.1.1.2.cmml" xref="S3.SS1.p2.4.m4.1.1.1.2"></times><ci id="S3.SS1.p2.4.m4.1.1.1.3.cmml" xref="S3.SS1.p2.4.m4.1.1.1.3">𝑔</ci><set id="S3.SS1.p2.4.m4.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1"><apply id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.2">𝑞</ci><ci id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.4.m4.1.1.1.1.1.1.1.1.3">𝑗</ci></apply></set></apply><apply id="S3.SS1.p2.4.m4.1.1.3.cmml" xref="S3.SS1.p2.4.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.1.1.3.1.cmml" xref="S3.SS1.p2.4.m4.1.1.3">superscript</csymbol><ci id="S3.SS1.p2.4.m4.1.1.3.2.cmml" xref="S3.SS1.p2.4.m4.1.1.3.2">ℝ</ci><apply id="S3.SS1.p2.4.m4.1.1.3.3.cmml" xref="S3.SS1.p2.4.m4.1.1.3.3"><times id="S3.SS1.p2.4.m4.1.1.3.3.1.cmml" xref="S3.SS1.p2.4.m4.1.1.3.3.1"></times><apply id="S3.SS1.p2.4.m4.1.1.3.3.2.cmml" xref="S3.SS1.p2.4.m4.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.1.1.3.3.2.1.cmml" xref="S3.SS1.p2.4.m4.1.1.3.3.2">subscript</csymbol><ci id="S3.SS1.p2.4.m4.1.1.3.3.2.2.cmml" xref="S3.SS1.p2.4.m4.1.1.3.3.2.2">𝑇</ci><ci id="S3.SS1.p2.4.m4.1.1.3.3.2.3.cmml" xref="S3.SS1.p2.4.m4.1.1.3.3.2.3">𝑖</ci></apply><ci id="S3.SS1.p2.4.m4.1.1.3.3.3.cmml" xref="S3.SS1.p2.4.m4.1.1.3.3.3">𝑘</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.4.m4.1c">g(\{q_{i}^{j}\})\in\mathbb{R}^{T_{i}\times k}</annotation></semantics></math> where <math id="S3.SS1.p2.5.m5.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS1.p2.5.m5.1a"><mi id="S3.SS1.p2.5.m5.1.1" xref="S3.SS1.p2.5.m5.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.5.m5.1b"><ci id="S3.SS1.p2.5.m5.1.1.cmml" xref="S3.SS1.p2.5.m5.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.5.m5.1c">k</annotation></semantics></math> is the embedding size for word embeddings.</p>
</div>
<div id="S3.SS1.p3" class="ltx_para">
<p id="S3.SS1.p3.3" class="ltx_p">A generative model is incorporated to generate the answer <math id="S3.SS1.p3.1.m1.1" class="ltx_Math" alttext="Y_{i}=\{y_{i}^{j}\}_{j=1}^{N_{i}}" display="inline"><semantics id="S3.SS1.p3.1.m1.1a"><mrow id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml"><msub id="S3.SS1.p3.1.m1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.3.cmml"><mi id="S3.SS1.p3.1.m1.1.1.3.2" xref="S3.SS1.p3.1.m1.1.1.3.2.cmml">Y</mi><mi id="S3.SS1.p3.1.m1.1.1.3.3" xref="S3.SS1.p3.1.m1.1.1.3.3.cmml">i</mi></msub><mo id="S3.SS1.p3.1.m1.1.1.2" xref="S3.SS1.p3.1.m1.1.1.2.cmml">=</mo><msubsup id="S3.SS1.p3.1.m1.1.1.1" xref="S3.SS1.p3.1.m1.1.1.1.cmml"><mrow id="S3.SS1.p3.1.m1.1.1.1.1.1.1" xref="S3.SS1.p3.1.m1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.SS1.p3.1.m1.1.1.1.1.1.1.2" xref="S3.SS1.p3.1.m1.1.1.1.1.1.2.cmml">{</mo><msubsup id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.2" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.2.cmml">y</mi><mi id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.3" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.SS1.p3.1.m1.1.1.1.1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS1.p3.1.m1.1.1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.1.1.3.cmml"><mi id="S3.SS1.p3.1.m1.1.1.1.1.3.2" xref="S3.SS1.p3.1.m1.1.1.1.1.3.2.cmml">j</mi><mo id="S3.SS1.p3.1.m1.1.1.1.1.3.1" xref="S3.SS1.p3.1.m1.1.1.1.1.3.1.cmml">=</mo><mn id="S3.SS1.p3.1.m1.1.1.1.1.3.3" xref="S3.SS1.p3.1.m1.1.1.1.1.3.3.cmml">1</mn></mrow><msub id="S3.SS1.p3.1.m1.1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.1.3.cmml"><mi id="S3.SS1.p3.1.m1.1.1.1.3.2" xref="S3.SS1.p3.1.m1.1.1.1.3.2.cmml">N</mi><mi id="S3.SS1.p3.1.m1.1.1.1.3.3" xref="S3.SS1.p3.1.m1.1.1.1.3.3.cmml">i</mi></msub></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.1b"><apply id="S3.SS1.p3.1.m1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1"><eq id="S3.SS1.p3.1.m1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.2"></eq><apply id="S3.SS1.p3.1.m1.1.1.3.cmml" xref="S3.SS1.p3.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.3.1.cmml" xref="S3.SS1.p3.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS1.p3.1.m1.1.1.3.2.cmml" xref="S3.SS1.p3.1.m1.1.1.3.2">𝑌</ci><ci id="S3.SS1.p3.1.m1.1.1.3.3.cmml" xref="S3.SS1.p3.1.m1.1.1.3.3">𝑖</ci></apply><apply id="S3.SS1.p3.1.m1.1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.1">superscript</csymbol><apply id="S3.SS1.p3.1.m1.1.1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.1">subscript</csymbol><set id="S3.SS1.p3.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1"><apply id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.2">𝑦</ci><ci id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.1.1.1.3">𝑗</ci></apply></set><apply id="S3.SS1.p3.1.m1.1.1.1.1.3.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.3"><eq id="S3.SS1.p3.1.m1.1.1.1.1.3.1.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.3.1"></eq><ci id="S3.SS1.p3.1.m1.1.1.1.1.3.2.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.3.2">𝑗</ci><cn type="integer" id="S3.SS1.p3.1.m1.1.1.1.1.3.3.cmml" xref="S3.SS1.p3.1.m1.1.1.1.1.3.3">1</cn></apply></apply><apply id="S3.SS1.p3.1.m1.1.1.1.3.cmml" xref="S3.SS1.p3.1.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.1.3.1.cmml" xref="S3.SS1.p3.1.m1.1.1.1.3">subscript</csymbol><ci id="S3.SS1.p3.1.m1.1.1.1.3.2.cmml" xref="S3.SS1.p3.1.m1.1.1.1.3.2">𝑁</ci><ci id="S3.SS1.p3.1.m1.1.1.1.3.3.cmml" xref="S3.SS1.p3.1.m1.1.1.1.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.1c">Y_{i}=\{y_{i}^{j}\}_{j=1}^{N_{i}}</annotation></semantics></math> where <math id="S3.SS1.p3.2.m2.1" class="ltx_Math" alttext="N_{i}" display="inline"><semantics id="S3.SS1.p3.2.m2.1a"><msub id="S3.SS1.p3.2.m2.1.1" xref="S3.SS1.p3.2.m2.1.1.cmml"><mi id="S3.SS1.p3.2.m2.1.1.2" xref="S3.SS1.p3.2.m2.1.1.2.cmml">N</mi><mi id="S3.SS1.p3.2.m2.1.1.3" xref="S3.SS1.p3.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.2.m2.1b"><apply id="S3.SS1.p3.2.m2.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.2.m2.1.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.p3.2.m2.1.1.2.cmml" xref="S3.SS1.p3.2.m2.1.1.2">𝑁</ci><ci id="S3.SS1.p3.2.m2.1.1.3.cmml" xref="S3.SS1.p3.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.2.m2.1c">N_{i}</annotation></semantics></math> is the length of target sequence. The model parameterized by <math id="S3.SS1.p3.3.m3.1" class="ltx_Math" alttext="\phi" display="inline"><semantics id="S3.SS1.p3.3.m3.1a"><mi id="S3.SS1.p3.3.m3.1.1" xref="S3.SS1.p3.3.m3.1.1.cmml">ϕ</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.3.m3.1b"><ci id="S3.SS1.p3.3.m3.1.1.cmml" xref="S3.SS1.p3.3.m3.1.1">italic-ϕ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.3.m3.1c">\phi</annotation></semantics></math> is trained with language model loss objectives that seek the maximization of the sum of conditional possibilities of words in the sequence. The negative log-likelihood (NLL) loss can be formulated as:</p>
</div>
<div id="S3.SS1.p4" class="ltx_para">
<table id="S3.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E1.m1.2" class="ltx_Math" alttext="L=-\sum_{i}\sum_{t=1}^{N}log(y_{t}|h(\{x_{i}^{j}\}),g(\{q_{i}^{j}\}),\{y_{i}^{j}\}_{j&lt;t};\phi)." display="block"><semantics id="S3.E1.m1.2a"><mrow id="S3.E1.m1.2.2.1" xref="S3.E1.m1.2.2.1.1.cmml"><mrow id="S3.E1.m1.2.2.1.1" xref="S3.E1.m1.2.2.1.1.cmml"><mi id="S3.E1.m1.2.2.1.1.3" xref="S3.E1.m1.2.2.1.1.3.cmml">L</mi><mo id="S3.E1.m1.2.2.1.1.2" xref="S3.E1.m1.2.2.1.1.2.cmml">=</mo><mrow id="S3.E1.m1.2.2.1.1.1" xref="S3.E1.m1.2.2.1.1.1.cmml"><mo id="S3.E1.m1.2.2.1.1.1a" xref="S3.E1.m1.2.2.1.1.1.cmml">−</mo><mrow id="S3.E1.m1.2.2.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.cmml"><munder id="S3.E1.m1.2.2.1.1.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.2.cmml"><mo movablelimits="false" rspace="0em" id="S3.E1.m1.2.2.1.1.1.1.2.2" xref="S3.E1.m1.2.2.1.1.1.1.2.2.cmml">∑</mo><mi id="S3.E1.m1.2.2.1.1.1.1.2.3" xref="S3.E1.m1.2.2.1.1.1.1.2.3.cmml">i</mi></munder><mrow id="S3.E1.m1.2.2.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.cmml"><munderover id="S3.E1.m1.2.2.1.1.1.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.2.cmml"><mo movablelimits="false" id="S3.E1.m1.2.2.1.1.1.1.1.2.2.2" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.2.2.3" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.2" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.2.cmml">t</mi><mo id="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.1" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.3" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S3.E1.m1.2.2.1.1.1.1.1.2.3" xref="S3.E1.m1.2.2.1.1.1.1.1.2.3.cmml">N</mi></munderover><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.2.2.1.1.1.1.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.2.cmml">​</mo><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.4" xref="S3.E1.m1.2.2.1.1.1.1.1.1.4.cmml">o</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.2.2.1.1.1.1.1.1.2a" xref="S3.E1.m1.2.2.1.1.1.1.1.1.2.cmml">​</mo><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.5" xref="S3.E1.m1.2.2.1.1.1.1.1.1.5.cmml">g</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.2.2.1.1.1.1.1.1.2b" xref="S3.E1.m1.2.2.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.2.cmml">y</mi><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.3.cmml">t</mi></msub><mo fence="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.4" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.4.cmml">|</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.4.cmml"><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">h</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">{</mo><msubsup id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml">x</mi><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">}</mo></mrow><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.4" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.4.cmml">,</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml">g</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml">​</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.cmml">(</mo><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.2.cmml"><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.2.cmml">{</mo><msubsup id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.2.cmml">q</mi><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.2.cmml">}</mo></mrow><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.5" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.4.cmml">,</mo><msub id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.cmml"><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.2.cmml"><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.2.cmml">{</mo><msubsup id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.2.cmml">y</mi><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.3.cmml">i</mi><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.2.cmml">}</mo></mrow><mrow id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.cmml"><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.2" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.2.cmml">j</mi><mo id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.1" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.1.cmml">&lt;</mo><mi id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.3.cmml">t</mi></mrow></msub><mo id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.6" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.4.cmml">;</mo><mi id="S3.E1.m1.1.1" xref="S3.E1.m1.1.1.cmml">ϕ</mi></mrow></mrow><mo stretchy="false" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><mo lspace="0em" id="S3.E1.m1.2.2.1.2" xref="S3.E1.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.2b"><apply id="S3.E1.m1.2.2.1.1.cmml" xref="S3.E1.m1.2.2.1"><eq id="S3.E1.m1.2.2.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.2"></eq><ci id="S3.E1.m1.2.2.1.1.3.cmml" xref="S3.E1.m1.2.2.1.1.3">𝐿</ci><apply id="S3.E1.m1.2.2.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1"><minus id="S3.E1.m1.2.2.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1"></minus><apply id="S3.E1.m1.2.2.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1"><apply id="S3.E1.m1.2.2.1.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.2.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.2">subscript</csymbol><sum id="S3.E1.m1.2.2.1.1.1.1.2.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.2.2"></sum><ci id="S3.E1.m1.2.2.1.1.1.1.2.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.2.3">𝑖</ci></apply><apply id="S3.E1.m1.2.2.1.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1"><apply id="S3.E1.m1.2.2.1.1.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.2.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2">superscript</csymbol><apply id="S3.E1.m1.2.2.1.1.1.1.1.2.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.2.2.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2">subscript</csymbol><sum id="S3.E1.m1.2.2.1.1.1.1.1.2.2.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.2"></sum><apply id="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.3"><eq id="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.1"></eq><ci id="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.2">𝑡</ci><cn type="integer" id="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="S3.E1.m1.2.2.1.1.1.1.1.2.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.2.3">𝑁</ci></apply><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1"><times id="S3.E1.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.2"></times><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.3">𝑙</ci><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.4.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.4">𝑜</ci><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.5.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.5">𝑔</ci><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.4.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.4">conditional</csymbol><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5">subscript</csymbol><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.2">𝑦</ci><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.5.3">𝑡</ci></apply><list id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.4.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3"><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1"><times id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.2"></times><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.3">ℎ</ci><set id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.2">𝑥</ci><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3">𝑗</ci></apply></set></apply><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2"><times id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.2"></times><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.3">𝑔</ci><set id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1"><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1">superscript</csymbol><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.2">𝑞</ci><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.2.1.1.1.1.1.3">𝑗</ci></apply></set></apply><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3">subscript</csymbol><set id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1"><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1">superscript</csymbol><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1">subscript</csymbol><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.2">𝑦</ci><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.2.3">𝑖</ci></apply><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.1.1.1.3">𝑗</ci></apply></set><apply id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3"><lt id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.1.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.1"></lt><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.2.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.2">𝑗</ci><ci id="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.3.cmml" xref="S3.E1.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.3.3.3">𝑡</ci></apply></apply><ci id="S3.E1.m1.1.1.cmml" xref="S3.E1.m1.1.1">italic-ϕ</ci></list></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.2c">L=-\sum_{i}\sum_{t=1}^{N}log(y_{t}|h(\{x_{i}^{j}\}),g(\{q_{i}^{j}\}),\{y_{i}^{j}\}_{j&lt;t};\phi).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<div id="S3.SS1.p5" class="ltx_para">
<p id="S3.SS1.p5.1" class="ltx_p">Given the patch embeddings, word embeddings, and the previous sequence <math id="S3.SS1.p5.1.m1.1" class="ltx_Math" alttext="\{y_{i}^{j}\}_{j&lt;t}" display="inline"><semantics id="S3.SS1.p5.1.m1.1a"><msub id="S3.SS1.p5.1.m1.1.1" xref="S3.SS1.p5.1.m1.1.1.cmml"><mrow id="S3.SS1.p5.1.m1.1.1.1.1" xref="S3.SS1.p5.1.m1.1.1.1.2.cmml"><mo stretchy="false" id="S3.SS1.p5.1.m1.1.1.1.1.2" xref="S3.SS1.p5.1.m1.1.1.1.2.cmml">{</mo><msubsup id="S3.SS1.p5.1.m1.1.1.1.1.1" xref="S3.SS1.p5.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS1.p5.1.m1.1.1.1.1.1.2.2" xref="S3.SS1.p5.1.m1.1.1.1.1.1.2.2.cmml">y</mi><mi id="S3.SS1.p5.1.m1.1.1.1.1.1.2.3" xref="S3.SS1.p5.1.m1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.SS1.p5.1.m1.1.1.1.1.1.3" xref="S3.SS1.p5.1.m1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.SS1.p5.1.m1.1.1.1.1.3" xref="S3.SS1.p5.1.m1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS1.p5.1.m1.1.1.3" xref="S3.SS1.p5.1.m1.1.1.3.cmml"><mi id="S3.SS1.p5.1.m1.1.1.3.2" xref="S3.SS1.p5.1.m1.1.1.3.2.cmml">j</mi><mo id="S3.SS1.p5.1.m1.1.1.3.1" xref="S3.SS1.p5.1.m1.1.1.3.1.cmml">&lt;</mo><mi id="S3.SS1.p5.1.m1.1.1.3.3" xref="S3.SS1.p5.1.m1.1.1.3.3.cmml">t</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.1.m1.1b"><apply id="S3.SS1.p5.1.m1.1.1.cmml" xref="S3.SS1.p5.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p5.1.m1.1.1.2.cmml" xref="S3.SS1.p5.1.m1.1.1">subscript</csymbol><set id="S3.SS1.p5.1.m1.1.1.1.2.cmml" xref="S3.SS1.p5.1.m1.1.1.1.1"><apply id="S3.SS1.p5.1.m1.1.1.1.1.1.cmml" xref="S3.SS1.p5.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p5.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS1.p5.1.m1.1.1.1.1.1">superscript</csymbol><apply id="S3.SS1.p5.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS1.p5.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p5.1.m1.1.1.1.1.1.2.1.cmml" xref="S3.SS1.p5.1.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS1.p5.1.m1.1.1.1.1.1.2.2.cmml" xref="S3.SS1.p5.1.m1.1.1.1.1.1.2.2">𝑦</ci><ci id="S3.SS1.p5.1.m1.1.1.1.1.1.2.3.cmml" xref="S3.SS1.p5.1.m1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p5.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS1.p5.1.m1.1.1.1.1.1.3">𝑗</ci></apply></set><apply id="S3.SS1.p5.1.m1.1.1.3.cmml" xref="S3.SS1.p5.1.m1.1.1.3"><lt id="S3.SS1.p5.1.m1.1.1.3.1.cmml" xref="S3.SS1.p5.1.m1.1.1.3.1"></lt><ci id="S3.SS1.p5.1.m1.1.1.3.2.cmml" xref="S3.SS1.p5.1.m1.1.1.3.2">𝑗</ci><ci id="S3.SS1.p5.1.m1.1.1.3.3.cmml" xref="S3.SS1.p5.1.m1.1.1.3.3">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.1.m1.1c">\{y_{i}^{j}\}_{j&lt;t}</annotation></semantics></math>, the probability of the next word to be generated can be calculated.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Preprocessing for Bag Construction</h3>

<figure id="S3.F3" class="ltx_figure"><img src="/html/2407.05603/assets/pic/model.png" id="S3.F3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="215" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S3.F3.8.4.1" class="ltx_text" style="font-size:90%;">Figure 3</span>: </span><span id="S3.F3.6.3" class="ltx_text" style="font-size:90%;">Sturcture of our proposed VQA model. First, the WSI and the question are processed and tokenized for subsequent stages. Then, various visual and text extractors are applied to extract embeddings given visual and word tokens. <math id="S3.F3.4.1.m1.1" class="ltx_Math" alttext="T_{e}" display="inline"><semantics id="S3.F3.4.1.m1.1b"><msub id="S3.F3.4.1.m1.1.1" xref="S3.F3.4.1.m1.1.1.cmml"><mi id="S3.F3.4.1.m1.1.1.2" xref="S3.F3.4.1.m1.1.1.2.cmml">T</mi><mi id="S3.F3.4.1.m1.1.1.3" xref="S3.F3.4.1.m1.1.1.3.cmml">e</mi></msub><annotation-xml encoding="MathML-Content" id="S3.F3.4.1.m1.1c"><apply id="S3.F3.4.1.m1.1.1.cmml" xref="S3.F3.4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.F3.4.1.m1.1.1.1.cmml" xref="S3.F3.4.1.m1.1.1">subscript</csymbol><ci id="S3.F3.4.1.m1.1.1.2.cmml" xref="S3.F3.4.1.m1.1.1.2">𝑇</ci><ci id="S3.F3.4.1.m1.1.1.3.cmml" xref="S3.F3.4.1.m1.1.1.3">𝑒</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F3.4.1.m1.1d">T_{e}</annotation></semantics></math> stands for the transformer encoder and <math id="S3.F3.5.2.m2.1" class="ltx_Math" alttext="T_{l}" display="inline"><semantics id="S3.F3.5.2.m2.1b"><msub id="S3.F3.5.2.m2.1.1" xref="S3.F3.5.2.m2.1.1.cmml"><mi id="S3.F3.5.2.m2.1.1.2" xref="S3.F3.5.2.m2.1.1.2.cmml">T</mi><mi id="S3.F3.5.2.m2.1.1.3" xref="S3.F3.5.2.m2.1.1.3.cmml">l</mi></msub><annotation-xml encoding="MathML-Content" id="S3.F3.5.2.m2.1c"><apply id="S3.F3.5.2.m2.1.1.cmml" xref="S3.F3.5.2.m2.1.1"><csymbol cd="ambiguous" id="S3.F3.5.2.m2.1.1.1.cmml" xref="S3.F3.5.2.m2.1.1">subscript</csymbol><ci id="S3.F3.5.2.m2.1.1.2.cmml" xref="S3.F3.5.2.m2.1.1.2">𝑇</ci><ci id="S3.F3.5.2.m2.1.1.3.cmml" xref="S3.F3.5.2.m2.1.1.3">𝑙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F3.5.2.m2.1d">T_{l}</annotation></semantics></math> represents the linear mapping, aiming to achieve alignment between visual and word embeddings. The interaction mechanism between different modalities, which is instantiated as the co-attention in the transformer decoder <math id="S3.F3.6.3.m3.1" class="ltx_Math" alttext="T_{d}" display="inline"><semantics id="S3.F3.6.3.m3.1b"><msub id="S3.F3.6.3.m3.1.1" xref="S3.F3.6.3.m3.1.1.cmml"><mi id="S3.F3.6.3.m3.1.1.2" xref="S3.F3.6.3.m3.1.1.2.cmml">T</mi><mi id="S3.F3.6.3.m3.1.1.3" xref="S3.F3.6.3.m3.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S3.F3.6.3.m3.1c"><apply id="S3.F3.6.3.m3.1.1.cmml" xref="S3.F3.6.3.m3.1.1"><csymbol cd="ambiguous" id="S3.F3.6.3.m3.1.1.1.cmml" xref="S3.F3.6.3.m3.1.1">subscript</csymbol><ci id="S3.F3.6.3.m3.1.1.2.cmml" xref="S3.F3.6.3.m3.1.1.2">𝑇</ci><ci id="S3.F3.6.3.m3.1.1.3.cmml" xref="S3.F3.6.3.m3.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F3.6.3.m3.1d">T_{d}</annotation></semantics></math>, is adopted to generate the answer.
</span></figcaption>
</figure>
<section id="S3.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.1 </span>Visual Embeddings.</h4>

<div id="S3.SS2.SSS1.p1" class="ltx_para">
<p id="S3.SS2.SSS1.p1.1" class="ltx_p">In natural VQA, it is GPU-feasible to directly feed the image so that the visual embeddings are trainable. In the pathology field, we follow the curriculum of previous MIL approaches where the large image is cut down into small individual patches. We first perform preprocessing to remove the non-informative regions which make up 70% of a typical whole slide image. In specific, the whole slide image is transformed in the color space from RGB to HSV at low objectives. Then, we use thresholding to filter out the white regions based on the saturation channel. Then, we crop the non-overlapped patches on the foreground region with a sliding window.</p>
</div>
<div id="S3.SS2.SSS1.p2" class="ltx_para">
<p id="S3.SS2.SSS1.p2.3" class="ltx_p">After obtaining the patches <math id="S3.SS2.SSS1.p2.1.m1.1" class="ltx_Math" alttext="\{x_{i}^{j}\}_{j=1}^{M_{i}}" display="inline"><semantics id="S3.SS2.SSS1.p2.1.m1.1a"><msubsup id="S3.SS2.SSS1.p2.1.m1.1.1" xref="S3.SS2.SSS1.p2.1.m1.1.1.cmml"><mrow id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.2" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.2.cmml">{</mo><msubsup id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.cmml"><mi id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.2" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.2.cmml">x</mi><mi id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.3" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.3" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.3" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.SS2.SSS1.p2.1.m1.1.1.1.3" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.3.cmml"><mi id="S3.SS2.SSS1.p2.1.m1.1.1.1.3.2" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.3.2.cmml">j</mi><mo id="S3.SS2.SSS1.p2.1.m1.1.1.1.3.1" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.3.1.cmml">=</mo><mn id="S3.SS2.SSS1.p2.1.m1.1.1.1.3.3" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.3.3.cmml">1</mn></mrow><msub id="S3.SS2.SSS1.p2.1.m1.1.1.3" xref="S3.SS2.SSS1.p2.1.m1.1.1.3.cmml"><mi id="S3.SS2.SSS1.p2.1.m1.1.1.3.2" xref="S3.SS2.SSS1.p2.1.m1.1.1.3.2.cmml">M</mi><mi id="S3.SS2.SSS1.p2.1.m1.1.1.3.3" xref="S3.SS2.SSS1.p2.1.m1.1.1.3.3.cmml">i</mi></msub></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.1.m1.1b"><apply id="S3.SS2.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.1.m1.1.1.2.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1">superscript</csymbol><apply id="S3.SS2.SSS1.p2.1.m1.1.1.1.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.1.m1.1.1.1.2.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1">subscript</csymbol><set id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.2.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1"><apply id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.1.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.2">𝑥</ci><ci id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.3.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.3.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.1.1.1.3">𝑗</ci></apply></set><apply id="S3.SS2.SSS1.p2.1.m1.1.1.1.3.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.3"><eq id="S3.SS2.SSS1.p2.1.m1.1.1.1.3.1.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.3.1"></eq><ci id="S3.SS2.SSS1.p2.1.m1.1.1.1.3.2.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.3.2">𝑗</ci><cn type="integer" id="S3.SS2.SSS1.p2.1.m1.1.1.1.3.3.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.1.3.3">1</cn></apply></apply><apply id="S3.SS2.SSS1.p2.1.m1.1.1.3.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS1.p2.1.m1.1.1.3.1.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS2.SSS1.p2.1.m1.1.1.3.2.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.3.2">𝑀</ci><ci id="S3.SS2.SSS1.p2.1.m1.1.1.3.3.cmml" xref="S3.SS2.SSS1.p2.1.m1.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.1.m1.1c">\{x_{i}^{j}\}_{j=1}^{M_{i}}</annotation></semantics></math>, we apply pre-trained neural networks to extract features from these patches. The <math id="S3.SS2.SSS1.p2.2.m2.1" class="ltx_Math" alttext="256\times 256" display="inline"><semantics id="S3.SS2.SSS1.p2.2.m2.1a"><mrow id="S3.SS2.SSS1.p2.2.m2.1.1" xref="S3.SS2.SSS1.p2.2.m2.1.1.cmml"><mn id="S3.SS2.SSS1.p2.2.m2.1.1.2" xref="S3.SS2.SSS1.p2.2.m2.1.1.2.cmml">256</mn><mo lspace="0.222em" rspace="0.222em" id="S3.SS2.SSS1.p2.2.m2.1.1.1" xref="S3.SS2.SSS1.p2.2.m2.1.1.1.cmml">×</mo><mn id="S3.SS2.SSS1.p2.2.m2.1.1.3" xref="S3.SS2.SSS1.p2.2.m2.1.1.3.cmml">256</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.2.m2.1b"><apply id="S3.SS2.SSS1.p2.2.m2.1.1.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1"><times id="S3.SS2.SSS1.p2.2.m2.1.1.1.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.1"></times><cn type="integer" id="S3.SS2.SSS1.p2.2.m2.1.1.2.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.2">256</cn><cn type="integer" id="S3.SS2.SSS1.p2.2.m2.1.1.3.cmml" xref="S3.SS2.SSS1.p2.2.m2.1.1.3">256</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.2.m2.1c">256\times 256</annotation></semantics></math> patches are transformed to <math id="S3.SS2.SSS1.p2.3.m3.1" class="ltx_Math" alttext="512" display="inline"><semantics id="S3.SS2.SSS1.p2.3.m3.1a"><mn id="S3.SS2.SSS1.p2.3.m3.1.1" xref="S3.SS2.SSS1.p2.3.m3.1.1.cmml">512</mn><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p2.3.m3.1b"><cn type="integer" id="S3.SS2.SSS1.p2.3.m3.1.1.cmml" xref="S3.SS2.SSS1.p2.3.m3.1.1">512</cn></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p2.3.m3.1c">512</annotation></semantics></math>-dim visual embeddings using ResNet, largely reducing the complexity of the computation. It is noteworthy that the visual extractor is non-trainable.</p>
</div>
</section>
<section id="S3.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.2 </span>Word Embeddings.</h4>

<div id="S3.SS2.SSS2.p1" class="ltx_para">
<p id="S3.SS2.SSS2.p1.1" class="ltx_p">The sequence of the question is much shorter than visual embeddings. In the cohort of our questions, the average sequence length is 9.2 tokens, with some questions having up to 24 tokens. Therefore, it is feasible to train the word embeddings from scratch. In our experiments, we also use two well-established language models as the text extractor: BioClinicalBert <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite> and PubMedBert <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite> which are trained with abundant medical corpus, proving to yield excellent word embeddings.</p>
</div>
</section>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Interaction between WSI and Text</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.3" class="ltx_p">Current multimodal approaches in the pathology field devote efforts to linking mutually independent patches with corresponding textual descriptions <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>, which limits their ability on slide-level tasks since the WSI is the aggregation of a lot of mutually relevant patches and their collected descriptions are focused on patch-level narration. In our framework, by formulating the WSI and the text as bag representations <math id="S3.SS3.p1.1.m1.1" class="ltx_Math" alttext="E_{X}" display="inline"><semantics id="S3.SS3.p1.1.m1.1a"><msub id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml"><mi id="S3.SS3.p1.1.m1.1.1.2" xref="S3.SS3.p1.1.m1.1.1.2.cmml">E</mi><mi id="S3.SS3.p1.1.m1.1.1.3" xref="S3.SS3.p1.1.m1.1.1.3.cmml">X</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><apply id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.1.m1.1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.p1.1.m1.1.1.2.cmml" xref="S3.SS3.p1.1.m1.1.1.2">𝐸</ci><ci id="S3.SS3.p1.1.m1.1.1.3.cmml" xref="S3.SS3.p1.1.m1.1.1.3">𝑋</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">E_{X}</annotation></semantics></math> and <math id="S3.SS3.p1.2.m2.1" class="ltx_Math" alttext="E_{Q}" display="inline"><semantics id="S3.SS3.p1.2.m2.1a"><msub id="S3.SS3.p1.2.m2.1.1" xref="S3.SS3.p1.2.m2.1.1.cmml"><mi id="S3.SS3.p1.2.m2.1.1.2" xref="S3.SS3.p1.2.m2.1.1.2.cmml">E</mi><mi id="S3.SS3.p1.2.m2.1.1.3" xref="S3.SS3.p1.2.m2.1.1.3.cmml">Q</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.2.m2.1b"><apply id="S3.SS3.p1.2.m2.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.2.m2.1.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.p1.2.m2.1.1.2.cmml" xref="S3.SS3.p1.2.m2.1.1.2">𝐸</ci><ci id="S3.SS3.p1.2.m2.1.1.3.cmml" xref="S3.SS3.p1.2.m2.1.1.3">𝑄</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.2.m2.1c">E_{Q}</annotation></semantics></math>, we can not only model the interaction among patches cropped from the same WSI but also establish fine-grained interactions between patch tokens and word tokens. After obtaining the visual embeddings <math id="S3.SS3.p1.3.m3.1" class="ltx_Math" alttext="E_{X}\in\mathbb{R}^{M_{i}\times l}" display="inline"><semantics id="S3.SS3.p1.3.m3.1a"><mrow id="S3.SS3.p1.3.m3.1.1" xref="S3.SS3.p1.3.m3.1.1.cmml"><msub id="S3.SS3.p1.3.m3.1.1.2" xref="S3.SS3.p1.3.m3.1.1.2.cmml"><mi id="S3.SS3.p1.3.m3.1.1.2.2" xref="S3.SS3.p1.3.m3.1.1.2.2.cmml">E</mi><mi id="S3.SS3.p1.3.m3.1.1.2.3" xref="S3.SS3.p1.3.m3.1.1.2.3.cmml">X</mi></msub><mo id="S3.SS3.p1.3.m3.1.1.1" xref="S3.SS3.p1.3.m3.1.1.1.cmml">∈</mo><msup id="S3.SS3.p1.3.m3.1.1.3" xref="S3.SS3.p1.3.m3.1.1.3.cmml"><mi id="S3.SS3.p1.3.m3.1.1.3.2" xref="S3.SS3.p1.3.m3.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS3.p1.3.m3.1.1.3.3" xref="S3.SS3.p1.3.m3.1.1.3.3.cmml"><msub id="S3.SS3.p1.3.m3.1.1.3.3.2" xref="S3.SS3.p1.3.m3.1.1.3.3.2.cmml"><mi id="S3.SS3.p1.3.m3.1.1.3.3.2.2" xref="S3.SS3.p1.3.m3.1.1.3.3.2.2.cmml">M</mi><mi id="S3.SS3.p1.3.m3.1.1.3.3.2.3" xref="S3.SS3.p1.3.m3.1.1.3.3.2.3.cmml">i</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.p1.3.m3.1.1.3.3.1" xref="S3.SS3.p1.3.m3.1.1.3.3.1.cmml">×</mo><mi id="S3.SS3.p1.3.m3.1.1.3.3.3" xref="S3.SS3.p1.3.m3.1.1.3.3.3.cmml">l</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.3.m3.1b"><apply id="S3.SS3.p1.3.m3.1.1.cmml" xref="S3.SS3.p1.3.m3.1.1"><in id="S3.SS3.p1.3.m3.1.1.1.cmml" xref="S3.SS3.p1.3.m3.1.1.1"></in><apply id="S3.SS3.p1.3.m3.1.1.2.cmml" xref="S3.SS3.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.1.1.2.1.cmml" xref="S3.SS3.p1.3.m3.1.1.2">subscript</csymbol><ci id="S3.SS3.p1.3.m3.1.1.2.2.cmml" xref="S3.SS3.p1.3.m3.1.1.2.2">𝐸</ci><ci id="S3.SS3.p1.3.m3.1.1.2.3.cmml" xref="S3.SS3.p1.3.m3.1.1.2.3">𝑋</ci></apply><apply id="S3.SS3.p1.3.m3.1.1.3.cmml" xref="S3.SS3.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.1.1.3.1.cmml" xref="S3.SS3.p1.3.m3.1.1.3">superscript</csymbol><ci id="S3.SS3.p1.3.m3.1.1.3.2.cmml" xref="S3.SS3.p1.3.m3.1.1.3.2">ℝ</ci><apply id="S3.SS3.p1.3.m3.1.1.3.3.cmml" xref="S3.SS3.p1.3.m3.1.1.3.3"><times id="S3.SS3.p1.3.m3.1.1.3.3.1.cmml" xref="S3.SS3.p1.3.m3.1.1.3.3.1"></times><apply id="S3.SS3.p1.3.m3.1.1.3.3.2.cmml" xref="S3.SS3.p1.3.m3.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.1.1.3.3.2.1.cmml" xref="S3.SS3.p1.3.m3.1.1.3.3.2">subscript</csymbol><ci id="S3.SS3.p1.3.m3.1.1.3.3.2.2.cmml" xref="S3.SS3.p1.3.m3.1.1.3.3.2.2">𝑀</ci><ci id="S3.SS3.p1.3.m3.1.1.3.3.2.3.cmml" xref="S3.SS3.p1.3.m3.1.1.3.3.2.3">𝑖</ci></apply><ci id="S3.SS3.p1.3.m3.1.1.3.3.3.cmml" xref="S3.SS3.p1.3.m3.1.1.3.3.3">𝑙</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.3.m3.1c">E_{X}\in\mathbb{R}^{M_{i}\times l}</annotation></semantics></math>, a transformer encoder is adopted to capture the mutual instance relationship, which is formulated as below:</p>
</div>
<div id="S3.SS3.p2" class="ltx_para">
<table id="S3.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E2.m1.4" class="ltx_Math" alttext="SelfAtt(X)=softmax(\frac{QK^{T}}{\sqrt{d}})V=softmax(\frac{W_{Q}E_{X}E_{X}^{T}W_{K}^{T}}{\sqrt{d}})W_{V}E_{X}," display="block"><semantics id="S3.E2.m1.4a"><mrow id="S3.E2.m1.4.4.1" xref="S3.E2.m1.4.4.1.1.cmml"><mrow id="S3.E2.m1.4.4.1.1" xref="S3.E2.m1.4.4.1.1.cmml"><mrow id="S3.E2.m1.4.4.1.1.2" xref="S3.E2.m1.4.4.1.1.2.cmml"><mi id="S3.E2.m1.4.4.1.1.2.2" xref="S3.E2.m1.4.4.1.1.2.2.cmml">S</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.2.1" xref="S3.E2.m1.4.4.1.1.2.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.2.3" xref="S3.E2.m1.4.4.1.1.2.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.2.1a" xref="S3.E2.m1.4.4.1.1.2.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.2.4" xref="S3.E2.m1.4.4.1.1.2.4.cmml">l</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.2.1b" xref="S3.E2.m1.4.4.1.1.2.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.2.5" xref="S3.E2.m1.4.4.1.1.2.5.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.2.1c" xref="S3.E2.m1.4.4.1.1.2.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.2.6" xref="S3.E2.m1.4.4.1.1.2.6.cmml">A</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.2.1d" xref="S3.E2.m1.4.4.1.1.2.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.2.7" xref="S3.E2.m1.4.4.1.1.2.7.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.2.1e" xref="S3.E2.m1.4.4.1.1.2.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.2.8" xref="S3.E2.m1.4.4.1.1.2.8.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.2.1f" xref="S3.E2.m1.4.4.1.1.2.1.cmml">​</mo><mrow id="S3.E2.m1.4.4.1.1.2.9.2" xref="S3.E2.m1.4.4.1.1.2.cmml"><mo stretchy="false" id="S3.E2.m1.4.4.1.1.2.9.2.1" xref="S3.E2.m1.4.4.1.1.2.cmml">(</mo><mi id="S3.E2.m1.1.1" xref="S3.E2.m1.1.1.cmml">X</mi><mo stretchy="false" id="S3.E2.m1.4.4.1.1.2.9.2.2" xref="S3.E2.m1.4.4.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.4.4.1.1.3" xref="S3.E2.m1.4.4.1.1.3.cmml">=</mo><mrow id="S3.E2.m1.4.4.1.1.4" xref="S3.E2.m1.4.4.1.1.4.cmml"><mi id="S3.E2.m1.4.4.1.1.4.2" xref="S3.E2.m1.4.4.1.1.4.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.4.1" xref="S3.E2.m1.4.4.1.1.4.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.4.3" xref="S3.E2.m1.4.4.1.1.4.3.cmml">o</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.4.1a" xref="S3.E2.m1.4.4.1.1.4.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.4.4" xref="S3.E2.m1.4.4.1.1.4.4.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.4.1b" xref="S3.E2.m1.4.4.1.1.4.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.4.5" xref="S3.E2.m1.4.4.1.1.4.5.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.4.1c" xref="S3.E2.m1.4.4.1.1.4.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.4.6" xref="S3.E2.m1.4.4.1.1.4.6.cmml">m</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.4.1d" xref="S3.E2.m1.4.4.1.1.4.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.4.7" xref="S3.E2.m1.4.4.1.1.4.7.cmml">a</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.4.1e" xref="S3.E2.m1.4.4.1.1.4.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.4.8" xref="S3.E2.m1.4.4.1.1.4.8.cmml">x</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.4.1f" xref="S3.E2.m1.4.4.1.1.4.1.cmml">​</mo><mrow id="S3.E2.m1.4.4.1.1.4.9.2" xref="S3.E2.m1.2.2.cmml"><mo stretchy="false" id="S3.E2.m1.4.4.1.1.4.9.2.1" xref="S3.E2.m1.2.2.cmml">(</mo><mfrac id="S3.E2.m1.2.2" xref="S3.E2.m1.2.2.cmml"><mrow id="S3.E2.m1.2.2.2" xref="S3.E2.m1.2.2.2.cmml"><mi id="S3.E2.m1.2.2.2.2" xref="S3.E2.m1.2.2.2.2.cmml">Q</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.2.2.2.1" xref="S3.E2.m1.2.2.2.1.cmml">​</mo><msup id="S3.E2.m1.2.2.2.3" xref="S3.E2.m1.2.2.2.3.cmml"><mi id="S3.E2.m1.2.2.2.3.2" xref="S3.E2.m1.2.2.2.3.2.cmml">K</mi><mi id="S3.E2.m1.2.2.2.3.3" xref="S3.E2.m1.2.2.2.3.3.cmml">T</mi></msup></mrow><msqrt id="S3.E2.m1.2.2.3" xref="S3.E2.m1.2.2.3.cmml"><mi id="S3.E2.m1.2.2.3.2" xref="S3.E2.m1.2.2.3.2.cmml">d</mi></msqrt></mfrac><mo stretchy="false" id="S3.E2.m1.4.4.1.1.4.9.2.2" xref="S3.E2.m1.2.2.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.4.1g" xref="S3.E2.m1.4.4.1.1.4.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.4.10" xref="S3.E2.m1.4.4.1.1.4.10.cmml">V</mi></mrow><mo id="S3.E2.m1.4.4.1.1.5" xref="S3.E2.m1.4.4.1.1.5.cmml">=</mo><mrow id="S3.E2.m1.4.4.1.1.6" xref="S3.E2.m1.4.4.1.1.6.cmml"><mi id="S3.E2.m1.4.4.1.1.6.2" xref="S3.E2.m1.4.4.1.1.6.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.6.3" xref="S3.E2.m1.4.4.1.1.6.3.cmml">o</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1a" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.6.4" xref="S3.E2.m1.4.4.1.1.6.4.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1b" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.6.5" xref="S3.E2.m1.4.4.1.1.6.5.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1c" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.6.6" xref="S3.E2.m1.4.4.1.1.6.6.cmml">m</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1d" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.6.7" xref="S3.E2.m1.4.4.1.1.6.7.cmml">a</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1e" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><mi id="S3.E2.m1.4.4.1.1.6.8" xref="S3.E2.m1.4.4.1.1.6.8.cmml">x</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1f" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><mrow id="S3.E2.m1.4.4.1.1.6.9.2" xref="S3.E2.m1.3.3.cmml"><mo stretchy="false" id="S3.E2.m1.4.4.1.1.6.9.2.1" xref="S3.E2.m1.3.3.cmml">(</mo><mfrac id="S3.E2.m1.3.3" xref="S3.E2.m1.3.3.cmml"><mrow id="S3.E2.m1.3.3.2" xref="S3.E2.m1.3.3.2.cmml"><msub id="S3.E2.m1.3.3.2.2" xref="S3.E2.m1.3.3.2.2.cmml"><mi id="S3.E2.m1.3.3.2.2.2" xref="S3.E2.m1.3.3.2.2.2.cmml">W</mi><mi id="S3.E2.m1.3.3.2.2.3" xref="S3.E2.m1.3.3.2.2.3.cmml">Q</mi></msub><mo lspace="0em" rspace="0em" id="S3.E2.m1.3.3.2.1" xref="S3.E2.m1.3.3.2.1.cmml">​</mo><msub id="S3.E2.m1.3.3.2.3" xref="S3.E2.m1.3.3.2.3.cmml"><mi id="S3.E2.m1.3.3.2.3.2" xref="S3.E2.m1.3.3.2.3.2.cmml">E</mi><mi id="S3.E2.m1.3.3.2.3.3" xref="S3.E2.m1.3.3.2.3.3.cmml">X</mi></msub><mo lspace="0em" rspace="0em" id="S3.E2.m1.3.3.2.1a" xref="S3.E2.m1.3.3.2.1.cmml">​</mo><msubsup id="S3.E2.m1.3.3.2.4" xref="S3.E2.m1.3.3.2.4.cmml"><mi id="S3.E2.m1.3.3.2.4.2.2" xref="S3.E2.m1.3.3.2.4.2.2.cmml">E</mi><mi id="S3.E2.m1.3.3.2.4.2.3" xref="S3.E2.m1.3.3.2.4.2.3.cmml">X</mi><mi id="S3.E2.m1.3.3.2.4.3" xref="S3.E2.m1.3.3.2.4.3.cmml">T</mi></msubsup><mo lspace="0em" rspace="0em" id="S3.E2.m1.3.3.2.1b" xref="S3.E2.m1.3.3.2.1.cmml">​</mo><msubsup id="S3.E2.m1.3.3.2.5" xref="S3.E2.m1.3.3.2.5.cmml"><mi id="S3.E2.m1.3.3.2.5.2.2" xref="S3.E2.m1.3.3.2.5.2.2.cmml">W</mi><mi id="S3.E2.m1.3.3.2.5.2.3" xref="S3.E2.m1.3.3.2.5.2.3.cmml">K</mi><mi id="S3.E2.m1.3.3.2.5.3" xref="S3.E2.m1.3.3.2.5.3.cmml">T</mi></msubsup></mrow><msqrt id="S3.E2.m1.3.3.3" xref="S3.E2.m1.3.3.3.cmml"><mi id="S3.E2.m1.3.3.3.2" xref="S3.E2.m1.3.3.3.2.cmml">d</mi></msqrt></mfrac><mo stretchy="false" id="S3.E2.m1.4.4.1.1.6.9.2.2" xref="S3.E2.m1.3.3.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1g" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><msub id="S3.E2.m1.4.4.1.1.6.10" xref="S3.E2.m1.4.4.1.1.6.10.cmml"><mi id="S3.E2.m1.4.4.1.1.6.10.2" xref="S3.E2.m1.4.4.1.1.6.10.2.cmml">W</mi><mi id="S3.E2.m1.4.4.1.1.6.10.3" xref="S3.E2.m1.4.4.1.1.6.10.3.cmml">V</mi></msub><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.6.1h" xref="S3.E2.m1.4.4.1.1.6.1.cmml">​</mo><msub id="S3.E2.m1.4.4.1.1.6.11" xref="S3.E2.m1.4.4.1.1.6.11.cmml"><mi id="S3.E2.m1.4.4.1.1.6.11.2" xref="S3.E2.m1.4.4.1.1.6.11.2.cmml">E</mi><mi id="S3.E2.m1.4.4.1.1.6.11.3" xref="S3.E2.m1.4.4.1.1.6.11.3.cmml">X</mi></msub></mrow></mrow><mo id="S3.E2.m1.4.4.1.2" xref="S3.E2.m1.4.4.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.4b"><apply id="S3.E2.m1.4.4.1.1.cmml" xref="S3.E2.m1.4.4.1"><and id="S3.E2.m1.4.4.1.1a.cmml" xref="S3.E2.m1.4.4.1"></and><apply id="S3.E2.m1.4.4.1.1b.cmml" xref="S3.E2.m1.4.4.1"><eq id="S3.E2.m1.4.4.1.1.3.cmml" xref="S3.E2.m1.4.4.1.1.3"></eq><apply id="S3.E2.m1.4.4.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.2"><times id="S3.E2.m1.4.4.1.1.2.1.cmml" xref="S3.E2.m1.4.4.1.1.2.1"></times><ci id="S3.E2.m1.4.4.1.1.2.2.cmml" xref="S3.E2.m1.4.4.1.1.2.2">𝑆</ci><ci id="S3.E2.m1.4.4.1.1.2.3.cmml" xref="S3.E2.m1.4.4.1.1.2.3">𝑒</ci><ci id="S3.E2.m1.4.4.1.1.2.4.cmml" xref="S3.E2.m1.4.4.1.1.2.4">𝑙</ci><ci id="S3.E2.m1.4.4.1.1.2.5.cmml" xref="S3.E2.m1.4.4.1.1.2.5">𝑓</ci><ci id="S3.E2.m1.4.4.1.1.2.6.cmml" xref="S3.E2.m1.4.4.1.1.2.6">𝐴</ci><ci id="S3.E2.m1.4.4.1.1.2.7.cmml" xref="S3.E2.m1.4.4.1.1.2.7">𝑡</ci><ci id="S3.E2.m1.4.4.1.1.2.8.cmml" xref="S3.E2.m1.4.4.1.1.2.8">𝑡</ci><ci id="S3.E2.m1.1.1.cmml" xref="S3.E2.m1.1.1">𝑋</ci></apply><apply id="S3.E2.m1.4.4.1.1.4.cmml" xref="S3.E2.m1.4.4.1.1.4"><times id="S3.E2.m1.4.4.1.1.4.1.cmml" xref="S3.E2.m1.4.4.1.1.4.1"></times><ci id="S3.E2.m1.4.4.1.1.4.2.cmml" xref="S3.E2.m1.4.4.1.1.4.2">𝑠</ci><ci id="S3.E2.m1.4.4.1.1.4.3.cmml" xref="S3.E2.m1.4.4.1.1.4.3">𝑜</ci><ci id="S3.E2.m1.4.4.1.1.4.4.cmml" xref="S3.E2.m1.4.4.1.1.4.4">𝑓</ci><ci id="S3.E2.m1.4.4.1.1.4.5.cmml" xref="S3.E2.m1.4.4.1.1.4.5">𝑡</ci><ci id="S3.E2.m1.4.4.1.1.4.6.cmml" xref="S3.E2.m1.4.4.1.1.4.6">𝑚</ci><ci id="S3.E2.m1.4.4.1.1.4.7.cmml" xref="S3.E2.m1.4.4.1.1.4.7">𝑎</ci><ci id="S3.E2.m1.4.4.1.1.4.8.cmml" xref="S3.E2.m1.4.4.1.1.4.8">𝑥</ci><apply id="S3.E2.m1.2.2.cmml" xref="S3.E2.m1.4.4.1.1.4.9.2"><divide id="S3.E2.m1.2.2.1.cmml" xref="S3.E2.m1.4.4.1.1.4.9.2"></divide><apply id="S3.E2.m1.2.2.2.cmml" xref="S3.E2.m1.2.2.2"><times id="S3.E2.m1.2.2.2.1.cmml" xref="S3.E2.m1.2.2.2.1"></times><ci id="S3.E2.m1.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2">𝑄</ci><apply id="S3.E2.m1.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.3"><csymbol cd="ambiguous" id="S3.E2.m1.2.2.2.3.1.cmml" xref="S3.E2.m1.2.2.2.3">superscript</csymbol><ci id="S3.E2.m1.2.2.2.3.2.cmml" xref="S3.E2.m1.2.2.2.3.2">𝐾</ci><ci id="S3.E2.m1.2.2.2.3.3.cmml" xref="S3.E2.m1.2.2.2.3.3">𝑇</ci></apply></apply><apply id="S3.E2.m1.2.2.3.cmml" xref="S3.E2.m1.2.2.3"><root id="S3.E2.m1.2.2.3a.cmml" xref="S3.E2.m1.2.2.3"></root><ci id="S3.E2.m1.2.2.3.2.cmml" xref="S3.E2.m1.2.2.3.2">𝑑</ci></apply></apply><ci id="S3.E2.m1.4.4.1.1.4.10.cmml" xref="S3.E2.m1.4.4.1.1.4.10">𝑉</ci></apply></apply><apply id="S3.E2.m1.4.4.1.1c.cmml" xref="S3.E2.m1.4.4.1"><eq id="S3.E2.m1.4.4.1.1.5.cmml" xref="S3.E2.m1.4.4.1.1.5"></eq><share href="#S3.E2.m1.4.4.1.1.4.cmml" id="S3.E2.m1.4.4.1.1d.cmml" xref="S3.E2.m1.4.4.1"></share><apply id="S3.E2.m1.4.4.1.1.6.cmml" xref="S3.E2.m1.4.4.1.1.6"><times id="S3.E2.m1.4.4.1.1.6.1.cmml" xref="S3.E2.m1.4.4.1.1.6.1"></times><ci id="S3.E2.m1.4.4.1.1.6.2.cmml" xref="S3.E2.m1.4.4.1.1.6.2">𝑠</ci><ci id="S3.E2.m1.4.4.1.1.6.3.cmml" xref="S3.E2.m1.4.4.1.1.6.3">𝑜</ci><ci id="S3.E2.m1.4.4.1.1.6.4.cmml" xref="S3.E2.m1.4.4.1.1.6.4">𝑓</ci><ci id="S3.E2.m1.4.4.1.1.6.5.cmml" xref="S3.E2.m1.4.4.1.1.6.5">𝑡</ci><ci id="S3.E2.m1.4.4.1.1.6.6.cmml" xref="S3.E2.m1.4.4.1.1.6.6">𝑚</ci><ci id="S3.E2.m1.4.4.1.1.6.7.cmml" xref="S3.E2.m1.4.4.1.1.6.7">𝑎</ci><ci id="S3.E2.m1.4.4.1.1.6.8.cmml" xref="S3.E2.m1.4.4.1.1.6.8">𝑥</ci><apply id="S3.E2.m1.3.3.cmml" xref="S3.E2.m1.4.4.1.1.6.9.2"><divide id="S3.E2.m1.3.3.1.cmml" xref="S3.E2.m1.4.4.1.1.6.9.2"></divide><apply id="S3.E2.m1.3.3.2.cmml" xref="S3.E2.m1.3.3.2"><times id="S3.E2.m1.3.3.2.1.cmml" xref="S3.E2.m1.3.3.2.1"></times><apply id="S3.E2.m1.3.3.2.2.cmml" xref="S3.E2.m1.3.3.2.2"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.2.2.1.cmml" xref="S3.E2.m1.3.3.2.2">subscript</csymbol><ci id="S3.E2.m1.3.3.2.2.2.cmml" xref="S3.E2.m1.3.3.2.2.2">𝑊</ci><ci id="S3.E2.m1.3.3.2.2.3.cmml" xref="S3.E2.m1.3.3.2.2.3">𝑄</ci></apply><apply id="S3.E2.m1.3.3.2.3.cmml" xref="S3.E2.m1.3.3.2.3"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.2.3.1.cmml" xref="S3.E2.m1.3.3.2.3">subscript</csymbol><ci id="S3.E2.m1.3.3.2.3.2.cmml" xref="S3.E2.m1.3.3.2.3.2">𝐸</ci><ci id="S3.E2.m1.3.3.2.3.3.cmml" xref="S3.E2.m1.3.3.2.3.3">𝑋</ci></apply><apply id="S3.E2.m1.3.3.2.4.cmml" xref="S3.E2.m1.3.3.2.4"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.2.4.1.cmml" xref="S3.E2.m1.3.3.2.4">superscript</csymbol><apply id="S3.E2.m1.3.3.2.4.2.cmml" xref="S3.E2.m1.3.3.2.4"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.2.4.2.1.cmml" xref="S3.E2.m1.3.3.2.4">subscript</csymbol><ci id="S3.E2.m1.3.3.2.4.2.2.cmml" xref="S3.E2.m1.3.3.2.4.2.2">𝐸</ci><ci id="S3.E2.m1.3.3.2.4.2.3.cmml" xref="S3.E2.m1.3.3.2.4.2.3">𝑋</ci></apply><ci id="S3.E2.m1.3.3.2.4.3.cmml" xref="S3.E2.m1.3.3.2.4.3">𝑇</ci></apply><apply id="S3.E2.m1.3.3.2.5.cmml" xref="S3.E2.m1.3.3.2.5"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.2.5.1.cmml" xref="S3.E2.m1.3.3.2.5">superscript</csymbol><apply id="S3.E2.m1.3.3.2.5.2.cmml" xref="S3.E2.m1.3.3.2.5"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.2.5.2.1.cmml" xref="S3.E2.m1.3.3.2.5">subscript</csymbol><ci id="S3.E2.m1.3.3.2.5.2.2.cmml" xref="S3.E2.m1.3.3.2.5.2.2">𝑊</ci><ci id="S3.E2.m1.3.3.2.5.2.3.cmml" xref="S3.E2.m1.3.3.2.5.2.3">𝐾</ci></apply><ci id="S3.E2.m1.3.3.2.5.3.cmml" xref="S3.E2.m1.3.3.2.5.3">𝑇</ci></apply></apply><apply id="S3.E2.m1.3.3.3.cmml" xref="S3.E2.m1.3.3.3"><root id="S3.E2.m1.3.3.3a.cmml" xref="S3.E2.m1.3.3.3"></root><ci id="S3.E2.m1.3.3.3.2.cmml" xref="S3.E2.m1.3.3.3.2">𝑑</ci></apply></apply><apply id="S3.E2.m1.4.4.1.1.6.10.cmml" xref="S3.E2.m1.4.4.1.1.6.10"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.6.10.1.cmml" xref="S3.E2.m1.4.4.1.1.6.10">subscript</csymbol><ci id="S3.E2.m1.4.4.1.1.6.10.2.cmml" xref="S3.E2.m1.4.4.1.1.6.10.2">𝑊</ci><ci id="S3.E2.m1.4.4.1.1.6.10.3.cmml" xref="S3.E2.m1.4.4.1.1.6.10.3">𝑉</ci></apply><apply id="S3.E2.m1.4.4.1.1.6.11.cmml" xref="S3.E2.m1.4.4.1.1.6.11"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.6.11.1.cmml" xref="S3.E2.m1.4.4.1.1.6.11">subscript</csymbol><ci id="S3.E2.m1.4.4.1.1.6.11.2.cmml" xref="S3.E2.m1.4.4.1.1.6.11.2">𝐸</ci><ci id="S3.E2.m1.4.4.1.1.6.11.3.cmml" xref="S3.E2.m1.4.4.1.1.6.11.3">𝑋</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.4c">SelfAtt(X)=softmax(\frac{QK^{T}}{\sqrt{d}})V=softmax(\frac{W_{Q}E_{X}E_{X}^{T}W_{K}^{T}}{\sqrt{d}})W_{V}E_{X},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
<div id="S3.SS3.p3" class="ltx_para">
<p id="S3.SS3.p3.6" class="ltx_p">where <math id="S3.SS3.p3.1.m1.3" class="ltx_Math" alttext="W_{Q},W_{K},W_{V}\in\mathbb{R}^{l\times l}" display="inline"><semantics id="S3.SS3.p3.1.m1.3a"><mrow id="S3.SS3.p3.1.m1.3.3" xref="S3.SS3.p3.1.m1.3.3.cmml"><mrow id="S3.SS3.p3.1.m1.3.3.3.3" xref="S3.SS3.p3.1.m1.3.3.3.4.cmml"><msub id="S3.SS3.p3.1.m1.1.1.1.1.1" xref="S3.SS3.p3.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS3.p3.1.m1.1.1.1.1.1.2" xref="S3.SS3.p3.1.m1.1.1.1.1.1.2.cmml">W</mi><mi id="S3.SS3.p3.1.m1.1.1.1.1.1.3" xref="S3.SS3.p3.1.m1.1.1.1.1.1.3.cmml">Q</mi></msub><mo id="S3.SS3.p3.1.m1.3.3.3.3.4" xref="S3.SS3.p3.1.m1.3.3.3.4.cmml">,</mo><msub id="S3.SS3.p3.1.m1.2.2.2.2.2" xref="S3.SS3.p3.1.m1.2.2.2.2.2.cmml"><mi id="S3.SS3.p3.1.m1.2.2.2.2.2.2" xref="S3.SS3.p3.1.m1.2.2.2.2.2.2.cmml">W</mi><mi id="S3.SS3.p3.1.m1.2.2.2.2.2.3" xref="S3.SS3.p3.1.m1.2.2.2.2.2.3.cmml">K</mi></msub><mo id="S3.SS3.p3.1.m1.3.3.3.3.5" xref="S3.SS3.p3.1.m1.3.3.3.4.cmml">,</mo><msub id="S3.SS3.p3.1.m1.3.3.3.3.3" xref="S3.SS3.p3.1.m1.3.3.3.3.3.cmml"><mi id="S3.SS3.p3.1.m1.3.3.3.3.3.2" xref="S3.SS3.p3.1.m1.3.3.3.3.3.2.cmml">W</mi><mi id="S3.SS3.p3.1.m1.3.3.3.3.3.3" xref="S3.SS3.p3.1.m1.3.3.3.3.3.3.cmml">V</mi></msub></mrow><mo id="S3.SS3.p3.1.m1.3.3.4" xref="S3.SS3.p3.1.m1.3.3.4.cmml">∈</mo><msup id="S3.SS3.p3.1.m1.3.3.5" xref="S3.SS3.p3.1.m1.3.3.5.cmml"><mi id="S3.SS3.p3.1.m1.3.3.5.2" xref="S3.SS3.p3.1.m1.3.3.5.2.cmml">ℝ</mi><mrow id="S3.SS3.p3.1.m1.3.3.5.3" xref="S3.SS3.p3.1.m1.3.3.5.3.cmml"><mi id="S3.SS3.p3.1.m1.3.3.5.3.2" xref="S3.SS3.p3.1.m1.3.3.5.3.2.cmml">l</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.p3.1.m1.3.3.5.3.1" xref="S3.SS3.p3.1.m1.3.3.5.3.1.cmml">×</mo><mi id="S3.SS3.p3.1.m1.3.3.5.3.3" xref="S3.SS3.p3.1.m1.3.3.5.3.3.cmml">l</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.1.m1.3b"><apply id="S3.SS3.p3.1.m1.3.3.cmml" xref="S3.SS3.p3.1.m1.3.3"><in id="S3.SS3.p3.1.m1.3.3.4.cmml" xref="S3.SS3.p3.1.m1.3.3.4"></in><list id="S3.SS3.p3.1.m1.3.3.3.4.cmml" xref="S3.SS3.p3.1.m1.3.3.3.3"><apply id="S3.SS3.p3.1.m1.1.1.1.1.1.cmml" xref="S3.SS3.p3.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS3.p3.1.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS3.p3.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS3.p3.1.m1.1.1.1.1.1.2">𝑊</ci><ci id="S3.SS3.p3.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS3.p3.1.m1.1.1.1.1.1.3">𝑄</ci></apply><apply id="S3.SS3.p3.1.m1.2.2.2.2.2.cmml" xref="S3.SS3.p3.1.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.p3.1.m1.2.2.2.2.2.1.cmml" xref="S3.SS3.p3.1.m1.2.2.2.2.2">subscript</csymbol><ci id="S3.SS3.p3.1.m1.2.2.2.2.2.2.cmml" xref="S3.SS3.p3.1.m1.2.2.2.2.2.2">𝑊</ci><ci id="S3.SS3.p3.1.m1.2.2.2.2.2.3.cmml" xref="S3.SS3.p3.1.m1.2.2.2.2.2.3">𝐾</ci></apply><apply id="S3.SS3.p3.1.m1.3.3.3.3.3.cmml" xref="S3.SS3.p3.1.m1.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.p3.1.m1.3.3.3.3.3.1.cmml" xref="S3.SS3.p3.1.m1.3.3.3.3.3">subscript</csymbol><ci id="S3.SS3.p3.1.m1.3.3.3.3.3.2.cmml" xref="S3.SS3.p3.1.m1.3.3.3.3.3.2">𝑊</ci><ci id="S3.SS3.p3.1.m1.3.3.3.3.3.3.cmml" xref="S3.SS3.p3.1.m1.3.3.3.3.3.3">𝑉</ci></apply></list><apply id="S3.SS3.p3.1.m1.3.3.5.cmml" xref="S3.SS3.p3.1.m1.3.3.5"><csymbol cd="ambiguous" id="S3.SS3.p3.1.m1.3.3.5.1.cmml" xref="S3.SS3.p3.1.m1.3.3.5">superscript</csymbol><ci id="S3.SS3.p3.1.m1.3.3.5.2.cmml" xref="S3.SS3.p3.1.m1.3.3.5.2">ℝ</ci><apply id="S3.SS3.p3.1.m1.3.3.5.3.cmml" xref="S3.SS3.p3.1.m1.3.3.5.3"><times id="S3.SS3.p3.1.m1.3.3.5.3.1.cmml" xref="S3.SS3.p3.1.m1.3.3.5.3.1"></times><ci id="S3.SS3.p3.1.m1.3.3.5.3.2.cmml" xref="S3.SS3.p3.1.m1.3.3.5.3.2">𝑙</ci><ci id="S3.SS3.p3.1.m1.3.3.5.3.3.cmml" xref="S3.SS3.p3.1.m1.3.3.5.3.3">𝑙</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.1.m1.3c">W_{Q},W_{K},W_{V}\in\mathbb{R}^{l\times l}</annotation></semantics></math> are trainable parameters and <math id="S3.SS3.p3.2.m2.1" class="ltx_Math" alttext="d" display="inline"><semantics id="S3.SS3.p3.2.m2.1a"><mi id="S3.SS3.p3.2.m2.1.1" xref="S3.SS3.p3.2.m2.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.2.m2.1b"><ci id="S3.SS3.p3.2.m2.1.1.cmml" xref="S3.SS3.p3.2.m2.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.2.m2.1c">d</annotation></semantics></math> is a scaling factor. We denote the transformer’s <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite> query, key, and value as <math id="S3.SS3.p3.3.m3.1" class="ltx_Math" alttext="Q" display="inline"><semantics id="S3.SS3.p3.3.m3.1a"><mi id="S3.SS3.p3.3.m3.1.1" xref="S3.SS3.p3.3.m3.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.3.m3.1b"><ci id="S3.SS3.p3.3.m3.1.1.cmml" xref="S3.SS3.p3.3.m3.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.3.m3.1c">Q</annotation></semantics></math>, <math id="S3.SS3.p3.4.m4.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S3.SS3.p3.4.m4.1a"><mi id="S3.SS3.p3.4.m4.1.1" xref="S3.SS3.p3.4.m4.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.4.m4.1b"><ci id="S3.SS3.p3.4.m4.1.1.cmml" xref="S3.SS3.p3.4.m4.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.4.m4.1c">K</annotation></semantics></math>, and <math id="S3.SS3.p3.5.m5.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S3.SS3.p3.5.m5.1a"><mi id="S3.SS3.p3.5.m5.1.1" xref="S3.SS3.p3.5.m5.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.5.m5.1b"><ci id="S3.SS3.p3.5.m5.1.1.cmml" xref="S3.SS3.p3.5.m5.1.1">𝑉</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.5.m5.1c">V</annotation></semantics></math> respectively. In the transformer encoder <math id="S3.SS3.p3.6.m6.1" class="ltx_Math" alttext="T_{e}" display="inline"><semantics id="S3.SS3.p3.6.m6.1a"><msub id="S3.SS3.p3.6.m6.1.1" xref="S3.SS3.p3.6.m6.1.1.cmml"><mi id="S3.SS3.p3.6.m6.1.1.2" xref="S3.SS3.p3.6.m6.1.1.2.cmml">T</mi><mi id="S3.SS3.p3.6.m6.1.1.3" xref="S3.SS3.p3.6.m6.1.1.3.cmml">e</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.6.m6.1b"><apply id="S3.SS3.p3.6.m6.1.1.cmml" xref="S3.SS3.p3.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.6.m6.1.1.1.cmml" xref="S3.SS3.p3.6.m6.1.1">subscript</csymbol><ci id="S3.SS3.p3.6.m6.1.1.2.cmml" xref="S3.SS3.p3.6.m6.1.1.2">𝑇</ci><ci id="S3.SS3.p3.6.m6.1.1.3.cmml" xref="S3.SS3.p3.6.m6.1.1.3">𝑒</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.6.m6.1c">T_{e}</annotation></semantics></math>, our model learns to allocate attention to the instances and builds the mutual-instance correlations for the subsequent decoding stage. It is also a mimic of clinical workflow where pathologists usually observe by switching the region of interest and yield the diagnosis based on both cellular-level features and the structural information of tissues and organs.</p>
</div>
<div id="S3.SS3.p4" class="ltx_para">
<p id="S3.SS3.p4.1" class="ltx_p">The co-attention mechanism in the standard transformer decoder is adopted to capture the relations between visual and text concepts, which can be formulated as:</p>
</div>
<div id="S3.SS3.p5" class="ltx_para">
<table id="S3.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E3.m1.46" class="ltx_Math" alttext="\begin{split}CoAtt(X,Q)=softmax(\frac{QK^{T}}{\sqrt{d}})V=&amp;softmax(\frac{W_{Q}E_{Q}E_{X}^{T}W_{K}^{T}}{\sqrt{d}})W_{V}E_{X}\\
=\textbf{A}W_{V}E_{X},\end{split}" display="block"><semantics id="S3.E3.m1.46a"><mtable columnspacing="0pt" displaystyle="true" rowspacing="0pt" id="S3.E3.m1.46.46.2"><mtr id="S3.E3.m1.46.46.2a"><mtd class="ltx_align_right" columnalign="right" id="S3.E3.m1.46.46.2b"><mrow id="S3.E3.m1.23.23.23.23.23"><mrow id="S3.E3.m1.23.23.23.23.23.25"><mi id="S3.E3.m1.1.1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.1.1.cmml">C</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.25.1" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.2.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.2.2.cmml">o</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.25.1a" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.3.3.3.3.3.3" xref="S3.E3.m1.3.3.3.3.3.3.cmml">A</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.25.1b" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.4.4.4.4.4.4" xref="S3.E3.m1.4.4.4.4.4.4.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.25.1c" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.5.5.5.5.5.5" xref="S3.E3.m1.5.5.5.5.5.5.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.25.1d" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mrow id="S3.E3.m1.23.23.23.23.23.25.2"><mo stretchy="false" id="S3.E3.m1.6.6.6.6.6.6" xref="S3.E3.m1.45.45.1.1.1.cmml">(</mo><mi id="S3.E3.m1.7.7.7.7.7.7" xref="S3.E3.m1.7.7.7.7.7.7.cmml">X</mi><mo id="S3.E3.m1.8.8.8.8.8.8" xref="S3.E3.m1.45.45.1.1.1.cmml">,</mo><mi id="S3.E3.m1.9.9.9.9.9.9" xref="S3.E3.m1.9.9.9.9.9.9.cmml">Q</mi><mo stretchy="false" id="S3.E3.m1.10.10.10.10.10.10" xref="S3.E3.m1.45.45.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.11.11.11.11.11.11" xref="S3.E3.m1.11.11.11.11.11.11.cmml">=</mo><mrow id="S3.E3.m1.23.23.23.23.23.26"><mi id="S3.E3.m1.12.12.12.12.12.12" xref="S3.E3.m1.12.12.12.12.12.12.cmml">s</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.26.1" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.13.13.13.13.13.13" xref="S3.E3.m1.13.13.13.13.13.13.cmml">o</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.26.1a" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.14.14.14.14.14.14" xref="S3.E3.m1.14.14.14.14.14.14.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.26.1b" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.15.15.15.15.15.15" xref="S3.E3.m1.15.15.15.15.15.15.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.26.1c" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.16.16.16.16.16.16" xref="S3.E3.m1.16.16.16.16.16.16.cmml">m</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.26.1d" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.17.17.17.17.17.17" xref="S3.E3.m1.17.17.17.17.17.17.cmml">a</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.26.1e" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.18.18.18.18.18.18" xref="S3.E3.m1.18.18.18.18.18.18.cmml">x</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.26.1f" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mrow id="S3.E3.m1.23.23.23.23.23.26.2"><mo stretchy="false" id="S3.E3.m1.19.19.19.19.19.19" xref="S3.E3.m1.45.45.1.1.1.cmml">(</mo><mfrac id="S3.E3.m1.20.20.20.20.20.20" xref="S3.E3.m1.20.20.20.20.20.20.cmml"><mrow id="S3.E3.m1.20.20.20.20.20.20.2" xref="S3.E3.m1.20.20.20.20.20.20.2.cmml"><mi id="S3.E3.m1.20.20.20.20.20.20.2.2" xref="S3.E3.m1.20.20.20.20.20.20.2.2.cmml">Q</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.20.20.20.20.20.20.2.1" xref="S3.E3.m1.20.20.20.20.20.20.2.1.cmml">​</mo><msup id="S3.E3.m1.20.20.20.20.20.20.2.3" xref="S3.E3.m1.20.20.20.20.20.20.2.3.cmml"><mi id="S3.E3.m1.20.20.20.20.20.20.2.3.2" xref="S3.E3.m1.20.20.20.20.20.20.2.3.2.cmml">K</mi><mi id="S3.E3.m1.20.20.20.20.20.20.2.3.3" xref="S3.E3.m1.20.20.20.20.20.20.2.3.3.cmml">T</mi></msup></mrow><msqrt id="S3.E3.m1.20.20.20.20.20.20.3" xref="S3.E3.m1.20.20.20.20.20.20.3.cmml"><mi id="S3.E3.m1.20.20.20.20.20.20.3.2" xref="S3.E3.m1.20.20.20.20.20.20.3.2.cmml">d</mi></msqrt></mfrac><mo stretchy="false" id="S3.E3.m1.21.21.21.21.21.21" xref="S3.E3.m1.45.45.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E3.m1.23.23.23.23.23.26.1g" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.22.22.22.22.22.22" xref="S3.E3.m1.22.22.22.22.22.22.cmml">V</mi></mrow><mo id="S3.E3.m1.23.23.23.23.23.23" xref="S3.E3.m1.23.23.23.23.23.23.cmml">=</mo><mi id="S3.E3.m1.23.23.23.23.23.27" xref="S3.E3.m1.45.45.1.1.1.cmml"></mi></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E3.m1.46.46.2c"><mrow id="S3.E3.m1.37.37.37.37.14"><mi id="S3.E3.m1.24.24.24.24.1.1" xref="S3.E3.m1.24.24.24.24.1.1.cmml">s</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.25.25.25.25.2.2" xref="S3.E3.m1.25.25.25.25.2.2.cmml">o</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15a" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.26.26.26.26.3.3" xref="S3.E3.m1.26.26.26.26.3.3.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15b" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.27.27.27.27.4.4" xref="S3.E3.m1.27.27.27.27.4.4.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15c" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.28.28.28.28.5.5" xref="S3.E3.m1.28.28.28.28.5.5.cmml">m</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15d" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.29.29.29.29.6.6" xref="S3.E3.m1.29.29.29.29.6.6.cmml">a</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15e" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mi id="S3.E3.m1.30.30.30.30.7.7" xref="S3.E3.m1.30.30.30.30.7.7.cmml">x</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15f" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><mrow id="S3.E3.m1.37.37.37.37.14.16"><mo stretchy="false" id="S3.E3.m1.31.31.31.31.8.8" xref="S3.E3.m1.45.45.1.1.1.cmml">(</mo><mfrac id="S3.E3.m1.32.32.32.32.9.9" xref="S3.E3.m1.32.32.32.32.9.9.cmml"><mrow id="S3.E3.m1.32.32.32.32.9.9.2" xref="S3.E3.m1.32.32.32.32.9.9.2.cmml"><msub id="S3.E3.m1.32.32.32.32.9.9.2.2" xref="S3.E3.m1.32.32.32.32.9.9.2.2.cmml"><mi id="S3.E3.m1.32.32.32.32.9.9.2.2.2" xref="S3.E3.m1.32.32.32.32.9.9.2.2.2.cmml">W</mi><mi id="S3.E3.m1.32.32.32.32.9.9.2.2.3" xref="S3.E3.m1.32.32.32.32.9.9.2.2.3.cmml">Q</mi></msub><mo lspace="0em" rspace="0em" id="S3.E3.m1.32.32.32.32.9.9.2.1" xref="S3.E3.m1.32.32.32.32.9.9.2.1.cmml">​</mo><msub id="S3.E3.m1.32.32.32.32.9.9.2.3" xref="S3.E3.m1.32.32.32.32.9.9.2.3.cmml"><mi id="S3.E3.m1.32.32.32.32.9.9.2.3.2" xref="S3.E3.m1.32.32.32.32.9.9.2.3.2.cmml">E</mi><mi id="S3.E3.m1.32.32.32.32.9.9.2.3.3" xref="S3.E3.m1.32.32.32.32.9.9.2.3.3.cmml">Q</mi></msub><mo lspace="0em" rspace="0em" id="S3.E3.m1.32.32.32.32.9.9.2.1a" xref="S3.E3.m1.32.32.32.32.9.9.2.1.cmml">​</mo><msubsup id="S3.E3.m1.32.32.32.32.9.9.2.4" xref="S3.E3.m1.32.32.32.32.9.9.2.4.cmml"><mi id="S3.E3.m1.32.32.32.32.9.9.2.4.2.2" xref="S3.E3.m1.32.32.32.32.9.9.2.4.2.2.cmml">E</mi><mi id="S3.E3.m1.32.32.32.32.9.9.2.4.2.3" xref="S3.E3.m1.32.32.32.32.9.9.2.4.2.3.cmml">X</mi><mi id="S3.E3.m1.32.32.32.32.9.9.2.4.3" xref="S3.E3.m1.32.32.32.32.9.9.2.4.3.cmml">T</mi></msubsup><mo lspace="0em" rspace="0em" id="S3.E3.m1.32.32.32.32.9.9.2.1b" xref="S3.E3.m1.32.32.32.32.9.9.2.1.cmml">​</mo><msubsup id="S3.E3.m1.32.32.32.32.9.9.2.5" xref="S3.E3.m1.32.32.32.32.9.9.2.5.cmml"><mi id="S3.E3.m1.32.32.32.32.9.9.2.5.2.2" xref="S3.E3.m1.32.32.32.32.9.9.2.5.2.2.cmml">W</mi><mi id="S3.E3.m1.32.32.32.32.9.9.2.5.2.3" xref="S3.E3.m1.32.32.32.32.9.9.2.5.2.3.cmml">K</mi><mi id="S3.E3.m1.32.32.32.32.9.9.2.5.3" xref="S3.E3.m1.32.32.32.32.9.9.2.5.3.cmml">T</mi></msubsup></mrow><msqrt id="S3.E3.m1.32.32.32.32.9.9.3" xref="S3.E3.m1.32.32.32.32.9.9.3.cmml"><mi id="S3.E3.m1.32.32.32.32.9.9.3.2" xref="S3.E3.m1.32.32.32.32.9.9.3.2.cmml">d</mi></msqrt></mfrac><mo stretchy="false" id="S3.E3.m1.33.33.33.33.10.10" xref="S3.E3.m1.45.45.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15g" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><msub id="S3.E3.m1.37.37.37.37.14.17"><mi id="S3.E3.m1.34.34.34.34.11.11" xref="S3.E3.m1.34.34.34.34.11.11.cmml">W</mi><mi id="S3.E3.m1.35.35.35.35.12.12.1" xref="S3.E3.m1.35.35.35.35.12.12.1.cmml">V</mi></msub><mo lspace="0em" rspace="0em" id="S3.E3.m1.37.37.37.37.14.15h" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><msub id="S3.E3.m1.37.37.37.37.14.18"><mi id="S3.E3.m1.36.36.36.36.13.13" xref="S3.E3.m1.36.36.36.36.13.13.cmml">E</mi><mi id="S3.E3.m1.37.37.37.37.14.14.1" xref="S3.E3.m1.37.37.37.37.14.14.1.cmml">X</mi></msub></mrow></mtd></mtr><mtr id="S3.E3.m1.46.46.2d"><mtd class="ltx_align_right" columnalign="right" id="S3.E3.m1.46.46.2e"><mrow id="S3.E3.m1.46.46.2.45.8.8.8"><mrow id="S3.E3.m1.46.46.2.45.8.8.8.1"><mi id="S3.E3.m1.46.46.2.45.8.8.8.1.1" xref="S3.E3.m1.45.45.1.1.1.cmml"></mi><mo id="S3.E3.m1.38.38.38.1.1.1" xref="S3.E3.m1.38.38.38.1.1.1.cmml">=</mo><mrow id="S3.E3.m1.46.46.2.45.8.8.8.1.2"><mtext class="ltx_mathvariant_bold" id="S3.E3.m1.39.39.39.2.2.2" xref="S3.E3.m1.39.39.39.2.2.2a.cmml">A</mtext><mo lspace="0em" rspace="0em" id="S3.E3.m1.46.46.2.45.8.8.8.1.2.1" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><msub id="S3.E3.m1.46.46.2.45.8.8.8.1.2.2"><mi id="S3.E3.m1.40.40.40.3.3.3" xref="S3.E3.m1.40.40.40.3.3.3.cmml">W</mi><mi id="S3.E3.m1.41.41.41.4.4.4.1" xref="S3.E3.m1.41.41.41.4.4.4.1.cmml">V</mi></msub><mo lspace="0em" rspace="0em" id="S3.E3.m1.46.46.2.45.8.8.8.1.2.1a" xref="S3.E3.m1.45.45.1.1.1.cmml">​</mo><msub id="S3.E3.m1.46.46.2.45.8.8.8.1.2.3"><mi id="S3.E3.m1.42.42.42.5.5.5" xref="S3.E3.m1.42.42.42.5.5.5.cmml">E</mi><mi id="S3.E3.m1.43.43.43.6.6.6.1" xref="S3.E3.m1.43.43.43.6.6.6.1.cmml">X</mi></msub></mrow></mrow><mo id="S3.E3.m1.44.44.44.7.7.7" xref="S3.E3.m1.45.45.1.1.1.cmml">,</mo></mrow></mtd></mtr></mtable><annotation-xml encoding="MathML-Content" id="S3.E3.m1.46b"><apply id="S3.E3.m1.45.45.1.1.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><and id="S3.E3.m1.45.45.1.1.1a.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"></and><apply id="S3.E3.m1.45.45.1.1.1b.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><eq id="S3.E3.m1.11.11.11.11.11.11.cmml" xref="S3.E3.m1.11.11.11.11.11.11"></eq><apply id="S3.E3.m1.45.45.1.1.1.2.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><times id="S3.E3.m1.45.45.1.1.1.2.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"></times><ci id="S3.E3.m1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1.1">𝐶</ci><ci id="S3.E3.m1.2.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2">𝑜</ci><ci id="S3.E3.m1.3.3.3.3.3.3.cmml" xref="S3.E3.m1.3.3.3.3.3.3">𝐴</ci><ci id="S3.E3.m1.4.4.4.4.4.4.cmml" xref="S3.E3.m1.4.4.4.4.4.4">𝑡</ci><ci id="S3.E3.m1.5.5.5.5.5.5.cmml" xref="S3.E3.m1.5.5.5.5.5.5">𝑡</ci><interval closure="open" id="S3.E3.m1.45.45.1.1.1.2.7.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><ci id="S3.E3.m1.7.7.7.7.7.7.cmml" xref="S3.E3.m1.7.7.7.7.7.7">𝑋</ci><ci id="S3.E3.m1.9.9.9.9.9.9.cmml" xref="S3.E3.m1.9.9.9.9.9.9">𝑄</ci></interval></apply><apply id="S3.E3.m1.45.45.1.1.1.4.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><times id="S3.E3.m1.45.45.1.1.1.4.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"></times><ci id="S3.E3.m1.12.12.12.12.12.12.cmml" xref="S3.E3.m1.12.12.12.12.12.12">𝑠</ci><ci id="S3.E3.m1.13.13.13.13.13.13.cmml" xref="S3.E3.m1.13.13.13.13.13.13">𝑜</ci><ci id="S3.E3.m1.14.14.14.14.14.14.cmml" xref="S3.E3.m1.14.14.14.14.14.14">𝑓</ci><ci id="S3.E3.m1.15.15.15.15.15.15.cmml" xref="S3.E3.m1.15.15.15.15.15.15">𝑡</ci><ci id="S3.E3.m1.16.16.16.16.16.16.cmml" xref="S3.E3.m1.16.16.16.16.16.16">𝑚</ci><ci id="S3.E3.m1.17.17.17.17.17.17.cmml" xref="S3.E3.m1.17.17.17.17.17.17">𝑎</ci><ci id="S3.E3.m1.18.18.18.18.18.18.cmml" xref="S3.E3.m1.18.18.18.18.18.18">𝑥</ci><apply id="S3.E3.m1.20.20.20.20.20.20.cmml" xref="S3.E3.m1.20.20.20.20.20.20"><divide id="S3.E3.m1.20.20.20.20.20.20.1.cmml" xref="S3.E3.m1.20.20.20.20.20.20"></divide><apply id="S3.E3.m1.20.20.20.20.20.20.2.cmml" xref="S3.E3.m1.20.20.20.20.20.20.2"><times id="S3.E3.m1.20.20.20.20.20.20.2.1.cmml" xref="S3.E3.m1.20.20.20.20.20.20.2.1"></times><ci id="S3.E3.m1.20.20.20.20.20.20.2.2.cmml" xref="S3.E3.m1.20.20.20.20.20.20.2.2">𝑄</ci><apply id="S3.E3.m1.20.20.20.20.20.20.2.3.cmml" xref="S3.E3.m1.20.20.20.20.20.20.2.3"><csymbol cd="ambiguous" id="S3.E3.m1.20.20.20.20.20.20.2.3.1.cmml" xref="S3.E3.m1.20.20.20.20.20.20.2.3">superscript</csymbol><ci id="S3.E3.m1.20.20.20.20.20.20.2.3.2.cmml" xref="S3.E3.m1.20.20.20.20.20.20.2.3.2">𝐾</ci><ci id="S3.E3.m1.20.20.20.20.20.20.2.3.3.cmml" xref="S3.E3.m1.20.20.20.20.20.20.2.3.3">𝑇</ci></apply></apply><apply id="S3.E3.m1.20.20.20.20.20.20.3.cmml" xref="S3.E3.m1.20.20.20.20.20.20.3"><root id="S3.E3.m1.20.20.20.20.20.20.3a.cmml" xref="S3.E3.m1.20.20.20.20.20.20.3"></root><ci id="S3.E3.m1.20.20.20.20.20.20.3.2.cmml" xref="S3.E3.m1.20.20.20.20.20.20.3.2">𝑑</ci></apply></apply><ci id="S3.E3.m1.22.22.22.22.22.22.cmml" xref="S3.E3.m1.22.22.22.22.22.22">𝑉</ci></apply></apply><apply id="S3.E3.m1.45.45.1.1.1c.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><eq id="S3.E3.m1.23.23.23.23.23.23.cmml" xref="S3.E3.m1.23.23.23.23.23.23"></eq><share href="#S3.E3.m1.45.45.1.1.1.4.cmml" id="S3.E3.m1.45.45.1.1.1d.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"></share><apply id="S3.E3.m1.45.45.1.1.1.6.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><times id="S3.E3.m1.45.45.1.1.1.6.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"></times><ci id="S3.E3.m1.24.24.24.24.1.1.cmml" xref="S3.E3.m1.24.24.24.24.1.1">𝑠</ci><ci id="S3.E3.m1.25.25.25.25.2.2.cmml" xref="S3.E3.m1.25.25.25.25.2.2">𝑜</ci><ci id="S3.E3.m1.26.26.26.26.3.3.cmml" xref="S3.E3.m1.26.26.26.26.3.3">𝑓</ci><ci id="S3.E3.m1.27.27.27.27.4.4.cmml" xref="S3.E3.m1.27.27.27.27.4.4">𝑡</ci><ci id="S3.E3.m1.28.28.28.28.5.5.cmml" xref="S3.E3.m1.28.28.28.28.5.5">𝑚</ci><ci id="S3.E3.m1.29.29.29.29.6.6.cmml" xref="S3.E3.m1.29.29.29.29.6.6">𝑎</ci><ci id="S3.E3.m1.30.30.30.30.7.7.cmml" xref="S3.E3.m1.30.30.30.30.7.7">𝑥</ci><apply id="S3.E3.m1.32.32.32.32.9.9.cmml" xref="S3.E3.m1.32.32.32.32.9.9"><divide id="S3.E3.m1.32.32.32.32.9.9.1.cmml" xref="S3.E3.m1.32.32.32.32.9.9"></divide><apply id="S3.E3.m1.32.32.32.32.9.9.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2"><times id="S3.E3.m1.32.32.32.32.9.9.2.1.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.1"></times><apply id="S3.E3.m1.32.32.32.32.9.9.2.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.32.32.32.32.9.9.2.2.1.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.2">subscript</csymbol><ci id="S3.E3.m1.32.32.32.32.9.9.2.2.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.2.2">𝑊</ci><ci id="S3.E3.m1.32.32.32.32.9.9.2.2.3.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.2.3">𝑄</ci></apply><apply id="S3.E3.m1.32.32.32.32.9.9.2.3.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.3"><csymbol cd="ambiguous" id="S3.E3.m1.32.32.32.32.9.9.2.3.1.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.3">subscript</csymbol><ci id="S3.E3.m1.32.32.32.32.9.9.2.3.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.3.2">𝐸</ci><ci id="S3.E3.m1.32.32.32.32.9.9.2.3.3.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.3.3">𝑄</ci></apply><apply id="S3.E3.m1.32.32.32.32.9.9.2.4.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.4"><csymbol cd="ambiguous" id="S3.E3.m1.32.32.32.32.9.9.2.4.1.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.4">superscript</csymbol><apply id="S3.E3.m1.32.32.32.32.9.9.2.4.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.4"><csymbol cd="ambiguous" id="S3.E3.m1.32.32.32.32.9.9.2.4.2.1.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.4">subscript</csymbol><ci id="S3.E3.m1.32.32.32.32.9.9.2.4.2.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.4.2.2">𝐸</ci><ci id="S3.E3.m1.32.32.32.32.9.9.2.4.2.3.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.4.2.3">𝑋</ci></apply><ci id="S3.E3.m1.32.32.32.32.9.9.2.4.3.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.4.3">𝑇</ci></apply><apply id="S3.E3.m1.32.32.32.32.9.9.2.5.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.5"><csymbol cd="ambiguous" id="S3.E3.m1.32.32.32.32.9.9.2.5.1.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.5">superscript</csymbol><apply id="S3.E3.m1.32.32.32.32.9.9.2.5.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.5"><csymbol cd="ambiguous" id="S3.E3.m1.32.32.32.32.9.9.2.5.2.1.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.5">subscript</csymbol><ci id="S3.E3.m1.32.32.32.32.9.9.2.5.2.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.5.2.2">𝑊</ci><ci id="S3.E3.m1.32.32.32.32.9.9.2.5.2.3.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.5.2.3">𝐾</ci></apply><ci id="S3.E3.m1.32.32.32.32.9.9.2.5.3.cmml" xref="S3.E3.m1.32.32.32.32.9.9.2.5.3">𝑇</ci></apply></apply><apply id="S3.E3.m1.32.32.32.32.9.9.3.cmml" xref="S3.E3.m1.32.32.32.32.9.9.3"><root id="S3.E3.m1.32.32.32.32.9.9.3a.cmml" xref="S3.E3.m1.32.32.32.32.9.9.3"></root><ci id="S3.E3.m1.32.32.32.32.9.9.3.2.cmml" xref="S3.E3.m1.32.32.32.32.9.9.3.2">𝑑</ci></apply></apply><apply id="S3.E3.m1.45.45.1.1.1.6.10.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><csymbol cd="ambiguous" id="S3.E3.m1.45.45.1.1.1.6.10.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1">subscript</csymbol><ci id="S3.E3.m1.34.34.34.34.11.11.cmml" xref="S3.E3.m1.34.34.34.34.11.11">𝑊</ci><ci id="S3.E3.m1.35.35.35.35.12.12.1.cmml" xref="S3.E3.m1.35.35.35.35.12.12.1">𝑉</ci></apply><apply id="S3.E3.m1.45.45.1.1.1.6.11.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><csymbol cd="ambiguous" id="S3.E3.m1.45.45.1.1.1.6.11.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1">subscript</csymbol><ci id="S3.E3.m1.36.36.36.36.13.13.cmml" xref="S3.E3.m1.36.36.36.36.13.13">𝐸</ci><ci id="S3.E3.m1.37.37.37.37.14.14.1.cmml" xref="S3.E3.m1.37.37.37.37.14.14.1">𝑋</ci></apply></apply></apply><apply id="S3.E3.m1.45.45.1.1.1e.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><eq id="S3.E3.m1.38.38.38.1.1.1.cmml" xref="S3.E3.m1.38.38.38.1.1.1"></eq><share href="#S3.E3.m1.45.45.1.1.1.6.cmml" id="S3.E3.m1.45.45.1.1.1f.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"></share><apply id="S3.E3.m1.45.45.1.1.1.8.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><times id="S3.E3.m1.45.45.1.1.1.8.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"></times><ci id="S3.E3.m1.39.39.39.2.2.2a.cmml" xref="S3.E3.m1.39.39.39.2.2.2"><mtext class="ltx_mathvariant_bold" id="S3.E3.m1.39.39.39.2.2.2.cmml" xref="S3.E3.m1.39.39.39.2.2.2">A</mtext></ci><apply id="S3.E3.m1.45.45.1.1.1.8.3.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><csymbol cd="ambiguous" id="S3.E3.m1.45.45.1.1.1.8.3.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1">subscript</csymbol><ci id="S3.E3.m1.40.40.40.3.3.3.cmml" xref="S3.E3.m1.40.40.40.3.3.3">𝑊</ci><ci id="S3.E3.m1.41.41.41.4.4.4.1.cmml" xref="S3.E3.m1.41.41.41.4.4.4.1">𝑉</ci></apply><apply id="S3.E3.m1.45.45.1.1.1.8.4.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1"><csymbol cd="ambiguous" id="S3.E3.m1.45.45.1.1.1.8.4.1.cmml" xref="S3.E3.m1.23.23.23.23.23.25.1">subscript</csymbol><ci id="S3.E3.m1.42.42.42.5.5.5.cmml" xref="S3.E3.m1.42.42.42.5.5.5">𝐸</ci><ci id="S3.E3.m1.43.43.43.6.6.6.1.cmml" xref="S3.E3.m1.43.43.43.6.6.6.1">𝑋</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.46c">\begin{split}CoAtt(X,Q)=softmax(\frac{QK^{T}}{\sqrt{d}})V=&amp;softmax(\frac{W_{Q}E_{Q}E_{X}^{T}W_{K}^{T}}{\sqrt{d}})W_{V}E_{X}\\
=\textbf{A}W_{V}E_{X},\end{split}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
</div>
<div id="S3.SS3.p6" class="ltx_para">
<p id="S3.SS3.p6.12" class="ltx_p">where <math id="S3.SS3.p6.1.m1.3" class="ltx_Math" alttext="W_{Q},W_{K},W_{V}\in\mathbb{R}^{l\times l}" display="inline"><semantics id="S3.SS3.p6.1.m1.3a"><mrow id="S3.SS3.p6.1.m1.3.3" xref="S3.SS3.p6.1.m1.3.3.cmml"><mrow id="S3.SS3.p6.1.m1.3.3.3.3" xref="S3.SS3.p6.1.m1.3.3.3.4.cmml"><msub id="S3.SS3.p6.1.m1.1.1.1.1.1" xref="S3.SS3.p6.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS3.p6.1.m1.1.1.1.1.1.2" xref="S3.SS3.p6.1.m1.1.1.1.1.1.2.cmml">W</mi><mi id="S3.SS3.p6.1.m1.1.1.1.1.1.3" xref="S3.SS3.p6.1.m1.1.1.1.1.1.3.cmml">Q</mi></msub><mo id="S3.SS3.p6.1.m1.3.3.3.3.4" xref="S3.SS3.p6.1.m1.3.3.3.4.cmml">,</mo><msub id="S3.SS3.p6.1.m1.2.2.2.2.2" xref="S3.SS3.p6.1.m1.2.2.2.2.2.cmml"><mi id="S3.SS3.p6.1.m1.2.2.2.2.2.2" xref="S3.SS3.p6.1.m1.2.2.2.2.2.2.cmml">W</mi><mi id="S3.SS3.p6.1.m1.2.2.2.2.2.3" xref="S3.SS3.p6.1.m1.2.2.2.2.2.3.cmml">K</mi></msub><mo id="S3.SS3.p6.1.m1.3.3.3.3.5" xref="S3.SS3.p6.1.m1.3.3.3.4.cmml">,</mo><msub id="S3.SS3.p6.1.m1.3.3.3.3.3" xref="S3.SS3.p6.1.m1.3.3.3.3.3.cmml"><mi id="S3.SS3.p6.1.m1.3.3.3.3.3.2" xref="S3.SS3.p6.1.m1.3.3.3.3.3.2.cmml">W</mi><mi id="S3.SS3.p6.1.m1.3.3.3.3.3.3" xref="S3.SS3.p6.1.m1.3.3.3.3.3.3.cmml">V</mi></msub></mrow><mo id="S3.SS3.p6.1.m1.3.3.4" xref="S3.SS3.p6.1.m1.3.3.4.cmml">∈</mo><msup id="S3.SS3.p6.1.m1.3.3.5" xref="S3.SS3.p6.1.m1.3.3.5.cmml"><mi id="S3.SS3.p6.1.m1.3.3.5.2" xref="S3.SS3.p6.1.m1.3.3.5.2.cmml">ℝ</mi><mrow id="S3.SS3.p6.1.m1.3.3.5.3" xref="S3.SS3.p6.1.m1.3.3.5.3.cmml"><mi id="S3.SS3.p6.1.m1.3.3.5.3.2" xref="S3.SS3.p6.1.m1.3.3.5.3.2.cmml">l</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.p6.1.m1.3.3.5.3.1" xref="S3.SS3.p6.1.m1.3.3.5.3.1.cmml">×</mo><mi id="S3.SS3.p6.1.m1.3.3.5.3.3" xref="S3.SS3.p6.1.m1.3.3.5.3.3.cmml">l</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.1.m1.3b"><apply id="S3.SS3.p6.1.m1.3.3.cmml" xref="S3.SS3.p6.1.m1.3.3"><in id="S3.SS3.p6.1.m1.3.3.4.cmml" xref="S3.SS3.p6.1.m1.3.3.4"></in><list id="S3.SS3.p6.1.m1.3.3.3.4.cmml" xref="S3.SS3.p6.1.m1.3.3.3.3"><apply id="S3.SS3.p6.1.m1.1.1.1.1.1.cmml" xref="S3.SS3.p6.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p6.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS3.p6.1.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS3.p6.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS3.p6.1.m1.1.1.1.1.1.2">𝑊</ci><ci id="S3.SS3.p6.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS3.p6.1.m1.1.1.1.1.1.3">𝑄</ci></apply><apply id="S3.SS3.p6.1.m1.2.2.2.2.2.cmml" xref="S3.SS3.p6.1.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.p6.1.m1.2.2.2.2.2.1.cmml" xref="S3.SS3.p6.1.m1.2.2.2.2.2">subscript</csymbol><ci id="S3.SS3.p6.1.m1.2.2.2.2.2.2.cmml" xref="S3.SS3.p6.1.m1.2.2.2.2.2.2">𝑊</ci><ci id="S3.SS3.p6.1.m1.2.2.2.2.2.3.cmml" xref="S3.SS3.p6.1.m1.2.2.2.2.2.3">𝐾</ci></apply><apply id="S3.SS3.p6.1.m1.3.3.3.3.3.cmml" xref="S3.SS3.p6.1.m1.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.p6.1.m1.3.3.3.3.3.1.cmml" xref="S3.SS3.p6.1.m1.3.3.3.3.3">subscript</csymbol><ci id="S3.SS3.p6.1.m1.3.3.3.3.3.2.cmml" xref="S3.SS3.p6.1.m1.3.3.3.3.3.2">𝑊</ci><ci id="S3.SS3.p6.1.m1.3.3.3.3.3.3.cmml" xref="S3.SS3.p6.1.m1.3.3.3.3.3.3">𝑉</ci></apply></list><apply id="S3.SS3.p6.1.m1.3.3.5.cmml" xref="S3.SS3.p6.1.m1.3.3.5"><csymbol cd="ambiguous" id="S3.SS3.p6.1.m1.3.3.5.1.cmml" xref="S3.SS3.p6.1.m1.3.3.5">superscript</csymbol><ci id="S3.SS3.p6.1.m1.3.3.5.2.cmml" xref="S3.SS3.p6.1.m1.3.3.5.2">ℝ</ci><apply id="S3.SS3.p6.1.m1.3.3.5.3.cmml" xref="S3.SS3.p6.1.m1.3.3.5.3"><times id="S3.SS3.p6.1.m1.3.3.5.3.1.cmml" xref="S3.SS3.p6.1.m1.3.3.5.3.1"></times><ci id="S3.SS3.p6.1.m1.3.3.5.3.2.cmml" xref="S3.SS3.p6.1.m1.3.3.5.3.2">𝑙</ci><ci id="S3.SS3.p6.1.m1.3.3.5.3.3.cmml" xref="S3.SS3.p6.1.m1.3.3.5.3.3">𝑙</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.1.m1.3c">W_{Q},W_{K},W_{V}\in\mathbb{R}^{l\times l}</annotation></semantics></math> are trainable matrices multiplied by the visual and word embeddings. The word embeddings need to be aligned to transform their size from <math id="S3.SS3.p6.2.m2.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS3.p6.2.m2.1a"><mi id="S3.SS3.p6.2.m2.1.1" xref="S3.SS3.p6.2.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.2.m2.1b"><ci id="S3.SS3.p6.2.m2.1.1.cmml" xref="S3.SS3.p6.2.m2.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.2.m2.1c">k</annotation></semantics></math> to <math id="S3.SS3.p6.3.m3.1" class="ltx_Math" alttext="l" display="inline"><semantics id="S3.SS3.p6.3.m3.1a"><mi id="S3.SS3.p6.3.m3.1.1" xref="S3.SS3.p6.3.m3.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.3.m3.1b"><ci id="S3.SS3.p6.3.m3.1.1.cmml" xref="S3.SS3.p6.3.m3.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.3.m3.1c">l</annotation></semantics></math> by the linear mapping <math id="S3.SS3.p6.4.m4.1" class="ltx_Math" alttext="T_{l}" display="inline"><semantics id="S3.SS3.p6.4.m4.1a"><msub id="S3.SS3.p6.4.m4.1.1" xref="S3.SS3.p6.4.m4.1.1.cmml"><mi id="S3.SS3.p6.4.m4.1.1.2" xref="S3.SS3.p6.4.m4.1.1.2.cmml">T</mi><mi id="S3.SS3.p6.4.m4.1.1.3" xref="S3.SS3.p6.4.m4.1.1.3.cmml">l</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.4.m4.1b"><apply id="S3.SS3.p6.4.m4.1.1.cmml" xref="S3.SS3.p6.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p6.4.m4.1.1.1.cmml" xref="S3.SS3.p6.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.p6.4.m4.1.1.2.cmml" xref="S3.SS3.p6.4.m4.1.1.2">𝑇</ci><ci id="S3.SS3.p6.4.m4.1.1.3.cmml" xref="S3.SS3.p6.4.m4.1.1.3">𝑙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.4.m4.1c">T_{l}</annotation></semantics></math> before being fed to the transformer decoder. The co-attention module <math id="S3.SS3.p6.5.m5.1" class="ltx_Math" alttext="\textbf{A}\in\mathbb{R}^{T_{i}\times M_{i}}" display="inline"><semantics id="S3.SS3.p6.5.m5.1a"><mrow id="S3.SS3.p6.5.m5.1.1" xref="S3.SS3.p6.5.m5.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S3.SS3.p6.5.m5.1.1.2" xref="S3.SS3.p6.5.m5.1.1.2a.cmml">A</mtext><mo id="S3.SS3.p6.5.m5.1.1.1" xref="S3.SS3.p6.5.m5.1.1.1.cmml">∈</mo><msup id="S3.SS3.p6.5.m5.1.1.3" xref="S3.SS3.p6.5.m5.1.1.3.cmml"><mi id="S3.SS3.p6.5.m5.1.1.3.2" xref="S3.SS3.p6.5.m5.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS3.p6.5.m5.1.1.3.3" xref="S3.SS3.p6.5.m5.1.1.3.3.cmml"><msub id="S3.SS3.p6.5.m5.1.1.3.3.2" xref="S3.SS3.p6.5.m5.1.1.3.3.2.cmml"><mi id="S3.SS3.p6.5.m5.1.1.3.3.2.2" xref="S3.SS3.p6.5.m5.1.1.3.3.2.2.cmml">T</mi><mi id="S3.SS3.p6.5.m5.1.1.3.3.2.3" xref="S3.SS3.p6.5.m5.1.1.3.3.2.3.cmml">i</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.p6.5.m5.1.1.3.3.1" xref="S3.SS3.p6.5.m5.1.1.3.3.1.cmml">×</mo><msub id="S3.SS3.p6.5.m5.1.1.3.3.3" xref="S3.SS3.p6.5.m5.1.1.3.3.3.cmml"><mi id="S3.SS3.p6.5.m5.1.1.3.3.3.2" xref="S3.SS3.p6.5.m5.1.1.3.3.3.2.cmml">M</mi><mi id="S3.SS3.p6.5.m5.1.1.3.3.3.3" xref="S3.SS3.p6.5.m5.1.1.3.3.3.3.cmml">i</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.5.m5.1b"><apply id="S3.SS3.p6.5.m5.1.1.cmml" xref="S3.SS3.p6.5.m5.1.1"><in id="S3.SS3.p6.5.m5.1.1.1.cmml" xref="S3.SS3.p6.5.m5.1.1.1"></in><ci id="S3.SS3.p6.5.m5.1.1.2a.cmml" xref="S3.SS3.p6.5.m5.1.1.2"><mtext class="ltx_mathvariant_bold" id="S3.SS3.p6.5.m5.1.1.2.cmml" xref="S3.SS3.p6.5.m5.1.1.2">A</mtext></ci><apply id="S3.SS3.p6.5.m5.1.1.3.cmml" xref="S3.SS3.p6.5.m5.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p6.5.m5.1.1.3.1.cmml" xref="S3.SS3.p6.5.m5.1.1.3">superscript</csymbol><ci id="S3.SS3.p6.5.m5.1.1.3.2.cmml" xref="S3.SS3.p6.5.m5.1.1.3.2">ℝ</ci><apply id="S3.SS3.p6.5.m5.1.1.3.3.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3"><times id="S3.SS3.p6.5.m5.1.1.3.3.1.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.1"></times><apply id="S3.SS3.p6.5.m5.1.1.3.3.2.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.SS3.p6.5.m5.1.1.3.3.2.1.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.2">subscript</csymbol><ci id="S3.SS3.p6.5.m5.1.1.3.3.2.2.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.2.2">𝑇</ci><ci id="S3.SS3.p6.5.m5.1.1.3.3.2.3.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.2.3">𝑖</ci></apply><apply id="S3.SS3.p6.5.m5.1.1.3.3.3.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.p6.5.m5.1.1.3.3.3.1.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.3">subscript</csymbol><ci id="S3.SS3.p6.5.m5.1.1.3.3.3.2.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.3.2">𝑀</ci><ci id="S3.SS3.p6.5.m5.1.1.3.3.3.3.cmml" xref="S3.SS3.p6.5.m5.1.1.3.3.3.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.5.m5.1c">\textbf{A}\in\mathbb{R}^{T_{i}\times M_{i}}</annotation></semantics></math> learns fine-grained patch-word similarity showing how much word tokens <math id="S3.SS3.p6.6.m6.1" class="ltx_Math" alttext="\{q_{i}\}" display="inline"><semantics id="S3.SS3.p6.6.m6.1a"><mrow id="S3.SS3.p6.6.m6.1.1.1" xref="S3.SS3.p6.6.m6.1.1.2.cmml"><mo stretchy="false" id="S3.SS3.p6.6.m6.1.1.1.2" xref="S3.SS3.p6.6.m6.1.1.2.cmml">{</mo><msub id="S3.SS3.p6.6.m6.1.1.1.1" xref="S3.SS3.p6.6.m6.1.1.1.1.cmml"><mi id="S3.SS3.p6.6.m6.1.1.1.1.2" xref="S3.SS3.p6.6.m6.1.1.1.1.2.cmml">q</mi><mi id="S3.SS3.p6.6.m6.1.1.1.1.3" xref="S3.SS3.p6.6.m6.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="S3.SS3.p6.6.m6.1.1.1.3" xref="S3.SS3.p6.6.m6.1.1.2.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.6.m6.1b"><set id="S3.SS3.p6.6.m6.1.1.2.cmml" xref="S3.SS3.p6.6.m6.1.1.1"><apply id="S3.SS3.p6.6.m6.1.1.1.1.cmml" xref="S3.SS3.p6.6.m6.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p6.6.m6.1.1.1.1.1.cmml" xref="S3.SS3.p6.6.m6.1.1.1.1">subscript</csymbol><ci id="S3.SS3.p6.6.m6.1.1.1.1.2.cmml" xref="S3.SS3.p6.6.m6.1.1.1.1.2">𝑞</ci><ci id="S3.SS3.p6.6.m6.1.1.1.1.3.cmml" xref="S3.SS3.p6.6.m6.1.1.1.1.3">𝑖</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.6.m6.1c">\{q_{i}\}</annotation></semantics></math> attend to patches <math id="S3.SS3.p6.7.m7.1" class="ltx_Math" alttext="\{x_{i}\}" display="inline"><semantics id="S3.SS3.p6.7.m7.1a"><mrow id="S3.SS3.p6.7.m7.1.1.1" xref="S3.SS3.p6.7.m7.1.1.2.cmml"><mo stretchy="false" id="S3.SS3.p6.7.m7.1.1.1.2" xref="S3.SS3.p6.7.m7.1.1.2.cmml">{</mo><msub id="S3.SS3.p6.7.m7.1.1.1.1" xref="S3.SS3.p6.7.m7.1.1.1.1.cmml"><mi id="S3.SS3.p6.7.m7.1.1.1.1.2" xref="S3.SS3.p6.7.m7.1.1.1.1.2.cmml">x</mi><mi id="S3.SS3.p6.7.m7.1.1.1.1.3" xref="S3.SS3.p6.7.m7.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="S3.SS3.p6.7.m7.1.1.1.3" xref="S3.SS3.p6.7.m7.1.1.2.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.7.m7.1b"><set id="S3.SS3.p6.7.m7.1.1.2.cmml" xref="S3.SS3.p6.7.m7.1.1.1"><apply id="S3.SS3.p6.7.m7.1.1.1.1.cmml" xref="S3.SS3.p6.7.m7.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p6.7.m7.1.1.1.1.1.cmml" xref="S3.SS3.p6.7.m7.1.1.1.1">subscript</csymbol><ci id="S3.SS3.p6.7.m7.1.1.1.1.2.cmml" xref="S3.SS3.p6.7.m7.1.1.1.1.2">𝑥</ci><ci id="S3.SS3.p6.7.m7.1.1.1.1.3.cmml" xref="S3.SS3.p6.7.m7.1.1.1.1.3">𝑖</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.7.m7.1c">\{x_{i}\}</annotation></semantics></math>. For a single word embedding <math id="S3.SS3.p6.8.m8.1" class="ltx_Math" alttext="q_{n}" display="inline"><semantics id="S3.SS3.p6.8.m8.1a"><msub id="S3.SS3.p6.8.m8.1.1" xref="S3.SS3.p6.8.m8.1.1.cmml"><mi id="S3.SS3.p6.8.m8.1.1.2" xref="S3.SS3.p6.8.m8.1.1.2.cmml">q</mi><mi id="S3.SS3.p6.8.m8.1.1.3" xref="S3.SS3.p6.8.m8.1.1.3.cmml">n</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.8.m8.1b"><apply id="S3.SS3.p6.8.m8.1.1.cmml" xref="S3.SS3.p6.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS3.p6.8.m8.1.1.1.cmml" xref="S3.SS3.p6.8.m8.1.1">subscript</csymbol><ci id="S3.SS3.p6.8.m8.1.1.2.cmml" xref="S3.SS3.p6.8.m8.1.1.2">𝑞</ci><ci id="S3.SS3.p6.8.m8.1.1.3.cmml" xref="S3.SS3.p6.8.m8.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.8.m8.1c">q_{n}</annotation></semantics></math>, the according weight matrice is <math id="S3.SS3.p6.9.m9.1" class="ltx_Math" alttext="\textbf{A}_{n}\in\mathbb{R}^{1\times M_{i}}" display="inline"><semantics id="S3.SS3.p6.9.m9.1a"><mrow id="S3.SS3.p6.9.m9.1.1" xref="S3.SS3.p6.9.m9.1.1.cmml"><msub id="S3.SS3.p6.9.m9.1.1.2" xref="S3.SS3.p6.9.m9.1.1.2.cmml"><mtext class="ltx_mathvariant_bold" id="S3.SS3.p6.9.m9.1.1.2.2" xref="S3.SS3.p6.9.m9.1.1.2.2a.cmml">A</mtext><mi id="S3.SS3.p6.9.m9.1.1.2.3" xref="S3.SS3.p6.9.m9.1.1.2.3.cmml">n</mi></msub><mo id="S3.SS3.p6.9.m9.1.1.1" xref="S3.SS3.p6.9.m9.1.1.1.cmml">∈</mo><msup id="S3.SS3.p6.9.m9.1.1.3" xref="S3.SS3.p6.9.m9.1.1.3.cmml"><mi id="S3.SS3.p6.9.m9.1.1.3.2" xref="S3.SS3.p6.9.m9.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS3.p6.9.m9.1.1.3.3" xref="S3.SS3.p6.9.m9.1.1.3.3.cmml"><mn id="S3.SS3.p6.9.m9.1.1.3.3.2" xref="S3.SS3.p6.9.m9.1.1.3.3.2.cmml">1</mn><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.p6.9.m9.1.1.3.3.1" xref="S3.SS3.p6.9.m9.1.1.3.3.1.cmml">×</mo><msub id="S3.SS3.p6.9.m9.1.1.3.3.3" xref="S3.SS3.p6.9.m9.1.1.3.3.3.cmml"><mi id="S3.SS3.p6.9.m9.1.1.3.3.3.2" xref="S3.SS3.p6.9.m9.1.1.3.3.3.2.cmml">M</mi><mi id="S3.SS3.p6.9.m9.1.1.3.3.3.3" xref="S3.SS3.p6.9.m9.1.1.3.3.3.3.cmml">i</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.9.m9.1b"><apply id="S3.SS3.p6.9.m9.1.1.cmml" xref="S3.SS3.p6.9.m9.1.1"><in id="S3.SS3.p6.9.m9.1.1.1.cmml" xref="S3.SS3.p6.9.m9.1.1.1"></in><apply id="S3.SS3.p6.9.m9.1.1.2.cmml" xref="S3.SS3.p6.9.m9.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.p6.9.m9.1.1.2.1.cmml" xref="S3.SS3.p6.9.m9.1.1.2">subscript</csymbol><ci id="S3.SS3.p6.9.m9.1.1.2.2a.cmml" xref="S3.SS3.p6.9.m9.1.1.2.2"><mtext class="ltx_mathvariant_bold" id="S3.SS3.p6.9.m9.1.1.2.2.cmml" xref="S3.SS3.p6.9.m9.1.1.2.2">A</mtext></ci><ci id="S3.SS3.p6.9.m9.1.1.2.3.cmml" xref="S3.SS3.p6.9.m9.1.1.2.3">𝑛</ci></apply><apply id="S3.SS3.p6.9.m9.1.1.3.cmml" xref="S3.SS3.p6.9.m9.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p6.9.m9.1.1.3.1.cmml" xref="S3.SS3.p6.9.m9.1.1.3">superscript</csymbol><ci id="S3.SS3.p6.9.m9.1.1.3.2.cmml" xref="S3.SS3.p6.9.m9.1.1.3.2">ℝ</ci><apply id="S3.SS3.p6.9.m9.1.1.3.3.cmml" xref="S3.SS3.p6.9.m9.1.1.3.3"><times id="S3.SS3.p6.9.m9.1.1.3.3.1.cmml" xref="S3.SS3.p6.9.m9.1.1.3.3.1"></times><cn type="integer" id="S3.SS3.p6.9.m9.1.1.3.3.2.cmml" xref="S3.SS3.p6.9.m9.1.1.3.3.2">1</cn><apply id="S3.SS3.p6.9.m9.1.1.3.3.3.cmml" xref="S3.SS3.p6.9.m9.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.p6.9.m9.1.1.3.3.3.1.cmml" xref="S3.SS3.p6.9.m9.1.1.3.3.3">subscript</csymbol><ci id="S3.SS3.p6.9.m9.1.1.3.3.3.2.cmml" xref="S3.SS3.p6.9.m9.1.1.3.3.3.2">𝑀</ci><ci id="S3.SS3.p6.9.m9.1.1.3.3.3.3.cmml" xref="S3.SS3.p6.9.m9.1.1.3.3.3.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.9.m9.1c">\textbf{A}_{n}\in\mathbb{R}^{1\times M_{i}}</annotation></semantics></math> which reflects how attentions are allocated to the enormous patches based on the <math id="S3.SS3.p6.10.m10.1" class="ltx_Math" alttext="n-th" display="inline"><semantics id="S3.SS3.p6.10.m10.1a"><mrow id="S3.SS3.p6.10.m10.1.1" xref="S3.SS3.p6.10.m10.1.1.cmml"><mi id="S3.SS3.p6.10.m10.1.1.2" xref="S3.SS3.p6.10.m10.1.1.2.cmml">n</mi><mo id="S3.SS3.p6.10.m10.1.1.1" xref="S3.SS3.p6.10.m10.1.1.1.cmml">−</mo><mrow id="S3.SS3.p6.10.m10.1.1.3" xref="S3.SS3.p6.10.m10.1.1.3.cmml"><mi id="S3.SS3.p6.10.m10.1.1.3.2" xref="S3.SS3.p6.10.m10.1.1.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.SS3.p6.10.m10.1.1.3.1" xref="S3.SS3.p6.10.m10.1.1.3.1.cmml">​</mo><mi id="S3.SS3.p6.10.m10.1.1.3.3" xref="S3.SS3.p6.10.m10.1.1.3.3.cmml">h</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.10.m10.1b"><apply id="S3.SS3.p6.10.m10.1.1.cmml" xref="S3.SS3.p6.10.m10.1.1"><minus id="S3.SS3.p6.10.m10.1.1.1.cmml" xref="S3.SS3.p6.10.m10.1.1.1"></minus><ci id="S3.SS3.p6.10.m10.1.1.2.cmml" xref="S3.SS3.p6.10.m10.1.1.2">𝑛</ci><apply id="S3.SS3.p6.10.m10.1.1.3.cmml" xref="S3.SS3.p6.10.m10.1.1.3"><times id="S3.SS3.p6.10.m10.1.1.3.1.cmml" xref="S3.SS3.p6.10.m10.1.1.3.1"></times><ci id="S3.SS3.p6.10.m10.1.1.3.2.cmml" xref="S3.SS3.p6.10.m10.1.1.3.2">𝑡</ci><ci id="S3.SS3.p6.10.m10.1.1.3.3.cmml" xref="S3.SS3.p6.10.m10.1.1.3.3">ℎ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.10.m10.1c">n-th</annotation></semantics></math> word token. For each WSI-question pair, we choose the keyword (biological entity in the question) to guide the generation of attention maps as a visual explanation for the answer. For example, since the keyword ’her2’ is the <math id="S3.SS3.p6.11.m11.1" class="ltx_Math" alttext="4-th" display="inline"><semantics id="S3.SS3.p6.11.m11.1a"><mrow id="S3.SS3.p6.11.m11.1.1" xref="S3.SS3.p6.11.m11.1.1.cmml"><mn id="S3.SS3.p6.11.m11.1.1.2" xref="S3.SS3.p6.11.m11.1.1.2.cmml">4</mn><mo id="S3.SS3.p6.11.m11.1.1.1" xref="S3.SS3.p6.11.m11.1.1.1.cmml">−</mo><mrow id="S3.SS3.p6.11.m11.1.1.3" xref="S3.SS3.p6.11.m11.1.1.3.cmml"><mi id="S3.SS3.p6.11.m11.1.1.3.2" xref="S3.SS3.p6.11.m11.1.1.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.SS3.p6.11.m11.1.1.3.1" xref="S3.SS3.p6.11.m11.1.1.3.1.cmml">​</mo><mi id="S3.SS3.p6.11.m11.1.1.3.3" xref="S3.SS3.p6.11.m11.1.1.3.3.cmml">h</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.11.m11.1b"><apply id="S3.SS3.p6.11.m11.1.1.cmml" xref="S3.SS3.p6.11.m11.1.1"><minus id="S3.SS3.p6.11.m11.1.1.1.cmml" xref="S3.SS3.p6.11.m11.1.1.1"></minus><cn type="integer" id="S3.SS3.p6.11.m11.1.1.2.cmml" xref="S3.SS3.p6.11.m11.1.1.2">4</cn><apply id="S3.SS3.p6.11.m11.1.1.3.cmml" xref="S3.SS3.p6.11.m11.1.1.3"><times id="S3.SS3.p6.11.m11.1.1.3.1.cmml" xref="S3.SS3.p6.11.m11.1.1.3.1"></times><ci id="S3.SS3.p6.11.m11.1.1.3.2.cmml" xref="S3.SS3.p6.11.m11.1.1.3.2">𝑡</ci><ci id="S3.SS3.p6.11.m11.1.1.3.3.cmml" xref="S3.SS3.p6.11.m11.1.1.3.3">ℎ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.11.m11.1c">4-th</annotation></semantics></math> token in the question as shown in Fig. <a href="#S5.F5" title="Figure 5 ‣ 5.1 Benchmark ‣ 5 Results ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>, we choose <math id="S3.SS3.p6.12.m12.1" class="ltx_Math" alttext="\textbf{A}_{4}\in\mathbb{R}^{1\times M_{i}}" display="inline"><semantics id="S3.SS3.p6.12.m12.1a"><mrow id="S3.SS3.p6.12.m12.1.1" xref="S3.SS3.p6.12.m12.1.1.cmml"><msub id="S3.SS3.p6.12.m12.1.1.2" xref="S3.SS3.p6.12.m12.1.1.2.cmml"><mtext class="ltx_mathvariant_bold" id="S3.SS3.p6.12.m12.1.1.2.2" xref="S3.SS3.p6.12.m12.1.1.2.2a.cmml">A</mtext><mn id="S3.SS3.p6.12.m12.1.1.2.3" xref="S3.SS3.p6.12.m12.1.1.2.3.cmml">4</mn></msub><mo id="S3.SS3.p6.12.m12.1.1.1" xref="S3.SS3.p6.12.m12.1.1.1.cmml">∈</mo><msup id="S3.SS3.p6.12.m12.1.1.3" xref="S3.SS3.p6.12.m12.1.1.3.cmml"><mi id="S3.SS3.p6.12.m12.1.1.3.2" xref="S3.SS3.p6.12.m12.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS3.p6.12.m12.1.1.3.3" xref="S3.SS3.p6.12.m12.1.1.3.3.cmml"><mn id="S3.SS3.p6.12.m12.1.1.3.3.2" xref="S3.SS3.p6.12.m12.1.1.3.3.2.cmml">1</mn><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.p6.12.m12.1.1.3.3.1" xref="S3.SS3.p6.12.m12.1.1.3.3.1.cmml">×</mo><msub id="S3.SS3.p6.12.m12.1.1.3.3.3" xref="S3.SS3.p6.12.m12.1.1.3.3.3.cmml"><mi id="S3.SS3.p6.12.m12.1.1.3.3.3.2" xref="S3.SS3.p6.12.m12.1.1.3.3.3.2.cmml">M</mi><mi id="S3.SS3.p6.12.m12.1.1.3.3.3.3" xref="S3.SS3.p6.12.m12.1.1.3.3.3.3.cmml">i</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p6.12.m12.1b"><apply id="S3.SS3.p6.12.m12.1.1.cmml" xref="S3.SS3.p6.12.m12.1.1"><in id="S3.SS3.p6.12.m12.1.1.1.cmml" xref="S3.SS3.p6.12.m12.1.1.1"></in><apply id="S3.SS3.p6.12.m12.1.1.2.cmml" xref="S3.SS3.p6.12.m12.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.p6.12.m12.1.1.2.1.cmml" xref="S3.SS3.p6.12.m12.1.1.2">subscript</csymbol><ci id="S3.SS3.p6.12.m12.1.1.2.2a.cmml" xref="S3.SS3.p6.12.m12.1.1.2.2"><mtext class="ltx_mathvariant_bold" id="S3.SS3.p6.12.m12.1.1.2.2.cmml" xref="S3.SS3.p6.12.m12.1.1.2.2">A</mtext></ci><cn type="integer" id="S3.SS3.p6.12.m12.1.1.2.3.cmml" xref="S3.SS3.p6.12.m12.1.1.2.3">4</cn></apply><apply id="S3.SS3.p6.12.m12.1.1.3.cmml" xref="S3.SS3.p6.12.m12.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p6.12.m12.1.1.3.1.cmml" xref="S3.SS3.p6.12.m12.1.1.3">superscript</csymbol><ci id="S3.SS3.p6.12.m12.1.1.3.2.cmml" xref="S3.SS3.p6.12.m12.1.1.3.2">ℝ</ci><apply id="S3.SS3.p6.12.m12.1.1.3.3.cmml" xref="S3.SS3.p6.12.m12.1.1.3.3"><times id="S3.SS3.p6.12.m12.1.1.3.3.1.cmml" xref="S3.SS3.p6.12.m12.1.1.3.3.1"></times><cn type="integer" id="S3.SS3.p6.12.m12.1.1.3.3.2.cmml" xref="S3.SS3.p6.12.m12.1.1.3.3.2">1</cn><apply id="S3.SS3.p6.12.m12.1.1.3.3.3.cmml" xref="S3.SS3.p6.12.m12.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.p6.12.m12.1.1.3.3.3.1.cmml" xref="S3.SS3.p6.12.m12.1.1.3.3.3">subscript</csymbol><ci id="S3.SS3.p6.12.m12.1.1.3.3.3.2.cmml" xref="S3.SS3.p6.12.m12.1.1.3.3.3.2">𝑀</ci><ci id="S3.SS3.p6.12.m12.1.1.3.3.3.3.cmml" xref="S3.SS3.p6.12.m12.1.1.3.3.3.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p6.12.m12.1c">\textbf{A}_{4}\in\mathbb{R}^{1\times M_{i}}</annotation></semantics></math> to be visualized as heatmaps. The highlighted regions prove to be more relevant to the answer.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">In this section, we first provide more details about our proposed dataset WSI-VQA. The backbones we choose to extract visual and word embeddings are also introduced. Finally, we elaborate on the setting of our proposed model W2T.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>WSI-VQA Dataset</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p">Our proposed WSI-VQA dataset contains a total of 977 WSIs with 8671 question-answering pairs. We split the dataset into a training set, a validation set, and a test set. The training set includes 804 WSIs with 7139 question-answering pairs. The validation set contains 87 WSIs and 798 pairs. And the test set contains 86 WSIs and 735 question-answering pairs. The right choices in the close-ended subset when testing include 151 for A, 107 for B, 86 for C, and 46 for D. We use both language metrics and clinical metrics to evaluate our model. For the closed-ended subset, we also adopt accuracy (ACC) by comparing the sentence similarity to measure the performance of the model.</p>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Visual Extractors</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">Here we present different visual extractors in our generative model.
<span id="S4.SS2.p1.1.1" class="ltx_text ltx_font_bold">ResNet</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>
is a classic vision model, pre-trained by a lot of natural images and their classification label in ImageNet. The version we use is ResNet-50 which is composed of 50 convolutional layers with 25.6M parameters. <span id="S4.SS2.p1.1.2" class="ltx_text ltx_font_bold">ViT</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite> is the vision transformer VIT-S which has 12 transformer layers with approximately 22M parameters.
<span id="S4.SS2.p1.1.3" class="ltx_text ltx_font_bold">DINO</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite> is a strategy of self-supervised pre-training with a standard ViT model. It is adopted to pre-train the backbone with our cropped patches from TCGA-BRCA. We choose VIT-S as the backbone.
<span id="S4.SS2.p1.1.4" class="ltx_text ltx_font_bold">HIPT</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite> which conducts hierarchical self-supervised learning with a pyramid transformer is a WSI-specialized self-supervised approach of pre-training. It exploits the hierarchical structure inherent in WSIs from the whole TCGA to learn high-resolution image representations.</p>
</div>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Text Extractors</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p id="S4.SS3.p1.1" class="ltx_p">In this section, we present different text extractors which are employed in W2T.
<span id="S4.SS3.p1.1.1" class="ltx_text ltx_font_bold">BioClinicalBert</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite> is a BERT-like model which is trained on all notes from MIMIC III<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>, a database (text size 0.5B words / 3.7GB) which has abundant electronic health records from the hospitals. It is initialized with BERT-Base which has 12 transformer layers with around 110M parameters.
<span id="S4.SS3.p1.1.2" class="ltx_text ltx_font_bold">PubMedBert</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite> is trained with abstracts and articles from PubMed and PubMedCentral <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib34" title="" class="ltx_ref">34</a>]</cite> with the size of 3.1B words / 21G based on BERT-base structure.
<span id="S4.SS3.p1.1.3" class="ltx_text ltx_font_bold">Scratch</span> means that we use an embedding mapping to extract the text features without freezing the parameters. Since the length of word tokens is much smaller than image tokens, it is feasible to train a text extractor from scratch while the visual extractor can not be trainable.</p>
</div>
</section>
<section id="S4.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Training Setting</h3>

<div id="S4.SS4.p1" class="ltx_para">
<p id="S4.SS4.p1.2" class="ltx_p">The transformer encoder <math id="S4.SS4.p1.1.m1.1" class="ltx_Math" alttext="T_{e}" display="inline"><semantics id="S4.SS4.p1.1.m1.1a"><msub id="S4.SS4.p1.1.m1.1.1" xref="S4.SS4.p1.1.m1.1.1.cmml"><mi id="S4.SS4.p1.1.m1.1.1.2" xref="S4.SS4.p1.1.m1.1.1.2.cmml">T</mi><mi id="S4.SS4.p1.1.m1.1.1.3" xref="S4.SS4.p1.1.m1.1.1.3.cmml">e</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.1.m1.1b"><apply id="S4.SS4.p1.1.m1.1.1.cmml" xref="S4.SS4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS4.p1.1.m1.1.1.1.cmml" xref="S4.SS4.p1.1.m1.1.1">subscript</csymbol><ci id="S4.SS4.p1.1.m1.1.1.2.cmml" xref="S4.SS4.p1.1.m1.1.1.2">𝑇</ci><ci id="S4.SS4.p1.1.m1.1.1.3.cmml" xref="S4.SS4.p1.1.m1.1.1.3">𝑒</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.1.m1.1c">T_{e}</annotation></semantics></math> and decoder <math id="S4.SS4.p1.2.m2.1" class="ltx_Math" alttext="T_{d}" display="inline"><semantics id="S4.SS4.p1.2.m2.1a"><msub id="S4.SS4.p1.2.m2.1.1" xref="S4.SS4.p1.2.m2.1.1.cmml"><mi id="S4.SS4.p1.2.m2.1.1.2" xref="S4.SS4.p1.2.m2.1.1.2.cmml">T</mi><mi id="S4.SS4.p1.2.m2.1.1.3" xref="S4.SS4.p1.2.m2.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.2.m2.1b"><apply id="S4.SS4.p1.2.m2.1.1.cmml" xref="S4.SS4.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS4.p1.2.m2.1.1.1.cmml" xref="S4.SS4.p1.2.m2.1.1">subscript</csymbol><ci id="S4.SS4.p1.2.m2.1.1.2.cmml" xref="S4.SS4.p1.2.m2.1.1.2">𝑇</ci><ci id="S4.SS4.p1.2.m2.1.1.3.cmml" xref="S4.SS4.p1.2.m2.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.2.m2.1c">T_{d}</annotation></semantics></math> include three layers and the hidden size is 512. The multi-head self-attention has 4 heads and the embedding size is also 512. Adam is adopted as the optimizer to train our model with a learning rate of 1e-4 and a weight decay of 5e-5. In the inference stage, the size of beam search is 3. All our experiments are trained on one A100-80G Nvidia GPU with PyTorch.</p>
</div>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Results</h2>

<section id="S5.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Benchmark</h3>

<div id="S5.SS1.p1" class="ltx_para">
<p id="S5.SS1.p1.1" class="ltx_p">As illustrated in Table <a href="#S5.T1" title="Table 1 ‣ 5.1 Benchmark ‣ 5 Results ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, we introduce our WSI-VQA benchmark on our proposed dataset. Different visual extractors and text extractors are included for comparison. To measure the performance of the baselines, we consider two kinds of metrics: 1) natural language generation (NLG) metrics such as BLEU <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib32" title="" class="ltx_ref">32</a>]</cite>, METEOR <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>, and ROUGE <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite> which are widely used in natural language processing tasks, and 2) factual consistency and completeness (FCC) metrics to measure the clinical performance of the model. It is worth noting that ACC is only adopted to evaluate the close-ended subset which contains multiple candidate choices one of which is the right answer. And <math id="S5.SS1.p1.1.m1.1" class="ltx_Math" alttext="Fact_{ent}" display="inline"><semantics id="S5.SS1.p1.1.m1.1a"><mrow id="S5.SS1.p1.1.m1.1.1" xref="S5.SS1.p1.1.m1.1.1.cmml"><mi id="S5.SS1.p1.1.m1.1.1.2" xref="S5.SS1.p1.1.m1.1.1.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p1.1.m1.1.1.1" xref="S5.SS1.p1.1.m1.1.1.1.cmml">​</mo><mi id="S5.SS1.p1.1.m1.1.1.3" xref="S5.SS1.p1.1.m1.1.1.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p1.1.m1.1.1.1a" xref="S5.SS1.p1.1.m1.1.1.1.cmml">​</mo><mi id="S5.SS1.p1.1.m1.1.1.4" xref="S5.SS1.p1.1.m1.1.1.4.cmml">c</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p1.1.m1.1.1.1b" xref="S5.SS1.p1.1.m1.1.1.1.cmml">​</mo><msub id="S5.SS1.p1.1.m1.1.1.5" xref="S5.SS1.p1.1.m1.1.1.5.cmml"><mi id="S5.SS1.p1.1.m1.1.1.5.2" xref="S5.SS1.p1.1.m1.1.1.5.2.cmml">t</mi><mrow id="S5.SS1.p1.1.m1.1.1.5.3" xref="S5.SS1.p1.1.m1.1.1.5.3.cmml"><mi id="S5.SS1.p1.1.m1.1.1.5.3.2" xref="S5.SS1.p1.1.m1.1.1.5.3.2.cmml">e</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p1.1.m1.1.1.5.3.1" xref="S5.SS1.p1.1.m1.1.1.5.3.1.cmml">​</mo><mi id="S5.SS1.p1.1.m1.1.1.5.3.3" xref="S5.SS1.p1.1.m1.1.1.5.3.3.cmml">n</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p1.1.m1.1.1.5.3.1a" xref="S5.SS1.p1.1.m1.1.1.5.3.1.cmml">​</mo><mi id="S5.SS1.p1.1.m1.1.1.5.3.4" xref="S5.SS1.p1.1.m1.1.1.5.3.4.cmml">t</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p1.1.m1.1b"><apply id="S5.SS1.p1.1.m1.1.1.cmml" xref="S5.SS1.p1.1.m1.1.1"><times id="S5.SS1.p1.1.m1.1.1.1.cmml" xref="S5.SS1.p1.1.m1.1.1.1"></times><ci id="S5.SS1.p1.1.m1.1.1.2.cmml" xref="S5.SS1.p1.1.m1.1.1.2">𝐹</ci><ci id="S5.SS1.p1.1.m1.1.1.3.cmml" xref="S5.SS1.p1.1.m1.1.1.3">𝑎</ci><ci id="S5.SS1.p1.1.m1.1.1.4.cmml" xref="S5.SS1.p1.1.m1.1.1.4">𝑐</ci><apply id="S5.SS1.p1.1.m1.1.1.5.cmml" xref="S5.SS1.p1.1.m1.1.1.5"><csymbol cd="ambiguous" id="S5.SS1.p1.1.m1.1.1.5.1.cmml" xref="S5.SS1.p1.1.m1.1.1.5">subscript</csymbol><ci id="S5.SS1.p1.1.m1.1.1.5.2.cmml" xref="S5.SS1.p1.1.m1.1.1.5.2">𝑡</ci><apply id="S5.SS1.p1.1.m1.1.1.5.3.cmml" xref="S5.SS1.p1.1.m1.1.1.5.3"><times id="S5.SS1.p1.1.m1.1.1.5.3.1.cmml" xref="S5.SS1.p1.1.m1.1.1.5.3.1"></times><ci id="S5.SS1.p1.1.m1.1.1.5.3.2.cmml" xref="S5.SS1.p1.1.m1.1.1.5.3.2">𝑒</ci><ci id="S5.SS1.p1.1.m1.1.1.5.3.3.cmml" xref="S5.SS1.p1.1.m1.1.1.5.3.3">𝑛</ci><ci id="S5.SS1.p1.1.m1.1.1.5.3.4.cmml" xref="S5.SS1.p1.1.m1.1.1.5.3.4">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p1.1.m1.1c">Fact_{ent}</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib30" title="" class="ltx_ref">30</a>]</cite> is used to measure how much the generated entities in the pathology domain are consistent with the reference.</p>
</div>
<figure id="S5.T1" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span id="S5.T1.5.2.1" class="ltx_text" style="font-size:90%;">Table 1</span>: </span><span id="S5.T1.2.1" class="ltx_text" style="font-size:90%;">Quantitative results of the VQA performance of different baselines in WSI-VQA. Different combinations of visual extractors and text extractors are present for comparison. BLUE-n indicates the BLUE score computed based on n-grams. NLG metrics also contain METEOR and ROUGE. ACC and <math id="S5.T1.2.1.m1.1" class="ltx_Math" alttext="Fact_{ent}" display="inline"><semantics id="S5.T1.2.1.m1.1b"><mrow id="S5.T1.2.1.m1.1.1" xref="S5.T1.2.1.m1.1.1.cmml"><mi id="S5.T1.2.1.m1.1.1.2" xref="S5.T1.2.1.m1.1.1.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="S5.T1.2.1.m1.1.1.1" xref="S5.T1.2.1.m1.1.1.1.cmml">​</mo><mi id="S5.T1.2.1.m1.1.1.3" xref="S5.T1.2.1.m1.1.1.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="S5.T1.2.1.m1.1.1.1b" xref="S5.T1.2.1.m1.1.1.1.cmml">​</mo><mi id="S5.T1.2.1.m1.1.1.4" xref="S5.T1.2.1.m1.1.1.4.cmml">c</mi><mo lspace="0em" rspace="0em" id="S5.T1.2.1.m1.1.1.1c" xref="S5.T1.2.1.m1.1.1.1.cmml">​</mo><msub id="S5.T1.2.1.m1.1.1.5" xref="S5.T1.2.1.m1.1.1.5.cmml"><mi id="S5.T1.2.1.m1.1.1.5.2" xref="S5.T1.2.1.m1.1.1.5.2.cmml">t</mi><mrow id="S5.T1.2.1.m1.1.1.5.3" xref="S5.T1.2.1.m1.1.1.5.3.cmml"><mi id="S5.T1.2.1.m1.1.1.5.3.2" xref="S5.T1.2.1.m1.1.1.5.3.2.cmml">e</mi><mo lspace="0em" rspace="0em" id="S5.T1.2.1.m1.1.1.5.3.1" xref="S5.T1.2.1.m1.1.1.5.3.1.cmml">​</mo><mi id="S5.T1.2.1.m1.1.1.5.3.3" xref="S5.T1.2.1.m1.1.1.5.3.3.cmml">n</mi><mo lspace="0em" rspace="0em" id="S5.T1.2.1.m1.1.1.5.3.1b" xref="S5.T1.2.1.m1.1.1.5.3.1.cmml">​</mo><mi id="S5.T1.2.1.m1.1.1.5.3.4" xref="S5.T1.2.1.m1.1.1.5.3.4.cmml">t</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.T1.2.1.m1.1c"><apply id="S5.T1.2.1.m1.1.1.cmml" xref="S5.T1.2.1.m1.1.1"><times id="S5.T1.2.1.m1.1.1.1.cmml" xref="S5.T1.2.1.m1.1.1.1"></times><ci id="S5.T1.2.1.m1.1.1.2.cmml" xref="S5.T1.2.1.m1.1.1.2">𝐹</ci><ci id="S5.T1.2.1.m1.1.1.3.cmml" xref="S5.T1.2.1.m1.1.1.3">𝑎</ci><ci id="S5.T1.2.1.m1.1.1.4.cmml" xref="S5.T1.2.1.m1.1.1.4">𝑐</ci><apply id="S5.T1.2.1.m1.1.1.5.cmml" xref="S5.T1.2.1.m1.1.1.5"><csymbol cd="ambiguous" id="S5.T1.2.1.m1.1.1.5.1.cmml" xref="S5.T1.2.1.m1.1.1.5">subscript</csymbol><ci id="S5.T1.2.1.m1.1.1.5.2.cmml" xref="S5.T1.2.1.m1.1.1.5.2">𝑡</ci><apply id="S5.T1.2.1.m1.1.1.5.3.cmml" xref="S5.T1.2.1.m1.1.1.5.3"><times id="S5.T1.2.1.m1.1.1.5.3.1.cmml" xref="S5.T1.2.1.m1.1.1.5.3.1"></times><ci id="S5.T1.2.1.m1.1.1.5.3.2.cmml" xref="S5.T1.2.1.m1.1.1.5.3.2">𝑒</ci><ci id="S5.T1.2.1.m1.1.1.5.3.3.cmml" xref="S5.T1.2.1.m1.1.1.5.3.3">𝑛</ci><ci id="S5.T1.2.1.m1.1.1.5.3.4.cmml" xref="S5.T1.2.1.m1.1.1.5.3.4">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T1.2.1.m1.1d">Fact_{ent}</annotation></semantics></math> are adopted to measure the factual consistency and completeness of the answer.</span></figcaption>
<div id="S5.T1.3" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:433.6pt;height:330.9pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(51.7pt,-39.5pt) scale(1.31323275960667,1.31323275960667) ;">
<table id="S5.T1.3.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S5.T1.3.1.2.1" class="ltx_tr">
<th id="S5.T1.3.1.2.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_tt" style="padding-top:1.05pt;padding-bottom:1.05pt;" rowspan="2"><span id="S5.T1.3.1.2.1.1.1" class="ltx_text" style="font-size:70%;">Visual Extractor</span></th>
<th id="S5.T1.3.1.2.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_tt" style="padding-top:1.05pt;padding-bottom:1.05pt;" rowspan="2"><span id="S5.T1.3.1.2.1.2.1" class="ltx_text" style="font-size:70%;">Text Extractor</span></th>
<th id="S5.T1.3.1.2.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1.05pt;padding-bottom:1.05pt;" colspan="4"><span id="S5.T1.3.1.2.1.3.1" class="ltx_text" style="font-size:70%;">NLG Metrics</span></th>
<th id="S5.T1.3.1.2.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-top:1.05pt;padding-bottom:1.05pt;" colspan="2"><span id="S5.T1.3.1.2.1.4.1" class="ltx_text" style="font-size:70%;">FCC Metrics</span></th>
</tr>
<tr id="S5.T1.3.1.1" class="ltx_tr">
<th id="S5.T1.3.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.1.2.1" class="ltx_text" style="font-size:70%;">Bleu-1</span></th>
<th id="S5.T1.3.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.1.3.1" class="ltx_text" style="font-size:70%;">Bleu-4</span></th>
<th id="S5.T1.3.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.1.4.1" class="ltx_text" style="font-size:70%;">METEOR</span></th>
<th id="S5.T1.3.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.1.5.1" class="ltx_text" style="font-size:70%;">ROUGE</span></th>
<th id="S5.T1.3.1.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.1.6.1" class="ltx_text" style="font-size:70%;">ACC</span></th>
<th id="S5.T1.3.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column" style="padding-top:1.05pt;padding-bottom:1.05pt;"><math id="S5.T1.3.1.1.1.m1.1" class="ltx_Math" alttext="Fact_{ent}" display="inline"><semantics id="S5.T1.3.1.1.1.m1.1a"><mrow id="S5.T1.3.1.1.1.m1.1.1" xref="S5.T1.3.1.1.1.m1.1.1.cmml"><mi mathsize="70%" id="S5.T1.3.1.1.1.m1.1.1.2" xref="S5.T1.3.1.1.1.m1.1.1.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="S5.T1.3.1.1.1.m1.1.1.1" xref="S5.T1.3.1.1.1.m1.1.1.1.cmml">​</mo><mi mathsize="70%" id="S5.T1.3.1.1.1.m1.1.1.3" xref="S5.T1.3.1.1.1.m1.1.1.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="S5.T1.3.1.1.1.m1.1.1.1a" xref="S5.T1.3.1.1.1.m1.1.1.1.cmml">​</mo><mi mathsize="70%" id="S5.T1.3.1.1.1.m1.1.1.4" xref="S5.T1.3.1.1.1.m1.1.1.4.cmml">c</mi><mo lspace="0em" rspace="0em" id="S5.T1.3.1.1.1.m1.1.1.1b" xref="S5.T1.3.1.1.1.m1.1.1.1.cmml">​</mo><msub id="S5.T1.3.1.1.1.m1.1.1.5" xref="S5.T1.3.1.1.1.m1.1.1.5.cmml"><mi mathsize="70%" id="S5.T1.3.1.1.1.m1.1.1.5.2" xref="S5.T1.3.1.1.1.m1.1.1.5.2.cmml">t</mi><mrow id="S5.T1.3.1.1.1.m1.1.1.5.3" xref="S5.T1.3.1.1.1.m1.1.1.5.3.cmml"><mi mathsize="70%" id="S5.T1.3.1.1.1.m1.1.1.5.3.2" xref="S5.T1.3.1.1.1.m1.1.1.5.3.2.cmml">e</mi><mo lspace="0em" rspace="0em" id="S5.T1.3.1.1.1.m1.1.1.5.3.1" xref="S5.T1.3.1.1.1.m1.1.1.5.3.1.cmml">​</mo><mi mathsize="70%" id="S5.T1.3.1.1.1.m1.1.1.5.3.3" xref="S5.T1.3.1.1.1.m1.1.1.5.3.3.cmml">n</mi><mo lspace="0em" rspace="0em" id="S5.T1.3.1.1.1.m1.1.1.5.3.1a" xref="S5.T1.3.1.1.1.m1.1.1.5.3.1.cmml">​</mo><mi mathsize="70%" id="S5.T1.3.1.1.1.m1.1.1.5.3.4" xref="S5.T1.3.1.1.1.m1.1.1.5.3.4.cmml">t</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.T1.3.1.1.1.m1.1b"><apply id="S5.T1.3.1.1.1.m1.1.1.cmml" xref="S5.T1.3.1.1.1.m1.1.1"><times id="S5.T1.3.1.1.1.m1.1.1.1.cmml" xref="S5.T1.3.1.1.1.m1.1.1.1"></times><ci id="S5.T1.3.1.1.1.m1.1.1.2.cmml" xref="S5.T1.3.1.1.1.m1.1.1.2">𝐹</ci><ci id="S5.T1.3.1.1.1.m1.1.1.3.cmml" xref="S5.T1.3.1.1.1.m1.1.1.3">𝑎</ci><ci id="S5.T1.3.1.1.1.m1.1.1.4.cmml" xref="S5.T1.3.1.1.1.m1.1.1.4">𝑐</ci><apply id="S5.T1.3.1.1.1.m1.1.1.5.cmml" xref="S5.T1.3.1.1.1.m1.1.1.5"><csymbol cd="ambiguous" id="S5.T1.3.1.1.1.m1.1.1.5.1.cmml" xref="S5.T1.3.1.1.1.m1.1.1.5">subscript</csymbol><ci id="S5.T1.3.1.1.1.m1.1.1.5.2.cmml" xref="S5.T1.3.1.1.1.m1.1.1.5.2">𝑡</ci><apply id="S5.T1.3.1.1.1.m1.1.1.5.3.cmml" xref="S5.T1.3.1.1.1.m1.1.1.5.3"><times id="S5.T1.3.1.1.1.m1.1.1.5.3.1.cmml" xref="S5.T1.3.1.1.1.m1.1.1.5.3.1"></times><ci id="S5.T1.3.1.1.1.m1.1.1.5.3.2.cmml" xref="S5.T1.3.1.1.1.m1.1.1.5.3.2">𝑒</ci><ci id="S5.T1.3.1.1.1.m1.1.1.5.3.3.cmml" xref="S5.T1.3.1.1.1.m1.1.1.5.3.3">𝑛</ci><ci id="S5.T1.3.1.1.1.m1.1.1.5.3.4.cmml" xref="S5.T1.3.1.1.1.m1.1.1.5.3.4">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.T1.3.1.1.1.m1.1c">Fact_{ent}</annotation></semantics></math></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S5.T1.3.1.3.1" class="ltx_tr">
<td id="S5.T1.3.1.3.1.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;" rowspan="3"><span id="S5.T1.3.1.3.1.1.1" class="ltx_text" style="font-size:70%;">ResNet</span></td>
<td id="S5.T1.3.1.3.1.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.3.1.2.1" class="ltx_text" style="font-size:70%;">PubMedBert</span></td>
<td id="S5.T1.3.1.3.1.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.3.1.3.1" class="ltx_text" style="font-size:70%;">36.9</span></td>
<td id="S5.T1.3.1.3.1.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.3.1.4.1" class="ltx_text" style="font-size:70%;">19.1</span></td>
<td id="S5.T1.3.1.3.1.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.3.1.5.1" class="ltx_text" style="font-size:70%;">22.0</span></td>
<td id="S5.T1.3.1.3.1.6" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.3.1.6.1" class="ltx_text" style="font-size:70%;">43.2</span></td>
<td id="S5.T1.3.1.3.1.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.3.1.7.1" class="ltx_text" style="font-size:70%;">43.1</span></td>
<td id="S5.T1.3.1.3.1.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.3.1.8.1" class="ltx_text ltx_font_bold" style="font-size:70%;">92.0</span></td>
</tr>
<tr id="S5.T1.3.1.4.2" class="ltx_tr">
<td id="S5.T1.3.1.4.2.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.4.2.1.1" class="ltx_text" style="font-size:70%;">BioClinicalBert</span></td>
<td id="S5.T1.3.1.4.2.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.4.2.2.1" class="ltx_text" style="font-size:70%;">34.1</span></td>
<td id="S5.T1.3.1.4.2.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.4.2.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">20.6</span></td>
<td id="S5.T1.3.1.4.2.4" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.4.2.4.1" class="ltx_text" style="font-size:70%;">21.6</span></td>
<td id="S5.T1.3.1.4.2.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.4.2.5.1" class="ltx_text" style="font-size:70%;">42.9</span></td>
<td id="S5.T1.3.1.4.2.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.4.2.6.1" class="ltx_text ltx_font_bold" style="font-size:70%;">46.9</span></td>
<td id="S5.T1.3.1.4.2.7" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.4.2.7.1" class="ltx_text" style="font-size:70%;">91.2</span></td>
</tr>
<tr id="S5.T1.3.1.5.3" class="ltx_tr">
<td id="S5.T1.3.1.5.3.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.5.3.1.1" class="ltx_text" style="font-size:70%;">Scratch</span></td>
<td id="S5.T1.3.1.5.3.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.5.3.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">38.3</span></td>
<td id="S5.T1.3.1.5.3.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.5.3.3.1" class="ltx_text" style="font-size:70%;">19.7</span></td>
<td id="S5.T1.3.1.5.3.4" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.5.3.4.1" class="ltx_text ltx_font_bold" style="font-size:70%;">23.2</span></td>
<td id="S5.T1.3.1.5.3.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.5.3.5.1" class="ltx_text ltx_font_bold" style="font-size:70%;">46.2</span></td>
<td id="S5.T1.3.1.5.3.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.5.3.6.1" class="ltx_text" style="font-size:70%;">43.3</span></td>
<td id="S5.T1.3.1.5.3.7" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.5.3.7.1" class="ltx_text" style="font-size:70%;">91.1</span></td>
</tr>
<tr id="S5.T1.3.1.6.4" class="ltx_tr">
<td id="S5.T1.3.1.6.4.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;" rowspan="3"><span id="S5.T1.3.1.6.4.1.1" class="ltx_text" style="font-size:70%;">ViT</span></td>
<td id="S5.T1.3.1.6.4.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.6.4.2.1" class="ltx_text" style="font-size:70%;">PubMedBert</span></td>
<td id="S5.T1.3.1.6.4.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.6.4.3.1" class="ltx_text" style="font-size:70%;">32.3</span></td>
<td id="S5.T1.3.1.6.4.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.6.4.4.1" class="ltx_text" style="font-size:70%;">14.7</span></td>
<td id="S5.T1.3.1.6.4.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.6.4.5.1" class="ltx_text" style="font-size:70%;">19.8</span></td>
<td id="S5.T1.3.1.6.4.6" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.6.4.6.1" class="ltx_text" style="font-size:70%;">42.0</span></td>
<td id="S5.T1.3.1.6.4.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.6.4.7.1" class="ltx_text" style="font-size:70%;">48.8</span></td>
<td id="S5.T1.3.1.6.4.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.6.4.8.1" class="ltx_text" style="font-size:70%;">92.0</span></td>
</tr>
<tr id="S5.T1.3.1.7.5" class="ltx_tr">
<td id="S5.T1.3.1.7.5.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.7.5.1.1" class="ltx_text" style="font-size:70%;">BioClinicalBert</span></td>
<td id="S5.T1.3.1.7.5.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.7.5.2.1" class="ltx_text" style="font-size:70%;">30.2</span></td>
<td id="S5.T1.3.1.7.5.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.7.5.3.1" class="ltx_text" style="font-size:70%;">13.1</span></td>
<td id="S5.T1.3.1.7.5.4" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.7.5.4.1" class="ltx_text" style="font-size:70%;">19.9</span></td>
<td id="S5.T1.3.1.7.5.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.7.5.5.1" class="ltx_text" style="font-size:70%;">41.0</span></td>
<td id="S5.T1.3.1.7.5.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.7.5.6.1" class="ltx_text ltx_font_bold" style="font-size:70%;">48.5</span></td>
<td id="S5.T1.3.1.7.5.7" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.7.5.7.1" class="ltx_text ltx_font_bold" style="font-size:70%;">92.9</span></td>
</tr>
<tr id="S5.T1.3.1.8.6" class="ltx_tr">
<td id="S5.T1.3.1.8.6.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.8.6.1.1" class="ltx_text" style="font-size:70%;">Scratch</span></td>
<td id="S5.T1.3.1.8.6.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.8.6.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">35.9</span></td>
<td id="S5.T1.3.1.8.6.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.8.6.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">21.3</span></td>
<td id="S5.T1.3.1.8.6.4" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.8.6.4.1" class="ltx_text ltx_font_bold" style="font-size:70%;">22.5</span></td>
<td id="S5.T1.3.1.8.6.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.8.6.5.1" class="ltx_text ltx_font_bold" style="font-size:70%;">45.6</span></td>
<td id="S5.T1.3.1.8.6.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.8.6.6.1" class="ltx_text" style="font-size:70%;">45.4</span></td>
<td id="S5.T1.3.1.8.6.7" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.8.6.7.1" class="ltx_text" style="font-size:70%;">90.8</span></td>
</tr>
<tr id="S5.T1.3.1.9.7" class="ltx_tr">
<td id="S5.T1.3.1.9.7.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;" rowspan="3"><span id="S5.T1.3.1.9.7.1.1" class="ltx_text" style="font-size:70%;">DINO</span></td>
<td id="S5.T1.3.1.9.7.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.9.7.2.1" class="ltx_text" style="font-size:70%;">PubMedBert</span></td>
<td id="S5.T1.3.1.9.7.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.9.7.3.1" class="ltx_text" style="font-size:70%;">35.4</span></td>
<td id="S5.T1.3.1.9.7.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.9.7.4.1" class="ltx_text" style="font-size:70%;">17.7</span></td>
<td id="S5.T1.3.1.9.7.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.9.7.5.1" class="ltx_text" style="font-size:70%;">19.6</span></td>
<td id="S5.T1.3.1.9.7.6" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.9.7.6.1" class="ltx_text" style="font-size:70%;">41.7</span></td>
<td id="S5.T1.3.1.9.7.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.9.7.7.1" class="ltx_text" style="font-size:70%;">50.4</span></td>
<td id="S5.T1.3.1.9.7.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.9.7.8.1" class="ltx_text ltx_font_bold" style="font-size:70%;">91.5</span></td>
</tr>
<tr id="S5.T1.3.1.10.8" class="ltx_tr">
<td id="S5.T1.3.1.10.8.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.10.8.1.1" class="ltx_text" style="font-size:70%;">BioClinicalBert</span></td>
<td id="S5.T1.3.1.10.8.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.10.8.2.1" class="ltx_text" style="font-size:70%;">34.4</span></td>
<td id="S5.T1.3.1.10.8.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.10.8.3.1" class="ltx_text" style="font-size:70%;">15.9</span></td>
<td id="S5.T1.3.1.10.8.4" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.10.8.4.1" class="ltx_text" style="font-size:70%;">21.1</span></td>
<td id="S5.T1.3.1.10.8.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.10.8.5.1" class="ltx_text" style="font-size:70%;">43.2</span></td>
<td id="S5.T1.3.1.10.8.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.10.8.6.1" class="ltx_text" style="font-size:70%;">49.9</span></td>
<td id="S5.T1.3.1.10.8.7" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.10.8.7.1" class="ltx_text" style="font-size:70%;">90.9</span></td>
</tr>
<tr id="S5.T1.3.1.11.9" class="ltx_tr">
<td id="S5.T1.3.1.11.9.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.11.9.1.1" class="ltx_text" style="font-size:70%;">Scratch</span></td>
<td id="S5.T1.3.1.11.9.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.11.9.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">38.6</span></td>
<td id="S5.T1.3.1.11.9.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.11.9.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">18.3</span></td>
<td id="S5.T1.3.1.11.9.4" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.11.9.4.1" class="ltx_text ltx_font_bold" style="font-size:70%;">22.7</span></td>
<td id="S5.T1.3.1.11.9.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.11.9.5.1" class="ltx_text ltx_font_bold" style="font-size:70%;">44.8</span></td>
<td id="S5.T1.3.1.11.9.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.11.9.6.1" class="ltx_text ltx_font_bold" style="font-size:70%;">50.8</span></td>
<td id="S5.T1.3.1.11.9.7" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.11.9.7.1" class="ltx_text" style="font-size:70%;">91.0</span></td>
</tr>
<tr id="S5.T1.3.1.12.10" class="ltx_tr">
<td id="S5.T1.3.1.12.10.1" class="ltx_td ltx_align_left ltx_border_bb ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;" rowspan="3"><span id="S5.T1.3.1.12.10.1.1" class="ltx_text" style="font-size:70%;">HIPT</span></td>
<td id="S5.T1.3.1.12.10.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.12.10.2.1" class="ltx_text" style="font-size:70%;">PubMedBert</span></td>
<td id="S5.T1.3.1.12.10.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.12.10.3.1" class="ltx_text" style="font-size:70%;">33.0</span></td>
<td id="S5.T1.3.1.12.10.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.12.10.4.1" class="ltx_text" style="font-size:70%;">18.1</span></td>
<td id="S5.T1.3.1.12.10.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.12.10.5.1" class="ltx_text" style="font-size:70%;">19.9</span></td>
<td id="S5.T1.3.1.12.10.6" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.12.10.6.1" class="ltx_text" style="font-size:70%;">41.8</span></td>
<td id="S5.T1.3.1.12.10.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.12.10.7.1" class="ltx_text" style="font-size:70%;">49.7</span></td>
<td id="S5.T1.3.1.12.10.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.12.10.8.1" class="ltx_text" style="font-size:70%;">91.5</span></td>
</tr>
<tr id="S5.T1.3.1.13.11" class="ltx_tr">
<td id="S5.T1.3.1.13.11.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.13.11.1.1" class="ltx_text" style="font-size:70%;">BioClinicalBert</span></td>
<td id="S5.T1.3.1.13.11.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.13.11.2.1" class="ltx_text" style="font-size:70%;">31.6</span></td>
<td id="S5.T1.3.1.13.11.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.13.11.3.1" class="ltx_text" style="font-size:70%;">14.3</span></td>
<td id="S5.T1.3.1.13.11.4" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.13.11.4.1" class="ltx_text" style="font-size:70%;">20.2</span></td>
<td id="S5.T1.3.1.13.11.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.13.11.5.1" class="ltx_text" style="font-size:70%;">40.0</span></td>
<td id="S5.T1.3.1.13.11.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.13.11.6.1" class="ltx_text" style="font-size:70%;">48.4</span></td>
<td id="S5.T1.3.1.13.11.7" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.13.11.7.1" class="ltx_text ltx_font_bold" style="font-size:70%;">94.1</span></td>
</tr>
<tr id="S5.T1.3.1.14.12" class="ltx_tr">
<td id="S5.T1.3.1.14.12.1" class="ltx_td ltx_align_left ltx_border_bb ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.14.12.1.1" class="ltx_text" style="font-size:70%;">Scratch</span></td>
<td id="S5.T1.3.1.14.12.2" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.14.12.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">34.2</span></td>
<td id="S5.T1.3.1.14.12.3" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.14.12.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">19.6</span></td>
<td id="S5.T1.3.1.14.12.4" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.14.12.4.1" class="ltx_text ltx_font_bold" style="font-size:70%;">21.1</span></td>
<td id="S5.T1.3.1.14.12.5" class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.14.12.5.1" class="ltx_text ltx_font_bold" style="font-size:70%;">44.0</span></td>
<td id="S5.T1.3.1.14.12.6" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.14.12.6.1" class="ltx_text ltx_font_bold" style="font-size:70%;">50.1</span></td>
<td id="S5.T1.3.1.14.12.7" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T1.3.1.14.12.7.1" class="ltx_text" style="font-size:70%;">92.1</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<div id="S5.SS1.p2" class="ltx_para">
<p id="S5.SS1.p2.7" class="ltx_p">We find that the best result for NLG Metrics is achieved when the text extractor is training from scratch. In specific, the increases of <math id="S5.SS1.p2.1.m1.1" class="ltx_Math" alttext="+2.4" display="inline"><semantics id="S5.SS1.p2.1.m1.1a"><mrow id="S5.SS1.p2.1.m1.1.1" xref="S5.SS1.p2.1.m1.1.1.cmml"><mo id="S5.SS1.p2.1.m1.1.1a" xref="S5.SS1.p2.1.m1.1.1.cmml">+</mo><mn id="S5.SS1.p2.1.m1.1.1.2" xref="S5.SS1.p2.1.m1.1.1.2.cmml">2.4</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.1.m1.1b"><apply id="S5.SS1.p2.1.m1.1.1.cmml" xref="S5.SS1.p2.1.m1.1.1"><plus id="S5.SS1.p2.1.m1.1.1.1.cmml" xref="S5.SS1.p2.1.m1.1.1"></plus><cn type="float" id="S5.SS1.p2.1.m1.1.1.2.cmml" xref="S5.SS1.p2.1.m1.1.1.2">2.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.1.m1.1c">+2.4</annotation></semantics></math> Bleu-1, <math id="S5.SS1.p2.2.m2.1" class="ltx_Math" alttext="+0.6" display="inline"><semantics id="S5.SS1.p2.2.m2.1a"><mrow id="S5.SS1.p2.2.m2.1.1" xref="S5.SS1.p2.2.m2.1.1.cmml"><mo id="S5.SS1.p2.2.m2.1.1a" xref="S5.SS1.p2.2.m2.1.1.cmml">+</mo><mn id="S5.SS1.p2.2.m2.1.1.2" xref="S5.SS1.p2.2.m2.1.1.2.cmml">0.6</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.2.m2.1b"><apply id="S5.SS1.p2.2.m2.1.1.cmml" xref="S5.SS1.p2.2.m2.1.1"><plus id="S5.SS1.p2.2.m2.1.1.1.cmml" xref="S5.SS1.p2.2.m2.1.1"></plus><cn type="float" id="S5.SS1.p2.2.m2.1.1.2.cmml" xref="S5.SS1.p2.2.m2.1.1.2">0.6</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.2.m2.1c">+0.6</annotation></semantics></math> Bleu-4, <math id="S5.SS1.p2.3.m3.1" class="ltx_Math" alttext="+1.2" display="inline"><semantics id="S5.SS1.p2.3.m3.1a"><mrow id="S5.SS1.p2.3.m3.1.1" xref="S5.SS1.p2.3.m3.1.1.cmml"><mo id="S5.SS1.p2.3.m3.1.1a" xref="S5.SS1.p2.3.m3.1.1.cmml">+</mo><mn id="S5.SS1.p2.3.m3.1.1.2" xref="S5.SS1.p2.3.m3.1.1.2.cmml">1.2</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.3.m3.1b"><apply id="S5.SS1.p2.3.m3.1.1.cmml" xref="S5.SS1.p2.3.m3.1.1"><plus id="S5.SS1.p2.3.m3.1.1.1.cmml" xref="S5.SS1.p2.3.m3.1.1"></plus><cn type="float" id="S5.SS1.p2.3.m3.1.1.2.cmml" xref="S5.SS1.p2.3.m3.1.1.2">1.2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.3.m3.1c">+1.2</annotation></semantics></math> METEOR, and <math id="S5.SS1.p2.4.m4.1" class="ltx_Math" alttext="+3.0" display="inline"><semantics id="S5.SS1.p2.4.m4.1a"><mrow id="S5.SS1.p2.4.m4.1.1" xref="S5.SS1.p2.4.m4.1.1.cmml"><mo id="S5.SS1.p2.4.m4.1.1a" xref="S5.SS1.p2.4.m4.1.1.cmml">+</mo><mn id="S5.SS1.p2.4.m4.1.1.2" xref="S5.SS1.p2.4.m4.1.1.2.cmml">3.0</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.4.m4.1b"><apply id="S5.SS1.p2.4.m4.1.1.cmml" xref="S5.SS1.p2.4.m4.1.1"><plus id="S5.SS1.p2.4.m4.1.1.1.cmml" xref="S5.SS1.p2.4.m4.1.1"></plus><cn type="float" id="S5.SS1.p2.4.m4.1.1.2.cmml" xref="S5.SS1.p2.4.m4.1.1.2">3.0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.4.m4.1c">+3.0</annotation></semantics></math> ROUGE are observed on WSI-VQA when compared against the model with PubMedBert given visual embeddings from ResNet. Training the text extractor from scratch shows its superiority over generating fluent and readable answers while those task-agnostic word embeddings lag in terms of the NLG metrics. It may be because of the domain gap between the corpus for pre-training and the pathological corpus that is used in our experiment. However, we find it interesting that the ’scratch’ strategy does not win consistently regards the FCC metrics. For example, an increase of <math id="S5.SS1.p2.5.m5.1" class="ltx_Math" alttext="+4.1" display="inline"><semantics id="S5.SS1.p2.5.m5.1a"><mrow id="S5.SS1.p2.5.m5.1.1" xref="S5.SS1.p2.5.m5.1.1.cmml"><mo id="S5.SS1.p2.5.m5.1.1a" xref="S5.SS1.p2.5.m5.1.1.cmml">+</mo><mn id="S5.SS1.p2.5.m5.1.1.2" xref="S5.SS1.p2.5.m5.1.1.2.cmml">4.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.5.m5.1b"><apply id="S5.SS1.p2.5.m5.1.1.cmml" xref="S5.SS1.p2.5.m5.1.1"><plus id="S5.SS1.p2.5.m5.1.1.1.cmml" xref="S5.SS1.p2.5.m5.1.1"></plus><cn type="float" id="S5.SS1.p2.5.m5.1.1.2.cmml" xref="S5.SS1.p2.5.m5.1.1.2">4.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.5.m5.1c">+4.1</annotation></semantics></math> ACC and <math id="S5.SS1.p2.6.m6.1" class="ltx_Math" alttext="+2.1" display="inline"><semantics id="S5.SS1.p2.6.m6.1a"><mrow id="S5.SS1.p2.6.m6.1.1" xref="S5.SS1.p2.6.m6.1.1.cmml"><mo id="S5.SS1.p2.6.m6.1.1a" xref="S5.SS1.p2.6.m6.1.1.cmml">+</mo><mn id="S5.SS1.p2.6.m6.1.1.2" xref="S5.SS1.p2.6.m6.1.1.2.cmml">2.1</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.6.m6.1b"><apply id="S5.SS1.p2.6.m6.1.1.cmml" xref="S5.SS1.p2.6.m6.1.1"><plus id="S5.SS1.p2.6.m6.1.1.1.cmml" xref="S5.SS1.p2.6.m6.1.1"></plus><cn type="float" id="S5.SS1.p2.6.m6.1.1.2.cmml" xref="S5.SS1.p2.6.m6.1.1.2">2.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.6.m6.1c">+2.1</annotation></semantics></math> <math id="S5.SS1.p2.7.m7.1" class="ltx_Math" alttext="Fact_{ent}" display="inline"><semantics id="S5.SS1.p2.7.m7.1a"><mrow id="S5.SS1.p2.7.m7.1.1" xref="S5.SS1.p2.7.m7.1.1.cmml"><mi id="S5.SS1.p2.7.m7.1.1.2" xref="S5.SS1.p2.7.m7.1.1.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p2.7.m7.1.1.1" xref="S5.SS1.p2.7.m7.1.1.1.cmml">​</mo><mi id="S5.SS1.p2.7.m7.1.1.3" xref="S5.SS1.p2.7.m7.1.1.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p2.7.m7.1.1.1a" xref="S5.SS1.p2.7.m7.1.1.1.cmml">​</mo><mi id="S5.SS1.p2.7.m7.1.1.4" xref="S5.SS1.p2.7.m7.1.1.4.cmml">c</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p2.7.m7.1.1.1b" xref="S5.SS1.p2.7.m7.1.1.1.cmml">​</mo><msub id="S5.SS1.p2.7.m7.1.1.5" xref="S5.SS1.p2.7.m7.1.1.5.cmml"><mi id="S5.SS1.p2.7.m7.1.1.5.2" xref="S5.SS1.p2.7.m7.1.1.5.2.cmml">t</mi><mrow id="S5.SS1.p2.7.m7.1.1.5.3" xref="S5.SS1.p2.7.m7.1.1.5.3.cmml"><mi id="S5.SS1.p2.7.m7.1.1.5.3.2" xref="S5.SS1.p2.7.m7.1.1.5.3.2.cmml">e</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p2.7.m7.1.1.5.3.1" xref="S5.SS1.p2.7.m7.1.1.5.3.1.cmml">​</mo><mi id="S5.SS1.p2.7.m7.1.1.5.3.3" xref="S5.SS1.p2.7.m7.1.1.5.3.3.cmml">n</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p2.7.m7.1.1.5.3.1a" xref="S5.SS1.p2.7.m7.1.1.5.3.1.cmml">​</mo><mi id="S5.SS1.p2.7.m7.1.1.5.3.4" xref="S5.SS1.p2.7.m7.1.1.5.3.4.cmml">t</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.7.m7.1b"><apply id="S5.SS1.p2.7.m7.1.1.cmml" xref="S5.SS1.p2.7.m7.1.1"><times id="S5.SS1.p2.7.m7.1.1.1.cmml" xref="S5.SS1.p2.7.m7.1.1.1"></times><ci id="S5.SS1.p2.7.m7.1.1.2.cmml" xref="S5.SS1.p2.7.m7.1.1.2">𝐹</ci><ci id="S5.SS1.p2.7.m7.1.1.3.cmml" xref="S5.SS1.p2.7.m7.1.1.3">𝑎</ci><ci id="S5.SS1.p2.7.m7.1.1.4.cmml" xref="S5.SS1.p2.7.m7.1.1.4">𝑐</ci><apply id="S5.SS1.p2.7.m7.1.1.5.cmml" xref="S5.SS1.p2.7.m7.1.1.5"><csymbol cd="ambiguous" id="S5.SS1.p2.7.m7.1.1.5.1.cmml" xref="S5.SS1.p2.7.m7.1.1.5">subscript</csymbol><ci id="S5.SS1.p2.7.m7.1.1.5.2.cmml" xref="S5.SS1.p2.7.m7.1.1.5.2">𝑡</ci><apply id="S5.SS1.p2.7.m7.1.1.5.3.cmml" xref="S5.SS1.p2.7.m7.1.1.5.3"><times id="S5.SS1.p2.7.m7.1.1.5.3.1.cmml" xref="S5.SS1.p2.7.m7.1.1.5.3.1"></times><ci id="S5.SS1.p2.7.m7.1.1.5.3.2.cmml" xref="S5.SS1.p2.7.m7.1.1.5.3.2">𝑒</ci><ci id="S5.SS1.p2.7.m7.1.1.5.3.3.cmml" xref="S5.SS1.p2.7.m7.1.1.5.3.3">𝑛</ci><ci id="S5.SS1.p2.7.m7.1.1.5.3.4.cmml" xref="S5.SS1.p2.7.m7.1.1.5.3.4">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.7.m7.1c">Fact_{ent}</annotation></semantics></math> when BioClinicalBert is adopted given the visual embeddings from ViT is observed, which reveals the potential of those well-established text extractors in recognizing and understanding the clinical concepts.</p>
</div>
<div id="S5.SS1.p3" class="ltx_para">
<p id="S5.SS1.p3.4" class="ltx_p">In terms of the visual extractor, we observe that DINO and HIPT (in-domain pre-training) consistently beat ResNet and ViT (out-of-domain pre-training) in medical correctness. In specific, a large increase of <math id="S5.SS1.p3.1.m1.1" class="ltx_Math" alttext="+2.4" display="inline"><semantics id="S5.SS1.p3.1.m1.1a"><mrow id="S5.SS1.p3.1.m1.1.1" xref="S5.SS1.p3.1.m1.1.1.cmml"><mo id="S5.SS1.p3.1.m1.1.1a" xref="S5.SS1.p3.1.m1.1.1.cmml">+</mo><mn id="S5.SS1.p3.1.m1.1.1.2" xref="S5.SS1.p3.1.m1.1.1.2.cmml">2.4</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p3.1.m1.1b"><apply id="S5.SS1.p3.1.m1.1.1.cmml" xref="S5.SS1.p3.1.m1.1.1"><plus id="S5.SS1.p3.1.m1.1.1.1.cmml" xref="S5.SS1.p3.1.m1.1.1"></plus><cn type="float" id="S5.SS1.p3.1.m1.1.1.2.cmml" xref="S5.SS1.p3.1.m1.1.1.2">2.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p3.1.m1.1c">+2.4</annotation></semantics></math>, <math id="S5.SS1.p3.2.m2.1" class="ltx_Math" alttext="+1.4" display="inline"><semantics id="S5.SS1.p3.2.m2.1a"><mrow id="S5.SS1.p3.2.m2.1.1" xref="S5.SS1.p3.2.m2.1.1.cmml"><mo id="S5.SS1.p3.2.m2.1.1a" xref="S5.SS1.p3.2.m2.1.1.cmml">+</mo><mn id="S5.SS1.p3.2.m2.1.1.2" xref="S5.SS1.p3.2.m2.1.1.2.cmml">1.4</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p3.2.m2.1b"><apply id="S5.SS1.p3.2.m2.1.1.cmml" xref="S5.SS1.p3.2.m2.1.1"><plus id="S5.SS1.p3.2.m2.1.1.1.cmml" xref="S5.SS1.p3.2.m2.1.1"></plus><cn type="float" id="S5.SS1.p3.2.m2.1.1.2.cmml" xref="S5.SS1.p3.2.m2.1.1.2">1.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p3.2.m2.1c">+1.4</annotation></semantics></math>, and <math id="S5.SS1.p3.3.m3.1" class="ltx_Math" alttext="+5.4" display="inline"><semantics id="S5.SS1.p3.3.m3.1a"><mrow id="S5.SS1.p3.3.m3.1.1" xref="S5.SS1.p3.3.m3.1.1.cmml"><mo id="S5.SS1.p3.3.m3.1.1a" xref="S5.SS1.p3.3.m3.1.1.cmml">+</mo><mn id="S5.SS1.p3.3.m3.1.1.2" xref="S5.SS1.p3.3.m3.1.1.2.cmml">5.4</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p3.3.m3.1b"><apply id="S5.SS1.p3.3.m3.1.1.cmml" xref="S5.SS1.p3.3.m3.1.1"><plus id="S5.SS1.p3.3.m3.1.1.1.cmml" xref="S5.SS1.p3.3.m3.1.1"></plus><cn type="float" id="S5.SS1.p3.3.m3.1.1.2.cmml" xref="S5.SS1.p3.3.m3.1.1.2">5.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p3.3.m3.1c">+5.4</annotation></semantics></math> ACC are present respectively when DINO pre-training extractor is adopted compared to ViT which is pre-trained with ImageNet. It is reasonable that the visual extractors pre-trained with in-domain data are more capable of extracting relevant features in the pathological patches, which contributes much to the diagnosis of WSIs. For all the baselines, the ACC metrics are nearly 50, and the <math id="S5.SS1.p3.4.m4.1" class="ltx_Math" alttext="Fact_{ent}" display="inline"><semantics id="S5.SS1.p3.4.m4.1a"><mrow id="S5.SS1.p3.4.m4.1.1" xref="S5.SS1.p3.4.m4.1.1.cmml"><mi id="S5.SS1.p3.4.m4.1.1.2" xref="S5.SS1.p3.4.m4.1.1.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p3.4.m4.1.1.1" xref="S5.SS1.p3.4.m4.1.1.1.cmml">​</mo><mi id="S5.SS1.p3.4.m4.1.1.3" xref="S5.SS1.p3.4.m4.1.1.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p3.4.m4.1.1.1a" xref="S5.SS1.p3.4.m4.1.1.1.cmml">​</mo><mi id="S5.SS1.p3.4.m4.1.1.4" xref="S5.SS1.p3.4.m4.1.1.4.cmml">c</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p3.4.m4.1.1.1b" xref="S5.SS1.p3.4.m4.1.1.1.cmml">​</mo><msub id="S5.SS1.p3.4.m4.1.1.5" xref="S5.SS1.p3.4.m4.1.1.5.cmml"><mi id="S5.SS1.p3.4.m4.1.1.5.2" xref="S5.SS1.p3.4.m4.1.1.5.2.cmml">t</mi><mrow id="S5.SS1.p3.4.m4.1.1.5.3" xref="S5.SS1.p3.4.m4.1.1.5.3.cmml"><mi id="S5.SS1.p3.4.m4.1.1.5.3.2" xref="S5.SS1.p3.4.m4.1.1.5.3.2.cmml">e</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p3.4.m4.1.1.5.3.1" xref="S5.SS1.p3.4.m4.1.1.5.3.1.cmml">​</mo><mi id="S5.SS1.p3.4.m4.1.1.5.3.3" xref="S5.SS1.p3.4.m4.1.1.5.3.3.cmml">n</mi><mo lspace="0em" rspace="0em" id="S5.SS1.p3.4.m4.1.1.5.3.1a" xref="S5.SS1.p3.4.m4.1.1.5.3.1.cmml">​</mo><mi id="S5.SS1.p3.4.m4.1.1.5.3.4" xref="S5.SS1.p3.4.m4.1.1.5.3.4.cmml">t</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S5.SS1.p3.4.m4.1b"><apply id="S5.SS1.p3.4.m4.1.1.cmml" xref="S5.SS1.p3.4.m4.1.1"><times id="S5.SS1.p3.4.m4.1.1.1.cmml" xref="S5.SS1.p3.4.m4.1.1.1"></times><ci id="S5.SS1.p3.4.m4.1.1.2.cmml" xref="S5.SS1.p3.4.m4.1.1.2">𝐹</ci><ci id="S5.SS1.p3.4.m4.1.1.3.cmml" xref="S5.SS1.p3.4.m4.1.1.3">𝑎</ci><ci id="S5.SS1.p3.4.m4.1.1.4.cmml" xref="S5.SS1.p3.4.m4.1.1.4">𝑐</ci><apply id="S5.SS1.p3.4.m4.1.1.5.cmml" xref="S5.SS1.p3.4.m4.1.1.5"><csymbol cd="ambiguous" id="S5.SS1.p3.4.m4.1.1.5.1.cmml" xref="S5.SS1.p3.4.m4.1.1.5">subscript</csymbol><ci id="S5.SS1.p3.4.m4.1.1.5.2.cmml" xref="S5.SS1.p3.4.m4.1.1.5.2">𝑡</ci><apply id="S5.SS1.p3.4.m4.1.1.5.3.cmml" xref="S5.SS1.p3.4.m4.1.1.5.3"><times id="S5.SS1.p3.4.m4.1.1.5.3.1.cmml" xref="S5.SS1.p3.4.m4.1.1.5.3.1"></times><ci id="S5.SS1.p3.4.m4.1.1.5.3.2.cmml" xref="S5.SS1.p3.4.m4.1.1.5.3.2">𝑒</ci><ci id="S5.SS1.p3.4.m4.1.1.5.3.3.cmml" xref="S5.SS1.p3.4.m4.1.1.5.3.3">𝑛</ci><ci id="S5.SS1.p3.4.m4.1.1.5.3.4.cmml" xref="S5.SS1.p3.4.m4.1.1.5.3.4">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p3.4.m4.1c">Fact_{ent}</annotation></semantics></math> metrics are over 90, which shows the potential of WSI-VQA in clinical scenarios.</p>
</div>
<figure id="S5.F4" class="ltx_figure"><img src="/html/2407.05603/assets/pic/qa.png" id="S5.F4.g1" class="ltx_graphics ltx_centering ltx_img_square" width="598" height="496" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S5.F4.2.1.1" class="ltx_text" style="font-size:90%;">Figure 4</span>: </span><span id="S5.F4.3.2" class="ltx_text" style="font-size:90%;">Several examples of the WSIs and their corresponding VQA pairs. The pairs in the grey rectangle are from the close-ended subset which has multiple choices while the ones in the blue rectangle are from the open-ended subset. The choice which is underlined is the right answer. These questions are all challenging because they require sufficient medical knowledge and understanding of complex characteristics in the gigapixel WSIs.
</span></figcaption>
</figure>
<figure id="S5.T2" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span id="S5.T2.2.1.1" class="ltx_text" style="font-size:90%;">Table 2</span>: </span><span id="S5.T2.3.2" class="ltx_text" style="font-size:90%;">Quantitative results of different slide-level tasks: histological subtyping, PR prediction, and survival prediction. For the binary classification tasks, we adopt precision (P), recall (R), and F1 score as the evaluation metrics. For the regression task, we choose the c-index which is widely adopted to measure the performance of survival prediction.</span></figcaption>
<div id="S5.T2.4" class="ltx_inline-block ltx_transformed_outer" style="width:390.3pt;height:206.9pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(59.3pt,-31.4pt) scale(1.43671306177853,1.43671306177853) ;">
<table id="S5.T2.4.1" class="ltx_tabular ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S5.T2.4.1.1.1" class="ltx_tr">
<td id="S5.T2.4.1.1.1.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt" style="padding-top:1.05pt;padding-bottom:1.05pt;" rowspan="2"><span id="S5.T2.4.1.1.1.1.1" class="ltx_text" style="font-size:70%;">Method</span></td>
<td id="S5.T2.4.1.1.1.2" class="ltx_td ltx_align_center ltx_border_tt" style="padding-top:1.05pt;padding-bottom:1.05pt;" colspan="3"><span id="S5.T2.4.1.1.1.2.1" class="ltx_text" style="font-size:70%;">Subtyping</span></td>
<td id="S5.T2.4.1.1.1.3" class="ltx_td ltx_align_center ltx_border_tt" style="padding-top:1.05pt;padding-bottom:1.05pt;" colspan="3"><span id="S5.T2.4.1.1.1.3.1" class="ltx_text" style="font-size:70%;">PR</span></td>
<td id="S5.T2.4.1.1.1.4" class="ltx_td ltx_align_center ltx_border_tt" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.1.1.4.1" class="ltx_text" style="font-size:70%;">Survival</span></td>
</tr>
<tr id="S5.T2.4.1.2.2" class="ltx_tr">
<td id="S5.T2.4.1.2.2.1" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.2.2.1.1" class="ltx_text" style="font-size:70%;">P</span></td>
<td id="S5.T2.4.1.2.2.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.2.2.2.1" class="ltx_text" style="font-size:70%;">R</span></td>
<td id="S5.T2.4.1.2.2.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.2.2.3.1" class="ltx_text" style="font-size:70%;">F1</span></td>
<td id="S5.T2.4.1.2.2.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.2.2.4.1" class="ltx_text" style="font-size:70%;">P</span></td>
<td id="S5.T2.4.1.2.2.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.2.2.5.1" class="ltx_text" style="font-size:70%;">R</span></td>
<td id="S5.T2.4.1.2.2.6" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.2.2.6.1" class="ltx_text" style="font-size:70%;">F1</span></td>
<td id="S5.T2.4.1.2.2.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.2.2.7.1" class="ltx_text" style="font-size:70%;">C-index</span></td>
</tr>
<tr id="S5.T2.4.1.3.3" class="ltx_tr">
<td id="S5.T2.4.1.3.3.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.3.3.1.1" class="ltx_text" style="font-size:70%;">Max-pooling</span></td>
<td id="S5.T2.4.1.3.3.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.3.3.2.1" class="ltx_text" style="font-size:70%;">59.8</span></td>
<td id="S5.T2.4.1.3.3.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.3.3.3.1" class="ltx_text" style="font-size:70%;">70.1</span></td>
<td id="S5.T2.4.1.3.3.4" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.3.3.4.1" class="ltx_text" style="font-size:70%;">64.4</span></td>
<td id="S5.T2.4.1.3.3.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.3.3.5.1" class="ltx_text" style="font-size:70%;">81.8</span></td>
<td id="S5.T2.4.1.3.3.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.3.3.6.1" class="ltx_text" style="font-size:70%;">84.9</span></td>
<td id="S5.T2.4.1.3.3.7" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.3.3.7.1" class="ltx_text" style="font-size:70%;">83.3</span></td>
<td id="S5.T2.4.1.3.3.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.3.3.8.1" class="ltx_text" style="font-size:70%;">54.7</span></td>
</tr>
<tr id="S5.T2.4.1.4.4" class="ltx_tr">
<td id="S5.T2.4.1.4.4.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.4.4.1.1" class="ltx_text" style="font-size:70%;">AB-MIL</span></td>
<td id="S5.T2.4.1.4.4.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.4.4.2.1" class="ltx_text" style="font-size:70%;">74.8</span></td>
<td id="S5.T2.4.1.4.4.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.4.4.3.1" class="ltx_text" style="font-size:70%;">81.5</span></td>
<td id="S5.T2.4.1.4.4.4" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.4.4.4.1" class="ltx_text" style="font-size:70%;">77.1</span></td>
<td id="S5.T2.4.1.4.4.5" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.4.4.5.1" class="ltx_text" style="font-size:70%;">86.6</span></td>
<td id="S5.T2.4.1.4.4.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.4.4.6.1" class="ltx_text" style="font-size:70%;">84.1</span></td>
<td id="S5.T2.4.1.4.4.7" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.4.4.7.1" class="ltx_text" style="font-size:70%;">85.2</span></td>
<td id="S5.T2.4.1.4.4.8" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.4.4.8.1" class="ltx_text" style="font-size:70%;">52.5</span></td>
</tr>
<tr id="S5.T2.4.1.5.5" class="ltx_tr">
<td id="S5.T2.4.1.5.5.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.5.5.1.1" class="ltx_text" style="font-size:70%;">CLAM-SB</span></td>
<td id="S5.T2.4.1.5.5.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.5.5.2.1" class="ltx_text" style="font-size:70%;">74.2</span></td>
<td id="S5.T2.4.1.5.5.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.5.5.3.1" class="ltx_text" style="font-size:70%;">84.1</span></td>
<td id="S5.T2.4.1.5.5.4" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.5.5.4.1" class="ltx_text" style="font-size:70%;">79.7</span></td>
<td id="S5.T2.4.1.5.5.5" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.5.5.5.1" class="ltx_text" style="font-size:70%;">86.5</span></td>
<td id="S5.T2.4.1.5.5.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.5.5.6.1" class="ltx_text" style="font-size:70%;">84.9</span></td>
<td id="S5.T2.4.1.5.5.7" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.5.5.7.1" class="ltx_text" style="font-size:70%;">85.7</span></td>
<td id="S5.T2.4.1.5.5.8" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.5.5.8.1" class="ltx_text" style="font-size:70%;">55.4</span></td>
</tr>
<tr id="S5.T2.4.1.6.6" class="ltx_tr">
<td id="S5.T2.4.1.6.6.1" class="ltx_td ltx_align_left ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.6.6.1.1" class="ltx_text" style="font-size:70%;">Trans-MIL</span></td>
<td id="S5.T2.4.1.6.6.2" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.6.6.2.1" class="ltx_text" style="font-size:70%;">78.0</span></td>
<td id="S5.T2.4.1.6.6.3" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.6.6.3.1" class="ltx_text" style="font-size:70%;">83.6</span></td>
<td id="S5.T2.4.1.6.6.4" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.6.6.4.1" class="ltx_text" style="font-size:70%;">80.6</span></td>
<td id="S5.T2.4.1.6.6.5" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.6.6.5.1" class="ltx_text" style="font-size:70%;">82.3</span></td>
<td id="S5.T2.4.1.6.6.6" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.6.6.6.1" class="ltx_text" style="font-size:70%;">79.7</span></td>
<td id="S5.T2.4.1.6.6.7" class="ltx_td ltx_align_center ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.6.6.7.1" class="ltx_text" style="font-size:70%;">80.6</span></td>
<td id="S5.T2.4.1.6.6.8" class="ltx_td ltx_align_center" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.6.6.8.1" class="ltx_text" style="font-size:70%;">56.1</span></td>
</tr>
<tr id="S5.T2.4.1.7.7" class="ltx_tr">
<td id="S5.T2.4.1.7.7.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.7.7.1.1" class="ltx_text" style="font-size:70%;">W2T (ResNet+scratch)</span></td>
<td id="S5.T2.4.1.7.7.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.7.7.2.1" class="ltx_text" style="font-size:70%;">81.9</span></td>
<td id="S5.T2.4.1.7.7.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.7.7.3.1" class="ltx_text" style="font-size:70%;">85.1</span></td>
<td id="S5.T2.4.1.7.7.4" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.7.7.4.1" class="ltx_text" style="font-size:70%;">83.3</span></td>
<td id="S5.T2.4.1.7.7.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.7.7.5.1" class="ltx_text ltx_font_bold" style="font-size:70%;">85.1</span></td>
<td id="S5.T2.4.1.7.7.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.7.7.6.1" class="ltx_text" style="font-size:70%;">82.2</span></td>
<td id="S5.T2.4.1.7.7.7" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.7.7.7.1" class="ltx_text" style="font-size:70%;">84.0</span></td>
<td id="S5.T2.4.1.7.7.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.7.7.8.1" class="ltx_text" style="font-size:70%;">56.3</span></td>
</tr>
<tr id="S5.T2.4.1.8.8" class="ltx_tr">
<td id="S5.T2.4.1.8.8.1" class="ltx_td ltx_align_left ltx_border_bb ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.8.8.1.1" class="ltx_text" style="font-size:70%;">W2T (DINO+scratch)</span></td>
<td id="S5.T2.4.1.8.8.2" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.8.8.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">82.3</span></td>
<td id="S5.T2.4.1.8.8.3" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.8.8.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">87.8</span></td>
<td id="S5.T2.4.1.8.8.4" class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.8.8.4.1" class="ltx_text ltx_font_bold" style="font-size:70%;">85.2</span></td>
<td id="S5.T2.4.1.8.8.5" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.8.8.5.1" class="ltx_text" style="font-size:70%;">84.3</span></td>
<td id="S5.T2.4.1.8.8.6" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.8.8.6.1" class="ltx_text ltx_font_bold" style="font-size:70%;">87.8</span></td>
<td id="S5.T2.4.1.8.8.7" class="ltx_td ltx_align_center ltx_border_bb ltx_border_r" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.8.8.7.1" class="ltx_text ltx_font_bold" style="font-size:70%;">86.5</span></td>
<td id="S5.T2.4.1.8.8.8" class="ltx_td ltx_align_center ltx_border_bb" style="padding-top:1.05pt;padding-bottom:1.05pt;"><span id="S5.T2.4.1.8.8.8.1" class="ltx_text ltx_font_bold" style="font-size:70%;">59.7</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<figure id="S5.F5" class="ltx_figure"><img src="/html/2407.05603/assets/pic/att.png" id="S5.F5.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="425" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S5.F5.2.1.1" class="ltx_text" style="font-size:90%;">Figure 5</span>: </span><span id="S5.F5.3.2" class="ltx_text" style="font-size:90%;">Co-attention visualization with corresponding questions. The keyword in the question, which is marked in a red rectangle, guides the interaction and aggregation of image patches using co-attention weights. The heatmap reflects how much each patch in the WSI is relevant to the word token ranging from blue to red.
</span></figcaption>
</figure>
</section>
<section id="S5.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Slide-level Tasks</h3>

<div id="S5.SS2.p1" class="ltx_para">
<p id="S5.SS2.p1.1" class="ltx_p">Recent years have witnessed the development of AI-aided digital pathology and some deep-learning models can even achieve human-level performance in terms of slide-level tasks<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib42" title="" class="ltx_ref">42</a>]</cite>. As a multimodal WSI-VQA method, our method can deal with various kinds of slide-level tasks if given appropriate prompts. Therefore, we evaluated the performance of our model on certain clinical tasks and re-produced several multiple instance learning (MIL) methods which are widely adopted in WSI classification for comparison, as shown in Table <a href="#S5.T2" title="Table 2 ‣ 5.1 Benchmark ‣ 5 Results ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. The MIL approaches which are elaborately designed for processing WSIs include: AB-MIL <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite>, CLAM-SB <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>, and TransMIL <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>]</cite>.</p>
</div>
<div id="S5.SS2.p2" class="ltx_para">
<p id="S5.SS2.p2.6" class="ltx_p">In terms of the histological subtyping, our proposed framework (W2T) surpasses all the MIL approaches. We observe an increase of <math id="S5.SS2.p2.1.m1.1" class="ltx_Math" alttext="+3.9" display="inline"><semantics id="S5.SS2.p2.1.m1.1a"><mrow id="S5.SS2.p2.1.m1.1.1" xref="S5.SS2.p2.1.m1.1.1.cmml"><mo id="S5.SS2.p2.1.m1.1.1a" xref="S5.SS2.p2.1.m1.1.1.cmml">+</mo><mn id="S5.SS2.p2.1.m1.1.1.2" xref="S5.SS2.p2.1.m1.1.1.2.cmml">3.9</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.1.m1.1b"><apply id="S5.SS2.p2.1.m1.1.1.cmml" xref="S5.SS2.p2.1.m1.1.1"><plus id="S5.SS2.p2.1.m1.1.1.1.cmml" xref="S5.SS2.p2.1.m1.1.1"></plus><cn type="float" id="S5.SS2.p2.1.m1.1.1.2.cmml" xref="S5.SS2.p2.1.m1.1.1.2">3.9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.1.m1.1c">+3.9</annotation></semantics></math> precision, <math id="S5.SS2.p2.2.m2.1" class="ltx_Math" alttext="+1.0" display="inline"><semantics id="S5.SS2.p2.2.m2.1a"><mrow id="S5.SS2.p2.2.m2.1.1" xref="S5.SS2.p2.2.m2.1.1.cmml"><mo id="S5.SS2.p2.2.m2.1.1a" xref="S5.SS2.p2.2.m2.1.1.cmml">+</mo><mn id="S5.SS2.p2.2.m2.1.1.2" xref="S5.SS2.p2.2.m2.1.1.2.cmml">1.0</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.2.m2.1b"><apply id="S5.SS2.p2.2.m2.1.1.cmml" xref="S5.SS2.p2.2.m2.1.1"><plus id="S5.SS2.p2.2.m2.1.1.1.cmml" xref="S5.SS2.p2.2.m2.1.1"></plus><cn type="float" id="S5.SS2.p2.2.m2.1.1.2.cmml" xref="S5.SS2.p2.2.m2.1.1.2">1.0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.2.m2.1c">+1.0</annotation></semantics></math> recall, and <math id="S5.SS2.p2.3.m3.1" class="ltx_Math" alttext="+2.7" display="inline"><semantics id="S5.SS2.p2.3.m3.1a"><mrow id="S5.SS2.p2.3.m3.1.1" xref="S5.SS2.p2.3.m3.1.1.cmml"><mo id="S5.SS2.p2.3.m3.1.1a" xref="S5.SS2.p2.3.m3.1.1.cmml">+</mo><mn id="S5.SS2.p2.3.m3.1.1.2" xref="S5.SS2.p2.3.m3.1.1.2.cmml">2.7</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.3.m3.1b"><apply id="S5.SS2.p2.3.m3.1.1.cmml" xref="S5.SS2.p2.3.m3.1.1"><plus id="S5.SS2.p2.3.m3.1.1.1.cmml" xref="S5.SS2.p2.3.m3.1.1"></plus><cn type="float" id="S5.SS2.p2.3.m3.1.1.2.cmml" xref="S5.SS2.p2.3.m3.1.1.2">2.7</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.3.m3.1c">+2.7</annotation></semantics></math> F1 score of our ResNet-equipped model compared to the second-best MIL method. If the visual extractor is pre-trained with DINO, a more advanced performance can be seen where the F1 score is <math id="S5.SS2.p2.4.m4.1" class="ltx_Math" alttext="85.2" display="inline"><semantics id="S5.SS2.p2.4.m4.1a"><mn id="S5.SS2.p2.4.m4.1.1" xref="S5.SS2.p2.4.m4.1.1.cmml">85.2</mn><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.4.m4.1b"><cn type="float" id="S5.SS2.p2.4.m4.1.1.cmml" xref="S5.SS2.p2.4.m4.1.1">85.2</cn></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.4.m4.1c">85.2</annotation></semantics></math>. Progesterone receptor (PR) is the hormone receptor and serves as the basis for endocrine therapy. In terms of the prediction of PR, our model still achieves competitive performance compared to MIL approaches. Survival prediction is challenging in computational pathology since it is an ordinal regression task and involves capturing complex features in WSIs. Our proposed approach with ResNet or DINO as the visual extractor obtains the c-index of <math id="S5.SS2.p2.5.m5.1" class="ltx_Math" alttext="56.3" display="inline"><semantics id="S5.SS2.p2.5.m5.1a"><mn id="S5.SS2.p2.5.m5.1.1" xref="S5.SS2.p2.5.m5.1.1.cmml">56.3</mn><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.5.m5.1b"><cn type="float" id="S5.SS2.p2.5.m5.1.1.cmml" xref="S5.SS2.p2.5.m5.1.1">56.3</cn></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.5.m5.1c">56.3</annotation></semantics></math> and <math id="S5.SS2.p2.6.m6.1" class="ltx_Math" alttext="59.7" display="inline"><semantics id="S5.SS2.p2.6.m6.1a"><mn id="S5.SS2.p2.6.m6.1.1" xref="S5.SS2.p2.6.m6.1.1.cmml">59.7</mn><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.6.m6.1b"><cn type="float" id="S5.SS2.p2.6.m6.1.1.cmml" xref="S5.SS2.p2.6.m6.1.1">59.7</cn></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.6.m6.1c">59.7</annotation></semantics></math> respectively.</p>
</div>
<div id="S5.SS2.p3" class="ltx_para">
<p id="S5.SS2.p3.1" class="ltx_p">We also present several examples which are shown in Fig. <a href="#S5.F4" title="Figure 4 ‣ 5.1 Benchmark ‣ 5 Results ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>. The questions are all challenging slide-level tasks that require specialized pathological knowledge and a deep understanding of the features of the WSI. For the question of the margin status, it is essential to localize the related region and recognize the fine-grained features like tissue morphology and cell distribution. Whereas, grading the carcinoma needs to look through the whole image and capture the structural information. It is worth noting that our model can handle various tasks by only adjusting the prompts and can also achieve promising performance, which reveals the great potential of our framework as the foundation model in computational pathology.</p>
</div>
</section>
<section id="S5.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.3 </span>Visualization</h3>

<div id="S5.SS3.p1" class="ltx_para">
<p id="S5.SS3.p1.1" class="ltx_p">The co-attention heatmap which reflects the interaction between visual concepts and word embeddings can act as an intuitive explanation for the decision-making procedure and provide clinical clues for pathologists. We overlay the co-attention weights which attend to the keyword in the question with the thumbnail of the corresponding WSI. The image patches that have high attention weights are highlighted in the heatmap with red color.</p>
</div>
<div id="S5.SS3.p2" class="ltx_para">
<p id="S5.SS3.p2.2" class="ltx_p">As illustrated in Fig. <a href="#S5.F5" title="Figure 5 ‣ 5.1 Benchmark ‣ 5 Results ‣ WSI-VQA: Interpreting Whole Slide Images by Generative Visual Question Answering" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>, we choose two cases with four co-attention maps. We observe that our generative model can attend to the regions of interest according to the questions. When being asked about the status of the margin, it focuses on the margin of the tumor. If given the prompt about the mass size, our model expands its view to the whole tumor in the slide, which reflects the spatial awareness of our model. For the immunohistochemical (IHC) tasks, our model allocates more attention to the tumor-associated stroma than the regions which show high-grade tumor morphology. For the PR prediction, regions which have high attention are focused on the tumor cells and micro-environment like tumor stroma, which nevertheless are ignored when predicting the Her-2 result. In the clinical scenario, IHC results such as Her-2 can not be directly obtained from H<math id="S5.SS3.p2.1.m1.1" class="ltx_Math" alttext="\&amp;" display="inline"><semantics id="S5.SS3.p2.1.m1.1a"><mo id="S5.SS3.p2.1.m1.1.1" xref="S5.SS3.p2.1.m1.1.1.cmml">&amp;</mo><annotation-xml encoding="MathML-Content" id="S5.SS3.p2.1.m1.1b"><and id="S5.SS3.p2.1.m1.1.1.cmml" xref="S5.SS3.p2.1.m1.1.1"></and></annotation-xml><annotation encoding="application/x-tex" id="S5.SS3.p2.1.m1.1c">\&amp;</annotation></semantics></math>E images. However, many recent works <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>, <a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite>, which achieved the prediction given only the WSI, have proved the connection between H<math id="S5.SS3.p2.2.m2.1" class="ltx_Math" alttext="\&amp;" display="inline"><semantics id="S5.SS3.p2.2.m2.1a"><mo id="S5.SS3.p2.2.m2.1.1" xref="S5.SS3.p2.2.m2.1.1.cmml">&amp;</mo><annotation-xml encoding="MathML-Content" id="S5.SS3.p2.2.m2.1b"><and id="S5.SS3.p2.2.m2.1.1.cmml" xref="S5.SS3.p2.2.m2.1.1"></and></annotation-xml><annotation encoding="application/x-tex" id="S5.SS3.p2.2.m2.1c">\&amp;</annotation></semantics></math>E stained images and IHC results. Since the connection needs further investigation, I believe our method can provide relevant clinical clues and make AI approaches more interpretable to pathologists.</p>
</div>
</section>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Limitations and Future Work</h2>

<div id="S6.p1" class="ltx_para">
<p id="S6.p1.1" class="ltx_p">As a generative framework, our model may suffer from hallucination which is frequently observed in large language models especially when we scale up our model. The black-box property of AI-aided methods and the possibility of generating unreasonable answers may be the major obstacles to being applied in the clinical. Although we have managed to improve the interpretability like visualizing the co-attention map, there is still a long way to go before we earn the trust of pathologists. In addition, since the current framework relies on the pre-trained visual extractor, such task-agnostic embeddings may hinder the performance of our model. In the future, we are going to scale up our pipeline to build a more powerful and general MLLM for computational pathology.</p>
</div>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Conclusion</h2>

<div id="S7.p1" class="ltx_para">
<p id="S7.p1.1" class="ltx_p">In this paper, we propose interpreting gigapixel whole slide images by generative visual question answering (WSI-VQA). Our approach demonstrates significant superiority in managing a broad range of slide-level tasks and achieving remarkable performance on these tasks, which reveals the potential of our method as the foundation model for computation pathology due to its scalability. The pathologists can know what they want to know or have difficulty with by giving appropriate prompts to the model. The explanation of the decision-making can be visualized in the format of heatmaps which makes our model more transparent and convincing. On the data end, we curate the first WSI-VQA dataset which is going to be public. The dataset will promote the development of MLLMs in the pathology field. In addition, other fields that involve large-resolution modalities can also be inspired by our work.</p>
</div>
<div id="S7.p2" class="ltx_para">
<p id="S7.p2.1" class="ltx_p"><span id="S7.p2.1.1" class="ltx_text ltx_font_bold">Acknowledgement.</span>This study was partially supported by the National Natural Science Foundation of China (Grant no. 92270108), Zhejiang Provincial Natural Science Foundation of China (Grant no. XHD23F0201), and the Research Center for Industries of the Future (RCIF) at Westlake University.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Alsentzer, E., Murphy, J.R., Boag, W., Weng, W.H., Jin, D., Naumann, T., McDermott, M.: Publicly available clinical bert embeddings. arXiv preprint arXiv:1904.03323 (2019)

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Bai, J., Bai, S., Yang, S., Wang, S., Tan, S., Wang, P., Lin, J., Zhou, C., Zhou, J.: Qwen-vl: A frontier large vision-language model with versatile abilities. arXiv preprint arXiv:2308.12966 (2023)

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Banerjee, S., Lavie, A.: Meteor: An automatic metric for mt evaluation with improved correlation with human judgments. In: Proceedings of the acl workshop on intrinsic and extrinsic evaluation measures for machine translation and/or summarization. pp. 65–72 (2005)

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Brown, T., Mann, B., Ryder, N., Subbiah, M., Kaplan, J.D., Dhariwal, P., Neelakantan, A., Shyam, P., Sastry, G., Askell, A., et al.: Language models are few-shot learners. Advances in neural information processing systems <span id="bib.bib4.1.1" class="ltx_text ltx_font_bold">33</span>, 1877–1901 (2020)

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Caron, M., Touvron, H., Misra, I., Jégou, H., Mairal, J., Bojanowski, P., Joulin, A.: Emerging properties in self-supervised vision transformers. In: Proceedings of the IEEE/CVF international conference on computer vision. pp. 9650–9660 (2021)

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Chen, P., Li, H., Zhu, C., Zheng, S., Yang, L.: Mi-gen: Multiple instance generation of pathology reports for gigapixel whole-slide images. arXiv preprint arXiv:2311.16480 (2023)

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Chen, R.J., Chen, C., Li, Y., Chen, T.Y., Trister, A.D., Krishnan, R.G., Mahmood, F.: Scaling vision transformers to gigapixel images via hierarchical self-supervised learning. In: Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition. pp. 16144–16155 (2022)

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Chen, Z., Du, Y., Hu, J., Liu, Y., Li, G., Wan, X., Chang, T.H.: Multi-modal masked autoencoders for medical vision-and-language pre-training. In: International Conference on Medical Image Computing and Computer-Assisted Intervention. pp. 679–689. Springer (2022)

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Chikontwe, P., Kim, M., Nam, S.J., Go, H., Park, S.H.: Multiple instance learning with center embeddings for histopathology classification. In: International Conference on Medical Image Computing and Computer-Assisted Intervention. pp. 519–528. Springer (2020)

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Conde-Sousa, E., Vale, J., Feng, M., Xu, K., Wang, Y., Della Mea, V., La Barbera, D., Montahaei, E., Baghshah, M., Turzynski, A., et al.: Herohe challenge: Predicting her2 status in breast cancer from hematoxylin–eosin whole-slide imaging. Journal of Imaging <span id="bib.bib10.1.1" class="ltx_text ltx_font_bold">8</span>(8),  213 (2022)

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Dosovitskiy, A., Beyer, L., Kolesnikov, A., Weissenborn, D., Zhai, X., Unterthiner, T., Dehghani, M., Minderer, M., Heigold, G., Gelly, S., et al.: An image is worth 16x16 words: Transformers for image recognition at scale. arXiv preprint arXiv:2010.11929 (2020)

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Farahmand, S., Fernandez, A.I., Ahmed, F.S., Rimm, D.L., Chuang, J.H., Reisenbichler, E., Zarringhalam, K.: Deep learning trained on hematoxylin and eosin tumor region of interest predicts her2 status and trastuzumab treatment response in her2+ breast cancer. Modern Pathology <span id="bib.bib12.1.1" class="ltx_text ltx_font_bold">35</span>(1), 44–51 (2022)

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Gamper, J., Rajpoot, N.: Multiple instance captioning: Learning representations from histopathology textbooks and articles. In: Proceedings of the IEEE/CVF conference on computer vision and pattern recognition. pp. 16549–16559 (2021)

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Gu, Y., Tinn, R., Cheng, H., Lucas, M., Usuyama, N., Liu, X., Naumann, T., Gao, J., Poon, H.: Domain-specific language model pretraining for biomedical natural language processing. ACM Transactions on Computing for Healthcare (HEALTH) <span id="bib.bib14.1.1" class="ltx_text ltx_font_bold">3</span>(1), 1–23 (2021)

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
He, K., Zhang, X., Ren, S., Sun, J.: Deep residual learning for image recognition. In: Proceedings of the IEEE conference on computer vision and pattern recognition. pp. 770–778 (2016)

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Huang, Z., Bianchi, F., Yuksekgonul, M., Montine, T.J., Zou, J.: A visual–language foundation model for pathology image analysis using medical twitter. Nature medicine <span id="bib.bib16.1.1" class="ltx_text ltx_font_bold">29</span>(9), 2307–2316 (2023)

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Ilse, M., Tomczak, J., Welling, M.: Attention-based deep multiple instance learning. In: International conference on machine learning. pp. 2127–2136. PMLR (2018)

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Johnson, A.E., Pollard, T.J., Shen, L., Lehman, L.w.H., Feng, M., Ghassemi, M., Moody, B., Szolovits, P., Anthony Celi, L., Mark, R.G.: Mimic-iii, a freely accessible critical care database. Scientific data <span id="bib.bib18.1.1" class="ltx_text ltx_font_bold">3</span>(1),  1–9 (2016)

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Li, B., Li, Y., Eliceiri, K.W.: Dual-stream multiple instance learning network for whole slide image classification with self-supervised contrastive learning. In: Proceedings of the IEEE/CVF conference on computer vision and pattern recognition. pp. 14318–14328 (2021)

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Li, C., Wong, C., Zhang, S., Usuyama, N., Liu, H., Yang, J., Naumann, T., Poon, H., Gao, J.: Llava-med: Training a large language-and-vision assistant for biomedicine in one day. arXiv preprint arXiv:2306.00890 (2023)

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Lin, C.Y.: ROUGE: A package for automatic evaluation of summaries. In: Text Summarization Branches Out. pp. 74–81. Association for Computational Linguistics, Barcelona, Spain (Jul 2004), <a target="_blank" href="https://aclanthology.org/W04-1013" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://aclanthology.org/W04-1013</a>

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Lin, W., Zhao, Z., Zhang, X., Wu, C., Zhang, Y., Wang, Y., Xie, W.: Pmc-clip: Contrastive language-image pre-training using biomedical documents. arXiv preprint arXiv:2303.07240 (2023)

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Liu, B., Zhan, L.M., Wu, X.M.: Contrastive pre-training and representation distillation for medical visual question answering based on radiology images. In: Medical Image Computing and Computer Assisted Intervention–MICCAI 2021: 24th International Conference, Strasbourg, France, September 27–October 1, 2021, Proceedings, Part II 24. pp. 210–220. Springer (2021)

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Liu, H., Li, C., Wu, Q., Lee, Y.J.: Visual instruction tuning. arXiv preprint arXiv:2304.08485 (2023)

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Lu, M.Y., Chen, B., Williamson, D.F., Chen, R.J., Liang, I., Ding, T., Jaume, G., Odintsov, I., Zhang, A., Le, L.P., et al.: Towards a visual-language foundation model for computational pathology. arXiv preprint arXiv:2307.12914 (2023)

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Lu, M.Y., Chen, B., Zhang, A., Williamson, D.F., Chen, R.J., Ding, T., Le, L.P., Chuang, Y.S., Mahmood, F.: Visual language pretrained multiple instance zero-shot transfer for histopathology images. In: Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition. pp. 19764–19775 (2023)

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Lu, M.Y., Williamson, D.F., Chen, T.Y., Chen, R.J., Barbieri, M., Mahmood, F.: Data-efficient and weakly supervised computational pathology on whole-slide images. Nature biomedical engineering <span id="bib.bib27.1.1" class="ltx_text ltx_font_bold">5</span>(6), 555–570 (2021)

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Lu, S., Ding, Y., Liu, M., Yin, Z., Yin, L., Zheng, W.: Multiscale feature extraction and fusion of image and text in vqa. International Journal of Computational Intelligence Systems <span id="bib.bib28.1.1" class="ltx_text ltx_font_bold">16</span>(1),  54 (2023)

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Lu, W., Toss, M., Dawood, M., Rakha, E., Rajpoot, N., Minhas, F.: Slidegraph+: Whole slide image level graphs to predict her2 status in breast cancer. Medical Image Analysis <span id="bib.bib29.1.1" class="ltx_text ltx_font_bold">80</span>, 102486 (2022)

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
Miura, Y., Zhang, Y., Tsai, E.B., Langlotz, C.P., Jurafsky, D.: Improving factual completeness and consistency of image-to-text radiology report generation. arXiv preprint arXiv:2010.10042 (2020)

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Nguyen, B.D., Do, T.T., Nguyen, B.X., Do, T., Tjiputra, E., Tran, Q.D.: Overcoming data limitation in medical visual question answering. In: Medical Image Computing and Computer Assisted Intervention–MICCAI 2019: 22nd International Conference, Shenzhen, China, October 13–17, 2019, Proceedings, Part IV 22. pp. 522–530. Springer (2019)

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Papineni, K., Roukos, S., Ward, T., Zhu, W.J.: Bleu: a method for automatic evaluation of machine translation. In: Proceedings of the 40th annual meeting of the Association for Computational Linguistics. pp. 311–318 (2002)

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
Radford, A., Kim, J.W., Hallacy, C., Ramesh, A., Goh, G., Agarwal, S., Sastry, G., Askell, A., Mishkin, P., Clark, J., et al.: Learning transferable visual models from natural language supervision. In: International conference on machine learning. pp. 8748–8763. PMLR (2021)

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
Roberts, R.J.: Pubmed central: The genbank of the published literature (2001)

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
Shao, Z., Bian, H., Chen, Y., Wang, Y., Zhang, J., Ji, X., et al.: Transmil: Transformer based correlated multiple instance learning for whole slide image classification. Advances in Neural Information Processing Systems <span id="bib.bib35.1.1" class="ltx_text ltx_font_bold">34</span>, 2136–2147 (2021)

</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
Vaswani, A., Shazeer, N., Parmar, N., Uszkoreit, J., Jones, L., Gomez, A.N., Kaiser, Ł., Polosukhin, I.: Attention is all you need. Advances in neural information processing systems <span id="bib.bib36.1.1" class="ltx_text ltx_font_bold">30</span> (2017)

</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
Yang, Z., Li, L., Lin, K., Wang, J., Lin, C.C., Liu, Z., Wang, L.: The dawn of lmms: Preliminary explorations with gpt-4v(ision) (2023)

</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
Zhang, H., Meng, Y., Zhao, Y., Qiao, Y., Yang, X., Coupland, S.E., Zheng, Y.: Dtfd-mil: Double-tier feature distillation multiple instance learning for histopathology whole slide image classification. In: Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition. pp. 18802–18812 (2022)

</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
Zhang, S., Xu, Y., Usuyama, N., Bagga, J., Tinn, R., Preston, S., Rao, R., Wei, M., Valluri, N., Wong, C., et al.: Large-scale domain-specific pretraining for biomedical vision-language processing. arXiv preprint arXiv:2303.00915 (2023)

</span>
</li>
<li id="bib.bib40" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
Zhang, X., Zhang, F., Xu, C.: Reducing vision-answer biases for multiple-choice vqa. IEEE Transactions on Image Processing (2023)

</span>
</li>
<li id="bib.bib41" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
Zhang, X., Wu, C., Zhao, Z., Lin, W., Zhang, Y., Wang, Y., Xie, W.: Pmc-vqa: Visual instruction tuning for medical visual question answering. arXiv preprint arXiv:2305.10415 (2023)

</span>
</li>
<li id="bib.bib42" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[42]</span>
<span class="ltx_bibblock">
Zhang, Z., Chen, P., McGough, M., Xing, F., Wang, C., Bui, M., Xie, Y., Sapkota, M., Cui, L., Dhillon, J., et al.: Pathologist-level interpretable whole-slide cancer diagnosis with deep learning. Nature Machine Intelligence <span id="bib.bib42.1.1" class="ltx_text ltx_font_bold">1</span>(5), 236–245 (2019)

</span>
</li>
</ul>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2407.05602" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2407.05603" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2407.05603">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2407.05603" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2407.05604" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Mon Aug  5 14:41:11 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
