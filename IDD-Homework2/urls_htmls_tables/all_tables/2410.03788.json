{
    "id_table_1": {
        "caption": "Table 1:  Activity category code and their corresponding descriptions",
        "table": "S5.T1.1.1",
        "footnotes": [],
        "references": [
            "We denote  i i i italic_i  for an agent. The  j j j italic_j -the trajectory collected for the agent contains  N N N italic_N  stay points,  T  r  a  j j i = { P 1 i , j , P 2 i , j , ... , P N i , j } T r a superscript subscript j j i superscript subscript P 1 i j superscript subscript P 2 i j ... superscript subscript P N i j Traj_{j}^{i}=\\left\\{P_{1}^{i,j},P_{2}^{i,j},\\ldots,P_{N}^{i,j}\\right\\} italic_T italic_r italic_a italic_j start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i end_POSTSUPERSCRIPT = { italic_P start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , italic_P start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , ... , italic_P start_POSTSUBSCRIPT italic_N end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT } . Trajectories are annotated by one of our previous study  [ 8 ] , where each stay point is linked with an activity, where each stay point  P n i , j = [ T n i , j , ( x , y ) i , j , S n i , j , E n i , j ] superscript subscript P n i j superscript subscript T n i j superscript x y i j superscript subscript S n i j superscript subscript E n i j P_{n}^{i,j}=\\left[T_{n}^{i,j},(x,y)^{i,j},S_{n}^{i,j},E_{n}^{i,j}\\right] italic_P start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT = [ italic_T start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , ( italic_x , italic_y ) start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , italic_S start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , italic_E start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT ]  consists of activity type  T n i , j superscript subscript T n i j T_{n}^{i,j} italic_T start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT  (as shown in Table  1 ), GPS location  ( x , y ) i , j superscript x y i j (x,y)^{i,j} ( italic_x , italic_y ) start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , start time  S n i , j superscript subscript S n i j S_{n}^{i,j} italic_S start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT  and end time  E n i , j superscript subscript E n i j E_{n}^{i,j} italic_E start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT . Our goal is to develop a model that can capture the common activity patterns of a region. Therefore, we focus on modeling these activity patterns rather than learning the locations of the agent. An activity chain is a time-ordered sequence of activities, defined based on the annotated trajectory,  A j i = { A 1 i , j , A 2 i , j , ... , A N i , j } superscript subscript A j i superscript subscript A 1 i j superscript subscript A 2 i j ... superscript subscript A N i j A_{j}^{i}=\\left\\{A_{1}^{i,j},A_{2}^{i,j},\\ldots,A_{N}^{i,j}\\right\\} italic_A start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i end_POSTSUPERSCRIPT = { italic_A start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , italic_A start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , ... , italic_A start_POSTSUBSCRIPT italic_N end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT } , where  A n i , j = [ T n i , j , S n i , j , E n i , j ] superscript subscript A n i j superscript subscript T n i j superscript subscript S n i j superscript subscript E n i j A_{n}^{i,j}=\\left[T_{n}^{i,j},S_{n}^{i,j},E_{n}^{i,j}\\right] italic_A start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT = [ italic_T start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , italic_S start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT , italic_E start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_i , italic_j end_POSTSUPERSCRIPT ] .",
            "Due to the fragmented nature of GPS-based data collection methods, stay points usually represent only certain moments of the day rather than covering the entire daily activity of the agent. As a result, the activity chain  A j subscript A j A_{j} italic_A start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT  in a real-world dataset is usually incomplete. For example, an observe recorded activities chain (in blue) is shown in the Figure  1 . This chain includes \"Home\" from \"02-01 00:00 to 02-01 07:00\", \"Work\" from \"02-01 08:00 to 02-01 10:00\", \"Home\" from \"02-02 00:00 to 02-02 04:00\", and \"Work\" from \"02-02 06:00 to 02-02 08:00\". There are significant gaps in the recorded activities, particularly from \"02-01 10:00 to 02-02 00:00\" and from \"02-02 08:00\" onwards.",
            "Finally, provided an incomplete activity chain in region  R  1 R 1 R1 italic_R 1 , a model  M R  1 superscript M R 1 M^{R1} italic_M start_POSTSUPERSCRIPT italic_R 1 end_POSTSUPERSCRIPT  for region  R  1 R 1 R1 italic_R 1  can reconstruct possible missing daily activities, as shown by the dashed gray lines in the Figure  1 , filling up the missing time slots based on the common activity pattern of the region. Based on the common activity pattern learned in this region, the model completes the \"Work\" periods, introduces \"EatOut (buy meals)\" activities, and proposes \"Home\" activities to complete the daily cycle, ensuring a reasonable activity chain.",
            "The performance of the model is quantified at the system level by assessing the similarity between the distributions of generated and real-world (ground truth) activity patterns. In this paper, the Jensen-Shannon Divergence (JSD) is adopted as the similarity metric  [ 18 ] , as presented in Equation  1 . The modeling objective is to minimize the difference between the distributions of the generated and ground truth activity patterns derived from activity chains. These metrics are 1)  activity frequencies , 2)  start time , 3)  end times , 4)  number of daily activities  (i.e., length of activity chain), and 5)  duration of each activity .",
            "In order to learn common mobility patterns at the national level, we used the 2017 National Household Travel Survey (NHTS), administered by the Federal Highway Administration (FHWA), to capture nationwide mobility patterns  [ 19 ] . The NHTS includes socio-economic demographics and travel diaries from 129,600 households. We aggregated the original 19 activity types recorded in the NHTS into 15 categories based on the activity locations, which are presented in Table  1 . In this study, only the travel diary of each agent in NHTS is used for training.",
            "A detailed activity-level analysis is presented in Figure  10  and Table  3 , which compare the activity start time distributions across different activity types for raw Egyptian data, NHTS US data, and two iterations of the models predictions. This activity-level analysis reveals the cross-cultural differences in daily activity patterns and the efficacy of the proposed iterative transfer learning approach in adapting to these differences."
        ]
    },
    "id_table_2": {
        "caption": "Table 2:  JSD value for similarity measurement across datasets and model performance",
        "table": "S6.E6",
        "footnotes": [],
        "references": [
            "In this study, we utilized GPS data collected in Egypt, provided by Veraset  [ 22 ] . This data, sourced from devices such as smartphones and tablets equipped with location-based applications, exhibits inherent randomness due to factors such as GPS drift and measurement error. To address this, we developed a methodology to identify stay points to form the trajectory data of each agent, as shown in Figure  2 .",
            "The base model  M S superscript M S M^{S} italic_M start_POSTSUPERSCRIPT italic_S end_POSTSUPERSCRIPT , trained on SCAG data, performs well when reconstructing masked SCAG data, as evidenced by the close alignment of red solid (predicted) and dashed (ground truth) lines in Figure  6 . This performance is quantified by JSD scores between 0.001 and 0.011 (Table  2 , row 2). However, when applied to the NHTS dataset without modification, the models performance declin significantly, with JSD scores increasing to 0.003-0.021 (Table  2  row 3), This indicates that the model trained on SCAG data (Los Angeles area) doesnt adapt well to national patterns.",
            "As shown in the first row of Table  2 , there are significant differences between these two datasets. The JSD scores, ranging from 0.009 to 0.059 across various activity attributes, quantify these differences. For instance, as shown in Figure  6 , the activity start time distribution shows a notable peak for SCAG around 8:00 am, which is less pronounced in the NHTS data. The activity type graph reveals that SCAG data lacks representation in categories like childcare, health care visit, and religious activities, which are present in the NHTS dataset.",
            "To address these discrepancies, we implement transfer learning for the model  M S superscript M S M^{S} italic_M start_POSTSUPERSCRIPT italic_S end_POSTSUPERSCRIPT , fine-tuning only the outer layers (embedding and MLP) of the model  M S superscript M S M^{S} italic_M start_POSTSUPERSCRIPT italic_S end_POSTSUPERSCRIPT  to capture nationwide patterns from NHTS data. This approach yields marked improvements, with the NHTS dataset fine-tuned model  M N superscript M N M^{N} italic_M start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT  achieving JSD scores as low as 0.001 for activity types and 0.002 for durations (Table  2 , row 4). Figure  6  visually confirms this improvement, showing close alignment between blue solid lines and blue dash lines lines across all distributions. These results demonstrate our algorithms effectiveness in adapting to different geographical contexts and capturing diverse mobility patterns, despite the initial significant disparities between the SCAG and NHTS datasets."
        ]
    },
    "id_table_3": {
        "caption": "Table 3:  JSD values for start times of common activities reconstruction in Egypt",
        "table": "S7.T2.3",
        "footnotes": [],
        "references": [
            "To effectively process and learn from activity chains, we implement an encoding and masking strategy that allows our model to handle diverse activity sequences and simulate incomplete data scenarios. We encode a days activity chain into a sequence of 96 time slots, each representing a 15-minute interval. This fine-grained representation allows us to capture detailed temporal patterns of activities. Each activity in the chain is assigned to its corresponding time slots based on its start and end times. For instance, in the Figure  3  shown, \"Home1\" occupies the slots from 00:00 to 10:00, followed by a 30 minute travel time, then \"Exercise\" from 10:30 to 11:00, and so forth.",
            "A detailed activity-level analysis is presented in Figure  10  and Table  3 , which compare the activity start time distributions across different activity types for raw Egyptian data, NHTS US data, and two iterations of the models predictions. This activity-level analysis reveals the cross-cultural differences in daily activity patterns and the efficacy of the proposed iterative transfer learning approach in adapting to these differences.",
            "Mandatory Activities : Home activities in Egypt show a more distributed daily pattern compared to the USs pronounced evening peak. As shown in Table  3 , this difference is quantified by a high baseline JSD of 0.0954, which is improved to 0.0087 by Iteration 1 and at 0.0094 in Iteration 3. Work activities start times exhibit a sharp morning peak in both datasets, but the Egyptian data shows a broader distribution, suggesting more varied work schedules, and the model progressively learns the pattern with JSD decreasing from 0.0886 to 0.0372 by Iteration 3. The peak time of School activity are similar across both datasets, and the model quickly capturing this similarity with JSD improving from 0.1068 to 0.0157 by Iteration 3."
        ]
    },
    "id_table_4": {
        "caption": "",
        "table": "S7.T3.1",
        "footnotes": [],
        "references": [
            "The workflow of the proposed mobility reconstruction system is structured to optimally leverage comprehensive household travel survey data for application in less data-rich environments, as illustrated in Figure  4 . It integrates the principles of semi-supervised domain adaptation in a novel methodological framework that does not rely on ground truth data.",
            "As presented in Figure  4 , the base model  M 0 superscript M 0 M^{0} italic_M start_POSTSUPERSCRIPT 0 end_POSTSUPERSCRIPT  synthesizes the first dataset  S  D 0 S superscript D 0 SD^{0} italic_S italic_D start_POSTSUPERSCRIPT 0 end_POSTSUPERSCRIPT , initiating an iterative cycle of model refinement. Each iteration involves the generation of a synthetic dataset  S  D n S superscript D n SD^{n} italic_S italic_D start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT  from the raw incomplete activity chains, which serves to train subsequent models  M n + 1 superscript M n 1 M^{n+1} italic_M start_POSTSUPERSCRIPT italic_n + 1 end_POSTSUPERSCRIPT . This cycle continues until the JSD between the synthetic and real-world data converges or meets a predefined standard, signaling the adequacy of the model to reconstruct activity chains accurately and its readiness for application in new regions.",
            "The domain adaptation capability of the propose training approach is validated using a sparse GPS trajectory data collected by Veraset  [ 22 ]  from Egypt. The trajectory data is further processed using the trajectory annotation method shown in Figure  4 , converting trajectories to activity chains. To ensure data quality and representativeness, we implement stringent filtering criteria: only agents with a minimum of 7 days of recorded activity were retained, and we exclusively utilize samples that captured at least 25% of daily temporal coverage. This rigorous selection process yields a substantial dataset of 479,526 samples, which we partition into training (80%) and validation (20%) sets. Notably, given the absence of ground truth data in this context, A separate test set is not allocated. The foundation for our transfer learning approach to the Egyptian Veraset data is the model trained on NHTS dataset, selected for its comprehensive coverage of 15 distinct activity types, thus providing a robust baseline for adaptation to the new geographical and cultural context, i.e., from the U.S. to Egypt."
        ]
    }
}