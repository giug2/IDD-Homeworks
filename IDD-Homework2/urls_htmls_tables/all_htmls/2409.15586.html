<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2409.15586] TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU</title><meta property="og:description" content="Trajectory forecasting in healthcare data has been an important area of research in precision care and clinical integration for computational methods. In recent years, generative AI models have demonstrated promising r…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2409.15586">

<!--Generated on Sun Oct  6 01:49:22 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Rosemary Y. He
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> and Jeffrey N. Chiang
</span><span class="ltx_author_notes">This work was submitted to the 2024 IEEE BHI conference.Rosemary He is with the departments of Computer Science and Computational Medicine at University of California, Los Angeles, CA 90095 USA (email: rosemary068@g.ucla.edu).Jeffrey Chiang is with the departments of Computational Medicine and Neurosurgery at University of California, Los Angeles, CA 90095 USA (e-mail: njchiang@g.ucla.edu).</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id1.id1" class="ltx_p">Trajectory forecasting in healthcare data has been an important area of research in precision care and clinical integration for computational methods. In recent years, generative AI models have demonstrated promising results in capturing short and long range dependencies in time series data. While these models have also been applied in healthcare, most of them only predict one value at a time, which is unrealistic in a clinical setting where multiple measures are taken at once. In this work, we extend the framework temporal fusion transformer (TFT), a multi-horizon time series prediction tool, and propose TFT-multi, an end-to-end framework that can predict multiple vital trajectories simultaneously. We apply TFT-multi to forecast 5 vital signs recorded in the intensive care unit: blood pressure, pulse, SpO2, temperature and respiratory rate. We hypothesize that by jointly predicting these measures, which are often correlated with one another, we can make more accurate predictions, especially in variables with large missingness. We validate our model on the public MIMIC dataset and an independent institutional dataset, and demonstrate that this approach outperforms state-of-the-art univariate prediction tools including the original TFT and Prophet, as well as vector regression modeling for multivariate prediction. Furthermore, we perform a study case analysis by applying our pipeline to forecast blood pressure changes in response to actual and hypothetical pressor administration.</p>
</div>
<div id="p1" class="ltx_para">
<span id="p1.1" class="ltx_ERROR undefined">{IEEEkeywords}</span>
<p id="p1.2" class="ltx_p">Multiple trajectory predictions, generative AI, clinical support</p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">In the age of big data, electronic health records (EHR) have become paramount in both clinical practice and research<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>. One subset of EHR that has been of interest to both clinicians and researchers is time series data, often measured in laboratory values and vital signs, that can be applied to track disease trajectory from every few minutes to the span of years<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>. Compared to cross-sectional (static) data, which remains constant, time series offer more information on patient development over time. These data can be leveraged to build trajectory prediction tools that can be used for surveillance (e.g., early warning systems<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>), and decision support (e.g., forecasting event of interest<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite> or response to interventions<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>, <a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>).
In this work, we develop a single approach that simultaneously predicts vital signs commonly recorded in the intensive care unit. We demonstrate that not only does this approach outperform state-of-the-art forecasting models, but it also can be used to forecast patient trajectories under hypothetical scenarios.</p>
</div>
<section id="S1.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">1.1 </span>Related work</h3>

<div id="S1.SS1.p1" class="ltx_para">
<p id="S1.SS1.p1.1" class="ltx_p">With successful applications of generative artificial intelligence (genAI) models on time series data in finance<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>, <a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite> and climate science<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>, <a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite>, researchers have turned to AI-based tools to predict trajectories over time in healthcare<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>. Compared to traditional autoregressive methods such as the ARIMA model<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite>, AI-based models have the potential to better capture complex relationships between variables. In univariate modeling, Prophet<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite> is a state-of-the-art method to predict time series data in many applications. Another model that has been effective in capturing both long and short term trends is temporal fusion transformer (TFT)<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>. In previous works, both methods have been used for vital sign forecasting in cardiovascular diseases<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite> and sepsis patients<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>. However, the feasibility of implementing these approaches is limited by the fact that a separate model must be used for each outcome. Furthermore, vital signs may be informative of each other and their trajectories should not be predicted independently, prompting the need for models that can predict multiple variables simultaneously. The state-of-the-art for multivariate prediction models is the vector autoregressive (VAR) model<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite>, which captures the linear interdependencies among multiple time series. In this work, we extend the TFT model from univariate to multivariate prediction and develop an end-to-end pipeline that can simultaneously predict 5 common vital signs recorded in the intensive care unit (ICU). We demonstrate our method outperforms state-of-the-art methods including Prophet, the original TFT and VAR in terms of predictive power. In the future, our pipeline can be extended to real-time predictions and applied as an early warning system for patients in the ICU. In addition, we demonstrate a study case to apply our model for treatment effect estimation and decision support, generating hypothetical blood pressure trajectories with and without the administration of pressors.</p>
</div>
</section>
<section id="S1.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">1.2 </span>Contributions</h3>

<div id="S1.SS2.p1" class="ltx_para">
<p id="S1.SS2.p1.1" class="ltx_p">We list our contributions in this work. First, we extend TFT from univariate to multivariate modeling to better reflect the clinical setting. To do so we modify the input-output structure and the loss function to simultaneously predict multiple outcomes at 15-min intervals. Compared to univariate prediction models, our pipeline captures and accounts for relations between target variables, which results in better predictive performance. Second, we develop a preprocessing pipeline and use a masking technique during training to account for losses in the non-imputed values only. This allows our pipeline to learn dependencies across real values only and achieve strong performance in validation even in data with large sampling heterogeneity, which is common in time series healthcare data. Third, we propose an additional application for our pipeline in treatment effect estimation. We use the model to forecast individual responses to pressors, demonstrating the ability to compare alternative trajectories in hypothetical scenarios to supplement clinical decision support.</p>
</div>
</section>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Methods</h2>

<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Data preparation</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.2" class="ltx_p">This study was performed using two independent datasets: MIMIC 2.2<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>, <a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>, and a de-identified electronic health records from a large academic medical center deemed non human-subjects research by the institutional IRB. We train and validate our model using the MIMIC dataset and perform external validation on the second private institutional dataset. MIMIC is a publicly available and widely used EHR dataset, and details about the study can be found in the original papers<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>, <a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>. After initial filtering, the MIMIC set consisted of 9,638 patients who were admitted to the intensive care unit (ICU). The institutional cohort consisted of 35,286 patients who presented at the Emergency Department and were eventually admitted to the ICU. We summarize some key characteristics of both cohorts in Table <a href="#S2.T1" title="Table 1 ‣ 2.1 Data preparation ‣ 2 Methods ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, where the entry format is mean<math id="S2.SS1.p1.1.m1.1" class="ltx_Math" alttext="\pm" display="inline"><semantics id="S2.SS1.p1.1.m1.1a"><mo id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.1b"><csymbol cd="latexml" id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.1c">\pm</annotation></semantics></math>standard deviation or <math id="S2.SS1.p1.2.m2.1" class="ltx_Math" alttext="\%" display="inline"><semantics id="S2.SS1.p1.2.m2.1a"><mo id="S2.SS1.p1.2.m2.1.1" xref="S2.SS1.p1.2.m2.1.1.cmml">%</mo><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.2.m2.1b"><csymbol cd="latexml" id="S2.SS1.p1.2.m2.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1">percent</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.2.m2.1c">\%</annotation></semantics></math>.</p>
</div>
<figure id="S2.T1" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span id="S2.T1.6.1.1" class="ltx_text" style="font-size:90%;">Table 1</span>: </span><span id="S2.T1.7.2" class="ltx_text" style="font-size:90%;">COHORT CHARACTERISTICS</span></figcaption>
<table id="S2.T1.4" class="ltx_tabular ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S2.T1.4.5.1" class="ltx_tr">
<td id="S2.T1.4.5.1.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.5.1.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.5.1.1.1.1" class="ltx_p"><span id="S2.T1.4.5.1.1.1.1.1" class="ltx_text ltx_font_bold">Sample characteristics</span></span>
</span>
</td>
<td id="S2.T1.4.5.1.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.5.1.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.5.1.2.1.1" class="ltx_p"><span id="S2.T1.4.5.1.2.1.1.1" class="ltx_text ltx_font_bold">MIMIC (n=9638)</span></span>
</span>
</td>
<td id="S2.T1.4.5.1.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.5.1.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.5.1.3.1.1" class="ltx_p"><span id="S2.T1.4.5.1.3.1.1.1" class="ltx_text ltx_font_bold">Institutional (n=35286)</span></span>
</span>
</td>
</tr>
<tr id="S2.T1.2.2" class="ltx_tr">
<td id="S2.T1.2.2.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.2.2.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.2.2.3.1.1" class="ltx_p">length of stay (days)</span>
</span>
</td>
<td id="S2.T1.1.1.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.1.1.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.1.1.1.1.1" class="ltx_p">3.57<math id="S2.T1.1.1.1.1.1.m1.1" class="ltx_Math" alttext="\pm" display="inline"><semantics id="S2.T1.1.1.1.1.1.m1.1a"><mo id="S2.T1.1.1.1.1.1.m1.1.1" xref="S2.T1.1.1.1.1.1.m1.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S2.T1.1.1.1.1.1.m1.1b"><csymbol cd="latexml" id="S2.T1.1.1.1.1.1.m1.1.1.cmml" xref="S2.T1.1.1.1.1.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.T1.1.1.1.1.1.m1.1c">\pm</annotation></semantics></math>0.25</span>
</span>
</td>
<td id="S2.T1.2.2.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.2.2.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.2.2.2.1.1" class="ltx_p">14<math id="S2.T1.2.2.2.1.1.m1.1" class="ltx_Math" alttext="\pm" display="inline"><semantics id="S2.T1.2.2.2.1.1.m1.1a"><mo id="S2.T1.2.2.2.1.1.m1.1.1" xref="S2.T1.2.2.2.1.1.m1.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S2.T1.2.2.2.1.1.m1.1b"><csymbol cd="latexml" id="S2.T1.2.2.2.1.1.m1.1.1.cmml" xref="S2.T1.2.2.2.1.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.T1.2.2.2.1.1.m1.1c">\pm</annotation></semantics></math>22</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.6.2" class="ltx_tr">
<td id="S2.T1.4.6.2.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;" colspan="3"><span id="S2.T1.4.6.2.1.1" class="ltx_text ltx_font_bold">Demographics</span></td>
</tr>
<tr id="S2.T1.4.7.3" class="ltx_tr">
<td id="S2.T1.4.7.3.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.7.3.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.7.3.1.1.1" class="ltx_p">Male [%]</span>
</span>
</td>
<td id="S2.T1.4.7.3.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.7.3.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.7.3.2.1.1" class="ltx_p">45.6</span>
</span>
</td>
<td id="S2.T1.4.7.3.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.7.3.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.7.3.3.1.1" class="ltx_p">43.2</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.4" class="ltx_tr">
<td id="S2.T1.4.4.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.4.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.4.3.1.1" class="ltx_p">Age</span>
</span>
</td>
<td id="S2.T1.3.3.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.3.3.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.3.3.1.1.1" class="ltx_p">62<math id="S2.T1.3.3.1.1.1.m1.1" class="ltx_Math" alttext="\pm" display="inline"><semantics id="S2.T1.3.3.1.1.1.m1.1a"><mo id="S2.T1.3.3.1.1.1.m1.1.1" xref="S2.T1.3.3.1.1.1.m1.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S2.T1.3.3.1.1.1.m1.1b"><csymbol cd="latexml" id="S2.T1.3.3.1.1.1.m1.1.1.cmml" xref="S2.T1.3.3.1.1.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.T1.3.3.1.1.1.m1.1c">\pm</annotation></semantics></math>16</span>
</span>
</td>
<td id="S2.T1.4.4.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.4.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.4.2.1.1" class="ltx_p">55<math id="S2.T1.4.4.2.1.1.m1.1" class="ltx_Math" alttext="\pm" display="inline"><semantics id="S2.T1.4.4.2.1.1.m1.1a"><mo id="S2.T1.4.4.2.1.1.m1.1.1" xref="S2.T1.4.4.2.1.1.m1.1.1.cmml">±</mo><annotation-xml encoding="MathML-Content" id="S2.T1.4.4.2.1.1.m1.1b"><csymbol cd="latexml" id="S2.T1.4.4.2.1.1.m1.1.1.cmml" xref="S2.T1.4.4.2.1.1.m1.1.1">plus-or-minus</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.T1.4.4.2.1.1.m1.1c">\pm</annotation></semantics></math>23</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.8.4" class="ltx_tr">
<td id="S2.T1.4.8.4.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;" colspan="3"><span id="S2.T1.4.8.4.1.1" class="ltx_text ltx_font_bold">Ethnicity (%)</span></td>
</tr>
<tr id="S2.T1.4.9.5" class="ltx_tr">
<td id="S2.T1.4.9.5.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.9.5.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.9.5.1.1.1" class="ltx_p">Caucasian</span>
</span>
</td>
<td id="S2.T1.4.9.5.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.9.5.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.9.5.2.1.1" class="ltx_p">68</span>
</span>
</td>
<td id="S2.T1.4.9.5.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.9.5.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.9.5.3.1.1" class="ltx_p">42</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.10.6" class="ltx_tr">
<td id="S2.T1.4.10.6.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.10.6.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.10.6.1.1.1" class="ltx_p">African American</span>
</span>
</td>
<td id="S2.T1.4.10.6.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.10.6.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.10.6.2.1.1" class="ltx_p">10</span>
</span>
</td>
<td id="S2.T1.4.10.6.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.10.6.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.10.6.3.1.1" class="ltx_p">11</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.11.7" class="ltx_tr">
<td id="S2.T1.4.11.7.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.11.7.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.11.7.1.1.1" class="ltx_p">Asian, Pacific Islander</span>
</span>
</td>
<td id="S2.T1.4.11.7.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.11.7.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.11.7.2.1.1" class="ltx_p">3.1</span>
</span>
</td>
<td id="S2.T1.4.11.7.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.11.7.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.11.7.3.1.1" class="ltx_p">10</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.12.8" class="ltx_tr">
<td id="S2.T1.4.12.8.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.12.8.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.12.8.1.1.1" class="ltx_p">Native American</span>
</span>
</td>
<td id="S2.T1.4.12.8.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.12.8.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.12.8.2.1.1" class="ltx_p">0.2</span>
</span>
</td>
<td id="S2.T1.4.12.8.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.12.8.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.12.8.3.1.1" class="ltx_p">0.2</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.13.9" class="ltx_tr">
<td id="S2.T1.4.13.9.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;" colspan="3"><span id="S2.T1.4.13.9.1.1" class="ltx_text ltx_font_bold">Comorbidities (%)</span></td>
</tr>
<tr id="S2.T1.4.14.10" class="ltx_tr">
<td id="S2.T1.4.14.10.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.14.10.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.14.10.1.1.1" class="ltx_p">Asthma</span>
</span>
</td>
<td id="S2.T1.4.14.10.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.14.10.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.14.10.2.1.1" class="ltx_p">13.1</span>
</span>
</td>
<td id="S2.T1.4.14.10.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.14.10.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.14.10.3.1.1" class="ltx_p">6.7</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.15.11" class="ltx_tr">
<td id="S2.T1.4.15.11.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.15.11.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.15.11.1.1.1" class="ltx_p">Diabetes</span>
</span>
</td>
<td id="S2.T1.4.15.11.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.15.11.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.15.11.2.1.1" class="ltx_p">34.3</span>
</span>
</td>
<td id="S2.T1.4.15.11.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.15.11.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.15.11.3.1.1" class="ltx_p">17.8</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.16.12" class="ltx_tr">
<td id="S2.T1.4.16.12.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.16.12.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.16.12.1.1.1" class="ltx_p">Heart Failure</span>
</span>
</td>
<td id="S2.T1.4.16.12.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.16.12.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.16.12.2.1.1" class="ltx_p">32.1</span>
</span>
</td>
<td id="S2.T1.4.16.12.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.16.12.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.16.12.3.1.1" class="ltx_p">7.6</span>
</span>
</td>
</tr>
<tr id="S2.T1.4.17.13" class="ltx_tr">
<td id="S2.T1.4.17.13.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;" colspan="3"><span id="S2.T1.4.17.13.1.1" class="ltx_text ltx_font_bold">Medication (%)</span></td>
</tr>
<tr id="S2.T1.4.18.14" class="ltx_tr">
<td id="S2.T1.4.18.14.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_l ltx_border_r ltx_border_t" style="width:85.4pt;">
<span id="S2.T1.4.18.14.1.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.18.14.1.1.1" class="ltx_p">Pressors</span>
</span>
</td>
<td id="S2.T1.4.18.14.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.18.14.2.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.18.14.2.1.1" class="ltx_p">30</span>
</span>
</td>
<td id="S2.T1.4.18.14.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:42.7pt;">
<span id="S2.T1.4.18.14.3.1" class="ltx_inline-block ltx_align_top">
<span id="S2.T1.4.18.14.3.1.1" class="ltx_p">30</span>
</span>
</td>
</tr>
</tbody>
</table>
</figure>
<div id="S2.SS1.p2" class="ltx_para">
<p id="S2.SS1.p2.1" class="ltx_p">We include static and time series, numerical and binary variables including 5 demographic variables such as age and BMI, 72 comorbidities including heart failure and diabetes, 21 laboratory results including blood glucose and potassium, 12 medications in the class of pressors including Epinephrine and Angiotensin, and 5 common vital signs: mean arterial blood pressure (mean BP), pulse, SpO2, respiratory rate (Resp) and temperature (Temp). We resampled all time series data into 15 minute intervals and aggregated using the mean (for numeric variables) or median (for categorical variables) within each interval, and then forward-filled for any missing intervals (e.g., <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>). For static variables, we fill missing values with 0 for binary inputs such as comorbidities and drop samples with missing numeric values. For medications, we group all pressor administrations into one categorical variable and assume a missing value indicates no medication given. For each encounter, we construct 100 time points and use the first 75 as the past (18.75 hours) and the last 25 as the future (6.25 hours). During model training, different variables are considered as follows: demographics and comorbidities as past static variables; laboratory results, vital signs, age and medications up until the first 75 time points as past time series variables; age in the last 25 time points as known future time series variables. We randomly split the cohort to 80% training set and 20% held-out test set.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Temporal fusion transformer</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">In this section, we briefly introduce temporal fusion transformer (TFT)<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>, a transformer based model for multi-horizon time series forecasting. TFT introduces a novel way to incorporate static and time series covariates separately, preserving both short and long range dependencies between variables. There are several building blocks that make TFT powerful in time series prediction. First, historical time series inputs are passed through sequence-to-sequence layers to generate context vectors for short range dependencies. Meanwhile, static covariates are passed through an encoder to generate a representation, which is then combined with the context vectors in the static enrichment layer. Next, these embeddings are fed into multi-head attention blocks, which are better at capturing long term relations<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite>. Lastly, the output from the attention layer is processed by more densely connected layers to produce prediction forecasts. In multiple parts of the architecture, variable selection units are incorporated to select relevant covariates to pass onto the next layer. TFT allows different data types to be incorporated at different points in the model: past static variables, past time series variables, and future time series variables. The model outputs multi-horizon forecasts for 3 quantiles: the 10th, 50th and 90th. While the 50th quantile is often closest to the ground truth, the 10th and 90th quantiles act as prediction upper and lower bounds. By incorporating and processing different types of covariates and combining strengths from short and long term dependencies, TFT has shown promising results in predicting electricity, traffic and stock market patterns<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>. In addition, feature weights can be extracted across multi-head attention layers for interpretability. In other studies, TFT have shown comparable results in vital prediction<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>, prompting our work to extend it to simultaneous prediction for multiple variables in sparsely sampled data.</p>
</div>
<figure id="S2.F1" class="ltx_figure">
<p id="S2.F1.1" class="ltx_p ltx_align_center"><span id="S2.F1.1.1" class="ltx_text"><img src="/html/2409.15586/assets/input_output_demo.png" id="S2.F1.1.1.g1" class="ltx_graphics ltx_img_landscape" width="598" height="468" alt="Refer to caption"></span></p>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S2.F1.3.1.1" class="ltx_text" style="font-size:90%;">Figure 1</span>: </span><span id="S2.F1.4.2" class="ltx_text" style="font-size:90%;">Model workflow for simultaneously predicting 3 variables.</span></figcaption>
</figure>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>TFT-multi</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.1" class="ltx_p">In this section, we propose TFT-multi, our extension to the original model, that is capable of handling sparsely sampled data and simultaneously predicting multiple measures of interest (in this work 5 vital signs in ICU monitoring). In Fig. <a href="#S2.F1" title="Figure 1 ‣ 2.2 Temporal fusion transformer ‣ 2 Methods ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, we show an illustration of our end-to-end pipeline that takes in time series and static covariates and simultaneously predicts 3 toy trajectories.
We modify TFT in two main ways: the input-output structure and the loss function, while keeping the inner network the same. In the original model, past target values are appended to the past time series covariates, which we now extend from one to multiple at each time point. In the output, instead of predicting three quantiles at each time point for one target, we modify the last fully connected layers to output three quantiles for each target variable all at once.</p>
</div>
<div id="S2.SS3.p2" class="ltx_para">
<p id="S2.SS3.p2.1" class="ltx_p">We make two modifications in the loss function. First, we sum over trajectory losses over all quantiles and variables to jointly optimize all target variables. Second, we apply a masking technique to only account for losses in the real values and not the imputed ones to avoid overfitting to imputed data in sparsely sampled variables and increase predictive performance. Our loss function is as follows:</p>
</div>
<div id="S2.SS3.p3" class="ltx_para">
<table id="S2.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E1.m1.7" class="ltx_Math" alttext="\mathcal{L}(\Omega)=\sum_{v\in V}\sum_{y_{i}\in\Omega}\sum_{q\in\mathbb{Q}}\frac{\sum_{t=1}^{t_{\text{max}}}QL(y_{it}^{v},\hat{y}_{it}^{v}(q),q)\cdot\mathbb{I}_{y_{it}^{v}}({\text{real value}})}{\sum_{t=1}^{t_{\text{max}}}\mathbb{I}_{y_{it}^{v}}({\text{real value}})}" display="block"><semantics id="S2.E1.m1.7a"><mrow id="S2.E1.m1.7.8" xref="S2.E1.m1.7.8.cmml"><mrow id="S2.E1.m1.7.8.2" xref="S2.E1.m1.7.8.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E1.m1.7.8.2.2" xref="S2.E1.m1.7.8.2.2.cmml">ℒ</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.7.8.2.1" xref="S2.E1.m1.7.8.2.1.cmml">​</mo><mrow id="S2.E1.m1.7.8.2.3.2" xref="S2.E1.m1.7.8.2.cmml"><mo stretchy="false" id="S2.E1.m1.7.8.2.3.2.1" xref="S2.E1.m1.7.8.2.cmml">(</mo><mi mathvariant="normal" id="S2.E1.m1.7.7" xref="S2.E1.m1.7.7.cmml">Ω</mi><mo stretchy="false" id="S2.E1.m1.7.8.2.3.2.2" xref="S2.E1.m1.7.8.2.cmml">)</mo></mrow></mrow><mo rspace="0.111em" id="S2.E1.m1.7.8.1" xref="S2.E1.m1.7.8.1.cmml">=</mo><mrow id="S2.E1.m1.7.8.3" xref="S2.E1.m1.7.8.3.cmml"><munder id="S2.E1.m1.7.8.3.1" xref="S2.E1.m1.7.8.3.1.cmml"><mo movablelimits="false" rspace="0em" id="S2.E1.m1.7.8.3.1.2" xref="S2.E1.m1.7.8.3.1.2.cmml">∑</mo><mrow id="S2.E1.m1.7.8.3.1.3" xref="S2.E1.m1.7.8.3.1.3.cmml"><mi id="S2.E1.m1.7.8.3.1.3.2" xref="S2.E1.m1.7.8.3.1.3.2.cmml">v</mi><mo id="S2.E1.m1.7.8.3.1.3.1" xref="S2.E1.m1.7.8.3.1.3.1.cmml">∈</mo><mi id="S2.E1.m1.7.8.3.1.3.3" xref="S2.E1.m1.7.8.3.1.3.3.cmml">V</mi></mrow></munder><mrow id="S2.E1.m1.7.8.3.2" xref="S2.E1.m1.7.8.3.2.cmml"><munder id="S2.E1.m1.7.8.3.2.1" xref="S2.E1.m1.7.8.3.2.1.cmml"><mo movablelimits="false" rspace="0em" id="S2.E1.m1.7.8.3.2.1.2" xref="S2.E1.m1.7.8.3.2.1.2.cmml">∑</mo><mrow id="S2.E1.m1.7.8.3.2.1.3" xref="S2.E1.m1.7.8.3.2.1.3.cmml"><msub id="S2.E1.m1.7.8.3.2.1.3.2" xref="S2.E1.m1.7.8.3.2.1.3.2.cmml"><mi id="S2.E1.m1.7.8.3.2.1.3.2.2" xref="S2.E1.m1.7.8.3.2.1.3.2.2.cmml">y</mi><mi id="S2.E1.m1.7.8.3.2.1.3.2.3" xref="S2.E1.m1.7.8.3.2.1.3.2.3.cmml">i</mi></msub><mo id="S2.E1.m1.7.8.3.2.1.3.1" xref="S2.E1.m1.7.8.3.2.1.3.1.cmml">∈</mo><mi mathvariant="normal" id="S2.E1.m1.7.8.3.2.1.3.3" xref="S2.E1.m1.7.8.3.2.1.3.3.cmml">Ω</mi></mrow></munder><mrow id="S2.E1.m1.7.8.3.2.2" xref="S2.E1.m1.7.8.3.2.2.cmml"><munder id="S2.E1.m1.7.8.3.2.2.1" xref="S2.E1.m1.7.8.3.2.2.1.cmml"><mo movablelimits="false" id="S2.E1.m1.7.8.3.2.2.1.2" xref="S2.E1.m1.7.8.3.2.2.1.2.cmml">∑</mo><mrow id="S2.E1.m1.7.8.3.2.2.1.3" xref="S2.E1.m1.7.8.3.2.2.1.3.cmml"><mi id="S2.E1.m1.7.8.3.2.2.1.3.2" xref="S2.E1.m1.7.8.3.2.2.1.3.2.cmml">q</mi><mo id="S2.E1.m1.7.8.3.2.2.1.3.1" xref="S2.E1.m1.7.8.3.2.2.1.3.1.cmml">∈</mo><mi id="S2.E1.m1.7.8.3.2.2.1.3.3" xref="S2.E1.m1.7.8.3.2.2.1.3.3.cmml">ℚ</mi></mrow></munder><mfrac id="S2.E1.m1.6.6" xref="S2.E1.m1.6.6.cmml"><mrow id="S2.E1.m1.5.5.5" xref="S2.E1.m1.5.5.5.cmml"><msubsup id="S2.E1.m1.5.5.5.6" xref="S2.E1.m1.5.5.5.6.cmml"><mo id="S2.E1.m1.5.5.5.6.2.2" xref="S2.E1.m1.5.5.5.6.2.2.cmml">∑</mo><mrow id="S2.E1.m1.5.5.5.6.2.3" xref="S2.E1.m1.5.5.5.6.2.3.cmml"><mi id="S2.E1.m1.5.5.5.6.2.3.2" xref="S2.E1.m1.5.5.5.6.2.3.2.cmml">t</mi><mo id="S2.E1.m1.5.5.5.6.2.3.1" xref="S2.E1.m1.5.5.5.6.2.3.1.cmml">=</mo><mn id="S2.E1.m1.5.5.5.6.2.3.3" xref="S2.E1.m1.5.5.5.6.2.3.3.cmml">1</mn></mrow><msub id="S2.E1.m1.5.5.5.6.3" xref="S2.E1.m1.5.5.5.6.3.cmml"><mi id="S2.E1.m1.5.5.5.6.3.2" xref="S2.E1.m1.5.5.5.6.3.2.cmml">t</mi><mtext id="S2.E1.m1.5.5.5.6.3.3" xref="S2.E1.m1.5.5.5.6.3.3a.cmml">max</mtext></msub></msubsup><mrow id="S2.E1.m1.5.5.5.5" xref="S2.E1.m1.5.5.5.5.cmml"><mrow id="S2.E1.m1.5.5.5.5.2" xref="S2.E1.m1.5.5.5.5.2.cmml"><mrow id="S2.E1.m1.5.5.5.5.2.2" xref="S2.E1.m1.5.5.5.5.2.2.cmml"><mi id="S2.E1.m1.5.5.5.5.2.2.4" xref="S2.E1.m1.5.5.5.5.2.2.4.cmml">Q</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.5.5.5.5.2.2.3" xref="S2.E1.m1.5.5.5.5.2.2.3.cmml">​</mo><mi id="S2.E1.m1.5.5.5.5.2.2.5" xref="S2.E1.m1.5.5.5.5.2.2.5.cmml">L</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.5.5.5.5.2.2.3a" xref="S2.E1.m1.5.5.5.5.2.2.3.cmml">​</mo><mrow id="S2.E1.m1.5.5.5.5.2.2.2.2" xref="S2.E1.m1.5.5.5.5.2.2.2.3.cmml"><mo stretchy="false" id="S2.E1.m1.5.5.5.5.2.2.2.2.3" xref="S2.E1.m1.5.5.5.5.2.2.2.3.cmml">(</mo><msubsup id="S2.E1.m1.4.4.4.4.1.1.1.1.1" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.cmml"><mi id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.2" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.2.cmml">y</mi><mrow id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.cmml"><mi id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.2" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.1" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.1.cmml">​</mo><mi id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.3" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.3.cmml">t</mi></mrow><mi id="S2.E1.m1.4.4.4.4.1.1.1.1.1.3" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.3.cmml">v</mi></msubsup><mo id="S2.E1.m1.5.5.5.5.2.2.2.2.4" xref="S2.E1.m1.5.5.5.5.2.2.2.3.cmml">,</mo><mrow id="S2.E1.m1.5.5.5.5.2.2.2.2.2" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.cmml"><msubsup id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.cmml"><mover accent="true" id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.cmml"><mi id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.2" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.2.cmml">y</mi><mo id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.1" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.1.cmml">^</mo></mover><mrow id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.cmml"><mi id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.2" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.1" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.1.cmml">​</mo><mi id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.3" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.3.cmml">t</mi></mrow><mi id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.3" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.3.cmml">v</mi></msubsup><mo lspace="0em" rspace="0em" id="S2.E1.m1.5.5.5.5.2.2.2.2.2.1" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.1.cmml">​</mo><mrow id="S2.E1.m1.5.5.5.5.2.2.2.2.2.3.2" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.cmml"><mo stretchy="false" id="S2.E1.m1.5.5.5.5.2.2.2.2.2.3.2.1" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.cmml">(</mo><mi id="S2.E1.m1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.cmml">q</mi><mo stretchy="false" id="S2.E1.m1.5.5.5.5.2.2.2.2.2.3.2.2" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.5.5.5.5.2.2.2.2.5" xref="S2.E1.m1.5.5.5.5.2.2.2.3.cmml">,</mo><mi id="S2.E1.m1.2.2.2.2" xref="S2.E1.m1.2.2.2.2.cmml">q</mi><mo rspace="0.055em" stretchy="false" id="S2.E1.m1.5.5.5.5.2.2.2.2.6" xref="S2.E1.m1.5.5.5.5.2.2.2.3.cmml">)</mo></mrow></mrow><mo rspace="0.222em" id="S2.E1.m1.5.5.5.5.2.3" xref="S2.E1.m1.5.5.5.5.2.3.cmml">⋅</mo><msub id="S2.E1.m1.5.5.5.5.2.4" xref="S2.E1.m1.5.5.5.5.2.4.cmml"><mi id="S2.E1.m1.5.5.5.5.2.4.2" xref="S2.E1.m1.5.5.5.5.2.4.2.cmml">𝕀</mi><msubsup id="S2.E1.m1.5.5.5.5.2.4.3" xref="S2.E1.m1.5.5.5.5.2.4.3.cmml"><mi id="S2.E1.m1.5.5.5.5.2.4.3.2.2" xref="S2.E1.m1.5.5.5.5.2.4.3.2.2.cmml">y</mi><mrow id="S2.E1.m1.5.5.5.5.2.4.3.2.3" xref="S2.E1.m1.5.5.5.5.2.4.3.2.3.cmml"><mi id="S2.E1.m1.5.5.5.5.2.4.3.2.3.2" xref="S2.E1.m1.5.5.5.5.2.4.3.2.3.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.5.5.5.5.2.4.3.2.3.1" xref="S2.E1.m1.5.5.5.5.2.4.3.2.3.1.cmml">​</mo><mi id="S2.E1.m1.5.5.5.5.2.4.3.2.3.3" xref="S2.E1.m1.5.5.5.5.2.4.3.2.3.3.cmml">t</mi></mrow><mi id="S2.E1.m1.5.5.5.5.2.4.3.3" xref="S2.E1.m1.5.5.5.5.2.4.3.3.cmml">v</mi></msubsup></msub></mrow><mo lspace="0em" rspace="0em" id="S2.E1.m1.5.5.5.5.3" xref="S2.E1.m1.5.5.5.5.3.cmml">​</mo><mrow id="S2.E1.m1.5.5.5.5.4.2" xref="S2.E1.m1.3.3.3.3a.cmml"><mo stretchy="false" id="S2.E1.m1.5.5.5.5.4.2.1" xref="S2.E1.m1.3.3.3.3a.cmml">(</mo><mtext id="S2.E1.m1.3.3.3.3" xref="S2.E1.m1.3.3.3.3.cmml">real value</mtext><mo stretchy="false" id="S2.E1.m1.5.5.5.5.4.2.2" xref="S2.E1.m1.3.3.3.3a.cmml">)</mo></mrow></mrow></mrow><mrow id="S2.E1.m1.6.6.6" xref="S2.E1.m1.6.6.6.cmml"><msubsup id="S2.E1.m1.6.6.6.2" xref="S2.E1.m1.6.6.6.2.cmml"><mo id="S2.E1.m1.6.6.6.2.2.2" xref="S2.E1.m1.6.6.6.2.2.2.cmml">∑</mo><mrow id="S2.E1.m1.6.6.6.2.2.3" xref="S2.E1.m1.6.6.6.2.2.3.cmml"><mi id="S2.E1.m1.6.6.6.2.2.3.2" xref="S2.E1.m1.6.6.6.2.2.3.2.cmml">t</mi><mo id="S2.E1.m1.6.6.6.2.2.3.1" xref="S2.E1.m1.6.6.6.2.2.3.1.cmml">=</mo><mn id="S2.E1.m1.6.6.6.2.2.3.3" xref="S2.E1.m1.6.6.6.2.2.3.3.cmml">1</mn></mrow><msub id="S2.E1.m1.6.6.6.2.3" xref="S2.E1.m1.6.6.6.2.3.cmml"><mi id="S2.E1.m1.6.6.6.2.3.2" xref="S2.E1.m1.6.6.6.2.3.2.cmml">t</mi><mtext id="S2.E1.m1.6.6.6.2.3.3" xref="S2.E1.m1.6.6.6.2.3.3a.cmml">max</mtext></msub></msubsup><mrow id="S2.E1.m1.6.6.6.3" xref="S2.E1.m1.6.6.6.3.cmml"><msub id="S2.E1.m1.6.6.6.3.2" xref="S2.E1.m1.6.6.6.3.2.cmml"><mi id="S2.E1.m1.6.6.6.3.2.2" xref="S2.E1.m1.6.6.6.3.2.2.cmml">𝕀</mi><msubsup id="S2.E1.m1.6.6.6.3.2.3" xref="S2.E1.m1.6.6.6.3.2.3.cmml"><mi id="S2.E1.m1.6.6.6.3.2.3.2.2" xref="S2.E1.m1.6.6.6.3.2.3.2.2.cmml">y</mi><mrow id="S2.E1.m1.6.6.6.3.2.3.2.3" xref="S2.E1.m1.6.6.6.3.2.3.2.3.cmml"><mi id="S2.E1.m1.6.6.6.3.2.3.2.3.2" xref="S2.E1.m1.6.6.6.3.2.3.2.3.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.6.6.6.3.2.3.2.3.1" xref="S2.E1.m1.6.6.6.3.2.3.2.3.1.cmml">​</mo><mi id="S2.E1.m1.6.6.6.3.2.3.2.3.3" xref="S2.E1.m1.6.6.6.3.2.3.2.3.3.cmml">t</mi></mrow><mi id="S2.E1.m1.6.6.6.3.2.3.3" xref="S2.E1.m1.6.6.6.3.2.3.3.cmml">v</mi></msubsup></msub><mo lspace="0em" rspace="0em" id="S2.E1.m1.6.6.6.3.1" xref="S2.E1.m1.6.6.6.3.1.cmml">​</mo><mrow id="S2.E1.m1.6.6.6.3.3.2" xref="S2.E1.m1.6.6.6.1a.cmml"><mo stretchy="false" id="S2.E1.m1.6.6.6.3.3.2.1" xref="S2.E1.m1.6.6.6.1a.cmml">(</mo><mtext id="S2.E1.m1.6.6.6.1" xref="S2.E1.m1.6.6.6.1.cmml">real value</mtext><mo stretchy="false" id="S2.E1.m1.6.6.6.3.3.2.2" xref="S2.E1.m1.6.6.6.1a.cmml">)</mo></mrow></mrow></mrow></mfrac></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.7b"><apply id="S2.E1.m1.7.8.cmml" xref="S2.E1.m1.7.8"><eq id="S2.E1.m1.7.8.1.cmml" xref="S2.E1.m1.7.8.1"></eq><apply id="S2.E1.m1.7.8.2.cmml" xref="S2.E1.m1.7.8.2"><times id="S2.E1.m1.7.8.2.1.cmml" xref="S2.E1.m1.7.8.2.1"></times><ci id="S2.E1.m1.7.8.2.2.cmml" xref="S2.E1.m1.7.8.2.2">ℒ</ci><ci id="S2.E1.m1.7.7.cmml" xref="S2.E1.m1.7.7">Ω</ci></apply><apply id="S2.E1.m1.7.8.3.cmml" xref="S2.E1.m1.7.8.3"><apply id="S2.E1.m1.7.8.3.1.cmml" xref="S2.E1.m1.7.8.3.1"><csymbol cd="ambiguous" id="S2.E1.m1.7.8.3.1.1.cmml" xref="S2.E1.m1.7.8.3.1">subscript</csymbol><sum id="S2.E1.m1.7.8.3.1.2.cmml" xref="S2.E1.m1.7.8.3.1.2"></sum><apply id="S2.E1.m1.7.8.3.1.3.cmml" xref="S2.E1.m1.7.8.3.1.3"><in id="S2.E1.m1.7.8.3.1.3.1.cmml" xref="S2.E1.m1.7.8.3.1.3.1"></in><ci id="S2.E1.m1.7.8.3.1.3.2.cmml" xref="S2.E1.m1.7.8.3.1.3.2">𝑣</ci><ci id="S2.E1.m1.7.8.3.1.3.3.cmml" xref="S2.E1.m1.7.8.3.1.3.3">𝑉</ci></apply></apply><apply id="S2.E1.m1.7.8.3.2.cmml" xref="S2.E1.m1.7.8.3.2"><apply id="S2.E1.m1.7.8.3.2.1.cmml" xref="S2.E1.m1.7.8.3.2.1"><csymbol cd="ambiguous" id="S2.E1.m1.7.8.3.2.1.1.cmml" xref="S2.E1.m1.7.8.3.2.1">subscript</csymbol><sum id="S2.E1.m1.7.8.3.2.1.2.cmml" xref="S2.E1.m1.7.8.3.2.1.2"></sum><apply id="S2.E1.m1.7.8.3.2.1.3.cmml" xref="S2.E1.m1.7.8.3.2.1.3"><in id="S2.E1.m1.7.8.3.2.1.3.1.cmml" xref="S2.E1.m1.7.8.3.2.1.3.1"></in><apply id="S2.E1.m1.7.8.3.2.1.3.2.cmml" xref="S2.E1.m1.7.8.3.2.1.3.2"><csymbol cd="ambiguous" id="S2.E1.m1.7.8.3.2.1.3.2.1.cmml" xref="S2.E1.m1.7.8.3.2.1.3.2">subscript</csymbol><ci id="S2.E1.m1.7.8.3.2.1.3.2.2.cmml" xref="S2.E1.m1.7.8.3.2.1.3.2.2">𝑦</ci><ci id="S2.E1.m1.7.8.3.2.1.3.2.3.cmml" xref="S2.E1.m1.7.8.3.2.1.3.2.3">𝑖</ci></apply><ci id="S2.E1.m1.7.8.3.2.1.3.3.cmml" xref="S2.E1.m1.7.8.3.2.1.3.3">Ω</ci></apply></apply><apply id="S2.E1.m1.7.8.3.2.2.cmml" xref="S2.E1.m1.7.8.3.2.2"><apply id="S2.E1.m1.7.8.3.2.2.1.cmml" xref="S2.E1.m1.7.8.3.2.2.1"><csymbol cd="ambiguous" id="S2.E1.m1.7.8.3.2.2.1.1.cmml" xref="S2.E1.m1.7.8.3.2.2.1">subscript</csymbol><sum id="S2.E1.m1.7.8.3.2.2.1.2.cmml" xref="S2.E1.m1.7.8.3.2.2.1.2"></sum><apply id="S2.E1.m1.7.8.3.2.2.1.3.cmml" xref="S2.E1.m1.7.8.3.2.2.1.3"><in id="S2.E1.m1.7.8.3.2.2.1.3.1.cmml" xref="S2.E1.m1.7.8.3.2.2.1.3.1"></in><ci id="S2.E1.m1.7.8.3.2.2.1.3.2.cmml" xref="S2.E1.m1.7.8.3.2.2.1.3.2">𝑞</ci><ci id="S2.E1.m1.7.8.3.2.2.1.3.3.cmml" xref="S2.E1.m1.7.8.3.2.2.1.3.3">ℚ</ci></apply></apply><apply id="S2.E1.m1.6.6.cmml" xref="S2.E1.m1.6.6"><divide id="S2.E1.m1.6.6.7.cmml" xref="S2.E1.m1.6.6"></divide><apply id="S2.E1.m1.5.5.5.cmml" xref="S2.E1.m1.5.5.5"><apply id="S2.E1.m1.5.5.5.6.cmml" xref="S2.E1.m1.5.5.5.6"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.5.6.1.cmml" xref="S2.E1.m1.5.5.5.6">superscript</csymbol><apply id="S2.E1.m1.5.5.5.6.2.cmml" xref="S2.E1.m1.5.5.5.6"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.5.6.2.1.cmml" xref="S2.E1.m1.5.5.5.6">subscript</csymbol><sum id="S2.E1.m1.5.5.5.6.2.2.cmml" xref="S2.E1.m1.5.5.5.6.2.2"></sum><apply id="S2.E1.m1.5.5.5.6.2.3.cmml" xref="S2.E1.m1.5.5.5.6.2.3"><eq id="S2.E1.m1.5.5.5.6.2.3.1.cmml" xref="S2.E1.m1.5.5.5.6.2.3.1"></eq><ci id="S2.E1.m1.5.5.5.6.2.3.2.cmml" xref="S2.E1.m1.5.5.5.6.2.3.2">𝑡</ci><cn type="integer" id="S2.E1.m1.5.5.5.6.2.3.3.cmml" xref="S2.E1.m1.5.5.5.6.2.3.3">1</cn></apply></apply><apply id="S2.E1.m1.5.5.5.6.3.cmml" xref="S2.E1.m1.5.5.5.6.3"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.5.6.3.1.cmml" xref="S2.E1.m1.5.5.5.6.3">subscript</csymbol><ci id="S2.E1.m1.5.5.5.6.3.2.cmml" xref="S2.E1.m1.5.5.5.6.3.2">𝑡</ci><ci id="S2.E1.m1.5.5.5.6.3.3a.cmml" xref="S2.E1.m1.5.5.5.6.3.3"><mtext mathsize="50%" id="S2.E1.m1.5.5.5.6.3.3.cmml" xref="S2.E1.m1.5.5.5.6.3.3">max</mtext></ci></apply></apply><apply id="S2.E1.m1.5.5.5.5.cmml" xref="S2.E1.m1.5.5.5.5"><times id="S2.E1.m1.5.5.5.5.3.cmml" xref="S2.E1.m1.5.5.5.5.3"></times><apply id="S2.E1.m1.5.5.5.5.2.cmml" xref="S2.E1.m1.5.5.5.5.2"><ci id="S2.E1.m1.5.5.5.5.2.3.cmml" xref="S2.E1.m1.5.5.5.5.2.3">⋅</ci><apply id="S2.E1.m1.5.5.5.5.2.2.cmml" xref="S2.E1.m1.5.5.5.5.2.2"><times id="S2.E1.m1.5.5.5.5.2.2.3.cmml" xref="S2.E1.m1.5.5.5.5.2.2.3"></times><ci id="S2.E1.m1.5.5.5.5.2.2.4.cmml" xref="S2.E1.m1.5.5.5.5.2.2.4">𝑄</ci><ci id="S2.E1.m1.5.5.5.5.2.2.5.cmml" xref="S2.E1.m1.5.5.5.5.2.2.5">𝐿</ci><vector id="S2.E1.m1.5.5.5.5.2.2.2.3.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2"><apply id="S2.E1.m1.4.4.4.4.1.1.1.1.1.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.4.4.4.4.1.1.1.1.1.1.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1">superscript</csymbol><apply id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.1.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1">subscript</csymbol><ci id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.2.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.2">𝑦</ci><apply id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3"><times id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.1.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.1"></times><ci id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.2.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.2">𝑖</ci><ci id="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.3.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.2.3.3">𝑡</ci></apply></apply><ci id="S2.E1.m1.4.4.4.4.1.1.1.1.1.3.cmml" xref="S2.E1.m1.4.4.4.4.1.1.1.1.1.3">𝑣</ci></apply><apply id="S2.E1.m1.5.5.5.5.2.2.2.2.2.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2"><times id="S2.E1.m1.5.5.5.5.2.2.2.2.2.1.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.1"></times><apply id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.1.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2">superscript</csymbol><apply id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.1.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2">subscript</csymbol><apply id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2"><ci id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.1.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.1">^</ci><ci id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.2.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.2.2">𝑦</ci></apply><apply id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3"><times id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.1.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.1"></times><ci id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.2.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.2">𝑖</ci><ci id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.3.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.2.3.3">𝑡</ci></apply></apply><ci id="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.3.cmml" xref="S2.E1.m1.5.5.5.5.2.2.2.2.2.2.3">𝑣</ci></apply><ci id="S2.E1.m1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1">𝑞</ci></apply><ci id="S2.E1.m1.2.2.2.2.cmml" xref="S2.E1.m1.2.2.2.2">𝑞</ci></vector></apply><apply id="S2.E1.m1.5.5.5.5.2.4.cmml" xref="S2.E1.m1.5.5.5.5.2.4"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.5.5.2.4.1.cmml" xref="S2.E1.m1.5.5.5.5.2.4">subscript</csymbol><ci id="S2.E1.m1.5.5.5.5.2.4.2.cmml" xref="S2.E1.m1.5.5.5.5.2.4.2">𝕀</ci><apply id="S2.E1.m1.5.5.5.5.2.4.3.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.5.5.2.4.3.1.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3">superscript</csymbol><apply id="S2.E1.m1.5.5.5.5.2.4.3.2.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.5.5.2.4.3.2.1.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3">subscript</csymbol><ci id="S2.E1.m1.5.5.5.5.2.4.3.2.2.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3.2.2">𝑦</ci><apply id="S2.E1.m1.5.5.5.5.2.4.3.2.3.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3.2.3"><times id="S2.E1.m1.5.5.5.5.2.4.3.2.3.1.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3.2.3.1"></times><ci id="S2.E1.m1.5.5.5.5.2.4.3.2.3.2.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3.2.3.2">𝑖</ci><ci id="S2.E1.m1.5.5.5.5.2.4.3.2.3.3.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3.2.3.3">𝑡</ci></apply></apply><ci id="S2.E1.m1.5.5.5.5.2.4.3.3.cmml" xref="S2.E1.m1.5.5.5.5.2.4.3.3">𝑣</ci></apply></apply></apply><ci id="S2.E1.m1.3.3.3.3a.cmml" xref="S2.E1.m1.5.5.5.5.4.2"><mtext id="S2.E1.m1.3.3.3.3.cmml" xref="S2.E1.m1.3.3.3.3">real value</mtext></ci></apply></apply><apply id="S2.E1.m1.6.6.6.cmml" xref="S2.E1.m1.6.6.6"><apply id="S2.E1.m1.6.6.6.2.cmml" xref="S2.E1.m1.6.6.6.2"><csymbol cd="ambiguous" id="S2.E1.m1.6.6.6.2.1.cmml" xref="S2.E1.m1.6.6.6.2">superscript</csymbol><apply id="S2.E1.m1.6.6.6.2.2.cmml" xref="S2.E1.m1.6.6.6.2"><csymbol cd="ambiguous" id="S2.E1.m1.6.6.6.2.2.1.cmml" xref="S2.E1.m1.6.6.6.2">subscript</csymbol><sum id="S2.E1.m1.6.6.6.2.2.2.cmml" xref="S2.E1.m1.6.6.6.2.2.2"></sum><apply id="S2.E1.m1.6.6.6.2.2.3.cmml" xref="S2.E1.m1.6.6.6.2.2.3"><eq id="S2.E1.m1.6.6.6.2.2.3.1.cmml" xref="S2.E1.m1.6.6.6.2.2.3.1"></eq><ci id="S2.E1.m1.6.6.6.2.2.3.2.cmml" xref="S2.E1.m1.6.6.6.2.2.3.2">𝑡</ci><cn type="integer" id="S2.E1.m1.6.6.6.2.2.3.3.cmml" xref="S2.E1.m1.6.6.6.2.2.3.3">1</cn></apply></apply><apply id="S2.E1.m1.6.6.6.2.3.cmml" xref="S2.E1.m1.6.6.6.2.3"><csymbol cd="ambiguous" id="S2.E1.m1.6.6.6.2.3.1.cmml" xref="S2.E1.m1.6.6.6.2.3">subscript</csymbol><ci id="S2.E1.m1.6.6.6.2.3.2.cmml" xref="S2.E1.m1.6.6.6.2.3.2">𝑡</ci><ci id="S2.E1.m1.6.6.6.2.3.3a.cmml" xref="S2.E1.m1.6.6.6.2.3.3"><mtext mathsize="50%" id="S2.E1.m1.6.6.6.2.3.3.cmml" xref="S2.E1.m1.6.6.6.2.3.3">max</mtext></ci></apply></apply><apply id="S2.E1.m1.6.6.6.3.cmml" xref="S2.E1.m1.6.6.6.3"><times id="S2.E1.m1.6.6.6.3.1.cmml" xref="S2.E1.m1.6.6.6.3.1"></times><apply id="S2.E1.m1.6.6.6.3.2.cmml" xref="S2.E1.m1.6.6.6.3.2"><csymbol cd="ambiguous" id="S2.E1.m1.6.6.6.3.2.1.cmml" xref="S2.E1.m1.6.6.6.3.2">subscript</csymbol><ci id="S2.E1.m1.6.6.6.3.2.2.cmml" xref="S2.E1.m1.6.6.6.3.2.2">𝕀</ci><apply id="S2.E1.m1.6.6.6.3.2.3.cmml" xref="S2.E1.m1.6.6.6.3.2.3"><csymbol cd="ambiguous" id="S2.E1.m1.6.6.6.3.2.3.1.cmml" xref="S2.E1.m1.6.6.6.3.2.3">superscript</csymbol><apply id="S2.E1.m1.6.6.6.3.2.3.2.cmml" xref="S2.E1.m1.6.6.6.3.2.3"><csymbol cd="ambiguous" id="S2.E1.m1.6.6.6.3.2.3.2.1.cmml" xref="S2.E1.m1.6.6.6.3.2.3">subscript</csymbol><ci id="S2.E1.m1.6.6.6.3.2.3.2.2.cmml" xref="S2.E1.m1.6.6.6.3.2.3.2.2">𝑦</ci><apply id="S2.E1.m1.6.6.6.3.2.3.2.3.cmml" xref="S2.E1.m1.6.6.6.3.2.3.2.3"><times id="S2.E1.m1.6.6.6.3.2.3.2.3.1.cmml" xref="S2.E1.m1.6.6.6.3.2.3.2.3.1"></times><ci id="S2.E1.m1.6.6.6.3.2.3.2.3.2.cmml" xref="S2.E1.m1.6.6.6.3.2.3.2.3.2">𝑖</ci><ci id="S2.E1.m1.6.6.6.3.2.3.2.3.3.cmml" xref="S2.E1.m1.6.6.6.3.2.3.2.3.3">𝑡</ci></apply></apply><ci id="S2.E1.m1.6.6.6.3.2.3.3.cmml" xref="S2.E1.m1.6.6.6.3.2.3.3">𝑣</ci></apply></apply><ci id="S2.E1.m1.6.6.6.1a.cmml" xref="S2.E1.m1.6.6.6.3.3.2"><mtext id="S2.E1.m1.6.6.6.1.cmml" xref="S2.E1.m1.6.6.6.1">real value</mtext></ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.7c">\mathcal{L}(\Omega)=\sum_{v\in V}\sum_{y_{i}\in\Omega}\sum_{q\in\mathbb{Q}}\frac{\sum_{t=1}^{t_{\text{max}}}QL(y_{it}^{v},\hat{y}_{it}^{v}(q),q)\cdot\mathbb{I}_{y_{it}^{v}}({\text{real value}})}{\sum_{t=1}^{t_{\text{max}}}\mathbb{I}_{y_{it}^{v}}({\text{real value}})}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<div id="S2.SS3.p4" class="ltx_para">
<table id="S2.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E2.m1.6" class="ltx_Math" alttext="QL(y,\hat{y},q)=q\text{max}(0,(y-\hat{y}))+(1-q)\text{max}(0,(\hat{y}-y))," display="block"><semantics id="S2.E2.m1.6a"><mrow id="S2.E2.m1.6.6.1" xref="S2.E2.m1.6.6.1.1.cmml"><mrow id="S2.E2.m1.6.6.1.1" xref="S2.E2.m1.6.6.1.1.cmml"><mrow id="S2.E2.m1.6.6.1.1.5" xref="S2.E2.m1.6.6.1.1.5.cmml"><mi id="S2.E2.m1.6.6.1.1.5.2" xref="S2.E2.m1.6.6.1.1.5.2.cmml">Q</mi><mo lspace="0em" rspace="0em" id="S2.E2.m1.6.6.1.1.5.1" xref="S2.E2.m1.6.6.1.1.5.1.cmml">​</mo><mi id="S2.E2.m1.6.6.1.1.5.3" xref="S2.E2.m1.6.6.1.1.5.3.cmml">L</mi><mo lspace="0em" rspace="0em" id="S2.E2.m1.6.6.1.1.5.1a" xref="S2.E2.m1.6.6.1.1.5.1.cmml">​</mo><mrow id="S2.E2.m1.6.6.1.1.5.4.2" xref="S2.E2.m1.6.6.1.1.5.4.1.cmml"><mo stretchy="false" id="S2.E2.m1.6.6.1.1.5.4.2.1" xref="S2.E2.m1.6.6.1.1.5.4.1.cmml">(</mo><mi id="S2.E2.m1.1.1" xref="S2.E2.m1.1.1.cmml">y</mi><mo id="S2.E2.m1.6.6.1.1.5.4.2.2" xref="S2.E2.m1.6.6.1.1.5.4.1.cmml">,</mo><mover accent="true" id="S2.E2.m1.2.2" xref="S2.E2.m1.2.2.cmml"><mi id="S2.E2.m1.2.2.2" xref="S2.E2.m1.2.2.2.cmml">y</mi><mo id="S2.E2.m1.2.2.1" xref="S2.E2.m1.2.2.1.cmml">^</mo></mover><mo id="S2.E2.m1.6.6.1.1.5.4.2.3" xref="S2.E2.m1.6.6.1.1.5.4.1.cmml">,</mo><mi id="S2.E2.m1.3.3" xref="S2.E2.m1.3.3.cmml">q</mi><mo stretchy="false" id="S2.E2.m1.6.6.1.1.5.4.2.4" xref="S2.E2.m1.6.6.1.1.5.4.1.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.6.6.1.1.4" xref="S2.E2.m1.6.6.1.1.4.cmml">=</mo><mrow id="S2.E2.m1.6.6.1.1.3" xref="S2.E2.m1.6.6.1.1.3.cmml"><mrow id="S2.E2.m1.6.6.1.1.1.1" xref="S2.E2.m1.6.6.1.1.1.1.cmml"><mi id="S2.E2.m1.6.6.1.1.1.1.3" xref="S2.E2.m1.6.6.1.1.1.1.3.cmml">q</mi><mo lspace="0em" rspace="0em" id="S2.E2.m1.6.6.1.1.1.1.2" xref="S2.E2.m1.6.6.1.1.1.1.2.cmml">​</mo><mtext id="S2.E2.m1.6.6.1.1.1.1.4" xref="S2.E2.m1.6.6.1.1.1.1.4a.cmml">max</mtext><mo lspace="0em" rspace="0em" id="S2.E2.m1.6.6.1.1.1.1.2a" xref="S2.E2.m1.6.6.1.1.1.1.2.cmml">​</mo><mrow id="S2.E2.m1.6.6.1.1.1.1.1.1" xref="S2.E2.m1.6.6.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S2.E2.m1.6.6.1.1.1.1.1.1.2" xref="S2.E2.m1.6.6.1.1.1.1.1.2.cmml">(</mo><mn id="S2.E2.m1.4.4" xref="S2.E2.m1.4.4.cmml">0</mn><mo id="S2.E2.m1.6.6.1.1.1.1.1.1.3" xref="S2.E2.m1.6.6.1.1.1.1.1.2.cmml">,</mo><mrow id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.2" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.2" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.2.cmml">y</mi><mo id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.1" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.1.cmml">−</mo><mover accent="true" id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.2" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.2.cmml">y</mi><mo id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.1" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.1.cmml">^</mo></mover></mrow><mo stretchy="false" id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.3" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo stretchy="false" id="S2.E2.m1.6.6.1.1.1.1.1.1.4" xref="S2.E2.m1.6.6.1.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.6.6.1.1.3.4" xref="S2.E2.m1.6.6.1.1.3.4.cmml">+</mo><mrow id="S2.E2.m1.6.6.1.1.3.3" xref="S2.E2.m1.6.6.1.1.3.3.cmml"><mrow id="S2.E2.m1.6.6.1.1.2.2.1.1" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.cmml"><mo stretchy="false" id="S2.E2.m1.6.6.1.1.2.2.1.1.2" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.6.6.1.1.2.2.1.1.1" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.cmml"><mn id="S2.E2.m1.6.6.1.1.2.2.1.1.1.2" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.2.cmml">1</mn><mo id="S2.E2.m1.6.6.1.1.2.2.1.1.1.1" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.1.cmml">−</mo><mi id="S2.E2.m1.6.6.1.1.2.2.1.1.1.3" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.3.cmml">q</mi></mrow><mo stretchy="false" id="S2.E2.m1.6.6.1.1.2.2.1.1.3" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S2.E2.m1.6.6.1.1.3.3.3" xref="S2.E2.m1.6.6.1.1.3.3.3.cmml">​</mo><mtext id="S2.E2.m1.6.6.1.1.3.3.4" xref="S2.E2.m1.6.6.1.1.3.3.4a.cmml">max</mtext><mo lspace="0em" rspace="0em" id="S2.E2.m1.6.6.1.1.3.3.3a" xref="S2.E2.m1.6.6.1.1.3.3.3.cmml">​</mo><mrow id="S2.E2.m1.6.6.1.1.3.3.2.1" xref="S2.E2.m1.6.6.1.1.3.3.2.2.cmml"><mo stretchy="false" id="S2.E2.m1.6.6.1.1.3.3.2.1.2" xref="S2.E2.m1.6.6.1.1.3.3.2.2.cmml">(</mo><mn id="S2.E2.m1.5.5" xref="S2.E2.m1.5.5.cmml">0</mn><mo id="S2.E2.m1.6.6.1.1.3.3.2.1.3" xref="S2.E2.m1.6.6.1.1.3.3.2.2.cmml">,</mo><mrow id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.cmml"><mo stretchy="false" id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.2" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.cmml"><mover accent="true" id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.cmml"><mi id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.2" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.2.cmml">y</mi><mo id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.1" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.1.cmml">^</mo></mover><mo id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.1" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.1.cmml">−</mo><mi id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.3" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.3.cmml">y</mi></mrow><mo stretchy="false" id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.3" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.cmml">)</mo></mrow><mo stretchy="false" id="S2.E2.m1.6.6.1.1.3.3.2.1.4" xref="S2.E2.m1.6.6.1.1.3.3.2.2.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S2.E2.m1.6.6.1.2" xref="S2.E2.m1.6.6.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.6b"><apply id="S2.E2.m1.6.6.1.1.cmml" xref="S2.E2.m1.6.6.1"><eq id="S2.E2.m1.6.6.1.1.4.cmml" xref="S2.E2.m1.6.6.1.1.4"></eq><apply id="S2.E2.m1.6.6.1.1.5.cmml" xref="S2.E2.m1.6.6.1.1.5"><times id="S2.E2.m1.6.6.1.1.5.1.cmml" xref="S2.E2.m1.6.6.1.1.5.1"></times><ci id="S2.E2.m1.6.6.1.1.5.2.cmml" xref="S2.E2.m1.6.6.1.1.5.2">𝑄</ci><ci id="S2.E2.m1.6.6.1.1.5.3.cmml" xref="S2.E2.m1.6.6.1.1.5.3">𝐿</ci><vector id="S2.E2.m1.6.6.1.1.5.4.1.cmml" xref="S2.E2.m1.6.6.1.1.5.4.2"><ci id="S2.E2.m1.1.1.cmml" xref="S2.E2.m1.1.1">𝑦</ci><apply id="S2.E2.m1.2.2.cmml" xref="S2.E2.m1.2.2"><ci id="S2.E2.m1.2.2.1.cmml" xref="S2.E2.m1.2.2.1">^</ci><ci id="S2.E2.m1.2.2.2.cmml" xref="S2.E2.m1.2.2.2">𝑦</ci></apply><ci id="S2.E2.m1.3.3.cmml" xref="S2.E2.m1.3.3">𝑞</ci></vector></apply><apply id="S2.E2.m1.6.6.1.1.3.cmml" xref="S2.E2.m1.6.6.1.1.3"><plus id="S2.E2.m1.6.6.1.1.3.4.cmml" xref="S2.E2.m1.6.6.1.1.3.4"></plus><apply id="S2.E2.m1.6.6.1.1.1.1.cmml" xref="S2.E2.m1.6.6.1.1.1.1"><times id="S2.E2.m1.6.6.1.1.1.1.2.cmml" xref="S2.E2.m1.6.6.1.1.1.1.2"></times><ci id="S2.E2.m1.6.6.1.1.1.1.3.cmml" xref="S2.E2.m1.6.6.1.1.1.1.3">𝑞</ci><ci id="S2.E2.m1.6.6.1.1.1.1.4a.cmml" xref="S2.E2.m1.6.6.1.1.1.1.4"><mtext id="S2.E2.m1.6.6.1.1.1.1.4.cmml" xref="S2.E2.m1.6.6.1.1.1.1.4">max</mtext></ci><interval closure="open" id="S2.E2.m1.6.6.1.1.1.1.1.2.cmml" xref="S2.E2.m1.6.6.1.1.1.1.1.1"><cn type="integer" id="S2.E2.m1.4.4.cmml" xref="S2.E2.m1.4.4">0</cn><apply id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1"><minus id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.1"></minus><ci id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.2">𝑦</ci><apply id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3"><ci id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.1">^</ci><ci id="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.6.6.1.1.1.1.1.1.1.1.1.3.2">𝑦</ci></apply></apply></interval></apply><apply id="S2.E2.m1.6.6.1.1.3.3.cmml" xref="S2.E2.m1.6.6.1.1.3.3"><times id="S2.E2.m1.6.6.1.1.3.3.3.cmml" xref="S2.E2.m1.6.6.1.1.3.3.3"></times><apply id="S2.E2.m1.6.6.1.1.2.2.1.1.1.cmml" xref="S2.E2.m1.6.6.1.1.2.2.1.1"><minus id="S2.E2.m1.6.6.1.1.2.2.1.1.1.1.cmml" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.1"></minus><cn type="integer" id="S2.E2.m1.6.6.1.1.2.2.1.1.1.2.cmml" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.2">1</cn><ci id="S2.E2.m1.6.6.1.1.2.2.1.1.1.3.cmml" xref="S2.E2.m1.6.6.1.1.2.2.1.1.1.3">𝑞</ci></apply><ci id="S2.E2.m1.6.6.1.1.3.3.4a.cmml" xref="S2.E2.m1.6.6.1.1.3.3.4"><mtext id="S2.E2.m1.6.6.1.1.3.3.4.cmml" xref="S2.E2.m1.6.6.1.1.3.3.4">max</mtext></ci><interval closure="open" id="S2.E2.m1.6.6.1.1.3.3.2.2.cmml" xref="S2.E2.m1.6.6.1.1.3.3.2.1"><cn type="integer" id="S2.E2.m1.5.5.cmml" xref="S2.E2.m1.5.5">0</cn><apply id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.cmml" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1"><minus id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.1.cmml" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.1"></minus><apply id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.cmml" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2"><ci id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.1.cmml" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.1">^</ci><ci id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.2.cmml" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.2.2">𝑦</ci></apply><ci id="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.3.cmml" xref="S2.E2.m1.6.6.1.1.3.3.2.1.1.1.1.3">𝑦</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.6c">QL(y,\hat{y},q)=q\text{max}(0,(y-\hat{y}))+(1-q)\text{max}(0,(\hat{y}-y)),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p id="S2.SS3.p4.8" class="ltx_p">where <math id="S2.SS3.p4.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S2.SS3.p4.1.m1.1a"><mi id="S2.SS3.p4.1.m1.1.1" xref="S2.SS3.p4.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p4.1.m1.1b"><ci id="S2.SS3.p4.1.m1.1.1.cmml" xref="S2.SS3.p4.1.m1.1.1">𝑉</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p4.1.m1.1c">V</annotation></semantics></math> is the set of target variables, <math id="S2.SS3.p4.2.m2.1" class="ltx_Math" alttext="\Omega" display="inline"><semantics id="S2.SS3.p4.2.m2.1a"><mi mathvariant="normal" id="S2.SS3.p4.2.m2.1.1" xref="S2.SS3.p4.2.m2.1.1.cmml">Ω</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p4.2.m2.1b"><ci id="S2.SS3.p4.2.m2.1.1.cmml" xref="S2.SS3.p4.2.m2.1.1">Ω</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p4.2.m2.1c">\Omega</annotation></semantics></math> is the training dataset, <math id="S2.SS3.p4.3.m3.1" class="ltx_Math" alttext="Q" display="inline"><semantics id="S2.SS3.p4.3.m3.1a"><mi id="S2.SS3.p4.3.m3.1.1" xref="S2.SS3.p4.3.m3.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p4.3.m3.1b"><ci id="S2.SS3.p4.3.m3.1.1.cmml" xref="S2.SS3.p4.3.m3.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p4.3.m3.1c">Q</annotation></semantics></math> is the set of quantiles <math id="S2.SS3.p4.4.m4.3" class="ltx_Math" alttext="\{0.1,0.5,0.9\}" display="inline"><semantics id="S2.SS3.p4.4.m4.3a"><mrow id="S2.SS3.p4.4.m4.3.4.2" xref="S2.SS3.p4.4.m4.3.4.1.cmml"><mo stretchy="false" id="S2.SS3.p4.4.m4.3.4.2.1" xref="S2.SS3.p4.4.m4.3.4.1.cmml">{</mo><mn id="S2.SS3.p4.4.m4.1.1" xref="S2.SS3.p4.4.m4.1.1.cmml">0.1</mn><mo id="S2.SS3.p4.4.m4.3.4.2.2" xref="S2.SS3.p4.4.m4.3.4.1.cmml">,</mo><mn id="S2.SS3.p4.4.m4.2.2" xref="S2.SS3.p4.4.m4.2.2.cmml">0.5</mn><mo id="S2.SS3.p4.4.m4.3.4.2.3" xref="S2.SS3.p4.4.m4.3.4.1.cmml">,</mo><mn id="S2.SS3.p4.4.m4.3.3" xref="S2.SS3.p4.4.m4.3.3.cmml">0.9</mn><mo stretchy="false" id="S2.SS3.p4.4.m4.3.4.2.4" xref="S2.SS3.p4.4.m4.3.4.1.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p4.4.m4.3b"><set id="S2.SS3.p4.4.m4.3.4.1.cmml" xref="S2.SS3.p4.4.m4.3.4.2"><cn type="float" id="S2.SS3.p4.4.m4.1.1.cmml" xref="S2.SS3.p4.4.m4.1.1">0.1</cn><cn type="float" id="S2.SS3.p4.4.m4.2.2.cmml" xref="S2.SS3.p4.4.m4.2.2">0.5</cn><cn type="float" id="S2.SS3.p4.4.m4.3.3.cmml" xref="S2.SS3.p4.4.m4.3.3">0.9</cn></set></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p4.4.m4.3c">\{0.1,0.5,0.9\}</annotation></semantics></math> across future time points <math id="S2.SS3.p4.5.m5.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S2.SS3.p4.5.m5.1a"><mi id="S2.SS3.p4.5.m5.1.1" xref="S2.SS3.p4.5.m5.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p4.5.m5.1b"><ci id="S2.SS3.p4.5.m5.1.1.cmml" xref="S2.SS3.p4.5.m5.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p4.5.m5.1c">t</annotation></semantics></math> to <math id="S2.SS3.p4.6.m6.1" class="ltx_Math" alttext="t_{\text{max}}" display="inline"><semantics id="S2.SS3.p4.6.m6.1a"><msub id="S2.SS3.p4.6.m6.1.1" xref="S2.SS3.p4.6.m6.1.1.cmml"><mi id="S2.SS3.p4.6.m6.1.1.2" xref="S2.SS3.p4.6.m6.1.1.2.cmml">t</mi><mtext id="S2.SS3.p4.6.m6.1.1.3" xref="S2.SS3.p4.6.m6.1.1.3a.cmml">max</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p4.6.m6.1b"><apply id="S2.SS3.p4.6.m6.1.1.cmml" xref="S2.SS3.p4.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS3.p4.6.m6.1.1.1.cmml" xref="S2.SS3.p4.6.m6.1.1">subscript</csymbol><ci id="S2.SS3.p4.6.m6.1.1.2.cmml" xref="S2.SS3.p4.6.m6.1.1.2">𝑡</ci><ci id="S2.SS3.p4.6.m6.1.1.3a.cmml" xref="S2.SS3.p4.6.m6.1.1.3"><mtext mathsize="70%" id="S2.SS3.p4.6.m6.1.1.3.cmml" xref="S2.SS3.p4.6.m6.1.1.3">max</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p4.6.m6.1c">t_{\text{max}}</annotation></semantics></math>. We use the notation <math id="S2.SS3.p4.7.m7.1" class="ltx_Math" alttext="\mathbb{I}(x)" display="inline"><semantics id="S2.SS3.p4.7.m7.1a"><mrow id="S2.SS3.p4.7.m7.1.2" xref="S2.SS3.p4.7.m7.1.2.cmml"><mi id="S2.SS3.p4.7.m7.1.2.2" xref="S2.SS3.p4.7.m7.1.2.2.cmml">𝕀</mi><mo lspace="0em" rspace="0em" id="S2.SS3.p4.7.m7.1.2.1" xref="S2.SS3.p4.7.m7.1.2.1.cmml">​</mo><mrow id="S2.SS3.p4.7.m7.1.2.3.2" xref="S2.SS3.p4.7.m7.1.2.cmml"><mo stretchy="false" id="S2.SS3.p4.7.m7.1.2.3.2.1" xref="S2.SS3.p4.7.m7.1.2.cmml">(</mo><mi id="S2.SS3.p4.7.m7.1.1" xref="S2.SS3.p4.7.m7.1.1.cmml">x</mi><mo stretchy="false" id="S2.SS3.p4.7.m7.1.2.3.2.2" xref="S2.SS3.p4.7.m7.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p4.7.m7.1b"><apply id="S2.SS3.p4.7.m7.1.2.cmml" xref="S2.SS3.p4.7.m7.1.2"><times id="S2.SS3.p4.7.m7.1.2.1.cmml" xref="S2.SS3.p4.7.m7.1.2.1"></times><ci id="S2.SS3.p4.7.m7.1.2.2.cmml" xref="S2.SS3.p4.7.m7.1.2.2">𝕀</ci><ci id="S2.SS3.p4.7.m7.1.1.cmml" xref="S2.SS3.p4.7.m7.1.1">𝑥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p4.7.m7.1c">\mathbb{I}(x)</annotation></semantics></math> as the indicator function with value 1 when <math id="S2.SS3.p4.8.m8.1" class="ltx_Math" alttext="x" display="inline"><semantics id="S2.SS3.p4.8.m8.1a"><mi id="S2.SS3.p4.8.m8.1.1" xref="S2.SS3.p4.8.m8.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p4.8.m8.1b"><ci id="S2.SS3.p4.8.m8.1.1.cmml" xref="S2.SS3.p4.8.m8.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p4.8.m8.1c">x</annotation></semantics></math> is true and 0 otherwise.</p>
</div>
<div id="S2.SS3.p5" class="ltx_para">
<p id="S2.SS3.p5.1" class="ltx_p">For training the model, we use the Adam<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite> optimizer with a learning rate of 1e-3, a batch size of 800 and a dropout rate of 0.3. We train the model for a maximum of 2000 epochs and implemented early stopping to obtain the best performing model during training. We implement parallelization across two Tesla V100-PCIE-16GB GPUs, and training the model took 6 hours.</p>
</div>
</section>
<section id="S2.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.4 </span>Treatment response forecasting</h3>

<div id="S2.SS4.p1" class="ltx_para">
<p id="S2.SS4.p1.1" class="ltx_p">We present a study case applying our prediction pipeline to forecast patient trajectories conditioning on whether a patient is administered pressors. Pressors (vasopressors) are a class of drugs which raise blood pressure and are used in the management of hypotension and shock<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite>. They are clinically indicated when mean blood pressure falls below 60 mmHg. As these drugs are expected to increase blood pressure within a short time, blood pressure forecasts should reflect this trend when provided time-varying medication administration. In this analysis, we use the MIMIC cohort only, as the institutional dataset obtained does not have enough information about the injection time and duration of medications. Our experimental set-up is as follows. First, we train a separate TFT-multi model assuming that medication (pressor) administration is known into the future, i.e. as a future time series variable. Then for each patient in the test set, we make forecasts based on three scenarios: the observed truth for medication input, assuming constant administration throughout the prediction interval (all 1s), and assuming no administration (all 0s).</p>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Results</h2>

<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Multi-horizon prediction</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.1" class="ltx_p">First, we compare performance in predicting 5 standard vital values in the ICU: mean BP, pulse, temperature, respiratory rate and SpO2 across four methods: Prophet<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>, VAR<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite>, the original TFT<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite> and our method, TFT-multi. Because Prophet<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite> is a univariate forecasting model, five instances were trained to predict each of the vital sign time series. We note here that since Prophet<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite> requires the covariate inputs to also be known into the future, we only add age as a covariate. For TFT<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>, we also trained 5 instances with the same covariate inputs as our model to predict each of the vital signs. For VAR<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite>, we trained a model to take in past vital sign trajectories and no exogenous variables, in accordance with convention. We note here that respiratory rate and temperature did not pass the Granger’s causality test<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref">25</a>]</cite>, which determines if one time series can predict another time series. Since VAR assumes all variables to be predictive of one another<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite>, we did not include them in the model. By the same logic, we did not include temperature in the external validation set. For each model, we calculate the mean absolute error (MAE) in both validation datasets for all vital predictions against their true values. We examine only the time points with recorded and not imputed values, calculated as follows for each vital sign:</p>
<table id="S3.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E3.m1.4" class="ltx_Math" alttext="MAE=\frac{\sum_{y_{i}\in\Omega}\sum_{t=1}^{t_{\text{max}}}|y_{it}-\hat{y}_{it}|\cdot\mathbb{I}_{t}({\text{real value}})}{\sum_{y_{i}\in\Omega}\sum_{t=1}^{t_{\text{max}}}\mathbb{I}_{t}({\text{real value}})}." display="block"><semantics id="S3.E3.m1.4a"><mrow id="S3.E3.m1.4.4.1" xref="S3.E3.m1.4.4.1.1.cmml"><mrow id="S3.E3.m1.4.4.1.1" xref="S3.E3.m1.4.4.1.1.cmml"><mrow id="S3.E3.m1.4.4.1.1.2" xref="S3.E3.m1.4.4.1.1.2.cmml"><mi id="S3.E3.m1.4.4.1.1.2.2" xref="S3.E3.m1.4.4.1.1.2.2.cmml">M</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.4.4.1.1.2.1" xref="S3.E3.m1.4.4.1.1.2.1.cmml">​</mo><mi id="S3.E3.m1.4.4.1.1.2.3" xref="S3.E3.m1.4.4.1.1.2.3.cmml">A</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.4.4.1.1.2.1a" xref="S3.E3.m1.4.4.1.1.2.1.cmml">​</mo><mi id="S3.E3.m1.4.4.1.1.2.4" xref="S3.E3.m1.4.4.1.1.2.4.cmml">E</mi></mrow><mo id="S3.E3.m1.4.4.1.1.1" xref="S3.E3.m1.4.4.1.1.1.cmml">=</mo><mfrac id="S3.E3.m1.3.3" xref="S3.E3.m1.3.3.cmml"><mrow id="S3.E3.m1.2.2.2" xref="S3.E3.m1.2.2.2.cmml"><msub id="S3.E3.m1.2.2.2.3" xref="S3.E3.m1.2.2.2.3.cmml"><mo id="S3.E3.m1.2.2.2.3.2" xref="S3.E3.m1.2.2.2.3.2.cmml">∑</mo><mrow id="S3.E3.m1.2.2.2.3.3" xref="S3.E3.m1.2.2.2.3.3.cmml"><msub id="S3.E3.m1.2.2.2.3.3.2" xref="S3.E3.m1.2.2.2.3.3.2.cmml"><mi id="S3.E3.m1.2.2.2.3.3.2.2" xref="S3.E3.m1.2.2.2.3.3.2.2.cmml">y</mi><mi id="S3.E3.m1.2.2.2.3.3.2.3" xref="S3.E3.m1.2.2.2.3.3.2.3.cmml">i</mi></msub><mo id="S3.E3.m1.2.2.2.3.3.1" xref="S3.E3.m1.2.2.2.3.3.1.cmml">∈</mo><mi mathvariant="normal" id="S3.E3.m1.2.2.2.3.3.3" xref="S3.E3.m1.2.2.2.3.3.3.cmml">Ω</mi></mrow></msub><mrow id="S3.E3.m1.2.2.2.2" xref="S3.E3.m1.2.2.2.2.cmml"><msubsup id="S3.E3.m1.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.2.cmml"><mo lspace="0.167em" rspace="0em" id="S3.E3.m1.2.2.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.2.2.2.cmml">∑</mo><mrow id="S3.E3.m1.2.2.2.2.2.2.3" xref="S3.E3.m1.2.2.2.2.2.2.3.cmml"><mi id="S3.E3.m1.2.2.2.2.2.2.3.2" xref="S3.E3.m1.2.2.2.2.2.2.3.2.cmml">t</mi><mo id="S3.E3.m1.2.2.2.2.2.2.3.1" xref="S3.E3.m1.2.2.2.2.2.2.3.1.cmml">=</mo><mn id="S3.E3.m1.2.2.2.2.2.2.3.3" xref="S3.E3.m1.2.2.2.2.2.2.3.3.cmml">1</mn></mrow><msub id="S3.E3.m1.2.2.2.2.2.3" xref="S3.E3.m1.2.2.2.2.2.3.cmml"><mi id="S3.E3.m1.2.2.2.2.2.3.2" xref="S3.E3.m1.2.2.2.2.2.3.2.cmml">t</mi><mtext id="S3.E3.m1.2.2.2.2.2.3.3" xref="S3.E3.m1.2.2.2.2.2.3.3a.cmml">max</mtext></msub></msubsup><mrow id="S3.E3.m1.2.2.2.2.1" xref="S3.E3.m1.2.2.2.2.1.cmml"><mrow id="S3.E3.m1.2.2.2.2.1.1" xref="S3.E3.m1.2.2.2.2.1.1.cmml"><mrow id="S3.E3.m1.2.2.2.2.1.1.1.1" xref="S3.E3.m1.2.2.2.2.1.1.1.2.cmml"><mo stretchy="false" id="S3.E3.m1.2.2.2.2.1.1.1.1.2" xref="S3.E3.m1.2.2.2.2.1.1.1.2.1.cmml">|</mo><mrow id="S3.E3.m1.2.2.2.2.1.1.1.1.1" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.cmml"><msub id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.cmml"><mi id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.2" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.2.cmml">y</mi><mrow id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.cmml"><mi id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.2" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.1" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.1.cmml">​</mo><mi id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.3" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.3.cmml">t</mi></mrow></msub><mo id="S3.E3.m1.2.2.2.2.1.1.1.1.1.1" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.1.cmml">−</mo><msub id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.cmml"><mover accent="true" id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.cmml"><mi id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.2" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.2.cmml">y</mi><mo id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.1" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.1.cmml">^</mo></mover><mrow id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.cmml"><mi id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.2" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.1" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.1.cmml">​</mo><mi id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.3" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.3.cmml">t</mi></mrow></msub></mrow><mo rspace="0.055em" stretchy="false" id="S3.E3.m1.2.2.2.2.1.1.1.1.3" xref="S3.E3.m1.2.2.2.2.1.1.1.2.1.cmml">|</mo></mrow><mo rspace="0.222em" id="S3.E3.m1.2.2.2.2.1.1.2" xref="S3.E3.m1.2.2.2.2.1.1.2.cmml">⋅</mo><msub id="S3.E3.m1.2.2.2.2.1.1.3" xref="S3.E3.m1.2.2.2.2.1.1.3.cmml"><mi id="S3.E3.m1.2.2.2.2.1.1.3.2" xref="S3.E3.m1.2.2.2.2.1.1.3.2.cmml">𝕀</mi><mi id="S3.E3.m1.2.2.2.2.1.1.3.3" xref="S3.E3.m1.2.2.2.2.1.1.3.3.cmml">t</mi></msub></mrow><mo lspace="0em" rspace="0em" id="S3.E3.m1.2.2.2.2.1.2" xref="S3.E3.m1.2.2.2.2.1.2.cmml">​</mo><mrow id="S3.E3.m1.2.2.2.2.1.3.2" xref="S3.E3.m1.1.1.1.1a.cmml"><mo stretchy="false" id="S3.E3.m1.2.2.2.2.1.3.2.1" xref="S3.E3.m1.1.1.1.1a.cmml">(</mo><mtext id="S3.E3.m1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.cmml">real value</mtext><mo stretchy="false" id="S3.E3.m1.2.2.2.2.1.3.2.2" xref="S3.E3.m1.1.1.1.1a.cmml">)</mo></mrow></mrow></mrow></mrow><mrow id="S3.E3.m1.3.3.3" xref="S3.E3.m1.3.3.3.cmml"><msub id="S3.E3.m1.3.3.3.2" xref="S3.E3.m1.3.3.3.2.cmml"><mo id="S3.E3.m1.3.3.3.2.2" xref="S3.E3.m1.3.3.3.2.2.cmml">∑</mo><mrow id="S3.E3.m1.3.3.3.2.3" xref="S3.E3.m1.3.3.3.2.3.cmml"><msub id="S3.E3.m1.3.3.3.2.3.2" xref="S3.E3.m1.3.3.3.2.3.2.cmml"><mi id="S3.E3.m1.3.3.3.2.3.2.2" xref="S3.E3.m1.3.3.3.2.3.2.2.cmml">y</mi><mi id="S3.E3.m1.3.3.3.2.3.2.3" xref="S3.E3.m1.3.3.3.2.3.2.3.cmml">i</mi></msub><mo id="S3.E3.m1.3.3.3.2.3.1" xref="S3.E3.m1.3.3.3.2.3.1.cmml">∈</mo><mi mathvariant="normal" id="S3.E3.m1.3.3.3.2.3.3" xref="S3.E3.m1.3.3.3.2.3.3.cmml">Ω</mi></mrow></msub><mrow id="S3.E3.m1.3.3.3.3" xref="S3.E3.m1.3.3.3.3.cmml"><msubsup id="S3.E3.m1.3.3.3.3.1" xref="S3.E3.m1.3.3.3.3.1.cmml"><mo lspace="0.167em" id="S3.E3.m1.3.3.3.3.1.2.2" xref="S3.E3.m1.3.3.3.3.1.2.2.cmml">∑</mo><mrow id="S3.E3.m1.3.3.3.3.1.2.3" xref="S3.E3.m1.3.3.3.3.1.2.3.cmml"><mi id="S3.E3.m1.3.3.3.3.1.2.3.2" xref="S3.E3.m1.3.3.3.3.1.2.3.2.cmml">t</mi><mo id="S3.E3.m1.3.3.3.3.1.2.3.1" xref="S3.E3.m1.3.3.3.3.1.2.3.1.cmml">=</mo><mn id="S3.E3.m1.3.3.3.3.1.2.3.3" xref="S3.E3.m1.3.3.3.3.1.2.3.3.cmml">1</mn></mrow><msub id="S3.E3.m1.3.3.3.3.1.3" xref="S3.E3.m1.3.3.3.3.1.3.cmml"><mi id="S3.E3.m1.3.3.3.3.1.3.2" xref="S3.E3.m1.3.3.3.3.1.3.2.cmml">t</mi><mtext id="S3.E3.m1.3.3.3.3.1.3.3" xref="S3.E3.m1.3.3.3.3.1.3.3a.cmml">max</mtext></msub></msubsup><mrow id="S3.E3.m1.3.3.3.3.2" xref="S3.E3.m1.3.3.3.3.2.cmml"><msub id="S3.E3.m1.3.3.3.3.2.2" xref="S3.E3.m1.3.3.3.3.2.2.cmml"><mi id="S3.E3.m1.3.3.3.3.2.2.2" xref="S3.E3.m1.3.3.3.3.2.2.2.cmml">𝕀</mi><mi id="S3.E3.m1.3.3.3.3.2.2.3" xref="S3.E3.m1.3.3.3.3.2.2.3.cmml">t</mi></msub><mo lspace="0em" rspace="0em" id="S3.E3.m1.3.3.3.3.2.1" xref="S3.E3.m1.3.3.3.3.2.1.cmml">​</mo><mrow id="S3.E3.m1.3.3.3.3.2.3.2" xref="S3.E3.m1.3.3.3.1a.cmml"><mo stretchy="false" id="S3.E3.m1.3.3.3.3.2.3.2.1" xref="S3.E3.m1.3.3.3.1a.cmml">(</mo><mtext id="S3.E3.m1.3.3.3.1" xref="S3.E3.m1.3.3.3.1.cmml">real value</mtext><mo stretchy="false" id="S3.E3.m1.3.3.3.3.2.3.2.2" xref="S3.E3.m1.3.3.3.1a.cmml">)</mo></mrow></mrow></mrow></mrow></mfrac></mrow><mo lspace="0em" id="S3.E3.m1.4.4.1.2" xref="S3.E3.m1.4.4.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.4b"><apply id="S3.E3.m1.4.4.1.1.cmml" xref="S3.E3.m1.4.4.1"><eq id="S3.E3.m1.4.4.1.1.1.cmml" xref="S3.E3.m1.4.4.1.1.1"></eq><apply id="S3.E3.m1.4.4.1.1.2.cmml" xref="S3.E3.m1.4.4.1.1.2"><times id="S3.E3.m1.4.4.1.1.2.1.cmml" xref="S3.E3.m1.4.4.1.1.2.1"></times><ci id="S3.E3.m1.4.4.1.1.2.2.cmml" xref="S3.E3.m1.4.4.1.1.2.2">𝑀</ci><ci id="S3.E3.m1.4.4.1.1.2.3.cmml" xref="S3.E3.m1.4.4.1.1.2.3">𝐴</ci><ci id="S3.E3.m1.4.4.1.1.2.4.cmml" xref="S3.E3.m1.4.4.1.1.2.4">𝐸</ci></apply><apply id="S3.E3.m1.3.3.cmml" xref="S3.E3.m1.3.3"><divide id="S3.E3.m1.3.3.4.cmml" xref="S3.E3.m1.3.3"></divide><apply id="S3.E3.m1.2.2.2.cmml" xref="S3.E3.m1.2.2.2"><apply id="S3.E3.m1.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2.3"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.3.1.cmml" xref="S3.E3.m1.2.2.2.3">subscript</csymbol><sum id="S3.E3.m1.2.2.2.3.2.cmml" xref="S3.E3.m1.2.2.2.3.2"></sum><apply id="S3.E3.m1.2.2.2.3.3.cmml" xref="S3.E3.m1.2.2.2.3.3"><in id="S3.E3.m1.2.2.2.3.3.1.cmml" xref="S3.E3.m1.2.2.2.3.3.1"></in><apply id="S3.E3.m1.2.2.2.3.3.2.cmml" xref="S3.E3.m1.2.2.2.3.3.2"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.3.3.2.1.cmml" xref="S3.E3.m1.2.2.2.3.3.2">subscript</csymbol><ci id="S3.E3.m1.2.2.2.3.3.2.2.cmml" xref="S3.E3.m1.2.2.2.3.3.2.2">𝑦</ci><ci id="S3.E3.m1.2.2.2.3.3.2.3.cmml" xref="S3.E3.m1.2.2.2.3.3.2.3">𝑖</ci></apply><ci id="S3.E3.m1.2.2.2.3.3.3.cmml" xref="S3.E3.m1.2.2.2.3.3.3">Ω</ci></apply></apply><apply id="S3.E3.m1.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2"><apply id="S3.E3.m1.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.2.2.1.cmml" xref="S3.E3.m1.2.2.2.2.2">superscript</csymbol><apply id="S3.E3.m1.2.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.2.2.2.1.cmml" xref="S3.E3.m1.2.2.2.2.2">subscript</csymbol><sum id="S3.E3.m1.2.2.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2.2"></sum><apply id="S3.E3.m1.2.2.2.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2.2.2.2.3"><eq id="S3.E3.m1.2.2.2.2.2.2.3.1.cmml" xref="S3.E3.m1.2.2.2.2.2.2.3.1"></eq><ci id="S3.E3.m1.2.2.2.2.2.2.3.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2.3.2">𝑡</ci><cn type="integer" id="S3.E3.m1.2.2.2.2.2.2.3.3.cmml" xref="S3.E3.m1.2.2.2.2.2.2.3.3">1</cn></apply></apply><apply id="S3.E3.m1.2.2.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.2.2.3.1.cmml" xref="S3.E3.m1.2.2.2.2.2.3">subscript</csymbol><ci id="S3.E3.m1.2.2.2.2.2.3.2.cmml" xref="S3.E3.m1.2.2.2.2.2.3.2">𝑡</ci><ci id="S3.E3.m1.2.2.2.2.2.3.3a.cmml" xref="S3.E3.m1.2.2.2.2.2.3.3"><mtext mathsize="50%" id="S3.E3.m1.2.2.2.2.2.3.3.cmml" xref="S3.E3.m1.2.2.2.2.2.3.3">max</mtext></ci></apply></apply><apply id="S3.E3.m1.2.2.2.2.1.cmml" xref="S3.E3.m1.2.2.2.2.1"><times id="S3.E3.m1.2.2.2.2.1.2.cmml" xref="S3.E3.m1.2.2.2.2.1.2"></times><apply id="S3.E3.m1.2.2.2.2.1.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1"><ci id="S3.E3.m1.2.2.2.2.1.1.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.2">⋅</ci><apply id="S3.E3.m1.2.2.2.2.1.1.1.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1"><abs id="S3.E3.m1.2.2.2.2.1.1.1.2.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.2"></abs><apply id="S3.E3.m1.2.2.2.2.1.1.1.1.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1"><minus id="S3.E3.m1.2.2.2.2.1.1.1.1.1.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.1"></minus><apply id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.2">𝑦</ci><apply id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3"><times id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.1"></times><ci id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.2">𝑖</ci><ci id="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.3.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.2.3.3">𝑡</ci></apply></apply><apply id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3">subscript</csymbol><apply id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2"><ci id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.1">^</ci><ci id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.2.2">𝑦</ci></apply><apply id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3"><times id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.1"></times><ci id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.2">𝑖</ci><ci id="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.3.cmml" xref="S3.E3.m1.2.2.2.2.1.1.1.1.1.3.3.3">𝑡</ci></apply></apply></apply></apply><apply id="S3.E3.m1.2.2.2.2.1.1.3.cmml" xref="S3.E3.m1.2.2.2.2.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.2.1.1.3.1.cmml" xref="S3.E3.m1.2.2.2.2.1.1.3">subscript</csymbol><ci id="S3.E3.m1.2.2.2.2.1.1.3.2.cmml" xref="S3.E3.m1.2.2.2.2.1.1.3.2">𝕀</ci><ci id="S3.E3.m1.2.2.2.2.1.1.3.3.cmml" xref="S3.E3.m1.2.2.2.2.1.1.3.3">𝑡</ci></apply></apply><ci id="S3.E3.m1.1.1.1.1a.cmml" xref="S3.E3.m1.2.2.2.2.1.3.2"><mtext id="S3.E3.m1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1">real value</mtext></ci></apply></apply></apply><apply id="S3.E3.m1.3.3.3.cmml" xref="S3.E3.m1.3.3.3"><apply id="S3.E3.m1.3.3.3.2.cmml" xref="S3.E3.m1.3.3.3.2"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.2.1.cmml" xref="S3.E3.m1.3.3.3.2">subscript</csymbol><sum id="S3.E3.m1.3.3.3.2.2.cmml" xref="S3.E3.m1.3.3.3.2.2"></sum><apply id="S3.E3.m1.3.3.3.2.3.cmml" xref="S3.E3.m1.3.3.3.2.3"><in id="S3.E3.m1.3.3.3.2.3.1.cmml" xref="S3.E3.m1.3.3.3.2.3.1"></in><apply id="S3.E3.m1.3.3.3.2.3.2.cmml" xref="S3.E3.m1.3.3.3.2.3.2"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.2.3.2.1.cmml" xref="S3.E3.m1.3.3.3.2.3.2">subscript</csymbol><ci id="S3.E3.m1.3.3.3.2.3.2.2.cmml" xref="S3.E3.m1.3.3.3.2.3.2.2">𝑦</ci><ci id="S3.E3.m1.3.3.3.2.3.2.3.cmml" xref="S3.E3.m1.3.3.3.2.3.2.3">𝑖</ci></apply><ci id="S3.E3.m1.3.3.3.2.3.3.cmml" xref="S3.E3.m1.3.3.3.2.3.3">Ω</ci></apply></apply><apply id="S3.E3.m1.3.3.3.3.cmml" xref="S3.E3.m1.3.3.3.3"><apply id="S3.E3.m1.3.3.3.3.1.cmml" xref="S3.E3.m1.3.3.3.3.1"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.3.1.1.cmml" xref="S3.E3.m1.3.3.3.3.1">superscript</csymbol><apply id="S3.E3.m1.3.3.3.3.1.2.cmml" xref="S3.E3.m1.3.3.3.3.1"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.3.1.2.1.cmml" xref="S3.E3.m1.3.3.3.3.1">subscript</csymbol><sum id="S3.E3.m1.3.3.3.3.1.2.2.cmml" xref="S3.E3.m1.3.3.3.3.1.2.2"></sum><apply id="S3.E3.m1.3.3.3.3.1.2.3.cmml" xref="S3.E3.m1.3.3.3.3.1.2.3"><eq id="S3.E3.m1.3.3.3.3.1.2.3.1.cmml" xref="S3.E3.m1.3.3.3.3.1.2.3.1"></eq><ci id="S3.E3.m1.3.3.3.3.1.2.3.2.cmml" xref="S3.E3.m1.3.3.3.3.1.2.3.2">𝑡</ci><cn type="integer" id="S3.E3.m1.3.3.3.3.1.2.3.3.cmml" xref="S3.E3.m1.3.3.3.3.1.2.3.3">1</cn></apply></apply><apply id="S3.E3.m1.3.3.3.3.1.3.cmml" xref="S3.E3.m1.3.3.3.3.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.3.1.3.1.cmml" xref="S3.E3.m1.3.3.3.3.1.3">subscript</csymbol><ci id="S3.E3.m1.3.3.3.3.1.3.2.cmml" xref="S3.E3.m1.3.3.3.3.1.3.2">𝑡</ci><ci id="S3.E3.m1.3.3.3.3.1.3.3a.cmml" xref="S3.E3.m1.3.3.3.3.1.3.3"><mtext mathsize="50%" id="S3.E3.m1.3.3.3.3.1.3.3.cmml" xref="S3.E3.m1.3.3.3.3.1.3.3">max</mtext></ci></apply></apply><apply id="S3.E3.m1.3.3.3.3.2.cmml" xref="S3.E3.m1.3.3.3.3.2"><times id="S3.E3.m1.3.3.3.3.2.1.cmml" xref="S3.E3.m1.3.3.3.3.2.1"></times><apply id="S3.E3.m1.3.3.3.3.2.2.cmml" xref="S3.E3.m1.3.3.3.3.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.3.2.2.1.cmml" xref="S3.E3.m1.3.3.3.3.2.2">subscript</csymbol><ci id="S3.E3.m1.3.3.3.3.2.2.2.cmml" xref="S3.E3.m1.3.3.3.3.2.2.2">𝕀</ci><ci id="S3.E3.m1.3.3.3.3.2.2.3.cmml" xref="S3.E3.m1.3.3.3.3.2.2.3">𝑡</ci></apply><ci id="S3.E3.m1.3.3.3.1a.cmml" xref="S3.E3.m1.3.3.3.3.2.3.2"><mtext id="S3.E3.m1.3.3.3.1.cmml" xref="S3.E3.m1.3.3.3.1">real value</mtext></ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.4c">MAE=\frac{\sum_{y_{i}\in\Omega}\sum_{t=1}^{t_{\text{max}}}|y_{it}-\hat{y}_{it}|\cdot\mathbb{I}_{t}({\text{real value}})}{\sum_{y_{i}\in\Omega}\sum_{t=1}^{t_{\text{max}}}\mathbb{I}_{t}({\text{real value}})}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.2" class="ltx_p">In Table <a href="#S3.T2" title="Table 2 ‣ 3.1 Multi-horizon prediction ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>, we compare performances for each vital sign, with the best performing model in bold. The top 4 rows are calculated with the held-out MIMIC test set, while the bottom 4 with the external validation (EV) set. For TFT and TFT-multi, we take the 50th percentile prediction as the prediction. In the held-out test set, TFT-multi archives the lowest MAE in 4 out of 5 vitals, and outperforms Prophet in respiratory rate. In the external set, TFT-multi achieves the lowest MAE for 4 out of 5 vitals, and performs comparably with Prophet in SpO2, which Prophet is expected to perform well in as it is highly regular and cyclical. Compared to the original TFT model, there is a significant improvement in predicting vitals that have more missingness, such as SpO2.</p>
</div>
<figure id="S3.T2" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span id="S3.T2.6.1.1" class="ltx_text" style="font-size:90%;">Table 2</span>: </span><span id="S3.T2.7.2" class="ltx_text" style="font-size:90%;">MEAN ABSOLUTE VALUE ACROSS VITALS FOR TEST AND EXTERNAL VALIDATION SET</span></figcaption>
<table id="S3.T2.4" class="ltx_tabular ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S3.T2.4.5.1" class="ltx_tr">
<td id="S3.T2.4.5.1.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:51.2pt;"></td>
<td id="S3.T2.4.5.1.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.5.1.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.5.1.2.1.1" class="ltx_p">Mean BP</span>
</span>
</td>
<td id="S3.T2.4.5.1.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.5.1.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.5.1.3.1.1" class="ltx_p">Pulse</span>
</span>
</td>
<td id="S3.T2.4.5.1.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.5.1.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.5.1.4.1.1" class="ltx_p">SpO2</span>
</span>
</td>
<td id="S3.T2.4.5.1.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.5.1.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.5.1.5.1.1" class="ltx_p">Resp</span>
</span>
</td>
<td id="S3.T2.4.5.1.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.5.1.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.5.1.6.1.1" class="ltx_p">Temp</span>
</span>
</td>
</tr>
<tr id="S3.T2.4.6.2" class="ltx_tr">
<td id="S3.T2.4.6.2.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:51.2pt;">
<span id="S3.T2.4.6.2.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.6.2.1.1.1" class="ltx_p">Prophet (test)</span>
</span>
</td>
<td id="S3.T2.4.6.2.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.6.2.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.6.2.2.1.1" class="ltx_p">13.42</span>
</span>
</td>
<td id="S3.T2.4.6.2.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.6.2.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.6.2.3.1.1" class="ltx_p">10.85</span>
</span>
</td>
<td id="S3.T2.4.6.2.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.6.2.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.6.2.4.1.1" class="ltx_p">23.17</span>
</span>
</td>
<td id="S3.T2.4.6.2.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.6.2.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.6.2.5.1.1" class="ltx_p">5.64</span>
</span>
</td>
<td id="S3.T2.4.6.2.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.6.2.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.6.2.6.1.1" class="ltx_p">3.55</span>
</span>
</td>
</tr>
<tr id="S3.T2.3.3" class="ltx_tr">
<td id="S3.T2.3.3.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:51.2pt;">
<span id="S3.T2.3.3.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.3.3.4.1.1" class="ltx_p">VAR</span>
</span>
</td>
<td id="S3.T2.1.1.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.1.1.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.1.1.1.1.1" class="ltx_p"><math id="S3.T2.1.1.1.1.1.m1.1" class="ltx_Math" alttext="&gt;" display="inline"><semantics id="S3.T2.1.1.1.1.1.m1.1a"><mo id="S3.T2.1.1.1.1.1.m1.1.1" xref="S3.T2.1.1.1.1.1.m1.1.1.cmml">&gt;</mo><annotation-xml encoding="MathML-Content" id="S3.T2.1.1.1.1.1.m1.1b"><gt id="S3.T2.1.1.1.1.1.m1.1.1.cmml" xref="S3.T2.1.1.1.1.1.m1.1.1"></gt></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.1.1.1.1.1.m1.1c">&gt;</annotation></semantics></math>100</span>
</span>
</td>
<td id="S3.T2.2.2.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.2.2.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.2.2.2.1.1" class="ltx_p"><math id="S3.T2.2.2.2.1.1.m1.1" class="ltx_Math" alttext="&gt;" display="inline"><semantics id="S3.T2.2.2.2.1.1.m1.1a"><mo id="S3.T2.2.2.2.1.1.m1.1.1" xref="S3.T2.2.2.2.1.1.m1.1.1.cmml">&gt;</mo><annotation-xml encoding="MathML-Content" id="S3.T2.2.2.2.1.1.m1.1b"><gt id="S3.T2.2.2.2.1.1.m1.1.1.cmml" xref="S3.T2.2.2.2.1.1.m1.1.1"></gt></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.2.2.2.1.1.m1.1c">&gt;</annotation></semantics></math>100</span>
</span>
</td>
<td id="S3.T2.3.3.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.3.3.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.3.3.3.1.1" class="ltx_p"><math id="S3.T2.3.3.3.1.1.m1.1" class="ltx_Math" alttext="&gt;" display="inline"><semantics id="S3.T2.3.3.3.1.1.m1.1a"><mo id="S3.T2.3.3.3.1.1.m1.1.1" xref="S3.T2.3.3.3.1.1.m1.1.1.cmml">&gt;</mo><annotation-xml encoding="MathML-Content" id="S3.T2.3.3.3.1.1.m1.1b"><gt id="S3.T2.3.3.3.1.1.m1.1.1.cmml" xref="S3.T2.3.3.3.1.1.m1.1.1"></gt></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.3.3.3.1.1.m1.1c">&gt;</annotation></semantics></math>100</span>
</span>
</td>
<td id="S3.T2.3.3.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.3.3.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.3.3.5.1.1" class="ltx_p">N/A</span>
</span>
</td>
<td id="S3.T2.3.3.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.3.3.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.3.3.6.1.1" class="ltx_p">N/A</span>
</span>
</td>
</tr>
<tr id="S3.T2.4.7.3" class="ltx_tr">
<td id="S3.T2.4.7.3.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:51.2pt;">
<span id="S3.T2.4.7.3.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.7.3.1.1.1" class="ltx_p">TFT</span>
</span>
</td>
<td id="S3.T2.4.7.3.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.7.3.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.7.3.2.1.1" class="ltx_p">11.9</span>
</span>
</td>
<td id="S3.T2.4.7.3.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.7.3.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.7.3.3.1.1" class="ltx_p">13.36</span>
</span>
</td>
<td id="S3.T2.4.7.3.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.7.3.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.7.3.4.1.1" class="ltx_p">25.9</span>
</span>
</td>
<td id="S3.T2.4.7.3.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.7.3.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.7.3.5.1.1" class="ltx_p"><span id="S3.T2.4.7.3.5.1.1.1" class="ltx_text ltx_font_bold">4.01</span></span>
</span>
</td>
<td id="S3.T2.4.7.3.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.7.3.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.7.3.6.1.1" class="ltx_p">1.27</span>
</span>
</td>
</tr>
<tr id="S3.T2.4.8.4" class="ltx_tr">
<td id="S3.T2.4.8.4.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:51.2pt;">
<span id="S3.T2.4.8.4.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.8.4.1.1.1" class="ltx_p">TFT-multi</span>
</span>
</td>
<td id="S3.T2.4.8.4.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.8.4.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.8.4.2.1.1" class="ltx_p"><span id="S3.T2.4.8.4.2.1.1.1" class="ltx_text ltx_font_bold">7.44</span></span>
</span>
</td>
<td id="S3.T2.4.8.4.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.8.4.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.8.4.3.1.1" class="ltx_p"><span id="S3.T2.4.8.4.3.1.1.1" class="ltx_text ltx_font_bold">8.95</span></span>
</span>
</td>
<td id="S3.T2.4.8.4.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.8.4.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.8.4.4.1.1" class="ltx_p"><span id="S3.T2.4.8.4.4.1.1.1" class="ltx_text ltx_font_bold">23.16</span></span>
</span>
</td>
<td id="S3.T2.4.8.4.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.8.4.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.8.4.5.1.1" class="ltx_p">4.45</span>
</span>
</td>
<td id="S3.T2.4.8.4.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.8.4.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.8.4.6.1.1" class="ltx_p"><span id="S3.T2.4.8.4.6.1.1.1" class="ltx_text ltx_font_bold">0.74</span></span>
</span>
</td>
</tr>
<tr id="S3.T2.4.9.5" class="ltx_tr">
<td id="S3.T2.4.9.5.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_tt" style="width:51.2pt;">
<span id="S3.T2.4.9.5.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.9.5.1.1.1" class="ltx_p">Prophet (EV)</span>
</span>
</td>
<td id="S3.T2.4.9.5.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_tt" style="width:25.6pt;">
<span id="S3.T2.4.9.5.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.9.5.2.1.1" class="ltx_p">8.15</span>
</span>
</td>
<td id="S3.T2.4.9.5.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_tt" style="width:25.6pt;">
<span id="S3.T2.4.9.5.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.9.5.3.1.1" class="ltx_p">9.29</span>
</span>
</td>
<td id="S3.T2.4.9.5.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_tt" style="width:25.6pt;">
<span id="S3.T2.4.9.5.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.9.5.4.1.1" class="ltx_p"><span id="S3.T2.4.9.5.4.1.1.1" class="ltx_text ltx_font_bold">1.7</span></span>
</span>
</td>
<td id="S3.T2.4.9.5.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_tt" style="width:25.6pt;">
<span id="S3.T2.4.9.5.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.9.5.5.1.1" class="ltx_p">3.01</span>
</span>
</td>
<td id="S3.T2.4.9.5.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_tt" style="width:25.6pt;">
<span id="S3.T2.4.9.5.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.9.5.6.1.1" class="ltx_p">0.91</span>
</span>
</td>
</tr>
<tr id="S3.T2.4.4" class="ltx_tr">
<td id="S3.T2.4.4.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:51.2pt;">
<span id="S3.T2.4.4.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.4.2.1.1" class="ltx_p">VAR</span>
</span>
</td>
<td id="S3.T2.4.4.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.4.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.4.3.1.1" class="ltx_p">6.5</span>
</span>
</td>
<td id="S3.T2.4.4.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.4.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.4.4.1.1" class="ltx_p">7.18</span>
</span>
</td>
<td id="S3.T2.4.4.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.4.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.4.1.1.1" class="ltx_p"><math id="S3.T2.4.4.1.1.1.m1.1" class="ltx_Math" alttext="&gt;" display="inline"><semantics id="S3.T2.4.4.1.1.1.m1.1a"><mo id="S3.T2.4.4.1.1.1.m1.1.1" xref="S3.T2.4.4.1.1.1.m1.1.1.cmml">&gt;</mo><annotation-xml encoding="MathML-Content" id="S3.T2.4.4.1.1.1.m1.1b"><gt id="S3.T2.4.4.1.1.1.m1.1.1.cmml" xref="S3.T2.4.4.1.1.1.m1.1.1"></gt></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.4.4.1.1.1.m1.1c">&gt;</annotation></semantics></math>100</span>
</span>
</td>
<td id="S3.T2.4.4.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.4.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.4.5.1.1" class="ltx_p">2.48</span>
</span>
</td>
<td id="S3.T2.4.4.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.4.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.4.6.1.1" class="ltx_p">N/A</span>
</span>
</td>
</tr>
<tr id="S3.T2.4.10.6" class="ltx_tr">
<td id="S3.T2.4.10.6.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:51.2pt;">
<span id="S3.T2.4.10.6.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.10.6.1.1.1" class="ltx_p">TFT</span>
</span>
</td>
<td id="S3.T2.4.10.6.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.10.6.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.10.6.2.1.1" class="ltx_p">10.14</span>
</span>
</td>
<td id="S3.T2.4.10.6.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.10.6.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.10.6.3.1.1" class="ltx_p">8.7</span>
</span>
</td>
<td id="S3.T2.4.10.6.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.10.6.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.10.6.4.1.1" class="ltx_p">17.09</span>
</span>
</td>
<td id="S3.T2.4.10.6.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.10.6.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.10.6.5.1.1" class="ltx_p">2.42</span>
</span>
</td>
<td id="S3.T2.4.10.6.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.10.6.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.10.6.6.1.1" class="ltx_p">1.42</span>
</span>
</td>
</tr>
<tr id="S3.T2.4.11.7" class="ltx_tr">
<td id="S3.T2.4.11.7.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_l ltx_border_r ltx_border_t" style="width:51.2pt;">
<span id="S3.T2.4.11.7.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.11.7.1.1.1" class="ltx_p">TFT-multi</span>
</span>
</td>
<td id="S3.T2.4.11.7.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.11.7.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.11.7.2.1.1" class="ltx_p"><span id="S3.T2.4.11.7.2.1.1.1" class="ltx_text ltx_font_bold">6.17</span></span>
</span>
</td>
<td id="S3.T2.4.11.7.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.11.7.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.11.7.3.1.1" class="ltx_p"><span id="S3.T2.4.11.7.3.1.1.1" class="ltx_text ltx_font_bold">7.16</span></span>
</span>
</td>
<td id="S3.T2.4.11.7.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.11.7.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.11.7.4.1.1" class="ltx_p">1.83</span>
</span>
</td>
<td id="S3.T2.4.11.7.5" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.11.7.5.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.11.7.5.1.1" class="ltx_p"><span id="S3.T2.4.11.7.5.1.1.1" class="ltx_text ltx_font_bold">2.38</span></span>
</span>
</td>
<td id="S3.T2.4.11.7.6" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T2.4.11.7.6.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T2.4.11.7.6.1.1" class="ltx_p"><span id="S3.T2.4.11.7.6.1.1.1" class="ltx_text ltx_font_bold">0.75</span></span>
</span>
</td>
</tr>
</tbody>
</table>
</figure>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">While MAE summarizes overall model performance, in diagnostic instruments the metric may be biased by the fact that the majority of measurements tend to fall within the “normal” range. In Fig. <a href="#S3.F2" title="Figure 2 ‣ 3.1 Multi-horizon prediction ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>, we examine the calibration of TFT-multi’s prediction at the 50th percentile with the ground truth in the test set across all vitals using a Bland-Altman plot<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>. While TFT-multi appears to be well calibrated for mean BP and Pulse, we observe limited calibration for respiratory rate, SpO2, and temperature despite low MAE values.</p>
</div>
<figure id="S3.F2" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S3.F2.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2409.15586/assets/bland_BP.png" id="S3.F2.sf1.g1" class="ltx_graphics ltx_img_landscape" width="198" height="116" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S3.F2.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2409.15586/assets/bland_pulse.png" id="S3.F2.sf2.g1" class="ltx_graphics ltx_img_landscape" width="204" height="118" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S3.F2.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2409.15586/assets/bland_resp.png" id="S3.F2.sf3.g1" class="ltx_graphics ltx_img_landscape" width="198" height="114" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S3.F2.sf4" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2409.15586/assets/bland_SpO2.png" id="S3.F2.sf4.g1" class="ltx_graphics ltx_img_landscape" width="198" height="116" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.sf4.2.1.1" class="ltx_text" style="font-size:90%;">(d)</span> </span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S3.F2.sf5" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2409.15586/assets/bland_temp.png" id="S3.F2.sf5.g1" class="ltx_graphics ltx_img_landscape" width="204" height="118" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.sf5.2.1.1" class="ltx_text" style="font-size:90%;">(e)</span> </span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.4.2.1" class="ltx_text" style="font-size:90%;">Figure 2</span>: </span><span id="S3.F2.2.1" class="ltx_text" style="font-size:90%;">Bland-Altman Plots for predictions in the MIMIC test set. Each point represents an observed time point. Vertical bars represent the upper and lower prediction bound errors; solid line indicate the mean difference, dashed lines indicate the mean difference <math id="S3.F2.2.1.m1.1" class="ltx_Math" alttext="\pm 1.96" display="inline"><semantics id="S3.F2.2.1.m1.1b"><mrow id="S3.F2.2.1.m1.1.1" xref="S3.F2.2.1.m1.1.1.cmml"><mo id="S3.F2.2.1.m1.1.1b" xref="S3.F2.2.1.m1.1.1.cmml">±</mo><mn id="S3.F2.2.1.m1.1.1.2" xref="S3.F2.2.1.m1.1.1.2.cmml">1.96</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.F2.2.1.m1.1c"><apply id="S3.F2.2.1.m1.1.1.cmml" xref="S3.F2.2.1.m1.1.1"><csymbol cd="latexml" id="S3.F2.2.1.m1.1.1.1.cmml" xref="S3.F2.2.1.m1.1.1">plus-or-minus</csymbol><cn type="float" id="S3.F2.2.1.m1.1.1.2.cmml" xref="S3.F2.2.1.m1.1.1.2">1.96</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F2.2.1.m1.1d">\pm 1.96</annotation></semantics></math> times the standard deviation of differences.</span></figcaption>
</figure>
<div id="S3.SS1.p3" class="ltx_para">
<p id="S3.SS1.p3.1" class="ltx_p">In Fig. <a href="#S3.F3" title="Figure 3 ‣ 3.1 Multi-horizon prediction ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, we show a visualization of a sample output for a subject in the external validation set. For mean BP and pulse, the 50th percentile follows closely to the true values and fluctuations. In vitals with more missingness such as SpO2 and temperature, TFT-multi estimates a reasonable bound but does not track fluctuations well, which is concordant with our findings above.</p>
</div>
<figure id="S3.F3" class="ltx_figure">
<p id="S3.F3.1" class="ltx_p ltx_align_center"><span id="S3.F3.1.1" class="ltx_text"><img src="/html/2409.15586/assets/predictions.png" id="S3.F3.1.1.g1" class="ltx_graphics ltx_img_square" width="598" height="612" alt="Refer to caption"></span></p>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F3.3.1.1" class="ltx_text" style="font-size:90%;">Figure 3</span>: </span><span id="S3.F3.4.2" class="ltx_text" style="font-size:90%;">Sample prediction visualization across vitals.</span></figcaption>
</figure>
<figure id="S3.F4" class="ltx_figure">
<p id="S3.F4.1" class="ltx_p ltx_align_center"><span id="S3.F4.1.1" class="ltx_text"><img src="/html/2409.15586/assets/feature_import.png" id="S3.F4.1.1.g1" class="ltx_graphics ltx_img_landscape" width="598" height="353" alt="Refer to caption"></span></p>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F4.3.1.1" class="ltx_text" style="font-size:90%;">Figure 4</span>: </span><span id="S3.F4.4.2" class="ltx_text" style="font-size:90%;">Top features by importance in both static and time series variables. Color gradient reflects importance by weight.</span></figcaption>
</figure>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Prediction bound estimation</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">In clinical support systems, prediction bounds are sometimes more helpful than singular values, as vital measures have high interpersonal differences and a value is considered abnormal only if it falls outside a range. Therefore, we perform an additional analysis to better understand model performances in predicting upper and lower bounds. For each subject in both validation sets, we calculate the percentage of times a true value is within prediction bounds. For Prophet, we use y_hat_upper and y_hat_lower as bounds, which capture uncertainty in trend, seasonality and observation noise in the prediction<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>. For TFT<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite> and TFT-multi, we use the 10th and 90th quantile predictions. Since VAR<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite> does not offer any bound, it is excluded in this analysis. In Fig. <a href="#S3.F5.sf1" title="In Figure 5 ‣ 3.2 Prediction bound estimation ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5(a)</span></a>, we show the percentage distribution over the test set for all 5 vital signs in a violin plot and the first, second and third quartile values as lines within each plot. Across all vitals, TFT-multi correctly bounds the most number of points within the entire trajectory. Consistent with the Bland-Altman analysis (Fig. <a href="#S3.F2" title="Figure 2 ‣ 3.1 Multi-horizon prediction ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>), our findings suggest that for values that have high missingness such as SpO2, calculation using only real values may not be the best as there are few values. In Fig. <a href="#S3.F5.sf2" title="In Figure 5 ‣ 3.2 Prediction bound estimation ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5(b)</span></a>, we show results for the external set, where performance across methods have decreased as expected, but TFT-multi still remains the top performing method.</p>
</div>
<figure id="S3.F5" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S3.F5.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2409.15586/assets/percent_bound.png" id="S3.F5.sf1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="479" height="223" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S3.F5.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S3.F5.sf1.3.2" class="ltx_text" style="font-size:90%;"> </span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S3.F5.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2409.15586/assets/percent_bound_MIMIC.png" id="S3.F5.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="479" height="221" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S3.F5.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S3.F5.sf2.3.2" class="ltx_text" style="font-size:90%;"> </span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S3.F5.2.1.1" class="ltx_text" style="font-size:90%;">Figure 5</span>: </span><span id="S3.F5.3.2" class="ltx_text" style="font-size:90%;">Violin plot comparing percentage of true trajectory within the estimated bounds across 5 vitals. Results for held-out MIMIC test set in (a), and external validation set in (b).</span></figcaption>
</figure>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Feature importance</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.1" class="ltx_p">We conducted a feature importance test, as proposed in the original TFT paper<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>, by aggregating the multi-head attention weights for each input feature to see which input had the most influence over the predictions. We show the top features by weight for both the time series and static inputs in Fig. <a href="#S3.F4" title="Figure 4 ‣ 3.1 Multi-horizon prediction ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>. For time series inputs, medication has the most influence over vital predictions. This aligns with our expectation, as pressors should influence blood pressure significantly within a relative short period of time. Among static variables, comorbidities such as heart failure, arterial fibrillation and chronic obstructive pulmonary disease have the most effects over vital signs. We note here the feature importance is reported across all patients and time points, which may not be informative on a subject level and is a shortcoming of this analysis. For each subject, the factor that affects their prediction may be different and will be included in future analysis.</p>
</div>
</section>
<section id="S3.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Treatment response forecasting</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p id="S3.SS4.p1.2" class="ltx_p">For patients who received pressor administrations within the course of their ICU care, we forecasted three trajectories: (1) assuming the true administration; (2) assuming continuous administration (all 1’s); and (3) assuming no administration (all 0’s). First, we calculate a MAE for real points between these scenarios and report the results: 7.44 when the ground truth pattern is used, 7.47 when setting pressor administration to 1, and 7.46 when setting pressor administration to 0. As expected, the actual medication input pattern produces predictions most closely fit with observation than setting the medication to all 1s or 0s. Second, we applied t-tests to test that the modeled effect of pressor administration was consistent with its intended effect. We present our t-test results in Table <a href="#S3.T3" title="Table 3 ‣ 3.4 Treatment response forecasting ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, where for <math id="S3.SS4.p1.1.m1.1" class="ltx_Math" alttext="\hat{y}" display="inline"><semantics id="S3.SS4.p1.1.m1.1a"><mover accent="true" id="S3.SS4.p1.1.m1.1.1" xref="S3.SS4.p1.1.m1.1.1.cmml"><mi id="S3.SS4.p1.1.m1.1.1.2" xref="S3.SS4.p1.1.m1.1.1.2.cmml">y</mi><mo id="S3.SS4.p1.1.m1.1.1.1" xref="S3.SS4.p1.1.m1.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.1.m1.1b"><apply id="S3.SS4.p1.1.m1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1"><ci id="S3.SS4.p1.1.m1.1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1.1">^</ci><ci id="S3.SS4.p1.1.m1.1.1.2.cmml" xref="S3.SS4.p1.1.m1.1.1.2">𝑦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.1.m1.1c">\hat{y}</annotation></semantics></math> we use the 50th percentile prediction. We perform 3 comparison tests, the first in which we compare the mean trajectory prediction between the two hypothetical scenarios without considering the ground truth. In row 1, we see an average increase of 3.67 in blood pressure when assuming some medication is administered. The second and third comparisons take real observations into account and test for predicted differences between scenarios for time points that have a ground truth observation (obs) of 1 or 0. When the ground truth observation is no medication (obs=0), hypothetically modeling pressor administration predicts a value 3.12 higher than the alternative. When the patient was given medication in real life, the difference is 2.19. In all three scenarios, the p-values are significant (<math id="S3.SS4.p1.2.m2.1" class="ltx_Math" alttext="&lt;0.05" display="inline"><semantics id="S3.SS4.p1.2.m2.1a"><mrow id="S3.SS4.p1.2.m2.1.1" xref="S3.SS4.p1.2.m2.1.1.cmml"><mi id="S3.SS4.p1.2.m2.1.1.2" xref="S3.SS4.p1.2.m2.1.1.2.cmml"></mi><mo id="S3.SS4.p1.2.m2.1.1.1" xref="S3.SS4.p1.2.m2.1.1.1.cmml">&lt;</mo><mn id="S3.SS4.p1.2.m2.1.1.3" xref="S3.SS4.p1.2.m2.1.1.3.cmml">0.05</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.2.m2.1b"><apply id="S3.SS4.p1.2.m2.1.1.cmml" xref="S3.SS4.p1.2.m2.1.1"><lt id="S3.SS4.p1.2.m2.1.1.1.cmml" xref="S3.SS4.p1.2.m2.1.1.1"></lt><csymbol cd="latexml" id="S3.SS4.p1.2.m2.1.1.2.cmml" xref="S3.SS4.p1.2.m2.1.1.2">absent</csymbol><cn type="float" id="S3.SS4.p1.2.m2.1.1.3.cmml" xref="S3.SS4.p1.2.m2.1.1.3">0.05</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.2.m2.1c">&lt;0.05</annotation></semantics></math>) to reject the null hypothesis and could indicate that our model is learning the association between increased BP and pressor administration.</p>
</div>
<figure id="S3.T3" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table"><span id="S3.T3.8.1.1" class="ltx_text" style="font-size:90%;">Table 3</span>: </span><span id="S3.T3.9.2" class="ltx_text" style="font-size:90%;">T-TEST TRAJECTORY COMPARISON FOR MEAN BP</span></figcaption>
<table id="S3.T3.6" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S3.T3.6.7.1" class="ltx_tr">
<th id="S3.T3.6.7.1.1" class="ltx_td ltx_align_justify ltx_align_middle ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t" style="width:156.5pt;">
<span id="S3.T3.6.7.1.1.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.6.7.1.1.1.1" class="ltx_p">Hypothesis</span>
</span>
</th>
<th id="S3.T3.6.7.1.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_th ltx_th_column ltx_border_r ltx_border_t" style="width:22.8pt;">
<span id="S3.T3.6.7.1.2.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.6.7.1.2.1.1" class="ltx_p">Statistic</span>
</span>
</th>
<th id="S3.T3.6.7.1.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_th ltx_th_column ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T3.6.7.1.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.6.7.1.3.1.1" class="ltx_p">P-value</span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S3.T3.2.2" class="ltx_tr">
<td id="S3.T3.2.2.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:156.5pt;">
<span id="S3.T3.2.2.2.2" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.2.2.2.2.2" class="ltx_p">mean(<math id="S3.T3.1.1.1.1.1.m1.1" class="ltx_math_unparsed" alttext="\hat{y}|" display="inline"><semantics id="S3.T3.1.1.1.1.1.m1.1a"><mrow id="S3.T3.1.1.1.1.1.m1.1b"><mover accent="true" id="S3.T3.1.1.1.1.1.m1.1.1"><mi id="S3.T3.1.1.1.1.1.m1.1.1.2">y</mi><mo id="S3.T3.1.1.1.1.1.m1.1.1.1">^</mo></mover><mo fence="false" stretchy="false" id="S3.T3.1.1.1.1.1.m1.1.2">|</mo></mrow><annotation encoding="application/x-tex" id="S3.T3.1.1.1.1.1.m1.1c">\hat{y}|</annotation></semantics></math>medication=1) - mean(<math id="S3.T3.2.2.2.2.2.m2.1" class="ltx_math_unparsed" alttext="\hat{y}|" display="inline"><semantics id="S3.T3.2.2.2.2.2.m2.1a"><mrow id="S3.T3.2.2.2.2.2.m2.1b"><mover accent="true" id="S3.T3.2.2.2.2.2.m2.1.1"><mi id="S3.T3.2.2.2.2.2.m2.1.1.2">y</mi><mo id="S3.T3.2.2.2.2.2.m2.1.1.1">^</mo></mover><mo fence="false" stretchy="false" id="S3.T3.2.2.2.2.2.m2.1.2">|</mo></mrow><annotation encoding="application/x-tex" id="S3.T3.2.2.2.2.2.m2.1c">\hat{y}|</annotation></semantics></math>medication=0) = 0</span>
</span>
</td>
<td id="S3.T3.2.2.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:22.8pt;">
<span id="S3.T3.2.2.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.2.2.3.1.1" class="ltx_p">3.67</span>
</span>
</td>
<td id="S3.T3.2.2.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T3.2.2.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.2.2.4.1.1" class="ltx_p">2e-4</span>
</span>
</td>
</tr>
<tr id="S3.T3.4.4" class="ltx_tr">
<td id="S3.T3.4.4.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_l ltx_border_r ltx_border_t" style="width:156.5pt;">
<span id="S3.T3.4.4.2.2" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.4.4.2.2.2" class="ltx_p">mean(<math id="S3.T3.3.3.1.1.1.m1.1" class="ltx_math_unparsed" alttext="\hat{y}|" display="inline"><semantics id="S3.T3.3.3.1.1.1.m1.1a"><mrow id="S3.T3.3.3.1.1.1.m1.1b"><mover accent="true" id="S3.T3.3.3.1.1.1.m1.1.1"><mi id="S3.T3.3.3.1.1.1.m1.1.1.2">y</mi><mo id="S3.T3.3.3.1.1.1.m1.1.1.1">^</mo></mover><mo fence="false" stretchy="false" id="S3.T3.3.3.1.1.1.m1.1.2">|</mo></mrow><annotation encoding="application/x-tex" id="S3.T3.3.3.1.1.1.m1.1c">\hat{y}|</annotation></semantics></math>medication=1, obs=1) - mean(<math id="S3.T3.4.4.2.2.2.m2.1" class="ltx_math_unparsed" alttext="\hat{y}|" display="inline"><semantics id="S3.T3.4.4.2.2.2.m2.1a"><mrow id="S3.T3.4.4.2.2.2.m2.1b"><mover accent="true" id="S3.T3.4.4.2.2.2.m2.1.1"><mi id="S3.T3.4.4.2.2.2.m2.1.1.2">y</mi><mo id="S3.T3.4.4.2.2.2.m2.1.1.1">^</mo></mover><mo fence="false" stretchy="false" id="S3.T3.4.4.2.2.2.m2.1.2">|</mo></mrow><annotation encoding="application/x-tex" id="S3.T3.4.4.2.2.2.m2.1c">\hat{y}|</annotation></semantics></math>medication=0, obs=1) = 0</span>
</span>
</td>
<td id="S3.T3.4.4.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:22.8pt;">
<span id="S3.T3.4.4.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.4.4.3.1.1" class="ltx_p">3.12</span>
</span>
</td>
<td id="S3.T3.4.4.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T3.4.4.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.4.4.4.1.1" class="ltx_p">1e-3</span>
</span>
</td>
</tr>
<tr id="S3.T3.6.6" class="ltx_tr">
<td id="S3.T3.6.6.2" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_l ltx_border_r ltx_border_t" style="width:156.5pt;">
<span id="S3.T3.6.6.2.2" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.6.6.2.2.2" class="ltx_p">mean(<math id="S3.T3.5.5.1.1.1.m1.1" class="ltx_math_unparsed" alttext="\hat{y}|" display="inline"><semantics id="S3.T3.5.5.1.1.1.m1.1a"><mrow id="S3.T3.5.5.1.1.1.m1.1b"><mover accent="true" id="S3.T3.5.5.1.1.1.m1.1.1"><mi id="S3.T3.5.5.1.1.1.m1.1.1.2">y</mi><mo id="S3.T3.5.5.1.1.1.m1.1.1.1">^</mo></mover><mo fence="false" stretchy="false" id="S3.T3.5.5.1.1.1.m1.1.2">|</mo></mrow><annotation encoding="application/x-tex" id="S3.T3.5.5.1.1.1.m1.1c">\hat{y}|</annotation></semantics></math>medication=1, obs=0) - mean(<math id="S3.T3.6.6.2.2.2.m2.1" class="ltx_math_unparsed" alttext="\hat{y}|" display="inline"><semantics id="S3.T3.6.6.2.2.2.m2.1a"><mrow id="S3.T3.6.6.2.2.2.m2.1b"><mover accent="true" id="S3.T3.6.6.2.2.2.m2.1.1"><mi id="S3.T3.6.6.2.2.2.m2.1.1.2">y</mi><mo id="S3.T3.6.6.2.2.2.m2.1.1.1">^</mo></mover><mo fence="false" stretchy="false" id="S3.T3.6.6.2.2.2.m2.1.2">|</mo></mrow><annotation encoding="application/x-tex" id="S3.T3.6.6.2.2.2.m2.1c">\hat{y}|</annotation></semantics></math>medication=0, obs=0) = 0</span>
</span>
</td>
<td id="S3.T3.6.6.3" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:22.8pt;">
<span id="S3.T3.6.6.3.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.6.6.3.1.1" class="ltx_p">2.19</span>
</span>
</td>
<td id="S3.T3.6.6.4" class="ltx_td ltx_align_justify ltx_align_middle ltx_border_b ltx_border_r ltx_border_t" style="width:25.6pt;">
<span id="S3.T3.6.6.4.1" class="ltx_inline-block ltx_align_top">
<span id="S3.T3.6.6.4.1.1" class="ltx_p">0.028</span>
</span>
</td>
</tr>
</tbody>
</table>
</figure>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Discussion</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">In this work, we extend TFT, a multi-horizon time series prediction tool, from univariate to multivariate and develop a novel end-to-end pipeline to simultaneously predict 5 vital signs for patients in the ICU. We compare our method against state-of-the-art methods and show our model performs the best across vital signs in both the test set and external validation set. While the original TFT may have a difficult time predicting variable trajectories with high missingness such as SpO2 by itself, TFT-multi uses its relation with other vitals such as pulse to improve prediction. Though we observed limited calibration of our model in predicting respiratory rate, SpO2 and temperature, we hypothesize a contributing factor to be due to the data itself. Respiratory rate has a lower sampling rate and may not provide enough data for the model to fully learn its pattern (as observed in Fig. <a href="#S3.F2.sf3" title="In Figure 2 ‣ 3.1 Multi-horizon prediction ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(c)</span></a>); SpO2 and temperature have a limited range of observations in our training data, as observed in Fig. <a href="#S3.F2.sf4" title="In Figure 2 ‣ 3.1 Multi-horizon prediction ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(d)</span></a> and <a href="#S3.F2.sf5" title="In Figure 2 ‣ 3.1 Multi-horizon prediction ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(e)</span></a>. In addition, we demonstrate a use case of our pipeline for treatment effect estimations, which can be extended into a counterfactual estimation tool.</p>
</div>
<div id="S4.p2" class="ltx_para">
<p id="S4.p2.1" class="ltx_p">Next, we discuss some limitations and future directions of this work. First, the model assumes at least 18 hours of past data is known before making future predictions, which can be limiting. While padding past observations with 0 can be a naive approach to the problem, a more flexible training regime can be incorporated to handle varying input lengths. Second, interpretability in AI models has been a long-standing issue<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite>. While we try to interpret the model in Section <a href="#S3.SS3" title="3.3 Feature importance ‣ 3 Results ‣ TFT-multi: simultaneous forecasting of vital sign trajectories in the ICU" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.3</span></a>, further work can be done to analyze feature importance on a subject-level. Lastly, in our proof-of-concept medication analysis, we assumed a binary administration of pressors while in reality medications are given intermittently and at varying doses. Future work will include modeling these medications inputs with more variability to test performance in a more realistic setting.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Clinical application</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p">Our pipeline has the potential to be incorporated into clinical practice in several ways. First, it can be extended into a real time early warning system, which can assist clinicians in monitoring ICU patients and predict anomalous events up to 6 hours prior. Second, the model can be further extended to include other data modalities including medical images and text data, which are highly complex and often serial in nature. Another future direction for this work is to extend it to the outpatient cohort, which is more representative of the population but has large amounts of missing in time series data. A model to first impute irregularly sampled time series data can be added in the pipeline to address this issue and predicts longer range trajectories in the outpatient cohort, benefiting a larger population.</p>
</div>
</section>
</section>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">Reference</h2>

</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
B. J. Miriovsky, L. N. Shulman, and A. P. Abernethy, “Importance of health information technology, electronic health records, and continuously aggregating data to comparative effectiveness research and learning health care,” <em id="bib.bib1.1.1" class="ltx_emph ltx_font_italic">Journal of Clinical Oncology</em>, vol. 30, no. 34, pp. 4243–4248, 2012.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
T. Ruan, L. Lei, Y. Zhou, J. Zhai, L. Zhang, P. He, and J. Gao, “Representation learning for clinical time series prediction tasks in electronic health records,” <em id="bib.bib2.1.1" class="ltx_emph ltx_font_italic">BMC medical informatics and decision making</em>, vol. 19, pp. 1–14, 2019.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
C. Ye, O. Wang, M. Liu, L. Zheng, M. Xia, S. Hao, B. Jin, H. Jin, C. Zhu, C. J. Huang <em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “A real-time early warning system for monitoring inpatient mortality risk: prospective study using electronic medical record data,” <em id="bib.bib3.2.2" class="ltx_emph ltx_font_italic">Journal of medical Internet research</em>, vol. 21, no. 7, p. e13719, 2019.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
L. Zheng, O. Wang, S. Hao, C. Ye, M. Liu, M. Xia, A. N. Sabo, L. Markovic, F. Stearns, L. Kanov <em id="bib.bib4.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Development of an early-warning system for high-risk patients for suicide attempt using deep learning and electronic health records,” <em id="bib.bib4.2.2" class="ltx_emph ltx_font_italic">Translational psychiatry</em>, vol. 10, no. 1, p. 72, 2020.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Z. Jawadi, R. He, P. K. Srivastava, G. C. Fonarow, S. O. Khalil, S. Krishnan, E. Eskin, J. N. Chiang, and A. Nsair, “Predicting in-hospital mortality among patients admitted with a diagnosis of heart failure: a machine learning approach,” <em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">ESC Heart Failure</em>, 2024.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
P. Chen, W. Dong, X. Lu, U. Kaymak, K. He, and Z. Huang, “Deep representation learning for individualized treatment effect estimation using electronic health records,” <em id="bib.bib6.1.1" class="ltx_emph ltx_font_italic">Journal of biomedical informatics</em>, vol. 100, p. 103303, 2019.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
D. Cheng, A. N. Ananthakrishnan, and T. Cai, “Robust and efficient semi-supervised estimation of average treatment effects with application to electronic health records data,” <em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">Biometrics</em>, vol. 77, no. 2, pp. 413–423, 2021.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
S. Takahashi, Y. Chen, and K. Tanaka-Ishii, “Modeling financial time-series with generative adversarial networks,” <em id="bib.bib8.1.1" class="ltx_emph ltx_font_italic">Physica A: Statistical Mechanics and its Applications</em>, vol. 527, p. 121261, 2019.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
M. Vuletić, F. Prenzel, and M. Cucuringu, “Fin-gan: Forecasting and classifying financial time series via generative adversarial networks,” <em id="bib.bib9.1.1" class="ltx_emph ltx_font_italic">Quantitative Finance</em>, pp. 1–25, 2024.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Y. Gao, S. Miyata, and Y. Akashi, “Multi-step solar irradiation prediction based on weather forecast and generative deep learning model,” <em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">Renewable Energy</em>, vol. 188, pp. 637–650, 2022.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
X. Huang, Q. Li, Y. Tai, Z. Chen, J. Liu, J. Shi, and W. Liu, “Time series forecasting for hourly photovoltaic power using conditional generative adversarial network and bi-lstm,” <em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">Energy</em>, vol. 246, p. 123403, 2022.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
A. Allam, S. Feuerriegel, M. Rebhan, and M. Krauthammer, “Analyzing patient trajectories with artificial intelligence,” <em id="bib.bib12.1.1" class="ltx_emph ltx_font_italic">Journal of medical internet research</em>, vol. 23, no. 12, p. e29812, 2021.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
T. Pham, T. Tran, D. Phung, and S. Venkatesh, “Predicting healthcare trajectories from medical records: A deep learning approach,” <em id="bib.bib13.1.1" class="ltx_emph ltx_font_italic">Journal of biomedical informatics</em>, vol. 69, pp. 218–229, 2017.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
P. Newbold, “Arima model building and the time series analysis approach to forecasting,” <em id="bib.bib14.1.1" class="ltx_emph ltx_font_italic">Journal of forecasting</em>, vol. 2, no. 1, pp. 23–35, 1983.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
S. J. Taylor and B. Letham, “Forecasting at scale,” <em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">The American Statistician</em>, vol. 72, no. 1, pp. 37–45, 2018.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
B. Lim, S. Ö. Arık, N. Loeff, and T. Pfister, “Temporal fusion transformers for interpretable multi-horizon time series forecasting,” <em id="bib.bib16.1.1" class="ltx_emph ltx_font_italic">International Journal of Forecasting</em>, vol. 37, no. 4, pp. 1748–1764, 2021.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
U. Ahmed, J. C.-W. Lin, and G. Srivastava, “Multivariate time-series sensor vital sign forecasting of cardiovascular and chronic respiratory diseases,” <em id="bib.bib17.1.1" class="ltx_emph ltx_font_italic">Sustainable Computing: Informatics and Systems</em>, vol. 38, p. 100868, 2023.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
A. Bhatti, Y. Liu, C. Dan, B. Shen, S. Lee, Y. Kim, and J. Y. Kim, “Vital sign forecasting for sepsis patients in icus,” in <em id="bib.bib18.1.1" class="ltx_emph ltx_font_italic">2024 IEEE First International Conference on Artificial Intelligence for Medicine, Health and Care (AIMHC)</em>.   IEEE, 2024, pp. 60–63.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
E. Zivot and J. Wang, “Vector autoregressive models for multivariate time series,” <em id="bib.bib19.1.1" class="ltx_emph ltx_font_italic">Modeling financial time series with S-PLUS®</em>, pp. 385–429, 2006.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
A. Johnson, L. Bulgarelli, T. Pollard, S. Horng, L. A. Celi, and R. Mark, “Mimic-iv,” <em id="bib.bib20.1.1" class="ltx_emph ltx_font_italic">PhysioNet. Available online at: https://physionet. org/content/mimiciv/1.0/(accessed August 23, 2021)</em>, pp. 49–55, 2020.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
A. E. Johnson, L. Bulgarelli, L. Shen, A. Gayles, A. Shammout, S. Horng, T. J. Pollard, S. Hao, B. Moody, B. Gow <em id="bib.bib21.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Mimic-iv, a freely accessible electronic health record dataset,” <em id="bib.bib21.2.2" class="ltx_emph ltx_font_italic">Scientific data</em>, vol. 10, no. 1, p. 1, 2023.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
A. Vaswani, N. Shazeer, N. Parmar, J. Uszkoreit, L. Jones, A. N. Gomez, Ł. Kaiser, and I. Polosukhin, “Attention is all you need,” <em id="bib.bib22.1.1" class="ltx_emph ltx_font_italic">Advances in neural information processing systems</em>, vol. 30, 2017.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
D. P. Kingma and J. Ba, “Adam: A method for stochastic optimization,” <em id="bib.bib23.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1412.6980</em>, 2014.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
M. Stampfl and P. DeBlieux, “A clinical review of vasopressors in emergency medicine,” <em id="bib.bib24.1.1" class="ltx_emph ltx_font_italic">The Journal of Emergency Medicine</em>, 2024.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
A. Shojaie and E. B. Fox, “Granger causality: A review and recent advances,” <em id="bib.bib25.1.1" class="ltx_emph ltx_font_italic">Annual Review of Statistics and Its Application</em>, vol. 9, pp. 289–319, 2022.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
D. G. Altman and J. M. Bland, “Measurement in medicine: the analysis of method comparison studies,” <em id="bib.bib26.1.1" class="ltx_emph ltx_font_italic">Journal of the Royal Statistical Society Series D: The Statistician</em>, vol. 32, no. 3, pp. 307–317, 1983.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
D. Giavarina, “Understanding bland altman analysis,” <em id="bib.bib27.1.1" class="ltx_emph ltx_font_italic">Biochemia medica</em>, vol. 25, no. 2, pp. 141–151, 2015.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
J. Amann, A. Blasimme, E. Vayena, D. Frey, V. I. Madai, and P. Consortium, “Explainability for artificial intelligence in healthcare: a multidisciplinary perspective,” <em id="bib.bib28.1.1" class="ltx_emph ltx_font_italic">BMC medical informatics and decision making</em>, vol. 20, pp. 1–9, 2020.

</span>
</li>
</ul>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2409.15585" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2409.15586" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2409.15586">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2409.15586" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2409.15587" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Sun Oct  6 01:49:22 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
