<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2408.12733] SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging</title><meta property="og:description" content="Text-to-SQL systems, which convert natural language queries into SQL commands, have seen significant progress primarily for the SQLite dialect. However, adapting these systems to other SQL dialects like BigQuery and Po…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2408.12733">

<!--Generated on Thu Sep  5 13:43:32 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on September 5, 2024.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line" lang="en">
<h1 class="ltx_title ltx_title_document">
<span id="id1.id1" class="ltx_text ltx_font_bold">SQL-GEN</span>: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Mohammadreza Pourreza, Ruoxi Sun, Hailong Li,
<br class="ltx_break">Lesly Miculicich, Tomas Pfister, Sercan Ö. Arik

<br class="ltx_break">Google Cloud AI

<br class="ltx_break"><span id="id2.1.id1" class="ltx_text ltx_font_typewriter">{pourreza,ruoxis,hailongli,lmiculicich,tpfister, soarik}@google.com</span>
</span></span>
</div>
<div class="ltx_dates">(<span id="id3.id1" class="ltx_text">September 5, 2024</span>)</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id4.id1" class="ltx_p"><span id="id4.id1.1" class="ltx_text">Text-to-SQL systems, which convert natural language queries into SQL commands, have seen significant progress primarily for the SQLite dialect. However, adapting these systems to other SQL dialects like BigQuery and PostgreSQL remains a challenge due to the diversity in SQL syntax and functions. We introduce SQL-GEN, a framework for generating high-quality dialect-specific synthetic data guided by dialect-specific tutorials, and demonstrate its effectiveness in creating training datasets for multiple dialects. Our approach significantly improves performance, by up to 20%, over previous methods and reduces the gap with large-scale human-annotated datasets. Moreover, combining our synthetic data with human-annotated data provides additional performance boosts of 3.3% to 5.6%. We also introduce a novel Mixture of Experts (MoE) initialization method that integrates dialect-specific models into a unified system by merging self-attention layers and initializing the gates with dialect-specific keywords, further enhancing performance across different SQL dialects.</span></p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Text-to-SQL systems translate natural language questions into executable SQL queries, enabling users to interact with databases using natural language. This transformation is crucial as it links the intuitive nature of human communication with the structured precision of SQL, the standard language for querying databases <cite class="ltx_cite ltx_citemacro_citep">(Androutsopoulos et al., <a href="#bib.bib3" title="" class="ltx_ref">1995</a>; Hristidis et al., <a href="#bib.bib16" title="" class="ltx_ref">2003</a>; Li &amp; Jagadish, <a href="#bib.bib20" title="" class="ltx_ref">2014</a>)</cite>.
Text-to-SQL plays a significant role for conversational agents, empowering them to process complex queries within large-scale databases efficiently <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib50" title="" class="ltx_ref">2019</a>; Gu et al., <a href="#bib.bib13" title="" class="ltx_ref">2022</a>; Pérez-Mercado et al., <a href="#bib.bib28" title="" class="ltx_ref">2023</a>)</cite>.
Such systems serve as a copilot for data science professionals to enhance productivity, beyond being valuable for non-technical users who wish to derive business insights without SQL expertise <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a href="#bib.bib21" title="" class="ltx_ref">2023</a>; Sun et al., <a href="#bib.bib34" title="" class="ltx_ref">2023a</a>, <a href="#bib.bib35" title="" class="ltx_ref">b</a>; Wang et al., <a href="#bib.bib38" title="" class="ltx_ref">2019</a>)</cite>.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">SQL has been adopted by each database product (e.g. PostgreSQL, MySQL, and SQLite) to suit their specific needs. Despite their common foundations, these SQL dialects differ significantly in their syntax, functions, and capabilities, which even make the automated translation of queries across dialects a complex task that often requires human intervention <cite class="ltx_cite ltx_citemacro_citep">(Zmigrod et al., <a href="#bib.bib54" title="" class="ltx_ref">2024</a>; Ngom &amp; Kraska, <a href="#bib.bib27" title="" class="ltx_ref">2024</a>)</cite>. <a href="#S1.F1" title="In 1 Introduction ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">1</span></a> exemplifies a question that can be answered with different SQL keywords across different dialects with their own unique keywords that are distinct from one another. Additionally in <a href="#A1.SS8" title="A.8 Dialect Specific Keywords ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.8</span></a>, we provide some of the dialect specific keywords for BigQuery, PostgreSQL, and SQLite, which are not supported across all of them. In the realm of Text-to-SQL, most benchmarks are based on the SQLite dialect, chosen for its simplicity and self-contained nature <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a href="#bib.bib23" title="" class="ltx_ref">2024b</a>; Yu et al., <a href="#bib.bib49" title="" class="ltx_ref">2018b</a>; Zhong et al., <a href="#bib.bib53" title="" class="ltx_ref">2017</a>; Chang et al., <a href="#bib.bib7" title="" class="ltx_ref">2023</a>; Gan et al., <a href="#bib.bib11" title="" class="ltx_ref">2021</a>)</cite>. However, queries tailored to one dialect often fail in another – for instance as reported in <cite class="ltx_cite ltx_citemacro_citet">Pourreza &amp; Rafiei (<a href="#bib.bib29" title="" class="ltx_ref">2023</a>)</cite>, 32% of the queries from the Spider development set <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib49" title="" class="ltx_ref">2018b</a>)</cite> exhibit syntax errors when executed on a PostgreSQL database. This dialect dependency poses a significant challenge, as models trained on SQLite-specific syntax are prone to generating erroneous queries in other dialects. A conventional solution involves translating queries across dialects before training, using tools like SQLglot <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a href="#bib.bib23" title="" class="ltx_ref">2024b</a>; Mao, <a href="#bib.bib25" title="" class="ltx_ref">2023</a>)</cite>. However, this approach fails to leverage the unique capabilities of each dialect, as queries originally written for SQLite may not exploit the full potential of the target dialects. To overcome this, we propose a dialect-agnostic method for generating synthetic Text-to-SQL pairs for any database.</p>
</div>
<figure id="S1.F1" class="ltx_figure"><img src="/html/2408.12733/assets/figures/dialect_specific_queries.png" id="S1.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="509" height="135" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span><span id="S1.F1.2.1" class="ltx_text" style="font-size:90%;">Exemplification of a question being answered using different SQL keywords for different dialects, BigQuery, PostgreSQL,and SQLite.</span></figcaption>
</figure>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">SQL-GEN consists of a three-step pipeline. Initially, we begin with a small collection of seed SQL templates. These retain only the SQL keywords, abstracting away the specific database schema and values. Accompanying these templates, we provide dialect-specific tutorials that explain the usage of each SQL keyword across different dialects.
In the first stage of our pipeline, we leverage a Large Language Model (LLM) to expand the seed templates, using the tutorials to adapt the keywords and function to various SQL dialects. In the second stage, these database-independent templates are populated with actual values and schema elements from any given database. The final stage involves a rigorous quality checks to ensure that the generated pairs accurately match each other.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.3" class="ltx_p">We perform comprehensive evaluations on the effectiveness of SQL-GEN. We assess the quality of synthetic samples by comparing them against both prior synthetic and human-annotated datasets. We construct synthetic datasets for three dialects and evaluate various LLMs (of sizes 7B-22B), trained on these pairs as well as other baselines. We show that all LLMs trained on our synthetic data exhibit a performance increase ranging from 4% to 27%, surpassing those trained on earlier synthetic and human-annotated data. In addition, for under-explored dialects of PostgreSQL and BigQuery, we did our evaluations on real-world data, specifically designed for PostgreSQL and BigQuery, models trained on our synthetic data consistently outperform others by a large margin, <math id="S1.p4.1.m1.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S1.p4.1.m1.1a"><mo id="S1.p4.1.m1.1.1" xref="S1.p4.1.m1.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S1.p4.1.m1.1b"><csymbol cd="latexml" id="S1.p4.1.m1.1.1.cmml" xref="S1.p4.1.m1.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.1.m1.1c">\sim</annotation></semantics></math>7.5% for BigQuery and <math id="S1.p4.2.m2.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S1.p4.2.m2.1a"><mo id="S1.p4.2.m2.1.1" xref="S1.p4.2.m2.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S1.p4.2.m2.1b"><csymbol cd="latexml" id="S1.p4.2.m2.1.1.cmml" xref="S1.p4.2.m2.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.2.m2.1c">\sim</annotation></semantics></math>2.5% for PostgreSQL. We also explore data augmentation for cross-domain Text-to-SQL scenario as another application of synthetic queries.
By integrating synthetic queries with training samples from other databases, we enhance the model’s ability to adapt across domains.
We test our proposed data augmentation method using the BIRD development set by combining synthetic and training data, aiming to improve performance on the target databases. We show consistent performance improvements of up to <math id="S1.p4.3.m3.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S1.p4.3.m3.1a"><mo id="S1.p4.3.m3.1.1" xref="S1.p4.3.m3.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S1.p4.3.m3.1b"><csymbol cd="latexml" id="S1.p4.3.m3.1.1.cmml" xref="S1.p4.3.m3.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.3.m3.1c">\sim</annotation></semantics></math>5.7% when fine-tuning on the augmented dataset.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">As noted earlier, each SQL dialect has distinct keywords and functions, rendering a model trained on a specific dialect uniquely specialized. However, a significant challenge arises when Text-to-SQL system users manage databases across multiple dialects, as deploying multiple dialect-specific models is computationally demanding. To overcome this, we introduced a novel method utilizing the Mixture of Experts (MoE) architecture <cite class="ltx_cite ltx_citemacro_citep">(Fedus et al., <a href="#bib.bib10" title="" class="ltx_ref">2022b</a>; Riquelme et al., <a href="#bib.bib31" title="" class="ltx_ref">2021</a>; Jiang et al., <a href="#bib.bib19" title="" class="ltx_ref">2024</a>)</cite>, compared this approach with existing techniques for merging models. Our method initializes the MLP layers of the MoE model using the MLP layers of the dialect-expert models, while the self-attention sub-layers are initialized using a two-by-two Spherical Linear Interpolation (SLERP) of self-attentions from the dialect experts. Additionally, to harness dialect-specific expertise effectively, we initialize the routers with hidden states corresponding to dialect-specific keywords.
Our method demonstrated an improvement of approximately 2.5% in average performance over common model merging strategies and showed superior performance in SQLite and BigQuery dialects, outperforming the expert models by 0.68% and 7.25%, respectively. It also exceeded the performance of a MoE model initialized without our dialect-aware model merging, trained for the same number of steps.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Methodology</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">In this section, we first introduce the SQL-GEN pipeline, designed to generate high-quality, dialect-specific Text-to-SQL samples, as illustrated in <a href="#S2.F2" title="In 2 Methodology ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">2</span></a> and detailed in <a href="#alg1" title="In 2 Methodology ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Algorithm</span> <span class="ltx_text ltx_ref_tag">1</span></a>. The generation of multi-dialect Text-to-SQL synthetic data addresses the critical issue of insufficient high-quality data for training models tailored to specific SQL dialects. However, since users of Text-to-SQL systems often work with databases across various dialects, serving models in a multi-dialect environment presents a unique challenge. Additionally, many SQL dialects adhere to standard SQL and share common syntaxes, making the concept of information sharing particularly compelling. To address these challenges, we propose a model merging method that combines dialect-specific models into a single, unified MoE model capable of serving multiple SQL dialects effectively.</p>
</div>
<figure id="alg1" class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top">
<div id="alg1.1" class="ltx_inline-block ltx_transformed_outer" style="width:610.9pt;height:142.2pt;vertical-align:-67.6pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<figure id="alg1.1.fig1" class="ltx_figure ltx_minipage ltx_align_middle" style="width:433.6pt;">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="alg1.1.fig1.2.1.1" class="ltx_text ltx_font_bold">Algorithm 1</span> </span> <span id="alg1.1.fig1.3.2" class="ltx_text" style="font-size:90%;">SQL-GEN: Dialect-Specific Synthetic Question-SQL Pair Generation.</span></figcaption>
<div id="alg1.1.fig1.4" class="ltx_listing ltx_listing">
<div id="alg1.l1" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l1.13.1.1" class="ltx_text" style="font-size:80%;">1:</span></span><span id="alg1.l1.12" class="ltx_text" style="font-size:90%;">set of target databases <math id="alg1.l1.1.m1.1" class="ltx_Math" alttext="D" display="inline"><semantics id="alg1.l1.1.m1.1a"><mi id="alg1.l1.1.m1.1.1" xref="alg1.l1.1.m1.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.1.m1.1b"><ci id="alg1.l1.1.m1.1.1.cmml" xref="alg1.l1.1.m1.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.1.m1.1c">D</annotation></semantics></math>, set of dialect-specific tutorials for each SQL keyword <math id="alg1.l1.2.m2.1" class="ltx_Math" alttext="T" display="inline"><semantics id="alg1.l1.2.m2.1a"><mi id="alg1.l1.2.m2.1.1" xref="alg1.l1.2.m2.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.2.m2.1b"><ci id="alg1.l1.2.m2.1.1.cmml" xref="alg1.l1.2.m2.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.2.m2.1c">T</annotation></semantics></math>, LLM <math id="alg1.l1.3.m3.1" class="ltx_Math" alttext="M_{1}" display="inline"><semantics id="alg1.l1.3.m3.1a"><msub id="alg1.l1.3.m3.1.1" xref="alg1.l1.3.m3.1.1.cmml"><mi id="alg1.l1.3.m3.1.1.2" xref="alg1.l1.3.m3.1.1.2.cmml">M</mi><mn id="alg1.l1.3.m3.1.1.3" xref="alg1.l1.3.m3.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="alg1.l1.3.m3.1b"><apply id="alg1.l1.3.m3.1.1.cmml" xref="alg1.l1.3.m3.1.1"><csymbol cd="ambiguous" id="alg1.l1.3.m3.1.1.1.cmml" xref="alg1.l1.3.m3.1.1">subscript</csymbol><ci id="alg1.l1.3.m3.1.1.2.cmml" xref="alg1.l1.3.m3.1.1.2">𝑀</ci><cn type="integer" id="alg1.l1.3.m3.1.1.3.cmml" xref="alg1.l1.3.m3.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.3.m3.1c">M_{1}</annotation></semantics></math>, quality assurance LLM <math id="alg1.l1.4.m4.1" class="ltx_Math" alttext="M_{2}" display="inline"><semantics id="alg1.l1.4.m4.1a"><msub id="alg1.l1.4.m4.1.1" xref="alg1.l1.4.m4.1.1.cmml"><mi id="alg1.l1.4.m4.1.1.2" xref="alg1.l1.4.m4.1.1.2.cmml">M</mi><mn id="alg1.l1.4.m4.1.1.3" xref="alg1.l1.4.m4.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="alg1.l1.4.m4.1b"><apply id="alg1.l1.4.m4.1.1.cmml" xref="alg1.l1.4.m4.1.1"><csymbol cd="ambiguous" id="alg1.l1.4.m4.1.1.1.cmml" xref="alg1.l1.4.m4.1.1">subscript</csymbol><ci id="alg1.l1.4.m4.1.1.2.cmml" xref="alg1.l1.4.m4.1.1.2">𝑀</ci><cn type="integer" id="alg1.l1.4.m4.1.1.3.cmml" xref="alg1.l1.4.m4.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.4.m4.1c">M_{2}</annotation></semantics></math>, number of SQL templates threshold <math id="alg1.l1.5.m5.1" class="ltx_Math" alttext="\theta" display="inline"><semantics id="alg1.l1.5.m5.1a"><mi id="alg1.l1.5.m5.1.1" xref="alg1.l1.5.m5.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.5.m5.1b"><ci id="alg1.l1.5.m5.1.1.cmml" xref="alg1.l1.5.m5.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.5.m5.1c">\theta</annotation></semantics></math>, number of question-SQL pairs threshold <math id="alg1.l1.6.m6.1" class="ltx_Math" alttext="\beta" display="inline"><semantics id="alg1.l1.6.m6.1a"><mi id="alg1.l1.6.m6.1.1" xref="alg1.l1.6.m6.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.6.m6.1b"><ci id="alg1.l1.6.m6.1.1.cmml" xref="alg1.l1.6.m6.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.6.m6.1c">\beta</annotation></semantics></math>, template expansion prompt <math id="alg1.l1.7.m7.1" class="ltx_Math" alttext="P_{TempGen}" display="inline"><semantics id="alg1.l1.7.m7.1a"><msub id="alg1.l1.7.m7.1.1" xref="alg1.l1.7.m7.1.1.cmml"><mi id="alg1.l1.7.m7.1.1.2" xref="alg1.l1.7.m7.1.1.2.cmml">P</mi><mrow id="alg1.l1.7.m7.1.1.3" xref="alg1.l1.7.m7.1.1.3.cmml"><mi id="alg1.l1.7.m7.1.1.3.2" xref="alg1.l1.7.m7.1.1.3.2.cmml">T</mi><mo lspace="0em" rspace="0em" id="alg1.l1.7.m7.1.1.3.1" xref="alg1.l1.7.m7.1.1.3.1.cmml">​</mo><mi id="alg1.l1.7.m7.1.1.3.3" xref="alg1.l1.7.m7.1.1.3.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l1.7.m7.1.1.3.1a" xref="alg1.l1.7.m7.1.1.3.1.cmml">​</mo><mi id="alg1.l1.7.m7.1.1.3.4" xref="alg1.l1.7.m7.1.1.3.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.l1.7.m7.1.1.3.1b" xref="alg1.l1.7.m7.1.1.3.1.cmml">​</mo><mi id="alg1.l1.7.m7.1.1.3.5" xref="alg1.l1.7.m7.1.1.3.5.cmml">p</mi><mo lspace="0em" rspace="0em" id="alg1.l1.7.m7.1.1.3.1c" xref="alg1.l1.7.m7.1.1.3.1.cmml">​</mo><mi id="alg1.l1.7.m7.1.1.3.6" xref="alg1.l1.7.m7.1.1.3.6.cmml">G</mi><mo lspace="0em" rspace="0em" id="alg1.l1.7.m7.1.1.3.1d" xref="alg1.l1.7.m7.1.1.3.1.cmml">​</mo><mi id="alg1.l1.7.m7.1.1.3.7" xref="alg1.l1.7.m7.1.1.3.7.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l1.7.m7.1.1.3.1e" xref="alg1.l1.7.m7.1.1.3.1.cmml">​</mo><mi id="alg1.l1.7.m7.1.1.3.8" xref="alg1.l1.7.m7.1.1.3.8.cmml">n</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="alg1.l1.7.m7.1b"><apply id="alg1.l1.7.m7.1.1.cmml" xref="alg1.l1.7.m7.1.1"><csymbol cd="ambiguous" id="alg1.l1.7.m7.1.1.1.cmml" xref="alg1.l1.7.m7.1.1">subscript</csymbol><ci id="alg1.l1.7.m7.1.1.2.cmml" xref="alg1.l1.7.m7.1.1.2">𝑃</ci><apply id="alg1.l1.7.m7.1.1.3.cmml" xref="alg1.l1.7.m7.1.1.3"><times id="alg1.l1.7.m7.1.1.3.1.cmml" xref="alg1.l1.7.m7.1.1.3.1"></times><ci id="alg1.l1.7.m7.1.1.3.2.cmml" xref="alg1.l1.7.m7.1.1.3.2">𝑇</ci><ci id="alg1.l1.7.m7.1.1.3.3.cmml" xref="alg1.l1.7.m7.1.1.3.3">𝑒</ci><ci id="alg1.l1.7.m7.1.1.3.4.cmml" xref="alg1.l1.7.m7.1.1.3.4">𝑚</ci><ci id="alg1.l1.7.m7.1.1.3.5.cmml" xref="alg1.l1.7.m7.1.1.3.5">𝑝</ci><ci id="alg1.l1.7.m7.1.1.3.6.cmml" xref="alg1.l1.7.m7.1.1.3.6">𝐺</ci><ci id="alg1.l1.7.m7.1.1.3.7.cmml" xref="alg1.l1.7.m7.1.1.3.7">𝑒</ci><ci id="alg1.l1.7.m7.1.1.3.8.cmml" xref="alg1.l1.7.m7.1.1.3.8">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.7.m7.1c">P_{TempGen}</annotation></semantics></math> <a href="#A1.F8" title="In A.10.1 Template Expansion ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">8</span></a>, question-SQL sample generation prompt <math id="alg1.l1.8.m8.1" class="ltx_Math" alttext="P_{Gen}" display="inline"><semantics id="alg1.l1.8.m8.1a"><msub id="alg1.l1.8.m8.1.1" xref="alg1.l1.8.m8.1.1.cmml"><mi id="alg1.l1.8.m8.1.1.2" xref="alg1.l1.8.m8.1.1.2.cmml">P</mi><mrow id="alg1.l1.8.m8.1.1.3" xref="alg1.l1.8.m8.1.1.3.cmml"><mi id="alg1.l1.8.m8.1.1.3.2" xref="alg1.l1.8.m8.1.1.3.2.cmml">G</mi><mo lspace="0em" rspace="0em" id="alg1.l1.8.m8.1.1.3.1" xref="alg1.l1.8.m8.1.1.3.1.cmml">​</mo><mi id="alg1.l1.8.m8.1.1.3.3" xref="alg1.l1.8.m8.1.1.3.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l1.8.m8.1.1.3.1a" xref="alg1.l1.8.m8.1.1.3.1.cmml">​</mo><mi id="alg1.l1.8.m8.1.1.3.4" xref="alg1.l1.8.m8.1.1.3.4.cmml">n</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="alg1.l1.8.m8.1b"><apply id="alg1.l1.8.m8.1.1.cmml" xref="alg1.l1.8.m8.1.1"><csymbol cd="ambiguous" id="alg1.l1.8.m8.1.1.1.cmml" xref="alg1.l1.8.m8.1.1">subscript</csymbol><ci id="alg1.l1.8.m8.1.1.2.cmml" xref="alg1.l1.8.m8.1.1.2">𝑃</ci><apply id="alg1.l1.8.m8.1.1.3.cmml" xref="alg1.l1.8.m8.1.1.3"><times id="alg1.l1.8.m8.1.1.3.1.cmml" xref="alg1.l1.8.m8.1.1.3.1"></times><ci id="alg1.l1.8.m8.1.1.3.2.cmml" xref="alg1.l1.8.m8.1.1.3.2">𝐺</ci><ci id="alg1.l1.8.m8.1.1.3.3.cmml" xref="alg1.l1.8.m8.1.1.3.3">𝑒</ci><ci id="alg1.l1.8.m8.1.1.3.4.cmml" xref="alg1.l1.8.m8.1.1.3.4">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.8.m8.1c">P_{Gen}</annotation></semantics></math> <a href="#A1.F10" title="In A.10.2 Sample Generation ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">10</span></a>, quality assurance prompt <math id="alg1.l1.9.m9.1" class="ltx_Math" alttext="P_{Quality}" display="inline"><semantics id="alg1.l1.9.m9.1a"><msub id="alg1.l1.9.m9.1.1" xref="alg1.l1.9.m9.1.1.cmml"><mi id="alg1.l1.9.m9.1.1.2" xref="alg1.l1.9.m9.1.1.2.cmml">P</mi><mrow id="alg1.l1.9.m9.1.1.3" xref="alg1.l1.9.m9.1.1.3.cmml"><mi id="alg1.l1.9.m9.1.1.3.2" xref="alg1.l1.9.m9.1.1.3.2.cmml">Q</mi><mo lspace="0em" rspace="0em" id="alg1.l1.9.m9.1.1.3.1" xref="alg1.l1.9.m9.1.1.3.1.cmml">​</mo><mi id="alg1.l1.9.m9.1.1.3.3" xref="alg1.l1.9.m9.1.1.3.3.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l1.9.m9.1.1.3.1a" xref="alg1.l1.9.m9.1.1.3.1.cmml">​</mo><mi id="alg1.l1.9.m9.1.1.3.4" xref="alg1.l1.9.m9.1.1.3.4.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l1.9.m9.1.1.3.1b" xref="alg1.l1.9.m9.1.1.3.1.cmml">​</mo><mi id="alg1.l1.9.m9.1.1.3.5" xref="alg1.l1.9.m9.1.1.3.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l1.9.m9.1.1.3.1c" xref="alg1.l1.9.m9.1.1.3.1.cmml">​</mo><mi id="alg1.l1.9.m9.1.1.3.6" xref="alg1.l1.9.m9.1.1.3.6.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l1.9.m9.1.1.3.1d" xref="alg1.l1.9.m9.1.1.3.1.cmml">​</mo><mi id="alg1.l1.9.m9.1.1.3.7" xref="alg1.l1.9.m9.1.1.3.7.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l1.9.m9.1.1.3.1e" xref="alg1.l1.9.m9.1.1.3.1.cmml">​</mo><mi id="alg1.l1.9.m9.1.1.3.8" xref="alg1.l1.9.m9.1.1.3.8.cmml">y</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="alg1.l1.9.m9.1b"><apply id="alg1.l1.9.m9.1.1.cmml" xref="alg1.l1.9.m9.1.1"><csymbol cd="ambiguous" id="alg1.l1.9.m9.1.1.1.cmml" xref="alg1.l1.9.m9.1.1">subscript</csymbol><ci id="alg1.l1.9.m9.1.1.2.cmml" xref="alg1.l1.9.m9.1.1.2">𝑃</ci><apply id="alg1.l1.9.m9.1.1.3.cmml" xref="alg1.l1.9.m9.1.1.3"><times id="alg1.l1.9.m9.1.1.3.1.cmml" xref="alg1.l1.9.m9.1.1.3.1"></times><ci id="alg1.l1.9.m9.1.1.3.2.cmml" xref="alg1.l1.9.m9.1.1.3.2">𝑄</ci><ci id="alg1.l1.9.m9.1.1.3.3.cmml" xref="alg1.l1.9.m9.1.1.3.3">𝑢</ci><ci id="alg1.l1.9.m9.1.1.3.4.cmml" xref="alg1.l1.9.m9.1.1.3.4">𝑎</ci><ci id="alg1.l1.9.m9.1.1.3.5.cmml" xref="alg1.l1.9.m9.1.1.3.5">𝑙</ci><ci id="alg1.l1.9.m9.1.1.3.6.cmml" xref="alg1.l1.9.m9.1.1.3.6">𝑖</ci><ci id="alg1.l1.9.m9.1.1.3.7.cmml" xref="alg1.l1.9.m9.1.1.3.7">𝑡</ci><ci id="alg1.l1.9.m9.1.1.3.8.cmml" xref="alg1.l1.9.m9.1.1.3.8">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.9.m9.1c">P_{Quality}</annotation></semantics></math> <a href="#A1.F12" title="In A.10.3 Quality Check ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">12</span></a>, SQL templates parsing filter <math id="alg1.l1.10.m10.1" class="ltx_math_unparsed" alttext="Filter_{1}(.)" display="inline"><semantics id="alg1.l1.10.m10.1a"><mrow id="alg1.l1.10.m10.1b"><mi id="alg1.l1.10.m10.1.1">F</mi><mi id="alg1.l1.10.m10.1.2">i</mi><mi id="alg1.l1.10.m10.1.3">l</mi><mi id="alg1.l1.10.m10.1.4">t</mi><mi id="alg1.l1.10.m10.1.5">e</mi><msub id="alg1.l1.10.m10.1.6"><mi id="alg1.l1.10.m10.1.6.2">r</mi><mn id="alg1.l1.10.m10.1.6.3">1</mn></msub><mrow id="alg1.l1.10.m10.1.7"><mo stretchy="false" id="alg1.l1.10.m10.1.7.1">(</mo><mo lspace="0em" rspace="0.167em" id="alg1.l1.10.m10.1.7.2">.</mo><mo stretchy="false" id="alg1.l1.10.m10.1.7.3">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l1.10.m10.1c">Filter_{1}(.)</annotation></semantics></math>, question-SQL pairs heuristic-based filters <math id="alg1.l1.11.m11.1" class="ltx_math_unparsed" alttext="Filter_{2}(.)" display="inline"><semantics id="alg1.l1.11.m11.1a"><mrow id="alg1.l1.11.m11.1b"><mi id="alg1.l1.11.m11.1.1">F</mi><mi id="alg1.l1.11.m11.1.2">i</mi><mi id="alg1.l1.11.m11.1.3">l</mi><mi id="alg1.l1.11.m11.1.4">t</mi><mi id="alg1.l1.11.m11.1.5">e</mi><msub id="alg1.l1.11.m11.1.6"><mi id="alg1.l1.11.m11.1.6.2">r</mi><mn id="alg1.l1.11.m11.1.6.3">2</mn></msub><mrow id="alg1.l1.11.m11.1.7"><mo stretchy="false" id="alg1.l1.11.m11.1.7.1">(</mo><mo lspace="0em" rspace="0.167em" id="alg1.l1.11.m11.1.7.2">.</mo><mo stretchy="false" id="alg1.l1.11.m11.1.7.3">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l1.11.m11.1c">Filter_{2}(.)</annotation></semantics></math>, template extractor function <math id="alg1.l1.12.m12.1" class="ltx_math_unparsed" alttext="G(.)" display="inline"><semantics id="alg1.l1.12.m12.1a"><mrow id="alg1.l1.12.m12.1b"><mi id="alg1.l1.12.m12.1.1">G</mi><mrow id="alg1.l1.12.m12.1.2"><mo stretchy="false" id="alg1.l1.12.m12.1.2.1">(</mo><mo lspace="0em" rspace="0.167em" id="alg1.l1.12.m12.1.2.2">.</mo><mo stretchy="false" id="alg1.l1.12.m12.1.2.3">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l1.12.m12.1c">G(.)</annotation></semantics></math>
</span>
</div>
<div id="alg1.l2" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l2.1.1.1" class="ltx_text" style="font-size:80%;">2:</span></span><span id="alg1.l2.2" class="ltx_text ltx_font_bold" style="font-size:90%;">Initialization:</span><span id="alg1.l2.3" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l3" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l3.1.1.1" class="ltx_text" style="font-size:80%;">3:</span></span><math id="alg1.l3.m1.1" class="ltx_Math" alttext="S\leftarrow G(SeedQueries)" display="inline"><semantics id="alg1.l3.m1.1a"><mrow id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml"><mi mathsize="90%" id="alg1.l3.m1.1.1.3" xref="alg1.l3.m1.1.1.3.cmml">S</mi><mo mathsize="90%" stretchy="false" id="alg1.l3.m1.1.1.2" xref="alg1.l3.m1.1.1.2.cmml">←</mo><mrow id="alg1.l3.m1.1.1.1" xref="alg1.l3.m1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l3.m1.1.1.1.3" xref="alg1.l3.m1.1.1.1.3.cmml">G</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.2" xref="alg1.l3.m1.1.1.1.2.cmml">​</mo><mrow id="alg1.l3.m1.1.1.1.1.1" xref="alg1.l3.m1.1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l3.m1.1.1.1.1.1.2" xref="alg1.l3.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l3.m1.1.1.1.1.1.1" xref="alg1.l3.m1.1.1.1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.2" xref="alg1.l3.m1.1.1.1.1.1.1.2.cmml">S</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.3" xref="alg1.l3.m1.1.1.1.1.1.1.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1a" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.4" xref="alg1.l3.m1.1.1.1.1.1.1.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1b" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.5" xref="alg1.l3.m1.1.1.1.1.1.1.5.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1c" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.6" xref="alg1.l3.m1.1.1.1.1.1.1.6.cmml">Q</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1d" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.7" xref="alg1.l3.m1.1.1.1.1.1.1.7.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1e" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.8" xref="alg1.l3.m1.1.1.1.1.1.1.8.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1f" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.9" xref="alg1.l3.m1.1.1.1.1.1.1.9.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1g" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.10" xref="alg1.l3.m1.1.1.1.1.1.1.10.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1h" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.11" xref="alg1.l3.m1.1.1.1.1.1.1.11.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l3.m1.1.1.1.1.1.1.1i" xref="alg1.l3.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l3.m1.1.1.1.1.1.1.12" xref="alg1.l3.m1.1.1.1.1.1.1.12.cmml">s</mi></mrow><mo maxsize="90%" minsize="90%" id="alg1.l3.m1.1.1.1.1.1.3" xref="alg1.l3.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><apply id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1"><ci id="alg1.l3.m1.1.1.2.cmml" xref="alg1.l3.m1.1.1.2">←</ci><ci id="alg1.l3.m1.1.1.3.cmml" xref="alg1.l3.m1.1.1.3">𝑆</ci><apply id="alg1.l3.m1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1"><times id="alg1.l3.m1.1.1.1.2.cmml" xref="alg1.l3.m1.1.1.1.2"></times><ci id="alg1.l3.m1.1.1.1.3.cmml" xref="alg1.l3.m1.1.1.1.3">𝐺</ci><apply id="alg1.l3.m1.1.1.1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1.1.1"><times id="alg1.l3.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l3.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.2">𝑆</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.4">𝑒</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.5">𝑑</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.6">𝑄</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.7">𝑢</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.8">𝑒</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.9">𝑟</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.10.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.10">𝑖</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.11.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.11">𝑒</ci><ci id="alg1.l3.m1.1.1.1.1.1.1.12.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.12">𝑠</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">S\leftarrow G(SeedQueries)</annotation></semantics></math><span id="alg1.l3.2" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l3.3" class="ltx_text" style="font-size:90%;color:#0000FF;">// <span id="alg1.l3.3.1" class="ltx_text ltx_font_italic">Generate initial set of SQL templates using a set of dialect-specific seeds</span></span><span id="alg1.l3.4" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l4" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l4.1.1.1" class="ltx_text" style="font-size:80%;">4:</span></span><math id="alg1.l4.m1.1" class="ltx_Math" alttext="T\leftarrow Dialect\ Specific\ Tutorials" display="inline"><semantics id="alg1.l4.m1.1a"><mrow id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml"><mi mathsize="90%" id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml">T</mi><mo mathsize="90%" stretchy="false" id="alg1.l4.m1.1.1.1" xref="alg1.l4.m1.1.1.1.cmml">←</mo><mrow id="alg1.l4.m1.1.1.3" xref="alg1.l4.m1.1.1.3.cmml"><mi mathsize="90%" id="alg1.l4.m1.1.1.3.2" xref="alg1.l4.m1.1.1.3.2.cmml">D</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.3" xref="alg1.l4.m1.1.1.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1a" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.4" xref="alg1.l4.m1.1.1.3.4.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1b" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.5" xref="alg1.l4.m1.1.1.3.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1c" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.6" xref="alg1.l4.m1.1.1.3.6.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1d" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.7" xref="alg1.l4.m1.1.1.3.7.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1e" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.8" xref="alg1.l4.m1.1.1.3.8.cmml">t</mi><mo lspace="0.450em" rspace="0em" id="alg1.l4.m1.1.1.3.1f" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.9" xref="alg1.l4.m1.1.1.3.9.cmml">S</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1g" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.10" xref="alg1.l4.m1.1.1.3.10.cmml">p</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1h" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.11" xref="alg1.l4.m1.1.1.3.11.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1i" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.12" xref="alg1.l4.m1.1.1.3.12.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1j" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.13" xref="alg1.l4.m1.1.1.3.13.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1k" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.14" xref="alg1.l4.m1.1.1.3.14.cmml">f</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1l" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.15" xref="alg1.l4.m1.1.1.3.15.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1m" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.16" xref="alg1.l4.m1.1.1.3.16.cmml">c</mi><mo lspace="0.450em" rspace="0em" id="alg1.l4.m1.1.1.3.1n" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.17" xref="alg1.l4.m1.1.1.3.17.cmml">T</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1o" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.18" xref="alg1.l4.m1.1.1.3.18.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1p" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.19" xref="alg1.l4.m1.1.1.3.19.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1q" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.20" xref="alg1.l4.m1.1.1.3.20.cmml">o</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1r" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.21" xref="alg1.l4.m1.1.1.3.21.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1s" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.22" xref="alg1.l4.m1.1.1.3.22.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1t" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.23" xref="alg1.l4.m1.1.1.3.23.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1u" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.24" xref="alg1.l4.m1.1.1.3.24.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l4.m1.1.1.3.1v" xref="alg1.l4.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l4.m1.1.1.3.25" xref="alg1.l4.m1.1.1.3.25.cmml">s</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1"><ci id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1">←</ci><ci id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2">𝑇</ci><apply id="alg1.l4.m1.1.1.3.cmml" xref="alg1.l4.m1.1.1.3"><times id="alg1.l4.m1.1.1.3.1.cmml" xref="alg1.l4.m1.1.1.3.1"></times><ci id="alg1.l4.m1.1.1.3.2.cmml" xref="alg1.l4.m1.1.1.3.2">𝐷</ci><ci id="alg1.l4.m1.1.1.3.3.cmml" xref="alg1.l4.m1.1.1.3.3">𝑖</ci><ci id="alg1.l4.m1.1.1.3.4.cmml" xref="alg1.l4.m1.1.1.3.4">𝑎</ci><ci id="alg1.l4.m1.1.1.3.5.cmml" xref="alg1.l4.m1.1.1.3.5">𝑙</ci><ci id="alg1.l4.m1.1.1.3.6.cmml" xref="alg1.l4.m1.1.1.3.6">𝑒</ci><ci id="alg1.l4.m1.1.1.3.7.cmml" xref="alg1.l4.m1.1.1.3.7">𝑐</ci><ci id="alg1.l4.m1.1.1.3.8.cmml" xref="alg1.l4.m1.1.1.3.8">𝑡</ci><ci id="alg1.l4.m1.1.1.3.9.cmml" xref="alg1.l4.m1.1.1.3.9">𝑆</ci><ci id="alg1.l4.m1.1.1.3.10.cmml" xref="alg1.l4.m1.1.1.3.10">𝑝</ci><ci id="alg1.l4.m1.1.1.3.11.cmml" xref="alg1.l4.m1.1.1.3.11">𝑒</ci><ci id="alg1.l4.m1.1.1.3.12.cmml" xref="alg1.l4.m1.1.1.3.12">𝑐</ci><ci id="alg1.l4.m1.1.1.3.13.cmml" xref="alg1.l4.m1.1.1.3.13">𝑖</ci><ci id="alg1.l4.m1.1.1.3.14.cmml" xref="alg1.l4.m1.1.1.3.14">𝑓</ci><ci id="alg1.l4.m1.1.1.3.15.cmml" xref="alg1.l4.m1.1.1.3.15">𝑖</ci><ci id="alg1.l4.m1.1.1.3.16.cmml" xref="alg1.l4.m1.1.1.3.16">𝑐</ci><ci id="alg1.l4.m1.1.1.3.17.cmml" xref="alg1.l4.m1.1.1.3.17">𝑇</ci><ci id="alg1.l4.m1.1.1.3.18.cmml" xref="alg1.l4.m1.1.1.3.18">𝑢</ci><ci id="alg1.l4.m1.1.1.3.19.cmml" xref="alg1.l4.m1.1.1.3.19">𝑡</ci><ci id="alg1.l4.m1.1.1.3.20.cmml" xref="alg1.l4.m1.1.1.3.20">𝑜</ci><ci id="alg1.l4.m1.1.1.3.21.cmml" xref="alg1.l4.m1.1.1.3.21">𝑟</ci><ci id="alg1.l4.m1.1.1.3.22.cmml" xref="alg1.l4.m1.1.1.3.22">𝑖</ci><ci id="alg1.l4.m1.1.1.3.23.cmml" xref="alg1.l4.m1.1.1.3.23">𝑎</ci><ci id="alg1.l4.m1.1.1.3.24.cmml" xref="alg1.l4.m1.1.1.3.24">𝑙</ci><ci id="alg1.l4.m1.1.1.3.25.cmml" xref="alg1.l4.m1.1.1.3.25">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">T\leftarrow Dialect\ Specific\ Tutorials</annotation></semantics></math><span id="alg1.l4.2" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l4.3" class="ltx_text" style="font-size:90%;color:#0000FF;">// <span id="alg1.l4.3.1" class="ltx_text ltx_font_italic">Scrape a set of dialect-specific SQL tutorials</span></span><span id="alg1.l4.4" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l5" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l5.1.1.1" class="ltx_text" style="font-size:80%;">5:</span></span><span id="alg1.l5.2" class="ltx_text ltx_font_bold" style="font-size:90%;">while</span><span id="alg1.l5.3" class="ltx_text" style="font-size:90%;"> </span><math id="alg1.l5.m1.1" class="ltx_Math" alttext="\text{len}(S)&lt;\theta" display="inline"><semantics id="alg1.l5.m1.1a"><mrow id="alg1.l5.m1.1.2" xref="alg1.l5.m1.1.2.cmml"><mrow id="alg1.l5.m1.1.2.2" xref="alg1.l5.m1.1.2.2.cmml"><mtext mathsize="90%" id="alg1.l5.m1.1.2.2.2" xref="alg1.l5.m1.1.2.2.2a.cmml">len</mtext><mo lspace="0em" rspace="0em" id="alg1.l5.m1.1.2.2.1" xref="alg1.l5.m1.1.2.2.1.cmml">​</mo><mrow id="alg1.l5.m1.1.2.2.3.2" xref="alg1.l5.m1.1.2.2.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l5.m1.1.2.2.3.2.1" xref="alg1.l5.m1.1.2.2.cmml">(</mo><mi mathsize="90%" id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml">S</mi><mo maxsize="90%" minsize="90%" id="alg1.l5.m1.1.2.2.3.2.2" xref="alg1.l5.m1.1.2.2.cmml">)</mo></mrow></mrow><mo mathsize="90%" id="alg1.l5.m1.1.2.1" xref="alg1.l5.m1.1.2.1.cmml">&lt;</mo><mi mathsize="90%" id="alg1.l5.m1.1.2.3" xref="alg1.l5.m1.1.2.3.cmml">θ</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><apply id="alg1.l5.m1.1.2.cmml" xref="alg1.l5.m1.1.2"><lt id="alg1.l5.m1.1.2.1.cmml" xref="alg1.l5.m1.1.2.1"></lt><apply id="alg1.l5.m1.1.2.2.cmml" xref="alg1.l5.m1.1.2.2"><times id="alg1.l5.m1.1.2.2.1.cmml" xref="alg1.l5.m1.1.2.2.1"></times><ci id="alg1.l5.m1.1.2.2.2a.cmml" xref="alg1.l5.m1.1.2.2.2"><mtext mathsize="90%" id="alg1.l5.m1.1.2.2.2.cmml" xref="alg1.l5.m1.1.2.2.2">len</mtext></ci><ci id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1">𝑆</ci></apply><ci id="alg1.l5.m1.1.2.3.cmml" xref="alg1.l5.m1.1.2.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">\text{len}(S)&lt;\theta</annotation></semantics></math><span id="alg1.l5.4" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l5.5" class="ltx_text ltx_font_bold" style="font-size:90%;">do</span><span id="alg1.l5.6" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l6" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l6.1.1.1" class="ltx_text" style="font-size:80%;">6:</span></span><span id="alg1.l6.2" class="ltx_text" style="font-size:90%;">    </span><span id="alg1.l6.3" class="ltx_text" style="font-size:90%;color:#0000FF;">// <span id="alg1.l6.3.1" class="ltx_text ltx_font_italic">Generating new SQL templates using tutorials</span></span><span id="alg1.l6.4" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l7" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l7.1.1.1" class="ltx_text" style="font-size:80%;">7:</span></span><span id="alg1.l7.2" class="ltx_text" style="font-size:90%;">    </span><math id="alg1.l7.m1.1" class="ltx_Math" alttext="template\leftarrow\text{sample}(S)" display="inline"><semantics id="alg1.l7.m1.1a"><mrow id="alg1.l7.m1.1.2" xref="alg1.l7.m1.1.2.cmml"><mrow id="alg1.l7.m1.1.2.2" xref="alg1.l7.m1.1.2.2.cmml"><mi mathsize="90%" id="alg1.l7.m1.1.2.2.2" xref="alg1.l7.m1.1.2.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l7.m1.1.2.2.1" xref="alg1.l7.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l7.m1.1.2.2.3" xref="alg1.l7.m1.1.2.2.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l7.m1.1.2.2.1a" xref="alg1.l7.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l7.m1.1.2.2.4" xref="alg1.l7.m1.1.2.2.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.l7.m1.1.2.2.1b" xref="alg1.l7.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l7.m1.1.2.2.5" xref="alg1.l7.m1.1.2.2.5.cmml">p</mi><mo lspace="0em" rspace="0em" id="alg1.l7.m1.1.2.2.1c" xref="alg1.l7.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l7.m1.1.2.2.6" xref="alg1.l7.m1.1.2.2.6.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l7.m1.1.2.2.1d" xref="alg1.l7.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l7.m1.1.2.2.7" xref="alg1.l7.m1.1.2.2.7.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l7.m1.1.2.2.1e" xref="alg1.l7.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l7.m1.1.2.2.8" xref="alg1.l7.m1.1.2.2.8.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l7.m1.1.2.2.1f" xref="alg1.l7.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l7.m1.1.2.2.9" xref="alg1.l7.m1.1.2.2.9.cmml">e</mi></mrow><mo mathsize="90%" stretchy="false" id="alg1.l7.m1.1.2.1" xref="alg1.l7.m1.1.2.1.cmml">←</mo><mrow id="alg1.l7.m1.1.2.3" xref="alg1.l7.m1.1.2.3.cmml"><mtext mathsize="90%" id="alg1.l7.m1.1.2.3.2" xref="alg1.l7.m1.1.2.3.2a.cmml">sample</mtext><mo lspace="0em" rspace="0em" id="alg1.l7.m1.1.2.3.1" xref="alg1.l7.m1.1.2.3.1.cmml">​</mo><mrow id="alg1.l7.m1.1.2.3.3.2" xref="alg1.l7.m1.1.2.3.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l7.m1.1.2.3.3.2.1" xref="alg1.l7.m1.1.2.3.cmml">(</mo><mi mathsize="90%" id="alg1.l7.m1.1.1" xref="alg1.l7.m1.1.1.cmml">S</mi><mo maxsize="90%" minsize="90%" id="alg1.l7.m1.1.2.3.3.2.2" xref="alg1.l7.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l7.m1.1b"><apply id="alg1.l7.m1.1.2.cmml" xref="alg1.l7.m1.1.2"><ci id="alg1.l7.m1.1.2.1.cmml" xref="alg1.l7.m1.1.2.1">←</ci><apply id="alg1.l7.m1.1.2.2.cmml" xref="alg1.l7.m1.1.2.2"><times id="alg1.l7.m1.1.2.2.1.cmml" xref="alg1.l7.m1.1.2.2.1"></times><ci id="alg1.l7.m1.1.2.2.2.cmml" xref="alg1.l7.m1.1.2.2.2">𝑡</ci><ci id="alg1.l7.m1.1.2.2.3.cmml" xref="alg1.l7.m1.1.2.2.3">𝑒</ci><ci id="alg1.l7.m1.1.2.2.4.cmml" xref="alg1.l7.m1.1.2.2.4">𝑚</ci><ci id="alg1.l7.m1.1.2.2.5.cmml" xref="alg1.l7.m1.1.2.2.5">𝑝</ci><ci id="alg1.l7.m1.1.2.2.6.cmml" xref="alg1.l7.m1.1.2.2.6">𝑙</ci><ci id="alg1.l7.m1.1.2.2.7.cmml" xref="alg1.l7.m1.1.2.2.7">𝑎</ci><ci id="alg1.l7.m1.1.2.2.8.cmml" xref="alg1.l7.m1.1.2.2.8">𝑡</ci><ci id="alg1.l7.m1.1.2.2.9.cmml" xref="alg1.l7.m1.1.2.2.9">𝑒</ci></apply><apply id="alg1.l7.m1.1.2.3.cmml" xref="alg1.l7.m1.1.2.3"><times id="alg1.l7.m1.1.2.3.1.cmml" xref="alg1.l7.m1.1.2.3.1"></times><ci id="alg1.l7.m1.1.2.3.2a.cmml" xref="alg1.l7.m1.1.2.3.2"><mtext mathsize="90%" id="alg1.l7.m1.1.2.3.2.cmml" xref="alg1.l7.m1.1.2.3.2">sample</mtext></ci><ci id="alg1.l7.m1.1.1.cmml" xref="alg1.l7.m1.1.1">𝑆</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m1.1c">template\leftarrow\text{sample}(S)</annotation></semantics></math><span id="alg1.l7.3" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l8" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l8.1.1.1" class="ltx_text" style="font-size:80%;">8:</span></span><span id="alg1.l8.2" class="ltx_text" style="font-size:90%;">    </span><math id="alg1.l8.m1.1" class="ltx_Math" alttext="tutorial\leftarrow\text{sample}(T)" display="inline"><semantics id="alg1.l8.m1.1a"><mrow id="alg1.l8.m1.1.2" xref="alg1.l8.m1.1.2.cmml"><mrow id="alg1.l8.m1.1.2.2" xref="alg1.l8.m1.1.2.2.cmml"><mi mathsize="90%" id="alg1.l8.m1.1.2.2.2" xref="alg1.l8.m1.1.2.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l8.m1.1.2.2.1" xref="alg1.l8.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l8.m1.1.2.2.3" xref="alg1.l8.m1.1.2.2.3.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l8.m1.1.2.2.1a" xref="alg1.l8.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l8.m1.1.2.2.4" xref="alg1.l8.m1.1.2.2.4.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l8.m1.1.2.2.1b" xref="alg1.l8.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l8.m1.1.2.2.5" xref="alg1.l8.m1.1.2.2.5.cmml">o</mi><mo lspace="0em" rspace="0em" id="alg1.l8.m1.1.2.2.1c" xref="alg1.l8.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l8.m1.1.2.2.6" xref="alg1.l8.m1.1.2.2.6.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg1.l8.m1.1.2.2.1d" xref="alg1.l8.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l8.m1.1.2.2.7" xref="alg1.l8.m1.1.2.2.7.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l8.m1.1.2.2.1e" xref="alg1.l8.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l8.m1.1.2.2.8" xref="alg1.l8.m1.1.2.2.8.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l8.m1.1.2.2.1f" xref="alg1.l8.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l8.m1.1.2.2.9" xref="alg1.l8.m1.1.2.2.9.cmml">l</mi></mrow><mo mathsize="90%" stretchy="false" id="alg1.l8.m1.1.2.1" xref="alg1.l8.m1.1.2.1.cmml">←</mo><mrow id="alg1.l8.m1.1.2.3" xref="alg1.l8.m1.1.2.3.cmml"><mtext mathsize="90%" id="alg1.l8.m1.1.2.3.2" xref="alg1.l8.m1.1.2.3.2a.cmml">sample</mtext><mo lspace="0em" rspace="0em" id="alg1.l8.m1.1.2.3.1" xref="alg1.l8.m1.1.2.3.1.cmml">​</mo><mrow id="alg1.l8.m1.1.2.3.3.2" xref="alg1.l8.m1.1.2.3.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l8.m1.1.2.3.3.2.1" xref="alg1.l8.m1.1.2.3.cmml">(</mo><mi mathsize="90%" id="alg1.l8.m1.1.1" xref="alg1.l8.m1.1.1.cmml">T</mi><mo maxsize="90%" minsize="90%" id="alg1.l8.m1.1.2.3.3.2.2" xref="alg1.l8.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l8.m1.1b"><apply id="alg1.l8.m1.1.2.cmml" xref="alg1.l8.m1.1.2"><ci id="alg1.l8.m1.1.2.1.cmml" xref="alg1.l8.m1.1.2.1">←</ci><apply id="alg1.l8.m1.1.2.2.cmml" xref="alg1.l8.m1.1.2.2"><times id="alg1.l8.m1.1.2.2.1.cmml" xref="alg1.l8.m1.1.2.2.1"></times><ci id="alg1.l8.m1.1.2.2.2.cmml" xref="alg1.l8.m1.1.2.2.2">𝑡</ci><ci id="alg1.l8.m1.1.2.2.3.cmml" xref="alg1.l8.m1.1.2.2.3">𝑢</ci><ci id="alg1.l8.m1.1.2.2.4.cmml" xref="alg1.l8.m1.1.2.2.4">𝑡</ci><ci id="alg1.l8.m1.1.2.2.5.cmml" xref="alg1.l8.m1.1.2.2.5">𝑜</ci><ci id="alg1.l8.m1.1.2.2.6.cmml" xref="alg1.l8.m1.1.2.2.6">𝑟</ci><ci id="alg1.l8.m1.1.2.2.7.cmml" xref="alg1.l8.m1.1.2.2.7">𝑖</ci><ci id="alg1.l8.m1.1.2.2.8.cmml" xref="alg1.l8.m1.1.2.2.8">𝑎</ci><ci id="alg1.l8.m1.1.2.2.9.cmml" xref="alg1.l8.m1.1.2.2.9">𝑙</ci></apply><apply id="alg1.l8.m1.1.2.3.cmml" xref="alg1.l8.m1.1.2.3"><times id="alg1.l8.m1.1.2.3.1.cmml" xref="alg1.l8.m1.1.2.3.1"></times><ci id="alg1.l8.m1.1.2.3.2a.cmml" xref="alg1.l8.m1.1.2.3.2"><mtext mathsize="90%" id="alg1.l8.m1.1.2.3.2.cmml" xref="alg1.l8.m1.1.2.3.2">sample</mtext></ci><ci id="alg1.l8.m1.1.1.cmml" xref="alg1.l8.m1.1.1">𝑇</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.m1.1c">tutorial\leftarrow\text{sample}(T)</annotation></semantics></math><span id="alg1.l8.3" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l9" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l9.1.1.1" class="ltx_text" style="font-size:80%;">9:</span></span><span id="alg1.l9.2" class="ltx_text" style="font-size:90%;">    </span><math id="alg1.l9.m1.1" class="ltx_Math" alttext="S\leftarrow S\cup\{Filter_{1}(M_{1}(P_{TempGen}(template,tutorial)))\}" display="inline"><semantics id="alg1.l9.m1.1a"><mrow id="alg1.l9.m1.1.1" xref="alg1.l9.m1.1.1.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.3" xref="alg1.l9.m1.1.1.3.cmml">S</mi><mo mathsize="90%" stretchy="false" id="alg1.l9.m1.1.1.2" xref="alg1.l9.m1.1.1.2.cmml">←</mo><mrow id="alg1.l9.m1.1.1.1" xref="alg1.l9.m1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.1.3" xref="alg1.l9.m1.1.1.1.3.cmml">S</mi><mo mathsize="90%" id="alg1.l9.m1.1.1.1.2" xref="alg1.l9.m1.1.1.1.2.cmml">∪</mo><mrow id="alg1.l9.m1.1.1.1.1.1" xref="alg1.l9.m1.1.1.1.1.2.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l9.m1.1.1.1.1.1.2" xref="alg1.l9.m1.1.1.1.1.2.cmml">{</mo><mrow id="alg1.l9.m1.1.1.1.1.1.1" xref="alg1.l9.m1.1.1.1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.3" xref="alg1.l9.m1.1.1.1.1.1.1.3.cmml">F</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.2" xref="alg1.l9.m1.1.1.1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.4" xref="alg1.l9.m1.1.1.1.1.1.1.4.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.2a" xref="alg1.l9.m1.1.1.1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.5" xref="alg1.l9.m1.1.1.1.1.1.1.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.2b" xref="alg1.l9.m1.1.1.1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.6" xref="alg1.l9.m1.1.1.1.1.1.1.6.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.2c" xref="alg1.l9.m1.1.1.1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.7" xref="alg1.l9.m1.1.1.1.1.1.1.7.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.2d" xref="alg1.l9.m1.1.1.1.1.1.1.2.cmml">​</mo><msub id="alg1.l9.m1.1.1.1.1.1.1.8" xref="alg1.l9.m1.1.1.1.1.1.1.8.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.8.2" xref="alg1.l9.m1.1.1.1.1.1.1.8.2.cmml">r</mi><mn mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.8.3" xref="alg1.l9.m1.1.1.1.1.1.1.8.3.cmml">1</mn></msub><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.2e" xref="alg1.l9.m1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="alg1.l9.m1.1.1.1.1.1.1.1.1" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l9.m1.1.1.1.1.1.1.1.1.1" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.cmml"><msub id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.2.cmml">M</mi><mn mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.3.cmml">1</mn></msub><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><msub id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.2.cmml">P</mi><mrow id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.2.cmml">T</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1a" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.4" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1b" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.5" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.5.cmml">p</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1c" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.6" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.6.cmml">G</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1d" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.7" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.7.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1e" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.8" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.8.cmml">n</mi></mrow></msub><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">​</mo><mrow id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">(</mo><mrow id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1a" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.4" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1b" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.5" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.5.cmml">p</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1c" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.6" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.6.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1d" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.7" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.7.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1e" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.8" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.8.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1f" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.9" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.9.cmml">e</mi></mrow><mo mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.4" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">,</mo><mrow id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1a" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.4" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.4.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1b" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.5" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.5.cmml">o</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1c" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.6" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.6.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1d" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.7" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.7.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1e" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.8" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.8.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1f" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.9" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.9.cmml">l</mi></mrow><mo maxsize="90%" minsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.5" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo maxsize="90%" minsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo maxsize="90%" minsize="90%" id="alg1.l9.m1.1.1.1.1.1.1.1.1.3" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo maxsize="90%" minsize="90%" id="alg1.l9.m1.1.1.1.1.1.3" xref="alg1.l9.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l9.m1.1b"><apply id="alg1.l9.m1.1.1.cmml" xref="alg1.l9.m1.1.1"><ci id="alg1.l9.m1.1.1.2.cmml" xref="alg1.l9.m1.1.1.2">←</ci><ci id="alg1.l9.m1.1.1.3.cmml" xref="alg1.l9.m1.1.1.3">𝑆</ci><apply id="alg1.l9.m1.1.1.1.cmml" xref="alg1.l9.m1.1.1.1"><union id="alg1.l9.m1.1.1.1.2.cmml" xref="alg1.l9.m1.1.1.1.2"></union><ci id="alg1.l9.m1.1.1.1.3.cmml" xref="alg1.l9.m1.1.1.1.3">𝑆</ci><set id="alg1.l9.m1.1.1.1.1.2.cmml" xref="alg1.l9.m1.1.1.1.1.1"><apply id="alg1.l9.m1.1.1.1.1.1.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1"><times id="alg1.l9.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.2"></times><ci id="alg1.l9.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.3">𝐹</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.4">𝑖</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.5">𝑙</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.6">𝑡</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.7">𝑒</ci><apply id="alg1.l9.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.8"><csymbol cd="ambiguous" id="alg1.l9.m1.1.1.1.1.1.1.8.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.8">subscript</csymbol><ci id="alg1.l9.m1.1.1.1.1.1.1.8.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.8.2">𝑟</ci><cn type="integer" id="alg1.l9.m1.1.1.1.1.1.1.8.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.8.3">1</cn></apply><apply id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1"><times id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.2"></times><apply id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.2">𝑀</ci><cn type="integer" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.3.3">1</cn></apply><apply id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1"><times id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.3"></times><apply id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4">subscript</csymbol><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.2">𝑃</ci><apply id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3"><times id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1"></times><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.2">𝑇</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.3">𝑒</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.4.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.4">𝑚</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.5.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.5">𝑝</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.6.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.6">𝐺</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.7.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.7">𝑒</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.8.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.8">𝑛</ci></apply></apply><interval closure="open" id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2"><apply id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><times id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"></times><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑡</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.4">𝑚</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.5.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.5">𝑝</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.6.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.6">𝑙</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.7.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.7">𝑎</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.8.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.8">𝑡</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.9.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.9">𝑒</ci></apply><apply id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2"><times id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1"></times><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2">𝑡</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3">𝑢</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.4.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.4">𝑡</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.5.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.5">𝑜</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.6.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.6">𝑟</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.7.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.7">𝑖</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.8.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.8">𝑎</ci><ci id="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.9.cmml" xref="alg1.l9.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.9">𝑙</ci></apply></interval></apply></apply></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l9.m1.1c">S\leftarrow S\cup\{Filter_{1}(M_{1}(P_{TempGen}(template,tutorial)))\}</annotation></semantics></math><span id="alg1.l9.3" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l10" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l10.1.1.1" class="ltx_text" style="font-size:80%;">10:</span></span><span id="alg1.l10.2" class="ltx_text ltx_font_bold" style="font-size:90%;">end</span><span id="alg1.l10.3" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l10.4" class="ltx_text ltx_font_bold" style="font-size:90%;">while</span>
</div>
<div id="alg1.l11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l11.1.1.1" class="ltx_text" style="font-size:80%;">11:</span></span><math id="alg1.l11.m1.1" class="ltx_Math" alttext="Q\leftarrow\emptyset" display="inline"><semantics id="alg1.l11.m1.1a"><mrow id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml"><mi mathsize="90%" id="alg1.l11.m1.1.1.2" xref="alg1.l11.m1.1.1.2.cmml">Q</mi><mo mathsize="90%" stretchy="false" id="alg1.l11.m1.1.1.1" xref="alg1.l11.m1.1.1.1.cmml">←</mo><mi mathsize="90%" mathvariant="normal" id="alg1.l11.m1.1.1.3" xref="alg1.l11.m1.1.1.3.cmml">∅</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l11.m1.1b"><apply id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1"><ci id="alg1.l11.m1.1.1.1.cmml" xref="alg1.l11.m1.1.1.1">←</ci><ci id="alg1.l11.m1.1.1.2.cmml" xref="alg1.l11.m1.1.1.2">𝑄</ci><emptyset id="alg1.l11.m1.1.1.3.cmml" xref="alg1.l11.m1.1.1.3"></emptyset></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m1.1c">Q\leftarrow\emptyset</annotation></semantics></math><span id="alg1.l11.2" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l11.3" class="ltx_text" style="font-size:90%;color:#0000FF;">// <span id="alg1.l11.3.1" class="ltx_text ltx_font_italic">set of generated question-SQL pairs</span></span><span id="alg1.l11.4" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l12.1.1.1" class="ltx_text" style="font-size:80%;">12:</span></span><span id="alg1.l12.2" class="ltx_text ltx_font_bold" style="font-size:90%;">while</span><span id="alg1.l12.3" class="ltx_text" style="font-size:90%;"> </span><math id="alg1.l12.m1.1" class="ltx_Math" alttext="\text{len}(Q)&lt;\beta" display="inline"><semantics id="alg1.l12.m1.1a"><mrow id="alg1.l12.m1.1.2" xref="alg1.l12.m1.1.2.cmml"><mrow id="alg1.l12.m1.1.2.2" xref="alg1.l12.m1.1.2.2.cmml"><mtext mathsize="90%" id="alg1.l12.m1.1.2.2.2" xref="alg1.l12.m1.1.2.2.2a.cmml">len</mtext><mo lspace="0em" rspace="0em" id="alg1.l12.m1.1.2.2.1" xref="alg1.l12.m1.1.2.2.1.cmml">​</mo><mrow id="alg1.l12.m1.1.2.2.3.2" xref="alg1.l12.m1.1.2.2.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l12.m1.1.2.2.3.2.1" xref="alg1.l12.m1.1.2.2.cmml">(</mo><mi mathsize="90%" id="alg1.l12.m1.1.1" xref="alg1.l12.m1.1.1.cmml">Q</mi><mo maxsize="90%" minsize="90%" id="alg1.l12.m1.1.2.2.3.2.2" xref="alg1.l12.m1.1.2.2.cmml">)</mo></mrow></mrow><mo mathsize="90%" id="alg1.l12.m1.1.2.1" xref="alg1.l12.m1.1.2.1.cmml">&lt;</mo><mi mathsize="90%" id="alg1.l12.m1.1.2.3" xref="alg1.l12.m1.1.2.3.cmml">β</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l12.m1.1b"><apply id="alg1.l12.m1.1.2.cmml" xref="alg1.l12.m1.1.2"><lt id="alg1.l12.m1.1.2.1.cmml" xref="alg1.l12.m1.1.2.1"></lt><apply id="alg1.l12.m1.1.2.2.cmml" xref="alg1.l12.m1.1.2.2"><times id="alg1.l12.m1.1.2.2.1.cmml" xref="alg1.l12.m1.1.2.2.1"></times><ci id="alg1.l12.m1.1.2.2.2a.cmml" xref="alg1.l12.m1.1.2.2.2"><mtext mathsize="90%" id="alg1.l12.m1.1.2.2.2.cmml" xref="alg1.l12.m1.1.2.2.2">len</mtext></ci><ci id="alg1.l12.m1.1.1.cmml" xref="alg1.l12.m1.1.1">𝑄</ci></apply><ci id="alg1.l12.m1.1.2.3.cmml" xref="alg1.l12.m1.1.2.3">𝛽</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l12.m1.1c">\text{len}(Q)&lt;\beta</annotation></semantics></math><span id="alg1.l12.4" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l12.5" class="ltx_text ltx_font_bold" style="font-size:90%;">do</span><span id="alg1.l12.6" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l13" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l13.1.1.1" class="ltx_text" style="font-size:80%;">13:</span></span><span id="alg1.l13.2" class="ltx_text" style="font-size:90%;">    </span><span id="alg1.l13.3" class="ltx_text" style="font-size:90%;color:#0000FF;">// <span id="alg1.l13.3.1" class="ltx_text ltx_font_italic">Generating question-SQL pairs</span></span><span id="alg1.l13.4" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l14" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l14.1.1.1" class="ltx_text" style="font-size:80%;">14:</span></span><span id="alg1.l14.2" class="ltx_text" style="font-size:90%;">    </span><math id="alg1.l14.m1.1" class="ltx_Math" alttext="template\leftarrow\text{sample}(S)" display="inline"><semantics id="alg1.l14.m1.1a"><mrow id="alg1.l14.m1.1.2" xref="alg1.l14.m1.1.2.cmml"><mrow id="alg1.l14.m1.1.2.2" xref="alg1.l14.m1.1.2.2.cmml"><mi mathsize="90%" id="alg1.l14.m1.1.2.2.2" xref="alg1.l14.m1.1.2.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l14.m1.1.2.2.1" xref="alg1.l14.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l14.m1.1.2.2.3" xref="alg1.l14.m1.1.2.2.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l14.m1.1.2.2.1a" xref="alg1.l14.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l14.m1.1.2.2.4" xref="alg1.l14.m1.1.2.2.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.l14.m1.1.2.2.1b" xref="alg1.l14.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l14.m1.1.2.2.5" xref="alg1.l14.m1.1.2.2.5.cmml">p</mi><mo lspace="0em" rspace="0em" id="alg1.l14.m1.1.2.2.1c" xref="alg1.l14.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l14.m1.1.2.2.6" xref="alg1.l14.m1.1.2.2.6.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l14.m1.1.2.2.1d" xref="alg1.l14.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l14.m1.1.2.2.7" xref="alg1.l14.m1.1.2.2.7.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l14.m1.1.2.2.1e" xref="alg1.l14.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l14.m1.1.2.2.8" xref="alg1.l14.m1.1.2.2.8.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l14.m1.1.2.2.1f" xref="alg1.l14.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l14.m1.1.2.2.9" xref="alg1.l14.m1.1.2.2.9.cmml">e</mi></mrow><mo mathsize="90%" stretchy="false" id="alg1.l14.m1.1.2.1" xref="alg1.l14.m1.1.2.1.cmml">←</mo><mrow id="alg1.l14.m1.1.2.3" xref="alg1.l14.m1.1.2.3.cmml"><mtext mathsize="90%" id="alg1.l14.m1.1.2.3.2" xref="alg1.l14.m1.1.2.3.2a.cmml">sample</mtext><mo lspace="0em" rspace="0em" id="alg1.l14.m1.1.2.3.1" xref="alg1.l14.m1.1.2.3.1.cmml">​</mo><mrow id="alg1.l14.m1.1.2.3.3.2" xref="alg1.l14.m1.1.2.3.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l14.m1.1.2.3.3.2.1" xref="alg1.l14.m1.1.2.3.cmml">(</mo><mi mathsize="90%" id="alg1.l14.m1.1.1" xref="alg1.l14.m1.1.1.cmml">S</mi><mo maxsize="90%" minsize="90%" id="alg1.l14.m1.1.2.3.3.2.2" xref="alg1.l14.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l14.m1.1b"><apply id="alg1.l14.m1.1.2.cmml" xref="alg1.l14.m1.1.2"><ci id="alg1.l14.m1.1.2.1.cmml" xref="alg1.l14.m1.1.2.1">←</ci><apply id="alg1.l14.m1.1.2.2.cmml" xref="alg1.l14.m1.1.2.2"><times id="alg1.l14.m1.1.2.2.1.cmml" xref="alg1.l14.m1.1.2.2.1"></times><ci id="alg1.l14.m1.1.2.2.2.cmml" xref="alg1.l14.m1.1.2.2.2">𝑡</ci><ci id="alg1.l14.m1.1.2.2.3.cmml" xref="alg1.l14.m1.1.2.2.3">𝑒</ci><ci id="alg1.l14.m1.1.2.2.4.cmml" xref="alg1.l14.m1.1.2.2.4">𝑚</ci><ci id="alg1.l14.m1.1.2.2.5.cmml" xref="alg1.l14.m1.1.2.2.5">𝑝</ci><ci id="alg1.l14.m1.1.2.2.6.cmml" xref="alg1.l14.m1.1.2.2.6">𝑙</ci><ci id="alg1.l14.m1.1.2.2.7.cmml" xref="alg1.l14.m1.1.2.2.7">𝑎</ci><ci id="alg1.l14.m1.1.2.2.8.cmml" xref="alg1.l14.m1.1.2.2.8">𝑡</ci><ci id="alg1.l14.m1.1.2.2.9.cmml" xref="alg1.l14.m1.1.2.2.9">𝑒</ci></apply><apply id="alg1.l14.m1.1.2.3.cmml" xref="alg1.l14.m1.1.2.3"><times id="alg1.l14.m1.1.2.3.1.cmml" xref="alg1.l14.m1.1.2.3.1"></times><ci id="alg1.l14.m1.1.2.3.2a.cmml" xref="alg1.l14.m1.1.2.3.2"><mtext mathsize="90%" id="alg1.l14.m1.1.2.3.2.cmml" xref="alg1.l14.m1.1.2.3.2">sample</mtext></ci><ci id="alg1.l14.m1.1.1.cmml" xref="alg1.l14.m1.1.1">𝑆</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l14.m1.1c">template\leftarrow\text{sample}(S)</annotation></semantics></math><span id="alg1.l14.3" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l15" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l15.1.1.1" class="ltx_text" style="font-size:80%;">15:</span></span><span id="alg1.l15.2" class="ltx_text" style="font-size:90%;">    </span><math id="alg1.l15.m1.1" class="ltx_Math" alttext="db\leftarrow\text{sample}(D)" display="inline"><semantics id="alg1.l15.m1.1a"><mrow id="alg1.l15.m1.1.2" xref="alg1.l15.m1.1.2.cmml"><mrow id="alg1.l15.m1.1.2.2" xref="alg1.l15.m1.1.2.2.cmml"><mi mathsize="90%" id="alg1.l15.m1.1.2.2.2" xref="alg1.l15.m1.1.2.2.2.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l15.m1.1.2.2.1" xref="alg1.l15.m1.1.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l15.m1.1.2.2.3" xref="alg1.l15.m1.1.2.2.3.cmml">b</mi></mrow><mo mathsize="90%" stretchy="false" id="alg1.l15.m1.1.2.1" xref="alg1.l15.m1.1.2.1.cmml">←</mo><mrow id="alg1.l15.m1.1.2.3" xref="alg1.l15.m1.1.2.3.cmml"><mtext mathsize="90%" id="alg1.l15.m1.1.2.3.2" xref="alg1.l15.m1.1.2.3.2a.cmml">sample</mtext><mo lspace="0em" rspace="0em" id="alg1.l15.m1.1.2.3.1" xref="alg1.l15.m1.1.2.3.1.cmml">​</mo><mrow id="alg1.l15.m1.1.2.3.3.2" xref="alg1.l15.m1.1.2.3.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l15.m1.1.2.3.3.2.1" xref="alg1.l15.m1.1.2.3.cmml">(</mo><mi mathsize="90%" id="alg1.l15.m1.1.1" xref="alg1.l15.m1.1.1.cmml">D</mi><mo maxsize="90%" minsize="90%" id="alg1.l15.m1.1.2.3.3.2.2" xref="alg1.l15.m1.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l15.m1.1b"><apply id="alg1.l15.m1.1.2.cmml" xref="alg1.l15.m1.1.2"><ci id="alg1.l15.m1.1.2.1.cmml" xref="alg1.l15.m1.1.2.1">←</ci><apply id="alg1.l15.m1.1.2.2.cmml" xref="alg1.l15.m1.1.2.2"><times id="alg1.l15.m1.1.2.2.1.cmml" xref="alg1.l15.m1.1.2.2.1"></times><ci id="alg1.l15.m1.1.2.2.2.cmml" xref="alg1.l15.m1.1.2.2.2">𝑑</ci><ci id="alg1.l15.m1.1.2.2.3.cmml" xref="alg1.l15.m1.1.2.2.3">𝑏</ci></apply><apply id="alg1.l15.m1.1.2.3.cmml" xref="alg1.l15.m1.1.2.3"><times id="alg1.l15.m1.1.2.3.1.cmml" xref="alg1.l15.m1.1.2.3.1"></times><ci id="alg1.l15.m1.1.2.3.2a.cmml" xref="alg1.l15.m1.1.2.3.2"><mtext mathsize="90%" id="alg1.l15.m1.1.2.3.2.cmml" xref="alg1.l15.m1.1.2.3.2">sample</mtext></ci><ci id="alg1.l15.m1.1.1.cmml" xref="alg1.l15.m1.1.1">𝐷</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l15.m1.1c">db\leftarrow\text{sample}(D)</annotation></semantics></math><span id="alg1.l15.3" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l16" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l16.1.1.1" class="ltx_text" style="font-size:80%;">16:</span></span><span id="alg1.l16.2" class="ltx_text" style="font-size:90%;">    </span><math id="alg1.l16.m1.1" class="ltx_Math" alttext="candidate\leftarrow Filter_{2}(M_{1}(P_{Gen}(template,db)))" display="inline"><semantics id="alg1.l16.m1.1a"><mrow id="alg1.l16.m1.1.1" xref="alg1.l16.m1.1.1.cmml"><mrow id="alg1.l16.m1.1.1.3" xref="alg1.l16.m1.1.1.3.cmml"><mi mathsize="90%" id="alg1.l16.m1.1.1.3.2" xref="alg1.l16.m1.1.1.3.2.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.3.1" xref="alg1.l16.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.3.3" xref="alg1.l16.m1.1.1.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.3.1a" xref="alg1.l16.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.3.4" xref="alg1.l16.m1.1.1.3.4.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.3.1b" xref="alg1.l16.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.3.5" xref="alg1.l16.m1.1.1.3.5.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.3.1c" xref="alg1.l16.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.3.6" xref="alg1.l16.m1.1.1.3.6.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.3.1d" xref="alg1.l16.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.3.7" xref="alg1.l16.m1.1.1.3.7.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.3.1e" xref="alg1.l16.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.3.8" xref="alg1.l16.m1.1.1.3.8.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.3.1f" xref="alg1.l16.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.3.9" xref="alg1.l16.m1.1.1.3.9.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.3.1g" xref="alg1.l16.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.3.10" xref="alg1.l16.m1.1.1.3.10.cmml">e</mi></mrow><mo mathsize="90%" stretchy="false" id="alg1.l16.m1.1.1.2" xref="alg1.l16.m1.1.1.2.cmml">←</mo><mrow id="alg1.l16.m1.1.1.1" xref="alg1.l16.m1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l16.m1.1.1.1.3" xref="alg1.l16.m1.1.1.1.3.cmml">F</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.2" xref="alg1.l16.m1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.4" xref="alg1.l16.m1.1.1.1.4.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.2a" xref="alg1.l16.m1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.5" xref="alg1.l16.m1.1.1.1.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.2b" xref="alg1.l16.m1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.6" xref="alg1.l16.m1.1.1.1.6.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.2c" xref="alg1.l16.m1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.7" xref="alg1.l16.m1.1.1.1.7.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.2d" xref="alg1.l16.m1.1.1.1.2.cmml">​</mo><msub id="alg1.l16.m1.1.1.1.8" xref="alg1.l16.m1.1.1.1.8.cmml"><mi mathsize="90%" id="alg1.l16.m1.1.1.1.8.2" xref="alg1.l16.m1.1.1.1.8.2.cmml">r</mi><mn mathsize="90%" id="alg1.l16.m1.1.1.1.8.3" xref="alg1.l16.m1.1.1.1.8.3.cmml">2</mn></msub><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.2e" xref="alg1.l16.m1.1.1.1.2.cmml">​</mo><mrow id="alg1.l16.m1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l16.m1.1.1.1.1.1.2" xref="alg1.l16.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l16.m1.1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.1.1.cmml"><msub id="alg1.l16.m1.1.1.1.1.1.1.3" xref="alg1.l16.m1.1.1.1.1.1.1.3.cmml"><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.3.2" xref="alg1.l16.m1.1.1.1.1.1.1.3.2.cmml">M</mi><mn mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.3.3" xref="alg1.l16.m1.1.1.1.1.1.1.3.3.cmml">1</mn></msub><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.2" xref="alg1.l16.m1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="alg1.l16.m1.1.1.1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.2" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l16.m1.1.1.1.1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.cmml"><msub id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.cmml"><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.2" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.2.cmml">P</mi><mrow id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.cmml"><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.2" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.2.cmml">G</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.1" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.3" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.1a" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.4" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.4.cmml">n</mi></mrow></msub><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.3.cmml">​</mo><mrow id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.3.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.3" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.3.cmml">(</mo><mrow id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1a" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.4" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1b" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.5" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.5.cmml">p</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1c" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.6" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.6.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1d" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.7" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.7.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1e" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.8" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.8.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1f" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.9" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.9.cmml">e</mi></mrow><mo mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.4" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.3.cmml">,</mo><mrow id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.2" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.1" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.3" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml">b</mi></mrow><mo maxsize="90%" minsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.5" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo maxsize="90%" minsize="90%" id="alg1.l16.m1.1.1.1.1.1.1.1.1.3" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo maxsize="90%" minsize="90%" id="alg1.l16.m1.1.1.1.1.1.3" xref="alg1.l16.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l16.m1.1b"><apply id="alg1.l16.m1.1.1.cmml" xref="alg1.l16.m1.1.1"><ci id="alg1.l16.m1.1.1.2.cmml" xref="alg1.l16.m1.1.1.2">←</ci><apply id="alg1.l16.m1.1.1.3.cmml" xref="alg1.l16.m1.1.1.3"><times id="alg1.l16.m1.1.1.3.1.cmml" xref="alg1.l16.m1.1.1.3.1"></times><ci id="alg1.l16.m1.1.1.3.2.cmml" xref="alg1.l16.m1.1.1.3.2">𝑐</ci><ci id="alg1.l16.m1.1.1.3.3.cmml" xref="alg1.l16.m1.1.1.3.3">𝑎</ci><ci id="alg1.l16.m1.1.1.3.4.cmml" xref="alg1.l16.m1.1.1.3.4">𝑛</ci><ci id="alg1.l16.m1.1.1.3.5.cmml" xref="alg1.l16.m1.1.1.3.5">𝑑</ci><ci id="alg1.l16.m1.1.1.3.6.cmml" xref="alg1.l16.m1.1.1.3.6">𝑖</ci><ci id="alg1.l16.m1.1.1.3.7.cmml" xref="alg1.l16.m1.1.1.3.7">𝑑</ci><ci id="alg1.l16.m1.1.1.3.8.cmml" xref="alg1.l16.m1.1.1.3.8">𝑎</ci><ci id="alg1.l16.m1.1.1.3.9.cmml" xref="alg1.l16.m1.1.1.3.9">𝑡</ci><ci id="alg1.l16.m1.1.1.3.10.cmml" xref="alg1.l16.m1.1.1.3.10">𝑒</ci></apply><apply id="alg1.l16.m1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1"><times id="alg1.l16.m1.1.1.1.2.cmml" xref="alg1.l16.m1.1.1.1.2"></times><ci id="alg1.l16.m1.1.1.1.3.cmml" xref="alg1.l16.m1.1.1.1.3">𝐹</ci><ci id="alg1.l16.m1.1.1.1.4.cmml" xref="alg1.l16.m1.1.1.1.4">𝑖</ci><ci id="alg1.l16.m1.1.1.1.5.cmml" xref="alg1.l16.m1.1.1.1.5">𝑙</ci><ci id="alg1.l16.m1.1.1.1.6.cmml" xref="alg1.l16.m1.1.1.1.6">𝑡</ci><ci id="alg1.l16.m1.1.1.1.7.cmml" xref="alg1.l16.m1.1.1.1.7">𝑒</ci><apply id="alg1.l16.m1.1.1.1.8.cmml" xref="alg1.l16.m1.1.1.1.8"><csymbol cd="ambiguous" id="alg1.l16.m1.1.1.1.8.1.cmml" xref="alg1.l16.m1.1.1.1.8">subscript</csymbol><ci id="alg1.l16.m1.1.1.1.8.2.cmml" xref="alg1.l16.m1.1.1.1.8.2">𝑟</ci><cn type="integer" id="alg1.l16.m1.1.1.1.8.3.cmml" xref="alg1.l16.m1.1.1.1.8.3">2</cn></apply><apply id="alg1.l16.m1.1.1.1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1.1.1"><times id="alg1.l16.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.2"></times><apply id="alg1.l16.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l16.m1.1.1.1.1.1.1.3.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.3">subscript</csymbol><ci id="alg1.l16.m1.1.1.1.1.1.1.3.2.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.3.2">𝑀</ci><cn type="integer" id="alg1.l16.m1.1.1.1.1.1.1.3.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.3.3">1</cn></apply><apply id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1"><times id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.3"></times><apply id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4">subscript</csymbol><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.2.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.2">𝑃</ci><apply id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3"><times id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.1"></times><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.2.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.2">𝐺</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.3">𝑒</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.4.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.4.3.4">𝑛</ci></apply></apply><interval closure="open" id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2"><apply id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1"><times id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.1"></times><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑡</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.4">𝑚</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.5.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.5">𝑝</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.6.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.6">𝑙</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.7.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.7">𝑎</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.8.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.8">𝑡</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.9.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.1.1.1.9">𝑒</ci></apply><apply id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2"><times id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.1"></times><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.2">𝑑</ci><ci id="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml" xref="alg1.l16.m1.1.1.1.1.1.1.1.1.1.2.2.2.3">𝑏</ci></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l16.m1.1c">candidate\leftarrow Filter_{2}(M_{1}(P_{Gen}(template,db)))</annotation></semantics></math><span id="alg1.l16.3" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l17" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l17.1.1.1" class="ltx_text" style="font-size:80%;">17:</span></span><span id="alg1.l17.2" class="ltx_text" style="font-size:90%;">    </span><span id="alg1.l17.3" class="ltx_text ltx_font_bold" style="font-size:90%;">try</span><span id="alg1.l17.4" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l18" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l18.1.1.1" class="ltx_text" style="font-size:80%;">18:</span></span><span id="alg1.l18.2" class="ltx_text" style="font-size:90%;">    </span><math id="alg1.l18.m1.1" class="ltx_Math" alttext="results\leftarrow\text{executeQuery}(candidate)" display="inline"><semantics id="alg1.l18.m1.1a"><mrow id="alg1.l18.m1.1.1" xref="alg1.l18.m1.1.1.cmml"><mrow id="alg1.l18.m1.1.1.3" xref="alg1.l18.m1.1.1.3.cmml"><mi mathsize="90%" id="alg1.l18.m1.1.1.3.2" xref="alg1.l18.m1.1.1.3.2.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.3.1" xref="alg1.l18.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.3.3" xref="alg1.l18.m1.1.1.3.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.3.1a" xref="alg1.l18.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.3.4" xref="alg1.l18.m1.1.1.3.4.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.3.1b" xref="alg1.l18.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.3.5" xref="alg1.l18.m1.1.1.3.5.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.3.1c" xref="alg1.l18.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.3.6" xref="alg1.l18.m1.1.1.3.6.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.3.1d" xref="alg1.l18.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.3.7" xref="alg1.l18.m1.1.1.3.7.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.3.1e" xref="alg1.l18.m1.1.1.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.3.8" xref="alg1.l18.m1.1.1.3.8.cmml">s</mi></mrow><mo mathsize="90%" stretchy="false" id="alg1.l18.m1.1.1.2" xref="alg1.l18.m1.1.1.2.cmml">←</mo><mrow id="alg1.l18.m1.1.1.1" xref="alg1.l18.m1.1.1.1.cmml"><mtext mathsize="90%" id="alg1.l18.m1.1.1.1.3" xref="alg1.l18.m1.1.1.1.3a.cmml">executeQuery</mtext><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.2" xref="alg1.l18.m1.1.1.1.2.cmml">​</mo><mrow id="alg1.l18.m1.1.1.1.1.1" xref="alg1.l18.m1.1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l18.m1.1.1.1.1.1.2" xref="alg1.l18.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l18.m1.1.1.1.1.1.1" xref="alg1.l18.m1.1.1.1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.2" xref="alg1.l18.m1.1.1.1.1.1.1.2.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.1.1.1.1" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.3" xref="alg1.l18.m1.1.1.1.1.1.1.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.1.1.1.1a" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.4" xref="alg1.l18.m1.1.1.1.1.1.1.4.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.1.1.1.1b" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.5" xref="alg1.l18.m1.1.1.1.1.1.1.5.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.1.1.1.1c" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.6" xref="alg1.l18.m1.1.1.1.1.1.1.6.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.1.1.1.1d" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.7" xref="alg1.l18.m1.1.1.1.1.1.1.7.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.1.1.1.1e" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.8" xref="alg1.l18.m1.1.1.1.1.1.1.8.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.1.1.1.1f" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.9" xref="alg1.l18.m1.1.1.1.1.1.1.9.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l18.m1.1.1.1.1.1.1.1g" xref="alg1.l18.m1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l18.m1.1.1.1.1.1.1.10" xref="alg1.l18.m1.1.1.1.1.1.1.10.cmml">e</mi></mrow><mo maxsize="90%" minsize="90%" id="alg1.l18.m1.1.1.1.1.1.3" xref="alg1.l18.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l18.m1.1b"><apply id="alg1.l18.m1.1.1.cmml" xref="alg1.l18.m1.1.1"><ci id="alg1.l18.m1.1.1.2.cmml" xref="alg1.l18.m1.1.1.2">←</ci><apply id="alg1.l18.m1.1.1.3.cmml" xref="alg1.l18.m1.1.1.3"><times id="alg1.l18.m1.1.1.3.1.cmml" xref="alg1.l18.m1.1.1.3.1"></times><ci id="alg1.l18.m1.1.1.3.2.cmml" xref="alg1.l18.m1.1.1.3.2">𝑟</ci><ci id="alg1.l18.m1.1.1.3.3.cmml" xref="alg1.l18.m1.1.1.3.3">𝑒</ci><ci id="alg1.l18.m1.1.1.3.4.cmml" xref="alg1.l18.m1.1.1.3.4">𝑠</ci><ci id="alg1.l18.m1.1.1.3.5.cmml" xref="alg1.l18.m1.1.1.3.5">𝑢</ci><ci id="alg1.l18.m1.1.1.3.6.cmml" xref="alg1.l18.m1.1.1.3.6">𝑙</ci><ci id="alg1.l18.m1.1.1.3.7.cmml" xref="alg1.l18.m1.1.1.3.7">𝑡</ci><ci id="alg1.l18.m1.1.1.3.8.cmml" xref="alg1.l18.m1.1.1.3.8">𝑠</ci></apply><apply id="alg1.l18.m1.1.1.1.cmml" xref="alg1.l18.m1.1.1.1"><times id="alg1.l18.m1.1.1.1.2.cmml" xref="alg1.l18.m1.1.1.1.2"></times><ci id="alg1.l18.m1.1.1.1.3a.cmml" xref="alg1.l18.m1.1.1.1.3"><mtext mathsize="90%" id="alg1.l18.m1.1.1.1.3.cmml" xref="alg1.l18.m1.1.1.1.3">executeQuery</mtext></ci><apply id="alg1.l18.m1.1.1.1.1.1.1.cmml" xref="alg1.l18.m1.1.1.1.1.1"><times id="alg1.l18.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.1"></times><ci id="alg1.l18.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.3">𝑎</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.4">𝑛</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.5">𝑑</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.6">𝑖</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.7">𝑑</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.8">𝑎</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.9.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.9">𝑡</ci><ci id="alg1.l18.m1.1.1.1.1.1.1.10.cmml" xref="alg1.l18.m1.1.1.1.1.1.1.10">𝑒</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l18.m1.1c">results\leftarrow\text{executeQuery}(candidate)</annotation></semantics></math><span id="alg1.l18.3" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l18.4" class="ltx_text" style="font-size:90%;color:#0000FF;">// <span id="alg1.l18.4.1" class="ltx_text ltx_font_italic">quality assurance check</span></span><span id="alg1.l18.5" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l19" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l19.1.1.1" class="ltx_text" style="font-size:80%;">19:</span></span><span id="alg1.l19.2" class="ltx_text" style="font-size:90%;">    </span><span id="alg1.l19.3" class="ltx_text ltx_font_bold" style="font-size:90%;">if</span><span id="alg1.l19.4" class="ltx_text" style="font-size:90%;"> </span><math id="alg1.l19.m1.1" class="ltx_Math" alttext="\text{isError}(results)" display="inline"><semantics id="alg1.l19.m1.1a"><mrow id="alg1.l19.m1.1.1" xref="alg1.l19.m1.1.1.cmml"><mtext mathsize="90%" id="alg1.l19.m1.1.1.3" xref="alg1.l19.m1.1.1.3a.cmml">isError</mtext><mo lspace="0em" rspace="0em" id="alg1.l19.m1.1.1.2" xref="alg1.l19.m1.1.1.2.cmml">​</mo><mrow id="alg1.l19.m1.1.1.1.1" xref="alg1.l19.m1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l19.m1.1.1.1.1.2" xref="alg1.l19.m1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l19.m1.1.1.1.1.1" xref="alg1.l19.m1.1.1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l19.m1.1.1.1.1.1.2" xref="alg1.l19.m1.1.1.1.1.1.2.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg1.l19.m1.1.1.1.1.1.1" xref="alg1.l19.m1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l19.m1.1.1.1.1.1.3" xref="alg1.l19.m1.1.1.1.1.1.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l19.m1.1.1.1.1.1.1a" xref="alg1.l19.m1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l19.m1.1.1.1.1.1.4" xref="alg1.l19.m1.1.1.1.1.1.4.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg1.l19.m1.1.1.1.1.1.1b" xref="alg1.l19.m1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l19.m1.1.1.1.1.1.5" xref="alg1.l19.m1.1.1.1.1.1.5.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l19.m1.1.1.1.1.1.1c" xref="alg1.l19.m1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l19.m1.1.1.1.1.1.6" xref="alg1.l19.m1.1.1.1.1.1.6.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l19.m1.1.1.1.1.1.1d" xref="alg1.l19.m1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l19.m1.1.1.1.1.1.7" xref="alg1.l19.m1.1.1.1.1.1.7.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l19.m1.1.1.1.1.1.1e" xref="alg1.l19.m1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l19.m1.1.1.1.1.1.8" xref="alg1.l19.m1.1.1.1.1.1.8.cmml">s</mi></mrow><mo maxsize="90%" minsize="90%" id="alg1.l19.m1.1.1.1.1.3" xref="alg1.l19.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l19.m1.1b"><apply id="alg1.l19.m1.1.1.cmml" xref="alg1.l19.m1.1.1"><times id="alg1.l19.m1.1.1.2.cmml" xref="alg1.l19.m1.1.1.2"></times><ci id="alg1.l19.m1.1.1.3a.cmml" xref="alg1.l19.m1.1.1.3"><mtext mathsize="90%" id="alg1.l19.m1.1.1.3.cmml" xref="alg1.l19.m1.1.1.3">isError</mtext></ci><apply id="alg1.l19.m1.1.1.1.1.1.cmml" xref="alg1.l19.m1.1.1.1.1"><times id="alg1.l19.m1.1.1.1.1.1.1.cmml" xref="alg1.l19.m1.1.1.1.1.1.1"></times><ci id="alg1.l19.m1.1.1.1.1.1.2.cmml" xref="alg1.l19.m1.1.1.1.1.1.2">𝑟</ci><ci id="alg1.l19.m1.1.1.1.1.1.3.cmml" xref="alg1.l19.m1.1.1.1.1.1.3">𝑒</ci><ci id="alg1.l19.m1.1.1.1.1.1.4.cmml" xref="alg1.l19.m1.1.1.1.1.1.4">𝑠</ci><ci id="alg1.l19.m1.1.1.1.1.1.5.cmml" xref="alg1.l19.m1.1.1.1.1.1.5">𝑢</ci><ci id="alg1.l19.m1.1.1.1.1.1.6.cmml" xref="alg1.l19.m1.1.1.1.1.1.6">𝑙</ci><ci id="alg1.l19.m1.1.1.1.1.1.7.cmml" xref="alg1.l19.m1.1.1.1.1.1.7">𝑡</ci><ci id="alg1.l19.m1.1.1.1.1.1.8.cmml" xref="alg1.l19.m1.1.1.1.1.1.8">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l19.m1.1c">\text{isError}(results)</annotation></semantics></math><span id="alg1.l19.5" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l19.6" class="ltx_text ltx_font_bold" style="font-size:90%;">then</span><span id="alg1.l19.7" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l20" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l20.1.1.1" class="ltx_text" style="font-size:80%;">20:</span></span><span id="alg1.l20.2" class="ltx_text" style="font-size:90%;">         </span><span id="alg1.l20.3" class="ltx_text ltx_font_bold" style="font-size:90%;">continue</span><span id="alg1.l20.4" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l20.5" class="ltx_text" style="font-size:90%;color:#0000FF;">// <span id="alg1.l20.5.1" class="ltx_text ltx_font_italic">Skip to the next iteration if error</span></span><span id="alg1.l20.6" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l21" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l21.1.1.1" class="ltx_text" style="font-size:80%;">21:</span></span><span id="alg1.l21.2" class="ltx_text" style="font-size:90%;">    </span><span id="alg1.l21.3" class="ltx_text ltx_font_bold" style="font-size:90%;">end</span><span id="alg1.l21.4" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l21.5" class="ltx_text ltx_font_bold" style="font-size:90%;">if</span>
</div>
<div id="alg1.l22" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l22.1.1.1" class="ltx_text" style="font-size:80%;">22:</span></span><span id="alg1.l22.2" class="ltx_text" style="font-size:90%;">    </span><math id="alg1.l22.m1.1" class="ltx_Math" alttext="Q\leftarrow Q\cup\{Filter_{2}(M_{2}(P_{Quality}(candidate,results)))\}" display="inline"><semantics id="alg1.l22.m1.1a"><mrow id="alg1.l22.m1.1.1" xref="alg1.l22.m1.1.1.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.3" xref="alg1.l22.m1.1.1.3.cmml">Q</mi><mo mathsize="90%" stretchy="false" id="alg1.l22.m1.1.1.2" xref="alg1.l22.m1.1.1.2.cmml">←</mo><mrow id="alg1.l22.m1.1.1.1" xref="alg1.l22.m1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.1.3" xref="alg1.l22.m1.1.1.1.3.cmml">Q</mi><mo mathsize="90%" id="alg1.l22.m1.1.1.1.2" xref="alg1.l22.m1.1.1.1.2.cmml">∪</mo><mrow id="alg1.l22.m1.1.1.1.1.1" xref="alg1.l22.m1.1.1.1.1.2.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l22.m1.1.1.1.1.1.2" xref="alg1.l22.m1.1.1.1.1.2.cmml">{</mo><mrow id="alg1.l22.m1.1.1.1.1.1.1" xref="alg1.l22.m1.1.1.1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.3" xref="alg1.l22.m1.1.1.1.1.1.1.3.cmml">F</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.2" xref="alg1.l22.m1.1.1.1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.4" xref="alg1.l22.m1.1.1.1.1.1.1.4.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.2a" xref="alg1.l22.m1.1.1.1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.5" xref="alg1.l22.m1.1.1.1.1.1.1.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.2b" xref="alg1.l22.m1.1.1.1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.6" xref="alg1.l22.m1.1.1.1.1.1.1.6.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.2c" xref="alg1.l22.m1.1.1.1.1.1.1.2.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.7" xref="alg1.l22.m1.1.1.1.1.1.1.7.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.2d" xref="alg1.l22.m1.1.1.1.1.1.1.2.cmml">​</mo><msub id="alg1.l22.m1.1.1.1.1.1.1.8" xref="alg1.l22.m1.1.1.1.1.1.1.8.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.8.2" xref="alg1.l22.m1.1.1.1.1.1.1.8.2.cmml">r</mi><mn mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.8.3" xref="alg1.l22.m1.1.1.1.1.1.1.8.3.cmml">2</mn></msub><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.2e" xref="alg1.l22.m1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="alg1.l22.m1.1.1.1.1.1.1.1.1" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l22.m1.1.1.1.1.1.1.1.1.1" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.cmml"><msub id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.2.cmml">M</mi><mn mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.3.cmml">2</mn></msub><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><msub id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.2.cmml">P</mi><mrow id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.2.cmml">Q</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.3.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1a" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.4" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.4.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1b" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.5" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1c" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.6" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.6.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1d" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.7" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.7.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1e" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.8" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.8.cmml">y</mi></mrow></msub><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">​</mo><mrow id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml"><mo maxsize="90%" minsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">(</mo><mrow id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1a" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.4" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1b" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.5" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.5.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1c" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.6" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.6.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1d" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.7" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.7.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1e" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.8" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.8.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1f" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.9" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.9.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1g" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.10" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.10.cmml">e</mi></mrow><mo mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.4" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">,</mo><mrow id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1a" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.4" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.4.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1b" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.5" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.5.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1c" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.6" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.6.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1d" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.7" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.7.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1e" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml">​</mo><mi mathsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.8" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.8.cmml">s</mi></mrow><mo maxsize="90%" minsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.5" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo maxsize="90%" minsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo maxsize="90%" minsize="90%" id="alg1.l22.m1.1.1.1.1.1.1.1.1.3" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo maxsize="90%" minsize="90%" id="alg1.l22.m1.1.1.1.1.1.3" xref="alg1.l22.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l22.m1.1b"><apply id="alg1.l22.m1.1.1.cmml" xref="alg1.l22.m1.1.1"><ci id="alg1.l22.m1.1.1.2.cmml" xref="alg1.l22.m1.1.1.2">←</ci><ci id="alg1.l22.m1.1.1.3.cmml" xref="alg1.l22.m1.1.1.3">𝑄</ci><apply id="alg1.l22.m1.1.1.1.cmml" xref="alg1.l22.m1.1.1.1"><union id="alg1.l22.m1.1.1.1.2.cmml" xref="alg1.l22.m1.1.1.1.2"></union><ci id="alg1.l22.m1.1.1.1.3.cmml" xref="alg1.l22.m1.1.1.1.3">𝑄</ci><set id="alg1.l22.m1.1.1.1.1.2.cmml" xref="alg1.l22.m1.1.1.1.1.1"><apply id="alg1.l22.m1.1.1.1.1.1.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1"><times id="alg1.l22.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.2"></times><ci id="alg1.l22.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.3">𝐹</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.4.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.4">𝑖</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.5.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.5">𝑙</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.6.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.6">𝑡</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.7.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.7">𝑒</ci><apply id="alg1.l22.m1.1.1.1.1.1.1.8.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.8"><csymbol cd="ambiguous" id="alg1.l22.m1.1.1.1.1.1.1.8.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.8">subscript</csymbol><ci id="alg1.l22.m1.1.1.1.1.1.1.8.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.8.2">𝑟</ci><cn type="integer" id="alg1.l22.m1.1.1.1.1.1.1.8.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.8.3">2</cn></apply><apply id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1"><times id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.2"></times><apply id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.2">𝑀</ci><cn type="integer" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.3.3">2</cn></apply><apply id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1"><times id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.3"></times><apply id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4">subscript</csymbol><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.2">𝑃</ci><apply id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3"><times id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.1"></times><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.2">𝑄</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.3">𝑢</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.4.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.4">𝑎</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.5.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.5">𝑙</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.6.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.6">𝑖</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.7.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.7">𝑡</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.8.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.4.3.8">𝑦</ci></apply></apply><interval closure="open" id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2"><apply id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><times id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"></times><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3">𝑎</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.4.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.4">𝑛</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.5.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.5">𝑑</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.6.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.6">𝑖</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.7.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.7">𝑑</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.8.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.8">𝑎</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.9.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.9">𝑡</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.10.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.10">𝑒</ci></apply><apply id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2"><times id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.1"></times><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.2">𝑟</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.3">𝑒</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.4.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.4">𝑠</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.5.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.5">𝑢</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.6.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.6">𝑙</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.7.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.7">𝑡</ci><ci id="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.8.cmml" xref="alg1.l22.m1.1.1.1.1.1.1.1.1.1.1.1.1.2.2.2.8">𝑠</ci></apply></interval></apply></apply></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l22.m1.1c">Q\leftarrow Q\cup\{Filter_{2}(M_{2}(P_{Quality}(candidate,results)))\}</annotation></semantics></math><span id="alg1.l22.3" class="ltx_text" style="font-size:90%;">
</span>
</div>
<div id="alg1.l23" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline"><span id="alg1.l23.1.1.1" class="ltx_text" style="font-size:80%;">23:</span></span><span id="alg1.l23.2" class="ltx_text ltx_font_bold" style="font-size:90%;">end</span><span id="alg1.l23.3" class="ltx_text" style="font-size:90%;"> </span><span id="alg1.l23.4" class="ltx_text ltx_font_bold" style="font-size:90%;">while</span>
</div>
</div>
</figure>
</span></div>
</figure>
<figure id="S2.F2" class="ltx_figure"><img src="/html/2408.12733/assets/figures/data_generation_pipeline.png" id="S2.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="509" height="237" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span><span id="S2.F2.2.1" class="ltx_text" style="font-size:90%;">SQL-GEN to generate diverse and high-quality synthetic Text-to-SQL samples for any database.</span></figcaption>
</figure>
<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Synthetic Text-to-SQL Data Generation</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">The initial step of SQL-GEN involves creating a pool of simple queries by extracting template question-SQL pairs. Building on this, we expand the templates using LLMs and dialect-specific tutorials rather than relying solely on extracted templates. After expanding these templates, each one is converted into an actual SQL query, and a corresponding question is generated by passing a sample database to the LLM. Subsequently, all generated question-SQL pairs, along with their execution results, undergo a quality-checking step to ensure they accurately match each other and effectively extract valuable information from the database. Throughout this process, we apply filtering to remove low-quality samples at each step.</p>
</div>
<section id="S2.SS1.SSS0.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="section..seed_template" id="section..seed_template" class="ltx_anchor">Extraction of Seed Templates:</a></h5>

<div id="S2.SS1.SSS0.Px1.p1" class="ltx_para">
<p id="S2.SS1.SSS0.Px1.p1.1" class="ltx_p">Similar to <cite class="ltx_cite ltx_citemacro_citet">Wu et al. (<a href="#bib.bib44" title="" class="ltx_ref">2021</a>); Yu et al. (<a href="#bib.bib51" title="" class="ltx_ref">2020</a>)</cite>, we extract SQL templates by abstracting all of the schema mentions in the queries from the Spider dataset to serve as a foundational pool for generating more diverse queries.
Since the seed queries are initially written in SQLite, for the other dialects, we transpiled these queries to the other target dialects using the SQLGlot parser <cite class="ltx_cite ltx_citemacro_citep">(Mao, <a href="#bib.bib25" title="" class="ltx_ref">2023</a>)</cite> before extracting their SQL query templates.</p>
</div>
</section>
<section id="S2.SS1.SSS0.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="section..template_expansion" id="section..template_expansion" class="ltx_anchor">Templates Expansion From Tutorials:</a></h5>

<div id="S2.SS1.SSS0.Px2.p1" class="ltx_para">
<p id="S2.SS1.SSS0.Px2.p1.1" class="ltx_p">The initial pool of query templates created in the previous step presents two main challenges. First, the extracted templates are derived from simple SQL queries, which are relatively basic compared to the queries found in other SQLite benchmarks like BIRD <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a href="#bib.bib23" title="" class="ltx_ref">2024b</a>)</cite>. Second, for dialects other than SQLite, the seed templates—originally designed for SQLite—do not utilize most of the dialect-specific SQL functions from other dialects. To address these, we expand the templates for each dialect using LLMs with in-context learning <cite class="ltx_cite ltx_citemacro_citep">(Brown et al., <a href="#bib.bib6" title="" class="ltx_ref">2020</a>; Wei et al., <a href="#bib.bib42" title="" class="ltx_ref">2022</a>)</cite>. To prepare the LLMs for template expansion, we first scrape online tutorials for each target dialect, focusing on the use of dialect-specific SQL functions and keywords. We then randomly select a seed template from the pool, pairing it with a random tutorial document about a dialect-specific keyword or function, and prompt the LLM to increase the complexity of the template, drawing inspiration from the document. To ensure the validity of the templates for all of the different dialects, we parse all generated SQL templates using SQLglot’s dialect-specific parser <cite class="ltx_cite ltx_citemacro_citep">(Mao, <a href="#bib.bib25" title="" class="ltx_ref">2023</a>)</cite>. <a href="#A1.F9" title="In A.10.1 Template Expansion ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">9</span></a> demonstrates an examples of template expansion step for the BigQuery dialect. Additionally, <a href="#A1.SS10.SSS1" title="A.10.1 Template Expansion ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.10.1</span></a> provides the prompt that has been used for template expansion.</p>
</div>
</section>
<section id="S2.SS1.SSS0.Px3" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="section..sample_generation" id="section..sample_generation" class="ltx_anchor">Sample Generation:</a></h5>

<div id="S2.SS1.SSS0.Px3.p1" class="ltx_para">
<p id="S2.SS1.SSS0.Px3.p1.1" class="ltx_p">After generating the SQL templates, our next step is to convert them into valid question-SQL pairs. For this process, we select a template along with a database schema with a random row from any given database. Random database rows are necessary since the LLM should be able to fill conditions with actual database values. We can source our database schemas from different datasets such as Spider or BIRD train/development databases. As these are originally in SQLite, we migrate these databases to each target dialect for dialects other than SQLite. We then pass the combination to an LLM, instructing it to integrate schema mentions into the templates and generate corresponding questions that align with the SQL queries.
After generating the SQL queries, we apply heuristic-based semantic and syntactic filters to ensure the high quality of both the queries and questions. The specifics of these filters are detailed in the <a href="#A1.SS6" title="A.6 Sample Generation Filters ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.6</span></a>. Additionally, <a href="#A1.SS10.SSS2" title="A.10.2 Sample Generation ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.10.2</span></a> includes the detailed prompt which is used in this step.</p>
</div>
</section>
<section id="S2.SS1.SSS0.Px4" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="section..data_quality_check" id="section..data_quality_check" class="ltx_anchor">Data Quality Check:</a></h5>

<div id="S2.SS1.SSS0.Px4.p1" class="ltx_para">
<p id="S2.SS1.SSS0.Px4.p1.1" class="ltx_p">To ensure high quality generation of question-SQL pairs, we present the question-SQL pairs alongside the first <math id="S2.SS1.SSS0.Px4.p1.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S2.SS1.SSS0.Px4.p1.1.m1.1a"><mi id="S2.SS1.SSS0.Px4.p1.1.m1.1.1" xref="S2.SS1.SSS0.Px4.p1.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px4.p1.1.m1.1b"><ci id="S2.SS1.SSS0.Px4.p1.1.m1.1.1.cmml" xref="S2.SS1.SSS0.Px4.p1.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px4.p1.1.m1.1c">K</annotation></semantics></math> rows of their execution results over the database to an LLM. This LLM is tasked with verifying that the question and SQL pair match appropriately and that the question is free of ambiguity. To avoid repeating the same errors, we employ a different LLM, not used in previous steps, to act as the judge. <a href="#A1.SS4.SSS1" title="A.4.1 Quality Check Ablation ‣ A.4 Method Seeds ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.4.1</span></a> provides a detailed analysis of the importance of utilizing a secondary LLM and highlights the importance of this step. <a href="#A1.SS10.SSS3" title="A.10.3 Quality Check ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.10.3</span></a> provides the prompt that has been used for quality checking.</p>
</div>
</section>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Dialect Experts Merging</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">With SQL-GEN, we can generate question-SQL pairs for various dialects and train corresponding dialect-specific models. However, in real-world scenarios, users often manage databases across different dialects, necessitating the deployment of multiple models, which can be resource-intensive. Additionally, while each dialect features unique keywords and functions, there is commonality across some SQL keywords across dialects. By merging these dialect experts into a single model, we facilitate sharing of common knowledge, addressing the challenge of serving multiple models simultaneously. We begin by detailing Spherical Linear Interpolation for model merging, and subsequently introduce our proposed method utilizing the Mixture of Experts (MoE) architecture.</p>
</div>
<section id="S2.SS2.SSS0.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="subsubsubsec..SLERP" id="subsubsubsec..SLERP" class="ltx_anchor">SLERP:</a></h5>

<div id="S2.SS2.SSS0.Px1.p1" class="ltx_para">
<p id="S2.SS2.SSS0.Px1.p1.1" class="ltx_p">Spherical Linear Interpolation, or SLERP, provides a method for achieving smooth transitions between two vectors. This technique ensures uniform motion and upholds the spherical space’s intrinsic geometric qualities. The process begins by normalizing the input vectors to have a magnitude of one. Subsequently, the angle between these vectors is determined. In instances where the vectors are almost col-linear, the method defaults to linear interpolation to optimize efficiency. For other cases, SLERP calculates scale factors that depend on the interpolation factor <span id="S2.SS2.SSS0.Px1.p1.1.1" class="ltx_text ltx_font_italic">t</span> and the angular separation of the vectors.</p>
</div>
</section>
<section id="S2.SS2.SSS0.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="subsubsubsec" id="subsubsubsec" class="ltx_anchor">MoE:</a></h5>

<div id="S2.SS2.SSS0.Px2.p1" class="ltx_para">
<p id="S2.SS2.SSS0.Px2.p1.1" class="ltx_p">MoE models are a sparse, decoder-only, transformer-based architecture, where each layer in this model contains more than one MLP blocks, or "experts," and a router network that selects experts to process each token at every position, combining their outputs. This architecture modifies the traditional MLP sub-layer within transformer blocks by replacing it with multiple experts, each having an independent set of parameters <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a href="#bib.bib19" title="" class="ltx_ref">2024</a>; Fedus et al., <a href="#bib.bib9" title="" class="ltx_ref">2022a</a>)</cite>.</p>
</div>
<div id="S2.SS2.SSS0.Px2.p2" class="ltx_para">
<p id="S2.SS2.SSS0.Px2.p2.1" class="ltx_p">In our proposed methodology, the MLP layers of each expert within the MoE model are initialized using the MLP sub-layers from models previously trained on distinct dialects. Concurrently, the shared self-attention layers incorporate merging strategies such as SLERP, as previously described. An important part of the MoE framework is its gating mechanism or routers. We propose to initialize these gates at each layer by averaging the hidden vectors of the dialect-specific keywords, derived from the training datasets of each model and based on the top <math id="S2.SS2.SSS0.Px2.p2.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S2.SS2.SSS0.Px2.p2.1.m1.1a"><mi id="S2.SS2.SSS0.Px2.p2.1.m1.1.1" xref="S2.SS2.SSS0.Px2.p2.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p2.1.m1.1b"><ci id="S2.SS2.SSS0.Px2.p2.1.m1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p2.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p2.1.m1.1c">K</annotation></semantics></math> most frequently occurring dialect-specific keywords in our generated question-SQL pairs. This process begins by cataloging all dialect-specific keywords from our generated SQL queries, sorting them by frequency, and selecting the top-k keywords. These keywords are then processed by the model, where the hidden representations from the self-attention sub-modules for all tokens of these keywords are used to initialize the gates. Although this method shows enhanced performance even without further training compared to some previous model merging techniques, we achieve better coordination among the sub-models by fine-tuning the MoE architecture on a mixed dataset from various dialects. <a href="#S2.F3" title="In MoE: ‣ 2.2 Dialect Experts Merging ‣ 2 Methodology ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">3</span></a> illustrates one transformer block of our method for constructing an MoE model from three distinct dialect expert models.</p>
</div>
<figure id="S2.F3" class="ltx_figure"><img src="/html/2408.12733/assets/figures/MoE.png" id="S2.F3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="419" height="182" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span><span id="S2.F3.2.1" class="ltx_text" style="font-size:90%;">Our proposed method to initialize one transformer block of a MoE model from different dialect experts, exemplified here for Postgres, SQLite, and BigQuery dialects to create an all in one model to address all.</span></figcaption>
</figure>
</section>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Experiment</h2>

<section id="S3.SS0.SSS0.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Datasets:</h5>

<div id="S3.SS0.SSS0.Px1.p1" class="ltx_para">
<p id="S3.SS0.SSS0.Px1.p1.1" class="ltx_p">To evaluate the quality of our generated queries, we used benchmark datasets tailored for three dialects. For SQLite, we use two datasets from BIRD: 1) the development set and 2) the mini development set. For PostgreSQL, we utilize three benchmarks: 1) BIRD queries transpiled to PostgreSQL, 2) BIRD PostgreSQL mini development set, and 3) Pagila—a dataset specific to PostgreSQL containing real-world queries originally written for PostgreSQL, which are extracted from online resources. For BigQuery, we use two datasets: 1) BIRD queries transpiled to BigQuery, and 2) the GitHub_repositories dataset, a public BigQuery dataset featuring BigQuery-specific sample question/SQL pairs obtained from tutorials and online resources. Further details of the datasets are provided in <a href="#A1.SS2" title="A.2 Datasets Details ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.2</span></a>.</p>
</div>
</section>
<section id="S3.SS0.SSS0.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Baselines:</h5>

<div id="S3.SS0.SSS0.Px2.p1" class="ltx_para">
<p id="S3.SS0.SSS0.Px2.p1.3" class="ltx_p">In order to evaluate the quality of the synthetic queries generated with SQL-GEN, we compare the performance of the models trained on synthetic data with the following datasets:
1) Gretel <cite class="ltx_cite ltx_citemacro_citep">(Gretel, <a href="#bib.bib12" title="" class="ltx_ref">2024</a>)</cite>: Gretel Text-to-SQL dataset consists <math id="S3.SS0.SSS0.Px2.p1.1.m1.1" class="ltx_Math" alttext="&gt;" display="inline"><semantics id="S3.SS0.SSS0.Px2.p1.1.m1.1a"><mo id="S3.SS0.SSS0.Px2.p1.1.m1.1.1" xref="S3.SS0.SSS0.Px2.p1.1.m1.1.1.cmml">&gt;</mo><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p1.1.m1.1b"><gt id="S3.SS0.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S3.SS0.SSS0.Px2.p1.1.m1.1.1"></gt></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p1.1.m1.1c">&gt;</annotation></semantics></math>100K high-quality synthetic Text-to-SQL samples with a coverage across 100 distinct domains. 2) SQL create context <cite class="ltx_cite ltx_citemacro_citep">(b mc2, <a href="#bib.bib4" title="" class="ltx_ref">2023</a>)</cite>: This dataset consists <math id="S3.SS0.SSS0.Px2.p1.2.m2.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS0.SSS0.Px2.p1.2.m2.1a"><mo id="S3.SS0.SSS0.Px2.p1.2.m2.1.1" xref="S3.SS0.SSS0.Px2.p1.2.m2.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p1.2.m2.1b"><csymbol cd="latexml" id="S3.SS0.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S3.SS0.SSS0.Px2.p1.2.m2.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p1.2.m2.1c">\sim</annotation></semantics></math>78K samples, obtained from the Spider <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib49" title="" class="ltx_ref">2018b</a>)</cite> and WikiSQL <cite class="ltx_cite ltx_citemacro_citep">(Zhong et al., <a href="#bib.bib53" title="" class="ltx_ref">2017</a>)</cite> datasets by cleaning these sources. All queries were generated through a human-in-the-loop process, making it a strong baseline for comparing LLM-generated data with human-annotated data. 3) BIRD train set <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a href="#bib.bib23" title="" class="ltx_ref">2024b</a>)</cite>: This dataset consists of <math id="S3.SS0.SSS0.Px2.p1.3.m3.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS0.SSS0.Px2.p1.3.m3.1a"><mo id="S3.SS0.SSS0.Px2.p1.3.m3.1.1" xref="S3.SS0.SSS0.Px2.p1.3.m3.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS0.Px2.p1.3.m3.1b"><csymbol cd="latexml" id="S3.SS0.SSS0.Px2.p1.3.m3.1.1.cmml" xref="S3.SS0.SSS0.Px2.p1.3.m3.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS0.Px2.p1.3.m3.1c">\sim</annotation></semantics></math>10k human-annotated samples. Queries are considered more complex in comparison to the Spider and WikiSQL benchmarks.</p>
</div>
<div id="S3.SS0.SSS0.Px2.p2" class="ltx_para">
<p id="S3.SS0.SSS0.Px2.p2.1" class="ltx_p">For dialects other than SQLite, all queries from the baselines are transpiled to the target dialects to ensure their validity. Details of the models and metrics are provided in <a href="#A1.SS3" title="A.3 Models &amp; Metrics ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.3</span></a> and details of the seed templates and tutorials are provided in <a href="#A1.SS4" title="A.4 Method Seeds ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.4</span></a>. Additionally, in <a href="#A1.SS7" title="A.7 SQL keywords ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.7</span></a>, we provided the analysis on dialect-specific keywords across different datasets.</p>
</div>
</section>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>SQLite Results</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.1" class="ltx_p">Utilizing SQL-GEN, we generate 20K samples for the SQLite dialect. <a href="#A1.SS4.SSS2" title="A.4.2 The Impact of the Sample Size ‣ A.4 Method Seeds ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.4.2</span></a> studies the impact of the number of samples. We train three different models with different sizes from 7B to 22B on these samples. For a fair comparison with the baselines, we only use the Spider databases for generating the synthetic data. For this comparison, we train models on: 1) The entire BIRD training set; 2) 20K samples from the SQL Create Context <cite class="ltx_cite ltx_citemacro_citep">(b mc2, <a href="#bib.bib4" title="" class="ltx_ref">2023</a>)</cite>; and 3) 20K samples from the Gretel Text-to-SQL datasets <cite class="ltx_cite ltx_citemacro_citep">(Gretel, <a href="#bib.bib12" title="" class="ltx_ref">2024</a>)</cite>. We assess the Text-to-SQL performance of these models on the BIRD development set and minidev set (see <a href="#S3.T1" title="In 3.1 SQLite Results ‣ 3 Experiment ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">1</span></a>). Additionally, we evaluate the zero-shot performance of each model and calculate the performance gains for each method relative to zero-shot.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">SQL-GEN generated samples significantly surpass the Gretel Text-to-SQL dataset, achieving a large performance gain of approximately 10% across all model sizes.
Furthermore, LLMs trained on SQL-GEN synthetic data consistently outperform those trained on the human-annotated SQL Create Context data, underscoring the high quality of SQL-GEN synthetic data. While LLMs trained on the BIRD dataset consistently exhibit the highest performance on BIRD development sets, this outcome is likely due to overfitting to the canonical input distribution of the BIRD train set which is similar to its development set <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib51" title="" class="ltx_ref">2020</a>)</cite>.</p>
</div>
<figure id="S3.T1" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 1: </span><span id="S3.T1.4.1" class="ltx_text" style="font-size:90%;">Execution Accuracy (EX) of SQLite Models on the BIRD development set and minidev set using CodeLlama 7B, CodeGemma 7B, and Codestral 22B Models. "-" denotes the zero-shot performance of the models. OS refers to the dataset that is created using open-source LLMs (Llama 3 + Mixtral)</span></figcaption>
<div id="S3.T1.2" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:325.2pt;height:215.8pt;vertical-align:-0.6pt;"><span class="ltx_transformed_inner" style="transform:translate(-95.9pt,63.4pt) scale(0.629109055203989,0.629109055203989) ;">
<table id="S3.T1.2.2" class="ltx_tabular ltx_align_middle">
<tr id="S3.T1.2.2.2" class="ltx_tr">
<td id="S3.T1.2.2.2.3" class="ltx_td ltx_align_left ltx_border_tt">Training Dataset</td>
<td id="S3.T1.2.2.2.4" class="ltx_td ltx_align_center ltx_border_tt">Model</td>
<td id="S3.T1.2.2.2.5" class="ltx_td ltx_align_center ltx_border_tt">Dataset</td>
<td id="S3.T1.2.2.2.6" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T1.1.1.1.1" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T1.1.1.1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T1.1.1.1.1.m1.1a"><mi mathvariant="normal" id="S3.T1.1.1.1.1.m1.1.1" xref="S3.T1.1.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T1.1.1.1.1.m1.1b"><ci id="S3.T1.1.1.1.1.m1.1.1.cmml" xref="S3.T1.1.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.1.1.1.1.m1.1c">\Delta</annotation></semantics></math>EX</td>
<td id="S3.T1.2.2.2.7" class="ltx_td ltx_align_center ltx_border_tt">Dataset</td>
<td id="S3.T1.2.2.2.8" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T1.2.2.2.2" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T1.2.2.2.2.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T1.2.2.2.2.m1.1a"><mi mathvariant="normal" id="S3.T1.2.2.2.2.m1.1.1" xref="S3.T1.2.2.2.2.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T1.2.2.2.2.m1.1b"><ci id="S3.T1.2.2.2.2.m1.1.1.cmml" xref="S3.T1.2.2.2.2.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.2.2.2.2.m1.1c">\Delta</annotation></semantics></math>EX</td>
</tr>
<tr id="S3.T1.2.2.3" class="ltx_tr">
<td id="S3.T1.2.2.3.1" class="ltx_td ltx_align_left ltx_border_t">Bird train set</td>
<td id="S3.T1.2.2.3.2" class="ltx_td ltx_align_center ltx_border_t">CodeLlama 7B</td>
<td id="S3.T1.2.2.3.3" class="ltx_td ltx_align_center ltx_border_t">dev set</td>
<td id="S3.T1.2.2.3.4" class="ltx_td ltx_align_center ltx_border_t">40.22</td>
<td id="S3.T1.2.2.3.5" class="ltx_td ltx_align_center ltx_border_t">+22.36</td>
<td id="S3.T1.2.2.3.6" class="ltx_td ltx_align_center ltx_border_t">minidev set</td>
<td id="S3.T1.2.2.3.7" class="ltx_td ltx_align_center ltx_border_t">38.4</td>
<td id="S3.T1.2.2.3.8" class="ltx_td ltx_align_center ltx_border_t">+24.8</td>
</tr>
<tr id="S3.T1.2.2.4" class="ltx_tr">
<td id="S3.T1.2.2.4.1" class="ltx_td ltx_align_left">Our synthetic dataset (OS)</td>
<td id="S3.T1.2.2.4.2" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T1.2.2.4.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.4.4" class="ltx_td ltx_align_center">34.55</td>
<td id="S3.T1.2.2.4.5" class="ltx_td ltx_align_center">+16.69</td>
<td id="S3.T1.2.2.4.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.4.7" class="ltx_td ltx_align_center">28.4</td>
<td id="S3.T1.2.2.4.8" class="ltx_td ltx_align_center">+14.8</td>
</tr>
<tr id="S3.T1.2.2.5" class="ltx_tr">
<td id="S3.T1.2.2.5.1" class="ltx_td ltx_align_left">Our synthetic dataset (Gemini)</td>
<td id="S3.T1.2.2.5.2" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T1.2.2.5.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.5.4" class="ltx_td ltx_align_center"><span id="S3.T1.2.2.5.4.1" class="ltx_text ltx_font_bold">38.33</span></td>
<td id="S3.T1.2.2.5.5" class="ltx_td ltx_align_center">+20.47</td>
<td id="S3.T1.2.2.5.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.5.7" class="ltx_td ltx_align_center"><span id="S3.T1.2.2.5.7.1" class="ltx_text ltx_font_bold">30.00</span></td>
<td id="S3.T1.2.2.5.8" class="ltx_td ltx_align_center">+16.4</td>
</tr>
<tr id="S3.T1.2.2.6" class="ltx_tr">
<td id="S3.T1.2.2.6.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="S3.T1.2.2.6.2" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T1.2.2.6.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.6.4" class="ltx_td ltx_align_center">26.01</td>
<td id="S3.T1.2.2.6.5" class="ltx_td ltx_align_center">+8.15</td>
<td id="S3.T1.2.2.6.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.6.7" class="ltx_td ltx_align_center">19.6</td>
<td id="S3.T1.2.2.6.8" class="ltx_td ltx_align_center">+6.0</td>
</tr>
<tr id="S3.T1.2.2.7" class="ltx_tr">
<td id="S3.T1.2.2.7.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="S3.T1.2.2.7.2" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T1.2.2.7.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.7.4" class="ltx_td ltx_align_center">18.31</td>
<td id="S3.T1.2.2.7.5" class="ltx_td ltx_align_center">+0.45</td>
<td id="S3.T1.2.2.7.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.7.7" class="ltx_td ltx_align_center">12.6</td>
<td id="S3.T1.2.2.7.8" class="ltx_td ltx_align_center">-1.0</td>
</tr>
<tr id="S3.T1.2.2.8" class="ltx_tr">
<td id="S3.T1.2.2.8.1" class="ltx_td ltx_align_left">-</td>
<td id="S3.T1.2.2.8.2" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T1.2.2.8.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.8.4" class="ltx_td ltx_align_center">17.86</td>
<td id="S3.T1.2.2.8.5" class="ltx_td ltx_align_center">0</td>
<td id="S3.T1.2.2.8.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.8.7" class="ltx_td ltx_align_center">13.6</td>
<td id="S3.T1.2.2.8.8" class="ltx_td ltx_align_center">0.0</td>
</tr>
<tr id="S3.T1.2.2.9" class="ltx_tr">
<td id="S3.T1.2.2.9.1" class="ltx_td ltx_align_left ltx_border_t">Bird train set</td>
<td id="S3.T1.2.2.9.2" class="ltx_td ltx_align_center ltx_border_t">CodeGemma 7B</td>
<td id="S3.T1.2.2.9.3" class="ltx_td ltx_align_center ltx_border_t">dev set</td>
<td id="S3.T1.2.2.9.4" class="ltx_td ltx_align_center ltx_border_t">45.63</td>
<td id="S3.T1.2.2.9.5" class="ltx_td ltx_align_center ltx_border_t">+11.87</td>
<td id="S3.T1.2.2.9.6" class="ltx_td ltx_align_center ltx_border_t">minidev set</td>
<td id="S3.T1.2.2.9.7" class="ltx_td ltx_align_center ltx_border_t">40.4</td>
<td id="S3.T1.2.2.9.8" class="ltx_td ltx_align_center ltx_border_t">+10.4</td>
</tr>
<tr id="S3.T1.2.2.10" class="ltx_tr">
<td id="S3.T1.2.2.10.1" class="ltx_td ltx_align_left">Our synthetic dataset (OS)</td>
<td id="S3.T1.2.2.10.2" class="ltx_td ltx_align_center">CodeGemma 7B</td>
<td id="S3.T1.2.2.10.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.10.4" class="ltx_td ltx_align_center">41.13</td>
<td id="S3.T1.2.2.10.5" class="ltx_td ltx_align_center">+7.37</td>
<td id="S3.T1.2.2.10.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.10.7" class="ltx_td ltx_align_center">35.6</td>
<td id="S3.T1.2.2.10.8" class="ltx_td ltx_align_center">+5.6</td>
</tr>
<tr id="S3.T1.2.2.11" class="ltx_tr">
<td id="S3.T1.2.2.11.1" class="ltx_td ltx_align_left">Our synthetic dataset (Gemini)</td>
<td id="S3.T1.2.2.11.2" class="ltx_td ltx_align_center">CodeGemma 7B</td>
<td id="S3.T1.2.2.11.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.11.4" class="ltx_td ltx_align_center"><span id="S3.T1.2.2.11.4.1" class="ltx_text ltx_font_bold">42.37</span></td>
<td id="S3.T1.2.2.11.5" class="ltx_td ltx_align_center">+8.64</td>
<td id="S3.T1.2.2.11.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.11.7" class="ltx_td ltx_align_center"><span id="S3.T1.2.2.11.7.1" class="ltx_text ltx_font_bold">36.4</span></td>
<td id="S3.T1.2.2.11.8" class="ltx_td ltx_align_center">+6.4</td>
</tr>
<tr id="S3.T1.2.2.12" class="ltx_tr">
<td id="S3.T1.2.2.12.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="S3.T1.2.2.12.2" class="ltx_td ltx_align_center">CodeGemma 7B</td>
<td id="S3.T1.2.2.12.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.12.4" class="ltx_td ltx_align_center">30.83</td>
<td id="S3.T1.2.2.12.5" class="ltx_td ltx_align_center">-2.93</td>
<td id="S3.T1.2.2.12.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.12.7" class="ltx_td ltx_align_center">30.6</td>
<td id="S3.T1.2.2.12.8" class="ltx_td ltx_align_center">+0.6</td>
</tr>
<tr id="S3.T1.2.2.13" class="ltx_tr">
<td id="S3.T1.2.2.13.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="S3.T1.2.2.13.2" class="ltx_td ltx_align_center">CodeGemma 7B</td>
<td id="S3.T1.2.2.13.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.13.4" class="ltx_td ltx_align_center">28.87</td>
<td id="S3.T1.2.2.13.5" class="ltx_td ltx_align_center">-4.89</td>
<td id="S3.T1.2.2.13.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.13.7" class="ltx_td ltx_align_center">29.6</td>
<td id="S3.T1.2.2.13.8" class="ltx_td ltx_align_center">-0.4</td>
</tr>
<tr id="S3.T1.2.2.14" class="ltx_tr">
<td id="S3.T1.2.2.14.1" class="ltx_td ltx_align_left">-</td>
<td id="S3.T1.2.2.14.2" class="ltx_td ltx_align_center">CodeGemma 7B</td>
<td id="S3.T1.2.2.14.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.14.4" class="ltx_td ltx_align_center">33.76</td>
<td id="S3.T1.2.2.14.5" class="ltx_td ltx_align_center">0</td>
<td id="S3.T1.2.2.14.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.14.7" class="ltx_td ltx_align_center">30.0</td>
<td id="S3.T1.2.2.14.8" class="ltx_td ltx_align_center">0.0</td>
</tr>
<tr id="S3.T1.2.2.15" class="ltx_tr">
<td id="S3.T1.2.2.15.1" class="ltx_td ltx_align_left ltx_border_t">Bird train set</td>
<td id="S3.T1.2.2.15.2" class="ltx_td ltx_align_center ltx_border_t">Codestral 22B</td>
<td id="S3.T1.2.2.15.3" class="ltx_td ltx_align_center ltx_border_t">dev set</td>
<td id="S3.T1.2.2.15.4" class="ltx_td ltx_align_center ltx_border_t">53.12</td>
<td id="S3.T1.2.2.15.5" class="ltx_td ltx_align_center ltx_border_t">+8.6</td>
<td id="S3.T1.2.2.15.6" class="ltx_td ltx_align_center ltx_border_t">minidev set</td>
<td id="S3.T1.2.2.15.7" class="ltx_td ltx_align_center ltx_border_t">50.4</td>
<td id="S3.T1.2.2.15.8" class="ltx_td ltx_align_center ltx_border_t">+10.0</td>
</tr>
<tr id="S3.T1.2.2.16" class="ltx_tr">
<td id="S3.T1.2.2.16.1" class="ltx_td ltx_align_left">Our synthetic dataset (OS)</td>
<td id="S3.T1.2.2.16.2" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T1.2.2.16.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.16.4" class="ltx_td ltx_align_center">47.52</td>
<td id="S3.T1.2.2.16.5" class="ltx_td ltx_align_center">+3.0</td>
<td id="S3.T1.2.2.16.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.16.7" class="ltx_td ltx_align_center">44.4</td>
<td id="S3.T1.2.2.16.8" class="ltx_td ltx_align_center">+4.0</td>
</tr>
<tr id="S3.T1.2.2.17" class="ltx_tr">
<td id="S3.T1.2.2.17.1" class="ltx_td ltx_align_left">Our synthetic dataset (Gemini)</td>
<td id="S3.T1.2.2.17.2" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T1.2.2.17.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.17.4" class="ltx_td ltx_align_center"><span id="S3.T1.2.2.17.4.1" class="ltx_text ltx_font_bold">50.45</span></td>
<td id="S3.T1.2.2.17.5" class="ltx_td ltx_align_center">+5.93</td>
<td id="S3.T1.2.2.17.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.17.7" class="ltx_td ltx_align_center"><span id="S3.T1.2.2.17.7.1" class="ltx_text ltx_font_bold">46.6</span></td>
<td id="S3.T1.2.2.17.8" class="ltx_td ltx_align_center">+6.2</td>
</tr>
<tr id="S3.T1.2.2.18" class="ltx_tr">
<td id="S3.T1.2.2.18.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="S3.T1.2.2.18.2" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T1.2.2.18.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.18.4" class="ltx_td ltx_align_center">37.87</td>
<td id="S3.T1.2.2.18.5" class="ltx_td ltx_align_center">-6.65</td>
<td id="S3.T1.2.2.18.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.18.7" class="ltx_td ltx_align_center">30.8</td>
<td id="S3.T1.2.2.18.8" class="ltx_td ltx_align_center">-9.6</td>
</tr>
<tr id="S3.T1.2.2.19" class="ltx_tr">
<td id="S3.T1.2.2.19.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="S3.T1.2.2.19.2" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T1.2.2.19.3" class="ltx_td ltx_align_center">dev set</td>
<td id="S3.T1.2.2.19.4" class="ltx_td ltx_align_center">40.80</td>
<td id="S3.T1.2.2.19.5" class="ltx_td ltx_align_center">-3.72</td>
<td id="S3.T1.2.2.19.6" class="ltx_td ltx_align_center">minidev set</td>
<td id="S3.T1.2.2.19.7" class="ltx_td ltx_align_center">36.8</td>
<td id="S3.T1.2.2.19.8" class="ltx_td ltx_align_center">-3.6</td>
</tr>
<tr id="S3.T1.2.2.20" class="ltx_tr">
<td id="S3.T1.2.2.20.1" class="ltx_td ltx_align_left ltx_border_bb">-</td>
<td id="S3.T1.2.2.20.2" class="ltx_td ltx_align_center ltx_border_bb">Codestral 22B</td>
<td id="S3.T1.2.2.20.3" class="ltx_td ltx_align_center ltx_border_bb">dev set</td>
<td id="S3.T1.2.2.20.4" class="ltx_td ltx_align_center ltx_border_bb">44.52</td>
<td id="S3.T1.2.2.20.5" class="ltx_td ltx_align_center ltx_border_bb">0</td>
<td id="S3.T1.2.2.20.6" class="ltx_td ltx_align_center ltx_border_bb">minidev set</td>
<td id="S3.T1.2.2.20.7" class="ltx_td ltx_align_center ltx_border_bb">40.4</td>
<td id="S3.T1.2.2.20.8" class="ltx_td ltx_align_center ltx_border_bb">0.0</td>
</tr>
</table>
</span></div>
</figure>
<div id="S3.SS1.p3" class="ltx_para">
<p id="S3.SS1.p3.1" class="ltx_p">To pinpoint the gain is only for simple SQL queries or not, we evaluate different models in terms of their performance on different SQL query complexities of simple, medium, and challenging, presented in <a href="#A1.SS5" title="A.5 Complexity Analysis ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.5</span></a>.</p>
</div>
<section id="S3.SS1.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.1.1 </span>Database Adaptation</h4>

<div id="S3.SS1.SSS1.p1" class="ltx_para">
<p id="S3.SS1.SSS1.p1.1" class="ltx_p">SQL-GEN operates independently of specific databases, enabling the generation of high-quality synthetic data for any database. Therefore, as another use case of synthetic data, we introduce <span id="S3.SS1.SSS1.p1.1.1" class="ltx_text ltx_font_italic">Database Adaptation</span>, to improve the performance for cross-domain Text-to-SQL setting. This involves generating synthetic queries for databases for which no pre-existing question-SQL pairs are available. We apply this training in two distinct ways: (1) in-context learning, which leverages the generated queries directly within the model’s input context, and (2) model tuning, which involves supervised fine-tuning of the model weights:</p>
</div>
<section id="S3.SS1.SSS1.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Database Adaptation With Model Tuning:</h5>

<div id="S3.SS1.SSS1.Px1.p1" class="ltx_para">
<p id="S3.SS1.SSS1.Px1.p1.1" class="ltx_p">Our synthetic data generation pipeline is designed to generate question-SQL pairs for any database. To demonstrate this, we generated 10K pure synthetic question-SQL pairs across the 11 databases in the BIRD development set and separately 10K samples for the entire databases in the BIRD training set using Llama 3 and Mixtral. We then compared the performance of two model against a model trained on the original 10K training samples from the BIRD benchmark.The results are detailed in <a href="#S3.T4" title="In Database Adaptation With Model Tuning: ‣ 3.1.1 Database Adaptation ‣ 3.1 SQLite Results ‣ 3 Experiment ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">4</span></a>. The table indicates that our synthetic generation approach on the BIRD development set databases achieves performance comparable to the original BIRD training set with only 1.5% gap. This is particularly noteworthy given that generating synthetic samples is significantly less resource- and cost-intensive compared to creating 10,000 human-annotated samples. The latter involves 11 crowdsource workers to annotate the samples. Additionally, synthetic data generation on development split outperforms train split showing that SQL-Gen helps to learn unseen database and improve performance.</p>
</div>
<figure id="S3.T4" class="ltx_table">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S3.T4.1" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_top" style="width:212.5pt;">
<div id="S3.T4.1.1" class="ltx_inline-block ltx_transformed_outer" style="width:433.6pt;height:146pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(83.2pt,-28.0pt) scale(1.62252292754026,1.62252292754026) ;">
<table id="S3.T4.1.1.1" class="ltx_tabular ltx_align_middle">
<tr id="S3.T4.1.1.1.1" class="ltx_tr">
<td id="S3.T4.1.1.1.1.2" class="ltx_td ltx_align_left ltx_border_tt">Training Data</td>
<td id="S3.T4.1.1.1.1.3" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T4.1.1.1.1.1" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T4.1.1.1.1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T4.1.1.1.1.1.m1.1a"><mi mathvariant="normal" id="S3.T4.1.1.1.1.1.m1.1.1" xref="S3.T4.1.1.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T4.1.1.1.1.1.m1.1b"><ci id="S3.T4.1.1.1.1.1.m1.1.1.cmml" xref="S3.T4.1.1.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.1.1.1.1.1.m1.1c">\Delta</annotation></semantics></math>EX</td>
</tr>
<tr id="S3.T4.1.1.1.2" class="ltx_tr">
<td id="S3.T4.1.1.1.2.1" class="ltx_td ltx_align_left ltx_border_t">BIRD train set</td>
<td id="S3.T4.1.1.1.2.2" class="ltx_td ltx_align_center ltx_border_t">40.22</td>
<td id="S3.T4.1.1.1.2.3" class="ltx_td ltx_align_center ltx_border_t">+22.36</td>
</tr>
<tr id="S3.T4.1.1.1.3" class="ltx_tr">
<td id="S3.T4.1.1.1.3.1" class="ltx_td ltx_align_left">Synthetic sample on BIRD dev dbs</td>
<td id="S3.T4.1.1.1.3.2" class="ltx_td ltx_align_center">38.78</td>
<td id="S3.T4.1.1.1.3.3" class="ltx_td ltx_align_center">+20.92</td>
</tr>
<tr id="S3.T4.1.1.1.4" class="ltx_tr">
<td id="S3.T4.1.1.1.4.1" class="ltx_td ltx_align_left">Synthetic sample on BIRD train dbs</td>
<td id="S3.T4.1.1.1.4.2" class="ltx_td ltx_align_center">34.68</td>
<td id="S3.T4.1.1.1.4.3" class="ltx_td ltx_align_center">+16.82</td>
</tr>
<tr id="S3.T4.1.1.1.5" class="ltx_tr">
<td id="S3.T4.1.1.1.5.1" class="ltx_td ltx_align_left ltx_border_bb">Zero-shot (no training)</td>
<td id="S3.T4.1.1.1.5.2" class="ltx_td ltx_align_center ltx_border_bb">17.86</td>
<td id="S3.T4.1.1.1.5.3" class="ltx_td ltx_align_center ltx_border_bb">0</td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Table 2: </span><span id="S3.T4.1.3.1" class="ltx_text" style="font-size:90%;">Using our proposed pipeline to generate 10K synthetic data for BIRD development set databases.</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S3.T4.2" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_top" style="width:173.4pt;">
<div id="S3.T4.2.1" class="ltx_inline-block ltx_transformed_outer" style="width:433.6pt;height:185.8pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(111.8pt,-47.9pt) scale(2.06458064327236,2.06458064327236) ;">
<table id="S3.T4.2.1.1" class="ltx_tabular ltx_align_middle">
<tr id="S3.T4.2.1.1.1" class="ltx_tr">
<td id="S3.T4.2.1.1.1.2" class="ltx_td ltx_align_left ltx_border_tt">#ICL</td>
<td id="S3.T4.2.1.1.1.3" class="ltx_td ltx_align_center ltx_border_tt">Method</td>
<td id="S3.T4.2.1.1.1.4" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T4.2.1.1.1.1" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T4.2.1.1.1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T4.2.1.1.1.1.m1.1a"><mi mathvariant="normal" id="S3.T4.2.1.1.1.1.m1.1.1" xref="S3.T4.2.1.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T4.2.1.1.1.1.m1.1b"><ci id="S3.T4.2.1.1.1.1.m1.1.1.cmml" xref="S3.T4.2.1.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.2.1.1.1.1.m1.1c">\Delta</annotation></semantics></math>EX</td>
</tr>
<tr id="S3.T4.2.1.1.2" class="ltx_tr">
<td id="S3.T4.2.1.1.2.1" class="ltx_td ltx_align_left ltx_border_t">Zero-shot</td>
<td id="S3.T4.2.1.1.2.2" class="ltx_td ltx_align_center ltx_border_t">CodeLlama</td>
<td id="S3.T4.2.1.1.2.3" class="ltx_td ltx_align_center ltx_border_t">12.35</td>
<td id="S3.T4.2.1.1.2.4" class="ltx_td ltx_align_center ltx_border_t">0.0</td>
</tr>
<tr id="S3.T4.2.1.1.3" class="ltx_tr">
<td id="S3.T4.2.1.1.3.1" class="ltx_td ltx_align_left">1</td>
<td id="S3.T4.2.1.1.3.2" class="ltx_td ltx_align_center">CodeLlama</td>
<td id="S3.T4.2.1.1.3.3" class="ltx_td ltx_align_center">17.97</td>
<td id="S3.T4.2.1.1.3.4" class="ltx_td ltx_align_center">+5.62</td>
</tr>
<tr id="S3.T4.2.1.1.4" class="ltx_tr">
<td id="S3.T4.2.1.1.4.1" class="ltx_td ltx_align_left">5</td>
<td id="S3.T4.2.1.1.4.2" class="ltx_td ltx_align_center">CodeLlama</td>
<td id="S3.T4.2.1.1.4.3" class="ltx_td ltx_align_center">20.22</td>
<td id="S3.T4.2.1.1.4.4" class="ltx_td ltx_align_center">+7.87</td>
</tr>
<tr id="S3.T4.2.1.1.5" class="ltx_tr">
<td id="S3.T4.2.1.1.5.1" class="ltx_td ltx_align_left ltx_border_bb">10</td>
<td id="S3.T4.2.1.1.5.2" class="ltx_td ltx_align_center ltx_border_bb">CodeLlama</td>
<td id="S3.T4.2.1.1.5.3" class="ltx_td ltx_align_center ltx_border_bb">22.47</td>
<td id="S3.T4.2.1.1.5.4" class="ltx_td ltx_align_center ltx_border_bb">+10.12</td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Table 3: </span><span id="S3.T4.2.3.1" class="ltx_text" style="font-size:90%;">Using SQL-GEN to generate synthetic data for the given database. #ICL denotes the number of in-context learning samples used in the prompts.</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span><span id="S3.T4.4.1" class="ltx_text" style="font-size:90%;">Evaluating the database adaptation with CodeLlama 7B model on BIRD dev set.</span></figcaption>
</figure>
</section>
<section id="S3.SS1.SSS1.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Database Adaptation with In-context Learning:</h5>

<div id="S3.SS1.SSS1.Px2.p1" class="ltx_para">
<p id="S3.SS1.SSS1.Px2.p1.1" class="ltx_p">An alternative method to enhance the performance of LLMs on task-specific datasets is through in-context learning <cite class="ltx_cite ltx_citemacro_citep">(Brown et al., <a href="#bib.bib6" title="" class="ltx_ref">2020</a>)</cite>. We explore the concept of database adaptation through in-context learning, using synthetic queries as few-shot in-context samples without additional model training. To evaluate this approach, we generate 500 synthetic samples for the California schools database from the BIRD development set. We then test the model’s performance on 89 samples from this database using different numbers of in-context samples. The results, presented in <a href="#S3.T4" title="In Database Adaptation With Model Tuning: ‣ 3.1.1 Database Adaptation ‣ 3.1 SQLite Results ‣ 3 Experiment ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">4</span></a>. For selecting the few-shot samples, we use cosine similarity between question embeddings. These results demonstrate that we can achieve a 10% improvement in accuracy without any training.</p>
</div>
</section>
</section>
<section id="S3.SS1.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.1.2 </span>Data Augmentation</h4>

<div id="S3.SS1.SSS2.p1" class="ltx_para">
<p id="S3.SS1.SSS2.p1.1" class="ltx_p">Beyond merely creating a pool of pure synthetic question-SQL pairs for training, synthetic data generation offers the potential to augment existing datasets (e.g. mixing synthetic data with original dataset), thereby enhancing model performance beyond what is achievable with solely the available data. This section delves into the possibilities of integrating synthetic data generated for specific target databases (as discussed in Database Adaptation, see <a href="#S3.SS1.SSS1" title="3.1.1 Database Adaptation ‣ 3.1 SQLite Results ‣ 3 Experiment ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">3.1.1</span></a>) with pre-existing training datasets. To this end, we merge 10K synthetic question-SQL pairs generated on the BIRD development databases with the 10K pairs from the BIRD training set. We then trained various models using this combined dataset and compared their performance to models trained solely on the original BIRD training set. For a balanced comparison, models using the combined datasets are trained for only one epoch, whereas those trained exclusively on the BIRD training set underwent two epochs of training. As shown in <a href="#S3.T5" title="In 3.1.2 Data Augmentation ‣ 3.1 SQLite Results ‣ 3 Experiment ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">5</span></a>, augmenting training data with our synthetic dataset results in a performance improvement of up to 5.6%. This represents a significant enhancement compared to previous works, such as <cite class="ltx_cite ltx_citemacro_citet">Yang et al. (<a href="#bib.bib46" title="" class="ltx_ref">2024</a>)</cite>, which demonstrated only a 1.5% improvement in performance after augmentation on the same base model CodeLLama 7B.</p>
</div>
<figure id="S3.T5" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 5: </span><span id="S3.T5.3.1" class="ltx_text" style="font-size:90%;">Performance Comparison of the data augmentation method on the BIRD development set using different LLMs.</span></figcaption>
<div id="S3.T5.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:195.1pt;height:84.1pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-48.7pt,21.0pt) scale(0.667197121239157,0.667197121239157) ;">
<table id="S3.T5.1.1" class="ltx_tabular ltx_align_middle">
<tr id="S3.T5.1.1.1" class="ltx_tr">
<td id="S3.T5.1.1.1.2" class="ltx_td ltx_align_left ltx_border_tt">Training Dataset</td>
<td id="S3.T5.1.1.1.3" class="ltx_td ltx_align_center ltx_border_tt">Model</td>
<td id="S3.T5.1.1.1.4" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T5.1.1.1.1" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T5.1.1.1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T5.1.1.1.1.m1.1a"><mi mathvariant="normal" id="S3.T5.1.1.1.1.m1.1.1" xref="S3.T5.1.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T5.1.1.1.1.m1.1b"><ci id="S3.T5.1.1.1.1.m1.1.1.cmml" xref="S3.T5.1.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T5.1.1.1.1.m1.1c">\Delta</annotation></semantics></math>EX</td>
</tr>
<tr id="S3.T5.1.1.2" class="ltx_tr">
<td id="S3.T5.1.1.2.1" class="ltx_td ltx_align_left ltx_border_t">BIRD train set</td>
<td id="S3.T5.1.1.2.2" class="ltx_td ltx_align_center ltx_border_t">CodeLlama 7B</td>
<td id="S3.T5.1.1.2.3" class="ltx_td ltx_align_center ltx_border_t">40.22</td>
<td id="S3.T5.1.1.2.4" class="ltx_td ltx_align_center ltx_border_t">0</td>
</tr>
<tr id="S3.T5.1.1.3" class="ltx_tr">
<td id="S3.T5.1.1.3.1" class="ltx_td ltx_align_left">BIRD Train + synthetic</td>
<td id="S3.T5.1.1.3.2" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T5.1.1.3.3" class="ltx_td ltx_align_center">45.82</td>
<td id="S3.T5.1.1.3.4" class="ltx_td ltx_align_center">+5.6</td>
</tr>
<tr id="S3.T5.1.1.4" class="ltx_tr">
<td id="S3.T5.1.1.4.1" class="ltx_td ltx_align_left ltx_border_t">BIRD train set</td>
<td id="S3.T5.1.1.4.2" class="ltx_td ltx_align_center ltx_border_t">CodeGemma 7B</td>
<td id="S3.T5.1.1.4.3" class="ltx_td ltx_align_center ltx_border_t">45.63</td>
<td id="S3.T5.1.1.4.4" class="ltx_td ltx_align_center ltx_border_t">0</td>
</tr>
<tr id="S3.T5.1.1.5" class="ltx_tr">
<td id="S3.T5.1.1.5.1" class="ltx_td ltx_align_left">BIRD Train + synthetic</td>
<td id="S3.T5.1.1.5.2" class="ltx_td ltx_align_center">CodeGemma 7B</td>
<td id="S3.T5.1.1.5.3" class="ltx_td ltx_align_center">51.10</td>
<td id="S3.T5.1.1.5.4" class="ltx_td ltx_align_center">+5.47</td>
</tr>
<tr id="S3.T5.1.1.6" class="ltx_tr">
<td id="S3.T5.1.1.6.1" class="ltx_td ltx_align_left ltx_border_t">BIRD train set</td>
<td id="S3.T5.1.1.6.2" class="ltx_td ltx_align_center ltx_border_t">Codestral 22B</td>
<td id="S3.T5.1.1.6.3" class="ltx_td ltx_align_center ltx_border_t">53.12</td>
<td id="S3.T5.1.1.6.4" class="ltx_td ltx_align_center ltx_border_t">0</td>
</tr>
<tr id="S3.T5.1.1.7" class="ltx_tr">
<td id="S3.T5.1.1.7.1" class="ltx_td ltx_align_left ltx_border_bb">BIRD Train + synthetic</td>
<td id="S3.T5.1.1.7.2" class="ltx_td ltx_align_center ltx_border_bb">Codestral 22B</td>
<td id="S3.T5.1.1.7.3" class="ltx_td ltx_align_center ltx_border_bb">56.45</td>
<td id="S3.T5.1.1.7.4" class="ltx_td ltx_align_center ltx_border_bb">+3.33</td>
</tr>
</table>
</span></div>
</figure>
</section>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>PostgreSQL Results</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">For PostgreSQL, we train LoRA adapters for the CodeLlama 7B and Codestral 22B model on the transpiled baseline datasets and compared its performance against our proposed method. As shown in <a href="#S3.T6" title="In 3.2 PostgreSQL Results ‣ 3 Experiment ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">6</span></a>, our method achieves the highest performance on the PostgreSQL BIRD and Minidev benchmarks compared to other baselines, except for the BIRD train set. While training a model on the original BIRD training split delivers the highest performance on the BIRD development split, it significantly underperforms when evaluated on other PostgreSQL datasets, such as Pagila (as seen in the third row). This highlights the importance of diversity in training data to prevent overfitting to a specific distribution. In contrast, our approach achieves consistently high accuracy when evaluated on both the BIRD development split and other PostgreSQL datasets, demonstrating outstanding generalization ability. Moreover, these results demonstrate the importance of dialect specific datasets as the other transpiled queries couldn’t match the performance of our method.</p>
</div>
<figure id="S3.T6" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 6: </span><span id="S3.T6.4.1" class="ltx_text" style="font-size:90%;">Execution Accuracy (EX) of PostgreSQL Models on the three PostgreSQL benchmarks using CodeLlama 7B and Codestral 22B. "-" denotes the zero-shot performance of the models. OS refers to using open-source models of Llama3 and Mixtral for data generation.</span></figcaption>
<div id="S3.T6.2" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:346.9pt;height:205pt;vertical-align:-0.6pt;"><span class="ltx_transformed_inner" style="transform:translate(-116.8pt,68.8pt) scale(0.597682656408257,0.597682656408257) ;">
<table id="S3.T6.2.2" class="ltx_tabular ltx_align_middle">
<tr id="S3.T6.2.2.2" class="ltx_tr">
<td id="S3.T6.2.2.2.3" class="ltx_td ltx_align_left ltx_border_tt">Training Dataset</td>
<td id="S3.T6.2.2.2.4" class="ltx_td ltx_align_center ltx_border_tt">Benchmark</td>
<td id="S3.T6.2.2.2.5" class="ltx_td ltx_align_center ltx_border_tt">Model</td>
<td id="S3.T6.2.2.2.6" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T6.1.1.1.1" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T6.1.1.1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T6.1.1.1.1.m1.1a"><mi mathvariant="normal" id="S3.T6.1.1.1.1.m1.1.1" xref="S3.T6.1.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T6.1.1.1.1.m1.1b"><ci id="S3.T6.1.1.1.1.m1.1.1.cmml" xref="S3.T6.1.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.1.1.1.1.m1.1c">\Delta</annotation></semantics></math>EX</td>
<td id="S3.T6.2.2.2.7" class="ltx_td ltx_align_center ltx_border_tt">Model</td>
<td id="S3.T6.2.2.2.8" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T6.2.2.2.2" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T6.2.2.2.2.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T6.2.2.2.2.m1.1a"><mi mathvariant="normal" id="S3.T6.2.2.2.2.m1.1.1" xref="S3.T6.2.2.2.2.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T6.2.2.2.2.m1.1b"><ci id="S3.T6.2.2.2.2.m1.1.1.cmml" xref="S3.T6.2.2.2.2.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.2.2.2.2.m1.1c">\Delta</annotation></semantics></math>EX</td>
</tr>
<tr id="S3.T6.2.2.3" class="ltx_tr">
<td id="S3.T6.2.2.3.1" class="ltx_td ltx_align_left ltx_border_t">Bird train set</td>
<td id="S3.T6.2.2.3.2" class="ltx_td ltx_align_center ltx_border_t">PostgreSQL BIRD</td>
<td id="S3.T6.2.2.3.3" class="ltx_td ltx_align_center ltx_border_t">CodeLlama 7B</td>
<td id="S3.T6.2.2.3.4" class="ltx_td ltx_align_center ltx_border_t">44.37</td>
<td id="S3.T6.2.2.3.5" class="ltx_td ltx_align_center ltx_border_t">+20.08</td>
<td id="S3.T6.2.2.3.6" class="ltx_td ltx_align_center ltx_border_t">Codestral 22B</td>
<td id="S3.T6.2.2.3.7" class="ltx_td ltx_align_center ltx_border_t">52.26</td>
<td id="S3.T6.2.2.3.8" class="ltx_td ltx_align_center ltx_border_t">+5.68</td>
</tr>
<tr id="S3.T6.2.2.4" class="ltx_tr">
<td id="S3.T6.2.2.4.1" class="ltx_td ltx_align_left">Our synthetic dataset (OS)</td>
<td id="S3.T6.2.2.4.2" class="ltx_td ltx_align_center">PostgreSQL BIRD</td>
<td id="S3.T6.2.2.4.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.4.4" class="ltx_td ltx_align_center">38.69</td>
<td id="S3.T6.2.2.4.5" class="ltx_td ltx_align_center">+14.4</td>
<td id="S3.T6.2.2.4.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.4.7" class="ltx_td ltx_align_center"><span id="S3.T6.2.2.4.7.1" class="ltx_text ltx_font_bold">49.94</span></td>
<td id="S3.T6.2.2.4.8" class="ltx_td ltx_align_center">+3.36</td>
</tr>
<tr id="S3.T6.2.2.5" class="ltx_tr">
<td id="S3.T6.2.2.5.1" class="ltx_td ltx_align_left">Our synthetic dataset (Gemini)</td>
<td id="S3.T6.2.2.5.2" class="ltx_td ltx_align_center">PostgreSQL BIRD</td>
<td id="S3.T6.2.2.5.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.5.4" class="ltx_td ltx_align_center"><span id="S3.T6.2.2.5.4.1" class="ltx_text ltx_font_bold">39.22</span></td>
<td id="S3.T6.2.2.5.5" class="ltx_td ltx_align_center">+14.93</td>
<td id="S3.T6.2.2.5.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.5.7" class="ltx_td ltx_align_center">49.84</td>
<td id="S3.T6.2.2.5.8" class="ltx_td ltx_align_center">3.26</td>
</tr>
<tr id="S3.T6.2.2.6" class="ltx_tr">
<td id="S3.T6.2.2.6.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="S3.T6.2.2.6.2" class="ltx_td ltx_align_center">PostgreSQL BIRD</td>
<td id="S3.T6.2.2.6.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.6.4" class="ltx_td ltx_align_center">28.05</td>
<td id="S3.T6.2.2.6.5" class="ltx_td ltx_align_center">+3.76</td>
<td id="S3.T6.2.2.6.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.6.7" class="ltx_td ltx_align_center">40.55</td>
<td id="S3.T6.2.2.6.8" class="ltx_td ltx_align_center">-6.03</td>
</tr>
<tr id="S3.T6.2.2.7" class="ltx_tr">
<td id="S3.T6.2.2.7.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="S3.T6.2.2.7.2" class="ltx_td ltx_align_center">PostgreSQL BIRD</td>
<td id="S3.T6.2.2.7.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.7.4" class="ltx_td ltx_align_center">13.35</td>
<td id="S3.T6.2.2.7.5" class="ltx_td ltx_align_center">-10.94</td>
<td id="S3.T6.2.2.7.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.7.7" class="ltx_td ltx_align_center">36.17</td>
<td id="S3.T6.2.2.7.8" class="ltx_td ltx_align_center">-10.41</td>
</tr>
<tr id="S3.T6.2.2.8" class="ltx_tr">
<td id="S3.T6.2.2.8.1" class="ltx_td ltx_align_left">-</td>
<td id="S3.T6.2.2.8.2" class="ltx_td ltx_align_center">PostgreSQL BIRD</td>
<td id="S3.T6.2.2.8.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.8.4" class="ltx_td ltx_align_center">24.29</td>
<td id="S3.T6.2.2.8.5" class="ltx_td ltx_align_center">0</td>
<td id="S3.T6.2.2.8.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.8.7" class="ltx_td ltx_align_center">46.58</td>
<td id="S3.T6.2.2.8.8" class="ltx_td ltx_align_center">0</td>
</tr>
<tr id="S3.T6.2.2.9" class="ltx_tr">
<td id="S3.T6.2.2.9.1" class="ltx_td ltx_align_left ltx_border_t">Bird train set</td>
<td id="S3.T6.2.2.9.2" class="ltx_td ltx_align_center ltx_border_t">PostgreSQL Minidev</td>
<td id="S3.T6.2.2.9.3" class="ltx_td ltx_align_center ltx_border_t">CodeLlama 7B</td>
<td id="S3.T6.2.2.9.4" class="ltx_td ltx_align_center ltx_border_t">31.0</td>
<td id="S3.T6.2.2.9.5" class="ltx_td ltx_align_center ltx_border_t">+17.8</td>
<td id="S3.T6.2.2.9.6" class="ltx_td ltx_align_center ltx_border_t">Codestral 22B</td>
<td id="S3.T6.2.2.9.7" class="ltx_td ltx_align_center ltx_border_t">36.0</td>
<td id="S3.T6.2.2.9.8" class="ltx_td ltx_align_center ltx_border_t">+4.2</td>
</tr>
<tr id="S3.T6.2.2.10" class="ltx_tr">
<td id="S3.T6.2.2.10.1" class="ltx_td ltx_align_left">Our synthetic dataset (OS)</td>
<td id="S3.T6.2.2.10.2" class="ltx_td ltx_align_center">PostgreSQL Minidev</td>
<td id="S3.T6.2.2.10.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.10.4" class="ltx_td ltx_align_center">20.8</td>
<td id="S3.T6.2.2.10.5" class="ltx_td ltx_align_center">+7.6</td>
<td id="S3.T6.2.2.10.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.10.7" class="ltx_td ltx_align_center">33.0</td>
<td id="S3.T6.2.2.10.8" class="ltx_td ltx_align_center">+1.2</td>
</tr>
<tr id="S3.T6.2.2.11" class="ltx_tr">
<td id="S3.T6.2.2.11.1" class="ltx_td ltx_align_left">Our synthetic dataset (Gemini)</td>
<td id="S3.T6.2.2.11.2" class="ltx_td ltx_align_center">PostgreSQL Minidev</td>
<td id="S3.T6.2.2.11.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.11.4" class="ltx_td ltx_align_center"><span id="S3.T6.2.2.11.4.1" class="ltx_text ltx_font_bold">25.4</span></td>
<td id="S3.T6.2.2.11.5" class="ltx_td ltx_align_center">+12.2</td>
<td id="S3.T6.2.2.11.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.11.7" class="ltx_td ltx_align_center"><span id="S3.T6.2.2.11.7.1" class="ltx_text ltx_font_bold">33.0</span></td>
<td id="S3.T6.2.2.11.8" class="ltx_td ltx_align_center">+2.2</td>
</tr>
<tr id="S3.T6.2.2.12" class="ltx_tr">
<td id="S3.T6.2.2.12.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="S3.T6.2.2.12.2" class="ltx_td ltx_align_center">PostgreSQL Minidev</td>
<td id="S3.T6.2.2.12.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.12.4" class="ltx_td ltx_align_center">14.6</td>
<td id="S3.T6.2.2.12.5" class="ltx_td ltx_align_center">+1.4</td>
<td id="S3.T6.2.2.12.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.12.7" class="ltx_td ltx_align_center">23.0</td>
<td id="S3.T6.2.2.12.8" class="ltx_td ltx_align_center">-8.8</td>
</tr>
<tr id="S3.T6.2.2.13" class="ltx_tr">
<td id="S3.T6.2.2.13.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="S3.T6.2.2.13.2" class="ltx_td ltx_align_center">PostgreSQL Minidev</td>
<td id="S3.T6.2.2.13.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.13.4" class="ltx_td ltx_align_center">7.8</td>
<td id="S3.T6.2.2.13.5" class="ltx_td ltx_align_center">-5.4</td>
<td id="S3.T6.2.2.13.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.13.7" class="ltx_td ltx_align_center">25.2</td>
<td id="S3.T6.2.2.13.8" class="ltx_td ltx_align_center">-6.6</td>
</tr>
<tr id="S3.T6.2.2.14" class="ltx_tr">
<td id="S3.T6.2.2.14.1" class="ltx_td ltx_align_left">-</td>
<td id="S3.T6.2.2.14.2" class="ltx_td ltx_align_center">PostgreSQL Minidev</td>
<td id="S3.T6.2.2.14.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.14.4" class="ltx_td ltx_align_center">13.2</td>
<td id="S3.T6.2.2.14.5" class="ltx_td ltx_align_center">0</td>
<td id="S3.T6.2.2.14.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.14.7" class="ltx_td ltx_align_center">31.8</td>
<td id="S3.T6.2.2.14.8" class="ltx_td ltx_align_center">0</td>
</tr>
<tr id="S3.T6.2.2.15" class="ltx_tr">
<td id="S3.T6.2.2.15.1" class="ltx_td ltx_align_left ltx_border_t">Bird train set</td>
<td id="S3.T6.2.2.15.2" class="ltx_td ltx_align_center ltx_border_t">Pagila</td>
<td id="S3.T6.2.2.15.3" class="ltx_td ltx_align_center ltx_border_t">CodeLlama 7B</td>
<td id="S3.T6.2.2.15.4" class="ltx_td ltx_align_center ltx_border_t">19.56</td>
<td id="S3.T6.2.2.15.5" class="ltx_td ltx_align_center ltx_border_t">-4.35</td>
<td id="S3.T6.2.2.15.6" class="ltx_td ltx_align_center ltx_border_t">Codestral 22B</td>
<td id="S3.T6.2.2.15.7" class="ltx_td ltx_align_center ltx_border_t">43.47</td>
<td id="S3.T6.2.2.15.8" class="ltx_td ltx_align_center ltx_border_t">-6.53</td>
</tr>
<tr id="S3.T6.2.2.16" class="ltx_tr">
<td id="S3.T6.2.2.16.1" class="ltx_td ltx_align_left">Our synthetic dataset (OS)</td>
<td id="S3.T6.2.2.16.2" class="ltx_td ltx_align_center">Pagila</td>
<td id="S3.T6.2.2.16.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.16.4" class="ltx_td ltx_align_center"><span id="S3.T6.2.2.16.4.1" class="ltx_text ltx_font_bold">39.13</span></td>
<td id="S3.T6.2.2.16.5" class="ltx_td ltx_align_center">+15.22</td>
<td id="S3.T6.2.2.16.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.16.7" class="ltx_td ltx_align_center"><span id="S3.T6.2.2.16.7.1" class="ltx_text ltx_font_bold">52.27</span></td>
<td id="S3.T6.2.2.16.8" class="ltx_td ltx_align_center">+2.27</td>
</tr>
<tr id="S3.T6.2.2.17" class="ltx_tr">
<td id="S3.T6.2.2.17.1" class="ltx_td ltx_align_left">Our synthetic dataset (Gemini)</td>
<td id="S3.T6.2.2.17.2" class="ltx_td ltx_align_center">Pagila</td>
<td id="S3.T6.2.2.17.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.17.4" class="ltx_td ltx_align_center"><span id="S3.T6.2.2.17.4.1" class="ltx_text ltx_font_bold">39.13</span></td>
<td id="S3.T6.2.2.17.5" class="ltx_td ltx_align_center">+15.22</td>
<td id="S3.T6.2.2.17.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.17.7" class="ltx_td ltx_align_center">50</td>
<td id="S3.T6.2.2.17.8" class="ltx_td ltx_align_center">0.0</td>
</tr>
<tr id="S3.T6.2.2.18" class="ltx_tr">
<td id="S3.T6.2.2.18.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="S3.T6.2.2.18.2" class="ltx_td ltx_align_center">Pagila</td>
<td id="S3.T6.2.2.18.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.18.4" class="ltx_td ltx_align_center">36.95</td>
<td id="S3.T6.2.2.18.5" class="ltx_td ltx_align_center">+13.04</td>
<td id="S3.T6.2.2.18.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.18.7" class="ltx_td ltx_align_center">50</td>
<td id="S3.T6.2.2.18.8" class="ltx_td ltx_align_center">0</td>
</tr>
<tr id="S3.T6.2.2.19" class="ltx_tr">
<td id="S3.T6.2.2.19.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="S3.T6.2.2.19.2" class="ltx_td ltx_align_center">Pagila</td>
<td id="S3.T6.2.2.19.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T6.2.2.19.4" class="ltx_td ltx_align_center">8.69</td>
<td id="S3.T6.2.2.19.5" class="ltx_td ltx_align_center">-15.22</td>
<td id="S3.T6.2.2.19.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T6.2.2.19.7" class="ltx_td ltx_align_center">36.95</td>
<td id="S3.T6.2.2.19.8" class="ltx_td ltx_align_center">-13.05</td>
</tr>
<tr id="S3.T6.2.2.20" class="ltx_tr">
<td id="S3.T6.2.2.20.1" class="ltx_td ltx_align_left ltx_border_b">-</td>
<td id="S3.T6.2.2.20.2" class="ltx_td ltx_align_center ltx_border_b">Pagila</td>
<td id="S3.T6.2.2.20.3" class="ltx_td ltx_align_center ltx_border_b">CodeLlama 7B</td>
<td id="S3.T6.2.2.20.4" class="ltx_td ltx_align_center ltx_border_b">23.91</td>
<td id="S3.T6.2.2.20.5" class="ltx_td ltx_align_center ltx_border_b">0</td>
<td id="S3.T6.2.2.20.6" class="ltx_td ltx_align_center ltx_border_b">Codestral 22B</td>
<td id="S3.T6.2.2.20.7" class="ltx_td ltx_align_center ltx_border_b">50</td>
<td id="S3.T6.2.2.20.8" class="ltx_td ltx_align_center ltx_border_b">0</td>
</tr>
</table>
</span></div>
</figure>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>BigQuery Results</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.1" class="ltx_p">Similar to the PostgreSQL experiments, we present the results of the CodeLlama 7B and Codestral 22B model trained on various baseline datasets and evaluated on two BigQuery benchmark datasets: BIRD and the GitHub Repository database. Looking at the results provided in <a href="#S3.T7" title="In 3.3 BigQuery Results ‣ 3 Experiment ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">7</span></a>, consistent with the trends observed for the PostgreSQL dialect, on BigQuery BIRD, the model trained on our generated samples achieves the second highest performance, following the BIRD train set. For the GitHub Repository database, which is a BigQuery dialect specific dataset, our model outperforms the second-best model by a 10% margin, further demonstrating the effectiveness of our method to train dialect specific models.</p>
</div>
<figure id="S3.T7" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 7: </span><span id="S3.T7.4.1" class="ltx_text" style="font-size:90%;">Execution Accuracy (EX) of BigQuery Models on the two BigQuery benchmarks using CodeLlama 7B and Codestral 22B. "-" denotes the zero-shot performance of the models.</span></figcaption>
<div id="S3.T7.2" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:368.6pt;height:151.8pt;vertical-align:-0.6pt;"><span class="ltx_transformed_inner" style="transform:translate(-100.9pt,41.4pt) scale(0.646251826703781,0.646251826703781) ;">
<table id="S3.T7.2.2" class="ltx_tabular ltx_align_middle">
<tr id="S3.T7.2.2.2" class="ltx_tr">
<td id="S3.T7.2.2.2.3" class="ltx_td ltx_align_left ltx_border_tt">Training Dataset</td>
<td id="S3.T7.2.2.2.4" class="ltx_td ltx_align_center ltx_border_tt">Benchmark</td>
<td id="S3.T7.2.2.2.5" class="ltx_td ltx_align_center ltx_border_tt">Model</td>
<td id="S3.T7.2.2.2.6" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T7.1.1.1.1" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T7.1.1.1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T7.1.1.1.1.m1.1a"><mi mathvariant="normal" id="S3.T7.1.1.1.1.m1.1.1" xref="S3.T7.1.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T7.1.1.1.1.m1.1b"><ci id="S3.T7.1.1.1.1.m1.1.1.cmml" xref="S3.T7.1.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T7.1.1.1.1.m1.1c">\Delta</annotation></semantics></math>EX</td>
<td id="S3.T7.2.2.2.7" class="ltx_td ltx_align_center ltx_border_tt">Model</td>
<td id="S3.T7.2.2.2.8" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="S3.T7.2.2.2.2" class="ltx_td ltx_align_center ltx_border_tt">
<math id="S3.T7.2.2.2.2.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.T7.2.2.2.2.m1.1a"><mi mathvariant="normal" id="S3.T7.2.2.2.2.m1.1.1" xref="S3.T7.2.2.2.2.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.T7.2.2.2.2.m1.1b"><ci id="S3.T7.2.2.2.2.m1.1.1.cmml" xref="S3.T7.2.2.2.2.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T7.2.2.2.2.m1.1c">\Delta</annotation></semantics></math>EX</td>
</tr>
<tr id="S3.T7.2.2.3" class="ltx_tr">
<td id="S3.T7.2.2.3.1" class="ltx_td ltx_align_left ltx_border_t">Bird train set</td>
<td id="S3.T7.2.2.3.2" class="ltx_td ltx_align_center ltx_border_t">BigQuery BIRD</td>
<td id="S3.T7.2.2.3.3" class="ltx_td ltx_align_center ltx_border_t">CodeLlama 7B</td>
<td id="S3.T7.2.2.3.4" class="ltx_td ltx_align_center ltx_border_t">38.04</td>
<td id="S3.T7.2.2.3.5" class="ltx_td ltx_align_center ltx_border_t">+21.47</td>
<td id="S3.T7.2.2.3.6" class="ltx_td ltx_align_center ltx_border_t">Codestral 22B</td>
<td id="S3.T7.2.2.3.7" class="ltx_td ltx_align_center ltx_border_t">47.74</td>
<td id="S3.T7.2.2.3.8" class="ltx_td ltx_align_center ltx_border_t">+9.55</td>
</tr>
<tr id="S3.T7.2.2.4" class="ltx_tr">
<td id="S3.T7.2.2.4.1" class="ltx_td ltx_align_left">Our synthetic dataset (OS)</td>
<td id="S3.T7.2.2.4.2" class="ltx_td ltx_align_center">BigQuery BIRD</td>
<td id="S3.T7.2.2.4.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.4.4" class="ltx_td ltx_align_center">32.08</td>
<td id="S3.T7.2.2.4.5" class="ltx_td ltx_align_center">+15.51</td>
<td id="S3.T7.2.2.4.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.4.7" class="ltx_td ltx_align_center">45.22</td>
<td id="S3.T7.2.2.4.8" class="ltx_td ltx_align_center">+7.03</td>
</tr>
<tr id="S3.T7.2.2.5" class="ltx_tr">
<td id="S3.T7.2.2.5.1" class="ltx_td ltx_align_left">Our synthetic dataset (Gemini)</td>
<td id="S3.T7.2.2.5.2" class="ltx_td ltx_align_center">BigQuery BIRD</td>
<td id="S3.T7.2.2.5.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.5.4" class="ltx_td ltx_align_center"><span id="S3.T7.2.2.5.4.1" class="ltx_text ltx_font_bold">33.53</span></td>
<td id="S3.T7.2.2.5.5" class="ltx_td ltx_align_center">+16.96</td>
<td id="S3.T7.2.2.5.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.5.7" class="ltx_td ltx_align_center"><span id="S3.T7.2.2.5.7.1" class="ltx_text ltx_font_bold">47.24</span></td>
<td id="S3.T7.2.2.5.8" class="ltx_td ltx_align_center">+9.05</td>
</tr>
<tr id="S3.T7.2.2.6" class="ltx_tr">
<td id="S3.T7.2.2.6.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="S3.T7.2.2.6.2" class="ltx_td ltx_align_center">BigQuery BIRD</td>
<td id="S3.T7.2.2.6.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.6.4" class="ltx_td ltx_align_center">26.73</td>
<td id="S3.T7.2.2.6.5" class="ltx_td ltx_align_center">+11.16</td>
<td id="S3.T7.2.2.6.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.6.7" class="ltx_td ltx_align_center">36.74</td>
<td id="S3.T7.2.2.6.8" class="ltx_td ltx_align_center">-1.45</td>
</tr>
<tr id="S3.T7.2.2.7" class="ltx_tr">
<td id="S3.T7.2.2.7.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="S3.T7.2.2.7.2" class="ltx_td ltx_align_center">BigQuery BIRD</td>
<td id="S3.T7.2.2.7.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.7.4" class="ltx_td ltx_align_center">10.84</td>
<td id="S3.T7.2.2.7.5" class="ltx_td ltx_align_center">-5.73</td>
<td id="S3.T7.2.2.7.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.7.7" class="ltx_td ltx_align_center">39.19</td>
<td id="S3.T7.2.2.7.8" class="ltx_td ltx_align_center">+1.0</td>
</tr>
<tr id="S3.T7.2.2.8" class="ltx_tr">
<td id="S3.T7.2.2.8.1" class="ltx_td ltx_align_left">-</td>
<td id="S3.T7.2.2.8.2" class="ltx_td ltx_align_center">BigQuery BIRD</td>
<td id="S3.T7.2.2.8.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.8.4" class="ltx_td ltx_align_center">16.57</td>
<td id="S3.T7.2.2.8.5" class="ltx_td ltx_align_center">0</td>
<td id="S3.T7.2.2.8.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.8.7" class="ltx_td ltx_align_center">38.19</td>
<td id="S3.T7.2.2.8.8" class="ltx_td ltx_align_center">0</td>
</tr>
<tr id="S3.T7.2.2.9" class="ltx_tr">
<td id="S3.T7.2.2.9.1" class="ltx_td ltx_align_left ltx_border_t">Bird train set</td>
<td id="S3.T7.2.2.9.2" class="ltx_td ltx_align_center ltx_border_t">Github Repository</td>
<td id="S3.T7.2.2.9.3" class="ltx_td ltx_align_center ltx_border_t">CodeLlama 7B</td>
<td id="S3.T7.2.2.9.4" class="ltx_td ltx_align_center ltx_border_t">7.5</td>
<td id="S3.T7.2.2.9.5" class="ltx_td ltx_align_center ltx_border_t">-7.5</td>
<td id="S3.T7.2.2.9.6" class="ltx_td ltx_align_center ltx_border_t">Codestral 22B</td>
<td id="S3.T7.2.2.9.7" class="ltx_td ltx_align_center ltx_border_t">7.5</td>
<td id="S3.T7.2.2.9.8" class="ltx_td ltx_align_center ltx_border_t">-12.5</td>
</tr>
<tr id="S3.T7.2.2.10" class="ltx_tr">
<td id="S3.T7.2.2.10.1" class="ltx_td ltx_align_left">Our synthetic dataset (OS)</td>
<td id="S3.T7.2.2.10.2" class="ltx_td ltx_align_center">Github Repository</td>
<td id="S3.T7.2.2.10.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.10.4" class="ltx_td ltx_align_center"><span id="S3.T7.2.2.10.4.1" class="ltx_text ltx_font_bold">27.5</span></td>
<td id="S3.T7.2.2.10.5" class="ltx_td ltx_align_center">+12.5</td>
<td id="S3.T7.2.2.10.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.10.7" class="ltx_td ltx_align_center"><span id="S3.T7.2.2.10.7.1" class="ltx_text ltx_font_bold">30.0</span></td>
<td id="S3.T7.2.2.10.8" class="ltx_td ltx_align_center">+10.0</td>
</tr>
<tr id="S3.T7.2.2.11" class="ltx_tr">
<td id="S3.T7.2.2.11.1" class="ltx_td ltx_align_left">Our synthetic dataset (Gemini)</td>
<td id="S3.T7.2.2.11.2" class="ltx_td ltx_align_center">Github Repository</td>
<td id="S3.T7.2.2.11.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.11.4" class="ltx_td ltx_align_center">25.0</td>
<td id="S3.T7.2.2.11.5" class="ltx_td ltx_align_center">+10.0</td>
<td id="S3.T7.2.2.11.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.11.7" class="ltx_td ltx_align_center"><span id="S3.T7.2.2.11.7.1" class="ltx_text ltx_font_bold">30.0</span></td>
<td id="S3.T7.2.2.11.8" class="ltx_td ltx_align_center">+10.0</td>
</tr>
<tr id="S3.T7.2.2.12" class="ltx_tr">
<td id="S3.T7.2.2.12.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="S3.T7.2.2.12.2" class="ltx_td ltx_align_center">Github Repository</td>
<td id="S3.T7.2.2.12.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.12.4" class="ltx_td ltx_align_center">17.5</td>
<td id="S3.T7.2.2.12.5" class="ltx_td ltx_align_center">+2.5</td>
<td id="S3.T7.2.2.12.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.12.7" class="ltx_td ltx_align_center">22.5</td>
<td id="S3.T7.2.2.12.8" class="ltx_td ltx_align_center">+2.25</td>
</tr>
<tr id="S3.T7.2.2.13" class="ltx_tr">
<td id="S3.T7.2.2.13.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="S3.T7.2.2.13.2" class="ltx_td ltx_align_center">Github Repository</td>
<td id="S3.T7.2.2.13.3" class="ltx_td ltx_align_center">CodeLlama 7B</td>
<td id="S3.T7.2.2.13.4" class="ltx_td ltx_align_center">0.0</td>
<td id="S3.T7.2.2.13.5" class="ltx_td ltx_align_center">-15.00</td>
<td id="S3.T7.2.2.13.6" class="ltx_td ltx_align_center">Codestral 22B</td>
<td id="S3.T7.2.2.13.7" class="ltx_td ltx_align_center">20.0</td>
<td id="S3.T7.2.2.13.8" class="ltx_td ltx_align_center">0</td>
</tr>
<tr id="S3.T7.2.2.14" class="ltx_tr">
<td id="S3.T7.2.2.14.1" class="ltx_td ltx_align_left ltx_border_bb">-</td>
<td id="S3.T7.2.2.14.2" class="ltx_td ltx_align_center ltx_border_bb">Github Repository</td>
<td id="S3.T7.2.2.14.3" class="ltx_td ltx_align_center ltx_border_bb">CodeLlama 7B</td>
<td id="S3.T7.2.2.14.4" class="ltx_td ltx_align_center ltx_border_bb">15</td>
<td id="S3.T7.2.2.14.5" class="ltx_td ltx_align_center ltx_border_bb">0</td>
<td id="S3.T7.2.2.14.6" class="ltx_td ltx_align_center ltx_border_bb">Codestral 22B</td>
<td id="S3.T7.2.2.14.7" class="ltx_td ltx_align_center ltx_border_bb">20.0</td>
<td id="S3.T7.2.2.14.8" class="ltx_td ltx_align_center ltx_border_bb">0</td>
</tr>
</table>
</span></div>
</figure>
</section>
<section id="S3.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Experts Merging Results</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p id="S3.SS4.p1.1" class="ltx_p">We evaluate various expert merging approaches for integrating dialect-specific models into a single unified model and compare to our method based on the Mixture of Experts (MoE) architecture. We utilize three expert CodeLlama 7B models, each trained on synthetic question-SQL pairs for SQLite, PostgreSQL, and BigQuery. We consider three popular model merging techniques: DARE <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib47" title="" class="ltx_ref">2024</a>)</cite>, TIES <cite class="ltx_cite ltx_citemacro_citep">(Yadav et al., <a href="#bib.bib45" title="" class="ltx_ref">2024</a>)</cite>, and SLERP. Unlike the first two, SLERP can only merge two models at a time. Therefore, we initially merge the SQLite and PostgreSQL experts and then combined the resulting model with the BigQuery expert. Additionally, we fine-tune a generalist (not dialect-specific) CodeLlama 7B and MoE 3x7B model on 40K samples from a mix of different dialects to establish a baseline for comparison. The generalist MoE baseline is constructed from CodeLlama 7B with three experts being MLP layers repeated three times. We train with 40K combined dialect samples for 1 epoch. We compare all these methods to the proposed method for initializing the MoE model where we merge the self-attention sub-layers using the SLERP method and created three distinct MLP experts from the dialect experts’ MLP layers, training only for one epoch of 20K samples from different dialects. The MoE routers are initialized using hidden states from dialect-specific keyword prompts. We train for a single epoch to promote effective collaboration among the submodules. We also included the performance of our proposed MoE model before the single epoch fine-tuning to better understand the effect of coordination through fine-tuning. We assess the performance of the different models on PostgreSQL’s Pagila, BigQuery’s Github Repository, and 10% of random samples from the SQLite BIRD dev set, with results detailed in <a href="#S3.T8" title="In 3.4 Experts Merging Results ‣ 3 Experiment ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">8</span></a>. The table demonstrates that our proposed MoE model overall performance outperforms other methods and even exceeds the performance of the individual dialect experts, highlighting the effectiveness of our approach in sharing common SQL knowledge across dialects while preserving dialect-specific expertise. The MoE architecture also enhances the model’s learning capacity, contributing to improved overall performance. Notably, our initialization method is more effective at maintaining high dialect-specific performance compared to the generalist MoE 3x7B model. Among all merging techniques, SLERP achieves the highest performance, surpassing even the generalist model trained on the combined dialect-specific datasets, which is the main reason for initializing the self-attention sub-layers. Moreover, the results suggest that our proposed method for initialization even before fine-tuning provide a strong baseline surpassing TIES and DARE method for model merging. In <a href="#A1.SS9" title="A.9 MoE Analysis ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Section</span> <span class="ltx_text ltx_ref_tag">A.9</span></a> we provide detailed analysis of token-level routing for MoE meodels.</p>
</div>
<figure id="S3.T8" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 8: </span><span id="S3.T8.2.1" class="ltx_text" style="font-size:90%;">Comparison between different dialect expert merging approaches and our proposed MoE for dialect benchmarks. Generalist Model refers to CodeLlama trained on the combination of the dialect datasets.</span></figcaption>
<div id="S3.T8.3" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:303.5pt;height:134.3pt;vertical-align:-0.7pt;"><span class="ltx_transformed_inner" style="transform:translate(-73.2pt,32.2pt) scale(0.674640710031414,0.674640710031414) ;">
<table id="S3.T8.3.1" class="ltx_tabular ltx_align_middle">
<tr id="S3.T8.3.1.1" class="ltx_tr">
<td id="S3.T8.3.1.1.1" class="ltx_td ltx_align_left ltx_border_tt">Model</td>
<td id="S3.T8.3.1.1.2" class="ltx_td ltx_align_center ltx_border_tt">BIRD SQLite</td>
<td id="S3.T8.3.1.1.3" class="ltx_td ltx_align_center ltx_border_tt">PostgreSQL Pagila</td>
<td id="S3.T8.3.1.1.4" class="ltx_td ltx_align_center ltx_border_tt">BigQuery BIRD</td>
<td id="S3.T8.3.1.1.5" class="ltx_td ltx_align_center ltx_border_tt">Overall</td>
</tr>
<tr id="S3.T8.3.1.2" class="ltx_tr">
<td id="S3.T8.3.1.2.1" class="ltx_td ltx_align_left ltx_border_t">CodeLlama 7B SQLite expert</td>
<td id="S3.T8.3.1.2.2" class="ltx_td ltx_align_center ltx_border_t">34.01</td>
<td id="S3.T8.3.1.2.3" class="ltx_td ltx_align_center ltx_border_t">39.13</td>
<td id="S3.T8.3.1.2.4" class="ltx_td ltx_align_center ltx_border_t">25</td>
<td id="S3.T8.3.1.2.5" class="ltx_td ltx_align_center ltx_border_t">32.71</td>
</tr>
<tr id="S3.T8.3.1.3" class="ltx_tr">
<td id="S3.T8.3.1.3.1" class="ltx_td ltx_align_left">CodeLlama 7B Postgres expert</td>
<td id="S3.T8.3.1.3.2" class="ltx_td ltx_align_center">29.93</td>
<td id="S3.T8.3.1.3.3" class="ltx_td ltx_align_center">39.13</td>
<td id="S3.T8.3.1.3.4" class="ltx_td ltx_align_center">20</td>
<td id="S3.T8.3.1.3.5" class="ltx_td ltx_align_center">29.68</td>
</tr>
<tr id="S3.T8.3.1.4" class="ltx_tr">
<td id="S3.T8.3.1.4.1" class="ltx_td ltx_align_left">CodeLlama 7B BigQuery expert</td>
<td id="S3.T8.3.1.4.2" class="ltx_td ltx_align_center">33.33</td>
<td id="S3.T8.3.1.4.3" class="ltx_td ltx_align_center">32.60</td>
<td id="S3.T8.3.1.4.4" class="ltx_td ltx_align_center">27.5</td>
<td id="S3.T8.3.1.4.5" class="ltx_td ltx_align_center">31.14</td>
</tr>
<tr id="S3.T8.3.1.5" class="ltx_tr">
<td id="S3.T8.3.1.5.1" class="ltx_td ltx_align_left ltx_border_t">CodeLlama 7B generalist</td>
<td id="S3.T8.3.1.5.2" class="ltx_td ltx_align_center ltx_border_t">33.33</td>
<td id="S3.T8.3.1.5.3" class="ltx_td ltx_align_center ltx_border_t">32.66</td>
<td id="S3.T8.3.1.5.4" class="ltx_td ltx_align_center ltx_border_t">32.25</td>
<td id="S3.T8.3.1.5.5" class="ltx_td ltx_align_center ltx_border_t">32.83</td>
</tr>
<tr id="S3.T8.3.1.6" class="ltx_tr">
<td id="S3.T8.3.1.6.1" class="ltx_td ltx_align_left ltx_border_t">Merged experts + SLERP</td>
<td id="S3.T8.3.1.6.2" class="ltx_td ltx_align_center ltx_border_t">34.69</td>
<td id="S3.T8.3.1.6.3" class="ltx_td ltx_align_center ltx_border_t">39.13</td>
<td id="S3.T8.3.1.6.4" class="ltx_td ltx_align_center ltx_border_t">27.5</td>
<td id="S3.T8.3.1.6.5" class="ltx_td ltx_align_center ltx_border_t">33.77</td>
</tr>
<tr id="S3.T8.3.1.7" class="ltx_tr">
<td id="S3.T8.3.1.7.1" class="ltx_td ltx_align_left">Merged experts + TIES</td>
<td id="S3.T8.3.1.7.2" class="ltx_td ltx_align_center">35.37</td>
<td id="S3.T8.3.1.7.3" class="ltx_td ltx_align_center">30.43</td>
<td id="S3.T8.3.1.7.4" class="ltx_td ltx_align_center">27.5</td>
<td id="S3.T8.3.1.7.5" class="ltx_td ltx_align_center">31.1</td>
</tr>
<tr id="S3.T8.3.1.8" class="ltx_tr">
<td id="S3.T8.3.1.8.1" class="ltx_td ltx_align_left">Merged experts + DARE</td>
<td id="S3.T8.3.1.8.2" class="ltx_td ltx_align_center">35.37</td>
<td id="S3.T8.3.1.8.3" class="ltx_td ltx_align_center">36.95</td>
<td id="S3.T8.3.1.8.4" class="ltx_td ltx_align_center">17.5</td>
<td id="S3.T8.3.1.8.5" class="ltx_td ltx_align_center">29.94</td>
</tr>
<tr id="S3.T8.3.1.9" class="ltx_tr">
<td id="S3.T8.3.1.9.1" class="ltx_td ltx_align_left ltx_border_t">MoE 3x7B (ours)</td>
<td id="S3.T8.3.1.9.2" class="ltx_td ltx_align_center ltx_border_t">36.05</td>
<td id="S3.T8.3.1.9.3" class="ltx_td ltx_align_center ltx_border_t">39.13</td>
<td id="S3.T8.3.1.9.4" class="ltx_td ltx_align_center ltx_border_t">22.5</td>
<td id="S3.T8.3.1.9.5" class="ltx_td ltx_align_center ltx_border_t">32.56</td>
</tr>
<tr id="S3.T8.3.1.10" class="ltx_tr">
<td id="S3.T8.3.1.10.1" class="ltx_td ltx_align_left">MoE 3x7B fine-tuned (ours)</td>
<td id="S3.T8.3.1.10.2" class="ltx_td ltx_align_center">34.69</td>
<td id="S3.T8.3.1.10.3" class="ltx_td ltx_align_center">39.13</td>
<td id="S3.T8.3.1.10.4" class="ltx_td ltx_align_center">32.25</td>
<td id="S3.T8.3.1.10.5" class="ltx_td ltx_align_center"><span id="S3.T8.3.1.10.5.1" class="ltx_text ltx_font_bold">35.44</span></td>
</tr>
<tr id="S3.T8.3.1.11" class="ltx_tr">
<td id="S3.T8.3.1.11.1" class="ltx_td ltx_align_left ltx_border_bb">MoE 3x7B generalist</td>
<td id="S3.T8.3.1.11.2" class="ltx_td ltx_align_center ltx_border_bb">34.01</td>
<td id="S3.T8.3.1.11.3" class="ltx_td ltx_align_center ltx_border_bb">41.3</td>
<td id="S3.T8.3.1.11.4" class="ltx_td ltx_align_center ltx_border_bb">25</td>
<td id="S3.T8.3.1.11.5" class="ltx_td ltx_align_center ltx_border_bb">33.43</td>
</tr>
</table>
</span></div>
</figure>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Conclusions</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">We present a novel method for generating dialect-specific synthetic data to tackle the diverse SQL dialect challenges in Text-to-SQL systems. This method addresses the unique keywords and functions of each SQL dialect, offering a scalable solution across various dialects. It significantly narrows the performance gap with human-annotated datasets for SQLite and creates the highest quality datasets for other dialects. Our comprehensive evaluations across three models and multiple benchmarks, showcase the effectiveness of the proposed approaches for data generation. Additionally, our innovative approach integrates dialect-specific experts into a unified model, enhancing performance by promoting effective information sharing among them.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(1)</span>
<span class="ltx_bibblock">
Codegemma report.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://storage.googleapis.com/deepmind-media/gemma/codegemma_report.pdf" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://storage.googleapis.com/deepmind-media/gemma/codegemma_report.pdf</a>.

</span>
<span class="ltx_bibblock">Accessed: 2024-06-10.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(2)</span>
<span class="ltx_bibblock">
Meta llama 3.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://ai.meta.com/blog/meta-llama-3/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://ai.meta.com/blog/meta-llama-3/</a>.

</span>
<span class="ltx_bibblock">Accessed: 2024-06-10.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Androutsopoulos et al. (1995)</span>
<span class="ltx_bibblock">
Ion Androutsopoulos, Graeme D Ritchie, and Peter Thanisch.

</span>
<span class="ltx_bibblock">Natural language interfaces to databases–an introduction.

</span>
<span class="ltx_bibblock"><em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">Natural language engineering</em>, 1(1):29–81, 1995.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">b mc2 (2023)</span>
<span class="ltx_bibblock">
b mc2.

</span>
<span class="ltx_bibblock">sql-create-context dataset, 2023.

</span>
<span class="ltx_bibblock">URL <a target="_blank" href="https://huggingface.co/datasets/b-mc2/sql-create-context" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://huggingface.co/datasets/b-mc2/sql-create-context</a>.

</span>
<span class="ltx_bibblock">This dataset was created by modifying data from the following sources: <cite class="ltx_cite ltx_citemacro_cite">Zhong et al. (<a href="#bib.bib53" title="" class="ltx_ref">2017</a>); Yu et al. (<a href="#bib.bib49" title="" class="ltx_ref">2018b</a>)</cite>.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bhagavatula et al. (2015)</span>
<span class="ltx_bibblock">
Chandra Sekhar Bhagavatula, Thanapon Noraset, and Doug Downey.

</span>
<span class="ltx_bibblock">Tabel: Entity linking in web tables.

</span>
<span class="ltx_bibblock">In <em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">International Semantic Web Conference</em>, pp.  425–441. Springer, 2015.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Brown et al. (2020)</span>
<span class="ltx_bibblock">
Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, et al.

</span>
<span class="ltx_bibblock">Language models are few-shot learners.

</span>
<span class="ltx_bibblock"><em id="bib.bib6.1.1" class="ltx_emph ltx_font_italic">Advances in neural information processing systems</em>, 33:1877–1901, 2020.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chang et al. (2023)</span>
<span class="ltx_bibblock">
Shuaichen Chang, Jun Wang, Mingwen Dong, Lin Pan, Henghui Zhu, Alexander Hanbo Li, Wuwei Lan, Sheng Zhang, Jiarong Jiang, Joseph Lilien, et al.

</span>
<span class="ltx_bibblock">Dr. spider: A diagnostic evaluation benchmark towards text-to-sql robustness.

</span>
<span class="ltx_bibblock"><em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2301.08881</em>, 2023.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(8)</span>
<span class="ltx_bibblock">
Google Cloud.

</span>
<span class="ltx_bibblock">Github on bigquery: Analyze all the open-source code.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://cloud.google.com/blog/topics/public-datasets/github-on-bigquery-analyze-all-the-open-source-code" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://cloud.google.com/blog/topics/public-datasets/github-on-bigquery-analyze-all-the-open-source-code</a>.

</span>
<span class="ltx_bibblock">Accessed: 2024-06-10.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fedus et al. (2022a)</span>
<span class="ltx_bibblock">
William Fedus, Jeff Dean, and Barret Zoph.

</span>
<span class="ltx_bibblock">A review of sparse expert models in deep learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib9.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2209.01667</em>, 2022a.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fedus et al. (2022b)</span>
<span class="ltx_bibblock">
William Fedus, Barret Zoph, and Noam Shazeer.

</span>
<span class="ltx_bibblock">Switch transformers: Scaling to trillion parameter models with simple and efficient sparsity.

</span>
<span class="ltx_bibblock"><em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">Journal of Machine Learning Research</em>, 23(120):1–39, 2022b.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gan et al. (2021)</span>
<span class="ltx_bibblock">
Yujian Gan, Xinyun Chen, and Matthew Purver.

</span>
<span class="ltx_bibblock">Exploring underexplored limitations of cross-domain text-to-sql generalization.

</span>
<span class="ltx_bibblock"><em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2109.05157</em>, 2021.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gretel (2024)</span>
<span class="ltx_bibblock">
Gretel.

</span>
<span class="ltx_bibblock">Synthetic text-to-sql dataset, 2024.

</span>
<span class="ltx_bibblock">URL <a target="_blank" href="https://gretel.ai/blog/synthetic-text-to-sql-dataset" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://gretel.ai/blog/synthetic-text-to-sql-dataset</a>.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gu et al. (2022)</span>
<span class="ltx_bibblock">
Yu Gu, Xiang Deng, and Yu Su.

</span>
<span class="ltx_bibblock">Don’t generate, discriminate: A proposal for grounding language models to real-world environments.

</span>
<span class="ltx_bibblock"><em id="bib.bib13.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2212.09736</em>, 2022.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(14)</span>
<span class="ltx_bibblock">
Devrim Gunduz.

</span>
<span class="ltx_bibblock">Pagila.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://github.com/devrimgunduz/pagila" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/devrimgunduz/pagila</a>.

</span>
<span class="ltx_bibblock">Accessed: 2024-06-10.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guo et al. (2018)</span>
<span class="ltx_bibblock">
Daya Guo, Yibo Sun, Duyu Tang, Nan Duan, Jian Yin, Hong Chi, James Cao, Peng Chen, and Ming Zhou.

</span>
<span class="ltx_bibblock">Question generation from sql queries improves neural semantic parsing.

</span>
<span class="ltx_bibblock"><em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1808.06304</em>, 2018.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hristidis et al. (2003)</span>
<span class="ltx_bibblock">
Vagelis Hristidis, Yannis Papakonstantinou, and Luis Gravano.

</span>
<span class="ltx_bibblock">Efficient ir-style keyword search over relational databases.

</span>
<span class="ltx_bibblock">In <em id="bib.bib16.1.1" class="ltx_emph ltx_font_italic">Proceedings 2003 VLDB Conference</em>, pp.  850–861. Elsevier, 2003.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2021)</span>
<span class="ltx_bibblock">
Edward J Hu, Yelong Shen, Phillip Wallis, Zeyuan Allen-Zhu, Yuanzhi Li, Shean Wang, Lu Wang, and Weizhu Chen.

</span>
<span class="ltx_bibblock">Lora: Low-rank adaptation of large language models.

</span>
<span class="ltx_bibblock"><em id="bib.bib17.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2106.09685</em>, 2021.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Iyer et al. (2017)</span>
<span class="ltx_bibblock">
Srinivasan Iyer, Ioannis Konstas, Alvin Cheung, Jayant Krishnamurthy, and Luke Zettlemoyer.

</span>
<span class="ltx_bibblock">Learning a neural semantic parser from user feedback.

</span>
<span class="ltx_bibblock"><em id="bib.bib18.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1704.08760</em>, 2017.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2024)</span>
<span class="ltx_bibblock">
Albert Q Jiang, Alexandre Sablayrolles, Antoine Roux, Arthur Mensch, Blanche Savary, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Emma Bou Hanna, Florian Bressand, et al.

</span>
<span class="ltx_bibblock">Mixtral of experts.

</span>
<span class="ltx_bibblock"><em id="bib.bib19.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2401.04088</em>, 2024.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li &amp; Jagadish (2014)</span>
<span class="ltx_bibblock">
Fei Li and Hosagrahar V Jagadish.

</span>
<span class="ltx_bibblock">Constructing an interactive natural language interface for relational databases.

</span>
<span class="ltx_bibblock"><em id="bib.bib20.1.1" class="ltx_emph ltx_font_italic">Proceedings of the VLDB Endowment</em>, 8(1):73–84, 2014.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023)</span>
<span class="ltx_bibblock">
Haoyang Li, Jing Zhang, Cuiping Li, and Hong Chen.

</span>
<span class="ltx_bibblock">Resdsql: Decoupling schema linking and skeleton parsing for text-to-sql.

</span>
<span class="ltx_bibblock">In <em id="bib.bib21.1.1" class="ltx_emph ltx_font_italic">Proceedings of the AAAI Conference on Artificial Intelligence</em>, volume 37, pp.  13067–13075, 2023.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024a)</span>
<span class="ltx_bibblock">
Haoyang Li, Jing Zhang, Hanbing Liu, Ju Fan, Xiaokang Zhang, Jun Zhu, Renjie Wei, Hongyan Pan, Cuiping Li, and Hong Chen.

</span>
<span class="ltx_bibblock">Codes: Towards building open-source language models for text-to-sql.

</span>
<span class="ltx_bibblock"><em id="bib.bib22.1.1" class="ltx_emph ltx_font_italic">Proceedings of the ACM on Management of Data</em>, 2(3):1–28, 2024a.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024b)</span>
<span class="ltx_bibblock">
Jinyang Li, Binyuan Hui, Ge Qu, Jiaxi Yang, Binhua Li, Bowen Li, Bailin Wang, Bowen Qin, Ruiying Geng, Nan Huo, et al.

</span>
<span class="ltx_bibblock">Can llm already serve as a database interface? a big bench for large-scale database grounded text-to-sqls.

</span>
<span class="ltx_bibblock"><em id="bib.bib23.1.1" class="ltx_emph ltx_font_italic">Advances in Neural Information Processing Systems</em>, 36, 2024b.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Luo et al. (2023)</span>
<span class="ltx_bibblock">
Ziyang Luo, Can Xu, Pu Zhao, Qingfeng Sun, Xiubo Geng, Wenxiang Hu, Chongyang Tao, Jing Ma, Qingwei Lin, and Daxin Jiang.

</span>
<span class="ltx_bibblock">Wizardcoder: Empowering code large language models with evol-instruct.

</span>
<span class="ltx_bibblock"><em id="bib.bib24.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2306.08568</em>, 2023.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mao (2023)</span>
<span class="ltx_bibblock">
Toby Mao.

</span>
<span class="ltx_bibblock">Sqlglot.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://github.com/tobymao/sqlglot" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/tobymao/sqlglot</a>, 2023.

</span>
<span class="ltx_bibblock">Accessed: 2024-06-09.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mistral (2024)</span>
<span class="ltx_bibblock">
Mistral.

</span>
<span class="ltx_bibblock">Codestral.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://mistral.ai/news/codestral/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://mistral.ai/news/codestral/</a>, 2024.

</span>
<span class="ltx_bibblock">Accessed: date.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ngom &amp; Kraska (2024)</span>
<span class="ltx_bibblock">
Amadou Latyr Ngom and Tim Kraska.

</span>
<span class="ltx_bibblock">Mallet: Sql dialect translation with llm rule generation.

</span>
<span class="ltx_bibblock">In <em id="bib.bib27.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Seventh International Workshop on Exploiting Artificial Intelligence Techniques for Data Management</em>, pp.  1–5, 2024.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pérez-Mercado et al. (2023)</span>
<span class="ltx_bibblock">
Rubén Pérez-Mercado, Antonio Balderas, Andrés Muñoz, Juan Francisco Cabrera, Manuel Palomo-Duarte, and Juan Manuel Dodero.

</span>
<span class="ltx_bibblock">Chatbotsql: Conversational agent to support relational database query language learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib28.1.1" class="ltx_emph ltx_font_italic">SoftwareX</em>, 22:101346, 2023.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pourreza &amp; Rafiei (2023)</span>
<span class="ltx_bibblock">
Mohammadreza Pourreza and Davood Rafiei.

</span>
<span class="ltx_bibblock">Evaluating cross-domain text-to-sql models and benchmarks.

</span>
<span class="ltx_bibblock"><em id="bib.bib29.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2310.18538</em>, 2023.

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pourreza &amp; Rafiei (2024)</span>
<span class="ltx_bibblock">
Mohammadreza Pourreza and Davood Rafiei.

</span>
<span class="ltx_bibblock">Din-sql: Decomposed in-context learning of text-to-sql with self-correction.

</span>
<span class="ltx_bibblock"><em id="bib.bib30.1.1" class="ltx_emph ltx_font_italic">Advances in Neural Information Processing Systems</em>, 36, 2024.

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Riquelme et al. (2021)</span>
<span class="ltx_bibblock">
Carlos Riquelme, Joan Puigcerver, Basil Mustafa, Maxim Neumann, Rodolphe Jenatton, André Susano Pinto, Daniel Keysers, and Neil Houlsby.

</span>
<span class="ltx_bibblock">Scaling vision with sparse mixture of experts.

</span>
<span class="ltx_bibblock"><em id="bib.bib31.1.1" class="ltx_emph ltx_font_italic">Advances in Neural Information Processing Systems</em>, 34:8583–8595, 2021.

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Roziere et al. (2023)</span>
<span class="ltx_bibblock">
Baptiste Roziere, Jonas Gehring, Fabian Gloeckle, Sten Sootla, Itai Gat, Xiaoqing Ellen Tan, Yossi Adi, Jingyu Liu, Tal Remez, Jérémy Rapin, et al.

</span>
<span class="ltx_bibblock">Code llama: Open foundation models for code.

</span>
<span class="ltx_bibblock"><em id="bib.bib32.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2308.12950</em>, 2023.

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shinn et al. (2023)</span>
<span class="ltx_bibblock">
Noah Shinn, Beck Labash, and Ashwin Gopinath.

</span>
<span class="ltx_bibblock">Reflexion: an autonomous agent with dynamic memory and self-reflection.

</span>
<span class="ltx_bibblock"><em id="bib.bib33.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2303.11366</em>, 2023.

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sun et al. (2023a)</span>
<span class="ltx_bibblock">
Ruoxi Sun, Sercan Ö Arik, Alex Muzio, Lesly Miculicich, Satya Gundabathula, Pengcheng Yin, Hanjun Dai, Hootan Nakhost, Rajarishi Sinha, Zifeng Wang, et al.

</span>
<span class="ltx_bibblock">Sql-palm: Improved large language model adaptation for text-to-sql (extended).

</span>
<span class="ltx_bibblock"><em id="bib.bib34.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2306.00739</em>, 2023a.

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sun et al. (2023b)</span>
<span class="ltx_bibblock">
Ruoxi Sun, Sercan Ö Arik, Rajarishi Sinha, Hootan Nakhost, Hanjun Dai, Pengcheng Yin, and Tomas Pfister.

</span>
<span class="ltx_bibblock">Sqlprompt: In-context text-to-sql with minimal labeled data.

</span>
<span class="ltx_bibblock"><em id="bib.bib35.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2311.02883</em>, 2023b.

</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Talaei et al. (2024)</span>
<span class="ltx_bibblock">
Shayan Talaei, Mohammadreza Pourreza, Yu-Chen Chang, Azalia Mirhoseini, and Amin Saberi.

</span>
<span class="ltx_bibblock">Chess: Contextual harnessing for efficient sql synthesis.

</span>
<span class="ltx_bibblock"><em id="bib.bib36.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2405.16755</em>, 2024.

</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Team et al. (2023)</span>
<span class="ltx_bibblock">
Gemini Team, Rohan Anil, Sebastian Borgeaud, Yonghui Wu, Jean-Baptiste Alayrac, Jiahui Yu, Radu Soricut, Johan Schalkwyk, Andrew M Dai, Anja Hauth, et al.

</span>
<span class="ltx_bibblock">Gemini: a family of highly capable multimodal models.

</span>
<span class="ltx_bibblock"><em id="bib.bib37.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2312.11805</em>, 2023.

</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2019)</span>
<span class="ltx_bibblock">
Bailin Wang, Richard Shin, Xiaodong Liu, Oleksandr Polozov, and Matthew Richardson.

</span>
<span class="ltx_bibblock">Rat-sql: Relation-aware schema encoding and linking for text-to-sql parsers.

</span>
<span class="ltx_bibblock"><em id="bib.bib38.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1911.04942</em>, 2019.

</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2021)</span>
<span class="ltx_bibblock">
Bailin Wang, Wenpeng Yin, Xi Victoria Lin, and Caiming Xiong.

</span>
<span class="ltx_bibblock">Learning to synthesize data for semantic parsing.

</span>
<span class="ltx_bibblock"><em id="bib.bib39.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2104.05827</em>, 2021.

</span>
</li>
<li id="bib.bib40" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023)</span>
<span class="ltx_bibblock">
Bing Wang, Changyu Ren, Jian Yang, Xinnian Liang, Jiaqi Bai, Qian-Wen Zhang, Zhao Yan, and Zhoujun Li.

</span>
<span class="ltx_bibblock">Mac-sql: Multi-agent collaboration for text-to-sql.

</span>
<span class="ltx_bibblock"><em id="bib.bib40.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2312.11242</em>, 2023.

</span>
</li>
<li id="bib.bib41" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2022)</span>
<span class="ltx_bibblock">
Yizhong Wang, Yeganeh Kordi, Swaroop Mishra, Alisa Liu, Noah A Smith, Daniel Khashabi, and Hannaneh Hajishirzi.

</span>
<span class="ltx_bibblock">Self-instruct: Aligning language models with self-generated instructions.

</span>
<span class="ltx_bibblock"><em id="bib.bib41.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2212.10560</em>, 2022.

</span>
</li>
<li id="bib.bib42" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2022)</span>
<span class="ltx_bibblock">
Jason Wei, Yi Tay, Rishi Bommasani, Colin Raffel, Barret Zoph, Sebastian Borgeaud, Dani Yogatama, Maarten Bosma, Denny Zhou, Donald Metzler, et al.

</span>
<span class="ltx_bibblock">Emergent abilities of large language models.

</span>
<span class="ltx_bibblock"><em id="bib.bib42.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2206.07682</em>, 2022.

</span>
</li>
<li id="bib.bib43" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2023)</span>
<span class="ltx_bibblock">
Yuxiang Wei, Zhe Wang, Jiawei Liu, Yifeng Ding, and Lingming Zhang.

</span>
<span class="ltx_bibblock">Magicoder: Source code is all you need.

</span>
<span class="ltx_bibblock"><em id="bib.bib43.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2312.02120</em>, 2023.

</span>
</li>
<li id="bib.bib44" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al. (2021)</span>
<span class="ltx_bibblock">
Kun Wu, Lijie Wang, Zhenghua Li, Ao Zhang, Xinyan Xiao, Hua Wu, Min Zhang, and Haifeng Wang.

</span>
<span class="ltx_bibblock">Data augmentation with hierarchical sql-to-question generation for cross-domain text-to-sql parsing.

</span>
<span class="ltx_bibblock"><em id="bib.bib44.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2103.02227</em>, 2021.

</span>
</li>
<li id="bib.bib45" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yadav et al. (2024)</span>
<span class="ltx_bibblock">
Prateek Yadav, Derek Tam, Leshem Choshen, Colin A Raffel, and Mohit Bansal.

</span>
<span class="ltx_bibblock">Ties-merging: Resolving interference when merging models.

</span>
<span class="ltx_bibblock"><em id="bib.bib45.1.1" class="ltx_emph ltx_font_italic">Advances in Neural Information Processing Systems</em>, 36, 2024.

</span>
</li>
<li id="bib.bib46" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang et al. (2024)</span>
<span class="ltx_bibblock">
Jiaxi Yang, Binyuan Hui, Min Yang, Jian Yang, Junyang Lin, and Chang Zhou.

</span>
<span class="ltx_bibblock">Synthesizing text-to-sql data from weak and strong llms.

</span>
<span class="ltx_bibblock"><em id="bib.bib46.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2408.03256</em>, 2024.

</span>
</li>
<li id="bib.bib47" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2024)</span>
<span class="ltx_bibblock">
Le Yu, Bowen Yu, Haiyang Yu, Fei Huang, and Yongbin Li.

</span>
<span class="ltx_bibblock">Language models are super mario: Absorbing abilities from homologous models as a free lunch.

</span>
<span class="ltx_bibblock">In <em id="bib.bib47.1.1" class="ltx_emph ltx_font_italic">Forty-first International Conference on Machine Learning</em>, 2024.

</span>
</li>
<li id="bib.bib48" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2018a)</span>
<span class="ltx_bibblock">
Tao Yu, Michihiro Yasunaga, Kai Yang, Rui Zhang, Dongxu Wang, Zifan Li, and Dragomir Radev.

</span>
<span class="ltx_bibblock">Syntaxsqlnet: Syntax tree networks for complex and cross-domaintext-to-sql task.

</span>
<span class="ltx_bibblock"><em id="bib.bib48.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1810.05237</em>, 2018a.

</span>
</li>
<li id="bib.bib49" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2018b)</span>
<span class="ltx_bibblock">
Tao Yu, Rui Zhang, Kai Yang, Michihiro Yasunaga, Dongxu Wang, Zifan Li, James Ma, Irene Li, Qingning Yao, Shanelle Roman, et al.

</span>
<span class="ltx_bibblock">Spider: A large-scale human-labeled dataset for complex and cross-domain semantic parsing and text-to-sql task.

</span>
<span class="ltx_bibblock"><em id="bib.bib49.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1809.08887</em>, 2018b.

</span>
</li>
<li id="bib.bib50" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2019)</span>
<span class="ltx_bibblock">
Tao Yu, Rui Zhang, He Yang Er, Suyi Li, Eric Xue, Bo Pang, Xi Victoria Lin, Yi Chern Tan, Tianze Shi, Zihan Li, et al.

</span>
<span class="ltx_bibblock">Cosql: A conversational text-to-sql challenge towards cross-domain natural language interfaces to databases.

</span>
<span class="ltx_bibblock"><em id="bib.bib50.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1909.05378</em>, 2019.

</span>
</li>
<li id="bib.bib51" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2020)</span>
<span class="ltx_bibblock">
Tao Yu, Chien-Sheng Wu, Xi Victoria Lin, Bailin Wang, Yi Chern Tan, Xinyi Yang, Dragomir Radev, Richard Socher, and Caiming Xiong.

</span>
<span class="ltx_bibblock">Grappa: Grammar-augmented pre-training for table semantic parsing.

</span>
<span class="ltx_bibblock"><em id="bib.bib51.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2009.13845</em>, 2020.

</span>
</li>
<li id="bib.bib52" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao et al. (2022)</span>
<span class="ltx_bibblock">
Yiyun Zhao, Jiarong Jiang, Yiqun Hu, Wuwei Lan, Henry Zhu, Anuj Chauhan, Alexander Li, Lin Pan, Jun Wang, Chung-Wei Hang, et al.

</span>
<span class="ltx_bibblock">Importance of synthesizing high-quality data for text-to-sql parsing.

</span>
<span class="ltx_bibblock"><em id="bib.bib52.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2212.08785</em>, 2022.

</span>
</li>
<li id="bib.bib53" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhong et al. (2017)</span>
<span class="ltx_bibblock">
Victor Zhong, Caiming Xiong, and Richard Socher.

</span>
<span class="ltx_bibblock">Seq2sql: Generating structured queries from natural language using reinforcement learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib53.1.1" class="ltx_emph ltx_font_italic">CoRR</em>, abs/1709.00103, 2017.

</span>
</li>
<li id="bib.bib54" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zmigrod et al. (2024)</span>
<span class="ltx_bibblock">
Ran Zmigrod, Salwa Alamir, and Xiaomo Liu.

</span>
<span class="ltx_bibblock">Translating between sql dialects for cloud migration.

</span>
<span class="ltx_bibblock">In <em id="bib.bib54.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 46th International Conference on Software Engineering: Software Engineering in Practice</em>, pp.  189–191, 2024.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section id="A1" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Appendix</h2>

<section id="A1.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>Related Work</h3>

<div id="A1.SS1.p1" class="ltx_para">
<p id="A1.SS1.p1.1" class="ltx_p">Early work for data augmentation for Text-to-SQL largely rely on human annotations to verify the generated SQL queries or extract high-quality question-SQL pairs <cite class="ltx_cite ltx_citemacro_citep">(Iyer et al., <a href="#bib.bib18" title="" class="ltx_ref">2017</a>; Yu et al., <a href="#bib.bib48" title="" class="ltx_ref">2018a</a>)</cite>. <cite class="ltx_cite ltx_citemacro_citet">Guo et al. (<a href="#bib.bib15" title="" class="ltx_ref">2018</a>)</cite> use a pattern-based approach to generate SQL queries and utilize a copy-based Seq2Seq model to directly translate SQL queries into natural language questions. Some of the recent methods <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a href="#bib.bib44" title="" class="ltx_ref">2021</a>; Yu et al., <a href="#bib.bib51" title="" class="ltx_ref">2020</a>; Zhao et al., <a href="#bib.bib52" title="" class="ltx_ref">2022</a>; Wang et al., <a href="#bib.bib39" title="" class="ltx_ref">2021</a>)</cite> rely on grammar-based approaches to generate question-SQL pairs. <cite class="ltx_cite ltx_citemacro_citet">Wu et al. (<a href="#bib.bib44" title="" class="ltx_ref">2021</a>)</cite> use an abstract syntax tree grammar to generate SQL queries and then employs a hierarchical SQL-to-question generation model to obtain questions for the SQL queries. Similarly, <cite class="ltx_cite ltx_citemacro_citet">Yu et al. (<a href="#bib.bib51" title="" class="ltx_ref">2020</a>)</cite> extract and manually annotate question and SQL templates from Spider <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib49" title="" class="ltx_ref">2018b</a>)</cite> to induce a grammar, then use the grammar to generate synthetic samples for databases in Spider and WikiTables <cite class="ltx_cite ltx_citemacro_citep">(Bhagavatula et al., <a href="#bib.bib5" title="" class="ltx_ref">2015</a>)</cite>. However, all methods relying on grammars have the drawback of generating samples that lack diversity and highly depend on the grammar used <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib51" title="" class="ltx_ref">2020</a>)</cite>, which makes them not suitable for tasks that require generalization to new schemas.</p>
</div>
<div id="A1.SS1.p2" class="ltx_para">
<p id="A1.SS1.p2.1" class="ltx_p">Recently, <cite class="ltx_cite ltx_citemacro_citet">Li et al. (<a href="#bib.bib22" title="" class="ltx_ref">2024a</a>)</cite> propose a bidirectional method with question-to-SQL and SQL-to-question augmentation. In the former, they use some human-annotated samples with in-context learning with LLMs to generate queries for a new database, and in the latter, they extract templates from Spider and fill those templates with the schema of a given database. This method has the limitation that the diversity of the question and SQL pairs is restricted to either templates or in-context samples. Concurrently with our work, SENSE <cite class="ltx_cite ltx_citemacro_citep">(Yang et al., <a href="#bib.bib46" title="" class="ltx_ref">2024</a>)</cite> proposed a two-step synthetic data generation process to enhance the performance of open-source text-to-SQL models. In the first step, they utilize a robust LLM to generate a supervised fine-tuning dataset with a single LLM call. In the second stage, they employ a smaller, weaker LLM to produce some incorrect SQL queries, which are then used to construct a preference dataset. The initial phase of their method is similar to our proposed approach; however, their method’s simplicity, which lacks execution result filtering or conditioning on externally provided SQL keywords and relies solely on the LLMs’ parametric knowledge, contrasts with our method that incorporates external knowledge to craft diverse queries. Lastly, <cite class="ltx_cite ltx_citemacro_citet">Gretel (<a href="#bib.bib12" title="" class="ltx_ref">2024</a>)</cite> release a high-quality large dataset of 100K question-SQL pairs from different domains.<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>The methodology to generate the pairs is not publicly available.</span></span></span> Overall, none of the previously mentioned approaches consider different dialects and they are proposed for SQLite <span id="footnote2" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>Gretel dataset doesn’t specify the dialect.</span></span></span>, which is a significant drawback of their work.</p>
</div>
<div id="A1.SS1.p3" class="ltx_para">
<p id="A1.SS1.p3.1" class="ltx_p">In the domain of synthetic data generation for code, recent work such as Reflexion <cite class="ltx_cite ltx_citemacro_citep">(Shinn et al., <a href="#bib.bib33" title="" class="ltx_ref">2023</a>)</cite> leverage external or internal feedback signals to enhance the code reasoning capabilities of language models. Code Alpaca features a dataset of 20K code instructions automatically generated by applying SELF-INSTRUCT <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a href="#bib.bib41" title="" class="ltx_ref">2022</a>)</cite> to LLMs across different seed tasks. WizardCoder <cite class="ltx_cite ltx_citemacro_citep">(Luo et al., <a href="#bib.bib24" title="" class="ltx_ref">2023</a>)</cite> introduces Code Evol-Instruct, which uses manually crafted prompts to guide LLMs, thereby increasing the complexity and diversity of the synthetic data. Similarly, Magicoder <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a href="#bib.bib43" title="" class="ltx_ref">2023</a>)</cite> proposes OSS-INSTRUCT, which consists 75K diverse synthetic instruction samples from open-source code snippets that are used as the seeds to both increase diversity and also control the data generation process.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="A1.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.2 </span>Datasets Details</h3>

<section id="A1.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.2.1 </span>SQLite</h4>

<div id="A1.SS2.SSS1.p1" class="ltx_para">
<p id="A1.SS2.SSS1.p1.1" class="ltx_p">To the best of our knowledge, the majority of large-scale, cross-domain Text-to-SQL datasets are tailored for the SQLite dialect. Among these, the Spider <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib49" title="" class="ltx_ref">2018b</a>)</cite> and BIRD <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a href="#bib.bib23" title="" class="ltx_ref">2024b</a>)</cite> datasets are two popular benchmarks used to evaluate Text-to-SQL model performance <cite class="ltx_cite ltx_citemacro_citep">(Pourreza &amp; Rafiei, <a href="#bib.bib30" title="" class="ltx_ref">2024</a>; Wang et al., <a href="#bib.bib40" title="" class="ltx_ref">2023</a>; Talaei et al., <a href="#bib.bib36" title="" class="ltx_ref">2024</a>; Li et al., <a href="#bib.bib22" title="" class="ltx_ref">2024a</a>)</cite>, establishing them as primary standards in this area. We use the Spider training set to derive seed templates. To ensure a fair comparison, we report the results using the BIRD benchmark for the SQLite dialect, with the Spider dataset serving as a baseline to assess the quality of our synthetic samples. The BIRD benchmark includes two development sets: the original dev set, which contains 1534 question-SQL pairs with some incorrect SQL queries <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a href="#bib.bib22" title="" class="ltx_ref">2024a</a>)</cite>, and the minidev set, which features smaller size of 500 higher quality question-SQL pairs. We evaluate on both.</p>
</div>
</section>
<section id="A1.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.2.2 </span>PostgreSQL</h4>

<div id="A1.SS2.SSS2.p1" class="ltx_para">
<p id="A1.SS2.SSS2.p1.1" class="ltx_p">As mentioned in the previous section, there is a shortage of human-annotated benchmarks for dialects other than SQLite. Therefore, for PostgreSQL dialect, we use the following datasets to compare the performance of the models:</p>
</div>
<section id="A1.SS2.SSS2.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="subsubsubsec..transpiled_postgres_bird" id="subsubsubsec..transpiled_postgres_bird" class="ltx_anchor">PostgreSQL BIRD:</a></h5>

<div id="A1.SS2.SSS2.Px1.p1" class="ltx_para">
<p id="A1.SS2.SSS2.Px1.p1.1" class="ltx_p">All 11 databases in the BIRD development set are migrated from SQLite to PostgreSQL, and their SQL queries are transpiled to PostgreSQL using <cite class="ltx_cite ltx_citemacro_citet">Mao (<a href="#bib.bib25" title="" class="ltx_ref">2023</a>)</cite>. This migration and transpilation are conducted under a best-effort setting. However, some challenges are encountered: a few databases have foreign key violations, and some queries cannot be successfully transpiled to PostgreSQL. Out of the 1534 samples in the development set, 951 queries are successfully migrated for PostgreSQL.</p>
</div>
</section>
<section id="A1.SS2.SSS2.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="subsubsubsec..transpiled_postgres_minidev" id="subsubsubsec..transpiled_postgres_minidev" class="ltx_anchor">PostgreSQL MiniDev:</a></h5>

<div id="A1.SS2.SSS2.Px2.p1" class="ltx_para">
<p id="A1.SS2.SSS2.Px2.p1.1" class="ltx_p">Similar to the approach we use for the PostgreSQL BIRD dataset, the authors of BIRD transpile queries in the minidev set, manually annotating any pairs that cannot be directly translated from SQLite to PostgreSQL. This dataset comprises 500 question-SQL pairs.</p>
</div>
</section>
<section id="A1.SS2.SSS2.Px3" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="subsubsubsec..pagila" id="subsubsubsec..pagila" class="ltx_anchor">Pagila:</a></h5>

<div id="A1.SS2.SSS2.Px3.p1" class="ltx_para">
<p id="A1.SS2.SSS2.Px3.p1.1" class="ltx_p">Since the BIRD benchmark was originally developed for SQLite, the transpiled queries do not utilize many PostgreSQL-specific functions and keywords. To address this, we created a PostgreSQL-specific benchmark, Pagila <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib14" title="" class="ltx_ref">Gunduz, </a>)</cite>. The Pagila database mimics a real-world business by modeling a DVD rental store. It includes tables for films, actors, customers, inventory, rental transactions, and more, making it a useful resource for educational purposes. This database is designed to provide a standard schema for use in books, tutorials, and articles. We gathered a dataset of 46 human-annotated question-SQL pairs, which were validated and extracted from open-source resources for this database.</p>
</div>
</section>
</section>
<section id="A1.SS2.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.2.3 </span>BigQuery</h4>

<div id="A1.SS2.SSS3.p1" class="ltx_para">
<p id="A1.SS2.SSS3.p1.1" class="ltx_p">We use the following baselines for reporting the performance for BigQuery dialect:</p>
</div>
<section id="A1.SS2.SSS3.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="subsubsubsec..transpiled_postgres_bird" id="subsubsubsec..transpiled_postgres_bird" class="ltx_anchor">BigQuery BIRD:</a></h5>

<div id="A1.SS2.SSS3.Px1.p1" class="ltx_para">
<p id="A1.SS2.SSS3.Px1.p1.1" class="ltx_p">Similar to the approach mentioned for PostgreSQL, all 11 databases in the BIRD development set are migrated from SQLite to BigQuery, and their SQL queries are transpiled to BigQuery using <cite class="ltx_cite ltx_citemacro_citet">Mao (<a href="#bib.bib25" title="" class="ltx_ref">2023</a>)</cite>. Out of the 1534 samples in the development set, 1309 queries are successfully migrated for BigQuery.</p>
</div>
</section>
<section id="A1.SS2.SSS3.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph"><a name="subsubsubsec..github_repo" id="subsubsubsec..github_repo" class="ltx_anchor">Github Repositories:</a></h5>

<div id="A1.SS2.SSS3.Px2.p1" class="ltx_para">
<p id="A1.SS2.SSS3.Px2.p1.1" class="ltx_p">In our work, for the BigQuery-specific database, we utilized one of the publicly available and widely used databases, the GitHub repositories <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib8" title="" class="ltx_ref">Cloud, </a>)</cite>. This database allows for monitoring and analyzing GitHub’s activity since 2011. We gathered a dataset of 40 human-annotated question-SQL pairs, validated and extracted from open-source resources for this database.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
</section>
<section id="A1.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.3 </span>Models &amp; Metrics</h3>

<section id="A1.SS3.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.3.1 </span>Models</h4>

<div id="A1.SS3.SSS1.p1" class="ltx_para">
<p id="A1.SS3.SSS1.p1.1" class="ltx_p">To evaluate the quality of the generated samples, we fine-tune models from different families, including CodeLlama 7B <cite class="ltx_cite ltx_citemacro_citep">(Roziere et al., <a href="#bib.bib32" title="" class="ltx_ref">2023</a>)</cite>, CodeGemma 7B <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib1" title="" class="ltx_ref">cod, </a>)</cite>, and Codestral 22B <cite class="ltx_cite ltx_citemacro_citep">(Mistral, <a href="#bib.bib26" title="" class="ltx_ref">2024</a>)</cite>, using LoRA adapters for all linear layers <cite class="ltx_cite ltx_citemacro_citep">(Hu et al., <a href="#bib.bib17" title="" class="ltx_ref">2021</a>)</cite> with a rank of 128 and alpha of 256. For the synthetic data generation process we use Gemini 1.5 pro as the main model and Gemini 1.5 flash as the quality check model. To ensure the data generation process is affordable and replicable, we also include high-performing, open-source LLMs for synthetic data generation. For template expansion and filling, we employ Llama-3-70B <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib2" title="" class="ltx_ref">met, </a>)</cite>, and for quality check step, we employ Mixtral-8x7B <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a href="#bib.bib19" title="" class="ltx_ref">2024</a>)</cite>.</p>
</div>
</section>
<section id="A1.SS3.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.3.2 </span>Metrics</h4>

<div id="A1.SS3.SSS2.p1" class="ltx_para">
<p id="A1.SS3.SSS2.p1.1" class="ltx_p">We primarily focus on execution accuracy (EX) as the main metric, which is widely accepted as the standard for all Text-to-SQL benchmarks <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a href="#bib.bib49" title="" class="ltx_ref">2018b</a>; Li et al., <a href="#bib.bib23" title="" class="ltx_ref">2024b</a>)</cite>.</p>
</div>
</section>
</section>
<section id="A1.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.4 </span>Method Seeds</h3>

<div id="A1.SS4.p1" class="ltx_para">
<p id="A1.SS4.p1.1" class="ltx_p">In this section, we present details regarding the number of seed SQL templates extracted from the Spider train set, which comprises 8,659 training examples across 146 databases. To generate seed templates for dialects other than SQLite, we transpiled the queries from SQLite to the target dialects using SQLGlot. <a href="#A1.T9" title="In A.4 Method Seeds ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">9</span></a> provides the counts of seed SQL queries for each dialect. Moreover, for scraping the tutorials we used the following websites for each dialect:</p>
</div>
<div id="A1.SS4.p2" class="ltx_para">
<ul id="A1.I1" class="ltx_itemize">
<li id="A1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A1.I1.i1.p1" class="ltx_para">
<p id="A1.I1.i1.p1.1" class="ltx_p">SQLite: <a target="_blank" href="https://www.javatpoint.com/sqlite-tutorial" title="" class="ltx_ref ltx_href">SQLite tutorial</a></p>
</div>
</li>
<li id="A1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A1.I1.i2.p1" class="ltx_para">
<p id="A1.I1.i2.p1.1" class="ltx_p">PostgreSQL: <a target="_blank" href="https://www.javatpoint.com/postgresql-tutorial" title="" class="ltx_ref ltx_href">PostgreSQL tutorial</a></p>
</div>
</li>
<li id="A1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A1.I1.i3.p1" class="ltx_para">
<p id="A1.I1.i3.p1.1" class="ltx_p">BigQuery: <a target="_blank" href="https://cloud.google.com/bigquery/docs/reference/standard-sql/query-syntax" title="" class="ltx_ref ltx_href">BigQuery syntax</a></p>
</div>
</li>
</ul>
</div>
<figure id="A1.T9" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 9: </span><span id="A1.T9.2.1" class="ltx_text" style="font-size:90%;">Number of seed SQL templates extracted from the Spider training dataset for three dialects of SQLite, BigQuery, PostgreSQL.</span></figcaption>
<div id="A1.T9.3" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:173.4pt;height:71.2pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-0.9pt,0.4pt) scale(0.98954394014881,0.98954394014881) ;">
<table id="A1.T9.3.1" class="ltx_tabular ltx_align_middle">
<tr id="A1.T9.3.1.1" class="ltx_tr">
<td id="A1.T9.3.1.1.1" class="ltx_td ltx_align_left ltx_border_tt">Dialect</td>
<td id="A1.T9.3.1.1.2" class="ltx_td ltx_align_center ltx_border_tt">Number of templates</td>
</tr>
<tr id="A1.T9.3.1.2" class="ltx_tr">
<td id="A1.T9.3.1.2.1" class="ltx_td ltx_align_left ltx_border_t">SQLite</td>
<td id="A1.T9.3.1.2.2" class="ltx_td ltx_align_center ltx_border_t">1458</td>
</tr>
<tr id="A1.T9.3.1.3" class="ltx_tr">
<td id="A1.T9.3.1.3.1" class="ltx_td ltx_align_left">BigQuery</td>
<td id="A1.T9.3.1.3.2" class="ltx_td ltx_align_center">1665</td>
</tr>
<tr id="A1.T9.3.1.4" class="ltx_tr">
<td id="A1.T9.3.1.4.1" class="ltx_td ltx_align_left ltx_border_bb">PostgreSQL</td>
<td id="A1.T9.3.1.4.2" class="ltx_td ltx_align_center ltx_border_bb">1293</td>
</tr>
</table>
</span></div>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
<section id="A1.SS4.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.4.1 </span>Quality Check Ablation</h4>

<div id="A1.SS4.SSS1.p1" class="ltx_para">
<p id="A1.SS4.SSS1.p1.1" class="ltx_p">In our proposed method, we opted to use a secondary LLM to act as a judge in the quality check step, ensuring the high quality of the generated samples and avoiding repetition of previous errors. In this section, we assess this approach by comparing two scenarios: one where the same LLM acts as judge, and another where a secondary LLM performs the judging role. The results, presented in <a href="#A1.T10" title="In A.4.1 Quality Check Ablation ‣ A.4 Method Seeds ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">10</span></a>, demonstrate that the CodeLlama 7B model trained on the dataset filtered by a secondary model achieved higher performance on the BIRD development set, thus validating our strategy.
Moreover, <a href="#A1.T11" title="In A.4.1 Quality Check Ablation ‣ A.4 Method Seeds ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">11</span></a> provides the result of removing the quality check step and shows a performance drop in accuracy, validating the importance of this step to remove low quality samples.</p>
</div>
<figure id="A1.T10" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 10: </span><span id="A1.T10.2.1" class="ltx_text" style="font-size:90%;">Performance Comparison of Two Scenarios: One Where the Same Model Generates and Filters Candidate Samples, and Another Where a Secondary Model Is Used for Filtering.</span></figcaption>
<div id="A1.T10.3" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:173.4pt;height:64.6pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-10.0pt,3.7pt) scale(0.896742693803246,0.896742693803246) ;">
<table id="A1.T10.3.1" class="ltx_tabular ltx_align_middle">
<tr id="A1.T10.3.1.1" class="ltx_tr">
<td id="A1.T10.3.1.1.1" class="ltx_td ltx_align_left ltx_border_tt">Base Model</td>
<td id="A1.T10.3.1.1.2" class="ltx_td ltx_align_center ltx_border_tt">Judge Model</td>
<td id="A1.T10.3.1.1.3" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
</tr>
<tr id="A1.T10.3.1.2" class="ltx_tr">
<td id="A1.T10.3.1.2.1" class="ltx_td ltx_align_left ltx_border_t">Mixtral 8x7B</td>
<td id="A1.T10.3.1.2.2" class="ltx_td ltx_align_center ltx_border_t">Mixtral 8x7B</td>
<td id="A1.T10.3.1.2.3" class="ltx_td ltx_align_center ltx_border_t">32.59</td>
</tr>
<tr id="A1.T10.3.1.3" class="ltx_tr">
<td id="A1.T10.3.1.3.1" class="ltx_td ltx_align_left">Llama 3 70B</td>
<td id="A1.T10.3.1.3.2" class="ltx_td ltx_align_center">Llama 3 70B</td>
<td id="A1.T10.3.1.3.3" class="ltx_td ltx_align_center">33.41</td>
</tr>
<tr id="A1.T10.3.1.4" class="ltx_tr">
<td id="A1.T10.3.1.4.1" class="ltx_td ltx_align_left ltx_border_bb">Llama 3 70B</td>
<td id="A1.T10.3.1.4.2" class="ltx_td ltx_align_center ltx_border_bb">Mixtral 8x7B</td>
<td id="A1.T10.3.1.4.3" class="ltx_td ltx_align_center ltx_border_bb"><span id="A1.T10.3.1.4.3.1" class="ltx_text ltx_font_bold">34.55</span></td>
</tr>
</table>
</span></div>
</figure>
<figure id="A1.T11" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 11: </span><span id="A1.T11.2.1" class="ltx_text" style="font-size:90%;">Performance on the ablation of the quality checker model with Codellama 7B on BIRD dev set. OS refers to using open-source models like Llama3 and Mixtral for data generation.</span></figcaption>
<div id="A1.T11.3" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:173.4pt;height:42.2pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-24.3pt,5.9pt) scale(0.781088513177455,0.781088513177455) ;">
<table id="A1.T11.3.1" class="ltx_tabular ltx_align_middle">
<tr id="A1.T11.3.1.1" class="ltx_tr">
<td id="A1.T11.3.1.1.1" class="ltx_td ltx_align_left ltx_border_tt">Pipeline</td>
<td id="A1.T11.3.1.1.2" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
</tr>
<tr id="A1.T11.3.1.2" class="ltx_tr">
<td id="A1.T11.3.1.2.1" class="ltx_td ltx_align_left ltx_border_t">Pipeline without quality check (OS)</td>
<td id="A1.T11.3.1.2.2" class="ltx_td ltx_align_center ltx_border_t">32.85</td>
</tr>
<tr id="A1.T11.3.1.3" class="ltx_tr">
<td id="A1.T11.3.1.3.1" class="ltx_td ltx_align_left ltx_border_bb">Full pipeline (OS)</td>
<td id="A1.T11.3.1.3.2" class="ltx_td ltx_align_center ltx_border_bb">34.55</td>
</tr>
</table>
</span></div>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="A1.SS4.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.4.2 </span>The Impact of the Sample Size</h4>

<div id="A1.SS4.SSS2.p1" class="ltx_para">
<p id="A1.SS4.SSS2.p1.1" class="ltx_p">Due to the limited availability of large-scale benchmarks for dialects other than SQLite, our ablation studies focus solely on the SQLite dialect. For each target dialect, we use our method to generate 20K samples. We assess the impact of varying sample sizes on the final performance of the model. <a href="#A1.T12" title="In A.4.2 The Impact of the Sample Size ‣ A.4 Method Seeds ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">12</span></a> presents the performance with the CodeLlama 7B model when trained on different sample sizes generated by Llama 3 and Mixtral models, and tested on the BIRD development set. As indicated, there is diminishing return in performance as the sample size increases.</p>
</div>
<figure id="A1.T12" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 12: </span><span id="A1.T12.3.1" class="ltx_text" style="font-size:90%;">Evaluating the performance of CodeLlama 7B using different sample sizes on BIRD development set. "-" denotes the zero-shot performance of the model</span></figcaption>
<div id="A1.T12.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:216.8pt;height:90.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.3pt,-0.1pt) scale(1.0032321352632,1.0032321352632) ;">
<table id="A1.T12.1.1" class="ltx_tabular ltx_align_middle">
<tr id="A1.T12.1.1.1" class="ltx_tr">
<td id="A1.T12.1.1.1.2" class="ltx_td ltx_align_left ltx_border_tt">#Samples</td>
<td id="A1.T12.1.1.1.3" class="ltx_td ltx_align_center ltx_border_tt">Model</td>
<td id="A1.T12.1.1.1.4" class="ltx_td ltx_align_center ltx_border_tt">EX (%)</td>
<td id="A1.T12.1.1.1.1" class="ltx_td ltx_align_center ltx_border_tt">
<math id="A1.T12.1.1.1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="A1.T12.1.1.1.1.m1.1a"><mi mathvariant="normal" id="A1.T12.1.1.1.1.m1.1.1" xref="A1.T12.1.1.1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="A1.T12.1.1.1.1.m1.1b"><ci id="A1.T12.1.1.1.1.m1.1.1.cmml" xref="A1.T12.1.1.1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T12.1.1.1.1.m1.1c">\Delta</annotation></semantics></math>EX</td>
</tr>
<tr id="A1.T12.1.1.2" class="ltx_tr">
<td id="A1.T12.1.1.2.1" class="ltx_td ltx_align_left ltx_border_t">-</td>
<td id="A1.T12.1.1.2.2" class="ltx_td ltx_align_center ltx_border_t">CodeLlama</td>
<td id="A1.T12.1.1.2.3" class="ltx_td ltx_align_center ltx_border_t">17.86</td>
<td id="A1.T12.1.1.2.4" class="ltx_td ltx_align_center ltx_border_t">0</td>
</tr>
<tr id="A1.T12.1.1.3" class="ltx_tr">
<td id="A1.T12.1.1.3.1" class="ltx_td ltx_align_left">5000</td>
<td id="A1.T12.1.1.3.2" class="ltx_td ltx_align_center">CodeLlama</td>
<td id="A1.T12.1.1.3.3" class="ltx_td ltx_align_center">32.59</td>
<td id="A1.T12.1.1.3.4" class="ltx_td ltx_align_center">+ 14.73</td>
</tr>
<tr id="A1.T12.1.1.4" class="ltx_tr">
<td id="A1.T12.1.1.4.1" class="ltx_td ltx_align_left">10000</td>
<td id="A1.T12.1.1.4.2" class="ltx_td ltx_align_center">CodeLlama</td>
<td id="A1.T12.1.1.4.3" class="ltx_td ltx_align_center">33.57</td>
<td id="A1.T12.1.1.4.4" class="ltx_td ltx_align_center">+15.71</td>
</tr>
<tr id="A1.T12.1.1.5" class="ltx_tr">
<td id="A1.T12.1.1.5.1" class="ltx_td ltx_align_left ltx_border_bb">20000</td>
<td id="A1.T12.1.1.5.2" class="ltx_td ltx_align_center ltx_border_bb">CodeLlama</td>
<td id="A1.T12.1.1.5.3" class="ltx_td ltx_align_center ltx_border_bb">34.55</td>
<td id="A1.T12.1.1.5.4" class="ltx_td ltx_align_center ltx_border_bb">+16.69</td>
</tr>
</table>
</span></div>
</figure>
</section>
</section>
<section id="A1.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.5 </span>Complexity Analysis</h3>

<div id="A1.SS5.p1" class="ltx_para">
<p id="A1.SS5.p1.1" class="ltx_p">For complexity analysis we used official BIRD classification based on the number and type of the SQL keywords used in the ground truth SQL query for each question in BIRD development set. The results are provided in the <a href="#A1.T13" title="In A.5 Complexity Analysis ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">13</span></a> for the two synthetic and human annotated baselines together with the zero-shot performance of CodeLlama 7B model. Based on the results model trained on our synthetic data has the highest performance across all of the complexity levels. Interstingly, due to the simplisity of the samples in the SQL create context dataset performance on the challenging samples is even lower than the zero-shot baseline.</p>
</div>
<figure id="A1.T13" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 13: </span><span id="A1.T13.2.1" class="ltx_text" style="font-size:90%;">Comparison of Different Datasets Across Varying SQL Query Complexities on the BIRD Development Set for CodeLlama 7B trained on each dataset. "-" denotes the zero-shot performance of the models</span></figcaption>
<div id="A1.T13.3" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:325.2pt;height:61.7pt;vertical-align:-0.7pt;"><span class="ltx_transformed_inner" style="transform:translate(-77.3pt,14.5pt) scale(0.677902720358961,0.677902720358961) ;">
<table id="A1.T13.3.1" class="ltx_tabular ltx_align_middle">
<tr id="A1.T13.3.1.1" class="ltx_tr">
<td id="A1.T13.3.1.1.1" class="ltx_td ltx_align_left ltx_border_tt">Training Dataset</td>
<td id="A1.T13.3.1.1.2" class="ltx_td ltx_align_center ltx_border_tt">Model</td>
<td id="A1.T13.3.1.1.3" class="ltx_td ltx_align_center ltx_border_tt">simple EX (%)</td>
<td id="A1.T13.3.1.1.4" class="ltx_td ltx_align_center ltx_border_tt">moderate EX (%)</td>
<td id="A1.T13.3.1.1.5" class="ltx_td ltx_align_center ltx_border_tt">challenging EX (%)</td>
</tr>
<tr id="A1.T13.3.1.2" class="ltx_tr">
<td id="A1.T13.3.1.2.1" class="ltx_td ltx_align_left ltx_border_t">Our synthetic dataset (Gemini)</td>
<td id="A1.T13.3.1.2.2" class="ltx_td ltx_align_center ltx_border_t">CodeLlama</td>
<td id="A1.T13.3.1.2.3" class="ltx_td ltx_align_center ltx_border_t"><span id="A1.T13.3.1.2.3.1" class="ltx_text ltx_font_bold">49.51</span></td>
<td id="A1.T13.3.1.2.4" class="ltx_td ltx_align_center ltx_border_t"><span id="A1.T13.3.1.2.4.1" class="ltx_text ltx_font_bold">24.08</span></td>
<td id="A1.T13.3.1.2.5" class="ltx_td ltx_align_center ltx_border_t"><span id="A1.T13.3.1.2.5.1" class="ltx_text ltx_font_bold">12.5</span></td>
</tr>
<tr id="A1.T13.3.1.3" class="ltx_tr">
<td id="A1.T13.3.1.3.1" class="ltx_td ltx_align_left">Gretel Text-to-SQL</td>
<td id="A1.T13.3.1.3.2" class="ltx_td ltx_align_center">CodeLlama</td>
<td id="A1.T13.3.1.3.3" class="ltx_td ltx_align_center">31.78</td>
<td id="A1.T13.3.1.3.4" class="ltx_td ltx_align_center">11.61</td>
<td id="A1.T13.3.1.3.5" class="ltx_td ltx_align_center">11.8</td>
</tr>
<tr id="A1.T13.3.1.4" class="ltx_tr">
<td id="A1.T13.3.1.4.1" class="ltx_td ltx_align_left">SQL Create Context</td>
<td id="A1.T13.3.1.4.2" class="ltx_td ltx_align_center">CodeLlama</td>
<td id="A1.T13.3.1.4.3" class="ltx_td ltx_align_center">25.18</td>
<td id="A1.T13.3.1.4.4" class="ltx_td ltx_align_center">9.67</td>
<td id="A1.T13.3.1.4.5" class="ltx_td ltx_align_center">2.08</td>
</tr>
<tr id="A1.T13.3.1.5" class="ltx_tr">
<td id="A1.T13.3.1.5.1" class="ltx_td ltx_align_left ltx_border_bb">-</td>
<td id="A1.T13.3.1.5.2" class="ltx_td ltx_align_center ltx_border_bb">CodeLlama</td>
<td id="A1.T13.3.1.5.3" class="ltx_td ltx_align_center ltx_border_bb">24.1</td>
<td id="A1.T13.3.1.5.4" class="ltx_td ltx_align_center ltx_border_bb">7.95</td>
<td id="A1.T13.3.1.5.5" class="ltx_td ltx_align_center ltx_border_bb">9.72</td>
</tr>
</table>
</span></div>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="A1.SS6" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.6 </span>Sample Generation Filters</h3>

<section id="A1.SS6.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.6.1 </span>execution check</h4>

<div id="A1.SS6.SSS1.p1" class="ltx_para">
<p id="A1.SS6.SSS1.p1.1" class="ltx_p">Unlike the template expansion step, SQL queries in this stage are generated from actual databases, allowing us to execute the queries over the databases. This capability enables us to utilize dialect-specific database engines to discard samples that are syntactically incorrect. This method is more robust than the parsing checks with SQLglot, as employed in <cite class="ltx_cite ltx_citemacro_citet">Gretel (<a href="#bib.bib12" title="" class="ltx_ref">2024</a>)</cite>, providing a more effective way to ensure the accuracy of our SQL queries.</p>
</div>
</section>
<section id="A1.SS6.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.6.2 </span>Question-SQL Mismatch</h4>

<div id="A1.SS6.SSS2.p1" class="ltx_para">
<p id="A1.SS6.SSS2.p1.2" class="ltx_p">During the query generation process using various LLMs such as Gemini <cite class="ltx_cite ltx_citemacro_citep">(Team et al., <a href="#bib.bib37" title="" class="ltx_ref">2023</a>)</cite>, GPT-3.5 Turbo, and Llama-3-70B <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib2" title="" class="ltx_ref">met, </a>)</cite>, we observe a recurring issue where some mismatches occurred between the conditions in the generated SQL queries and the corresponding questions. To minimize these mismatches, we develope a set of validator functions to detect inconsistencies. For each generated SQL query, we extract all conditions that correspond to database values using a SQL parser. We then calculate the maximum semantic similarity and the minimum edit distance between these conditions and all keywords in the question. SQL queries where a keyword’s minimum distance exceeds a threshold <math id="A1.SS6.SSS2.p1.1.m1.1" class="ltx_Math" alttext="\beta_{1}" display="inline"><semantics id="A1.SS6.SSS2.p1.1.m1.1a"><msub id="A1.SS6.SSS2.p1.1.m1.1.1" xref="A1.SS6.SSS2.p1.1.m1.1.1.cmml"><mi id="A1.SS6.SSS2.p1.1.m1.1.1.2" xref="A1.SS6.SSS2.p1.1.m1.1.1.2.cmml">β</mi><mn id="A1.SS6.SSS2.p1.1.m1.1.1.3" xref="A1.SS6.SSS2.p1.1.m1.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A1.SS6.SSS2.p1.1.m1.1b"><apply id="A1.SS6.SSS2.p1.1.m1.1.1.cmml" xref="A1.SS6.SSS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS6.SSS2.p1.1.m1.1.1.1.cmml" xref="A1.SS6.SSS2.p1.1.m1.1.1">subscript</csymbol><ci id="A1.SS6.SSS2.p1.1.m1.1.1.2.cmml" xref="A1.SS6.SSS2.p1.1.m1.1.1.2">𝛽</ci><cn type="integer" id="A1.SS6.SSS2.p1.1.m1.1.1.3.cmml" xref="A1.SS6.SSS2.p1.1.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS6.SSS2.p1.1.m1.1c">\beta_{1}</annotation></semantics></math> or whose maximum semantic similarity is below another threshold <math id="A1.SS6.SSS2.p1.2.m2.1" class="ltx_Math" alttext="\beta_{2}" display="inline"><semantics id="A1.SS6.SSS2.p1.2.m2.1a"><msub id="A1.SS6.SSS2.p1.2.m2.1.1" xref="A1.SS6.SSS2.p1.2.m2.1.1.cmml"><mi id="A1.SS6.SSS2.p1.2.m2.1.1.2" xref="A1.SS6.SSS2.p1.2.m2.1.1.2.cmml">β</mi><mn id="A1.SS6.SSS2.p1.2.m2.1.1.3" xref="A1.SS6.SSS2.p1.2.m2.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="A1.SS6.SSS2.p1.2.m2.1b"><apply id="A1.SS6.SSS2.p1.2.m2.1.1.cmml" xref="A1.SS6.SSS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="A1.SS6.SSS2.p1.2.m2.1.1.1.cmml" xref="A1.SS6.SSS2.p1.2.m2.1.1">subscript</csymbol><ci id="A1.SS6.SSS2.p1.2.m2.1.1.2.cmml" xref="A1.SS6.SSS2.p1.2.m2.1.1.2">𝛽</ci><cn type="integer" id="A1.SS6.SSS2.p1.2.m2.1.1.3.cmml" xref="A1.SS6.SSS2.p1.2.m2.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS6.SSS2.p1.2.m2.1c">\beta_{2}</annotation></semantics></math> are discarded. <a href="#A1.F4" title="In A.6.2 Question-SQL Mismatch ‣ A.6 Sample Generation Filters ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">4</span></a> illustrates an example of question-SQL pair which is rejected because of mismatch between questions and SQL outputs.</p>
</div>
<figure id="A1.F4" class="ltx_figure"><img src="/html/2408.12733/assets/figures/sample_filtering.png" id="A1.F4.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="299" height="138" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span><span id="A1.F4.2.1" class="ltx_text" style="font-size:90%;">An example of a filtered question-SQL pair due to question and SQL mismatch.</span></figcaption>
</figure>
</section>
<section id="A1.SS6.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.6.3 </span>Aggregation Check</h4>

<div id="A1.SS6.SSS3.p1" class="ltx_para">
<p id="A1.SS6.SSS3.p1.1" class="ltx_p">Another consistent issue with the LLMs was the inappropriate use of aggregation functions on columns that already contain aggregated values. For example, in response to the question, “What are the average ages of singers?" the LLM might generate: “SELECT AVG(average_age) FROM singer", where there is a redundant aggregation function. To address these cases, we examine the SQL queries for aggregation functions. If the column name already includes an aggregation function in its name, we discard those queries.</p>
</div>
</section>
<section id="A1.SS6.SSS4" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.6.4 </span>Deduplication And Length Check</h4>

<div id="A1.SS6.SSS4.p1" class="ltx_para">
<p id="A1.SS6.SSS4.p1.1" class="ltx_p">Similar to the approaches proposed in <cite class="ltx_cite ltx_citemacro_citet">Wei et al. (<a href="#bib.bib43" title="" class="ltx_ref">2023</a>); Wang et al. (<a href="#bib.bib41" title="" class="ltx_ref">2022</a>)</cite>, we discard duplicated SQL queries and pairs where the question length exceeds a specific threshold, <math id="A1.SS6.SSS4.p1.1.m1.1" class="ltx_Math" alttext="\alpha_{1}" display="inline"><semantics id="A1.SS6.SSS4.p1.1.m1.1a"><msub id="A1.SS6.SSS4.p1.1.m1.1.1" xref="A1.SS6.SSS4.p1.1.m1.1.1.cmml"><mi id="A1.SS6.SSS4.p1.1.m1.1.1.2" xref="A1.SS6.SSS4.p1.1.m1.1.1.2.cmml">α</mi><mn id="A1.SS6.SSS4.p1.1.m1.1.1.3" xref="A1.SS6.SSS4.p1.1.m1.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="A1.SS6.SSS4.p1.1.m1.1b"><apply id="A1.SS6.SSS4.p1.1.m1.1.1.cmml" xref="A1.SS6.SSS4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.SS6.SSS4.p1.1.m1.1.1.1.cmml" xref="A1.SS6.SSS4.p1.1.m1.1.1">subscript</csymbol><ci id="A1.SS6.SSS4.p1.1.m1.1.1.2.cmml" xref="A1.SS6.SSS4.p1.1.m1.1.1.2">𝛼</ci><cn type="integer" id="A1.SS6.SSS4.p1.1.m1.1.1.3.cmml" xref="A1.SS6.SSS4.p1.1.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS6.SSS4.p1.1.m1.1c">\alpha_{1}</annotation></semantics></math>.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
<section id="A1.SS7" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.7 </span>SQL keywords</h3>

<div id="A1.SS7.p1" class="ltx_para">
<p id="A1.SS7.p1.1" class="ltx_p">We compare our generated SQL queries with two baseline datasets in terms of the diversity of queries, focusing on the use of unique SQL keywords and the frequency of dialect-specific queries. The results are presented in <a href="#A1.F5" title="In A.7 SQL keywords ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">5</span></a>. For an equitable comparison, we sample 60K queries from each baseline. Since our Text-to-SQL dataset exclusively contains SELECT queries, we exclude samples that do not start with the SELECT keyword. According to the results, our dataset exhibits the highest diversity and the greatest number of dialect-specific queries compared to the baselines. Interestingly, the SQL create context dataset, which is intended to be a SQLite dataset, contains several queries using the STRUCT() keyword, which is supported by BigQuery, not SQLite.</p>
</div>
<figure id="A1.F5" class="ltx_figure"><img src="/html/2408.12733/assets/figures/keyword_dist.png" id="A1.F5.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="538" height="133" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span><span id="A1.F5.2.1" class="ltx_text" style="font-size:90%;">Comparison between queries generated by our method with the baselines in terms of diversity of the SQL keywords and number of dialect-specific queries in each of them.</span></figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="A1.SS8" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.8 </span>Dialect Specific Keywords</h3>

<div id="A1.SS8.p1" class="ltx_para">
<p id="A1.SS8.p1.1" class="ltx_p">This section presents some examples of dialect-specific keywords for BigQuery, PostgreSQL, and SQLite. These keywords, listed in <a href="#A1.T14" title="In A.8 Dialect Specific Keywords ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Table</span> <span class="ltx_text ltx_ref_tag">14</span></a>, are not supported interchangeably among the three dialects. These keywords are just samples of dialect specific keywords and there are many more dialect specific keywords and functions.</p>
</div>
<figure id="A1.T14" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 14: </span><span id="A1.T14.62.1" class="ltx_text" style="font-size:90%;">List of some of SQL keywords that are not supported entirely across all three dialects of BigQuery, PostgreSQL, and SQLite.</span></figcaption>
<div id="A1.T14.60" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:346.9pt;height:441.2pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(24.8pt,-31.6pt) scale(1.16718371477632,1.16718371477632) ;">
<table id="A1.T14.60.60" class="ltx_tabular ltx_align_middle">
<tr id="A1.T14.60.60.61" class="ltx_tr">
<td id="A1.T14.60.60.61.1" class="ltx_td ltx_align_left ltx_border_tt">Keyword</td>
<td id="A1.T14.60.60.61.2" class="ltx_td ltx_align_center ltx_border_tt">SQLite</td>
<td id="A1.T14.60.60.61.3" class="ltx_td ltx_align_center ltx_border_tt">PostgreSQL</td>
<td id="A1.T14.60.60.61.4" class="ltx_td ltx_align_center ltx_border_tt">BigQuery</td>
</tr>
<tr id="A1.T14.3.3.3" class="ltx_tr">
<td id="A1.T14.3.3.3.4" class="ltx_td ltx_align_left ltx_border_t"><span id="A1.T14.3.3.3.4.1" class="ltx_text ltx_font_italic">CREATE MODEL</span></td>
<td id="A1.T14.1.1.1.1" class="ltx_td ltx_align_center ltx_border_t"><math id="A1.T14.1.1.1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.1.1.1.1.m1.1a"><mo id="A1.T14.1.1.1.1.m1.1.1" xref="A1.T14.1.1.1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.1.1.1.1.m1.1b"><times id="A1.T14.1.1.1.1.m1.1.1.cmml" xref="A1.T14.1.1.1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.1.1.1.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.2.2.2.2" class="ltx_td ltx_align_center ltx_border_t"><math id="A1.T14.2.2.2.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.2.2.2.2.m1.1a"><mo id="A1.T14.2.2.2.2.m1.1.1" xref="A1.T14.2.2.2.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.2.2.2.2.m1.1b"><times id="A1.T14.2.2.2.2.m1.1.1.cmml" xref="A1.T14.2.2.2.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.2.2.2.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.3.3.3.3" class="ltx_td ltx_align_center ltx_border_t"><math id="A1.T14.3.3.3.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.3.3.3.3.m1.1a"><mi mathvariant="normal" id="A1.T14.3.3.3.3.m1.1.1" xref="A1.T14.3.3.3.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.3.3.3.3.m1.1b"><ci id="A1.T14.3.3.3.3.m1.1.1.cmml" xref="A1.T14.3.3.3.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.3.3.3.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.6.6.6" class="ltx_tr">
<td id="A1.T14.6.6.6.4" class="ltx_td ltx_align_left"><span id="A1.T14.6.6.6.4.1" class="ltx_text ltx_font_italic">ML.TRANSLATE</span></td>
<td id="A1.T14.4.4.4.1" class="ltx_td ltx_align_center"><math id="A1.T14.4.4.4.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.4.4.4.1.m1.1a"><mo id="A1.T14.4.4.4.1.m1.1.1" xref="A1.T14.4.4.4.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.4.4.4.1.m1.1b"><times id="A1.T14.4.4.4.1.m1.1.1.cmml" xref="A1.T14.4.4.4.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.4.4.4.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.5.5.5.2" class="ltx_td ltx_align_center"><math id="A1.T14.5.5.5.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.5.5.5.2.m1.1a"><mo id="A1.T14.5.5.5.2.m1.1.1" xref="A1.T14.5.5.5.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.5.5.5.2.m1.1b"><times id="A1.T14.5.5.5.2.m1.1.1.cmml" xref="A1.T14.5.5.5.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.5.5.5.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.6.6.6.3" class="ltx_td ltx_align_center"><math id="A1.T14.6.6.6.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.6.6.6.3.m1.1a"><mi mathvariant="normal" id="A1.T14.6.6.6.3.m1.1.1" xref="A1.T14.6.6.6.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.6.6.6.3.m1.1b"><ci id="A1.T14.6.6.6.3.m1.1.1.cmml" xref="A1.T14.6.6.6.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.6.6.6.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.9.9.9" class="ltx_tr">
<td id="A1.T14.9.9.9.4" class="ltx_td ltx_align_left"><span id="A1.T14.9.9.9.4.1" class="ltx_text ltx_font_italic">ML.GENERATE_TEXT</span></td>
<td id="A1.T14.7.7.7.1" class="ltx_td ltx_align_center"><math id="A1.T14.7.7.7.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.7.7.7.1.m1.1a"><mo id="A1.T14.7.7.7.1.m1.1.1" xref="A1.T14.7.7.7.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.7.7.7.1.m1.1b"><times id="A1.T14.7.7.7.1.m1.1.1.cmml" xref="A1.T14.7.7.7.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.7.7.7.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.8.8.8.2" class="ltx_td ltx_align_center"><math id="A1.T14.8.8.8.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.8.8.8.2.m1.1a"><mo id="A1.T14.8.8.8.2.m1.1.1" xref="A1.T14.8.8.8.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.8.8.8.2.m1.1b"><times id="A1.T14.8.8.8.2.m1.1.1.cmml" xref="A1.T14.8.8.8.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.8.8.8.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.9.9.9.3" class="ltx_td ltx_align_center"><math id="A1.T14.9.9.9.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.9.9.9.3.m1.1a"><mi mathvariant="normal" id="A1.T14.9.9.9.3.m1.1.1" xref="A1.T14.9.9.9.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.9.9.9.3.m1.1b"><ci id="A1.T14.9.9.9.3.m1.1.1.cmml" xref="A1.T14.9.9.9.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.9.9.9.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.12.12.12" class="ltx_tr">
<td id="A1.T14.12.12.12.4" class="ltx_td ltx_align_left"><span id="A1.T14.12.12.12.4.1" class="ltx_text ltx_font_italic">ML.ANNOTATE_IMAGE</span></td>
<td id="A1.T14.10.10.10.1" class="ltx_td ltx_align_center"><math id="A1.T14.10.10.10.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.10.10.10.1.m1.1a"><mo id="A1.T14.10.10.10.1.m1.1.1" xref="A1.T14.10.10.10.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.10.10.10.1.m1.1b"><times id="A1.T14.10.10.10.1.m1.1.1.cmml" xref="A1.T14.10.10.10.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.10.10.10.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.11.11.11.2" class="ltx_td ltx_align_center"><math id="A1.T14.11.11.11.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.11.11.11.2.m1.1a"><mo id="A1.T14.11.11.11.2.m1.1.1" xref="A1.T14.11.11.11.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.11.11.11.2.m1.1b"><times id="A1.T14.11.11.11.2.m1.1.1.cmml" xref="A1.T14.11.11.11.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.11.11.11.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.12.12.12.3" class="ltx_td ltx_align_center"><math id="A1.T14.12.12.12.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.12.12.12.3.m1.1a"><mi mathvariant="normal" id="A1.T14.12.12.12.3.m1.1.1" xref="A1.T14.12.12.12.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.12.12.12.3.m1.1b"><ci id="A1.T14.12.12.12.3.m1.1.1.cmml" xref="A1.T14.12.12.12.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.12.12.12.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.15.15.15" class="ltx_tr">
<td id="A1.T14.15.15.15.4" class="ltx_td ltx_align_left"><span id="A1.T14.15.15.15.4.1" class="ltx_text ltx_font_italic">SAFE</span></td>
<td id="A1.T14.13.13.13.1" class="ltx_td ltx_align_center"><math id="A1.T14.13.13.13.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.13.13.13.1.m1.1a"><mo id="A1.T14.13.13.13.1.m1.1.1" xref="A1.T14.13.13.13.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.13.13.13.1.m1.1b"><times id="A1.T14.13.13.13.1.m1.1.1.cmml" xref="A1.T14.13.13.13.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.13.13.13.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.14.14.14.2" class="ltx_td ltx_align_center"><math id="A1.T14.14.14.14.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.14.14.14.2.m1.1a"><mo id="A1.T14.14.14.14.2.m1.1.1" xref="A1.T14.14.14.14.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.14.14.14.2.m1.1b"><times id="A1.T14.14.14.14.2.m1.1.1.cmml" xref="A1.T14.14.14.14.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.14.14.14.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.15.15.15.3" class="ltx_td ltx_align_center"><math id="A1.T14.15.15.15.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.15.15.15.3.m1.1a"><mi mathvariant="normal" id="A1.T14.15.15.15.3.m1.1.1" xref="A1.T14.15.15.15.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.15.15.15.3.m1.1b"><ci id="A1.T14.15.15.15.3.m1.1.1.cmml" xref="A1.T14.15.15.15.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.15.15.15.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.18.18.18" class="ltx_tr">
<td id="A1.T14.18.18.18.4" class="ltx_td ltx_align_left"><span id="A1.T14.18.18.18.4.1" class="ltx_text ltx_font_italic">QUALIFY</span></td>
<td id="A1.T14.16.16.16.1" class="ltx_td ltx_align_center"><math id="A1.T14.16.16.16.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.16.16.16.1.m1.1a"><mo id="A1.T14.16.16.16.1.m1.1.1" xref="A1.T14.16.16.16.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.16.16.16.1.m1.1b"><times id="A1.T14.16.16.16.1.m1.1.1.cmml" xref="A1.T14.16.16.16.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.16.16.16.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.17.17.17.2" class="ltx_td ltx_align_center"><math id="A1.T14.17.17.17.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.17.17.17.2.m1.1a"><mo id="A1.T14.17.17.17.2.m1.1.1" xref="A1.T14.17.17.17.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.17.17.17.2.m1.1b"><times id="A1.T14.17.17.17.2.m1.1.1.cmml" xref="A1.T14.17.17.17.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.17.17.17.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.18.18.18.3" class="ltx_td ltx_align_center"><math id="A1.T14.18.18.18.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.18.18.18.3.m1.1a"><mi mathvariant="normal" id="A1.T14.18.18.18.3.m1.1.1" xref="A1.T14.18.18.18.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.18.18.18.3.m1.1b"><ci id="A1.T14.18.18.18.3.m1.1.1.cmml" xref="A1.T14.18.18.18.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.18.18.18.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.21.21.21" class="ltx_tr">
<td id="A1.T14.21.21.21.4" class="ltx_td ltx_align_left"><span id="A1.T14.21.21.21.4.1" class="ltx_text ltx_font_italic">WITH OFFSET</span></td>
<td id="A1.T14.19.19.19.1" class="ltx_td ltx_align_center"><math id="A1.T14.19.19.19.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.19.19.19.1.m1.1a"><mo id="A1.T14.19.19.19.1.m1.1.1" xref="A1.T14.19.19.19.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.19.19.19.1.m1.1b"><times id="A1.T14.19.19.19.1.m1.1.1.cmml" xref="A1.T14.19.19.19.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.19.19.19.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.20.20.20.2" class="ltx_td ltx_align_center"><math id="A1.T14.20.20.20.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.20.20.20.2.m1.1a"><mo id="A1.T14.20.20.20.2.m1.1.1" xref="A1.T14.20.20.20.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.20.20.20.2.m1.1b"><times id="A1.T14.20.20.20.2.m1.1.1.cmml" xref="A1.T14.20.20.20.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.20.20.20.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.21.21.21.3" class="ltx_td ltx_align_center"><math id="A1.T14.21.21.21.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.21.21.21.3.m1.1a"><mi mathvariant="normal" id="A1.T14.21.21.21.3.m1.1.1" xref="A1.T14.21.21.21.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.21.21.21.3.m1.1b"><ci id="A1.T14.21.21.21.3.m1.1.1.cmml" xref="A1.T14.21.21.21.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.21.21.21.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.24.24.24" class="ltx_tr">
<td id="A1.T14.24.24.24.4" class="ltx_td ltx_align_left"><span id="A1.T14.24.24.24.4.1" class="ltx_text ltx_font_italic">ARRAY_AGG</span></td>
<td id="A1.T14.22.22.22.1" class="ltx_td ltx_align_center"><math id="A1.T14.22.22.22.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.22.22.22.1.m1.1a"><mo id="A1.T14.22.22.22.1.m1.1.1" xref="A1.T14.22.22.22.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.22.22.22.1.m1.1b"><times id="A1.T14.22.22.22.1.m1.1.1.cmml" xref="A1.T14.22.22.22.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.22.22.22.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.23.23.23.2" class="ltx_td ltx_align_center"><math id="A1.T14.23.23.23.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.23.23.23.2.m1.1a"><mi mathvariant="normal" id="A1.T14.23.23.23.2.m1.1.1" xref="A1.T14.23.23.23.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.23.23.23.2.m1.1b"><ci id="A1.T14.23.23.23.2.m1.1.1.cmml" xref="A1.T14.23.23.23.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.23.23.23.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.24.24.24.3" class="ltx_td ltx_align_center"><math id="A1.T14.24.24.24.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.24.24.24.3.m1.1a"><mi mathvariant="normal" id="A1.T14.24.24.24.3.m1.1.1" xref="A1.T14.24.24.24.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.24.24.24.3.m1.1b"><ci id="A1.T14.24.24.24.3.m1.1.1.cmml" xref="A1.T14.24.24.24.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.24.24.24.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.27.27.27" class="ltx_tr">
<td id="A1.T14.27.27.27.4" class="ltx_td ltx_align_left"><span id="A1.T14.27.27.27.4.1" class="ltx_text ltx_font_italic">STRUCT</span></td>
<td id="A1.T14.25.25.25.1" class="ltx_td ltx_align_center"><math id="A1.T14.25.25.25.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.25.25.25.1.m1.1a"><mo id="A1.T14.25.25.25.1.m1.1.1" xref="A1.T14.25.25.25.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.25.25.25.1.m1.1b"><times id="A1.T14.25.25.25.1.m1.1.1.cmml" xref="A1.T14.25.25.25.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.25.25.25.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.26.26.26.2" class="ltx_td ltx_align_center"><math id="A1.T14.26.26.26.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.26.26.26.2.m1.1a"><mo id="A1.T14.26.26.26.2.m1.1.1" xref="A1.T14.26.26.26.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.26.26.26.2.m1.1b"><times id="A1.T14.26.26.26.2.m1.1.1.cmml" xref="A1.T14.26.26.26.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.26.26.26.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.27.27.27.3" class="ltx_td ltx_align_center"><math id="A1.T14.27.27.27.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.27.27.27.3.m1.1a"><mi mathvariant="normal" id="A1.T14.27.27.27.3.m1.1.1" xref="A1.T14.27.27.27.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.27.27.27.3.m1.1b"><ci id="A1.T14.27.27.27.3.m1.1.1.cmml" xref="A1.T14.27.27.27.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.27.27.27.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.30.30.30" class="ltx_tr">
<td id="A1.T14.30.30.30.4" class="ltx_td ltx_align_left"><span id="A1.T14.30.30.30.4.1" class="ltx_text ltx_font_italic">ILIKE</span></td>
<td id="A1.T14.28.28.28.1" class="ltx_td ltx_align_center"><math id="A1.T14.28.28.28.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.28.28.28.1.m1.1a"><mo id="A1.T14.28.28.28.1.m1.1.1" xref="A1.T14.28.28.28.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.28.28.28.1.m1.1b"><times id="A1.T14.28.28.28.1.m1.1.1.cmml" xref="A1.T14.28.28.28.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.28.28.28.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.29.29.29.2" class="ltx_td ltx_align_center"><math id="A1.T14.29.29.29.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.29.29.29.2.m1.1a"><mi mathvariant="normal" id="A1.T14.29.29.29.2.m1.1.1" xref="A1.T14.29.29.29.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.29.29.29.2.m1.1b"><ci id="A1.T14.29.29.29.2.m1.1.1.cmml" xref="A1.T14.29.29.29.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.29.29.29.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.30.30.30.3" class="ltx_td ltx_align_center"><math id="A1.T14.30.30.30.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.30.30.30.3.m1.1a"><mo id="A1.T14.30.30.30.3.m1.1.1" xref="A1.T14.30.30.30.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.30.30.30.3.m1.1b"><times id="A1.T14.30.30.30.3.m1.1.1.cmml" xref="A1.T14.30.30.30.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.30.30.30.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.33.33.33" class="ltx_tr">
<td id="A1.T14.33.33.33.4" class="ltx_td ltx_align_left"><span id="A1.T14.33.33.33.4.1" class="ltx_text ltx_font_italic">LATERAL</span></td>
<td id="A1.T14.31.31.31.1" class="ltx_td ltx_align_center"><math id="A1.T14.31.31.31.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.31.31.31.1.m1.1a"><mo id="A1.T14.31.31.31.1.m1.1.1" xref="A1.T14.31.31.31.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.31.31.31.1.m1.1b"><times id="A1.T14.31.31.31.1.m1.1.1.cmml" xref="A1.T14.31.31.31.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.31.31.31.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.32.32.32.2" class="ltx_td ltx_align_center"><math id="A1.T14.32.32.32.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.32.32.32.2.m1.1a"><mi mathvariant="normal" id="A1.T14.32.32.32.2.m1.1.1" xref="A1.T14.32.32.32.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.32.32.32.2.m1.1b"><ci id="A1.T14.32.32.32.2.m1.1.1.cmml" xref="A1.T14.32.32.32.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.32.32.32.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.33.33.33.3" class="ltx_td ltx_align_center"><math id="A1.T14.33.33.33.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.33.33.33.3.m1.1a"><mo id="A1.T14.33.33.33.3.m1.1.1" xref="A1.T14.33.33.33.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.33.33.33.3.m1.1b"><times id="A1.T14.33.33.33.3.m1.1.1.cmml" xref="A1.T14.33.33.33.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.33.33.33.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.36.36.36" class="ltx_tr">
<td id="A1.T14.36.36.36.4" class="ltx_td ltx_align_left"><span id="A1.T14.36.36.36.4.1" class="ltx_text ltx_font_italic">SERIAL</span></td>
<td id="A1.T14.34.34.34.1" class="ltx_td ltx_align_center"><math id="A1.T14.34.34.34.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.34.34.34.1.m1.1a"><mo id="A1.T14.34.34.34.1.m1.1.1" xref="A1.T14.34.34.34.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.34.34.34.1.m1.1b"><times id="A1.T14.34.34.34.1.m1.1.1.cmml" xref="A1.T14.34.34.34.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.34.34.34.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.35.35.35.2" class="ltx_td ltx_align_center"><math id="A1.T14.35.35.35.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.35.35.35.2.m1.1a"><mi mathvariant="normal" id="A1.T14.35.35.35.2.m1.1.1" xref="A1.T14.35.35.35.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.35.35.35.2.m1.1b"><ci id="A1.T14.35.35.35.2.m1.1.1.cmml" xref="A1.T14.35.35.35.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.35.35.35.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.36.36.36.3" class="ltx_td ltx_align_center"><math id="A1.T14.36.36.36.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.36.36.36.3.m1.1a"><mo id="A1.T14.36.36.36.3.m1.1.1" xref="A1.T14.36.36.36.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.36.36.36.3.m1.1b"><times id="A1.T14.36.36.36.3.m1.1.1.cmml" xref="A1.T14.36.36.36.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.36.36.36.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.39.39.39" class="ltx_tr">
<td id="A1.T14.39.39.39.4" class="ltx_td ltx_align_left"><span id="A1.T14.39.39.39.4.1" class="ltx_text ltx_font_italic">CTID</span></td>
<td id="A1.T14.37.37.37.1" class="ltx_td ltx_align_center"><math id="A1.T14.37.37.37.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.37.37.37.1.m1.1a"><mo id="A1.T14.37.37.37.1.m1.1.1" xref="A1.T14.37.37.37.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.37.37.37.1.m1.1b"><times id="A1.T14.37.37.37.1.m1.1.1.cmml" xref="A1.T14.37.37.37.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.37.37.37.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.38.38.38.2" class="ltx_td ltx_align_center"><math id="A1.T14.38.38.38.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.38.38.38.2.m1.1a"><mi mathvariant="normal" id="A1.T14.38.38.38.2.m1.1.1" xref="A1.T14.38.38.38.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.38.38.38.2.m1.1b"><ci id="A1.T14.38.38.38.2.m1.1.1.cmml" xref="A1.T14.38.38.38.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.38.38.38.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.39.39.39.3" class="ltx_td ltx_align_center"><math id="A1.T14.39.39.39.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.39.39.39.3.m1.1a"><mo id="A1.T14.39.39.39.3.m1.1.1" xref="A1.T14.39.39.39.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.39.39.39.3.m1.1b"><times id="A1.T14.39.39.39.3.m1.1.1.cmml" xref="A1.T14.39.39.39.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.39.39.39.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.42.42.42" class="ltx_tr">
<td id="A1.T14.42.42.42.4" class="ltx_td ltx_align_left"><span id="A1.T14.42.42.42.4.1" class="ltx_text ltx_font_italic">PRAGMA</span></td>
<td id="A1.T14.40.40.40.1" class="ltx_td ltx_align_center"><math id="A1.T14.40.40.40.1.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.40.40.40.1.m1.1a"><mi mathvariant="normal" id="A1.T14.40.40.40.1.m1.1.1" xref="A1.T14.40.40.40.1.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.40.40.40.1.m1.1b"><ci id="A1.T14.40.40.40.1.m1.1.1.cmml" xref="A1.T14.40.40.40.1.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.40.40.40.1.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.41.41.41.2" class="ltx_td ltx_align_center"><math id="A1.T14.41.41.41.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.41.41.41.2.m1.1a"><mo id="A1.T14.41.41.41.2.m1.1.1" xref="A1.T14.41.41.41.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.41.41.41.2.m1.1b"><times id="A1.T14.41.41.41.2.m1.1.1.cmml" xref="A1.T14.41.41.41.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.41.41.41.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.42.42.42.3" class="ltx_td ltx_align_center"><math id="A1.T14.42.42.42.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.42.42.42.3.m1.1a"><mo id="A1.T14.42.42.42.3.m1.1.1" xref="A1.T14.42.42.42.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.42.42.42.3.m1.1b"><times id="A1.T14.42.42.42.3.m1.1.1.cmml" xref="A1.T14.42.42.42.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.42.42.42.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.45.45.45" class="ltx_tr">
<td id="A1.T14.45.45.45.4" class="ltx_td ltx_align_left"><span id="A1.T14.45.45.45.4.1" class="ltx_text ltx_font_italic">REGEXP_CONTAINS</span></td>
<td id="A1.T14.43.43.43.1" class="ltx_td ltx_align_center"><math id="A1.T14.43.43.43.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.43.43.43.1.m1.1a"><mo id="A1.T14.43.43.43.1.m1.1.1" xref="A1.T14.43.43.43.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.43.43.43.1.m1.1b"><times id="A1.T14.43.43.43.1.m1.1.1.cmml" xref="A1.T14.43.43.43.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.43.43.43.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.44.44.44.2" class="ltx_td ltx_align_center"><math id="A1.T14.44.44.44.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.44.44.44.2.m1.1a"><mo id="A1.T14.44.44.44.2.m1.1.1" xref="A1.T14.44.44.44.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.44.44.44.2.m1.1b"><times id="A1.T14.44.44.44.2.m1.1.1.cmml" xref="A1.T14.44.44.44.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.44.44.44.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.45.45.45.3" class="ltx_td ltx_align_center"><math id="A1.T14.45.45.45.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.45.45.45.3.m1.1a"><mi mathvariant="normal" id="A1.T14.45.45.45.3.m1.1.1" xref="A1.T14.45.45.45.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.45.45.45.3.m1.1b"><ci id="A1.T14.45.45.45.3.m1.1.1.cmml" xref="A1.T14.45.45.45.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.45.45.45.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.48.48.48" class="ltx_tr">
<td id="A1.T14.48.48.48.4" class="ltx_td ltx_align_left"><span id="A1.T14.48.48.48.4.1" class="ltx_text ltx_font_italic">REGEXP_MATCHES</span></td>
<td id="A1.T14.46.46.46.1" class="ltx_td ltx_align_center"><math id="A1.T14.46.46.46.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.46.46.46.1.m1.1a"><mo id="A1.T14.46.46.46.1.m1.1.1" xref="A1.T14.46.46.46.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.46.46.46.1.m1.1b"><times id="A1.T14.46.46.46.1.m1.1.1.cmml" xref="A1.T14.46.46.46.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.46.46.46.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.47.47.47.2" class="ltx_td ltx_align_center"><math id="A1.T14.47.47.47.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.47.47.47.2.m1.1a"><mi mathvariant="normal" id="A1.T14.47.47.47.2.m1.1.1" xref="A1.T14.47.47.47.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.47.47.47.2.m1.1b"><ci id="A1.T14.47.47.47.2.m1.1.1.cmml" xref="A1.T14.47.47.47.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.47.47.47.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.48.48.48.3" class="ltx_td ltx_align_center"><math id="A1.T14.48.48.48.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.48.48.48.3.m1.1a"><mo id="A1.T14.48.48.48.3.m1.1.1" xref="A1.T14.48.48.48.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.48.48.48.3.m1.1b"><times id="A1.T14.48.48.48.3.m1.1.1.cmml" xref="A1.T14.48.48.48.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.48.48.48.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.51.51.51" class="ltx_tr">
<td id="A1.T14.51.51.51.4" class="ltx_td ltx_align_left"><span id="A1.T14.51.51.51.4.1" class="ltx_text ltx_font_italic">GLOB</span></td>
<td id="A1.T14.49.49.49.1" class="ltx_td ltx_align_center"><math id="A1.T14.49.49.49.1.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.49.49.49.1.m1.1a"><mi mathvariant="normal" id="A1.T14.49.49.49.1.m1.1.1" xref="A1.T14.49.49.49.1.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.49.49.49.1.m1.1b"><ci id="A1.T14.49.49.49.1.m1.1.1.cmml" xref="A1.T14.49.49.49.1.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.49.49.49.1.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.50.50.50.2" class="ltx_td ltx_align_center"><math id="A1.T14.50.50.50.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.50.50.50.2.m1.1a"><mo id="A1.T14.50.50.50.2.m1.1.1" xref="A1.T14.50.50.50.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.50.50.50.2.m1.1b"><times id="A1.T14.50.50.50.2.m1.1.1.cmml" xref="A1.T14.50.50.50.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.50.50.50.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.51.51.51.3" class="ltx_td ltx_align_center"><math id="A1.T14.51.51.51.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.51.51.51.3.m1.1a"><mo id="A1.T14.51.51.51.3.m1.1.1" xref="A1.T14.51.51.51.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.51.51.51.3.m1.1b"><times id="A1.T14.51.51.51.3.m1.1.1.cmml" xref="A1.T14.51.51.51.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.51.51.51.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.54.54.54" class="ltx_tr">
<td id="A1.T14.54.54.54.4" class="ltx_td ltx_align_left"><span id="A1.T14.54.54.54.4.1" class="ltx_text ltx_font_italic">JULIANDAY</span></td>
<td id="A1.T14.52.52.52.1" class="ltx_td ltx_align_center"><math id="A1.T14.52.52.52.1.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.52.52.52.1.m1.1a"><mi mathvariant="normal" id="A1.T14.52.52.52.1.m1.1.1" xref="A1.T14.52.52.52.1.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.52.52.52.1.m1.1b"><ci id="A1.T14.52.52.52.1.m1.1.1.cmml" xref="A1.T14.52.52.52.1.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.52.52.52.1.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.53.53.53.2" class="ltx_td ltx_align_center"><math id="A1.T14.53.53.53.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.53.53.53.2.m1.1a"><mo id="A1.T14.53.53.53.2.m1.1.1" xref="A1.T14.53.53.53.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.53.53.53.2.m1.1b"><times id="A1.T14.53.53.53.2.m1.1.1.cmml" xref="A1.T14.53.53.53.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.53.53.53.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.54.54.54.3" class="ltx_td ltx_align_center"><math id="A1.T14.54.54.54.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.54.54.54.3.m1.1a"><mo id="A1.T14.54.54.54.3.m1.1.1" xref="A1.T14.54.54.54.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.54.54.54.3.m1.1b"><times id="A1.T14.54.54.54.3.m1.1.1.cmml" xref="A1.T14.54.54.54.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.54.54.54.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.57.57.57" class="ltx_tr">
<td id="A1.T14.57.57.57.4" class="ltx_td ltx_align_left"><span id="A1.T14.57.57.57.4.1" class="ltx_text ltx_font_italic">DATE_TRUNC</span></td>
<td id="A1.T14.55.55.55.1" class="ltx_td ltx_align_center"><math id="A1.T14.55.55.55.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.55.55.55.1.m1.1a"><mo id="A1.T14.55.55.55.1.m1.1.1" xref="A1.T14.55.55.55.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.55.55.55.1.m1.1b"><times id="A1.T14.55.55.55.1.m1.1.1.cmml" xref="A1.T14.55.55.55.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.55.55.55.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.56.56.56.2" class="ltx_td ltx_align_center"><math id="A1.T14.56.56.56.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.56.56.56.2.m1.1a"><mi mathvariant="normal" id="A1.T14.56.56.56.2.m1.1.1" xref="A1.T14.56.56.56.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.56.56.56.2.m1.1b"><ci id="A1.T14.56.56.56.2.m1.1.1.cmml" xref="A1.T14.56.56.56.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.56.56.56.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="A1.T14.57.57.57.3" class="ltx_td ltx_align_center"><math id="A1.T14.57.57.57.3.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.57.57.57.3.m1.1a"><mo id="A1.T14.57.57.57.3.m1.1.1" xref="A1.T14.57.57.57.3.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.57.57.57.3.m1.1b"><times id="A1.T14.57.57.57.3.m1.1.1.cmml" xref="A1.T14.57.57.57.3.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.57.57.57.3.m1.1c">\times</annotation></semantics></math></td>
</tr>
<tr id="A1.T14.60.60.60" class="ltx_tr">
<td id="A1.T14.60.60.60.4" class="ltx_td ltx_align_left ltx_border_bb"><span id="A1.T14.60.60.60.4.1" class="ltx_text ltx_font_italic">TIMESTAMP_TRUNC</span></td>
<td id="A1.T14.58.58.58.1" class="ltx_td ltx_align_center ltx_border_bb"><math id="A1.T14.58.58.58.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.58.58.58.1.m1.1a"><mo id="A1.T14.58.58.58.1.m1.1.1" xref="A1.T14.58.58.58.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.58.58.58.1.m1.1b"><times id="A1.T14.58.58.58.1.m1.1.1.cmml" xref="A1.T14.58.58.58.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.58.58.58.1.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.59.59.59.2" class="ltx_td ltx_align_center ltx_border_bb"><math id="A1.T14.59.59.59.2.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="A1.T14.59.59.59.2.m1.1a"><mo id="A1.T14.59.59.59.2.m1.1.1" xref="A1.T14.59.59.59.2.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A1.T14.59.59.59.2.m1.1b"><times id="A1.T14.59.59.59.2.m1.1.1.cmml" xref="A1.T14.59.59.59.2.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.59.59.59.2.m1.1c">\times</annotation></semantics></math></td>
<td id="A1.T14.60.60.60.3" class="ltx_td ltx_align_center ltx_border_bb"><math id="A1.T14.60.60.60.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="A1.T14.60.60.60.3.m1.1a"><mi mathvariant="normal" id="A1.T14.60.60.60.3.m1.1.1" xref="A1.T14.60.60.60.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="A1.T14.60.60.60.3.m1.1b"><ci id="A1.T14.60.60.60.3.m1.1.1.cmml" xref="A1.T14.60.60.60.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T14.60.60.60.3.m1.1c">\checkmark</annotation></semantics></math></td>
</tr>
</table>
</span></div>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="A1.SS9" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.9 </span>MoE Analysis</h3>

<div id="A1.SS9.p1" class="ltx_para">
<p id="A1.SS9.p1.1" class="ltx_p">In this section, we analyze the hidden representations of our proposed MoE model and compare it with the baseline generalist MoE model across three distinct layers: Layer 1, Layer 16, and Layer 32. Although both MoE models are trained with a load balancing loss, our initialization approach for the gates leads to an expert collapse in the middle layers. This issue primarily stems from the high similarity in the hidden representations of the positive prompts for each dialect expert across all layers. Additionally, similar to the experiments conducted with the original Mixtral model <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a href="#bib.bib19" title="" class="ltx_ref">2024</a>)</cite>, there is no distinct expert associated with different token types in either our MoE model or the baseline generalist MoE model.</p>
</div>
<figure id="A1.F6" class="ltx_figure"><img src="/html/2408.12733/assets/figures/MoE-baseline.jpg" id="A1.F6.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="419" height="271" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span><span id="A1.F6.2.1" class="ltx_text" style="font-size:90%;">Token routing for the MoE model, initialized from CodeLlama and trained on a 40K samples dataset. The top figure illustrates Layer 1, the middle figure shows Layer 16, and the bottom figure corresponds to Layer 32.</span></figcaption>
</figure>
<figure id="A1.F7" class="ltx_figure"><img src="/html/2408.12733/assets/figures/Our-MoE.jpg" id="A1.F7.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="419" height="273" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span><span id="A1.F7.2.1" class="ltx_text" style="font-size:90%;">Token routing for our proposed method for initializing the MoE model, and trained on a 20K samples dataset. The top figure illustrates Layer 1, the middle figure shows Layer 16, and the bottom figure corresponds to Layer 32.</span></figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="A1.SS10" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.10 </span>Prompt Templates</h3>

<div id="A1.SS10.p1" class="ltx_para">
<p id="A1.SS10.p1.1" class="ltx_p">This section provides the detailed prompts used in this work for each of the step in our work.</p>
</div>
<section id="A1.SS10.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.10.1 </span>Template Expansion</h4>

<div id="A1.SS10.SSS1.p1" class="ltx_para">
<p id="A1.SS10.SSS1.p1.1" class="ltx_p">This section provides the prompt for template expansion step, <a href="#A1.F8" title="In A.10.1 Template Expansion ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">8</span></a>, where a seed template together with a sampled dialect-specific tutorial is passed to the LLM and asked to generate a new dialect-specific template. Additionally <a href="#A1.F9" title="In A.10.1 Template Expansion ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">9</span></a> provides an example of template expansion for BigQuery dialect.</p>
</div>
<figure id="A1.F8" class="ltx_figure"><svg id="A1.F8.pic1" class="ltx_picture ltx_centering" height="550.41" overflow="visible" version="1.1" width="616.3"><g transform="translate(0,550.41) matrix(1 0 0 -1 0 0) translate(308.15,0) translate(0,275.2)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#ADD8E6"><path d="M -307.87 -274.93 h 615.75 v 549.86 h -615.75 Z"></path></g><g transform="matrix(1.0 0.0 0.0 1.0 -300 -3.46)" fill="#000000" stroke="#000000"><foreignObject width="600" height="532.72" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A1.F8.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:433.6pt;">
<span id="A1.F8.pic1.1.1.1.1.1.1" class="ltx_p"><span id="A1.F8.pic1.1.1.1.1.1.1.1" class="ltx_text ltx_font_typewriter">You are an agent expert in data science and SQL. 
<br class="ltx_break">
<br class="ltx_break">Your are tasked with increasing the complexity of a given SQL query template by inspiring from a sample tutorial document for {DIALECT} SQL. 
<br class="ltx_break">
<br class="ltx_break">A query template is defined as a SQL query with placeholders for columns, tables, and literals. For each template, you will be provided with:
<br class="ltx_break">1. SQL keywords and functions.
<br class="ltx_break">2. column or alias.column which is a placeholder for a column name.
<br class="ltx_break">3. table which is a placeholder for a table name.
<br class="ltx_break">4. literal which is a placeholder for a literal value that can be a string, number, or date.
<br class="ltx_break">
<br class="ltx_break">Next you will be provided with a tutorial doc for {DIALECT} SQL and a SQL query template. You have to increase the complexity of the query template by adding more SQL keywords and functions inspired from the tutorial doc.
<br class="ltx_break">
<br class="ltx_break">Tutorial:
<br class="ltx_break">{TUTORIAL}
<br class="ltx_break">
<br class="ltx_break">Query template:
<br class="ltx_break">{QUERY_TEMPLATE}
<br class="ltx_break">
<br class="ltx_break">Your response should be a valid {DIALECT} SQL template with column, table, and literal placeholders. Do not fill the placeholders.
<br class="ltx_break">
<br class="ltx_break">Your response should be only a valid JSON object as follows without any additional text:
<br class="ltx_break">{{
<br class="ltx_break">reasoning: Your step by step reasoning for increasing the complexity of the query template by using the tutorial doc.,
<br class="ltx_break">query_template: A valid SQL query template with placeholders
<br class="ltx_break">}}
<br class="ltx_break">
<br class="ltx_break"></span></span>
</span></foreignObject></g></g></svg>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8: </span>Prompt used for the template expansion step (PTempGen)</figcaption>
</figure>
<figure id="A1.F9" class="ltx_figure"><img src="/html/2408.12733/assets/figures/template_expansion.png" id="A1.F9.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="479" height="238" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 9: </span><span id="A1.F9.2.1" class="ltx_text" style="font-size:90%;">An example of template expansion using BigQuery tutorials and seed templates.</span></figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="A1.SS10.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.10.2 </span>Sample Generation</h4>

<div id="A1.SS10.SSS2.p1" class="ltx_para">
<p id="A1.SS10.SSS2.p1.1" class="ltx_p">In this section, we provide the prompt for the sample generation step, <a href="#A1.F10" title="In A.10.2 Sample Generation ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">10</span></a>, where a dialect-specific template together with a database schema are passed to the LLM and asked to generate question/SQL pair. Additionally <a href="#A1.F11" title="In A.10.2 Sample Generation ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">11</span></a> provides an example of sample generation step.</p>
</div>
<figure id="A1.F10" class="ltx_figure"><svg id="A1.F10.pic1" class="ltx_picture ltx_centering" height="647.27" overflow="visible" version="1.1" width="616.3"><g transform="translate(0,647.27) matrix(1 0 0 -1 0 0) translate(308.15,0) translate(0,323.63)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#ADD8E6"><path d="M -307.87 -323.36 h 615.75 v 646.72 h -615.75 Z"></path></g><g transform="matrix(1.0 0.0 0.0 1.0 -300 -3.46)" fill="#000000" stroke="#000000"><foreignObject width="600" height="629.58" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A1.F10.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:433.6pt;">
<span id="A1.F10.pic1.1.1.1.1.1.1" class="ltx_p"><span id="A1.F10.pic1.1.1.1.1.1.1.1" class="ltx_text ltx_font_typewriter">You are an agent expert in data science and SQL.
<br class="ltx_break">
<br class="ltx_break">You are provided with a database schema together with a {DIALECT} SQL template with placeholders.
<br class="ltx_break">Your job is to create synthetic data for training a Text-to-SQL model.
<br class="ltx_break">Having the database schema and the SQL template, you should get inspired by the SQL template to generate a business question that a user might ask from the given database.
<br class="ltx_break">
<br class="ltx_break">Always make sure that the SQL query is in the correct syntax and it extracts meaningful and logical information for analysis.
<br class="ltx_break">The final SQL query should be a valid {DIALECT} SQL query without any placeholders.
<br class="ltx_break">Make any necessary changes to the SQL template to fit the database schema. The SQL query should be able to answer the business question.
<br class="ltx_break">You will be penalized for useless or meaningless queries.
<br class="ltx_break">The question should be generated as if it is asked by a user who do not know the database schema and it should be clear and concise.
<br class="ltx_break">You don’t have to use all of the keywords in the SQL template, but you should use at least some of them that are relevant to the business question. 
<br class="ltx_break">Make sure all of the conditions are correct, specificallty when you are using operators, make sure types are compatible.
<br class="ltx_break">All of the conditions in the SQL query should be explicitly mention in the question and avoid unnecessary conditions.
<br class="ltx_break">Question shouldn’t be too simple or too complex. It should be meaningful and exact without any ambiguous terms.
<br class="ltx_break">
<br class="ltx_break">Datbase schema:
<br class="ltx_break">{DATABASE_SCHEMA}
<br class="ltx_break">
<br class="ltx_break">{DIALECT} SQL template to get inspired by:
<br class="ltx_break">{SQL_TEMPLATE}
<br class="ltx_break">
<br class="ltx_break">Thank step by step about how to effectively generate a meaningful business question from the SQL template and the database schema.
<br class="ltx_break">{{
<br class="ltx_break">question: The bussiness question that a user might from the given database and the answer expects a SQL query similar to the SQL template provided.,
<br class="ltx_break">sql_query: A valid {DIALECT} SQL query that answers the business question.
<br class="ltx_break">}} </span></span>
</span></foreignObject></g></g></svg>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 10: </span>Prompt used for the sample generation (PGen) </figcaption>
</figure>
<figure id="A1.F11" class="ltx_figure"><img src="/html/2408.12733/assets/figures/sample_generation_example.png" id="A1.F11.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="479" height="236" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 11: </span><span id="A1.F11.2.1" class="ltx_text" style="font-size:90%;">An example of sample generation using a random database and sampled SQL template.</span></figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="A1.SS10.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.10.3 </span>Quality Check</h4>

<div id="A1.SS10.SSS3.p1" class="ltx_para">
<p id="A1.SS10.SSS3.p1.1" class="ltx_p">This section outlines the template for the quality check prompt, <a href="#A1.F12" title="In A.10.3 Quality Check ‣ A.10 Prompt Templates ‣ Appendix A Appendix ‣ SQL-GEN: Bridging the Dialect Gap for Text-to-SQL Via Synthetic Data And Model Merging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Figure</span> <span class="ltx_text ltx_ref_tag">12</span></a>. The template receives a database schema, a generated question, a generated SQL query, and the execution result of the query. It then identifies and resolves any semantic discrepancies between the pair.</p>
</div>
<figure id="A1.F12" class="ltx_figure"><svg id="A1.F12.pic1" class="ltx_picture ltx_centering" height="567.01" overflow="visible" version="1.1" width="616.3"><g transform="translate(0,567.01) matrix(1 0 0 -1 0 0) translate(308.15,0) translate(0,283.51)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#ADD8E6"><path d="M -307.87 -283.23 h 615.75 v 566.46 h -615.75 Z"></path></g><g transform="matrix(1.0 0.0 0.0 1.0 -300 -3.46)" fill="#000000" stroke="#000000"><foreignObject width="600" height="549.33" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible">
<span id="A1.F12.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_middle" style="width:433.6pt;">
<span id="A1.F12.pic1.1.1.1.1.1.1" class="ltx_p"><span id="A1.F12.pic1.1.1.1.1.1.1.1" class="ltx_text ltx_font_typewriter">You are a meticulous data quality assurance professional.
<br class="ltx_break">
<br class="ltx_break">Your job is to ensure that a dataset has high quality since it is going to be used for training models.
<br class="ltx_break">You are presented with a database schema and a {DIALECT} SQL query, its results, and a question.
<br class="ltx_break">If the pair needs fixing, you should fix the question or SQL query to make it acceptable.
<br class="ltx_break">
<br class="ltx_break">You have to make sure the following items are satisfied:
<br class="ltx_break">1. Question should match the {DIALECT} SQL query, and it shouldn’t be ambiguous. The question should be asked as if a non-technical person without access to the database is asking it.
<br class="ltx_break">2. The SQL query should exactly answer what is mentioned in the question, without any additional or irrelevant information.
<br class="ltx_break">
<br class="ltx_break">If question is not answerable or is ambiguous, change the question based on the database schema, then answer the new question with a new SQL query.
<br class="ltx_break">If SQL query is not correct, fix the SQL query based on the database schema, then answer the question with the fixed SQL query.
<br class="ltx_break">
<br class="ltx_break">DATABASE_SCHEMA:
<br class="ltx_break">{DATABASE_SCHEMA}
<br class="ltx_break">Question:
<br class="ltx_break">{QUESTION}
<br class="ltx_break">{DIALECT} SQL Query:
<br class="ltx_break">{SQL_QUERY}
<br class="ltx_break">{DIALECT} SQL Query Result:
<br class="ltx_break">{SQL_QUERY_RESULT}
<br class="ltx_break">Your response should be only a valid JSON object as follows without any additional text:
<br class="ltx_break">{{
reasoning: Your step by step reasoning for deciding if the question or SQL query needs fixing.
<br class="ltx_break">fixing_needed: YES or NO,
<br class="ltx_break">fixed_question: If the question is not acceptable, provide a fixed version of the question.,
<br class="ltx_break">fixed_sql_query: If the SQL query is not acceptable, provide a fixed version of the SQL query.
<br class="ltx_break">}}
<br class="ltx_break"></span></span>
</span></foreignObject></g></g></svg>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 12: </span>Prompt used for the Quality Check step (PQuality)</figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2408.12732" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2408.12733" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2408.12733">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2408.12733" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2408.12734" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Thu Sep  5 13:43:32 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
