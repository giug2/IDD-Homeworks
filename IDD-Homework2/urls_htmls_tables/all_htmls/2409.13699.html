<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong</title>
<!--Generated on Wed Sep  4 17:21:26 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<meta content="
Information Retrieval,  Question Answering,  Natural Language Processing,  Retrieval Augmented Generation
" lang="en" name="keywords"/>
<base href="/html/2409.13699v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S1" title="In Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">I </span><span class="ltx_text ltx_font_smallcaps">INTRODUCTION</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S2" title="In Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">II </span><span class="ltx_text ltx_font_smallcaps">LITERATURE SURVEY</span></span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S2.SS1" title="In II LITERATURE SURVEY ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">II-A</span> </span><span class="ltx_text ltx_font_italic">Retrieval Augmented Generation (RAG)</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S2.SS2" title="In II LITERATURE SURVEY ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">II-B</span> </span><span class="ltx_text ltx_font_italic">Semantic Search and Dense Vector Embeddings</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S2.SS3" title="In II LITERATURE SURVEY ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">II-C</span> </span><span class="ltx_text ltx_font_italic">Techniques for Improving Retrieval Performance</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S3" title="In Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">III </span><span class="ltx_text ltx_font_smallcaps">DATASET CONSTRUCTION</span></span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S3.SS1" title="In III DATASET CONSTRUCTION ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">III-A</span> </span><span class="ltx_text ltx_font_italic">Data Preparation</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S3.SS2" title="In III DATASET CONSTRUCTION ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">III-B</span> </span><span class="ltx_text ltx_font_italic">Data Processing</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S4" title="In Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">IV </span><span class="ltx_text ltx_font_smallcaps">THE SYSTEM ARCHITECTURE</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S5" title="In Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">V </span><span class="ltx_text ltx_font_smallcaps">EXPERIMENTS</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S6" title="In Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">VI </span><span class="ltx_text ltx_font_smallcaps">CONCLUSIONS</span></span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<div class="ltx_para" id="p1">
<span class="ltx_ERROR undefined" id="p1.1">\addbibresource</span>
<p class="ltx_p" id="p1.2">citation.bib










</p>
</div>
<h1 class="ltx_title ltx_font_bold ltx_title_document" style="font-size:120%;">
<span class="ltx_text" id="id1.id1" style="font-size:144%;">Vietnamese Legal Information Retrieval in Question-Answering System
<br class="ltx_break"/><span class="ltx_text" id="id1.id1.1" style="font-size:69%;">Natural Language Processing - IT4772E</span></span>
<br class="ltx_break"/>Professor:  Le Thanh Huong
</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Nguyen Ba Thiem 20214931
<br class="ltx_break"/>Doan The Vinh 20210940 
<br class="ltx_break"/>Pham Quang Tung 20210919 
<br class="ltx_break"/>Tran Van Toan 20214932 
<br class="ltx_break"/>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id2.id1">In the modern era of rapidly increasing data volumes, accurately retrieving and recommending relevant documents has become crucial in enhancing the reliability of Question Answering (QA) systems. Recently, Retrieval Augmented Generation (RAG) has gained significant recognition for enhancing the capabilities of large language models (LLMs) by mitigating hallucination issues in QA systems, which is particularly beneficial in the legal domain. Various methods, such as semantic search using dense vector embeddings or a combination of multiple techniques to improve results before feeding them to LLMs, have been proposed. However, these methods often fall short when applied to the Vietnamese language due to several challenges, namely inefficient Vietnamese data processing leading to excessive token length or overly simplistic ensemble techniques that lead to instability and limited improvement. Moreover, a critical issue often overlooked is the ordering of final relevant documents which are used as reference to ensure the accuracy of the answers provided by LLMs. In this report, we introduce our three main modifications taken to address these challenges. First, we explore various practical approaches to data processing to overcome the limitations of the embedding model. Additionally, we enhance Reciprocal Rank Fusion by normalizing order to combine results from keyword and vector searches effectively. We also meticulously re-rank the source pieces of information used by LLMs with Active Retrieval to improve user experience when refining the information generated. In our opinion, this technique can also be considered as a new re-ranking method that might be used in place of the traditional cross encoder. Finally, we integrate these techniques into a comprehensive QA system, significantly improving its performance and reliability.

<br class="ltx_break"/></p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Index Terms: </h6>
Information Retrieval, Question Answering, Natural Language Processing, Retrieval Augmented Generation

</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">I </span><span class="ltx_text ltx_font_smallcaps" id="S1.1.1">INTRODUCTION</span>
</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">In today’s world of rapidly increasing data volumes, the ability to accurately retrieve and recommend relevant documents has become essential for enhancing the reliability and effectiveness of Question Answering (QA) systems. This is especially true in the legal domain, where precise and contextually appropriate information retrieval is critical. Recent advancements, such as Retrieval Augmented Generation (RAG), have garnered significant attention for their ability to enhance the capabilities of large language models (LLMs) by reducing hallucination issues within QA systems.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Various methodologies have been proposed to improve document retrieval, including semantic search using dense vector embeddings and the combination of multiple techniques to refine results before they are processed by LLMs. However, these methods often encounter significant challenges when applied to the Vietnamese language. Issues such as inefficient data processing leading to excessive token length in embeddings, extended retrieval times, and overly simplistic result combination techniques leads to instability and limited improvements in retrieval accuracy.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">One critical problem that has been largely overlooked is the ordering of the final relevant documents that the LLMs use as references to ensure the accuracy of their answers. Addressing this issue is paramount for improving the overall effectiveness of QA systems in the legal domain.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">In this research, we focus on resolving these challenges without delving into the fine-tuning of existing models or the development of new models. Instead, we introduce four key contributions aimed at enhancing Vietnamese legal information retrieval within QA systems. Firstly, we explore practical approaches to data processing to mitigate embedding model inefficiencies. Secondly, we implement data clustering based on similar characteristics to facilitate faster and more accurate retrieval. Thirdly, we propose an enhanced normalization method for Reciprocal Rank Fusion to effectively combine results from both keyword and vector searches. Lastly, we meticulously re-rank the source documents used by LLMs, improving user experience and the precision of the refined information.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">These innovative techniques are integrated into a comprehensive QA system, significantly improving its performance and reliability in the Vietnamese legal context. The source code for this project can be found at <a class="ltx_ref ltx_href" href="https://github.com/thiemcun203/Legal-Information-Retrieval.git" title="">this GitHub repository</a>.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">II </span><span class="ltx_text ltx_font_smallcaps" id="S2.1.1">LITERATURE SURVEY</span>
</h2>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">In the context of rapidly evolving data volumes, enhancing Question Answering (QA) systems through accurate document retrieval and recommendation has become a focal area of research. The introduction of Retrieval Augmented Generation (RAG) (<cite class="ltx_cite ltx_citemacro_cite">[<span class="ltx_ref ltx_missing_citation ltx_ref_self">Lewis2020RetrievalAugmentedGF</span>]</cite>) has been a significant advancement in this domain, particularly in the efforts to mitigate hallucination issues in large language models (LLMs). This section explores related works that have contributed to the development of document retrieval and QA systems, with a brief overview of general advancements.</p>
</div>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S2.SS1.5.1.1">II-A</span> </span><span class="ltx_text ltx_font_italic" id="S2.SS1.6.2">Retrieval Augmented Generation (RAG)</span>
</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">RAG, introduced by <cite class="ltx_cite ltx_citemacro_cite">[<span class="ltx_ref ltx_missing_citation ltx_ref_self">Lewis2020RetrievalAugmentedGF</span>]</cite>, combines retrieval mechanisms with generative models to improve the accuracy and reliability of QA systems by reducing hallucinations. This technique leverages external documents to provide more contextually accurate answers, thereby enhancing the performance of LLMs. Subsequent research has built upon this foundation, exploring various retrieval methods and their integration with LLMs to further improve QA system accuracy and reliability.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S2.SS2.5.1.1">II-B</span> </span><span class="ltx_text ltx_font_italic" id="S2.SS2.6.2">Semantic Search and Dense Vector Embeddings</span>
</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">Semantic search, particularly using dense vector embeddings, has been a prominent method for improving document retrieval. Dense embeddings, represent documents in high-dimensional vector spaces, allowing for more nuanced similarity searches compared to traditional keyword-based methods. The application of BERT <cite class="ltx_cite ltx_citemacro_cite">[<span class="ltx_ref ltx_missing_citation ltx_ref_self">Devlin2019BERTPO</span>]</cite> and its derivatives has significantly improved the ability to capture semantic meaning in text, thus enhancing retrieval accuracy.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S2.SS3.5.1.1">II-C</span> </span><span class="ltx_text ltx_font_italic" id="S2.SS3.6.2">Techniques for Improving Retrieval Performance</span>
</h3>
<div class="ltx_para" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.1">Various techniques have been proposed to address the challenges in retrieval performance, notably techniques that utilize multiple retrieval methods (<cite class="ltx_cite ltx_citemacro_cite">[<span class="ltx_ref ltx_missing_citation ltx_ref_self">Fox1993CombinationOM</span>]</cite>, <cite class="ltx_cite ltx_citemacro_cite">[<span class="ltx_ref ltx_missing_citation ltx_ref_self">Aslam2001ModelsFM</span>]</cite>). One such technique is the Reciprocal Rank Fusion (RRF), introduced by <cite class="ltx_cite ltx_citemacro_cite">[<span class="ltx_ref ltx_missing_citation ltx_ref_self">Cormack2009ReciprocalRF</span>]</cite>, which demonstrated the effectiveness of RRF in enhancing retrieval results by combining keyword-based and semantic search methods. However, there still remains room for improvement in how these results are combined and ordered, particularly in the context of QA systems.</p>
</div>
<div class="ltx_para" id="S2.SS3.p2">
<p class="ltx_p" id="S2.SS3.p2.1">The re-ranking of retrieved documents (<cite class="ltx_cite ltx_citemacro_cite">[<span class="ltx_ref ltx_missing_citation ltx_ref_self">Callan1995SearchingDC</span>]</cite>) is another critical area of this project aimed at improving the final output of QA systems. Traditional re-ranking methods, such as those utilizing cross-encoders (<cite class="ltx_cite ltx_citemacro_cite">[<span class="ltx_ref ltx_missing_citation ltx_ref_self">Nogueira2019MultiStageDR</span>]</cite>), have shown promise in refining the relevance of documents. These are the essential techniques in information retrieval that have been widely used and proven to improve the relevance and quality of search results.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">III </span><span class="ltx_text ltx_font_smallcaps" id="S3.1.1">DATASET CONSTRUCTION</span>
</h2>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S3.SS1.5.1.1">III-A</span> </span><span class="ltx_text ltx_font_italic" id="S3.SS1.6.2">Data Preparation</span>
</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">At the beginning of the project, our goal was to fine-tune a model for better embedding and re-ranking. However, due to limited training resources and insufficient data, the results were suboptimal. Consequently, we decided to shift to utilizing existing models and optimizing the combination of componenets in our Information Retrieval System. This shift allowed us to focus on preparing data solely for testing purposes.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.1">We collected QA pairs from the ”Legal Library” website, extracting content into two main parts: user questions and answers provided by lawyers. The questions were meticulously cleaned to retain only the most useful information, removing redundant, duplicate, and greeting words while preserving the main content. Similarly, the answers were carefully cleaned to include only the relevant legal content, ensuring the dataset accurately represents real Vietnamese law.</p>
</div>
<div class="ltx_para" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.1">Each dataset was mapped accordingly: the question dataset includes an ID, its content and the relevant document ID, while the law dataset consists of an ID and its content. Each question corresponds to only one relevant document, effectively converting the QA problem into a retrieval problem.</p>
</div>
<div class="ltx_para" id="S3.SS1.p4">
<p class="ltx_p" id="S3.SS1.p4.1">In the end, we gathered approximately 1,293,347 distinct law articles and 2,081 questions for testing. Below are some statistics of the collected dataset:</p>
</div>
<figure class="ltx_table" id="S3.T1">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">TABLE I: </span>Distribution of law articles and question Lengths in the Original Legal Document Dataset</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S3.T1.1">
<tr class="ltx_tr" id="S3.T1.1.2">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" id="S3.T1.1.2.1"><span class="ltx_text ltx_font_bold" id="S3.T1.1.2.1.1">Length</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.2.2"><span class="ltx_text ltx_font_bold" id="S3.T1.1.2.2.1">No.Articles</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.2.3"><span class="ltx_text ltx_font_bold" id="S3.T1.1.2.3.1">Percent</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.2.4"><span class="ltx_text ltx_font_bold" id="S3.T1.1.2.4.1">No.Question</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.2.5"><span class="ltx_text ltx_font_bold" id="S3.T1.1.2.5.1">Percent</span></td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.1">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" id="S3.T1.1.1.1"><math alttext="&lt;100" class="ltx_Math" display="inline" id="S3.T1.1.1.1.m1.1"><semantics id="S3.T1.1.1.1.m1.1a"><mrow id="S3.T1.1.1.1.m1.1.1" xref="S3.T1.1.1.1.m1.1.1.cmml"><mi id="S3.T1.1.1.1.m1.1.1.2" xref="S3.T1.1.1.1.m1.1.1.2.cmml"></mi><mo id="S3.T1.1.1.1.m1.1.1.1" xref="S3.T1.1.1.1.m1.1.1.1.cmml">&lt;</mo><mn id="S3.T1.1.1.1.m1.1.1.3" xref="S3.T1.1.1.1.m1.1.1.3.cmml">100</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.T1.1.1.1.m1.1b"><apply id="S3.T1.1.1.1.m1.1.1.cmml" xref="S3.T1.1.1.1.m1.1.1"><lt id="S3.T1.1.1.1.m1.1.1.1.cmml" xref="S3.T1.1.1.1.m1.1.1.1"></lt><csymbol cd="latexml" id="S3.T1.1.1.1.m1.1.1.2.cmml" xref="S3.T1.1.1.1.m1.1.1.2">absent</csymbol><cn id="S3.T1.1.1.1.m1.1.1.3.cmml" type="integer" xref="S3.T1.1.1.1.m1.1.1.3">100</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.1.1.1.m1.1c">&lt;100</annotation><annotation encoding="application/x-llamapun" id="S3.T1.1.1.1.m1.1d">&lt; 100</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.1.2">245,001</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.1.3">18.95%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.1.4">1859</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.1.5">89.33%</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.3">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" id="S3.T1.1.3.1">101 - 256</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.3.2">531,012</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.3.3">41.06%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.3.4">192</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.3.5">9.23%</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.4">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" id="S3.T1.1.4.1">257 - 512</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.4.2">286,101</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.4.3">22.12%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.4.4">26</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.4.5">1.25%</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.5">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="S3.T1.1.5.1">513+</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T1.1.5.2">231,233</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T1.1.5.3">17.86%</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T1.1.5.4">4</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T1.1.5.5">0.02%</td>
</tr>
</table>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S3.SS2.5.1.1">III-B</span> </span><span class="ltx_text ltx_font_italic" id="S3.SS2.6.2">Data Processing</span>
</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">As shown in the table, many law documents exceed 256 tokens, the input limit for most Vietnamese embedding models, such as the Bi-Encoder from BKAI, which we intend to use. Therefore, we need practical methods to process these data before embedding. We split this intention into two main tasks that can be handled effectively.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1">Firstly, we split cleaned documents into chunks of fewer than 256 tokens. We prioritize splitting by sections (an article might contain multiple sections) to maintain information units. When section-based splitting isn’t feasible, we use an overlap chunking technique, where each partition’s beginning tokens are a portion of the previous partition’s ending tokens. This method helps retain related information, enhancing the retrieval of relevant pieces. We can also enrich chunks with metadata to add more context. Additionally, summarizing long articles for searching was considered, but it is not suitable for our goal of finding the exact information from documents and might be better for segmentation or clustering problems. For questions longer than 256 tokens, we take the final 256 tokens, as key information usually resides at the end. We also decompose lengthy questions into smaller chunks, search each chunk, and then combine the results for re-ranking.</p>
</div>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.1">In the context of our system, to be explained in the next section, a 256-token limit for the Bi-Encoder actually offers an advantage in terms of producing results to the system users. Specifically, the entire chunk can be directly used as a concise reference to back up the answer provided; in contrast, highlighting an entire article, or even just a segment, might still pose too large of text volume for the sake of user experience.</p>
</div>
<figure class="ltx_figure" id="S3.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="398" id="S3.F1.g1" src="extracted/5833874/Images/sample-split.png" width="479"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Example of the data preprocessing process, when a large article is split into various overlapping chunks</figcaption>
</figure>
<div class="ltx_para" id="S3.SS2.p4">
<p class="ltx_p" id="S3.SS2.p4.1">Secondly, to enhance embedding vector quality, we segment chunks. Unlike English, Vietnamese is a monosyllabic language, and models perform better when sentences are segmented before tokenization. We chose the RDR segmenter, as the original dataset for training the BKAI model used this segmentation method.</p>
</div>
<div class="ltx_para" id="S3.SS2.p5">
<p class="ltx_p" id="S3.SS2.p5.1">Additionally, for BM25, we remove stopwords to compute accurate scores, avoiding the impact of frequent but less meaningful words. However, for the dense embedding model, we retain words after segmentation before feeding them into the model.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">IV </span><span class="ltx_text ltx_font_smallcaps" id="S4.1.1">THE SYSTEM ARCHITECTURE</span>
</h2>
<figure class="ltx_figure" id="S4.F2">
<p class="ltx_p ltx_align_center" id="S4.F2.1">
<span class="ltx_inline-block ltx_parbox ltx_align_middle ltx_framed ltx_framed_rectangle" id="S4.F2.1.1.1" style="width:433.6pt;"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="339" id="S4.F2.1.1.1.g1" src="extracted/5833874/Images/architecture-final.png" width="598"/>
</span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span> Architecture of our Information Retrieval System as well as Question Answer System</figcaption>
</figure>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">As an overview, the architecture depicted in Figure 1 comprises a number of main components: a Large Language Model (LLM) in charge of clearly rewriting a user query, a vector database for storing the processed corpus and any other relevant documents, a retrieval mechanism incorporating BM25 search and Dense Vector search utilizing a Bi-Encoder to generate dense embeddings, implemented in an approach that values ranking and re-ranking to return the order of relevancy among chunks of documents, i.e. legal articles. Finally, a component is in charge of generating the final answer and the reference chunks, which we deem to fit as both evidence for the LLM-based answer as well as a re-ranking result which can be utilized by other systems. Details on each component, as well as the flow of our system, will be explained in detail as follows.</p>
</div>
<div class="ltx_para" id="S4.p2">
<p class="ltx_p" id="S4.p2.1"><span class="ltx_text ltx_font_bold" id="S4.p2.1.1">Vector database for data storage</span></p>
</div>
<div class="ltx_para" id="S4.p3">
<p class="ltx_p" id="S4.p3.1">Regarding storage needed to save dense embeddings of chunks from legal articles, our project aims to have this data processed and organized in an efficient manner. To achieve this, we utilize the use of vector database which support both BM25 Search and Vector Search for efficient storing and retrieving. Specifically, the vector database support faster searching by using Cosine similarity as a metric and the Hierarchical Navigable Small World algorithm.</p>
</div>
<div class="ltx_para" id="S4.p4">
<p class="ltx_p" id="S4.p4.1"><span class="ltx_text ltx_font_bold" id="S4.p4.1.1">Rewriting user queries</span></p>
</div>
<div class="ltx_para" id="S4.p5">
<p class="ltx_p" id="S4.p5.1">Our process begins by optimizing the prompt to instruct the model to generate accurate answers based on relevant retrieved documents and the user’s native query. This is often necessary to counteract inadvertent typos and vagueness in the users’ questions, which might significantly impact the performance of keyword-based search, and improve clarity. Once the LLM generates a refined version of the query, we use this to search for the actual documents (or article chunks) relevant to the response, essentially verifying the sources used for reasoning. An example can be found in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S4.F3" title="Figure 3 ‣ IV THE SYSTEM ARCHITECTURE ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_tag">3</span></a>. It is to be noted that while the refined query can technically be passed directly to a LLM for an answer or to confirm the existence of a possible answer, general-purpose language models might not be trained on enough niche Vietnamese legal data to fully understand this, which might lead to situations where an answerable question is classified as the opposite. Therefore, we refrain on this practice.</p>
</div>
<figure class="ltx_figure" id="S4.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="204" id="S4.F3.g1" src="extracted/5833874/Images/rewrite-query.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span> An example of the Query rewriting module. Notice that the query might contain typos, abbreviations, and vagueness.</figcaption>
</figure>
<div class="ltx_para" id="S4.p6">
<p class="ltx_p" id="S4.p6.1"><span class="ltx_text ltx_font_bold" id="S4.p6.1.1">BM25 for retrieval</span></p>
</div>
<div class="ltx_para" id="S4.p7">
<p class="ltx_p" id="S4.p7.1">Regarding keyword search, methods such as TF-IDF and BM25 are commonly used to identify the most relevant documents based on term frequency in both the query and the documents. BM25, represented by the formula below, has a simple yet effective approach that remains widely used today.</p>
</div>
<div class="ltx_para" id="S4.p8">
<p class="ltx_p" id="S4.p8.3">Given a query <math alttext="Q" class="ltx_Math" display="inline" id="S4.p8.1.m1.1"><semantics id="S4.p8.1.m1.1a"><mi id="S4.p8.1.m1.1.1" xref="S4.p8.1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S4.p8.1.m1.1b"><ci id="S4.p8.1.m1.1.1.cmml" xref="S4.p8.1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p8.1.m1.1c">Q</annotation><annotation encoding="application/x-llamapun" id="S4.p8.1.m1.1d">italic_Q</annotation></semantics></math>, containing keywords <math alttext="q_{1},\ldots,q_{n}" class="ltx_Math" display="inline" id="S4.p8.2.m2.3"><semantics id="S4.p8.2.m2.3a"><mrow id="S4.p8.2.m2.3.3.2" xref="S4.p8.2.m2.3.3.3.cmml"><msub id="S4.p8.2.m2.2.2.1.1" xref="S4.p8.2.m2.2.2.1.1.cmml"><mi id="S4.p8.2.m2.2.2.1.1.2" xref="S4.p8.2.m2.2.2.1.1.2.cmml">q</mi><mn id="S4.p8.2.m2.2.2.1.1.3" xref="S4.p8.2.m2.2.2.1.1.3.cmml">1</mn></msub><mo id="S4.p8.2.m2.3.3.2.3" xref="S4.p8.2.m2.3.3.3.cmml">,</mo><mi id="S4.p8.2.m2.1.1" mathvariant="normal" xref="S4.p8.2.m2.1.1.cmml">…</mi><mo id="S4.p8.2.m2.3.3.2.4" xref="S4.p8.2.m2.3.3.3.cmml">,</mo><msub id="S4.p8.2.m2.3.3.2.2" xref="S4.p8.2.m2.3.3.2.2.cmml"><mi id="S4.p8.2.m2.3.3.2.2.2" xref="S4.p8.2.m2.3.3.2.2.2.cmml">q</mi><mi id="S4.p8.2.m2.3.3.2.2.3" xref="S4.p8.2.m2.3.3.2.2.3.cmml">n</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S4.p8.2.m2.3b"><list id="S4.p8.2.m2.3.3.3.cmml" xref="S4.p8.2.m2.3.3.2"><apply id="S4.p8.2.m2.2.2.1.1.cmml" xref="S4.p8.2.m2.2.2.1.1"><csymbol cd="ambiguous" id="S4.p8.2.m2.2.2.1.1.1.cmml" xref="S4.p8.2.m2.2.2.1.1">subscript</csymbol><ci id="S4.p8.2.m2.2.2.1.1.2.cmml" xref="S4.p8.2.m2.2.2.1.1.2">𝑞</ci><cn id="S4.p8.2.m2.2.2.1.1.3.cmml" type="integer" xref="S4.p8.2.m2.2.2.1.1.3">1</cn></apply><ci id="S4.p8.2.m2.1.1.cmml" xref="S4.p8.2.m2.1.1">…</ci><apply id="S4.p8.2.m2.3.3.2.2.cmml" xref="S4.p8.2.m2.3.3.2.2"><csymbol cd="ambiguous" id="S4.p8.2.m2.3.3.2.2.1.cmml" xref="S4.p8.2.m2.3.3.2.2">subscript</csymbol><ci id="S4.p8.2.m2.3.3.2.2.2.cmml" xref="S4.p8.2.m2.3.3.2.2.2">𝑞</ci><ci id="S4.p8.2.m2.3.3.2.2.3.cmml" xref="S4.p8.2.m2.3.3.2.2.3">𝑛</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.p8.2.m2.3c">q_{1},\ldots,q_{n}</annotation><annotation encoding="application/x-llamapun" id="S4.p8.2.m2.3d">italic_q start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_q start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT</annotation></semantics></math>, the BM25 score of a document <math alttext="D" class="ltx_Math" display="inline" id="S4.p8.3.m3.1"><semantics id="S4.p8.3.m3.1a"><mi id="S4.p8.3.m3.1.1" xref="S4.p8.3.m3.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S4.p8.3.m3.1b"><ci id="S4.p8.3.m3.1.1.cmml" xref="S4.p8.3.m3.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p8.3.m3.1c">D</annotation><annotation encoding="application/x-llamapun" id="S4.p8.3.m3.1d">italic_D</annotation></semantics></math> is:</p>
</div>
<div class="ltx_para" id="S4.p9">
<table class="ltx_equation ltx_eqn_table" id="S4.Ex1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\text{score}(D,Q)=\sum_{i=1}^{n}\text{IDF}(q_{i})\cdot\frac{f(q_{i},D)\cdot(k_%
{1}+1)}{f(q_{i},D)+k_{1}\cdot\left(1-b+b\cdot\frac{|D|}{\text{avgdl}}\right)}" class="ltx_Math" display="block" id="S4.Ex1.m1.10"><semantics id="S4.Ex1.m1.10a"><mrow id="S4.Ex1.m1.10.10" xref="S4.Ex1.m1.10.10.cmml"><mrow id="S4.Ex1.m1.10.10.3" xref="S4.Ex1.m1.10.10.3.cmml"><mtext id="S4.Ex1.m1.10.10.3.2" xref="S4.Ex1.m1.10.10.3.2a.cmml">score</mtext><mo id="S4.Ex1.m1.10.10.3.1" xref="S4.Ex1.m1.10.10.3.1.cmml">⁢</mo><mrow id="S4.Ex1.m1.10.10.3.3.2" xref="S4.Ex1.m1.10.10.3.3.1.cmml"><mo id="S4.Ex1.m1.10.10.3.3.2.1" stretchy="false" xref="S4.Ex1.m1.10.10.3.3.1.cmml">(</mo><mi id="S4.Ex1.m1.8.8" xref="S4.Ex1.m1.8.8.cmml">D</mi><mo id="S4.Ex1.m1.10.10.3.3.2.2" xref="S4.Ex1.m1.10.10.3.3.1.cmml">,</mo><mi id="S4.Ex1.m1.9.9" xref="S4.Ex1.m1.9.9.cmml">Q</mi><mo id="S4.Ex1.m1.10.10.3.3.2.3" stretchy="false" xref="S4.Ex1.m1.10.10.3.3.1.cmml">)</mo></mrow></mrow><mo id="S4.Ex1.m1.10.10.2" rspace="0.111em" xref="S4.Ex1.m1.10.10.2.cmml">=</mo><mrow id="S4.Ex1.m1.10.10.1" xref="S4.Ex1.m1.10.10.1.cmml"><munderover id="S4.Ex1.m1.10.10.1.2" xref="S4.Ex1.m1.10.10.1.2.cmml"><mo id="S4.Ex1.m1.10.10.1.2.2.2" movablelimits="false" xref="S4.Ex1.m1.10.10.1.2.2.2.cmml">∑</mo><mrow id="S4.Ex1.m1.10.10.1.2.2.3" xref="S4.Ex1.m1.10.10.1.2.2.3.cmml"><mi id="S4.Ex1.m1.10.10.1.2.2.3.2" xref="S4.Ex1.m1.10.10.1.2.2.3.2.cmml">i</mi><mo id="S4.Ex1.m1.10.10.1.2.2.3.1" xref="S4.Ex1.m1.10.10.1.2.2.3.1.cmml">=</mo><mn id="S4.Ex1.m1.10.10.1.2.2.3.3" xref="S4.Ex1.m1.10.10.1.2.2.3.3.cmml">1</mn></mrow><mi id="S4.Ex1.m1.10.10.1.2.3" xref="S4.Ex1.m1.10.10.1.2.3.cmml">n</mi></munderover><mrow id="S4.Ex1.m1.10.10.1.1" xref="S4.Ex1.m1.10.10.1.1.cmml"><mrow id="S4.Ex1.m1.10.10.1.1.1" xref="S4.Ex1.m1.10.10.1.1.1.cmml"><mtext id="S4.Ex1.m1.10.10.1.1.1.3" xref="S4.Ex1.m1.10.10.1.1.1.3a.cmml">IDF</mtext><mo id="S4.Ex1.m1.10.10.1.1.1.2" xref="S4.Ex1.m1.10.10.1.1.1.2.cmml">⁢</mo><mrow id="S4.Ex1.m1.10.10.1.1.1.1.1" xref="S4.Ex1.m1.10.10.1.1.1.1.1.1.cmml"><mo id="S4.Ex1.m1.10.10.1.1.1.1.1.2" stretchy="false" xref="S4.Ex1.m1.10.10.1.1.1.1.1.1.cmml">(</mo><msub id="S4.Ex1.m1.10.10.1.1.1.1.1.1" xref="S4.Ex1.m1.10.10.1.1.1.1.1.1.cmml"><mi id="S4.Ex1.m1.10.10.1.1.1.1.1.1.2" xref="S4.Ex1.m1.10.10.1.1.1.1.1.1.2.cmml">q</mi><mi id="S4.Ex1.m1.10.10.1.1.1.1.1.1.3" xref="S4.Ex1.m1.10.10.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.Ex1.m1.10.10.1.1.1.1.1.3" rspace="0.055em" stretchy="false" xref="S4.Ex1.m1.10.10.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S4.Ex1.m1.10.10.1.1.2" rspace="0.222em" xref="S4.Ex1.m1.10.10.1.1.2.cmml">⋅</mo><mfrac id="S4.Ex1.m1.7.7" xref="S4.Ex1.m1.7.7.cmml"><mrow id="S4.Ex1.m1.3.3.3" xref="S4.Ex1.m1.3.3.3.cmml"><mrow id="S4.Ex1.m1.2.2.2.2" xref="S4.Ex1.m1.2.2.2.2.cmml"><mi id="S4.Ex1.m1.2.2.2.2.3" xref="S4.Ex1.m1.2.2.2.2.3.cmml">f</mi><mo id="S4.Ex1.m1.2.2.2.2.2" xref="S4.Ex1.m1.2.2.2.2.2.cmml">⁢</mo><mrow id="S4.Ex1.m1.2.2.2.2.1.1" xref="S4.Ex1.m1.2.2.2.2.1.2.cmml"><mo id="S4.Ex1.m1.2.2.2.2.1.1.2" stretchy="false" xref="S4.Ex1.m1.2.2.2.2.1.2.cmml">(</mo><msub id="S4.Ex1.m1.2.2.2.2.1.1.1" xref="S4.Ex1.m1.2.2.2.2.1.1.1.cmml"><mi id="S4.Ex1.m1.2.2.2.2.1.1.1.2" xref="S4.Ex1.m1.2.2.2.2.1.1.1.2.cmml">q</mi><mi id="S4.Ex1.m1.2.2.2.2.1.1.1.3" xref="S4.Ex1.m1.2.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S4.Ex1.m1.2.2.2.2.1.1.3" xref="S4.Ex1.m1.2.2.2.2.1.2.cmml">,</mo><mi id="S4.Ex1.m1.1.1.1.1" xref="S4.Ex1.m1.1.1.1.1.cmml">D</mi><mo id="S4.Ex1.m1.2.2.2.2.1.1.4" rspace="0.055em" stretchy="false" xref="S4.Ex1.m1.2.2.2.2.1.2.cmml">)</mo></mrow></mrow><mo id="S4.Ex1.m1.3.3.3.4" rspace="0.222em" xref="S4.Ex1.m1.3.3.3.4.cmml">⋅</mo><mrow id="S4.Ex1.m1.3.3.3.3.1" xref="S4.Ex1.m1.3.3.3.3.1.1.cmml"><mo id="S4.Ex1.m1.3.3.3.3.1.2" stretchy="false" xref="S4.Ex1.m1.3.3.3.3.1.1.cmml">(</mo><mrow id="S4.Ex1.m1.3.3.3.3.1.1" xref="S4.Ex1.m1.3.3.3.3.1.1.cmml"><msub id="S4.Ex1.m1.3.3.3.3.1.1.2" xref="S4.Ex1.m1.3.3.3.3.1.1.2.cmml"><mi id="S4.Ex1.m1.3.3.3.3.1.1.2.2" xref="S4.Ex1.m1.3.3.3.3.1.1.2.2.cmml">k</mi><mn id="S4.Ex1.m1.3.3.3.3.1.1.2.3" xref="S4.Ex1.m1.3.3.3.3.1.1.2.3.cmml">1</mn></msub><mo id="S4.Ex1.m1.3.3.3.3.1.1.1" xref="S4.Ex1.m1.3.3.3.3.1.1.1.cmml">+</mo><mn id="S4.Ex1.m1.3.3.3.3.1.1.3" xref="S4.Ex1.m1.3.3.3.3.1.1.3.cmml">1</mn></mrow><mo id="S4.Ex1.m1.3.3.3.3.1.3" stretchy="false" xref="S4.Ex1.m1.3.3.3.3.1.1.cmml">)</mo></mrow></mrow><mrow id="S4.Ex1.m1.7.7.7" xref="S4.Ex1.m1.7.7.7.cmml"><mrow id="S4.Ex1.m1.6.6.6.3" xref="S4.Ex1.m1.6.6.6.3.cmml"><mi id="S4.Ex1.m1.6.6.6.3.3" xref="S4.Ex1.m1.6.6.6.3.3.cmml">f</mi><mo id="S4.Ex1.m1.6.6.6.3.2" xref="S4.Ex1.m1.6.6.6.3.2.cmml">⁢</mo><mrow id="S4.Ex1.m1.6.6.6.3.1.1" xref="S4.Ex1.m1.6.6.6.3.1.2.cmml"><mo id="S4.Ex1.m1.6.6.6.3.1.1.2" stretchy="false" xref="S4.Ex1.m1.6.6.6.3.1.2.cmml">(</mo><msub id="S4.Ex1.m1.6.6.6.3.1.1.1" xref="S4.Ex1.m1.6.6.6.3.1.1.1.cmml"><mi id="S4.Ex1.m1.6.6.6.3.1.1.1.2" xref="S4.Ex1.m1.6.6.6.3.1.1.1.2.cmml">q</mi><mi id="S4.Ex1.m1.6.6.6.3.1.1.1.3" xref="S4.Ex1.m1.6.6.6.3.1.1.1.3.cmml">i</mi></msub><mo id="S4.Ex1.m1.6.6.6.3.1.1.3" xref="S4.Ex1.m1.6.6.6.3.1.2.cmml">,</mo><mi id="S4.Ex1.m1.5.5.5.2" xref="S4.Ex1.m1.5.5.5.2.cmml">D</mi><mo id="S4.Ex1.m1.6.6.6.3.1.1.4" stretchy="false" xref="S4.Ex1.m1.6.6.6.3.1.2.cmml">)</mo></mrow></mrow><mo id="S4.Ex1.m1.7.7.7.5" xref="S4.Ex1.m1.7.7.7.5.cmml">+</mo><mrow id="S4.Ex1.m1.7.7.7.4" xref="S4.Ex1.m1.7.7.7.4.cmml"><msub id="S4.Ex1.m1.7.7.7.4.3" xref="S4.Ex1.m1.7.7.7.4.3.cmml"><mi id="S4.Ex1.m1.7.7.7.4.3.2" xref="S4.Ex1.m1.7.7.7.4.3.2.cmml">k</mi><mn id="S4.Ex1.m1.7.7.7.4.3.3" xref="S4.Ex1.m1.7.7.7.4.3.3.cmml">1</mn></msub><mo id="S4.Ex1.m1.7.7.7.4.2" lspace="0.222em" rspace="0.222em" xref="S4.Ex1.m1.7.7.7.4.2.cmml">⋅</mo><mrow id="S4.Ex1.m1.7.7.7.4.1.1" xref="S4.Ex1.m1.7.7.7.4.1.1.1.cmml"><mo id="S4.Ex1.m1.7.7.7.4.1.1.2" xref="S4.Ex1.m1.7.7.7.4.1.1.1.cmml">(</mo><mrow id="S4.Ex1.m1.7.7.7.4.1.1.1" xref="S4.Ex1.m1.7.7.7.4.1.1.1.cmml"><mrow id="S4.Ex1.m1.7.7.7.4.1.1.1.2" xref="S4.Ex1.m1.7.7.7.4.1.1.1.2.cmml"><mn id="S4.Ex1.m1.7.7.7.4.1.1.1.2.2" xref="S4.Ex1.m1.7.7.7.4.1.1.1.2.2.cmml">1</mn><mo id="S4.Ex1.m1.7.7.7.4.1.1.1.2.1" xref="S4.Ex1.m1.7.7.7.4.1.1.1.2.1.cmml">−</mo><mi id="S4.Ex1.m1.7.7.7.4.1.1.1.2.3" xref="S4.Ex1.m1.7.7.7.4.1.1.1.2.3.cmml">b</mi></mrow><mo id="S4.Ex1.m1.7.7.7.4.1.1.1.1" xref="S4.Ex1.m1.7.7.7.4.1.1.1.1.cmml">+</mo><mrow id="S4.Ex1.m1.7.7.7.4.1.1.1.3" xref="S4.Ex1.m1.7.7.7.4.1.1.1.3.cmml"><mi id="S4.Ex1.m1.7.7.7.4.1.1.1.3.2" xref="S4.Ex1.m1.7.7.7.4.1.1.1.3.2.cmml">b</mi><mo id="S4.Ex1.m1.7.7.7.4.1.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="S4.Ex1.m1.7.7.7.4.1.1.1.3.1.cmml">⋅</mo><mfrac id="S4.Ex1.m1.4.4.4.1" xref="S4.Ex1.m1.4.4.4.1.cmml"><mrow id="S4.Ex1.m1.4.4.4.1.1.3" xref="S4.Ex1.m1.4.4.4.1.1.2.cmml"><mo id="S4.Ex1.m1.4.4.4.1.1.3.1" stretchy="false" xref="S4.Ex1.m1.4.4.4.1.1.2.1.cmml">|</mo><mi id="S4.Ex1.m1.4.4.4.1.1.1" xref="S4.Ex1.m1.4.4.4.1.1.1.cmml">D</mi><mo id="S4.Ex1.m1.4.4.4.1.1.3.2" stretchy="false" xref="S4.Ex1.m1.4.4.4.1.1.2.1.cmml">|</mo></mrow><mtext id="S4.Ex1.m1.4.4.4.1.3" xref="S4.Ex1.m1.4.4.4.1.3a.cmml">avgdl</mtext></mfrac></mrow></mrow><mo id="S4.Ex1.m1.7.7.7.4.1.1.3" xref="S4.Ex1.m1.7.7.7.4.1.1.1.cmml">)</mo></mrow></mrow></mrow></mfrac></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.Ex1.m1.10b"><apply id="S4.Ex1.m1.10.10.cmml" xref="S4.Ex1.m1.10.10"><eq id="S4.Ex1.m1.10.10.2.cmml" xref="S4.Ex1.m1.10.10.2"></eq><apply id="S4.Ex1.m1.10.10.3.cmml" xref="S4.Ex1.m1.10.10.3"><times id="S4.Ex1.m1.10.10.3.1.cmml" xref="S4.Ex1.m1.10.10.3.1"></times><ci id="S4.Ex1.m1.10.10.3.2a.cmml" xref="S4.Ex1.m1.10.10.3.2"><mtext id="S4.Ex1.m1.10.10.3.2.cmml" xref="S4.Ex1.m1.10.10.3.2">score</mtext></ci><interval closure="open" id="S4.Ex1.m1.10.10.3.3.1.cmml" xref="S4.Ex1.m1.10.10.3.3.2"><ci id="S4.Ex1.m1.8.8.cmml" xref="S4.Ex1.m1.8.8">𝐷</ci><ci id="S4.Ex1.m1.9.9.cmml" xref="S4.Ex1.m1.9.9">𝑄</ci></interval></apply><apply id="S4.Ex1.m1.10.10.1.cmml" xref="S4.Ex1.m1.10.10.1"><apply id="S4.Ex1.m1.10.10.1.2.cmml" xref="S4.Ex1.m1.10.10.1.2"><csymbol cd="ambiguous" id="S4.Ex1.m1.10.10.1.2.1.cmml" xref="S4.Ex1.m1.10.10.1.2">superscript</csymbol><apply id="S4.Ex1.m1.10.10.1.2.2.cmml" xref="S4.Ex1.m1.10.10.1.2"><csymbol cd="ambiguous" id="S4.Ex1.m1.10.10.1.2.2.1.cmml" xref="S4.Ex1.m1.10.10.1.2">subscript</csymbol><sum id="S4.Ex1.m1.10.10.1.2.2.2.cmml" xref="S4.Ex1.m1.10.10.1.2.2.2"></sum><apply id="S4.Ex1.m1.10.10.1.2.2.3.cmml" xref="S4.Ex1.m1.10.10.1.2.2.3"><eq id="S4.Ex1.m1.10.10.1.2.2.3.1.cmml" xref="S4.Ex1.m1.10.10.1.2.2.3.1"></eq><ci id="S4.Ex1.m1.10.10.1.2.2.3.2.cmml" xref="S4.Ex1.m1.10.10.1.2.2.3.2">𝑖</ci><cn id="S4.Ex1.m1.10.10.1.2.2.3.3.cmml" type="integer" xref="S4.Ex1.m1.10.10.1.2.2.3.3">1</cn></apply></apply><ci id="S4.Ex1.m1.10.10.1.2.3.cmml" xref="S4.Ex1.m1.10.10.1.2.3">𝑛</ci></apply><apply id="S4.Ex1.m1.10.10.1.1.cmml" xref="S4.Ex1.m1.10.10.1.1"><ci id="S4.Ex1.m1.10.10.1.1.2.cmml" xref="S4.Ex1.m1.10.10.1.1.2">⋅</ci><apply id="S4.Ex1.m1.10.10.1.1.1.cmml" xref="S4.Ex1.m1.10.10.1.1.1"><times id="S4.Ex1.m1.10.10.1.1.1.2.cmml" xref="S4.Ex1.m1.10.10.1.1.1.2"></times><ci id="S4.Ex1.m1.10.10.1.1.1.3a.cmml" xref="S4.Ex1.m1.10.10.1.1.1.3"><mtext id="S4.Ex1.m1.10.10.1.1.1.3.cmml" xref="S4.Ex1.m1.10.10.1.1.1.3">IDF</mtext></ci><apply id="S4.Ex1.m1.10.10.1.1.1.1.1.1.cmml" xref="S4.Ex1.m1.10.10.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.Ex1.m1.10.10.1.1.1.1.1.1.1.cmml" xref="S4.Ex1.m1.10.10.1.1.1.1.1">subscript</csymbol><ci id="S4.Ex1.m1.10.10.1.1.1.1.1.1.2.cmml" xref="S4.Ex1.m1.10.10.1.1.1.1.1.1.2">𝑞</ci><ci id="S4.Ex1.m1.10.10.1.1.1.1.1.1.3.cmml" xref="S4.Ex1.m1.10.10.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S4.Ex1.m1.7.7.cmml" xref="S4.Ex1.m1.7.7"><divide id="S4.Ex1.m1.7.7.8.cmml" xref="S4.Ex1.m1.7.7"></divide><apply id="S4.Ex1.m1.3.3.3.cmml" xref="S4.Ex1.m1.3.3.3"><ci id="S4.Ex1.m1.3.3.3.4.cmml" xref="S4.Ex1.m1.3.3.3.4">⋅</ci><apply id="S4.Ex1.m1.2.2.2.2.cmml" xref="S4.Ex1.m1.2.2.2.2"><times id="S4.Ex1.m1.2.2.2.2.2.cmml" xref="S4.Ex1.m1.2.2.2.2.2"></times><ci id="S4.Ex1.m1.2.2.2.2.3.cmml" xref="S4.Ex1.m1.2.2.2.2.3">𝑓</ci><interval closure="open" id="S4.Ex1.m1.2.2.2.2.1.2.cmml" xref="S4.Ex1.m1.2.2.2.2.1.1"><apply id="S4.Ex1.m1.2.2.2.2.1.1.1.cmml" xref="S4.Ex1.m1.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="S4.Ex1.m1.2.2.2.2.1.1.1.1.cmml" xref="S4.Ex1.m1.2.2.2.2.1.1.1">subscript</csymbol><ci id="S4.Ex1.m1.2.2.2.2.1.1.1.2.cmml" xref="S4.Ex1.m1.2.2.2.2.1.1.1.2">𝑞</ci><ci id="S4.Ex1.m1.2.2.2.2.1.1.1.3.cmml" xref="S4.Ex1.m1.2.2.2.2.1.1.1.3">𝑖</ci></apply><ci id="S4.Ex1.m1.1.1.1.1.cmml" xref="S4.Ex1.m1.1.1.1.1">𝐷</ci></interval></apply><apply id="S4.Ex1.m1.3.3.3.3.1.1.cmml" xref="S4.Ex1.m1.3.3.3.3.1"><plus id="S4.Ex1.m1.3.3.3.3.1.1.1.cmml" xref="S4.Ex1.m1.3.3.3.3.1.1.1"></plus><apply id="S4.Ex1.m1.3.3.3.3.1.1.2.cmml" xref="S4.Ex1.m1.3.3.3.3.1.1.2"><csymbol cd="ambiguous" id="S4.Ex1.m1.3.3.3.3.1.1.2.1.cmml" xref="S4.Ex1.m1.3.3.3.3.1.1.2">subscript</csymbol><ci id="S4.Ex1.m1.3.3.3.3.1.1.2.2.cmml" xref="S4.Ex1.m1.3.3.3.3.1.1.2.2">𝑘</ci><cn id="S4.Ex1.m1.3.3.3.3.1.1.2.3.cmml" type="integer" xref="S4.Ex1.m1.3.3.3.3.1.1.2.3">1</cn></apply><cn id="S4.Ex1.m1.3.3.3.3.1.1.3.cmml" type="integer" xref="S4.Ex1.m1.3.3.3.3.1.1.3">1</cn></apply></apply><apply id="S4.Ex1.m1.7.7.7.cmml" xref="S4.Ex1.m1.7.7.7"><plus id="S4.Ex1.m1.7.7.7.5.cmml" xref="S4.Ex1.m1.7.7.7.5"></plus><apply id="S4.Ex1.m1.6.6.6.3.cmml" xref="S4.Ex1.m1.6.6.6.3"><times id="S4.Ex1.m1.6.6.6.3.2.cmml" xref="S4.Ex1.m1.6.6.6.3.2"></times><ci id="S4.Ex1.m1.6.6.6.3.3.cmml" xref="S4.Ex1.m1.6.6.6.3.3">𝑓</ci><interval closure="open" id="S4.Ex1.m1.6.6.6.3.1.2.cmml" xref="S4.Ex1.m1.6.6.6.3.1.1"><apply id="S4.Ex1.m1.6.6.6.3.1.1.1.cmml" xref="S4.Ex1.m1.6.6.6.3.1.1.1"><csymbol cd="ambiguous" id="S4.Ex1.m1.6.6.6.3.1.1.1.1.cmml" xref="S4.Ex1.m1.6.6.6.3.1.1.1">subscript</csymbol><ci id="S4.Ex1.m1.6.6.6.3.1.1.1.2.cmml" xref="S4.Ex1.m1.6.6.6.3.1.1.1.2">𝑞</ci><ci id="S4.Ex1.m1.6.6.6.3.1.1.1.3.cmml" xref="S4.Ex1.m1.6.6.6.3.1.1.1.3">𝑖</ci></apply><ci id="S4.Ex1.m1.5.5.5.2.cmml" xref="S4.Ex1.m1.5.5.5.2">𝐷</ci></interval></apply><apply id="S4.Ex1.m1.7.7.7.4.cmml" xref="S4.Ex1.m1.7.7.7.4"><ci id="S4.Ex1.m1.7.7.7.4.2.cmml" xref="S4.Ex1.m1.7.7.7.4.2">⋅</ci><apply id="S4.Ex1.m1.7.7.7.4.3.cmml" xref="S4.Ex1.m1.7.7.7.4.3"><csymbol cd="ambiguous" id="S4.Ex1.m1.7.7.7.4.3.1.cmml" xref="S4.Ex1.m1.7.7.7.4.3">subscript</csymbol><ci id="S4.Ex1.m1.7.7.7.4.3.2.cmml" xref="S4.Ex1.m1.7.7.7.4.3.2">𝑘</ci><cn id="S4.Ex1.m1.7.7.7.4.3.3.cmml" type="integer" xref="S4.Ex1.m1.7.7.7.4.3.3">1</cn></apply><apply id="S4.Ex1.m1.7.7.7.4.1.1.1.cmml" xref="S4.Ex1.m1.7.7.7.4.1.1"><plus id="S4.Ex1.m1.7.7.7.4.1.1.1.1.cmml" xref="S4.Ex1.m1.7.7.7.4.1.1.1.1"></plus><apply id="S4.Ex1.m1.7.7.7.4.1.1.1.2.cmml" xref="S4.Ex1.m1.7.7.7.4.1.1.1.2"><minus id="S4.Ex1.m1.7.7.7.4.1.1.1.2.1.cmml" xref="S4.Ex1.m1.7.7.7.4.1.1.1.2.1"></minus><cn id="S4.Ex1.m1.7.7.7.4.1.1.1.2.2.cmml" type="integer" xref="S4.Ex1.m1.7.7.7.4.1.1.1.2.2">1</cn><ci id="S4.Ex1.m1.7.7.7.4.1.1.1.2.3.cmml" xref="S4.Ex1.m1.7.7.7.4.1.1.1.2.3">𝑏</ci></apply><apply id="S4.Ex1.m1.7.7.7.4.1.1.1.3.cmml" xref="S4.Ex1.m1.7.7.7.4.1.1.1.3"><ci id="S4.Ex1.m1.7.7.7.4.1.1.1.3.1.cmml" xref="S4.Ex1.m1.7.7.7.4.1.1.1.3.1">⋅</ci><ci id="S4.Ex1.m1.7.7.7.4.1.1.1.3.2.cmml" xref="S4.Ex1.m1.7.7.7.4.1.1.1.3.2">𝑏</ci><apply id="S4.Ex1.m1.4.4.4.1.cmml" xref="S4.Ex1.m1.4.4.4.1"><divide id="S4.Ex1.m1.4.4.4.1.2.cmml" xref="S4.Ex1.m1.4.4.4.1"></divide><apply id="S4.Ex1.m1.4.4.4.1.1.2.cmml" xref="S4.Ex1.m1.4.4.4.1.1.3"><abs id="S4.Ex1.m1.4.4.4.1.1.2.1.cmml" xref="S4.Ex1.m1.4.4.4.1.1.3.1"></abs><ci id="S4.Ex1.m1.4.4.4.1.1.1.cmml" xref="S4.Ex1.m1.4.4.4.1.1.1">𝐷</ci></apply><ci id="S4.Ex1.m1.4.4.4.1.3a.cmml" xref="S4.Ex1.m1.4.4.4.1.3"><mtext id="S4.Ex1.m1.4.4.4.1.3.cmml" mathsize="70%" xref="S4.Ex1.m1.4.4.4.1.3">avgdl</mtext></ci></apply></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.Ex1.m1.10c">\text{score}(D,Q)=\sum_{i=1}^{n}\text{IDF}(q_{i})\cdot\frac{f(q_{i},D)\cdot(k_%
{1}+1)}{f(q_{i},D)+k_{1}\cdot\left(1-b+b\cdot\frac{|D|}{\text{avgdl}}\right)}</annotation><annotation encoding="application/x-llamapun" id="S4.Ex1.m1.10d">score ( italic_D , italic_Q ) = ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT IDF ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ⋅ divide start_ARG italic_f ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_D ) ⋅ ( italic_k start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT + 1 ) end_ARG start_ARG italic_f ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_D ) + italic_k start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT ⋅ ( 1 - italic_b + italic_b ⋅ divide start_ARG | italic_D | end_ARG start_ARG avgdl end_ARG ) end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S4.p10">
<p class="ltx_p" id="S4.p10.12">where <math alttext="f(q_{i},D)" class="ltx_Math" display="inline" id="S4.p10.1.m1.2"><semantics id="S4.p10.1.m1.2a"><mrow id="S4.p10.1.m1.2.2" xref="S4.p10.1.m1.2.2.cmml"><mi id="S4.p10.1.m1.2.2.3" xref="S4.p10.1.m1.2.2.3.cmml">f</mi><mo id="S4.p10.1.m1.2.2.2" xref="S4.p10.1.m1.2.2.2.cmml">⁢</mo><mrow id="S4.p10.1.m1.2.2.1.1" xref="S4.p10.1.m1.2.2.1.2.cmml"><mo id="S4.p10.1.m1.2.2.1.1.2" stretchy="false" xref="S4.p10.1.m1.2.2.1.2.cmml">(</mo><msub id="S4.p10.1.m1.2.2.1.1.1" xref="S4.p10.1.m1.2.2.1.1.1.cmml"><mi id="S4.p10.1.m1.2.2.1.1.1.2" xref="S4.p10.1.m1.2.2.1.1.1.2.cmml">q</mi><mi id="S4.p10.1.m1.2.2.1.1.1.3" xref="S4.p10.1.m1.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S4.p10.1.m1.2.2.1.1.3" xref="S4.p10.1.m1.2.2.1.2.cmml">,</mo><mi id="S4.p10.1.m1.1.1" xref="S4.p10.1.m1.1.1.cmml">D</mi><mo id="S4.p10.1.m1.2.2.1.1.4" stretchy="false" xref="S4.p10.1.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.p10.1.m1.2b"><apply id="S4.p10.1.m1.2.2.cmml" xref="S4.p10.1.m1.2.2"><times id="S4.p10.1.m1.2.2.2.cmml" xref="S4.p10.1.m1.2.2.2"></times><ci id="S4.p10.1.m1.2.2.3.cmml" xref="S4.p10.1.m1.2.2.3">𝑓</ci><interval closure="open" id="S4.p10.1.m1.2.2.1.2.cmml" xref="S4.p10.1.m1.2.2.1.1"><apply id="S4.p10.1.m1.2.2.1.1.1.cmml" xref="S4.p10.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S4.p10.1.m1.2.2.1.1.1.1.cmml" xref="S4.p10.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S4.p10.1.m1.2.2.1.1.1.2.cmml" xref="S4.p10.1.m1.2.2.1.1.1.2">𝑞</ci><ci id="S4.p10.1.m1.2.2.1.1.1.3.cmml" xref="S4.p10.1.m1.2.2.1.1.1.3">𝑖</ci></apply><ci id="S4.p10.1.m1.1.1.cmml" xref="S4.p10.1.m1.1.1">𝐷</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.1.m1.2c">f(q_{i},D)</annotation><annotation encoding="application/x-llamapun" id="S4.p10.1.m1.2d">italic_f ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_D )</annotation></semantics></math> is the number of times that the keyword <math alttext="q_{i}" class="ltx_Math" display="inline" id="S4.p10.2.m2.1"><semantics id="S4.p10.2.m2.1a"><msub id="S4.p10.2.m2.1.1" xref="S4.p10.2.m2.1.1.cmml"><mi id="S4.p10.2.m2.1.1.2" xref="S4.p10.2.m2.1.1.2.cmml">q</mi><mi id="S4.p10.2.m2.1.1.3" xref="S4.p10.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.p10.2.m2.1b"><apply id="S4.p10.2.m2.1.1.cmml" xref="S4.p10.2.m2.1.1"><csymbol cd="ambiguous" id="S4.p10.2.m2.1.1.1.cmml" xref="S4.p10.2.m2.1.1">subscript</csymbol><ci id="S4.p10.2.m2.1.1.2.cmml" xref="S4.p10.2.m2.1.1.2">𝑞</ci><ci id="S4.p10.2.m2.1.1.3.cmml" xref="S4.p10.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.2.m2.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="S4.p10.2.m2.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> occurs in the document <math alttext="D" class="ltx_Math" display="inline" id="S4.p10.3.m3.1"><semantics id="S4.p10.3.m3.1a"><mi id="S4.p10.3.m3.1.1" xref="S4.p10.3.m3.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S4.p10.3.m3.1b"><ci id="S4.p10.3.m3.1.1.cmml" xref="S4.p10.3.m3.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.3.m3.1c">D</annotation><annotation encoding="application/x-llamapun" id="S4.p10.3.m3.1d">italic_D</annotation></semantics></math>, <math alttext="|D|" class="ltx_Math" display="inline" id="S4.p10.4.m4.1"><semantics id="S4.p10.4.m4.1a"><mrow id="S4.p10.4.m4.1.2.2" xref="S4.p10.4.m4.1.2.1.cmml"><mo id="S4.p10.4.m4.1.2.2.1" stretchy="false" xref="S4.p10.4.m4.1.2.1.1.cmml">|</mo><mi id="S4.p10.4.m4.1.1" xref="S4.p10.4.m4.1.1.cmml">D</mi><mo id="S4.p10.4.m4.1.2.2.2" stretchy="false" xref="S4.p10.4.m4.1.2.1.1.cmml">|</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.p10.4.m4.1b"><apply id="S4.p10.4.m4.1.2.1.cmml" xref="S4.p10.4.m4.1.2.2"><abs id="S4.p10.4.m4.1.2.1.1.cmml" xref="S4.p10.4.m4.1.2.2.1"></abs><ci id="S4.p10.4.m4.1.1.cmml" xref="S4.p10.4.m4.1.1">𝐷</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.4.m4.1c">|D|</annotation><annotation encoding="application/x-llamapun" id="S4.p10.4.m4.1d">| italic_D |</annotation></semantics></math> is the length of the document <math alttext="D" class="ltx_Math" display="inline" id="S4.p10.5.m5.1"><semantics id="S4.p10.5.m5.1a"><mi id="S4.p10.5.m5.1.1" xref="S4.p10.5.m5.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S4.p10.5.m5.1b"><ci id="S4.p10.5.m5.1.1.cmml" xref="S4.p10.5.m5.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.5.m5.1c">D</annotation><annotation encoding="application/x-llamapun" id="S4.p10.5.m5.1d">italic_D</annotation></semantics></math> in words, and <span class="ltx_text ltx_markedasmath" id="S4.p10.12.1">avgdl</span> is the average document length in the text collection from which documents are drawn. <math alttext="k_{1}" class="ltx_Math" display="inline" id="S4.p10.7.m7.1"><semantics id="S4.p10.7.m7.1a"><msub id="S4.p10.7.m7.1.1" xref="S4.p10.7.m7.1.1.cmml"><mi id="S4.p10.7.m7.1.1.2" xref="S4.p10.7.m7.1.1.2.cmml">k</mi><mn id="S4.p10.7.m7.1.1.3" xref="S4.p10.7.m7.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S4.p10.7.m7.1b"><apply id="S4.p10.7.m7.1.1.cmml" xref="S4.p10.7.m7.1.1"><csymbol cd="ambiguous" id="S4.p10.7.m7.1.1.1.cmml" xref="S4.p10.7.m7.1.1">subscript</csymbol><ci id="S4.p10.7.m7.1.1.2.cmml" xref="S4.p10.7.m7.1.1.2">𝑘</ci><cn id="S4.p10.7.m7.1.1.3.cmml" type="integer" xref="S4.p10.7.m7.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.7.m7.1c">k_{1}</annotation><annotation encoding="application/x-llamapun" id="S4.p10.7.m7.1d">italic_k start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="b" class="ltx_Math" display="inline" id="S4.p10.8.m8.1"><semantics id="S4.p10.8.m8.1a"><mi id="S4.p10.8.m8.1.1" xref="S4.p10.8.m8.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S4.p10.8.m8.1b"><ci id="S4.p10.8.m8.1.1.cmml" xref="S4.p10.8.m8.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.8.m8.1c">b</annotation><annotation encoding="application/x-llamapun" id="S4.p10.8.m8.1d">italic_b</annotation></semantics></math> are free parameters. Aftering hyperameter tuning, we choose as <math alttext="k_{1}=1.2" class="ltx_Math" display="inline" id="S4.p10.9.m9.1"><semantics id="S4.p10.9.m9.1a"><mrow id="S4.p10.9.m9.1.1" xref="S4.p10.9.m9.1.1.cmml"><msub id="S4.p10.9.m9.1.1.2" xref="S4.p10.9.m9.1.1.2.cmml"><mi id="S4.p10.9.m9.1.1.2.2" xref="S4.p10.9.m9.1.1.2.2.cmml">k</mi><mn id="S4.p10.9.m9.1.1.2.3" xref="S4.p10.9.m9.1.1.2.3.cmml">1</mn></msub><mo id="S4.p10.9.m9.1.1.1" xref="S4.p10.9.m9.1.1.1.cmml">=</mo><mn id="S4.p10.9.m9.1.1.3" xref="S4.p10.9.m9.1.1.3.cmml">1.2</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.p10.9.m9.1b"><apply id="S4.p10.9.m9.1.1.cmml" xref="S4.p10.9.m9.1.1"><eq id="S4.p10.9.m9.1.1.1.cmml" xref="S4.p10.9.m9.1.1.1"></eq><apply id="S4.p10.9.m9.1.1.2.cmml" xref="S4.p10.9.m9.1.1.2"><csymbol cd="ambiguous" id="S4.p10.9.m9.1.1.2.1.cmml" xref="S4.p10.9.m9.1.1.2">subscript</csymbol><ci id="S4.p10.9.m9.1.1.2.2.cmml" xref="S4.p10.9.m9.1.1.2.2">𝑘</ci><cn id="S4.p10.9.m9.1.1.2.3.cmml" type="integer" xref="S4.p10.9.m9.1.1.2.3">1</cn></apply><cn id="S4.p10.9.m9.1.1.3.cmml" type="float" xref="S4.p10.9.m9.1.1.3">1.2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.9.m9.1c">k_{1}=1.2</annotation><annotation encoding="application/x-llamapun" id="S4.p10.9.m9.1d">italic_k start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT = 1.2</annotation></semantics></math> and <math alttext="b=0.65" class="ltx_Math" display="inline" id="S4.p10.10.m10.1"><semantics id="S4.p10.10.m10.1a"><mrow id="S4.p10.10.m10.1.1" xref="S4.p10.10.m10.1.1.cmml"><mi id="S4.p10.10.m10.1.1.2" xref="S4.p10.10.m10.1.1.2.cmml">b</mi><mo id="S4.p10.10.m10.1.1.1" xref="S4.p10.10.m10.1.1.1.cmml">=</mo><mn id="S4.p10.10.m10.1.1.3" xref="S4.p10.10.m10.1.1.3.cmml">0.65</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.p10.10.m10.1b"><apply id="S4.p10.10.m10.1.1.cmml" xref="S4.p10.10.m10.1.1"><eq id="S4.p10.10.m10.1.1.1.cmml" xref="S4.p10.10.m10.1.1.1"></eq><ci id="S4.p10.10.m10.1.1.2.cmml" xref="S4.p10.10.m10.1.1.2">𝑏</ci><cn id="S4.p10.10.m10.1.1.3.cmml" type="float" xref="S4.p10.10.m10.1.1.3">0.65</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.10.m10.1c">b=0.65</annotation><annotation encoding="application/x-llamapun" id="S4.p10.10.m10.1d">italic_b = 0.65</annotation></semantics></math>. <math alttext="\text{IDF}(q_{i})" class="ltx_Math" display="inline" id="S4.p10.11.m11.1"><semantics id="S4.p10.11.m11.1a"><mrow id="S4.p10.11.m11.1.1" xref="S4.p10.11.m11.1.1.cmml"><mtext id="S4.p10.11.m11.1.1.3" xref="S4.p10.11.m11.1.1.3a.cmml">IDF</mtext><mo id="S4.p10.11.m11.1.1.2" xref="S4.p10.11.m11.1.1.2.cmml">⁢</mo><mrow id="S4.p10.11.m11.1.1.1.1" xref="S4.p10.11.m11.1.1.1.1.1.cmml"><mo id="S4.p10.11.m11.1.1.1.1.2" stretchy="false" xref="S4.p10.11.m11.1.1.1.1.1.cmml">(</mo><msub id="S4.p10.11.m11.1.1.1.1.1" xref="S4.p10.11.m11.1.1.1.1.1.cmml"><mi id="S4.p10.11.m11.1.1.1.1.1.2" xref="S4.p10.11.m11.1.1.1.1.1.2.cmml">q</mi><mi id="S4.p10.11.m11.1.1.1.1.1.3" xref="S4.p10.11.m11.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.p10.11.m11.1.1.1.1.3" stretchy="false" xref="S4.p10.11.m11.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.p10.11.m11.1b"><apply id="S4.p10.11.m11.1.1.cmml" xref="S4.p10.11.m11.1.1"><times id="S4.p10.11.m11.1.1.2.cmml" xref="S4.p10.11.m11.1.1.2"></times><ci id="S4.p10.11.m11.1.1.3a.cmml" xref="S4.p10.11.m11.1.1.3"><mtext id="S4.p10.11.m11.1.1.3.cmml" xref="S4.p10.11.m11.1.1.3">IDF</mtext></ci><apply id="S4.p10.11.m11.1.1.1.1.1.cmml" xref="S4.p10.11.m11.1.1.1.1"><csymbol cd="ambiguous" id="S4.p10.11.m11.1.1.1.1.1.1.cmml" xref="S4.p10.11.m11.1.1.1.1">subscript</csymbol><ci id="S4.p10.11.m11.1.1.1.1.1.2.cmml" xref="S4.p10.11.m11.1.1.1.1.1.2">𝑞</ci><ci id="S4.p10.11.m11.1.1.1.1.1.3.cmml" xref="S4.p10.11.m11.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.11.m11.1c">\text{IDF}(q_{i})</annotation><annotation encoding="application/x-llamapun" id="S4.p10.11.m11.1d">IDF ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> is the IDF (inverse document frequency) weight of the query term <math alttext="q_{i}" class="ltx_Math" display="inline" id="S4.p10.12.m12.1"><semantics id="S4.p10.12.m12.1a"><msub id="S4.p10.12.m12.1.1" xref="S4.p10.12.m12.1.1.cmml"><mi id="S4.p10.12.m12.1.1.2" xref="S4.p10.12.m12.1.1.2.cmml">q</mi><mi id="S4.p10.12.m12.1.1.3" xref="S4.p10.12.m12.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.p10.12.m12.1b"><apply id="S4.p10.12.m12.1.1.cmml" xref="S4.p10.12.m12.1.1"><csymbol cd="ambiguous" id="S4.p10.12.m12.1.1.1.cmml" xref="S4.p10.12.m12.1.1">subscript</csymbol><ci id="S4.p10.12.m12.1.1.2.cmml" xref="S4.p10.12.m12.1.1.2">𝑞</ci><ci id="S4.p10.12.m12.1.1.3.cmml" xref="S4.p10.12.m12.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p10.12.m12.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="S4.p10.12.m12.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. It is usually computed as:</p>
</div>
<div class="ltx_para" id="S4.p11">
<table class="ltx_equation ltx_eqn_table" id="S4.Ex2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\text{IDF}(q_{i})=\ln\left(\frac{N-n(q_{i})+0.5}{n(q_{i})+0.5}+1\right)" class="ltx_Math" display="block" id="S4.Ex2.m1.5"><semantics id="S4.Ex2.m1.5a"><mrow id="S4.Ex2.m1.5.5" xref="S4.Ex2.m1.5.5.cmml"><mrow id="S4.Ex2.m1.4.4.1" xref="S4.Ex2.m1.4.4.1.cmml"><mtext id="S4.Ex2.m1.4.4.1.3" xref="S4.Ex2.m1.4.4.1.3a.cmml">IDF</mtext><mo id="S4.Ex2.m1.4.4.1.2" xref="S4.Ex2.m1.4.4.1.2.cmml">⁢</mo><mrow id="S4.Ex2.m1.4.4.1.1.1" xref="S4.Ex2.m1.4.4.1.1.1.1.cmml"><mo id="S4.Ex2.m1.4.4.1.1.1.2" stretchy="false" xref="S4.Ex2.m1.4.4.1.1.1.1.cmml">(</mo><msub id="S4.Ex2.m1.4.4.1.1.1.1" xref="S4.Ex2.m1.4.4.1.1.1.1.cmml"><mi id="S4.Ex2.m1.4.4.1.1.1.1.2" xref="S4.Ex2.m1.4.4.1.1.1.1.2.cmml">q</mi><mi id="S4.Ex2.m1.4.4.1.1.1.1.3" xref="S4.Ex2.m1.4.4.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.Ex2.m1.4.4.1.1.1.3" stretchy="false" xref="S4.Ex2.m1.4.4.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S4.Ex2.m1.5.5.3" xref="S4.Ex2.m1.5.5.3.cmml">=</mo><mrow id="S4.Ex2.m1.5.5.2.1" xref="S4.Ex2.m1.5.5.2.2.cmml"><mi id="S4.Ex2.m1.3.3" xref="S4.Ex2.m1.3.3.cmml">ln</mi><mo id="S4.Ex2.m1.5.5.2.1a" xref="S4.Ex2.m1.5.5.2.2.cmml">⁡</mo><mrow id="S4.Ex2.m1.5.5.2.1.1" xref="S4.Ex2.m1.5.5.2.2.cmml"><mo id="S4.Ex2.m1.5.5.2.1.1.2" xref="S4.Ex2.m1.5.5.2.2.cmml">(</mo><mrow id="S4.Ex2.m1.5.5.2.1.1.1" xref="S4.Ex2.m1.5.5.2.1.1.1.cmml"><mfrac id="S4.Ex2.m1.2.2" xref="S4.Ex2.m1.2.2.cmml"><mrow id="S4.Ex2.m1.1.1.1" xref="S4.Ex2.m1.1.1.1.cmml"><mrow id="S4.Ex2.m1.1.1.1.1" xref="S4.Ex2.m1.1.1.1.1.cmml"><mi id="S4.Ex2.m1.1.1.1.1.3" xref="S4.Ex2.m1.1.1.1.1.3.cmml">N</mi><mo id="S4.Ex2.m1.1.1.1.1.2" xref="S4.Ex2.m1.1.1.1.1.2.cmml">−</mo><mrow id="S4.Ex2.m1.1.1.1.1.1" xref="S4.Ex2.m1.1.1.1.1.1.cmml"><mi id="S4.Ex2.m1.1.1.1.1.1.3" xref="S4.Ex2.m1.1.1.1.1.1.3.cmml">n</mi><mo id="S4.Ex2.m1.1.1.1.1.1.2" xref="S4.Ex2.m1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S4.Ex2.m1.1.1.1.1.1.1.1" xref="S4.Ex2.m1.1.1.1.1.1.1.1.1.cmml"><mo id="S4.Ex2.m1.1.1.1.1.1.1.1.2" stretchy="false" xref="S4.Ex2.m1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="S4.Ex2.m1.1.1.1.1.1.1.1.1" xref="S4.Ex2.m1.1.1.1.1.1.1.1.1.cmml"><mi id="S4.Ex2.m1.1.1.1.1.1.1.1.1.2" xref="S4.Ex2.m1.1.1.1.1.1.1.1.1.2.cmml">q</mi><mi id="S4.Ex2.m1.1.1.1.1.1.1.1.1.3" xref="S4.Ex2.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.Ex2.m1.1.1.1.1.1.1.1.3" stretchy="false" xref="S4.Ex2.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S4.Ex2.m1.1.1.1.2" xref="S4.Ex2.m1.1.1.1.2.cmml">+</mo><mn id="S4.Ex2.m1.1.1.1.3" xref="S4.Ex2.m1.1.1.1.3.cmml">0.5</mn></mrow><mrow id="S4.Ex2.m1.2.2.2" xref="S4.Ex2.m1.2.2.2.cmml"><mrow id="S4.Ex2.m1.2.2.2.1" xref="S4.Ex2.m1.2.2.2.1.cmml"><mi id="S4.Ex2.m1.2.2.2.1.3" xref="S4.Ex2.m1.2.2.2.1.3.cmml">n</mi><mo id="S4.Ex2.m1.2.2.2.1.2" xref="S4.Ex2.m1.2.2.2.1.2.cmml">⁢</mo><mrow id="S4.Ex2.m1.2.2.2.1.1.1" xref="S4.Ex2.m1.2.2.2.1.1.1.1.cmml"><mo id="S4.Ex2.m1.2.2.2.1.1.1.2" stretchy="false" xref="S4.Ex2.m1.2.2.2.1.1.1.1.cmml">(</mo><msub id="S4.Ex2.m1.2.2.2.1.1.1.1" xref="S4.Ex2.m1.2.2.2.1.1.1.1.cmml"><mi id="S4.Ex2.m1.2.2.2.1.1.1.1.2" xref="S4.Ex2.m1.2.2.2.1.1.1.1.2.cmml">q</mi><mi id="S4.Ex2.m1.2.2.2.1.1.1.1.3" xref="S4.Ex2.m1.2.2.2.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.Ex2.m1.2.2.2.1.1.1.3" stretchy="false" xref="S4.Ex2.m1.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S4.Ex2.m1.2.2.2.2" xref="S4.Ex2.m1.2.2.2.2.cmml">+</mo><mn id="S4.Ex2.m1.2.2.2.3" xref="S4.Ex2.m1.2.2.2.3.cmml">0.5</mn></mrow></mfrac><mo id="S4.Ex2.m1.5.5.2.1.1.1.1" xref="S4.Ex2.m1.5.5.2.1.1.1.1.cmml">+</mo><mn id="S4.Ex2.m1.5.5.2.1.1.1.2" xref="S4.Ex2.m1.5.5.2.1.1.1.2.cmml">1</mn></mrow><mo id="S4.Ex2.m1.5.5.2.1.1.3" xref="S4.Ex2.m1.5.5.2.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.Ex2.m1.5b"><apply id="S4.Ex2.m1.5.5.cmml" xref="S4.Ex2.m1.5.5"><eq id="S4.Ex2.m1.5.5.3.cmml" xref="S4.Ex2.m1.5.5.3"></eq><apply id="S4.Ex2.m1.4.4.1.cmml" xref="S4.Ex2.m1.4.4.1"><times id="S4.Ex2.m1.4.4.1.2.cmml" xref="S4.Ex2.m1.4.4.1.2"></times><ci id="S4.Ex2.m1.4.4.1.3a.cmml" xref="S4.Ex2.m1.4.4.1.3"><mtext id="S4.Ex2.m1.4.4.1.3.cmml" xref="S4.Ex2.m1.4.4.1.3">IDF</mtext></ci><apply id="S4.Ex2.m1.4.4.1.1.1.1.cmml" xref="S4.Ex2.m1.4.4.1.1.1"><csymbol cd="ambiguous" id="S4.Ex2.m1.4.4.1.1.1.1.1.cmml" xref="S4.Ex2.m1.4.4.1.1.1">subscript</csymbol><ci id="S4.Ex2.m1.4.4.1.1.1.1.2.cmml" xref="S4.Ex2.m1.4.4.1.1.1.1.2">𝑞</ci><ci id="S4.Ex2.m1.4.4.1.1.1.1.3.cmml" xref="S4.Ex2.m1.4.4.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S4.Ex2.m1.5.5.2.2.cmml" xref="S4.Ex2.m1.5.5.2.1"><ln id="S4.Ex2.m1.3.3.cmml" xref="S4.Ex2.m1.3.3"></ln><apply id="S4.Ex2.m1.5.5.2.1.1.1.cmml" xref="S4.Ex2.m1.5.5.2.1.1.1"><plus id="S4.Ex2.m1.5.5.2.1.1.1.1.cmml" xref="S4.Ex2.m1.5.5.2.1.1.1.1"></plus><apply id="S4.Ex2.m1.2.2.cmml" xref="S4.Ex2.m1.2.2"><divide id="S4.Ex2.m1.2.2.3.cmml" xref="S4.Ex2.m1.2.2"></divide><apply id="S4.Ex2.m1.1.1.1.cmml" xref="S4.Ex2.m1.1.1.1"><plus id="S4.Ex2.m1.1.1.1.2.cmml" xref="S4.Ex2.m1.1.1.1.2"></plus><apply id="S4.Ex2.m1.1.1.1.1.cmml" xref="S4.Ex2.m1.1.1.1.1"><minus id="S4.Ex2.m1.1.1.1.1.2.cmml" xref="S4.Ex2.m1.1.1.1.1.2"></minus><ci id="S4.Ex2.m1.1.1.1.1.3.cmml" xref="S4.Ex2.m1.1.1.1.1.3">𝑁</ci><apply id="S4.Ex2.m1.1.1.1.1.1.cmml" xref="S4.Ex2.m1.1.1.1.1.1"><times id="S4.Ex2.m1.1.1.1.1.1.2.cmml" xref="S4.Ex2.m1.1.1.1.1.1.2"></times><ci id="S4.Ex2.m1.1.1.1.1.1.3.cmml" xref="S4.Ex2.m1.1.1.1.1.1.3">𝑛</ci><apply id="S4.Ex2.m1.1.1.1.1.1.1.1.1.cmml" xref="S4.Ex2.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.Ex2.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.Ex2.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S4.Ex2.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.Ex2.m1.1.1.1.1.1.1.1.1.2">𝑞</ci><ci id="S4.Ex2.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.Ex2.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply><cn id="S4.Ex2.m1.1.1.1.3.cmml" type="float" xref="S4.Ex2.m1.1.1.1.3">0.5</cn></apply><apply id="S4.Ex2.m1.2.2.2.cmml" xref="S4.Ex2.m1.2.2.2"><plus id="S4.Ex2.m1.2.2.2.2.cmml" xref="S4.Ex2.m1.2.2.2.2"></plus><apply id="S4.Ex2.m1.2.2.2.1.cmml" xref="S4.Ex2.m1.2.2.2.1"><times id="S4.Ex2.m1.2.2.2.1.2.cmml" xref="S4.Ex2.m1.2.2.2.1.2"></times><ci id="S4.Ex2.m1.2.2.2.1.3.cmml" xref="S4.Ex2.m1.2.2.2.1.3">𝑛</ci><apply id="S4.Ex2.m1.2.2.2.1.1.1.1.cmml" xref="S4.Ex2.m1.2.2.2.1.1.1"><csymbol cd="ambiguous" id="S4.Ex2.m1.2.2.2.1.1.1.1.1.cmml" xref="S4.Ex2.m1.2.2.2.1.1.1">subscript</csymbol><ci id="S4.Ex2.m1.2.2.2.1.1.1.1.2.cmml" xref="S4.Ex2.m1.2.2.2.1.1.1.1.2">𝑞</ci><ci id="S4.Ex2.m1.2.2.2.1.1.1.1.3.cmml" xref="S4.Ex2.m1.2.2.2.1.1.1.1.3">𝑖</ci></apply></apply><cn id="S4.Ex2.m1.2.2.2.3.cmml" type="float" xref="S4.Ex2.m1.2.2.2.3">0.5</cn></apply></apply><cn id="S4.Ex2.m1.5.5.2.1.1.1.2.cmml" type="integer" xref="S4.Ex2.m1.5.5.2.1.1.1.2">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.Ex2.m1.5c">\text{IDF}(q_{i})=\ln\left(\frac{N-n(q_{i})+0.5}{n(q_{i})+0.5}+1\right)</annotation><annotation encoding="application/x-llamapun" id="S4.Ex2.m1.5d">IDF ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = roman_ln ( divide start_ARG italic_N - italic_n ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) + 0.5 end_ARG start_ARG italic_n ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) + 0.5 end_ARG + 1 )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S4.p12">
<p class="ltx_p" id="S4.p12.3">where <math alttext="N" class="ltx_Math" display="inline" id="S4.p12.1.m1.1"><semantics id="S4.p12.1.m1.1a"><mi id="S4.p12.1.m1.1.1" xref="S4.p12.1.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S4.p12.1.m1.1b"><ci id="S4.p12.1.m1.1.1.cmml" xref="S4.p12.1.m1.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p12.1.m1.1c">N</annotation><annotation encoding="application/x-llamapun" id="S4.p12.1.m1.1d">italic_N</annotation></semantics></math> is the total number of documents in the collection, and <math alttext="n(q_{i})" class="ltx_Math" display="inline" id="S4.p12.2.m2.1"><semantics id="S4.p12.2.m2.1a"><mrow id="S4.p12.2.m2.1.1" xref="S4.p12.2.m2.1.1.cmml"><mi id="S4.p12.2.m2.1.1.3" xref="S4.p12.2.m2.1.1.3.cmml">n</mi><mo id="S4.p12.2.m2.1.1.2" xref="S4.p12.2.m2.1.1.2.cmml">⁢</mo><mrow id="S4.p12.2.m2.1.1.1.1" xref="S4.p12.2.m2.1.1.1.1.1.cmml"><mo id="S4.p12.2.m2.1.1.1.1.2" stretchy="false" xref="S4.p12.2.m2.1.1.1.1.1.cmml">(</mo><msub id="S4.p12.2.m2.1.1.1.1.1" xref="S4.p12.2.m2.1.1.1.1.1.cmml"><mi id="S4.p12.2.m2.1.1.1.1.1.2" xref="S4.p12.2.m2.1.1.1.1.1.2.cmml">q</mi><mi id="S4.p12.2.m2.1.1.1.1.1.3" xref="S4.p12.2.m2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S4.p12.2.m2.1.1.1.1.3" stretchy="false" xref="S4.p12.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.p12.2.m2.1b"><apply id="S4.p12.2.m2.1.1.cmml" xref="S4.p12.2.m2.1.1"><times id="S4.p12.2.m2.1.1.2.cmml" xref="S4.p12.2.m2.1.1.2"></times><ci id="S4.p12.2.m2.1.1.3.cmml" xref="S4.p12.2.m2.1.1.3">𝑛</ci><apply id="S4.p12.2.m2.1.1.1.1.1.cmml" xref="S4.p12.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S4.p12.2.m2.1.1.1.1.1.1.cmml" xref="S4.p12.2.m2.1.1.1.1">subscript</csymbol><ci id="S4.p12.2.m2.1.1.1.1.1.2.cmml" xref="S4.p12.2.m2.1.1.1.1.1.2">𝑞</ci><ci id="S4.p12.2.m2.1.1.1.1.1.3.cmml" xref="S4.p12.2.m2.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p12.2.m2.1c">n(q_{i})</annotation><annotation encoding="application/x-llamapun" id="S4.p12.2.m2.1d">italic_n ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> is the number of documents containing <math alttext="q_{i}" class="ltx_Math" display="inline" id="S4.p12.3.m3.1"><semantics id="S4.p12.3.m3.1a"><msub id="S4.p12.3.m3.1.1" xref="S4.p12.3.m3.1.1.cmml"><mi id="S4.p12.3.m3.1.1.2" xref="S4.p12.3.m3.1.1.2.cmml">q</mi><mi id="S4.p12.3.m3.1.1.3" xref="S4.p12.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S4.p12.3.m3.1b"><apply id="S4.p12.3.m3.1.1.cmml" xref="S4.p12.3.m3.1.1"><csymbol cd="ambiguous" id="S4.p12.3.m3.1.1.1.cmml" xref="S4.p12.3.m3.1.1">subscript</csymbol><ci id="S4.p12.3.m3.1.1.2.cmml" xref="S4.p12.3.m3.1.1.2">𝑞</ci><ci id="S4.p12.3.m3.1.1.3.cmml" xref="S4.p12.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p12.3.m3.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="S4.p12.3.m3.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S4.p13">
<p class="ltx_p" id="S4.p13.1">However, this method has a significant limitation: it overlooks the semantic similarity between the query and the retrieved documents. In other words, BM25 is only effective when tokens, or words, in the query match exactly against the documents in the corpus, which might not necessarily be the case since there is little control over the way users writes their queries.</p>
</div>
<div class="ltx_para" id="S4.p14">
<p class="ltx_p" id="S4.p14.1"><span class="ltx_text ltx_font_bold" id="S4.p14.1.1">Vector Search for retrieval</span></p>
</div>
<div class="ltx_para" id="S4.p15">
<p class="ltx_p" id="S4.p15.1">To address the aforementioned shortcomings of the BM25 search algorithm, dense Vector Search, also known as Semantic Search, has been proposed, particularly to improve search efficiency over methods like cross-encoders. For our implementation, we utilize the best model for Vietnamese embeddings, the Vietnamese Biencoder from BKAI labs, due to the fact that this model boasts an impressive performance when working on legal corpora, such as the Zalo dataset.</p>
</div>
<div class="ltx_para" id="S4.p16">
<p class="ltx_p" id="S4.p16.1"><span class="ltx_text ltx_font_bold" id="S4.p16.1.1">Combining BM25 Search and Vector Search</span></p>
</div>
<div class="ltx_para" id="S4.p17">
<p class="ltx_p" id="S4.p17.1">Though in the age of Deep Learning, one might argue that the use of dense embeddings will outperform traditional keyword-based methods; in our project, we would argue that in datasets with lengthy or ambiguous contexts, the encoding model’s performance diminishes, and keyword search proves to be a valuable fallback. Subsequently, the scores of the retrieved documents, from both keyword search and semantic search, are normalized to the range [0,1] and combined in a weighted fashion to generate the final results. Therefore, achieving a balance between these methods yields the best efficiency. For balance, we assign a weight of 0.5 to each. An example of the normalizing and combining approach can be seen in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S4.T2" title="TABLE II ‣ IV THE SYSTEM ARCHITECTURE ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_tag">II</span></a> (original scores) and Table <a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S4.T3" title="TABLE III ‣ IV THE SYSTEM ARCHITECTURE ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_tag">III</span></a> (normalized score). Note that the normalized score is calculated as follows.</p>
</div>
<div class="ltx_para" id="S4.p18">
<table class="ltx_equation ltx_eqn_table" id="S4.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\text{normalized\_score}=\frac{\text{score}-\min(\text{score})}{\max(\text{%
score})-\min(\text{score})}" class="ltx_Math" display="block" id="S4.E1.m1.6"><semantics id="S4.E1.m1.6a"><mrow id="S4.E1.m1.6.7" xref="S4.E1.m1.6.7.cmml"><mtext id="S4.E1.m1.6.7.2" xref="S4.E1.m1.6.7.2a.cmml">normalized_score</mtext><mo id="S4.E1.m1.6.7.1" xref="S4.E1.m1.6.7.1.cmml">=</mo><mfrac id="S4.E1.m1.6.6" xref="S4.E1.m1.6.6.cmml"><mrow id="S4.E1.m1.2.2.2" xref="S4.E1.m1.2.2.2.cmml"><mtext id="S4.E1.m1.2.2.2.4" xref="S4.E1.m1.2.2.2.4a.cmml">score</mtext><mo id="S4.E1.m1.2.2.2.3" xref="S4.E1.m1.2.2.2.3.cmml">−</mo><mrow id="S4.E1.m1.2.2.2.5.2" xref="S4.E1.m1.2.2.2.5.1.cmml"><mi id="S4.E1.m1.1.1.1.1" xref="S4.E1.m1.1.1.1.1.cmml">min</mi><mo id="S4.E1.m1.2.2.2.5.2a" xref="S4.E1.m1.2.2.2.5.1.cmml">⁡</mo><mrow id="S4.E1.m1.2.2.2.5.2.1" xref="S4.E1.m1.2.2.2.5.1.cmml"><mo id="S4.E1.m1.2.2.2.5.2.1.1" stretchy="false" xref="S4.E1.m1.2.2.2.5.1.cmml">(</mo><mtext id="S4.E1.m1.2.2.2.2" xref="S4.E1.m1.2.2.2.2a.cmml">score</mtext><mo id="S4.E1.m1.2.2.2.5.2.1.2" stretchy="false" xref="S4.E1.m1.2.2.2.5.1.cmml">)</mo></mrow></mrow></mrow><mrow id="S4.E1.m1.6.6.6" xref="S4.E1.m1.6.6.6.cmml"><mrow id="S4.E1.m1.6.6.6.6.2" xref="S4.E1.m1.6.6.6.6.1.cmml"><mi id="S4.E1.m1.3.3.3.1" xref="S4.E1.m1.3.3.3.1.cmml">max</mi><mo id="S4.E1.m1.6.6.6.6.2a" xref="S4.E1.m1.6.6.6.6.1.cmml">⁡</mo><mrow id="S4.E1.m1.6.6.6.6.2.1" xref="S4.E1.m1.6.6.6.6.1.cmml"><mo id="S4.E1.m1.6.6.6.6.2.1.1" stretchy="false" xref="S4.E1.m1.6.6.6.6.1.cmml">(</mo><mtext id="S4.E1.m1.4.4.4.2" xref="S4.E1.m1.4.4.4.2a.cmml">score</mtext><mo id="S4.E1.m1.6.6.6.6.2.1.2" stretchy="false" xref="S4.E1.m1.6.6.6.6.1.cmml">)</mo></mrow></mrow><mo id="S4.E1.m1.6.6.6.5" xref="S4.E1.m1.6.6.6.5.cmml">−</mo><mrow id="S4.E1.m1.6.6.6.7.2" xref="S4.E1.m1.6.6.6.7.1.cmml"><mi id="S4.E1.m1.5.5.5.3" xref="S4.E1.m1.5.5.5.3.cmml">min</mi><mo id="S4.E1.m1.6.6.6.7.2a" xref="S4.E1.m1.6.6.6.7.1.cmml">⁡</mo><mrow id="S4.E1.m1.6.6.6.7.2.1" xref="S4.E1.m1.6.6.6.7.1.cmml"><mo id="S4.E1.m1.6.6.6.7.2.1.1" stretchy="false" xref="S4.E1.m1.6.6.6.7.1.cmml">(</mo><mtext id="S4.E1.m1.6.6.6.4" xref="S4.E1.m1.6.6.6.4a.cmml">score</mtext><mo id="S4.E1.m1.6.6.6.7.2.1.2" stretchy="false" xref="S4.E1.m1.6.6.6.7.1.cmml">)</mo></mrow></mrow></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S4.E1.m1.6b"><apply id="S4.E1.m1.6.7.cmml" xref="S4.E1.m1.6.7"><eq id="S4.E1.m1.6.7.1.cmml" xref="S4.E1.m1.6.7.1"></eq><ci id="S4.E1.m1.6.7.2a.cmml" xref="S4.E1.m1.6.7.2"><mtext id="S4.E1.m1.6.7.2.cmml" xref="S4.E1.m1.6.7.2">normalized_score</mtext></ci><apply id="S4.E1.m1.6.6.cmml" xref="S4.E1.m1.6.6"><divide id="S4.E1.m1.6.6.7.cmml" xref="S4.E1.m1.6.6"></divide><apply id="S4.E1.m1.2.2.2.cmml" xref="S4.E1.m1.2.2.2"><minus id="S4.E1.m1.2.2.2.3.cmml" xref="S4.E1.m1.2.2.2.3"></minus><ci id="S4.E1.m1.2.2.2.4a.cmml" xref="S4.E1.m1.2.2.2.4"><mtext id="S4.E1.m1.2.2.2.4.cmml" xref="S4.E1.m1.2.2.2.4">score</mtext></ci><apply id="S4.E1.m1.2.2.2.5.1.cmml" xref="S4.E1.m1.2.2.2.5.2"><min id="S4.E1.m1.1.1.1.1.cmml" xref="S4.E1.m1.1.1.1.1"></min><ci id="S4.E1.m1.2.2.2.2a.cmml" xref="S4.E1.m1.2.2.2.2"><mtext id="S4.E1.m1.2.2.2.2.cmml" xref="S4.E1.m1.2.2.2.2">score</mtext></ci></apply></apply><apply id="S4.E1.m1.6.6.6.cmml" xref="S4.E1.m1.6.6.6"><minus id="S4.E1.m1.6.6.6.5.cmml" xref="S4.E1.m1.6.6.6.5"></minus><apply id="S4.E1.m1.6.6.6.6.1.cmml" xref="S4.E1.m1.6.6.6.6.2"><max id="S4.E1.m1.3.3.3.1.cmml" xref="S4.E1.m1.3.3.3.1"></max><ci id="S4.E1.m1.4.4.4.2a.cmml" xref="S4.E1.m1.4.4.4.2"><mtext id="S4.E1.m1.4.4.4.2.cmml" xref="S4.E1.m1.4.4.4.2">score</mtext></ci></apply><apply id="S4.E1.m1.6.6.6.7.1.cmml" xref="S4.E1.m1.6.6.6.7.2"><min id="S4.E1.m1.5.5.5.3.cmml" xref="S4.E1.m1.5.5.5.3"></min><ci id="S4.E1.m1.6.6.6.4a.cmml" xref="S4.E1.m1.6.6.6.4"><mtext id="S4.E1.m1.6.6.6.4.cmml" xref="S4.E1.m1.6.6.6.4">score</mtext></ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E1.m1.6c">\text{normalized\_score}=\frac{\text{score}-\min(\text{score})}{\max(\text{%
score})-\min(\text{score})}</annotation><annotation encoding="application/x-llamapun" id="S4.E1.m1.6d">normalized_score = divide start_ARG score - roman_min ( score ) end_ARG start_ARG roman_max ( score ) - roman_min ( score ) end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<figure class="ltx_table" id="S4.T2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE II: </span>Search Results with Original Scores</figcaption>
<p class="ltx_p ltx_align_center" id="S4.T2.1"><span class="ltx_text" id="S4.T2.1.1">
<span class="ltx_inline-block ltx_transformed_outer" id="S4.T2.1.1.1" style="width:433.6pt;height:357.5pt;vertical-align:-1.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="S4.T2.1.1.1.1"><span class="ltx_text" id="S4.T2.1.1.1.1.1">
<span class="ltx_tabular ltx_align_middle" id="S4.T2.1.1.1.1.1.1">
<span class="ltx_tr" id="S4.T2.1.1.1.1.1.1.1">
<span class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.1.1.1.1.1.1">Search Type</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.1.2.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.1.2.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.1.1.1.1.2.1.1.1">(id): score</span></span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.1.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.1.3.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.1.3.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.1.1.1.1.3.1.1.1">(id): score</span></span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.1.4">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.1.4.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.1.4.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.1.1.1.1.4.1.1.1">(id): score</span></span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.1.5">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.1.5.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.1.5.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.1.1.1.1.5.1.1.1">(id): score</span></span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.1.6">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.1.6.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.1.6.1.1"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.1.1.1.1.6.1.1.1">(id): score</span></span>
</span></span></span>
<span class="ltx_tr" id="S4.T2.1.1.1.1.1.1.2">
<span class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.2.1">Keyword</span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.2.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.2.2.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.2.2.1.1">(1): 5</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.2.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.2.3.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.2.3.1.1">(0): 2.6</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.2.4">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.2.4.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.2.4.1.1">(2): 2.3</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.2.5">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.2.5.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.2.5.1.1">(4): 0.2</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.2.6">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.2.6.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.2.6.1.1">(3): 0.09</span>
</span></span></span>
<span class="ltx_tr" id="S4.T2.1.1.1.1.1.1.3">
<span class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.3.1">Vector</span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.3.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.3.2.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.3.2.1.1">(2): 0.6</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.3.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.3.3.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.3.3.1.1">(4): 0.598</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.3.4">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.3.4.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.3.4.1.1">(0): 0.596</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.3.5">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.3.5.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.3.5.1.1">(1): 0.594</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T2.1.1.1.1.1.1.3.6">
<span class="ltx_inline-block ltx_align_top" id="S4.T2.1.1.1.1.1.1.3.6.1">
<span class="ltx_p" id="S4.T2.1.1.1.1.1.1.3.6.1.1">(3): 0.009</span>
</span></span></span>
</span></span></span>
</span></span></span></p>
</figure>
<figure class="ltx_table" id="S4.T3">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE III: </span>Search Results with Normalized Scores</figcaption>
<p class="ltx_p ltx_align_center" id="S4.T3.1"><span class="ltx_text" id="S4.T3.1.1">
<span class="ltx_inline-block ltx_transformed_outer" id="S4.T3.1.1.1" style="width:433.6pt;height:369.5pt;vertical-align:-1.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="S4.T3.1.1.1.1"><span class="ltx_text" id="S4.T3.1.1.1.1.1">
<span class="ltx_tabular ltx_align_middle" id="S4.T3.1.1.1.1.1.1">
<span class="ltx_tr" id="S4.T3.1.1.1.1.1.1.1">
<span class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.1.1.1.1.1.1">Search Type</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.1.2.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.1.2.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.1.1.1.1.2.1.1.1">(id): score</span></span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.1.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.1.3.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.1.3.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.1.1.1.1.3.1.1.1">(id): score</span></span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.1.4">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.1.4.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.1.4.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.1.1.1.1.4.1.1.1">(id): score</span></span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.1.5">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.1.5.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.1.5.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.1.1.1.1.5.1.1.1">(id): score</span></span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.1.6">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.1.6.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.1.6.1.1"><span class="ltx_text ltx_font_bold" id="S4.T3.1.1.1.1.1.1.1.6.1.1.1">(id): score</span></span>
</span></span></span>
<span class="ltx_tr" id="S4.T3.1.1.1.1.1.1.2">
<span class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.2.1">Keyword</span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.2.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.2.2.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.2.2.1.1">(1): 1.0</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.2.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.2.3.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.2.3.1.1">(0): 0.511</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.2.4">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.2.4.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.2.4.1.1">(2): 0.450</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.2.5">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.2.5.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.2.5.1.1">(4): 0.022</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.2.6">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.2.6.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.2.6.1.1">(3): 0.0</span>
</span></span></span>
<span class="ltx_tr" id="S4.T3.1.1.1.1.1.1.3">
<span class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.3.1">Vector</span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.3.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.3.2.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.3.2.1.1">(2): 1.0</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.3.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.3.3.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.3.3.1.1">(4): 0.996</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.3.4">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.3.4.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.3.4.1.1">(0): 0.993</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.3.5">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.3.5.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.3.5.1.1">(1): 0.986</span>
</span></span>
<span class="ltx_td ltx_align_justify ltx_border_b ltx_border_r ltx_border_t" id="S4.T3.1.1.1.1.1.1.3.6">
<span class="ltx_inline-block ltx_align_top" id="S4.T3.1.1.1.1.1.1.3.6.1">
<span class="ltx_p" id="S4.T3.1.1.1.1.1.1.3.6.1.1">(3): 0.0</span>
</span></span></span>
</span></span></span>
</span></span></span></p>
</figure>
<div class="ltx_para" id="S4.p19">
<p class="ltx_p" id="S4.p19.1">Up until this point, the system is working on chunks rather than full articles. After the combined scores have been obtained, we track back to the original articles containing these chunks to be passed to a Large Language Model to extract answers in a subsequent step. This decision is made so as to minimize the loss of context from only using the chunks. Note that the ordering of articles here is also based on score-based ordering of the chunks. For example, if results after combining BM25 and Vector Search, in descending order, are:</p>
</div>
<div class="ltx_para" id="S4.p20">
<table class="ltx_equation ltx_eqn_table" id="S4.Ex3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\text{chunk\_A}\rightarrow\text{chunk\_B}\rightarrow\text{chunk\_C}\rightarrow%
\text{chunk\_D}" class="ltx_Math" display="block" id="S4.Ex3.m1.1"><semantics id="S4.Ex3.m1.1a"><mrow id="S4.Ex3.m1.1.1" xref="S4.Ex3.m1.1.1.cmml"><mtext id="S4.Ex3.m1.1.1.2" xref="S4.Ex3.m1.1.1.2a.cmml">chunk_A</mtext><mo id="S4.Ex3.m1.1.1.3" stretchy="false" xref="S4.Ex3.m1.1.1.3.cmml">→</mo><mtext id="S4.Ex3.m1.1.1.4" xref="S4.Ex3.m1.1.1.4a.cmml">chunk_B</mtext><mo id="S4.Ex3.m1.1.1.5" stretchy="false" xref="S4.Ex3.m1.1.1.5.cmml">→</mo><mtext id="S4.Ex3.m1.1.1.6" xref="S4.Ex3.m1.1.1.6a.cmml">chunk_C</mtext><mo id="S4.Ex3.m1.1.1.7" stretchy="false" xref="S4.Ex3.m1.1.1.7.cmml">→</mo><mtext id="S4.Ex3.m1.1.1.8" xref="S4.Ex3.m1.1.1.8a.cmml">chunk_D</mtext></mrow><annotation-xml encoding="MathML-Content" id="S4.Ex3.m1.1b"><apply id="S4.Ex3.m1.1.1.cmml" xref="S4.Ex3.m1.1.1"><and id="S4.Ex3.m1.1.1a.cmml" xref="S4.Ex3.m1.1.1"></and><apply id="S4.Ex3.m1.1.1b.cmml" xref="S4.Ex3.m1.1.1"><ci id="S4.Ex3.m1.1.1.3.cmml" xref="S4.Ex3.m1.1.1.3">→</ci><ci id="S4.Ex3.m1.1.1.2a.cmml" xref="S4.Ex3.m1.1.1.2"><mtext id="S4.Ex3.m1.1.1.2.cmml" xref="S4.Ex3.m1.1.1.2">chunk_A</mtext></ci><ci id="S4.Ex3.m1.1.1.4a.cmml" xref="S4.Ex3.m1.1.1.4"><mtext id="S4.Ex3.m1.1.1.4.cmml" xref="S4.Ex3.m1.1.1.4">chunk_B</mtext></ci></apply><apply id="S4.Ex3.m1.1.1c.cmml" xref="S4.Ex3.m1.1.1"><ci id="S4.Ex3.m1.1.1.5.cmml" xref="S4.Ex3.m1.1.1.5">→</ci><share href="https://arxiv.org/html/2409.13699v1#S4.Ex3.m1.1.1.4.cmml" id="S4.Ex3.m1.1.1d.cmml" xref="S4.Ex3.m1.1.1"></share><ci id="S4.Ex3.m1.1.1.6a.cmml" xref="S4.Ex3.m1.1.1.6"><mtext id="S4.Ex3.m1.1.1.6.cmml" xref="S4.Ex3.m1.1.1.6">chunk_C</mtext></ci></apply><apply id="S4.Ex3.m1.1.1e.cmml" xref="S4.Ex3.m1.1.1"><ci id="S4.Ex3.m1.1.1.7.cmml" xref="S4.Ex3.m1.1.1.7">→</ci><share href="https://arxiv.org/html/2409.13699v1#S4.Ex3.m1.1.1.6.cmml" id="S4.Ex3.m1.1.1f.cmml" xref="S4.Ex3.m1.1.1"></share><ci id="S4.Ex3.m1.1.1.8a.cmml" xref="S4.Ex3.m1.1.1.8"><mtext id="S4.Ex3.m1.1.1.8.cmml" xref="S4.Ex3.m1.1.1.8">chunk_D</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.Ex3.m1.1c">\text{chunk\_A}\rightarrow\text{chunk\_B}\rightarrow\text{chunk\_C}\rightarrow%
\text{chunk\_D}</annotation><annotation encoding="application/x-llamapun" id="S4.Ex3.m1.1d">chunk_A → chunk_B → chunk_C → chunk_D</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S4.p21">
<p class="ltx_p" id="S4.p21.1">where chunk_A and chunk_C come from <span class="ltx_text ltx_font_italic" id="S4.p21.1.1">article_1</span>, chunk_B from <span class="ltx_text ltx_font_italic" id="S4.p21.1.2">article_3</span>, and chunk_D from <span class="ltx_text ltx_font_italic" id="S4.p21.1.3">article_2</span>, the resulting article ordering will be:</p>
</div>
<div class="ltx_para" id="S4.p22">
<table class="ltx_equation ltx_eqn_table" id="S4.Ex4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\text{article\_1}\rightarrow\text{article\_3}\rightarrow\text{article\_2}" class="ltx_Math" display="block" id="S4.Ex4.m1.1"><semantics id="S4.Ex4.m1.1a"><mrow id="S4.Ex4.m1.1.1" xref="S4.Ex4.m1.1.1.cmml"><mtext id="S4.Ex4.m1.1.1.2" xref="S4.Ex4.m1.1.1.2a.cmml">article_1</mtext><mo id="S4.Ex4.m1.1.1.3" stretchy="false" xref="S4.Ex4.m1.1.1.3.cmml">→</mo><mtext id="S4.Ex4.m1.1.1.4" xref="S4.Ex4.m1.1.1.4a.cmml">article_3</mtext><mo id="S4.Ex4.m1.1.1.5" stretchy="false" xref="S4.Ex4.m1.1.1.5.cmml">→</mo><mtext id="S4.Ex4.m1.1.1.6" xref="S4.Ex4.m1.1.1.6a.cmml">article_2</mtext></mrow><annotation-xml encoding="MathML-Content" id="S4.Ex4.m1.1b"><apply id="S4.Ex4.m1.1.1.cmml" xref="S4.Ex4.m1.1.1"><and id="S4.Ex4.m1.1.1a.cmml" xref="S4.Ex4.m1.1.1"></and><apply id="S4.Ex4.m1.1.1b.cmml" xref="S4.Ex4.m1.1.1"><ci id="S4.Ex4.m1.1.1.3.cmml" xref="S4.Ex4.m1.1.1.3">→</ci><ci id="S4.Ex4.m1.1.1.2a.cmml" xref="S4.Ex4.m1.1.1.2"><mtext id="S4.Ex4.m1.1.1.2.cmml" xref="S4.Ex4.m1.1.1.2">article_1</mtext></ci><ci id="S4.Ex4.m1.1.1.4a.cmml" xref="S4.Ex4.m1.1.1.4"><mtext id="S4.Ex4.m1.1.1.4.cmml" xref="S4.Ex4.m1.1.1.4">article_3</mtext></ci></apply><apply id="S4.Ex4.m1.1.1c.cmml" xref="S4.Ex4.m1.1.1"><ci id="S4.Ex4.m1.1.1.5.cmml" xref="S4.Ex4.m1.1.1.5">→</ci><share href="https://arxiv.org/html/2409.13699v1#S4.Ex4.m1.1.1.4.cmml" id="S4.Ex4.m1.1.1d.cmml" xref="S4.Ex4.m1.1.1"></share><ci id="S4.Ex4.m1.1.1.6a.cmml" xref="S4.Ex4.m1.1.1.6"><mtext id="S4.Ex4.m1.1.1.6.cmml" xref="S4.Ex4.m1.1.1.6">article_2</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.Ex4.m1.1c">\text{article\_1}\rightarrow\text{article\_3}\rightarrow\text{article\_2}</annotation><annotation encoding="application/x-llamapun" id="S4.Ex4.m1.1d">article_1 → article_3 → article_2</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S4.p23">
<p class="ltx_p" id="S4.p23.1"><span class="ltx_text ltx_font_bold" id="S4.p23.1.1">LLM-powered answer generation and Active Retrieval</span></p>
</div>
<div class="ltx_para" id="S4.p24">
<p class="ltx_p" id="S4.p24.1">At this step, the aforementioned retrieved documents are passed to a LLM to leverage its power in understanding the context and extracting the correct spans of text containing the information relevant to the user query and generating an answer. Here, we also specify that the LLM should be willing to acknowledge its inability to answer a question based on proprietary documents. In addition, since the input token length of LLMs are also limited, one prompt to the language model might only be able to handle 2 to 5 legal articles. In the case the number of retrieved documents from the previous step exceeds this capacity and the LLM is consistently not able to answer the query, the same iteration will be applied on the next subset of articles. Once all of the documents have been exhausted and the LLM is still adamant that there exists no information to answer, a process called Active Retrieval takes effect.</p>
</div>
<div class="ltx_para" id="S4.p25">
<p class="ltx_p" id="S4.p25.1">In Active Retrieval, the system will explore even the lower-rank docs that are scored using the previous combination of BM25 and Vector Search. The chunks will be converted back into original documents, which are then passed to the LLM to generate answers, in a similar fashion to above. In this way, the system can attempt to its fullest extent to find an answer; only upon reaching a limit to the number of chunks to consider will this practice be terminated - in that case, a definite ”No answer found” will be returned.</p>
</div>
<div class="ltx_para" id="S4.p26">
<p class="ltx_p" id="S4.p26.1">The optimized prompt used in this system is as follows:</p>
</div>
<div class="ltx_para" id="S4.p27">
<p class="ltx_p" id="S4.p27.1"><span class="ltx_text ltx_font_italic" id="S4.p27.1.1">You are an expert lawyer in Vietnam, tasked with answering frequently asked questions (FAQs) from customers about Vietnamese law based on the given information.
Please use, gather, and deduce based on the knowledge in the following information to answer the user’s question.
Please respond accurately, concisely, and to the point, without being too verbose. 
<br class="ltx_break"/>Relevant legal information: [Retrieved Legal Articles] 
<br class="ltx_break"/>User’s question: [Question]
<br class="ltx_break"/></span></p>
</div>
<div class="ltx_para" id="S4.p28">
<p class="ltx_p" id="S4.p28.1"><span class="ltx_text ltx_font_bold" id="S4.p28.1.1">Re-ranking process</span></p>
</div>
<div class="ltx_para" id="S4.p29">
<p class="ltx_p" id="S4.p29.1">Assuming that the previous component of the system runs smoothly, the re-ranking process takes place as we use the LLM-powered answer to re-rank the chunks that have been selected by the BM25-Vector Search combination, reverted back to original documents, and influenced the answer. Specifically, these chunks are re-ranked based on a combination of BM25 and Vector Search again, but by comparing them to the LLM-generated answer. Similar to the explanation above, this combination returns a score that can be used to re-rank the chunks. Afterwards, the chunks can be used as direct references that support the answer to the user query, or they might be used as an intermediate result for yet another re-ranking attempt. While our system does not implement a third re-ranking, the format of the output facilitates this idea - in this case, we recommend that all chunks from the top specified k documents, not just chunks from articles that produce answers, are re-ranked based on the LLM answer.</p>
</div>
<div class="ltx_para" id="S4.p30">
<p class="ltx_p" id="S4.p30.1">In the case where the LLM-powered answer is ”No answer found”, the original corpus, splited into chunks, has already had a negative sentence readily embedded; as a result, when all chunks are re-ranked based on the answer and the combination of BM25 and Vector Search, this specific embedding will most likely be guaranteed to be at the top, signalling the system not to offer any reference when attempts to answer fail.</p>
</div>
<div class="ltx_para" id="S4.p31">
<p class="ltx_p" id="S4.p31.1">Overall, the goal behind this loop-like system is to add complexity to reordering of chunks and have them be more accurately relevant, by directly leveraging the output answer. In serving as a re-ranking approach, this can be an alternative to the traditional cross-encoder, which tends to be slower and biased, especially with the increased volume and diversity of data today. In Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.13699v1#S4.F2" title="Figure 2 ‣ IV THE SYSTEM ARCHITECTURE ‣ Vietnamese Legal Information Retrieval in Question-Answering System Natural Language Processing - IT4772E Professor: Le Thanh Huong"><span class="ltx_text ltx_ref_tag">2</span></a>, this process is shown using red arrows.</p>
</div>
<div class="ltx_para" id="S4.p32">
<p class="ltx_p" id="S4.p32.1"><span class="ltx_text ltx_font_bold" id="S4.p32.1.1">Large Language Model used</span>
For components requiring the extensive abilities of LLMs, we utilize the latest open-sourced LLaMA 3 70B model released by Meta AI, which demonstrates impressive performance in reasoning and answering questions, comparable to OpenAI’s GPT-4.</p>
</div>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">V </span><span class="ltx_text ltx_font_smallcaps" id="S5.1.1">EXPERIMENTS</span>
</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">To accurately analyze the performance of our system, we will compare the results obtained with each component that makes up our extensive system, under various settings and data inputs. To prevent overfitting, in addition to the Zalo Legal Dataset, we use our own independently crawled dataset, strictly adhering to the aforementioned standards of data cleaning and preprocessing. We then perform tests on the original dataset as well as on datasets that have been processed through chunking and enriched with metadata.</p>
</div>
<div class="ltx_para" id="S5.p2">
<p class="ltx_p" id="S5.p2.1">The components we evaluate include:</p>
</div>
<div class="ltx_para" id="S5.p3">
<p class="ltx_p" id="S5.p3.1">1. Only using the BM25 algorithm for ranking relevancy.</p>
</div>
<div class="ltx_para" id="S5.p4">
<p class="ltx_p" id="S5.p4.1">2. Only using cosine similarity between the Bi-Encoder’s embeddings of a query and document chunks.</p>
</div>
<div class="ltx_para" id="S5.p5">
<p class="ltx_p" id="S5.p5.1">3. A hybrid search scheme combining the results of both BM25 and Bi-Encoder.</p>
</div>
<div class="ltx_para" id="S5.p6">
<p class="ltx_p" id="S5.p6.1">4. A hybrid architecture incorporating the aforementioned LLM-answer-based re-ranker.</p>
</div>
<div class="ltx_para" id="S5.p7">
<p class="ltx_p" id="S5.p7.1">The results of these experiments are presented in Table IV, offering a comprehensive comparison of the different models’ performance across the various data settings.</p>
</div>
<figure class="ltx_table" id="S5.T4">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T4.1">
<tr class="ltx_tr" id="S5.T4.1.1">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S5.T4.1.1.1"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.1.1">Dataset</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T4.1.1.2"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.2.1">Metrics</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.1.3"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.3.1">BM25</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.1.4"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.4.1">Biencoder</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.1.5"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.5.1">Hybrid</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.1.6"><span class="ltx_text ltx_font_bold" id="S5.T4.1.1.6.1">LLM Reranker</span></td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.2">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S5.T4.1.2.1" rowspan="3"><span class="ltx_text" id="S5.T4.1.2.1.1">Original Data</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T4.1.2.2">Recall@1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.2.3">0.5</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.2.4">0.6</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.2.5">0.78</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.2.6">0.8</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.3">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T4.1.3.1">Recall@10</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.3.2">0.7</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.3.3">0.8</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.3.4">0.85</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.3.5">0.87</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.4">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T4.1.4.1">Recall@100</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.4.2">0.8</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.4.3">0.88</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.4.4">0.9</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.4.5">0.9</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.5">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="S5.T4.1.5.1" rowspan="3"><span class="ltx_text" id="S5.T4.1.5.1.1">Processed Data</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T4.1.5.2">Recall@1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.5.3">0.65</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.5.4">0.74</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.5.5">0.78</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.5.6">0.86</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.6">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S5.T4.1.6.1">Recall@10</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.6.2">0.73</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.6.3">0.93</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.6.4">0.95</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T4.1.6.5">0.98</td>
</tr>
<tr class="ltx_tr" id="S5.T4.1.7">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="S5.T4.1.7.1">Recall@100</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S5.T4.1.7.2">0.89</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S5.T4.1.7.3">0.97</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S5.T4.1.7.4">0.98</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S5.T4.1.7.5">0.98</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">TABLE IV: </span>Comparison of Model Performance on Different Datasets</figcaption>
</figure>
<figure class="ltx_table" id="S5.T5">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S5.T5.1">
<tr class="ltx_tr" id="S5.T5.1.1">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S5.T5.1.1.1">Metric</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.1.2">BM25 only</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.1.3">Bi-Encoder only</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.1.4">Hybrid Search</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.1.5">Hybrid with Active Retrieval</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.2">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S5.T5.1.2.1">Recall@1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.2.2">0.65</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.2.3">0.74</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.2.4">0.78</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.2.5">0.86</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.3">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S5.T5.1.3.1">MAP@1</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.3.2">0.65</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.3.3">0.74</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.3.4">0.78</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.3.5">0.86</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.4">
<td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" id="S5.T5.1.4.1">Recall@10</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.4.2">0.73</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.4.3">0.93</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.4.4">0.95</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S5.T5.1.4.5">0.98</td>
</tr>
<tr class="ltx_tr" id="S5.T5.1.5">
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="S5.T5.1.5.1">MAP@10</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S5.T5.1.5.2">0.72</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S5.T5.1.5.3">0.92</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S5.T5.1.5.4">0.93</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S5.T5.1.5.5">0.98</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">TABLE V: </span>Comparison of Model Performance on Different Datasets - on Recall &amp; MAP@K</figcaption>
</figure>
<div class="ltx_para" id="S5.p8">
<p class="ltx_p" id="S5.p8.1">To analyze the performance, we compare the different components in different settings of metrics and test data. Specifically, we test by using both the original and unprocessed dataset, along with the data that has been enhanced with overlapping chunking and added metadata.</p>
</div>
<div class="ltx_para" id="S5.p9">
<p class="ltx_p" id="S5.p9.1">From Table IV, it can be observed that data that has undergone appropriate transformations (removing stop words, overlapped chunking to increase the number of chunks and widen context, adding metadata such as article name, etc.) produce significantly better metrics. This reinforces the importance of careful data preparation for NLP tasks in general, and for such a niche domain as Vietnamese law in specific.</p>
</div>
<div class="ltx_para" id="S5.p10">
<p class="ltx_p" id="S5.p10.1">In addition, we can see that there is a sharp increase in performance, proportional to the rise in the complexity of the included components. Specifically, the BM25 algorithm depends heavily on the similarity in words between the query and the corpus, and because Vietnamese is a highly diverse, where the same idea can be expressed in numerous manners, this approach might not be able to fully translate the essential semantic meaning of the question into an answer.</p>
</div>
<div class="ltx_para" id="S5.p11">
<p class="ltx_p" id="S5.p11.1">By contrast, transformer-based models have recently emerged as a powerful approach to fully capturing the context and meaning of natural language, significantly traditional methods, even in the task of information retrieval where BM25 is a long-standing state-of-the-art solution. This is also reflected in Table IV - the recall for all k’s (k = 1, 10, 100) rise compared to BM25. Another interesting insight, albeit simple, is the fact that recall always increase as k increases. From a user experience perspective, returning too many results defeats the purpose of question-answering, yet returning too few places the system at risks of inaccuracy and hallucination.</p>
</div>
<div class="ltx_para" id="S5.p12">
<p class="ltx_p" id="S5.p12.1">A surprising empirical conclusion lies in the fact that a composition of keyword-based search (BM25) and semantic search (via embeddings), which is used in our system, comprises an ensemble approach that actually outperforms the individual components. Specifically, this approach works by allowing the Bi-Encoder to re-rank the results from BM25, which offers both a boost in computation efficiency, as well as leveraging the strengths of both methods.</p>
</div>
<div class="ltx_para" id="S5.p13">
<p class="ltx_p" id="S5.p13.1">Finally, the entire system, namely the LLM Re-ranker we introduce in this report, boasts the best performance, gaining up to 0.98 recall on the processed dataset. Once again, this confirms the potential of incorporating LLM in a Retrieval-Augmented Generation system.</p>
</div>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">VI </span><span class="ltx_text ltx_font_smallcaps" id="S6.1.1">CONCLUSIONS</span>
</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">This report proposes a set of modifications to address limitations of the Retrieval-Augmented Generation (RAG) system for Vietnamese Question Answering (QA). By tackling challenges like inefficient data processing and document ordering, these modifications aim to improve the overall performance and reliability of the system. The proposed techniques, including Vietnamese-specific data processing, enhanced fusion methods, and active information re-ranking, have the potential to significantly benefit Vietnamese QA systems, particularly by mitigating hallucination issues in large language models. The active retrieval method, specifically, might even offer a new approach to re-ranking documents, potentially replacing traditional cross-encoders. Integrating these advancements into a comprehensive QA system holds promise for a more robust and reliable Vietnamese language information retrieval tool.</p>
</div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_font_smallcaps ltx_title_section">ACKNOWLEDGMENT</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">We would like to express our deepest gratitude towards Prof. Le Thanh Huong for her valuable comments, guidance, and suggestions to improve the quality of the work throughout the project.</p>
</div>
<div class="ltx_para" id="Sx1.p2">
<span class="ltx_ERROR undefined" id="Sx1.p2.1">\printbibliography</span>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Wed Sep  4 17:21:26 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
