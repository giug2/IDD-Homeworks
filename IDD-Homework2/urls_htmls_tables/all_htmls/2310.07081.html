<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting</title>
<!--Generated on Fri Oct 20 19:23:56 2023 by LaTeXML (version 0.8.7) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="https://browse.arxiv.org/latexml/ar5iv_0.7.4.min.css" type="text/css">
<link rel="stylesheet" href="https://browse.arxiv.org/latexml/styles.css" type="text/css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="https://browse.arxiv.org/latexml/addons.js"></script>
<script src="https://browse.arxiv.org/latexml/feedbackOverlay.js"></script>
</head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a href="#S1" title="1 Introduction ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#S2" title="2 Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Non-Compositional Translation</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S2.SS1" title="2.1 Background on Idioms ‣ 2 Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Background on Idioms</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S2.SS2" title="2.2 Formal definition ‣ 2 Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Formal definition</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#S3" title="3 Idioms and Data Collection ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Idioms and Data Collection</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#S4" title="4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Evaluating Non-Compositional Translation</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S4.SS1" title="4.1 Artificial Language Translation ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Artificial Language Translation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S4.SS2" title="4.2 Evaluation of Commercial Systems ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Evaluation of Commercial Systems</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#S5" title="5 Methods to Improve Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Methods to Improve Non-Compositional Translation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#S6" title="6 Experimental Settings ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Experimental Settings</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S6.SS1" title="6.1 Experimental Settings ‣ 6 Experimental Settings ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6.1 </span>Experimental Settings</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S6.SS2" title="6.2 Data ‣ 6 Experimental Settings ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6.2 </span>Data</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S6.SS3" title="6.3 Evaluation ‣ 6 Experimental Settings ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6.3 </span>Evaluation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a href="#S7" title="7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Results</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S7.SS1" title="7.1 Automatic and Human Evaluation ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.1 </span>Automatic and Human Evaluation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a href="#S7.SS2" title="7.2 Error analysis ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7.2 </span>Error analysis</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#S8" title="8 Related Work ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Related Work</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#S9" title="9 Conclusion ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">9 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a href="#S10" title="10 Limitations ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">10 </span>Limitations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A1" title="Appendix A Synthetic Dataset Training Details ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Synthetic Dataset Training Details</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A2" title="Appendix B Idiom Sources ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Idiom Sources</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A3" title="Appendix C OpenSubtitles Training Details ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>OpenSubtitles Training Details</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A4" title="Appendix D Native Annotator Recruiting ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Native Annotator Recruiting</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A5" title="Appendix E Standards for Human Evaluation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>Standards for Human Evaluation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A6" title="Appendix F Statistical Significance Testing ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">F </span>Statistical Significance Testing</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A7" title="Appendix G Statistical Significance Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">G </span>Statistical Significance Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A8" title="Appendix H Effect of Frequency on Commercial Translations ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">H </span>Effect of Frequency on Commercial Translations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A9" title="Appendix I Effect of Frequency on ΔLM ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">I </span>Effect of Frequency on <math class="ltx_Math" alttext="\Delta" display="inline"><semantics><mi mathvariant="normal">Δ</mi><annotation-xml encoding="MathML-Content"><ci>Δ</ci></annotation-xml><annotation encoding="application/x-tex">\Delta</annotation><annotation encoding="application/x-llamapun">roman_Δ</annotation></semantics></math>LM</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a href="#A10" title="Appendix J Automatic Metrics in Detail ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">J </span>Automatic Metrics in Detail</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Emmy Liu  Aditi Chaudhary   Graham Neubig 
<br class="ltx_break">Carnegie Mellon University 
<br class="ltx_break"><span id="id2.1.id1" class="ltx_text ltx_font_typewriter">emmy@cmu.edu, aditichaud@google.com, neubig@cs.cmu.edu</span>
</span><span class="ltx_author_notes">   Currently works at Google Research.</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id1.1" class="ltx_p">Idioms are common in everyday language, but often pose a challenge to translators because their meanings do not follow from the meanings of their parts.
Despite significant advances, machine translation systems still struggle to translate idiomatic expressions. We provide a simple characterization of idiomatic translation and related issues. This allows us to conduct a synthetic experiment revealing a tipping point at which transformer-based machine translation models correctly default to idiomatic translations. To expand multilingual resources, we compile a dataset of <math id="id1.1.m1.1" class="ltx_Math" alttext="\sim\text{4k}" display="inline"><semantics id="id1.1.m1.1a"><mrow id="id1.1.m1.1.1" xref="id1.1.m1.1.1.cmml"><mi id="id1.1.m1.1.1.2" xref="id1.1.m1.1.1.2.cmml"></mi><mo id="id1.1.m1.1.1.1" xref="id1.1.m1.1.1.1.cmml">∼</mo><mtext id="id1.1.m1.1.1.3" xref="id1.1.m1.1.1.3a.cmml">4k</mtext></mrow><annotation-xml encoding="MathML-Content" id="id1.1.m1.1b"><apply id="id1.1.m1.1.1.cmml" xref="id1.1.m1.1.1"><csymbol cd="latexml" id="id1.1.m1.1.1.1.cmml" xref="id1.1.m1.1.1.1">similar-to</csymbol><csymbol cd="latexml" id="id1.1.m1.1.1.2.cmml" xref="id1.1.m1.1.1.2">absent</csymbol><ci id="id1.1.m1.1.1.3a.cmml" xref="id1.1.m1.1.1.3"><mtext id="id1.1.m1.1.1.3.cmml" xref="id1.1.m1.1.1.3">4k</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="id1.1.m1.1c">\sim\text{4k}</annotation><annotation encoding="application/x-llamapun" id="id1.1.m1.1d">∼ 4k</annotation></semantics></math> natural sentences containing idiomatic expressions in French, Finnish, and Japanese. To improve translation of natural idioms, we introduce two straightforward yet effective techniques: the strategic upweighting of training loss on potentially idiomatic sentences, and using retrieval-augmented models. This not only improves the accuracy of a strong pretrained MT model on idiomatic sentences by up to 13% in absolute accuracy, but also holds potential benefits for non-idiomatic sentences.<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>Code and data available at <a href="https://github.com/nightingal3/idiom-translation/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/nightingal3/idiom-translation/</a></span></span></span></p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<figure id="S1.T1" class="ltx_table">
<table id="S1.T1.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S1.T1.1.1.1" class="ltx_tr">
<th id="S1.T1.1.1.1.1" class="ltx_td ltx_align_justify ltx_th ltx_th_column ltx_border_tt" style="width:85.4pt;">
<p id="S1.T1.1.1.1.1.1" class="ltx_p ltx_align_top">Source</p>
</th>
<th id="S1.T1.1.1.1.2" class="ltx_td ltx_align_justify ltx_th ltx_th_column ltx_border_tt" style="width:113.8pt;">
<p id="S1.T1.1.1.1.2.1" class="ltx_p ltx_align_top">Target</p>
</th>
<th id="S1.T1.1.1.1.3" class="ltx_td ltx_align_justify ltx_th ltx_th_column ltx_border_tt" style="width:113.8pt;">
<p id="S1.T1.1.1.1.3.1" class="ltx_p ltx_align_top">Translation</p>
</th>
<th id="S1.T1.1.1.1.4" class="ltx_td ltx_align_justify ltx_th ltx_th_column ltx_border_tt" style="width:28.5pt;">
<p id="S1.T1.1.1.1.4.1" class="ltx_p ltx_align_top">Language</p>
</th>
<th id="S1.T1.1.1.1.5" class="ltx_td ltx_align_justify ltx_th ltx_th_column ltx_border_tt" style="width:28.5pt;">
<p id="S1.T1.1.1.1.5.1" class="ltx_p ltx_align_top">System</p>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S1.T1.1.2.1" class="ltx_tr">
<td id="S1.T1.1.2.1.1" class="ltx_td ltx_align_justify ltx_border_t" style="width:85.4pt;">
<p id="S1.T1.1.2.1.1.1" class="ltx_p ltx_align_top">Vous devez <span id="S1.T1.1.2.1.1.1.1" class="ltx_text" style="color:#FF0000;">avoir la dalle</span>.</p>
</td>
<td id="S1.T1.1.2.1.2" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.2.1.2.1" class="ltx_p ltx_align_top">You gotta be <span id="S1.T1.1.2.1.2.1.1" class="ltx_text" style="color:#FF0000;">starving</span>.</p>
</td>
<td id="S1.T1.1.2.1.3" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.2.1.3.1" class="ltx_p ltx_align_top">You must <span id="S1.T1.1.2.1.3.1.1" class="ltx_text" style="color:#FF0000;">have the slab</span>.</p>
</td>
<td id="S1.T1.1.2.1.4" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.2.1.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">fr</span></td>
<td id="S1.T1.1.2.1.5" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.2.1.5.1" class="ltx_p ltx_align_top">DeepL</p>
</td>
</tr>
<tr id="S1.T1.1.3.2" class="ltx_tr">
<td id="S1.T1.1.3.2.1" class="ltx_td ltx_align_justify ltx_border_t" style="width:85.4pt;">
<p id="S1.T1.1.3.2.1.1" class="ltx_p ltx_align_top">Il lui faut toujours <span id="S1.T1.1.3.2.1.1.1" class="ltx_text" style="color:#FF0000;">chercher la petite bête</span>.</p>
</td>
<td id="S1.T1.1.3.2.2" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.3.2.2.1" class="ltx_p ltx_align_top">He has to <span id="S1.T1.1.3.2.2.1.1" class="ltx_text" style="color:#FF0000;">dot all the i’s, cross all the t’s</span>.</p>
</td>
<td id="S1.T1.1.3.2.3" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.3.2.3.1" class="ltx_p ltx_align_top">He always has to <span id="S1.T1.1.3.2.3.1.1" class="ltx_text" style="color:#FF0000;">look for the little beast</span>.</p>
</td>
<td id="S1.T1.1.3.2.4" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.3.2.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">fr</span></td>
<td id="S1.T1.1.3.2.5" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.3.2.5.1" class="ltx_p ltx_align_top">DeepL</p>
</td>
</tr>
<tr id="S1.T1.1.4.3" class="ltx_tr">
<td id="S1.T1.1.4.3.1" class="ltx_td ltx_align_justify ltx_border_t" style="width:85.4pt;">
<p id="S1.T1.1.4.3.1.1" class="ltx_p ltx_align_top"><span id="S1.T1.1.4.3.1.1.1" class="ltx_text" style="color:#FF0000;">J’ai la pêche</span> à mort.</p>
</td>
<td id="S1.T1.1.4.3.2" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.4.3.2.1" class="ltx_p ltx_align_top"><span id="S1.T1.1.4.3.2.1.1" class="ltx_text" style="color:#FF0000;">Good</span> as hell.</p>
</td>
<td id="S1.T1.1.4.3.3" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.4.3.3.1" class="ltx_p ltx_align_top"><span id="S1.T1.1.4.3.3.1.1" class="ltx_text" style="color:#FF0000;">I have the peach</span> to death.</p>
</td>
<td id="S1.T1.1.4.3.4" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.4.3.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">fr</span></td>
<td id="S1.T1.1.4.3.5" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.4.3.5.1" class="ltx_p ltx_align_top">Google</p>
</td>
</tr>
<tr id="S1.T1.1.5.4" class="ltx_tr">
<td id="S1.T1.1.5.4.1" class="ltx_td ltx_align_justify ltx_border_t" style="width:85.4pt;"><span id="S1.T1.1.5.4.1.1" class="ltx_text ltx_align_top" style="color:#FF0000;">弱肉強食</span></td>
<td id="S1.T1.1.5.4.2" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;"><span id="S1.T1.1.5.4.2.1" class="ltx_text ltx_align_top" style="color:#FF0000;">The Weak are Meat, the Strong do Eat.</span></td>
<td id="S1.T1.1.5.4.3" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.5.4.3.1" class="ltx_p ltx_align_top"><span id="S1.T1.1.5.4.3.1.1" class="ltx_text" style="color:#FF0000;">The Weak are the Strong</span>.</p>
</td>
<td id="S1.T1.1.5.4.4" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.5.4.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">ja</span></td>
<td id="S1.T1.1.5.4.5" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.5.4.5.1" class="ltx_p ltx_align_top">DeepL</p>
</td>
</tr>
<tr id="S1.T1.1.6.5" class="ltx_tr">
<td id="S1.T1.1.6.5.1" class="ltx_td ltx_align_justify ltx_border_t" style="width:85.4pt;">
<p id="S1.T1.1.6.5.1.1" class="ltx_p ltx_align_top">その<span id="S1.T1.1.6.5.1.1.1" class="ltx_text" style="color:#FF0000;">手は食わない</span>わ</p>
</td>
<td id="S1.T1.1.6.5.2" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.6.5.2.1" class="ltx_p ltx_align_top">Oh, no, <span id="S1.T1.1.6.5.2.1.1" class="ltx_text" style="color:#FF0000;">I’m not falling for that</span>.</p>
</td>
<td id="S1.T1.1.6.5.3" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.6.5.3.1" class="ltx_p ltx_align_top">I’m <span id="S1.T1.1.6.5.3.1.1" class="ltx_text" style="color:#FF0000;">not gonna eat that hand</span>.</p>
</td>
<td id="S1.T1.1.6.5.4" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.6.5.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">ja</span></td>
<td id="S1.T1.1.6.5.5" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.6.5.5.1" class="ltx_p ltx_align_top">DeepL</p>
</td>
</tr>
<tr id="S1.T1.1.7.6" class="ltx_tr">
<td id="S1.T1.1.7.6.1" class="ltx_td ltx_align_justify ltx_border_t" style="width:85.4pt;">
<p id="S1.T1.1.7.6.1.1" class="ltx_p ltx_align_top"><span id="S1.T1.1.7.6.1.1.1" class="ltx_text" style="color:#FF0000;">知らぬが仏</span>って事もある</p>
</td>
<td id="S1.T1.1.7.6.2" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.7.6.2.1" class="ltx_p ltx_align_top">Well, sometimes <span id="S1.T1.1.7.6.2.1.1" class="ltx_text" style="color:#FF0000;">what we don’t know doesn’t hurt us</span>, right?</p>
</td>
<td id="S1.T1.1.7.6.3" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;"><span id="S1.T1.1.7.6.3.1" class="ltx_text ltx_align_top" style="color:#FF0000;">I don’t know, but sometimes Buddha</span></td>
<td id="S1.T1.1.7.6.4" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.7.6.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">ja</span></td>
<td id="S1.T1.1.7.6.5" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.7.6.5.1" class="ltx_p ltx_align_top">Google</p>
</td>
</tr>
<tr id="S1.T1.1.8.7" class="ltx_tr">
<td id="S1.T1.1.8.7.1" class="ltx_td ltx_align_justify ltx_border_t" style="width:85.4pt;">
<p id="S1.T1.1.8.7.1.1" class="ltx_p ltx_align_top">Eukko <span id="S1.T1.1.8.7.1.1.1" class="ltx_text" style="color:#FF0000;">elää kuin pellossa</span>.</p>
</td>
<td id="S1.T1.1.8.7.2" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.8.7.2.1" class="ltx_p ltx_align_top">Whoa. Homegirl clearly <span id="S1.T1.1.8.7.2.1.1" class="ltx_text" style="color:#FF0000;">never met a trashcan</span>.</p>
</td>
<td id="S1.T1.1.8.7.3" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.8.7.3.1" class="ltx_p ltx_align_top">The hen <span id="S1.T1.1.8.7.3.1.1" class="ltx_text" style="color:#FF0000;">lives like a field</span>.</p>
</td>
<td id="S1.T1.1.8.7.4" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.8.7.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">fi</span></td>
<td id="S1.T1.1.8.7.5" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.8.7.5.1" class="ltx_p ltx_align_top">DeepL</p>
</td>
</tr>
<tr id="S1.T1.1.9.8" class="ltx_tr">
<td id="S1.T1.1.9.8.1" class="ltx_td ltx_align_justify ltx_border_t" style="width:85.4pt;">
<p id="S1.T1.1.9.8.1.1" class="ltx_p ltx_align_top">Sinun olisi pitänyt ottaa minut mukaan tähän isoon päätökseesi - tavasta, jolla isämme <span id="S1.T1.1.9.8.1.1.1" class="ltx_text" style="color:#FF0000;">heittää lusikan nurkkaan</span>.</p>
</td>
<td id="S1.T1.1.9.8.2" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.9.8.2.1" class="ltx_p ltx_align_top">You should have included me in this huge decision you made about how our father’s <span id="S1.T1.1.9.8.2.1.1" class="ltx_text" style="color:#FF0000;">gonna leave this Earth</span>.</p>
</td>
<td id="S1.T1.1.9.8.3" class="ltx_td ltx_align_justify ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.9.8.3.1" class="ltx_p ltx_align_top">You should have included me in this big decision of yours - the way our father <span id="S1.T1.1.9.8.3.1.1" class="ltx_text" style="color:#FF0000;">throws the spoon in the corner</span>.</p>
</td>
<td id="S1.T1.1.9.8.4" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.9.8.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">fi</span></td>
<td id="S1.T1.1.9.8.5" class="ltx_td ltx_align_justify ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.9.8.5.1" class="ltx_p ltx_align_top">DeepL</p>
</td>
</tr>
<tr id="S1.T1.1.10.9" class="ltx_tr">
<td id="S1.T1.1.10.9.1" class="ltx_td ltx_align_justify ltx_border_bb ltx_border_t" style="width:85.4pt;">
<p id="S1.T1.1.10.9.1.1" class="ltx_p ltx_align_top">Roger voi <span id="S1.T1.1.10.9.1.1.1" class="ltx_text" style="color:#FF0000;">tykätä kyttyrää</span>.</p>
</td>
<td id="S1.T1.1.10.9.2" class="ltx_td ltx_align_justify ltx_border_bb ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.10.9.2.1" class="ltx_p ltx_align_top">Roger may <span id="S1.T1.1.10.9.2.1.1" class="ltx_text" style="color:#FF0000;">take a dim view of this</span>…</p>
</td>
<td id="S1.T1.1.10.9.3" class="ltx_td ltx_align_justify ltx_border_bb ltx_border_t" style="width:113.8pt;">
<p id="S1.T1.1.10.9.3.1" class="ltx_p ltx_align_top">Roger may <span id="S1.T1.1.10.9.3.1.1" class="ltx_text" style="color:#FF0000;">like a hunchback</span>.</p>
</td>
<td id="S1.T1.1.10.9.4" class="ltx_td ltx_align_justify ltx_border_bb ltx_border_t" style="width:28.5pt;"><span id="S1.T1.1.10.9.4.1" class="ltx_text ltx_font_typewriter ltx_align_top">fi</span></td>
<td id="S1.T1.1.10.9.5" class="ltx_td ltx_align_justify ltx_border_bb ltx_border_t" style="width:28.5pt;">
<p id="S1.T1.1.10.9.5.1" class="ltx_p ltx_align_top">Google</p>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Examples of mistranslated sentences produced by commercial translation systems. Idioms and their corresponding translations are highlighted in red.<span id="footnote3" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>Commercial systems were evaluated in November 2022.</span></span></span></figcaption>
</figure>
<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">An idiom is a conventionalized expression in which the intended meaning differs from its literal translation. The translation of idioms has remained a problem for state-of-the-art research and commercial translation systems, as idioms tend to be translated literally <cite class="ltx_cite ltx_citemacro_cite">Dankers et al. (<a href="#bib.bib9" title="" class="ltx_ref">2022b</a>); Shao et al. (<a href="#bib.bib40" title="" class="ltx_ref">2017</a>); Anastasiou (<a href="#bib.bib2" title="" class="ltx_ref">2010</a>)</cite>. Failure to translate these expressions correctly may lead to incomprehensible translations, particularly in literary text <cite class="ltx_cite ltx_citemacro_cite">Toral and Way (<a href="#bib.bib41" title="" class="ltx_ref">2018</a>)</cite>. To illustrate the difficulty of understanding mistranslated idioms, we present mistranslations from commercial systems in <a href="#footnote3" title="footnote 3 ‣ Table 1 ‣ 1 Introduction ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">footnote 3</span></a>.<span id="footnote4" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>Translations from commercial systems were collected at the end of 2022.</span></span></span>
</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">Although idiom translation has been recognized as a problem even before the advent of neural machine translation <cite class="ltx_cite ltx_citemacro_cite">Bar-Hillel (<a href="#bib.bib3" title="" class="ltx_ref">1952</a>); Wehrli (<a href="#bib.bib45" title="" class="ltx_ref">1998</a>)</cite>, most work has focused on identifying and evaluating the problem cross-linguistically <cite class="ltx_cite ltx_citemacro_cite">Baziotis et al. (<a href="#bib.bib4" title="" class="ltx_ref">2022</a>); Dankers et al. (<a href="#bib.bib9" title="" class="ltx_ref">2022b</a>)</cite>, or on interpreting the behaviour of transformer-based models in translating or memorizing idioms <cite class="ltx_cite ltx_citemacro_cite">Haviv et al. (<a href="#bib.bib14" title="" class="ltx_ref">2022</a>); Dankers et al. (<a href="#bib.bib9" title="" class="ltx_ref">2022b</a>)</cite>. Others pose idiom identification and paraphrasing as a separate task from machine translation <cite class="ltx_cite ltx_citemacro_cite">Pershina et al. (<a href="#bib.bib31" title="" class="ltx_ref">2015</a>)</cite>. Comparatively fewer recent works have attempted to remedy this problem. Early work made use of idiom dictionaries and direct substitution, or example-based machine translation <cite class="ltx_cite ltx_citemacro_cite">Salton et al. (<a href="#bib.bib39" title="" class="ltx_ref">2014</a>); Nagao (<a href="#bib.bib27" title="" class="ltx_ref">1984</a>)</cite>. However, we would ideally want to make use of the contextual translation abilities of neural models. Data augmentation and the creation of new datasets have helped address this problem <cite class="ltx_cite ltx_citemacro_cite">Agrawal et al. (<a href="#bib.bib1" title="" class="ltx_ref">2018</a>)</cite>, but it may also be possible to use existing data resources more effectively, especially for higher-resource languages.
</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.3" class="ltx_p">We first frame the general problem of non-compositional translation, which encompasses the translation of idioms and other multi-word expressions that cannot be translated word-for-word (<math id="S1.p3.1.m1.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:noncomp-trans-defn}" display="inline"><semantics id="S1.p3.1.m1.1a"><mrow id="S1.p3.1.m1.1.1" xref="S1.p3.1.m1.1.1.cmml"><mi mathvariant="normal" id="S1.p3.1.m1.1.1.2" xref="S1.p3.1.m1.1.1.2.cmml">§</mi><mo id="S1.p3.1.m1.1.1.1" xref="S1.p3.1.m1.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S1.p3.1.m1.1.1.3" xref="S1.p3.1.m1.1.1.3c.cmml"><a href="#S2" title="2 Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">2</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.p3.1.m1.1b"><apply id="S1.p3.1.m1.1.1.cmml" xref="S1.p3.1.m1.1.1"><times id="S1.p3.1.m1.1.1.1.cmml" xref="S1.p3.1.m1.1.1.1"></times><ci id="S1.p3.1.m1.1.1.2.cmml" xref="S1.p3.1.m1.1.1.2">§</ci><ci id="S1.p3.1.m1.1.1.3c.cmml" xref="S1.p3.1.m1.1.1.3"><mtext mathvariant="italic" id="S1.p3.1.m1.1.1.3.cmml" xref="S1.p3.1.m1.1.1.3"><a href="#S2" title="2 Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">2</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.1.m1.1c">\lx@sectionsign\ref{sec:noncomp-trans-defn}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.1.m1.1d">§</annotation></semantics></math>). We then perform synthetic experiments in a very simple case, finding that transformer-based machine translation models generally translate word-for-word until a proportional threshold of sentences contain non-compositional expressions, at which point the translations flip to being correct (<math id="S1.p3.2.m2.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:artificial-language-exps}" display="inline"><semantics id="S1.p3.2.m2.1a"><mrow id="S1.p3.2.m2.1.1" xref="S1.p3.2.m2.1.1.cmml"><mi mathvariant="normal" id="S1.p3.2.m2.1.1.2" xref="S1.p3.2.m2.1.1.2.cmml">§</mi><mo id="S1.p3.2.m2.1.1.1" xref="S1.p3.2.m2.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S1.p3.2.m2.1.1.3" xref="S1.p3.2.m2.1.1.3c.cmml"><a href="#S4.SS1" title="4.1 Artificial Language Translation ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">4.1</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.p3.2.m2.1b"><apply id="S1.p3.2.m2.1.1.cmml" xref="S1.p3.2.m2.1.1"><times id="S1.p3.2.m2.1.1.1.cmml" xref="S1.p3.2.m2.1.1.1"></times><ci id="S1.p3.2.m2.1.1.2.cmml" xref="S1.p3.2.m2.1.1.2">§</ci><ci id="S1.p3.2.m2.1.1.3c.cmml" xref="S1.p3.2.m2.1.1.3"><mtext mathvariant="italic" id="S1.p3.2.m2.1.1.3.cmml" xref="S1.p3.2.m2.1.1.3"><a href="#S4.SS1" title="4.1 Artificial Language Translation ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">4.1</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.2.m2.1c">\lx@sectionsign\ref{sec:artificial-language-exps}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.2.m2.1d">§</annotation></semantics></math>). We evaluate translations by commercial models in three natural languages, and find a drop in performance on idiomatic sentences and stronger performance on more common idioms (<math id="S1.p3.3.m3.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:commercial-evals}" display="inline"><semantics id="S1.p3.3.m3.1a"><mrow id="S1.p3.3.m3.1.1" xref="S1.p3.3.m3.1.1.cmml"><mi mathvariant="normal" id="S1.p3.3.m3.1.1.2" xref="S1.p3.3.m3.1.1.2.cmml">§</mi><mo id="S1.p3.3.m3.1.1.1" xref="S1.p3.3.m3.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S1.p3.3.m3.1.1.3" xref="S1.p3.3.m3.1.1.3c.cmml"><a href="#S4.SS2" title="4.2 Evaluation of Commercial Systems ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">4.2</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.p3.3.m3.1b"><apply id="S1.p3.3.m3.1.1.cmml" xref="S1.p3.3.m3.1.1"><times id="S1.p3.3.m3.1.1.1.cmml" xref="S1.p3.3.m3.1.1.1"></times><ci id="S1.p3.3.m3.1.1.2.cmml" xref="S1.p3.3.m3.1.1.2">§</ci><ci id="S1.p3.3.m3.1.1.3c.cmml" xref="S1.p3.3.m3.1.1.3"><mtext mathvariant="italic" id="S1.p3.3.m3.1.1.3.cmml" xref="S1.p3.3.m3.1.1.3"><a href="#S4.SS2" title="4.2 Evaluation of Commercial Systems ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">4.2</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.3.m3.1c">\lx@sectionsign\ref{sec:commercial-evals}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.3.m3.1d">§</annotation></semantics></math>). We hypothesize that this may reflect similar trends as exist in processing other long-tail phenomena, and similar tactics to those used to deal with rare phenomena may work <cite class="ltx_cite ltx_citemacro_cite">Kandpal et al. (<a href="#bib.bib17" title="" class="ltx_ref">2022</a>)</cite>.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.5" class="ltx_p">With this intuition, we improve the idiomatic translations generated by a strong pretrained machine translation model, <math id="S1.p4.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S1.p4.1.m1.1a"><mi mathvariant="normal" id="S1.p4.1.m1.1.1" xref="S1.p4.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S1.p4.1.m1.1b"><ci id="S1.p4.1.m1.1.1.cmml" xref="S1.p4.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S1.p4.1.m1.1d">roman_Δ</annotation></semantics></math>LM <cite class="ltx_cite ltx_citemacro_cite">Ma et al. (<a href="#bib.bib25" title="" class="ltx_ref">2021</a>)</cite>, without harming the translation quality of literal expressions. To contribute resources toward documenting idioms and improving their translation cross-linguistically, we create a dataset of sentences containing idiomatic expressions in three languages (French (<span id="S1.p4.5.1" class="ltx_text ltx_font_typewriter">fr</span>), Finnish (<span id="S1.p4.5.2" class="ltx_text ltx_font_typewriter">fi</span>) and Japanese (<span id="S1.p4.5.3" class="ltx_text ltx_font_typewriter">ja</span>) (<math id="S1.p4.2.m2.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:data}" display="inline"><semantics id="S1.p4.2.m2.1a"><mrow id="S1.p4.2.m2.1.1" xref="S1.p4.2.m2.1.1.cmml"><mi mathvariant="normal" id="S1.p4.2.m2.1.1.2" xref="S1.p4.2.m2.1.1.2.cmml">§</mi><mo id="S1.p4.2.m2.1.1.1" xref="S1.p4.2.m2.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S1.p4.2.m2.1.1.3" xref="S1.p4.2.m2.1.1.3c.cmml"><a href="#S3" title="3 Idioms and Data Collection ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">3</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.2.m2.1b"><apply id="S1.p4.2.m2.1.1.cmml" xref="S1.p4.2.m2.1.1"><times id="S1.p4.2.m2.1.1.1.cmml" xref="S1.p4.2.m2.1.1.1"></times><ci id="S1.p4.2.m2.1.1.2.cmml" xref="S1.p4.2.m2.1.1.2">§</ci><ci id="S1.p4.2.m2.1.1.3c.cmml" xref="S1.p4.2.m2.1.1.3"><mtext mathvariant="italic" id="S1.p4.2.m2.1.1.3.cmml" xref="S1.p4.2.m2.1.1.3"><a href="#S3" title="3 Idioms and Data Collection ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">3</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.2.m2.1c">\lx@sectionsign\ref{sec:data}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.2.m2.1d">§</annotation></semantics></math>). We propose two simple but effective ways to improve translation of idioms, namely upweighting training loss on potentially idiomatic sentences and retrieval augmentation (<math id="S1.p4.3.m3.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:methods-results}" display="inline"><semantics id="S1.p4.3.m3.1a"><mrow id="S1.p4.3.m3.1.1" xref="S1.p4.3.m3.1.1.cmml"><mi mathvariant="normal" id="S1.p4.3.m3.1.1.2" xref="S1.p4.3.m3.1.1.2.cmml">§</mi><mo id="S1.p4.3.m3.1.1.1" xref="S1.p4.3.m3.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S1.p4.3.m3.1.1.3" xref="S1.p4.3.m3.1.1.3c.cmml"><a href="#S5" title="5 Methods to Improve Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">5</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.3.m3.1b"><apply id="S1.p4.3.m3.1.1.cmml" xref="S1.p4.3.m3.1.1"><times id="S1.p4.3.m3.1.1.1.cmml" xref="S1.p4.3.m3.1.1.1"></times><ci id="S1.p4.3.m3.1.1.2.cmml" xref="S1.p4.3.m3.1.1.2">§</ci><ci id="S1.p4.3.m3.1.1.3c.cmml" xref="S1.p4.3.m3.1.1.3"><mtext mathvariant="italic" id="S1.p4.3.m3.1.1.3.cmml" xref="S1.p4.3.m3.1.1.3"><a href="#S5" title="5 Methods to Improve Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">5</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.3.m3.1c">\lx@sectionsign\ref{sec:methods-results}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.3.m3.1d">§</annotation></semantics></math>). We find that this can improve the idiomatic translation abilities of the model significantly, by an average of 10.4% in absolute accuracy (<math id="S1.p4.4.m4.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:results-main}" display="inline"><semantics id="S1.p4.4.m4.1a"><mrow id="S1.p4.4.m4.1.1" xref="S1.p4.4.m4.1.1.cmml"><mi mathvariant="normal" id="S1.p4.4.m4.1.1.2" xref="S1.p4.4.m4.1.1.2.cmml">§</mi><mo id="S1.p4.4.m4.1.1.1" xref="S1.p4.4.m4.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S1.p4.4.m4.1.1.3" xref="S1.p4.4.m4.1.1.3c.cmml"><a href="#S7.SS1" title="7.1 Automatic and Human Evaluation ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">7.1</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.4.m4.1b"><apply id="S1.p4.4.m4.1.1.cmml" xref="S1.p4.4.m4.1.1"><times id="S1.p4.4.m4.1.1.1.cmml" xref="S1.p4.4.m4.1.1.1"></times><ci id="S1.p4.4.m4.1.1.2.cmml" xref="S1.p4.4.m4.1.1.2">§</ci><ci id="S1.p4.4.m4.1.1.3c.cmml" xref="S1.p4.4.m4.1.1.3"><mtext mathvariant="italic" id="S1.p4.4.m4.1.1.3.cmml" xref="S1.p4.4.m4.1.1.3"><a href="#S7.SS1" title="7.1 Automatic and Human Evaluation ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">7.1</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.4.m4.1c">\lx@sectionsign\ref{sec:results-main}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.4.m4.1d">§</annotation></semantics></math>). Moreover, this does not harm translation of sentences where the literal sense of the idiom is used, and it improves translation of out-of-distribution sentences in French and Finnish as well. We perform human evaluation and error analysis, and find that the rate of severe semantic errors is reduced by an average of 7.52% absolute accuracy (<math id="S1.p4.5.m5.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:results-errors}" display="inline"><semantics id="S1.p4.5.m5.1a"><mrow id="S1.p4.5.m5.1.1" xref="S1.p4.5.m5.1.1.cmml"><mi mathvariant="normal" id="S1.p4.5.m5.1.1.2" xref="S1.p4.5.m5.1.1.2.cmml">§</mi><mo id="S1.p4.5.m5.1.1.1" xref="S1.p4.5.m5.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S1.p4.5.m5.1.1.3" xref="S1.p4.5.m5.1.1.3c.cmml"><a href="#S7.SS2" title="7.2 Error analysis ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">7.2</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.5.m5.1b"><apply id="S1.p4.5.m5.1.1.cmml" xref="S1.p4.5.m5.1.1"><times id="S1.p4.5.m5.1.1.1.cmml" xref="S1.p4.5.m5.1.1.1"></times><ci id="S1.p4.5.m5.1.1.2.cmml" xref="S1.p4.5.m5.1.1.2">§</ci><ci id="S1.p4.5.m5.1.1.3c.cmml" xref="S1.p4.5.m5.1.1.3"><mtext mathvariant="italic" id="S1.p4.5.m5.1.1.3.cmml" xref="S1.p4.5.m5.1.1.3"><a href="#S7.SS2" title="7.2 Error analysis ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">7.2</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.5.m5.1c">\lx@sectionsign\ref{sec:results-errors}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.5.m5.1d">§</annotation></semantics></math>). The ultimate aim for machine translation is to ensure accessibility for all texts. This requires addressing idiomatic phrases, culturally-informed language, and complex semantics. We demonstrate the potential for enhancing idiom translation using existing resources.
</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Non-Compositional Translation</h2>

<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Background on Idioms</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">Idioms are commonly understood to be fixed expressions that contradict the principle of compositionality in language, which is to say that their meaning cannot be predicted from the meanings of their parts <cite class="ltx_cite ltx_citemacro_cite">Radford (<a href="#bib.bib35" title="" class="ltx_ref">2004</a>); Portner (<a href="#bib.bib33" title="" class="ltx_ref">2005</a>)</cite>. Idioms occur relatively frequently in all languages, and are often challenging for non-native speakers <cite class="ltx_cite ltx_citemacro_cite">Cooper (<a href="#bib.bib7" title="" class="ltx_ref">1999</a>)</cite>. For instance, a literal translation of one Portuguese idiom is "<span id="S2.SS1.p1.1.1" class="ltx_text ltx_font_italic">it is from little that you twist the cucumber</span>". This is difficult to understand. However, an equivalent English expression is "As the twig is bent, so is the tree inclined", which refers to actions during childhood influencing behaviours that people have as adults <cite class="ltx_cite ltx_citemacro_cite">Unbabel (<a href="#bib.bib42" title="" class="ltx_ref">2019</a>)</cite>. This example illustrates the importance of translating idioms using equivalent idioms from the target culture, or a paraphrase if there is no equivalent.</p>
</div>
<div id="S2.SS1.p2" class="ltx_para">
<p id="S2.SS1.p2.1" class="ltx_p">Idiomatic expressions are heavily shaped by the culture of language speakers, including religious beliefs, history, geography, and cuisine. For instance, food-related idioms in English tend to refer to foods such as beef and potatoes, while in Chinese, these idioms tend to refer more to rice and tofu <cite class="ltx_cite ltx_citemacro_cite">Yang (<a href="#bib.bib46" title="" class="ltx_ref">2010</a>)</cite>. Cross-cultural knowledge is important in choosing a translation that
conveys the proper intent to readers in the target language <cite class="ltx_cite ltx_citemacro_cite">Liu (<a href="#bib.bib23" title="" class="ltx_ref">2012</a>)</cite>. Overly-literal translations and lack of broader context are two reasons why machine translation is still not at parity with human translators, particularly when translating literary text <cite class="ltx_cite ltx_citemacro_cite">Matusov (<a href="#bib.bib26" title="" class="ltx_ref">2019</a>); Omar and Gomaa (<a href="#bib.bib28" title="" class="ltx_ref">2020</a>); Poibeau (<a href="#bib.bib32" title="" class="ltx_ref">2022</a>)</cite>.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Formal definition</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.4" class="ltx_p">We use the idea of non-compositionality to frame idiomatic translation more precisely. Let <math id="S2.SS2.p1.1.m1.3" class="ltx_Math" alttext="\mathcal{X}=\{x_{1},...,x_{N}\}" display="inline"><semantics id="S2.SS2.p1.1.m1.3a"><mrow id="S2.SS2.p1.1.m1.3.3" xref="S2.SS2.p1.1.m1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.1.m1.3.3.4" xref="S2.SS2.p1.1.m1.3.3.4.cmml">𝒳</mi><mo id="S2.SS2.p1.1.m1.3.3.3" xref="S2.SS2.p1.1.m1.3.3.3.cmml">=</mo><mrow id="S2.SS2.p1.1.m1.3.3.2.2" xref="S2.SS2.p1.1.m1.3.3.2.3.cmml"><mo stretchy="false" id="S2.SS2.p1.1.m1.3.3.2.2.3" xref="S2.SS2.p1.1.m1.3.3.2.3.cmml">{</mo><msub id="S2.SS2.p1.1.m1.2.2.1.1.1" xref="S2.SS2.p1.1.m1.2.2.1.1.1.cmml"><mi id="S2.SS2.p1.1.m1.2.2.1.1.1.2" xref="S2.SS2.p1.1.m1.2.2.1.1.1.2.cmml">x</mi><mn id="S2.SS2.p1.1.m1.2.2.1.1.1.3" xref="S2.SS2.p1.1.m1.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S2.SS2.p1.1.m1.3.3.2.2.4" xref="S2.SS2.p1.1.m1.3.3.2.3.cmml">,</mo><mi mathvariant="normal" id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml">…</mi><mo id="S2.SS2.p1.1.m1.3.3.2.2.5" xref="S2.SS2.p1.1.m1.3.3.2.3.cmml">,</mo><msub id="S2.SS2.p1.1.m1.3.3.2.2.2" xref="S2.SS2.p1.1.m1.3.3.2.2.2.cmml"><mi id="S2.SS2.p1.1.m1.3.3.2.2.2.2" xref="S2.SS2.p1.1.m1.3.3.2.2.2.2.cmml">x</mi><mi id="S2.SS2.p1.1.m1.3.3.2.2.2.3" xref="S2.SS2.p1.1.m1.3.3.2.2.2.3.cmml">N</mi></msub><mo stretchy="false" id="S2.SS2.p1.1.m1.3.3.2.2.6" xref="S2.SS2.p1.1.m1.3.3.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.3b"><apply id="S2.SS2.p1.1.m1.3.3.cmml" xref="S2.SS2.p1.1.m1.3.3"><eq id="S2.SS2.p1.1.m1.3.3.3.cmml" xref="S2.SS2.p1.1.m1.3.3.3"></eq><ci id="S2.SS2.p1.1.m1.3.3.4.cmml" xref="S2.SS2.p1.1.m1.3.3.4">𝒳</ci><set id="S2.SS2.p1.1.m1.3.3.2.3.cmml" xref="S2.SS2.p1.1.m1.3.3.2.2"><apply id="S2.SS2.p1.1.m1.2.2.1.1.1.cmml" xref="S2.SS2.p1.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.1.m1.2.2.1.1.1.1.cmml" xref="S2.SS2.p1.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.SS2.p1.1.m1.2.2.1.1.1.2.cmml" xref="S2.SS2.p1.1.m1.2.2.1.1.1.2">𝑥</ci><cn type="integer" id="S2.SS2.p1.1.m1.2.2.1.1.1.3.cmml" xref="S2.SS2.p1.1.m1.2.2.1.1.1.3">1</cn></apply><ci id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">…</ci><apply id="S2.SS2.p1.1.m1.3.3.2.2.2.cmml" xref="S2.SS2.p1.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.p1.1.m1.3.3.2.2.2.1.cmml" xref="S2.SS2.p1.1.m1.3.3.2.2.2">subscript</csymbol><ci id="S2.SS2.p1.1.m1.3.3.2.2.2.2.cmml" xref="S2.SS2.p1.1.m1.3.3.2.2.2.2">𝑥</ci><ci id="S2.SS2.p1.1.m1.3.3.2.2.2.3.cmml" xref="S2.SS2.p1.1.m1.3.3.2.2.2.3">𝑁</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.3c">\mathcal{X}=\{x_{1},...,x_{N}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.1.m1.3d">caligraphic_X = { italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_x start_POSTSUBSCRIPT italic_N end_POSTSUBSCRIPT }</annotation></semantics></math> be the set of tokens in the source language, and <math id="S2.SS2.p1.2.m2.3" class="ltx_Math" alttext="\mathcal{Y}=\{y_{1},...,y_{M}\}" display="inline"><semantics id="S2.SS2.p1.2.m2.3a"><mrow id="S2.SS2.p1.2.m2.3.3" xref="S2.SS2.p1.2.m2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.2.m2.3.3.4" xref="S2.SS2.p1.2.m2.3.3.4.cmml">𝒴</mi><mo id="S2.SS2.p1.2.m2.3.3.3" xref="S2.SS2.p1.2.m2.3.3.3.cmml">=</mo><mrow id="S2.SS2.p1.2.m2.3.3.2.2" xref="S2.SS2.p1.2.m2.3.3.2.3.cmml"><mo stretchy="false" id="S2.SS2.p1.2.m2.3.3.2.2.3" xref="S2.SS2.p1.2.m2.3.3.2.3.cmml">{</mo><msub id="S2.SS2.p1.2.m2.2.2.1.1.1" xref="S2.SS2.p1.2.m2.2.2.1.1.1.cmml"><mi id="S2.SS2.p1.2.m2.2.2.1.1.1.2" xref="S2.SS2.p1.2.m2.2.2.1.1.1.2.cmml">y</mi><mn id="S2.SS2.p1.2.m2.2.2.1.1.1.3" xref="S2.SS2.p1.2.m2.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S2.SS2.p1.2.m2.3.3.2.2.4" xref="S2.SS2.p1.2.m2.3.3.2.3.cmml">,</mo><mi mathvariant="normal" id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml">…</mi><mo id="S2.SS2.p1.2.m2.3.3.2.2.5" xref="S2.SS2.p1.2.m2.3.3.2.3.cmml">,</mo><msub id="S2.SS2.p1.2.m2.3.3.2.2.2" xref="S2.SS2.p1.2.m2.3.3.2.2.2.cmml"><mi id="S2.SS2.p1.2.m2.3.3.2.2.2.2" xref="S2.SS2.p1.2.m2.3.3.2.2.2.2.cmml">y</mi><mi id="S2.SS2.p1.2.m2.3.3.2.2.2.3" xref="S2.SS2.p1.2.m2.3.3.2.2.2.3.cmml">M</mi></msub><mo stretchy="false" id="S2.SS2.p1.2.m2.3.3.2.2.6" xref="S2.SS2.p1.2.m2.3.3.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.3b"><apply id="S2.SS2.p1.2.m2.3.3.cmml" xref="S2.SS2.p1.2.m2.3.3"><eq id="S2.SS2.p1.2.m2.3.3.3.cmml" xref="S2.SS2.p1.2.m2.3.3.3"></eq><ci id="S2.SS2.p1.2.m2.3.3.4.cmml" xref="S2.SS2.p1.2.m2.3.3.4">𝒴</ci><set id="S2.SS2.p1.2.m2.3.3.2.3.cmml" xref="S2.SS2.p1.2.m2.3.3.2.2"><apply id="S2.SS2.p1.2.m2.2.2.1.1.1.cmml" xref="S2.SS2.p1.2.m2.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.2.m2.2.2.1.1.1.1.cmml" xref="S2.SS2.p1.2.m2.2.2.1.1.1">subscript</csymbol><ci id="S2.SS2.p1.2.m2.2.2.1.1.1.2.cmml" xref="S2.SS2.p1.2.m2.2.2.1.1.1.2">𝑦</ci><cn type="integer" id="S2.SS2.p1.2.m2.2.2.1.1.1.3.cmml" xref="S2.SS2.p1.2.m2.2.2.1.1.1.3">1</cn></apply><ci id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">…</ci><apply id="S2.SS2.p1.2.m2.3.3.2.2.2.cmml" xref="S2.SS2.p1.2.m2.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.p1.2.m2.3.3.2.2.2.1.cmml" xref="S2.SS2.p1.2.m2.3.3.2.2.2">subscript</csymbol><ci id="S2.SS2.p1.2.m2.3.3.2.2.2.2.cmml" xref="S2.SS2.p1.2.m2.3.3.2.2.2.2">𝑦</ci><ci id="S2.SS2.p1.2.m2.3.3.2.2.2.3.cmml" xref="S2.SS2.p1.2.m2.3.3.2.2.2.3">𝑀</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.3c">\mathcal{Y}=\{y_{1},...,y_{M}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.2.m2.3d">caligraphic_Y = { italic_y start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_y start_POSTSUBSCRIPT italic_M end_POSTSUBSCRIPT }</annotation></semantics></math> be the set of tokens in the target language. Suppose that we have an oracle function <math id="S2.SS2.p1.3.m3.1" class="ltx_Math" alttext="\text{TRANSLATE}:\mathcal{X}^{*}\rightarrow\mathcal{Y}^{*}" display="inline"><semantics id="S2.SS2.p1.3.m3.1a"><mrow id="S2.SS2.p1.3.m3.1.1" xref="S2.SS2.p1.3.m3.1.1.cmml"><mtext id="S2.SS2.p1.3.m3.1.1.2" xref="S2.SS2.p1.3.m3.1.1.2a.cmml">TRANSLATE</mtext><mo lspace="0.278em" rspace="0.278em" id="S2.SS2.p1.3.m3.1.1.1" xref="S2.SS2.p1.3.m3.1.1.1.cmml">:</mo><mrow id="S2.SS2.p1.3.m3.1.1.3" xref="S2.SS2.p1.3.m3.1.1.3.cmml"><msup id="S2.SS2.p1.3.m3.1.1.3.2" xref="S2.SS2.p1.3.m3.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.3.m3.1.1.3.2.2" xref="S2.SS2.p1.3.m3.1.1.3.2.2.cmml">𝒳</mi><mo id="S2.SS2.p1.3.m3.1.1.3.2.3" xref="S2.SS2.p1.3.m3.1.1.3.2.3.cmml">*</mo></msup><mo stretchy="false" id="S2.SS2.p1.3.m3.1.1.3.1" xref="S2.SS2.p1.3.m3.1.1.3.1.cmml">→</mo><msup id="S2.SS2.p1.3.m3.1.1.3.3" xref="S2.SS2.p1.3.m3.1.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.3.m3.1.1.3.3.2" xref="S2.SS2.p1.3.m3.1.1.3.3.2.cmml">𝒴</mi><mo id="S2.SS2.p1.3.m3.1.1.3.3.3" xref="S2.SS2.p1.3.m3.1.1.3.3.3.cmml">*</mo></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.3.m3.1b"><apply id="S2.SS2.p1.3.m3.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1"><ci id="S2.SS2.p1.3.m3.1.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1.1">:</ci><ci id="S2.SS2.p1.3.m3.1.1.2a.cmml" xref="S2.SS2.p1.3.m3.1.1.2"><mtext id="S2.SS2.p1.3.m3.1.1.2.cmml" xref="S2.SS2.p1.3.m3.1.1.2">TRANSLATE</mtext></ci><apply id="S2.SS2.p1.3.m3.1.1.3.cmml" xref="S2.SS2.p1.3.m3.1.1.3"><ci id="S2.SS2.p1.3.m3.1.1.3.1.cmml" xref="S2.SS2.p1.3.m3.1.1.3.1">→</ci><apply id="S2.SS2.p1.3.m3.1.1.3.2.cmml" xref="S2.SS2.p1.3.m3.1.1.3.2"><csymbol cd="ambiguous" id="S2.SS2.p1.3.m3.1.1.3.2.1.cmml" xref="S2.SS2.p1.3.m3.1.1.3.2">superscript</csymbol><ci id="S2.SS2.p1.3.m3.1.1.3.2.2.cmml" xref="S2.SS2.p1.3.m3.1.1.3.2.2">𝒳</ci><times id="S2.SS2.p1.3.m3.1.1.3.2.3.cmml" xref="S2.SS2.p1.3.m3.1.1.3.2.3"></times></apply><apply id="S2.SS2.p1.3.m3.1.1.3.3.cmml" xref="S2.SS2.p1.3.m3.1.1.3.3"><csymbol cd="ambiguous" id="S2.SS2.p1.3.m3.1.1.3.3.1.cmml" xref="S2.SS2.p1.3.m3.1.1.3.3">superscript</csymbol><ci id="S2.SS2.p1.3.m3.1.1.3.3.2.cmml" xref="S2.SS2.p1.3.m3.1.1.3.3.2">𝒴</ci><times id="S2.SS2.p1.3.m3.1.1.3.3.3.cmml" xref="S2.SS2.p1.3.m3.1.1.3.3.3"></times></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.3.m3.1c">\text{TRANSLATE}:\mathcal{X}^{*}\rightarrow\mathcal{Y}^{*}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.3.m3.1d">TRANSLATE : caligraphic_X start_POSTSUPERSCRIPT * end_POSTSUPERSCRIPT → caligraphic_Y start_POSTSUPERSCRIPT * end_POSTSUPERSCRIPT</annotation></semantics></math> that always produces a correct translation. We can imagine this to be a helpful speaker who is perfectly familiar with both languages and never misreads text. Then we can say that a multi-token string requires non-compositional translation if it can be translated correctly by the oracle as a whole, but it cannot be translated correctly by individually translating parts of the sentence and joining them (according to the target language’s word order). In other words, for a string of tokens <math id="S2.SS2.p1.4.m4.3" class="ltx_Math" alttext="x_{1},...,x_{n}" display="inline"><semantics id="S2.SS2.p1.4.m4.3a"><mrow id="S2.SS2.p1.4.m4.3.3.2" xref="S2.SS2.p1.4.m4.3.3.3.cmml"><msub id="S2.SS2.p1.4.m4.2.2.1.1" xref="S2.SS2.p1.4.m4.2.2.1.1.cmml"><mi id="S2.SS2.p1.4.m4.2.2.1.1.2" xref="S2.SS2.p1.4.m4.2.2.1.1.2.cmml">x</mi><mn id="S2.SS2.p1.4.m4.2.2.1.1.3" xref="S2.SS2.p1.4.m4.2.2.1.1.3.cmml">1</mn></msub><mo id="S2.SS2.p1.4.m4.3.3.2.3" xref="S2.SS2.p1.4.m4.3.3.3.cmml">,</mo><mi mathvariant="normal" id="S2.SS2.p1.4.m4.1.1" xref="S2.SS2.p1.4.m4.1.1.cmml">…</mi><mo id="S2.SS2.p1.4.m4.3.3.2.4" xref="S2.SS2.p1.4.m4.3.3.3.cmml">,</mo><msub id="S2.SS2.p1.4.m4.3.3.2.2" xref="S2.SS2.p1.4.m4.3.3.2.2.cmml"><mi id="S2.SS2.p1.4.m4.3.3.2.2.2" xref="S2.SS2.p1.4.m4.3.3.2.2.2.cmml">x</mi><mi id="S2.SS2.p1.4.m4.3.3.2.2.3" xref="S2.SS2.p1.4.m4.3.3.2.2.3.cmml">n</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.4.m4.3b"><list id="S2.SS2.p1.4.m4.3.3.3.cmml" xref="S2.SS2.p1.4.m4.3.3.2"><apply id="S2.SS2.p1.4.m4.2.2.1.1.cmml" xref="S2.SS2.p1.4.m4.2.2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.4.m4.2.2.1.1.1.cmml" xref="S2.SS2.p1.4.m4.2.2.1.1">subscript</csymbol><ci id="S2.SS2.p1.4.m4.2.2.1.1.2.cmml" xref="S2.SS2.p1.4.m4.2.2.1.1.2">𝑥</ci><cn type="integer" id="S2.SS2.p1.4.m4.2.2.1.1.3.cmml" xref="S2.SS2.p1.4.m4.2.2.1.1.3">1</cn></apply><ci id="S2.SS2.p1.4.m4.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1">…</ci><apply id="S2.SS2.p1.4.m4.3.3.2.2.cmml" xref="S2.SS2.p1.4.m4.3.3.2.2"><csymbol cd="ambiguous" id="S2.SS2.p1.4.m4.3.3.2.2.1.cmml" xref="S2.SS2.p1.4.m4.3.3.2.2">subscript</csymbol><ci id="S2.SS2.p1.4.m4.3.3.2.2.2.cmml" xref="S2.SS2.p1.4.m4.3.3.2.2.2">𝑥</ci><ci id="S2.SS2.p1.4.m4.3.3.2.2.3.cmml" xref="S2.SS2.p1.4.m4.3.3.2.2.3">𝑛</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.4.m4.3c">x_{1},...,x_{n}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.4.m4.3d">italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_x start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT</annotation></semantics></math>, <span id="footnote5" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_tag ltx_tag_note">5</span><math id="footnote5.m1.1" class="ltx_Math" alttext="\bigoplus_{X}" display="inline"><semantics id="footnote5.m1.1b"><msub id="footnote5.m1.1.1" xref="footnote5.m1.1.1.cmml"><mo id="footnote5.m1.1.1.2" xref="footnote5.m1.1.1.2.cmml">⨁</mo><mi id="footnote5.m1.1.1.3" xref="footnote5.m1.1.1.3.cmml">X</mi></msub><annotation-xml encoding="MathML-Content" id="footnote5.m1.1c"><apply id="footnote5.m1.1.1.cmml" xref="footnote5.m1.1.1"><csymbol cd="ambiguous" id="footnote5.m1.1.1.1.cmml" xref="footnote5.m1.1.1">subscript</csymbol><csymbol cd="latexml" id="footnote5.m1.1.1.2.cmml" xref="footnote5.m1.1.1.2">direct-sum</csymbol><ci id="footnote5.m1.1.1.3.cmml" xref="footnote5.m1.1.1.3">𝑋</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="footnote5.m1.1d">\bigoplus_{X}</annotation><annotation encoding="application/x-llamapun" id="footnote5.m1.1e">⨁ start_POSTSUBSCRIPT italic_X end_POSTSUBSCRIPT</annotation></semantics></math> denotes string concatenation given the word order of language <math id="footnote5.m2.1" class="ltx_Math" alttext="X" display="inline"><semantics id="footnote5.m2.1b"><mi id="footnote5.m2.1.1" xref="footnote5.m2.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="footnote5.m2.1c"><ci id="footnote5.m2.1.1.cmml" xref="footnote5.m2.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="footnote5.m2.1d">X</annotation><annotation encoding="application/x-llamapun" id="footnote5.m2.1e">italic_X</annotation></semantics></math>, i.e. if the word order is SVO, the tokens belonging to the subject should be placed in front of the tokens belonging to the verb, and so on.</span></span></span></p>
</div>
<div id="S2.SS2.p2" class="ltx_para">
<table id="S2.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E1.m1.19" class="ltx_Math" alttext="\begin{split}\overset{n}{\underset{i=1}{\bigoplus}}_{\begin{subarray}{c}Y\end{%
subarray}}\text{TRANSLATE}(x_{i})\neq\text{TRANSLATE}(\overset{n}{\underset{i=%
1}{\bigoplus}}_{\begin{subarray}{c}X\end{subarray}}x_{i})\end{split}" display="block"><semantics id="S2.E1.m1.19a"><mtable displaystyle="true" id="S2.E1.m1.19.19.4" xref="S2.E1.m1.17.17.2.cmml"><mtr id="S2.E1.m1.19.19.4a" xref="S2.E1.m1.17.17.2.cmml"><mtd class="ltx_align_right" columnalign="right" id="S2.E1.m1.19.19.4b" xref="S2.E1.m1.17.17.2.cmml"><mrow id="S2.E1.m1.19.19.4.17.17.17" xref="S2.E1.m1.17.17.2.cmml"><mrow id="S2.E1.m1.18.18.3.16.16.16.16" xref="S2.E1.m1.17.17.2.cmml"><msub id="S2.E1.m1.18.18.3.16.16.16.16.3" xref="S2.E1.m1.17.17.2.cmml"><munderover accent="true" accentunder="true" id="S2.E1.m1.3.3.3.3.3.3" xref="S2.E1.m1.3.3.3.3.3.3.cmml"><mo movablelimits="false" id="S2.E1.m1.3.3.3.3.3.3.2.2" xref="S2.E1.m1.3.3.3.3.3.3.2.2.cmml">⨁</mo><mrow id="S2.E1.m1.3.3.3.3.3.3.2.1" xref="S2.E1.m1.3.3.3.3.3.3.2.1.cmml"><mi mathsize="142%" id="S2.E1.m1.3.3.3.3.3.3.2.1.2" xref="S2.E1.m1.3.3.3.3.3.3.2.1.2.cmml">i</mi><mo mathsize="142%" id="S2.E1.m1.3.3.3.3.3.3.2.1.1" xref="S2.E1.m1.3.3.3.3.3.3.2.1.1.cmml">=</mo><mn mathsize="142%" id="S2.E1.m1.3.3.3.3.3.3.2.1.3" xref="S2.E1.m1.3.3.3.3.3.3.2.1.3.cmml">1</mn></mrow><mo id="S2.E1.m1.3.3.3.3.3.3.1" xref="S2.E1.m1.3.3.3.3.3.3.1.cmml">𝑛</mo></munderover><mtable id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.2.cmml"><mtr id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1a" xref="S2.E1.m1.1.1.1.1.1.1.1.2.cmml"><mtd id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1b" xref="S2.E1.m1.1.1.1.1.1.1.1.2.cmml"><mi id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">Y</mi></mtd></mtr></mtable></msub><mo id="S2.E1.m1.18.18.3.16.16.16.16.2" xref="S2.E1.m1.17.17.2.cmml">⁢</mo><mtext id="S2.E1.m1.4.4.4.4.4.4" xref="S2.E1.m1.4.4.4.4.4.4a.cmml">TRANSLATE</mtext><mo id="S2.E1.m1.18.18.3.16.16.16.16.2a" xref="S2.E1.m1.17.17.2.cmml">⁢</mo><mrow id="S2.E1.m1.18.18.3.16.16.16.16.1.1" xref="S2.E1.m1.17.17.2.cmml"><mo stretchy="false" id="S2.E1.m1.5.5.5.5.5.5" xref="S2.E1.m1.17.17.2.cmml">(</mo><msub id="S2.E1.m1.18.18.3.16.16.16.16.1.1.1" xref="S2.E1.m1.17.17.2.cmml"><mi id="S2.E1.m1.6.6.6.6.6.6" xref="S2.E1.m1.6.6.6.6.6.6.cmml">x</mi><mi id="S2.E1.m1.7.7.7.7.7.7.1" xref="S2.E1.m1.7.7.7.7.7.7.1.cmml">i</mi></msub><mo stretchy="false" id="S2.E1.m1.8.8.8.8.8.8" xref="S2.E1.m1.17.17.2.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.9.9.9.9.9.9" xref="S2.E1.m1.9.9.9.9.9.9.cmml">≠</mo><mrow id="S2.E1.m1.19.19.4.17.17.17.17" xref="S2.E1.m1.17.17.2.cmml"><mtext id="S2.E1.m1.10.10.10.10.10.10" xref="S2.E1.m1.10.10.10.10.10.10a.cmml">TRANSLATE</mtext><mo id="S2.E1.m1.19.19.4.17.17.17.17.2" xref="S2.E1.m1.17.17.2.cmml">⁢</mo><mrow id="S2.E1.m1.19.19.4.17.17.17.17.1.1" xref="S2.E1.m1.17.17.2.cmml"><mo stretchy="false" id="S2.E1.m1.11.11.11.11.11.11" xref="S2.E1.m1.17.17.2.cmml">(</mo><mrow id="S2.E1.m1.19.19.4.17.17.17.17.1.1.1" xref="S2.E1.m1.17.17.2.cmml"><msub id="S2.E1.m1.19.19.4.17.17.17.17.1.1.1.2" xref="S2.E1.m1.17.17.2.cmml"><munderover accent="true" accentunder="true" id="S2.E1.m1.12.12.12.12.12.12" xref="S2.E1.m1.12.12.12.12.12.12.cmml"><mo lspace="0em" movablelimits="false" id="S2.E1.m1.12.12.12.12.12.12.2.2" xref="S2.E1.m1.12.12.12.12.12.12.2.2.cmml">⨁</mo><mrow id="S2.E1.m1.12.12.12.12.12.12.2.1" xref="S2.E1.m1.12.12.12.12.12.12.2.1.cmml"><mi mathsize="142%" id="S2.E1.m1.12.12.12.12.12.12.2.1.2" xref="S2.E1.m1.12.12.12.12.12.12.2.1.2.cmml">i</mi><mo mathsize="142%" id="S2.E1.m1.12.12.12.12.12.12.2.1.1" xref="S2.E1.m1.12.12.12.12.12.12.2.1.1.cmml">=</mo><mn mathsize="142%" id="S2.E1.m1.12.12.12.12.12.12.2.1.3" xref="S2.E1.m1.12.12.12.12.12.12.2.1.3.cmml">1</mn></mrow><mo id="S2.E1.m1.12.12.12.12.12.12.1" xref="S2.E1.m1.12.12.12.12.12.12.1.cmml">𝑛</mo></munderover><mtable id="S2.E1.m1.2.2.2.2.2.2.1.1.1.1" xref="S2.E1.m1.2.2.2.2.2.2.1.2.cmml"><mtr id="S2.E1.m1.2.2.2.2.2.2.1.1.1.1a" xref="S2.E1.m1.2.2.2.2.2.2.1.2.cmml"><mtd id="S2.E1.m1.2.2.2.2.2.2.1.1.1.1b" xref="S2.E1.m1.2.2.2.2.2.2.1.2.cmml"><mi id="S2.E1.m1.2.2.2.2.2.2.1.1.1.1.1.1.1" xref="S2.E1.m1.2.2.2.2.2.2.1.1.1.1.1.1.1.cmml">X</mi></mtd></mtr></mtable></msub><mo id="S2.E1.m1.19.19.4.17.17.17.17.1.1.1.1" xref="S2.E1.m1.17.17.2.cmml">⁢</mo><msub id="S2.E1.m1.19.19.4.17.17.17.17.1.1.1.3" xref="S2.E1.m1.17.17.2.cmml"><mi id="S2.E1.m1.13.13.13.13.13.13" xref="S2.E1.m1.13.13.13.13.13.13.cmml">x</mi><mi id="S2.E1.m1.14.14.14.14.14.14.1" xref="S2.E1.m1.14.14.14.14.14.14.1.cmml">i</mi></msub></mrow><mo stretchy="false" id="S2.E1.m1.15.15.15.15.15.15" xref="S2.E1.m1.17.17.2.cmml">)</mo></mrow></mrow></mrow></mtd></mtr></mtable><annotation-xml encoding="MathML-Content" id="S2.E1.m1.19b"><apply id="S2.E1.m1.17.17.2.cmml" xref="S2.E1.m1.19.19.4"><neq id="S2.E1.m1.9.9.9.9.9.9.cmml" xref="S2.E1.m1.9.9.9.9.9.9"></neq><apply id="S2.E1.m1.16.16.1.1.cmml" xref="S2.E1.m1.19.19.4"><times id="S2.E1.m1.16.16.1.1.2.cmml" xref="S2.E1.m1.19.19.4"></times><apply id="S2.E1.m1.16.16.1.1.3.cmml" xref="S2.E1.m1.19.19.4"><csymbol cd="ambiguous" id="S2.E1.m1.16.16.1.1.3.1.cmml" xref="S2.E1.m1.19.19.4">subscript</csymbol><apply id="S2.E1.m1.3.3.3.3.3.3.cmml" xref="S2.E1.m1.3.3.3.3.3.3"><ci id="S2.E1.m1.3.3.3.3.3.3.1.cmml" xref="S2.E1.m1.3.3.3.3.3.3.1">𝑛</ci><apply id="S2.E1.m1.3.3.3.3.3.3.2.cmml" xref="S2.E1.m1.3.3.3.3.3.3"><apply id="S2.E1.m1.3.3.3.3.3.3.2.1.cmml" xref="S2.E1.m1.3.3.3.3.3.3.2.1"><eq id="S2.E1.m1.3.3.3.3.3.3.2.1.1.cmml" xref="S2.E1.m1.3.3.3.3.3.3.2.1.1"></eq><ci id="S2.E1.m1.3.3.3.3.3.3.2.1.2.cmml" xref="S2.E1.m1.3.3.3.3.3.3.2.1.2">𝑖</ci><cn type="integer" id="S2.E1.m1.3.3.3.3.3.3.2.1.3.cmml" xref="S2.E1.m1.3.3.3.3.3.3.2.1.3">1</cn></apply><csymbol cd="latexml" id="S2.E1.m1.3.3.3.3.3.3.2.2.cmml" xref="S2.E1.m1.3.3.3.3.3.3.2.2">direct-sum</csymbol></apply></apply><list id="S2.E1.m1.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1"><matrix id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1"><matrixrow id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1a.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1"><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1">𝑌</ci></matrixrow></matrix></list></apply><ci id="S2.E1.m1.4.4.4.4.4.4a.cmml" xref="S2.E1.m1.4.4.4.4.4.4"><mtext id="S2.E1.m1.4.4.4.4.4.4.cmml" xref="S2.E1.m1.4.4.4.4.4.4">TRANSLATE</mtext></ci><apply id="S2.E1.m1.16.16.1.1.1.1.1.cmml" xref="S2.E1.m1.19.19.4"><csymbol cd="ambiguous" id="S2.E1.m1.16.16.1.1.1.1.1.1.cmml" xref="S2.E1.m1.19.19.4">subscript</csymbol><ci id="S2.E1.m1.6.6.6.6.6.6.cmml" xref="S2.E1.m1.6.6.6.6.6.6">𝑥</ci><ci id="S2.E1.m1.7.7.7.7.7.7.1.cmml" xref="S2.E1.m1.7.7.7.7.7.7.1">𝑖</ci></apply></apply><apply id="S2.E1.m1.17.17.2.2.cmml" xref="S2.E1.m1.19.19.4"><times id="S2.E1.m1.17.17.2.2.2.cmml" xref="S2.E1.m1.19.19.4"></times><ci id="S2.E1.m1.10.10.10.10.10.10a.cmml" xref="S2.E1.m1.10.10.10.10.10.10"><mtext id="S2.E1.m1.10.10.10.10.10.10.cmml" xref="S2.E1.m1.10.10.10.10.10.10">TRANSLATE</mtext></ci><apply id="S2.E1.m1.17.17.2.2.1.1.1.cmml" xref="S2.E1.m1.19.19.4"><times id="S2.E1.m1.17.17.2.2.1.1.1.1.cmml" xref="S2.E1.m1.19.19.4"></times><apply id="S2.E1.m1.17.17.2.2.1.1.1.2.cmml" xref="S2.E1.m1.19.19.4"><csymbol cd="ambiguous" id="S2.E1.m1.17.17.2.2.1.1.1.2.1.cmml" xref="S2.E1.m1.19.19.4">subscript</csymbol><apply id="S2.E1.m1.12.12.12.12.12.12.cmml" xref="S2.E1.m1.12.12.12.12.12.12"><ci id="S2.E1.m1.12.12.12.12.12.12.1.cmml" xref="S2.E1.m1.12.12.12.12.12.12.1">𝑛</ci><apply id="S2.E1.m1.12.12.12.12.12.12.2.cmml" xref="S2.E1.m1.12.12.12.12.12.12"><apply id="S2.E1.m1.12.12.12.12.12.12.2.1.cmml" xref="S2.E1.m1.12.12.12.12.12.12.2.1"><eq id="S2.E1.m1.12.12.12.12.12.12.2.1.1.cmml" xref="S2.E1.m1.12.12.12.12.12.12.2.1.1"></eq><ci id="S2.E1.m1.12.12.12.12.12.12.2.1.2.cmml" xref="S2.E1.m1.12.12.12.12.12.12.2.1.2">𝑖</ci><cn type="integer" id="S2.E1.m1.12.12.12.12.12.12.2.1.3.cmml" xref="S2.E1.m1.12.12.12.12.12.12.2.1.3">1</cn></apply><csymbol cd="latexml" id="S2.E1.m1.12.12.12.12.12.12.2.2.cmml" xref="S2.E1.m1.12.12.12.12.12.12.2.2">direct-sum</csymbol></apply></apply><list id="S2.E1.m1.2.2.2.2.2.2.1.2.cmml" xref="S2.E1.m1.2.2.2.2.2.2.1.1.1.1"><matrix id="S2.E1.m1.2.2.2.2.2.2.1.1.1.1.cmml" xref="S2.E1.m1.2.2.2.2.2.2.1.1.1.1"><matrixrow id="S2.E1.m1.2.2.2.2.2.2.1.1.1.1a.cmml" xref="S2.E1.m1.2.2.2.2.2.2.1.1.1.1"><ci id="S2.E1.m1.2.2.2.2.2.2.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.2.2.2.2.2.2.1.1.1.1.1.1.1">𝑋</ci></matrixrow></matrix></list></apply><apply id="S2.E1.m1.17.17.2.2.1.1.1.3.cmml" xref="S2.E1.m1.19.19.4"><csymbol cd="ambiguous" id="S2.E1.m1.17.17.2.2.1.1.1.3.1.cmml" xref="S2.E1.m1.19.19.4">subscript</csymbol><ci id="S2.E1.m1.13.13.13.13.13.13.cmml" xref="S2.E1.m1.13.13.13.13.13.13">𝑥</ci><ci id="S2.E1.m1.14.14.14.14.14.14.1.cmml" xref="S2.E1.m1.14.14.14.14.14.14.1">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.19c">\begin{split}\overset{n}{\underset{i=1}{\bigoplus}}_{\begin{subarray}{c}Y\end{%
subarray}}\text{TRANSLATE}(x_{i})\neq\text{TRANSLATE}(\overset{n}{\underset{i=%
1}{\bigoplus}}_{\begin{subarray}{c}X\end{subarray}}x_{i})\end{split}</annotation><annotation encoding="application/x-llamapun" id="S2.E1.m1.19d">start_ROW start_CELL overitalic_n start_ARG start_UNDERACCENT italic_i = 1 end_UNDERACCENT start_ARG ⨁ end_ARG end_ARG start_POSTSUBSCRIPT start_ARG start_ROW start_CELL italic_Y end_CELL end_ROW end_ARG end_POSTSUBSCRIPT TRANSLATE ( italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ≠ TRANSLATE ( overitalic_n start_ARG start_UNDERACCENT italic_i = 1 end_UNDERACCENT start_ARG ⨁ end_ARG end_ARG start_POSTSUBSCRIPT start_ARG start_ROW start_CELL italic_X end_CELL end_ROW end_ARG end_POSTSUBSCRIPT italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<div id="S2.SS2.p3" class="ltx_para">
<p id="S2.SS2.p3.1" class="ltx_p">We note that this definition is very general and also includes other phenomena such as multi-word expressions and named entities. However, we can now use this definition to create a relevant synthetic task, allowing us to observe translation compositionality under different settings (<math id="S2.SS2.p3.1.m1.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:artificial-language-exps}" display="inline"><semantics id="S2.SS2.p3.1.m1.1a"><mrow id="S2.SS2.p3.1.m1.1.1" xref="S2.SS2.p3.1.m1.1.1.cmml"><mi mathvariant="normal" id="S2.SS2.p3.1.m1.1.1.2" xref="S2.SS2.p3.1.m1.1.1.2.cmml">§</mi><mo id="S2.SS2.p3.1.m1.1.1.1" xref="S2.SS2.p3.1.m1.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S2.SS2.p3.1.m1.1.1.3" xref="S2.SS2.p3.1.m1.1.1.3c.cmml"><a href="#S4.SS1" title="4.1 Artificial Language Translation ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">4.1</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.1.m1.1b"><apply id="S2.SS2.p3.1.m1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1"><times id="S2.SS2.p3.1.m1.1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1.1"></times><ci id="S2.SS2.p3.1.m1.1.1.2.cmml" xref="S2.SS2.p3.1.m1.1.1.2">§</ci><ci id="S2.SS2.p3.1.m1.1.1.3c.cmml" xref="S2.SS2.p3.1.m1.1.1.3"><mtext mathvariant="italic" id="S2.SS2.p3.1.m1.1.1.3.cmml" xref="S2.SS2.p3.1.m1.1.1.3"><a href="#S4.SS1" title="4.1 Artificial Language Translation ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">4.1</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.1.m1.1c">\lx@sectionsign\ref{sec:artificial-language-exps}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.1.m1.1d">§</annotation></semantics></math>).</p>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Idioms and Data Collection</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">We can use the formal definition from the previous section to generate synthetic data for experiments. However, we ultimately want to improve translation of real idioms. To do so, we collect a dataset of natural sentences to evaluate commercial systems and the model we seek to improve.</p>
</div>
<div id="S3.p2" class="ltx_para">
<p id="S3.p2.1" class="ltx_p">Although a large corpus of potentially idiomatic expressions exists in English <cite class="ltx_cite ltx_citemacro_cite">Haagsma et al. (<a href="#bib.bib13" title="" class="ltx_ref">2020</a>)</cite>, there are no readily accessible equivalents in other languages. Therefore, we collected idioms in French, Finnish, and Japanese from language-learning sites, listed in <a href="#A2" title="Appendix B Idiom Sources ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix B</span></a>. These languages were chosen for phylogenetic diversity, and due to availability of commercial translation systems. In total, there were 148 French idioms collected, 92 in Finnish, and 1336 in Japanese.</p>
</div>
<div id="S3.p3" class="ltx_para">
<p id="S3.p3.1" class="ltx_p">To collect sentences containing these idioms, we matched on lemmatized forms from the 2018 version of OpenSubtitles <cite class="ltx_cite ltx_citemacro_cite">Lison et al. (<a href="#bib.bib22" title="" class="ltx_ref">2018</a>)</cite>, where lemmatization was performed with Stanza <cite class="ltx_cite ltx_citemacro_cite">Qi et al. (<a href="#bib.bib34" title="" class="ltx_ref">2020</a>)</cite>. In total, there were 85632 French sentences containing potentially idiomatic expressions, 51811 Finnish sentences, and 23018 Japanese sentences. To filter out unaligned sentences, we scored each source and reference sentence using COMET-QE <cite class="ltx_cite ltx_citemacro_cite">Rei et al. (<a href="#bib.bib36" title="" class="ltx_ref">2020</a>)</cite> and removed the bottom 10% of each language’s sentences by COMET-QE scores.</p>
</div>
<div id="S3.p4" class="ltx_para">
<p id="S3.p4.1" class="ltx_p">Some idioms have a plausible literal meaning (such as "kick the bucket" to mean kicking a physical bucket). To make sure that all examples in the idiomatic test set were actually idiomatic, we sorted sentences into an idiomatic test set where the idiomatic meaning of a phrase was used (e.g. “to die”) and a literal test set, where the literal meaning of the phrase was used (e.g. kicking a physical bucket). The first 100 examples containing each idiom’s lemmatized form were collected, and up to the first 3 (for Japanese) or 5 (for Finnish and French) literal and figurative examples in this set were collected to create the test set. This was to avoid dominance of very common idioms in the test set. This created two test sets related to the idiom list for each language, the <span id="S3.p4.1.1" class="ltx_text ltx_font_italic">idiomatic</span> and <span id="S3.p4.1.2" class="ltx_text ltx_font_italic">literal</span> test sets.</p>
</div>
<div id="S3.p5" class="ltx_para">
<p id="S3.p5.3" class="ltx_p">To validate these judgments, we hired native annotators in French and Finnish. They were presented with examples from the final literal and idiomatic test sets in a shuffled order, and asked to label them with idiomatic, literal, or N/A labels if they didn’t think it was an instance of either. Agreement (Krippendorff’s <math id="S3.p5.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S3.p5.1.m1.1a"><mi id="S3.p5.1.m1.1.1" xref="S3.p5.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S3.p5.1.m1.1b"><ci id="S3.p5.1.m1.1.1.cmml" xref="S3.p5.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p5.1.m1.1c">\alpha</annotation><annotation encoding="application/x-llamapun" id="S3.p5.1.m1.1d">italic_α</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">Krippendorff (<a href="#bib.bib20" title="" class="ltx_ref">1970</a>); Castro (<a href="#bib.bib6" title="" class="ltx_ref">2017</a>)</cite>) in both cases was moderately high (French <math id="S3.p5.2.m2.1" class="ltx_Math" alttext="\alpha=0.5754" display="inline"><semantics id="S3.p5.2.m2.1a"><mrow id="S3.p5.2.m2.1.1" xref="S3.p5.2.m2.1.1.cmml"><mi id="S3.p5.2.m2.1.1.2" xref="S3.p5.2.m2.1.1.2.cmml">α</mi><mo id="S3.p5.2.m2.1.1.1" xref="S3.p5.2.m2.1.1.1.cmml">=</mo><mn id="S3.p5.2.m2.1.1.3" xref="S3.p5.2.m2.1.1.3.cmml">0.5754</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.p5.2.m2.1b"><apply id="S3.p5.2.m2.1.1.cmml" xref="S3.p5.2.m2.1.1"><eq id="S3.p5.2.m2.1.1.1.cmml" xref="S3.p5.2.m2.1.1.1"></eq><ci id="S3.p5.2.m2.1.1.2.cmml" xref="S3.p5.2.m2.1.1.2">𝛼</ci><cn type="float" id="S3.p5.2.m2.1.1.3.cmml" xref="S3.p5.2.m2.1.1.3">0.5754</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p5.2.m2.1c">\alpha=0.5754</annotation><annotation encoding="application/x-llamapun" id="S3.p5.2.m2.1d">italic_α = 0.5754</annotation></semantics></math>, Finnish <math id="S3.p5.3.m3.1" class="ltx_Math" alttext="\alpha=0.6454" display="inline"><semantics id="S3.p5.3.m3.1a"><mrow id="S3.p5.3.m3.1.1" xref="S3.p5.3.m3.1.1.cmml"><mi id="S3.p5.3.m3.1.1.2" xref="S3.p5.3.m3.1.1.2.cmml">α</mi><mo id="S3.p5.3.m3.1.1.1" xref="S3.p5.3.m3.1.1.1.cmml">=</mo><mn id="S3.p5.3.m3.1.1.3" xref="S3.p5.3.m3.1.1.3.cmml">0.6454</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.p5.3.m3.1b"><apply id="S3.p5.3.m3.1.1.cmml" xref="S3.p5.3.m3.1.1"><eq id="S3.p5.3.m3.1.1.1.cmml" xref="S3.p5.3.m3.1.1.1"></eq><ci id="S3.p5.3.m3.1.1.2.cmml" xref="S3.p5.3.m3.1.1.2">𝛼</ci><cn type="float" id="S3.p5.3.m3.1.1.3.cmml" xref="S3.p5.3.m3.1.1.3">0.6454</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p5.3.m3.1c">\alpha=0.6454</annotation><annotation encoding="application/x-llamapun" id="S3.p5.3.m3.1d">italic_α = 0.6454</annotation></semantics></math>). Details can be found in <a href="#A4" title="Appendix D Native Annotator Recruiting ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix D</span></a>.</p>
</div>
<div id="S3.p6" class="ltx_para">
<p id="S3.p6.1" class="ltx_p">Finally, we collect two random test sets, one which is in-domain and another which is out-of-domain. For the in-domain test set, we simply select sentences from the development set of OpenSubtitles (see <a href="#S6.SS2" title="6.2 Data ‣ 6 Experimental Settings ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">subsection 6.2</span></a> for details on our split of OpenSubtitles). For the out-of-domain test set, we use the Ted Talks corpus <cite class="ltx_cite ltx_citemacro_cite">Reimers and Gurevych (<a href="#bib.bib37" title="" class="ltx_ref">2020</a>)</cite>. This is to ensure that translation quality of other, unrelated sentences is not impacted by any modifications meant to improve translation of idioms. Topics discussed and vocabulary used in Ted Talks may be slightly different from what is discussed in movies or TV shows, so training the model on OpenSubtitles and testing on Ted Talks allows us to evaluate model generalization. For both test sets, to control for translation length as a source of difficulty, sentences were length-matched on the target side with corresponding sentences in the idiomatic set. This created the <span id="S3.p6.1.1" class="ltx_text ltx_font_italic">random</span> set, which is the same size as the idiomatic test set. All three test sets are summarized in <a href="#S3.T2" title="Table 2 ‣ 3 Idioms and Data Collection ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 2</span></a>.</p>
</div>
<figure id="S3.T2" class="ltx_table">
<div id="S3.T2.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:433.6pt;height:95.6pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(53.6pt,-11.8pt) scale(1.32819567340834,1.32819567340834) ;">
<table id="S3.T2.1.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S3.T2.1.1.1.1" class="ltx_tr">
<th id="S3.T2.1.1.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt">Language</th>
<th id="S3.T2.1.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Idiom matches</th>
<th id="S3.T2.1.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Idiomatic</th>
<th id="S3.T2.1.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Literal</th>
<th id="S3.T2.1.1.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Random (in)</th>
<th id="S3.T2.1.1.1.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Random (out)</th>
<th id="S3.T2.1.1.1.1.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Total</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S3.T2.1.1.2.1" class="ltx_tr">
<th id="S3.T2.1.1.2.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt"><span id="S3.T2.1.1.2.1.1.1" class="ltx_text ltx_font_typewriter">fr</span></th>
<td id="S3.T2.1.1.2.1.2" class="ltx_td ltx_align_center ltx_border_tt">85632</td>
<td id="S3.T2.1.1.2.1.3" class="ltx_td ltx_align_center ltx_border_tt">777</td>
<td id="S3.T2.1.1.2.1.4" class="ltx_td ltx_align_center ltx_border_tt">79</td>
<td id="S3.T2.1.1.2.1.5" class="ltx_td ltx_align_center ltx_border_tt">777</td>
<td id="S3.T2.1.1.2.1.6" class="ltx_td ltx_align_center ltx_border_tt">777</td>
<td id="S3.T2.1.1.2.1.7" class="ltx_td ltx_align_center ltx_border_tt">2410</td>
</tr>
<tr id="S3.T2.1.1.3.2" class="ltx_tr">
<th id="S3.T2.1.1.3.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><span id="S3.T2.1.1.3.2.1.1" class="ltx_text ltx_font_typewriter">fi</span></th>
<td id="S3.T2.1.1.3.2.2" class="ltx_td ltx_align_center ltx_border_t">51811</td>
<td id="S3.T2.1.1.3.2.3" class="ltx_td ltx_align_center ltx_border_t">449</td>
<td id="S3.T2.1.1.3.2.4" class="ltx_td ltx_align_center ltx_border_t">81</td>
<td id="S3.T2.1.1.3.2.5" class="ltx_td ltx_align_center ltx_border_t">449</td>
<td id="S3.T2.1.1.3.2.6" class="ltx_td ltx_align_center ltx_border_t">449</td>
<td id="S3.T2.1.1.3.2.7" class="ltx_td ltx_align_center ltx_border_t">1428</td>
</tr>
<tr id="S3.T2.1.1.4.3" class="ltx_tr">
<th id="S3.T2.1.1.4.3.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb ltx_border_t"><span id="S3.T2.1.1.4.3.1.1" class="ltx_text ltx_font_typewriter">ja</span></th>
<td id="S3.T2.1.1.4.3.2" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t">23018</td>
<td id="S3.T2.1.1.4.3.3" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t">3253</td>
<td id="S3.T2.1.1.4.3.4" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t">389</td>
<td id="S3.T2.1.1.4.3.5" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t">3253</td>
<td id="S3.T2.1.1.4.3.6" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t">3253</td>
<td id="S3.T2.1.1.4.3.7" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t">10148</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Size of test sets for each language. The idiomatic and literal sentences contain strings matching known idioms (after lemmatization), and the in-domain random set contains unrelated sentences from OpenSubtitles, but the out-of-domain random set contains unrelated sentences from the Ted Talks corpus.</figcaption>
</figure>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Evaluating Non-Compositional Translation</h2>

<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Artificial Language Translation</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p">We first use the definition of non-compositional translation in <math id="S4.SS1.p1.1.m1.1" class="ltx_Math" alttext="(\lx@sectionsign\ref{sec:noncomp-trans-defn})" display="inline"><semantics id="S4.SS1.p1.1.m1.1a"><mrow id="S4.SS1.p1.1.m1.1.1.1" xref="S4.SS1.p1.1.m1.1.1.1.1.cmml"><mo stretchy="false" id="S4.SS1.p1.1.m1.1.1.1.2" xref="S4.SS1.p1.1.m1.1.1.1.1.cmml">(</mo><mrow id="S4.SS1.p1.1.m1.1.1.1.1" xref="S4.SS1.p1.1.m1.1.1.1.1.cmml"><mi mathvariant="normal" id="S4.SS1.p1.1.m1.1.1.1.1.2" xref="S4.SS1.p1.1.m1.1.1.1.1.2.cmml">§</mi><mo id="S4.SS1.p1.1.m1.1.1.1.1.1" xref="S4.SS1.p1.1.m1.1.1.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S4.SS1.p1.1.m1.1.1.1.1.3" xref="S4.SS1.p1.1.m1.1.1.1.1.3c.cmml"><a href="#S2" title="2 Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">2</span></a></mtext></mrow><mo stretchy="false" id="S4.SS1.p1.1.m1.1.1.1.3" xref="S4.SS1.p1.1.m1.1.1.1.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.1b"><apply id="S4.SS1.p1.1.m1.1.1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1.1"><times id="S4.SS1.p1.1.m1.1.1.1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1.1.1.1"></times><ci id="S4.SS1.p1.1.m1.1.1.1.1.2.cmml" xref="S4.SS1.p1.1.m1.1.1.1.1.2">§</ci><ci id="S4.SS1.p1.1.m1.1.1.1.1.3c.cmml" xref="S4.SS1.p1.1.m1.1.1.1.1.3"><mtext mathvariant="italic" id="S4.SS1.p1.1.m1.1.1.1.1.3.cmml" xref="S4.SS1.p1.1.m1.1.1.1.1.3"><a href="#S2" title="2 Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">2</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.1c">(\lx@sectionsign\ref{sec:noncomp-trans-defn})</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p1.1.m1.1d">( § )</annotation></semantics></math> to create a synthetic task. This allows us to gain an understanding of how much data is required to memorize non-compositional patterns. Although this experiment is not realistic to natural language (notably, there is no token-level ambiguity in this experiment), we note that using synthetic experiments allows us to easily extend the data generation setup and examine model behaviour along many different conditions, such as informativity.</p>
</div>
<div id="S4.SS1.p2" class="ltx_para">
<p id="S4.SS1.p2.6" class="ltx_p">The source language in these experiments was composed of tokens 0 through 9, <math id="S4.SS1.p2.1.m1.5" class="ltx_Math" alttext="X=\{0,1,2,...,9\}" display="inline"><semantics id="S4.SS1.p2.1.m1.5a"><mrow id="S4.SS1.p2.1.m1.5.6" xref="S4.SS1.p2.1.m1.5.6.cmml"><mi id="S4.SS1.p2.1.m1.5.6.2" xref="S4.SS1.p2.1.m1.5.6.2.cmml">X</mi><mo id="S4.SS1.p2.1.m1.5.6.1" xref="S4.SS1.p2.1.m1.5.6.1.cmml">=</mo><mrow id="S4.SS1.p2.1.m1.5.6.3.2" xref="S4.SS1.p2.1.m1.5.6.3.1.cmml"><mo stretchy="false" id="S4.SS1.p2.1.m1.5.6.3.2.1" xref="S4.SS1.p2.1.m1.5.6.3.1.cmml">{</mo><mn id="S4.SS1.p2.1.m1.1.1" xref="S4.SS1.p2.1.m1.1.1.cmml">0</mn><mo id="S4.SS1.p2.1.m1.5.6.3.2.2" xref="S4.SS1.p2.1.m1.5.6.3.1.cmml">,</mo><mn id="S4.SS1.p2.1.m1.2.2" xref="S4.SS1.p2.1.m1.2.2.cmml">1</mn><mo id="S4.SS1.p2.1.m1.5.6.3.2.3" xref="S4.SS1.p2.1.m1.5.6.3.1.cmml">,</mo><mn id="S4.SS1.p2.1.m1.3.3" xref="S4.SS1.p2.1.m1.3.3.cmml">2</mn><mo id="S4.SS1.p2.1.m1.5.6.3.2.4" xref="S4.SS1.p2.1.m1.5.6.3.1.cmml">,</mo><mi mathvariant="normal" id="S4.SS1.p2.1.m1.4.4" xref="S4.SS1.p2.1.m1.4.4.cmml">…</mi><mo id="S4.SS1.p2.1.m1.5.6.3.2.5" xref="S4.SS1.p2.1.m1.5.6.3.1.cmml">,</mo><mn id="S4.SS1.p2.1.m1.5.5" xref="S4.SS1.p2.1.m1.5.5.cmml">9</mn><mo stretchy="false" id="S4.SS1.p2.1.m1.5.6.3.2.6" xref="S4.SS1.p2.1.m1.5.6.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.5b"><apply id="S4.SS1.p2.1.m1.5.6.cmml" xref="S4.SS1.p2.1.m1.5.6"><eq id="S4.SS1.p2.1.m1.5.6.1.cmml" xref="S4.SS1.p2.1.m1.5.6.1"></eq><ci id="S4.SS1.p2.1.m1.5.6.2.cmml" xref="S4.SS1.p2.1.m1.5.6.2">𝑋</ci><set id="S4.SS1.p2.1.m1.5.6.3.1.cmml" xref="S4.SS1.p2.1.m1.5.6.3.2"><cn type="integer" id="S4.SS1.p2.1.m1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1">0</cn><cn type="integer" id="S4.SS1.p2.1.m1.2.2.cmml" xref="S4.SS1.p2.1.m1.2.2">1</cn><cn type="integer" id="S4.SS1.p2.1.m1.3.3.cmml" xref="S4.SS1.p2.1.m1.3.3">2</cn><ci id="S4.SS1.p2.1.m1.4.4.cmml" xref="S4.SS1.p2.1.m1.4.4">…</ci><cn type="integer" id="S4.SS1.p2.1.m1.5.5.cmml" xref="S4.SS1.p2.1.m1.5.5">9</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.1.m1.5c">X=\{0,1,2,...,9\}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.1.m1.5d">italic_X = { 0 , 1 , 2 , … , 9 }</annotation></semantics></math>. The target language was produced by adding 10 to each token, <math id="S4.SS1.p2.2.m2.3" class="ltx_Math" alttext="Y=\{10,...,19\}" display="inline"><semantics id="S4.SS1.p2.2.m2.3a"><mrow id="S4.SS1.p2.2.m2.3.4" xref="S4.SS1.p2.2.m2.3.4.cmml"><mi id="S4.SS1.p2.2.m2.3.4.2" xref="S4.SS1.p2.2.m2.3.4.2.cmml">Y</mi><mo id="S4.SS1.p2.2.m2.3.4.1" xref="S4.SS1.p2.2.m2.3.4.1.cmml">=</mo><mrow id="S4.SS1.p2.2.m2.3.4.3.2" xref="S4.SS1.p2.2.m2.3.4.3.1.cmml"><mo stretchy="false" id="S4.SS1.p2.2.m2.3.4.3.2.1" xref="S4.SS1.p2.2.m2.3.4.3.1.cmml">{</mo><mn id="S4.SS1.p2.2.m2.1.1" xref="S4.SS1.p2.2.m2.1.1.cmml">10</mn><mo id="S4.SS1.p2.2.m2.3.4.3.2.2" xref="S4.SS1.p2.2.m2.3.4.3.1.cmml">,</mo><mi mathvariant="normal" id="S4.SS1.p2.2.m2.2.2" xref="S4.SS1.p2.2.m2.2.2.cmml">…</mi><mo id="S4.SS1.p2.2.m2.3.4.3.2.3" xref="S4.SS1.p2.2.m2.3.4.3.1.cmml">,</mo><mn id="S4.SS1.p2.2.m2.3.3" xref="S4.SS1.p2.2.m2.3.3.cmml">19</mn><mo stretchy="false" id="S4.SS1.p2.2.m2.3.4.3.2.4" xref="S4.SS1.p2.2.m2.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.2.m2.3b"><apply id="S4.SS1.p2.2.m2.3.4.cmml" xref="S4.SS1.p2.2.m2.3.4"><eq id="S4.SS1.p2.2.m2.3.4.1.cmml" xref="S4.SS1.p2.2.m2.3.4.1"></eq><ci id="S4.SS1.p2.2.m2.3.4.2.cmml" xref="S4.SS1.p2.2.m2.3.4.2">𝑌</ci><set id="S4.SS1.p2.2.m2.3.4.3.1.cmml" xref="S4.SS1.p2.2.m2.3.4.3.2"><cn type="integer" id="S4.SS1.p2.2.m2.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1">10</cn><ci id="S4.SS1.p2.2.m2.2.2.cmml" xref="S4.SS1.p2.2.m2.2.2">…</ci><cn type="integer" id="S4.SS1.p2.2.m2.3.3.cmml" xref="S4.SS1.p2.2.m2.3.3">19</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.2.m2.3c">Y=\{10,...,19\}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.2.m2.3d">italic_Y = { 10 , … , 19 }</annotation></semantics></math>. The translation rule was to add 10 to the value of each token in the source language, e.g. <math id="S4.SS1.p2.3.m3.1" class="ltx_Math" alttext="0\rightarrow 10" display="inline"><semantics id="S4.SS1.p2.3.m3.1a"><mrow id="S4.SS1.p2.3.m3.1.1" xref="S4.SS1.p2.3.m3.1.1.cmml"><mn id="S4.SS1.p2.3.m3.1.1.2" xref="S4.SS1.p2.3.m3.1.1.2.cmml">0</mn><mo stretchy="false" id="S4.SS1.p2.3.m3.1.1.1" xref="S4.SS1.p2.3.m3.1.1.1.cmml">→</mo><mn id="S4.SS1.p2.3.m3.1.1.3" xref="S4.SS1.p2.3.m3.1.1.3.cmml">10</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.3.m3.1b"><apply id="S4.SS1.p2.3.m3.1.1.cmml" xref="S4.SS1.p2.3.m3.1.1"><ci id="S4.SS1.p2.3.m3.1.1.1.cmml" xref="S4.SS1.p2.3.m3.1.1.1">→</ci><cn type="integer" id="S4.SS1.p2.3.m3.1.1.2.cmml" xref="S4.SS1.p2.3.m3.1.1.2">0</cn><cn type="integer" id="S4.SS1.p2.3.m3.1.1.3.cmml" xref="S4.SS1.p2.3.m3.1.1.3">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.3.m3.1c">0\rightarrow 10</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.3.m3.1d">0 → 10</annotation></semantics></math>, <math id="S4.SS1.p2.4.m4.1" class="ltx_Math" alttext="1\rightarrow 11" display="inline"><semantics id="S4.SS1.p2.4.m4.1a"><mrow id="S4.SS1.p2.4.m4.1.1" xref="S4.SS1.p2.4.m4.1.1.cmml"><mn id="S4.SS1.p2.4.m4.1.1.2" xref="S4.SS1.p2.4.m4.1.1.2.cmml">1</mn><mo stretchy="false" id="S4.SS1.p2.4.m4.1.1.1" xref="S4.SS1.p2.4.m4.1.1.1.cmml">→</mo><mn id="S4.SS1.p2.4.m4.1.1.3" xref="S4.SS1.p2.4.m4.1.1.3.cmml">11</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.4.m4.1b"><apply id="S4.SS1.p2.4.m4.1.1.cmml" xref="S4.SS1.p2.4.m4.1.1"><ci id="S4.SS1.p2.4.m4.1.1.1.cmml" xref="S4.SS1.p2.4.m4.1.1.1">→</ci><cn type="integer" id="S4.SS1.p2.4.m4.1.1.2.cmml" xref="S4.SS1.p2.4.m4.1.1.2">1</cn><cn type="integer" id="S4.SS1.p2.4.m4.1.1.3.cmml" xref="S4.SS1.p2.4.m4.1.1.3">11</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.4.m4.1c">1\rightarrow 11</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.4.m4.1d">1 → 11</annotation></semantics></math>. We add a single non-compositional rule that doesn’t follow this trend, <math id="S4.SS1.p2.5.m5.1" class="ltx_Math" alttext="0\hskip 5.69054pt1\rightarrow 12" display="inline"><semantics id="S4.SS1.p2.5.m5.1a"><mrow id="S4.SS1.p2.5.m5.1.1" xref="S4.SS1.p2.5.m5.1.1.cmml"><mrow id="S4.SS1.p2.5.m5.1.1.2" xref="S4.SS1.p2.5.m5.1.1.2.cmml"><mn mathcolor="#FF0000" id="S4.SS1.p2.5.m5.1.1.2.2" xref="S4.SS1.p2.5.m5.1.1.2.2.cmml">0</mn><mo lspace="0.570em" mathcolor="#FF0000" id="S4.SS1.p2.5.m5.1.1.2.1" xref="S4.SS1.p2.5.m5.1.1.2.1.cmml">⁢</mo><mn mathcolor="#FF0000" id="S4.SS1.p2.5.m5.1.1.2.3" xref="S4.SS1.p2.5.m5.1.1.2.3.cmml">1</mn></mrow><mo mathcolor="#FF0000" stretchy="false" id="S4.SS1.p2.5.m5.1.1.1" xref="S4.SS1.p2.5.m5.1.1.1.cmml">→</mo><mn mathcolor="#FF0000" id="S4.SS1.p2.5.m5.1.1.3" xref="S4.SS1.p2.5.m5.1.1.3.cmml">12</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.5.m5.1b"><apply id="S4.SS1.p2.5.m5.1.1.cmml" xref="S4.SS1.p2.5.m5.1.1"><ci id="S4.SS1.p2.5.m5.1.1.1.cmml" xref="S4.SS1.p2.5.m5.1.1.1">→</ci><apply id="S4.SS1.p2.5.m5.1.1.2.cmml" xref="S4.SS1.p2.5.m5.1.1.2"><times id="S4.SS1.p2.5.m5.1.1.2.1.cmml" xref="S4.SS1.p2.5.m5.1.1.2.1"></times><cn type="integer" id="S4.SS1.p2.5.m5.1.1.2.2.cmml" xref="S4.SS1.p2.5.m5.1.1.2.2">0</cn><cn type="integer" id="S4.SS1.p2.5.m5.1.1.2.3.cmml" xref="S4.SS1.p2.5.m5.1.1.2.3">1</cn></apply><cn type="integer" id="S4.SS1.p2.5.m5.1.1.3.cmml" xref="S4.SS1.p2.5.m5.1.1.3">12</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.5.m5.1c">0\hskip 5.69054pt1\rightarrow 12</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.5.m5.1d">0 1 → 12</annotation></semantics></math><span id="S4.SS1.p2.6.1" class="ltx_text" style="color:#FF0000;"> </span> (rather than <math id="S4.SS1.p2.6.m6.1" class="ltx_Math" alttext="0\hskip 5.69054pt1\rightarrow 10\hskip 5.69054pt11" display="inline"><semantics id="S4.SS1.p2.6.m6.1a"><mrow id="S4.SS1.p2.6.m6.1.1" xref="S4.SS1.p2.6.m6.1.1.cmml"><mrow id="S4.SS1.p2.6.m6.1.1.2" xref="S4.SS1.p2.6.m6.1.1.2.cmml"><mn id="S4.SS1.p2.6.m6.1.1.2.2" xref="S4.SS1.p2.6.m6.1.1.2.2.cmml">0</mn><mo lspace="0.570em" id="S4.SS1.p2.6.m6.1.1.2.1" xref="S4.SS1.p2.6.m6.1.1.2.1.cmml">⁢</mo><mn id="S4.SS1.p2.6.m6.1.1.2.3" xref="S4.SS1.p2.6.m6.1.1.2.3.cmml">1</mn></mrow><mo stretchy="false" id="S4.SS1.p2.6.m6.1.1.1" xref="S4.SS1.p2.6.m6.1.1.1.cmml">→</mo><mrow id="S4.SS1.p2.6.m6.1.1.3" xref="S4.SS1.p2.6.m6.1.1.3.cmml"><mn id="S4.SS1.p2.6.m6.1.1.3.2" xref="S4.SS1.p2.6.m6.1.1.3.2.cmml">10</mn><mo lspace="0.570em" id="S4.SS1.p2.6.m6.1.1.3.1" xref="S4.SS1.p2.6.m6.1.1.3.1.cmml">⁢</mo><mn id="S4.SS1.p2.6.m6.1.1.3.3" xref="S4.SS1.p2.6.m6.1.1.3.3.cmml">11</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.6.m6.1b"><apply id="S4.SS1.p2.6.m6.1.1.cmml" xref="S4.SS1.p2.6.m6.1.1"><ci id="S4.SS1.p2.6.m6.1.1.1.cmml" xref="S4.SS1.p2.6.m6.1.1.1">→</ci><apply id="S4.SS1.p2.6.m6.1.1.2.cmml" xref="S4.SS1.p2.6.m6.1.1.2"><times id="S4.SS1.p2.6.m6.1.1.2.1.cmml" xref="S4.SS1.p2.6.m6.1.1.2.1"></times><cn type="integer" id="S4.SS1.p2.6.m6.1.1.2.2.cmml" xref="S4.SS1.p2.6.m6.1.1.2.2">0</cn><cn type="integer" id="S4.SS1.p2.6.m6.1.1.2.3.cmml" xref="S4.SS1.p2.6.m6.1.1.2.3">1</cn></apply><apply id="S4.SS1.p2.6.m6.1.1.3.cmml" xref="S4.SS1.p2.6.m6.1.1.3"><times id="S4.SS1.p2.6.m6.1.1.3.1.cmml" xref="S4.SS1.p2.6.m6.1.1.3.1"></times><cn type="integer" id="S4.SS1.p2.6.m6.1.1.3.2.cmml" xref="S4.SS1.p2.6.m6.1.1.3.2">10</cn><cn type="integer" id="S4.SS1.p2.6.m6.1.1.3.3.cmml" xref="S4.SS1.p2.6.m6.1.1.3.3">11</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.6.m6.1c">0\hskip 5.69054pt1\rightarrow 10\hskip 5.69054pt11</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.6.m6.1d">0 1 → 10 11</annotation></semantics></math>). We limited the maximum sequence length to 6 tokens.</p>
</div>
<div id="S4.SS1.p3" class="ltx_para">
<p id="S4.SS1.p3.1" class="ltx_p">We generated synthetic training corpora of several sizes containing different numbers of occurrences of the non-compositional rule <math id="S4.SS1.p3.1.m1.1" class="ltx_Math" alttext="0\hskip 5.69054pt1\rightarrow 12" display="inline"><semantics id="S4.SS1.p3.1.m1.1a"><mrow id="S4.SS1.p3.1.m1.1.1" xref="S4.SS1.p3.1.m1.1.1.cmml"><mrow id="S4.SS1.p3.1.m1.1.1.2" xref="S4.SS1.p3.1.m1.1.1.2.cmml"><mn mathcolor="#FF0000" id="S4.SS1.p3.1.m1.1.1.2.2" xref="S4.SS1.p3.1.m1.1.1.2.2.cmml">0</mn><mo lspace="0.570em" mathcolor="#FF0000" id="S4.SS1.p3.1.m1.1.1.2.1" xref="S4.SS1.p3.1.m1.1.1.2.1.cmml">⁢</mo><mn mathcolor="#FF0000" id="S4.SS1.p3.1.m1.1.1.2.3" xref="S4.SS1.p3.1.m1.1.1.2.3.cmml">1</mn></mrow><mo mathcolor="#FF0000" stretchy="false" id="S4.SS1.p3.1.m1.1.1.1" xref="S4.SS1.p3.1.m1.1.1.1.cmml">→</mo><mn mathcolor="#FF0000" id="S4.SS1.p3.1.m1.1.1.3" xref="S4.SS1.p3.1.m1.1.1.3.cmml">12</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.1.m1.1b"><apply id="S4.SS1.p3.1.m1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1"><ci id="S4.SS1.p3.1.m1.1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1.1">→</ci><apply id="S4.SS1.p3.1.m1.1.1.2.cmml" xref="S4.SS1.p3.1.m1.1.1.2"><times id="S4.SS1.p3.1.m1.1.1.2.1.cmml" xref="S4.SS1.p3.1.m1.1.1.2.1"></times><cn type="integer" id="S4.SS1.p3.1.m1.1.1.2.2.cmml" xref="S4.SS1.p3.1.m1.1.1.2.2">0</cn><cn type="integer" id="S4.SS1.p3.1.m1.1.1.2.3.cmml" xref="S4.SS1.p3.1.m1.1.1.2.3">1</cn></apply><cn type="integer" id="S4.SS1.p3.1.m1.1.1.3.cmml" xref="S4.SS1.p3.1.m1.1.1.3">12</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.1.m1.1c">0\hskip 5.69054pt1\rightarrow 12</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p3.1.m1.1d">0 1 → 12</annotation></semantics></math><span id="S4.SS1.p3.1.1" class="ltx_text" style="color:#FF0000;"> </span>. The number of training sentences ranged from 100k to 10M, while the number of noncompositional occurrences ranged from 10 to 1M. We examined two informativity conditions, corresponding to the case where the context provides no information (tokens are randomized around the non-compositional expression), and the context being perfectly informative. The perfect informativity condition was achieved by adding the canary token “11” to the source vocabulary, and only inserting this token prior to the non-compositional pattern “0 1”.
</p>
</div>
<div id="S4.SS1.p4" class="ltx_para">
<p id="S4.SS1.p4.1" class="ltx_p">We experimented with three different transformer sizes <cite class="ltx_cite ltx_citemacro_cite">Vaswani et al. (<a href="#bib.bib43" title="" class="ltx_ref">2017</a>)</cite>, each of which had a hidden dimension and embedding size of 512, as well as 16 attention heads. Only the number of encoder and decoder layers varied, such that the small transformer had 3 encoder and decoder layers, the medium transformer 8, and the large transformer 16. We fix the number of epochs for the small, medium and large models to respectively be 10, 20, and 30 in the non-informative case and 15, 15 and 25 in the informative case.<span id="footnote6" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">6</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">6</sup><span class="ltx_tag ltx_tag_note">6</span>The number of training epochs was determined by the number of epochs it took for the validation loss to plateau in the 100k size corpus with 1k non-compositional examples, rounded up to multiples of 5.
This was done to mimic the typical training process for MT models, which are trained until loss or accuracy plateaus on a general dev set. Since idiomatic expressions tend to be uncommon compared to literal ones, there may not be many in the dev or train sets, and so the model’s performance on idiomatic expressions may not be tracked.</span></span></span> Further training details can be found in <a href="#A1" title="Appendix A Synthetic Dataset Training Details ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix A</span></a>.</p>
</div>
<div id="S4.SS1.p5" class="ltx_para">
<p id="S4.SS1.p5.1" class="ltx_p">Although this may seem like a simple task, we found it surprisingly difficult for models to learn this non-compositional pattern. Results in each setting, averaged across 5 random seeds, are presented in <a href="#S4.F1" title="Figure 1 ‣ 4.1 Artificial Language Translation ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 1</span></a>. Especially for the small model, there is a sharp gradation from translating none of the non-compositional expressions correctly to translating them all correctly, which occurs when roughly 10% of training data contains a non-compositional pattern. A similar trend exists for larger models, but the threshold is less distinct. This corroborates the tendency for transformers to translate non-compositional phrases literally <cite class="ltx_cite ltx_citemacro_cite">Dankers et al. (<a href="#bib.bib9" title="" class="ltx_ref">2022b</a>)</cite>. Comparatively less data is required when the context is informative, but the trends remain similar to the non-informative case. As model size and corpus size increase, the rate of correct translations for non-compositional examples actually drops, contrary to expectation.</p>
</div>
<div id="S4.SS1.p6" class="ltx_para">
<p id="S4.SS1.p6.1" class="ltx_p">It is unlikely that any individual idioms occur in 10% of sentences in natural language. Due to the highly regular translation rules in
this synthetic language, there may be a stronger bias toward translating compositionally in this experiment. However, we gain the intuition that idioms can be translated effectively if they appear frequently, and that clear context clues reduce data required.</p>
</div>
<figure id="S4.F1" class="ltx_figure"><img src="x1.png" id="S4.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="830" height="447" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Accuracy of a transformer in translating a non-compositional phrase after training on datasets of different sizes, with different numbers of non-compositional patterns (only non-compositional translation accuracy is depicted). Results are averaged across 5 seeds, and standard deviation is shown. </figcaption>
</figure>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Evaluation of Commercial Systems</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">Although synthetic experiments provide intuition on the difficulty of translating idioms, one might ask whether similar results hold in natural language. To answer this, we examine the performance of commercial systems on the test sets in <math id="S4.SS2.p1.1.m1.1" class="ltx_Math" alttext="(\lx@sectionsign\ref{sec:data})" display="inline"><semantics id="S4.SS2.p1.1.m1.1a"><mrow id="S4.SS2.p1.1.m1.1.1.1" xref="S4.SS2.p1.1.m1.1.1.1.1.cmml"><mo stretchy="false" id="S4.SS2.p1.1.m1.1.1.1.2" xref="S4.SS2.p1.1.m1.1.1.1.1.cmml">(</mo><mrow id="S4.SS2.p1.1.m1.1.1.1.1" xref="S4.SS2.p1.1.m1.1.1.1.1.cmml"><mi mathvariant="normal" id="S4.SS2.p1.1.m1.1.1.1.1.2" xref="S4.SS2.p1.1.m1.1.1.1.1.2.cmml">§</mi><mo id="S4.SS2.p1.1.m1.1.1.1.1.1" xref="S4.SS2.p1.1.m1.1.1.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S4.SS2.p1.1.m1.1.1.1.1.3" xref="S4.SS2.p1.1.m1.1.1.1.1.3c.cmml"><a href="#S3" title="3 Idioms and Data Collection ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">3</span></a></mtext></mrow><mo stretchy="false" id="S4.SS2.p1.1.m1.1.1.1.3" xref="S4.SS2.p1.1.m1.1.1.1.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1b"><apply id="S4.SS2.p1.1.m1.1.1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1.1"><times id="S4.SS2.p1.1.m1.1.1.1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1.1.1.1"></times><ci id="S4.SS2.p1.1.m1.1.1.1.1.2.cmml" xref="S4.SS2.p1.1.m1.1.1.1.1.2">§</ci><ci id="S4.SS2.p1.1.m1.1.1.1.1.3c.cmml" xref="S4.SS2.p1.1.m1.1.1.1.1.3"><mtext mathvariant="italic" id="S4.SS2.p1.1.m1.1.1.1.1.3.cmml" xref="S4.SS2.p1.1.m1.1.1.1.1.3"><a href="#S3" title="3 Idioms and Data Collection ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">3</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1c">(\lx@sectionsign\ref{sec:data})</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.1.m1.1d">( § )</annotation></semantics></math>. Namely, we examine Google Translate and DeepL on Finnish, French, and Japanese idiomatic, literal, and random sentences. Results are in <a href="#S4.T3" title="Table 3 ‣ 4.2 Evaluation of Commercial Systems ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 3</span></a>. We observe drops in translation quality on idiomatic sentences in all languages, with lower automatic metrics overall.</p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p id="S4.SS2.p2.1" class="ltx_p">Although it’s impossible for us to determine what data these commercial systems were trained on, we examine the frequency of each idiom within OpenSubtitles as a proxy for its overall frequency in the training data, and bucket idioms into quintiles based on their occurrence frequency in source text. As idioms become more frequent, the quality of translations increases. An example of DeepL on the French idiom set is shown in <a href="#S4.F2" title="Figure 2 ‣ 4.2 Evaluation of Commercial Systems ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 2</span></a>. Trends for other languages and systems are in <a href="#A8" title="Appendix H Effect of Frequency on Commercial Translations ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix H</span></a>.
This indicates that like in the synthetic experiments, there may be strong frequency effects on translation quality of idioms.</p>
</div>
<figure id="S4.T3" class="ltx_table">
<div id="S4.T3.18" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:411.9pt;height:929.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(94.3pt,-212.6pt) scale(1.8438053378996,1.8438053378996) ;">
<table id="S4.T3.18.18" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T3.18.18.19.1" class="ltx_tr">
<th id="S4.T3.18.18.19.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt">Language</th>
<th id="S4.T3.18.18.19.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">System</th>
<th id="S4.T3.18.18.19.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">BLEU</th>
<th id="S4.T3.18.18.19.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">METEOR</th>
<th id="S4.T3.18.18.19.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">BERTScore</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T3.1.1.1" class="ltx_tr">
<th id="S4.T3.1.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt"><math id="S4.T3.1.1.1.1.m1.1" class="ltx_Math" alttext="\texttt{fi}_{\text{idiomatic}}" display="inline"><semantics id="S4.T3.1.1.1.1.m1.1a"><msub id="S4.T3.1.1.1.1.m1.1.1" xref="S4.T3.1.1.1.1.m1.1.1.cmml"><mtext id="S4.T3.1.1.1.1.m1.1.1.2" xref="S4.T3.1.1.1.1.m1.1.1.2a.cmml">𝚏𝚒</mtext><mtext id="S4.T3.1.1.1.1.m1.1.1.3" xref="S4.T3.1.1.1.1.m1.1.1.3a.cmml">idiomatic</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.1.1.1.1.m1.1b"><apply id="S4.T3.1.1.1.1.m1.1.1.cmml" xref="S4.T3.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.1.1.1.1.m1.1.1.1.cmml" xref="S4.T3.1.1.1.1.m1.1.1">subscript</csymbol><ci id="S4.T3.1.1.1.1.m1.1.1.2a.cmml" xref="S4.T3.1.1.1.1.m1.1.1.2"><mtext id="S4.T3.1.1.1.1.m1.1.1.2.cmml" xref="S4.T3.1.1.1.1.m1.1.1.2">𝚏𝚒</mtext></ci><ci id="S4.T3.1.1.1.1.m1.1.1.3a.cmml" xref="S4.T3.1.1.1.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.1.1.1.1.m1.1.1.3.cmml" xref="S4.T3.1.1.1.1.m1.1.1.3">idiomatic</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.1.1.1.1.m1.1c">\texttt{fi}_{\text{idiomatic}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.1.1.1.1.m1.1d">fi start_POSTSUBSCRIPT idiomatic end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.1.1.1.2" class="ltx_td ltx_align_center ltx_border_tt">DeepL</td>
<td id="S4.T3.1.1.1.3" class="ltx_td ltx_align_center ltx_border_tt">0.1001</td>
<td id="S4.T3.1.1.1.4" class="ltx_td ltx_align_center ltx_border_tt">0.2497</td>
<td id="S4.T3.1.1.1.5" class="ltx_td ltx_align_center ltx_border_tt">0.8866</td>
</tr>
<tr id="S4.T3.18.18.20.1" class="ltx_tr">
<th id="S4.T3.18.18.20.1.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.20.1.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.20.1.3" class="ltx_td ltx_align_center">0.0923</td>
<td id="S4.T3.18.18.20.1.4" class="ltx_td ltx_align_center">0.2250</td>
<td id="S4.T3.18.18.20.1.5" class="ltx_td ltx_align_center">0.8726</td>
</tr>
<tr id="S4.T3.2.2.2" class="ltx_tr">
<th id="S4.T3.2.2.2.2" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.2.2.2.1" class="ltx_td ltx_align_center">
<math id="S4.T3.2.2.2.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.2.2.2.1.m1.1a"><mi mathvariant="normal" id="S4.T3.2.2.2.1.m1.1.1" xref="S4.T3.2.2.2.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.2.2.2.1.m1.1b"><ci id="S4.T3.2.2.2.1.m1.1.1.cmml" xref="S4.T3.2.2.2.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.2.2.2.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.2.2.2.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.2.2.2.3" class="ltx_td ltx_align_center">0.1608</td>
<td id="S4.T3.2.2.2.4" class="ltx_td ltx_align_center">0.3592</td>
<td id="S4.T3.2.2.2.5" class="ltx_td ltx_align_center">0.9126</td>
</tr>
<tr id="S4.T3.3.3.3" class="ltx_tr">
<th id="S4.T3.3.3.3.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><math id="S4.T3.3.3.3.1.m1.1" class="ltx_Math" alttext="\texttt{fi}_{\text{literal}}" display="inline"><semantics id="S4.T3.3.3.3.1.m1.1a"><msub id="S4.T3.3.3.3.1.m1.1.1" xref="S4.T3.3.3.3.1.m1.1.1.cmml"><mtext id="S4.T3.3.3.3.1.m1.1.1.2" xref="S4.T3.3.3.3.1.m1.1.1.2a.cmml">𝚏𝚒</mtext><mtext id="S4.T3.3.3.3.1.m1.1.1.3" xref="S4.T3.3.3.3.1.m1.1.1.3a.cmml">literal</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.3.3.3.1.m1.1b"><apply id="S4.T3.3.3.3.1.m1.1.1.cmml" xref="S4.T3.3.3.3.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.3.3.3.1.m1.1.1.1.cmml" xref="S4.T3.3.3.3.1.m1.1.1">subscript</csymbol><ci id="S4.T3.3.3.3.1.m1.1.1.2a.cmml" xref="S4.T3.3.3.3.1.m1.1.1.2"><mtext id="S4.T3.3.3.3.1.m1.1.1.2.cmml" xref="S4.T3.3.3.3.1.m1.1.1.2">𝚏𝚒</mtext></ci><ci id="S4.T3.3.3.3.1.m1.1.1.3a.cmml" xref="S4.T3.3.3.3.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.3.3.3.1.m1.1.1.3.cmml" xref="S4.T3.3.3.3.1.m1.1.1.3">literal</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.3.3.3.1.m1.1c">\texttt{fi}_{\text{literal}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.3.3.3.1.m1.1d">fi start_POSTSUBSCRIPT literal end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.3.3.3.2" class="ltx_td ltx_align_center ltx_border_t">DeepL</td>
<td id="S4.T3.3.3.3.3" class="ltx_td ltx_align_center ltx_border_t">0.1488</td>
<td id="S4.T3.3.3.3.4" class="ltx_td ltx_align_center ltx_border_t">0.3908</td>
<td id="S4.T3.3.3.3.5" class="ltx_td ltx_align_center ltx_border_t">0.9146</td>
</tr>
<tr id="S4.T3.18.18.21.2" class="ltx_tr">
<th id="S4.T3.18.18.21.2.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.21.2.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.21.2.3" class="ltx_td ltx_align_center">0.1398</td>
<td id="S4.T3.18.18.21.2.4" class="ltx_td ltx_align_center">0.3577</td>
<td id="S4.T3.18.18.21.2.5" class="ltx_td ltx_align_center">0.9017</td>
</tr>
<tr id="S4.T3.4.4.4" class="ltx_tr">
<th id="S4.T3.4.4.4.2" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.4.4.4.1" class="ltx_td ltx_align_center">
<math id="S4.T3.4.4.4.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.4.4.4.1.m1.1a"><mi mathvariant="normal" id="S4.T3.4.4.4.1.m1.1.1" xref="S4.T3.4.4.4.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.4.4.4.1.m1.1b"><ci id="S4.T3.4.4.4.1.m1.1.1.cmml" xref="S4.T3.4.4.4.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.4.4.4.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.4.4.4.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.4.4.4.3" class="ltx_td ltx_align_center">0.2093</td>
<td id="S4.T3.4.4.4.4" class="ltx_td ltx_align_center">0.5050</td>
<td id="S4.T3.4.4.4.5" class="ltx_td ltx_align_center">0.9350</td>
</tr>
<tr id="S4.T3.5.5.5" class="ltx_tr">
<th id="S4.T3.5.5.5.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><math id="S4.T3.5.5.5.1.m1.1" class="ltx_Math" alttext="\texttt{fi}_{\text{random-out}}" display="inline"><semantics id="S4.T3.5.5.5.1.m1.1a"><msub id="S4.T3.5.5.5.1.m1.1.1" xref="S4.T3.5.5.5.1.m1.1.1.cmml"><mtext id="S4.T3.5.5.5.1.m1.1.1.2" xref="S4.T3.5.5.5.1.m1.1.1.2a.cmml">𝚏𝚒</mtext><mtext id="S4.T3.5.5.5.1.m1.1.1.3" xref="S4.T3.5.5.5.1.m1.1.1.3a.cmml">random-out</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.5.5.5.1.m1.1b"><apply id="S4.T3.5.5.5.1.m1.1.1.cmml" xref="S4.T3.5.5.5.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.5.5.5.1.m1.1.1.1.cmml" xref="S4.T3.5.5.5.1.m1.1.1">subscript</csymbol><ci id="S4.T3.5.5.5.1.m1.1.1.2a.cmml" xref="S4.T3.5.5.5.1.m1.1.1.2"><mtext id="S4.T3.5.5.5.1.m1.1.1.2.cmml" xref="S4.T3.5.5.5.1.m1.1.1.2">𝚏𝚒</mtext></ci><ci id="S4.T3.5.5.5.1.m1.1.1.3a.cmml" xref="S4.T3.5.5.5.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.5.5.5.1.m1.1.1.3.cmml" xref="S4.T3.5.5.5.1.m1.1.1.3">random-out</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.5.5.5.1.m1.1c">\texttt{fi}_{\text{random-out}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.5.5.5.1.m1.1d">fi start_POSTSUBSCRIPT random-out end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.5.5.5.2" class="ltx_td ltx_align_center ltx_border_t">DeepL</td>
<td id="S4.T3.5.5.5.3" class="ltx_td ltx_align_center ltx_border_t">0.2052</td>
<td id="S4.T3.5.5.5.4" class="ltx_td ltx_align_center ltx_border_t">0.4082</td>
<td id="S4.T3.5.5.5.5" class="ltx_td ltx_align_center ltx_border_t">0.9103</td>
</tr>
<tr id="S4.T3.18.18.22.3" class="ltx_tr">
<th id="S4.T3.18.18.22.3.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.22.3.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.22.3.3" class="ltx_td ltx_align_center">0.2288</td>
<td id="S4.T3.18.18.22.3.4" class="ltx_td ltx_align_center">0.4357</td>
<td id="S4.T3.18.18.22.3.5" class="ltx_td ltx_align_center">0.9062</td>
</tr>
<tr id="S4.T3.6.6.6" class="ltx_tr">
<th id="S4.T3.6.6.6.2" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.6.6.6.1" class="ltx_td ltx_align_center">
<math id="S4.T3.6.6.6.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.6.6.6.1.m1.1a"><mi mathvariant="normal" id="S4.T3.6.6.6.1.m1.1.1" xref="S4.T3.6.6.6.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.6.6.6.1.m1.1b"><ci id="S4.T3.6.6.6.1.m1.1.1.cmml" xref="S4.T3.6.6.6.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.6.6.6.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.6.6.6.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.6.6.6.3" class="ltx_td ltx_align_center">0.2365</td>
<td id="S4.T3.6.6.6.4" class="ltx_td ltx_align_center">0.4971</td>
<td id="S4.T3.6.6.6.5" class="ltx_td ltx_align_center">0.9145</td>
</tr>
<tr id="S4.T3.7.7.7" class="ltx_tr">
<th id="S4.T3.7.7.7.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt"><math id="S4.T3.7.7.7.1.m1.1" class="ltx_Math" alttext="\texttt{fr}_{\text{idiomatic}}" display="inline"><semantics id="S4.T3.7.7.7.1.m1.1a"><msub id="S4.T3.7.7.7.1.m1.1.1" xref="S4.T3.7.7.7.1.m1.1.1.cmml"><mtext id="S4.T3.7.7.7.1.m1.1.1.2" xref="S4.T3.7.7.7.1.m1.1.1.2a.cmml">𝚏𝚛</mtext><mtext id="S4.T3.7.7.7.1.m1.1.1.3" xref="S4.T3.7.7.7.1.m1.1.1.3a.cmml">idiomatic</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.7.7.7.1.m1.1b"><apply id="S4.T3.7.7.7.1.m1.1.1.cmml" xref="S4.T3.7.7.7.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.7.7.7.1.m1.1.1.1.cmml" xref="S4.T3.7.7.7.1.m1.1.1">subscript</csymbol><ci id="S4.T3.7.7.7.1.m1.1.1.2a.cmml" xref="S4.T3.7.7.7.1.m1.1.1.2"><mtext id="S4.T3.7.7.7.1.m1.1.1.2.cmml" xref="S4.T3.7.7.7.1.m1.1.1.2">𝚏𝚛</mtext></ci><ci id="S4.T3.7.7.7.1.m1.1.1.3a.cmml" xref="S4.T3.7.7.7.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.7.7.7.1.m1.1.1.3.cmml" xref="S4.T3.7.7.7.1.m1.1.1.3">idiomatic</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.7.7.7.1.m1.1c">\texttt{fr}_{\text{idiomatic}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.7.7.7.1.m1.1d">fr start_POSTSUBSCRIPT idiomatic end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.7.7.7.2" class="ltx_td ltx_align_center ltx_border_tt">DeepL</td>
<td id="S4.T3.7.7.7.3" class="ltx_td ltx_align_center ltx_border_tt">0.1575</td>
<td id="S4.T3.7.7.7.4" class="ltx_td ltx_align_center ltx_border_tt">0.3278</td>
<td id="S4.T3.7.7.7.5" class="ltx_td ltx_align_center ltx_border_tt">0.9006</td>
</tr>
<tr id="S4.T3.18.18.23.4" class="ltx_tr">
<th id="S4.T3.18.18.23.4.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.23.4.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.23.4.3" class="ltx_td ltx_align_center">0.1261</td>
<td id="S4.T3.18.18.23.4.4" class="ltx_td ltx_align_center">0.2794</td>
<td id="S4.T3.18.18.23.4.5" class="ltx_td ltx_align_center">0.8808</td>
</tr>
<tr id="S4.T3.8.8.8" class="ltx_tr">
<th id="S4.T3.8.8.8.2" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.8.8.8.1" class="ltx_td ltx_align_center">
<math id="S4.T3.8.8.8.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.8.8.8.1.m1.1a"><mi mathvariant="normal" id="S4.T3.8.8.8.1.m1.1.1" xref="S4.T3.8.8.8.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.8.8.8.1.m1.1b"><ci id="S4.T3.8.8.8.1.m1.1.1.cmml" xref="S4.T3.8.8.8.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.8.8.8.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.8.8.8.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.8.8.8.3" class="ltx_td ltx_align_center">0.2001</td>
<td id="S4.T3.8.8.8.4" class="ltx_td ltx_align_center">0.4393</td>
<td id="S4.T3.8.8.8.5" class="ltx_td ltx_align_center">0.9211</td>
</tr>
<tr id="S4.T3.9.9.9" class="ltx_tr">
<th id="S4.T3.9.9.9.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><math id="S4.T3.9.9.9.1.m1.1" class="ltx_Math" alttext="\texttt{fr}_{\text{literal}}" display="inline"><semantics id="S4.T3.9.9.9.1.m1.1a"><msub id="S4.T3.9.9.9.1.m1.1.1" xref="S4.T3.9.9.9.1.m1.1.1.cmml"><mtext id="S4.T3.9.9.9.1.m1.1.1.2" xref="S4.T3.9.9.9.1.m1.1.1.2a.cmml">𝚏𝚛</mtext><mtext id="S4.T3.9.9.9.1.m1.1.1.3" xref="S4.T3.9.9.9.1.m1.1.1.3a.cmml">literal</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.9.9.9.1.m1.1b"><apply id="S4.T3.9.9.9.1.m1.1.1.cmml" xref="S4.T3.9.9.9.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.9.9.9.1.m1.1.1.1.cmml" xref="S4.T3.9.9.9.1.m1.1.1">subscript</csymbol><ci id="S4.T3.9.9.9.1.m1.1.1.2a.cmml" xref="S4.T3.9.9.9.1.m1.1.1.2"><mtext id="S4.T3.9.9.9.1.m1.1.1.2.cmml" xref="S4.T3.9.9.9.1.m1.1.1.2">𝚏𝚛</mtext></ci><ci id="S4.T3.9.9.9.1.m1.1.1.3a.cmml" xref="S4.T3.9.9.9.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.9.9.9.1.m1.1.1.3.cmml" xref="S4.T3.9.9.9.1.m1.1.1.3">literal</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.9.9.9.1.m1.1c">\texttt{fr}_{\text{literal}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.9.9.9.1.m1.1d">fr start_POSTSUBSCRIPT literal end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.9.9.9.2" class="ltx_td ltx_align_center ltx_border_t">DeepL</td>
<td id="S4.T3.9.9.9.3" class="ltx_td ltx_align_center ltx_border_t">0.2219</td>
<td id="S4.T3.9.9.9.4" class="ltx_td ltx_align_center ltx_border_t">0.4022</td>
<td id="S4.T3.9.9.9.5" class="ltx_td ltx_align_center ltx_border_t">0.9122</td>
</tr>
<tr id="S4.T3.18.18.24.5" class="ltx_tr">
<th id="S4.T3.18.18.24.5.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.24.5.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.24.5.3" class="ltx_td ltx_align_center">0.2034</td>
<td id="S4.T3.18.18.24.5.4" class="ltx_td ltx_align_center">0.3830</td>
<td id="S4.T3.18.18.24.5.5" class="ltx_td ltx_align_center">0.9012</td>
</tr>
<tr id="S4.T3.10.10.10" class="ltx_tr">
<th id="S4.T3.10.10.10.2" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.10.10.10.1" class="ltx_td ltx_align_center">
<math id="S4.T3.10.10.10.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.10.10.10.1.m1.1a"><mi mathvariant="normal" id="S4.T3.10.10.10.1.m1.1.1" xref="S4.T3.10.10.10.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.10.10.10.1.m1.1b"><ci id="S4.T3.10.10.10.1.m1.1.1.cmml" xref="S4.T3.10.10.10.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.10.10.10.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.10.10.10.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.10.10.10.3" class="ltx_td ltx_align_center">0.2778</td>
<td id="S4.T3.10.10.10.4" class="ltx_td ltx_align_center">0.5504</td>
<td id="S4.T3.10.10.10.5" class="ltx_td ltx_align_center">0.9377</td>
</tr>
<tr id="S4.T3.11.11.11" class="ltx_tr">
<th id="S4.T3.11.11.11.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><math id="S4.T3.11.11.11.1.m1.1" class="ltx_Math" alttext="\texttt{fr}_{\text{random-out}}" display="inline"><semantics id="S4.T3.11.11.11.1.m1.1a"><msub id="S4.T3.11.11.11.1.m1.1.1" xref="S4.T3.11.11.11.1.m1.1.1.cmml"><mtext id="S4.T3.11.11.11.1.m1.1.1.2" xref="S4.T3.11.11.11.1.m1.1.1.2a.cmml">𝚏𝚛</mtext><mtext id="S4.T3.11.11.11.1.m1.1.1.3" xref="S4.T3.11.11.11.1.m1.1.1.3a.cmml">random-out</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.11.11.11.1.m1.1b"><apply id="S4.T3.11.11.11.1.m1.1.1.cmml" xref="S4.T3.11.11.11.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.11.11.11.1.m1.1.1.1.cmml" xref="S4.T3.11.11.11.1.m1.1.1">subscript</csymbol><ci id="S4.T3.11.11.11.1.m1.1.1.2a.cmml" xref="S4.T3.11.11.11.1.m1.1.1.2"><mtext id="S4.T3.11.11.11.1.m1.1.1.2.cmml" xref="S4.T3.11.11.11.1.m1.1.1.2">𝚏𝚛</mtext></ci><ci id="S4.T3.11.11.11.1.m1.1.1.3a.cmml" xref="S4.T3.11.11.11.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.11.11.11.1.m1.1.1.3.cmml" xref="S4.T3.11.11.11.1.m1.1.1.3">random-out</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.11.11.11.1.m1.1c">\texttt{fr}_{\text{random-out}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.11.11.11.1.m1.1d">fr start_POSTSUBSCRIPT random-out end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.11.11.11.2" class="ltx_td ltx_align_center ltx_border_t">DeepL</td>
<td id="S4.T3.11.11.11.3" class="ltx_td ltx_align_center ltx_border_t">0.2854</td>
<td id="S4.T3.11.11.11.4" class="ltx_td ltx_align_center ltx_border_t">0.4650</td>
<td id="S4.T3.11.11.11.5" class="ltx_td ltx_align_center ltx_border_t">0.9125</td>
</tr>
<tr id="S4.T3.18.18.25.6" class="ltx_tr">
<th id="S4.T3.18.18.25.6.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.25.6.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.25.6.3" class="ltx_td ltx_align_center">0.3103</td>
<td id="S4.T3.18.18.25.6.4" class="ltx_td ltx_align_center">0.4922</td>
<td id="S4.T3.18.18.25.6.5" class="ltx_td ltx_align_center">0.9149</td>
</tr>
<tr id="S4.T3.12.12.12" class="ltx_tr">
<th id="S4.T3.12.12.12.2" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.12.12.12.1" class="ltx_td ltx_align_center">
<math id="S4.T3.12.12.12.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.12.12.12.1.m1.1a"><mi mathvariant="normal" id="S4.T3.12.12.12.1.m1.1.1" xref="S4.T3.12.12.12.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.12.12.12.1.m1.1b"><ci id="S4.T3.12.12.12.1.m1.1.1.cmml" xref="S4.T3.12.12.12.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.12.12.12.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.12.12.12.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.12.12.12.3" class="ltx_td ltx_align_center">0.2778</td>
<td id="S4.T3.12.12.12.4" class="ltx_td ltx_align_center">0.5504</td>
<td id="S4.T3.12.12.12.5" class="ltx_td ltx_align_center">0.9377</td>
</tr>
<tr id="S4.T3.13.13.13" class="ltx_tr">
<th id="S4.T3.13.13.13.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt"><math id="S4.T3.13.13.13.1.m1.1" class="ltx_Math" alttext="\texttt{ja}_{\text{idiomatic}}" display="inline"><semantics id="S4.T3.13.13.13.1.m1.1a"><msub id="S4.T3.13.13.13.1.m1.1.1" xref="S4.T3.13.13.13.1.m1.1.1.cmml"><mtext id="S4.T3.13.13.13.1.m1.1.1.2" xref="S4.T3.13.13.13.1.m1.1.1.2a.cmml">𝚓𝚊</mtext><mtext id="S4.T3.13.13.13.1.m1.1.1.3" xref="S4.T3.13.13.13.1.m1.1.1.3a.cmml">idiomatic</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.13.13.13.1.m1.1b"><apply id="S4.T3.13.13.13.1.m1.1.1.cmml" xref="S4.T3.13.13.13.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.13.13.13.1.m1.1.1.1.cmml" xref="S4.T3.13.13.13.1.m1.1.1">subscript</csymbol><ci id="S4.T3.13.13.13.1.m1.1.1.2a.cmml" xref="S4.T3.13.13.13.1.m1.1.1.2"><mtext id="S4.T3.13.13.13.1.m1.1.1.2.cmml" xref="S4.T3.13.13.13.1.m1.1.1.2">𝚓𝚊</mtext></ci><ci id="S4.T3.13.13.13.1.m1.1.1.3a.cmml" xref="S4.T3.13.13.13.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.13.13.13.1.m1.1.1.3.cmml" xref="S4.T3.13.13.13.1.m1.1.1.3">idiomatic</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.13.13.13.1.m1.1c">\texttt{ja}_{\text{idiomatic}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.13.13.13.1.m1.1d">ja start_POSTSUBSCRIPT idiomatic end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.13.13.13.2" class="ltx_td ltx_align_center ltx_border_tt">DeepL</td>
<td id="S4.T3.13.13.13.3" class="ltx_td ltx_align_center ltx_border_tt">0.1172</td>
<td id="S4.T3.13.13.13.4" class="ltx_td ltx_align_center ltx_border_tt">0.2735</td>
<td id="S4.T3.13.13.13.5" class="ltx_td ltx_align_center ltx_border_tt">0.8932</td>
</tr>
<tr id="S4.T3.18.18.26.7" class="ltx_tr">
<th id="S4.T3.18.18.26.7.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.26.7.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.26.7.3" class="ltx_td ltx_align_center">0.0672</td>
<td id="S4.T3.18.18.26.7.4" class="ltx_td ltx_align_center">0.1839</td>
<td id="S4.T3.18.18.26.7.5" class="ltx_td ltx_align_center">0.8644</td>
</tr>
<tr id="S4.T3.14.14.14" class="ltx_tr">
<th id="S4.T3.14.14.14.2" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.14.14.14.1" class="ltx_td ltx_align_center">
<math id="S4.T3.14.14.14.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.14.14.14.1.m1.1a"><mi mathvariant="normal" id="S4.T3.14.14.14.1.m1.1.1" xref="S4.T3.14.14.14.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.14.14.14.1.m1.1b"><ci id="S4.T3.14.14.14.1.m1.1.1.cmml" xref="S4.T3.14.14.14.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.14.14.14.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.14.14.14.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.14.14.14.3" class="ltx_td ltx_align_center">0.09048</td>
<td id="S4.T3.14.14.14.4" class="ltx_td ltx_align_center">0.2998</td>
<td id="S4.T3.14.14.14.5" class="ltx_td ltx_align_center">0.9234</td>
</tr>
<tr id="S4.T3.15.15.15" class="ltx_tr">
<th id="S4.T3.15.15.15.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><math id="S4.T3.15.15.15.1.m1.1" class="ltx_Math" alttext="\texttt{ja}_{\text{literal}}" display="inline"><semantics id="S4.T3.15.15.15.1.m1.1a"><msub id="S4.T3.15.15.15.1.m1.1.1" xref="S4.T3.15.15.15.1.m1.1.1.cmml"><mtext id="S4.T3.15.15.15.1.m1.1.1.2" xref="S4.T3.15.15.15.1.m1.1.1.2a.cmml">𝚓𝚊</mtext><mtext id="S4.T3.15.15.15.1.m1.1.1.3" xref="S4.T3.15.15.15.1.m1.1.1.3a.cmml">literal</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.15.15.15.1.m1.1b"><apply id="S4.T3.15.15.15.1.m1.1.1.cmml" xref="S4.T3.15.15.15.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.15.15.15.1.m1.1.1.1.cmml" xref="S4.T3.15.15.15.1.m1.1.1">subscript</csymbol><ci id="S4.T3.15.15.15.1.m1.1.1.2a.cmml" xref="S4.T3.15.15.15.1.m1.1.1.2"><mtext id="S4.T3.15.15.15.1.m1.1.1.2.cmml" xref="S4.T3.15.15.15.1.m1.1.1.2">𝚓𝚊</mtext></ci><ci id="S4.T3.15.15.15.1.m1.1.1.3a.cmml" xref="S4.T3.15.15.15.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.15.15.15.1.m1.1.1.3.cmml" xref="S4.T3.15.15.15.1.m1.1.1.3">literal</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.15.15.15.1.m1.1c">\texttt{ja}_{\text{literal}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.15.15.15.1.m1.1d">ja start_POSTSUBSCRIPT literal end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.15.15.15.2" class="ltx_td ltx_align_center ltx_border_t">DeepL</td>
<td id="S4.T3.15.15.15.3" class="ltx_td ltx_align_center ltx_border_t">0.1517</td>
<td id="S4.T3.15.15.15.4" class="ltx_td ltx_align_center ltx_border_t">0.3440</td>
<td id="S4.T3.15.15.15.5" class="ltx_td ltx_align_center ltx_border_t">0.9059</td>
</tr>
<tr id="S4.T3.18.18.27.8" class="ltx_tr">
<th id="S4.T3.18.18.27.8.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.27.8.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.27.8.3" class="ltx_td ltx_align_center">0.0937</td>
<td id="S4.T3.18.18.27.8.4" class="ltx_td ltx_align_center">0.2565</td>
<td id="S4.T3.18.18.27.8.5" class="ltx_td ltx_align_center">0.8829</td>
</tr>
<tr id="S4.T3.16.16.16" class="ltx_tr">
<th id="S4.T3.16.16.16.2" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.16.16.16.1" class="ltx_td ltx_align_center">
<math id="S4.T3.16.16.16.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.16.16.16.1.m1.1a"><mi mathvariant="normal" id="S4.T3.16.16.16.1.m1.1.1" xref="S4.T3.16.16.16.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.16.16.16.1.m1.1b"><ci id="S4.T3.16.16.16.1.m1.1.1.cmml" xref="S4.T3.16.16.16.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.16.16.16.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.16.16.16.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.16.16.16.3" class="ltx_td ltx_align_center">0.1416</td>
<td id="S4.T3.16.16.16.4" class="ltx_td ltx_align_center">0.4222</td>
<td id="S4.T3.16.16.16.5" class="ltx_td ltx_align_center">0.9222</td>
</tr>
<tr id="S4.T3.17.17.17" class="ltx_tr">
<th id="S4.T3.17.17.17.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><math id="S4.T3.17.17.17.1.m1.1" class="ltx_Math" alttext="\texttt{ja}_{\text{random-out}}" display="inline"><semantics id="S4.T3.17.17.17.1.m1.1a"><msub id="S4.T3.17.17.17.1.m1.1.1" xref="S4.T3.17.17.17.1.m1.1.1.cmml"><mtext id="S4.T3.17.17.17.1.m1.1.1.2" xref="S4.T3.17.17.17.1.m1.1.1.2a.cmml">𝚓𝚊</mtext><mtext id="S4.T3.17.17.17.1.m1.1.1.3" xref="S4.T3.17.17.17.1.m1.1.1.3a.cmml">random-out</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T3.17.17.17.1.m1.1b"><apply id="S4.T3.17.17.17.1.m1.1.1.cmml" xref="S4.T3.17.17.17.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T3.17.17.17.1.m1.1.1.1.cmml" xref="S4.T3.17.17.17.1.m1.1.1">subscript</csymbol><ci id="S4.T3.17.17.17.1.m1.1.1.2a.cmml" xref="S4.T3.17.17.17.1.m1.1.1.2"><mtext id="S4.T3.17.17.17.1.m1.1.1.2.cmml" xref="S4.T3.17.17.17.1.m1.1.1.2">𝚓𝚊</mtext></ci><ci id="S4.T3.17.17.17.1.m1.1.1.3a.cmml" xref="S4.T3.17.17.17.1.m1.1.1.3"><mtext mathsize="70%" id="S4.T3.17.17.17.1.m1.1.1.3.cmml" xref="S4.T3.17.17.17.1.m1.1.1.3">random-out</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.17.17.17.1.m1.1c">\texttt{ja}_{\text{random-out}}</annotation><annotation encoding="application/x-llamapun" id="S4.T3.17.17.17.1.m1.1d">ja start_POSTSUBSCRIPT random-out end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td id="S4.T3.17.17.17.2" class="ltx_td ltx_align_center ltx_border_t">DeepL</td>
<td id="S4.T3.17.17.17.3" class="ltx_td ltx_align_center ltx_border_t">0.1074</td>
<td id="S4.T3.17.17.17.4" class="ltx_td ltx_align_center ltx_border_t">0.2934</td>
<td id="S4.T3.17.17.17.5" class="ltx_td ltx_align_center ltx_border_t">0.8878</td>
</tr>
<tr id="S4.T3.18.18.28.9" class="ltx_tr">
<th id="S4.T3.18.18.28.9.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S4.T3.18.18.28.9.2" class="ltx_td ltx_align_center">Google</td>
<td id="S4.T3.18.18.28.9.3" class="ltx_td ltx_align_center">0.1079</td>
<td id="S4.T3.18.18.28.9.4" class="ltx_td ltx_align_center">0.2834</td>
<td id="S4.T3.18.18.28.9.5" class="ltx_td ltx_align_center">0.8829</td>
</tr>
<tr id="S4.T3.18.18.18" class="ltx_tr">
<th id="S4.T3.18.18.18.2" class="ltx_td ltx_th ltx_th_row ltx_border_bb"></th>
<td id="S4.T3.18.18.18.1" class="ltx_td ltx_align_center ltx_border_bb">
<math id="S4.T3.18.18.18.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S4.T3.18.18.18.1.m1.1a"><mi mathvariant="normal" id="S4.T3.18.18.18.1.m1.1.1" xref="S4.T3.18.18.18.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S4.T3.18.18.18.1.m1.1b"><ci id="S4.T3.18.18.18.1.m1.1.1.cmml" xref="S4.T3.18.18.18.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.18.18.18.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S4.T3.18.18.18.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base</td>
<td id="S4.T3.18.18.18.3" class="ltx_td ltx_align_center ltx_border_bb">0.0948</td>
<td id="S4.T3.18.18.18.4" class="ltx_td ltx_align_center ltx_border_bb">0.3436</td>
<td id="S4.T3.18.18.18.5" class="ltx_td ltx_align_center ltx_border_bb">0.8946</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Performance of commercial systems on idiomatic, literal, and random test sets. There is a clear degradation in performance on idiomatic sentences.</figcaption>
</figure>
<figure id="S4.F2" class="ltx_figure"><img src="x2.png" id="S4.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="706" height="564" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Automatic metrics – Quality of DeepL French translations on idiomatic test set bucketed by idiom frequency. The bottom 20% of least common idioms are excluded, as they may occur fewer than 3 times and not be in our test set.</figcaption>
</figure>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Methods to Improve Non-Compositional Translation</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">We explore two methods to improve translation, loss weighting and kNN-MT. These two methods are relatively simple to use, where loss weighting only requires a list of potentially idiomatic phrases in the source language, and kNN-MT only requires enough space on disk to save the datastores.
</p>
</div>
<div id="S5.p2" class="ltx_para">
<p id="S5.p2.5" class="ltx_p">More formally, we consider the basic case of autoregressive machine translation, with a set of parallel sentences in the source (<math id="S5.p2.1.m1.2" class="ltx_Math" alttext="X=\{x^{(i)}\}_{i=1}^{N}" display="inline"><semantics id="S5.p2.1.m1.2a"><mrow id="S5.p2.1.m1.2.2" xref="S5.p2.1.m1.2.2.cmml"><mi id="S5.p2.1.m1.2.2.3" xref="S5.p2.1.m1.2.2.3.cmml">X</mi><mo id="S5.p2.1.m1.2.2.2" xref="S5.p2.1.m1.2.2.2.cmml">=</mo><msubsup id="S5.p2.1.m1.2.2.1" xref="S5.p2.1.m1.2.2.1.cmml"><mrow id="S5.p2.1.m1.2.2.1.1.1.1" xref="S5.p2.1.m1.2.2.1.1.1.2.cmml"><mo stretchy="false" id="S5.p2.1.m1.2.2.1.1.1.1.2" xref="S5.p2.1.m1.2.2.1.1.1.2.cmml">{</mo><msup id="S5.p2.1.m1.2.2.1.1.1.1.1" xref="S5.p2.1.m1.2.2.1.1.1.1.1.cmml"><mi id="S5.p2.1.m1.2.2.1.1.1.1.1.2" xref="S5.p2.1.m1.2.2.1.1.1.1.1.2.cmml">x</mi><mrow id="S5.p2.1.m1.1.1.1.3" xref="S5.p2.1.m1.2.2.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.p2.1.m1.1.1.1.3.1" xref="S5.p2.1.m1.2.2.1.1.1.1.1.cmml">(</mo><mi id="S5.p2.1.m1.1.1.1.1" xref="S5.p2.1.m1.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S5.p2.1.m1.1.1.1.3.2" xref="S5.p2.1.m1.2.2.1.1.1.1.1.cmml">)</mo></mrow></msup><mo stretchy="false" id="S5.p2.1.m1.2.2.1.1.1.1.3" xref="S5.p2.1.m1.2.2.1.1.1.2.cmml">}</mo></mrow><mrow id="S5.p2.1.m1.2.2.1.1.3" xref="S5.p2.1.m1.2.2.1.1.3.cmml"><mi id="S5.p2.1.m1.2.2.1.1.3.2" xref="S5.p2.1.m1.2.2.1.1.3.2.cmml">i</mi><mo id="S5.p2.1.m1.2.2.1.1.3.1" xref="S5.p2.1.m1.2.2.1.1.3.1.cmml">=</mo><mn id="S5.p2.1.m1.2.2.1.1.3.3" xref="S5.p2.1.m1.2.2.1.1.3.3.cmml">1</mn></mrow><mi id="S5.p2.1.m1.2.2.1.3" xref="S5.p2.1.m1.2.2.1.3.cmml">N</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S5.p2.1.m1.2b"><apply id="S5.p2.1.m1.2.2.cmml" xref="S5.p2.1.m1.2.2"><eq id="S5.p2.1.m1.2.2.2.cmml" xref="S5.p2.1.m1.2.2.2"></eq><ci id="S5.p2.1.m1.2.2.3.cmml" xref="S5.p2.1.m1.2.2.3">𝑋</ci><apply id="S5.p2.1.m1.2.2.1.cmml" xref="S5.p2.1.m1.2.2.1"><csymbol cd="ambiguous" id="S5.p2.1.m1.2.2.1.2.cmml" xref="S5.p2.1.m1.2.2.1">superscript</csymbol><apply id="S5.p2.1.m1.2.2.1.1.cmml" xref="S5.p2.1.m1.2.2.1"><csymbol cd="ambiguous" id="S5.p2.1.m1.2.2.1.1.2.cmml" xref="S5.p2.1.m1.2.2.1">subscript</csymbol><set id="S5.p2.1.m1.2.2.1.1.1.2.cmml" xref="S5.p2.1.m1.2.2.1.1.1.1"><apply id="S5.p2.1.m1.2.2.1.1.1.1.1.cmml" xref="S5.p2.1.m1.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.p2.1.m1.2.2.1.1.1.1.1.1.cmml" xref="S5.p2.1.m1.2.2.1.1.1.1.1">superscript</csymbol><ci id="S5.p2.1.m1.2.2.1.1.1.1.1.2.cmml" xref="S5.p2.1.m1.2.2.1.1.1.1.1.2">𝑥</ci><ci id="S5.p2.1.m1.1.1.1.1.cmml" xref="S5.p2.1.m1.1.1.1.1">𝑖</ci></apply></set><apply id="S5.p2.1.m1.2.2.1.1.3.cmml" xref="S5.p2.1.m1.2.2.1.1.3"><eq id="S5.p2.1.m1.2.2.1.1.3.1.cmml" xref="S5.p2.1.m1.2.2.1.1.3.1"></eq><ci id="S5.p2.1.m1.2.2.1.1.3.2.cmml" xref="S5.p2.1.m1.2.2.1.1.3.2">𝑖</ci><cn type="integer" id="S5.p2.1.m1.2.2.1.1.3.3.cmml" xref="S5.p2.1.m1.2.2.1.1.3.3">1</cn></apply></apply><ci id="S5.p2.1.m1.2.2.1.3.cmml" xref="S5.p2.1.m1.2.2.1.3">𝑁</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p2.1.m1.2c">X=\{x^{(i)}\}_{i=1}^{N}</annotation><annotation encoding="application/x-llamapun" id="S5.p2.1.m1.2d">italic_X = { italic_x start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT</annotation></semantics></math>) and target (<math id="S5.p2.2.m2.2" class="ltx_Math" alttext="Y=\{y^{(i)}\}_{i=1}^{N}" display="inline"><semantics id="S5.p2.2.m2.2a"><mrow id="S5.p2.2.m2.2.2" xref="S5.p2.2.m2.2.2.cmml"><mi id="S5.p2.2.m2.2.2.3" xref="S5.p2.2.m2.2.2.3.cmml">Y</mi><mo id="S5.p2.2.m2.2.2.2" xref="S5.p2.2.m2.2.2.2.cmml">=</mo><msubsup id="S5.p2.2.m2.2.2.1" xref="S5.p2.2.m2.2.2.1.cmml"><mrow id="S5.p2.2.m2.2.2.1.1.1.1" xref="S5.p2.2.m2.2.2.1.1.1.2.cmml"><mo stretchy="false" id="S5.p2.2.m2.2.2.1.1.1.1.2" xref="S5.p2.2.m2.2.2.1.1.1.2.cmml">{</mo><msup id="S5.p2.2.m2.2.2.1.1.1.1.1" xref="S5.p2.2.m2.2.2.1.1.1.1.1.cmml"><mi id="S5.p2.2.m2.2.2.1.1.1.1.1.2" xref="S5.p2.2.m2.2.2.1.1.1.1.1.2.cmml">y</mi><mrow id="S5.p2.2.m2.1.1.1.3" xref="S5.p2.2.m2.2.2.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.p2.2.m2.1.1.1.3.1" xref="S5.p2.2.m2.2.2.1.1.1.1.1.cmml">(</mo><mi id="S5.p2.2.m2.1.1.1.1" xref="S5.p2.2.m2.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S5.p2.2.m2.1.1.1.3.2" xref="S5.p2.2.m2.2.2.1.1.1.1.1.cmml">)</mo></mrow></msup><mo stretchy="false" id="S5.p2.2.m2.2.2.1.1.1.1.3" xref="S5.p2.2.m2.2.2.1.1.1.2.cmml">}</mo></mrow><mrow id="S5.p2.2.m2.2.2.1.1.3" xref="S5.p2.2.m2.2.2.1.1.3.cmml"><mi id="S5.p2.2.m2.2.2.1.1.3.2" xref="S5.p2.2.m2.2.2.1.1.3.2.cmml">i</mi><mo id="S5.p2.2.m2.2.2.1.1.3.1" xref="S5.p2.2.m2.2.2.1.1.3.1.cmml">=</mo><mn id="S5.p2.2.m2.2.2.1.1.3.3" xref="S5.p2.2.m2.2.2.1.1.3.3.cmml">1</mn></mrow><mi id="S5.p2.2.m2.2.2.1.3" xref="S5.p2.2.m2.2.2.1.3.cmml">N</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S5.p2.2.m2.2b"><apply id="S5.p2.2.m2.2.2.cmml" xref="S5.p2.2.m2.2.2"><eq id="S5.p2.2.m2.2.2.2.cmml" xref="S5.p2.2.m2.2.2.2"></eq><ci id="S5.p2.2.m2.2.2.3.cmml" xref="S5.p2.2.m2.2.2.3">𝑌</ci><apply id="S5.p2.2.m2.2.2.1.cmml" xref="S5.p2.2.m2.2.2.1"><csymbol cd="ambiguous" id="S5.p2.2.m2.2.2.1.2.cmml" xref="S5.p2.2.m2.2.2.1">superscript</csymbol><apply id="S5.p2.2.m2.2.2.1.1.cmml" xref="S5.p2.2.m2.2.2.1"><csymbol cd="ambiguous" id="S5.p2.2.m2.2.2.1.1.2.cmml" xref="S5.p2.2.m2.2.2.1">subscript</csymbol><set id="S5.p2.2.m2.2.2.1.1.1.2.cmml" xref="S5.p2.2.m2.2.2.1.1.1.1"><apply id="S5.p2.2.m2.2.2.1.1.1.1.1.cmml" xref="S5.p2.2.m2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.p2.2.m2.2.2.1.1.1.1.1.1.cmml" xref="S5.p2.2.m2.2.2.1.1.1.1.1">superscript</csymbol><ci id="S5.p2.2.m2.2.2.1.1.1.1.1.2.cmml" xref="S5.p2.2.m2.2.2.1.1.1.1.1.2">𝑦</ci><ci id="S5.p2.2.m2.1.1.1.1.cmml" xref="S5.p2.2.m2.1.1.1.1">𝑖</ci></apply></set><apply id="S5.p2.2.m2.2.2.1.1.3.cmml" xref="S5.p2.2.m2.2.2.1.1.3"><eq id="S5.p2.2.m2.2.2.1.1.3.1.cmml" xref="S5.p2.2.m2.2.2.1.1.3.1"></eq><ci id="S5.p2.2.m2.2.2.1.1.3.2.cmml" xref="S5.p2.2.m2.2.2.1.1.3.2">𝑖</ci><cn type="integer" id="S5.p2.2.m2.2.2.1.1.3.3.cmml" xref="S5.p2.2.m2.2.2.1.1.3.3">1</cn></apply></apply><ci id="S5.p2.2.m2.2.2.1.3.cmml" xref="S5.p2.2.m2.2.2.1.3">𝑁</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p2.2.m2.2c">Y=\{y^{(i)}\}_{i=1}^{N}</annotation><annotation encoding="application/x-llamapun" id="S5.p2.2.m2.2d">italic_Y = { italic_y start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT</annotation></semantics></math>) language: <math id="S5.p2.3.m3.7" class="ltx_Math" alttext="\mathcal{D}=\{(x^{(i)},y^{(i)}),...,(x^{(N)},y^{(N)})\}" display="inline"><semantics id="S5.p2.3.m3.7a"><mrow id="S5.p2.3.m3.7.7" xref="S5.p2.3.m3.7.7.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.p2.3.m3.7.7.4" xref="S5.p2.3.m3.7.7.4.cmml">𝒟</mi><mo id="S5.p2.3.m3.7.7.3" xref="S5.p2.3.m3.7.7.3.cmml">=</mo><mrow id="S5.p2.3.m3.7.7.2.2" xref="S5.p2.3.m3.7.7.2.3.cmml"><mo stretchy="false" id="S5.p2.3.m3.7.7.2.2.3" xref="S5.p2.3.m3.7.7.2.3.cmml">{</mo><mrow id="S5.p2.3.m3.6.6.1.1.1.2" xref="S5.p2.3.m3.6.6.1.1.1.3.cmml"><mo stretchy="false" id="S5.p2.3.m3.6.6.1.1.1.2.3" xref="S5.p2.3.m3.6.6.1.1.1.3.cmml">(</mo><msup id="S5.p2.3.m3.6.6.1.1.1.1.1" xref="S5.p2.3.m3.6.6.1.1.1.1.1.cmml"><mi id="S5.p2.3.m3.6.6.1.1.1.1.1.2" xref="S5.p2.3.m3.6.6.1.1.1.1.1.2.cmml">x</mi><mrow id="S5.p2.3.m3.1.1.1.3" xref="S5.p2.3.m3.6.6.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.p2.3.m3.1.1.1.3.1" xref="S5.p2.3.m3.6.6.1.1.1.1.1.cmml">(</mo><mi id="S5.p2.3.m3.1.1.1.1" xref="S5.p2.3.m3.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S5.p2.3.m3.1.1.1.3.2" xref="S5.p2.3.m3.6.6.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S5.p2.3.m3.6.6.1.1.1.2.4" xref="S5.p2.3.m3.6.6.1.1.1.3.cmml">,</mo><msup id="S5.p2.3.m3.6.6.1.1.1.2.2" xref="S5.p2.3.m3.6.6.1.1.1.2.2.cmml"><mi id="S5.p2.3.m3.6.6.1.1.1.2.2.2" xref="S5.p2.3.m3.6.6.1.1.1.2.2.2.cmml">y</mi><mrow id="S5.p2.3.m3.2.2.1.3" xref="S5.p2.3.m3.6.6.1.1.1.2.2.cmml"><mo stretchy="false" id="S5.p2.3.m3.2.2.1.3.1" xref="S5.p2.3.m3.6.6.1.1.1.2.2.cmml">(</mo><mi id="S5.p2.3.m3.2.2.1.1" xref="S5.p2.3.m3.2.2.1.1.cmml">i</mi><mo stretchy="false" id="S5.p2.3.m3.2.2.1.3.2" xref="S5.p2.3.m3.6.6.1.1.1.2.2.cmml">)</mo></mrow></msup><mo stretchy="false" id="S5.p2.3.m3.6.6.1.1.1.2.5" xref="S5.p2.3.m3.6.6.1.1.1.3.cmml">)</mo></mrow><mo id="S5.p2.3.m3.7.7.2.2.4" xref="S5.p2.3.m3.7.7.2.3.cmml">,</mo><mi mathvariant="normal" id="S5.p2.3.m3.5.5" xref="S5.p2.3.m3.5.5.cmml">…</mi><mo id="S5.p2.3.m3.7.7.2.2.5" xref="S5.p2.3.m3.7.7.2.3.cmml">,</mo><mrow id="S5.p2.3.m3.7.7.2.2.2.2" xref="S5.p2.3.m3.7.7.2.2.2.3.cmml"><mo stretchy="false" id="S5.p2.3.m3.7.7.2.2.2.2.3" xref="S5.p2.3.m3.7.7.2.2.2.3.cmml">(</mo><msup id="S5.p2.3.m3.7.7.2.2.2.1.1" xref="S5.p2.3.m3.7.7.2.2.2.1.1.cmml"><mi id="S5.p2.3.m3.7.7.2.2.2.1.1.2" xref="S5.p2.3.m3.7.7.2.2.2.1.1.2.cmml">x</mi><mrow id="S5.p2.3.m3.3.3.1.3" xref="S5.p2.3.m3.7.7.2.2.2.1.1.cmml"><mo stretchy="false" id="S5.p2.3.m3.3.3.1.3.1" xref="S5.p2.3.m3.7.7.2.2.2.1.1.cmml">(</mo><mi id="S5.p2.3.m3.3.3.1.1" xref="S5.p2.3.m3.3.3.1.1.cmml">N</mi><mo stretchy="false" id="S5.p2.3.m3.3.3.1.3.2" xref="S5.p2.3.m3.7.7.2.2.2.1.1.cmml">)</mo></mrow></msup><mo id="S5.p2.3.m3.7.7.2.2.2.2.4" xref="S5.p2.3.m3.7.7.2.2.2.3.cmml">,</mo><msup id="S5.p2.3.m3.7.7.2.2.2.2.2" xref="S5.p2.3.m3.7.7.2.2.2.2.2.cmml"><mi id="S5.p2.3.m3.7.7.2.2.2.2.2.2" xref="S5.p2.3.m3.7.7.2.2.2.2.2.2.cmml">y</mi><mrow id="S5.p2.3.m3.4.4.1.3" xref="S5.p2.3.m3.7.7.2.2.2.2.2.cmml"><mo stretchy="false" id="S5.p2.3.m3.4.4.1.3.1" xref="S5.p2.3.m3.7.7.2.2.2.2.2.cmml">(</mo><mi id="S5.p2.3.m3.4.4.1.1" xref="S5.p2.3.m3.4.4.1.1.cmml">N</mi><mo stretchy="false" id="S5.p2.3.m3.4.4.1.3.2" xref="S5.p2.3.m3.7.7.2.2.2.2.2.cmml">)</mo></mrow></msup><mo stretchy="false" id="S5.p2.3.m3.7.7.2.2.2.2.5" xref="S5.p2.3.m3.7.7.2.2.2.3.cmml">)</mo></mrow><mo stretchy="false" id="S5.p2.3.m3.7.7.2.2.6" xref="S5.p2.3.m3.7.7.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.p2.3.m3.7b"><apply id="S5.p2.3.m3.7.7.cmml" xref="S5.p2.3.m3.7.7"><eq id="S5.p2.3.m3.7.7.3.cmml" xref="S5.p2.3.m3.7.7.3"></eq><ci id="S5.p2.3.m3.7.7.4.cmml" xref="S5.p2.3.m3.7.7.4">𝒟</ci><set id="S5.p2.3.m3.7.7.2.3.cmml" xref="S5.p2.3.m3.7.7.2.2"><interval closure="open" id="S5.p2.3.m3.6.6.1.1.1.3.cmml" xref="S5.p2.3.m3.6.6.1.1.1.2"><apply id="S5.p2.3.m3.6.6.1.1.1.1.1.cmml" xref="S5.p2.3.m3.6.6.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.p2.3.m3.6.6.1.1.1.1.1.1.cmml" xref="S5.p2.3.m3.6.6.1.1.1.1.1">superscript</csymbol><ci id="S5.p2.3.m3.6.6.1.1.1.1.1.2.cmml" xref="S5.p2.3.m3.6.6.1.1.1.1.1.2">𝑥</ci><ci id="S5.p2.3.m3.1.1.1.1.cmml" xref="S5.p2.3.m3.1.1.1.1">𝑖</ci></apply><apply id="S5.p2.3.m3.6.6.1.1.1.2.2.cmml" xref="S5.p2.3.m3.6.6.1.1.1.2.2"><csymbol cd="ambiguous" id="S5.p2.3.m3.6.6.1.1.1.2.2.1.cmml" xref="S5.p2.3.m3.6.6.1.1.1.2.2">superscript</csymbol><ci id="S5.p2.3.m3.6.6.1.1.1.2.2.2.cmml" xref="S5.p2.3.m3.6.6.1.1.1.2.2.2">𝑦</ci><ci id="S5.p2.3.m3.2.2.1.1.cmml" xref="S5.p2.3.m3.2.2.1.1">𝑖</ci></apply></interval><ci id="S5.p2.3.m3.5.5.cmml" xref="S5.p2.3.m3.5.5">…</ci><interval closure="open" id="S5.p2.3.m3.7.7.2.2.2.3.cmml" xref="S5.p2.3.m3.7.7.2.2.2.2"><apply id="S5.p2.3.m3.7.7.2.2.2.1.1.cmml" xref="S5.p2.3.m3.7.7.2.2.2.1.1"><csymbol cd="ambiguous" id="S5.p2.3.m3.7.7.2.2.2.1.1.1.cmml" xref="S5.p2.3.m3.7.7.2.2.2.1.1">superscript</csymbol><ci id="S5.p2.3.m3.7.7.2.2.2.1.1.2.cmml" xref="S5.p2.3.m3.7.7.2.2.2.1.1.2">𝑥</ci><ci id="S5.p2.3.m3.3.3.1.1.cmml" xref="S5.p2.3.m3.3.3.1.1">𝑁</ci></apply><apply id="S5.p2.3.m3.7.7.2.2.2.2.2.cmml" xref="S5.p2.3.m3.7.7.2.2.2.2.2"><csymbol cd="ambiguous" id="S5.p2.3.m3.7.7.2.2.2.2.2.1.cmml" xref="S5.p2.3.m3.7.7.2.2.2.2.2">superscript</csymbol><ci id="S5.p2.3.m3.7.7.2.2.2.2.2.2.cmml" xref="S5.p2.3.m3.7.7.2.2.2.2.2.2">𝑦</ci><ci id="S5.p2.3.m3.4.4.1.1.cmml" xref="S5.p2.3.m3.4.4.1.1">𝑁</ci></apply></interval></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p2.3.m3.7c">\mathcal{D}=\{(x^{(i)},y^{(i)}),...,(x^{(N)},y^{(N)})\}</annotation><annotation encoding="application/x-llamapun" id="S5.p2.3.m3.7d">caligraphic_D = { ( italic_x start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT , italic_y start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT ) , … , ( italic_x start_POSTSUPERSCRIPT ( italic_N ) end_POSTSUPERSCRIPT , italic_y start_POSTSUPERSCRIPT ( italic_N ) end_POSTSUPERSCRIPT ) }</annotation></semantics></math>. The model <math id="S5.p2.4.m4.1" class="ltx_Math" alttext="p_{\theta}" display="inline"><semantics id="S5.p2.4.m4.1a"><msub id="S5.p2.4.m4.1.1" xref="S5.p2.4.m4.1.1.cmml"><mi id="S5.p2.4.m4.1.1.2" xref="S5.p2.4.m4.1.1.2.cmml">p</mi><mi id="S5.p2.4.m4.1.1.3" xref="S5.p2.4.m4.1.1.3.cmml">θ</mi></msub><annotation-xml encoding="MathML-Content" id="S5.p2.4.m4.1b"><apply id="S5.p2.4.m4.1.1.cmml" xref="S5.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S5.p2.4.m4.1.1.1.cmml" xref="S5.p2.4.m4.1.1">subscript</csymbol><ci id="S5.p2.4.m4.1.1.2.cmml" xref="S5.p2.4.m4.1.1.2">𝑝</ci><ci id="S5.p2.4.m4.1.1.3.cmml" xref="S5.p2.4.m4.1.1.3">𝜃</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.p2.4.m4.1c">p_{\theta}</annotation><annotation encoding="application/x-llamapun" id="S5.p2.4.m4.1d">italic_p start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT</annotation></semantics></math> with parameters <math id="S5.p2.5.m5.1" class="ltx_Math" alttext="\theta" display="inline"><semantics id="S5.p2.5.m5.1a"><mi id="S5.p2.5.m5.1.1" xref="S5.p2.5.m5.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S5.p2.5.m5.1b"><ci id="S5.p2.5.m5.1.1.cmml" xref="S5.p2.5.m5.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p2.5.m5.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S5.p2.5.m5.1d">italic_θ</annotation></semantics></math> is trained by minimizing the loss:</p>
</div>
<div id="S5.p3" class="ltx_para">
<table id="S5.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S5.E2.m1.6" class="ltx_Math" alttext="\mathcal{L(\theta,\mathcal{D})}=\sum_{i=1}^{N}\ell(y^{(i)},p_{\theta}(x^{(i)}))" display="block"><semantics id="S5.E2.m1.6a"><mrow id="S5.E2.m1.6.6" xref="S5.E2.m1.6.6.cmml"><mrow id="S5.E2.m1.6.6.4" xref="S5.E2.m1.6.6.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.E2.m1.6.6.4.2" xref="S5.E2.m1.6.6.4.2.cmml">ℒ</mi><mo id="S5.E2.m1.6.6.4.1" xref="S5.E2.m1.6.6.4.1.cmml">⁢</mo><mrow id="S5.E2.m1.6.6.4.3.2" xref="S5.E2.m1.6.6.4.3.1.cmml"><mo stretchy="false" id="S5.E2.m1.6.6.4.3.2.1" xref="S5.E2.m1.6.6.4.3.1.cmml">(</mo><mi id="S5.E2.m1.3.3" xref="S5.E2.m1.3.3.cmml">θ</mi><mo id="S5.E2.m1.6.6.4.3.2.2" xref="S5.E2.m1.6.6.4.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S5.E2.m1.4.4" xref="S5.E2.m1.4.4.cmml">𝒟</mi><mo stretchy="false" id="S5.E2.m1.6.6.4.3.2.3" xref="S5.E2.m1.6.6.4.3.1.cmml">)</mo></mrow></mrow><mo rspace="0.111em" id="S5.E2.m1.6.6.3" xref="S5.E2.m1.6.6.3.cmml">=</mo><mrow id="S5.E2.m1.6.6.2" xref="S5.E2.m1.6.6.2.cmml"><munderover id="S5.E2.m1.6.6.2.3" xref="S5.E2.m1.6.6.2.3.cmml"><mo movablelimits="false" id="S5.E2.m1.6.6.2.3.2.2" xref="S5.E2.m1.6.6.2.3.2.2.cmml">∑</mo><mrow id="S5.E2.m1.6.6.2.3.2.3" xref="S5.E2.m1.6.6.2.3.2.3.cmml"><mi id="S5.E2.m1.6.6.2.3.2.3.2" xref="S5.E2.m1.6.6.2.3.2.3.2.cmml">i</mi><mo id="S5.E2.m1.6.6.2.3.2.3.1" xref="S5.E2.m1.6.6.2.3.2.3.1.cmml">=</mo><mn id="S5.E2.m1.6.6.2.3.2.3.3" xref="S5.E2.m1.6.6.2.3.2.3.3.cmml">1</mn></mrow><mi id="S5.E2.m1.6.6.2.3.3" xref="S5.E2.m1.6.6.2.3.3.cmml">N</mi></munderover><mrow id="S5.E2.m1.6.6.2.2" xref="S5.E2.m1.6.6.2.2.cmml"><mi mathvariant="normal" id="S5.E2.m1.6.6.2.2.4" xref="S5.E2.m1.6.6.2.2.4.cmml">ℓ</mi><mo id="S5.E2.m1.6.6.2.2.3" xref="S5.E2.m1.6.6.2.2.3.cmml">⁢</mo><mrow id="S5.E2.m1.6.6.2.2.2.2" xref="S5.E2.m1.6.6.2.2.2.3.cmml"><mo stretchy="false" id="S5.E2.m1.6.6.2.2.2.2.3" xref="S5.E2.m1.6.6.2.2.2.3.cmml">(</mo><msup id="S5.E2.m1.5.5.1.1.1.1.1" xref="S5.E2.m1.5.5.1.1.1.1.1.cmml"><mi id="S5.E2.m1.5.5.1.1.1.1.1.2" xref="S5.E2.m1.5.5.1.1.1.1.1.2.cmml">y</mi><mrow id="S5.E2.m1.1.1.1.3" xref="S5.E2.m1.5.5.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.E2.m1.1.1.1.3.1" xref="S5.E2.m1.5.5.1.1.1.1.1.cmml">(</mo><mi id="S5.E2.m1.1.1.1.1" xref="S5.E2.m1.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S5.E2.m1.1.1.1.3.2" xref="S5.E2.m1.5.5.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S5.E2.m1.6.6.2.2.2.2.4" xref="S5.E2.m1.6.6.2.2.2.3.cmml">,</mo><mrow id="S5.E2.m1.6.6.2.2.2.2.2" xref="S5.E2.m1.6.6.2.2.2.2.2.cmml"><msub id="S5.E2.m1.6.6.2.2.2.2.2.3" xref="S5.E2.m1.6.6.2.2.2.2.2.3.cmml"><mi id="S5.E2.m1.6.6.2.2.2.2.2.3.2" xref="S5.E2.m1.6.6.2.2.2.2.2.3.2.cmml">p</mi><mi id="S5.E2.m1.6.6.2.2.2.2.2.3.3" xref="S5.E2.m1.6.6.2.2.2.2.2.3.3.cmml">θ</mi></msub><mo id="S5.E2.m1.6.6.2.2.2.2.2.2" xref="S5.E2.m1.6.6.2.2.2.2.2.2.cmml">⁢</mo><mrow id="S5.E2.m1.6.6.2.2.2.2.2.1.1" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.cmml"><mo stretchy="false" id="S5.E2.m1.6.6.2.2.2.2.2.1.1.2" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.cmml">(</mo><msup id="S5.E2.m1.6.6.2.2.2.2.2.1.1.1" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.cmml"><mi id="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.2" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.2.cmml">x</mi><mrow id="S5.E2.m1.2.2.1.3" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.cmml"><mo stretchy="false" id="S5.E2.m1.2.2.1.3.1" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.cmml">(</mo><mi id="S5.E2.m1.2.2.1.1" xref="S5.E2.m1.2.2.1.1.cmml">i</mi><mo stretchy="false" id="S5.E2.m1.2.2.1.3.2" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.cmml">)</mo></mrow></msup><mo stretchy="false" id="S5.E2.m1.6.6.2.2.2.2.2.1.1.3" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="S5.E2.m1.6.6.2.2.2.2.5" xref="S5.E2.m1.6.6.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.E2.m1.6b"><apply id="S5.E2.m1.6.6.cmml" xref="S5.E2.m1.6.6"><eq id="S5.E2.m1.6.6.3.cmml" xref="S5.E2.m1.6.6.3"></eq><apply id="S5.E2.m1.6.6.4.cmml" xref="S5.E2.m1.6.6.4"><times id="S5.E2.m1.6.6.4.1.cmml" xref="S5.E2.m1.6.6.4.1"></times><ci id="S5.E2.m1.6.6.4.2.cmml" xref="S5.E2.m1.6.6.4.2">ℒ</ci><interval closure="open" id="S5.E2.m1.6.6.4.3.1.cmml" xref="S5.E2.m1.6.6.4.3.2"><ci id="S5.E2.m1.3.3.cmml" xref="S5.E2.m1.3.3">𝜃</ci><ci id="S5.E2.m1.4.4.cmml" xref="S5.E2.m1.4.4">𝒟</ci></interval></apply><apply id="S5.E2.m1.6.6.2.cmml" xref="S5.E2.m1.6.6.2"><apply id="S5.E2.m1.6.6.2.3.cmml" xref="S5.E2.m1.6.6.2.3"><csymbol cd="ambiguous" id="S5.E2.m1.6.6.2.3.1.cmml" xref="S5.E2.m1.6.6.2.3">superscript</csymbol><apply id="S5.E2.m1.6.6.2.3.2.cmml" xref="S5.E2.m1.6.6.2.3"><csymbol cd="ambiguous" id="S5.E2.m1.6.6.2.3.2.1.cmml" xref="S5.E2.m1.6.6.2.3">subscript</csymbol><sum id="S5.E2.m1.6.6.2.3.2.2.cmml" xref="S5.E2.m1.6.6.2.3.2.2"></sum><apply id="S5.E2.m1.6.6.2.3.2.3.cmml" xref="S5.E2.m1.6.6.2.3.2.3"><eq id="S5.E2.m1.6.6.2.3.2.3.1.cmml" xref="S5.E2.m1.6.6.2.3.2.3.1"></eq><ci id="S5.E2.m1.6.6.2.3.2.3.2.cmml" xref="S5.E2.m1.6.6.2.3.2.3.2">𝑖</ci><cn type="integer" id="S5.E2.m1.6.6.2.3.2.3.3.cmml" xref="S5.E2.m1.6.6.2.3.2.3.3">1</cn></apply></apply><ci id="S5.E2.m1.6.6.2.3.3.cmml" xref="S5.E2.m1.6.6.2.3.3">𝑁</ci></apply><apply id="S5.E2.m1.6.6.2.2.cmml" xref="S5.E2.m1.6.6.2.2"><times id="S5.E2.m1.6.6.2.2.3.cmml" xref="S5.E2.m1.6.6.2.2.3"></times><ci id="S5.E2.m1.6.6.2.2.4.cmml" xref="S5.E2.m1.6.6.2.2.4">ℓ</ci><interval closure="open" id="S5.E2.m1.6.6.2.2.2.3.cmml" xref="S5.E2.m1.6.6.2.2.2.2"><apply id="S5.E2.m1.5.5.1.1.1.1.1.cmml" xref="S5.E2.m1.5.5.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.E2.m1.5.5.1.1.1.1.1.1.cmml" xref="S5.E2.m1.5.5.1.1.1.1.1">superscript</csymbol><ci id="S5.E2.m1.5.5.1.1.1.1.1.2.cmml" xref="S5.E2.m1.5.5.1.1.1.1.1.2">𝑦</ci><ci id="S5.E2.m1.1.1.1.1.cmml" xref="S5.E2.m1.1.1.1.1">𝑖</ci></apply><apply id="S5.E2.m1.6.6.2.2.2.2.2.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2"><times id="S5.E2.m1.6.6.2.2.2.2.2.2.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2.2"></times><apply id="S5.E2.m1.6.6.2.2.2.2.2.3.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S5.E2.m1.6.6.2.2.2.2.2.3.1.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2.3">subscript</csymbol><ci id="S5.E2.m1.6.6.2.2.2.2.2.3.2.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2.3.2">𝑝</ci><ci id="S5.E2.m1.6.6.2.2.2.2.2.3.3.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2.3.3">𝜃</ci></apply><apply id="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1"><csymbol cd="ambiguous" id="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.1.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1">superscript</csymbol><ci id="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.2.cmml" xref="S5.E2.m1.6.6.2.2.2.2.2.1.1.1.2">𝑥</ci><ci id="S5.E2.m1.2.2.1.1.cmml" xref="S5.E2.m1.2.2.1.1">𝑖</ci></apply></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.E2.m1.6c">\mathcal{L(\theta,\mathcal{D})}=\sum_{i=1}^{N}\ell(y^{(i)},p_{\theta}(x^{(i)}))</annotation><annotation encoding="application/x-llamapun" id="S5.E2.m1.6d">caligraphic_L ( italic_θ , caligraphic_D ) = ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT roman_ℓ ( italic_y start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT , italic_p start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_x start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
<div id="S5.p4" class="ltx_para">
<p id="S5.p4.3" class="ltx_p"><span id="S5.p4.3.1" class="ltx_text ltx_font_bold">Upweighting</span> here refers to sentence-level upweighting, where there is a set of sentences <math id="S5.p4.1.m1.1" class="ltx_Math" alttext="A" display="inline"><semantics id="S5.p4.1.m1.1a"><mi id="S5.p4.1.m1.1.1" xref="S5.p4.1.m1.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S5.p4.1.m1.1b"><ci id="S5.p4.1.m1.1.1.cmml" xref="S5.p4.1.m1.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p4.1.m1.1c">A</annotation><annotation encoding="application/x-llamapun" id="S5.p4.1.m1.1d">italic_A</annotation></semantics></math> that we’d like to upweight with a weight coefficient <math id="S5.p4.2.m2.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S5.p4.2.m2.1a"><mi id="S5.p4.2.m2.1.1" xref="S5.p4.2.m2.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S5.p4.2.m2.1b"><ci id="S5.p4.2.m2.1.1.cmml" xref="S5.p4.2.m2.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p4.2.m2.1c">\alpha</annotation><annotation encoding="application/x-llamapun" id="S5.p4.2.m2.1d">italic_α</annotation></semantics></math>. In this case, <math id="S5.p4.3.m3.1" class="ltx_Math" alttext="A" display="inline"><semantics id="S5.p4.3.m3.1a"><mi id="S5.p4.3.m3.1.1" xref="S5.p4.3.m3.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S5.p4.3.m3.1b"><ci id="S5.p4.3.m3.1.1.cmml" xref="S5.p4.3.m3.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p4.3.m3.1c">A</annotation><annotation encoding="application/x-llamapun" id="S5.p4.3.m3.1d">italic_A</annotation></semantics></math> would be potentially idiomatic sentences. We keep all other parameters for training the same as in the base model.</p>
</div>
<div id="S5.p5" class="ltx_para">
<table id="S5.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S5.E3.m1.8" class="ltx_Math" alttext="\mathcal{L(\theta,\mathcal{D})}=\sum_{i=1}^{N}\alpha^{\mathbb{1}(x^{(i)}\in A)%
}\ell(y^{(i)},p_{\theta}(x^{(i)}))" display="block"><semantics id="S5.E3.m1.8a"><mrow id="S5.E3.m1.8.8" xref="S5.E3.m1.8.8.cmml"><mrow id="S5.E3.m1.8.8.4" xref="S5.E3.m1.8.8.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S5.E3.m1.8.8.4.2" xref="S5.E3.m1.8.8.4.2.cmml">ℒ</mi><mo id="S5.E3.m1.8.8.4.1" xref="S5.E3.m1.8.8.4.1.cmml">⁢</mo><mrow id="S5.E3.m1.8.8.4.3.2" xref="S5.E3.m1.8.8.4.3.1.cmml"><mo stretchy="false" id="S5.E3.m1.8.8.4.3.2.1" xref="S5.E3.m1.8.8.4.3.1.cmml">(</mo><mi id="S5.E3.m1.5.5" xref="S5.E3.m1.5.5.cmml">θ</mi><mo id="S5.E3.m1.8.8.4.3.2.2" xref="S5.E3.m1.8.8.4.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S5.E3.m1.6.6" xref="S5.E3.m1.6.6.cmml">𝒟</mi><mo stretchy="false" id="S5.E3.m1.8.8.4.3.2.3" xref="S5.E3.m1.8.8.4.3.1.cmml">)</mo></mrow></mrow><mo rspace="0.111em" id="S5.E3.m1.8.8.3" xref="S5.E3.m1.8.8.3.cmml">=</mo><mrow id="S5.E3.m1.8.8.2" xref="S5.E3.m1.8.8.2.cmml"><munderover id="S5.E3.m1.8.8.2.3" xref="S5.E3.m1.8.8.2.3.cmml"><mo movablelimits="false" id="S5.E3.m1.8.8.2.3.2.2" xref="S5.E3.m1.8.8.2.3.2.2.cmml">∑</mo><mrow id="S5.E3.m1.8.8.2.3.2.3" xref="S5.E3.m1.8.8.2.3.2.3.cmml"><mi id="S5.E3.m1.8.8.2.3.2.3.2" xref="S5.E3.m1.8.8.2.3.2.3.2.cmml">i</mi><mo id="S5.E3.m1.8.8.2.3.2.3.1" xref="S5.E3.m1.8.8.2.3.2.3.1.cmml">=</mo><mn id="S5.E3.m1.8.8.2.3.2.3.3" xref="S5.E3.m1.8.8.2.3.2.3.3.cmml">1</mn></mrow><mi id="S5.E3.m1.8.8.2.3.3" xref="S5.E3.m1.8.8.2.3.3.cmml">N</mi></munderover><mrow id="S5.E3.m1.8.8.2.2" xref="S5.E3.m1.8.8.2.2.cmml"><msup id="S5.E3.m1.8.8.2.2.4" xref="S5.E3.m1.8.8.2.2.4.cmml"><mi id="S5.E3.m1.8.8.2.2.4.2" xref="S5.E3.m1.8.8.2.2.4.2.cmml">α</mi><mrow id="S5.E3.m1.2.2.2" xref="S5.E3.m1.2.2.2.cmml"><mi mathvariant="double-struck" id="S5.E3.m1.2.2.2.4" xref="S5.E3.m1.2.2.2.4.cmml">𝟙</mi><mo id="S5.E3.m1.2.2.2.3" xref="S5.E3.m1.2.2.2.3.cmml">⁢</mo><mrow id="S5.E3.m1.2.2.2.2.1" xref="S5.E3.m1.2.2.2.2.1.1.cmml"><mo stretchy="false" id="S5.E3.m1.2.2.2.2.1.2" xref="S5.E3.m1.2.2.2.2.1.1.cmml">(</mo><mrow id="S5.E3.m1.2.2.2.2.1.1" xref="S5.E3.m1.2.2.2.2.1.1.cmml"><msup id="S5.E3.m1.2.2.2.2.1.1.2" xref="S5.E3.m1.2.2.2.2.1.1.2.cmml"><mi id="S5.E3.m1.2.2.2.2.1.1.2.2" xref="S5.E3.m1.2.2.2.2.1.1.2.2.cmml">x</mi><mrow id="S5.E3.m1.1.1.1.1.1.3" xref="S5.E3.m1.2.2.2.2.1.1.2.cmml"><mo stretchy="false" id="S5.E3.m1.1.1.1.1.1.3.1" xref="S5.E3.m1.2.2.2.2.1.1.2.cmml">(</mo><mi id="S5.E3.m1.1.1.1.1.1.1" xref="S5.E3.m1.1.1.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S5.E3.m1.1.1.1.1.1.3.2" xref="S5.E3.m1.2.2.2.2.1.1.2.cmml">)</mo></mrow></msup><mo id="S5.E3.m1.2.2.2.2.1.1.1" xref="S5.E3.m1.2.2.2.2.1.1.1.cmml">∈</mo><mi id="S5.E3.m1.2.2.2.2.1.1.3" xref="S5.E3.m1.2.2.2.2.1.1.3.cmml">A</mi></mrow><mo stretchy="false" id="S5.E3.m1.2.2.2.2.1.3" xref="S5.E3.m1.2.2.2.2.1.1.cmml">)</mo></mrow></mrow></msup><mo id="S5.E3.m1.8.8.2.2.3" xref="S5.E3.m1.8.8.2.2.3.cmml">⁢</mo><mi mathvariant="normal" id="S5.E3.m1.8.8.2.2.5" xref="S5.E3.m1.8.8.2.2.5.cmml">ℓ</mi><mo id="S5.E3.m1.8.8.2.2.3a" xref="S5.E3.m1.8.8.2.2.3.cmml">⁢</mo><mrow id="S5.E3.m1.8.8.2.2.2.2" xref="S5.E3.m1.8.8.2.2.2.3.cmml"><mo stretchy="false" id="S5.E3.m1.8.8.2.2.2.2.3" xref="S5.E3.m1.8.8.2.2.2.3.cmml">(</mo><msup id="S5.E3.m1.7.7.1.1.1.1.1" xref="S5.E3.m1.7.7.1.1.1.1.1.cmml"><mi id="S5.E3.m1.7.7.1.1.1.1.1.2" xref="S5.E3.m1.7.7.1.1.1.1.1.2.cmml">y</mi><mrow id="S5.E3.m1.3.3.1.3" xref="S5.E3.m1.7.7.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.E3.m1.3.3.1.3.1" xref="S5.E3.m1.7.7.1.1.1.1.1.cmml">(</mo><mi id="S5.E3.m1.3.3.1.1" xref="S5.E3.m1.3.3.1.1.cmml">i</mi><mo stretchy="false" id="S5.E3.m1.3.3.1.3.2" xref="S5.E3.m1.7.7.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S5.E3.m1.8.8.2.2.2.2.4" xref="S5.E3.m1.8.8.2.2.2.3.cmml">,</mo><mrow id="S5.E3.m1.8.8.2.2.2.2.2" xref="S5.E3.m1.8.8.2.2.2.2.2.cmml"><msub id="S5.E3.m1.8.8.2.2.2.2.2.3" xref="S5.E3.m1.8.8.2.2.2.2.2.3.cmml"><mi id="S5.E3.m1.8.8.2.2.2.2.2.3.2" xref="S5.E3.m1.8.8.2.2.2.2.2.3.2.cmml">p</mi><mi id="S5.E3.m1.8.8.2.2.2.2.2.3.3" xref="S5.E3.m1.8.8.2.2.2.2.2.3.3.cmml">θ</mi></msub><mo id="S5.E3.m1.8.8.2.2.2.2.2.2" xref="S5.E3.m1.8.8.2.2.2.2.2.2.cmml">⁢</mo><mrow id="S5.E3.m1.8.8.2.2.2.2.2.1.1" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.cmml"><mo stretchy="false" id="S5.E3.m1.8.8.2.2.2.2.2.1.1.2" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.cmml">(</mo><msup id="S5.E3.m1.8.8.2.2.2.2.2.1.1.1" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.cmml"><mi id="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.2" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.2.cmml">x</mi><mrow id="S5.E3.m1.4.4.1.3" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.cmml"><mo stretchy="false" id="S5.E3.m1.4.4.1.3.1" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.cmml">(</mo><mi id="S5.E3.m1.4.4.1.1" xref="S5.E3.m1.4.4.1.1.cmml">i</mi><mo stretchy="false" id="S5.E3.m1.4.4.1.3.2" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.cmml">)</mo></mrow></msup><mo stretchy="false" id="S5.E3.m1.8.8.2.2.2.2.2.1.1.3" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="S5.E3.m1.8.8.2.2.2.2.5" xref="S5.E3.m1.8.8.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.E3.m1.8b"><apply id="S5.E3.m1.8.8.cmml" xref="S5.E3.m1.8.8"><eq id="S5.E3.m1.8.8.3.cmml" xref="S5.E3.m1.8.8.3"></eq><apply id="S5.E3.m1.8.8.4.cmml" xref="S5.E3.m1.8.8.4"><times id="S5.E3.m1.8.8.4.1.cmml" xref="S5.E3.m1.8.8.4.1"></times><ci id="S5.E3.m1.8.8.4.2.cmml" xref="S5.E3.m1.8.8.4.2">ℒ</ci><interval closure="open" id="S5.E3.m1.8.8.4.3.1.cmml" xref="S5.E3.m1.8.8.4.3.2"><ci id="S5.E3.m1.5.5.cmml" xref="S5.E3.m1.5.5">𝜃</ci><ci id="S5.E3.m1.6.6.cmml" xref="S5.E3.m1.6.6">𝒟</ci></interval></apply><apply id="S5.E3.m1.8.8.2.cmml" xref="S5.E3.m1.8.8.2"><apply id="S5.E3.m1.8.8.2.3.cmml" xref="S5.E3.m1.8.8.2.3"><csymbol cd="ambiguous" id="S5.E3.m1.8.8.2.3.1.cmml" xref="S5.E3.m1.8.8.2.3">superscript</csymbol><apply id="S5.E3.m1.8.8.2.3.2.cmml" xref="S5.E3.m1.8.8.2.3"><csymbol cd="ambiguous" id="S5.E3.m1.8.8.2.3.2.1.cmml" xref="S5.E3.m1.8.8.2.3">subscript</csymbol><sum id="S5.E3.m1.8.8.2.3.2.2.cmml" xref="S5.E3.m1.8.8.2.3.2.2"></sum><apply id="S5.E3.m1.8.8.2.3.2.3.cmml" xref="S5.E3.m1.8.8.2.3.2.3"><eq id="S5.E3.m1.8.8.2.3.2.3.1.cmml" xref="S5.E3.m1.8.8.2.3.2.3.1"></eq><ci id="S5.E3.m1.8.8.2.3.2.3.2.cmml" xref="S5.E3.m1.8.8.2.3.2.3.2">𝑖</ci><cn type="integer" id="S5.E3.m1.8.8.2.3.2.3.3.cmml" xref="S5.E3.m1.8.8.2.3.2.3.3">1</cn></apply></apply><ci id="S5.E3.m1.8.8.2.3.3.cmml" xref="S5.E3.m1.8.8.2.3.3">𝑁</ci></apply><apply id="S5.E3.m1.8.8.2.2.cmml" xref="S5.E3.m1.8.8.2.2"><times id="S5.E3.m1.8.8.2.2.3.cmml" xref="S5.E3.m1.8.8.2.2.3"></times><apply id="S5.E3.m1.8.8.2.2.4.cmml" xref="S5.E3.m1.8.8.2.2.4"><csymbol cd="ambiguous" id="S5.E3.m1.8.8.2.2.4.1.cmml" xref="S5.E3.m1.8.8.2.2.4">superscript</csymbol><ci id="S5.E3.m1.8.8.2.2.4.2.cmml" xref="S5.E3.m1.8.8.2.2.4.2">𝛼</ci><apply id="S5.E3.m1.2.2.2.cmml" xref="S5.E3.m1.2.2.2"><times id="S5.E3.m1.2.2.2.3.cmml" xref="S5.E3.m1.2.2.2.3"></times><ci id="S5.E3.m1.2.2.2.4.cmml" xref="S5.E3.m1.2.2.2.4">double-struck-𝟙</ci><apply id="S5.E3.m1.2.2.2.2.1.1.cmml" xref="S5.E3.m1.2.2.2.2.1"><in id="S5.E3.m1.2.2.2.2.1.1.1.cmml" xref="S5.E3.m1.2.2.2.2.1.1.1"></in><apply id="S5.E3.m1.2.2.2.2.1.1.2.cmml" xref="S5.E3.m1.2.2.2.2.1.1.2"><csymbol cd="ambiguous" id="S5.E3.m1.2.2.2.2.1.1.2.1.cmml" xref="S5.E3.m1.2.2.2.2.1.1.2">superscript</csymbol><ci id="S5.E3.m1.2.2.2.2.1.1.2.2.cmml" xref="S5.E3.m1.2.2.2.2.1.1.2.2">𝑥</ci><ci id="S5.E3.m1.1.1.1.1.1.1.cmml" xref="S5.E3.m1.1.1.1.1.1.1">𝑖</ci></apply><ci id="S5.E3.m1.2.2.2.2.1.1.3.cmml" xref="S5.E3.m1.2.2.2.2.1.1.3">𝐴</ci></apply></apply></apply><ci id="S5.E3.m1.8.8.2.2.5.cmml" xref="S5.E3.m1.8.8.2.2.5">ℓ</ci><interval closure="open" id="S5.E3.m1.8.8.2.2.2.3.cmml" xref="S5.E3.m1.8.8.2.2.2.2"><apply id="S5.E3.m1.7.7.1.1.1.1.1.cmml" xref="S5.E3.m1.7.7.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.E3.m1.7.7.1.1.1.1.1.1.cmml" xref="S5.E3.m1.7.7.1.1.1.1.1">superscript</csymbol><ci id="S5.E3.m1.7.7.1.1.1.1.1.2.cmml" xref="S5.E3.m1.7.7.1.1.1.1.1.2">𝑦</ci><ci id="S5.E3.m1.3.3.1.1.cmml" xref="S5.E3.m1.3.3.1.1">𝑖</ci></apply><apply id="S5.E3.m1.8.8.2.2.2.2.2.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2"><times id="S5.E3.m1.8.8.2.2.2.2.2.2.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2.2"></times><apply id="S5.E3.m1.8.8.2.2.2.2.2.3.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S5.E3.m1.8.8.2.2.2.2.2.3.1.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2.3">subscript</csymbol><ci id="S5.E3.m1.8.8.2.2.2.2.2.3.2.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2.3.2">𝑝</ci><ci id="S5.E3.m1.8.8.2.2.2.2.2.3.3.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2.3.3">𝜃</ci></apply><apply id="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1"><csymbol cd="ambiguous" id="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.1.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1">superscript</csymbol><ci id="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.2.cmml" xref="S5.E3.m1.8.8.2.2.2.2.2.1.1.1.2">𝑥</ci><ci id="S5.E3.m1.4.4.1.1.cmml" xref="S5.E3.m1.4.4.1.1">𝑖</ci></apply></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.E3.m1.8c">\mathcal{L(\theta,\mathcal{D})}=\sum_{i=1}^{N}\alpha^{\mathbb{1}(x^{(i)}\in A)%
}\ell(y^{(i)},p_{\theta}(x^{(i)}))</annotation><annotation encoding="application/x-llamapun" id="S5.E3.m1.8d">caligraphic_L ( italic_θ , caligraphic_D ) = ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT italic_α start_POSTSUPERSCRIPT blackboard_𝟙 ( italic_x start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT ∈ italic_A ) end_POSTSUPERSCRIPT roman_ℓ ( italic_y start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT , italic_p start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_x start_POSTSUPERSCRIPT ( italic_i ) end_POSTSUPERSCRIPT ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
</div>
<div id="S5.p6" class="ltx_para">
<p id="S5.p6.1" class="ltx_p"><span id="S5.p6.1.1" class="ltx_text ltx_font_bold">kNN-MT</span> augments a translation model with a retrieval component <cite class="ltx_cite ltx_citemacro_cite">Khandelwal et al. (<a href="#bib.bib18" title="" class="ltx_ref">2021</a>)</cite>. Given each sentence <math id="S5.p6.1.m1.2" class="ltx_Math" alttext="(x,y)" display="inline"><semantics id="S5.p6.1.m1.2a"><mrow id="S5.p6.1.m1.2.3.2" xref="S5.p6.1.m1.2.3.1.cmml"><mo stretchy="false" id="S5.p6.1.m1.2.3.2.1" xref="S5.p6.1.m1.2.3.1.cmml">(</mo><mi id="S5.p6.1.m1.1.1" xref="S5.p6.1.m1.1.1.cmml">x</mi><mo id="S5.p6.1.m1.2.3.2.2" xref="S5.p6.1.m1.2.3.1.cmml">,</mo><mi id="S5.p6.1.m1.2.2" xref="S5.p6.1.m1.2.2.cmml">y</mi><mo stretchy="false" id="S5.p6.1.m1.2.3.2.3" xref="S5.p6.1.m1.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S5.p6.1.m1.2b"><interval closure="open" id="S5.p6.1.m1.2.3.1.cmml" xref="S5.p6.1.m1.2.3.2"><ci id="S5.p6.1.m1.1.1.cmml" xref="S5.p6.1.m1.1.1">𝑥</ci><ci id="S5.p6.1.m1.2.2.cmml" xref="S5.p6.1.m1.2.2">𝑦</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="S5.p6.1.m1.2c">(x,y)</annotation><annotation encoding="application/x-llamapun" id="S5.p6.1.m1.2d">( italic_x , italic_y )</annotation></semantics></math>, we construct a datastore with keys based on hidden representations constructed from the translation model, and values being the next word in the target sentence.</p>
</div>
<div id="S5.p7" class="ltx_para">
<p id="S5.p7.2" class="ltx_p">During generation, a probability distribution over next words can be computed based on the retrieved next words and the distance of their keys to the current context. A parameter <math id="S5.p7.1.m1.1" class="ltx_Math" alttext="\lambda" display="inline"><semantics id="S5.p7.1.m1.1a"><mi id="S5.p7.1.m1.1.1" xref="S5.p7.1.m1.1.1.cmml">λ</mi><annotation-xml encoding="MathML-Content" id="S5.p7.1.m1.1b"><ci id="S5.p7.1.m1.1.1.cmml" xref="S5.p7.1.m1.1.1">𝜆</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p7.1.m1.1c">\lambda</annotation><annotation encoding="application/x-llamapun" id="S5.p7.1.m1.1d">italic_λ</annotation></semantics></math> controls interpolation between the distribution over next words predicted by the base model, and the distribution predicted by the retrieved <math id="S5.p7.2.m2.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S5.p7.2.m2.1a"><mi id="S5.p7.2.m2.1.1" xref="S5.p7.2.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S5.p7.2.m2.1b"><ci id="S5.p7.2.m2.1.1.cmml" xref="S5.p7.2.m2.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.p7.2.m2.1c">k</annotation><annotation encoding="application/x-llamapun" id="S5.p7.2.m2.1d">italic_k</annotation></semantics></math> neighbours.<span id="footnote7" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">7</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">7</sup><span class="ltx_tag ltx_tag_note">7</span>We run a hyperparameter search using the validation set to find the best kNN-MT settings for each language. Further details are in <a href="#A3" title="Appendix C OpenSubtitles Training Details ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix C</span></a>.</span></span></span></p>
</div>
<div id="S5.p8" class="ltx_para">
<table id="A10.EGx1" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S5.Ex1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S5.Ex1.m1.4" class="ltx_Math" alttext="\displaystyle p(y^{(j)}_{i}|x^{(j)},\hat{y^{(j)}_{1:i-1}})" display="inline"><semantics id="S5.Ex1.m1.4a"><mrow id="S5.Ex1.m1.4.4" xref="S5.Ex1.m1.4.4.cmml"><mi id="S5.Ex1.m1.4.4.3" xref="S5.Ex1.m1.4.4.3.cmml">p</mi><mo id="S5.Ex1.m1.4.4.2" xref="S5.Ex1.m1.4.4.2.cmml">⁢</mo><mrow id="S5.Ex1.m1.4.4.1.1" xref="S5.Ex1.m1.4.4.1.1.1.cmml"><mo stretchy="false" id="S5.Ex1.m1.4.4.1.1.2" xref="S5.Ex1.m1.4.4.1.1.1.cmml">(</mo><mrow id="S5.Ex1.m1.4.4.1.1.1" xref="S5.Ex1.m1.4.4.1.1.1.cmml"><msubsup id="S5.Ex1.m1.4.4.1.1.1.3" xref="S5.Ex1.m1.4.4.1.1.1.3.cmml"><mi id="S5.Ex1.m1.4.4.1.1.1.3.2.2" xref="S5.Ex1.m1.4.4.1.1.1.3.2.2.cmml">y</mi><mi id="S5.Ex1.m1.4.4.1.1.1.3.3" xref="S5.Ex1.m1.4.4.1.1.1.3.3.cmml">i</mi><mrow id="S5.Ex1.m1.1.1.1.3" xref="S5.Ex1.m1.4.4.1.1.1.3.cmml"><mo stretchy="false" id="S5.Ex1.m1.1.1.1.3.1" xref="S5.Ex1.m1.4.4.1.1.1.3.cmml">(</mo><mi id="S5.Ex1.m1.1.1.1.1" xref="S5.Ex1.m1.1.1.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex1.m1.1.1.1.3.2" xref="S5.Ex1.m1.4.4.1.1.1.3.cmml">)</mo></mrow></msubsup><mo fence="false" id="S5.Ex1.m1.4.4.1.1.1.2" xref="S5.Ex1.m1.4.4.1.1.1.2.cmml">|</mo><mrow id="S5.Ex1.m1.4.4.1.1.1.1.1" xref="S5.Ex1.m1.4.4.1.1.1.1.2.cmml"><msup id="S5.Ex1.m1.4.4.1.1.1.1.1.1" xref="S5.Ex1.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S5.Ex1.m1.4.4.1.1.1.1.1.1.2" xref="S5.Ex1.m1.4.4.1.1.1.1.1.1.2.cmml">x</mi><mrow id="S5.Ex1.m1.2.2.1.3" xref="S5.Ex1.m1.4.4.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.Ex1.m1.2.2.1.3.1" xref="S5.Ex1.m1.4.4.1.1.1.1.1.1.cmml">(</mo><mi id="S5.Ex1.m1.2.2.1.1" xref="S5.Ex1.m1.2.2.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex1.m1.2.2.1.3.2" xref="S5.Ex1.m1.4.4.1.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S5.Ex1.m1.4.4.1.1.1.1.1.2" xref="S5.Ex1.m1.4.4.1.1.1.1.2.cmml">,</mo><mover accent="true" id="S5.Ex1.m1.3.3" xref="S5.Ex1.m1.3.3.cmml"><msubsup id="S5.Ex1.m1.3.3.1" xref="S5.Ex1.m1.3.3.1.cmml"><mi id="S5.Ex1.m1.3.3.1.3.2" xref="S5.Ex1.m1.3.3.1.3.2.cmml">y</mi><mrow id="S5.Ex1.m1.3.3.1.4" xref="S5.Ex1.m1.3.3.1.4.cmml"><mn id="S5.Ex1.m1.3.3.1.4.2" xref="S5.Ex1.m1.3.3.1.4.2.cmml">1</mn><mo lspace="0.278em" rspace="0.278em" id="S5.Ex1.m1.3.3.1.4.1" xref="S5.Ex1.m1.3.3.1.4.1.cmml">:</mo><mrow id="S5.Ex1.m1.3.3.1.4.3" xref="S5.Ex1.m1.3.3.1.4.3.cmml"><mi id="S5.Ex1.m1.3.3.1.4.3.2" xref="S5.Ex1.m1.3.3.1.4.3.2.cmml">i</mi><mo id="S5.Ex1.m1.3.3.1.4.3.1" xref="S5.Ex1.m1.3.3.1.4.3.1.cmml">−</mo><mn id="S5.Ex1.m1.3.3.1.4.3.3" xref="S5.Ex1.m1.3.3.1.4.3.3.cmml">1</mn></mrow></mrow><mrow id="S5.Ex1.m1.3.3.1.1.1.3" xref="S5.Ex1.m1.3.3.1.cmml"><mo stretchy="false" id="S5.Ex1.m1.3.3.1.1.1.3.1" xref="S5.Ex1.m1.3.3.1.cmml">(</mo><mi id="S5.Ex1.m1.3.3.1.1.1.1" xref="S5.Ex1.m1.3.3.1.1.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex1.m1.3.3.1.1.1.3.2" xref="S5.Ex1.m1.3.3.1.cmml">)</mo></mrow></msubsup><mo id="S5.Ex1.m1.3.3.2" xref="S5.Ex1.m1.3.3.2.cmml">^</mo></mover></mrow></mrow><mo stretchy="false" id="S5.Ex1.m1.4.4.1.1.3" xref="S5.Ex1.m1.4.4.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.Ex1.m1.4b"><apply id="S5.Ex1.m1.4.4.cmml" xref="S5.Ex1.m1.4.4"><times id="S5.Ex1.m1.4.4.2.cmml" xref="S5.Ex1.m1.4.4.2"></times><ci id="S5.Ex1.m1.4.4.3.cmml" xref="S5.Ex1.m1.4.4.3">𝑝</ci><apply id="S5.Ex1.m1.4.4.1.1.1.cmml" xref="S5.Ex1.m1.4.4.1.1"><csymbol cd="latexml" id="S5.Ex1.m1.4.4.1.1.1.2.cmml" xref="S5.Ex1.m1.4.4.1.1.1.2">conditional</csymbol><apply id="S5.Ex1.m1.4.4.1.1.1.3.cmml" xref="S5.Ex1.m1.4.4.1.1.1.3"><csymbol cd="ambiguous" id="S5.Ex1.m1.4.4.1.1.1.3.1.cmml" xref="S5.Ex1.m1.4.4.1.1.1.3">subscript</csymbol><apply id="S5.Ex1.m1.4.4.1.1.1.3.2.cmml" xref="S5.Ex1.m1.4.4.1.1.1.3"><csymbol cd="ambiguous" id="S5.Ex1.m1.4.4.1.1.1.3.2.1.cmml" xref="S5.Ex1.m1.4.4.1.1.1.3">superscript</csymbol><ci id="S5.Ex1.m1.4.4.1.1.1.3.2.2.cmml" xref="S5.Ex1.m1.4.4.1.1.1.3.2.2">𝑦</ci><ci id="S5.Ex1.m1.1.1.1.1.cmml" xref="S5.Ex1.m1.1.1.1.1">𝑗</ci></apply><ci id="S5.Ex1.m1.4.4.1.1.1.3.3.cmml" xref="S5.Ex1.m1.4.4.1.1.1.3.3">𝑖</ci></apply><list id="S5.Ex1.m1.4.4.1.1.1.1.2.cmml" xref="S5.Ex1.m1.4.4.1.1.1.1.1"><apply id="S5.Ex1.m1.4.4.1.1.1.1.1.1.cmml" xref="S5.Ex1.m1.4.4.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.Ex1.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S5.Ex1.m1.4.4.1.1.1.1.1.1">superscript</csymbol><ci id="S5.Ex1.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S5.Ex1.m1.4.4.1.1.1.1.1.1.2">𝑥</ci><ci id="S5.Ex1.m1.2.2.1.1.cmml" xref="S5.Ex1.m1.2.2.1.1">𝑗</ci></apply><apply id="S5.Ex1.m1.3.3.cmml" xref="S5.Ex1.m1.3.3"><ci id="S5.Ex1.m1.3.3.2.cmml" xref="S5.Ex1.m1.3.3.2">^</ci><apply id="S5.Ex1.m1.3.3.1.cmml" xref="S5.Ex1.m1.3.3.1"><csymbol cd="ambiguous" id="S5.Ex1.m1.3.3.1.2.cmml" xref="S5.Ex1.m1.3.3.1">subscript</csymbol><apply id="S5.Ex1.m1.3.3.1.3.cmml" xref="S5.Ex1.m1.3.3.1"><csymbol cd="ambiguous" id="S5.Ex1.m1.3.3.1.3.1.cmml" xref="S5.Ex1.m1.3.3.1">superscript</csymbol><ci id="S5.Ex1.m1.3.3.1.3.2.cmml" xref="S5.Ex1.m1.3.3.1.3.2">𝑦</ci><ci id="S5.Ex1.m1.3.3.1.1.1.1.cmml" xref="S5.Ex1.m1.3.3.1.1.1.1">𝑗</ci></apply><apply id="S5.Ex1.m1.3.3.1.4.cmml" xref="S5.Ex1.m1.3.3.1.4"><ci id="S5.Ex1.m1.3.3.1.4.1.cmml" xref="S5.Ex1.m1.3.3.1.4.1">:</ci><cn type="integer" id="S5.Ex1.m1.3.3.1.4.2.cmml" xref="S5.Ex1.m1.3.3.1.4.2">1</cn><apply id="S5.Ex1.m1.3.3.1.4.3.cmml" xref="S5.Ex1.m1.3.3.1.4.3"><minus id="S5.Ex1.m1.3.3.1.4.3.1.cmml" xref="S5.Ex1.m1.3.3.1.4.3.1"></minus><ci id="S5.Ex1.m1.3.3.1.4.3.2.cmml" xref="S5.Ex1.m1.3.3.1.4.3.2">𝑖</ci><cn type="integer" id="S5.Ex1.m1.3.3.1.4.3.3.cmml" xref="S5.Ex1.m1.3.3.1.4.3.3">1</cn></apply></apply></apply></apply></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.Ex1.m1.4c">\displaystyle p(y^{(j)}_{i}|x^{(j)},\hat{y^{(j)}_{1:i-1}})</annotation><annotation encoding="application/x-llamapun" id="S5.Ex1.m1.4d">italic_p ( italic_y start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT | italic_x start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT , over^ start_ARG italic_y start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 : italic_i - 1 end_POSTSUBSCRIPT end_ARG )</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S5.Ex1.m2.4" class="ltx_Math" alttext="\displaystyle=\lambda p_{\text{kNN}}(y^{(j)}|x^{(j)},\hat{y^{(j)}_{1:i-1}})" display="inline"><semantics id="S5.Ex1.m2.4a"><mrow id="S5.Ex1.m2.4.4" xref="S5.Ex1.m2.4.4.cmml"><mi id="S5.Ex1.m2.4.4.3" xref="S5.Ex1.m2.4.4.3.cmml"></mi><mo id="S5.Ex1.m2.4.4.2" xref="S5.Ex1.m2.4.4.2.cmml">=</mo><mrow id="S5.Ex1.m2.4.4.1" xref="S5.Ex1.m2.4.4.1.cmml"><mi id="S5.Ex1.m2.4.4.1.3" xref="S5.Ex1.m2.4.4.1.3.cmml">λ</mi><mo id="S5.Ex1.m2.4.4.1.2" xref="S5.Ex1.m2.4.4.1.2.cmml">⁢</mo><msub id="S5.Ex1.m2.4.4.1.4" xref="S5.Ex1.m2.4.4.1.4.cmml"><mi id="S5.Ex1.m2.4.4.1.4.2" xref="S5.Ex1.m2.4.4.1.4.2.cmml">p</mi><mtext id="S5.Ex1.m2.4.4.1.4.3" xref="S5.Ex1.m2.4.4.1.4.3a.cmml">kNN</mtext></msub><mo id="S5.Ex1.m2.4.4.1.2a" xref="S5.Ex1.m2.4.4.1.2.cmml">⁢</mo><mrow id="S5.Ex1.m2.4.4.1.1.1" xref="S5.Ex1.m2.4.4.1.1.1.1.cmml"><mo stretchy="false" id="S5.Ex1.m2.4.4.1.1.1.2" xref="S5.Ex1.m2.4.4.1.1.1.1.cmml">(</mo><mrow id="S5.Ex1.m2.4.4.1.1.1.1" xref="S5.Ex1.m2.4.4.1.1.1.1.cmml"><msup id="S5.Ex1.m2.4.4.1.1.1.1.3" xref="S5.Ex1.m2.4.4.1.1.1.1.3.cmml"><mi id="S5.Ex1.m2.4.4.1.1.1.1.3.2" xref="S5.Ex1.m2.4.4.1.1.1.1.3.2.cmml">y</mi><mrow id="S5.Ex1.m2.1.1.1.3" xref="S5.Ex1.m2.4.4.1.1.1.1.3.cmml"><mo stretchy="false" id="S5.Ex1.m2.1.1.1.3.1" xref="S5.Ex1.m2.4.4.1.1.1.1.3.cmml">(</mo><mi id="S5.Ex1.m2.1.1.1.1" xref="S5.Ex1.m2.1.1.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex1.m2.1.1.1.3.2" xref="S5.Ex1.m2.4.4.1.1.1.1.3.cmml">)</mo></mrow></msup><mo fence="false" id="S5.Ex1.m2.4.4.1.1.1.1.2" xref="S5.Ex1.m2.4.4.1.1.1.1.2.cmml">|</mo><mrow id="S5.Ex1.m2.4.4.1.1.1.1.1.1" xref="S5.Ex1.m2.4.4.1.1.1.1.1.2.cmml"><msup id="S5.Ex1.m2.4.4.1.1.1.1.1.1.1" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.cmml"><mi id="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.2" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.2.cmml">x</mi><mrow id="S5.Ex1.m2.2.2.1.3" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.Ex1.m2.2.2.1.3.1" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.cmml">(</mo><mi id="S5.Ex1.m2.2.2.1.1" xref="S5.Ex1.m2.2.2.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex1.m2.2.2.1.3.2" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S5.Ex1.m2.4.4.1.1.1.1.1.1.2" xref="S5.Ex1.m2.4.4.1.1.1.1.1.2.cmml">,</mo><mover accent="true" id="S5.Ex1.m2.3.3" xref="S5.Ex1.m2.3.3.cmml"><msubsup id="S5.Ex1.m2.3.3.1" xref="S5.Ex1.m2.3.3.1.cmml"><mi id="S5.Ex1.m2.3.3.1.3.2" xref="S5.Ex1.m2.3.3.1.3.2.cmml">y</mi><mrow id="S5.Ex1.m2.3.3.1.4" xref="S5.Ex1.m2.3.3.1.4.cmml"><mn id="S5.Ex1.m2.3.3.1.4.2" xref="S5.Ex1.m2.3.3.1.4.2.cmml">1</mn><mo lspace="0.278em" rspace="0.278em" id="S5.Ex1.m2.3.3.1.4.1" xref="S5.Ex1.m2.3.3.1.4.1.cmml">:</mo><mrow id="S5.Ex1.m2.3.3.1.4.3" xref="S5.Ex1.m2.3.3.1.4.3.cmml"><mi id="S5.Ex1.m2.3.3.1.4.3.2" xref="S5.Ex1.m2.3.3.1.4.3.2.cmml">i</mi><mo id="S5.Ex1.m2.3.3.1.4.3.1" xref="S5.Ex1.m2.3.3.1.4.3.1.cmml">−</mo><mn id="S5.Ex1.m2.3.3.1.4.3.3" xref="S5.Ex1.m2.3.3.1.4.3.3.cmml">1</mn></mrow></mrow><mrow id="S5.Ex1.m2.3.3.1.1.1.3" xref="S5.Ex1.m2.3.3.1.cmml"><mo stretchy="false" id="S5.Ex1.m2.3.3.1.1.1.3.1" xref="S5.Ex1.m2.3.3.1.cmml">(</mo><mi id="S5.Ex1.m2.3.3.1.1.1.1" xref="S5.Ex1.m2.3.3.1.1.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex1.m2.3.3.1.1.1.3.2" xref="S5.Ex1.m2.3.3.1.cmml">)</mo></mrow></msubsup><mo id="S5.Ex1.m2.3.3.2" xref="S5.Ex1.m2.3.3.2.cmml">^</mo></mover></mrow></mrow><mo stretchy="false" id="S5.Ex1.m2.4.4.1.1.1.3" xref="S5.Ex1.m2.4.4.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.Ex1.m2.4b"><apply id="S5.Ex1.m2.4.4.cmml" xref="S5.Ex1.m2.4.4"><eq id="S5.Ex1.m2.4.4.2.cmml" xref="S5.Ex1.m2.4.4.2"></eq><csymbol cd="latexml" id="S5.Ex1.m2.4.4.3.cmml" xref="S5.Ex1.m2.4.4.3">absent</csymbol><apply id="S5.Ex1.m2.4.4.1.cmml" xref="S5.Ex1.m2.4.4.1"><times id="S5.Ex1.m2.4.4.1.2.cmml" xref="S5.Ex1.m2.4.4.1.2"></times><ci id="S5.Ex1.m2.4.4.1.3.cmml" xref="S5.Ex1.m2.4.4.1.3">𝜆</ci><apply id="S5.Ex1.m2.4.4.1.4.cmml" xref="S5.Ex1.m2.4.4.1.4"><csymbol cd="ambiguous" id="S5.Ex1.m2.4.4.1.4.1.cmml" xref="S5.Ex1.m2.4.4.1.4">subscript</csymbol><ci id="S5.Ex1.m2.4.4.1.4.2.cmml" xref="S5.Ex1.m2.4.4.1.4.2">𝑝</ci><ci id="S5.Ex1.m2.4.4.1.4.3a.cmml" xref="S5.Ex1.m2.4.4.1.4.3"><mtext mathsize="70%" id="S5.Ex1.m2.4.4.1.4.3.cmml" xref="S5.Ex1.m2.4.4.1.4.3">kNN</mtext></ci></apply><apply id="S5.Ex1.m2.4.4.1.1.1.1.cmml" xref="S5.Ex1.m2.4.4.1.1.1"><csymbol cd="latexml" id="S5.Ex1.m2.4.4.1.1.1.1.2.cmml" xref="S5.Ex1.m2.4.4.1.1.1.1.2">conditional</csymbol><apply id="S5.Ex1.m2.4.4.1.1.1.1.3.cmml" xref="S5.Ex1.m2.4.4.1.1.1.1.3"><csymbol cd="ambiguous" id="S5.Ex1.m2.4.4.1.1.1.1.3.1.cmml" xref="S5.Ex1.m2.4.4.1.1.1.1.3">superscript</csymbol><ci id="S5.Ex1.m2.4.4.1.1.1.1.3.2.cmml" xref="S5.Ex1.m2.4.4.1.1.1.1.3.2">𝑦</ci><ci id="S5.Ex1.m2.1.1.1.1.cmml" xref="S5.Ex1.m2.1.1.1.1">𝑗</ci></apply><list id="S5.Ex1.m2.4.4.1.1.1.1.1.2.cmml" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1"><apply id="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.cmml" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.1.cmml" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1.1">superscript</csymbol><ci id="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.2.cmml" xref="S5.Ex1.m2.4.4.1.1.1.1.1.1.1.2">𝑥</ci><ci id="S5.Ex1.m2.2.2.1.1.cmml" xref="S5.Ex1.m2.2.2.1.1">𝑗</ci></apply><apply id="S5.Ex1.m2.3.3.cmml" xref="S5.Ex1.m2.3.3"><ci id="S5.Ex1.m2.3.3.2.cmml" xref="S5.Ex1.m2.3.3.2">^</ci><apply id="S5.Ex1.m2.3.3.1.cmml" xref="S5.Ex1.m2.3.3.1"><csymbol cd="ambiguous" id="S5.Ex1.m2.3.3.1.2.cmml" xref="S5.Ex1.m2.3.3.1">subscript</csymbol><apply id="S5.Ex1.m2.3.3.1.3.cmml" xref="S5.Ex1.m2.3.3.1"><csymbol cd="ambiguous" id="S5.Ex1.m2.3.3.1.3.1.cmml" xref="S5.Ex1.m2.3.3.1">superscript</csymbol><ci id="S5.Ex1.m2.3.3.1.3.2.cmml" xref="S5.Ex1.m2.3.3.1.3.2">𝑦</ci><ci id="S5.Ex1.m2.3.3.1.1.1.1.cmml" xref="S5.Ex1.m2.3.3.1.1.1.1">𝑗</ci></apply><apply id="S5.Ex1.m2.3.3.1.4.cmml" xref="S5.Ex1.m2.3.3.1.4"><ci id="S5.Ex1.m2.3.3.1.4.1.cmml" xref="S5.Ex1.m2.3.3.1.4.1">:</ci><cn type="integer" id="S5.Ex1.m2.3.3.1.4.2.cmml" xref="S5.Ex1.m2.3.3.1.4.2">1</cn><apply id="S5.Ex1.m2.3.3.1.4.3.cmml" xref="S5.Ex1.m2.3.3.1.4.3"><minus id="S5.Ex1.m2.3.3.1.4.3.1.cmml" xref="S5.Ex1.m2.3.3.1.4.3.1"></minus><ci id="S5.Ex1.m2.3.3.1.4.3.2.cmml" xref="S5.Ex1.m2.3.3.1.4.3.2">𝑖</ci><cn type="integer" id="S5.Ex1.m2.3.3.1.4.3.3.cmml" xref="S5.Ex1.m2.3.3.1.4.3.3">1</cn></apply></apply></apply></apply></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.Ex1.m2.4c">\displaystyle=\lambda p_{\text{kNN}}(y^{(j)}|x^{(j)},\hat{y^{(j)}_{1:i-1}})</annotation><annotation encoding="application/x-llamapun" id="S5.Ex1.m2.4d">= italic_λ italic_p start_POSTSUBSCRIPT kNN end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT | italic_x start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT , over^ start_ARG italic_y start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 : italic_i - 1 end_POSTSUBSCRIPT end_ARG )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S5.Ex2"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S5.Ex2.m1.5" class="ltx_Math" alttext="\displaystyle+(1-\lambda)p_{\theta}(y^{(j)}_{i}|x^{(j)},\hat{y}^{(j)}_{1:i-1})" display="inline"><semantics id="S5.Ex2.m1.5a"><mrow id="S5.Ex2.m1.5.5" xref="S5.Ex2.m1.5.5.cmml"><mo id="S5.Ex2.m1.5.5a" xref="S5.Ex2.m1.5.5.cmml">+</mo><mrow id="S5.Ex2.m1.5.5.2" xref="S5.Ex2.m1.5.5.2.cmml"><mrow id="S5.Ex2.m1.4.4.1.1.1" xref="S5.Ex2.m1.4.4.1.1.1.1.cmml"><mo stretchy="false" id="S5.Ex2.m1.4.4.1.1.1.2" xref="S5.Ex2.m1.4.4.1.1.1.1.cmml">(</mo><mrow id="S5.Ex2.m1.4.4.1.1.1.1" xref="S5.Ex2.m1.4.4.1.1.1.1.cmml"><mn id="S5.Ex2.m1.4.4.1.1.1.1.2" xref="S5.Ex2.m1.4.4.1.1.1.1.2.cmml">1</mn><mo id="S5.Ex2.m1.4.4.1.1.1.1.1" xref="S5.Ex2.m1.4.4.1.1.1.1.1.cmml">−</mo><mi id="S5.Ex2.m1.4.4.1.1.1.1.3" xref="S5.Ex2.m1.4.4.1.1.1.1.3.cmml">λ</mi></mrow><mo stretchy="false" id="S5.Ex2.m1.4.4.1.1.1.3" xref="S5.Ex2.m1.4.4.1.1.1.1.cmml">)</mo></mrow><mo id="S5.Ex2.m1.5.5.2.3" xref="S5.Ex2.m1.5.5.2.3.cmml">⁢</mo><msub id="S5.Ex2.m1.5.5.2.4" xref="S5.Ex2.m1.5.5.2.4.cmml"><mi id="S5.Ex2.m1.5.5.2.4.2" xref="S5.Ex2.m1.5.5.2.4.2.cmml">p</mi><mi id="S5.Ex2.m1.5.5.2.4.3" xref="S5.Ex2.m1.5.5.2.4.3.cmml">θ</mi></msub><mo id="S5.Ex2.m1.5.5.2.3a" xref="S5.Ex2.m1.5.5.2.3.cmml">⁢</mo><mrow id="S5.Ex2.m1.5.5.2.2.1" xref="S5.Ex2.m1.5.5.2.2.1.1.cmml"><mo stretchy="false" id="S5.Ex2.m1.5.5.2.2.1.2" xref="S5.Ex2.m1.5.5.2.2.1.1.cmml">(</mo><mrow id="S5.Ex2.m1.5.5.2.2.1.1" xref="S5.Ex2.m1.5.5.2.2.1.1.cmml"><msubsup id="S5.Ex2.m1.5.5.2.2.1.1.4" xref="S5.Ex2.m1.5.5.2.2.1.1.4.cmml"><mi id="S5.Ex2.m1.5.5.2.2.1.1.4.2.2" xref="S5.Ex2.m1.5.5.2.2.1.1.4.2.2.cmml">y</mi><mi id="S5.Ex2.m1.5.5.2.2.1.1.4.3" xref="S5.Ex2.m1.5.5.2.2.1.1.4.3.cmml">i</mi><mrow id="S5.Ex2.m1.1.1.1.3" xref="S5.Ex2.m1.5.5.2.2.1.1.4.cmml"><mo stretchy="false" id="S5.Ex2.m1.1.1.1.3.1" xref="S5.Ex2.m1.5.5.2.2.1.1.4.cmml">(</mo><mi id="S5.Ex2.m1.1.1.1.1" xref="S5.Ex2.m1.1.1.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex2.m1.1.1.1.3.2" xref="S5.Ex2.m1.5.5.2.2.1.1.4.cmml">)</mo></mrow></msubsup><mo fence="false" id="S5.Ex2.m1.5.5.2.2.1.1.3" xref="S5.Ex2.m1.5.5.2.2.1.1.3.cmml">|</mo><mrow id="S5.Ex2.m1.5.5.2.2.1.1.2.2" xref="S5.Ex2.m1.5.5.2.2.1.1.2.3.cmml"><msup id="S5.Ex2.m1.5.5.2.2.1.1.1.1.1" xref="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.cmml"><mi id="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.2" xref="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.2.cmml">x</mi><mrow id="S5.Ex2.m1.2.2.1.3" xref="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.cmml"><mo stretchy="false" id="S5.Ex2.m1.2.2.1.3.1" xref="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.cmml">(</mo><mi id="S5.Ex2.m1.2.2.1.1" xref="S5.Ex2.m1.2.2.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex2.m1.2.2.1.3.2" xref="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S5.Ex2.m1.5.5.2.2.1.1.2.2.3" xref="S5.Ex2.m1.5.5.2.2.1.1.2.3.cmml">,</mo><msubsup id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.cmml"><mover accent="true" id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.cmml"><mi id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.2" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.2.cmml">y</mi><mo id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.1" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.1.cmml">^</mo></mover><mrow id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.cmml"><mn id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.2" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.2.cmml">1</mn><mo lspace="0.278em" rspace="0.278em" id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.1" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.1.cmml">:</mo><mrow id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.cmml"><mi id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.2" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.2.cmml">i</mi><mo id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.1" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.1.cmml">−</mo><mn id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.3" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.3.cmml">1</mn></mrow></mrow><mrow id="S5.Ex2.m1.3.3.1.3" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.cmml"><mo stretchy="false" id="S5.Ex2.m1.3.3.1.3.1" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.cmml">(</mo><mi id="S5.Ex2.m1.3.3.1.1" xref="S5.Ex2.m1.3.3.1.1.cmml">j</mi><mo stretchy="false" id="S5.Ex2.m1.3.3.1.3.2" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.cmml">)</mo></mrow></msubsup></mrow></mrow><mo stretchy="false" id="S5.Ex2.m1.5.5.2.2.1.3" xref="S5.Ex2.m1.5.5.2.2.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.Ex2.m1.5b"><apply id="S5.Ex2.m1.5.5.cmml" xref="S5.Ex2.m1.5.5"><plus id="S5.Ex2.m1.5.5.3.cmml" xref="S5.Ex2.m1.5.5"></plus><apply id="S5.Ex2.m1.5.5.2.cmml" xref="S5.Ex2.m1.5.5.2"><times id="S5.Ex2.m1.5.5.2.3.cmml" xref="S5.Ex2.m1.5.5.2.3"></times><apply id="S5.Ex2.m1.4.4.1.1.1.1.cmml" xref="S5.Ex2.m1.4.4.1.1.1"><minus id="S5.Ex2.m1.4.4.1.1.1.1.1.cmml" xref="S5.Ex2.m1.4.4.1.1.1.1.1"></minus><cn type="integer" id="S5.Ex2.m1.4.4.1.1.1.1.2.cmml" xref="S5.Ex2.m1.4.4.1.1.1.1.2">1</cn><ci id="S5.Ex2.m1.4.4.1.1.1.1.3.cmml" xref="S5.Ex2.m1.4.4.1.1.1.1.3">𝜆</ci></apply><apply id="S5.Ex2.m1.5.5.2.4.cmml" xref="S5.Ex2.m1.5.5.2.4"><csymbol cd="ambiguous" id="S5.Ex2.m1.5.5.2.4.1.cmml" xref="S5.Ex2.m1.5.5.2.4">subscript</csymbol><ci id="S5.Ex2.m1.5.5.2.4.2.cmml" xref="S5.Ex2.m1.5.5.2.4.2">𝑝</ci><ci id="S5.Ex2.m1.5.5.2.4.3.cmml" xref="S5.Ex2.m1.5.5.2.4.3">𝜃</ci></apply><apply id="S5.Ex2.m1.5.5.2.2.1.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1"><csymbol cd="latexml" id="S5.Ex2.m1.5.5.2.2.1.1.3.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.3">conditional</csymbol><apply id="S5.Ex2.m1.5.5.2.2.1.1.4.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.4"><csymbol cd="ambiguous" id="S5.Ex2.m1.5.5.2.2.1.1.4.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.4">subscript</csymbol><apply id="S5.Ex2.m1.5.5.2.2.1.1.4.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.4"><csymbol cd="ambiguous" id="S5.Ex2.m1.5.5.2.2.1.1.4.2.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.4">superscript</csymbol><ci id="S5.Ex2.m1.5.5.2.2.1.1.4.2.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.4.2.2">𝑦</ci><ci id="S5.Ex2.m1.1.1.1.1.cmml" xref="S5.Ex2.m1.1.1.1.1">𝑗</ci></apply><ci id="S5.Ex2.m1.5.5.2.2.1.1.4.3.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.4.3">𝑖</ci></apply><list id="S5.Ex2.m1.5.5.2.2.1.1.2.3.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2"><apply id="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.1.1.1">superscript</csymbol><ci id="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.1.1.1.2">𝑥</ci><ci id="S5.Ex2.m1.2.2.1.1.cmml" xref="S5.Ex2.m1.2.2.1.1">𝑗</ci></apply><apply id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2"><csymbol cd="ambiguous" id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2">subscript</csymbol><apply id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2"><csymbol cd="ambiguous" id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2">superscript</csymbol><apply id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2"><ci id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.1">^</ci><ci id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.2.2.2">𝑦</ci></apply><ci id="S5.Ex2.m1.3.3.1.1.cmml" xref="S5.Ex2.m1.3.3.1.1">𝑗</ci></apply><apply id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3"><ci id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.1">:</ci><cn type="integer" id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.2">1</cn><apply id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3"><minus id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.1.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.1"></minus><ci id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.2.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.2">𝑖</ci><cn type="integer" id="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.3.cmml" xref="S5.Ex2.m1.5.5.2.2.1.1.2.2.2.3.3.3">1</cn></apply></apply></apply></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.Ex2.m1.5c">\displaystyle+(1-\lambda)p_{\theta}(y^{(j)}_{i}|x^{(j)},\hat{y}^{(j)}_{1:i-1})</annotation><annotation encoding="application/x-llamapun" id="S5.Ex2.m1.5d">+ ( 1 - italic_λ ) italic_p start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT | italic_x start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT , over^ start_ARG italic_y end_ARG start_POSTSUPERSCRIPT ( italic_j ) end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 : italic_i - 1 end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
</div>
<div id="S5.p9" class="ltx_para">
<p id="S5.p9.1" class="ltx_p">We also combine loss weighting with kNN-MT, where a model is trained with sentence upweighting and interpolated with a datastore based on representations from the upweight-trained model.</p>
</div>
<div id="S5.p10" class="ltx_para">
<p id="S5.p10.1" class="ltx_p">Intuitively, these methods make sense to use for idiom translation – we have previously seen that one problem with non-compositional phrases may simply be their rarity. Upweighting training examples that contain idioms may help with under-representation. Furthermore, retrieving similar examples may find occurrences of the same idiom which were translated correctly.</p>
</div>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Experimental Settings</h2>

<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.1 </span>Experimental Settings</h3>

<div id="S6.SS1.p1" class="ltx_para">
<p id="S6.SS1.p1.2" class="ltx_p">We run experiments on <math id="S6.SS1.p1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S6.SS1.p1.1.m1.1a"><mi mathvariant="normal" id="S6.SS1.p1.1.m1.1.1" xref="S6.SS1.p1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S6.SS1.p1.1.m1.1b"><ci id="S6.SS1.p1.1.m1.1.1.cmml" xref="S6.SS1.p1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p1.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S6.SS1.p1.1.m1.1d">roman_Δ</annotation></semantics></math>LM-base, a transformer encoder-decoder model with 360M parameters, a larger version of which ranked first in the WMT21 multilingual translation task <cite class="ltx_cite ltx_citemacro_cite">Ma et al. (<a href="#bib.bib25" title="" class="ltx_ref">2021</a>); on Machine Translation (<a href="#bib.bib29" title="" class="ltx_ref">WMT21</a>)</cite>. We train one <math id="S6.SS1.p1.2.m2.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S6.SS1.p1.2.m2.1a"><mi mathvariant="normal" id="S6.SS1.p1.2.m2.1.1" xref="S6.SS1.p1.2.m2.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S6.SS1.p1.2.m2.1b"><ci id="S6.SS1.p1.2.m2.1.1.cmml" xref="S6.SS1.p1.2.m2.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p1.2.m2.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S6.SS1.p1.2.m2.1d">roman_Δ</annotation></semantics></math>LM model for each language pair. Each model was trained for 2 million steps, and the checkpoint with the best loss on the validation set was kept. Further details are in <a href="#A3" title="Appendix C OpenSubtitles Training Details ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix C</span></a>. To decode, we used beam search with a beam size of 5.</p>
</div>
</section>
<section id="S6.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.2 </span>Data</h3>

<div id="S6.SS2.p1" class="ltx_para">
<p id="S6.SS2.p1.1" class="ltx_p">Models were trained on OpenSubtitles for each language pair. Data from test sets were removed, and 10% of the remaining data was used as a validation set. There were 33.8M sentences in the <span id="S6.SS2.p1.1.1" class="ltx_text ltx_font_typewriter">fr-en</span> train set, 22.0M in <span id="S6.SS2.p1.1.2" class="ltx_text ltx_font_typewriter">fi-en</span>, and 1.6M in <span id="S6.SS2.p1.1.3" class="ltx_text ltx_font_typewriter">ja-en</span>.</p>
</div>
</section>
<section id="S6.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.3 </span>Evaluation</h3>

<figure id="S6.F3" class="ltx_figure"><img src="x3.png" id="S6.F3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="789" height="528" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Results of automatic metrics. In most cases, combining loss weighting with KNN-MT improves automatic metrics the most on all three test sets, including the out-of-distribution (Random) test set. </figcaption>
</figure>
<div id="S6.SS3.p1" class="ltx_para">
<p id="S6.SS3.p1.1" class="ltx_p">We use multiple automatic metrics to evaluate translation quality. However, due to the importance of accurate semantic evaluation, the authors (native English speakers and fluent in French and Japanese) conduct a human evaluation inspired by MQM <cite class="ltx_cite ltx_citemacro_cite">Lommel et al. (<a href="#bib.bib24" title="" class="ltx_ref">2014</a>)</cite>. Only errors that would fall under the“terminology” and “accuracy” error types are considered, as we are focused on severe semantic errors. We give a score of 0 for severe errors and a score of 0.5 for major errors. A score of 1 is given otherwise. Exact evaluation standards are in <a href="#A5" title="Appendix E Standards for Human Evaluation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix E</span></a>.</p>
</div>
</section>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Results</h2>

<section id="S7.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.1 </span>Automatic and Human Evaluation</h3>

<div id="S7.SS1.p1" class="ltx_para">
<p id="S7.SS1.p1.1" class="ltx_p">In most cases, as reported in <a href="#S6.F3" title="Figure 3 ‣ 6.3 Evaluation ‣ 6 Experimental Settings ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 3</span></a>, using a combination of sentence upweighting and kNN-MT led to the greatest increase in automatic metrics on all three test sets, of up to 3.08 BLEU points on the idiomatic test set (<span id="S7.SS1.p1.1.1" class="ltx_text ltx_font_typewriter">fr</span>), 2.69 BLEU points on the literal test set (<span id="S7.SS1.p1.1.2" class="ltx_text ltx_font_typewriter">fi</span>), and 5.75 points on the random test set (<span id="S7.SS1.p1.1.3" class="ltx_text ltx_font_typewriter">fr</span>). In all cases except <span id="S7.SS1.p1.1.4" class="ltx_text ltx_font_typewriter">ja-rand</span>, using one or more of these methods improved over the baseline. Exact numerical results are in <a href="#A10" title="Appendix J Automatic Metrics in Detail ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix J</span></a>.</p>
</div>
<div id="S7.SS1.p2" class="ltx_para">
<p id="S7.SS1.p2.1" class="ltx_p">We evaluate the statistical significance of the results through a one-tailed permutation test <cite class="ltx_cite ltx_citemacro_cite">Graham et al. (<a href="#bib.bib12" title="" class="ltx_ref">2014</a>)</cite>. Further details are in <a href="#A6" title="Appendix F Statistical Significance Testing ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix F</span></a>. Exact results are in <a href="#A7" title="Appendix G Statistical Significance Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix G</span></a>. For Finnish, significance is achieved for all three test sets, and for French, significance is achieved for the idiomatic and random test sets. For Japanese, values achieved are not significant, but are borderline.</p>
</div>
<div id="S7.SS1.p3" class="ltx_para">
<p id="S7.SS1.p3.1" class="ltx_p">As our focus is on mitigating semantic errors, we mostly focus on the results of human evaluation, which are summarized in <a href="#S7.T4" title="Table 4 ‣ 7.1 Automatic and Human Evaluation ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 4</span></a>. Here, we also find that using both sentence upweighting and kNN is the best condition in most cases, increasing accuracy by roughly 13% in French and Finnish, and 4.5% in Japanese for idiomatic sentences. Encouragingly, this does not overly harm translation of literal sentences, as accuracy on the literal set either increases slightly (by roughly 4% in French and Finnish), or decreases very slightly (by roughly 0.4% in Japanese). For the random set, the combination of sentence upweighting and kNN-MT by around 7% accuracy. However, in Japanese, performance on the random test set decreases by 4%. In all cases except <span id="S7.SS1.p3.1.1" class="ltx_text ltx_font_typewriter">ja-rand</span>, one or more of these methods improves over the baseline.</p>
</div>
<div id="S7.SS1.p4" class="ltx_para">
<p id="S7.SS1.p4.1" class="ltx_p">We note that the Japanese model was trained on roughly 1/10th of the data of the French and Finnish models, so its translations are not as high-quality. This also leads to the construction of a much smaller datastore, which may lead to weaker performance on the random set.</p>
</div>
<figure id="S7.T4" class="ltx_table">
<div id="S7.T4.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:433.6pt;height:364.9pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(109.9pt,-92.4pt) scale(2.02704633442172,2.02704633442172) ;">
<table id="S7.T4.1.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S7.T4.1.1.1.1" class="ltx_tr">
<th id="S7.T4.1.1.1.1.1" class="ltx_td ltx_th ltx_th_row ltx_border_tt"></th>
<th id="S7.T4.1.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">base</th>
<th id="S7.T4.1.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">knn</th>
<th id="S7.T4.1.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">upweight</th>
<th id="S7.T4.1.1.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">upweight + knn</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S7.T4.1.1.2.1" class="ltx_tr">
<th id="S7.T4.1.1.2.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T4.1.1.2.1.1.1" class="ltx_text ltx_font_typewriter">fr-idioms</span></th>
<td id="S7.T4.1.1.2.1.2" class="ltx_td ltx_align_center ltx_border_t">0.6177</td>
<td id="S7.T4.1.1.2.1.3" class="ltx_td ltx_align_center ltx_border_t">0.6659</td>
<td id="S7.T4.1.1.2.1.4" class="ltx_td ltx_align_center ltx_border_t">0.7010</td>
<td id="S7.T4.1.1.2.1.5" class="ltx_td ltx_align_center ltx_border_t"><span id="S7.T4.1.1.2.1.5.1" class="ltx_text ltx_font_bold">0.7463</span></td>
</tr>
<tr id="S7.T4.1.1.3.2" class="ltx_tr">
<th id="S7.T4.1.1.3.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row"><span id="S7.T4.1.1.3.2.1.1" class="ltx_text ltx_font_typewriter">fr-literal</span></th>
<td id="S7.T4.1.1.3.2.2" class="ltx_td ltx_align_center">0.7039</td>
<td id="S7.T4.1.1.3.2.3" class="ltx_td ltx_align_center">0.7303</td>
<td id="S7.T4.1.1.3.2.4" class="ltx_td ltx_align_center">0.7105</td>
<td id="S7.T4.1.1.3.2.5" class="ltx_td ltx_align_center"><span id="S7.T4.1.1.3.2.5.1" class="ltx_text ltx_font_bold">0.7434</span></td>
</tr>
<tr id="S7.T4.1.1.4.3" class="ltx_tr">
<th id="S7.T4.1.1.4.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row"><span id="S7.T4.1.1.4.3.1.1" class="ltx_text ltx_font_typewriter">fr-rand-out</span></th>
<td id="S7.T4.1.1.4.3.2" class="ltx_td ltx_align_center">0.7526</td>
<td id="S7.T4.1.1.4.3.3" class="ltx_td ltx_align_center"><span id="S7.T4.1.1.4.3.3.1" class="ltx_text ltx_font_bold">0.8398</span></td>
<td id="S7.T4.1.1.4.3.4" class="ltx_td ltx_align_center">0.7477</td>
<td id="S7.T4.1.1.4.3.5" class="ltx_td ltx_align_center">0.8232</td>
</tr>
<tr id="S7.T4.1.1.5.4" class="ltx_tr">
<th id="S7.T4.1.1.5.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T4.1.1.5.4.1.1" class="ltx_text ltx_font_typewriter">fi-idioms</span></th>
<td id="S7.T4.1.1.5.4.2" class="ltx_td ltx_align_center ltx_border_t">0.4803</td>
<td id="S7.T4.1.1.5.4.3" class="ltx_td ltx_align_center ltx_border_t">0.5562</td>
<td id="S7.T4.1.1.5.4.4" class="ltx_td ltx_align_center ltx_border_t">0.5604</td>
<td id="S7.T4.1.1.5.4.5" class="ltx_td ltx_align_center ltx_border_t"><span id="S7.T4.1.1.5.4.5.1" class="ltx_text ltx_font_bold">0.6194</span></td>
</tr>
<tr id="S7.T4.1.1.6.5" class="ltx_tr">
<th id="S7.T4.1.1.6.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row"><span id="S7.T4.1.1.6.5.1.1" class="ltx_text ltx_font_typewriter">fi-literal</span></th>
<td id="S7.T4.1.1.6.5.2" class="ltx_td ltx_align_center">0.7692</td>
<td id="S7.T4.1.1.6.5.3" class="ltx_td ltx_align_center"><span id="S7.T4.1.1.6.5.3.1" class="ltx_text ltx_font_bold">0.8462</span></td>
<td id="S7.T4.1.1.6.5.4" class="ltx_td ltx_align_center">0.8205</td>
<td id="S7.T4.1.1.6.5.5" class="ltx_td ltx_align_center">0.8141</td>
</tr>
<tr id="S7.T4.1.1.7.6" class="ltx_tr">
<th id="S7.T4.1.1.7.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row"><span id="S7.T4.1.1.7.6.1.1" class="ltx_text ltx_font_typewriter">fi-rand-out</span></th>
<td id="S7.T4.1.1.7.6.2" class="ltx_td ltx_align_center">0.7647</td>
<td id="S7.T4.1.1.7.6.3" class="ltx_td ltx_align_center">0.8235</td>
<td id="S7.T4.1.1.7.6.4" class="ltx_td ltx_align_center">0.7771</td>
<td id="S7.T4.1.1.7.6.5" class="ltx_td ltx_align_center"><span id="S7.T4.1.1.7.6.5.1" class="ltx_text ltx_font_bold">0.828</span></td>
</tr>
<tr id="S7.T4.1.1.8.7" class="ltx_tr">
<th id="S7.T4.1.1.8.7.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T4.1.1.8.7.1.1" class="ltx_text ltx_font_typewriter">ja-idioms</span></th>
<td id="S7.T4.1.1.8.7.2" class="ltx_td ltx_align_center ltx_border_t">0.4152</td>
<td id="S7.T4.1.1.8.7.3" class="ltx_td ltx_align_center ltx_border_t">0.4286</td>
<td id="S7.T4.1.1.8.7.4" class="ltx_td ltx_align_center ltx_border_t"><span id="S7.T4.1.1.8.7.4.1" class="ltx_text ltx_font_bold">0.4643</span></td>
<td id="S7.T4.1.1.8.7.5" class="ltx_td ltx_align_center ltx_border_t">0.4598</td>
</tr>
<tr id="S7.T4.1.1.9.8" class="ltx_tr">
<th id="S7.T4.1.1.9.8.1" class="ltx_td ltx_align_left ltx_th ltx_th_row"><span id="S7.T4.1.1.9.8.1.1" class="ltx_text ltx_font_typewriter">ja-literal</span></th>
<td id="S7.T4.1.1.9.8.2" class="ltx_td ltx_align_center">0.6475</td>
<td id="S7.T4.1.1.9.8.3" class="ltx_td ltx_align_center">0.6516</td>
<td id="S7.T4.1.1.9.8.4" class="ltx_td ltx_align_center"><span id="S7.T4.1.1.9.8.4.1" class="ltx_text ltx_font_bold">0.6557</span></td>
<td id="S7.T4.1.1.9.8.5" class="ltx_td ltx_align_center">0.6434</td>
</tr>
<tr id="S7.T4.1.1.10.9" class="ltx_tr">
<th id="S7.T4.1.1.10.9.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb"><span id="S7.T4.1.1.10.9.1.1" class="ltx_text ltx_font_typewriter">ja-rand-out</span></th>
<td id="S7.T4.1.1.10.9.2" class="ltx_td ltx_align_center ltx_border_bb"><span id="S7.T4.1.1.10.9.2.1" class="ltx_text ltx_font_bold">0.6207</span></td>
<td id="S7.T4.1.1.10.9.3" class="ltx_td ltx_align_center ltx_border_bb">0.5560</td>
<td id="S7.T4.1.1.10.9.4" class="ltx_td ltx_align_center ltx_border_bb">0.5776</td>
<td id="S7.T4.1.1.10.9.5" class="ltx_td ltx_align_center ltx_border_bb">0.5862</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Human-judged accuracy on sentence-level semantics.</figcaption>
</figure>
</section>
<section id="S7.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">7.2 </span>Error analysis</h3>

<div id="S7.SS2.p1" class="ltx_para">
<p id="S7.SS2.p1.2" class="ltx_p">We repeat the frequency analysis performed on commercial systems (<math id="S7.SS2.p1.1.m1.1" class="ltx_Math" alttext="\lx@sectionsign\ref{sec:commercial-evals}" display="inline"><semantics id="S7.SS2.p1.1.m1.1a"><mrow id="S7.SS2.p1.1.m1.1.1" xref="S7.SS2.p1.1.m1.1.1.cmml"><mi mathvariant="normal" id="S7.SS2.p1.1.m1.1.1.2" xref="S7.SS2.p1.1.m1.1.1.2.cmml">§</mi><mo id="S7.SS2.p1.1.m1.1.1.1" xref="S7.SS2.p1.1.m1.1.1.1.cmml">⁢</mo><mtext mathvariant="italic" id="S7.SS2.p1.1.m1.1.1.3" xref="S7.SS2.p1.1.m1.1.1.3c.cmml"><a href="#S4.SS2" title="4.2 Evaluation of Commercial Systems ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">4.2</span></a></mtext></mrow><annotation-xml encoding="MathML-Content" id="S7.SS2.p1.1.m1.1b"><apply id="S7.SS2.p1.1.m1.1.1.cmml" xref="S7.SS2.p1.1.m1.1.1"><times id="S7.SS2.p1.1.m1.1.1.1.cmml" xref="S7.SS2.p1.1.m1.1.1.1"></times><ci id="S7.SS2.p1.1.m1.1.1.2.cmml" xref="S7.SS2.p1.1.m1.1.1.2">§</ci><ci id="S7.SS2.p1.1.m1.1.1.3c.cmml" xref="S7.SS2.p1.1.m1.1.1.3"><mtext mathvariant="italic" id="S7.SS2.p1.1.m1.1.1.3.cmml" xref="S7.SS2.p1.1.m1.1.1.3"><a href="#S4.SS2" title="4.2 Evaluation of Commercial Systems ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_font_italic"><span class="ltx_text ltx_ref_tag">4.2</span></a></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.SS2.p1.1.m1.1c">\lx@sectionsign\ref{sec:commercial-evals}</annotation><annotation encoding="application/x-llamapun" id="S7.SS2.p1.1.m1.1d">§</annotation></semantics></math>) for <math id="S7.SS2.p1.2.m2.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S7.SS2.p1.2.m2.1a"><mi mathvariant="normal" id="S7.SS2.p1.2.m2.1.1" xref="S7.SS2.p1.2.m2.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S7.SS2.p1.2.m2.1b"><ci id="S7.SS2.p1.2.m2.1.1.cmml" xref="S7.SS2.p1.2.m2.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.SS2.p1.2.m2.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S7.SS2.p1.2.m2.1d">roman_Δ</annotation></semantics></math>LM, and find that adding upweighting and kNN-MT generally improves translations at all frequency levels. These increases are not concentrated in low-frequency idioms, so more common idioms continue to be translated better.<span id="footnote8" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">8</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">8</sup><span class="ltx_tag ltx_tag_note">8</span>This trend is different in retrieval of long-tail facts in question answering, in which retrieval flattens out the difference between rare and common facts <cite class="ltx_cite ltx_citemacro_cite">Kandpal et al. (<a href="#bib.bib17" title="" class="ltx_ref">2022</a>)</cite>.</span></span></span> A representative example (for French) is in <a href="#S7.F4" title="Figure 4 ‣ 7.2 Error analysis ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 4</span></a>. A complete set of plots are in <a href="#A9" title="Appendix I Effect of Frequency on ΔLM ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Appendix I</span></a>.</p>
</div>
<figure id="S7.F4" class="ltx_figure"><img src="x4.png" id="S7.F4.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="747" height="598" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Automatic metrics for <span id="S7.F4.2.1" class="ltx_text ltx_font_typewriter">fr-idiom</span> sentences, plotted by frequency, for base and upweight+knn.</figcaption>
</figure>
<div id="S7.SS2.p2" class="ltx_para">
<p id="S7.SS2.p2.1" class="ltx_p">We examine the rate of severe and major errors made in the base model and the upweight+knn model in <a href="#S7.T5" title="Table 5 ‣ 7.2 Error analysis ‣ 7 Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 5</span></a>. In French and Finnish, the rate of critical errors decreased greatly, particularly in the idiomatic and random test sets. This is true to a lesser extent in Japanese. Major errors also decreased to a lesser extent. The only test set where errors increase is again the <span id="S7.SS2.p2.1.1" class="ltx_text ltx_font_typewriter">ja-rand</span> test set. We note that it’s possible for the rate of major errors to be higher in the upweight+knn model because some severe errors transitioned to major errors.</p>
</div>
<figure id="S7.T5" class="ltx_table">
<table id="S7.T5.2" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S7.T5.2.2" class="ltx_tr">
<th id="S7.T5.2.2.3" class="ltx_td ltx_th ltx_th_row ltx_border_tt"></th>
<th id="S7.T5.2.2.4" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">System</th>
<th id="S7.T5.1.1.1" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">Severe (<math id="S7.T5.1.1.1.m1.1" class="ltx_Math" alttext="\downarrow" display="inline"><semantics id="S7.T5.1.1.1.m1.1a"><mo stretchy="false" id="S7.T5.1.1.1.m1.1.1" xref="S7.T5.1.1.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S7.T5.1.1.1.m1.1b"><ci id="S7.T5.1.1.1.m1.1.1.cmml" xref="S7.T5.1.1.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.T5.1.1.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S7.T5.1.1.1.m1.1d">↓</annotation></semantics></math>)</th>
<th id="S7.T5.2.2.2" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">Major (<math id="S7.T5.2.2.2.m1.1" class="ltx_Math" alttext="\downarrow" display="inline"><semantics id="S7.T5.2.2.2.m1.1a"><mo stretchy="false" id="S7.T5.2.2.2.m1.1.1" xref="S7.T5.2.2.2.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S7.T5.2.2.2.m1.1b"><ci id="S7.T5.2.2.2.m1.1.1.cmml" xref="S7.T5.2.2.2.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S7.T5.2.2.2.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S7.T5.2.2.2.m1.1d">↓</annotation></semantics></math>)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S7.T5.2.3.1" class="ltx_tr">
<th id="S7.T5.2.3.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.3.1.1.1" class="ltx_text ltx_font_typewriter">fi-idioms</span></th>
<td id="S7.T5.2.3.1.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.3.1.3" class="ltx_td ltx_align_right ltx_border_t">0.4258</td>
<td id="S7.T5.2.3.1.4" class="ltx_td ltx_align_right ltx_border_t">0.1648</td>
</tr>
<tr id="S7.T5.2.4.2" class="ltx_tr">
<th id="S7.T5.2.4.2.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S7.T5.2.4.2.2" class="ltx_td ltx_align_right">upweight+knn</td>
<td id="S7.T5.2.4.2.3" class="ltx_td ltx_align_right"><span id="S7.T5.2.4.2.3.1" class="ltx_text ltx_font_bold">0.3242</span></td>
<td id="S7.T5.2.4.2.4" class="ltx_td ltx_align_right"><span id="S7.T5.2.4.2.4.1" class="ltx_text ltx_font_bold">0.0962</span></td>
</tr>
<tr id="S7.T5.2.5.3" class="ltx_tr">
<th id="S7.T5.2.5.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.5.3.1.1" class="ltx_text ltx_font_typewriter">fi-literal</span></th>
<td id="S7.T5.2.5.3.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.5.3.3" class="ltx_td ltx_align_right ltx_border_t">0.1728</td>
<td id="S7.T5.2.5.3.4" class="ltx_td ltx_align_right ltx_border_t"><span id="S7.T5.2.5.3.4.1" class="ltx_text ltx_font_bold">0.1234</span></td>
</tr>
<tr id="S7.T5.2.6.4" class="ltx_tr">
<th id="S7.T5.2.6.4.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S7.T5.2.6.4.2" class="ltx_td ltx_align_right">upweight+knn</td>
<td id="S7.T5.2.6.4.3" class="ltx_td ltx_align_right"><span id="S7.T5.2.6.4.3.1" class="ltx_text ltx_font_bold">0.1234</span></td>
<td id="S7.T5.2.6.4.4" class="ltx_td ltx_align_right">0.1358</td>
</tr>
<tr id="S7.T5.2.7.5" class="ltx_tr">
<th id="S7.T5.2.7.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.7.5.1.1" class="ltx_text ltx_font_typewriter">fi-random</span></th>
<td id="S7.T5.2.7.5.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.7.5.3" class="ltx_td ltx_align_right ltx_border_t">0.1317</td>
<td id="S7.T5.2.7.5.4" class="ltx_td ltx_align_right ltx_border_t"><span id="S7.T5.2.7.5.4.1" class="ltx_text ltx_font_bold">0.2009</span></td>
</tr>
<tr id="S7.T5.2.8.6" class="ltx_tr">
<th id="S7.T5.2.8.6.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S7.T5.2.8.6.2" class="ltx_td ltx_align_right">upweight+knn</td>
<td id="S7.T5.2.8.6.3" class="ltx_td ltx_align_right"><span id="S7.T5.2.8.6.3.1" class="ltx_text ltx_font_bold">0.0603</span></td>
<td id="S7.T5.2.8.6.4" class="ltx_td ltx_align_right">0.2188</td>
</tr>
<tr id="S7.T5.2.9.7" class="ltx_tr">
<th id="S7.T5.2.9.7.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.9.7.1.1" class="ltx_text ltx_font_typewriter">fr-idioms</span></th>
<td id="S7.T5.2.9.7.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.9.7.3" class="ltx_td ltx_align_right ltx_border_t">0.3042</td>
<td id="S7.T5.2.9.7.4" class="ltx_td ltx_align_right ltx_border_t">0.1528</td>
</tr>
<tr id="S7.T5.2.10.8" class="ltx_tr">
<th id="S7.T5.2.10.8.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S7.T5.2.10.8.2" class="ltx_td ltx_align_right">upweight+knn</td>
<td id="S7.T5.2.10.8.3" class="ltx_td ltx_align_right"><span id="S7.T5.2.10.8.3.1" class="ltx_text ltx_font_bold">0.198</span></td>
<td id="S7.T5.2.10.8.4" class="ltx_td ltx_align_right"><span id="S7.T5.2.10.8.4.1" class="ltx_text ltx_font_bold">0.1092</span></td>
</tr>
<tr id="S7.T5.2.11.9" class="ltx_tr">
<th id="S7.T5.2.11.9.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.11.9.1.1" class="ltx_text ltx_font_typewriter">fr-literal</span></th>
<td id="S7.T5.2.11.9.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.11.9.3" class="ltx_td ltx_align_right ltx_border_t">0.2326</td>
<td id="S7.T5.2.11.9.4" class="ltx_td ltx_align_right ltx_border_t">0.1047</td>
</tr>
<tr id="S7.T5.2.12.10" class="ltx_tr">
<th id="S7.T5.2.12.10.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S7.T5.2.12.10.2" class="ltx_td ltx_align_right">upweight+knn</td>
<td id="S7.T5.2.12.10.3" class="ltx_td ltx_align_right"><span id="S7.T5.2.12.10.3.1" class="ltx_text ltx_font_bold">0.2209</span></td>
<td id="S7.T5.2.12.10.4" class="ltx_td ltx_align_right"><span id="S7.T5.2.12.10.4.1" class="ltx_text ltx_font_bold">0.04651</span></td>
</tr>
<tr id="S7.T5.2.13.11" class="ltx_tr">
<th id="S7.T5.2.13.11.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.13.11.1.1" class="ltx_text ltx_font_typewriter">fr-random</span></th>
<td id="S7.T5.2.13.11.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.13.11.3" class="ltx_td ltx_align_right ltx_border_t">0.1624</td>
<td id="S7.T5.2.13.11.4" class="ltx_td ltx_align_right ltx_border_t">0.1688</td>
</tr>
<tr id="S7.T5.2.14.12" class="ltx_tr">
<th id="S7.T5.2.14.12.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S7.T5.2.14.12.2" class="ltx_td ltx_align_right">upweight+knn</td>
<td id="S7.T5.2.14.12.3" class="ltx_td ltx_align_right"><span id="S7.T5.2.14.12.3.1" class="ltx_text ltx_font_bold">0.09407</span></td>
<td id="S7.T5.2.14.12.4" class="ltx_td ltx_align_right"><span id="S7.T5.2.14.12.4.1" class="ltx_text ltx_font_bold">0.1649</span></td>
</tr>
<tr id="S7.T5.2.15.13" class="ltx_tr">
<th id="S7.T5.2.15.13.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.15.13.1.1" class="ltx_text ltx_font_typewriter">ja-idioms</span></th>
<td id="S7.T5.2.15.13.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.15.13.3" class="ltx_td ltx_align_right ltx_border_t">0.4643</td>
<td id="S7.T5.2.15.13.4" class="ltx_td ltx_align_right ltx_border_t">0.2411</td>
</tr>
<tr id="S7.T5.2.16.14" class="ltx_tr">
<th id="S7.T5.2.16.14.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S7.T5.2.16.14.2" class="ltx_td ltx_align_right">upweight+knn</td>
<td id="S7.T5.2.16.14.3" class="ltx_td ltx_align_right"><span id="S7.T5.2.16.14.3.1" class="ltx_text ltx_font_bold">0.4464</span></td>
<td id="S7.T5.2.16.14.4" class="ltx_td ltx_align_right"><span id="S7.T5.2.16.14.4.1" class="ltx_text ltx_font_bold">0.1875</span></td>
</tr>
<tr id="S7.T5.2.17.15" class="ltx_tr">
<th id="S7.T5.2.17.15.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.17.15.1.1" class="ltx_text ltx_font_typewriter">ja-literal</span></th>
<td id="S7.T5.2.17.15.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.17.15.3" class="ltx_td ltx_align_right ltx_border_t">0.2867</td>
<td id="S7.T5.2.17.15.4" class="ltx_td ltx_align_right ltx_border_t"><span id="S7.T5.2.17.15.4.1" class="ltx_text ltx_font_bold">0.1311</span></td>
</tr>
<tr id="S7.T5.2.18.16" class="ltx_tr">
<th id="S7.T5.2.18.16.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="S7.T5.2.18.16.2" class="ltx_td ltx_align_right">upweight+knn</td>
<td id="S7.T5.2.18.16.3" class="ltx_td ltx_align_right"><span id="S7.T5.2.18.16.3.1" class="ltx_text ltx_font_bold">0.2787</span></td>
<td id="S7.T5.2.18.16.4" class="ltx_td ltx_align_right">0.1557</td>
</tr>
<tr id="S7.T5.2.19.17" class="ltx_tr">
<th id="S7.T5.2.19.17.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S7.T5.2.19.17.1.1" class="ltx_text ltx_font_typewriter">ja-random</span></th>
<td id="S7.T5.2.19.17.2" class="ltx_td ltx_align_right ltx_border_t">base</td>
<td id="S7.T5.2.19.17.3" class="ltx_td ltx_align_right ltx_border_t"><span id="S7.T5.2.19.17.3.1" class="ltx_text ltx_font_bold">0.2931</span></td>
<td id="S7.T5.2.19.17.4" class="ltx_td ltx_align_right ltx_border_t"><span id="S7.T5.2.19.17.4.1" class="ltx_text ltx_font_bold">0.1724</span></td>
</tr>
<tr id="S7.T5.2.20.18" class="ltx_tr">
<th id="S7.T5.2.20.18.1" class="ltx_td ltx_th ltx_th_row ltx_border_bb"></th>
<td id="S7.T5.2.20.18.2" class="ltx_td ltx_align_right ltx_border_bb">upweight+knn</td>
<td id="S7.T5.2.20.18.3" class="ltx_td ltx_align_right ltx_border_bb">0.3190</td>
<td id="S7.T5.2.20.18.4" class="ltx_td ltx_align_right ltx_border_bb">0.1897</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Rate of major and severe errors in translations.</figcaption>
</figure>
<div id="S7.SS2.p3" class="ltx_para">
<p id="S7.SS2.p3.2" class="ltx_p">One question is why the error rate on out-of-distribution sentences drops for French and Finnish. In <span id="S7.SS2.p3.2.1" class="ltx_text ltx_font_typewriter">fi-rand</span>, the severe error rate more than halves (<math id="S7.SS2.p3.1.m1.1" class="ltx_Math" alttext="0.1317\rightarrow 0.603" display="inline"><semantics id="S7.SS2.p3.1.m1.1a"><mrow id="S7.SS2.p3.1.m1.1.1" xref="S7.SS2.p3.1.m1.1.1.cmml"><mn id="S7.SS2.p3.1.m1.1.1.2" xref="S7.SS2.p3.1.m1.1.1.2.cmml">0.1317</mn><mo stretchy="false" id="S7.SS2.p3.1.m1.1.1.1" xref="S7.SS2.p3.1.m1.1.1.1.cmml">→</mo><mn id="S7.SS2.p3.1.m1.1.1.3" xref="S7.SS2.p3.1.m1.1.1.3.cmml">0.603</mn></mrow><annotation-xml encoding="MathML-Content" id="S7.SS2.p3.1.m1.1b"><apply id="S7.SS2.p3.1.m1.1.1.cmml" xref="S7.SS2.p3.1.m1.1.1"><ci id="S7.SS2.p3.1.m1.1.1.1.cmml" xref="S7.SS2.p3.1.m1.1.1.1">→</ci><cn type="float" id="S7.SS2.p3.1.m1.1.1.2.cmml" xref="S7.SS2.p3.1.m1.1.1.2">0.1317</cn><cn type="float" id="S7.SS2.p3.1.m1.1.1.3.cmml" xref="S7.SS2.p3.1.m1.1.1.3">0.603</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.SS2.p3.1.m1.1c">0.1317\rightarrow 0.603</annotation><annotation encoding="application/x-llamapun" id="S7.SS2.p3.1.m1.1d">0.1317 → 0.603</annotation></semantics></math>), and in <span id="S7.SS2.p3.2.2" class="ltx_text ltx_font_typewriter">fr-rand</span>, it nearly halves (<math id="S7.SS2.p3.2.m2.1" class="ltx_Math" alttext="0.1624\rightarrow 0.09407" display="inline"><semantics id="S7.SS2.p3.2.m2.1a"><mrow id="S7.SS2.p3.2.m2.1.1" xref="S7.SS2.p3.2.m2.1.1.cmml"><mn id="S7.SS2.p3.2.m2.1.1.2" xref="S7.SS2.p3.2.m2.1.1.2.cmml">0.1624</mn><mo stretchy="false" id="S7.SS2.p3.2.m2.1.1.1" xref="S7.SS2.p3.2.m2.1.1.1.cmml">→</mo><mn id="S7.SS2.p3.2.m2.1.1.3" xref="S7.SS2.p3.2.m2.1.1.3.cmml">0.09407</mn></mrow><annotation-xml encoding="MathML-Content" id="S7.SS2.p3.2.m2.1b"><apply id="S7.SS2.p3.2.m2.1.1.cmml" xref="S7.SS2.p3.2.m2.1.1"><ci id="S7.SS2.p3.2.m2.1.1.1.cmml" xref="S7.SS2.p3.2.m2.1.1.1">→</ci><cn type="float" id="S7.SS2.p3.2.m2.1.1.2.cmml" xref="S7.SS2.p3.2.m2.1.1.2">0.1624</cn><cn type="float" id="S7.SS2.p3.2.m2.1.1.3.cmml" xref="S7.SS2.p3.2.m2.1.1.3">0.09407</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S7.SS2.p3.2.m2.1c">0.1624\rightarrow 0.09407</annotation><annotation encoding="application/x-llamapun" id="S7.SS2.p3.2.m2.1d">0.1624 → 0.09407</annotation></semantics></math>). However, it is unclear why this should be the case. We examined sentences where the original translation was incorrect but the upweight+knn translation was correct, and found that they tended to contain named entities. For instance, for the sentence “<span id="S7.SS2.p3.2.3" class="ltx_text ltx_font_italic">La chirurgie à coeur ouvert au Nigeria, c’est un gros problème.</span> (Open heart surgery in Nigeria - big trouble.)”, the base model incorrectly produced the translation “Open-heart surgery in Forbes, that’s a big problem.”, while the upweight+knn model translated correctly. In some cases, words with multiple possible translations (e.g. <span id="S7.SS2.p3.2.4" class="ltx_text ltx_font_italic">spectre</span>: ghost, spectrum) became correctly translated. “<span id="S7.SS2.p3.2.5" class="ltx_text ltx_font_italic">Mais regardez le nombre de lignes noires dans ce spectre.</span> (But look at the number of black lines in that spectrum.)” was originally translated incorrectly as “But look at the number of black lines in that ghost”.
</p>
</div>
</section>
</section>
<section id="S8" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8 </span>Related Work</h2>

<div id="S8.p1" class="ltx_para">
<p id="S8.p1.1" class="ltx_p">Recent work has raised the issue of idiom handling in MT <cite class="ltx_cite ltx_citemacro_cite">Baziotis et al. (<a href="#bib.bib4" title="" class="ltx_ref">2022</a>); Dankers et al. (<a href="#bib.bib9" title="" class="ltx_ref">2022b</a>, <a href="#bib.bib8" title="" class="ltx_ref">a</a>)</cite>. There is historical recognition of the problem, including of multi-word expressions <cite class="ltx_cite ltx_citemacro_cite">Sag et al. (<a href="#bib.bib38" title="" class="ltx_ref">2002</a>); Calzolari et al. (<a href="#bib.bib5" title="" class="ltx_ref">2002</a>); Zaninello and Birch (<a href="#bib.bib47" title="" class="ltx_ref">2020</a>)</cite>. This has historically motivated example-based machine translation <cite class="ltx_cite ltx_citemacro_cite">Nagao (<a href="#bib.bib27" title="" class="ltx_ref">1984</a>)</cite>. Similar motivations underlie the use of kNN-MT. However, neural models may already be capable of translating idiomatic phrases if they appear often enough in training data.</p>
</div>
<div id="S8.p2" class="ltx_para">
<p id="S8.p2.1" class="ltx_p">Other works focus on data augmentation and creating new data resources <cite class="ltx_cite ltx_citemacro_cite">Ho et al. (<a href="#bib.bib15" title="" class="ltx_ref">2014</a>); Fadaee et al. (<a href="#bib.bib10" title="" class="ltx_ref">2018</a>); Agrawal et al. (<a href="#bib.bib1" title="" class="ltx_ref">2018</a>); Haagsma et al. (<a href="#bib.bib13" title="" class="ltx_ref">2020</a>)</cite>. A related task is detection of conventionalized metaphors <cite class="ltx_cite ltx_citemacro_cite">Levin et al. (<a href="#bib.bib21" title="" class="ltx_ref">2014</a>)</cite>. Automatic identification of idiomatic phrases, as well as data augmentation are promising avenues to improve performance in lower-resource languages.</p>
</div>
<div id="S8.p3" class="ltx_para">
<p id="S8.p3.1" class="ltx_p">Instance weighting has been explored previously in the MT literature, but has been mostly explored in the context of domain adaptation, rather than being used to improve translations of rare or non-compositional phrases in the same domain <cite class="ltx_cite ltx_citemacro_cite">Foster et al. (<a href="#bib.bib11" title="" class="ltx_ref">2010</a>); Wang et al. (<a href="#bib.bib44" title="" class="ltx_ref">2017</a>)</cite>.</p>
</div>
<div id="S8.p4" class="ltx_para">
<p id="S8.p4.1" class="ltx_p">Idiomatic phrases are a prototypical case of phrases that need to be memorized <cite class="ltx_cite ltx_citemacro_cite">Haviv et al. (<a href="#bib.bib14" title="" class="ltx_ref">2022</a>)</cite>. Many also occur infrequently in training data, which may make it difficult for transformer-based models to translate them <cite class="ltx_cite ltx_citemacro_cite">Kandpal et al. (<a href="#bib.bib17" title="" class="ltx_ref">2022</a>)</cite>. This can be mitigated, as we have shown in this paper. However, more work is needed to effectively learn idioms and other infrequent linguistic elements with few repetitions.</p>
</div>
</section>
<section id="S9" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">9 </span>Conclusion</h2>

<div id="S9.p1" class="ltx_para">
<p id="S9.p1.1" class="ltx_p">We highlight the challenge idiomatic expressions pose to machine translation systems and provide simple solutions to improve performance. Through synthetic experiments, we identify a threshold at which transformer-based models correctly default to idiomatic translations. We develop a dataset of sentences containing idiomatic expressions in French, Finnish, and Japanese, and introduce two techniques - upweighting training loss on potentially idiomatic sentences and augmenting models with kNN-MT - which enhance the idiomatic translation accuracy of a strong model, while offering potential benefits for non-idiomatic sentences.</p>
</div>
<div id="S9.p2" class="ltx_para">
<p id="S9.p2.1" class="ltx_p">Future research could extend these techniques to additional languages, and explore their effectiveness in dealing with other long-tail phenomena. We hope that this work contributes toward increasing the intelligibility of translations containing idioms or set phrases. Ultimately, for machine translation to be useful for everyone without causing misunderstandings, “last mile” problems involving cultural knowledge, long-tail phenomena, and complex semantic evaluation should be taken into account.</p>
</div>
</section>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">Acknowledgements</h2>

<div id="Sx1.p1" class="ltx_para">
<p id="Sx1.p1.1" class="ltx_p">Thank you to Perez Ogayo for helping with DeltaLM setup, all annotators who validated idiomatic/literal judgments, as well as to NeuLab members for providing feedback on parts of the draft. This project was funded by the P2020 program MAIA (LISBOA-01-0247-FEDER-045909).</p>
</div>
</section>
<section id="S10" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">10 </span>Limitations</h2>

<div id="S10.p1" class="ltx_para">
<p id="S10.p1.1" class="ltx_p">Our research provides a first step toward capturing non-compositional expressions in machine translation. However, we do not conclusively solve the problem, as ideally a machine translation system should be able to learn any idiom or non-compositional phrase from a few examples.</p>
</div>
<div id="S10.p2" class="ltx_para">
<p id="S10.p2.1" class="ltx_p">First, our experiments were conducted on a select group of languages (Finnish, French, and Japanese), which do not fully capture the variety and complexity of languages worldwide. Given the diversity of language structures and idiomatic expressions, the generality of our findings to languages with drastically different grammatical structures or idiom usage patterns remains uncertain.</p>
</div>
<div id="S10.p3" class="ltx_para">
<p id="S10.p3.1" class="ltx_p">Next is our use of synthetic data. While synthetic data allowed us to control for certain variables, our setting is purposefully simplified, potentially limiting the ecological validity of our findings. Although our synthetic language was designed to mimic non-compositional translation issues, it may not encapsulate the full extent of such complexities in real-world languages. Namely, there is only one non-compositional pattern and the remaining translations are one-to-one mappings.</p>
</div>
<div id="S10.p4" class="ltx_para">
<p id="S10.p4.1" class="ltx_p">Our research also depends on the quality and representativeness of the training and evaluation corpora. For instance, certain idioms may be overrepresented or underrepresented, which could affect the translation performance.</p>
</div>
<div id="S10.p5" class="ltx_para">
<p id="S10.p5.1" class="ltx_p">Lastly, our improvement methods, namely upweighting and kNN-MT, have inherent limitations. Upweighting could lead to overfitting on idiomatic expressions and may not be as effective when idioms occur infrequently in the data. On the other hand, kNN-MT might not yield significant improvements if the idiom or its correct translation rarely appears in the training data, limiting its utility in such scenarios.</p>
</div>
<div id="S10.p6" class="ltx_para">
<p id="S10.p6.1" class="ltx_p">Future work could address these limitations by expanding the linguistic scope of the study, exploring more complex methods or architectures, or investigating to what extent similar techniques can be applied to related issues in semantic preservation during machine translation.
</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Agrawal et al. (2018)</span>
<span class="ltx_bibblock">
Ruchit Agrawal, Vighnesh Chenthil Kumar, Vigneshwaran Muralidharan, and Dipti Sharma. 2018.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/L18-1048" title="" class="ltx_ref ltx_href">No more beating about the bush : A step towards idiom handling for Indian language NLP</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib1.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Eleventh International Conference on Language Resources and Evaluation (LREC 2018)</em>, Miyazaki, Japan. European Language Resources Association (ELRA).

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Anastasiou (2010)</span>
<span class="ltx_bibblock">
Dimitra Anastasiou. 2010.

</span>
<span class="ltx_bibblock"><em id="bib.bib2.1.1" class="ltx_emph ltx_font_italic">Idiom treatment experiments in machine translation</em>.

</span>
<span class="ltx_bibblock">Ph.D. thesis.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bar-Hillel (1952)</span>
<span class="ltx_bibblock">
Yehoshua Bar-Hillel. 1952.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/1952.earlymt-1.11" title="" class="ltx_ref ltx_href">The treatment of “idioms” by a translating machine</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Conference on Mechanical Translation</em>, Massachusetts Institute of Technology.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Baziotis et al. (2022)</span>
<span class="ltx_bibblock">
Christos Baziotis, Prashant Mathur, and Eva Hasler. 2022.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.48550/ARXIV.2210.04545" title="" class="ltx_ref ltx_href">Automatic evaluation and analysis of idioms in neural machine translation</a>.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Calzolari et al. (2002)</span>
<span class="ltx_bibblock">
Nicoletta Calzolari, Charles J. Fillmore, Ralph Grishman, Nancy Ide, Alessandro Lenci, Catherine MacLeod, and Antonio Zampolli. 2002.

</span>
<span class="ltx_bibblock"><a href="http://www.lrec-conf.org/proceedings/lrec2002/pdf/259.pdf" title="" class="ltx_ref ltx_href">Towards best practice for multiword expressions in computational lexicons</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Third International Conference on Language Resources and Evaluation (LREC’02)</em>, Las Palmas, Canary Islands - Spain. European Language Resources Association (ELRA).

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Castro (2017)</span>
<span class="ltx_bibblock">
Santiago Castro. 2017.

</span>
<span class="ltx_bibblock">Fast Krippendorff: Fast computation of Krippendorff’s alpha agreement measure.

</span>
<span class="ltx_bibblock"><a href="https://github.com/pln-fing-udelar/fast-krippendorff" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/pln-fing-udelar/fast-krippendorff</a>.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cooper (1999)</span>
<span class="ltx_bibblock">
Thomas C. Cooper. 1999.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/https://doi.org/10.2307/3587719" title="" class="ltx_ref ltx_href">Processing of Idioms by L2 Learners of English</a>.

</span>
<span class="ltx_bibblock"><em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">TESOL Quarterly</em>, 33(2):233–262.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dankers et al. (2022a)</span>
<span class="ltx_bibblock">
Verna Dankers, Elia Bruni, and Dieuwke Hupkes. 2022a.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.18653/v1/2022.acl-long.286" title="" class="ltx_ref ltx_href">The paradox of the compositionality of natural language: A neural machine translation case study</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib8.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 60th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 4154–4175, Dublin, Ireland. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dankers et al. (2022b)</span>
<span class="ltx_bibblock">
Verna Dankers, Christopher Lucas, and Ivan Titov. 2022b.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.18653/v1/2022.acl-long.252" title="" class="ltx_ref ltx_href">Can transformer be too compositional? analysing idiom processing in neural machine translation</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib9.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 60th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 3608–3626, Dublin, Ireland. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fadaee et al. (2018)</span>
<span class="ltx_bibblock">
Marzieh Fadaee, Arianna Bisazza, and Christof Monz. 2018.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/L18-1148" title="" class="ltx_ref ltx_href">Examining the tip of the iceberg: A data set for idiom translation</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Eleventh International Conference on Language Resources and Evaluation (LREC 2018)</em>, Miyazaki, Japan. European Language Resources Association (ELRA).

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Foster et al. (2010)</span>
<span class="ltx_bibblock">
George Foster, Cyril Goutte, and Roland Kuhn. 2010.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/D10-1044" title="" class="ltx_ref ltx_href">Discriminative instance weighting for domain adaptation in statistical machine translation</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2010 Conference on Empirical Methods in Natural Language Processing</em>, pages 451–459, Cambridge, MA. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Graham et al. (2014)</span>
<span class="ltx_bibblock">
Yvette Graham, Nikita Mathur, and Timothy Baldwin. 2014.

</span>
<span class="ltx_bibblock">Randomized significance tests in machine translation.

</span>
<span class="ltx_bibblock">In <em id="bib.bib12.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Ninth Workshop on Statistical Machine Translation</em>, pages 266–274. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Haagsma et al. (2020)</span>
<span class="ltx_bibblock">
Hessel Haagsma, Johan Bos, and Malvina Nissim. 2020.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/2020.lrec-1.35" title="" class="ltx_ref ltx_href">MAGPIE: A large corpus of potentially idiomatic expressions</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib13.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Twelfth Language Resources and Evaluation Conference</em>, pages 279–287, Marseille, France. European Language Resources Association.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Haviv et al. (2022)</span>
<span class="ltx_bibblock">
Adi Haviv, Ido Cohen, Jacob Gidron, Roei Schuster, Yoav Goldberg, and Mor Geva. 2022.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.48550/ARXIV.2210.03588" title="" class="ltx_ref ltx_href">Understanding transformer memorization recall through idioms</a>.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ho et al. (2014)</span>
<span class="ltx_bibblock">
Wan Yu Ho, Christine Kng, Shan Wang, and Francis Bond. 2014.

</span>
<span class="ltx_bibblock"><a href="http://www.lrec-conf.org/proceedings/lrec2014/pdf/462_Paper.pdf" title="" class="ltx_ref ltx_href">Identifying idioms in Chinese translations</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Ninth International Conference on Language Resources and Evaluation (LREC’14)</em>, pages 716–721, Reykjavik, Iceland. European Language Resources Association (ELRA).

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Johnson et al. (2019)</span>
<span class="ltx_bibblock">
Jeff Johnson, Matthijs Douze, and Hervé Jégou. 2019.

</span>
<span class="ltx_bibblock">Billion-scale similarity search with GPUs.

</span>
<span class="ltx_bibblock"><em id="bib.bib16.1.1" class="ltx_emph ltx_font_italic">IEEE Transactions on Big Data</em>, 7(3):535–547.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kandpal et al. (2022)</span>
<span class="ltx_bibblock">
Nikhil Kandpal, Haikang Deng, Adam Roberts, Eric Wallace, and Colin Raffel. 2022.

</span>
<span class="ltx_bibblock"><a href="http://arxiv.org/abs/2211.08411" title="" class="ltx_ref ltx_href">Large language models struggle to learn long-tail knowledge</a>.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Khandelwal et al. (2021)</span>
<span class="ltx_bibblock">
Urvashi Khandelwal, Angela Fan, Dan Jurafsky, Luke Zettlemoyer, and Mike Lewis. 2021.

</span>
<span class="ltx_bibblock"><a href="http://arxiv.org/abs/2010.00710" title="" class="ltx_ref ltx_href">Nearest neighbor machine translation</a>.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kingma and Ba (2017)</span>
<span class="ltx_bibblock">
Diederik P. Kingma and Jimmy Ba. 2017.

</span>
<span class="ltx_bibblock"><a href="http://arxiv.org/abs/1412.6980" title="" class="ltx_ref ltx_href">Adam: A method for stochastic optimization</a>.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Krippendorff (1970)</span>
<span class="ltx_bibblock">
Klaus Krippendorff. 1970.

</span>
<span class="ltx_bibblock"><a href="https://api.semanticscholar.org/CorpusID:144036366" title="" class="ltx_ref ltx_href">Estimating the reliability, systematic error and random error of interval data</a>.

</span>
<span class="ltx_bibblock"><em id="bib.bib20.1.1" class="ltx_emph ltx_font_italic">Educational and Psychological Measurement</em>, 30:61 – 70.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Levin et al. (2014)</span>
<span class="ltx_bibblock">
Lori Levin, Teruko Mitamura, Brian MacWhinney, Davida Fromm, Jaime Carbonell, Weston Feely, Robert Frederking, Anatole Gershman, and Carlos Ramirez. 2014.

</span>
<span class="ltx_bibblock"><a href="http://www.lrec-conf.org/proceedings/lrec2014/pdf/457_Paper.pdf" title="" class="ltx_ref ltx_href">Resources for the detection of conventionalized metaphors in four languages</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib21.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Ninth International Conference on Language Resources and Evaluation (LREC’14)</em>, pages 498–501, Reykjavik, Iceland. European Language Resources Association (ELRA).

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lison et al. (2018)</span>
<span class="ltx_bibblock">
Pierre Lison, Jörg Tiedemann, and Milen Kouylekov. 2018.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/L18-1275" title="" class="ltx_ref ltx_href">OpenSubtitles2018: Statistical rescoring of sentence alignments in large, noisy parallel corpora</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib22.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Eleventh International Conference on Language Resources and Evaluation (LREC 2018)</em>, Miyazaki, Japan. European Language Resources Association (ELRA).

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu (2012)</span>
<span class="ltx_bibblock">
Dayan Liu. 2012.

</span>
<span class="ltx_bibblock">Translation and culture: Translating idioms between english and chinese from a cultural perspective.

</span>
<span class="ltx_bibblock"><em id="bib.bib23.1.1" class="ltx_emph ltx_font_italic">Theory and Practice in Language Studies</em>, 2:2357–2362.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lommel et al. (2014)</span>
<span class="ltx_bibblock">
Arle Lommel, Hans Uszkoreit, and Aljoscha Burchardt. 2014.

</span>
<span class="ltx_bibblock">Multidimensional quality metrics (mqm): A framework for declaring and describing translation quality metrics.

</span>
<span class="ltx_bibblock"><em id="bib.bib24.1.1" class="ltx_emph ltx_font_italic">Tradumàtica</em>, (12):0455–463.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ma et al. (2021)</span>
<span class="ltx_bibblock">
Shuming Ma, Li Dong, Shaohan Huang, Dongdong Zhang, Alexandre Muzio, Saksham Singhal, Hany Hassan Awadalla, Xia Song, and Furu Wei. 2021.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.48550/ARXIV.2106.13736" title="" class="ltx_ref ltx_href">Deltalm: Encoder-decoder pre-training for language generation and translation by augmenting pretrained multilingual encoders</a>.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Matusov (2019)</span>
<span class="ltx_bibblock">
Evgeny Matusov. 2019.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/W19-7302" title="" class="ltx_ref ltx_href">The challenges of using neural machine translation for literature</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib26.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Qualities of Literary Machine Translation</em>, pages 10–19, Dublin, Ireland. European Association for Machine Translation.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nagao (1984)</span>
<span class="ltx_bibblock">
Makoto Nagao. 1984.

</span>
<span class="ltx_bibblock">A framework of a mechanical translation between japanese and english by analogy principle.

</span>
<span class="ltx_bibblock">In <em id="bib.bib27.1.1" class="ltx_emph ltx_font_italic">Proc. of the International NATO Symposium on Artificial and Human Intelligence</em>, page 173–180, USA. Elsevier North-Holland, Inc.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Omar and Gomaa (2020)</span>
<span class="ltx_bibblock">
Abdulfattah Omar and Yasser Gomaa. 2020.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.3991/ijet.v15i11.13275" title="" class="ltx_ref ltx_href">The machine translation of literature: Implications for translation pedagogy</a>.

</span>
<span class="ltx_bibblock"><em id="bib.bib28.1.1" class="ltx_emph ltx_font_italic">International Journal of Emerging Technologies in Learning (iJET)</em>, 15:228.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">on Machine Translation  (WMT21)</span>
<span class="ltx_bibblock">
Sixth Confrence on Machine Translation (WMT21).

</span>
<span class="ltx_bibblock"><a href="https://www.statmt.org/wmt21/large-scale-multilingual-translation-task.html" title="" class="ltx_ref ltx_href">Shared task: Large-scale multilingual machine translation</a>.

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ott et al. (2019)</span>
<span class="ltx_bibblock">
Myle Ott, Sergey Edunov, Alexei Baevski, Angela Fan, Sam Gross, Nathan Ng, David Grangier, and Michael Auli. 2019.

</span>
<span class="ltx_bibblock"><a href="http://arxiv.org/abs/1904.01038" title="" class="ltx_ref ltx_href">fairseq: A fast, extensible toolkit for sequence modeling</a>.

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pershina et al. (2015)</span>
<span class="ltx_bibblock">
Maria Pershina, Yifan He, and Ralph Grishman. 2015.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.18653/v1/W15-2709" title="" class="ltx_ref ltx_href">Idiom paraphrases: Seventh heaven vs cloud nine</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib31.1.1" class="ltx_emph ltx_font_italic">Proceedings of the First Workshop on Linking Computational Models of Lexical, Sentential and Discourse-level Semantics</em>, pages 76–82, Lisbon, Portugal. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Poibeau (2022)</span>
<span class="ltx_bibblock">
Thierry Poibeau. 2022.

</span>
<span class="ltx_bibblock">On "human parity" and "super human performance" in machine translation evaluation.

</span>
<span class="ltx_bibblock">Marseille, France. Language Resource and Evaluation Conference.

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Portner (2005)</span>
<span class="ltx_bibblock">
Paul H. Portner. 2005.

</span>
<span class="ltx_bibblock"><em id="bib.bib33.1.1" class="ltx_emph ltx_font_italic">What is meaning?: Fundamentals of formal semantics</em>.

</span>
<span class="ltx_bibblock">Blackwell Publishing, Malden, MA.

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Qi et al. (2020)</span>
<span class="ltx_bibblock">
Peng Qi, Yuhao Zhang, Yuhui Zhang, Jason Bolton, and Christopher D. Manning. 2020.

</span>
<span class="ltx_bibblock"><a href="https://nlp.stanford.edu/pubs/qi2020stanza.pdf" title="" class="ltx_ref ltx_href">Stanza: A Python natural language processing toolkit for many human languages</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib34.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 58th Annual Meeting of the Association for Computational Linguistics: System Demonstrations</em>.

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Radford (2004)</span>
<span class="ltx_bibblock">
Andrew Radford. 2004.

</span>
<span class="ltx_bibblock"><em id="bib.bib35.1.1" class="ltx_emph ltx_font_italic">English Syntax: An Introduction</em>.

</span>
<span class="ltx_bibblock">Cambridge University Press, Cambridge, UK.

</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rei et al. (2020)</span>
<span class="ltx_bibblock">
Ricardo Rei, Craig Stewart, Ana C Farinha, and Alon Lavie. 2020.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/2020.wmt-1.101" title="" class="ltx_ref ltx_href">Unbabel’s participation in the WMT20 metrics shared task</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib36.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Fifth Conference on Machine Translation</em>, pages 911–920, Online. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Reimers and Gurevych (2020)</span>
<span class="ltx_bibblock">
Nils Reimers and Iryna Gurevych. 2020.

</span>
<span class="ltx_bibblock"><a href="https://arxiv.org/abs/2004.09813" title="" class="ltx_ref ltx_href">Making monolingual sentence embeddings multilingual using knowledge distillation</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib37.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2020 Conference on Empirical Methods in Natural Language Processing</em>. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sag et al. (2002)</span>
<span class="ltx_bibblock">
Ivan A. Sag, Timothy Baldwin, Francis Bond, Ann Copestake, and Dan Flickinger. 2002.

</span>
<span class="ltx_bibblock">Multiword expressions: A pain in the neck for nlp.

</span>
<span class="ltx_bibblock">In <em id="bib.bib38.1.1" class="ltx_emph ltx_font_italic">Computational Linguistics and Intelligent Text Processing</em>, pages 1–15, Berlin, Heidelberg. Springer Berlin Heidelberg.

</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Salton et al. (2014)</span>
<span class="ltx_bibblock">
Giancarlo Salton, Robert Ross, and John Kelleher. 2014.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.3115/v1/W14-0806" title="" class="ltx_ref ltx_href">Evaluation of a substitution method for idiom transformation in statistical machine translation</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib39.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 10th Workshop on Multiword Expressions (MWE)</em>, pages 38–42, Gothenburg, Sweden. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib40" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shao et al. (2017)</span>
<span class="ltx_bibblock">
Yutong Shao, Rico Sennrich, Bonnie Webber, and Federico Fancellu. 2017.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.48550/ARXIV.1711.07646" title="" class="ltx_ref ltx_href">Evaluating machine translation performance on chinese idioms with a blacklist method</a>.

</span>
</li>
<li id="bib.bib41" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Toral and Way (2018)</span>
<span class="ltx_bibblock">
Antonio Toral and Andy Way. 2018.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.1007/978-3-319-91241-7_12" title="" class="ltx_ref ltx_href">What level of quality can neural machine translation attain on literary text?</a>

</span>
<span class="ltx_bibblock">In J Moorkens, S Castilho, F Gaspari, and S Doherty, editors, <em id="bib.bib41.1.1" class="ltx_emph ltx_font_italic">Translation Quality Assessment: Technologies and Applications</em>. Springer, Cham.

</span>
</li>
<li id="bib.bib42" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Unbabel (2019)</span>
<span class="ltx_bibblock">
Unbabel. 2019.

</span>
<span class="ltx_bibblock"><a href="https://resources.unbabel.com/blog/idioms-translation" title="" class="ltx_ref ltx_href">Why translating idioms is hard</a>.

</span>
</li>
<li id="bib.bib43" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Vaswani et al. (2017)</span>
<span class="ltx_bibblock">
Ashish Vaswani, Noam Shazeer, Niki Parmar, Jakob Uszkoreit, Llion Jones, Aidan N. Gomez, Lukasz Kaiser, and Illia Polosukhin. 2017.

</span>
<span class="ltx_bibblock"><a href="http://arxiv.org/abs/1706.03762" title="" class="ltx_ref ltx_href">Attention is all you need</a>.

</span>
</li>
<li id="bib.bib44" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2017)</span>
<span class="ltx_bibblock">
Rui Wang, Masao Utiyama, Lemao Liu, Kehai Chen, and Eiichiro Sumita. 2017.

</span>
<span class="ltx_bibblock"><a href="https://doi.org/10.18653/v1/D17-1155" title="" class="ltx_ref ltx_href">Instance weighting for neural machine translation domain adaptation</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib44.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2017 Conference on Empirical Methods in Natural Language Processing</em>, pages 1482–1488, Copenhagen, Denmark. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib45" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wehrli (1998)</span>
<span class="ltx_bibblock">
Eric Wehrli. 1998.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/C98-2221" title="" class="ltx_ref ltx_href">Translating idioms</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib45.1.1" class="ltx_emph ltx_font_italic">COLING 1998 Volume 2: The 17th International Conference on Computational Linguistics</em>.

</span>
</li>
<li id="bib.bib46" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang (2010)</span>
<span class="ltx_bibblock">
Chunli Yang. 2010.

</span>
<span class="ltx_bibblock">Cultural differences on chinese and english idioms of diet and the translation.

</span>
<span class="ltx_bibblock"><em id="bib.bib46.1.1" class="ltx_emph ltx_font_italic">English Language Teaching</em>, 3.

</span>
</li>
<li id="bib.bib47" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zaninello and Birch (2020)</span>
<span class="ltx_bibblock">
Andrea Zaninello and Alexandra Birch. 2020.

</span>
<span class="ltx_bibblock"><a href="https://aclanthology.org/2020.lrec-1.471" title="" class="ltx_ref ltx_href">Multiword expression aware neural machine translation</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib47.1.1" class="ltx_emph ltx_font_italic">Proceedings of the Twelfth Language Resources and Evaluation Conference</em>, pages 3816–3825, Marseille, France. European Language Resources Association.

</span>
</li>
</ul>
</section>
<section id="A1" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Synthetic Dataset Training Details</h2>

<div id="A1.p1" class="ltx_para">
<p id="A1.p1.1" class="ltx_p">Three encoder/decoder transformer sizes were trained, differing only in number of encoder/decoder layers. The small size had 3 encoder/decoder layers, the medium size had 8 encoder/decoder layers, and the large size had 16 encoder/decoder layers. For all models, the hidden dimension was 512, the embedding dimension was 512, and there were 16 attention heads.</p>
</div>
<div id="A1.p2" class="ltx_para">
<p id="A1.p2.1" class="ltx_p">In the experiments without informative context, the small transformer was trained for 10 epochs, the medium transformer for 20, and the large for 30. In experiments with context, this was changed to 15, 15, and 25 respectively. These values were based on early experimentation with loss plateaus on the validation set.</p>
</div>
<div id="A1.p3" class="ltx_para">
<p id="A1.p3.1" class="ltx_p">Sentences in the synthetic dataset were composed of tokens as described in <a href="#S4.SS1" title="4.1 Artificial Language Translation ‣ 4 Evaluating Non-Compositional Translation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">subsection 4.1</span></a>. Sentences were constrained to be 1-6 tokens in length.</p>
</div>
<div id="A1.p4" class="ltx_para">
<p id="A1.p4.1" class="ltx_p">Experiments with the synthetic dataset were implemented in PyTorch.</p>
</div>
</section>
<section id="A2" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Idiom Sources</h2>

<div id="A2.p1" class="ltx_para">
<p id="A2.p1.1" class="ltx_p">Sources of idioms were pulled from language-learning websites below:</p>
</div>
<div id="A2.p2" class="ltx_para">
<p id="A2.p2.1" class="ltx_p"><span id="A2.p2.1.1" class="ltx_text ltx_font_typewriter">fi</span>:</p>
<ul id="A2.I1" class="ltx_itemize">
<li id="A2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I1.i1.p1" class="ltx_para">
<p id="A2.I1.i1.p1.1" class="ltx_p"><a href="https://en.wiktionary.org/wiki/Appendix:Finnish_idioms" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://en.wiktionary.org/wiki/Appendix:Finnish_idioms</a>
</p>
</div>
</li>
</ul>
</div>
<div id="A2.p3" class="ltx_para">
<p id="A2.p3.1" class="ltx_p"><span id="A2.p3.1.1" class="ltx_text ltx_font_typewriter">fr</span>:</p>
<ul id="A2.I2" class="ltx_itemize">
<li id="A2.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I2.i1.p1" class="ltx_para">
<p id="A2.I2.i1.p1.1" class="ltx_p"><a href="https://speechling.com/blog/20-most-common-french-idioms-to-get-you-talking-like-a-native/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://speechling.com/blog/20-most-common-french-idioms-to-get-you-talking-like-a-native/</a></p>
</div>
</li>
<li id="A2.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I2.i2.p1" class="ltx_para">
<p id="A2.I2.i2.p1.1" class="ltx_p"><a href="https://frenchtogether.com/french-idioms/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://frenchtogether.com/french-idioms/</a></p>
</div>
</li>
<li id="A2.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I2.i3.p1" class="ltx_para">
<p id="A2.I2.i3.p1.1" class="ltx_p"><a href="https://vidalingua.com/blog/funny-french-idioms-explained-english" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://vidalingua.com/blog/funny-french-idioms-explained-english</a></p>
</div>
</li>
</ul>
</div>
<div id="A2.p4" class="ltx_para">
<p id="A2.p4.1" class="ltx_p"><span id="A2.p4.1.1" class="ltx_text ltx_font_typewriter">ja</span>:</p>
<ul id="A2.I3" class="ltx_itemize">
<li id="A2.I3.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I3.i1.p1" class="ltx_para">
<p id="A2.I3.i1.p1.1" class="ltx_p"><a href="https://www.theintrepidguide.com/japanese-expressions-and-idioms/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://www.theintrepidguide.com/japanese-expressions-and-idioms/</a></p>
</div>
</li>
<li id="A2.I3.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I3.i2.p1" class="ltx_para">
<p id="A2.I3.i2.p1.1" class="ltx_p"><a href="https://en.wikipedia.org/wiki/Japanese_proverbs" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://en.wikipedia.org/wiki/Japanese_proverbs</a></p>
</div>
</li>
<li id="A2.I3.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I3.i3.p1" class="ltx_para">
<p id="A2.I3.i3.p1.1" class="ltx_p"><a href="https://www.fluentu.com/blog/japanese/japanese-idioms-2/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://www.fluentu.com/blog/japanese/japanese-idioms-2/</a></p>
</div>
</li>
<li id="A2.I3.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A2.I3.i4.p1" class="ltx_para">
<p id="A2.I3.i4.p1.1" class="ltx_p"><a href="https://kotowaza.jitenon.jp/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://kotowaza.jitenon.jp/</a></p>
</div>
</li>
</ul>
</div>
</section>
<section id="A3" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>OpenSubtitles Training Details</h2>

<div id="A3.p1" class="ltx_para">
<p id="A3.p1.1" class="ltx_p">A separate <span id="A3.p1.1.1" class="ltx_text ltx_font_typewriter">deltalm-base</span> was trained from the pretrained model for 2M steps on each language. The Adam optimizer was used <cite class="ltx_cite ltx_citemacro_cite">Kingma and Ba (<a href="#bib.bib19" title="" class="ltx_ref">2017</a>)</cite>, with a learning rate of 1e-4, betas of (0.9, 0.98), and an inverse square root learning rate scheduler with 4000 warmup updates (with a warmup learning rate of 1e-7, and a minimum learning rate of 1e-9). The maximum number of tokens in a batch was set to 1024, with maximum source and target lengths of 512. Label smoothing of 0.1 was used, and the loss function used was cross-entropy.</p>
</div>
<div id="A3.p2" class="ltx_para">
<p id="A3.p2.2" class="ltx_p">For upweighting experiments, the upweight coefficient for each language was found through a hyperparameter search on the validation set over <math id="A3.p2.1.m1.4" class="ltx_Math" alttext="\alpha\in\{3,5,10,50\}" display="inline"><semantics id="A3.p2.1.m1.4a"><mrow id="A3.p2.1.m1.4.5" xref="A3.p2.1.m1.4.5.cmml"><mi id="A3.p2.1.m1.4.5.2" xref="A3.p2.1.m1.4.5.2.cmml">α</mi><mo id="A3.p2.1.m1.4.5.1" xref="A3.p2.1.m1.4.5.1.cmml">∈</mo><mrow id="A3.p2.1.m1.4.5.3.2" xref="A3.p2.1.m1.4.5.3.1.cmml"><mo stretchy="false" id="A3.p2.1.m1.4.5.3.2.1" xref="A3.p2.1.m1.4.5.3.1.cmml">{</mo><mn id="A3.p2.1.m1.1.1" xref="A3.p2.1.m1.1.1.cmml">3</mn><mo id="A3.p2.1.m1.4.5.3.2.2" xref="A3.p2.1.m1.4.5.3.1.cmml">,</mo><mn id="A3.p2.1.m1.2.2" xref="A3.p2.1.m1.2.2.cmml">5</mn><mo id="A3.p2.1.m1.4.5.3.2.3" xref="A3.p2.1.m1.4.5.3.1.cmml">,</mo><mn id="A3.p2.1.m1.3.3" xref="A3.p2.1.m1.3.3.cmml">10</mn><mo id="A3.p2.1.m1.4.5.3.2.4" xref="A3.p2.1.m1.4.5.3.1.cmml">,</mo><mn id="A3.p2.1.m1.4.4" xref="A3.p2.1.m1.4.4.cmml">50</mn><mo stretchy="false" id="A3.p2.1.m1.4.5.3.2.5" xref="A3.p2.1.m1.4.5.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.p2.1.m1.4b"><apply id="A3.p2.1.m1.4.5.cmml" xref="A3.p2.1.m1.4.5"><in id="A3.p2.1.m1.4.5.1.cmml" xref="A3.p2.1.m1.4.5.1"></in><ci id="A3.p2.1.m1.4.5.2.cmml" xref="A3.p2.1.m1.4.5.2">𝛼</ci><set id="A3.p2.1.m1.4.5.3.1.cmml" xref="A3.p2.1.m1.4.5.3.2"><cn type="integer" id="A3.p2.1.m1.1.1.cmml" xref="A3.p2.1.m1.1.1">3</cn><cn type="integer" id="A3.p2.1.m1.2.2.cmml" xref="A3.p2.1.m1.2.2">5</cn><cn type="integer" id="A3.p2.1.m1.3.3.cmml" xref="A3.p2.1.m1.3.3">10</cn><cn type="integer" id="A3.p2.1.m1.4.4.cmml" xref="A3.p2.1.m1.4.4">50</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p2.1.m1.4c">\alpha\in\{3,5,10,50\}</annotation><annotation encoding="application/x-llamapun" id="A3.p2.1.m1.4d">italic_α ∈ { 3 , 5 , 10 , 50 }</annotation></semantics></math>. The values for each language were <math id="A3.p2.2.m2.2" class="ltx_Math" alttext="\alpha_{fi}=3,\alpha_{fr}=10,\alpha_{ja}=3" display="inline"><semantics id="A3.p2.2.m2.2a"><mrow id="A3.p2.2.m2.2.2.2" xref="A3.p2.2.m2.2.2.3.cmml"><mrow id="A3.p2.2.m2.1.1.1.1" xref="A3.p2.2.m2.1.1.1.1.cmml"><msub id="A3.p2.2.m2.1.1.1.1.2" xref="A3.p2.2.m2.1.1.1.1.2.cmml"><mi id="A3.p2.2.m2.1.1.1.1.2.2" xref="A3.p2.2.m2.1.1.1.1.2.2.cmml">α</mi><mrow id="A3.p2.2.m2.1.1.1.1.2.3" xref="A3.p2.2.m2.1.1.1.1.2.3.cmml"><mi id="A3.p2.2.m2.1.1.1.1.2.3.2" xref="A3.p2.2.m2.1.1.1.1.2.3.2.cmml">f</mi><mo id="A3.p2.2.m2.1.1.1.1.2.3.1" xref="A3.p2.2.m2.1.1.1.1.2.3.1.cmml">⁢</mo><mi id="A3.p2.2.m2.1.1.1.1.2.3.3" xref="A3.p2.2.m2.1.1.1.1.2.3.3.cmml">i</mi></mrow></msub><mo id="A3.p2.2.m2.1.1.1.1.1" xref="A3.p2.2.m2.1.1.1.1.1.cmml">=</mo><mn id="A3.p2.2.m2.1.1.1.1.3" xref="A3.p2.2.m2.1.1.1.1.3.cmml">3</mn></mrow><mo id="A3.p2.2.m2.2.2.2.3" xref="A3.p2.2.m2.2.2.3a.cmml">,</mo><mrow id="A3.p2.2.m2.2.2.2.2.2" xref="A3.p2.2.m2.2.2.2.2.3.cmml"><mrow id="A3.p2.2.m2.2.2.2.2.1.1" xref="A3.p2.2.m2.2.2.2.2.1.1.cmml"><msub id="A3.p2.2.m2.2.2.2.2.1.1.2" xref="A3.p2.2.m2.2.2.2.2.1.1.2.cmml"><mi id="A3.p2.2.m2.2.2.2.2.1.1.2.2" xref="A3.p2.2.m2.2.2.2.2.1.1.2.2.cmml">α</mi><mrow id="A3.p2.2.m2.2.2.2.2.1.1.2.3" xref="A3.p2.2.m2.2.2.2.2.1.1.2.3.cmml"><mi id="A3.p2.2.m2.2.2.2.2.1.1.2.3.2" xref="A3.p2.2.m2.2.2.2.2.1.1.2.3.2.cmml">f</mi><mo id="A3.p2.2.m2.2.2.2.2.1.1.2.3.1" xref="A3.p2.2.m2.2.2.2.2.1.1.2.3.1.cmml">⁢</mo><mi id="A3.p2.2.m2.2.2.2.2.1.1.2.3.3" xref="A3.p2.2.m2.2.2.2.2.1.1.2.3.3.cmml">r</mi></mrow></msub><mo id="A3.p2.2.m2.2.2.2.2.1.1.1" xref="A3.p2.2.m2.2.2.2.2.1.1.1.cmml">=</mo><mn id="A3.p2.2.m2.2.2.2.2.1.1.3" xref="A3.p2.2.m2.2.2.2.2.1.1.3.cmml">10</mn></mrow><mo id="A3.p2.2.m2.2.2.2.2.2.3" xref="A3.p2.2.m2.2.2.2.2.3a.cmml">,</mo><mrow id="A3.p2.2.m2.2.2.2.2.2.2" xref="A3.p2.2.m2.2.2.2.2.2.2.cmml"><msub id="A3.p2.2.m2.2.2.2.2.2.2.2" xref="A3.p2.2.m2.2.2.2.2.2.2.2.cmml"><mi id="A3.p2.2.m2.2.2.2.2.2.2.2.2" xref="A3.p2.2.m2.2.2.2.2.2.2.2.2.cmml">α</mi><mrow id="A3.p2.2.m2.2.2.2.2.2.2.2.3" xref="A3.p2.2.m2.2.2.2.2.2.2.2.3.cmml"><mi id="A3.p2.2.m2.2.2.2.2.2.2.2.3.2" xref="A3.p2.2.m2.2.2.2.2.2.2.2.3.2.cmml">j</mi><mo id="A3.p2.2.m2.2.2.2.2.2.2.2.3.1" xref="A3.p2.2.m2.2.2.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="A3.p2.2.m2.2.2.2.2.2.2.2.3.3" xref="A3.p2.2.m2.2.2.2.2.2.2.2.3.3.cmml">a</mi></mrow></msub><mo id="A3.p2.2.m2.2.2.2.2.2.2.1" xref="A3.p2.2.m2.2.2.2.2.2.2.1.cmml">=</mo><mn id="A3.p2.2.m2.2.2.2.2.2.2.3" xref="A3.p2.2.m2.2.2.2.2.2.2.3.cmml">3</mn></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.p2.2.m2.2b"><apply id="A3.p2.2.m2.2.2.3.cmml" xref="A3.p2.2.m2.2.2.2"><csymbol cd="ambiguous" id="A3.p2.2.m2.2.2.3a.cmml" xref="A3.p2.2.m2.2.2.2.3">formulae-sequence</csymbol><apply id="A3.p2.2.m2.1.1.1.1.cmml" xref="A3.p2.2.m2.1.1.1.1"><eq id="A3.p2.2.m2.1.1.1.1.1.cmml" xref="A3.p2.2.m2.1.1.1.1.1"></eq><apply id="A3.p2.2.m2.1.1.1.1.2.cmml" xref="A3.p2.2.m2.1.1.1.1.2"><csymbol cd="ambiguous" id="A3.p2.2.m2.1.1.1.1.2.1.cmml" xref="A3.p2.2.m2.1.1.1.1.2">subscript</csymbol><ci id="A3.p2.2.m2.1.1.1.1.2.2.cmml" xref="A3.p2.2.m2.1.1.1.1.2.2">𝛼</ci><apply id="A3.p2.2.m2.1.1.1.1.2.3.cmml" xref="A3.p2.2.m2.1.1.1.1.2.3"><times id="A3.p2.2.m2.1.1.1.1.2.3.1.cmml" xref="A3.p2.2.m2.1.1.1.1.2.3.1"></times><ci id="A3.p2.2.m2.1.1.1.1.2.3.2.cmml" xref="A3.p2.2.m2.1.1.1.1.2.3.2">𝑓</ci><ci id="A3.p2.2.m2.1.1.1.1.2.3.3.cmml" xref="A3.p2.2.m2.1.1.1.1.2.3.3">𝑖</ci></apply></apply><cn type="integer" id="A3.p2.2.m2.1.1.1.1.3.cmml" xref="A3.p2.2.m2.1.1.1.1.3">3</cn></apply><apply id="A3.p2.2.m2.2.2.2.2.3.cmml" xref="A3.p2.2.m2.2.2.2.2.2"><csymbol cd="ambiguous" id="A3.p2.2.m2.2.2.2.2.3a.cmml" xref="A3.p2.2.m2.2.2.2.2.2.3">formulae-sequence</csymbol><apply id="A3.p2.2.m2.2.2.2.2.1.1.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1"><eq id="A3.p2.2.m2.2.2.2.2.1.1.1.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.1"></eq><apply id="A3.p2.2.m2.2.2.2.2.1.1.2.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.2"><csymbol cd="ambiguous" id="A3.p2.2.m2.2.2.2.2.1.1.2.1.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.2">subscript</csymbol><ci id="A3.p2.2.m2.2.2.2.2.1.1.2.2.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.2.2">𝛼</ci><apply id="A3.p2.2.m2.2.2.2.2.1.1.2.3.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.2.3"><times id="A3.p2.2.m2.2.2.2.2.1.1.2.3.1.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.2.3.1"></times><ci id="A3.p2.2.m2.2.2.2.2.1.1.2.3.2.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.2.3.2">𝑓</ci><ci id="A3.p2.2.m2.2.2.2.2.1.1.2.3.3.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.2.3.3">𝑟</ci></apply></apply><cn type="integer" id="A3.p2.2.m2.2.2.2.2.1.1.3.cmml" xref="A3.p2.2.m2.2.2.2.2.1.1.3">10</cn></apply><apply id="A3.p2.2.m2.2.2.2.2.2.2.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2"><eq id="A3.p2.2.m2.2.2.2.2.2.2.1.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.1"></eq><apply id="A3.p2.2.m2.2.2.2.2.2.2.2.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="A3.p2.2.m2.2.2.2.2.2.2.2.1.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.2">subscript</csymbol><ci id="A3.p2.2.m2.2.2.2.2.2.2.2.2.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.2.2">𝛼</ci><apply id="A3.p2.2.m2.2.2.2.2.2.2.2.3.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.2.3"><times id="A3.p2.2.m2.2.2.2.2.2.2.2.3.1.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.2.3.1"></times><ci id="A3.p2.2.m2.2.2.2.2.2.2.2.3.2.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.2.3.2">𝑗</ci><ci id="A3.p2.2.m2.2.2.2.2.2.2.2.3.3.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.2.3.3">𝑎</ci></apply></apply><cn type="integer" id="A3.p2.2.m2.2.2.2.2.2.2.3.cmml" xref="A3.p2.2.m2.2.2.2.2.2.2.3">3</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p2.2.m2.2c">\alpha_{fi}=3,\alpha_{fr}=10,\alpha_{ja}=3</annotation><annotation encoding="application/x-llamapun" id="A3.p2.2.m2.2d">italic_α start_POSTSUBSCRIPT italic_f italic_i end_POSTSUBSCRIPT = 3 , italic_α start_POSTSUBSCRIPT italic_f italic_r end_POSTSUBSCRIPT = 10 , italic_α start_POSTSUBSCRIPT italic_j italic_a end_POSTSUBSCRIPT = 3</annotation></semantics></math>.</p>
</div>
<div id="A3.p3" class="ltx_para">
<p id="A3.p3.3" class="ltx_p">For kNN-MT, three datastores were built for approximate kNN search using the training set from OpenSubtitles. These datastores were built with the <span id="A3.p3.3.1" class="ltx_text ltx_font_typewriter">faiss</span> library <cite class="ltx_cite ltx_citemacro_cite">Johnson et al. (<a href="#bib.bib16" title="" class="ltx_ref">2019</a>)</cite>. The Finnish datastore contained 248M vectors with 507k centroids, while the French datastore contained 348M with 713k centroids, and the Japanese datastore 17.8M with 73k centroids. All vectors were stored in <span id="A3.p3.3.2" class="ltx_text ltx_font_typewriter">fp16</span> with a code size of 32. The vectors used as keys in the datastore correspond to the <span id="A3.p3.3.3" class="ltx_text ltx_font_italic">input</span> to the last feedforward layer. Additionally, a hyperparameter search for each language was carried out on the validation set, over values of <math id="A3.p3.1.m1.4" class="ltx_Math" alttext="\lambda\in\{0.2,0.4,0.6,0.8\}" display="inline"><semantics id="A3.p3.1.m1.4a"><mrow id="A3.p3.1.m1.4.5" xref="A3.p3.1.m1.4.5.cmml"><mi id="A3.p3.1.m1.4.5.2" xref="A3.p3.1.m1.4.5.2.cmml">λ</mi><mo id="A3.p3.1.m1.4.5.1" xref="A3.p3.1.m1.4.5.1.cmml">∈</mo><mrow id="A3.p3.1.m1.4.5.3.2" xref="A3.p3.1.m1.4.5.3.1.cmml"><mo stretchy="false" id="A3.p3.1.m1.4.5.3.2.1" xref="A3.p3.1.m1.4.5.3.1.cmml">{</mo><mn id="A3.p3.1.m1.1.1" xref="A3.p3.1.m1.1.1.cmml">0.2</mn><mo id="A3.p3.1.m1.4.5.3.2.2" xref="A3.p3.1.m1.4.5.3.1.cmml">,</mo><mn id="A3.p3.1.m1.2.2" xref="A3.p3.1.m1.2.2.cmml">0.4</mn><mo id="A3.p3.1.m1.4.5.3.2.3" xref="A3.p3.1.m1.4.5.3.1.cmml">,</mo><mn id="A3.p3.1.m1.3.3" xref="A3.p3.1.m1.3.3.cmml">0.6</mn><mo id="A3.p3.1.m1.4.5.3.2.4" xref="A3.p3.1.m1.4.5.3.1.cmml">,</mo><mn id="A3.p3.1.m1.4.4" xref="A3.p3.1.m1.4.4.cmml">0.8</mn><mo stretchy="false" id="A3.p3.1.m1.4.5.3.2.5" xref="A3.p3.1.m1.4.5.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.p3.1.m1.4b"><apply id="A3.p3.1.m1.4.5.cmml" xref="A3.p3.1.m1.4.5"><in id="A3.p3.1.m1.4.5.1.cmml" xref="A3.p3.1.m1.4.5.1"></in><ci id="A3.p3.1.m1.4.5.2.cmml" xref="A3.p3.1.m1.4.5.2">𝜆</ci><set id="A3.p3.1.m1.4.5.3.1.cmml" xref="A3.p3.1.m1.4.5.3.2"><cn type="float" id="A3.p3.1.m1.1.1.cmml" xref="A3.p3.1.m1.1.1">0.2</cn><cn type="float" id="A3.p3.1.m1.2.2.cmml" xref="A3.p3.1.m1.2.2">0.4</cn><cn type="float" id="A3.p3.1.m1.3.3.cmml" xref="A3.p3.1.m1.3.3">0.6</cn><cn type="float" id="A3.p3.1.m1.4.4.cmml" xref="A3.p3.1.m1.4.4">0.8</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p3.1.m1.4c">\lambda\in\{0.2,0.4,0.6,0.8\}</annotation><annotation encoding="application/x-llamapun" id="A3.p3.1.m1.4d">italic_λ ∈ { 0.2 , 0.4 , 0.6 , 0.8 }</annotation></semantics></math>, temperature <math id="A3.p3.2.m2.3" class="ltx_Math" alttext="\in\{0.1,1,10\}" display="inline"><semantics id="A3.p3.2.m2.3a"><mrow id="A3.p3.2.m2.3.4" xref="A3.p3.2.m2.3.4.cmml"><mi id="A3.p3.2.m2.3.4.2" xref="A3.p3.2.m2.3.4.2.cmml"></mi><mo id="A3.p3.2.m2.3.4.1" xref="A3.p3.2.m2.3.4.1.cmml">∈</mo><mrow id="A3.p3.2.m2.3.4.3.2" xref="A3.p3.2.m2.3.4.3.1.cmml"><mo stretchy="false" id="A3.p3.2.m2.3.4.3.2.1" xref="A3.p3.2.m2.3.4.3.1.cmml">{</mo><mn id="A3.p3.2.m2.1.1" xref="A3.p3.2.m2.1.1.cmml">0.1</mn><mo id="A3.p3.2.m2.3.4.3.2.2" xref="A3.p3.2.m2.3.4.3.1.cmml">,</mo><mn id="A3.p3.2.m2.2.2" xref="A3.p3.2.m2.2.2.cmml">1</mn><mo id="A3.p3.2.m2.3.4.3.2.3" xref="A3.p3.2.m2.3.4.3.1.cmml">,</mo><mn id="A3.p3.2.m2.3.3" xref="A3.p3.2.m2.3.3.cmml">10</mn><mo stretchy="false" id="A3.p3.2.m2.3.4.3.2.4" xref="A3.p3.2.m2.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.p3.2.m2.3b"><apply id="A3.p3.2.m2.3.4.cmml" xref="A3.p3.2.m2.3.4"><in id="A3.p3.2.m2.3.4.1.cmml" xref="A3.p3.2.m2.3.4.1"></in><csymbol cd="latexml" id="A3.p3.2.m2.3.4.2.cmml" xref="A3.p3.2.m2.3.4.2">absent</csymbol><set id="A3.p3.2.m2.3.4.3.1.cmml" xref="A3.p3.2.m2.3.4.3.2"><cn type="float" id="A3.p3.2.m2.1.1.cmml" xref="A3.p3.2.m2.1.1">0.1</cn><cn type="integer" id="A3.p3.2.m2.2.2.cmml" xref="A3.p3.2.m2.2.2">1</cn><cn type="integer" id="A3.p3.2.m2.3.3.cmml" xref="A3.p3.2.m2.3.3">10</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p3.2.m2.3c">\in\{0.1,1,10\}</annotation><annotation encoding="application/x-llamapun" id="A3.p3.2.m2.3d">∈ { 0.1 , 1 , 10 }</annotation></semantics></math>, and number of retrieved neighbours <math id="A3.p3.3.m3.4" class="ltx_Math" alttext="\in\{5,10,15,20\}" display="inline"><semantics id="A3.p3.3.m3.4a"><mrow id="A3.p3.3.m3.4.5" xref="A3.p3.3.m3.4.5.cmml"><mi id="A3.p3.3.m3.4.5.2" xref="A3.p3.3.m3.4.5.2.cmml"></mi><mo id="A3.p3.3.m3.4.5.1" xref="A3.p3.3.m3.4.5.1.cmml">∈</mo><mrow id="A3.p3.3.m3.4.5.3.2" xref="A3.p3.3.m3.4.5.3.1.cmml"><mo stretchy="false" id="A3.p3.3.m3.4.5.3.2.1" xref="A3.p3.3.m3.4.5.3.1.cmml">{</mo><mn id="A3.p3.3.m3.1.1" xref="A3.p3.3.m3.1.1.cmml">5</mn><mo id="A3.p3.3.m3.4.5.3.2.2" xref="A3.p3.3.m3.4.5.3.1.cmml">,</mo><mn id="A3.p3.3.m3.2.2" xref="A3.p3.3.m3.2.2.cmml">10</mn><mo id="A3.p3.3.m3.4.5.3.2.3" xref="A3.p3.3.m3.4.5.3.1.cmml">,</mo><mn id="A3.p3.3.m3.3.3" xref="A3.p3.3.m3.3.3.cmml">15</mn><mo id="A3.p3.3.m3.4.5.3.2.4" xref="A3.p3.3.m3.4.5.3.1.cmml">,</mo><mn id="A3.p3.3.m3.4.4" xref="A3.p3.3.m3.4.4.cmml">20</mn><mo stretchy="false" id="A3.p3.3.m3.4.5.3.2.5" xref="A3.p3.3.m3.4.5.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.p3.3.m3.4b"><apply id="A3.p3.3.m3.4.5.cmml" xref="A3.p3.3.m3.4.5"><in id="A3.p3.3.m3.4.5.1.cmml" xref="A3.p3.3.m3.4.5.1"></in><csymbol cd="latexml" id="A3.p3.3.m3.4.5.2.cmml" xref="A3.p3.3.m3.4.5.2">absent</csymbol><set id="A3.p3.3.m3.4.5.3.1.cmml" xref="A3.p3.3.m3.4.5.3.2"><cn type="integer" id="A3.p3.3.m3.1.1.cmml" xref="A3.p3.3.m3.1.1">5</cn><cn type="integer" id="A3.p3.3.m3.2.2.cmml" xref="A3.p3.3.m3.2.2">10</cn><cn type="integer" id="A3.p3.3.m3.3.3.cmml" xref="A3.p3.3.m3.3.3">15</cn><cn type="integer" id="A3.p3.3.m3.4.4.cmml" xref="A3.p3.3.m3.4.4">20</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p3.3.m3.4c">\in\{5,10,15,20\}</annotation><annotation encoding="application/x-llamapun" id="A3.p3.3.m3.4d">∈ { 5 , 10 , 15 , 20 }</annotation></semantics></math>. Hyperparameters were selected based on BLEU score on the validation set.</p>
</div>
<div id="A3.p4" class="ltx_para">
<p id="A3.p4.9" class="ltx_p">The best hyperparameters were as follows: <span id="A3.p4.9.1" class="ltx_text ltx_font_typewriter">fi</span>: (<math id="A3.p4.1.m1.1" class="ltx_Math" alttext="\lambda=0.4" display="inline"><semantics id="A3.p4.1.m1.1a"><mrow id="A3.p4.1.m1.1.1" xref="A3.p4.1.m1.1.1.cmml"><mi id="A3.p4.1.m1.1.1.2" xref="A3.p4.1.m1.1.1.2.cmml">λ</mi><mo id="A3.p4.1.m1.1.1.1" xref="A3.p4.1.m1.1.1.1.cmml">=</mo><mn id="A3.p4.1.m1.1.1.3" xref="A3.p4.1.m1.1.1.3.cmml">0.4</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.1.m1.1b"><apply id="A3.p4.1.m1.1.1.cmml" xref="A3.p4.1.m1.1.1"><eq id="A3.p4.1.m1.1.1.1.cmml" xref="A3.p4.1.m1.1.1.1"></eq><ci id="A3.p4.1.m1.1.1.2.cmml" xref="A3.p4.1.m1.1.1.2">𝜆</ci><cn type="float" id="A3.p4.1.m1.1.1.3.cmml" xref="A3.p4.1.m1.1.1.3">0.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.1.m1.1c">\lambda=0.4</annotation><annotation encoding="application/x-llamapun" id="A3.p4.1.m1.1d">italic_λ = 0.4</annotation></semantics></math>, <math id="A3.p4.2.m2.1" class="ltx_Math" alttext="\text{temp}=10" display="inline"><semantics id="A3.p4.2.m2.1a"><mrow id="A3.p4.2.m2.1.1" xref="A3.p4.2.m2.1.1.cmml"><mtext id="A3.p4.2.m2.1.1.2" xref="A3.p4.2.m2.1.1.2a.cmml">temp</mtext><mo id="A3.p4.2.m2.1.1.1" xref="A3.p4.2.m2.1.1.1.cmml">=</mo><mn id="A3.p4.2.m2.1.1.3" xref="A3.p4.2.m2.1.1.3.cmml">10</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.2.m2.1b"><apply id="A3.p4.2.m2.1.1.cmml" xref="A3.p4.2.m2.1.1"><eq id="A3.p4.2.m2.1.1.1.cmml" xref="A3.p4.2.m2.1.1.1"></eq><ci id="A3.p4.2.m2.1.1.2a.cmml" xref="A3.p4.2.m2.1.1.2"><mtext id="A3.p4.2.m2.1.1.2.cmml" xref="A3.p4.2.m2.1.1.2">temp</mtext></ci><cn type="integer" id="A3.p4.2.m2.1.1.3.cmml" xref="A3.p4.2.m2.1.1.3">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.2.m2.1c">\text{temp}=10</annotation><annotation encoding="application/x-llamapun" id="A3.p4.2.m2.1d">temp = 10</annotation></semantics></math>, <math id="A3.p4.3.m3.1" class="ltx_Math" alttext="\text{num neighbours}=20" display="inline"><semantics id="A3.p4.3.m3.1a"><mrow id="A3.p4.3.m3.1.1" xref="A3.p4.3.m3.1.1.cmml"><mtext id="A3.p4.3.m3.1.1.2" xref="A3.p4.3.m3.1.1.2a.cmml">num neighbours</mtext><mo id="A3.p4.3.m3.1.1.1" xref="A3.p4.3.m3.1.1.1.cmml">=</mo><mn id="A3.p4.3.m3.1.1.3" xref="A3.p4.3.m3.1.1.3.cmml">20</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.3.m3.1b"><apply id="A3.p4.3.m3.1.1.cmml" xref="A3.p4.3.m3.1.1"><eq id="A3.p4.3.m3.1.1.1.cmml" xref="A3.p4.3.m3.1.1.1"></eq><ci id="A3.p4.3.m3.1.1.2a.cmml" xref="A3.p4.3.m3.1.1.2"><mtext id="A3.p4.3.m3.1.1.2.cmml" xref="A3.p4.3.m3.1.1.2">num neighbours</mtext></ci><cn type="integer" id="A3.p4.3.m3.1.1.3.cmml" xref="A3.p4.3.m3.1.1.3">20</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.3.m3.1c">\text{num neighbours}=20</annotation><annotation encoding="application/x-llamapun" id="A3.p4.3.m3.1d">num neighbours = 20</annotation></semantics></math>), <span id="A3.p4.9.2" class="ltx_text ltx_font_typewriter">fr</span>: (<math id="A3.p4.4.m4.1" class="ltx_Math" alttext="\lambda=0.2" display="inline"><semantics id="A3.p4.4.m4.1a"><mrow id="A3.p4.4.m4.1.1" xref="A3.p4.4.m4.1.1.cmml"><mi id="A3.p4.4.m4.1.1.2" xref="A3.p4.4.m4.1.1.2.cmml">λ</mi><mo id="A3.p4.4.m4.1.1.1" xref="A3.p4.4.m4.1.1.1.cmml">=</mo><mn id="A3.p4.4.m4.1.1.3" xref="A3.p4.4.m4.1.1.3.cmml">0.2</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.4.m4.1b"><apply id="A3.p4.4.m4.1.1.cmml" xref="A3.p4.4.m4.1.1"><eq id="A3.p4.4.m4.1.1.1.cmml" xref="A3.p4.4.m4.1.1.1"></eq><ci id="A3.p4.4.m4.1.1.2.cmml" xref="A3.p4.4.m4.1.1.2">𝜆</ci><cn type="float" id="A3.p4.4.m4.1.1.3.cmml" xref="A3.p4.4.m4.1.1.3">0.2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.4.m4.1c">\lambda=0.2</annotation><annotation encoding="application/x-llamapun" id="A3.p4.4.m4.1d">italic_λ = 0.2</annotation></semantics></math>, <math id="A3.p4.5.m5.1" class="ltx_Math" alttext="\text{temp}=10" display="inline"><semantics id="A3.p4.5.m5.1a"><mrow id="A3.p4.5.m5.1.1" xref="A3.p4.5.m5.1.1.cmml"><mtext id="A3.p4.5.m5.1.1.2" xref="A3.p4.5.m5.1.1.2a.cmml">temp</mtext><mo id="A3.p4.5.m5.1.1.1" xref="A3.p4.5.m5.1.1.1.cmml">=</mo><mn id="A3.p4.5.m5.1.1.3" xref="A3.p4.5.m5.1.1.3.cmml">10</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.5.m5.1b"><apply id="A3.p4.5.m5.1.1.cmml" xref="A3.p4.5.m5.1.1"><eq id="A3.p4.5.m5.1.1.1.cmml" xref="A3.p4.5.m5.1.1.1"></eq><ci id="A3.p4.5.m5.1.1.2a.cmml" xref="A3.p4.5.m5.1.1.2"><mtext id="A3.p4.5.m5.1.1.2.cmml" xref="A3.p4.5.m5.1.1.2">temp</mtext></ci><cn type="integer" id="A3.p4.5.m5.1.1.3.cmml" xref="A3.p4.5.m5.1.1.3">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.5.m5.1c">\text{temp}=10</annotation><annotation encoding="application/x-llamapun" id="A3.p4.5.m5.1d">temp = 10</annotation></semantics></math>, <math id="A3.p4.6.m6.1" class="ltx_Math" alttext="\text{num neighbours}=20" display="inline"><semantics id="A3.p4.6.m6.1a"><mrow id="A3.p4.6.m6.1.1" xref="A3.p4.6.m6.1.1.cmml"><mtext id="A3.p4.6.m6.1.1.2" xref="A3.p4.6.m6.1.1.2a.cmml">num neighbours</mtext><mo id="A3.p4.6.m6.1.1.1" xref="A3.p4.6.m6.1.1.1.cmml">=</mo><mn id="A3.p4.6.m6.1.1.3" xref="A3.p4.6.m6.1.1.3.cmml">20</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.6.m6.1b"><apply id="A3.p4.6.m6.1.1.cmml" xref="A3.p4.6.m6.1.1"><eq id="A3.p4.6.m6.1.1.1.cmml" xref="A3.p4.6.m6.1.1.1"></eq><ci id="A3.p4.6.m6.1.1.2a.cmml" xref="A3.p4.6.m6.1.1.2"><mtext id="A3.p4.6.m6.1.1.2.cmml" xref="A3.p4.6.m6.1.1.2">num neighbours</mtext></ci><cn type="integer" id="A3.p4.6.m6.1.1.3.cmml" xref="A3.p4.6.m6.1.1.3">20</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.6.m6.1c">\text{num neighbours}=20</annotation><annotation encoding="application/x-llamapun" id="A3.p4.6.m6.1d">num neighbours = 20</annotation></semantics></math>), <span id="A3.p4.9.3" class="ltx_text ltx_font_typewriter">ja</span>: (<math id="A3.p4.7.m7.1" class="ltx_Math" alttext="\lambda=0.4" display="inline"><semantics id="A3.p4.7.m7.1a"><mrow id="A3.p4.7.m7.1.1" xref="A3.p4.7.m7.1.1.cmml"><mi id="A3.p4.7.m7.1.1.2" xref="A3.p4.7.m7.1.1.2.cmml">λ</mi><mo id="A3.p4.7.m7.1.1.1" xref="A3.p4.7.m7.1.1.1.cmml">=</mo><mn id="A3.p4.7.m7.1.1.3" xref="A3.p4.7.m7.1.1.3.cmml">0.4</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.7.m7.1b"><apply id="A3.p4.7.m7.1.1.cmml" xref="A3.p4.7.m7.1.1"><eq id="A3.p4.7.m7.1.1.1.cmml" xref="A3.p4.7.m7.1.1.1"></eq><ci id="A3.p4.7.m7.1.1.2.cmml" xref="A3.p4.7.m7.1.1.2">𝜆</ci><cn type="float" id="A3.p4.7.m7.1.1.3.cmml" xref="A3.p4.7.m7.1.1.3">0.4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.7.m7.1c">\lambda=0.4</annotation><annotation encoding="application/x-llamapun" id="A3.p4.7.m7.1d">italic_λ = 0.4</annotation></semantics></math>, <math id="A3.p4.8.m8.1" class="ltx_Math" alttext="\text{temp}=10" display="inline"><semantics id="A3.p4.8.m8.1a"><mrow id="A3.p4.8.m8.1.1" xref="A3.p4.8.m8.1.1.cmml"><mtext id="A3.p4.8.m8.1.1.2" xref="A3.p4.8.m8.1.1.2a.cmml">temp</mtext><mo id="A3.p4.8.m8.1.1.1" xref="A3.p4.8.m8.1.1.1.cmml">=</mo><mn id="A3.p4.8.m8.1.1.3" xref="A3.p4.8.m8.1.1.3.cmml">10</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.8.m8.1b"><apply id="A3.p4.8.m8.1.1.cmml" xref="A3.p4.8.m8.1.1"><eq id="A3.p4.8.m8.1.1.1.cmml" xref="A3.p4.8.m8.1.1.1"></eq><ci id="A3.p4.8.m8.1.1.2a.cmml" xref="A3.p4.8.m8.1.1.2"><mtext id="A3.p4.8.m8.1.1.2.cmml" xref="A3.p4.8.m8.1.1.2">temp</mtext></ci><cn type="integer" id="A3.p4.8.m8.1.1.3.cmml" xref="A3.p4.8.m8.1.1.3">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.8.m8.1c">\text{temp}=10</annotation><annotation encoding="application/x-llamapun" id="A3.p4.8.m8.1d">temp = 10</annotation></semantics></math>, <math id="A3.p4.9.m9.1" class="ltx_Math" alttext="\text{num neighbours}=20" display="inline"><semantics id="A3.p4.9.m9.1a"><mrow id="A3.p4.9.m9.1.1" xref="A3.p4.9.m9.1.1.cmml"><mtext id="A3.p4.9.m9.1.1.2" xref="A3.p4.9.m9.1.1.2a.cmml">num neighbours</mtext><mo id="A3.p4.9.m9.1.1.1" xref="A3.p4.9.m9.1.1.1.cmml">=</mo><mn id="A3.p4.9.m9.1.1.3" xref="A3.p4.9.m9.1.1.3.cmml">20</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.p4.9.m9.1b"><apply id="A3.p4.9.m9.1.1.cmml" xref="A3.p4.9.m9.1.1"><eq id="A3.p4.9.m9.1.1.1.cmml" xref="A3.p4.9.m9.1.1.1"></eq><ci id="A3.p4.9.m9.1.1.2a.cmml" xref="A3.p4.9.m9.1.1.2"><mtext id="A3.p4.9.m9.1.1.2.cmml" xref="A3.p4.9.m9.1.1.2">num neighbours</mtext></ci><cn type="integer" id="A3.p4.9.m9.1.1.3.cmml" xref="A3.p4.9.m9.1.1.3">20</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.p4.9.m9.1c">\text{num neighbours}=20</annotation><annotation encoding="application/x-llamapun" id="A3.p4.9.m9.1d">num neighbours = 20</annotation></semantics></math>)
During test time, the best hyperparameters for each language were used, with a probe size of 20 and beam size of 5.</p>
</div>
<div id="A3.p5" class="ltx_para">
<p id="A3.p5.1" class="ltx_p">Experiments with <math id="A3.p5.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="A3.p5.1.m1.1a"><mi mathvariant="normal" id="A3.p5.1.m1.1.1" xref="A3.p5.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="A3.p5.1.m1.1b"><ci id="A3.p5.1.m1.1.1.cmml" xref="A3.p5.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.p5.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="A3.p5.1.m1.1d">roman_Δ</annotation></semantics></math>LM and kNN-MT were implemented in fairseq (version from September 2021) <cite class="ltx_cite ltx_citemacro_cite">Ott et al. (<a href="#bib.bib30" title="" class="ltx_ref">2019</a>)</cite>.</p>
</div>
</section>
<section id="A4" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix D </span>Native Annotator Recruiting</h2>

<div id="A4.p1" class="ltx_para">
<p id="A4.p1.1" class="ltx_p">Annotators were hired through Upwork, and consisted of professional translators in French and Finnish who were also fluent in English. Annotators were paid between <math id="A4.p1.1.m1.1" class="ltx_Math" alttext="\$10-25" display="inline"><semantics id="A4.p1.1.m1.1a"><mrow id="A4.p1.1.m1.1.1" xref="A4.p1.1.m1.1.1.cmml"><mrow id="A4.p1.1.m1.1.1.2" xref="A4.p1.1.m1.1.1.2.cmml"><mo rspace="0.167em" id="A4.p1.1.m1.1.1.2.1" xref="A4.p1.1.m1.1.1.2.1.cmml">$</mo><mn id="A4.p1.1.m1.1.1.2.2" xref="A4.p1.1.m1.1.1.2.2.cmml">10</mn></mrow><mo id="A4.p1.1.m1.1.1.1" xref="A4.p1.1.m1.1.1.1.cmml">−</mo><mn id="A4.p1.1.m1.1.1.3" xref="A4.p1.1.m1.1.1.3.cmml">25</mn></mrow><annotation-xml encoding="MathML-Content" id="A4.p1.1.m1.1b"><apply id="A4.p1.1.m1.1.1.cmml" xref="A4.p1.1.m1.1.1"><minus id="A4.p1.1.m1.1.1.1.cmml" xref="A4.p1.1.m1.1.1.1"></minus><apply id="A4.p1.1.m1.1.1.2.cmml" xref="A4.p1.1.m1.1.1.2"><csymbol cd="latexml" id="A4.p1.1.m1.1.1.2.1.cmml" xref="A4.p1.1.m1.1.1.2.1">currency-dollar</csymbol><cn type="integer" id="A4.p1.1.m1.1.1.2.2.cmml" xref="A4.p1.1.m1.1.1.2.2">10</cn></apply><cn type="integer" id="A4.p1.1.m1.1.1.3.cmml" xref="A4.p1.1.m1.1.1.3">25</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A4.p1.1.m1.1c">\$10-25</annotation><annotation encoding="application/x-llamapun" id="A4.p1.1.m1.1d">$ 10 - 25</annotation></semantics></math>USD an hour, depending on their individual hourly rate. No personally identifying information was collected.</p>
</div>
<div id="A4.p2" class="ltx_para">
<p id="A4.p2.1" class="ltx_p">Annotators were shown the task description below, and also had access to a compiled list of literal and figurative translations for each idiom.</p>
</div>
<div id="A4.p3" class="ltx_para">
<p id="A4.p3.1" class="ltx_p"><span id="A4.p3.1.1" class="ltx_text ltx_font_bold">Description:</span></p>
</div>
<div id="A4.p4" class="ltx_para ltx_noindent">
<p id="A4.p4.1" class="ltx_p"><span id="A4.p4.1.1" class="ltx_text ltx_framed_rectangle" style="border-color: black;">
<span id="A4.p4.1.1.1" class="ltx_inline-block ltx_parbox ltx_align_middle" style="width:433.6pt;">
<span id="A4.p4.1.1.1.1" class="ltx_p">This job is to create a dataset that will allow us (researchers at Carnegie Mellon University, PI Graham Neubig) to study the ability of machine translation systems to translate idioms.</span>
<span id="A4.p4.1.1.1.2" class="ltx_p">We would like you to look at translations and decide whether they are literal or idiomatic translations. These will be English sentences containing the translation of a sentence in either French, Finnish, or Japanese. All the sentences contain a phrase that is an idiom in the foreign language, but sometimes the translations may be meant literally. As an example, in English “kick the bucket” can mean to die when used in an idiomatic way, or to literally kick a bucket when used in a literal way. You should mark the example with “idiomatic” if you think it’s an idiomatic example, or “literal” if you think it’s a literal example.</span>
<span id="A4.p4.1.1.1.3" class="ltx_p">If you think the translation is not a good translation, we will ask you to mark this entry with the word “None”, but this should occur in relatively few cases.</span>
<span id="A4.p4.1.1.1.4" class="ltx_p">We estimate that the job will take 2-3 hours overall.</span>
<span id="A4.p4.1.1.1.5" class="ltx_p">Examples:</span>
<span id="A4.p4.1.1.1.6" class="ltx_p">Original sentence: Jalkaväkeä oli pilvin pimein.
English translation (reference): Arty and infantry just kept on coming.
Contains idiom: pilvin pimein
Idiom literal meaning: In dark clouds
Idiom figurative meaning: A huge (often excessive) amount of something.
Label: idiomatic</span>
<span id="A4.p4.1.1.1.7" class="ltx_p">Original sentence: Harmi, ettei lehdistötilaisuudessasi ollut lammasta.
English translation (reference): Too bad they didn’t have lamb at your press conference, Francis.
Contains idiom: olla lammas
Idiom literal meaning: To be a lamb
Idiom figurative meaning: a person who is like a lamb does nothing alone. the person does
Label: literal</span>
</span></span></p>
</div>
</section>
<section id="A5" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix E </span>Standards for Human Evaluation</h2>

<div id="A5.p1" class="ltx_para">
<p id="A5.p1.1" class="ltx_p">Evaluation standards were based on MQM standards, in particular the major and critical severity levels, which are defined below <cite class="ltx_cite ltx_citemacro_cite">Lommel et al. (<a href="#bib.bib24" title="" class="ltx_ref">2014</a>)</cite>:</p>
</div>
<div id="A5.p2" class="ltx_para">
<ul id="A5.I1" class="ltx_itemize">
<li id="A5.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A5.I1.i1.p1" class="ltx_para">
<p id="A5.I1.i1.p1.1" class="ltx_p"><span id="A5.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">Major severity error</span>: severity level of an error that seriously affects the understandability, reliability, or usability of the content for its intended purpose or hinders the proper use of the product or service due to a significant loss or change in meaning or because the error appears in a highly visible or important part of the content.</p>
</div>
</li>
<li id="A5.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="A5.I1.i2.p1" class="ltx_para">
<p id="A5.I1.i2.p1.1" class="ltx_p"><span id="A5.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">Critical severity level</span>: severity level of an error that renders the entire content unfit for purpose or poses the risk for serious physical, financial, or reputational harm.</p>
</div>
</li>
</ul>
</div>
<div id="A5.p3" class="ltx_para">
<p id="A5.p3.1" class="ltx_p">We slightly adapted this for idioms, where if it was possible to infer the meaning of a sentence through the existence of a similar English idiom, but it would not be something generally said by English speakers, we assigned a major severity. Due to <math id="A5.p3.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="A5.p3.1.m1.1a"><mi mathvariant="normal" id="A5.p3.1.m1.1.1" xref="A5.p3.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="A5.p3.1.m1.1b"><ci id="A5.p3.1.m1.1.1.cmml" xref="A5.p3.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="A5.p3.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="A5.p3.1.m1.1d">roman_Δ</annotation></semantics></math>LM often making errors with numbers and named entities, we assigned these errors a major rather than critical severity in most cases, although these would generally be critical severity errors in business documents. If part of a sentence was missing, we based the error severity on whether or not the missing portion was crucial to the intent of the sentence. Examples of sentences labelled with error severity are provided in <a href="#A5.T6" title="Table 6 ‣ Appendix E Standards for Human Evaluation ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 6</span></a>:</p>
</div>
<figure id="A5.T6" class="ltx_table">
<table id="A5.T6.3" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="A5.T6.3.1.1" class="ltx_tr">
<th id="A5.T6.3.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Language</th>
<th id="A5.T6.3.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Src</th>
<th id="A5.T6.3.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Ref</th>
<th id="A5.T6.3.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Hyp</th>
<th id="A5.T6.3.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Severity</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="A5.T6.3.2.1" class="ltx_tr">
<td id="A5.T6.3.2.1.1" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;"><span id="A5.T6.3.2.1.1.1" class="ltx_text ltx_font_typewriter">fr</span></td>
<td id="A5.T6.3.2.1.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.2.1.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">- Eh oui, l’habit ne fait pas le moine.</p>
</td>
<td id="A5.T6.3.2.1.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.2.1.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Yes, clothes don’t make the man.</p>
</td>
<td id="A5.T6.3.2.1.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.2.1.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Yes, clothes don’t make you a monk.</p>
</td>
<td id="A5.T6.3.2.1.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">Major</td>
</tr>
<tr id="A5.T6.3.3.2" class="ltx_tr">
<td id="A5.T6.3.3.2.1" class="ltx_td" style="padding-bottom:10.0pt;"></td>
<td id="A5.T6.3.3.2.2" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.3.2.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Il t’a fait une queue de poisson sur l’autoroute.</p>
</td>
<td id="A5.T6.3.3.2.3" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.3.2.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">He cut you off on the freeway.</p>
</td>
<td id="A5.T6.3.3.2.4" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.3.2.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">He made you a fish tail on the highway.</p>
</td>
<td id="A5.T6.3.3.2.5" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">Severe</td>
</tr>
<tr id="A5.T6.3.4.3" class="ltx_tr">
<td id="A5.T6.3.4.3.1" class="ltx_td"></td>
<td id="A5.T6.3.4.3.2" class="ltx_td ltx_align_center">
<p id="A5.T6.3.4.3.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Il pleut des cordes.</p>
</td>
<td id="A5.T6.3.4.3.3" class="ltx_td ltx_align_center">
<p id="A5.T6.3.4.3.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">It’s raining cats and dogs.</p>
</td>
<td id="A5.T6.3.4.3.4" class="ltx_td ltx_align_center">
<p id="A5.T6.3.4.3.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">It’s raining.</p>
</td>
<td id="A5.T6.3.4.3.5" class="ltx_td ltx_align_center">Major</td>
</tr>
<tr id="A5.T6.3.5.4" class="ltx_tr">
<td id="A5.T6.3.5.4.1" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;"><span id="A5.T6.3.5.4.1.1" class="ltx_text ltx_font_typewriter">fi</span></td>
<td id="A5.T6.3.5.4.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.5.4.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Ei pane tikkuakaan ristiin.</p>
</td>
<td id="A5.T6.3.5.4.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.5.4.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">He does nothing.</p>
</td>
<td id="A5.T6.3.5.4.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.5.4.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Doesn’t even cross a match.</p>
</td>
<td id="A5.T6.3.5.4.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">Severe</td>
</tr>
<tr id="A5.T6.3.6.5" class="ltx_tr">
<td id="A5.T6.3.6.5.1" class="ltx_td" style="padding-bottom:10.0pt;"></td>
<td id="A5.T6.3.6.5.2" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.6.5.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Tämä meni yli hilseen.</p>
</td>
<td id="A5.T6.3.6.5.3" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.6.5.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">This is just way over my head.</p>
</td>
<td id="A5.T6.3.6.5.4" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.6.5.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">This is over the top.</p>
</td>
<td id="A5.T6.3.6.5.5" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">Major</td>
</tr>
<tr id="A5.T6.3.7.6" class="ltx_tr">
<td id="A5.T6.3.7.6.1" class="ltx_td" style="padding-bottom:10.0pt;"></td>
<td id="A5.T6.3.7.6.2" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.7.6.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Hieno aasinsilta itsemurhaan.</p>
</td>
<td id="A5.T6.3.7.6.3" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.7.6.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">Nice speech, Mr. Hobson. Way to hit the suicide theme.</p>
</td>
<td id="A5.T6.3.7.6.4" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.7.6.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">It’s a nice morning for suicide.</p>
</td>
<td id="A5.T6.3.7.6.5" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">Severe</td>
</tr>
<tr id="A5.T6.3.8.7" class="ltx_tr">
<td id="A5.T6.3.8.7.1" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;"><span id="A5.T6.3.8.7.1.1" class="ltx_text ltx_font_typewriter">ja</span></td>
<td id="A5.T6.3.8.7.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.8.7.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">意表を突くってことを 君は学ぶ必要がある</p>
</td>
<td id="A5.T6.3.8.7.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.8.7.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">You need to learn the element of surprise.</p>
</td>
<td id="A5.T6.3.8.7.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.8.7.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">You need to learn to play hard-to-get.</p>
</td>
<td id="A5.T6.3.8.7.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-bottom:10.0pt;">Severe</td>
</tr>
<tr id="A5.T6.3.9.8" class="ltx_tr">
<td id="A5.T6.3.9.8.1" class="ltx_td" style="padding-bottom:10.0pt;"></td>
<td id="A5.T6.3.9.8.2" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.9.8.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">もうその手は食わないわ</p>
</td>
<td id="A5.T6.3.9.8.3" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.9.8.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">I’m not falling for this shit.</p>
</td>
<td id="A5.T6.3.9.8.4" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">
<p id="A5.T6.3.9.8.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">I won’t have to do that again.</p>
</td>
<td id="A5.T6.3.9.8.5" class="ltx_td ltx_align_center" style="padding-bottom:10.0pt;">Major</td>
</tr>
<tr id="A5.T6.3.10.9" class="ltx_tr">
<td id="A5.T6.3.10.9.1" class="ltx_td ltx_border_bb"></td>
<td id="A5.T6.3.10.9.2" class="ltx_td ltx_align_center ltx_border_bb">
<p id="A5.T6.3.10.9.2.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">一杯食わせやがったな！</p>
</td>
<td id="A5.T6.3.10.9.3" class="ltx_td ltx_align_center ltx_border_bb">
<p id="A5.T6.3.10.9.3.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">You swindled me!</p>
</td>
<td id="A5.T6.3.10.9.4" class="ltx_td ltx_align_center ltx_border_bb">
<p id="A5.T6.3.10.9.4.1" class="ltx_p ltx_parbox ltx_align_middle" style="width:113.8pt;">You’ve given me enough to eat!</p>
</td>
<td id="A5.T6.3.10.9.5" class="ltx_td ltx_align_center ltx_border_bb">Severe</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>Examples of categorized errors made by <math id="A5.T6.2.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="A5.T6.2.m1.1b"><mi mathvariant="normal" id="A5.T6.2.m1.1.1" xref="A5.T6.2.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="A5.T6.2.m1.1c"><ci id="A5.T6.2.m1.1.1.cmml" xref="A5.T6.2.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="A5.T6.2.m1.1d">\Delta</annotation><annotation encoding="application/x-llamapun" id="A5.T6.2.m1.1e">roman_Δ</annotation></semantics></math>LM.</figcaption>
</figure>
</section>
<section id="A6" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix F </span>Statistical Significance Testing</h2>

<div id="A6.p1" class="ltx_para">
<p id="A6.p1.1" class="ltx_p">For each language and test set, we examine the null hypothesis that the BLEU scores of the two systems actually have the same distribution, and the difference occurred by chance.</p>
</div>
<div id="A6.p2" class="ltx_para">
<p id="A6.p2.1" class="ltx_p">For each source sentence, we shuffled the translations produced by the two systems with probability 0.5, and then recalculated BLEU scores. This was repeated 1000 times, and the number of times the shuffled difference was greater or equal to the observed difference was recorded to find the p-value.</p>
</div>
</section>
<section id="A7" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix G </span>Statistical Significance Results</h2>

<div id="A7.p1" class="ltx_para">
<p id="A7.p1.1" class="ltx_p">Statistical significance results are shown in <a href="#A7.T7" title="Table 7 ‣ Appendix G Statistical Significance Results ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 7</span></a>.</p>
</div>
<figure id="A7.T7" class="ltx_table">
<table id="A7.T7.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="A7.T7.1.1.1" class="ltx_tr">
<th id="A7.T7.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt">Language</th>
<th id="A7.T7.1.1.1.2" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">Test set</th>
<th id="A7.T7.1.1.1.3" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt">p-val</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="A7.T7.1.2.1" class="ltx_tr">
<th id="A7.T7.1.2.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="A7.T7.1.2.1.1.1" class="ltx_text ltx_font_typewriter">fi</span></th>
<td id="A7.T7.1.2.1.2" class="ltx_td ltx_align_right ltx_border_t">idioms</td>
<td id="A7.T7.1.2.1.3" class="ltx_td ltx_align_right ltx_border_t">0.0*</td>
</tr>
<tr id="A7.T7.1.3.2" class="ltx_tr">
<th id="A7.T7.1.3.2.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="A7.T7.1.3.2.2" class="ltx_td ltx_align_right">literal</td>
<td id="A7.T7.1.3.2.3" class="ltx_td ltx_align_right">0.003*</td>
</tr>
<tr id="A7.T7.1.4.3" class="ltx_tr">
<th id="A7.T7.1.4.3.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="A7.T7.1.4.3.2" class="ltx_td ltx_align_right">rand</td>
<td id="A7.T7.1.4.3.3" class="ltx_td ltx_align_right">0.018*</td>
</tr>
<tr id="A7.T7.1.5.4" class="ltx_tr">
<th id="A7.T7.1.5.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="A7.T7.1.5.4.1.1" class="ltx_text ltx_font_typewriter">fr</span></th>
<td id="A7.T7.1.5.4.2" class="ltx_td ltx_align_right ltx_border_t">idioms</td>
<td id="A7.T7.1.5.4.3" class="ltx_td ltx_align_right ltx_border_t">0.0*</td>
</tr>
<tr id="A7.T7.1.6.5" class="ltx_tr">
<th id="A7.T7.1.6.5.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="A7.T7.1.6.5.2" class="ltx_td ltx_align_right">literal</td>
<td id="A7.T7.1.6.5.3" class="ltx_td ltx_align_right">0.234</td>
</tr>
<tr id="A7.T7.1.7.6" class="ltx_tr">
<th id="A7.T7.1.7.6.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="A7.T7.1.7.6.2" class="ltx_td ltx_align_right">rand</td>
<td id="A7.T7.1.7.6.3" class="ltx_td ltx_align_right">0.0*</td>
</tr>
<tr id="A7.T7.1.8.7" class="ltx_tr">
<th id="A7.T7.1.8.7.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="A7.T7.1.8.7.1.1" class="ltx_text ltx_font_typewriter">ja</span></th>
<td id="A7.T7.1.8.7.2" class="ltx_td ltx_align_right ltx_border_t">idioms</td>
<td id="A7.T7.1.8.7.3" class="ltx_td ltx_align_right ltx_border_t">0.058</td>
</tr>
<tr id="A7.T7.1.9.8" class="ltx_tr">
<th id="A7.T7.1.9.8.1" class="ltx_td ltx_th ltx_th_row"></th>
<td id="A7.T7.1.9.8.2" class="ltx_td ltx_align_right">literal</td>
<td id="A7.T7.1.9.8.3" class="ltx_td ltx_align_right">0.083</td>
</tr>
<tr id="A7.T7.1.10.9" class="ltx_tr">
<th id="A7.T7.1.10.9.1" class="ltx_td ltx_th ltx_th_row ltx_border_bb"></th>
<td id="A7.T7.1.10.9.2" class="ltx_td ltx_align_right ltx_border_bb">rand</td>
<td id="A7.T7.1.10.9.3" class="ltx_td ltx_align_right ltx_border_bb">0.088</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>p-values obtained using approximate randomization on translations produced by the base model and the upweight+knn model.</figcaption>
</figure>
</section>
<section id="A8" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix H </span>Effect of Frequency on Commercial Translations</h2>

<div id="A8.p1" class="ltx_para">
<p id="A8.p1.1" class="ltx_p">The effect of idiom frequency on commercial models’ translations is in <a href="#A8.F5" title="Figure 5 ‣ Appendix H Effect of Frequency on Commercial Translations ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 5</span></a> through <a href="#A8.F9" title="Figure 9 ‣ Appendix H Effect of Frequency on Commercial Translations ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 9</span></a>.</p>
</div>
<figure id="A8.F5" class="ltx_figure"><img src="x5.png" id="A8.F5.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="830" height="664" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>Effect of idiom frequency on translations by DeepL in Finnish</figcaption>
</figure>
<figure id="A8.F6" class="ltx_figure"><img src="x6.png" id="A8.F6.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="830" height="664" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>Effect of idiom frequency on translations by Google in Finnish</figcaption>
</figure>
<figure id="A8.F7" class="ltx_figure"><img src="x7.png" id="A8.F7.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="830" height="664" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>Effect of idiom frequency on translations by Google in French</figcaption>
</figure>
<figure id="A8.F8" class="ltx_figure"><img src="x8.png" id="A8.F8.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="830" height="664" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8: </span>Effect of idiom frequency on translations by DeepL in Japanese</figcaption>
</figure>
<figure id="A8.F9" class="ltx_figure"><img src="x9.png" id="A8.F9.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="830" height="664" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 9: </span>Effect of idiom frequency on translations by Google in Japanese</figcaption>
</figure>
</section>
<section id="A9" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix I </span>Effect of Frequency on <math id="A9.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="A9.1.m1.1b"><mi mathvariant="normal" id="A9.1.m1.1.1" xref="A9.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="A9.1.m1.1c"><ci id="A9.1.m1.1.1.cmml" xref="A9.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="A9.1.m1.1d">\Delta</annotation><annotation encoding="application/x-llamapun" id="A9.1.m1.1e">roman_Δ</annotation></semantics></math>LM</h2>

<div id="A9.p1" class="ltx_para">
<p id="A9.p1.1" class="ltx_p">The effect of frequency on <math id="A9.p1.1.m1.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="A9.p1.1.m1.1a"><mi mathvariant="normal" id="A9.p1.1.m1.1.1" xref="A9.p1.1.m1.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="A9.p1.1.m1.1b"><ci id="A9.p1.1.m1.1.1.cmml" xref="A9.p1.1.m1.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="A9.p1.1.m1.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="A9.p1.1.m1.1d">roman_Δ</annotation></semantics></math>LM for Finnish and Japanese is shown in <a href="#A9.F10" title="Figure 10 ‣ Appendix I Effect of Frequency on ΔLM ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 10</span></a> and <a href="#A9.F11" title="Figure 11 ‣ Appendix I Effect of Frequency on ΔLM ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 11</span></a></p>
</div>
<figure id="A9.F10" class="ltx_figure"><img src="x10.png" id="A9.F10.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="747" height="598" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 10: </span>Translation metrics for Finnish idiomatic sentences, for base and upweight+knn models.</figcaption>
</figure>
<figure id="A9.F11" class="ltx_figure"><img src="x11.png" id="A9.F11.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="747" height="598" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 11: </span>Translation metrics for Japanese idiomatic sentences, for base and upweight+knn models.</figcaption>
</figure>
</section>
<section id="A10" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix J </span>Automatic Metrics in Detail</h2>

<div id="A10.p1" class="ltx_para">
<p id="A10.p1.1" class="ltx_p">Exact results for automatic metrics are shown in <a href="#A10.T8" title="Table 8 ‣ Appendix J Automatic Metrics in Detail ‣ Crossing the Threshold: Idiomatic Machine Translation through Retrieval Augmentation and Loss Weighting" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 8</span></a>.</p>
</div>
<figure id="A10.T8" class="ltx_table">
<table id="A10.T8.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="A10.T8.1.1.1" class="ltx_tr">
<th id="A10.T8.1.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Language</th>
<th id="A10.T8.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Test Set</th>
<th id="A10.T8.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Model</th>
<th id="A10.T8.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">BLEU</th>
<th id="A10.T8.1.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">RougeL-sum</th>
<th id="A10.T8.1.1.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">BertScore</th>
<th id="A10.T8.1.1.1.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Meteor</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="A10.T8.1.2.1" class="ltx_tr">
<td id="A10.T8.1.2.1.1" class="ltx_td ltx_align_center ltx_border_t"><span id="A10.T8.1.2.1.1.1" class="ltx_text ltx_font_typewriter">fi</span></td>
<td id="A10.T8.1.2.1.2" class="ltx_td ltx_align_center ltx_border_t">Idioms</td>
<td id="A10.T8.1.2.1.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.2.1.4" class="ltx_td ltx_align_center ltx_border_t">0.1608</td>
<td id="A10.T8.1.2.1.5" class="ltx_td ltx_align_center ltx_border_t">0.3737</td>
<td id="A10.T8.1.2.1.6" class="ltx_td ltx_align_center ltx_border_t">0.9126</td>
<td id="A10.T8.1.2.1.7" class="ltx_td ltx_align_center ltx_border_t">0.3592</td>
</tr>
<tr id="A10.T8.1.3.2" class="ltx_tr">
<td id="A10.T8.1.3.2.1" class="ltx_td"></td>
<td id="A10.T8.1.3.2.2" class="ltx_td"></td>
<td id="A10.T8.1.3.2.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.3.2.4" class="ltx_td ltx_align_center">0.179</td>
<td id="A10.T8.1.3.2.5" class="ltx_td ltx_align_center">0.3904</td>
<td id="A10.T8.1.3.2.6" class="ltx_td ltx_align_center">0.9152</td>
<td id="A10.T8.1.3.2.7" class="ltx_td ltx_align_center">0.3745</td>
</tr>
<tr id="A10.T8.1.4.3" class="ltx_tr">
<td id="A10.T8.1.4.3.1" class="ltx_td"></td>
<td id="A10.T8.1.4.3.2" class="ltx_td"></td>
<td id="A10.T8.1.4.3.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.4.3.4" class="ltx_td ltx_align_center">0.1773</td>
<td id="A10.T8.1.4.3.5" class="ltx_td ltx_align_center">0.3895</td>
<td id="A10.T8.1.4.3.6" class="ltx_td ltx_align_center">0.9154</td>
<td id="A10.T8.1.4.3.7" class="ltx_td ltx_align_center">0.3709</td>
</tr>
<tr id="A10.T8.1.5.4" class="ltx_tr">
<td id="A10.T8.1.5.4.1" class="ltx_td"></td>
<td id="A10.T8.1.5.4.2" class="ltx_td"></td>
<td id="A10.T8.1.5.4.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.5.4.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.5.4.4.1" class="ltx_text ltx_font_bold">0.182</span></td>
<td id="A10.T8.1.5.4.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.5.4.5.1" class="ltx_text ltx_font_bold">0.4027</span></td>
<td id="A10.T8.1.5.4.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.5.4.6.1" class="ltx_text ltx_font_bold">0.9172</span></td>
<td id="A10.T8.1.5.4.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.5.4.7.1" class="ltx_text ltx_font_bold">0.3833</span></td>
</tr>
<tr id="A10.T8.1.6.5" class="ltx_tr">
<td id="A10.T8.1.6.5.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.6.5.2" class="ltx_td ltx_align_center ltx_border_t">Literal</td>
<td id="A10.T8.1.6.5.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.6.5.4" class="ltx_td ltx_align_center ltx_border_t">0.2093</td>
<td id="A10.T8.1.6.5.5" class="ltx_td ltx_align_center ltx_border_t">0.5053</td>
<td id="A10.T8.1.6.5.6" class="ltx_td ltx_align_center ltx_border_t">0.9350</td>
<td id="A10.T8.1.6.5.7" class="ltx_td ltx_align_center ltx_border_t">0.5050</td>
</tr>
<tr id="A10.T8.1.7.6" class="ltx_tr">
<td id="A10.T8.1.7.6.1" class="ltx_td"></td>
<td id="A10.T8.1.7.6.2" class="ltx_td"></td>
<td id="A10.T8.1.7.6.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.7.6.4" class="ltx_td ltx_align_center">0.2257</td>
<td id="A10.T8.1.7.6.5" class="ltx_td ltx_align_center">0.535</td>
<td id="A10.T8.1.7.6.6" class="ltx_td ltx_align_center">0.937</td>
<td id="A10.T8.1.7.6.7" class="ltx_td ltx_align_center">0.5161</td>
</tr>
<tr id="A10.T8.1.8.7" class="ltx_tr">
<td id="A10.T8.1.8.7.1" class="ltx_td"></td>
<td id="A10.T8.1.8.7.2" class="ltx_td"></td>
<td id="A10.T8.1.8.7.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.8.7.4" class="ltx_td ltx_align_center">0.2314</td>
<td id="A10.T8.1.8.7.5" class="ltx_td ltx_align_center">0.5281</td>
<td id="A10.T8.1.8.7.6" class="ltx_td ltx_align_center">0.9364</td>
<td id="A10.T8.1.8.7.7" class="ltx_td ltx_align_center">0.5258</td>
</tr>
<tr id="A10.T8.1.9.8" class="ltx_tr">
<td id="A10.T8.1.9.8.1" class="ltx_td"></td>
<td id="A10.T8.1.9.8.2" class="ltx_td"></td>
<td id="A10.T8.1.9.8.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.9.8.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.9.8.4.1" class="ltx_text ltx_font_bold">0.2362</span></td>
<td id="A10.T8.1.9.8.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.9.8.5.1" class="ltx_text ltx_font_bold">0.5335</span></td>
<td id="A10.T8.1.9.8.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.9.8.6.1" class="ltx_text ltx_font_bold">0.9387</span></td>
<td id="A10.T8.1.9.8.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.9.8.7.1" class="ltx_text ltx_font_bold">0.5217</span></td>
</tr>
<tr id="A10.T8.1.10.9" class="ltx_tr">
<td id="A10.T8.1.10.9.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.10.9.2" class="ltx_td ltx_align_center ltx_border_t">Random-in</td>
<td id="A10.T8.1.10.9.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.10.9.4" class="ltx_td ltx_align_center ltx_border_t">0.2056</td>
<td id="A10.T8.1.10.9.5" class="ltx_td ltx_align_center ltx_border_t">0.5044</td>
<td id="A10.T8.1.10.9.6" class="ltx_td ltx_align_center ltx_border_t">0.9321</td>
<td id="A10.T8.1.10.9.7" class="ltx_td ltx_align_center ltx_border_t">0.4739</td>
</tr>
<tr id="A10.T8.1.11.10" class="ltx_tr">
<td id="A10.T8.1.11.10.1" class="ltx_td"></td>
<td id="A10.T8.1.11.10.2" class="ltx_td"></td>
<td id="A10.T8.1.11.10.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.11.10.4" class="ltx_td ltx_align_center">0.1991</td>
<td id="A10.T8.1.11.10.5" class="ltx_td ltx_align_center">0.5067</td>
<td id="A10.T8.1.11.10.6" class="ltx_td ltx_align_center">0.9316</td>
<td id="A10.T8.1.11.10.7" class="ltx_td ltx_align_center">0.4732</td>
</tr>
<tr id="A10.T8.1.12.11" class="ltx_tr">
<td id="A10.T8.1.12.11.1" class="ltx_td"></td>
<td id="A10.T8.1.12.11.2" class="ltx_td"></td>
<td id="A10.T8.1.12.11.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.12.11.4" class="ltx_td ltx_align_center">0.2044</td>
<td id="A10.T8.1.12.11.5" class="ltx_td ltx_align_center">0.5048</td>
<td id="A10.T8.1.12.11.6" class="ltx_td ltx_align_center">0.9324</td>
<td id="A10.T8.1.12.11.7" class="ltx_td ltx_align_center">0.4728</td>
</tr>
<tr id="A10.T8.1.13.12" class="ltx_tr">
<td id="A10.T8.1.13.12.1" class="ltx_td"></td>
<td id="A10.T8.1.13.12.2" class="ltx_td"></td>
<td id="A10.T8.1.13.12.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.13.12.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.13.12.4.1" class="ltx_text ltx_font_bold">0.2120</span></td>
<td id="A10.T8.1.13.12.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.13.12.5.1" class="ltx_text ltx_font_bold">0.5224</span></td>
<td id="A10.T8.1.13.12.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.13.12.6.1" class="ltx_text ltx_font_bold">0.9351</span></td>
<td id="A10.T8.1.13.12.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.13.12.7.1" class="ltx_text ltx_font_bold">0.488</span></td>
</tr>
<tr id="A10.T8.1.14.13" class="ltx_tr">
<td id="A10.T8.1.14.13.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.14.13.2" class="ltx_td ltx_align_center ltx_border_t">Random-out</td>
<td id="A10.T8.1.14.13.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.14.13.4" class="ltx_td ltx_align_center ltx_border_t">0.2365</td>
<td id="A10.T8.1.14.13.5" class="ltx_td ltx_align_center ltx_border_t">0.535</td>
<td id="A10.T8.1.14.13.6" class="ltx_td ltx_align_center ltx_border_t">0.9145</td>
<td id="A10.T8.1.14.13.7" class="ltx_td ltx_align_center ltx_border_t">0.4971</td>
</tr>
<tr id="A10.T8.1.15.14" class="ltx_tr">
<td id="A10.T8.1.15.14.1" class="ltx_td"></td>
<td id="A10.T8.1.15.14.2" class="ltx_td"></td>
<td id="A10.T8.1.15.14.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.15.14.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.15.14.4.1" class="ltx_text ltx_font_bold">0.2557</span></td>
<td id="A10.T8.1.15.14.5" class="ltx_td ltx_align_center">0.5602</td>
<td id="A10.T8.1.15.14.6" class="ltx_td ltx_align_center">0.9183</td>
<td id="A10.T8.1.15.14.7" class="ltx_td ltx_align_center">0.5178</td>
</tr>
<tr id="A10.T8.1.16.15" class="ltx_tr">
<td id="A10.T8.1.16.15.1" class="ltx_td"></td>
<td id="A10.T8.1.16.15.2" class="ltx_td"></td>
<td id="A10.T8.1.16.15.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.16.15.4" class="ltx_td ltx_align_center">0.2374</td>
<td id="A10.T8.1.16.15.5" class="ltx_td ltx_align_center">0.5458</td>
<td id="A10.T8.1.16.15.6" class="ltx_td ltx_align_center">0.9163</td>
<td id="A10.T8.1.16.15.7" class="ltx_td ltx_align_center">0.5102</td>
</tr>
<tr id="A10.T8.1.17.16" class="ltx_tr">
<td id="A10.T8.1.17.16.1" class="ltx_td"></td>
<td id="A10.T8.1.17.16.2" class="ltx_td"></td>
<td id="A10.T8.1.17.16.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.17.16.4" class="ltx_td ltx_align_center">0.2498</td>
<td id="A10.T8.1.17.16.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.17.16.5.1" class="ltx_text ltx_font_bold">0.564</span></td>
<td id="A10.T8.1.17.16.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.17.16.6.1" class="ltx_text ltx_font_bold">0.9193</span></td>
<td id="A10.T8.1.17.16.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.17.16.7.1" class="ltx_text ltx_font_bold">0.5261</span></td>
</tr>
<tr id="A10.T8.1.18.17" class="ltx_tr">
<td id="A10.T8.1.18.17.1" class="ltx_td ltx_align_center ltx_border_tt"><span id="A10.T8.1.18.17.1.1" class="ltx_text ltx_font_typewriter">fr</span></td>
<td id="A10.T8.1.18.17.2" class="ltx_td ltx_align_center ltx_border_tt">Idioms</td>
<td id="A10.T8.1.18.17.3" class="ltx_td ltx_align_center ltx_border_tt">Normal</td>
<td id="A10.T8.1.18.17.4" class="ltx_td ltx_align_center ltx_border_tt">0.2001</td>
<td id="A10.T8.1.18.17.5" class="ltx_td ltx_align_center ltx_border_tt">0.4329</td>
<td id="A10.T8.1.18.17.6" class="ltx_td ltx_align_center ltx_border_tt">0.9211</td>
<td id="A10.T8.1.18.17.7" class="ltx_td ltx_align_center ltx_border_tt">0.4393</td>
</tr>
<tr id="A10.T8.1.19.18" class="ltx_tr">
<td id="A10.T8.1.19.18.1" class="ltx_td"></td>
<td id="A10.T8.1.19.18.2" class="ltx_td"></td>
<td id="A10.T8.1.19.18.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.19.18.4" class="ltx_td ltx_align_center">0.2154</td>
<td id="A10.T8.1.19.18.5" class="ltx_td ltx_align_center">0.4547</td>
<td id="A10.T8.1.19.18.6" class="ltx_td ltx_align_center">0.9235</td>
<td id="A10.T8.1.19.18.7" class="ltx_td ltx_align_center">0.4493</td>
</tr>
<tr id="A10.T8.1.20.19" class="ltx_tr">
<td id="A10.T8.1.20.19.1" class="ltx_td"></td>
<td id="A10.T8.1.20.19.2" class="ltx_td"></td>
<td id="A10.T8.1.20.19.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.20.19.4" class="ltx_td ltx_align_center">0.2174</td>
<td id="A10.T8.1.20.19.5" class="ltx_td ltx_align_center">0.4398</td>
<td id="A10.T8.1.20.19.6" class="ltx_td ltx_align_center">0.9235</td>
<td id="A10.T8.1.20.19.7" class="ltx_td ltx_align_center">0.4419</td>
</tr>
<tr id="A10.T8.1.21.20" class="ltx_tr">
<td id="A10.T8.1.21.20.1" class="ltx_td"></td>
<td id="A10.T8.1.21.20.2" class="ltx_td"></td>
<td id="A10.T8.1.21.20.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.21.20.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.21.20.4.1" class="ltx_text ltx_font_bold">0.2309</span></td>
<td id="A10.T8.1.21.20.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.21.20.5.1" class="ltx_text ltx_font_bold">0.4568</span></td>
<td id="A10.T8.1.21.20.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.21.20.6.1" class="ltx_text ltx_font_bold">0.926</span></td>
<td id="A10.T8.1.21.20.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.21.20.7.1" class="ltx_text ltx_font_bold">0.4581</span></td>
</tr>
<tr id="A10.T8.1.22.21" class="ltx_tr">
<td id="A10.T8.1.22.21.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.22.21.2" class="ltx_td ltx_align_center ltx_border_t">Literal</td>
<td id="A10.T8.1.22.21.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.22.21.4" class="ltx_td ltx_align_center ltx_border_t">0.2778</td>
<td id="A10.T8.1.22.21.5" class="ltx_td ltx_align_center ltx_border_t">0.5261</td>
<td id="A10.T8.1.22.21.6" class="ltx_td ltx_align_center ltx_border_t">0.9377</td>
<td id="A10.T8.1.22.21.7" class="ltx_td ltx_align_center ltx_border_t">0.5504</td>
</tr>
<tr id="A10.T8.1.23.22" class="ltx_tr">
<td id="A10.T8.1.23.22.1" class="ltx_td"></td>
<td id="A10.T8.1.23.22.2" class="ltx_td"></td>
<td id="A10.T8.1.23.22.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.23.22.4" class="ltx_td ltx_align_center">0.2824</td>
<td id="A10.T8.1.23.22.5" class="ltx_td ltx_align_center">0.5318</td>
<td id="A10.T8.1.23.22.6" class="ltx_td ltx_align_center">0.9387</td>
<td id="A10.T8.1.23.22.7" class="ltx_td ltx_align_center">0.5544</td>
</tr>
<tr id="A10.T8.1.24.23" class="ltx_tr">
<td id="A10.T8.1.24.23.1" class="ltx_td"></td>
<td id="A10.T8.1.24.23.2" class="ltx_td"></td>
<td id="A10.T8.1.24.23.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.24.23.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.24.23.4.1" class="ltx_text ltx_font_bold">0.2923</span></td>
<td id="A10.T8.1.24.23.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.24.23.5.1" class="ltx_text ltx_font_bold">0.5332</span></td>
<td id="A10.T8.1.24.23.6" class="ltx_td ltx_align_center">0.9384</td>
<td id="A10.T8.1.24.23.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.24.23.7.1" class="ltx_text ltx_font_bold">0.5564</span></td>
</tr>
<tr id="A10.T8.1.25.24" class="ltx_tr">
<td id="A10.T8.1.25.24.1" class="ltx_td"></td>
<td id="A10.T8.1.25.24.2" class="ltx_td"></td>
<td id="A10.T8.1.25.24.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.25.24.4" class="ltx_td ltx_align_center">0.2883</td>
<td id="A10.T8.1.25.24.5" class="ltx_td ltx_align_center">0.5325</td>
<td id="A10.T8.1.25.24.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.25.24.6.1" class="ltx_text ltx_font_bold">0.9399</span></td>
<td id="A10.T8.1.25.24.7" class="ltx_td ltx_align_center">0.5549</td>
</tr>
<tr id="A10.T8.1.26.25" class="ltx_tr">
<td id="A10.T8.1.26.25.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.26.25.2" class="ltx_td ltx_align_center ltx_border_t">Random-in</td>
<td id="A10.T8.1.26.25.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.26.25.4" class="ltx_td ltx_align_center ltx_border_t">0.3197</td>
<td id="A10.T8.1.26.25.5" class="ltx_td ltx_align_center ltx_border_t">0.5942</td>
<td id="A10.T8.1.26.25.6" class="ltx_td ltx_align_center ltx_border_t">0.9443</td>
<td id="A10.T8.1.26.25.7" class="ltx_td ltx_align_center ltx_border_t">0.5803</td>
</tr>
<tr id="A10.T8.1.27.26" class="ltx_tr">
<td id="A10.T8.1.27.26.1" class="ltx_td"></td>
<td id="A10.T8.1.27.26.2" class="ltx_td"></td>
<td id="A10.T8.1.27.26.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.27.26.4" class="ltx_td ltx_align_center">0.3142</td>
<td id="A10.T8.1.27.26.5" class="ltx_td ltx_align_center">0.5949</td>
<td id="A10.T8.1.27.26.6" class="ltx_td ltx_align_center">0.9438</td>
<td id="A10.T8.1.27.26.7" class="ltx_td ltx_align_center">0.5774</td>
</tr>
<tr id="A10.T8.1.28.27" class="ltx_tr">
<td id="A10.T8.1.28.27.1" class="ltx_td"></td>
<td id="A10.T8.1.28.27.2" class="ltx_td"></td>
<td id="A10.T8.1.28.27.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.28.27.4" class="ltx_td ltx_align_center">0.3079</td>
<td id="A10.T8.1.28.27.5" class="ltx_td ltx_align_center">0.5884</td>
<td id="A10.T8.1.28.27.6" class="ltx_td ltx_align_center">0.9427</td>
<td id="A10.T8.1.28.27.7" class="ltx_td ltx_align_center">0.5715</td>
</tr>
<tr id="A10.T8.1.29.28" class="ltx_tr">
<td id="A10.T8.1.29.28.1" class="ltx_td"></td>
<td id="A10.T8.1.29.28.2" class="ltx_td"></td>
<td id="A10.T8.1.29.28.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.29.28.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.29.28.4.1" class="ltx_text ltx_font_bold">0.3258</span></td>
<td id="A10.T8.1.29.28.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.29.28.5.1" class="ltx_text ltx_font_bold">0.6036</span></td>
<td id="A10.T8.1.29.28.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.29.28.6.1" class="ltx_text ltx_font_bold">0.9461</span></td>
<td id="A10.T8.1.29.28.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.29.28.7.1" class="ltx_text ltx_font_bold">0.5865</span></td>
</tr>
<tr id="A10.T8.1.30.29" class="ltx_tr">
<td id="A10.T8.1.30.29.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.30.29.2" class="ltx_td ltx_align_center ltx_border_t">Random-out</td>
<td id="A10.T8.1.30.29.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.30.29.4" class="ltx_td ltx_align_center ltx_border_t">0.2778</td>
<td id="A10.T8.1.30.29.5" class="ltx_td ltx_align_center ltx_border_t">0.528</td>
<td id="A10.T8.1.30.29.6" class="ltx_td ltx_align_center ltx_border_t">0.9377</td>
<td id="A10.T8.1.30.29.7" class="ltx_td ltx_align_center ltx_border_t">0.5504</td>
</tr>
<tr id="A10.T8.1.31.30" class="ltx_tr">
<td id="A10.T8.1.31.30.1" class="ltx_td"></td>
<td id="A10.T8.1.31.30.2" class="ltx_td"></td>
<td id="A10.T8.1.31.30.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.31.30.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.31.30.4.1" class="ltx_text ltx_font_bold">0.3396</span></td>
<td id="A10.T8.1.31.30.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.31.30.5.1" class="ltx_text ltx_font_bold">0.6573</span></td>
<td id="A10.T8.1.31.30.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.31.30.6.1" class="ltx_text ltx_font_bold">0.928</span></td>
<td id="A10.T8.1.31.30.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.31.30.7.1" class="ltx_text ltx_font_bold">0.6146</span></td>
</tr>
<tr id="A10.T8.1.32.31" class="ltx_tr">
<td id="A10.T8.1.32.31.1" class="ltx_td"></td>
<td id="A10.T8.1.32.31.2" class="ltx_td"></td>
<td id="A10.T8.1.32.31.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.32.31.4" class="ltx_td ltx_align_center">0.3078</td>
<td id="A10.T8.1.32.31.5" class="ltx_td ltx_align_center">0.5458</td>
<td id="A10.T8.1.32.31.6" class="ltx_td ltx_align_center">0.9223</td>
<td id="A10.T8.1.32.31.7" class="ltx_td ltx_align_center">0.5856</td>
</tr>
<tr id="A10.T8.1.33.32" class="ltx_tr">
<td id="A10.T8.1.33.32.1" class="ltx_td"></td>
<td id="A10.T8.1.33.32.2" class="ltx_td"></td>
<td id="A10.T8.1.33.32.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.33.32.4" class="ltx_td ltx_align_center">0.3353</td>
<td id="A10.T8.1.33.32.5" class="ltx_td ltx_align_center">0.652</td>
<td id="A10.T8.1.33.32.6" class="ltx_td ltx_align_center">0.9272</td>
<td id="A10.T8.1.33.32.7" class="ltx_td ltx_align_center">0.6075</td>
</tr>
<tr id="A10.T8.1.34.33" class="ltx_tr">
<td id="A10.T8.1.34.33.1" class="ltx_td ltx_align_center ltx_border_tt"><span id="A10.T8.1.34.33.1.1" class="ltx_text ltx_font_typewriter">ja</span></td>
<td id="A10.T8.1.34.33.2" class="ltx_td ltx_align_center ltx_border_tt">Idioms</td>
<td id="A10.T8.1.34.33.3" class="ltx_td ltx_align_center ltx_border_tt">Normal</td>
<td id="A10.T8.1.34.33.4" class="ltx_td ltx_align_center ltx_border_tt">0.09048</td>
<td id="A10.T8.1.34.33.5" class="ltx_td ltx_align_center ltx_border_tt">0.2826</td>
<td id="A10.T8.1.34.33.6" class="ltx_td ltx_align_center ltx_border_tt">0.9234</td>
<td id="A10.T8.1.34.33.7" class="ltx_td ltx_align_center ltx_border_tt">0.2998</td>
</tr>
<tr id="A10.T8.1.35.34" class="ltx_tr">
<td id="A10.T8.1.35.34.1" class="ltx_td"></td>
<td id="A10.T8.1.35.34.2" class="ltx_td"></td>
<td id="A10.T8.1.35.34.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.35.34.4" class="ltx_td ltx_align_center">0.09376</td>
<td id="A10.T8.1.35.34.5" class="ltx_td ltx_align_center">0.2767</td>
<td id="A10.T8.1.35.34.6" class="ltx_td ltx_align_center">0.9034</td>
<td id="A10.T8.1.35.34.7" class="ltx_td ltx_align_center">0.2905</td>
</tr>
<tr id="A10.T8.1.36.35" class="ltx_tr">
<td id="A10.T8.1.36.35.1" class="ltx_td"></td>
<td id="A10.T8.1.36.35.2" class="ltx_td"></td>
<td id="A10.T8.1.36.35.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.36.35.4" class="ltx_td ltx_align_center">0.09505</td>
<td id="A10.T8.1.36.35.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.36.35.5.1" class="ltx_text ltx_font_bold">0.285</span></td>
<td id="A10.T8.1.36.35.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.36.35.6.1" class="ltx_text ltx_font_bold">0.9052</span></td>
<td id="A10.T8.1.36.35.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.36.35.7.1" class="ltx_text ltx_font_bold">0.3022</span></td>
</tr>
<tr id="A10.T8.1.37.36" class="ltx_tr">
<td id="A10.T8.1.37.36.1" class="ltx_td"></td>
<td id="A10.T8.1.37.36.2" class="ltx_td"></td>
<td id="A10.T8.1.37.36.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.37.36.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.37.36.4.1" class="ltx_text ltx_font_bold">0.09589</span></td>
<td id="A10.T8.1.37.36.5" class="ltx_td ltx_align_center">0.2841</td>
<td id="A10.T8.1.37.36.6" class="ltx_td ltx_align_center">0.905</td>
<td id="A10.T8.1.37.36.7" class="ltx_td ltx_align_center">0.2982</td>
</tr>
<tr id="A10.T8.1.38.37" class="ltx_tr">
<td id="A10.T8.1.38.37.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.38.37.2" class="ltx_td ltx_align_center ltx_border_t">Literal</td>
<td id="A10.T8.1.38.37.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.38.37.4" class="ltx_td ltx_align_center ltx_border_t">0.1416</td>
<td id="A10.T8.1.38.37.5" class="ltx_td ltx_align_center ltx_border_t">0.3951</td>
<td id="A10.T8.1.38.37.6" class="ltx_td ltx_align_center ltx_border_t">0.9222</td>
<td id="A10.T8.1.38.37.7" class="ltx_td ltx_align_center ltx_border_t">0.4222</td>
</tr>
<tr id="A10.T8.1.39.38" class="ltx_tr">
<td id="A10.T8.1.39.38.1" class="ltx_td"></td>
<td id="A10.T8.1.39.38.2" class="ltx_td"></td>
<td id="A10.T8.1.39.38.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.39.38.4" class="ltx_td ltx_align_center">0.1418</td>
<td id="A10.T8.1.39.38.5" class="ltx_td ltx_align_center">0.3947</td>
<td id="A10.T8.1.39.38.6" class="ltx_td ltx_align_center">0.9223</td>
<td id="A10.T8.1.39.38.7" class="ltx_td ltx_align_center">0.4183</td>
</tr>
<tr id="A10.T8.1.40.39" class="ltx_tr">
<td id="A10.T8.1.40.39.1" class="ltx_td"></td>
<td id="A10.T8.1.40.39.2" class="ltx_td"></td>
<td id="A10.T8.1.40.39.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.40.39.4" class="ltx_td ltx_align_center">0.1427</td>
<td id="A10.T8.1.40.39.5" class="ltx_td ltx_align_center">0.3923</td>
<td id="A10.T8.1.40.39.6" class="ltx_td ltx_align_center">0.9221</td>
<td id="A10.T8.1.40.39.7" class="ltx_td ltx_align_center">0.4222</td>
</tr>
<tr id="A10.T8.1.41.40" class="ltx_tr">
<td id="A10.T8.1.41.40.1" class="ltx_td"></td>
<td id="A10.T8.1.41.40.2" class="ltx_td"></td>
<td id="A10.T8.1.41.40.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.41.40.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.41.40.4.1" class="ltx_text ltx_font_bold">0.1509</span></td>
<td id="A10.T8.1.41.40.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.41.40.5.1" class="ltx_text ltx_font_bold">0.3962</span></td>
<td id="A10.T8.1.41.40.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.41.40.6.1" class="ltx_text ltx_font_bold">0.9226</span></td>
<td id="A10.T8.1.41.40.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.41.40.7.1" class="ltx_text ltx_font_bold">0.4228</span></td>
</tr>
<tr id="A10.T8.1.42.41" class="ltx_tr">
<td id="A10.T8.1.42.41.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.42.41.2" class="ltx_td ltx_align_center ltx_border_t">Random-in</td>
<td id="A10.T8.1.42.41.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.42.41.4" class="ltx_td ltx_align_center ltx_border_t">0.1443</td>
<td id="A10.T8.1.42.41.5" class="ltx_td ltx_align_center ltx_border_t">0.4008</td>
<td id="A10.T8.1.42.41.6" class="ltx_td ltx_align_center ltx_border_t">0.9212</td>
<td id="A10.T8.1.42.41.7" class="ltx_td ltx_align_center ltx_border_t">0.3927</td>
</tr>
<tr id="A10.T8.1.43.42" class="ltx_tr">
<td id="A10.T8.1.43.42.1" class="ltx_td"></td>
<td id="A10.T8.1.43.42.2" class="ltx_td"></td>
<td id="A10.T8.1.43.42.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.43.42.4" class="ltx_td ltx_align_center">0.1535</td>
<td id="A10.T8.1.43.42.5" class="ltx_td ltx_align_center">0.4036</td>
<td id="A10.T8.1.43.42.6" class="ltx_td ltx_align_center">0.9218</td>
<td id="A10.T8.1.43.42.7" class="ltx_td ltx_align_center">0.3960</td>
</tr>
<tr id="A10.T8.1.44.43" class="ltx_tr">
<td id="A10.T8.1.44.43.1" class="ltx_td"></td>
<td id="A10.T8.1.44.43.2" class="ltx_td"></td>
<td id="A10.T8.1.44.43.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.44.43.4" class="ltx_td ltx_align_center">0.1430</td>
<td id="A10.T8.1.44.43.5" class="ltx_td ltx_align_center">0.3981</td>
<td id="A10.T8.1.44.43.6" class="ltx_td ltx_align_center">0.9212</td>
<td id="A10.T8.1.44.43.7" class="ltx_td ltx_align_center">0.3925</td>
</tr>
<tr id="A10.T8.1.45.44" class="ltx_tr">
<td id="A10.T8.1.45.44.1" class="ltx_td"></td>
<td id="A10.T8.1.45.44.2" class="ltx_td"></td>
<td id="A10.T8.1.45.44.3" class="ltx_td ltx_align_center">Knn + upweight</td>
<td id="A10.T8.1.45.44.4" class="ltx_td ltx_align_center"><span id="A10.T8.1.45.44.4.1" class="ltx_text ltx_font_bold">0.1543</span></td>
<td id="A10.T8.1.45.44.5" class="ltx_td ltx_align_center"><span id="A10.T8.1.45.44.5.1" class="ltx_text ltx_font_bold">0.407</span></td>
<td id="A10.T8.1.45.44.6" class="ltx_td ltx_align_center"><span id="A10.T8.1.45.44.6.1" class="ltx_text ltx_font_bold">0.9224</span></td>
<td id="A10.T8.1.45.44.7" class="ltx_td ltx_align_center"><span id="A10.T8.1.45.44.7.1" class="ltx_text ltx_font_bold">0.4009</span></td>
</tr>
<tr id="A10.T8.1.46.45" class="ltx_tr">
<td id="A10.T8.1.46.45.1" class="ltx_td ltx_border_t"></td>
<td id="A10.T8.1.46.45.2" class="ltx_td ltx_align_center ltx_border_t">Random-out</td>
<td id="A10.T8.1.46.45.3" class="ltx_td ltx_align_center ltx_border_t">Normal</td>
<td id="A10.T8.1.46.45.4" class="ltx_td ltx_align_center ltx_border_t">0.0948</td>
<td id="A10.T8.1.46.45.5" class="ltx_td ltx_align_center ltx_border_t">0.3539</td>
<td id="A10.T8.1.46.45.6" class="ltx_td ltx_align_center ltx_border_t">0.8946</td>
<td id="A10.T8.1.46.45.7" class="ltx_td ltx_align_center ltx_border_t"><span id="A10.T8.1.46.45.7.1" class="ltx_text ltx_font_bold">0.3436</span></td>
</tr>
<tr id="A10.T8.1.47.46" class="ltx_tr">
<td id="A10.T8.1.47.46.1" class="ltx_td"></td>
<td id="A10.T8.1.47.46.2" class="ltx_td"></td>
<td id="A10.T8.1.47.46.3" class="ltx_td ltx_align_center">Knn</td>
<td id="A10.T8.1.47.46.4" class="ltx_td ltx_align_center">0.09051</td>
<td id="A10.T8.1.47.46.5" class="ltx_td ltx_align_center">0.3389</td>
<td id="A10.T8.1.47.46.6" class="ltx_td ltx_align_center">0.8934</td>
<td id="A10.T8.1.47.46.7" class="ltx_td ltx_align_center">0.3284</td>
</tr>
<tr id="A10.T8.1.48.47" class="ltx_tr">
<td id="A10.T8.1.48.47.1" class="ltx_td"></td>
<td id="A10.T8.1.48.47.2" class="ltx_td"></td>
<td id="A10.T8.1.48.47.3" class="ltx_td ltx_align_center">Upweight</td>
<td id="A10.T8.1.48.47.4" class="ltx_td ltx_align_center">0.09228</td>
<td id="A10.T8.1.48.47.5" class="ltx_td ltx_align_center">0.3522</td>
<td id="A10.T8.1.48.47.6" class="ltx_td ltx_align_center">0.8947</td>
<td id="A10.T8.1.48.47.7" class="ltx_td ltx_align_center">0.3392</td>
</tr>
<tr id="A10.T8.1.49.48" class="ltx_tr">
<td id="A10.T8.1.49.48.1" class="ltx_td ltx_border_bb"></td>
<td id="A10.T8.1.49.48.2" class="ltx_td ltx_border_bb"></td>
<td id="A10.T8.1.49.48.3" class="ltx_td ltx_align_center ltx_border_bb">Knn + upweight</td>
<td id="A10.T8.1.49.48.4" class="ltx_td ltx_align_center ltx_border_bb"><span id="A10.T8.1.49.48.4.1" class="ltx_text ltx_font_bold">0.09752</span></td>
<td id="A10.T8.1.49.48.5" class="ltx_td ltx_align_center ltx_border_bb"><span id="A10.T8.1.49.48.5.1" class="ltx_text ltx_font_bold">0.3545</span></td>
<td id="A10.T8.1.49.48.6" class="ltx_td ltx_align_center ltx_border_bb"><span id="A10.T8.1.49.48.6.1" class="ltx_text ltx_font_bold">0.8959</span></td>
<td id="A10.T8.1.49.48.7" class="ltx_td ltx_align_center ltx_border_bb">0.341</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>Results of automatic metrics. In most cases, combining loss weighting with KNN-MT improves automatic metrics the most on all three test sets, including the out-of-distribution (Random) test set. </figcaption>
</figure>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Fri Oct 20 19:23:56 2023 by <a href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span style="font-size:70%;position:relative; bottom:2.2pt;">A</span>T<span style="position:relative; bottom:-0.4ex;">E</span></span><span class="ltx_font_smallcaps">xml</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>
</body>
</html>
