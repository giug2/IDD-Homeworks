<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2204.01202] ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning</title><meta property="og:description" content="Blockchain-based federated learning has gained significant interest over the last few years with the increasing concern for data privacy, advances in machine learning, and blockchain innovation. However, gaps in securi…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2204.01202">

<!--Generated on Mon Mar 11 12:46:19 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="Blockchain,  Consensus,  Privacy,  Federated Learning,  Edge Computing,  Sharding,  Hyperledger Fabric">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line ltx_leqno">
<h1 class="ltx_title ltx_title_document">ScaleSFL:
<br class="ltx_break">A Sharding Solution for Blockchain-Based Federated Learning</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Evan Madill
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_orcid"><a target="_blank" href="https://orcid.org/0000-0002-6668-3671" title="ORCID identifier" class="ltx_ref">0000-0002-6668-3671</a></span>

<span class="ltx_contact ltx_role_affiliation"><span id="id1.1.id1" class="ltx_text ltx_affiliation_department">Department of Computer Science</span><span id="id2.2.id2" class="ltx_text ltx_affiliation_institution">University of Manitoba</span><span id="id3.3.id3" class="ltx_text ltx_affiliation_city">Winnipeg</span><span id="id4.4.id4" class="ltx_text ltx_affiliation_state">MB</span><span id="id5.5.id5" class="ltx_text ltx_affiliation_country">Canada</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:madille@myumanitoba.ca">madille@myumanitoba.ca</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Ben Nguyen
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id6.1.id1" class="ltx_text ltx_affiliation_department">Department of Computer Science</span><span id="id7.2.id2" class="ltx_text ltx_affiliation_institution">University of Manitoba</span><span id="id8.3.id3" class="ltx_text ltx_affiliation_city">Winnipeg</span><span id="id9.4.id4" class="ltx_text ltx_affiliation_state">MB</span><span id="id10.5.id5" class="ltx_text ltx_affiliation_country">Canada</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:nguyen53@myumanitoba.ca">nguyen53@myumanitoba.ca</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Carson K. Leung
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_orcid"><a target="_blank" href="https://orcid.org/0000-0002-7541-9127" title="ORCID identifier" class="ltx_ref">0000-0002-7541-9127</a></span>

<span class="ltx_contact ltx_role_affiliation"><span id="id11.1.id1" class="ltx_text ltx_affiliation_department">Department of Computer Science</span><span id="id12.2.id2" class="ltx_text ltx_affiliation_institution">University of Manitoba</span><span id="id13.3.id3" class="ltx_text ltx_affiliation_city">Winnipeg</span><span id="id14.4.id4" class="ltx_text ltx_affiliation_state">MB</span><span id="id15.5.id5" class="ltx_text ltx_affiliation_country">Canada</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:kleung@cs.umanitoba.ca">kleung@cs.umanitoba.ca</a>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:Carson.Leung@UManitoba.ca">Carson.Leung@UManitoba.ca</a>
</span></span></span>
<span class="ltx_author_before"> and </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Sara Rouhani
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id16.1.id1" class="ltx_text ltx_affiliation_department">Department of Computer Science</span><span id="id17.2.id2" class="ltx_text ltx_affiliation_institution">University of Manitoba</span><span id="id18.3.id3" class="ltx_text ltx_affiliation_city">Winnipeg</span><span id="id19.4.id4" class="ltx_text ltx_affiliation_state">MB</span><span id="id20.5.id5" class="ltx_text ltx_affiliation_country">Canada</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:sara.rouhani@umanitoba.ca">sara.rouhani@umanitoba.ca</a>
</span></span></span>
</div>
<div class="ltx_dates">(2022)</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract.</h6>
<p id="id21.id1" class="ltx_p">Blockchain-based federated learning has gained significant interest over the last few years with the increasing concern for data privacy, advances in machine learning, and blockchain innovation. However, gaps in security and scalability hinder the development of real-world applications. In this study, we propose ScaleSFL, which is a scalable blockchain-based sharding solution for federated learning. ScaleSFL supports interoperability by separating the off-chain federated learning component in order to verify model updates instead of controlling the entire federated learning flow. We implemented ScaleSFL as a proof-of-concept prototype system using Hyperledger Fabric to demonstrate the feasibility of the solution. We present a performance evaluation of results collected through Hyperledger Caliper benchmarking tools conducted on model creation. Our evaluation results show that sharding can improve validation performance linearly while remaining efficient and secure.</p>
</div>
<div class="ltx_keywords">Blockchain, Consensus, Privacy, Federated Learning, Edge Computing, Sharding, Hyperledger Fabric
</div>
<span id="id1" class="ltx_note ltx_note_frontmatter ltx_role_copyright"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">copyright: </span>acmcopyright</span></span></span><span id="id2" class="ltx_note ltx_note_frontmatter ltx_role_journalyear"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">journalyear: </span>2022</span></span></span><span id="id3" class="ltx_note ltx_note_frontmatter ltx_role_doi"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">doi: </span>10.1145/3494106.3528680</span></span></span><span id="id4" class="ltx_note ltx_note_frontmatter ltx_role_conference"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">conference: </span>Proceedings of the Fourth ACM International Symposium on Blockchain and Secure Critical Infrastructure ; May 30, 2022; Nagasaki, Japan</span></span></span><span id="id5" class="ltx_note ltx_note_frontmatter ltx_role_booktitle"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">booktitle: </span>Proceedings of the Fourth ACM International Symposium on Blockchain and Secure Critical Infrastructure (BSCI ’22), May 30, 2022, Nagasaki, Japan</span></span></span><span id="id6" class="ltx_note ltx_note_frontmatter ltx_role_price"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">price: </span>15.00</span></span></span><span id="id7" class="ltx_note ltx_note_frontmatter ltx_role_isbn"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">isbn: </span>978-1-4503-9175-7/22/05</span></span></span><span id="id8" class="ltx_note ltx_note_frontmatter ltx_role_ccs"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">ccs: </span>Computing methodologies Machine learning</span></span></span><span id="id9" class="ltx_note ltx_note_frontmatter ltx_role_ccs"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">ccs: </span>Computing methodologies Distributed computing methodologies</span></span></span><span id="id10" class="ltx_note ltx_note_frontmatter ltx_role_ccs"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">ccs: </span>Security and privacy</span></span></span><span id="id11" class="ltx_note ltx_note_frontmatter ltx_role_ccs"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">ccs: </span>Security and privacy Distributed systems security</span></span></span><span id="id12" class="ltx_note ltx_note_frontmatter ltx_role_ccs"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">ccs: </span>Security and privacy Privacy-preserving protocols</span></span></span>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1. </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">With the increasing concern for data privacy and security of personal data, the demand for creating trusted methods of privacy-preserving communication is rapidly increasing. Recent advances in machine learning have also spurred interest in a variety of privacy-sensitive domains such as healthcare informatics <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib1" title="" class="ltx_ref">ref:healthcare-fl, </a>)</cite> and coronavirus disease 2019 (COVID-19) diagnoses <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib2" title="" class="ltx_ref">ref:covid-19-diagnosis-fl, </a>)</cite>. However, the privacy of personal data used to train these models has been called into question. Traditional methods of training require data to be centrally located. However, this is challenging or impossible with privacy regulations.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">Federated learning (FL) <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib3" title="" class="ltx_ref">ref:federated-learning, </a>)</cite> is a proposed solution allowing sensitive data to remain distributed among edge devices. This framework will enable devices to train models locally on-device and then upload their local model updates to a trusted central server to be aggregated, resulting in a global model that is then distributed. This process is repeated until the desired objective is reached, such as the convergence of model accuracy.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">Additional improvements have been made to the aggregation strategies involved in traditional FL, notably in reducing the communication overhead to the central aggregation server. Solutions such as HierFavg <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib4" title="" class="ltx_ref">ref:hierfavg, </a>)</cite> introducing a hierarchical scaling solution, where model updates are instead sent to local edge servers performing partial model aggregation. This combines the benefits of both centralized cloud and edge computing, resulting in both reduced latency and communication overhead.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">While the traditional FL framework has demonstrated its viability in real-world applications, it has several notable issues. First, model updates can indirectly leak the local data used to train them. Specifically, users can be de-anonymized through data reconstruction via statistical analysis and data mining. An example of this was with the Netflix Prize Dataset <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib5" title="" class="ltx_ref">ref:deanonymize-netflix, </a>)</cite> where data was correlated to users using an auxiliary IMDb dataset. The second issue is the centralized nature of aggregating the model updates, which creates a single point of failure and relies on trusted authorities.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">Differential privacy <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib6" title="" class="ltx_ref">ref:differential-privacy, </a>; <a href="#bib.bib7" title="" class="ltx_ref">ref:differential-privacy-impossibility, </a>)</cite>, a mathematical framework for evaluating dataset privacy of a given model, can be employed to solve the first issue, for example, by adding a certain noise to the model update. A solution to the second issue is to utilize blockchain technologies to decentralize the task of aggregating the local model updates. However, using a decentralized system incurs several more issues by removing the presence of a centrally trusted entity which gives rise to, for example, the problem of detecting malicious clients sending false model updates.</p>
</div>
<div id="S1.p6" class="ltx_para">
<p id="S1.p6.1" class="ltx_p">Additionally, because local datasets do not necessarily represent the global distribution, as they are non-IID (independent and identically distributed), two honest clients could submit opposing model updates. This problem can be addressed by validating each transaction. One possible solution is to allow each node to execute validation procedures in a smart contract, as described in BAFFLE <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib8" title="" class="ltx_ref">ref:baffle, </a>)</cite>. However, delegating this task to every node of the network is computationally expensive considering the high overhead, local model training, and the consensus task <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib9" title="" class="ltx_ref">ref:committee-consensus, </a>)</cite>. Another solution is to select a committee of nodes each round to perform this validation task <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib9" title="" class="ltx_ref">ref:committee-consensus, </a>)</cite>.</p>
</div>
<div id="S1.p7" class="ltx_para">
<p id="S1.p7.3" class="ltx_p">We can define the current number of clients training each round as <math id="S1.p7.1.m1.1" class="ltx_Math" alttext="\mathcal{C}" display="inline"><semantics id="S1.p7.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S1.p7.1.m1.1.1" xref="S1.p7.1.m1.1.1.cmml">𝒞</mi><annotation-xml encoding="MathML-Content" id="S1.p7.1.m1.1b"><ci id="S1.p7.1.m1.1.1.cmml" xref="S1.p7.1.m1.1.1">𝒞</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p7.1.m1.1c">\mathcal{C}</annotation></semantics></math>, and the number of committee nodes (endorsing peers) as <math id="S1.p7.2.m2.1" class="ltx_Math" alttext="\mathcal{P}_{E}" display="inline"><semantics id="S1.p7.2.m2.1a"><msub id="S1.p7.2.m2.1.1" xref="S1.p7.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p7.2.m2.1.1.2" xref="S1.p7.2.m2.1.1.2.cmml">𝒫</mi><mi id="S1.p7.2.m2.1.1.3" xref="S1.p7.2.m2.1.1.3.cmml">E</mi></msub><annotation-xml encoding="MathML-Content" id="S1.p7.2.m2.1b"><apply id="S1.p7.2.m2.1.1.cmml" xref="S1.p7.2.m2.1.1"><csymbol cd="ambiguous" id="S1.p7.2.m2.1.1.1.cmml" xref="S1.p7.2.m2.1.1">subscript</csymbol><ci id="S1.p7.2.m2.1.1.2.cmml" xref="S1.p7.2.m2.1.1.2">𝒫</ci><ci id="S1.p7.2.m2.1.1.3.cmml" xref="S1.p7.2.m2.1.1.3">𝐸</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p7.2.m2.1c">\mathcal{P}_{E}</annotation></semantics></math>. In each round, a total of <math id="S1.p7.3.m3.1" class="ltx_Math" alttext="\mathcal{C}\times\mathcal{P}_{E}" display="inline"><semantics id="S1.p7.3.m3.1a"><mrow id="S1.p7.3.m3.1.1" xref="S1.p7.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p7.3.m3.1.1.2" xref="S1.p7.3.m3.1.1.2.cmml">𝒞</mi><mo lspace="0.222em" rspace="0.222em" id="S1.p7.3.m3.1.1.1" xref="S1.p7.3.m3.1.1.1.cmml">×</mo><msub id="S1.p7.3.m3.1.1.3" xref="S1.p7.3.m3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p7.3.m3.1.1.3.2" xref="S1.p7.3.m3.1.1.3.2.cmml">𝒫</mi><mi id="S1.p7.3.m3.1.1.3.3" xref="S1.p7.3.m3.1.1.3.3.cmml">E</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S1.p7.3.m3.1b"><apply id="S1.p7.3.m3.1.1.cmml" xref="S1.p7.3.m3.1.1"><times id="S1.p7.3.m3.1.1.1.cmml" xref="S1.p7.3.m3.1.1.1"></times><ci id="S1.p7.3.m3.1.1.2.cmml" xref="S1.p7.3.m3.1.1.2">𝒞</ci><apply id="S1.p7.3.m3.1.1.3.cmml" xref="S1.p7.3.m3.1.1.3"><csymbol cd="ambiguous" id="S1.p7.3.m3.1.1.3.1.cmml" xref="S1.p7.3.m3.1.1.3">subscript</csymbol><ci id="S1.p7.3.m3.1.1.3.2.cmml" xref="S1.p7.3.m3.1.1.3.2">𝒫</ci><ci id="S1.p7.3.m3.1.1.3.3.cmml" xref="S1.p7.3.m3.1.1.3.3">𝐸</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p7.3.m3.1c">\mathcal{C}\times\mathcal{P}_{E}</annotation></semantics></math> computations must be completed to validate all transactions.</p>
</div>
<div id="S1.p8" class="ltx_para">
<p id="S1.p8.4" class="ltx_p">Here, we propose a sharding mechanism extending the committee consensus method. As the network expands, clients will be assigned to different shards within the network, and a committee will be elected for each shard. After every phase, each shard’s committee will publish a local shard-aggregated model, which will then be globally aggregated and redistributed to all clients. If we have <math id="S1.p8.1.m1.1" class="ltx_Math" alttext="\mathcal{S}" display="inline"><semantics id="S1.p8.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S1.p8.1.m1.1.1" xref="S1.p8.1.m1.1.1.cmml">𝒮</mi><annotation-xml encoding="MathML-Content" id="S1.p8.1.m1.1b"><ci id="S1.p8.1.m1.1.1.cmml" xref="S1.p8.1.m1.1.1">𝒮</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p8.1.m1.1c">\mathcal{S}</annotation></semantics></math> many shards, this would reduce the global computations from <math id="S1.p8.2.m2.1" class="ltx_Math" alttext="\mathcal{C}\times\mathcal{P}_{E}" display="inline"><semantics id="S1.p8.2.m2.1a"><mrow id="S1.p8.2.m2.1.1" xref="S1.p8.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p8.2.m2.1.1.2" xref="S1.p8.2.m2.1.1.2.cmml">𝒞</mi><mo lspace="0.222em" rspace="0.222em" id="S1.p8.2.m2.1.1.1" xref="S1.p8.2.m2.1.1.1.cmml">×</mo><msub id="S1.p8.2.m2.1.1.3" xref="S1.p8.2.m2.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p8.2.m2.1.1.3.2" xref="S1.p8.2.m2.1.1.3.2.cmml">𝒫</mi><mi id="S1.p8.2.m2.1.1.3.3" xref="S1.p8.2.m2.1.1.3.3.cmml">E</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S1.p8.2.m2.1b"><apply id="S1.p8.2.m2.1.1.cmml" xref="S1.p8.2.m2.1.1"><times id="S1.p8.2.m2.1.1.1.cmml" xref="S1.p8.2.m2.1.1.1"></times><ci id="S1.p8.2.m2.1.1.2.cmml" xref="S1.p8.2.m2.1.1.2">𝒞</ci><apply id="S1.p8.2.m2.1.1.3.cmml" xref="S1.p8.2.m2.1.1.3"><csymbol cd="ambiguous" id="S1.p8.2.m2.1.1.3.1.cmml" xref="S1.p8.2.m2.1.1.3">subscript</csymbol><ci id="S1.p8.2.m2.1.1.3.2.cmml" xref="S1.p8.2.m2.1.1.3.2">𝒫</ci><ci id="S1.p8.2.m2.1.1.3.3.cmml" xref="S1.p8.2.m2.1.1.3.3">𝐸</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p8.2.m2.1c">\mathcal{C}\times\mathcal{P}_{E}</annotation></semantics></math> to <math id="S1.p8.3.m3.1" class="ltx_Math" alttext="\frac{\mathcal{C}\times\mathcal{P}_{E}}{\mathcal{S}^{2}}" display="inline"><semantics id="S1.p8.3.m3.1a"><mfrac id="S1.p8.3.m3.1.1" xref="S1.p8.3.m3.1.1.cmml"><mrow id="S1.p8.3.m3.1.1.2" xref="S1.p8.3.m3.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p8.3.m3.1.1.2.2" xref="S1.p8.3.m3.1.1.2.2.cmml">𝒞</mi><mo lspace="0.222em" rspace="0.222em" id="S1.p8.3.m3.1.1.2.1" xref="S1.p8.3.m3.1.1.2.1.cmml">×</mo><msub id="S1.p8.3.m3.1.1.2.3" xref="S1.p8.3.m3.1.1.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p8.3.m3.1.1.2.3.2" xref="S1.p8.3.m3.1.1.2.3.2.cmml">𝒫</mi><mi id="S1.p8.3.m3.1.1.2.3.3" xref="S1.p8.3.m3.1.1.2.3.3.cmml">E</mi></msub></mrow><msup id="S1.p8.3.m3.1.1.3" xref="S1.p8.3.m3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p8.3.m3.1.1.3.2" xref="S1.p8.3.m3.1.1.3.2.cmml">𝒮</mi><mn id="S1.p8.3.m3.1.1.3.3" xref="S1.p8.3.m3.1.1.3.3.cmml">2</mn></msup></mfrac><annotation-xml encoding="MathML-Content" id="S1.p8.3.m3.1b"><apply id="S1.p8.3.m3.1.1.cmml" xref="S1.p8.3.m3.1.1"><divide id="S1.p8.3.m3.1.1.1.cmml" xref="S1.p8.3.m3.1.1"></divide><apply id="S1.p8.3.m3.1.1.2.cmml" xref="S1.p8.3.m3.1.1.2"><times id="S1.p8.3.m3.1.1.2.1.cmml" xref="S1.p8.3.m3.1.1.2.1"></times><ci id="S1.p8.3.m3.1.1.2.2.cmml" xref="S1.p8.3.m3.1.1.2.2">𝒞</ci><apply id="S1.p8.3.m3.1.1.2.3.cmml" xref="S1.p8.3.m3.1.1.2.3"><csymbol cd="ambiguous" id="S1.p8.3.m3.1.1.2.3.1.cmml" xref="S1.p8.3.m3.1.1.2.3">subscript</csymbol><ci id="S1.p8.3.m3.1.1.2.3.2.cmml" xref="S1.p8.3.m3.1.1.2.3.2">𝒫</ci><ci id="S1.p8.3.m3.1.1.2.3.3.cmml" xref="S1.p8.3.m3.1.1.2.3.3">𝐸</ci></apply></apply><apply id="S1.p8.3.m3.1.1.3.cmml" xref="S1.p8.3.m3.1.1.3"><csymbol cd="ambiguous" id="S1.p8.3.m3.1.1.3.1.cmml" xref="S1.p8.3.m3.1.1.3">superscript</csymbol><ci id="S1.p8.3.m3.1.1.3.2.cmml" xref="S1.p8.3.m3.1.1.3.2">𝒮</ci><cn type="integer" id="S1.p8.3.m3.1.1.3.3.cmml" xref="S1.p8.3.m3.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p8.3.m3.1c">\frac{\mathcal{C}\times\mathcal{P}_{E}}{\mathcal{S}^{2}}</annotation></semantics></math> for each shard, or <math id="S1.p8.4.m4.1" class="ltx_Math" alttext="\frac{\mathcal{C}\times\mathcal{P}_{E}}{\mathcal{S}}" display="inline"><semantics id="S1.p8.4.m4.1a"><mfrac id="S1.p8.4.m4.1.1" xref="S1.p8.4.m4.1.1.cmml"><mrow id="S1.p8.4.m4.1.1.2" xref="S1.p8.4.m4.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p8.4.m4.1.1.2.2" xref="S1.p8.4.m4.1.1.2.2.cmml">𝒞</mi><mo lspace="0.222em" rspace="0.222em" id="S1.p8.4.m4.1.1.2.1" xref="S1.p8.4.m4.1.1.2.1.cmml">×</mo><msub id="S1.p8.4.m4.1.1.2.3" xref="S1.p8.4.m4.1.1.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p8.4.m4.1.1.2.3.2" xref="S1.p8.4.m4.1.1.2.3.2.cmml">𝒫</mi><mi id="S1.p8.4.m4.1.1.2.3.3" xref="S1.p8.4.m4.1.1.2.3.3.cmml">E</mi></msub></mrow><mi class="ltx_font_mathcaligraphic" id="S1.p8.4.m4.1.1.3" xref="S1.p8.4.m4.1.1.3.cmml">𝒮</mi></mfrac><annotation-xml encoding="MathML-Content" id="S1.p8.4.m4.1b"><apply id="S1.p8.4.m4.1.1.cmml" xref="S1.p8.4.m4.1.1"><divide id="S1.p8.4.m4.1.1.1.cmml" xref="S1.p8.4.m4.1.1"></divide><apply id="S1.p8.4.m4.1.1.2.cmml" xref="S1.p8.4.m4.1.1.2"><times id="S1.p8.4.m4.1.1.2.1.cmml" xref="S1.p8.4.m4.1.1.2.1"></times><ci id="S1.p8.4.m4.1.1.2.2.cmml" xref="S1.p8.4.m4.1.1.2.2">𝒞</ci><apply id="S1.p8.4.m4.1.1.2.3.cmml" xref="S1.p8.4.m4.1.1.2.3"><csymbol cd="ambiguous" id="S1.p8.4.m4.1.1.2.3.1.cmml" xref="S1.p8.4.m4.1.1.2.3">subscript</csymbol><ci id="S1.p8.4.m4.1.1.2.3.2.cmml" xref="S1.p8.4.m4.1.1.2.3.2">𝒫</ci><ci id="S1.p8.4.m4.1.1.2.3.3.cmml" xref="S1.p8.4.m4.1.1.2.3.3">𝐸</ci></apply></apply><ci id="S1.p8.4.m4.1.1.3.cmml" xref="S1.p8.4.m4.1.1.3">𝒮</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p8.4.m4.1c">\frac{\mathcal{C}\times\mathcal{P}_{E}}{\mathcal{S}}</annotation></semantics></math> globally.</p>
</div>
<div id="S1.p9" class="ltx_para">
<p id="S1.p9.1" class="ltx_p">To preserve the security of the system across shards, we propose a flexible protocol allowing for a pluggable poisoning mitigation, and detection strategies <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib10" title="" class="ltx_ref">ref:roni, </a>; <a href="#bib.bib11" title="" class="ltx_ref">ref:krum, </a>; <a href="#bib.bib12" title="" class="ltx_ref">ref:fools-gold, </a>; <a href="#bib.bib13" title="" class="ltx_ref">ref:attack-adaptive-aggregation, </a>)</cite>. This allows proposed models to adopt suitable strategies, while allowing the system evolves with recent advances.</p>
</div>
<div id="S1.p10" class="ltx_para">
<p id="S1.p10.1" class="ltx_p">Our <span id="S1.p10.1.1" class="ltx_text ltx_font_italic">key contributions</span> of this paper can be summarized as follows:</p>
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p">a <span id="S1.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">sharding framework</span> called ScaleSFL, which supports a sharding solution for blockchain-based federated learning. We formally discuss the design of our algorithm for the sharding mechanism based on two consensus levels: shard-level consensus and mainchain consensus.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p">an <span id="S1.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">implementation</span> of a proof-of-concept prototype system using Hyperledger Fabric <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib14" title="" class="ltx_ref">ref:fabric, </a>)</cite> to run local experiments and evaluate the solution effectiveness.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p"><span id="S1.I1.i3.p1.1.1" class="ltx_text ltx_font_bold">benchmarks</span> that we demonstrate the performance of our implementation by using Hyperledger Caliper benchmarking tools <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib15" title="" class="ltx_ref">ref:hyperledger-caliper, </a>)</cite>, showing our framework scales linearly with the number of shards.</p>
</div>
</li>
</ul>
</div>
<div id="S1.p11" class="ltx_para">
<p id="S1.p11.1" class="ltx_p">The remainder of this paper is organized as follows. The next section provides background and related works. Our ScaleSFL framework, a sharding solution for blockchain-based federated learning, is introduced in Section <a href="#S3" title="3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>. Evaluation and discussion are presented in Sections <a href="#S4" title="4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> and <a href="#S5" title="5. Discussion ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>, respectively. Finally, we conclude our work, and describe future works in Section <a href="#S6" title="6. Conclusions ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2. </span>Background and Related Works</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">Our current work integrates the ideas of federated learning and differential privacy, as well as blockchain-based federated learning. In this section, we introduce individual topics and corresponding hybrid solutions to provide background.</p>
</div>
<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1. </span>Federated Learning and Differential Privacy</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">Privacy-preserving machine learning combines the use of federated learning with differential privacy <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib16" title="" class="ltx_ref">ref:privacy-preserving-deep-learning, </a>; <a href="#bib.bib17" title="" class="ltx_ref">ref:differential-privacy-sgd, </a>; <a href="#bib.bib18" title="" class="ltx_ref">ref:cit21, </a>)</cite>. Federated learning allows sensitive data from edge devices (e.g., smartphones, tablets, IoT devices) to remain on-device while training is done locally (distributed training on edge devices) <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib3" title="" class="ltx_ref">ref:federated-learning, </a>)</cite>. In the original FL environment, a centralized server manages the training process. The server broadcasts the current model during each round to a subset of participating nodes to activate local training (requesting a model update). After all model update submission responses are received, the server aggregates the local models into a global model and prepares for the next round <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib3" title="" class="ltx_ref">ref:federated-learning, </a>; <a href="#bib.bib9" title="" class="ltx_ref">ref:committee-consensus, </a>)</cite>. While FL offers many privacy benefits, differential privacy in conjunction provides stronger privacy guarantees <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib3" title="" class="ltx_ref">ref:federated-learning, </a>)</cite> by mitigating data reconstruct-ability via random model update noise.</p>
</div>
<div id="S2.SS1.p2" class="ltx_para">
<p id="S2.SS1.p2.1" class="ltx_p">McMahan et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib3" title="" class="ltx_ref">ref:federated-learning, </a>)</cite> proposed the Federated Averaging algorithm (FedAvg). Their algorithm is a generalization of federated stochastic gradient descent (FedSGD) <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib17" title="" class="ltx_ref">ref:differential-privacy-sgd, </a>)</cite> allowing each node to perform multiple batch updates while exchanging the models’ parameters, with which we based our FL model training approach. Experiments demonstrate that FL can be used for training a variety of high-quality machine learning models at reasonable communication cost, exemplifying high practicality <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib3" title="" class="ltx_ref">ref:federated-learning, </a>)</cite>. Therefore, we choose to apply differential privacy and use an adapted version of FedAvg for our current work.</p>
</div>
<div id="S2.SS1.p3" class="ltx_para">
<p id="S2.SS1.p3.1" class="ltx_p">Liu et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib4" title="" class="ltx_ref">ref:hierfavg, </a>)</cite> introduced HierFavg, a hierarchical scaling solution introducing multiple edge servers, each performing partial model aggregation, combining the benefits of both centralized cloud and edge computing. While centralized servers benefit from the vast reach of data collection, the communication overhead and latency of downloading and evaluating such updates limit this approach. Instead, model updates are sent to local edge servers to benefit from fast and efficient model updates, reducing the number of local iterations and total runtime. These local updates are then sent to a cloud server allowing for a sampling of the global data distribution to be considered and outperforming the local edge server performance. Combining these approaches is nontrivial, and the authors performed convergence analysis describing qualitative guidelines in applying their approach. While our approach is primarily motivated by increasing the throughput of model update metadata to blockchain ledgers, the composition of shards can benefit from the strategies found in hierarchical solutions.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2. </span>Blockchain-Based Federated Learning</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">Blockchain technology can be utilized to decentralize the aforementioned centralized server in federated learning. The aggregation and facilitation logic previously done by the central server can be replaced by implementing smart contracts <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib9" title="" class="ltx_ref">ref:committee-consensus, </a>)</cite>.</p>
</div>
<div id="S2.SS2.p2" class="ltx_para">
<p id="S2.SS2.p2.1" class="ltx_p">In addition to Ramanan and Nakayama’s blockchain-based aggregator free federated learning (BAFFLE) <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib8" title="" class="ltx_ref">ref:baffle, </a>)</cite> and Li et al.’s blockchain-based federated learning framework with committee consensus <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib9" title="" class="ltx_ref">ref:committee-consensus, </a>)</cite> referenced earlier, numerous strategies for integrating blockchain technology with federated learning to achieve decentralization have been considered <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib19" title="" class="ltx_ref">SatybaldyN20, </a>)</cite>. However, the approaches proposed by previous works do not directly focus on the performance of their chosen underlying consensus mechanism with which their proposed frameworks are built upon.</p>
</div>
<section id="S2.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.1. </span>Blockchain Integration</h4>

<div id="S2.SS2.SSS1.p1" class="ltx_para">
<p id="S2.SS2.SSS1.p1.1" class="ltx_p">Kim et al.’s blockchain-based federated learning (BlockFL) <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib20" title="" class="ltx_ref">ref:bc-on-device-fl, </a>)</cite> was implemented using the proof-of-work consensus mechanism and focused on analyzing the end-to-end latency of their system. Ma et al.’s proposed blockchain-assisted decentralized FL (BLADE-FL) <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib21" title="" class="ltx_ref">ref:fl-meets-bc, </a>)</cite> was able to address the single point of failure issue while analyzing the learning performance. Liu et al.’s proposed federated learning with asynchronous convergence (FedAC) method <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib22" title="" class="ltx_ref">ref:bfl-async, </a>)</cite> seeks to improve communication performance through integrating asynchronous global aggregation. While these works focus on the performance of various system components, they do not consider the scalability requirements for large numbers of participants and the impact on the consensus mechanism’s throughput.</p>
</div>
<div id="S2.SS2.SSS1.p2" class="ltx_para">
<p id="S2.SS2.SSS1.p2.1" class="ltx_p">Additionally, many blockchain-based federated learning applications with domain-specific frameworks have also been proposed. For example, healthcare <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib23" title="" class="ltx_ref">ref:bfl-healthcare, </a>)</cite>, IoT <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib24" title="" class="ltx_ref">ref:bfl-iot, </a>)</cite> and 6G networks <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib25" title="" class="ltx_ref">ref:bfl-6g, </a>)</cite>. Similarly, these works focus on cutting-edge implementation plausibility rather than scalability or details regarding the performance of their consensus mechanisms.</p>
</div>
<div id="S2.SS2.SSS1.p3" class="ltx_para">
<p id="S2.SS2.SSS1.p3.1" class="ltx_p">Gai et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib26" title="" class="ltx_ref">ref:bfl-iiot, </a>)</cite> proposed a model that utilizes a blockchain-based solution to develop a privacy-preserving environment for task allocations in a cloud/edge system. Employing blockchain enhances trustworthiness in edge nodes and security in communications. Utilizing smart contracts also contributes toward reaching optimal task allocations. The model applies a differential privacy algorithm (Laplace distribution mechanism <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib6" title="" class="ltx_ref">ref:differential-privacy, </a>)</cite>) to process energy cost data in edge nodes.</p>
</div>
<div id="S2.SS2.SSS1.p4" class="ltx_para">
<p id="S2.SS2.SSS1.p4.1" class="ltx_p">Li et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib9" title="" class="ltx_ref">ref:committee-consensus, </a>)</cite> proposed a blockchain-based FL framework with committee consensus in response to consensus mechanism efficiency and framework scalability. The committee consensus mechanism works as follows: A subset of nodes constitutes a committee responsible for validating model updates and new block generation. Meanwhile, the other nodes only execute their local model training and send their updates to the committee nodes. This committee is re-elected every round based on scores from the previous round, or alternatively, re-election is randomized for implementation simplicity. Li et al. demonstrated that committee consensus is more efficient and scalable while remaining secure.</p>
</div>
</section>
<section id="S2.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.2. </span>Sharding Solutions</h4>

<div id="S2.SS2.SSS2.p1" class="ltx_para">
<p id="S2.SS2.SSS2.p1.1" class="ltx_p">Sharding allows for scalability by splitting the network into smaller subgroups. This reduces storage and communication requirements while increasing throughput as the number of shards increases.</p>
</div>
<div id="S2.SS2.SSS2.p2" class="ltx_para">
<p id="S2.SS2.SSS2.p2.1" class="ltx_p">Yuan et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib27" title="" class="ltx_ref">ref:bfl-shard, </a>)</cite> proposed ChainFL, a two-layered blockchain-driven FL system that splits an IoT network into multiple shards. Also using Hyperledger Fabric <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib14" title="" class="ltx_ref">ref:fabric, </a>)</cite>, ChainFL adopts a direct acyclic graph (DAG)-based mainchain to achieve parallel (and asynchronous) cross-shard validation. While their approach is DAG-based, we focus on a hierarchical FL solution, and are able to use existing off-chain FL frameworks to increase interoperability.</p>
</div>
</section>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3. </span>Model Update Poisoning</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.1" class="ltx_p">A notable issue when aggregating model updates from untrusted and potentially adversarial clients are model poisoning attacks. In order to disrupt or bias the training process, and adversary may submit biased, or corrupted model updates. Because model updates must be verified prior to being accepted to the ledger, we consider each defence mechanism applied to each endorsing peer rather than a single centralized server. One possibility to make the training more robust is to apply norm constraints to each model update, such as clipping model updates and applying random noise to the aggregated model to prevent overfitting <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib28" title="" class="ltx_ref">ref:fl-survey, </a>)</cite>. However, further mechanisms are required to counter adversarial examples and backdoors <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib29" title="" class="ltx_ref">ref:fl-backdoor, </a>)</cite>. A subset of model poisoning is data poisoning attacks. These occur when the clients’ dataset has been altered, such as a targeted attack by adversarial manipulation of edge devices, or untargeted such as a faulty data collection process, resulting in corrupted samples (e.g., incorrect labels). Here, we focus on readily applicable works related to the general detection of poisoned model updates.</p>
</div>
<div id="S2.SS3.p2" class="ltx_para">
<p id="S2.SS3.p2.1" class="ltx_p">Barreno et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib10" title="" class="ltx_ref">ref:roni, </a>)</cite> proposed a technique to determine which samples from a training set are malicious. To do so, they present the reject on negative influence (RONI) defence. This method measures the effect each training sample has on the accuracy of the model. This defence strategy is appropriately modified to suit the needs of a FL setting. Instead, we measure the influence of each model update on the accuracy of the global model. This can be done by utilizing a held-out testing set, potentially unique to each endorsing peer. This defence is not suitable for general FL applications due to the nature of client data being non-IID and incorrectly rejected due to misrepresentation by the test set. Additionally, malicious updates may go unnoticed due depending on the threshold of acceptance.</p>
</div>
<div id="S2.SS3.p3" class="ltx_para">
<p id="S2.SS3.p3.1" class="ltx_p">Blanchard et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib11" title="" class="ltx_ref">ref:krum, </a>)</cite> introduced a method designed to counter adversarial updates in a FL setting. Multi-Krum is a byzantine-resilient defence strategy that selects <math id="S2.SS3.p3.1.m1.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S2.SS3.p3.1.m1.1a"><mi id="S2.SS3.p3.1.m1.1.1" xref="S2.SS3.p3.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.1.m1.1b"><ci id="S2.SS3.p3.1.m1.1.1.cmml" xref="S2.SS3.p3.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.1.m1.1c">n</annotation></semantics></math> vectors furthest from the calculated mean, removing them from the aggregated gradient update. These distances are calculated based on the euclidean distance between gradient vectors. This strategy is effective for attacks with up to 33% compromised/adversarial clients. However, the calculated mean can be influenced by the Sybil updates and may fail for an attacker with more significant influence over the network.</p>
</div>
<div id="S2.SS3.p4" class="ltx_para">
<p id="S2.SS3.p4.1" class="ltx_p">Fung et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib12" title="" class="ltx_ref">ref:fools-gold, </a>)</cite> proposed a novel defence strategy to discriminate between honest clients and Sybils based on the diversity of their respective gradient updates. The intuition behind this defence is to identify Sybils based on a shared objective, and thus their models’ updates are likely to have low variance. This works by using a cosine similarity, looking for similarity in terms of indicative features (i.e., those that contribute to the correctness of the update). This approach can be further augmented with other defence methods such as Multi-Krum to determine the poisoned updates.</p>
</div>
<div id="S2.SS3.p5" class="ltx_para">
<p id="S2.SS3.p5.1" class="ltx_p">Wan and Chen <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib13" title="" class="ltx_ref">ref:attack-adaptive-aggregation, </a>)</cite> introduced an attack-adaptive defence utilizing an attention-based neural network to learn plausible attacks. Instead of using similarity-based mechanisms, this introduces tailored defence strategies to prevent backdoor attacks.</p>
</div>
<div id="S2.SS3.p6" class="ltx_para">
<p id="S2.SS3.p6.1" class="ltx_p">Ma et al. <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib30" title="" class="ltx_ref">ref:dp-data-poisoning, </a>)</cite> explored differential privacy as a data poisoning defence based on creating a robust learning algorithm. While this defence is ideal for systems already using differential privacy, it enforces the use of noise in the learning algorithm, hurting performance. Additionally, this assumes a small subset of malicious clients, failing to defend against larger coordinated attacks.</p>
</div>
<figure id="S2.F1" class="ltx_figure"><img src="/html/2204.01202/assets/sharded-tasks.png" id="S2.F1.g1" class="ltx_graphics ltx_centering ltx_img_square" width="538" height="468" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1. </span>Global overview of our FL sharding approach</figcaption>
</figure>
<div id="S2.SS3.p7" class="ltx_para">
<p id="S2.SS3.p7.1" class="ltx_p">Related attacks, such as model update plagiarism <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib21" title="" class="ltx_ref">ref:fl-meets-bc, </a>)</cite>, may additionally occur, leading to a misleading distribution of data amongst clients. A malicious user may attempt to submit the same model update multiple times through several clients, known as lazy clients. They may then attempt to reap the rewards of contribution for each of these submissions. These can be detected by using a PN-sequence <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib21" title="" class="ltx_ref">ref:fl-meets-bc, </a>; <a href="#bib.bib31" title="" class="ltx_ref">ref:blade-fl-analysis, </a>)</cite>, whereby the initial model update is submitted with random noise applied to the update and is then further verified by other clients using their own PN-sequence, checking for correlation.</p>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3. </span>Our Sharding Solution</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">This section describes our approach and outlines the architecture for our proposed sharding solution. An outline of the workflow can be seen in Figure <a href="#S2.F1" title="Figure 1 ‣ 2.3. Model Update Poisoning ‣ 2. Background and Related Works ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>. We can break this into two primary components, the mainchain, which coordinates aggregated models from shards, and the individual shard chains.</p>
</div>
<div id="S3.p2" class="ltx_para">
<p id="S3.p2.1" class="ltx_p">Our framework follows a few core principles. Our solution is modular such that (a) the policies that govern model acceptance are abstracted, for example, model update poisoning, and mitigation strategies (Section <a href="#S2.SS3" title="2.3. Model Update Poisoning ‣ 2. Background and Related Works ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.3</span></a>), are supported to determine model acceptance. Our framework additionally (b) supports external FL coordination, such that new paradigms such as data-centric FL are supported. This means the source of models updates is agnostic.</p>
</div>
<div id="S3.p3" class="ltx_para">
<p id="S3.p3.1" class="ltx_p">With these principles, our solution acts as an additional component to existing FL workflows such that it handles model provenance, the evolution of security and poisoning defences, scalability through sharding, and the possibility of reward distribution for future works. Therefore, we solve the initial problem of FL systems being dependent on a central service to aggregate updates, providing a trusted system to pin verified model updates. We will further discuss the components of this system below.</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1. </span>FL Algorithm</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.2" class="ltx_p">The underlying problem of federated learning is to produce a global model from client updates trained on local privacy-sensitive datasets. We can define each client <math id="S3.SS1.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{C}_{k}" display="inline"><semantics id="S3.SS1.p1.1.m1.1a"><msub id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.1.m1.1.1.2" xref="S3.SS1.p1.1.m1.1.1.2.cmml">𝒞</mi><mi id="S3.SS1.p1.1.m1.1.1.3" xref="S3.SS1.p1.1.m1.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><apply id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p1.1.m1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.1.1.2">𝒞</ci><ci id="S3.SS1.p1.1.m1.1.1.3.cmml" xref="S3.SS1.p1.1.m1.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">\mathcal{C}_{k}</annotation></semantics></math> to have their own set of data <math id="S3.SS1.p1.2.m2.3" class="ltx_Math" alttext="D_{k}\subseteq D,\forall k,0\leq i\leq K" display="inline"><semantics id="S3.SS1.p1.2.m2.3a"><mrow id="S3.SS1.p1.2.m2.3.3.2" xref="S3.SS1.p1.2.m2.3.3.3.cmml"><mrow id="S3.SS1.p1.2.m2.2.2.1.1" xref="S3.SS1.p1.2.m2.2.2.1.1.cmml"><msub id="S3.SS1.p1.2.m2.2.2.1.1.3" xref="S3.SS1.p1.2.m2.2.2.1.1.3.cmml"><mi id="S3.SS1.p1.2.m2.2.2.1.1.3.2" xref="S3.SS1.p1.2.m2.2.2.1.1.3.2.cmml">D</mi><mi id="S3.SS1.p1.2.m2.2.2.1.1.3.3" xref="S3.SS1.p1.2.m2.2.2.1.1.3.3.cmml">k</mi></msub><mo id="S3.SS1.p1.2.m2.2.2.1.1.2" xref="S3.SS1.p1.2.m2.2.2.1.1.2.cmml">⊆</mo><mrow id="S3.SS1.p1.2.m2.2.2.1.1.1.1" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2.cmml"><mi id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml">D</mi><mo id="S3.SS1.p1.2.m2.2.2.1.1.1.1.2" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2.cmml">,</mo><mrow id="S3.SS1.p1.2.m2.2.2.1.1.1.1.1" xref="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.cmml"><mo rspace="0.167em" id="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.1" xref="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.1.cmml">∀</mo><mi id="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.2" xref="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.2.cmml">k</mi></mrow></mrow></mrow><mo id="S3.SS1.p1.2.m2.3.3.2.3" xref="S3.SS1.p1.2.m2.3.3.3a.cmml">,</mo><mrow id="S3.SS1.p1.2.m2.3.3.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.cmml"><mn id="S3.SS1.p1.2.m2.3.3.2.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.2.cmml">0</mn><mo id="S3.SS1.p1.2.m2.3.3.2.2.3" xref="S3.SS1.p1.2.m2.3.3.2.2.3.cmml">≤</mo><mi id="S3.SS1.p1.2.m2.3.3.2.2.4" xref="S3.SS1.p1.2.m2.3.3.2.2.4.cmml">i</mi><mo id="S3.SS1.p1.2.m2.3.3.2.2.5" xref="S3.SS1.p1.2.m2.3.3.2.2.5.cmml">≤</mo><mi id="S3.SS1.p1.2.m2.3.3.2.2.6" xref="S3.SS1.p1.2.m2.3.3.2.2.6.cmml">K</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.3b"><apply id="S3.SS1.p1.2.m2.3.3.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.3.3.3a.cmml" xref="S3.SS1.p1.2.m2.3.3.2.3">formulae-sequence</csymbol><apply id="S3.SS1.p1.2.m2.2.2.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1"><subset id="S3.SS1.p1.2.m2.2.2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.2"></subset><apply id="S3.SS1.p1.2.m2.2.2.1.1.3.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.2.2.1.1.3.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.2.m2.2.2.1.1.3.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.3.2">𝐷</ci><ci id="S3.SS1.p1.2.m2.2.2.1.1.3.3.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.3.3">𝑘</ci></apply><list id="S3.SS1.p1.2.m2.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.1"><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">𝐷</ci><apply id="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.1">for-all</csymbol><ci id="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.1.1.2">𝑘</ci></apply></list></apply><apply id="S3.SS1.p1.2.m2.3.3.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2"><and id="S3.SS1.p1.2.m2.3.3.2.2a.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2"></and><apply id="S3.SS1.p1.2.m2.3.3.2.2b.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2"><leq id="S3.SS1.p1.2.m2.3.3.2.2.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.3"></leq><cn type="integer" id="S3.SS1.p1.2.m2.3.3.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2">0</cn><ci id="S3.SS1.p1.2.m2.3.3.2.2.4.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.4">𝑖</ci></apply><apply id="S3.SS1.p1.2.m2.3.3.2.2c.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2"><leq id="S3.SS1.p1.2.m2.3.3.2.2.5.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.5"></leq><share href="#S3.SS1.p1.2.m2.3.3.2.2.4.cmml" id="S3.SS1.p1.2.m2.3.3.2.2d.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2"></share><ci id="S3.SS1.p1.2.m2.3.3.2.2.6.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.6">𝐾</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.3c">D_{k}\subseteq D,\forall k,0\leq i\leq K</annotation></semantics></math>. Using this, we can define the global objective to optimize as a modification of the FedAvg algorithm <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib3" title="" class="ltx_ref">ref:federated-learning, </a>)</cite> as</p>
<table id="S3.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(1)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E1.m1.6" class="ltx_Math" alttext="\underset{w\in R^{d}}{min}f(w)\quad\textrm{and}\quad\underset{w\in R^{d}}{min}F_{k}(w)\quad\textrm{for each client}" display="block"><semantics id="S3.E1.m1.6a"><mrow id="S3.E1.m1.6.6.2" xref="S3.E1.m1.6.6.3.cmml"><mrow id="S3.E1.m1.5.5.1.1" xref="S3.E1.m1.5.5.1.1.cmml"><munder accentunder="true" id="S3.E1.m1.5.5.1.1.2" xref="S3.E1.m1.5.5.1.1.2.cmml"><mrow id="S3.E1.m1.5.5.1.1.2.2" xref="S3.E1.m1.5.5.1.1.2.2.cmml"><mi id="S3.E1.m1.5.5.1.1.2.2.2" xref="S3.E1.m1.5.5.1.1.2.2.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.5.5.1.1.2.2.1" xref="S3.E1.m1.5.5.1.1.2.2.1.cmml">​</mo><mi id="S3.E1.m1.5.5.1.1.2.2.3" xref="S3.E1.m1.5.5.1.1.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.5.5.1.1.2.2.1a" xref="S3.E1.m1.5.5.1.1.2.2.1.cmml">​</mo><mi id="S3.E1.m1.5.5.1.1.2.2.4" xref="S3.E1.m1.5.5.1.1.2.2.4.cmml">n</mi></mrow><mrow id="S3.E1.m1.5.5.1.1.2.1" xref="S3.E1.m1.5.5.1.1.2.1.cmml"><mi id="S3.E1.m1.5.5.1.1.2.1.2" xref="S3.E1.m1.5.5.1.1.2.1.2.cmml">w</mi><mo id="S3.E1.m1.5.5.1.1.2.1.1" xref="S3.E1.m1.5.5.1.1.2.1.1.cmml">∈</mo><msup id="S3.E1.m1.5.5.1.1.2.1.3" xref="S3.E1.m1.5.5.1.1.2.1.3.cmml"><mi id="S3.E1.m1.5.5.1.1.2.1.3.2" xref="S3.E1.m1.5.5.1.1.2.1.3.2.cmml">R</mi><mi id="S3.E1.m1.5.5.1.1.2.1.3.3" xref="S3.E1.m1.5.5.1.1.2.1.3.3.cmml">d</mi></msup></mrow></munder><mo lspace="0em" rspace="0em" id="S3.E1.m1.5.5.1.1.1" xref="S3.E1.m1.5.5.1.1.1.cmml">​</mo><mi id="S3.E1.m1.5.5.1.1.3" xref="S3.E1.m1.5.5.1.1.3.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.5.5.1.1.1a" xref="S3.E1.m1.5.5.1.1.1.cmml">​</mo><mrow id="S3.E1.m1.5.5.1.1.4.2" xref="S3.E1.m1.5.5.1.1.cmml"><mo stretchy="false" id="S3.E1.m1.5.5.1.1.4.2.1" xref="S3.E1.m1.5.5.1.1.cmml">(</mo><mi id="S3.E1.m1.1.1" xref="S3.E1.m1.1.1.cmml">w</mi><mo stretchy="false" id="S3.E1.m1.5.5.1.1.4.2.2" xref="S3.E1.m1.5.5.1.1.cmml">)</mo></mrow></mrow><mspace width="1em" id="S3.E1.m1.6.6.2.3" xref="S3.E1.m1.6.6.3.cmml"></mspace><mtext id="S3.E1.m1.3.3" xref="S3.E1.m1.3.3a.cmml">and</mtext><mspace width="1em" id="S3.E1.m1.6.6.2.4" xref="S3.E1.m1.6.6.3.cmml"></mspace><mrow id="S3.E1.m1.6.6.2.2" xref="S3.E1.m1.6.6.2.2.cmml"><munder accentunder="true" id="S3.E1.m1.6.6.2.2.2" xref="S3.E1.m1.6.6.2.2.2.cmml"><mrow id="S3.E1.m1.6.6.2.2.2.2" xref="S3.E1.m1.6.6.2.2.2.2.cmml"><mi id="S3.E1.m1.6.6.2.2.2.2.2" xref="S3.E1.m1.6.6.2.2.2.2.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.6.6.2.2.2.2.1" xref="S3.E1.m1.6.6.2.2.2.2.1.cmml">​</mo><mi id="S3.E1.m1.6.6.2.2.2.2.3" xref="S3.E1.m1.6.6.2.2.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.6.6.2.2.2.2.1a" xref="S3.E1.m1.6.6.2.2.2.2.1.cmml">​</mo><mi id="S3.E1.m1.6.6.2.2.2.2.4" xref="S3.E1.m1.6.6.2.2.2.2.4.cmml">n</mi></mrow><mrow id="S3.E1.m1.6.6.2.2.2.1" xref="S3.E1.m1.6.6.2.2.2.1.cmml"><mi id="S3.E1.m1.6.6.2.2.2.1.2" xref="S3.E1.m1.6.6.2.2.2.1.2.cmml">w</mi><mo id="S3.E1.m1.6.6.2.2.2.1.1" xref="S3.E1.m1.6.6.2.2.2.1.1.cmml">∈</mo><msup id="S3.E1.m1.6.6.2.2.2.1.3" xref="S3.E1.m1.6.6.2.2.2.1.3.cmml"><mi id="S3.E1.m1.6.6.2.2.2.1.3.2" xref="S3.E1.m1.6.6.2.2.2.1.3.2.cmml">R</mi><mi id="S3.E1.m1.6.6.2.2.2.1.3.3" xref="S3.E1.m1.6.6.2.2.2.1.3.3.cmml">d</mi></msup></mrow></munder><mo lspace="0em" rspace="0em" id="S3.E1.m1.6.6.2.2.1" xref="S3.E1.m1.6.6.2.2.1.cmml">​</mo><msub id="S3.E1.m1.6.6.2.2.3" xref="S3.E1.m1.6.6.2.2.3.cmml"><mi id="S3.E1.m1.6.6.2.2.3.2" xref="S3.E1.m1.6.6.2.2.3.2.cmml">F</mi><mi id="S3.E1.m1.6.6.2.2.3.3" xref="S3.E1.m1.6.6.2.2.3.3.cmml">k</mi></msub><mo lspace="0em" rspace="0em" id="S3.E1.m1.6.6.2.2.1a" xref="S3.E1.m1.6.6.2.2.1.cmml">​</mo><mrow id="S3.E1.m1.6.6.2.2.4.2" xref="S3.E1.m1.6.6.2.2.cmml"><mo stretchy="false" id="S3.E1.m1.6.6.2.2.4.2.1" xref="S3.E1.m1.6.6.2.2.cmml">(</mo><mi id="S3.E1.m1.2.2" xref="S3.E1.m1.2.2.cmml">w</mi><mo stretchy="false" id="S3.E1.m1.6.6.2.2.4.2.2" xref="S3.E1.m1.6.6.2.2.cmml">)</mo></mrow></mrow><mspace width="1em" id="S3.E1.m1.6.6.2.5" xref="S3.E1.m1.6.6.3.cmml"></mspace><mtext id="S3.E1.m1.4.4" xref="S3.E1.m1.4.4a.cmml">for each client</mtext></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.6b"><list id="S3.E1.m1.6.6.3.cmml" xref="S3.E1.m1.6.6.2"><apply id="S3.E1.m1.5.5.1.1.cmml" xref="S3.E1.m1.5.5.1.1"><times id="S3.E1.m1.5.5.1.1.1.cmml" xref="S3.E1.m1.5.5.1.1.1"></times><apply id="S3.E1.m1.5.5.1.1.2.cmml" xref="S3.E1.m1.5.5.1.1.2"><apply id="S3.E1.m1.5.5.1.1.2.1.cmml" xref="S3.E1.m1.5.5.1.1.2.1"><in id="S3.E1.m1.5.5.1.1.2.1.1.cmml" xref="S3.E1.m1.5.5.1.1.2.1.1"></in><ci id="S3.E1.m1.5.5.1.1.2.1.2.cmml" xref="S3.E1.m1.5.5.1.1.2.1.2">𝑤</ci><apply id="S3.E1.m1.5.5.1.1.2.1.3.cmml" xref="S3.E1.m1.5.5.1.1.2.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.1.1.2.1.3.1.cmml" xref="S3.E1.m1.5.5.1.1.2.1.3">superscript</csymbol><ci id="S3.E1.m1.5.5.1.1.2.1.3.2.cmml" xref="S3.E1.m1.5.5.1.1.2.1.3.2">𝑅</ci><ci id="S3.E1.m1.5.5.1.1.2.1.3.3.cmml" xref="S3.E1.m1.5.5.1.1.2.1.3.3">𝑑</ci></apply></apply><apply id="S3.E1.m1.5.5.1.1.2.2.cmml" xref="S3.E1.m1.5.5.1.1.2.2"><times id="S3.E1.m1.5.5.1.1.2.2.1.cmml" xref="S3.E1.m1.5.5.1.1.2.2.1"></times><ci id="S3.E1.m1.5.5.1.1.2.2.2.cmml" xref="S3.E1.m1.5.5.1.1.2.2.2">𝑚</ci><ci id="S3.E1.m1.5.5.1.1.2.2.3.cmml" xref="S3.E1.m1.5.5.1.1.2.2.3">𝑖</ci><ci id="S3.E1.m1.5.5.1.1.2.2.4.cmml" xref="S3.E1.m1.5.5.1.1.2.2.4">𝑛</ci></apply></apply><ci id="S3.E1.m1.5.5.1.1.3.cmml" xref="S3.E1.m1.5.5.1.1.3">𝑓</ci><ci id="S3.E1.m1.1.1.cmml" xref="S3.E1.m1.1.1">𝑤</ci></apply><ci id="S3.E1.m1.3.3a.cmml" xref="S3.E1.m1.3.3"><mtext id="S3.E1.m1.3.3.cmml" xref="S3.E1.m1.3.3">and</mtext></ci><apply id="S3.E1.m1.6.6.2.2.cmml" xref="S3.E1.m1.6.6.2.2"><times id="S3.E1.m1.6.6.2.2.1.cmml" xref="S3.E1.m1.6.6.2.2.1"></times><apply id="S3.E1.m1.6.6.2.2.2.cmml" xref="S3.E1.m1.6.6.2.2.2"><apply id="S3.E1.m1.6.6.2.2.2.1.cmml" xref="S3.E1.m1.6.6.2.2.2.1"><in id="S3.E1.m1.6.6.2.2.2.1.1.cmml" xref="S3.E1.m1.6.6.2.2.2.1.1"></in><ci id="S3.E1.m1.6.6.2.2.2.1.2.cmml" xref="S3.E1.m1.6.6.2.2.2.1.2">𝑤</ci><apply id="S3.E1.m1.6.6.2.2.2.1.3.cmml" xref="S3.E1.m1.6.6.2.2.2.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.6.6.2.2.2.1.3.1.cmml" xref="S3.E1.m1.6.6.2.2.2.1.3">superscript</csymbol><ci id="S3.E1.m1.6.6.2.2.2.1.3.2.cmml" xref="S3.E1.m1.6.6.2.2.2.1.3.2">𝑅</ci><ci id="S3.E1.m1.6.6.2.2.2.1.3.3.cmml" xref="S3.E1.m1.6.6.2.2.2.1.3.3">𝑑</ci></apply></apply><apply id="S3.E1.m1.6.6.2.2.2.2.cmml" xref="S3.E1.m1.6.6.2.2.2.2"><times id="S3.E1.m1.6.6.2.2.2.2.1.cmml" xref="S3.E1.m1.6.6.2.2.2.2.1"></times><ci id="S3.E1.m1.6.6.2.2.2.2.2.cmml" xref="S3.E1.m1.6.6.2.2.2.2.2">𝑚</ci><ci id="S3.E1.m1.6.6.2.2.2.2.3.cmml" xref="S3.E1.m1.6.6.2.2.2.2.3">𝑖</ci><ci id="S3.E1.m1.6.6.2.2.2.2.4.cmml" xref="S3.E1.m1.6.6.2.2.2.2.4">𝑛</ci></apply></apply><apply id="S3.E1.m1.6.6.2.2.3.cmml" xref="S3.E1.m1.6.6.2.2.3"><csymbol cd="ambiguous" id="S3.E1.m1.6.6.2.2.3.1.cmml" xref="S3.E1.m1.6.6.2.2.3">subscript</csymbol><ci id="S3.E1.m1.6.6.2.2.3.2.cmml" xref="S3.E1.m1.6.6.2.2.3.2">𝐹</ci><ci id="S3.E1.m1.6.6.2.2.3.3.cmml" xref="S3.E1.m1.6.6.2.2.3.3">𝑘</ci></apply><ci id="S3.E1.m1.2.2.cmml" xref="S3.E1.m1.2.2">𝑤</ci></apply><ci id="S3.E1.m1.4.4a.cmml" xref="S3.E1.m1.4.4"><mtext id="S3.E1.m1.4.4.cmml" xref="S3.E1.m1.4.4">for each client</mtext></ci></list></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.6c">\underset{w\in R^{d}}{min}f(w)\quad\textrm{and}\quad\underset{w\in R^{d}}{min}F_{k}(w)\quad\textrm{for each client}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.7" class="ltx_p">where the batch loss for each client is defined as</p>
<table id="S3.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(2)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E2.m1.8" class="ltx_Math" alttext="f_{b_{k,i}}(w)=\frac{1}{|b_{k}|}\sum_{x_{i}\in b_{k,i}}l(x_{i},w_{k})" display="block"><semantics id="S3.E2.m1.8a"><mrow id="S3.E2.m1.8.8" xref="S3.E2.m1.8.8.cmml"><mrow id="S3.E2.m1.8.8.4" xref="S3.E2.m1.8.8.4.cmml"><msub id="S3.E2.m1.8.8.4.2" xref="S3.E2.m1.8.8.4.2.cmml"><mi id="S3.E2.m1.8.8.4.2.2" xref="S3.E2.m1.8.8.4.2.2.cmml">f</mi><msub id="S3.E2.m1.2.2.2" xref="S3.E2.m1.2.2.2.cmml"><mi id="S3.E2.m1.2.2.2.4" xref="S3.E2.m1.2.2.2.4.cmml">b</mi><mrow id="S3.E2.m1.2.2.2.2.2.4" xref="S3.E2.m1.2.2.2.2.2.3.cmml"><mi id="S3.E2.m1.1.1.1.1.1.1" xref="S3.E2.m1.1.1.1.1.1.1.cmml">k</mi><mo id="S3.E2.m1.2.2.2.2.2.4.1" xref="S3.E2.m1.2.2.2.2.2.3.cmml">,</mo><mi id="S3.E2.m1.2.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.2.2.cmml">i</mi></mrow></msub></msub><mo lspace="0em" rspace="0em" id="S3.E2.m1.8.8.4.1" xref="S3.E2.m1.8.8.4.1.cmml">​</mo><mrow id="S3.E2.m1.8.8.4.3.2" xref="S3.E2.m1.8.8.4.cmml"><mo stretchy="false" id="S3.E2.m1.8.8.4.3.2.1" xref="S3.E2.m1.8.8.4.cmml">(</mo><mi id="S3.E2.m1.6.6" xref="S3.E2.m1.6.6.cmml">w</mi><mo stretchy="false" id="S3.E2.m1.8.8.4.3.2.2" xref="S3.E2.m1.8.8.4.cmml">)</mo></mrow></mrow><mo id="S3.E2.m1.8.8.3" xref="S3.E2.m1.8.8.3.cmml">=</mo><mrow id="S3.E2.m1.8.8.2" xref="S3.E2.m1.8.8.2.cmml"><mfrac id="S3.E2.m1.3.3" xref="S3.E2.m1.3.3.cmml"><mn id="S3.E2.m1.3.3.3" xref="S3.E2.m1.3.3.3.cmml">1</mn><mrow id="S3.E2.m1.3.3.1.1" xref="S3.E2.m1.3.3.1.2.cmml"><mo stretchy="false" id="S3.E2.m1.3.3.1.1.2" xref="S3.E2.m1.3.3.1.2.1.cmml">|</mo><msub id="S3.E2.m1.3.3.1.1.1" xref="S3.E2.m1.3.3.1.1.1.cmml"><mi id="S3.E2.m1.3.3.1.1.1.2" xref="S3.E2.m1.3.3.1.1.1.2.cmml">b</mi><mi id="S3.E2.m1.3.3.1.1.1.3" xref="S3.E2.m1.3.3.1.1.1.3.cmml">k</mi></msub><mo stretchy="false" id="S3.E2.m1.3.3.1.1.3" xref="S3.E2.m1.3.3.1.2.1.cmml">|</mo></mrow></mfrac><mo lspace="0em" rspace="0em" id="S3.E2.m1.8.8.2.3" xref="S3.E2.m1.8.8.2.3.cmml">​</mo><mrow id="S3.E2.m1.8.8.2.2" xref="S3.E2.m1.8.8.2.2.cmml"><munder id="S3.E2.m1.8.8.2.2.3" xref="S3.E2.m1.8.8.2.2.3.cmml"><mo movablelimits="false" id="S3.E2.m1.8.8.2.2.3.2" xref="S3.E2.m1.8.8.2.2.3.2.cmml">∑</mo><mrow id="S3.E2.m1.5.5.2" xref="S3.E2.m1.5.5.2.cmml"><msub id="S3.E2.m1.5.5.2.4" xref="S3.E2.m1.5.5.2.4.cmml"><mi id="S3.E2.m1.5.5.2.4.2" xref="S3.E2.m1.5.5.2.4.2.cmml">x</mi><mi id="S3.E2.m1.5.5.2.4.3" xref="S3.E2.m1.5.5.2.4.3.cmml">i</mi></msub><mo id="S3.E2.m1.5.5.2.3" xref="S3.E2.m1.5.5.2.3.cmml">∈</mo><msub id="S3.E2.m1.5.5.2.5" xref="S3.E2.m1.5.5.2.5.cmml"><mi id="S3.E2.m1.5.5.2.5.2" xref="S3.E2.m1.5.5.2.5.2.cmml">b</mi><mrow id="S3.E2.m1.5.5.2.2.2.4" xref="S3.E2.m1.5.5.2.2.2.3.cmml"><mi id="S3.E2.m1.4.4.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.cmml">k</mi><mo id="S3.E2.m1.5.5.2.2.2.4.1" xref="S3.E2.m1.5.5.2.2.2.3.cmml">,</mo><mi id="S3.E2.m1.5.5.2.2.2.2" xref="S3.E2.m1.5.5.2.2.2.2.cmml">i</mi></mrow></msub></mrow></munder><mrow id="S3.E2.m1.8.8.2.2.2" xref="S3.E2.m1.8.8.2.2.2.cmml"><mi id="S3.E2.m1.8.8.2.2.2.4" xref="S3.E2.m1.8.8.2.2.2.4.cmml">l</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.8.8.2.2.2.3" xref="S3.E2.m1.8.8.2.2.2.3.cmml">​</mo><mrow id="S3.E2.m1.8.8.2.2.2.2.2" xref="S3.E2.m1.8.8.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E2.m1.8.8.2.2.2.2.2.3" xref="S3.E2.m1.8.8.2.2.2.2.3.cmml">(</mo><msub id="S3.E2.m1.7.7.1.1.1.1.1.1" xref="S3.E2.m1.7.7.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.7.7.1.1.1.1.1.1.2" xref="S3.E2.m1.7.7.1.1.1.1.1.1.2.cmml">x</mi><mi id="S3.E2.m1.7.7.1.1.1.1.1.1.3" xref="S3.E2.m1.7.7.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E2.m1.8.8.2.2.2.2.2.4" xref="S3.E2.m1.8.8.2.2.2.2.3.cmml">,</mo><msub id="S3.E2.m1.8.8.2.2.2.2.2.2" xref="S3.E2.m1.8.8.2.2.2.2.2.2.cmml"><mi id="S3.E2.m1.8.8.2.2.2.2.2.2.2" xref="S3.E2.m1.8.8.2.2.2.2.2.2.2.cmml">w</mi><mi id="S3.E2.m1.8.8.2.2.2.2.2.2.3" xref="S3.E2.m1.8.8.2.2.2.2.2.2.3.cmml">k</mi></msub><mo stretchy="false" id="S3.E2.m1.8.8.2.2.2.2.2.5" xref="S3.E2.m1.8.8.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.8b"><apply id="S3.E2.m1.8.8.cmml" xref="S3.E2.m1.8.8"><eq id="S3.E2.m1.8.8.3.cmml" xref="S3.E2.m1.8.8.3"></eq><apply id="S3.E2.m1.8.8.4.cmml" xref="S3.E2.m1.8.8.4"><times id="S3.E2.m1.8.8.4.1.cmml" xref="S3.E2.m1.8.8.4.1"></times><apply id="S3.E2.m1.8.8.4.2.cmml" xref="S3.E2.m1.8.8.4.2"><csymbol cd="ambiguous" id="S3.E2.m1.8.8.4.2.1.cmml" xref="S3.E2.m1.8.8.4.2">subscript</csymbol><ci id="S3.E2.m1.8.8.4.2.2.cmml" xref="S3.E2.m1.8.8.4.2.2">𝑓</ci><apply id="S3.E2.m1.2.2.2.cmml" xref="S3.E2.m1.2.2.2"><csymbol cd="ambiguous" id="S3.E2.m1.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2">subscript</csymbol><ci id="S3.E2.m1.2.2.2.4.cmml" xref="S3.E2.m1.2.2.2.4">𝑏</ci><list id="S3.E2.m1.2.2.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.2.2.4"><ci id="S3.E2.m1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1">𝑘</ci><ci id="S3.E2.m1.2.2.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2.2.2">𝑖</ci></list></apply></apply><ci id="S3.E2.m1.6.6.cmml" xref="S3.E2.m1.6.6">𝑤</ci></apply><apply id="S3.E2.m1.8.8.2.cmml" xref="S3.E2.m1.8.8.2"><times id="S3.E2.m1.8.8.2.3.cmml" xref="S3.E2.m1.8.8.2.3"></times><apply id="S3.E2.m1.3.3.cmml" xref="S3.E2.m1.3.3"><divide id="S3.E2.m1.3.3.2.cmml" xref="S3.E2.m1.3.3"></divide><cn type="integer" id="S3.E2.m1.3.3.3.cmml" xref="S3.E2.m1.3.3.3">1</cn><apply id="S3.E2.m1.3.3.1.2.cmml" xref="S3.E2.m1.3.3.1.1"><abs id="S3.E2.m1.3.3.1.2.1.cmml" xref="S3.E2.m1.3.3.1.1.2"></abs><apply id="S3.E2.m1.3.3.1.1.1.cmml" xref="S3.E2.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.1.1.1.1.cmml" xref="S3.E2.m1.3.3.1.1.1">subscript</csymbol><ci id="S3.E2.m1.3.3.1.1.1.2.cmml" xref="S3.E2.m1.3.3.1.1.1.2">𝑏</ci><ci id="S3.E2.m1.3.3.1.1.1.3.cmml" xref="S3.E2.m1.3.3.1.1.1.3">𝑘</ci></apply></apply></apply><apply id="S3.E2.m1.8.8.2.2.cmml" xref="S3.E2.m1.8.8.2.2"><apply id="S3.E2.m1.8.8.2.2.3.cmml" xref="S3.E2.m1.8.8.2.2.3"><csymbol cd="ambiguous" id="S3.E2.m1.8.8.2.2.3.1.cmml" xref="S3.E2.m1.8.8.2.2.3">subscript</csymbol><sum id="S3.E2.m1.8.8.2.2.3.2.cmml" xref="S3.E2.m1.8.8.2.2.3.2"></sum><apply id="S3.E2.m1.5.5.2.cmml" xref="S3.E2.m1.5.5.2"><in id="S3.E2.m1.5.5.2.3.cmml" xref="S3.E2.m1.5.5.2.3"></in><apply id="S3.E2.m1.5.5.2.4.cmml" xref="S3.E2.m1.5.5.2.4"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.2.4.1.cmml" xref="S3.E2.m1.5.5.2.4">subscript</csymbol><ci id="S3.E2.m1.5.5.2.4.2.cmml" xref="S3.E2.m1.5.5.2.4.2">𝑥</ci><ci id="S3.E2.m1.5.5.2.4.3.cmml" xref="S3.E2.m1.5.5.2.4.3">𝑖</ci></apply><apply id="S3.E2.m1.5.5.2.5.cmml" xref="S3.E2.m1.5.5.2.5"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.2.5.1.cmml" xref="S3.E2.m1.5.5.2.5">subscript</csymbol><ci id="S3.E2.m1.5.5.2.5.2.cmml" xref="S3.E2.m1.5.5.2.5.2">𝑏</ci><list id="S3.E2.m1.5.5.2.2.2.3.cmml" xref="S3.E2.m1.5.5.2.2.2.4"><ci id="S3.E2.m1.4.4.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1">𝑘</ci><ci id="S3.E2.m1.5.5.2.2.2.2.cmml" xref="S3.E2.m1.5.5.2.2.2.2">𝑖</ci></list></apply></apply></apply><apply id="S3.E2.m1.8.8.2.2.2.cmml" xref="S3.E2.m1.8.8.2.2.2"><times id="S3.E2.m1.8.8.2.2.2.3.cmml" xref="S3.E2.m1.8.8.2.2.2.3"></times><ci id="S3.E2.m1.8.8.2.2.2.4.cmml" xref="S3.E2.m1.8.8.2.2.2.4">𝑙</ci><interval closure="open" id="S3.E2.m1.8.8.2.2.2.2.3.cmml" xref="S3.E2.m1.8.8.2.2.2.2.2"><apply id="S3.E2.m1.7.7.1.1.1.1.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.7.7.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.7.7.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.2">𝑥</ci><ci id="S3.E2.m1.7.7.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.7.7.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E2.m1.8.8.2.2.2.2.2.2.cmml" xref="S3.E2.m1.8.8.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E2.m1.8.8.2.2.2.2.2.2.1.cmml" xref="S3.E2.m1.8.8.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E2.m1.8.8.2.2.2.2.2.2.2.cmml" xref="S3.E2.m1.8.8.2.2.2.2.2.2.2">𝑤</ci><ci id="S3.E2.m1.8.8.2.2.2.2.2.2.3.cmml" xref="S3.E2.m1.8.8.2.2.2.2.2.2.3">𝑘</ci></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.8c">f_{b_{k,i}}(w)=\frac{1}{|b_{k}|}\sum_{x_{i}\in b_{k,i}}l(x_{i},w_{k})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.5" class="ltx_p">and <math id="S3.SS1.p1.3.m1.2" class="ltx_Math" alttext="b_{k,i}" display="inline"><semantics id="S3.SS1.p1.3.m1.2a"><msub id="S3.SS1.p1.3.m1.2.3" xref="S3.SS1.p1.3.m1.2.3.cmml"><mi id="S3.SS1.p1.3.m1.2.3.2" xref="S3.SS1.p1.3.m1.2.3.2.cmml">b</mi><mrow id="S3.SS1.p1.3.m1.2.2.2.4" xref="S3.SS1.p1.3.m1.2.2.2.3.cmml"><mi id="S3.SS1.p1.3.m1.1.1.1.1" xref="S3.SS1.p1.3.m1.1.1.1.1.cmml">k</mi><mo id="S3.SS1.p1.3.m1.2.2.2.4.1" xref="S3.SS1.p1.3.m1.2.2.2.3.cmml">,</mo><mi id="S3.SS1.p1.3.m1.2.2.2.2" xref="S3.SS1.p1.3.m1.2.2.2.2.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m1.2b"><apply id="S3.SS1.p1.3.m1.2.3.cmml" xref="S3.SS1.p1.3.m1.2.3"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m1.2.3.1.cmml" xref="S3.SS1.p1.3.m1.2.3">subscript</csymbol><ci id="S3.SS1.p1.3.m1.2.3.2.cmml" xref="S3.SS1.p1.3.m1.2.3.2">𝑏</ci><list id="S3.SS1.p1.3.m1.2.2.2.3.cmml" xref="S3.SS1.p1.3.m1.2.2.2.4"><ci id="S3.SS1.p1.3.m1.1.1.1.1.cmml" xref="S3.SS1.p1.3.m1.1.1.1.1">𝑘</ci><ci id="S3.SS1.p1.3.m1.2.2.2.2.cmml" xref="S3.SS1.p1.3.m1.2.2.2.2">𝑖</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m1.2c">b_{k,i}</annotation></semantics></math> being a random subset from <math id="S3.SS1.p1.4.m2.1" class="ltx_Math" alttext="D_{k}" display="inline"><semantics id="S3.SS1.p1.4.m2.1a"><msub id="S3.SS1.p1.4.m2.1.1" xref="S3.SS1.p1.4.m2.1.1.cmml"><mi id="S3.SS1.p1.4.m2.1.1.2" xref="S3.SS1.p1.4.m2.1.1.2.cmml">D</mi><mi id="S3.SS1.p1.4.m2.1.1.3" xref="S3.SS1.p1.4.m2.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m2.1b"><apply id="S3.SS1.p1.4.m2.1.1.cmml" xref="S3.SS1.p1.4.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m2.1.1.1.cmml" xref="S3.SS1.p1.4.m2.1.1">subscript</csymbol><ci id="S3.SS1.p1.4.m2.1.1.2.cmml" xref="S3.SS1.p1.4.m2.1.1.2">𝐷</ci><ci id="S3.SS1.p1.4.m2.1.1.3.cmml" xref="S3.SS1.p1.4.m2.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m2.1c">D_{k}</annotation></semantics></math>. Each client updates their local objective with respect to their dataset <math id="S3.SS1.p1.5.m3.1" class="ltx_Math" alttext="D_{k}" display="inline"><semantics id="S3.SS1.p1.5.m3.1a"><msub id="S3.SS1.p1.5.m3.1.1" xref="S3.SS1.p1.5.m3.1.1.cmml"><mi id="S3.SS1.p1.5.m3.1.1.2" xref="S3.SS1.p1.5.m3.1.1.2.cmml">D</mi><mi id="S3.SS1.p1.5.m3.1.1.3" xref="S3.SS1.p1.5.m3.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m3.1b"><apply id="S3.SS1.p1.5.m3.1.1.cmml" xref="S3.SS1.p1.5.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m3.1.1.1.cmml" xref="S3.SS1.p1.5.m3.1.1">subscript</csymbol><ci id="S3.SS1.p1.5.m3.1.1.2.cmml" xref="S3.SS1.p1.5.m3.1.1.2">𝐷</ci><ci id="S3.SS1.p1.5.m3.1.1.3.cmml" xref="S3.SS1.p1.5.m3.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m3.1c">D_{k}</annotation></semantics></math> by</p>
<table id="S3.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(3)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E3.m1.3" class="ltx_Math" alttext="w_{k}\leftarrow w_{k}-\eta_{k}\nabla f_{b_{k,i}}(w_{k})" display="block"><semantics id="S3.E3.m1.3a"><mrow id="S3.E3.m1.3.3" xref="S3.E3.m1.3.3.cmml"><msub id="S3.E3.m1.3.3.3" xref="S3.E3.m1.3.3.3.cmml"><mi id="S3.E3.m1.3.3.3.2" xref="S3.E3.m1.3.3.3.2.cmml">w</mi><mi id="S3.E3.m1.3.3.3.3" xref="S3.E3.m1.3.3.3.3.cmml">k</mi></msub><mo stretchy="false" id="S3.E3.m1.3.3.2" xref="S3.E3.m1.3.3.2.cmml">←</mo><mrow id="S3.E3.m1.3.3.1" xref="S3.E3.m1.3.3.1.cmml"><msub id="S3.E3.m1.3.3.1.3" xref="S3.E3.m1.3.3.1.3.cmml"><mi id="S3.E3.m1.3.3.1.3.2" xref="S3.E3.m1.3.3.1.3.2.cmml">w</mi><mi id="S3.E3.m1.3.3.1.3.3" xref="S3.E3.m1.3.3.1.3.3.cmml">k</mi></msub><mo id="S3.E3.m1.3.3.1.2" xref="S3.E3.m1.3.3.1.2.cmml">−</mo><mrow id="S3.E3.m1.3.3.1.1" xref="S3.E3.m1.3.3.1.1.cmml"><msub id="S3.E3.m1.3.3.1.1.3" xref="S3.E3.m1.3.3.1.1.3.cmml"><mi id="S3.E3.m1.3.3.1.1.3.2" xref="S3.E3.m1.3.3.1.1.3.2.cmml">η</mi><mi id="S3.E3.m1.3.3.1.1.3.3" xref="S3.E3.m1.3.3.1.1.3.3.cmml">k</mi></msub><mo lspace="0.167em" rspace="0em" id="S3.E3.m1.3.3.1.1.2" xref="S3.E3.m1.3.3.1.1.2.cmml">​</mo><mrow id="S3.E3.m1.3.3.1.1.4" xref="S3.E3.m1.3.3.1.1.4.cmml"><mo rspace="0.167em" id="S3.E3.m1.3.3.1.1.4.1" xref="S3.E3.m1.3.3.1.1.4.1.cmml">∇</mo><msub id="S3.E3.m1.3.3.1.1.4.2" xref="S3.E3.m1.3.3.1.1.4.2.cmml"><mi id="S3.E3.m1.3.3.1.1.4.2.2" xref="S3.E3.m1.3.3.1.1.4.2.2.cmml">f</mi><msub id="S3.E3.m1.2.2.2" xref="S3.E3.m1.2.2.2.cmml"><mi id="S3.E3.m1.2.2.2.4" xref="S3.E3.m1.2.2.2.4.cmml">b</mi><mrow id="S3.E3.m1.2.2.2.2.2.4" xref="S3.E3.m1.2.2.2.2.2.3.cmml"><mi id="S3.E3.m1.1.1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.1.1.cmml">k</mi><mo id="S3.E3.m1.2.2.2.2.2.4.1" xref="S3.E3.m1.2.2.2.2.2.3.cmml">,</mo><mi id="S3.E3.m1.2.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.2.2.cmml">i</mi></mrow></msub></msub></mrow><mo lspace="0em" rspace="0em" id="S3.E3.m1.3.3.1.1.2a" xref="S3.E3.m1.3.3.1.1.2.cmml">​</mo><mrow id="S3.E3.m1.3.3.1.1.1.1" xref="S3.E3.m1.3.3.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E3.m1.3.3.1.1.1.1.2" xref="S3.E3.m1.3.3.1.1.1.1.1.cmml">(</mo><msub id="S3.E3.m1.3.3.1.1.1.1.1" xref="S3.E3.m1.3.3.1.1.1.1.1.cmml"><mi id="S3.E3.m1.3.3.1.1.1.1.1.2" xref="S3.E3.m1.3.3.1.1.1.1.1.2.cmml">w</mi><mi id="S3.E3.m1.3.3.1.1.1.1.1.3" xref="S3.E3.m1.3.3.1.1.1.1.1.3.cmml">k</mi></msub><mo stretchy="false" id="S3.E3.m1.3.3.1.1.1.1.3" xref="S3.E3.m1.3.3.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.3b"><apply id="S3.E3.m1.3.3.cmml" xref="S3.E3.m1.3.3"><ci id="S3.E3.m1.3.3.2.cmml" xref="S3.E3.m1.3.3.2">←</ci><apply id="S3.E3.m1.3.3.3.cmml" xref="S3.E3.m1.3.3.3"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.1.cmml" xref="S3.E3.m1.3.3.3">subscript</csymbol><ci id="S3.E3.m1.3.3.3.2.cmml" xref="S3.E3.m1.3.3.3.2">𝑤</ci><ci id="S3.E3.m1.3.3.3.3.cmml" xref="S3.E3.m1.3.3.3.3">𝑘</ci></apply><apply id="S3.E3.m1.3.3.1.cmml" xref="S3.E3.m1.3.3.1"><minus id="S3.E3.m1.3.3.1.2.cmml" xref="S3.E3.m1.3.3.1.2"></minus><apply id="S3.E3.m1.3.3.1.3.cmml" xref="S3.E3.m1.3.3.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.1.3.1.cmml" xref="S3.E3.m1.3.3.1.3">subscript</csymbol><ci id="S3.E3.m1.3.3.1.3.2.cmml" xref="S3.E3.m1.3.3.1.3.2">𝑤</ci><ci id="S3.E3.m1.3.3.1.3.3.cmml" xref="S3.E3.m1.3.3.1.3.3">𝑘</ci></apply><apply id="S3.E3.m1.3.3.1.1.cmml" xref="S3.E3.m1.3.3.1.1"><times id="S3.E3.m1.3.3.1.1.2.cmml" xref="S3.E3.m1.3.3.1.1.2"></times><apply id="S3.E3.m1.3.3.1.1.3.cmml" xref="S3.E3.m1.3.3.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.1.1.3.1.cmml" xref="S3.E3.m1.3.3.1.1.3">subscript</csymbol><ci id="S3.E3.m1.3.3.1.1.3.2.cmml" xref="S3.E3.m1.3.3.1.1.3.2">𝜂</ci><ci id="S3.E3.m1.3.3.1.1.3.3.cmml" xref="S3.E3.m1.3.3.1.1.3.3">𝑘</ci></apply><apply id="S3.E3.m1.3.3.1.1.4.cmml" xref="S3.E3.m1.3.3.1.1.4"><ci id="S3.E3.m1.3.3.1.1.4.1.cmml" xref="S3.E3.m1.3.3.1.1.4.1">∇</ci><apply id="S3.E3.m1.3.3.1.1.4.2.cmml" xref="S3.E3.m1.3.3.1.1.4.2"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.1.1.4.2.1.cmml" xref="S3.E3.m1.3.3.1.1.4.2">subscript</csymbol><ci id="S3.E3.m1.3.3.1.1.4.2.2.cmml" xref="S3.E3.m1.3.3.1.1.4.2.2">𝑓</ci><apply id="S3.E3.m1.2.2.2.cmml" xref="S3.E3.m1.2.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2">subscript</csymbol><ci id="S3.E3.m1.2.2.2.4.cmml" xref="S3.E3.m1.2.2.2.4">𝑏</ci><list id="S3.E3.m1.2.2.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2.2.2.4"><ci id="S3.E3.m1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1.1">𝑘</ci><ci id="S3.E3.m1.2.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2">𝑖</ci></list></apply></apply></apply><apply id="S3.E3.m1.3.3.1.1.1.1.1.cmml" xref="S3.E3.m1.3.3.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E3.m1.3.3.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.3.3.1.1.1.1.1.2.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.2">𝑤</ci><ci id="S3.E3.m1.3.3.1.1.1.1.1.3.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.3">𝑘</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.3c">w_{k}\leftarrow w_{k}-\eta_{k}\nabla f_{b_{k,i}}(w_{k})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.6" class="ltx_p">where <math id="S3.SS1.p1.6.m1.1" class="ltx_Math" alttext="\eta_{k}" display="inline"><semantics id="S3.SS1.p1.6.m1.1a"><msub id="S3.SS1.p1.6.m1.1.1" xref="S3.SS1.p1.6.m1.1.1.cmml"><mi id="S3.SS1.p1.6.m1.1.1.2" xref="S3.SS1.p1.6.m1.1.1.2.cmml">η</mi><mi id="S3.SS1.p1.6.m1.1.1.3" xref="S3.SS1.p1.6.m1.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m1.1b"><apply id="S3.SS1.p1.6.m1.1.1.cmml" xref="S3.SS1.p1.6.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.6.m1.1.1.1.cmml" xref="S3.SS1.p1.6.m1.1.1">subscript</csymbol><ci id="S3.SS1.p1.6.m1.1.1.2.cmml" xref="S3.SS1.p1.6.m1.1.1.2">𝜂</ci><ci id="S3.SS1.p1.6.m1.1.1.3.cmml" xref="S3.SS1.p1.6.m1.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m1.1c">\eta_{k}</annotation></semantics></math> is the clients learning rate. The clients objective then becomes</p>
<table id="S3.E4" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(4)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E4.m1.5" class="ltx_Math" alttext="F_{k}(w)=\frac{1}{|D_{i}|}\sum_{b_{k,i}\in D_{i}}f_{b_{k}}(w)" display="block"><semantics id="S3.E4.m1.5a"><mrow id="S3.E4.m1.5.6" xref="S3.E4.m1.5.6.cmml"><mrow id="S3.E4.m1.5.6.2" xref="S3.E4.m1.5.6.2.cmml"><msub id="S3.E4.m1.5.6.2.2" xref="S3.E4.m1.5.6.2.2.cmml"><mi id="S3.E4.m1.5.6.2.2.2" xref="S3.E4.m1.5.6.2.2.2.cmml">F</mi><mi id="S3.E4.m1.5.6.2.2.3" xref="S3.E4.m1.5.6.2.2.3.cmml">k</mi></msub><mo lspace="0em" rspace="0em" id="S3.E4.m1.5.6.2.1" xref="S3.E4.m1.5.6.2.1.cmml">​</mo><mrow id="S3.E4.m1.5.6.2.3.2" xref="S3.E4.m1.5.6.2.cmml"><mo stretchy="false" id="S3.E4.m1.5.6.2.3.2.1" xref="S3.E4.m1.5.6.2.cmml">(</mo><mi id="S3.E4.m1.4.4" xref="S3.E4.m1.4.4.cmml">w</mi><mo stretchy="false" id="S3.E4.m1.5.6.2.3.2.2" xref="S3.E4.m1.5.6.2.cmml">)</mo></mrow></mrow><mo id="S3.E4.m1.5.6.1" xref="S3.E4.m1.5.6.1.cmml">=</mo><mrow id="S3.E4.m1.5.6.3" xref="S3.E4.m1.5.6.3.cmml"><mfrac id="S3.E4.m1.1.1" xref="S3.E4.m1.1.1.cmml"><mn id="S3.E4.m1.1.1.3" xref="S3.E4.m1.1.1.3.cmml">1</mn><mrow id="S3.E4.m1.1.1.1.1" xref="S3.E4.m1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E4.m1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.2.1.cmml">|</mo><msub id="S3.E4.m1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.1.2.cmml">D</mi><mi id="S3.E4.m1.1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="S3.E4.m1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo lspace="0em" rspace="0em" id="S3.E4.m1.5.6.3.1" xref="S3.E4.m1.5.6.3.1.cmml">​</mo><mrow id="S3.E4.m1.5.6.3.2" xref="S3.E4.m1.5.6.3.2.cmml"><munder id="S3.E4.m1.5.6.3.2.1" xref="S3.E4.m1.5.6.3.2.1.cmml"><mo movablelimits="false" id="S3.E4.m1.5.6.3.2.1.2" xref="S3.E4.m1.5.6.3.2.1.2.cmml">∑</mo><mrow id="S3.E4.m1.3.3.2" xref="S3.E4.m1.3.3.2.cmml"><msub id="S3.E4.m1.3.3.2.4" xref="S3.E4.m1.3.3.2.4.cmml"><mi id="S3.E4.m1.3.3.2.4.2" xref="S3.E4.m1.3.3.2.4.2.cmml">b</mi><mrow id="S3.E4.m1.3.3.2.2.2.4" xref="S3.E4.m1.3.3.2.2.2.3.cmml"><mi id="S3.E4.m1.2.2.1.1.1.1" xref="S3.E4.m1.2.2.1.1.1.1.cmml">k</mi><mo id="S3.E4.m1.3.3.2.2.2.4.1" xref="S3.E4.m1.3.3.2.2.2.3.cmml">,</mo><mi id="S3.E4.m1.3.3.2.2.2.2" xref="S3.E4.m1.3.3.2.2.2.2.cmml">i</mi></mrow></msub><mo id="S3.E4.m1.3.3.2.3" xref="S3.E4.m1.3.3.2.3.cmml">∈</mo><msub id="S3.E4.m1.3.3.2.5" xref="S3.E4.m1.3.3.2.5.cmml"><mi id="S3.E4.m1.3.3.2.5.2" xref="S3.E4.m1.3.3.2.5.2.cmml">D</mi><mi id="S3.E4.m1.3.3.2.5.3" xref="S3.E4.m1.3.3.2.5.3.cmml">i</mi></msub></mrow></munder><mrow id="S3.E4.m1.5.6.3.2.2" xref="S3.E4.m1.5.6.3.2.2.cmml"><msub id="S3.E4.m1.5.6.3.2.2.2" xref="S3.E4.m1.5.6.3.2.2.2.cmml"><mi id="S3.E4.m1.5.6.3.2.2.2.2" xref="S3.E4.m1.5.6.3.2.2.2.2.cmml">f</mi><msub id="S3.E4.m1.5.6.3.2.2.2.3" xref="S3.E4.m1.5.6.3.2.2.2.3.cmml"><mi id="S3.E4.m1.5.6.3.2.2.2.3.2" xref="S3.E4.m1.5.6.3.2.2.2.3.2.cmml">b</mi><mi id="S3.E4.m1.5.6.3.2.2.2.3.3" xref="S3.E4.m1.5.6.3.2.2.2.3.3.cmml">k</mi></msub></msub><mo lspace="0em" rspace="0em" id="S3.E4.m1.5.6.3.2.2.1" xref="S3.E4.m1.5.6.3.2.2.1.cmml">​</mo><mrow id="S3.E4.m1.5.6.3.2.2.3.2" xref="S3.E4.m1.5.6.3.2.2.cmml"><mo stretchy="false" id="S3.E4.m1.5.6.3.2.2.3.2.1" xref="S3.E4.m1.5.6.3.2.2.cmml">(</mo><mi id="S3.E4.m1.5.5" xref="S3.E4.m1.5.5.cmml">w</mi><mo stretchy="false" id="S3.E4.m1.5.6.3.2.2.3.2.2" xref="S3.E4.m1.5.6.3.2.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E4.m1.5b"><apply id="S3.E4.m1.5.6.cmml" xref="S3.E4.m1.5.6"><eq id="S3.E4.m1.5.6.1.cmml" xref="S3.E4.m1.5.6.1"></eq><apply id="S3.E4.m1.5.6.2.cmml" xref="S3.E4.m1.5.6.2"><times id="S3.E4.m1.5.6.2.1.cmml" xref="S3.E4.m1.5.6.2.1"></times><apply id="S3.E4.m1.5.6.2.2.cmml" xref="S3.E4.m1.5.6.2.2"><csymbol cd="ambiguous" id="S3.E4.m1.5.6.2.2.1.cmml" xref="S3.E4.m1.5.6.2.2">subscript</csymbol><ci id="S3.E4.m1.5.6.2.2.2.cmml" xref="S3.E4.m1.5.6.2.2.2">𝐹</ci><ci id="S3.E4.m1.5.6.2.2.3.cmml" xref="S3.E4.m1.5.6.2.2.3">𝑘</ci></apply><ci id="S3.E4.m1.4.4.cmml" xref="S3.E4.m1.4.4">𝑤</ci></apply><apply id="S3.E4.m1.5.6.3.cmml" xref="S3.E4.m1.5.6.3"><times id="S3.E4.m1.5.6.3.1.cmml" xref="S3.E4.m1.5.6.3.1"></times><apply id="S3.E4.m1.1.1.cmml" xref="S3.E4.m1.1.1"><divide id="S3.E4.m1.1.1.2.cmml" xref="S3.E4.m1.1.1"></divide><cn type="integer" id="S3.E4.m1.1.1.3.cmml" xref="S3.E4.m1.1.1.3">1</cn><apply id="S3.E4.m1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1"><abs id="S3.E4.m1.1.1.1.2.1.cmml" xref="S3.E4.m1.1.1.1.1.2"></abs><apply id="S3.E4.m1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1.1.2">𝐷</ci><ci id="S3.E4.m1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply><apply id="S3.E4.m1.5.6.3.2.cmml" xref="S3.E4.m1.5.6.3.2"><apply id="S3.E4.m1.5.6.3.2.1.cmml" xref="S3.E4.m1.5.6.3.2.1"><csymbol cd="ambiguous" id="S3.E4.m1.5.6.3.2.1.1.cmml" xref="S3.E4.m1.5.6.3.2.1">subscript</csymbol><sum id="S3.E4.m1.5.6.3.2.1.2.cmml" xref="S3.E4.m1.5.6.3.2.1.2"></sum><apply id="S3.E4.m1.3.3.2.cmml" xref="S3.E4.m1.3.3.2"><in id="S3.E4.m1.3.3.2.3.cmml" xref="S3.E4.m1.3.3.2.3"></in><apply id="S3.E4.m1.3.3.2.4.cmml" xref="S3.E4.m1.3.3.2.4"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.2.4.1.cmml" xref="S3.E4.m1.3.3.2.4">subscript</csymbol><ci id="S3.E4.m1.3.3.2.4.2.cmml" xref="S3.E4.m1.3.3.2.4.2">𝑏</ci><list id="S3.E4.m1.3.3.2.2.2.3.cmml" xref="S3.E4.m1.3.3.2.2.2.4"><ci id="S3.E4.m1.2.2.1.1.1.1.cmml" xref="S3.E4.m1.2.2.1.1.1.1">𝑘</ci><ci id="S3.E4.m1.3.3.2.2.2.2.cmml" xref="S3.E4.m1.3.3.2.2.2.2">𝑖</ci></list></apply><apply id="S3.E4.m1.3.3.2.5.cmml" xref="S3.E4.m1.3.3.2.5"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.2.5.1.cmml" xref="S3.E4.m1.3.3.2.5">subscript</csymbol><ci id="S3.E4.m1.3.3.2.5.2.cmml" xref="S3.E4.m1.3.3.2.5.2">𝐷</ci><ci id="S3.E4.m1.3.3.2.5.3.cmml" xref="S3.E4.m1.3.3.2.5.3">𝑖</ci></apply></apply></apply><apply id="S3.E4.m1.5.6.3.2.2.cmml" xref="S3.E4.m1.5.6.3.2.2"><times id="S3.E4.m1.5.6.3.2.2.1.cmml" xref="S3.E4.m1.5.6.3.2.2.1"></times><apply id="S3.E4.m1.5.6.3.2.2.2.cmml" xref="S3.E4.m1.5.6.3.2.2.2"><csymbol cd="ambiguous" id="S3.E4.m1.5.6.3.2.2.2.1.cmml" xref="S3.E4.m1.5.6.3.2.2.2">subscript</csymbol><ci id="S3.E4.m1.5.6.3.2.2.2.2.cmml" xref="S3.E4.m1.5.6.3.2.2.2.2">𝑓</ci><apply id="S3.E4.m1.5.6.3.2.2.2.3.cmml" xref="S3.E4.m1.5.6.3.2.2.2.3"><csymbol cd="ambiguous" id="S3.E4.m1.5.6.3.2.2.2.3.1.cmml" xref="S3.E4.m1.5.6.3.2.2.2.3">subscript</csymbol><ci id="S3.E4.m1.5.6.3.2.2.2.3.2.cmml" xref="S3.E4.m1.5.6.3.2.2.2.3.2">𝑏</ci><ci id="S3.E4.m1.5.6.3.2.2.2.3.3.cmml" xref="S3.E4.m1.5.6.3.2.2.2.3.3">𝑘</ci></apply></apply><ci id="S3.E4.m1.5.5.cmml" xref="S3.E4.m1.5.5">𝑤</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4.m1.5c">F_{k}(w)=\frac{1}{|D_{i}|}\sum_{b_{k,i}\in D_{i}}f_{b_{k}}(w)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.8" class="ltx_p">and so the shards objective will become</p>
<table id="S3.E5" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(5)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E5.m1.3" class="ltx_Math" alttext="G_{s}(w)=\sum_{k}^{K}\frac{|D_{k}|}{D}F_{k}(w)" display="block"><semantics id="S3.E5.m1.3a"><mrow id="S3.E5.m1.3.4" xref="S3.E5.m1.3.4.cmml"><mrow id="S3.E5.m1.3.4.2" xref="S3.E5.m1.3.4.2.cmml"><msub id="S3.E5.m1.3.4.2.2" xref="S3.E5.m1.3.4.2.2.cmml"><mi id="S3.E5.m1.3.4.2.2.2" xref="S3.E5.m1.3.4.2.2.2.cmml">G</mi><mi id="S3.E5.m1.3.4.2.2.3" xref="S3.E5.m1.3.4.2.2.3.cmml">s</mi></msub><mo lspace="0em" rspace="0em" id="S3.E5.m1.3.4.2.1" xref="S3.E5.m1.3.4.2.1.cmml">​</mo><mrow id="S3.E5.m1.3.4.2.3.2" xref="S3.E5.m1.3.4.2.cmml"><mo stretchy="false" id="S3.E5.m1.3.4.2.3.2.1" xref="S3.E5.m1.3.4.2.cmml">(</mo><mi id="S3.E5.m1.2.2" xref="S3.E5.m1.2.2.cmml">w</mi><mo stretchy="false" id="S3.E5.m1.3.4.2.3.2.2" xref="S3.E5.m1.3.4.2.cmml">)</mo></mrow></mrow><mo rspace="0.111em" id="S3.E5.m1.3.4.1" xref="S3.E5.m1.3.4.1.cmml">=</mo><mrow id="S3.E5.m1.3.4.3" xref="S3.E5.m1.3.4.3.cmml"><munderover id="S3.E5.m1.3.4.3.1" xref="S3.E5.m1.3.4.3.1.cmml"><mo movablelimits="false" id="S3.E5.m1.3.4.3.1.2.2" xref="S3.E5.m1.3.4.3.1.2.2.cmml">∑</mo><mi id="S3.E5.m1.3.4.3.1.2.3" xref="S3.E5.m1.3.4.3.1.2.3.cmml">k</mi><mi id="S3.E5.m1.3.4.3.1.3" xref="S3.E5.m1.3.4.3.1.3.cmml">K</mi></munderover><mrow id="S3.E5.m1.3.4.3.2" xref="S3.E5.m1.3.4.3.2.cmml"><mfrac id="S3.E5.m1.1.1" xref="S3.E5.m1.1.1.cmml"><mrow id="S3.E5.m1.1.1.1.1" xref="S3.E5.m1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E5.m1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.2.1.cmml">|</mo><msub id="S3.E5.m1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.cmml"><mi id="S3.E5.m1.1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.1.1.2.cmml">D</mi><mi id="S3.E5.m1.1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.1.3.cmml">k</mi></msub><mo stretchy="false" id="S3.E5.m1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.2.1.cmml">|</mo></mrow><mi id="S3.E5.m1.1.1.3" xref="S3.E5.m1.1.1.3.cmml">D</mi></mfrac><mo lspace="0em" rspace="0em" id="S3.E5.m1.3.4.3.2.1" xref="S3.E5.m1.3.4.3.2.1.cmml">​</mo><msub id="S3.E5.m1.3.4.3.2.2" xref="S3.E5.m1.3.4.3.2.2.cmml"><mi id="S3.E5.m1.3.4.3.2.2.2" xref="S3.E5.m1.3.4.3.2.2.2.cmml">F</mi><mi id="S3.E5.m1.3.4.3.2.2.3" xref="S3.E5.m1.3.4.3.2.2.3.cmml">k</mi></msub><mo lspace="0em" rspace="0em" id="S3.E5.m1.3.4.3.2.1a" xref="S3.E5.m1.3.4.3.2.1.cmml">​</mo><mrow id="S3.E5.m1.3.4.3.2.3.2" xref="S3.E5.m1.3.4.3.2.cmml"><mo stretchy="false" id="S3.E5.m1.3.4.3.2.3.2.1" xref="S3.E5.m1.3.4.3.2.cmml">(</mo><mi id="S3.E5.m1.3.3" xref="S3.E5.m1.3.3.cmml">w</mi><mo stretchy="false" id="S3.E5.m1.3.4.3.2.3.2.2" xref="S3.E5.m1.3.4.3.2.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E5.m1.3b"><apply id="S3.E5.m1.3.4.cmml" xref="S3.E5.m1.3.4"><eq id="S3.E5.m1.3.4.1.cmml" xref="S3.E5.m1.3.4.1"></eq><apply id="S3.E5.m1.3.4.2.cmml" xref="S3.E5.m1.3.4.2"><times id="S3.E5.m1.3.4.2.1.cmml" xref="S3.E5.m1.3.4.2.1"></times><apply id="S3.E5.m1.3.4.2.2.cmml" xref="S3.E5.m1.3.4.2.2"><csymbol cd="ambiguous" id="S3.E5.m1.3.4.2.2.1.cmml" xref="S3.E5.m1.3.4.2.2">subscript</csymbol><ci id="S3.E5.m1.3.4.2.2.2.cmml" xref="S3.E5.m1.3.4.2.2.2">𝐺</ci><ci id="S3.E5.m1.3.4.2.2.3.cmml" xref="S3.E5.m1.3.4.2.2.3">𝑠</ci></apply><ci id="S3.E5.m1.2.2.cmml" xref="S3.E5.m1.2.2">𝑤</ci></apply><apply id="S3.E5.m1.3.4.3.cmml" xref="S3.E5.m1.3.4.3"><apply id="S3.E5.m1.3.4.3.1.cmml" xref="S3.E5.m1.3.4.3.1"><csymbol cd="ambiguous" id="S3.E5.m1.3.4.3.1.1.cmml" xref="S3.E5.m1.3.4.3.1">superscript</csymbol><apply id="S3.E5.m1.3.4.3.1.2.cmml" xref="S3.E5.m1.3.4.3.1"><csymbol cd="ambiguous" id="S3.E5.m1.3.4.3.1.2.1.cmml" xref="S3.E5.m1.3.4.3.1">subscript</csymbol><sum id="S3.E5.m1.3.4.3.1.2.2.cmml" xref="S3.E5.m1.3.4.3.1.2.2"></sum><ci id="S3.E5.m1.3.4.3.1.2.3.cmml" xref="S3.E5.m1.3.4.3.1.2.3">𝑘</ci></apply><ci id="S3.E5.m1.3.4.3.1.3.cmml" xref="S3.E5.m1.3.4.3.1.3">𝐾</ci></apply><apply id="S3.E5.m1.3.4.3.2.cmml" xref="S3.E5.m1.3.4.3.2"><times id="S3.E5.m1.3.4.3.2.1.cmml" xref="S3.E5.m1.3.4.3.2.1"></times><apply id="S3.E5.m1.1.1.cmml" xref="S3.E5.m1.1.1"><divide id="S3.E5.m1.1.1.2.cmml" xref="S3.E5.m1.1.1"></divide><apply id="S3.E5.m1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1"><abs id="S3.E5.m1.1.1.1.2.1.cmml" xref="S3.E5.m1.1.1.1.1.2"></abs><apply id="S3.E5.m1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.E5.m1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.2">𝐷</ci><ci id="S3.E5.m1.1.1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.1.3">𝑘</ci></apply></apply><ci id="S3.E5.m1.1.1.3.cmml" xref="S3.E5.m1.1.1.3">𝐷</ci></apply><apply id="S3.E5.m1.3.4.3.2.2.cmml" xref="S3.E5.m1.3.4.3.2.2"><csymbol cd="ambiguous" id="S3.E5.m1.3.4.3.2.2.1.cmml" xref="S3.E5.m1.3.4.3.2.2">subscript</csymbol><ci id="S3.E5.m1.3.4.3.2.2.2.cmml" xref="S3.E5.m1.3.4.3.2.2.2">𝐹</ci><ci id="S3.E5.m1.3.4.3.2.2.3.cmml" xref="S3.E5.m1.3.4.3.2.2.3">𝑘</ci></apply><ci id="S3.E5.m1.3.3.cmml" xref="S3.E5.m1.3.3">𝑤</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m1.3c">G_{s}(w)=\sum_{k}^{K}\frac{|D_{k}|}{D}F_{k}(w)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.9" class="ltx_p">This can be defined as weight updates by</p>
<table id="S3.E6" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(6)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E6.m1.1" class="ltx_Math" alttext="w_{s}\leftarrow w_{s}+\sum_{k}^{K}\frac{|D_{k}|\Delta w_{k}}{D}" display="block"><semantics id="S3.E6.m1.1a"><mrow id="S3.E6.m1.1.2" xref="S3.E6.m1.1.2.cmml"><msub id="S3.E6.m1.1.2.2" xref="S3.E6.m1.1.2.2.cmml"><mi id="S3.E6.m1.1.2.2.2" xref="S3.E6.m1.1.2.2.2.cmml">w</mi><mi id="S3.E6.m1.1.2.2.3" xref="S3.E6.m1.1.2.2.3.cmml">s</mi></msub><mo stretchy="false" id="S3.E6.m1.1.2.1" xref="S3.E6.m1.1.2.1.cmml">←</mo><mrow id="S3.E6.m1.1.2.3" xref="S3.E6.m1.1.2.3.cmml"><msub id="S3.E6.m1.1.2.3.2" xref="S3.E6.m1.1.2.3.2.cmml"><mi id="S3.E6.m1.1.2.3.2.2" xref="S3.E6.m1.1.2.3.2.2.cmml">w</mi><mi id="S3.E6.m1.1.2.3.2.3" xref="S3.E6.m1.1.2.3.2.3.cmml">s</mi></msub><mo rspace="0.055em" id="S3.E6.m1.1.2.3.1" xref="S3.E6.m1.1.2.3.1.cmml">+</mo><mrow id="S3.E6.m1.1.2.3.3" xref="S3.E6.m1.1.2.3.3.cmml"><munderover id="S3.E6.m1.1.2.3.3.1" xref="S3.E6.m1.1.2.3.3.1.cmml"><mo movablelimits="false" id="S3.E6.m1.1.2.3.3.1.2.2" xref="S3.E6.m1.1.2.3.3.1.2.2.cmml">∑</mo><mi id="S3.E6.m1.1.2.3.3.1.2.3" xref="S3.E6.m1.1.2.3.3.1.2.3.cmml">k</mi><mi id="S3.E6.m1.1.2.3.3.1.3" xref="S3.E6.m1.1.2.3.3.1.3.cmml">K</mi></munderover><mfrac id="S3.E6.m1.1.1" xref="S3.E6.m1.1.1.cmml"><mrow id="S3.E6.m1.1.1.1" xref="S3.E6.m1.1.1.1.cmml"><mrow id="S3.E6.m1.1.1.1.1.1" xref="S3.E6.m1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E6.m1.1.1.1.1.1.2" xref="S3.E6.m1.1.1.1.1.2.1.cmml">|</mo><msub id="S3.E6.m1.1.1.1.1.1.1" xref="S3.E6.m1.1.1.1.1.1.1.cmml"><mi id="S3.E6.m1.1.1.1.1.1.1.2" xref="S3.E6.m1.1.1.1.1.1.1.2.cmml">D</mi><mi id="S3.E6.m1.1.1.1.1.1.1.3" xref="S3.E6.m1.1.1.1.1.1.1.3.cmml">k</mi></msub><mo stretchy="false" id="S3.E6.m1.1.1.1.1.1.3" xref="S3.E6.m1.1.1.1.1.2.1.cmml">|</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E6.m1.1.1.1.2" xref="S3.E6.m1.1.1.1.2.cmml">​</mo><mi mathvariant="normal" id="S3.E6.m1.1.1.1.3" xref="S3.E6.m1.1.1.1.3.cmml">Δ</mi><mo lspace="0em" rspace="0em" id="S3.E6.m1.1.1.1.2a" xref="S3.E6.m1.1.1.1.2.cmml">​</mo><msub id="S3.E6.m1.1.1.1.4" xref="S3.E6.m1.1.1.1.4.cmml"><mi id="S3.E6.m1.1.1.1.4.2" xref="S3.E6.m1.1.1.1.4.2.cmml">w</mi><mi id="S3.E6.m1.1.1.1.4.3" xref="S3.E6.m1.1.1.1.4.3.cmml">k</mi></msub></mrow><mi id="S3.E6.m1.1.1.3" xref="S3.E6.m1.1.1.3.cmml">D</mi></mfrac></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E6.m1.1b"><apply id="S3.E6.m1.1.2.cmml" xref="S3.E6.m1.1.2"><ci id="S3.E6.m1.1.2.1.cmml" xref="S3.E6.m1.1.2.1">←</ci><apply id="S3.E6.m1.1.2.2.cmml" xref="S3.E6.m1.1.2.2"><csymbol cd="ambiguous" id="S3.E6.m1.1.2.2.1.cmml" xref="S3.E6.m1.1.2.2">subscript</csymbol><ci id="S3.E6.m1.1.2.2.2.cmml" xref="S3.E6.m1.1.2.2.2">𝑤</ci><ci id="S3.E6.m1.1.2.2.3.cmml" xref="S3.E6.m1.1.2.2.3">𝑠</ci></apply><apply id="S3.E6.m1.1.2.3.cmml" xref="S3.E6.m1.1.2.3"><plus id="S3.E6.m1.1.2.3.1.cmml" xref="S3.E6.m1.1.2.3.1"></plus><apply id="S3.E6.m1.1.2.3.2.cmml" xref="S3.E6.m1.1.2.3.2"><csymbol cd="ambiguous" id="S3.E6.m1.1.2.3.2.1.cmml" xref="S3.E6.m1.1.2.3.2">subscript</csymbol><ci id="S3.E6.m1.1.2.3.2.2.cmml" xref="S3.E6.m1.1.2.3.2.2">𝑤</ci><ci id="S3.E6.m1.1.2.3.2.3.cmml" xref="S3.E6.m1.1.2.3.2.3">𝑠</ci></apply><apply id="S3.E6.m1.1.2.3.3.cmml" xref="S3.E6.m1.1.2.3.3"><apply id="S3.E6.m1.1.2.3.3.1.cmml" xref="S3.E6.m1.1.2.3.3.1"><csymbol cd="ambiguous" id="S3.E6.m1.1.2.3.3.1.1.cmml" xref="S3.E6.m1.1.2.3.3.1">superscript</csymbol><apply id="S3.E6.m1.1.2.3.3.1.2.cmml" xref="S3.E6.m1.1.2.3.3.1"><csymbol cd="ambiguous" id="S3.E6.m1.1.2.3.3.1.2.1.cmml" xref="S3.E6.m1.1.2.3.3.1">subscript</csymbol><sum id="S3.E6.m1.1.2.3.3.1.2.2.cmml" xref="S3.E6.m1.1.2.3.3.1.2.2"></sum><ci id="S3.E6.m1.1.2.3.3.1.2.3.cmml" xref="S3.E6.m1.1.2.3.3.1.2.3">𝑘</ci></apply><ci id="S3.E6.m1.1.2.3.3.1.3.cmml" xref="S3.E6.m1.1.2.3.3.1.3">𝐾</ci></apply><apply id="S3.E6.m1.1.1.cmml" xref="S3.E6.m1.1.1"><divide id="S3.E6.m1.1.1.2.cmml" xref="S3.E6.m1.1.1"></divide><apply id="S3.E6.m1.1.1.1.cmml" xref="S3.E6.m1.1.1.1"><times id="S3.E6.m1.1.1.1.2.cmml" xref="S3.E6.m1.1.1.1.2"></times><apply id="S3.E6.m1.1.1.1.1.2.cmml" xref="S3.E6.m1.1.1.1.1.1"><abs id="S3.E6.m1.1.1.1.1.2.1.cmml" xref="S3.E6.m1.1.1.1.1.1.2"></abs><apply id="S3.E6.m1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E6.m1.1.1.1.1.1.1.2.cmml" xref="S3.E6.m1.1.1.1.1.1.1.2">𝐷</ci><ci id="S3.E6.m1.1.1.1.1.1.1.3.cmml" xref="S3.E6.m1.1.1.1.1.1.1.3">𝑘</ci></apply></apply><ci id="S3.E6.m1.1.1.1.3.cmml" xref="S3.E6.m1.1.1.1.3">Δ</ci><apply id="S3.E6.m1.1.1.1.4.cmml" xref="S3.E6.m1.1.1.1.4"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.4.1.cmml" xref="S3.E6.m1.1.1.1.4">subscript</csymbol><ci id="S3.E6.m1.1.1.1.4.2.cmml" xref="S3.E6.m1.1.1.1.4.2">𝑤</ci><ci id="S3.E6.m1.1.1.1.4.3.cmml" xref="S3.E6.m1.1.1.1.4.3">𝑘</ci></apply></apply><ci id="S3.E6.m1.1.1.3.cmml" xref="S3.E6.m1.1.1.3">𝐷</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E6.m1.1c">w_{s}\leftarrow w_{s}+\sum_{k}^{K}\frac{|D_{k}|\Delta w_{k}}{D}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.10" class="ltx_p">This happens in parallel across all shards, where the global objective will become the sum of the results produced across all shards</p>
<table id="S3.E7" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(7)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E7.m1.3" class="ltx_Math" alttext="f(w)=\sum_{s}^{S}\frac{|D_{s}|}{D}G_{s}(w)" display="block"><semantics id="S3.E7.m1.3a"><mrow id="S3.E7.m1.3.4" xref="S3.E7.m1.3.4.cmml"><mrow id="S3.E7.m1.3.4.2" xref="S3.E7.m1.3.4.2.cmml"><mi id="S3.E7.m1.3.4.2.2" xref="S3.E7.m1.3.4.2.2.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.E7.m1.3.4.2.1" xref="S3.E7.m1.3.4.2.1.cmml">​</mo><mrow id="S3.E7.m1.3.4.2.3.2" xref="S3.E7.m1.3.4.2.cmml"><mo stretchy="false" id="S3.E7.m1.3.4.2.3.2.1" xref="S3.E7.m1.3.4.2.cmml">(</mo><mi id="S3.E7.m1.2.2" xref="S3.E7.m1.2.2.cmml">w</mi><mo stretchy="false" id="S3.E7.m1.3.4.2.3.2.2" xref="S3.E7.m1.3.4.2.cmml">)</mo></mrow></mrow><mo rspace="0.111em" id="S3.E7.m1.3.4.1" xref="S3.E7.m1.3.4.1.cmml">=</mo><mrow id="S3.E7.m1.3.4.3" xref="S3.E7.m1.3.4.3.cmml"><munderover id="S3.E7.m1.3.4.3.1" xref="S3.E7.m1.3.4.3.1.cmml"><mo movablelimits="false" id="S3.E7.m1.3.4.3.1.2.2" xref="S3.E7.m1.3.4.3.1.2.2.cmml">∑</mo><mi id="S3.E7.m1.3.4.3.1.2.3" xref="S3.E7.m1.3.4.3.1.2.3.cmml">s</mi><mi id="S3.E7.m1.3.4.3.1.3" xref="S3.E7.m1.3.4.3.1.3.cmml">S</mi></munderover><mrow id="S3.E7.m1.3.4.3.2" xref="S3.E7.m1.3.4.3.2.cmml"><mfrac id="S3.E7.m1.1.1" xref="S3.E7.m1.1.1.cmml"><mrow id="S3.E7.m1.1.1.1.1" xref="S3.E7.m1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E7.m1.1.1.1.1.2" xref="S3.E7.m1.1.1.1.2.1.cmml">|</mo><msub id="S3.E7.m1.1.1.1.1.1" xref="S3.E7.m1.1.1.1.1.1.cmml"><mi id="S3.E7.m1.1.1.1.1.1.2" xref="S3.E7.m1.1.1.1.1.1.2.cmml">D</mi><mi id="S3.E7.m1.1.1.1.1.1.3" xref="S3.E7.m1.1.1.1.1.1.3.cmml">s</mi></msub><mo stretchy="false" id="S3.E7.m1.1.1.1.1.3" xref="S3.E7.m1.1.1.1.2.1.cmml">|</mo></mrow><mi id="S3.E7.m1.1.1.3" xref="S3.E7.m1.1.1.3.cmml">D</mi></mfrac><mo lspace="0em" rspace="0em" id="S3.E7.m1.3.4.3.2.1" xref="S3.E7.m1.3.4.3.2.1.cmml">​</mo><msub id="S3.E7.m1.3.4.3.2.2" xref="S3.E7.m1.3.4.3.2.2.cmml"><mi id="S3.E7.m1.3.4.3.2.2.2" xref="S3.E7.m1.3.4.3.2.2.2.cmml">G</mi><mi id="S3.E7.m1.3.4.3.2.2.3" xref="S3.E7.m1.3.4.3.2.2.3.cmml">s</mi></msub><mo lspace="0em" rspace="0em" id="S3.E7.m1.3.4.3.2.1a" xref="S3.E7.m1.3.4.3.2.1.cmml">​</mo><mrow id="S3.E7.m1.3.4.3.2.3.2" xref="S3.E7.m1.3.4.3.2.cmml"><mo stretchy="false" id="S3.E7.m1.3.4.3.2.3.2.1" xref="S3.E7.m1.3.4.3.2.cmml">(</mo><mi id="S3.E7.m1.3.3" xref="S3.E7.m1.3.3.cmml">w</mi><mo stretchy="false" id="S3.E7.m1.3.4.3.2.3.2.2" xref="S3.E7.m1.3.4.3.2.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E7.m1.3b"><apply id="S3.E7.m1.3.4.cmml" xref="S3.E7.m1.3.4"><eq id="S3.E7.m1.3.4.1.cmml" xref="S3.E7.m1.3.4.1"></eq><apply id="S3.E7.m1.3.4.2.cmml" xref="S3.E7.m1.3.4.2"><times id="S3.E7.m1.3.4.2.1.cmml" xref="S3.E7.m1.3.4.2.1"></times><ci id="S3.E7.m1.3.4.2.2.cmml" xref="S3.E7.m1.3.4.2.2">𝑓</ci><ci id="S3.E7.m1.2.2.cmml" xref="S3.E7.m1.2.2">𝑤</ci></apply><apply id="S3.E7.m1.3.4.3.cmml" xref="S3.E7.m1.3.4.3"><apply id="S3.E7.m1.3.4.3.1.cmml" xref="S3.E7.m1.3.4.3.1"><csymbol cd="ambiguous" id="S3.E7.m1.3.4.3.1.1.cmml" xref="S3.E7.m1.3.4.3.1">superscript</csymbol><apply id="S3.E7.m1.3.4.3.1.2.cmml" xref="S3.E7.m1.3.4.3.1"><csymbol cd="ambiguous" id="S3.E7.m1.3.4.3.1.2.1.cmml" xref="S3.E7.m1.3.4.3.1">subscript</csymbol><sum id="S3.E7.m1.3.4.3.1.2.2.cmml" xref="S3.E7.m1.3.4.3.1.2.2"></sum><ci id="S3.E7.m1.3.4.3.1.2.3.cmml" xref="S3.E7.m1.3.4.3.1.2.3">𝑠</ci></apply><ci id="S3.E7.m1.3.4.3.1.3.cmml" xref="S3.E7.m1.3.4.3.1.3">𝑆</ci></apply><apply id="S3.E7.m1.3.4.3.2.cmml" xref="S3.E7.m1.3.4.3.2"><times id="S3.E7.m1.3.4.3.2.1.cmml" xref="S3.E7.m1.3.4.3.2.1"></times><apply id="S3.E7.m1.1.1.cmml" xref="S3.E7.m1.1.1"><divide id="S3.E7.m1.1.1.2.cmml" xref="S3.E7.m1.1.1"></divide><apply id="S3.E7.m1.1.1.1.2.cmml" xref="S3.E7.m1.1.1.1.1"><abs id="S3.E7.m1.1.1.1.2.1.cmml" xref="S3.E7.m1.1.1.1.1.2"></abs><apply id="S3.E7.m1.1.1.1.1.1.cmml" xref="S3.E7.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.1.1.1.1.cmml" xref="S3.E7.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.E7.m1.1.1.1.1.1.2.cmml" xref="S3.E7.m1.1.1.1.1.1.2">𝐷</ci><ci id="S3.E7.m1.1.1.1.1.1.3.cmml" xref="S3.E7.m1.1.1.1.1.1.3">𝑠</ci></apply></apply><ci id="S3.E7.m1.1.1.3.cmml" xref="S3.E7.m1.1.1.3">𝐷</ci></apply><apply id="S3.E7.m1.3.4.3.2.2.cmml" xref="S3.E7.m1.3.4.3.2.2"><csymbol cd="ambiguous" id="S3.E7.m1.3.4.3.2.2.1.cmml" xref="S3.E7.m1.3.4.3.2.2">subscript</csymbol><ci id="S3.E7.m1.3.4.3.2.2.2.cmml" xref="S3.E7.m1.3.4.3.2.2.2">𝐺</ci><ci id="S3.E7.m1.3.4.3.2.2.3.cmml" xref="S3.E7.m1.3.4.3.2.2.3">𝑠</ci></apply><ci id="S3.E7.m1.3.3.cmml" xref="S3.E7.m1.3.3">𝑤</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E7.m1.3c">f(w)=\sum_{s}^{S}\frac{|D_{s}|}{D}G_{s}(w)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.11" class="ltx_p">We should note that this described approach follows the original FedAvg algorithm and can be modified in terms of fairness <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib32" title="" class="ltx_ref">ref:q-fed-avg, </a>)</cite> among other averaging strategies.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2. </span>Shard Level Consensus</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">Each task deployed on the network can run an independent consensus mechanism. This allows for various task-related workloads to be accommodated by adapting the consensus algorithm. For example, when training large models where the performance of a single node may be limited, mechanisms such as PBFT <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib33" title="" class="ltx_ref">ref:pbft, </a>)</cite> can be used. However, in shards with a fewer number of clients, we can make use of Raft consensus <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib34" title="" class="ltx_ref">ref:raft-consensus, </a>)</cite>. This may benefit settings where model complexity is lower, and so a peer may be able to handle the throughput bottleneck of Raft consensus, determined by node performance.</p>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<p id="S3.SS2.p2.1" class="ltx_p">Within the chosen consensus mechanism, we apply a pluggable policy to determine the acceptance of model writes. This policy can be substituted to handle alternative schemes (Section <a href="#S2.SS3" title="2.3. Model Update Poisoning ‣ 2. Background and Related Works ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.3</span></a>). These schemes handle the identification of malicious clients by finding poisoned model updates or detecting Sybil attacks. It should be noted that while these plugins are applied at a task level to maintain the network’s security, they can be upgraded with the smart contract that they are governing.</p>
</div>
<div id="S3.SS2.p3" class="ltx_para">
<p id="S3.SS2.p3.1" class="ltx_p">Another quality to consider is the detection of lazy clients. Detection of these clients may use a PN-sequence, which is applied to the model updates. This technique could then be applied within the shard level consensus to verify the clients’ PN-sequence.</p>
</div>
<div id="S3.SS2.p4" class="ltx_para">
<p id="S3.SS2.p4.1" class="ltx_p">Because each shard contains a subset of the total participants for each task, the algorithmic complexity of consensus is significantly reduced to <math id="S3.SS2.p4.1.m1.1" class="ltx_Math" alttext="\frac{\mathcal{C}\times\mathcal{P}_{E}}{\mathcal{S}^{2}}" display="inline"><semantics id="S3.SS2.p4.1.m1.1a"><mfrac id="S3.SS2.p4.1.m1.1.1" xref="S3.SS2.p4.1.m1.1.1.cmml"><mrow id="S3.SS2.p4.1.m1.1.1.2" xref="S3.SS2.p4.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p4.1.m1.1.1.2.2" xref="S3.SS2.p4.1.m1.1.1.2.2.cmml">𝒞</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS2.p4.1.m1.1.1.2.1" xref="S3.SS2.p4.1.m1.1.1.2.1.cmml">×</mo><msub id="S3.SS2.p4.1.m1.1.1.2.3" xref="S3.SS2.p4.1.m1.1.1.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p4.1.m1.1.1.2.3.2" xref="S3.SS2.p4.1.m1.1.1.2.3.2.cmml">𝒫</mi><mi id="S3.SS2.p4.1.m1.1.1.2.3.3" xref="S3.SS2.p4.1.m1.1.1.2.3.3.cmml">E</mi></msub></mrow><msup id="S3.SS2.p4.1.m1.1.1.3" xref="S3.SS2.p4.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p4.1.m1.1.1.3.2" xref="S3.SS2.p4.1.m1.1.1.3.2.cmml">𝒮</mi><mn id="S3.SS2.p4.1.m1.1.1.3.3" xref="S3.SS2.p4.1.m1.1.1.3.3.cmml">2</mn></msup></mfrac><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.1.m1.1b"><apply id="S3.SS2.p4.1.m1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1"><divide id="S3.SS2.p4.1.m1.1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1"></divide><apply id="S3.SS2.p4.1.m1.1.1.2.cmml" xref="S3.SS2.p4.1.m1.1.1.2"><times id="S3.SS2.p4.1.m1.1.1.2.1.cmml" xref="S3.SS2.p4.1.m1.1.1.2.1"></times><ci id="S3.SS2.p4.1.m1.1.1.2.2.cmml" xref="S3.SS2.p4.1.m1.1.1.2.2">𝒞</ci><apply id="S3.SS2.p4.1.m1.1.1.2.3.cmml" xref="S3.SS2.p4.1.m1.1.1.2.3"><csymbol cd="ambiguous" id="S3.SS2.p4.1.m1.1.1.2.3.1.cmml" xref="S3.SS2.p4.1.m1.1.1.2.3">subscript</csymbol><ci id="S3.SS2.p4.1.m1.1.1.2.3.2.cmml" xref="S3.SS2.p4.1.m1.1.1.2.3.2">𝒫</ci><ci id="S3.SS2.p4.1.m1.1.1.2.3.3.cmml" xref="S3.SS2.p4.1.m1.1.1.2.3.3">𝐸</ci></apply></apply><apply id="S3.SS2.p4.1.m1.1.1.3.cmml" xref="S3.SS2.p4.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p4.1.m1.1.1.3.1.cmml" xref="S3.SS2.p4.1.m1.1.1.3">superscript</csymbol><ci id="S3.SS2.p4.1.m1.1.1.3.2.cmml" xref="S3.SS2.p4.1.m1.1.1.3.2">𝒮</ci><cn type="integer" id="S3.SS2.p4.1.m1.1.1.3.3.cmml" xref="S3.SS2.p4.1.m1.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.1.m1.1c">\frac{\mathcal{C}\times\mathcal{P}_{E}}{\mathcal{S}^{2}}</annotation></semantics></math>. As a result, the network overhead needed to communicate model updates is also significantly reduced, which is the primary bottleneck in peer-to-peer federated learning.</p>
</div>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3. </span>Mainchain Consensus</h3>

<figure id="S3.F2" class="ltx_figure"><img src="/html/2204.01202/assets/global-aggregation.png" id="S3.F2.g1" class="ltx_graphics ltx_centering ltx_img_square" width="598" height="642" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2. </span>Aggregation of sharded models</figcaption>
</figure>
<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.1" class="ltx_p">The mainchain is responsible for coordinating all verified aggregated model updates from each shard. This chain contains all participants across all shards; however, the activity on this chain is limited to shard level aggregation results and task proposals. The consensus for this follows the same pluggable consensus policy as the Shard level consensus (Section <a href="#S3.SS2" title="3.2. Shard Level Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>); however, the submitting peers are limited only to the subset of endorsing peers on the shard chains. In this way, we limit the endorsing peers to those in possession of an aggregated model and are able to verify its authenticity.</p>
</div>
<div id="S3.SS3.p2" class="ltx_para">
<p id="S3.SS3.p2.1" class="ltx_p">All accepted model updates to the mainchain will have been endorsed by each shard endorsing peers, which can safely be distributed and aggregated. If multiple models from a single shard have been accepted by disagreements between a shards endorsing peers, the model with more endorsements will win. So, if the endorsing peers submit the same model (model hashes are identical), the endorsing peers can safely evaluate the model update once. Figure <a href="#S3.F2" title="Figure 2 ‣ 3.3. Mainchain Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> shows this process. The final step here is to post the final global model of the mainchain. This model represents the result after a single round of FL, and each of the shards will start the next round with these parameters.</p>
</div>
<div id="S3.SS3.p3" class="ltx_para">
<p id="S3.SS3.p3.1" class="ltx_p">We note that a new round may begin earlier within a shard by assuming the model aggregated by a shard endorsing peers is valid before it is accepted to the mainchain. If this model is not accepted, then the round within that shard must be restarted. This should only happen if the majority of endorsing peers within a shard are compromised, and as such, the disruption will only affect the compromised shard.</p>
</div>
<figure id="S3.F3" class="ltx_figure"><img src="/html/2204.01202/assets/transaction-flow.png" id="S3.F3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="344" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3. </span>Transaction flow for shard level model submission</figcaption>
</figure>
</section>
<section id="S3.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4. </span>Workflow</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p id="S3.SS4.p1.1" class="ltx_p">This section discusses the entire workflow of our proposed framework, discussing the steps required to produce a trained model.</p>
</div>
<div id="S3.SS4.p2" class="ltx_para">
<p id="S3.SS4.p2.1" class="ltx_p">Firstly, we define the participants’ category in our system. We can break this into three categories: clients, peers, and endorsing peers, and described as follows.</p>
<ol id="S3.I1" class="ltx_enumerate">
<li id="S3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(1)</span> 
<div id="S3.I1.i1.p1" class="ltx_para">
<p id="S3.I1.i1.p1.1" class="ltx_p"><span id="S3.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">Clients:</span> In a traditional FL setting, all participants are considered to be clients, where they are comprised of typical IoT devices such as smartphones, laptops, appliances, and vehicles, among others. Clients hold the private datasets that will be used for training models and are they are responsible for producing model updates. We consider the same assumption here, where clients do not validate models but rely on more powerful devices to ensure the system’s security. This is the lightest class of participants in terms of resource consumption.</p>
</div>
</li>
<li id="S3.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(2)</span> 
<div id="S3.I1.i2.p1" class="ltx_para">
<p id="S3.I1.i2.p1.1" class="ltx_p"><span id="S3.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">Peers:</span> Peers are responsible for holding copies of the ledger. From this pool of peers, a committee can be elected to reduce the evaluation overhead. This helps take the load off of endorsing peers and allows peers to offer API services for clients.</p>
</div>
</li>
<li id="S3.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">(3)</span> 
<div id="S3.I1.i3.p1" class="ltx_para">
<p id="S3.I1.i3.p1.1" class="ltx_p"><span id="S3.I1.i3.p1.1.1" class="ltx_text ltx_font_bold">Endorsing peers:</span> Members of the committee are responsible for evaluating model updates during consensus. They hold their own private dataset to endorse other model updates and can submit their own model updates, although they are not required to do so. Furthermore, the policy for evaluation of model weights can be modified, and these peers additionally must check for valid authentication of the write-set. Finally, committee members must participate in the mainchain consensus to determine which shard level updates will be accepted.</p>
</div>
</li>
</ol>
<p id="S3.SS4.p2.2" class="ltx_p">These participants will then participate in one or more tasks, as managed by the mainchain smart contract. Starting from a fresh network, we will describe the following process.</p>
</div>
<section id="S3.SS4.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.1. </span>Task Proposal</h4>

<div id="S3.SS4.SSS1.p1" class="ltx_para">
<p id="S3.SS4.SSS1.p1.1" class="ltx_p">The procedure begins with a task proposal on the application layer. It will be proposed on the mainchain in the form of a smart contract, and it outlines the requirements and task description. We leave the details of this specification open, as we may not know the complete set of features or optimization level objectives as such in a vertical FL (VFL) scenario <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib35" title="" class="ltx_ref">ref:federated-learning-concepts, </a>)</cite>. Once this proposal has garnered enough interest in client registration, a new shard will be provisioned, and shard-related smart contracts will be deployed to the newly created shard(s). These processes can be thought of as an open request for participants to collaborate on a specific task.</p>
</div>
</section>
<section id="S3.SS4.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.2. </span>Client Training</h4>

<div id="S3.SS4.SSS2.p1" class="ltx_para">
<p id="S3.SS4.SSS2.p1.1" class="ltx_p">Within a specific shard, an off-chain coordination network will be formed as defined by the proposal. This could utilize existing FL frameworks and best practices, and new paradigms. As such, the fraction of clients fit within a specific round will be determined off-chain by this process and exclude, for example, currently unavailable clients due to battery or network coverage issues. These selected clients are then responsible for producing a model update to the global model weights <math id="S3.SS4.SSS2.p1.1.m1.1" class="ltx_Math" alttext="w" display="inline"><semantics id="S3.SS4.SSS2.p1.1.m1.1a"><mi id="S3.SS4.SSS2.p1.1.m1.1.1" xref="S3.SS4.SSS2.p1.1.m1.1.1.cmml">w</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p1.1.m1.1b"><ci id="S3.SS4.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS4.SSS2.p1.1.m1.1.1">𝑤</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p1.1.m1.1c">w</annotation></semantics></math>. Each required client will then compute their local updates as seen in Eq. (<a href="#S3.E4" title="In 3.1. FL Algorithm ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>). We can see this as Step 1 in Figure <a href="#S3.F3" title="Figure 3 ‣ 3.3. Mainchain Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>.</p>
</div>
</section>
<section id="S3.SS4.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.3. </span>Off-Chain Model Storage</h4>

<div id="S3.SS4.SSS3.p1" class="ltx_para">
<p id="S3.SS4.SSS3.p1.1" class="ltx_p">A client will then optionally upload a model to an off-chain cache such as InterPlanetary File System (IPFS) <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib36" title="" class="ltx_ref">ref:ipfs, </a>)</cite>. At this stage, the model can be downloaded publicly; however, it has not yet been verified nor recorded on the ledger yet. This step is used to record historical models or take the network load off of serving local model updates to peers. We can see this as Step 2 in Figure <a href="#S3.F3" title="Figure 3 ‣ 3.3. Mainchain Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>.</p>
</div>
</section>
<section id="S3.SS4.SSS4" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.4. </span>Model Submission</h4>

<div id="S3.SS4.SSS4.p1" class="ltx_para">
<p id="S3.SS4.SSS4.p1.1" class="ltx_p">Once the model has been uploaded and is available for download, the client will submit the update metadata by invocation of the shard level smart contract. This update should include information such as the model’s hash value and a link from which the model can be downloaded. This can be seen in Step 3 in Figure <a href="#S3.F3" title="Figure 3 ‣ 3.3. Mainchain Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>.</p>
</div>
</section>
<section id="S3.SS4.SSS5" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.5. </span>Peer Endorsement</h4>

<div id="S3.SS4.SSS5.p1" class="ltx_para">
<p id="S3.SS4.SSS5.p1.1" class="ltx_p">The peers on the shard must endorse this model update according to the shard level consensus mechanism (Section <a href="#S3.SS2" title="3.2. Shard Level Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>). This work could be offloaded to the peers’ local workers, where additional computing resources may be present. This can be seen in Steps 4 and 5 in Figure <a href="#S3.F3" title="Figure 3 ‣ 3.3. Mainchain Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>.</p>
</div>
</section>
<section id="S3.SS4.SSS6" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.6. </span>Model Evaluation</h4>

<div id="S3.SS4.SSS6.p1" class="ltx_para">
<p id="S3.SS4.SSS6.p1.1" class="ltx_p">The peers’ local workers request the model weight update from the link specified in the model update. The downloaded model will then be verified against the submitted hash to ensure integrity. Once the model is verified, it can be evaluated by various techniques; for example, the peer may test the model against its local dataset and reject the update on sufficient degradation in performance, such as in the RONI defence. This would be ideal in cases where the data distribution is known to be IID. Alternative solutions such as the FoolsGold scheme may be used for non-IID data, which could be used to identify poisoning attacks from Sybils. The results of this will be returned from the worker back to the peer. Here, we have summarized Steps 6-8 in Figure <a href="#S3.F3" title="Figure 3 ‣ 3.3. Mainchain Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>.</p>
</div>
</section>
<section id="S3.SS4.SSS7" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.7. </span>Shard Aggregation</h4>

<div id="S3.SS4.SSS7.p1" class="ltx_para">
<p id="S3.SS4.SSS7.p1.1" class="ltx_p">Endorsed model updates are written to the ledger according to the consensus quorum. The off-chain FL process can continue by aggregating the models from the current round if they have been accepted into the ledger. These models will then be downloaded and aggregated by the coordinating servers according to Eq. (<a href="#S3.E7" title="In 3.1. FL Algorithm ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a>). These aggregated models will then be published to the mainchain. Similarly, these aggregated shard updates are only be accepted if the committee of endorsing peers reaches a consensus on the update governed by the mainchains consensus mechanism (Section <a href="#S3.SS3" title="3.3. Mainchain Consensus ‣ 3. Our Sharding Solution ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.3</span></a>).</p>
</div>
</section>
<section id="S3.SS4.SSS8" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.8. </span>Global Aggregation</h4>

<div id="S3.SS4.SSS8.p1" class="ltx_para">
<p id="S3.SS4.SSS8.p1.1" class="ltx_p">Finally, all accepted shard level model updates accepted to the mainchain will be downloaded and aggregated by the shard level servers. The peers can easily verify these models by checking the hash of the new distributed global model against the posted hash from the mainchain for the finalized FL round.</p>
</div>
</section>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4. </span>Experiments</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">To demonstrate the effectiveness of our proposed sharding solution, we evaluate the performance in a Proof of Concept (PoC) implementation<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>https://github.com/blockchain-systems/ScaleSFL</span></span></span>. The purpose of experimentation here is first to measure the throughput of a FL workload scale with respect to the number of shards. Secondly, we measure the sharding impact on model performance in both IID and non-IID scenarios. It is important to ensure the quality of models and keep the rate of convergence low when a potential subset of peers are malicious.</p>
</div>
<div id="S4.p2" class="ltx_para">
<p id="S4.p2.1" class="ltx_p">To run these experiments, we use Hyperledger Fabric <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib14" title="" class="ltx_ref">ref:fabric, </a>)</cite>, a permissioned distributed ledger platform. This platform offers a modular architecture allowing for plug-n-play consensus and membership services. Hyperledger Fabric offers an execute-order-validate architecture for transactions, allowing each peer to evaluate models in parallel within each shard. This is opposed to most public blockchain platforms that first order transactions and execute them sequentially. Fabric additionally offers modular endorsement and validation policies which we will use to implement custom consensus logic within an endorsement plugin. We will read in a proposal response payload, sending the given transaction read-write set to the peers’ worker for validation. This read-write set contains the necessary information to endorse or reject the proposed model update. This will be built directly into the Fabric peers.</p>
</div>
<div id="S4.p3" class="ltx_para">
<p id="S4.p3.1" class="ltx_p">Our solution workflow may be adapted to alternative permissioned platforms such as Quorum <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib37" title="" class="ltx_ref">ref:quorum, </a>)</cite>, or public platforms such as Ethereum <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib38" title="" class="ltx_ref">ref:ethereum, </a>)</cite>, which may allow for additional reward allocation schemes. Implementations on these platforms may consider the use of child chains utilizing existing layer-2 scaling solutions. We choose Hyperledger Fabric for our PoC primarily for the flexibility of consensus and membership services during development.</p>
</div>
<figure id="S4.T1" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 1. </span>Experimental Configuration</figcaption>
<table id="S4.T1.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T1.1.1.1" class="ltx_tr">
<th id="S4.T1.1.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Component</th>
<th id="S4.T1.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Type</th>
<th id="S4.T1.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">CPU</th>
<th id="S4.T1.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">GPU</th>
<th id="S4.T1.1.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">RAM</th>
<th id="S4.T1.1.1.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">Disk (SSD)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T1.1.2.1" class="ltx_tr">
<td id="S4.T1.1.2.1.1" class="ltx_td ltx_align_center ltx_border_t">Caliper Benchmark</td>
<td id="S4.T1.1.2.1.2" class="ltx_td ltx_align_center ltx_border_t">Caliper 0.4.2</td>
<td id="S4.T1.1.2.1.3" class="ltx_td ltx_align_center ltx_border_t">Ryzen 7 3800X@3.9 GHz</td>
<td id="S4.T1.1.2.1.4" class="ltx_td ltx_align_center ltx_border_t">NVIDIA RTX 3080</td>
<td id="S4.T1.1.2.1.5" class="ltx_td ltx_align_center ltx_border_t">64GB</td>
<td id="S4.T1.1.2.1.6" class="ltx_td ltx_align_center ltx_border_t">1TB</td>
</tr>
<tr id="S4.T1.1.3.2" class="ltx_tr">
<td id="S4.T1.1.3.2.1" class="ltx_td ltx_align_center">Fabric Peer (Shard)</td>
<td id="S4.T1.1.3.2.2" class="ltx_td ltx_align_center">Fabric 2.3.3</td>
<td id="S4.T1.1.3.2.3" class="ltx_td ltx_align_center">Ryzen 7 3800X@3.9 GHz</td>
<td id="S4.T1.1.3.2.4" class="ltx_td ltx_align_center">NVIDIA RTX 3080</td>
<td id="S4.T1.1.3.2.5" class="ltx_td ltx_align_center">64GB</td>
<td id="S4.T1.1.3.2.6" class="ltx_td ltx_align_center">1TB</td>
</tr>
<tr id="S4.T1.1.4.3" class="ltx_tr">
<td id="S4.T1.1.4.3.1" class="ltx_td ltx_align_center ltx_border_bb">Fabric Peer Worker</td>
<td id="S4.T1.1.4.3.2" class="ltx_td ltx_align_center ltx_border_bb">Python 3.9, PyTorch 1.10.1</td>
<td id="S4.T1.1.4.3.3" class="ltx_td ltx_align_center ltx_border_bb">Ryzen 7 3800X@3.9 GHz</td>
<td id="S4.T1.1.4.3.4" class="ltx_td ltx_align_center ltx_border_bb">NVIDIA RTX 3080</td>
<td id="S4.T1.1.4.3.5" class="ltx_td ltx_align_center ltx_border_bb">64GB</td>
<td id="S4.T1.1.4.3.6" class="ltx_td ltx_align_center ltx_border_bb">1TB</td>
</tr>
</tbody>
</table>
</figure>
<div id="S4.p4" class="ltx_para">
<p id="S4.p4.1" class="ltx_p">Tests here are run locally on a single machine simulating a Fabric test-network with a single orderer running Raft <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib34" title="" class="ltx_ref">ref:raft-consensus, </a>)</cite>, and eight peers, each with their own organization, along with a certificate authority. Each peer worker runs on a single thread, allowing each peer to act independently. The experimental configuration can be seen in Table <a href="#S4.T1" title="Table 1 ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<div id="S4.p5" class="ltx_para">
<p id="S4.p5.1" class="ltx_p">We implement two smart contracts to implement both the mainchain consensus and shard level consensus mechanisms. Smart contracts, otherwise known as chaincode in Fabric, will be deployed to a specific channel within Fabric. We use channels to simulate shards, where each channel operates independently with the ability for different membership and endorsement policies per channel. Additionally, we relax the previous definitions of endorsing peers, such that <math id="S4.p5.1.m1.2" class="ltx_Math" alttext="P\colon\{Peers\}=P_{E}\colon\{Endorsing~{}peers\}" display="inline"><semantics id="S4.p5.1.m1.2a"><mrow id="S4.p5.1.m1.2.2" xref="S4.p5.1.m1.2.2.cmml"><mi id="S4.p5.1.m1.2.2.4" xref="S4.p5.1.m1.2.2.4.cmml">P</mi><mo lspace="0.278em" rspace="0.278em" id="S4.p5.1.m1.2.2.5" xref="S4.p5.1.m1.2.2.5.cmml">:</mo><mrow id="S4.p5.1.m1.1.1.1" xref="S4.p5.1.m1.1.1.1.cmml"><mrow id="S4.p5.1.m1.1.1.1.1.1" xref="S4.p5.1.m1.1.1.1.1.2.cmml"><mo stretchy="false" id="S4.p5.1.m1.1.1.1.1.1.2" xref="S4.p5.1.m1.1.1.1.1.2.cmml">{</mo><mrow id="S4.p5.1.m1.1.1.1.1.1.1" xref="S4.p5.1.m1.1.1.1.1.1.1.cmml"><mi id="S4.p5.1.m1.1.1.1.1.1.1.2" xref="S4.p5.1.m1.1.1.1.1.1.1.2.cmml">P</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.1.1.1.1.1.1.1" xref="S4.p5.1.m1.1.1.1.1.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.1.1.1.1.1.1.3" xref="S4.p5.1.m1.1.1.1.1.1.1.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.1.1.1.1.1.1.1a" xref="S4.p5.1.m1.1.1.1.1.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.1.1.1.1.1.1.4" xref="S4.p5.1.m1.1.1.1.1.1.1.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.1.1.1.1.1.1.1b" xref="S4.p5.1.m1.1.1.1.1.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.1.1.1.1.1.1.5" xref="S4.p5.1.m1.1.1.1.1.1.1.5.cmml">r</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.1.1.1.1.1.1.1c" xref="S4.p5.1.m1.1.1.1.1.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.1.1.1.1.1.1.6" xref="S4.p5.1.m1.1.1.1.1.1.1.6.cmml">s</mi></mrow><mo stretchy="false" id="S4.p5.1.m1.1.1.1.1.1.3" xref="S4.p5.1.m1.1.1.1.1.2.cmml">}</mo></mrow><mo id="S4.p5.1.m1.1.1.1.2" xref="S4.p5.1.m1.1.1.1.2.cmml">=</mo><msub id="S4.p5.1.m1.1.1.1.3" xref="S4.p5.1.m1.1.1.1.3.cmml"><mi id="S4.p5.1.m1.1.1.1.3.2" xref="S4.p5.1.m1.1.1.1.3.2.cmml">P</mi><mi id="S4.p5.1.m1.1.1.1.3.3" xref="S4.p5.1.m1.1.1.1.3.3.cmml">E</mi></msub></mrow><mo lspace="0.278em" rspace="0.278em" id="S4.p5.1.m1.2.2.6" xref="S4.p5.1.m1.2.2.6.cmml">:</mo><mrow id="S4.p5.1.m1.2.2.2.1" xref="S4.p5.1.m1.2.2.2.2.cmml"><mo stretchy="false" id="S4.p5.1.m1.2.2.2.1.2" xref="S4.p5.1.m1.2.2.2.2.cmml">{</mo><mrow id="S4.p5.1.m1.2.2.2.1.1" xref="S4.p5.1.m1.2.2.2.1.1.cmml"><mi id="S4.p5.1.m1.2.2.2.1.1.2" xref="S4.p5.1.m1.2.2.2.1.1.2.cmml">E</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.3" xref="S4.p5.1.m1.2.2.2.1.1.3.cmml">n</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1a" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.4" xref="S4.p5.1.m1.2.2.2.1.1.4.cmml">d</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1b" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.5" xref="S4.p5.1.m1.2.2.2.1.1.5.cmml">o</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1c" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.6" xref="S4.p5.1.m1.2.2.2.1.1.6.cmml">r</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1d" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.7" xref="S4.p5.1.m1.2.2.2.1.1.7.cmml">s</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1e" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.8" xref="S4.p5.1.m1.2.2.2.1.1.8.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1f" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.9" xref="S4.p5.1.m1.2.2.2.1.1.9.cmml">n</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1g" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.10" xref="S4.p5.1.m1.2.2.2.1.1.10.cmml">g</mi><mo lspace="0.330em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1h" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.11" xref="S4.p5.1.m1.2.2.2.1.1.11.cmml">p</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1i" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.12" xref="S4.p5.1.m1.2.2.2.1.1.12.cmml">e</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1j" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.13" xref="S4.p5.1.m1.2.2.2.1.1.13.cmml">e</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1k" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.14" xref="S4.p5.1.m1.2.2.2.1.1.14.cmml">r</mi><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.2.2.2.1.1.1l" xref="S4.p5.1.m1.2.2.2.1.1.1.cmml">​</mo><mi id="S4.p5.1.m1.2.2.2.1.1.15" xref="S4.p5.1.m1.2.2.2.1.1.15.cmml">s</mi></mrow><mo stretchy="false" id="S4.p5.1.m1.2.2.2.1.3" xref="S4.p5.1.m1.2.2.2.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.p5.1.m1.2b"><apply id="S4.p5.1.m1.2.2.cmml" xref="S4.p5.1.m1.2.2"><and id="S4.p5.1.m1.2.2a.cmml" xref="S4.p5.1.m1.2.2"></and><apply id="S4.p5.1.m1.2.2b.cmml" xref="S4.p5.1.m1.2.2"><ci id="S4.p5.1.m1.2.2.5.cmml" xref="S4.p5.1.m1.2.2.5">:</ci><ci id="S4.p5.1.m1.2.2.4.cmml" xref="S4.p5.1.m1.2.2.4">𝑃</ci><apply id="S4.p5.1.m1.1.1.1.cmml" xref="S4.p5.1.m1.1.1.1"><eq id="S4.p5.1.m1.1.1.1.2.cmml" xref="S4.p5.1.m1.1.1.1.2"></eq><set id="S4.p5.1.m1.1.1.1.1.2.cmml" xref="S4.p5.1.m1.1.1.1.1.1"><apply id="S4.p5.1.m1.1.1.1.1.1.1.cmml" xref="S4.p5.1.m1.1.1.1.1.1.1"><times id="S4.p5.1.m1.1.1.1.1.1.1.1.cmml" xref="S4.p5.1.m1.1.1.1.1.1.1.1"></times><ci id="S4.p5.1.m1.1.1.1.1.1.1.2.cmml" xref="S4.p5.1.m1.1.1.1.1.1.1.2">𝑃</ci><ci id="S4.p5.1.m1.1.1.1.1.1.1.3.cmml" xref="S4.p5.1.m1.1.1.1.1.1.1.3">𝑒</ci><ci id="S4.p5.1.m1.1.1.1.1.1.1.4.cmml" xref="S4.p5.1.m1.1.1.1.1.1.1.4">𝑒</ci><ci id="S4.p5.1.m1.1.1.1.1.1.1.5.cmml" xref="S4.p5.1.m1.1.1.1.1.1.1.5">𝑟</ci><ci id="S4.p5.1.m1.1.1.1.1.1.1.6.cmml" xref="S4.p5.1.m1.1.1.1.1.1.1.6">𝑠</ci></apply></set><apply id="S4.p5.1.m1.1.1.1.3.cmml" xref="S4.p5.1.m1.1.1.1.3"><csymbol cd="ambiguous" id="S4.p5.1.m1.1.1.1.3.1.cmml" xref="S4.p5.1.m1.1.1.1.3">subscript</csymbol><ci id="S4.p5.1.m1.1.1.1.3.2.cmml" xref="S4.p5.1.m1.1.1.1.3.2">𝑃</ci><ci id="S4.p5.1.m1.1.1.1.3.3.cmml" xref="S4.p5.1.m1.1.1.1.3.3">𝐸</ci></apply></apply></apply><apply id="S4.p5.1.m1.2.2c.cmml" xref="S4.p5.1.m1.2.2"><ci id="S4.p5.1.m1.2.2.6.cmml" xref="S4.p5.1.m1.2.2.6">:</ci><share href="#S4.p5.1.m1.1.1.1.cmml" id="S4.p5.1.m1.2.2d.cmml" xref="S4.p5.1.m1.2.2"></share><set id="S4.p5.1.m1.2.2.2.2.cmml" xref="S4.p5.1.m1.2.2.2.1"><apply id="S4.p5.1.m1.2.2.2.1.1.cmml" xref="S4.p5.1.m1.2.2.2.1.1"><times id="S4.p5.1.m1.2.2.2.1.1.1.cmml" xref="S4.p5.1.m1.2.2.2.1.1.1"></times><ci id="S4.p5.1.m1.2.2.2.1.1.2.cmml" xref="S4.p5.1.m1.2.2.2.1.1.2">𝐸</ci><ci id="S4.p5.1.m1.2.2.2.1.1.3.cmml" xref="S4.p5.1.m1.2.2.2.1.1.3">𝑛</ci><ci id="S4.p5.1.m1.2.2.2.1.1.4.cmml" xref="S4.p5.1.m1.2.2.2.1.1.4">𝑑</ci><ci id="S4.p5.1.m1.2.2.2.1.1.5.cmml" xref="S4.p5.1.m1.2.2.2.1.1.5">𝑜</ci><ci id="S4.p5.1.m1.2.2.2.1.1.6.cmml" xref="S4.p5.1.m1.2.2.2.1.1.6">𝑟</ci><ci id="S4.p5.1.m1.2.2.2.1.1.7.cmml" xref="S4.p5.1.m1.2.2.2.1.1.7">𝑠</ci><ci id="S4.p5.1.m1.2.2.2.1.1.8.cmml" xref="S4.p5.1.m1.2.2.2.1.1.8">𝑖</ci><ci id="S4.p5.1.m1.2.2.2.1.1.9.cmml" xref="S4.p5.1.m1.2.2.2.1.1.9">𝑛</ci><ci id="S4.p5.1.m1.2.2.2.1.1.10.cmml" xref="S4.p5.1.m1.2.2.2.1.1.10">𝑔</ci><ci id="S4.p5.1.m1.2.2.2.1.1.11.cmml" xref="S4.p5.1.m1.2.2.2.1.1.11">𝑝</ci><ci id="S4.p5.1.m1.2.2.2.1.1.12.cmml" xref="S4.p5.1.m1.2.2.2.1.1.12">𝑒</ci><ci id="S4.p5.1.m1.2.2.2.1.1.13.cmml" xref="S4.p5.1.m1.2.2.2.1.1.13">𝑒</ci><ci id="S4.p5.1.m1.2.2.2.1.1.14.cmml" xref="S4.p5.1.m1.2.2.2.1.1.14">𝑟</ci><ci id="S4.p5.1.m1.2.2.2.1.1.15.cmml" xref="S4.p5.1.m1.2.2.2.1.1.15">𝑠</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p5.1.m1.2c">P\colon\{Peers\}=P_{E}\colon\{Endorsing~{}peers\}</annotation></semantics></math>. We deploy a shard level smart contract we term the “models” chaincode to each channel. Each participant operating within a shard will be assigned to a shard by our managing contract. We deploy the mainchain consensus on its own channel, in which every peer from every shard will join. We term this the catalyst contract, where it is responsible for aggregating a global model from each of the shards. As mentioned previously, model updates are stored off-chain. In this implementation, each peers worker hosts the models locally with a gRPC server.</p>
</div>
<div id="S4.p6" class="ltx_para">
<p id="S4.p6.2" class="ltx_p">We coordinate the FL processes off-chain while pinning updates back to each shard’s ledger. This coordination is abstracted from the approach discussed previously; in this case, we use the Flower <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib39" title="" class="ltx_ref">ref:flower, </a>)</cite> an open-source extensible FL framework. In this implementation, during aggregation, submitted models are verified to have been endorsed, which can be checked by querying the peers’ local ledger to reduce a round of communication. This is conducted by creating a custom strategy within the Flower server and modifying the aggregated fit to filter out any updates which are not present on-chain, by querying the models’ smart contract. We additionally implement differential privacy using Opacus <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib40" title="" class="ltx_ref">ref:opacus, </a>)</cite>, applied during client training. We use an <math id="S4.p6.1.m1.2" class="ltx_Math" alttext="(\epsilon,\delta)" display="inline"><semantics id="S4.p6.1.m1.2a"><mrow id="S4.p6.1.m1.2.3.2" xref="S4.p6.1.m1.2.3.1.cmml"><mo stretchy="false" id="S4.p6.1.m1.2.3.2.1" xref="S4.p6.1.m1.2.3.1.cmml">(</mo><mi id="S4.p6.1.m1.1.1" xref="S4.p6.1.m1.1.1.cmml">ϵ</mi><mo id="S4.p6.1.m1.2.3.2.2" xref="S4.p6.1.m1.2.3.1.cmml">,</mo><mi id="S4.p6.1.m1.2.2" xref="S4.p6.1.m1.2.2.cmml">δ</mi><mo stretchy="false" id="S4.p6.1.m1.2.3.2.3" xref="S4.p6.1.m1.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.p6.1.m1.2b"><interval closure="open" id="S4.p6.1.m1.2.3.1.cmml" xref="S4.p6.1.m1.2.3.2"><ci id="S4.p6.1.m1.1.1.cmml" xref="S4.p6.1.m1.1.1">italic-ϵ</ci><ci id="S4.p6.1.m1.2.2.cmml" xref="S4.p6.1.m1.2.2">𝛿</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="S4.p6.1.m1.2c">(\epsilon,\delta)</annotation></semantics></math> target of (5, <math id="S4.p6.2.m2.1" class="ltx_Math" alttext="1\mathrm{e}{-5}" display="inline"><semantics id="S4.p6.2.m2.1a"><mrow id="S4.p6.2.m2.1.1" xref="S4.p6.2.m2.1.1.cmml"><mrow id="S4.p6.2.m2.1.1.2" xref="S4.p6.2.m2.1.1.2.cmml"><mn id="S4.p6.2.m2.1.1.2.2" xref="S4.p6.2.m2.1.1.2.2.cmml">1</mn><mo lspace="0em" rspace="0em" id="S4.p6.2.m2.1.1.2.1" xref="S4.p6.2.m2.1.1.2.1.cmml">​</mo><mi mathvariant="normal" id="S4.p6.2.m2.1.1.2.3" xref="S4.p6.2.m2.1.1.2.3.cmml">e</mi></mrow><mo id="S4.p6.2.m2.1.1.1" xref="S4.p6.2.m2.1.1.1.cmml">−</mo><mn id="S4.p6.2.m2.1.1.3" xref="S4.p6.2.m2.1.1.3.cmml">5</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.p6.2.m2.1b"><apply id="S4.p6.2.m2.1.1.cmml" xref="S4.p6.2.m2.1.1"><minus id="S4.p6.2.m2.1.1.1.cmml" xref="S4.p6.2.m2.1.1.1"></minus><apply id="S4.p6.2.m2.1.1.2.cmml" xref="S4.p6.2.m2.1.1.2"><times id="S4.p6.2.m2.1.1.2.1.cmml" xref="S4.p6.2.m2.1.1.2.1"></times><cn type="integer" id="S4.p6.2.m2.1.1.2.2.cmml" xref="S4.p6.2.m2.1.1.2.2">1</cn><ci id="S4.p6.2.m2.1.1.2.3.cmml" xref="S4.p6.2.m2.1.1.2.3">e</ci></apply><cn type="integer" id="S4.p6.2.m2.1.1.3.cmml" xref="S4.p6.2.m2.1.1.3">5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p6.2.m2.1c">1\mathrm{e}{-5}</annotation></semantics></math>), a noise multiplier of 0.4, and a max gradient norm of 1.2.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1. </span>Evaluation</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p">For evaluation, we employ Hyperledger Caliper <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib15" title="" class="ltx_ref">ref:hyperledger-caliper, </a>)</cite>, an open source benchmarking tool allowing for various workloads to be conducted for our system under test (SUT). These tests are performed by an independent process that generates transactions to be sent to the SUT by a specified configuration, monitoring for responses to determine metrics such as latency, throughput and success rate. We conduct tests with varying numbers of workers, transactions counts, and transactions per second (TPS) to evaluate the limits of the system.</p>
</div>
<div id="S4.SS1.p2" class="ltx_para">
<p id="S4.SS1.p2.1" class="ltx_p">We run several workloads to test the effects of sharding on transaction throughput and model performance. The benchmark tasks include:</p>
<ul id="S4.I1" class="ltx_itemize">
<li id="S4.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S4.I1.i1.p1" class="ltx_para">
<p id="S4.I1.i1.p1.1" class="ltx_p"><span id="S4.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">Update creation throughput:</span> We first run an experiment to test the throughput of model creation. To do this, we generate a number of models updates, make the parameters available locally, and have the endorsing peers evaluate them during consensus. In this way, we can measure how sharding affects the performance of the consensus mechanism by parallelizing the workload among shards. We aim to verify our initial claim that the global computations required with become <math id="S4.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="\frac{\mathcal{P}\times\mathcal{C}}{\mathcal{S}}" display="inline"><semantics id="S4.I1.i1.p1.1.m1.1a"><mfrac id="S4.I1.i1.p1.1.m1.1.1" xref="S4.I1.i1.p1.1.m1.1.1.cmml"><mrow id="S4.I1.i1.p1.1.m1.1.1.2" xref="S4.I1.i1.p1.1.m1.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.I1.i1.p1.1.m1.1.1.2.2" xref="S4.I1.i1.p1.1.m1.1.1.2.2.cmml">𝒫</mi><mo lspace="0.222em" rspace="0.222em" id="S4.I1.i1.p1.1.m1.1.1.2.1" xref="S4.I1.i1.p1.1.m1.1.1.2.1.cmml">×</mo><mi class="ltx_font_mathcaligraphic" id="S4.I1.i1.p1.1.m1.1.1.2.3" xref="S4.I1.i1.p1.1.m1.1.1.2.3.cmml">𝒞</mi></mrow><mi class="ltx_font_mathcaligraphic" id="S4.I1.i1.p1.1.m1.1.1.3" xref="S4.I1.i1.p1.1.m1.1.1.3.cmml">𝒮</mi></mfrac><annotation-xml encoding="MathML-Content" id="S4.I1.i1.p1.1.m1.1b"><apply id="S4.I1.i1.p1.1.m1.1.1.cmml" xref="S4.I1.i1.p1.1.m1.1.1"><divide id="S4.I1.i1.p1.1.m1.1.1.1.cmml" xref="S4.I1.i1.p1.1.m1.1.1"></divide><apply id="S4.I1.i1.p1.1.m1.1.1.2.cmml" xref="S4.I1.i1.p1.1.m1.1.1.2"><times id="S4.I1.i1.p1.1.m1.1.1.2.1.cmml" xref="S4.I1.i1.p1.1.m1.1.1.2.1"></times><ci id="S4.I1.i1.p1.1.m1.1.1.2.2.cmml" xref="S4.I1.i1.p1.1.m1.1.1.2.2">𝒫</ci><ci id="S4.I1.i1.p1.1.m1.1.1.2.3.cmml" xref="S4.I1.i1.p1.1.m1.1.1.2.3">𝒞</ci></apply><ci id="S4.I1.i1.p1.1.m1.1.1.3.cmml" xref="S4.I1.i1.p1.1.m1.1.1.3">𝒮</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.I1.i1.p1.1.m1.1c">\frac{\mathcal{P}\times\mathcal{C}}{\mathcal{S}}</annotation></semantics></math>.</p>
</div>
</li>
<li id="S4.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S4.I1.i2.p1" class="ltx_para">
<p id="S4.I1.i2.p1.1" class="ltx_p"><span id="S4.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">Model performance:</span> We evaluate the performance of the models across two scales: (1) the global number of epochs computed and (2) the number of gradients, which provide more accurate measures of performance for decentralized training <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib27" title="" class="ltx_ref">ref:bfl-shard, </a>)</cite>. While we are primarily concerned with the performance of integrating existing FL solutions into the blockchain, sharding should allow a larger fraction of clients to be fit, allowing for model performance to be increased.</p>
</div>
</li>
</ul>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2. </span>Datasets</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">For experimentation, we use three datasets, namely the MNIST dataset <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib41" title="" class="ltx_ref">ref:mnist, </a>)</cite> consisting of 60,000 28x28 images of handwritten digits, and the CIFAR-10 dataset <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib42" title="" class="ltx_ref">ref:cifar10, </a>)</cite> which consists of a dataset of 60,000 32<math id="S4.SS2.p1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S4.SS2.p1.1.m1.1a"><mo id="S4.SS2.p1.1.m1.1.1" xref="S4.SS2.p1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1b"><times id="S4.SS2.p1.1.m1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1c">\times</annotation></semantics></math>32 images separated into 10 classes with 6,000 images per class. We use these to represent IID data, where these classes of data are split evenly between clients.</p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p id="S4.SS2.p2.1" class="ltx_p">For non-IID scenarios, we use the LEAF dataset <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib43" title="" class="ltx_ref">ref:leaf-dataset, </a>)</cite> which can be used to test model performance by partitioning the data between peers in a reproducible way. In this setting, the classes of data may not be evenly split. For example, in the case of the Federated Extended MNIST (FEMNIST) dataset, characters were split by the writer of the digit or character. This can be a strong benchmark to model real-world distributions of data.</p>
</div>
<div id="S4.SS2.p3" class="ltx_para">
<p id="S4.SS2.p3.1" class="ltx_p">These datasets are used as a common baseline for comparison and evaluation against previous solutions <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib3" title="" class="ltx_ref">ref:federated-learning, </a>; <a href="#bib.bib22" title="" class="ltx_ref">ref:bfl-async, </a>; <a href="#bib.bib27" title="" class="ltx_ref">ref:bfl-shard, </a>)</cite>, showing the addition of a sharding solution maintains competitive results on model performance. While a non-IID assignment of data across shards may influence the generated global model during the global aggregation stage, the selection of mainchain defence mechanisms plays the largest role in model convergence. Thus, the results generated by the chosen datasets demonstrate the applicability of sharding solutions to existing Blockchain-based methods.</p>
</div>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3. </span>Results</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p id="S4.SS3.p1.1" class="ltx_p">We created multiple workloads for the <span id="S4.SS3.p1.1.1" class="ltx_text ltx_font_italic">Update Creation Throughput</span> benchmark to explore the effectiveness of our sharding solution. These workloads are conducted without malicious updates using the MNIST <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib41" title="" class="ltx_ref">ref:mnist, </a>)</cite> dataset to evaluate the performance of model creation transactions. We set the timeout period for each transaction to 30 seconds, allowing us to consider the number of failed transactions as stale (i.e., not malicious). In this experiment, each of the clients evaluated the update against their entire local dataset, in which we have used the entire test split of the MNIST dataset for each client.</p>
</div>
<figure id="S4.F4" class="ltx_figure"><img src="/html/2204.01202/assets/shards-by-throughput.png" id="S4.F4.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="399" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4. </span>#shards vs. system throughput (TPS)</figcaption>
</figure>
<div id="S4.SS3.p2" class="ltx_para">
<p id="S4.SS3.p2.1" class="ltx_p">We first measure the throughput with respect to the number of shards, as seen in Figure <a href="#S4.F4" title="Figure 4 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>. This workload uses two Caliper workers, evaluated over 200 transactions, where we can see the throughput for each independently operating shard which allows the global throughput to scale linearly. This directly reflects the time for the evaluation of a model that is the primary bottleneck. We note here that the sent TPS for each number of shards is set just above its throughput in order to saturate the system for the evaluation. In this workload, we used the same number of sent transactions for consistency; however, higher numbers of shards have shown improvements in throughput for increased transactions sent, while a lower number of shards may begin to fail earlier.</p>
</div>
<figure id="S4.F5" class="ltx_figure"><img src="/html/2204.01202/assets/tps-by-throughput-avglatency.png" id="S4.F5.g1" class="ltx_graphics ltx_centering ltx_img_portrait" width="598" height="798" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5. </span>Sent TPS vs. system throughput (TPS) &amp; average response latency</figcaption>
</figure>
<div id="S4.SS3.p3" class="ltx_para">
<p id="S4.SS3.p3.1" class="ltx_p">To test the maximum throughput achieved by our system, we measure the sent TPS against the system throughput and average latency. See Figure <a href="#S4.F5" title="Figure 5 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>. This workload is run with 2 caliper workers over 200 transactions. As we increase the sent TPS, the system will reach a point where it becomes saturated and is unable to handle a higher TPS. We can see this by looking at the point where the average latency begins to increase in the figure, where the throughput is maximized. We conduct this workload by measuring sent TPS in increments of 3, starting from 3 TPS. We can see each additional shard increases the overall system throughput similarly in Figure <a href="#S4.F4" title="Figure 4 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> while demonstrating the maximum throughput limit.</p>
</div>
<figure id="S4.F6" class="ltx_figure"><img src="/html/2204.01202/assets/txcnt-by-fail-avglatency.png" id="S4.F6.g1" class="ltx_graphics ltx_centering ltx_img_portrait" width="598" height="798" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6. </span>Transaction count sent vs. average response latency &amp; failure count</figcaption>
</figure>
<div id="S4.SS3.p4" class="ltx_para">
<p id="S4.SS3.p4.1" class="ltx_p">To explore the limits of a usage surge, we measure the number of transactions sent by system throughput, average latency, and failure rate. In this benchmark, we are interested in the system’s behaviour under a workload with a higher sent TPS than throughput. This workload is run with 2 caliper workers and a sent TPS just above the maximum throughput as seen in the previous workload. See Figure <a href="#S4.F6" title="Figure 6 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>. When the system cannot handle the number of transactions currently queued, the average latency will spike, and the number of failed requests will increase because the system begins timing out requests. The system will then go through a “flush” period where many long-running requests begin to fail, so the average latency of successful requests will drop. We note here that the average latency peaks at around 16 seconds due to the average between the maximum latency (the timeout limit) and the minimum latency, which corresponds to the time it takes to evaluate a model fully.</p>
</div>
<figure id="S4.F7" class="ltx_figure"><img src="/html/2204.01202/assets/txcnt-by-throughput.png" id="S4.F7.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="399" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7. </span>Transaction count sent vs. System throughput (TPS)</figcaption>
</figure>
<div id="S4.SS3.p5" class="ltx_para">
<p id="S4.SS3.p5.1" class="ltx_p">Figure <a href="#S4.F7" title="Figure 7 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> shows the throughput over this workload, where the throughput of the system decreases when it is no longer able to handle the number of incoming requests, as the overhead to process these additional requests limits the number of successful requests processed. The decrease in throughput corresponds to the increase in average latency previously observed.</p>
</div>
<figure id="S4.F8" class="ltx_figure"><img src="/html/2204.01202/assets/workers-by-throughput-avglatency.png" id="S4.F8.g1" class="ltx_graphics ltx_centering ltx_img_portrait" width="598" height="798" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8. </span>Caliper workers vs. system throughput (TPS) &amp; average response latency</figcaption>
</figure>
<div id="S4.SS3.p6" class="ltx_para">
<p id="S4.SS3.p6.1" class="ltx_p">We finally test how the system handles concurrent requests. To do so, we run multiple workloads, varying the number of caliper workers, and measuring the system throughput and average latency. This workload configuration sends 200 transactions, with the sent TPS equal to the previously-mentioned maximum throughput. This can be in Figure <a href="#S4.F8" title="Figure 8 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>. We observe that the throughput of the system with respect to the number of workers is quite noisy, however, there is a general downward trend in the system throughput. Increasing the number of caliper workers here allows us to scale the workload generation, however since the endorsement workers evaluating the model operate sequentially in these experiments (limited to a single thread), The throughput is limited. Similarly, we can see an upward trend in average latency caused by each transaction’s time waiting for execution in the queue. We can see that the number of shards plays the largest factor here as workloads with more than 2 shards are tightly grouped with respect to average latency due to these workloads being able to operate in parallel across shards.</p>
</div>
<figure id="S4.F9" class="ltx_figure"><img src="/html/2204.01202/assets/model-performance.png" id="S4.F9.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="447" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 9. </span>Training loss and testing accuracy of CNN model on the MNIST dataset</figcaption>
</figure>
<figure id="S4.T2" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 2. </span>Best accuracy with varying minibatch size (B) and number of local epochs (E)</figcaption>
<table id="S4.T2.2" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T2.2.2" class="ltx_tr">
<th id="S4.T2.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt"><math id="S4.T2.1.1.1.m1.1" class="ltx_Math" alttext="B" display="inline"><semantics id="S4.T2.1.1.1.m1.1a"><mi id="S4.T2.1.1.1.m1.1.1" xref="S4.T2.1.1.1.m1.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="S4.T2.1.1.1.m1.1b"><ci id="S4.T2.1.1.1.m1.1.1.cmml" xref="S4.T2.1.1.1.m1.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.1.1.1.m1.1c">B</annotation></semantics></math></th>
<th id="S4.T2.2.2.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt"><math id="S4.T2.2.2.2.m1.1" class="ltx_Math" alttext="E" display="inline"><semantics id="S4.T2.2.2.2.m1.1a"><mi id="S4.T2.2.2.2.m1.1.1" xref="S4.T2.2.2.2.m1.1.1.cmml">E</mi><annotation-xml encoding="MathML-Content" id="S4.T2.2.2.2.m1.1b"><ci id="S4.T2.2.2.2.m1.1.1.cmml" xref="S4.T2.2.2.2.m1.1.1">𝐸</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.2.2.2.m1.1c">E</annotation></semantics></math></th>
<th id="S4.T2.2.2.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">FedAvg (Accuracy)</th>
<th id="S4.T2.2.2.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">ScaleSFL (Accuracy)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T2.2.3.1" class="ltx_tr">
<th id="S4.T2.2.3.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t">10</th>
<th id="S4.T2.2.3.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t">1</th>
<td id="S4.T2.2.3.1.3" class="ltx_td ltx_align_center ltx_border_t">00.8784</td>
<td id="S4.T2.2.3.1.4" class="ltx_td ltx_align_center ltx_border_t">0.9835</td>
</tr>
<tr id="S4.T2.2.4.2" class="ltx_tr">
<th id="S4.T2.2.4.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_row">10</th>
<th id="S4.T2.2.4.2.2" class="ltx_td ltx_align_center ltx_th ltx_th_row">5</th>
<td id="S4.T2.2.4.2.3" class="ltx_td ltx_align_center">0.9511</td>
<td id="S4.T2.2.4.2.4" class="ltx_td ltx_align_center">0.9897</td>
</tr>
<tr id="S4.T2.2.5.3" class="ltx_tr">
<th id="S4.T2.2.5.3.1" class="ltx_td ltx_align_center ltx_th ltx_th_row">10</th>
<th id="S4.T2.2.5.3.2" class="ltx_td ltx_align_center ltx_th ltx_th_row">15</th>
<td id="S4.T2.2.5.3.3" class="ltx_td ltx_align_center">0.9654</td>
<td id="S4.T2.2.5.3.4" class="ltx_td ltx_align_center">0.9896</td>
</tr>
<tr id="S4.T2.2.6.4" class="ltx_tr">
<th id="S4.T2.2.6.4.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t">20</th>
<th id="S4.T2.2.6.4.2" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t">1</th>
<td id="S4.T2.2.6.4.3" class="ltx_td ltx_align_center ltx_border_t">00.7249</td>
<td id="S4.T2.2.6.4.4" class="ltx_td ltx_align_center ltx_border_t">0.9758</td>
</tr>
<tr id="S4.T2.2.7.5" class="ltx_tr">
<th id="S4.T2.2.7.5.1" class="ltx_td ltx_align_center ltx_th ltx_th_row">20</th>
<th id="S4.T2.2.7.5.2" class="ltx_td ltx_align_center ltx_th ltx_th_row">5</th>
<td id="S4.T2.2.7.5.3" class="ltx_td ltx_align_center">0.9251</td>
<td id="S4.T2.2.7.5.4" class="ltx_td ltx_align_center">0.9881</td>
</tr>
<tr id="S4.T2.2.8.6" class="ltx_tr">
<th id="S4.T2.2.8.6.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb">20</th>
<th id="S4.T2.2.8.6.2" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb">15</th>
<td id="S4.T2.2.8.6.3" class="ltx_td ltx_align_center ltx_border_bb">0.9544</td>
<td id="S4.T2.2.8.6.4" class="ltx_td ltx_align_center ltx_border_bb">0.9889</td>
</tr>
</tbody>
</table>
</figure>
<div id="S4.SS3.p7" class="ltx_para">
<p id="S4.SS3.p7.3" class="ltx_p">To measure <span id="S4.SS3.p7.3.1" class="ltx_text ltx_font_italic">model performance</span>, we measure the effect of various training parameters. We use minibatch sizes of <math id="S4.SS3.p7.1.m1.2" class="ltx_Math" alttext="B\in\{10,20\}" display="inline"><semantics id="S4.SS3.p7.1.m1.2a"><mrow id="S4.SS3.p7.1.m1.2.3" xref="S4.SS3.p7.1.m1.2.3.cmml"><mi id="S4.SS3.p7.1.m1.2.3.2" xref="S4.SS3.p7.1.m1.2.3.2.cmml">B</mi><mo id="S4.SS3.p7.1.m1.2.3.1" xref="S4.SS3.p7.1.m1.2.3.1.cmml">∈</mo><mrow id="S4.SS3.p7.1.m1.2.3.3.2" xref="S4.SS3.p7.1.m1.2.3.3.1.cmml"><mo stretchy="false" id="S4.SS3.p7.1.m1.2.3.3.2.1" xref="S4.SS3.p7.1.m1.2.3.3.1.cmml">{</mo><mn id="S4.SS3.p7.1.m1.1.1" xref="S4.SS3.p7.1.m1.1.1.cmml">10</mn><mo id="S4.SS3.p7.1.m1.2.3.3.2.2" xref="S4.SS3.p7.1.m1.2.3.3.1.cmml">,</mo><mn id="S4.SS3.p7.1.m1.2.2" xref="S4.SS3.p7.1.m1.2.2.cmml">20</mn><mo stretchy="false" id="S4.SS3.p7.1.m1.2.3.3.2.3" xref="S4.SS3.p7.1.m1.2.3.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p7.1.m1.2b"><apply id="S4.SS3.p7.1.m1.2.3.cmml" xref="S4.SS3.p7.1.m1.2.3"><in id="S4.SS3.p7.1.m1.2.3.1.cmml" xref="S4.SS3.p7.1.m1.2.3.1"></in><ci id="S4.SS3.p7.1.m1.2.3.2.cmml" xref="S4.SS3.p7.1.m1.2.3.2">𝐵</ci><set id="S4.SS3.p7.1.m1.2.3.3.1.cmml" xref="S4.SS3.p7.1.m1.2.3.3.2"><cn type="integer" id="S4.SS3.p7.1.m1.1.1.cmml" xref="S4.SS3.p7.1.m1.1.1">10</cn><cn type="integer" id="S4.SS3.p7.1.m1.2.2.cmml" xref="S4.SS3.p7.1.m1.2.2">20</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p7.1.m1.2c">B\in\{10,20\}</annotation></semantics></math>, and local epoch sizes of <math id="S4.SS3.p7.2.m2.3" class="ltx_Math" alttext="E\in\{1,5,15\}" display="inline"><semantics id="S4.SS3.p7.2.m2.3a"><mrow id="S4.SS3.p7.2.m2.3.4" xref="S4.SS3.p7.2.m2.3.4.cmml"><mi id="S4.SS3.p7.2.m2.3.4.2" xref="S4.SS3.p7.2.m2.3.4.2.cmml">E</mi><mo id="S4.SS3.p7.2.m2.3.4.1" xref="S4.SS3.p7.2.m2.3.4.1.cmml">∈</mo><mrow id="S4.SS3.p7.2.m2.3.4.3.2" xref="S4.SS3.p7.2.m2.3.4.3.1.cmml"><mo stretchy="false" id="S4.SS3.p7.2.m2.3.4.3.2.1" xref="S4.SS3.p7.2.m2.3.4.3.1.cmml">{</mo><mn id="S4.SS3.p7.2.m2.1.1" xref="S4.SS3.p7.2.m2.1.1.cmml">1</mn><mo id="S4.SS3.p7.2.m2.3.4.3.2.2" xref="S4.SS3.p7.2.m2.3.4.3.1.cmml">,</mo><mn id="S4.SS3.p7.2.m2.2.2" xref="S4.SS3.p7.2.m2.2.2.cmml">5</mn><mo id="S4.SS3.p7.2.m2.3.4.3.2.3" xref="S4.SS3.p7.2.m2.3.4.3.1.cmml">,</mo><mn id="S4.SS3.p7.2.m2.3.3" xref="S4.SS3.p7.2.m2.3.3.cmml">15</mn><mo stretchy="false" id="S4.SS3.p7.2.m2.3.4.3.2.4" xref="S4.SS3.p7.2.m2.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p7.2.m2.3b"><apply id="S4.SS3.p7.2.m2.3.4.cmml" xref="S4.SS3.p7.2.m2.3.4"><in id="S4.SS3.p7.2.m2.3.4.1.cmml" xref="S4.SS3.p7.2.m2.3.4.1"></in><ci id="S4.SS3.p7.2.m2.3.4.2.cmml" xref="S4.SS3.p7.2.m2.3.4.2">𝐸</ci><set id="S4.SS3.p7.2.m2.3.4.3.1.cmml" xref="S4.SS3.p7.2.m2.3.4.3.2"><cn type="integer" id="S4.SS3.p7.2.m2.1.1.cmml" xref="S4.SS3.p7.2.m2.1.1">1</cn><cn type="integer" id="S4.SS3.p7.2.m2.2.2.cmml" xref="S4.SS3.p7.2.m2.2.2">5</cn><cn type="integer" id="S4.SS3.p7.2.m2.3.3.cmml" xref="S4.SS3.p7.2.m2.3.3">15</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p7.2.m2.3c">E\in\{1,5,15\}</annotation></semantics></math>. We present results here from the non-IID MNIST dataset, however similar results hold for both CIFAR-10, and LEAF benchmarks. The effects of both minibatch size and local epoch sizes can be seen in Figure <a href="#S4.F9" title="Figure 9 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">9</span></a>, and Table <a href="#S4.T2" title="Table 2 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>, where we compare our ScaleSFL solution and the traditional FedAvg algorithm. This comparison is performed under the assumption all clients are honest, and thus we are simply comparing the effect of sharding. Both training loss and accuracy are considered, and workflows are run for 15 global epochs, where the number of ScaleSFL shards is set to 8, with each shard sampling eight clients each round, making for a total of 64 clients. The FedAvg algorithm is comparably run with 64 clients, with both methods using a client learning rate of <math id="S4.SS3.p7.3.m3.1" class="ltx_Math" alttext="\eta_{k}=1e-2" display="inline"><semantics id="S4.SS3.p7.3.m3.1a"><mrow id="S4.SS3.p7.3.m3.1.1" xref="S4.SS3.p7.3.m3.1.1.cmml"><msub id="S4.SS3.p7.3.m3.1.1.2" xref="S4.SS3.p7.3.m3.1.1.2.cmml"><mi id="S4.SS3.p7.3.m3.1.1.2.2" xref="S4.SS3.p7.3.m3.1.1.2.2.cmml">η</mi><mi id="S4.SS3.p7.3.m3.1.1.2.3" xref="S4.SS3.p7.3.m3.1.1.2.3.cmml">k</mi></msub><mo id="S4.SS3.p7.3.m3.1.1.1" xref="S4.SS3.p7.3.m3.1.1.1.cmml">=</mo><mrow id="S4.SS3.p7.3.m3.1.1.3" xref="S4.SS3.p7.3.m3.1.1.3.cmml"><mrow id="S4.SS3.p7.3.m3.1.1.3.2" xref="S4.SS3.p7.3.m3.1.1.3.2.cmml"><mn id="S4.SS3.p7.3.m3.1.1.3.2.2" xref="S4.SS3.p7.3.m3.1.1.3.2.2.cmml">1</mn><mo lspace="0em" rspace="0em" id="S4.SS3.p7.3.m3.1.1.3.2.1" xref="S4.SS3.p7.3.m3.1.1.3.2.1.cmml">​</mo><mi id="S4.SS3.p7.3.m3.1.1.3.2.3" xref="S4.SS3.p7.3.m3.1.1.3.2.3.cmml">e</mi></mrow><mo id="S4.SS3.p7.3.m3.1.1.3.1" xref="S4.SS3.p7.3.m3.1.1.3.1.cmml">−</mo><mn id="S4.SS3.p7.3.m3.1.1.3.3" xref="S4.SS3.p7.3.m3.1.1.3.3.cmml">2</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p7.3.m3.1b"><apply id="S4.SS3.p7.3.m3.1.1.cmml" xref="S4.SS3.p7.3.m3.1.1"><eq id="S4.SS3.p7.3.m3.1.1.1.cmml" xref="S4.SS3.p7.3.m3.1.1.1"></eq><apply id="S4.SS3.p7.3.m3.1.1.2.cmml" xref="S4.SS3.p7.3.m3.1.1.2"><csymbol cd="ambiguous" id="S4.SS3.p7.3.m3.1.1.2.1.cmml" xref="S4.SS3.p7.3.m3.1.1.2">subscript</csymbol><ci id="S4.SS3.p7.3.m3.1.1.2.2.cmml" xref="S4.SS3.p7.3.m3.1.1.2.2">𝜂</ci><ci id="S4.SS3.p7.3.m3.1.1.2.3.cmml" xref="S4.SS3.p7.3.m3.1.1.2.3">𝑘</ci></apply><apply id="S4.SS3.p7.3.m3.1.1.3.cmml" xref="S4.SS3.p7.3.m3.1.1.3"><minus id="S4.SS3.p7.3.m3.1.1.3.1.cmml" xref="S4.SS3.p7.3.m3.1.1.3.1"></minus><apply id="S4.SS3.p7.3.m3.1.1.3.2.cmml" xref="S4.SS3.p7.3.m3.1.1.3.2"><times id="S4.SS3.p7.3.m3.1.1.3.2.1.cmml" xref="S4.SS3.p7.3.m3.1.1.3.2.1"></times><cn type="integer" id="S4.SS3.p7.3.m3.1.1.3.2.2.cmml" xref="S4.SS3.p7.3.m3.1.1.3.2.2">1</cn><ci id="S4.SS3.p7.3.m3.1.1.3.2.3.cmml" xref="S4.SS3.p7.3.m3.1.1.3.2.3">𝑒</ci></apply><cn type="integer" id="S4.SS3.p7.3.m3.1.1.3.3.cmml" xref="S4.SS3.p7.3.m3.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p7.3.m3.1c">\eta_{k}=1e-2</annotation></semantics></math>.</p>
</div>
<div id="S4.SS3.p8" class="ltx_para">
<p id="S4.SS3.p8.1" class="ltx_p">In Figure <a href="#S4.F9" title="Figure 9 ‣ 4.3. Results ‣ 4. Experiments ‣ ScaleSFL: A Sharding Solution for Blockchain-Based Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">9</span></a>, we observe the convergence rate of ScaleSFL is faster than the FedAvg algorithm, generally reaching an accuracy of <math id="S4.SS3.p8.1.m1.1" class="ltx_Math" alttext="0.98" display="inline"><semantics id="S4.SS3.p8.1.m1.1a"><mn id="S4.SS3.p8.1.m1.1.1" xref="S4.SS3.p8.1.m1.1.1.cmml">0.98</mn><annotation-xml encoding="MathML-Content" id="S4.SS3.p8.1.m1.1b"><cn type="float" id="S4.SS3.p8.1.m1.1.1.cmml" xref="S4.SS3.p8.1.m1.1.1">0.98</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p8.1.m1.1c">0.98</annotation></semantics></math> within the 15 global epochs considered. This is due to the parallelized nature of ScaleSFL, where each shard can simultaneously filter and produce viable updates with reasonable client sampling rates, combining them to produce a stronger global model at each step.</p>
</div>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5. </span>Discussion</h2>

<section id="S5.SS0.SSS0.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_font_bold ltx_title_paragraph">Hierarchical Sharding</h5>

<div id="S5.SS0.SSS0.Px1.p1" class="ltx_para">
<p id="S5.SS0.SSS0.Px1.p1.1" class="ltx_p">Since each shard operates independently, several additional improvements over a traditional FL workflow can be achieved. For example, a typical device selection step is usually performed, sampling a subset of the available devices for each round. However, since the population of each shard is much smaller than the global population, each shard’s ability to update and maintain active devices becomes more efficient, and during aggregation, a much larger sampling of devices can be used from the global population.</p>
</div>
<div id="S5.SS0.SSS0.Px1.p2" class="ltx_para">
<p id="S5.SS0.SSS0.Px1.p2.1" class="ltx_p">Additional optimizations could be achieved by placement of clients based on region <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib4" title="" class="ltx_ref">ref:hierfavg, </a>)</cite>. Since each client may submit their model to an off-chain cache such as IPFS, shards with a population based within the same region could reduce overhead latency. In this way, the overhead only occurs during the global aggregation phase. The possibility of single-shard takeover attacks may be introduced by not using a random sampling scheme. However, as noted before, this disruption will only affect the compromised shard since all endorsing peers from all shards must agree on which shard level updates are aggregated. This may allow for region based sampling algorithms to be used for the assignment of participants. These strategies should be chosen depending on the underlying task, potentially chosen by the task submitter, or consensus among task participants prior to shard creation.</p>
</div>
<div id="S5.SS0.SSS0.Px1.p3" class="ltx_para">
<p id="S5.SS0.SSS0.Px1.p3.1" class="ltx_p">Alternative participant sampling can be considered in the case of cross-silo or consortium based settings such as medical or financial organizations. For example, it may be beneficial to allow clients of a particular organization to be grouped under a single shard <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib27" title="" class="ltx_ref">ref:bfl-shard, </a>)</cite>. Fine-grained control oversampling and permissions are delegated independently within each shard.</p>
</div>
</section>
<section id="S5.SS0.SSS0.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_font_bold ltx_title_paragraph">Model Provenance</h5>

<div id="S5.SS0.SSS0.Px2.p1" class="ltx_para">
<p id="S5.SS0.SSS0.Px2.p1.1" class="ltx_p">By pinning model information back to the mainchain, we provide an open model hub for sharing and distributing trained models in a decentralized fashion. Model submission to IPFS additionally allows for transparent model check-pointing and disaster recovery. In the case that a bug has been introduced at some point in the FL process, either intentionally through malicious attack, or by data bias or incompatibility, previous model checkpoints may be restored, and a new task may be initiated using this saved model checkpoint.</p>
</div>
</section>
<section id="S5.SS0.SSS0.Px3" class="ltx_paragraph">
<h5 class="ltx_title ltx_font_bold ltx_title_paragraph">Rewards Allocation</h5>

<div id="S5.SS0.SSS0.Px3.p1" class="ltx_para">
<p id="S5.SS0.SSS0.Px3.p1.1" class="ltx_p">While our implementation of ScaleSFL uses Hyperledger Fabric, alternative implementations may consider platforms such as Ethereum <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib38" title="" class="ltx_ref">ref:ethereum, </a>)</cite> for implementation of reward mechanisms. Since training models in a permissionless fashion may result in decreased contributions, due to the availability of models through a model hub, and without expending computing resources, rewards become an integral part of the workflow. While access to the models should remain free, contributing computing resources should be rewarded by distributing rewards to the contributing clients. Additional incentives could be provided by task contributors or interested clients, to “sweeten the pot”, encouraging community contributions. Additionally, with the incorporation of a native cryptocurrency, submitting models transactions could incur a small gas fee. This would prevent attempted Denial of Service (DOS) attacks against the system since the rewards for model contributions are only realized for non-malicious updates. However, common DOS attacks may generate random model updates or send updates with dead cache links.</p>
</div>
</section>
<section id="S5.SS0.SSS0.Px4" class="ltx_paragraph">
<h5 class="ltx_title ltx_font_bold ltx_title_paragraph">Alternative Attacks</h5>

<div id="S5.SS0.SSS0.Px4.p1" class="ltx_para">
<p id="S5.SS0.SSS0.Px4.p1.1" class="ltx_p">Up to this point, we have discussed malicious clients as clients which send poisoned model updates. However, malicious clients may attempt various alternate types of attacks, such as uploading a different model than specified in the task request or making the model update very large, attempting to perform a DOS attack on a shard. These attacks may be prevented by checking the size of the model uploaded to the cache prior to download. However, a more clever client may attempt to submit a legitimate model many times, attempting to either reap the rewards for training, or to perform a DOS attack against the system. These clients are known as lazy nodes <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib21" title="" class="ltx_ref">ref:fl-meets-bc, </a>)</cite>. They additionally attempt to copy another client’s model update during a gossip phase. This problem has severe negative effects on global model performance, so updates from these lazy nodes should be discarded. One way to recognize these lazy nodes is to publish model updates with a pseudo-noise (PN) sequence, and then subsequently publish the PN sequence after each client has published their model update. Lazy nodes will be spotted by checking the correlation between the model updates and the published PN sequence <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib21" title="" class="ltx_ref">ref:fl-meets-bc, </a>)</cite>. Gas fees should deter spotted clients, and Sybils from attempting to submit further model updates. Incorporating the defence into our workflow would modify the off-chain model storage step, ensuring all models submitted during model submission have a valid PN signature.</p>
</div>
</section>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6. </span>Conclusions</h2>

<div id="S6.p1" class="ltx_para">
<p id="S6.p1.1" class="ltx_p">In this paper, we proposed a sharding solution for blockchain based federated learning. We described a modular workflow, allowing for pluggable defence mechanisms and poisoning mitigations strategies. This workflow supports off-chain FL frameworks to be used, while pinning verified model updates to the blockchain. We additionally implement a proof-of-concept of ScaleSFL using Hyperledger fabric. Our experimental results demonstrated that ScaleSFL improves validation performance linearly with the addition of shards. This helps address the prevalent scalability issue related to blockchain consensus by demonstrating the impact of sharding.</p>
</div>
<div id="S6.p2" class="ltx_para">
<p id="S6.p2.1" class="ltx_p">As <span id="S6.p2.1.1" class="ltx_text ltx_font_italic">ongoing and future work</span>, we further explore the details of a sharded solution applied to the blockchain.
Specifically, we aim to simulate malicious attacks on the system via model poisoning updates.
This would show the effectiveness of a blockchain solution to provide security against bad actors.
Additionally, we will explore the application of a reward mechanism for participating in the model training process for our current system. This could be explored on other chains such as Ethereum <cite class="ltx_cite ltx_citemacro_citep">(<a href="#bib.bib38" title="" class="ltx_ref">ref:ethereum, </a>)</cite>, where the use of native tokens is well-supported. Finally, we would like to implement a more full-featured implementation of this PoC, including dynamic shard creation and allowing model proposition through our catalyst contract.</p>
</div>
<div class="ltx_acknowledgements">
<h6 class="ltx_title ltx_title_acknowledgements">Acknowledgements.</h6>
This work is partially supported by NSERC (Canada) and University of Manitoba.

</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Jie Xu, Benjamin S Glicksberg, Chang Su, Peter Walker, Jiang Bian, and Fei
Wang.

</span>
<span class="ltx_bibblock">Federated learning for healthcare informatics.

</span>
<span class="ltx_bibblock"><span id="bib.bib1.1.1" class="ltx_text ltx_font_italic">Journal of Healthcare Informatics Research</span>, 5(1):1–19, 2021.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Adnan Qayyum, Kashif Ahmad, Muhammad Ahtazaz Ahsan, Ala Al-Fuqaha, and Junaid
Qadir.

</span>
<span class="ltx_bibblock">Collaborative federated learning for healthcare: Multi-modal covid-19
diagnosis at the edge.

</span>
<span class="ltx_bibblock"><span id="bib.bib2.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2101.07511</span>, 2021.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Brendan McMahan, Eider Moore, Daniel Ramage, Seth Hampson, and Blaise Aguera
y Arcas.

</span>
<span class="ltx_bibblock">Communication-efficient learning of deep networks from decentralized
data.

</span>
<span class="ltx_bibblock">In <span id="bib.bib3.1.1" class="ltx_text ltx_font_italic">Artificial intelligence and statistics</span>, pages 1273–1282.
PMLR, 2017.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Lumin Liu, Jun Zhang, SH Song, and Khaled B Letaief.

</span>
<span class="ltx_bibblock">Client-edge-cloud hierarchical federated learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib4.1.1" class="ltx_text ltx_font_italic">ICC 2020-2020 IEEE International Conference on Communications
(ICC)</span>, pages 1–6. IEEE, 2020.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Arvind Narayanan and Vitaly Shmatikov.

</span>
<span class="ltx_bibblock">How to break anonymity of the netflix prize dataset.

</span>
<span class="ltx_bibblock"><span id="bib.bib5.1.1" class="ltx_text ltx_font_italic">arXiv preprint cs/0610105</span>, 2006.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Cynthia Dwork, Frank McSherry, Kobbi Nissim, and Adam Smith.

</span>
<span class="ltx_bibblock">Calibrating noise to sensitivity in private data analysis.

</span>
<span class="ltx_bibblock">In <span id="bib.bib6.1.1" class="ltx_text ltx_font_italic">Theory of cryptography conference</span>, pages 265–284. Springer,
2006.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Cynthia Dwork.

</span>
<span class="ltx_bibblock">Differential privacy.

</span>
<span class="ltx_bibblock">In <span id="bib.bib7.1.1" class="ltx_text ltx_font_italic">International Colloquium on Automata, Languages, and
Programming</span>, pages 1–12. Springer, 2006.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Paritosh Ramanan and Kiyoshi Nakayama.

</span>
<span class="ltx_bibblock">Baffle: Blockchain based aggregator free federated learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib8.1.1" class="ltx_text ltx_font_italic">2020 IEEE International Conference on Blockchain
(Blockchain)</span>, pages 72–81. IEEE, 2020.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Yuzheng Li, Chuan Chen, Nan Liu, Huawei Huang, Zibin Zheng, and Qiang Yan.

</span>
<span class="ltx_bibblock">A blockchain-based decentralized federated learning framework with
committee consensus.

</span>
<span class="ltx_bibblock"><span id="bib.bib9.1.1" class="ltx_text ltx_font_italic">IEEE Network</span>, 35(1):234–241, 2020.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Marco Barreno, Blaine Nelson, Anthony D Joseph, and J Doug Tygar.

</span>
<span class="ltx_bibblock">The security of machine learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib10.1.1" class="ltx_text ltx_font_italic">Machine Learning</span>, 81(2):121–148, 2010.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Peva Blanchard, El Mahdi El Mhamdi, Rachid Guerraoui, and Julien Stainer.

</span>
<span class="ltx_bibblock">Machine learning with adversaries: Byzantine tolerant gradient
descent.

</span>
<span class="ltx_bibblock">In <span id="bib.bib11.1.1" class="ltx_text ltx_font_italic">Proceedings of the 31st International Conference on Neural
Information Processing Systems</span>, pages 118–128, 2017.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Clement Fung, Chris JM Yoon, and Ivan Beschastnikh.

</span>
<span class="ltx_bibblock">Mitigating sybils in federated learning poisoning.

</span>
<span class="ltx_bibblock"><span id="bib.bib12.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1808.04866</span>, 2018.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Ching Pui Wan and Qifeng Chen.

</span>
<span class="ltx_bibblock">Robust federated learning with attack-adaptive aggregation.

</span>
<span class="ltx_bibblock"><span id="bib.bib13.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2102.05257</span>, 2021.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Elli Androulaki, Artem Barger, Vita Bortnikov, Christian Cachin, Konstantinos
Christidis, Angelo De Caro, David Enyeart, Christopher Ferris, Gennady
Laventman, Yacov Manevich, et al.

</span>
<span class="ltx_bibblock">Hyperledger fabric: a distributed operating system for permissioned
blockchains.

</span>
<span class="ltx_bibblock">In <span id="bib.bib14.1.1" class="ltx_text ltx_font_italic">Proceedings of the thirteenth EuroSys conference</span>, pages
1–15, 2018.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Hyperledger caliper, Apr 2020.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Reza Shokri and Vitaly Shmatikov.

</span>
<span class="ltx_bibblock">Privacy-preserving deep learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib16.1.1" class="ltx_text ltx_font_italic">Proceedings of the 22nd ACM SIGSAC conference on computer and
communications security</span>, pages 1310–1321, 2015.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Martin Abadi, Andy Chu, Ian Goodfellow, H Brendan McMahan, Ilya Mironov, Kunal
Talwar, and Li Zhang.

</span>
<span class="ltx_bibblock">Deep learning with differential privacy.

</span>
<span class="ltx_bibblock">In <span id="bib.bib17.1.1" class="ltx_text ltx_font_italic">Proceedings of the 2016 ACM SIGSAC conference on computer and
communications security</span>, pages 308–318, 2016.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Anifat M. Olawoyin, Carson K. Leung, and Qi Wen.

</span>
<span class="ltx_bibblock">Privacy preservation of COVID-19 contact tracing data.

</span>
<span class="ltx_bibblock">In <span id="bib.bib18.1.1" class="ltx_text ltx_font_italic">Proceedings of the IUCC-CIT-DSCI-SmartCNS 2021</span>, pages
288–295, 2021.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Abylay Satybaldy and Mariusz Nowostawski.

</span>
<span class="ltx_bibblock">Review of techniques for privacy-preserving blockchain systems.

</span>
<span class="ltx_bibblock">In <span id="bib.bib19.1.1" class="ltx_text ltx_font_italic">Proceedings of the 2nd ACM International Symposium on
Blockchain and Secure Critical Infrastructure (BSCI ’20)</span>, pages 1–9.
ACM, 2020.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Hyesung Kim, Jihong Park, Mehdi Bennis, and Seong-Lyun Kim.

</span>
<span class="ltx_bibblock">Blockchained on-device federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib20.1.1" class="ltx_text ltx_font_italic">IEEE Communications Letters</span>, 24(6):1279–1283, 2019.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Chuan Ma, Jun Li, Ming Ding, Long Shi, Taotao Wang, Zhu Han, and H Vincent
Poor.

</span>
<span class="ltx_bibblock">When federated learning meets blockchain: A new distributed learning
paradigm.

</span>
<span class="ltx_bibblock"><span id="bib.bib21.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2009.09338</span>, 2020.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Yinghui Liu, Youyang Qu, Chenhao Xu, Zhicheng Hao, and Bruce Gu.

</span>
<span class="ltx_bibblock">Blockchain-enabled asynchronous federated learning in edge computing.

</span>
<span class="ltx_bibblock"><span id="bib.bib22.1.1" class="ltx_text ltx_font_italic">Sensors</span>, 21(10):3335, 2021.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Jonathan Passerat-Palmbach, Tyler Farnan, Robert Miller, Marielle S Gross,
Heather Leigh Flannery, and Bill Gleim.

</span>
<span class="ltx_bibblock">A blockchain-orchestrated federated learning architecture for
healthcare consortia.

</span>
<span class="ltx_bibblock"><span id="bib.bib23.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1910.12603</span>, 2019.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Yang Zhao, Jun Zhao, Linshan Jiang, Rui Tan, Dusit Niyato, Zengxiang Li,
Lingjuan Lyu, and Yingbo Liu.

</span>
<span class="ltx_bibblock">Privacy-preserving blockchain-based federated learning for iot
devices.

</span>
<span class="ltx_bibblock"><span id="bib.bib24.1.1" class="ltx_text ltx_font_italic">IEEE Internet of Things Journal</span>, 8(3):1817–1829, 2020.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Yunlong Lu, Xiaohong Huang, Ke Zhang, Sabita Maharjan, and Yan Zhang.

</span>
<span class="ltx_bibblock">Low-latency federated learning and blockchain for edge association in
digital twin empowered 6g networks.

</span>
<span class="ltx_bibblock"><span id="bib.bib25.1.1" class="ltx_text ltx_font_italic">IEEE Transactions on Industrial Informatics</span>, 17(7):5098–5107,
2020.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Keke Gai, Yulu Wu, Liehuang Zhu, Zijian Zhang, and Meikang Qiu.

</span>
<span class="ltx_bibblock">Differential privacy-based blockchain for industrial
internet-of-things.

</span>
<span class="ltx_bibblock"><span id="bib.bib26.1.1" class="ltx_text ltx_font_italic">IEEE Transactions on Industrial Informatics</span>, 16(6):4156–4165,
2019.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Shuo Yuan, Bin Cao, Yao Sun, and Mugen Peng.

</span>
<span class="ltx_bibblock">Secure and efficient federated learning through layering and sharding
blockchain.

</span>
<span class="ltx_bibblock"><span id="bib.bib27.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2104.13130</span>, 2021.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Peter Kairouz, H Brendan McMahan, Brendan Avent, Aurélien Bellet, Mehdi
Bennis, Arjun Nitin Bhagoji, Kallista Bonawitz, Zachary Charles, Graham
Cormode, Rachel Cummings, et al.

</span>
<span class="ltx_bibblock">Advances and open problems in federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib28.1.1" class="ltx_text ltx_font_italic">Foundations and Trends® in Machine Learning</span>,
14(1–2):1–210, 2021.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Hongyi Wang, Kartik Sreenivasan, Shashank Rajput, Harit Vishwakarma, Saurabh
Agarwal, Jy-yong Sohn, Kangwook Lee, and Dimitris Papailiopoulos.

</span>
<span class="ltx_bibblock">Attack of the tails: Yes, you really can backdoor federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib29.1.1" class="ltx_text ltx_font_italic">Advances in Neural Information Processing Systems</span>,
33:16070–16084, 2020.

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
Yuzhe Ma, Xiaojin Zhu, and Justin Hsu.

</span>
<span class="ltx_bibblock">Data poisoning against differentially-private learners: Attacks and
defenses.

</span>
<span class="ltx_bibblock">In <span id="bib.bib30.1.1" class="ltx_text ltx_font_italic">Proceedings of the 28th International Joint Conference on
Artificial Intelligence</span>, IJCAI’19, page 4732–4738. AAAI Press, 2019.

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Jun Li, Yumeng Shao, Kang Wei, Ming Ding, Chuan Ma, Long Shi, Zhu Han, and
Vincent Poor.

</span>
<span class="ltx_bibblock">Blockchain assisted decentralized federated learning (blade-fl):
Performance analysis and resource allocation.

</span>
<span class="ltx_bibblock"><span id="bib.bib31.1.1" class="ltx_text ltx_font_italic">IEEE Transactions on Parallel and Distributed Systems</span>, 2021.

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Tian Li, Maziar Sanjabi, Ahmad Beirami, and Virginia Smith.

</span>
<span class="ltx_bibblock">Fair resource allocation in federated learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib32.1.1" class="ltx_text ltx_font_italic">International Conference on Learning Representations</span>, 2020.

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
Miguel Castro, Barbara Liskov, et al.

</span>
<span class="ltx_bibblock">Practical byzantine fault tolerance.

</span>
<span class="ltx_bibblock">In <span id="bib.bib33.1.1" class="ltx_text ltx_font_italic">OSDI</span>, volume 99, pages 173–186, 1999.

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
Diego Ongaro and John Ousterhout.

</span>
<span class="ltx_bibblock">In search of an understandable consensus algorithm.

</span>
<span class="ltx_bibblock">In <span id="bib.bib34.1.1" class="ltx_text ltx_font_italic">2014 USENIX Annual Technical Conference (USENIX ATC
14)</span>, pages 305–319, 2014.

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
Qiang Yang, Yang Liu, Tianjian Chen, and Yongxin Tong.

</span>
<span class="ltx_bibblock">Federated machine learning: Concept and applications.

</span>
<span class="ltx_bibblock"><span id="bib.bib35.1.1" class="ltx_text ltx_font_italic">ACM Transactions on Intelligent Systems and Technology (TIST)</span>,
10(2):1–19, 2019.

</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
Juan Benet.

</span>
<span class="ltx_bibblock">Ipfs-content addressed, versioned, p2p file system.

</span>
<span class="ltx_bibblock"><span id="bib.bib36.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1407.3561</span>, 2014.

</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
ConsenSys.

</span>
<span class="ltx_bibblock">Consensys/quorum: A permissioned implementation of ethereum
supporting data privacy.

</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
Gavin Wood et al.

</span>
<span class="ltx_bibblock">Ethereum: A secure decentralised generalised transaction ledger.

</span>
<span class="ltx_bibblock"><span id="bib.bib38.1.1" class="ltx_text ltx_font_italic">Ethereum project yellow paper</span>, 151(2014):1–32, 2014.

</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
Daniel J Beutel, Taner Topal, Akhil Mathur, Xinchi Qiu, Titouan Parcollet, and
Nicholas D Lane.

</span>
<span class="ltx_bibblock">Flower: A friendly federated learning research framework.

</span>
<span class="ltx_bibblock"><span id="bib.bib39.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2007.14390</span>, 2020.

</span>
</li>
<li id="bib.bib40" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
Ashkan Yousefpour, Igor Shilov, Alexandre Sablayrolles, Davide Testuggine,
Karthik Prasad, Mani Malek, John Nguyen, Sayan Ghosh, Akash Bharadwaj,
Jessica Zhao, Graham Cormode, and Ilya Mironov.

</span>
<span class="ltx_bibblock">Opacus: User-friendly differential privacy library in PyTorch.

</span>
<span class="ltx_bibblock"><span id="bib.bib40.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2109.12298</span>, 2021.

</span>
</li>
<li id="bib.bib41" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
Yann LeCun, Léon Bottou, Yoshua Bengio, and Patrick Haffner.

</span>
<span class="ltx_bibblock">Gradient-based learning applied to document recognition.

</span>
<span class="ltx_bibblock"><span id="bib.bib41.1.1" class="ltx_text ltx_font_italic">Proceedings of the IEEE</span>, 86(11):2278–2324, 1998.

</span>
</li>
<li id="bib.bib42" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[42]</span>
<span class="ltx_bibblock">
Alex Krizhevsky, Geoffrey Hinton, et al.

</span>
<span class="ltx_bibblock">Learning multiple layers of features from tiny images.

</span>
<span class="ltx_bibblock">2009.

</span>
</li>
<li id="bib.bib43" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">[43]</span>
<span class="ltx_bibblock">
Sebastian Caldas, Sai Meher Karthik Duddu, Peter Wu, Tian Li, Jakub
Konečnỳ, H Brendan McMahan, Virginia Smith, and Ameet Talwalkar.

</span>
<span class="ltx_bibblock">Leaf: A benchmark for federated settings.

</span>
<span class="ltx_bibblock"><span id="bib.bib43.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1812.01097</span>, 2018.

</span>
</li>
</ul>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2204.01200" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2204.01202" class="ar5iv-text-button ar5iv-severity-ok">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2204.01202">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2204.01202" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2204.01203" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Mon Mar 11 12:46:19 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
