<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models</title>
<!--Generated on Wed Oct  9 17:30:40 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2410.07176v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S1" title="In Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S2" title="In Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Imperfect Retrieval: The Pitfall of RAG</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3" title="In Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span><span class="ltx_text ltx_font_smallcaps">Astute RAG</span>: Overcoming the Pitfall</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS1" title="In 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Problem Formulation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS2" title="In 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Overview of the Framework</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS3" title="In 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Adaptive Generation of Internal Knowledge</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS4" title="In 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Iterative Source-aware Knowledge Consolidation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS5" title="In 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.5 </span>Answer Finalization</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4" title="In Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.SS1" title="In 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Experimental Settings</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.SS2" title="In 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Main Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.SS3" title="In 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Analyses</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S5" title="In Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Related Work</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S6" title="In Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#A1" title="In Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Prompt Template for <span class="ltx_text ltx_font_smallcaps">Astute RAG</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#A2" title="In Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Data Collection</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<div class="ltx_para" id="p1">
<span class="ltx_ERROR undefined" id="p1.1">\pdftrailerid</span>
<p class="ltx_p" id="p1.2">redacted














































































































































































































































































































































































































































 












<span class="ltx_ERROR undefined" id="p1.2.1">\correspondingauthor</span>fwang598@usc.edu, soarik@google.com







</p>
</div>
<h1 class="ltx_title ltx_title_document">
<span class="ltx_text ltx_font_smallcaps" id="id1.id1">Astute RAG</span>: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Fei Wang
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Xingchen Wan
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Google Cloud AI Research
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Ruoxi Sun
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Google Cloud AI Research
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Jiefeng Chen
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Google Cloud AI Research
</span></span></span>
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Sercan Ö. Arık
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">Google Cloud AI Research
</span></span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id2.id1">Retrieval-Augmented Generation (RAG), while effective in integrating external knowledge to address the limitations of large language models (LLMs), can be undermined by <span class="ltx_text ltx_font_italic" id="id2.id1.1">imperfect</span> retrieval, which may introduce irrelevant, misleading, or even malicious information. Despite its importance, previous studies have rarely explored the behavior of RAG through joint analysis on how errors from imperfect retrieval attribute and propagate, and how potential conflicts arise between the LLMs’ internal knowledge and external sources. We find that imperfect retrieval augmentation might be inevitable and quite harmful, through controlled analysis under realistic conditions. We identify the <span class="ltx_text ltx_font_italic" id="id2.id1.2">knowledge conflicts</span> between LLM-internal and external knowledge from retrieval as a bottleneck to overcome in the post-retrieval stage of RAG. To render LLMs resilient to imperfect retrieval, we propose <span class="ltx_text ltx_font_smallcaps" id="id2.id1.3">Astute RAG</span>, a novel RAG approach that <span class="ltx_text ltx_font_italic" id="id2.id1.4">adaptively</span> elicits essential information from LLMs’ internal knowledge, <span class="ltx_text ltx_font_italic" id="id2.id1.5">iteratively</span> consolidates internal and external knowledge with <span class="ltx_text ltx_font_italic" id="id2.id1.6">source-awareness</span>, and finalizes the answer according to information reliability. Our experiments using Gemini and Claude demonstrate that <span class="ltx_text ltx_font_smallcaps" id="id2.id1.7">Astute RAG</span> significantly outperforms previous robustness-enhanced RAG methods. Notably, <span class="ltx_text ltx_font_smallcaps" id="id2.id1.8">Astute RAG</span> is the only approach that matches or exceeds the performance of LLMs without RAG under worst-case scenarios. Further analysis reveals that <span class="ltx_text ltx_font_smallcaps" id="id2.id1.9">Astute RAG</span> effectively resolves knowledge conflicts, improving the reliability and trustworthiness of RAG systems.</p>
</div>
<section class="ltx_section" id="S1" lang="en">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Retrieval augmented generation (RAG) has become the standard approach for large language models (LLMs) to tackle knowledge-intensive tasks <cite class="ltx_cite ltx_citemacro_citep">(Guu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib11" title="">2020</a>; Lewis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib17" title="">2020</a>)</cite>.
Prior works mainly leverage RAG to address the inherent knowledge limitations of LLMs, effectively integrating missing information and grounding to reliable sources.
However, recent research has highlighted a significant drawback that RAG might rely on <span class="ltx_text ltx_font_italic" id="S1.p1.1.1">imperfect retrieval</span> results, including irrelevant, misleading, or even malicious information, which eventually leads to inaccurate LLM responses <cite class="ltx_cite ltx_citemacro_citep">(Chen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib5" title="">2024a</a>; Xiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib32" title="">2024</a>; Zou et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib46" title="">2024</a>)</cite>.
For example, when asked about the practice of eating rocks, LLMs might cite misleading information, such as a satirical news source claiming that one should consume at least one rock per day.<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://www.bbc.com/news/articles/cd11gzejgz4o" title="">https://www.bbc.com/news/articles/cd11gzejgz4o</a>.</span></span></span> The occurrence of imperfect retrieval augmentation is inevitable, driven by factors such as corpus quality limitations <cite class="ltx_cite ltx_citemacro_citep">(Shao et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib22" title="">2024</a>)</cite>, the reliability of retrievers <cite class="ltx_cite ltx_citemacro_citep">(Dai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib8" title="">2024</a>)</cite>, and the complexity of the queries <cite class="ltx_cite ltx_citemacro_citep">(Su et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib23" title="">2024</a>)</cite>.
This poses a significant challenge to the trustworthiness of RAG.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">While there have been independent analyses of information retrieval and RAG in the context of LLMs <cite class="ltx_cite ltx_citemacro_citep">(Su et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib23" title="">2024</a>; Mallen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib20" title="">2023</a>)</cite>, previous studies have rarely connected the behaviors of retrieval and subsequent generation,
particularly regarding the propagation of information retrieval errors, which may lead to <span class="ltx_text ltx_font_italic" id="S1.p2.1.1">knowledge conflicts</span> <cite class="ltx_cite ltx_citemacro_citep">(Longpre et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib18" title="">2021</a>; Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib27" title="">2023a</a>; Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib36" title="">2024b</a>)</cite> between LLMs and context. To this end, we conduct comprehensive analyses on the occurrence of imperfect retrieval augmentation and its impact on LLM behavior under realistic conditions (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S2" title="2 Imperfect Retrieval: The Pitfall of RAG ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">2</span></a>). We conduct controlled experiments on a diverse range of general, domain-specific, and long-tail questions from NQ <cite class="ltx_cite ltx_citemacro_citep">(Kwiatkowski et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib16" title="">2019</a>)</cite>, TriviaQA <cite class="ltx_cite ltx_citemacro_citep">(Joshi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib15" title="">2017</a>)</cite>, BioASQ <cite class="ltx_cite ltx_citemacro_citep">(Tsatsaronis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib26" title="">2015</a>)</cite>, and PopQA <cite class="ltx_cite ltx_citemacro_citep">(Mallen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib20" title="">2023</a>)</cite>.
We observe that imperfect retrieval augmentation is widespread even with adept real-world search engine (such as Google Search with Web as corpus) – roughly 70% retrieved passages do not directly contain true answers, leading to the impeded performance of LLM with RAG augmentation.<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>Note that some passages may contain information indirectly relevant to the answer, but may unintentionally mislead or distract LLMs.</span></span></span></p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">These findings underscore the potential severity of the imperfect retrieval issue in real-world RAG and highlight the widespread existence of knowledge conflicts as the bottleneck to overcome it (Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">1</span></a>). Recent studies demonstrate that LLM-internal and external knowledge offer distinct advantages, but LLMs often struggle to consolidate conflicting information reliably, failing to respond based on collective knowledge <cite class="ltx_cite ltx_citemacro_citep">(Mallen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib20" title="">2023</a>; Tan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib24" title="">2024</a>; Xie et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib33" title="">2024</a>; Jin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib14" title="">2024</a>)</cite>. This raises the following research question: <span class="ltx_text ltx_font_italic" id="S1.p3.1.1">Is there an effective method to combine internal (from LLMs’ pretrained weights) and external (from specific corpora or knowledge bases) knowledge for more reliable RAG?</span> Previous work has widely explored using external knowledge to enhance LLMs through RAG. We seek to further leverage LLMs’ internal knowledge to recover from RAG failures</p>
</div>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="197" id="S1.F1.g1" src="extracted/5914248/figure/problem_3.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Knowledge conflicts between the LLMs’ internal knowledge and retrieved knowledge from external sources. We report the overall results with Claude under the setting in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.SS1" title="4.1 Experimental Settings ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4.1</span></a>.</figcaption>
</figure>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">Motivated by these important real-world challenges, we propose <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.1">Astute RAG</span> (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3" title="3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3</span></a>), a novel RAG approach designed to be resilient to imperfect retrieval augmentation, while preserving RAG grounding effect when RAG is reliable. To this end, <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.2">Astute RAG</span> needs effectively differentiate the reliability of the LLM’s intrinsic knowledge and the external information retrieved in RAG, utilizing each only when trustworthy and ensuring proper integration. Specifically, <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.3">Astute RAG</span> initially elicits information from LLMs’ internal knowledge to explicitly complement the passages retrieved from external sources. Then, <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.4">Astute RAG</span> conducts source-aware knowledge consolidation of information from various internal and external sources. The desiderata is combining consistent information, identifying conflicting information, and filtering out irrelevant information. Finally, <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.5">Astute RAG</span> proposes answers based on each group of consistent passages and compares the answers from different passage groups to determine the final answer. Our experiments involving Gemini and Claude<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://www.anthropic.com/claude" title="">https://www.anthropic.com/claude</a></span></span></span> on various datasets (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4" title="4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4</span></a>) demonstrate the superior performance of <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.6">Astute RAG</span> compared to previous RAG approaches designed to be robust against retrieval corruptions. Moreover, <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.7">Astute RAG</span> consistently outperforms baselines across different retrieval quality levels. Notably, <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.8">Astute RAG</span> is the only RAG method that achieves performance comparable to or even surpassing conventional use of LLMs under the worst-case scenario where all retrieved passages are unhelpful. Further analysis reveals the effectiveness of <span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.9">Astute RAG</span> in resolving knowledge conflicts between internal and external knowledge.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">To conclude, our core contributions are threefold. First, we analyze RAG under realistic conditions, identifying imperfect retrieval augmentation as a significant contributor to RAG failures and pinpointing knowledge conflicts as the primary bottleneck in overcoming it. Second,
we propose <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.1">Astute RAG</span>, which explicitly addresses conflicts between LLM-internal and external knowledge, thereby recovering from RAG failures.
Third, experiments with various LLMs and datasets demonstrate the effectiveness of <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.2">Astute RAG</span>, even in the most challenging scenarios.</p>
</div>
</section>
<section class="ltx_section" id="S2" lang="en">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Imperfect Retrieval: The Pitfall of RAG</h2>
<figure class="ltx_figure" id="S2.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="154" id="S2.F2.g1" src="extracted/5914248/figure/retrieval.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Imperfect retrieval (samples with low retrieval precision) is prevalent in real-world RAG.</figcaption>
</figure>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">To better showcase the common real-world challenges and to make better motivate for improved methodological designs,
we evaluate retrieval quality, end-to-end RAG performance, and knowledge conflicts on a controlled set of data. The selected data encompass a diverse range of general, domain-specific, and long-tail questions from NQ <cite class="ltx_cite ltx_citemacro_citep">(Kwiatkowski et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib16" title="">2019</a>)</cite>, TriviaQA <cite class="ltx_cite ltx_citemacro_citep">(Joshi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib15" title="">2017</a>)</cite>, BioASQ <cite class="ltx_cite ltx_citemacro_citep">(Tsatsaronis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib26" title="">2015</a>)</cite>, and PopQA <cite class="ltx_cite ltx_citemacro_citep">(Mallen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib20" title="">2023</a>)</cite>. Our analysis is based on <span class="ltx_text ltx_font_italic" id="S2.p1.1.1">realistic</span> retrieval results with Google Search<span class="ltx_note ltx_role_footnote" id="footnote4"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://developers.google.com/custom-search/v1/overview" title="">https://developers.google.com/custom-search/v1/overview</a></span></span></span> as the retriever and the Web as the corpus. This setting allows us to analyze the severity of imperfect retrieval in real-world RAG. Overall, we sample 1K short-form QA instances from these datasets, and pair each instance with 10 retrieved passages.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p2">
<p class="ltx_p" id="S2.p2.2"><span class="ltx_text ltx_font_bold" id="S2.p2.2.1">Imperfect retrieval is common.</span>
We examine the occurrence of correct answers in retrieved passages as an approximation of retrieval quality. Since we mainly focus on short-form QA which provides most variants of the correct answer for each question, the approximation through string matching can give us a rouge intuition of how precise the retrieval result is. Specifically, we define the retrieval precision as the ratio of passages containing the correct answer for each instance:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.Ex1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\text{Retrieval Precision}=\frac{\text{\{number of retrieved passages %
containing correct answer\}}}{\text{\{number of total retrieved passages\}}}" class="ltx_Math" display="block" id="S2.Ex1.m1.1"><semantics id="S2.Ex1.m1.1a"><mrow id="S2.Ex1.m1.1.1" xref="S2.Ex1.m1.1.1.cmml"><mtext id="S2.Ex1.m1.1.1.2" xref="S2.Ex1.m1.1.1.2a.cmml">Retrieval Precision</mtext><mo id="S2.Ex1.m1.1.1.1" xref="S2.Ex1.m1.1.1.1.cmml">=</mo><mfrac id="S2.Ex1.m1.1.1.3" xref="S2.Ex1.m1.1.1.3.cmml"><mtext id="S2.Ex1.m1.1.1.3.2" xref="S2.Ex1.m1.1.1.3.2a.cmml">{number of retrieved passages containing correct answer}</mtext><mtext id="S2.Ex1.m1.1.1.3.3" xref="S2.Ex1.m1.1.1.3.3a.cmml">{number of total retrieved passages}</mtext></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex1.m1.1b"><apply id="S2.Ex1.m1.1.1.cmml" xref="S2.Ex1.m1.1.1"><eq id="S2.Ex1.m1.1.1.1.cmml" xref="S2.Ex1.m1.1.1.1"></eq><ci id="S2.Ex1.m1.1.1.2a.cmml" xref="S2.Ex1.m1.1.1.2"><mtext id="S2.Ex1.m1.1.1.2.cmml" xref="S2.Ex1.m1.1.1.2">Retrieval Precision</mtext></ci><apply id="S2.Ex1.m1.1.1.3.cmml" xref="S2.Ex1.m1.1.1.3"><divide id="S2.Ex1.m1.1.1.3.1.cmml" xref="S2.Ex1.m1.1.1.3"></divide><ci id="S2.Ex1.m1.1.1.3.2a.cmml" xref="S2.Ex1.m1.1.1.3.2"><mtext id="S2.Ex1.m1.1.1.3.2.cmml" xref="S2.Ex1.m1.1.1.3.2">{number of retrieved passages containing correct answer}</mtext></ci><ci id="S2.Ex1.m1.1.1.3.3a.cmml" xref="S2.Ex1.m1.1.1.3.3"><mtext id="S2.Ex1.m1.1.1.3.3.cmml" xref="S2.Ex1.m1.1.1.3.3">{number of total retrieved passages}</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex1.m1.1c">\text{Retrieval Precision}=\frac{\text{\{number of retrieved passages %
containing correct answer\}}}{\text{\{number of total retrieved passages\}}}</annotation><annotation encoding="application/x-llamapun" id="S2.Ex1.m1.1d">Retrieval Precision = divide start_ARG {number of retrieved passages containing correct answer} end_ARG start_ARG {number of total retrieved passages} end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.p2.1">As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S2.F2" title="Figure 2 ‣ 2 Imperfect Retrieval: The Pitfall of RAG ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">2</span></a>, although instances from different datasets exhibit different data distributions, imperfect retrieval is prevalent. Specifically, <math alttext="\sim" class="ltx_Math" display="inline" id="S2.p2.1.m1.1"><semantics id="S2.p2.1.m1.1a"><mo id="S2.p2.1.m1.1.1" xref="S2.p2.1.m1.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S2.p2.1.m1.1b"><csymbol cd="latexml" id="S2.p2.1.m1.1.1.cmml" xref="S2.p2.1.m1.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.1.m1.1c">\sim</annotation><annotation encoding="application/x-llamapun" id="S2.p2.1.m1.1d">∼</annotation></semantics></math>20% of the overall data have no mentions of the correct answer within any retrieved passage, including 34% on NQ, 18% on TriviaQA, 24% on BioASQ, and 50% on PopQA.
This finding also aligns with previous observation on information retrieval <cite class="ltx_cite ltx_citemacro_citep">(Thakur et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib25" title="">2024</a>)</cite>, that highlights that the number of positive passages can be very limited.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p3">
<p class="ltx_p" id="S2.p3.1"><span class="ltx_text ltx_font_bold" id="S2.p3.1.1">Imperfect retrieval leads to RAG failures.</span>
We further analyze the relation between retrieval quality and RAG performance. We compare the performance of Claude 3.5 Sonnet, with and without RAG and report the results by retrieval precision in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.F4" title="Figure 4 ‣ 4.3 Analyses ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4</span></a>.
In general, RAG is helpful when the retrieval precision is not lower than 20%. When the retrieval precision is close to 0, the model with RAG performs much worse than without RAG, indicating that imperfect retrieval augmentation can be the cause of RAG failures.
This finding aligns with the previous observation from <cite class="ltx_cite ltx_citemacro_citet">Yu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib42" title="">2024</a>)</cite> that adding more retrieved passages does not necessarily lead to better performance, as the additional passages might reduce the retrieval precision.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p4">
<p class="ltx_p" id="S2.p4.1"><span class="ltx_text ltx_font_bold" id="S2.p4.1.1">Knowledge conflicts widely exist in RAG failures.</span>
We provide an in-depth analyses of knowledge conflicts between LLMs’ internal knowledge and retrieved passages from external sources. With Claude 3.5 Sonnet as the LLM, Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">1</span></a> shows that 19.2% of the overall data exhibit knowledge conflicts, where either the answer with or without RAG is correct. Among the conflicting cases, the internal knowledge is correct on 47.4% of them, while the external knowledge is correct on the remaining 52.6%. These results emphasize the importance of <span class="ltx_text ltx_font_italic" id="S2.p4.1.2">effectively combining the internal and external knowledge to overcome the inherent limitation of relying solely on either source</span>. However, previous work <cite class="ltx_cite ltx_citemacro_citep">(Tan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib24" title="">2024</a>; Xie et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib33" title="">2024</a>; Jin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib14" title="">2024</a>)</cite> show that LLMs might respond based on misleading information rather than comprehensive understanding of the conflicting knowledge in this context.</p>
</div>
</section>
<section class="ltx_section" id="S3" lang="en">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span><span class="ltx_text ltx_font_smallcaps" id="S3.1.1">Astute RAG</span>: Overcoming the Pitfall</h2>
<figure class="ltx_figure" id="S3.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="267" id="S3.F3.g1" src="extracted/5914248/figure/method_2.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Overview of the proposed <span class="ltx_text ltx_font_smallcaps" id="S3.F3.3.1">Astute RAG</span> framework. <span class="ltx_text ltx_font_smallcaps" id="S3.F3.4.2">Astute RAG</span> is designed to better combine the information from the external sources (e.g. web, domain-specific corpora, knowledge bases) and internal knowledge of the LLMs by employing a consolidation mechanism to address the information conflicts, which eventually leads to better quality generated outputs.</figcaption>
</figure>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">We begin with formulating the problem of imperfect retrieval in RAG (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS1" title="3.1 Problem Formulation ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3.1</span></a>). We then provide an overview of <span class="ltx_text ltx_font_smallcaps" id="S3.p1.1.1">Astute RAG</span>, designed to overcome this problem (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS2" title="3.2 Overview of the Framework ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3.2</span></a>). Subsequently, we delve into the three major steps of <span class="ltx_text ltx_font_smallcaps" id="S3.p1.1.2">Astute RAG</span>, including adaptive generation of internal knowledge (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS3" title="3.3 Adaptive Generation of Internal Knowledge ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3.3</span></a>), source-aware knowledge consolidation (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS4" title="3.4 Iterative Source-aware Knowledge Consolidation ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3.4</span></a>), and answer finalization (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS5" title="3.5 Answer Finalization ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3.5</span></a>).</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Problem Formulation</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">Our objective is to mitigate the effects of imperfect retrieval augmentation, resolve knowledge conflicts between the LLM’s internal knowledge and external sources (such as custom/public corpora and knowledge bases), and ultimately produce more accurate and reliable responses from LLMs.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.4">Given a set of retrieved passages from external sources <math alttext="E=[e_{1},\ldots,e_{n}]" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.3"><semantics id="S3.SS1.p2.1.m1.3a"><mrow id="S3.SS1.p2.1.m1.3.3" xref="S3.SS1.p2.1.m1.3.3.cmml"><mi id="S3.SS1.p2.1.m1.3.3.4" xref="S3.SS1.p2.1.m1.3.3.4.cmml">E</mi><mo id="S3.SS1.p2.1.m1.3.3.3" xref="S3.SS1.p2.1.m1.3.3.3.cmml">=</mo><mrow id="S3.SS1.p2.1.m1.3.3.2.2" xref="S3.SS1.p2.1.m1.3.3.2.3.cmml"><mo id="S3.SS1.p2.1.m1.3.3.2.2.3" stretchy="false" xref="S3.SS1.p2.1.m1.3.3.2.3.cmml">[</mo><msub id="S3.SS1.p2.1.m1.2.2.1.1.1" xref="S3.SS1.p2.1.m1.2.2.1.1.1.cmml"><mi id="S3.SS1.p2.1.m1.2.2.1.1.1.2" xref="S3.SS1.p2.1.m1.2.2.1.1.1.2.cmml">e</mi><mn id="S3.SS1.p2.1.m1.2.2.1.1.1.3" xref="S3.SS1.p2.1.m1.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p2.1.m1.3.3.2.2.4" xref="S3.SS1.p2.1.m1.3.3.2.3.cmml">,</mo><mi id="S3.SS1.p2.1.m1.1.1" mathvariant="normal" xref="S3.SS1.p2.1.m1.1.1.cmml">…</mi><mo id="S3.SS1.p2.1.m1.3.3.2.2.5" xref="S3.SS1.p2.1.m1.3.3.2.3.cmml">,</mo><msub id="S3.SS1.p2.1.m1.3.3.2.2.2" xref="S3.SS1.p2.1.m1.3.3.2.2.2.cmml"><mi id="S3.SS1.p2.1.m1.3.3.2.2.2.2" xref="S3.SS1.p2.1.m1.3.3.2.2.2.2.cmml">e</mi><mi id="S3.SS1.p2.1.m1.3.3.2.2.2.3" xref="S3.SS1.p2.1.m1.3.3.2.2.2.3.cmml">n</mi></msub><mo id="S3.SS1.p2.1.m1.3.3.2.2.6" stretchy="false" xref="S3.SS1.p2.1.m1.3.3.2.3.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.3b"><apply id="S3.SS1.p2.1.m1.3.3.cmml" xref="S3.SS1.p2.1.m1.3.3"><eq id="S3.SS1.p2.1.m1.3.3.3.cmml" xref="S3.SS1.p2.1.m1.3.3.3"></eq><ci id="S3.SS1.p2.1.m1.3.3.4.cmml" xref="S3.SS1.p2.1.m1.3.3.4">𝐸</ci><list id="S3.SS1.p2.1.m1.3.3.2.3.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2"><apply id="S3.SS1.p2.1.m1.2.2.1.1.1.cmml" xref="S3.SS1.p2.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.2.2.1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p2.1.m1.2.2.1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.2.2.1.1.1.2">𝑒</ci><cn id="S3.SS1.p2.1.m1.2.2.1.1.1.3.cmml" type="integer" xref="S3.SS1.p2.1.m1.2.2.1.1.1.3">1</cn></apply><ci id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">…</ci><apply id="S3.SS1.p2.1.m1.3.3.2.2.2.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.3.3.2.2.2.1.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p2.1.m1.3.3.2.2.2.2.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2.2.2">𝑒</ci><ci id="S3.SS1.p2.1.m1.3.3.2.2.2.3.cmml" xref="S3.SS1.p2.1.m1.3.3.2.2.2.3">𝑛</ci></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.3c">E=[e_{1},\ldots,e_{n}]</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.3d">italic_E = [ italic_e start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_e start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT ]</annotation></semantics></math>, a pre-trained LLM <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.1"><semantics id="S3.SS1.p2.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.2.m2.1.1" xref="S3.SS1.p2.2.m2.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.1b"><ci id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.1d">caligraphic_M</annotation></semantics></math> (accessible through prediction-only APIs, encompassing commercial black-box ones), and a query <math alttext="q" class="ltx_Math" display="inline" id="S3.SS1.p2.3.m3.1"><semantics id="S3.SS1.p2.3.m3.1a"><mi id="S3.SS1.p2.3.m3.1.1" xref="S3.SS1.p2.3.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m3.1b"><ci id="S3.SS1.p2.3.m3.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.3.m3.1d">italic_q</annotation></semantics></math>, the task is to generate the corresponding correct answer <math alttext="a^{*}" class="ltx_Math" display="inline" id="S3.SS1.p2.4.m4.1"><semantics id="S3.SS1.p2.4.m4.1a"><msup id="S3.SS1.p2.4.m4.1.1" xref="S3.SS1.p2.4.m4.1.1.cmml"><mi id="S3.SS1.p2.4.m4.1.1.2" xref="S3.SS1.p2.4.m4.1.1.2.cmml">a</mi><mo id="S3.SS1.p2.4.m4.1.1.3" xref="S3.SS1.p2.4.m4.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.4.m4.1b"><apply id="S3.SS1.p2.4.m4.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.1.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1">superscript</csymbol><ci id="S3.SS1.p2.4.m4.1.1.2.cmml" xref="S3.SS1.p2.4.m4.1.1.2">𝑎</ci><times id="S3.SS1.p2.4.m4.1.1.3.cmml" xref="S3.SS1.p2.4.m4.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.4.m4.1c">a^{*}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.4.m4.1d">italic_a start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>.
Notably, this setting is orthogonal to prior work on improving the retriever, training LLMs, or conducting adaptive retrieval, which are mainly preliminary steps.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Overview of the Framework</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1"><span class="ltx_text ltx_font_smallcaps" id="S3.SS2.p1.1.1">Astute RAG</span> is designed to better leverage collective knowledge from both internal knowledge of LLMs and external corpus, for more reliable responses. As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.F3" title="Figure 3 ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3</span></a> and Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#alg1" title="Algorithm 1 ‣ 3.2 Overview of the Framework ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">1</span></a>, <span class="ltx_text ltx_font_smallcaps" id="S3.SS2.p1.1.2">Astute RAG</span> starts from acquiring the most accurate, relevant, and thorough passage set from the LLMs’ internal knowledge. Then, internal and external knowledge are consolidated in an iterative way, by comparing the generated and retrieved passages. Finally, the reliability of conflicting information is compared and the final output is generated according to the most reliable knowledge.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.3.1.1">Algorithm 1</span> </span> <span class="ltx_text ltx_font_smallcaps" id="alg1.4.2">Astute RAG</span> </figcaption>
<div class="ltx_listing ltx_listing" id="alg1.5">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l1.1.1.1" style="font-size:80%;">1:</span></span>Query <math alttext="q" class="ltx_Math" display="inline" id="alg1.l1.m1.1"><semantics id="alg1.l1.m1.1a"><mi id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b"><ci id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.1d">italic_q</annotation></semantics></math>, Retrieved Passages <math alttext="E=[e_{1},\ldots,e_{n}]" class="ltx_Math" display="inline" id="alg1.l1.m2.3"><semantics id="alg1.l1.m2.3a"><mrow id="alg1.l1.m2.3.3" xref="alg1.l1.m2.3.3.cmml"><mi id="alg1.l1.m2.3.3.4" xref="alg1.l1.m2.3.3.4.cmml">E</mi><mo id="alg1.l1.m2.3.3.3" xref="alg1.l1.m2.3.3.3.cmml">=</mo><mrow id="alg1.l1.m2.3.3.2.2" xref="alg1.l1.m2.3.3.2.3.cmml"><mo id="alg1.l1.m2.3.3.2.2.3" stretchy="false" xref="alg1.l1.m2.3.3.2.3.cmml">[</mo><msub id="alg1.l1.m2.2.2.1.1.1" xref="alg1.l1.m2.2.2.1.1.1.cmml"><mi id="alg1.l1.m2.2.2.1.1.1.2" xref="alg1.l1.m2.2.2.1.1.1.2.cmml">e</mi><mn id="alg1.l1.m2.2.2.1.1.1.3" xref="alg1.l1.m2.2.2.1.1.1.3.cmml">1</mn></msub><mo id="alg1.l1.m2.3.3.2.2.4" xref="alg1.l1.m2.3.3.2.3.cmml">,</mo><mi id="alg1.l1.m2.1.1" mathvariant="normal" xref="alg1.l1.m2.1.1.cmml">…</mi><mo id="alg1.l1.m2.3.3.2.2.5" xref="alg1.l1.m2.3.3.2.3.cmml">,</mo><msub id="alg1.l1.m2.3.3.2.2.2" xref="alg1.l1.m2.3.3.2.2.2.cmml"><mi id="alg1.l1.m2.3.3.2.2.2.2" xref="alg1.l1.m2.3.3.2.2.2.2.cmml">e</mi><mi id="alg1.l1.m2.3.3.2.2.2.3" xref="alg1.l1.m2.3.3.2.2.2.3.cmml">n</mi></msub><mo id="alg1.l1.m2.3.3.2.2.6" stretchy="false" xref="alg1.l1.m2.3.3.2.3.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m2.3b"><apply id="alg1.l1.m2.3.3.cmml" xref="alg1.l1.m2.3.3"><eq id="alg1.l1.m2.3.3.3.cmml" xref="alg1.l1.m2.3.3.3"></eq><ci id="alg1.l1.m2.3.3.4.cmml" xref="alg1.l1.m2.3.3.4">𝐸</ci><list id="alg1.l1.m2.3.3.2.3.cmml" xref="alg1.l1.m2.3.3.2.2"><apply id="alg1.l1.m2.2.2.1.1.1.cmml" xref="alg1.l1.m2.2.2.1.1.1"><csymbol cd="ambiguous" id="alg1.l1.m2.2.2.1.1.1.1.cmml" xref="alg1.l1.m2.2.2.1.1.1">subscript</csymbol><ci id="alg1.l1.m2.2.2.1.1.1.2.cmml" xref="alg1.l1.m2.2.2.1.1.1.2">𝑒</ci><cn id="alg1.l1.m2.2.2.1.1.1.3.cmml" type="integer" xref="alg1.l1.m2.2.2.1.1.1.3">1</cn></apply><ci id="alg1.l1.m2.1.1.cmml" xref="alg1.l1.m2.1.1">…</ci><apply id="alg1.l1.m2.3.3.2.2.2.cmml" xref="alg1.l1.m2.3.3.2.2.2"><csymbol cd="ambiguous" id="alg1.l1.m2.3.3.2.2.2.1.cmml" xref="alg1.l1.m2.3.3.2.2.2">subscript</csymbol><ci id="alg1.l1.m2.3.3.2.2.2.2.cmml" xref="alg1.l1.m2.3.3.2.2.2.2">𝑒</ci><ci id="alg1.l1.m2.3.3.2.2.2.3.cmml" xref="alg1.l1.m2.3.3.2.2.2.3">𝑛</ci></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m2.3c">E=[e_{1},\ldots,e_{n}]</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m2.3d">italic_E = [ italic_e start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … , italic_e start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT ]</annotation></semantics></math>, Large Language Model <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="alg1.l1.m3.1"><semantics id="alg1.l1.m3.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.l1.m3.1.1" xref="alg1.l1.m3.1.1.cmml">ℳ</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m3.1b"><ci id="alg1.l1.m3.1.1.cmml" xref="alg1.l1.m3.1.1">ℳ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m3.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m3.1d">caligraphic_M</annotation></semantics></math>, Number of Iteration <math alttext="t" class="ltx_Math" display="inline" id="alg1.l1.m4.1"><semantics id="alg1.l1.m4.1a"><mi id="alg1.l1.m4.1.1" xref="alg1.l1.m4.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m4.1b"><ci id="alg1.l1.m4.1.1.cmml" xref="alg1.l1.m4.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m4.1c">t</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m4.1d">italic_t</annotation></semantics></math>, Max Number of Generated Passages <math alttext="\hat{m}" class="ltx_Math" display="inline" id="alg1.l1.m5.1"><semantics id="alg1.l1.m5.1a"><mover accent="true" id="alg1.l1.m5.1.1" xref="alg1.l1.m5.1.1.cmml"><mi id="alg1.l1.m5.1.1.2" xref="alg1.l1.m5.1.1.2.cmml">m</mi><mo id="alg1.l1.m5.1.1.1" xref="alg1.l1.m5.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="alg1.l1.m5.1b"><apply id="alg1.l1.m5.1.1.cmml" xref="alg1.l1.m5.1.1"><ci id="alg1.l1.m5.1.1.1.cmml" xref="alg1.l1.m5.1.1.1">^</ci><ci id="alg1.l1.m5.1.1.2.cmml" xref="alg1.l1.m5.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m5.1c">\hat{m}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m5.1d">over^ start_ARG italic_m end_ARG</annotation></semantics></math>, Prompt Templates <math alttext="p_{gen},p_{con},p_{ans}" class="ltx_Math" display="inline" id="alg1.l1.m6.3"><semantics id="alg1.l1.m6.3a"><mrow id="alg1.l1.m6.3.3.3" xref="alg1.l1.m6.3.3.4.cmml"><msub id="alg1.l1.m6.1.1.1.1" xref="alg1.l1.m6.1.1.1.1.cmml"><mi id="alg1.l1.m6.1.1.1.1.2" xref="alg1.l1.m6.1.1.1.1.2.cmml">p</mi><mrow id="alg1.l1.m6.1.1.1.1.3" xref="alg1.l1.m6.1.1.1.1.3.cmml"><mi id="alg1.l1.m6.1.1.1.1.3.2" xref="alg1.l1.m6.1.1.1.1.3.2.cmml">g</mi><mo id="alg1.l1.m6.1.1.1.1.3.1" xref="alg1.l1.m6.1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l1.m6.1.1.1.1.3.3" xref="alg1.l1.m6.1.1.1.1.3.3.cmml">e</mi><mo id="alg1.l1.m6.1.1.1.1.3.1a" xref="alg1.l1.m6.1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l1.m6.1.1.1.1.3.4" xref="alg1.l1.m6.1.1.1.1.3.4.cmml">n</mi></mrow></msub><mo id="alg1.l1.m6.3.3.3.4" xref="alg1.l1.m6.3.3.4.cmml">,</mo><msub id="alg1.l1.m6.2.2.2.2" xref="alg1.l1.m6.2.2.2.2.cmml"><mi id="alg1.l1.m6.2.2.2.2.2" xref="alg1.l1.m6.2.2.2.2.2.cmml">p</mi><mrow id="alg1.l1.m6.2.2.2.2.3" xref="alg1.l1.m6.2.2.2.2.3.cmml"><mi id="alg1.l1.m6.2.2.2.2.3.2" xref="alg1.l1.m6.2.2.2.2.3.2.cmml">c</mi><mo id="alg1.l1.m6.2.2.2.2.3.1" xref="alg1.l1.m6.2.2.2.2.3.1.cmml">⁢</mo><mi id="alg1.l1.m6.2.2.2.2.3.3" xref="alg1.l1.m6.2.2.2.2.3.3.cmml">o</mi><mo id="alg1.l1.m6.2.2.2.2.3.1a" xref="alg1.l1.m6.2.2.2.2.3.1.cmml">⁢</mo><mi id="alg1.l1.m6.2.2.2.2.3.4" xref="alg1.l1.m6.2.2.2.2.3.4.cmml">n</mi></mrow></msub><mo id="alg1.l1.m6.3.3.3.5" xref="alg1.l1.m6.3.3.4.cmml">,</mo><msub id="alg1.l1.m6.3.3.3.3" xref="alg1.l1.m6.3.3.3.3.cmml"><mi id="alg1.l1.m6.3.3.3.3.2" xref="alg1.l1.m6.3.3.3.3.2.cmml">p</mi><mrow id="alg1.l1.m6.3.3.3.3.3" xref="alg1.l1.m6.3.3.3.3.3.cmml"><mi id="alg1.l1.m6.3.3.3.3.3.2" xref="alg1.l1.m6.3.3.3.3.3.2.cmml">a</mi><mo id="alg1.l1.m6.3.3.3.3.3.1" xref="alg1.l1.m6.3.3.3.3.3.1.cmml">⁢</mo><mi id="alg1.l1.m6.3.3.3.3.3.3" xref="alg1.l1.m6.3.3.3.3.3.3.cmml">n</mi><mo id="alg1.l1.m6.3.3.3.3.3.1a" xref="alg1.l1.m6.3.3.3.3.3.1.cmml">⁢</mo><mi id="alg1.l1.m6.3.3.3.3.3.4" xref="alg1.l1.m6.3.3.3.3.3.4.cmml">s</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m6.3b"><list id="alg1.l1.m6.3.3.4.cmml" xref="alg1.l1.m6.3.3.3"><apply id="alg1.l1.m6.1.1.1.1.cmml" xref="alg1.l1.m6.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l1.m6.1.1.1.1.1.cmml" xref="alg1.l1.m6.1.1.1.1">subscript</csymbol><ci id="alg1.l1.m6.1.1.1.1.2.cmml" xref="alg1.l1.m6.1.1.1.1.2">𝑝</ci><apply id="alg1.l1.m6.1.1.1.1.3.cmml" xref="alg1.l1.m6.1.1.1.1.3"><times id="alg1.l1.m6.1.1.1.1.3.1.cmml" xref="alg1.l1.m6.1.1.1.1.3.1"></times><ci id="alg1.l1.m6.1.1.1.1.3.2.cmml" xref="alg1.l1.m6.1.1.1.1.3.2">𝑔</ci><ci id="alg1.l1.m6.1.1.1.1.3.3.cmml" xref="alg1.l1.m6.1.1.1.1.3.3">𝑒</ci><ci id="alg1.l1.m6.1.1.1.1.3.4.cmml" xref="alg1.l1.m6.1.1.1.1.3.4">𝑛</ci></apply></apply><apply id="alg1.l1.m6.2.2.2.2.cmml" xref="alg1.l1.m6.2.2.2.2"><csymbol cd="ambiguous" id="alg1.l1.m6.2.2.2.2.1.cmml" xref="alg1.l1.m6.2.2.2.2">subscript</csymbol><ci id="alg1.l1.m6.2.2.2.2.2.cmml" xref="alg1.l1.m6.2.2.2.2.2">𝑝</ci><apply id="alg1.l1.m6.2.2.2.2.3.cmml" xref="alg1.l1.m6.2.2.2.2.3"><times id="alg1.l1.m6.2.2.2.2.3.1.cmml" xref="alg1.l1.m6.2.2.2.2.3.1"></times><ci id="alg1.l1.m6.2.2.2.2.3.2.cmml" xref="alg1.l1.m6.2.2.2.2.3.2">𝑐</ci><ci id="alg1.l1.m6.2.2.2.2.3.3.cmml" xref="alg1.l1.m6.2.2.2.2.3.3">𝑜</ci><ci id="alg1.l1.m6.2.2.2.2.3.4.cmml" xref="alg1.l1.m6.2.2.2.2.3.4">𝑛</ci></apply></apply><apply id="alg1.l1.m6.3.3.3.3.cmml" xref="alg1.l1.m6.3.3.3.3"><csymbol cd="ambiguous" id="alg1.l1.m6.3.3.3.3.1.cmml" xref="alg1.l1.m6.3.3.3.3">subscript</csymbol><ci id="alg1.l1.m6.3.3.3.3.2.cmml" xref="alg1.l1.m6.3.3.3.3.2">𝑝</ci><apply id="alg1.l1.m6.3.3.3.3.3.cmml" xref="alg1.l1.m6.3.3.3.3.3"><times id="alg1.l1.m6.3.3.3.3.3.1.cmml" xref="alg1.l1.m6.3.3.3.3.3.1"></times><ci id="alg1.l1.m6.3.3.3.3.3.2.cmml" xref="alg1.l1.m6.3.3.3.3.3.2">𝑎</ci><ci id="alg1.l1.m6.3.3.3.3.3.3.cmml" xref="alg1.l1.m6.3.3.3.3.3.3">𝑛</ci><ci id="alg1.l1.m6.3.3.3.3.3.4.cmml" xref="alg1.l1.m6.3.3.3.3.3.4">𝑠</ci></apply></apply></list></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m6.3c">p_{gen},p_{con},p_{ans}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m6.3d">italic_p start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT , italic_p start_POSTSUBSCRIPT italic_c italic_o italic_n end_POSTSUBSCRIPT , italic_p start_POSTSUBSCRIPT italic_a italic_n italic_s end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l2.2.1.1" style="font-size:80%;">2:</span></span>Adaptively generate passages: <math alttext="I\leftarrow\mathcal{M}(p_{gen},q,\hat{m})" class="ltx_Math" display="inline" id="alg1.l2.m1.3"><semantics id="alg1.l2.m1.3a"><mrow id="alg1.l2.m1.3.3" xref="alg1.l2.m1.3.3.cmml"><mi id="alg1.l2.m1.3.3.3" xref="alg1.l2.m1.3.3.3.cmml">I</mi><mo id="alg1.l2.m1.3.3.2" stretchy="false" xref="alg1.l2.m1.3.3.2.cmml">←</mo><mrow id="alg1.l2.m1.3.3.1" xref="alg1.l2.m1.3.3.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l2.m1.3.3.1.3" xref="alg1.l2.m1.3.3.1.3.cmml">ℳ</mi><mo id="alg1.l2.m1.3.3.1.2" xref="alg1.l2.m1.3.3.1.2.cmml">⁢</mo><mrow id="alg1.l2.m1.3.3.1.1.1" xref="alg1.l2.m1.3.3.1.1.2.cmml"><mo id="alg1.l2.m1.3.3.1.1.1.2" stretchy="false" xref="alg1.l2.m1.3.3.1.1.2.cmml">(</mo><msub id="alg1.l2.m1.3.3.1.1.1.1" xref="alg1.l2.m1.3.3.1.1.1.1.cmml"><mi id="alg1.l2.m1.3.3.1.1.1.1.2" xref="alg1.l2.m1.3.3.1.1.1.1.2.cmml">p</mi><mrow id="alg1.l2.m1.3.3.1.1.1.1.3" xref="alg1.l2.m1.3.3.1.1.1.1.3.cmml"><mi id="alg1.l2.m1.3.3.1.1.1.1.3.2" xref="alg1.l2.m1.3.3.1.1.1.1.3.2.cmml">g</mi><mo id="alg1.l2.m1.3.3.1.1.1.1.3.1" xref="alg1.l2.m1.3.3.1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.3.3.1.1.1.1.3.3" xref="alg1.l2.m1.3.3.1.1.1.1.3.3.cmml">e</mi><mo id="alg1.l2.m1.3.3.1.1.1.1.3.1a" xref="alg1.l2.m1.3.3.1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l2.m1.3.3.1.1.1.1.3.4" xref="alg1.l2.m1.3.3.1.1.1.1.3.4.cmml">n</mi></mrow></msub><mo id="alg1.l2.m1.3.3.1.1.1.3" xref="alg1.l2.m1.3.3.1.1.2.cmml">,</mo><mi id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml">q</mi><mo id="alg1.l2.m1.3.3.1.1.1.4" xref="alg1.l2.m1.3.3.1.1.2.cmml">,</mo><mover accent="true" id="alg1.l2.m1.2.2" xref="alg1.l2.m1.2.2.cmml"><mi id="alg1.l2.m1.2.2.2" xref="alg1.l2.m1.2.2.2.cmml">m</mi><mo id="alg1.l2.m1.2.2.1" xref="alg1.l2.m1.2.2.1.cmml">^</mo></mover><mo id="alg1.l2.m1.3.3.1.1.1.5" stretchy="false" xref="alg1.l2.m1.3.3.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.3b"><apply id="alg1.l2.m1.3.3.cmml" xref="alg1.l2.m1.3.3"><ci id="alg1.l2.m1.3.3.2.cmml" xref="alg1.l2.m1.3.3.2">←</ci><ci id="alg1.l2.m1.3.3.3.cmml" xref="alg1.l2.m1.3.3.3">𝐼</ci><apply id="alg1.l2.m1.3.3.1.cmml" xref="alg1.l2.m1.3.3.1"><times id="alg1.l2.m1.3.3.1.2.cmml" xref="alg1.l2.m1.3.3.1.2"></times><ci id="alg1.l2.m1.3.3.1.3.cmml" xref="alg1.l2.m1.3.3.1.3">ℳ</ci><vector id="alg1.l2.m1.3.3.1.1.2.cmml" xref="alg1.l2.m1.3.3.1.1.1"><apply id="alg1.l2.m1.3.3.1.1.1.1.cmml" xref="alg1.l2.m1.3.3.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l2.m1.3.3.1.1.1.1.1.cmml" xref="alg1.l2.m1.3.3.1.1.1.1">subscript</csymbol><ci id="alg1.l2.m1.3.3.1.1.1.1.2.cmml" xref="alg1.l2.m1.3.3.1.1.1.1.2">𝑝</ci><apply id="alg1.l2.m1.3.3.1.1.1.1.3.cmml" xref="alg1.l2.m1.3.3.1.1.1.1.3"><times id="alg1.l2.m1.3.3.1.1.1.1.3.1.cmml" xref="alg1.l2.m1.3.3.1.1.1.1.3.1"></times><ci id="alg1.l2.m1.3.3.1.1.1.1.3.2.cmml" xref="alg1.l2.m1.3.3.1.1.1.1.3.2">𝑔</ci><ci id="alg1.l2.m1.3.3.1.1.1.1.3.3.cmml" xref="alg1.l2.m1.3.3.1.1.1.1.3.3">𝑒</ci><ci id="alg1.l2.m1.3.3.1.1.1.1.3.4.cmml" xref="alg1.l2.m1.3.3.1.1.1.1.3.4">𝑛</ci></apply></apply><ci id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1">𝑞</ci><apply id="alg1.l2.m1.2.2.cmml" xref="alg1.l2.m1.2.2"><ci id="alg1.l2.m1.2.2.1.cmml" xref="alg1.l2.m1.2.2.1">^</ci><ci id="alg1.l2.m1.2.2.2.cmml" xref="alg1.l2.m1.2.2.2">𝑚</ci></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.3c">I\leftarrow\mathcal{M}(p_{gen},q,\hat{m})</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.3d">italic_I ← caligraphic_M ( italic_p start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT , italic_q , over^ start_ARG italic_m end_ARG )</annotation></semantics></math> <span class="ltx_text" id="alg1.l2.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l2.1.m1.1"><semantics id="alg1.l2.1.m1.1a"><mo id="alg1.l2.1.m1.1.1" xref="alg1.l2.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="alg1.l2.1.m1.1b"><ci id="alg1.l2.1.m1.1.1.cmml" xref="alg1.l2.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.1.m1.1d">▷</annotation></semantics></math> <span class="ltx_text" id="alg1.l2.1.1" style="color:#0000FF;">Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS3" title="3.3 Adaptive Generation of Internal Knowledge ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3.3</span></a></span>
</span>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l3.1.1.1" style="font-size:80%;">3:</span></span>Combine internal and external passages: <math alttext="D_{0}\leftarrow E\oplus I" class="ltx_Math" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><mrow id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml"><msub id="alg1.l3.m1.1.1.2" xref="alg1.l3.m1.1.1.2.cmml"><mi id="alg1.l3.m1.1.1.2.2" xref="alg1.l3.m1.1.1.2.2.cmml">D</mi><mn id="alg1.l3.m1.1.1.2.3" xref="alg1.l3.m1.1.1.2.3.cmml">0</mn></msub><mo id="alg1.l3.m1.1.1.1" stretchy="false" xref="alg1.l3.m1.1.1.1.cmml">←</mo><mrow id="alg1.l3.m1.1.1.3" xref="alg1.l3.m1.1.1.3.cmml"><mi id="alg1.l3.m1.1.1.3.2" xref="alg1.l3.m1.1.1.3.2.cmml">E</mi><mo id="alg1.l3.m1.1.1.3.1" xref="alg1.l3.m1.1.1.3.1.cmml">⊕</mo><mi id="alg1.l3.m1.1.1.3.3" xref="alg1.l3.m1.1.1.3.3.cmml">I</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><apply id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1"><ci id="alg1.l3.m1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1">←</ci><apply id="alg1.l3.m1.1.1.2.cmml" xref="alg1.l3.m1.1.1.2"><csymbol cd="ambiguous" id="alg1.l3.m1.1.1.2.1.cmml" xref="alg1.l3.m1.1.1.2">subscript</csymbol><ci id="alg1.l3.m1.1.1.2.2.cmml" xref="alg1.l3.m1.1.1.2.2">𝐷</ci><cn id="alg1.l3.m1.1.1.2.3.cmml" type="integer" xref="alg1.l3.m1.1.1.2.3">0</cn></apply><apply id="alg1.l3.m1.1.1.3.cmml" xref="alg1.l3.m1.1.1.3"><csymbol cd="latexml" id="alg1.l3.m1.1.1.3.1.cmml" xref="alg1.l3.m1.1.1.3.1">direct-sum</csymbol><ci id="alg1.l3.m1.1.1.3.2.cmml" xref="alg1.l3.m1.1.1.3.2">𝐸</ci><ci id="alg1.l3.m1.1.1.3.3.cmml" xref="alg1.l3.m1.1.1.3.3">𝐼</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">D_{0}\leftarrow E\oplus I</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ← italic_E ⊕ italic_I</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l4.1.1.1" style="font-size:80%;">4:</span></span>Assign passage sources: <math alttext="S_{0}\leftarrow[\mathbbm{1}_{\{d\in E\}}\text{for}\ d\ \text{in}\ D_{0}]" class="ltx_Math" display="inline" id="alg1.l4.m1.2"><semantics id="alg1.l4.m1.2a"><mrow id="alg1.l4.m1.2.2" xref="alg1.l4.m1.2.2.cmml"><msub id="alg1.l4.m1.2.2.3" xref="alg1.l4.m1.2.2.3.cmml"><mi id="alg1.l4.m1.2.2.3.2" xref="alg1.l4.m1.2.2.3.2.cmml">S</mi><mn id="alg1.l4.m1.2.2.3.3" xref="alg1.l4.m1.2.2.3.3.cmml">0</mn></msub><mo id="alg1.l4.m1.2.2.2" stretchy="false" xref="alg1.l4.m1.2.2.2.cmml">←</mo><mrow id="alg1.l4.m1.2.2.1.1" xref="alg1.l4.m1.2.2.1.2.cmml"><mo id="alg1.l4.m1.2.2.1.1.2" stretchy="false" xref="alg1.l4.m1.2.2.1.2.1.cmml">[</mo><mrow id="alg1.l4.m1.2.2.1.1.1" xref="alg1.l4.m1.2.2.1.1.1.cmml"><msub id="alg1.l4.m1.2.2.1.1.1.2" xref="alg1.l4.m1.2.2.1.1.1.2.cmml"><mn id="alg1.l4.m1.2.2.1.1.1.2.2" xref="alg1.l4.m1.2.2.1.1.1.2.2.cmml">𝟙</mn><mrow id="alg1.l4.m1.1.1.1.1" xref="alg1.l4.m1.1.1.1.2.cmml"><mo id="alg1.l4.m1.1.1.1.1.2" stretchy="false" xref="alg1.l4.m1.1.1.1.2.cmml">{</mo><mrow id="alg1.l4.m1.1.1.1.1.1" xref="alg1.l4.m1.1.1.1.1.1.cmml"><mi id="alg1.l4.m1.1.1.1.1.1.2" xref="alg1.l4.m1.1.1.1.1.1.2.cmml">d</mi><mo id="alg1.l4.m1.1.1.1.1.1.1" xref="alg1.l4.m1.1.1.1.1.1.1.cmml">∈</mo><mi id="alg1.l4.m1.1.1.1.1.1.3" xref="alg1.l4.m1.1.1.1.1.1.3.cmml">E</mi></mrow><mo id="alg1.l4.m1.1.1.1.1.3" stretchy="false" xref="alg1.l4.m1.1.1.1.2.cmml">}</mo></mrow></msub><mo id="alg1.l4.m1.2.2.1.1.1.1" xref="alg1.l4.m1.2.2.1.1.1.1.cmml">⁢</mo><mtext id="alg1.l4.m1.2.2.1.1.1.3" xref="alg1.l4.m1.2.2.1.1.1.3a.cmml">for</mtext><mo id="alg1.l4.m1.2.2.1.1.1.1a" lspace="0.500em" xref="alg1.l4.m1.2.2.1.1.1.1.cmml">⁢</mo><mi id="alg1.l4.m1.2.2.1.1.1.4" xref="alg1.l4.m1.2.2.1.1.1.4.cmml">d</mi><mo id="alg1.l4.m1.2.2.1.1.1.1b" lspace="0.500em" xref="alg1.l4.m1.2.2.1.1.1.1.cmml">⁢</mo><mtext id="alg1.l4.m1.2.2.1.1.1.5" xref="alg1.l4.m1.2.2.1.1.1.5a.cmml">in</mtext><mo id="alg1.l4.m1.2.2.1.1.1.1c" lspace="0.500em" xref="alg1.l4.m1.2.2.1.1.1.1.cmml">⁢</mo><msub id="alg1.l4.m1.2.2.1.1.1.6" xref="alg1.l4.m1.2.2.1.1.1.6.cmml"><mi id="alg1.l4.m1.2.2.1.1.1.6.2" xref="alg1.l4.m1.2.2.1.1.1.6.2.cmml">D</mi><mn id="alg1.l4.m1.2.2.1.1.1.6.3" xref="alg1.l4.m1.2.2.1.1.1.6.3.cmml">0</mn></msub></mrow><mo id="alg1.l4.m1.2.2.1.1.3" stretchy="false" xref="alg1.l4.m1.2.2.1.2.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.2b"><apply id="alg1.l4.m1.2.2.cmml" xref="alg1.l4.m1.2.2"><ci id="alg1.l4.m1.2.2.2.cmml" xref="alg1.l4.m1.2.2.2">←</ci><apply id="alg1.l4.m1.2.2.3.cmml" xref="alg1.l4.m1.2.2.3"><csymbol cd="ambiguous" id="alg1.l4.m1.2.2.3.1.cmml" xref="alg1.l4.m1.2.2.3">subscript</csymbol><ci id="alg1.l4.m1.2.2.3.2.cmml" xref="alg1.l4.m1.2.2.3.2">𝑆</ci><cn id="alg1.l4.m1.2.2.3.3.cmml" type="integer" xref="alg1.l4.m1.2.2.3.3">0</cn></apply><apply id="alg1.l4.m1.2.2.1.2.cmml" xref="alg1.l4.m1.2.2.1.1"><csymbol cd="latexml" id="alg1.l4.m1.2.2.1.2.1.cmml" xref="alg1.l4.m1.2.2.1.1.2">delimited-[]</csymbol><apply id="alg1.l4.m1.2.2.1.1.1.cmml" xref="alg1.l4.m1.2.2.1.1.1"><times id="alg1.l4.m1.2.2.1.1.1.1.cmml" xref="alg1.l4.m1.2.2.1.1.1.1"></times><apply id="alg1.l4.m1.2.2.1.1.1.2.cmml" xref="alg1.l4.m1.2.2.1.1.1.2"><csymbol cd="ambiguous" id="alg1.l4.m1.2.2.1.1.1.2.1.cmml" xref="alg1.l4.m1.2.2.1.1.1.2">subscript</csymbol><cn id="alg1.l4.m1.2.2.1.1.1.2.2.cmml" type="integer" xref="alg1.l4.m1.2.2.1.1.1.2.2">1</cn><set id="alg1.l4.m1.1.1.1.2.cmml" xref="alg1.l4.m1.1.1.1.1"><apply id="alg1.l4.m1.1.1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1.1.1"><in id="alg1.l4.m1.1.1.1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1.1.1.1"></in><ci id="alg1.l4.m1.1.1.1.1.1.2.cmml" xref="alg1.l4.m1.1.1.1.1.1.2">𝑑</ci><ci id="alg1.l4.m1.1.1.1.1.1.3.cmml" xref="alg1.l4.m1.1.1.1.1.1.3">𝐸</ci></apply></set></apply><ci id="alg1.l4.m1.2.2.1.1.1.3a.cmml" xref="alg1.l4.m1.2.2.1.1.1.3"><mtext id="alg1.l4.m1.2.2.1.1.1.3.cmml" xref="alg1.l4.m1.2.2.1.1.1.3">for</mtext></ci><ci id="alg1.l4.m1.2.2.1.1.1.4.cmml" xref="alg1.l4.m1.2.2.1.1.1.4">𝑑</ci><ci id="alg1.l4.m1.2.2.1.1.1.5a.cmml" xref="alg1.l4.m1.2.2.1.1.1.5"><mtext id="alg1.l4.m1.2.2.1.1.1.5.cmml" xref="alg1.l4.m1.2.2.1.1.1.5">in</mtext></ci><apply id="alg1.l4.m1.2.2.1.1.1.6.cmml" xref="alg1.l4.m1.2.2.1.1.1.6"><csymbol cd="ambiguous" id="alg1.l4.m1.2.2.1.1.1.6.1.cmml" xref="alg1.l4.m1.2.2.1.1.1.6">subscript</csymbol><ci id="alg1.l4.m1.2.2.1.1.1.6.2.cmml" xref="alg1.l4.m1.2.2.1.1.1.6.2">𝐷</ci><cn id="alg1.l4.m1.2.2.1.1.1.6.3.cmml" type="integer" xref="alg1.l4.m1.2.2.1.1.1.6.3">0</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.2c">S_{0}\leftarrow[\mathbbm{1}_{\{d\in E\}}\text{for}\ d\ \text{in}\ D_{0}]</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.2d">italic_S start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ← [ blackboard_1 start_POSTSUBSCRIPT { italic_d ∈ italic_E } end_POSTSUBSCRIPT for italic_d in italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ]</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l5.1.1.1" style="font-size:80%;">5:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l5.2">if</span> <math alttext="t&gt;1" class="ltx_Math" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><mrow id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml"><mi id="alg1.l5.m1.1.1.2" xref="alg1.l5.m1.1.1.2.cmml">t</mi><mo id="alg1.l5.m1.1.1.1" xref="alg1.l5.m1.1.1.1.cmml">&gt;</mo><mn id="alg1.l5.m1.1.1.3" xref="alg1.l5.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><apply id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1"><gt id="alg1.l5.m1.1.1.1.cmml" xref="alg1.l5.m1.1.1.1"></gt><ci id="alg1.l5.m1.1.1.2.cmml" xref="alg1.l5.m1.1.1.2">𝑡</ci><cn id="alg1.l5.m1.1.1.3.cmml" type="integer" xref="alg1.l5.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">t&gt;1</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">italic_t &gt; 1</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l5.3">then</span>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l6.2.1.1" style="font-size:80%;">6:</span></span>     <span class="ltx_text ltx_font_bold" id="alg1.l6.3">for</span> <math alttext="j=1,\ldots,t-1" class="ltx_Math" display="inline" id="alg1.l6.m1.3"><semantics id="alg1.l6.m1.3a"><mrow id="alg1.l6.m1.3.3" xref="alg1.l6.m1.3.3.cmml"><mi id="alg1.l6.m1.3.3.3" xref="alg1.l6.m1.3.3.3.cmml">j</mi><mo id="alg1.l6.m1.3.3.2" xref="alg1.l6.m1.3.3.2.cmml">=</mo><mrow id="alg1.l6.m1.3.3.1.1" xref="alg1.l6.m1.3.3.1.2.cmml"><mn id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml">1</mn><mo id="alg1.l6.m1.3.3.1.1.2" xref="alg1.l6.m1.3.3.1.2.cmml">,</mo><mi id="alg1.l6.m1.2.2" mathvariant="normal" xref="alg1.l6.m1.2.2.cmml">…</mi><mo id="alg1.l6.m1.3.3.1.1.3" xref="alg1.l6.m1.3.3.1.2.cmml">,</mo><mrow id="alg1.l6.m1.3.3.1.1.1" xref="alg1.l6.m1.3.3.1.1.1.cmml"><mi id="alg1.l6.m1.3.3.1.1.1.2" xref="alg1.l6.m1.3.3.1.1.1.2.cmml">t</mi><mo id="alg1.l6.m1.3.3.1.1.1.1" xref="alg1.l6.m1.3.3.1.1.1.1.cmml">−</mo><mn id="alg1.l6.m1.3.3.1.1.1.3" xref="alg1.l6.m1.3.3.1.1.1.3.cmml">1</mn></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.3b"><apply id="alg1.l6.m1.3.3.cmml" xref="alg1.l6.m1.3.3"><eq id="alg1.l6.m1.3.3.2.cmml" xref="alg1.l6.m1.3.3.2"></eq><ci id="alg1.l6.m1.3.3.3.cmml" xref="alg1.l6.m1.3.3.3">𝑗</ci><list id="alg1.l6.m1.3.3.1.2.cmml" xref="alg1.l6.m1.3.3.1.1"><cn id="alg1.l6.m1.1.1.cmml" type="integer" xref="alg1.l6.m1.1.1">1</cn><ci id="alg1.l6.m1.2.2.cmml" xref="alg1.l6.m1.2.2">…</ci><apply id="alg1.l6.m1.3.3.1.1.1.cmml" xref="alg1.l6.m1.3.3.1.1.1"><minus id="alg1.l6.m1.3.3.1.1.1.1.cmml" xref="alg1.l6.m1.3.3.1.1.1.1"></minus><ci id="alg1.l6.m1.3.3.1.1.1.2.cmml" xref="alg1.l6.m1.3.3.1.1.1.2">𝑡</ci><cn id="alg1.l6.m1.3.3.1.1.1.3.cmml" type="integer" xref="alg1.l6.m1.3.3.1.1.1.3">1</cn></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.3c">j=1,\ldots,t-1</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.3d">italic_j = 1 , … , italic_t - 1</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l6.4">do</span> <span class="ltx_text" id="alg1.l6.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l6.1.m1.1"><semantics id="alg1.l6.1.m1.1a"><mo id="alg1.l6.1.m1.1.1" xref="alg1.l6.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="alg1.l6.1.m1.1b"><ci id="alg1.l6.1.m1.1.1.cmml" xref="alg1.l6.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.1.m1.1d">▷</annotation></semantics></math> <span class="ltx_text" id="alg1.l6.1.1" style="color:#0000FF;">Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS4" title="3.4 Iterative Source-aware Knowledge Consolidation ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3.4</span></a></span>
</span>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l7.1.1.1" style="font-size:80%;">7:</span></span>         Consolidate knowledge: <math alttext="\langle D_{j+1},S_{j+1}\rangle\leftarrow\mathcal{M}(p_{con},q,\langle D_{0},S_%
{0}\rangle,\langle D_{j},S_{j}\rangle)" class="ltx_Math" display="inline" id="alg1.l7.m1.6"><semantics id="alg1.l7.m1.6a"><mrow id="alg1.l7.m1.6.6" xref="alg1.l7.m1.6.6.cmml"><mrow id="alg1.l7.m1.3.3.2.2" xref="alg1.l7.m1.3.3.2.3.cmml"><mo id="alg1.l7.m1.3.3.2.2.3" stretchy="false" xref="alg1.l7.m1.3.3.2.3.cmml">⟨</mo><msub id="alg1.l7.m1.2.2.1.1.1" xref="alg1.l7.m1.2.2.1.1.1.cmml"><mi id="alg1.l7.m1.2.2.1.1.1.2" xref="alg1.l7.m1.2.2.1.1.1.2.cmml">D</mi><mrow id="alg1.l7.m1.2.2.1.1.1.3" xref="alg1.l7.m1.2.2.1.1.1.3.cmml"><mi id="alg1.l7.m1.2.2.1.1.1.3.2" xref="alg1.l7.m1.2.2.1.1.1.3.2.cmml">j</mi><mo id="alg1.l7.m1.2.2.1.1.1.3.1" xref="alg1.l7.m1.2.2.1.1.1.3.1.cmml">+</mo><mn id="alg1.l7.m1.2.2.1.1.1.3.3" xref="alg1.l7.m1.2.2.1.1.1.3.3.cmml">1</mn></mrow></msub><mo id="alg1.l7.m1.3.3.2.2.4" xref="alg1.l7.m1.3.3.2.3.cmml">,</mo><msub id="alg1.l7.m1.3.3.2.2.2" xref="alg1.l7.m1.3.3.2.2.2.cmml"><mi id="alg1.l7.m1.3.3.2.2.2.2" xref="alg1.l7.m1.3.3.2.2.2.2.cmml">S</mi><mrow id="alg1.l7.m1.3.3.2.2.2.3" xref="alg1.l7.m1.3.3.2.2.2.3.cmml"><mi id="alg1.l7.m1.3.3.2.2.2.3.2" xref="alg1.l7.m1.3.3.2.2.2.3.2.cmml">j</mi><mo id="alg1.l7.m1.3.3.2.2.2.3.1" xref="alg1.l7.m1.3.3.2.2.2.3.1.cmml">+</mo><mn id="alg1.l7.m1.3.3.2.2.2.3.3" xref="alg1.l7.m1.3.3.2.2.2.3.3.cmml">1</mn></mrow></msub><mo id="alg1.l7.m1.3.3.2.2.5" stretchy="false" xref="alg1.l7.m1.3.3.2.3.cmml">⟩</mo></mrow><mo id="alg1.l7.m1.6.6.6" stretchy="false" xref="alg1.l7.m1.6.6.6.cmml">←</mo><mrow id="alg1.l7.m1.6.6.5" xref="alg1.l7.m1.6.6.5.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l7.m1.6.6.5.5" xref="alg1.l7.m1.6.6.5.5.cmml">ℳ</mi><mo id="alg1.l7.m1.6.6.5.4" xref="alg1.l7.m1.6.6.5.4.cmml">⁢</mo><mrow id="alg1.l7.m1.6.6.5.3.3" xref="alg1.l7.m1.6.6.5.3.4.cmml"><mo id="alg1.l7.m1.6.6.5.3.3.4" stretchy="false" xref="alg1.l7.m1.6.6.5.3.4.cmml">(</mo><msub id="alg1.l7.m1.4.4.3.1.1.1" xref="alg1.l7.m1.4.4.3.1.1.1.cmml"><mi id="alg1.l7.m1.4.4.3.1.1.1.2" xref="alg1.l7.m1.4.4.3.1.1.1.2.cmml">p</mi><mrow id="alg1.l7.m1.4.4.3.1.1.1.3" xref="alg1.l7.m1.4.4.3.1.1.1.3.cmml"><mi id="alg1.l7.m1.4.4.3.1.1.1.3.2" xref="alg1.l7.m1.4.4.3.1.1.1.3.2.cmml">c</mi><mo id="alg1.l7.m1.4.4.3.1.1.1.3.1" xref="alg1.l7.m1.4.4.3.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.4.4.3.1.1.1.3.3" xref="alg1.l7.m1.4.4.3.1.1.1.3.3.cmml">o</mi><mo id="alg1.l7.m1.4.4.3.1.1.1.3.1a" xref="alg1.l7.m1.4.4.3.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l7.m1.4.4.3.1.1.1.3.4" xref="alg1.l7.m1.4.4.3.1.1.1.3.4.cmml">n</mi></mrow></msub><mo id="alg1.l7.m1.6.6.5.3.3.5" xref="alg1.l7.m1.6.6.5.3.4.cmml">,</mo><mi id="alg1.l7.m1.1.1" xref="alg1.l7.m1.1.1.cmml">q</mi><mo id="alg1.l7.m1.6.6.5.3.3.6" xref="alg1.l7.m1.6.6.5.3.4.cmml">,</mo><mrow id="alg1.l7.m1.5.5.4.2.2.2.2" xref="alg1.l7.m1.5.5.4.2.2.2.3.cmml"><mo id="alg1.l7.m1.5.5.4.2.2.2.2.3" stretchy="false" xref="alg1.l7.m1.5.5.4.2.2.2.3.cmml">⟨</mo><msub id="alg1.l7.m1.5.5.4.2.2.2.1.1" xref="alg1.l7.m1.5.5.4.2.2.2.1.1.cmml"><mi id="alg1.l7.m1.5.5.4.2.2.2.1.1.2" xref="alg1.l7.m1.5.5.4.2.2.2.1.1.2.cmml">D</mi><mn id="alg1.l7.m1.5.5.4.2.2.2.1.1.3" xref="alg1.l7.m1.5.5.4.2.2.2.1.1.3.cmml">0</mn></msub><mo id="alg1.l7.m1.5.5.4.2.2.2.2.4" xref="alg1.l7.m1.5.5.4.2.2.2.3.cmml">,</mo><msub id="alg1.l7.m1.5.5.4.2.2.2.2.2" xref="alg1.l7.m1.5.5.4.2.2.2.2.2.cmml"><mi id="alg1.l7.m1.5.5.4.2.2.2.2.2.2" xref="alg1.l7.m1.5.5.4.2.2.2.2.2.2.cmml">S</mi><mn id="alg1.l7.m1.5.5.4.2.2.2.2.2.3" xref="alg1.l7.m1.5.5.4.2.2.2.2.2.3.cmml">0</mn></msub><mo id="alg1.l7.m1.5.5.4.2.2.2.2.5" stretchy="false" xref="alg1.l7.m1.5.5.4.2.2.2.3.cmml">⟩</mo></mrow><mo id="alg1.l7.m1.6.6.5.3.3.7" xref="alg1.l7.m1.6.6.5.3.4.cmml">,</mo><mrow id="alg1.l7.m1.6.6.5.3.3.3.2" xref="alg1.l7.m1.6.6.5.3.3.3.3.cmml"><mo id="alg1.l7.m1.6.6.5.3.3.3.2.3" stretchy="false" xref="alg1.l7.m1.6.6.5.3.3.3.3.cmml">⟨</mo><msub id="alg1.l7.m1.6.6.5.3.3.3.1.1" xref="alg1.l7.m1.6.6.5.3.3.3.1.1.cmml"><mi id="alg1.l7.m1.6.6.5.3.3.3.1.1.2" xref="alg1.l7.m1.6.6.5.3.3.3.1.1.2.cmml">D</mi><mi id="alg1.l7.m1.6.6.5.3.3.3.1.1.3" xref="alg1.l7.m1.6.6.5.3.3.3.1.1.3.cmml">j</mi></msub><mo id="alg1.l7.m1.6.6.5.3.3.3.2.4" xref="alg1.l7.m1.6.6.5.3.3.3.3.cmml">,</mo><msub id="alg1.l7.m1.6.6.5.3.3.3.2.2" xref="alg1.l7.m1.6.6.5.3.3.3.2.2.cmml"><mi id="alg1.l7.m1.6.6.5.3.3.3.2.2.2" xref="alg1.l7.m1.6.6.5.3.3.3.2.2.2.cmml">S</mi><mi id="alg1.l7.m1.6.6.5.3.3.3.2.2.3" xref="alg1.l7.m1.6.6.5.3.3.3.2.2.3.cmml">j</mi></msub><mo id="alg1.l7.m1.6.6.5.3.3.3.2.5" stretchy="false" xref="alg1.l7.m1.6.6.5.3.3.3.3.cmml">⟩</mo></mrow><mo id="alg1.l7.m1.6.6.5.3.3.8" stretchy="false" xref="alg1.l7.m1.6.6.5.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l7.m1.6b"><apply id="alg1.l7.m1.6.6.cmml" xref="alg1.l7.m1.6.6"><ci id="alg1.l7.m1.6.6.6.cmml" xref="alg1.l7.m1.6.6.6">←</ci><list id="alg1.l7.m1.3.3.2.3.cmml" xref="alg1.l7.m1.3.3.2.2"><apply id="alg1.l7.m1.2.2.1.1.1.cmml" xref="alg1.l7.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.2.2.1.1.1.1.cmml" xref="alg1.l7.m1.2.2.1.1.1">subscript</csymbol><ci id="alg1.l7.m1.2.2.1.1.1.2.cmml" xref="alg1.l7.m1.2.2.1.1.1.2">𝐷</ci><apply id="alg1.l7.m1.2.2.1.1.1.3.cmml" xref="alg1.l7.m1.2.2.1.1.1.3"><plus id="alg1.l7.m1.2.2.1.1.1.3.1.cmml" xref="alg1.l7.m1.2.2.1.1.1.3.1"></plus><ci id="alg1.l7.m1.2.2.1.1.1.3.2.cmml" xref="alg1.l7.m1.2.2.1.1.1.3.2">𝑗</ci><cn id="alg1.l7.m1.2.2.1.1.1.3.3.cmml" type="integer" xref="alg1.l7.m1.2.2.1.1.1.3.3">1</cn></apply></apply><apply id="alg1.l7.m1.3.3.2.2.2.cmml" xref="alg1.l7.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="alg1.l7.m1.3.3.2.2.2.1.cmml" xref="alg1.l7.m1.3.3.2.2.2">subscript</csymbol><ci id="alg1.l7.m1.3.3.2.2.2.2.cmml" xref="alg1.l7.m1.3.3.2.2.2.2">𝑆</ci><apply id="alg1.l7.m1.3.3.2.2.2.3.cmml" xref="alg1.l7.m1.3.3.2.2.2.3"><plus id="alg1.l7.m1.3.3.2.2.2.3.1.cmml" xref="alg1.l7.m1.3.3.2.2.2.3.1"></plus><ci id="alg1.l7.m1.3.3.2.2.2.3.2.cmml" xref="alg1.l7.m1.3.3.2.2.2.3.2">𝑗</ci><cn id="alg1.l7.m1.3.3.2.2.2.3.3.cmml" type="integer" xref="alg1.l7.m1.3.3.2.2.2.3.3">1</cn></apply></apply></list><apply id="alg1.l7.m1.6.6.5.cmml" xref="alg1.l7.m1.6.6.5"><times id="alg1.l7.m1.6.6.5.4.cmml" xref="alg1.l7.m1.6.6.5.4"></times><ci id="alg1.l7.m1.6.6.5.5.cmml" xref="alg1.l7.m1.6.6.5.5">ℳ</ci><vector id="alg1.l7.m1.6.6.5.3.4.cmml" xref="alg1.l7.m1.6.6.5.3.3"><apply id="alg1.l7.m1.4.4.3.1.1.1.cmml" xref="alg1.l7.m1.4.4.3.1.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.4.4.3.1.1.1.1.cmml" xref="alg1.l7.m1.4.4.3.1.1.1">subscript</csymbol><ci id="alg1.l7.m1.4.4.3.1.1.1.2.cmml" xref="alg1.l7.m1.4.4.3.1.1.1.2">𝑝</ci><apply id="alg1.l7.m1.4.4.3.1.1.1.3.cmml" xref="alg1.l7.m1.4.4.3.1.1.1.3"><times id="alg1.l7.m1.4.4.3.1.1.1.3.1.cmml" xref="alg1.l7.m1.4.4.3.1.1.1.3.1"></times><ci id="alg1.l7.m1.4.4.3.1.1.1.3.2.cmml" xref="alg1.l7.m1.4.4.3.1.1.1.3.2">𝑐</ci><ci id="alg1.l7.m1.4.4.3.1.1.1.3.3.cmml" xref="alg1.l7.m1.4.4.3.1.1.1.3.3">𝑜</ci><ci id="alg1.l7.m1.4.4.3.1.1.1.3.4.cmml" xref="alg1.l7.m1.4.4.3.1.1.1.3.4">𝑛</ci></apply></apply><ci id="alg1.l7.m1.1.1.cmml" xref="alg1.l7.m1.1.1">𝑞</ci><list id="alg1.l7.m1.5.5.4.2.2.2.3.cmml" xref="alg1.l7.m1.5.5.4.2.2.2.2"><apply id="alg1.l7.m1.5.5.4.2.2.2.1.1.cmml" xref="alg1.l7.m1.5.5.4.2.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.5.5.4.2.2.2.1.1.1.cmml" xref="alg1.l7.m1.5.5.4.2.2.2.1.1">subscript</csymbol><ci id="alg1.l7.m1.5.5.4.2.2.2.1.1.2.cmml" xref="alg1.l7.m1.5.5.4.2.2.2.1.1.2">𝐷</ci><cn id="alg1.l7.m1.5.5.4.2.2.2.1.1.3.cmml" type="integer" xref="alg1.l7.m1.5.5.4.2.2.2.1.1.3">0</cn></apply><apply id="alg1.l7.m1.5.5.4.2.2.2.2.2.cmml" xref="alg1.l7.m1.5.5.4.2.2.2.2.2"><csymbol cd="ambiguous" id="alg1.l7.m1.5.5.4.2.2.2.2.2.1.cmml" xref="alg1.l7.m1.5.5.4.2.2.2.2.2">subscript</csymbol><ci id="alg1.l7.m1.5.5.4.2.2.2.2.2.2.cmml" xref="alg1.l7.m1.5.5.4.2.2.2.2.2.2">𝑆</ci><cn id="alg1.l7.m1.5.5.4.2.2.2.2.2.3.cmml" type="integer" xref="alg1.l7.m1.5.5.4.2.2.2.2.2.3">0</cn></apply></list><list id="alg1.l7.m1.6.6.5.3.3.3.3.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.2"><apply id="alg1.l7.m1.6.6.5.3.3.3.1.1.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.6.6.5.3.3.3.1.1.1.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.1.1">subscript</csymbol><ci id="alg1.l7.m1.6.6.5.3.3.3.1.1.2.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.1.1.2">𝐷</ci><ci id="alg1.l7.m1.6.6.5.3.3.3.1.1.3.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.1.1.3">𝑗</ci></apply><apply id="alg1.l7.m1.6.6.5.3.3.3.2.2.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.2.2"><csymbol cd="ambiguous" id="alg1.l7.m1.6.6.5.3.3.3.2.2.1.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.2.2">subscript</csymbol><ci id="alg1.l7.m1.6.6.5.3.3.3.2.2.2.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.2.2.2">𝑆</ci><ci id="alg1.l7.m1.6.6.5.3.3.3.2.2.3.cmml" xref="alg1.l7.m1.6.6.5.3.3.3.2.2.3">𝑗</ci></apply></list></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m1.6c">\langle D_{j+1},S_{j+1}\rangle\leftarrow\mathcal{M}(p_{con},q,\langle D_{0},S_%
{0}\rangle,\langle D_{j},S_{j}\rangle)</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m1.6d">⟨ italic_D start_POSTSUBSCRIPT italic_j + 1 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT italic_j + 1 end_POSTSUBSCRIPT ⟩ ← caligraphic_M ( italic_p start_POSTSUBSCRIPT italic_c italic_o italic_n end_POSTSUBSCRIPT , italic_q , ⟨ italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ⟩ , ⟨ italic_D start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ⟩ )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l8.1.1.1" style="font-size:80%;">8:</span></span>     <span class="ltx_text ltx_font_bold" id="alg1.l8.2">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l8.3">for</span>
</div>
<div class="ltx_listingline" id="alg1.l9">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l9.2.1.1" style="font-size:80%;">9:</span></span>     Finally consolidate and answer: <math alttext="a\leftarrow\mathcal{M}(p_{ans},q,\langle D_{0},S_{0}\rangle,\langle D_{t-1},S_%
{t-1}\rangle)" class="ltx_Math" display="inline" id="alg1.l9.m1.4"><semantics id="alg1.l9.m1.4a"><mrow id="alg1.l9.m1.4.4" xref="alg1.l9.m1.4.4.cmml"><mi id="alg1.l9.m1.4.4.5" xref="alg1.l9.m1.4.4.5.cmml">a</mi><mo id="alg1.l9.m1.4.4.4" stretchy="false" xref="alg1.l9.m1.4.4.4.cmml">←</mo><mrow id="alg1.l9.m1.4.4.3" xref="alg1.l9.m1.4.4.3.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l9.m1.4.4.3.5" xref="alg1.l9.m1.4.4.3.5.cmml">ℳ</mi><mo id="alg1.l9.m1.4.4.3.4" xref="alg1.l9.m1.4.4.3.4.cmml">⁢</mo><mrow id="alg1.l9.m1.4.4.3.3.3" xref="alg1.l9.m1.4.4.3.3.4.cmml"><mo id="alg1.l9.m1.4.4.3.3.3.4" stretchy="false" xref="alg1.l9.m1.4.4.3.3.4.cmml">(</mo><msub id="alg1.l9.m1.2.2.1.1.1.1" xref="alg1.l9.m1.2.2.1.1.1.1.cmml"><mi id="alg1.l9.m1.2.2.1.1.1.1.2" xref="alg1.l9.m1.2.2.1.1.1.1.2.cmml">p</mi><mrow id="alg1.l9.m1.2.2.1.1.1.1.3" xref="alg1.l9.m1.2.2.1.1.1.1.3.cmml"><mi id="alg1.l9.m1.2.2.1.1.1.1.3.2" xref="alg1.l9.m1.2.2.1.1.1.1.3.2.cmml">a</mi><mo id="alg1.l9.m1.2.2.1.1.1.1.3.1" xref="alg1.l9.m1.2.2.1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.2.2.1.1.1.1.3.3" xref="alg1.l9.m1.2.2.1.1.1.1.3.3.cmml">n</mi><mo id="alg1.l9.m1.2.2.1.1.1.1.3.1a" xref="alg1.l9.m1.2.2.1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l9.m1.2.2.1.1.1.1.3.4" xref="alg1.l9.m1.2.2.1.1.1.1.3.4.cmml">s</mi></mrow></msub><mo id="alg1.l9.m1.4.4.3.3.3.5" xref="alg1.l9.m1.4.4.3.3.4.cmml">,</mo><mi id="alg1.l9.m1.1.1" xref="alg1.l9.m1.1.1.cmml">q</mi><mo id="alg1.l9.m1.4.4.3.3.3.6" xref="alg1.l9.m1.4.4.3.3.4.cmml">,</mo><mrow id="alg1.l9.m1.3.3.2.2.2.2.2" xref="alg1.l9.m1.3.3.2.2.2.2.3.cmml"><mo id="alg1.l9.m1.3.3.2.2.2.2.2.3" stretchy="false" xref="alg1.l9.m1.3.3.2.2.2.2.3.cmml">⟨</mo><msub id="alg1.l9.m1.3.3.2.2.2.2.1.1" xref="alg1.l9.m1.3.3.2.2.2.2.1.1.cmml"><mi id="alg1.l9.m1.3.3.2.2.2.2.1.1.2" xref="alg1.l9.m1.3.3.2.2.2.2.1.1.2.cmml">D</mi><mn id="alg1.l9.m1.3.3.2.2.2.2.1.1.3" xref="alg1.l9.m1.3.3.2.2.2.2.1.1.3.cmml">0</mn></msub><mo id="alg1.l9.m1.3.3.2.2.2.2.2.4" xref="alg1.l9.m1.3.3.2.2.2.2.3.cmml">,</mo><msub id="alg1.l9.m1.3.3.2.2.2.2.2.2" xref="alg1.l9.m1.3.3.2.2.2.2.2.2.cmml"><mi id="alg1.l9.m1.3.3.2.2.2.2.2.2.2" xref="alg1.l9.m1.3.3.2.2.2.2.2.2.2.cmml">S</mi><mn id="alg1.l9.m1.3.3.2.2.2.2.2.2.3" xref="alg1.l9.m1.3.3.2.2.2.2.2.2.3.cmml">0</mn></msub><mo id="alg1.l9.m1.3.3.2.2.2.2.2.5" stretchy="false" xref="alg1.l9.m1.3.3.2.2.2.2.3.cmml">⟩</mo></mrow><mo id="alg1.l9.m1.4.4.3.3.3.7" xref="alg1.l9.m1.4.4.3.3.4.cmml">,</mo><mrow id="alg1.l9.m1.4.4.3.3.3.3.2" xref="alg1.l9.m1.4.4.3.3.3.3.3.cmml"><mo id="alg1.l9.m1.4.4.3.3.3.3.2.3" stretchy="false" xref="alg1.l9.m1.4.4.3.3.3.3.3.cmml">⟨</mo><msub id="alg1.l9.m1.4.4.3.3.3.3.1.1" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.cmml"><mi id="alg1.l9.m1.4.4.3.3.3.3.1.1.2" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.2.cmml">D</mi><mrow id="alg1.l9.m1.4.4.3.3.3.3.1.1.3" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.3.cmml"><mi id="alg1.l9.m1.4.4.3.3.3.3.1.1.3.2" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.3.2.cmml">t</mi><mo id="alg1.l9.m1.4.4.3.3.3.3.1.1.3.1" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.3.1.cmml">−</mo><mn id="alg1.l9.m1.4.4.3.3.3.3.1.1.3.3" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.3.3.cmml">1</mn></mrow></msub><mo id="alg1.l9.m1.4.4.3.3.3.3.2.4" xref="alg1.l9.m1.4.4.3.3.3.3.3.cmml">,</mo><msub id="alg1.l9.m1.4.4.3.3.3.3.2.2" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.cmml"><mi id="alg1.l9.m1.4.4.3.3.3.3.2.2.2" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.2.cmml">S</mi><mrow id="alg1.l9.m1.4.4.3.3.3.3.2.2.3" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.3.cmml"><mi id="alg1.l9.m1.4.4.3.3.3.3.2.2.3.2" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.3.2.cmml">t</mi><mo id="alg1.l9.m1.4.4.3.3.3.3.2.2.3.1" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.3.1.cmml">−</mo><mn id="alg1.l9.m1.4.4.3.3.3.3.2.2.3.3" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.3.3.cmml">1</mn></mrow></msub><mo id="alg1.l9.m1.4.4.3.3.3.3.2.5" stretchy="false" xref="alg1.l9.m1.4.4.3.3.3.3.3.cmml">⟩</mo></mrow><mo id="alg1.l9.m1.4.4.3.3.3.8" stretchy="false" xref="alg1.l9.m1.4.4.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l9.m1.4b"><apply id="alg1.l9.m1.4.4.cmml" xref="alg1.l9.m1.4.4"><ci id="alg1.l9.m1.4.4.4.cmml" xref="alg1.l9.m1.4.4.4">←</ci><ci id="alg1.l9.m1.4.4.5.cmml" xref="alg1.l9.m1.4.4.5">𝑎</ci><apply id="alg1.l9.m1.4.4.3.cmml" xref="alg1.l9.m1.4.4.3"><times id="alg1.l9.m1.4.4.3.4.cmml" xref="alg1.l9.m1.4.4.3.4"></times><ci id="alg1.l9.m1.4.4.3.5.cmml" xref="alg1.l9.m1.4.4.3.5">ℳ</ci><vector id="alg1.l9.m1.4.4.3.3.4.cmml" xref="alg1.l9.m1.4.4.3.3.3"><apply id="alg1.l9.m1.2.2.1.1.1.1.cmml" xref="alg1.l9.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l9.m1.2.2.1.1.1.1.1.cmml" xref="alg1.l9.m1.2.2.1.1.1.1">subscript</csymbol><ci id="alg1.l9.m1.2.2.1.1.1.1.2.cmml" xref="alg1.l9.m1.2.2.1.1.1.1.2">𝑝</ci><apply id="alg1.l9.m1.2.2.1.1.1.1.3.cmml" xref="alg1.l9.m1.2.2.1.1.1.1.3"><times id="alg1.l9.m1.2.2.1.1.1.1.3.1.cmml" xref="alg1.l9.m1.2.2.1.1.1.1.3.1"></times><ci id="alg1.l9.m1.2.2.1.1.1.1.3.2.cmml" xref="alg1.l9.m1.2.2.1.1.1.1.3.2">𝑎</ci><ci id="alg1.l9.m1.2.2.1.1.1.1.3.3.cmml" xref="alg1.l9.m1.2.2.1.1.1.1.3.3">𝑛</ci><ci id="alg1.l9.m1.2.2.1.1.1.1.3.4.cmml" xref="alg1.l9.m1.2.2.1.1.1.1.3.4">𝑠</ci></apply></apply><ci id="alg1.l9.m1.1.1.cmml" xref="alg1.l9.m1.1.1">𝑞</ci><list id="alg1.l9.m1.3.3.2.2.2.2.3.cmml" xref="alg1.l9.m1.3.3.2.2.2.2.2"><apply id="alg1.l9.m1.3.3.2.2.2.2.1.1.cmml" xref="alg1.l9.m1.3.3.2.2.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l9.m1.3.3.2.2.2.2.1.1.1.cmml" xref="alg1.l9.m1.3.3.2.2.2.2.1.1">subscript</csymbol><ci id="alg1.l9.m1.3.3.2.2.2.2.1.1.2.cmml" xref="alg1.l9.m1.3.3.2.2.2.2.1.1.2">𝐷</ci><cn id="alg1.l9.m1.3.3.2.2.2.2.1.1.3.cmml" type="integer" xref="alg1.l9.m1.3.3.2.2.2.2.1.1.3">0</cn></apply><apply id="alg1.l9.m1.3.3.2.2.2.2.2.2.cmml" xref="alg1.l9.m1.3.3.2.2.2.2.2.2"><csymbol cd="ambiguous" id="alg1.l9.m1.3.3.2.2.2.2.2.2.1.cmml" xref="alg1.l9.m1.3.3.2.2.2.2.2.2">subscript</csymbol><ci id="alg1.l9.m1.3.3.2.2.2.2.2.2.2.cmml" xref="alg1.l9.m1.3.3.2.2.2.2.2.2.2">𝑆</ci><cn id="alg1.l9.m1.3.3.2.2.2.2.2.2.3.cmml" type="integer" xref="alg1.l9.m1.3.3.2.2.2.2.2.2.3">0</cn></apply></list><list id="alg1.l9.m1.4.4.3.3.3.3.3.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.2"><apply id="alg1.l9.m1.4.4.3.3.3.3.1.1.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.1.1"><csymbol cd="ambiguous" id="alg1.l9.m1.4.4.3.3.3.3.1.1.1.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.1.1">subscript</csymbol><ci id="alg1.l9.m1.4.4.3.3.3.3.1.1.2.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.2">𝐷</ci><apply id="alg1.l9.m1.4.4.3.3.3.3.1.1.3.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.3"><minus id="alg1.l9.m1.4.4.3.3.3.3.1.1.3.1.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.3.1"></minus><ci id="alg1.l9.m1.4.4.3.3.3.3.1.1.3.2.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.3.2">𝑡</ci><cn id="alg1.l9.m1.4.4.3.3.3.3.1.1.3.3.cmml" type="integer" xref="alg1.l9.m1.4.4.3.3.3.3.1.1.3.3">1</cn></apply></apply><apply id="alg1.l9.m1.4.4.3.3.3.3.2.2.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.2.2"><csymbol cd="ambiguous" id="alg1.l9.m1.4.4.3.3.3.3.2.2.1.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.2.2">subscript</csymbol><ci id="alg1.l9.m1.4.4.3.3.3.3.2.2.2.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.2">𝑆</ci><apply id="alg1.l9.m1.4.4.3.3.3.3.2.2.3.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.3"><minus id="alg1.l9.m1.4.4.3.3.3.3.2.2.3.1.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.3.1"></minus><ci id="alg1.l9.m1.4.4.3.3.3.3.2.2.3.2.cmml" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.3.2">𝑡</ci><cn id="alg1.l9.m1.4.4.3.3.3.3.2.2.3.3.cmml" type="integer" xref="alg1.l9.m1.4.4.3.3.3.3.2.2.3.3">1</cn></apply></apply></list></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l9.m1.4c">a\leftarrow\mathcal{M}(p_{ans},q,\langle D_{0},S_{0}\rangle,\langle D_{t-1},S_%
{t-1}\rangle)</annotation><annotation encoding="application/x-llamapun" id="alg1.l9.m1.4d">italic_a ← caligraphic_M ( italic_p start_POSTSUBSCRIPT italic_a italic_n italic_s end_POSTSUBSCRIPT , italic_q , ⟨ italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ⟩ , ⟨ italic_D start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT ⟩ )</annotation></semantics></math> <span class="ltx_text" id="alg1.l9.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l9.1.m1.1"><semantics id="alg1.l9.1.m1.1a"><mo id="alg1.l9.1.m1.1.1" xref="alg1.l9.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="alg1.l9.1.m1.1b"><ci id="alg1.l9.1.m1.1.1.cmml" xref="alg1.l9.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l9.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="alg1.l9.1.m1.1d">▷</annotation></semantics></math> <span class="ltx_text" id="alg1.l9.1.1" style="color:#0000FF;">Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S3.SS5" title="3.5 Answer Finalization ‣ 3 Astute RAG: Overcoming the Pitfall ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">3.5</span></a></span>
</span>
</div>
<div class="ltx_listingline" id="alg1.l10">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l10.1.1.1" style="font-size:80%;">10:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l10.2">else</span>
</div>
<div class="ltx_listingline" id="alg1.l11">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l11.1.1.1" style="font-size:80%;">11:</span></span>     Consolidate knowledge and finalize the answer: <math alttext="a\leftarrow\mathcal{M}(p_{ans},q,\langle D_{0},S_{0}\rangle)" class="ltx_Math" display="inline" id="alg1.l11.m1.3"><semantics id="alg1.l11.m1.3a"><mrow id="alg1.l11.m1.3.3" xref="alg1.l11.m1.3.3.cmml"><mi id="alg1.l11.m1.3.3.4" xref="alg1.l11.m1.3.3.4.cmml">a</mi><mo id="alg1.l11.m1.3.3.3" stretchy="false" xref="alg1.l11.m1.3.3.3.cmml">←</mo><mrow id="alg1.l11.m1.3.3.2" xref="alg1.l11.m1.3.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l11.m1.3.3.2.4" xref="alg1.l11.m1.3.3.2.4.cmml">ℳ</mi><mo id="alg1.l11.m1.3.3.2.3" xref="alg1.l11.m1.3.3.2.3.cmml">⁢</mo><mrow id="alg1.l11.m1.3.3.2.2.2" xref="alg1.l11.m1.3.3.2.2.3.cmml"><mo id="alg1.l11.m1.3.3.2.2.2.3" stretchy="false" xref="alg1.l11.m1.3.3.2.2.3.cmml">(</mo><msub id="alg1.l11.m1.2.2.1.1.1.1" xref="alg1.l11.m1.2.2.1.1.1.1.cmml"><mi id="alg1.l11.m1.2.2.1.1.1.1.2" xref="alg1.l11.m1.2.2.1.1.1.1.2.cmml">p</mi><mrow id="alg1.l11.m1.2.2.1.1.1.1.3" xref="alg1.l11.m1.2.2.1.1.1.1.3.cmml"><mi id="alg1.l11.m1.2.2.1.1.1.1.3.2" xref="alg1.l11.m1.2.2.1.1.1.1.3.2.cmml">a</mi><mo id="alg1.l11.m1.2.2.1.1.1.1.3.1" xref="alg1.l11.m1.2.2.1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l11.m1.2.2.1.1.1.1.3.3" xref="alg1.l11.m1.2.2.1.1.1.1.3.3.cmml">n</mi><mo id="alg1.l11.m1.2.2.1.1.1.1.3.1a" xref="alg1.l11.m1.2.2.1.1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l11.m1.2.2.1.1.1.1.3.4" xref="alg1.l11.m1.2.2.1.1.1.1.3.4.cmml">s</mi></mrow></msub><mo id="alg1.l11.m1.3.3.2.2.2.4" xref="alg1.l11.m1.3.3.2.2.3.cmml">,</mo><mi id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml">q</mi><mo id="alg1.l11.m1.3.3.2.2.2.5" xref="alg1.l11.m1.3.3.2.2.3.cmml">,</mo><mrow id="alg1.l11.m1.3.3.2.2.2.2.2" xref="alg1.l11.m1.3.3.2.2.2.2.3.cmml"><mo id="alg1.l11.m1.3.3.2.2.2.2.2.3" stretchy="false" xref="alg1.l11.m1.3.3.2.2.2.2.3.cmml">⟨</mo><msub id="alg1.l11.m1.3.3.2.2.2.2.1.1" xref="alg1.l11.m1.3.3.2.2.2.2.1.1.cmml"><mi id="alg1.l11.m1.3.3.2.2.2.2.1.1.2" xref="alg1.l11.m1.3.3.2.2.2.2.1.1.2.cmml">D</mi><mn id="alg1.l11.m1.3.3.2.2.2.2.1.1.3" xref="alg1.l11.m1.3.3.2.2.2.2.1.1.3.cmml">0</mn></msub><mo id="alg1.l11.m1.3.3.2.2.2.2.2.4" xref="alg1.l11.m1.3.3.2.2.2.2.3.cmml">,</mo><msub id="alg1.l11.m1.3.3.2.2.2.2.2.2" xref="alg1.l11.m1.3.3.2.2.2.2.2.2.cmml"><mi id="alg1.l11.m1.3.3.2.2.2.2.2.2.2" xref="alg1.l11.m1.3.3.2.2.2.2.2.2.2.cmml">S</mi><mn id="alg1.l11.m1.3.3.2.2.2.2.2.2.3" xref="alg1.l11.m1.3.3.2.2.2.2.2.2.3.cmml">0</mn></msub><mo id="alg1.l11.m1.3.3.2.2.2.2.2.5" stretchy="false" xref="alg1.l11.m1.3.3.2.2.2.2.3.cmml">⟩</mo></mrow><mo id="alg1.l11.m1.3.3.2.2.2.6" stretchy="false" xref="alg1.l11.m1.3.3.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l11.m1.3b"><apply id="alg1.l11.m1.3.3.cmml" xref="alg1.l11.m1.3.3"><ci id="alg1.l11.m1.3.3.3.cmml" xref="alg1.l11.m1.3.3.3">←</ci><ci id="alg1.l11.m1.3.3.4.cmml" xref="alg1.l11.m1.3.3.4">𝑎</ci><apply id="alg1.l11.m1.3.3.2.cmml" xref="alg1.l11.m1.3.3.2"><times id="alg1.l11.m1.3.3.2.3.cmml" xref="alg1.l11.m1.3.3.2.3"></times><ci id="alg1.l11.m1.3.3.2.4.cmml" xref="alg1.l11.m1.3.3.2.4">ℳ</ci><vector id="alg1.l11.m1.3.3.2.2.3.cmml" xref="alg1.l11.m1.3.3.2.2.2"><apply id="alg1.l11.m1.2.2.1.1.1.1.cmml" xref="alg1.l11.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l11.m1.2.2.1.1.1.1.1.cmml" xref="alg1.l11.m1.2.2.1.1.1.1">subscript</csymbol><ci id="alg1.l11.m1.2.2.1.1.1.1.2.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.2">𝑝</ci><apply id="alg1.l11.m1.2.2.1.1.1.1.3.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3"><times id="alg1.l11.m1.2.2.1.1.1.1.3.1.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3.1"></times><ci id="alg1.l11.m1.2.2.1.1.1.1.3.2.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3.2">𝑎</ci><ci id="alg1.l11.m1.2.2.1.1.1.1.3.3.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3.3">𝑛</ci><ci id="alg1.l11.m1.2.2.1.1.1.1.3.4.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3.4">𝑠</ci></apply></apply><ci id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1">𝑞</ci><list id="alg1.l11.m1.3.3.2.2.2.2.3.cmml" xref="alg1.l11.m1.3.3.2.2.2.2.2"><apply id="alg1.l11.m1.3.3.2.2.2.2.1.1.cmml" xref="alg1.l11.m1.3.3.2.2.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l11.m1.3.3.2.2.2.2.1.1.1.cmml" xref="alg1.l11.m1.3.3.2.2.2.2.1.1">subscript</csymbol><ci id="alg1.l11.m1.3.3.2.2.2.2.1.1.2.cmml" xref="alg1.l11.m1.3.3.2.2.2.2.1.1.2">𝐷</ci><cn id="alg1.l11.m1.3.3.2.2.2.2.1.1.3.cmml" type="integer" xref="alg1.l11.m1.3.3.2.2.2.2.1.1.3">0</cn></apply><apply id="alg1.l11.m1.3.3.2.2.2.2.2.2.cmml" xref="alg1.l11.m1.3.3.2.2.2.2.2.2"><csymbol cd="ambiguous" id="alg1.l11.m1.3.3.2.2.2.2.2.2.1.cmml" xref="alg1.l11.m1.3.3.2.2.2.2.2.2">subscript</csymbol><ci id="alg1.l11.m1.3.3.2.2.2.2.2.2.2.cmml" xref="alg1.l11.m1.3.3.2.2.2.2.2.2.2">𝑆</ci><cn id="alg1.l11.m1.3.3.2.2.2.2.2.2.3.cmml" type="integer" xref="alg1.l11.m1.3.3.2.2.2.2.2.2.3">0</cn></apply></list></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m1.3c">a\leftarrow\mathcal{M}(p_{ans},q,\langle D_{0},S_{0}\rangle)</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m1.3d">italic_a ← caligraphic_M ( italic_p start_POSTSUBSCRIPT italic_a italic_n italic_s end_POSTSUBSCRIPT , italic_q , ⟨ italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ⟩ )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l12">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l12.1.1.1" style="font-size:80%;">12:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l12.2">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l12.3">if</span>
</div>
<div class="ltx_listingline" id="alg1.l13">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l13.1.1.1" style="font-size:80%;">13:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l13.2">return</span> <math alttext="a" class="ltx_Math" display="inline" id="alg1.l13.m1.1"><semantics id="alg1.l13.m1.1a"><mi id="alg1.l13.m1.1.1" xref="alg1.l13.m1.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="alg1.l13.m1.1b"><ci id="alg1.l13.m1.1.1.cmml" xref="alg1.l13.m1.1.1">𝑎</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l13.m1.1c">a</annotation><annotation encoding="application/x-llamapun" id="alg1.l13.m1.1d">italic_a</annotation></semantics></math>
</div>
</div>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Adaptive Generation of Internal Knowledge</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">In the first step, we elicit internal knowledge from LLMs. This LLM-internal knowledge, reflecting the consensus from extensive pre-training and instruction-tuning data, can supplement any missing information from the limited set of retrieved passages and enable mutual confirmation between LLM-internal and external knowledge. This is especially valuable when the majority of retrieved passages might be irrelevant or misleading.
Specifically, we prompt LLMs to generate passages based on the given question <math alttext="q" class="ltx_Math" display="inline" id="S3.SS3.p1.1.m1.1"><semantics id="S3.SS3.p1.1.m1.1a"><mi id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><ci id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.1.m1.1d">italic_q</annotation></semantics></math>, following <cite class="ltx_cite ltx_citemacro_citet">Yu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib40" title="">2023a</a>)</cite>. While <cite class="ltx_cite ltx_citemacro_citet">Yu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib40" title="">2023a</a>)</cite> primarily focused on generating diverse internal passages, we emphasize the importance of reliability and trustworthiness of generated passages. To achieve this goal, we enhance the original method with <span class="ltx_text ltx_font_italic" id="S3.SS3.p1.1.1">constitutional principles</span> and <span class="ltx_text ltx_font_italic" id="S3.SS3.p1.1.2">adaptive generation</span>.</p>
</div>
<div class="ltx_para" id="S3.SS3.p2">
<p class="ltx_p" id="S3.SS3.p2.3">Inspired by Constitutional AI <cite class="ltx_cite ltx_citemacro_citep">(Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib2" title="">2022</a>)</cite>, we provide <span class="ltx_text ltx_font_bold" id="S3.SS3.p2.3.1">constitutional principles</span> indicating the desired properties of internal passages in the prompt <math alttext="p_{gen}" class="ltx_Math" display="inline" id="S3.SS3.p2.1.m1.1"><semantics id="S3.SS3.p2.1.m1.1a"><msub id="S3.SS3.p2.1.m1.1.1" xref="S3.SS3.p2.1.m1.1.1.cmml"><mi id="S3.SS3.p2.1.m1.1.1.2" xref="S3.SS3.p2.1.m1.1.1.2.cmml">p</mi><mrow id="S3.SS3.p2.1.m1.1.1.3" xref="S3.SS3.p2.1.m1.1.1.3.cmml"><mi id="S3.SS3.p2.1.m1.1.1.3.2" xref="S3.SS3.p2.1.m1.1.1.3.2.cmml">g</mi><mo id="S3.SS3.p2.1.m1.1.1.3.1" xref="S3.SS3.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.p2.1.m1.1.1.3.3" xref="S3.SS3.p2.1.m1.1.1.3.3.cmml">e</mi><mo id="S3.SS3.p2.1.m1.1.1.3.1a" xref="S3.SS3.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS3.p2.1.m1.1.1.3.4" xref="S3.SS3.p2.1.m1.1.1.3.4.cmml">n</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p2.1.m1.1b"><apply id="S3.SS3.p2.1.m1.1.1.cmml" xref="S3.SS3.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p2.1.m1.1.1.1.cmml" xref="S3.SS3.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.p2.1.m1.1.1.2.cmml" xref="S3.SS3.p2.1.m1.1.1.2">𝑝</ci><apply id="S3.SS3.p2.1.m1.1.1.3.cmml" xref="S3.SS3.p2.1.m1.1.1.3"><times id="S3.SS3.p2.1.m1.1.1.3.1.cmml" xref="S3.SS3.p2.1.m1.1.1.3.1"></times><ci id="S3.SS3.p2.1.m1.1.1.3.2.cmml" xref="S3.SS3.p2.1.m1.1.1.3.2">𝑔</ci><ci id="S3.SS3.p2.1.m1.1.1.3.3.cmml" xref="S3.SS3.p2.1.m1.1.1.3.3">𝑒</ci><ci id="S3.SS3.p2.1.m1.1.1.3.4.cmml" xref="S3.SS3.p2.1.m1.1.1.3.4">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p2.1.m1.1c">p_{gen}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p2.1.m1.1d">italic_p start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT</annotation></semantics></math> (see Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#A1" title="Appendix A Prompt Template for Astute RAG ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">A</span></a> for details) to guide their generation, emphasizing that the generated passages should be accurate, relevant, and hallucination-free. Moreover, we allow the LLM to perform <span class="ltx_text ltx_font_bold" id="S3.SS3.p2.3.2">adaptive generation</span> of passages in its internal knowledge. The LLM can decide how many passages to generate by itself. Rather generating a fix number of passages, we request the LLM to generate at most <math alttext="\hat{m}" class="ltx_Math" display="inline" id="S3.SS3.p2.2.m2.1"><semantics id="S3.SS3.p2.2.m2.1a"><mover accent="true" id="S3.SS3.p2.2.m2.1.1" xref="S3.SS3.p2.2.m2.1.1.cmml"><mi id="S3.SS3.p2.2.m2.1.1.2" xref="S3.SS3.p2.2.m2.1.1.2.cmml">m</mi><mo id="S3.SS3.p2.2.m2.1.1.1" xref="S3.SS3.p2.2.m2.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS3.p2.2.m2.1b"><apply id="S3.SS3.p2.2.m2.1.1.cmml" xref="S3.SS3.p2.2.m2.1.1"><ci id="S3.SS3.p2.2.m2.1.1.1.cmml" xref="S3.SS3.p2.2.m2.1.1.1">^</ci><ci id="S3.SS3.p2.2.m2.1.1.2.cmml" xref="S3.SS3.p2.2.m2.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p2.2.m2.1c">\hat{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p2.2.m2.1d">over^ start_ARG italic_m end_ARG</annotation></semantics></math> passages, each covering distinct information, and to directly indicate if no more reliable information is available. This adaptive approach allows the LLM to generate fewer passages (or even no passages at all) when the useful information within internal knowledge is limited and more passages when there are multiple feasible answers in the internal knowledge. In this step, the LLM generates <math alttext="m\leq\hat{m}" class="ltx_Math" display="inline" id="S3.SS3.p2.3.m3.1"><semantics id="S3.SS3.p2.3.m3.1a"><mrow id="S3.SS3.p2.3.m3.1.1" xref="S3.SS3.p2.3.m3.1.1.cmml"><mi id="S3.SS3.p2.3.m3.1.1.2" xref="S3.SS3.p2.3.m3.1.1.2.cmml">m</mi><mo id="S3.SS3.p2.3.m3.1.1.1" xref="S3.SS3.p2.3.m3.1.1.1.cmml">≤</mo><mover accent="true" id="S3.SS3.p2.3.m3.1.1.3" xref="S3.SS3.p2.3.m3.1.1.3.cmml"><mi id="S3.SS3.p2.3.m3.1.1.3.2" xref="S3.SS3.p2.3.m3.1.1.3.2.cmml">m</mi><mo id="S3.SS3.p2.3.m3.1.1.3.1" xref="S3.SS3.p2.3.m3.1.1.3.1.cmml">^</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p2.3.m3.1b"><apply id="S3.SS3.p2.3.m3.1.1.cmml" xref="S3.SS3.p2.3.m3.1.1"><leq id="S3.SS3.p2.3.m3.1.1.1.cmml" xref="S3.SS3.p2.3.m3.1.1.1"></leq><ci id="S3.SS3.p2.3.m3.1.1.2.cmml" xref="S3.SS3.p2.3.m3.1.1.2">𝑚</ci><apply id="S3.SS3.p2.3.m3.1.1.3.cmml" xref="S3.SS3.p2.3.m3.1.1.3"><ci id="S3.SS3.p2.3.m3.1.1.3.1.cmml" xref="S3.SS3.p2.3.m3.1.1.3.1">^</ci><ci id="S3.SS3.p2.3.m3.1.1.3.2.cmml" xref="S3.SS3.p2.3.m3.1.1.3.2">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p2.3.m3.1c">m\leq\hat{m}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p2.3.m3.1d">italic_m ≤ over^ start_ARG italic_m end_ARG</annotation></semantics></math> passages based on its internal knowledge:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.Ex2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="I=[i_{1},\ldots i_{m}]=\mathcal{M}(p_{gen},q,\hat{m})." class="ltx_Math" display="block" id="S3.Ex2.m1.3"><semantics id="S3.Ex2.m1.3a"><mrow id="S3.Ex2.m1.3.3.1" xref="S3.Ex2.m1.3.3.1.1.cmml"><mrow id="S3.Ex2.m1.3.3.1.1" xref="S3.Ex2.m1.3.3.1.1.cmml"><mi id="S3.Ex2.m1.3.3.1.1.5" xref="S3.Ex2.m1.3.3.1.1.5.cmml">I</mi><mo id="S3.Ex2.m1.3.3.1.1.6" xref="S3.Ex2.m1.3.3.1.1.6.cmml">=</mo><mrow id="S3.Ex2.m1.3.3.1.1.2.2" xref="S3.Ex2.m1.3.3.1.1.2.3.cmml"><mo id="S3.Ex2.m1.3.3.1.1.2.2.3" stretchy="false" xref="S3.Ex2.m1.3.3.1.1.2.3.cmml">[</mo><msub id="S3.Ex2.m1.3.3.1.1.1.1.1" xref="S3.Ex2.m1.3.3.1.1.1.1.1.cmml"><mi id="S3.Ex2.m1.3.3.1.1.1.1.1.2" xref="S3.Ex2.m1.3.3.1.1.1.1.1.2.cmml">i</mi><mn id="S3.Ex2.m1.3.3.1.1.1.1.1.3" xref="S3.Ex2.m1.3.3.1.1.1.1.1.3.cmml">1</mn></msub><mo id="S3.Ex2.m1.3.3.1.1.2.2.4" xref="S3.Ex2.m1.3.3.1.1.2.3.cmml">,</mo><mrow id="S3.Ex2.m1.3.3.1.1.2.2.2" xref="S3.Ex2.m1.3.3.1.1.2.2.2.cmml"><mi id="S3.Ex2.m1.3.3.1.1.2.2.2.2" mathvariant="normal" xref="S3.Ex2.m1.3.3.1.1.2.2.2.2.cmml">…</mi><mo id="S3.Ex2.m1.3.3.1.1.2.2.2.1" xref="S3.Ex2.m1.3.3.1.1.2.2.2.1.cmml">⁢</mo><msub id="S3.Ex2.m1.3.3.1.1.2.2.2.3" xref="S3.Ex2.m1.3.3.1.1.2.2.2.3.cmml"><mi id="S3.Ex2.m1.3.3.1.1.2.2.2.3.2" xref="S3.Ex2.m1.3.3.1.1.2.2.2.3.2.cmml">i</mi><mi id="S3.Ex2.m1.3.3.1.1.2.2.2.3.3" xref="S3.Ex2.m1.3.3.1.1.2.2.2.3.3.cmml">m</mi></msub></mrow><mo id="S3.Ex2.m1.3.3.1.1.2.2.5" stretchy="false" xref="S3.Ex2.m1.3.3.1.1.2.3.cmml">]</mo></mrow><mo id="S3.Ex2.m1.3.3.1.1.7" xref="S3.Ex2.m1.3.3.1.1.7.cmml">=</mo><mrow id="S3.Ex2.m1.3.3.1.1.3" xref="S3.Ex2.m1.3.3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.Ex2.m1.3.3.1.1.3.3" xref="S3.Ex2.m1.3.3.1.1.3.3.cmml">ℳ</mi><mo id="S3.Ex2.m1.3.3.1.1.3.2" xref="S3.Ex2.m1.3.3.1.1.3.2.cmml">⁢</mo><mrow id="S3.Ex2.m1.3.3.1.1.3.1.1" xref="S3.Ex2.m1.3.3.1.1.3.1.2.cmml"><mo id="S3.Ex2.m1.3.3.1.1.3.1.1.2" stretchy="false" xref="S3.Ex2.m1.3.3.1.1.3.1.2.cmml">(</mo><msub id="S3.Ex2.m1.3.3.1.1.3.1.1.1" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.cmml"><mi id="S3.Ex2.m1.3.3.1.1.3.1.1.1.2" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.2.cmml">p</mi><mrow id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.cmml"><mi id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.2" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.2.cmml">g</mi><mo id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.1" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.1.cmml">⁢</mo><mi id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.3" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.3.cmml">e</mi><mo id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.1a" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.1.cmml">⁢</mo><mi id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.4" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.4.cmml">n</mi></mrow></msub><mo id="S3.Ex2.m1.3.3.1.1.3.1.1.3" xref="S3.Ex2.m1.3.3.1.1.3.1.2.cmml">,</mo><mi id="S3.Ex2.m1.1.1" xref="S3.Ex2.m1.1.1.cmml">q</mi><mo id="S3.Ex2.m1.3.3.1.1.3.1.1.4" xref="S3.Ex2.m1.3.3.1.1.3.1.2.cmml">,</mo><mover accent="true" id="S3.Ex2.m1.2.2" xref="S3.Ex2.m1.2.2.cmml"><mi id="S3.Ex2.m1.2.2.2" xref="S3.Ex2.m1.2.2.2.cmml">m</mi><mo id="S3.Ex2.m1.2.2.1" xref="S3.Ex2.m1.2.2.1.cmml">^</mo></mover><mo id="S3.Ex2.m1.3.3.1.1.3.1.1.5" stretchy="false" xref="S3.Ex2.m1.3.3.1.1.3.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S3.Ex2.m1.3.3.1.2" lspace="0em" xref="S3.Ex2.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex2.m1.3b"><apply id="S3.Ex2.m1.3.3.1.1.cmml" xref="S3.Ex2.m1.3.3.1"><and id="S3.Ex2.m1.3.3.1.1a.cmml" xref="S3.Ex2.m1.3.3.1"></and><apply id="S3.Ex2.m1.3.3.1.1b.cmml" xref="S3.Ex2.m1.3.3.1"><eq id="S3.Ex2.m1.3.3.1.1.6.cmml" xref="S3.Ex2.m1.3.3.1.1.6"></eq><ci id="S3.Ex2.m1.3.3.1.1.5.cmml" xref="S3.Ex2.m1.3.3.1.1.5">𝐼</ci><interval closure="closed" id="S3.Ex2.m1.3.3.1.1.2.3.cmml" xref="S3.Ex2.m1.3.3.1.1.2.2"><apply id="S3.Ex2.m1.3.3.1.1.1.1.1.cmml" xref="S3.Ex2.m1.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex2.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.Ex2.m1.3.3.1.1.1.1.1">subscript</csymbol><ci id="S3.Ex2.m1.3.3.1.1.1.1.1.2.cmml" xref="S3.Ex2.m1.3.3.1.1.1.1.1.2">𝑖</ci><cn id="S3.Ex2.m1.3.3.1.1.1.1.1.3.cmml" type="integer" xref="S3.Ex2.m1.3.3.1.1.1.1.1.3">1</cn></apply><apply id="S3.Ex2.m1.3.3.1.1.2.2.2.cmml" xref="S3.Ex2.m1.3.3.1.1.2.2.2"><times id="S3.Ex2.m1.3.3.1.1.2.2.2.1.cmml" xref="S3.Ex2.m1.3.3.1.1.2.2.2.1"></times><ci id="S3.Ex2.m1.3.3.1.1.2.2.2.2.cmml" xref="S3.Ex2.m1.3.3.1.1.2.2.2.2">…</ci><apply id="S3.Ex2.m1.3.3.1.1.2.2.2.3.cmml" xref="S3.Ex2.m1.3.3.1.1.2.2.2.3"><csymbol cd="ambiguous" id="S3.Ex2.m1.3.3.1.1.2.2.2.3.1.cmml" xref="S3.Ex2.m1.3.3.1.1.2.2.2.3">subscript</csymbol><ci id="S3.Ex2.m1.3.3.1.1.2.2.2.3.2.cmml" xref="S3.Ex2.m1.3.3.1.1.2.2.2.3.2">𝑖</ci><ci id="S3.Ex2.m1.3.3.1.1.2.2.2.3.3.cmml" xref="S3.Ex2.m1.3.3.1.1.2.2.2.3.3">𝑚</ci></apply></apply></interval></apply><apply id="S3.Ex2.m1.3.3.1.1c.cmml" xref="S3.Ex2.m1.3.3.1"><eq id="S3.Ex2.m1.3.3.1.1.7.cmml" xref="S3.Ex2.m1.3.3.1.1.7"></eq><share href="https://arxiv.org/html/2410.07176v1#S3.Ex2.m1.3.3.1.1.2.cmml" id="S3.Ex2.m1.3.3.1.1d.cmml" xref="S3.Ex2.m1.3.3.1"></share><apply id="S3.Ex2.m1.3.3.1.1.3.cmml" xref="S3.Ex2.m1.3.3.1.1.3"><times id="S3.Ex2.m1.3.3.1.1.3.2.cmml" xref="S3.Ex2.m1.3.3.1.1.3.2"></times><ci id="S3.Ex2.m1.3.3.1.1.3.3.cmml" xref="S3.Ex2.m1.3.3.1.1.3.3">ℳ</ci><vector id="S3.Ex2.m1.3.3.1.1.3.1.2.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1"><apply id="S3.Ex2.m1.3.3.1.1.3.1.1.1.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1"><csymbol cd="ambiguous" id="S3.Ex2.m1.3.3.1.1.3.1.1.1.1.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1">subscript</csymbol><ci id="S3.Ex2.m1.3.3.1.1.3.1.1.1.2.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.2">𝑝</ci><apply id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3"><times id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.1.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.1"></times><ci id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.2.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.2">𝑔</ci><ci id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.3.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.3">𝑒</ci><ci id="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.4.cmml" xref="S3.Ex2.m1.3.3.1.1.3.1.1.1.3.4">𝑛</ci></apply></apply><ci id="S3.Ex2.m1.1.1.cmml" xref="S3.Ex2.m1.1.1">𝑞</ci><apply id="S3.Ex2.m1.2.2.cmml" xref="S3.Ex2.m1.2.2"><ci id="S3.Ex2.m1.2.2.1.cmml" xref="S3.Ex2.m1.2.2.1">^</ci><ci id="S3.Ex2.m1.2.2.2.cmml" xref="S3.Ex2.m1.2.2.2">𝑚</ci></apply></vector></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex2.m1.3c">I=[i_{1},\ldots i_{m}]=\mathcal{M}(p_{gen},q,\hat{m}).</annotation><annotation encoding="application/x-llamapun" id="S3.Ex2.m1.3d">italic_I = [ italic_i start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , … italic_i start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT ] = caligraphic_M ( italic_p start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT , italic_q , over^ start_ARG italic_m end_ARG ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Iterative Source-aware Knowledge Consolidation</h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">In the second step, we employ the LLM to explicitly consolidate information from both passages generated from its internal knowledge and passages retrieved from external sources.
Initially, we combine passages from both internal and external knowledge sources <math alttext="D_{0}=E\oplus I." class="ltx_Math" display="inline" id="S3.SS4.p1.1.m1.1"><semantics id="S3.SS4.p1.1.m1.1a"><mrow id="S3.SS4.p1.1.m1.1.1.1" xref="S3.SS4.p1.1.m1.1.1.1.1.cmml"><mrow id="S3.SS4.p1.1.m1.1.1.1.1" xref="S3.SS4.p1.1.m1.1.1.1.1.cmml"><msub id="S3.SS4.p1.1.m1.1.1.1.1.2" xref="S3.SS4.p1.1.m1.1.1.1.1.2.cmml"><mi id="S3.SS4.p1.1.m1.1.1.1.1.2.2" xref="S3.SS4.p1.1.m1.1.1.1.1.2.2.cmml">D</mi><mn id="S3.SS4.p1.1.m1.1.1.1.1.2.3" xref="S3.SS4.p1.1.m1.1.1.1.1.2.3.cmml">0</mn></msub><mo id="S3.SS4.p1.1.m1.1.1.1.1.1" xref="S3.SS4.p1.1.m1.1.1.1.1.1.cmml">=</mo><mrow id="S3.SS4.p1.1.m1.1.1.1.1.3" xref="S3.SS4.p1.1.m1.1.1.1.1.3.cmml"><mi id="S3.SS4.p1.1.m1.1.1.1.1.3.2" xref="S3.SS4.p1.1.m1.1.1.1.1.3.2.cmml">E</mi><mo id="S3.SS4.p1.1.m1.1.1.1.1.3.1" xref="S3.SS4.p1.1.m1.1.1.1.1.3.1.cmml">⊕</mo><mi id="S3.SS4.p1.1.m1.1.1.1.1.3.3" xref="S3.SS4.p1.1.m1.1.1.1.1.3.3.cmml">I</mi></mrow></mrow><mo id="S3.SS4.p1.1.m1.1.1.1.2" lspace="0em" xref="S3.SS4.p1.1.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.1.m1.1b"><apply id="S3.SS4.p1.1.m1.1.1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1.1"><eq id="S3.SS4.p1.1.m1.1.1.1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1.1.1.1"></eq><apply id="S3.SS4.p1.1.m1.1.1.1.1.2.cmml" xref="S3.SS4.p1.1.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.p1.1.m1.1.1.1.1.2.1.cmml" xref="S3.SS4.p1.1.m1.1.1.1.1.2">subscript</csymbol><ci id="S3.SS4.p1.1.m1.1.1.1.1.2.2.cmml" xref="S3.SS4.p1.1.m1.1.1.1.1.2.2">𝐷</ci><cn id="S3.SS4.p1.1.m1.1.1.1.1.2.3.cmml" type="integer" xref="S3.SS4.p1.1.m1.1.1.1.1.2.3">0</cn></apply><apply id="S3.SS4.p1.1.m1.1.1.1.1.3.cmml" xref="S3.SS4.p1.1.m1.1.1.1.1.3"><csymbol cd="latexml" id="S3.SS4.p1.1.m1.1.1.1.1.3.1.cmml" xref="S3.SS4.p1.1.m1.1.1.1.1.3.1">direct-sum</csymbol><ci id="S3.SS4.p1.1.m1.1.1.1.1.3.2.cmml" xref="S3.SS4.p1.1.m1.1.1.1.1.3.2">𝐸</ci><ci id="S3.SS4.p1.1.m1.1.1.1.1.3.3.cmml" xref="S3.SS4.p1.1.m1.1.1.1.1.3.3">𝐼</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.1.m1.1c">D_{0}=E\oplus I.</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p1.1.m1.1d">italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT = italic_E ⊕ italic_I .</annotation></semantics></math></p>
</div>
<div class="ltx_para" id="S3.SS4.p2">
<p class="ltx_p" id="S3.SS4.p2.1">We additionally ensure <span class="ltx_text ltx_font_bold" id="S3.SS4.p2.1.1">source-awareness</span> by providing the source of each passage to LLMs when consolidating knowledge. The source information (internal or external, such as a website) is helpful in assessing the reliability of passages. Here, we provide the passage source as
<math alttext="S_{0}=[\mathbbm{1}_{\{d\in E\}}\text{for}\ d\ \text{in}\ D_{0}]." class="ltx_Math" display="inline" id="S3.SS4.p2.1.m1.2"><semantics id="S3.SS4.p2.1.m1.2a"><mrow id="S3.SS4.p2.1.m1.2.2.1" xref="S3.SS4.p2.1.m1.2.2.1.1.cmml"><mrow id="S3.SS4.p2.1.m1.2.2.1.1" xref="S3.SS4.p2.1.m1.2.2.1.1.cmml"><msub id="S3.SS4.p2.1.m1.2.2.1.1.3" xref="S3.SS4.p2.1.m1.2.2.1.1.3.cmml"><mi id="S3.SS4.p2.1.m1.2.2.1.1.3.2" xref="S3.SS4.p2.1.m1.2.2.1.1.3.2.cmml">S</mi><mn id="S3.SS4.p2.1.m1.2.2.1.1.3.3" xref="S3.SS4.p2.1.m1.2.2.1.1.3.3.cmml">0</mn></msub><mo id="S3.SS4.p2.1.m1.2.2.1.1.2" xref="S3.SS4.p2.1.m1.2.2.1.1.2.cmml">=</mo><mrow id="S3.SS4.p2.1.m1.2.2.1.1.1.1" xref="S3.SS4.p2.1.m1.2.2.1.1.1.2.cmml"><mo id="S3.SS4.p2.1.m1.2.2.1.1.1.1.2" stretchy="false" xref="S3.SS4.p2.1.m1.2.2.1.1.1.2.1.cmml">[</mo><mrow id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.cmml"><msub id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2.cmml"><mn id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2.2" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2.2.cmml">𝟙</mn><mrow id="S3.SS4.p2.1.m1.1.1.1.1" xref="S3.SS4.p2.1.m1.1.1.1.2.cmml"><mo id="S3.SS4.p2.1.m1.1.1.1.1.2" stretchy="false" xref="S3.SS4.p2.1.m1.1.1.1.2.cmml">{</mo><mrow id="S3.SS4.p2.1.m1.1.1.1.1.1" xref="S3.SS4.p2.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS4.p2.1.m1.1.1.1.1.1.2" xref="S3.SS4.p2.1.m1.1.1.1.1.1.2.cmml">d</mi><mo id="S3.SS4.p2.1.m1.1.1.1.1.1.1" xref="S3.SS4.p2.1.m1.1.1.1.1.1.1.cmml">∈</mo><mi id="S3.SS4.p2.1.m1.1.1.1.1.1.3" xref="S3.SS4.p2.1.m1.1.1.1.1.1.3.cmml">E</mi></mrow><mo id="S3.SS4.p2.1.m1.1.1.1.1.3" stretchy="false" xref="S3.SS4.p2.1.m1.1.1.1.2.cmml">}</mo></mrow></msub><mo id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1.cmml">⁢</mo><mtext id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.3" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.3a.cmml">for</mtext><mo id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1a" lspace="0.500em" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1.cmml">⁢</mo><mi id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.4" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.4.cmml">d</mi><mo id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1b" lspace="0.500em" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1.cmml">⁢</mo><mtext id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.5" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.5a.cmml">in</mtext><mo id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1c" lspace="0.500em" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1.cmml">⁢</mo><msub id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.cmml"><mi id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.2" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.2.cmml">D</mi><mn id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.3" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.3.cmml">0</mn></msub></mrow><mo id="S3.SS4.p2.1.m1.2.2.1.1.1.1.3" stretchy="false" xref="S3.SS4.p2.1.m1.2.2.1.1.1.2.1.cmml">]</mo></mrow></mrow><mo id="S3.SS4.p2.1.m1.2.2.1.2" lspace="0em" xref="S3.SS4.p2.1.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.1.m1.2b"><apply id="S3.SS4.p2.1.m1.2.2.1.1.cmml" xref="S3.SS4.p2.1.m1.2.2.1"><eq id="S3.SS4.p2.1.m1.2.2.1.1.2.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.2"></eq><apply id="S3.SS4.p2.1.m1.2.2.1.1.3.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.3"><csymbol cd="ambiguous" id="S3.SS4.p2.1.m1.2.2.1.1.3.1.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.3">subscript</csymbol><ci id="S3.SS4.p2.1.m1.2.2.1.1.3.2.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.3.2">𝑆</ci><cn id="S3.SS4.p2.1.m1.2.2.1.1.3.3.cmml" type="integer" xref="S3.SS4.p2.1.m1.2.2.1.1.3.3">0</cn></apply><apply id="S3.SS4.p2.1.m1.2.2.1.1.1.2.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1"><csymbol cd="latexml" id="S3.SS4.p2.1.m1.2.2.1.1.1.2.1.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.2">delimited-[]</csymbol><apply id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1"><times id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.1"></times><apply id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2.1.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2">subscript</csymbol><cn id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2.2.cmml" type="integer" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.2.2">1</cn><set id="S3.SS4.p2.1.m1.1.1.1.2.cmml" xref="S3.SS4.p2.1.m1.1.1.1.1"><apply id="S3.SS4.p2.1.m1.1.1.1.1.1.cmml" xref="S3.SS4.p2.1.m1.1.1.1.1.1"><in id="S3.SS4.p2.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS4.p2.1.m1.1.1.1.1.1.1"></in><ci id="S3.SS4.p2.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS4.p2.1.m1.1.1.1.1.1.2">𝑑</ci><ci id="S3.SS4.p2.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS4.p2.1.m1.1.1.1.1.1.3">𝐸</ci></apply></set></apply><ci id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.3a.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.3"><mtext id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.3.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.3">for</mtext></ci><ci id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.4.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.4">𝑑</ci><ci id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.5a.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.5"><mtext id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.5.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.5">in</mtext></ci><apply id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6"><csymbol cd="ambiguous" id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.1.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6">subscript</csymbol><ci id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.2.cmml" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.2">𝐷</ci><cn id="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.3.cmml" type="integer" xref="S3.SS4.p2.1.m1.2.2.1.1.1.1.1.6.3">0</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.1.m1.2c">S_{0}=[\mathbbm{1}_{\{d\in E\}}\text{for}\ d\ \text{in}\ D_{0}].</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p2.1.m1.2d">italic_S start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT = [ blackboard_1 start_POSTSUBSCRIPT { italic_d ∈ italic_E } end_POSTSUBSCRIPT for italic_d in italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ] .</annotation></semantics></math></p>
</div>
<div class="ltx_para" id="S3.SS4.p3">
<p class="ltx_p" id="S3.SS4.p3.1">To consolidate knowledge, we prompt the LLM (with <math alttext="p_{con}" class="ltx_Math" display="inline" id="S3.SS4.p3.1.m1.1"><semantics id="S3.SS4.p3.1.m1.1a"><msub id="S3.SS4.p3.1.m1.1.1" xref="S3.SS4.p3.1.m1.1.1.cmml"><mi id="S3.SS4.p3.1.m1.1.1.2" xref="S3.SS4.p3.1.m1.1.1.2.cmml">p</mi><mrow id="S3.SS4.p3.1.m1.1.1.3" xref="S3.SS4.p3.1.m1.1.1.3.cmml"><mi id="S3.SS4.p3.1.m1.1.1.3.2" xref="S3.SS4.p3.1.m1.1.1.3.2.cmml">c</mi><mo id="S3.SS4.p3.1.m1.1.1.3.1" xref="S3.SS4.p3.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS4.p3.1.m1.1.1.3.3" xref="S3.SS4.p3.1.m1.1.1.3.3.cmml">o</mi><mo id="S3.SS4.p3.1.m1.1.1.3.1a" xref="S3.SS4.p3.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS4.p3.1.m1.1.1.3.4" xref="S3.SS4.p3.1.m1.1.1.3.4.cmml">n</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.1.m1.1b"><apply id="S3.SS4.p3.1.m1.1.1.cmml" xref="S3.SS4.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.1.m1.1.1.1.cmml" xref="S3.SS4.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.p3.1.m1.1.1.2.cmml" xref="S3.SS4.p3.1.m1.1.1.2">𝑝</ci><apply id="S3.SS4.p3.1.m1.1.1.3.cmml" xref="S3.SS4.p3.1.m1.1.1.3"><times id="S3.SS4.p3.1.m1.1.1.3.1.cmml" xref="S3.SS4.p3.1.m1.1.1.3.1"></times><ci id="S3.SS4.p3.1.m1.1.1.3.2.cmml" xref="S3.SS4.p3.1.m1.1.1.3.2">𝑐</ci><ci id="S3.SS4.p3.1.m1.1.1.3.3.cmml" xref="S3.SS4.p3.1.m1.1.1.3.3">𝑜</ci><ci id="S3.SS4.p3.1.m1.1.1.3.4.cmml" xref="S3.SS4.p3.1.m1.1.1.3.4">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.1.m1.1c">p_{con}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.1.m1.1d">italic_p start_POSTSUBSCRIPT italic_c italic_o italic_n end_POSTSUBSCRIPT</annotation></semantics></math> in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#A1" title="Appendix A Prompt Template for Astute RAG ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">A</span></a>) to identify consistent information across passages, detect conflicting information between each group of consistent passages, and filter out irrelevant information. This step would regroup the unreliable knowledge in input passages into fewer refined passages.
The regrouped passages will also attribute their source to the corresponding one or more input passages</p>
<table class="ltx_equation ltx_eqn_table" id="S3.Ex3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\langle D_{j+1},S_{j+1}\rangle=\mathcal{M}(p_{con},q,\langle D_{0},S_{0}%
\rangle,\langle D_{j},S_{j}\rangle)." class="ltx_Math" display="block" id="S3.Ex3.m1.2"><semantics id="S3.Ex3.m1.2a"><mrow id="S3.Ex3.m1.2.2.1" xref="S3.Ex3.m1.2.2.1.1.cmml"><mrow id="S3.Ex3.m1.2.2.1.1" xref="S3.Ex3.m1.2.2.1.1.cmml"><mrow id="S3.Ex3.m1.2.2.1.1.2.2" xref="S3.Ex3.m1.2.2.1.1.2.3.cmml"><mo id="S3.Ex3.m1.2.2.1.1.2.2.3" stretchy="false" xref="S3.Ex3.m1.2.2.1.1.2.3.cmml">⟨</mo><msub id="S3.Ex3.m1.2.2.1.1.1.1.1" xref="S3.Ex3.m1.2.2.1.1.1.1.1.cmml"><mi id="S3.Ex3.m1.2.2.1.1.1.1.1.2" xref="S3.Ex3.m1.2.2.1.1.1.1.1.2.cmml">D</mi><mrow id="S3.Ex3.m1.2.2.1.1.1.1.1.3" xref="S3.Ex3.m1.2.2.1.1.1.1.1.3.cmml"><mi id="S3.Ex3.m1.2.2.1.1.1.1.1.3.2" xref="S3.Ex3.m1.2.2.1.1.1.1.1.3.2.cmml">j</mi><mo id="S3.Ex3.m1.2.2.1.1.1.1.1.3.1" xref="S3.Ex3.m1.2.2.1.1.1.1.1.3.1.cmml">+</mo><mn id="S3.Ex3.m1.2.2.1.1.1.1.1.3.3" xref="S3.Ex3.m1.2.2.1.1.1.1.1.3.3.cmml">1</mn></mrow></msub><mo id="S3.Ex3.m1.2.2.1.1.2.2.4" xref="S3.Ex3.m1.2.2.1.1.2.3.cmml">,</mo><msub id="S3.Ex3.m1.2.2.1.1.2.2.2" xref="S3.Ex3.m1.2.2.1.1.2.2.2.cmml"><mi id="S3.Ex3.m1.2.2.1.1.2.2.2.2" xref="S3.Ex3.m1.2.2.1.1.2.2.2.2.cmml">S</mi><mrow id="S3.Ex3.m1.2.2.1.1.2.2.2.3" xref="S3.Ex3.m1.2.2.1.1.2.2.2.3.cmml"><mi id="S3.Ex3.m1.2.2.1.1.2.2.2.3.2" xref="S3.Ex3.m1.2.2.1.1.2.2.2.3.2.cmml">j</mi><mo id="S3.Ex3.m1.2.2.1.1.2.2.2.3.1" xref="S3.Ex3.m1.2.2.1.1.2.2.2.3.1.cmml">+</mo><mn id="S3.Ex3.m1.2.2.1.1.2.2.2.3.3" xref="S3.Ex3.m1.2.2.1.1.2.2.2.3.3.cmml">1</mn></mrow></msub><mo id="S3.Ex3.m1.2.2.1.1.2.2.5" stretchy="false" xref="S3.Ex3.m1.2.2.1.1.2.3.cmml">⟩</mo></mrow><mo id="S3.Ex3.m1.2.2.1.1.6" xref="S3.Ex3.m1.2.2.1.1.6.cmml">=</mo><mrow id="S3.Ex3.m1.2.2.1.1.5" xref="S3.Ex3.m1.2.2.1.1.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.Ex3.m1.2.2.1.1.5.5" xref="S3.Ex3.m1.2.2.1.1.5.5.cmml">ℳ</mi><mo id="S3.Ex3.m1.2.2.1.1.5.4" xref="S3.Ex3.m1.2.2.1.1.5.4.cmml">⁢</mo><mrow id="S3.Ex3.m1.2.2.1.1.5.3.3" xref="S3.Ex3.m1.2.2.1.1.5.3.4.cmml"><mo id="S3.Ex3.m1.2.2.1.1.5.3.3.4" stretchy="false" xref="S3.Ex3.m1.2.2.1.1.5.3.4.cmml">(</mo><msub id="S3.Ex3.m1.2.2.1.1.3.1.1.1" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.cmml"><mi id="S3.Ex3.m1.2.2.1.1.3.1.1.1.2" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.2.cmml">p</mi><mrow id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.cmml"><mi id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.2" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.2.cmml">c</mi><mo id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.1" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.1.cmml">⁢</mo><mi id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.3" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.3.cmml">o</mi><mo id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.1a" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.1.cmml">⁢</mo><mi id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.4" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.4.cmml">n</mi></mrow></msub><mo id="S3.Ex3.m1.2.2.1.1.5.3.3.5" xref="S3.Ex3.m1.2.2.1.1.5.3.4.cmml">,</mo><mi id="S3.Ex3.m1.1.1" xref="S3.Ex3.m1.1.1.cmml">q</mi><mo id="S3.Ex3.m1.2.2.1.1.5.3.3.6" xref="S3.Ex3.m1.2.2.1.1.5.3.4.cmml">,</mo><mrow id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.3.cmml"><mo id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.3" stretchy="false" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.3.cmml">⟨</mo><msub id="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.cmml"><mi id="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.2" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.2.cmml">D</mi><mn id="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.3" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.3.cmml">0</mn></msub><mo id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.4" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.3.cmml">,</mo><msub id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.cmml"><mi id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.2" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.2.cmml">S</mi><mn id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.3" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.3.cmml">0</mn></msub><mo id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.5" stretchy="false" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.3.cmml">⟩</mo></mrow><mo id="S3.Ex3.m1.2.2.1.1.5.3.3.7" xref="S3.Ex3.m1.2.2.1.1.5.3.4.cmml">,</mo><mrow id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.3.cmml"><mo id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.3" stretchy="false" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.3.cmml">⟨</mo><msub id="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.cmml"><mi id="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.2" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.2.cmml">D</mi><mi id="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.3" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.3.cmml">j</mi></msub><mo id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.4" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.3.cmml">,</mo><msub id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.cmml"><mi id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.2" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.2.cmml">S</mi><mi id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.3" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.3.cmml">j</mi></msub><mo id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.5" stretchy="false" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.3.cmml">⟩</mo></mrow><mo id="S3.Ex3.m1.2.2.1.1.5.3.3.8" stretchy="false" xref="S3.Ex3.m1.2.2.1.1.5.3.4.cmml">)</mo></mrow></mrow></mrow><mo id="S3.Ex3.m1.2.2.1.2" lspace="0em" xref="S3.Ex3.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex3.m1.2b"><apply id="S3.Ex3.m1.2.2.1.1.cmml" xref="S3.Ex3.m1.2.2.1"><eq id="S3.Ex3.m1.2.2.1.1.6.cmml" xref="S3.Ex3.m1.2.2.1.1.6"></eq><list id="S3.Ex3.m1.2.2.1.1.2.3.cmml" xref="S3.Ex3.m1.2.2.1.1.2.2"><apply id="S3.Ex3.m1.2.2.1.1.1.1.1.cmml" xref="S3.Ex3.m1.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.Ex3.m1.2.2.1.1.1.1.1">subscript</csymbol><ci id="S3.Ex3.m1.2.2.1.1.1.1.1.2.cmml" xref="S3.Ex3.m1.2.2.1.1.1.1.1.2">𝐷</ci><apply id="S3.Ex3.m1.2.2.1.1.1.1.1.3.cmml" xref="S3.Ex3.m1.2.2.1.1.1.1.1.3"><plus id="S3.Ex3.m1.2.2.1.1.1.1.1.3.1.cmml" xref="S3.Ex3.m1.2.2.1.1.1.1.1.3.1"></plus><ci id="S3.Ex3.m1.2.2.1.1.1.1.1.3.2.cmml" xref="S3.Ex3.m1.2.2.1.1.1.1.1.3.2">𝑗</ci><cn id="S3.Ex3.m1.2.2.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.Ex3.m1.2.2.1.1.1.1.1.3.3">1</cn></apply></apply><apply id="S3.Ex3.m1.2.2.1.1.2.2.2.cmml" xref="S3.Ex3.m1.2.2.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.1.1.2.2.2.1.cmml" xref="S3.Ex3.m1.2.2.1.1.2.2.2">subscript</csymbol><ci id="S3.Ex3.m1.2.2.1.1.2.2.2.2.cmml" xref="S3.Ex3.m1.2.2.1.1.2.2.2.2">𝑆</ci><apply id="S3.Ex3.m1.2.2.1.1.2.2.2.3.cmml" xref="S3.Ex3.m1.2.2.1.1.2.2.2.3"><plus id="S3.Ex3.m1.2.2.1.1.2.2.2.3.1.cmml" xref="S3.Ex3.m1.2.2.1.1.2.2.2.3.1"></plus><ci id="S3.Ex3.m1.2.2.1.1.2.2.2.3.2.cmml" xref="S3.Ex3.m1.2.2.1.1.2.2.2.3.2">𝑗</ci><cn id="S3.Ex3.m1.2.2.1.1.2.2.2.3.3.cmml" type="integer" xref="S3.Ex3.m1.2.2.1.1.2.2.2.3.3">1</cn></apply></apply></list><apply id="S3.Ex3.m1.2.2.1.1.5.cmml" xref="S3.Ex3.m1.2.2.1.1.5"><times id="S3.Ex3.m1.2.2.1.1.5.4.cmml" xref="S3.Ex3.m1.2.2.1.1.5.4"></times><ci id="S3.Ex3.m1.2.2.1.1.5.5.cmml" xref="S3.Ex3.m1.2.2.1.1.5.5">ℳ</ci><vector id="S3.Ex3.m1.2.2.1.1.5.3.4.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3"><apply id="S3.Ex3.m1.2.2.1.1.3.1.1.1.cmml" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.1.1.3.1.1.1.1.cmml" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1">subscript</csymbol><ci id="S3.Ex3.m1.2.2.1.1.3.1.1.1.2.cmml" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.2">𝑝</ci><apply id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.cmml" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3"><times id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.1.cmml" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.1"></times><ci id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.2.cmml" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.2">𝑐</ci><ci id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.3.cmml" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.3">𝑜</ci><ci id="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.4.cmml" xref="S3.Ex3.m1.2.2.1.1.3.1.1.1.3.4">𝑛</ci></apply></apply><ci id="S3.Ex3.m1.1.1.cmml" xref="S3.Ex3.m1.1.1">𝑞</ci><list id="S3.Ex3.m1.2.2.1.1.4.2.2.2.3.cmml" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.2"><apply id="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.cmml" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.1.cmml" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1">subscript</csymbol><ci id="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.2.cmml" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.2">𝐷</ci><cn id="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.3.cmml" type="integer" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.1.1.3">0</cn></apply><apply id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.cmml" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.1.cmml" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2">subscript</csymbol><ci id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.2.cmml" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.2">𝑆</ci><cn id="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.3.cmml" type="integer" xref="S3.Ex3.m1.2.2.1.1.4.2.2.2.2.2.3">0</cn></apply></list><list id="S3.Ex3.m1.2.2.1.1.5.3.3.3.3.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.2"><apply id="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.1.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1">subscript</csymbol><ci id="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.2.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.2">𝐷</ci><ci id="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.3.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.1.1.3">𝑗</ci></apply><apply id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2"><csymbol cd="ambiguous" id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.1.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2">subscript</csymbol><ci id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.2.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.2">𝑆</ci><ci id="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.3.cmml" xref="S3.Ex3.m1.2.2.1.1.5.3.3.3.2.2.3">𝑗</ci></apply></list></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex3.m1.2c">\langle D_{j+1},S_{j+1}\rangle=\mathcal{M}(p_{con},q,\langle D_{0},S_{0}%
\rangle,\langle D_{j},S_{j}\rangle).</annotation><annotation encoding="application/x-llamapun" id="S3.Ex3.m1.2d">⟨ italic_D start_POSTSUBSCRIPT italic_j + 1 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT italic_j + 1 end_POSTSUBSCRIPT ⟩ = caligraphic_M ( italic_p start_POSTSUBSCRIPT italic_c italic_o italic_n end_POSTSUBSCRIPT , italic_q , ⟨ italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ⟩ , ⟨ italic_D start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ⟩ ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS4.p3.2">We find that this is especially helpful in comparing the reliability of conflicting knowledge and addressing knowledge conflicts.
Moreover, this knowledge consolidation process can run <span class="ltx_text ltx_font_bold" id="S3.SS4.p3.2.1">iteratively</span> for <math alttext="t" class="ltx_Math" display="inline" id="S3.SS4.p3.2.m1.1"><semantics id="S3.SS4.p3.2.m1.1a"><mi id="S3.SS4.p3.2.m1.1.1" xref="S3.SS4.p3.2.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.2.m1.1b"><ci id="S3.SS4.p3.2.m1.1.1.cmml" xref="S3.SS4.p3.2.m1.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.2.m1.1c">t</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.2.m1.1d">italic_t</annotation></semantics></math> times to improve the context to be more and more useful. Users can assign a larger number of iterations when the context is lengthy.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.5 </span>Answer Finalization</h3>
<div class="ltx_para" id="S3.SS5.p1">
<p class="ltx_p" id="S3.SS5.p1.2">In the last step, we prompt the LLM (with <math alttext="p_{ans}" class="ltx_Math" display="inline" id="S3.SS5.p1.1.m1.1"><semantics id="S3.SS5.p1.1.m1.1a"><msub id="S3.SS5.p1.1.m1.1.1" xref="S3.SS5.p1.1.m1.1.1.cmml"><mi id="S3.SS5.p1.1.m1.1.1.2" xref="S3.SS5.p1.1.m1.1.1.2.cmml">p</mi><mrow id="S3.SS5.p1.1.m1.1.1.3" xref="S3.SS5.p1.1.m1.1.1.3.cmml"><mi id="S3.SS5.p1.1.m1.1.1.3.2" xref="S3.SS5.p1.1.m1.1.1.3.2.cmml">a</mi><mo id="S3.SS5.p1.1.m1.1.1.3.1" xref="S3.SS5.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS5.p1.1.m1.1.1.3.3" xref="S3.SS5.p1.1.m1.1.1.3.3.cmml">n</mi><mo id="S3.SS5.p1.1.m1.1.1.3.1a" xref="S3.SS5.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS5.p1.1.m1.1.1.3.4" xref="S3.SS5.p1.1.m1.1.1.3.4.cmml">s</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.1.m1.1b"><apply id="S3.SS5.p1.1.m1.1.1.cmml" xref="S3.SS5.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS5.p1.1.m1.1.1.1.cmml" xref="S3.SS5.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS5.p1.1.m1.1.1.2.cmml" xref="S3.SS5.p1.1.m1.1.1.2">𝑝</ci><apply id="S3.SS5.p1.1.m1.1.1.3.cmml" xref="S3.SS5.p1.1.m1.1.1.3"><times id="S3.SS5.p1.1.m1.1.1.3.1.cmml" xref="S3.SS5.p1.1.m1.1.1.3.1"></times><ci id="S3.SS5.p1.1.m1.1.1.3.2.cmml" xref="S3.SS5.p1.1.m1.1.1.3.2">𝑎</ci><ci id="S3.SS5.p1.1.m1.1.1.3.3.cmml" xref="S3.SS5.p1.1.m1.1.1.3.3">𝑛</ci><ci id="S3.SS5.p1.1.m1.1.1.3.4.cmml" xref="S3.SS5.p1.1.m1.1.1.3.4">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.1.m1.1c">p_{ans}</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.1.m1.1d">italic_p start_POSTSUBSCRIPT italic_a italic_n italic_s end_POSTSUBSCRIPT</annotation></semantics></math> in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#A1" title="Appendix A Prompt Template for Astute RAG ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">A</span></a>) to generate one answer based on each group of passages (<math alttext="\langle D_{t},S_{t}\rangle" class="ltx_Math" display="inline" id="S3.SS5.p1.2.m2.2"><semantics id="S3.SS5.p1.2.m2.2a"><mrow id="S3.SS5.p1.2.m2.2.2.2" xref="S3.SS5.p1.2.m2.2.2.3.cmml"><mo id="S3.SS5.p1.2.m2.2.2.2.3" stretchy="false" xref="S3.SS5.p1.2.m2.2.2.3.cmml">⟨</mo><msub id="S3.SS5.p1.2.m2.1.1.1.1" xref="S3.SS5.p1.2.m2.1.1.1.1.cmml"><mi id="S3.SS5.p1.2.m2.1.1.1.1.2" xref="S3.SS5.p1.2.m2.1.1.1.1.2.cmml">D</mi><mi id="S3.SS5.p1.2.m2.1.1.1.1.3" xref="S3.SS5.p1.2.m2.1.1.1.1.3.cmml">t</mi></msub><mo id="S3.SS5.p1.2.m2.2.2.2.4" xref="S3.SS5.p1.2.m2.2.2.3.cmml">,</mo><msub id="S3.SS5.p1.2.m2.2.2.2.2" xref="S3.SS5.p1.2.m2.2.2.2.2.cmml"><mi id="S3.SS5.p1.2.m2.2.2.2.2.2" xref="S3.SS5.p1.2.m2.2.2.2.2.2.cmml">S</mi><mi id="S3.SS5.p1.2.m2.2.2.2.2.3" xref="S3.SS5.p1.2.m2.2.2.2.2.3.cmml">t</mi></msub><mo id="S3.SS5.p1.2.m2.2.2.2.5" stretchy="false" xref="S3.SS5.p1.2.m2.2.2.3.cmml">⟩</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.2.m2.2b"><list id="S3.SS5.p1.2.m2.2.2.3.cmml" xref="S3.SS5.p1.2.m2.2.2.2"><apply id="S3.SS5.p1.2.m2.1.1.1.1.cmml" xref="S3.SS5.p1.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS5.p1.2.m2.1.1.1.1.1.cmml" xref="S3.SS5.p1.2.m2.1.1.1.1">subscript</csymbol><ci id="S3.SS5.p1.2.m2.1.1.1.1.2.cmml" xref="S3.SS5.p1.2.m2.1.1.1.1.2">𝐷</ci><ci id="S3.SS5.p1.2.m2.1.1.1.1.3.cmml" xref="S3.SS5.p1.2.m2.1.1.1.1.3">𝑡</ci></apply><apply id="S3.SS5.p1.2.m2.2.2.2.2.cmml" xref="S3.SS5.p1.2.m2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS5.p1.2.m2.2.2.2.2.1.cmml" xref="S3.SS5.p1.2.m2.2.2.2.2">subscript</csymbol><ci id="S3.SS5.p1.2.m2.2.2.2.2.2.cmml" xref="S3.SS5.p1.2.m2.2.2.2.2.2">𝑆</ci><ci id="S3.SS5.p1.2.m2.2.2.2.2.3.cmml" xref="S3.SS5.p1.2.m2.2.2.2.2.3">𝑡</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.2.m2.2c">\langle D_{t},S_{t}\rangle</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.2.m2.2d">⟨ italic_D start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ⟩</annotation></semantics></math>), and then compare their reliability and select the most reliable one as the final answer. This comparison allows the LLM to comprehensively consider knowledge source, cross-source confirmation, frequency, and information thoroughness when making the final decision.
Notably, this step can be merged into the last knowledge consolidation step to reduce the inference complexity (the amount of prediction API calls) using a combined prompt:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.Ex4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="a=\mathcal{M}(p_{ans},q,\langle D_{0},S_{0}\rangle,\langle D_{t},S_{t}\rangle)." class="ltx_Math" display="block" id="S3.Ex4.m1.2"><semantics id="S3.Ex4.m1.2a"><mrow id="S3.Ex4.m1.2.2.1" xref="S3.Ex4.m1.2.2.1.1.cmml"><mrow id="S3.Ex4.m1.2.2.1.1" xref="S3.Ex4.m1.2.2.1.1.cmml"><mi id="S3.Ex4.m1.2.2.1.1.5" xref="S3.Ex4.m1.2.2.1.1.5.cmml">a</mi><mo id="S3.Ex4.m1.2.2.1.1.4" xref="S3.Ex4.m1.2.2.1.1.4.cmml">=</mo><mrow id="S3.Ex4.m1.2.2.1.1.3" xref="S3.Ex4.m1.2.2.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.Ex4.m1.2.2.1.1.3.5" xref="S3.Ex4.m1.2.2.1.1.3.5.cmml">ℳ</mi><mo id="S3.Ex4.m1.2.2.1.1.3.4" xref="S3.Ex4.m1.2.2.1.1.3.4.cmml">⁢</mo><mrow id="S3.Ex4.m1.2.2.1.1.3.3.3" xref="S3.Ex4.m1.2.2.1.1.3.3.4.cmml"><mo id="S3.Ex4.m1.2.2.1.1.3.3.3.4" stretchy="false" xref="S3.Ex4.m1.2.2.1.1.3.3.4.cmml">(</mo><msub id="S3.Ex4.m1.2.2.1.1.1.1.1.1" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S3.Ex4.m1.2.2.1.1.1.1.1.1.2" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.2.cmml">p</mi><mrow id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.cmml"><mi id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.2" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.2.cmml">a</mi><mo id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.1" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.3" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.3.cmml">n</mi><mo id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.1a" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.4" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.4.cmml">s</mi></mrow></msub><mo id="S3.Ex4.m1.2.2.1.1.3.3.3.5" xref="S3.Ex4.m1.2.2.1.1.3.3.4.cmml">,</mo><mi id="S3.Ex4.m1.1.1" xref="S3.Ex4.m1.1.1.cmml">q</mi><mo id="S3.Ex4.m1.2.2.1.1.3.3.3.6" xref="S3.Ex4.m1.2.2.1.1.3.3.4.cmml">,</mo><mrow id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.3.cmml"><mo id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.3" stretchy="false" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.3.cmml">⟨</mo><msub id="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.cmml"><mi id="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.2" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.2.cmml">D</mi><mn id="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.3" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.3.cmml">0</mn></msub><mo id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.4" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.3.cmml">,</mo><msub id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.cmml"><mi id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.2" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.2.cmml">S</mi><mn id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.3" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.3.cmml">0</mn></msub><mo id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.5" stretchy="false" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.3.cmml">⟩</mo></mrow><mo id="S3.Ex4.m1.2.2.1.1.3.3.3.7" xref="S3.Ex4.m1.2.2.1.1.3.3.4.cmml">,</mo><mrow id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.3.cmml"><mo id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.3" stretchy="false" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.3.cmml">⟨</mo><msub id="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.cmml"><mi id="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.2" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.2.cmml">D</mi><mi id="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.3" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.3.cmml">t</mi></msub><mo id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.4" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.3.cmml">,</mo><msub id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.cmml"><mi id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.2" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.2.cmml">S</mi><mi id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.3" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.3.cmml">t</mi></msub><mo id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.5" stretchy="false" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.3.cmml">⟩</mo></mrow><mo id="S3.Ex4.m1.2.2.1.1.3.3.3.8" stretchy="false" xref="S3.Ex4.m1.2.2.1.1.3.3.4.cmml">)</mo></mrow></mrow></mrow><mo id="S3.Ex4.m1.2.2.1.2" lspace="0em" xref="S3.Ex4.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex4.m1.2b"><apply id="S3.Ex4.m1.2.2.1.1.cmml" xref="S3.Ex4.m1.2.2.1"><eq id="S3.Ex4.m1.2.2.1.1.4.cmml" xref="S3.Ex4.m1.2.2.1.1.4"></eq><ci id="S3.Ex4.m1.2.2.1.1.5.cmml" xref="S3.Ex4.m1.2.2.1.1.5">𝑎</ci><apply id="S3.Ex4.m1.2.2.1.1.3.cmml" xref="S3.Ex4.m1.2.2.1.1.3"><times id="S3.Ex4.m1.2.2.1.1.3.4.cmml" xref="S3.Ex4.m1.2.2.1.1.3.4"></times><ci id="S3.Ex4.m1.2.2.1.1.3.5.cmml" xref="S3.Ex4.m1.2.2.1.1.3.5">ℳ</ci><vector id="S3.Ex4.m1.2.2.1.1.3.3.4.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3"><apply id="S3.Ex4.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex4.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="S3.Ex4.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.2">𝑝</ci><apply id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3"><times id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.1.cmml" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.1"></times><ci id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.2.cmml" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.2">𝑎</ci><ci id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.3.cmml" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.3">𝑛</ci><ci id="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.4.cmml" xref="S3.Ex4.m1.2.2.1.1.1.1.1.1.3.4">𝑠</ci></apply></apply><ci id="S3.Ex4.m1.1.1.cmml" xref="S3.Ex4.m1.1.1">𝑞</ci><list id="S3.Ex4.m1.2.2.1.1.2.2.2.2.3.cmml" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.2"><apply id="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.cmml" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.1.cmml" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1">subscript</csymbol><ci id="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.2.cmml" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.2">𝐷</ci><cn id="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.3.cmml" type="integer" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.1.1.3">0</cn></apply><apply id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.cmml" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.1.cmml" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.2.cmml" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.2">𝑆</ci><cn id="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.3.cmml" type="integer" xref="S3.Ex4.m1.2.2.1.1.2.2.2.2.2.2.3">0</cn></apply></list><list id="S3.Ex4.m1.2.2.1.1.3.3.3.3.3.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.2"><apply id="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1"><csymbol cd="ambiguous" id="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.1.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1">subscript</csymbol><ci id="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.2.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.2">𝐷</ci><ci id="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.3.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.1.1.3">𝑡</ci></apply><apply id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2"><csymbol cd="ambiguous" id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.1.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2">subscript</csymbol><ci id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.2.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.2">𝑆</ci><ci id="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.3.cmml" xref="S3.Ex4.m1.2.2.1.1.3.3.3.3.2.2.3">𝑡</ci></apply></list></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex4.m1.2c">a=\mathcal{M}(p_{ans},q,\langle D_{0},S_{0}\rangle,\langle D_{t},S_{t}\rangle).</annotation><annotation encoding="application/x-llamapun" id="S3.Ex4.m1.2d">italic_a = caligraphic_M ( italic_p start_POSTSUBSCRIPT italic_a italic_n italic_s end_POSTSUBSCRIPT , italic_q , ⟨ italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ⟩ , ⟨ italic_D start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ⟩ ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS5.p1.4">When <math alttext="t=1" class="ltx_Math" display="inline" id="S3.SS5.p1.3.m1.1"><semantics id="S3.SS5.p1.3.m1.1a"><mrow id="S3.SS5.p1.3.m1.1.1" xref="S3.SS5.p1.3.m1.1.1.cmml"><mi id="S3.SS5.p1.3.m1.1.1.2" xref="S3.SS5.p1.3.m1.1.1.2.cmml">t</mi><mo id="S3.SS5.p1.3.m1.1.1.1" xref="S3.SS5.p1.3.m1.1.1.1.cmml">=</mo><mn id="S3.SS5.p1.3.m1.1.1.3" xref="S3.SS5.p1.3.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.3.m1.1b"><apply id="S3.SS5.p1.3.m1.1.1.cmml" xref="S3.SS5.p1.3.m1.1.1"><eq id="S3.SS5.p1.3.m1.1.1.1.cmml" xref="S3.SS5.p1.3.m1.1.1.1"></eq><ci id="S3.SS5.p1.3.m1.1.1.2.cmml" xref="S3.SS5.p1.3.m1.1.1.2">𝑡</ci><cn id="S3.SS5.p1.3.m1.1.1.3.cmml" type="integer" xref="S3.SS5.p1.3.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.3.m1.1c">t=1</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.3.m1.1d">italic_t = 1</annotation></semantics></math>, the initial passages will be fed into the model directly for knowledge consolidation and subsequent answering: <math alttext="a=\mathcal{M}(p_{ans},q,\langle D_{0},S_{0}\rangle)." class="ltx_Math" display="inline" id="S3.SS5.p1.4.m2.2"><semantics id="S3.SS5.p1.4.m2.2a"><mrow id="S3.SS5.p1.4.m2.2.2.1" xref="S3.SS5.p1.4.m2.2.2.1.1.cmml"><mrow id="S3.SS5.p1.4.m2.2.2.1.1" xref="S3.SS5.p1.4.m2.2.2.1.1.cmml"><mi id="S3.SS5.p1.4.m2.2.2.1.1.4" xref="S3.SS5.p1.4.m2.2.2.1.1.4.cmml">a</mi><mo id="S3.SS5.p1.4.m2.2.2.1.1.3" xref="S3.SS5.p1.4.m2.2.2.1.1.3.cmml">=</mo><mrow id="S3.SS5.p1.4.m2.2.2.1.1.2" xref="S3.SS5.p1.4.m2.2.2.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS5.p1.4.m2.2.2.1.1.2.4" xref="S3.SS5.p1.4.m2.2.2.1.1.2.4.cmml">ℳ</mi><mo id="S3.SS5.p1.4.m2.2.2.1.1.2.3" xref="S3.SS5.p1.4.m2.2.2.1.1.2.3.cmml">⁢</mo><mrow id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.3.cmml"><mo id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.3" stretchy="false" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.3.cmml">(</mo><msub id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.cmml"><mi id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.2" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.2.cmml">p</mi><mrow id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.cmml"><mi id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.2" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.2.cmml">a</mi><mo id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.1" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.3" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.3.cmml">n</mi><mo id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.1a" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.4" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.4.cmml">s</mi></mrow></msub><mo id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.4" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.3.cmml">,</mo><mi id="S3.SS5.p1.4.m2.1.1" xref="S3.SS5.p1.4.m2.1.1.cmml">q</mi><mo id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.5" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.3.cmml">,</mo><mrow id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.3.cmml"><mo id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.3" stretchy="false" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.3.cmml">⟨</mo><msub id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.cmml"><mi id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.2" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.2.cmml">D</mi><mn id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.3" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.3.cmml">0</mn></msub><mo id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.4" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.3.cmml">,</mo><msub id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.cmml"><mi id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.2" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.2.cmml">S</mi><mn id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.3" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.3.cmml">0</mn></msub><mo id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.5" stretchy="false" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.3.cmml">⟩</mo></mrow><mo id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.6" stretchy="false" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S3.SS5.p1.4.m2.2.2.1.2" lspace="0em" xref="S3.SS5.p1.4.m2.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.4.m2.2b"><apply id="S3.SS5.p1.4.m2.2.2.1.1.cmml" xref="S3.SS5.p1.4.m2.2.2.1"><eq id="S3.SS5.p1.4.m2.2.2.1.1.3.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.3"></eq><ci id="S3.SS5.p1.4.m2.2.2.1.1.4.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.4">𝑎</ci><apply id="S3.SS5.p1.4.m2.2.2.1.1.2.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2"><times id="S3.SS5.p1.4.m2.2.2.1.1.2.3.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.3"></times><ci id="S3.SS5.p1.4.m2.2.2.1.1.2.4.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.4">ℳ</ci><vector id="S3.SS5.p1.4.m2.2.2.1.1.2.2.3.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2"><apply id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.1.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.2.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.2">𝑝</ci><apply id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3"><times id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.1.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.1"></times><ci id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.2.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.2">𝑎</ci><ci id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.3.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.3">𝑛</ci><ci id="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.4.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.1.1.1.1.3.4">𝑠</ci></apply></apply><ci id="S3.SS5.p1.4.m2.1.1.cmml" xref="S3.SS5.p1.4.m2.1.1">𝑞</ci><list id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.3.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2"><apply id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.1.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1">subscript</csymbol><ci id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.2.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.2">𝐷</ci><cn id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.3.cmml" type="integer" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.1.1.3">0</cn></apply><apply id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.1.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.2.cmml" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.2">𝑆</ci><cn id="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.3.cmml" type="integer" xref="S3.SS5.p1.4.m2.2.2.1.1.2.2.2.2.2.2.3">0</cn></apply></list></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.4.m2.2c">a=\mathcal{M}(p_{ans},q,\langle D_{0},S_{0}\rangle).</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.4.m2.2d">italic_a = caligraphic_M ( italic_p start_POSTSUBSCRIPT italic_a italic_n italic_s end_POSTSUBSCRIPT , italic_q , ⟨ italic_D start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT , italic_S start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ⟩ ) .</annotation></semantics></math></p>
</div>
</section>
</section>
<section class="ltx_section" id="S4" lang="en">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">We evaluate the effectiveness of <span class="ltx_text ltx_font_smallcaps" id="S4.p1.1.1">Astute RAG</span> on overcoming imperfect retrieval augmentation and addressing knowledge conflicts. In this section, we first introduce the experiment setting in detail (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.SS1" title="4.1 Experimental Settings ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4.1</span></a>). Then, we compare the performance of <span class="ltx_text ltx_font_smallcaps" id="S4.p1.1.2">Astute RAG</span> with various baselines on diverse datasets (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.SS2" title="4.2 Main Results ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4.2</span></a>). Finally, we provide in-depth analyses (Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.SS3" title="4.3 Analyses ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4.3</span></a>).</p>
</div>
<figure class="ltx_table" id="S4.T1">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="S4.T1.1.1.1.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.1.1.1.1" style="font-size:90%;">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt" id="S4.T1.1.1.1.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.1.1.2.1" style="font-size:90%;">#API Calls</span></th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.1.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.1.1.3.1" style="font-size:90%;">NQ</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.1.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.1.1.4.1" style="font-size:90%;">TriviaQA</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.1.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.1.1.5.1" style="font-size:90%;">BioASQ</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.1.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.1.1.6.1" style="font-size:90%;">PopQA</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.1.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.1.1.7.1" style="font-size:90%;">Overall</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="7" id="S4.T1.1.2.2.1" style="background-color:#DFDFDF;padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_italic" id="S4.T1.1.2.2.1.1" style="font-size:90%;background-color:#DFDFDF;">Claude 3.5 Sonnet (20240620)</span></th>
</tr>
<tr class="ltx_tr" id="S4.T1.1.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.1.3.3.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.3.3.1.1" style="font-size:90%;">No RAG</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.1.3.3.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.3.3.2.1" style="font-size:90%;">1</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.3.3.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.3.3.3.1" style="font-size:90%;">47.12</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.3.3.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.3.3.4.1" style="font-size:90%;">81.98</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.3.3.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.3.3.5.1" style="font-size:90%;">50.35</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.3.3.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.3.3.6.1" style="font-size:90%;">29.78</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.3.3.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.3.3.7.1" style="font-size:90%;">54.51</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.4.4.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.4.4.1.1" style="font-size:90%;">RAG</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.1.4.4.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.4.4.2.1" style="font-size:90%;">1</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.4.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.4.4.3.1" style="font-size:90%;">44.41</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.4.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.4.4.4.1" style="font-size:90%;">76.68</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.4.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.4.4.5.1" style="font-size:90%;">58.04</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.4.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.4.4.6.1" style="font-size:90%;">35.96</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.4.4.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.4.4.7.1" style="font-size:90%;">55.47</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.1.5.5.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T1.1.5.5.1.1" style="font-size:90%;">USC </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T1.1.5.5.1.2.1" style="font-size:90%;">(</span>Chen et al.<span class="ltx_text" id="S4.T1.1.5.5.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib6" title="">2024b</a><span class="ltx_text" id="S4.T1.1.5.5.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.1.5.5.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.5.5.2.1" style="font-size:90%;">4</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.5.5.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.5.5.3.1" style="font-size:90%;">48.14</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.5.5.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.5.5.4.1" style="font-size:90%;">80.21</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.5.5.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.5.5.5.1" style="font-size:90%;">61.54</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.5.5.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.5.5.6.1" style="font-size:90%;">37.64</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.5.5.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.5.5.7.1" style="font-size:90%;">58.73</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.6.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.6.6.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T1.1.6.6.1.1" style="font-size:90%;">GenRead </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T1.1.6.6.1.2.1" style="font-size:90%;">(</span>Yu et al.<span class="ltx_text" id="S4.T1.1.6.6.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib40" title="">2023a</a><span class="ltx_text" id="S4.T1.1.6.6.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.1.6.6.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.6.6.2.1" style="font-size:90%;">2</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.6.6.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.6.6.3.1" style="font-size:90%;">42.03</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.6.6.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.6.6.4.1" style="font-size:90%;">74.20</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.6.6.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.6.6.5.1" style="font-size:90%;">56.99</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.6.6.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.6.6.6.1" style="font-size:90%;">34.27</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.6.6.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.6.6.7.1" style="font-size:90%;">53.55</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.7.7.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T1.1.7.7.1.1" style="font-size:90%;">RobustRAG </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T1.1.7.7.1.2.1" style="font-size:90%;">(</span>Xiang et al.<span class="ltx_text" id="S4.T1.1.7.7.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib32" title="">2024</a><span class="ltx_text" id="S4.T1.1.7.7.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.1.7.7.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.7.7.2.1" style="font-size:90%;">11</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.7.7.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.7.7.3.1" style="font-size:90%;">47.80</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.7.7.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.7.7.4.1" style="font-size:90%;">78.09</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.7.7.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.7.7.5.1" style="font-size:90%;">56.29</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.7.7.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.7.7.6.1" style="font-size:90%;">37.08</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.7.7.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.7.7.7.1" style="font-size:90%;">56.53</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.8.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.8.8.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T1.1.8.8.1.1" style="font-size:90%;">InstructRAG </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T1.1.8.8.1.2.1" style="font-size:90%;">(</span>Wei et al.<span class="ltx_text" id="S4.T1.1.8.8.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib31" title="">2024</a><span class="ltx_text" id="S4.T1.1.8.8.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.1.8.8.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.8.8.2.1" style="font-size:90%;">1</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.8.8.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.8.8.3.1" style="font-size:90%;">47.12</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.8.8.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.8.8.4.1" style="font-size:90%;">83.04</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.8.8.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.8.8.5.1" style="font-size:90%;">58.04</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.8.8.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.8.8.6.1" style="font-size:90%;">41.01</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.8.8.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.8.8.7.1" style="font-size:90%;">58.83</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.9.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.9.9.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T1.1.9.9.1.1" style="font-size:90%;">Self-Route </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T1.1.9.9.1.2.1" style="font-size:90%;">(</span>Xu et al.<span class="ltx_text" id="S4.T1.1.9.9.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib35" title="">2024a</a><span class="ltx_text" id="S4.T1.1.9.9.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.1.9.9.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.9.9.2.1" style="font-size:90%;">1-2</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.9.9.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.9.9.3.1" style="font-size:90%;">47.46</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.9.9.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.9.9.4.1" style="font-size:90%;">78.80</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.9.9.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.9.9.5.1" style="font-size:90%;">59.09</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.9.9.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.9.9.6.1" style="font-size:90%;">41.01</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.9.9.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.9.9.7.1" style="font-size:90%;">58.06</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.10.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.1.10.10.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text ltx_font_smallcaps" id="S4.T1.1.10.10.1.1" style="font-size:90%;">Astute RAG</span><span class="ltx_text" id="S4.T1.1.10.10.1.2" style="font-size:90%;"> (t=1)</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.1.10.10.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.10.10.2.1" style="font-size:90%;">2</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.10.10.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.10.10.3.1" style="font-size:90%;">52.20</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.10.10.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.10.10.4.1" style="font-size:90%;">84.10</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.10.10.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.10.10.5.1" style="font-size:90%;">60.14</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.10.10.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.10.10.6.1" style="font-size:90%;">44.38</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.1.10.10.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.10.10.7.1" style="font-size:90%;">61.71</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.11.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.1.11.11.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text ltx_font_smallcaps" id="S4.T1.1.11.11.1.1" style="font-size:90%;">Astute RAG</span><span class="ltx_text" id="S4.T1.1.11.11.1.2" style="font-size:90%;"> (t=2)</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.1.11.11.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.11.11.2.1" style="font-size:90%;">3</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.1.11.11.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.11.11.3.1" style="font-size:90%;">53.22</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.11.11.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.1.11.11.4.1" style="font-size:90%;">84.45</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.11.11.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.11.11.5.1" style="font-size:90%;">61.89</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.11.11.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.1.11.11.6.1" style="font-size:90%;">44.94</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.1.11.11.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.11.11.7.1" style="font-size:90%;">62.67</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.1.12.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T1.1.12.12.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text ltx_font_smallcaps" id="S4.T1.1.12.12.1.1" style="font-size:90%;">Astute RAG</span><span class="ltx_text" id="S4.T1.1.12.12.1.2" style="font-size:90%;"> (t=3)</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb" id="S4.T1.1.12.12.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T1.1.12.12.2.1" style="font-size:90%;">4</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.12.12.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.1.12.12.3.1" style="font-size:90%;">53.56</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.12.12.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.1.12.12.4.1" style="font-size:90%;">84.45</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.12.12.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.1.12.12.5.1" style="font-size:90%;">62.24</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.12.12.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.1.12.12.6.1" style="font-size:90%;">44.94</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.1.12.12.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T1.1.12.12.7.1" style="font-size:90%;">62.86</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering" style="font-size:90%;"><span class="ltx_tag ltx_tag_table">Table 1: </span>Main results on Claude under zero-shot setting, showing the accuracy of different benchmark methods vs. <span class="ltx_text ltx_font_smallcaps" id="S4.T1.6.1">Astute RAG</span>, along with their prediction complexity, in number of prediction API calls. Best scores are in bold.</figcaption>
</figure>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Experimental Settings</h3>
<div class="ltx_para ltx_noindent" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p1.1.1">Datasets and metrics.</span>
We conduct experiments on the data collected in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S2" title="2 Imperfect Retrieval: The Pitfall of RAG ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">2</span></a> consisting of data from NQ, TriviaQA, BioASQ, and PopQA. For each instance from these datasets, we provide 10 passages collected under a realistic retrieval setting: for each question in our benchmark, we query Google Search to retrieve the top 30 results and select the first 10 accessible websites. From each retrieved website, we extract the paragraph corresponding to the snippet provided in Google Search results as the retrieved passage.. Most of the retrieval results contains natural noise with irrelevant or misleading information. We do not consider enhancements to the retrieval side, such as query rewriting, as such enhancements are typically already incorporated into commercial information retrieval systems. Notably, we do not select questions or annotate answers based on the retrieval results. This setting allows us to analyze the severity of imperfect retrieval in real-world RAG. It distinguishes our benchmark from previous ones that employ synthetic retrieval corruptions or that unintentionally reduce the frequency of imperfect retrieval with biased construction protocols <cite class="ltx_cite ltx_citemacro_citep">(Chen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib5" title="">2024a</a>; Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib38" title="">2024</a>)</cite>. We also evaluate our method on RGB <cite class="ltx_cite ltx_citemacro_citep">(Chen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib5" title="">2024a</a>)</cite>, a RAG diagnostic benchmark evaluating several crucial RAG abilities. Specifically, we choose the English subset of RGB focusing on noise robustness. The benchmark have positive and negative passage sets for each question. We select five negative documents per question as the context to form a worst-case scenario.
All the data in these datasets are short-form QA. Following previous work <cite class="ltx_cite ltx_citemacro_citep">(Xiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib32" title="">2024</a>; Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib31" title="">2024</a>; Mallen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib20" title="">2023</a>)</cite>, a model response is considered correct if it contains the ground-truth answer. To enhance evaluation reliability, we prompt LLMs to enclose the exact answer within special tokens, extracting them as the final responses.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p2.1.1">General Settings of LLMs and RAG.</span>
We conduct experiments on two advanced LLMs, including Gemini 1.5 Pro<span class="ltx_note ltx_role_footnote" id="footnote5"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_tag ltx_tag_note">5</span>https://deepmind.google/technologies/gemini/pro/</span></span></span> (<span class="ltx_text ltx_font_typewriter" id="S4.SS1.p2.1.2">gemini-1.5-pro-002</span>) and Claude 3.5 Sonnet<span class="ltx_note ltx_role_footnote" id="footnote6"><sup class="ltx_note_mark">6</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">6</sup><span class="ltx_tag ltx_tag_note">6</span>https://www.anthropic.com/news/claude-3-5-sonnet</span></span></span> (<span class="ltx_text ltx_font_typewriter" id="S4.SS1.p2.1.3">claude-3-5-sonnet@20240620</span>). The generation temperature is set to 0 and the maximum output tokens is set to 1,024, if not specified otherwise. By default, the passages are presented in the prompt by reversed order. All experiments are under the zero-shot setting for controlled evaluation, where no demonstrations for QA or method-specific steps are provided.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p3.1.1">Baselines.</span>
We compare <span class="ltx_text ltx_font_smallcaps" id="S4.SS1.p3.1.2">Astute RAG</span> with various RAG methods designed for enhanced robustness and representative inference strategies designed to improve response trustworthiness.
<span class="ltx_text ltx_font_italic" id="S4.SS1.p3.1.3">USC</span> <cite class="ltx_cite ltx_citemacro_citep">(Chen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib6" title="">2024b</a>)</cite> is the universal self-consistency method that samples multiple LLM responses given the same context and aggregates the answers. It provides a reference of naive improvements using additional API calls. The temperature for sampling responses in this baseline is set to 0.7.
<span class="ltx_text ltx_font_italic" id="S4.SS1.p3.1.4">Genread</span> <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib40" title="">2023a</a>)</cite> augments retrieved passages with LLM-generated passages. It provide a reference of presenting passages from both internal and external knowledge in the prompt without effectively combining them.
<span class="ltx_text ltx_font_italic" id="S4.SS1.p3.1.5">RobustRAG</span> <cite class="ltx_cite ltx_citemacro_citep">(Xiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib32" title="">2024</a>)</cite> aggregates answers from each independent passage to provide certifiable robustness. We use the keyword aggregation variant as it is shown to be the best-performing variant on advanced LLMs.
<span class="ltx_text ltx_font_italic" id="S4.SS1.p3.1.6">InstructRAG</span> <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib31" title="">2024</a>)</cite> instructs the LLM to provide a rationale connecting the answer with information in passages. For a fair comparison, we use the instructions without training or in-context learning.
<span class="ltx_text ltx_font_italic" id="S4.SS1.p3.1.7">Self-Route</span> <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib35" title="">2024a</a>)</cite> adaptively switches between LLMs with and without RAG.<span class="ltx_note ltx_role_footnote" id="footnote7"><sup class="ltx_note_mark">7</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">7</sup><span class="ltx_tag ltx_tag_note">7</span>The original Self-Route switches between RAG and long-context LLMs, while our implementation switches between LLMs with and without RAG to better align with the problem formulation in this paper.</span></span></span> This baseline provides a reference of switching between LLMs’ internal and external knowledge.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS1.p4">
<p class="ltx_p" id="S4.SS1.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS1.p4.1.1">Implementation Details of <span class="ltx_text ltx_font_smallcaps" id="S4.SS1.p4.1.1.1">Astute RAG</span>.</span>
The prompt templates for <span class="ltx_text ltx_font_smallcaps" id="S4.SS1.p4.1.2">Astute RAG</span> can be found in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#A1" title="Appendix A Prompt Template for Astute RAG ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">A</span></a>.
By default, we use 2 API calls per query, setting <math alttext="t=1" class="ltx_Math" display="inline" id="S4.SS1.p4.1.m1.1"><semantics id="S4.SS1.p4.1.m1.1a"><mrow id="S4.SS1.p4.1.m1.1.1" xref="S4.SS1.p4.1.m1.1.1.cmml"><mi id="S4.SS1.p4.1.m1.1.1.2" xref="S4.SS1.p4.1.m1.1.1.2.cmml">t</mi><mo id="S4.SS1.p4.1.m1.1.1.1" xref="S4.SS1.p4.1.m1.1.1.1.cmml">=</mo><mn id="S4.SS1.p4.1.m1.1.1.3" xref="S4.SS1.p4.1.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p4.1.m1.1b"><apply id="S4.SS1.p4.1.m1.1.1.cmml" xref="S4.SS1.p4.1.m1.1.1"><eq id="S4.SS1.p4.1.m1.1.1.1.cmml" xref="S4.SS1.p4.1.m1.1.1.1"></eq><ci id="S4.SS1.p4.1.m1.1.1.2.cmml" xref="S4.SS1.p4.1.m1.1.1.2">𝑡</ci><cn id="S4.SS1.p4.1.m1.1.1.3.cmml" type="integer" xref="S4.SS1.p4.1.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p4.1.m1.1c">t=1</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p4.1.m1.1d">italic_t = 1</annotation></semantics></math> to merge the prompt for knowledge consolidation and answer finalization. For adaptive generation of internal knowledge, we prompt the LLM to generate no more than one passage.</p>
</div>
<figure class="ltx_table" id="S4.T2">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T2.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="S4.T2.1.1.1.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.1.1.1.1" style="font-size:90%;">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt" id="S4.T2.1.1.1.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.1.1.2.1" style="font-size:90%;">#API Calls</span></th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.1.1.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.1.1.3.1" style="font-size:90%;">NQ</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.1.1.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.1.1.4.1" style="font-size:90%;">TriviaQA</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.1.1.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.1.1.5.1" style="font-size:90%;">BioASQ</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.1.1.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.1.1.6.1" style="font-size:90%;">PopQA</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T2.1.1.1.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.1.1.7.1" style="font-size:90%;">Overall</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="7" id="S4.T2.1.2.2.1" style="background-color:#DFDFDF;padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_italic" id="S4.T2.1.2.2.1.1" style="font-size:90%;background-color:#DFDFDF;">Gemini 1.5 Pro (002)</span></th>
</tr>
<tr class="ltx_tr" id="S4.T2.1.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.3.3.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.3.3.1.1" style="font-size:90%;">No RAG</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.3.3.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.3.3.2.1" style="font-size:90%;">1</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.3.3.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.3.3.3.1" style="font-size:90%;">44.75</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.3.3.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.3.3.4.1" style="font-size:90%;">80.21</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.3.3.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.3.3.5.1" style="font-size:90%;">45.80</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.3.3.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.3.3.6.1" style="font-size:90%;">25.28</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.3.3.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.3.3.7.1" style="font-size:90%;">51.34</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.4.4.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.4.4.1.1" style="font-size:90%;">RAG</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T2.1.4.4.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.4.4.2.1" style="font-size:90%;">1</span></th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.4.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.4.4.3.1" style="font-size:90%;">42.71</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.4.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.4.4.4.1" style="font-size:90%;">75.97</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.4.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.4.4.5.1" style="font-size:90%;">55.24</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.4.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.4.4.6.1" style="font-size:90%;">33.71</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.4.4.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.4.4.7.1" style="font-size:90%;">53.65</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.5.5.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T2.1.5.5.1.1" style="font-size:90%;">USC </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T2.1.5.5.1.2.1" style="font-size:90%;">(</span>Chen et al.<span class="ltx_text" id="S4.T2.1.5.5.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib6" title="">2024b</a><span class="ltx_text" id="S4.T2.1.5.5.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.5.5.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.5.5.2.1" style="font-size:90%;">4</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.5.5.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.5.5.3.1" style="font-size:90%;">46.44</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.5.5.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.5.5.4.1" style="font-size:90%;">76.68</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.5.5.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.5.5.5.1" style="font-size:90%;">58.39</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.5.5.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.5.5.6.1" style="font-size:90%;">37.64</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.5.5.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.5.5.7.1" style="font-size:90%;">56.43</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.6.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.6.6.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T2.1.6.6.1.1" style="font-size:90%;">GenRead </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T2.1.6.6.1.2.1" style="font-size:90%;">(</span>Yu et al.<span class="ltx_text" id="S4.T2.1.6.6.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib40" title="">2023a</a><span class="ltx_text" id="S4.T2.1.6.6.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T2.1.6.6.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.6.6.2.1" style="font-size:90%;">2</span></th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.6.6.3.1" style="font-size:90%;">45.08</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.6.6.4.1" style="font-size:90%;">77.39</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.6.6.5.1" style="font-size:90%;">54.90</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.6.6.6.1" style="font-size:90%;">34.27</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.6.6.7.1" style="font-size:90%;">54.70</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.7.7.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T2.1.7.7.1.1" style="font-size:90%;">RobustRAG </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T2.1.7.7.1.2.1" style="font-size:90%;">(</span>Xiang et al.<span class="ltx_text" id="S4.T2.1.7.7.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib32" title="">2024</a><span class="ltx_text" id="S4.T2.1.7.7.1.4.3" style="font-size:90%;">)</span></cite><span class="ltx_note ltx_role_footnote" id="footnote8"><sup class="ltx_note_mark">8</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">8</sup><span class="ltx_tag ltx_tag_note">8</span><span class="ltx_text" id="footnote8.1" style="font-size:90%;">We observe a high refusal rate in responses of RobustRAG.</span></span></span></span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T2.1.7.7.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.7.7.2.1" style="font-size:90%;">11</span></th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.7.7.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.7.7.3.1" style="font-size:90%;">34.24</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.7.7.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.7.7.4.1" style="font-size:90%;">67.49</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.7.7.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.7.7.5.1" style="font-size:90%;">44.06</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.7.7.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.7.7.6.1" style="font-size:90%;">32.02</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.7.7.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.7.7.7.1" style="font-size:90%;">45.59</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.8.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.8.8.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T2.1.8.8.1.1" style="font-size:90%;">InstructRAG </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T2.1.8.8.1.2.1" style="font-size:90%;">(</span>Wei et al.<span class="ltx_text" id="S4.T2.1.8.8.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib31" title="">2024</a><span class="ltx_text" id="S4.T2.1.8.8.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T2.1.8.8.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.8.8.2.1" style="font-size:90%;">1</span></th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.8.8.3.1" style="font-size:90%;">46.78</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.8.8.4.1" style="font-size:90%;">80.57</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.8.8.5.1" style="font-size:90%;">54.90</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.8.8.6.1" style="font-size:90%;">34.83</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.8.8.7.1" style="font-size:90%;">56.14</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.9.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.9.9.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text" id="S4.T2.1.9.9.1.1" style="font-size:90%;">Self-Route </span><cite class="ltx_cite ltx_citemacro_citep"><span class="ltx_text" id="S4.T2.1.9.9.1.2.1" style="font-size:90%;">(</span>Xu et al.<span class="ltx_text" id="S4.T2.1.9.9.1.3.2.1.1" style="font-size:90%;">, </span><a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib35" title="">2024a</a><span class="ltx_text" id="S4.T2.1.9.9.1.4.3" style="font-size:90%;">)</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T2.1.9.9.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.9.9.2.1" style="font-size:90%;">1-2</span></th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.9.9.3.1" style="font-size:90%;">47.46</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.9.9.4.1" style="font-size:90%;">79.86</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.9.9.5.1" style="font-size:90%;">58.04</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.9.9.6.1" style="font-size:90%;">38.20</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.9.9.7.1" style="font-size:90%;">57.58</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.10.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.10.10.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text ltx_font_smallcaps" id="S4.T2.1.10.10.1.1" style="font-size:90%;">Astute RAG</span><span class="ltx_text" id="S4.T2.1.10.10.1.2" style="font-size:90%;"> (t=1)</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T2.1.10.10.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.10.10.2.1" style="font-size:90%;">2</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.10.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.10.10.3.1" style="font-size:90%;">50.17</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.10.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.1.10.10.4.1" style="font-size:90%;">81.63</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.10.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.10.10.5.1" style="font-size:90%;">58.04</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.10.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.10.10.6.1" style="font-size:90%;">40.45</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.10.10.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.10.10.7.1" style="font-size:90%;">59.21</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.11.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.1.11.11.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text ltx_font_smallcaps" id="S4.T2.1.11.11.1.1" style="font-size:90%;">Astute RAG</span><span class="ltx_text" id="S4.T2.1.11.11.1.2" style="font-size:90%;"> (t=2)</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T2.1.11.11.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.11.11.2.1" style="font-size:90%;">3</span></th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.11.11.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.1.11.11.3.1" style="font-size:90%;">51.53</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.11.11.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.11.11.4.1" style="font-size:90%;">81.27</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.11.11.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.11.11.5.1" style="font-size:90%;">58.74</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.11.11.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.11.11.6.1" style="font-size:90%;">40.45</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.11.11.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.1.11.11.7.1" style="font-size:90%;">59.69</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.12.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T2.1.12.12.1" style="padding-left:5.0pt;padding-right:5.0pt;">
<span class="ltx_text ltx_font_smallcaps" id="S4.T2.1.12.12.1.1" style="font-size:90%;">Astute RAG</span><span class="ltx_text" id="S4.T2.1.12.12.1.2" style="font-size:90%;"> (t=3)</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_bb" id="S4.T2.1.12.12.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.12.12.2.1" style="font-size:90%;">4</span></th>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.12.12.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.12.12.3.1" style="font-size:90%;">48.47</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.12.12.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.12.12.4.1" style="font-size:90%;">80.21</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.12.12.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.1.12.12.5.1" style="font-size:90%;">60.14</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.12.12.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T2.1.12.12.6.1" style="font-size:90%;">42.13</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.1.12.12.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S4.T2.1.12.12.7.1" style="font-size:90%;">59.21</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering" style="font-size:90%;"><span class="ltx_tag ltx_tag_table">Table 2: </span>Main results on Gemini under zero-shot setting, showing the accuracy of different benchmark methods vs. <span class="ltx_text ltx_font_smallcaps" id="S4.T2.6.1">Astute RAG</span>, along with their prediction complexity, in number of prediction API calls. Best scores are in bold.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Main Results</h3>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.T1" title="Table 1 ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">1</span></a> and Table <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.T2" title="Table 2 ‣ 4.1 Experimental Settings ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">2</span></a> presents the results on data with realistic retrieval augmentation for each dataset. By comparing RAG and No RAG, we find that retrieved passages might not always bring benefits to downstream performance – on NQ and TriviaQA, RAG performance lags behind No RAG. We attribute this to that the questions being covered by the LLM’s internal knowledge and the noise in retrieval results misleading the LLM. In contrast, on BioASQ and PopQA, which focus on domain-specific and long-tail questions, RAG significantly improves LLM performance. However, due to imperfect retrieval augmentation, the absolute performance still remains to be unsatisfactory.
Among all baselines, no single method consistently outperforms others across all datasets. This observation highlights that these baselines are tailored to distinct settings and may not be universally applicable.
For instance, InstructRAG is more effective on TriviaQA, achieving the best performance among all baselines with both Claude and Gemini.
In contrast, Self-Route performs better than InstructRAG on both NQ and BioASQ.
Moreover, RobustRAG achieves very different performance when applied to Gemini and Claude. Through in-depth analysis, we find that RobustRAG with Gemini exhibits a high refusal rate (refuse to answer) in responses.
We attribute this instability to the varying method designs of the baselines, which are tailored for different scenarios, resulting in inconsistent improvement across datasets.
Overall, InstructRAG and Self-Route demonstrates the best performance among all baselines when applied to Claude and Gemini respectively.
We also note that increasing the number of API calls does not necessarily correlate with improved performance.</p>
</div>
<div class="ltx_para" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.4"><span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p2.4.1">Astute RAG</span> consistently outperforms baselines across all datasets of different properties. The overall improvement compared with the best baseline is relatively 6.85% on Claude and 4.13% on Gemini, and the improvements in domain-specific questions are much higher. These results highlight the effectiveness of <span class="ltx_text ltx_font_smallcaps" id="S4.SS2.p2.4.2">Astute RAG</span> in overcoming imperfect retrieval augmentation.
On Claude, adding more iteration of knowledge consolidation leads to consist improvement. The improvement margin becomes lower when <math alttext="t" class="ltx_Math" display="inline" id="S4.SS2.p2.1.m1.1"><semantics id="S4.SS2.p2.1.m1.1a"><mi id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.1b"><ci id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.1c">t</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.1.m1.1d">italic_t</annotation></semantics></math> becomes larger. This is because after each iteration, the remaining improvement space for knowledge consolidation becomes smaller.
On Gemini, increasing <math alttext="t" class="ltx_Math" display="inline" id="S4.SS2.p2.2.m2.1"><semantics id="S4.SS2.p2.2.m2.1a"><mi id="S4.SS2.p2.2.m2.1.1" xref="S4.SS2.p2.2.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.2.m2.1b"><ci id="S4.SS2.p2.2.m2.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.2.m2.1c">t</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.2.m2.1d">italic_t</annotation></semantics></math> primarily benefits BioASQ and PopQA. These two datasets rely more heavily on external knowledge, and iterative knowledge consolidation helps mitigate noise within this external information.
Performance on NQ and TriviaQA does not improve further when <math alttext="t" class="ltx_Math" display="inline" id="S4.SS2.p2.3.m3.1"><semantics id="S4.SS2.p2.3.m3.1a"><mi id="S4.SS2.p2.3.m3.1.1" xref="S4.SS2.p2.3.m3.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.3.m3.1b"><ci id="S4.SS2.p2.3.m3.1.1.cmml" xref="S4.SS2.p2.3.m3.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.3.m3.1c">t</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.3.m3.1d">italic_t</annotation></semantics></math> reaches 3. We attribute this to the less critical role of external knowledge in these datasets. For setting consistency and efficiency, we set the parameter <math alttext="\hat{m}" class="ltx_Math" display="inline" id="S4.SS2.p2.4.m4.1"><semantics id="S4.SS2.p2.4.m4.1a"><mover accent="true" id="S4.SS2.p2.4.m4.1.1" xref="S4.SS2.p2.4.m4.1.1.cmml"><mi id="S4.SS2.p2.4.m4.1.1.2" xref="S4.SS2.p2.4.m4.1.1.2.cmml">m</mi><mo id="S4.SS2.p2.4.m4.1.1.1" xref="S4.SS2.p2.4.m4.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.4.m4.1b"><apply id="S4.SS2.p2.4.m4.1.1.cmml" xref="S4.SS2.p2.4.m4.1.1"><ci id="S4.SS2.p2.4.m4.1.1.1.cmml" xref="S4.SS2.p2.4.m4.1.1.1">^</ci><ci id="S4.SS2.p2.4.m4.1.1.2.cmml" xref="S4.SS2.p2.4.m4.1.1.2">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.4.m4.1c">\hat{m}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p2.4.m4.1d">over^ start_ARG italic_m end_ARG</annotation></semantics></math> to a smaller value, limiting the influence of internal knowledge.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Analyses</h3>
<div class="ltx_para ltx_noindent" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1"><span class="ltx_text ltx_font_bold" id="S4.SS3.p1.1.1">Performance by retrieval precision.</span>
We compare the performance of <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p1.1.2">Astute RAG</span> and baselines across different subsets partitioned by their retrieval precision, on our collected data with Claude as the LLM.
As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.F4" title="Figure 4 ‣ 4.3 Analyses ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4</span></a>, <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p1.1.3">Astute RAG</span> achieves consistently better performance than all baselines across different retrieval precision, indicating its effectiveness in improving RAG trustworthiness in broad scenarios. Notably, <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p1.1.4">Astute RAG</span> does not sacrifice performance gain under high retrieval quality in exchange for improvement under low retrieval quality.
When the retrieval quality is extremely low (close to zero retrieval precision), all other RAG variants underperforms the ’No RAG’ baseline, except for the proposed <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p1.1.5">Astute RAG</span>. This observation aligns with the worst-case results on RGB. It demonstrates the difficulty in overcoming imperfect retrieval augmentation, and verify the effectiveness of <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p1.1.6">Astute RAG</span> in doing so.</p>
</div>
<figure class="ltx_figure" id="S4.F4">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S4.F4.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="195" id="S4.F4.sf1.g1" src="extracted/5914248/figure/perf_dist.png" width="195"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F4.sf1.2.1.1" style="font-size:80%;">(a)</span> </span><span class="ltx_text" id="S4.F4.sf1.3.2" style="font-size:80%;">Performance by Retrieval Precision</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S4.F4.sf2"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="196" id="S4.F4.sf2.g1" src="extracted/5914248/figure/conflicts.png" width="195"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F4.sf2.2.1.1" style="font-size:80%;">(b)</span> </span><span class="ltx_text" id="S4.F4.sf2.3.2" style="font-size:80%;">Performance by Knowledge Conflicts</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S4.F4.sf3"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="195" id="S4.F4.sf3.g1" src="extracted/5914248/figure/rgb.png" width="195"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F4.sf3.2.1.1" style="font-size:80%;">(c)</span> </span><span class="ltx_text" id="S4.F4.sf3.3.2" style="font-size:80%;">Worst-case Performance on RGB</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Analysis results.
(a) Performance of Claude across different buckets ranked by retrieval precision.
(b) Performance of Claude on conflicting and consistent instances between No RAG and RAG.
(c) Worst-case performance of Claude on RGB, where all retrieved passages are negative. <span class="ltx_text ltx_font_smallcaps" id="S4.F4.2.1">Astute RAG</span> reaches a performance close to No RAG, while other RAG systems are far behind.
</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.1"><span class="ltx_text ltx_font_bold" id="S4.SS3.p2.1.1">Effectiveness in addressing knowledge conflicts.</span>
We split our collected data in to three subset according to the answers from Claude, with and without RAG. The answers from two inference methods can be both correct, both incorrect, or conflicting with one being correct. These three subsets represents the three situations between internal and external knowledge. The results are shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.F4" title="Figure 4 ‣ 4.3 Analyses ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4</span></a>.
On the conflicting subset, <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p2.1.2">Astute RAG</span> successfully chooses the correct answer in approximately 80% of cases, being the most effective method in addressing knowledge conflicts.
Notably, <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p2.1.3">Astute RAG</span> even brings performance improvement on the subset where neither internal nor external knowledge alone leads to the correct answer. This indicates that <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p2.1.4">Astute RAG</span> can effectively combine partially-correct information from LLM-internal and external knowledge, to achieve the correct answer through collective information across them.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS3.p3">
<p class="ltx_p" id="S4.SS3.p3.1"><span class="ltx_text ltx_font_bold" id="S4.SS3.p3.1.1">Worst-case performance on RGB..</span>
Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.F4" title="Figure 4 ‣ 4.3 Analyses ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">4</span></a> presents the results under the worst-case setting on RGB where all retrieved documents are negative. It demonstrates the noise robustness of <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p3.1.2">Astute RAG</span> and baseline RAG methods.
The performance gap between RAG and No RAG exceeds 50 points, highlighting the detrimental impact of imperfect retrieval results and emphasizing the importance of providing robust safeguards against worst-case scenarios.
While the baseline RAG methods outperform the original RAG, they still obviously fall behind No RAG. <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p3.1.3">Astute RAG</span> is the only RAG method that reaches a performance close to No RAG under the worst-case scenario, further supporting its effectiveness in addressing imperfect retrieval augmentation.</p>
</div>
<div class="ltx_para ltx_noindent" id="S4.SS3.p4">
<p class="ltx_p" id="S4.SS3.p4.1"><span class="ltx_text ltx_font_bold" id="S4.SS3.p4.1.1">Qualitative study.</span>
In Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#S4.F5" title="Figure 5 ‣ 4.3 Analyses ‣ 4 Experiments ‣ Astute RAG: Overcoming Imperfect Retrieval Augmentation and Knowledge Conflicts for Large Language Models"><span class="ltx_text ltx_ref_tag">5</span></a>, we present two representative examples showing the intermediate outputs of <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p4.1.2">Astute RAG</span>. In the first example, LLM without RAG generates a wrong answer, while RAG returns a correct answer. <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p4.1.3">Astute RAG</span> successfully identified the incorrect information in its generated passage and an external passage, avoiding confirmation bias <cite class="ltx_cite ltx_citemacro_cite">Tan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib24" title="">2024</a>)</cite>. In the second example, LLM alone is correct, while RAG is incorrect due to the noisy retrieval results. <span class="ltx_text ltx_font_smallcaps" id="S4.SS3.p4.1.4">Astute RAG</span> detected the correct answer from noisy retrieved information by checking with its internal knowledge.</p>
</div>
<figure class="ltx_figure" id="S4.F5"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="533" id="S4.F5.g1" src="extracted/5914248/figure/qual_2.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>Qualitative examples. <span class="ltx_text ltx_font_italic" id="S4.F5.5.1">Top:</span> <span class="ltx_text ltx_font_smallcaps" id="S4.F5.6.2">Astute RAG</span> identified the error in internal knowledge (i.e., generated passage) by confirming with external sources. <span class="ltx_text ltx_font_italic" id="S4.F5.7.3">Bottom:</span> <span class="ltx_text ltx_font_smallcaps" id="S4.F5.8.4">Astute RAG</span> detected the correct answer from noisy retrieved information by checking with its internal knowledge. Standard RAG does not provide an answer because the retrieved passages are too noisy.</figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="S5" lang="en">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Related Work</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">Retrieval augmented generation (RAG) seeks to address the inherent knowledge limitation of LLMs with passages retrieved from external sources of information such as private corpora or public knowledge bases <cite class="ltx_cite ltx_citemacro_citep">(Guu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib11" title="">2020</a>; Lewis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib17" title="">2020</a>; Borgeaud et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib4" title="">2022</a>)</cite>.
Given the widespread adoption of RAG in various real-world applications, including risk-sensitive domains, the negative impact of noisy information within retrieved passages has garnered increasing attention <cite class="ltx_cite ltx_citemacro_citep">(Cuconasu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib7" title="">2024</a>)</cite>.
Recent work has sought to enhance the robustness of RAG systems against noise from various perspectives, including training LLMs with noisy context <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib41" title="">2023b</a>; Yoran et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib39" title="">2024</a>; Pan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib21" title="">2024</a>; Fang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib9" title="">2024</a>)</cite>, training small models to filter out irrelevant passages <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib29" title="">2023c</a>; Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib34" title="">2023</a>)</cite>, passage reranking <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib42" title="">2024</a>; Glass et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib10" title="">2022</a>)</cite>, dynamic and iterative retrieval <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib13" title="">2023</a>; Asai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib1" title="">2023</a>; Yan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib37" title="">2024</a>)</cite>, query rewriting <cite class="ltx_cite ltx_citemacro_citep">(Ma et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib19" title="">2023</a>)</cite>, and speculative drafting <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib30" title="">2024</a>)</cite>. These studies focus on distinct modules or stages of RAG systems and are orthogonal to our work.</p>
</div>
<div class="ltx_para" id="S5.p2">
<p class="ltx_p" id="S5.p2.1">Our work focuses on enhancing RAG robustness at the post-retrieval stage, after retrieved passages have been provided. On this topic, RobustRAG <cite class="ltx_cite ltx_citemacro_citep">(Xiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib32" title="">2024</a>)</cite> aggregates answers from each independent passage to provide certifiable robustness. InstructRAG <cite class="ltx_cite ltx_citemacro_citep">(Wei et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib31" title="">2024</a>)</cite> instructs the LLM to provide a rationale connecting the answer with information in passages. MADRA <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib28" title="">2023b</a>)</cite> applies multi-agent debate to select helpful evidence. However, these works do not explicitly incorporate internal knowledge to recover from RAG failures and may therefore collapse when the majority of retrieved passages are negative.
In terms of emphasizing internal knowledge of LLMs in RAG, recent work has explored using LLM-generated passage as context <cite class="ltx_cite ltx_citemacro_citep">(Yu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib40" title="">2023a</a>; Zhang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib43" title="">2023</a>)</cite>, adaptively switching between LLMs with and without RAG <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib35" title="">2024a</a>; Mallen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib20" title="">2023</a>; Jeong et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib12" title="">2024</a>)</cite>, and combining answers from internal and external knowledge through contrastive decoding <cite class="ltx_cite ltx_citemacro_citep">(Zhao et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib44" title="">2024</a>; Jin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib14" title="">2024</a>)</cite>.
We focus on a black-box setting where no further training is required, directly addressing knowledge conflicts to combine the helpful information from both sides and achieve more reliable answers.</p>
</div>
</section>
<section class="ltx_section" id="S6" lang="en">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">Our paper investigates the impact of imperfect retrieval on the performance of RAG systems and identifies knowledge conflicts as a key challenge. To address this, we introduce <span class="ltx_text ltx_font_smallcaps" id="S6.p1.1.1">Astute RAG</span>, a novel approach that leverages the internal knowledge of LLMs and iteratively refines the generated responses by consolidating internal and external knowledge in a source way. Our empirical results demonstrate the effectiveness of <span class="ltx_text ltx_font_smallcaps" id="S6.p1.1.2">Astute RAG</span> in mitigating the negative effects of imperfect retrieval and improving the robustness of RAG systems, particularly in challenging scenarios with unreliable external sources.</p>
</div>
<div class="ltx_para" id="S6.p2">
<p class="ltx_p" id="S6.p2.1">Among the limitations, <span class="ltx_text ltx_font_smallcaps" id="S6.p2.1.1">Astute RAG</span>’s effectiveness hinges on the capabilities of advanced LLMs with strong instruction-following and reasoning abilities, hence potentially more limited applicability with less sophisticated LLMs.
As an important future direction, extending the experimental setup to include longer outputs would be important, where the challenges of imperfect retrieval and knowledge conflicts may be even more pronounced. Furthermore, a comprehensive analysis of the impact of various context types <cite class="ltx_cite ltx_citemacro_citep">(Balachandran et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib3" title="">2024</a>)</cite> would enhance the understanding of the proposed method’s effectiveness. Future work can also extend our method beyond LLMs and RAG, such as addressing knowledge conflicts in multimodal settings <cite class="ltx_cite ltx_citemacro_citep">(Zhu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib45" title="">2024</a>)</cite>.</p>
</div>
</section>
<section class="ltx_section" id="Sx1" lang="en">
<h2 class="ltx_title ltx_title_section">Acknowledgement</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">We would like to thank Jinsung Yoon for valuable discussions and insights that helped to improve this paper. We would also like to thank all other colleagues from Google Cloud AI Research for their valuable feedback.</p>
</div>
<div class="ltx_para" id="Sx1.p2">
<span class="ltx_ERROR undefined" id="Sx1.p2.1">\nobibliography</span>
<p class="ltx_p" id="Sx1.p2.2">*</p>
</div>
</section>
<section class="ltx_bibliography" id="bib" lang="en">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Asai et al. (2023)</span>
<span class="ltx_bibblock">
A. Asai, Z. Wu, Y. Wang, A. Sil, and H. Hajishirzi.

</span>
<span class="ltx_bibblock">Self-rag: Learning to retrieve, generate, and critique through self-reflection.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">The Twelfth International Conference on Learning Representations</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2022)</span>
<span class="ltx_bibblock">
Y. Bai, S. Kadavath, S. Kundu, A. Askell, J. Kernion, A. Jones, A. Chen, A. Goldie, A. Mirhoseini, C. McKinnon, et al.

</span>
<span class="ltx_bibblock">Constitutional ai: Harmlessness from ai feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv preprint arXiv:2212.08073</em>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Balachandran et al. (2024)</span>
<span class="ltx_bibblock">
V. Balachandran, J. Chen, N. Joshi, B. Nushi, H. Palangi, E. Salinas, V. Vineet, J. Woffinden-Luey, and S. Yousefi.

</span>
<span class="ltx_bibblock">Eureka: Evaluating and understanding large foundation models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">arXiv preprint arXiv:2409.10566</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Borgeaud et al. (2022)</span>
<span class="ltx_bibblock">
S. Borgeaud, A. Mensch, J. Hoffmann, T. Cai, E. Rutherford, K. Millican, G. B. Van Den Driessche, J.-B. Lespiau, B. Damoc, A. Clark, et al.

</span>
<span class="ltx_bibblock">Improving language models by retrieving from trillions of tokens.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">International conference on machine learning</em>, pages 2206–2240. PMLR, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2024a)</span>
<span class="ltx_bibblock">
J. Chen, H. Lin, X. Han, and L. Sun.

</span>
<span class="ltx_bibblock">Benchmarking large language models in retrieval-augmented generation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">Proceedings of the AAAI Conference on Artificial Intelligence</em>, volume 38, pages 17754–17762, 2024a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2024b)</span>
<span class="ltx_bibblock">
X. Chen, R. Aksitov, U. Alon, J. Ren, K. Xiao, P. Yin, S. Prakash, C. Sutton, X. Wang, and D. Zhou.

</span>
<span class="ltx_bibblock">Universal self-consistency for large language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">ICML 2024 Workshop on In-Context Learning</em>, 2024b.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cuconasu et al. (2024)</span>
<span class="ltx_bibblock">
F. Cuconasu, G. Trappolini, F. Siciliano, S. Filice, C. Campagnano, Y. Maarek, N. Tonellotto, and F. Silvestri.

</span>
<span class="ltx_bibblock">The power of noise: Redefining retrieval for rag systems.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">Proceedings of the 47th International ACM SIGIR Conference on Research and Development in Information Retrieval</em>, pages 719–729, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dai et al. (2024)</span>
<span class="ltx_bibblock">
S. Dai, C. Xu, S. Xu, L. Pang, Z. Dong, and J. Xu.

</span>
<span class="ltx_bibblock">Unifying bias and unfairness in information retrieval: A survey of challenges and opportunities with large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">arXiv preprint arXiv:2404.11457</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fang et al. (2024)</span>
<span class="ltx_bibblock">
F. Fang, Y. Bai, S. Ni, M. Yang, X. Chen, and R. Xu.

</span>
<span class="ltx_bibblock">Enhancing noise robustness of retrieval-augmented language models with adaptive adversarial training.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">arXiv preprint arXiv:2405.20978</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Glass et al. (2022)</span>
<span class="ltx_bibblock">
M. Glass, G. Rossiello, M. F. M. Chowdhury, A. Naik, P. Cai, and A. Gliozzo.

</span>
<span class="ltx_bibblock">Re2g: Retrieve, rerank, generate.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Proceedings of the 2022 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies</em>, pages 2701–2715, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guu et al. (2020)</span>
<span class="ltx_bibblock">
K. Guu, K. Lee, Z. Tung, P. Pasupat, and M. Chang.

</span>
<span class="ltx_bibblock">Retrieval augmented language model pre-training.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">International conference on machine learning</em>, pages 3929–3938. PMLR, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jeong et al. (2024)</span>
<span class="ltx_bibblock">
S. Jeong, J. Baek, S. Cho, S. J. Hwang, and J. C. Park.

</span>
<span class="ltx_bibblock">Adaptive-rag: Learning to adapt retrieval-augmented large language models through question complexity.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Proceedings of the 2024 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies (Volume 1: Long Papers)</em>, pages 7029–7043, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023)</span>
<span class="ltx_bibblock">
Z. Jiang, F. F. Xu, L. Gao, Z. Sun, Q. Liu, J. Dwivedi-Yu, Y. Yang, J. Callan, and G. Neubig.

</span>
<span class="ltx_bibblock">Active retrieval augmented generation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 7969–7992, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jin et al. (2024)</span>
<span class="ltx_bibblock">
Z. Jin, P. Cao, Y. Chen, K. Liu, X. Jiang, J. Xu, L. Qiuxia, and J. Zhao.

</span>
<span class="ltx_bibblock">Tug-of-war between knowledge: Exploring and resolving knowledge conflicts in retrieval-augmented language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Proceedings of the 2024 Joint International Conference on Computational Linguistics, Language Resources and Evaluation (LREC-COLING 2024)</em>, pages 16867–16878, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Joshi et al. (2017)</span>
<span class="ltx_bibblock">
M. Joshi, E. Choi, D. S. Weld, and L. Zettlemoyer.

</span>
<span class="ltx_bibblock">Triviaqa: A large scale distantly supervised challenge dataset for reading comprehension.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">Proceedings of the 55th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 1601–1611, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kwiatkowski et al. (2019)</span>
<span class="ltx_bibblock">
T. Kwiatkowski, J. Palomaki, O. Redfield, M. Collins, A. Parikh, C. Alberti, D. Epstein, I. Polosukhin, J. Devlin, K. Lee, et al.

</span>
<span class="ltx_bibblock">Natural questions: a benchmark for question answering research.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Transactions of the Association for Computational Linguistics</em>, 7:453–466, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
P. Lewis, E. Perez, A. Piktus, F. Petroni, V. Karpukhin, N. Goyal, H. Küttler, M. Lewis, W.-t. Yih, T. Rocktäschel, et al.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for knowledge-intensive nlp tasks.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Advances in Neural Information Processing Systems</em>, 33:9459–9474, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Longpre et al. (2021)</span>
<span class="ltx_bibblock">
S. Longpre, K. Perisetla, A. Chen, N. Ramesh, C. DuBois, and S. Singh.

</span>
<span class="ltx_bibblock">Entity-based knowledge conflicts in question answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">Proceedings of the 2021 Conference on Empirical Methods in Natural Language Processing</em>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ma et al. (2023)</span>
<span class="ltx_bibblock">
X. Ma, Y. Gong, P. He, H. Zhao, and N. Duan.

</span>
<span class="ltx_bibblock">Query rewriting in retrieval-augmented large language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 5303–5315, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mallen et al. (2023)</span>
<span class="ltx_bibblock">
A. Mallen, A. Asai, V. Zhong, R. Das, D. Khashabi, and H. Hajishirzi.

</span>
<span class="ltx_bibblock">When not to trust language models: Investigating effectiveness of parametric and non-parametric memories.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 9802–9822, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pan et al. (2024)</span>
<span class="ltx_bibblock">
R. Pan, B. Cao, H. Lin, X. Han, J. Zheng, S. Wang, X. Cai, and L. Sun.

</span>
<span class="ltx_bibblock">Not all contexts are equal: Teaching llms credibility-aware generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">arXiv preprint arXiv:2404.06809</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shao et al. (2024)</span>
<span class="ltx_bibblock">
R. Shao, J. He, A. Asai, W. Shi, T. Dettmers, S. Min, L. Zettlemoyer, and P. W. Koh.

</span>
<span class="ltx_bibblock">Scaling retrieval-based language models with a trillion-token datastore.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">arXiv preprint arXiv:2407.12854</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Su et al. (2024)</span>
<span class="ltx_bibblock">
H. Su, H. Yen, M. Xia, W. Shi, N. Muennighoff, H.-y. Wang, H. Liu, Q. Shi, Z. S. Siegel, M. Tang, et al.

</span>
<span class="ltx_bibblock">Bright: A realistic and challenging benchmark for reasoning-intensive retrieval.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">arXiv preprint arXiv:2407.12883</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tan et al. (2024)</span>
<span class="ltx_bibblock">
H. Tan, F. Sun, W. Yang, Y. Wang, Q. Cao, and X. Cheng.

</span>
<span class="ltx_bibblock">Blinded by generated contexts: How language models merge generated and retrieved contexts for open-domain qa?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">arXiv preprint arXiv:2401.11911</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Thakur et al. (2024)</span>
<span class="ltx_bibblock">
N. Thakur, N. Reimers, A. Rücklé, A. Srivastava, and I. Gurevych.

</span>
<span class="ltx_bibblock">Beir: A heterogeneous benchmark for zero-shot evaluation of information retrieval models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Thirty-fifth Conference on Neural Information Processing Systems Datasets and Benchmarks Track (Round 2)</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tsatsaronis et al. (2015)</span>
<span class="ltx_bibblock">
G. Tsatsaronis, G. Balikas, P. Malakasiotis, I. Partalas, M. Zschunke, M. R. Alvers, D. Weissenborn, A. Krithara, S. Petridis, D. Polychronopoulos, et al.

</span>
<span class="ltx_bibblock">An overview of the bioasq large-scale biomedical semantic indexing and question answering competition.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">BMC bioinformatics</em>, 16:1–28, 2015.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023a)</span>
<span class="ltx_bibblock">
F. Wang, W. Mo, Y. Wang, W. Zhou, and M. Chen.

</span>
<span class="ltx_bibblock">A causal view of entity bias in (large) language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">Findings of the Association for Computational Linguistics: EMNLP 2023</em>, pages 15173–15184, 2023a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023b)</span>
<span class="ltx_bibblock">
H. Wang, X. Du, W. Yu, Q. Chen, K. Zhu, Z. Chu, L. Yan, and Y. Guan.

</span>
<span class="ltx_bibblock">Apollo’s oracle: Retrieval-augmented reasoning in multi-agent debates.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">arXiv preprint arXiv:2312.04854</em>, 2023b.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023c)</span>
<span class="ltx_bibblock">
Z. Wang, J. Araki, Z. Jiang, M. R. Parvez, and G. Neubig.

</span>
<span class="ltx_bibblock">Learning to filter context for retrieval-augmented generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">arXiv preprint arXiv:2311.08377</em>, 2023c.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2024)</span>
<span class="ltx_bibblock">
Z. Wang, Z. Wang, L. Le, H. S. Zheng, S. Mishra, V. Perot, Y. Zhang, A. Mattapalli, A. Taly, J. Shang, et al.

</span>
<span class="ltx_bibblock">Speculative rag: Enhancing retrieval augmented generation through drafting.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">arXiv preprint arXiv:2407.08223</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et al. (2024)</span>
<span class="ltx_bibblock">
Z. Wei, W.-L. Chen, and Y. Meng.

</span>
<span class="ltx_bibblock">Instructrag: Instructing retrieval-augmented generation with explicit denoising.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">arXiv preprint arXiv:2406.13629</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xiang et al. (2024)</span>
<span class="ltx_bibblock">
C. Xiang, T. Wu, Z. Zhong, D. Wagner, D. Chen, and P. Mittal.

</span>
<span class="ltx_bibblock">Certifiably robust rag against retrieval corruption.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">arXiv preprint arXiv:2405.15556</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xie et al. (2024)</span>
<span class="ltx_bibblock">
J. Xie, K. Zhang, J. Chen, R. Lou, and Y. Su.

</span>
<span class="ltx_bibblock">Adaptive chameleon or stubborn sloth: Revealing the behavior of large language models in knowledge conflicts.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">The Twelfth International Conference on Learning Representations</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2023)</span>
<span class="ltx_bibblock">
F. Xu, W. Shi, and E. Choi.

</span>
<span class="ltx_bibblock">Recomp: Improving retrieval-augmented lms with compression and selective augmentation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">arXiv preprint arXiv:2310.04408</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2024a)</span>
<span class="ltx_bibblock">
P. Xu, W. Ping, X. Wu, L. McAfee, C. Zhu, Z. Liu, S. Subramanian, E. Bakhturina, M. Shoeybi, and B. Catanzaro.

</span>
<span class="ltx_bibblock">Retrieval meets long context large language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">The Twelfth International Conference on Learning Representations</em>, 2024a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2024b)</span>
<span class="ltx_bibblock">
R. Xu, Z. Qi, C. Wang, H. Wang, Y. Zhang, and W. Xu.

</span>
<span class="ltx_bibblock">Knowledge conflicts for llms: A survey.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">arXiv preprint arXiv:2403.08319</em>, 2024b.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yan et al. (2024)</span>
<span class="ltx_bibblock">
S.-Q. Yan, J.-C. Gu, Y. Zhu, and Z.-H. Ling.

</span>
<span class="ltx_bibblock">Corrective retrieval augmented generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">arXiv preprint arXiv:2401.15884</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang et al. (2024)</span>
<span class="ltx_bibblock">
X. Yang, K. Sun, H. Xin, Y. Sun, N. Bhalla, X. Chen, S. Choudhary, R. D. Gui, Z. W. Jiang, Z. Jiang, et al.

</span>
<span class="ltx_bibblock">Crag–comprehensive rag benchmark.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">arXiv preprint arXiv:2406.04744</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yoran et al. (2024)</span>
<span class="ltx_bibblock">
O. Yoran, T. Wolfson, O. Ram, and J. Berant.

</span>
<span class="ltx_bibblock">Making retrieval-augmented language models robust to irrelevant context.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib39.1.1">The Twelfth International Conference on Learning Representations</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2023a)</span>
<span class="ltx_bibblock">
W. Yu, D. Iter, S. Wang, Y. Xu, M. Ju, S. Sanyal, C. Zhu, M. Zeng, and M. Jiang.

</span>
<span class="ltx_bibblock">Generate rather than retrieve: Large language models are strong context generators.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib40.1.1">The Eleventh International Conference on Learning Representations</em>, 2023a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2023b)</span>
<span class="ltx_bibblock">
W. Yu, H. Zhang, X. Pan, K. Ma, H. Wang, and D. Yu.

</span>
<span class="ltx_bibblock">Chain-of-note: Enhancing robustness in retrieval-augmented language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib41.1.1">arXiv preprint arXiv:2311.09210</em>, 2023b.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu et al. (2024)</span>
<span class="ltx_bibblock">
Y. Yu, W. Ping, Z. Liu, B. Wang, J. You, C. Zhang, M. Shoeybi, and B. Catanzaro.

</span>
<span class="ltx_bibblock">Rankrag: Unifying context ranking with retrieval-augmented generation in llms.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib42.1.1">arXiv preprint arXiv:2407.02485</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2023)</span>
<span class="ltx_bibblock">
Y. Zhang, M. Khalifa, L. Logeswaran, M. Lee, H. Lee, and L. Wang.

</span>
<span class="ltx_bibblock">Merging generated and retrieved knowledge for open-domain qa.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib43.1.1">The 2023 Conference on Empirical Methods in Natural Language Processing</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao et al. (2024)</span>
<span class="ltx_bibblock">
Z. Zhao, E. Monti, J. Lehmann, and H. Assem.

</span>
<span class="ltx_bibblock">Enhancing contextual understanding in large language models through contrastive decoding.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib44.1.1">Proceedings of the 2024 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies (Volume 1: Long Papers)</em>, pages 4225–4237, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhu et al. (2024)</span>
<span class="ltx_bibblock">
T. Zhu, Q. Liu, F. Wang, Z. Tu, and M. Chen.

</span>
<span class="ltx_bibblock">Unraveling cross-modality knowledge conflict in large vision-language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib45.1.1">arXiv preprint arXiv:2410.03659</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zou et al. (2024)</span>
<span class="ltx_bibblock">
W. Zou, R. Geng, B. Wang, and J. Jia.

</span>
<span class="ltx_bibblock">Poisonedrag: Knowledge poisoning attacks to retrieval-augmented generation of large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib46.1.1">arXiv preprint arXiv:2402.07867</em>, 2024.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1" lang="en">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Prompt Template for <span class="ltx_text ltx_font_smallcaps" id="A1.1.1">Astute RAG</span>
</h2>
<div class="ltx_para ltx_noindent" id="A1.p1">
<svg class="ltx_picture" height="131.49" id="A1.p1.pic1" overflow="visible" version="1.1" width="600"><g fill="#000000" stroke="#000000" stroke-width="0.4pt" transform="translate(0,131.49) matrix(1 0 0 -1 0 0)"><g fill="#000000" fill-opacity="1.0"><path d="M 0 5.91 L 0 125.59 C 0 128.85 2.64 131.49 5.91 131.49 L 594.09 131.49 C 597.36 131.49 600 128.85 600 125.59 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 105.85 L 598.03 105.85 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 111.75)"><foreignobject color="#FFFFFF" height="13.84" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="556.69">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" style="width:402.3pt;">
<span class="ltx_p" id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1">Prompt for Adaptive Passage Generation (<math alttext="p_{gen}" class="ltx_Math" display="inline" id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1"><semantics id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1a"><msub id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml"><mi id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml">p</mi><mrow id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml"><mi id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2.cmml">g</mi><mo id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3.cmml">e</mi><mo id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1a" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4.cmml">n</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1b"><apply id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.1.cmml" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1">subscript</csymbol><ci id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2">𝑝</ci><apply id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3"><times id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1"></times><ci id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2.cmml" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2">𝑔</ci><ci id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3.cmml" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3">𝑒</ci><ci id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4.cmml" xref="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1c">p_{gen}</annotation><annotation encoding="application/x-llamapun" id="A1.p1.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1d">italic_p start_POSTSUBSCRIPT italic_g italic_e italic_n end_POSTSUBSCRIPT</annotation></semantics></math>)</span>
</span></foreignobject></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignobject color="#000000" height="80.25" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="556.69">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A1.p1.pic1.2.2.2.1.1" style="width:402.3pt;">
<span class="ltx_p" id="A1.p1.pic1.2.2.2.1.1.1">Generate a document that provides accurate and relevant information to answer the given question. If the information is unclear or uncertain, explicitly state ’I don’t know’ to avoid any hallucinations.</span>
<span class="ltx_p" id="A1.p1.pic1.2.2.2.1.1.2">Question: {question}
Document:</span>
</span></foreignobject></g></g></svg>
</div>
<div class="ltx_para ltx_noindent" id="A1.p2">
<svg class="ltx_picture" height="231.12" id="A1.p2.pic1" overflow="visible" version="1.1" width="600"><g fill="#000000" stroke="#000000" stroke-width="0.4pt" transform="translate(0,231.12) matrix(1 0 0 -1 0 0)"><g fill="#000000" fill-opacity="1.0"><path d="M 0 5.91 L 0 225.21 C 0 228.48 2.64 231.12 5.91 231.12 L 594.09 231.12 C 597.36 231.12 600 228.48 600 225.21 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 205.47 L 598.03 205.47 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 211.38)"><foreignobject color="#FFFFFF" height="13.84" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="556.69">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" style="width:402.3pt;">
<span class="ltx_p" id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1">Prompt for Iterative Knowledge Consolidation (<math alttext="p_{con}" class="ltx_Math" display="inline" id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1"><semantics id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1a"><msub id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml"><mi id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml">p</mi><mrow id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml"><mi id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2.cmml">c</mi><mo id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3.cmml">o</mi><mo id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1a" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4.cmml">n</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1b"><apply id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.1.cmml" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1">subscript</csymbol><ci id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2">𝑝</ci><apply id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3"><times id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1"></times><ci id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2.cmml" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2">𝑐</ci><ci id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3.cmml" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3">𝑜</ci><ci id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4.cmml" xref="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1c">p_{con}</annotation><annotation encoding="application/x-llamapun" id="A1.p2.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1d">italic_p start_POSTSUBSCRIPT italic_c italic_o italic_n end_POSTSUBSCRIPT</annotation></semantics></math>)</span>
</span></foreignobject></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignobject color="#000000" height="179.88" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="556.69">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A1.p2.pic1.2.2.2.1.1" style="width:402.3pt;">
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.1">Task: Consolidate information from both your own memorized documents and externally retrieved documents in response to the given question.</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.2">* For documents that provide consistent information, cluster them together and summarize the key details into a single, concise document.</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.3">* For documents with conflicting information, separate them into distinct documents, ensuring each captures the unique perspective or data.</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.4">* Exclude any information irrelevant to the query.</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.5">For each new document created, clearly indicate:</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.6">* Whether the source was from memory or an external retrieval.</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.7">* The original document numbers for transparency.</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.8">Initial Context: {context}</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.9">Last Context: {context}</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.10">Question: {question}</span>
<span class="ltx_p" id="A1.p2.pic1.2.2.2.1.1.11">New Context:</span>
</span></foreignobject></g></g></svg>
</div>
<div class="ltx_para ltx_noindent" id="A1.p3">
<svg class="ltx_picture" height="380.56" id="A1.p3.pic1" overflow="visible" version="1.1" width="600"><g fill="#000000" stroke="#000000" stroke-width="0.4pt" transform="translate(0,380.56) matrix(1 0 0 -1 0 0)"><g fill="#000000" fill-opacity="1.0"><path d="M 0 5.91 L 0 374.65 C 0 377.92 2.64 380.56 5.91 380.56 L 594.09 380.56 C 597.36 380.56 600 377.92 600 374.65 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 354.91 L 598.03 354.91 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 360.82)"><foreignobject color="#FFFFFF" height="13.84" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="556.69">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" style="width:402.3pt;">
<span class="ltx_p" id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1">Prompt for Knowledge Consolidation and Answer Finalization (<math alttext="p_{ans}" class="ltx_Math" display="inline" id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1"><semantics id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1a"><msub id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml"><mi id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml">p</mi><mrow id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml"><mi id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2.cmml">a</mi><mo id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3.cmml">n</mi><mo id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1a" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4.cmml">s</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1b"><apply id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.1.cmml" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1">subscript</csymbol><ci id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2.cmml" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.2">𝑝</ci><apply id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.cmml" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3"><times id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1.cmml" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.1"></times><ci id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2.cmml" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.2">𝑎</ci><ci id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3.cmml" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.3">𝑛</ci><ci id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4.cmml" xref="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1.1.3.4">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1c">p_{ans}</annotation><annotation encoding="application/x-llamapun" id="A1.p3.pic1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.m1.1d">italic_p start_POSTSUBSCRIPT italic_a italic_n italic_s end_POSTSUBSCRIPT</annotation></semantics></math>)</span>
</span></foreignobject></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignobject color="#000000" height="329.32" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="556.69">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4" style="width:402.3pt;">
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.5">Task: Answer a given question using the consolidated information from both your own memorized documents and externally retrieved documents.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.6">Step 1: Consolidate information</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.7">* For documents that provide consistent information, cluster them together and summarize the key details into a single, concise document.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.8">* For documents with conflicting information, separate them into distinct documents, ensuring each captures the unique perspective or data.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.9">* Exclude any information irrelevant to the query.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.10">For each new document created, clearly indicate:</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.11">* Whether the source was from memory or an external retrieval.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.12">* The original document numbers for transparency.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.13">Step 2: Propose Answers and Assign Confidence</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.14">For each group of documents, propose a possible answer and assign a confidence score based on the credibility and agreement of the information.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.15">Step 3: Select the Final Answer</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.16">After evaluating all groups, select the most accurate and well-supported answer.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4">Highlight your exact answer within <math alttext="&lt;" class="ltx_Math" display="inline" id="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1"><semantics id="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1a"><mo id="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1.1" xref="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1.1.cmml">&lt;</mo><annotation-xml encoding="MathML-Content" id="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1b"><lt id="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1.1"></lt></annotation-xml><annotation encoding="application/x-tex" id="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1c">&lt;</annotation><annotation encoding="application/x-llamapun" id="A1.p3.pic1.2.2.2.2.2.2.2.2.2.2.2.1.1.1.1.1.1.1.m1.1d">&lt;</annotation></semantics></math>ANSWER<math alttext="&gt;" class="ltx_Math" display="inline" id="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1"><semantics id="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1a"><mo id="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1.1" xref="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1.1.cmml">&gt;</mo><annotation-xml encoding="MathML-Content" id="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1b"><gt id="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1.1.cmml" xref="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1.1"></gt></annotation-xml><annotation encoding="application/x-tex" id="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1c">&gt;</annotation><annotation encoding="application/x-llamapun" id="A1.p3.pic1.3.3.3.3.3.3.3.3.3.3.3.2.2.2.2.2.2.2.m2.1d">&gt;</annotation></semantics></math> your answer <math alttext="&lt;" class="ltx_Math" display="inline" id="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1"><semantics id="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1a"><mo id="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1.1" xref="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1.1.cmml">&lt;</mo><annotation-xml encoding="MathML-Content" id="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1b"><lt id="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1.1.cmml" xref="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1.1"></lt></annotation-xml><annotation encoding="application/x-tex" id="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1c">&lt;</annotation><annotation encoding="application/x-llamapun" id="A1.p3.pic1.4.4.4.4.4.4.4.4.4.4.4.3.3.3.3.3.3.3.m3.1d">&lt;</annotation></semantics></math>/ANSWER<math alttext="&gt;" class="ltx_Math" display="inline" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1"><semantics id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1a"><mo id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1.1" xref="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1.1.cmml">&gt;</mo><annotation-xml encoding="MathML-Content" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1b"><gt id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1.1.cmml" xref="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1.1"></gt></annotation-xml><annotation encoding="application/x-tex" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1c">&gt;</annotation><annotation encoding="application/x-llamapun" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.4.m4.1d">&gt;</annotation></semantics></math>.</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.17">Initial Context: {context_init}</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.18">[Consolidated Context: {context}] # optional</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.19">Question: {question}</span>
<span class="ltx_p" id="A1.p3.pic1.5.5.5.5.5.5.5.5.5.5.5.4.4.4.4.4.4.20">Answer:</span>
</span></foreignobject></g></g></svg>
</div>
</section>
<section class="ltx_appendix" id="A2" lang="en">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Data Collection</h2>
<div class="ltx_para" id="A2.p1">
<p class="ltx_p" id="A2.p1.1">Encompassing a <span class="ltx_text ltx_font_italic" id="A2.p1.1.1">diverse</span> range of <span class="ltx_text ltx_font_italic" id="A2.p1.1.2">natural</span> questions, our benchmark consists of <span class="ltx_text ltx_font_italic" id="A2.p1.1.3">realistic</span> retrieval results with Google Search<span class="ltx_note ltx_role_footnote" id="footnote9"><sup class="ltx_note_mark">9</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">9</sup><span class="ltx_tag ltx_tag_note">9</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://developers.google.com/custom-search/v1/overview" title="">https://developers.google.com/custom-search/v1/overview</a></span></span></span> as the retriever and the Web as the corpus. Notably, we do not select questions or annotate answers based on the retrieval results. This setting allows us to analyze the severity of imperfect retrieval in real-world RAG. It distinguishes our benchmark from previous ones that employ synthetic retrieval corruptions or that unintentionally reduce the frequency of imperfect retrieval with biased construction protocols <cite class="ltx_cite ltx_citemacro_citep">(Chen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib5" title="">2024a</a>; Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib38" title="">2024</a>)</cite>. Overall, our benchmark contains 1,042 short-form question-answer pairs, each paired with 10 retrieved passages.</p>
</div>
<div class="ltx_para" id="A2.p2">
<p class="ltx_p" id="A2.p2.1"><span class="ltx_text ltx_font_bold" id="A2.p2.1.1">Question-answer pairs.</span>
We consider question-answer pairs from four datasets of different properties spanning across general questions, domain-specific questions, and long-tail questions. NQ <cite class="ltx_cite ltx_citemacro_citep">(Kwiatkowski et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib16" title="">2019</a>)</cite> and TriviaQA <cite class="ltx_cite ltx_citemacro_citep">(Joshi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib15" title="">2017</a>)</cite> are two widely-studied question-answering (QA) datasets in general domains. BioASQ <cite class="ltx_cite ltx_citemacro_citep">(Tsatsaronis et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib26" title="">2015</a>)</cite> is from biomedical domain that has demonstrated significant benefits from RAG when general-purpose LLMs are considered. PopQA <cite class="ltx_cite ltx_citemacro_citep">(Mallen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.07176v1#bib.bib20" title="">2023</a>)</cite> focuses on long-tail knowledge and has been shown to be challenging for even advanced LLMs to solve without external knowledge. All these datasets contain questions with short-form answers and most of them list all valid answer variants. This format can support automatic verification of answer appearance in retrieved passages and model responses, leading to more precise evaluations.</p>
</div>
<div class="ltx_para" id="A2.p3">
<p class="ltx_p" id="A2.p3.1"><span class="ltx_text ltx_font_bold" id="A2.p3.1.1">Retrieval process.</span>
For each question in our benchmark, we query Google Search to retrieve the top 30 results and select the first 10 accessible websites. From each retrieved website, we extract the paragraph corresponding to the snippet provided in Google Search results as the retrieved passage. We do not consider enhancements to the retrieval side, such as query rewriting, as such enhancements are typically already incorporated into commercial information retrieval systems.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Wed Oct  9 17:30:40 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
