<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering</title>
<!--Generated on Mon Sep 30 06:37:58 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2409.20424v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S1" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S2" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S2.SS0.SSS0.Px1" title="In 2 Related Work ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Vision Language Models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S2.SS0.SSS0.Px2" title="In 2 Related Work ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Multi-modal Dataset Construction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S2.SS0.SSS0.Px3" title="In 2 Related Work ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Code Representation for Visual Tasks</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Method</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS1" title="In 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Visual Concepts Extraction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS2" title="In 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Self-Instructed Information Extraction</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS2.SSS0.Px1" title="In 3.2 Self-Instructed Information Extraction ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Region-level Captions</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS2.SSS0.Px2" title="In 3.2 Self-Instructed Information Extraction ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">OCR information</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS3" title="In 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Information Filtering via Self Consistency</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS3.SSS0.Px1" title="In 3.3 Information Filtering via Self Consistency ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Counting Filtering via Consistency</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS3.SSS0.Px2" title="In 3.3 Information Filtering via Self Consistency ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Caption Re-ranking via Consistency</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS4" title="In 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Structured Formatting and Filtering</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS1" title="In 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Experimental Setup</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS1.SSS0.Px1" title="In 4.1 Experimental Setup ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Datasets</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS1.SSS0.Px2" title="In 4.1 Experimental Setup ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Implementation Details</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS1.SSS0.Px3" title="In 4.1 Experimental Setup ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Data Processing Details</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS2" title="In 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Main Results</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS2.SSS0.Px1" title="In 4.2 Main Results ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Effectiveness of <span class="ltx_text ltx_font_italic">W2C </span>data improve various VLMs in Visual Question Answering benchmarks</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS2.SSS0.Px2" title="In 4.2 Main Results ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_text ltx_font_italic">W2C </span>data show impressive performance on Grounding benchmarks</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS2.SSS0.Px3" title="In 4.2 Main Results ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Comparison results of more data generation methods and <span class="ltx_text ltx_font_italic">W2C </span>on LLaVA-NeXT-7B model under different benchmarks.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS3" title="In 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Ablation Studies</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS3.SSS0.Px1" title="In 4.3 Ablation Studies ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Organizing data into the python code format presents better performance</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS3.SSS0.Px2" title="In 4.3 Ablation Studies ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Filtering introduces better downstream benchmarks performance</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS4" title="In 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.4 </span>Code Parsing Ability Evaluation</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS4.SSS0.Px1" title="In 4.4 Code Parsing Ability Evaluation ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Experimental Setting</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.SS4.SSS0.Px2" title="In 4.4 Code Parsing Ability Evaluation ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">The code parsing ability of VLMs presents much better few-shot performance.</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S5" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S6" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Limitation</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S6.SS0.SSS0.Px1" title="In 6 Limitation ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Acknowledgments.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A1" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Prompt Templates for <span class="ltx_text ltx_font_italic">W2C </span>data construction pipeline</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A1.SS1" title="In Appendix A Prompt Templates for W2C data construction pipeline ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1 </span>Prompt Templates</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A2" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>More experiments of <span class="ltx_text ltx_font_italic">W2C </span>.</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A2.SS1" title="In Appendix B More experiments of W2C . ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B.1 </span>More Visual Question Answering Benchmarks</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A2.SS2" title="In Appendix B More experiments of W2C . ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B.2 </span>Code Parsing Ability Evaluation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3" title="In World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Implementation Details for <span class="ltx_text ltx_font_italic">W2C </span>experiments</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.SS1" title="In Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1 </span>Dataset Details</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.SS1.SSS0.Px1" title="In C.1 Dataset Details ‣ Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Data Construction Pipeline Details</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.SS1.SSS0.Px2" title="In C.1 Dataset Details ‣ Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title">Training Details</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.SS2" title="In Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.2 </span>Implementation Details of our Pipeline</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.SS3" title="In Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.3 </span>Data Example</span></a></li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document">
<h1 class="ltx_title ltx_title_document">World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Jiacong Wang <sup class="ltx_sup" id="id1.1.id1">1,2</sup>
, Bohong Wu <sup class="ltx_sup" id="id2.2.id2">2<span class="ltx_note ltx_role_footnotemark" id="footnotex1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">footnotemark: </span><span class="ltx_tag ltx_tag_note">1</span></span></span></span></sup>, Haiyong Jiang<sup class="ltx_sup" id="id3.3.id3">1</sup>,
Xun Zhou<sup class="ltx_sup" id="id4.4.id4">2</sup>, 
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="id5.5.id5">Xin Xiao<sup class="ltx_sup" id="id5.5.id5.1"><span class="ltx_text ltx_font_medium" id="id5.5.id5.1.1">2</span></sup></span>, <span class="ltx_text ltx_font_bold" id="id6.6.id6">Haoyuan Guo<sup class="ltx_sup" id="id6.6.id6.1"><span class="ltx_text ltx_font_medium" id="id6.6.id6.1.1">2</span></sup></span>, <span class="ltx_text ltx_font_bold" id="id7.7.id7">Jun Xiao<sup class="ltx_sup" id="id7.7.id7.1"><span class="ltx_text ltx_font_medium" id="id7.7.id7.1.1">1</span></sup></span>
<br class="ltx_break"/><sup class="ltx_sup" id="id8.8.id8">1</sup> School of Artificial Intelligence, University of Chinese Academy of Sciences 
<br class="ltx_break"/><sup class="ltx_sup" id="id9.9.id9">2</sup> ByteDance Inc 
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id10.10.id10">wangjiacong20@mails.ucas.ac.cn</span>,
<span class="ltx_text ltx_font_typewriter" id="id11.11.id11">{haiyong.jiang,xiaojun}@ucas.ac.cn</span>
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id12.12.id12">{bohongwu,guohaoyuan,xiaoxin.ddl}@bytedance.com</span>
<br class="ltx_break"/>
</span><span class="ltx_author_notes">  These authors contributed equally to this work.  Corresponding author.</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id13.id1">Recent advances in Vision-Language Models (VLMs) and the scarcity of high-quality multi-modal alignment data have inspired numerous researches on synthetic VLM data generation.
The conventional norm in VLM data construction uses a mixture of specialists in caption and OCR, or stronger VLM APIs and expensive human annotation.
In this paper, we present World to Code (<span class="ltx_text ltx_font_italic" id="id13.id1.1">W2C</span>), a meticulously curated multi-modal data construction pipeline that organizes the final generation output into a Python code format.
The pipeline leverages the VLM itself to extract cross-modal information via different prompts and filter the generated outputs again via a consistency filtering strategy.
Experiments have demonstrated the high quality of <span class="ltx_text ltx_font_italic" id="id13.id1.2">W2C </span>by improving various existing visual question answering and visual grounding benchmarks across different VLMs. Further analysis also demonstrates that the new code parsing ability of VLMs presents better cross-modal equivalence than the commonly used detail caption ability. Our code is available at <a class="ltx_ref ltx_href" href="https://github.com/foundation-multimodal-models/World2Code" title="">https://github.com/foundation-multimodal-models/World2Code</a>.</p>
</div>
<div class="ltx_para ltx_noindent" id="p1">
<div class="ltx_block ltx_align_bottom" id="p1.1">
<p class="ltx_p" id="p1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.1.1">World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering</span></p>
<br class="ltx_break ltx_centering"/>
<p class="ltx_p ltx_align_center" id="p1.1.2" style="width:433.6pt;"><span class="ltx_text ltx_inline-block" id="p1.1.2.1" style="width:0.0pt;">
<span class="ltx_tabular ltx_align_top" id="p1.1.2.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="p1.1.2.1.1.1.1">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.1.1.1.1">
Jiacong Wang <sup class="ltx_sup" id="p1.1.2.1.1.1.1.1.1.1"><span class="ltx_text ltx_font_medium" id="p1.1.2.1.1.1.1.1.1.1.1">1,2<span class="ltx_note ltx_role_thanks" id="p1.1.2.1.1.1.1.1.1.1.1.1"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">thanks: </span>  These authors contributed equally to this work.</span></span></span></span></sup>
, Bohong Wu <sup class="ltx_sup" id="p1.1.2.1.1.1.1.1.1.2"><span class="ltx_text ltx_font_medium" id="p1.1.2.1.1.1.1.1.1.2.1">2<span class="ltx_note ltx_role_footnotemark" id="footnotex2"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">footnotemark: </span><span class="ltx_tag ltx_tag_note">1</span></span></span></span></span></sup>, Haiyong Jiang<sup class="ltx_sup" id="p1.1.2.1.1.1.1.1.1.3"><span class="ltx_text ltx_font_medium" id="p1.1.2.1.1.1.1.1.1.3.1">1</span></sup>,
Xun Zhou<sup class="ltx_sup" id="p1.1.2.1.1.1.1.1.1.4"><span class="ltx_text ltx_font_medium" id="p1.1.2.1.1.1.1.1.1.4.1">2</span></sup>,</span></span></span>
<span class="ltx_tr" id="p1.1.2.1.1.2.2">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.2.2.1"><span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.2.2.1.1">Xin Xiao<sup class="ltx_sup" id="p1.1.2.1.1.2.2.1.1.1"><span class="ltx_text ltx_font_medium" id="p1.1.2.1.1.2.2.1.1.1.1">2</span></sup></span>, <span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.2.2.1.2">Haoyuan Guo<sup class="ltx_sup" id="p1.1.2.1.1.2.2.1.2.1"><span class="ltx_text ltx_font_medium" id="p1.1.2.1.1.2.2.1.2.1.1">2</span></sup></span>, <span class="ltx_text ltx_font_bold" id="p1.1.2.1.1.2.2.1.3">Jun Xiao<sup class="ltx_sup" id="p1.1.2.1.1.2.2.1.3.1"><span class="ltx_text ltx_font_medium" id="p1.1.2.1.1.2.2.1.3.1.1">1</span><span class="ltx_note ltx_role_thanks" id="p1.1.2.1.1.2.2.1.3.1.2"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">thanks: </span><span class="ltx_text ltx_font_medium" id="p1.1.2.1.1.2.2.1.3.1.2.1">  Corresponding author.</span></span></span></span></sup></span></span></span>
<span class="ltx_tr" id="p1.1.2.1.1.3.3">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.3.3.1"><sup class="ltx_sup" id="p1.1.2.1.1.3.3.1.1">1</sup> School of Artificial Intelligence, University of Chinese Academy of Sciences</span></span>
<span class="ltx_tr" id="p1.1.2.1.1.4.4">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.4.4.1"><sup class="ltx_sup" id="p1.1.2.1.1.4.4.1.1">2</sup> ByteDance Inc</span></span>
<span class="ltx_tr" id="p1.1.2.1.1.5.5">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.5.5.1"><span class="ltx_text ltx_font_typewriter" id="p1.1.2.1.1.5.5.1.1">wangjiacong20@mails.ucas.ac.cn</span>,
<span class="ltx_text ltx_font_typewriter" id="p1.1.2.1.1.5.5.1.2">{haiyong.jiang,xiaojun}@ucas.ac.cn</span></span></span>
<span class="ltx_tr" id="p1.1.2.1.1.6.6">
<span class="ltx_td ltx_align_center" id="p1.1.2.1.1.6.6.1"><span class="ltx_text ltx_font_typewriter" id="p1.1.2.1.1.6.6.1.1">{bohongwu,guohaoyuan,xiaoxin.ddl}@bytedance.com</span></span></span>
</span>
</span></span></p>
<br class="ltx_break ltx_centering"/>
</div>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Fueled by the rapid development of Vision-Language Models (VLMs) <cite class="ltx_cite ltx_citemacro_cite">Zhu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib64" title="">2023</a>); Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib32" title="">2024b</a>); Team et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib48" title="">2023</a>); Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib31" title="">2024a</a>); Dong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib12" title="">2024b</a>)</cite> and Diffusion Models (DMs) <cite class="ltx_cite ltx_citemacro_cite">Betker et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib3" title="">2023</a>)</cite>, collecting detailed and concrete high-quality captions for each image becomes more and more urging.
However, expensive and tedious human labeling for high-quality image-text pairs further incurs the necessity of a cheap and reliable data construction pipeline without human intervention.</p>
</div>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="198" id="S1.F1.g1" src="extracted/5887330/latex/figure/main_figure/w2s_overview.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Overview of <span class="ltx_text ltx_font_italic" id="S1.F1.3.1">W2C </span>and comparison of existing data construction pipelines. <span class="ltx_text ltx_font_italic" id="S1.F1.4.2">W2C </span>differs from existing works by reducing the need for a mixture of specialists and expensive human annotations via self-instruct.</figcaption>
</figure>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Related works on image-text data curation can be divided into two main streams.
Distillation-based methods leverage closed-source commercial products (e.g., GPT-4V <cite class="ltx_cite ltx_citemacro_cite">Achiam et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib1" title="">2023</a>)</cite>) with the state-of-the-art performance for image caption <cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib7" title="">2023a</a>); Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib29" title="">2024b</a>); Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib5" title="">2024a</a>)</cite>.
Another line of work curates an image caption pipeline with existing VLMs to filter high-quality image-text for the training of better VLMs.
These methods usually combine open-source LLMs <cite class="ltx_cite ltx_citemacro_cite">Touvron et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib51" title="">2023a</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib52" title="">b</a>); Chiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib10" title="">2023</a>)</cite> and different visual specialists <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib24" title="">2023a</a>); Huang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib19" title="">2023b</a>); Zong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib65" title="">2023</a>); Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib62" title="">2024a</a>); Fang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib15" title="">2023</a>); Minderer et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib40" title="">2022</a>); Ren et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib46" title="">2024</a>); Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib61" title="">2023b</a>)</cite> to endow existing VLMs with new abilities, e.g., pixel grounding in GLaMM <cite class="ltx_cite ltx_citemacro_cite">Rasheed et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib45" title="">2023</a>)</cite>.
However, the dependency on a mixture of specialists and human feedback in filtering noisy generations <cite class="ltx_cite ltx_citemacro_cite">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib55" title="">2023b</a>)</cite> makes it difficult to scale the generated data and automate the process.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Recent progress shows that generated results of LLMs <cite class="ltx_cite ltx_citemacro_cite">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib56" title="">2022</a>); Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib26" title="">2023c</a>)</cite> and VLMs <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib63" title="">2024b</a>)</cite> for prompts with similar meanings should be alike and we can help filter out noisy generated texts and captions by consistency checking among multiple prompt instructed results.
In light of the above evidence, we present a self-instructed data construction pipeline, coined <span class="ltx_text ltx_font_italic" id="S1.p3.1.1">W2C </span>.
<span class="ltx_text ltx_font_italic" id="S1.p3.1.2">W2C </span>autonomously extracts and articulates specific content from images, and enhances the reliability of the generated image captions by employing consistency filtering by assessing the outputs through multiple instructed prompt consistencies.
The overall pipeline reduces requested specialists and frees off expensive human feedback as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">1</span></a>.
In addition, we leverage the idea from human-machine interaction and organize the model-generated responses into a Python code format, following Eureka <cite class="ltx_cite ltx_citemacro_cite">Ma et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib36" title="">2023</a>)</cite> and Text2Reward <cite class="ltx_cite ltx_citemacro_cite">Xie et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib58" title="">2023</a>)</cite>.
Experiments have shown that our proposed <span class="ltx_text ltx_font_italic" id="S1.p3.1.3">W2C </span>can improve VLMs on various visual question-answering benchmarks. To be specific, <span class="ltx_text ltx_font_italic" id="S1.p3.1.4">W2C </span>performs the best in 7 out of 9 VQA benchmarks on LLaVA-NeXT-7B, and 6 out of 9 VQA benchmarks on LLaVA-NeXT-13B. Furthermore, <span class="ltx_text ltx_font_italic" id="S1.p3.1.5">W2C </span>also improves few-shot evaluations on two widely used VQA benchmarks including GQA and MME.
Especially, on the 2-shot evaluation of GQA, the method achieves over 5 accuracy gains across different VLMs.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">Our contribution is summarized in threefold:</p>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We present the data pipeline of <span class="ltx_text ltx_font_italic" id="S1.I1.i1.p1.1.1">W2C </span>, which proposes to generate and filter data all by existing VLMs themselves via self-instruct, significantly reducing the need for a mixture of specialists or expensive human annotations in conventional pipelines.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">The generated data of <span class="ltx_text ltx_font_italic" id="S1.I1.i2.p1.1.1">W2C </span>presents comparable better performance on classical VQA benchmarks and consistently better performance on visual grounding benchmarks than ShareGPT4V.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">Further analysis presents that the new code parsing ability displays better cross-modality equivalence than the commonly used detail caption ability in presenting the details of an image.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Vision Language Models</h4>
<div class="ltx_para" id="S2.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p1.1">With the emergence of LLMs <cite class="ltx_cite ltx_citemacro_cite">OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib41" title="">2023</a>); Achiam et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib1" title="">2023</a>); Touvron et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib51" title="">2023a</a>); Team et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib48" title="">2023</a>); Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib22" title="">2024</a>)</cite>, VLMs <cite class="ltx_cite ltx_citemacro_cite">Zhu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib64" title="">2023</a>); Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib60" title="">2023a</a>); Team et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib48" title="">2023</a>)</cite> have demonstrated exceptional capabilities in visual recognition and understanding, achieving remarkable results on various VLM benchmarks <cite class="ltx_cite ltx_citemacro_cite">Singh et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib47" title="">2019</a>); Tito et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib50" title="">2021</a>); Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib63" title="">2024b</a>); Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib33" title="">2023b</a>); Ying et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib59" title="">2024</a>); Fu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib16" title="">2024</a>)</cite>.
The seminal BLIP2 <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib24" title="">2023a</a>)</cite> firstly introduces Q-Former to adapt encoded image features as potential language tokens for LLM-based caption prediction.
Following works <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib31" title="">2024a</a>); Team et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib48" title="">2023</a>); Dong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib13" title="">2024c</a>)</cite> improve the visual component by replacing VIT <cite class="ltx_cite ltx_citemacro_cite">Dosovitskiy et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib14" title="">2020</a>)</cite> or scaling the input image resolution, while Zhu et al. <cite class="ltx_cite ltx_citemacro_cite">Zhu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib64" title="">2023</a>)</cite> extends BLIP2 by employing emergent open-source LLMs <cite class="ltx_cite ltx_citemacro_cite">Touvron et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib51" title="">2023a</a>); Chiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib10" title="">2023</a>)</cite>, endowing current VLMs with significantly better instruction following and problem solving abilities. LLaVA/LLaVA-1.5 <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib32" title="">2024b</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib30" title="">2023a</a>)</cite> further remove Q-Former and point out that simple MLP projection layers present impressive performance in aligning image representation with LLMs.
Some works also highlight the importance of collecting high-quality cross-modal alignment data for improving the consistently scaling VLMs <cite class="ltx_cite ltx_citemacro_cite">Bai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib2" title="">2023</a>); Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib55" title="">2023b</a>); Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib25" title="">2023b</a>)</cite>.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Multi-modal Dataset Construction</h4>
<div class="ltx_para" id="S2.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px2.p1.1">The scarcity of high-quality human-labeled data inspires the synthesis of cross-modal data <cite class="ltx_cite ltx_citemacro_cite">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib54" title="">2024</a>); Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib7" title="">2023a</a>); Rasheed et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib45" title="">2023</a>); Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib53" title="">2023a</a>); Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib29" title="">2024b</a>); Lu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib34" title="">2023</a>); Dong et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib11" title="">2024a</a>); Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib9" title="">2024c</a>)</cite>.
Among them, <cite class="ltx_cite ltx_citemacro_citet">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib55" title="">2023b</a>)</cite> propose the AS-1B data generation pipeline and open-sourced high-quality dense captions on 1B images. GLaMM <cite class="ltx_cite ltx_citemacro_cite">Rasheed et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib45" title="">2023</a>)</cite> further extends AS-1B by introducing about 10 specialists of different functionalities including grounding, tagging, and in-context learning. These specialists enable pixel-wise grounded dense captions for each image. However, the expensive human annotation required in AS-1B and the complicated construction pipeline in GLaMM have greatly limited the potential of data scaling.
In this work, we try to answer whether synthetic data can improve VLMs on classical VQA benchmarks <cite class="ltx_cite ltx_citemacro_cite">Fu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib16" title="">2024</a>); Ying et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib59" title="">2024</a>); Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib6" title="">2024b</a>)</cite> to avoid tedious data collection.</p>
</div>
<div class="ltx_para" id="S2.SS0.SSS0.Px2.p2">
<p class="ltx_p" id="S2.SS0.SSS0.Px2.p2.1">Recent progress in synthetic data generation for LLMs <cite class="ltx_cite ltx_citemacro_cite">Huang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib18" title="">2023a</a>); Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib26" title="">2023c</a>); Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib56" title="">2022</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib57" title="">2023c</a>)</cite> shed light on the possibility of Multi-modal data construction by leveraging consistency in generation to filter invalid data.
<cite class="ltx_cite ltx_citemacro_citet">Wang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib56" title="">2022</a>)</cite> presents the consistent reasoning path generation demonstrating better performance in COT.
<cite class="ltx_cite ltx_citemacro_citet">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib26" title="">2023c</a>)</cite> uses the generator-validator consistent data for training and can effectively improve LLMs on various tasks.
<cite class="ltx_cite ltx_citemacro_citet">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib63" title="">2024b</a>)</cite> further shows that the generator-validator consistency in most VLMs is prone to be correct.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">Code Representation for Visual Tasks</h4>
<div class="ltx_para" id="S2.SS0.SSS0.Px3.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px3.p1.1">Code representations can formally encode various structure information in a scene.
Eureka <cite class="ltx_cite ltx_citemacro_cite">Ma et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib36" title="">2023</a>)</cite> and Text2Reward <cite class="ltx_cite ltx_citemacro_cite">Xie et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib58" title="">2023</a>)</cite> parse a scene into Python codes and encourage LLMs to generate programmable dense rewards.
ViStruct <cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib8" title="">2023b</a>)</cite> takes the first step in visual code intelligence by decomposing the code-visual representation into multiple components including object recognition, object grounding, attribute detection, relation detection, and event detection.
<cite class="ltx_cite ltx_citemacro_citet">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib8" title="">2023b</a>)</cite> further introduces a curriculum learning approach to endow VLMs with the aforementioned four abilities.
However, the heavy dependency on supervised human-labeled datasets and the complicated curriculum learning pipeline limits its potential.
This work investigates an effective data-constructing pipeline based on code-vision representation.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Method</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">Our data construction pipeline shares some similarities with GLaMM <cite class="ltx_cite ltx_citemacro_cite">Rasheed et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib45" title="">2023</a>)</cite>, where both methods focus on the region-level caption of the whole image. <span class="ltx_text ltx_font_italic" id="S3.p1.1.1">W2C </span>further extend GLaMM to support generation-validation consistency filtering by exploring different organization formations of the labeled elements and present how VLMs boost themselves on basic multi-modal understanding tasks.</p>
</div>
<div class="ltx_para" id="S3.p2">
<p class="ltx_p" id="S3.p2.1">To make a comprehensive and systematic exposition of our <span class="ltx_text ltx_font_italic" id="S3.p2.1.1">W2C </span>entire pipeline, the following will be divided into three parts for discussion:</p>
</div>
<div class="ltx_para" id="S3.p3">
<p class="ltx_p" id="S3.p3.1">(1) Visual Concepts Extraction in Section <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS1" title="3.1 Visual Concepts Extraction ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">3.1</span></a>, (2) Self-Instructed Information Extraction in Section <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS2" title="3.2 Self-Instructed Information Extraction ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">3.2</span></a>, (3) Information Filtering via Self Consistency in Section <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS3" title="3.3 Information Filtering via Self Consistency ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">3.3</span></a>, (4) Structured formatting in Section <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS4" title="3.4 Structured Formatting and Filtering ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">3.4</span></a>. The overview of our construction pipeline is shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.F2" title="Figure 2 ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">2</span></a> and all the used instruct prompts are shown in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A1.T7" title="Table 7 ‣ A.1 Prompt Templates ‣ Appendix A Prompt Templates for W2C data construction pipeline ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">7</span></a>.</p>
</div>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="253" id="S3.F2.g1" src="extracted/5887330/latex/figure/main_figure/pipeline_bohong.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>The data construction pipeline for <span class="ltx_text ltx_font_italic" id="S3.F2.4.1">W2C </span>. Our pipeline utilizes both VLM and an object detector model to furnish structured data with region-specific awareness, detailed entity captions, and comprehensive global information. The VLM is iteratively invoked to generate the caption and perform consistency filtering to obtain high-quality data.
The visual concepts set is obtained from the captions by the NLTK toolkit, <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.F2.2.m1.1"><semantics id="S3.F2.2.m1.1b"><msub id="S3.F2.2.m1.1.1" xref="S3.F2.2.m1.1.1.cmml"><mi id="S3.F2.2.m1.1.1.2" xref="S3.F2.2.m1.1.1.2.cmml">c</mi><mi id="S3.F2.2.m1.1.1.3" xref="S3.F2.2.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.F2.2.m1.1c"><apply id="S3.F2.2.m1.1.1.cmml" xref="S3.F2.2.m1.1.1"><csymbol cd="ambiguous" id="S3.F2.2.m1.1.1.1.cmml" xref="S3.F2.2.m1.1.1">subscript</csymbol><ci id="S3.F2.2.m1.1.1.2.cmml" xref="S3.F2.2.m1.1.1.2">𝑐</ci><ci id="S3.F2.2.m1.1.1.3.cmml" xref="S3.F2.2.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F2.2.m1.1d">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.F2.2.m1.1e">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> here represents a visual concept from the set. The instruction prompts are all predefined templates.</figcaption>
</figure>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Visual Concepts Extraction</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.4">To build a fully covered concept list for each image <math alttext="I" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.1"><semantics id="S3.SS1.p1.1.m1.1a"><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">I</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝐼</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">I</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.1d">italic_I</annotation></semantics></math> in images dataset <math alttext="D_{\text{raw}}" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.1"><semantics id="S3.SS1.p1.2.m2.1a"><msub id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml"><mi id="S3.SS1.p1.2.m2.1.1.2" xref="S3.SS1.p1.2.m2.1.1.2.cmml">D</mi><mtext id="S3.SS1.p1.2.m2.1.1.3" xref="S3.SS1.p1.2.m2.1.1.3a.cmml">raw</mtext></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><apply id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.1.1.2">𝐷</ci><ci id="S3.SS1.p1.2.m2.1.1.3a.cmml" xref="S3.SS1.p1.2.m2.1.1.3"><mtext id="S3.SS1.p1.2.m2.1.1.3.cmml" mathsize="70%" xref="S3.SS1.p1.2.m2.1.1.3">raw</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">D_{\text{raw}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.1d">italic_D start_POSTSUBSCRIPT raw end_POSTSUBSCRIPT</annotation></semantics></math>, we prompt VLMs to generate both general captions (for a concise overview of the image) and detail captions (to bootstrap as many visual concepts as possible in the caption) using specific instruct prompts <math alttext="p_{g}" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.1"><semantics id="S3.SS1.p1.3.m3.1a"><msub id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml"><mi id="S3.SS1.p1.3.m3.1.1.2" xref="S3.SS1.p1.3.m3.1.1.2.cmml">p</mi><mi id="S3.SS1.p1.3.m3.1.1.3" xref="S3.SS1.p1.3.m3.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><apply id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.1.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS1.p1.3.m3.1.1.2.cmml" xref="S3.SS1.p1.3.m3.1.1.2">𝑝</ci><ci id="S3.SS1.p1.3.m3.1.1.3.cmml" xref="S3.SS1.p1.3.m3.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">p_{g}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m3.1d">italic_p start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="p_{d}" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m4.1"><semantics id="S3.SS1.p1.4.m4.1a"><msub id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml"><mi id="S3.SS1.p1.4.m4.1.1.2" xref="S3.SS1.p1.4.m4.1.1.2.cmml">p</mi><mi id="S3.SS1.p1.4.m4.1.1.3" xref="S3.SS1.p1.4.m4.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.1b"><apply id="S3.SS1.p1.4.m4.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.1.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS1.p1.4.m4.1.1.2.cmml" xref="S3.SS1.p1.4.m4.1.1.2">𝑝</ci><ci id="S3.SS1.p1.4.m4.1.1.3.cmml" xref="S3.SS1.p1.4.m4.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.1c">p_{d}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.4.m4.1d">italic_p start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math>.
We use beam search to encourage the VLMs to provide as many visual concepts as possible to improve generation diversity.
The general captions and detail captions are obtained as follows:
</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="o_{g},o_{d}=f_{\text{VLM}}(I,p_{g}),f_{\text{VLM}}(I,p_{d})." class="ltx_Math" display="block" id="S3.E1.m1.3"><semantics id="S3.E1.m1.3a"><mrow id="S3.E1.m1.3.3.1"><mrow id="S3.E1.m1.3.3.1.1.2" xref="S3.E1.m1.3.3.1.1.3.cmml"><mrow id="S3.E1.m1.3.3.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.cmml"><mrow id="S3.E1.m1.3.3.1.1.1.1.2.2" xref="S3.E1.m1.3.3.1.1.1.1.2.3.cmml"><msub id="S3.E1.m1.3.3.1.1.1.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.2.cmml">o</mi><mi id="S3.E1.m1.3.3.1.1.1.1.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.3.cmml">g</mi></msub><mo id="S3.E1.m1.3.3.1.1.1.1.2.2.3" xref="S3.E1.m1.3.3.1.1.1.1.2.3.cmml">,</mo><msub id="S3.E1.m1.3.3.1.1.1.1.2.2.2" xref="S3.E1.m1.3.3.1.1.1.1.2.2.2.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.2.2.2.2" xref="S3.E1.m1.3.3.1.1.1.1.2.2.2.2.cmml">o</mi><mi id="S3.E1.m1.3.3.1.1.1.1.2.2.2.3" xref="S3.E1.m1.3.3.1.1.1.1.2.2.2.3.cmml">d</mi></msub></mrow><mo id="S3.E1.m1.3.3.1.1.1.1.4" xref="S3.E1.m1.3.3.1.1.1.1.4.cmml">=</mo><mrow id="S3.E1.m1.3.3.1.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.1.3.cmml"><msub id="S3.E1.m1.3.3.1.1.1.1.3.3" xref="S3.E1.m1.3.3.1.1.1.1.3.3.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.3.3.2" xref="S3.E1.m1.3.3.1.1.1.1.3.3.2.cmml">f</mi><mtext id="S3.E1.m1.3.3.1.1.1.1.3.3.3" xref="S3.E1.m1.3.3.1.1.1.1.3.3.3a.cmml">VLM</mtext></msub><mo id="S3.E1.m1.3.3.1.1.1.1.3.2" xref="S3.E1.m1.3.3.1.1.1.1.3.2.cmml">⁢</mo><mrow id="S3.E1.m1.3.3.1.1.1.1.3.1.1" xref="S3.E1.m1.3.3.1.1.1.1.3.1.2.cmml"><mo id="S3.E1.m1.3.3.1.1.1.1.3.1.1.2" stretchy="false" xref="S3.E1.m1.3.3.1.1.1.1.3.1.2.cmml">(</mo><mi id="S3.E1.m1.1.1" xref="S3.E1.m1.1.1.cmml">I</mi><mo id="S3.E1.m1.3.3.1.1.1.1.3.1.1.3" xref="S3.E1.m1.3.3.1.1.1.1.3.1.2.cmml">,</mo><msub id="S3.E1.m1.3.3.1.1.1.1.3.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.2.cmml">p</mi><mi id="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.3.cmml">g</mi></msub><mo id="S3.E1.m1.3.3.1.1.1.1.3.1.1.4" stretchy="false" xref="S3.E1.m1.3.3.1.1.1.1.3.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E1.m1.3.3.1.1.2.3" xref="S3.E1.m1.3.3.1.1.3a.cmml">,</mo><mrow id="S3.E1.m1.3.3.1.1.2.2" xref="S3.E1.m1.3.3.1.1.2.2.cmml"><msub id="S3.E1.m1.3.3.1.1.2.2.3" xref="S3.E1.m1.3.3.1.1.2.2.3.cmml"><mi id="S3.E1.m1.3.3.1.1.2.2.3.2" xref="S3.E1.m1.3.3.1.1.2.2.3.2.cmml">f</mi><mtext id="S3.E1.m1.3.3.1.1.2.2.3.3" xref="S3.E1.m1.3.3.1.1.2.2.3.3a.cmml">VLM</mtext></msub><mo id="S3.E1.m1.3.3.1.1.2.2.2" xref="S3.E1.m1.3.3.1.1.2.2.2.cmml">⁢</mo><mrow id="S3.E1.m1.3.3.1.1.2.2.1.1" xref="S3.E1.m1.3.3.1.1.2.2.1.2.cmml"><mo id="S3.E1.m1.3.3.1.1.2.2.1.1.2" stretchy="false" xref="S3.E1.m1.3.3.1.1.2.2.1.2.cmml">(</mo><mi id="S3.E1.m1.2.2" xref="S3.E1.m1.2.2.cmml">I</mi><mo id="S3.E1.m1.3.3.1.1.2.2.1.1.3" xref="S3.E1.m1.3.3.1.1.2.2.1.2.cmml">,</mo><msub id="S3.E1.m1.3.3.1.1.2.2.1.1.1" xref="S3.E1.m1.3.3.1.1.2.2.1.1.1.cmml"><mi id="S3.E1.m1.3.3.1.1.2.2.1.1.1.2" xref="S3.E1.m1.3.3.1.1.2.2.1.1.1.2.cmml">p</mi><mi id="S3.E1.m1.3.3.1.1.2.2.1.1.1.3" xref="S3.E1.m1.3.3.1.1.2.2.1.1.1.3.cmml">d</mi></msub><mo id="S3.E1.m1.3.3.1.1.2.2.1.1.4" stretchy="false" xref="S3.E1.m1.3.3.1.1.2.2.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E1.m1.3.3.1.2" lspace="0em">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.3b"><apply id="S3.E1.m1.3.3.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.3a.cmml" xref="S3.E1.m1.3.3.1.1.2.3">formulae-sequence</csymbol><apply id="S3.E1.m1.3.3.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1"><eq id="S3.E1.m1.3.3.1.1.1.1.4.cmml" xref="S3.E1.m1.3.3.1.1.1.1.4"></eq><list id="S3.E1.m1.3.3.1.1.1.1.2.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.2.2"><apply id="S3.E1.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.2">𝑜</ci><ci id="S3.E1.m1.3.3.1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.3">𝑔</ci></apply><apply id="S3.E1.m1.3.3.1.1.1.1.2.2.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.1.2.2.2.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.2.2.2">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.2.2.2.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.2.2.2.2">𝑜</ci><ci id="S3.E1.m1.3.3.1.1.1.1.2.2.2.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.2.2.2.3">𝑑</ci></apply></list><apply id="S3.E1.m1.3.3.1.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3"><times id="S3.E1.m1.3.3.1.1.1.1.3.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.2"></times><apply id="S3.E1.m1.3.3.1.1.1.1.3.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.1.3.3.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.3">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.3.3.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.3.2">𝑓</ci><ci id="S3.E1.m1.3.3.1.1.1.1.3.3.3a.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.3.3"><mtext id="S3.E1.m1.3.3.1.1.1.1.3.3.3.cmml" mathsize="70%" xref="S3.E1.m1.3.3.1.1.1.1.3.3.3">VLM</mtext></ci></apply><interval closure="open" id="S3.E1.m1.3.3.1.1.1.1.3.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.1.1"><ci id="S3.E1.m1.1.1.cmml" xref="S3.E1.m1.1.1">𝐼</ci><apply id="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.1.1.1">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.2">𝑝</ci><ci id="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.3.1.1.1.3">𝑔</ci></apply></interval></apply></apply><apply id="S3.E1.m1.3.3.1.1.2.2.cmml" xref="S3.E1.m1.3.3.1.1.2.2"><times id="S3.E1.m1.3.3.1.1.2.2.2.cmml" xref="S3.E1.m1.3.3.1.1.2.2.2"></times><apply id="S3.E1.m1.3.3.1.1.2.2.3.cmml" xref="S3.E1.m1.3.3.1.1.2.2.3"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.2.2.3.1.cmml" xref="S3.E1.m1.3.3.1.1.2.2.3">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.2.2.3.2.cmml" xref="S3.E1.m1.3.3.1.1.2.2.3.2">𝑓</ci><ci id="S3.E1.m1.3.3.1.1.2.2.3.3a.cmml" xref="S3.E1.m1.3.3.1.1.2.2.3.3"><mtext id="S3.E1.m1.3.3.1.1.2.2.3.3.cmml" mathsize="70%" xref="S3.E1.m1.3.3.1.1.2.2.3.3">VLM</mtext></ci></apply><interval closure="open" id="S3.E1.m1.3.3.1.1.2.2.1.2.cmml" xref="S3.E1.m1.3.3.1.1.2.2.1.1"><ci id="S3.E1.m1.2.2.cmml" xref="S3.E1.m1.2.2">𝐼</ci><apply id="S3.E1.m1.3.3.1.1.2.2.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.2.2.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.2.2.1.1.1">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.2.2.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.2.2.1.1.1.2">𝑝</ci><ci id="S3.E1.m1.3.3.1.1.2.2.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.2.2.1.1.1.3">𝑑</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.3c">o_{g},o_{d}=f_{\text{VLM}}(I,p_{g}),f_{\text{VLM}}(I,p_{d}).</annotation><annotation encoding="application/x-llamapun" id="S3.E1.m1.3d">italic_o start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_I , italic_p start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT ) , italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_I , italic_p start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p1.7">Since visual concepts are mainly composed of noun phrases, we employ the NLTK toolkit <cite class="ltx_cite ltx_citemacro_cite">Bird (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib4" title="">2006</a>)</cite> to extract all noun phrases denoted as <math alttext="{N}" class="ltx_Math" display="inline" id="S3.SS1.p1.5.m1.1"><semantics id="S3.SS1.p1.5.m1.1a"><mi id="S3.SS1.p1.5.m1.1.1" xref="S3.SS1.p1.5.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m1.1b"><ci id="S3.SS1.p1.5.m1.1.1.cmml" xref="S3.SS1.p1.5.m1.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m1.1c">{N}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.5.m1.1d">italic_N</annotation></semantics></math> from <math alttext="o_{g}" class="ltx_Math" display="inline" id="S3.SS1.p1.6.m2.1"><semantics id="S3.SS1.p1.6.m2.1a"><msub id="S3.SS1.p1.6.m2.1.1" xref="S3.SS1.p1.6.m2.1.1.cmml"><mi id="S3.SS1.p1.6.m2.1.1.2" xref="S3.SS1.p1.6.m2.1.1.2.cmml">o</mi><mi id="S3.SS1.p1.6.m2.1.1.3" xref="S3.SS1.p1.6.m2.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m2.1b"><apply id="S3.SS1.p1.6.m2.1.1.cmml" xref="S3.SS1.p1.6.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.6.m2.1.1.1.cmml" xref="S3.SS1.p1.6.m2.1.1">subscript</csymbol><ci id="S3.SS1.p1.6.m2.1.1.2.cmml" xref="S3.SS1.p1.6.m2.1.1.2">𝑜</ci><ci id="S3.SS1.p1.6.m2.1.1.3.cmml" xref="S3.SS1.p1.6.m2.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m2.1c">o_{g}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.6.m2.1d">italic_o start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="o_{d}" class="ltx_Math" display="inline" id="S3.SS1.p1.7.m3.1"><semantics id="S3.SS1.p1.7.m3.1a"><msub id="S3.SS1.p1.7.m3.1.1" xref="S3.SS1.p1.7.m3.1.1.cmml"><mi id="S3.SS1.p1.7.m3.1.1.2" xref="S3.SS1.p1.7.m3.1.1.2.cmml">o</mi><mi id="S3.SS1.p1.7.m3.1.1.3" xref="S3.SS1.p1.7.m3.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.7.m3.1b"><apply id="S3.SS1.p1.7.m3.1.1.cmml" xref="S3.SS1.p1.7.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.7.m3.1.1.1.cmml" xref="S3.SS1.p1.7.m3.1.1">subscript</csymbol><ci id="S3.SS1.p1.7.m3.1.1.2.cmml" xref="S3.SS1.p1.7.m3.1.1.2">𝑜</ci><ci id="S3.SS1.p1.7.m3.1.1.3.cmml" xref="S3.SS1.p1.7.m3.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.7.m3.1c">o_{d}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.7.m3.1d">italic_o start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.2">We use Grounding DINO to map extracted noun phrases to bounding boxes of the current image, where part of the false positive noun phrases are filtered as they fail to be mapped with corresponding areas in the image. Here we denote the filtered visual concepts as <math alttext="\mathbf{C}" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.1"><semantics id="S3.SS1.p2.1.m1.1a"><mi id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml">𝐂</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><ci id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">𝐂</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">\mathbf{C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.1d">bold_C</annotation></semantics></math>, and their corresponding bounding boxes as <math alttext="\mathbf{B}" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.1"><semantics id="S3.SS1.p2.2.m2.1a"><mi id="S3.SS1.p2.2.m2.1.1" xref="S3.SS1.p2.2.m2.1.1.cmml">𝐁</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.1b"><ci id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1">𝐁</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.1c">\mathbf{B}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.1d">bold_B</annotation></semantics></math>, which is formulated as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathbf{B},\mathbf{C}=f_{\text{DINO}}(I,\mathbf{N})." class="ltx_Math" display="block" id="S3.E2.m1.5"><semantics id="S3.E2.m1.5a"><mrow id="S3.E2.m1.5.5.1" xref="S3.E2.m1.5.5.1.1.cmml"><mrow id="S3.E2.m1.5.5.1.1" xref="S3.E2.m1.5.5.1.1.cmml"><mrow id="S3.E2.m1.5.5.1.1.2.2" xref="S3.E2.m1.5.5.1.1.2.1.cmml"><mi id="S3.E2.m1.3.3" xref="S3.E2.m1.3.3.cmml">𝐁</mi><mo id="S3.E2.m1.5.5.1.1.2.2.1" xref="S3.E2.m1.5.5.1.1.2.1.cmml">,</mo><mi id="S3.E2.m1.4.4" xref="S3.E2.m1.4.4.cmml">𝐂</mi></mrow><mo id="S3.E2.m1.5.5.1.1.1" xref="S3.E2.m1.5.5.1.1.1.cmml">=</mo><mrow id="S3.E2.m1.5.5.1.1.3" xref="S3.E2.m1.5.5.1.1.3.cmml"><msub id="S3.E2.m1.5.5.1.1.3.2" xref="S3.E2.m1.5.5.1.1.3.2.cmml"><mi id="S3.E2.m1.5.5.1.1.3.2.2" xref="S3.E2.m1.5.5.1.1.3.2.2.cmml">f</mi><mtext id="S3.E2.m1.5.5.1.1.3.2.3" xref="S3.E2.m1.5.5.1.1.3.2.3a.cmml">DINO</mtext></msub><mo id="S3.E2.m1.5.5.1.1.3.1" xref="S3.E2.m1.5.5.1.1.3.1.cmml">⁢</mo><mrow id="S3.E2.m1.5.5.1.1.3.3.2" xref="S3.E2.m1.5.5.1.1.3.3.1.cmml"><mo id="S3.E2.m1.5.5.1.1.3.3.2.1" stretchy="false" xref="S3.E2.m1.5.5.1.1.3.3.1.cmml">(</mo><mi id="S3.E2.m1.1.1" xref="S3.E2.m1.1.1.cmml">I</mi><mo id="S3.E2.m1.5.5.1.1.3.3.2.2" xref="S3.E2.m1.5.5.1.1.3.3.1.cmml">,</mo><mi id="S3.E2.m1.2.2" xref="S3.E2.m1.2.2.cmml">𝐍</mi><mo id="S3.E2.m1.5.5.1.1.3.3.2.3" stretchy="false" xref="S3.E2.m1.5.5.1.1.3.3.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E2.m1.5.5.1.2" lspace="0em" xref="S3.E2.m1.5.5.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.5b"><apply id="S3.E2.m1.5.5.1.1.cmml" xref="S3.E2.m1.5.5.1"><eq id="S3.E2.m1.5.5.1.1.1.cmml" xref="S3.E2.m1.5.5.1.1.1"></eq><list id="S3.E2.m1.5.5.1.1.2.1.cmml" xref="S3.E2.m1.5.5.1.1.2.2"><ci id="S3.E2.m1.3.3.cmml" xref="S3.E2.m1.3.3">𝐁</ci><ci id="S3.E2.m1.4.4.cmml" xref="S3.E2.m1.4.4">𝐂</ci></list><apply id="S3.E2.m1.5.5.1.1.3.cmml" xref="S3.E2.m1.5.5.1.1.3"><times id="S3.E2.m1.5.5.1.1.3.1.cmml" xref="S3.E2.m1.5.5.1.1.3.1"></times><apply id="S3.E2.m1.5.5.1.1.3.2.cmml" xref="S3.E2.m1.5.5.1.1.3.2"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.1.1.3.2.1.cmml" xref="S3.E2.m1.5.5.1.1.3.2">subscript</csymbol><ci id="S3.E2.m1.5.5.1.1.3.2.2.cmml" xref="S3.E2.m1.5.5.1.1.3.2.2">𝑓</ci><ci id="S3.E2.m1.5.5.1.1.3.2.3a.cmml" xref="S3.E2.m1.5.5.1.1.3.2.3"><mtext id="S3.E2.m1.5.5.1.1.3.2.3.cmml" mathsize="70%" xref="S3.E2.m1.5.5.1.1.3.2.3">DINO</mtext></ci></apply><interval closure="open" id="S3.E2.m1.5.5.1.1.3.3.1.cmml" xref="S3.E2.m1.5.5.1.1.3.3.2"><ci id="S3.E2.m1.1.1.cmml" xref="S3.E2.m1.1.1">𝐼</ci><ci id="S3.E2.m1.2.2.cmml" xref="S3.E2.m1.2.2">𝐍</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.5c">\mathbf{B},\mathbf{C}=f_{\text{DINO}}(I,\mathbf{N}).</annotation><annotation encoding="application/x-llamapun" id="S3.E2.m1.5d">bold_B , bold_C = italic_f start_POSTSUBSCRIPT DINO end_POSTSUBSCRIPT ( italic_I , bold_N ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Self-Instructed Information Extraction</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">After obtaining visual concepts, we extract region-level captions and OCR information for cropped images of each concept bounding box, respectively.</p>
</div>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Region-level Captions</h4>
<div class="ltx_para" id="S3.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px1.p1.10">We crop image <math alttext="I" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.1.m1.1"><semantics id="S3.SS2.SSS0.Px1.p1.1.m1.1a"><mi id="S3.SS2.SSS0.Px1.p1.1.m1.1.1" xref="S3.SS2.SSS0.Px1.p1.1.m1.1.1.cmml">I</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.1.m1.1b"><ci id="S3.SS2.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.1.m1.1.1">𝐼</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.1.m1.1c">I</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.1.m1.1d">italic_I</annotation></semantics></math> for each visual concept <math alttext="c_{i}\in\mathbf{C}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.2.m2.1"><semantics id="S3.SS2.SSS0.Px1.p1.2.m2.1a"><mrow id="S3.SS2.SSS0.Px1.p1.2.m2.1.1" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.cmml"><msub id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.cmml"><mi id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.2" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.2.cmml">c</mi><mi id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.3" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.1" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.1.cmml">∈</mo><mi id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.3" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.3.cmml">𝐂</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.2.m2.1b"><apply id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1"><in id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.1"></in><apply id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.1.cmml" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.2.cmml" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.2">𝑐</ci><ci id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.3.cmml" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.2.3">𝑖</ci></apply><ci id="S3.SS2.SSS0.Px1.p1.2.m2.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.2.m2.1.1.3">𝐂</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.2.m2.1c">c_{i}\in\mathbf{C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.2.m2.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ bold_C</annotation></semantics></math> with its corresponding bounding box <math alttext="b_{i}\in\mathbf{B}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.3.m3.1"><semantics id="S3.SS2.SSS0.Px1.p1.3.m3.1a"><mrow id="S3.SS2.SSS0.Px1.p1.3.m3.1.1" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.cmml"><msub id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.cmml"><mi id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.2" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.2.cmml">b</mi><mi id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.3" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.1" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.1.cmml">∈</mo><mi id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.3" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.3.cmml">𝐁</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.3.m3.1b"><apply id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1"><in id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.1"></in><apply id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.1.cmml" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.2.cmml" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.2">𝑏</ci><ci id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.3.cmml" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.2.3">𝑖</ci></apply><ci id="S3.SS2.SSS0.Px1.p1.3.m3.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.3.m3.1.1.3">𝐁</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.3.m3.1c">b_{i}\in\mathbf{B}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.3.m3.1d">italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ bold_B</annotation></semantics></math> to obtain a detailed caption and prompt the VLMs to provide a general caption centered on <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.4.m4.1"><semantics id="S3.SS2.SSS0.Px1.p1.4.m4.1a"><msub id="S3.SS2.SSS0.Px1.p1.4.m4.1.1" xref="S3.SS2.SSS0.Px1.p1.4.m4.1.1.cmml"><mi id="S3.SS2.SSS0.Px1.p1.4.m4.1.1.2" xref="S3.SS2.SSS0.Px1.p1.4.m4.1.1.2.cmml">c</mi><mi id="S3.SS2.SSS0.Px1.p1.4.m4.1.1.3" xref="S3.SS2.SSS0.Px1.p1.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.4.m4.1b"><apply id="S3.SS2.SSS0.Px1.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.4.m4.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.4.m4.1.1.2">𝑐</ci><ci id="S3.SS2.SSS0.Px1.p1.4.m4.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.4.m4.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.4.m4.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. Additionally, to encourage the VLMs to offer more concrete details about the properties of <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.5.m5.1"><semantics id="S3.SS2.SSS0.Px1.p1.5.m5.1a"><msub id="S3.SS2.SSS0.Px1.p1.5.m5.1.1" xref="S3.SS2.SSS0.Px1.p1.5.m5.1.1.cmml"><mi id="S3.SS2.SSS0.Px1.p1.5.m5.1.1.2" xref="S3.SS2.SSS0.Px1.p1.5.m5.1.1.2.cmml">c</mi><mi id="S3.SS2.SSS0.Px1.p1.5.m5.1.1.3" xref="S3.SS2.SSS0.Px1.p1.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.5.m5.1b"><apply id="S3.SS2.SSS0.Px1.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.5.m5.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.5.m5.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.5.m5.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.5.m5.1.1.2">𝑐</ci><ci id="S3.SS2.SSS0.Px1.p1.5.m5.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.5.m5.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.5.m5.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, we instruct the VLMs to include the color and material of <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.6.m6.1"><semantics id="S3.SS2.SSS0.Px1.p1.6.m6.1a"><msub id="S3.SS2.SSS0.Px1.p1.6.m6.1.1" xref="S3.SS2.SSS0.Px1.p1.6.m6.1.1.cmml"><mi id="S3.SS2.SSS0.Px1.p1.6.m6.1.1.2" xref="S3.SS2.SSS0.Px1.p1.6.m6.1.1.2.cmml">c</mi><mi id="S3.SS2.SSS0.Px1.p1.6.m6.1.1.3" xref="S3.SS2.SSS0.Px1.p1.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.6.m6.1b"><apply id="S3.SS2.SSS0.Px1.p1.6.m6.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.6.m6.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.6.m6.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.6.m6.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.6.m6.1.1.2">𝑐</ci><ci id="S3.SS2.SSS0.Px1.p1.6.m6.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.6.m6.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.6.m6.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> in the caption.
Denote the description prompt for the region-level caption as <math alttext="p_{\text{desc}}(c_{i})" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.7.m7.1"><semantics id="S3.SS2.SSS0.Px1.p1.7.m7.1a"><mrow id="S3.SS2.SSS0.Px1.p1.7.m7.1.1" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.cmml"><msub id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.cmml"><mi id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.2" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.2.cmml">p</mi><mtext id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.3" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.3a.cmml">desc</mtext></msub><mo id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.2" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.2.cmml">⁢</mo><mrow id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.cmml"><mo id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.2" stretchy="false" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.cmml">(</mo><msub id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.cmml"><mi id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.2" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.2.cmml">c</mi><mi id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.3" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.3" stretchy="false" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.7.m7.1b"><apply id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1"><times id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.2"></times><apply id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.1.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.2.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.2">𝑝</ci><ci id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.3a.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.3"><mtext id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.3.cmml" mathsize="70%" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.3.3">desc</mtext></ci></apply><apply id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.2">𝑐</ci><ci id="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.7.m7.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.7.m7.1c">p_{\text{desc}}(c_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.7.m7.1d">italic_p start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> and the image cropped by <math alttext="b_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.8.m8.1"><semantics id="S3.SS2.SSS0.Px1.p1.8.m8.1a"><msub id="S3.SS2.SSS0.Px1.p1.8.m8.1.1" xref="S3.SS2.SSS0.Px1.p1.8.m8.1.1.cmml"><mi id="S3.SS2.SSS0.Px1.p1.8.m8.1.1.2" xref="S3.SS2.SSS0.Px1.p1.8.m8.1.1.2.cmml">b</mi><mi id="S3.SS2.SSS0.Px1.p1.8.m8.1.1.3" xref="S3.SS2.SSS0.Px1.p1.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.8.m8.1b"><apply id="S3.SS2.SSS0.Px1.p1.8.m8.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.8.m8.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.8.m8.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.8.m8.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.8.m8.1.1.2">𝑏</ci><ci id="S3.SS2.SSS0.Px1.p1.8.m8.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.8.m8.1c">b_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.8.m8.1d">italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> as <math alttext="I(b_{i})" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.9.m9.1"><semantics id="S3.SS2.SSS0.Px1.p1.9.m9.1a"><mrow id="S3.SS2.SSS0.Px1.p1.9.m9.1.1" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.cmml"><mi id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.3" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.3.cmml">I</mi><mo id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.2" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.2.cmml">⁢</mo><mrow id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.cmml"><mo id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.2" stretchy="false" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.cmml">(</mo><msub id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.cmml"><mi id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.2" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.2.cmml">b</mi><mi id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.3" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.3" stretchy="false" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.9.m9.1b"><apply id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1"><times id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.2"></times><ci id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.3">𝐼</ci><apply id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.2">𝑏</ci><ci id="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.9.m9.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.9.m9.1c">I(b_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.9.m9.1d">italic_I ( italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>. The region-level caption for each visual concept <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px1.p1.10.m10.1"><semantics id="S3.SS2.SSS0.Px1.p1.10.m10.1a"><msub id="S3.SS2.SSS0.Px1.p1.10.m10.1.1" xref="S3.SS2.SSS0.Px1.p1.10.m10.1.1.cmml"><mi id="S3.SS2.SSS0.Px1.p1.10.m10.1.1.2" xref="S3.SS2.SSS0.Px1.p1.10.m10.1.1.2.cmml">c</mi><mi id="S3.SS2.SSS0.Px1.p1.10.m10.1.1.3" xref="S3.SS2.SSS0.Px1.p1.10.m10.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px1.p1.10.m10.1b"><apply id="S3.SS2.SSS0.Px1.p1.10.m10.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px1.p1.10.m10.1.1.1.cmml" xref="S3.SS2.SSS0.Px1.p1.10.m10.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px1.p1.10.m10.1.1.2.cmml" xref="S3.SS2.SSS0.Px1.p1.10.m10.1.1.2">𝑐</ci><ci id="S3.SS2.SSS0.Px1.p1.10.m10.1.1.3.cmml" xref="S3.SS2.SSS0.Px1.p1.10.m10.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px1.p1.10.m10.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px1.p1.10.m10.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is formulated as:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="o_{\text{desc}}(c_{i})=f_{\text{VLM}}(p_{\text{desc}}(c_{i}),I(b_{i}))" class="ltx_Math" display="block" id="S3.E3.m1.3"><semantics id="S3.E3.m1.3a"><mrow id="S3.E3.m1.3.3" xref="S3.E3.m1.3.3.cmml"><mrow id="S3.E3.m1.1.1.1" xref="S3.E3.m1.1.1.1.cmml"><msub id="S3.E3.m1.1.1.1.3" xref="S3.E3.m1.1.1.1.3.cmml"><mi id="S3.E3.m1.1.1.1.3.2" xref="S3.E3.m1.1.1.1.3.2.cmml">o</mi><mtext id="S3.E3.m1.1.1.1.3.3" xref="S3.E3.m1.1.1.1.3.3a.cmml">desc</mtext></msub><mo id="S3.E3.m1.1.1.1.2" xref="S3.E3.m1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E3.m1.1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.1.1.cmml"><mo id="S3.E3.m1.1.1.1.1.1.2" stretchy="false" xref="S3.E3.m1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E3.m1.1.1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.1.1.cmml"><mi id="S3.E3.m1.1.1.1.1.1.1.2" xref="S3.E3.m1.1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.E3.m1.1.1.1.1.1.1.3" xref="S3.E3.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E3.m1.1.1.1.1.1.3" stretchy="false" xref="S3.E3.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.3.3.4" xref="S3.E3.m1.3.3.4.cmml">=</mo><mrow id="S3.E3.m1.3.3.3" xref="S3.E3.m1.3.3.3.cmml"><msub id="S3.E3.m1.3.3.3.4" xref="S3.E3.m1.3.3.3.4.cmml"><mi id="S3.E3.m1.3.3.3.4.2" xref="S3.E3.m1.3.3.3.4.2.cmml">f</mi><mtext id="S3.E3.m1.3.3.3.4.3" xref="S3.E3.m1.3.3.3.4.3a.cmml">VLM</mtext></msub><mo id="S3.E3.m1.3.3.3.3" xref="S3.E3.m1.3.3.3.3.cmml">⁢</mo><mrow id="S3.E3.m1.3.3.3.2.2" xref="S3.E3.m1.3.3.3.2.3.cmml"><mo id="S3.E3.m1.3.3.3.2.2.3" stretchy="false" xref="S3.E3.m1.3.3.3.2.3.cmml">(</mo><mrow id="S3.E3.m1.2.2.2.1.1.1" xref="S3.E3.m1.2.2.2.1.1.1.cmml"><msub id="S3.E3.m1.2.2.2.1.1.1.3" xref="S3.E3.m1.2.2.2.1.1.1.3.cmml"><mi id="S3.E3.m1.2.2.2.1.1.1.3.2" xref="S3.E3.m1.2.2.2.1.1.1.3.2.cmml">p</mi><mtext id="S3.E3.m1.2.2.2.1.1.1.3.3" xref="S3.E3.m1.2.2.2.1.1.1.3.3a.cmml">desc</mtext></msub><mo id="S3.E3.m1.2.2.2.1.1.1.2" xref="S3.E3.m1.2.2.2.1.1.1.2.cmml">⁢</mo><mrow id="S3.E3.m1.2.2.2.1.1.1.1.1" xref="S3.E3.m1.2.2.2.1.1.1.1.1.1.cmml"><mo id="S3.E3.m1.2.2.2.1.1.1.1.1.2" stretchy="false" xref="S3.E3.m1.2.2.2.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E3.m1.2.2.2.1.1.1.1.1.1" xref="S3.E3.m1.2.2.2.1.1.1.1.1.1.cmml"><mi id="S3.E3.m1.2.2.2.1.1.1.1.1.1.2" xref="S3.E3.m1.2.2.2.1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.E3.m1.2.2.2.1.1.1.1.1.1.3" xref="S3.E3.m1.2.2.2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E3.m1.2.2.2.1.1.1.1.1.3" stretchy="false" xref="S3.E3.m1.2.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.3.3.3.2.2.4" xref="S3.E3.m1.3.3.3.2.3.cmml">,</mo><mrow id="S3.E3.m1.3.3.3.2.2.2" xref="S3.E3.m1.3.3.3.2.2.2.cmml"><mi id="S3.E3.m1.3.3.3.2.2.2.3" xref="S3.E3.m1.3.3.3.2.2.2.3.cmml">I</mi><mo id="S3.E3.m1.3.3.3.2.2.2.2" xref="S3.E3.m1.3.3.3.2.2.2.2.cmml">⁢</mo><mrow id="S3.E3.m1.3.3.3.2.2.2.1.1" xref="S3.E3.m1.3.3.3.2.2.2.1.1.1.cmml"><mo id="S3.E3.m1.3.3.3.2.2.2.1.1.2" stretchy="false" xref="S3.E3.m1.3.3.3.2.2.2.1.1.1.cmml">(</mo><msub id="S3.E3.m1.3.3.3.2.2.2.1.1.1" xref="S3.E3.m1.3.3.3.2.2.2.1.1.1.cmml"><mi id="S3.E3.m1.3.3.3.2.2.2.1.1.1.2" xref="S3.E3.m1.3.3.3.2.2.2.1.1.1.2.cmml">b</mi><mi id="S3.E3.m1.3.3.3.2.2.2.1.1.1.3" xref="S3.E3.m1.3.3.3.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S3.E3.m1.3.3.3.2.2.2.1.1.3" stretchy="false" xref="S3.E3.m1.3.3.3.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.3.3.3.2.2.5" stretchy="false" xref="S3.E3.m1.3.3.3.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.3b"><apply id="S3.E3.m1.3.3.cmml" xref="S3.E3.m1.3.3"><eq id="S3.E3.m1.3.3.4.cmml" xref="S3.E3.m1.3.3.4"></eq><apply id="S3.E3.m1.1.1.1.cmml" xref="S3.E3.m1.1.1.1"><times id="S3.E3.m1.1.1.1.2.cmml" xref="S3.E3.m1.1.1.1.2"></times><apply id="S3.E3.m1.1.1.1.3.cmml" xref="S3.E3.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.1.1.1.3.1.cmml" xref="S3.E3.m1.1.1.1.3">subscript</csymbol><ci id="S3.E3.m1.1.1.1.3.2.cmml" xref="S3.E3.m1.1.1.1.3.2">𝑜</ci><ci id="S3.E3.m1.1.1.1.3.3a.cmml" xref="S3.E3.m1.1.1.1.3.3"><mtext id="S3.E3.m1.1.1.1.3.3.cmml" mathsize="70%" xref="S3.E3.m1.1.1.1.3.3">desc</mtext></ci></apply><apply id="S3.E3.m1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="S3.E3.m1.1.1.1.1.1.1.3.cmml" xref="S3.E3.m1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E3.m1.3.3.3.cmml" xref="S3.E3.m1.3.3.3"><times id="S3.E3.m1.3.3.3.3.cmml" xref="S3.E3.m1.3.3.3.3"></times><apply id="S3.E3.m1.3.3.3.4.cmml" xref="S3.E3.m1.3.3.3.4"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.4.1.cmml" xref="S3.E3.m1.3.3.3.4">subscript</csymbol><ci id="S3.E3.m1.3.3.3.4.2.cmml" xref="S3.E3.m1.3.3.3.4.2">𝑓</ci><ci id="S3.E3.m1.3.3.3.4.3a.cmml" xref="S3.E3.m1.3.3.3.4.3"><mtext id="S3.E3.m1.3.3.3.4.3.cmml" mathsize="70%" xref="S3.E3.m1.3.3.3.4.3">VLM</mtext></ci></apply><interval closure="open" id="S3.E3.m1.3.3.3.2.3.cmml" xref="S3.E3.m1.3.3.3.2.2"><apply id="S3.E3.m1.2.2.2.1.1.1.cmml" xref="S3.E3.m1.2.2.2.1.1.1"><times id="S3.E3.m1.2.2.2.1.1.1.2.cmml" xref="S3.E3.m1.2.2.2.1.1.1.2"></times><apply id="S3.E3.m1.2.2.2.1.1.1.3.cmml" xref="S3.E3.m1.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.1.1.1.3.1.cmml" xref="S3.E3.m1.2.2.2.1.1.1.3">subscript</csymbol><ci id="S3.E3.m1.2.2.2.1.1.1.3.2.cmml" xref="S3.E3.m1.2.2.2.1.1.1.3.2">𝑝</ci><ci id="S3.E3.m1.2.2.2.1.1.1.3.3a.cmml" xref="S3.E3.m1.2.2.2.1.1.1.3.3"><mtext id="S3.E3.m1.2.2.2.1.1.1.3.3.cmml" mathsize="70%" xref="S3.E3.m1.2.2.2.1.1.1.3.3">desc</mtext></ci></apply><apply id="S3.E3.m1.2.2.2.1.1.1.1.1.1.cmml" xref="S3.E3.m1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.2.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.2.2.2.1.1.1.1.1.1.2">𝑐</ci><ci id="S3.E3.m1.2.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E3.m1.2.2.2.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E3.m1.3.3.3.2.2.2.cmml" xref="S3.E3.m1.3.3.3.2.2.2"><times id="S3.E3.m1.3.3.3.2.2.2.2.cmml" xref="S3.E3.m1.3.3.3.2.2.2.2"></times><ci id="S3.E3.m1.3.3.3.2.2.2.3.cmml" xref="S3.E3.m1.3.3.3.2.2.2.3">𝐼</ci><apply id="S3.E3.m1.3.3.3.2.2.2.1.1.1.cmml" xref="S3.E3.m1.3.3.3.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.3.2.2.2.1.1.1.1.cmml" xref="S3.E3.m1.3.3.3.2.2.2.1.1">subscript</csymbol><ci id="S3.E3.m1.3.3.3.2.2.2.1.1.1.2.cmml" xref="S3.E3.m1.3.3.3.2.2.2.1.1.1.2">𝑏</ci><ci id="S3.E3.m1.3.3.3.2.2.2.1.1.1.3.cmml" xref="S3.E3.m1.3.3.3.2.2.2.1.1.1.3">𝑖</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.3c">o_{\text{desc}}(c_{i})=f_{\text{VLM}}(p_{\text{desc}}(c_{i}),I(b_{i}))</annotation><annotation encoding="application/x-llamapun" id="S3.E3.m1.3d">italic_o start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_p start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_I ( italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">OCR information</h4>
<div class="ltx_para" id="S3.SS2.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px2.p1.3">Previous methods mainly use OCR tools <cite class="ltx_cite ltx_citemacro_cite">PaddleOCR (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib43" title="">2023</a>); JaidedAI (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib21" title="">2023</a>)</cite> to enhance the OCR capabilities. In contrast, <span class="ltx_text ltx_font_italic" id="S3.SS2.SSS0.Px2.p1.3.1">W2C </span>acquire the OCR information via an instructed prompt to guide VLMs for existing VLMs have the better capability in reading text in complex natural scenarios. Given the OCR instruct prompt <math alttext="p_{ocr}(c_{i})" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px2.p1.1.m1.1"><semantics id="S3.SS2.SSS0.Px2.p1.1.m1.1a"><mrow id="S3.SS2.SSS0.Px2.p1.1.m1.1.1" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.cmml"><msub id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.cmml"><mi id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.2" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.2.cmml">p</mi><mrow id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.cmml"><mi id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.2" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.2.cmml">o</mi><mo id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.1" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.3" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.3.cmml">c</mi><mo id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.1a" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.1.cmml">⁢</mo><mi id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.4" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.4.cmml">r</mi></mrow></msub><mo id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.2" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.2.cmml">⁢</mo><mrow id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.cmml"><mo id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.2" stretchy="false" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.cmml">(</mo><msub id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.2" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.3" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.3" stretchy="false" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.1.m1.1b"><apply id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1"><times id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.2"></times><apply id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.1.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.2.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.2">𝑝</ci><apply id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3"><times id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.1.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.1"></times><ci id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.2.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.2">𝑜</ci><ci id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.3.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.3">𝑐</ci><ci id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.4.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.3.3.4">𝑟</ci></apply></apply><apply id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.2">𝑐</ci><ci id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.1.m1.1c">p_{ocr}(c_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px2.p1.1.m1.1d">italic_p start_POSTSUBSCRIPT italic_o italic_c italic_r end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, the OCR information in each cropped image by bounding box area <math alttext="b_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px2.p1.2.m2.1"><semantics id="S3.SS2.SSS0.Px2.p1.2.m2.1a"><msub id="S3.SS2.SSS0.Px2.p1.2.m2.1.1" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.cmml"><mi id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.2" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.2.cmml">b</mi><mi id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.3" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.2.m2.1b"><apply id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.2.cmml" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.2">𝑏</ci><ci id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.3.cmml" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.2.m2.1c">b_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px2.p1.2.m2.1d">italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> with concept <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS0.Px2.p1.3.m3.1"><semantics id="S3.SS2.SSS0.Px2.p1.3.m3.1a"><msub id="S3.SS2.SSS0.Px2.p1.3.m3.1.1" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.cmml"><mi id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.2" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.2.cmml">c</mi><mi id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.3" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.3.m3.1b"><apply id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.2.cmml" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.2">𝑐</ci><ci id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.3.cmml" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.3.m3.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS0.Px2.p1.3.m3.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is formulated as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="o_{\text{ocr}}(c_{i})=f_{\text{VLM}}(p_{\text{ocr}}(c_{i}),I(b_{i}))" class="ltx_Math" display="block" id="S3.E4.m1.3"><semantics id="S3.E4.m1.3a"><mrow id="S3.E4.m1.3.3" xref="S3.E4.m1.3.3.cmml"><mrow id="S3.E4.m1.1.1.1" xref="S3.E4.m1.1.1.1.cmml"><msub id="S3.E4.m1.1.1.1.3" xref="S3.E4.m1.1.1.1.3.cmml"><mi id="S3.E4.m1.1.1.1.3.2" xref="S3.E4.m1.1.1.1.3.2.cmml">o</mi><mtext id="S3.E4.m1.1.1.1.3.3" xref="S3.E4.m1.1.1.1.3.3a.cmml">ocr</mtext></msub><mo id="S3.E4.m1.1.1.1.2" xref="S3.E4.m1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E4.m1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.1.cmml"><mo id="S3.E4.m1.1.1.1.1.1.2" stretchy="false" xref="S3.E4.m1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E4.m1.1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.1.1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.E4.m1.1.1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E4.m1.1.1.1.1.1.3" stretchy="false" xref="S3.E4.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E4.m1.3.3.4" xref="S3.E4.m1.3.3.4.cmml">=</mo><mrow id="S3.E4.m1.3.3.3" xref="S3.E4.m1.3.3.3.cmml"><msub id="S3.E4.m1.3.3.3.4" xref="S3.E4.m1.3.3.3.4.cmml"><mi id="S3.E4.m1.3.3.3.4.2" xref="S3.E4.m1.3.3.3.4.2.cmml">f</mi><mtext id="S3.E4.m1.3.3.3.4.3" xref="S3.E4.m1.3.3.3.4.3a.cmml">VLM</mtext></msub><mo id="S3.E4.m1.3.3.3.3" xref="S3.E4.m1.3.3.3.3.cmml">⁢</mo><mrow id="S3.E4.m1.3.3.3.2.2" xref="S3.E4.m1.3.3.3.2.3.cmml"><mo id="S3.E4.m1.3.3.3.2.2.3" stretchy="false" xref="S3.E4.m1.3.3.3.2.3.cmml">(</mo><mrow id="S3.E4.m1.2.2.2.1.1.1" xref="S3.E4.m1.2.2.2.1.1.1.cmml"><msub id="S3.E4.m1.2.2.2.1.1.1.3" xref="S3.E4.m1.2.2.2.1.1.1.3.cmml"><mi id="S3.E4.m1.2.2.2.1.1.1.3.2" xref="S3.E4.m1.2.2.2.1.1.1.3.2.cmml">p</mi><mtext id="S3.E4.m1.2.2.2.1.1.1.3.3" xref="S3.E4.m1.2.2.2.1.1.1.3.3a.cmml">ocr</mtext></msub><mo id="S3.E4.m1.2.2.2.1.1.1.2" xref="S3.E4.m1.2.2.2.1.1.1.2.cmml">⁢</mo><mrow id="S3.E4.m1.2.2.2.1.1.1.1.1" xref="S3.E4.m1.2.2.2.1.1.1.1.1.1.cmml"><mo id="S3.E4.m1.2.2.2.1.1.1.1.1.2" stretchy="false" xref="S3.E4.m1.2.2.2.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E4.m1.2.2.2.1.1.1.1.1.1" xref="S3.E4.m1.2.2.2.1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.2.2.2.1.1.1.1.1.1.2" xref="S3.E4.m1.2.2.2.1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.E4.m1.2.2.2.1.1.1.1.1.1.3" xref="S3.E4.m1.2.2.2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E4.m1.2.2.2.1.1.1.1.1.3" stretchy="false" xref="S3.E4.m1.2.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E4.m1.3.3.3.2.2.4" xref="S3.E4.m1.3.3.3.2.3.cmml">,</mo><mrow id="S3.E4.m1.3.3.3.2.2.2" xref="S3.E4.m1.3.3.3.2.2.2.cmml"><mi id="S3.E4.m1.3.3.3.2.2.2.3" xref="S3.E4.m1.3.3.3.2.2.2.3.cmml">I</mi><mo id="S3.E4.m1.3.3.3.2.2.2.2" xref="S3.E4.m1.3.3.3.2.2.2.2.cmml">⁢</mo><mrow id="S3.E4.m1.3.3.3.2.2.2.1.1" xref="S3.E4.m1.3.3.3.2.2.2.1.1.1.cmml"><mo id="S3.E4.m1.3.3.3.2.2.2.1.1.2" stretchy="false" xref="S3.E4.m1.3.3.3.2.2.2.1.1.1.cmml">(</mo><msub id="S3.E4.m1.3.3.3.2.2.2.1.1.1" xref="S3.E4.m1.3.3.3.2.2.2.1.1.1.cmml"><mi id="S3.E4.m1.3.3.3.2.2.2.1.1.1.2" xref="S3.E4.m1.3.3.3.2.2.2.1.1.1.2.cmml">b</mi><mi id="S3.E4.m1.3.3.3.2.2.2.1.1.1.3" xref="S3.E4.m1.3.3.3.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S3.E4.m1.3.3.3.2.2.2.1.1.3" stretchy="false" xref="S3.E4.m1.3.3.3.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E4.m1.3.3.3.2.2.5" stretchy="false" xref="S3.E4.m1.3.3.3.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E4.m1.3b"><apply id="S3.E4.m1.3.3.cmml" xref="S3.E4.m1.3.3"><eq id="S3.E4.m1.3.3.4.cmml" xref="S3.E4.m1.3.3.4"></eq><apply id="S3.E4.m1.1.1.1.cmml" xref="S3.E4.m1.1.1.1"><times id="S3.E4.m1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.2"></times><apply id="S3.E4.m1.1.1.1.3.cmml" xref="S3.E4.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.3.1.cmml" xref="S3.E4.m1.1.1.1.3">subscript</csymbol><ci id="S3.E4.m1.1.1.1.3.2.cmml" xref="S3.E4.m1.1.1.1.3.2">𝑜</ci><ci id="S3.E4.m1.1.1.1.3.3a.cmml" xref="S3.E4.m1.1.1.1.3.3"><mtext id="S3.E4.m1.1.1.1.3.3.cmml" mathsize="70%" xref="S3.E4.m1.1.1.1.3.3">ocr</mtext></ci></apply><apply id="S3.E4.m1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="S3.E4.m1.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E4.m1.3.3.3.cmml" xref="S3.E4.m1.3.3.3"><times id="S3.E4.m1.3.3.3.3.cmml" xref="S3.E4.m1.3.3.3.3"></times><apply id="S3.E4.m1.3.3.3.4.cmml" xref="S3.E4.m1.3.3.3.4"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.3.4.1.cmml" xref="S3.E4.m1.3.3.3.4">subscript</csymbol><ci id="S3.E4.m1.3.3.3.4.2.cmml" xref="S3.E4.m1.3.3.3.4.2">𝑓</ci><ci id="S3.E4.m1.3.3.3.4.3a.cmml" xref="S3.E4.m1.3.3.3.4.3"><mtext id="S3.E4.m1.3.3.3.4.3.cmml" mathsize="70%" xref="S3.E4.m1.3.3.3.4.3">VLM</mtext></ci></apply><interval closure="open" id="S3.E4.m1.3.3.3.2.3.cmml" xref="S3.E4.m1.3.3.3.2.2"><apply id="S3.E4.m1.2.2.2.1.1.1.cmml" xref="S3.E4.m1.2.2.2.1.1.1"><times id="S3.E4.m1.2.2.2.1.1.1.2.cmml" xref="S3.E4.m1.2.2.2.1.1.1.2"></times><apply id="S3.E4.m1.2.2.2.1.1.1.3.cmml" xref="S3.E4.m1.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E4.m1.2.2.2.1.1.1.3.1.cmml" xref="S3.E4.m1.2.2.2.1.1.1.3">subscript</csymbol><ci id="S3.E4.m1.2.2.2.1.1.1.3.2.cmml" xref="S3.E4.m1.2.2.2.1.1.1.3.2">𝑝</ci><ci id="S3.E4.m1.2.2.2.1.1.1.3.3a.cmml" xref="S3.E4.m1.2.2.2.1.1.1.3.3"><mtext id="S3.E4.m1.2.2.2.1.1.1.3.3.cmml" mathsize="70%" xref="S3.E4.m1.2.2.2.1.1.1.3.3">ocr</mtext></ci></apply><apply id="S3.E4.m1.2.2.2.1.1.1.1.1.1.cmml" xref="S3.E4.m1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.2.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S3.E4.m1.2.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.2.2.2.1.1.1.1.1.1.2">𝑐</ci><ci id="S3.E4.m1.2.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.2.2.2.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E4.m1.3.3.3.2.2.2.cmml" xref="S3.E4.m1.3.3.3.2.2.2"><times id="S3.E4.m1.3.3.3.2.2.2.2.cmml" xref="S3.E4.m1.3.3.3.2.2.2.2"></times><ci id="S3.E4.m1.3.3.3.2.2.2.3.cmml" xref="S3.E4.m1.3.3.3.2.2.2.3">𝐼</ci><apply id="S3.E4.m1.3.3.3.2.2.2.1.1.1.cmml" xref="S3.E4.m1.3.3.3.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.3.2.2.2.1.1.1.1.cmml" xref="S3.E4.m1.3.3.3.2.2.2.1.1">subscript</csymbol><ci id="S3.E4.m1.3.3.3.2.2.2.1.1.1.2.cmml" xref="S3.E4.m1.3.3.3.2.2.2.1.1.1.2">𝑏</ci><ci id="S3.E4.m1.3.3.3.2.2.2.1.1.1.3.cmml" xref="S3.E4.m1.3.3.3.2.2.2.1.1.1.3">𝑖</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4.m1.3c">o_{\text{ocr}}(c_{i})=f_{\text{VLM}}(p_{\text{ocr}}(c_{i}),I(b_{i}))</annotation><annotation encoding="application/x-llamapun" id="S3.E4.m1.3d">italic_o start_POSTSUBSCRIPT ocr end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_p start_POSTSUBSCRIPT ocr end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_I ( italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Information Filtering via Self Consistency</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">Our consistency filtering strategy is inspired by the similar generator-validator consistency findings in ConBench <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib63" title="">2024b</a>)</cite>, where different instruct prompts may lead to in-consistent captions of visual concepts, and the highly consistent generations are prone to be correct ones. In this paper, we propose to filter the visual concepts via generation-validation consistency, where we change the region-level captions into multiple visual question answering problems for both counting filtering and caption reranking.</p>
</div>
<section class="ltx_paragraph" id="S3.SS3.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Counting Filtering via Consistency</h4>
<div class="ltx_para" id="S3.SS3.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS3.SSS0.Px1.p1.12">Different from AS-1B, we introduce Grounding DINO in our construction process, which can naturally filter part of the plausible visual concepts as these concepts usually fail to find corresponding bounding boxes in the image. However, Grounding DINO introduces new challenges for counting problems, as visual concepts <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.1.m1.1"><semantics id="S3.SS3.SSS0.Px1.p1.1.m1.1a"><msub id="S3.SS3.SSS0.Px1.p1.1.m1.1.1" xref="S3.SS3.SSS0.Px1.p1.1.m1.1.1.cmml"><mi id="S3.SS3.SSS0.Px1.p1.1.m1.1.1.2" xref="S3.SS3.SSS0.Px1.p1.1.m1.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px1.p1.1.m1.1.1.3" xref="S3.SS3.SSS0.Px1.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.1.m1.1b"><apply id="S3.SS3.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.1.m1.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px1.p1.1.m1.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.1.m1.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px1.p1.1.m1.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.1.m1.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.1.m1.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> might be mapped to multiple boxes that have a large overlap due to inappropriately designed hyper-parameters. To prevent the effect by plausibly mapped <math alttext="(b_{i},c_{i})" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.2.m2.2"><semantics id="S3.SS3.SSS0.Px1.p1.2.m2.2a"><mrow id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.3.cmml"><mo id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.3" stretchy="false" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.3.cmml">(</mo><msub id="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1" xref="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.2" xref="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.2.cmml">b</mi><mi id="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.3" xref="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.4" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.3.cmml">,</mo><msub id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.cmml"><mi id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.2" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.3" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.5" stretchy="false" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.2.m2.2b"><interval closure="open" id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.3.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2"><apply id="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.2">𝑏</ci><ci id="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.1.1.1.1.3">𝑖</ci></apply><apply id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2">subscript</csymbol><ci id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.2">𝑐</ci><ci id="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.3.cmml" xref="S3.SS3.SSS0.Px1.p1.2.m2.2.2.2.2.3">𝑖</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.2.m2.2c">(b_{i},c_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.2.m2.2d">( italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, we group all the <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.3.m3.1"><semantics id="S3.SS3.SSS0.Px1.p1.3.m3.1a"><msub id="S3.SS3.SSS0.Px1.p1.3.m3.1.1" xref="S3.SS3.SSS0.Px1.p1.3.m3.1.1.cmml"><mi id="S3.SS3.SSS0.Px1.p1.3.m3.1.1.2" xref="S3.SS3.SSS0.Px1.p1.3.m3.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px1.p1.3.m3.1.1.3" xref="S3.SS3.SSS0.Px1.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.3.m3.1b"><apply id="S3.SS3.SSS0.Px1.p1.3.m3.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.3.m3.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px1.p1.3.m3.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.3.m3.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px1.p1.3.m3.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.3.m3.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.3.m3.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> that have the same name into <math alttext="\tilde{\mathbf{C}}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.4.m4.1"><semantics id="S3.SS3.SSS0.Px1.p1.4.m4.1a"><mover accent="true" id="S3.SS3.SSS0.Px1.p1.4.m4.1.1" xref="S3.SS3.SSS0.Px1.p1.4.m4.1.1.cmml"><mi id="S3.SS3.SSS0.Px1.p1.4.m4.1.1.2" xref="S3.SS3.SSS0.Px1.p1.4.m4.1.1.2.cmml">𝐂</mi><mo id="S3.SS3.SSS0.Px1.p1.4.m4.1.1.1" xref="S3.SS3.SSS0.Px1.p1.4.m4.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.4.m4.1b"><apply id="S3.SS3.SSS0.Px1.p1.4.m4.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.4.m4.1.1"><ci id="S3.SS3.SSS0.Px1.p1.4.m4.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.4.m4.1.1.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.4.m4.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.4.m4.1.1.2">𝐂</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.4.m4.1c">\tilde{\mathbf{C}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.4.m4.1d">over~ start_ARG bold_C end_ARG</annotation></semantics></math> and calculate the existing times for each <math alttext="\tilde{c}_{i}\in\tilde{\mathbf{C}}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.5.m5.1"><semantics id="S3.SS3.SSS0.Px1.p1.5.m5.1a"><mrow id="S3.SS3.SSS0.Px1.p1.5.m5.1.1" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.cmml"><msub id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.cmml"><mover accent="true" id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.cmml"><mi id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.2" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.2.cmml">c</mi><mo id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.1" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.1.cmml">~</mo></mover><mi id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.3" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.1" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.1.cmml">∈</mo><mover accent="true" id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.cmml"><mi id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.2" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.2.cmml">𝐂</mi><mo id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.1" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.1.cmml">~</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.5.m5.1b"><apply id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1"><in id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.1"></in><apply id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2">subscript</csymbol><apply id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2"><ci id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.2.2">𝑐</ci></apply><ci id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.3.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3"><ci id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px1.p1.5.m5.1.1.3.2">𝐂</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.5.m5.1c">\tilde{c}_{i}\in\tilde{\mathbf{C}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.5.m5.1d">over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ over~ start_ARG bold_C end_ARG</annotation></semantics></math> as <math alttext="n_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.6.m6.1"><semantics id="S3.SS3.SSS0.Px1.p1.6.m6.1a"><msub id="S3.SS3.SSS0.Px1.p1.6.m6.1.1" xref="S3.SS3.SSS0.Px1.p1.6.m6.1.1.cmml"><mi id="S3.SS3.SSS0.Px1.p1.6.m6.1.1.2" xref="S3.SS3.SSS0.Px1.p1.6.m6.1.1.2.cmml">n</mi><mi id="S3.SS3.SSS0.Px1.p1.6.m6.1.1.3" xref="S3.SS3.SSS0.Px1.p1.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.6.m6.1b"><apply id="S3.SS3.SSS0.Px1.p1.6.m6.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.6.m6.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.6.m6.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px1.p1.6.m6.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.6.m6.1.1.2">𝑛</ci><ci id="S3.SS3.SSS0.Px1.p1.6.m6.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.6.m6.1c">n_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.6.m6.1d">italic_n start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. We then merge all the boxes for each <math alttext="\tilde{c}_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.7.m7.1"><semantics id="S3.SS3.SSS0.Px1.p1.7.m7.1a"><msub id="S3.SS3.SSS0.Px1.p1.7.m7.1.1" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.cmml"><mover accent="true" id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.cmml"><mi id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.2" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.2.cmml">c</mi><mo id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.1" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.1.cmml">~</mo></mover><mi id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.3" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.7.m7.1b"><apply id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1">subscript</csymbol><apply id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2"><ci id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.2.2">𝑐</ci></apply><ci id="S3.SS3.SSS0.Px1.p1.7.m7.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.7.m7.1c">\tilde{c}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.7.m7.1d">over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> (which might contain multiple visual concepts with the same name) into <math alttext="\tilde{\mathbf{B}}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.8.m8.1"><semantics id="S3.SS3.SSS0.Px1.p1.8.m8.1a"><mover accent="true" id="S3.SS3.SSS0.Px1.p1.8.m8.1.1" xref="S3.SS3.SSS0.Px1.p1.8.m8.1.1.cmml"><mi id="S3.SS3.SSS0.Px1.p1.8.m8.1.1.2" xref="S3.SS3.SSS0.Px1.p1.8.m8.1.1.2.cmml">𝐁</mi><mo id="S3.SS3.SSS0.Px1.p1.8.m8.1.1.1" xref="S3.SS3.SSS0.Px1.p1.8.m8.1.1.1.cmml">~</mo></mover><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.8.m8.1b"><apply id="S3.SS3.SSS0.Px1.p1.8.m8.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.8.m8.1.1"><ci id="S3.SS3.SSS0.Px1.p1.8.m8.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.8.m8.1.1.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.8.m8.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.8.m8.1.1.2">𝐁</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.8.m8.1c">\tilde{\mathbf{B}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.8.m8.1d">over~ start_ARG bold_B end_ARG</annotation></semantics></math>, for a box <math alttext="\tilde{b}_{i}\in\tilde{\mathbf{B}}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.9.m9.1"><semantics id="S3.SS3.SSS0.Px1.p1.9.m9.1a"><mrow id="S3.SS3.SSS0.Px1.p1.9.m9.1.1" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.cmml"><msub id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.cmml"><mover accent="true" id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.cmml"><mi id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.2" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.2.cmml">b</mi><mo id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.1" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.1.cmml">~</mo></mover><mi id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.3" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.1" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.1.cmml">∈</mo><mover accent="true" id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.cmml"><mi id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.2" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.2.cmml">𝐁</mi><mo id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.1" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.1.cmml">~</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.9.m9.1b"><apply id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1"><in id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.1"></in><apply id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2">subscript</csymbol><apply id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2"><ci id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.2.2">𝑏</ci></apply><ci id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.3.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3"><ci id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px1.p1.9.m9.1.1.3.2">𝐁</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.9.m9.1c">\tilde{b}_{i}\in\tilde{\mathbf{B}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.9.m9.1d">over~ start_ARG italic_b end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ over~ start_ARG bold_B end_ARG</annotation></semantics></math> we crop the image and prompt the VLMs to check whether the group element <math alttext="\tilde{c}_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.10.m10.1"><semantics id="S3.SS3.SSS0.Px1.p1.10.m10.1a"><msub id="S3.SS3.SSS0.Px1.p1.10.m10.1.1" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.cmml"><mover accent="true" id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.cmml"><mi id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.2" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.2.cmml">c</mi><mo id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.1" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.1.cmml">~</mo></mover><mi id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.3" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.10.m10.1b"><apply id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1">subscript</csymbol><apply id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2"><ci id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.2.2">𝑐</ci></apply><ci id="S3.SS3.SSS0.Px1.p1.10.m10.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.10.m10.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.10.m10.1c">\tilde{c}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.10.m10.1d">over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> exist <math alttext="n_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.11.m11.1"><semantics id="S3.SS3.SSS0.Px1.p1.11.m11.1a"><msub id="S3.SS3.SSS0.Px1.p1.11.m11.1.1" xref="S3.SS3.SSS0.Px1.p1.11.m11.1.1.cmml"><mi id="S3.SS3.SSS0.Px1.p1.11.m11.1.1.2" xref="S3.SS3.SSS0.Px1.p1.11.m11.1.1.2.cmml">n</mi><mi id="S3.SS3.SSS0.Px1.p1.11.m11.1.1.3" xref="S3.SS3.SSS0.Px1.p1.11.m11.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.11.m11.1b"><apply id="S3.SS3.SSS0.Px1.p1.11.m11.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.11.m11.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.11.m11.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px1.p1.11.m11.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.11.m11.1.1.2">𝑛</ci><ci id="S3.SS3.SSS0.Px1.p1.11.m11.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.11.m11.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.11.m11.1c">n_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.11.m11.1d">italic_n start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> times in the image via instruct prompt <math alttext="p_{\text{valid-g}}^{\tilde{c}_{i}}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px1.p1.12.m12.1"><semantics id="S3.SS3.SSS0.Px1.p1.12.m12.1a"><msubsup id="S3.SS3.SSS0.Px1.p1.12.m12.1.1" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.cmml"><mi id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.2" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.2.cmml">p</mi><mtext id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.3" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.3a.cmml">valid-g</mtext><msub id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.cmml"><mover accent="true" id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.cmml"><mi id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.2" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.2.cmml">c</mi><mo id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.1" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.1.cmml">~</mo></mover><mi id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.3" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.3.cmml">i</mi></msub></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px1.p1.12.m12.1b"><apply id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.1.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1">superscript</csymbol><apply id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.2">𝑝</ci><ci id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.3a.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.3"><mtext id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.2.3">valid-g</mtext></ci></apply><apply id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3">subscript</csymbol><apply id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2"><ci id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.1.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.1">~</ci><ci id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.2.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.2.2">𝑐</ci></apply><ci id="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.3.cmml" xref="S3.SS3.SSS0.Px1.p1.12.m12.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px1.p1.12.m12.1c">p_{\text{valid-g}}^{\tilde{c}_{i}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px1.p1.12.m12.1d">italic_p start_POSTSUBSCRIPT valid-g end_POSTSUBSCRIPT start_POSTSUPERSCRIPT over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUPERSCRIPT</annotation></semantics></math>:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E5">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="o_{\text{valid-g}}(\tilde{c}_{i})=f_{\text{VLM}}(p_{\text{valid-g}}(\tilde{c}_%
{i},n_{i}),I(\tilde{b}_{i}))." class="ltx_Math" display="block" id="S3.E5.m1.1"><semantics id="S3.E5.m1.1a"><mrow id="S3.E5.m1.1.1.1" xref="S3.E5.m1.1.1.1.1.cmml"><mrow id="S3.E5.m1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.cmml"><mrow id="S3.E5.m1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.cmml"><msub id="S3.E5.m1.1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.1.3.cmml"><mi id="S3.E5.m1.1.1.1.1.1.3.2" xref="S3.E5.m1.1.1.1.1.1.3.2.cmml">o</mi><mtext id="S3.E5.m1.1.1.1.1.1.3.3" xref="S3.E5.m1.1.1.1.1.1.3.3a.cmml">valid-g</mtext></msub><mo id="S3.E5.m1.1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E5.m1.1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.cmml"><mo id="S3.E5.m1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E5.m1.1.1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.cmml"><mover accent="true" id="S3.E5.m1.1.1.1.1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.2.2" xref="S3.E5.m1.1.1.1.1.1.1.1.1.2.2.cmml">c</mi><mo id="S3.E5.m1.1.1.1.1.1.1.1.1.2.1" xref="S3.E5.m1.1.1.1.1.1.1.1.1.2.1.cmml">~</mo></mover><mi id="S3.E5.m1.1.1.1.1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E5.m1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E5.m1.1.1.1.1.4" xref="S3.E5.m1.1.1.1.1.4.cmml">=</mo><mrow id="S3.E5.m1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.3.cmml"><msub id="S3.E5.m1.1.1.1.1.3.4" xref="S3.E5.m1.1.1.1.1.3.4.cmml"><mi id="S3.E5.m1.1.1.1.1.3.4.2" xref="S3.E5.m1.1.1.1.1.3.4.2.cmml">f</mi><mtext id="S3.E5.m1.1.1.1.1.3.4.3" xref="S3.E5.m1.1.1.1.1.3.4.3a.cmml">VLM</mtext></msub><mo id="S3.E5.m1.1.1.1.1.3.3" xref="S3.E5.m1.1.1.1.1.3.3.cmml">⁢</mo><mrow id="S3.E5.m1.1.1.1.1.3.2.2" xref="S3.E5.m1.1.1.1.1.3.2.3.cmml"><mo id="S3.E5.m1.1.1.1.1.3.2.2.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.3.2.3.cmml">(</mo><mrow id="S3.E5.m1.1.1.1.1.2.1.1.1" xref="S3.E5.m1.1.1.1.1.2.1.1.1.cmml"><msub id="S3.E5.m1.1.1.1.1.2.1.1.1.4" xref="S3.E5.m1.1.1.1.1.2.1.1.1.4.cmml"><mi id="S3.E5.m1.1.1.1.1.2.1.1.1.4.2" xref="S3.E5.m1.1.1.1.1.2.1.1.1.4.2.cmml">p</mi><mtext id="S3.E5.m1.1.1.1.1.2.1.1.1.4.3" xref="S3.E5.m1.1.1.1.1.2.1.1.1.4.3a.cmml">valid-g</mtext></msub><mo id="S3.E5.m1.1.1.1.1.2.1.1.1.3" xref="S3.E5.m1.1.1.1.1.2.1.1.1.3.cmml">⁢</mo><mrow id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.3.cmml"><mo id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.3.cmml">(</mo><msub id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.cmml"><mover accent="true" id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.cmml"><mi id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.2" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.2.cmml">c</mi><mo id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.1" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.1.cmml">~</mo></mover><mi id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.4" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.3.cmml">,</mo><msub id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.cmml"><mi id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.2" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.2.cmml">n</mi><mi id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.3" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.3.cmml">i</mi></msub><mo id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.5" stretchy="false" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="S3.E5.m1.1.1.1.1.3.2.2.4" xref="S3.E5.m1.1.1.1.1.3.2.3.cmml">,</mo><mrow id="S3.E5.m1.1.1.1.1.3.2.2.2" xref="S3.E5.m1.1.1.1.1.3.2.2.2.cmml"><mi id="S3.E5.m1.1.1.1.1.3.2.2.2.3" xref="S3.E5.m1.1.1.1.1.3.2.2.2.3.cmml">I</mi><mo id="S3.E5.m1.1.1.1.1.3.2.2.2.2" xref="S3.E5.m1.1.1.1.1.3.2.2.2.2.cmml">⁢</mo><mrow id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.cmml"><mo id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.2" stretchy="false" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.cmml">(</mo><msub id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.cmml"><mover accent="true" id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.cmml"><mi id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.2" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.2.cmml">b</mi><mo id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.1" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.1.cmml">~</mo></mover><mi id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.3" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E5.m1.1.1.1.1.3.2.2.5" stretchy="false" xref="S3.E5.m1.1.1.1.1.3.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E5.m1.1.1.1.2" lspace="0em" xref="S3.E5.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E5.m1.1b"><apply id="S3.E5.m1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1"><eq id="S3.E5.m1.1.1.1.1.4.cmml" xref="S3.E5.m1.1.1.1.1.4"></eq><apply id="S3.E5.m1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1"><times id="S3.E5.m1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.2"></times><apply id="S3.E5.m1.1.1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.1.3.1.cmml" xref="S3.E5.m1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E5.m1.1.1.1.1.1.3.2.cmml" xref="S3.E5.m1.1.1.1.1.1.3.2">𝑜</ci><ci id="S3.E5.m1.1.1.1.1.1.3.3a.cmml" xref="S3.E5.m1.1.1.1.1.1.3.3"><mtext id="S3.E5.m1.1.1.1.1.1.3.3.cmml" mathsize="70%" xref="S3.E5.m1.1.1.1.1.1.3.3">valid-g</mtext></ci></apply><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1">subscript</csymbol><apply id="S3.E5.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.2"><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.2.1">~</ci><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.2.2">𝑐</ci></apply><ci id="S3.E5.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E5.m1.1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.3"><times id="S3.E5.m1.1.1.1.1.3.3.cmml" xref="S3.E5.m1.1.1.1.1.3.3"></times><apply id="S3.E5.m1.1.1.1.1.3.4.cmml" xref="S3.E5.m1.1.1.1.1.3.4"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.3.4.1.cmml" xref="S3.E5.m1.1.1.1.1.3.4">subscript</csymbol><ci id="S3.E5.m1.1.1.1.1.3.4.2.cmml" xref="S3.E5.m1.1.1.1.1.3.4.2">𝑓</ci><ci id="S3.E5.m1.1.1.1.1.3.4.3a.cmml" xref="S3.E5.m1.1.1.1.1.3.4.3"><mtext id="S3.E5.m1.1.1.1.1.3.4.3.cmml" mathsize="70%" xref="S3.E5.m1.1.1.1.1.3.4.3">VLM</mtext></ci></apply><interval closure="open" id="S3.E5.m1.1.1.1.1.3.2.3.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2"><apply id="S3.E5.m1.1.1.1.1.2.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1"><times id="S3.E5.m1.1.1.1.1.2.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.3"></times><apply id="S3.E5.m1.1.1.1.1.2.1.1.1.4.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.4"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.2.1.1.1.4.1.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.4">subscript</csymbol><ci id="S3.E5.m1.1.1.1.1.2.1.1.1.4.2.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.4.2">𝑝</ci><ci id="S3.E5.m1.1.1.1.1.2.1.1.1.4.3a.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.4.3"><mtext id="S3.E5.m1.1.1.1.1.2.1.1.1.4.3.cmml" mathsize="70%" xref="S3.E5.m1.1.1.1.1.2.1.1.1.4.3">valid-g</mtext></ci></apply><interval closure="open" id="S3.E5.m1.1.1.1.1.2.1.1.1.2.3.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.2"><apply id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1">subscript</csymbol><apply id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2"><ci id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.1.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.1">~</ci><ci id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.2.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.2.2">𝑐</ci></apply><ci id="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.1.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2">subscript</csymbol><ci id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.2.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.2">𝑛</ci><ci id="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.3.cmml" xref="S3.E5.m1.1.1.1.1.2.1.1.1.2.2.2.3">𝑖</ci></apply></interval></apply><apply id="S3.E5.m1.1.1.1.1.3.2.2.2.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2"><times id="S3.E5.m1.1.1.1.1.3.2.2.2.2.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2.2"></times><ci id="S3.E5.m1.1.1.1.1.3.2.2.2.3.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2.3">𝐼</ci><apply id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1">subscript</csymbol><apply id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2"><ci id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.1.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.1">~</ci><ci id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.2.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.2.2">𝑏</ci></apply><ci id="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.3.2.2.2.1.1.1.3">𝑖</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m1.1c">o_{\text{valid-g}}(\tilde{c}_{i})=f_{\text{VLM}}(p_{\text{valid-g}}(\tilde{c}_%
{i},n_{i}),I(\tilde{b}_{i})).</annotation><annotation encoding="application/x-llamapun" id="S3.E5.m1.1d">italic_o start_POSTSUBSCRIPT valid-g end_POSTSUBSCRIPT ( over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_p start_POSTSUBSCRIPT valid-g end_POSTSUBSCRIPT ( over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_n start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_I ( over~ start_ARG italic_b end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS3.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Caption Re-ranking via Consistency</h4>
<div class="ltx_para" id="S3.SS3.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS3.SSS0.Px2.p1.7">To provide better region-level captions for a given visual concept, we use beam search to bootstrap multiple caption candidates. To select the best candidate, we again leverage the generator-validator consistency.
Specifically, for each given visual concept <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p1.1.m1.1"><semantics id="S3.SS3.SSS0.Px2.p1.1.m1.1a"><msub id="S3.SS3.SSS0.Px2.p1.1.m1.1.1" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p1.1.m1.1.1.2" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p1.1.m1.1.1.3" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p1.1.m1.1b"><apply id="S3.SS3.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.1.m1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.1.m1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p1.1.m1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p1.1.m1.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p1.1.m1.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, we get a list of caption candidate <math alttext="[o^{1}_{\text{desc}}(c_{i}),o^{2}_{\text{desc}}(c_{i}),...,o^{b}_{\text{desc}}%
(c_{i})]" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p1.2.m2.4"><semantics id="S3.SS3.SSS0.Px2.p1.2.m2.4a"><mrow id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.4.cmml"><mo id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.4" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.4.cmml">[</mo><mrow id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.cmml"><msubsup id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.cmml"><mi id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.2.cmml">o</mi><mtext id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.3a.cmml">desc</mtext><mn id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.3.cmml">1</mn></msubsup><mo id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.cmml"><mo id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.cmml">(</mo><msub id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.5" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.4.cmml">,</mo><mrow id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.cmml"><msubsup id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.cmml"><mi id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.2.cmml">o</mi><mtext id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.3a.cmml">desc</mtext><mn id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.3.cmml">2</mn></msubsup><mo id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.2.cmml">⁢</mo><mrow id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.cmml"><mo id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.2" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.cmml">(</mo><msub id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.3" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.6" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.4.cmml">,</mo><mi id="S3.SS3.SSS0.Px2.p1.2.m2.1.1" mathvariant="normal" xref="S3.SS3.SSS0.Px2.p1.2.m2.1.1.cmml">…</mi><mo id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.7" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.4.cmml">,</mo><mrow id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.cmml"><msubsup id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.cmml"><mi id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.2.cmml">o</mi><mtext id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.3a.cmml">desc</mtext><mi id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.3.cmml">b</mi></msubsup><mo id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.2.cmml">⁢</mo><mrow id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.cmml"><mo id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.2" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.cmml">(</mo><msub id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.2" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.3" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.3" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.8" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.4.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p1.2.m2.4b"><list id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.4.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3"><apply id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1"><times id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.2"></times><apply id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.2">𝑜</ci><cn id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.3.cmml" type="integer" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.2.3">1</cn></apply><ci id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.3"><mtext id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.3.3">desc</mtext></ci></apply><apply id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.2.2.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2"><times id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.2"></times><apply id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.2">𝑜</ci><cn id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.3.cmml" type="integer" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.2.3">2</cn></apply><ci id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.3"><mtext id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.3.3">desc</mtext></ci></apply><apply id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.3.3.2.2.1.1.1.3">𝑖</ci></apply></apply><ci id="S3.SS3.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.1.1">…</ci><apply id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3"><times id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.2"></times><apply id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.2">𝑜</ci><ci id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.3.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.2.3">𝑏</ci></apply><ci id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.3"><mtext id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.3.3">desc</mtext></ci></apply><apply id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.2.m2.4.4.3.3.1.1.1.3">𝑖</ci></apply></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p1.2.m2.4c">[o^{1}_{\text{desc}}(c_{i}),o^{2}_{\text{desc}}(c_{i}),...,o^{b}_{\text{desc}}%
(c_{i})]</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p1.2.m2.4d">[ italic_o start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_o start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , … , italic_o start_POSTSUPERSCRIPT italic_b end_POSTSUPERSCRIPT start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) ]</annotation></semantics></math>. We use NLTK to parse these captions and collect all the visual concepts that are contained in these captions. Taking <math alttext="n" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p1.3.m3.1"><semantics id="S3.SS3.SSS0.Px2.p1.3.m3.1a"><mi id="S3.SS3.SSS0.Px2.p1.3.m3.1.1" xref="S3.SS3.SSS0.Px2.p1.3.m3.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p1.3.m3.1b"><ci id="S3.SS3.SSS0.Px2.p1.3.m3.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.3.m3.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p1.3.m3.1c">n</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p1.3.m3.1d">italic_n</annotation></semantics></math> as the total number of extracted concepts in the captions of <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p1.4.m4.1"><semantics id="S3.SS3.SSS0.Px2.p1.4.m4.1a"><msub id="S3.SS3.SSS0.Px2.p1.4.m4.1.1" xref="S3.SS3.SSS0.Px2.p1.4.m4.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p1.4.m4.1.1.2" xref="S3.SS3.SSS0.Px2.p1.4.m4.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p1.4.m4.1.1.3" xref="S3.SS3.SSS0.Px2.p1.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p1.4.m4.1b"><apply id="S3.SS3.SSS0.Px2.p1.4.m4.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.4.m4.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.4.m4.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.4.m4.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p1.4.m4.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p1.4.m4.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p1.4.m4.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, we get a new visual concept list denoted as <math alttext="c^{k}_{i}\in\textbf{C}_{\text{rank}}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p1.5.m5.1"><semantics id="S3.SS3.SSS0.Px2.p1.5.m5.1a"><mrow id="S3.SS3.SSS0.Px2.p1.5.m5.1.1" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.cmml"><msubsup id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.cmml"><mi id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.2" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.3" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.3.cmml">i</mi><mi id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.3" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.3.cmml">k</mi></msubsup><mo id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.1" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.1.cmml">∈</mo><msub id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.cmml"><mtext class="ltx_mathvariant_bold" id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.2" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.2a.cmml">C</mtext><mtext id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.3" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.3a.cmml">rank</mtext></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p1.5.m5.1b"><apply id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1"><in id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.1"></in><apply id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.1.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.3.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.2.3">𝑘</ci></apply><ci id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.3.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.2a.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.2"><mtext class="ltx_mathvariant_bold" id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.2">C</mtext></ci><ci id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.3"><mtext id="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p1.5.m5.1.1.3.3">rank</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p1.5.m5.1c">c^{k}_{i}\in\textbf{C}_{\text{rank}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p1.5.m5.1d">italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ C start_POSTSUBSCRIPT rank end_POSTSUBSCRIPT</annotation></semantics></math>.
Following Equation <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.E5" title="In Counting Filtering via Consistency ‣ 3.3 Information Filtering via Self Consistency ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">5</span></a>, we prompt VLMs to check the existence of each extracted visual concept <math alttext="c^{k}_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p1.6.m6.1"><semantics id="S3.SS3.SSS0.Px2.p1.6.m6.1a"><msubsup id="S3.SS3.SSS0.Px2.p1.6.m6.1.1" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.2" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.3" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1.3.cmml">i</mi><mi id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.3" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.3.cmml">k</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p1.6.m6.1b"><apply id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.3.cmml" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1.2.3">𝑘</ci></apply><ci id="S3.SS3.SSS0.Px2.p1.6.m6.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p1.6.m6.1c">c^{k}_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p1.6.m6.1d">italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> via instruct prompt <math alttext="p_{\text{valid-c}}(c^{k}_{i})" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p1.7.m7.1"><semantics id="S3.SS3.SSS0.Px2.p1.7.m7.1a"><mrow id="S3.SS3.SSS0.Px2.p1.7.m7.1.1" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.cmml"><msub id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.cmml"><mi id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.2" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.2.cmml">p</mi><mtext id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.3" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.3a.cmml">valid-c</mtext></msub><mo id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.2" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.cmml"><mo id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.cmml">(</mo><msubsup id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.2" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.3" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.3.cmml">i</mi><mi id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.3" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p1.7.m7.1b"><apply id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1"><times id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.2"></times><apply id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.2">𝑝</ci><ci id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.3"><mtext id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.3.3">valid-c</mtext></ci></apply><apply id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.3.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p1.7.m7.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p1.7.m7.1c">p_{\text{valid-c}}(c^{k}_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p1.7.m7.1d">italic_p start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT ( italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E6">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="o_{\text{valid-c}}(c^{k}_{i})=f_{\text{VLM}}(p_{\text{valid-c}}(c^{k}_{i}),I(%
\tilde{b}_{i}))" class="ltx_Math" display="block" id="S3.E6.m1.3"><semantics id="S3.E6.m1.3a"><mrow id="S3.E6.m1.3.3" xref="S3.E6.m1.3.3.cmml"><mrow id="S3.E6.m1.1.1.1" xref="S3.E6.m1.1.1.1.cmml"><msub id="S3.E6.m1.1.1.1.3" xref="S3.E6.m1.1.1.1.3.cmml"><mi id="S3.E6.m1.1.1.1.3.2" xref="S3.E6.m1.1.1.1.3.2.cmml">o</mi><mtext id="S3.E6.m1.1.1.1.3.3" xref="S3.E6.m1.1.1.1.3.3a.cmml">valid-c</mtext></msub><mo id="S3.E6.m1.1.1.1.2" xref="S3.E6.m1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E6.m1.1.1.1.1.1" xref="S3.E6.m1.1.1.1.1.1.1.cmml"><mo id="S3.E6.m1.1.1.1.1.1.2" stretchy="false" xref="S3.E6.m1.1.1.1.1.1.1.cmml">(</mo><msubsup id="S3.E6.m1.1.1.1.1.1.1" xref="S3.E6.m1.1.1.1.1.1.1.cmml"><mi id="S3.E6.m1.1.1.1.1.1.1.2.2" xref="S3.E6.m1.1.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.E6.m1.1.1.1.1.1.1.3" xref="S3.E6.m1.1.1.1.1.1.1.3.cmml">i</mi><mi id="S3.E6.m1.1.1.1.1.1.1.2.3" xref="S3.E6.m1.1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="S3.E6.m1.1.1.1.1.1.3" stretchy="false" xref="S3.E6.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E6.m1.3.3.4" xref="S3.E6.m1.3.3.4.cmml">=</mo><mrow id="S3.E6.m1.3.3.3" xref="S3.E6.m1.3.3.3.cmml"><msub id="S3.E6.m1.3.3.3.4" xref="S3.E6.m1.3.3.3.4.cmml"><mi id="S3.E6.m1.3.3.3.4.2" xref="S3.E6.m1.3.3.3.4.2.cmml">f</mi><mtext id="S3.E6.m1.3.3.3.4.3" xref="S3.E6.m1.3.3.3.4.3a.cmml">VLM</mtext></msub><mo id="S3.E6.m1.3.3.3.3" xref="S3.E6.m1.3.3.3.3.cmml">⁢</mo><mrow id="S3.E6.m1.3.3.3.2.2" xref="S3.E6.m1.3.3.3.2.3.cmml"><mo id="S3.E6.m1.3.3.3.2.2.3" stretchy="false" xref="S3.E6.m1.3.3.3.2.3.cmml">(</mo><mrow id="S3.E6.m1.2.2.2.1.1.1" xref="S3.E6.m1.2.2.2.1.1.1.cmml"><msub id="S3.E6.m1.2.2.2.1.1.1.3" xref="S3.E6.m1.2.2.2.1.1.1.3.cmml"><mi id="S3.E6.m1.2.2.2.1.1.1.3.2" xref="S3.E6.m1.2.2.2.1.1.1.3.2.cmml">p</mi><mtext id="S3.E6.m1.2.2.2.1.1.1.3.3" xref="S3.E6.m1.2.2.2.1.1.1.3.3a.cmml">valid-c</mtext></msub><mo id="S3.E6.m1.2.2.2.1.1.1.2" xref="S3.E6.m1.2.2.2.1.1.1.2.cmml">⁢</mo><mrow id="S3.E6.m1.2.2.2.1.1.1.1.1" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.cmml"><mo id="S3.E6.m1.2.2.2.1.1.1.1.1.2" stretchy="false" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.cmml">(</mo><msubsup id="S3.E6.m1.2.2.2.1.1.1.1.1.1" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.cmml"><mi id="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.2" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.E6.m1.2.2.2.1.1.1.1.1.1.3" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.3.cmml">i</mi><mi id="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.3" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="S3.E6.m1.2.2.2.1.1.1.1.1.3" stretchy="false" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E6.m1.3.3.3.2.2.4" xref="S3.E6.m1.3.3.3.2.3.cmml">,</mo><mrow id="S3.E6.m1.3.3.3.2.2.2" xref="S3.E6.m1.3.3.3.2.2.2.cmml"><mi id="S3.E6.m1.3.3.3.2.2.2.3" xref="S3.E6.m1.3.3.3.2.2.2.3.cmml">I</mi><mo id="S3.E6.m1.3.3.3.2.2.2.2" xref="S3.E6.m1.3.3.3.2.2.2.2.cmml">⁢</mo><mrow id="S3.E6.m1.3.3.3.2.2.2.1.1" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.cmml"><mo id="S3.E6.m1.3.3.3.2.2.2.1.1.2" stretchy="false" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.cmml">(</mo><msub id="S3.E6.m1.3.3.3.2.2.2.1.1.1" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.cmml"><mover accent="true" id="S3.E6.m1.3.3.3.2.2.2.1.1.1.2" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.cmml"><mi id="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.2" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.2.cmml">b</mi><mo id="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.1" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.1.cmml">~</mo></mover><mi id="S3.E6.m1.3.3.3.2.2.2.1.1.1.3" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S3.E6.m1.3.3.3.2.2.2.1.1.3" stretchy="false" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E6.m1.3.3.3.2.2.5" stretchy="false" xref="S3.E6.m1.3.3.3.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E6.m1.3b"><apply id="S3.E6.m1.3.3.cmml" xref="S3.E6.m1.3.3"><eq id="S3.E6.m1.3.3.4.cmml" xref="S3.E6.m1.3.3.4"></eq><apply id="S3.E6.m1.1.1.1.cmml" xref="S3.E6.m1.1.1.1"><times id="S3.E6.m1.1.1.1.2.cmml" xref="S3.E6.m1.1.1.1.2"></times><apply id="S3.E6.m1.1.1.1.3.cmml" xref="S3.E6.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.3.1.cmml" xref="S3.E6.m1.1.1.1.3">subscript</csymbol><ci id="S3.E6.m1.1.1.1.3.2.cmml" xref="S3.E6.m1.1.1.1.3.2">𝑜</ci><ci id="S3.E6.m1.1.1.1.3.3a.cmml" xref="S3.E6.m1.1.1.1.3.3"><mtext id="S3.E6.m1.1.1.1.3.3.cmml" mathsize="70%" xref="S3.E6.m1.1.1.1.3.3">valid-c</mtext></ci></apply><apply id="S3.E6.m1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.1.1.1.1.1">subscript</csymbol><apply id="S3.E6.m1.1.1.1.1.1.1.2.cmml" xref="S3.E6.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.1.1.1.2.1.cmml" xref="S3.E6.m1.1.1.1.1.1">superscript</csymbol><ci id="S3.E6.m1.1.1.1.1.1.1.2.2.cmml" xref="S3.E6.m1.1.1.1.1.1.1.2.2">𝑐</ci><ci id="S3.E6.m1.1.1.1.1.1.1.2.3.cmml" xref="S3.E6.m1.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.E6.m1.1.1.1.1.1.1.3.cmml" xref="S3.E6.m1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E6.m1.3.3.3.cmml" xref="S3.E6.m1.3.3.3"><times id="S3.E6.m1.3.3.3.3.cmml" xref="S3.E6.m1.3.3.3.3"></times><apply id="S3.E6.m1.3.3.3.4.cmml" xref="S3.E6.m1.3.3.3.4"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.3.4.1.cmml" xref="S3.E6.m1.3.3.3.4">subscript</csymbol><ci id="S3.E6.m1.3.3.3.4.2.cmml" xref="S3.E6.m1.3.3.3.4.2">𝑓</ci><ci id="S3.E6.m1.3.3.3.4.3a.cmml" xref="S3.E6.m1.3.3.3.4.3"><mtext id="S3.E6.m1.3.3.3.4.3.cmml" mathsize="70%" xref="S3.E6.m1.3.3.3.4.3">VLM</mtext></ci></apply><interval closure="open" id="S3.E6.m1.3.3.3.2.3.cmml" xref="S3.E6.m1.3.3.3.2.2"><apply id="S3.E6.m1.2.2.2.1.1.1.cmml" xref="S3.E6.m1.2.2.2.1.1.1"><times id="S3.E6.m1.2.2.2.1.1.1.2.cmml" xref="S3.E6.m1.2.2.2.1.1.1.2"></times><apply id="S3.E6.m1.2.2.2.1.1.1.3.cmml" xref="S3.E6.m1.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.1.1.1.3.1.cmml" xref="S3.E6.m1.2.2.2.1.1.1.3">subscript</csymbol><ci id="S3.E6.m1.2.2.2.1.1.1.3.2.cmml" xref="S3.E6.m1.2.2.2.1.1.1.3.2">𝑝</ci><ci id="S3.E6.m1.2.2.2.1.1.1.3.3a.cmml" xref="S3.E6.m1.2.2.2.1.1.1.3.3"><mtext id="S3.E6.m1.2.2.2.1.1.1.3.3.cmml" mathsize="70%" xref="S3.E6.m1.2.2.2.1.1.1.3.3">valid-c</mtext></ci></apply><apply id="S3.E6.m1.2.2.2.1.1.1.1.1.1.cmml" xref="S3.E6.m1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.2.2.2.1.1.1.1.1">subscript</csymbol><apply id="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E6.m1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.1.cmml" xref="S3.E6.m1.2.2.2.1.1.1.1.1">superscript</csymbol><ci id="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.2.cmml" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.2">𝑐</ci><ci id="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.3.cmml" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.E6.m1.2.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E6.m1.2.2.2.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.E6.m1.3.3.3.2.2.2.cmml" xref="S3.E6.m1.3.3.3.2.2.2"><times id="S3.E6.m1.3.3.3.2.2.2.2.cmml" xref="S3.E6.m1.3.3.3.2.2.2.2"></times><ci id="S3.E6.m1.3.3.3.2.2.2.3.cmml" xref="S3.E6.m1.3.3.3.2.2.2.3">𝐼</ci><apply id="S3.E6.m1.3.3.3.2.2.2.1.1.1.cmml" xref="S3.E6.m1.3.3.3.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.3.2.2.2.1.1.1.1.cmml" xref="S3.E6.m1.3.3.3.2.2.2.1.1">subscript</csymbol><apply id="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.cmml" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.2"><ci id="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.1.cmml" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.1">~</ci><ci id="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.2.cmml" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.2.2">𝑏</ci></apply><ci id="S3.E6.m1.3.3.3.2.2.2.1.1.1.3.cmml" xref="S3.E6.m1.3.3.3.2.2.2.1.1.1.3">𝑖</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E6.m1.3c">o_{\text{valid-c}}(c^{k}_{i})=f_{\text{VLM}}(p_{\text{valid-c}}(c^{k}_{i}),I(%
\tilde{b}_{i}))</annotation><annotation encoding="application/x-llamapun" id="S3.E6.m1.3d">italic_o start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT ( italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_p start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT ( italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_I ( over~ start_ARG italic_b end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS3.SSS0.Px2.p2">
<p class="ltx_p" id="S3.SS3.SSS0.Px2.p2.5">We then manually design a scoring mechanism based on the validation result <math alttext="o_{\text{valid-c}}(c^{k}_{i})" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p2.1.m1.1"><semantics id="S3.SS3.SSS0.Px2.p2.1.m1.1a"><mrow id="S3.SS3.SSS0.Px2.p2.1.m1.1.1" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.cmml"><msub id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.cmml"><mi id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.2" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.2.cmml">o</mi><mtext id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.3" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.3a.cmml">valid-c</mtext></msub><mo id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.2" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.cmml"><mo id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.cmml">(</mo><msubsup id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.2" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.3" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.3.cmml">i</mi><mi id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.3" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p2.1.m1.1b"><apply id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1"><times id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.2"></times><apply id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.2">𝑜</ci><ci id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.3"><mtext id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.3.3">valid-c</mtext></ci></apply><apply id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.3.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.1.m1.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p2.1.m1.1c">o_{\text{valid-c}}(c^{k}_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p2.1.m1.1d">italic_o start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT ( italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>. Specifically, for each caption that contains multiple extracted visual concepts, we assign each correct visual concept <math alttext='o_{\text{valid-c}}(c^{k}_{i})=\text{"Yes"}' class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p2.2.m2.1"><semantics id="S3.SS3.SSS0.Px2.p2.2.m2.1a"><mrow id="S3.SS3.SSS0.Px2.p2.2.m2.1.1" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.cmml"><mrow id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.cmml"><msub id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.cmml"><mi id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.2" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.2.cmml">o</mi><mtext id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.3" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.3a.cmml">valid-c</mtext></msub><mo id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.2" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.cmml"><mo id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.cmml">(</mo><msubsup id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.2" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.3" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.3.cmml">i</mi><mi id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.3" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.2" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.2.cmml">=</mo><mtext id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.3" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.3a.cmml">"Yes"</mtext></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p2.2.m2.1b"><apply id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1"><eq id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.2"></eq><apply id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1"><times id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.2"></times><apply id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.2">𝑜</ci><ci id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.3"><mtext id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.3.3">valid-c</mtext></ci></apply><apply id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.3.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.1.1.1.1.3">𝑖</ci></apply></apply><ci id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.3a.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.3"><mtext id="S3.SS3.SSS0.Px2.p2.2.m2.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.2.m2.1.1.3">"Yes"</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p2.2.m2.1c">o_{\text{valid-c}}(c^{k}_{i})=\text{"Yes"}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p2.2.m2.1d">italic_o start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT ( italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = "Yes"</annotation></semantics></math> to score 1 and each hallucinated visual concept <math alttext='o_{\text{valid-c}}(c^{k}_{i})=\text{"No"}' class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p2.3.m3.1"><semantics id="S3.SS3.SSS0.Px2.p2.3.m3.1a"><mrow id="S3.SS3.SSS0.Px2.p2.3.m3.1.1" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.cmml"><mrow id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.cmml"><msub id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.cmml"><mi id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.2" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.2.cmml">o</mi><mtext id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.3" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.3a.cmml">valid-c</mtext></msub><mo id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.2" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.cmml"><mo id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.cmml">(</mo><msubsup id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.2" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.3" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.3.cmml">i</mi><mi id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.3" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.2" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.2.cmml">=</mo><mtext id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.3" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.3a.cmml">"No"</mtext></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p2.3.m3.1b"><apply id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1"><eq id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.2"></eq><apply id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1"><times id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.2"></times><apply id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.2">𝑜</ci><ci id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.3"><mtext id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.3.3">valid-c</mtext></ci></apply><apply id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1">subscript</csymbol><apply id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.1.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1">superscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.2.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.3.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.1.1.1.1.3">𝑖</ci></apply></apply><ci id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.3a.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.3"><mtext id="S3.SS3.SSS0.Px2.p2.3.m3.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.3.m3.1.1.3">"No"</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p2.3.m3.1c">o_{\text{valid-c}}(c^{k}_{i})=\text{"No"}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p2.3.m3.1d">italic_o start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT ( italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = "No"</annotation></semantics></math> to -1. By accumulating the scores in each caption, we select the caption with the highest score in one beam as the final caption <math alttext="o_{\text{desc}}(c_{i})" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p2.4.m4.1"><semantics id="S3.SS3.SSS0.Px2.p2.4.m4.1a"><mrow id="S3.SS3.SSS0.Px2.p2.4.m4.1.1" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.cmml"><msub id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.cmml"><mi id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.2" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.2.cmml">o</mi><mtext id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.3" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.3a.cmml">desc</mtext></msub><mo id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.2" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.2.cmml">⁢</mo><mrow id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.cmml"><mo id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.2" stretchy="false" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.cmml">(</mo><msub id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.2" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.3" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.3" stretchy="false" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p2.4.m4.1b"><apply id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1"><times id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.2"></times><apply id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.1.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.2.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.2">𝑜</ci><ci id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.3a.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.3"><mtext id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.3.cmml" mathsize="70%" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.3.3">desc</mtext></ci></apply><apply id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.4.m4.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p2.4.m4.1c">o_{\text{desc}}(c_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p2.4.m4.1d">italic_o start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> for the given visual concept <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p2.5.m5.1"><semantics id="S3.SS3.SSS0.Px2.p2.5.m5.1a"><msub id="S3.SS3.SSS0.Px2.p2.5.m5.1.1" xref="S3.SS3.SSS0.Px2.p2.5.m5.1.1.cmml"><mi id="S3.SS3.SSS0.Px2.p2.5.m5.1.1.2" xref="S3.SS3.SSS0.Px2.p2.5.m5.1.1.2.cmml">c</mi><mi id="S3.SS3.SSS0.Px2.p2.5.m5.1.1.3" xref="S3.SS3.SSS0.Px2.p2.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p2.5.m5.1b"><apply id="S3.SS3.SSS0.Px2.p2.5.m5.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS0.Px2.p2.5.m5.1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p2.5.m5.1.1">subscript</csymbol><ci id="S3.SS3.SSS0.Px2.p2.5.m5.1.1.2.cmml" xref="S3.SS3.SSS0.Px2.p2.5.m5.1.1.2">𝑐</ci><ci id="S3.SS3.SSS0.Px2.p2.5.m5.1.1.3.cmml" xref="S3.SS3.SSS0.Px2.p2.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p2.5.m5.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p2.5.m5.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, which is supposed to be the most diverse and correct caption.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> Data Construction and Consistency Filtering Pipeline</figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="alg1.l0">
<span class="ltx_tag ltx_tag_listingline">0:</span>  Image <math alttext="I" class="ltx_Math" display="inline" id="alg1.l0.m1.1"><semantics id="alg1.l0.m1.1a"><mi id="alg1.l0.m1.1.1" xref="alg1.l0.m1.1.1.cmml">I</mi><annotation-xml encoding="MathML-Content" id="alg1.l0.m1.1b"><ci id="alg1.l0.m1.1.1.cmml" xref="alg1.l0.m1.1.1">𝐼</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m1.1c">I</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m1.1d">italic_I</annotation></semantics></math> from dataset <math alttext="D_{\text{raw}}" class="ltx_Math" display="inline" id="alg1.l0.m2.1"><semantics id="alg1.l0.m2.1a"><msub id="alg1.l0.m2.1.1" xref="alg1.l0.m2.1.1.cmml"><mi id="alg1.l0.m2.1.1.2" xref="alg1.l0.m2.1.1.2.cmml">D</mi><mtext id="alg1.l0.m2.1.1.3" xref="alg1.l0.m2.1.1.3a.cmml">raw</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m2.1b"><apply id="alg1.l0.m2.1.1.cmml" xref="alg1.l0.m2.1.1"><csymbol cd="ambiguous" id="alg1.l0.m2.1.1.1.cmml" xref="alg1.l0.m2.1.1">subscript</csymbol><ci id="alg1.l0.m2.1.1.2.cmml" xref="alg1.l0.m2.1.1.2">𝐷</ci><ci id="alg1.l0.m2.1.1.3a.cmml" xref="alg1.l0.m2.1.1.3"><mtext id="alg1.l0.m2.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m2.1.1.3">raw</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m2.1c">D_{\text{raw}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m2.1d">italic_D start_POSTSUBSCRIPT raw end_POSTSUBSCRIPT</annotation></semantics></math>, Instruct Prompts: <math alttext="p_{\text{g}}" class="ltx_Math" display="inline" id="alg1.l0.m3.1"><semantics id="alg1.l0.m3.1a"><msub id="alg1.l0.m3.1.1" xref="alg1.l0.m3.1.1.cmml"><mi id="alg1.l0.m3.1.1.2" xref="alg1.l0.m3.1.1.2.cmml">p</mi><mtext id="alg1.l0.m3.1.1.3" xref="alg1.l0.m3.1.1.3a.cmml">g</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m3.1b"><apply id="alg1.l0.m3.1.1.cmml" xref="alg1.l0.m3.1.1"><csymbol cd="ambiguous" id="alg1.l0.m3.1.1.1.cmml" xref="alg1.l0.m3.1.1">subscript</csymbol><ci id="alg1.l0.m3.1.1.2.cmml" xref="alg1.l0.m3.1.1.2">𝑝</ci><ci id="alg1.l0.m3.1.1.3a.cmml" xref="alg1.l0.m3.1.1.3"><mtext id="alg1.l0.m3.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m3.1.1.3">g</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m3.1c">p_{\text{g}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m3.1d">italic_p start_POSTSUBSCRIPT g end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="p_{\text{d}}" class="ltx_Math" display="inline" id="alg1.l0.m4.1"><semantics id="alg1.l0.m4.1a"><msub id="alg1.l0.m4.1.1" xref="alg1.l0.m4.1.1.cmml"><mi id="alg1.l0.m4.1.1.2" xref="alg1.l0.m4.1.1.2.cmml">p</mi><mtext id="alg1.l0.m4.1.1.3" xref="alg1.l0.m4.1.1.3a.cmml">d</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m4.1b"><apply id="alg1.l0.m4.1.1.cmml" xref="alg1.l0.m4.1.1"><csymbol cd="ambiguous" id="alg1.l0.m4.1.1.1.cmml" xref="alg1.l0.m4.1.1">subscript</csymbol><ci id="alg1.l0.m4.1.1.2.cmml" xref="alg1.l0.m4.1.1.2">𝑝</ci><ci id="alg1.l0.m4.1.1.3a.cmml" xref="alg1.l0.m4.1.1.3"><mtext id="alg1.l0.m4.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m4.1.1.3">d</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m4.1c">p_{\text{d}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m4.1d">italic_p start_POSTSUBSCRIPT d end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="p_{\text{desc}}" class="ltx_Math" display="inline" id="alg1.l0.m5.1"><semantics id="alg1.l0.m5.1a"><msub id="alg1.l0.m5.1.1" xref="alg1.l0.m5.1.1.cmml"><mi id="alg1.l0.m5.1.1.2" xref="alg1.l0.m5.1.1.2.cmml">p</mi><mtext id="alg1.l0.m5.1.1.3" xref="alg1.l0.m5.1.1.3a.cmml">desc</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m5.1b"><apply id="alg1.l0.m5.1.1.cmml" xref="alg1.l0.m5.1.1"><csymbol cd="ambiguous" id="alg1.l0.m5.1.1.1.cmml" xref="alg1.l0.m5.1.1">subscript</csymbol><ci id="alg1.l0.m5.1.1.2.cmml" xref="alg1.l0.m5.1.1.2">𝑝</ci><ci id="alg1.l0.m5.1.1.3a.cmml" xref="alg1.l0.m5.1.1.3"><mtext id="alg1.l0.m5.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m5.1.1.3">desc</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m5.1c">p_{\text{desc}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m5.1d">italic_p start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="p_{\text{ocr}}" class="ltx_Math" display="inline" id="alg1.l0.m6.1"><semantics id="alg1.l0.m6.1a"><msub id="alg1.l0.m6.1.1" xref="alg1.l0.m6.1.1.cmml"><mi id="alg1.l0.m6.1.1.2" xref="alg1.l0.m6.1.1.2.cmml">p</mi><mtext id="alg1.l0.m6.1.1.3" xref="alg1.l0.m6.1.1.3a.cmml">ocr</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m6.1b"><apply id="alg1.l0.m6.1.1.cmml" xref="alg1.l0.m6.1.1"><csymbol cd="ambiguous" id="alg1.l0.m6.1.1.1.cmml" xref="alg1.l0.m6.1.1">subscript</csymbol><ci id="alg1.l0.m6.1.1.2.cmml" xref="alg1.l0.m6.1.1.2">𝑝</ci><ci id="alg1.l0.m6.1.1.3a.cmml" xref="alg1.l0.m6.1.1.3"><mtext id="alg1.l0.m6.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m6.1.1.3">ocr</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m6.1c">p_{\text{ocr}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m6.1d">italic_p start_POSTSUBSCRIPT ocr end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="p_{\text{valid-g}}" class="ltx_Math" display="inline" id="alg1.l0.m7.1"><semantics id="alg1.l0.m7.1a"><msub id="alg1.l0.m7.1.1" xref="alg1.l0.m7.1.1.cmml"><mi id="alg1.l0.m7.1.1.2" xref="alg1.l0.m7.1.1.2.cmml">p</mi><mtext id="alg1.l0.m7.1.1.3" xref="alg1.l0.m7.1.1.3a.cmml">valid-g</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m7.1b"><apply id="alg1.l0.m7.1.1.cmml" xref="alg1.l0.m7.1.1"><csymbol cd="ambiguous" id="alg1.l0.m7.1.1.1.cmml" xref="alg1.l0.m7.1.1">subscript</csymbol><ci id="alg1.l0.m7.1.1.2.cmml" xref="alg1.l0.m7.1.1.2">𝑝</ci><ci id="alg1.l0.m7.1.1.3a.cmml" xref="alg1.l0.m7.1.1.3"><mtext id="alg1.l0.m7.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m7.1.1.3">valid-g</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m7.1c">p_{\text{valid-g}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m7.1d">italic_p start_POSTSUBSCRIPT valid-g end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="p_{\text{valid-c}}" class="ltx_Math" display="inline" id="alg1.l0.m8.1"><semantics id="alg1.l0.m8.1a"><msub id="alg1.l0.m8.1.1" xref="alg1.l0.m8.1.1.cmml"><mi id="alg1.l0.m8.1.1.2" xref="alg1.l0.m8.1.1.2.cmml">p</mi><mtext id="alg1.l0.m8.1.1.3" xref="alg1.l0.m8.1.1.3a.cmml">valid-c</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m8.1b"><apply id="alg1.l0.m8.1.1.cmml" xref="alg1.l0.m8.1.1"><csymbol cd="ambiguous" id="alg1.l0.m8.1.1.1.cmml" xref="alg1.l0.m8.1.1">subscript</csymbol><ci id="alg1.l0.m8.1.1.2.cmml" xref="alg1.l0.m8.1.1.2">𝑝</ci><ci id="alg1.l0.m8.1.1.3a.cmml" xref="alg1.l0.m8.1.1.3"><mtext id="alg1.l0.m8.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m8.1.1.3">valid-c</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m8.1c">p_{\text{valid-c}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m8.1d">italic_p start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT</annotation></semantics></math>, VLM <math alttext="f_{\text{VLM}}" class="ltx_Math" display="inline" id="alg1.l0.m9.1"><semantics id="alg1.l0.m9.1a"><msub id="alg1.l0.m9.1.1" xref="alg1.l0.m9.1.1.cmml"><mi id="alg1.l0.m9.1.1.2" xref="alg1.l0.m9.1.1.2.cmml">f</mi><mtext id="alg1.l0.m9.1.1.3" xref="alg1.l0.m9.1.1.3a.cmml">VLM</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m9.1b"><apply id="alg1.l0.m9.1.1.cmml" xref="alg1.l0.m9.1.1"><csymbol cd="ambiguous" id="alg1.l0.m9.1.1.1.cmml" xref="alg1.l0.m9.1.1">subscript</csymbol><ci id="alg1.l0.m9.1.1.2.cmml" xref="alg1.l0.m9.1.1.2">𝑓</ci><ci id="alg1.l0.m9.1.1.3a.cmml" xref="alg1.l0.m9.1.1.3"><mtext id="alg1.l0.m9.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m9.1.1.3">VLM</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m9.1c">f_{\text{VLM}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m9.1d">italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT</annotation></semantics></math>, Grounding DINO <math alttext="f_{\text{DINO}}" class="ltx_Math" display="inline" id="alg1.l0.m10.1"><semantics id="alg1.l0.m10.1a"><msub id="alg1.l0.m10.1.1" xref="alg1.l0.m10.1.1.cmml"><mi id="alg1.l0.m10.1.1.2" xref="alg1.l0.m10.1.1.2.cmml">f</mi><mtext id="alg1.l0.m10.1.1.3" xref="alg1.l0.m10.1.1.3a.cmml">DINO</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l0.m10.1b"><apply id="alg1.l0.m10.1.1.cmml" xref="alg1.l0.m10.1.1"><csymbol cd="ambiguous" id="alg1.l0.m10.1.1.1.cmml" xref="alg1.l0.m10.1.1">subscript</csymbol><ci id="alg1.l0.m10.1.1.2.cmml" xref="alg1.l0.m10.1.1.2">𝑓</ci><ci id="alg1.l0.m10.1.1.3a.cmml" xref="alg1.l0.m10.1.1.3"><mtext id="alg1.l0.m10.1.1.3.cmml" mathsize="70%" xref="alg1.l0.m10.1.1.3">DINO</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l0.m10.1c">f_{\text{DINO}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l0.m10.1d">italic_f start_POSTSUBSCRIPT DINO end_POSTSUBSCRIPT</annotation></semantics></math>.

</div>
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span>  Global Caption Generate.  <math alttext="o_{g},o_{d}=f_{\text{VLM}}(I,p_{g}),f_{\text{VLM}}(I,p_{d})" class="ltx_Math" display="inline" id="alg1.l1.m1.4"><semantics id="alg1.l1.m1.4a"><mrow id="alg1.l1.m1.4.4.2" xref="alg1.l1.m1.4.4.3.cmml"><mrow id="alg1.l1.m1.3.3.1.1" xref="alg1.l1.m1.3.3.1.1.cmml"><mrow id="alg1.l1.m1.3.3.1.1.2.2" xref="alg1.l1.m1.3.3.1.1.2.3.cmml"><msub id="alg1.l1.m1.3.3.1.1.1.1.1" xref="alg1.l1.m1.3.3.1.1.1.1.1.cmml"><mi id="alg1.l1.m1.3.3.1.1.1.1.1.2" xref="alg1.l1.m1.3.3.1.1.1.1.1.2.cmml">o</mi><mi id="alg1.l1.m1.3.3.1.1.1.1.1.3" xref="alg1.l1.m1.3.3.1.1.1.1.1.3.cmml">g</mi></msub><mo id="alg1.l1.m1.3.3.1.1.2.2.3" xref="alg1.l1.m1.3.3.1.1.2.3.cmml">,</mo><msub id="alg1.l1.m1.3.3.1.1.2.2.2" xref="alg1.l1.m1.3.3.1.1.2.2.2.cmml"><mi id="alg1.l1.m1.3.3.1.1.2.2.2.2" xref="alg1.l1.m1.3.3.1.1.2.2.2.2.cmml">o</mi><mi id="alg1.l1.m1.3.3.1.1.2.2.2.3" xref="alg1.l1.m1.3.3.1.1.2.2.2.3.cmml">d</mi></msub></mrow><mo id="alg1.l1.m1.3.3.1.1.4" xref="alg1.l1.m1.3.3.1.1.4.cmml">=</mo><mrow id="alg1.l1.m1.3.3.1.1.3" xref="alg1.l1.m1.3.3.1.1.3.cmml"><msub id="alg1.l1.m1.3.3.1.1.3.3" xref="alg1.l1.m1.3.3.1.1.3.3.cmml"><mi id="alg1.l1.m1.3.3.1.1.3.3.2" xref="alg1.l1.m1.3.3.1.1.3.3.2.cmml">f</mi><mtext id="alg1.l1.m1.3.3.1.1.3.3.3" xref="alg1.l1.m1.3.3.1.1.3.3.3a.cmml">VLM</mtext></msub><mo id="alg1.l1.m1.3.3.1.1.3.2" xref="alg1.l1.m1.3.3.1.1.3.2.cmml">⁢</mo><mrow id="alg1.l1.m1.3.3.1.1.3.1.1" xref="alg1.l1.m1.3.3.1.1.3.1.2.cmml"><mo id="alg1.l1.m1.3.3.1.1.3.1.1.2" stretchy="false" xref="alg1.l1.m1.3.3.1.1.3.1.2.cmml">(</mo><mi id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml">I</mi><mo id="alg1.l1.m1.3.3.1.1.3.1.1.3" xref="alg1.l1.m1.3.3.1.1.3.1.2.cmml">,</mo><msub id="alg1.l1.m1.3.3.1.1.3.1.1.1" xref="alg1.l1.m1.3.3.1.1.3.1.1.1.cmml"><mi id="alg1.l1.m1.3.3.1.1.3.1.1.1.2" xref="alg1.l1.m1.3.3.1.1.3.1.1.1.2.cmml">p</mi><mi id="alg1.l1.m1.3.3.1.1.3.1.1.1.3" xref="alg1.l1.m1.3.3.1.1.3.1.1.1.3.cmml">g</mi></msub><mo id="alg1.l1.m1.3.3.1.1.3.1.1.4" stretchy="false" xref="alg1.l1.m1.3.3.1.1.3.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="alg1.l1.m1.4.4.2.3" xref="alg1.l1.m1.4.4.3a.cmml">,</mo><mrow id="alg1.l1.m1.4.4.2.2" xref="alg1.l1.m1.4.4.2.2.cmml"><msub id="alg1.l1.m1.4.4.2.2.3" xref="alg1.l1.m1.4.4.2.2.3.cmml"><mi id="alg1.l1.m1.4.4.2.2.3.2" xref="alg1.l1.m1.4.4.2.2.3.2.cmml">f</mi><mtext id="alg1.l1.m1.4.4.2.2.3.3" xref="alg1.l1.m1.4.4.2.2.3.3a.cmml">VLM</mtext></msub><mo id="alg1.l1.m1.4.4.2.2.2" xref="alg1.l1.m1.4.4.2.2.2.cmml">⁢</mo><mrow id="alg1.l1.m1.4.4.2.2.1.1" xref="alg1.l1.m1.4.4.2.2.1.2.cmml"><mo id="alg1.l1.m1.4.4.2.2.1.1.2" stretchy="false" xref="alg1.l1.m1.4.4.2.2.1.2.cmml">(</mo><mi id="alg1.l1.m1.2.2" xref="alg1.l1.m1.2.2.cmml">I</mi><mo id="alg1.l1.m1.4.4.2.2.1.1.3" xref="alg1.l1.m1.4.4.2.2.1.2.cmml">,</mo><msub id="alg1.l1.m1.4.4.2.2.1.1.1" xref="alg1.l1.m1.4.4.2.2.1.1.1.cmml"><mi id="alg1.l1.m1.4.4.2.2.1.1.1.2" xref="alg1.l1.m1.4.4.2.2.1.1.1.2.cmml">p</mi><mi id="alg1.l1.m1.4.4.2.2.1.1.1.3" xref="alg1.l1.m1.4.4.2.2.1.1.1.3.cmml">d</mi></msub><mo id="alg1.l1.m1.4.4.2.2.1.1.4" stretchy="false" xref="alg1.l1.m1.4.4.2.2.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.4b"><apply id="alg1.l1.m1.4.4.3.cmml" xref="alg1.l1.m1.4.4.2"><csymbol cd="ambiguous" id="alg1.l1.m1.4.4.3a.cmml" xref="alg1.l1.m1.4.4.2.3">formulae-sequence</csymbol><apply id="alg1.l1.m1.3.3.1.1.cmml" xref="alg1.l1.m1.3.3.1.1"><eq id="alg1.l1.m1.3.3.1.1.4.cmml" xref="alg1.l1.m1.3.3.1.1.4"></eq><list id="alg1.l1.m1.3.3.1.1.2.3.cmml" xref="alg1.l1.m1.3.3.1.1.2.2"><apply id="alg1.l1.m1.3.3.1.1.1.1.1.cmml" xref="alg1.l1.m1.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l1.m1.3.3.1.1.1.1.1.1.cmml" xref="alg1.l1.m1.3.3.1.1.1.1.1">subscript</csymbol><ci id="alg1.l1.m1.3.3.1.1.1.1.1.2.cmml" xref="alg1.l1.m1.3.3.1.1.1.1.1.2">𝑜</ci><ci id="alg1.l1.m1.3.3.1.1.1.1.1.3.cmml" xref="alg1.l1.m1.3.3.1.1.1.1.1.3">𝑔</ci></apply><apply id="alg1.l1.m1.3.3.1.1.2.2.2.cmml" xref="alg1.l1.m1.3.3.1.1.2.2.2"><csymbol cd="ambiguous" id="alg1.l1.m1.3.3.1.1.2.2.2.1.cmml" xref="alg1.l1.m1.3.3.1.1.2.2.2">subscript</csymbol><ci id="alg1.l1.m1.3.3.1.1.2.2.2.2.cmml" xref="alg1.l1.m1.3.3.1.1.2.2.2.2">𝑜</ci><ci id="alg1.l1.m1.3.3.1.1.2.2.2.3.cmml" xref="alg1.l1.m1.3.3.1.1.2.2.2.3">𝑑</ci></apply></list><apply id="alg1.l1.m1.3.3.1.1.3.cmml" xref="alg1.l1.m1.3.3.1.1.3"><times id="alg1.l1.m1.3.3.1.1.3.2.cmml" xref="alg1.l1.m1.3.3.1.1.3.2"></times><apply id="alg1.l1.m1.3.3.1.1.3.3.cmml" xref="alg1.l1.m1.3.3.1.1.3.3"><csymbol cd="ambiguous" id="alg1.l1.m1.3.3.1.1.3.3.1.cmml" xref="alg1.l1.m1.3.3.1.1.3.3">subscript</csymbol><ci id="alg1.l1.m1.3.3.1.1.3.3.2.cmml" xref="alg1.l1.m1.3.3.1.1.3.3.2">𝑓</ci><ci id="alg1.l1.m1.3.3.1.1.3.3.3a.cmml" xref="alg1.l1.m1.3.3.1.1.3.3.3"><mtext id="alg1.l1.m1.3.3.1.1.3.3.3.cmml" mathsize="70%" xref="alg1.l1.m1.3.3.1.1.3.3.3">VLM</mtext></ci></apply><interval closure="open" id="alg1.l1.m1.3.3.1.1.3.1.2.cmml" xref="alg1.l1.m1.3.3.1.1.3.1.1"><ci id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1">𝐼</ci><apply id="alg1.l1.m1.3.3.1.1.3.1.1.1.cmml" xref="alg1.l1.m1.3.3.1.1.3.1.1.1"><csymbol cd="ambiguous" id="alg1.l1.m1.3.3.1.1.3.1.1.1.1.cmml" xref="alg1.l1.m1.3.3.1.1.3.1.1.1">subscript</csymbol><ci id="alg1.l1.m1.3.3.1.1.3.1.1.1.2.cmml" xref="alg1.l1.m1.3.3.1.1.3.1.1.1.2">𝑝</ci><ci id="alg1.l1.m1.3.3.1.1.3.1.1.1.3.cmml" xref="alg1.l1.m1.3.3.1.1.3.1.1.1.3">𝑔</ci></apply></interval></apply></apply><apply id="alg1.l1.m1.4.4.2.2.cmml" xref="alg1.l1.m1.4.4.2.2"><times id="alg1.l1.m1.4.4.2.2.2.cmml" xref="alg1.l1.m1.4.4.2.2.2"></times><apply id="alg1.l1.m1.4.4.2.2.3.cmml" xref="alg1.l1.m1.4.4.2.2.3"><csymbol cd="ambiguous" id="alg1.l1.m1.4.4.2.2.3.1.cmml" xref="alg1.l1.m1.4.4.2.2.3">subscript</csymbol><ci id="alg1.l1.m1.4.4.2.2.3.2.cmml" xref="alg1.l1.m1.4.4.2.2.3.2">𝑓</ci><ci id="alg1.l1.m1.4.4.2.2.3.3a.cmml" xref="alg1.l1.m1.4.4.2.2.3.3"><mtext id="alg1.l1.m1.4.4.2.2.3.3.cmml" mathsize="70%" xref="alg1.l1.m1.4.4.2.2.3.3">VLM</mtext></ci></apply><interval closure="open" id="alg1.l1.m1.4.4.2.2.1.2.cmml" xref="alg1.l1.m1.4.4.2.2.1.1"><ci id="alg1.l1.m1.2.2.cmml" xref="alg1.l1.m1.2.2">𝐼</ci><apply id="alg1.l1.m1.4.4.2.2.1.1.1.cmml" xref="alg1.l1.m1.4.4.2.2.1.1.1"><csymbol cd="ambiguous" id="alg1.l1.m1.4.4.2.2.1.1.1.1.cmml" xref="alg1.l1.m1.4.4.2.2.1.1.1">subscript</csymbol><ci id="alg1.l1.m1.4.4.2.2.1.1.1.2.cmml" xref="alg1.l1.m1.4.4.2.2.1.1.1.2">𝑝</ci><ci id="alg1.l1.m1.4.4.2.2.1.1.1.3.cmml" xref="alg1.l1.m1.4.4.2.2.1.1.1.3">𝑑</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.4c">o_{g},o_{d}=f_{\text{VLM}}(I,p_{g}),f_{\text{VLM}}(I,p_{d})</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.4d">italic_o start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_I , italic_p start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT ) , italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_I , italic_p start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>  Visual Concepts Extraction.  <math alttext="\mathbf{N}=NLTK(o_{g},o_{d}),\quad\mathbf{B},\mathbf{C}=f_{\text{DINO}}(I,%
\mathbf{N})" class="ltx_Math" display="inline" id="alg1.l2.m1.5"><semantics id="alg1.l2.m1.5a"><mrow id="alg1.l2.m1.5.5.2" xref="alg1.l2.m1.5.5.3.cmml"><mrow id="alg1.l2.m1.4.4.1.1" xref="alg1.l2.m1.4.4.1.1.cmml"><mi id="alg1.l2.m1.4.4.1.1.3" xref="alg1.l2.m1.4.4.1.1.3.cmml">𝐍</mi><mo id="alg1.l2.m1.4.4.1.1.2" xref="alg1.l2.m1.4.4.1.1.2.cmml">=</mo><mrow id="alg1.l2.m1.4.4.1.1.1.1" xref="alg1.l2.m1.4.4.1.1.1.2.cmml"><mrow id="alg1.l2.m1.4.4.1.1.1.1.1" xref="alg1.l2.m1.4.4.1.1.1.1.1.cmml"><mi id="alg1.l2.m1.4.4.1.1.1.1.1.4" xref="alg1.l2.m1.4.4.1.1.1.1.1.4.cmml">N</mi><mo id="alg1.l2.m1.4.4.1.1.1.1.1.3" xref="alg1.l2.m1.4.4.1.1.1.1.1.3.cmml">⁢</mo><mi id="alg1.l2.m1.4.4.1.1.1.1.1.5" xref="alg1.l2.m1.4.4.1.1.1.1.1.5.cmml">L</mi><mo id="alg1.l2.m1.4.4.1.1.1.1.1.3a" xref="alg1.l2.m1.4.4.1.1.1.1.1.3.cmml">⁢</mo><mi id="alg1.l2.m1.4.4.1.1.1.1.1.6" xref="alg1.l2.m1.4.4.1.1.1.1.1.6.cmml">T</mi><mo id="alg1.l2.m1.4.4.1.1.1.1.1.3b" xref="alg1.l2.m1.4.4.1.1.1.1.1.3.cmml">⁢</mo><mi id="alg1.l2.m1.4.4.1.1.1.1.1.7" xref="alg1.l2.m1.4.4.1.1.1.1.1.7.cmml">K</mi><mo id="alg1.l2.m1.4.4.1.1.1.1.1.3c" xref="alg1.l2.m1.4.4.1.1.1.1.1.3.cmml">⁢</mo><mrow id="alg1.l2.m1.4.4.1.1.1.1.1.2.2" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.3.cmml"><mo id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.3" stretchy="false" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.3.cmml">(</mo><msub id="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1" xref="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mi id="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.2" xref="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.2.cmml">o</mi><mi id="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.3" xref="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.3.cmml">g</mi></msub><mo id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.4" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.3.cmml">,</mo><msub id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.cmml"><mi id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.2" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.2.cmml">o</mi><mi id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.3" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.3.cmml">d</mi></msub><mo id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.5" stretchy="false" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="alg1.l2.m1.4.4.1.1.1.1.2" rspace="1.167em" xref="alg1.l2.m1.4.4.1.1.1.2.cmml">,</mo><mi id="alg1.l2.m1.3.3" xref="alg1.l2.m1.3.3.cmml">𝐁</mi></mrow></mrow><mo id="alg1.l2.m1.5.5.2.3" xref="alg1.l2.m1.5.5.3a.cmml">,</mo><mrow id="alg1.l2.m1.5.5.2.2" xref="alg1.l2.m1.5.5.2.2.cmml"><mi id="alg1.l2.m1.5.5.2.2.2" xref="alg1.l2.m1.5.5.2.2.2.cmml">𝐂</mi><mo id="alg1.l2.m1.5.5.2.2.1" xref="alg1.l2.m1.5.5.2.2.1.cmml">=</mo><mrow id="alg1.l2.m1.5.5.2.2.3" xref="alg1.l2.m1.5.5.2.2.3.cmml"><msub id="alg1.l2.m1.5.5.2.2.3.2" xref="alg1.l2.m1.5.5.2.2.3.2.cmml"><mi id="alg1.l2.m1.5.5.2.2.3.2.2" xref="alg1.l2.m1.5.5.2.2.3.2.2.cmml">f</mi><mtext id="alg1.l2.m1.5.5.2.2.3.2.3" xref="alg1.l2.m1.5.5.2.2.3.2.3a.cmml">DINO</mtext></msub><mo id="alg1.l2.m1.5.5.2.2.3.1" xref="alg1.l2.m1.5.5.2.2.3.1.cmml">⁢</mo><mrow id="alg1.l2.m1.5.5.2.2.3.3.2" xref="alg1.l2.m1.5.5.2.2.3.3.1.cmml"><mo id="alg1.l2.m1.5.5.2.2.3.3.2.1" stretchy="false" xref="alg1.l2.m1.5.5.2.2.3.3.1.cmml">(</mo><mi id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml">I</mi><mo id="alg1.l2.m1.5.5.2.2.3.3.2.2" xref="alg1.l2.m1.5.5.2.2.3.3.1.cmml">,</mo><mi id="alg1.l2.m1.2.2" xref="alg1.l2.m1.2.2.cmml">𝐍</mi><mo id="alg1.l2.m1.5.5.2.2.3.3.2.3" stretchy="false" xref="alg1.l2.m1.5.5.2.2.3.3.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.5b"><apply id="alg1.l2.m1.5.5.3.cmml" xref="alg1.l2.m1.5.5.2"><csymbol cd="ambiguous" id="alg1.l2.m1.5.5.3a.cmml" xref="alg1.l2.m1.5.5.2.3">formulae-sequence</csymbol><apply id="alg1.l2.m1.4.4.1.1.cmml" xref="alg1.l2.m1.4.4.1.1"><eq id="alg1.l2.m1.4.4.1.1.2.cmml" xref="alg1.l2.m1.4.4.1.1.2"></eq><ci id="alg1.l2.m1.4.4.1.1.3.cmml" xref="alg1.l2.m1.4.4.1.1.3">𝐍</ci><list id="alg1.l2.m1.4.4.1.1.1.2.cmml" xref="alg1.l2.m1.4.4.1.1.1.1"><apply id="alg1.l2.m1.4.4.1.1.1.1.1.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1"><times id="alg1.l2.m1.4.4.1.1.1.1.1.3.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.3"></times><ci id="alg1.l2.m1.4.4.1.1.1.1.1.4.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.4">𝑁</ci><ci id="alg1.l2.m1.4.4.1.1.1.1.1.5.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.5">𝐿</ci><ci id="alg1.l2.m1.4.4.1.1.1.1.1.6.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.6">𝑇</ci><ci id="alg1.l2.m1.4.4.1.1.1.1.1.7.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.7">𝐾</ci><interval closure="open" id="alg1.l2.m1.4.4.1.1.1.1.1.2.3.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.2"><apply id="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.2">𝑜</ci><ci id="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.1.1.1.3">𝑔</ci></apply><apply id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.1.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.2.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.2">𝑜</ci><ci id="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.3.cmml" xref="alg1.l2.m1.4.4.1.1.1.1.1.2.2.2.3">𝑑</ci></apply></interval></apply><ci id="alg1.l2.m1.3.3.cmml" xref="alg1.l2.m1.3.3">𝐁</ci></list></apply><apply id="alg1.l2.m1.5.5.2.2.cmml" xref="alg1.l2.m1.5.5.2.2"><eq id="alg1.l2.m1.5.5.2.2.1.cmml" xref="alg1.l2.m1.5.5.2.2.1"></eq><ci id="alg1.l2.m1.5.5.2.2.2.cmml" xref="alg1.l2.m1.5.5.2.2.2">𝐂</ci><apply id="alg1.l2.m1.5.5.2.2.3.cmml" xref="alg1.l2.m1.5.5.2.2.3"><times id="alg1.l2.m1.5.5.2.2.3.1.cmml" xref="alg1.l2.m1.5.5.2.2.3.1"></times><apply id="alg1.l2.m1.5.5.2.2.3.2.cmml" xref="alg1.l2.m1.5.5.2.2.3.2"><csymbol cd="ambiguous" id="alg1.l2.m1.5.5.2.2.3.2.1.cmml" xref="alg1.l2.m1.5.5.2.2.3.2">subscript</csymbol><ci id="alg1.l2.m1.5.5.2.2.3.2.2.cmml" xref="alg1.l2.m1.5.5.2.2.3.2.2">𝑓</ci><ci id="alg1.l2.m1.5.5.2.2.3.2.3a.cmml" xref="alg1.l2.m1.5.5.2.2.3.2.3"><mtext id="alg1.l2.m1.5.5.2.2.3.2.3.cmml" mathsize="70%" xref="alg1.l2.m1.5.5.2.2.3.2.3">DINO</mtext></ci></apply><interval closure="open" id="alg1.l2.m1.5.5.2.2.3.3.1.cmml" xref="alg1.l2.m1.5.5.2.2.3.3.2"><ci id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1">𝐼</ci><ci id="alg1.l2.m1.2.2.cmml" xref="alg1.l2.m1.2.2">𝐍</ci></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.5c">\mathbf{N}=NLTK(o_{g},o_{d}),\quad\mathbf{B},\mathbf{C}=f_{\text{DINO}}(I,%
\mathbf{N})</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.5d">bold_N = italic_N italic_L italic_T italic_K ( italic_o start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT , italic_o start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT ) , bold_B , bold_C = italic_f start_POSTSUBSCRIPT DINO end_POSTSUBSCRIPT ( italic_I , bold_N )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>  Region-level Captions Generate.(<math alttext="c_{i}" class="ltx_Math" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><msub id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml"><mi id="alg1.l3.m1.1.1.2" xref="alg1.l3.m1.1.1.2.cmml">c</mi><mi id="alg1.l3.m1.1.1.3" xref="alg1.l3.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><apply id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1"><csymbol cd="ambiguous" id="alg1.l3.m1.1.1.1.cmml" xref="alg1.l3.m1.1.1">subscript</csymbol><ci id="alg1.l3.m1.1.1.2.cmml" xref="alg1.l3.m1.1.1.2">𝑐</ci><ci id="alg1.l3.m1.1.1.3.cmml" xref="alg1.l3.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> from <math alttext="\mathbf{C}" class="ltx_Math" display="inline" id="alg1.l3.m2.1"><semantics id="alg1.l3.m2.1a"><mi id="alg1.l3.m2.1.1" xref="alg1.l3.m2.1.1.cmml">𝐂</mi><annotation-xml encoding="MathML-Content" id="alg1.l3.m2.1b"><ci id="alg1.l3.m2.1.1.cmml" xref="alg1.l3.m2.1.1">𝐂</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m2.1c">\mathbf{C}</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m2.1d">bold_C</annotation></semantics></math>,<math alttext="b_{i}" class="ltx_Math" display="inline" id="alg1.l3.m3.1"><semantics id="alg1.l3.m3.1a"><msub id="alg1.l3.m3.1.1" xref="alg1.l3.m3.1.1.cmml"><mi id="alg1.l3.m3.1.1.2" xref="alg1.l3.m3.1.1.2.cmml">b</mi><mi id="alg1.l3.m3.1.1.3" xref="alg1.l3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.l3.m3.1b"><apply id="alg1.l3.m3.1.1.cmml" xref="alg1.l3.m3.1.1"><csymbol cd="ambiguous" id="alg1.l3.m3.1.1.1.cmml" xref="alg1.l3.m3.1.1">subscript</csymbol><ci id="alg1.l3.m3.1.1.2.cmml" xref="alg1.l3.m3.1.1.2">𝑏</ci><ci id="alg1.l3.m3.1.1.3.cmml" xref="alg1.l3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m3.1c">b_{i}</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m3.1d">italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> from <math alttext="\mathbf{B}" class="ltx_Math" display="inline" id="alg1.l3.m4.1"><semantics id="alg1.l3.m4.1a"><mi id="alg1.l3.m4.1.1" xref="alg1.l3.m4.1.1.cmml">𝐁</mi><annotation-xml encoding="MathML-Content" id="alg1.l3.m4.1b"><ci id="alg1.l3.m4.1.1.cmml" xref="alg1.l3.m4.1.1">𝐁</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m4.1c">\mathbf{B}</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m4.1d">bold_B</annotation></semantics></math>)  <math alttext="o_{\text{desc}}(c_{i})=f_{\text{VLM}}(p_{\text{desc}}(c_{i}),I(b_{i}))" class="ltx_Math" display="inline" id="alg1.l3.m5.3"><semantics id="alg1.l3.m5.3a"><mrow id="alg1.l3.m5.3.3" xref="alg1.l3.m5.3.3.cmml"><mrow id="alg1.l3.m5.1.1.1" xref="alg1.l3.m5.1.1.1.cmml"><msub id="alg1.l3.m5.1.1.1.3" xref="alg1.l3.m5.1.1.1.3.cmml"><mi id="alg1.l3.m5.1.1.1.3.2" xref="alg1.l3.m5.1.1.1.3.2.cmml">o</mi><mtext id="alg1.l3.m5.1.1.1.3.3" xref="alg1.l3.m5.1.1.1.3.3a.cmml">desc</mtext></msub><mo id="alg1.l3.m5.1.1.1.2" xref="alg1.l3.m5.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l3.m5.1.1.1.1.1" xref="alg1.l3.m5.1.1.1.1.1.1.cmml"><mo id="alg1.l3.m5.1.1.1.1.1.2" stretchy="false" xref="alg1.l3.m5.1.1.1.1.1.1.cmml">(</mo><msub id="alg1.l3.m5.1.1.1.1.1.1" xref="alg1.l3.m5.1.1.1.1.1.1.cmml"><mi id="alg1.l3.m5.1.1.1.1.1.1.2" xref="alg1.l3.m5.1.1.1.1.1.1.2.cmml">c</mi><mi id="alg1.l3.m5.1.1.1.1.1.1.3" xref="alg1.l3.m5.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l3.m5.1.1.1.1.1.3" stretchy="false" xref="alg1.l3.m5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l3.m5.3.3.4" xref="alg1.l3.m5.3.3.4.cmml">=</mo><mrow id="alg1.l3.m5.3.3.3" xref="alg1.l3.m5.3.3.3.cmml"><msub id="alg1.l3.m5.3.3.3.4" xref="alg1.l3.m5.3.3.3.4.cmml"><mi id="alg1.l3.m5.3.3.3.4.2" xref="alg1.l3.m5.3.3.3.4.2.cmml">f</mi><mtext id="alg1.l3.m5.3.3.3.4.3" xref="alg1.l3.m5.3.3.3.4.3a.cmml">VLM</mtext></msub><mo id="alg1.l3.m5.3.3.3.3" xref="alg1.l3.m5.3.3.3.3.cmml">⁢</mo><mrow id="alg1.l3.m5.3.3.3.2.2" xref="alg1.l3.m5.3.3.3.2.3.cmml"><mo id="alg1.l3.m5.3.3.3.2.2.3" stretchy="false" xref="alg1.l3.m5.3.3.3.2.3.cmml">(</mo><mrow id="alg1.l3.m5.2.2.2.1.1.1" xref="alg1.l3.m5.2.2.2.1.1.1.cmml"><msub id="alg1.l3.m5.2.2.2.1.1.1.3" xref="alg1.l3.m5.2.2.2.1.1.1.3.cmml"><mi id="alg1.l3.m5.2.2.2.1.1.1.3.2" xref="alg1.l3.m5.2.2.2.1.1.1.3.2.cmml">p</mi><mtext id="alg1.l3.m5.2.2.2.1.1.1.3.3" xref="alg1.l3.m5.2.2.2.1.1.1.3.3a.cmml">desc</mtext></msub><mo id="alg1.l3.m5.2.2.2.1.1.1.2" xref="alg1.l3.m5.2.2.2.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l3.m5.2.2.2.1.1.1.1.1" xref="alg1.l3.m5.2.2.2.1.1.1.1.1.1.cmml"><mo id="alg1.l3.m5.2.2.2.1.1.1.1.1.2" stretchy="false" xref="alg1.l3.m5.2.2.2.1.1.1.1.1.1.cmml">(</mo><msub id="alg1.l3.m5.2.2.2.1.1.1.1.1.1" xref="alg1.l3.m5.2.2.2.1.1.1.1.1.1.cmml"><mi id="alg1.l3.m5.2.2.2.1.1.1.1.1.1.2" xref="alg1.l3.m5.2.2.2.1.1.1.1.1.1.2.cmml">c</mi><mi id="alg1.l3.m5.2.2.2.1.1.1.1.1.1.3" xref="alg1.l3.m5.2.2.2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l3.m5.2.2.2.1.1.1.1.1.3" stretchy="false" xref="alg1.l3.m5.2.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l3.m5.3.3.3.2.2.4" xref="alg1.l3.m5.3.3.3.2.3.cmml">,</mo><mrow id="alg1.l3.m5.3.3.3.2.2.2" xref="alg1.l3.m5.3.3.3.2.2.2.cmml"><mi id="alg1.l3.m5.3.3.3.2.2.2.3" xref="alg1.l3.m5.3.3.3.2.2.2.3.cmml">I</mi><mo id="alg1.l3.m5.3.3.3.2.2.2.2" xref="alg1.l3.m5.3.3.3.2.2.2.2.cmml">⁢</mo><mrow id="alg1.l3.m5.3.3.3.2.2.2.1.1" xref="alg1.l3.m5.3.3.3.2.2.2.1.1.1.cmml"><mo id="alg1.l3.m5.3.3.3.2.2.2.1.1.2" stretchy="false" xref="alg1.l3.m5.3.3.3.2.2.2.1.1.1.cmml">(</mo><msub id="alg1.l3.m5.3.3.3.2.2.2.1.1.1" xref="alg1.l3.m5.3.3.3.2.2.2.1.1.1.cmml"><mi id="alg1.l3.m5.3.3.3.2.2.2.1.1.1.2" xref="alg1.l3.m5.3.3.3.2.2.2.1.1.1.2.cmml">b</mi><mi id="alg1.l3.m5.3.3.3.2.2.2.1.1.1.3" xref="alg1.l3.m5.3.3.3.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l3.m5.3.3.3.2.2.2.1.1.3" stretchy="false" xref="alg1.l3.m5.3.3.3.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l3.m5.3.3.3.2.2.5" stretchy="false" xref="alg1.l3.m5.3.3.3.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m5.3b"><apply id="alg1.l3.m5.3.3.cmml" xref="alg1.l3.m5.3.3"><eq id="alg1.l3.m5.3.3.4.cmml" xref="alg1.l3.m5.3.3.4"></eq><apply id="alg1.l3.m5.1.1.1.cmml" xref="alg1.l3.m5.1.1.1"><times id="alg1.l3.m5.1.1.1.2.cmml" xref="alg1.l3.m5.1.1.1.2"></times><apply id="alg1.l3.m5.1.1.1.3.cmml" xref="alg1.l3.m5.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l3.m5.1.1.1.3.1.cmml" xref="alg1.l3.m5.1.1.1.3">subscript</csymbol><ci id="alg1.l3.m5.1.1.1.3.2.cmml" xref="alg1.l3.m5.1.1.1.3.2">𝑜</ci><ci id="alg1.l3.m5.1.1.1.3.3a.cmml" xref="alg1.l3.m5.1.1.1.3.3"><mtext id="alg1.l3.m5.1.1.1.3.3.cmml" mathsize="70%" xref="alg1.l3.m5.1.1.1.3.3">desc</mtext></ci></apply><apply id="alg1.l3.m5.1.1.1.1.1.1.cmml" xref="alg1.l3.m5.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l3.m5.1.1.1.1.1.1.1.cmml" xref="alg1.l3.m5.1.1.1.1.1">subscript</csymbol><ci id="alg1.l3.m5.1.1.1.1.1.1.2.cmml" xref="alg1.l3.m5.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l3.m5.1.1.1.1.1.1.3.cmml" xref="alg1.l3.m5.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="alg1.l3.m5.3.3.3.cmml" xref="alg1.l3.m5.3.3.3"><times id="alg1.l3.m5.3.3.3.3.cmml" xref="alg1.l3.m5.3.3.3.3"></times><apply id="alg1.l3.m5.3.3.3.4.cmml" xref="alg1.l3.m5.3.3.3.4"><csymbol cd="ambiguous" id="alg1.l3.m5.3.3.3.4.1.cmml" xref="alg1.l3.m5.3.3.3.4">subscript</csymbol><ci id="alg1.l3.m5.3.3.3.4.2.cmml" xref="alg1.l3.m5.3.3.3.4.2">𝑓</ci><ci id="alg1.l3.m5.3.3.3.4.3a.cmml" xref="alg1.l3.m5.3.3.3.4.3"><mtext id="alg1.l3.m5.3.3.3.4.3.cmml" mathsize="70%" xref="alg1.l3.m5.3.3.3.4.3">VLM</mtext></ci></apply><interval closure="open" id="alg1.l3.m5.3.3.3.2.3.cmml" xref="alg1.l3.m5.3.3.3.2.2"><apply id="alg1.l3.m5.2.2.2.1.1.1.cmml" xref="alg1.l3.m5.2.2.2.1.1.1"><times id="alg1.l3.m5.2.2.2.1.1.1.2.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.2"></times><apply id="alg1.l3.m5.2.2.2.1.1.1.3.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l3.m5.2.2.2.1.1.1.3.1.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.3">subscript</csymbol><ci id="alg1.l3.m5.2.2.2.1.1.1.3.2.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.3.2">𝑝</ci><ci id="alg1.l3.m5.2.2.2.1.1.1.3.3a.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.3.3"><mtext id="alg1.l3.m5.2.2.2.1.1.1.3.3.cmml" mathsize="70%" xref="alg1.l3.m5.2.2.2.1.1.1.3.3">desc</mtext></ci></apply><apply id="alg1.l3.m5.2.2.2.1.1.1.1.1.1.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l3.m5.2.2.2.1.1.1.1.1.1.1.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="alg1.l3.m5.2.2.2.1.1.1.1.1.1.2.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l3.m5.2.2.2.1.1.1.1.1.1.3.cmml" xref="alg1.l3.m5.2.2.2.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="alg1.l3.m5.3.3.3.2.2.2.cmml" xref="alg1.l3.m5.3.3.3.2.2.2"><times id="alg1.l3.m5.3.3.3.2.2.2.2.cmml" xref="alg1.l3.m5.3.3.3.2.2.2.2"></times><ci id="alg1.l3.m5.3.3.3.2.2.2.3.cmml" xref="alg1.l3.m5.3.3.3.2.2.2.3">𝐼</ci><apply id="alg1.l3.m5.3.3.3.2.2.2.1.1.1.cmml" xref="alg1.l3.m5.3.3.3.2.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l3.m5.3.3.3.2.2.2.1.1.1.1.cmml" xref="alg1.l3.m5.3.3.3.2.2.2.1.1">subscript</csymbol><ci id="alg1.l3.m5.3.3.3.2.2.2.1.1.1.2.cmml" xref="alg1.l3.m5.3.3.3.2.2.2.1.1.1.2">𝑏</ci><ci id="alg1.l3.m5.3.3.3.2.2.2.1.1.1.3.cmml" xref="alg1.l3.m5.3.3.3.2.2.2.1.1.1.3">𝑖</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m5.3c">o_{\text{desc}}(c_{i})=f_{\text{VLM}}(p_{\text{desc}}(c_{i}),I(b_{i}))</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m5.3d">italic_o start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_p start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_I ( italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>  OCR information Extraction.  <math alttext="o_{\text{ocr}}(c_{i})=f_{\text{VLM}}(p_{\text{ocr}}(c_{i}),I(b_{i}))" class="ltx_Math" display="inline" id="alg1.l4.m1.3"><semantics id="alg1.l4.m1.3a"><mrow id="alg1.l4.m1.3.3" xref="alg1.l4.m1.3.3.cmml"><mrow id="alg1.l4.m1.1.1.1" xref="alg1.l4.m1.1.1.1.cmml"><msub id="alg1.l4.m1.1.1.1.3" xref="alg1.l4.m1.1.1.1.3.cmml"><mi id="alg1.l4.m1.1.1.1.3.2" xref="alg1.l4.m1.1.1.1.3.2.cmml">o</mi><mtext id="alg1.l4.m1.1.1.1.3.3" xref="alg1.l4.m1.1.1.1.3.3a.cmml">ocr</mtext></msub><mo id="alg1.l4.m1.1.1.1.2" xref="alg1.l4.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l4.m1.1.1.1.1.1" xref="alg1.l4.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l4.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l4.m1.1.1.1.1.1.1.cmml">(</mo><msub id="alg1.l4.m1.1.1.1.1.1.1" xref="alg1.l4.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l4.m1.1.1.1.1.1.1.2" xref="alg1.l4.m1.1.1.1.1.1.1.2.cmml">c</mi><mi id="alg1.l4.m1.1.1.1.1.1.1.3" xref="alg1.l4.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l4.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l4.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l4.m1.3.3.4" xref="alg1.l4.m1.3.3.4.cmml">=</mo><mrow id="alg1.l4.m1.3.3.3" xref="alg1.l4.m1.3.3.3.cmml"><msub id="alg1.l4.m1.3.3.3.4" xref="alg1.l4.m1.3.3.3.4.cmml"><mi id="alg1.l4.m1.3.3.3.4.2" xref="alg1.l4.m1.3.3.3.4.2.cmml">f</mi><mtext id="alg1.l4.m1.3.3.3.4.3" xref="alg1.l4.m1.3.3.3.4.3a.cmml">VLM</mtext></msub><mo id="alg1.l4.m1.3.3.3.3" xref="alg1.l4.m1.3.3.3.3.cmml">⁢</mo><mrow id="alg1.l4.m1.3.3.3.2.2" xref="alg1.l4.m1.3.3.3.2.3.cmml"><mo id="alg1.l4.m1.3.3.3.2.2.3" stretchy="false" xref="alg1.l4.m1.3.3.3.2.3.cmml">(</mo><mrow id="alg1.l4.m1.2.2.2.1.1.1" xref="alg1.l4.m1.2.2.2.1.1.1.cmml"><msub id="alg1.l4.m1.2.2.2.1.1.1.3" xref="alg1.l4.m1.2.2.2.1.1.1.3.cmml"><mi id="alg1.l4.m1.2.2.2.1.1.1.3.2" xref="alg1.l4.m1.2.2.2.1.1.1.3.2.cmml">p</mi><mtext id="alg1.l4.m1.2.2.2.1.1.1.3.3" xref="alg1.l4.m1.2.2.2.1.1.1.3.3a.cmml">ocr</mtext></msub><mo id="alg1.l4.m1.2.2.2.1.1.1.2" xref="alg1.l4.m1.2.2.2.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l4.m1.2.2.2.1.1.1.1.1" xref="alg1.l4.m1.2.2.2.1.1.1.1.1.1.cmml"><mo id="alg1.l4.m1.2.2.2.1.1.1.1.1.2" stretchy="false" xref="alg1.l4.m1.2.2.2.1.1.1.1.1.1.cmml">(</mo><msub id="alg1.l4.m1.2.2.2.1.1.1.1.1.1" xref="alg1.l4.m1.2.2.2.1.1.1.1.1.1.cmml"><mi id="alg1.l4.m1.2.2.2.1.1.1.1.1.1.2" xref="alg1.l4.m1.2.2.2.1.1.1.1.1.1.2.cmml">c</mi><mi id="alg1.l4.m1.2.2.2.1.1.1.1.1.1.3" xref="alg1.l4.m1.2.2.2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l4.m1.2.2.2.1.1.1.1.1.3" stretchy="false" xref="alg1.l4.m1.2.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l4.m1.3.3.3.2.2.4" xref="alg1.l4.m1.3.3.3.2.3.cmml">,</mo><mrow id="alg1.l4.m1.3.3.3.2.2.2" xref="alg1.l4.m1.3.3.3.2.2.2.cmml"><mi id="alg1.l4.m1.3.3.3.2.2.2.3" xref="alg1.l4.m1.3.3.3.2.2.2.3.cmml">I</mi><mo id="alg1.l4.m1.3.3.3.2.2.2.2" xref="alg1.l4.m1.3.3.3.2.2.2.2.cmml">⁢</mo><mrow id="alg1.l4.m1.3.3.3.2.2.2.1.1" xref="alg1.l4.m1.3.3.3.2.2.2.1.1.1.cmml"><mo id="alg1.l4.m1.3.3.3.2.2.2.1.1.2" stretchy="false" xref="alg1.l4.m1.3.3.3.2.2.2.1.1.1.cmml">(</mo><msub id="alg1.l4.m1.3.3.3.2.2.2.1.1.1" xref="alg1.l4.m1.3.3.3.2.2.2.1.1.1.cmml"><mi id="alg1.l4.m1.3.3.3.2.2.2.1.1.1.2" xref="alg1.l4.m1.3.3.3.2.2.2.1.1.1.2.cmml">b</mi><mi id="alg1.l4.m1.3.3.3.2.2.2.1.1.1.3" xref="alg1.l4.m1.3.3.3.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l4.m1.3.3.3.2.2.2.1.1.3" stretchy="false" xref="alg1.l4.m1.3.3.3.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l4.m1.3.3.3.2.2.5" stretchy="false" xref="alg1.l4.m1.3.3.3.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.3b"><apply id="alg1.l4.m1.3.3.cmml" xref="alg1.l4.m1.3.3"><eq id="alg1.l4.m1.3.3.4.cmml" xref="alg1.l4.m1.3.3.4"></eq><apply id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1"><times id="alg1.l4.m1.1.1.1.2.cmml" xref="alg1.l4.m1.1.1.1.2"></times><apply id="alg1.l4.m1.1.1.1.3.cmml" xref="alg1.l4.m1.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l4.m1.1.1.1.3.1.cmml" xref="alg1.l4.m1.1.1.1.3">subscript</csymbol><ci id="alg1.l4.m1.1.1.1.3.2.cmml" xref="alg1.l4.m1.1.1.1.3.2">𝑜</ci><ci id="alg1.l4.m1.1.1.1.3.3a.cmml" xref="alg1.l4.m1.1.1.1.3.3"><mtext id="alg1.l4.m1.1.1.1.3.3.cmml" mathsize="70%" xref="alg1.l4.m1.1.1.1.3.3">ocr</mtext></ci></apply><apply id="alg1.l4.m1.1.1.1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l4.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1.1.1">subscript</csymbol><ci id="alg1.l4.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l4.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l4.m1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="alg1.l4.m1.3.3.3.cmml" xref="alg1.l4.m1.3.3.3"><times id="alg1.l4.m1.3.3.3.3.cmml" xref="alg1.l4.m1.3.3.3.3"></times><apply id="alg1.l4.m1.3.3.3.4.cmml" xref="alg1.l4.m1.3.3.3.4"><csymbol cd="ambiguous" id="alg1.l4.m1.3.3.3.4.1.cmml" xref="alg1.l4.m1.3.3.3.4">subscript</csymbol><ci id="alg1.l4.m1.3.3.3.4.2.cmml" xref="alg1.l4.m1.3.3.3.4.2">𝑓</ci><ci id="alg1.l4.m1.3.3.3.4.3a.cmml" xref="alg1.l4.m1.3.3.3.4.3"><mtext id="alg1.l4.m1.3.3.3.4.3.cmml" mathsize="70%" xref="alg1.l4.m1.3.3.3.4.3">VLM</mtext></ci></apply><interval closure="open" id="alg1.l4.m1.3.3.3.2.3.cmml" xref="alg1.l4.m1.3.3.3.2.2"><apply id="alg1.l4.m1.2.2.2.1.1.1.cmml" xref="alg1.l4.m1.2.2.2.1.1.1"><times id="alg1.l4.m1.2.2.2.1.1.1.2.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.2"></times><apply id="alg1.l4.m1.2.2.2.1.1.1.3.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l4.m1.2.2.2.1.1.1.3.1.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.3">subscript</csymbol><ci id="alg1.l4.m1.2.2.2.1.1.1.3.2.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.3.2">𝑝</ci><ci id="alg1.l4.m1.2.2.2.1.1.1.3.3a.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.3.3"><mtext id="alg1.l4.m1.2.2.2.1.1.1.3.3.cmml" mathsize="70%" xref="alg1.l4.m1.2.2.2.1.1.1.3.3">ocr</mtext></ci></apply><apply id="alg1.l4.m1.2.2.2.1.1.1.1.1.1.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l4.m1.2.2.2.1.1.1.1.1.1.1.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="alg1.l4.m1.2.2.2.1.1.1.1.1.1.2.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.1.1.1.2">𝑐</ci><ci id="alg1.l4.m1.2.2.2.1.1.1.1.1.1.3.cmml" xref="alg1.l4.m1.2.2.2.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="alg1.l4.m1.3.3.3.2.2.2.cmml" xref="alg1.l4.m1.3.3.3.2.2.2"><times id="alg1.l4.m1.3.3.3.2.2.2.2.cmml" xref="alg1.l4.m1.3.3.3.2.2.2.2"></times><ci id="alg1.l4.m1.3.3.3.2.2.2.3.cmml" xref="alg1.l4.m1.3.3.3.2.2.2.3">𝐼</ci><apply id="alg1.l4.m1.3.3.3.2.2.2.1.1.1.cmml" xref="alg1.l4.m1.3.3.3.2.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l4.m1.3.3.3.2.2.2.1.1.1.1.cmml" xref="alg1.l4.m1.3.3.3.2.2.2.1.1">subscript</csymbol><ci id="alg1.l4.m1.3.3.3.2.2.2.1.1.1.2.cmml" xref="alg1.l4.m1.3.3.3.2.2.2.1.1.1.2">𝑏</ci><ci id="alg1.l4.m1.3.3.3.2.2.2.1.1.1.3.cmml" xref="alg1.l4.m1.3.3.3.2.2.2.1.1.1.3">𝑖</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.3c">o_{\text{ocr}}(c_{i})=f_{\text{VLM}}(p_{\text{ocr}}(c_{i}),I(b_{i}))</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.3d">italic_o start_POSTSUBSCRIPT ocr end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_p start_POSTSUBSCRIPT ocr end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_I ( italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>  Grouping Concepts and Boxes in <math alttext="\mathbf{C}" class="ltx_Math" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><mi id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml">𝐂</mi><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><ci id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1">𝐂</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">\mathbf{C}</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">bold_C</annotation></semantics></math> and <math alttext="\mathbf{B}" class="ltx_Math" display="inline" id="alg1.l5.m2.1"><semantics id="alg1.l5.m2.1a"><mi id="alg1.l5.m2.1.1" xref="alg1.l5.m2.1.1.cmml">𝐁</mi><annotation-xml encoding="MathML-Content" id="alg1.l5.m2.1b"><ci id="alg1.l5.m2.1.1.cmml" xref="alg1.l5.m2.1.1">𝐁</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m2.1c">\mathbf{B}</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m2.1d">bold_B</annotation></semantics></math>.  <math alttext="\tilde{c}_{i}\in\tilde{\mathbf{C}}" class="ltx_Math" display="inline" id="alg1.l5.m3.1"><semantics id="alg1.l5.m3.1a"><mrow id="alg1.l5.m3.1.1" xref="alg1.l5.m3.1.1.cmml"><msub id="alg1.l5.m3.1.1.2" xref="alg1.l5.m3.1.1.2.cmml"><mover accent="true" id="alg1.l5.m3.1.1.2.2" xref="alg1.l5.m3.1.1.2.2.cmml"><mi id="alg1.l5.m3.1.1.2.2.2" xref="alg1.l5.m3.1.1.2.2.2.cmml">c</mi><mo id="alg1.l5.m3.1.1.2.2.1" xref="alg1.l5.m3.1.1.2.2.1.cmml">~</mo></mover><mi id="alg1.l5.m3.1.1.2.3" xref="alg1.l5.m3.1.1.2.3.cmml">i</mi></msub><mo id="alg1.l5.m3.1.1.1" xref="alg1.l5.m3.1.1.1.cmml">∈</mo><mover accent="true" id="alg1.l5.m3.1.1.3" xref="alg1.l5.m3.1.1.3.cmml"><mi id="alg1.l5.m3.1.1.3.2" xref="alg1.l5.m3.1.1.3.2.cmml">𝐂</mi><mo id="alg1.l5.m3.1.1.3.1" xref="alg1.l5.m3.1.1.3.1.cmml">~</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m3.1b"><apply id="alg1.l5.m3.1.1.cmml" xref="alg1.l5.m3.1.1"><in id="alg1.l5.m3.1.1.1.cmml" xref="alg1.l5.m3.1.1.1"></in><apply id="alg1.l5.m3.1.1.2.cmml" xref="alg1.l5.m3.1.1.2"><csymbol cd="ambiguous" id="alg1.l5.m3.1.1.2.1.cmml" xref="alg1.l5.m3.1.1.2">subscript</csymbol><apply id="alg1.l5.m3.1.1.2.2.cmml" xref="alg1.l5.m3.1.1.2.2"><ci id="alg1.l5.m3.1.1.2.2.1.cmml" xref="alg1.l5.m3.1.1.2.2.1">~</ci><ci id="alg1.l5.m3.1.1.2.2.2.cmml" xref="alg1.l5.m3.1.1.2.2.2">𝑐</ci></apply><ci id="alg1.l5.m3.1.1.2.3.cmml" xref="alg1.l5.m3.1.1.2.3">𝑖</ci></apply><apply id="alg1.l5.m3.1.1.3.cmml" xref="alg1.l5.m3.1.1.3"><ci id="alg1.l5.m3.1.1.3.1.cmml" xref="alg1.l5.m3.1.1.3.1">~</ci><ci id="alg1.l5.m3.1.1.3.2.cmml" xref="alg1.l5.m3.1.1.3.2">𝐂</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m3.1c">\tilde{c}_{i}\in\tilde{\mathbf{C}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m3.1d">over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ over~ start_ARG bold_C end_ARG</annotation></semantics></math>, <math alttext="\tilde{b}_{i}\in\tilde{\mathbf{B}}" class="ltx_Math" display="inline" id="alg1.l5.m4.1"><semantics id="alg1.l5.m4.1a"><mrow id="alg1.l5.m4.1.1" xref="alg1.l5.m4.1.1.cmml"><msub id="alg1.l5.m4.1.1.2" xref="alg1.l5.m4.1.1.2.cmml"><mover accent="true" id="alg1.l5.m4.1.1.2.2" xref="alg1.l5.m4.1.1.2.2.cmml"><mi id="alg1.l5.m4.1.1.2.2.2" xref="alg1.l5.m4.1.1.2.2.2.cmml">b</mi><mo id="alg1.l5.m4.1.1.2.2.1" xref="alg1.l5.m4.1.1.2.2.1.cmml">~</mo></mover><mi id="alg1.l5.m4.1.1.2.3" xref="alg1.l5.m4.1.1.2.3.cmml">i</mi></msub><mo id="alg1.l5.m4.1.1.1" xref="alg1.l5.m4.1.1.1.cmml">∈</mo><mover accent="true" id="alg1.l5.m4.1.1.3" xref="alg1.l5.m4.1.1.3.cmml"><mi id="alg1.l5.m4.1.1.3.2" xref="alg1.l5.m4.1.1.3.2.cmml">𝐁</mi><mo id="alg1.l5.m4.1.1.3.1" xref="alg1.l5.m4.1.1.3.1.cmml">~</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m4.1b"><apply id="alg1.l5.m4.1.1.cmml" xref="alg1.l5.m4.1.1"><in id="alg1.l5.m4.1.1.1.cmml" xref="alg1.l5.m4.1.1.1"></in><apply id="alg1.l5.m4.1.1.2.cmml" xref="alg1.l5.m4.1.1.2"><csymbol cd="ambiguous" id="alg1.l5.m4.1.1.2.1.cmml" xref="alg1.l5.m4.1.1.2">subscript</csymbol><apply id="alg1.l5.m4.1.1.2.2.cmml" xref="alg1.l5.m4.1.1.2.2"><ci id="alg1.l5.m4.1.1.2.2.1.cmml" xref="alg1.l5.m4.1.1.2.2.1">~</ci><ci id="alg1.l5.m4.1.1.2.2.2.cmml" xref="alg1.l5.m4.1.1.2.2.2">𝑏</ci></apply><ci id="alg1.l5.m4.1.1.2.3.cmml" xref="alg1.l5.m4.1.1.2.3">𝑖</ci></apply><apply id="alg1.l5.m4.1.1.3.cmml" xref="alg1.l5.m4.1.1.3"><ci id="alg1.l5.m4.1.1.3.1.cmml" xref="alg1.l5.m4.1.1.3.1">~</ci><ci id="alg1.l5.m4.1.1.3.2.cmml" xref="alg1.l5.m4.1.1.3.2">𝐁</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m4.1c">\tilde{b}_{i}\in\tilde{\mathbf{B}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m4.1d">over~ start_ARG italic_b end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ over~ start_ARG bold_B end_ARG</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>  Counting Filtering via Consistency. (<math alttext="c^{k}_{i}\in\textbf{C}_{\text{rank}}" class="ltx_Math" display="inline" id="alg1.l6.m1.1"><semantics id="alg1.l6.m1.1a"><mrow id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml"><msubsup id="alg1.l6.m1.1.1.2" xref="alg1.l6.m1.1.1.2.cmml"><mi id="alg1.l6.m1.1.1.2.2.2" xref="alg1.l6.m1.1.1.2.2.2.cmml">c</mi><mi id="alg1.l6.m1.1.1.2.3" xref="alg1.l6.m1.1.1.2.3.cmml">i</mi><mi id="alg1.l6.m1.1.1.2.2.3" xref="alg1.l6.m1.1.1.2.2.3.cmml">k</mi></msubsup><mo id="alg1.l6.m1.1.1.1" xref="alg1.l6.m1.1.1.1.cmml">∈</mo><msub id="alg1.l6.m1.1.1.3" xref="alg1.l6.m1.1.1.3.cmml"><mtext class="ltx_mathvariant_bold" id="alg1.l6.m1.1.1.3.2" xref="alg1.l6.m1.1.1.3.2a.cmml">C</mtext><mtext id="alg1.l6.m1.1.1.3.3" xref="alg1.l6.m1.1.1.3.3a.cmml">rank</mtext></msub></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.1b"><apply id="alg1.l6.m1.1.1.cmml" xref="alg1.l6.m1.1.1"><in id="alg1.l6.m1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1"></in><apply id="alg1.l6.m1.1.1.2.cmml" xref="alg1.l6.m1.1.1.2"><csymbol cd="ambiguous" id="alg1.l6.m1.1.1.2.1.cmml" xref="alg1.l6.m1.1.1.2">subscript</csymbol><apply id="alg1.l6.m1.1.1.2.2.cmml" xref="alg1.l6.m1.1.1.2"><csymbol cd="ambiguous" id="alg1.l6.m1.1.1.2.2.1.cmml" xref="alg1.l6.m1.1.1.2">superscript</csymbol><ci id="alg1.l6.m1.1.1.2.2.2.cmml" xref="alg1.l6.m1.1.1.2.2.2">𝑐</ci><ci id="alg1.l6.m1.1.1.2.2.3.cmml" xref="alg1.l6.m1.1.1.2.2.3">𝑘</ci></apply><ci id="alg1.l6.m1.1.1.2.3.cmml" xref="alg1.l6.m1.1.1.2.3">𝑖</ci></apply><apply id="alg1.l6.m1.1.1.3.cmml" xref="alg1.l6.m1.1.1.3"><csymbol cd="ambiguous" id="alg1.l6.m1.1.1.3.1.cmml" xref="alg1.l6.m1.1.1.3">subscript</csymbol><ci id="alg1.l6.m1.1.1.3.2a.cmml" xref="alg1.l6.m1.1.1.3.2"><mtext class="ltx_mathvariant_bold" id="alg1.l6.m1.1.1.3.2.cmml" xref="alg1.l6.m1.1.1.3.2">C</mtext></ci><ci id="alg1.l6.m1.1.1.3.3a.cmml" xref="alg1.l6.m1.1.1.3.3"><mtext id="alg1.l6.m1.1.1.3.3.cmml" mathsize="70%" xref="alg1.l6.m1.1.1.3.3">rank</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.1c">c^{k}_{i}\in\textbf{C}_{\text{rank}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.1d">italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ C start_POSTSUBSCRIPT rank end_POSTSUBSCRIPT</annotation></semantics></math>)  <math alttext="o_{\text{valid-g}}(\tilde{c}_{i})=f_{\text{VLM}}(p_{\text{valid-g}}(\tilde{c}_%
{i},n_{i}),I(\tilde{b}_{i}))" class="ltx_Math" display="inline" id="alg1.l6.m2.3"><semantics id="alg1.l6.m2.3a"><mrow id="alg1.l6.m2.3.3" xref="alg1.l6.m2.3.3.cmml"><mrow id="alg1.l6.m2.1.1.1" xref="alg1.l6.m2.1.1.1.cmml"><msub id="alg1.l6.m2.1.1.1.3" xref="alg1.l6.m2.1.1.1.3.cmml"><mi id="alg1.l6.m2.1.1.1.3.2" xref="alg1.l6.m2.1.1.1.3.2.cmml">o</mi><mtext id="alg1.l6.m2.1.1.1.3.3" xref="alg1.l6.m2.1.1.1.3.3a.cmml">valid-g</mtext></msub><mo id="alg1.l6.m2.1.1.1.2" xref="alg1.l6.m2.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l6.m2.1.1.1.1.1" xref="alg1.l6.m2.1.1.1.1.1.1.cmml"><mo id="alg1.l6.m2.1.1.1.1.1.2" stretchy="false" xref="alg1.l6.m2.1.1.1.1.1.1.cmml">(</mo><msub id="alg1.l6.m2.1.1.1.1.1.1" xref="alg1.l6.m2.1.1.1.1.1.1.cmml"><mover accent="true" id="alg1.l6.m2.1.1.1.1.1.1.2" xref="alg1.l6.m2.1.1.1.1.1.1.2.cmml"><mi id="alg1.l6.m2.1.1.1.1.1.1.2.2" xref="alg1.l6.m2.1.1.1.1.1.1.2.2.cmml">c</mi><mo id="alg1.l6.m2.1.1.1.1.1.1.2.1" xref="alg1.l6.m2.1.1.1.1.1.1.2.1.cmml">~</mo></mover><mi id="alg1.l6.m2.1.1.1.1.1.1.3" xref="alg1.l6.m2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l6.m2.1.1.1.1.1.3" stretchy="false" xref="alg1.l6.m2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l6.m2.3.3.4" xref="alg1.l6.m2.3.3.4.cmml">=</mo><mrow id="alg1.l6.m2.3.3.3" xref="alg1.l6.m2.3.3.3.cmml"><msub id="alg1.l6.m2.3.3.3.4" xref="alg1.l6.m2.3.3.3.4.cmml"><mi id="alg1.l6.m2.3.3.3.4.2" xref="alg1.l6.m2.3.3.3.4.2.cmml">f</mi><mtext id="alg1.l6.m2.3.3.3.4.3" xref="alg1.l6.m2.3.3.3.4.3a.cmml">VLM</mtext></msub><mo id="alg1.l6.m2.3.3.3.3" xref="alg1.l6.m2.3.3.3.3.cmml">⁢</mo><mrow id="alg1.l6.m2.3.3.3.2.2" xref="alg1.l6.m2.3.3.3.2.3.cmml"><mo id="alg1.l6.m2.3.3.3.2.2.3" stretchy="false" xref="alg1.l6.m2.3.3.3.2.3.cmml">(</mo><mrow id="alg1.l6.m2.2.2.2.1.1.1" xref="alg1.l6.m2.2.2.2.1.1.1.cmml"><msub id="alg1.l6.m2.2.2.2.1.1.1.4" xref="alg1.l6.m2.2.2.2.1.1.1.4.cmml"><mi id="alg1.l6.m2.2.2.2.1.1.1.4.2" xref="alg1.l6.m2.2.2.2.1.1.1.4.2.cmml">p</mi><mtext id="alg1.l6.m2.2.2.2.1.1.1.4.3" xref="alg1.l6.m2.2.2.2.1.1.1.4.3a.cmml">valid-g</mtext></msub><mo id="alg1.l6.m2.2.2.2.1.1.1.3" xref="alg1.l6.m2.2.2.2.1.1.1.3.cmml">⁢</mo><mrow id="alg1.l6.m2.2.2.2.1.1.1.2.2" xref="alg1.l6.m2.2.2.2.1.1.1.2.3.cmml"><mo id="alg1.l6.m2.2.2.2.1.1.1.2.2.3" stretchy="false" xref="alg1.l6.m2.2.2.2.1.1.1.2.3.cmml">(</mo><msub id="alg1.l6.m2.2.2.2.1.1.1.1.1.1" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.cmml"><mover accent="true" id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.cmml"><mi id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.2" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.2.cmml">c</mi><mo id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.1" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.1.cmml">~</mo></mover><mi id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.3" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l6.m2.2.2.2.1.1.1.2.2.4" xref="alg1.l6.m2.2.2.2.1.1.1.2.3.cmml">,</mo><msub id="alg1.l6.m2.2.2.2.1.1.1.2.2.2" xref="alg1.l6.m2.2.2.2.1.1.1.2.2.2.cmml"><mi id="alg1.l6.m2.2.2.2.1.1.1.2.2.2.2" xref="alg1.l6.m2.2.2.2.1.1.1.2.2.2.2.cmml">n</mi><mi id="alg1.l6.m2.2.2.2.1.1.1.2.2.2.3" xref="alg1.l6.m2.2.2.2.1.1.1.2.2.2.3.cmml">i</mi></msub><mo id="alg1.l6.m2.2.2.2.1.1.1.2.2.5" stretchy="false" xref="alg1.l6.m2.2.2.2.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="alg1.l6.m2.3.3.3.2.2.4" xref="alg1.l6.m2.3.3.3.2.3.cmml">,</mo><mrow id="alg1.l6.m2.3.3.3.2.2.2" xref="alg1.l6.m2.3.3.3.2.2.2.cmml"><mi id="alg1.l6.m2.3.3.3.2.2.2.3" xref="alg1.l6.m2.3.3.3.2.2.2.3.cmml">I</mi><mo id="alg1.l6.m2.3.3.3.2.2.2.2" xref="alg1.l6.m2.3.3.3.2.2.2.2.cmml">⁢</mo><mrow id="alg1.l6.m2.3.3.3.2.2.2.1.1" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.cmml"><mo id="alg1.l6.m2.3.3.3.2.2.2.1.1.2" stretchy="false" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.cmml">(</mo><msub id="alg1.l6.m2.3.3.3.2.2.2.1.1.1" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.cmml"><mover accent="true" id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.cmml"><mi id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.2" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.2.cmml">b</mi><mo id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.1" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.1.cmml">~</mo></mover><mi id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.3" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l6.m2.3.3.3.2.2.2.1.1.3" stretchy="false" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l6.m2.3.3.3.2.2.5" stretchy="false" xref="alg1.l6.m2.3.3.3.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m2.3b"><apply id="alg1.l6.m2.3.3.cmml" xref="alg1.l6.m2.3.3"><eq id="alg1.l6.m2.3.3.4.cmml" xref="alg1.l6.m2.3.3.4"></eq><apply id="alg1.l6.m2.1.1.1.cmml" xref="alg1.l6.m2.1.1.1"><times id="alg1.l6.m2.1.1.1.2.cmml" xref="alg1.l6.m2.1.1.1.2"></times><apply id="alg1.l6.m2.1.1.1.3.cmml" xref="alg1.l6.m2.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l6.m2.1.1.1.3.1.cmml" xref="alg1.l6.m2.1.1.1.3">subscript</csymbol><ci id="alg1.l6.m2.1.1.1.3.2.cmml" xref="alg1.l6.m2.1.1.1.3.2">𝑜</ci><ci id="alg1.l6.m2.1.1.1.3.3a.cmml" xref="alg1.l6.m2.1.1.1.3.3"><mtext id="alg1.l6.m2.1.1.1.3.3.cmml" mathsize="70%" xref="alg1.l6.m2.1.1.1.3.3">valid-g</mtext></ci></apply><apply id="alg1.l6.m2.1.1.1.1.1.1.cmml" xref="alg1.l6.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l6.m2.1.1.1.1.1.1.1.cmml" xref="alg1.l6.m2.1.1.1.1.1">subscript</csymbol><apply id="alg1.l6.m2.1.1.1.1.1.1.2.cmml" xref="alg1.l6.m2.1.1.1.1.1.1.2"><ci id="alg1.l6.m2.1.1.1.1.1.1.2.1.cmml" xref="alg1.l6.m2.1.1.1.1.1.1.2.1">~</ci><ci id="alg1.l6.m2.1.1.1.1.1.1.2.2.cmml" xref="alg1.l6.m2.1.1.1.1.1.1.2.2">𝑐</ci></apply><ci id="alg1.l6.m2.1.1.1.1.1.1.3.cmml" xref="alg1.l6.m2.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="alg1.l6.m2.3.3.3.cmml" xref="alg1.l6.m2.3.3.3"><times id="alg1.l6.m2.3.3.3.3.cmml" xref="alg1.l6.m2.3.3.3.3"></times><apply id="alg1.l6.m2.3.3.3.4.cmml" xref="alg1.l6.m2.3.3.3.4"><csymbol cd="ambiguous" id="alg1.l6.m2.3.3.3.4.1.cmml" xref="alg1.l6.m2.3.3.3.4">subscript</csymbol><ci id="alg1.l6.m2.3.3.3.4.2.cmml" xref="alg1.l6.m2.3.3.3.4.2">𝑓</ci><ci id="alg1.l6.m2.3.3.3.4.3a.cmml" xref="alg1.l6.m2.3.3.3.4.3"><mtext id="alg1.l6.m2.3.3.3.4.3.cmml" mathsize="70%" xref="alg1.l6.m2.3.3.3.4.3">VLM</mtext></ci></apply><interval closure="open" id="alg1.l6.m2.3.3.3.2.3.cmml" xref="alg1.l6.m2.3.3.3.2.2"><apply id="alg1.l6.m2.2.2.2.1.1.1.cmml" xref="alg1.l6.m2.2.2.2.1.1.1"><times id="alg1.l6.m2.2.2.2.1.1.1.3.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.3"></times><apply id="alg1.l6.m2.2.2.2.1.1.1.4.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.4"><csymbol cd="ambiguous" id="alg1.l6.m2.2.2.2.1.1.1.4.1.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.4">subscript</csymbol><ci id="alg1.l6.m2.2.2.2.1.1.1.4.2.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.4.2">𝑝</ci><ci id="alg1.l6.m2.2.2.2.1.1.1.4.3a.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.4.3"><mtext id="alg1.l6.m2.2.2.2.1.1.1.4.3.cmml" mathsize="70%" xref="alg1.l6.m2.2.2.2.1.1.1.4.3">valid-g</mtext></ci></apply><interval closure="open" id="alg1.l6.m2.2.2.2.1.1.1.2.3.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.2.2"><apply id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.1.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1">subscript</csymbol><apply id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2"><ci id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.1.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.1">~</ci><ci id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.2.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.2.2">𝑐</ci></apply><ci id="alg1.l6.m2.2.2.2.1.1.1.1.1.1.3.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="alg1.l6.m2.2.2.2.1.1.1.2.2.2.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.2.2.2"><csymbol cd="ambiguous" id="alg1.l6.m2.2.2.2.1.1.1.2.2.2.1.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.2.2.2">subscript</csymbol><ci id="alg1.l6.m2.2.2.2.1.1.1.2.2.2.2.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.2.2.2.2">𝑛</ci><ci id="alg1.l6.m2.2.2.2.1.1.1.2.2.2.3.cmml" xref="alg1.l6.m2.2.2.2.1.1.1.2.2.2.3">𝑖</ci></apply></interval></apply><apply id="alg1.l6.m2.3.3.3.2.2.2.cmml" xref="alg1.l6.m2.3.3.3.2.2.2"><times id="alg1.l6.m2.3.3.3.2.2.2.2.cmml" xref="alg1.l6.m2.3.3.3.2.2.2.2"></times><ci id="alg1.l6.m2.3.3.3.2.2.2.3.cmml" xref="alg1.l6.m2.3.3.3.2.2.2.3">𝐼</ci><apply id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.cmml" xref="alg1.l6.m2.3.3.3.2.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.1.cmml" xref="alg1.l6.m2.3.3.3.2.2.2.1.1">subscript</csymbol><apply id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.cmml" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2"><ci id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.1.cmml" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.1">~</ci><ci id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.2.cmml" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.2.2">𝑏</ci></apply><ci id="alg1.l6.m2.3.3.3.2.2.2.1.1.1.3.cmml" xref="alg1.l6.m2.3.3.3.2.2.2.1.1.1.3">𝑖</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m2.3c">o_{\text{valid-g}}(\tilde{c}_{i})=f_{\text{VLM}}(p_{\text{valid-g}}(\tilde{c}_%
{i},n_{i}),I(\tilde{b}_{i}))</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m2.3d">italic_o start_POSTSUBSCRIPT valid-g end_POSTSUBSCRIPT ( over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_p start_POSTSUBSCRIPT valid-g end_POSTSUBSCRIPT ( over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_n start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_I ( over~ start_ARG italic_b end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>  Caption Re-ranking via Consistency.  <math alttext="o_{\text{valid-c}}(c^{k}_{i})=f_{\text{VLM}}(p_{\text{valid-c}}(c^{k}_{i}),I(%
\tilde{b}_{i}))" class="ltx_Math" display="inline" id="alg1.l7.m1.3"><semantics id="alg1.l7.m1.3a"><mrow id="alg1.l7.m1.3.3" xref="alg1.l7.m1.3.3.cmml"><mrow id="alg1.l7.m1.1.1.1" xref="alg1.l7.m1.1.1.1.cmml"><msub id="alg1.l7.m1.1.1.1.3" xref="alg1.l7.m1.1.1.1.3.cmml"><mi id="alg1.l7.m1.1.1.1.3.2" xref="alg1.l7.m1.1.1.1.3.2.cmml">o</mi><mtext id="alg1.l7.m1.1.1.1.3.3" xref="alg1.l7.m1.1.1.1.3.3a.cmml">valid-c</mtext></msub><mo id="alg1.l7.m1.1.1.1.2" xref="alg1.l7.m1.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l7.m1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l7.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l7.m1.1.1.1.1.1.1.cmml">(</mo><msubsup id="alg1.l7.m1.1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l7.m1.1.1.1.1.1.1.2.2" xref="alg1.l7.m1.1.1.1.1.1.1.2.2.cmml">c</mi><mi id="alg1.l7.m1.1.1.1.1.1.1.3" xref="alg1.l7.m1.1.1.1.1.1.1.3.cmml">i</mi><mi id="alg1.l7.m1.1.1.1.1.1.1.2.3" xref="alg1.l7.m1.1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="alg1.l7.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l7.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l7.m1.3.3.4" xref="alg1.l7.m1.3.3.4.cmml">=</mo><mrow id="alg1.l7.m1.3.3.3" xref="alg1.l7.m1.3.3.3.cmml"><msub id="alg1.l7.m1.3.3.3.4" xref="alg1.l7.m1.3.3.3.4.cmml"><mi id="alg1.l7.m1.3.3.3.4.2" xref="alg1.l7.m1.3.3.3.4.2.cmml">f</mi><mtext id="alg1.l7.m1.3.3.3.4.3" xref="alg1.l7.m1.3.3.3.4.3a.cmml">VLM</mtext></msub><mo id="alg1.l7.m1.3.3.3.3" xref="alg1.l7.m1.3.3.3.3.cmml">⁢</mo><mrow id="alg1.l7.m1.3.3.3.2.2" xref="alg1.l7.m1.3.3.3.2.3.cmml"><mo id="alg1.l7.m1.3.3.3.2.2.3" stretchy="false" xref="alg1.l7.m1.3.3.3.2.3.cmml">(</mo><mrow id="alg1.l7.m1.2.2.2.1.1.1" xref="alg1.l7.m1.2.2.2.1.1.1.cmml"><msub id="alg1.l7.m1.2.2.2.1.1.1.3" xref="alg1.l7.m1.2.2.2.1.1.1.3.cmml"><mi id="alg1.l7.m1.2.2.2.1.1.1.3.2" xref="alg1.l7.m1.2.2.2.1.1.1.3.2.cmml">p</mi><mtext id="alg1.l7.m1.2.2.2.1.1.1.3.3" xref="alg1.l7.m1.2.2.2.1.1.1.3.3a.cmml">valid-c</mtext></msub><mo id="alg1.l7.m1.2.2.2.1.1.1.2" xref="alg1.l7.m1.2.2.2.1.1.1.2.cmml">⁢</mo><mrow id="alg1.l7.m1.2.2.2.1.1.1.1.1" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.cmml"><mo id="alg1.l7.m1.2.2.2.1.1.1.1.1.2" stretchy="false" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.cmml">(</mo><msubsup id="alg1.l7.m1.2.2.2.1.1.1.1.1.1" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.cmml"><mi id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.2" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.2.cmml">c</mi><mi id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.3" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.3.cmml">i</mi><mi id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.3" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="alg1.l7.m1.2.2.2.1.1.1.1.1.3" stretchy="false" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l7.m1.3.3.3.2.2.4" xref="alg1.l7.m1.3.3.3.2.3.cmml">,</mo><mrow id="alg1.l7.m1.3.3.3.2.2.2" xref="alg1.l7.m1.3.3.3.2.2.2.cmml"><mi id="alg1.l7.m1.3.3.3.2.2.2.3" xref="alg1.l7.m1.3.3.3.2.2.2.3.cmml">I</mi><mo id="alg1.l7.m1.3.3.3.2.2.2.2" xref="alg1.l7.m1.3.3.3.2.2.2.2.cmml">⁢</mo><mrow id="alg1.l7.m1.3.3.3.2.2.2.1.1" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.cmml"><mo id="alg1.l7.m1.3.3.3.2.2.2.1.1.2" stretchy="false" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.cmml">(</mo><msub id="alg1.l7.m1.3.3.3.2.2.2.1.1.1" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.cmml"><mover accent="true" id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.cmml"><mi id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.2" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.2.cmml">b</mi><mo id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.1" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.1.cmml">~</mo></mover><mi id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.3" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l7.m1.3.3.3.2.2.2.1.1.3" stretchy="false" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.l7.m1.3.3.3.2.2.5" stretchy="false" xref="alg1.l7.m1.3.3.3.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l7.m1.3b"><apply id="alg1.l7.m1.3.3.cmml" xref="alg1.l7.m1.3.3"><eq id="alg1.l7.m1.3.3.4.cmml" xref="alg1.l7.m1.3.3.4"></eq><apply id="alg1.l7.m1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1"><times id="alg1.l7.m1.1.1.1.2.cmml" xref="alg1.l7.m1.1.1.1.2"></times><apply id="alg1.l7.m1.1.1.1.3.cmml" xref="alg1.l7.m1.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l7.m1.1.1.1.3.1.cmml" xref="alg1.l7.m1.1.1.1.3">subscript</csymbol><ci id="alg1.l7.m1.1.1.1.3.2.cmml" xref="alg1.l7.m1.1.1.1.3.2">𝑜</ci><ci id="alg1.l7.m1.1.1.1.3.3a.cmml" xref="alg1.l7.m1.1.1.1.3.3"><mtext id="alg1.l7.m1.1.1.1.3.3.cmml" mathsize="70%" xref="alg1.l7.m1.1.1.1.3.3">valid-c</mtext></ci></apply><apply id="alg1.l7.m1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1">subscript</csymbol><apply id="alg1.l7.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l7.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.1.1.1.1.1.1.2.1.cmml" xref="alg1.l7.m1.1.1.1.1.1">superscript</csymbol><ci id="alg1.l7.m1.1.1.1.1.1.1.2.2.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.2.2">𝑐</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.2.3.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="alg1.l7.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="alg1.l7.m1.3.3.3.cmml" xref="alg1.l7.m1.3.3.3"><times id="alg1.l7.m1.3.3.3.3.cmml" xref="alg1.l7.m1.3.3.3.3"></times><apply id="alg1.l7.m1.3.3.3.4.cmml" xref="alg1.l7.m1.3.3.3.4"><csymbol cd="ambiguous" id="alg1.l7.m1.3.3.3.4.1.cmml" xref="alg1.l7.m1.3.3.3.4">subscript</csymbol><ci id="alg1.l7.m1.3.3.3.4.2.cmml" xref="alg1.l7.m1.3.3.3.4.2">𝑓</ci><ci id="alg1.l7.m1.3.3.3.4.3a.cmml" xref="alg1.l7.m1.3.3.3.4.3"><mtext id="alg1.l7.m1.3.3.3.4.3.cmml" mathsize="70%" xref="alg1.l7.m1.3.3.3.4.3">VLM</mtext></ci></apply><interval closure="open" id="alg1.l7.m1.3.3.3.2.3.cmml" xref="alg1.l7.m1.3.3.3.2.2"><apply id="alg1.l7.m1.2.2.2.1.1.1.cmml" xref="alg1.l7.m1.2.2.2.1.1.1"><times id="alg1.l7.m1.2.2.2.1.1.1.2.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.2"></times><apply id="alg1.l7.m1.2.2.2.1.1.1.3.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l7.m1.2.2.2.1.1.1.3.1.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.3">subscript</csymbol><ci id="alg1.l7.m1.2.2.2.1.1.1.3.2.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.3.2">𝑝</ci><ci id="alg1.l7.m1.2.2.2.1.1.1.3.3a.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.3.3"><mtext id="alg1.l7.m1.2.2.2.1.1.1.3.3.cmml" mathsize="70%" xref="alg1.l7.m1.2.2.2.1.1.1.3.3">valid-c</mtext></ci></apply><apply id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.1.1">subscript</csymbol><apply id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.1.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.1.1">superscript</csymbol><ci id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.2.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.2">𝑐</ci><ci id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.3.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="alg1.l7.m1.2.2.2.1.1.1.1.1.1.3.cmml" xref="alg1.l7.m1.2.2.2.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="alg1.l7.m1.3.3.3.2.2.2.cmml" xref="alg1.l7.m1.3.3.3.2.2.2"><times id="alg1.l7.m1.3.3.3.2.2.2.2.cmml" xref="alg1.l7.m1.3.3.3.2.2.2.2"></times><ci id="alg1.l7.m1.3.3.3.2.2.2.3.cmml" xref="alg1.l7.m1.3.3.3.2.2.2.3">𝐼</ci><apply id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.cmml" xref="alg1.l7.m1.3.3.3.2.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.1.cmml" xref="alg1.l7.m1.3.3.3.2.2.2.1.1">subscript</csymbol><apply id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.cmml" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2"><ci id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.1.cmml" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.1">~</ci><ci id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.2.cmml" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.2.2">𝑏</ci></apply><ci id="alg1.l7.m1.3.3.3.2.2.2.1.1.1.3.cmml" xref="alg1.l7.m1.3.3.3.2.2.2.1.1.1.3">𝑖</ci></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m1.3c">o_{\text{valid-c}}(c^{k}_{i})=f_{\text{VLM}}(p_{\text{valid-c}}(c^{k}_{i}),I(%
\tilde{b}_{i}))</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m1.3d">italic_o start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT ( italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_f start_POSTSUBSCRIPT VLM end_POSTSUBSCRIPT ( italic_p start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT ( italic_c start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_I ( over~ start_ARG italic_b end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>  Rule-based Structured Formatting and Counting Filtering to get <math alttext="D_{W2C}" class="ltx_Math" display="inline" id="alg1.l8.m1.1"><semantics id="alg1.l8.m1.1a"><msub id="alg1.l8.m1.1.1" xref="alg1.l8.m1.1.1.cmml"><mi id="alg1.l8.m1.1.1.2" xref="alg1.l8.m1.1.1.2.cmml">D</mi><mrow id="alg1.l8.m1.1.1.3" xref="alg1.l8.m1.1.1.3.cmml"><mi id="alg1.l8.m1.1.1.3.2" xref="alg1.l8.m1.1.1.3.2.cmml">W</mi><mo id="alg1.l8.m1.1.1.3.1" xref="alg1.l8.m1.1.1.3.1.cmml">⁢</mo><mn id="alg1.l8.m1.1.1.3.3" xref="alg1.l8.m1.1.1.3.3.cmml">2</mn><mo id="alg1.l8.m1.1.1.3.1a" xref="alg1.l8.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l8.m1.1.1.3.4" xref="alg1.l8.m1.1.1.3.4.cmml">C</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="alg1.l8.m1.1b"><apply id="alg1.l8.m1.1.1.cmml" xref="alg1.l8.m1.1.1"><csymbol cd="ambiguous" id="alg1.l8.m1.1.1.1.cmml" xref="alg1.l8.m1.1.1">subscript</csymbol><ci id="alg1.l8.m1.1.1.2.cmml" xref="alg1.l8.m1.1.1.2">𝐷</ci><apply id="alg1.l8.m1.1.1.3.cmml" xref="alg1.l8.m1.1.1.3"><times id="alg1.l8.m1.1.1.3.1.cmml" xref="alg1.l8.m1.1.1.3.1"></times><ci id="alg1.l8.m1.1.1.3.2.cmml" xref="alg1.l8.m1.1.1.3.2">𝑊</ci><cn id="alg1.l8.m1.1.1.3.3.cmml" type="integer" xref="alg1.l8.m1.1.1.3.3">2</cn><ci id="alg1.l8.m1.1.1.3.4.cmml" xref="alg1.l8.m1.1.1.3.4">𝐶</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.m1.1c">D_{W2C}</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.m1.1d">italic_D start_POSTSUBSCRIPT italic_W 2 italic_C end_POSTSUBSCRIPT</annotation></semantics></math>.   
</div>
<div class="ltx_listingline" id="alg1.l8a">
<span class="ltx_tag ltx_tag_listingline">8:</span>  <span class="ltx_text ltx_font_italic" id="alg1.l8a.1">W2C </span>dataset <math alttext="D_{W2C}" class="ltx_Math" display="inline" id="alg1.l8a.m1.1"><semantics id="alg1.l8a.m1.1a"><msub id="alg1.l8a.m1.1.1" xref="alg1.l8a.m1.1.1.cmml"><mi id="alg1.l8a.m1.1.1.2" xref="alg1.l8a.m1.1.1.2.cmml">D</mi><mrow id="alg1.l8a.m1.1.1.3" xref="alg1.l8a.m1.1.1.3.cmml"><mi id="alg1.l8a.m1.1.1.3.2" xref="alg1.l8a.m1.1.1.3.2.cmml">W</mi><mo id="alg1.l8a.m1.1.1.3.1" xref="alg1.l8a.m1.1.1.3.1.cmml">⁢</mo><mn id="alg1.l8a.m1.1.1.3.3" xref="alg1.l8a.m1.1.1.3.3.cmml">2</mn><mo id="alg1.l8a.m1.1.1.3.1a" xref="alg1.l8a.m1.1.1.3.1.cmml">⁢</mo><mi id="alg1.l8a.m1.1.1.3.4" xref="alg1.l8a.m1.1.1.3.4.cmml">C</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="alg1.l8a.m1.1b"><apply id="alg1.l8a.m1.1.1.cmml" xref="alg1.l8a.m1.1.1"><csymbol cd="ambiguous" id="alg1.l8a.m1.1.1.1.cmml" xref="alg1.l8a.m1.1.1">subscript</csymbol><ci id="alg1.l8a.m1.1.1.2.cmml" xref="alg1.l8a.m1.1.1.2">𝐷</ci><apply id="alg1.l8a.m1.1.1.3.cmml" xref="alg1.l8a.m1.1.1.3"><times id="alg1.l8a.m1.1.1.3.1.cmml" xref="alg1.l8a.m1.1.1.3.1"></times><ci id="alg1.l8a.m1.1.1.3.2.cmml" xref="alg1.l8a.m1.1.1.3.2">𝑊</ci><cn id="alg1.l8a.m1.1.1.3.3.cmml" type="integer" xref="alg1.l8a.m1.1.1.3.3">2</cn><ci id="alg1.l8a.m1.1.1.3.4.cmml" xref="alg1.l8a.m1.1.1.3.4">𝐶</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8a.m1.1c">D_{W2C}</annotation><annotation encoding="application/x-llamapun" id="alg1.l8a.m1.1d">italic_D start_POSTSUBSCRIPT italic_W 2 italic_C end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
</div>
</figure>
</section>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Structured Formatting and Filtering</h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">As shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.F2" title="Figure 2 ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">2</span></a>, we organize the structured information into code format to fully represent the region-level information of an image. Inspired by Eureka <cite class="ltx_cite ltx_citemacro_cite">Ma et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib36" title="">2023</a>)</cite> and Text2Reward <cite class="ltx_cite ltx_citemacro_cite">Xie et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib58" title="">2023</a>)</cite>, we organize the information as a structured representation into the Python format due to its generality and conciseness. The organization is achieved by the following three rules.</p>
</div>
<div class="ltx_para" id="S3.SS4.p2">
<ul class="ltx_itemize" id="S3.I1">
<li class="ltx_item" id="S3.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i1.p1">
<p class="ltx_p" id="S3.I1.i1.p1.1">One general caption <math alttext="o_{g}" class="ltx_Math" display="inline" id="S3.I1.i1.p1.1.m1.1"><semantics id="S3.I1.i1.p1.1.m1.1a"><msub id="S3.I1.i1.p1.1.m1.1.1" xref="S3.I1.i1.p1.1.m1.1.1.cmml"><mi id="S3.I1.i1.p1.1.m1.1.1.2" xref="S3.I1.i1.p1.1.m1.1.1.2.cmml">o</mi><mi id="S3.I1.i1.p1.1.m1.1.1.3" xref="S3.I1.i1.p1.1.m1.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.1.m1.1b"><apply id="S3.I1.i1.p1.1.m1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.I1.i1.p1.1.m1.1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.1.1">subscript</csymbol><ci id="S3.I1.i1.p1.1.m1.1.1.2.cmml" xref="S3.I1.i1.p1.1.m1.1.1.2">𝑜</ci><ci id="S3.I1.i1.p1.1.m1.1.1.3.cmml" xref="S3.I1.i1.p1.1.m1.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.1.m1.1c">o_{g}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.1.m1.1d">italic_o start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT</annotation></semantics></math> of the whole image as the comments of each image Class.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i2.p1">
<p class="ltx_p" id="S3.I1.i2.p1.5">Each visual concept is an attribute for the image class. For each visual concept <math alttext="c_{i}" class="ltx_Math" display="inline" id="S3.I1.i2.p1.1.m1.1"><semantics id="S3.I1.i2.p1.1.m1.1a"><msub id="S3.I1.i2.p1.1.m1.1.1" xref="S3.I1.i2.p1.1.m1.1.1.cmml"><mi id="S3.I1.i2.p1.1.m1.1.1.2" xref="S3.I1.i2.p1.1.m1.1.1.2.cmml">c</mi><mi id="S3.I1.i2.p1.1.m1.1.1.3" xref="S3.I1.i2.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.1.m1.1b"><apply id="S3.I1.i2.p1.1.m1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.1.m1.1.1.2.cmml" xref="S3.I1.i2.p1.1.m1.1.1.2">𝑐</ci><ci id="S3.I1.i2.p1.1.m1.1.1.3.cmml" xref="S3.I1.i2.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.1.m1.1c">c_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.1.m1.1d">italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, we get their corresponding bounding box <math alttext="b_{i}" class="ltx_Math" display="inline" id="S3.I1.i2.p1.2.m2.1"><semantics id="S3.I1.i2.p1.2.m2.1a"><msub id="S3.I1.i2.p1.2.m2.1.1" xref="S3.I1.i2.p1.2.m2.1.1.cmml"><mi id="S3.I1.i2.p1.2.m2.1.1.2" xref="S3.I1.i2.p1.2.m2.1.1.2.cmml">b</mi><mi id="S3.I1.i2.p1.2.m2.1.1.3" xref="S3.I1.i2.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.2.m2.1b"><apply id="S3.I1.i2.p1.2.m2.1.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.1.1.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.2.m2.1.1.2.cmml" xref="S3.I1.i2.p1.2.m2.1.1.2">𝑏</ci><ci id="S3.I1.i2.p1.2.m2.1.1.3.cmml" xref="S3.I1.i2.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.2.m2.1c">b_{i}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.2.m2.1d">italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, caption <math alttext="o_{\text{desc}}(c_{i})" class="ltx_Math" display="inline" id="S3.I1.i2.p1.3.m3.1"><semantics id="S3.I1.i2.p1.3.m3.1a"><mrow id="S3.I1.i2.p1.3.m3.1.1" xref="S3.I1.i2.p1.3.m3.1.1.cmml"><msub id="S3.I1.i2.p1.3.m3.1.1.3" xref="S3.I1.i2.p1.3.m3.1.1.3.cmml"><mi id="S3.I1.i2.p1.3.m3.1.1.3.2" xref="S3.I1.i2.p1.3.m3.1.1.3.2.cmml">o</mi><mtext id="S3.I1.i2.p1.3.m3.1.1.3.3" xref="S3.I1.i2.p1.3.m3.1.1.3.3a.cmml">desc</mtext></msub><mo id="S3.I1.i2.p1.3.m3.1.1.2" xref="S3.I1.i2.p1.3.m3.1.1.2.cmml">⁢</mo><mrow id="S3.I1.i2.p1.3.m3.1.1.1.1" xref="S3.I1.i2.p1.3.m3.1.1.1.1.1.cmml"><mo id="S3.I1.i2.p1.3.m3.1.1.1.1.2" stretchy="false" xref="S3.I1.i2.p1.3.m3.1.1.1.1.1.cmml">(</mo><msub id="S3.I1.i2.p1.3.m3.1.1.1.1.1" xref="S3.I1.i2.p1.3.m3.1.1.1.1.1.cmml"><mi id="S3.I1.i2.p1.3.m3.1.1.1.1.1.2" xref="S3.I1.i2.p1.3.m3.1.1.1.1.1.2.cmml">c</mi><mi id="S3.I1.i2.p1.3.m3.1.1.1.1.1.3" xref="S3.I1.i2.p1.3.m3.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.I1.i2.p1.3.m3.1.1.1.1.3" stretchy="false" xref="S3.I1.i2.p1.3.m3.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.3.m3.1b"><apply id="S3.I1.i2.p1.3.m3.1.1.cmml" xref="S3.I1.i2.p1.3.m3.1.1"><times id="S3.I1.i2.p1.3.m3.1.1.2.cmml" xref="S3.I1.i2.p1.3.m3.1.1.2"></times><apply id="S3.I1.i2.p1.3.m3.1.1.3.cmml" xref="S3.I1.i2.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.I1.i2.p1.3.m3.1.1.3.1.cmml" xref="S3.I1.i2.p1.3.m3.1.1.3">subscript</csymbol><ci id="S3.I1.i2.p1.3.m3.1.1.3.2.cmml" xref="S3.I1.i2.p1.3.m3.1.1.3.2">𝑜</ci><ci id="S3.I1.i2.p1.3.m3.1.1.3.3a.cmml" xref="S3.I1.i2.p1.3.m3.1.1.3.3"><mtext id="S3.I1.i2.p1.3.m3.1.1.3.3.cmml" mathsize="70%" xref="S3.I1.i2.p1.3.m3.1.1.3.3">desc</mtext></ci></apply><apply id="S3.I1.i2.p1.3.m3.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.3.m3.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.3.m3.1.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.3.m3.1.1.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.3.m3.1.1.1.1.1.2.cmml" xref="S3.I1.i2.p1.3.m3.1.1.1.1.1.2">𝑐</ci><ci id="S3.I1.i2.p1.3.m3.1.1.1.1.1.3.cmml" xref="S3.I1.i2.p1.3.m3.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.3.m3.1c">o_{\text{desc}}(c_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.3.m3.1d">italic_o start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, and OCR information <math alttext="o_{\text{ocr}}(c_{i})" class="ltx_Math" display="inline" id="S3.I1.i2.p1.4.m4.1"><semantics id="S3.I1.i2.p1.4.m4.1a"><mrow id="S3.I1.i2.p1.4.m4.1.1" xref="S3.I1.i2.p1.4.m4.1.1.cmml"><msub id="S3.I1.i2.p1.4.m4.1.1.3" xref="S3.I1.i2.p1.4.m4.1.1.3.cmml"><mi id="S3.I1.i2.p1.4.m4.1.1.3.2" xref="S3.I1.i2.p1.4.m4.1.1.3.2.cmml">o</mi><mtext id="S3.I1.i2.p1.4.m4.1.1.3.3" xref="S3.I1.i2.p1.4.m4.1.1.3.3a.cmml">ocr</mtext></msub><mo id="S3.I1.i2.p1.4.m4.1.1.2" xref="S3.I1.i2.p1.4.m4.1.1.2.cmml">⁢</mo><mrow id="S3.I1.i2.p1.4.m4.1.1.1.1" xref="S3.I1.i2.p1.4.m4.1.1.1.1.1.cmml"><mo id="S3.I1.i2.p1.4.m4.1.1.1.1.2" stretchy="false" xref="S3.I1.i2.p1.4.m4.1.1.1.1.1.cmml">(</mo><msub id="S3.I1.i2.p1.4.m4.1.1.1.1.1" xref="S3.I1.i2.p1.4.m4.1.1.1.1.1.cmml"><mi id="S3.I1.i2.p1.4.m4.1.1.1.1.1.2" xref="S3.I1.i2.p1.4.m4.1.1.1.1.1.2.cmml">c</mi><mi id="S3.I1.i2.p1.4.m4.1.1.1.1.1.3" xref="S3.I1.i2.p1.4.m4.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.I1.i2.p1.4.m4.1.1.1.1.3" stretchy="false" xref="S3.I1.i2.p1.4.m4.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.4.m4.1b"><apply id="S3.I1.i2.p1.4.m4.1.1.cmml" xref="S3.I1.i2.p1.4.m4.1.1"><times id="S3.I1.i2.p1.4.m4.1.1.2.cmml" xref="S3.I1.i2.p1.4.m4.1.1.2"></times><apply id="S3.I1.i2.p1.4.m4.1.1.3.cmml" xref="S3.I1.i2.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="S3.I1.i2.p1.4.m4.1.1.3.1.cmml" xref="S3.I1.i2.p1.4.m4.1.1.3">subscript</csymbol><ci id="S3.I1.i2.p1.4.m4.1.1.3.2.cmml" xref="S3.I1.i2.p1.4.m4.1.1.3.2">𝑜</ci><ci id="S3.I1.i2.p1.4.m4.1.1.3.3a.cmml" xref="S3.I1.i2.p1.4.m4.1.1.3.3"><mtext id="S3.I1.i2.p1.4.m4.1.1.3.3.cmml" mathsize="70%" xref="S3.I1.i2.p1.4.m4.1.1.3.3">ocr</mtext></ci></apply><apply id="S3.I1.i2.p1.4.m4.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.4.m4.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.4.m4.1.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.4.m4.1.1.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.4.m4.1.1.1.1.1.2.cmml" xref="S3.I1.i2.p1.4.m4.1.1.1.1.1.2">𝑐</ci><ci id="S3.I1.i2.p1.4.m4.1.1.1.1.1.3.cmml" xref="S3.I1.i2.p1.4.m4.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.4.m4.1c">o_{\text{ocr}}(c_{i})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.4.m4.1d">italic_o start_POSTSUBSCRIPT ocr end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>. Such visual concept is then organized as <math alttext="\{\text{caption:}o_{\text{desc}}(c_{i}),\text{text:}o_{\text{ocr}}(c_{i}),%
\text{bbox:}b_{i}\}" class="ltx_Math" display="inline" id="S3.I1.i2.p1.5.m5.3"><semantics id="S3.I1.i2.p1.5.m5.3a"><mrow id="S3.I1.i2.p1.5.m5.3.3.3" xref="S3.I1.i2.p1.5.m5.3.3.4.cmml"><mo id="S3.I1.i2.p1.5.m5.3.3.3.4" stretchy="false" xref="S3.I1.i2.p1.5.m5.3.3.4.cmml">{</mo><mrow id="S3.I1.i2.p1.5.m5.1.1.1.1" xref="S3.I1.i2.p1.5.m5.1.1.1.1.cmml"><mtext id="S3.I1.i2.p1.5.m5.1.1.1.1.3" xref="S3.I1.i2.p1.5.m5.1.1.1.1.3a.cmml">caption:</mtext><mo id="S3.I1.i2.p1.5.m5.1.1.1.1.2" xref="S3.I1.i2.p1.5.m5.1.1.1.1.2.cmml">⁢</mo><msub id="S3.I1.i2.p1.5.m5.1.1.1.1.4" xref="S3.I1.i2.p1.5.m5.1.1.1.1.4.cmml"><mi id="S3.I1.i2.p1.5.m5.1.1.1.1.4.2" xref="S3.I1.i2.p1.5.m5.1.1.1.1.4.2.cmml">o</mi><mtext id="S3.I1.i2.p1.5.m5.1.1.1.1.4.3" xref="S3.I1.i2.p1.5.m5.1.1.1.1.4.3a.cmml">desc</mtext></msub><mo id="S3.I1.i2.p1.5.m5.1.1.1.1.2a" xref="S3.I1.i2.p1.5.m5.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.cmml"><mo id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.2" stretchy="false" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.cmml"><mi id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.2" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.2.cmml">c</mi><mi id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.3" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.3" stretchy="false" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.I1.i2.p1.5.m5.3.3.3.5" xref="S3.I1.i2.p1.5.m5.3.3.4.cmml">,</mo><mrow id="S3.I1.i2.p1.5.m5.2.2.2.2" xref="S3.I1.i2.p1.5.m5.2.2.2.2.cmml"><mtext id="S3.I1.i2.p1.5.m5.2.2.2.2.3" xref="S3.I1.i2.p1.5.m5.2.2.2.2.3a.cmml">text:</mtext><mo id="S3.I1.i2.p1.5.m5.2.2.2.2.2" xref="S3.I1.i2.p1.5.m5.2.2.2.2.2.cmml">⁢</mo><msub id="S3.I1.i2.p1.5.m5.2.2.2.2.4" xref="S3.I1.i2.p1.5.m5.2.2.2.2.4.cmml"><mi id="S3.I1.i2.p1.5.m5.2.2.2.2.4.2" xref="S3.I1.i2.p1.5.m5.2.2.2.2.4.2.cmml">o</mi><mtext id="S3.I1.i2.p1.5.m5.2.2.2.2.4.3" xref="S3.I1.i2.p1.5.m5.2.2.2.2.4.3a.cmml">ocr</mtext></msub><mo id="S3.I1.i2.p1.5.m5.2.2.2.2.2a" xref="S3.I1.i2.p1.5.m5.2.2.2.2.2.cmml">⁢</mo><mrow id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.cmml"><mo id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.2" stretchy="false" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.cmml">(</mo><msub id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.cmml"><mi id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.2" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.2.cmml">c</mi><mi id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.3" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.3" stretchy="false" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.I1.i2.p1.5.m5.3.3.3.6" xref="S3.I1.i2.p1.5.m5.3.3.4.cmml">,</mo><mrow id="S3.I1.i2.p1.5.m5.3.3.3.3" xref="S3.I1.i2.p1.5.m5.3.3.3.3.cmml"><mtext id="S3.I1.i2.p1.5.m5.3.3.3.3.2" xref="S3.I1.i2.p1.5.m5.3.3.3.3.2a.cmml">bbox:</mtext><mo id="S3.I1.i2.p1.5.m5.3.3.3.3.1" xref="S3.I1.i2.p1.5.m5.3.3.3.3.1.cmml">⁢</mo><msub id="S3.I1.i2.p1.5.m5.3.3.3.3.3" xref="S3.I1.i2.p1.5.m5.3.3.3.3.3.cmml"><mi id="S3.I1.i2.p1.5.m5.3.3.3.3.3.2" xref="S3.I1.i2.p1.5.m5.3.3.3.3.3.2.cmml">b</mi><mi id="S3.I1.i2.p1.5.m5.3.3.3.3.3.3" xref="S3.I1.i2.p1.5.m5.3.3.3.3.3.3.cmml">i</mi></msub></mrow><mo id="S3.I1.i2.p1.5.m5.3.3.3.7" stretchy="false" xref="S3.I1.i2.p1.5.m5.3.3.4.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.5.m5.3b"><set id="S3.I1.i2.p1.5.m5.3.3.4.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3"><apply id="S3.I1.i2.p1.5.m5.1.1.1.1.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1"><times id="S3.I1.i2.p1.5.m5.1.1.1.1.2.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.2"></times><ci id="S3.I1.i2.p1.5.m5.1.1.1.1.3a.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.3"><mtext id="S3.I1.i2.p1.5.m5.1.1.1.1.3.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.3">caption:</mtext></ci><apply id="S3.I1.i2.p1.5.m5.1.1.1.1.4.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.I1.i2.p1.5.m5.1.1.1.1.4.1.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.4">subscript</csymbol><ci id="S3.I1.i2.p1.5.m5.1.1.1.1.4.2.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.4.2">𝑜</ci><ci id="S3.I1.i2.p1.5.m5.1.1.1.1.4.3a.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.4.3"><mtext id="S3.I1.i2.p1.5.m5.1.1.1.1.4.3.cmml" mathsize="70%" xref="S3.I1.i2.p1.5.m5.1.1.1.1.4.3">desc</mtext></ci></apply><apply id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.2.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.2">𝑐</ci><ci id="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.3.cmml" xref="S3.I1.i2.p1.5.m5.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.I1.i2.p1.5.m5.2.2.2.2.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2"><times id="S3.I1.i2.p1.5.m5.2.2.2.2.2.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.2"></times><ci id="S3.I1.i2.p1.5.m5.2.2.2.2.3a.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.3"><mtext id="S3.I1.i2.p1.5.m5.2.2.2.2.3.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.3">text:</mtext></ci><apply id="S3.I1.i2.p1.5.m5.2.2.2.2.4.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.4"><csymbol cd="ambiguous" id="S3.I1.i2.p1.5.m5.2.2.2.2.4.1.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.4">subscript</csymbol><ci id="S3.I1.i2.p1.5.m5.2.2.2.2.4.2.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.4.2">𝑜</ci><ci id="S3.I1.i2.p1.5.m5.2.2.2.2.4.3a.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.4.3"><mtext id="S3.I1.i2.p1.5.m5.2.2.2.2.4.3.cmml" mathsize="70%" xref="S3.I1.i2.p1.5.m5.2.2.2.2.4.3">ocr</mtext></ci></apply><apply id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.1.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.2.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.2">𝑐</ci><ci id="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.3.cmml" xref="S3.I1.i2.p1.5.m5.2.2.2.2.1.1.1.3">𝑖</ci></apply></apply><apply id="S3.I1.i2.p1.5.m5.3.3.3.3.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3.3"><times id="S3.I1.i2.p1.5.m5.3.3.3.3.1.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3.3.1"></times><ci id="S3.I1.i2.p1.5.m5.3.3.3.3.2a.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3.3.2"><mtext id="S3.I1.i2.p1.5.m5.3.3.3.3.2.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3.3.2">bbox:</mtext></ci><apply id="S3.I1.i2.p1.5.m5.3.3.3.3.3.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.I1.i2.p1.5.m5.3.3.3.3.3.1.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3.3.3">subscript</csymbol><ci id="S3.I1.i2.p1.5.m5.3.3.3.3.3.2.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3.3.3.2">𝑏</ci><ci id="S3.I1.i2.p1.5.m5.3.3.3.3.3.3.cmml" xref="S3.I1.i2.p1.5.m5.3.3.3.3.3.3">𝑖</ci></apply></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.5.m5.3c">\{\text{caption:}o_{\text{desc}}(c_{i}),\text{text:}o_{\text{ocr}}(c_{i}),%
\text{bbox:}b_{i}\}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.5.m5.3d">{ caption: italic_o start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , text: italic_o start_POSTSUBSCRIPT ocr end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , bbox: italic_b start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT }</annotation></semantics></math>.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i3.p1">
<p class="ltx_p" id="S3.I1.i3.p1.1">Grouping visual concepts with the same name. To make the representation code more concise, we group the visual concepts with the same name in a list <math alttext="\tilde{c}_{i}\prime=[c_{i}^{1},c_{i}^{2},...]" class="ltx_math_unparsed" display="inline" id="S3.I1.i3.p1.1.m1.1"><semantics id="S3.I1.i3.p1.1.m1.1a"><mrow id="S3.I1.i3.p1.1.m1.1b"><msub id="S3.I1.i3.p1.1.m1.1.1"><mover accent="true" id="S3.I1.i3.p1.1.m1.1.1.2"><mi id="S3.I1.i3.p1.1.m1.1.1.2.2">c</mi><mo id="S3.I1.i3.p1.1.m1.1.1.2.1">~</mo></mover><mi id="S3.I1.i3.p1.1.m1.1.1.3">i</mi></msub><mo id="S3.I1.i3.p1.1.m1.1.2" lspace="0em" rspace="0.1389em">′</mo><mo id="S3.I1.i3.p1.1.m1.1.3" lspace="0.1389em">=</mo><mrow id="S3.I1.i3.p1.1.m1.1.4"><mo id="S3.I1.i3.p1.1.m1.1.4.1" stretchy="false">[</mo><msubsup id="S3.I1.i3.p1.1.m1.1.4.2"><mi id="S3.I1.i3.p1.1.m1.1.4.2.2.2">c</mi><mi id="S3.I1.i3.p1.1.m1.1.4.2.2.3">i</mi><mn id="S3.I1.i3.p1.1.m1.1.4.2.3">1</mn></msubsup><mo id="S3.I1.i3.p1.1.m1.1.4.3">,</mo><msubsup id="S3.I1.i3.p1.1.m1.1.4.4"><mi id="S3.I1.i3.p1.1.m1.1.4.4.2.2">c</mi><mi id="S3.I1.i3.p1.1.m1.1.4.4.2.3">i</mi><mn id="S3.I1.i3.p1.1.m1.1.4.4.3">2</mn></msubsup><mo id="S3.I1.i3.p1.1.m1.1.4.5">,</mo><mi id="S3.I1.i3.p1.1.m1.1.4.6" mathvariant="normal">…</mi><mo id="S3.I1.i3.p1.1.m1.1.4.7" stretchy="false">]</mo></mrow></mrow><annotation encoding="application/x-tex" id="S3.I1.i3.p1.1.m1.1c">\tilde{c}_{i}\prime=[c_{i}^{1},c_{i}^{2},...]</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i3.p1.1.m1.1d">over~ start_ARG italic_c end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ′ = [ italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT , italic_c start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT , … ]</annotation></semantics></math>.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S3.SS4.p3">
<p class="ltx_p" id="S3.SS4.p3.1">By integrating these rules, we get the final code representation of each image, which is then followed by the rule-based filtering strategy that filters out counting in-consistent samples.</p>
</div>
<div class="ltx_para" id="S3.SS4.p4">
<p class="ltx_p" id="S3.SS4.p4.1">In conclusion, by denoting the final dataset as <math alttext="D_{W2C}" class="ltx_Math" display="inline" id="S3.SS4.p4.1.m1.1"><semantics id="S3.SS4.p4.1.m1.1a"><msub id="S3.SS4.p4.1.m1.1.1" xref="S3.SS4.p4.1.m1.1.1.cmml"><mi id="S3.SS4.p4.1.m1.1.1.2" xref="S3.SS4.p4.1.m1.1.1.2.cmml">D</mi><mrow id="S3.SS4.p4.1.m1.1.1.3" xref="S3.SS4.p4.1.m1.1.1.3.cmml"><mi id="S3.SS4.p4.1.m1.1.1.3.2" xref="S3.SS4.p4.1.m1.1.1.3.2.cmml">W</mi><mo id="S3.SS4.p4.1.m1.1.1.3.1" xref="S3.SS4.p4.1.m1.1.1.3.1.cmml">⁢</mo><mn id="S3.SS4.p4.1.m1.1.1.3.3" xref="S3.SS4.p4.1.m1.1.1.3.3.cmml">2</mn><mo id="S3.SS4.p4.1.m1.1.1.3.1a" xref="S3.SS4.p4.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S3.SS4.p4.1.m1.1.1.3.4" xref="S3.SS4.p4.1.m1.1.1.3.4.cmml">C</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p4.1.m1.1b"><apply id="S3.SS4.p4.1.m1.1.1.cmml" xref="S3.SS4.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p4.1.m1.1.1.1.cmml" xref="S3.SS4.p4.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.p4.1.m1.1.1.2.cmml" xref="S3.SS4.p4.1.m1.1.1.2">𝐷</ci><apply id="S3.SS4.p4.1.m1.1.1.3.cmml" xref="S3.SS4.p4.1.m1.1.1.3"><times id="S3.SS4.p4.1.m1.1.1.3.1.cmml" xref="S3.SS4.p4.1.m1.1.1.3.1"></times><ci id="S3.SS4.p4.1.m1.1.1.3.2.cmml" xref="S3.SS4.p4.1.m1.1.1.3.2">𝑊</ci><cn id="S3.SS4.p4.1.m1.1.1.3.3.cmml" type="integer" xref="S3.SS4.p4.1.m1.1.1.3.3">2</cn><ci id="S3.SS4.p4.1.m1.1.1.3.4.cmml" xref="S3.SS4.p4.1.m1.1.1.3.4">𝐶</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p4.1.m1.1c">D_{W2C}</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p4.1.m1.1d">italic_D start_POSTSUBSCRIPT italic_W 2 italic_C end_POSTSUBSCRIPT</annotation></semantics></math>, the whole data construction pipeline is depicted in Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#alg1" title="Algorithm 1 ‣ Caption Re-ranking via Consistency ‣ 3.3 Information Filtering via Self Consistency ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2>
<figure class="ltx_table" id="S4.T1">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T1.5">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt" id="S4.T1.1.1.2">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt" id="S4.T1.1.1.3">GQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt" id="S4.T1.1.1.4">MME.</th>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.5">POPE</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.1">SQA<sup class="ltx_sup" id="S4.T1.1.1.1.1"><span class="ltx_text ltx_font_italic" id="S4.T1.1.1.1.1.1">I</span></sup>
</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.6">MMS.</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.7">MMT.</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.8">Text.</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.9">Doc.</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T1.1.1.10">Chart.</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.6.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="10" id="S4.T1.5.6.1.1"><span class="ltx_text ltx_font_italic" id="S4.T1.5.6.1.1.1">Low resolution setting</span></th>
</tr>
<tr class="ltx_tr" id="S4.T1.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.2.2.1">LLaVA-1.5-7B<sup class="ltx_sup" id="S4.T1.2.2.1.1"><span class="ltx_text ltx_font_italic" id="S4.T1.2.2.1.1.1">∗</span></sup>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.2.2.2">62.3</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.2.2.3">1468</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.2.2.4"><span class="ltx_text ltx_font_bold" id="S4.T1.2.2.4.1">86.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.2.2.5">68.2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.2.2.6">32.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.2.2.7">48.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.2.2.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.2.2.8.1">47.6</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.2.2.9">-</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.2.2.10">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.7.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T1.5.7.2.1">   +ShareGPT4V</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.7.2.2"><span class="ltx_text ltx_font_bold" id="S4.T1.5.7.2.2.1">63.4</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.7.2.3"><span class="ltx_text ltx_font_bold" id="S4.T1.5.7.2.3.1">1507</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.5.7.2.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.7.2.4.1">86.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.7.2.5"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.7.2.5.1">69.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.7.2.6"><span class="ltx_text ltx_font_bold" id="S4.T1.5.7.2.6.1">34.3</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.7.2.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.7.2.7.1">49.3</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.7.2.8"><span class="ltx_text ltx_font_bold" id="S4.T1.5.7.2.8.1">47.9</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.7.2.9">-</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.7.2.10">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.8.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T1.5.8.3.1">   +<span class="ltx_text ltx_font_italic" id="S4.T1.5.8.3.1.1">W2C</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.8.3.2"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.8.3.2.1">62.8</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.8.3.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.8.3.3.1">1503</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.5.8.3.4">85.6</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.8.3.5"><span class="ltx_text ltx_font_bold" id="S4.T1.5.8.3.5.1">69.8</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.8.3.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.8.3.6.1">33.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.8.3.7"><span class="ltx_text ltx_font_bold" id="S4.T1.5.8.3.7.1">49.4</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.8.3.8">46.6</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.8.3.9">-</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.8.3.10">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.3.3.1">LLaVA-1.5-13B<sup class="ltx_sup" id="S4.T1.3.3.1.1"><span class="ltx_text ltx_font_italic" id="S4.T1.3.3.1.1.1">∗</span></sup>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.3.3.2">63.7</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.3.3.3"><span class="ltx_text ltx_font_bold" id="S4.T1.3.3.3.1">1574</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.3.3.4">85.7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.3.3.5"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.3.3.5.1">72.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.3.3.6">33.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.3.3.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.3.3.7.1">51.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.3.3.8"><span class="ltx_text ltx_font_bold" id="S4.T1.3.3.8.1">49.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.3.3.9">-</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.3.3.10">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.9.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T1.5.9.4.1">   +ShareGPT4V</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.9.4.2"><span class="ltx_text ltx_font_bold" id="S4.T1.5.9.4.2.1">64.0</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.9.4.3">1537</th>
<td class="ltx_td ltx_align_center" id="S4.T1.5.9.4.4"><span class="ltx_text ltx_font_bold" id="S4.T1.5.9.4.4.1">86.1</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.9.4.5">72.0</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.9.4.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.9.4.6.1">33.9</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.9.4.7">50.9</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.9.4.8">48.8</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.9.4.9">-</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.9.4.10">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.10.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T1.5.10.5.1">   +<span class="ltx_text ltx_font_italic" id="S4.T1.5.10.5.1.1">W2C</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.10.5.2"><span class="ltx_text ltx_font_bold" id="S4.T1.5.10.5.2.1">64.0</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.10.5.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.10.5.3.1">1547</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.5.10.5.4">85.7</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.10.5.5"><span class="ltx_text ltx_font_bold" id="S4.T1.5.10.5.5.1">72.6</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.10.5.6"><span class="ltx_text ltx_font_bold" id="S4.T1.5.10.5.6.1">36.1</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.10.5.7"><span class="ltx_text ltx_font_bold" id="S4.T1.5.10.5.7.1">51.7</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.10.5.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.10.5.8.1">48.9</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.10.5.9">-</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.10.5.10">-</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.11.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="10" id="S4.T1.5.11.6.1"><span class="ltx_text ltx_font_italic" id="S4.T1.5.11.6.1.1">High resolution setting</span></th>
</tr>
<tr class="ltx_tr" id="S4.T1.5.12.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.5.12.7.1">LLaVA-NeXT-7B</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.5.12.7.2"><span class="ltx_text ltx_font_bold" id="S4.T1.5.12.7.2.1">64.2</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.5.12.7.3">1473</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.12.7.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.12.7.4.1">87.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.12.7.5">67.9</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.12.7.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.12.7.6.1">34.6</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.12.7.7">48.2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.12.7.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.12.7.8.1">63.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.12.7.9"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.12.7.9.1">75.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.12.7.10">62.0</td>
</tr>
<tr class="ltx_tr" id="S4.T1.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T1.4.4.1">   +ShareGPT4V<sup class="ltx_sup" id="S4.T1.4.4.1.1"><span class="ltx_text ltx_font_italic" id="S4.T1.4.4.1.1.1">∗</span></sup>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.4.4.2">64.0</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.4.4.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.4.4.3.1">1513</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.4">85.8</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.5"><span class="ltx_text ltx_font_bold" id="S4.T1.4.4.5.1">68.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.6">33.7</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.4.4.7.1">49.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.8"><span class="ltx_text ltx_font_bold" id="S4.T1.4.4.8.1">64.2</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.9">75.1</td>
<td class="ltx_td ltx_align_center" id="S4.T1.4.4.10"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.4.4.10.1">62.2</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.13.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T1.5.13.8.1">   +<span class="ltx_text ltx_font_italic" id="S4.T1.5.13.8.1.1">W2C</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.13.8.2"><span class="ltx_text ltx_font_bold" id="S4.T1.5.13.8.2.1">64.2</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.13.8.3"><span class="ltx_text ltx_font_bold" id="S4.T1.5.13.8.3.1">1516</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.5.13.8.4"><span class="ltx_text ltx_font_bold" id="S4.T1.5.13.8.4.1">87.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.13.8.5"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.13.8.5.1">68.3</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.13.8.6"><span class="ltx_text ltx_font_bold" id="S4.T1.5.13.8.6.1">35.8</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.13.8.7"><span class="ltx_text ltx_font_bold" id="S4.T1.5.13.8.7.1">50.1</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.13.8.8">63.7</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.13.8.9"><span class="ltx_text ltx_font_bold" id="S4.T1.5.13.8.9.1">76.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.13.8.10"><span class="ltx_text ltx_font_bold" id="S4.T1.5.13.8.10.1">63.0</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.14.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T1.5.14.9.1">LLaVA-NeXT-13B</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.5.14.9.2">65.3</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="S4.T1.5.14.9.3">1545</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.14.9.4">87.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.14.9.5">70.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.14.9.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.14.9.6.1">37.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.14.9.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.14.9.7.1">50.6</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.14.9.8"><span class="ltx_text ltx_font_bold" id="S4.T1.5.14.9.8.1">67.6</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.14.9.9">78.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.5.14.9.10"><span class="ltx_text ltx_font_bold" id="S4.T1.5.14.9.10.1">66.2</span></td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T1.5.5.1">   +ShareGPT4V<sup class="ltx_sup" id="S4.T1.5.5.1.1"><span class="ltx_text ltx_font_italic" id="S4.T1.5.5.1.1.1">∗</span></sup>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.5.2">65.3</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="S4.T1.5.5.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.5.3.1">1574</span></th>
<td class="ltx_td ltx_align_center" id="S4.T1.5.5.4">87.1</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.5.5">70.1</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.5.6"><span class="ltx_text ltx_font_bold" id="S4.T1.5.5.6.1">37.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.5.7">50.4</td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.5.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.5.8.1">67.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.5.9"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.5.9.1">78.4</span></td>
<td class="ltx_td ltx_align_center" id="S4.T1.5.5.10">63.8</td>
</tr>
<tr class="ltx_tr" id="S4.T1.5.15.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T1.5.15.10.1">   +<span class="ltx_text ltx_font_italic" id="S4.T1.5.15.10.1.1">W2C</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b" id="S4.T1.5.15.10.2"><span class="ltx_text ltx_font_bold" id="S4.T1.5.15.10.2.1">65.5</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b" id="S4.T1.5.15.10.3"><span class="ltx_text ltx_font_bold" id="S4.T1.5.15.10.3.1">1597</span></th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.5.15.10.4"><span class="ltx_text ltx_font_bold" id="S4.T1.5.15.10.4.1">87.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.5.15.10.5"><span class="ltx_text ltx_font_bold" id="S4.T1.5.15.10.5.1">70.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.5.15.10.6">37.1</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.5.15.10.7"><span class="ltx_text ltx_font_bold" id="S4.T1.5.15.10.7.1">51.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.5.15.10.8">65.2</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.5.15.10.9"><span class="ltx_text ltx_font_bold" id="S4.T1.5.15.10.9.1">79.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T1.5.15.10.10"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.5.15.10.10.1">65.6</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Visual Question Answering benchmarks of <span class="ltx_text ltx_font_italic" id="S4.T1.17.1">W2C </span>on LLaVA1.5 and LLaVA-NeXT under different combination of IT datasets. The best results are <span class="ltx_text ltx_font_bold" id="S4.T1.18.2">bold</span> and the second results are <span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T1.19.3">underlined</span>. <sup class="ltx_sup" id="S4.T1.20.4"><span class="ltx_text ltx_font_italic" id="S4.T1.20.4.1">∗</span></sup>: our reproduction of LLaVA-1.5 and LLaVA-Next, which achieves comparable performance with the original papers. <math alttext="-" class="ltx_Math" display="inline" id="S4.T1.10.m2.1"><semantics id="S4.T1.10.m2.1b"><mo id="S4.T1.10.m2.1.1" xref="S4.T1.10.m2.1.1.cmml">−</mo><annotation-xml encoding="MathML-Content" id="S4.T1.10.m2.1c"><minus id="S4.T1.10.m2.1.1.cmml" xref="S4.T1.10.m2.1.1"></minus></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.10.m2.1d">-</annotation><annotation encoding="application/x-llamapun" id="S4.T1.10.m2.1e">-</annotation></semantics></math>: LLaVA-1.5 does not support benchmarks that requires high input resolution. Abbreviations: SQA<sup class="ltx_sup" id="S4.T1.21.5"><span class="ltx_text ltx_font_italic" id="S4.T1.21.5.1">I</span></sup>(ScienceQA), MMS.(MMStar), MMT.(MMT-Bench), Text.(TextVQA), Doc.(DocVQA), Chart.(ChartQA).</figcaption>
</figure>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Experimental Setup</h3>
<section class="ltx_paragraph" id="S4.SS1.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Datasets</h4>
<div class="ltx_para" id="S4.SS1.SSS0.Px1.p1">
<p class="ltx_p" id="S4.SS1.SSS0.Px1.p1.3">For the data construction pipeline,
we strictly use the images in the ShareGPT4V dataset
for our self-instructed approach validation in a fair comparison.
Since the original ShareGPT4V dataset contains duplicate images, We remove the repeated images in the original 102K data and get about 87K original images.
We follow the practice of LLaVA-1.5 <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib30" title="">2023a</a>)</cite> to adopt a two-stage training approach consisting of prompt tuning (PT) and instruct tuning (IT).
For the experiments on low resolution setting, we follow the LLaVA-1.5 to use training dataset <math alttext="\text{LLaVA}_{\text{558k}}" class="ltx_Math" display="inline" id="S4.SS1.SSS0.Px1.p1.1.m1.1"><semantics id="S4.SS1.SSS0.Px1.p1.1.m1.1a"><msub id="S4.SS1.SSS0.Px1.p1.1.m1.1.1" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1.cmml"><mtext id="S4.SS1.SSS0.Px1.p1.1.m1.1.1.2" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1.2a.cmml">LLaVA</mtext><mtext id="S4.SS1.SSS0.Px1.p1.1.m1.1.1.3" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1.3a.cmml">558k</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS0.Px1.p1.1.m1.1b"><apply id="S4.SS1.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS1.SSS0.Px1.p1.1.m1.1.1.1.cmml" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1">subscript</csymbol><ci id="S4.SS1.SSS0.Px1.p1.1.m1.1.1.2a.cmml" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1.2"><mtext id="S4.SS1.SSS0.Px1.p1.1.m1.1.1.2.cmml" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1.2">LLaVA</mtext></ci><ci id="S4.SS1.SSS0.Px1.p1.1.m1.1.1.3a.cmml" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1.3"><mtext id="S4.SS1.SSS0.Px1.p1.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.SS1.SSS0.Px1.p1.1.m1.1.1.3">558k</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS0.Px1.p1.1.m1.1c">\text{LLaVA}_{\text{558k}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS0.Px1.p1.1.m1.1d">LLaVA start_POSTSUBSCRIPT 558k end_POSTSUBSCRIPT</annotation></semantics></math> for PT stage and <math alttext="\text{LLaVA}_{\text{665k}}" class="ltx_Math" display="inline" id="S4.SS1.SSS0.Px1.p1.2.m2.1"><semantics id="S4.SS1.SSS0.Px1.p1.2.m2.1a"><msub id="S4.SS1.SSS0.Px1.p1.2.m2.1.1" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1.cmml"><mtext id="S4.SS1.SSS0.Px1.p1.2.m2.1.1.2" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1.2a.cmml">LLaVA</mtext><mtext id="S4.SS1.SSS0.Px1.p1.2.m2.1.1.3" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1.3a.cmml">665k</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS0.Px1.p1.2.m2.1b"><apply id="S4.SS1.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS1.SSS0.Px1.p1.2.m2.1.1.1.cmml" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1">subscript</csymbol><ci id="S4.SS1.SSS0.Px1.p1.2.m2.1.1.2a.cmml" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1.2"><mtext id="S4.SS1.SSS0.Px1.p1.2.m2.1.1.2.cmml" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1.2">LLaVA</mtext></ci><ci id="S4.SS1.SSS0.Px1.p1.2.m2.1.1.3a.cmml" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1.3"><mtext id="S4.SS1.SSS0.Px1.p1.2.m2.1.1.3.cmml" mathsize="70%" xref="S4.SS1.SSS0.Px1.p1.2.m2.1.1.3">665k</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS0.Px1.p1.2.m2.1c">\text{LLaVA}_{\text{665k}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS0.Px1.p1.2.m2.1d">LLaVA start_POSTSUBSCRIPT 665k end_POSTSUBSCRIPT</annotation></semantics></math> for IT stage on LLaVA-1.5 training stages.
As the specific mixture ratio details of the LLaVA-NeXT data were omitted, we directly utilized the entire training set from each of the following datasets in the IT stage, forming a mixture of datasets including:
<math alttext="\text{LLaVA}_{\text{665k}}" class="ltx_Math" display="inline" id="S4.SS1.SSS0.Px1.p1.3.m3.1"><semantics id="S4.SS1.SSS0.Px1.p1.3.m3.1a"><msub id="S4.SS1.SSS0.Px1.p1.3.m3.1.1" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1.cmml"><mtext id="S4.SS1.SSS0.Px1.p1.3.m3.1.1.2" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1.2a.cmml">LLaVA</mtext><mtext id="S4.SS1.SSS0.Px1.p1.3.m3.1.1.3" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1.3a.cmml">665k</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS0.Px1.p1.3.m3.1b"><apply id="S4.SS1.SSS0.Px1.p1.3.m3.1.1.cmml" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS1.SSS0.Px1.p1.3.m3.1.1.1.cmml" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1">subscript</csymbol><ci id="S4.SS1.SSS0.Px1.p1.3.m3.1.1.2a.cmml" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1.2"><mtext id="S4.SS1.SSS0.Px1.p1.3.m3.1.1.2.cmml" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1.2">LLaVA</mtext></ci><ci id="S4.SS1.SSS0.Px1.p1.3.m3.1.1.3a.cmml" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1.3"><mtext id="S4.SS1.SSS0.Px1.p1.3.m3.1.1.3.cmml" mathsize="70%" xref="S4.SS1.SSS0.Px1.p1.3.m3.1.1.3">665k</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS0.Px1.p1.3.m3.1c">\text{LLaVA}_{\text{665k}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS0.Px1.p1.3.m3.1d">LLaVA start_POSTSUBSCRIPT 665k end_POSTSUBSCRIPT</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib30" title="">2023a</a>)</cite>, DocVQA <cite class="ltx_cite ltx_citemacro_cite">Tito et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib50" title="">2021</a>)</cite>, ChartQA <cite class="ltx_cite ltx_citemacro_cite">Masry et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib38" title="">2022</a>)</cite> and ShareGPT4V <cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib7" title="">2023a</a>)</cite> on high resolution setting.</p>
</div>
<div class="ltx_para" id="S4.SS1.SSS0.Px1.p2">
<p class="ltx_p" id="S4.SS1.SSS0.Px1.p2.1">To comprehensively assess the effectiveness of our constructed dataset, we evaluate the model on widely adopted multi-modal benchmarks and grouding benchmarks,
including TextVQA <cite class="ltx_cite ltx_citemacro_cite">Singh et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib47" title="">2019</a>)</cite> (without providing OCR tokens), DocVQA <cite class="ltx_cite ltx_citemacro_cite">Tito et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib50" title="">2021</a>)</cite>, ChartQA <cite class="ltx_cite ltx_citemacro_cite">Masry et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib38" title="">2022</a>)</cite>, MME <cite class="ltx_cite ltx_citemacro_cite">Fu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib16" title="">2024</a>)</cite>, MMT Bench <cite class="ltx_cite ltx_citemacro_cite">Ying et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib59" title="">2024</a>)</cite>, MMStar <cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib6" title="">2024b</a>)</cite>, ScienceQA <cite class="ltx_cite ltx_citemacro_cite">Lu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib35" title="">2022</a>)</cite>, POPE <cite class="ltx_cite ltx_citemacro_cite">Li et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib28" title="">2023d</a>)</cite>,
GQA <cite class="ltx_cite ltx_citemacro_cite">Hudson and Manning (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib20" title="">2019</a>)</cite>, RefCOCO <cite class="ltx_cite ltx_citemacro_cite">Kazemzadeh et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib23" title="">2014</a>)</cite>, RefCOCO+ <cite class="ltx_cite ltx_citemacro_cite">Mao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib37" title="">2016</a>)</cite> and RefCOCOg <cite class="ltx_cite ltx_citemacro_cite">Mao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib37" title="">2016</a>)</cite>.
These benchmarks provide a comprehensive assessment of multiple perspectives on multi-modal VLM performance.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS1.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Implementation Details</h4>
<div class="ltx_para" id="S4.SS1.SSS0.Px2.p1">
<p class="ltx_p" id="S4.SS1.SSS0.Px2.p1.2">In this paper, we employ two types of leading methods: LLaVA-1.5 <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib30" title="">2023a</a>)</cite> uses a CLIP-pretrained ViT-L/14 <cite class="ltx_cite ltx_citemacro_cite">Radford et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib44" title="">2021</a>)</cite> as a vision encoder, a projector and an LLM, and LLaVA-NeXT <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib31" title="">2024a</a>)</cite> increases the input image resolution by applying an adaptive image cropping strategy to concatenate all vision tokens.
To ensure a fair and comprehensive comparison Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T1" title="Table 1 ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">1</span></a> and Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T2" title="Table 2 ‣ Data Processing Details ‣ 4.1 Experimental Setup ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">2</span></a> present results both excluding and including the ShareGPT4V dataset, as well as results from the incorporation of our dataset.
Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T3" title="Table 3 ‣ Data Processing Details ‣ 4.1 Experimental Setup ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">3</span></a>
We have reproduced LLaVA-NeXT with a learning rate of ViT to 1/10 of the base learning rate for the reason that LLaVA-NeXT only publishes their evaluation code.
The learning rate for the PT stage is set to <math alttext="1e^{-3}" class="ltx_Math" display="inline" id="S4.SS1.SSS0.Px2.p1.1.m1.1"><semantics id="S4.SS1.SSS0.Px2.p1.1.m1.1a"><mrow id="S4.SS1.SSS0.Px2.p1.1.m1.1.1" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.cmml"><mn id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.2" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.2.cmml">1</mn><mo id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.1" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.1.cmml">⁢</mo><msup id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.cmml"><mi id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.2" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.2.cmml">e</mi><mrow id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3.cmml"><mo id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3a" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3.cmml">−</mo><mn id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3.2" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3.2.cmml">3</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS0.Px2.p1.1.m1.1b"><apply id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1"><times id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.1.cmml" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.1"></times><cn id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.2.cmml" type="integer" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.2">1</cn><apply id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.cmml" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.1.cmml" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3">superscript</csymbol><ci id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.2.cmml" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.2">𝑒</ci><apply id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3.cmml" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3"><minus id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3.1.cmml" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3"></minus><cn id="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3.2.cmml" type="integer" xref="S4.SS1.SSS0.Px2.p1.1.m1.1.1.3.3.2">3</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS0.Px2.p1.1.m1.1c">1e^{-3}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS0.Px2.p1.1.m1.1d">1 italic_e start_POSTSUPERSCRIPT - 3 end_POSTSUPERSCRIPT</annotation></semantics></math> and the IT stage is set to <math alttext="2e^{-5}" class="ltx_Math" display="inline" id="S4.SS1.SSS0.Px2.p1.2.m2.1"><semantics id="S4.SS1.SSS0.Px2.p1.2.m2.1a"><mrow id="S4.SS1.SSS0.Px2.p1.2.m2.1.1" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.cmml"><mn id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.2" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.2.cmml">2</mn><mo id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.1" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.1.cmml">⁢</mo><msup id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.cmml"><mi id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.2" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.2.cmml">e</mi><mrow id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3.cmml"><mo id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3a" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3.cmml">−</mo><mn id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3.2" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3.2.cmml">5</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS0.Px2.p1.2.m2.1b"><apply id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1"><times id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.1.cmml" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.1"></times><cn id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.2.cmml" type="integer" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.2">2</cn><apply id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.cmml" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.1.cmml" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3">superscript</csymbol><ci id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.2.cmml" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.2">𝑒</ci><apply id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3.cmml" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3"><minus id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3.1.cmml" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3"></minus><cn id="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3.2.cmml" type="integer" xref="S4.SS1.SSS0.Px2.p1.2.m2.1.1.3.3.2">5</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS0.Px2.p1.2.m2.1c">2e^{-5}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.SSS0.Px2.p1.2.m2.1d">2 italic_e start_POSTSUPERSCRIPT - 5 end_POSTSUPERSCRIPT</annotation></semantics></math> for both Vicuna-7B and Vicuna-13B backbone LLM. We use 16 A100 for experiments on VLM training. We freeze the vision encoder during training on the LLaVA-1.5 and only freeze the vision encoder on the PT stage during training on the LLaVA-NEXT following the original paper. We show more training details in the Appendix <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.SS1" title="C.1 Dataset Details ‣ Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">C.1</span></a></p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS1.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">Data Processing Details</h4>
<div class="ltx_para" id="S4.SS1.SSS0.Px3.p1">
<p class="ltx_p" id="S4.SS1.SSS0.Px3.p1.1">During the data construction pipeline, we employ NLTK <cite class="ltx_cite ltx_citemacro_cite">Bird (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib4" title="">2006</a>)</cite> tool to extract noun phrases from the captions, and the resulting set of phrases is then post-processed using WordNet <cite class="ltx_cite ltx_citemacro_cite">Miller (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib39" title="">1995</a>)</cite> to remove duplicates and filter out inaccurately named entities.
The total amount of final data after consistency filtering will not be completely consistent for different VLMs and we show the details in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.SS1" title="C.1 Dataset Details ‣ Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">C.1</span></a>.
The checkpoints of the VLM we used in our data processing are the original checkpoints of the official release. For LLaVA-1.5, which is not trained with the ShareGPT4V dataset, LLaVA-NEXT is trained with part of the ShareGPT4V dataset. The detailed GPU hours can be found in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.SS2" title="C.2 Implementation Details of our Pipeline ‣ Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">C.2</span></a> and we show the visualization of our <span class="ltx_text ltx_font_italic" id="S4.SS1.SSS0.Px3.p1.1.1">W2C </span>samples in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.F4" title="Figure 4 ‣ C.3 Data Example ‣ Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">4</span></a>.</p>
</div>
<figure class="ltx_table" id="S4.T2">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T2.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T2.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt" id="S4.T2.1.1.1.1">Method</th>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="3" id="S4.T2.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.2.1">RefCOCO</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="3" id="S4.T2.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.3.1">RefCOCO+</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" colspan="2" id="S4.T2.1.1.1.4"><span class="ltx_text ltx_font_bold" id="S4.T2.1.1.1.4.1">RefCOCOg</span></td>
<td class="ltx_td ltx_border_tt" id="S4.T2.1.1.1.5"></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.2.2">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S4.T2.1.2.2.1"></th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.2.2.2">test-a</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.2.2.3">test-b</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.2.2.4">val</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.2.2.5">test-a</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.2.2.6">test-b</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.2.2.7">val</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.2.2.8">test</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.1.2.2.9">val</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.2.2.10">Avg.</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.3.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="10" id="S4.T2.1.3.3.1"><span class="ltx_text ltx_font_italic" id="S4.T2.1.3.3.1.1">Low resolution setting</span></th>
</tr>
<tr class="ltx_tr" id="S4.T2.1.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.1.4.4.1">LLaVA-1.5-7B</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.4.4.2">86.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.4.4.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.4.4.3.1">72.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.4.4.4">80.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.4.4.5">79.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.4.4.6">60.7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.4.4.7">70.7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.4.4.8">72.2</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.4.4.9">72.2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.4.4.10">74.4</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T2.1.5.5.1">   +ShareGPT4V</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.5.2"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.5.5.2.1">87.1</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.5.3">72.7</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.5.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.5.5.4.1">80.4</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.5.5"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.5.5.5.1">79.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.5.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.5.5.6.1">62.2</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.5.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.5.5.7.1">71.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.5.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.5.5.8.1">72.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.1.5.5.9">72.2</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.5.5.10"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.5.5.10.1">74.8</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.6.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T2.1.6.6.1">   +<span class="ltx_text ltx_font_italic" id="S4.T2.1.6.6.1.1">W2C</span>
</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.2"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.2.1">88.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.3"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.3.1">75.3</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.4"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.4.1">81.7</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.5"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.5.1">81.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.6"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.6.1">63.1</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.7"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.7.1">73.9</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.8"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.8.1">75.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.1.6.6.9"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.9.1">75.2</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.6.6.10"><span class="ltx_text ltx_font_bold" id="S4.T2.1.6.6.10.1">76.3</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.1.7.7.1">LLaVA-1.5-13B</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.7.7.2">88.9</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.7.7.3">75.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.7.7.4">82.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.7.7.5">82.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.7.7.6">65.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.7.7.7">74.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.7.7.8">75.2</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.7.7.9">74.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.7.7.10">77.3</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.8.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T2.1.8.8.1">   +ShareGPT4V</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.2"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.8.8.2.1">89.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.8.8.3.1">75.6</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.8.8.4.1">83.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.5"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.8.8.5.1">82.7</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.8.8.6.1">65.6</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.8.8.7.1">75.7</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.8.8.8.1">75.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.1.8.8.9"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.8.8.9.1">75.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.8.8.10">77.7</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.9.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T2.1.9.9.1">   +<span class="ltx_text ltx_font_italic" id="S4.T2.1.9.9.1.1">W2C</span>
</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.2"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.2.1">89.6</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.3"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.3.1">77.6</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.4"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.4.1">84.1</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.5"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.5.1">85.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.6"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.6.1">67.2</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.7"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.7.1">77.3</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.8"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.8.1">76.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.1.9.9.9"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.9.1">76.8</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.9.9.10"><span class="ltx_text ltx_font_bold" id="S4.T2.1.9.9.10.1">79.3</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.10.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" colspan="10" id="S4.T2.1.10.10.1"><span class="ltx_text ltx_font_italic" id="S4.T2.1.10.10.1.1">High resolution setting</span></th>
</tr>
<tr class="ltx_tr" id="S4.T2.1.11.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.1.11.11.1">LLaVA-NeXT-7B</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.11.11.2"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.11.11.2.1">89.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.11.11.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.11.11.3.1">78.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.11.11.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.11.11.4.1">84.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.11.11.5"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.11.11.5.1">84.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.11.11.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.11.11.6.1">68.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.11.11.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.11.11.7.1">77.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.11.11.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.11.11.8.1">79.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.11.11.9"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.11.11.9.1">78.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.11.11.10">80.2</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.12.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T2.1.12.12.1">   +ShareGPT4V</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.12.12.2">89.4</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.12.12.3">76.8</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.12.12.4">83.5</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.12.12.5">82.1</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.12.12.6">65.9</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.12.12.7">75.5</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.12.12.8">77.5</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.1.12.12.9">77.6</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.12.12.10">78.5</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.13.13">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T2.1.13.13.1">   +<span class="ltx_text ltx_font_italic" id="S4.T2.1.13.13.1.1">W2C</span>
</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.13.13.2"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.2.1">90.9</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.13.13.3"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.3.1">81.3</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.13.13.4"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.4.1">86.4</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.13.13.5"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.5.1">85.8</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.13.13.6"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.6.1">70.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.13.13.7"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.7.1">79.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.13.13.8"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.8.1">80.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.1.13.13.9"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.9.1">80.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.13.13.10"><span class="ltx_text ltx_font_bold" id="S4.T2.1.13.13.10.1">82.0</span></td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.14.14">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T2.1.14.14.1">LLaVA-NeXT-13B</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.14.2"><span class="ltx_text ltx_font_bold" id="S4.T2.1.14.14.2.1">91.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.14.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.14.14.3.1">81.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.14.4">86.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.14.5">86.2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.14.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.14.14.6.1">71.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.14.7">79.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.14.8"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.14.14.8.1">80.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S4.T2.1.14.14.9"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.14.14.9.1">80.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.14.14.10">82.3</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.15.15">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T2.1.15.15.1">   +ShareGPT4V</th>
<td class="ltx_td ltx_align_center" id="S4.T2.1.15.15.2"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.15.15.2.1">91.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.15.15.3">80.8</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.15.15.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.15.15.4.1">86.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.15.15.5">86.0</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.15.15.6">71.1</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.15.15.7"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.1.15.15.7.1">79.6</span></td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.15.15.8">79.6</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T2.1.15.15.9">79.8</td>
<td class="ltx_td ltx_align_center" id="S4.T2.1.15.15.10">81.9</td>
</tr>
<tr class="ltx_tr" id="S4.T2.1.16.16">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T2.1.16.16.1">   +<span class="ltx_text ltx_font_italic" id="S4.T2.1.16.16.1.1">W2C</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.16.16.2">91.1</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.16.16.3"><span class="ltx_text ltx_font_bold" id="S4.T2.1.16.16.3.1">83.6</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.16.16.4"><span class="ltx_text ltx_font_bold" id="S4.T2.1.16.16.4.1">87.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.16.16.5"><span class="ltx_text ltx_font_bold" id="S4.T2.1.16.16.5.1">86.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.16.16.6"><span class="ltx_text ltx_font_bold" id="S4.T2.1.16.16.6.1">72.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.16.16.7"><span class="ltx_text ltx_font_bold" id="S4.T2.1.16.16.7.1">81.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.16.16.8"><span class="ltx_text ltx_font_bold" id="S4.T2.1.16.16.8.1">81.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S4.T2.1.16.16.9"><span class="ltx_text ltx_font_bold" id="S4.T2.1.16.16.9.1">81.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T2.1.16.16.10"><span class="ltx_text ltx_font_bold" id="S4.T2.1.16.16.10.1">83.2</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Grounding benchmarks of <span class="ltx_text ltx_font_italic" id="S4.T2.5.1">W2C </span>on LLaVA1.5 and LLaVA-NeXT under different combination of IT datasets. The best results are <span class="ltx_text ltx_font_bold" id="S4.T2.6.2">bold</span> and the second results are <span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T2.7.3">underlined</span>.</figcaption>
</figure>
<figure class="ltx_table" id="S4.T3">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T3.4">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T3.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt" id="S4.T3.3.3.4" style="padding-left:2.0pt;padding-right:2.0pt;">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.3.3.5" style="padding-left:2.0pt;padding-right:2.0pt;">DocVQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.3.3.6" style="padding-left:2.0pt;padding-right:2.0pt;">ChartQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.3.3.7" style="padding-left:2.0pt;padding-right:2.0pt;">POPE</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.3.3.8" style="padding-left:2.0pt;padding-right:2.0pt;">MMStar</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.3.3.9" style="padding-left:2.0pt;padding-right:2.0pt;">MMT-Bench</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.1.1.1" style="padding-left:2.0pt;padding-right:2.0pt;">RefCOCO<sub class="ltx_sub" id="S4.T3.1.1.1.1"><span class="ltx_text ltx_font_italic" id="S4.T3.1.1.1.1.1">val</span></sub>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.2.2.2" style="padding-left:2.0pt;padding-right:2.0pt;">RefCOOC+<sub class="ltx_sub" id="S4.T3.2.2.2.1"><span class="ltx_text ltx_font_italic" id="S4.T3.2.2.2.1.1">val</span></sub>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T3.3.3.3" style="padding-left:2.0pt;padding-right:2.0pt;">RefCOCOg<sub class="ltx_sub" id="S4.T3.3.3.3.1"><span class="ltx_text ltx_font_italic" id="S4.T3.3.3.3.1.1">val</span></sub>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T3.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T3.4.4.1" style="padding-left:2.0pt;padding-right:2.0pt;">LLaVA-NeXT-7B<sup class="ltx_sup" id="S4.T3.4.4.1.1"><span class="ltx_text ltx_font_italic" id="S4.T3.4.4.1.1.1">∗</span></sup>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.4.2" style="padding-left:2.0pt;padding-right:2.0pt;">75.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.4.3" style="padding-left:2.0pt;padding-right:2.0pt;">62.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.4.4" style="padding-left:2.0pt;padding-right:2.0pt;">87.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.4.5" style="padding-left:2.0pt;padding-right:2.0pt;">34.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.4.6" style="padding-left:2.0pt;padding-right:2.0pt;">48.2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.4.7" style="padding-left:2.0pt;padding-right:2.0pt;">84.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.4.8" style="padding-left:2.0pt;padding-right:2.0pt;">77.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.4.4.9" style="padding-left:2.0pt;padding-right:2.0pt;">78.8</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.5.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T3.4.5.1.1" style="padding-left:2.0pt;padding-right:2.0pt;">+ShareGPT4V</th>
<td class="ltx_td ltx_align_center" id="S4.T3.4.5.1.2" style="padding-left:2.0pt;padding-right:2.0pt;">75.1</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.5.1.3" style="padding-left:2.0pt;padding-right:2.0pt;">62.2</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.5.1.4" style="padding-left:2.0pt;padding-right:2.0pt;">85.8</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.5.1.5" style="padding-left:2.0pt;padding-right:2.0pt;">33.8</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.5.1.6" style="padding-left:2.0pt;padding-right:2.0pt;">49.5</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.5.1.7" style="padding-left:2.0pt;padding-right:2.0pt;">83.5</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.5.1.8" style="padding-left:2.0pt;padding-right:2.0pt;">77.3</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.5.1.9" style="padding-left:2.0pt;padding-right:2.0pt;">77.6</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.6.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T3.4.6.2.1" style="padding-left:2.0pt;padding-right:2.0pt;">+ALLaVA</th>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.2.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.6.2.2.1">76.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.2.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.6.2.3.1">63.0</span></td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.2.4" style="padding-left:2.0pt;padding-right:2.0pt;">87.3</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.2.5" style="padding-left:2.0pt;padding-right:2.0pt;">33.2</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.2.6" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.6.2.6.1">50.4</span></td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.2.7" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T3.4.6.2.7.1">85.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.2.8" style="padding-left:2.0pt;padding-right:2.0pt;">77.0</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.6.2.9" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T3.4.6.2.9.1">79.9</span></td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.7.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T3.4.7.3.1" style="padding-left:2.0pt;padding-right:2.0pt;">+Monkey</th>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.3.2" style="padding-left:2.0pt;padding-right:2.0pt;">76.4</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.3.3" style="padding-left:2.0pt;padding-right:2.0pt;">62.5</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.3.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.7.3.4.1">87.5</span></td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.3.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T3.4.7.3.5.1">35.7</span></td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.3.6" style="padding-left:2.0pt;padding-right:2.0pt;">49.6</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.3.7" style="padding-left:2.0pt;padding-right:2.0pt;">85.0</td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.3.8" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T3.4.7.3.8.1">77.4</span></td>
<td class="ltx_td ltx_align_center" id="S4.T3.4.7.3.9" style="padding-left:2.0pt;padding-right:2.0pt;">78.2</td>
</tr>
<tr class="ltx_tr" id="S4.T3.4.8.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T3.4.8.4.1" style="padding-left:2.0pt;padding-right:2.0pt;">+<span class="ltx_text ltx_font_italic" id="S4.T3.4.8.4.1.1">W2C</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.8.4.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.8.4.2.1">76.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.8.4.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.8.4.3.1">63.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.8.4.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.8.4.4.1">87.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.8.4.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.8.4.5.1">35.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.8.4.6" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T3.4.8.4.6.1">50.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.8.4.7" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.8.4.7.1">86.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.8.4.8" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.8.4.8.1">79.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T3.4.8.4.9" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T3.4.8.4.9.1">80.5</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Visual Question Answering benchmarks and Grouding benchmarks on LLaVA-NeXT-7B under more combination of SOTA IT dataset methods. The best results are <span class="ltx_text ltx_font_bold" id="S4.T3.10.1">bold</span> and the second results are <span class="ltx_text ltx_framed ltx_framed_underline" id="S4.T3.11.2">underlined</span>. <sup class="ltx_sup" id="S4.T3.12.3"><span class="ltx_text ltx_font_italic" id="S4.T3.12.3.1">∗</span></sup>: our reproduction of
LLaVA-Next, which achieves comparable performance with the original papers. To ensure a fair comparison, we randomly selected an equal amount of corresponding data from each dataset for this analysis.</figcaption>
</figure>
<figure class="ltx_table" id="S4.T4">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T4.3">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T4.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T4.3.3.4" style="padding-left:4.0pt;padding-right:4.0pt;">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt" id="S4.T4.3.3.5" style="padding-left:4.0pt;padding-right:4.0pt;">format</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.3.3.6" style="padding-left:4.0pt;padding-right:4.0pt;">MMT-Bench</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.3.3.7" style="padding-left:4.0pt;padding-right:4.0pt;"> DocVQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.3.3.8" style="padding-left:4.0pt;padding-right:4.0pt;"> TextVQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.1.1.1" style="padding-left:4.0pt;padding-right:4.0pt;"><math alttext="\text{RefCOCO}_{\text{val}}" class="ltx_Math" display="inline" id="S4.T4.1.1.1.m1.1"><semantics id="S4.T4.1.1.1.m1.1a"><msub id="S4.T4.1.1.1.m1.1.1" xref="S4.T4.1.1.1.m1.1.1.cmml"><mtext id="S4.T4.1.1.1.m1.1.1.2" xref="S4.T4.1.1.1.m1.1.1.2a.cmml">RefCOCO</mtext><mtext id="S4.T4.1.1.1.m1.1.1.3" xref="S4.T4.1.1.1.m1.1.1.3a.cmml">val</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T4.1.1.1.m1.1b"><apply id="S4.T4.1.1.1.m1.1.1.cmml" xref="S4.T4.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T4.1.1.1.m1.1.1.1.cmml" xref="S4.T4.1.1.1.m1.1.1">subscript</csymbol><ci id="S4.T4.1.1.1.m1.1.1.2a.cmml" xref="S4.T4.1.1.1.m1.1.1.2"><mtext id="S4.T4.1.1.1.m1.1.1.2.cmml" xref="S4.T4.1.1.1.m1.1.1.2">RefCOCO</mtext></ci><ci id="S4.T4.1.1.1.m1.1.1.3a.cmml" xref="S4.T4.1.1.1.m1.1.1.3"><mtext id="S4.T4.1.1.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.T4.1.1.1.m1.1.1.3">val</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.1.1.1.m1.1c">\text{RefCOCO}_{\text{val}}</annotation><annotation encoding="application/x-llamapun" id="S4.T4.1.1.1.m1.1d">RefCOCO start_POSTSUBSCRIPT val end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.2.2.2" style="padding-left:4.0pt;padding-right:4.0pt;"><math alttext="\text{RefCOCO+}_{\text{val}}" class="ltx_Math" display="inline" id="S4.T4.2.2.2.m1.1"><semantics id="S4.T4.2.2.2.m1.1a"><msub id="S4.T4.2.2.2.m1.1.1" xref="S4.T4.2.2.2.m1.1.1.cmml"><mtext id="S4.T4.2.2.2.m1.1.1.2" xref="S4.T4.2.2.2.m1.1.1.2a.cmml">RefCOCO+</mtext><mtext id="S4.T4.2.2.2.m1.1.1.3" xref="S4.T4.2.2.2.m1.1.1.3a.cmml">val</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T4.2.2.2.m1.1b"><apply id="S4.T4.2.2.2.m1.1.1.cmml" xref="S4.T4.2.2.2.m1.1.1"><csymbol cd="ambiguous" id="S4.T4.2.2.2.m1.1.1.1.cmml" xref="S4.T4.2.2.2.m1.1.1">subscript</csymbol><ci id="S4.T4.2.2.2.m1.1.1.2a.cmml" xref="S4.T4.2.2.2.m1.1.1.2"><mtext id="S4.T4.2.2.2.m1.1.1.2.cmml" xref="S4.T4.2.2.2.m1.1.1.2">RefCOCO+</mtext></ci><ci id="S4.T4.2.2.2.m1.1.1.3a.cmml" xref="S4.T4.2.2.2.m1.1.1.3"><mtext id="S4.T4.2.2.2.m1.1.1.3.cmml" mathsize="70%" xref="S4.T4.2.2.2.m1.1.1.3">val</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.2.2.2.m1.1c">\text{RefCOCO+}_{\text{val}}</annotation><annotation encoding="application/x-llamapun" id="S4.T4.2.2.2.m1.1d">RefCOCO+ start_POSTSUBSCRIPT val end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T4.3.3.3" style="padding-left:4.0pt;padding-right:4.0pt;"><math alttext="\text{RefCOCOg}_{\text{val}}" class="ltx_Math" display="inline" id="S4.T4.3.3.3.m1.1"><semantics id="S4.T4.3.3.3.m1.1a"><msub id="S4.T4.3.3.3.m1.1.1" xref="S4.T4.3.3.3.m1.1.1.cmml"><mtext id="S4.T4.3.3.3.m1.1.1.2" xref="S4.T4.3.3.3.m1.1.1.2a.cmml">RefCOCOg</mtext><mtext id="S4.T4.3.3.3.m1.1.1.3" xref="S4.T4.3.3.3.m1.1.1.3a.cmml">val</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T4.3.3.3.m1.1b"><apply id="S4.T4.3.3.3.m1.1.1.cmml" xref="S4.T4.3.3.3.m1.1.1"><csymbol cd="ambiguous" id="S4.T4.3.3.3.m1.1.1.1.cmml" xref="S4.T4.3.3.3.m1.1.1">subscript</csymbol><ci id="S4.T4.3.3.3.m1.1.1.2a.cmml" xref="S4.T4.3.3.3.m1.1.1.2"><mtext id="S4.T4.3.3.3.m1.1.1.2.cmml" xref="S4.T4.3.3.3.m1.1.1.2">RefCOCOg</mtext></ci><ci id="S4.T4.3.3.3.m1.1.1.3a.cmml" xref="S4.T4.3.3.3.m1.1.1.3"><mtext id="S4.T4.3.3.3.m1.1.1.3.cmml" mathsize="70%" xref="S4.T4.3.3.3.m1.1.1.3">val</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.3.3.3.m1.1c">\text{RefCOCOg}_{\text{val}}</annotation><annotation encoding="application/x-llamapun" id="S4.T4.3.3.3.m1.1d">RefCOCOg start_POSTSUBSCRIPT val end_POSTSUBSCRIPT</annotation></semantics></math></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T4.3.4.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T4.3.4.1.1" style="padding-left:4.0pt;padding-right:4.0pt;">LLaVA-NeXT-7B</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T4.3.4.1.2" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_italic" id="S4.T4.3.4.1.2.1">single</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.4.1.3" style="padding-left:4.0pt;padding-right:4.0pt;">49.2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.4.1.4" style="padding-left:4.0pt;padding-right:4.0pt;">75.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.4.1.5" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.3.4.1.5.1">63.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.4.1.6" style="padding-left:4.0pt;padding-right:4.0pt;">85.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.4.1.7" style="padding-left:4.0pt;padding-right:4.0pt;">78.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.4.1.8" style="padding-left:4.0pt;padding-right:4.0pt;">79.5</td>
</tr>
<tr class="ltx_tr" id="S4.T4.3.5.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.5.2.1" style="padding-left:4.0pt;padding-right:4.0pt;">LLaVA-NeXT-7B</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S4.T4.3.5.2.2" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_italic" id="S4.T4.3.5.2.2.1">multi</span></th>
<td class="ltx_td ltx_align_center" id="S4.T4.3.5.2.3" style="padding-left:4.0pt;padding-right:4.0pt;">48.8</td>
<td class="ltx_td ltx_align_center" id="S4.T4.3.5.2.4" style="padding-left:4.0pt;padding-right:4.0pt;">72.0</td>
<td class="ltx_td ltx_align_center" id="S4.T4.3.5.2.5" style="padding-left:4.0pt;padding-right:4.0pt;">61.4</td>
<td class="ltx_td ltx_align_center" id="S4.T4.3.5.2.6" style="padding-left:4.0pt;padding-right:4.0pt;">82.4</td>
<td class="ltx_td ltx_align_center" id="S4.T4.3.5.2.7" style="padding-left:4.0pt;padding-right:4.0pt;">73.8</td>
<td class="ltx_td ltx_align_center" id="S4.T4.3.5.2.8" style="padding-left:4.0pt;padding-right:4.0pt;">76.8</td>
</tr>
<tr class="ltx_tr" id="S4.T4.3.6.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="S4.T4.3.6.3.1" style="padding-left:4.0pt;padding-right:4.0pt;">LLaVA-NeXT-7B</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T4.3.6.3.2" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_italic" id="S4.T4.3.6.3.2.1">code</span></th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T4.3.6.3.3" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.3.6.3.3.1">50.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T4.3.6.3.4" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.3.6.3.4.1">76.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T4.3.6.3.5" style="padding-left:4.0pt;padding-right:4.0pt;">63.7</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T4.3.6.3.6" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.3.6.3.6.1">86.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T4.3.6.3.7" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.3.6.3.7.1">79.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T4.3.6.3.8" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T4.3.6.3.8.1">80.5</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Ablation study of <span class="ltx_text ltx_font_italic" id="S4.T4.6.1">W2C </span>on using different data organization format. <span class="ltx_text ltx_font_italic" id="S4.T4.7.2">single/multi/code</span>: constructed data are organized in single-round conversations/multi-round conversations/python code format.</figcaption>
</figure>
</section>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Main Results</h3>
<section class="ltx_paragraph" id="S4.SS2.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Effectiveness of <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.1.1">W2C </span>data improve various VLMs in Visual Question Answering benchmarks</h4>
<div class="ltx_para" id="S4.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S4.SS2.SSS0.Px1.p1.1">We show a quantitative comparison results of the trained VLMs with and without the ShareGPT4V dataset, as well as <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.p1.1.1">W2C </span>for replacement of the ShareGPT4V during the IT training stage in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T1" title="Table 1 ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">1</span></a>.
<span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.p1.1.2">W2C </span>consistently improves the performance on different settings in both LLaVA-1.5 and LLaVA-NeXT. Especially, in the high resolution setting, our <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.p1.1.3">W2C </span>presents impressive performance improvement on multi-modal visual understanding benchmarks such as MMT Bench, MMStar, and MME.
Specifically, <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.p1.1.4">W2C </span>can bring improvement in 7 out of 9 benchmarks on LLaVA-NeXT-7B and 6 out of 9 on LLaVA-NeXT-13B. Especially, on LLaVA-NeXT-13B, <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.p1.1.5">W2C </span>improves DocVQA by 0.7 ANLS, ChartQA by 1.8 accuracy, MMT Bench by 0.8 accuracy and MME by 23 points compared to the reproduction results of LLaVA-NeXT. More benchmarks results are shown in <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A2.T8" title="Table 8 ‣ B.1 More Visual Question Answering Benchmarks ‣ Appendix B More experiments of W2C . ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">8</span></a>.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS2.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">
<span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px2.1.1">W2C </span>data show impressive performance on Grounding benchmarks</h4>
<div class="ltx_para" id="S4.SS2.SSS0.Px2.p1">
<p class="ltx_p" id="S4.SS2.SSS0.Px2.p1.1">We present the performance of the VLMs
on Grounding benchmarks in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T2" title="Table 2 ‣ Data Processing Details ‣ 4.1 Experimental Setup ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">2</span></a>. The task of referential expression comprehension necessitates that the model accurately identifies and localizes the object described.
Our models demonstrate their exceptional capability for detailed image recognition and localization by undergoing evaluation across various referential expression comprehension benchmarks, including RefCOCO, RefCOCO+, and RefCOCOg.
Benefit from the entity-enteric generation of local captions and the presence of local bounding box information, our model achieved an average improvement of 1.5/1.6 average IoU on LLaVA-1.5 7B/13B and 3.5/1.3 average IoU on LLaVA-NeXT-7B/13B.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS2.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">Comparison results of more data generation methods and <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px3.1.1">W2C </span>on LLaVA-NeXT-7B model under different benchmarks.</h4>
<div class="ltx_para" id="S4.SS2.SSS0.Px3.p1">
<p class="ltx_p" id="S4.SS2.SSS0.Px3.p1.1">We show more quantitative results on the LLaVA-NeXT-7B baseline, employing more data generation methods (ALLaVA and Monkey) that utilize the GPT API for data annotation. To ensure a fair comparison, we randomly selected an equal amount of corresponding data from each dataset. We reported on representative Visual Question Answering and Grounding benchmarks and achieved the best outcomes in 7 out of 8 benchmarks. <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px3.p1.1.1">W2C </span>still gets comparable results compared to ALLaVA and gets better results on Grounding benchmarks.</p>
</div>
<figure class="ltx_table" id="S4.T5">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T5.3">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T5.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="S4.T5.3.3.4" style="padding-left:2.0pt;padding-right:2.0pt;">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.3.3.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_italic" id="S4.T5.3.3.5.1">re-ranking</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" id="S4.T5.3.3.6" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_italic" id="S4.T5.3.3.6.1">counting</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.3.3.7" style="padding-left:2.0pt;padding-right:2.0pt;">MMT-Bench</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.3.3.8" style="padding-left:2.0pt;padding-right:2.0pt;"> DocVQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.3.3.9" style="padding-left:2.0pt;padding-right:2.0pt;"> TextVQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.1.1.1" style="padding-left:2.0pt;padding-right:2.0pt;"><math alttext="\text{RefCOCO}_{\text{val}}" class="ltx_Math" display="inline" id="S4.T5.1.1.1.m1.1"><semantics id="S4.T5.1.1.1.m1.1a"><msub id="S4.T5.1.1.1.m1.1.1" xref="S4.T5.1.1.1.m1.1.1.cmml"><mtext id="S4.T5.1.1.1.m1.1.1.2" xref="S4.T5.1.1.1.m1.1.1.2a.cmml">RefCOCO</mtext><mtext id="S4.T5.1.1.1.m1.1.1.3" xref="S4.T5.1.1.1.m1.1.1.3a.cmml">val</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T5.1.1.1.m1.1b"><apply id="S4.T5.1.1.1.m1.1.1.cmml" xref="S4.T5.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T5.1.1.1.m1.1.1.1.cmml" xref="S4.T5.1.1.1.m1.1.1">subscript</csymbol><ci id="S4.T5.1.1.1.m1.1.1.2a.cmml" xref="S4.T5.1.1.1.m1.1.1.2"><mtext id="S4.T5.1.1.1.m1.1.1.2.cmml" xref="S4.T5.1.1.1.m1.1.1.2">RefCOCO</mtext></ci><ci id="S4.T5.1.1.1.m1.1.1.3a.cmml" xref="S4.T5.1.1.1.m1.1.1.3"><mtext id="S4.T5.1.1.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.T5.1.1.1.m1.1.1.3">val</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T5.1.1.1.m1.1c">\text{RefCOCO}_{\text{val}}</annotation><annotation encoding="application/x-llamapun" id="S4.T5.1.1.1.m1.1d">RefCOCO start_POSTSUBSCRIPT val end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.2.2.2" style="padding-left:2.0pt;padding-right:2.0pt;"><math alttext="\text{RefCOCO+}_{\text{val}}" class="ltx_Math" display="inline" id="S4.T5.2.2.2.m1.1"><semantics id="S4.T5.2.2.2.m1.1a"><msub id="S4.T5.2.2.2.m1.1.1" xref="S4.T5.2.2.2.m1.1.1.cmml"><mtext id="S4.T5.2.2.2.m1.1.1.2" xref="S4.T5.2.2.2.m1.1.1.2a.cmml">RefCOCO+</mtext><mtext id="S4.T5.2.2.2.m1.1.1.3" xref="S4.T5.2.2.2.m1.1.1.3a.cmml">val</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T5.2.2.2.m1.1b"><apply id="S4.T5.2.2.2.m1.1.1.cmml" xref="S4.T5.2.2.2.m1.1.1"><csymbol cd="ambiguous" id="S4.T5.2.2.2.m1.1.1.1.cmml" xref="S4.T5.2.2.2.m1.1.1">subscript</csymbol><ci id="S4.T5.2.2.2.m1.1.1.2a.cmml" xref="S4.T5.2.2.2.m1.1.1.2"><mtext id="S4.T5.2.2.2.m1.1.1.2.cmml" xref="S4.T5.2.2.2.m1.1.1.2">RefCOCO+</mtext></ci><ci id="S4.T5.2.2.2.m1.1.1.3a.cmml" xref="S4.T5.2.2.2.m1.1.1.3"><mtext id="S4.T5.2.2.2.m1.1.1.3.cmml" mathsize="70%" xref="S4.T5.2.2.2.m1.1.1.3">val</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T5.2.2.2.m1.1c">\text{RefCOCO+}_{\text{val}}</annotation><annotation encoding="application/x-llamapun" id="S4.T5.2.2.2.m1.1d">RefCOCO+ start_POSTSUBSCRIPT val end_POSTSUBSCRIPT</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T5.3.3.3" style="padding-left:2.0pt;padding-right:2.0pt;"><math alttext="\text{RefCOCOg}_{\text{val}}" class="ltx_Math" display="inline" id="S4.T5.3.3.3.m1.1"><semantics id="S4.T5.3.3.3.m1.1a"><msub id="S4.T5.3.3.3.m1.1.1" xref="S4.T5.3.3.3.m1.1.1.cmml"><mtext id="S4.T5.3.3.3.m1.1.1.2" xref="S4.T5.3.3.3.m1.1.1.2a.cmml">RefCOCOg</mtext><mtext id="S4.T5.3.3.3.m1.1.1.3" xref="S4.T5.3.3.3.m1.1.1.3a.cmml">val</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T5.3.3.3.m1.1b"><apply id="S4.T5.3.3.3.m1.1.1.cmml" xref="S4.T5.3.3.3.m1.1.1"><csymbol cd="ambiguous" id="S4.T5.3.3.3.m1.1.1.1.cmml" xref="S4.T5.3.3.3.m1.1.1">subscript</csymbol><ci id="S4.T5.3.3.3.m1.1.1.2a.cmml" xref="S4.T5.3.3.3.m1.1.1.2"><mtext id="S4.T5.3.3.3.m1.1.1.2.cmml" xref="S4.T5.3.3.3.m1.1.1.2">RefCOCOg</mtext></ci><ci id="S4.T5.3.3.3.m1.1.1.3a.cmml" xref="S4.T5.3.3.3.m1.1.1.3"><mtext id="S4.T5.3.3.3.m1.1.1.3.cmml" mathsize="70%" xref="S4.T5.3.3.3.m1.1.1.3">val</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T5.3.3.3.m1.1c">\text{RefCOCOg}_{\text{val}}</annotation><annotation encoding="application/x-llamapun" id="S4.T5.3.3.3.m1.1d">RefCOCOg start_POSTSUBSCRIPT val end_POSTSUBSCRIPT</annotation></semantics></math></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T5.3.4.1">
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.T5.3.4.1.1" style="padding-left:2.0pt;padding-right:2.0pt;">LLaVA-NeXT-7B</td>
<td class="ltx_td ltx_border_t" id="S4.T5.3.4.1.2" style="padding-left:2.0pt;padding-right:2.0pt;"></td>
<td class="ltx_td ltx_border_r ltx_border_t" id="S4.T5.3.4.1.3" style="padding-left:2.0pt;padding-right:2.0pt;"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.3.4.1.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.3.4.1.4.1">50.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.3.4.1.5" style="padding-left:2.0pt;padding-right:2.0pt;">75.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.3.4.1.6" style="padding-left:2.0pt;padding-right:2.0pt;">62.7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.3.4.1.7" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.3.4.1.7.1">86.6</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.3.4.1.8" style="padding-left:2.0pt;padding-right:2.0pt;">79.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T5.3.4.1.9" style="padding-left:2.0pt;padding-right:2.0pt;">79.7</td>
</tr>
<tr class="ltx_tr" id="S4.T5.3.5.2">
<td class="ltx_td ltx_align_left" id="S4.T5.3.5.2.1" style="padding-left:2.0pt;padding-right:2.0pt;">LLaVA-NeXT-7B</td>
<td class="ltx_td" id="S4.T5.3.5.2.2" style="padding-left:2.0pt;padding-right:2.0pt;"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S4.T5.3.5.2.3" style="padding-left:2.0pt;padding-right:2.0pt;">✓</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.5.2.4" style="padding-left:2.0pt;padding-right:2.0pt;">49.4</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.5.2.5" style="padding-left:2.0pt;padding-right:2.0pt;">76.3</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.5.2.6" style="padding-left:2.0pt;padding-right:2.0pt;">63.4</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.5.2.7" style="padding-left:2.0pt;padding-right:2.0pt;">86.1</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.5.2.8" style="padding-left:2.0pt;padding-right:2.0pt;">78.5</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.5.2.9" style="padding-left:2.0pt;padding-right:2.0pt;">80.4</td>
</tr>
<tr class="ltx_tr" id="S4.T5.3.6.3">
<td class="ltx_td ltx_align_left" id="S4.T5.3.6.3.1" style="padding-left:2.0pt;padding-right:2.0pt;">LLaVA-NeXT-7B</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.6.3.2" style="padding-left:2.0pt;padding-right:2.0pt;">✓</td>
<td class="ltx_td ltx_border_r" id="S4.T5.3.6.3.3" style="padding-left:2.0pt;padding-right:2.0pt;"></td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.6.3.4" style="padding-left:2.0pt;padding-right:2.0pt;">49.4</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.6.3.5" style="padding-left:2.0pt;padding-right:2.0pt;">75.3</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.6.3.6" style="padding-left:2.0pt;padding-right:2.0pt;">63.2</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.6.3.7" style="padding-left:2.0pt;padding-right:2.0pt;">86.5</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.6.3.8" style="padding-left:2.0pt;padding-right:2.0pt;">79.2</td>
<td class="ltx_td ltx_align_center" id="S4.T5.3.6.3.9" style="padding-left:2.0pt;padding-right:2.0pt;">79.7</td>
</tr>
<tr class="ltx_tr" id="S4.T5.3.7.4">
<td class="ltx_td ltx_align_left ltx_border_b" id="S4.T5.3.7.4.1" style="padding-left:2.0pt;padding-right:2.0pt;">LLaVA-NeXT-7B</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T5.3.7.4.2" style="padding-left:2.0pt;padding-right:2.0pt;">✓</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S4.T5.3.7.4.3" style="padding-left:2.0pt;padding-right:2.0pt;">✓</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T5.3.7.4.4" style="padding-left:2.0pt;padding-right:2.0pt;">50.1</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T5.3.7.4.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.3.7.4.5.1">76.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T5.3.7.4.6" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.3.7.4.6.1">63.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T5.3.7.4.7" style="padding-left:2.0pt;padding-right:2.0pt;">86.4</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T5.3.7.4.8" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.3.7.4.8.1">79.5</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T5.3.7.4.9" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T5.3.7.4.9.1">80.5</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Ablation study of <span class="ltx_text ltx_font_italic" id="S4.T5.7.1">W2C </span>when combined the different consistency filtering strategy. <span class="ltx_text ltx_font_italic" id="S4.T5.8.2">re-ranking</span>: caption re-ranking. <span class="ltx_text ltx_font_italic" id="S4.T5.9.3">counting</span>: counting filtering.</figcaption>
</figure>
<figure class="ltx_table" id="S4.T6">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T6.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T6.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt" id="S4.T6.1.1.1.1" rowspan="2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S4.T6.1.1.1.1.1">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="2" id="S4.T6.1.1.1.2" style="padding-left:5.5pt;padding-right:5.5pt;">GQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="2" id="S4.T6.1.1.1.3" style="padding-left:5.5pt;padding-right:5.5pt;">MME</th>
</tr>
<tr class="ltx_tr" id="S4.T6.1.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="S4.T6.1.2.2.1" style="padding-left:5.5pt;padding-right:5.5pt;">2-shot</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="S4.T6.1.2.2.2" style="padding-left:5.5pt;padding-right:5.5pt;">4-shot</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="S4.T6.1.2.2.3" style="padding-left:5.5pt;padding-right:5.5pt;">2-shot</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="S4.T6.1.2.2.4" style="padding-left:5.5pt;padding-right:5.5pt;">4-shot</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T6.1.3.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T6.1.3.1.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_italic" id="S4.T6.1.3.1.1.1">LLaVA-1.5-7B</span></th>
<td class="ltx_td ltx_border_t" id="S4.T6.1.3.1.2" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.3.1.3" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.3.1.4" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.3.1.5" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.4.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.4.2.1" style="padding-left:5.5pt;padding-right:5.5pt;">detail caption</th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.2.2" style="padding-left:5.5pt;padding-right:5.5pt;">34.79</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.2.3" style="padding-left:5.5pt;padding-right:5.5pt;">39.67</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.2.4" style="padding-left:5.5pt;padding-right:5.5pt;">1136</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.2.5" style="padding-left:5.5pt;padding-right:5.5pt;">1098</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.5.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.5.3.1" style="padding-left:5.5pt;padding-right:5.5pt;">code parsing</th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.3.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.5.3.2.1">41.06</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.3.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.5.3.3.1">43.40</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.3.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.5.3.4.1">1139</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.3.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.5.3.5.1">1169</span></td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.6.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.6.4.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_italic" id="S4.T6.1.6.4.1.1">LLaVA-1.5-13B</span></th>
<td class="ltx_td ltx_border_t" id="S4.T6.1.6.4.2" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.6.4.3" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.6.4.4" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.6.4.5" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.7.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.7.5.1" style="padding-left:5.5pt;padding-right:5.5pt;">detail caption</th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.7.5.2" style="padding-left:5.5pt;padding-right:5.5pt;">34.00</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.7.5.3" style="padding-left:5.5pt;padding-right:5.5pt;">40.87</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.7.5.4" style="padding-left:5.5pt;padding-right:5.5pt;">1192</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.7.5.5" style="padding-left:5.5pt;padding-right:5.5pt;">1170</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.8.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.8.6.1" style="padding-left:5.5pt;padding-right:5.5pt;">code parsing</th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.6.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.8.6.2.1">39.12</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.6.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.8.6.3.1">43.70</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.6.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.8.6.4.1">1199</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.6.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.8.6.5.1">1224</span></td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.9.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.9.7.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_italic" id="S4.T6.1.9.7.1.1">LLaVA-NeXT-7B</span></th>
<td class="ltx_td ltx_border_t" id="S4.T6.1.9.7.2" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.9.7.3" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.9.7.4" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.9.7.5" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.10.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.10.8.1" style="padding-left:5.5pt;padding-right:5.5pt;">detail caption</th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.8.2" style="padding-left:5.5pt;padding-right:5.5pt;">34.89</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.8.3" style="padding-left:5.5pt;padding-right:5.5pt;">40.70</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.8.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.10.8.4.1">1174</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.8.5" style="padding-left:5.5pt;padding-right:5.5pt;">1105</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.11.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.11.9.1" style="padding-left:5.5pt;padding-right:5.5pt;">code parsing</th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.11.9.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.11.9.2.1">40.07</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.11.9.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.11.9.3.1">45.07</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.11.9.4" style="padding-left:5.5pt;padding-right:5.5pt;">1154</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.11.9.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.11.9.5.1">1189</span></td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.12.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.12.10.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_italic" id="S4.T6.1.12.10.1.1">LLaVA-NeXT-13B</span></th>
<td class="ltx_td ltx_border_t" id="S4.T6.1.12.10.2" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.12.10.3" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.12.10.4" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="S4.T6.1.12.10.5" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.13.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.13.11.1" style="padding-left:5.5pt;padding-right:5.5pt;">detail caption</th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.11.2" style="padding-left:5.5pt;padding-right:5.5pt;">31.63</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.11.3" style="padding-left:5.5pt;padding-right:5.5pt;">40.07</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.11.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.13.11.4.1">1193</span></td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.11.5" style="padding-left:5.5pt;padding-right:5.5pt;">1127</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.14.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T6.1.14.12.1" style="padding-left:5.5pt;padding-right:5.5pt;">code parsing</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.14.12.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.14.12.2.1">39.80</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.14.12.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.14.12.3.1">42.83</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.14.12.4" style="padding-left:5.5pt;padding-right:5.5pt;">1151</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.14.12.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S4.T6.1.14.12.5.1">1190</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>Comparison between detail caption and code parsing ability in few-shot evaluations on MME and GQA without referring to the image.</figcaption>
</figure>
</section>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Ablation Studies</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">Our results show advantageous performance in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T1" title="Table 1 ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">1</span></a> and Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T2" title="Table 2 ‣ Data Processing Details ‣ 4.1 Experimental Setup ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">2</span></a>, but our analysis of these results shows the limitations of the base model’s OCR capability on LLaVA-1.5.
We proceed with further ablation studies on LLaVA-Next-7B for the constraints on resources, which optimally demonstrate the full benefits of our pipeline and consistency filtering in a comprehensive manner.</p>
</div>
<section class="ltx_paragraph" id="S4.SS3.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Organizing data into the python code format presents better performance</h4>
<div class="ltx_para" id="S4.SS3.SSS0.Px1.p1">
<p class="ltx_p" id="S4.SS3.SSS0.Px1.p1.1">We discussed in Section <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S3.SS2" title="3.2 Self-Instructed Information Extraction ‣ 3 Method ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">3.2</span></a> the strengths of choosing the code format for the representation of structured data. In
Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T4" title="Table 4 ‣ Data Processing Details ‣ 4.1 Experimental Setup ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">4</span></a>, we quantitatively compare our data format with a single-round dialogue format and a multi-round dialogue format.
By using the python code as data construction format, we observe improved performance in both visual grounding benchmarks and visual question answer benchmarks on LLaVA-NeXT-7B. Especially, we improved the MMT-Bench by 0.9/1.3 accuracy and DocVQA by 1.1/4.5 ANLS compared to the <span class="ltx_text ltx_font_italic" id="S4.SS3.SSS0.Px1.p1.1.1">single/multi</span> data format.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS3.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Filtering introduces better downstream benchmarks performance</h4>
<div class="ltx_para" id="S4.SS3.SSS0.Px2.p1">
<p class="ltx_p" id="S4.SS3.SSS0.Px2.p1.3">We show the ablation of different consistency filtering choices in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T5" title="Table 5 ‣ Comparison results of more data generation methods and W2C on LLaVA-NeXT-7B model under different benchmarks. ‣ 4.2 Main Results ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">5</span></a>.
Similarly, the performance of LLaVA-NeXT-7B on the both visual grounding benchmarks and visual question answering benchmarks highlights the effectiveness and necessity of our consistency filtering approaches. When two filtering strategies are combined, we achieve the best performance by improving DocVQA with 1.0 ANLS, TextVQA with 1.0 accuracy, RefCOCO+<sub class="ltx_sub" id="S4.SS3.SSS0.Px2.p1.3.1"><span class="ltx_text ltx_font_italic" id="S4.SS3.SSS0.Px2.p1.3.1.1">val</span></sub> with 0.5 IOU and RefCOCOg<sub class="ltx_sub" id="S4.SS3.SSS0.Px2.p1.3.2"><span class="ltx_text ltx_font_italic" id="S4.SS3.SSS0.Px2.p1.3.2.1">val</span></sub> with 0.8 IOU. We also achieve comparable results on MMT-Bench and RefCOCO<sub class="ltx_sub" id="S4.SS3.SSS0.Px2.p1.3.3"><span class="ltx_text ltx_font_italic" id="S4.SS3.SSS0.Px2.p1.3.3.1">val</span></sub> with little performance degradation.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Code Parsing Ability Evaluation</h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">We further present better cross-modality equivalence between image and text brought by the new code parsing ability. An ideal caption of the image should enable the ability to question without referring to the image. Therefore, we compare the quality of the code output and widely used detail caption output in the ability to handle downstream tasks via in-context learning on the same Large Language Model.</p>
</div>
<section class="ltx_paragraph" id="S4.SS4.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Experimental Setting</h4>
<div class="ltx_para" id="S4.SS4.SSS0.Px1.p1">
<p class="ltx_p" id="S4.SS4.SSS0.Px1.p1.1">We conduct experiments on both LLaVA-1.5-7B/13B and LLaVA-NeXT-7B/13B on two widely used Visual Question Answering benchmarks, including GQA and the perception subset of MME. Due to the support of 32k long context and satisfying performance in the open-source community, we use Qwen-1.5-14B <cite class="ltx_cite ltx_citemacro_cite">Bai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib2" title="">2023</a>); Team (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib49" title="">2024</a>)</cite> as the problem-solving LLM, and prompt it with few shot inputs. Each shot can be represented as a combination of <math alttext="\{\text{description, question, answer}\}" class="ltx_Math" display="inline" id="S4.SS4.SSS0.Px1.p1.1.m1.1"><semantics id="S4.SS4.SSS0.Px1.p1.1.m1.1a"><mrow id="S4.SS4.SSS0.Px1.p1.1.m1.1.2.2" xref="S4.SS4.SSS0.Px1.p1.1.m1.1.2.1.cmml"><mo id="S4.SS4.SSS0.Px1.p1.1.m1.1.2.2.1" stretchy="false" xref="S4.SS4.SSS0.Px1.p1.1.m1.1.2.1.cmml">{</mo><mtext id="S4.SS4.SSS0.Px1.p1.1.m1.1.1" xref="S4.SS4.SSS0.Px1.p1.1.m1.1.1a.cmml">description, question, answer</mtext><mo id="S4.SS4.SSS0.Px1.p1.1.m1.1.2.2.2" stretchy="false" xref="S4.SS4.SSS0.Px1.p1.1.m1.1.2.1.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.SSS0.Px1.p1.1.m1.1b"><set id="S4.SS4.SSS0.Px1.p1.1.m1.1.2.1.cmml" xref="S4.SS4.SSS0.Px1.p1.1.m1.1.2.2"><ci id="S4.SS4.SSS0.Px1.p1.1.m1.1.1a.cmml" xref="S4.SS4.SSS0.Px1.p1.1.m1.1.1"><mtext id="S4.SS4.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S4.SS4.SSS0.Px1.p1.1.m1.1.1">description, question, answer</mtext></ci></set></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.SSS0.Px1.p1.1.m1.1c">\{\text{description, question, answer}\}</annotation><annotation encoding="application/x-llamapun" id="S4.SS4.SSS0.Px1.p1.1.m1.1d">{ description, question, answer }</annotation></semantics></math>. For the detail caption output, we use the models trained with both the original dataset and the ShareGPT4V dataset to improve their detail caption abilities. For the code parsing output, we replace ShareGPT4V with our proposed <span class="ltx_text ltx_font_italic" id="S4.SS4.SSS0.Px1.p1.1.1">W2C </span>dataset.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS4.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">The code parsing ability of VLMs presents much better few-shot performance.</h4>
<div class="ltx_para" id="S4.SS4.SSS0.Px2.p1">
<p class="ltx_p" id="S4.SS4.SSS0.Px2.p1.1">From Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#S4.T6" title="Table 6 ‣ Comparison results of more data generation methods and W2C on LLaVA-NeXT-7B model under different benchmarks. ‣ 4.2 Main Results ‣ 4 Experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">6</span></a>, the code parsing output shows significant improvement when compared with using the detail caption output. On the binary classification task for the visual perception subset of MME, the code parsing ability achieves comparable or better performance in various settings. On the free generation VQA task, GQA, using the code parsing output can bring clear accuracy gain across different model size and architectures. Especially, on the 2-shot evaluation of GQA on LLaVA-NEXT-13B, the code parsing output by model trained with <span class="ltx_text ltx_font_italic" id="S4.SS4.SSS0.Px2.p1.1.1">W2C </span>achieves 8.2 accuracy improvement compared to baseline, indicating that the code-parsing ability present improved performance in presenting the details of one image. More benchmarks results are shown in <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A2.T9" title="Table 9 ‣ B.2 Code Parsing Ability Evaluation ‣ Appendix B More experiments of W2C . ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">9</span></a>.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Conclusion</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">This paper presents <span class="ltx_text ltx_font_italic" id="S5.p1.1.1">W2C </span>, an enhanced data construction pipeline that only leverages existing VLMs themselves for detail and compositional captions for an image, which is further organized in Python code format. We present that existing VLMs can improve themselves on the understanding benchmarks in various scenarios, significantly reducing the need for a mix of visual specialists and heavy human annotations. Moreover, additional experiments show that the new code parsing ability of VLMs presents better capability in fully describing the image, with notable improvement in the few-shot evaluation on downstream tasks when the raw images are not provided. Our proposed <span class="ltx_text ltx_font_italic" id="S5.p1.1.2">W2C </span>not only enhances the original capabilities on the widely used multi-modal understanding benchmarks but also endows existing VLMs with detailed and executable multi-modal parsing ability.</p>
</div>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Limitation</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">Despite the advancements in improved multi-modal understanding benchmarks and new code parsing ability, <span class="ltx_text ltx_font_italic" id="S6.p1.1.1">W2C </span>can be further improved in some aspects.</p>
<ul class="ltx_itemize" id="S6.I1">
<li class="ltx_item" id="S6.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S6.I1.i1.p1">
<p class="ltx_p" id="S6.I1.i1.p1.1">In this paper, we directly use the ShareGPT4V dataset images for a fair comparison with ShareGPT4V. However, it contains fewer OCR-centric images, limiting the final performance. Further investigation could be taken in studying the performance of <span class="ltx_text ltx_font_italic" id="S6.I1.i1.p1.1.1">W2C </span>on more distribution of unlabeled datasets.</p>
</div>
</li>
<li class="ltx_item" id="S6.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S6.I1.i2.p1">
<p class="ltx_p" id="S6.I1.i2.p1.1">The experiments are mainly conducted on the SOTA open-source VLM structures, i.e., the LLaVA series which use MLP projectors for multi-modal alignment. The effectiveness of <span class="ltx_text ltx_font_italic" id="S6.I1.i2.p1.1.1">W2C </span>can be further investigated on other VLM structures.</p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S6.p2">
<p class="ltx_p" id="S6.p2.1">Given the promising performance of <span class="ltx_text ltx_font_italic" id="S6.p2.1.1">W2C </span>on evaluation benchmarks, we would like to explore a more high-quality and diverse data generation pipeline in future investigations.</p>
</div>
<section class="ltx_paragraph" id="S6.SS0.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Acknowledgments.</h4>
<div class="ltx_para" id="S6.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S6.SS0.SSS0.Px1.p1.1">This work is partially supported by the National Natural Science Foundation of China (U21A20515, 62476262, 62102393, 62206263, 62271467, 2306297, 62306296), Beijing Natural Science Foundation (4242053, L242096), China Postdoctoral Science Foundation (2022T150639) and the Fundamental Research Funds for the Central Universities.</p>
</div>
</section>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Achiam et al. (2023)</span>
<span class="ltx_bibblock">
Josh Achiam, Steven Adler, Sandhini Agarwal, Lama Ahmad, Ilge Akkaya, Florencia Leoni Aleman, Diogo Almeida, Janko Altenschmidt, Sam Altman, Shyamal Anadkat, et al. 2023.

</span>
<span class="ltx_bibblock">Gpt-4 technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">arXiv preprint arXiv:2303.08774</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2023)</span>
<span class="ltx_bibblock">
Jinze Bai, Shuai Bai, Yunfei Chu, Zeyu Cui, Kai Dang, Xiaodong Deng, Yang Fan, Wenbin Ge, Yu Han, Fei Huang, et al. 2023.

</span>
<span class="ltx_bibblock">Qwen technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv preprint arXiv:2309.16609</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Betker et al. (2023)</span>
<span class="ltx_bibblock">
James Betker, Gabriel Goh, Li Jing, Tim Brooks, Jianfeng Wang, Linjie Li, Long Ouyang, Juntang Zhuang, Joyce Lee, Yufei Guo, et al. 2023.

</span>
<span class="ltx_bibblock">Improving image generation with better captions.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Computer Science. https://cdn. openai. com/papers/dall-e-3. pdf</em>, 2(3):8.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bird (2006)</span>
<span class="ltx_bibblock">
Steven Bird. 2006.

</span>
<span class="ltx_bibblock">Nltk: the natural language toolkit.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">Proceedings of the COLING/ACL 2006 Interactive Presentation Sessions</em>, pages 69–72.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2024a)</span>
<span class="ltx_bibblock">
Guiming Hardy Chen, Shunian Chen, Ruifei Zhang, Junying Chen, Xiangbo Wu, Zhiyi Zhang, Zhihong Chen, Jianquan Li, Xiang Wan, and Benyou Wang. 2024a.

</span>
<span class="ltx_bibblock">Allava: Harnessing gpt4v-synthesized data for a lite vision-language model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">arXiv preprint arXiv:2402.11684</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2024b)</span>
<span class="ltx_bibblock">
Lin Chen, Jinsong Li, Xiaoyi Dong, Pan Zhang, Yuhang Zang, Zehui Chen, Haodong Duan, Jiaqi Wang, Yu Qiao, Dahua Lin, et al. 2024b.

</span>
<span class="ltx_bibblock">Are we on the right way for evaluating large vision-language models?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">arXiv preprint arXiv:2403.20330</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2023a)</span>
<span class="ltx_bibblock">
Lin Chen, Jisong Li, Xiaoyi Dong, Pan Zhang, Conghui He, Jiaqi Wang, Feng Zhao, and Dahua Lin. 2023a.

</span>
<span class="ltx_bibblock">Sharegpt4v: Improving large multi-modal models with better captions.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">arXiv preprint arXiv:2311.12793</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2023b)</span>
<span class="ltx_bibblock">
Yangyi Chen, Xingyao Wang, Manling Li, Derek Hoiem, and Heng Ji. 2023b.

</span>
<span class="ltx_bibblock">Vistruct: Visual structural knowledge extraction via curriculum guided code-vision representation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 13342–13357.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2024c)</span>
<span class="ltx_bibblock">
Zixiang Chen, Yihe Deng, Huizhuo Yuan, Kaixuan Ji, and Quanquan Gu. 2024c.

</span>
<span class="ltx_bibblock">Self-play fine-tuning converts weak language models to strong language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">arXiv preprint arXiv:2401.01335</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chiang et al. (2023)</span>
<span class="ltx_bibblock">
Wei-Lin Chiang, Zhuohan Li, Zi Lin, Ying Sheng, Zhanghao Wu, Hao Zhang, Lianmin Zheng, Siyuan Zhuang, Yonghao Zhuang, Joseph E. Gonzalez, Ion Stoica, and Eric P. Xing. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://lmsys.org/blog/2023-03-30-vicuna/" title="">Vicuna: An open-source chatbot impressing gpt-4 with 90%* chatgpt quality</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dong et al. (2024a)</span>
<span class="ltx_bibblock">
Hongyuan Dong, Jiawen Li, Bohong Wu, Jiacong Wang, Yuan Zhang, and Haoyuan Guo. 2024a.

</span>
<span class="ltx_bibblock">Benchmarking and improving detail image caption.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">arXiv preprint arXiv:2405.19092</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dong et al. (2024b)</span>
<span class="ltx_bibblock">
Xiaoyi Dong, Pan Zhang, Yuhang Zang, Yuhang Cao, Bin Wang, Linke Ouyang, Xilin Wei, Songyang Zhang, Haodong Duan, Maosong Cao, et al. 2024b.

</span>
<span class="ltx_bibblock">Internlm-xcomposer2: Mastering free-form text-image composition and comprehension in vision-language large model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">arXiv preprint arXiv:2401.16420</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dong et al. (2024c)</span>
<span class="ltx_bibblock">
Xiaoyi Dong, Pan Zhang, Yuhang Zang, Yuhang Cao, Bin Wang, Linke Ouyang, Songyang Zhang, Haodong Duan, Wenwei Zhang, Yining Li, et al. 2024c.

</span>
<span class="ltx_bibblock">Internlm-xcomposer2-4khd: A pioneering large vision-language model handling resolutions from 336 pixels to 4k hd.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">arXiv preprint arXiv:2404.06512</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dosovitskiy et al. (2020)</span>
<span class="ltx_bibblock">
Alexey Dosovitskiy, Lucas Beyer, Alexander Kolesnikov, Dirk Weissenborn, Xiaohua Zhai, Thomas Unterthiner, Mostafa Dehghani, Matthias Minderer, Georg Heigold, Sylvain Gelly, et al. 2020.

</span>
<span class="ltx_bibblock">An image is worth 16x16 words: Transformers for image recognition at scale.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fang et al. (2023)</span>
<span class="ltx_bibblock">
Yuxin Fang, Quan Sun, Xinggang Wang, Tiejun Huang, Xinlong Wang, and Yue Cao. 2023.

</span>
<span class="ltx_bibblock">Eva-02: A visual representation for neon genesis.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">arXiv preprint arXiv:2303.11331</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fu et al. (2024)</span>
<span class="ltx_bibblock">
Chaoyou Fu, Peixian Chen, Yunhang Shen, Yulei Qin, Mengdan Zhang, Xu Lin, Jinrui Yang, Xiawu Zheng, Ke Li, Xing Sun, Yunsheng Wu, and Rongrong Ji. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2306.13394" title="">Mme: A comprehensive evaluation benchmark for multimodal large language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Preprint</em>, arXiv:2306.13394.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2022)</span>
<span class="ltx_bibblock">
Jiaxin Huang, Shixiang Shane Gu, Le Hou, Yuexin Wu, Xuezhi Wang, Hongkun Yu, and Jiawei Han. 2022.

</span>
<span class="ltx_bibblock">Large language models can self-improve.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">arXiv preprint arXiv:2210.11610</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2023a)</span>
<span class="ltx_bibblock">
Jiaxin Huang, Shixiang Shane Gu, Le Hou, Yuexin Wu, Xuezhi Wang, Hongkun Yu, and Jiawei Han. 2023a.

</span>
<span class="ltx_bibblock">Large language models can self-improve.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">The 2023 Conference on Empirical Methods in Natural Language Processing</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2023b)</span>
<span class="ltx_bibblock">
Xinyu Huang, Youcai Zhang, Jinyu Ma, Weiwei Tian, Rui Feng, Yuejie Zhang, Yaqian Li, Yandong Guo, and Lei Zhang. 2023b.

</span>
<span class="ltx_bibblock">Tag2text: Guiding vision-language model via image tagging.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hudson and Manning (2019)</span>
<span class="ltx_bibblock">
Drew A Hudson and Christopher D Manning. 2019.

</span>
<span class="ltx_bibblock">Gqa: A new dataset for real-world visual reasoning and compositional question answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Proceedings of the IEEE/CVF conference on computer vision and pattern recognition</em>, pages 6700–6709.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">JaidedAI (2023)</span>
<span class="ltx_bibblock">
JaidedAI. 2023.

</span>
<span class="ltx_bibblock">Easy-ocr [software].

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url" href="https://github.com/JaidedAI/EasyOCR" title="">https://github.com/JaidedAI/EasyOCR</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2024)</span>
<span class="ltx_bibblock">
Albert Q Jiang, Alexandre Sablayrolles, Antoine Roux, Arthur Mensch, Blanche Savary, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Emma Bou Hanna, Florian Bressand, et al. 2024.

</span>
<span class="ltx_bibblock">Mixtral of experts.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">arXiv preprint arXiv:2401.04088</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kazemzadeh et al. (2014)</span>
<span class="ltx_bibblock">
Sahar Kazemzadeh, Vicente Ordonez, Mark Matten, and Tamara Berg. 2014.

</span>
<span class="ltx_bibblock">Referitgame: Referring to objects in photographs of natural scenes.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Proceedings of the 2014 conference on empirical methods in natural language processing (EMNLP)</em>, pages 787–798.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023a)</span>
<span class="ltx_bibblock">
Junnan Li, Dongxu Li, Silvio Savarese, and Steven Hoi. 2023a.

</span>
<span class="ltx_bibblock">Blip-2: Bootstrapping language-image pre-training with frozen image encoders and large language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">International conference on machine learning</em>, pages 19730–19742. PMLR.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023b)</span>
<span class="ltx_bibblock">
Lei Li, Yuwei Yin, Shicheng Li, Liang Chen, Peiyi Wang, Shuhuai Ren, Mukai Li, Yazheng Yang, Jingjing Xu, Xu Sun, et al. 2023b.

</span>
<span class="ltx_bibblock">M3it: A large-scale dataset towards multi-modal multilingual instruction tuning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">arXiv preprint arXiv:2306.04387</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023c)</span>
<span class="ltx_bibblock">
Xiang Lisa Li, Vaishnavi Shrivastava, Siyan Li, Tatsunori Hashimoto, and Percy Liang. 2023c.

</span>
<span class="ltx_bibblock">Benchmarking and improving generator-validator consistency of language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024a)</span>
<span class="ltx_bibblock">
Yanwei Li, Yuechen Zhang, Chengyao Wang, Zhisheng Zhong, Yixin Chen, Ruihang Chu, Shaoteng Liu, and Jiaya Jia. 2024a.

</span>
<span class="ltx_bibblock">Mini-gemini: Mining the potential of multi-modality vision language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">arXiv preprint arXiv:2403.18814</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023d)</span>
<span class="ltx_bibblock">
Yifan Li, Yifan Du, Kun Zhou, Jinpeng Wang, Wayne Xin Zhao, and Ji-Rong Wen. 2023d.

</span>
<span class="ltx_bibblock">Evaluating object hallucination in large vision-language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">arXiv preprint arXiv:2305.10355</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024b)</span>
<span class="ltx_bibblock">
Zhang Li, Biao Yang, Qiang Liu, Zhiyin Ma, Shuo Zhang, Jingxu Yang, Yabo Sun, Yuliang Liu, and Xiang Bai. 2024b.

</span>
<span class="ltx_bibblock">Monkey: Image resolution and text label are important things for large multi-modal models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition</em>, pages 26763–26773.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2023a)</span>
<span class="ltx_bibblock">
Haotian Liu, Chunyuan Li, Yuheng Li, and Yong Jae Lee. 2023a.

</span>
<span class="ltx_bibblock">Improved baselines with visual instruction tuning.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">NeurIPS 2023 Workshop on Instruction Tuning and Instruction Following</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2024a)</span>
<span class="ltx_bibblock">
Haotian Liu, Chunyuan Li, Yuheng Li, Bo Li, Yuanhan Zhang, Sheng Shen, and Yong Jae Lee. 2024a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://llava-vl.github.io/blog/2024-01-30-llava-next/" title="">Llava-next: Improved reasoning, ocr, and world knowledge</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2024b)</span>
<span class="ltx_bibblock">
Haotian Liu, Chunyuan Li, Qingyang Wu, and Yong Jae Lee. 2024b.

</span>
<span class="ltx_bibblock">Visual instruction tuning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">Advances in neural information processing systems</em>, 36.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2023b)</span>
<span class="ltx_bibblock">
Yuliang Liu, Zhang Li, Hongliang Li, Wenwen Yu, Mingxin Huang, Dezhi Peng, Mingyu Liu, Mingrui Chen, Chunyuan Li, Lianwen Jin, et al. 2023b.

</span>
<span class="ltx_bibblock">On the hidden mystery of ocr in large multimodal models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">arXiv preprint arXiv:2305.07895</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lu et al. (2023)</span>
<span class="ltx_bibblock">
Jianqiao Lu, Wanjun Zhong, Wenyong Huang, Yufei Wang, Fei Mi, Baojun Wang, Weichao Wang, Lifeng Shang, and Qun Liu. 2023.

</span>
<span class="ltx_bibblock">Self: Language-driven self-evolution for large language model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">arXiv preprint arXiv:2310.00533</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lu et al. (2022)</span>
<span class="ltx_bibblock">
Pan Lu, Swaroop Mishra, Tanglin Xia, Liang Qiu, Kai-Wei Chang, Song-Chun Zhu, Oyvind Tafjord, Peter Clark, and Ashwin Kalyan. 2022.

</span>
<span class="ltx_bibblock">Learn to explain: Multimodal reasoning via thought chains for science question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">Advances in Neural Information Processing Systems</em>, 35:2507–2521.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ma et al. (2023)</span>
<span class="ltx_bibblock">
Yecheng Jason Ma, William Liang, Guanzhi Wang, De-An Huang, Osbert Bastani, Dinesh Jayaraman, Yuke Zhu, Linxi Fan, and Anima Anandkumar. 2023.

</span>
<span class="ltx_bibblock">Eureka: Human-level reward design via coding large language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mao et al. (2016)</span>
<span class="ltx_bibblock">
Junhua Mao, Jonathan Huang, Alexander Toshev, Oana Camburu, Alan L Yuille, and Kevin Murphy. 2016.

</span>
<span class="ltx_bibblock">Generation and comprehension of unambiguous object descriptions.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">Proceedings of the IEEE conference on computer vision and pattern recognition</em>, pages 11–20.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Masry et al. (2022)</span>
<span class="ltx_bibblock">
Ahmed Masry, Do Xuan Long, Jia Qing Tan, Shafiq Joty, and Enamul Hoque. 2022.

</span>
<span class="ltx_bibblock">Chartqa: A benchmark for question answering about charts with visual and logical reasoning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">arXiv preprint arXiv:2203.10244</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Miller (1995)</span>
<span class="ltx_bibblock">
George A Miller. 1995.

</span>
<span class="ltx_bibblock">Wordnet: a lexical database for english.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib39.1.1">Communications of the ACM</em>, 38(11):39–41.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Minderer et al. (2022)</span>
<span class="ltx_bibblock">
Matthias Minderer, Alexey Gritsenko, Austin Stone, Maxim Neumann, Dirk Weissenborn, Alexey Dosovitskiy, Aravindh Mahendran, Anurag Arnab, Mostafa Dehghani, Zhuoran Shen, et al. 2022.

</span>
<span class="ltx_bibblock">Simple open-vocabulary object detection.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib40.1.1">European Conference on Computer Vision</em>, pages 728–755. Springer.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2023)</span>
<span class="ltx_bibblock">
OpenAI. 2023.

</span>
<span class="ltx_bibblock">Chatgpt.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url" href="https://openai.com/blog/chatgpt/" title="">https://openai.com/blog/chatgpt/</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Oquab et al. (2023)</span>
<span class="ltx_bibblock">
Maxime Oquab, Timothée Darcet, Théo Moutakanni, Huy V Vo, Marc Szafraniec, Vasil Khalidov, Pierre Fernandez, Daniel HAZIZA, Francisco Massa, Alaaeldin El-Nouby, et al. 2023.

</span>
<span class="ltx_bibblock">Dinov2: Learning robust visual features without supervision.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib42.1.1">Transactions on Machine Learning Research</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">PaddleOCR (2023)</span>
<span class="ltx_bibblock">
PaddleOCR. 2023.

</span>
<span class="ltx_bibblock">Awesome multilingual ocr toolkits based on paddlepaddle.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url" href="https://github.com/PaddlePaddle/PaddleOCR" title="">https://github.com/PaddlePaddle/PaddleOCR</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Radford et al. (2021)</span>
<span class="ltx_bibblock">
Alec Radford, Jong Wook Kim, Chris Hallacy, Aditya Ramesh, Gabriel Goh, Sandhini Agarwal, Girish Sastry, Amanda Askell, Pamela Mishkin, Jack Clark, et al. 2021.

</span>
<span class="ltx_bibblock">Learning transferable visual models from natural language supervision.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib44.1.1">International conference on machine learning</em>, pages 8748–8763. PMLR.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rasheed et al. (2023)</span>
<span class="ltx_bibblock">
Hanoona Rasheed, Muhammad Maaz, Sahal Shaji, Abdelrahman Shaker, Salman Khan, Hisham Cholakkal, Rao M Anwer, Erix Xing, Ming-Hsuan Yang, and Fahad S Khan. 2023.

</span>
<span class="ltx_bibblock">Glamm: Pixel grounding large multimodal model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib45.1.1">arXiv preprint arXiv:2311.03356</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ren et al. (2024)</span>
<span class="ltx_bibblock">
Shuhuai Ren, Aston Zhang, Yi Zhu, Shuai Zhang, Shuai Zheng, Mu Li, Alexander J Smola, and Xu Sun. 2024.

</span>
<span class="ltx_bibblock">Prompt pre-training with twenty-thousand classes for open-vocabulary visual recognition.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib46.1.1">Advances in Neural Information Processing Systems</em>, 36.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib47">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Singh et al. (2019)</span>
<span class="ltx_bibblock">
Amanpreet Singh, Vivek Natarajan, Meet Shah, Yu Jiang, Xinlei Chen, Dhruv Batra, Devi Parikh, and Marcus Rohrbach. 2019.

</span>
<span class="ltx_bibblock">Towards vqa models that can read.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib47.1.1">Proceedings of the IEEE/CVF conference on computer vision and pattern recognition</em>, pages 8317–8326.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib48">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Team et al. (2023)</span>
<span class="ltx_bibblock">
Gemini Team, Rohan Anil, Sebastian Borgeaud, Yonghui Wu, Jean-Baptiste Alayrac, Jiahui Yu, Radu Soricut, Johan Schalkwyk, Andrew M Dai, Anja Hauth, et al. 2023.

</span>
<span class="ltx_bibblock">Gemini: a family of highly capable multimodal models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib48.1.1">arXiv preprint arXiv:2312.11805</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib49">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Team (2024)</span>
<span class="ltx_bibblock">
Qwen Team. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://qwenlm.github.io/blog/qwen1.5/" title="">Introducing qwen1.5</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib50">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tito et al. (2021)</span>
<span class="ltx_bibblock">
Rubèn Tito, Dimosthenis Karatzas, and Ernest Valveny. 2021.

</span>
<span class="ltx_bibblock">Document collection visual question answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib50.1.1">Document Analysis and Recognition–ICDAR 2021: 16th International Conference, Lausanne, Switzerland, September 5–10, 2021, Proceedings, Part II 16</em>, pages 778–792. Springer.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib51">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et al. (2023a)</span>
<span class="ltx_bibblock">
Hugo Touvron, Thibaut Lavril, Gautier Izacard, Xavier Martinet, Marie-Anne Lachaux, Timothée Lacroix, Baptiste Rozière, Naman Goyal, Eric Hambro, Faisal Azhar, et al. 2023a.

</span>
<span class="ltx_bibblock">Llama: Open and efficient foundation language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib51.1.1">arXiv preprint arXiv:2302.13971</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib52">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et al. (2023b)</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, et al. 2023b.

</span>
<span class="ltx_bibblock">Llama 2: Open foundation and fine-tuned chat models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib52.1.1">arXiv preprint arXiv:2307.09288</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib53">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023a)</span>
<span class="ltx_bibblock">
Teng Wang, Jinrui Zhang, Junjie Fei, Yixiao Ge, Hao Zheng, Yunlong Tang, Zhe Li, Mingqi Gao, Shanshan Zhao, Ying Shan, et al. 2023a.

</span>
<span class="ltx_bibblock">Caption anything: Interactive image description with diverse multimodal controls.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib53.1.1">arXiv preprint arXiv:2305.02677</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib54">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2024)</span>
<span class="ltx_bibblock">
Weiyun Wang, Yiming Ren, Haowen Luo, Tiantong Li, Chenxiang Yan, Zhe Chen, Wenhai Wang, Qingyun Li, Lewei Lu, Xizhou Zhu, et al. 2024.

</span>
<span class="ltx_bibblock">The all-seeing project v2: Towards general relation comprehension of the open world.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib54.1.1">arXiv preprint arXiv:2402.19474</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib55">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023b)</span>
<span class="ltx_bibblock">
Weiyun Wang, Min Shi, Qingyun Li, Wenhai Wang, Zhenhang Huang, Linjie Xing, Zhe Chen, Hao Li, Xizhou Zhu, Zhiguo Cao, et al. 2023b.

</span>
<span class="ltx_bibblock">The all-seeing project: Towards panoptic visual recognition and understanding of the open world.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib55.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib56">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2022)</span>
<span class="ltx_bibblock">
Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc V Le, Ed H Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. 2022.

</span>
<span class="ltx_bibblock">Self-consistency improves chain of thought reasoning in language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib56.1.1">The Eleventh International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib57">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023c)</span>
<span class="ltx_bibblock">
Yizhong Wang, Yeganeh Kordi, Swaroop Mishra, Alisa Liu, Noah A Smith, Daniel Khashabi, and Hannaneh Hajishirzi. 2023c.

</span>
<span class="ltx_bibblock">Self-instruct: Aligning language models with self-generated instructions.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib57.1.1">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 13484–13508.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib58">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xie et al. (2023)</span>
<span class="ltx_bibblock">
Tianbao Xie, Siheng Zhao, Chen Henry Wu, Yitao Liu, Qian Luo, Victor Zhong, Yanchao Yang, and Tao Yu. 2023.

</span>
<span class="ltx_bibblock">Text2reward: Automated dense reward function generation for reinforcement learning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib58.1.1">arXiv preprint arXiv:2309.11489</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib59">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ying et al. (2024)</span>
<span class="ltx_bibblock">
Kaining Ying, Fanqing Meng, Jin Wang, Zhiqian Li, Han Lin, Yue Yang, Hao Zhang, Wenbo Zhang, Yuqi Lin, Shuo Liu, et al. 2024.

</span>
<span class="ltx_bibblock">Mmt-bench: A comprehensive multimodal benchmark for evaluating large vision-language models towards multitask agi.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib59.1.1">arXiv preprint arXiv:2404.16006</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib60">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2023a)</span>
<span class="ltx_bibblock">
Pan Zhang, Xiaoyi Dong Bin Wang, Yuhang Cao, Chao Xu, Linke Ouyang, Zhiyuan Zhao, Shuangrui Ding, Songyang Zhang, Haodong Duan, Hang Yan, et al. 2023a.

</span>
<span class="ltx_bibblock">Internlm-xcomposer: A vision-language large model for advanced text-image comprehension and composition.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib60.1.1">arXiv preprint arXiv:2309.15112</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib61">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2023b)</span>
<span class="ltx_bibblock">
Shilong Zhang, Peize Sun, Shoufa Chen, Min Xiao, Wenqi Shao, Wenwei Zhang, Kai Chen, and Ping Luo. 2023b.

</span>
<span class="ltx_bibblock">Gpt4roi: Instruction tuning large language model on region-of-interest.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib61.1.1">arXiv preprint arXiv:2307.03601</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib62">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2024a)</span>
<span class="ltx_bibblock">
Youcai Zhang, Xinyu Huang, Jinyu Ma, Zhaoyang Li, Zhaochuan Luo, Yanchun Xie, Yuzhuo Qin, Tong Luo, Yaqian Li, Shilong Liu, et al. 2024a.

</span>
<span class="ltx_bibblock">Recognize anything: A strong image tagging model.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib62.1.1">Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition</em>, pages 1724–1732.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib63">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2024b)</span>
<span class="ltx_bibblock">
Yuan Zhang, Fei Xiao, Tao Huang, Chun-Kai Fan, Hongyuan Dong, Jiawen Li, Jiacong Wang, Kuan Cheng, Shanghang Zhang, and Haoyuan Guo. 2024b.

</span>
<span class="ltx_bibblock">Unveiling the tapestry of consistency in large vision-language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib63.1.1">arXiv preprint arXiv:2405.14156</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib64">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhu et al. (2023)</span>
<span class="ltx_bibblock">
Deyao Zhu, Jun Chen, Xiaoqian Shen, Xiang Li, and Mohamed Elhoseiny. 2023.

</span>
<span class="ltx_bibblock">Minigpt-4: Enhancing vision-language understanding with advanced large language models.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib64.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib65">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zong et al. (2023)</span>
<span class="ltx_bibblock">
Zhuofan Zong, Guanglu Song, and Yu Liu. 2023.

</span>
<span class="ltx_bibblock">Detrs with collaborative hybrid assignments training.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib65.1.1">Proceedings of the IEEE/CVF international conference on computer vision</em>, pages 6748–6758.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Prompt Templates for <span class="ltx_text ltx_font_italic" id="A1.1.1">W2C </span>data construction pipeline</h2>
<section class="ltx_subsection" id="A1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>Prompt Templates</h3>
<div class="ltx_para" id="A1.SS1.p1">
<p class="ltx_p" id="A1.SS1.p1.1"><span class="ltx_text ltx_font_italic" id="A1.SS1.p1.1.1">W2C </span>data construction pipeline calls the VLMs repeatedly by using different prompts. We guide the VLMs to accurately answer questions by designing universal prompt templates, thus ensuring better compliance with instruction. All the prompts are shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A1.T7" title="Table 7 ‣ A.1 Prompt Templates ‣ Appendix A Prompt Templates for W2C data construction pipeline ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">7</span></a>.</p>
</div>
<figure class="ltx_table" id="A1.T7">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T7.6">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T7.6.7.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" id="A1.T7.6.7.1.1">Stage</th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A1.T7.6.7.1.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.6.7.1.2.1">
<span class="ltx_p" id="A1.T7.6.7.1.2.1.1" style="width:298.8pt;">Prompt</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.6.8.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="2" id="A1.T7.6.8.2.1"><span class="ltx_text ltx_font_italic" id="A1.T7.6.8.2.1.1">Prompt for Caption</span></th>
</tr>
<tr class="ltx_tr" id="A1.T7.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T7.1.1.1"><math alttext="\text{Global Caption}-p_{g}" class="ltx_Math" display="inline" id="A1.T7.1.1.1.m1.1"><semantics id="A1.T7.1.1.1.m1.1a"><mrow id="A1.T7.1.1.1.m1.1.1" xref="A1.T7.1.1.1.m1.1.1.cmml"><mtext id="A1.T7.1.1.1.m1.1.1.2" xref="A1.T7.1.1.1.m1.1.1.2a.cmml">Global Caption</mtext><mo id="A1.T7.1.1.1.m1.1.1.1" xref="A1.T7.1.1.1.m1.1.1.1.cmml">−</mo><msub id="A1.T7.1.1.1.m1.1.1.3" xref="A1.T7.1.1.1.m1.1.1.3.cmml"><mi id="A1.T7.1.1.1.m1.1.1.3.2" xref="A1.T7.1.1.1.m1.1.1.3.2.cmml">p</mi><mi id="A1.T7.1.1.1.m1.1.1.3.3" xref="A1.T7.1.1.1.m1.1.1.3.3.cmml">g</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A1.T7.1.1.1.m1.1b"><apply id="A1.T7.1.1.1.m1.1.1.cmml" xref="A1.T7.1.1.1.m1.1.1"><minus id="A1.T7.1.1.1.m1.1.1.1.cmml" xref="A1.T7.1.1.1.m1.1.1.1"></minus><ci id="A1.T7.1.1.1.m1.1.1.2a.cmml" xref="A1.T7.1.1.1.m1.1.1.2"><mtext id="A1.T7.1.1.1.m1.1.1.2.cmml" xref="A1.T7.1.1.1.m1.1.1.2">Global Caption</mtext></ci><apply id="A1.T7.1.1.1.m1.1.1.3.cmml" xref="A1.T7.1.1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T7.1.1.1.m1.1.1.3.1.cmml" xref="A1.T7.1.1.1.m1.1.1.3">subscript</csymbol><ci id="A1.T7.1.1.1.m1.1.1.3.2.cmml" xref="A1.T7.1.1.1.m1.1.1.3.2">𝑝</ci><ci id="A1.T7.1.1.1.m1.1.1.3.3.cmml" xref="A1.T7.1.1.1.m1.1.1.3.3">𝑔</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T7.1.1.1.m1.1c">\text{Global Caption}-p_{g}</annotation><annotation encoding="application/x-llamapun" id="A1.T7.1.1.1.m1.1d">Global Caption - italic_p start_POSTSUBSCRIPT italic_g end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T7.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.1.1.2.1">
<span class="ltx_p" id="A1.T7.1.1.2.1.1" style="width:298.8pt;">Please provide a simple sentence that describes this image accurately.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T7.2.2.1"><math alttext="\text{Detail Caption}-p_{d}" class="ltx_Math" display="inline" id="A1.T7.2.2.1.m1.1"><semantics id="A1.T7.2.2.1.m1.1a"><mrow id="A1.T7.2.2.1.m1.1.1" xref="A1.T7.2.2.1.m1.1.1.cmml"><mtext id="A1.T7.2.2.1.m1.1.1.2" xref="A1.T7.2.2.1.m1.1.1.2a.cmml">Detail Caption</mtext><mo id="A1.T7.2.2.1.m1.1.1.1" xref="A1.T7.2.2.1.m1.1.1.1.cmml">−</mo><msub id="A1.T7.2.2.1.m1.1.1.3" xref="A1.T7.2.2.1.m1.1.1.3.cmml"><mi id="A1.T7.2.2.1.m1.1.1.3.2" xref="A1.T7.2.2.1.m1.1.1.3.2.cmml">p</mi><mi id="A1.T7.2.2.1.m1.1.1.3.3" xref="A1.T7.2.2.1.m1.1.1.3.3.cmml">d</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="A1.T7.2.2.1.m1.1b"><apply id="A1.T7.2.2.1.m1.1.1.cmml" xref="A1.T7.2.2.1.m1.1.1"><minus id="A1.T7.2.2.1.m1.1.1.1.cmml" xref="A1.T7.2.2.1.m1.1.1.1"></minus><ci id="A1.T7.2.2.1.m1.1.1.2a.cmml" xref="A1.T7.2.2.1.m1.1.1.2"><mtext id="A1.T7.2.2.1.m1.1.1.2.cmml" xref="A1.T7.2.2.1.m1.1.1.2">Detail Caption</mtext></ci><apply id="A1.T7.2.2.1.m1.1.1.3.cmml" xref="A1.T7.2.2.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T7.2.2.1.m1.1.1.3.1.cmml" xref="A1.T7.2.2.1.m1.1.1.3">subscript</csymbol><ci id="A1.T7.2.2.1.m1.1.1.3.2.cmml" xref="A1.T7.2.2.1.m1.1.1.3.2">𝑝</ci><ci id="A1.T7.2.2.1.m1.1.1.3.3.cmml" xref="A1.T7.2.2.1.m1.1.1.3.3">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T7.2.2.1.m1.1c">\text{Detail Caption}-p_{d}</annotation><annotation encoding="application/x-llamapun" id="A1.T7.2.2.1.m1.1d">Detail Caption - italic_p start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T7.2.2.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.2.2.2.1">
<span class="ltx_p" id="A1.T7.2.2.2.1.1" style="width:298.8pt;">Please describe all the visual concepts in the image in detail, but use concise words with no more than 120 words.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.6.9.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="2" id="A1.T7.6.9.3.1"><span class="ltx_text ltx_font_italic" id="A1.T7.6.9.3.1.1">Prompt for Self-Instructed Concept-targeted Captions</span></th>
</tr>
<tr class="ltx_tr" id="A1.T7.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T7.3.3.1"><math alttext="\text{Compositional Caption}-p_{\text{desc}}" class="ltx_Math" display="inline" id="A1.T7.3.3.1.m1.1"><semantics id="A1.T7.3.3.1.m1.1a"><mrow id="A1.T7.3.3.1.m1.1.1" xref="A1.T7.3.3.1.m1.1.1.cmml"><mtext id="A1.T7.3.3.1.m1.1.1.2" xref="A1.T7.3.3.1.m1.1.1.2a.cmml">Compositional Caption</mtext><mo id="A1.T7.3.3.1.m1.1.1.1" xref="A1.T7.3.3.1.m1.1.1.1.cmml">−</mo><msub id="A1.T7.3.3.1.m1.1.1.3" xref="A1.T7.3.3.1.m1.1.1.3.cmml"><mi id="A1.T7.3.3.1.m1.1.1.3.2" xref="A1.T7.3.3.1.m1.1.1.3.2.cmml">p</mi><mtext id="A1.T7.3.3.1.m1.1.1.3.3" xref="A1.T7.3.3.1.m1.1.1.3.3a.cmml">desc</mtext></msub></mrow><annotation-xml encoding="MathML-Content" id="A1.T7.3.3.1.m1.1b"><apply id="A1.T7.3.3.1.m1.1.1.cmml" xref="A1.T7.3.3.1.m1.1.1"><minus id="A1.T7.3.3.1.m1.1.1.1.cmml" xref="A1.T7.3.3.1.m1.1.1.1"></minus><ci id="A1.T7.3.3.1.m1.1.1.2a.cmml" xref="A1.T7.3.3.1.m1.1.1.2"><mtext id="A1.T7.3.3.1.m1.1.1.2.cmml" xref="A1.T7.3.3.1.m1.1.1.2">Compositional Caption</mtext></ci><apply id="A1.T7.3.3.1.m1.1.1.3.cmml" xref="A1.T7.3.3.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T7.3.3.1.m1.1.1.3.1.cmml" xref="A1.T7.3.3.1.m1.1.1.3">subscript</csymbol><ci id="A1.T7.3.3.1.m1.1.1.3.2.cmml" xref="A1.T7.3.3.1.m1.1.1.3.2">𝑝</ci><ci id="A1.T7.3.3.1.m1.1.1.3.3a.cmml" xref="A1.T7.3.3.1.m1.1.1.3.3"><mtext id="A1.T7.3.3.1.m1.1.1.3.3.cmml" mathsize="70%" xref="A1.T7.3.3.1.m1.1.1.3.3">desc</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T7.3.3.1.m1.1c">\text{Compositional Caption}-p_{\text{desc}}</annotation><annotation encoding="application/x-llamapun" id="A1.T7.3.3.1.m1.1d">Compositional Caption - italic_p start_POSTSUBSCRIPT desc end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T7.3.3.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.3.3.2.1">
<span class="ltx_p" id="A1.T7.3.3.2.1.1" style="width:298.8pt;">From the image, provide one sentence that describes {e} (you should try your best to include attributes like shape, color or material), especially, using {e} as the beginning of your answer.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.4.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T7.4.4.1"><math alttext="\text{OCR Extract}-p_{\text{ocr}}" class="ltx_Math" display="inline" id="A1.T7.4.4.1.m1.1"><semantics id="A1.T7.4.4.1.m1.1a"><mrow id="A1.T7.4.4.1.m1.1.1" xref="A1.T7.4.4.1.m1.1.1.cmml"><mtext id="A1.T7.4.4.1.m1.1.1.2" xref="A1.T7.4.4.1.m1.1.1.2a.cmml">OCR Extract</mtext><mo id="A1.T7.4.4.1.m1.1.1.1" xref="A1.T7.4.4.1.m1.1.1.1.cmml">−</mo><msub id="A1.T7.4.4.1.m1.1.1.3" xref="A1.T7.4.4.1.m1.1.1.3.cmml"><mi id="A1.T7.4.4.1.m1.1.1.3.2" xref="A1.T7.4.4.1.m1.1.1.3.2.cmml">p</mi><mtext id="A1.T7.4.4.1.m1.1.1.3.3" xref="A1.T7.4.4.1.m1.1.1.3.3a.cmml">ocr</mtext></msub></mrow><annotation-xml encoding="MathML-Content" id="A1.T7.4.4.1.m1.1b"><apply id="A1.T7.4.4.1.m1.1.1.cmml" xref="A1.T7.4.4.1.m1.1.1"><minus id="A1.T7.4.4.1.m1.1.1.1.cmml" xref="A1.T7.4.4.1.m1.1.1.1"></minus><ci id="A1.T7.4.4.1.m1.1.1.2a.cmml" xref="A1.T7.4.4.1.m1.1.1.2"><mtext id="A1.T7.4.4.1.m1.1.1.2.cmml" xref="A1.T7.4.4.1.m1.1.1.2">OCR Extract</mtext></ci><apply id="A1.T7.4.4.1.m1.1.1.3.cmml" xref="A1.T7.4.4.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T7.4.4.1.m1.1.1.3.1.cmml" xref="A1.T7.4.4.1.m1.1.1.3">subscript</csymbol><ci id="A1.T7.4.4.1.m1.1.1.3.2.cmml" xref="A1.T7.4.4.1.m1.1.1.3.2">𝑝</ci><ci id="A1.T7.4.4.1.m1.1.1.3.3a.cmml" xref="A1.T7.4.4.1.m1.1.1.3.3"><mtext id="A1.T7.4.4.1.m1.1.1.3.3.cmml" mathsize="70%" xref="A1.T7.4.4.1.m1.1.1.3.3">ocr</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T7.4.4.1.m1.1c">\text{OCR Extract}-p_{\text{ocr}}</annotation><annotation encoding="application/x-llamapun" id="A1.T7.4.4.1.m1.1d">OCR Extract - italic_p start_POSTSUBSCRIPT ocr end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T7.4.4.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.4.4.2.1">
<span class="ltx_p" id="A1.T7.4.4.2.1.1" style="width:298.8pt;">List all the text in the image, answer with the ocr tokens only, and answer ’No’ with one word if there isn’t any.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.6.10.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="2" id="A1.T7.6.10.4.1"><span class="ltx_text ltx_font_italic" id="A1.T7.6.10.4.1.1">Prompt for Consistency Filtering</span></th>
</tr>
<tr class="ltx_tr" id="A1.T7.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T7.5.5.1"><math alttext="\text{Caption Re-ranking}-p_{\text{valid-c}}" class="ltx_Math" display="inline" id="A1.T7.5.5.1.m1.1"><semantics id="A1.T7.5.5.1.m1.1a"><mrow id="A1.T7.5.5.1.m1.1.1" xref="A1.T7.5.5.1.m1.1.1.cmml"><mtext id="A1.T7.5.5.1.m1.1.1.2" xref="A1.T7.5.5.1.m1.1.1.2a.cmml">Caption Re-ranking</mtext><mo id="A1.T7.5.5.1.m1.1.1.1" xref="A1.T7.5.5.1.m1.1.1.1.cmml">−</mo><msub id="A1.T7.5.5.1.m1.1.1.3" xref="A1.T7.5.5.1.m1.1.1.3.cmml"><mi id="A1.T7.5.5.1.m1.1.1.3.2" xref="A1.T7.5.5.1.m1.1.1.3.2.cmml">p</mi><mtext id="A1.T7.5.5.1.m1.1.1.3.3" xref="A1.T7.5.5.1.m1.1.1.3.3a.cmml">valid-c</mtext></msub></mrow><annotation-xml encoding="MathML-Content" id="A1.T7.5.5.1.m1.1b"><apply id="A1.T7.5.5.1.m1.1.1.cmml" xref="A1.T7.5.5.1.m1.1.1"><minus id="A1.T7.5.5.1.m1.1.1.1.cmml" xref="A1.T7.5.5.1.m1.1.1.1"></minus><ci id="A1.T7.5.5.1.m1.1.1.2a.cmml" xref="A1.T7.5.5.1.m1.1.1.2"><mtext id="A1.T7.5.5.1.m1.1.1.2.cmml" xref="A1.T7.5.5.1.m1.1.1.2">Caption Re-ranking</mtext></ci><apply id="A1.T7.5.5.1.m1.1.1.3.cmml" xref="A1.T7.5.5.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T7.5.5.1.m1.1.1.3.1.cmml" xref="A1.T7.5.5.1.m1.1.1.3">subscript</csymbol><ci id="A1.T7.5.5.1.m1.1.1.3.2.cmml" xref="A1.T7.5.5.1.m1.1.1.3.2">𝑝</ci><ci id="A1.T7.5.5.1.m1.1.1.3.3a.cmml" xref="A1.T7.5.5.1.m1.1.1.3.3"><mtext id="A1.T7.5.5.1.m1.1.1.3.3.cmml" mathsize="70%" xref="A1.T7.5.5.1.m1.1.1.3.3">valid-c</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T7.5.5.1.m1.1c">\text{Caption Re-ranking}-p_{\text{valid-c}}</annotation><annotation encoding="application/x-llamapun" id="A1.T7.5.5.1.m1.1d">Caption Re-ranking - italic_p start_POSTSUBSCRIPT valid-c end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T7.5.5.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.5.5.2.1">
<span class="ltx_p" id="A1.T7.5.5.2.1.1" style="width:298.8pt;">Is ’{e}’ a valid and visible visual concept in the image? Answer yes or no with only one single word.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.6.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T7.6.6.1"><math alttext="\text{Counting Group Filtering}-p_{\text{valid-g}}" class="ltx_Math" display="inline" id="A1.T7.6.6.1.m1.1"><semantics id="A1.T7.6.6.1.m1.1a"><mrow id="A1.T7.6.6.1.m1.1.1" xref="A1.T7.6.6.1.m1.1.1.cmml"><mtext id="A1.T7.6.6.1.m1.1.1.2" xref="A1.T7.6.6.1.m1.1.1.2a.cmml">Counting Group Filtering</mtext><mo id="A1.T7.6.6.1.m1.1.1.1" xref="A1.T7.6.6.1.m1.1.1.1.cmml">−</mo><msub id="A1.T7.6.6.1.m1.1.1.3" xref="A1.T7.6.6.1.m1.1.1.3.cmml"><mi id="A1.T7.6.6.1.m1.1.1.3.2" xref="A1.T7.6.6.1.m1.1.1.3.2.cmml">p</mi><mtext id="A1.T7.6.6.1.m1.1.1.3.3" xref="A1.T7.6.6.1.m1.1.1.3.3a.cmml">valid-g</mtext></msub></mrow><annotation-xml encoding="MathML-Content" id="A1.T7.6.6.1.m1.1b"><apply id="A1.T7.6.6.1.m1.1.1.cmml" xref="A1.T7.6.6.1.m1.1.1"><minus id="A1.T7.6.6.1.m1.1.1.1.cmml" xref="A1.T7.6.6.1.m1.1.1.1"></minus><ci id="A1.T7.6.6.1.m1.1.1.2a.cmml" xref="A1.T7.6.6.1.m1.1.1.2"><mtext id="A1.T7.6.6.1.m1.1.1.2.cmml" xref="A1.T7.6.6.1.m1.1.1.2">Counting Group Filtering</mtext></ci><apply id="A1.T7.6.6.1.m1.1.1.3.cmml" xref="A1.T7.6.6.1.m1.1.1.3"><csymbol cd="ambiguous" id="A1.T7.6.6.1.m1.1.1.3.1.cmml" xref="A1.T7.6.6.1.m1.1.1.3">subscript</csymbol><ci id="A1.T7.6.6.1.m1.1.1.3.2.cmml" xref="A1.T7.6.6.1.m1.1.1.3.2">𝑝</ci><ci id="A1.T7.6.6.1.m1.1.1.3.3a.cmml" xref="A1.T7.6.6.1.m1.1.1.3.3"><mtext id="A1.T7.6.6.1.m1.1.1.3.3.cmml" mathsize="70%" xref="A1.T7.6.6.1.m1.1.1.3.3">valid-g</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T7.6.6.1.m1.1c">\text{Counting Group Filtering}-p_{\text{valid-g}}</annotation><annotation encoding="application/x-llamapun" id="A1.T7.6.6.1.m1.1d">Counting Group Filtering - italic_p start_POSTSUBSCRIPT valid-g end_POSTSUBSCRIPT</annotation></semantics></math></th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T7.6.6.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.6.6.2.1">
<span class="ltx_p" id="A1.T7.6.6.2.1.1" style="width:298.8pt;">Is there {parse times} or more {group key} in the image? Answer yes or no with a single word.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.6.11.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="2" id="A1.T7.6.11.5.1"><span class="ltx_text ltx_font_italic" id="A1.T7.6.11.5.1.1">Symbol Explanation</span></th>
</tr>
<tr class="ltx_tr" id="A1.T7.6.12.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A1.T7.6.12.6.1">{e}</th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A1.T7.6.12.6.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.6.12.6.2.1">
<span class="ltx_p" id="A1.T7.6.12.6.2.1.1" style="width:298.8pt;">means an entity in the final detected entity list of this image.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.6.13.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A1.T7.6.13.7.1">{parse times}</th>
<td class="ltx_td ltx_align_justify ltx_align_top" id="A1.T7.6.13.7.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.6.13.7.2.1">
<span class="ltx_p" id="A1.T7.6.13.7.2.1.1" style="width:298.8pt;">means the number of times an entity appears in the entity list of this image.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="A1.T7.6.14.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="A1.T7.6.14.8.1">{group key}</th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b" id="A1.T7.6.14.8.2">
<span class="ltx_inline-block ltx_align_top" id="A1.T7.6.14.8.2.1">
<span class="ltx_p" id="A1.T7.6.14.8.2.1.1" style="width:298.8pt;">means the entity name corresponding to parse times in the entity list of this image.</span>
</span>
</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Prompt for <span class="ltx_text ltx_font_italic" id="A1.T7.8.1">W2C </span>data construction pipeline.</figcaption>
</figure>
</section>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>More experiments of <span class="ltx_text ltx_font_italic" id="A2.1.1">W2C </span>.</h2>
<section class="ltx_subsection" id="A2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.1 </span>More Visual Question Answering Benchmarks</h3>
<div class="ltx_para" id="A2.SS1.p1">
<p class="ltx_p" id="A2.SS1.p1.1">We show more Visual Question Answering benchmarks of <span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.1">W2C </span>on LLaVA-NeXT-7B/13B under different combination of IT datasets in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A2.T8" title="Table 8 ‣ B.1 More Visual Question Answering Benchmarks ‣ Appendix B More experiments of W2C . ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">8</span></a>. The <span class="ltx_text ltx_font_italic" id="A2.SS1.p1.1.2">W2C </span>method consistently demonstrates superior experimental results.</p>
</div>
<figure class="ltx_table" id="A2.T8">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A2.T8.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A2.T8.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt" id="A2.T8.1.1.1.1" style="padding-left:5.5pt;padding-right:5.5pt;">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A2.T8.1.1.1.2" style="padding-left:5.5pt;padding-right:5.5pt;">InfoVQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A2.T8.1.1.1.3" style="padding-left:5.5pt;padding-right:5.5pt;">MMMU</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A2.T8.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="A2.T8.1.2.1.1" style="padding-left:5.5pt;padding-right:5.5pt;">LLaVA-NeXT-7B</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.2.1.2" style="padding-left:5.5pt;padding-right:5.5pt;">26.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.2.1.3" style="padding-left:5.5pt;padding-right:5.5pt;">35.8</td>
</tr>
<tr class="ltx_tr" id="A2.T8.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="A2.T8.1.3.2.1" style="padding-left:5.5pt;padding-right:5.5pt;">   +ShareGPT4V</th>
<td class="ltx_td ltx_align_center" id="A2.T8.1.3.2.2" style="padding-left:5.5pt;padding-right:5.5pt;">27.4</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.3.2.3" style="padding-left:5.5pt;padding-right:5.5pt;">35.0</td>
</tr>
<tr class="ltx_tr" id="A2.T8.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="A2.T8.1.4.3.1" style="padding-left:5.5pt;padding-right:5.5pt;">   +<span class="ltx_text ltx_font_italic" id="A2.T8.1.4.3.1.1">W2C</span>
</th>
<td class="ltx_td ltx_align_center" id="A2.T8.1.4.3.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="A2.T8.1.4.3.2.1">27.8</span></td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.4.3.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="A2.T8.1.4.3.3.1">36.2</span></td>
</tr>
<tr class="ltx_tr" id="A2.T8.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="A2.T8.1.5.4.1" style="padding-left:5.5pt;padding-right:5.5pt;">LLaVA-NeXT-13B</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.5.4.2" style="padding-left:5.5pt;padding-right:5.5pt;">29.7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.5.4.3" style="padding-left:5.5pt;padding-right:5.5pt;">35.3</td>
</tr>
<tr class="ltx_tr" id="A2.T8.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="A2.T8.1.6.5.1" style="padding-left:5.5pt;padding-right:5.5pt;">   +ShareGPT4V</th>
<td class="ltx_td ltx_align_center" id="A2.T8.1.6.5.2" style="padding-left:5.5pt;padding-right:5.5pt;">29.9</td>
<td class="ltx_td ltx_align_center" id="A2.T8.1.6.5.3" style="padding-left:5.5pt;padding-right:5.5pt;">34.8</td>
</tr>
<tr class="ltx_tr" id="A2.T8.1.7.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="A2.T8.1.7.6.1" style="padding-left:5.5pt;padding-right:5.5pt;">   +<span class="ltx_text ltx_font_italic" id="A2.T8.1.7.6.1.1">W2C</span>
</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="A2.T8.1.7.6.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="A2.T8.1.7.6.2.1">30.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A2.T8.1.7.6.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="A2.T8.1.7.6.3.1">35.3</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>More Visual Question Answering benchmarks of <span class="ltx_text ltx_font_italic" id="A2.T8.4.1">W2C </span>on LLaVA-NeXT-7B/13B under different combination of IT datasets. The best results are <span class="ltx_text ltx_font_bold" id="A2.T8.5.2">bold</span>.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="A2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.2 </span>Code Parsing Ability Evaluation</h3>
<div class="ltx_para" id="A2.SS2.p1">
<p class="ltx_p" id="A2.SS2.p1.1">We have added an analysis of in-context learning for two representative datasets in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A2.T9" title="Table 9 ‣ B.2 Code Parsing Ability Evaluation ‣ Appendix B More experiments of W2C . ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">9</span></a>: MMStar and RefCOCOg.
It’s important to note that although we report the in-context learning results on RefCOCOg val set under the same settings, comparing these two types of outputs for grounding tasks is not practically meaningful. This is because when we instruct the <span class="ltx_text ltx_font_italic" id="A2.SS2.p1.1.1">W2C </span>-trained model to output in detailed caption format, the captions do not usually contain specific box information like [x1,y1,x2,y2]. This leads to a low IoU score for in-context learning with 2/4 shot detailed captions. However, when outputting in code format, the model does predict box information, which accounts for the significant difference in results on RefCOCOg.</p>
</div>
<figure class="ltx_table" id="A2.T9">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A2.T9.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="A2.T9.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt" id="A2.T9.1.1.1.1" style="padding-left:5.5pt;padding-right:5.5pt;">Method</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="2" id="A2.T9.1.1.1.2" style="padding-left:5.5pt;padding-right:5.5pt;">MMStar</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" colspan="2" id="A2.T9.1.1.1.3" style="padding-left:5.5pt;padding-right:5.5pt;">RefCOCOg</th>
</tr>
<tr class="ltx_tr" id="A2.T9.1.2.2">
<th class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_r" id="A2.T9.1.2.2.1" style="padding-left:5.5pt;padding-right:5.5pt;"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="A2.T9.1.2.2.2" style="padding-left:5.5pt;padding-right:5.5pt;">2-shot</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="A2.T9.1.2.2.3" style="padding-left:5.5pt;padding-right:5.5pt;">4-shot</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="A2.T9.1.2.2.4" style="padding-left:5.5pt;padding-right:5.5pt;">2-shot</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="A2.T9.1.2.2.5" style="padding-left:5.5pt;padding-right:5.5pt;">4-shot</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A2.T9.1.3.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="A2.T9.1.3.1.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_italic" id="A2.T9.1.3.1.1.1">LLaVA-NeXT-7B</span></th>
<td class="ltx_td ltx_border_t" id="A2.T9.1.3.1.2" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="A2.T9.1.3.1.3" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="A2.T9.1.3.1.4" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
<td class="ltx_td ltx_border_t" id="A2.T9.1.3.1.5" style="padding-left:5.5pt;padding-right:5.5pt;"></td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.4.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="A2.T9.1.4.2.1" style="padding-left:5.5pt;padding-right:5.5pt;">detail caption</th>
<td class="ltx_td ltx_align_center" id="A2.T9.1.4.2.2" style="padding-left:5.5pt;padding-right:5.5pt;">33.60</td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.4.2.3" style="padding-left:5.5pt;padding-right:5.5pt;">33.47</td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.4.2.4" style="padding-left:5.5pt;padding-right:5.5pt;">11.49</td>
<td class="ltx_td ltx_align_center" id="A2.T9.1.4.2.5" style="padding-left:5.5pt;padding-right:5.5pt;">19.32</td>
</tr>
<tr class="ltx_tr" id="A2.T9.1.5.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="A2.T9.1.5.3.1" style="padding-left:5.5pt;padding-right:5.5pt;">code parsing</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="A2.T9.1.5.3.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="A2.T9.1.5.3.2.1">35.13</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A2.T9.1.5.3.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="A2.T9.1.5.3.3.1">36.00</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A2.T9.1.5.3.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="A2.T9.1.5.3.4.1">49.83</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="A2.T9.1.5.3.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="A2.T9.1.5.3.5.1">51.02</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 9: </span>Comparison between detail caption and code parsing ability in few-shot evaluations on MMStar and RefCOCOg without referring to the image on LLaVA-NeXT-7B.</figcaption>
</figure>
</section>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Implementation Details for <span class="ltx_text ltx_font_italic" id="A3.1.1">W2C </span>experiments</h2>
<section class="ltx_subsection" id="A3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.1 </span>Dataset Details</h3>
<div class="ltx_para" id="A3.SS1.p1">
<p class="ltx_p" id="A3.SS1.p1.1">All the creators or original owners of assets used in the paper are credited properly, and the license and terms of use are explicitly mentioned and are respected properly. All datasets we use are from internet open-source datasets under CC-BY licenses and are cited properly.</p>
</div>
<section class="ltx_paragraph" id="A3.SS1.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Data Construction Pipeline Details</h4>
<div class="ltx_para" id="A3.SS1.SSS0.Px1.p1">
<p class="ltx_p" id="A3.SS1.SSS0.Px1.p1.1">We incorporate images from the open-source ShareGPT4V dataset, totaling approximately 87K images.
For the VLMs in our data construction pipeline, we directly use the official release checkpoints including LLaVA-1.5 and LLaVA-NeXT.</p>
</div>
<div class="ltx_para" id="A3.SS1.SSS0.Px1.p2">
<p class="ltx_p" id="A3.SS1.SSS0.Px1.p2.1">For the cost of our data construction pipeline, we use about 1/1.5 day on 32 A100s GPU for LLaVA-1.5 and about 2/3 days on 48 A100s GPU for LLaVA-NeXT.
For the data obtained by <span class="ltx_text ltx_font_italic" id="A3.SS1.SSS0.Px1.p2.1.1">W2C </span>pipeline, we get 34K from LLaVA-1.5-7B, 33K from LLaVA-1.5-13B, 37K from LLaVA-NeXT-7B, and 29K from LLaVA-NeXT-13B.
The reasons for the inconsistency in the amount of data are multifaceted. On the one hand, a minor portion of the data was discarded due to improper handling of anomalous data throughout the processing stage. On the other hand, a significant amount of data was eliminated during the consistency filtering stage owing to inconsistencies detected by the VLMs. Additionally, the generative capabilities of various VLMs vary, and the inherent randomness within VLMs themselves also contributes to these inconsistencies.</p>
</div>
</section>
<section class="ltx_paragraph" id="A3.SS1.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Training Details</h4>
<div class="ltx_para" id="A3.SS1.SSS0.Px2.p1">
<p class="ltx_p" id="A3.SS1.SSS0.Px2.p1.2">During the training of VLMs, we use different dataset combinations.
We utilize the original paper’s open-source dataset during both the PT and IT training stages for LLaVA-1.5.
In contrast, for the training of LLaVA-NeXT, the lack of disclosure regarding the specific details of the IT stage, we trained using all training set from <math alttext="\text{LLaVA}_{\text{665k}}" class="ltx_Math" display="inline" id="A3.SS1.SSS0.Px2.p1.1.m1.1"><semantics id="A3.SS1.SSS0.Px2.p1.1.m1.1a"><msub id="A3.SS1.SSS0.Px2.p1.1.m1.1.1" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1.cmml"><mtext id="A3.SS1.SSS0.Px2.p1.1.m1.1.1.2" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1.2a.cmml">LLaVA</mtext><mtext id="A3.SS1.SSS0.Px2.p1.1.m1.1.1.3" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1.3a.cmml">665k</mtext></msub><annotation-xml encoding="MathML-Content" id="A3.SS1.SSS0.Px2.p1.1.m1.1b"><apply id="A3.SS1.SSS0.Px2.p1.1.m1.1.1.cmml" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A3.SS1.SSS0.Px2.p1.1.m1.1.1.1.cmml" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1">subscript</csymbol><ci id="A3.SS1.SSS0.Px2.p1.1.m1.1.1.2a.cmml" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1.2"><mtext id="A3.SS1.SSS0.Px2.p1.1.m1.1.1.2.cmml" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1.2">LLaVA</mtext></ci><ci id="A3.SS1.SSS0.Px2.p1.1.m1.1.1.3a.cmml" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1.3"><mtext id="A3.SS1.SSS0.Px2.p1.1.m1.1.1.3.cmml" mathsize="70%" xref="A3.SS1.SSS0.Px2.p1.1.m1.1.1.3">665k</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.SSS0.Px2.p1.1.m1.1c">\text{LLaVA}_{\text{665k}}</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.SSS0.Px2.p1.1.m1.1d">LLaVA start_POSTSUBSCRIPT 665k end_POSTSUBSCRIPT</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">Liu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib30" title="">2023a</a>)</cite>, DocVQA <cite class="ltx_cite ltx_citemacro_cite">Tito et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib50" title="">2021</a>)</cite>, ChartQA <cite class="ltx_cite ltx_citemacro_cite">Masry et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib38" title="">2022</a>)</cite> and ShareGPT4V <cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib7" title="">2023a</a>)</cite>. Furthermore, by aligning our dataset with that of the original study, we achieved comparable experimental results.
We use the CLIP-pretrained ViT-L/14 <cite class="ltx_cite ltx_citemacro_cite">Radford et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#bib.bib44" title="">2021</a>)</cite> as a vision encoder, which input resolution is 336<math alttext="\times" class="ltx_Math" display="inline" id="A3.SS1.SSS0.Px2.p1.2.m2.1"><semantics id="A3.SS1.SSS0.Px2.p1.2.m2.1a"><mo id="A3.SS1.SSS0.Px2.p1.2.m2.1.1" xref="A3.SS1.SSS0.Px2.p1.2.m2.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="A3.SS1.SSS0.Px2.p1.2.m2.1b"><times id="A3.SS1.SSS0.Px2.p1.2.m2.1.1.cmml" xref="A3.SS1.SSS0.Px2.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.SSS0.Px2.p1.2.m2.1c">\times</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.SSS0.Px2.p1.2.m2.1d">×</annotation></semantics></math>336.
We freeze the vision encoder during training on the LLaVA-1.5 and only freeze the vision encoder on the PT stage during training on the LLaVA-NEXT following the original paper.
The experiments of VLM training are all conducted on 16 A100 GPUs.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="A3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.2 </span>Implementation Details of our Pipeline</h3>
<div class="ltx_para" id="A3.SS2.p1">
<p class="ltx_p" id="A3.SS2.p1.2">We employ beam search to fully leverage the powerful language generation capabilities and extensive knowledge base of VLM. This approach enables the generation of an increased number of captions, assisting us in acquiring a broader set of visual concept candidates. Due to the limitation of GPU memory, we set the generation beam to 8 on LLaVA-1.5 and 4 on LLaVA-Next.
The learning rate for the PT stage is set to <math alttext="1e^{-3}" class="ltx_Math" display="inline" id="A3.SS2.p1.1.m1.1"><semantics id="A3.SS2.p1.1.m1.1a"><mrow id="A3.SS2.p1.1.m1.1.1" xref="A3.SS2.p1.1.m1.1.1.cmml"><mn id="A3.SS2.p1.1.m1.1.1.2" xref="A3.SS2.p1.1.m1.1.1.2.cmml">1</mn><mo id="A3.SS2.p1.1.m1.1.1.1" xref="A3.SS2.p1.1.m1.1.1.1.cmml">⁢</mo><msup id="A3.SS2.p1.1.m1.1.1.3" xref="A3.SS2.p1.1.m1.1.1.3.cmml"><mi id="A3.SS2.p1.1.m1.1.1.3.2" xref="A3.SS2.p1.1.m1.1.1.3.2.cmml">e</mi><mrow id="A3.SS2.p1.1.m1.1.1.3.3" xref="A3.SS2.p1.1.m1.1.1.3.3.cmml"><mo id="A3.SS2.p1.1.m1.1.1.3.3a" xref="A3.SS2.p1.1.m1.1.1.3.3.cmml">−</mo><mn id="A3.SS2.p1.1.m1.1.1.3.3.2" xref="A3.SS2.p1.1.m1.1.1.3.3.2.cmml">3</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="A3.SS2.p1.1.m1.1b"><apply id="A3.SS2.p1.1.m1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1"><times id="A3.SS2.p1.1.m1.1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1.1"></times><cn id="A3.SS2.p1.1.m1.1.1.2.cmml" type="integer" xref="A3.SS2.p1.1.m1.1.1.2">1</cn><apply id="A3.SS2.p1.1.m1.1.1.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A3.SS2.p1.1.m1.1.1.3.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3">superscript</csymbol><ci id="A3.SS2.p1.1.m1.1.1.3.2.cmml" xref="A3.SS2.p1.1.m1.1.1.3.2">𝑒</ci><apply id="A3.SS2.p1.1.m1.1.1.3.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3"><minus id="A3.SS2.p1.1.m1.1.1.3.3.1.cmml" xref="A3.SS2.p1.1.m1.1.1.3.3"></minus><cn id="A3.SS2.p1.1.m1.1.1.3.3.2.cmml" type="integer" xref="A3.SS2.p1.1.m1.1.1.3.3.2">3</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS2.p1.1.m1.1c">1e^{-3}</annotation><annotation encoding="application/x-llamapun" id="A3.SS2.p1.1.m1.1d">1 italic_e start_POSTSUPERSCRIPT - 3 end_POSTSUPERSCRIPT</annotation></semantics></math> and the IT stage is set to <math alttext="2e^{-5}" class="ltx_Math" display="inline" id="A3.SS2.p1.2.m2.1"><semantics id="A3.SS2.p1.2.m2.1a"><mrow id="A3.SS2.p1.2.m2.1.1" xref="A3.SS2.p1.2.m2.1.1.cmml"><mn id="A3.SS2.p1.2.m2.1.1.2" xref="A3.SS2.p1.2.m2.1.1.2.cmml">2</mn><mo id="A3.SS2.p1.2.m2.1.1.1" xref="A3.SS2.p1.2.m2.1.1.1.cmml">⁢</mo><msup id="A3.SS2.p1.2.m2.1.1.3" xref="A3.SS2.p1.2.m2.1.1.3.cmml"><mi id="A3.SS2.p1.2.m2.1.1.3.2" xref="A3.SS2.p1.2.m2.1.1.3.2.cmml">e</mi><mrow id="A3.SS2.p1.2.m2.1.1.3.3" xref="A3.SS2.p1.2.m2.1.1.3.3.cmml"><mo id="A3.SS2.p1.2.m2.1.1.3.3a" xref="A3.SS2.p1.2.m2.1.1.3.3.cmml">−</mo><mn id="A3.SS2.p1.2.m2.1.1.3.3.2" xref="A3.SS2.p1.2.m2.1.1.3.3.2.cmml">5</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="A3.SS2.p1.2.m2.1b"><apply id="A3.SS2.p1.2.m2.1.1.cmml" xref="A3.SS2.p1.2.m2.1.1"><times id="A3.SS2.p1.2.m2.1.1.1.cmml" xref="A3.SS2.p1.2.m2.1.1.1"></times><cn id="A3.SS2.p1.2.m2.1.1.2.cmml" type="integer" xref="A3.SS2.p1.2.m2.1.1.2">2</cn><apply id="A3.SS2.p1.2.m2.1.1.3.cmml" xref="A3.SS2.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="A3.SS2.p1.2.m2.1.1.3.1.cmml" xref="A3.SS2.p1.2.m2.1.1.3">superscript</csymbol><ci id="A3.SS2.p1.2.m2.1.1.3.2.cmml" xref="A3.SS2.p1.2.m2.1.1.3.2">𝑒</ci><apply id="A3.SS2.p1.2.m2.1.1.3.3.cmml" xref="A3.SS2.p1.2.m2.1.1.3.3"><minus id="A3.SS2.p1.2.m2.1.1.3.3.1.cmml" xref="A3.SS2.p1.2.m2.1.1.3.3"></minus><cn id="A3.SS2.p1.2.m2.1.1.3.3.2.cmml" type="integer" xref="A3.SS2.p1.2.m2.1.1.3.3.2">5</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS2.p1.2.m2.1c">2e^{-5}</annotation><annotation encoding="application/x-llamapun" id="A3.SS2.p1.2.m2.1d">2 italic_e start_POSTSUPERSCRIPT - 5 end_POSTSUPERSCRIPT</annotation></semantics></math> for both Vicuna-7B and Vicuna-13B backbone LLM. We set the warmup ratio to 0.03, the PT stage batch size is set to 256 and the IT stage batch size is set to 128. We use model max length 2048 on LLaVA-1.5 and 4096 on LLaVA-Next for its high resolution setting.</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.3 </span>Data Example</h3>
<div class="ltx_para" id="A3.SS3.p1">
<p class="ltx_p" id="A3.SS3.p1.1">In Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.F3" title="Figure 3 ‣ C.3 Data Example ‣ Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">3</span></a> and Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.20424v1#A3.F4" title="Figure 4 ‣ C.3 Data Example ‣ Appendix C Implementation Details for W2C experiments ‣ World to Code: Multi-modal Data Generation via Self-Instructed Compositional Captioning and Filtering"><span class="ltx_text ltx_ref_tag">4</span></a>, we present images from the ShareGPT4V dataset alongside the corresponding annotations we constructed by <span class="ltx_text ltx_font_italic" id="A3.SS3.p1.1.1">W2C </span>. As shown in these images, the annotations generated entirely by the VLMs accurately describe both the global captions and the detailed captions of local entities within specific areas. Additionally, the OCR text is also encapsulated within the corresponding frames. For multiple entities present in the images, a display of group merging is also conducted.</p>
</div>
<figure class="ltx_figure" id="A3.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="1183" id="A3.F3.g1" src="x1.png" width="789"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Visualization of one <span class="ltx_text ltx_font_italic" id="A3.F3.2.1">W2C </span>sample with OCR information.</figcaption>
</figure>
<figure class="ltx_figure" id="A3.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="1183" id="A3.F4.g1" src="x2.png" width="789"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Visualization of one <span class="ltx_text ltx_font_italic" id="A3.F4.2.1">W2C </span>sample without OCR information.</figcaption>
</figure>
</section>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Mon Sep 30 06:37:58 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
