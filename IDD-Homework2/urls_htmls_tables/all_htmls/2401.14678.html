<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2401.14678] Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation</title><meta property="og:description" content="Cross-domain Recommendation (CDR) as one of the effective techniques in alleviating the data sparsity issues has been widely studied in recent years.
However, previous works may cause domain privacy leakage since they …">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2401.14678">

<!--Generated on Tue Feb 27 07:11:30 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="Cross-domain Recommendation,  Content Representation,  Federated Learning">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line ltx_leqno">
<div id="p1" class="ltx_para">
<span id="p1.1" class="ltx_ERROR undefined">\useunder</span>
<p id="p1.2" class="ltx_p"><span id="p1.2.1" class="ltx_text ltx_ulem_uline"></span><span id="p1.2.2" class="ltx_ERROR undefined">\ul</span>




















</p>
</div>
<h1 class="ltx_title ltx_title_document">Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Lei Guo
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id1.1.id1" class="ltx_text ltx_affiliation_institution">Shandong Normal University</span><span id="id2.2.id2" class="ltx_text ltx_affiliation_city">Jinan</span><span id="id3.3.id3" class="ltx_text ltx_affiliation_state">Shandong</span><span id="id4.4.id4" class="ltx_text ltx_affiliation_country">China</span><span id="id5.5.id5" class="ltx_text ltx_affiliation_postcode">250358</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:leiguo.cs@gmail.com">leiguo.cs@gmail.com</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Ziang Lu
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id6.1.id1" class="ltx_text ltx_affiliation_institution">Shandong Normal University</span><span id="id7.2.id2" class="ltx_text ltx_affiliation_city">Jinan</span><span id="id8.3.id3" class="ltx_text ltx_affiliation_state">Shandong</span><span id="id9.4.id4" class="ltx_text ltx_affiliation_country">China</span><span id="id10.5.id5" class="ltx_text ltx_affiliation_postcode">250358</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:zianglu@outlook.com">zianglu@outlook.com</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Junliang Yu
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id11.1.id1" class="ltx_text ltx_affiliation_institution">The University of Queensland</span><span id="id12.2.id2" class="ltx_text ltx_affiliation_city">Brisbane</span><span id="id13.3.id3" class="ltx_text ltx_affiliation_country">Australia</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:jl.yu@uq.edu.au">jl.yu@uq.edu.au</a>
</span></span></span>
<span class="ltx_author_before">, </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Nguyen Quoc Viet Hung
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id14.1.id1" class="ltx_text ltx_affiliation_institution">Griffith University</span><span id="id15.2.id2" class="ltx_text ltx_affiliation_city">Gold Coast</span><span id="id16.3.id3" class="ltx_text ltx_affiliation_country">Australia</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:quocviethung1@gmail.com">quocviethung1@gmail.com</a>
</span></span></span>
<span class="ltx_author_before"> and </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Hongzhi Yin
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id17.1.id1" class="ltx_text ltx_affiliation_institution">The University of Queensland</span><span id="id18.2.id2" class="ltx_text ltx_affiliation_city">Brisbane</span><span id="id19.3.id3" class="ltx_text ltx_affiliation_country">Australia</span>
</span>
<span class="ltx_contact ltx_role_email"><a href="mailto:h.yin1@uq.edu.au">h.yin1@uq.edu.au</a>
</span></span></span>
</div>
<div class="ltx_dates">(2024)</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract.</h6>
<p id="id20.id1" class="ltx_p"><span title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Cross-domain Recommendation</span></span> (<abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>) as one of the effective techniques in alleviating the data sparsity issues has been widely studied in recent years.
However, previous works may cause domain privacy leakage since they necessitate the aggregation of diverse domain data into a centralized server during the training process.
Though several studies have conducted privacy preserving <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> via  <span title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Federated Learning</span></span> (<abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr>), they still have the following limitations: 1) They need to upload users’ personal information to the central server, posing the risk of leaking user privacy.
2) Existing federated methods mainly rely on atomic item IDs to represent items, which prevents them from modeling items in a unified feature space, increasing the challenge of knowledge transfer among domains.
3) They are all based on the premise of knowing overlapped users between domains, which proves impractical in real-world applications.
To address the above limitations, we focus on  <span title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Privacy-preserving Cross-domain Recommendation</span></span> (<abbr title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PCDR</span></abbr>) and propose PFCR as our solution.
For Limitation 1, we develop a <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr> schema by exclusively utilizing users’ interactions with local clients and devising an encryption method for gradient encryption. For Limitation 2, we model items in a universal feature space by their description texts.
For Limitation 3, we initially learn federated content representations, harnessing the generality of natural language to establish bridges between domains. Subsequently, we craft two prompt fine-tuning strategies to tailor the pre-trained model to the target domain.
Extensive experiments on two real-world datasets demonstrate the superiority of our PFCR method compared to the SOTA approaches. Our source codes are available at: <a target="_blank" href="https://github.com/Ckano/PFCR" title="" class="ltx_ref ltx_url ltx_font_typewriter" style="color:#0000FF;">https://github.com/Ckano/PFCR</a>.</p>
</div>
<div class="ltx_keywords">Cross-domain Recommendation, Content Representation, Federated Learning
</div>
<span id="id1" class="ltx_note ltx_note_frontmatter ltx_role_journalyear"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">journalyear: </span>2024</span></span></span><span id="id2" class="ltx_note ltx_note_frontmatter ltx_role_copyright"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">copyright: </span>acmlicensed</span></span></span><span id="id3" class="ltx_note ltx_note_frontmatter ltx_role_conference"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">conference: </span>Proceedings of the ACM Web Conference 2024; May 13–17, 2024; Singapore, Singapore.</span></span></span><span id="id4" class="ltx_note ltx_note_frontmatter ltx_role_booktitle"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">booktitle: </span>Proceedings of the ACM Web Conference 2024 (WWW ’24), May 13–17, 2024, Singapore, Singapore</span></span></span><span id="id5" class="ltx_note ltx_note_frontmatter ltx_role_price"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">price: </span>15.00</span></span></span><span id="id6" class="ltx_note ltx_note_frontmatter ltx_role_isbn"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">isbn: </span>979-8-4007-0171-9/24/05</span></span></span><span id="id7" class="ltx_note ltx_note_frontmatter ltx_role_doi"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">doi: </span>10.1145/XXXXXX.XXXXXX</span></span></span><span id="id8" class="ltx_note ltx_note_frontmatter ltx_role_ccs"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">ccs: </span>Information systems Recommender systems</span></span></span>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1. </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p"><span title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Cross-domain Recommendation</span></span> (<abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>) is a prediction task that aims to improve recommendation quality by leveraging knowledge from multiple domains. It relies on shared patterns and latent correlations, extending recommendations beyond single domains.
Techniques such as domain adaptation and transfer learning play a vital role in information migration <cite class="ltx_cite ltx_citemacro_citep">(Guo et al<span class="ltx_text">.</span>, <a href="#bib.bib9" title="" class="ltx_ref">2021</a>; Li et al<span class="ltx_text">.</span>, <a href="#bib.bib20" title="" class="ltx_ref">2023b</a>; Guo et al<span class="ltx_text">.</span>, <a href="#bib.bib8" title="" class="ltx_ref">2023a</a>)</cite>, and have achieved great success in attaining distinguished recommendations.
However, a primary limitation of existing <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> methods is that they may leak domain privacy because of the centralized training schema.
Direct data aggregation proves infeasible due to safeguards protecting trade secrets, exemplified by regulations such as the  <span title="General Data Protection Regulation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">General Data Protection Regulation</span></span> (<abbr title="General Data Protection Regulation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">GDPR</span></abbr>) <cite class="ltx_cite ltx_citemacro_citep">(Voigt and Von dem Bussche, <a href="#bib.bib39" title="" class="ltx_ref">2017</a>)</cite>.
Furthermore, prior studies grapple with another limitation by aligning domains through direct utilization of users’ identity information, under the assumption of overlap. This approach is also unfeasible in many real-world <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> scenarios, chiefly due to user privacy concerns. For instance, users registering for personal services on one platform typically harbor reservations about exposing their identity to other platforms.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">Recently, several studies have been focused on conducting privacy preserving in <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> tasks <cite class="ltx_cite ltx_citemacro_citep">(Bonawitz et al<span class="ltx_text">.</span>, <a href="#bib.bib2" title="" class="ltx_ref">2017</a>; Mai and Pang, <a href="#bib.bib26" title="" class="ltx_ref">2023</a>; Chen et al<span class="ltx_text">.</span>, <a href="#bib.bib3" title="" class="ltx_ref">2022</a>; Hao et al<span class="ltx_text">.</span>, <a href="#bib.bib11" title="" class="ltx_ref">2023</a>)</cite>. For instance,
Mai et al. <cite class="ltx_cite ltx_citemacro_citep">(Mai and Pang, <a href="#bib.bib26" title="" class="ltx_ref">2023</a>)</cite> propose a federated GNN-based recommender system with random projection to prevent de-anonymization attacks, and a ternary quantization strategy to avoid user privacy leakage.
However, previous methods solving <abbr title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PCDR</span></abbr> still suffer from the following limitations:
1) They need to upload users’ personal information, such as user embedding or user-related model parameters, to the central server.
Despite the encryption of user information, there remains a potential for divulging users’ private data, as achieving a balance between information encryption and method efficacy is challenging.
2) Existing federated methods predominantly rely on atomic IDs for item modeling, making it challenging to learn unified item representations.
The uniqueness of items in different domains and the non-IID nature of data distributions pose difficulties in modeling items within a unified feature space. This limitation impedes the acquisition of universal item representations and hampers knowledge transfer across domains.
3) These methods are premised on the assumption of knowing overlapping users across domains, enabling domain alignment and <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>. However, this assumption carries the risk of serious privacy breaches, as it necessitates the use of users’ identity information. Furthermore, identifying common users between domains can expose individuals to de-anonymization attacks, as organizations may exploit this information to infer user preferences in other domains.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">To address these limitations, we target  <span title="Domain-level Privacy-preserving Cross-domain Sequential Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Domain-level Privacy-preserving Cross-domain Sequential Recommendation</span></span> (<abbr title="Domain-level Privacy-preserving Cross-domain Sequential Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DPCSR</span></abbr>) and propose a  <span title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Prompt-enhanced Federated Content Representation</span></span> (<abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>) paradigm as our solution.
We consider the sequential characteristic in <abbr title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PCDR</span></abbr> since it is a common practice to organize users’ behaviors into sequences.
Specifically, to mitigate <span id="S1.p3.1.1" class="ltx_text ltx_font_bold">Limitation 1</span>, we propose a federated content representation learning schema, treating domains as clients, with a central server responsible for parameter updates (FedAvg <cite class="ltx_cite ltx_citemacro_citep">(McMahan et al<span class="ltx_text">.</span>, <a href="#bib.bib27" title="" class="ltx_ref">2017</a>)</cite> is applied).
In <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>, the gradients related to content representations can be shared across domains (the encryption strategy is also applied), while the user-related gradients are strictly prohibited to prevent privacy leakage.
To deal with <span id="S1.p3.1.2" class="ltx_text ltx_font_bold">Limitation 2</span>, we model items as language representations (i.e., <span id="S1.p3.1.3" class="ltx_text ltx_font_italic">semantic ID</span>) by the associated description text of them so as to learn universal item representations, where the natural language plays the role of a general semantic bridging different domains.
Compared with <span id="S1.p3.1.4" class="ltx_text ltx_font_italic">atomic item ID</span>, <span id="S1.p3.1.5" class="ltx_text ltx_font_italic">semantic ID</span> enables us to represent different domain items in the same semantic space and simultaneously avoids the huge memory and storage footprint caused by the huge number of items in modern recommender systems.
To tackle <span id="S1.p3.1.6" class="ltx_text ltx_font_bold">Limitation 3</span>, we
initially pre-train the federated content representations to fuse non-overlapped domains by leveraging the generality of natural languages, where a global <span id="S1.p3.1.7" class="ltx_text ltx_font_italic">code embedding table</span> under a universal semantic space is learned.
Subsequently, to adapt the pre-learned knowledge to specific domains, we fine-tune the pre-trained content representations and model parameters with two kinds of prompting strategies.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">The main contributions of this work can be summarized as:</p>
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p">We target <abbr title="Domain-level Privacy-preserving Cross-domain Sequential Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DPCSR</span></abbr> and solve it by proposing <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>, where a federated content representation learning schema and a prompt-enhanced fine-tuning paradigm are developed for domain transfer under the non-overlapping scenario.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p">We model items in different domains as vector-quantified representations on the basis of their associated description texts, so as to unify them in the same semantic space.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p">We develop a federated content representation learning framework for <abbr title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PCDR</span></abbr> in the non-overlapping scenario by leveraging the generality of natural languages.</p>
</div>
</li>
<li id="S1.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i4.p1" class="ltx_para">
<p id="S1.I1.i4.p1.1" class="ltx_p">We design two prompting strategies, namely full prompting, and light prompting, to adapt the pre-learned domain knowledge to the target domain.</p>
</div>
</li>
<li id="S1.I1.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i5.p1" class="ltx_para">
<p id="S1.I1.i5.p1.1" class="ltx_p">We conduct extensive experiments on two real-world datasets, and the experimental results consistently demonstrate the superiority of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> compared with other SOTA methods.</p>
</div>
</li>
</ul>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2. </span>Related Work</h2>

<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1. </span>Federated Cross-domain Recommendation</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">Existing  <span title="Federated Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Federated Cross-domain Recommendation</span></span> (<abbr title="Federated Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCDR</span></abbr>) studies can be categorized into  <span title="Cross-Silo Federated Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Cross-Silo Federated Recommendation</span></span> (<abbr title="Cross-Silo Federated Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CSFR</span></abbr>) and  <span title="Cross-User Federated Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Cross-User Federated Recommendation</span></span> (<abbr title="Cross-User Federated Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CUFR</span></abbr>) methods according to the nature of clients.
<abbr title="Cross-Silo Federated Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CSFR</span></abbr> refers to <abbr title="Federated Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCDR</span></abbr> among organizations and focus on preserving domain-level privacy <cite class="ltx_cite ltx_citemacro_citep">(Zhang and Jiang, <a href="#bib.bib52" title="" class="ltx_ref">2021</a>; Chen et al<span class="ltx_text">.</span>, <a href="#bib.bib3" title="" class="ltx_ref">2022</a>, <a href="#bib.bib4" title="" class="ltx_ref">2023</a>; Mai and Pang, <a href="#bib.bib26" title="" class="ltx_ref">2023</a>; Lin et al<span class="ltx_text">.</span>, <a href="#bib.bib24" title="" class="ltx_ref">2021</a>; Wan et al<span class="ltx_text">.</span>, <a href="#bib.bib40" title="" class="ltx_ref">2023</a>)</cite>.
For example,
Wan et al. <cite class="ltx_cite ltx_citemacro_citep">(Wan et al<span class="ltx_text">.</span>, <a href="#bib.bib40" title="" class="ltx_ref">2023</a>)</cite> devise a privacy-preserving double distillation framework (FedPDD) for <abbr title="Cross-Silo Federated Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CSFR</span></abbr> to solve the limited overlapping user issue, which exploits a double distillation strategy to learn both explicit and implicit knowledge, and an offline training schema to prevent privacy leakage.
In <abbr title="Cross-User Federated Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CUFR</span></abbr>, each user is served as a client and tends to conduct user-level privacy preserving by <abbr title="Federated Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCDR</span></abbr> <cite class="ltx_cite ltx_citemacro_citep">(Yan et al<span class="ltx_text">.</span>, <a href="#bib.bib49" title="" class="ltx_ref">2022</a>; Meihan et al<span class="ltx_text">.</span>, <a href="#bib.bib28" title="" class="ltx_ref">2022</a>)</cite>.
For instance, Yan et al. <cite class="ltx_cite ltx_citemacro_citep">(Yan et al<span class="ltx_text">.</span>, <a href="#bib.bib49" title="" class="ltx_ref">2022</a>)</cite> train a general recommendation model on each user’s personal device to avoid the leakage of user privacy and devise an embedding
transformation mechanism on the server side for knowledge transfer.
However, existing studies mainly rely on all or part of the overlapped users for <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>, and cannot be applied to scenarios in which users are non-overlapped across domains.
Our solution falls into the <abbr title="Cross-Silo Federated Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CSFR</span></abbr> category and tends to solve <abbr title="Domain-level Privacy-preserving Cross-domain Sequential Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DPCSR</span></abbr> by proposing a <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr> framework with federated content representations.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2. </span>Recommendation with Item Text</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">Recently, several recommendation methods have been focused on leveraging the content information to represent items to explore the generality of natural languages. Depending on whether text representation is directly used for recommendations, existing studies can be categorized into text representation <cite class="ltx_cite ltx_citemacro_citep">(Hou et al<span class="ltx_text">.</span>, <a href="#bib.bib14" title="" class="ltx_ref">2022</a>; Li et al<span class="ltx_text">.</span>, <a href="#bib.bib22" title="" class="ltx_ref">2023a</a>; Mu et al<span class="ltx_text">.</span>, <a href="#bib.bib29" title="" class="ltx_ref">2022</a>; Shin et al<span class="ltx_text">.</span>, <a href="#bib.bib34" title="" class="ltx_ref">2021</a>)</cite> and code representation-based methods <cite class="ltx_cite ltx_citemacro_citep">(Hou et al<span class="ltx_text">.</span>, <a href="#bib.bib13" title="" class="ltx_ref">2023</a>; Rajput et al<span class="ltx_text">.</span>, <a href="#bib.bib31" title="" class="ltx_ref">2023</a>)</cite>.
For example, Hou et al. <cite class="ltx_cite ltx_citemacro_citep">(Hou et al<span class="ltx_text">.</span>, <a href="#bib.bib14" title="" class="ltx_ref">2022</a>)</cite> design a text representation-based method in the universal sequence representation approach (UnisRec) by utilizing a  <span title="Pre-trained Language Models" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Pre-trained Language Models</span></span> (<abbr title="Pre-trained Language Models" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PLM</span></abbr>), where the semantic item encoding is obtained and participates in sentence modeling.
But this kind of method is too strict in binding item text and its representation, causing the model to pay much attention to the text features.
To address this, Hou et al. <cite class="ltx_cite ltx_citemacro_citep">(Hou et al<span class="ltx_text">.</span>, <a href="#bib.bib13" title="" class="ltx_ref">2023</a>)</cite> first convert the text of the item into a series of distinct indices called ”item codes”, and then learn this  ac VQ item representations by engaging with these codes.
However, the above methods are all based on a centralized training schema, and none of them consider the generality of contents in helping <abbr title="Federated Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCDR</span></abbr>.</p>
</div>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3. </span>Recommendation with Prompt tuning</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.1" class="ltx_p">Prompt tuning, initially introduced in the field of NLP, involves designing specific input and output formats to guide <abbr title="Pre-trained Language Models" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PLM</span></abbr> in performing specific tasks.
Recent researchers have also used prompt tuning to solve the cold-start <cite class="ltx_cite ltx_citemacro_citep">(Wu et al<span class="ltx_text">.</span>, <a href="#bib.bib47" title="" class="ltx_ref">2022</a>, <a href="#bib.bib46" title="" class="ltx_ref">2023</a>; Sanner et al<span class="ltx_text">.</span>, <a href="#bib.bib33" title="" class="ltx_ref">2023</a>)</cite> and cross-domain <cite class="ltx_cite ltx_citemacro_citep">(Wang et al<span class="ltx_text">.</span>, <a href="#bib.bib43" title="" class="ltx_ref">2023</a>; Guo et al<span class="ltx_text">.</span>, <a href="#bib.bib10" title="" class="ltx_ref">2023b</a>)</cite> issues in recommender systems.
For example,
Wang et al. <cite class="ltx_cite ltx_citemacro_citep">(Wang et al<span class="ltx_text">.</span>, <a href="#bib.bib43" title="" class="ltx_ref">2023</a>)</cite> propose a prompt-enhanced paradigm for multi-target <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>, where a unified recommendation model is first pre-trained using data from all the domains, then the prompt tuning process is conducted to capture the distinctions among various domains and users.
Though the prompt tuning methods have been widely studied, they are mainly utilized for domain adaption or zero-shot issues, and few of them focus on solving the <abbr title="Federated Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCDR</span></abbr> task, which is one of the main purposes of this work.</p>
</div>
<figure id="S2.F1" class="ltx_figure"><img src="/html/2401.14678/assets/x1.png" id="S2.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="499" height="246" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1. </span>The system architecture of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> in the pre-training stage. In <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>, the <span id="S2.F1.2.1" class="ltx_text ltx_font_italic">code embedding table</span> is pre-learned federally. The orange color within it denotes the index embeddings shared by all the clients, and the blue color indicates the index embedding that only appears in the current client.</figcaption>
</figure>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3. </span>Methodologies</h2>

<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1. </span>Preliminaries</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.16" class="ltx_p">Suppose we have two domains A and B.
Let <math id="S3.SS1.p1.1.m1.4" class="ltx_Math" alttext="\mathcal{U}^{A}=\{u_{1}^{A},u_{2}^{A},\ldots,u_{m_{A}}^{A}\}" display="inline"><semantics id="S3.SS1.p1.1.m1.4a"><mrow id="S3.SS1.p1.1.m1.4.4" xref="S3.SS1.p1.1.m1.4.4.cmml"><msup id="S3.SS1.p1.1.m1.4.4.5" xref="S3.SS1.p1.1.m1.4.4.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.1.m1.4.4.5.2" xref="S3.SS1.p1.1.m1.4.4.5.2.cmml">𝒰</mi><mi id="S3.SS1.p1.1.m1.4.4.5.3" xref="S3.SS1.p1.1.m1.4.4.5.3.cmml">A</mi></msup><mo id="S3.SS1.p1.1.m1.4.4.4" xref="S3.SS1.p1.1.m1.4.4.4.cmml">=</mo><mrow id="S3.SS1.p1.1.m1.4.4.3.3" xref="S3.SS1.p1.1.m1.4.4.3.4.cmml"><mo stretchy="false" id="S3.SS1.p1.1.m1.4.4.3.3.4" xref="S3.SS1.p1.1.m1.4.4.3.4.cmml">{</mo><msubsup id="S3.SS1.p1.1.m1.2.2.1.1.1" xref="S3.SS1.p1.1.m1.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.1.m1.2.2.1.1.1.2.2" xref="S3.SS1.p1.1.m1.2.2.1.1.1.2.2.cmml">u</mi><mn id="S3.SS1.p1.1.m1.2.2.1.1.1.2.3" xref="S3.SS1.p1.1.m1.2.2.1.1.1.2.3.cmml">1</mn><mi id="S3.SS1.p1.1.m1.2.2.1.1.1.3" xref="S3.SS1.p1.1.m1.2.2.1.1.1.3.cmml">A</mi></msubsup><mo id="S3.SS1.p1.1.m1.4.4.3.3.5" xref="S3.SS1.p1.1.m1.4.4.3.4.cmml">,</mo><msubsup id="S3.SS1.p1.1.m1.3.3.2.2.2" xref="S3.SS1.p1.1.m1.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.1.m1.3.3.2.2.2.2.2" xref="S3.SS1.p1.1.m1.3.3.2.2.2.2.2.cmml">u</mi><mn id="S3.SS1.p1.1.m1.3.3.2.2.2.2.3" xref="S3.SS1.p1.1.m1.3.3.2.2.2.2.3.cmml">2</mn><mi id="S3.SS1.p1.1.m1.3.3.2.2.2.3" xref="S3.SS1.p1.1.m1.3.3.2.2.2.3.cmml">A</mi></msubsup><mo id="S3.SS1.p1.1.m1.4.4.3.3.6" xref="S3.SS1.p1.1.m1.4.4.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">…</mi><mo id="S3.SS1.p1.1.m1.4.4.3.3.7" xref="S3.SS1.p1.1.m1.4.4.3.4.cmml">,</mo><msubsup id="S3.SS1.p1.1.m1.4.4.3.3.3" xref="S3.SS1.p1.1.m1.4.4.3.3.3.cmml"><mi id="S3.SS1.p1.1.m1.4.4.3.3.3.2.2" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.2.cmml">u</mi><msub id="S3.SS1.p1.1.m1.4.4.3.3.3.2.3" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.cmml"><mi id="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.2" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.2.cmml">m</mi><mi id="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.3" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.3.cmml">A</mi></msub><mi id="S3.SS1.p1.1.m1.4.4.3.3.3.3" xref="S3.SS1.p1.1.m1.4.4.3.3.3.3.cmml">A</mi></msubsup><mo stretchy="false" id="S3.SS1.p1.1.m1.4.4.3.3.8" xref="S3.SS1.p1.1.m1.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.4b"><apply id="S3.SS1.p1.1.m1.4.4.cmml" xref="S3.SS1.p1.1.m1.4.4"><eq id="S3.SS1.p1.1.m1.4.4.4.cmml" xref="S3.SS1.p1.1.m1.4.4.4"></eq><apply id="S3.SS1.p1.1.m1.4.4.5.cmml" xref="S3.SS1.p1.1.m1.4.4.5"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.4.4.5.1.cmml" xref="S3.SS1.p1.1.m1.4.4.5">superscript</csymbol><ci id="S3.SS1.p1.1.m1.4.4.5.2.cmml" xref="S3.SS1.p1.1.m1.4.4.5.2">𝒰</ci><ci id="S3.SS1.p1.1.m1.4.4.5.3.cmml" xref="S3.SS1.p1.1.m1.4.4.5.3">𝐴</ci></apply><set id="S3.SS1.p1.1.m1.4.4.3.4.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3"><apply id="S3.SS1.p1.1.m1.2.2.1.1.1.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1.1">superscript</csymbol><apply id="S3.SS1.p1.1.m1.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.2.2.1.1.1.2.1.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.1.m1.2.2.1.1.1.2.2.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1.1.2.2">𝑢</ci><cn type="integer" id="S3.SS1.p1.1.m1.2.2.1.1.1.2.3.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1.1.2.3">1</cn></apply><ci id="S3.SS1.p1.1.m1.2.2.1.1.1.3.cmml" xref="S3.SS1.p1.1.m1.2.2.1.1.1.3">𝐴</ci></apply><apply id="S3.SS1.p1.1.m1.3.3.2.2.2.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2.2">superscript</csymbol><apply id="S3.SS1.p1.1.m1.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.3.3.2.2.2.2.1.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.1.m1.3.3.2.2.2.2.2.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2.2.2.2">𝑢</ci><cn type="integer" id="S3.SS1.p1.1.m1.3.3.2.2.2.2.3.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2.2.2.3">2</cn></apply><ci id="S3.SS1.p1.1.m1.3.3.2.2.2.3.cmml" xref="S3.SS1.p1.1.m1.3.3.2.2.2.3">𝐴</ci></apply><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">…</ci><apply id="S3.SS1.p1.1.m1.4.4.3.3.3.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.4.4.3.3.3.1.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3">superscript</csymbol><apply id="S3.SS1.p1.1.m1.4.4.3.3.3.2.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.4.4.3.3.3.2.1.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.1.m1.4.4.3.3.3.2.2.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.2">𝑢</ci><apply id="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.3"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.1.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.3">subscript</csymbol><ci id="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.2.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.2">𝑚</ci><ci id="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.3.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3.2.3.3">𝐴</ci></apply></apply><ci id="S3.SS1.p1.1.m1.4.4.3.3.3.3.cmml" xref="S3.SS1.p1.1.m1.4.4.3.3.3.3">𝐴</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.4c">\mathcal{U}^{A}=\{u_{1}^{A},u_{2}^{A},\ldots,u_{m_{A}}^{A}\}</annotation></semantics></math> and <math id="S3.SS1.p1.2.m2.4" class="ltx_Math" alttext="\mathcal{U}^{B}=\{u_{1}^{B},u_{2}^{B},\ldots,u_{m_{B}}^{B}\}" display="inline"><semantics id="S3.SS1.p1.2.m2.4a"><mrow id="S3.SS1.p1.2.m2.4.4" xref="S3.SS1.p1.2.m2.4.4.cmml"><msup id="S3.SS1.p1.2.m2.4.4.5" xref="S3.SS1.p1.2.m2.4.4.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.2.m2.4.4.5.2" xref="S3.SS1.p1.2.m2.4.4.5.2.cmml">𝒰</mi><mi id="S3.SS1.p1.2.m2.4.4.5.3" xref="S3.SS1.p1.2.m2.4.4.5.3.cmml">B</mi></msup><mo id="S3.SS1.p1.2.m2.4.4.4" xref="S3.SS1.p1.2.m2.4.4.4.cmml">=</mo><mrow id="S3.SS1.p1.2.m2.4.4.3.3" xref="S3.SS1.p1.2.m2.4.4.3.4.cmml"><mo stretchy="false" id="S3.SS1.p1.2.m2.4.4.3.3.4" xref="S3.SS1.p1.2.m2.4.4.3.4.cmml">{</mo><msubsup id="S3.SS1.p1.2.m2.2.2.1.1.1" xref="S3.SS1.p1.2.m2.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.2.m2.2.2.1.1.1.2.2" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2.2.cmml">u</mi><mn id="S3.SS1.p1.2.m2.2.2.1.1.1.2.3" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2.3.cmml">1</mn><mi id="S3.SS1.p1.2.m2.2.2.1.1.1.3" xref="S3.SS1.p1.2.m2.2.2.1.1.1.3.cmml">B</mi></msubsup><mo id="S3.SS1.p1.2.m2.4.4.3.3.5" xref="S3.SS1.p1.2.m2.4.4.3.4.cmml">,</mo><msubsup id="S3.SS1.p1.2.m2.3.3.2.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.2.m2.3.3.2.2.2.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.2.2.2.cmml">u</mi><mn id="S3.SS1.p1.2.m2.3.3.2.2.2.2.3" xref="S3.SS1.p1.2.m2.3.3.2.2.2.2.3.cmml">2</mn><mi id="S3.SS1.p1.2.m2.3.3.2.2.2.3" xref="S3.SS1.p1.2.m2.3.3.2.2.2.3.cmml">B</mi></msubsup><mo id="S3.SS1.p1.2.m2.4.4.3.3.6" xref="S3.SS1.p1.2.m2.4.4.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml">…</mi><mo id="S3.SS1.p1.2.m2.4.4.3.3.7" xref="S3.SS1.p1.2.m2.4.4.3.4.cmml">,</mo><msubsup id="S3.SS1.p1.2.m2.4.4.3.3.3" xref="S3.SS1.p1.2.m2.4.4.3.3.3.cmml"><mi id="S3.SS1.p1.2.m2.4.4.3.3.3.2.2" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.2.cmml">u</mi><msub id="S3.SS1.p1.2.m2.4.4.3.3.3.2.3" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.cmml"><mi id="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.2" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.2.cmml">m</mi><mi id="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.3" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.3.cmml">B</mi></msub><mi id="S3.SS1.p1.2.m2.4.4.3.3.3.3" xref="S3.SS1.p1.2.m2.4.4.3.3.3.3.cmml">B</mi></msubsup><mo stretchy="false" id="S3.SS1.p1.2.m2.4.4.3.3.8" xref="S3.SS1.p1.2.m2.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.4b"><apply id="S3.SS1.p1.2.m2.4.4.cmml" xref="S3.SS1.p1.2.m2.4.4"><eq id="S3.SS1.p1.2.m2.4.4.4.cmml" xref="S3.SS1.p1.2.m2.4.4.4"></eq><apply id="S3.SS1.p1.2.m2.4.4.5.cmml" xref="S3.SS1.p1.2.m2.4.4.5"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.4.4.5.1.cmml" xref="S3.SS1.p1.2.m2.4.4.5">superscript</csymbol><ci id="S3.SS1.p1.2.m2.4.4.5.2.cmml" xref="S3.SS1.p1.2.m2.4.4.5.2">𝒰</ci><ci id="S3.SS1.p1.2.m2.4.4.5.3.cmml" xref="S3.SS1.p1.2.m2.4.4.5.3">𝐵</ci></apply><set id="S3.SS1.p1.2.m2.4.4.3.4.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3"><apply id="S3.SS1.p1.2.m2.2.2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1">superscript</csymbol><apply id="S3.SS1.p1.2.m2.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.2.2.1.1.1.2.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.2.m2.2.2.1.1.1.2.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2.2">𝑢</ci><cn type="integer" id="S3.SS1.p1.2.m2.2.2.1.1.1.2.3.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.2.3">1</cn></apply><ci id="S3.SS1.p1.2.m2.2.2.1.1.1.3.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.1.3">𝐵</ci></apply><apply id="S3.SS1.p1.2.m2.3.3.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2">superscript</csymbol><apply id="S3.SS1.p1.2.m2.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.3.3.2.2.2.2.1.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.2.m2.3.3.2.2.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2.2.2">𝑢</ci><cn type="integer" id="S3.SS1.p1.2.m2.3.3.2.2.2.2.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2.2.3">2</cn></apply><ci id="S3.SS1.p1.2.m2.3.3.2.2.2.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2.3">𝐵</ci></apply><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">…</ci><apply id="S3.SS1.p1.2.m2.4.4.3.3.3.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.4.4.3.3.3.1.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3">superscript</csymbol><apply id="S3.SS1.p1.2.m2.4.4.3.3.3.2.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.4.4.3.3.3.2.1.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.2.m2.4.4.3.3.3.2.2.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.2">𝑢</ci><apply id="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.3"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.1.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.3">subscript</csymbol><ci id="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.2.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.2">𝑚</ci><ci id="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.3.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3.2.3.3">𝐵</ci></apply></apply><ci id="S3.SS1.p1.2.m2.4.4.3.3.3.3.cmml" xref="S3.SS1.p1.2.m2.4.4.3.3.3.3">𝐵</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.4c">\mathcal{U}^{B}=\{u_{1}^{B},u_{2}^{B},\ldots,u_{m_{B}}^{B}\}</annotation></semantics></math> be the user sets, <math id="S3.SS1.p1.3.m3.4" class="ltx_Math" alttext="\mathcal{A}=\{A_{1},A_{2},\ldots,A_{M_{A}}\}" display="inline"><semantics id="S3.SS1.p1.3.m3.4a"><mrow id="S3.SS1.p1.3.m3.4.4" xref="S3.SS1.p1.3.m3.4.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.3.m3.4.4.5" xref="S3.SS1.p1.3.m3.4.4.5.cmml">𝒜</mi><mo id="S3.SS1.p1.3.m3.4.4.4" xref="S3.SS1.p1.3.m3.4.4.4.cmml">=</mo><mrow id="S3.SS1.p1.3.m3.4.4.3.3" xref="S3.SS1.p1.3.m3.4.4.3.4.cmml"><mo stretchy="false" id="S3.SS1.p1.3.m3.4.4.3.3.4" xref="S3.SS1.p1.3.m3.4.4.3.4.cmml">{</mo><msub id="S3.SS1.p1.3.m3.2.2.1.1.1" xref="S3.SS1.p1.3.m3.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.3.m3.2.2.1.1.1.2" xref="S3.SS1.p1.3.m3.2.2.1.1.1.2.cmml">A</mi><mn id="S3.SS1.p1.3.m3.2.2.1.1.1.3" xref="S3.SS1.p1.3.m3.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p1.3.m3.4.4.3.3.5" xref="S3.SS1.p1.3.m3.4.4.3.4.cmml">,</mo><msub id="S3.SS1.p1.3.m3.3.3.2.2.2" xref="S3.SS1.p1.3.m3.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.3.m3.3.3.2.2.2.2" xref="S3.SS1.p1.3.m3.3.3.2.2.2.2.cmml">A</mi><mn id="S3.SS1.p1.3.m3.3.3.2.2.2.3" xref="S3.SS1.p1.3.m3.3.3.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS1.p1.3.m3.4.4.3.3.6" xref="S3.SS1.p1.3.m3.4.4.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml">…</mi><mo id="S3.SS1.p1.3.m3.4.4.3.3.7" xref="S3.SS1.p1.3.m3.4.4.3.4.cmml">,</mo><msub id="S3.SS1.p1.3.m3.4.4.3.3.3" xref="S3.SS1.p1.3.m3.4.4.3.3.3.cmml"><mi id="S3.SS1.p1.3.m3.4.4.3.3.3.2" xref="S3.SS1.p1.3.m3.4.4.3.3.3.2.cmml">A</mi><msub id="S3.SS1.p1.3.m3.4.4.3.3.3.3" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3.cmml"><mi id="S3.SS1.p1.3.m3.4.4.3.3.3.3.2" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3.2.cmml">M</mi><mi id="S3.SS1.p1.3.m3.4.4.3.3.3.3.3" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3.3.cmml">A</mi></msub></msub><mo stretchy="false" id="S3.SS1.p1.3.m3.4.4.3.3.8" xref="S3.SS1.p1.3.m3.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.4b"><apply id="S3.SS1.p1.3.m3.4.4.cmml" xref="S3.SS1.p1.3.m3.4.4"><eq id="S3.SS1.p1.3.m3.4.4.4.cmml" xref="S3.SS1.p1.3.m3.4.4.4"></eq><ci id="S3.SS1.p1.3.m3.4.4.5.cmml" xref="S3.SS1.p1.3.m3.4.4.5">𝒜</ci><set id="S3.SS1.p1.3.m3.4.4.3.4.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3"><apply id="S3.SS1.p1.3.m3.2.2.1.1.1.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.3.m3.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1.2">𝐴</ci><cn type="integer" id="S3.SS1.p1.3.m3.2.2.1.1.1.3.cmml" xref="S3.SS1.p1.3.m3.2.2.1.1.1.3">1</cn></apply><apply id="S3.SS1.p1.3.m3.3.3.2.2.2.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.3.m3.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2.2">𝐴</ci><cn type="integer" id="S3.SS1.p1.3.m3.3.3.2.2.2.3.cmml" xref="S3.SS1.p1.3.m3.3.3.2.2.2.3">2</cn></apply><ci id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">…</ci><apply id="S3.SS1.p1.3.m3.4.4.3.3.3.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.4.4.3.3.3.1.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.3.m3.4.4.3.3.3.2.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3.2">𝐴</ci><apply id="S3.SS1.p1.3.m3.4.4.3.3.3.3.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.4.4.3.3.3.3.1.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.3.m3.4.4.3.3.3.3.2.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3.2">𝑀</ci><ci id="S3.SS1.p1.3.m3.4.4.3.3.3.3.3.cmml" xref="S3.SS1.p1.3.m3.4.4.3.3.3.3.3">𝐴</ci></apply></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.4c">\mathcal{A}=\{A_{1},A_{2},\ldots,A_{M_{A}}\}</annotation></semantics></math> and <math id="S3.SS1.p1.4.m4.4" class="ltx_Math" alttext="\mathcal{B}=\{B_{1},B_{2},\ldots,B_{M_{B}}\}" display="inline"><semantics id="S3.SS1.p1.4.m4.4a"><mrow id="S3.SS1.p1.4.m4.4.4" xref="S3.SS1.p1.4.m4.4.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.4.m4.4.4.5" xref="S3.SS1.p1.4.m4.4.4.5.cmml">ℬ</mi><mo id="S3.SS1.p1.4.m4.4.4.4" xref="S3.SS1.p1.4.m4.4.4.4.cmml">=</mo><mrow id="S3.SS1.p1.4.m4.4.4.3.3" xref="S3.SS1.p1.4.m4.4.4.3.4.cmml"><mo stretchy="false" id="S3.SS1.p1.4.m4.4.4.3.3.4" xref="S3.SS1.p1.4.m4.4.4.3.4.cmml">{</mo><msub id="S3.SS1.p1.4.m4.2.2.1.1.1" xref="S3.SS1.p1.4.m4.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.4.m4.2.2.1.1.1.2" xref="S3.SS1.p1.4.m4.2.2.1.1.1.2.cmml">B</mi><mn id="S3.SS1.p1.4.m4.2.2.1.1.1.3" xref="S3.SS1.p1.4.m4.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p1.4.m4.4.4.3.3.5" xref="S3.SS1.p1.4.m4.4.4.3.4.cmml">,</mo><msub id="S3.SS1.p1.4.m4.3.3.2.2.2" xref="S3.SS1.p1.4.m4.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.4.m4.3.3.2.2.2.2" xref="S3.SS1.p1.4.m4.3.3.2.2.2.2.cmml">B</mi><mn id="S3.SS1.p1.4.m4.3.3.2.2.2.3" xref="S3.SS1.p1.4.m4.3.3.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS1.p1.4.m4.4.4.3.3.6" xref="S3.SS1.p1.4.m4.4.4.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml">…</mi><mo id="S3.SS1.p1.4.m4.4.4.3.3.7" xref="S3.SS1.p1.4.m4.4.4.3.4.cmml">,</mo><msub id="S3.SS1.p1.4.m4.4.4.3.3.3" xref="S3.SS1.p1.4.m4.4.4.3.3.3.cmml"><mi id="S3.SS1.p1.4.m4.4.4.3.3.3.2" xref="S3.SS1.p1.4.m4.4.4.3.3.3.2.cmml">B</mi><msub id="S3.SS1.p1.4.m4.4.4.3.3.3.3" xref="S3.SS1.p1.4.m4.4.4.3.3.3.3.cmml"><mi id="S3.SS1.p1.4.m4.4.4.3.3.3.3.2" xref="S3.SS1.p1.4.m4.4.4.3.3.3.3.2.cmml">M</mi><mi id="S3.SS1.p1.4.m4.4.4.3.3.3.3.3" xref="S3.SS1.p1.4.m4.4.4.3.3.3.3.3.cmml">B</mi></msub></msub><mo stretchy="false" id="S3.SS1.p1.4.m4.4.4.3.3.8" xref="S3.SS1.p1.4.m4.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.4b"><apply id="S3.SS1.p1.4.m4.4.4.cmml" xref="S3.SS1.p1.4.m4.4.4"><eq id="S3.SS1.p1.4.m4.4.4.4.cmml" xref="S3.SS1.p1.4.m4.4.4.4"></eq><ci id="S3.SS1.p1.4.m4.4.4.5.cmml" xref="S3.SS1.p1.4.m4.4.4.5">ℬ</ci><set id="S3.SS1.p1.4.m4.4.4.3.4.cmml" xref="S3.SS1.p1.4.m4.4.4.3.3"><apply id="S3.SS1.p1.4.m4.2.2.1.1.1.cmml" xref="S3.SS1.p1.4.m4.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.4.m4.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.4.m4.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.4.m4.2.2.1.1.1.2">𝐵</ci><cn type="integer" id="S3.SS1.p1.4.m4.2.2.1.1.1.3.cmml" xref="S3.SS1.p1.4.m4.2.2.1.1.1.3">1</cn></apply><apply id="S3.SS1.p1.4.m4.3.3.2.2.2.cmml" xref="S3.SS1.p1.4.m4.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.4.m4.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.4.m4.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.4.m4.3.3.2.2.2.2">𝐵</ci><cn type="integer" id="S3.SS1.p1.4.m4.3.3.2.2.2.3.cmml" xref="S3.SS1.p1.4.m4.3.3.2.2.2.3">2</cn></apply><ci id="S3.SS1.p1.4.m4.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1">…</ci><apply id="S3.SS1.p1.4.m4.4.4.3.3.3.cmml" xref="S3.SS1.p1.4.m4.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.4.4.3.3.3.1.cmml" xref="S3.SS1.p1.4.m4.4.4.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.4.m4.4.4.3.3.3.2.cmml" xref="S3.SS1.p1.4.m4.4.4.3.3.3.2">𝐵</ci><apply id="S3.SS1.p1.4.m4.4.4.3.3.3.3.cmml" xref="S3.SS1.p1.4.m4.4.4.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.4.4.3.3.3.3.1.cmml" xref="S3.SS1.p1.4.m4.4.4.3.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.4.m4.4.4.3.3.3.3.2.cmml" xref="S3.SS1.p1.4.m4.4.4.3.3.3.3.2">𝑀</ci><ci id="S3.SS1.p1.4.m4.4.4.3.3.3.3.3.cmml" xref="S3.SS1.p1.4.m4.4.4.3.3.3.3.3">𝐵</ci></apply></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.4c">\mathcal{B}=\{B_{1},B_{2},\ldots,B_{M_{B}}\}</annotation></semantics></math> be the item sets in domains A and B, respectively, where <math id="S3.SS1.p1.5.m5.1" class="ltx_Math" alttext="m_{A}" display="inline"><semantics id="S3.SS1.p1.5.m5.1a"><msub id="S3.SS1.p1.5.m5.1.1" xref="S3.SS1.p1.5.m5.1.1.cmml"><mi id="S3.SS1.p1.5.m5.1.1.2" xref="S3.SS1.p1.5.m5.1.1.2.cmml">m</mi><mi id="S3.SS1.p1.5.m5.1.1.3" xref="S3.SS1.p1.5.m5.1.1.3.cmml">A</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m5.1b"><apply id="S3.SS1.p1.5.m5.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1">subscript</csymbol><ci id="S3.SS1.p1.5.m5.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.2">𝑚</ci><ci id="S3.SS1.p1.5.m5.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m5.1c">m_{A}</annotation></semantics></math>, <math id="S3.SS1.p1.6.m6.1" class="ltx_Math" alttext="m_{B}" display="inline"><semantics id="S3.SS1.p1.6.m6.1a"><msub id="S3.SS1.p1.6.m6.1.1" xref="S3.SS1.p1.6.m6.1.1.cmml"><mi id="S3.SS1.p1.6.m6.1.1.2" xref="S3.SS1.p1.6.m6.1.1.2.cmml">m</mi><mi id="S3.SS1.p1.6.m6.1.1.3" xref="S3.SS1.p1.6.m6.1.1.3.cmml">B</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m6.1b"><apply id="S3.SS1.p1.6.m6.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.6.m6.1.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1">subscript</csymbol><ci id="S3.SS1.p1.6.m6.1.1.2.cmml" xref="S3.SS1.p1.6.m6.1.1.2">𝑚</ci><ci id="S3.SS1.p1.6.m6.1.1.3.cmml" xref="S3.SS1.p1.6.m6.1.1.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m6.1c">m_{B}</annotation></semantics></math>, <math id="S3.SS1.p1.7.m7.1" class="ltx_Math" alttext="M_{A}" display="inline"><semantics id="S3.SS1.p1.7.m7.1a"><msub id="S3.SS1.p1.7.m7.1.1" xref="S3.SS1.p1.7.m7.1.1.cmml"><mi id="S3.SS1.p1.7.m7.1.1.2" xref="S3.SS1.p1.7.m7.1.1.2.cmml">M</mi><mi id="S3.SS1.p1.7.m7.1.1.3" xref="S3.SS1.p1.7.m7.1.1.3.cmml">A</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.7.m7.1b"><apply id="S3.SS1.p1.7.m7.1.1.cmml" xref="S3.SS1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.7.m7.1.1.1.cmml" xref="S3.SS1.p1.7.m7.1.1">subscript</csymbol><ci id="S3.SS1.p1.7.m7.1.1.2.cmml" xref="S3.SS1.p1.7.m7.1.1.2">𝑀</ci><ci id="S3.SS1.p1.7.m7.1.1.3.cmml" xref="S3.SS1.p1.7.m7.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.7.m7.1c">M_{A}</annotation></semantics></math> and <math id="S3.SS1.p1.8.m8.1" class="ltx_Math" alttext="M_{B}" display="inline"><semantics id="S3.SS1.p1.8.m8.1a"><msub id="S3.SS1.p1.8.m8.1.1" xref="S3.SS1.p1.8.m8.1.1.cmml"><mi id="S3.SS1.p1.8.m8.1.1.2" xref="S3.SS1.p1.8.m8.1.1.2.cmml">M</mi><mi id="S3.SS1.p1.8.m8.1.1.3" xref="S3.SS1.p1.8.m8.1.1.3.cmml">B</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.8.m8.1b"><apply id="S3.SS1.p1.8.m8.1.1.cmml" xref="S3.SS1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.8.m8.1.1.1.cmml" xref="S3.SS1.p1.8.m8.1.1">subscript</csymbol><ci id="S3.SS1.p1.8.m8.1.1.2.cmml" xref="S3.SS1.p1.8.m8.1.1.2">𝑀</ci><ci id="S3.SS1.p1.8.m8.1.1.3.cmml" xref="S3.SS1.p1.8.m8.1.1.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.8.m8.1c">M_{B}</annotation></semantics></math> are the corresponding user number and item number in each domain.
Each item <math id="S3.SS1.p1.9.m9.1" class="ltx_Math" alttext="A_{i}\in\mathcal{A}" display="inline"><semantics id="S3.SS1.p1.9.m9.1a"><mrow id="S3.SS1.p1.9.m9.1.1" xref="S3.SS1.p1.9.m9.1.1.cmml"><msub id="S3.SS1.p1.9.m9.1.1.2" xref="S3.SS1.p1.9.m9.1.1.2.cmml"><mi id="S3.SS1.p1.9.m9.1.1.2.2" xref="S3.SS1.p1.9.m9.1.1.2.2.cmml">A</mi><mi id="S3.SS1.p1.9.m9.1.1.2.3" xref="S3.SS1.p1.9.m9.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS1.p1.9.m9.1.1.1" xref="S3.SS1.p1.9.m9.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.9.m9.1.1.3" xref="S3.SS1.p1.9.m9.1.1.3.cmml">𝒜</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.9.m9.1b"><apply id="S3.SS1.p1.9.m9.1.1.cmml" xref="S3.SS1.p1.9.m9.1.1"><in id="S3.SS1.p1.9.m9.1.1.1.cmml" xref="S3.SS1.p1.9.m9.1.1.1"></in><apply id="S3.SS1.p1.9.m9.1.1.2.cmml" xref="S3.SS1.p1.9.m9.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p1.9.m9.1.1.2.1.cmml" xref="S3.SS1.p1.9.m9.1.1.2">subscript</csymbol><ci id="S3.SS1.p1.9.m9.1.1.2.2.cmml" xref="S3.SS1.p1.9.m9.1.1.2.2">𝐴</ci><ci id="S3.SS1.p1.9.m9.1.1.2.3.cmml" xref="S3.SS1.p1.9.m9.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p1.9.m9.1.1.3.cmml" xref="S3.SS1.p1.9.m9.1.1.3">𝒜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.9.m9.1c">A_{i}\in\mathcal{A}</annotation></semantics></math> (or <math id="S3.SS1.p1.10.m10.1" class="ltx_Math" alttext="B_{j}\in\mathcal{B}" display="inline"><semantics id="S3.SS1.p1.10.m10.1a"><mrow id="S3.SS1.p1.10.m10.1.1" xref="S3.SS1.p1.10.m10.1.1.cmml"><msub id="S3.SS1.p1.10.m10.1.1.2" xref="S3.SS1.p1.10.m10.1.1.2.cmml"><mi id="S3.SS1.p1.10.m10.1.1.2.2" xref="S3.SS1.p1.10.m10.1.1.2.2.cmml">B</mi><mi id="S3.SS1.p1.10.m10.1.1.2.3" xref="S3.SS1.p1.10.m10.1.1.2.3.cmml">j</mi></msub><mo id="S3.SS1.p1.10.m10.1.1.1" xref="S3.SS1.p1.10.m10.1.1.1.cmml">∈</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.10.m10.1.1.3" xref="S3.SS1.p1.10.m10.1.1.3.cmml">ℬ</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.10.m10.1b"><apply id="S3.SS1.p1.10.m10.1.1.cmml" xref="S3.SS1.p1.10.m10.1.1"><in id="S3.SS1.p1.10.m10.1.1.1.cmml" xref="S3.SS1.p1.10.m10.1.1.1"></in><apply id="S3.SS1.p1.10.m10.1.1.2.cmml" xref="S3.SS1.p1.10.m10.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p1.10.m10.1.1.2.1.cmml" xref="S3.SS1.p1.10.m10.1.1.2">subscript</csymbol><ci id="S3.SS1.p1.10.m10.1.1.2.2.cmml" xref="S3.SS1.p1.10.m10.1.1.2.2">𝐵</ci><ci id="S3.SS1.p1.10.m10.1.1.2.3.cmml" xref="S3.SS1.p1.10.m10.1.1.2.3">𝑗</ci></apply><ci id="S3.SS1.p1.10.m10.1.1.3.cmml" xref="S3.SS1.p1.10.m10.1.1.3">ℬ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.10.m10.1c">B_{j}\in\mathcal{B}</annotation></semantics></math>) is identified by a unique item ID and associated with a description text (such as the product title, introduction, and brand).
Users can express their preferences by interacting with specific items.
Take user <math id="S3.SS1.p1.11.m11.1" class="ltx_Math" alttext="u_{i}^{A}" display="inline"><semantics id="S3.SS1.p1.11.m11.1a"><msubsup id="S3.SS1.p1.11.m11.1.1" xref="S3.SS1.p1.11.m11.1.1.cmml"><mi id="S3.SS1.p1.11.m11.1.1.2.2" xref="S3.SS1.p1.11.m11.1.1.2.2.cmml">u</mi><mi id="S3.SS1.p1.11.m11.1.1.2.3" xref="S3.SS1.p1.11.m11.1.1.2.3.cmml">i</mi><mi id="S3.SS1.p1.11.m11.1.1.3" xref="S3.SS1.p1.11.m11.1.1.3.cmml">A</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.11.m11.1b"><apply id="S3.SS1.p1.11.m11.1.1.cmml" xref="S3.SS1.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.11.m11.1.1.1.cmml" xref="S3.SS1.p1.11.m11.1.1">superscript</csymbol><apply id="S3.SS1.p1.11.m11.1.1.2.cmml" xref="S3.SS1.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.11.m11.1.1.2.1.cmml" xref="S3.SS1.p1.11.m11.1.1">subscript</csymbol><ci id="S3.SS1.p1.11.m11.1.1.2.2.cmml" xref="S3.SS1.p1.11.m11.1.1.2.2">𝑢</ci><ci id="S3.SS1.p1.11.m11.1.1.2.3.cmml" xref="S3.SS1.p1.11.m11.1.1.2.3">𝑖</ci></apply><ci id="S3.SS1.p1.11.m11.1.1.3.cmml" xref="S3.SS1.p1.11.m11.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.11.m11.1c">u_{i}^{A}</annotation></semantics></math> as an example, we record her sequential behaviors on items in domain A as <math id="S3.SS1.p1.12.m12.5" class="ltx_Math" alttext="\mathcal{S}_{i}^{A}=\{A_{1},A_{2},\ldots,A_{j},\ldots\}" display="inline"><semantics id="S3.SS1.p1.12.m12.5a"><mrow id="S3.SS1.p1.12.m12.5.5" xref="S3.SS1.p1.12.m12.5.5.cmml"><msubsup id="S3.SS1.p1.12.m12.5.5.5" xref="S3.SS1.p1.12.m12.5.5.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.12.m12.5.5.5.2.2" xref="S3.SS1.p1.12.m12.5.5.5.2.2.cmml">𝒮</mi><mi id="S3.SS1.p1.12.m12.5.5.5.2.3" xref="S3.SS1.p1.12.m12.5.5.5.2.3.cmml">i</mi><mi id="S3.SS1.p1.12.m12.5.5.5.3" xref="S3.SS1.p1.12.m12.5.5.5.3.cmml">A</mi></msubsup><mo id="S3.SS1.p1.12.m12.5.5.4" xref="S3.SS1.p1.12.m12.5.5.4.cmml">=</mo><mrow id="S3.SS1.p1.12.m12.5.5.3.3" xref="S3.SS1.p1.12.m12.5.5.3.4.cmml"><mo stretchy="false" id="S3.SS1.p1.12.m12.5.5.3.3.4" xref="S3.SS1.p1.12.m12.5.5.3.4.cmml">{</mo><msub id="S3.SS1.p1.12.m12.3.3.1.1.1" xref="S3.SS1.p1.12.m12.3.3.1.1.1.cmml"><mi id="S3.SS1.p1.12.m12.3.3.1.1.1.2" xref="S3.SS1.p1.12.m12.3.3.1.1.1.2.cmml">A</mi><mn id="S3.SS1.p1.12.m12.3.3.1.1.1.3" xref="S3.SS1.p1.12.m12.3.3.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p1.12.m12.5.5.3.3.5" xref="S3.SS1.p1.12.m12.5.5.3.4.cmml">,</mo><msub id="S3.SS1.p1.12.m12.4.4.2.2.2" xref="S3.SS1.p1.12.m12.4.4.2.2.2.cmml"><mi id="S3.SS1.p1.12.m12.4.4.2.2.2.2" xref="S3.SS1.p1.12.m12.4.4.2.2.2.2.cmml">A</mi><mn id="S3.SS1.p1.12.m12.4.4.2.2.2.3" xref="S3.SS1.p1.12.m12.4.4.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS1.p1.12.m12.5.5.3.3.6" xref="S3.SS1.p1.12.m12.5.5.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS1.p1.12.m12.1.1" xref="S3.SS1.p1.12.m12.1.1.cmml">…</mi><mo id="S3.SS1.p1.12.m12.5.5.3.3.7" xref="S3.SS1.p1.12.m12.5.5.3.4.cmml">,</mo><msub id="S3.SS1.p1.12.m12.5.5.3.3.3" xref="S3.SS1.p1.12.m12.5.5.3.3.3.cmml"><mi id="S3.SS1.p1.12.m12.5.5.3.3.3.2" xref="S3.SS1.p1.12.m12.5.5.3.3.3.2.cmml">A</mi><mi id="S3.SS1.p1.12.m12.5.5.3.3.3.3" xref="S3.SS1.p1.12.m12.5.5.3.3.3.3.cmml">j</mi></msub><mo id="S3.SS1.p1.12.m12.5.5.3.3.8" xref="S3.SS1.p1.12.m12.5.5.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS1.p1.12.m12.2.2" xref="S3.SS1.p1.12.m12.2.2.cmml">…</mi><mo stretchy="false" id="S3.SS1.p1.12.m12.5.5.3.3.9" xref="S3.SS1.p1.12.m12.5.5.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.12.m12.5b"><apply id="S3.SS1.p1.12.m12.5.5.cmml" xref="S3.SS1.p1.12.m12.5.5"><eq id="S3.SS1.p1.12.m12.5.5.4.cmml" xref="S3.SS1.p1.12.m12.5.5.4"></eq><apply id="S3.SS1.p1.12.m12.5.5.5.cmml" xref="S3.SS1.p1.12.m12.5.5.5"><csymbol cd="ambiguous" id="S3.SS1.p1.12.m12.5.5.5.1.cmml" xref="S3.SS1.p1.12.m12.5.5.5">superscript</csymbol><apply id="S3.SS1.p1.12.m12.5.5.5.2.cmml" xref="S3.SS1.p1.12.m12.5.5.5"><csymbol cd="ambiguous" id="S3.SS1.p1.12.m12.5.5.5.2.1.cmml" xref="S3.SS1.p1.12.m12.5.5.5">subscript</csymbol><ci id="S3.SS1.p1.12.m12.5.5.5.2.2.cmml" xref="S3.SS1.p1.12.m12.5.5.5.2.2">𝒮</ci><ci id="S3.SS1.p1.12.m12.5.5.5.2.3.cmml" xref="S3.SS1.p1.12.m12.5.5.5.2.3">𝑖</ci></apply><ci id="S3.SS1.p1.12.m12.5.5.5.3.cmml" xref="S3.SS1.p1.12.m12.5.5.5.3">𝐴</ci></apply><set id="S3.SS1.p1.12.m12.5.5.3.4.cmml" xref="S3.SS1.p1.12.m12.5.5.3.3"><apply id="S3.SS1.p1.12.m12.3.3.1.1.1.cmml" xref="S3.SS1.p1.12.m12.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.12.m12.3.3.1.1.1.1.cmml" xref="S3.SS1.p1.12.m12.3.3.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.12.m12.3.3.1.1.1.2.cmml" xref="S3.SS1.p1.12.m12.3.3.1.1.1.2">𝐴</ci><cn type="integer" id="S3.SS1.p1.12.m12.3.3.1.1.1.3.cmml" xref="S3.SS1.p1.12.m12.3.3.1.1.1.3">1</cn></apply><apply id="S3.SS1.p1.12.m12.4.4.2.2.2.cmml" xref="S3.SS1.p1.12.m12.4.4.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.12.m12.4.4.2.2.2.1.cmml" xref="S3.SS1.p1.12.m12.4.4.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.12.m12.4.4.2.2.2.2.cmml" xref="S3.SS1.p1.12.m12.4.4.2.2.2.2">𝐴</ci><cn type="integer" id="S3.SS1.p1.12.m12.4.4.2.2.2.3.cmml" xref="S3.SS1.p1.12.m12.4.4.2.2.2.3">2</cn></apply><ci id="S3.SS1.p1.12.m12.1.1.cmml" xref="S3.SS1.p1.12.m12.1.1">…</ci><apply id="S3.SS1.p1.12.m12.5.5.3.3.3.cmml" xref="S3.SS1.p1.12.m12.5.5.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.12.m12.5.5.3.3.3.1.cmml" xref="S3.SS1.p1.12.m12.5.5.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.12.m12.5.5.3.3.3.2.cmml" xref="S3.SS1.p1.12.m12.5.5.3.3.3.2">𝐴</ci><ci id="S3.SS1.p1.12.m12.5.5.3.3.3.3.cmml" xref="S3.SS1.p1.12.m12.5.5.3.3.3.3">𝑗</ci></apply><ci id="S3.SS1.p1.12.m12.2.2.cmml" xref="S3.SS1.p1.12.m12.2.2">…</ci></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.12.m12.5c">\mathcal{S}_{i}^{A}=\{A_{1},A_{2},\ldots,A_{j},\ldots\}</annotation></semantics></math>. The description text of item <math id="S3.SS1.p1.13.m13.1" class="ltx_Math" alttext="A_{i}" display="inline"><semantics id="S3.SS1.p1.13.m13.1a"><msub id="S3.SS1.p1.13.m13.1.1" xref="S3.SS1.p1.13.m13.1.1.cmml"><mi id="S3.SS1.p1.13.m13.1.1.2" xref="S3.SS1.p1.13.m13.1.1.2.cmml">A</mi><mi id="S3.SS1.p1.13.m13.1.1.3" xref="S3.SS1.p1.13.m13.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.13.m13.1b"><apply id="S3.SS1.p1.13.m13.1.1.cmml" xref="S3.SS1.p1.13.m13.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.13.m13.1.1.1.cmml" xref="S3.SS1.p1.13.m13.1.1">subscript</csymbol><ci id="S3.SS1.p1.13.m13.1.1.2.cmml" xref="S3.SS1.p1.13.m13.1.1.2">𝐴</ci><ci id="S3.SS1.p1.13.m13.1.1.3.cmml" xref="S3.SS1.p1.13.m13.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.13.m13.1c">A_{i}</annotation></semantics></math> is denoted as <math id="S3.SS1.p1.14.m14.4" class="ltx_Math" alttext="\mathcal{T}_{i}=\{w_{i},w_{2},\ldots,w_{c}\}" display="inline"><semantics id="S3.SS1.p1.14.m14.4a"><mrow id="S3.SS1.p1.14.m14.4.4" xref="S3.SS1.p1.14.m14.4.4.cmml"><msub id="S3.SS1.p1.14.m14.4.4.5" xref="S3.SS1.p1.14.m14.4.4.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.14.m14.4.4.5.2" xref="S3.SS1.p1.14.m14.4.4.5.2.cmml">𝒯</mi><mi id="S3.SS1.p1.14.m14.4.4.5.3" xref="S3.SS1.p1.14.m14.4.4.5.3.cmml">i</mi></msub><mo id="S3.SS1.p1.14.m14.4.4.4" xref="S3.SS1.p1.14.m14.4.4.4.cmml">=</mo><mrow id="S3.SS1.p1.14.m14.4.4.3.3" xref="S3.SS1.p1.14.m14.4.4.3.4.cmml"><mo stretchy="false" id="S3.SS1.p1.14.m14.4.4.3.3.4" xref="S3.SS1.p1.14.m14.4.4.3.4.cmml">{</mo><msub id="S3.SS1.p1.14.m14.2.2.1.1.1" xref="S3.SS1.p1.14.m14.2.2.1.1.1.cmml"><mi id="S3.SS1.p1.14.m14.2.2.1.1.1.2" xref="S3.SS1.p1.14.m14.2.2.1.1.1.2.cmml">w</mi><mi id="S3.SS1.p1.14.m14.2.2.1.1.1.3" xref="S3.SS1.p1.14.m14.2.2.1.1.1.3.cmml">i</mi></msub><mo id="S3.SS1.p1.14.m14.4.4.3.3.5" xref="S3.SS1.p1.14.m14.4.4.3.4.cmml">,</mo><msub id="S3.SS1.p1.14.m14.3.3.2.2.2" xref="S3.SS1.p1.14.m14.3.3.2.2.2.cmml"><mi id="S3.SS1.p1.14.m14.3.3.2.2.2.2" xref="S3.SS1.p1.14.m14.3.3.2.2.2.2.cmml">w</mi><mn id="S3.SS1.p1.14.m14.3.3.2.2.2.3" xref="S3.SS1.p1.14.m14.3.3.2.2.2.3.cmml">2</mn></msub><mo id="S3.SS1.p1.14.m14.4.4.3.3.6" xref="S3.SS1.p1.14.m14.4.4.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS1.p1.14.m14.1.1" xref="S3.SS1.p1.14.m14.1.1.cmml">…</mi><mo id="S3.SS1.p1.14.m14.4.4.3.3.7" xref="S3.SS1.p1.14.m14.4.4.3.4.cmml">,</mo><msub id="S3.SS1.p1.14.m14.4.4.3.3.3" xref="S3.SS1.p1.14.m14.4.4.3.3.3.cmml"><mi id="S3.SS1.p1.14.m14.4.4.3.3.3.2" xref="S3.SS1.p1.14.m14.4.4.3.3.3.2.cmml">w</mi><mi id="S3.SS1.p1.14.m14.4.4.3.3.3.3" xref="S3.SS1.p1.14.m14.4.4.3.3.3.3.cmml">c</mi></msub><mo stretchy="false" id="S3.SS1.p1.14.m14.4.4.3.3.8" xref="S3.SS1.p1.14.m14.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.14.m14.4b"><apply id="S3.SS1.p1.14.m14.4.4.cmml" xref="S3.SS1.p1.14.m14.4.4"><eq id="S3.SS1.p1.14.m14.4.4.4.cmml" xref="S3.SS1.p1.14.m14.4.4.4"></eq><apply id="S3.SS1.p1.14.m14.4.4.5.cmml" xref="S3.SS1.p1.14.m14.4.4.5"><csymbol cd="ambiguous" id="S3.SS1.p1.14.m14.4.4.5.1.cmml" xref="S3.SS1.p1.14.m14.4.4.5">subscript</csymbol><ci id="S3.SS1.p1.14.m14.4.4.5.2.cmml" xref="S3.SS1.p1.14.m14.4.4.5.2">𝒯</ci><ci id="S3.SS1.p1.14.m14.4.4.5.3.cmml" xref="S3.SS1.p1.14.m14.4.4.5.3">𝑖</ci></apply><set id="S3.SS1.p1.14.m14.4.4.3.4.cmml" xref="S3.SS1.p1.14.m14.4.4.3.3"><apply id="S3.SS1.p1.14.m14.2.2.1.1.1.cmml" xref="S3.SS1.p1.14.m14.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.14.m14.2.2.1.1.1.1.cmml" xref="S3.SS1.p1.14.m14.2.2.1.1.1">subscript</csymbol><ci id="S3.SS1.p1.14.m14.2.2.1.1.1.2.cmml" xref="S3.SS1.p1.14.m14.2.2.1.1.1.2">𝑤</ci><ci id="S3.SS1.p1.14.m14.2.2.1.1.1.3.cmml" xref="S3.SS1.p1.14.m14.2.2.1.1.1.3">𝑖</ci></apply><apply id="S3.SS1.p1.14.m14.3.3.2.2.2.cmml" xref="S3.SS1.p1.14.m14.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.14.m14.3.3.2.2.2.1.cmml" xref="S3.SS1.p1.14.m14.3.3.2.2.2">subscript</csymbol><ci id="S3.SS1.p1.14.m14.3.3.2.2.2.2.cmml" xref="S3.SS1.p1.14.m14.3.3.2.2.2.2">𝑤</ci><cn type="integer" id="S3.SS1.p1.14.m14.3.3.2.2.2.3.cmml" xref="S3.SS1.p1.14.m14.3.3.2.2.2.3">2</cn></apply><ci id="S3.SS1.p1.14.m14.1.1.cmml" xref="S3.SS1.p1.14.m14.1.1">…</ci><apply id="S3.SS1.p1.14.m14.4.4.3.3.3.cmml" xref="S3.SS1.p1.14.m14.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS1.p1.14.m14.4.4.3.3.3.1.cmml" xref="S3.SS1.p1.14.m14.4.4.3.3.3">subscript</csymbol><ci id="S3.SS1.p1.14.m14.4.4.3.3.3.2.cmml" xref="S3.SS1.p1.14.m14.4.4.3.3.3.2">𝑤</ci><ci id="S3.SS1.p1.14.m14.4.4.3.3.3.3.cmml" xref="S3.SS1.p1.14.m14.4.4.3.3.3.3">𝑐</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.14.m14.4c">\mathcal{T}_{i}=\{w_{i},w_{2},\ldots,w_{c}\}</annotation></semantics></math>, where <math id="S3.SS1.p1.15.m15.1" class="ltx_Math" alttext="w_{j}" display="inline"><semantics id="S3.SS1.p1.15.m15.1a"><msub id="S3.SS1.p1.15.m15.1.1" xref="S3.SS1.p1.15.m15.1.1.cmml"><mi id="S3.SS1.p1.15.m15.1.1.2" xref="S3.SS1.p1.15.m15.1.1.2.cmml">w</mi><mi id="S3.SS1.p1.15.m15.1.1.3" xref="S3.SS1.p1.15.m15.1.1.3.cmml">j</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.15.m15.1b"><apply id="S3.SS1.p1.15.m15.1.1.cmml" xref="S3.SS1.p1.15.m15.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.15.m15.1.1.1.cmml" xref="S3.SS1.p1.15.m15.1.1">subscript</csymbol><ci id="S3.SS1.p1.15.m15.1.1.2.cmml" xref="S3.SS1.p1.15.m15.1.1.2">𝑤</ci><ci id="S3.SS1.p1.15.m15.1.1.3.cmml" xref="S3.SS1.p1.15.m15.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.15.m15.1c">w_{j}</annotation></semantics></math> is the content word in natural languages, and <math id="S3.SS1.p1.16.m16.1" class="ltx_Math" alttext="c" display="inline"><semantics id="S3.SS1.p1.16.m16.1a"><mi id="S3.SS1.p1.16.m16.1.1" xref="S3.SS1.p1.16.m16.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.16.m16.1b"><ci id="S3.SS1.p1.16.m16.1.1.cmml" xref="S3.SS1.p1.16.m16.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.16.m16.1c">c</annotation></semantics></math> is the truncated length of item text. To represent items in a unified feature space, we share the language vocabulary in both domains.
Compared with other ID-based traditional recommendation methods <cite class="ltx_cite ltx_citemacro_citep">(Hidasi et al<span class="ltx_text">.</span>, <a href="#bib.bib12" title="" class="ltx_ref">2015</a>; Kang and McAuley, <a href="#bib.bib17" title="" class="ltx_ref">2018</a>; Sun et al<span class="ltx_text">.</span>, <a href="#bib.bib37" title="" class="ltx_ref">2019</a>; Yin et al<span class="ltx_text">.</span>, <a href="#bib.bib50" title="" class="ltx_ref">2015</a>; Chen et al<span class="ltx_text">.</span>, <a href="#bib.bib5" title="" class="ltx_ref">2018</a>)</cite>,
we only take item IDs as auxiliary information, and they will not be used for domain knowledge transfer.
Instead, we represent items by deriving generalizable ID-agnostic representations from their description texts.
Moreover, although users may simultaneously interact with items in multiple domains or platforms, we do not align them between domains, since it may compromise users’ privacy.
That is, we assume users and items are entirely non-overlapped in our setting.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2. </span>Overview of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>
</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">The system architecture of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> in the pre-training stage is shown in Fig. <a href="#S2.F1" title="Figure 1 ‣ 2.3. Recommendation with Prompt tuning ‣ 2. Related Work ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, which is a <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr> process that consists of  <span title="Vector-Quantified Item Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Vector-Quantified Item Representation</span></span> (<abbr title="Vector-Quantified Item Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">VQIR</span></abbr>),  <span title="Sequence Encoder" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Sequence Encoder</span></span> (<abbr title="Sequence Encoder" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">SE</span></abbr>), and  <span title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Federated Content Representation</span></span> (<abbr title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCR</span></abbr>). <abbr title="Vector-Quantified Item Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">VQIR</span></abbr> aims at representing items in different domains in the same semantic space. It is the foundation of modeling users’ cross-domain personal interests. By unifying domains into the same language feature space, we are able to effectively integrate domain information (see Section <a href="#S3.SS3" title="3.3. Vector-Quantified Item Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.3</span></a>). But as we focus on <abbr title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PCDR</span></abbr>, we do not follow the traditional centralized training schema. On the contrary, we devise a  framework with the help of the federated content representations (see Section <a href="#S3.SS4" title="3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.4</span></a>).
In <abbr title="Sequence Encoder" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">SE</span></abbr>, we apply a transformer-style neural network to learn users’ sequential interests in each client (see Section <a href="#S3.SS4.SSS1" title="3.4.1. Local Training ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.4.1</span></a>).
The overall framework of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> in the fine-tuning stage is shown in Fig. <a href="#S3.F2" title="Figure 2 ‣ 3.4.3. Gradient Aggregation and Synchronization ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. Two prompting strategies, i.e., full prompting and light prompting, are developed in this phase.
In the full prompting strategy (as shown in Fig. <a href="#S3.F2" title="Figure 2 ‣ 3.4.3. Gradient Aggregation and Synchronization ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> (a)),
we explore the domain prompts and user prompts for fine-tuning, while in the light prompt learning (as shown in Fig. <a href="#S3.F2" title="Figure 2 ‣ 3.4.3. Gradient Aggregation and Synchronization ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> (b)), only the domain prompts are reserved.
In our design, the domain prompts are shared by all the users in the same domain, and the user prompts are related to specific users.</p>
</div>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3. </span>Vector-Quantified Item Representation</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.1" class="ltx_p">As natural language is a universal way to represent items in different domains, it is intuitive to leverage the generality of natural language texts to bridge domain gaps, since similar items will have similar contents even if they are not in the same domain.
To model the common semantic information across different domains, we unify items in the same semantic feature space and take the learned text encodings via <abbr title="Pre-trained Language Models" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PLM</span></abbr>s as universal item representations.
But such a “<span id="S3.SS3.p1.1.1" class="ltx_text ltx_font_italic">text -¿ representation</span>” paradigm  <cite class="ltx_cite ltx_citemacro_citep">(Hou et al<span class="ltx_text">.</span>, <a href="#bib.bib14" title="" class="ltx_ref">2022</a>; Li et al<span class="ltx_text">.</span>, <a href="#bib.bib22" title="" class="ltx_ref">2023a</a>)</cite> is too tight in binding item text and their representations,
making the recommender might overemphasize the effect of text features. Moreover, the text encodings from different domains cannot naturally align in a unified semantic space.
To address the above challenges, we exploit a “<span id="S3.SS3.p1.1.2" class="ltx_text ltx_font_italic">text -¿ code -¿ representation</span>” schema <cite class="ltx_cite ltx_citemacro_citep">(Hou et al<span class="ltx_text">.</span>, <a href="#bib.bib13" title="" class="ltx_ref">2023</a>; Rajput et al<span class="ltx_text">.</span>, <a href="#bib.bib31" title="" class="ltx_ref">2023</a>)</cite>
, which first maps item text into a vector of discrete indices (called <span id="S3.SS3.p1.1.3" class="ltx_text ltx_font_italic">item code</span>), and then employs these indices to lookup the <span id="S3.SS3.p1.1.4" class="ltx_text ltx_font_italic">code embedding table</span> for deriving item representations.
But different from existing studies that learn it in a centralized server
, we tend to develop a <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr> schema for privacy-preserving purposes (the details can be seen in Section <a href="#S3.SS4" title="3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.4</span></a>).
In this work, we deem the description texts of items as public data and the users’ interaction behaviors as privacy information.</p>
</div>
<section id="S3.SS3.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.1. </span>Discrete Item Code Leaning</h4>

<div id="S3.SS3.SSS1.p1" class="ltx_para">
<p id="S3.SS3.SSS1.p1.1" class="ltx_p">To obtain the discrete codes of items, we first encode their description texts into text encodings via <abbr title="Pre-trained Language Models" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PLM</span></abbr>s
to leverage the generality of natural language text. Then, we map the text encodings into discrete codes based on the optimized product quantization method (the  <span title="Product Quantization" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Product Quantization</span></span> (<abbr title="Product Quantization" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PQ</span></abbr>) <cite class="ltx_cite ltx_citemacro_citep">(Jegou et al<span class="ltx_text">.</span>, <a href="#bib.bib15" title="" class="ltx_ref">2010</a>)</cite> algorithm is utilized).</p>
</div>
<div id="S3.SS3.SSS1.p2" class="ltx_para">
<p id="S3.SS3.SSS1.p2.3" class="ltx_p">For item text encoding, we utilize the widely used BERT model <cite class="ltx_cite ltx_citemacro_citep">(Kenton and Toutanova, <a href="#bib.bib19" title="" class="ltx_ref">2019</a>)</cite> as the text encoder.
(the Huggingface model is exploited<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>https://huggingface.co/bert-base-uncased</span></span></span>).
Specifically, for a given item <math id="S3.SS3.SSS1.p2.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.SSS1.p2.1.m1.1a"><mi id="S3.SS3.SSS1.p2.1.m1.1.1" xref="S3.SS3.SSS1.p2.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p2.1.m1.1b"><ci id="S3.SS3.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS3.SSS1.p2.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p2.1.m1.1c">i</annotation></semantics></math>, we first insert a <span id="S3.SS3.SSS1.p2.3.1" class="ltx_text ltx_markedasmath ltx_font_typewriter">[CLS]</span> token at the beginning of its description text <math id="S3.SS3.SSS1.p2.3.m3.3" class="ltx_Math" alttext="\mathcal{T}_{i}=\{w_{1},\ldots,w_{c}\}" display="inline"><semantics id="S3.SS3.SSS1.p2.3.m3.3a"><mrow id="S3.SS3.SSS1.p2.3.m3.3.3" xref="S3.SS3.SSS1.p2.3.m3.3.3.cmml"><msub id="S3.SS3.SSS1.p2.3.m3.3.3.4" xref="S3.SS3.SSS1.p2.3.m3.3.3.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.SSS1.p2.3.m3.3.3.4.2" xref="S3.SS3.SSS1.p2.3.m3.3.3.4.2.cmml">𝒯</mi><mi id="S3.SS3.SSS1.p2.3.m3.3.3.4.3" xref="S3.SS3.SSS1.p2.3.m3.3.3.4.3.cmml">i</mi></msub><mo id="S3.SS3.SSS1.p2.3.m3.3.3.3" xref="S3.SS3.SSS1.p2.3.m3.3.3.3.cmml">=</mo><mrow id="S3.SS3.SSS1.p2.3.m3.3.3.2.2" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.3.cmml"><mo stretchy="false" id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.3" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.3.cmml">{</mo><msub id="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1" xref="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.cmml"><mi id="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.2" xref="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.2.cmml">w</mi><mn id="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.3" xref="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.4" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.3.cmml">,</mo><mi mathvariant="normal" id="S3.SS3.SSS1.p2.3.m3.1.1" xref="S3.SS3.SSS1.p2.3.m3.1.1.cmml">…</mi><mo id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.5" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.3.cmml">,</mo><msub id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.cmml"><mi id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.2" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.2.cmml">w</mi><mi id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.3" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.3.cmml">c</mi></msub><mo stretchy="false" id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.6" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p2.3.m3.3b"><apply id="S3.SS3.SSS1.p2.3.m3.3.3.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3"><eq id="S3.SS3.SSS1.p2.3.m3.3.3.3.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.3"></eq><apply id="S3.SS3.SSS1.p2.3.m3.3.3.4.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.4"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p2.3.m3.3.3.4.1.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.4">subscript</csymbol><ci id="S3.SS3.SSS1.p2.3.m3.3.3.4.2.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.4.2">𝒯</ci><ci id="S3.SS3.SSS1.p2.3.m3.3.3.4.3.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.4.3">𝑖</ci></apply><set id="S3.SS3.SSS1.p2.3.m3.3.3.2.3.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.2"><apply id="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.cmml" xref="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.1.cmml" xref="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.2.cmml" xref="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.2">𝑤</ci><cn type="integer" id="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.3.cmml" xref="S3.SS3.SSS1.p2.3.m3.2.2.1.1.1.3">1</cn></apply><ci id="S3.SS3.SSS1.p2.3.m3.1.1.cmml" xref="S3.SS3.SSS1.p2.3.m3.1.1">…</ci><apply id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.1.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2">subscript</csymbol><ci id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.2.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.2">𝑤</ci><ci id="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.3.cmml" xref="S3.SS3.SSS1.p2.3.m3.3.3.2.2.2.3">𝑐</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p2.3.m3.3c">\mathcal{T}_{i}=\{w_{1},\ldots,w_{c}\}</annotation></semantics></math> and subsequently feed it into BERT to obtain its textual encoding:</p>
<table id="S3.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(1)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E1.m1.3" class="ltx_Math" alttext="\bm{x}_{i}=\text{BERT}(\left[\texttt{[CLS]};w_{1};\ldots;w_{c}\right])," display="block"><semantics id="S3.E1.m1.3a"><mrow id="S3.E1.m1.3.3.1" xref="S3.E1.m1.3.3.1.1.cmml"><mrow id="S3.E1.m1.3.3.1.1" xref="S3.E1.m1.3.3.1.1.cmml"><msub id="S3.E1.m1.3.3.1.1.3" xref="S3.E1.m1.3.3.1.1.3.cmml"><mi id="S3.E1.m1.3.3.1.1.3.2" xref="S3.E1.m1.3.3.1.1.3.2.cmml">𝒙</mi><mi id="S3.E1.m1.3.3.1.1.3.3" xref="S3.E1.m1.3.3.1.1.3.3.cmml">i</mi></msub><mo id="S3.E1.m1.3.3.1.1.2" xref="S3.E1.m1.3.3.1.1.2.cmml">=</mo><mrow id="S3.E1.m1.3.3.1.1.1" xref="S3.E1.m1.3.3.1.1.1.cmml"><mtext id="S3.E1.m1.3.3.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.3a.cmml">BERT</mtext><mo lspace="0em" rspace="0em" id="S3.E1.m1.3.3.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.2.cmml">​</mo><mrow id="S3.E1.m1.3.3.1.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.cmml"><mo stretchy="false" id="S3.E1.m1.3.3.1.1.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.cmml">(</mo><mrow id="S3.E1.m1.3.3.1.1.1.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml"><mo id="S3.E1.m1.3.3.1.1.1.1.1.1.2.3" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml">[</mo><mtext class="ltx_mathvariant_monospace" id="S3.E1.m1.1.1" xref="S3.E1.m1.1.1a.cmml">[CLS]</mtext><mo id="S3.E1.m1.3.3.1.1.1.1.1.1.2.4" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml">;</mo><msub id="S3.E1.m1.3.3.1.1.1.1.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.2.cmml">w</mi><mn id="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.3.cmml">1</mn></msub><mo id="S3.E1.m1.3.3.1.1.1.1.1.1.2.5" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml">;</mo><mi mathvariant="normal" id="S3.E1.m1.2.2" xref="S3.E1.m1.2.2.cmml">…</mi><mo id="S3.E1.m1.3.3.1.1.1.1.1.1.2.6" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml">;</mo><msub id="S3.E1.m1.3.3.1.1.1.1.1.1.2.2" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.2" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.2.cmml">w</mi><mi id="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.3" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.3.cmml">c</mi></msub><mo id="S3.E1.m1.3.3.1.1.1.1.1.1.2.7" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml">]</mo></mrow><mo stretchy="false" id="S3.E1.m1.3.3.1.1.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E1.m1.3.3.1.2" xref="S3.E1.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.3b"><apply id="S3.E1.m1.3.3.1.1.cmml" xref="S3.E1.m1.3.3.1"><eq id="S3.E1.m1.3.3.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.2"></eq><apply id="S3.E1.m1.3.3.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.3"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.3.1.cmml" xref="S3.E1.m1.3.3.1.1.3">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.3.2.cmml" xref="S3.E1.m1.3.3.1.1.3.2">𝒙</ci><ci id="S3.E1.m1.3.3.1.1.3.3.cmml" xref="S3.E1.m1.3.3.1.1.3.3">𝑖</ci></apply><apply id="S3.E1.m1.3.3.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1"><times id="S3.E1.m1.3.3.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.2"></times><ci id="S3.E1.m1.3.3.1.1.1.3a.cmml" xref="S3.E1.m1.3.3.1.1.1.3"><mtext id="S3.E1.m1.3.3.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.3">BERT</mtext></ci><list id="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2"><ci id="S3.E1.m1.1.1a.cmml" xref="S3.E1.m1.1.1"><mtext class="ltx_mathvariant_monospace" id="S3.E1.m1.1.1.cmml" xref="S3.E1.m1.1.1">[CLS]</mtext></ci><apply id="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.2">𝑤</ci><cn type="integer" id="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.1.1.3">1</cn></apply><ci id="S3.E1.m1.2.2.cmml" xref="S3.E1.m1.2.2">…</ci><apply id="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.2">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.2">𝑤</ci><ci id="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.2.3">𝑐</ci></apply></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.3c">\bm{x}_{i}=\text{BERT}(\left[\texttt{[CLS]};w_{1};\ldots;w_{c}\right]),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS3.SSS1.p2.5" class="ltx_p">where [;] represents the concatenation operation, <math id="S3.SS3.SSS1.p2.4.m1.1" class="ltx_Math" alttext="\bm{x}_{i}\in\mathbb{R}^{d_{W}}" display="inline"><semantics id="S3.SS3.SSS1.p2.4.m1.1a"><mrow id="S3.SS3.SSS1.p2.4.m1.1.1" xref="S3.SS3.SSS1.p2.4.m1.1.1.cmml"><msub id="S3.SS3.SSS1.p2.4.m1.1.1.2" xref="S3.SS3.SSS1.p2.4.m1.1.1.2.cmml"><mi id="S3.SS3.SSS1.p2.4.m1.1.1.2.2" xref="S3.SS3.SSS1.p2.4.m1.1.1.2.2.cmml">𝒙</mi><mi id="S3.SS3.SSS1.p2.4.m1.1.1.2.3" xref="S3.SS3.SSS1.p2.4.m1.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS3.SSS1.p2.4.m1.1.1.1" xref="S3.SS3.SSS1.p2.4.m1.1.1.1.cmml">∈</mo><msup id="S3.SS3.SSS1.p2.4.m1.1.1.3" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.cmml"><mi id="S3.SS3.SSS1.p2.4.m1.1.1.3.2" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.2.cmml">ℝ</mi><msub id="S3.SS3.SSS1.p2.4.m1.1.1.3.3" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.3.cmml"><mi id="S3.SS3.SSS1.p2.4.m1.1.1.3.3.2" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.3.2.cmml">d</mi><mi id="S3.SS3.SSS1.p2.4.m1.1.1.3.3.3" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.3.3.cmml">W</mi></msub></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p2.4.m1.1b"><apply id="S3.SS3.SSS1.p2.4.m1.1.1.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1"><in id="S3.SS3.SSS1.p2.4.m1.1.1.1.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.1"></in><apply id="S3.SS3.SSS1.p2.4.m1.1.1.2.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p2.4.m1.1.1.2.1.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.2">subscript</csymbol><ci id="S3.SS3.SSS1.p2.4.m1.1.1.2.2.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.2.2">𝒙</ci><ci id="S3.SS3.SSS1.p2.4.m1.1.1.2.3.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS1.p2.4.m1.1.1.3.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p2.4.m1.1.1.3.1.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.3">superscript</csymbol><ci id="S3.SS3.SSS1.p2.4.m1.1.1.3.2.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.2">ℝ</ci><apply id="S3.SS3.SSS1.p2.4.m1.1.1.3.3.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p2.4.m1.1.1.3.3.1.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.3">subscript</csymbol><ci id="S3.SS3.SSS1.p2.4.m1.1.1.3.3.2.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.3.2">𝑑</ci><ci id="S3.SS3.SSS1.p2.4.m1.1.1.3.3.3.cmml" xref="S3.SS3.SSS1.p2.4.m1.1.1.3.3.3">𝑊</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p2.4.m1.1c">\bm{x}_{i}\in\mathbb{R}^{d_{W}}</annotation></semantics></math> is the representation of the given text, which is defined as the final hidden vector of the special input token <span id="S3.SS3.SSS1.p2.5.1" class="ltx_text ltx_markedasmath ltx_font_typewriter">[CLS]</span>.</p>
</div>
<div id="S3.SS3.SSS1.p3" class="ltx_para">
<p id="S3.SS3.SSS1.p3.14" class="ltx_p">To map the text encoding <math id="S3.SS3.SSS1.p3.1.m1.1" class="ltx_Math" alttext="\bm{x}_{i}" display="inline"><semantics id="S3.SS3.SSS1.p3.1.m1.1a"><msub id="S3.SS3.SSS1.p3.1.m1.1.1" xref="S3.SS3.SSS1.p3.1.m1.1.1.cmml"><mi id="S3.SS3.SSS1.p3.1.m1.1.1.2" xref="S3.SS3.SSS1.p3.1.m1.1.1.2.cmml">𝒙</mi><mi id="S3.SS3.SSS1.p3.1.m1.1.1.3" xref="S3.SS3.SSS1.p3.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.1.m1.1b"><apply id="S3.SS3.SSS1.p3.1.m1.1.1.cmml" xref="S3.SS3.SSS1.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.1.m1.1.1.1.cmml" xref="S3.SS3.SSS1.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p3.1.m1.1.1.2.cmml" xref="S3.SS3.SSS1.p3.1.m1.1.1.2">𝒙</ci><ci id="S3.SS3.SSS1.p3.1.m1.1.1.3.cmml" xref="S3.SS3.SSS1.p3.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.1.m1.1c">\bm{x}_{i}</annotation></semantics></math> to discrete codes, the <abbr title="Product Quantization" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PQ</span></abbr> method is applied.
<abbr title="Product Quantization" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PQ</span></abbr> defines <math id="S3.SS3.SSS1.p3.2.m2.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S3.SS3.SSS1.p3.2.m2.1a"><mi id="S3.SS3.SSS1.p3.2.m2.1.1" xref="S3.SS3.SSS1.p3.2.m2.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.2.m2.1b"><ci id="S3.SS3.SSS1.p3.2.m2.1.1.cmml" xref="S3.SS3.SSS1.p3.2.m2.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.2.m2.1c">D</annotation></semantics></math> sets of vectors,
within which each vector corresponds to <math id="S3.SS3.SSS1.p3.3.m3.1" class="ltx_Math" alttext="M_{c}" display="inline"><semantics id="S3.SS3.SSS1.p3.3.m3.1a"><msub id="S3.SS3.SSS1.p3.3.m3.1.1" xref="S3.SS3.SSS1.p3.3.m3.1.1.cmml"><mi id="S3.SS3.SSS1.p3.3.m3.1.1.2" xref="S3.SS3.SSS1.p3.3.m3.1.1.2.cmml">M</mi><mi id="S3.SS3.SSS1.p3.3.m3.1.1.3" xref="S3.SS3.SSS1.p3.3.m3.1.1.3.cmml">c</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.3.m3.1b"><apply id="S3.SS3.SSS1.p3.3.m3.1.1.cmml" xref="S3.SS3.SSS1.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.3.m3.1.1.1.cmml" xref="S3.SS3.SSS1.p3.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p3.3.m3.1.1.2.cmml" xref="S3.SS3.SSS1.p3.3.m3.1.1.2">𝑀</ci><ci id="S3.SS3.SSS1.p3.3.m3.1.1.3.cmml" xref="S3.SS3.SSS1.p3.3.m3.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.3.m3.1c">M_{c}</annotation></semantics></math> centroid embeddings with dimension <math id="S3.SS3.SSS1.p3.4.m4.1" class="ltx_Math" alttext="d_{W}/D" display="inline"><semantics id="S3.SS3.SSS1.p3.4.m4.1a"><mrow id="S3.SS3.SSS1.p3.4.m4.1.1" xref="S3.SS3.SSS1.p3.4.m4.1.1.cmml"><msub id="S3.SS3.SSS1.p3.4.m4.1.1.2" xref="S3.SS3.SSS1.p3.4.m4.1.1.2.cmml"><mi id="S3.SS3.SSS1.p3.4.m4.1.1.2.2" xref="S3.SS3.SSS1.p3.4.m4.1.1.2.2.cmml">d</mi><mi id="S3.SS3.SSS1.p3.4.m4.1.1.2.3" xref="S3.SS3.SSS1.p3.4.m4.1.1.2.3.cmml">W</mi></msub><mo id="S3.SS3.SSS1.p3.4.m4.1.1.1" xref="S3.SS3.SSS1.p3.4.m4.1.1.1.cmml">/</mo><mi id="S3.SS3.SSS1.p3.4.m4.1.1.3" xref="S3.SS3.SSS1.p3.4.m4.1.1.3.cmml">D</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.4.m4.1b"><apply id="S3.SS3.SSS1.p3.4.m4.1.1.cmml" xref="S3.SS3.SSS1.p3.4.m4.1.1"><divide id="S3.SS3.SSS1.p3.4.m4.1.1.1.cmml" xref="S3.SS3.SSS1.p3.4.m4.1.1.1"></divide><apply id="S3.SS3.SSS1.p3.4.m4.1.1.2.cmml" xref="S3.SS3.SSS1.p3.4.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.4.m4.1.1.2.1.cmml" xref="S3.SS3.SSS1.p3.4.m4.1.1.2">subscript</csymbol><ci id="S3.SS3.SSS1.p3.4.m4.1.1.2.2.cmml" xref="S3.SS3.SSS1.p3.4.m4.1.1.2.2">𝑑</ci><ci id="S3.SS3.SSS1.p3.4.m4.1.1.2.3.cmml" xref="S3.SS3.SSS1.p3.4.m4.1.1.2.3">𝑊</ci></apply><ci id="S3.SS3.SSS1.p3.4.m4.1.1.3.cmml" xref="S3.SS3.SSS1.p3.4.m4.1.1.3">𝐷</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.4.m4.1c">d_{W}/D</annotation></semantics></math>.
Let <math id="S3.SS3.SSS1.p3.5.m5.2" class="ltx_Math" alttext="\bm{a}_{k,j}\in\mathbb{R}^{{d_{W}}/{D}}" display="inline"><semantics id="S3.SS3.SSS1.p3.5.m5.2a"><mrow id="S3.SS3.SSS1.p3.5.m5.2.3" xref="S3.SS3.SSS1.p3.5.m5.2.3.cmml"><msub id="S3.SS3.SSS1.p3.5.m5.2.3.2" xref="S3.SS3.SSS1.p3.5.m5.2.3.2.cmml"><mi id="S3.SS3.SSS1.p3.5.m5.2.3.2.2" xref="S3.SS3.SSS1.p3.5.m5.2.3.2.2.cmml">𝒂</mi><mrow id="S3.SS3.SSS1.p3.5.m5.2.2.2.4" xref="S3.SS3.SSS1.p3.5.m5.2.2.2.3.cmml"><mi id="S3.SS3.SSS1.p3.5.m5.1.1.1.1" xref="S3.SS3.SSS1.p3.5.m5.1.1.1.1.cmml">k</mi><mo id="S3.SS3.SSS1.p3.5.m5.2.2.2.4.1" xref="S3.SS3.SSS1.p3.5.m5.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS1.p3.5.m5.2.2.2.2" xref="S3.SS3.SSS1.p3.5.m5.2.2.2.2.cmml">j</mi></mrow></msub><mo id="S3.SS3.SSS1.p3.5.m5.2.3.1" xref="S3.SS3.SSS1.p3.5.m5.2.3.1.cmml">∈</mo><msup id="S3.SS3.SSS1.p3.5.m5.2.3.3" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.cmml"><mi id="S3.SS3.SSS1.p3.5.m5.2.3.3.2" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.2.cmml">ℝ</mi><mrow id="S3.SS3.SSS1.p3.5.m5.2.3.3.3" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.cmml"><msub id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.cmml"><mi id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.2" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.2.cmml">d</mi><mi id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.3" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.3.cmml">W</mi></msub><mo id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.1" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.1.cmml">/</mo><mi id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.3" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.3.cmml">D</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.5.m5.2b"><apply id="S3.SS3.SSS1.p3.5.m5.2.3.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3"><in id="S3.SS3.SSS1.p3.5.m5.2.3.1.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.1"></in><apply id="S3.SS3.SSS1.p3.5.m5.2.3.2.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.2"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.5.m5.2.3.2.1.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.2">subscript</csymbol><ci id="S3.SS3.SSS1.p3.5.m5.2.3.2.2.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.2.2">𝒂</ci><list id="S3.SS3.SSS1.p3.5.m5.2.2.2.3.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.2.2.4"><ci id="S3.SS3.SSS1.p3.5.m5.1.1.1.1.cmml" xref="S3.SS3.SSS1.p3.5.m5.1.1.1.1">𝑘</ci><ci id="S3.SS3.SSS1.p3.5.m5.2.2.2.2.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.2.2.2">𝑗</ci></list></apply><apply id="S3.SS3.SSS1.p3.5.m5.2.3.3.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.5.m5.2.3.3.1.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3">superscript</csymbol><ci id="S3.SS3.SSS1.p3.5.m5.2.3.3.2.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.2">ℝ</ci><apply id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3"><divide id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.1.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.1"></divide><apply id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.1.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2">subscript</csymbol><ci id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.2.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.2">𝑑</ci><ci id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.3.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.2.3">𝑊</ci></apply><ci id="S3.SS3.SSS1.p3.5.m5.2.3.3.3.3.cmml" xref="S3.SS3.SSS1.p3.5.m5.2.3.3.3.3">𝐷</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.5.m5.2c">\bm{a}_{k,j}\in\mathbb{R}^{{d_{W}}/{D}}</annotation></semantics></math> be the <math id="S3.SS3.SSS1.p3.6.m6.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS3.SSS1.p3.6.m6.1a"><mi id="S3.SS3.SSS1.p3.6.m6.1.1" xref="S3.SS3.SSS1.p3.6.m6.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.6.m6.1b"><ci id="S3.SS3.SSS1.p3.6.m6.1.1.cmml" xref="S3.SS3.SSS1.p3.6.m6.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.6.m6.1c">j</annotation></semantics></math>-th centroid embedding for the <math id="S3.SS3.SSS1.p3.7.m7.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS3.SSS1.p3.7.m7.1a"><mi id="S3.SS3.SSS1.p3.7.m7.1.1" xref="S3.SS3.SSS1.p3.7.m7.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.7.m7.1b"><ci id="S3.SS3.SSS1.p3.7.m7.1.1.cmml" xref="S3.SS3.SSS1.p3.7.m7.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.7.m7.1c">k</annotation></semantics></math>-th vector set.
In the <abbr title="Product Quantization" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PQ</span></abbr> method, the text encoding vector <math id="S3.SS3.SSS1.p3.8.m8.1" class="ltx_Math" alttext="\bm{x}_{i}" display="inline"><semantics id="S3.SS3.SSS1.p3.8.m8.1a"><msub id="S3.SS3.SSS1.p3.8.m8.1.1" xref="S3.SS3.SSS1.p3.8.m8.1.1.cmml"><mi id="S3.SS3.SSS1.p3.8.m8.1.1.2" xref="S3.SS3.SSS1.p3.8.m8.1.1.2.cmml">𝒙</mi><mi id="S3.SS3.SSS1.p3.8.m8.1.1.3" xref="S3.SS3.SSS1.p3.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.8.m8.1b"><apply id="S3.SS3.SSS1.p3.8.m8.1.1.cmml" xref="S3.SS3.SSS1.p3.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.8.m8.1.1.1.cmml" xref="S3.SS3.SSS1.p3.8.m8.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p3.8.m8.1.1.2.cmml" xref="S3.SS3.SSS1.p3.8.m8.1.1.2">𝒙</ci><ci id="S3.SS3.SSS1.p3.8.m8.1.1.3.cmml" xref="S3.SS3.SSS1.p3.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.8.m8.1c">\bm{x}_{i}</annotation></semantics></math> is first split into <math id="S3.SS3.SSS1.p3.9.m9.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S3.SS3.SSS1.p3.9.m9.1a"><mi id="S3.SS3.SSS1.p3.9.m9.1.1" xref="S3.SS3.SSS1.p3.9.m9.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.9.m9.1b"><ci id="S3.SS3.SSS1.p3.9.m9.1.1.cmml" xref="S3.SS3.SSS1.p3.9.m9.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.9.m9.1c">D</annotation></semantics></math> sub-vectors <math id="S3.SS3.SSS1.p3.10.m10.7" class="ltx_Math" alttext="\bm{x}_{i}=\left[\bm{x}_{i,1};\ldots;\bm{x}_{i,D}\right]" display="inline"><semantics id="S3.SS3.SSS1.p3.10.m10.7a"><mrow id="S3.SS3.SSS1.p3.10.m10.7.7" xref="S3.SS3.SSS1.p3.10.m10.7.7.cmml"><msub id="S3.SS3.SSS1.p3.10.m10.7.7.4" xref="S3.SS3.SSS1.p3.10.m10.7.7.4.cmml"><mi id="S3.SS3.SSS1.p3.10.m10.7.7.4.2" xref="S3.SS3.SSS1.p3.10.m10.7.7.4.2.cmml">𝒙</mi><mi id="S3.SS3.SSS1.p3.10.m10.7.7.4.3" xref="S3.SS3.SSS1.p3.10.m10.7.7.4.3.cmml">i</mi></msub><mo id="S3.SS3.SSS1.p3.10.m10.7.7.3" xref="S3.SS3.SSS1.p3.10.m10.7.7.3.cmml">=</mo><mrow id="S3.SS3.SSS1.p3.10.m10.7.7.2.2" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.3.cmml"><mo id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.3" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.3.cmml">[</mo><msub id="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1" xref="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1.cmml"><mi id="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1.2" xref="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1.2.cmml">𝒙</mi><mrow id="S3.SS3.SSS1.p3.10.m10.2.2.2.4" xref="S3.SS3.SSS1.p3.10.m10.2.2.2.3.cmml"><mi id="S3.SS3.SSS1.p3.10.m10.1.1.1.1" xref="S3.SS3.SSS1.p3.10.m10.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS1.p3.10.m10.2.2.2.4.1" xref="S3.SS3.SSS1.p3.10.m10.2.2.2.3.cmml">,</mo><mn id="S3.SS3.SSS1.p3.10.m10.2.2.2.2" xref="S3.SS3.SSS1.p3.10.m10.2.2.2.2.cmml">1</mn></mrow></msub><mo id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.4" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.3.cmml">;</mo><mi mathvariant="normal" id="S3.SS3.SSS1.p3.10.m10.5.5" xref="S3.SS3.SSS1.p3.10.m10.5.5.cmml">…</mi><mo id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.5" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.3.cmml">;</mo><msub id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2.cmml"><mi id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2.2" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2.2.cmml">𝒙</mi><mrow id="S3.SS3.SSS1.p3.10.m10.4.4.2.4" xref="S3.SS3.SSS1.p3.10.m10.4.4.2.3.cmml"><mi id="S3.SS3.SSS1.p3.10.m10.3.3.1.1" xref="S3.SS3.SSS1.p3.10.m10.3.3.1.1.cmml">i</mi><mo id="S3.SS3.SSS1.p3.10.m10.4.4.2.4.1" xref="S3.SS3.SSS1.p3.10.m10.4.4.2.3.cmml">,</mo><mi id="S3.SS3.SSS1.p3.10.m10.4.4.2.2" xref="S3.SS3.SSS1.p3.10.m10.4.4.2.2.cmml">D</mi></mrow></msub><mo id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.6" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.3.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.10.m10.7b"><apply id="S3.SS3.SSS1.p3.10.m10.7.7.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7"><eq id="S3.SS3.SSS1.p3.10.m10.7.7.3.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.3"></eq><apply id="S3.SS3.SSS1.p3.10.m10.7.7.4.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.4"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.10.m10.7.7.4.1.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.4">subscript</csymbol><ci id="S3.SS3.SSS1.p3.10.m10.7.7.4.2.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.4.2">𝒙</ci><ci id="S3.SS3.SSS1.p3.10.m10.7.7.4.3.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.4.3">𝑖</ci></apply><list id="S3.SS3.SSS1.p3.10.m10.7.7.2.3.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.2"><apply id="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1.cmml" xref="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1.1.cmml" xref="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1.2.cmml" xref="S3.SS3.SSS1.p3.10.m10.6.6.1.1.1.2">𝒙</ci><list id="S3.SS3.SSS1.p3.10.m10.2.2.2.3.cmml" xref="S3.SS3.SSS1.p3.10.m10.2.2.2.4"><ci id="S3.SS3.SSS1.p3.10.m10.1.1.1.1.cmml" xref="S3.SS3.SSS1.p3.10.m10.1.1.1.1">𝑖</ci><cn type="integer" id="S3.SS3.SSS1.p3.10.m10.2.2.2.2.cmml" xref="S3.SS3.SSS1.p3.10.m10.2.2.2.2">1</cn></list></apply><ci id="S3.SS3.SSS1.p3.10.m10.5.5.cmml" xref="S3.SS3.SSS1.p3.10.m10.5.5">…</ci><apply id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2.1.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2">subscript</csymbol><ci id="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2.2.cmml" xref="S3.SS3.SSS1.p3.10.m10.7.7.2.2.2.2">𝒙</ci><list id="S3.SS3.SSS1.p3.10.m10.4.4.2.3.cmml" xref="S3.SS3.SSS1.p3.10.m10.4.4.2.4"><ci id="S3.SS3.SSS1.p3.10.m10.3.3.1.1.cmml" xref="S3.SS3.SSS1.p3.10.m10.3.3.1.1">𝑖</ci><ci id="S3.SS3.SSS1.p3.10.m10.4.4.2.2.cmml" xref="S3.SS3.SSS1.p3.10.m10.4.4.2.2">𝐷</ci></list></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.10.m10.7c">\bm{x}_{i}=\left[\bm{x}_{i,1};\ldots;\bm{x}_{i,D}\right]</annotation></semantics></math>.
Then, for the <math id="S3.SS3.SSS1.p3.11.m11.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS3.SSS1.p3.11.m11.1a"><mi id="S3.SS3.SSS1.p3.11.m11.1.1" xref="S3.SS3.SSS1.p3.11.m11.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.11.m11.1b"><ci id="S3.SS3.SSS1.p3.11.m11.1.1.cmml" xref="S3.SS3.SSS1.p3.11.m11.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.11.m11.1c">k</annotation></semantics></math>-th sub-vector of <math id="S3.SS3.SSS1.p3.12.m12.1" class="ltx_Math" alttext="\bm{x}_{i}" display="inline"><semantics id="S3.SS3.SSS1.p3.12.m12.1a"><msub id="S3.SS3.SSS1.p3.12.m12.1.1" xref="S3.SS3.SSS1.p3.12.m12.1.1.cmml"><mi id="S3.SS3.SSS1.p3.12.m12.1.1.2" xref="S3.SS3.SSS1.p3.12.m12.1.1.2.cmml">𝒙</mi><mi id="S3.SS3.SSS1.p3.12.m12.1.1.3" xref="S3.SS3.SSS1.p3.12.m12.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.12.m12.1b"><apply id="S3.SS3.SSS1.p3.12.m12.1.1.cmml" xref="S3.SS3.SSS1.p3.12.m12.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.12.m12.1.1.1.cmml" xref="S3.SS3.SSS1.p3.12.m12.1.1">subscript</csymbol><ci id="S3.SS3.SSS1.p3.12.m12.1.1.2.cmml" xref="S3.SS3.SSS1.p3.12.m12.1.1.2">𝒙</ci><ci id="S3.SS3.SSS1.p3.12.m12.1.1.3.cmml" xref="S3.SS3.SSS1.p3.12.m12.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.12.m12.1c">\bm{x}_{i}</annotation></semantics></math>, <abbr title="Product Quantization" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PQ</span></abbr> selects the index of its nearest centroid embedding from the corresponding set to generate the discrete code of <math id="S3.SS3.SSS1.p3.13.m13.2" class="ltx_Math" alttext="\bm{x}_{i,k}" display="inline"><semantics id="S3.SS3.SSS1.p3.13.m13.2a"><msub id="S3.SS3.SSS1.p3.13.m13.2.3" xref="S3.SS3.SSS1.p3.13.m13.2.3.cmml"><mi id="S3.SS3.SSS1.p3.13.m13.2.3.2" xref="S3.SS3.SSS1.p3.13.m13.2.3.2.cmml">𝒙</mi><mrow id="S3.SS3.SSS1.p3.13.m13.2.2.2.4" xref="S3.SS3.SSS1.p3.13.m13.2.2.2.3.cmml"><mi id="S3.SS3.SSS1.p3.13.m13.1.1.1.1" xref="S3.SS3.SSS1.p3.13.m13.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS1.p3.13.m13.2.2.2.4.1" xref="S3.SS3.SSS1.p3.13.m13.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS1.p3.13.m13.2.2.2.2" xref="S3.SS3.SSS1.p3.13.m13.2.2.2.2.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.13.m13.2b"><apply id="S3.SS3.SSS1.p3.13.m13.2.3.cmml" xref="S3.SS3.SSS1.p3.13.m13.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.13.m13.2.3.1.cmml" xref="S3.SS3.SSS1.p3.13.m13.2.3">subscript</csymbol><ci id="S3.SS3.SSS1.p3.13.m13.2.3.2.cmml" xref="S3.SS3.SSS1.p3.13.m13.2.3.2">𝒙</ci><list id="S3.SS3.SSS1.p3.13.m13.2.2.2.3.cmml" xref="S3.SS3.SSS1.p3.13.m13.2.2.2.4"><ci id="S3.SS3.SSS1.p3.13.m13.1.1.1.1.cmml" xref="S3.SS3.SSS1.p3.13.m13.1.1.1.1">𝑖</ci><ci id="S3.SS3.SSS1.p3.13.m13.2.2.2.2.cmml" xref="S3.SS3.SSS1.p3.13.m13.2.2.2.2">𝑘</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.13.m13.2c">\bm{x}_{i,k}</annotation></semantics></math>. The selected index of <math id="S3.SS3.SSS1.p3.14.m14.2" class="ltx_Math" alttext="\bm{x}_{i,k}" display="inline"><semantics id="S3.SS3.SSS1.p3.14.m14.2a"><msub id="S3.SS3.SSS1.p3.14.m14.2.3" xref="S3.SS3.SSS1.p3.14.m14.2.3.cmml"><mi id="S3.SS3.SSS1.p3.14.m14.2.3.2" xref="S3.SS3.SSS1.p3.14.m14.2.3.2.cmml">𝒙</mi><mrow id="S3.SS3.SSS1.p3.14.m14.2.2.2.4" xref="S3.SS3.SSS1.p3.14.m14.2.2.2.3.cmml"><mi id="S3.SS3.SSS1.p3.14.m14.1.1.1.1" xref="S3.SS3.SSS1.p3.14.m14.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS1.p3.14.m14.2.2.2.4.1" xref="S3.SS3.SSS1.p3.14.m14.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS1.p3.14.m14.2.2.2.2" xref="S3.SS3.SSS1.p3.14.m14.2.2.2.2.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.14.m14.2b"><apply id="S3.SS3.SSS1.p3.14.m14.2.3.cmml" xref="S3.SS3.SSS1.p3.14.m14.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.14.m14.2.3.1.cmml" xref="S3.SS3.SSS1.p3.14.m14.2.3">subscript</csymbol><ci id="S3.SS3.SSS1.p3.14.m14.2.3.2.cmml" xref="S3.SS3.SSS1.p3.14.m14.2.3.2">𝒙</ci><list id="S3.SS3.SSS1.p3.14.m14.2.2.2.3.cmml" xref="S3.SS3.SSS1.p3.14.m14.2.2.2.4"><ci id="S3.SS3.SSS1.p3.14.m14.1.1.1.1.cmml" xref="S3.SS3.SSS1.p3.14.m14.1.1.1.1">𝑖</ci><ci id="S3.SS3.SSS1.p3.14.m14.2.2.2.2.cmml" xref="S3.SS3.SSS1.p3.14.m14.2.2.2.2">𝑘</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.14.m14.2c">\bm{x}_{i,k}</annotation></semantics></math> can be defined as:</p>
<table id="S3.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(2)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E2.m1.10" class="ltx_Math" alttext="\bm{c}_{i,k}=\arg\min_{j}\|\bm{x}_{i,k}-\bm{a}_{k,j}\|^{2}\in\{1,2,\ldots,M_{c}\}," display="block"><semantics id="S3.E2.m1.10a"><mrow id="S3.E2.m1.10.10.1" xref="S3.E2.m1.10.10.1.1.cmml"><mrow id="S3.E2.m1.10.10.1.1" xref="S3.E2.m1.10.10.1.1.cmml"><msub id="S3.E2.m1.10.10.1.1.4" xref="S3.E2.m1.10.10.1.1.4.cmml"><mi id="S3.E2.m1.10.10.1.1.4.2" xref="S3.E2.m1.10.10.1.1.4.2.cmml">𝒄</mi><mrow id="S3.E2.m1.2.2.2.4" xref="S3.E2.m1.2.2.2.3.cmml"><mi id="S3.E2.m1.1.1.1.1" xref="S3.E2.m1.1.1.1.1.cmml">i</mi><mo id="S3.E2.m1.2.2.2.4.1" xref="S3.E2.m1.2.2.2.3.cmml">,</mo><mi id="S3.E2.m1.2.2.2.2" xref="S3.E2.m1.2.2.2.2.cmml">k</mi></mrow></msub><mo id="S3.E2.m1.10.10.1.1.5" xref="S3.E2.m1.10.10.1.1.5.cmml">=</mo><mrow id="S3.E2.m1.10.10.1.1.1" xref="S3.E2.m1.10.10.1.1.1.cmml"><mi id="S3.E2.m1.10.10.1.1.1.2" xref="S3.E2.m1.10.10.1.1.1.2.cmml">arg</mi><mo lspace="0.167em" id="S3.E2.m1.10.10.1.1.1a" xref="S3.E2.m1.10.10.1.1.1.cmml">⁡</mo><mrow id="S3.E2.m1.10.10.1.1.1.1" xref="S3.E2.m1.10.10.1.1.1.1.cmml"><munder id="S3.E2.m1.10.10.1.1.1.1.2" xref="S3.E2.m1.10.10.1.1.1.1.2.cmml"><mi id="S3.E2.m1.10.10.1.1.1.1.2.2" xref="S3.E2.m1.10.10.1.1.1.1.2.2.cmml">min</mi><mi id="S3.E2.m1.10.10.1.1.1.1.2.3" xref="S3.E2.m1.10.10.1.1.1.1.2.3.cmml">j</mi></munder><mo id="S3.E2.m1.10.10.1.1.1.1a" xref="S3.E2.m1.10.10.1.1.1.1.cmml">⁡</mo><msup id="S3.E2.m1.10.10.1.1.1.1.1" xref="S3.E2.m1.10.10.1.1.1.1.1.cmml"><mrow id="S3.E2.m1.10.10.1.1.1.1.1.1.1" xref="S3.E2.m1.10.10.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E2.m1.10.10.1.1.1.1.1.1.1.2" xref="S3.E2.m1.10.10.1.1.1.1.1.1.2.1.cmml">‖</mo><mrow id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2.2" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2.2.cmml">𝒙</mi><mrow id="S3.E2.m1.4.4.2.4" xref="S3.E2.m1.4.4.2.3.cmml"><mi id="S3.E2.m1.3.3.1.1" xref="S3.E2.m1.3.3.1.1.cmml">i</mi><mo id="S3.E2.m1.4.4.2.4.1" xref="S3.E2.m1.4.4.2.3.cmml">,</mo><mi id="S3.E2.m1.4.4.2.2" xref="S3.E2.m1.4.4.2.2.cmml">k</mi></mrow></msub><mo id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.1" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.1.cmml">−</mo><msub id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3.2" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3.2.cmml">𝒂</mi><mrow id="S3.E2.m1.6.6.2.4" xref="S3.E2.m1.6.6.2.3.cmml"><mi id="S3.E2.m1.5.5.1.1" xref="S3.E2.m1.5.5.1.1.cmml">k</mi><mo id="S3.E2.m1.6.6.2.4.1" xref="S3.E2.m1.6.6.2.3.cmml">,</mo><mi id="S3.E2.m1.6.6.2.2" xref="S3.E2.m1.6.6.2.2.cmml">j</mi></mrow></msub></mrow><mo stretchy="false" id="S3.E2.m1.10.10.1.1.1.1.1.1.1.3" xref="S3.E2.m1.10.10.1.1.1.1.1.1.2.1.cmml">‖</mo></mrow><mn id="S3.E2.m1.10.10.1.1.1.1.1.3" xref="S3.E2.m1.10.10.1.1.1.1.1.3.cmml">2</mn></msup></mrow></mrow><mo id="S3.E2.m1.10.10.1.1.6" xref="S3.E2.m1.10.10.1.1.6.cmml">∈</mo><mrow id="S3.E2.m1.10.10.1.1.2.1" xref="S3.E2.m1.10.10.1.1.2.2.cmml"><mo stretchy="false" id="S3.E2.m1.10.10.1.1.2.1.2" xref="S3.E2.m1.10.10.1.1.2.2.cmml">{</mo><mn id="S3.E2.m1.7.7" xref="S3.E2.m1.7.7.cmml">1</mn><mo id="S3.E2.m1.10.10.1.1.2.1.3" xref="S3.E2.m1.10.10.1.1.2.2.cmml">,</mo><mn id="S3.E2.m1.8.8" xref="S3.E2.m1.8.8.cmml">2</mn><mo id="S3.E2.m1.10.10.1.1.2.1.4" xref="S3.E2.m1.10.10.1.1.2.2.cmml">,</mo><mi mathvariant="normal" id="S3.E2.m1.9.9" xref="S3.E2.m1.9.9.cmml">…</mi><mo id="S3.E2.m1.10.10.1.1.2.1.5" xref="S3.E2.m1.10.10.1.1.2.2.cmml">,</mo><msub id="S3.E2.m1.10.10.1.1.2.1.1" xref="S3.E2.m1.10.10.1.1.2.1.1.cmml"><mi id="S3.E2.m1.10.10.1.1.2.1.1.2" xref="S3.E2.m1.10.10.1.1.2.1.1.2.cmml">M</mi><mi id="S3.E2.m1.10.10.1.1.2.1.1.3" xref="S3.E2.m1.10.10.1.1.2.1.1.3.cmml">c</mi></msub><mo stretchy="false" id="S3.E2.m1.10.10.1.1.2.1.6" xref="S3.E2.m1.10.10.1.1.2.2.cmml">}</mo></mrow></mrow><mo id="S3.E2.m1.10.10.1.2" xref="S3.E2.m1.10.10.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.10b"><apply id="S3.E2.m1.10.10.1.1.cmml" xref="S3.E2.m1.10.10.1"><and id="S3.E2.m1.10.10.1.1a.cmml" xref="S3.E2.m1.10.10.1"></and><apply id="S3.E2.m1.10.10.1.1b.cmml" xref="S3.E2.m1.10.10.1"><eq id="S3.E2.m1.10.10.1.1.5.cmml" xref="S3.E2.m1.10.10.1.1.5"></eq><apply id="S3.E2.m1.10.10.1.1.4.cmml" xref="S3.E2.m1.10.10.1.1.4"><csymbol cd="ambiguous" id="S3.E2.m1.10.10.1.1.4.1.cmml" xref="S3.E2.m1.10.10.1.1.4">subscript</csymbol><ci id="S3.E2.m1.10.10.1.1.4.2.cmml" xref="S3.E2.m1.10.10.1.1.4.2">𝒄</ci><list id="S3.E2.m1.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.4"><ci id="S3.E2.m1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1">𝑖</ci><ci id="S3.E2.m1.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2">𝑘</ci></list></apply><apply id="S3.E2.m1.10.10.1.1.1.cmml" xref="S3.E2.m1.10.10.1.1.1"><arg id="S3.E2.m1.10.10.1.1.1.2.cmml" xref="S3.E2.m1.10.10.1.1.1.2"></arg><apply id="S3.E2.m1.10.10.1.1.1.1.cmml" xref="S3.E2.m1.10.10.1.1.1.1"><apply id="S3.E2.m1.10.10.1.1.1.1.2.cmml" xref="S3.E2.m1.10.10.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E2.m1.10.10.1.1.1.1.2.1.cmml" xref="S3.E2.m1.10.10.1.1.1.1.2">subscript</csymbol><min id="S3.E2.m1.10.10.1.1.1.1.2.2.cmml" xref="S3.E2.m1.10.10.1.1.1.1.2.2"></min><ci id="S3.E2.m1.10.10.1.1.1.1.2.3.cmml" xref="S3.E2.m1.10.10.1.1.1.1.2.3">𝑗</ci></apply><apply id="S3.E2.m1.10.10.1.1.1.1.1.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.10.10.1.1.1.1.1.2.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1">superscript</csymbol><apply id="S3.E2.m1.10.10.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E2.m1.10.10.1.1.1.1.1.1.2.1.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.2">norm</csymbol><apply id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1"><minus id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.1"></minus><apply id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.2.2">𝒙</ci><list id="S3.E2.m1.4.4.2.3.cmml" xref="S3.E2.m1.4.4.2.4"><ci id="S3.E2.m1.3.3.1.1.cmml" xref="S3.E2.m1.3.3.1.1">𝑖</ci><ci id="S3.E2.m1.4.4.2.2.cmml" xref="S3.E2.m1.4.4.2.2">𝑘</ci></list></apply><apply id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.1.1.1.3.2">𝒂</ci><list id="S3.E2.m1.6.6.2.3.cmml" xref="S3.E2.m1.6.6.2.4"><ci id="S3.E2.m1.5.5.1.1.cmml" xref="S3.E2.m1.5.5.1.1">𝑘</ci><ci id="S3.E2.m1.6.6.2.2.cmml" xref="S3.E2.m1.6.6.2.2">𝑗</ci></list></apply></apply></apply><cn type="integer" id="S3.E2.m1.10.10.1.1.1.1.1.3.cmml" xref="S3.E2.m1.10.10.1.1.1.1.1.3">2</cn></apply></apply></apply></apply><apply id="S3.E2.m1.10.10.1.1c.cmml" xref="S3.E2.m1.10.10.1"><in id="S3.E2.m1.10.10.1.1.6.cmml" xref="S3.E2.m1.10.10.1.1.6"></in><share href="#S3.E2.m1.10.10.1.1.1.cmml" id="S3.E2.m1.10.10.1.1d.cmml" xref="S3.E2.m1.10.10.1"></share><set id="S3.E2.m1.10.10.1.1.2.2.cmml" xref="S3.E2.m1.10.10.1.1.2.1"><cn type="integer" id="S3.E2.m1.7.7.cmml" xref="S3.E2.m1.7.7">1</cn><cn type="integer" id="S3.E2.m1.8.8.cmml" xref="S3.E2.m1.8.8">2</cn><ci id="S3.E2.m1.9.9.cmml" xref="S3.E2.m1.9.9">…</ci><apply id="S3.E2.m1.10.10.1.1.2.1.1.cmml" xref="S3.E2.m1.10.10.1.1.2.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.10.10.1.1.2.1.1.1.cmml" xref="S3.E2.m1.10.10.1.1.2.1.1">subscript</csymbol><ci id="S3.E2.m1.10.10.1.1.2.1.1.2.cmml" xref="S3.E2.m1.10.10.1.1.2.1.1.2">𝑀</ci><ci id="S3.E2.m1.10.10.1.1.2.1.1.3.cmml" xref="S3.E2.m1.10.10.1.1.2.1.1.3">𝑐</ci></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.10c">\bm{c}_{i,k}=\arg\min_{j}\|\bm{x}_{i,k}-\bm{a}_{k,j}\|^{2}\in\{1,2,\ldots,M_{c}\},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS3.SSS1.p3.17" class="ltx_p">where <math id="S3.SS3.SSS1.p3.15.m1.2" class="ltx_Math" alttext="c_{i,k}" display="inline"><semantics id="S3.SS3.SSS1.p3.15.m1.2a"><msub id="S3.SS3.SSS1.p3.15.m1.2.3" xref="S3.SS3.SSS1.p3.15.m1.2.3.cmml"><mi id="S3.SS3.SSS1.p3.15.m1.2.3.2" xref="S3.SS3.SSS1.p3.15.m1.2.3.2.cmml">c</mi><mrow id="S3.SS3.SSS1.p3.15.m1.2.2.2.4" xref="S3.SS3.SSS1.p3.15.m1.2.2.2.3.cmml"><mi id="S3.SS3.SSS1.p3.15.m1.1.1.1.1" xref="S3.SS3.SSS1.p3.15.m1.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS1.p3.15.m1.2.2.2.4.1" xref="S3.SS3.SSS1.p3.15.m1.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS1.p3.15.m1.2.2.2.2" xref="S3.SS3.SSS1.p3.15.m1.2.2.2.2.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.15.m1.2b"><apply id="S3.SS3.SSS1.p3.15.m1.2.3.cmml" xref="S3.SS3.SSS1.p3.15.m1.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS1.p3.15.m1.2.3.1.cmml" xref="S3.SS3.SSS1.p3.15.m1.2.3">subscript</csymbol><ci id="S3.SS3.SSS1.p3.15.m1.2.3.2.cmml" xref="S3.SS3.SSS1.p3.15.m1.2.3.2">𝑐</ci><list id="S3.SS3.SSS1.p3.15.m1.2.2.2.3.cmml" xref="S3.SS3.SSS1.p3.15.m1.2.2.2.4"><ci id="S3.SS3.SSS1.p3.15.m1.1.1.1.1.cmml" xref="S3.SS3.SSS1.p3.15.m1.1.1.1.1">𝑖</ci><ci id="S3.SS3.SSS1.p3.15.m1.2.2.2.2.cmml" xref="S3.SS3.SSS1.p3.15.m1.2.2.2.2">𝑘</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.15.m1.2c">c_{i,k}</annotation></semantics></math> is <math id="S3.SS3.SSS1.p3.16.m2.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS3.SSS1.p3.16.m2.1a"><mi id="S3.SS3.SSS1.p3.16.m2.1.1" xref="S3.SS3.SSS1.p3.16.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.16.m2.1b"><ci id="S3.SS3.SSS1.p3.16.m2.1.1.cmml" xref="S3.SS3.SSS1.p3.16.m2.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.16.m2.1c">k</annotation></semantics></math>-th dimension of the discrete code vector for item <math id="S3.SS3.SSS1.p3.17.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.SSS1.p3.17.m3.1a"><mi id="S3.SS3.SSS1.p3.17.m3.1.1" xref="S3.SS3.SSS1.p3.17.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS1.p3.17.m3.1b"><ci id="S3.SS3.SSS1.p3.17.m3.1.1.cmml" xref="S3.SS3.SSS1.p3.17.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS1.p3.17.m3.1c">i</annotation></semantics></math>.</p>
</div>
</section>
<section id="S3.SS3.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.2. </span>Item Code Representation</h4>

<div id="S3.SS3.SSS2.p1" class="ltx_para">
<p id="S3.SS3.SSS2.p1.2" class="ltx_p">Given the discrete item codes (e.g., (<math id="S3.SS3.SSS2.p1.1.m1.7" class="ltx_Math" alttext="c_{i,1},...,c_{i,D}" display="inline"><semantics id="S3.SS3.SSS2.p1.1.m1.7a"><mrow id="S3.SS3.SSS2.p1.1.m1.7.7.2" xref="S3.SS3.SSS2.p1.1.m1.7.7.3.cmml"><msub id="S3.SS3.SSS2.p1.1.m1.6.6.1.1" xref="S3.SS3.SSS2.p1.1.m1.6.6.1.1.cmml"><mi id="S3.SS3.SSS2.p1.1.m1.6.6.1.1.2" xref="S3.SS3.SSS2.p1.1.m1.6.6.1.1.2.cmml">c</mi><mrow id="S3.SS3.SSS2.p1.1.m1.2.2.2.4" xref="S3.SS3.SSS2.p1.1.m1.2.2.2.3.cmml"><mi id="S3.SS3.SSS2.p1.1.m1.1.1.1.1" xref="S3.SS3.SSS2.p1.1.m1.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS2.p1.1.m1.2.2.2.4.1" xref="S3.SS3.SSS2.p1.1.m1.2.2.2.3.cmml">,</mo><mn id="S3.SS3.SSS2.p1.1.m1.2.2.2.2" xref="S3.SS3.SSS2.p1.1.m1.2.2.2.2.cmml">1</mn></mrow></msub><mo id="S3.SS3.SSS2.p1.1.m1.7.7.2.3" xref="S3.SS3.SSS2.p1.1.m1.7.7.3.cmml">,</mo><mi mathvariant="normal" id="S3.SS3.SSS2.p1.1.m1.5.5" xref="S3.SS3.SSS2.p1.1.m1.5.5.cmml">…</mi><mo id="S3.SS3.SSS2.p1.1.m1.7.7.2.4" xref="S3.SS3.SSS2.p1.1.m1.7.7.3.cmml">,</mo><msub id="S3.SS3.SSS2.p1.1.m1.7.7.2.2" xref="S3.SS3.SSS2.p1.1.m1.7.7.2.2.cmml"><mi id="S3.SS3.SSS2.p1.1.m1.7.7.2.2.2" xref="S3.SS3.SSS2.p1.1.m1.7.7.2.2.2.cmml">c</mi><mrow id="S3.SS3.SSS2.p1.1.m1.4.4.2.4" xref="S3.SS3.SSS2.p1.1.m1.4.4.2.3.cmml"><mi id="S3.SS3.SSS2.p1.1.m1.3.3.1.1" xref="S3.SS3.SSS2.p1.1.m1.3.3.1.1.cmml">i</mi><mo id="S3.SS3.SSS2.p1.1.m1.4.4.2.4.1" xref="S3.SS3.SSS2.p1.1.m1.4.4.2.3.cmml">,</mo><mi id="S3.SS3.SSS2.p1.1.m1.4.4.2.2" xref="S3.SS3.SSS2.p1.1.m1.4.4.2.2.cmml">D</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.1.m1.7b"><list id="S3.SS3.SSS2.p1.1.m1.7.7.3.cmml" xref="S3.SS3.SSS2.p1.1.m1.7.7.2"><apply id="S3.SS3.SSS2.p1.1.m1.6.6.1.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.6.6.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.1.m1.6.6.1.1.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.6.6.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p1.1.m1.6.6.1.1.2.cmml" xref="S3.SS3.SSS2.p1.1.m1.6.6.1.1.2">𝑐</ci><list id="S3.SS3.SSS2.p1.1.m1.2.2.2.3.cmml" xref="S3.SS3.SSS2.p1.1.m1.2.2.2.4"><ci id="S3.SS3.SSS2.p1.1.m1.1.1.1.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.1.1.1.1">𝑖</ci><cn type="integer" id="S3.SS3.SSS2.p1.1.m1.2.2.2.2.cmml" xref="S3.SS3.SSS2.p1.1.m1.2.2.2.2">1</cn></list></apply><ci id="S3.SS3.SSS2.p1.1.m1.5.5.cmml" xref="S3.SS3.SSS2.p1.1.m1.5.5">…</ci><apply id="S3.SS3.SSS2.p1.1.m1.7.7.2.2.cmml" xref="S3.SS3.SSS2.p1.1.m1.7.7.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p1.1.m1.7.7.2.2.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.7.7.2.2">subscript</csymbol><ci id="S3.SS3.SSS2.p1.1.m1.7.7.2.2.2.cmml" xref="S3.SS3.SSS2.p1.1.m1.7.7.2.2.2">𝑐</ci><list id="S3.SS3.SSS2.p1.1.m1.4.4.2.3.cmml" xref="S3.SS3.SSS2.p1.1.m1.4.4.2.4"><ci id="S3.SS3.SSS2.p1.1.m1.3.3.1.1.cmml" xref="S3.SS3.SSS2.p1.1.m1.3.3.1.1">𝑖</ci><ci id="S3.SS3.SSS2.p1.1.m1.4.4.2.2.cmml" xref="S3.SS3.SSS2.p1.1.m1.4.4.2.2">𝐷</ci></list></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.1.m1.7c">c_{i,1},...,c_{i,D}</annotation></semantics></math>) of item <math id="S3.SS3.SSS2.p1.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.SSS2.p1.2.m2.1a"><mi id="S3.SS3.SSS2.p1.2.m2.1.1" xref="S3.SS3.SSS2.p1.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p1.2.m2.1b"><ci id="S3.SS3.SSS2.p1.2.m2.1.1.cmml" xref="S3.SS3.SSS2.p1.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p1.2.m2.1c">i</annotation></semantics></math>), we can derive item representations by directly performing lookup operation on a <span id="S3.SS3.SSS2.p1.2.1" class="ltx_text ltx_font_italic">code embedding table</span> with average pooling.</p>
</div>
<div id="S3.SS3.SSS2.p2" class="ltx_para">
<p id="S3.SS3.SSS2.p2.5" class="ltx_p"><span id="S3.SS3.SSS2.p2.5.1" class="ltx_text ltx_font_bold">Code Embedding Table.</span>
Let <math id="S3.SS3.SSS2.p2.1.m1.1" class="ltx_Math" alttext="\bm{E}\in\mathbb{R}^{D\times M_{c}\times d_{V}}" display="inline"><semantics id="S3.SS3.SSS2.p2.1.m1.1a"><mrow id="S3.SS3.SSS2.p2.1.m1.1.1" xref="S3.SS3.SSS2.p2.1.m1.1.1.cmml"><mi id="S3.SS3.SSS2.p2.1.m1.1.1.2" xref="S3.SS3.SSS2.p2.1.m1.1.1.2.cmml">𝑬</mi><mo id="S3.SS3.SSS2.p2.1.m1.1.1.1" xref="S3.SS3.SSS2.p2.1.m1.1.1.1.cmml">∈</mo><msup id="S3.SS3.SSS2.p2.1.m1.1.1.3" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.cmml"><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.2" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS3.SSS2.p2.1.m1.1.1.3.3" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.cmml"><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.2" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.2.cmml">D</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.1" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.1.cmml">×</mo><msub id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.cmml"><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.2" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.2.cmml">M</mi><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.3" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.3.cmml">c</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.1a" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.1.cmml">×</mo><msub id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.cmml"><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.2" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.3" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.3.cmml">V</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.1.m1.1b"><apply id="S3.SS3.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1"><in id="S3.SS3.SSS2.p2.1.m1.1.1.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.1"></in><ci id="S3.SS3.SSS2.p2.1.m1.1.1.2.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.2">𝑬</ci><apply id="S3.SS3.SSS2.p2.1.m1.1.1.3.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.1.m1.1.1.3.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3">superscript</csymbol><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.2.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.2">ℝ</ci><apply id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3"><times id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.1"></times><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.2.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.2">𝐷</ci><apply id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3">subscript</csymbol><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.2.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.2">𝑀</ci><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.3.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.3.3">𝑐</ci></apply><apply id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.1.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4">subscript</csymbol><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.2.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.3.cmml" xref="S3.SS3.SSS2.p2.1.m1.1.1.3.3.4.3">𝑉</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.1.m1.1c">\bm{E}\in\mathbb{R}^{D\times M_{c}\times d_{V}}</annotation></semantics></math> be the global <span id="S3.SS3.SSS2.p2.5.2" class="ltx_text ltx_font_italic">code embedding table</span>, where <math id="S3.SS3.SSS2.p2.2.m2.1" class="ltx_Math" alttext="d_{v}" display="inline"><semantics id="S3.SS3.SSS2.p2.2.m2.1a"><msub id="S3.SS3.SSS2.p2.2.m2.1.1" xref="S3.SS3.SSS2.p2.2.m2.1.1.cmml"><mi id="S3.SS3.SSS2.p2.2.m2.1.1.2" xref="S3.SS3.SSS2.p2.2.m2.1.1.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.2.m2.1.1.3" xref="S3.SS3.SSS2.p2.2.m2.1.1.3.cmml">v</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.2.m2.1b"><apply id="S3.SS3.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.2.m2.1.1.1.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p2.2.m2.1.1.2.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.2.m2.1.1.3.cmml" xref="S3.SS3.SSS2.p2.2.m2.1.1.3">𝑣</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.2.m2.1c">d_{v}</annotation></semantics></math> denotes the dimension of the item embedding. There are <math id="S3.SS3.SSS2.p2.3.m3.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S3.SS3.SSS2.p2.3.m3.1a"><mi id="S3.SS3.SSS2.p2.3.m3.1.1" xref="S3.SS3.SSS2.p2.3.m3.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.3.m3.1b"><ci id="S3.SS3.SSS2.p2.3.m3.1.1.cmml" xref="S3.SS3.SSS2.p2.3.m3.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.3.m3.1c">D</annotation></semantics></math> code embedding matrices within <math id="S3.SS3.SSS2.p2.4.m4.1" class="ltx_Math" alttext="\bm{E}" display="inline"><semantics id="S3.SS3.SSS2.p2.4.m4.1a"><mi id="S3.SS3.SSS2.p2.4.m4.1.1" xref="S3.SS3.SSS2.p2.4.m4.1.1.cmml">𝑬</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.4.m4.1b"><ci id="S3.SS3.SSS2.p2.4.m4.1.1.cmml" xref="S3.SS3.SSS2.p2.4.m4.1.1">𝑬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.4.m4.1c">\bm{E}</annotation></semantics></math>, and each of them <math id="S3.SS3.SSS2.p2.5.m5.1" class="ltx_Math" alttext="\bm{E}^{(k)}\in\mathbb{R}^{M_{c}\times d_{V}}" display="inline"><semantics id="S3.SS3.SSS2.p2.5.m5.1a"><mrow id="S3.SS3.SSS2.p2.5.m5.1.2" xref="S3.SS3.SSS2.p2.5.m5.1.2.cmml"><msup id="S3.SS3.SSS2.p2.5.m5.1.2.2" xref="S3.SS3.SSS2.p2.5.m5.1.2.2.cmml"><mi id="S3.SS3.SSS2.p2.5.m5.1.2.2.2" xref="S3.SS3.SSS2.p2.5.m5.1.2.2.2.cmml">𝑬</mi><mrow id="S3.SS3.SSS2.p2.5.m5.1.1.1.3" xref="S3.SS3.SSS2.p2.5.m5.1.2.2.cmml"><mo stretchy="false" id="S3.SS3.SSS2.p2.5.m5.1.1.1.3.1" xref="S3.SS3.SSS2.p2.5.m5.1.2.2.cmml">(</mo><mi id="S3.SS3.SSS2.p2.5.m5.1.1.1.1" xref="S3.SS3.SSS2.p2.5.m5.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S3.SS3.SSS2.p2.5.m5.1.1.1.3.2" xref="S3.SS3.SSS2.p2.5.m5.1.2.2.cmml">)</mo></mrow></msup><mo id="S3.SS3.SSS2.p2.5.m5.1.2.1" xref="S3.SS3.SSS2.p2.5.m5.1.2.1.cmml">∈</mo><msup id="S3.SS3.SSS2.p2.5.m5.1.2.3" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.cmml"><mi id="S3.SS3.SSS2.p2.5.m5.1.2.3.2" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.2.cmml">ℝ</mi><mrow id="S3.SS3.SSS2.p2.5.m5.1.2.3.3" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.cmml"><msub id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.cmml"><mi id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.2" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.2.cmml">M</mi><mi id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.3" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.3.cmml">c</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.1" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.1.cmml">×</mo><msub id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.cmml"><mi id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.2" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.2.cmml">d</mi><mi id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.3" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.3.cmml">V</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p2.5.m5.1b"><apply id="S3.SS3.SSS2.p2.5.m5.1.2.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2"><in id="S3.SS3.SSS2.p2.5.m5.1.2.1.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.1"></in><apply id="S3.SS3.SSS2.p2.5.m5.1.2.2.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.5.m5.1.2.2.1.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.2">superscript</csymbol><ci id="S3.SS3.SSS2.p2.5.m5.1.2.2.2.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.2.2">𝑬</ci><ci id="S3.SS3.SSS2.p2.5.m5.1.1.1.1.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.1.1.1">𝑘</ci></apply><apply id="S3.SS3.SSS2.p2.5.m5.1.2.3.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.5.m5.1.2.3.1.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3">superscript</csymbol><ci id="S3.SS3.SSS2.p2.5.m5.1.2.3.2.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.2">ℝ</ci><apply id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3"><times id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.1.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.1"></times><apply id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.1.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2">subscript</csymbol><ci id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.2.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.2">𝑀</ci><ci id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.3.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.2.3">𝑐</ci></apply><apply id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.1.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3">subscript</csymbol><ci id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.2.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.2">𝑑</ci><ci id="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.3.cmml" xref="S3.SS3.SSS2.p2.5.m5.1.2.3.3.3.3">𝑉</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p2.5.m5.1c">\bm{E}^{(k)}\in\mathbb{R}^{M_{c}\times d_{V}}</annotation></semantics></math> is shared by the discrete codes of all the items (even if they are not in the same domain). This characteristic allows us to align different domains and embed the common domain information into item embeddings.
Moreover, as we share the code embedding among all domains, we can represent items in the same code space, which forms the prerequisite for our subsequent <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr> endeavors.</p>
</div>
<div id="S3.SS3.SSS2.p3" class="ltx_para">
<p id="S3.SS3.SSS2.p3.6" class="ltx_p"><span id="S3.SS3.SSS2.p3.6.1" class="ltx_text ltx_font_bold">Lookup Operation.</span>
By performing the lookup operation on <math id="S3.SS3.SSS2.p3.1.m1.1" class="ltx_Math" alttext="\bm{E}" display="inline"><semantics id="S3.SS3.SSS2.p3.1.m1.1a"><mi id="S3.SS3.SSS2.p3.1.m1.1.1" xref="S3.SS3.SSS2.p3.1.m1.1.1.cmml">𝑬</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p3.1.m1.1b"><ci id="S3.SS3.SSS2.p3.1.m1.1.1.cmml" xref="S3.SS3.SSS2.p3.1.m1.1.1">𝑬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p3.1.m1.1c">\bm{E}</annotation></semantics></math>, the code embeddings for item <math id="S3.SS3.SSS2.p3.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.SSS2.p3.2.m2.1a"><mi id="S3.SS3.SSS2.p3.2.m2.1.1" xref="S3.SS3.SSS2.p3.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p3.2.m2.1b"><ci id="S3.SS3.SSS2.p3.2.m2.1.1.cmml" xref="S3.SS3.SSS2.p3.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p3.2.m2.1c">i</annotation></semantics></math> can be denoted as <math id="S3.SS3.SSS2.p3.3.m3.11" class="ltx_Math" alttext="\{\bm{e}_{1,c_{i,1}},\ldots,\bm{e}_{D,c_{i,D}}\}" display="inline"><semantics id="S3.SS3.SSS2.p3.3.m3.11a"><mrow id="S3.SS3.SSS2.p3.3.m3.11.11.2" xref="S3.SS3.SSS2.p3.3.m3.11.11.3.cmml"><mo stretchy="false" id="S3.SS3.SSS2.p3.3.m3.11.11.2.3" xref="S3.SS3.SSS2.p3.3.m3.11.11.3.cmml">{</mo><msub id="S3.SS3.SSS2.p3.3.m3.10.10.1.1" xref="S3.SS3.SSS2.p3.3.m3.10.10.1.1.cmml"><mi id="S3.SS3.SSS2.p3.3.m3.10.10.1.1.2" xref="S3.SS3.SSS2.p3.3.m3.10.10.1.1.2.cmml">𝒆</mi><mrow id="S3.SS3.SSS2.p3.3.m3.4.4.4.4" xref="S3.SS3.SSS2.p3.3.m3.4.4.4.5.cmml"><mn id="S3.SS3.SSS2.p3.3.m3.3.3.3.3" xref="S3.SS3.SSS2.p3.3.m3.3.3.3.3.cmml">1</mn><mo id="S3.SS3.SSS2.p3.3.m3.4.4.4.4.2" xref="S3.SS3.SSS2.p3.3.m3.4.4.4.5.cmml">,</mo><msub id="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1" xref="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1.cmml"><mi id="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1.2" xref="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1.2.cmml">c</mi><mrow id="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.4" xref="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.3.cmml"><mi id="S3.SS3.SSS2.p3.3.m3.1.1.1.1.1.1" xref="S3.SS3.SSS2.p3.3.m3.1.1.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.4.1" xref="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.3.cmml">,</mo><mn id="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.2" xref="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.2.cmml">1</mn></mrow></msub></mrow></msub><mo id="S3.SS3.SSS2.p3.3.m3.11.11.2.4" xref="S3.SS3.SSS2.p3.3.m3.11.11.3.cmml">,</mo><mi mathvariant="normal" id="S3.SS3.SSS2.p3.3.m3.9.9" xref="S3.SS3.SSS2.p3.3.m3.9.9.cmml">…</mi><mo id="S3.SS3.SSS2.p3.3.m3.11.11.2.5" xref="S3.SS3.SSS2.p3.3.m3.11.11.3.cmml">,</mo><msub id="S3.SS3.SSS2.p3.3.m3.11.11.2.2" xref="S3.SS3.SSS2.p3.3.m3.11.11.2.2.cmml"><mi id="S3.SS3.SSS2.p3.3.m3.11.11.2.2.2" xref="S3.SS3.SSS2.p3.3.m3.11.11.2.2.2.cmml">𝒆</mi><mrow id="S3.SS3.SSS2.p3.3.m3.8.8.4.4" xref="S3.SS3.SSS2.p3.3.m3.8.8.4.5.cmml"><mi id="S3.SS3.SSS2.p3.3.m3.7.7.3.3" xref="S3.SS3.SSS2.p3.3.m3.7.7.3.3.cmml">D</mi><mo id="S3.SS3.SSS2.p3.3.m3.8.8.4.4.2" xref="S3.SS3.SSS2.p3.3.m3.8.8.4.5.cmml">,</mo><msub id="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1" xref="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1.cmml"><mi id="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1.2" xref="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1.2.cmml">c</mi><mrow id="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.4" xref="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.3.cmml"><mi id="S3.SS3.SSS2.p3.3.m3.5.5.1.1.1.1" xref="S3.SS3.SSS2.p3.3.m3.5.5.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.4.1" xref="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.2" xref="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.2.cmml">D</mi></mrow></msub></mrow></msub><mo stretchy="false" id="S3.SS3.SSS2.p3.3.m3.11.11.2.6" xref="S3.SS3.SSS2.p3.3.m3.11.11.3.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p3.3.m3.11b"><set id="S3.SS3.SSS2.p3.3.m3.11.11.3.cmml" xref="S3.SS3.SSS2.p3.3.m3.11.11.2"><apply id="S3.SS3.SSS2.p3.3.m3.10.10.1.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.10.10.1.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.3.m3.10.10.1.1.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.10.10.1.1">subscript</csymbol><ci id="S3.SS3.SSS2.p3.3.m3.10.10.1.1.2.cmml" xref="S3.SS3.SSS2.p3.3.m3.10.10.1.1.2">𝒆</ci><list id="S3.SS3.SSS2.p3.3.m3.4.4.4.5.cmml" xref="S3.SS3.SSS2.p3.3.m3.4.4.4.4"><cn type="integer" id="S3.SS3.SSS2.p3.3.m3.3.3.3.3.cmml" xref="S3.SS3.SSS2.p3.3.m3.3.3.3.3">1</cn><apply id="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1">subscript</csymbol><ci id="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1.2.cmml" xref="S3.SS3.SSS2.p3.3.m3.4.4.4.4.1.2">𝑐</ci><list id="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.3.cmml" xref="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.4"><ci id="S3.SS3.SSS2.p3.3.m3.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.1.1.1.1.1.1">𝑖</ci><cn type="integer" id="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.2.cmml" xref="S3.SS3.SSS2.p3.3.m3.2.2.2.2.2.2">1</cn></list></apply></list></apply><ci id="S3.SS3.SSS2.p3.3.m3.9.9.cmml" xref="S3.SS3.SSS2.p3.3.m3.9.9">…</ci><apply id="S3.SS3.SSS2.p3.3.m3.11.11.2.2.cmml" xref="S3.SS3.SSS2.p3.3.m3.11.11.2.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.3.m3.11.11.2.2.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.11.11.2.2">subscript</csymbol><ci id="S3.SS3.SSS2.p3.3.m3.11.11.2.2.2.cmml" xref="S3.SS3.SSS2.p3.3.m3.11.11.2.2.2">𝒆</ci><list id="S3.SS3.SSS2.p3.3.m3.8.8.4.5.cmml" xref="S3.SS3.SSS2.p3.3.m3.8.8.4.4"><ci id="S3.SS3.SSS2.p3.3.m3.7.7.3.3.cmml" xref="S3.SS3.SSS2.p3.3.m3.7.7.3.3">𝐷</ci><apply id="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1">subscript</csymbol><ci id="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1.2.cmml" xref="S3.SS3.SSS2.p3.3.m3.8.8.4.4.1.2">𝑐</ci><list id="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.3.cmml" xref="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.4"><ci id="S3.SS3.SSS2.p3.3.m3.5.5.1.1.1.1.cmml" xref="S3.SS3.SSS2.p3.3.m3.5.5.1.1.1.1">𝑖</ci><ci id="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.2.cmml" xref="S3.SS3.SSS2.p3.3.m3.6.6.2.2.2.2">𝐷</ci></list></apply></list></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p3.3.m3.11c">\{\bm{e}_{1,c_{i,1}},\ldots,\bm{e}_{D,c_{i,D}}\}</annotation></semantics></math>, where <math id="S3.SS3.SSS2.p3.4.m4.4" class="ltx_Math" alttext="\bm{e}_{k,c_{i,k}}\in\mathbb{R}^{d_{V}}" display="inline"><semantics id="S3.SS3.SSS2.p3.4.m4.4a"><mrow id="S3.SS3.SSS2.p3.4.m4.4.5" xref="S3.SS3.SSS2.p3.4.m4.4.5.cmml"><msub id="S3.SS3.SSS2.p3.4.m4.4.5.2" xref="S3.SS3.SSS2.p3.4.m4.4.5.2.cmml"><mi id="S3.SS3.SSS2.p3.4.m4.4.5.2.2" xref="S3.SS3.SSS2.p3.4.m4.4.5.2.2.cmml">𝒆</mi><mrow id="S3.SS3.SSS2.p3.4.m4.4.4.4.4" xref="S3.SS3.SSS2.p3.4.m4.4.4.4.5.cmml"><mi id="S3.SS3.SSS2.p3.4.m4.3.3.3.3" xref="S3.SS3.SSS2.p3.4.m4.3.3.3.3.cmml">k</mi><mo id="S3.SS3.SSS2.p3.4.m4.4.4.4.4.2" xref="S3.SS3.SSS2.p3.4.m4.4.4.4.5.cmml">,</mo><msub id="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1" xref="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1.cmml"><mi id="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1.2" xref="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1.2.cmml">c</mi><mrow id="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.4" xref="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.3.cmml"><mi id="S3.SS3.SSS2.p3.4.m4.1.1.1.1.1.1" xref="S3.SS3.SSS2.p3.4.m4.1.1.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.4.1" xref="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.2" xref="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.2.cmml">k</mi></mrow></msub></mrow></msub><mo id="S3.SS3.SSS2.p3.4.m4.4.5.1" xref="S3.SS3.SSS2.p3.4.m4.4.5.1.cmml">∈</mo><msup id="S3.SS3.SSS2.p3.4.m4.4.5.3" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.cmml"><mi id="S3.SS3.SSS2.p3.4.m4.4.5.3.2" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.2.cmml">ℝ</mi><msub id="S3.SS3.SSS2.p3.4.m4.4.5.3.3" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.3.cmml"><mi id="S3.SS3.SSS2.p3.4.m4.4.5.3.3.2" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.3.2.cmml">d</mi><mi id="S3.SS3.SSS2.p3.4.m4.4.5.3.3.3" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.3.3.cmml">V</mi></msub></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p3.4.m4.4b"><apply id="S3.SS3.SSS2.p3.4.m4.4.5.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5"><in id="S3.SS3.SSS2.p3.4.m4.4.5.1.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.1"></in><apply id="S3.SS3.SSS2.p3.4.m4.4.5.2.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.4.m4.4.5.2.1.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.2">subscript</csymbol><ci id="S3.SS3.SSS2.p3.4.m4.4.5.2.2.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.2.2">𝒆</ci><list id="S3.SS3.SSS2.p3.4.m4.4.4.4.5.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.4.4.4"><ci id="S3.SS3.SSS2.p3.4.m4.3.3.3.3.cmml" xref="S3.SS3.SSS2.p3.4.m4.3.3.3.3">𝑘</ci><apply id="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1.1.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1">subscript</csymbol><ci id="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1.2.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.4.4.4.1.2">𝑐</ci><list id="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.3.cmml" xref="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.4"><ci id="S3.SS3.SSS2.p3.4.m4.1.1.1.1.1.1.cmml" xref="S3.SS3.SSS2.p3.4.m4.1.1.1.1.1.1">𝑖</ci><ci id="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.2.cmml" xref="S3.SS3.SSS2.p3.4.m4.2.2.2.2.2.2">𝑘</ci></list></apply></list></apply><apply id="S3.SS3.SSS2.p3.4.m4.4.5.3.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.4.m4.4.5.3.1.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.3">superscript</csymbol><ci id="S3.SS3.SSS2.p3.4.m4.4.5.3.2.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.2">ℝ</ci><apply id="S3.SS3.SSS2.p3.4.m4.4.5.3.3.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.4.m4.4.5.3.3.1.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.3">subscript</csymbol><ci id="S3.SS3.SSS2.p3.4.m4.4.5.3.3.2.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.3.2">𝑑</ci><ci id="S3.SS3.SSS2.p3.4.m4.4.5.3.3.3.cmml" xref="S3.SS3.SSS2.p3.4.m4.4.5.3.3.3">𝑉</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p3.4.m4.4c">\bm{e}_{k,c_{i,k}}\in\mathbb{R}^{d_{V}}</annotation></semantics></math> is the <math id="S3.SS3.SSS2.p3.5.m5.2" class="ltx_Math" alttext="c_{i,k}" display="inline"><semantics id="S3.SS3.SSS2.p3.5.m5.2a"><msub id="S3.SS3.SSS2.p3.5.m5.2.3" xref="S3.SS3.SSS2.p3.5.m5.2.3.cmml"><mi id="S3.SS3.SSS2.p3.5.m5.2.3.2" xref="S3.SS3.SSS2.p3.5.m5.2.3.2.cmml">c</mi><mrow id="S3.SS3.SSS2.p3.5.m5.2.2.2.4" xref="S3.SS3.SSS2.p3.5.m5.2.2.2.3.cmml"><mi id="S3.SS3.SSS2.p3.5.m5.1.1.1.1" xref="S3.SS3.SSS2.p3.5.m5.1.1.1.1.cmml">i</mi><mo id="S3.SS3.SSS2.p3.5.m5.2.2.2.4.1" xref="S3.SS3.SSS2.p3.5.m5.2.2.2.3.cmml">,</mo><mi id="S3.SS3.SSS2.p3.5.m5.2.2.2.2" xref="S3.SS3.SSS2.p3.5.m5.2.2.2.2.cmml">k</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p3.5.m5.2b"><apply id="S3.SS3.SSS2.p3.5.m5.2.3.cmml" xref="S3.SS3.SSS2.p3.5.m5.2.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.5.m5.2.3.1.cmml" xref="S3.SS3.SSS2.p3.5.m5.2.3">subscript</csymbol><ci id="S3.SS3.SSS2.p3.5.m5.2.3.2.cmml" xref="S3.SS3.SSS2.p3.5.m5.2.3.2">𝑐</ci><list id="S3.SS3.SSS2.p3.5.m5.2.2.2.3.cmml" xref="S3.SS3.SSS2.p3.5.m5.2.2.2.4"><ci id="S3.SS3.SSS2.p3.5.m5.1.1.1.1.cmml" xref="S3.SS3.SSS2.p3.5.m5.1.1.1.1">𝑖</ci><ci id="S3.SS3.SSS2.p3.5.m5.2.2.2.2.cmml" xref="S3.SS3.SSS2.p3.5.m5.2.2.2.2">𝑘</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p3.5.m5.2c">c_{i,k}</annotation></semantics></math>-th row of matrix <math id="S3.SS3.SSS2.p3.6.m6.1" class="ltx_Math" alttext="\bm{E}^{(k)}" display="inline"><semantics id="S3.SS3.SSS2.p3.6.m6.1a"><msup id="S3.SS3.SSS2.p3.6.m6.1.2" xref="S3.SS3.SSS2.p3.6.m6.1.2.cmml"><mi id="S3.SS3.SSS2.p3.6.m6.1.2.2" xref="S3.SS3.SSS2.p3.6.m6.1.2.2.cmml">𝑬</mi><mrow id="S3.SS3.SSS2.p3.6.m6.1.1.1.3" xref="S3.SS3.SSS2.p3.6.m6.1.2.cmml"><mo stretchy="false" id="S3.SS3.SSS2.p3.6.m6.1.1.1.3.1" xref="S3.SS3.SSS2.p3.6.m6.1.2.cmml">(</mo><mi id="S3.SS3.SSS2.p3.6.m6.1.1.1.1" xref="S3.SS3.SSS2.p3.6.m6.1.1.1.1.cmml">k</mi><mo stretchy="false" id="S3.SS3.SSS2.p3.6.m6.1.1.1.3.2" xref="S3.SS3.SSS2.p3.6.m6.1.2.cmml">)</mo></mrow></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p3.6.m6.1b"><apply id="S3.SS3.SSS2.p3.6.m6.1.2.cmml" xref="S3.SS3.SSS2.p3.6.m6.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p3.6.m6.1.2.1.cmml" xref="S3.SS3.SSS2.p3.6.m6.1.2">superscript</csymbol><ci id="S3.SS3.SSS2.p3.6.m6.1.2.2.cmml" xref="S3.SS3.SSS2.p3.6.m6.1.2.2">𝑬</ci><ci id="S3.SS3.SSS2.p3.6.m6.1.1.1.1.cmml" xref="S3.SS3.SSS2.p3.6.m6.1.1.1.1">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p3.6.m6.1c">\bm{E}^{(k)}</annotation></semantics></math>.</p>
</div>
<div id="S3.SS3.SSS2.p4" class="ltx_para">
<p id="S3.SS3.SSS2.p4.1" class="ltx_p">Then, we can arrive at the final item representation of item <math id="S3.SS3.SSS2.p4.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.SSS2.p4.1.m1.1a"><mi id="S3.SS3.SSS2.p4.1.m1.1.1" xref="S3.SS3.SSS2.p4.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p4.1.m1.1b"><ci id="S3.SS3.SSS2.p4.1.m1.1.1.cmml" xref="S3.SS3.SSS2.p4.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p4.1.m1.1c">i</annotation></semantics></math> by conducting the average pooling on the code embeddings:</p>
<table id="S3.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(3)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E3.m1.11" class="ltx_Math" alttext="\bm{v}_{i}=\operatorname{Pool}\left(\left[\bm{e}_{1,c_{i,1}};\ldots;\bm{e}_{D,c_{i,D}}\right]\right)," display="block"><semantics id="S3.E3.m1.11a"><mrow id="S3.E3.m1.11.11.1" xref="S3.E3.m1.11.11.1.1.cmml"><mrow id="S3.E3.m1.11.11.1.1" xref="S3.E3.m1.11.11.1.1.cmml"><msub id="S3.E3.m1.11.11.1.1.3" xref="S3.E3.m1.11.11.1.1.3.cmml"><mi id="S3.E3.m1.11.11.1.1.3.2" xref="S3.E3.m1.11.11.1.1.3.2.cmml">𝒗</mi><mi id="S3.E3.m1.11.11.1.1.3.3" xref="S3.E3.m1.11.11.1.1.3.3.cmml">i</mi></msub><mo id="S3.E3.m1.11.11.1.1.2" xref="S3.E3.m1.11.11.1.1.2.cmml">=</mo><mrow id="S3.E3.m1.11.11.1.1.1.1" xref="S3.E3.m1.11.11.1.1.1.2.cmml"><mi id="S3.E3.m1.10.10" xref="S3.E3.m1.10.10.cmml">Pool</mi><mo id="S3.E3.m1.11.11.1.1.1.1a" xref="S3.E3.m1.11.11.1.1.1.2.cmml">⁡</mo><mrow id="S3.E3.m1.11.11.1.1.1.1.1" xref="S3.E3.m1.11.11.1.1.1.2.cmml"><mo id="S3.E3.m1.11.11.1.1.1.1.1.2" xref="S3.E3.m1.11.11.1.1.1.2.cmml">(</mo><mrow id="S3.E3.m1.11.11.1.1.1.1.1.1.2" xref="S3.E3.m1.11.11.1.1.1.1.1.1.3.cmml"><mo id="S3.E3.m1.11.11.1.1.1.1.1.1.2.3" xref="S3.E3.m1.11.11.1.1.1.1.1.1.3.cmml">[</mo><msub id="S3.E3.m1.11.11.1.1.1.1.1.1.1.1" xref="S3.E3.m1.11.11.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E3.m1.11.11.1.1.1.1.1.1.1.1.2" xref="S3.E3.m1.11.11.1.1.1.1.1.1.1.1.2.cmml">𝒆</mi><mrow id="S3.E3.m1.4.4.4.4" xref="S3.E3.m1.4.4.4.5.cmml"><mn id="S3.E3.m1.3.3.3.3" xref="S3.E3.m1.3.3.3.3.cmml">1</mn><mo id="S3.E3.m1.4.4.4.4.2" xref="S3.E3.m1.4.4.4.5.cmml">,</mo><msub id="S3.E3.m1.4.4.4.4.1" xref="S3.E3.m1.4.4.4.4.1.cmml"><mi id="S3.E3.m1.4.4.4.4.1.2" xref="S3.E3.m1.4.4.4.4.1.2.cmml">c</mi><mrow id="S3.E3.m1.2.2.2.2.2.4" xref="S3.E3.m1.2.2.2.2.2.3.cmml"><mi id="S3.E3.m1.1.1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.1.1.cmml">i</mi><mo id="S3.E3.m1.2.2.2.2.2.4.1" xref="S3.E3.m1.2.2.2.2.2.3.cmml">,</mo><mn id="S3.E3.m1.2.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.2.2.cmml">1</mn></mrow></msub></mrow></msub><mo id="S3.E3.m1.11.11.1.1.1.1.1.1.2.4" xref="S3.E3.m1.11.11.1.1.1.1.1.1.3.cmml">;</mo><mi mathvariant="normal" id="S3.E3.m1.9.9" xref="S3.E3.m1.9.9.cmml">…</mi><mo id="S3.E3.m1.11.11.1.1.1.1.1.1.2.5" xref="S3.E3.m1.11.11.1.1.1.1.1.1.3.cmml">;</mo><msub id="S3.E3.m1.11.11.1.1.1.1.1.1.2.2" xref="S3.E3.m1.11.11.1.1.1.1.1.1.2.2.cmml"><mi id="S3.E3.m1.11.11.1.1.1.1.1.1.2.2.2" xref="S3.E3.m1.11.11.1.1.1.1.1.1.2.2.2.cmml">𝒆</mi><mrow id="S3.E3.m1.8.8.4.4" xref="S3.E3.m1.8.8.4.5.cmml"><mi id="S3.E3.m1.7.7.3.3" xref="S3.E3.m1.7.7.3.3.cmml">D</mi><mo id="S3.E3.m1.8.8.4.4.2" xref="S3.E3.m1.8.8.4.5.cmml">,</mo><msub id="S3.E3.m1.8.8.4.4.1" xref="S3.E3.m1.8.8.4.4.1.cmml"><mi id="S3.E3.m1.8.8.4.4.1.2" xref="S3.E3.m1.8.8.4.4.1.2.cmml">c</mi><mrow id="S3.E3.m1.6.6.2.2.2.4" xref="S3.E3.m1.6.6.2.2.2.3.cmml"><mi id="S3.E3.m1.5.5.1.1.1.1" xref="S3.E3.m1.5.5.1.1.1.1.cmml">i</mi><mo id="S3.E3.m1.6.6.2.2.2.4.1" xref="S3.E3.m1.6.6.2.2.2.3.cmml">,</mo><mi id="S3.E3.m1.6.6.2.2.2.2" xref="S3.E3.m1.6.6.2.2.2.2.cmml">D</mi></mrow></msub></mrow></msub><mo id="S3.E3.m1.11.11.1.1.1.1.1.1.2.6" xref="S3.E3.m1.11.11.1.1.1.1.1.1.3.cmml">]</mo></mrow><mo id="S3.E3.m1.11.11.1.1.1.1.1.3" xref="S3.E3.m1.11.11.1.1.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E3.m1.11.11.1.2" xref="S3.E3.m1.11.11.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.11b"><apply id="S3.E3.m1.11.11.1.1.cmml" xref="S3.E3.m1.11.11.1"><eq id="S3.E3.m1.11.11.1.1.2.cmml" xref="S3.E3.m1.11.11.1.1.2"></eq><apply id="S3.E3.m1.11.11.1.1.3.cmml" xref="S3.E3.m1.11.11.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.11.11.1.1.3.1.cmml" xref="S3.E3.m1.11.11.1.1.3">subscript</csymbol><ci id="S3.E3.m1.11.11.1.1.3.2.cmml" xref="S3.E3.m1.11.11.1.1.3.2">𝒗</ci><ci id="S3.E3.m1.11.11.1.1.3.3.cmml" xref="S3.E3.m1.11.11.1.1.3.3">𝑖</ci></apply><apply id="S3.E3.m1.11.11.1.1.1.2.cmml" xref="S3.E3.m1.11.11.1.1.1.1"><ci id="S3.E3.m1.10.10.cmml" xref="S3.E3.m1.10.10">Pool</ci><list id="S3.E3.m1.11.11.1.1.1.1.1.1.3.cmml" xref="S3.E3.m1.11.11.1.1.1.1.1.1.2"><apply id="S3.E3.m1.11.11.1.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.11.11.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.11.11.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.11.11.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.11.11.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.11.11.1.1.1.1.1.1.1.1.2">𝒆</ci><list id="S3.E3.m1.4.4.4.5.cmml" xref="S3.E3.m1.4.4.4.4"><cn type="integer" id="S3.E3.m1.3.3.3.3.cmml" xref="S3.E3.m1.3.3.3.3">1</cn><apply id="S3.E3.m1.4.4.4.4.1.cmml" xref="S3.E3.m1.4.4.4.4.1"><csymbol cd="ambiguous" id="S3.E3.m1.4.4.4.4.1.1.cmml" xref="S3.E3.m1.4.4.4.4.1">subscript</csymbol><ci id="S3.E3.m1.4.4.4.4.1.2.cmml" xref="S3.E3.m1.4.4.4.4.1.2">𝑐</ci><list id="S3.E3.m1.2.2.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2.2.2.4"><ci id="S3.E3.m1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1.1">𝑖</ci><cn type="integer" id="S3.E3.m1.2.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2">1</cn></list></apply></list></apply><ci id="S3.E3.m1.9.9.cmml" xref="S3.E3.m1.9.9">…</ci><apply id="S3.E3.m1.11.11.1.1.1.1.1.1.2.2.cmml" xref="S3.E3.m1.11.11.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.11.11.1.1.1.1.1.1.2.2.1.cmml" xref="S3.E3.m1.11.11.1.1.1.1.1.1.2.2">subscript</csymbol><ci id="S3.E3.m1.11.11.1.1.1.1.1.1.2.2.2.cmml" xref="S3.E3.m1.11.11.1.1.1.1.1.1.2.2.2">𝒆</ci><list id="S3.E3.m1.8.8.4.5.cmml" xref="S3.E3.m1.8.8.4.4"><ci id="S3.E3.m1.7.7.3.3.cmml" xref="S3.E3.m1.7.7.3.3">𝐷</ci><apply id="S3.E3.m1.8.8.4.4.1.cmml" xref="S3.E3.m1.8.8.4.4.1"><csymbol cd="ambiguous" id="S3.E3.m1.8.8.4.4.1.1.cmml" xref="S3.E3.m1.8.8.4.4.1">subscript</csymbol><ci id="S3.E3.m1.8.8.4.4.1.2.cmml" xref="S3.E3.m1.8.8.4.4.1.2">𝑐</ci><list id="S3.E3.m1.6.6.2.2.2.3.cmml" xref="S3.E3.m1.6.6.2.2.2.4"><ci id="S3.E3.m1.5.5.1.1.1.1.cmml" xref="S3.E3.m1.5.5.1.1.1.1">𝑖</ci><ci id="S3.E3.m1.6.6.2.2.2.2.cmml" xref="S3.E3.m1.6.6.2.2.2.2">𝐷</ci></list></apply></list></apply></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.11c">\bm{v}_{i}=\operatorname{Pool}\left(\left[\bm{e}_{1,c_{i,1}};\ldots;\bm{e}_{D,c_{i,D}}\right]\right),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS3.SSS2.p4.4" class="ltx_p">where <math id="S3.SS3.SSS2.p4.2.m1.1" class="ltx_Math" alttext="\bm{v}_{i}\in\mathbb{R}^{d_{V}}" display="inline"><semantics id="S3.SS3.SSS2.p4.2.m1.1a"><mrow id="S3.SS3.SSS2.p4.2.m1.1.1" xref="S3.SS3.SSS2.p4.2.m1.1.1.cmml"><msub id="S3.SS3.SSS2.p4.2.m1.1.1.2" xref="S3.SS3.SSS2.p4.2.m1.1.1.2.cmml"><mi id="S3.SS3.SSS2.p4.2.m1.1.1.2.2" xref="S3.SS3.SSS2.p4.2.m1.1.1.2.2.cmml">𝒗</mi><mi id="S3.SS3.SSS2.p4.2.m1.1.1.2.3" xref="S3.SS3.SSS2.p4.2.m1.1.1.2.3.cmml">i</mi></msub><mo id="S3.SS3.SSS2.p4.2.m1.1.1.1" xref="S3.SS3.SSS2.p4.2.m1.1.1.1.cmml">∈</mo><msup id="S3.SS3.SSS2.p4.2.m1.1.1.3" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.cmml"><mi id="S3.SS3.SSS2.p4.2.m1.1.1.3.2" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.2.cmml">ℝ</mi><msub id="S3.SS3.SSS2.p4.2.m1.1.1.3.3" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.3.cmml"><mi id="S3.SS3.SSS2.p4.2.m1.1.1.3.3.2" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.3.2.cmml">d</mi><mi id="S3.SS3.SSS2.p4.2.m1.1.1.3.3.3" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.3.3.cmml">V</mi></msub></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p4.2.m1.1b"><apply id="S3.SS3.SSS2.p4.2.m1.1.1.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1"><in id="S3.SS3.SSS2.p4.2.m1.1.1.1.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.1"></in><apply id="S3.SS3.SSS2.p4.2.m1.1.1.2.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p4.2.m1.1.1.2.1.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.2">subscript</csymbol><ci id="S3.SS3.SSS2.p4.2.m1.1.1.2.2.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.2.2">𝒗</ci><ci id="S3.SS3.SSS2.p4.2.m1.1.1.2.3.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.2.3">𝑖</ci></apply><apply id="S3.SS3.SSS2.p4.2.m1.1.1.3.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p4.2.m1.1.1.3.1.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.3">superscript</csymbol><ci id="S3.SS3.SSS2.p4.2.m1.1.1.3.2.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.2">ℝ</ci><apply id="S3.SS3.SSS2.p4.2.m1.1.1.3.3.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p4.2.m1.1.1.3.3.1.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.3">subscript</csymbol><ci id="S3.SS3.SSS2.p4.2.m1.1.1.3.3.2.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.3.2">𝑑</ci><ci id="S3.SS3.SSS2.p4.2.m1.1.1.3.3.3.cmml" xref="S3.SS3.SSS2.p4.2.m1.1.1.3.3.3">𝑉</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p4.2.m1.1c">\bm{v}_{i}\in\mathbb{R}^{d_{V}}</annotation></semantics></math> is the final item representation, and <math id="S3.SS3.SSS2.p4.3.m2.2" class="ltx_Math" alttext="\operatorname{Pool}(\cdot):\mathbb{R}^{D\times d_{V}}\to\mathbb{R}^{d_{V}}" display="inline"><semantics id="S3.SS3.SSS2.p4.3.m2.2a"><mrow id="S3.SS3.SSS2.p4.3.m2.2.3" xref="S3.SS3.SSS2.p4.3.m2.2.3.cmml"><mrow id="S3.SS3.SSS2.p4.3.m2.2.3.2.2" xref="S3.SS3.SSS2.p4.3.m2.2.3.2.1.cmml"><mi id="S3.SS3.SSS2.p4.3.m2.1.1" xref="S3.SS3.SSS2.p4.3.m2.1.1.cmml">Pool</mi><mo id="S3.SS3.SSS2.p4.3.m2.2.3.2.2a" xref="S3.SS3.SSS2.p4.3.m2.2.3.2.1.cmml">⁡</mo><mrow id="S3.SS3.SSS2.p4.3.m2.2.3.2.2.1" xref="S3.SS3.SSS2.p4.3.m2.2.3.2.1.cmml"><mo stretchy="false" id="S3.SS3.SSS2.p4.3.m2.2.3.2.2.1.1" xref="S3.SS3.SSS2.p4.3.m2.2.3.2.1.cmml">(</mo><mo lspace="0em" rspace="0em" id="S3.SS3.SSS2.p4.3.m2.2.2" xref="S3.SS3.SSS2.p4.3.m2.2.2.cmml">⋅</mo><mo rspace="0.278em" stretchy="false" id="S3.SS3.SSS2.p4.3.m2.2.3.2.2.1.2" xref="S3.SS3.SSS2.p4.3.m2.2.3.2.1.cmml">)</mo></mrow></mrow><mo rspace="0.278em" id="S3.SS3.SSS2.p4.3.m2.2.3.1" xref="S3.SS3.SSS2.p4.3.m2.2.3.1.cmml">:</mo><mrow id="S3.SS3.SSS2.p4.3.m2.2.3.3" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.cmml"><msup id="S3.SS3.SSS2.p4.3.m2.2.3.3.2" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.cmml"><mi id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.2" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.2.cmml">ℝ</mi><mrow id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.cmml"><mi id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.2" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.2.cmml">D</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.1" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.1.cmml">×</mo><msub id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.cmml"><mi id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.2" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.2.cmml">d</mi><mi id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.3" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.3.cmml">V</mi></msub></mrow></msup><mo stretchy="false" id="S3.SS3.SSS2.p4.3.m2.2.3.3.1" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.1.cmml">→</mo><msup id="S3.SS3.SSS2.p4.3.m2.2.3.3.3" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.cmml"><mi id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.2" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.2.cmml">ℝ</mi><msub id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.cmml"><mi id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.2" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.2.cmml">d</mi><mi id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.3" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.3.cmml">V</mi></msub></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p4.3.m2.2b"><apply id="S3.SS3.SSS2.p4.3.m2.2.3.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3"><ci id="S3.SS3.SSS2.p4.3.m2.2.3.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.1">:</ci><apply id="S3.SS3.SSS2.p4.3.m2.2.3.2.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.2.2"><ci id="S3.SS3.SSS2.p4.3.m2.1.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.1.1">Pool</ci><ci id="S3.SS3.SSS2.p4.3.m2.2.2.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.2">⋅</ci></apply><apply id="S3.SS3.SSS2.p4.3.m2.2.3.3.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3"><ci id="S3.SS3.SSS2.p4.3.m2.2.3.3.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.1">→</ci><apply id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2">superscript</csymbol><ci id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.2.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.2">ℝ</ci><apply id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3"><times id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.1"></times><ci id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.2.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.2">𝐷</ci><apply id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3">subscript</csymbol><ci id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.2.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.2">𝑑</ci><ci id="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.3.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.2.3.3.3">𝑉</ci></apply></apply></apply><apply id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3">superscript</csymbol><ci id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.2.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.2">ℝ</ci><apply id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.1.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3">subscript</csymbol><ci id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.2.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.2">𝑑</ci><ci id="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.3.cmml" xref="S3.SS3.SSS2.p4.3.m2.2.3.3.3.3.3">𝑉</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p4.3.m2.2c">\operatorname{Pool}(\cdot):\mathbb{R}^{D\times d_{V}}\to\mathbb{R}^{d_{V}}</annotation></semantics></math> is the mean pooling method on the <math id="S3.SS3.SSS2.p4.4.m3.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S3.SS3.SSS2.p4.4.m3.1a"><mi id="S3.SS3.SSS2.p4.4.m3.1.1" xref="S3.SS3.SSS2.p4.4.m3.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS2.p4.4.m3.1b"><ci id="S3.SS3.SSS2.p4.4.m3.1.1.cmml" xref="S3.SS3.SSS2.p4.4.m3.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS2.p4.4.m3.1c">D</annotation></semantics></math> dimension.</p>
</div>
</section>
</section>
<section id="S3.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4. </span>Federated Content Representation</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p id="S3.SS4.p1.1" class="ltx_p">Since we focus on the <abbr title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PCDR</span></abbr> task, we do not follow the traditional centralized training schema for item representation learning. Instead, we resort to <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr>, where domains are viewed as clients, and the privacy of user data is strictly utilized only on local clients.
To this end, a federated content representation learning paradigm is devised, which involves local training, uploading gradient, and gradient aggregation and synchronization.</p>
</div>
<section id="S3.SS4.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.1. </span>Local Training</h4>

<div id="S3.SS4.SSS1.p1" class="ltx_para">
<p id="S3.SS4.SSS1.p1.1" class="ltx_p">To learn users’ sequential interests, we first feed items’  <span title="Vector-Quantized" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Vector-Quantized</span></span> (<abbr title="Vector-Quantized" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">VQ</span></abbr>) representations <math id="S3.SS4.SSS1.p1.1.m1.6" class="ltx_Math" alttext="\{\bm{v}_{1},\bm{v}_{2},\ldots,\bm{v}_{i},\ldots,\bm{v}_{n}\}" display="inline"><semantics id="S3.SS4.SSS1.p1.1.m1.6a"><mrow id="S3.SS4.SSS1.p1.1.m1.6.6.4" xref="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml"><mo stretchy="false" id="S3.SS4.SSS1.p1.1.m1.6.6.4.5" xref="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml">{</mo><msub id="S3.SS4.SSS1.p1.1.m1.3.3.1.1" xref="S3.SS4.SSS1.p1.1.m1.3.3.1.1.cmml"><mi id="S3.SS4.SSS1.p1.1.m1.3.3.1.1.2" xref="S3.SS4.SSS1.p1.1.m1.3.3.1.1.2.cmml">𝒗</mi><mn id="S3.SS4.SSS1.p1.1.m1.3.3.1.1.3" xref="S3.SS4.SSS1.p1.1.m1.3.3.1.1.3.cmml">1</mn></msub><mo id="S3.SS4.SSS1.p1.1.m1.6.6.4.6" xref="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml">,</mo><msub id="S3.SS4.SSS1.p1.1.m1.4.4.2.2" xref="S3.SS4.SSS1.p1.1.m1.4.4.2.2.cmml"><mi id="S3.SS4.SSS1.p1.1.m1.4.4.2.2.2" xref="S3.SS4.SSS1.p1.1.m1.4.4.2.2.2.cmml">𝒗</mi><mn id="S3.SS4.SSS1.p1.1.m1.4.4.2.2.3" xref="S3.SS4.SSS1.p1.1.m1.4.4.2.2.3.cmml">2</mn></msub><mo id="S3.SS4.SSS1.p1.1.m1.6.6.4.7" xref="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml">,</mo><mi mathvariant="normal" id="S3.SS4.SSS1.p1.1.m1.1.1" xref="S3.SS4.SSS1.p1.1.m1.1.1.cmml">…</mi><mo id="S3.SS4.SSS1.p1.1.m1.6.6.4.8" xref="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml">,</mo><msub id="S3.SS4.SSS1.p1.1.m1.5.5.3.3" xref="S3.SS4.SSS1.p1.1.m1.5.5.3.3.cmml"><mi id="S3.SS4.SSS1.p1.1.m1.5.5.3.3.2" xref="S3.SS4.SSS1.p1.1.m1.5.5.3.3.2.cmml">𝒗</mi><mi id="S3.SS4.SSS1.p1.1.m1.5.5.3.3.3" xref="S3.SS4.SSS1.p1.1.m1.5.5.3.3.3.cmml">i</mi></msub><mo id="S3.SS4.SSS1.p1.1.m1.6.6.4.9" xref="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml">,</mo><mi mathvariant="normal" id="S3.SS4.SSS1.p1.1.m1.2.2" xref="S3.SS4.SSS1.p1.1.m1.2.2.cmml">…</mi><mo id="S3.SS4.SSS1.p1.1.m1.6.6.4.10" xref="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml">,</mo><msub id="S3.SS4.SSS1.p1.1.m1.6.6.4.4" xref="S3.SS4.SSS1.p1.1.m1.6.6.4.4.cmml"><mi id="S3.SS4.SSS1.p1.1.m1.6.6.4.4.2" xref="S3.SS4.SSS1.p1.1.m1.6.6.4.4.2.cmml">𝒗</mi><mi id="S3.SS4.SSS1.p1.1.m1.6.6.4.4.3" xref="S3.SS4.SSS1.p1.1.m1.6.6.4.4.3.cmml">n</mi></msub><mo stretchy="false" id="S3.SS4.SSS1.p1.1.m1.6.6.4.11" xref="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p1.1.m1.6b"><set id="S3.SS4.SSS1.p1.1.m1.6.6.5.cmml" xref="S3.SS4.SSS1.p1.1.m1.6.6.4"><apply id="S3.SS4.SSS1.p1.1.m1.3.3.1.1.cmml" xref="S3.SS4.SSS1.p1.1.m1.3.3.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.1.m1.3.3.1.1.1.cmml" xref="S3.SS4.SSS1.p1.1.m1.3.3.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p1.1.m1.3.3.1.1.2.cmml" xref="S3.SS4.SSS1.p1.1.m1.3.3.1.1.2">𝒗</ci><cn type="integer" id="S3.SS4.SSS1.p1.1.m1.3.3.1.1.3.cmml" xref="S3.SS4.SSS1.p1.1.m1.3.3.1.1.3">1</cn></apply><apply id="S3.SS4.SSS1.p1.1.m1.4.4.2.2.cmml" xref="S3.SS4.SSS1.p1.1.m1.4.4.2.2"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.1.m1.4.4.2.2.1.cmml" xref="S3.SS4.SSS1.p1.1.m1.4.4.2.2">subscript</csymbol><ci id="S3.SS4.SSS1.p1.1.m1.4.4.2.2.2.cmml" xref="S3.SS4.SSS1.p1.1.m1.4.4.2.2.2">𝒗</ci><cn type="integer" id="S3.SS4.SSS1.p1.1.m1.4.4.2.2.3.cmml" xref="S3.SS4.SSS1.p1.1.m1.4.4.2.2.3">2</cn></apply><ci id="S3.SS4.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS4.SSS1.p1.1.m1.1.1">…</ci><apply id="S3.SS4.SSS1.p1.1.m1.5.5.3.3.cmml" xref="S3.SS4.SSS1.p1.1.m1.5.5.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.1.m1.5.5.3.3.1.cmml" xref="S3.SS4.SSS1.p1.1.m1.5.5.3.3">subscript</csymbol><ci id="S3.SS4.SSS1.p1.1.m1.5.5.3.3.2.cmml" xref="S3.SS4.SSS1.p1.1.m1.5.5.3.3.2">𝒗</ci><ci id="S3.SS4.SSS1.p1.1.m1.5.5.3.3.3.cmml" xref="S3.SS4.SSS1.p1.1.m1.5.5.3.3.3">𝑖</ci></apply><ci id="S3.SS4.SSS1.p1.1.m1.2.2.cmml" xref="S3.SS4.SSS1.p1.1.m1.2.2">…</ci><apply id="S3.SS4.SSS1.p1.1.m1.6.6.4.4.cmml" xref="S3.SS4.SSS1.p1.1.m1.6.6.4.4"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p1.1.m1.6.6.4.4.1.cmml" xref="S3.SS4.SSS1.p1.1.m1.6.6.4.4">subscript</csymbol><ci id="S3.SS4.SSS1.p1.1.m1.6.6.4.4.2.cmml" xref="S3.SS4.SSS1.p1.1.m1.6.6.4.4.2">𝒗</ci><ci id="S3.SS4.SSS1.p1.1.m1.6.6.4.4.3.cmml" xref="S3.SS4.SSS1.p1.1.m1.6.6.4.4.3">𝑛</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p1.1.m1.6c">\{\bm{v}_{1},\bm{v}_{2},\ldots,\bm{v}_{i},\ldots,\bm{v}_{n}\}</annotation></semantics></math> to a transformer-style sequence encoder.</p>
</div>
<div id="S3.SS4.SSS1.p2" class="ltx_para">
<p id="S3.SS4.SSS1.p2.4" class="ltx_p"><span id="S3.SS4.SSS1.p2.4.1" class="ltx_text ltx_font_bold">Sequence Encoder</span>.
It mainly consists of a multi-head self-attention layer (called MH) and a position-aware feed-forward neural network (called FFN) to model items’ sequential dependencies.
More formally, for each input item representation <math id="S3.SS4.SSS1.p2.1.m1.1" class="ltx_Math" alttext="\bm{v}_{i}" display="inline"><semantics id="S3.SS4.SSS1.p2.1.m1.1a"><msub id="S3.SS4.SSS1.p2.1.m1.1.1" xref="S3.SS4.SSS1.p2.1.m1.1.1.cmml"><mi id="S3.SS4.SSS1.p2.1.m1.1.1.2" xref="S3.SS4.SSS1.p2.1.m1.1.1.2.cmml">𝒗</mi><mi id="S3.SS4.SSS1.p2.1.m1.1.1.3" xref="S3.SS4.SSS1.p2.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.1.m1.1b"><apply id="S3.SS4.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS4.SSS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.1.m1.1.1.1.cmml" xref="S3.SS4.SSS1.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p2.1.m1.1.1.2.cmml" xref="S3.SS4.SSS1.p2.1.m1.1.1.2">𝒗</ci><ci id="S3.SS4.SSS1.p2.1.m1.1.1.3.cmml" xref="S3.SS4.SSS1.p2.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.1.m1.1c">\bm{v}_{i}</annotation></semantics></math>, we first add it to the corresponding position embedding <math id="S3.SS4.SSS1.p2.2.m2.1" class="ltx_Math" alttext="\bm{p}_{j}" display="inline"><semantics id="S3.SS4.SSS1.p2.2.m2.1a"><msub id="S3.SS4.SSS1.p2.2.m2.1.1" xref="S3.SS4.SSS1.p2.2.m2.1.1.cmml"><mi id="S3.SS4.SSS1.p2.2.m2.1.1.2" xref="S3.SS4.SSS1.p2.2.m2.1.1.2.cmml">𝒑</mi><mi id="S3.SS4.SSS1.p2.2.m2.1.1.3" xref="S3.SS4.SSS1.p2.2.m2.1.1.3.cmml">j</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.2.m2.1b"><apply id="S3.SS4.SSS1.p2.2.m2.1.1.cmml" xref="S3.SS4.SSS1.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.2.m2.1.1.1.cmml" xref="S3.SS4.SSS1.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p2.2.m2.1.1.2.cmml" xref="S3.SS4.SSS1.p2.2.m2.1.1.2">𝒑</ci><ci id="S3.SS4.SSS1.p2.2.m2.1.1.3.cmml" xref="S3.SS4.SSS1.p2.2.m2.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.2.m2.1c">\bm{p}_{j}</annotation></semantics></math> (<math id="S3.SS4.SSS1.p2.3.m3.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS4.SSS1.p2.3.m3.1a"><mi id="S3.SS4.SSS1.p2.3.m3.1.1" xref="S3.SS4.SSS1.p2.3.m3.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.3.m3.1b"><ci id="S3.SS4.SSS1.p2.3.m3.1.1.cmml" xref="S3.SS4.SSS1.p2.3.m3.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.3.m3.1c">j</annotation></semantics></math> is the position of item <math id="S3.SS4.SSS1.p2.4.m4.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS4.SSS1.p2.4.m4.1a"><mi id="S3.SS4.SSS1.p2.4.m4.1.1" xref="S3.SS4.SSS1.p2.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.4.m4.1b"><ci id="S3.SS4.SSS1.p2.4.m4.1.1.cmml" xref="S3.SS4.SSS1.p2.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.4.m4.1c">i</annotation></semantics></math> in the sequence).</p>
<table id="A2.EGx1" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S3.E4"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(4)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E4.m1.1" class="ltx_Math" alttext="\displaystyle\bm{h}_{j}^{0}=\bm{v}_{i}+\bm{p}_{j}." display="inline"><semantics id="S3.E4.m1.1a"><mrow id="S3.E4.m1.1.1.1" xref="S3.E4.m1.1.1.1.1.cmml"><mrow id="S3.E4.m1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.cmml"><msubsup id="S3.E4.m1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.2.cmml"><mi id="S3.E4.m1.1.1.1.1.2.2.2" xref="S3.E4.m1.1.1.1.1.2.2.2.cmml">𝒉</mi><mi id="S3.E4.m1.1.1.1.1.2.2.3" xref="S3.E4.m1.1.1.1.1.2.2.3.cmml">j</mi><mn id="S3.E4.m1.1.1.1.1.2.3" xref="S3.E4.m1.1.1.1.1.2.3.cmml">0</mn></msubsup><mo id="S3.E4.m1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.cmml">=</mo><mrow id="S3.E4.m1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.1.3.cmml"><msub id="S3.E4.m1.1.1.1.1.3.2" xref="S3.E4.m1.1.1.1.1.3.2.cmml"><mi id="S3.E4.m1.1.1.1.1.3.2.2" xref="S3.E4.m1.1.1.1.1.3.2.2.cmml">𝒗</mi><mi id="S3.E4.m1.1.1.1.1.3.2.3" xref="S3.E4.m1.1.1.1.1.3.2.3.cmml">i</mi></msub><mo id="S3.E4.m1.1.1.1.1.3.1" xref="S3.E4.m1.1.1.1.1.3.1.cmml">+</mo><msub id="S3.E4.m1.1.1.1.1.3.3" xref="S3.E4.m1.1.1.1.1.3.3.cmml"><mi id="S3.E4.m1.1.1.1.1.3.3.2" xref="S3.E4.m1.1.1.1.1.3.3.2.cmml">𝒑</mi><mi id="S3.E4.m1.1.1.1.1.3.3.3" xref="S3.E4.m1.1.1.1.1.3.3.3.cmml">j</mi></msub></mrow></mrow><mo lspace="0em" id="S3.E4.m1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E4.m1.1b"><apply id="S3.E4.m1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1"><eq id="S3.E4.m1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1"></eq><apply id="S3.E4.m1.1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.2.1.cmml" xref="S3.E4.m1.1.1.1.1.2">superscript</csymbol><apply id="S3.E4.m1.1.1.1.1.2.2.cmml" xref="S3.E4.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.2.2.1.cmml" xref="S3.E4.m1.1.1.1.1.2">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.2.2.2.cmml" xref="S3.E4.m1.1.1.1.1.2.2.2">𝒉</ci><ci id="S3.E4.m1.1.1.1.1.2.2.3.cmml" xref="S3.E4.m1.1.1.1.1.2.2.3">𝑗</ci></apply><cn type="integer" id="S3.E4.m1.1.1.1.1.2.3.cmml" xref="S3.E4.m1.1.1.1.1.2.3">0</cn></apply><apply id="S3.E4.m1.1.1.1.1.3.cmml" xref="S3.E4.m1.1.1.1.1.3"><plus id="S3.E4.m1.1.1.1.1.3.1.cmml" xref="S3.E4.m1.1.1.1.1.3.1"></plus><apply id="S3.E4.m1.1.1.1.1.3.2.cmml" xref="S3.E4.m1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.3.2.1.cmml" xref="S3.E4.m1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.3.2.2.cmml" xref="S3.E4.m1.1.1.1.1.3.2.2">𝒗</ci><ci id="S3.E4.m1.1.1.1.1.3.2.3.cmml" xref="S3.E4.m1.1.1.1.1.3.2.3">𝑖</ci></apply><apply id="S3.E4.m1.1.1.1.1.3.3.cmml" xref="S3.E4.m1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.3.3.1.cmml" xref="S3.E4.m1.1.1.1.1.3.3">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.3.3.2.cmml" xref="S3.E4.m1.1.1.1.1.3.3.2">𝒑</ci><ci id="S3.E4.m1.1.1.1.1.3.3.3.cmml" xref="S3.E4.m1.1.1.1.1.3.3.3">𝑗</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4.m1.1c">\displaystyle\bm{h}_{j}^{0}=\bm{v}_{i}+\bm{p}_{j}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS1.p2.5" class="ltx_p">Then, we feed <math id="S3.SS4.SSS1.p2.5.m1.1" class="ltx_Math" alttext="\bm{h}_{j}^{0}" display="inline"><semantics id="S3.SS4.SSS1.p2.5.m1.1a"><msubsup id="S3.SS4.SSS1.p2.5.m1.1.1" xref="S3.SS4.SSS1.p2.5.m1.1.1.cmml"><mi id="S3.SS4.SSS1.p2.5.m1.1.1.2.2" xref="S3.SS4.SSS1.p2.5.m1.1.1.2.2.cmml">𝒉</mi><mi id="S3.SS4.SSS1.p2.5.m1.1.1.2.3" xref="S3.SS4.SSS1.p2.5.m1.1.1.2.3.cmml">j</mi><mn id="S3.SS4.SSS1.p2.5.m1.1.1.3" xref="S3.SS4.SSS1.p2.5.m1.1.1.3.cmml">0</mn></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.5.m1.1b"><apply id="S3.SS4.SSS1.p2.5.m1.1.1.cmml" xref="S3.SS4.SSS1.p2.5.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.5.m1.1.1.1.cmml" xref="S3.SS4.SSS1.p2.5.m1.1.1">superscript</csymbol><apply id="S3.SS4.SSS1.p2.5.m1.1.1.2.cmml" xref="S3.SS4.SSS1.p2.5.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.5.m1.1.1.2.1.cmml" xref="S3.SS4.SSS1.p2.5.m1.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p2.5.m1.1.1.2.2.cmml" xref="S3.SS4.SSS1.p2.5.m1.1.1.2.2">𝒉</ci><ci id="S3.SS4.SSS1.p2.5.m1.1.1.2.3.cmml" xref="S3.SS4.SSS1.p2.5.m1.1.1.2.3">𝑗</ci></apply><cn type="integer" id="S3.SS4.SSS1.p2.5.m1.1.1.3.cmml" xref="S3.SS4.SSS1.p2.5.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.5.m1.1c">\bm{h}_{j}^{0}</annotation></semantics></math> to MH <cite class="ltx_cite ltx_citemacro_citep">(Vaswani et al<span class="ltx_text">.</span>, <a href="#bib.bib38" title="" class="ltx_ref">2017</a>)</cite>
and FFN <cite class="ltx_cite ltx_citemacro_citep">(Vaswani et al<span class="ltx_text">.</span>, <a href="#bib.bib38" title="" class="ltx_ref">2017</a>)</cite>
to conduct non-linear transformations. The encoding process is defined as follows:</p>
<table id="A2.EGx2" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S3.E5"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(5)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E5.m1.1" class="ltx_Math" alttext="\displaystyle\bm{H}^{l}" display="inline"><semantics id="S3.E5.m1.1a"><msup id="S3.E5.m1.1.1" xref="S3.E5.m1.1.1.cmml"><mi id="S3.E5.m1.1.1.2" xref="S3.E5.m1.1.1.2.cmml">𝑯</mi><mi id="S3.E5.m1.1.1.3" xref="S3.E5.m1.1.1.3.cmml">l</mi></msup><annotation-xml encoding="MathML-Content" id="S3.E5.m1.1b"><apply id="S3.E5.m1.1.1.cmml" xref="S3.E5.m1.1.1"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.cmml" xref="S3.E5.m1.1.1">superscript</csymbol><ci id="S3.E5.m1.1.1.2.cmml" xref="S3.E5.m1.1.1.2">𝑯</ci><ci id="S3.E5.m1.1.1.3.cmml" xref="S3.E5.m1.1.1.3">𝑙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m1.1c">\displaystyle\bm{H}^{l}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S3.E5.m2.2" class="ltx_Math" alttext="\displaystyle=[\bm{h}_{0}^{l};\ldots;\bm{h}_{n}^{l}]," display="inline"><semantics id="S3.E5.m2.2a"><mrow id="S3.E5.m2.2.2.1" xref="S3.E5.m2.2.2.1.1.cmml"><mrow id="S3.E5.m2.2.2.1.1" xref="S3.E5.m2.2.2.1.1.cmml"><mi id="S3.E5.m2.2.2.1.1.4" xref="S3.E5.m2.2.2.1.1.4.cmml"></mi><mo id="S3.E5.m2.2.2.1.1.3" xref="S3.E5.m2.2.2.1.1.3.cmml">=</mo><mrow id="S3.E5.m2.2.2.1.1.2.2" xref="S3.E5.m2.2.2.1.1.2.3.cmml"><mo stretchy="false" id="S3.E5.m2.2.2.1.1.2.2.3" xref="S3.E5.m2.2.2.1.1.2.3.cmml">[</mo><msubsup id="S3.E5.m2.2.2.1.1.1.1.1" xref="S3.E5.m2.2.2.1.1.1.1.1.cmml"><mi id="S3.E5.m2.2.2.1.1.1.1.1.2.2" xref="S3.E5.m2.2.2.1.1.1.1.1.2.2.cmml">𝒉</mi><mn id="S3.E5.m2.2.2.1.1.1.1.1.2.3" xref="S3.E5.m2.2.2.1.1.1.1.1.2.3.cmml">0</mn><mi id="S3.E5.m2.2.2.1.1.1.1.1.3" xref="S3.E5.m2.2.2.1.1.1.1.1.3.cmml">l</mi></msubsup><mo id="S3.E5.m2.2.2.1.1.2.2.4" xref="S3.E5.m2.2.2.1.1.2.3.cmml">;</mo><mi mathvariant="normal" id="S3.E5.m2.1.1" xref="S3.E5.m2.1.1.cmml">…</mi><mo id="S3.E5.m2.2.2.1.1.2.2.5" xref="S3.E5.m2.2.2.1.1.2.3.cmml">;</mo><msubsup id="S3.E5.m2.2.2.1.1.2.2.2" xref="S3.E5.m2.2.2.1.1.2.2.2.cmml"><mi id="S3.E5.m2.2.2.1.1.2.2.2.2.2" xref="S3.E5.m2.2.2.1.1.2.2.2.2.2.cmml">𝒉</mi><mi id="S3.E5.m2.2.2.1.1.2.2.2.2.3" xref="S3.E5.m2.2.2.1.1.2.2.2.2.3.cmml">n</mi><mi id="S3.E5.m2.2.2.1.1.2.2.2.3" xref="S3.E5.m2.2.2.1.1.2.2.2.3.cmml">l</mi></msubsup><mo stretchy="false" id="S3.E5.m2.2.2.1.1.2.2.6" xref="S3.E5.m2.2.2.1.1.2.3.cmml">]</mo></mrow></mrow><mo id="S3.E5.m2.2.2.1.2" xref="S3.E5.m2.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E5.m2.2b"><apply id="S3.E5.m2.2.2.1.1.cmml" xref="S3.E5.m2.2.2.1"><eq id="S3.E5.m2.2.2.1.1.3.cmml" xref="S3.E5.m2.2.2.1.1.3"></eq><csymbol cd="latexml" id="S3.E5.m2.2.2.1.1.4.cmml" xref="S3.E5.m2.2.2.1.1.4">absent</csymbol><list id="S3.E5.m2.2.2.1.1.2.3.cmml" xref="S3.E5.m2.2.2.1.1.2.2"><apply id="S3.E5.m2.2.2.1.1.1.1.1.cmml" xref="S3.E5.m2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E5.m2.2.2.1.1.1.1.1.1.cmml" xref="S3.E5.m2.2.2.1.1.1.1.1">superscript</csymbol><apply id="S3.E5.m2.2.2.1.1.1.1.1.2.cmml" xref="S3.E5.m2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E5.m2.2.2.1.1.1.1.1.2.1.cmml" xref="S3.E5.m2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S3.E5.m2.2.2.1.1.1.1.1.2.2.cmml" xref="S3.E5.m2.2.2.1.1.1.1.1.2.2">𝒉</ci><cn type="integer" id="S3.E5.m2.2.2.1.1.1.1.1.2.3.cmml" xref="S3.E5.m2.2.2.1.1.1.1.1.2.3">0</cn></apply><ci id="S3.E5.m2.2.2.1.1.1.1.1.3.cmml" xref="S3.E5.m2.2.2.1.1.1.1.1.3">𝑙</ci></apply><ci id="S3.E5.m2.1.1.cmml" xref="S3.E5.m2.1.1">…</ci><apply id="S3.E5.m2.2.2.1.1.2.2.2.cmml" xref="S3.E5.m2.2.2.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.E5.m2.2.2.1.1.2.2.2.1.cmml" xref="S3.E5.m2.2.2.1.1.2.2.2">superscript</csymbol><apply id="S3.E5.m2.2.2.1.1.2.2.2.2.cmml" xref="S3.E5.m2.2.2.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.E5.m2.2.2.1.1.2.2.2.2.1.cmml" xref="S3.E5.m2.2.2.1.1.2.2.2">subscript</csymbol><ci id="S3.E5.m2.2.2.1.1.2.2.2.2.2.cmml" xref="S3.E5.m2.2.2.1.1.2.2.2.2.2">𝒉</ci><ci id="S3.E5.m2.2.2.1.1.2.2.2.2.3.cmml" xref="S3.E5.m2.2.2.1.1.2.2.2.2.3">𝑛</ci></apply><ci id="S3.E5.m2.2.2.1.1.2.2.2.3.cmml" xref="S3.E5.m2.2.2.1.1.2.2.2.3">𝑙</ci></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m2.2c">\displaystyle=[\bm{h}_{0}^{l};\ldots;\bm{h}_{n}^{l}],</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S3.E6"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(6)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E6.m1.1" class="ltx_Math" alttext="\displaystyle\bm{H}^{l+1}" display="inline"><semantics id="S3.E6.m1.1a"><msup id="S3.E6.m1.1.1" xref="S3.E6.m1.1.1.cmml"><mi id="S3.E6.m1.1.1.2" xref="S3.E6.m1.1.1.2.cmml">𝑯</mi><mrow id="S3.E6.m1.1.1.3" xref="S3.E6.m1.1.1.3.cmml"><mi id="S3.E6.m1.1.1.3.2" xref="S3.E6.m1.1.1.3.2.cmml">l</mi><mo id="S3.E6.m1.1.1.3.1" xref="S3.E6.m1.1.1.3.1.cmml">+</mo><mn id="S3.E6.m1.1.1.3.3" xref="S3.E6.m1.1.1.3.3.cmml">1</mn></mrow></msup><annotation-xml encoding="MathML-Content" id="S3.E6.m1.1b"><apply id="S3.E6.m1.1.1.cmml" xref="S3.E6.m1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.cmml" xref="S3.E6.m1.1.1">superscript</csymbol><ci id="S3.E6.m1.1.1.2.cmml" xref="S3.E6.m1.1.1.2">𝑯</ci><apply id="S3.E6.m1.1.1.3.cmml" xref="S3.E6.m1.1.1.3"><plus id="S3.E6.m1.1.1.3.1.cmml" xref="S3.E6.m1.1.1.3.1"></plus><ci id="S3.E6.m1.1.1.3.2.cmml" xref="S3.E6.m1.1.1.3.2">𝑙</ci><cn type="integer" id="S3.E6.m1.1.1.3.3.cmml" xref="S3.E6.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E6.m1.1c">\displaystyle\bm{H}^{l+1}</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="S3.E6.m2.7" class="ltx_Math" alttext="\displaystyle=\operatorname{FFN}\left(\operatorname{MH}\left(\bm{H}^{l}\right)\right),l\in\{1,2,\ldots,L\}," display="inline"><semantics id="S3.E6.m2.7a"><mrow id="S3.E6.m2.7.7.1"><mrow id="S3.E6.m2.7.7.1.1.2" xref="S3.E6.m2.7.7.1.1.3.cmml"><mrow id="S3.E6.m2.7.7.1.1.1.1" xref="S3.E6.m2.7.7.1.1.1.1.cmml"><mi id="S3.E6.m2.7.7.1.1.1.1.3" xref="S3.E6.m2.7.7.1.1.1.1.3.cmml"></mi><mo id="S3.E6.m2.7.7.1.1.1.1.2" xref="S3.E6.m2.7.7.1.1.1.1.2.cmml">=</mo><mrow id="S3.E6.m2.7.7.1.1.1.1.1.1" xref="S3.E6.m2.7.7.1.1.1.1.1.2.cmml"><mi id="S3.E6.m2.2.2" xref="S3.E6.m2.2.2.cmml">FFN</mi><mo id="S3.E6.m2.7.7.1.1.1.1.1.1a" xref="S3.E6.m2.7.7.1.1.1.1.1.2.cmml">⁡</mo><mrow id="S3.E6.m2.7.7.1.1.1.1.1.1.1" xref="S3.E6.m2.7.7.1.1.1.1.1.2.cmml"><mo id="S3.E6.m2.7.7.1.1.1.1.1.1.1.2" xref="S3.E6.m2.7.7.1.1.1.1.1.2.cmml">(</mo><mrow id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E6.m2.1.1" xref="S3.E6.m2.1.1.cmml">MH</mi><mo id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1a" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.2.cmml">⁡</mo><mrow id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.2.cmml"><mo id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.2.cmml">(</mo><msup id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml">𝑯</mi><mi id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.3.cmml">l</mi></msup><mo id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.E6.m2.7.7.1.1.1.1.1.1.1.3" xref="S3.E6.m2.7.7.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E6.m2.7.7.1.1.2.3" xref="S3.E6.m2.7.7.1.1.3a.cmml">,</mo><mrow id="S3.E6.m2.7.7.1.1.2.2" xref="S3.E6.m2.7.7.1.1.2.2.cmml"><mi id="S3.E6.m2.7.7.1.1.2.2.2" xref="S3.E6.m2.7.7.1.1.2.2.2.cmml">l</mi><mo id="S3.E6.m2.7.7.1.1.2.2.1" xref="S3.E6.m2.7.7.1.1.2.2.1.cmml">∈</mo><mrow id="S3.E6.m2.7.7.1.1.2.2.3.2" xref="S3.E6.m2.7.7.1.1.2.2.3.1.cmml"><mo stretchy="false" id="S3.E6.m2.7.7.1.1.2.2.3.2.1" xref="S3.E6.m2.7.7.1.1.2.2.3.1.cmml">{</mo><mn id="S3.E6.m2.3.3" xref="S3.E6.m2.3.3.cmml">1</mn><mo id="S3.E6.m2.7.7.1.1.2.2.3.2.2" xref="S3.E6.m2.7.7.1.1.2.2.3.1.cmml">,</mo><mn id="S3.E6.m2.4.4" xref="S3.E6.m2.4.4.cmml">2</mn><mo id="S3.E6.m2.7.7.1.1.2.2.3.2.3" xref="S3.E6.m2.7.7.1.1.2.2.3.1.cmml">,</mo><mi mathvariant="normal" id="S3.E6.m2.5.5" xref="S3.E6.m2.5.5.cmml">…</mi><mo id="S3.E6.m2.7.7.1.1.2.2.3.2.4" xref="S3.E6.m2.7.7.1.1.2.2.3.1.cmml">,</mo><mi id="S3.E6.m2.6.6" xref="S3.E6.m2.6.6.cmml">L</mi><mo stretchy="false" id="S3.E6.m2.7.7.1.1.2.2.3.2.5" xref="S3.E6.m2.7.7.1.1.2.2.3.1.cmml">}</mo></mrow></mrow></mrow><mo id="S3.E6.m2.7.7.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E6.m2.7b"><apply id="S3.E6.m2.7.7.1.1.3.cmml" xref="S3.E6.m2.7.7.1.1.2"><csymbol cd="ambiguous" id="S3.E6.m2.7.7.1.1.3a.cmml" xref="S3.E6.m2.7.7.1.1.2.3">formulae-sequence</csymbol><apply id="S3.E6.m2.7.7.1.1.1.1.cmml" xref="S3.E6.m2.7.7.1.1.1.1"><eq id="S3.E6.m2.7.7.1.1.1.1.2.cmml" xref="S3.E6.m2.7.7.1.1.1.1.2"></eq><csymbol cd="latexml" id="S3.E6.m2.7.7.1.1.1.1.3.cmml" xref="S3.E6.m2.7.7.1.1.1.1.3">absent</csymbol><apply id="S3.E6.m2.7.7.1.1.1.1.1.2.cmml" xref="S3.E6.m2.7.7.1.1.1.1.1.1"><ci id="S3.E6.m2.2.2.cmml" xref="S3.E6.m2.2.2">FFN</ci><apply id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1"><ci id="S3.E6.m2.1.1.cmml" xref="S3.E6.m2.1.1">MH</ci><apply id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.2">𝑯</ci><ci id="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E6.m2.7.7.1.1.1.1.1.1.1.1.1.1.1.3">𝑙</ci></apply></apply></apply></apply><apply id="S3.E6.m2.7.7.1.1.2.2.cmml" xref="S3.E6.m2.7.7.1.1.2.2"><in id="S3.E6.m2.7.7.1.1.2.2.1.cmml" xref="S3.E6.m2.7.7.1.1.2.2.1"></in><ci id="S3.E6.m2.7.7.1.1.2.2.2.cmml" xref="S3.E6.m2.7.7.1.1.2.2.2">𝑙</ci><set id="S3.E6.m2.7.7.1.1.2.2.3.1.cmml" xref="S3.E6.m2.7.7.1.1.2.2.3.2"><cn type="integer" id="S3.E6.m2.3.3.cmml" xref="S3.E6.m2.3.3">1</cn><cn type="integer" id="S3.E6.m2.4.4.cmml" xref="S3.E6.m2.4.4">2</cn><ci id="S3.E6.m2.5.5.cmml" xref="S3.E6.m2.5.5">…</ci><ci id="S3.E6.m2.6.6.cmml" xref="S3.E6.m2.6.6">𝐿</ci></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E6.m2.7c">\displaystyle=\operatorname{FFN}\left(\operatorname{MH}\left(\bm{H}^{l}\right)\right),l\in\{1,2,\ldots,L\},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS1.p2.11" class="ltx_p">where <math id="S3.SS4.SSS1.p2.6.m1.1" class="ltx_Math" alttext="\bm{H}^{l}\in\mathbb{R}^{n\times d_{V}}" display="inline"><semantics id="S3.SS4.SSS1.p2.6.m1.1a"><mrow id="S3.SS4.SSS1.p2.6.m1.1.1" xref="S3.SS4.SSS1.p2.6.m1.1.1.cmml"><msup id="S3.SS4.SSS1.p2.6.m1.1.1.2" xref="S3.SS4.SSS1.p2.6.m1.1.1.2.cmml"><mi id="S3.SS4.SSS1.p2.6.m1.1.1.2.2" xref="S3.SS4.SSS1.p2.6.m1.1.1.2.2.cmml">𝑯</mi><mi id="S3.SS4.SSS1.p2.6.m1.1.1.2.3" xref="S3.SS4.SSS1.p2.6.m1.1.1.2.3.cmml">l</mi></msup><mo id="S3.SS4.SSS1.p2.6.m1.1.1.1" xref="S3.SS4.SSS1.p2.6.m1.1.1.1.cmml">∈</mo><msup id="S3.SS4.SSS1.p2.6.m1.1.1.3" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.cmml"><mi id="S3.SS4.SSS1.p2.6.m1.1.1.3.2" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS4.SSS1.p2.6.m1.1.1.3.3" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.cmml"><mi id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.2" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.2.cmml">n</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.1" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.1.cmml">×</mo><msub id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.cmml"><mi id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.2" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.2.cmml">d</mi><mi id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.3" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.3.cmml">V</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.6.m1.1b"><apply id="S3.SS4.SSS1.p2.6.m1.1.1.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1"><in id="S3.SS4.SSS1.p2.6.m1.1.1.1.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.1"></in><apply id="S3.SS4.SSS1.p2.6.m1.1.1.2.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.6.m1.1.1.2.1.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.2">superscript</csymbol><ci id="S3.SS4.SSS1.p2.6.m1.1.1.2.2.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.2.2">𝑯</ci><ci id="S3.SS4.SSS1.p2.6.m1.1.1.2.3.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.2.3">𝑙</ci></apply><apply id="S3.SS4.SSS1.p2.6.m1.1.1.3.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.6.m1.1.1.3.1.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3">superscript</csymbol><ci id="S3.SS4.SSS1.p2.6.m1.1.1.3.2.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.2">ℝ</ci><apply id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3"><times id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.1.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.1"></times><ci id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.2.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.2">𝑛</ci><apply id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.1.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3">subscript</csymbol><ci id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.2.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.2">𝑑</ci><ci id="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.3.cmml" xref="S3.SS4.SSS1.p2.6.m1.1.1.3.3.3.3">𝑉</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.6.m1.1c">\bm{H}^{l}\in\mathbb{R}^{n\times d_{V}}</annotation></semantics></math> denotes the hidden representation of each sequence in the <math id="S3.SS4.SSS1.p2.7.m2.1" class="ltx_Math" alttext="l" display="inline"><semantics id="S3.SS4.SSS1.p2.7.m2.1a"><mi id="S3.SS4.SSS1.p2.7.m2.1.1" xref="S3.SS4.SSS1.p2.7.m2.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.7.m2.1b"><ci id="S3.SS4.SSS1.p2.7.m2.1.1.cmml" xref="S3.SS4.SSS1.p2.7.m2.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.7.m2.1c">l</annotation></semantics></math>-th layer, <math id="S3.SS4.SSS1.p2.8.m3.1" class="ltx_Math" alttext="L" display="inline"><semantics id="S3.SS4.SSS1.p2.8.m3.1a"><mi id="S3.SS4.SSS1.p2.8.m3.1.1" xref="S3.SS4.SSS1.p2.8.m3.1.1.cmml">L</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.8.m3.1b"><ci id="S3.SS4.SSS1.p2.8.m3.1.1.cmml" xref="S3.SS4.SSS1.p2.8.m3.1.1">𝐿</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.8.m3.1c">L</annotation></semantics></math> is the total layer number. We take the hidden state <math id="S3.SS4.SSS1.p2.9.m4.1" class="ltx_Math" alttext="\bm{h}_{i}^{A}=\bm{h}_{n}^{L}" display="inline"><semantics id="S3.SS4.SSS1.p2.9.m4.1a"><mrow id="S3.SS4.SSS1.p2.9.m4.1.1" xref="S3.SS4.SSS1.p2.9.m4.1.1.cmml"><msubsup id="S3.SS4.SSS1.p2.9.m4.1.1.2" xref="S3.SS4.SSS1.p2.9.m4.1.1.2.cmml"><mi id="S3.SS4.SSS1.p2.9.m4.1.1.2.2.2" xref="S3.SS4.SSS1.p2.9.m4.1.1.2.2.2.cmml">𝒉</mi><mi id="S3.SS4.SSS1.p2.9.m4.1.1.2.2.3" xref="S3.SS4.SSS1.p2.9.m4.1.1.2.2.3.cmml">i</mi><mi id="S3.SS4.SSS1.p2.9.m4.1.1.2.3" xref="S3.SS4.SSS1.p2.9.m4.1.1.2.3.cmml">A</mi></msubsup><mo id="S3.SS4.SSS1.p2.9.m4.1.1.1" xref="S3.SS4.SSS1.p2.9.m4.1.1.1.cmml">=</mo><msubsup id="S3.SS4.SSS1.p2.9.m4.1.1.3" xref="S3.SS4.SSS1.p2.9.m4.1.1.3.cmml"><mi id="S3.SS4.SSS1.p2.9.m4.1.1.3.2.2" xref="S3.SS4.SSS1.p2.9.m4.1.1.3.2.2.cmml">𝒉</mi><mi id="S3.SS4.SSS1.p2.9.m4.1.1.3.2.3" xref="S3.SS4.SSS1.p2.9.m4.1.1.3.2.3.cmml">n</mi><mi id="S3.SS4.SSS1.p2.9.m4.1.1.3.3" xref="S3.SS4.SSS1.p2.9.m4.1.1.3.3.cmml">L</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.9.m4.1b"><apply id="S3.SS4.SSS1.p2.9.m4.1.1.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1"><eq id="S3.SS4.SSS1.p2.9.m4.1.1.1.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.1"></eq><apply id="S3.SS4.SSS1.p2.9.m4.1.1.2.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.9.m4.1.1.2.1.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.2">superscript</csymbol><apply id="S3.SS4.SSS1.p2.9.m4.1.1.2.2.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.9.m4.1.1.2.2.1.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.2">subscript</csymbol><ci id="S3.SS4.SSS1.p2.9.m4.1.1.2.2.2.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.2.2.2">𝒉</ci><ci id="S3.SS4.SSS1.p2.9.m4.1.1.2.2.3.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.2.2.3">𝑖</ci></apply><ci id="S3.SS4.SSS1.p2.9.m4.1.1.2.3.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.2.3">𝐴</ci></apply><apply id="S3.SS4.SSS1.p2.9.m4.1.1.3.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.9.m4.1.1.3.1.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.3">superscript</csymbol><apply id="S3.SS4.SSS1.p2.9.m4.1.1.3.2.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.9.m4.1.1.3.2.1.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.3">subscript</csymbol><ci id="S3.SS4.SSS1.p2.9.m4.1.1.3.2.2.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.3.2.2">𝒉</ci><ci id="S3.SS4.SSS1.p2.9.m4.1.1.3.2.3.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.3.2.3">𝑛</ci></apply><ci id="S3.SS4.SSS1.p2.9.m4.1.1.3.3.cmml" xref="S3.SS4.SSS1.p2.9.m4.1.1.3.3">𝐿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.9.m4.1c">\bm{h}_{i}^{A}=\bm{h}_{n}^{L}</annotation></semantics></math> at the <math id="S3.SS4.SSS1.p2.10.m5.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S3.SS4.SSS1.p2.10.m5.1a"><mi id="S3.SS4.SSS1.p2.10.m5.1.1" xref="S3.SS4.SSS1.p2.10.m5.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.10.m5.1b"><ci id="S3.SS4.SSS1.p2.10.m5.1.1.cmml" xref="S3.SS4.SSS1.p2.10.m5.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.10.m5.1c">n</annotation></semantics></math>-th position as the sequence representation (<math id="S3.SS4.SSS1.p2.11.m6.1" class="ltx_Math" alttext="\mathcal{S}_{A}" display="inline"><semantics id="S3.SS4.SSS1.p2.11.m6.1a"><msub id="S3.SS4.SSS1.p2.11.m6.1.1" xref="S3.SS4.SSS1.p2.11.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p2.11.m6.1.1.2" xref="S3.SS4.SSS1.p2.11.m6.1.1.2.cmml">𝒮</mi><mi id="S3.SS4.SSS1.p2.11.m6.1.1.3" xref="S3.SS4.SSS1.p2.11.m6.1.1.3.cmml">A</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.11.m6.1b"><apply id="S3.SS4.SSS1.p2.11.m6.1.1.cmml" xref="S3.SS4.SSS1.p2.11.m6.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p2.11.m6.1.1.1.cmml" xref="S3.SS4.SSS1.p2.11.m6.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p2.11.m6.1.1.2.cmml" xref="S3.SS4.SSS1.p2.11.m6.1.1.2">𝒮</ci><ci id="S3.SS4.SSS1.p2.11.m6.1.1.3.cmml" xref="S3.SS4.SSS1.p2.11.m6.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.11.m6.1c">\mathcal{S}_{A}</annotation></semantics></math> is the input sequence in domain A).</p>
</div>
<div id="S3.SS4.SSS1.p3" class="ltx_para">
<p id="S3.SS4.SSS1.p3.1" class="ltx_p"><span id="S3.SS4.SSS1.p3.1.1" class="ltx_text ltx_font_bold">Optimization Objective</span>.
Given the input sequence <math id="S3.SS4.SSS1.p3.1.m1.1" class="ltx_Math" alttext="\mathcal{S}_{i}^{A}" display="inline"><semantics id="S3.SS4.SSS1.p3.1.m1.1a"><msubsup id="S3.SS4.SSS1.p3.1.m1.1.1" xref="S3.SS4.SSS1.p3.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p3.1.m1.1.1.2.2" xref="S3.SS4.SSS1.p3.1.m1.1.1.2.2.cmml">𝒮</mi><mi id="S3.SS4.SSS1.p3.1.m1.1.1.2.3" xref="S3.SS4.SSS1.p3.1.m1.1.1.2.3.cmml">i</mi><mi id="S3.SS4.SSS1.p3.1.m1.1.1.3" xref="S3.SS4.SSS1.p3.1.m1.1.1.3.cmml">A</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p3.1.m1.1b"><apply id="S3.SS4.SSS1.p3.1.m1.1.1.cmml" xref="S3.SS4.SSS1.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p3.1.m1.1.1.1.cmml" xref="S3.SS4.SSS1.p3.1.m1.1.1">superscript</csymbol><apply id="S3.SS4.SSS1.p3.1.m1.1.1.2.cmml" xref="S3.SS4.SSS1.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p3.1.m1.1.1.2.1.cmml" xref="S3.SS4.SSS1.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p3.1.m1.1.1.2.2.cmml" xref="S3.SS4.SSS1.p3.1.m1.1.1.2.2">𝒮</ci><ci id="S3.SS4.SSS1.p3.1.m1.1.1.2.3.cmml" xref="S3.SS4.SSS1.p3.1.m1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS4.SSS1.p3.1.m1.1.1.3.cmml" xref="S3.SS4.SSS1.p3.1.m1.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p3.1.m1.1c">\mathcal{S}_{i}^{A}</annotation></semantics></math>, we define the next item prediction probability in domain A as follows:</p>
<table id="A2.EGx3" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S3.E7"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(7)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E7.m1.2" class="ltx_Math" alttext="\displaystyle P(A_{i+1}|{\mathcal{S}_{i}^{A}})=\operatorname{Softmax}(\bm{h}_{i}^{A}\cdot\bm{V}_{\mathcal{A}})," display="inline"><semantics id="S3.E7.m1.2a"><mrow id="S3.E7.m1.2.2.1" xref="S3.E7.m1.2.2.1.1.cmml"><mrow id="S3.E7.m1.2.2.1.1" xref="S3.E7.m1.2.2.1.1.cmml"><mrow id="S3.E7.m1.2.2.1.1.1" xref="S3.E7.m1.2.2.1.1.1.cmml"><mi id="S3.E7.m1.2.2.1.1.1.3" xref="S3.E7.m1.2.2.1.1.1.3.cmml">P</mi><mo lspace="0em" rspace="0em" id="S3.E7.m1.2.2.1.1.1.2" xref="S3.E7.m1.2.2.1.1.1.2.cmml">​</mo><mrow id="S3.E7.m1.2.2.1.1.1.1.1" xref="S3.E7.m1.2.2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E7.m1.2.2.1.1.1.1.1.2" xref="S3.E7.m1.2.2.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E7.m1.2.2.1.1.1.1.1.1" xref="S3.E7.m1.2.2.1.1.1.1.1.1.cmml"><msub id="S3.E7.m1.2.2.1.1.1.1.1.1.2" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.cmml"><mi id="S3.E7.m1.2.2.1.1.1.1.1.1.2.2" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.2.cmml">A</mi><mrow id="S3.E7.m1.2.2.1.1.1.1.1.1.2.3" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.cmml"><mi id="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.2" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.2.cmml">i</mi><mo id="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.1" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.1.cmml">+</mo><mn id="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.3" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.3.cmml">1</mn></mrow></msub><mo fence="false" id="S3.E7.m1.2.2.1.1.1.1.1.1.1" xref="S3.E7.m1.2.2.1.1.1.1.1.1.1.cmml">|</mo><msubsup id="S3.E7.m1.2.2.1.1.1.1.1.1.3" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.2" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.2.cmml">𝒮</mi><mi id="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.3" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.3.cmml">i</mi><mi id="S3.E7.m1.2.2.1.1.1.1.1.1.3.3" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3.3.cmml">A</mi></msubsup></mrow><mo stretchy="false" id="S3.E7.m1.2.2.1.1.1.1.1.3" xref="S3.E7.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E7.m1.2.2.1.1.3" xref="S3.E7.m1.2.2.1.1.3.cmml">=</mo><mrow id="S3.E7.m1.2.2.1.1.2.1" xref="S3.E7.m1.2.2.1.1.2.2.cmml"><mi id="S3.E7.m1.1.1" xref="S3.E7.m1.1.1.cmml">Softmax</mi><mo id="S3.E7.m1.2.2.1.1.2.1a" xref="S3.E7.m1.2.2.1.1.2.2.cmml">⁡</mo><mrow id="S3.E7.m1.2.2.1.1.2.1.1" xref="S3.E7.m1.2.2.1.1.2.2.cmml"><mo stretchy="false" id="S3.E7.m1.2.2.1.1.2.1.1.2" xref="S3.E7.m1.2.2.1.1.2.2.cmml">(</mo><mrow id="S3.E7.m1.2.2.1.1.2.1.1.1" xref="S3.E7.m1.2.2.1.1.2.1.1.1.cmml"><msubsup id="S3.E7.m1.2.2.1.1.2.1.1.1.2" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2.cmml"><mi id="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.2" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.2.cmml">𝒉</mi><mi id="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.3" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.3.cmml">i</mi><mi id="S3.E7.m1.2.2.1.1.2.1.1.1.2.3" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2.3.cmml">A</mi></msubsup><mo lspace="0.222em" rspace="0.222em" id="S3.E7.m1.2.2.1.1.2.1.1.1.1" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.cmml">⋅</mo><msub id="S3.E7.m1.2.2.1.1.2.1.1.1.3" xref="S3.E7.m1.2.2.1.1.2.1.1.1.3.cmml"><mi id="S3.E7.m1.2.2.1.1.2.1.1.1.3.2" xref="S3.E7.m1.2.2.1.1.2.1.1.1.3.2.cmml">𝑽</mi><mi class="ltx_font_mathcaligraphic" id="S3.E7.m1.2.2.1.1.2.1.1.1.3.3" xref="S3.E7.m1.2.2.1.1.2.1.1.1.3.3.cmml">𝒜</mi></msub></mrow><mo stretchy="false" id="S3.E7.m1.2.2.1.1.2.1.1.3" xref="S3.E7.m1.2.2.1.1.2.2.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E7.m1.2.2.1.2" xref="S3.E7.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E7.m1.2b"><apply id="S3.E7.m1.2.2.1.1.cmml" xref="S3.E7.m1.2.2.1"><eq id="S3.E7.m1.2.2.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.3"></eq><apply id="S3.E7.m1.2.2.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.1"><times id="S3.E7.m1.2.2.1.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.1.2"></times><ci id="S3.E7.m1.2.2.1.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.1.3">𝑃</ci><apply id="S3.E7.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1"><csymbol cd="latexml" id="S3.E7.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.1">conditional</csymbol><apply id="S3.E7.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.1.1.1.1.2.1.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E7.m1.2.2.1.1.1.1.1.1.2.2.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.2">𝐴</ci><apply id="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.3"><plus id="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.1.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.1"></plus><ci id="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.2.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.2">𝑖</ci><cn type="integer" id="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.3.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S3.E7.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.1.1.1.1.3.1.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3">superscript</csymbol><apply id="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.1.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.2.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.2">𝒮</ci><ci id="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.3.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3.2.3">𝑖</ci></apply><ci id="S3.E7.m1.2.2.1.1.1.1.1.1.3.3.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3.3">𝐴</ci></apply></apply></apply><apply id="S3.E7.m1.2.2.1.1.2.2.cmml" xref="S3.E7.m1.2.2.1.1.2.1"><ci id="S3.E7.m1.1.1.cmml" xref="S3.E7.m1.1.1">Softmax</ci><apply id="S3.E7.m1.2.2.1.1.2.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1"><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1">⋅</ci><apply id="S3.E7.m1.2.2.1.1.2.1.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.2.1.1.1.2.1.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2">superscript</csymbol><apply id="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.1.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2">subscript</csymbol><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.2.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.2">𝒉</ci><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.3.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2.2.3">𝑖</ci></apply><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.2.3.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.2.3">𝐴</ci></apply><apply id="S3.E7.m1.2.2.1.1.2.1.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.2.1.1.1.3.1.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.3">subscript</csymbol><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.3.2.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.3.2">𝑽</ci><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.3.3.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.3.3">𝒜</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E7.m1.2c">\displaystyle P(A_{i+1}|{\mathcal{S}_{i}^{A}})=\operatorname{Softmax}(\bm{h}_{i}^{A}\cdot\bm{V}_{\mathcal{A}}),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS1.p3.2" class="ltx_p">where <math id="S3.SS4.SSS1.p3.2.m1.1" class="ltx_Math" alttext="\bm{V}_{\mathcal{A}}" display="inline"><semantics id="S3.SS4.SSS1.p3.2.m1.1a"><msub id="S3.SS4.SSS1.p3.2.m1.1.1" xref="S3.SS4.SSS1.p3.2.m1.1.1.cmml"><mi id="S3.SS4.SSS1.p3.2.m1.1.1.2" xref="S3.SS4.SSS1.p3.2.m1.1.1.2.cmml">𝑽</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p3.2.m1.1.1.3" xref="S3.SS4.SSS1.p3.2.m1.1.1.3.cmml">𝒜</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p3.2.m1.1b"><apply id="S3.SS4.SSS1.p3.2.m1.1.1.cmml" xref="S3.SS4.SSS1.p3.2.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p3.2.m1.1.1.1.cmml" xref="S3.SS4.SSS1.p3.2.m1.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p3.2.m1.1.1.2.cmml" xref="S3.SS4.SSS1.p3.2.m1.1.1.2">𝑽</ci><ci id="S3.SS4.SSS1.p3.2.m1.1.1.3.cmml" xref="S3.SS4.SSS1.p3.2.m1.1.1.3">𝒜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p3.2.m1.1c">\bm{V}_{\mathcal{A}}</annotation></semantics></math> is the representation of all the items in domain A.</p>
</div>
<div id="S3.SS4.SSS1.p4" class="ltx_para">
<p id="S3.SS4.SSS1.p4.2" class="ltx_p">We exploit the cross-entropy loss on all the domains as the local training objective:</p>
<table id="A2.EGx4" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S3.E8"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(8)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E8.m1.2" class="ltx_Math" alttext="\displaystyle{L_{A}}=-\frac{1}{{\left|{{\mathcal{S}_{A}}}\right|}}\sum\limits_{{\mathcal{S}_{i}^{A}}\in{\mathcal{S}_{A}}}{\log P({A_{i+1}}|{\mathcal{S}_{i}^{A}}})," display="inline"><semantics id="S3.E8.m1.2a"><mrow id="S3.E8.m1.2.2.1" xref="S3.E8.m1.2.2.1.1.cmml"><mrow id="S3.E8.m1.2.2.1.1" xref="S3.E8.m1.2.2.1.1.cmml"><msub id="S3.E8.m1.2.2.1.1.3" xref="S3.E8.m1.2.2.1.1.3.cmml"><mi id="S3.E8.m1.2.2.1.1.3.2" xref="S3.E8.m1.2.2.1.1.3.2.cmml">L</mi><mi id="S3.E8.m1.2.2.1.1.3.3" xref="S3.E8.m1.2.2.1.1.3.3.cmml">A</mi></msub><mo id="S3.E8.m1.2.2.1.1.2" xref="S3.E8.m1.2.2.1.1.2.cmml">=</mo><mrow id="S3.E8.m1.2.2.1.1.1" xref="S3.E8.m1.2.2.1.1.1.cmml"><mo id="S3.E8.m1.2.2.1.1.1a" xref="S3.E8.m1.2.2.1.1.1.cmml">−</mo><mrow id="S3.E8.m1.2.2.1.1.1.1" xref="S3.E8.m1.2.2.1.1.1.1.cmml"><mstyle displaystyle="true" id="S3.E8.m1.1.1" xref="S3.E8.m1.1.1.cmml"><mfrac id="S3.E8.m1.1.1a" xref="S3.E8.m1.1.1.cmml"><mn id="S3.E8.m1.1.1.3" xref="S3.E8.m1.1.1.3.cmml">1</mn><mrow id="S3.E8.m1.1.1.1.1" xref="S3.E8.m1.1.1.1.2.cmml"><mo id="S3.E8.m1.1.1.1.1.2" xref="S3.E8.m1.1.1.1.2.1.cmml">|</mo><msub id="S3.E8.m1.1.1.1.1.1" xref="S3.E8.m1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E8.m1.1.1.1.1.1.2" xref="S3.E8.m1.1.1.1.1.1.2.cmml">𝒮</mi><mi id="S3.E8.m1.1.1.1.1.1.3" xref="S3.E8.m1.1.1.1.1.1.3.cmml">A</mi></msub><mo id="S3.E8.m1.1.1.1.1.3" xref="S3.E8.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S3.E8.m1.2.2.1.1.1.1.2" xref="S3.E8.m1.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S3.E8.m1.2.2.1.1.1.1.1" xref="S3.E8.m1.2.2.1.1.1.1.1.cmml"><mstyle displaystyle="true" id="S3.E8.m1.2.2.1.1.1.1.1.2" xref="S3.E8.m1.2.2.1.1.1.1.1.2.cmml"><munder id="S3.E8.m1.2.2.1.1.1.1.1.2a" xref="S3.E8.m1.2.2.1.1.1.1.1.2.cmml"><mo movablelimits="false" id="S3.E8.m1.2.2.1.1.1.1.1.2.2" xref="S3.E8.m1.2.2.1.1.1.1.1.2.2.cmml">∑</mo><mrow id="S3.E8.m1.2.2.1.1.1.1.1.2.3" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.cmml"><msubsup id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.2" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.2.cmml">𝒮</mi><mi id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.3" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.3.cmml">i</mi><mi id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.3" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.3.cmml">A</mi></msubsup><mo id="S3.E8.m1.2.2.1.1.1.1.1.2.3.1" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.1.cmml">∈</mo><msub id="S3.E8.m1.2.2.1.1.1.1.1.2.3.3" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.2" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.2.cmml">𝒮</mi><mi id="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.3" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.3.cmml">A</mi></msub></mrow></munder></mstyle><mrow id="S3.E8.m1.2.2.1.1.1.1.1.1" xref="S3.E8.m1.2.2.1.1.1.1.1.1.cmml"><mrow id="S3.E8.m1.2.2.1.1.1.1.1.1.3" xref="S3.E8.m1.2.2.1.1.1.1.1.1.3.cmml"><mi id="S3.E8.m1.2.2.1.1.1.1.1.1.3.1" xref="S3.E8.m1.2.2.1.1.1.1.1.1.3.1.cmml">log</mi><mo lspace="0.167em" id="S3.E8.m1.2.2.1.1.1.1.1.1.3a" xref="S3.E8.m1.2.2.1.1.1.1.1.1.3.cmml">⁡</mo><mi id="S3.E8.m1.2.2.1.1.1.1.1.1.3.2" xref="S3.E8.m1.2.2.1.1.1.1.1.1.3.2.cmml">P</mi></mrow><mo lspace="0em" rspace="0em" id="S3.E8.m1.2.2.1.1.1.1.1.1.2" xref="S3.E8.m1.2.2.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.2" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.cmml">A</mi><mrow id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.cmml"><mi id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.2" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.2.cmml">i</mi><mo id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.1" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.1.cmml">+</mo><mn id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.3" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.3.cmml">1</mn></mrow></msub><mo fence="false" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.1" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml">|</mo><msubsup id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.2" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.2.cmml">𝒮</mi><mi id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.3" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.3.cmml">i</mi><mi id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.cmml">A</mi></msubsup></mrow><mo stretchy="false" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><mo id="S3.E8.m1.2.2.1.2" xref="S3.E8.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E8.m1.2b"><apply id="S3.E8.m1.2.2.1.1.cmml" xref="S3.E8.m1.2.2.1"><eq id="S3.E8.m1.2.2.1.1.2.cmml" xref="S3.E8.m1.2.2.1.1.2"></eq><apply id="S3.E8.m1.2.2.1.1.3.cmml" xref="S3.E8.m1.2.2.1.1.3"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.1.1.3.1.cmml" xref="S3.E8.m1.2.2.1.1.3">subscript</csymbol><ci id="S3.E8.m1.2.2.1.1.3.2.cmml" xref="S3.E8.m1.2.2.1.1.3.2">𝐿</ci><ci id="S3.E8.m1.2.2.1.1.3.3.cmml" xref="S3.E8.m1.2.2.1.1.3.3">𝐴</ci></apply><apply id="S3.E8.m1.2.2.1.1.1.cmml" xref="S3.E8.m1.2.2.1.1.1"><minus id="S3.E8.m1.2.2.1.1.1.2.cmml" xref="S3.E8.m1.2.2.1.1.1"></minus><apply id="S3.E8.m1.2.2.1.1.1.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1"><times id="S3.E8.m1.2.2.1.1.1.1.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.2"></times><apply id="S3.E8.m1.1.1.cmml" xref="S3.E8.m1.1.1"><divide id="S3.E8.m1.1.1.2.cmml" xref="S3.E8.m1.1.1"></divide><cn type="integer" id="S3.E8.m1.1.1.3.cmml" xref="S3.E8.m1.1.1.3">1</cn><apply id="S3.E8.m1.1.1.1.2.cmml" xref="S3.E8.m1.1.1.1.1"><abs id="S3.E8.m1.1.1.1.2.1.cmml" xref="S3.E8.m1.1.1.1.1.2"></abs><apply id="S3.E8.m1.1.1.1.1.1.cmml" xref="S3.E8.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E8.m1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.E8.m1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.1.1.1.1.1.2">𝒮</ci><ci id="S3.E8.m1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.1.1.1.1.1.3">𝐴</ci></apply></apply></apply><apply id="S3.E8.m1.2.2.1.1.1.1.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1"><apply id="S3.E8.m1.2.2.1.1.1.1.1.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.1.1.1.1.1.2.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2">subscript</csymbol><sum id="S3.E8.m1.2.2.1.1.1.1.1.2.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.2"></sum><apply id="S3.E8.m1.2.2.1.1.1.1.1.2.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3"><in id="S3.E8.m1.2.2.1.1.1.1.1.2.3.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.1"></in><apply id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2">superscript</csymbol><apply id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2">subscript</csymbol><ci id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.2">𝒮</ci><ci id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.2.3">𝑖</ci></apply><ci id="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.2.3">𝐴</ci></apply><apply id="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.3"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.3">subscript</csymbol><ci id="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.2">𝒮</ci><ci id="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.2.3.3.3">𝐴</ci></apply></apply></apply><apply id="S3.E8.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1"><times id="S3.E8.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.2"></times><apply id="S3.E8.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.3"><log id="S3.E8.m1.2.2.1.1.1.1.1.1.3.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.3.1"></log><ci id="S3.E8.m1.2.2.1.1.1.1.1.1.3.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.3.2">𝑃</ci></apply><apply id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.2">𝐴</ci><apply id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3"><plus id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.1"></plus><ci id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.2">𝑖</ci><cn type="integer" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3">superscript</csymbol><apply id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.1.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.2.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.2">𝒮</ci><ci id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.3">𝑖</ci></apply><ci id="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E8.m1.2.2.1.1.1.1.1.1.1.1.1.3.3">𝐴</ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E8.m1.2c">\displaystyle{L_{A}}=-\frac{1}{{\left|{{\mathcal{S}_{A}}}\right|}}\sum\limits_{{\mathcal{S}_{i}^{A}}\in{\mathcal{S}_{A}}}{\log P({A_{i+1}}|{\mathcal{S}_{i}^{A}}}),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS1.p4.1" class="ltx_p">where <math id="S3.SS4.SSS1.p4.1.m1.1" class="ltx_Math" alttext="\mathcal{S}_{A}" display="inline"><semantics id="S3.SS4.SSS1.p4.1.m1.1a"><msub id="S3.SS4.SSS1.p4.1.m1.1.1" xref="S3.SS4.SSS1.p4.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.SSS1.p4.1.m1.1.1.2" xref="S3.SS4.SSS1.p4.1.m1.1.1.2.cmml">𝒮</mi><mi id="S3.SS4.SSS1.p4.1.m1.1.1.3" xref="S3.SS4.SSS1.p4.1.m1.1.1.3.cmml">A</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p4.1.m1.1b"><apply id="S3.SS4.SSS1.p4.1.m1.1.1.cmml" xref="S3.SS4.SSS1.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS1.p4.1.m1.1.1.1.cmml" xref="S3.SS4.SSS1.p4.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.SSS1.p4.1.m1.1.1.2.cmml" xref="S3.SS4.SSS1.p4.1.m1.1.1.2">𝒮</ci><ci id="S3.SS4.SSS1.p4.1.m1.1.1.3.cmml" xref="S3.SS4.SSS1.p4.1.m1.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p4.1.m1.1c">\mathcal{S}_{A}</annotation></semantics></math> is the training set in domain A.</p>
</div>
</section>
<section id="S3.SS4.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.2. </span>Gradient Uploading and the Encryption Strategy</h4>

<div id="S3.SS4.SSS2.p1" class="ltx_para">
<p id="S3.SS4.SSS2.p1.1" class="ltx_p">To enhance the local training process and enable the item representations to embed cross-domain information, we need to leverage the user preference information, such as users’ interactions in other domains.
But as the privacy leakage concerns, we do not directly upload the user interaction data to the central server. Instead, we only upload model parameters’ gradients for aggregation (the details can seen in Section <a href="#S3.SS4.SSS3" title="3.4.3. Gradient Aggregation and Synchronization ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.4.3</span></a>). Then, the parameters aggregated through the server will be passed back to clients to let them engage in the local training. In this distributed learning way, we can embed domain knowledge into pre-trained models, with which we can further conduct <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>.</p>
</div>
<div id="S3.SS4.SSS2.p2" class="ltx_para">
<p id="S3.SS4.SSS2.p2.4" class="ltx_p">However, as user-related gradients also have privacy leakage issues (attackers can obtain privacy features from model parameters or gradient through attach methods <cite class="ltx_cite ltx_citemacro_citep">(Zhang et al<span class="ltx_text">.</span>, <a href="#bib.bib53" title="" class="ltx_ref">2021</a>, <a href="#bib.bib55" title="" class="ltx_ref">2023</a>, <a href="#bib.bib54" title="" class="ltx_ref">2022</a>; Yuan et al<span class="ltx_text">.</span>, <a href="#bib.bib51" title="" class="ltx_ref">2023</a>)</cite>),
we only upload item-related gradients in each client (i.e., the <span id="S3.SS4.SSS2.p2.4.1" class="ltx_text ltx_font_italic">code embedding table</span>) to the server for accumulation, and prohibit all the the user-related parameters.
The uploaded gradients of the <span id="S3.SS4.SSS2.p2.4.2" class="ltx_text ltx_font_italic">code embedding table</span> are represented by <math id="S3.SS4.SSS2.p2.1.m1.1" class="ltx_Math" alttext="\bm{g}_{A}" display="inline"><semantics id="S3.SS4.SSS2.p2.1.m1.1a"><msub id="S3.SS4.SSS2.p2.1.m1.1.1" xref="S3.SS4.SSS2.p2.1.m1.1.1.cmml"><mi id="S3.SS4.SSS2.p2.1.m1.1.1.2" xref="S3.SS4.SSS2.p2.1.m1.1.1.2.cmml">𝒈</mi><mi id="S3.SS4.SSS2.p2.1.m1.1.1.3" xref="S3.SS4.SSS2.p2.1.m1.1.1.3.cmml">A</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p2.1.m1.1b"><apply id="S3.SS4.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS4.SSS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p2.1.m1.1.1.1.cmml" xref="S3.SS4.SSS2.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.SSS2.p2.1.m1.1.1.2.cmml" xref="S3.SS4.SSS2.p2.1.m1.1.1.2">𝒈</ci><ci id="S3.SS4.SSS2.p2.1.m1.1.1.3.cmml" xref="S3.SS4.SSS2.p2.1.m1.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p2.1.m1.1c">\bm{g}_{A}</annotation></semantics></math> and <math id="S3.SS4.SSS2.p2.2.m2.1" class="ltx_Math" alttext="\bm{g}_{B}" display="inline"><semantics id="S3.SS4.SSS2.p2.2.m2.1a"><msub id="S3.SS4.SSS2.p2.2.m2.1.1" xref="S3.SS4.SSS2.p2.2.m2.1.1.cmml"><mi id="S3.SS4.SSS2.p2.2.m2.1.1.2" xref="S3.SS4.SSS2.p2.2.m2.1.1.2.cmml">𝒈</mi><mi id="S3.SS4.SSS2.p2.2.m2.1.1.3" xref="S3.SS4.SSS2.p2.2.m2.1.1.3.cmml">B</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p2.2.m2.1b"><apply id="S3.SS4.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS4.SSS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p2.2.m2.1.1.1.cmml" xref="S3.SS4.SSS2.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS4.SSS2.p2.2.m2.1.1.2.cmml" xref="S3.SS4.SSS2.p2.2.m2.1.1.2">𝒈</ci><ci id="S3.SS4.SSS2.p2.2.m2.1.1.3.cmml" xref="S3.SS4.SSS2.p2.2.m2.1.1.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p2.2.m2.1c">\bm{g}_{B}</annotation></semantics></math> in domains <math id="S3.SS4.SSS2.p2.3.m3.1" class="ltx_Math" alttext="A" display="inline"><semantics id="S3.SS4.SSS2.p2.3.m3.1a"><mi id="S3.SS4.SSS2.p2.3.m3.1.1" xref="S3.SS4.SSS2.p2.3.m3.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p2.3.m3.1b"><ci id="S3.SS4.SSS2.p2.3.m3.1.1.cmml" xref="S3.SS4.SSS2.p2.3.m3.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p2.3.m3.1c">A</annotation></semantics></math> and <math id="S3.SS4.SSS2.p2.4.m4.1" class="ltx_Math" alttext="B" display="inline"><semantics id="S3.SS4.SSS2.p2.4.m4.1a"><mi id="S3.SS4.SSS2.p2.4.m4.1.1" xref="S3.SS4.SSS2.p2.4.m4.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p2.4.m4.1b"><ci id="S3.SS4.SSS2.p2.4.m4.1.1.cmml" xref="S3.SS4.SSS2.p2.4.m4.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p2.4.m4.1c">B</annotation></semantics></math>, respectively.</p>
</div>
<div id="S3.SS4.SSS2.p3" class="ltx_para">
<p id="S3.SS4.SSS2.p3.2" class="ltx_p"><span id="S3.SS4.SSS2.p3.2.1" class="ltx_text ltx_font_bold">Encryption Strategy.</span>
To prevent malicious actors from intercepting these gradients and then using them to infer item information, we further devise an encryption method on these gradients.
Traditional encryption methods <cite class="ltx_cite ltx_citemacro_citep">(Kairouz et al<span class="ltx_text">.</span>, <a href="#bib.bib16" title="" class="ltx_ref">2021</a>; Wu et al<span class="ltx_text">.</span>, <a href="#bib.bib45" title="" class="ltx_ref">2021</a>; Qi et al<span class="ltx_text">.</span>, <a href="#bib.bib30" title="" class="ltx_ref">2020</a>; Liu et al<span class="ltx_text">.</span>, <a href="#bib.bib25" title="" class="ltx_ref">2022</a>; Wang et al<span class="ltx_text">.</span>, <a href="#bib.bib41" title="" class="ltx_ref">2022</a>)</cite> mainly add Gaussian or Laplace noise
to the gradients.
To minimize the impact of this encryption on model performance as much as possible, we propose a composite encryption method on <math id="S3.SS4.SSS2.p3.1.m1.1" class="ltx_Math" alttext="\bm{g}_{A}" display="inline"><semantics id="S3.SS4.SSS2.p3.1.m1.1a"><msub id="S3.SS4.SSS2.p3.1.m1.1.1" xref="S3.SS4.SSS2.p3.1.m1.1.1.cmml"><mi id="S3.SS4.SSS2.p3.1.m1.1.1.2" xref="S3.SS4.SSS2.p3.1.m1.1.1.2.cmml">𝒈</mi><mi id="S3.SS4.SSS2.p3.1.m1.1.1.3" xref="S3.SS4.SSS2.p3.1.m1.1.1.3.cmml">A</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p3.1.m1.1b"><apply id="S3.SS4.SSS2.p3.1.m1.1.1.cmml" xref="S3.SS4.SSS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p3.1.m1.1.1.1.cmml" xref="S3.SS4.SSS2.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.SSS2.p3.1.m1.1.1.2.cmml" xref="S3.SS4.SSS2.p3.1.m1.1.1.2">𝒈</ci><ci id="S3.SS4.SSS2.p3.1.m1.1.1.3.cmml" xref="S3.SS4.SSS2.p3.1.m1.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p3.1.m1.1c">\bm{g}_{A}</annotation></semantics></math> and <math id="S3.SS4.SSS2.p3.2.m2.1" class="ltx_Math" alttext="\bm{g}_{B}" display="inline"><semantics id="S3.SS4.SSS2.p3.2.m2.1a"><msub id="S3.SS4.SSS2.p3.2.m2.1.1" xref="S3.SS4.SSS2.p3.2.m2.1.1.cmml"><mi id="S3.SS4.SSS2.p3.2.m2.1.1.2" xref="S3.SS4.SSS2.p3.2.m2.1.1.2.cmml">𝒈</mi><mi id="S3.SS4.SSS2.p3.2.m2.1.1.3" xref="S3.SS4.SSS2.p3.2.m2.1.1.3.cmml">B</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p3.2.m2.1b"><apply id="S3.SS4.SSS2.p3.2.m2.1.1.cmml" xref="S3.SS4.SSS2.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p3.2.m2.1.1.1.cmml" xref="S3.SS4.SSS2.p3.2.m2.1.1">subscript</csymbol><ci id="S3.SS4.SSS2.p3.2.m2.1.1.2.cmml" xref="S3.SS4.SSS2.p3.2.m2.1.1.2">𝒈</ci><ci id="S3.SS4.SSS2.p3.2.m2.1.1.3.cmml" xref="S3.SS4.SSS2.p3.2.m2.1.1.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p3.2.m2.1c">\bm{g}_{B}</annotation></semantics></math>, which consist of a quantization <cite class="ltx_cite ltx_citemacro_citep">(Shlezinger et al<span class="ltx_text">.</span>, <a href="#bib.bib35" title="" class="ltx_ref">2020a</a>, <a href="#bib.bib36" title="" class="ltx_ref">b</a>; Reisizadeh et al<span class="ltx_text">.</span>, <a href="#bib.bib32" title="" class="ltx_ref">2020</a>)</cite> and a randomized response <cite class="ltx_cite ltx_citemacro_citep">(Wang et al<span class="ltx_text">.</span>, <a href="#bib.bib42" title="" class="ltx_ref">2020</a>; Du et al<span class="ltx_text">.</span>, <a href="#bib.bib7" title="" class="ltx_ref">2021</a>)</cite> component.</p>
</div>
<div id="S3.SS4.SSS2.p4" class="ltx_para">
<p id="S3.SS4.SSS2.p4.3" class="ltx_p"><span id="S3.SS4.SSS2.p4.3.1" class="ltx_text ltx_font_italic">Quantization</span>.
This component aims to map gradients to a finite number of discrete values to avoid third-party attacks, as the attackers cannot restore the gradient values without knowing the mapping method, even if they can intercept the uploaded gradients.
For each element of <math id="S3.SS4.SSS2.p4.1.m1.1" class="ltx_Math" alttext="\bm{g}_{i}^{A}" display="inline"><semantics id="S3.SS4.SSS2.p4.1.m1.1a"><msubsup id="S3.SS4.SSS2.p4.1.m1.1.1" xref="S3.SS4.SSS2.p4.1.m1.1.1.cmml"><mi id="S3.SS4.SSS2.p4.1.m1.1.1.2.2" xref="S3.SS4.SSS2.p4.1.m1.1.1.2.2.cmml">𝒈</mi><mi id="S3.SS4.SSS2.p4.1.m1.1.1.2.3" xref="S3.SS4.SSS2.p4.1.m1.1.1.2.3.cmml">i</mi><mi id="S3.SS4.SSS2.p4.1.m1.1.1.3" xref="S3.SS4.SSS2.p4.1.m1.1.1.3.cmml">A</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.1.m1.1b"><apply id="S3.SS4.SSS2.p4.1.m1.1.1.cmml" xref="S3.SS4.SSS2.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.1.m1.1.1.1.cmml" xref="S3.SS4.SSS2.p4.1.m1.1.1">superscript</csymbol><apply id="S3.SS4.SSS2.p4.1.m1.1.1.2.cmml" xref="S3.SS4.SSS2.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.1.m1.1.1.2.1.cmml" xref="S3.SS4.SSS2.p4.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.SSS2.p4.1.m1.1.1.2.2.cmml" xref="S3.SS4.SSS2.p4.1.m1.1.1.2.2">𝒈</ci><ci id="S3.SS4.SSS2.p4.1.m1.1.1.2.3.cmml" xref="S3.SS4.SSS2.p4.1.m1.1.1.2.3">𝑖</ci></apply><ci id="S3.SS4.SSS2.p4.1.m1.1.1.3.cmml" xref="S3.SS4.SSS2.p4.1.m1.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.1.m1.1c">\bm{g}_{i}^{A}</annotation></semantics></math> in client A (take domain A as an example), we first clip <math id="S3.SS4.SSS2.p4.2.m2.1" class="ltx_Math" alttext="\bm{g}_{i}^{A}" display="inline"><semantics id="S3.SS4.SSS2.p4.2.m2.1a"><msubsup id="S3.SS4.SSS2.p4.2.m2.1.1" xref="S3.SS4.SSS2.p4.2.m2.1.1.cmml"><mi id="S3.SS4.SSS2.p4.2.m2.1.1.2.2" xref="S3.SS4.SSS2.p4.2.m2.1.1.2.2.cmml">𝒈</mi><mi id="S3.SS4.SSS2.p4.2.m2.1.1.2.3" xref="S3.SS4.SSS2.p4.2.m2.1.1.2.3.cmml">i</mi><mi id="S3.SS4.SSS2.p4.2.m2.1.1.3" xref="S3.SS4.SSS2.p4.2.m2.1.1.3.cmml">A</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.2.m2.1b"><apply id="S3.SS4.SSS2.p4.2.m2.1.1.cmml" xref="S3.SS4.SSS2.p4.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.2.m2.1.1.1.cmml" xref="S3.SS4.SSS2.p4.2.m2.1.1">superscript</csymbol><apply id="S3.SS4.SSS2.p4.2.m2.1.1.2.cmml" xref="S3.SS4.SSS2.p4.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.2.m2.1.1.2.1.cmml" xref="S3.SS4.SSS2.p4.2.m2.1.1">subscript</csymbol><ci id="S3.SS4.SSS2.p4.2.m2.1.1.2.2.cmml" xref="S3.SS4.SSS2.p4.2.m2.1.1.2.2">𝒈</ci><ci id="S3.SS4.SSS2.p4.2.m2.1.1.2.3.cmml" xref="S3.SS4.SSS2.p4.2.m2.1.1.2.3">𝑖</ci></apply><ci id="S3.SS4.SSS2.p4.2.m2.1.1.3.cmml" xref="S3.SS4.SSS2.p4.2.m2.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.2.m2.1c">\bm{g}_{i}^{A}</annotation></semantics></math> to a certain range <math id="S3.SS4.SSS2.p4.3.m3.2" class="ltx_Math" alttext="[-\tau,\tau]" display="inline"><semantics id="S3.SS4.SSS2.p4.3.m3.2a"><mrow id="S3.SS4.SSS2.p4.3.m3.2.2.1" xref="S3.SS4.SSS2.p4.3.m3.2.2.2.cmml"><mo stretchy="false" id="S3.SS4.SSS2.p4.3.m3.2.2.1.2" xref="S3.SS4.SSS2.p4.3.m3.2.2.2.cmml">[</mo><mrow id="S3.SS4.SSS2.p4.3.m3.2.2.1.1" xref="S3.SS4.SSS2.p4.3.m3.2.2.1.1.cmml"><mo id="S3.SS4.SSS2.p4.3.m3.2.2.1.1a" xref="S3.SS4.SSS2.p4.3.m3.2.2.1.1.cmml">−</mo><mi id="S3.SS4.SSS2.p4.3.m3.2.2.1.1.2" xref="S3.SS4.SSS2.p4.3.m3.2.2.1.1.2.cmml">τ</mi></mrow><mo id="S3.SS4.SSS2.p4.3.m3.2.2.1.3" xref="S3.SS4.SSS2.p4.3.m3.2.2.2.cmml">,</mo><mi id="S3.SS4.SSS2.p4.3.m3.1.1" xref="S3.SS4.SSS2.p4.3.m3.1.1.cmml">τ</mi><mo stretchy="false" id="S3.SS4.SSS2.p4.3.m3.2.2.1.4" xref="S3.SS4.SSS2.p4.3.m3.2.2.2.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.3.m3.2b"><interval closure="closed" id="S3.SS4.SSS2.p4.3.m3.2.2.2.cmml" xref="S3.SS4.SSS2.p4.3.m3.2.2.1"><apply id="S3.SS4.SSS2.p4.3.m3.2.2.1.1.cmml" xref="S3.SS4.SSS2.p4.3.m3.2.2.1.1"><minus id="S3.SS4.SSS2.p4.3.m3.2.2.1.1.1.cmml" xref="S3.SS4.SSS2.p4.3.m3.2.2.1.1"></minus><ci id="S3.SS4.SSS2.p4.3.m3.2.2.1.1.2.cmml" xref="S3.SS4.SSS2.p4.3.m3.2.2.1.1.2">𝜏</ci></apply><ci id="S3.SS4.SSS2.p4.3.m3.1.1.cmml" xref="S3.SS4.SSS2.p4.3.m3.1.1">𝜏</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.3.m3.2c">[-\tau,\tau]</annotation></semantics></math> to truncate excessively large or small values in the gradient to ensure stable aggregation in subsequent steps.:</p>
<table id="S3.E9" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(9)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E9.m1.3" class="ltx_Math" alttext="\bm{g}_{i}^{A}=\operatorname{clamp}(\bm{g}_{i}^{A},-\tau,\tau)," display="block"><semantics id="S3.E9.m1.3a"><mrow id="S3.E9.m1.3.3.1" xref="S3.E9.m1.3.3.1.1.cmml"><mrow id="S3.E9.m1.3.3.1.1" xref="S3.E9.m1.3.3.1.1.cmml"><msubsup id="S3.E9.m1.3.3.1.1.4" xref="S3.E9.m1.3.3.1.1.4.cmml"><mi id="S3.E9.m1.3.3.1.1.4.2.2" xref="S3.E9.m1.3.3.1.1.4.2.2.cmml">𝒈</mi><mi id="S3.E9.m1.3.3.1.1.4.2.3" xref="S3.E9.m1.3.3.1.1.4.2.3.cmml">i</mi><mi id="S3.E9.m1.3.3.1.1.4.3" xref="S3.E9.m1.3.3.1.1.4.3.cmml">A</mi></msubsup><mo id="S3.E9.m1.3.3.1.1.3" xref="S3.E9.m1.3.3.1.1.3.cmml">=</mo><mrow id="S3.E9.m1.3.3.1.1.2.2" xref="S3.E9.m1.3.3.1.1.2.3.cmml"><mi id="S3.E9.m1.1.1" xref="S3.E9.m1.1.1.cmml">clamp</mi><mo id="S3.E9.m1.3.3.1.1.2.2a" xref="S3.E9.m1.3.3.1.1.2.3.cmml">⁡</mo><mrow id="S3.E9.m1.3.3.1.1.2.2.2" xref="S3.E9.m1.3.3.1.1.2.3.cmml"><mo stretchy="false" id="S3.E9.m1.3.3.1.1.2.2.2.3" xref="S3.E9.m1.3.3.1.1.2.3.cmml">(</mo><msubsup id="S3.E9.m1.3.3.1.1.1.1.1.1" xref="S3.E9.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S3.E9.m1.3.3.1.1.1.1.1.1.2.2" xref="S3.E9.m1.3.3.1.1.1.1.1.1.2.2.cmml">𝒈</mi><mi id="S3.E9.m1.3.3.1.1.1.1.1.1.2.3" xref="S3.E9.m1.3.3.1.1.1.1.1.1.2.3.cmml">i</mi><mi id="S3.E9.m1.3.3.1.1.1.1.1.1.3" xref="S3.E9.m1.3.3.1.1.1.1.1.1.3.cmml">A</mi></msubsup><mo id="S3.E9.m1.3.3.1.1.2.2.2.4" xref="S3.E9.m1.3.3.1.1.2.3.cmml">,</mo><mrow id="S3.E9.m1.3.3.1.1.2.2.2.2" xref="S3.E9.m1.3.3.1.1.2.2.2.2.cmml"><mo id="S3.E9.m1.3.3.1.1.2.2.2.2a" xref="S3.E9.m1.3.3.1.1.2.2.2.2.cmml">−</mo><mi id="S3.E9.m1.3.3.1.1.2.2.2.2.2" xref="S3.E9.m1.3.3.1.1.2.2.2.2.2.cmml">τ</mi></mrow><mo id="S3.E9.m1.3.3.1.1.2.2.2.5" xref="S3.E9.m1.3.3.1.1.2.3.cmml">,</mo><mi id="S3.E9.m1.2.2" xref="S3.E9.m1.2.2.cmml">τ</mi><mo stretchy="false" id="S3.E9.m1.3.3.1.1.2.2.2.6" xref="S3.E9.m1.3.3.1.1.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E9.m1.3.3.1.2" xref="S3.E9.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E9.m1.3b"><apply id="S3.E9.m1.3.3.1.1.cmml" xref="S3.E9.m1.3.3.1"><eq id="S3.E9.m1.3.3.1.1.3.cmml" xref="S3.E9.m1.3.3.1.1.3"></eq><apply id="S3.E9.m1.3.3.1.1.4.cmml" xref="S3.E9.m1.3.3.1.1.4"><csymbol cd="ambiguous" id="S3.E9.m1.3.3.1.1.4.1.cmml" xref="S3.E9.m1.3.3.1.1.4">superscript</csymbol><apply id="S3.E9.m1.3.3.1.1.4.2.cmml" xref="S3.E9.m1.3.3.1.1.4"><csymbol cd="ambiguous" id="S3.E9.m1.3.3.1.1.4.2.1.cmml" xref="S3.E9.m1.3.3.1.1.4">subscript</csymbol><ci id="S3.E9.m1.3.3.1.1.4.2.2.cmml" xref="S3.E9.m1.3.3.1.1.4.2.2">𝒈</ci><ci id="S3.E9.m1.3.3.1.1.4.2.3.cmml" xref="S3.E9.m1.3.3.1.1.4.2.3">𝑖</ci></apply><ci id="S3.E9.m1.3.3.1.1.4.3.cmml" xref="S3.E9.m1.3.3.1.1.4.3">𝐴</ci></apply><apply id="S3.E9.m1.3.3.1.1.2.3.cmml" xref="S3.E9.m1.3.3.1.1.2.2"><ci id="S3.E9.m1.1.1.cmml" xref="S3.E9.m1.1.1">clamp</ci><apply id="S3.E9.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E9.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.3.3.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E9.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E9.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9.m1.3.3.1.1.1.1.1.1.2.1.cmml" xref="S3.E9.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E9.m1.3.3.1.1.1.1.1.1.2.2.cmml" xref="S3.E9.m1.3.3.1.1.1.1.1.1.2.2">𝒈</ci><ci id="S3.E9.m1.3.3.1.1.1.1.1.1.2.3.cmml" xref="S3.E9.m1.3.3.1.1.1.1.1.1.2.3">𝑖</ci></apply><ci id="S3.E9.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E9.m1.3.3.1.1.1.1.1.1.3">𝐴</ci></apply><apply id="S3.E9.m1.3.3.1.1.2.2.2.2.cmml" xref="S3.E9.m1.3.3.1.1.2.2.2.2"><minus id="S3.E9.m1.3.3.1.1.2.2.2.2.1.cmml" xref="S3.E9.m1.3.3.1.1.2.2.2.2"></minus><ci id="S3.E9.m1.3.3.1.1.2.2.2.2.2.cmml" xref="S3.E9.m1.3.3.1.1.2.2.2.2.2">𝜏</ci></apply><ci id="S3.E9.m1.2.2.cmml" xref="S3.E9.m1.2.2">𝜏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E9.m1.3c">\bm{g}_{i}^{A}=\operatorname{clamp}(\bm{g}_{i}^{A},-\tau,\tau),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS2.p4.5" class="ltx_p">where <math id="S3.SS4.SSS2.p4.4.m1.1" class="ltx_Math" alttext="\tau" display="inline"><semantics id="S3.SS4.SSS2.p4.4.m1.1a"><mi id="S3.SS4.SSS2.p4.4.m1.1.1" xref="S3.SS4.SSS2.p4.4.m1.1.1.cmml">τ</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.4.m1.1b"><ci id="S3.SS4.SSS2.p4.4.m1.1.1.cmml" xref="S3.SS4.SSS2.p4.4.m1.1.1">𝜏</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.4.m1.1c">\tau</annotation></semantics></math> is the gradient threshold.
Then, we scale <math id="S3.SS4.SSS2.p4.5.m2.1" class="ltx_Math" alttext="\bm{g}_{i}^{A}" display="inline"><semantics id="S3.SS4.SSS2.p4.5.m2.1a"><msubsup id="S3.SS4.SSS2.p4.5.m2.1.1" xref="S3.SS4.SSS2.p4.5.m2.1.1.cmml"><mi id="S3.SS4.SSS2.p4.5.m2.1.1.2.2" xref="S3.SS4.SSS2.p4.5.m2.1.1.2.2.cmml">𝒈</mi><mi id="S3.SS4.SSS2.p4.5.m2.1.1.2.3" xref="S3.SS4.SSS2.p4.5.m2.1.1.2.3.cmml">i</mi><mi id="S3.SS4.SSS2.p4.5.m2.1.1.3" xref="S3.SS4.SSS2.p4.5.m2.1.1.3.cmml">A</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.5.m2.1b"><apply id="S3.SS4.SSS2.p4.5.m2.1.1.cmml" xref="S3.SS4.SSS2.p4.5.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.5.m2.1.1.1.cmml" xref="S3.SS4.SSS2.p4.5.m2.1.1">superscript</csymbol><apply id="S3.SS4.SSS2.p4.5.m2.1.1.2.cmml" xref="S3.SS4.SSS2.p4.5.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.5.m2.1.1.2.1.cmml" xref="S3.SS4.SSS2.p4.5.m2.1.1">subscript</csymbol><ci id="S3.SS4.SSS2.p4.5.m2.1.1.2.2.cmml" xref="S3.SS4.SSS2.p4.5.m2.1.1.2.2">𝒈</ci><ci id="S3.SS4.SSS2.p4.5.m2.1.1.2.3.cmml" xref="S3.SS4.SSS2.p4.5.m2.1.1.2.3">𝑖</ci></apply><ci id="S3.SS4.SSS2.p4.5.m2.1.1.3.cmml" xref="S3.SS4.SSS2.p4.5.m2.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.5.m2.1c">\bm{g}_{i}^{A}</annotation></semantics></math> by the following mapping function:</p>
<table id="S3.E10" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(10)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E10.m1.3" class="ltx_Math" alttext="\bm{q}_{i}^{A}=\operatorname{round}(\frac{{\bm{g}_{i}^{A}+\tau}}{s})," display="block"><semantics id="S3.E10.m1.3a"><mrow id="S3.E10.m1.3.3.1" xref="S3.E10.m1.3.3.1.1.cmml"><mrow id="S3.E10.m1.3.3.1.1" xref="S3.E10.m1.3.3.1.1.cmml"><msubsup id="S3.E10.m1.3.3.1.1.2" xref="S3.E10.m1.3.3.1.1.2.cmml"><mi id="S3.E10.m1.3.3.1.1.2.2.2" xref="S3.E10.m1.3.3.1.1.2.2.2.cmml">𝒒</mi><mi id="S3.E10.m1.3.3.1.1.2.2.3" xref="S3.E10.m1.3.3.1.1.2.2.3.cmml">i</mi><mi id="S3.E10.m1.3.3.1.1.2.3" xref="S3.E10.m1.3.3.1.1.2.3.cmml">A</mi></msubsup><mo id="S3.E10.m1.3.3.1.1.1" xref="S3.E10.m1.3.3.1.1.1.cmml">=</mo><mrow id="S3.E10.m1.3.3.1.1.3.2" xref="S3.E10.m1.3.3.1.1.3.1.cmml"><mi id="S3.E10.m1.1.1" xref="S3.E10.m1.1.1.cmml">round</mi><mo id="S3.E10.m1.3.3.1.1.3.2a" xref="S3.E10.m1.3.3.1.1.3.1.cmml">⁡</mo><mrow id="S3.E10.m1.3.3.1.1.3.2.1" xref="S3.E10.m1.3.3.1.1.3.1.cmml"><mo stretchy="false" id="S3.E10.m1.3.3.1.1.3.2.1.1" xref="S3.E10.m1.3.3.1.1.3.1.cmml">(</mo><mfrac id="S3.E10.m1.2.2" xref="S3.E10.m1.2.2.cmml"><mrow id="S3.E10.m1.2.2.2" xref="S3.E10.m1.2.2.2.cmml"><msubsup id="S3.E10.m1.2.2.2.2" xref="S3.E10.m1.2.2.2.2.cmml"><mi id="S3.E10.m1.2.2.2.2.2.2" xref="S3.E10.m1.2.2.2.2.2.2.cmml">𝒈</mi><mi id="S3.E10.m1.2.2.2.2.2.3" xref="S3.E10.m1.2.2.2.2.2.3.cmml">i</mi><mi id="S3.E10.m1.2.2.2.2.3" xref="S3.E10.m1.2.2.2.2.3.cmml">A</mi></msubsup><mo id="S3.E10.m1.2.2.2.1" xref="S3.E10.m1.2.2.2.1.cmml">+</mo><mi id="S3.E10.m1.2.2.2.3" xref="S3.E10.m1.2.2.2.3.cmml">τ</mi></mrow><mi id="S3.E10.m1.2.2.3" xref="S3.E10.m1.2.2.3.cmml">s</mi></mfrac><mo stretchy="false" id="S3.E10.m1.3.3.1.1.3.2.1.2" xref="S3.E10.m1.3.3.1.1.3.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E10.m1.3.3.1.2" xref="S3.E10.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E10.m1.3b"><apply id="S3.E10.m1.3.3.1.1.cmml" xref="S3.E10.m1.3.3.1"><eq id="S3.E10.m1.3.3.1.1.1.cmml" xref="S3.E10.m1.3.3.1.1.1"></eq><apply id="S3.E10.m1.3.3.1.1.2.cmml" xref="S3.E10.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S3.E10.m1.3.3.1.1.2.1.cmml" xref="S3.E10.m1.3.3.1.1.2">superscript</csymbol><apply id="S3.E10.m1.3.3.1.1.2.2.cmml" xref="S3.E10.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S3.E10.m1.3.3.1.1.2.2.1.cmml" xref="S3.E10.m1.3.3.1.1.2">subscript</csymbol><ci id="S3.E10.m1.3.3.1.1.2.2.2.cmml" xref="S3.E10.m1.3.3.1.1.2.2.2">𝒒</ci><ci id="S3.E10.m1.3.3.1.1.2.2.3.cmml" xref="S3.E10.m1.3.3.1.1.2.2.3">𝑖</ci></apply><ci id="S3.E10.m1.3.3.1.1.2.3.cmml" xref="S3.E10.m1.3.3.1.1.2.3">𝐴</ci></apply><apply id="S3.E10.m1.3.3.1.1.3.1.cmml" xref="S3.E10.m1.3.3.1.1.3.2"><ci id="S3.E10.m1.1.1.cmml" xref="S3.E10.m1.1.1">round</ci><apply id="S3.E10.m1.2.2.cmml" xref="S3.E10.m1.2.2"><divide id="S3.E10.m1.2.2.1.cmml" xref="S3.E10.m1.2.2"></divide><apply id="S3.E10.m1.2.2.2.cmml" xref="S3.E10.m1.2.2.2"><plus id="S3.E10.m1.2.2.2.1.cmml" xref="S3.E10.m1.2.2.2.1"></plus><apply id="S3.E10.m1.2.2.2.2.cmml" xref="S3.E10.m1.2.2.2.2"><csymbol cd="ambiguous" id="S3.E10.m1.2.2.2.2.1.cmml" xref="S3.E10.m1.2.2.2.2">superscript</csymbol><apply id="S3.E10.m1.2.2.2.2.2.cmml" xref="S3.E10.m1.2.2.2.2"><csymbol cd="ambiguous" id="S3.E10.m1.2.2.2.2.2.1.cmml" xref="S3.E10.m1.2.2.2.2">subscript</csymbol><ci id="S3.E10.m1.2.2.2.2.2.2.cmml" xref="S3.E10.m1.2.2.2.2.2.2">𝒈</ci><ci id="S3.E10.m1.2.2.2.2.2.3.cmml" xref="S3.E10.m1.2.2.2.2.2.3">𝑖</ci></apply><ci id="S3.E10.m1.2.2.2.2.3.cmml" xref="S3.E10.m1.2.2.2.2.3">𝐴</ci></apply><ci id="S3.E10.m1.2.2.2.3.cmml" xref="S3.E10.m1.2.2.2.3">𝜏</ci></apply><ci id="S3.E10.m1.2.2.3.cmml" xref="S3.E10.m1.2.2.3">𝑠</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E10.m1.3c">\bm{q}_{i}^{A}=\operatorname{round}(\frac{{\bm{g}_{i}^{A}+\tau}}{s}),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS2.p4.10" class="ltx_p">where <math id="S3.SS4.SSS2.p4.6.m1.2" class="ltx_Math" alttext="\operatorname{round}(\cdot)" display="inline"><semantics id="S3.SS4.SSS2.p4.6.m1.2a"><mrow id="S3.SS4.SSS2.p4.6.m1.2.3.2" xref="S3.SS4.SSS2.p4.6.m1.2.3.1.cmml"><mi id="S3.SS4.SSS2.p4.6.m1.1.1" xref="S3.SS4.SSS2.p4.6.m1.1.1.cmml">round</mi><mo id="S3.SS4.SSS2.p4.6.m1.2.3.2a" xref="S3.SS4.SSS2.p4.6.m1.2.3.1.cmml">⁡</mo><mrow id="S3.SS4.SSS2.p4.6.m1.2.3.2.1" xref="S3.SS4.SSS2.p4.6.m1.2.3.1.cmml"><mo stretchy="false" id="S3.SS4.SSS2.p4.6.m1.2.3.2.1.1" xref="S3.SS4.SSS2.p4.6.m1.2.3.1.cmml">(</mo><mo lspace="0em" rspace="0em" id="S3.SS4.SSS2.p4.6.m1.2.2" xref="S3.SS4.SSS2.p4.6.m1.2.2.cmml">⋅</mo><mo stretchy="false" id="S3.SS4.SSS2.p4.6.m1.2.3.2.1.2" xref="S3.SS4.SSS2.p4.6.m1.2.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.6.m1.2b"><apply id="S3.SS4.SSS2.p4.6.m1.2.3.1.cmml" xref="S3.SS4.SSS2.p4.6.m1.2.3.2"><ci id="S3.SS4.SSS2.p4.6.m1.1.1.cmml" xref="S3.SS4.SSS2.p4.6.m1.1.1">round</ci><ci id="S3.SS4.SSS2.p4.6.m1.2.2.cmml" xref="S3.SS4.SSS2.p4.6.m1.2.2">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.6.m1.2c">\operatorname{round}(\cdot)</annotation></semantics></math> means rounding each element to its nearest integer. <math id="S3.SS4.SSS2.p4.7.m2.4" class="ltx_Math" alttext="\bm{q}_{i}^{A}\in\{0,1,\dots,b-1\}" display="inline"><semantics id="S3.SS4.SSS2.p4.7.m2.4a"><mrow id="S3.SS4.SSS2.p4.7.m2.4.4" xref="S3.SS4.SSS2.p4.7.m2.4.4.cmml"><msubsup id="S3.SS4.SSS2.p4.7.m2.4.4.3" xref="S3.SS4.SSS2.p4.7.m2.4.4.3.cmml"><mi id="S3.SS4.SSS2.p4.7.m2.4.4.3.2.2" xref="S3.SS4.SSS2.p4.7.m2.4.4.3.2.2.cmml">𝒒</mi><mi id="S3.SS4.SSS2.p4.7.m2.4.4.3.2.3" xref="S3.SS4.SSS2.p4.7.m2.4.4.3.2.3.cmml">i</mi><mi id="S3.SS4.SSS2.p4.7.m2.4.4.3.3" xref="S3.SS4.SSS2.p4.7.m2.4.4.3.3.cmml">A</mi></msubsup><mo id="S3.SS4.SSS2.p4.7.m2.4.4.2" xref="S3.SS4.SSS2.p4.7.m2.4.4.2.cmml">∈</mo><mrow id="S3.SS4.SSS2.p4.7.m2.4.4.1.1" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.2.cmml"><mo stretchy="false" id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.2" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.2.cmml">{</mo><mn id="S3.SS4.SSS2.p4.7.m2.1.1" xref="S3.SS4.SSS2.p4.7.m2.1.1.cmml">0</mn><mo id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.3" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.2.cmml">,</mo><mn id="S3.SS4.SSS2.p4.7.m2.2.2" xref="S3.SS4.SSS2.p4.7.m2.2.2.cmml">1</mn><mo id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.4" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.2.cmml">,</mo><mi mathvariant="normal" id="S3.SS4.SSS2.p4.7.m2.3.3" xref="S3.SS4.SSS2.p4.7.m2.3.3.cmml">…</mi><mo id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.5" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.2.cmml">,</mo><mrow id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.cmml"><mi id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.2" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.2.cmml">b</mi><mo id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.1" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.1.cmml">−</mo><mn id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.3" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.3.cmml">1</mn></mrow><mo stretchy="false" id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.6" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.7.m2.4b"><apply id="S3.SS4.SSS2.p4.7.m2.4.4.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4"><in id="S3.SS4.SSS2.p4.7.m2.4.4.2.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.2"></in><apply id="S3.SS4.SSS2.p4.7.m2.4.4.3.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.3"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.7.m2.4.4.3.1.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.3">superscript</csymbol><apply id="S3.SS4.SSS2.p4.7.m2.4.4.3.2.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.3"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.7.m2.4.4.3.2.1.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.3">subscript</csymbol><ci id="S3.SS4.SSS2.p4.7.m2.4.4.3.2.2.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.3.2.2">𝒒</ci><ci id="S3.SS4.SSS2.p4.7.m2.4.4.3.2.3.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.3.2.3">𝑖</ci></apply><ci id="S3.SS4.SSS2.p4.7.m2.4.4.3.3.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.3.3">𝐴</ci></apply><set id="S3.SS4.SSS2.p4.7.m2.4.4.1.2.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1"><cn type="integer" id="S3.SS4.SSS2.p4.7.m2.1.1.cmml" xref="S3.SS4.SSS2.p4.7.m2.1.1">0</cn><cn type="integer" id="S3.SS4.SSS2.p4.7.m2.2.2.cmml" xref="S3.SS4.SSS2.p4.7.m2.2.2">1</cn><ci id="S3.SS4.SSS2.p4.7.m2.3.3.cmml" xref="S3.SS4.SSS2.p4.7.m2.3.3">…</ci><apply id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1"><minus id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.1.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.1"></minus><ci id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.2.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.2">𝑏</ci><cn type="integer" id="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.3.cmml" xref="S3.SS4.SSS2.p4.7.m2.4.4.1.1.1.3">1</cn></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.7.m2.4c">\bm{q}_{i}^{A}\in\{0,1,\dots,b-1\}</annotation></semantics></math> is the quantized gradient element. <math id="S3.SS4.SSS2.p4.8.m3.1" class="ltx_Math" alttext="s=\frac{2\tau}{b}" display="inline"><semantics id="S3.SS4.SSS2.p4.8.m3.1a"><mrow id="S3.SS4.SSS2.p4.8.m3.1.1" xref="S3.SS4.SSS2.p4.8.m3.1.1.cmml"><mi id="S3.SS4.SSS2.p4.8.m3.1.1.2" xref="S3.SS4.SSS2.p4.8.m3.1.1.2.cmml">s</mi><mo id="S3.SS4.SSS2.p4.8.m3.1.1.1" xref="S3.SS4.SSS2.p4.8.m3.1.1.1.cmml">=</mo><mfrac id="S3.SS4.SSS2.p4.8.m3.1.1.3" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.cmml"><mrow id="S3.SS4.SSS2.p4.8.m3.1.1.3.2" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.2.cmml"><mn id="S3.SS4.SSS2.p4.8.m3.1.1.3.2.2" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.2.2.cmml">2</mn><mo lspace="0em" rspace="0em" id="S3.SS4.SSS2.p4.8.m3.1.1.3.2.1" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.2.1.cmml">​</mo><mi id="S3.SS4.SSS2.p4.8.m3.1.1.3.2.3" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.2.3.cmml">τ</mi></mrow><mi id="S3.SS4.SSS2.p4.8.m3.1.1.3.3" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.3.cmml">b</mi></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.8.m3.1b"><apply id="S3.SS4.SSS2.p4.8.m3.1.1.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1"><eq id="S3.SS4.SSS2.p4.8.m3.1.1.1.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.1"></eq><ci id="S3.SS4.SSS2.p4.8.m3.1.1.2.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.2">𝑠</ci><apply id="S3.SS4.SSS2.p4.8.m3.1.1.3.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.3"><divide id="S3.SS4.SSS2.p4.8.m3.1.1.3.1.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.3"></divide><apply id="S3.SS4.SSS2.p4.8.m3.1.1.3.2.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.2"><times id="S3.SS4.SSS2.p4.8.m3.1.1.3.2.1.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.2.1"></times><cn type="integer" id="S3.SS4.SSS2.p4.8.m3.1.1.3.2.2.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.2.2">2</cn><ci id="S3.SS4.SSS2.p4.8.m3.1.1.3.2.3.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.2.3">𝜏</ci></apply><ci id="S3.SS4.SSS2.p4.8.m3.1.1.3.3.cmml" xref="S3.SS4.SSS2.p4.8.m3.1.1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.8.m3.1c">s=\frac{2\tau}{b}</annotation></semantics></math> is the scaling factor, <math id="S3.SS4.SSS2.p4.9.m4.1" class="ltx_Math" alttext="b=2^{k}" display="inline"><semantics id="S3.SS4.SSS2.p4.9.m4.1a"><mrow id="S3.SS4.SSS2.p4.9.m4.1.1" xref="S3.SS4.SSS2.p4.9.m4.1.1.cmml"><mi id="S3.SS4.SSS2.p4.9.m4.1.1.2" xref="S3.SS4.SSS2.p4.9.m4.1.1.2.cmml">b</mi><mo id="S3.SS4.SSS2.p4.9.m4.1.1.1" xref="S3.SS4.SSS2.p4.9.m4.1.1.1.cmml">=</mo><msup id="S3.SS4.SSS2.p4.9.m4.1.1.3" xref="S3.SS4.SSS2.p4.9.m4.1.1.3.cmml"><mn id="S3.SS4.SSS2.p4.9.m4.1.1.3.2" xref="S3.SS4.SSS2.p4.9.m4.1.1.3.2.cmml">2</mn><mi id="S3.SS4.SSS2.p4.9.m4.1.1.3.3" xref="S3.SS4.SSS2.p4.9.m4.1.1.3.3.cmml">k</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.9.m4.1b"><apply id="S3.SS4.SSS2.p4.9.m4.1.1.cmml" xref="S3.SS4.SSS2.p4.9.m4.1.1"><eq id="S3.SS4.SSS2.p4.9.m4.1.1.1.cmml" xref="S3.SS4.SSS2.p4.9.m4.1.1.1"></eq><ci id="S3.SS4.SSS2.p4.9.m4.1.1.2.cmml" xref="S3.SS4.SSS2.p4.9.m4.1.1.2">𝑏</ci><apply id="S3.SS4.SSS2.p4.9.m4.1.1.3.cmml" xref="S3.SS4.SSS2.p4.9.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p4.9.m4.1.1.3.1.cmml" xref="S3.SS4.SSS2.p4.9.m4.1.1.3">superscript</csymbol><cn type="integer" id="S3.SS4.SSS2.p4.9.m4.1.1.3.2.cmml" xref="S3.SS4.SSS2.p4.9.m4.1.1.3.2">2</cn><ci id="S3.SS4.SSS2.p4.9.m4.1.1.3.3.cmml" xref="S3.SS4.SSS2.p4.9.m4.1.1.3.3">𝑘</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.9.m4.1c">b=2^{k}</annotation></semantics></math> is the number of quantization buckets, <math id="S3.SS4.SSS2.p4.10.m5.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.SSS2.p4.10.m5.1a"><mi id="S3.SS4.SSS2.p4.10.m5.1.1" xref="S3.SS4.SSS2.p4.10.m5.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p4.10.m5.1b"><ci id="S3.SS4.SSS2.p4.10.m5.1.1.cmml" xref="S3.SS4.SSS2.p4.10.m5.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p4.10.m5.1c">k</annotation></semantics></math> is the number of quantization bits.</p>
</div>
<div id="S3.SS4.SSS2.p5" class="ltx_para">
<p id="S3.SS4.SSS2.p5.1" class="ltx_p"><span id="S3.SS4.SSS2.p5.1.1" class="ltx_text ltx_font_italic">Randomized response</span>.
To enable our method can also protect against attacks from untrusted partners, the randomized response method <cite class="ltx_cite ltx_citemacro_citep">(Warner, <a href="#bib.bib44" title="" class="ltx_ref">1965</a>)</cite> is further applied.
This method achieves protection by introducing more uncertainty via randomly flipping or displacing the quantized gradient so that its value can be randomly perturbed.</p>
</div>
<div id="S3.SS4.SSS2.p6" class="ltx_para">
<p id="S3.SS4.SSS2.p6.6" class="ltx_p">Then, to generate random noise, we first generate a random variable following the Bernoulli distribution. It determines whether the data should be noisy:</p>
<table id="A2.EGx5" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S3.E11"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(11)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E11.m1.3" class="ltx_Math" alttext="\displaystyle\bm{c}_{i}^{A}\sim\operatorname{Bernoulli}(p),p=\frac{e^{\epsilon}+1}{e^{\epsilon}+2},q=\frac{1}{e^{\epsilon}+2}," display="inline"><semantics id="S3.E11.m1.3a"><mrow id="S3.E11.m1.3.3.1"><mrow id="S3.E11.m1.3.3.1.1.2" xref="S3.E11.m1.3.3.1.1.3.cmml"><mrow id="S3.E11.m1.3.3.1.1.1.1" xref="S3.E11.m1.3.3.1.1.1.1.cmml"><msubsup id="S3.E11.m1.3.3.1.1.1.1.2" xref="S3.E11.m1.3.3.1.1.1.1.2.cmml"><mi id="S3.E11.m1.3.3.1.1.1.1.2.2.2" xref="S3.E11.m1.3.3.1.1.1.1.2.2.2.cmml">𝒄</mi><mi id="S3.E11.m1.3.3.1.1.1.1.2.2.3" xref="S3.E11.m1.3.3.1.1.1.1.2.2.3.cmml">i</mi><mi id="S3.E11.m1.3.3.1.1.1.1.2.3" xref="S3.E11.m1.3.3.1.1.1.1.2.3.cmml">A</mi></msubsup><mo id="S3.E11.m1.3.3.1.1.1.1.1" xref="S3.E11.m1.3.3.1.1.1.1.1.cmml">∼</mo><mrow id="S3.E11.m1.3.3.1.1.1.1.3.2" xref="S3.E11.m1.3.3.1.1.1.1.3.1.cmml"><mi id="S3.E11.m1.1.1" xref="S3.E11.m1.1.1.cmml">Bernoulli</mi><mo id="S3.E11.m1.3.3.1.1.1.1.3.2a" xref="S3.E11.m1.3.3.1.1.1.1.3.1.cmml">⁡</mo><mrow id="S3.E11.m1.3.3.1.1.1.1.3.2.1" xref="S3.E11.m1.3.3.1.1.1.1.3.1.cmml"><mo stretchy="false" id="S3.E11.m1.3.3.1.1.1.1.3.2.1.1" xref="S3.E11.m1.3.3.1.1.1.1.3.1.cmml">(</mo><mi id="S3.E11.m1.2.2" xref="S3.E11.m1.2.2.cmml">p</mi><mo stretchy="false" id="S3.E11.m1.3.3.1.1.1.1.3.2.1.2" xref="S3.E11.m1.3.3.1.1.1.1.3.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E11.m1.3.3.1.1.2.3" xref="S3.E11.m1.3.3.1.1.3a.cmml">,</mo><mrow id="S3.E11.m1.3.3.1.1.2.2.2" xref="S3.E11.m1.3.3.1.1.2.2.3.cmml"><mrow id="S3.E11.m1.3.3.1.1.2.2.1.1" xref="S3.E11.m1.3.3.1.1.2.2.1.1.cmml"><mi id="S3.E11.m1.3.3.1.1.2.2.1.1.2" xref="S3.E11.m1.3.3.1.1.2.2.1.1.2.cmml">p</mi><mo id="S3.E11.m1.3.3.1.1.2.2.1.1.1" xref="S3.E11.m1.3.3.1.1.2.2.1.1.1.cmml">=</mo><mstyle displaystyle="true" id="S3.E11.m1.3.3.1.1.2.2.1.1.3" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.cmml"><mfrac id="S3.E11.m1.3.3.1.1.2.2.1.1.3a" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.cmml"><mrow id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.cmml"><msup id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.cmml"><mi id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.2" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.2.cmml">e</mi><mi id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.3" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.3.cmml">ϵ</mi></msup><mo id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.1" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.1.cmml">+</mo><mn id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.3" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.3.cmml">1</mn></mrow><mrow id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.cmml"><msup id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.cmml"><mi id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.2" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.2.cmml">e</mi><mi id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.3" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.3.cmml">ϵ</mi></msup><mo id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.1" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.1.cmml">+</mo><mn id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.3" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.3.cmml">2</mn></mrow></mfrac></mstyle></mrow><mo id="S3.E11.m1.3.3.1.1.2.2.2.3" xref="S3.E11.m1.3.3.1.1.2.2.3a.cmml">,</mo><mrow id="S3.E11.m1.3.3.1.1.2.2.2.2" xref="S3.E11.m1.3.3.1.1.2.2.2.2.cmml"><mi id="S3.E11.m1.3.3.1.1.2.2.2.2.2" xref="S3.E11.m1.3.3.1.1.2.2.2.2.2.cmml">q</mi><mo id="S3.E11.m1.3.3.1.1.2.2.2.2.1" xref="S3.E11.m1.3.3.1.1.2.2.2.2.1.cmml">=</mo><mstyle displaystyle="true" id="S3.E11.m1.3.3.1.1.2.2.2.2.3" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.cmml"><mfrac id="S3.E11.m1.3.3.1.1.2.2.2.2.3a" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.cmml"><mn id="S3.E11.m1.3.3.1.1.2.2.2.2.3.2" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.2.cmml">1</mn><mrow id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.cmml"><msup id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.cmml"><mi id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.2" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.2.cmml">e</mi><mi id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.3" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.3.cmml">ϵ</mi></msup><mo id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.1" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.1.cmml">+</mo><mn id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.3" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.3.cmml">2</mn></mrow></mfrac></mstyle></mrow></mrow></mrow><mo id="S3.E11.m1.3.3.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E11.m1.3b"><apply id="S3.E11.m1.3.3.1.1.3.cmml" xref="S3.E11.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S3.E11.m1.3.3.1.1.3a.cmml" xref="S3.E11.m1.3.3.1.1.2.3">formulae-sequence</csymbol><apply id="S3.E11.m1.3.3.1.1.1.1.cmml" xref="S3.E11.m1.3.3.1.1.1.1"><csymbol cd="latexml" id="S3.E11.m1.3.3.1.1.1.1.1.cmml" xref="S3.E11.m1.3.3.1.1.1.1.1">similar-to</csymbol><apply id="S3.E11.m1.3.3.1.1.1.1.2.cmml" xref="S3.E11.m1.3.3.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E11.m1.3.3.1.1.1.1.2.1.cmml" xref="S3.E11.m1.3.3.1.1.1.1.2">superscript</csymbol><apply id="S3.E11.m1.3.3.1.1.1.1.2.2.cmml" xref="S3.E11.m1.3.3.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E11.m1.3.3.1.1.1.1.2.2.1.cmml" xref="S3.E11.m1.3.3.1.1.1.1.2">subscript</csymbol><ci id="S3.E11.m1.3.3.1.1.1.1.2.2.2.cmml" xref="S3.E11.m1.3.3.1.1.1.1.2.2.2">𝒄</ci><ci id="S3.E11.m1.3.3.1.1.1.1.2.2.3.cmml" xref="S3.E11.m1.3.3.1.1.1.1.2.2.3">𝑖</ci></apply><ci id="S3.E11.m1.3.3.1.1.1.1.2.3.cmml" xref="S3.E11.m1.3.3.1.1.1.1.2.3">𝐴</ci></apply><apply id="S3.E11.m1.3.3.1.1.1.1.3.1.cmml" xref="S3.E11.m1.3.3.1.1.1.1.3.2"><ci id="S3.E11.m1.1.1.cmml" xref="S3.E11.m1.1.1">Bernoulli</ci><ci id="S3.E11.m1.2.2.cmml" xref="S3.E11.m1.2.2">𝑝</ci></apply></apply><apply id="S3.E11.m1.3.3.1.1.2.2.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.E11.m1.3.3.1.1.2.2.3a.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.3">formulae-sequence</csymbol><apply id="S3.E11.m1.3.3.1.1.2.2.1.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1"><eq id="S3.E11.m1.3.3.1.1.2.2.1.1.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.1"></eq><ci id="S3.E11.m1.3.3.1.1.2.2.1.1.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.2">𝑝</ci><apply id="S3.E11.m1.3.3.1.1.2.2.1.1.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3"><divide id="S3.E11.m1.3.3.1.1.2.2.1.1.3.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3"></divide><apply id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2"><plus id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.1"></plus><apply id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2"><csymbol cd="ambiguous" id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2">superscript</csymbol><ci id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.2">𝑒</ci><ci id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.2.3">italic-ϵ</ci></apply><cn type="integer" id="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.2.3">1</cn></apply><apply id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3"><plus id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.1"></plus><apply id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2">superscript</csymbol><ci id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.2">𝑒</ci><ci id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.2.3">italic-ϵ</ci></apply><cn type="integer" id="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.1.1.3.3.3">2</cn></apply></apply></apply><apply id="S3.E11.m1.3.3.1.1.2.2.2.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2"><eq id="S3.E11.m1.3.3.1.1.2.2.2.2.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.1"></eq><ci id="S3.E11.m1.3.3.1.1.2.2.2.2.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.2">𝑞</ci><apply id="S3.E11.m1.3.3.1.1.2.2.2.2.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3"><divide id="S3.E11.m1.3.3.1.1.2.2.2.2.3.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3"></divide><cn type="integer" id="S3.E11.m1.3.3.1.1.2.2.2.2.3.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.2">1</cn><apply id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3"><plus id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.1"></plus><apply id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2"><csymbol cd="ambiguous" id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.1.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2">superscript</csymbol><ci id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.2.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.2">𝑒</ci><ci id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.2.3">italic-ϵ</ci></apply><cn type="integer" id="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.3.cmml" xref="S3.E11.m1.3.3.1.1.2.2.2.2.3.3.3">2</cn></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E11.m1.3c">\displaystyle\bm{c}_{i}^{A}\sim\operatorname{Bernoulli}(p),p=\frac{e^{\epsilon}+1}{e^{\epsilon}+2},q=\frac{1}{e^{\epsilon}+2},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS2.p6.4" class="ltx_p">where <math id="S3.SS4.SSS2.p6.1.m1.1" class="ltx_Math" alttext="p" display="inline"><semantics id="S3.SS4.SSS2.p6.1.m1.1a"><mi id="S3.SS4.SSS2.p6.1.m1.1.1" xref="S3.SS4.SSS2.p6.1.m1.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p6.1.m1.1b"><ci id="S3.SS4.SSS2.p6.1.m1.1.1.cmml" xref="S3.SS4.SSS2.p6.1.m1.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p6.1.m1.1c">p</annotation></semantics></math> and <math id="S3.SS4.SSS2.p6.2.m2.1" class="ltx_Math" alttext="q=1-p" display="inline"><semantics id="S3.SS4.SSS2.p6.2.m2.1a"><mrow id="S3.SS4.SSS2.p6.2.m2.1.1" xref="S3.SS4.SSS2.p6.2.m2.1.1.cmml"><mi id="S3.SS4.SSS2.p6.2.m2.1.1.2" xref="S3.SS4.SSS2.p6.2.m2.1.1.2.cmml">q</mi><mo id="S3.SS4.SSS2.p6.2.m2.1.1.1" xref="S3.SS4.SSS2.p6.2.m2.1.1.1.cmml">=</mo><mrow id="S3.SS4.SSS2.p6.2.m2.1.1.3" xref="S3.SS4.SSS2.p6.2.m2.1.1.3.cmml"><mn id="S3.SS4.SSS2.p6.2.m2.1.1.3.2" xref="S3.SS4.SSS2.p6.2.m2.1.1.3.2.cmml">1</mn><mo id="S3.SS4.SSS2.p6.2.m2.1.1.3.1" xref="S3.SS4.SSS2.p6.2.m2.1.1.3.1.cmml">−</mo><mi id="S3.SS4.SSS2.p6.2.m2.1.1.3.3" xref="S3.SS4.SSS2.p6.2.m2.1.1.3.3.cmml">p</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p6.2.m2.1b"><apply id="S3.SS4.SSS2.p6.2.m2.1.1.cmml" xref="S3.SS4.SSS2.p6.2.m2.1.1"><eq id="S3.SS4.SSS2.p6.2.m2.1.1.1.cmml" xref="S3.SS4.SSS2.p6.2.m2.1.1.1"></eq><ci id="S3.SS4.SSS2.p6.2.m2.1.1.2.cmml" xref="S3.SS4.SSS2.p6.2.m2.1.1.2">𝑞</ci><apply id="S3.SS4.SSS2.p6.2.m2.1.1.3.cmml" xref="S3.SS4.SSS2.p6.2.m2.1.1.3"><minus id="S3.SS4.SSS2.p6.2.m2.1.1.3.1.cmml" xref="S3.SS4.SSS2.p6.2.m2.1.1.3.1"></minus><cn type="integer" id="S3.SS4.SSS2.p6.2.m2.1.1.3.2.cmml" xref="S3.SS4.SSS2.p6.2.m2.1.1.3.2">1</cn><ci id="S3.SS4.SSS2.p6.2.m2.1.1.3.3.cmml" xref="S3.SS4.SSS2.p6.2.m2.1.1.3.3">𝑝</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p6.2.m2.1c">q=1-p</annotation></semantics></math> are the probability parameters, <math id="S3.SS4.SSS2.p6.3.m3.1" class="ltx_Math" alttext="\epsilon" display="inline"><semantics id="S3.SS4.SSS2.p6.3.m3.1a"><mi id="S3.SS4.SSS2.p6.3.m3.1.1" xref="S3.SS4.SSS2.p6.3.m3.1.1.cmml">ϵ</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p6.3.m3.1b"><ci id="S3.SS4.SSS2.p6.3.m3.1.1.cmml" xref="S3.SS4.SSS2.p6.3.m3.1.1">italic-ϵ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p6.3.m3.1c">\epsilon</annotation></semantics></math> is the privacy parameter.
Once <math id="S3.SS4.SSS2.p6.4.m4.1" class="ltx_Math" alttext="\bm{c}_{i}^{A}" display="inline"><semantics id="S3.SS4.SSS2.p6.4.m4.1a"><msubsup id="S3.SS4.SSS2.p6.4.m4.1.1" xref="S3.SS4.SSS2.p6.4.m4.1.1.cmml"><mi id="S3.SS4.SSS2.p6.4.m4.1.1.2.2" xref="S3.SS4.SSS2.p6.4.m4.1.1.2.2.cmml">𝒄</mi><mi id="S3.SS4.SSS2.p6.4.m4.1.1.2.3" xref="S3.SS4.SSS2.p6.4.m4.1.1.2.3.cmml">i</mi><mi id="S3.SS4.SSS2.p6.4.m4.1.1.3" xref="S3.SS4.SSS2.p6.4.m4.1.1.3.cmml">A</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p6.4.m4.1b"><apply id="S3.SS4.SSS2.p6.4.m4.1.1.cmml" xref="S3.SS4.SSS2.p6.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p6.4.m4.1.1.1.cmml" xref="S3.SS4.SSS2.p6.4.m4.1.1">superscript</csymbol><apply id="S3.SS4.SSS2.p6.4.m4.1.1.2.cmml" xref="S3.SS4.SSS2.p6.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS2.p6.4.m4.1.1.2.1.cmml" xref="S3.SS4.SSS2.p6.4.m4.1.1">subscript</csymbol><ci id="S3.SS4.SSS2.p6.4.m4.1.1.2.2.cmml" xref="S3.SS4.SSS2.p6.4.m4.1.1.2.2">𝒄</ci><ci id="S3.SS4.SSS2.p6.4.m4.1.1.2.3.cmml" xref="S3.SS4.SSS2.p6.4.m4.1.1.2.3">𝑖</ci></apply><ci id="S3.SS4.SSS2.p6.4.m4.1.1.3.cmml" xref="S3.SS4.SSS2.p6.4.m4.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p6.4.m4.1c">\bm{c}_{i}^{A}</annotation></semantics></math> is obtained, the random noise adding process is defined as:</p>
<table id="S3.E12" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(12)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E12.m1.1" class="ltx_Math" alttext="\bm{r}_{i}^{A}=(\bm{q}_{i}^{A}+\bm{c}_{i}^{A}\cdot\text{noise})\%b," display="block"><semantics id="S3.E12.m1.1a"><mrow id="S3.E12.m1.1.1.1" xref="S3.E12.m1.1.1.1.1.cmml"><mrow id="S3.E12.m1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.cmml"><msubsup id="S3.E12.m1.1.1.1.1.3" xref="S3.E12.m1.1.1.1.1.3.cmml"><mi id="S3.E12.m1.1.1.1.1.3.2.2" xref="S3.E12.m1.1.1.1.1.3.2.2.cmml">𝒓</mi><mi id="S3.E12.m1.1.1.1.1.3.2.3" xref="S3.E12.m1.1.1.1.1.3.2.3.cmml">i</mi><mi id="S3.E12.m1.1.1.1.1.3.3" xref="S3.E12.m1.1.1.1.1.3.3.cmml">A</mi></msubsup><mo id="S3.E12.m1.1.1.1.1.2" xref="S3.E12.m1.1.1.1.1.2.cmml">=</mo><mrow id="S3.E12.m1.1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.1.cmml"><mrow id="S3.E12.m1.1.1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.1.1.cmml"><mrow id="S3.E12.m1.1.1.1.1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E12.m1.1.1.1.1.1.1.1.1.2" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E12.m1.1.1.1.1.1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.cmml"><msubsup id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.2" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.2.cmml">𝒒</mi><mi id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.3" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.3.cmml">i</mi><mi id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.3.cmml">A</mi></msubsup><mo id="S3.E12.m1.1.1.1.1.1.1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.1.cmml">+</mo><mrow id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.cmml"><msubsup id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.cmml"><mi id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.2" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.2.cmml">𝒄</mi><mi id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.3" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.3.cmml">i</mi><mi id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.3" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.3.cmml">A</mi></msubsup><mo lspace="0.222em" rspace="0.222em" id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.1" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.1.cmml">⋅</mo><mtext id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.3a.cmml">noise</mtext></mrow></mrow><mo stretchy="false" id="S3.E12.m1.1.1.1.1.1.1.1.1.3" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="S3.E12.m1.1.1.1.1.1.1.2" xref="S3.E12.m1.1.1.1.1.1.1.2.cmml">%</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E12.m1.1.1.1.1.1.2" xref="S3.E12.m1.1.1.1.1.1.2.cmml">​</mo><mi id="S3.E12.m1.1.1.1.1.1.3" xref="S3.E12.m1.1.1.1.1.1.3.cmml">b</mi></mrow></mrow><mo id="S3.E12.m1.1.1.1.2" xref="S3.E12.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E12.m1.1b"><apply id="S3.E12.m1.1.1.1.1.cmml" xref="S3.E12.m1.1.1.1"><eq id="S3.E12.m1.1.1.1.1.2.cmml" xref="S3.E12.m1.1.1.1.1.2"></eq><apply id="S3.E12.m1.1.1.1.1.3.cmml" xref="S3.E12.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E12.m1.1.1.1.1.3.1.cmml" xref="S3.E12.m1.1.1.1.1.3">superscript</csymbol><apply id="S3.E12.m1.1.1.1.1.3.2.cmml" xref="S3.E12.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E12.m1.1.1.1.1.3.2.1.cmml" xref="S3.E12.m1.1.1.1.1.3">subscript</csymbol><ci id="S3.E12.m1.1.1.1.1.3.2.2.cmml" xref="S3.E12.m1.1.1.1.1.3.2.2">𝒓</ci><ci id="S3.E12.m1.1.1.1.1.3.2.3.cmml" xref="S3.E12.m1.1.1.1.1.3.2.3">𝑖</ci></apply><ci id="S3.E12.m1.1.1.1.1.3.3.cmml" xref="S3.E12.m1.1.1.1.1.3.3">𝐴</ci></apply><apply id="S3.E12.m1.1.1.1.1.1.cmml" xref="S3.E12.m1.1.1.1.1.1"><times id="S3.E12.m1.1.1.1.1.1.2.cmml" xref="S3.E12.m1.1.1.1.1.1.2"></times><apply id="S3.E12.m1.1.1.1.1.1.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E12.m1.1.1.1.1.1.1.2.cmml" xref="S3.E12.m1.1.1.1.1.1.1.2">percent</csymbol><apply id="S3.E12.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1"><plus id="S3.E12.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.1"></plus><apply id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2">superscript</csymbol><apply id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.2">𝒒</ci><ci id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.3.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.2.3">𝑖</ci></apply><ci id="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.2.3">𝐴</ci></apply><apply id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3"><ci id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.1">⋅</ci><apply id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2">superscript</csymbol><apply id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.1.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.2.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.2">𝒄</ci><ci id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.3.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.2.3">𝑖</ci></apply><ci id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.3.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.2.3">𝐴</ci></apply><ci id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.3a.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.3"><mtext id="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E12.m1.1.1.1.1.1.1.1.1.1.3.3">noise</mtext></ci></apply></apply></apply><ci id="S3.E12.m1.1.1.1.1.1.3.cmml" xref="S3.E12.m1.1.1.1.1.1.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E12.m1.1c">\bm{r}_{i}^{A}=(\bm{q}_{i}^{A}+\bm{c}_{i}^{A}\cdot\text{noise})\%b,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS2.p6.5" class="ltx_p">where <math id="S3.SS4.SSS2.p6.5.m1.3" class="ltx_Math" alttext="\text{noise}\sim\operatorname{Uniform}(0,b)" display="inline"><semantics id="S3.SS4.SSS2.p6.5.m1.3a"><mrow id="S3.SS4.SSS2.p6.5.m1.3.4" xref="S3.SS4.SSS2.p6.5.m1.3.4.cmml"><mtext id="S3.SS4.SSS2.p6.5.m1.3.4.2" xref="S3.SS4.SSS2.p6.5.m1.3.4.2a.cmml">noise</mtext><mo id="S3.SS4.SSS2.p6.5.m1.3.4.1" xref="S3.SS4.SSS2.p6.5.m1.3.4.1.cmml">∼</mo><mrow id="S3.SS4.SSS2.p6.5.m1.3.4.3.2" xref="S3.SS4.SSS2.p6.5.m1.3.4.3.1.cmml"><mi id="S3.SS4.SSS2.p6.5.m1.1.1" xref="S3.SS4.SSS2.p6.5.m1.1.1.cmml">Uniform</mi><mo id="S3.SS4.SSS2.p6.5.m1.3.4.3.2a" xref="S3.SS4.SSS2.p6.5.m1.3.4.3.1.cmml">⁡</mo><mrow id="S3.SS4.SSS2.p6.5.m1.3.4.3.2.1" xref="S3.SS4.SSS2.p6.5.m1.3.4.3.1.cmml"><mo stretchy="false" id="S3.SS4.SSS2.p6.5.m1.3.4.3.2.1.1" xref="S3.SS4.SSS2.p6.5.m1.3.4.3.1.cmml">(</mo><mn id="S3.SS4.SSS2.p6.5.m1.2.2" xref="S3.SS4.SSS2.p6.5.m1.2.2.cmml">0</mn><mo id="S3.SS4.SSS2.p6.5.m1.3.4.3.2.1.2" xref="S3.SS4.SSS2.p6.5.m1.3.4.3.1.cmml">,</mo><mi id="S3.SS4.SSS2.p6.5.m1.3.3" xref="S3.SS4.SSS2.p6.5.m1.3.3.cmml">b</mi><mo stretchy="false" id="S3.SS4.SSS2.p6.5.m1.3.4.3.2.1.3" xref="S3.SS4.SSS2.p6.5.m1.3.4.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS2.p6.5.m1.3b"><apply id="S3.SS4.SSS2.p6.5.m1.3.4.cmml" xref="S3.SS4.SSS2.p6.5.m1.3.4"><csymbol cd="latexml" id="S3.SS4.SSS2.p6.5.m1.3.4.1.cmml" xref="S3.SS4.SSS2.p6.5.m1.3.4.1">similar-to</csymbol><ci id="S3.SS4.SSS2.p6.5.m1.3.4.2a.cmml" xref="S3.SS4.SSS2.p6.5.m1.3.4.2"><mtext id="S3.SS4.SSS2.p6.5.m1.3.4.2.cmml" xref="S3.SS4.SSS2.p6.5.m1.3.4.2">noise</mtext></ci><apply id="S3.SS4.SSS2.p6.5.m1.3.4.3.1.cmml" xref="S3.SS4.SSS2.p6.5.m1.3.4.3.2"><ci id="S3.SS4.SSS2.p6.5.m1.1.1.cmml" xref="S3.SS4.SSS2.p6.5.m1.1.1">Uniform</ci><cn type="integer" id="S3.SS4.SSS2.p6.5.m1.2.2.cmml" xref="S3.SS4.SSS2.p6.5.m1.2.2">0</cn><ci id="S3.SS4.SSS2.p6.5.m1.3.3.cmml" xref="S3.SS4.SSS2.p6.5.m1.3.3">𝑏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS2.p6.5.m1.3c">\text{noise}\sim\operatorname{Uniform}(0,b)</annotation></semantics></math> is the random noise that follows an Uniform distribution.</p>
</div>
</section>
<section id="S3.SS4.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.3. </span>Gradient Aggregation and Synchronization</h4>

<div id="S3.SS4.SSS3.p1" class="ltx_para">
<p id="S3.SS4.SSS3.p1.1" class="ltx_p">To learn the global <span id="S3.SS4.SSS3.p1.1.1" class="ltx_text ltx_font_italic">code embedding table</span> from distributed clients, the gradient aggregation operation is then applied on the server side.
However, due to the encryption method, the aggregated gradients may encompass inherent uncertainties and deviation.
Therefore, the server needs to undertake further rectification, decode, and reconcile steps on the encrypted gradients.</p>
</div>
<div id="S3.SS4.SSS3.p2" class="ltx_para">
<p id="S3.SS4.SSS3.p2.14" class="ltx_p">To ensure each element in the gradient can be processed in the same way, we start by flattening the gradients from both clients, followed by a concatenation operation:</p>
<table id="S3.E13" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(13)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E13.m1.3" class="ltx_Math" alttext="\bm{r}=\operatorname{flatten}(\bm{r}^{A})\oplus\operatorname{flatten}(\bm{r}^{B})," display="block"><semantics id="S3.E13.m1.3a"><mrow id="S3.E13.m1.3.3.1" xref="S3.E13.m1.3.3.1.1.cmml"><mrow id="S3.E13.m1.3.3.1.1" xref="S3.E13.m1.3.3.1.1.cmml"><mi id="S3.E13.m1.3.3.1.1.4" xref="S3.E13.m1.3.3.1.1.4.cmml">𝒓</mi><mo id="S3.E13.m1.3.3.1.1.3" xref="S3.E13.m1.3.3.1.1.3.cmml">=</mo><mrow id="S3.E13.m1.3.3.1.1.2" xref="S3.E13.m1.3.3.1.1.2.cmml"><mrow id="S3.E13.m1.3.3.1.1.1.1.1" xref="S3.E13.m1.3.3.1.1.1.1.2.cmml"><mi id="S3.E13.m1.1.1" xref="S3.E13.m1.1.1.cmml">flatten</mi><mo id="S3.E13.m1.3.3.1.1.1.1.1a" xref="S3.E13.m1.3.3.1.1.1.1.2.cmml">⁡</mo><mrow id="S3.E13.m1.3.3.1.1.1.1.1.1" xref="S3.E13.m1.3.3.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E13.m1.3.3.1.1.1.1.1.1.2" xref="S3.E13.m1.3.3.1.1.1.1.2.cmml">(</mo><msup id="S3.E13.m1.3.3.1.1.1.1.1.1.1" xref="S3.E13.m1.3.3.1.1.1.1.1.1.1.cmml"><mi id="S3.E13.m1.3.3.1.1.1.1.1.1.1.2" xref="S3.E13.m1.3.3.1.1.1.1.1.1.1.2.cmml">𝒓</mi><mi id="S3.E13.m1.3.3.1.1.1.1.1.1.1.3" xref="S3.E13.m1.3.3.1.1.1.1.1.1.1.3.cmml">A</mi></msup><mo stretchy="false" id="S3.E13.m1.3.3.1.1.1.1.1.1.3" xref="S3.E13.m1.3.3.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.E13.m1.3.3.1.1.2.3" xref="S3.E13.m1.3.3.1.1.2.3.cmml">⊕</mo><mrow id="S3.E13.m1.3.3.1.1.2.2.1" xref="S3.E13.m1.3.3.1.1.2.2.2.cmml"><mi id="S3.E13.m1.2.2" xref="S3.E13.m1.2.2.cmml">flatten</mi><mo id="S3.E13.m1.3.3.1.1.2.2.1a" xref="S3.E13.m1.3.3.1.1.2.2.2.cmml">⁡</mo><mrow id="S3.E13.m1.3.3.1.1.2.2.1.1" xref="S3.E13.m1.3.3.1.1.2.2.2.cmml"><mo stretchy="false" id="S3.E13.m1.3.3.1.1.2.2.1.1.2" xref="S3.E13.m1.3.3.1.1.2.2.2.cmml">(</mo><msup id="S3.E13.m1.3.3.1.1.2.2.1.1.1" xref="S3.E13.m1.3.3.1.1.2.2.1.1.1.cmml"><mi id="S3.E13.m1.3.3.1.1.2.2.1.1.1.2" xref="S3.E13.m1.3.3.1.1.2.2.1.1.1.2.cmml">𝒓</mi><mi id="S3.E13.m1.3.3.1.1.2.2.1.1.1.3" xref="S3.E13.m1.3.3.1.1.2.2.1.1.1.3.cmml">B</mi></msup><mo stretchy="false" id="S3.E13.m1.3.3.1.1.2.2.1.1.3" xref="S3.E13.m1.3.3.1.1.2.2.2.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S3.E13.m1.3.3.1.2" xref="S3.E13.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E13.m1.3b"><apply id="S3.E13.m1.3.3.1.1.cmml" xref="S3.E13.m1.3.3.1"><eq id="S3.E13.m1.3.3.1.1.3.cmml" xref="S3.E13.m1.3.3.1.1.3"></eq><ci id="S3.E13.m1.3.3.1.1.4.cmml" xref="S3.E13.m1.3.3.1.1.4">𝒓</ci><apply id="S3.E13.m1.3.3.1.1.2.cmml" xref="S3.E13.m1.3.3.1.1.2"><csymbol cd="latexml" id="S3.E13.m1.3.3.1.1.2.3.cmml" xref="S3.E13.m1.3.3.1.1.2.3">direct-sum</csymbol><apply id="S3.E13.m1.3.3.1.1.1.1.2.cmml" xref="S3.E13.m1.3.3.1.1.1.1.1"><ci id="S3.E13.m1.1.1.cmml" xref="S3.E13.m1.1.1">flatten</ci><apply id="S3.E13.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E13.m1.3.3.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E13.m1.3.3.1.1.1.1.1.1.1.1.cmml" xref="S3.E13.m1.3.3.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E13.m1.3.3.1.1.1.1.1.1.1.2.cmml" xref="S3.E13.m1.3.3.1.1.1.1.1.1.1.2">𝒓</ci><ci id="S3.E13.m1.3.3.1.1.1.1.1.1.1.3.cmml" xref="S3.E13.m1.3.3.1.1.1.1.1.1.1.3">𝐴</ci></apply></apply><apply id="S3.E13.m1.3.3.1.1.2.2.2.cmml" xref="S3.E13.m1.3.3.1.1.2.2.1"><ci id="S3.E13.m1.2.2.cmml" xref="S3.E13.m1.2.2">flatten</ci><apply id="S3.E13.m1.3.3.1.1.2.2.1.1.1.cmml" xref="S3.E13.m1.3.3.1.1.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.E13.m1.3.3.1.1.2.2.1.1.1.1.cmml" xref="S3.E13.m1.3.3.1.1.2.2.1.1.1">superscript</csymbol><ci id="S3.E13.m1.3.3.1.1.2.2.1.1.1.2.cmml" xref="S3.E13.m1.3.3.1.1.2.2.1.1.1.2">𝒓</ci><ci id="S3.E13.m1.3.3.1.1.2.2.1.1.1.3.cmml" xref="S3.E13.m1.3.3.1.1.2.2.1.1.1.3">𝐵</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E13.m1.3c">\bm{r}=\operatorname{flatten}(\bm{r}^{A})\oplus\operatorname{flatten}(\bm{r}^{B}),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS3.p2.9" class="ltx_p">where <math id="S3.SS4.SSS3.p2.1.m1.1" class="ltx_Math" alttext="\bm{r}\in\mathbb{R}^{{n_{c}}\times{d_{f}}}" display="inline"><semantics id="S3.SS4.SSS3.p2.1.m1.1a"><mrow id="S3.SS4.SSS3.p2.1.m1.1.1" xref="S3.SS4.SSS3.p2.1.m1.1.1.cmml"><mi id="S3.SS4.SSS3.p2.1.m1.1.1.2" xref="S3.SS4.SSS3.p2.1.m1.1.1.2.cmml">𝒓</mi><mo id="S3.SS4.SSS3.p2.1.m1.1.1.1" xref="S3.SS4.SSS3.p2.1.m1.1.1.1.cmml">∈</mo><msup id="S3.SS4.SSS3.p2.1.m1.1.1.3" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.cmml"><mi id="S3.SS4.SSS3.p2.1.m1.1.1.3.2" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS4.SSS3.p2.1.m1.1.1.3.3" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.cmml"><msub id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.cmml"><mi id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.2" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.2.cmml">n</mi><mi id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.3" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.3.cmml">c</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.1" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.1.cmml">×</mo><msub id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.cmml"><mi id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.2" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.2.cmml">d</mi><mi id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.3" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.3.cmml">f</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.1.m1.1b"><apply id="S3.SS4.SSS3.p2.1.m1.1.1.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1"><in id="S3.SS4.SSS3.p2.1.m1.1.1.1.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.1"></in><ci id="S3.SS4.SSS3.p2.1.m1.1.1.2.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.2">𝒓</ci><apply id="S3.SS4.SSS3.p2.1.m1.1.1.3.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.1.m1.1.1.3.1.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3">superscript</csymbol><ci id="S3.SS4.SSS3.p2.1.m1.1.1.3.2.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.2">ℝ</ci><apply id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3"><times id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.1.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.1"></times><apply id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.1.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2">subscript</csymbol><ci id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.2.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.2">𝑛</ci><ci id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.3.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.2.3">𝑐</ci></apply><apply id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.1.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3">subscript</csymbol><ci id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.2.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.2">𝑑</ci><ci id="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.3.cmml" xref="S3.SS4.SSS3.p2.1.m1.1.1.3.3.3.3">𝑓</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.1.m1.1c">\bm{r}\in\mathbb{R}^{{n_{c}}\times{d_{f}}}</annotation></semantics></math> is the flattened gradient, <math id="S3.SS4.SSS3.p2.2.m2.1" class="ltx_Math" alttext="n_{c}" display="inline"><semantics id="S3.SS4.SSS3.p2.2.m2.1a"><msub id="S3.SS4.SSS3.p2.2.m2.1.1" xref="S3.SS4.SSS3.p2.2.m2.1.1.cmml"><mi id="S3.SS4.SSS3.p2.2.m2.1.1.2" xref="S3.SS4.SSS3.p2.2.m2.1.1.2.cmml">n</mi><mi id="S3.SS4.SSS3.p2.2.m2.1.1.3" xref="S3.SS4.SSS3.p2.2.m2.1.1.3.cmml">c</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.2.m2.1b"><apply id="S3.SS4.SSS3.p2.2.m2.1.1.cmml" xref="S3.SS4.SSS3.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.2.m2.1.1.1.cmml" xref="S3.SS4.SSS3.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS4.SSS3.p2.2.m2.1.1.2.cmml" xref="S3.SS4.SSS3.p2.2.m2.1.1.2">𝑛</ci><ci id="S3.SS4.SSS3.p2.2.m2.1.1.3.cmml" xref="S3.SS4.SSS3.p2.2.m2.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.2.m2.1c">n_{c}</annotation></semantics></math> is the client number, <math id="S3.SS4.SSS3.p2.3.m3.1" class="ltx_Math" alttext="d_{f}=M_{c}\times d_{V}" display="inline"><semantics id="S3.SS4.SSS3.p2.3.m3.1a"><mrow id="S3.SS4.SSS3.p2.3.m3.1.1" xref="S3.SS4.SSS3.p2.3.m3.1.1.cmml"><msub id="S3.SS4.SSS3.p2.3.m3.1.1.2" xref="S3.SS4.SSS3.p2.3.m3.1.1.2.cmml"><mi id="S3.SS4.SSS3.p2.3.m3.1.1.2.2" xref="S3.SS4.SSS3.p2.3.m3.1.1.2.2.cmml">d</mi><mi id="S3.SS4.SSS3.p2.3.m3.1.1.2.3" xref="S3.SS4.SSS3.p2.3.m3.1.1.2.3.cmml">f</mi></msub><mo id="S3.SS4.SSS3.p2.3.m3.1.1.1" xref="S3.SS4.SSS3.p2.3.m3.1.1.1.cmml">=</mo><mrow id="S3.SS4.SSS3.p2.3.m3.1.1.3" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.cmml"><msub id="S3.SS4.SSS3.p2.3.m3.1.1.3.2" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.2.cmml"><mi id="S3.SS4.SSS3.p2.3.m3.1.1.3.2.2" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.2.2.cmml">M</mi><mi id="S3.SS4.SSS3.p2.3.m3.1.1.3.2.3" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.2.3.cmml">c</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS4.SSS3.p2.3.m3.1.1.3.1" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.1.cmml">×</mo><msub id="S3.SS4.SSS3.p2.3.m3.1.1.3.3" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.3.cmml"><mi id="S3.SS4.SSS3.p2.3.m3.1.1.3.3.2" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.3.2.cmml">d</mi><mi id="S3.SS4.SSS3.p2.3.m3.1.1.3.3.3" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.3.3.cmml">V</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.3.m3.1b"><apply id="S3.SS4.SSS3.p2.3.m3.1.1.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1"><eq id="S3.SS4.SSS3.p2.3.m3.1.1.1.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.1"></eq><apply id="S3.SS4.SSS3.p2.3.m3.1.1.2.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.3.m3.1.1.2.1.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.2">subscript</csymbol><ci id="S3.SS4.SSS3.p2.3.m3.1.1.2.2.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.2.2">𝑑</ci><ci id="S3.SS4.SSS3.p2.3.m3.1.1.2.3.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.2.3">𝑓</ci></apply><apply id="S3.SS4.SSS3.p2.3.m3.1.1.3.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3"><times id="S3.SS4.SSS3.p2.3.m3.1.1.3.1.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.1"></times><apply id="S3.SS4.SSS3.p2.3.m3.1.1.3.2.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.3.m3.1.1.3.2.1.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.2">subscript</csymbol><ci id="S3.SS4.SSS3.p2.3.m3.1.1.3.2.2.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.2.2">𝑀</ci><ci id="S3.SS4.SSS3.p2.3.m3.1.1.3.2.3.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.2.3">𝑐</ci></apply><apply id="S3.SS4.SSS3.p2.3.m3.1.1.3.3.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.3.m3.1.1.3.3.1.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.3">subscript</csymbol><ci id="S3.SS4.SSS3.p2.3.m3.1.1.3.3.2.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.3.2">𝑑</ci><ci id="S3.SS4.SSS3.p2.3.m3.1.1.3.3.3.cmml" xref="S3.SS4.SSS3.p2.3.m3.1.1.3.3.3">𝑉</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.3.m3.1c">d_{f}=M_{c}\times d_{V}</annotation></semantics></math> is the dimension of <math id="S3.SS4.SSS3.p2.4.m4.1" class="ltx_Math" alttext="\bm{r}" display="inline"><semantics id="S3.SS4.SSS3.p2.4.m4.1a"><mi id="S3.SS4.SSS3.p2.4.m4.1.1" xref="S3.SS4.SSS3.p2.4.m4.1.1.cmml">𝒓</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.4.m4.1b"><ci id="S3.SS4.SSS3.p2.4.m4.1.1.cmml" xref="S3.SS4.SSS3.p2.4.m4.1.1">𝒓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.4.m4.1c">\bm{r}</annotation></semantics></math>, <math id="S3.SS4.SSS3.p2.5.m5.1" class="ltx_Math" alttext="\oplus" display="inline"><semantics id="S3.SS4.SSS3.p2.5.m5.1a"><mo id="S3.SS4.SSS3.p2.5.m5.1.1" xref="S3.SS4.SSS3.p2.5.m5.1.1.cmml">⊕</mo><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.5.m5.1b"><csymbol cd="latexml" id="S3.SS4.SSS3.p2.5.m5.1.1.cmml" xref="S3.SS4.SSS3.p2.5.m5.1.1">direct-sum</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.5.m5.1c">\oplus</annotation></semantics></math> denotes the concatenation operation. <math id="S3.SS4.SSS3.p2.6.m6.4" class="ltx_Math" alttext="\bm{r}^{A}=\{\bm{r}_{1}^{A},\bm{r}_{2}^{A},\ldots,\bm{r}_{M_{A}}^{A}\}" display="inline"><semantics id="S3.SS4.SSS3.p2.6.m6.4a"><mrow id="S3.SS4.SSS3.p2.6.m6.4.4" xref="S3.SS4.SSS3.p2.6.m6.4.4.cmml"><msup id="S3.SS4.SSS3.p2.6.m6.4.4.5" xref="S3.SS4.SSS3.p2.6.m6.4.4.5.cmml"><mi id="S3.SS4.SSS3.p2.6.m6.4.4.5.2" xref="S3.SS4.SSS3.p2.6.m6.4.4.5.2.cmml">𝒓</mi><mi id="S3.SS4.SSS3.p2.6.m6.4.4.5.3" xref="S3.SS4.SSS3.p2.6.m6.4.4.5.3.cmml">A</mi></msup><mo id="S3.SS4.SSS3.p2.6.m6.4.4.4" xref="S3.SS4.SSS3.p2.6.m6.4.4.4.cmml">=</mo><mrow id="S3.SS4.SSS3.p2.6.m6.4.4.3.3" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.4.cmml"><mo stretchy="false" id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.4" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.4.cmml">{</mo><msubsup id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.cmml"><mi id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.2" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.2.cmml">𝒓</mi><mn id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.3" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.3.cmml">1</mn><mi id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.3" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.3.cmml">A</mi></msubsup><mo id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.5" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.4.cmml">,</mo><msubsup id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.cmml"><mi id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.2" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.2.cmml">𝒓</mi><mn id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.3" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.3.cmml">2</mn><mi id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.3" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.3.cmml">A</mi></msubsup><mo id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.6" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS4.SSS3.p2.6.m6.1.1" xref="S3.SS4.SSS3.p2.6.m6.1.1.cmml">…</mi><mo id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.7" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.4.cmml">,</mo><msubsup id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.cmml"><mi id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.2" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.2.cmml">𝒓</mi><msub id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.cmml"><mi id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.2" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.2.cmml">M</mi><mi id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.3" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.3.cmml">A</mi></msub><mi id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.3" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.3.cmml">A</mi></msubsup><mo stretchy="false" id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.8" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.6.m6.4b"><apply id="S3.SS4.SSS3.p2.6.m6.4.4.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4"><eq id="S3.SS4.SSS3.p2.6.m6.4.4.4.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.4"></eq><apply id="S3.SS4.SSS3.p2.6.m6.4.4.5.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.5"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.6.m6.4.4.5.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.5">superscript</csymbol><ci id="S3.SS4.SSS3.p2.6.m6.4.4.5.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.5.2">𝒓</ci><ci id="S3.SS4.SSS3.p2.6.m6.4.4.5.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.5.3">𝐴</ci></apply><set id="S3.SS4.SSS3.p2.6.m6.4.4.3.4.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3"><apply id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1">superscript</csymbol><apply id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1">subscript</csymbol><ci id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.2">𝒓</ci><cn type="integer" id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.2.3">1</cn></apply><ci id="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.2.2.1.1.1.3">𝐴</ci></apply><apply id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2">superscript</csymbol><apply id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2">subscript</csymbol><ci id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.2">𝒓</ci><cn type="integer" id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.2.3">2</cn></apply><ci id="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.3.3.2.2.2.3">𝐴</ci></apply><ci id="S3.SS4.SSS3.p2.6.m6.1.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.1.1">…</ci><apply id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3">superscript</csymbol><apply id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3">subscript</csymbol><ci id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.2">𝒓</ci><apply id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.1.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3">subscript</csymbol><ci id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.2.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.2">𝑀</ci><ci id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.2.3.3">𝐴</ci></apply></apply><ci id="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.3.cmml" xref="S3.SS4.SSS3.p2.6.m6.4.4.3.3.3.3">𝐴</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.6.m6.4c">\bm{r}^{A}=\{\bm{r}_{1}^{A},\bm{r}_{2}^{A},\ldots,\bm{r}_{M_{A}}^{A}\}</annotation></semantics></math> and <math id="S3.SS4.SSS3.p2.7.m7.4" class="ltx_Math" alttext="\bm{r}^{B}=\{\bm{r}_{1}^{B},\bm{r}_{2}^{B},\ldots,\bm{r}_{M_{B}}^{B}\}" display="inline"><semantics id="S3.SS4.SSS3.p2.7.m7.4a"><mrow id="S3.SS4.SSS3.p2.7.m7.4.4" xref="S3.SS4.SSS3.p2.7.m7.4.4.cmml"><msup id="S3.SS4.SSS3.p2.7.m7.4.4.5" xref="S3.SS4.SSS3.p2.7.m7.4.4.5.cmml"><mi id="S3.SS4.SSS3.p2.7.m7.4.4.5.2" xref="S3.SS4.SSS3.p2.7.m7.4.4.5.2.cmml">𝒓</mi><mi id="S3.SS4.SSS3.p2.7.m7.4.4.5.3" xref="S3.SS4.SSS3.p2.7.m7.4.4.5.3.cmml">B</mi></msup><mo id="S3.SS4.SSS3.p2.7.m7.4.4.4" xref="S3.SS4.SSS3.p2.7.m7.4.4.4.cmml">=</mo><mrow id="S3.SS4.SSS3.p2.7.m7.4.4.3.3" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.4.cmml"><mo stretchy="false" id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.4" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.4.cmml">{</mo><msubsup id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.cmml"><mi id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.2" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.2.cmml">𝒓</mi><mn id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.3" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.3.cmml">1</mn><mi id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.3" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.3.cmml">B</mi></msubsup><mo id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.5" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.4.cmml">,</mo><msubsup id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.cmml"><mi id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.2" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.2.cmml">𝒓</mi><mn id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.3" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.3.cmml">2</mn><mi id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.3" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.3.cmml">B</mi></msubsup><mo id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.6" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.4.cmml">,</mo><mi mathvariant="normal" id="S3.SS4.SSS3.p2.7.m7.1.1" xref="S3.SS4.SSS3.p2.7.m7.1.1.cmml">…</mi><mo id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.7" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.4.cmml">,</mo><msubsup id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.cmml"><mi id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.2" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.2.cmml">𝒓</mi><msub id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.cmml"><mi id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.2" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.2.cmml">M</mi><mi id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.3" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.3.cmml">B</mi></msub><mi id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.3" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.3.cmml">B</mi></msubsup><mo stretchy="false" id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.8" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.7.m7.4b"><apply id="S3.SS4.SSS3.p2.7.m7.4.4.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4"><eq id="S3.SS4.SSS3.p2.7.m7.4.4.4.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.4"></eq><apply id="S3.SS4.SSS3.p2.7.m7.4.4.5.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.5"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.7.m7.4.4.5.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.5">superscript</csymbol><ci id="S3.SS4.SSS3.p2.7.m7.4.4.5.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.5.2">𝒓</ci><ci id="S3.SS4.SSS3.p2.7.m7.4.4.5.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.5.3">𝐵</ci></apply><set id="S3.SS4.SSS3.p2.7.m7.4.4.3.4.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3"><apply id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1">superscript</csymbol><apply id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1">subscript</csymbol><ci id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.2">𝒓</ci><cn type="integer" id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.2.3">1</cn></apply><ci id="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.2.2.1.1.1.3">𝐵</ci></apply><apply id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2">superscript</csymbol><apply id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2">subscript</csymbol><ci id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.2">𝒓</ci><cn type="integer" id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.2.3">2</cn></apply><ci id="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.3.3.2.2.2.3">𝐵</ci></apply><ci id="S3.SS4.SSS3.p2.7.m7.1.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.1.1">…</ci><apply id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3">superscript</csymbol><apply id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3">subscript</csymbol><ci id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.2">𝒓</ci><apply id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.1.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3">subscript</csymbol><ci id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.2.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.2">𝑀</ci><ci id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.2.3.3">𝐵</ci></apply></apply><ci id="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.3.cmml" xref="S3.SS4.SSS3.p2.7.m7.4.4.3.3.3.3">𝐵</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.7.m7.4c">\bm{r}^{B}=\{\bm{r}_{1}^{B},\bm{r}_{2}^{B},\ldots,\bm{r}_{M_{B}}^{B}\}</annotation></semantics></math> are the gradients of <math id="S3.SS4.SSS3.p2.8.m8.1" class="ltx_Math" alttext="\bm{E}" display="inline"><semantics id="S3.SS4.SSS3.p2.8.m8.1a"><mi id="S3.SS4.SSS3.p2.8.m8.1.1" xref="S3.SS4.SSS3.p2.8.m8.1.1.cmml">𝑬</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.8.m8.1b"><ci id="S3.SS4.SSS3.p2.8.m8.1.1.cmml" xref="S3.SS4.SSS3.p2.8.m8.1.1">𝑬</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.8.m8.1c">\bm{E}</annotation></semantics></math> in clients A and B, respectively.
Subsequently,
to perform scaling and normalization operations during the denoising and recovery process of the gradients,
we construct a constant matrix <math id="S3.SS4.SSS3.p2.9.m9.1" class="ltx_Math" alttext="\bm{E}^{c}" display="inline"><semantics id="S3.SS4.SSS3.p2.9.m9.1a"><msup id="S3.SS4.SSS3.p2.9.m9.1.1" xref="S3.SS4.SSS3.p2.9.m9.1.1.cmml"><mi id="S3.SS4.SSS3.p2.9.m9.1.1.2" xref="S3.SS4.SSS3.p2.9.m9.1.1.2.cmml">𝑬</mi><mi id="S3.SS4.SSS3.p2.9.m9.1.1.3" xref="S3.SS4.SSS3.p2.9.m9.1.1.3.cmml">c</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.9.m9.1b"><apply id="S3.SS4.SSS3.p2.9.m9.1.1.cmml" xref="S3.SS4.SSS3.p2.9.m9.1.1"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.9.m9.1.1.1.cmml" xref="S3.SS4.SSS3.p2.9.m9.1.1">superscript</csymbol><ci id="S3.SS4.SSS3.p2.9.m9.1.1.2.cmml" xref="S3.SS4.SSS3.p2.9.m9.1.1.2">𝑬</ci><ci id="S3.SS4.SSS3.p2.9.m9.1.1.3.cmml" xref="S3.SS4.SSS3.p2.9.m9.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.9.m9.1c">\bm{E}^{c}</annotation></semantics></math> as follows:</p>
<table id="S3.E14" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(14)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E14.m1.1" class="ltx_Math" alttext="\bm{E}^{c}=[(p-q)]_{i=1}^{{n_{c}}\times{d_{f}}}," display="block"><semantics id="S3.E14.m1.1a"><mrow id="S3.E14.m1.1.1.1" xref="S3.E14.m1.1.1.1.1.cmml"><mrow id="S3.E14.m1.1.1.1.1" xref="S3.E14.m1.1.1.1.1.cmml"><msup id="S3.E14.m1.1.1.1.1.3" xref="S3.E14.m1.1.1.1.1.3.cmml"><mi id="S3.E14.m1.1.1.1.1.3.2" xref="S3.E14.m1.1.1.1.1.3.2.cmml">𝑬</mi><mi id="S3.E14.m1.1.1.1.1.3.3" xref="S3.E14.m1.1.1.1.1.3.3.cmml">c</mi></msup><mo id="S3.E14.m1.1.1.1.1.2" xref="S3.E14.m1.1.1.1.1.2.cmml">=</mo><msubsup id="S3.E14.m1.1.1.1.1.1" xref="S3.E14.m1.1.1.1.1.1.cmml"><mrow id="S3.E14.m1.1.1.1.1.1.1.1.1" xref="S3.E14.m1.1.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E14.m1.1.1.1.1.1.1.1.1.2" xref="S3.E14.m1.1.1.1.1.1.1.1.2.1.cmml">[</mo><mrow id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">p</mi><mo id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">−</mo><mi id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">q</mi></mrow><mo stretchy="false" id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo stretchy="false" id="S3.E14.m1.1.1.1.1.1.1.1.1.3" xref="S3.E14.m1.1.1.1.1.1.1.1.2.1.cmml">]</mo></mrow><mrow id="S3.E14.m1.1.1.1.1.1.1.3" xref="S3.E14.m1.1.1.1.1.1.1.3.cmml"><mi id="S3.E14.m1.1.1.1.1.1.1.3.2" xref="S3.E14.m1.1.1.1.1.1.1.3.2.cmml">i</mi><mo id="S3.E14.m1.1.1.1.1.1.1.3.1" xref="S3.E14.m1.1.1.1.1.1.1.3.1.cmml">=</mo><mn id="S3.E14.m1.1.1.1.1.1.1.3.3" xref="S3.E14.m1.1.1.1.1.1.1.3.3.cmml">1</mn></mrow><mrow id="S3.E14.m1.1.1.1.1.1.3" xref="S3.E14.m1.1.1.1.1.1.3.cmml"><msub id="S3.E14.m1.1.1.1.1.1.3.2" xref="S3.E14.m1.1.1.1.1.1.3.2.cmml"><mi id="S3.E14.m1.1.1.1.1.1.3.2.2" xref="S3.E14.m1.1.1.1.1.1.3.2.2.cmml">n</mi><mi id="S3.E14.m1.1.1.1.1.1.3.2.3" xref="S3.E14.m1.1.1.1.1.1.3.2.3.cmml">c</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.E14.m1.1.1.1.1.1.3.1" xref="S3.E14.m1.1.1.1.1.1.3.1.cmml">×</mo><msub id="S3.E14.m1.1.1.1.1.1.3.3" xref="S3.E14.m1.1.1.1.1.1.3.3.cmml"><mi id="S3.E14.m1.1.1.1.1.1.3.3.2" xref="S3.E14.m1.1.1.1.1.1.3.3.2.cmml">d</mi><mi id="S3.E14.m1.1.1.1.1.1.3.3.3" xref="S3.E14.m1.1.1.1.1.1.3.3.3.cmml">f</mi></msub></mrow></msubsup></mrow><mo id="S3.E14.m1.1.1.1.2" xref="S3.E14.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E14.m1.1b"><apply id="S3.E14.m1.1.1.1.1.cmml" xref="S3.E14.m1.1.1.1"><eq id="S3.E14.m1.1.1.1.1.2.cmml" xref="S3.E14.m1.1.1.1.1.2"></eq><apply id="S3.E14.m1.1.1.1.1.3.cmml" xref="S3.E14.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E14.m1.1.1.1.1.3.1.cmml" xref="S3.E14.m1.1.1.1.1.3">superscript</csymbol><ci id="S3.E14.m1.1.1.1.1.3.2.cmml" xref="S3.E14.m1.1.1.1.1.3.2">𝑬</ci><ci id="S3.E14.m1.1.1.1.1.3.3.cmml" xref="S3.E14.m1.1.1.1.1.3.3">𝑐</ci></apply><apply id="S3.E14.m1.1.1.1.1.1.cmml" xref="S3.E14.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E14.m1.1.1.1.1.1.2.cmml" xref="S3.E14.m1.1.1.1.1.1">superscript</csymbol><apply id="S3.E14.m1.1.1.1.1.1.1.cmml" xref="S3.E14.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E14.m1.1.1.1.1.1.1.2.cmml" xref="S3.E14.m1.1.1.1.1.1">subscript</csymbol><apply id="S3.E14.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.E14.m1.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E14.m1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E14.m1.1.1.1.1.1.1.1.1.2">delimited-[]</csymbol><apply id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1"><minus id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.1"></minus><ci id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.2">𝑝</ci><ci id="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E14.m1.1.1.1.1.1.1.1.1.1.1.1.3">𝑞</ci></apply></apply><apply id="S3.E14.m1.1.1.1.1.1.1.3.cmml" xref="S3.E14.m1.1.1.1.1.1.1.3"><eq id="S3.E14.m1.1.1.1.1.1.1.3.1.cmml" xref="S3.E14.m1.1.1.1.1.1.1.3.1"></eq><ci id="S3.E14.m1.1.1.1.1.1.1.3.2.cmml" xref="S3.E14.m1.1.1.1.1.1.1.3.2">𝑖</ci><cn type="integer" id="S3.E14.m1.1.1.1.1.1.1.3.3.cmml" xref="S3.E14.m1.1.1.1.1.1.1.3.3">1</cn></apply></apply><apply id="S3.E14.m1.1.1.1.1.1.3.cmml" xref="S3.E14.m1.1.1.1.1.1.3"><times id="S3.E14.m1.1.1.1.1.1.3.1.cmml" xref="S3.E14.m1.1.1.1.1.1.3.1"></times><apply id="S3.E14.m1.1.1.1.1.1.3.2.cmml" xref="S3.E14.m1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E14.m1.1.1.1.1.1.3.2.1.cmml" xref="S3.E14.m1.1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.E14.m1.1.1.1.1.1.3.2.2.cmml" xref="S3.E14.m1.1.1.1.1.1.3.2.2">𝑛</ci><ci id="S3.E14.m1.1.1.1.1.1.3.2.3.cmml" xref="S3.E14.m1.1.1.1.1.1.3.2.3">𝑐</ci></apply><apply id="S3.E14.m1.1.1.1.1.1.3.3.cmml" xref="S3.E14.m1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.E14.m1.1.1.1.1.1.3.3.1.cmml" xref="S3.E14.m1.1.1.1.1.1.3.3">subscript</csymbol><ci id="S3.E14.m1.1.1.1.1.1.3.3.2.cmml" xref="S3.E14.m1.1.1.1.1.1.3.3.2">𝑑</ci><ci id="S3.E14.m1.1.1.1.1.1.3.3.3.cmml" xref="S3.E14.m1.1.1.1.1.1.3.3.3">𝑓</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E14.m1.1c">\bm{E}^{c}=[(p-q)]_{i=1}^{{n_{c}}\times{d_{f}}},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS3.p2.13" class="ltx_p">where <math id="S3.SS4.SSS3.p2.10.m1.1" class="ltx_Math" alttext="\bm{E}^{c}\in\mathbb{R}^{2\times{d_{f}}}" display="inline"><semantics id="S3.SS4.SSS3.p2.10.m1.1a"><mrow id="S3.SS4.SSS3.p2.10.m1.1.1" xref="S3.SS4.SSS3.p2.10.m1.1.1.cmml"><msup id="S3.SS4.SSS3.p2.10.m1.1.1.2" xref="S3.SS4.SSS3.p2.10.m1.1.1.2.cmml"><mi id="S3.SS4.SSS3.p2.10.m1.1.1.2.2" xref="S3.SS4.SSS3.p2.10.m1.1.1.2.2.cmml">𝑬</mi><mi id="S3.SS4.SSS3.p2.10.m1.1.1.2.3" xref="S3.SS4.SSS3.p2.10.m1.1.1.2.3.cmml">c</mi></msup><mo id="S3.SS4.SSS3.p2.10.m1.1.1.1" xref="S3.SS4.SSS3.p2.10.m1.1.1.1.cmml">∈</mo><msup id="S3.SS4.SSS3.p2.10.m1.1.1.3" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.cmml"><mi id="S3.SS4.SSS3.p2.10.m1.1.1.3.2" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS4.SSS3.p2.10.m1.1.1.3.3" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.cmml"><mn id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.2" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.2.cmml">2</mn><mo lspace="0.222em" rspace="0.222em" id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.1" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.1.cmml">×</mo><msub id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.cmml"><mi id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.2" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.2.cmml">d</mi><mi id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.3" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.3.cmml">f</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.10.m1.1b"><apply id="S3.SS4.SSS3.p2.10.m1.1.1.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1"><in id="S3.SS4.SSS3.p2.10.m1.1.1.1.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.1"></in><apply id="S3.SS4.SSS3.p2.10.m1.1.1.2.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.10.m1.1.1.2.1.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.2">superscript</csymbol><ci id="S3.SS4.SSS3.p2.10.m1.1.1.2.2.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.2.2">𝑬</ci><ci id="S3.SS4.SSS3.p2.10.m1.1.1.2.3.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.2.3">𝑐</ci></apply><apply id="S3.SS4.SSS3.p2.10.m1.1.1.3.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.10.m1.1.1.3.1.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3">superscript</csymbol><ci id="S3.SS4.SSS3.p2.10.m1.1.1.3.2.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.2">ℝ</ci><apply id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3"><times id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.1.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.1"></times><cn type="integer" id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.2.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.2">2</cn><apply id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.1.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3">subscript</csymbol><ci id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.2.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.2">𝑑</ci><ci id="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.3.cmml" xref="S3.SS4.SSS3.p2.10.m1.1.1.3.3.3.3">𝑓</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.10.m1.1c">\bm{E}^{c}\in\mathbb{R}^{2\times{d_{f}}}</annotation></semantics></math> is a constant matrix with the same shape as <math id="S3.SS4.SSS3.p2.11.m2.1" class="ltx_Math" alttext="\bm{r}" display="inline"><semantics id="S3.SS4.SSS3.p2.11.m2.1a"><mi id="S3.SS4.SSS3.p2.11.m2.1.1" xref="S3.SS4.SSS3.p2.11.m2.1.1.cmml">𝒓</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.11.m2.1b"><ci id="S3.SS4.SSS3.p2.11.m2.1.1.cmml" xref="S3.SS4.SSS3.p2.11.m2.1.1">𝒓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.11.m2.1c">\bm{r}</annotation></semantics></math>. <math id="S3.SS4.SSS3.p2.12.m3.1" class="ltx_Math" alttext="p" display="inline"><semantics id="S3.SS4.SSS3.p2.12.m3.1a"><mi id="S3.SS4.SSS3.p2.12.m3.1.1" xref="S3.SS4.SSS3.p2.12.m3.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.12.m3.1b"><ci id="S3.SS4.SSS3.p2.12.m3.1.1.cmml" xref="S3.SS4.SSS3.p2.12.m3.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.12.m3.1c">p</annotation></semantics></math> and <math id="S3.SS4.SSS3.p2.13.m4.1" class="ltx_Math" alttext="q" display="inline"><semantics id="S3.SS4.SSS3.p2.13.m4.1a"><mi id="S3.SS4.SSS3.p2.13.m4.1.1" xref="S3.SS4.SSS3.p2.13.m4.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p2.13.m4.1b"><ci id="S3.SS4.SSS3.p2.13.m4.1.1.cmml" xref="S3.SS4.SSS3.p2.13.m4.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p2.13.m4.1c">q</annotation></semantics></math> are employed to introduce the probabilities of inversion and permutation operations. By multiplying this constant matrix with the gradients after random response, we alleviate the overall impact of random noise on the gradients.</p>
</div>
<div id="S3.SS4.SSS3.p3" class="ltx_para">
<p id="S3.SS4.SSS3.p3.1" class="ltx_p">We utilize FedAVG to aggregate the gradients, and determine the aggregation weight based on the ratio of the client data to the total data:</p>
<table id="S3.E15" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(15)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E15.m1.1" class="ltx_Math" alttext="w_{i}=\frac{{{m_{i}}}}{{\sum\limits_{i=1}^{{n_{c}}}{{m_{i}}}}}." display="block"><semantics id="S3.E15.m1.1a"><mrow id="S3.E15.m1.1.1.1" xref="S3.E15.m1.1.1.1.1.cmml"><mrow id="S3.E15.m1.1.1.1.1" xref="S3.E15.m1.1.1.1.1.cmml"><msub id="S3.E15.m1.1.1.1.1.2" xref="S3.E15.m1.1.1.1.1.2.cmml"><mi id="S3.E15.m1.1.1.1.1.2.2" xref="S3.E15.m1.1.1.1.1.2.2.cmml">w</mi><mi id="S3.E15.m1.1.1.1.1.2.3" xref="S3.E15.m1.1.1.1.1.2.3.cmml">i</mi></msub><mo id="S3.E15.m1.1.1.1.1.1" xref="S3.E15.m1.1.1.1.1.1.cmml">=</mo><mfrac id="S3.E15.m1.1.1.1.1.3" xref="S3.E15.m1.1.1.1.1.3.cmml"><msub id="S3.E15.m1.1.1.1.1.3.2" xref="S3.E15.m1.1.1.1.1.3.2.cmml"><mi id="S3.E15.m1.1.1.1.1.3.2.2" xref="S3.E15.m1.1.1.1.1.3.2.2.cmml">m</mi><mi id="S3.E15.m1.1.1.1.1.3.2.3" xref="S3.E15.m1.1.1.1.1.3.2.3.cmml">i</mi></msub><mrow id="S3.E15.m1.1.1.1.1.3.3" xref="S3.E15.m1.1.1.1.1.3.3.cmml"><munderover id="S3.E15.m1.1.1.1.1.3.3.1" xref="S3.E15.m1.1.1.1.1.3.3.1.cmml"><mo movablelimits="false" id="S3.E15.m1.1.1.1.1.3.3.1.2.2" xref="S3.E15.m1.1.1.1.1.3.3.1.2.2.cmml">∑</mo><mrow id="S3.E15.m1.1.1.1.1.3.3.1.2.3" xref="S3.E15.m1.1.1.1.1.3.3.1.2.3.cmml"><mi id="S3.E15.m1.1.1.1.1.3.3.1.2.3.2" xref="S3.E15.m1.1.1.1.1.3.3.1.2.3.2.cmml">i</mi><mo id="S3.E15.m1.1.1.1.1.3.3.1.2.3.1" xref="S3.E15.m1.1.1.1.1.3.3.1.2.3.1.cmml">=</mo><mn id="S3.E15.m1.1.1.1.1.3.3.1.2.3.3" xref="S3.E15.m1.1.1.1.1.3.3.1.2.3.3.cmml">1</mn></mrow><msub id="S3.E15.m1.1.1.1.1.3.3.1.3" xref="S3.E15.m1.1.1.1.1.3.3.1.3.cmml"><mi id="S3.E15.m1.1.1.1.1.3.3.1.3.2" xref="S3.E15.m1.1.1.1.1.3.3.1.3.2.cmml">n</mi><mi id="S3.E15.m1.1.1.1.1.3.3.1.3.3" xref="S3.E15.m1.1.1.1.1.3.3.1.3.3.cmml">c</mi></msub></munderover><msub id="S3.E15.m1.1.1.1.1.3.3.2" xref="S3.E15.m1.1.1.1.1.3.3.2.cmml"><mi id="S3.E15.m1.1.1.1.1.3.3.2.2" xref="S3.E15.m1.1.1.1.1.3.3.2.2.cmml">m</mi><mi id="S3.E15.m1.1.1.1.1.3.3.2.3" xref="S3.E15.m1.1.1.1.1.3.3.2.3.cmml">i</mi></msub></mrow></mfrac></mrow><mo lspace="0em" id="S3.E15.m1.1.1.1.2" xref="S3.E15.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E15.m1.1b"><apply id="S3.E15.m1.1.1.1.1.cmml" xref="S3.E15.m1.1.1.1"><eq id="S3.E15.m1.1.1.1.1.1.cmml" xref="S3.E15.m1.1.1.1.1.1"></eq><apply id="S3.E15.m1.1.1.1.1.2.cmml" xref="S3.E15.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E15.m1.1.1.1.1.2.1.cmml" xref="S3.E15.m1.1.1.1.1.2">subscript</csymbol><ci id="S3.E15.m1.1.1.1.1.2.2.cmml" xref="S3.E15.m1.1.1.1.1.2.2">𝑤</ci><ci id="S3.E15.m1.1.1.1.1.2.3.cmml" xref="S3.E15.m1.1.1.1.1.2.3">𝑖</ci></apply><apply id="S3.E15.m1.1.1.1.1.3.cmml" xref="S3.E15.m1.1.1.1.1.3"><divide id="S3.E15.m1.1.1.1.1.3.1.cmml" xref="S3.E15.m1.1.1.1.1.3"></divide><apply id="S3.E15.m1.1.1.1.1.3.2.cmml" xref="S3.E15.m1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E15.m1.1.1.1.1.3.2.1.cmml" xref="S3.E15.m1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.E15.m1.1.1.1.1.3.2.2.cmml" xref="S3.E15.m1.1.1.1.1.3.2.2">𝑚</ci><ci id="S3.E15.m1.1.1.1.1.3.2.3.cmml" xref="S3.E15.m1.1.1.1.1.3.2.3">𝑖</ci></apply><apply id="S3.E15.m1.1.1.1.1.3.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3"><apply id="S3.E15.m1.1.1.1.1.3.3.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1"><csymbol cd="ambiguous" id="S3.E15.m1.1.1.1.1.3.3.1.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1">superscript</csymbol><apply id="S3.E15.m1.1.1.1.1.3.3.1.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1"><csymbol cd="ambiguous" id="S3.E15.m1.1.1.1.1.3.3.1.2.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1">subscript</csymbol><sum id="S3.E15.m1.1.1.1.1.3.3.1.2.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.2.2"></sum><apply id="S3.E15.m1.1.1.1.1.3.3.1.2.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.2.3"><eq id="S3.E15.m1.1.1.1.1.3.3.1.2.3.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.2.3.1"></eq><ci id="S3.E15.m1.1.1.1.1.3.3.1.2.3.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.2.3.2">𝑖</ci><cn type="integer" id="S3.E15.m1.1.1.1.1.3.3.1.2.3.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.2.3.3">1</cn></apply></apply><apply id="S3.E15.m1.1.1.1.1.3.3.1.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.3"><csymbol cd="ambiguous" id="S3.E15.m1.1.1.1.1.3.3.1.3.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.3">subscript</csymbol><ci id="S3.E15.m1.1.1.1.1.3.3.1.3.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.3.2">𝑛</ci><ci id="S3.E15.m1.1.1.1.1.3.3.1.3.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1.3.3">𝑐</ci></apply></apply><apply id="S3.E15.m1.1.1.1.1.3.3.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.E15.m1.1.1.1.1.3.3.2.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.2">subscript</csymbol><ci id="S3.E15.m1.1.1.1.1.3.3.2.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.2.2">𝑚</ci><ci id="S3.E15.m1.1.1.1.1.3.3.2.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.2.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E15.m1.1c">w_{i}=\frac{{{m_{i}}}}{{\sum\limits_{i=1}^{{n_{c}}}{{m_{i}}}}}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS3.p3.2" class="ltx_p">The rectification and aggregation process can then be expressed as:</p>
<table id="A2.EGx6" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S3.E16"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(16)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E16.m1.1" class="ltx_Math" alttext="\displaystyle\bm{g}=\sum\limits_{i=1}^{{n_{c}}}{{\bm{r}_{i}}\cdot\bm{E}_{i}^{c}\cdot{w_{i}}}." display="inline"><semantics id="S3.E16.m1.1a"><mrow id="S3.E16.m1.1.1.1" xref="S3.E16.m1.1.1.1.1.cmml"><mrow id="S3.E16.m1.1.1.1.1" xref="S3.E16.m1.1.1.1.1.cmml"><mi id="S3.E16.m1.1.1.1.1.2" xref="S3.E16.m1.1.1.1.1.2.cmml">𝒈</mi><mo id="S3.E16.m1.1.1.1.1.1" xref="S3.E16.m1.1.1.1.1.1.cmml">=</mo><mrow id="S3.E16.m1.1.1.1.1.3" xref="S3.E16.m1.1.1.1.1.3.cmml"><mstyle displaystyle="true" id="S3.E16.m1.1.1.1.1.3.1" xref="S3.E16.m1.1.1.1.1.3.1.cmml"><munderover id="S3.E16.m1.1.1.1.1.3.1a" xref="S3.E16.m1.1.1.1.1.3.1.cmml"><mo movablelimits="false" id="S3.E16.m1.1.1.1.1.3.1.2.2" xref="S3.E16.m1.1.1.1.1.3.1.2.2.cmml">∑</mo><mrow id="S3.E16.m1.1.1.1.1.3.1.2.3" xref="S3.E16.m1.1.1.1.1.3.1.2.3.cmml"><mi id="S3.E16.m1.1.1.1.1.3.1.2.3.2" xref="S3.E16.m1.1.1.1.1.3.1.2.3.2.cmml">i</mi><mo id="S3.E16.m1.1.1.1.1.3.1.2.3.1" xref="S3.E16.m1.1.1.1.1.3.1.2.3.1.cmml">=</mo><mn id="S3.E16.m1.1.1.1.1.3.1.2.3.3" xref="S3.E16.m1.1.1.1.1.3.1.2.3.3.cmml">1</mn></mrow><msub id="S3.E16.m1.1.1.1.1.3.1.3" xref="S3.E16.m1.1.1.1.1.3.1.3.cmml"><mi id="S3.E16.m1.1.1.1.1.3.1.3.2" xref="S3.E16.m1.1.1.1.1.3.1.3.2.cmml">n</mi><mi id="S3.E16.m1.1.1.1.1.3.1.3.3" xref="S3.E16.m1.1.1.1.1.3.1.3.3.cmml">c</mi></msub></munderover></mstyle><mrow id="S3.E16.m1.1.1.1.1.3.2" xref="S3.E16.m1.1.1.1.1.3.2.cmml"><msub id="S3.E16.m1.1.1.1.1.3.2.2" xref="S3.E16.m1.1.1.1.1.3.2.2.cmml"><mi id="S3.E16.m1.1.1.1.1.3.2.2.2" xref="S3.E16.m1.1.1.1.1.3.2.2.2.cmml">𝒓</mi><mi id="S3.E16.m1.1.1.1.1.3.2.2.3" xref="S3.E16.m1.1.1.1.1.3.2.2.3.cmml">i</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.E16.m1.1.1.1.1.3.2.1" xref="S3.E16.m1.1.1.1.1.3.2.1.cmml">⋅</mo><msubsup id="S3.E16.m1.1.1.1.1.3.2.3" xref="S3.E16.m1.1.1.1.1.3.2.3.cmml"><mi id="S3.E16.m1.1.1.1.1.3.2.3.2.2" xref="S3.E16.m1.1.1.1.1.3.2.3.2.2.cmml">𝑬</mi><mi id="S3.E16.m1.1.1.1.1.3.2.3.2.3" xref="S3.E16.m1.1.1.1.1.3.2.3.2.3.cmml">i</mi><mi id="S3.E16.m1.1.1.1.1.3.2.3.3" xref="S3.E16.m1.1.1.1.1.3.2.3.3.cmml">c</mi></msubsup><mo lspace="0.222em" rspace="0.222em" id="S3.E16.m1.1.1.1.1.3.2.1a" xref="S3.E16.m1.1.1.1.1.3.2.1.cmml">⋅</mo><msub id="S3.E16.m1.1.1.1.1.3.2.4" xref="S3.E16.m1.1.1.1.1.3.2.4.cmml"><mi id="S3.E16.m1.1.1.1.1.3.2.4.2" xref="S3.E16.m1.1.1.1.1.3.2.4.2.cmml">w</mi><mi id="S3.E16.m1.1.1.1.1.3.2.4.3" xref="S3.E16.m1.1.1.1.1.3.2.4.3.cmml">i</mi></msub></mrow></mrow></mrow><mo lspace="0em" id="S3.E16.m1.1.1.1.2" xref="S3.E16.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E16.m1.1b"><apply id="S3.E16.m1.1.1.1.1.cmml" xref="S3.E16.m1.1.1.1"><eq id="S3.E16.m1.1.1.1.1.1.cmml" xref="S3.E16.m1.1.1.1.1.1"></eq><ci id="S3.E16.m1.1.1.1.1.2.cmml" xref="S3.E16.m1.1.1.1.1.2">𝒈</ci><apply id="S3.E16.m1.1.1.1.1.3.cmml" xref="S3.E16.m1.1.1.1.1.3"><apply id="S3.E16.m1.1.1.1.1.3.1.cmml" xref="S3.E16.m1.1.1.1.1.3.1"><csymbol cd="ambiguous" id="S3.E16.m1.1.1.1.1.3.1.1.cmml" xref="S3.E16.m1.1.1.1.1.3.1">superscript</csymbol><apply id="S3.E16.m1.1.1.1.1.3.1.2.cmml" xref="S3.E16.m1.1.1.1.1.3.1"><csymbol cd="ambiguous" id="S3.E16.m1.1.1.1.1.3.1.2.1.cmml" xref="S3.E16.m1.1.1.1.1.3.1">subscript</csymbol><sum id="S3.E16.m1.1.1.1.1.3.1.2.2.cmml" xref="S3.E16.m1.1.1.1.1.3.1.2.2"></sum><apply id="S3.E16.m1.1.1.1.1.3.1.2.3.cmml" xref="S3.E16.m1.1.1.1.1.3.1.2.3"><eq id="S3.E16.m1.1.1.1.1.3.1.2.3.1.cmml" xref="S3.E16.m1.1.1.1.1.3.1.2.3.1"></eq><ci id="S3.E16.m1.1.1.1.1.3.1.2.3.2.cmml" xref="S3.E16.m1.1.1.1.1.3.1.2.3.2">𝑖</ci><cn type="integer" id="S3.E16.m1.1.1.1.1.3.1.2.3.3.cmml" xref="S3.E16.m1.1.1.1.1.3.1.2.3.3">1</cn></apply></apply><apply id="S3.E16.m1.1.1.1.1.3.1.3.cmml" xref="S3.E16.m1.1.1.1.1.3.1.3"><csymbol cd="ambiguous" id="S3.E16.m1.1.1.1.1.3.1.3.1.cmml" xref="S3.E16.m1.1.1.1.1.3.1.3">subscript</csymbol><ci id="S3.E16.m1.1.1.1.1.3.1.3.2.cmml" xref="S3.E16.m1.1.1.1.1.3.1.3.2">𝑛</ci><ci id="S3.E16.m1.1.1.1.1.3.1.3.3.cmml" xref="S3.E16.m1.1.1.1.1.3.1.3.3">𝑐</ci></apply></apply><apply id="S3.E16.m1.1.1.1.1.3.2.cmml" xref="S3.E16.m1.1.1.1.1.3.2"><ci id="S3.E16.m1.1.1.1.1.3.2.1.cmml" xref="S3.E16.m1.1.1.1.1.3.2.1">⋅</ci><apply id="S3.E16.m1.1.1.1.1.3.2.2.cmml" xref="S3.E16.m1.1.1.1.1.3.2.2"><csymbol cd="ambiguous" id="S3.E16.m1.1.1.1.1.3.2.2.1.cmml" xref="S3.E16.m1.1.1.1.1.3.2.2">subscript</csymbol><ci id="S3.E16.m1.1.1.1.1.3.2.2.2.cmml" xref="S3.E16.m1.1.1.1.1.3.2.2.2">𝒓</ci><ci id="S3.E16.m1.1.1.1.1.3.2.2.3.cmml" xref="S3.E16.m1.1.1.1.1.3.2.2.3">𝑖</ci></apply><apply id="S3.E16.m1.1.1.1.1.3.2.3.cmml" xref="S3.E16.m1.1.1.1.1.3.2.3"><csymbol cd="ambiguous" id="S3.E16.m1.1.1.1.1.3.2.3.1.cmml" xref="S3.E16.m1.1.1.1.1.3.2.3">superscript</csymbol><apply id="S3.E16.m1.1.1.1.1.3.2.3.2.cmml" xref="S3.E16.m1.1.1.1.1.3.2.3"><csymbol cd="ambiguous" id="S3.E16.m1.1.1.1.1.3.2.3.2.1.cmml" xref="S3.E16.m1.1.1.1.1.3.2.3">subscript</csymbol><ci id="S3.E16.m1.1.1.1.1.3.2.3.2.2.cmml" xref="S3.E16.m1.1.1.1.1.3.2.3.2.2">𝑬</ci><ci id="S3.E16.m1.1.1.1.1.3.2.3.2.3.cmml" xref="S3.E16.m1.1.1.1.1.3.2.3.2.3">𝑖</ci></apply><ci id="S3.E16.m1.1.1.1.1.3.2.3.3.cmml" xref="S3.E16.m1.1.1.1.1.3.2.3.3">𝑐</ci></apply><apply id="S3.E16.m1.1.1.1.1.3.2.4.cmml" xref="S3.E16.m1.1.1.1.1.3.2.4"><csymbol cd="ambiguous" id="S3.E16.m1.1.1.1.1.3.2.4.1.cmml" xref="S3.E16.m1.1.1.1.1.3.2.4">subscript</csymbol><ci id="S3.E16.m1.1.1.1.1.3.2.4.2.cmml" xref="S3.E16.m1.1.1.1.1.3.2.4.2">𝑤</ci><ci id="S3.E16.m1.1.1.1.1.3.2.4.3.cmml" xref="S3.E16.m1.1.1.1.1.3.2.4.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E16.m1.1c">\displaystyle\bm{g}=\sum\limits_{i=1}^{{n_{c}}}{{\bm{r}_{i}}\cdot\bm{E}_{i}^{c}\cdot{w_{i}}}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div id="S3.SS4.SSS3.p4" class="ltx_para">
<p id="S3.SS4.SSS3.p4.1" class="ltx_p">After that, we reshape the gradients back to their original dimensions and then decode them back to their previous range:</p>
<table id="S3.E17" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(17)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E17.m1.3" class="ltx_Math" alttext="\bm{g}=\operatorname{reshape}(\bm{g})\cdot s-\tau." display="block"><semantics id="S3.E17.m1.3a"><mrow id="S3.E17.m1.3.3.1" xref="S3.E17.m1.3.3.1.1.cmml"><mrow id="S3.E17.m1.3.3.1.1" xref="S3.E17.m1.3.3.1.1.cmml"><mi id="S3.E17.m1.3.3.1.1.2" xref="S3.E17.m1.3.3.1.1.2.cmml">𝒈</mi><mo id="S3.E17.m1.3.3.1.1.1" xref="S3.E17.m1.3.3.1.1.1.cmml">=</mo><mrow id="S3.E17.m1.3.3.1.1.3" xref="S3.E17.m1.3.3.1.1.3.cmml"><mrow id="S3.E17.m1.3.3.1.1.3.2" xref="S3.E17.m1.3.3.1.1.3.2.cmml"><mrow id="S3.E17.m1.3.3.1.1.3.2.2.2" xref="S3.E17.m1.3.3.1.1.3.2.2.1.cmml"><mi id="S3.E17.m1.1.1" xref="S3.E17.m1.1.1.cmml">reshape</mi><mo id="S3.E17.m1.3.3.1.1.3.2.2.2a" xref="S3.E17.m1.3.3.1.1.3.2.2.1.cmml">⁡</mo><mrow id="S3.E17.m1.3.3.1.1.3.2.2.2.1" xref="S3.E17.m1.3.3.1.1.3.2.2.1.cmml"><mo stretchy="false" id="S3.E17.m1.3.3.1.1.3.2.2.2.1.1" xref="S3.E17.m1.3.3.1.1.3.2.2.1.cmml">(</mo><mi id="S3.E17.m1.2.2" xref="S3.E17.m1.2.2.cmml">𝒈</mi><mo rspace="0.055em" stretchy="false" id="S3.E17.m1.3.3.1.1.3.2.2.2.1.2" xref="S3.E17.m1.3.3.1.1.3.2.2.1.cmml">)</mo></mrow></mrow><mo rspace="0.222em" id="S3.E17.m1.3.3.1.1.3.2.1" xref="S3.E17.m1.3.3.1.1.3.2.1.cmml">⋅</mo><mi id="S3.E17.m1.3.3.1.1.3.2.3" xref="S3.E17.m1.3.3.1.1.3.2.3.cmml">s</mi></mrow><mo id="S3.E17.m1.3.3.1.1.3.1" xref="S3.E17.m1.3.3.1.1.3.1.cmml">−</mo><mi id="S3.E17.m1.3.3.1.1.3.3" xref="S3.E17.m1.3.3.1.1.3.3.cmml">τ</mi></mrow></mrow><mo lspace="0em" id="S3.E17.m1.3.3.1.2" xref="S3.E17.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E17.m1.3b"><apply id="S3.E17.m1.3.3.1.1.cmml" xref="S3.E17.m1.3.3.1"><eq id="S3.E17.m1.3.3.1.1.1.cmml" xref="S3.E17.m1.3.3.1.1.1"></eq><ci id="S3.E17.m1.3.3.1.1.2.cmml" xref="S3.E17.m1.3.3.1.1.2">𝒈</ci><apply id="S3.E17.m1.3.3.1.1.3.cmml" xref="S3.E17.m1.3.3.1.1.3"><minus id="S3.E17.m1.3.3.1.1.3.1.cmml" xref="S3.E17.m1.3.3.1.1.3.1"></minus><apply id="S3.E17.m1.3.3.1.1.3.2.cmml" xref="S3.E17.m1.3.3.1.1.3.2"><ci id="S3.E17.m1.3.3.1.1.3.2.1.cmml" xref="S3.E17.m1.3.3.1.1.3.2.1">⋅</ci><apply id="S3.E17.m1.3.3.1.1.3.2.2.1.cmml" xref="S3.E17.m1.3.3.1.1.3.2.2.2"><ci id="S3.E17.m1.1.1.cmml" xref="S3.E17.m1.1.1">reshape</ci><ci id="S3.E17.m1.2.2.cmml" xref="S3.E17.m1.2.2">𝒈</ci></apply><ci id="S3.E17.m1.3.3.1.1.3.2.3.cmml" xref="S3.E17.m1.3.3.1.1.3.2.3">𝑠</ci></apply><ci id="S3.E17.m1.3.3.1.1.3.3.cmml" xref="S3.E17.m1.3.3.1.1.3.3">𝜏</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E17.m1.3c">\bm{g}=\operatorname{reshape}(\bm{g})\cdot s-\tau.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS3.p4.2" class="ltx_p">Finally, we utilize the decoded gradients to update the embedding within the server, which can be defined as:</p>
<table id="S3.E18" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(18)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E18.m1.1" class="ltx_Math" alttext="\bm{E}\leftarrow\bm{E}-\alpha\cdot\bm{g}." display="block"><semantics id="S3.E18.m1.1a"><mrow id="S3.E18.m1.1.1.1" xref="S3.E18.m1.1.1.1.1.cmml"><mrow id="S3.E18.m1.1.1.1.1" xref="S3.E18.m1.1.1.1.1.cmml"><mi id="S3.E18.m1.1.1.1.1.2" xref="S3.E18.m1.1.1.1.1.2.cmml">𝑬</mi><mo stretchy="false" id="S3.E18.m1.1.1.1.1.1" xref="S3.E18.m1.1.1.1.1.1.cmml">←</mo><mrow id="S3.E18.m1.1.1.1.1.3" xref="S3.E18.m1.1.1.1.1.3.cmml"><mi id="S3.E18.m1.1.1.1.1.3.2" xref="S3.E18.m1.1.1.1.1.3.2.cmml">𝑬</mi><mo id="S3.E18.m1.1.1.1.1.3.1" xref="S3.E18.m1.1.1.1.1.3.1.cmml">−</mo><mrow id="S3.E18.m1.1.1.1.1.3.3" xref="S3.E18.m1.1.1.1.1.3.3.cmml"><mi id="S3.E18.m1.1.1.1.1.3.3.2" xref="S3.E18.m1.1.1.1.1.3.3.2.cmml">α</mi><mo lspace="0.222em" rspace="0.222em" id="S3.E18.m1.1.1.1.1.3.3.1" xref="S3.E18.m1.1.1.1.1.3.3.1.cmml">⋅</mo><mi id="S3.E18.m1.1.1.1.1.3.3.3" xref="S3.E18.m1.1.1.1.1.3.3.3.cmml">𝒈</mi></mrow></mrow></mrow><mo lspace="0em" id="S3.E18.m1.1.1.1.2" xref="S3.E18.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E18.m1.1b"><apply id="S3.E18.m1.1.1.1.1.cmml" xref="S3.E18.m1.1.1.1"><ci id="S3.E18.m1.1.1.1.1.1.cmml" xref="S3.E18.m1.1.1.1.1.1">←</ci><ci id="S3.E18.m1.1.1.1.1.2.cmml" xref="S3.E18.m1.1.1.1.1.2">𝑬</ci><apply id="S3.E18.m1.1.1.1.1.3.cmml" xref="S3.E18.m1.1.1.1.1.3"><minus id="S3.E18.m1.1.1.1.1.3.1.cmml" xref="S3.E18.m1.1.1.1.1.3.1"></minus><ci id="S3.E18.m1.1.1.1.1.3.2.cmml" xref="S3.E18.m1.1.1.1.1.3.2">𝑬</ci><apply id="S3.E18.m1.1.1.1.1.3.3.cmml" xref="S3.E18.m1.1.1.1.1.3.3"><ci id="S3.E18.m1.1.1.1.1.3.3.1.cmml" xref="S3.E18.m1.1.1.1.1.3.3.1">⋅</ci><ci id="S3.E18.m1.1.1.1.1.3.3.2.cmml" xref="S3.E18.m1.1.1.1.1.3.3.2">𝛼</ci><ci id="S3.E18.m1.1.1.1.1.3.3.3.cmml" xref="S3.E18.m1.1.1.1.1.3.3.3">𝒈</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E18.m1.1c">\bm{E}\leftarrow\bm{E}-\alpha\cdot\bm{g}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS4.SSS3.p4.3" class="ltx_p">We synchronize this updated embedding to all clients, followed by repeating the aforementioned training process until the pre-training phase convergences.
Note that during the initialization phase of <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr>, we’ve ensured that the initial random parameters of the embedding on the server match those of the clients. As a result, the updated embedding is valid at this point.</p>
</div>
<figure id="S3.F2" class="ltx_figure"><img src="/html/2401.14678/assets/x2.png" id="S3.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="257" height="182" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2. </span>The system architecture of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> in the prompt-tuning stage. The components with yellow color are the prompts to be fine-tuned.</figcaption>
</figure>
</section>
</section>
<section id="S3.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.5. </span>Domain-adaptive Prompting Paradigm</h3>

<div id="S3.SS5.p1" class="ltx_para">
<p id="S3.SS5.p1.1" class="ltx_p">To retrieve the domain knowledge from pre-trained models, we further fine-tune the federated content representation through domain-adaptive prompts, i.e., full prompt and light prompt learning, to enhance <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>.</p>
</div>
<section id="S3.SS5.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.5.1. </span>The Full Prompting Schema</h4>

<div id="S3.SS5.SSS1.p1" class="ltx_para">
<p id="S3.SS5.SSS1.p1.1" class="ltx_p">In this prompting paradigm, we exploit two kinds of soft prompts, i.e., domain prompt and user prompt, for domain adaption.</p>
</div>
<div id="S3.SS5.SSS1.p2" class="ltx_para">
<p id="S3.SS5.SSS1.p2.4" class="ltx_p"><span id="S3.SS5.SSS1.p2.4.1" class="ltx_text ltx_font_bold">Domain Prompt.</span> This is to extract the common preferences shared by all the users within each domain, which consists of the prompt context words and a domain prompt encoder.
Suppose we have <math id="S3.SS5.SSS1.p2.1.m1.1" class="ltx_Math" alttext="d_{W}" display="inline"><semantics id="S3.SS5.SSS1.p2.1.m1.1a"><msub id="S3.SS5.SSS1.p2.1.m1.1.1" xref="S3.SS5.SSS1.p2.1.m1.1.1.cmml"><mi id="S3.SS5.SSS1.p2.1.m1.1.1.2" xref="S3.SS5.SSS1.p2.1.m1.1.1.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.1.m1.1.1.3" xref="S3.SS5.SSS1.p2.1.m1.1.1.3.cmml">W</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.1.m1.1b"><apply id="S3.SS5.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS5.SSS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.1.m1.1.1.1.cmml" xref="S3.SS5.SSS1.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS5.SSS1.p2.1.m1.1.1.2.cmml" xref="S3.SS5.SSS1.p2.1.m1.1.1.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.1.m1.1.1.3.cmml" xref="S3.SS5.SSS1.p2.1.m1.1.1.3">𝑊</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.1.m1.1c">d_{W}</annotation></semantics></math> context words in the domain prompt <math id="S3.SS5.SSS1.p2.2.m2.1" class="ltx_Math" alttext="\bm{P}_{\text{domain}}\in\mathbb{R}^{d_{W}\times{d_{V}}}" display="inline"><semantics id="S3.SS5.SSS1.p2.2.m2.1a"><mrow id="S3.SS5.SSS1.p2.2.m2.1.1" xref="S3.SS5.SSS1.p2.2.m2.1.1.cmml"><msub id="S3.SS5.SSS1.p2.2.m2.1.1.2" xref="S3.SS5.SSS1.p2.2.m2.1.1.2.cmml"><mi id="S3.SS5.SSS1.p2.2.m2.1.1.2.2" xref="S3.SS5.SSS1.p2.2.m2.1.1.2.2.cmml">𝑷</mi><mtext id="S3.SS5.SSS1.p2.2.m2.1.1.2.3" xref="S3.SS5.SSS1.p2.2.m2.1.1.2.3a.cmml">domain</mtext></msub><mo id="S3.SS5.SSS1.p2.2.m2.1.1.1" xref="S3.SS5.SSS1.p2.2.m2.1.1.1.cmml">∈</mo><msup id="S3.SS5.SSS1.p2.2.m2.1.1.3" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.cmml"><mi id="S3.SS5.SSS1.p2.2.m2.1.1.3.2" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS5.SSS1.p2.2.m2.1.1.3.3" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.cmml"><msub id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.cmml"><mi id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.2" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.3" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.3.cmml">W</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.1" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.1.cmml">×</mo><msub id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.cmml"><mi id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.2" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.3" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.3.cmml">V</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.2.m2.1b"><apply id="S3.SS5.SSS1.p2.2.m2.1.1.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1"><in id="S3.SS5.SSS1.p2.2.m2.1.1.1.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.1"></in><apply id="S3.SS5.SSS1.p2.2.m2.1.1.2.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.2.m2.1.1.2.1.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.2">subscript</csymbol><ci id="S3.SS5.SSS1.p2.2.m2.1.1.2.2.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.2.2">𝑷</ci><ci id="S3.SS5.SSS1.p2.2.m2.1.1.2.3a.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.2.3"><mtext mathsize="70%" id="S3.SS5.SSS1.p2.2.m2.1.1.2.3.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.2.3">domain</mtext></ci></apply><apply id="S3.SS5.SSS1.p2.2.m2.1.1.3.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.2.m2.1.1.3.1.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3">superscript</csymbol><ci id="S3.SS5.SSS1.p2.2.m2.1.1.3.2.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.2">ℝ</ci><apply id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3"><times id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.1.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.1"></times><apply id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.1.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2">subscript</csymbol><ci id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.2.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.3.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.2.3">𝑊</ci></apply><apply id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.1.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3">subscript</csymbol><ci id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.2.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.3.cmml" xref="S3.SS5.SSS1.p2.2.m2.1.1.3.3.3.3">𝑉</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.2.m2.1c">\bm{P}_{\text{domain}}\in\mathbb{R}^{d_{W}\times{d_{V}}}</annotation></semantics></math> (we set <math id="S3.SS5.SSS1.p2.3.m3.1" class="ltx_Math" alttext="d_{W}" display="inline"><semantics id="S3.SS5.SSS1.p2.3.m3.1a"><msub id="S3.SS5.SSS1.p2.3.m3.1.1" xref="S3.SS5.SSS1.p2.3.m3.1.1.cmml"><mi id="S3.SS5.SSS1.p2.3.m3.1.1.2" xref="S3.SS5.SSS1.p2.3.m3.1.1.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.3.m3.1.1.3" xref="S3.SS5.SSS1.p2.3.m3.1.1.3.cmml">W</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.3.m3.1b"><apply id="S3.SS5.SSS1.p2.3.m3.1.1.cmml" xref="S3.SS5.SSS1.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.3.m3.1.1.1.cmml" xref="S3.SS5.SSS1.p2.3.m3.1.1">subscript</csymbol><ci id="S3.SS5.SSS1.p2.3.m3.1.1.2.cmml" xref="S3.SS5.SSS1.p2.3.m3.1.1.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.3.m3.1.1.3.cmml" xref="S3.SS5.SSS1.p2.3.m3.1.1.3">𝑊</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.3.m3.1c">d_{W}</annotation></semantics></math> as the batch size for the convenience of calculation).
Then, we encode it by a multi-head attention layer (called MA). But different from the vanilla self-attention, we take the sequence embedding <math id="S3.SS5.SSS1.p2.4.m4.1" class="ltx_Math" alttext="\bm{h}" display="inline"><semantics id="S3.SS5.SSS1.p2.4.m4.1a"><mi id="S3.SS5.SSS1.p2.4.m4.1.1" xref="S3.SS5.SSS1.p2.4.m4.1.1.cmml">𝒉</mi><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.4.m4.1b"><ci id="S3.SS5.SSS1.p2.4.m4.1.1.cmml" xref="S3.SS5.SSS1.p2.4.m4.1.1">𝒉</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.4.m4.1c">\bm{h}</annotation></semantics></math> obtained by the pre-trained model as the queries. This encoding process can be defined as:</p>
<table id="A2.EGx7" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="S3.E19"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(19)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E19.m1.2" class="ltx_Math" alttext="\displaystyle MA(\bm{P}_{\text{domain}})=[\text{head}_{1};\text{head}_{2};\ldots;\text{head}_{n_{h}}]\mathbf{W}^{O}," display="inline"><semantics id="S3.E19.m1.2a"><mrow id="S3.E19.m1.2.2.1" xref="S3.E19.m1.2.2.1.1.cmml"><mrow id="S3.E19.m1.2.2.1.1" xref="S3.E19.m1.2.2.1.1.cmml"><mrow id="S3.E19.m1.2.2.1.1.1" xref="S3.E19.m1.2.2.1.1.1.cmml"><mi id="S3.E19.m1.2.2.1.1.1.3" xref="S3.E19.m1.2.2.1.1.1.3.cmml">M</mi><mo lspace="0em" rspace="0em" id="S3.E19.m1.2.2.1.1.1.2" xref="S3.E19.m1.2.2.1.1.1.2.cmml">​</mo><mi id="S3.E19.m1.2.2.1.1.1.4" xref="S3.E19.m1.2.2.1.1.1.4.cmml">A</mi><mo lspace="0em" rspace="0em" id="S3.E19.m1.2.2.1.1.1.2a" xref="S3.E19.m1.2.2.1.1.1.2.cmml">​</mo><mrow id="S3.E19.m1.2.2.1.1.1.1.1" xref="S3.E19.m1.2.2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E19.m1.2.2.1.1.1.1.1.2" xref="S3.E19.m1.2.2.1.1.1.1.1.1.cmml">(</mo><msub id="S3.E19.m1.2.2.1.1.1.1.1.1" xref="S3.E19.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S3.E19.m1.2.2.1.1.1.1.1.1.2" xref="S3.E19.m1.2.2.1.1.1.1.1.1.2.cmml">𝑷</mi><mtext id="S3.E19.m1.2.2.1.1.1.1.1.1.3" xref="S3.E19.m1.2.2.1.1.1.1.1.1.3a.cmml">domain</mtext></msub><mo stretchy="false" id="S3.E19.m1.2.2.1.1.1.1.1.3" xref="S3.E19.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E19.m1.2.2.1.1.5" xref="S3.E19.m1.2.2.1.1.5.cmml">=</mo><mrow id="S3.E19.m1.2.2.1.1.4" xref="S3.E19.m1.2.2.1.1.4.cmml"><mrow id="S3.E19.m1.2.2.1.1.4.3.3" xref="S3.E19.m1.2.2.1.1.4.3.4.cmml"><mo stretchy="false" id="S3.E19.m1.2.2.1.1.4.3.3.4" xref="S3.E19.m1.2.2.1.1.4.3.4.cmml">[</mo><msub id="S3.E19.m1.2.2.1.1.2.1.1.1" xref="S3.E19.m1.2.2.1.1.2.1.1.1.cmml"><mtext id="S3.E19.m1.2.2.1.1.2.1.1.1.2" xref="S3.E19.m1.2.2.1.1.2.1.1.1.2a.cmml">head</mtext><mn id="S3.E19.m1.2.2.1.1.2.1.1.1.3" xref="S3.E19.m1.2.2.1.1.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.E19.m1.2.2.1.1.4.3.3.5" xref="S3.E19.m1.2.2.1.1.4.3.4.cmml">;</mo><msub id="S3.E19.m1.2.2.1.1.3.2.2.2" xref="S3.E19.m1.2.2.1.1.3.2.2.2.cmml"><mtext id="S3.E19.m1.2.2.1.1.3.2.2.2.2" xref="S3.E19.m1.2.2.1.1.3.2.2.2.2a.cmml">head</mtext><mn id="S3.E19.m1.2.2.1.1.3.2.2.2.3" xref="S3.E19.m1.2.2.1.1.3.2.2.2.3.cmml">2</mn></msub><mo id="S3.E19.m1.2.2.1.1.4.3.3.6" xref="S3.E19.m1.2.2.1.1.4.3.4.cmml">;</mo><mi mathvariant="normal" id="S3.E19.m1.1.1" xref="S3.E19.m1.1.1.cmml">…</mi><mo id="S3.E19.m1.2.2.1.1.4.3.3.7" xref="S3.E19.m1.2.2.1.1.4.3.4.cmml">;</mo><msub id="S3.E19.m1.2.2.1.1.4.3.3.3" xref="S3.E19.m1.2.2.1.1.4.3.3.3.cmml"><mtext id="S3.E19.m1.2.2.1.1.4.3.3.3.2" xref="S3.E19.m1.2.2.1.1.4.3.3.3.2a.cmml">head</mtext><msub id="S3.E19.m1.2.2.1.1.4.3.3.3.3" xref="S3.E19.m1.2.2.1.1.4.3.3.3.3.cmml"><mi id="S3.E19.m1.2.2.1.1.4.3.3.3.3.2" xref="S3.E19.m1.2.2.1.1.4.3.3.3.3.2.cmml">n</mi><mi id="S3.E19.m1.2.2.1.1.4.3.3.3.3.3" xref="S3.E19.m1.2.2.1.1.4.3.3.3.3.3.cmml">h</mi></msub></msub><mo stretchy="false" id="S3.E19.m1.2.2.1.1.4.3.3.8" xref="S3.E19.m1.2.2.1.1.4.3.4.cmml">]</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E19.m1.2.2.1.1.4.4" xref="S3.E19.m1.2.2.1.1.4.4.cmml">​</mo><msup id="S3.E19.m1.2.2.1.1.4.5" xref="S3.E19.m1.2.2.1.1.4.5.cmml"><mi id="S3.E19.m1.2.2.1.1.4.5.2" xref="S3.E19.m1.2.2.1.1.4.5.2.cmml">𝐖</mi><mi id="S3.E19.m1.2.2.1.1.4.5.3" xref="S3.E19.m1.2.2.1.1.4.5.3.cmml">O</mi></msup></mrow></mrow><mo id="S3.E19.m1.2.2.1.2" xref="S3.E19.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E19.m1.2b"><apply id="S3.E19.m1.2.2.1.1.cmml" xref="S3.E19.m1.2.2.1"><eq id="S3.E19.m1.2.2.1.1.5.cmml" xref="S3.E19.m1.2.2.1.1.5"></eq><apply id="S3.E19.m1.2.2.1.1.1.cmml" xref="S3.E19.m1.2.2.1.1.1"><times id="S3.E19.m1.2.2.1.1.1.2.cmml" xref="S3.E19.m1.2.2.1.1.1.2"></times><ci id="S3.E19.m1.2.2.1.1.1.3.cmml" xref="S3.E19.m1.2.2.1.1.1.3">𝑀</ci><ci id="S3.E19.m1.2.2.1.1.1.4.cmml" xref="S3.E19.m1.2.2.1.1.1.4">𝐴</ci><apply id="S3.E19.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.E19.m1.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E19.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E19.m1.2.2.1.1.1.1.1">subscript</csymbol><ci id="S3.E19.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E19.m1.2.2.1.1.1.1.1.1.2">𝑷</ci><ci id="S3.E19.m1.2.2.1.1.1.1.1.1.3a.cmml" xref="S3.E19.m1.2.2.1.1.1.1.1.1.3"><mtext mathsize="70%" id="S3.E19.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E19.m1.2.2.1.1.1.1.1.1.3">domain</mtext></ci></apply></apply><apply id="S3.E19.m1.2.2.1.1.4.cmml" xref="S3.E19.m1.2.2.1.1.4"><times id="S3.E19.m1.2.2.1.1.4.4.cmml" xref="S3.E19.m1.2.2.1.1.4.4"></times><list id="S3.E19.m1.2.2.1.1.4.3.4.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3"><apply id="S3.E19.m1.2.2.1.1.2.1.1.1.cmml" xref="S3.E19.m1.2.2.1.1.2.1.1.1"><csymbol cd="ambiguous" id="S3.E19.m1.2.2.1.1.2.1.1.1.1.cmml" xref="S3.E19.m1.2.2.1.1.2.1.1.1">subscript</csymbol><ci id="S3.E19.m1.2.2.1.1.2.1.1.1.2a.cmml" xref="S3.E19.m1.2.2.1.1.2.1.1.1.2"><mtext id="S3.E19.m1.2.2.1.1.2.1.1.1.2.cmml" xref="S3.E19.m1.2.2.1.1.2.1.1.1.2">head</mtext></ci><cn type="integer" id="S3.E19.m1.2.2.1.1.2.1.1.1.3.cmml" xref="S3.E19.m1.2.2.1.1.2.1.1.1.3">1</cn></apply><apply id="S3.E19.m1.2.2.1.1.3.2.2.2.cmml" xref="S3.E19.m1.2.2.1.1.3.2.2.2"><csymbol cd="ambiguous" id="S3.E19.m1.2.2.1.1.3.2.2.2.1.cmml" xref="S3.E19.m1.2.2.1.1.3.2.2.2">subscript</csymbol><ci id="S3.E19.m1.2.2.1.1.3.2.2.2.2a.cmml" xref="S3.E19.m1.2.2.1.1.3.2.2.2.2"><mtext id="S3.E19.m1.2.2.1.1.3.2.2.2.2.cmml" xref="S3.E19.m1.2.2.1.1.3.2.2.2.2">head</mtext></ci><cn type="integer" id="S3.E19.m1.2.2.1.1.3.2.2.2.3.cmml" xref="S3.E19.m1.2.2.1.1.3.2.2.2.3">2</cn></apply><ci id="S3.E19.m1.1.1.cmml" xref="S3.E19.m1.1.1">…</ci><apply id="S3.E19.m1.2.2.1.1.4.3.3.3.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3.3"><csymbol cd="ambiguous" id="S3.E19.m1.2.2.1.1.4.3.3.3.1.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3.3">subscript</csymbol><ci id="S3.E19.m1.2.2.1.1.4.3.3.3.2a.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3.3.2"><mtext id="S3.E19.m1.2.2.1.1.4.3.3.3.2.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3.3.2">head</mtext></ci><apply id="S3.E19.m1.2.2.1.1.4.3.3.3.3.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3.3.3"><csymbol cd="ambiguous" id="S3.E19.m1.2.2.1.1.4.3.3.3.3.1.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3.3.3">subscript</csymbol><ci id="S3.E19.m1.2.2.1.1.4.3.3.3.3.2.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3.3.3.2">𝑛</ci><ci id="S3.E19.m1.2.2.1.1.4.3.3.3.3.3.cmml" xref="S3.E19.m1.2.2.1.1.4.3.3.3.3.3">ℎ</ci></apply></apply></list><apply id="S3.E19.m1.2.2.1.1.4.5.cmml" xref="S3.E19.m1.2.2.1.1.4.5"><csymbol cd="ambiguous" id="S3.E19.m1.2.2.1.1.4.5.1.cmml" xref="S3.E19.m1.2.2.1.1.4.5">superscript</csymbol><ci id="S3.E19.m1.2.2.1.1.4.5.2.cmml" xref="S3.E19.m1.2.2.1.1.4.5.2">𝐖</ci><ci id="S3.E19.m1.2.2.1.1.4.5.3.cmml" xref="S3.E19.m1.2.2.1.1.4.5.3">𝑂</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E19.m1.2c">\displaystyle MA(\bm{P}_{\text{domain}})=[\text{head}_{1};\text{head}_{2};\ldots;\text{head}_{n_{h}}]\mathbf{W}^{O},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S3.E20"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(20)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E20.m1.2" class="ltx_Math" alttext="\displaystyle\text{head}_{i}=\operatorname{Attention}(\bm{h}_{\text{d}}\mathbf{W}^{Q}_{i},{\bm{P}_{\text{domain}}}\mathbf{W}^{K}_{i},{\bm{P}_{\text{domain}}}\mathbf{W}^{V}_{i})," display="inline"><semantics id="S3.E20.m1.2a"><mrow id="S3.E20.m1.2.2.1" xref="S3.E20.m1.2.2.1.1.cmml"><mrow id="S3.E20.m1.2.2.1.1" xref="S3.E20.m1.2.2.1.1.cmml"><msub id="S3.E20.m1.2.2.1.1.5" xref="S3.E20.m1.2.2.1.1.5.cmml"><mtext id="S3.E20.m1.2.2.1.1.5.2" xref="S3.E20.m1.2.2.1.1.5.2a.cmml">head</mtext><mi id="S3.E20.m1.2.2.1.1.5.3" xref="S3.E20.m1.2.2.1.1.5.3.cmml">i</mi></msub><mo id="S3.E20.m1.2.2.1.1.4" xref="S3.E20.m1.2.2.1.1.4.cmml">=</mo><mrow id="S3.E20.m1.2.2.1.1.3.3" xref="S3.E20.m1.2.2.1.1.3.4.cmml"><mi id="S3.E20.m1.1.1" xref="S3.E20.m1.1.1.cmml">Attention</mi><mo id="S3.E20.m1.2.2.1.1.3.3a" xref="S3.E20.m1.2.2.1.1.3.4.cmml">⁡</mo><mrow id="S3.E20.m1.2.2.1.1.3.3.3" xref="S3.E20.m1.2.2.1.1.3.4.cmml"><mo stretchy="false" id="S3.E20.m1.2.2.1.1.3.3.3.4" xref="S3.E20.m1.2.2.1.1.3.4.cmml">(</mo><mrow id="S3.E20.m1.2.2.1.1.1.1.1.1" xref="S3.E20.m1.2.2.1.1.1.1.1.1.cmml"><msub id="S3.E20.m1.2.2.1.1.1.1.1.1.2" xref="S3.E20.m1.2.2.1.1.1.1.1.1.2.cmml"><mi id="S3.E20.m1.2.2.1.1.1.1.1.1.2.2" xref="S3.E20.m1.2.2.1.1.1.1.1.1.2.2.cmml">𝒉</mi><mtext id="S3.E20.m1.2.2.1.1.1.1.1.1.2.3" xref="S3.E20.m1.2.2.1.1.1.1.1.1.2.3a.cmml">d</mtext></msub><mo lspace="0em" rspace="0em" id="S3.E20.m1.2.2.1.1.1.1.1.1.1" xref="S3.E20.m1.2.2.1.1.1.1.1.1.1.cmml">​</mo><msubsup id="S3.E20.m1.2.2.1.1.1.1.1.1.3" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3.cmml"><mi id="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.2" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.2.cmml">𝐖</mi><mi id="S3.E20.m1.2.2.1.1.1.1.1.1.3.3" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3.3.cmml">i</mi><mi id="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.3" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.3.cmml">Q</mi></msubsup></mrow><mo id="S3.E20.m1.2.2.1.1.3.3.3.5" xref="S3.E20.m1.2.2.1.1.3.4.cmml">,</mo><mrow id="S3.E20.m1.2.2.1.1.2.2.2.2" xref="S3.E20.m1.2.2.1.1.2.2.2.2.cmml"><msub id="S3.E20.m1.2.2.1.1.2.2.2.2.2" xref="S3.E20.m1.2.2.1.1.2.2.2.2.2.cmml"><mi id="S3.E20.m1.2.2.1.1.2.2.2.2.2.2" xref="S3.E20.m1.2.2.1.1.2.2.2.2.2.2.cmml">𝑷</mi><mtext id="S3.E20.m1.2.2.1.1.2.2.2.2.2.3" xref="S3.E20.m1.2.2.1.1.2.2.2.2.2.3a.cmml">domain</mtext></msub><mo lspace="0em" rspace="0em" id="S3.E20.m1.2.2.1.1.2.2.2.2.1" xref="S3.E20.m1.2.2.1.1.2.2.2.2.1.cmml">​</mo><msubsup id="S3.E20.m1.2.2.1.1.2.2.2.2.3" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3.cmml"><mi id="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.2" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.2.cmml">𝐖</mi><mi id="S3.E20.m1.2.2.1.1.2.2.2.2.3.3" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3.3.cmml">i</mi><mi id="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.3" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.3.cmml">K</mi></msubsup></mrow><mo id="S3.E20.m1.2.2.1.1.3.3.3.6" xref="S3.E20.m1.2.2.1.1.3.4.cmml">,</mo><mrow id="S3.E20.m1.2.2.1.1.3.3.3.3" xref="S3.E20.m1.2.2.1.1.3.3.3.3.cmml"><msub id="S3.E20.m1.2.2.1.1.3.3.3.3.2" xref="S3.E20.m1.2.2.1.1.3.3.3.3.2.cmml"><mi id="S3.E20.m1.2.2.1.1.3.3.3.3.2.2" xref="S3.E20.m1.2.2.1.1.3.3.3.3.2.2.cmml">𝑷</mi><mtext id="S3.E20.m1.2.2.1.1.3.3.3.3.2.3" xref="S3.E20.m1.2.2.1.1.3.3.3.3.2.3a.cmml">domain</mtext></msub><mo lspace="0em" rspace="0em" id="S3.E20.m1.2.2.1.1.3.3.3.3.1" xref="S3.E20.m1.2.2.1.1.3.3.3.3.1.cmml">​</mo><msubsup id="S3.E20.m1.2.2.1.1.3.3.3.3.3" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3.cmml"><mi id="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.2" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.2.cmml">𝐖</mi><mi id="S3.E20.m1.2.2.1.1.3.3.3.3.3.3" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3.3.cmml">i</mi><mi id="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.3" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.3.cmml">V</mi></msubsup></mrow><mo stretchy="false" id="S3.E20.m1.2.2.1.1.3.3.3.7" xref="S3.E20.m1.2.2.1.1.3.4.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E20.m1.2.2.1.2" xref="S3.E20.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E20.m1.2b"><apply id="S3.E20.m1.2.2.1.1.cmml" xref="S3.E20.m1.2.2.1"><eq id="S3.E20.m1.2.2.1.1.4.cmml" xref="S3.E20.m1.2.2.1.1.4"></eq><apply id="S3.E20.m1.2.2.1.1.5.cmml" xref="S3.E20.m1.2.2.1.1.5"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.5.1.cmml" xref="S3.E20.m1.2.2.1.1.5">subscript</csymbol><ci id="S3.E20.m1.2.2.1.1.5.2a.cmml" xref="S3.E20.m1.2.2.1.1.5.2"><mtext id="S3.E20.m1.2.2.1.1.5.2.cmml" xref="S3.E20.m1.2.2.1.1.5.2">head</mtext></ci><ci id="S3.E20.m1.2.2.1.1.5.3.cmml" xref="S3.E20.m1.2.2.1.1.5.3">𝑖</ci></apply><apply id="S3.E20.m1.2.2.1.1.3.4.cmml" xref="S3.E20.m1.2.2.1.1.3.3"><ci id="S3.E20.m1.1.1.cmml" xref="S3.E20.m1.1.1">Attention</ci><apply id="S3.E20.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1"><times id="S3.E20.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.1"></times><apply id="S3.E20.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.1.1.1.1.2.1.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E20.m1.2.2.1.1.1.1.1.1.2.2.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.2.2">𝒉</ci><ci id="S3.E20.m1.2.2.1.1.1.1.1.1.2.3a.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.2.3"><mtext mathsize="70%" id="S3.E20.m1.2.2.1.1.1.1.1.1.2.3.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.2.3">d</mtext></ci></apply><apply id="S3.E20.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.1.1.1.1.3.1.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3">subscript</csymbol><apply id="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.1.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3">superscript</csymbol><ci id="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.2.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.2">𝐖</ci><ci id="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.3.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3.2.3">𝑄</ci></apply><ci id="S3.E20.m1.2.2.1.1.1.1.1.1.3.3.cmml" xref="S3.E20.m1.2.2.1.1.1.1.1.1.3.3">𝑖</ci></apply></apply><apply id="S3.E20.m1.2.2.1.1.2.2.2.2.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2"><times id="S3.E20.m1.2.2.1.1.2.2.2.2.1.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.1"></times><apply id="S3.E20.m1.2.2.1.1.2.2.2.2.2.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.2.2.2.2.2.1.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.2">subscript</csymbol><ci id="S3.E20.m1.2.2.1.1.2.2.2.2.2.2.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.2.2">𝑷</ci><ci id="S3.E20.m1.2.2.1.1.2.2.2.2.2.3a.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.2.3"><mtext mathsize="70%" id="S3.E20.m1.2.2.1.1.2.2.2.2.2.3.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.2.3">domain</mtext></ci></apply><apply id="S3.E20.m1.2.2.1.1.2.2.2.2.3.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.2.2.2.2.3.1.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3">subscript</csymbol><apply id="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.1.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3">superscript</csymbol><ci id="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.2.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.2">𝐖</ci><ci id="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.3.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3.2.3">𝐾</ci></apply><ci id="S3.E20.m1.2.2.1.1.2.2.2.2.3.3.cmml" xref="S3.E20.m1.2.2.1.1.2.2.2.2.3.3">𝑖</ci></apply></apply><apply id="S3.E20.m1.2.2.1.1.3.3.3.3.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3"><times id="S3.E20.m1.2.2.1.1.3.3.3.3.1.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.1"></times><apply id="S3.E20.m1.2.2.1.1.3.3.3.3.2.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.2"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.3.3.3.3.2.1.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.2">subscript</csymbol><ci id="S3.E20.m1.2.2.1.1.3.3.3.3.2.2.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.2.2">𝑷</ci><ci id="S3.E20.m1.2.2.1.1.3.3.3.3.2.3a.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.2.3"><mtext mathsize="70%" id="S3.E20.m1.2.2.1.1.3.3.3.3.2.3.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.2.3">domain</mtext></ci></apply><apply id="S3.E20.m1.2.2.1.1.3.3.3.3.3.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.3.3.3.3.3.1.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3">subscript</csymbol><apply id="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.1.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3">superscript</csymbol><ci id="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.2.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.2">𝐖</ci><ci id="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.3.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3.2.3">𝑉</ci></apply><ci id="S3.E20.m1.2.2.1.1.3.3.3.3.3.3.cmml" xref="S3.E20.m1.2.2.1.1.3.3.3.3.3.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E20.m1.2c">\displaystyle\text{head}_{i}=\operatorname{Attention}(\bm{h}_{\text{d}}\mathbf{W}^{Q}_{i},{\bm{P}_{\text{domain}}}\mathbf{W}^{K}_{i},{\bm{P}_{\text{domain}}}\mathbf{W}^{V}_{i}),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS5.SSS1.p2.9" class="ltx_p">where <math id="S3.SS5.SSS1.p2.5.m1.1" class="ltx_Math" alttext="n_{h}" display="inline"><semantics id="S3.SS5.SSS1.p2.5.m1.1a"><msub id="S3.SS5.SSS1.p2.5.m1.1.1" xref="S3.SS5.SSS1.p2.5.m1.1.1.cmml"><mi id="S3.SS5.SSS1.p2.5.m1.1.1.2" xref="S3.SS5.SSS1.p2.5.m1.1.1.2.cmml">n</mi><mi id="S3.SS5.SSS1.p2.5.m1.1.1.3" xref="S3.SS5.SSS1.p2.5.m1.1.1.3.cmml">h</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.5.m1.1b"><apply id="S3.SS5.SSS1.p2.5.m1.1.1.cmml" xref="S3.SS5.SSS1.p2.5.m1.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.5.m1.1.1.1.cmml" xref="S3.SS5.SSS1.p2.5.m1.1.1">subscript</csymbol><ci id="S3.SS5.SSS1.p2.5.m1.1.1.2.cmml" xref="S3.SS5.SSS1.p2.5.m1.1.1.2">𝑛</ci><ci id="S3.SS5.SSS1.p2.5.m1.1.1.3.cmml" xref="S3.SS5.SSS1.p2.5.m1.1.1.3">ℎ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.5.m1.1c">n_{h}</annotation></semantics></math> denotes the number of heads, <math id="S3.SS5.SSS1.p2.6.m2.3" class="ltx_Math" alttext="\mathbf{W}^{Q}_{i},\mathbf{W}^{K}_{i},\mathbf{W}^{V}_{i}\in{\mathbb{R}^{d_{V}\times d_{V}/{n_{h}}}}" display="inline"><semantics id="S3.SS5.SSS1.p2.6.m2.3a"><mrow id="S3.SS5.SSS1.p2.6.m2.3.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.cmml"><mrow id="S3.SS5.SSS1.p2.6.m2.3.3.3.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.4.cmml"><msubsup id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.cmml"><mi id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.2" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.2.cmml">𝐖</mi><mi id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.3" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.3.cmml">i</mi><mi id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.3" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.3.cmml">Q</mi></msubsup><mo id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.4" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.4.cmml">,</mo><msubsup id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.cmml"><mi id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.2" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.2.cmml">𝐖</mi><mi id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.3" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.3.cmml">i</mi><mi id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.3" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.3.cmml">K</mi></msubsup><mo id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.5" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.4.cmml">,</mo><msubsup id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.cmml"><mi id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.2" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.2.cmml">𝐖</mi><mi id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.3.cmml">i</mi><mi id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.3.cmml">V</mi></msubsup></mrow><mo id="S3.SS5.SSS1.p2.6.m2.3.3.4" xref="S3.SS5.SSS1.p2.6.m2.3.3.4.cmml">∈</mo><msup id="S3.SS5.SSS1.p2.6.m2.3.3.5" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.cmml"><mi id="S3.SS5.SSS1.p2.6.m2.3.3.5.2" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.2.cmml">ℝ</mi><mrow id="S3.SS5.SSS1.p2.6.m2.3.3.5.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.cmml"><mrow id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.cmml"><msub id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.cmml"><mi id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.2" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.3.cmml">V</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.1" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.1.cmml">×</mo><msub id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.cmml"><mi id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.2" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.3.cmml">V</mi></msub></mrow><mo id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.1" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.1.cmml">/</mo><msub id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.cmml"><mi id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.2" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.2.cmml">n</mi><mi id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.3" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.3.cmml">h</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.6.m2.3b"><apply id="S3.SS5.SSS1.p2.6.m2.3.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3"><in id="S3.SS5.SSS1.p2.6.m2.3.3.4.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.4"></in><list id="S3.SS5.SSS1.p2.6.m2.3.3.3.4.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3"><apply id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1">subscript</csymbol><apply id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1">superscript</csymbol><ci id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.2">𝐖</ci><ci id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.2.3">𝑄</ci></apply><ci id="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2">subscript</csymbol><apply id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2">superscript</csymbol><ci id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.2">𝐖</ci><ci id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.2.3">𝐾</ci></apply><ci id="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.2.2.2.2.2.3">𝑖</ci></apply><apply id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3">subscript</csymbol><apply id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3">superscript</csymbol><ci id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.2">𝐖</ci><ci id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.2.3">𝑉</ci></apply><ci id="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.3.3.3.3">𝑖</ci></apply></list><apply id="S3.SS5.SSS1.p2.6.m2.3.3.5.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.3.3.5.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5">superscript</csymbol><ci id="S3.SS5.SSS1.p2.6.m2.3.3.5.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.2">ℝ</ci><apply id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3"><divide id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.1"></divide><apply id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2"><times id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.1"></times><apply id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2">subscript</csymbol><ci id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.2.3">𝑉</ci></apply><apply id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3">subscript</csymbol><ci id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.2.3.3">𝑉</ci></apply></apply><apply id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.1.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3">subscript</csymbol><ci id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.2.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.2">𝑛</ci><ci id="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.3.cmml" xref="S3.SS5.SSS1.p2.6.m2.3.3.5.3.3.3">ℎ</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.6.m2.3c">\mathbf{W}^{Q}_{i},\mathbf{W}^{K}_{i},\mathbf{W}^{V}_{i}\in{\mathbb{R}^{d_{V}\times d_{V}/{n_{h}}}}</annotation></semantics></math>, and <math id="S3.SS5.SSS1.p2.7.m3.1" class="ltx_Math" alttext="\mathbf{W}^{O}\in{\mathbb{R}^{d_{V}\times d_{V}}}" display="inline"><semantics id="S3.SS5.SSS1.p2.7.m3.1a"><mrow id="S3.SS5.SSS1.p2.7.m3.1.1" xref="S3.SS5.SSS1.p2.7.m3.1.1.cmml"><msup id="S3.SS5.SSS1.p2.7.m3.1.1.2" xref="S3.SS5.SSS1.p2.7.m3.1.1.2.cmml"><mi id="S3.SS5.SSS1.p2.7.m3.1.1.2.2" xref="S3.SS5.SSS1.p2.7.m3.1.1.2.2.cmml">𝐖</mi><mi id="S3.SS5.SSS1.p2.7.m3.1.1.2.3" xref="S3.SS5.SSS1.p2.7.m3.1.1.2.3.cmml">O</mi></msup><mo id="S3.SS5.SSS1.p2.7.m3.1.1.1" xref="S3.SS5.SSS1.p2.7.m3.1.1.1.cmml">∈</mo><msup id="S3.SS5.SSS1.p2.7.m3.1.1.3" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.cmml"><mi id="S3.SS5.SSS1.p2.7.m3.1.1.3.2" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.2.cmml">ℝ</mi><mrow id="S3.SS5.SSS1.p2.7.m3.1.1.3.3" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.cmml"><msub id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.cmml"><mi id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.2" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.3" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.3.cmml">V</mi></msub><mo lspace="0.222em" rspace="0.222em" id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.1" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.1.cmml">×</mo><msub id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.cmml"><mi id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.2" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.3" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.3.cmml">V</mi></msub></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.7.m3.1b"><apply id="S3.SS5.SSS1.p2.7.m3.1.1.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1"><in id="S3.SS5.SSS1.p2.7.m3.1.1.1.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.1"></in><apply id="S3.SS5.SSS1.p2.7.m3.1.1.2.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.7.m3.1.1.2.1.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.2">superscript</csymbol><ci id="S3.SS5.SSS1.p2.7.m3.1.1.2.2.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.2.2">𝐖</ci><ci id="S3.SS5.SSS1.p2.7.m3.1.1.2.3.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.2.3">𝑂</ci></apply><apply id="S3.SS5.SSS1.p2.7.m3.1.1.3.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.7.m3.1.1.3.1.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3">superscript</csymbol><ci id="S3.SS5.SSS1.p2.7.m3.1.1.3.2.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.2">ℝ</ci><apply id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3"><times id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.1.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.1"></times><apply id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.1.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2">subscript</csymbol><ci id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.2.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.3.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.2.3">𝑉</ci></apply><apply id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.1.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3">subscript</csymbol><ci id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.2.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.3.cmml" xref="S3.SS5.SSS1.p2.7.m3.1.1.3.3.3.3">𝑉</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.7.m3.1c">\mathbf{W}^{O}\in{\mathbb{R}^{d_{V}\times d_{V}}}</annotation></semantics></math> are learnable parameters, <math id="S3.SS5.SSS1.p2.8.m4.1" class="ltx_Math" alttext="\bm{h}_{d}" display="inline"><semantics id="S3.SS5.SSS1.p2.8.m4.1a"><msub id="S3.SS5.SSS1.p2.8.m4.1.1" xref="S3.SS5.SSS1.p2.8.m4.1.1.cmml"><mi id="S3.SS5.SSS1.p2.8.m4.1.1.2" xref="S3.SS5.SSS1.p2.8.m4.1.1.2.cmml">𝒉</mi><mi id="S3.SS5.SSS1.p2.8.m4.1.1.3" xref="S3.SS5.SSS1.p2.8.m4.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.8.m4.1b"><apply id="S3.SS5.SSS1.p2.8.m4.1.1.cmml" xref="S3.SS5.SSS1.p2.8.m4.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.8.m4.1.1.1.cmml" xref="S3.SS5.SSS1.p2.8.m4.1.1">subscript</csymbol><ci id="S3.SS5.SSS1.p2.8.m4.1.1.2.cmml" xref="S3.SS5.SSS1.p2.8.m4.1.1.2">𝒉</ci><ci id="S3.SS5.SSS1.p2.8.m4.1.1.3.cmml" xref="S3.SS5.SSS1.p2.8.m4.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.8.m4.1c">\bm{h}_{d}</annotation></semantics></math> is the representation of <math id="S3.SS5.SSS1.p2.9.m5.1" class="ltx_Math" alttext="d_{W}" display="inline"><semantics id="S3.SS5.SSS1.p2.9.m5.1a"><msub id="S3.SS5.SSS1.p2.9.m5.1.1" xref="S3.SS5.SSS1.p2.9.m5.1.1.cmml"><mi id="S3.SS5.SSS1.p2.9.m5.1.1.2" xref="S3.SS5.SSS1.p2.9.m5.1.1.2.cmml">d</mi><mi id="S3.SS5.SSS1.p2.9.m5.1.1.3" xref="S3.SS5.SSS1.p2.9.m5.1.1.3.cmml">W</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p2.9.m5.1b"><apply id="S3.SS5.SSS1.p2.9.m5.1.1.cmml" xref="S3.SS5.SSS1.p2.9.m5.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p2.9.m5.1.1.1.cmml" xref="S3.SS5.SSS1.p2.9.m5.1.1">subscript</csymbol><ci id="S3.SS5.SSS1.p2.9.m5.1.1.2.cmml" xref="S3.SS5.SSS1.p2.9.m5.1.1.2">𝑑</ci><ci id="S3.SS5.SSS1.p2.9.m5.1.1.3.cmml" xref="S3.SS5.SSS1.p2.9.m5.1.1.3">𝑊</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p2.9.m5.1c">d_{W}</annotation></semantics></math> sequences.</p>
</div>
<figure id="S3.T1" class="ltx_table">

<figcaption class="ltx_caption ltx_centering" style="font-size:90%;"><span class="ltx_tag ltx_tag_table">Table 1. </span>Comparison results on the <span id="S3.T1.12.1" class="ltx_text ltx_font_italic">Office-Arts</span> and <span id="S3.T1.13.2" class="ltx_text ltx_font_italic">OnlineRetail-Pantry</span> datasets. <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> (l) means we use the light prompting strategy for fine-tuning. <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> (f) means we exploit the full prompting strategy for fine-tuning. We will use <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> to refer to <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> (f) in the following unless otherwise specified.</figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<div id="S3.T1.1" class="ltx_inline-block ltx_figure_panel ltx_align_center ltx_transformed_outer" style="width:1959.3pt;height:292.5pt;vertical-align:-0.9pt;"><span class="ltx_transformed_inner" style="transform:translate(-108.9pt,16.2pt) scale(0.9,0.9) ;">
<table id="S3.T1.1.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S3.T1.1.1.2.1" class="ltx_tr">
<td id="S3.T1.1.1.2.1.1" class="ltx_td ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
<th id="S3.T1.1.1.2.1.2" class="ltx_td ltx_th ltx_th_column ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;"></th>
<th id="S3.T1.1.1.2.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;" colspan="3"><span id="S3.T1.1.1.2.1.3.1" class="ltx_text ltx_font_bold" style="font-size:90%;">ID-Only Methods</span></th>
<th id="S3.T1.1.1.2.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;" colspan="2"><span id="S3.T1.1.1.2.1.4.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Cross-Domain Methods</span></th>
<th id="S3.T1.1.1.2.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;" colspan="2"><span id="S3.T1.1.1.2.1.5.1" class="ltx_text ltx_font_bold" style="font-size:90%;">ID-Text Methods</span></th>
<th id="S3.T1.1.1.2.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;" colspan="2"><span id="S3.T1.1.1.2.1.6.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Text-Only Methods</span></th>
<th id="S3.T1.1.1.2.1.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.2.1.7.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Light</span></th>
<th id="S3.T1.1.1.2.1.8" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.2.1.8.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Full</span></th>
<td id="S3.T1.1.1.2.1.9" class="ltx_td ltx_border_tt" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.1" class="ltx_tr">
<th id="S3.T1.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.2.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Dataset</span></th>
<th id="S3.T1.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.3.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Metric</span></th>
<th id="S3.T1.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.4.1" class="ltx_text ltx_font_bold" style="font-size:90%;">GRU4Rec<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.4.1.1.1" class="ltx_text ltx_font_medium">(</span>Hidasi et al<span class="ltx_text">.</span><span id="S3.T1.1.1.1.4.1.2.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib12" title="" class="ltx_ref">2015</a><span id="S3.T1.1.1.1.4.1.3.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.5.1" class="ltx_text ltx_font_bold" style="font-size:90%;">SASRec<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.5.1.1.1" class="ltx_text ltx_font_medium">(</span>Kang and McAuley<span id="S3.T1.1.1.1.5.1.2.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib17" title="" class="ltx_ref">2018</a><span id="S3.T1.1.1.1.5.1.3.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.6.1" class="ltx_text ltx_font_bold" style="font-size:90%;">BERT4Rec<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.6.1.1.1" class="ltx_text ltx_font_medium">(</span>Sun et al<span class="ltx_text">.</span><span id="S3.T1.1.1.1.6.1.2.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib37" title="" class="ltx_ref">2019</a><span id="S3.T1.1.1.1.6.1.3.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.7.1" class="ltx_text ltx_font_bold" style="font-size:90%;">CCDR<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.7.1.1.1" class="ltx_text ltx_font_medium">(</span>Xie et al<span class="ltx_text">.</span><span id="S3.T1.1.1.1.7.1.2.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib48" title="" class="ltx_ref">2022</a><span id="S3.T1.1.1.1.7.1.3.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.8" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.8.1" class="ltx_text ltx_font_bold" style="font-size:90%;">RecGURU<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.8.1.1.1" class="ltx_text ltx_font_medium">(</span>Li et al<span class="ltx_text">.</span><span id="S3.T1.1.1.1.8.1.2.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib21" title="" class="ltx_ref">2022</a><span id="S3.T1.1.1.1.8.1.3.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.9" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.9.1" class="ltx_text ltx_font_bold" style="font-size:90%;">FDSA<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.9.1.1.1" class="ltx_text ltx_font_medium">(</span>Zhang et al<span class="ltx_text">.</span><span id="S3.T1.1.1.1.9.1.2.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib56" title="" class="ltx_ref">2019</a><span id="S3.T1.1.1.1.9.1.3.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.1.1" class="ltx_text ltx_font_bold" style="font-size:90%;">S<sup id="S3.T1.1.1.1.1.1.1" class="ltx_sup"><span id="S3.T1.1.1.1.1.1.1.1" class="ltx_text ltx_font_medium">3</span></sup>Rec<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.1.1.2.1" class="ltx_text ltx_font_medium">(</span>Zhou et al<span class="ltx_text">.</span><span id="S3.T1.1.1.1.1.1.3.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib57" title="" class="ltx_ref">2020</a><span id="S3.T1.1.1.1.1.1.4.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.10" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.10.1" class="ltx_text ltx_font_bold" style="font-size:90%;">ZESRec<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.10.1.1.1" class="ltx_text ltx_font_medium">(</span>Ding et al<span class="ltx_text">.</span><span id="S3.T1.1.1.1.10.1.2.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib6" title="" class="ltx_ref">2021</a><span id="S3.T1.1.1.1.10.1.3.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.11" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.1.11.1" class="ltx_text ltx_font_bold" style="font-size:90%;">VQRec<cite class="ltx_cite ltx_citemacro_citep"><span id="S3.T1.1.1.1.11.1.1.1" class="ltx_text ltx_font_medium">(</span>Hou et al<span class="ltx_text">.</span><span id="S3.T1.1.1.1.11.1.2.2.1.1" class="ltx_text ltx_font_medium">, </span><a href="#bib.bib13" title="" class="ltx_ref">2023</a><span id="S3.T1.1.1.1.11.1.3.3" class="ltx_text ltx_font_medium">)</span></cite></span></th>
<th id="S3.T1.1.1.1.12" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr><span id="S3.T1.1.1.1.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;"> (l)</span>
</th>
<th id="S3.T1.1.1.1.13" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr><span id="S3.T1.1.1.1.13.1" class="ltx_text ltx_font_bold" style="font-size:90%;"> (f)</span>
</th>
<td id="S3.T1.1.1.1.14" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.3.2" class="ltx_tr">
<td id="S3.T1.1.1.3.2.1" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;" rowspan="4"><span id="S3.T1.1.1.3.2.1.1" class="ltx_text" style="font-size:90%;">Office</span></td>
<td id="S3.T1.1.1.3.2.2" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.2.1" class="ltx_text" style="font-size:90%;">Recall@10</span></td>
<td id="S3.T1.1.1.3.2.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.3.1" class="ltx_text" style="font-size:90%;">0.1049</span></td>
<td id="S3.T1.1.1.3.2.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.4.1" class="ltx_text" style="font-size:90%;">0.1157</span></td>
<td id="S3.T1.1.1.3.2.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.5.1" class="ltx_text" style="font-size:90%;">0.0693</span></td>
<td id="S3.T1.1.1.3.2.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.6.1" class="ltx_text" style="font-size:90%;">0.0549</span></td>
<td id="S3.T1.1.1.3.2.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.7.1" class="ltx_text" style="font-size:90%;">0.1145</span></td>
<td id="S3.T1.1.1.3.2.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.8.1" class="ltx_text" style="font-size:90%;">0.1091</span></td>
<td id="S3.T1.1.1.3.2.9" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.9.1" class="ltx_text" style="font-size:90%;">0.1030</span></td>
<td id="S3.T1.1.1.3.2.10" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.10.1" class="ltx_text" style="font-size:90%;">0.0641</span></td>
<td id="S3.T1.1.1.3.2.11" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.3.2.11.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.3.2.11.2" class="ltx_text" style="font-size:90%;">0.1207</span>
</td>
<td id="S3.T1.1.1.3.2.12" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.3.2.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.1215</span><span id="S3.T1.1.1.3.2.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.3.2.13" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.3.2.13.1" class="ltx_text" style="font-size:90%;">0.1206</span></td>
<td id="S3.T1.1.1.3.2.14" class="ltx_td ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.4.3" class="ltx_tr">
<td id="S3.T1.1.1.4.3.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.1.1" class="ltx_text" style="font-size:90%;">NDCG@10</span></td>
<td id="S3.T1.1.1.4.3.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.4.3.2.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.4.3.2.2" class="ltx_text" style="font-size:90%;">0.0804</span>
</td>
<td id="S3.T1.1.1.4.3.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.3.1" class="ltx_text" style="font-size:90%;">0.0663</span></td>
<td id="S3.T1.1.1.4.3.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.4.1" class="ltx_text" style="font-size:90%;">0.0554</span></td>
<td id="S3.T1.1.1.4.3.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.5.1" class="ltx_text" style="font-size:90%;">0.0290</span></td>
<td id="S3.T1.1.1.4.3.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.6.1" class="ltx_text" style="font-size:90%;">0.0768</span></td>
<td id="S3.T1.1.1.4.3.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.7.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.0821</span></td>
<td id="S3.T1.1.1.4.3.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.8.1" class="ltx_text" style="font-size:90%;">0.0653</span></td>
<td id="S3.T1.1.1.4.3.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.9.1" class="ltx_text" style="font-size:90%;">0.0391</span></td>
<td id="S3.T1.1.1.4.3.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.10.1" class="ltx_text" style="font-size:90%;">0.0742</span></td>
<td id="S3.T1.1.1.4.3.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.11.1" class="ltx_text" style="font-size:90%;">0.0775</span></td>
<td id="S3.T1.1.1.4.3.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.4.3.12.1" class="ltx_text" style="font-size:90%;">0.0782</span></td>
<td id="S3.T1.1.1.4.3.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.5.4" class="ltx_tr">
<td id="S3.T1.1.1.5.4.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.1.1" class="ltx_text" style="font-size:90%;">Recall@50</span></td>
<td id="S3.T1.1.1.5.4.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.2.1" class="ltx_text" style="font-size:90%;">0.1626</span></td>
<td id="S3.T1.1.1.5.4.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.3.1" class="ltx_text" style="font-size:90%;">0.1799</span></td>
<td id="S3.T1.1.1.5.4.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.4.1" class="ltx_text" style="font-size:90%;">0.1182</span></td>
<td id="S3.T1.1.1.5.4.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.5.1" class="ltx_text" style="font-size:90%;">0.1095</span></td>
<td id="S3.T1.1.1.5.4.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.6.1" class="ltx_text" style="font-size:90%;">0.1757</span></td>
<td id="S3.T1.1.1.5.4.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.7.1" class="ltx_text" style="font-size:90%;">0.1697</span></td>
<td id="S3.T1.1.1.5.4.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.8.1" class="ltx_text" style="font-size:90%;">0.1613</span></td>
<td id="S3.T1.1.1.5.4.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.9.1" class="ltx_text" style="font-size:90%;">0.1113</span></td>
<td id="S3.T1.1.1.5.4.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.5.4.10.1" class="ltx_text" style="font-size:90%;">0.1934</span></td>
<td id="S3.T1.1.1.5.4.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.5.4.11.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.1945</span><span id="S3.T1.1.1.5.4.11.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.5.4.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.5.4.12.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.5.4.12.2" class="ltx_text" style="font-size:90%;">0.1938</span>
</td>
<td id="S3.T1.1.1.5.4.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.6.5" class="ltx_tr">
<td id="S3.T1.1.1.6.5.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.1.1" class="ltx_text" style="font-size:90%;">NDCG@50</span></td>
<td id="S3.T1.1.1.6.5.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.2.1" class="ltx_text" style="font-size:90%;">0.0929</span></td>
<td id="S3.T1.1.1.6.5.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.3.1" class="ltx_text" style="font-size:90%;">0.0803</span></td>
<td id="S3.T1.1.1.6.5.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.4.1" class="ltx_text" style="font-size:90%;">0.0617</span></td>
<td id="S3.T1.1.1.6.5.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.5.1" class="ltx_text" style="font-size:90%;">0.0401</span></td>
<td id="S3.T1.1.1.6.5.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.6.1" class="ltx_text" style="font-size:90%;">0.0901</span></td>
<td id="S3.T1.1.1.6.5.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.7.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.0953</span></td>
<td id="S3.T1.1.1.6.5.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.8.1" class="ltx_text" style="font-size:90%;">0.0780</span></td>
<td id="S3.T1.1.1.6.5.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.9.1" class="ltx_text" style="font-size:90%;">0.0493</span></td>
<td id="S3.T1.1.1.6.5.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.10.1" class="ltx_text" style="font-size:90%;">0.0900</span></td>
<td id="S3.T1.1.1.6.5.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.6.5.11.1" class="ltx_text" style="font-size:90%;">0.0933</span></td>
<td id="S3.T1.1.1.6.5.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.6.5.12.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.6.5.12.2" class="ltx_text" style="font-size:90%;">0.0941</span>
</td>
<td id="S3.T1.1.1.6.5.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.7.6" class="ltx_tr">
<td id="S3.T1.1.1.7.6.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;" rowspan="4"><span id="S3.T1.1.1.7.6.1.1" class="ltx_text" style="font-size:90%;">Arts</span></td>
<td id="S3.T1.1.1.7.6.2" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.2.1" class="ltx_text" style="font-size:90%;">Recall@10</span></td>
<td id="S3.T1.1.1.7.6.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.3.1" class="ltx_text" style="font-size:90%;">0.0893</span></td>
<td id="S3.T1.1.1.7.6.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.4.1" class="ltx_text" style="font-size:90%;">0.1048</span></td>
<td id="S3.T1.1.1.7.6.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.5.1" class="ltx_text" style="font-size:90%;">0.0638</span></td>
<td id="S3.T1.1.1.7.6.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.6.1" class="ltx_text" style="font-size:90%;">0.0671</span></td>
<td id="S3.T1.1.1.7.6.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.7.1" class="ltx_text" style="font-size:90%;">0.1084</span></td>
<td id="S3.T1.1.1.7.6.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.8.1" class="ltx_text" style="font-size:90%;">0.1016</span></td>
<td id="S3.T1.1.1.7.6.9" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.9.1" class="ltx_text" style="font-size:90%;">0.1003</span></td>
<td id="S3.T1.1.1.7.6.10" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.10.1" class="ltx_text" style="font-size:90%;">0.0664</span></td>
<td id="S3.T1.1.1.7.6.11" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.7.6.11.1" class="ltx_text" style="font-size:90%;">0.1132</span></td>
<td id="S3.T1.1.1.7.6.12" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.7.6.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.117</span><span id="S3.T1.1.1.7.6.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.7.6.13" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.7.6.13.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.7.6.13.2" class="ltx_text" style="font-size:90%;">0.1153</span>
</td>
<td id="S3.T1.1.1.7.6.14" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.8.7" class="ltx_tr">
<td id="S3.T1.1.1.8.7.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.1.1" class="ltx_text" style="font-size:90%;">NDCG@10</span></td>
<td id="S3.T1.1.1.8.7.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.2.1" class="ltx_text" style="font-size:90%;">0.0561</span></td>
<td id="S3.T1.1.1.8.7.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.3.1" class="ltx_text" style="font-size:90%;">0.0557</span></td>
<td id="S3.T1.1.1.8.7.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.4.1" class="ltx_text" style="font-size:90%;">0.0364</span></td>
<td id="S3.T1.1.1.8.7.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.5.1" class="ltx_text" style="font-size:90%;">0.0348</span></td>
<td id="S3.T1.1.1.8.7.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.6.1" class="ltx_text" style="font-size:90%;">0.0651</span></td>
<td id="S3.T1.1.1.8.7.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.8.7.7.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.8.7.7.2" class="ltx_text" style="font-size:90%;">0.0671</span>
</td>
<td id="S3.T1.1.1.8.7.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.8.1" class="ltx_text" style="font-size:90%;">0.0601</span></td>
<td id="S3.T1.1.1.8.7.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.9.1" class="ltx_text" style="font-size:90%;">0.0375</span></td>
<td id="S3.T1.1.1.8.7.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.10.1" class="ltx_text" style="font-size:90%;">0.0624</span></td>
<td id="S3.T1.1.1.8.7.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.8.7.11.1" class="ltx_text" style="font-size:90%;">0.0651</span></td>
<td id="S3.T1.1.1.8.7.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.8.7.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.0677</span><span id="S3.T1.1.1.8.7.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.8.7.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.9.8" class="ltx_tr">
<td id="S3.T1.1.1.9.8.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.1.1" class="ltx_text" style="font-size:90%;">Recall@50</span></td>
<td id="S3.T1.1.1.9.8.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.2.1" class="ltx_text" style="font-size:90%;">0.1318</span></td>
<td id="S3.T1.1.1.9.8.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.3.1" class="ltx_text" style="font-size:90%;">0.1948</span></td>
<td id="S3.T1.1.1.9.8.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.4.1" class="ltx_text" style="font-size:90%;">0.1318</span></td>
<td id="S3.T1.1.1.9.8.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.5.1" class="ltx_text" style="font-size:90%;">0.1478</span></td>
<td id="S3.T1.1.1.9.8.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.6.1" class="ltx_text" style="font-size:90%;">0.1979</span></td>
<td id="S3.T1.1.1.9.8.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.7.1" class="ltx_text" style="font-size:90%;">0.1887</span></td>
<td id="S3.T1.1.1.9.8.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.8.1" class="ltx_text" style="font-size:90%;">0.1888</span></td>
<td id="S3.T1.1.1.9.8.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.9.1" class="ltx_text" style="font-size:90%;">0.1323</span></td>
<td id="S3.T1.1.1.9.8.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.9.8.10.1" class="ltx_text" style="font-size:90%;">0.2160</span></td>
<td id="S3.T1.1.1.9.8.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.9.8.11.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.2208</span><span id="S3.T1.1.1.9.8.11.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.9.8.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.9.8.12.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.9.8.12.2" class="ltx_text" style="font-size:90%;">0.2199</span>
</td>
<td id="S3.T1.1.1.9.8.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.10.9" class="ltx_tr">
<td id="S3.T1.1.1.10.9.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.1.1" class="ltx_text" style="font-size:90%;">NDCG@50</span></td>
<td id="S3.T1.1.1.10.9.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.2.1" class="ltx_text" style="font-size:90%;">0.0745</span></td>
<td id="S3.T1.1.1.10.9.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.3.1" class="ltx_text" style="font-size:90%;">0.0753</span></td>
<td id="S3.T1.1.1.10.9.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.4.1" class="ltx_text" style="font-size:90%;">0.0510</span></td>
<td id="S3.T1.1.1.10.9.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.5.1" class="ltx_text" style="font-size:90%;">0.0523</span></td>
<td id="S3.T1.1.1.10.9.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.6.1" class="ltx_text" style="font-size:90%;">0.0845</span></td>
<td id="S3.T1.1.1.10.9.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.7.1" class="ltx_text" style="font-size:90%;">0.0860</span></td>
<td id="S3.T1.1.1.10.9.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.8.1" class="ltx_text" style="font-size:90%;">0.0793</span></td>
<td id="S3.T1.1.1.10.9.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.9.1" class="ltx_text" style="font-size:90%;">0.0518</span></td>
<td id="S3.T1.1.1.10.9.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.10.9.10.1" class="ltx_text" style="font-size:90%;">0.0848</span></td>
<td id="S3.T1.1.1.10.9.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.10.9.11.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.10.9.11.2" class="ltx_text" style="font-size:90%;">0.0877</span>
</td>
<td id="S3.T1.1.1.10.9.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.10.9.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.0904</span><span id="S3.T1.1.1.10.9.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.10.9.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.11.10" class="ltx_tr">
<td id="S3.T1.1.1.11.10.1" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;" rowspan="4"><span id="S3.T1.1.1.11.10.1.1" class="ltx_text" style="font-size:90%;">OR</span></td>
<td id="S3.T1.1.1.11.10.2" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.2.1" class="ltx_text" style="font-size:90%;">Recall@10</span></td>
<td id="S3.T1.1.1.11.10.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.3.1" class="ltx_text" style="font-size:90%;">0.1461</span></td>
<td id="S3.T1.1.1.11.10.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.4.1" class="ltx_text" style="font-size:90%;">0.1484</span></td>
<td id="S3.T1.1.1.11.10.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.5.1" class="ltx_text" style="font-size:90%;">0.1392</span></td>
<td id="S3.T1.1.1.11.10.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.6.1" class="ltx_text" style="font-size:90%;">0.1347</span></td>
<td id="S3.T1.1.1.11.10.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.7.1" class="ltx_text" style="font-size:90%;">0.1467</span></td>
<td id="S3.T1.1.1.11.10.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.8.1" class="ltx_text" style="font-size:90%;">0.1487</span></td>
<td id="S3.T1.1.1.11.10.9" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.9.1" class="ltx_text" style="font-size:90%;">0.1418</span></td>
<td id="S3.T1.1.1.11.10.10" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.10.1" class="ltx_text" style="font-size:90%;">0.1103</span></td>
<td id="S3.T1.1.1.11.10.11" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.11.10.11.1" class="ltx_text" style="font-size:90%;">0.1496</span></td>
<td id="S3.T1.1.1.11.10.12" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.11.10.12.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.11.10.12.2" class="ltx_text" style="font-size:90%;">0.1522</span>
</td>
<td id="S3.T1.1.1.11.10.13" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.11.10.13.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.1561</span><span id="S3.T1.1.1.11.10.13.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.11.10.14" class="ltx_td ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.12.11" class="ltx_tr">
<td id="S3.T1.1.1.12.11.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.1.1" class="ltx_text" style="font-size:90%;">NDCG@10</span></td>
<td id="S3.T1.1.1.12.11.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.2.1" class="ltx_text" style="font-size:90%;">0.0715</span></td>
<td id="S3.T1.1.1.12.11.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.3.1" class="ltx_text" style="font-size:90%;">0.0684</span></td>
<td id="S3.T1.1.1.12.11.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.4.1" class="ltx_text" style="font-size:90%;">0.0642</span></td>
<td id="S3.T1.1.1.12.11.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.5.1" class="ltx_text" style="font-size:90%;">0.0658</span></td>
<td id="S3.T1.1.1.12.11.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.6.1" class="ltx_text" style="font-size:90%;">0.0535</span></td>
<td id="S3.T1.1.1.12.11.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.12.11.7.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.12.11.7.2" class="ltx_text" style="font-size:90%;">0.0715</span>
</td>
<td id="S3.T1.1.1.12.11.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.8.1" class="ltx_text" style="font-size:90%;">0.0654</span></td>
<td id="S3.T1.1.1.12.11.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.9.1" class="ltx_text" style="font-size:90%;">0.0535</span></td>
<td id="S3.T1.1.1.12.11.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.10.1" class="ltx_text" style="font-size:90%;">0.0708</span></td>
<td id="S3.T1.1.1.12.11.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.12.11.11.1" class="ltx_text" style="font-size:90%;">0.0710</span></td>
<td id="S3.T1.1.1.12.11.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.12.11.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.0739</span><span id="S3.T1.1.1.12.11.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.12.11.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.13.12" class="ltx_tr">
<td id="S3.T1.1.1.13.12.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.1.1" class="ltx_text" style="font-size:90%;">Recall@50</span></td>
<td id="S3.T1.1.1.13.12.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.2.1" class="ltx_text" style="font-size:90%;">0.3848</span></td>
<td id="S3.T1.1.1.13.12.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.3.1" class="ltx_text" style="font-size:90%;">0.3921</span></td>
<td id="S3.T1.1.1.13.12.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.4.1" class="ltx_text" style="font-size:90%;">0.3668</span></td>
<td id="S3.T1.1.1.13.12.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.5.1" class="ltx_text" style="font-size:90%;">0.3587</span></td>
<td id="S3.T1.1.1.13.12.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.6.1" class="ltx_text" style="font-size:90%;">0.3885</span></td>
<td id="S3.T1.1.1.13.12.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.7.1" class="ltx_text" style="font-size:90%;">0.3748</span></td>
<td id="S3.T1.1.1.13.12.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.8.1" class="ltx_text" style="font-size:90%;">0.3702</span></td>
<td id="S3.T1.1.1.13.12.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.9.1" class="ltx_text" style="font-size:90%;">0.2750</span></td>
<td id="S3.T1.1.1.13.12.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.13.12.10.1" class="ltx_text" style="font-size:90%;">0.3900</span></td>
<td id="S3.T1.1.1.13.12.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.13.12.11.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.13.12.11.2" class="ltx_text" style="font-size:90%;">0.3958</span>
</td>
<td id="S3.T1.1.1.13.12.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.13.12.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.3982</span><span id="S3.T1.1.1.13.12.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.13.12.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.14.13" class="ltx_tr">
<td id="S3.T1.1.1.14.13.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.1.1" class="ltx_text" style="font-size:90%;">NDCG@50</span></td>
<td id="S3.T1.1.1.14.13.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.2.1" class="ltx_text" style="font-size:90%;">0.1235</span></td>
<td id="S3.T1.1.1.14.13.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.3.1" class="ltx_text" style="font-size:90%;">0.1216</span></td>
<td id="S3.T1.1.1.14.13.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.4.1" class="ltx_text" style="font-size:90%;">0.1137</span></td>
<td id="S3.T1.1.1.14.13.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.5.1" class="ltx_text" style="font-size:90%;">0.1108</span></td>
<td id="S3.T1.1.1.14.13.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.6.1" class="ltx_text" style="font-size:90%;">0.1188</span></td>
<td id="S3.T1.1.1.14.13.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.7.1" class="ltx_text" style="font-size:90%;">0.1208</span></td>
<td id="S3.T1.1.1.14.13.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.8.1" class="ltx_text" style="font-size:90%;">0.1154</span></td>
<td id="S3.T1.1.1.14.13.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.9.1" class="ltx_text" style="font-size:90%;">0.0896</span></td>
<td id="S3.T1.1.1.14.13.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.14.13.10.1" class="ltx_text" style="font-size:90%;">0.1234</span></td>
<td id="S3.T1.1.1.14.13.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.14.13.11.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.14.13.11.2" class="ltx_text" style="font-size:90%;">0.1241</span>
</td>
<td id="S3.T1.1.1.14.13.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.14.13.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.1266</span><span id="S3.T1.1.1.14.13.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.14.13.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.15.14" class="ltx_tr">
<td id="S3.T1.1.1.15.14.1" class="ltx_td ltx_align_left ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;" rowspan="4"><span id="S3.T1.1.1.15.14.1.1" class="ltx_text" style="font-size:90%;">Pantry</span></td>
<td id="S3.T1.1.1.15.14.2" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.2.1" class="ltx_text" style="font-size:90%;">Recall@10</span></td>
<td id="S3.T1.1.1.15.14.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.3.1" class="ltx_text" style="font-size:90%;">0.0379</span></td>
<td id="S3.T1.1.1.15.14.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.4.1" class="ltx_text" style="font-size:90%;">0.0467</span></td>
<td id="S3.T1.1.1.15.14.5" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.5.1" class="ltx_text" style="font-size:90%;">0.0281</span></td>
<td id="S3.T1.1.1.15.14.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.6.1" class="ltx_text" style="font-size:90%;">0.0408</span></td>
<td id="S3.T1.1.1.15.14.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.7.1" class="ltx_text" style="font-size:90%;">0.0469</span></td>
<td id="S3.T1.1.1.15.14.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.8.1" class="ltx_text" style="font-size:90%;">0.0414</span></td>
<td id="S3.T1.1.1.15.14.9" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.9.1" class="ltx_text" style="font-size:90%;">0.0444</span></td>
<td id="S3.T1.1.1.15.14.10" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.10.1" class="ltx_text" style="font-size:90%;">0.0454</span></td>
<td id="S3.T1.1.1.15.14.11" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.15.14.11.1" class="ltx_text" style="font-size:90%;">0.0561</span></td>
<td id="S3.T1.1.1.15.14.12" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.15.14.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.0620</span><span id="S3.T1.1.1.15.14.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.15.14.13" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.15.14.13.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.15.14.13.2" class="ltx_text" style="font-size:90%;">0.0616</span>
</td>
<td id="S3.T1.1.1.15.14.14" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.16.15" class="ltx_tr">
<td id="S3.T1.1.1.16.15.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.1.1" class="ltx_text" style="font-size:90%;">NDCG@10</span></td>
<td id="S3.T1.1.1.16.15.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.2.1" class="ltx_text" style="font-size:90%;">0.0193</span></td>
<td id="S3.T1.1.1.16.15.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.3.1" class="ltx_text" style="font-size:90%;">0.0207</span></td>
<td id="S3.T1.1.1.16.15.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.4.1" class="ltx_text" style="font-size:90%;">0.0142</span></td>
<td id="S3.T1.1.1.16.15.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.5.1" class="ltx_text" style="font-size:90%;">0.0203</span></td>
<td id="S3.T1.1.1.16.15.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.6.1" class="ltx_text" style="font-size:90%;">0.0209</span></td>
<td id="S3.T1.1.1.16.15.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.7.1" class="ltx_text" style="font-size:90%;">0.0218</span></td>
<td id="S3.T1.1.1.16.15.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.8.1" class="ltx_text" style="font-size:90%;">0.0214</span></td>
<td id="S3.T1.1.1.16.15.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.9.1" class="ltx_text" style="font-size:90%;">0.0230</span></td>
<td id="S3.T1.1.1.16.15.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.16.15.10.1" class="ltx_text" style="font-size:90%;">0.0251</span></td>
<td id="S3.T1.1.1.16.15.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.16.15.11.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.16.15.11.2" class="ltx_text" style="font-size:90%;">0.0272</span>
</td>
<td id="S3.T1.1.1.16.15.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.16.15.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.0293</span><span id="S3.T1.1.1.16.15.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.16.15.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.17.16" class="ltx_tr">
<td id="S3.T1.1.1.17.16.1" class="ltx_td ltx_align_left" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.1.1" class="ltx_text" style="font-size:90%;">Recall@50</span></td>
<td id="S3.T1.1.1.17.16.2" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.2.1" class="ltx_text" style="font-size:90%;">0.1285</span></td>
<td id="S3.T1.1.1.17.16.3" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.3.1" class="ltx_text" style="font-size:90%;">0.1298</span></td>
<td id="S3.T1.1.1.17.16.4" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.4.1" class="ltx_text" style="font-size:90%;">0.0984</span></td>
<td id="S3.T1.1.1.17.16.5" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.5.1" class="ltx_text" style="font-size:90%;">0.1262</span></td>
<td id="S3.T1.1.1.17.16.6" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.6.1" class="ltx_text" style="font-size:90%;">0.1269</span></td>
<td id="S3.T1.1.1.17.16.7" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.7.1" class="ltx_text" style="font-size:90%;">0.1198</span></td>
<td id="S3.T1.1.1.17.16.8" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.8.1" class="ltx_text" style="font-size:90%;">0.1315</span></td>
<td id="S3.T1.1.1.17.16.9" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.9.1" class="ltx_text" style="font-size:90%;">0.1141</span></td>
<td id="S3.T1.1.1.17.16.10" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.17.16.10.1" class="ltx_text" style="font-size:90%;">0.1528</span></td>
<td id="S3.T1.1.1.17.16.11" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.17.16.11.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.17.16.11.2" class="ltx_text" style="font-size:90%;">0.1560</span>
</td>
<td id="S3.T1.1.1.17.16.12" class="ltx_td ltx_align_center" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.17.16.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.1591</span><span id="S3.T1.1.1.17.16.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.17.16.13" class="ltx_td" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
<tr id="S3.T1.1.1.18.17" class="ltx_tr">
<td id="S3.T1.1.1.18.17.1" class="ltx_td ltx_align_left ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.1.1" class="ltx_text" style="font-size:90%;">NDCG@50</span></td>
<td id="S3.T1.1.1.18.17.2" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.2.1" class="ltx_text" style="font-size:90%;">0.0386</span></td>
<td id="S3.T1.1.1.18.17.3" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.3.1" class="ltx_text" style="font-size:90%;">0.0385</span></td>
<td id="S3.T1.1.1.18.17.4" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.4.1" class="ltx_text" style="font-size:90%;">0.0292</span></td>
<td id="S3.T1.1.1.18.17.5" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.5.1" class="ltx_text" style="font-size:90%;">0.0385</span></td>
<td id="S3.T1.1.1.18.17.6" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.6.1" class="ltx_text" style="font-size:90%;">0.0379</span></td>
<td id="S3.T1.1.1.18.17.7" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.7.1" class="ltx_text" style="font-size:90%;">0.0385</span></td>
<td id="S3.T1.1.1.18.17.8" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.8.1" class="ltx_text" style="font-size:90%;">0.0400</span></td>
<td id="S3.T1.1.1.18.17.9" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.9.1" class="ltx_text" style="font-size:90%;">0.0378</span></td>
<td id="S3.T1.1.1.18.17.10" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"><span id="S3.T1.1.1.18.17.10.1" class="ltx_text" style="font-size:90%;">0.0458</span></td>
<td id="S3.T1.1.1.18.17.11" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.18.17.11.1" class="ltx_ERROR undefined">\ul</span><span id="S3.T1.1.1.18.17.11.2" class="ltx_text" style="font-size:90%;">0.0474</span>
</td>
<td id="S3.T1.1.1.18.17.12" class="ltx_td ltx_align_center ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;">
<span id="S3.T1.1.1.18.17.12.1" class="ltx_text ltx_font_bold" style="font-size:90%;">0.0503</span><span id="S3.T1.1.1.18.17.12.2" class="ltx_text" style="font-size:90%;">*</span>
</td>
<td id="S3.T1.1.1.18.17.13" class="ltx_td ltx_border_bb" style="padding-left:2.4pt;padding-right:2.4pt;"></td>
</tr>
</tbody>
</table>
</span></div>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<ul id="S3.I1" class="ltx_itemize ltx_centering ltx_figure_panel">
<li id="S3.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S3.I1.i1.p1" class="ltx_para">
<p id="S3.I1.i1.p1.1" class="ltx_p"><span id="S3.I1.i1.p1.1.1" class="ltx_text" style="font-size:80%;">Significant improvements over the best baseline results are marked with * (t-test, </span><math id="S3.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="p" display="inline"><semantics id="S3.I1.i1.p1.1.m1.1a"><mi mathsize="80%" id="S3.I1.i1.p1.1.m1.1.1" xref="S3.I1.i1.p1.1.m1.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.1.m1.1b"><ci id="S3.I1.i1.p1.1.m1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.1.m1.1c">p</annotation></semantics></math><span id="S3.I1.i1.p1.1.2" class="ltx_text" style="font-size:80%;">¡ .05).</span></p>
</div>
</li>
</ul>
</div>
</div>
</figure>
<div id="S3.SS5.SSS1.p3" class="ltx_para">
<p id="S3.SS5.SSS1.p3.1" class="ltx_p"><span id="S3.SS5.SSS1.p3.1.1" class="ltx_text ltx_font_bold">User Prompt.</span>
This is to model users’ personal preferences in each domain.
We represent it by the sequences of original item IDs, since they are unique to each user and can as supplementary information to user preferences (they are specific to each domain, and do not need to have cross-domain information).
Then, we encode it (<math id="S3.SS5.SSS1.p3.1.m1.1" class="ltx_Math" alttext="\bm{P}_{\text{user}}" display="inline"><semantics id="S3.SS5.SSS1.p3.1.m1.1a"><msub id="S3.SS5.SSS1.p3.1.m1.1.1" xref="S3.SS5.SSS1.p3.1.m1.1.1.cmml"><mi id="S3.SS5.SSS1.p3.1.m1.1.1.2" xref="S3.SS5.SSS1.p3.1.m1.1.1.2.cmml">𝑷</mi><mtext id="S3.SS5.SSS1.p3.1.m1.1.1.3" xref="S3.SS5.SSS1.p3.1.m1.1.1.3a.cmml">user</mtext></msub><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p3.1.m1.1b"><apply id="S3.SS5.SSS1.p3.1.m1.1.1.cmml" xref="S3.SS5.SSS1.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p3.1.m1.1.1.1.cmml" xref="S3.SS5.SSS1.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS5.SSS1.p3.1.m1.1.1.2.cmml" xref="S3.SS5.SSS1.p3.1.m1.1.1.2">𝑷</ci><ci id="S3.SS5.SSS1.p3.1.m1.1.1.3a.cmml" xref="S3.SS5.SSS1.p3.1.m1.1.1.3"><mtext mathsize="70%" id="S3.SS5.SSS1.p3.1.m1.1.1.3.cmml" xref="S3.SS5.SSS1.p3.1.m1.1.1.3">user</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p3.1.m1.1c">\bm{P}_{\text{user}}</annotation></semantics></math>) by a transformer-style user prompt encoder(called UPE), which is defined as:</p>
<table id="S3.E21" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(21)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E21.m1.3" class="ltx_Math" alttext="\bm{P}_{\text{user}}=\operatorname{UPE}(\mathcal{S})." display="block"><semantics id="S3.E21.m1.3a"><mrow id="S3.E21.m1.3.3.1" xref="S3.E21.m1.3.3.1.1.cmml"><mrow id="S3.E21.m1.3.3.1.1" xref="S3.E21.m1.3.3.1.1.cmml"><msub id="S3.E21.m1.3.3.1.1.2" xref="S3.E21.m1.3.3.1.1.2.cmml"><mi id="S3.E21.m1.3.3.1.1.2.2" xref="S3.E21.m1.3.3.1.1.2.2.cmml">𝑷</mi><mtext id="S3.E21.m1.3.3.1.1.2.3" xref="S3.E21.m1.3.3.1.1.2.3a.cmml">user</mtext></msub><mo id="S3.E21.m1.3.3.1.1.1" xref="S3.E21.m1.3.3.1.1.1.cmml">=</mo><mrow id="S3.E21.m1.3.3.1.1.3.2" xref="S3.E21.m1.3.3.1.1.3.1.cmml"><mi id="S3.E21.m1.1.1" xref="S3.E21.m1.1.1.cmml">UPE</mi><mo id="S3.E21.m1.3.3.1.1.3.2a" xref="S3.E21.m1.3.3.1.1.3.1.cmml">⁡</mo><mrow id="S3.E21.m1.3.3.1.1.3.2.1" xref="S3.E21.m1.3.3.1.1.3.1.cmml"><mo stretchy="false" id="S3.E21.m1.3.3.1.1.3.2.1.1" xref="S3.E21.m1.3.3.1.1.3.1.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S3.E21.m1.2.2" xref="S3.E21.m1.2.2.cmml">𝒮</mi><mo stretchy="false" id="S3.E21.m1.3.3.1.1.3.2.1.2" xref="S3.E21.m1.3.3.1.1.3.1.cmml">)</mo></mrow></mrow></mrow><mo lspace="0em" id="S3.E21.m1.3.3.1.2" xref="S3.E21.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E21.m1.3b"><apply id="S3.E21.m1.3.3.1.1.cmml" xref="S3.E21.m1.3.3.1"><eq id="S3.E21.m1.3.3.1.1.1.cmml" xref="S3.E21.m1.3.3.1.1.1"></eq><apply id="S3.E21.m1.3.3.1.1.2.cmml" xref="S3.E21.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S3.E21.m1.3.3.1.1.2.1.cmml" xref="S3.E21.m1.3.3.1.1.2">subscript</csymbol><ci id="S3.E21.m1.3.3.1.1.2.2.cmml" xref="S3.E21.m1.3.3.1.1.2.2">𝑷</ci><ci id="S3.E21.m1.3.3.1.1.2.3a.cmml" xref="S3.E21.m1.3.3.1.1.2.3"><mtext mathsize="70%" id="S3.E21.m1.3.3.1.1.2.3.cmml" xref="S3.E21.m1.3.3.1.1.2.3">user</mtext></ci></apply><apply id="S3.E21.m1.3.3.1.1.3.1.cmml" xref="S3.E21.m1.3.3.1.1.3.2"><ci id="S3.E21.m1.1.1.cmml" xref="S3.E21.m1.1.1">UPE</ci><ci id="S3.E21.m1.2.2.cmml" xref="S3.E21.m1.2.2">𝒮</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E21.m1.3c">\bm{P}_{\text{user}}=\operatorname{UPE}(\mathcal{S}).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div id="S3.SS5.SSS1.p4" class="ltx_para">
<p id="S3.SS5.SSS1.p4.2" class="ltx_p">To this end, we concatenate domain prompt, user prompt, and sequence embedding, followed by a fully connected work, to make predictions:</p>
<table id="S3.E22" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(22)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E22.m1.1" class="ltx_Math" alttext="\bm{h}_{\text{full}}=\mathbf{W}^{C}[{\bm{P}_{\text{domain}}}\oplus{\bm{P}_{\text{user}}}\oplus{\bm{h}_{\mathcal{S}}}]+b^{C}," display="block"><semantics id="S3.E22.m1.1a"><mrow id="S3.E22.m1.1.1.1" xref="S3.E22.m1.1.1.1.1.cmml"><mrow id="S3.E22.m1.1.1.1.1" xref="S3.E22.m1.1.1.1.1.cmml"><msub id="S3.E22.m1.1.1.1.1.3" xref="S3.E22.m1.1.1.1.1.3.cmml"><mi id="S3.E22.m1.1.1.1.1.3.2" xref="S3.E22.m1.1.1.1.1.3.2.cmml">𝒉</mi><mtext id="S3.E22.m1.1.1.1.1.3.3" xref="S3.E22.m1.1.1.1.1.3.3a.cmml">full</mtext></msub><mo id="S3.E22.m1.1.1.1.1.2" xref="S3.E22.m1.1.1.1.1.2.cmml">=</mo><mrow id="S3.E22.m1.1.1.1.1.1" xref="S3.E22.m1.1.1.1.1.1.cmml"><mrow id="S3.E22.m1.1.1.1.1.1.1" xref="S3.E22.m1.1.1.1.1.1.1.cmml"><msup id="S3.E22.m1.1.1.1.1.1.1.3" xref="S3.E22.m1.1.1.1.1.1.1.3.cmml"><mi id="S3.E22.m1.1.1.1.1.1.1.3.2" xref="S3.E22.m1.1.1.1.1.1.1.3.2.cmml">𝐖</mi><mi id="S3.E22.m1.1.1.1.1.1.1.3.3" xref="S3.E22.m1.1.1.1.1.1.1.3.3.cmml">C</mi></msup><mo lspace="0em" rspace="0em" id="S3.E22.m1.1.1.1.1.1.1.2" xref="S3.E22.m1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E22.m1.1.1.1.1.1.1.1.1" xref="S3.E22.m1.1.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E22.m1.1.1.1.1.1.1.1.1.2" xref="S3.E22.m1.1.1.1.1.1.1.1.2.1.cmml">[</mo><mrow id="S3.E22.m1.1.1.1.1.1.1.1.1.1" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E22.m1.1.1.1.1.1.1.1.1.1.2" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.2.cmml">𝑷</mi><mtext id="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.3a.cmml">domain</mtext></msub><mo id="S3.E22.m1.1.1.1.1.1.1.1.1.1.1" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.1.cmml">⊕</mo><msub id="S3.E22.m1.1.1.1.1.1.1.1.1.1.3" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.2.cmml">𝑷</mi><mtext id="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.3a.cmml">user</mtext></msub><mo id="S3.E22.m1.1.1.1.1.1.1.1.1.1.1a" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.1.cmml">⊕</mo><msub id="S3.E22.m1.1.1.1.1.1.1.1.1.1.4" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.cmml"><mi id="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.2" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.2.cmml">𝒉</mi><mi class="ltx_font_mathcaligraphic" id="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.3" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.3.cmml">𝒮</mi></msub></mrow><mo stretchy="false" id="S3.E22.m1.1.1.1.1.1.1.1.1.3" xref="S3.E22.m1.1.1.1.1.1.1.1.2.1.cmml">]</mo></mrow></mrow><mo id="S3.E22.m1.1.1.1.1.1.2" xref="S3.E22.m1.1.1.1.1.1.2.cmml">+</mo><msup id="S3.E22.m1.1.1.1.1.1.3" xref="S3.E22.m1.1.1.1.1.1.3.cmml"><mi id="S3.E22.m1.1.1.1.1.1.3.2" xref="S3.E22.m1.1.1.1.1.1.3.2.cmml">b</mi><mi id="S3.E22.m1.1.1.1.1.1.3.3" xref="S3.E22.m1.1.1.1.1.1.3.3.cmml">C</mi></msup></mrow></mrow><mo id="S3.E22.m1.1.1.1.2" xref="S3.E22.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E22.m1.1b"><apply id="S3.E22.m1.1.1.1.1.cmml" xref="S3.E22.m1.1.1.1"><eq id="S3.E22.m1.1.1.1.1.2.cmml" xref="S3.E22.m1.1.1.1.1.2"></eq><apply id="S3.E22.m1.1.1.1.1.3.cmml" xref="S3.E22.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E22.m1.1.1.1.1.3.1.cmml" xref="S3.E22.m1.1.1.1.1.3">subscript</csymbol><ci id="S3.E22.m1.1.1.1.1.3.2.cmml" xref="S3.E22.m1.1.1.1.1.3.2">𝒉</ci><ci id="S3.E22.m1.1.1.1.1.3.3a.cmml" xref="S3.E22.m1.1.1.1.1.3.3"><mtext mathsize="70%" id="S3.E22.m1.1.1.1.1.3.3.cmml" xref="S3.E22.m1.1.1.1.1.3.3">full</mtext></ci></apply><apply id="S3.E22.m1.1.1.1.1.1.cmml" xref="S3.E22.m1.1.1.1.1.1"><plus id="S3.E22.m1.1.1.1.1.1.2.cmml" xref="S3.E22.m1.1.1.1.1.1.2"></plus><apply id="S3.E22.m1.1.1.1.1.1.1.cmml" xref="S3.E22.m1.1.1.1.1.1.1"><times id="S3.E22.m1.1.1.1.1.1.1.2.cmml" xref="S3.E22.m1.1.1.1.1.1.1.2"></times><apply id="S3.E22.m1.1.1.1.1.1.1.3.cmml" xref="S3.E22.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E22.m1.1.1.1.1.1.1.3.1.cmml" xref="S3.E22.m1.1.1.1.1.1.1.3">superscript</csymbol><ci id="S3.E22.m1.1.1.1.1.1.1.3.2.cmml" xref="S3.E22.m1.1.1.1.1.1.1.3.2">𝐖</ci><ci id="S3.E22.m1.1.1.1.1.1.1.3.3.cmml" xref="S3.E22.m1.1.1.1.1.1.1.3.3">𝐶</ci></apply><apply id="S3.E22.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E22.m1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.2">delimited-[]</csymbol><apply id="S3.E22.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E22.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.1">direct-sum</csymbol><apply id="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.2">𝑷</ci><ci id="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.3a.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.3"><mtext mathsize="70%" id="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.2.3">domain</mtext></ci></apply><apply id="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.2">𝑷</ci><ci id="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.3a.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.3"><mtext mathsize="70%" id="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.3.3">user</mtext></ci></apply><apply id="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.1.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.4">subscript</csymbol><ci id="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.2.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.2">𝒉</ci><ci id="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.3.cmml" xref="S3.E22.m1.1.1.1.1.1.1.1.1.1.4.3">𝒮</ci></apply></apply></apply></apply><apply id="S3.E22.m1.1.1.1.1.1.3.cmml" xref="S3.E22.m1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E22.m1.1.1.1.1.1.3.1.cmml" xref="S3.E22.m1.1.1.1.1.1.3">superscript</csymbol><ci id="S3.E22.m1.1.1.1.1.1.3.2.cmml" xref="S3.E22.m1.1.1.1.1.1.3.2">𝑏</ci><ci id="S3.E22.m1.1.1.1.1.1.3.3.cmml" xref="S3.E22.m1.1.1.1.1.1.3.3">𝐶</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E22.m1.1c">\bm{h}_{\text{full}}=\mathbf{W}^{C}[{\bm{P}_{\text{domain}}}\oplus{\bm{P}_{\text{user}}}\oplus{\bm{h}_{\mathcal{S}}}]+b^{C},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS5.SSS1.p4.1" class="ltx_p">where <math id="S3.SS5.SSS1.p4.1.m1.1" class="ltx_Math" alttext="{\mathbf{W}^{C}}:\mathbb{R}^{3d_{V}}\to\mathbb{R}^{d_{V}}" display="inline"><semantics id="S3.SS5.SSS1.p4.1.m1.1a"><mrow id="S3.SS5.SSS1.p4.1.m1.1.1" xref="S3.SS5.SSS1.p4.1.m1.1.1.cmml"><msup id="S3.SS5.SSS1.p4.1.m1.1.1.2" xref="S3.SS5.SSS1.p4.1.m1.1.1.2.cmml"><mi id="S3.SS5.SSS1.p4.1.m1.1.1.2.2" xref="S3.SS5.SSS1.p4.1.m1.1.1.2.2.cmml">𝐖</mi><mi id="S3.SS5.SSS1.p4.1.m1.1.1.2.3" xref="S3.SS5.SSS1.p4.1.m1.1.1.2.3.cmml">C</mi></msup><mo lspace="0.278em" rspace="0.278em" id="S3.SS5.SSS1.p4.1.m1.1.1.1" xref="S3.SS5.SSS1.p4.1.m1.1.1.1.cmml">:</mo><mrow id="S3.SS5.SSS1.p4.1.m1.1.1.3" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.cmml"><msup id="S3.SS5.SSS1.p4.1.m1.1.1.3.2" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.cmml"><mi id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.2" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.2.cmml">ℝ</mi><mrow id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.cmml"><mn id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.2" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.2.cmml">3</mn><mo lspace="0em" rspace="0em" id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.1" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.1.cmml">​</mo><msub id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.cmml"><mi id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.2" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.2.cmml">d</mi><mi id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.3" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.3.cmml">V</mi></msub></mrow></msup><mo stretchy="false" id="S3.SS5.SSS1.p4.1.m1.1.1.3.1" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.1.cmml">→</mo><msup id="S3.SS5.SSS1.p4.1.m1.1.1.3.3" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.cmml"><mi id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.2" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.2.cmml">ℝ</mi><msub id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.cmml"><mi id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.2" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.2.cmml">d</mi><mi id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.3" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.3.cmml">V</mi></msub></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS1.p4.1.m1.1b"><apply id="S3.SS5.SSS1.p4.1.m1.1.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1"><ci id="S3.SS5.SSS1.p4.1.m1.1.1.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.1">:</ci><apply id="S3.SS5.SSS1.p4.1.m1.1.1.2.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p4.1.m1.1.1.2.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.2">superscript</csymbol><ci id="S3.SS5.SSS1.p4.1.m1.1.1.2.2.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.2.2">𝐖</ci><ci id="S3.SS5.SSS1.p4.1.m1.1.1.2.3.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.2.3">𝐶</ci></apply><apply id="S3.SS5.SSS1.p4.1.m1.1.1.3.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3"><ci id="S3.SS5.SSS1.p4.1.m1.1.1.3.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.1">→</ci><apply id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2">superscript</csymbol><ci id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.2.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.2">ℝ</ci><apply id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3"><times id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.1"></times><cn type="integer" id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.2.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.2">3</cn><apply id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3">subscript</csymbol><ci id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.2.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.2">𝑑</ci><ci id="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.3.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.2.3.3.3">𝑉</ci></apply></apply></apply><apply id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3">superscript</csymbol><ci id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.2.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.2">ℝ</ci><apply id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.1.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3">subscript</csymbol><ci id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.2.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.2">𝑑</ci><ci id="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.3.cmml" xref="S3.SS5.SSS1.p4.1.m1.1.1.3.3.3.3">𝑉</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS1.p4.1.m1.1c">{\mathbf{W}^{C}}:\mathbb{R}^{3d_{V}}\to\mathbb{R}^{d_{V}}</annotation></semantics></math> represents the weight matrix.</p>
</div>
</section>
<section id="S3.SS5.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.5.2. </span>The Light Prompting Paradigm</h4>

<div id="S3.SS5.SSS2.p1" class="ltx_para">
<p id="S3.SS5.SSS2.p1.1" class="ltx_p">To reduce the storage and computational costs in the fine-tuning process, we further consider a light prompting paradigm by removing the item-level features (i.e., the user prompt) and concatenation layer.
The final sequence representation in this schema is:</p>
<table id="S3.E23" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(23)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E23.m1.1" class="ltx_Math" alttext="\bm{h}_{\text{light}}=\bm{P}_{\text{domain}}+\bm{h}_{\mathcal{S}}." display="block"><semantics id="S3.E23.m1.1a"><mrow id="S3.E23.m1.1.1.1" xref="S3.E23.m1.1.1.1.1.cmml"><mrow id="S3.E23.m1.1.1.1.1" xref="S3.E23.m1.1.1.1.1.cmml"><msub id="S3.E23.m1.1.1.1.1.2" xref="S3.E23.m1.1.1.1.1.2.cmml"><mi id="S3.E23.m1.1.1.1.1.2.2" xref="S3.E23.m1.1.1.1.1.2.2.cmml">𝒉</mi><mtext id="S3.E23.m1.1.1.1.1.2.3" xref="S3.E23.m1.1.1.1.1.2.3a.cmml">light</mtext></msub><mo id="S3.E23.m1.1.1.1.1.1" xref="S3.E23.m1.1.1.1.1.1.cmml">=</mo><mrow id="S3.E23.m1.1.1.1.1.3" xref="S3.E23.m1.1.1.1.1.3.cmml"><msub id="S3.E23.m1.1.1.1.1.3.2" xref="S3.E23.m1.1.1.1.1.3.2.cmml"><mi id="S3.E23.m1.1.1.1.1.3.2.2" xref="S3.E23.m1.1.1.1.1.3.2.2.cmml">𝑷</mi><mtext id="S3.E23.m1.1.1.1.1.3.2.3" xref="S3.E23.m1.1.1.1.1.3.2.3a.cmml">domain</mtext></msub><mo id="S3.E23.m1.1.1.1.1.3.1" xref="S3.E23.m1.1.1.1.1.3.1.cmml">+</mo><msub id="S3.E23.m1.1.1.1.1.3.3" xref="S3.E23.m1.1.1.1.1.3.3.cmml"><mi id="S3.E23.m1.1.1.1.1.3.3.2" xref="S3.E23.m1.1.1.1.1.3.3.2.cmml">𝒉</mi><mi class="ltx_font_mathcaligraphic" id="S3.E23.m1.1.1.1.1.3.3.3" xref="S3.E23.m1.1.1.1.1.3.3.3.cmml">𝒮</mi></msub></mrow></mrow><mo lspace="0em" id="S3.E23.m1.1.1.1.2" xref="S3.E23.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E23.m1.1b"><apply id="S3.E23.m1.1.1.1.1.cmml" xref="S3.E23.m1.1.1.1"><eq id="S3.E23.m1.1.1.1.1.1.cmml" xref="S3.E23.m1.1.1.1.1.1"></eq><apply id="S3.E23.m1.1.1.1.1.2.cmml" xref="S3.E23.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E23.m1.1.1.1.1.2.1.cmml" xref="S3.E23.m1.1.1.1.1.2">subscript</csymbol><ci id="S3.E23.m1.1.1.1.1.2.2.cmml" xref="S3.E23.m1.1.1.1.1.2.2">𝒉</ci><ci id="S3.E23.m1.1.1.1.1.2.3a.cmml" xref="S3.E23.m1.1.1.1.1.2.3"><mtext mathsize="70%" id="S3.E23.m1.1.1.1.1.2.3.cmml" xref="S3.E23.m1.1.1.1.1.2.3">light</mtext></ci></apply><apply id="S3.E23.m1.1.1.1.1.3.cmml" xref="S3.E23.m1.1.1.1.1.3"><plus id="S3.E23.m1.1.1.1.1.3.1.cmml" xref="S3.E23.m1.1.1.1.1.3.1"></plus><apply id="S3.E23.m1.1.1.1.1.3.2.cmml" xref="S3.E23.m1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E23.m1.1.1.1.1.3.2.1.cmml" xref="S3.E23.m1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.E23.m1.1.1.1.1.3.2.2.cmml" xref="S3.E23.m1.1.1.1.1.3.2.2">𝑷</ci><ci id="S3.E23.m1.1.1.1.1.3.2.3a.cmml" xref="S3.E23.m1.1.1.1.1.3.2.3"><mtext mathsize="70%" id="S3.E23.m1.1.1.1.1.3.2.3.cmml" xref="S3.E23.m1.1.1.1.1.3.2.3">domain</mtext></ci></apply><apply id="S3.E23.m1.1.1.1.1.3.3.cmml" xref="S3.E23.m1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.E23.m1.1.1.1.1.3.3.1.cmml" xref="S3.E23.m1.1.1.1.1.3.3">subscript</csymbol><ci id="S3.E23.m1.1.1.1.1.3.3.2.cmml" xref="S3.E23.m1.1.1.1.1.3.3.2">𝒉</ci><ci id="S3.E23.m1.1.1.1.1.3.3.3.cmml" xref="S3.E23.m1.1.1.1.1.3.3.3">𝒮</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E23.m1.1c">\bm{h}_{\text{light}}=\bm{P}_{\text{domain}}+\bm{h}_{\mathcal{S}}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div id="S3.SS5.SSS2.p2" class="ltx_para">
<p id="S3.SS5.SSS2.p2.3" class="ltx_p"><span id="S3.SS5.SSS2.p2.3.1" class="ltx_text ltx_font_bold">Learning Objective.</span>
For both paradigms, we minimize the following cross-entropy loss for learning optimal prompts (take domain A as an example):</p>
<table id="S3.E24" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left"><span class="ltx_tag ltx_tag_equation ltx_align_left">(24)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E24.m1.2" class="ltx_Math" alttext="{L_{A}}=-\frac{1}{{\left|{{\mathcal{S}_{A}}}\right|}}\sum\limits_{{\mathcal{S}_{i}^{A}}\in{\mathcal{S}_{A}}}{\log P({A_{i+1}}|{\mathcal{S}_{i}^{A}}})," display="block"><semantics id="S3.E24.m1.2a"><mrow id="S3.E24.m1.2.2.1" xref="S3.E24.m1.2.2.1.1.cmml"><mrow id="S3.E24.m1.2.2.1.1" xref="S3.E24.m1.2.2.1.1.cmml"><msub id="S3.E24.m1.2.2.1.1.3" xref="S3.E24.m1.2.2.1.1.3.cmml"><mi id="S3.E24.m1.2.2.1.1.3.2" xref="S3.E24.m1.2.2.1.1.3.2.cmml">L</mi><mi id="S3.E24.m1.2.2.1.1.3.3" xref="S3.E24.m1.2.2.1.1.3.3.cmml">A</mi></msub><mo id="S3.E24.m1.2.2.1.1.2" xref="S3.E24.m1.2.2.1.1.2.cmml">=</mo><mrow id="S3.E24.m1.2.2.1.1.1" xref="S3.E24.m1.2.2.1.1.1.cmml"><mo id="S3.E24.m1.2.2.1.1.1a" xref="S3.E24.m1.2.2.1.1.1.cmml">−</mo><mrow id="S3.E24.m1.2.2.1.1.1.1" xref="S3.E24.m1.2.2.1.1.1.1.cmml"><mfrac id="S3.E24.m1.1.1" xref="S3.E24.m1.1.1.cmml"><mn id="S3.E24.m1.1.1.3" xref="S3.E24.m1.1.1.3.cmml">1</mn><mrow id="S3.E24.m1.1.1.1.1" xref="S3.E24.m1.1.1.1.2.cmml"><mo id="S3.E24.m1.1.1.1.1.2" xref="S3.E24.m1.1.1.1.2.1.cmml">|</mo><msub id="S3.E24.m1.1.1.1.1.1" xref="S3.E24.m1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E24.m1.1.1.1.1.1.2" xref="S3.E24.m1.1.1.1.1.1.2.cmml">𝒮</mi><mi id="S3.E24.m1.1.1.1.1.1.3" xref="S3.E24.m1.1.1.1.1.1.3.cmml">A</mi></msub><mo id="S3.E24.m1.1.1.1.1.3" xref="S3.E24.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo lspace="0em" rspace="0em" id="S3.E24.m1.2.2.1.1.1.1.2" xref="S3.E24.m1.2.2.1.1.1.1.2.cmml">​</mo><mrow id="S3.E24.m1.2.2.1.1.1.1.1" xref="S3.E24.m1.2.2.1.1.1.1.1.cmml"><munder id="S3.E24.m1.2.2.1.1.1.1.1.2" xref="S3.E24.m1.2.2.1.1.1.1.1.2.cmml"><mo movablelimits="false" id="S3.E24.m1.2.2.1.1.1.1.1.2.2" xref="S3.E24.m1.2.2.1.1.1.1.1.2.2.cmml">∑</mo><mrow id="S3.E24.m1.2.2.1.1.1.1.1.2.3" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.cmml"><msubsup id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.2" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.2.cmml">𝒮</mi><mi id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.3" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.3.cmml">i</mi><mi id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.3" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.3.cmml">A</mi></msubsup><mo id="S3.E24.m1.2.2.1.1.1.1.1.2.3.1" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.1.cmml">∈</mo><msub id="S3.E24.m1.2.2.1.1.1.1.1.2.3.3" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.2" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.2.cmml">𝒮</mi><mi id="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.3" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.3.cmml">A</mi></msub></mrow></munder><mrow id="S3.E24.m1.2.2.1.1.1.1.1.1" xref="S3.E24.m1.2.2.1.1.1.1.1.1.cmml"><mrow id="S3.E24.m1.2.2.1.1.1.1.1.1.3" xref="S3.E24.m1.2.2.1.1.1.1.1.1.3.cmml"><mi id="S3.E24.m1.2.2.1.1.1.1.1.1.3.1" xref="S3.E24.m1.2.2.1.1.1.1.1.1.3.1.cmml">log</mi><mo lspace="0.167em" id="S3.E24.m1.2.2.1.1.1.1.1.1.3a" xref="S3.E24.m1.2.2.1.1.1.1.1.1.3.cmml">⁡</mo><mi id="S3.E24.m1.2.2.1.1.1.1.1.1.3.2" xref="S3.E24.m1.2.2.1.1.1.1.1.1.3.2.cmml">P</mi></mrow><mo lspace="0em" rspace="0em" id="S3.E24.m1.2.2.1.1.1.1.1.1.2" xref="S3.E24.m1.2.2.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.2" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.cmml">A</mi><mrow id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.cmml"><mi id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.2" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.2.cmml">i</mi><mo id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.1" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.1.cmml">+</mo><mn id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.3" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.3.cmml">1</mn></mrow></msub><mo fence="false" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.1" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml">|</mo><msubsup id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.2" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.2.cmml">𝒮</mi><mi id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.3" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.3.cmml">i</mi><mi id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.cmml">A</mi></msubsup></mrow><mo stretchy="false" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><mo id="S3.E24.m1.2.2.1.2" xref="S3.E24.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E24.m1.2b"><apply id="S3.E24.m1.2.2.1.1.cmml" xref="S3.E24.m1.2.2.1"><eq id="S3.E24.m1.2.2.1.1.2.cmml" xref="S3.E24.m1.2.2.1.1.2"></eq><apply id="S3.E24.m1.2.2.1.1.3.cmml" xref="S3.E24.m1.2.2.1.1.3"><csymbol cd="ambiguous" id="S3.E24.m1.2.2.1.1.3.1.cmml" xref="S3.E24.m1.2.2.1.1.3">subscript</csymbol><ci id="S3.E24.m1.2.2.1.1.3.2.cmml" xref="S3.E24.m1.2.2.1.1.3.2">𝐿</ci><ci id="S3.E24.m1.2.2.1.1.3.3.cmml" xref="S3.E24.m1.2.2.1.1.3.3">𝐴</ci></apply><apply id="S3.E24.m1.2.2.1.1.1.cmml" xref="S3.E24.m1.2.2.1.1.1"><minus id="S3.E24.m1.2.2.1.1.1.2.cmml" xref="S3.E24.m1.2.2.1.1.1"></minus><apply id="S3.E24.m1.2.2.1.1.1.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1"><times id="S3.E24.m1.2.2.1.1.1.1.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.2"></times><apply id="S3.E24.m1.1.1.cmml" xref="S3.E24.m1.1.1"><divide id="S3.E24.m1.1.1.2.cmml" xref="S3.E24.m1.1.1"></divide><cn type="integer" id="S3.E24.m1.1.1.3.cmml" xref="S3.E24.m1.1.1.3">1</cn><apply id="S3.E24.m1.1.1.1.2.cmml" xref="S3.E24.m1.1.1.1.1"><abs id="S3.E24.m1.1.1.1.2.1.cmml" xref="S3.E24.m1.1.1.1.1.2"></abs><apply id="S3.E24.m1.1.1.1.1.1.cmml" xref="S3.E24.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E24.m1.1.1.1.1.1.1.cmml" xref="S3.E24.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.E24.m1.1.1.1.1.1.2.cmml" xref="S3.E24.m1.1.1.1.1.1.2">𝒮</ci><ci id="S3.E24.m1.1.1.1.1.1.3.cmml" xref="S3.E24.m1.1.1.1.1.1.3">𝐴</ci></apply></apply></apply><apply id="S3.E24.m1.2.2.1.1.1.1.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1"><apply id="S3.E24.m1.2.2.1.1.1.1.1.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E24.m1.2.2.1.1.1.1.1.2.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2">subscript</csymbol><sum id="S3.E24.m1.2.2.1.1.1.1.1.2.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.2"></sum><apply id="S3.E24.m1.2.2.1.1.1.1.1.2.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3"><in id="S3.E24.m1.2.2.1.1.1.1.1.2.3.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.1"></in><apply id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2"><csymbol cd="ambiguous" id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2">superscript</csymbol><apply id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2"><csymbol cd="ambiguous" id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2">subscript</csymbol><ci id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.2">𝒮</ci><ci id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.2.3">𝑖</ci></apply><ci id="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.2.3">𝐴</ci></apply><apply id="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.3"><csymbol cd="ambiguous" id="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.3">subscript</csymbol><ci id="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.2">𝒮</ci><ci id="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.2.3.3.3">𝐴</ci></apply></apply></apply><apply id="S3.E24.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1"><times id="S3.E24.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.2"></times><apply id="S3.E24.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.3"><log id="S3.E24.m1.2.2.1.1.1.1.1.1.3.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.3.1"></log><ci id="S3.E24.m1.2.2.1.1.1.1.1.1.3.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.3.2">𝑃</ci></apply><apply id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.2">𝐴</ci><apply id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3"><plus id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.1"></plus><ci id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.2">𝑖</ci><cn type="integer" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3">superscript</csymbol><apply id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.1.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.2.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.2">𝒮</ci><ci id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.2.3">𝑖</ci></apply><ci id="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E24.m1.2.2.1.1.1.1.1.1.1.1.1.3.3">𝐴</ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E24.m1.2c">{L_{A}}=-\frac{1}{{\left|{{\mathcal{S}_{A}}}\right|}}\sum\limits_{{\mathcal{S}_{i}^{A}}\in{\mathcal{S}_{A}}}{\log P({A_{i+1}}|{\mathcal{S}_{i}^{A}}}),</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS5.SSS2.p2.2" class="ltx_p">where <math id="S3.SS5.SSS2.p2.1.m1.3" class="ltx_Math" alttext="P(A_{i+1}|{\mathcal{S}_{i}^{A}})=\operatorname{Softmax}(\bm{h}_{\text{full}}(\bm{h}_{\text{light}})\cdot\bm{V}_{\mathcal{A}})" display="inline"><semantics id="S3.SS5.SSS2.p2.1.m1.3a"><mrow id="S3.SS5.SSS2.p2.1.m1.3.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.cmml"><mrow id="S3.SS5.SSS2.p2.1.m1.2.2.1" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.cmml"><mi id="S3.SS5.SSS2.p2.1.m1.2.2.1.3" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.3.cmml">P</mi><mo lspace="0em" rspace="0em" id="S3.SS5.SSS2.p2.1.m1.2.2.1.2" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.2.cmml">​</mo><mrow id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.2" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.cmml">(</mo><mrow id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.cmml"><msub id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.cmml"><mi id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.2" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.2.cmml">A</mi><mrow id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.cmml"><mi id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.2" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.2.cmml">i</mi><mo id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.1" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.1.cmml">+</mo><mn id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.3" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.3.cmml">1</mn></mrow></msub><mo fence="false" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.1" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.1.cmml">|</mo><msubsup id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.2" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.2.cmml">𝒮</mi><mi id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.3" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.3.cmml">i</mi><mi id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.3" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.3.cmml">A</mi></msubsup></mrow><mo stretchy="false" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.3" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS5.SSS2.p2.1.m1.3.3.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.3.cmml">=</mo><mrow id="S3.SS5.SSS2.p2.1.m1.3.3.2.1" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.2.cmml"><mi id="S3.SS5.SSS2.p2.1.m1.1.1" xref="S3.SS5.SSS2.p2.1.m1.1.1.cmml">Softmax</mi><mo id="S3.SS5.SSS2.p2.1.m1.3.3.2.1a" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.2.cmml">⁡</mo><mrow id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.2.cmml"><mo stretchy="false" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.2" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.2.cmml">(</mo><mrow id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.cmml"><mrow id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.cmml"><msub id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.cmml"><mi id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.2" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.2.cmml">𝒉</mi><mtext id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.3a.cmml">full</mtext></msub><mo lspace="0em" rspace="0em" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.2" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.2.cmml">​</mo><mrow id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.2" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.cmml">(</mo><msub id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.cmml"><mi id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.2" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.2.cmml">𝒉</mi><mtext id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.3a.cmml">light</mtext></msub><mo rspace="0.055em" stretchy="false" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo rspace="0.222em" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.2" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.2.cmml">⋅</mo><msub id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.cmml"><mi id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.2" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.2.cmml">𝑽</mi><mi class="ltx_font_mathcaligraphic" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.3.cmml">𝒜</mi></msub></mrow><mo stretchy="false" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.3" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS2.p2.1.m1.3b"><apply id="S3.SS5.SSS2.p2.1.m1.3.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3"><eq id="S3.SS5.SSS2.p2.1.m1.3.3.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.3"></eq><apply id="S3.SS5.SSS2.p2.1.m1.2.2.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1"><times id="S3.SS5.SSS2.p2.1.m1.2.2.1.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.2"></times><ci id="S3.SS5.SSS2.p2.1.m1.2.2.1.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.3">𝑃</ci><apply id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1"><csymbol cd="latexml" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.1">conditional</csymbol><apply id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2">subscript</csymbol><ci id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.2">𝐴</ci><apply id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3"><plus id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.1"></plus><ci id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.2">𝑖</ci><cn type="integer" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3">superscript</csymbol><apply id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3">subscript</csymbol><ci id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.2">𝒮</ci><ci id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.2.3">𝑖</ci></apply><ci id="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.2.2.1.1.1.1.3.3">𝐴</ci></apply></apply></apply><apply id="S3.SS5.SSS2.p2.1.m1.3.3.2.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1"><ci id="S3.SS5.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.1.1">Softmax</ci><apply id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1"><ci id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.2">⋅</ci><apply id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1"><times id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.2"></times><apply id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3">subscript</csymbol><ci id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.2">𝒉</ci><ci id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.3a.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.3"><mtext mathsize="70%" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.3.3">full</mtext></ci></apply><apply id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.2">𝒉</ci><ci id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.3a.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.3"><mtext mathsize="70%" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.1.1.1.1.3">light</mtext></ci></apply></apply><apply id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.1.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3">subscript</csymbol><ci id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.2.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.2">𝑽</ci><ci id="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.3.cmml" xref="S3.SS5.SSS2.p2.1.m1.3.3.2.1.1.1.3.3">𝒜</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS2.p2.1.m1.3c">P(A_{i+1}|{\mathcal{S}_{i}^{A}})=\operatorname{Softmax}(\bm{h}_{\text{full}}(\bm{h}_{\text{light}})\cdot\bm{V}_{\mathcal{A}})</annotation></semantics></math> is the probability of predicting the next item <math id="S3.SS5.SSS2.p2.2.m2.1" class="ltx_Math" alttext="A_{i+1}" display="inline"><semantics id="S3.SS5.SSS2.p2.2.m2.1a"><msub id="S3.SS5.SSS2.p2.2.m2.1.1" xref="S3.SS5.SSS2.p2.2.m2.1.1.cmml"><mi id="S3.SS5.SSS2.p2.2.m2.1.1.2" xref="S3.SS5.SSS2.p2.2.m2.1.1.2.cmml">A</mi><mrow id="S3.SS5.SSS2.p2.2.m2.1.1.3" xref="S3.SS5.SSS2.p2.2.m2.1.1.3.cmml"><mi id="S3.SS5.SSS2.p2.2.m2.1.1.3.2" xref="S3.SS5.SSS2.p2.2.m2.1.1.3.2.cmml">i</mi><mo id="S3.SS5.SSS2.p2.2.m2.1.1.3.1" xref="S3.SS5.SSS2.p2.2.m2.1.1.3.1.cmml">+</mo><mn id="S3.SS5.SSS2.p2.2.m2.1.1.3.3" xref="S3.SS5.SSS2.p2.2.m2.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS5.SSS2.p2.2.m2.1b"><apply id="S3.SS5.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS5.SSS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS5.SSS2.p2.2.m2.1.1.1.cmml" xref="S3.SS5.SSS2.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS5.SSS2.p2.2.m2.1.1.2.cmml" xref="S3.SS5.SSS2.p2.2.m2.1.1.2">𝐴</ci><apply id="S3.SS5.SSS2.p2.2.m2.1.1.3.cmml" xref="S3.SS5.SSS2.p2.2.m2.1.1.3"><plus id="S3.SS5.SSS2.p2.2.m2.1.1.3.1.cmml" xref="S3.SS5.SSS2.p2.2.m2.1.1.3.1"></plus><ci id="S3.SS5.SSS2.p2.2.m2.1.1.3.2.cmml" xref="S3.SS5.SSS2.p2.2.m2.1.1.3.2">𝑖</ci><cn type="integer" id="S3.SS5.SSS2.p2.2.m2.1.1.3.3.cmml" xref="S3.SS5.SSS2.p2.2.m2.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.SSS2.p2.2.m2.1c">A_{i+1}</annotation></semantics></math>.
The two-stage optimization algorithm is shown in Appendix <a href="#A2" title="Appendix B Two-stage Training Process ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B</span></a>.</p>
</div>
</section>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4. </span>Experimental Setup</h2>

<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1. </span>Research Questions</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p">We fully evaluate our <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> method by answering the following research questions:</p>
<ul id="S4.I1" class="ltx_itemize">
<li id="S4.I1.ix1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S4.I1.ix1.1.1.1" class="ltx_text ltx_font_bold">RQ1</span></span> 
<div id="S4.I1.ix1.p1" class="ltx_para">
<p id="S4.I1.ix1.p1.1" class="ltx_p">How does <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> perform compared with the state-of-the-art baselines?</p>
</div>
</li>
<li id="S4.I1.ix2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S4.I1.ix2.1.1.1" class="ltx_text ltx_font_bold">RQ2</span></span> 
<div id="S4.I1.ix2.p1" class="ltx_para">
<p id="S4.I1.ix2.p1.1" class="ltx_p">How do the key components of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>, i.e.,  <span title="Vector-Quantified Item Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Vector-Quantified Item Representation</span></span> (<abbr title="Vector-Quantified Item Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">VQIR</span></abbr>),  <span title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Federated Content Representation</span></span> (<abbr title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCR</span></abbr>), and  <span title="Domain-adaptive Prompting" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_long">Domain-adaptive Prompting</span></span> (<abbr title="Domain-adaptive Prompting" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DP</span></abbr>), contribute to the performance of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>?</p>
</div>
</li>
<li id="S4.I1.ix3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S4.I1.ix3.1.1.1" class="ltx_text ltx_font_bold">RQ3</span></span> 
<div id="S4.I1.ix3.p1" class="ltx_para">
<p id="S4.I1.ix3.p1.1" class="ltx_p">How do different federated learning algorithms affect <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>?</p>
</div>
</li>
<li id="S4.I1.ix4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item"><span id="S4.I1.ix4.1.1.1" class="ltx_text ltx_font_bold">RQ4</span></span> 
<div id="S4.I1.ix4.p1" class="ltx_para">
<p id="S4.I1.ix4.p1.1" class="ltx_p">What are the impacts of the key hyper-parameters on the performance of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>?</p>
</div>
</li>
</ul>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2. </span>Datasets and Evaluation Protocols</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">We conduct experiments on two pairs of domains, i.e., ”<span id="S4.SS2.p1.1.1" class="ltx_text ltx_font_italic">Office-Arts</span>”, and ”<span id="S4.SS2.p1.1.2" class="ltx_text ltx_font_italic">OnlineRetail</span>-<span id="S4.SS2.p1.1.3" class="ltx_text ltx_font_italic">Pantry</span>”, in Amazon<span id="footnote2" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>https://nijianmo.github.io/amazon/index.html</span></span></span> and OnlineRetail<span id="footnote3" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>https://www.kaggle.com/carrie1/ecommerce-data</span></span></span> to evaluate our <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> method.
To conduct <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>, we select the Office and Arts domains in Amazon as our learning objective (i.e., the “<span id="S4.SS2.p1.1.4" class="ltx_text ltx_font_italic">Office-Arts</span>” dataset).
To further evaluate <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> on the cross-platform scenario, we select Pantry as one domain and the data from OnlineRetail as another (i.e., the “<span id="S4.SS2.p1.1.5" class="ltx_text ltx_font_italic">OnlineRetail-Pantry</span>” dataset).
To conduct sequential recommendations, all the users’ interaction behaviors are organized in chronological order.
To satisfy the non-overlapping characteristic, all the users and items are disjoint in different domains.
For a more detailed description of the datasets, please see Appendix <a href="#A1" title="Appendix A Datasets ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">A</span></a>.</p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p id="S4.SS2.p2.4" class="ltx_p">For evaluation, we adopt the leave-one-out strategy and utilize the last three items in each user sequence as the test, validation, and training targets, respectively.
We measure the experimental results by the commonly used metrics Recall@<math id="S4.SS2.p2.1.m1.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S4.SS2.p2.1.m1.1a"><mi id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.1b"><ci id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.1c">K</annotation></semantics></math> and NDCG@<math id="S4.SS2.p2.2.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S4.SS2.p2.2.m2.1a"><mi id="S4.SS2.p2.2.m2.1.1" xref="S4.SS2.p2.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.2.m2.1b"><ci id="S4.SS2.p2.2.m2.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.2.m2.1c">K</annotation></semantics></math>, where <math id="S4.SS2.p2.3.m3.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S4.SS2.p2.3.m3.1a"><mi id="S4.SS2.p2.3.m3.1.1" xref="S4.SS2.p2.3.m3.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.3.m3.1b"><ci id="S4.SS2.p2.3.m3.1.1.cmml" xref="S4.SS2.p2.3.m3.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.3.m3.1c">K</annotation></semantics></math> is <math id="S4.SS2.p2.4.m4.2" class="ltx_Math" alttext="\in\{10,50\}" display="inline"><semantics id="S4.SS2.p2.4.m4.2a"><mrow id="S4.SS2.p2.4.m4.2.3" xref="S4.SS2.p2.4.m4.2.3.cmml"><mi id="S4.SS2.p2.4.m4.2.3.2" xref="S4.SS2.p2.4.m4.2.3.2.cmml"></mi><mo id="S4.SS2.p2.4.m4.2.3.1" xref="S4.SS2.p2.4.m4.2.3.1.cmml">∈</mo><mrow id="S4.SS2.p2.4.m4.2.3.3.2" xref="S4.SS2.p2.4.m4.2.3.3.1.cmml"><mo stretchy="false" id="S4.SS2.p2.4.m4.2.3.3.2.1" xref="S4.SS2.p2.4.m4.2.3.3.1.cmml">{</mo><mn id="S4.SS2.p2.4.m4.1.1" xref="S4.SS2.p2.4.m4.1.1.cmml">10</mn><mo id="S4.SS2.p2.4.m4.2.3.3.2.2" xref="S4.SS2.p2.4.m4.2.3.3.1.cmml">,</mo><mn id="S4.SS2.p2.4.m4.2.2" xref="S4.SS2.p2.4.m4.2.2.cmml">50</mn><mo stretchy="false" id="S4.SS2.p2.4.m4.2.3.3.2.3" xref="S4.SS2.p2.4.m4.2.3.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.4.m4.2b"><apply id="S4.SS2.p2.4.m4.2.3.cmml" xref="S4.SS2.p2.4.m4.2.3"><in id="S4.SS2.p2.4.m4.2.3.1.cmml" xref="S4.SS2.p2.4.m4.2.3.1"></in><csymbol cd="latexml" id="S4.SS2.p2.4.m4.2.3.2.cmml" xref="S4.SS2.p2.4.m4.2.3.2">absent</csymbol><set id="S4.SS2.p2.4.m4.2.3.3.1.cmml" xref="S4.SS2.p2.4.m4.2.3.3.2"><cn type="integer" id="S4.SS2.p2.4.m4.1.1.cmml" xref="S4.SS2.p2.4.m4.1.1">10</cn><cn type="integer" id="S4.SS2.p2.4.m4.2.2.cmml" xref="S4.SS2.p2.4.m4.2.2">50</cn></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.4.m4.2c">\in\{10,50\}</annotation></semantics></math>.</p>
</div>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3. </span>Baselines</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p id="S4.SS3.p1.1" class="ltx_p">We compare <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> with the following four types of baselines. 1) ID-only sequential recommendation methods:
GRU4Rec <cite class="ltx_cite ltx_citemacro_citep">(Hidasi et al<span class="ltx_text">.</span>, <a href="#bib.bib12" title="" class="ltx_ref">2015</a>)</cite>, SASRec <cite class="ltx_cite ltx_citemacro_citep">(Kang and McAuley, <a href="#bib.bib17" title="" class="ltx_ref">2018</a>)</cite>, and BERT4Rec <cite class="ltx_cite ltx_citemacro_citep">(Sun et al<span class="ltx_text">.</span>, <a href="#bib.bib37" title="" class="ltx_ref">2019</a>)</cite>.
2) Non-overlapping <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> methods: CCDR <cite class="ltx_cite ltx_citemacro_citep">(Xie et al<span class="ltx_text">.</span>, <a href="#bib.bib48" title="" class="ltx_ref">2022</a>)</cite> and RecGURU <cite class="ltx_cite ltx_citemacro_citep">(Li et al<span class="ltx_text">.</span>, <a href="#bib.bib21" title="" class="ltx_ref">2022</a>)</cite>.
3) ID-Text recommendation methods: FDSA <cite class="ltx_cite ltx_citemacro_citep">(Zhang et al<span class="ltx_text">.</span>, <a href="#bib.bib56" title="" class="ltx_ref">2019</a>)</cite> and S<sup id="S4.SS3.p1.1.1" class="ltx_sup">3</sup>-Rec <cite class="ltx_cite ltx_citemacro_citep">(Zhou et al<span class="ltx_text">.</span>, <a href="#bib.bib57" title="" class="ltx_ref">2020</a>)</cite>.
4) Text-Only recommendation methods: ZESRec <cite class="ltx_cite ltx_citemacro_citep">(Ding et al<span class="ltx_text">.</span>, <a href="#bib.bib6" title="" class="ltx_ref">2021</a>)</cite> and VQRec <cite class="ltx_cite ltx_citemacro_citep">(Hou et al<span class="ltx_text">.</span>, <a href="#bib.bib13" title="" class="ltx_ref">2023</a>)</cite>.
We do not compare with the overlapping <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> methods since they need an identical number of training samples in both source and target domains.
To demonstrate the effectiveness of our federated strategies, we make comparisons with several typical federated methods, and report their results in Table <a href="#S6.T3" title="Table 3 ‣ 6.2. Impacts of Different Federated Learning Strategies (RQ3) ‣ 6. Model Analysis ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>.</p>
</div>
<figure id="S4.T2" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 2. </span>Ablation studies on the <span id="S4.T2.2.1" class="ltx_text ltx_font_italic">Office-Arts</span> dataset.</figcaption>
<table id="S4.T2.3" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T2.3.1.1" class="ltx_tr">
<th id="S4.T2.3.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;" rowspan="2"><span id="S4.T2.3.1.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">Variants</span></th>
<th id="S4.T2.3.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="4"><span id="S4.T2.3.1.1.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">Office</span></th>
<th id="S4.T2.3.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="4"><span id="S4.T2.3.1.1.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">Arts</span></th>
</tr>
<tr id="S4.T2.3.2.2" class="ltx_tr">
<th id="S4.T2.3.2.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="2"><span id="S4.T2.3.2.2.1.1" class="ltx_text" style="font-size:70%;">Recall</span></th>
<th id="S4.T2.3.2.2.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="2"><span id="S4.T2.3.2.2.2.1" class="ltx_text" style="font-size:70%;">NDCG</span></th>
<th id="S4.T2.3.2.2.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="2"><span id="S4.T2.3.2.2.3.1" class="ltx_text" style="font-size:70%;">Recall</span></th>
<th id="S4.T2.3.2.2.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="2"><span id="S4.T2.3.2.2.4.1" class="ltx_text" style="font-size:70%;">NDCG</span></th>
</tr>
<tr id="S4.T2.3.3.3" class="ltx_tr">
<th id="S4.T2.3.3.3.1" class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"></th>
<th id="S4.T2.3.3.3.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.3.3.2.1" class="ltx_text" style="font-size:70%;">@10</span></th>
<th id="S4.T2.3.3.3.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.3.3.3.1" class="ltx_text" style="font-size:70%;">@50</span></th>
<th id="S4.T2.3.3.3.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.3.3.4.1" class="ltx_text" style="font-size:70%;">@10</span></th>
<th id="S4.T2.3.3.3.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.3.3.5.1" class="ltx_text" style="font-size:70%;">@50</span></th>
<th id="S4.T2.3.3.3.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.3.3.6.1" class="ltx_text" style="font-size:70%;">@10</span></th>
<th id="S4.T2.3.3.3.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.3.3.7.1" class="ltx_text" style="font-size:70%;">@50</span></th>
<th id="S4.T2.3.3.3.8" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.3.3.8.1" class="ltx_text" style="font-size:70%;">@10</span></th>
<th id="S4.T2.3.3.3.9" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.3.3.9.1" class="ltx_text" style="font-size:70%;">@50</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T2.3.4.1" class="ltx_tr">
<th id="S4.T2.3.4.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.1.1" class="ltx_text" style="font-size:70%;">PFCR-VFD</span></th>
<td id="S4.T2.3.4.1.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.2.1" class="ltx_text" style="font-size:70%;">0.1157</span></td>
<td id="S4.T2.3.4.1.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.3.1" class="ltx_text" style="font-size:70%;">0.1799</span></td>
<td id="S4.T2.3.4.1.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.4.1" class="ltx_text" style="font-size:70%;">0.0663</span></td>
<td id="S4.T2.3.4.1.5" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.5.1" class="ltx_text" style="font-size:70%;">0.0803</span></td>
<td id="S4.T2.3.4.1.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.6.1" class="ltx_text" style="font-size:70%;">0.1048</span></td>
<td id="S4.T2.3.4.1.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.7.1" class="ltx_text" style="font-size:70%;">0.1948</span></td>
<td id="S4.T2.3.4.1.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.8.1" class="ltx_text" style="font-size:70%;">0.0557</span></td>
<td id="S4.T2.3.4.1.9" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.4.1.9.1" class="ltx_text" style="font-size:70%;">0.0753</span></td>
</tr>
<tr id="S4.T2.3.5.2" class="ltx_tr">
<th id="S4.T2.3.5.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.1.1" class="ltx_text" style="font-size:70%;">PFCR-FD</span></th>
<td id="S4.T2.3.5.2.2" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.2.1" class="ltx_text" style="font-size:70%;">0.1207</span></td>
<td id="S4.T2.3.5.2.3" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.3.1" class="ltx_text" style="font-size:70%;">0.1934</span></td>
<td id="S4.T2.3.5.2.4" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.4.1" class="ltx_text" style="font-size:70%;">0.0742</span></td>
<td id="S4.T2.3.5.2.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.5.1" class="ltx_text" style="font-size:70%;">0.0900</span></td>
<td id="S4.T2.3.5.2.6" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.6.1" class="ltx_text" style="font-size:70%;">0.1132</span></td>
<td id="S4.T2.3.5.2.7" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.7.1" class="ltx_text" style="font-size:70%;">0.216</span></td>
<td id="S4.T2.3.5.2.8" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.8.1" class="ltx_text" style="font-size:70%;">0.0624</span></td>
<td id="S4.T2.3.5.2.9" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.5.2.9.1" class="ltx_text" style="font-size:70%;">0.0848</span></td>
</tr>
<tr id="S4.T2.3.6.3" class="ltx_tr">
<th id="S4.T2.3.6.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.1.1" class="ltx_text" style="font-size:70%;">PFCR-D</span></th>
<td id="S4.T2.3.6.3.2" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.1213</span></td>
<td id="S4.T2.3.6.3.3" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.1943</span></td>
<td id="S4.T2.3.6.3.4" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.4.1" class="ltx_text" style="font-size:70%;">0.0771</span></td>
<td id="S4.T2.3.6.3.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.5.1" class="ltx_text" style="font-size:70%;">0.0930</span></td>
<td id="S4.T2.3.6.3.6" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.6.1" class="ltx_text" style="font-size:70%;">0.1146</span></td>
<td id="S4.T2.3.6.3.7" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.7.1" class="ltx_text" style="font-size:70%;">0.2176</span></td>
<td id="S4.T2.3.6.3.8" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.8.1" class="ltx_text" style="font-size:70%;">0.0638</span></td>
<td id="S4.T2.3.6.3.9" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.6.3.9.1" class="ltx_text" style="font-size:70%;">0.0862</span></td>
</tr>
<tr id="S4.T2.3.7.4" class="ltx_tr">
<th id="S4.T2.3.7.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.1.1" class="ltx_text" style="font-size:70%;">PFCR-F</span></th>
<td id="S4.T2.3.7.4.2" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.2.1" class="ltx_text" style="font-size:70%;">0.1169</span></td>
<td id="S4.T2.3.7.4.3" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.3.1" class="ltx_text" style="font-size:70%;">0.1875</span></td>
<td id="S4.T2.3.7.4.4" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.4.1" class="ltx_text" style="font-size:70%;">0.0738</span></td>
<td id="S4.T2.3.7.4.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.5.1" class="ltx_text" style="font-size:70%;">0.0892</span></td>
<td id="S4.T2.3.7.4.6" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.6.1" class="ltx_text" style="font-size:70%;">0.1147</span></td>
<td id="S4.T2.3.7.4.7" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.7.1" class="ltx_text" style="font-size:70%;">0.2167</span></td>
<td id="S4.T2.3.7.4.8" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.8.1" class="ltx_text" style="font-size:70%;">0.0655</span></td>
<td id="S4.T2.3.7.4.9" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.7.4.9.1" class="ltx_text" style="font-size:70%;">0.0877</span></td>
</tr>
<tr id="S4.T2.3.8.5" class="ltx_tr">
<th id="S4.T2.3.8.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr></th>
<td id="S4.T2.3.8.5.2" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.8.5.2.1" class="ltx_text" style="font-size:70%;">0.1206</span></td>
<td id="S4.T2.3.8.5.3" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.8.5.3.1" class="ltx_text" style="font-size:70%;">0.1938</span></td>
<td id="S4.T2.3.8.5.4" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.8.5.4.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.0782</span></td>
<td id="S4.T2.3.8.5.5" class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.8.5.5.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.0941</span></td>
<td id="S4.T2.3.8.5.6" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.8.5.6.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.1153</span></td>
<td id="S4.T2.3.8.5.7" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.8.5.7.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.2199</span></td>
<td id="S4.T2.3.8.5.8" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.8.5.8.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.0677</span></td>
<td id="S4.T2.3.8.5.9" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S4.T2.3.8.5.9.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.0904</span></td>
</tr>
</tbody>
</table>
</figure>
</section>
<section id="S4.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4. </span>Implementation Details</h3>

<div id="S4.SS4.p1" class="ltx_para">
<p id="S4.SS4.p1.10" class="ltx_p">We implement <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> based on the PyTorch framework accelerated by an NVidia RTX 2080 Ti GPU.
1) In the pre-training stage, all the clients utilize the Adam optimizer for local training with a learning rate of 0.001 and batch size as 1,024 in both datasets.
The head number is set as 4 and the dimension of the hidden state is set as 300 in the sequence encoder.
In the federated training process, we choose the model with the highest performance of Recall@10 on the validation dataset and adopt early stopping with a patience of 10.
For the dimension of the <span id="S4.SS4.p1.10.1" class="ltx_text ltx_font_italic">code embedding table</span>, we set <math id="S4.SS4.p1.1.m1.1" class="ltx_Math" alttext="M" display="inline"><semantics id="S4.SS4.p1.1.m1.1a"><mi id="S4.SS4.p1.1.m1.1.1" xref="S4.SS4.p1.1.m1.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.1.m1.1b"><ci id="S4.SS4.p1.1.m1.1.1.cmml" xref="S4.SS4.p1.1.m1.1.1">𝑀</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.1.m1.1c">M</annotation></semantics></math> =48, <math id="S4.SS4.p1.2.m2.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S4.SS4.p1.2.m2.1a"><mi id="S4.SS4.p1.2.m2.1.1" xref="S4.SS4.p1.2.m2.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.2.m2.1b"><ci id="S4.SS4.p1.2.m2.1.1.cmml" xref="S4.SS4.p1.2.m2.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.2.m2.1c">D</annotation></semantics></math>=256 for the ”<span id="S4.SS4.p1.10.2" class="ltx_text ltx_font_italic">Office-Arts</span>” dataset, and <math id="S4.SS4.p1.3.m3.1" class="ltx_Math" alttext="M" display="inline"><semantics id="S4.SS4.p1.3.m3.1a"><mi id="S4.SS4.p1.3.m3.1.1" xref="S4.SS4.p1.3.m3.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.3.m3.1b"><ci id="S4.SS4.p1.3.m3.1.1.cmml" xref="S4.SS4.p1.3.m3.1.1">𝑀</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.3.m3.1c">M</annotation></semantics></math> =32, <math id="S4.SS4.p1.4.m4.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S4.SS4.p1.4.m4.1a"><mi id="S4.SS4.p1.4.m4.1.1" xref="S4.SS4.p1.4.m4.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.4.m4.1b"><ci id="S4.SS4.p1.4.m4.1.1.cmml" xref="S4.SS4.p1.4.m4.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.4.m4.1c">D</annotation></semantics></math>=256 for the ”<span id="S4.SS4.p1.10.3" class="ltx_text ltx_font_italic">OnlineRetail-Pantry</span>” dataset. For the encryption method, we search the value of the privacy <math id="S4.SS4.p1.5.m5.1" class="ltx_Math" alttext="\epsilon" display="inline"><semantics id="S4.SS4.p1.5.m5.1a"><mi id="S4.SS4.p1.5.m5.1.1" xref="S4.SS4.p1.5.m5.1.1.cmml">ϵ</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.5.m5.1b"><ci id="S4.SS4.p1.5.m5.1.1.cmml" xref="S4.SS4.p1.5.m5.1.1">italic-ϵ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.5.m5.1c">\epsilon</annotation></semantics></math> within <math id="S4.SS4.p1.6.m6.2" class="ltx_Math" alttext="\in[0.1,0.9]" display="inline"><semantics id="S4.SS4.p1.6.m6.2a"><mrow id="S4.SS4.p1.6.m6.2.3" xref="S4.SS4.p1.6.m6.2.3.cmml"><mi id="S4.SS4.p1.6.m6.2.3.2" xref="S4.SS4.p1.6.m6.2.3.2.cmml"></mi><mo id="S4.SS4.p1.6.m6.2.3.1" xref="S4.SS4.p1.6.m6.2.3.1.cmml">∈</mo><mrow id="S4.SS4.p1.6.m6.2.3.3.2" xref="S4.SS4.p1.6.m6.2.3.3.1.cmml"><mo stretchy="false" id="S4.SS4.p1.6.m6.2.3.3.2.1" xref="S4.SS4.p1.6.m6.2.3.3.1.cmml">[</mo><mn id="S4.SS4.p1.6.m6.1.1" xref="S4.SS4.p1.6.m6.1.1.cmml">0.1</mn><mo id="S4.SS4.p1.6.m6.2.3.3.2.2" xref="S4.SS4.p1.6.m6.2.3.3.1.cmml">,</mo><mn id="S4.SS4.p1.6.m6.2.2" xref="S4.SS4.p1.6.m6.2.2.cmml">0.9</mn><mo stretchy="false" id="S4.SS4.p1.6.m6.2.3.3.2.3" xref="S4.SS4.p1.6.m6.2.3.3.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.6.m6.2b"><apply id="S4.SS4.p1.6.m6.2.3.cmml" xref="S4.SS4.p1.6.m6.2.3"><in id="S4.SS4.p1.6.m6.2.3.1.cmml" xref="S4.SS4.p1.6.m6.2.3.1"></in><csymbol cd="latexml" id="S4.SS4.p1.6.m6.2.3.2.cmml" xref="S4.SS4.p1.6.m6.2.3.2">absent</csymbol><interval closure="closed" id="S4.SS4.p1.6.m6.2.3.3.1.cmml" xref="S4.SS4.p1.6.m6.2.3.3.2"><cn type="float" id="S4.SS4.p1.6.m6.1.1.cmml" xref="S4.SS4.p1.6.m6.1.1">0.1</cn><cn type="float" id="S4.SS4.p1.6.m6.2.2.cmml" xref="S4.SS4.p1.6.m6.2.2">0.9</cn></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.6.m6.2c">\in[0.1,0.9]</annotation></semantics></math>, and the number of quantization buckets <math id="S4.SS4.p1.7.m7.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S4.SS4.p1.7.m7.1a"><mi id="S4.SS4.p1.7.m7.1.1" xref="S4.SS4.p1.7.m7.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.7.m7.1b"><ci id="S4.SS4.p1.7.m7.1.1.cmml" xref="S4.SS4.p1.7.m7.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.7.m7.1c">b</annotation></semantics></math> within <math id="S4.SS4.p1.8.m8.2" class="ltx_Math" alttext="\in[2^{6},2^{10}]" display="inline"><semantics id="S4.SS4.p1.8.m8.2a"><mrow id="S4.SS4.p1.8.m8.2.2" xref="S4.SS4.p1.8.m8.2.2.cmml"><mi id="S4.SS4.p1.8.m8.2.2.4" xref="S4.SS4.p1.8.m8.2.2.4.cmml"></mi><mo id="S4.SS4.p1.8.m8.2.2.3" xref="S4.SS4.p1.8.m8.2.2.3.cmml">∈</mo><mrow id="S4.SS4.p1.8.m8.2.2.2.2" xref="S4.SS4.p1.8.m8.2.2.2.3.cmml"><mo stretchy="false" id="S4.SS4.p1.8.m8.2.2.2.2.3" xref="S4.SS4.p1.8.m8.2.2.2.3.cmml">[</mo><msup id="S4.SS4.p1.8.m8.1.1.1.1.1" xref="S4.SS4.p1.8.m8.1.1.1.1.1.cmml"><mn id="S4.SS4.p1.8.m8.1.1.1.1.1.2" xref="S4.SS4.p1.8.m8.1.1.1.1.1.2.cmml">2</mn><mn id="S4.SS4.p1.8.m8.1.1.1.1.1.3" xref="S4.SS4.p1.8.m8.1.1.1.1.1.3.cmml">6</mn></msup><mo id="S4.SS4.p1.8.m8.2.2.2.2.4" xref="S4.SS4.p1.8.m8.2.2.2.3.cmml">,</mo><msup id="S4.SS4.p1.8.m8.2.2.2.2.2" xref="S4.SS4.p1.8.m8.2.2.2.2.2.cmml"><mn id="S4.SS4.p1.8.m8.2.2.2.2.2.2" xref="S4.SS4.p1.8.m8.2.2.2.2.2.2.cmml">2</mn><mn id="S4.SS4.p1.8.m8.2.2.2.2.2.3" xref="S4.SS4.p1.8.m8.2.2.2.2.2.3.cmml">10</mn></msup><mo stretchy="false" id="S4.SS4.p1.8.m8.2.2.2.2.5" xref="S4.SS4.p1.8.m8.2.2.2.3.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.8.m8.2b"><apply id="S4.SS4.p1.8.m8.2.2.cmml" xref="S4.SS4.p1.8.m8.2.2"><in id="S4.SS4.p1.8.m8.2.2.3.cmml" xref="S4.SS4.p1.8.m8.2.2.3"></in><csymbol cd="latexml" id="S4.SS4.p1.8.m8.2.2.4.cmml" xref="S4.SS4.p1.8.m8.2.2.4">absent</csymbol><interval closure="closed" id="S4.SS4.p1.8.m8.2.2.2.3.cmml" xref="S4.SS4.p1.8.m8.2.2.2.2"><apply id="S4.SS4.p1.8.m8.1.1.1.1.1.cmml" xref="S4.SS4.p1.8.m8.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS4.p1.8.m8.1.1.1.1.1.1.cmml" xref="S4.SS4.p1.8.m8.1.1.1.1.1">superscript</csymbol><cn type="integer" id="S4.SS4.p1.8.m8.1.1.1.1.1.2.cmml" xref="S4.SS4.p1.8.m8.1.1.1.1.1.2">2</cn><cn type="integer" id="S4.SS4.p1.8.m8.1.1.1.1.1.3.cmml" xref="S4.SS4.p1.8.m8.1.1.1.1.1.3">6</cn></apply><apply id="S4.SS4.p1.8.m8.2.2.2.2.2.cmml" xref="S4.SS4.p1.8.m8.2.2.2.2.2"><csymbol cd="ambiguous" id="S4.SS4.p1.8.m8.2.2.2.2.2.1.cmml" xref="S4.SS4.p1.8.m8.2.2.2.2.2">superscript</csymbol><cn type="integer" id="S4.SS4.p1.8.m8.2.2.2.2.2.2.cmml" xref="S4.SS4.p1.8.m8.2.2.2.2.2.2">2</cn><cn type="integer" id="S4.SS4.p1.8.m8.2.2.2.2.2.3.cmml" xref="S4.SS4.p1.8.m8.2.2.2.2.2.3">10</cn></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.8.m8.2c">\in[2^{6},2^{10}]</annotation></semantics></math> in both datasets.
On the server side, we exploit the FedAVG algorithm for gradient aggregation.
The total iterative process <math id="S4.SS4.p1.9.m9.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S4.SS4.p1.9.m9.1a"><mi id="S4.SS4.p1.9.m9.1.1" xref="S4.SS4.p1.9.m9.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.9.m9.1b"><ci id="S4.SS4.p1.9.m9.1.1.cmml" xref="S4.SS4.p1.9.m9.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.9.m9.1c">t</annotation></semantics></math> is conducted in 10 rounds.
2) In the prompt tuning stage,
the head number is set as 4, and the dimension of the hidden state is set as 300 in both the domain prompt encoder and user prompt encoder.
The number of the context words <math id="S4.SS4.p1.10.m10.1" class="ltx_Math" alttext="d_{W}" display="inline"><semantics id="S4.SS4.p1.10.m10.1a"><msub id="S4.SS4.p1.10.m10.1.1" xref="S4.SS4.p1.10.m10.1.1.cmml"><mi id="S4.SS4.p1.10.m10.1.1.2" xref="S4.SS4.p1.10.m10.1.1.2.cmml">d</mi><mi id="S4.SS4.p1.10.m10.1.1.3" xref="S4.SS4.p1.10.m10.1.1.3.cmml">W</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.10.m10.1b"><apply id="S4.SS4.p1.10.m10.1.1.cmml" xref="S4.SS4.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S4.SS4.p1.10.m10.1.1.1.cmml" xref="S4.SS4.p1.10.m10.1.1">subscript</csymbol><ci id="S4.SS4.p1.10.m10.1.1.2.cmml" xref="S4.SS4.p1.10.m10.1.1.2">𝑑</ci><ci id="S4.SS4.p1.10.m10.1.1.3.cmml" xref="S4.SS4.p1.10.m10.1.1.3">𝑊</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.10.m10.1c">d_{W}</annotation></semantics></math> in the domain prompt is set as 1,024.
For the hyper-parameters in the baselines, we set their values based on their publications and fine-tune them on both datasets.</p>
</div>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5. </span>Experimental Results (RQ1)</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">The comparison results are presented in Table <a href="#S3.T1" title="Table 1 ‣ 3.5.1. The Full Prompting Schema ‣ 3.5. Domain-adaptive Prompting Paradigm ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, from which have the following observations: 1) Our <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> methods (i.e., <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> (l) and <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> (f)) significantly outperforms other SOTA methods in almost all the metrics, demonstrating the effectiveness of our <abbr title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCR</span></abbr> method and the importance of the general content in transferring cross-domain formation in the federated scenario.
2) The improvement of our <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> methods over ID-only methods (i.e., GRU4Rec, SASRec, and BERT4Rec), indicating the usefulness of our <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr> framework in conducting <abbr title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PCDR</span></abbr>.
Our methods have better performance than Text-only methods (i.e., ZESRec and VQRec), showing the benefit of conducting <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>, and our method can effectively transfer domain knowledge in the non-overlapping scenario.
3) The cross-domain methods (i.e., CCDR and RecGURU) do not show impressive improvement over the single domains methods, denoting that non-overlapping <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> is a challenging task since there is no direct information to align domains.
Our methods outperform <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> methods, demonstrating the usefulness of the contents in modeling the generality of domain information.</p>
</div>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6. </span>Model Analysis</h2>

<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.1. </span>Ablation Studies (RQ2)</h3>

<div id="S6.SS1.p1" class="ltx_para">
<p id="S6.SS1.p1.1" class="ltx_p">To show the importance of different model components, we further conduct ablation studies by comparing with the following variations of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>:
1) PFCR-VFD: This method excludes the <abbr title="Vector-Quantified Item Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">VQIR</span></abbr>, <abbr title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCR</span></abbr>, and <abbr title="Domain-adaptive Prompting" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DP</span></abbr> components from <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>.
2) PFCR-FD: This method removes the <abbr title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCR</span></abbr> and <abbr title="Domain-adaptive Prompting" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DP</span></abbr> modules from <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>.
3) PFCR-D: This method detaches the <abbr title="Domain-adaptive Prompting" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DP</span></abbr> module from <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>.
4) PFCR-F: This model does not use the <abbr title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCR</span></abbr> component in <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>.
The results of the ablation studies are shown in Table <a href="#S4.T2" title="Table 2 ‣ 4.3. Baselines ‣ 4. Experimental Setup ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>, from which we can observe that:
1) <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> still has the best performance over its other variations. The gap between <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> and <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>-VFD indicates the importance of the components (i.e., <abbr title="Vector-Quantified Item Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">VQIR</span></abbr>, <abbr title="Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FCR</span></abbr>, and <abbr title="Domain-adaptive Prompting" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DP</span></abbr>) in learning the federated content presentations.
2) <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>-VF performs better than <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>-VFD, indicating the effectiveness of encoding items by semantic contents.
3) <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> has a better performance than <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>-D, showing the usefulness of conducting prompt learning in the <abbr title="Domain-level Privacy-preserving Cross-domain Sequential Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DPCSR</span></abbr> task.
4) The gap between <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> and <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>-F, indicating the importance of our <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr> strategy.</p>
</div>
</section>
<section id="S6.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.2. </span>Impacts of Different Federated Learning Strategies (RQ3)</h3>

<figure id="S6.T3" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 3. </span>Results of different federated learning strategies on the <span id="S6.T3.2.1" class="ltx_text ltx_font_italic">Office-Arts</span> dataset.</figcaption>
<table id="S6.T3.3" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S6.T3.3.1.1" class="ltx_tr">
<th id="S6.T3.3.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;" rowspan="2"><span id="S6.T3.3.1.1.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">Methods</span></th>
<th id="S6.T3.3.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="4"><span id="S6.T3.3.1.1.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">Office</span></th>
<th id="S6.T3.3.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="4"><span id="S6.T3.3.1.1.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">Arts</span></th>
</tr>
<tr id="S6.T3.3.2.2" class="ltx_tr">
<th id="S6.T3.3.2.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="2"><span id="S6.T3.3.2.2.1.1" class="ltx_text" style="font-size:70%;">Recall</span></th>
<th id="S6.T3.3.2.2.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="2"><span id="S6.T3.3.2.2.2.1" class="ltx_text" style="font-size:70%;">NDCG</span></th>
<th id="S6.T3.3.2.2.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="2"><span id="S6.T3.3.2.2.3.1" class="ltx_text" style="font-size:70%;">Recall</span></th>
<th id="S6.T3.3.2.2.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;" colspan="2"><span id="S6.T3.3.2.2.4.1" class="ltx_text" style="font-size:70%;">NDCG</span></th>
</tr>
<tr id="S6.T3.3.3.3" class="ltx_tr">
<th id="S6.T3.3.3.3.1" class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"></th>
<th id="S6.T3.3.3.3.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.3.3.2.1" class="ltx_text" style="font-size:70%;">@10</span></th>
<th id="S6.T3.3.3.3.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.3.3.3.1" class="ltx_text" style="font-size:70%;">@50</span></th>
<th id="S6.T3.3.3.3.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.3.3.4.1" class="ltx_text" style="font-size:70%;">@10</span></th>
<th id="S6.T3.3.3.3.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.3.3.5.1" class="ltx_text" style="font-size:70%;">@50</span></th>
<th id="S6.T3.3.3.3.6" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.3.3.6.1" class="ltx_text" style="font-size:70%;">@10</span></th>
<th id="S6.T3.3.3.3.7" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.3.3.7.1" class="ltx_text" style="font-size:70%;">@50</span></th>
<th id="S6.T3.3.3.3.8" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.3.3.8.1" class="ltx_text" style="font-size:70%;">@10</span></th>
<th id="S6.T3.3.3.3.9" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.3.3.9.1" class="ltx_text" style="font-size:70%;">@50</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S6.T3.3.4.1" class="ltx_tr">
<th id="S6.T3.3.4.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;">
<span id="S6.T3.3.4.1.1.1" class="ltx_text" style="font-size:70%;">FedProx </span><cite class="ltx_cite ltx_citemacro_citep"><span id="S6.T3.3.4.1.1.2.1" class="ltx_text" style="font-size:70%;">(</span>Li et al<span class="ltx_text">.</span><span id="S6.T3.3.4.1.1.3.2.1.1" class="ltx_text" style="font-size:70%;">, </span><a href="#bib.bib23" title="" class="ltx_ref">2020</a><span id="S6.T3.3.4.1.1.4.3" class="ltx_text" style="font-size:70%;">)</span></cite>
</th>
<td id="S6.T3.3.4.1.2" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.4.1.2.1" class="ltx_text" style="font-size:70%;">0.1197</span></td>
<td id="S6.T3.3.4.1.3" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.4.1.3.1" class="ltx_text" style="font-size:70%;">0.1912</span></td>
<td id="S6.T3.3.4.1.4" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.4.1.4.1" class="ltx_text" style="font-size:70%;">0.0751</span></td>
<td id="S6.T3.3.4.1.5" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.4.1.5.1" class="ltx_text" style="font-size:70%;">0.0907</span></td>
<td id="S6.T3.3.4.1.6" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.4.1.6.1" class="ltx_text" style="font-size:70%;">0.1132</span></td>
<td id="S6.T3.3.4.1.7" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.4.1.7.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.2179</span></td>
<td id="S6.T3.3.4.1.8" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.4.1.8.1" class="ltx_text" style="font-size:70%;">0.0635</span></td>
<td id="S6.T3.3.4.1.9" class="ltx_td ltx_align_center ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.4.1.9.1" class="ltx_text" style="font-size:70%;">0.0862</span></td>
</tr>
<tr id="S6.T3.3.5.2" class="ltx_tr">
<th id="S6.T3.3.5.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-left:4.0pt;padding-right:4.0pt;">
<span id="S6.T3.3.5.2.1.1" class="ltx_text" style="font-size:70%;">Scaffold </span><cite class="ltx_cite ltx_citemacro_citep"><span id="S6.T3.3.5.2.1.2.1" class="ltx_text" style="font-size:70%;">(</span>Karimireddy et al<span class="ltx_text">.</span><span id="S6.T3.3.5.2.1.3.2.1.1" class="ltx_text" style="font-size:70%;">, </span><a href="#bib.bib18" title="" class="ltx_ref">2020</a><span id="S6.T3.3.5.2.1.4.3" class="ltx_text" style="font-size:70%;">)</span></cite>
</th>
<td id="S6.T3.3.5.2.2" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.5.2.2.1" class="ltx_text" style="font-size:70%;">0.1146</span></td>
<td id="S6.T3.3.5.2.3" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.5.2.3.1" class="ltx_text" style="font-size:70%;">0.1839</span></td>
<td id="S6.T3.3.5.2.4" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.5.2.4.1" class="ltx_text" style="font-size:70%;">0.0742</span></td>
<td id="S6.T3.3.5.2.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.5.2.5.1" class="ltx_text" style="font-size:70%;">0.0893</span></td>
<td id="S6.T3.3.5.2.6" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.5.2.6.1" class="ltx_text" style="font-size:70%;">0.1115</span></td>
<td id="S6.T3.3.5.2.7" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.5.2.7.1" class="ltx_text" style="font-size:70%;">0.2096</span></td>
<td id="S6.T3.3.5.2.8" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.5.2.8.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.0695</span></td>
<td id="S6.T3.3.5.2.9" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.5.2.9.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.0907</span></td>
</tr>
<tr id="S6.T3.3.6.3" class="ltx_tr">
<th id="S6.T3.3.6.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.1.1" class="ltx_text" style="font-size:70%;">Popcode code</span></th>
<td id="S6.T3.3.6.3.2" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.2.1" class="ltx_text" style="font-size:70%;">0.1209</span></td>
<td id="S6.T3.3.6.3.3" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.3.1" class="ltx_text" style="font-size:70%;">0.1937</span></td>
<td id="S6.T3.3.6.3.4" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.4.1" class="ltx_text" style="font-size:70%;">0.0742</span></td>
<td id="S6.T3.3.6.3.5" class="ltx_td ltx_align_center ltx_border_r" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.5.1" class="ltx_text" style="font-size:70%;">0.0900</span></td>
<td id="S6.T3.3.6.3.6" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.6.1" class="ltx_text" style="font-size:70%;">0.1139</span></td>
<td id="S6.T3.3.6.3.7" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.7.1" class="ltx_text" style="font-size:70%;">0.2153</span></td>
<td id="S6.T3.3.6.3.8" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.8.1" class="ltx_text" style="font-size:70%;">0.0629</span></td>
<td id="S6.T3.3.6.3.9" class="ltx_td ltx_align_center" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.6.3.9.1" class="ltx_text" style="font-size:70%;">0.0850</span></td>
</tr>
<tr id="S6.T3.3.7.4" class="ltx_tr">
<th id="S6.T3.3.7.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.1.1" class="ltx_text ltx_font_bold" style="font-size:70%;">FedAVG</span></th>
<td id="S6.T3.3.7.4.2" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.2.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.1213</span></td>
<td id="S6.T3.3.7.4.3" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.3.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.1943</span></td>
<td id="S6.T3.3.7.4.4" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.4.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.0771</span></td>
<td id="S6.T3.3.7.4.5" class="ltx_td ltx_align_center ltx_border_bb ltx_border_r ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.5.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.0930</span></td>
<td id="S6.T3.3.7.4.6" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.6.1" class="ltx_text ltx_font_bold" style="font-size:70%;">0.1146</span></td>
<td id="S6.T3.3.7.4.7" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.7.1" class="ltx_text" style="font-size:70%;">0.2176</span></td>
<td id="S6.T3.3.7.4.8" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.8.1" class="ltx_text" style="font-size:70%;">0.0638</span></td>
<td id="S6.T3.3.7.4.9" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="S6.T3.3.7.4.9.1" class="ltx_text" style="font-size:70%;">0.0862</span></td>
</tr>
</tbody>
</table>
</figure>
<div id="S6.SS2.p1" class="ltx_para">
<p id="S6.SS2.p1.1" class="ltx_p">To show the impact of different <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr> strategies, we further compare FedAVG (utilized in our <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> method) with the following methods: FedProx <cite class="ltx_cite ltx_citemacro_citep">(Li et al<span class="ltx_text">.</span>, <a href="#bib.bib23" title="" class="ltx_ref">2020</a>)</cite>, Scaffold <cite class="ltx_cite ltx_citemacro_citep">(Karimireddy et al<span class="ltx_text">.</span>, <a href="#bib.bib18" title="" class="ltx_ref">2020</a>)</cite>, and PopCode.
PopCode is the method that only aggregates the code gradients with high frequencies in clients (i.e., popular codes).
The experimental results are shown in Table <a href="#S6.T3" title="Table 3 ‣ 6.2. Impacts of Different Federated Learning Strategies (RQ3) ‣ 6. Model Analysis ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, from which we can conclude that: 1) FedAVG outperforms FedProx and Scaffold, demonstrating the importance of simultaneously learning the common and domain-specific features of the code embeddings. Paying more attention to the common knowledge across domains (i.e., FedProx and Scaffold) cannot achieve better results.
2) FedAVG performs better than PopCode, indicating the benefit of aggregating all the codes. Only updating a subset of gradients in each client will distort the learning direction of the <span id="S6.SS2.p1.1.1" class="ltx_text ltx_font_italic">code embedding table</span>, which results in sub-optimal results.
3) Beyond performance, we notice that FedProx and Scaffold upload more parameters than FedAVG, and have heavier computational costs.</p>
</div>
<figure id="S6.F3" class="ltx_figure"><img src="/html/2401.14678/assets/x3.png" id="S6.F3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="257" height="158" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3. </span>Impact of the hyper-parameters <math id="S6.F3.2.m1.3" class="ltx_Math" alttext="t,\epsilon,b" display="inline"><semantics id="S6.F3.2.m1.3b"><mrow id="S6.F3.2.m1.3.4.2" xref="S6.F3.2.m1.3.4.1.cmml"><mi id="S6.F3.2.m1.1.1" xref="S6.F3.2.m1.1.1.cmml">t</mi><mo id="S6.F3.2.m1.3.4.2.1" xref="S6.F3.2.m1.3.4.1.cmml">,</mo><mi id="S6.F3.2.m1.2.2" xref="S6.F3.2.m1.2.2.cmml">ϵ</mi><mo id="S6.F3.2.m1.3.4.2.2" xref="S6.F3.2.m1.3.4.1.cmml">,</mo><mi id="S6.F3.2.m1.3.3" xref="S6.F3.2.m1.3.3.cmml">b</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.F3.2.m1.3c"><list id="S6.F3.2.m1.3.4.1.cmml" xref="S6.F3.2.m1.3.4.2"><ci id="S6.F3.2.m1.1.1.cmml" xref="S6.F3.2.m1.1.1">𝑡</ci><ci id="S6.F3.2.m1.2.2.cmml" xref="S6.F3.2.m1.2.2">italic-ϵ</ci><ci id="S6.F3.2.m1.3.3.cmml" xref="S6.F3.2.m1.3.3">𝑏</ci></list></annotation-xml><annotation encoding="application/x-tex" id="S6.F3.2.m1.3d">t,\epsilon,b</annotation></semantics></math> on the <span id="S6.F3.4.1" class="ltx_text ltx_font_italic">OnlineRetail-Pantry</span> dataset.</figcaption>
</figure>
</section>
<section id="S6.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.3. </span>Impact of Hyper-parameters (RQ4)</h3>

<div id="S6.SS3.p1" class="ltx_para">
<p id="S6.SS3.p1.10" class="ltx_p">We explore the impact of three key hyper-parameters, i.e., the number of communication round <math id="S6.SS3.p1.1.m1.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S6.SS3.p1.1.m1.1a"><mi id="S6.SS3.p1.1.m1.1.1" xref="S6.SS3.p1.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.1.m1.1b"><ci id="S6.SS3.p1.1.m1.1.1.cmml" xref="S6.SS3.p1.1.m1.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.1.m1.1c">t</annotation></semantics></math> in <abbr title="Federated Learning" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">FL</span></abbr>, the privacy parameter <math id="S6.SS3.p1.2.m2.1" class="ltx_Math" alttext="\epsilon" display="inline"><semantics id="S6.SS3.p1.2.m2.1a"><mi id="S6.SS3.p1.2.m2.1.1" xref="S6.SS3.p1.2.m2.1.1.cmml">ϵ</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.2.m2.1b"><ci id="S6.SS3.p1.2.m2.1.1.cmml" xref="S6.SS3.p1.2.m2.1.1">italic-ϵ</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.2.m2.1c">\epsilon</annotation></semantics></math> in encryption, and the number of quantified buckets <math id="S6.SS3.p1.3.m3.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S6.SS3.p1.3.m3.1a"><mi id="S6.SS3.p1.3.m3.1.1" xref="S6.SS3.p1.3.m3.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.3.m3.1b"><ci id="S6.SS3.p1.3.m3.1.1.cmml" xref="S6.SS3.p1.3.m3.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.3.m3.1c">b</annotation></semantics></math> in the quantization component of encryption.
The experimental results are reported in Fig <a href="#S6.F3" title="Figure 3 ‣ 6.2. Impacts of Different Federated Learning Strategies (RQ3) ‣ 6. Model Analysis ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>. Due to the space limitation, we only show the results on ”<span id="S6.SS3.p1.10.1" class="ltx_text ltx_font_italic">OnlineRetail-Pantry</span>”, and similar results are achieved on ”<span id="S6.SS3.p1.10.2" class="ltx_text ltx_font_italic">Office-Arts</span>”.
From Fig <a href="#S6.F3" title="Figure 3 ‣ 6.2. Impacts of Different Federated Learning Strategies (RQ3) ‣ 6. Model Analysis ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, we can observe that: 1) <math id="S6.SS3.p1.4.m4.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S6.SS3.p1.4.m4.1a"><mi id="S6.SS3.p1.4.m4.1.1" xref="S6.SS3.p1.4.m4.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.4.m4.1b"><ci id="S6.SS3.p1.4.m4.1.1.cmml" xref="S6.SS3.p1.4.m4.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.4.m4.1c">t</annotation></semantics></math> significantly impacts the performance of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>. The value of <math id="S6.SS3.p1.5.m5.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S6.SS3.p1.5.m5.1a"><mi id="S6.SS3.p1.5.m5.1.1" xref="S6.SS3.p1.5.m5.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.5.m5.1b"><ci id="S6.SS3.p1.5.m5.1.1.cmml" xref="S6.SS3.p1.5.m5.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.5.m5.1c">t</annotation></semantics></math> is not that the bigger the better. A higher value of <math id="S6.SS3.p1.6.m6.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S6.SS3.p1.6.m6.1a"><mi id="S6.SS3.p1.6.m6.1.1" xref="S6.SS3.p1.6.m6.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.6.m6.1b"><ci id="S6.SS3.p1.6.m6.1.1.cmml" xref="S6.SS3.p1.6.m6.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.6.m6.1c">t</annotation></semantics></math> will result in excessive updates, leading to the performance decline.
2) <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> does not have a definite chaining trend as <math id="S6.SS3.p1.7.m7.1" class="ltx_Math" alttext="\epsilon" display="inline"><semantics id="S6.SS3.p1.7.m7.1a"><mi id="S6.SS3.p1.7.m7.1.1" xref="S6.SS3.p1.7.m7.1.1.cmml">ϵ</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.7.m7.1b"><ci id="S6.SS3.p1.7.m7.1.1.cmml" xref="S6.SS3.p1.7.m7.1.1">italic-ϵ</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.7.m7.1c">\epsilon</annotation></semantics></math> changes since the randomized response method is different from Laplace or Gaussian noise that is added on all the gradients, while ours are only on part of them.
3) A proper value of <math id="S6.SS3.p1.8.m8.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S6.SS3.p1.8.m8.1a"><mi id="S6.SS3.p1.8.m8.1.1" xref="S6.SS3.p1.8.m8.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.8.m8.1b"><ci id="S6.SS3.p1.8.m8.1.1.cmml" xref="S6.SS3.p1.8.m8.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.8.m8.1c">b</annotation></semantics></math> is important to <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>. An over-big value of <math id="S6.SS3.p1.9.m9.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S6.SS3.p1.9.m9.1a"><mi id="S6.SS3.p1.9.m9.1.1" xref="S6.SS3.p1.9.m9.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.9.m9.1b"><ci id="S6.SS3.p1.9.m9.1.1.cmml" xref="S6.SS3.p1.9.m9.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.9.m9.1c">b</annotation></semantics></math> will map the gradients to an overlarge range and will result in a performance decline. Similarly, an over-small <math id="S6.SS3.p1.10.m10.1" class="ltx_Math" alttext="b" display="inline"><semantics id="S6.SS3.p1.10.m10.1a"><mi id="S6.SS3.p1.10.m10.1.1" xref="S6.SS3.p1.10.m10.1.1.cmml">b</mi><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.10.m10.1b"><ci id="S6.SS3.p1.10.m10.1.1.cmml" xref="S6.SS3.p1.10.m10.1.1">𝑏</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.10.m10.1c">b</annotation></semantics></math> will limit the gradients in an over-small range, and let the gradients have less representational ability.</p>
</div>
</section>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7. </span>Conclusions</h2>

<div id="S7.p1" class="ltx_para">
<p id="S7.p1.1" class="ltx_p">In this work, we target <abbr title="Domain-level Privacy-preserving Cross-domain Sequential Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">DPCSR</span></abbr> and propose a <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> paradigm as our solution with a two-stage training schema (the pre-training and prompt tuning stages).
The pre-training phase is dedicated to achieving domain fusion and privacy preservation by harnessing the generality inherent in natural languages. Within this phase, we introduce a federated content representation learning method.
The prompt tuning phase is geared towards adapting the pre-learned domain knowledge to the target domain, thereby enhancing <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>. To achieve this, we have devised two prompt learning techniques: the full prompt and light prompt learning methodologies.
The experimental results on two real-world datasets demonstrate the superiority of our <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> method and the effectiveness of our federated content representation learning in solving the non-overlapped <abbr title="Privacy-preserving Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PCDR</span></abbr> tasks.</p>
</div>
<div class="ltx_acknowledgements">
<h6 class="ltx_title ltx_title_acknowledgements">Acknowledgements.</h6>
This work is partially supported by the National Natural Science Foundation of China (No. 62372277), Natural Science Foundation of Shandong Province (No. ZR2022MF257), Australian Research Council under the streams of Future Fellowship (No. FT210100624), Discovery Project (No. DP240101108), and Industrial Transformation Training Centre (No. IC200100022).

</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(1)</span>
<span class="ltx_bibblock">        




</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bonawitz et al<span id="bib.bib2.2.2.1" class="ltx_text">.</span> (2017)</span>
<span class="ltx_bibblock">
Keith Bonawitz, Vladimir
Ivanov, Ben Kreuter, Antonio Marcedone,
H Brendan McMahan, Sarvar Patel,
Daniel Ramage, Aaron Segal, and
Karn Seth. 2017.

</span>
<span class="ltx_bibblock">Practical secure aggregation for privacy-preserving
machine learning. In <em id="bib.bib2.3.1" class="ltx_emph ltx_font_italic">proceedings of the 2017 ACM
SIGSAC Conference on Computer and Communications Security</em>.
1175–1191.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al<span id="bib.bib3.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Chaochao Chen, Huiwen Wu,
Jiajie Su, Lingjuan Lyu,
Xiaolin Zheng, and Li Wang.
2022.

</span>
<span class="ltx_bibblock">Differential private knowledge transfer for
privacy-preserving cross-domain recommendation. In
<em id="bib.bib3.3.1" class="ltx_emph ltx_font_italic">Proceedings of the ACM Web Conference 2022</em>.
1455–1465.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al<span id="bib.bib4.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Gaode Chen, Xinghua
Zhang, Yijun Su, Yantong Lai,
Ji Xiang, Junbo Zhang, and
Yu Zheng. 2023.

</span>
<span class="ltx_bibblock">Win-Win: A Privacy-Preserving Federated Framework
for Dual-Target Cross-Domain Recommendation. In
<em id="bib.bib4.3.1" class="ltx_emph ltx_font_italic">Proceedings of the AAAI Conference on Artificial
Intelligence</em>, Vol. 37. 4149–4156.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al<span id="bib.bib5.2.2.1" class="ltx_text">.</span> (2018)</span>
<span class="ltx_bibblock">
Tong Chen, Hongzhi Yin,
Hongxu Chen, Lin Wu, Hao
Wang, Xiaofang Zhou, and Xue Li.
2018.

</span>
<span class="ltx_bibblock">Tada: trend alignment with dual-attention
multi-task recurrent neural networks for sales prediction. In
<em id="bib.bib5.3.1" class="ltx_emph ltx_font_italic">2018 IEEE international conference on data mining
(ICDM)</em>. IEEE, 49–58.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ding et al<span id="bib.bib6.2.2.1" class="ltx_text">.</span> (2021)</span>
<span class="ltx_bibblock">
Hao Ding, Yifei Ma,
Anoop Deoras, Yuyang Wang, and
Hao Wang. 2021.

</span>
<span class="ltx_bibblock">Zero-shot recommender systems.

</span>
<span class="ltx_bibblock"><em id="bib.bib6.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2105.08318</em>
(2021).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Du et al<span id="bib.bib7.2.2.1" class="ltx_text">.</span> (2021)</span>
<span class="ltx_bibblock">
Yongjie Du, Deyun Zhou,
Yu Xie, Jiao Shi, and
Maoguo Gong. 2021.

</span>
<span class="ltx_bibblock">Federated matrix factorization for
privacy-preserving recommender systems.

</span>
<span class="ltx_bibblock"><em id="bib.bib7.3.1" class="ltx_emph ltx_font_italic">Applied Soft Computing</em>
111 (2021), 107700.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guo et al<span id="bib.bib8.2.2.1" class="ltx_text">.</span> (2023a)</span>
<span class="ltx_bibblock">
Lei Guo, Hao Liu,
Lei Zhu, Weili Guan, and
Zhiyong Cheng. 2023a.

</span>
<span class="ltx_bibblock">DA-DAN: A Dual Adversarial Domain Adaption Network
for Unsupervised Non-overlapping Cross-domain Recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib8.3.1" class="ltx_emph ltx_font_italic">ACM Transactions on Information Systems</em>
(2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guo et al<span id="bib.bib9.2.2.1" class="ltx_text">.</span> (2021)</span>
<span class="ltx_bibblock">
Lei Guo, Li Tang,
Tong Chen, Lei Zhu, Quoc
Viet Hung Nguyen, and Hongzhi Yin.
2021.

</span>
<span class="ltx_bibblock">DA-GCN: A domain-aware attentive graph convolution
network for shared-account cross-domain sequential recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib9.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2105.03300</em>
(2021).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guo et al<span id="bib.bib10.2.2.1" class="ltx_text">.</span> (2023b)</span>
<span class="ltx_bibblock">
Lei Guo, Chunxiao Wang,
Xinhua Wang, Lei Zhu, and
Hongzhi Yin. 2023b.

</span>
<span class="ltx_bibblock">Automated Prompting for Non-overlapping
Cross-domain Sequential Recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib10.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2304.04218</em>
(2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hao et al<span id="bib.bib11.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Bowen Hao, Chaoqun Yang,
Lei Guo, Junliang Yu, and
Hongzhi Yin. 2023.

</span>
<span class="ltx_bibblock">Motif-Based Prompt Learning for Universal
Cross-Domain Recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib11.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2310.13303</em>
(2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hidasi et al<span id="bib.bib12.2.2.1" class="ltx_text">.</span> (2015)</span>
<span class="ltx_bibblock">
Balázs Hidasi,
Alexandros Karatzoglou, Linas Baltrunas,
and Domonkos Tikk. 2015.

</span>
<span class="ltx_bibblock">Session-based recommendations with recurrent neural
networks.

</span>
<span class="ltx_bibblock"><em id="bib.bib12.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1511.06939</em>
(2015).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hou et al<span id="bib.bib13.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Yupeng Hou, Zhankui He,
Julian McAuley, and Wayne Xin Zhao.
2023.

</span>
<span class="ltx_bibblock">Learning vector-quantized item representation for
transferable sequential recommenders. In
<em id="bib.bib13.3.1" class="ltx_emph ltx_font_italic">Proceedings of the ACM Web Conference 2023</em>.
1162–1171.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hou et al<span id="bib.bib14.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Yupeng Hou, Shanlei Mu,
Wayne Xin Zhao, Yaliang Li,
Bolin Ding, and Ji-Rong Wen.
2022.

</span>
<span class="ltx_bibblock">Towards universal sequence representation learning
for recommender systems. In <em id="bib.bib14.3.1" class="ltx_emph ltx_font_italic">Proceedings of the
28th ACM SIGKDD Conference on Knowledge Discovery and Data Mining</em>.
585–593.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jegou et al<span id="bib.bib15.2.2.1" class="ltx_text">.</span> (2010)</span>
<span class="ltx_bibblock">
Herve Jegou, Matthijs
Douze, and Cordelia Schmid.
2010.

</span>
<span class="ltx_bibblock">Product quantization for nearest neighbor search.

</span>
<span class="ltx_bibblock"><em id="bib.bib15.3.1" class="ltx_emph ltx_font_italic">IEEE transactions on pattern analysis and
machine intelligence</em> 33, 1
(2010), 117–128.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kairouz et al<span id="bib.bib16.2.2.1" class="ltx_text">.</span> (2021)</span>
<span class="ltx_bibblock">
Peter Kairouz, Ziyu Liu,
and Thomas Steinke. 2021.

</span>
<span class="ltx_bibblock">The distributed discrete gaussian mechanism for
federated learning with secure aggregation. In
<em id="bib.bib16.3.1" class="ltx_emph ltx_font_italic">International Conference on Machine Learning</em>.
PMLR, 5201–5212.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kang and McAuley (2018)</span>
<span class="ltx_bibblock">
Wang-Cheng Kang and
Julian McAuley. 2018.

</span>
<span class="ltx_bibblock">Self-attentive sequential recommendation. In
<em id="bib.bib17.1.1" class="ltx_emph ltx_font_italic">2018 IEEE international conference on data mining
(ICDM)</em>. IEEE, 197–206.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Karimireddy et al<span id="bib.bib18.2.2.1" class="ltx_text">.</span> (2020)</span>
<span class="ltx_bibblock">
Sai Praneeth Karimireddy,
Satyen Kale, Mehryar Mohri,
Sashank Reddi, Sebastian Stich, and
Ananda Theertha Suresh. 2020.

</span>
<span class="ltx_bibblock">Scaffold: Stochastic controlled averaging for
federated learning. In <em id="bib.bib18.3.1" class="ltx_emph ltx_font_italic">International conference on
machine learning</em>. PMLR, 5132–5143.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kenton and Toutanova (2019)</span>
<span class="ltx_bibblock">
Jacob Devlin Ming-Wei Chang Kenton and
Lee Kristina Toutanova. 2019.

</span>
<span class="ltx_bibblock">Bert: Pre-training of deep bidirectional
transformers for language understanding. In
<em id="bib.bib19.1.1" class="ltx_emph ltx_font_italic">Proceedings of naacL-HLT</em>,
Vol. 1. 2.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al<span id="bib.bib20.2.2.1" class="ltx_text">.</span> (2023b)</span>
<span class="ltx_bibblock">
Chenglin Li, Yuanzhen
Xie, Chenyun Yu, Bo Hu,
Zang Li, Guoqiang Shu,
Xiaohu Qie, and Di Niu.
2023b.

</span>
<span class="ltx_bibblock">One for All, All for One: Learning and Transferring
User Embeddings for Cross-Domain Recommendation. In
<em id="bib.bib20.3.1" class="ltx_emph ltx_font_italic">Proceedings of the Sixteenth ACM International
Conference on Web Search and Data Mining</em>. 366–374.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al<span id="bib.bib21.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Chenglin Li, Mingjun
Zhao, Huanming Zhang, Chenyun Yu,
Lei Cheng, Guoqiang Shu,
Beibei Kong, and Di Niu.
2022.

</span>
<span class="ltx_bibblock">RecGURU: Adversarial learning of generalized user
representations for cross-domain recommendation. In
<em id="bib.bib21.3.1" class="ltx_emph ltx_font_italic">Proceedings of the fifteenth ACM international
conference on web search and data mining</em>. 571–581.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al<span id="bib.bib22.2.2.1" class="ltx_text">.</span> (2023a)</span>
<span class="ltx_bibblock">
Jiacheng Li, Ming Wang,
Jin Li, Jinmiao Fu, Xin
Shen, Jingbo Shang, and Julian
McAuley. 2023a.

</span>
<span class="ltx_bibblock">Text Is All You Need: Learning Language
Representations for Sequential Recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib22.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2305.13731</em>
(2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al<span id="bib.bib23.2.2.1" class="ltx_text">.</span> (2020)</span>
<span class="ltx_bibblock">
Tian Li, Anit Kumar Sahu,
Manzil Zaheer, Maziar Sanjabi,
Ameet Talwalkar, and Virginia Smith.
2020.

</span>
<span class="ltx_bibblock">Federated optimization in heterogeneous networks.

</span>
<span class="ltx_bibblock"><em id="bib.bib23.3.1" class="ltx_emph ltx_font_italic">Proceedings of Machine learning and systems</em>
2 (2020), 429–450.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin et al<span id="bib.bib24.2.2.1" class="ltx_text">.</span> (2021)</span>
<span class="ltx_bibblock">
Zhaohao Lin, Weike Pan,
and Zhong Ming. 2021.

</span>
<span class="ltx_bibblock">FR-FMSS: Federated recommendation via fake marks
and secret sharing. In <em id="bib.bib24.3.1" class="ltx_emph ltx_font_italic">Proceedings of the 15th ACM
Conference on Recommender Systems</em>. 668–673.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al<span id="bib.bib25.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Zhiwei Liu, Liangwei
Yang, Ziwei Fan, Hao Peng, and
Philip S Yu. 2022.

</span>
<span class="ltx_bibblock">Federated social recommendation with graph neural
network.

</span>
<span class="ltx_bibblock"><em id="bib.bib25.3.1" class="ltx_emph ltx_font_italic">ACM Transactions on Intelligent Systems and
Technology (TIST)</em> 13, 4
(2022), 1–24.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mai and Pang (2023)</span>
<span class="ltx_bibblock">
Peihua Mai and Yan
Pang. 2023.

</span>
<span class="ltx_bibblock">Vertical Federated Graph Neural Network for
Recommender System.

</span>
<span class="ltx_bibblock"><em id="bib.bib26.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2303.05786</em>
(2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">McMahan et al<span id="bib.bib27.2.2.1" class="ltx_text">.</span> (2017)</span>
<span class="ltx_bibblock">
Brendan McMahan, Eider
Moore, Daniel Ramage, Seth Hampson,
and Blaise Aguera y Arcas.
2017.

</span>
<span class="ltx_bibblock">Communication-efficient learning of deep networks
from decentralized data. In <em id="bib.bib27.3.1" class="ltx_emph ltx_font_italic">Artificial
intelligence and statistics</em>. PMLR, 1273–1282.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Meihan et al<span id="bib.bib28.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Wu Meihan, Li Li,
Chang Tao, Eric Rigall,
Wang Xiaodong, and Xu Cheng-Zhong.
2022.

</span>
<span class="ltx_bibblock">FedCDR: Federated Cross-Domain Recommendation for
Privacy-Preserving Rating Prediction. In
<em id="bib.bib28.3.1" class="ltx_emph ltx_font_italic">Proceedings of the 31st ACM International
Conference on Information &amp; Knowledge Management</em>.
2179–2188.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mu et al<span id="bib.bib29.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Shanlei Mu, Yupeng Hou,
Wayne Xin Zhao, Yaliang Li, and
Bolin Ding. 2022.

</span>
<span class="ltx_bibblock">ID-Agnostic User Behavior Pre-training for
Sequential Recommendation. In <em id="bib.bib29.3.1" class="ltx_emph ltx_font_italic">China Conference on
Information Retrieval</em>. Springer, 16–27.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Qi et al<span id="bib.bib30.2.2.1" class="ltx_text">.</span> (2020)</span>
<span class="ltx_bibblock">
Tao Qi, Fangzhao Wu,
Chuhan Wu, Yongfeng Huang, and
Xing Xie. 2020.

</span>
<span class="ltx_bibblock">Privacy-preserving news recommendation model
learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib30.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2003.09592</em>
(2020).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rajput et al<span id="bib.bib31.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Shashank Rajput, Nikhil
Mehta, Anima Singh, Raghunandan H
Keshavan, Trung Vu, Lukasz Heldt,
Lichan Hong, Yi Tay,
Vinh Q Tran, Jonah Samost,
et al<span id="bib.bib31.3.1" class="ltx_text">.</span> 2023.

</span>
<span class="ltx_bibblock">Recommender Systems with Generative Retrieval.

</span>
<span class="ltx_bibblock"><em id="bib.bib31.4.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2305.05065</em>
(2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Reisizadeh et al<span id="bib.bib32.2.2.1" class="ltx_text">.</span> (2020)</span>
<span class="ltx_bibblock">
Amirhossein Reisizadeh,
Aryan Mokhtari, Hamed Hassani,
Ali Jadbabaie, and Ramtin Pedarsani.
2020.

</span>
<span class="ltx_bibblock">Fedpaq: A communication-efficient federated
learning method with periodic averaging and quantization. In
<em id="bib.bib32.3.1" class="ltx_emph ltx_font_italic">International Conference on Artificial Intelligence
and Statistics</em>. PMLR, 2021–2031.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sanner et al<span id="bib.bib33.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Scott Sanner, Krisztian
Balog, Filip Radlinski, Ben Wedin, and
Lucas Dixon. 2023.

</span>
<span class="ltx_bibblock">Large Language Models are Competitive Near
Cold-start Recommenders for Language-and Item-based Preferences. In
<em id="bib.bib33.3.1" class="ltx_emph ltx_font_italic">Proceedings of the 17th ACM Conference on
Recommender Systems</em>. 890–896.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shin et al<span id="bib.bib34.2.2.1" class="ltx_text">.</span> (2021)</span>
<span class="ltx_bibblock">
Kyuyong Shin, Hanock
Kwak, Kyung-Min Kim, Minkyu Kim,
Young-Jin Park, Jisu Jeong, and
Seungjae Jung. 2021.

</span>
<span class="ltx_bibblock">One4all user representation for recommender systems
in e-commerce.

</span>
<span class="ltx_bibblock"><em id="bib.bib34.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2106.00573</em>
(2021).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shlezinger et al<span id="bib.bib35.2.2.1" class="ltx_text">.</span> (2020a)</span>
<span class="ltx_bibblock">
Nir Shlezinger, Mingzhe
Chen, Yonina C Eldar, H Vincent Poor,
and Shuguang Cui. 2020a.

</span>
<span class="ltx_bibblock">Federated learning with quantization constraints.
In <em id="bib.bib35.3.1" class="ltx_emph ltx_font_italic">ICASSP 2020-2020 IEEE International Conference
on Acoustics, Speech and Signal Processing (ICASSP)</em>. IEEE,
8851–8855.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shlezinger et al<span id="bib.bib36.2.2.1" class="ltx_text">.</span> (2020b)</span>
<span class="ltx_bibblock">
Nir Shlezinger, Mingzhe
Chen, Yonina C Eldar, H Vincent Poor,
and Shuguang Cui. 2020b.

</span>
<span class="ltx_bibblock">UVeQFed: Universal vector quantization for
federated learning.

</span>
<span class="ltx_bibblock"><em id="bib.bib36.3.1" class="ltx_emph ltx_font_italic">IEEE Transactions on Signal Processing</em>
69 (2020), 500–514.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sun et al<span id="bib.bib37.2.2.1" class="ltx_text">.</span> (2019)</span>
<span class="ltx_bibblock">
Fei Sun, Jun Liu,
Jian Wu, Changhua Pei,
Xiao Lin, Wenwu Ou, and
Peng Jiang. 2019.

</span>
<span class="ltx_bibblock">BERT4Rec: Sequential recommendation with
bidirectional encoder representations from transformer. In
<em id="bib.bib37.3.1" class="ltx_emph ltx_font_italic">Proceedings of the 28th ACM international
conference on information and knowledge management</em>.
1441–1450.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Vaswani et al<span id="bib.bib38.2.2.1" class="ltx_text">.</span> (2017)</span>
<span class="ltx_bibblock">
Ashish Vaswani, Noam
Shazeer, Niki Parmar, Jakob Uszkoreit,
Llion Jones, Aidan N Gomez,
Łukasz Kaiser, and Illia
Polosukhin. 2017.

</span>
<span class="ltx_bibblock">Attention is all you need.

</span>
<span class="ltx_bibblock"><em id="bib.bib38.3.1" class="ltx_emph ltx_font_italic">Advances in neural information processing
systems</em> 30 (2017).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Voigt and Von dem Bussche (2017)</span>
<span class="ltx_bibblock">
Paul Voigt and Axel
Von dem Bussche. 2017.

</span>
<span class="ltx_bibblock">The eu general data protection regulation (gdpr).

</span>
<span class="ltx_bibblock"><em id="bib.bib39.1.1" class="ltx_emph ltx_font_italic">A Practical Guide, 1st Ed., Cham: Springer
International Publishing</em> 10, 3152676
(2017), 10–5555.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib40" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wan et al<span id="bib.bib40.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Sheng Wan, Dashan Gao,
Hanlin Gu, and Daning Hu.
2023.

</span>
<span class="ltx_bibblock">FedPDD: A Privacy-preserving Double Distillation
Framework for Cross-silo Federated Recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib40.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2305.06272</em>
(2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib41" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al<span id="bib.bib41.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Qinyong Wang, Hongzhi
Yin, Tong Chen, Junliang Yu,
Alexander Zhou, and Xiangliang Zhang.
2022.

</span>
<span class="ltx_bibblock">Fast-adapting and privacy-preserving federated
recommender system.

</span>
<span class="ltx_bibblock"><em id="bib.bib41.3.1" class="ltx_emph ltx_font_italic">The VLDB Journal</em> 31,
5 (2022), 877–896.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib42" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al<span id="bib.bib42.2.2.1" class="ltx_text">.</span> (2020)</span>
<span class="ltx_bibblock">
Yansheng Wang, Yongxin
Tong, and Dingyuan Shi.
2020.

</span>
<span class="ltx_bibblock">Federated latent dirichlet allocation: A local
differential privacy based framework. In
<em id="bib.bib42.3.1" class="ltx_emph ltx_font_italic">Proceedings of the AAAI Conference on Artificial
Intelligence</em>, Vol. 34. 6283–6290.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib43" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al<span id="bib.bib43.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Yuhao Wang, Xiangyu Zhao,
Bo Chen, Qidong Liu,
Huifeng Guo, Huanshuo Liu,
Yichao Wang, Rui Zhang, and
Ruiming Tang. 2023.

</span>
<span class="ltx_bibblock">PLATE: A Prompt-Enhanced Paradigm for
Multi-Scenario Recommendations. In <em id="bib.bib43.3.1" class="ltx_emph ltx_font_italic">Proceedings of
the 46th International ACM SIGIR Conference on Research and Development in
Information Retrieval</em>. 1498–1507.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib44" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Warner (1965)</span>
<span class="ltx_bibblock">
Stanley L Warner.
1965.

</span>
<span class="ltx_bibblock">Randomized response: A survey technique for
eliminating evasive answer bias.

</span>
<span class="ltx_bibblock"><em id="bib.bib44.1.1" class="ltx_emph ltx_font_italic">J. Amer. Statist. Assoc.</em>
60, 309 (1965),
63–69.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib45" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al<span id="bib.bib45.2.2.1" class="ltx_text">.</span> (2021)</span>
<span class="ltx_bibblock">
Chuhan Wu, Fangzhao Wu,
Yang Cao, Yongfeng Huang, and
Xing Xie. 2021.

</span>
<span class="ltx_bibblock">Fedgnn: Federated graph neural network for
privacy-preserving recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib45.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2102.04925</em>
(2021).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib46" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al<span id="bib.bib46.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Xuansheng Wu, Huachi
Zhou, Wenlin Yao, Xiao Huang, and
Ninghao Liu. 2023.

</span>
<span class="ltx_bibblock">Towards Personalized Cold-Start Recommendation with
Prompts.

</span>
<span class="ltx_bibblock"><em id="bib.bib46.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2306.17256</em>
(2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib47" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al<span id="bib.bib47.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Yiqing Wu, Ruobing Xie,
Yongchun Zhu, Fuzhen Zhuang,
Xu Zhang, Leyu Lin, and
Qing He. 2022.

</span>
<span class="ltx_bibblock">Personalized prompts for sequential
recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib47.3.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2205.09666</em>
(2022).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib48" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xie et al<span id="bib.bib48.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Ruobing Xie, Qi Liu,
Liangdong Wang, Shukai Liu,
Bo Zhang, and Leyu Lin.
2022.

</span>
<span class="ltx_bibblock">Contrastive cross-domain recommendation in
matching. In <em id="bib.bib48.3.1" class="ltx_emph ltx_font_italic">Proceedings of the 28th ACM SIGKDD
Conference on Knowledge Discovery and Data Mining</em>.
4226–4236.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib49" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yan et al<span id="bib.bib49.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Dengcheng Yan, Yuchuan
Zhao, Zhongxiu Yang, Ying Jin, and
Yiwen Zhang. 2022.

</span>
<span class="ltx_bibblock">FedCDR: Privacy-preserving federated cross-domain
recommendation.

</span>
<span class="ltx_bibblock"><em id="bib.bib49.3.1" class="ltx_emph ltx_font_italic">Digital Communications and Networks</em>
8, 4 (2022),
552–560.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib50" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yin et al<span id="bib.bib50.2.2.1" class="ltx_text">.</span> (2015)</span>
<span class="ltx_bibblock">
Hongzhi Yin, Bin Cui,
Zi Huang, Weiqing Wang,
Xian Wu, and Xiaofang Zhou.
2015.

</span>
<span class="ltx_bibblock">Joint modeling of users’ interests and mobility
patterns for point-of-interest recommendation. In
<em id="bib.bib50.3.1" class="ltx_emph ltx_font_italic">Proceedings of the 23rd ACM international
conference on Multimedia</em>. 819–822.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib51" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yuan et al<span id="bib.bib51.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Wei Yuan, Chaoqun Yang,
Quoc Viet Hung Nguyen, Lizhen Cui,
Tieke He, and Hongzhi Yin.
2023.

</span>
<span class="ltx_bibblock">Interaction-level Membership Inference Attack
Against Federated Recommender Systems. In
<em id="bib.bib51.3.1" class="ltx_emph ltx_font_italic">Proceedings of the ACM Web Conference 2023</em>.
1053–1062.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib52" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang and Jiang (2021)</span>
<span class="ltx_bibblock">
JianFei Zhang and YuChen
Jiang. 2021.

</span>
<span class="ltx_bibblock">A vertical federation recommendation method based
on clustering and latent factor model. In <em id="bib.bib52.1.1" class="ltx_emph ltx_font_italic">2021
International Conference on Electronic Information Engineering and Computer
Science (EIECS)</em>. IEEE, 362–366.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib53" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al<span id="bib.bib53.2.2.1" class="ltx_text">.</span> (2021)</span>
<span class="ltx_bibblock">
Shijie Zhang, Hongzhi
Yin, Tong Chen, Zi Huang,
Lizhen Cui, and Xiangliang Zhang.
2021.

</span>
<span class="ltx_bibblock">Graph embedding for recommendation against
attribute inference attacks. In <em id="bib.bib53.3.1" class="ltx_emph ltx_font_italic">Proceedings of the
Web Conference 2021</em>. 3002–3014.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib54" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al<span id="bib.bib54.2.2.1" class="ltx_text">.</span> (2022)</span>
<span class="ltx_bibblock">
Shijie Zhang, Hongzhi
Yin, Tong Chen, Zi Huang,
Quoc Viet Hung Nguyen, and Lizhen Cui.
2022.

</span>
<span class="ltx_bibblock">Pipattack: Poisoning federated recommender systems
for manipulating item promotion. In <em id="bib.bib54.3.1" class="ltx_emph ltx_font_italic">Proceedings of
the Fifteenth ACM International Conference on Web Search and Data Mining</em>.
1415–1423.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib55" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al<span id="bib.bib55.2.2.1" class="ltx_text">.</span> (2023)</span>
<span class="ltx_bibblock">
Shijie Zhang, Wei Yuan,
and Hongzhi Yin. 2023.

</span>
<span class="ltx_bibblock">Comprehensive privacy analysis on federated
recommender system against attribute inference attacks.

</span>
<span class="ltx_bibblock"><em id="bib.bib55.3.1" class="ltx_emph ltx_font_italic">IEEE Transactions on Knowledge and Data
Engineering</em> (2023).

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib56" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al<span id="bib.bib56.2.2.1" class="ltx_text">.</span> (2019)</span>
<span class="ltx_bibblock">
Tingting Zhang, Pengpeng
Zhao, Yanchi Liu, Victor S Sheng,
Jiajie Xu, Deqing Wang,
Guanfeng Liu, Xiaofang Zhou,
et al<span id="bib.bib56.3.1" class="ltx_text">.</span> 2019.

</span>
<span class="ltx_bibblock">Feature-level Deeper Self-Attention Network for
Sequential Recommendation.. In <em id="bib.bib56.4.1" class="ltx_emph ltx_font_italic">IJCAI</em>.
4320–4326.

</span>
<span class="ltx_bibblock">
</span>
</li>
<li id="bib.bib57" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhou et al<span id="bib.bib57.2.2.1" class="ltx_text">.</span> (2020)</span>
<span class="ltx_bibblock">
Kun Zhou, Hui Wang,
Wayne Xin Zhao, Yutao Zhu,
Sirui Wang, Fuzheng Zhang,
Zhongyuan Wang, and Ji-Rong Wen.
2020.

</span>
<span class="ltx_bibblock">S3-rec: Self-supervised learning for sequential
recommendation with mutual information maximization. In
<em id="bib.bib57.3.1" class="ltx_emph ltx_font_italic">Proceedings of the 29th ACM international
conference on information &amp; knowledge management</em>.
1893–1902.

</span>
<span class="ltx_bibblock">
</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<div class="ltx_pagination ltx_role_newpage"></div>
<div class="ltx_pagination ltx_role_newpage"></div>
<section id="A1" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Datasets</h2>

<div id="A1.p1" class="ltx_para">
<p id="A1.p1.1" class="ltx_p">We conduct experiments on two pairs of domains, i.e., ”<span id="A1.p1.1.1" class="ltx_text ltx_font_italic">Office-Arts</span>”, and ”<span id="A1.p1.1.2" class="ltx_text ltx_font_italic">OnlineRetail-Pantry</span>”, in Amazon and OnlineRetail to evaluate our <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> method.
Amazon is a product review dataset that records users’ rating behaviors on products in different domains.
OnlineRetail is a UK online retail platform that records
users’ purchase histories on products within it.
In both datasets, each product has a descriptive text, which is used to introduce the product such as function, purpose, etc.
To conduct <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr>, we select the Office and Arts domains in Amazon as our learning objective (i.e., the “<span id="A1.p1.1.3" class="ltx_text ltx_font_italic">Office-Arts</span>” dataset).
To further evaluate <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> on the cross-platform scenario, we select Pantry as one domain and the data from OnlineRetail as another (i.e., the “<span id="A1.p1.1.4" class="ltx_text ltx_font_italic">OnlineRetail-Pantry</span>” dataset).
To conduct sequential recommendations, all the users’ interaction behaviors are organized in chronological order.
To satisfy the non-overlapping characteristic, all the users and items are disjoint in different domains.
The only connection between domains is that similar products may have similar descriptive texts.
To alleviate the impact of sparse data, we filter out users and items with less than 5 interactions.
The statistics of our resulting datasets are reported in Table <a href="#A1.T4" title="Table 4 ‣ Appendix A Datasets ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>.
Note that, since we focus on disjoint domains, we do not need the same number of training samples for different domains as the overlapping <abbr title="Cross-domain Recommendation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">CDR</span></abbr> methods do.</p>
</div>
<figure id="A1.T4" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 4. </span>Statistics of the preprocessed datasets. “Avg. <math id="A1.T4.2.m1.1" class="ltx_Math" alttext="n" display="inline"><semantics id="A1.T4.2.m1.1b"><mi id="A1.T4.2.m1.1.1" xref="A1.T4.2.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="A1.T4.2.m1.1c"><ci id="A1.T4.2.m1.1.1.cmml" xref="A1.T4.2.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T4.2.m1.1d">n</annotation></semantics></math>” denotes the average length of the user interaction sequence.
</figcaption>
<table id="A1.T4.3" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="A1.T4.3.1" class="ltx_tr">
<th id="A1.T4.3.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.1.2.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Datasets</span></th>
<th id="A1.T4.3.1.3" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.1.3.1" class="ltx_text ltx_font_bold" style="font-size:90%;">#Users</span></th>
<th id="A1.T4.3.1.4" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.1.4.1" class="ltx_text ltx_font_bold" style="font-size:90%;">#Items</span></th>
<th id="A1.T4.3.1.5" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.1.5.1" class="ltx_text ltx_font_bold" style="font-size:90%;">#Inters.</span></th>
<th id="A1.T4.3.1.1" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_tt" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.1.1.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Avg. <math id="A1.T4.3.1.1.1.m1.1" class="ltx_Math" alttext="n" display="inline"><semantics id="A1.T4.3.1.1.1.m1.1a"><mi id="A1.T4.3.1.1.1.m1.1.1" xref="A1.T4.3.1.1.1.m1.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="A1.T4.3.1.1.1.m1.1b"><ci id="A1.T4.3.1.1.1.m1.1.1.cmml" xref="A1.T4.3.1.1.1.m1.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T4.3.1.1.1.m1.1c">n</annotation></semantics></math></span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="A1.T4.3.2.1" class="ltx_tr">
<th id="A1.T4.3.2.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.2.1.1.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Office</span></th>
<td id="A1.T4.3.2.1.2" class="ltx_td ltx_align_right ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.2.1.2.1" class="ltx_text" style="font-size:90%;">87,436</span></td>
<td id="A1.T4.3.2.1.3" class="ltx_td ltx_align_right ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.2.1.3.1" class="ltx_text" style="font-size:90%;">25,986</span></td>
<td id="A1.T4.3.2.1.4" class="ltx_td ltx_align_right ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.2.1.4.1" class="ltx_text" style="font-size:90%;">684,837</span></td>
<td id="A1.T4.3.2.1.5" class="ltx_td ltx_align_right ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.2.1.5.1" class="ltx_text" style="font-size:90%;">7.84</span></td>
</tr>
<tr id="A1.T4.3.3.2" class="ltx_tr">
<th id="A1.T4.3.3.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.3.2.1.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Arts</span></th>
<td id="A1.T4.3.3.2.2" class="ltx_td ltx_align_right" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.3.2.2.1" class="ltx_text" style="font-size:90%;">45,486</span></td>
<td id="A1.T4.3.3.2.3" class="ltx_td ltx_align_right" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.3.2.3.1" class="ltx_text" style="font-size:90%;">21,019</span></td>
<td id="A1.T4.3.3.2.4" class="ltx_td ltx_align_right" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.3.2.4.1" class="ltx_text" style="font-size:90%;">395,150</span></td>
<td id="A1.T4.3.3.2.5" class="ltx_td ltx_align_right" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.3.2.5.1" class="ltx_text" style="font-size:90%;">8.69</span></td>
</tr>
<tr id="A1.T4.3.4.3" class="ltx_tr">
<th id="A1.T4.3.4.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.4.3.1.1" class="ltx_text ltx_font_bold" style="font-size:90%;">OnlineRetail</span></th>
<td id="A1.T4.3.4.3.2" class="ltx_td ltx_align_right ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.4.3.2.1" class="ltx_text" style="font-size:90%;">16,520</span></td>
<td id="A1.T4.3.4.3.3" class="ltx_td ltx_align_right ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.4.3.3.1" class="ltx_text" style="font-size:90%;">3,469</span></td>
<td id="A1.T4.3.4.3.4" class="ltx_td ltx_align_right ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.4.3.4.1" class="ltx_text" style="font-size:90%;">519,906</span></td>
<td id="A1.T4.3.4.3.5" class="ltx_td ltx_align_right ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.4.3.5.1" class="ltx_text" style="font-size:90%;">26.90</span></td>
</tr>
<tr id="A1.T4.3.5.4" class="ltx_tr">
<th id="A1.T4.3.5.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.5.4.1.1" class="ltx_text ltx_font_bold" style="font-size:90%;">Pantry</span></th>
<td id="A1.T4.3.5.4.2" class="ltx_td ltx_align_right ltx_border_bb" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.5.4.2.1" class="ltx_text" style="font-size:90%;">13,101</span></td>
<td id="A1.T4.3.5.4.3" class="ltx_td ltx_align_right ltx_border_bb" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.5.4.3.1" class="ltx_text" style="font-size:90%;">4,898</span></td>
<td id="A1.T4.3.5.4.4" class="ltx_td ltx_align_right ltx_border_bb" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.5.4.4.1" class="ltx_text" style="font-size:90%;">126,962</span></td>
<td id="A1.T4.3.5.4.5" class="ltx_td ltx_align_right ltx_border_bb" style="padding-left:4.0pt;padding-right:4.0pt;"><span id="A1.T4.3.5.4.5.1" class="ltx_text" style="font-size:90%;">9.69</span></td>
</tr>
</tbody>
</table>
</figure>
</section>
<section id="A2" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Two-stage Training Process</h2>

<div id="A2.p1" class="ltx_para">
<p id="A2.p1.1" class="ltx_p">The training process of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr> is shown in Algorithm <a href="#alg1" title="Algorithm 1 ‣ Appendix B Two-stage Training Process ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, which consists of the pre-training and prompt tuning stages.
In the pre-training stage, each client first learns the <span id="A2.p1.1.1" class="ltx_text ltx_font_italic">code embedding table</span> and the sequence encoder locally based on users’ local behavior data on this domain.
At the end of each training round, the accumulated gradients of the code embedding are encrypted and uploaded to the server for decoding and aggregation.
Then, the server utilizes the aggregated gradients to update the <span id="A2.p1.1.2" class="ltx_text ltx_font_italic">code embedding table</span> and synchronizes it across all clients. In the second stage, each client conducts prompt tuning to adapt the pre-learned domain knowledge to the specific domain by fixing the parameters that are not in the <span id="A2.p1.1.3" class="ltx_text ltx_font_italic">code embedding table</span> and prompts.</p>
</div>
<figure id="alg1" class="ltx_float ltx_algorithm">
<div id="alg1.12" class="ltx_listing ltx_lst_numbers_left ltx_listing">
<div id="alg1.3.3" class="ltx_listingline">
<span id="alg1.3.3.1" class="ltx_text"><span id="alg1.3.3.1.1" class="ltx_text ltx_font_bold">Input:</span> </span>Interaction sequence from two clients, <math id="alg1.1.1.m1.1" class="ltx_Math" alttext="\mathcal{S}^{A}" display="inline"><semantics id="alg1.1.1.m1.1a"><msup id="alg1.1.1.m1.1.1" xref="alg1.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.1.1.m1.1.1.2" xref="alg1.1.1.m1.1.1.2.cmml">𝒮</mi><mi id="alg1.1.1.m1.1.1.3" xref="alg1.1.1.m1.1.1.3.cmml">A</mi></msup><annotation-xml encoding="MathML-Content" id="alg1.1.1.m1.1b"><apply id="alg1.1.1.m1.1.1.cmml" xref="alg1.1.1.m1.1.1"><csymbol cd="ambiguous" id="alg1.1.1.m1.1.1.1.cmml" xref="alg1.1.1.m1.1.1">superscript</csymbol><ci id="alg1.1.1.m1.1.1.2.cmml" xref="alg1.1.1.m1.1.1.2">𝒮</ci><ci id="alg1.1.1.m1.1.1.3.cmml" xref="alg1.1.1.m1.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.1.1.m1.1c">\mathcal{S}^{A}</annotation></semantics></math> and <math id="alg1.2.2.m2.1" class="ltx_Math" alttext="\mathcal{S}^{B}" display="inline"><semantics id="alg1.2.2.m2.1a"><msup id="alg1.2.2.m2.1.1" xref="alg1.2.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.2.2.m2.1.1.2" xref="alg1.2.2.m2.1.1.2.cmml">𝒮</mi><mi id="alg1.2.2.m2.1.1.3" xref="alg1.2.2.m2.1.1.3.cmml">B</mi></msup><annotation-xml encoding="MathML-Content" id="alg1.2.2.m2.1b"><apply id="alg1.2.2.m2.1.1.cmml" xref="alg1.2.2.m2.1.1"><csymbol cd="ambiguous" id="alg1.2.2.m2.1.1.1.cmml" xref="alg1.2.2.m2.1.1">superscript</csymbol><ci id="alg1.2.2.m2.1.1.2.cmml" xref="alg1.2.2.m2.1.1.2">𝒮</ci><ci id="alg1.2.2.m2.1.1.3.cmml" xref="alg1.2.2.m2.1.1.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.2.2.m2.1c">\mathcal{S}^{B}</annotation></semantics></math>; descriptions of all items, <math id="alg1.3.3.m3.1" class="ltx_Math" alttext="\mathcal{T}" display="inline"><semantics id="alg1.3.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.3.3.m3.1.1" xref="alg1.3.3.m3.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="alg1.3.3.m3.1b"><ci id="alg1.3.3.m3.1.1.cmml" xref="alg1.3.3.m3.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.3.3.m3.1c">\mathcal{T}</annotation></semantics></math>.
</div>
<div id="alg1.12.13" class="ltx_listingline">
<span id="alg1.12.13.1" class="ltx_text"><span id="alg1.12.13.1.1" class="ltx_text ltx_font_bold">Output:</span> </span>Next-item predictions for each user in the client.
</div>
<div id="alg1.12.14" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span>
<span id="alg1.12.14.1" class="ltx_text ltx_font_bold">Stage 1: Federated Pre-training:</span> 
</div>
<div id="alg1.4.4" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span>
<span id="alg1.4.4.1" class="ltx_text ltx_font_bold">Initialization:</span> Obtain the representation vector <math id="alg1.4.4.m1.1" class="ltx_Math" alttext="v_{i}" display="inline"><semantics id="alg1.4.4.m1.1a"><msub id="alg1.4.4.m1.1.1" xref="alg1.4.4.m1.1.1.cmml"><mi id="alg1.4.4.m1.1.1.2" xref="alg1.4.4.m1.1.1.2.cmml">v</mi><mi id="alg1.4.4.m1.1.1.3" xref="alg1.4.4.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.4.4.m1.1b"><apply id="alg1.4.4.m1.1.1.cmml" xref="alg1.4.4.m1.1.1"><csymbol cd="ambiguous" id="alg1.4.4.m1.1.1.1.cmml" xref="alg1.4.4.m1.1.1">subscript</csymbol><ci id="alg1.4.4.m1.1.1.2.cmml" xref="alg1.4.4.m1.1.1.2">𝑣</ci><ci id="alg1.4.4.m1.1.1.3.cmml" xref="alg1.4.4.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.4.4.m1.1c">v_{i}</annotation></semantics></math> for each item using the method described in Section <a href="#S3.SS3" title="3.3. Vector-Quantified Item Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.3</span></a>.;
</div>
<div id="alg1.6.6" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span>
<span id="alg1.6.6.3" class="ltx_text ltx_font_bold">for</span> <em id="alg1.6.6.2" class="ltx_emph ltx_font_italic">each epoch <math id="alg1.5.5.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="alg1.5.5.1.m1.1a"><mi id="alg1.5.5.1.m1.1.1" xref="alg1.5.5.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="alg1.5.5.1.m1.1b"><ci id="alg1.5.5.1.m1.1.1.cmml" xref="alg1.5.5.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.5.5.1.m1.1c">i</annotation></semantics></math> with <math id="alg1.6.6.2.m2.3" class="ltx_Math" alttext="i=1,2,\ldots" display="inline"><semantics id="alg1.6.6.2.m2.3a"><mrow id="alg1.6.6.2.m2.3.4" xref="alg1.6.6.2.m2.3.4.cmml"><mi id="alg1.6.6.2.m2.3.4.2" xref="alg1.6.6.2.m2.3.4.2.cmml">i</mi><mo id="alg1.6.6.2.m2.3.4.1" xref="alg1.6.6.2.m2.3.4.1.cmml">=</mo><mrow id="alg1.6.6.2.m2.3.4.3.2" xref="alg1.6.6.2.m2.3.4.3.1.cmml"><mn id="alg1.6.6.2.m2.1.1" xref="alg1.6.6.2.m2.1.1.cmml">1</mn><mo id="alg1.6.6.2.m2.3.4.3.2.1" xref="alg1.6.6.2.m2.3.4.3.1.cmml">,</mo><mn id="alg1.6.6.2.m2.2.2" xref="alg1.6.6.2.m2.2.2.cmml">2</mn><mo id="alg1.6.6.2.m2.3.4.3.2.2" xref="alg1.6.6.2.m2.3.4.3.1.cmml">,</mo><mi mathvariant="normal" id="alg1.6.6.2.m2.3.3" xref="alg1.6.6.2.m2.3.3.cmml">…</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.6.6.2.m2.3b"><apply id="alg1.6.6.2.m2.3.4.cmml" xref="alg1.6.6.2.m2.3.4"><eq id="alg1.6.6.2.m2.3.4.1.cmml" xref="alg1.6.6.2.m2.3.4.1"></eq><ci id="alg1.6.6.2.m2.3.4.2.cmml" xref="alg1.6.6.2.m2.3.4.2">𝑖</ci><list id="alg1.6.6.2.m2.3.4.3.1.cmml" xref="alg1.6.6.2.m2.3.4.3.2"><cn type="integer" id="alg1.6.6.2.m2.1.1.cmml" xref="alg1.6.6.2.m2.1.1">1</cn><cn type="integer" id="alg1.6.6.2.m2.2.2.cmml" xref="alg1.6.6.2.m2.2.2">2</cn><ci id="alg1.6.6.2.m2.3.3.cmml" xref="alg1.6.6.2.m2.3.3">…</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.6.6.2.m2.3c">i=1,2,\ldots</annotation></semantics></math></em> <span id="alg1.6.6.4" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg1.12.15" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<span id="alg1.12.15.1" class="ltx_text ltx_font_bold">Client_Executes:</span> 
</div>
<div id="alg1.7.7" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<span id="alg1.7.7.2" class="ltx_text ltx_font_bold">for</span> <em id="alg1.7.7.1" class="ltx_emph ltx_font_italic">each client <math id="alg1.7.7.1.m1.1" class="ltx_Math" alttext="j" display="inline"><semantics id="alg1.7.7.1.m1.1a"><mi id="alg1.7.7.1.m1.1.1" xref="alg1.7.7.1.m1.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="alg1.7.7.1.m1.1b"><ci id="alg1.7.7.1.m1.1.1.cmml" xref="alg1.7.7.1.m1.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.7.7.1.m1.1c">j</annotation></semantics></math></em> <span id="alg1.7.7.3" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg1.12.16" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
<span id="alg1.12.16.1" class="ltx_text ltx_font_bold">for</span> <em id="alg1.12.16.2" class="ltx_emph ltx_font_italic">each batch</em> <span id="alg1.12.16.3" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg1.8.8" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Calculate local loss <math id="alg1.8.8.m1.1" class="ltx_Math" alttext="L_{j}" display="inline"><semantics id="alg1.8.8.m1.1a"><msub id="alg1.8.8.m1.1.1" xref="alg1.8.8.m1.1.1.cmml"><mi id="alg1.8.8.m1.1.1.2" xref="alg1.8.8.m1.1.1.2.cmml">L</mi><mi id="alg1.8.8.m1.1.1.3" xref="alg1.8.8.m1.1.1.3.cmml">j</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.8.8.m1.1b"><apply id="alg1.8.8.m1.1.1.cmml" xref="alg1.8.8.m1.1.1"><csymbol cd="ambiguous" id="alg1.8.8.m1.1.1.1.cmml" xref="alg1.8.8.m1.1.1">subscript</csymbol><ci id="alg1.8.8.m1.1.1.2.cmml" xref="alg1.8.8.m1.1.1.2">𝐿</ci><ci id="alg1.8.8.m1.1.1.3.cmml" xref="alg1.8.8.m1.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.8.8.m1.1c">L_{j}</annotation></semantics></math> via Eq. (<a href="#S3.E8" title="Equation 8 ‣ 3.4.1. Local Training ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>) ;
</div>
<div id="alg1.9.9" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Accumulate the gradients of code embedding:  <math id="alg1.9.9.m1.1" class="ltx_Math" alttext="g_{j}=g_{j}+\nabla{L_{j}}(\theta)" display="inline"><semantics id="alg1.9.9.m1.1a"><mrow id="alg1.9.9.m1.1.2" xref="alg1.9.9.m1.1.2.cmml"><msub id="alg1.9.9.m1.1.2.2" xref="alg1.9.9.m1.1.2.2.cmml"><mi id="alg1.9.9.m1.1.2.2.2" xref="alg1.9.9.m1.1.2.2.2.cmml">g</mi><mi id="alg1.9.9.m1.1.2.2.3" xref="alg1.9.9.m1.1.2.2.3.cmml">j</mi></msub><mo id="alg1.9.9.m1.1.2.1" xref="alg1.9.9.m1.1.2.1.cmml">=</mo><mrow id="alg1.9.9.m1.1.2.3" xref="alg1.9.9.m1.1.2.3.cmml"><msub id="alg1.9.9.m1.1.2.3.2" xref="alg1.9.9.m1.1.2.3.2.cmml"><mi id="alg1.9.9.m1.1.2.3.2.2" xref="alg1.9.9.m1.1.2.3.2.2.cmml">g</mi><mi id="alg1.9.9.m1.1.2.3.2.3" xref="alg1.9.9.m1.1.2.3.2.3.cmml">j</mi></msub><mo id="alg1.9.9.m1.1.2.3.1" xref="alg1.9.9.m1.1.2.3.1.cmml">+</mo><mrow id="alg1.9.9.m1.1.2.3.3" xref="alg1.9.9.m1.1.2.3.3.cmml"><mrow id="alg1.9.9.m1.1.2.3.3.2" xref="alg1.9.9.m1.1.2.3.3.2.cmml"><mo rspace="0.167em" id="alg1.9.9.m1.1.2.3.3.2.1" xref="alg1.9.9.m1.1.2.3.3.2.1.cmml">∇</mo><msub id="alg1.9.9.m1.1.2.3.3.2.2" xref="alg1.9.9.m1.1.2.3.3.2.2.cmml"><mi id="alg1.9.9.m1.1.2.3.3.2.2.2" xref="alg1.9.9.m1.1.2.3.3.2.2.2.cmml">L</mi><mi id="alg1.9.9.m1.1.2.3.3.2.2.3" xref="alg1.9.9.m1.1.2.3.3.2.2.3.cmml">j</mi></msub></mrow><mo lspace="0em" rspace="0em" id="alg1.9.9.m1.1.2.3.3.1" xref="alg1.9.9.m1.1.2.3.3.1.cmml">​</mo><mrow id="alg1.9.9.m1.1.2.3.3.3.2" xref="alg1.9.9.m1.1.2.3.3.cmml"><mo stretchy="false" id="alg1.9.9.m1.1.2.3.3.3.2.1" xref="alg1.9.9.m1.1.2.3.3.cmml">(</mo><mi id="alg1.9.9.m1.1.1" xref="alg1.9.9.m1.1.1.cmml">θ</mi><mo stretchy="false" id="alg1.9.9.m1.1.2.3.3.3.2.2" xref="alg1.9.9.m1.1.2.3.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.9.9.m1.1b"><apply id="alg1.9.9.m1.1.2.cmml" xref="alg1.9.9.m1.1.2"><eq id="alg1.9.9.m1.1.2.1.cmml" xref="alg1.9.9.m1.1.2.1"></eq><apply id="alg1.9.9.m1.1.2.2.cmml" xref="alg1.9.9.m1.1.2.2"><csymbol cd="ambiguous" id="alg1.9.9.m1.1.2.2.1.cmml" xref="alg1.9.9.m1.1.2.2">subscript</csymbol><ci id="alg1.9.9.m1.1.2.2.2.cmml" xref="alg1.9.9.m1.1.2.2.2">𝑔</ci><ci id="alg1.9.9.m1.1.2.2.3.cmml" xref="alg1.9.9.m1.1.2.2.3">𝑗</ci></apply><apply id="alg1.9.9.m1.1.2.3.cmml" xref="alg1.9.9.m1.1.2.3"><plus id="alg1.9.9.m1.1.2.3.1.cmml" xref="alg1.9.9.m1.1.2.3.1"></plus><apply id="alg1.9.9.m1.1.2.3.2.cmml" xref="alg1.9.9.m1.1.2.3.2"><csymbol cd="ambiguous" id="alg1.9.9.m1.1.2.3.2.1.cmml" xref="alg1.9.9.m1.1.2.3.2">subscript</csymbol><ci id="alg1.9.9.m1.1.2.3.2.2.cmml" xref="alg1.9.9.m1.1.2.3.2.2">𝑔</ci><ci id="alg1.9.9.m1.1.2.3.2.3.cmml" xref="alg1.9.9.m1.1.2.3.2.3">𝑗</ci></apply><apply id="alg1.9.9.m1.1.2.3.3.cmml" xref="alg1.9.9.m1.1.2.3.3"><times id="alg1.9.9.m1.1.2.3.3.1.cmml" xref="alg1.9.9.m1.1.2.3.3.1"></times><apply id="alg1.9.9.m1.1.2.3.3.2.cmml" xref="alg1.9.9.m1.1.2.3.3.2"><ci id="alg1.9.9.m1.1.2.3.3.2.1.cmml" xref="alg1.9.9.m1.1.2.3.3.2.1">∇</ci><apply id="alg1.9.9.m1.1.2.3.3.2.2.cmml" xref="alg1.9.9.m1.1.2.3.3.2.2"><csymbol cd="ambiguous" id="alg1.9.9.m1.1.2.3.3.2.2.1.cmml" xref="alg1.9.9.m1.1.2.3.3.2.2">subscript</csymbol><ci id="alg1.9.9.m1.1.2.3.3.2.2.2.cmml" xref="alg1.9.9.m1.1.2.3.3.2.2.2">𝐿</ci><ci id="alg1.9.9.m1.1.2.3.3.2.2.3.cmml" xref="alg1.9.9.m1.1.2.3.3.2.2.3">𝑗</ci></apply></apply><ci id="alg1.9.9.m1.1.1.cmml" xref="alg1.9.9.m1.1.1">𝜃</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.9.9.m1.1c">g_{j}=g_{j}+\nabla{L_{j}}(\theta)</annotation></semantics></math> ;
</div>
<div id="alg1.12.17" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   

</div>
<div id="alg1.12.18" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>    end for
</div>
<div id="alg1.10.10" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   Apply the encryption to <math id="alg1.10.10.m1.1" class="ltx_Math" alttext="g_{j}" display="inline"><semantics id="alg1.10.10.m1.1a"><msub id="alg1.10.10.m1.1.1" xref="alg1.10.10.m1.1.1.cmml"><mi id="alg1.10.10.m1.1.1.2" xref="alg1.10.10.m1.1.1.2.cmml">g</mi><mi id="alg1.10.10.m1.1.1.3" xref="alg1.10.10.m1.1.1.3.cmml">j</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.10.10.m1.1b"><apply id="alg1.10.10.m1.1.1.cmml" xref="alg1.10.10.m1.1.1"><csymbol cd="ambiguous" id="alg1.10.10.m1.1.1.1.cmml" xref="alg1.10.10.m1.1.1">subscript</csymbol><ci id="alg1.10.10.m1.1.1.2.cmml" xref="alg1.10.10.m1.1.1.2">𝑔</ci><ci id="alg1.10.10.m1.1.1.3.cmml" xref="alg1.10.10.m1.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.10.10.m1.1c">g_{j}</annotation></semantics></math> via Eq. (<a href="#S3.E9" title="Equation 9 ‣ 3.4.2. Gradient Uploading and the Encryption Strategy ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">9</span></a>) - (<a href="#S3.E12" title="Equation 12 ‣ 3.4.2. Gradient Uploading and the Encryption Strategy ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">12</span></a>) ;
</div>
<div id="alg1.12.19" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Upload the encrypted gradients to the server ;
</div>
<div id="alg1.12.20" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>     <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   

</div>
<div id="alg1.12.21" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>    end for
</div>
<div id="alg1.12.22" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   <span id="alg1.12.22.1" class="ltx_text ltx_font_bold">Server_Executes:</span> 
</div>
<div id="alg1.12.23" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">16</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Decode and aggregate the received client gradients using Eq. (<a href="#S3.E13" title="Equation 13 ‣ 3.4.3. Gradient Aggregation and Synchronization ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">13</span></a>) - (<a href="#S3.E17" title="Equation 17 ‣ 3.4.3. Gradient Aggregation and Synchronization ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">17</span></a>) ;
</div>
<div id="alg1.11.11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">17</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Update global code embedding <math id="alg1.11.11.m1.1" class="ltx_Math" alttext="\bm{E}" display="inline"><semantics id="alg1.11.11.m1.1a"><mi id="alg1.11.11.m1.1.1" xref="alg1.11.11.m1.1.1.cmml">𝑬</mi><annotation-xml encoding="MathML-Content" id="alg1.11.11.m1.1b"><ci id="alg1.11.11.m1.1.1.cmml" xref="alg1.11.11.m1.1.1">𝑬</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.11.11.m1.1c">\bm{E}</annotation></semantics></math> via Eq. (<a href="#S3.E18" title="Equation 18 ‣ 3.4.3. Gradient Aggregation and Synchronization ‣ 3.4. Federated Content Representation ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">18</span></a>) ;
</div>
<div id="alg1.12.12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">18</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Synchronize <math id="alg1.12.12.m1.1" class="ltx_Math" alttext="\bm{E}" display="inline"><semantics id="alg1.12.12.m1.1a"><mi id="alg1.12.12.m1.1.1" xref="alg1.12.12.m1.1.1.cmml">𝑬</mi><annotation-xml encoding="MathML-Content" id="alg1.12.12.m1.1b"><ci id="alg1.12.12.m1.1.1.cmml" xref="alg1.12.12.m1.1.1">𝑬</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.12.12.m1.1c">\bm{E}</annotation></semantics></math> to all the clients ;
</div>
<div id="alg1.12.24" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">19</span> end for
</div>
<div id="alg1.12.25" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">20</span><span id="alg1.12.25.1" class="ltx_text ltx_font_bold">Stage 2: Prompt Tuning in clients:</span> 
</div>
<div id="alg1.12.26" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">21</span>
<span id="alg1.12.26.1" class="ltx_text ltx_font_bold">while</span> <em id="alg1.12.26.2" class="ltx_emph ltx_font_italic">not converge</em> <span id="alg1.12.26.3" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg1.12.27" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">22</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Freeze all parameters except for the code embedding ;
</div>
<div id="alg1.12.28" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">23</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Obtain the domain prompt via Eq. (<a href="#S3.E19" title="Equation 19 ‣ 3.5.1. The Full Prompting Schema ‣ 3.5. Domain-adaptive Prompting Paradigm ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">19</span></a>) ;
</div>
<div id="alg1.12.29" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">24</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Obtain the user prompt via Eq. (<a href="#S3.E21" title="Equation 21 ‣ 3.5.1. The Full Prompting Schema ‣ 3.5. Domain-adaptive Prompting Paradigm ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">21</span></a>) ;
</div>
<div id="alg1.12.30" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">25</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Obtain the final output by combining prompts and sequence output using Eq. (<a href="#S3.E22" title="Equation 22 ‣ 3.5.1. The Full Prompting Schema ‣ 3.5. Domain-adaptive Prompting Paradigm ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">22</span></a>) or Eq. (<a href="#S3.E23" title="Equation 23 ‣ 3.5.2. The Light Prompting Paradigm ‣ 3.5. Domain-adaptive Prompting Paradigm ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">23</span></a>) ;
</div>
<div id="alg1.12.31" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">26</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   
Train using the final output with Eq. (<a href="#S3.E24" title="Equation 24 ‣ 3.5.2. The Light Prompting Paradigm ‣ 3.5. Domain-adaptive Prompting Paradigm ‣ 3. Methodologies ‣ Prompt-enhanced Federated Content Representation Learning for Cross-domain Recommendation" class="ltx_ref"><span class="ltx_text ltx_ref_tag">24</span></a>) ;
</div>
<div id="alg1.12.32" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">27</span>  <span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;"> </span>   

</div>
<div id="alg1.12.33" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">28</span> end while
</div>
<div id="alg1.12.34" class="ltx_listingline">
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span id="alg1.14.1.1" class="ltx_text ltx_font_bold">Algorithm 1</span> </span>The two-stage training process of <abbr title="Prompt-enhanced Federated Content Representation" class="ltx_glossaryref"><span class="ltx_text ltx_glossary_short">PFCR</span></abbr>.</figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2401.14677" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2401.14678" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2401.14678">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2401.14678" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2401.14679" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Tue Feb 27 07:11:30 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
