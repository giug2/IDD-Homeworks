<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery</title>
<!--Generated on Tue Sep 10 02:00:18 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2409.05591v2/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S1" title="In MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2" title="In MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>MemoRAG</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS0.SSS0.Px1" title="In 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title">System Implementation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS1" title="In 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Memory Module</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS2" title="In 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Training for Memory Module</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS3" title="In 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>The MemoRAG Framework</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS4" title="In 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.4 </span>Applicability</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS4.SSS0.Px1" title="In 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title">Ambiguous Information Needs</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS4.SSS0.Px2" title="In 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title">Information Seeking with Distributed Evidence Query</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS4.SSS0.Px3" title="In 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title">Information Aggregation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS4.SSS0.Px4" title="In 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title">Personalized Assistant</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.SS4.SSS0.Px5" title="In 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title">Life-Long Conversational Search</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S3" title="In MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Experiment</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S3.SS1" title="In 3 Experiment ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Dataset</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S3.SS2" title="In 3 Experiment ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Baselines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S3.SS3" title="In 3 Experiment ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Experiments on UltraDomain</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S3.SS4" title="In 3 Experiment ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Experiments on All Benchmarks</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S4" title="In MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#A1" title="In MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>More details of the Datasets</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Hongjin Qian<sup class="ltx_sup" id="id8.8.id1"><span class="ltx_text ltx_font_italic" id="id8.8.id1.1">1</span></sup>, Peitian Zhang<sup class="ltx_sup" id="id9.9.id2">2</sup>, Zheng Liu<sup class="ltx_sup" id="id10.10.id3">1</sup>,  Kelong Mao<sup class="ltx_sup" id="id11.11.id4">2</sup>, Zhicheng Dou<sup class="ltx_sup" id="id12.12.id5">2</sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id13.13.id6">1</sup> Beijing Academy of Artificial Intelligence 
<br class="ltx_break"/><sup class="ltx_sup" id="id14.14.id7">2</sup> Gaoling School of Artificial Intelligence, Renmin University of China
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id15.15.id8">{chienqhj,zhengliu1026}@gmail.com</span>
<br class="ltx_break"/>
</span><span class="ltx_author_notes">Corresponding author.</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id16.id1">Retrieval-Augmented Generation (RAG) leverages retrieval tools to access external databases,
thereby enhancing the generation quality of large language models (LLMs) through optimized context. However, the existing retrieval methods are constrained inherently, as they can only perform relevance matching between explicitly stated queries and well-formed knowledge, but unable to handle tasks involving ambiguous information needs or unstructured knowledge.
Consequently, existing RAG systems are primarily effective for straightforward question-answering tasks.
In this work, we propose <span class="ltx_text ltx_font_bold" id="id16.id1.1">MemoRAG</span>, a novel retrieval-augmented generation paradigm empowered by long-term memory. MemoRAG adopts a dual-system architecture. On the one hand, it employs a <span class="ltx_text ltx_font_italic" id="id16.id1.2">light but long-range</span> LLM to form the global memory of database. Once a task is presented, it generates draft answers, cluing the retrieval tools to locate useful information within the database. On the other hand, it leverages an <span class="ltx_text ltx_font_italic" id="id16.id1.3">expensive but expressive</span> LLM, which generates the ultimate answer based on the retrieved information.
Building on this general framework, we further optimize MemoRAG’s performance by enhancing its cluing mechanism and memorization capacity.
In our experiment, MemoRAG achieves superior performance across a variety of evaluation tasks, including both complex ones where conventional RAG fails and straightforward ones where RAG is commonly applied.
MemoRAG is under intensive development, whose prototypes and resources will be constantly published at <a class="ltx_ref ltx_href" href="https://github.com/qhjqhj00/MemoRAG" title="">our project repository</a>.</p>
</div>
<figure class="ltx_figure" id="S0.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="511" id="S0.F1.g1" src="x1.png" width="746"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Comparison between Standard RAG and MemoRAG in processing queries that demand high-level understanding across the entire database, using the <span class="ltx_text ltx_font_smallcaps" id="S0.F1.2.1">Harry Potter</span> books as the database. In the left figure, Standard RAG struggles to accurately locate the necessary evidence due to the implicit nature of the input query, resulting in a less accurate answer. In the right figure, MemoRAG constructs a global memory over the whole database. When presented with the query, MemoRAG first recalls relevant clues, enabling useful information to be retrieved and thus leading to a precise and comprehensive answer.</figcaption>
</figure>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para ltx_noindent" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Although the fundamental capabilities of large language models (LLMs) have improved rapidly over time <cite class="ltx_cite ltx_citemacro_cite">Brown et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib3" title="">2020</a>); OpenAI (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib18" title="">2023</a>); Touvron et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib21" title="">2023</a>)</cite>, they still face significant challenges in practice due to their inherent limitations. For instance, LLMs are likely to generate hallucinations or out-dated contents because of the lack of proper knowledge. They also struggle to manage overloaded historical interactions with users due to their limited context windows <cite class="ltx_cite ltx_citemacro_cite">Bai et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib2" title="">2023</a>); Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib24" title="">2024</a>)</cite>. Retrieval-augmented generation (RAG) has emerged as a promising paradigm for LLMs to address these challenges. It employs specialized retrieval tools that bring in useful knowledge from external databases, therefore, it enables LLMs to generate factual responses based on a knowledge-grounded context <cite class="ltx_cite ltx_citemacro_cite">Izacard &amp; Grave (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib13" title="">2021</a>); Gao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib10" title="">2024</a>)</cite>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Traditional RAG systems often require clearly stated information needs and well-formed knowledge. As a result, their applications are mostly constrained to straightforward question answering tasks <cite class="ltx_cite ltx_citemacro_cite">Nogueira &amp; Cho (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib17" title="">2020</a>); Lewis et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib16" title="">2020</a>); Gao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib10" title="">2024</a>)</cite>. However, it is not the case for many real-world problems where the information needs are ambiguous and the external knowledge is unstructured <cite class="ltx_cite ltx_citemacro_cite">Edge et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib7" title="">2024</a>); Qian et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib19" title="">2024</a>)</cite>. For example, a reader of a book might want to understand <span class="ltx_text ltx_font_italic" id="S1.p2.1.1">the mutual relationships between the main characters</span>. To solve this problem, the system would need to first identify the main characters’ names and then locate the sections where the corresponding names co-exist, from which their mutual relationships can be inferred. In other words, it calls for the comprehension of information needs based on the contextual knowledge of the book before relevant information can be effectively retrieved.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">To address the above challenge, we propose a novel framework called <span class="ltx_text ltx_font_bold" id="S1.p3.1.1">MemoRAG</span>, as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S0.F1" title="Figure 1 ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">1</span></a>. This framework introduces an smart interface that connects tasks with the relevant knowledge from a database. For each presented task, MemoRAG prompts its memory module to generate retrieval clues. These clues are essentially drafted answers based on a compressed representation of the database, i.e. the memory. Despite the possible existence of false details, the clues explicitly reveal the underlying information needs for the presented task. Furthermore, they can also correspond directly to the source information in reality. By using these clues as queries, MemoRAG can effectively retrieve the necessary knowledge from the database.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">According to the above mechanism, the memory module is expected to be 1) <span class="ltx_text ltx_font_bold" id="S1.p4.1.1">retentive</span>: memorizing the global information of the entire database, and 2) <span class="ltx_text ltx_font_bold" id="S1.p4.1.2">instructive</span>: providing useful clues based on which all needed knowledge can be retrieved comprehensively. Therefore, we propose the following designs to optimize the performance of MemoRAG. First, we introduce a dual-system architecture, with a light LLM to serve as the memory and a heavy LLM to perform retrieval-augmented generation. The light LLM must be cost-effective and lengthy-in-context, being able to accommodate the whole database in a limited computation budget. Second, we perform fine-tuning of the memory, such that the generated clues can achieve the optimized retrieval quality.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">To evaluate the effectiveness of MemoRAG, we have developed a comprehensive benchmark called <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.1">UltraDomain</span>, which consists of complex RAG tasks with long input contexts drawn from diverse domains (e.g., law, finance, education, healthcare, programming). <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.2">UltraDomain</span> includes tasks characterized by queries that: (1) involve implicit information needs, (2) require distributed evidence gathering, and (3) demand a high-level understanding of the entire database. A common challenge among these queries is that the relevant knowledge cannot be directly retrieved through simple searches. While conventional RAG methods struggle with such complex tasks, MemoRAG demonstrates superior performance by generating high-quality answers based on precisely retrieved knowledge. Furthermore, MemoRAG remains highly competitive in traditional question-answering tasks, where its clue-based retrieval approach continues to offer significant advantages. The model and source code will be publicly released to support further applications and research in this field.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>MemoRAG</h2>
<div class="ltx_para ltx_noindent" id="S2.p1">
<p class="ltx_p" id="S2.p1.8">The standard RAG framework can be concisely expressed as:</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A1.EGx1">
<tbody id="S2.E1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle{\mathcal{Y}}=\Theta(q,{\mathcal{C}}\mid\theta),\quad{\mathcal{C}%
}=\Gamma(q,{\mathcal{D}}|\gamma)," class="ltx_Math" display="inline" id="S2.E1.m1.3"><semantics id="S2.E1.m1.3a"><mrow id="S2.E1.m1.3.3.1"><mrow id="S2.E1.m1.3.3.1.1.2" xref="S2.E1.m1.3.3.1.1.3.cmml"><mrow id="S2.E1.m1.3.3.1.1.1.1" xref="S2.E1.m1.3.3.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E1.m1.3.3.1.1.1.1.3" xref="S2.E1.m1.3.3.1.1.1.1.3.cmml">𝒴</mi><mo id="S2.E1.m1.3.3.1.1.1.1.2" xref="S2.E1.m1.3.3.1.1.1.1.2.cmml">=</mo><mrow id="S2.E1.m1.3.3.1.1.1.1.1" xref="S2.E1.m1.3.3.1.1.1.1.1.cmml"><mi id="S2.E1.m1.3.3.1.1.1.1.1.3" mathvariant="normal" xref="S2.E1.m1.3.3.1.1.1.1.1.3.cmml">Θ</mi><mo id="S2.E1.m1.3.3.1.1.1.1.1.2" xref="S2.E1.m1.3.3.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E1.m1.3.3.1.1.1.1.1.1.1" xref="S2.E1.m1.3.3.1.1.1.1.1.1.2.cmml"><mo id="S2.E1.m1.3.3.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.E1.m1.3.3.1.1.1.1.1.1.2.cmml">(</mo><mi id="S2.E1.m1.1.1" xref="S2.E1.m1.1.1.cmml">q</mi><mo id="S2.E1.m1.3.3.1.1.1.1.1.1.1.3" xref="S2.E1.m1.3.3.1.1.1.1.1.1.2.cmml">,</mo><mrow id="S2.E1.m1.3.3.1.1.1.1.1.1.1.1" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.2.cmml">𝒞</mi><mo id="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.1.cmml">∣</mo><mi id="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.3.cmml">θ</mi></mrow><mo id="S2.E1.m1.3.3.1.1.1.1.1.1.1.4" stretchy="false" xref="S2.E1.m1.3.3.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E1.m1.3.3.1.1.2.3" rspace="1.167em" xref="S2.E1.m1.3.3.1.1.3a.cmml">,</mo><mrow id="S2.E1.m1.3.3.1.1.2.2" xref="S2.E1.m1.3.3.1.1.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E1.m1.3.3.1.1.2.2.3" xref="S2.E1.m1.3.3.1.1.2.2.3.cmml">𝒞</mi><mo id="S2.E1.m1.3.3.1.1.2.2.2" xref="S2.E1.m1.3.3.1.1.2.2.2.cmml">=</mo><mrow id="S2.E1.m1.3.3.1.1.2.2.1" xref="S2.E1.m1.3.3.1.1.2.2.1.cmml"><mi id="S2.E1.m1.3.3.1.1.2.2.1.3" mathvariant="normal" xref="S2.E1.m1.3.3.1.1.2.2.1.3.cmml">Γ</mi><mo id="S2.E1.m1.3.3.1.1.2.2.1.2" xref="S2.E1.m1.3.3.1.1.2.2.1.2.cmml">⁢</mo><mrow id="S2.E1.m1.3.3.1.1.2.2.1.1.1" xref="S2.E1.m1.3.3.1.1.2.2.1.1.2.cmml"><mo id="S2.E1.m1.3.3.1.1.2.2.1.1.1.2" stretchy="false" xref="S2.E1.m1.3.3.1.1.2.2.1.1.2.cmml">(</mo><mi id="S2.E1.m1.2.2" xref="S2.E1.m1.2.2.cmml">q</mi><mo id="S2.E1.m1.3.3.1.1.2.2.1.1.1.3" xref="S2.E1.m1.3.3.1.1.2.2.1.1.2.cmml">,</mo><mrow id="S2.E1.m1.3.3.1.1.2.2.1.1.1.1" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.2" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.2.cmml">𝒟</mi><mo fence="false" id="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.1" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.1.cmml">|</mo><mi id="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.3" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.3.cmml">γ</mi></mrow><mo id="S2.E1.m1.3.3.1.1.2.2.1.1.1.4" stretchy="false" xref="S2.E1.m1.3.3.1.1.2.2.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S2.E1.m1.3.3.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.3b"><apply id="S2.E1.m1.3.3.1.1.3.cmml" xref="S2.E1.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S2.E1.m1.3.3.1.1.3a.cmml" xref="S2.E1.m1.3.3.1.1.2.3">formulae-sequence</csymbol><apply id="S2.E1.m1.3.3.1.1.1.1.cmml" xref="S2.E1.m1.3.3.1.1.1.1"><eq id="S2.E1.m1.3.3.1.1.1.1.2.cmml" xref="S2.E1.m1.3.3.1.1.1.1.2"></eq><ci id="S2.E1.m1.3.3.1.1.1.1.3.cmml" xref="S2.E1.m1.3.3.1.1.1.1.3">𝒴</ci><apply id="S2.E1.m1.3.3.1.1.1.1.1.cmml" xref="S2.E1.m1.3.3.1.1.1.1.1"><times id="S2.E1.m1.3.3.1.1.1.1.1.2.cmml" xref="S2.E1.m1.3.3.1.1.1.1.1.2"></times><ci id="S2.E1.m1.3.3.1.1.1.1.1.3.cmml" xref="S2.E1.m1.3.3.1.1.1.1.1.3">Θ</ci><interval closure="open" id="S2.E1.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1"><ci id="S2.E1.m1.1.1.cmml" xref="S2.E1.m1.1.1">𝑞</ci><apply id="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.1">conditional</csymbol><ci id="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.2">𝒞</ci><ci id="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.3.3.1.1.1.1.1.1.1.1.3">𝜃</ci></apply></interval></apply></apply><apply id="S2.E1.m1.3.3.1.1.2.2.cmml" xref="S2.E1.m1.3.3.1.1.2.2"><eq id="S2.E1.m1.3.3.1.1.2.2.2.cmml" xref="S2.E1.m1.3.3.1.1.2.2.2"></eq><ci id="S2.E1.m1.3.3.1.1.2.2.3.cmml" xref="S2.E1.m1.3.3.1.1.2.2.3">𝒞</ci><apply id="S2.E1.m1.3.3.1.1.2.2.1.cmml" xref="S2.E1.m1.3.3.1.1.2.2.1"><times id="S2.E1.m1.3.3.1.1.2.2.1.2.cmml" xref="S2.E1.m1.3.3.1.1.2.2.1.2"></times><ci id="S2.E1.m1.3.3.1.1.2.2.1.3.cmml" xref="S2.E1.m1.3.3.1.1.2.2.1.3">Γ</ci><interval closure="open" id="S2.E1.m1.3.3.1.1.2.2.1.1.2.cmml" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1"><ci id="S2.E1.m1.2.2.cmml" xref="S2.E1.m1.2.2">𝑞</ci><apply id="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.cmml" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1.1"><csymbol cd="latexml" id="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.1.cmml" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.1">conditional</csymbol><ci id="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.2.cmml" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.2">𝒟</ci><ci id="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.3.cmml" xref="S2.E1.m1.3.3.1.1.2.2.1.1.1.1.3">𝛾</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.3c">\displaystyle{\mathcal{Y}}=\Theta(q,{\mathcal{C}}\mid\theta),\quad{\mathcal{C}%
}=\Gamma(q,{\mathcal{D}}|\gamma),</annotation><annotation encoding="application/x-llamapun" id="S2.E1.m1.3d">caligraphic_Y = roman_Θ ( italic_q , caligraphic_C ∣ italic_θ ) , caligraphic_C = roman_Γ ( italic_q , caligraphic_D | italic_γ ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.p1.7">where <math alttext="\Theta(\cdot)" class="ltx_Math" display="inline" id="S2.p1.1.m1.1"><semantics id="S2.p1.1.m1.1a"><mrow id="S2.p1.1.m1.1.2" xref="S2.p1.1.m1.1.2.cmml"><mi id="S2.p1.1.m1.1.2.2" mathvariant="normal" xref="S2.p1.1.m1.1.2.2.cmml">Θ</mi><mo id="S2.p1.1.m1.1.2.1" xref="S2.p1.1.m1.1.2.1.cmml">⁢</mo><mrow id="S2.p1.1.m1.1.2.3.2" xref="S2.p1.1.m1.1.2.cmml"><mo id="S2.p1.1.m1.1.2.3.2.1" stretchy="false" xref="S2.p1.1.m1.1.2.cmml">(</mo><mo id="S2.p1.1.m1.1.1" lspace="0em" rspace="0em" xref="S2.p1.1.m1.1.1.cmml">⋅</mo><mo id="S2.p1.1.m1.1.2.3.2.2" stretchy="false" xref="S2.p1.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p1.1.m1.1b"><apply id="S2.p1.1.m1.1.2.cmml" xref="S2.p1.1.m1.1.2"><times id="S2.p1.1.m1.1.2.1.cmml" xref="S2.p1.1.m1.1.2.1"></times><ci id="S2.p1.1.m1.1.2.2.cmml" xref="S2.p1.1.m1.1.2.2">Θ</ci><ci id="S2.p1.1.m1.1.1.cmml" xref="S2.p1.1.m1.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.1.m1.1c">\Theta(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.p1.1.m1.1d">roman_Θ ( ⋅ )</annotation></semantics></math> and <math alttext="\Gamma(\cdot)" class="ltx_Math" display="inline" id="S2.p1.2.m2.1"><semantics id="S2.p1.2.m2.1a"><mrow id="S2.p1.2.m2.1.2" xref="S2.p1.2.m2.1.2.cmml"><mi id="S2.p1.2.m2.1.2.2" mathvariant="normal" xref="S2.p1.2.m2.1.2.2.cmml">Γ</mi><mo id="S2.p1.2.m2.1.2.1" xref="S2.p1.2.m2.1.2.1.cmml">⁢</mo><mrow id="S2.p1.2.m2.1.2.3.2" xref="S2.p1.2.m2.1.2.cmml"><mo id="S2.p1.2.m2.1.2.3.2.1" stretchy="false" xref="S2.p1.2.m2.1.2.cmml">(</mo><mo id="S2.p1.2.m2.1.1" lspace="0em" rspace="0em" xref="S2.p1.2.m2.1.1.cmml">⋅</mo><mo id="S2.p1.2.m2.1.2.3.2.2" stretchy="false" xref="S2.p1.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p1.2.m2.1b"><apply id="S2.p1.2.m2.1.2.cmml" xref="S2.p1.2.m2.1.2"><times id="S2.p1.2.m2.1.2.1.cmml" xref="S2.p1.2.m2.1.2.1"></times><ci id="S2.p1.2.m2.1.2.2.cmml" xref="S2.p1.2.m2.1.2.2">Γ</ci><ci id="S2.p1.2.m2.1.1.cmml" xref="S2.p1.2.m2.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.2.m2.1c">\Gamma(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.p1.2.m2.1d">roman_Γ ( ⋅ )</annotation></semantics></math> denote the generation model and the retrieval model, respectively. <math alttext="q" class="ltx_Math" display="inline" id="S2.p1.3.m3.1"><semantics id="S2.p1.3.m3.1a"><mi id="S2.p1.3.m3.1.1" xref="S2.p1.3.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S2.p1.3.m3.1b"><ci id="S2.p1.3.m3.1.1.cmml" xref="S2.p1.3.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.3.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S2.p1.3.m3.1d">italic_q</annotation></semantics></math> represents the input query, <math alttext="{\mathcal{C}}" class="ltx_Math" display="inline" id="S2.p1.4.m4.1"><semantics id="S2.p1.4.m4.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p1.4.m4.1.1" xref="S2.p1.4.m4.1.1.cmml">𝒞</mi><annotation-xml encoding="MathML-Content" id="S2.p1.4.m4.1b"><ci id="S2.p1.4.m4.1.1.cmml" xref="S2.p1.4.m4.1.1">𝒞</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.4.m4.1c">{\mathcal{C}}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.4.m4.1d">caligraphic_C</annotation></semantics></math> is the context retrieved from a relevant database <math alttext="{\mathcal{D}}" class="ltx_Math" display="inline" id="S2.p1.5.m5.1"><semantics id="S2.p1.5.m5.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p1.5.m5.1.1" xref="S2.p1.5.m5.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S2.p1.5.m5.1b"><ci id="S2.p1.5.m5.1.1.cmml" xref="S2.p1.5.m5.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.5.m5.1c">{\mathcal{D}}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.5.m5.1d">caligraphic_D</annotation></semantics></math> and <math alttext="{\mathcal{Y}}" class="ltx_Math" display="inline" id="S2.p1.6.m6.1"><semantics id="S2.p1.6.m6.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p1.6.m6.1.1" xref="S2.p1.6.m6.1.1.cmml">𝒴</mi><annotation-xml encoding="MathML-Content" id="S2.p1.6.m6.1b"><ci id="S2.p1.6.m6.1.1.cmml" xref="S2.p1.6.m6.1.1">𝒴</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.6.m6.1c">{\mathcal{Y}}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.6.m6.1d">caligraphic_Y</annotation></semantics></math> is the final answer. In many practical scenarios, the input query <math alttext="q" class="ltx_Math" display="inline" id="S2.p1.7.m7.1"><semantics id="S2.p1.7.m7.1a"><mi id="S2.p1.7.m7.1.1" xref="S2.p1.7.m7.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S2.p1.7.m7.1b"><ci id="S2.p1.7.m7.1.1.cmml" xref="S2.p1.7.m7.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.7.m7.1c">q</annotation><annotation encoding="application/x-llamapun" id="S2.p1.7.m7.1d">italic_q</annotation></semantics></math> often carries implicit information-seeking intents that can be challenging for a standard retriever, which typically relies on lexical or semantic matching, to fully comprehend. This limitation underscores the necessity of designing an intermediate module to bridge the semantic gap that arises in many practical scenarios.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p2">
<p class="ltx_p" id="S2.p2.3">In this paper, we propose MemoRAG, which leverages a memory model <math alttext="\Theta_{\text{mem}}(\cdot)" class="ltx_Math" display="inline" id="S2.p2.1.m1.1"><semantics id="S2.p2.1.m1.1a"><mrow id="S2.p2.1.m1.1.2" xref="S2.p2.1.m1.1.2.cmml"><msub id="S2.p2.1.m1.1.2.2" xref="S2.p2.1.m1.1.2.2.cmml"><mi id="S2.p2.1.m1.1.2.2.2" mathvariant="normal" xref="S2.p2.1.m1.1.2.2.2.cmml">Θ</mi><mtext id="S2.p2.1.m1.1.2.2.3" xref="S2.p2.1.m1.1.2.2.3a.cmml">mem</mtext></msub><mo id="S2.p2.1.m1.1.2.1" xref="S2.p2.1.m1.1.2.1.cmml">⁢</mo><mrow id="S2.p2.1.m1.1.2.3.2" xref="S2.p2.1.m1.1.2.cmml"><mo id="S2.p2.1.m1.1.2.3.2.1" stretchy="false" xref="S2.p2.1.m1.1.2.cmml">(</mo><mo id="S2.p2.1.m1.1.1" lspace="0em" rspace="0em" xref="S2.p2.1.m1.1.1.cmml">⋅</mo><mo id="S2.p2.1.m1.1.2.3.2.2" stretchy="false" xref="S2.p2.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p2.1.m1.1b"><apply id="S2.p2.1.m1.1.2.cmml" xref="S2.p2.1.m1.1.2"><times id="S2.p2.1.m1.1.2.1.cmml" xref="S2.p2.1.m1.1.2.1"></times><apply id="S2.p2.1.m1.1.2.2.cmml" xref="S2.p2.1.m1.1.2.2"><csymbol cd="ambiguous" id="S2.p2.1.m1.1.2.2.1.cmml" xref="S2.p2.1.m1.1.2.2">subscript</csymbol><ci id="S2.p2.1.m1.1.2.2.2.cmml" xref="S2.p2.1.m1.1.2.2.2">Θ</ci><ci id="S2.p2.1.m1.1.2.2.3a.cmml" xref="S2.p2.1.m1.1.2.2.3"><mtext id="S2.p2.1.m1.1.2.2.3.cmml" mathsize="70%" xref="S2.p2.1.m1.1.2.2.3">mem</mtext></ci></apply><ci id="S2.p2.1.m1.1.1.cmml" xref="S2.p2.1.m1.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.1.m1.1c">\Theta_{\text{mem}}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.p2.1.m1.1d">roman_Θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> to function as a semantic bridge between the input query <math alttext="q" class="ltx_Math" display="inline" id="S2.p2.2.m2.1"><semantics id="S2.p2.2.m2.1a"><mi id="S2.p2.2.m2.1.1" xref="S2.p2.2.m2.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S2.p2.2.m2.1b"><ci id="S2.p2.2.m2.1.1.cmml" xref="S2.p2.2.m2.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.2.m2.1c">q</annotation><annotation encoding="application/x-llamapun" id="S2.p2.2.m2.1d">italic_q</annotation></semantics></math> and the relevant database <math alttext="{\mathcal{D}}" class="ltx_Math" display="inline" id="S2.p2.3.m3.1"><semantics id="S2.p2.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p2.3.m3.1.1" xref="S2.p2.3.m3.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S2.p2.3.m3.1b"><ci id="S2.p2.3.m3.1.1.cmml" xref="S2.p2.3.m3.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.3.m3.1c">{\mathcal{D}}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.3.m3.1d">caligraphic_D</annotation></semantics></math>. Formally, this process can be represented as:</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A1.EGx2">
<tbody id="S2.E2"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle{\mathcal{Y}}=\Theta(q,{\mathcal{C}}\mid\theta),\quad{\mathcal{C}%
}=\Gamma(y,{\mathcal{D}}\mid\gamma),\quad y=\Theta_{\text{mem}}(q,{\mathcal{D}%
}\mid\theta_{\text{mem}})." class="ltx_Math" display="inline" id="S2.E2.m1.4"><semantics id="S2.E2.m1.4a"><mrow id="S2.E2.m1.4.4.1"><mrow id="S2.E2.m1.4.4.1.1.2" xref="S2.E2.m1.4.4.1.1.3.cmml"><mrow id="S2.E2.m1.4.4.1.1.1.1" xref="S2.E2.m1.4.4.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.4.4.1.1.1.1.3" xref="S2.E2.m1.4.4.1.1.1.1.3.cmml">𝒴</mi><mo id="S2.E2.m1.4.4.1.1.1.1.2" xref="S2.E2.m1.4.4.1.1.1.1.2.cmml">=</mo><mrow id="S2.E2.m1.4.4.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.1.1.1.cmml"><mi id="S2.E2.m1.4.4.1.1.1.1.1.3" mathvariant="normal" xref="S2.E2.m1.4.4.1.1.1.1.1.3.cmml">Θ</mi><mo id="S2.E2.m1.4.4.1.1.1.1.1.2" xref="S2.E2.m1.4.4.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E2.m1.4.4.1.1.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.1.1.1.1.2.cmml"><mo id="S2.E2.m1.4.4.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.E2.m1.4.4.1.1.1.1.1.1.2.cmml">(</mo><mi id="S2.E2.m1.1.1" xref="S2.E2.m1.1.1.cmml">q</mi><mo id="S2.E2.m1.4.4.1.1.1.1.1.1.1.3" xref="S2.E2.m1.4.4.1.1.1.1.1.1.2.cmml">,</mo><mrow id="S2.E2.m1.4.4.1.1.1.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.2" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.2.cmml">𝒞</mi><mo id="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml">∣</mo><mi id="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.3" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.3.cmml">θ</mi></mrow><mo id="S2.E2.m1.4.4.1.1.1.1.1.1.1.4" stretchy="false" xref="S2.E2.m1.4.4.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E2.m1.4.4.1.1.2.3" rspace="1.167em" xref="S2.E2.m1.4.4.1.1.3a.cmml">,</mo><mrow id="S2.E2.m1.4.4.1.1.2.2.2" xref="S2.E2.m1.4.4.1.1.2.2.3.cmml"><mrow id="S2.E2.m1.4.4.1.1.2.2.1.1" xref="S2.E2.m1.4.4.1.1.2.2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.4.4.1.1.2.2.1.1.3" xref="S2.E2.m1.4.4.1.1.2.2.1.1.3.cmml">𝒞</mi><mo id="S2.E2.m1.4.4.1.1.2.2.1.1.2" xref="S2.E2.m1.4.4.1.1.2.2.1.1.2.cmml">=</mo><mrow id="S2.E2.m1.4.4.1.1.2.2.1.1.1" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.cmml"><mi id="S2.E2.m1.4.4.1.1.2.2.1.1.1.3" mathvariant="normal" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.3.cmml">Γ</mi><mo id="S2.E2.m1.4.4.1.1.2.2.1.1.1.2" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.2.cmml">⁢</mo><mrow id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.2.cmml"><mo id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.2" stretchy="false" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.2.cmml">(</mo><mi id="S2.E2.m1.2.2" xref="S2.E2.m1.2.2.cmml">y</mi><mo id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.3" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.2.cmml">,</mo><mrow id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.2" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.2.cmml">𝒟</mi><mo id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.1.cmml">∣</mo><mi id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.3" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.3.cmml">γ</mi></mrow><mo id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.4" stretchy="false" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E2.m1.4.4.1.1.2.2.2.3" rspace="1.167em" xref="S2.E2.m1.4.4.1.1.2.2.3a.cmml">,</mo><mrow id="S2.E2.m1.4.4.1.1.2.2.2.2" xref="S2.E2.m1.4.4.1.1.2.2.2.2.cmml"><mi id="S2.E2.m1.4.4.1.1.2.2.2.2.3" xref="S2.E2.m1.4.4.1.1.2.2.2.2.3.cmml">y</mi><mo id="S2.E2.m1.4.4.1.1.2.2.2.2.2" xref="S2.E2.m1.4.4.1.1.2.2.2.2.2.cmml">=</mo><mrow id="S2.E2.m1.4.4.1.1.2.2.2.2.1" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.cmml"><msub id="S2.E2.m1.4.4.1.1.2.2.2.2.1.3" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.cmml"><mi id="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.2" mathvariant="normal" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.2.cmml">Θ</mi><mtext id="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.3" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.3a.cmml">mem</mtext></msub><mo id="S2.E2.m1.4.4.1.1.2.2.2.2.1.2" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.2.cmml">⁢</mo><mrow id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.2.cmml"><mo id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.2" stretchy="false" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.2.cmml">(</mo><mi id="S2.E2.m1.3.3" xref="S2.E2.m1.3.3.cmml">q</mi><mo id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.3" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.2.cmml">,</mo><mrow id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.2" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.2.cmml">𝒟</mi><mo id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.1.cmml">∣</mo><msub id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.cmml"><mi id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.2" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.2.cmml">θ</mi><mtext id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.3" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.3a.cmml">mem</mtext></msub></mrow><mo id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.4" stretchy="false" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S2.E2.m1.4.4.1.2" lspace="0em">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.4b"><apply id="S2.E2.m1.4.4.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.2"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.1.1.3a.cmml" xref="S2.E2.m1.4.4.1.1.2.3">formulae-sequence</csymbol><apply id="S2.E2.m1.4.4.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.1.1"><eq id="S2.E2.m1.4.4.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.1.1.2"></eq><ci id="S2.E2.m1.4.4.1.1.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.1.1.3">𝒴</ci><apply id="S2.E2.m1.4.4.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1"><times id="S2.E2.m1.4.4.1.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.2"></times><ci id="S2.E2.m1.4.4.1.1.1.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.3">Θ</ci><interval closure="open" id="S2.E2.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1"><ci id="S2.E2.m1.1.1.cmml" xref="S2.E2.m1.1.1">𝑞</ci><apply id="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.1">conditional</csymbol><ci id="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.2">𝒞</ci><ci id="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.1.1.3">𝜃</ci></apply></interval></apply></apply><apply id="S2.E2.m1.4.4.1.1.2.2.3.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.1.1.2.2.3a.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.3">formulae-sequence</csymbol><apply id="S2.E2.m1.4.4.1.1.2.2.1.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1"><eq id="S2.E2.m1.4.4.1.1.2.2.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.2"></eq><ci id="S2.E2.m1.4.4.1.1.2.2.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.3">𝒞</ci><apply id="S2.E2.m1.4.4.1.1.2.2.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1"><times id="S2.E2.m1.4.4.1.1.2.2.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.2"></times><ci id="S2.E2.m1.4.4.1.1.2.2.1.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.3">Γ</ci><interval closure="open" id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1"><ci id="S2.E2.m1.2.2.cmml" xref="S2.E2.m1.2.2">𝑦</ci><apply id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.1">conditional</csymbol><ci id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.2">𝒟</ci><ci id="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.2.2.1.1.1.1.1.1.3">𝛾</ci></apply></interval></apply></apply><apply id="S2.E2.m1.4.4.1.1.2.2.2.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2"><eq id="S2.E2.m1.4.4.1.1.2.2.2.2.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.2"></eq><ci id="S2.E2.m1.4.4.1.1.2.2.2.2.3.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.3">𝑦</ci><apply id="S2.E2.m1.4.4.1.1.2.2.2.2.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1"><times id="S2.E2.m1.4.4.1.1.2.2.2.2.1.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.2"></times><apply id="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.3">subscript</csymbol><ci id="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.2">Θ</ci><ci id="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.3a.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.3"><mtext id="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.3.cmml" mathsize="70%" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.3.3">mem</mtext></ci></apply><interval closure="open" id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1"><ci id="S2.E2.m1.3.3.cmml" xref="S2.E2.m1.3.3">𝑞</ci><apply id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1"><csymbol cd="latexml" id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.1">conditional</csymbol><ci id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.2">𝒟</ci><apply id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.1.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3">subscript</csymbol><ci id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.2.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.2">𝜃</ci><ci id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.3a.cmml" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.3"><mtext id="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.3.cmml" mathsize="70%" xref="S2.E2.m1.4.4.1.1.2.2.2.2.1.1.1.1.3.3">mem</mtext></ci></apply></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.4c">\displaystyle{\mathcal{Y}}=\Theta(q,{\mathcal{C}}\mid\theta),\quad{\mathcal{C}%
}=\Gamma(y,{\mathcal{D}}\mid\gamma),\quad y=\Theta_{\text{mem}}(q,{\mathcal{D}%
}\mid\theta_{\text{mem}}).</annotation><annotation encoding="application/x-llamapun" id="S2.E2.m1.4d">caligraphic_Y = roman_Θ ( italic_q , caligraphic_C ∣ italic_θ ) , caligraphic_C = roman_Γ ( italic_y , caligraphic_D ∣ italic_γ ) , italic_y = roman_Θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT ( italic_q , caligraphic_D ∣ italic_θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.p2.7">Here, <math alttext="y" class="ltx_Math" display="inline" id="S2.p2.4.m1.1"><semantics id="S2.p2.4.m1.1a"><mi id="S2.p2.4.m1.1.1" xref="S2.p2.4.m1.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.p2.4.m1.1b"><ci id="S2.p2.4.m1.1.1.cmml" xref="S2.p2.4.m1.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.4.m1.1c">y</annotation><annotation encoding="application/x-llamapun" id="S2.p2.4.m1.1d">italic_y</annotation></semantics></math> represents a staging answer that may be incomplete or lack detail, serving as a set of answer clues that guide the retrieval of the most relevant context from <math alttext="{\mathcal{D}}" class="ltx_Math" display="inline" id="S2.p2.5.m2.1"><semantics id="S2.p2.5.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p2.5.m2.1.1" xref="S2.p2.5.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S2.p2.5.m2.1b"><ci id="S2.p2.5.m2.1.1.cmml" xref="S2.p2.5.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.5.m2.1c">{\mathcal{D}}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.5.m2.1d">caligraphic_D</annotation></semantics></math>. The memory model <math alttext="\Theta_{\text{mem}}(\cdot)" class="ltx_Math" display="inline" id="S2.p2.6.m3.1"><semantics id="S2.p2.6.m3.1a"><mrow id="S2.p2.6.m3.1.2" xref="S2.p2.6.m3.1.2.cmml"><msub id="S2.p2.6.m3.1.2.2" xref="S2.p2.6.m3.1.2.2.cmml"><mi id="S2.p2.6.m3.1.2.2.2" mathvariant="normal" xref="S2.p2.6.m3.1.2.2.2.cmml">Θ</mi><mtext id="S2.p2.6.m3.1.2.2.3" xref="S2.p2.6.m3.1.2.2.3a.cmml">mem</mtext></msub><mo id="S2.p2.6.m3.1.2.1" xref="S2.p2.6.m3.1.2.1.cmml">⁢</mo><mrow id="S2.p2.6.m3.1.2.3.2" xref="S2.p2.6.m3.1.2.cmml"><mo id="S2.p2.6.m3.1.2.3.2.1" stretchy="false" xref="S2.p2.6.m3.1.2.cmml">(</mo><mo id="S2.p2.6.m3.1.1" lspace="0em" rspace="0em" xref="S2.p2.6.m3.1.1.cmml">⋅</mo><mo id="S2.p2.6.m3.1.2.3.2.2" stretchy="false" xref="S2.p2.6.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p2.6.m3.1b"><apply id="S2.p2.6.m3.1.2.cmml" xref="S2.p2.6.m3.1.2"><times id="S2.p2.6.m3.1.2.1.cmml" xref="S2.p2.6.m3.1.2.1"></times><apply id="S2.p2.6.m3.1.2.2.cmml" xref="S2.p2.6.m3.1.2.2"><csymbol cd="ambiguous" id="S2.p2.6.m3.1.2.2.1.cmml" xref="S2.p2.6.m3.1.2.2">subscript</csymbol><ci id="S2.p2.6.m3.1.2.2.2.cmml" xref="S2.p2.6.m3.1.2.2.2">Θ</ci><ci id="S2.p2.6.m3.1.2.2.3a.cmml" xref="S2.p2.6.m3.1.2.2.3"><mtext id="S2.p2.6.m3.1.2.2.3.cmml" mathsize="70%" xref="S2.p2.6.m3.1.2.2.3">mem</mtext></ci></apply><ci id="S2.p2.6.m3.1.1.cmml" xref="S2.p2.6.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.6.m3.1c">\Theta_{\text{mem}}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.p2.6.m3.1d">roman_Θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> is designed to establish a global memory of the database <math alttext="{\mathcal{D}}" class="ltx_Math" display="inline" id="S2.p2.7.m4.1"><semantics id="S2.p2.7.m4.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p2.7.m4.1.1" xref="S2.p2.7.m4.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S2.p2.7.m4.1b"><ci id="S2.p2.7.m4.1.1.cmml" xref="S2.p2.7.m4.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.7.m4.1c">{\mathcal{D}}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.7.m4.1d">caligraphic_D</annotation></semantics></math>. In practice, any language model capable of efficiently processing super-long contexts can serve as the memory model. For example, a 7B language model incorporating key-value compression techniques could be an appropriate choice. While such a model might not generate a fully detailed and accurate answer, it can produce a rough outline that facilitate in locating the correct answers.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.p3">
<p class="ltx_p" id="S2.p3.2">The form of the staging answer <math alttext="y" class="ltx_Math" display="inline" id="S2.p3.1.m1.1"><semantics id="S2.p3.1.m1.1a"><mi id="S2.p3.1.m1.1.1" xref="S2.p3.1.m1.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.p3.1.m1.1b"><ci id="S2.p3.1.m1.1.1.cmml" xref="S2.p3.1.m1.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p3.1.m1.1c">y</annotation><annotation encoding="application/x-llamapun" id="S2.p3.1.m1.1d">italic_y</annotation></semantics></math> is tailored to the specific requirements of each task. For example, in a question-answering task where the input query is implicit, the staging answer <math alttext="y" class="ltx_Math" display="inline" id="S2.p3.2.m2.1"><semantics id="S2.p3.2.m2.1a"><mi id="S2.p3.2.m2.1.1" xref="S2.p3.2.m2.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.p3.2.m2.1b"><ci id="S2.p3.2.m2.1.1.cmml" xref="S2.p3.2.m2.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p3.2.m2.1c">y</annotation><annotation encoding="application/x-llamapun" id="S2.p3.2.m2.1d">italic_y</annotation></semantics></math> may comprise intermediary steps, such as generating surrogate queries that are more explicit and disambiguated, along with specific text evidence from the database that contributes to the final answer. In addition, for tasks that do not involve explicit queries, such as summarization, the staging answer might consist of key points or concepts extracted from the context, which are crucial for assembling a coherent and accurate summary.</p>
</div>
<section class="ltx_paragraph" id="S2.SS0.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">System Implementation</h4>
<div class="ltx_para ltx_noindent" id="S2.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p1.1">The system implementation of MemoRAG is available at <a class="ltx_ref ltx_href" href="https://github.com/qhjqhj00/MemoRAG" title="">this repository</a>. Currently, we have released two memory models: <a class="ltx_ref ltx_href" href="https://huggingface.co/TommyChien/memorag-qwen2-7b-inst" title="">memorag-qwen2-7b-inst</a> and <a class="ltx_ref ltx_href" href="https://huggingface.co/TommyChien/memorag-mistral-7b-inst" title="">memorag-mistral-7b-inst</a>, which are based on Qwen2-7B-Instruct and Mistral-7B-Instruct-v0.2, respectively. In MemoRAG, the memory module <math alttext="\Theta_{\text{mem}}(\cdot)" class="ltx_Math" display="inline" id="S2.SS0.SSS0.Px1.p1.1.m1.1"><semantics id="S2.SS0.SSS0.Px1.p1.1.m1.1a"><mrow id="S2.SS0.SSS0.Px1.p1.1.m1.1.2" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.cmml"><msub id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.cmml"><mi id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.2" mathvariant="normal" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.2.cmml">Θ</mi><mtext id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.3" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.3a.cmml">mem</mtext></msub><mo id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.1" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.1.cmml">⁢</mo><mrow id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.3.2" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.cmml"><mo id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.3.2.1" stretchy="false" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.cmml">(</mo><mo id="S2.SS0.SSS0.Px1.p1.1.m1.1.1" lspace="0em" rspace="0em" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.1.cmml">⋅</mo><mo id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.3.2.2" stretchy="false" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS0.Px1.p1.1.m1.1b"><apply id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.cmml" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2"><times id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.1.cmml" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.1"></times><apply id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.cmml" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2"><csymbol cd="ambiguous" id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.1.cmml" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2">subscript</csymbol><ci id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.2.cmml" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.2">Θ</ci><ci id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.3a.cmml" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.3"><mtext id="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.3.cmml" mathsize="70%" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.2.2.3">mem</mtext></ci></apply><ci id="S2.SS0.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S2.SS0.SSS0.Px1.p1.1.m1.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS0.Px1.p1.1.m1.1c">\Theta_{\text{mem}}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS0.SSS0.Px1.p1.1.m1.1d">roman_Θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT ( ⋅ )</annotation></semantics></math> can be any model designed to handle very long contexts efficiently, while currently the system employs a token compression technique, enabling efficient processing of extended contexts, which will be explained in detail later.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS0.SSS0.Px1.p2">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p2.1">The two memory models support compression ratios ranging from 2 to 16, allowing them to manage different context lengths. For example, memorag-qwen2-7b-inst can process up to <math alttext="\text{128K}\times 16" class="ltx_Math" display="inline" id="S2.SS0.SSS0.Px1.p2.1.m1.1"><semantics id="S2.SS0.SSS0.Px1.p2.1.m1.1a"><mrow id="S2.SS0.SSS0.Px1.p2.1.m1.1.1" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1.cmml"><mtext id="S2.SS0.SSS0.Px1.p2.1.m1.1.1.2" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1.2a.cmml">128K</mtext><mo id="S2.SS0.SSS0.Px1.p2.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1.1.cmml">×</mo><mn id="S2.SS0.SSS0.Px1.p2.1.m1.1.1.3" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1.3.cmml">16</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS0.Px1.p2.1.m1.1b"><apply id="S2.SS0.SSS0.Px1.p2.1.m1.1.1.cmml" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1"><times id="S2.SS0.SSS0.Px1.p2.1.m1.1.1.1.cmml" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1.1"></times><ci id="S2.SS0.SSS0.Px1.p2.1.m1.1.1.2a.cmml" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1.2"><mtext id="S2.SS0.SSS0.Px1.p2.1.m1.1.1.2.cmml" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1.2">128K</mtext></ci><cn id="S2.SS0.SSS0.Px1.p2.1.m1.1.1.3.cmml" type="integer" xref="S2.SS0.SSS0.Px1.p2.1.m1.1.1.3">16</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS0.Px1.p2.1.m1.1c">\text{128K}\times 16</annotation><annotation encoding="application/x-llamapun" id="S2.SS0.SSS0.Px1.p2.1.m1.1d">128K × 16</annotation></semantics></math> tokens when a compression ratio of 16 is applied. In practice, memorag-mistral-7b-inst performs well with context lengths up to 150K tokens, and memorag-qwen2-7b-inst performs well with context lengths up to 600K tokens. When processing longer context, their performances would degrade slightly.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS0.SSS0.Px1.p3">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p3.1">MemoRAG can integrate various retrieval methods into the system, including sparse retrieval, dense retrieval, and reranking. The current implementation uses dense retrieval by default. In future releases, we aim to provide flexible retrieval methods with easy-to-use interfaces.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS0.SSS0.Px1.p4">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p4.1">Similarly, MemoRAG can integrate any generative language model as the generator. The current implementation supports initializing the generator from HuggingFace generative models or through commercial APIs (e.g., Azure and OpenAI). Since the memory models are dependent on their underlying models, MemoRAG uses the underlying models of the memory module as the default generator. For instance, when using memorag-mistral-7b-inst as the memory model, MemoRAG defaults to Mistral-7B-Instruct-v0.2 as the generation model.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS0.SSS0.Px1.p5">
<p class="ltx_p" id="S2.SS0.SSS0.Px1.p5.1">The MemoRAG system can be deployed on a range of GPUs, from more affordable options (e.g., NVIDIA T4 16GiB) to high-end ones (e.g., NVIDIA A100 80GiB). When using the NVIDIA T4 16GiB, MemoRAG can handle databases with a context length of 68K tokens. With the NVIDIA A100 80GiB, the system is capable of processing databases with context lengths up to one million tokens. In future releases, we plan to offer additional serving options, including support for MacBooks with M-series chips. Furthermore, we aim to integrate MemoRAG with popular LLM frameworks such as LangChain and LlamaIndex.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Memory Module</h3>
<div class="ltx_para ltx_noindent" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.4">In this paper, we propose a flexible model architecture specifically designed to facilitate memory formation. The memory model progressively compresses the raw input tokens into a significantly smaller set of memory tokens, while preserving the essential semantic information.
Specifically,
suppose the input <math alttext="{\mathcal{X}}" class="ltx_Math" display="inline" id="S2.SS1.p1.1.m1.1"><semantics id="S2.SS1.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml">𝒳</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.1b"><ci id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">𝒳</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.1c">{\mathcal{X}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.1.m1.1d">caligraphic_X</annotation></semantics></math> comprises <math alttext="n" class="ltx_Math" display="inline" id="S2.SS1.p1.2.m2.1"><semantics id="S2.SS1.p1.2.m2.1a"><mi id="S2.SS1.p1.2.m2.1.1" xref="S2.SS1.p1.2.m2.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.2.m2.1b"><ci id="S2.SS1.p1.2.m2.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.2.m2.1c">n</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.2.m2.1d">italic_n</annotation></semantics></math> tokens, <math alttext="{\mathcal{X}}=\{x_{1},\cdots,x_{n}\}" class="ltx_Math" display="inline" id="S2.SS1.p1.3.m3.3"><semantics id="S2.SS1.p1.3.m3.3a"><mrow id="S2.SS1.p1.3.m3.3.3" xref="S2.SS1.p1.3.m3.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.3.m3.3.3.4" xref="S2.SS1.p1.3.m3.3.3.4.cmml">𝒳</mi><mo id="S2.SS1.p1.3.m3.3.3.3" xref="S2.SS1.p1.3.m3.3.3.3.cmml">=</mo><mrow id="S2.SS1.p1.3.m3.3.3.2.2" xref="S2.SS1.p1.3.m3.3.3.2.3.cmml"><mo id="S2.SS1.p1.3.m3.3.3.2.2.3" stretchy="false" xref="S2.SS1.p1.3.m3.3.3.2.3.cmml">{</mo><msub id="S2.SS1.p1.3.m3.2.2.1.1.1" xref="S2.SS1.p1.3.m3.2.2.1.1.1.cmml"><mi id="S2.SS1.p1.3.m3.2.2.1.1.1.2" xref="S2.SS1.p1.3.m3.2.2.1.1.1.2.cmml">x</mi><mn id="S2.SS1.p1.3.m3.2.2.1.1.1.3" xref="S2.SS1.p1.3.m3.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S2.SS1.p1.3.m3.3.3.2.2.4" xref="S2.SS1.p1.3.m3.3.3.2.3.cmml">,</mo><mi id="S2.SS1.p1.3.m3.1.1" mathvariant="normal" xref="S2.SS1.p1.3.m3.1.1.cmml">⋯</mi><mo id="S2.SS1.p1.3.m3.3.3.2.2.5" xref="S2.SS1.p1.3.m3.3.3.2.3.cmml">,</mo><msub id="S2.SS1.p1.3.m3.3.3.2.2.2" xref="S2.SS1.p1.3.m3.3.3.2.2.2.cmml"><mi id="S2.SS1.p1.3.m3.3.3.2.2.2.2" xref="S2.SS1.p1.3.m3.3.3.2.2.2.2.cmml">x</mi><mi id="S2.SS1.p1.3.m3.3.3.2.2.2.3" xref="S2.SS1.p1.3.m3.3.3.2.2.2.3.cmml">n</mi></msub><mo id="S2.SS1.p1.3.m3.3.3.2.2.6" stretchy="false" xref="S2.SS1.p1.3.m3.3.3.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.3.m3.3b"><apply id="S2.SS1.p1.3.m3.3.3.cmml" xref="S2.SS1.p1.3.m3.3.3"><eq id="S2.SS1.p1.3.m3.3.3.3.cmml" xref="S2.SS1.p1.3.m3.3.3.3"></eq><ci id="S2.SS1.p1.3.m3.3.3.4.cmml" xref="S2.SS1.p1.3.m3.3.3.4">𝒳</ci><set id="S2.SS1.p1.3.m3.3.3.2.3.cmml" xref="S2.SS1.p1.3.m3.3.3.2.2"><apply id="S2.SS1.p1.3.m3.2.2.1.1.1.cmml" xref="S2.SS1.p1.3.m3.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.3.m3.2.2.1.1.1.1.cmml" xref="S2.SS1.p1.3.m3.2.2.1.1.1">subscript</csymbol><ci id="S2.SS1.p1.3.m3.2.2.1.1.1.2.cmml" xref="S2.SS1.p1.3.m3.2.2.1.1.1.2">𝑥</ci><cn id="S2.SS1.p1.3.m3.2.2.1.1.1.3.cmml" type="integer" xref="S2.SS1.p1.3.m3.2.2.1.1.1.3">1</cn></apply><ci id="S2.SS1.p1.3.m3.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1">⋯</ci><apply id="S2.SS1.p1.3.m3.3.3.2.2.2.cmml" xref="S2.SS1.p1.3.m3.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.p1.3.m3.3.3.2.2.2.1.cmml" xref="S2.SS1.p1.3.m3.3.3.2.2.2">subscript</csymbol><ci id="S2.SS1.p1.3.m3.3.3.2.2.2.2.cmml" xref="S2.SS1.p1.3.m3.3.3.2.2.2.2">𝑥</ci><ci id="S2.SS1.p1.3.m3.3.3.2.2.2.3.cmml" xref="S2.SS1.p1.3.m3.3.3.2.2.2.3">𝑛</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.3.m3.3c">{\mathcal{X}}=\{x_{1},\cdots,x_{n}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.3.m3.3d">caligraphic_X = { italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , italic_x start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT }</annotation></semantics></math>, and is processed by a transformer-based model <math alttext="\Theta(\cdot)" class="ltx_Math" display="inline" id="S2.SS1.p1.4.m4.1"><semantics id="S2.SS1.p1.4.m4.1a"><mrow id="S2.SS1.p1.4.m4.1.2" xref="S2.SS1.p1.4.m4.1.2.cmml"><mi id="S2.SS1.p1.4.m4.1.2.2" mathvariant="normal" xref="S2.SS1.p1.4.m4.1.2.2.cmml">Θ</mi><mo id="S2.SS1.p1.4.m4.1.2.1" xref="S2.SS1.p1.4.m4.1.2.1.cmml">⁢</mo><mrow id="S2.SS1.p1.4.m4.1.2.3.2" xref="S2.SS1.p1.4.m4.1.2.cmml"><mo id="S2.SS1.p1.4.m4.1.2.3.2.1" stretchy="false" xref="S2.SS1.p1.4.m4.1.2.cmml">(</mo><mo id="S2.SS1.p1.4.m4.1.1" lspace="0em" rspace="0em" xref="S2.SS1.p1.4.m4.1.1.cmml">⋅</mo><mo id="S2.SS1.p1.4.m4.1.2.3.2.2" stretchy="false" xref="S2.SS1.p1.4.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.4.m4.1b"><apply id="S2.SS1.p1.4.m4.1.2.cmml" xref="S2.SS1.p1.4.m4.1.2"><times id="S2.SS1.p1.4.m4.1.2.1.cmml" xref="S2.SS1.p1.4.m4.1.2.1"></times><ci id="S2.SS1.p1.4.m4.1.2.2.cmml" xref="S2.SS1.p1.4.m4.1.2.2">Θ</ci><ci id="S2.SS1.p1.4.m4.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.4.m4.1c">\Theta(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.4.m4.1d">roman_Θ ( ⋅ )</annotation></semantics></math>. The attentive interaction of each layer can be formulated as:</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A1.EGx3">
<tbody id="S2.E3"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle{\mathcal{Q}}" class="ltx_Math" display="inline" id="S2.E3.m1.1"><semantics id="S2.E3.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.E3.m1.1.1" xref="S2.E3.m1.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S2.E3.m1.1b"><ci id="S2.E3.m1.1.1.cmml" xref="S2.E3.m1.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m1.1c">\displaystyle{\mathcal{Q}}</annotation><annotation encoding="application/x-llamapun" id="S2.E3.m1.1d">caligraphic_Q</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle={\mathcal{X}}{\bm{W}}_{\mathcal{Q}},\quad{\mathcal{K}}={\mathcal%
{X}}{\bm{W}}_{\mathcal{K}},\quad{\mathcal{V}}={\mathcal{X}}{\bm{W}}_{\mathcal{%
V}}," class="ltx_Math" display="inline" id="S2.E3.m2.1"><semantics id="S2.E3.m2.1a"><mrow id="S2.E3.m2.1.1.1"><mrow id="S2.E3.m2.1.1.1.1.2" xref="S2.E3.m2.1.1.1.1.3.cmml"><mrow id="S2.E3.m2.1.1.1.1.1.1" xref="S2.E3.m2.1.1.1.1.1.1.cmml"><mi id="S2.E3.m2.1.1.1.1.1.1.2" xref="S2.E3.m2.1.1.1.1.1.1.2.cmml"></mi><mo id="S2.E3.m2.1.1.1.1.1.1.1" xref="S2.E3.m2.1.1.1.1.1.1.1.cmml">=</mo><mrow id="S2.E3.m2.1.1.1.1.1.1.3" xref="S2.E3.m2.1.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E3.m2.1.1.1.1.1.1.3.2" xref="S2.E3.m2.1.1.1.1.1.1.3.2.cmml">𝒳</mi><mo id="S2.E3.m2.1.1.1.1.1.1.3.1" xref="S2.E3.m2.1.1.1.1.1.1.3.1.cmml">⁢</mo><msub id="S2.E3.m2.1.1.1.1.1.1.3.3" xref="S2.E3.m2.1.1.1.1.1.1.3.3.cmml"><mi id="S2.E3.m2.1.1.1.1.1.1.3.3.2" xref="S2.E3.m2.1.1.1.1.1.1.3.3.2.cmml">𝑾</mi><mi class="ltx_font_mathcaligraphic" id="S2.E3.m2.1.1.1.1.1.1.3.3.3" xref="S2.E3.m2.1.1.1.1.1.1.3.3.3.cmml">𝒬</mi></msub></mrow></mrow><mo id="S2.E3.m2.1.1.1.1.2.3" rspace="1.167em" xref="S2.E3.m2.1.1.1.1.3a.cmml">,</mo><mrow id="S2.E3.m2.1.1.1.1.2.2.2" xref="S2.E3.m2.1.1.1.1.2.2.3.cmml"><mrow id="S2.E3.m2.1.1.1.1.2.2.1.1" xref="S2.E3.m2.1.1.1.1.2.2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E3.m2.1.1.1.1.2.2.1.1.2" xref="S2.E3.m2.1.1.1.1.2.2.1.1.2.cmml">𝒦</mi><mo id="S2.E3.m2.1.1.1.1.2.2.1.1.1" xref="S2.E3.m2.1.1.1.1.2.2.1.1.1.cmml">=</mo><mrow id="S2.E3.m2.1.1.1.1.2.2.1.1.3" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E3.m2.1.1.1.1.2.2.1.1.3.2" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.2.cmml">𝒳</mi><mo id="S2.E3.m2.1.1.1.1.2.2.1.1.3.1" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.1.cmml">⁢</mo><msub id="S2.E3.m2.1.1.1.1.2.2.1.1.3.3" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.cmml"><mi id="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.2" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.2.cmml">𝑾</mi><mi class="ltx_font_mathcaligraphic" id="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.3" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.3.cmml">𝒦</mi></msub></mrow></mrow><mo id="S2.E3.m2.1.1.1.1.2.2.2.3" rspace="1.167em" xref="S2.E3.m2.1.1.1.1.2.2.3a.cmml">,</mo><mrow id="S2.E3.m2.1.1.1.1.2.2.2.2" xref="S2.E3.m2.1.1.1.1.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E3.m2.1.1.1.1.2.2.2.2.2" xref="S2.E3.m2.1.1.1.1.2.2.2.2.2.cmml">𝒱</mi><mo id="S2.E3.m2.1.1.1.1.2.2.2.2.1" xref="S2.E3.m2.1.1.1.1.2.2.2.2.1.cmml">=</mo><mrow id="S2.E3.m2.1.1.1.1.2.2.2.2.3" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E3.m2.1.1.1.1.2.2.2.2.3.2" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.2.cmml">𝒳</mi><mo id="S2.E3.m2.1.1.1.1.2.2.2.2.3.1" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.1.cmml">⁢</mo><msub id="S2.E3.m2.1.1.1.1.2.2.2.2.3.3" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.cmml"><mi id="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.2" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.2.cmml">𝑾</mi><mi class="ltx_font_mathcaligraphic" id="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.3" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.3.cmml">𝒱</mi></msub></mrow></mrow></mrow></mrow><mo id="S2.E3.m2.1.1.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E3.m2.1b"><apply id="S2.E3.m2.1.1.1.1.3.cmml" xref="S2.E3.m2.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E3.m2.1.1.1.1.3a.cmml" xref="S2.E3.m2.1.1.1.1.2.3">formulae-sequence</csymbol><apply id="S2.E3.m2.1.1.1.1.1.1.cmml" xref="S2.E3.m2.1.1.1.1.1.1"><eq id="S2.E3.m2.1.1.1.1.1.1.1.cmml" xref="S2.E3.m2.1.1.1.1.1.1.1"></eq><csymbol cd="latexml" id="S2.E3.m2.1.1.1.1.1.1.2.cmml" xref="S2.E3.m2.1.1.1.1.1.1.2">absent</csymbol><apply id="S2.E3.m2.1.1.1.1.1.1.3.cmml" xref="S2.E3.m2.1.1.1.1.1.1.3"><times id="S2.E3.m2.1.1.1.1.1.1.3.1.cmml" xref="S2.E3.m2.1.1.1.1.1.1.3.1"></times><ci id="S2.E3.m2.1.1.1.1.1.1.3.2.cmml" xref="S2.E3.m2.1.1.1.1.1.1.3.2">𝒳</ci><apply id="S2.E3.m2.1.1.1.1.1.1.3.3.cmml" xref="S2.E3.m2.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S2.E3.m2.1.1.1.1.1.1.3.3.1.cmml" xref="S2.E3.m2.1.1.1.1.1.1.3.3">subscript</csymbol><ci id="S2.E3.m2.1.1.1.1.1.1.3.3.2.cmml" xref="S2.E3.m2.1.1.1.1.1.1.3.3.2">𝑾</ci><ci id="S2.E3.m2.1.1.1.1.1.1.3.3.3.cmml" xref="S2.E3.m2.1.1.1.1.1.1.3.3.3">𝒬</ci></apply></apply></apply><apply id="S2.E3.m2.1.1.1.1.2.2.3.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E3.m2.1.1.1.1.2.2.3a.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.3">formulae-sequence</csymbol><apply id="S2.E3.m2.1.1.1.1.2.2.1.1.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1"><eq id="S2.E3.m2.1.1.1.1.2.2.1.1.1.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.1"></eq><ci id="S2.E3.m2.1.1.1.1.2.2.1.1.2.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.2">𝒦</ci><apply id="S2.E3.m2.1.1.1.1.2.2.1.1.3.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3"><times id="S2.E3.m2.1.1.1.1.2.2.1.1.3.1.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.1"></times><ci id="S2.E3.m2.1.1.1.1.2.2.1.1.3.2.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.2">𝒳</ci><apply id="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.3"><csymbol cd="ambiguous" id="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.1.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.3">subscript</csymbol><ci id="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.2.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.2">𝑾</ci><ci id="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.3.cmml" xref="S2.E3.m2.1.1.1.1.2.2.1.1.3.3.3">𝒦</ci></apply></apply></apply><apply id="S2.E3.m2.1.1.1.1.2.2.2.2.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2"><eq id="S2.E3.m2.1.1.1.1.2.2.2.2.1.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.1"></eq><ci id="S2.E3.m2.1.1.1.1.2.2.2.2.2.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.2">𝒱</ci><apply id="S2.E3.m2.1.1.1.1.2.2.2.2.3.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3"><times id="S2.E3.m2.1.1.1.1.2.2.2.2.3.1.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.1"></times><ci id="S2.E3.m2.1.1.1.1.2.2.2.2.3.2.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.2">𝒳</ci><apply id="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.3"><csymbol cd="ambiguous" id="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.1.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.3">subscript</csymbol><ci id="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.2.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.2">𝑾</ci><ci id="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.3.cmml" xref="S2.E3.m2.1.1.1.1.2.2.2.2.3.3.3">𝒱</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m2.1c">\displaystyle={\mathcal{X}}{\bm{W}}_{\mathcal{Q}},\quad{\mathcal{K}}={\mathcal%
{X}}{\bm{W}}_{\mathcal{K}},\quad{\mathcal{V}}={\mathcal{X}}{\bm{W}}_{\mathcal{%
V}},</annotation><annotation encoding="application/x-llamapun" id="S2.E3.m2.1d">= caligraphic_X bold_italic_W start_POSTSUBSCRIPT caligraphic_Q end_POSTSUBSCRIPT , caligraphic_K = caligraphic_X bold_italic_W start_POSTSUBSCRIPT caligraphic_K end_POSTSUBSCRIPT , caligraphic_V = caligraphic_X bold_italic_W start_POSTSUBSCRIPT caligraphic_V end_POSTSUBSCRIPT ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
<tbody id="S2.E4"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\text{Attention}({\mathcal{Q}},{\mathcal{K}},{\mathcal{V}})" class="ltx_Math" display="inline" id="S2.E4.m1.3"><semantics id="S2.E4.m1.3a"><mrow id="S2.E4.m1.3.4" xref="S2.E4.m1.3.4.cmml"><mtext id="S2.E4.m1.3.4.2" xref="S2.E4.m1.3.4.2a.cmml">Attention</mtext><mo id="S2.E4.m1.3.4.1" xref="S2.E4.m1.3.4.1.cmml">⁢</mo><mrow id="S2.E4.m1.3.4.3.2" xref="S2.E4.m1.3.4.3.1.cmml"><mo id="S2.E4.m1.3.4.3.2.1" stretchy="false" xref="S2.E4.m1.3.4.3.1.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.E4.m1.1.1" xref="S2.E4.m1.1.1.cmml">𝒬</mi><mo id="S2.E4.m1.3.4.3.2.2" xref="S2.E4.m1.3.4.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S2.E4.m1.2.2" xref="S2.E4.m1.2.2.cmml">𝒦</mi><mo id="S2.E4.m1.3.4.3.2.3" xref="S2.E4.m1.3.4.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S2.E4.m1.3.3" xref="S2.E4.m1.3.3.cmml">𝒱</mi><mo id="S2.E4.m1.3.4.3.2.4" stretchy="false" xref="S2.E4.m1.3.4.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E4.m1.3b"><apply id="S2.E4.m1.3.4.cmml" xref="S2.E4.m1.3.4"><times id="S2.E4.m1.3.4.1.cmml" xref="S2.E4.m1.3.4.1"></times><ci id="S2.E4.m1.3.4.2a.cmml" xref="S2.E4.m1.3.4.2"><mtext id="S2.E4.m1.3.4.2.cmml" xref="S2.E4.m1.3.4.2">Attention</mtext></ci><vector id="S2.E4.m1.3.4.3.1.cmml" xref="S2.E4.m1.3.4.3.2"><ci id="S2.E4.m1.1.1.cmml" xref="S2.E4.m1.1.1">𝒬</ci><ci id="S2.E4.m1.2.2.cmml" xref="S2.E4.m1.2.2">𝒦</ci><ci id="S2.E4.m1.3.3.cmml" xref="S2.E4.m1.3.3">𝒱</ci></vector></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E4.m1.3c">\displaystyle\text{Attention}({\mathcal{Q}},{\mathcal{K}},{\mathcal{V}})</annotation><annotation encoding="application/x-llamapun" id="S2.E4.m1.3d">Attention ( caligraphic_Q , caligraphic_K , caligraphic_V )</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle=\text{softmax}\left(\frac{{\mathcal{Q}}{\mathcal{K}}^{T}}{\sqrt{%
d_{k}}}\right){\mathcal{V}},\ \Theta({\mathcal{X}})=\text{Attention}({\mathcal%
{Q}},{\mathcal{K}},{\mathcal{V}})," class="ltx_Math" display="inline" id="S2.E4.m2.6"><semantics id="S2.E4.m2.6a"><mrow id="S2.E4.m2.6.6.1"><mrow id="S2.E4.m2.6.6.1.1.2" xref="S2.E4.m2.6.6.1.1.3.cmml"><mrow id="S2.E4.m2.6.6.1.1.1.1" xref="S2.E4.m2.6.6.1.1.1.1.cmml"><mi id="S2.E4.m2.6.6.1.1.1.1.2" xref="S2.E4.m2.6.6.1.1.1.1.2.cmml"></mi><mo id="S2.E4.m2.6.6.1.1.1.1.1" xref="S2.E4.m2.6.6.1.1.1.1.1.cmml">=</mo><mrow id="S2.E4.m2.6.6.1.1.1.1.3" xref="S2.E4.m2.6.6.1.1.1.1.3.cmml"><mtext id="S2.E4.m2.6.6.1.1.1.1.3.2" xref="S2.E4.m2.6.6.1.1.1.1.3.2a.cmml">softmax</mtext><mo id="S2.E4.m2.6.6.1.1.1.1.3.1" xref="S2.E4.m2.6.6.1.1.1.1.3.1.cmml">⁢</mo><mrow id="S2.E4.m2.6.6.1.1.1.1.3.3.2" xref="S2.E4.m2.1.1.cmml"><mo id="S2.E4.m2.6.6.1.1.1.1.3.3.2.1" xref="S2.E4.m2.1.1.cmml">(</mo><mstyle displaystyle="true" id="S2.E4.m2.1.1" xref="S2.E4.m2.1.1.cmml"><mfrac id="S2.E4.m2.1.1a" xref="S2.E4.m2.1.1.cmml"><mrow id="S2.E4.m2.1.1.2" xref="S2.E4.m2.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E4.m2.1.1.2.2" xref="S2.E4.m2.1.1.2.2.cmml">𝒬</mi><mo id="S2.E4.m2.1.1.2.1" xref="S2.E4.m2.1.1.2.1.cmml">⁢</mo><msup id="S2.E4.m2.1.1.2.3" xref="S2.E4.m2.1.1.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E4.m2.1.1.2.3.2" xref="S2.E4.m2.1.1.2.3.2.cmml">𝒦</mi><mi id="S2.E4.m2.1.1.2.3.3" xref="S2.E4.m2.1.1.2.3.3.cmml">T</mi></msup></mrow><msqrt id="S2.E4.m2.1.1.3" xref="S2.E4.m2.1.1.3.cmml"><msub id="S2.E4.m2.1.1.3.2" xref="S2.E4.m2.1.1.3.2.cmml"><mi id="S2.E4.m2.1.1.3.2.2" xref="S2.E4.m2.1.1.3.2.2.cmml">d</mi><mi id="S2.E4.m2.1.1.3.2.3" xref="S2.E4.m2.1.1.3.2.3.cmml">k</mi></msub></msqrt></mfrac></mstyle><mo id="S2.E4.m2.6.6.1.1.1.1.3.3.2.2" xref="S2.E4.m2.1.1.cmml">)</mo></mrow><mo id="S2.E4.m2.6.6.1.1.1.1.3.1a" xref="S2.E4.m2.6.6.1.1.1.1.3.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.E4.m2.6.6.1.1.1.1.3.4" xref="S2.E4.m2.6.6.1.1.1.1.3.4.cmml">𝒱</mi></mrow></mrow><mo id="S2.E4.m2.6.6.1.1.2.3" rspace="0.667em" xref="S2.E4.m2.6.6.1.1.3a.cmml">,</mo><mrow id="S2.E4.m2.6.6.1.1.2.2" xref="S2.E4.m2.6.6.1.1.2.2.cmml"><mrow id="S2.E4.m2.6.6.1.1.2.2.2" xref="S2.E4.m2.6.6.1.1.2.2.2.cmml"><mi id="S2.E4.m2.6.6.1.1.2.2.2.2" mathvariant="normal" xref="S2.E4.m2.6.6.1.1.2.2.2.2.cmml">Θ</mi><mo id="S2.E4.m2.6.6.1.1.2.2.2.1" xref="S2.E4.m2.6.6.1.1.2.2.2.1.cmml">⁢</mo><mrow id="S2.E4.m2.6.6.1.1.2.2.2.3.2" xref="S2.E4.m2.6.6.1.1.2.2.2.cmml"><mo id="S2.E4.m2.6.6.1.1.2.2.2.3.2.1" stretchy="false" xref="S2.E4.m2.6.6.1.1.2.2.2.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.E4.m2.2.2" xref="S2.E4.m2.2.2.cmml">𝒳</mi><mo id="S2.E4.m2.6.6.1.1.2.2.2.3.2.2" stretchy="false" xref="S2.E4.m2.6.6.1.1.2.2.2.cmml">)</mo></mrow></mrow><mo id="S2.E4.m2.6.6.1.1.2.2.1" xref="S2.E4.m2.6.6.1.1.2.2.1.cmml">=</mo><mrow id="S2.E4.m2.6.6.1.1.2.2.3" xref="S2.E4.m2.6.6.1.1.2.2.3.cmml"><mtext id="S2.E4.m2.6.6.1.1.2.2.3.2" xref="S2.E4.m2.6.6.1.1.2.2.3.2a.cmml">Attention</mtext><mo id="S2.E4.m2.6.6.1.1.2.2.3.1" xref="S2.E4.m2.6.6.1.1.2.2.3.1.cmml">⁢</mo><mrow id="S2.E4.m2.6.6.1.1.2.2.3.3.2" xref="S2.E4.m2.6.6.1.1.2.2.3.3.1.cmml"><mo id="S2.E4.m2.6.6.1.1.2.2.3.3.2.1" stretchy="false" xref="S2.E4.m2.6.6.1.1.2.2.3.3.1.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.E4.m2.3.3" xref="S2.E4.m2.3.3.cmml">𝒬</mi><mo id="S2.E4.m2.6.6.1.1.2.2.3.3.2.2" xref="S2.E4.m2.6.6.1.1.2.2.3.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S2.E4.m2.4.4" xref="S2.E4.m2.4.4.cmml">𝒦</mi><mo id="S2.E4.m2.6.6.1.1.2.2.3.3.2.3" xref="S2.E4.m2.6.6.1.1.2.2.3.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S2.E4.m2.5.5" xref="S2.E4.m2.5.5.cmml">𝒱</mi><mo id="S2.E4.m2.6.6.1.1.2.2.3.3.2.4" stretchy="false" xref="S2.E4.m2.6.6.1.1.2.2.3.3.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S2.E4.m2.6.6.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E4.m2.6b"><apply id="S2.E4.m2.6.6.1.1.3.cmml" xref="S2.E4.m2.6.6.1.1.2"><csymbol cd="ambiguous" id="S2.E4.m2.6.6.1.1.3a.cmml" xref="S2.E4.m2.6.6.1.1.2.3">formulae-sequence</csymbol><apply id="S2.E4.m2.6.6.1.1.1.1.cmml" xref="S2.E4.m2.6.6.1.1.1.1"><eq id="S2.E4.m2.6.6.1.1.1.1.1.cmml" xref="S2.E4.m2.6.6.1.1.1.1.1"></eq><csymbol cd="latexml" id="S2.E4.m2.6.6.1.1.1.1.2.cmml" xref="S2.E4.m2.6.6.1.1.1.1.2">absent</csymbol><apply id="S2.E4.m2.6.6.1.1.1.1.3.cmml" xref="S2.E4.m2.6.6.1.1.1.1.3"><times id="S2.E4.m2.6.6.1.1.1.1.3.1.cmml" xref="S2.E4.m2.6.6.1.1.1.1.3.1"></times><ci id="S2.E4.m2.6.6.1.1.1.1.3.2a.cmml" xref="S2.E4.m2.6.6.1.1.1.1.3.2"><mtext id="S2.E4.m2.6.6.1.1.1.1.3.2.cmml" xref="S2.E4.m2.6.6.1.1.1.1.3.2">softmax</mtext></ci><apply id="S2.E4.m2.1.1.cmml" xref="S2.E4.m2.6.6.1.1.1.1.3.3.2"><divide id="S2.E4.m2.1.1.1.cmml" xref="S2.E4.m2.6.6.1.1.1.1.3.3.2"></divide><apply id="S2.E4.m2.1.1.2.cmml" xref="S2.E4.m2.1.1.2"><times id="S2.E4.m2.1.1.2.1.cmml" xref="S2.E4.m2.1.1.2.1"></times><ci id="S2.E4.m2.1.1.2.2.cmml" xref="S2.E4.m2.1.1.2.2">𝒬</ci><apply id="S2.E4.m2.1.1.2.3.cmml" xref="S2.E4.m2.1.1.2.3"><csymbol cd="ambiguous" id="S2.E4.m2.1.1.2.3.1.cmml" xref="S2.E4.m2.1.1.2.3">superscript</csymbol><ci id="S2.E4.m2.1.1.2.3.2.cmml" xref="S2.E4.m2.1.1.2.3.2">𝒦</ci><ci id="S2.E4.m2.1.1.2.3.3.cmml" xref="S2.E4.m2.1.1.2.3.3">𝑇</ci></apply></apply><apply id="S2.E4.m2.1.1.3.cmml" xref="S2.E4.m2.1.1.3"><root id="S2.E4.m2.1.1.3a.cmml" xref="S2.E4.m2.1.1.3"></root><apply id="S2.E4.m2.1.1.3.2.cmml" xref="S2.E4.m2.1.1.3.2"><csymbol cd="ambiguous" id="S2.E4.m2.1.1.3.2.1.cmml" xref="S2.E4.m2.1.1.3.2">subscript</csymbol><ci id="S2.E4.m2.1.1.3.2.2.cmml" xref="S2.E4.m2.1.1.3.2.2">𝑑</ci><ci id="S2.E4.m2.1.1.3.2.3.cmml" xref="S2.E4.m2.1.1.3.2.3">𝑘</ci></apply></apply></apply><ci id="S2.E4.m2.6.6.1.1.1.1.3.4.cmml" xref="S2.E4.m2.6.6.1.1.1.1.3.4">𝒱</ci></apply></apply><apply id="S2.E4.m2.6.6.1.1.2.2.cmml" xref="S2.E4.m2.6.6.1.1.2.2"><eq id="S2.E4.m2.6.6.1.1.2.2.1.cmml" xref="S2.E4.m2.6.6.1.1.2.2.1"></eq><apply id="S2.E4.m2.6.6.1.1.2.2.2.cmml" xref="S2.E4.m2.6.6.1.1.2.2.2"><times id="S2.E4.m2.6.6.1.1.2.2.2.1.cmml" xref="S2.E4.m2.6.6.1.1.2.2.2.1"></times><ci id="S2.E4.m2.6.6.1.1.2.2.2.2.cmml" xref="S2.E4.m2.6.6.1.1.2.2.2.2">Θ</ci><ci id="S2.E4.m2.2.2.cmml" xref="S2.E4.m2.2.2">𝒳</ci></apply><apply id="S2.E4.m2.6.6.1.1.2.2.3.cmml" xref="S2.E4.m2.6.6.1.1.2.2.3"><times id="S2.E4.m2.6.6.1.1.2.2.3.1.cmml" xref="S2.E4.m2.6.6.1.1.2.2.3.1"></times><ci id="S2.E4.m2.6.6.1.1.2.2.3.2a.cmml" xref="S2.E4.m2.6.6.1.1.2.2.3.2"><mtext id="S2.E4.m2.6.6.1.1.2.2.3.2.cmml" xref="S2.E4.m2.6.6.1.1.2.2.3.2">Attention</mtext></ci><vector id="S2.E4.m2.6.6.1.1.2.2.3.3.1.cmml" xref="S2.E4.m2.6.6.1.1.2.2.3.3.2"><ci id="S2.E4.m2.3.3.cmml" xref="S2.E4.m2.3.3">𝒬</ci><ci id="S2.E4.m2.4.4.cmml" xref="S2.E4.m2.4.4">𝒦</ci><ci id="S2.E4.m2.5.5.cmml" xref="S2.E4.m2.5.5">𝒱</ci></vector></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E4.m2.6c">\displaystyle=\text{softmax}\left(\frac{{\mathcal{Q}}{\mathcal{K}}^{T}}{\sqrt{%
d_{k}}}\right){\mathcal{V}},\ \Theta({\mathcal{X}})=\text{Attention}({\mathcal%
{Q}},{\mathcal{K}},{\mathcal{V}}),</annotation><annotation encoding="application/x-llamapun" id="S2.E4.m2.6d">= softmax ( divide start_ARG caligraphic_Q caligraphic_K start_POSTSUPERSCRIPT italic_T end_POSTSUPERSCRIPT end_ARG start_ARG square-root start_ARG italic_d start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT end_ARG end_ARG ) caligraphic_V , roman_Θ ( caligraphic_X ) = Attention ( caligraphic_Q , caligraphic_K , caligraphic_V ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS1.p1.14">where <math alttext="{\bm{W}}_{\mathcal{Q}}" class="ltx_Math" display="inline" id="S2.SS1.p1.5.m1.1"><semantics id="S2.SS1.p1.5.m1.1a"><msub id="S2.SS1.p1.5.m1.1.1" xref="S2.SS1.p1.5.m1.1.1.cmml"><mi id="S2.SS1.p1.5.m1.1.1.2" xref="S2.SS1.p1.5.m1.1.1.2.cmml">𝑾</mi><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.5.m1.1.1.3" xref="S2.SS1.p1.5.m1.1.1.3.cmml">𝒬</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.5.m1.1b"><apply id="S2.SS1.p1.5.m1.1.1.cmml" xref="S2.SS1.p1.5.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.5.m1.1.1.1.cmml" xref="S2.SS1.p1.5.m1.1.1">subscript</csymbol><ci id="S2.SS1.p1.5.m1.1.1.2.cmml" xref="S2.SS1.p1.5.m1.1.1.2">𝑾</ci><ci id="S2.SS1.p1.5.m1.1.1.3.cmml" xref="S2.SS1.p1.5.m1.1.1.3">𝒬</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.5.m1.1c">{\bm{W}}_{\mathcal{Q}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.5.m1.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_Q end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="{\bm{W}}_{\mathcal{K}}" class="ltx_Math" display="inline" id="S2.SS1.p1.6.m2.1"><semantics id="S2.SS1.p1.6.m2.1a"><msub id="S2.SS1.p1.6.m2.1.1" xref="S2.SS1.p1.6.m2.1.1.cmml"><mi id="S2.SS1.p1.6.m2.1.1.2" xref="S2.SS1.p1.6.m2.1.1.2.cmml">𝑾</mi><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.6.m2.1.1.3" xref="S2.SS1.p1.6.m2.1.1.3.cmml">𝒦</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.6.m2.1b"><apply id="S2.SS1.p1.6.m2.1.1.cmml" xref="S2.SS1.p1.6.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.6.m2.1.1.1.cmml" xref="S2.SS1.p1.6.m2.1.1">subscript</csymbol><ci id="S2.SS1.p1.6.m2.1.1.2.cmml" xref="S2.SS1.p1.6.m2.1.1.2">𝑾</ci><ci id="S2.SS1.p1.6.m2.1.1.3.cmml" xref="S2.SS1.p1.6.m2.1.1.3">𝒦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.6.m2.1c">{\bm{W}}_{\mathcal{K}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.6.m2.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_K end_POSTSUBSCRIPT</annotation></semantics></math>, and <math alttext="{\bm{W}}_{\mathcal{V}}" class="ltx_Math" display="inline" id="S2.SS1.p1.7.m3.1"><semantics id="S2.SS1.p1.7.m3.1a"><msub id="S2.SS1.p1.7.m3.1.1" xref="S2.SS1.p1.7.m3.1.1.cmml"><mi id="S2.SS1.p1.7.m3.1.1.2" xref="S2.SS1.p1.7.m3.1.1.2.cmml">𝑾</mi><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.7.m3.1.1.3" xref="S2.SS1.p1.7.m3.1.1.3.cmml">𝒱</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.7.m3.1b"><apply id="S2.SS1.p1.7.m3.1.1.cmml" xref="S2.SS1.p1.7.m3.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.7.m3.1.1.1.cmml" xref="S2.SS1.p1.7.m3.1.1">subscript</csymbol><ci id="S2.SS1.p1.7.m3.1.1.2.cmml" xref="S2.SS1.p1.7.m3.1.1.2">𝑾</ci><ci id="S2.SS1.p1.7.m3.1.1.3.cmml" xref="S2.SS1.p1.7.m3.1.1.3">𝒱</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.7.m3.1c">{\bm{W}}_{\mathcal{V}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.7.m3.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_V end_POSTSUBSCRIPT</annotation></semantics></math> are the weight matrices for the query, key, and value projections, respectively, and <math alttext="d_{k}" class="ltx_Math" display="inline" id="S2.SS1.p1.8.m4.1"><semantics id="S2.SS1.p1.8.m4.1a"><msub id="S2.SS1.p1.8.m4.1.1" xref="S2.SS1.p1.8.m4.1.1.cmml"><mi id="S2.SS1.p1.8.m4.1.1.2" xref="S2.SS1.p1.8.m4.1.1.2.cmml">d</mi><mi id="S2.SS1.p1.8.m4.1.1.3" xref="S2.SS1.p1.8.m4.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.8.m4.1b"><apply id="S2.SS1.p1.8.m4.1.1.cmml" xref="S2.SS1.p1.8.m4.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.8.m4.1.1.1.cmml" xref="S2.SS1.p1.8.m4.1.1">subscript</csymbol><ci id="S2.SS1.p1.8.m4.1.1.2.cmml" xref="S2.SS1.p1.8.m4.1.1.2">𝑑</ci><ci id="S2.SS1.p1.8.m4.1.1.3.cmml" xref="S2.SS1.p1.8.m4.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.8.m4.1c">d_{k}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.8.m4.1d">italic_d start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT</annotation></semantics></math> is the dimension of the key vectors. The deep attentive interactions among <math alttext="{\mathcal{X}}" class="ltx_Math" display="inline" id="S2.SS1.p1.9.m5.1"><semantics id="S2.SS1.p1.9.m5.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.9.m5.1.1" xref="S2.SS1.p1.9.m5.1.1.cmml">𝒳</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.9.m5.1b"><ci id="S2.SS1.p1.9.m5.1.1.cmml" xref="S2.SS1.p1.9.m5.1.1">𝒳</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.9.m5.1c">{\mathcal{X}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.9.m5.1d">caligraphic_X</annotation></semantics></math> after multiple Transformer layers lead to a comprehensive understanding of the input sequence <math alttext="{\mathcal{X}}" class="ltx_Math" display="inline" id="S2.SS1.p1.10.m6.1"><semantics id="S2.SS1.p1.10.m6.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.10.m6.1.1" xref="S2.SS1.p1.10.m6.1.1.cmml">𝒳</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.10.m6.1b"><ci id="S2.SS1.p1.10.m6.1.1.cmml" xref="S2.SS1.p1.10.m6.1.1">𝒳</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.10.m6.1c">{\mathcal{X}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.10.m6.1d">caligraphic_X</annotation></semantics></math>. This is akin to human’s short-term memory that is accurate but can only contain recent perceived content. We denote this process as <math alttext="\bm{{\mathcal{X}}}=\Theta({\mathcal{X}})" class="ltx_Math" display="inline" id="S2.SS1.p1.11.m7.1"><semantics id="S2.SS1.p1.11.m7.1a"><mrow id="S2.SS1.p1.11.m7.1.2" xref="S2.SS1.p1.11.m7.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.11.m7.1.2.2" xref="S2.SS1.p1.11.m7.1.2.2.cmml">𝓧</mi><mo id="S2.SS1.p1.11.m7.1.2.1" xref="S2.SS1.p1.11.m7.1.2.1.cmml">=</mo><mrow id="S2.SS1.p1.11.m7.1.2.3" xref="S2.SS1.p1.11.m7.1.2.3.cmml"><mi id="S2.SS1.p1.11.m7.1.2.3.2" mathvariant="normal" xref="S2.SS1.p1.11.m7.1.2.3.2.cmml">Θ</mi><mo id="S2.SS1.p1.11.m7.1.2.3.1" xref="S2.SS1.p1.11.m7.1.2.3.1.cmml">⁢</mo><mrow id="S2.SS1.p1.11.m7.1.2.3.3.2" xref="S2.SS1.p1.11.m7.1.2.3.cmml"><mo id="S2.SS1.p1.11.m7.1.2.3.3.2.1" stretchy="false" xref="S2.SS1.p1.11.m7.1.2.3.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.11.m7.1.1" xref="S2.SS1.p1.11.m7.1.1.cmml">𝒳</mi><mo id="S2.SS1.p1.11.m7.1.2.3.3.2.2" stretchy="false" xref="S2.SS1.p1.11.m7.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.11.m7.1b"><apply id="S2.SS1.p1.11.m7.1.2.cmml" xref="S2.SS1.p1.11.m7.1.2"><eq id="S2.SS1.p1.11.m7.1.2.1.cmml" xref="S2.SS1.p1.11.m7.1.2.1"></eq><ci id="S2.SS1.p1.11.m7.1.2.2.cmml" xref="S2.SS1.p1.11.m7.1.2.2">𝓧</ci><apply id="S2.SS1.p1.11.m7.1.2.3.cmml" xref="S2.SS1.p1.11.m7.1.2.3"><times id="S2.SS1.p1.11.m7.1.2.3.1.cmml" xref="S2.SS1.p1.11.m7.1.2.3.1"></times><ci id="S2.SS1.p1.11.m7.1.2.3.2.cmml" xref="S2.SS1.p1.11.m7.1.2.3.2">Θ</ci><ci id="S2.SS1.p1.11.m7.1.1.cmml" xref="S2.SS1.p1.11.m7.1.1">𝒳</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.11.m7.1c">\bm{{\mathcal{X}}}=\Theta({\mathcal{X}})</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.11.m7.1d">bold_caligraphic_X = roman_Θ ( caligraphic_X )</annotation></semantics></math> where <math alttext="\bm{{\mathcal{X}}}" class="ltx_Math" display="inline" id="S2.SS1.p1.12.m8.1"><semantics id="S2.SS1.p1.12.m8.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.12.m8.1.1" xref="S2.SS1.p1.12.m8.1.1.cmml">𝓧</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.12.m8.1b"><ci id="S2.SS1.p1.12.m8.1.1.cmml" xref="S2.SS1.p1.12.m8.1.1">𝓧</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.12.m8.1c">\bm{{\mathcal{X}}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.12.m8.1d">bold_caligraphic_X</annotation></semantics></math> refers to the hidden states of the input sequence <math alttext="{\mathcal{X}}" class="ltx_Math" display="inline" id="S2.SS1.p1.13.m9.1"><semantics id="S2.SS1.p1.13.m9.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.13.m9.1.1" xref="S2.SS1.p1.13.m9.1.1.cmml">𝒳</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.13.m9.1b"><ci id="S2.SS1.p1.13.m9.1.1.cmml" xref="S2.SS1.p1.13.m9.1.1">𝒳</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.13.m9.1c">{\mathcal{X}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.13.m9.1d">caligraphic_X</annotation></semantics></math> and <math alttext="\Theta(\cdot)" class="ltx_Math" display="inline" id="S2.SS1.p1.14.m10.1"><semantics id="S2.SS1.p1.14.m10.1a"><mrow id="S2.SS1.p1.14.m10.1.2" xref="S2.SS1.p1.14.m10.1.2.cmml"><mi id="S2.SS1.p1.14.m10.1.2.2" mathvariant="normal" xref="S2.SS1.p1.14.m10.1.2.2.cmml">Θ</mi><mo id="S2.SS1.p1.14.m10.1.2.1" xref="S2.SS1.p1.14.m10.1.2.1.cmml">⁢</mo><mrow id="S2.SS1.p1.14.m10.1.2.3.2" xref="S2.SS1.p1.14.m10.1.2.cmml"><mo id="S2.SS1.p1.14.m10.1.2.3.2.1" stretchy="false" xref="S2.SS1.p1.14.m10.1.2.cmml">(</mo><mo id="S2.SS1.p1.14.m10.1.1" lspace="0em" rspace="0em" xref="S2.SS1.p1.14.m10.1.1.cmml">⋅</mo><mo id="S2.SS1.p1.14.m10.1.2.3.2.2" stretchy="false" xref="S2.SS1.p1.14.m10.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.14.m10.1b"><apply id="S2.SS1.p1.14.m10.1.2.cmml" xref="S2.SS1.p1.14.m10.1.2"><times id="S2.SS1.p1.14.m10.1.2.1.cmml" xref="S2.SS1.p1.14.m10.1.2.1"></times><ci id="S2.SS1.p1.14.m10.1.2.2.cmml" xref="S2.SS1.p1.14.m10.1.2.2">Θ</ci><ci id="S2.SS1.p1.14.m10.1.1.cmml" xref="S2.SS1.p1.14.m10.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.14.m10.1c">\Theta(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.14.m10.1d">roman_Θ ( ⋅ )</annotation></semantics></math> can be any pretrained LLMs.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS1.p2">
<p class="ltx_p" id="S2.SS1.p2.4">To enable the conversion from short-term memory to long-term memory, we introduce memory tokens <math alttext="x^{m}" class="ltx_Math" display="inline" id="S2.SS1.p2.1.m1.1"><semantics id="S2.SS1.p2.1.m1.1a"><msup id="S2.SS1.p2.1.m1.1.1" xref="S2.SS1.p2.1.m1.1.1.cmml"><mi id="S2.SS1.p2.1.m1.1.1.2" xref="S2.SS1.p2.1.m1.1.1.2.cmml">x</mi><mi id="S2.SS1.p2.1.m1.1.1.3" xref="S2.SS1.p2.1.m1.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.1.m1.1b"><apply id="S2.SS1.p2.1.m1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.1.m1.1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1">superscript</csymbol><ci id="S2.SS1.p2.1.m1.1.1.2.cmml" xref="S2.SS1.p2.1.m1.1.1.2">𝑥</ci><ci id="S2.SS1.p2.1.m1.1.1.3.cmml" xref="S2.SS1.p2.1.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.1.m1.1c">x^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.1.m1.1d">italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> to serve as the information carriers of long-term memory in LLMs. Specifically, supposing the underlying LLM <math alttext="\Theta(\cdot)" class="ltx_Math" display="inline" id="S2.SS1.p2.2.m2.1"><semantics id="S2.SS1.p2.2.m2.1a"><mrow id="S2.SS1.p2.2.m2.1.2" xref="S2.SS1.p2.2.m2.1.2.cmml"><mi id="S2.SS1.p2.2.m2.1.2.2" mathvariant="normal" xref="S2.SS1.p2.2.m2.1.2.2.cmml">Θ</mi><mo id="S2.SS1.p2.2.m2.1.2.1" xref="S2.SS1.p2.2.m2.1.2.1.cmml">⁢</mo><mrow id="S2.SS1.p2.2.m2.1.2.3.2" xref="S2.SS1.p2.2.m2.1.2.cmml"><mo id="S2.SS1.p2.2.m2.1.2.3.2.1" stretchy="false" xref="S2.SS1.p2.2.m2.1.2.cmml">(</mo><mo id="S2.SS1.p2.2.m2.1.1" lspace="0em" rspace="0em" xref="S2.SS1.p2.2.m2.1.1.cmml">⋅</mo><mo id="S2.SS1.p2.2.m2.1.2.3.2.2" stretchy="false" xref="S2.SS1.p2.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.2.m2.1b"><apply id="S2.SS1.p2.2.m2.1.2.cmml" xref="S2.SS1.p2.2.m2.1.2"><times id="S2.SS1.p2.2.m2.1.2.1.cmml" xref="S2.SS1.p2.2.m2.1.2.1"></times><ci id="S2.SS1.p2.2.m2.1.2.2.cmml" xref="S2.SS1.p2.2.m2.1.2.2">Θ</ci><ci id="S2.SS1.p2.2.m2.1.1.cmml" xref="S2.SS1.p2.2.m2.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.2.m2.1c">\Theta(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.2.m2.1d">roman_Θ ( ⋅ )</annotation></semantics></math> has a working context window length of <math alttext="l" class="ltx_Math" display="inline" id="S2.SS1.p2.3.m3.1"><semantics id="S2.SS1.p2.3.m3.1a"><mi id="S2.SS1.p2.3.m3.1.1" xref="S2.SS1.p2.3.m3.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.3.m3.1b"><ci id="S2.SS1.p2.3.m3.1.1.cmml" xref="S2.SS1.p2.3.m3.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.3.m3.1c">l</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.3.m3.1d">italic_l</annotation></semantics></math>, after each context window, we append <math alttext="k" class="ltx_Math" display="inline" id="S2.SS1.p2.4.m4.1"><semantics id="S2.SS1.p2.4.m4.1a"><mi id="S2.SS1.p2.4.m4.1.1" xref="S2.SS1.p2.4.m4.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.4.m4.1b"><ci id="S2.SS1.p2.4.m4.1.1.cmml" xref="S2.SS1.p2.4.m4.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.4.m4.1c">k</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.4.m4.1d">italic_k</annotation></semantics></math> memory tokens, that is:</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A1.EGx4">
<tbody id="S2.E5"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle{\mathcal{X}}=\{x_{1},\cdots,x_{l},x^{m}_{1},\cdots,x^{m}_{k},x_{%
l+1},\cdots\},\quad k\ll l." class="ltx_Math" display="inline" id="S2.E5.m1.4"><semantics id="S2.E5.m1.4a"><mrow id="S2.E5.m1.4.4.1"><mrow id="S2.E5.m1.4.4.1.1.2" xref="S2.E5.m1.4.4.1.1.3.cmml"><mrow id="S2.E5.m1.4.4.1.1.1.1" xref="S2.E5.m1.4.4.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E5.m1.4.4.1.1.1.1.7" xref="S2.E5.m1.4.4.1.1.1.1.7.cmml">𝒳</mi><mo id="S2.E5.m1.4.4.1.1.1.1.6" xref="S2.E5.m1.4.4.1.1.1.1.6.cmml">=</mo><mrow id="S2.E5.m1.4.4.1.1.1.1.5.5" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml"><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.6" stretchy="false" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">{</mo><msub id="S2.E5.m1.4.4.1.1.1.1.1.1.1" xref="S2.E5.m1.4.4.1.1.1.1.1.1.1.cmml"><mi id="S2.E5.m1.4.4.1.1.1.1.1.1.1.2" xref="S2.E5.m1.4.4.1.1.1.1.1.1.1.2.cmml">x</mi><mn id="S2.E5.m1.4.4.1.1.1.1.1.1.1.3" xref="S2.E5.m1.4.4.1.1.1.1.1.1.1.3.cmml">1</mn></msub><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.7" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">,</mo><mi id="S2.E5.m1.1.1" mathvariant="normal" xref="S2.E5.m1.1.1.cmml">⋯</mi><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.8" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">,</mo><msub id="S2.E5.m1.4.4.1.1.1.1.2.2.2" xref="S2.E5.m1.4.4.1.1.1.1.2.2.2.cmml"><mi id="S2.E5.m1.4.4.1.1.1.1.2.2.2.2" xref="S2.E5.m1.4.4.1.1.1.1.2.2.2.2.cmml">x</mi><mi id="S2.E5.m1.4.4.1.1.1.1.2.2.2.3" xref="S2.E5.m1.4.4.1.1.1.1.2.2.2.3.cmml">l</mi></msub><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.9" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">,</mo><msubsup id="S2.E5.m1.4.4.1.1.1.1.3.3.3" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3.cmml"><mi id="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.2" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.2.cmml">x</mi><mn id="S2.E5.m1.4.4.1.1.1.1.3.3.3.3" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3.3.cmml">1</mn><mi id="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.3" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.3.cmml">m</mi></msubsup><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.10" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">,</mo><mi id="S2.E5.m1.2.2" mathvariant="normal" xref="S2.E5.m1.2.2.cmml">⋯</mi><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.11" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">,</mo><msubsup id="S2.E5.m1.4.4.1.1.1.1.4.4.4" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4.cmml"><mi id="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.2" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.2.cmml">x</mi><mi id="S2.E5.m1.4.4.1.1.1.1.4.4.4.3" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4.3.cmml">k</mi><mi id="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.3" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.3.cmml">m</mi></msubsup><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.12" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">,</mo><msub id="S2.E5.m1.4.4.1.1.1.1.5.5.5" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.cmml"><mi id="S2.E5.m1.4.4.1.1.1.1.5.5.5.2" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.2.cmml">x</mi><mrow id="S2.E5.m1.4.4.1.1.1.1.5.5.5.3" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.cmml"><mi id="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.2" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.2.cmml">l</mi><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.1" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.1.cmml">+</mo><mn id="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.3" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.3.cmml">1</mn></mrow></msub><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.13" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">,</mo><mi id="S2.E5.m1.3.3" mathvariant="normal" xref="S2.E5.m1.3.3.cmml">⋯</mi><mo id="S2.E5.m1.4.4.1.1.1.1.5.5.14" stretchy="false" xref="S2.E5.m1.4.4.1.1.1.1.5.6.cmml">}</mo></mrow></mrow><mo id="S2.E5.m1.4.4.1.1.2.3" rspace="1.167em" xref="S2.E5.m1.4.4.1.1.3a.cmml">,</mo><mrow id="S2.E5.m1.4.4.1.1.2.2" xref="S2.E5.m1.4.4.1.1.2.2.cmml"><mi id="S2.E5.m1.4.4.1.1.2.2.2" xref="S2.E5.m1.4.4.1.1.2.2.2.cmml">k</mi><mo id="S2.E5.m1.4.4.1.1.2.2.1" xref="S2.E5.m1.4.4.1.1.2.2.1.cmml">≪</mo><mi id="S2.E5.m1.4.4.1.1.2.2.3" xref="S2.E5.m1.4.4.1.1.2.2.3.cmml">l</mi></mrow></mrow><mo id="S2.E5.m1.4.4.1.2" lspace="0em">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E5.m1.4b"><apply id="S2.E5.m1.4.4.1.1.3.cmml" xref="S2.E5.m1.4.4.1.1.2"><csymbol cd="ambiguous" id="S2.E5.m1.4.4.1.1.3a.cmml" xref="S2.E5.m1.4.4.1.1.2.3">formulae-sequence</csymbol><apply id="S2.E5.m1.4.4.1.1.1.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1"><eq id="S2.E5.m1.4.4.1.1.1.1.6.cmml" xref="S2.E5.m1.4.4.1.1.1.1.6"></eq><ci id="S2.E5.m1.4.4.1.1.1.1.7.cmml" xref="S2.E5.m1.4.4.1.1.1.1.7">𝒳</ci><set id="S2.E5.m1.4.4.1.1.1.1.5.6.cmml" xref="S2.E5.m1.4.4.1.1.1.1.5.5"><apply id="S2.E5.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E5.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E5.m1.4.4.1.1.1.1.1.1.1.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.1.1.1.2">𝑥</ci><cn id="S2.E5.m1.4.4.1.1.1.1.1.1.1.3.cmml" type="integer" xref="S2.E5.m1.4.4.1.1.1.1.1.1.1.3">1</cn></apply><ci id="S2.E5.m1.1.1.cmml" xref="S2.E5.m1.1.1">⋯</ci><apply id="S2.E5.m1.4.4.1.1.1.1.2.2.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E5.m1.4.4.1.1.1.1.2.2.2.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.2.2.2">subscript</csymbol><ci id="S2.E5.m1.4.4.1.1.1.1.2.2.2.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.2.2.2.2">𝑥</ci><ci id="S2.E5.m1.4.4.1.1.1.1.2.2.2.3.cmml" xref="S2.E5.m1.4.4.1.1.1.1.2.2.2.3">𝑙</ci></apply><apply id="S2.E5.m1.4.4.1.1.1.1.3.3.3.cmml" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.E5.m1.4.4.1.1.1.1.3.3.3.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3">subscript</csymbol><apply id="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3">superscript</csymbol><ci id="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.2">𝑥</ci><ci id="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.3.cmml" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3.2.3">𝑚</ci></apply><cn id="S2.E5.m1.4.4.1.1.1.1.3.3.3.3.cmml" type="integer" xref="S2.E5.m1.4.4.1.1.1.1.3.3.3.3">1</cn></apply><ci id="S2.E5.m1.2.2.cmml" xref="S2.E5.m1.2.2">⋯</ci><apply id="S2.E5.m1.4.4.1.1.1.1.4.4.4.cmml" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4"><csymbol cd="ambiguous" id="S2.E5.m1.4.4.1.1.1.1.4.4.4.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4">subscript</csymbol><apply id="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4"><csymbol cd="ambiguous" id="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4">superscript</csymbol><ci id="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.2">𝑥</ci><ci id="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.3.cmml" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4.2.3">𝑚</ci></apply><ci id="S2.E5.m1.4.4.1.1.1.1.4.4.4.3.cmml" xref="S2.E5.m1.4.4.1.1.1.1.4.4.4.3">𝑘</ci></apply><apply id="S2.E5.m1.4.4.1.1.1.1.5.5.5.cmml" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5"><csymbol cd="ambiguous" id="S2.E5.m1.4.4.1.1.1.1.5.5.5.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5">subscript</csymbol><ci id="S2.E5.m1.4.4.1.1.1.1.5.5.5.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.2">𝑥</ci><apply id="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.cmml" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.3"><plus id="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.1.cmml" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.1"></plus><ci id="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.2.cmml" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.2">𝑙</ci><cn id="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.3.cmml" type="integer" xref="S2.E5.m1.4.4.1.1.1.1.5.5.5.3.3">1</cn></apply></apply><ci id="S2.E5.m1.3.3.cmml" xref="S2.E5.m1.3.3">⋯</ci></set></apply><apply id="S2.E5.m1.4.4.1.1.2.2.cmml" xref="S2.E5.m1.4.4.1.1.2.2"><csymbol cd="latexml" id="S2.E5.m1.4.4.1.1.2.2.1.cmml" xref="S2.E5.m1.4.4.1.1.2.2.1">much-less-than</csymbol><ci id="S2.E5.m1.4.4.1.1.2.2.2.cmml" xref="S2.E5.m1.4.4.1.1.2.2.2">𝑘</ci><ci id="S2.E5.m1.4.4.1.1.2.2.3.cmml" xref="S2.E5.m1.4.4.1.1.2.2.3">𝑙</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E5.m1.4c">\displaystyle{\mathcal{X}}=\{x_{1},\cdots,x_{l},x^{m}_{1},\cdots,x^{m}_{k},x_{%
l+1},\cdots\},\quad k\ll l.</annotation><annotation encoding="application/x-llamapun" id="S2.E5.m1.4d">caligraphic_X = { italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , italic_x start_POSTSUBSCRIPT italic_l end_POSTSUBSCRIPT , italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT , italic_x start_POSTSUBSCRIPT italic_l + 1 end_POSTSUBSCRIPT , ⋯ } , italic_k ≪ italic_l .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS1.p2.7">During the attentive interactions defined by Eq. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.E4" title="In 2.1 Memory Module ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">4</span></a>), we initialize another set of weight matrices <math alttext="{\bm{W}}_{{\mathcal{Q}}^{m}}" class="ltx_Math" display="inline" id="S2.SS1.p2.5.m1.1"><semantics id="S2.SS1.p2.5.m1.1a"><msub id="S2.SS1.p2.5.m1.1.1" xref="S2.SS1.p2.5.m1.1.1.cmml"><mi id="S2.SS1.p2.5.m1.1.1.2" xref="S2.SS1.p2.5.m1.1.1.2.cmml">𝑾</mi><msup id="S2.SS1.p2.5.m1.1.1.3" xref="S2.SS1.p2.5.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.5.m1.1.1.3.2" xref="S2.SS1.p2.5.m1.1.1.3.2.cmml">𝒬</mi><mi id="S2.SS1.p2.5.m1.1.1.3.3" xref="S2.SS1.p2.5.m1.1.1.3.3.cmml">m</mi></msup></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.5.m1.1b"><apply id="S2.SS1.p2.5.m1.1.1.cmml" xref="S2.SS1.p2.5.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.5.m1.1.1.1.cmml" xref="S2.SS1.p2.5.m1.1.1">subscript</csymbol><ci id="S2.SS1.p2.5.m1.1.1.2.cmml" xref="S2.SS1.p2.5.m1.1.1.2">𝑾</ci><apply id="S2.SS1.p2.5.m1.1.1.3.cmml" xref="S2.SS1.p2.5.m1.1.1.3"><csymbol cd="ambiguous" id="S2.SS1.p2.5.m1.1.1.3.1.cmml" xref="S2.SS1.p2.5.m1.1.1.3">superscript</csymbol><ci id="S2.SS1.p2.5.m1.1.1.3.2.cmml" xref="S2.SS1.p2.5.m1.1.1.3.2">𝒬</ci><ci id="S2.SS1.p2.5.m1.1.1.3.3.cmml" xref="S2.SS1.p2.5.m1.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.5.m1.1c">{\bm{W}}_{{\mathcal{Q}}^{m}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.5.m1.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_Q start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="{\bm{W}}_{{\mathcal{K}}^{m}}" class="ltx_Math" display="inline" id="S2.SS1.p2.6.m2.1"><semantics id="S2.SS1.p2.6.m2.1a"><msub id="S2.SS1.p2.6.m2.1.1" xref="S2.SS1.p2.6.m2.1.1.cmml"><mi id="S2.SS1.p2.6.m2.1.1.2" xref="S2.SS1.p2.6.m2.1.1.2.cmml">𝑾</mi><msup id="S2.SS1.p2.6.m2.1.1.3" xref="S2.SS1.p2.6.m2.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.6.m2.1.1.3.2" xref="S2.SS1.p2.6.m2.1.1.3.2.cmml">𝒦</mi><mi id="S2.SS1.p2.6.m2.1.1.3.3" xref="S2.SS1.p2.6.m2.1.1.3.3.cmml">m</mi></msup></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.6.m2.1b"><apply id="S2.SS1.p2.6.m2.1.1.cmml" xref="S2.SS1.p2.6.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.6.m2.1.1.1.cmml" xref="S2.SS1.p2.6.m2.1.1">subscript</csymbol><ci id="S2.SS1.p2.6.m2.1.1.2.cmml" xref="S2.SS1.p2.6.m2.1.1.2">𝑾</ci><apply id="S2.SS1.p2.6.m2.1.1.3.cmml" xref="S2.SS1.p2.6.m2.1.1.3"><csymbol cd="ambiguous" id="S2.SS1.p2.6.m2.1.1.3.1.cmml" xref="S2.SS1.p2.6.m2.1.1.3">superscript</csymbol><ci id="S2.SS1.p2.6.m2.1.1.3.2.cmml" xref="S2.SS1.p2.6.m2.1.1.3.2">𝒦</ci><ci id="S2.SS1.p2.6.m2.1.1.3.3.cmml" xref="S2.SS1.p2.6.m2.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.6.m2.1c">{\bm{W}}_{{\mathcal{K}}^{m}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.6.m2.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_K start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="{\bm{W}}_{{\mathcal{V}}^{m}}" class="ltx_Math" display="inline" id="S2.SS1.p2.7.m3.1"><semantics id="S2.SS1.p2.7.m3.1a"><msub id="S2.SS1.p2.7.m3.1.1" xref="S2.SS1.p2.7.m3.1.1.cmml"><mi id="S2.SS1.p2.7.m3.1.1.2" xref="S2.SS1.p2.7.m3.1.1.2.cmml">𝑾</mi><msup id="S2.SS1.p2.7.m3.1.1.3" xref="S2.SS1.p2.7.m3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.7.m3.1.1.3.2" xref="S2.SS1.p2.7.m3.1.1.3.2.cmml">𝒱</mi><mi id="S2.SS1.p2.7.m3.1.1.3.3" xref="S2.SS1.p2.7.m3.1.1.3.3.cmml">m</mi></msup></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.7.m3.1b"><apply id="S2.SS1.p2.7.m3.1.1.cmml" xref="S2.SS1.p2.7.m3.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m3.1.1.1.cmml" xref="S2.SS1.p2.7.m3.1.1">subscript</csymbol><ci id="S2.SS1.p2.7.m3.1.1.2.cmml" xref="S2.SS1.p2.7.m3.1.1.2">𝑾</ci><apply id="S2.SS1.p2.7.m3.1.1.3.cmml" xref="S2.SS1.p2.7.m3.1.1.3"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m3.1.1.3.1.cmml" xref="S2.SS1.p2.7.m3.1.1.3">superscript</csymbol><ci id="S2.SS1.p2.7.m3.1.1.3.2.cmml" xref="S2.SS1.p2.7.m3.1.1.3.2">𝒱</ci><ci id="S2.SS1.p2.7.m3.1.1.3.3.cmml" xref="S2.SS1.p2.7.m3.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.7.m3.1c">{\bm{W}}_{{\mathcal{V}}^{m}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.7.m3.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_V start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> on the special purpose of memory formation. Therefore, we have:</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A1.EGx5">
<tbody id="S2.E6"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle{\mathcal{Q}}^{m}" class="ltx_Math" display="inline" id="S2.E6.m1.1"><semantics id="S2.E6.m1.1a"><msup id="S2.E6.m1.1.1" xref="S2.E6.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m1.1.1.2" xref="S2.E6.m1.1.1.2.cmml">𝒬</mi><mi id="S2.E6.m1.1.1.3" xref="S2.E6.m1.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.E6.m1.1b"><apply id="S2.E6.m1.1.1.cmml" xref="S2.E6.m1.1.1"><csymbol cd="ambiguous" id="S2.E6.m1.1.1.1.cmml" xref="S2.E6.m1.1.1">superscript</csymbol><ci id="S2.E6.m1.1.1.2.cmml" xref="S2.E6.m1.1.1.2">𝒬</ci><ci id="S2.E6.m1.1.1.3.cmml" xref="S2.E6.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E6.m1.1c">\displaystyle{\mathcal{Q}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.E6.m1.1d">caligraphic_Q start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle={\mathcal{X}}{\bm{W}}_{{\mathcal{Q}}^{m}},\quad{\mathcal{K}}^{m}%
={\mathcal{X}}{\bm{W}}_{{\mathcal{K}}^{m}},\quad{\mathcal{V}}^{m}={\mathcal{X}%
}{\bm{W}}_{{\mathcal{V}}^{m}}," class="ltx_Math" display="inline" id="S2.E6.m2.1"><semantics id="S2.E6.m2.1a"><mrow id="S2.E6.m2.1.1.1"><mrow id="S2.E6.m2.1.1.1.1.2" xref="S2.E6.m2.1.1.1.1.3.cmml"><mrow id="S2.E6.m2.1.1.1.1.1.1" xref="S2.E6.m2.1.1.1.1.1.1.cmml"><mi id="S2.E6.m2.1.1.1.1.1.1.2" xref="S2.E6.m2.1.1.1.1.1.1.2.cmml"></mi><mo id="S2.E6.m2.1.1.1.1.1.1.1" xref="S2.E6.m2.1.1.1.1.1.1.1.cmml">=</mo><mrow id="S2.E6.m2.1.1.1.1.1.1.3" xref="S2.E6.m2.1.1.1.1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m2.1.1.1.1.1.1.3.2" xref="S2.E6.m2.1.1.1.1.1.1.3.2.cmml">𝒳</mi><mo id="S2.E6.m2.1.1.1.1.1.1.3.1" xref="S2.E6.m2.1.1.1.1.1.1.3.1.cmml">⁢</mo><msub id="S2.E6.m2.1.1.1.1.1.1.3.3" xref="S2.E6.m2.1.1.1.1.1.1.3.3.cmml"><mi id="S2.E6.m2.1.1.1.1.1.1.3.3.2" xref="S2.E6.m2.1.1.1.1.1.1.3.3.2.cmml">𝑾</mi><msup id="S2.E6.m2.1.1.1.1.1.1.3.3.3" xref="S2.E6.m2.1.1.1.1.1.1.3.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m2.1.1.1.1.1.1.3.3.3.2" xref="S2.E6.m2.1.1.1.1.1.1.3.3.3.2.cmml">𝒬</mi><mi id="S2.E6.m2.1.1.1.1.1.1.3.3.3.3" xref="S2.E6.m2.1.1.1.1.1.1.3.3.3.3.cmml">m</mi></msup></msub></mrow></mrow><mo id="S2.E6.m2.1.1.1.1.2.3" rspace="1.167em" xref="S2.E6.m2.1.1.1.1.3a.cmml">,</mo><mrow id="S2.E6.m2.1.1.1.1.2.2.2" xref="S2.E6.m2.1.1.1.1.2.2.3.cmml"><mrow id="S2.E6.m2.1.1.1.1.2.2.1.1" xref="S2.E6.m2.1.1.1.1.2.2.1.1.cmml"><msup id="S2.E6.m2.1.1.1.1.2.2.1.1.2" xref="S2.E6.m2.1.1.1.1.2.2.1.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m2.1.1.1.1.2.2.1.1.2.2" xref="S2.E6.m2.1.1.1.1.2.2.1.1.2.2.cmml">𝒦</mi><mi id="S2.E6.m2.1.1.1.1.2.2.1.1.2.3" xref="S2.E6.m2.1.1.1.1.2.2.1.1.2.3.cmml">m</mi></msup><mo id="S2.E6.m2.1.1.1.1.2.2.1.1.1" xref="S2.E6.m2.1.1.1.1.2.2.1.1.1.cmml">=</mo><mrow id="S2.E6.m2.1.1.1.1.2.2.1.1.3" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m2.1.1.1.1.2.2.1.1.3.2" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.2.cmml">𝒳</mi><mo id="S2.E6.m2.1.1.1.1.2.2.1.1.3.1" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.1.cmml">⁢</mo><msub id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.cmml"><mi id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.2" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.2.cmml">𝑾</mi><msup id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.2" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.2.cmml">𝒦</mi><mi id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.3" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.3.cmml">m</mi></msup></msub></mrow></mrow><mo id="S2.E6.m2.1.1.1.1.2.2.2.3" rspace="1.167em" xref="S2.E6.m2.1.1.1.1.2.2.3a.cmml">,</mo><mrow id="S2.E6.m2.1.1.1.1.2.2.2.2" xref="S2.E6.m2.1.1.1.1.2.2.2.2.cmml"><msup id="S2.E6.m2.1.1.1.1.2.2.2.2.2" xref="S2.E6.m2.1.1.1.1.2.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m2.1.1.1.1.2.2.2.2.2.2" xref="S2.E6.m2.1.1.1.1.2.2.2.2.2.2.cmml">𝒱</mi><mi id="S2.E6.m2.1.1.1.1.2.2.2.2.2.3" xref="S2.E6.m2.1.1.1.1.2.2.2.2.2.3.cmml">m</mi></msup><mo id="S2.E6.m2.1.1.1.1.2.2.2.2.1" xref="S2.E6.m2.1.1.1.1.2.2.2.2.1.cmml">=</mo><mrow id="S2.E6.m2.1.1.1.1.2.2.2.2.3" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m2.1.1.1.1.2.2.2.2.3.2" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.2.cmml">𝒳</mi><mo id="S2.E6.m2.1.1.1.1.2.2.2.2.3.1" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.1.cmml">⁢</mo><msub id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.cmml"><mi id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.2" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.2.cmml">𝑾</mi><msup id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.2" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.2.cmml">𝒱</mi><mi id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.3" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.3.cmml">m</mi></msup></msub></mrow></mrow></mrow></mrow><mo id="S2.E6.m2.1.1.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E6.m2.1b"><apply id="S2.E6.m2.1.1.1.1.3.cmml" xref="S2.E6.m2.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.3a.cmml" xref="S2.E6.m2.1.1.1.1.2.3">formulae-sequence</csymbol><apply id="S2.E6.m2.1.1.1.1.1.1.cmml" xref="S2.E6.m2.1.1.1.1.1.1"><eq id="S2.E6.m2.1.1.1.1.1.1.1.cmml" xref="S2.E6.m2.1.1.1.1.1.1.1"></eq><csymbol cd="latexml" id="S2.E6.m2.1.1.1.1.1.1.2.cmml" xref="S2.E6.m2.1.1.1.1.1.1.2">absent</csymbol><apply id="S2.E6.m2.1.1.1.1.1.1.3.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3"><times id="S2.E6.m2.1.1.1.1.1.1.3.1.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.1"></times><ci id="S2.E6.m2.1.1.1.1.1.1.3.2.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.2">𝒳</ci><apply id="S2.E6.m2.1.1.1.1.1.1.3.3.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.1.1.3.3.1.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.3">subscript</csymbol><ci id="S2.E6.m2.1.1.1.1.1.1.3.3.2.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.3.2">𝑾</ci><apply id="S2.E6.m2.1.1.1.1.1.1.3.3.3.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.1.1.3.3.3.1.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.3.3">superscript</csymbol><ci id="S2.E6.m2.1.1.1.1.1.1.3.3.3.2.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.3.3.2">𝒬</ci><ci id="S2.E6.m2.1.1.1.1.1.1.3.3.3.3.cmml" xref="S2.E6.m2.1.1.1.1.1.1.3.3.3.3">𝑚</ci></apply></apply></apply></apply><apply id="S2.E6.m2.1.1.1.1.2.2.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.2.2.3a.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.3">formulae-sequence</csymbol><apply id="S2.E6.m2.1.1.1.1.2.2.1.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1"><eq id="S2.E6.m2.1.1.1.1.2.2.1.1.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.1"></eq><apply id="S2.E6.m2.1.1.1.1.2.2.1.1.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.2"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.2.2.1.1.2.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.2">superscript</csymbol><ci id="S2.E6.m2.1.1.1.1.2.2.1.1.2.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.2.2">𝒦</ci><ci id="S2.E6.m2.1.1.1.1.2.2.1.1.2.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.2.3">𝑚</ci></apply><apply id="S2.E6.m2.1.1.1.1.2.2.1.1.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3"><times id="S2.E6.m2.1.1.1.1.2.2.1.1.3.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.1"></times><ci id="S2.E6.m2.1.1.1.1.2.2.1.1.3.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.2">𝒳</ci><apply id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3">subscript</csymbol><ci id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.2">𝑾</ci><apply id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3">superscript</csymbol><ci id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.2">𝒦</ci><ci id="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.1.1.3.3.3.3">𝑚</ci></apply></apply></apply></apply><apply id="S2.E6.m2.1.1.1.1.2.2.2.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2"><eq id="S2.E6.m2.1.1.1.1.2.2.2.2.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.1"></eq><apply id="S2.E6.m2.1.1.1.1.2.2.2.2.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.2.2.2.2.2.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.2">superscript</csymbol><ci id="S2.E6.m2.1.1.1.1.2.2.2.2.2.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.2.2">𝒱</ci><ci id="S2.E6.m2.1.1.1.1.2.2.2.2.2.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.2.3">𝑚</ci></apply><apply id="S2.E6.m2.1.1.1.1.2.2.2.2.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3"><times id="S2.E6.m2.1.1.1.1.2.2.2.2.3.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.1"></times><ci id="S2.E6.m2.1.1.1.1.2.2.2.2.3.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.2">𝒳</ci><apply id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3">subscript</csymbol><ci id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.2">𝑾</ci><apply id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3"><csymbol cd="ambiguous" id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.1.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3">superscript</csymbol><ci id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.2.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.2">𝒱</ci><ci id="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.3.cmml" xref="S2.E6.m2.1.1.1.1.2.2.2.2.3.3.3.3">𝑚</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E6.m2.1c">\displaystyle={\mathcal{X}}{\bm{W}}_{{\mathcal{Q}}^{m}},\quad{\mathcal{K}}^{m}%
={\mathcal{X}}{\bm{W}}_{{\mathcal{K}}^{m}},\quad{\mathcal{V}}^{m}={\mathcal{X}%
}{\bm{W}}_{{\mathcal{V}}^{m}},</annotation><annotation encoding="application/x-llamapun" id="S2.E6.m2.1d">= caligraphic_X bold_italic_W start_POSTSUBSCRIPT caligraphic_Q start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT , caligraphic_K start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT = caligraphic_X bold_italic_W start_POSTSUBSCRIPT caligraphic_K start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT , caligraphic_V start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT = caligraphic_X bold_italic_W start_POSTSUBSCRIPT caligraphic_V start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
<tbody id="S2.E7"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\text{Attention}({\mathcal{Q}},{\mathcal{K}},{\mathcal{V}})" class="ltx_Math" display="inline" id="S2.E7.m1.3"><semantics id="S2.E7.m1.3a"><mrow id="S2.E7.m1.3.4" xref="S2.E7.m1.3.4.cmml"><mtext id="S2.E7.m1.3.4.2" xref="S2.E7.m1.3.4.2a.cmml">Attention</mtext><mo id="S2.E7.m1.3.4.1" xref="S2.E7.m1.3.4.1.cmml">⁢</mo><mrow id="S2.E7.m1.3.4.3.2" xref="S2.E7.m1.3.4.3.1.cmml"><mo id="S2.E7.m1.3.4.3.2.1" stretchy="false" xref="S2.E7.m1.3.4.3.1.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.E7.m1.1.1" xref="S2.E7.m1.1.1.cmml">𝒬</mi><mo id="S2.E7.m1.3.4.3.2.2" xref="S2.E7.m1.3.4.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S2.E7.m1.2.2" xref="S2.E7.m1.2.2.cmml">𝒦</mi><mo id="S2.E7.m1.3.4.3.2.3" xref="S2.E7.m1.3.4.3.1.cmml">,</mo><mi class="ltx_font_mathcaligraphic" id="S2.E7.m1.3.3" xref="S2.E7.m1.3.3.cmml">𝒱</mi><mo id="S2.E7.m1.3.4.3.2.4" stretchy="false" xref="S2.E7.m1.3.4.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E7.m1.3b"><apply id="S2.E7.m1.3.4.cmml" xref="S2.E7.m1.3.4"><times id="S2.E7.m1.3.4.1.cmml" xref="S2.E7.m1.3.4.1"></times><ci id="S2.E7.m1.3.4.2a.cmml" xref="S2.E7.m1.3.4.2"><mtext id="S2.E7.m1.3.4.2.cmml" xref="S2.E7.m1.3.4.2">Attention</mtext></ci><vector id="S2.E7.m1.3.4.3.1.cmml" xref="S2.E7.m1.3.4.3.2"><ci id="S2.E7.m1.1.1.cmml" xref="S2.E7.m1.1.1">𝒬</ci><ci id="S2.E7.m1.2.2.cmml" xref="S2.E7.m1.2.2">𝒦</ci><ci id="S2.E7.m1.3.3.cmml" xref="S2.E7.m1.3.3">𝒱</ci></vector></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E7.m1.3c">\displaystyle\text{Attention}({\mathcal{Q}},{\mathcal{K}},{\mathcal{V}})</annotation><annotation encoding="application/x-llamapun" id="S2.E7.m1.3d">Attention ( caligraphic_Q , caligraphic_K , caligraphic_V )</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle=\text{softmax}\left(\frac{[{\mathcal{Q}};{\mathcal{Q}}^{m}][{%
\mathcal{K}};{\mathcal{K}}^{m};{\mathcal{K}}^{m}_{\text{cache}}]^{T}}{\sqrt{d_%
{k}}}\right)[{\mathcal{V}},{\mathcal{V}}^{m},{\mathcal{V}}^{m}_{\text{cache}}]," class="ltx_Math" display="inline" id="S2.E7.m2.7"><semantics id="S2.E7.m2.7a"><mrow id="S2.E7.m2.7.7.1" xref="S2.E7.m2.7.7.1.1.cmml"><mrow id="S2.E7.m2.7.7.1.1" xref="S2.E7.m2.7.7.1.1.cmml"><mi id="S2.E7.m2.7.7.1.1.4" xref="S2.E7.m2.7.7.1.1.4.cmml"></mi><mo id="S2.E7.m2.7.7.1.1.3" xref="S2.E7.m2.7.7.1.1.3.cmml">=</mo><mrow id="S2.E7.m2.7.7.1.1.2" xref="S2.E7.m2.7.7.1.1.2.cmml"><mtext id="S2.E7.m2.7.7.1.1.2.4" xref="S2.E7.m2.7.7.1.1.2.4a.cmml">softmax</mtext><mo id="S2.E7.m2.7.7.1.1.2.3" xref="S2.E7.m2.7.7.1.1.2.3.cmml">⁢</mo><mrow id="S2.E7.m2.7.7.1.1.2.5.2" xref="S2.E7.m2.5.5.cmml"><mo id="S2.E7.m2.7.7.1.1.2.5.2.1" xref="S2.E7.m2.5.5.cmml">(</mo><mstyle displaystyle="true" id="S2.E7.m2.5.5" xref="S2.E7.m2.5.5.cmml"><mfrac id="S2.E7.m2.5.5a" xref="S2.E7.m2.5.5.cmml"><mrow id="S2.E7.m2.5.5.5" xref="S2.E7.m2.5.5.5.cmml"><mrow id="S2.E7.m2.3.3.3.3.1" xref="S2.E7.m2.3.3.3.3.2.cmml"><mo id="S2.E7.m2.3.3.3.3.1.2" stretchy="false" xref="S2.E7.m2.3.3.3.3.2.cmml">[</mo><mi class="ltx_font_mathcaligraphic" id="S2.E7.m2.1.1.1.1" xref="S2.E7.m2.1.1.1.1.cmml">𝒬</mi><mo id="S2.E7.m2.3.3.3.3.1.3" xref="S2.E7.m2.3.3.3.3.2.cmml">;</mo><msup id="S2.E7.m2.3.3.3.3.1.1" xref="S2.E7.m2.3.3.3.3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E7.m2.3.3.3.3.1.1.2" xref="S2.E7.m2.3.3.3.3.1.1.2.cmml">𝒬</mi><mi id="S2.E7.m2.3.3.3.3.1.1.3" xref="S2.E7.m2.3.3.3.3.1.1.3.cmml">m</mi></msup><mo id="S2.E7.m2.3.3.3.3.1.4" stretchy="false" xref="S2.E7.m2.3.3.3.3.2.cmml">]</mo></mrow><mo id="S2.E7.m2.5.5.5.6" xref="S2.E7.m2.5.5.5.6.cmml">⁢</mo><msup id="S2.E7.m2.5.5.5.5" xref="S2.E7.m2.5.5.5.5.cmml"><mrow id="S2.E7.m2.5.5.5.5.2.2" xref="S2.E7.m2.5.5.5.5.2.3.cmml"><mo id="S2.E7.m2.5.5.5.5.2.2.3" stretchy="false" xref="S2.E7.m2.5.5.5.5.2.3.cmml">[</mo><mi class="ltx_font_mathcaligraphic" id="S2.E7.m2.2.2.2.2" xref="S2.E7.m2.2.2.2.2.cmml">𝒦</mi><mo id="S2.E7.m2.5.5.5.5.2.2.4" xref="S2.E7.m2.5.5.5.5.2.3.cmml">;</mo><msup id="S2.E7.m2.4.4.4.4.1.1.1" xref="S2.E7.m2.4.4.4.4.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E7.m2.4.4.4.4.1.1.1.2" xref="S2.E7.m2.4.4.4.4.1.1.1.2.cmml">𝒦</mi><mi id="S2.E7.m2.4.4.4.4.1.1.1.3" xref="S2.E7.m2.4.4.4.4.1.1.1.3.cmml">m</mi></msup><mo id="S2.E7.m2.5.5.5.5.2.2.5" xref="S2.E7.m2.5.5.5.5.2.3.cmml">;</mo><msubsup id="S2.E7.m2.5.5.5.5.2.2.2" xref="S2.E7.m2.5.5.5.5.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E7.m2.5.5.5.5.2.2.2.2.2" xref="S2.E7.m2.5.5.5.5.2.2.2.2.2.cmml">𝒦</mi><mtext id="S2.E7.m2.5.5.5.5.2.2.2.3" xref="S2.E7.m2.5.5.5.5.2.2.2.3a.cmml">cache</mtext><mi id="S2.E7.m2.5.5.5.5.2.2.2.2.3" xref="S2.E7.m2.5.5.5.5.2.2.2.2.3.cmml">m</mi></msubsup><mo id="S2.E7.m2.5.5.5.5.2.2.6" stretchy="false" xref="S2.E7.m2.5.5.5.5.2.3.cmml">]</mo></mrow><mi id="S2.E7.m2.5.5.5.5.4" xref="S2.E7.m2.5.5.5.5.4.cmml">T</mi></msup></mrow><msqrt id="S2.E7.m2.5.5.7" xref="S2.E7.m2.5.5.7.cmml"><msub id="S2.E7.m2.5.5.7.2" xref="S2.E7.m2.5.5.7.2.cmml"><mi id="S2.E7.m2.5.5.7.2.2" xref="S2.E7.m2.5.5.7.2.2.cmml">d</mi><mi id="S2.E7.m2.5.5.7.2.3" xref="S2.E7.m2.5.5.7.2.3.cmml">k</mi></msub></msqrt></mfrac></mstyle><mo id="S2.E7.m2.7.7.1.1.2.5.2.2" xref="S2.E7.m2.5.5.cmml">)</mo></mrow><mo id="S2.E7.m2.7.7.1.1.2.3a" xref="S2.E7.m2.7.7.1.1.2.3.cmml">⁢</mo><mrow id="S2.E7.m2.7.7.1.1.2.2.2" xref="S2.E7.m2.7.7.1.1.2.2.3.cmml"><mo id="S2.E7.m2.7.7.1.1.2.2.2.3" stretchy="false" xref="S2.E7.m2.7.7.1.1.2.2.3.cmml">[</mo><mi class="ltx_font_mathcaligraphic" id="S2.E7.m2.6.6" xref="S2.E7.m2.6.6.cmml">𝒱</mi><mo id="S2.E7.m2.7.7.1.1.2.2.2.4" xref="S2.E7.m2.7.7.1.1.2.2.3.cmml">,</mo><msup id="S2.E7.m2.7.7.1.1.1.1.1.1" xref="S2.E7.m2.7.7.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E7.m2.7.7.1.1.1.1.1.1.2" xref="S2.E7.m2.7.7.1.1.1.1.1.1.2.cmml">𝒱</mi><mi id="S2.E7.m2.7.7.1.1.1.1.1.1.3" xref="S2.E7.m2.7.7.1.1.1.1.1.1.3.cmml">m</mi></msup><mo id="S2.E7.m2.7.7.1.1.2.2.2.5" xref="S2.E7.m2.7.7.1.1.2.2.3.cmml">,</mo><msubsup id="S2.E7.m2.7.7.1.1.2.2.2.2" xref="S2.E7.m2.7.7.1.1.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E7.m2.7.7.1.1.2.2.2.2.2.2" xref="S2.E7.m2.7.7.1.1.2.2.2.2.2.2.cmml">𝒱</mi><mtext id="S2.E7.m2.7.7.1.1.2.2.2.2.3" xref="S2.E7.m2.7.7.1.1.2.2.2.2.3a.cmml">cache</mtext><mi id="S2.E7.m2.7.7.1.1.2.2.2.2.2.3" xref="S2.E7.m2.7.7.1.1.2.2.2.2.2.3.cmml">m</mi></msubsup><mo id="S2.E7.m2.7.7.1.1.2.2.2.6" stretchy="false" xref="S2.E7.m2.7.7.1.1.2.2.3.cmml">]</mo></mrow></mrow></mrow><mo id="S2.E7.m2.7.7.1.2" xref="S2.E7.m2.7.7.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E7.m2.7b"><apply id="S2.E7.m2.7.7.1.1.cmml" xref="S2.E7.m2.7.7.1"><eq id="S2.E7.m2.7.7.1.1.3.cmml" xref="S2.E7.m2.7.7.1.1.3"></eq><csymbol cd="latexml" id="S2.E7.m2.7.7.1.1.4.cmml" xref="S2.E7.m2.7.7.1.1.4">absent</csymbol><apply id="S2.E7.m2.7.7.1.1.2.cmml" xref="S2.E7.m2.7.7.1.1.2"><times id="S2.E7.m2.7.7.1.1.2.3.cmml" xref="S2.E7.m2.7.7.1.1.2.3"></times><ci id="S2.E7.m2.7.7.1.1.2.4a.cmml" xref="S2.E7.m2.7.7.1.1.2.4"><mtext id="S2.E7.m2.7.7.1.1.2.4.cmml" xref="S2.E7.m2.7.7.1.1.2.4">softmax</mtext></ci><apply id="S2.E7.m2.5.5.cmml" xref="S2.E7.m2.7.7.1.1.2.5.2"><divide id="S2.E7.m2.5.5.6.cmml" xref="S2.E7.m2.7.7.1.1.2.5.2"></divide><apply id="S2.E7.m2.5.5.5.cmml" xref="S2.E7.m2.5.5.5"><times id="S2.E7.m2.5.5.5.6.cmml" xref="S2.E7.m2.5.5.5.6"></times><list id="S2.E7.m2.3.3.3.3.2.cmml" xref="S2.E7.m2.3.3.3.3.1"><ci id="S2.E7.m2.1.1.1.1.cmml" xref="S2.E7.m2.1.1.1.1">𝒬</ci><apply id="S2.E7.m2.3.3.3.3.1.1.cmml" xref="S2.E7.m2.3.3.3.3.1.1"><csymbol cd="ambiguous" id="S2.E7.m2.3.3.3.3.1.1.1.cmml" xref="S2.E7.m2.3.3.3.3.1.1">superscript</csymbol><ci id="S2.E7.m2.3.3.3.3.1.1.2.cmml" xref="S2.E7.m2.3.3.3.3.1.1.2">𝒬</ci><ci id="S2.E7.m2.3.3.3.3.1.1.3.cmml" xref="S2.E7.m2.3.3.3.3.1.1.3">𝑚</ci></apply></list><apply id="S2.E7.m2.5.5.5.5.cmml" xref="S2.E7.m2.5.5.5.5"><csymbol cd="ambiguous" id="S2.E7.m2.5.5.5.5.3.cmml" xref="S2.E7.m2.5.5.5.5">superscript</csymbol><list id="S2.E7.m2.5.5.5.5.2.3.cmml" xref="S2.E7.m2.5.5.5.5.2.2"><ci id="S2.E7.m2.2.2.2.2.cmml" xref="S2.E7.m2.2.2.2.2">𝒦</ci><apply id="S2.E7.m2.4.4.4.4.1.1.1.cmml" xref="S2.E7.m2.4.4.4.4.1.1.1"><csymbol cd="ambiguous" id="S2.E7.m2.4.4.4.4.1.1.1.1.cmml" xref="S2.E7.m2.4.4.4.4.1.1.1">superscript</csymbol><ci id="S2.E7.m2.4.4.4.4.1.1.1.2.cmml" xref="S2.E7.m2.4.4.4.4.1.1.1.2">𝒦</ci><ci id="S2.E7.m2.4.4.4.4.1.1.1.3.cmml" xref="S2.E7.m2.4.4.4.4.1.1.1.3">𝑚</ci></apply><apply id="S2.E7.m2.5.5.5.5.2.2.2.cmml" xref="S2.E7.m2.5.5.5.5.2.2.2"><csymbol cd="ambiguous" id="S2.E7.m2.5.5.5.5.2.2.2.1.cmml" xref="S2.E7.m2.5.5.5.5.2.2.2">subscript</csymbol><apply id="S2.E7.m2.5.5.5.5.2.2.2.2.cmml" xref="S2.E7.m2.5.5.5.5.2.2.2"><csymbol cd="ambiguous" id="S2.E7.m2.5.5.5.5.2.2.2.2.1.cmml" xref="S2.E7.m2.5.5.5.5.2.2.2">superscript</csymbol><ci id="S2.E7.m2.5.5.5.5.2.2.2.2.2.cmml" xref="S2.E7.m2.5.5.5.5.2.2.2.2.2">𝒦</ci><ci id="S2.E7.m2.5.5.5.5.2.2.2.2.3.cmml" xref="S2.E7.m2.5.5.5.5.2.2.2.2.3">𝑚</ci></apply><ci id="S2.E7.m2.5.5.5.5.2.2.2.3a.cmml" xref="S2.E7.m2.5.5.5.5.2.2.2.3"><mtext id="S2.E7.m2.5.5.5.5.2.2.2.3.cmml" mathsize="70%" xref="S2.E7.m2.5.5.5.5.2.2.2.3">cache</mtext></ci></apply></list><ci id="S2.E7.m2.5.5.5.5.4.cmml" xref="S2.E7.m2.5.5.5.5.4">𝑇</ci></apply></apply><apply id="S2.E7.m2.5.5.7.cmml" xref="S2.E7.m2.5.5.7"><root id="S2.E7.m2.5.5.7a.cmml" xref="S2.E7.m2.5.5.7"></root><apply id="S2.E7.m2.5.5.7.2.cmml" xref="S2.E7.m2.5.5.7.2"><csymbol cd="ambiguous" id="S2.E7.m2.5.5.7.2.1.cmml" xref="S2.E7.m2.5.5.7.2">subscript</csymbol><ci id="S2.E7.m2.5.5.7.2.2.cmml" xref="S2.E7.m2.5.5.7.2.2">𝑑</ci><ci id="S2.E7.m2.5.5.7.2.3.cmml" xref="S2.E7.m2.5.5.7.2.3">𝑘</ci></apply></apply></apply><list id="S2.E7.m2.7.7.1.1.2.2.3.cmml" xref="S2.E7.m2.7.7.1.1.2.2.2"><ci id="S2.E7.m2.6.6.cmml" xref="S2.E7.m2.6.6">𝒱</ci><apply id="S2.E7.m2.7.7.1.1.1.1.1.1.cmml" xref="S2.E7.m2.7.7.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E7.m2.7.7.1.1.1.1.1.1.1.cmml" xref="S2.E7.m2.7.7.1.1.1.1.1.1">superscript</csymbol><ci id="S2.E7.m2.7.7.1.1.1.1.1.1.2.cmml" xref="S2.E7.m2.7.7.1.1.1.1.1.1.2">𝒱</ci><ci id="S2.E7.m2.7.7.1.1.1.1.1.1.3.cmml" xref="S2.E7.m2.7.7.1.1.1.1.1.1.3">𝑚</ci></apply><apply id="S2.E7.m2.7.7.1.1.2.2.2.2.cmml" xref="S2.E7.m2.7.7.1.1.2.2.2.2"><csymbol cd="ambiguous" id="S2.E7.m2.7.7.1.1.2.2.2.2.1.cmml" xref="S2.E7.m2.7.7.1.1.2.2.2.2">subscript</csymbol><apply id="S2.E7.m2.7.7.1.1.2.2.2.2.2.cmml" xref="S2.E7.m2.7.7.1.1.2.2.2.2"><csymbol cd="ambiguous" id="S2.E7.m2.7.7.1.1.2.2.2.2.2.1.cmml" xref="S2.E7.m2.7.7.1.1.2.2.2.2">superscript</csymbol><ci id="S2.E7.m2.7.7.1.1.2.2.2.2.2.2.cmml" xref="S2.E7.m2.7.7.1.1.2.2.2.2.2.2">𝒱</ci><ci id="S2.E7.m2.7.7.1.1.2.2.2.2.2.3.cmml" xref="S2.E7.m2.7.7.1.1.2.2.2.2.2.3">𝑚</ci></apply><ci id="S2.E7.m2.7.7.1.1.2.2.2.2.3a.cmml" xref="S2.E7.m2.7.7.1.1.2.2.2.2.3"><mtext id="S2.E7.m2.7.7.1.1.2.2.2.2.3.cmml" mathsize="70%" xref="S2.E7.m2.7.7.1.1.2.2.2.2.3">cache</mtext></ci></apply></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E7.m2.7c">\displaystyle=\text{softmax}\left(\frac{[{\mathcal{Q}};{\mathcal{Q}}^{m}][{%
\mathcal{K}};{\mathcal{K}}^{m};{\mathcal{K}}^{m}_{\text{cache}}]^{T}}{\sqrt{d_%
{k}}}\right)[{\mathcal{V}},{\mathcal{V}}^{m},{\mathcal{V}}^{m}_{\text{cache}}],</annotation><annotation encoding="application/x-llamapun" id="S2.E7.m2.7d">= softmax ( divide start_ARG [ caligraphic_Q ; caligraphic_Q start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT ] [ caligraphic_K ; caligraphic_K start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT ; caligraphic_K start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT cache end_POSTSUBSCRIPT ] start_POSTSUPERSCRIPT italic_T end_POSTSUPERSCRIPT end_ARG start_ARG square-root start_ARG italic_d start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT end_ARG end_ARG ) [ caligraphic_V , caligraphic_V start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT , caligraphic_V start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT cache end_POSTSUBSCRIPT ] ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS1.p2.26">where <math alttext="{\mathcal{Q}}^{m}" class="ltx_Math" display="inline" id="S2.SS1.p2.8.m1.1"><semantics id="S2.SS1.p2.8.m1.1a"><msup id="S2.SS1.p2.8.m1.1.1" xref="S2.SS1.p2.8.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.8.m1.1.1.2" xref="S2.SS1.p2.8.m1.1.1.2.cmml">𝒬</mi><mi id="S2.SS1.p2.8.m1.1.1.3" xref="S2.SS1.p2.8.m1.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.8.m1.1b"><apply id="S2.SS1.p2.8.m1.1.1.cmml" xref="S2.SS1.p2.8.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.8.m1.1.1.1.cmml" xref="S2.SS1.p2.8.m1.1.1">superscript</csymbol><ci id="S2.SS1.p2.8.m1.1.1.2.cmml" xref="S2.SS1.p2.8.m1.1.1.2">𝒬</ci><ci id="S2.SS1.p2.8.m1.1.1.3.cmml" xref="S2.SS1.p2.8.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.8.m1.1c">{\mathcal{Q}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.8.m1.1d">caligraphic_Q start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>, <math alttext="{\mathcal{K}}^{m}" class="ltx_Math" display="inline" id="S2.SS1.p2.9.m2.1"><semantics id="S2.SS1.p2.9.m2.1a"><msup id="S2.SS1.p2.9.m2.1.1" xref="S2.SS1.p2.9.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.9.m2.1.1.2" xref="S2.SS1.p2.9.m2.1.1.2.cmml">𝒦</mi><mi id="S2.SS1.p2.9.m2.1.1.3" xref="S2.SS1.p2.9.m2.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.9.m2.1b"><apply id="S2.SS1.p2.9.m2.1.1.cmml" xref="S2.SS1.p2.9.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.9.m2.1.1.1.cmml" xref="S2.SS1.p2.9.m2.1.1">superscript</csymbol><ci id="S2.SS1.p2.9.m2.1.1.2.cmml" xref="S2.SS1.p2.9.m2.1.1.2">𝒦</ci><ci id="S2.SS1.p2.9.m2.1.1.3.cmml" xref="S2.SS1.p2.9.m2.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.9.m2.1c">{\mathcal{K}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.9.m2.1d">caligraphic_K start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>, and <math alttext="{\mathcal{V}}^{m}" class="ltx_Math" display="inline" id="S2.SS1.p2.10.m3.1"><semantics id="S2.SS1.p2.10.m3.1a"><msup id="S2.SS1.p2.10.m3.1.1" xref="S2.SS1.p2.10.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.10.m3.1.1.2" xref="S2.SS1.p2.10.m3.1.1.2.cmml">𝒱</mi><mi id="S2.SS1.p2.10.m3.1.1.3" xref="S2.SS1.p2.10.m3.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.10.m3.1b"><apply id="S2.SS1.p2.10.m3.1.1.cmml" xref="S2.SS1.p2.10.m3.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.10.m3.1.1.1.cmml" xref="S2.SS1.p2.10.m3.1.1">superscript</csymbol><ci id="S2.SS1.p2.10.m3.1.1.2.cmml" xref="S2.SS1.p2.10.m3.1.1.2">𝒱</ci><ci id="S2.SS1.p2.10.m3.1.1.3.cmml" xref="S2.SS1.p2.10.m3.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.10.m3.1c">{\mathcal{V}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.10.m3.1d">caligraphic_V start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> refer to the query, key, and value for the memory tokens <math alttext="x^{m}" class="ltx_Math" display="inline" id="S2.SS1.p2.11.m4.1"><semantics id="S2.SS1.p2.11.m4.1a"><msup id="S2.SS1.p2.11.m4.1.1" xref="S2.SS1.p2.11.m4.1.1.cmml"><mi id="S2.SS1.p2.11.m4.1.1.2" xref="S2.SS1.p2.11.m4.1.1.2.cmml">x</mi><mi id="S2.SS1.p2.11.m4.1.1.3" xref="S2.SS1.p2.11.m4.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.11.m4.1b"><apply id="S2.SS1.p2.11.m4.1.1.cmml" xref="S2.SS1.p2.11.m4.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.11.m4.1.1.1.cmml" xref="S2.SS1.p2.11.m4.1.1">superscript</csymbol><ci id="S2.SS1.p2.11.m4.1.1.2.cmml" xref="S2.SS1.p2.11.m4.1.1.2">𝑥</ci><ci id="S2.SS1.p2.11.m4.1.1.3.cmml" xref="S2.SS1.p2.11.m4.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.11.m4.1c">x^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.11.m4.1d">italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>. <math alttext="{\mathcal{K}}^{m}_{\text{cache}}" class="ltx_Math" display="inline" id="S2.SS1.p2.12.m5.1"><semantics id="S2.SS1.p2.12.m5.1a"><msubsup id="S2.SS1.p2.12.m5.1.1" xref="S2.SS1.p2.12.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.12.m5.1.1.2.2" xref="S2.SS1.p2.12.m5.1.1.2.2.cmml">𝒦</mi><mtext id="S2.SS1.p2.12.m5.1.1.3" xref="S2.SS1.p2.12.m5.1.1.3a.cmml">cache</mtext><mi id="S2.SS1.p2.12.m5.1.1.2.3" xref="S2.SS1.p2.12.m5.1.1.2.3.cmml">m</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.12.m5.1b"><apply id="S2.SS1.p2.12.m5.1.1.cmml" xref="S2.SS1.p2.12.m5.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.12.m5.1.1.1.cmml" xref="S2.SS1.p2.12.m5.1.1">subscript</csymbol><apply id="S2.SS1.p2.12.m5.1.1.2.cmml" xref="S2.SS1.p2.12.m5.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.12.m5.1.1.2.1.cmml" xref="S2.SS1.p2.12.m5.1.1">superscript</csymbol><ci id="S2.SS1.p2.12.m5.1.1.2.2.cmml" xref="S2.SS1.p2.12.m5.1.1.2.2">𝒦</ci><ci id="S2.SS1.p2.12.m5.1.1.2.3.cmml" xref="S2.SS1.p2.12.m5.1.1.2.3">𝑚</ci></apply><ci id="S2.SS1.p2.12.m5.1.1.3a.cmml" xref="S2.SS1.p2.12.m5.1.1.3"><mtext id="S2.SS1.p2.12.m5.1.1.3.cmml" mathsize="70%" xref="S2.SS1.p2.12.m5.1.1.3">cache</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.12.m5.1c">{\mathcal{K}}^{m}_{\text{cache}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.12.m5.1d">caligraphic_K start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT cache end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="{\mathcal{V}}^{m}_{\text{cache}}" class="ltx_Math" display="inline" id="S2.SS1.p2.13.m6.1"><semantics id="S2.SS1.p2.13.m6.1a"><msubsup id="S2.SS1.p2.13.m6.1.1" xref="S2.SS1.p2.13.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.13.m6.1.1.2.2" xref="S2.SS1.p2.13.m6.1.1.2.2.cmml">𝒱</mi><mtext id="S2.SS1.p2.13.m6.1.1.3" xref="S2.SS1.p2.13.m6.1.1.3a.cmml">cache</mtext><mi id="S2.SS1.p2.13.m6.1.1.2.3" xref="S2.SS1.p2.13.m6.1.1.2.3.cmml">m</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.13.m6.1b"><apply id="S2.SS1.p2.13.m6.1.1.cmml" xref="S2.SS1.p2.13.m6.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.13.m6.1.1.1.cmml" xref="S2.SS1.p2.13.m6.1.1">subscript</csymbol><apply id="S2.SS1.p2.13.m6.1.1.2.cmml" xref="S2.SS1.p2.13.m6.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.13.m6.1.1.2.1.cmml" xref="S2.SS1.p2.13.m6.1.1">superscript</csymbol><ci id="S2.SS1.p2.13.m6.1.1.2.2.cmml" xref="S2.SS1.p2.13.m6.1.1.2.2">𝒱</ci><ci id="S2.SS1.p2.13.m6.1.1.2.3.cmml" xref="S2.SS1.p2.13.m6.1.1.2.3">𝑚</ci></apply><ci id="S2.SS1.p2.13.m6.1.1.3a.cmml" xref="S2.SS1.p2.13.m6.1.1.3"><mtext id="S2.SS1.p2.13.m6.1.1.3.cmml" mathsize="70%" xref="S2.SS1.p2.13.m6.1.1.3">cache</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.13.m6.1c">{\mathcal{V}}^{m}_{\text{cache}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.13.m6.1d">caligraphic_V start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT cache end_POSTSUBSCRIPT</annotation></semantics></math> refer to the KV cache of previous memory tokens. We denote the memory tokens as <math alttext="\bm{{\mathcal{X}}}^{m}" class="ltx_Math" display="inline" id="S2.SS1.p2.14.m7.1"><semantics id="S2.SS1.p2.14.m7.1a"><msup id="S2.SS1.p2.14.m7.1.1" xref="S2.SS1.p2.14.m7.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.14.m7.1.1.2" xref="S2.SS1.p2.14.m7.1.1.2.cmml">𝓧</mi><mi id="S2.SS1.p2.14.m7.1.1.3" xref="S2.SS1.p2.14.m7.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.14.m7.1b"><apply id="S2.SS1.p2.14.m7.1.1.cmml" xref="S2.SS1.p2.14.m7.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.14.m7.1.1.1.cmml" xref="S2.SS1.p2.14.m7.1.1">superscript</csymbol><ci id="S2.SS1.p2.14.m7.1.1.2.cmml" xref="S2.SS1.p2.14.m7.1.1.2">𝓧</ci><ci id="S2.SS1.p2.14.m7.1.1.3.cmml" xref="S2.SS1.p2.14.m7.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.14.m7.1c">\bm{{\mathcal{X}}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.14.m7.1d">bold_caligraphic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> and the conversion process as <math alttext="\bm{{\mathcal{X}}}^{m}=\Theta_{\text{mem}}(\bm{{\mathcal{X}}})" class="ltx_Math" display="inline" id="S2.SS1.p2.15.m8.1"><semantics id="S2.SS1.p2.15.m8.1a"><mrow id="S2.SS1.p2.15.m8.1.2" xref="S2.SS1.p2.15.m8.1.2.cmml"><msup id="S2.SS1.p2.15.m8.1.2.2" xref="S2.SS1.p2.15.m8.1.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.15.m8.1.2.2.2" xref="S2.SS1.p2.15.m8.1.2.2.2.cmml">𝓧</mi><mi id="S2.SS1.p2.15.m8.1.2.2.3" xref="S2.SS1.p2.15.m8.1.2.2.3.cmml">m</mi></msup><mo id="S2.SS1.p2.15.m8.1.2.1" xref="S2.SS1.p2.15.m8.1.2.1.cmml">=</mo><mrow id="S2.SS1.p2.15.m8.1.2.3" xref="S2.SS1.p2.15.m8.1.2.3.cmml"><msub id="S2.SS1.p2.15.m8.1.2.3.2" xref="S2.SS1.p2.15.m8.1.2.3.2.cmml"><mi id="S2.SS1.p2.15.m8.1.2.3.2.2" mathvariant="normal" xref="S2.SS1.p2.15.m8.1.2.3.2.2.cmml">Θ</mi><mtext id="S2.SS1.p2.15.m8.1.2.3.2.3" xref="S2.SS1.p2.15.m8.1.2.3.2.3a.cmml">mem</mtext></msub><mo id="S2.SS1.p2.15.m8.1.2.3.1" xref="S2.SS1.p2.15.m8.1.2.3.1.cmml">⁢</mo><mrow id="S2.SS1.p2.15.m8.1.2.3.3.2" xref="S2.SS1.p2.15.m8.1.2.3.cmml"><mo id="S2.SS1.p2.15.m8.1.2.3.3.2.1" stretchy="false" xref="S2.SS1.p2.15.m8.1.2.3.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.15.m8.1.1" xref="S2.SS1.p2.15.m8.1.1.cmml">𝓧</mi><mo id="S2.SS1.p2.15.m8.1.2.3.3.2.2" stretchy="false" xref="S2.SS1.p2.15.m8.1.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.15.m8.1b"><apply id="S2.SS1.p2.15.m8.1.2.cmml" xref="S2.SS1.p2.15.m8.1.2"><eq id="S2.SS1.p2.15.m8.1.2.1.cmml" xref="S2.SS1.p2.15.m8.1.2.1"></eq><apply id="S2.SS1.p2.15.m8.1.2.2.cmml" xref="S2.SS1.p2.15.m8.1.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.15.m8.1.2.2.1.cmml" xref="S2.SS1.p2.15.m8.1.2.2">superscript</csymbol><ci id="S2.SS1.p2.15.m8.1.2.2.2.cmml" xref="S2.SS1.p2.15.m8.1.2.2.2">𝓧</ci><ci id="S2.SS1.p2.15.m8.1.2.2.3.cmml" xref="S2.SS1.p2.15.m8.1.2.2.3">𝑚</ci></apply><apply id="S2.SS1.p2.15.m8.1.2.3.cmml" xref="S2.SS1.p2.15.m8.1.2.3"><times id="S2.SS1.p2.15.m8.1.2.3.1.cmml" xref="S2.SS1.p2.15.m8.1.2.3.1"></times><apply id="S2.SS1.p2.15.m8.1.2.3.2.cmml" xref="S2.SS1.p2.15.m8.1.2.3.2"><csymbol cd="ambiguous" id="S2.SS1.p2.15.m8.1.2.3.2.1.cmml" xref="S2.SS1.p2.15.m8.1.2.3.2">subscript</csymbol><ci id="S2.SS1.p2.15.m8.1.2.3.2.2.cmml" xref="S2.SS1.p2.15.m8.1.2.3.2.2">Θ</ci><ci id="S2.SS1.p2.15.m8.1.2.3.2.3a.cmml" xref="S2.SS1.p2.15.m8.1.2.3.2.3"><mtext id="S2.SS1.p2.15.m8.1.2.3.2.3.cmml" mathsize="70%" xref="S2.SS1.p2.15.m8.1.2.3.2.3">mem</mtext></ci></apply><ci id="S2.SS1.p2.15.m8.1.1.cmml" xref="S2.SS1.p2.15.m8.1.1">𝓧</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.15.m8.1c">\bm{{\mathcal{X}}}^{m}=\Theta_{\text{mem}}(\bm{{\mathcal{X}}})</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.15.m8.1d">bold_caligraphic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT = roman_Θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT ( bold_caligraphic_X )</annotation></semantics></math>. For <math alttext="l" class="ltx_Math" display="inline" id="S2.SS1.p2.16.m9.1"><semantics id="S2.SS1.p2.16.m9.1a"><mi id="S2.SS1.p2.16.m9.1.1" xref="S2.SS1.p2.16.m9.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.16.m9.1b"><ci id="S2.SS1.p2.16.m9.1.1.cmml" xref="S2.SS1.p2.16.m9.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.16.m9.1c">l</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.16.m9.1d">italic_l</annotation></semantics></math> raw tokens <math alttext="\{x_{1},\cdots,x_{l}\}" class="ltx_Math" display="inline" id="S2.SS1.p2.17.m10.3"><semantics id="S2.SS1.p2.17.m10.3a"><mrow id="S2.SS1.p2.17.m10.3.3.2" xref="S2.SS1.p2.17.m10.3.3.3.cmml"><mo id="S2.SS1.p2.17.m10.3.3.2.3" stretchy="false" xref="S2.SS1.p2.17.m10.3.3.3.cmml">{</mo><msub id="S2.SS1.p2.17.m10.2.2.1.1" xref="S2.SS1.p2.17.m10.2.2.1.1.cmml"><mi id="S2.SS1.p2.17.m10.2.2.1.1.2" xref="S2.SS1.p2.17.m10.2.2.1.1.2.cmml">x</mi><mn id="S2.SS1.p2.17.m10.2.2.1.1.3" xref="S2.SS1.p2.17.m10.2.2.1.1.3.cmml">1</mn></msub><mo id="S2.SS1.p2.17.m10.3.3.2.4" xref="S2.SS1.p2.17.m10.3.3.3.cmml">,</mo><mi id="S2.SS1.p2.17.m10.1.1" mathvariant="normal" xref="S2.SS1.p2.17.m10.1.1.cmml">⋯</mi><mo id="S2.SS1.p2.17.m10.3.3.2.5" xref="S2.SS1.p2.17.m10.3.3.3.cmml">,</mo><msub id="S2.SS1.p2.17.m10.3.3.2.2" xref="S2.SS1.p2.17.m10.3.3.2.2.cmml"><mi id="S2.SS1.p2.17.m10.3.3.2.2.2" xref="S2.SS1.p2.17.m10.3.3.2.2.2.cmml">x</mi><mi id="S2.SS1.p2.17.m10.3.3.2.2.3" xref="S2.SS1.p2.17.m10.3.3.2.2.3.cmml">l</mi></msub><mo id="S2.SS1.p2.17.m10.3.3.2.6" stretchy="false" xref="S2.SS1.p2.17.m10.3.3.3.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.17.m10.3b"><set id="S2.SS1.p2.17.m10.3.3.3.cmml" xref="S2.SS1.p2.17.m10.3.3.2"><apply id="S2.SS1.p2.17.m10.2.2.1.1.cmml" xref="S2.SS1.p2.17.m10.2.2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.17.m10.2.2.1.1.1.cmml" xref="S2.SS1.p2.17.m10.2.2.1.1">subscript</csymbol><ci id="S2.SS1.p2.17.m10.2.2.1.1.2.cmml" xref="S2.SS1.p2.17.m10.2.2.1.1.2">𝑥</ci><cn id="S2.SS1.p2.17.m10.2.2.1.1.3.cmml" type="integer" xref="S2.SS1.p2.17.m10.2.2.1.1.3">1</cn></apply><ci id="S2.SS1.p2.17.m10.1.1.cmml" xref="S2.SS1.p2.17.m10.1.1">⋯</ci><apply id="S2.SS1.p2.17.m10.3.3.2.2.cmml" xref="S2.SS1.p2.17.m10.3.3.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.17.m10.3.3.2.2.1.cmml" xref="S2.SS1.p2.17.m10.3.3.2.2">subscript</csymbol><ci id="S2.SS1.p2.17.m10.3.3.2.2.2.cmml" xref="S2.SS1.p2.17.m10.3.3.2.2.2">𝑥</ci><ci id="S2.SS1.p2.17.m10.3.3.2.2.3.cmml" xref="S2.SS1.p2.17.m10.3.3.2.2.3">𝑙</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.17.m10.3c">\{x_{1},\cdots,x_{l}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.17.m10.3d">{ italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , italic_x start_POSTSUBSCRIPT italic_l end_POSTSUBSCRIPT }</annotation></semantics></math>, after multiple attentive processes defined by Eq. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.E7" title="In 2.1 Memory Module ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">7</span></a>), they are encoded into hidden states <math alttext="\bm{{\mathcal{X}}}_{[0:l]}=\{\bm{x}_{1},\cdots,\bm{x}_{l},\bm{x}^{m}_{1},%
\cdots,\bm{x}^{m}_{k}\}" class="ltx_Math" display="inline" id="S2.SS1.p2.18.m11.7"><semantics id="S2.SS1.p2.18.m11.7a"><mrow id="S2.SS1.p2.18.m11.7.7" xref="S2.SS1.p2.18.m11.7.7.cmml"><msub id="S2.SS1.p2.18.m11.7.7.6" xref="S2.SS1.p2.18.m11.7.7.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.18.m11.7.7.6.2" xref="S2.SS1.p2.18.m11.7.7.6.2.cmml">𝓧</mi><mrow id="S2.SS1.p2.18.m11.1.1.1.1" xref="S2.SS1.p2.18.m11.1.1.1.2.cmml"><mo id="S2.SS1.p2.18.m11.1.1.1.1.2" stretchy="false" xref="S2.SS1.p2.18.m11.1.1.1.2.1.cmml">[</mo><mrow id="S2.SS1.p2.18.m11.1.1.1.1.1" xref="S2.SS1.p2.18.m11.1.1.1.1.1.cmml"><mn id="S2.SS1.p2.18.m11.1.1.1.1.1.2" xref="S2.SS1.p2.18.m11.1.1.1.1.1.2.cmml">0</mn><mo id="S2.SS1.p2.18.m11.1.1.1.1.1.1" lspace="0.278em" rspace="0.278em" xref="S2.SS1.p2.18.m11.1.1.1.1.1.1.cmml">:</mo><mi id="S2.SS1.p2.18.m11.1.1.1.1.1.3" xref="S2.SS1.p2.18.m11.1.1.1.1.1.3.cmml">l</mi></mrow><mo id="S2.SS1.p2.18.m11.1.1.1.1.3" stretchy="false" xref="S2.SS1.p2.18.m11.1.1.1.2.1.cmml">]</mo></mrow></msub><mo id="S2.SS1.p2.18.m11.7.7.5" xref="S2.SS1.p2.18.m11.7.7.5.cmml">=</mo><mrow id="S2.SS1.p2.18.m11.7.7.4.4" xref="S2.SS1.p2.18.m11.7.7.4.5.cmml"><mo id="S2.SS1.p2.18.m11.7.7.4.4.5" stretchy="false" xref="S2.SS1.p2.18.m11.7.7.4.5.cmml">{</mo><msub id="S2.SS1.p2.18.m11.4.4.1.1.1" xref="S2.SS1.p2.18.m11.4.4.1.1.1.cmml"><mi id="S2.SS1.p2.18.m11.4.4.1.1.1.2" xref="S2.SS1.p2.18.m11.4.4.1.1.1.2.cmml">𝒙</mi><mn id="S2.SS1.p2.18.m11.4.4.1.1.1.3" xref="S2.SS1.p2.18.m11.4.4.1.1.1.3.cmml">1</mn></msub><mo id="S2.SS1.p2.18.m11.7.7.4.4.6" xref="S2.SS1.p2.18.m11.7.7.4.5.cmml">,</mo><mi id="S2.SS1.p2.18.m11.2.2" mathvariant="normal" xref="S2.SS1.p2.18.m11.2.2.cmml">⋯</mi><mo id="S2.SS1.p2.18.m11.7.7.4.4.7" xref="S2.SS1.p2.18.m11.7.7.4.5.cmml">,</mo><msub id="S2.SS1.p2.18.m11.5.5.2.2.2" xref="S2.SS1.p2.18.m11.5.5.2.2.2.cmml"><mi id="S2.SS1.p2.18.m11.5.5.2.2.2.2" xref="S2.SS1.p2.18.m11.5.5.2.2.2.2.cmml">𝒙</mi><mi id="S2.SS1.p2.18.m11.5.5.2.2.2.3" xref="S2.SS1.p2.18.m11.5.5.2.2.2.3.cmml">l</mi></msub><mo id="S2.SS1.p2.18.m11.7.7.4.4.8" xref="S2.SS1.p2.18.m11.7.7.4.5.cmml">,</mo><msubsup id="S2.SS1.p2.18.m11.6.6.3.3.3" xref="S2.SS1.p2.18.m11.6.6.3.3.3.cmml"><mi id="S2.SS1.p2.18.m11.6.6.3.3.3.2.2" xref="S2.SS1.p2.18.m11.6.6.3.3.3.2.2.cmml">𝒙</mi><mn id="S2.SS1.p2.18.m11.6.6.3.3.3.3" xref="S2.SS1.p2.18.m11.6.6.3.3.3.3.cmml">1</mn><mi id="S2.SS1.p2.18.m11.6.6.3.3.3.2.3" xref="S2.SS1.p2.18.m11.6.6.3.3.3.2.3.cmml">m</mi></msubsup><mo id="S2.SS1.p2.18.m11.7.7.4.4.9" xref="S2.SS1.p2.18.m11.7.7.4.5.cmml">,</mo><mi id="S2.SS1.p2.18.m11.3.3" mathvariant="normal" xref="S2.SS1.p2.18.m11.3.3.cmml">⋯</mi><mo id="S2.SS1.p2.18.m11.7.7.4.4.10" xref="S2.SS1.p2.18.m11.7.7.4.5.cmml">,</mo><msubsup id="S2.SS1.p2.18.m11.7.7.4.4.4" xref="S2.SS1.p2.18.m11.7.7.4.4.4.cmml"><mi id="S2.SS1.p2.18.m11.7.7.4.4.4.2.2" xref="S2.SS1.p2.18.m11.7.7.4.4.4.2.2.cmml">𝒙</mi><mi id="S2.SS1.p2.18.m11.7.7.4.4.4.3" xref="S2.SS1.p2.18.m11.7.7.4.4.4.3.cmml">k</mi><mi id="S2.SS1.p2.18.m11.7.7.4.4.4.2.3" xref="S2.SS1.p2.18.m11.7.7.4.4.4.2.3.cmml">m</mi></msubsup><mo id="S2.SS1.p2.18.m11.7.7.4.4.11" stretchy="false" xref="S2.SS1.p2.18.m11.7.7.4.5.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.18.m11.7b"><apply id="S2.SS1.p2.18.m11.7.7.cmml" xref="S2.SS1.p2.18.m11.7.7"><eq id="S2.SS1.p2.18.m11.7.7.5.cmml" xref="S2.SS1.p2.18.m11.7.7.5"></eq><apply id="S2.SS1.p2.18.m11.7.7.6.cmml" xref="S2.SS1.p2.18.m11.7.7.6"><csymbol cd="ambiguous" id="S2.SS1.p2.18.m11.7.7.6.1.cmml" xref="S2.SS1.p2.18.m11.7.7.6">subscript</csymbol><ci id="S2.SS1.p2.18.m11.7.7.6.2.cmml" xref="S2.SS1.p2.18.m11.7.7.6.2">𝓧</ci><apply id="S2.SS1.p2.18.m11.1.1.1.2.cmml" xref="S2.SS1.p2.18.m11.1.1.1.1"><csymbol cd="latexml" id="S2.SS1.p2.18.m11.1.1.1.2.1.cmml" xref="S2.SS1.p2.18.m11.1.1.1.1.2">delimited-[]</csymbol><apply id="S2.SS1.p2.18.m11.1.1.1.1.1.cmml" xref="S2.SS1.p2.18.m11.1.1.1.1.1"><ci id="S2.SS1.p2.18.m11.1.1.1.1.1.1.cmml" xref="S2.SS1.p2.18.m11.1.1.1.1.1.1">:</ci><cn id="S2.SS1.p2.18.m11.1.1.1.1.1.2.cmml" type="integer" xref="S2.SS1.p2.18.m11.1.1.1.1.1.2">0</cn><ci id="S2.SS1.p2.18.m11.1.1.1.1.1.3.cmml" xref="S2.SS1.p2.18.m11.1.1.1.1.1.3">𝑙</ci></apply></apply></apply><set id="S2.SS1.p2.18.m11.7.7.4.5.cmml" xref="S2.SS1.p2.18.m11.7.7.4.4"><apply id="S2.SS1.p2.18.m11.4.4.1.1.1.cmml" xref="S2.SS1.p2.18.m11.4.4.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.18.m11.4.4.1.1.1.1.cmml" xref="S2.SS1.p2.18.m11.4.4.1.1.1">subscript</csymbol><ci id="S2.SS1.p2.18.m11.4.4.1.1.1.2.cmml" xref="S2.SS1.p2.18.m11.4.4.1.1.1.2">𝒙</ci><cn id="S2.SS1.p2.18.m11.4.4.1.1.1.3.cmml" type="integer" xref="S2.SS1.p2.18.m11.4.4.1.1.1.3">1</cn></apply><ci id="S2.SS1.p2.18.m11.2.2.cmml" xref="S2.SS1.p2.18.m11.2.2">⋯</ci><apply id="S2.SS1.p2.18.m11.5.5.2.2.2.cmml" xref="S2.SS1.p2.18.m11.5.5.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.18.m11.5.5.2.2.2.1.cmml" xref="S2.SS1.p2.18.m11.5.5.2.2.2">subscript</csymbol><ci id="S2.SS1.p2.18.m11.5.5.2.2.2.2.cmml" xref="S2.SS1.p2.18.m11.5.5.2.2.2.2">𝒙</ci><ci id="S2.SS1.p2.18.m11.5.5.2.2.2.3.cmml" xref="S2.SS1.p2.18.m11.5.5.2.2.2.3">𝑙</ci></apply><apply id="S2.SS1.p2.18.m11.6.6.3.3.3.cmml" xref="S2.SS1.p2.18.m11.6.6.3.3.3"><csymbol cd="ambiguous" id="S2.SS1.p2.18.m11.6.6.3.3.3.1.cmml" xref="S2.SS1.p2.18.m11.6.6.3.3.3">subscript</csymbol><apply id="S2.SS1.p2.18.m11.6.6.3.3.3.2.cmml" xref="S2.SS1.p2.18.m11.6.6.3.3.3"><csymbol cd="ambiguous" id="S2.SS1.p2.18.m11.6.6.3.3.3.2.1.cmml" xref="S2.SS1.p2.18.m11.6.6.3.3.3">superscript</csymbol><ci id="S2.SS1.p2.18.m11.6.6.3.3.3.2.2.cmml" xref="S2.SS1.p2.18.m11.6.6.3.3.3.2.2">𝒙</ci><ci id="S2.SS1.p2.18.m11.6.6.3.3.3.2.3.cmml" xref="S2.SS1.p2.18.m11.6.6.3.3.3.2.3">𝑚</ci></apply><cn id="S2.SS1.p2.18.m11.6.6.3.3.3.3.cmml" type="integer" xref="S2.SS1.p2.18.m11.6.6.3.3.3.3">1</cn></apply><ci id="S2.SS1.p2.18.m11.3.3.cmml" xref="S2.SS1.p2.18.m11.3.3">⋯</ci><apply id="S2.SS1.p2.18.m11.7.7.4.4.4.cmml" xref="S2.SS1.p2.18.m11.7.7.4.4.4"><csymbol cd="ambiguous" id="S2.SS1.p2.18.m11.7.7.4.4.4.1.cmml" xref="S2.SS1.p2.18.m11.7.7.4.4.4">subscript</csymbol><apply id="S2.SS1.p2.18.m11.7.7.4.4.4.2.cmml" xref="S2.SS1.p2.18.m11.7.7.4.4.4"><csymbol cd="ambiguous" id="S2.SS1.p2.18.m11.7.7.4.4.4.2.1.cmml" xref="S2.SS1.p2.18.m11.7.7.4.4.4">superscript</csymbol><ci id="S2.SS1.p2.18.m11.7.7.4.4.4.2.2.cmml" xref="S2.SS1.p2.18.m11.7.7.4.4.4.2.2">𝒙</ci><ci id="S2.SS1.p2.18.m11.7.7.4.4.4.2.3.cmml" xref="S2.SS1.p2.18.m11.7.7.4.4.4.2.3">𝑚</ci></apply><ci id="S2.SS1.p2.18.m11.7.7.4.4.4.3.cmml" xref="S2.SS1.p2.18.m11.7.7.4.4.4.3">𝑘</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.18.m11.7c">\bm{{\mathcal{X}}}_{[0:l]}=\{\bm{x}_{1},\cdots,\bm{x}_{l},\bm{x}^{m}_{1},%
\cdots,\bm{x}^{m}_{k}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.18.m11.7d">bold_caligraphic_X start_POSTSUBSCRIPT [ 0 : italic_l ] end_POSTSUBSCRIPT = { bold_italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , bold_italic_x start_POSTSUBSCRIPT italic_l end_POSTSUBSCRIPT , bold_italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , bold_italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT }</annotation></semantics></math>, where <math alttext="\{\bm{x}_{1},\cdots,\bm{x}_{l}\}" class="ltx_Math" display="inline" id="S2.SS1.p2.19.m12.3"><semantics id="S2.SS1.p2.19.m12.3a"><mrow id="S2.SS1.p2.19.m12.3.3.2" xref="S2.SS1.p2.19.m12.3.3.3.cmml"><mo id="S2.SS1.p2.19.m12.3.3.2.3" stretchy="false" xref="S2.SS1.p2.19.m12.3.3.3.cmml">{</mo><msub id="S2.SS1.p2.19.m12.2.2.1.1" xref="S2.SS1.p2.19.m12.2.2.1.1.cmml"><mi id="S2.SS1.p2.19.m12.2.2.1.1.2" xref="S2.SS1.p2.19.m12.2.2.1.1.2.cmml">𝒙</mi><mn id="S2.SS1.p2.19.m12.2.2.1.1.3" xref="S2.SS1.p2.19.m12.2.2.1.1.3.cmml">1</mn></msub><mo id="S2.SS1.p2.19.m12.3.3.2.4" xref="S2.SS1.p2.19.m12.3.3.3.cmml">,</mo><mi id="S2.SS1.p2.19.m12.1.1" mathvariant="normal" xref="S2.SS1.p2.19.m12.1.1.cmml">⋯</mi><mo id="S2.SS1.p2.19.m12.3.3.2.5" xref="S2.SS1.p2.19.m12.3.3.3.cmml">,</mo><msub id="S2.SS1.p2.19.m12.3.3.2.2" xref="S2.SS1.p2.19.m12.3.3.2.2.cmml"><mi id="S2.SS1.p2.19.m12.3.3.2.2.2" xref="S2.SS1.p2.19.m12.3.3.2.2.2.cmml">𝒙</mi><mi id="S2.SS1.p2.19.m12.3.3.2.2.3" xref="S2.SS1.p2.19.m12.3.3.2.2.3.cmml">l</mi></msub><mo id="S2.SS1.p2.19.m12.3.3.2.6" stretchy="false" xref="S2.SS1.p2.19.m12.3.3.3.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.19.m12.3b"><set id="S2.SS1.p2.19.m12.3.3.3.cmml" xref="S2.SS1.p2.19.m12.3.3.2"><apply id="S2.SS1.p2.19.m12.2.2.1.1.cmml" xref="S2.SS1.p2.19.m12.2.2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.19.m12.2.2.1.1.1.cmml" xref="S2.SS1.p2.19.m12.2.2.1.1">subscript</csymbol><ci id="S2.SS1.p2.19.m12.2.2.1.1.2.cmml" xref="S2.SS1.p2.19.m12.2.2.1.1.2">𝒙</ci><cn id="S2.SS1.p2.19.m12.2.2.1.1.3.cmml" type="integer" xref="S2.SS1.p2.19.m12.2.2.1.1.3">1</cn></apply><ci id="S2.SS1.p2.19.m12.1.1.cmml" xref="S2.SS1.p2.19.m12.1.1">⋯</ci><apply id="S2.SS1.p2.19.m12.3.3.2.2.cmml" xref="S2.SS1.p2.19.m12.3.3.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.19.m12.3.3.2.2.1.cmml" xref="S2.SS1.p2.19.m12.3.3.2.2">subscript</csymbol><ci id="S2.SS1.p2.19.m12.3.3.2.2.2.cmml" xref="S2.SS1.p2.19.m12.3.3.2.2.2">𝒙</ci><ci id="S2.SS1.p2.19.m12.3.3.2.2.3.cmml" xref="S2.SS1.p2.19.m12.3.3.2.2.3">𝑙</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.19.m12.3c">\{\bm{x}_{1},\cdots,\bm{x}_{l}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.19.m12.3d">{ bold_italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , bold_italic_x start_POSTSUBSCRIPT italic_l end_POSTSUBSCRIPT }</annotation></semantics></math> represent the raw tokens’ hidden states and <math alttext="\{\bm{x}^{m}_{1},\cdots,\bm{x}^{m}_{k}\}" class="ltx_Math" display="inline" id="S2.SS1.p2.20.m13.3"><semantics id="S2.SS1.p2.20.m13.3a"><mrow id="S2.SS1.p2.20.m13.3.3.2" xref="S2.SS1.p2.20.m13.3.3.3.cmml"><mo id="S2.SS1.p2.20.m13.3.3.2.3" stretchy="false" xref="S2.SS1.p2.20.m13.3.3.3.cmml">{</mo><msubsup id="S2.SS1.p2.20.m13.2.2.1.1" xref="S2.SS1.p2.20.m13.2.2.1.1.cmml"><mi id="S2.SS1.p2.20.m13.2.2.1.1.2.2" xref="S2.SS1.p2.20.m13.2.2.1.1.2.2.cmml">𝒙</mi><mn id="S2.SS1.p2.20.m13.2.2.1.1.3" xref="S2.SS1.p2.20.m13.2.2.1.1.3.cmml">1</mn><mi id="S2.SS1.p2.20.m13.2.2.1.1.2.3" xref="S2.SS1.p2.20.m13.2.2.1.1.2.3.cmml">m</mi></msubsup><mo id="S2.SS1.p2.20.m13.3.3.2.4" xref="S2.SS1.p2.20.m13.3.3.3.cmml">,</mo><mi id="S2.SS1.p2.20.m13.1.1" mathvariant="normal" xref="S2.SS1.p2.20.m13.1.1.cmml">⋯</mi><mo id="S2.SS1.p2.20.m13.3.3.2.5" xref="S2.SS1.p2.20.m13.3.3.3.cmml">,</mo><msubsup id="S2.SS1.p2.20.m13.3.3.2.2" xref="S2.SS1.p2.20.m13.3.3.2.2.cmml"><mi id="S2.SS1.p2.20.m13.3.3.2.2.2.2" xref="S2.SS1.p2.20.m13.3.3.2.2.2.2.cmml">𝒙</mi><mi id="S2.SS1.p2.20.m13.3.3.2.2.3" xref="S2.SS1.p2.20.m13.3.3.2.2.3.cmml">k</mi><mi id="S2.SS1.p2.20.m13.3.3.2.2.2.3" xref="S2.SS1.p2.20.m13.3.3.2.2.2.3.cmml">m</mi></msubsup><mo id="S2.SS1.p2.20.m13.3.3.2.6" stretchy="false" xref="S2.SS1.p2.20.m13.3.3.3.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.20.m13.3b"><set id="S2.SS1.p2.20.m13.3.3.3.cmml" xref="S2.SS1.p2.20.m13.3.3.2"><apply id="S2.SS1.p2.20.m13.2.2.1.1.cmml" xref="S2.SS1.p2.20.m13.2.2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.20.m13.2.2.1.1.1.cmml" xref="S2.SS1.p2.20.m13.2.2.1.1">subscript</csymbol><apply id="S2.SS1.p2.20.m13.2.2.1.1.2.cmml" xref="S2.SS1.p2.20.m13.2.2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.20.m13.2.2.1.1.2.1.cmml" xref="S2.SS1.p2.20.m13.2.2.1.1">superscript</csymbol><ci id="S2.SS1.p2.20.m13.2.2.1.1.2.2.cmml" xref="S2.SS1.p2.20.m13.2.2.1.1.2.2">𝒙</ci><ci id="S2.SS1.p2.20.m13.2.2.1.1.2.3.cmml" xref="S2.SS1.p2.20.m13.2.2.1.1.2.3">𝑚</ci></apply><cn id="S2.SS1.p2.20.m13.2.2.1.1.3.cmml" type="integer" xref="S2.SS1.p2.20.m13.2.2.1.1.3">1</cn></apply><ci id="S2.SS1.p2.20.m13.1.1.cmml" xref="S2.SS1.p2.20.m13.1.1">⋯</ci><apply id="S2.SS1.p2.20.m13.3.3.2.2.cmml" xref="S2.SS1.p2.20.m13.3.3.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.20.m13.3.3.2.2.1.cmml" xref="S2.SS1.p2.20.m13.3.3.2.2">subscript</csymbol><apply id="S2.SS1.p2.20.m13.3.3.2.2.2.cmml" xref="S2.SS1.p2.20.m13.3.3.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.20.m13.3.3.2.2.2.1.cmml" xref="S2.SS1.p2.20.m13.3.3.2.2">superscript</csymbol><ci id="S2.SS1.p2.20.m13.3.3.2.2.2.2.cmml" xref="S2.SS1.p2.20.m13.3.3.2.2.2.2">𝒙</ci><ci id="S2.SS1.p2.20.m13.3.3.2.2.2.3.cmml" xref="S2.SS1.p2.20.m13.3.3.2.2.2.3">𝑚</ci></apply><ci id="S2.SS1.p2.20.m13.3.3.2.2.3.cmml" xref="S2.SS1.p2.20.m13.3.3.2.2.3">𝑘</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.20.m13.3c">\{\bm{x}^{m}_{1},\cdots,\bm{x}^{m}_{k}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.20.m13.3d">{ bold_italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , ⋯ , bold_italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_k end_POSTSUBSCRIPT }</annotation></semantics></math> represent the memory tokens’ hidden states. After the formation of memory, the KV cache of the <math alttext="l" class="ltx_Math" display="inline" id="S2.SS1.p2.21.m14.1"><semantics id="S2.SS1.p2.21.m14.1a"><mi id="S2.SS1.p2.21.m14.1.1" xref="S2.SS1.p2.21.m14.1.1.cmml">l</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.21.m14.1b"><ci id="S2.SS1.p2.21.m14.1.1.cmml" xref="S2.SS1.p2.21.m14.1.1">𝑙</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.21.m14.1c">l</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.21.m14.1d">italic_l</annotation></semantics></math> raw tokens is discarded, similar to the forgetting process in human memory.
After <math alttext="n" class="ltx_Math" display="inline" id="S2.SS1.p2.22.m15.1"><semantics id="S2.SS1.p2.22.m15.1a"><mi id="S2.SS1.p2.22.m15.1.1" xref="S2.SS1.p2.22.m15.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.22.m15.1b"><ci id="S2.SS1.p2.22.m15.1.1.cmml" xref="S2.SS1.p2.22.m15.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.22.m15.1c">n</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.22.m15.1d">italic_n</annotation></semantics></math> context windows, MemoRAG progressively converts all raw tokens in <math alttext="{\mathcal{X}}" class="ltx_Math" display="inline" id="S2.SS1.p2.23.m16.1"><semantics id="S2.SS1.p2.23.m16.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.23.m16.1.1" xref="S2.SS1.p2.23.m16.1.1.cmml">𝒳</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.23.m16.1b"><ci id="S2.SS1.p2.23.m16.1.1.cmml" xref="S2.SS1.p2.23.m16.1.1">𝒳</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.23.m16.1c">{\mathcal{X}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.23.m16.1d">caligraphic_X</annotation></semantics></math> into memory tokens. Thus, we have <math alttext="\Theta({\mathcal{X}})\rightarrow\Theta_{\text{mem}}(\bm{{\mathcal{X}}})=\{\bm{%
x}^{m}_{1,1},\cdots,\bm{x}^{m}_{1,k},\cdots,\bm{x}^{m}_{n,k}\}" class="ltx_Math" display="inline" id="S2.SS1.p2.24.m17.13"><semantics id="S2.SS1.p2.24.m17.13a"><mrow id="S2.SS1.p2.24.m17.13.13" xref="S2.SS1.p2.24.m17.13.13.cmml"><mrow id="S2.SS1.p2.24.m17.13.13.5" xref="S2.SS1.p2.24.m17.13.13.5.cmml"><mi id="S2.SS1.p2.24.m17.13.13.5.2" mathvariant="normal" xref="S2.SS1.p2.24.m17.13.13.5.2.cmml">Θ</mi><mo id="S2.SS1.p2.24.m17.13.13.5.1" xref="S2.SS1.p2.24.m17.13.13.5.1.cmml">⁢</mo><mrow id="S2.SS1.p2.24.m17.13.13.5.3.2" xref="S2.SS1.p2.24.m17.13.13.5.cmml"><mo id="S2.SS1.p2.24.m17.13.13.5.3.2.1" stretchy="false" xref="S2.SS1.p2.24.m17.13.13.5.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.24.m17.7.7" xref="S2.SS1.p2.24.m17.7.7.cmml">𝒳</mi><mo id="S2.SS1.p2.24.m17.13.13.5.3.2.2" stretchy="false" xref="S2.SS1.p2.24.m17.13.13.5.cmml">)</mo></mrow></mrow><mo id="S2.SS1.p2.24.m17.13.13.6" stretchy="false" xref="S2.SS1.p2.24.m17.13.13.6.cmml">→</mo><mrow id="S2.SS1.p2.24.m17.13.13.7" xref="S2.SS1.p2.24.m17.13.13.7.cmml"><msub id="S2.SS1.p2.24.m17.13.13.7.2" xref="S2.SS1.p2.24.m17.13.13.7.2.cmml"><mi id="S2.SS1.p2.24.m17.13.13.7.2.2" mathvariant="normal" xref="S2.SS1.p2.24.m17.13.13.7.2.2.cmml">Θ</mi><mtext id="S2.SS1.p2.24.m17.13.13.7.2.3" xref="S2.SS1.p2.24.m17.13.13.7.2.3a.cmml">mem</mtext></msub><mo id="S2.SS1.p2.24.m17.13.13.7.1" xref="S2.SS1.p2.24.m17.13.13.7.1.cmml">⁢</mo><mrow id="S2.SS1.p2.24.m17.13.13.7.3.2" xref="S2.SS1.p2.24.m17.13.13.7.cmml"><mo id="S2.SS1.p2.24.m17.13.13.7.3.2.1" stretchy="false" xref="S2.SS1.p2.24.m17.13.13.7.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.24.m17.8.8" xref="S2.SS1.p2.24.m17.8.8.cmml">𝓧</mi><mo id="S2.SS1.p2.24.m17.13.13.7.3.2.2" stretchy="false" xref="S2.SS1.p2.24.m17.13.13.7.cmml">)</mo></mrow></mrow><mo id="S2.SS1.p2.24.m17.13.13.8" xref="S2.SS1.p2.24.m17.13.13.8.cmml">=</mo><mrow id="S2.SS1.p2.24.m17.13.13.3.3" xref="S2.SS1.p2.24.m17.13.13.3.4.cmml"><mo id="S2.SS1.p2.24.m17.13.13.3.3.4" stretchy="false" xref="S2.SS1.p2.24.m17.13.13.3.4.cmml">{</mo><msubsup id="S2.SS1.p2.24.m17.11.11.1.1.1" xref="S2.SS1.p2.24.m17.11.11.1.1.1.cmml"><mi id="S2.SS1.p2.24.m17.11.11.1.1.1.2.2" xref="S2.SS1.p2.24.m17.11.11.1.1.1.2.2.cmml">𝒙</mi><mrow id="S2.SS1.p2.24.m17.2.2.2.4" xref="S2.SS1.p2.24.m17.2.2.2.3.cmml"><mn id="S2.SS1.p2.24.m17.1.1.1.1" xref="S2.SS1.p2.24.m17.1.1.1.1.cmml">1</mn><mo id="S2.SS1.p2.24.m17.2.2.2.4.1" xref="S2.SS1.p2.24.m17.2.2.2.3.cmml">,</mo><mn id="S2.SS1.p2.24.m17.2.2.2.2" xref="S2.SS1.p2.24.m17.2.2.2.2.cmml">1</mn></mrow><mi id="S2.SS1.p2.24.m17.11.11.1.1.1.2.3" xref="S2.SS1.p2.24.m17.11.11.1.1.1.2.3.cmml">m</mi></msubsup><mo id="S2.SS1.p2.24.m17.13.13.3.3.5" xref="S2.SS1.p2.24.m17.13.13.3.4.cmml">,</mo><mi id="S2.SS1.p2.24.m17.9.9" mathvariant="normal" xref="S2.SS1.p2.24.m17.9.9.cmml">⋯</mi><mo id="S2.SS1.p2.24.m17.13.13.3.3.6" xref="S2.SS1.p2.24.m17.13.13.3.4.cmml">,</mo><msubsup id="S2.SS1.p2.24.m17.12.12.2.2.2" xref="S2.SS1.p2.24.m17.12.12.2.2.2.cmml"><mi id="S2.SS1.p2.24.m17.12.12.2.2.2.2.2" xref="S2.SS1.p2.24.m17.12.12.2.2.2.2.2.cmml">𝒙</mi><mrow id="S2.SS1.p2.24.m17.4.4.2.4" xref="S2.SS1.p2.24.m17.4.4.2.3.cmml"><mn id="S2.SS1.p2.24.m17.3.3.1.1" xref="S2.SS1.p2.24.m17.3.3.1.1.cmml">1</mn><mo id="S2.SS1.p2.24.m17.4.4.2.4.1" xref="S2.SS1.p2.24.m17.4.4.2.3.cmml">,</mo><mi id="S2.SS1.p2.24.m17.4.4.2.2" xref="S2.SS1.p2.24.m17.4.4.2.2.cmml">k</mi></mrow><mi id="S2.SS1.p2.24.m17.12.12.2.2.2.2.3" xref="S2.SS1.p2.24.m17.12.12.2.2.2.2.3.cmml">m</mi></msubsup><mo id="S2.SS1.p2.24.m17.13.13.3.3.7" xref="S2.SS1.p2.24.m17.13.13.3.4.cmml">,</mo><mi id="S2.SS1.p2.24.m17.10.10" mathvariant="normal" xref="S2.SS1.p2.24.m17.10.10.cmml">⋯</mi><mo id="S2.SS1.p2.24.m17.13.13.3.3.8" xref="S2.SS1.p2.24.m17.13.13.3.4.cmml">,</mo><msubsup id="S2.SS1.p2.24.m17.13.13.3.3.3" xref="S2.SS1.p2.24.m17.13.13.3.3.3.cmml"><mi id="S2.SS1.p2.24.m17.13.13.3.3.3.2.2" xref="S2.SS1.p2.24.m17.13.13.3.3.3.2.2.cmml">𝒙</mi><mrow id="S2.SS1.p2.24.m17.6.6.2.4" xref="S2.SS1.p2.24.m17.6.6.2.3.cmml"><mi id="S2.SS1.p2.24.m17.5.5.1.1" xref="S2.SS1.p2.24.m17.5.5.1.1.cmml">n</mi><mo id="S2.SS1.p2.24.m17.6.6.2.4.1" xref="S2.SS1.p2.24.m17.6.6.2.3.cmml">,</mo><mi id="S2.SS1.p2.24.m17.6.6.2.2" xref="S2.SS1.p2.24.m17.6.6.2.2.cmml">k</mi></mrow><mi id="S2.SS1.p2.24.m17.13.13.3.3.3.2.3" xref="S2.SS1.p2.24.m17.13.13.3.3.3.2.3.cmml">m</mi></msubsup><mo id="S2.SS1.p2.24.m17.13.13.3.3.9" stretchy="false" xref="S2.SS1.p2.24.m17.13.13.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.24.m17.13b"><apply id="S2.SS1.p2.24.m17.13.13.cmml" xref="S2.SS1.p2.24.m17.13.13"><and id="S2.SS1.p2.24.m17.13.13a.cmml" xref="S2.SS1.p2.24.m17.13.13"></and><apply id="S2.SS1.p2.24.m17.13.13b.cmml" xref="S2.SS1.p2.24.m17.13.13"><ci id="S2.SS1.p2.24.m17.13.13.6.cmml" xref="S2.SS1.p2.24.m17.13.13.6">→</ci><apply id="S2.SS1.p2.24.m17.13.13.5.cmml" xref="S2.SS1.p2.24.m17.13.13.5"><times id="S2.SS1.p2.24.m17.13.13.5.1.cmml" xref="S2.SS1.p2.24.m17.13.13.5.1"></times><ci id="S2.SS1.p2.24.m17.13.13.5.2.cmml" xref="S2.SS1.p2.24.m17.13.13.5.2">Θ</ci><ci id="S2.SS1.p2.24.m17.7.7.cmml" xref="S2.SS1.p2.24.m17.7.7">𝒳</ci></apply><apply id="S2.SS1.p2.24.m17.13.13.7.cmml" xref="S2.SS1.p2.24.m17.13.13.7"><times id="S2.SS1.p2.24.m17.13.13.7.1.cmml" xref="S2.SS1.p2.24.m17.13.13.7.1"></times><apply id="S2.SS1.p2.24.m17.13.13.7.2.cmml" xref="S2.SS1.p2.24.m17.13.13.7.2"><csymbol cd="ambiguous" id="S2.SS1.p2.24.m17.13.13.7.2.1.cmml" xref="S2.SS1.p2.24.m17.13.13.7.2">subscript</csymbol><ci id="S2.SS1.p2.24.m17.13.13.7.2.2.cmml" xref="S2.SS1.p2.24.m17.13.13.7.2.2">Θ</ci><ci id="S2.SS1.p2.24.m17.13.13.7.2.3a.cmml" xref="S2.SS1.p2.24.m17.13.13.7.2.3"><mtext id="S2.SS1.p2.24.m17.13.13.7.2.3.cmml" mathsize="70%" xref="S2.SS1.p2.24.m17.13.13.7.2.3">mem</mtext></ci></apply><ci id="S2.SS1.p2.24.m17.8.8.cmml" xref="S2.SS1.p2.24.m17.8.8">𝓧</ci></apply></apply><apply id="S2.SS1.p2.24.m17.13.13c.cmml" xref="S2.SS1.p2.24.m17.13.13"><eq id="S2.SS1.p2.24.m17.13.13.8.cmml" xref="S2.SS1.p2.24.m17.13.13.8"></eq><share href="https://arxiv.org/html/2409.05591v2#S2.SS1.p2.24.m17.13.13.7.cmml" id="S2.SS1.p2.24.m17.13.13d.cmml" xref="S2.SS1.p2.24.m17.13.13"></share><set id="S2.SS1.p2.24.m17.13.13.3.4.cmml" xref="S2.SS1.p2.24.m17.13.13.3.3"><apply id="S2.SS1.p2.24.m17.11.11.1.1.1.cmml" xref="S2.SS1.p2.24.m17.11.11.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.24.m17.11.11.1.1.1.1.cmml" xref="S2.SS1.p2.24.m17.11.11.1.1.1">subscript</csymbol><apply id="S2.SS1.p2.24.m17.11.11.1.1.1.2.cmml" xref="S2.SS1.p2.24.m17.11.11.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.24.m17.11.11.1.1.1.2.1.cmml" xref="S2.SS1.p2.24.m17.11.11.1.1.1">superscript</csymbol><ci id="S2.SS1.p2.24.m17.11.11.1.1.1.2.2.cmml" xref="S2.SS1.p2.24.m17.11.11.1.1.1.2.2">𝒙</ci><ci id="S2.SS1.p2.24.m17.11.11.1.1.1.2.3.cmml" xref="S2.SS1.p2.24.m17.11.11.1.1.1.2.3">𝑚</ci></apply><list id="S2.SS1.p2.24.m17.2.2.2.3.cmml" xref="S2.SS1.p2.24.m17.2.2.2.4"><cn id="S2.SS1.p2.24.m17.1.1.1.1.cmml" type="integer" xref="S2.SS1.p2.24.m17.1.1.1.1">1</cn><cn id="S2.SS1.p2.24.m17.2.2.2.2.cmml" type="integer" xref="S2.SS1.p2.24.m17.2.2.2.2">1</cn></list></apply><ci id="S2.SS1.p2.24.m17.9.9.cmml" xref="S2.SS1.p2.24.m17.9.9">⋯</ci><apply id="S2.SS1.p2.24.m17.12.12.2.2.2.cmml" xref="S2.SS1.p2.24.m17.12.12.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.24.m17.12.12.2.2.2.1.cmml" xref="S2.SS1.p2.24.m17.12.12.2.2.2">subscript</csymbol><apply id="S2.SS1.p2.24.m17.12.12.2.2.2.2.cmml" xref="S2.SS1.p2.24.m17.12.12.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.24.m17.12.12.2.2.2.2.1.cmml" xref="S2.SS1.p2.24.m17.12.12.2.2.2">superscript</csymbol><ci id="S2.SS1.p2.24.m17.12.12.2.2.2.2.2.cmml" xref="S2.SS1.p2.24.m17.12.12.2.2.2.2.2">𝒙</ci><ci id="S2.SS1.p2.24.m17.12.12.2.2.2.2.3.cmml" xref="S2.SS1.p2.24.m17.12.12.2.2.2.2.3">𝑚</ci></apply><list id="S2.SS1.p2.24.m17.4.4.2.3.cmml" xref="S2.SS1.p2.24.m17.4.4.2.4"><cn id="S2.SS1.p2.24.m17.3.3.1.1.cmml" type="integer" xref="S2.SS1.p2.24.m17.3.3.1.1">1</cn><ci id="S2.SS1.p2.24.m17.4.4.2.2.cmml" xref="S2.SS1.p2.24.m17.4.4.2.2">𝑘</ci></list></apply><ci id="S2.SS1.p2.24.m17.10.10.cmml" xref="S2.SS1.p2.24.m17.10.10">⋯</ci><apply id="S2.SS1.p2.24.m17.13.13.3.3.3.cmml" xref="S2.SS1.p2.24.m17.13.13.3.3.3"><csymbol cd="ambiguous" id="S2.SS1.p2.24.m17.13.13.3.3.3.1.cmml" xref="S2.SS1.p2.24.m17.13.13.3.3.3">subscript</csymbol><apply id="S2.SS1.p2.24.m17.13.13.3.3.3.2.cmml" xref="S2.SS1.p2.24.m17.13.13.3.3.3"><csymbol cd="ambiguous" id="S2.SS1.p2.24.m17.13.13.3.3.3.2.1.cmml" xref="S2.SS1.p2.24.m17.13.13.3.3.3">superscript</csymbol><ci id="S2.SS1.p2.24.m17.13.13.3.3.3.2.2.cmml" xref="S2.SS1.p2.24.m17.13.13.3.3.3.2.2">𝒙</ci><ci id="S2.SS1.p2.24.m17.13.13.3.3.3.2.3.cmml" xref="S2.SS1.p2.24.m17.13.13.3.3.3.2.3">𝑚</ci></apply><list id="S2.SS1.p2.24.m17.6.6.2.3.cmml" xref="S2.SS1.p2.24.m17.6.6.2.4"><ci id="S2.SS1.p2.24.m17.5.5.1.1.cmml" xref="S2.SS1.p2.24.m17.5.5.1.1">𝑛</ci><ci id="S2.SS1.p2.24.m17.6.6.2.2.cmml" xref="S2.SS1.p2.24.m17.6.6.2.2">𝑘</ci></list></apply></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.24.m17.13c">\Theta({\mathcal{X}})\rightarrow\Theta_{\text{mem}}(\bm{{\mathcal{X}}})=\{\bm{%
x}^{m}_{1,1},\cdots,\bm{x}^{m}_{1,k},\cdots,\bm{x}^{m}_{n,k}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.24.m17.13d">roman_Θ ( caligraphic_X ) → roman_Θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT ( bold_caligraphic_X ) = { bold_italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 , 1 end_POSTSUBSCRIPT , ⋯ , bold_italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 , italic_k end_POSTSUBSCRIPT , ⋯ , bold_italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_n , italic_k end_POSTSUBSCRIPT }</annotation></semantics></math>, which represents the global memory <math alttext="\bm{{\mathcal{X}}}^{m}" class="ltx_Math" display="inline" id="S2.SS1.p2.25.m18.1"><semantics id="S2.SS1.p2.25.m18.1a"><msup id="S2.SS1.p2.25.m18.1.1" xref="S2.SS1.p2.25.m18.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.25.m18.1.1.2" xref="S2.SS1.p2.25.m18.1.1.2.cmml">𝓧</mi><mi id="S2.SS1.p2.25.m18.1.1.3" xref="S2.SS1.p2.25.m18.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.25.m18.1b"><apply id="S2.SS1.p2.25.m18.1.1.cmml" xref="S2.SS1.p2.25.m18.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.25.m18.1.1.1.cmml" xref="S2.SS1.p2.25.m18.1.1">superscript</csymbol><ci id="S2.SS1.p2.25.m18.1.1.2.cmml" xref="S2.SS1.p2.25.m18.1.1.2">𝓧</ci><ci id="S2.SS1.p2.25.m18.1.1.3.cmml" xref="S2.SS1.p2.25.m18.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.25.m18.1c">\bm{{\mathcal{X}}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.25.m18.1d">bold_caligraphic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> formed from the input <math alttext="{\mathcal{X}}" class="ltx_Math" display="inline" id="S2.SS1.p2.26.m19.1"><semantics id="S2.SS1.p2.26.m19.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p2.26.m19.1.1" xref="S2.SS1.p2.26.m19.1.1.cmml">𝒳</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.26.m19.1b"><ci id="S2.SS1.p2.26.m19.1.1.cmml" xref="S2.SS1.p2.26.m19.1.1">𝒳</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.26.m19.1c">{\mathcal{X}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.26.m19.1d">caligraphic_X</annotation></semantics></math>.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Training for Memory Module</h3>
<div class="ltx_para ltx_noindent" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.4">As mentioned above, we initialize another set of weight matrices <math alttext="{\bm{W}}_{{\mathcal{Q}}^{m}}" class="ltx_Math" display="inline" id="S2.SS2.p1.1.m1.1"><semantics id="S2.SS2.p1.1.m1.1a"><msub id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml"><mi id="S2.SS2.p1.1.m1.1.1.2" xref="S2.SS2.p1.1.m1.1.1.2.cmml">𝑾</mi><msup id="S2.SS2.p1.1.m1.1.1.3" xref="S2.SS2.p1.1.m1.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.1.m1.1.1.3.2" xref="S2.SS2.p1.1.m1.1.1.3.2.cmml">𝒬</mi><mi id="S2.SS2.p1.1.m1.1.1.3.3" xref="S2.SS2.p1.1.m1.1.1.3.3.cmml">m</mi></msup></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b"><apply id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.1.m1.1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS2.p1.1.m1.1.1.2.cmml" xref="S2.SS2.p1.1.m1.1.1.2">𝑾</ci><apply id="S2.SS2.p1.1.m1.1.1.3.cmml" xref="S2.SS2.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p1.1.m1.1.1.3.1.cmml" xref="S2.SS2.p1.1.m1.1.1.3">superscript</csymbol><ci id="S2.SS2.p1.1.m1.1.1.3.2.cmml" xref="S2.SS2.p1.1.m1.1.1.3.2">𝒬</ci><ci id="S2.SS2.p1.1.m1.1.1.3.3.cmml" xref="S2.SS2.p1.1.m1.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">{\bm{W}}_{{\mathcal{Q}}^{m}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.1.m1.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_Q start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="{\bm{W}}_{{\mathcal{K}}^{m}}" class="ltx_Math" display="inline" id="S2.SS2.p1.2.m2.1"><semantics id="S2.SS2.p1.2.m2.1a"><msub id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml"><mi id="S2.SS2.p1.2.m2.1.1.2" xref="S2.SS2.p1.2.m2.1.1.2.cmml">𝑾</mi><msup id="S2.SS2.p1.2.m2.1.1.3" xref="S2.SS2.p1.2.m2.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.2.m2.1.1.3.2" xref="S2.SS2.p1.2.m2.1.1.3.2.cmml">𝒦</mi><mi id="S2.SS2.p1.2.m2.1.1.3.3" xref="S2.SS2.p1.2.m2.1.1.3.3.cmml">m</mi></msup></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.1b"><apply id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.p1.2.m2.1.1.2">𝑾</ci><apply id="S2.SS2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p1.2.m2.1.1.3.1.cmml" xref="S2.SS2.p1.2.m2.1.1.3">superscript</csymbol><ci id="S2.SS2.p1.2.m2.1.1.3.2.cmml" xref="S2.SS2.p1.2.m2.1.1.3.2">𝒦</ci><ci id="S2.SS2.p1.2.m2.1.1.3.3.cmml" xref="S2.SS2.p1.2.m2.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.1c">{\bm{W}}_{{\mathcal{K}}^{m}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.2.m2.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_K start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, and <math alttext="{\bm{W}}_{{\mathcal{V}}^{m}}" class="ltx_Math" display="inline" id="S2.SS2.p1.3.m3.1"><semantics id="S2.SS2.p1.3.m3.1a"><msub id="S2.SS2.p1.3.m3.1.1" xref="S2.SS2.p1.3.m3.1.1.cmml"><mi id="S2.SS2.p1.3.m3.1.1.2" xref="S2.SS2.p1.3.m3.1.1.2.cmml">𝑾</mi><msup id="S2.SS2.p1.3.m3.1.1.3" xref="S2.SS2.p1.3.m3.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.3.m3.1.1.3.2" xref="S2.SS2.p1.3.m3.1.1.3.2.cmml">𝒱</mi><mi id="S2.SS2.p1.3.m3.1.1.3.3" xref="S2.SS2.p1.3.m3.1.1.3.3.cmml">m</mi></msup></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.3.m3.1b"><apply id="S2.SS2.p1.3.m3.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.3.m3.1.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1">subscript</csymbol><ci id="S2.SS2.p1.3.m3.1.1.2.cmml" xref="S2.SS2.p1.3.m3.1.1.2">𝑾</ci><apply id="S2.SS2.p1.3.m3.1.1.3.cmml" xref="S2.SS2.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.p1.3.m3.1.1.3.1.cmml" xref="S2.SS2.p1.3.m3.1.1.3">superscript</csymbol><ci id="S2.SS2.p1.3.m3.1.1.3.2.cmml" xref="S2.SS2.p1.3.m3.1.1.3.2">𝒱</ci><ci id="S2.SS2.p1.3.m3.1.1.3.3.cmml" xref="S2.SS2.p1.3.m3.1.1.3.3">𝑚</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.3.m3.1c">{\bm{W}}_{{\mathcal{V}}^{m}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.3.m3.1d">bold_italic_W start_POSTSUBSCRIPT caligraphic_V start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> for the special purpose of mapping the memory tokens <math alttext="x_{m}" class="ltx_Math" display="inline" id="S2.SS2.p1.4.m4.1"><semantics id="S2.SS2.p1.4.m4.1a"><msub id="S2.SS2.p1.4.m4.1.1" xref="S2.SS2.p1.4.m4.1.1.cmml"><mi id="S2.SS2.p1.4.m4.1.1.2" xref="S2.SS2.p1.4.m4.1.1.2.cmml">x</mi><mi id="S2.SS2.p1.4.m4.1.1.3" xref="S2.SS2.p1.4.m4.1.1.3.cmml">m</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.4.m4.1b"><apply id="S2.SS2.p1.4.m4.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.4.m4.1.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1">subscript</csymbol><ci id="S2.SS2.p1.4.m4.1.1.2.cmml" xref="S2.SS2.p1.4.m4.1.1.2">𝑥</ci><ci id="S2.SS2.p1.4.m4.1.1.3.cmml" xref="S2.SS2.p1.4.m4.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.4.m4.1c">x_{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.4.m4.1d">italic_x start_POSTSUBSCRIPT italic_m end_POSTSUBSCRIPT</annotation></semantics></math> into query, key, and value vectors (as formulated in Eq. <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.E7" title="In 2.1 Memory Module ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">7</span></a>). The newly initialized weight matrices are updated during the training process, while the parameters of the underlying LLM remain frozen.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.1">We train the newly initialized parameters in two stages: (1) Pre-training: we use randomly sampled long contexts from the RedPajama dataset to pre-train the model <cite class="ltx_cite ltx_citemacro_cite">Soboleva et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib20" title="">2023</a>)</cite>, allowing MemoRAG’s memory module to learn how to form memory from raw context; (2) Supervised Fine-tuning (SFT): we use task-specific SFT data to enable MemoRAG to generate task-specific clues based on the formed memory.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p3">
<p class="ltx_p" id="S2.SS2.p3.1">While challenging, accurately remembering details from memory remains the ultimate goal of any human memory enhancement training. The training objective of the memory model in MemoRAG also pursues this goal, which can be formulated as:</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A1.EGx6">
<tbody id="S2.E8"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\max_{\Theta_{\text{mem}}}{\mathcal{P}}(x_{i,j}\mid x^{m}_{1,1},%
\cdots,x^{m}_{i-1,k_{i-1}},x_{i,1},\cdots,x_{i,j-1})." class="ltx_Math" display="inline" id="S2.E8.m1.13"><semantics id="S2.E8.m1.13a"><mrow id="S2.E8.m1.13.13.1" xref="S2.E8.m1.13.13.1.1.cmml"><mrow id="S2.E8.m1.13.13.1.1" xref="S2.E8.m1.13.13.1.1.cmml"><mrow id="S2.E8.m1.13.13.1.1.3" xref="S2.E8.m1.13.13.1.1.3.cmml"><munder id="S2.E8.m1.13.13.1.1.3.1" xref="S2.E8.m1.13.13.1.1.3.1.cmml"><mi id="S2.E8.m1.13.13.1.1.3.1.2" xref="S2.E8.m1.13.13.1.1.3.1.2.cmml">max</mi><msub id="S2.E8.m1.13.13.1.1.3.1.3" xref="S2.E8.m1.13.13.1.1.3.1.3.cmml"><mi id="S2.E8.m1.13.13.1.1.3.1.3.2" mathvariant="normal" xref="S2.E8.m1.13.13.1.1.3.1.3.2.cmml">Θ</mi><mtext id="S2.E8.m1.13.13.1.1.3.1.3.3" xref="S2.E8.m1.13.13.1.1.3.1.3.3a.cmml">mem</mtext></msub></munder><mo id="S2.E8.m1.13.13.1.1.3a" lspace="0.167em" xref="S2.E8.m1.13.13.1.1.3.cmml">⁡</mo><mi class="ltx_font_mathcaligraphic" id="S2.E8.m1.13.13.1.1.3.2" xref="S2.E8.m1.13.13.1.1.3.2.cmml">𝒫</mi></mrow><mo id="S2.E8.m1.13.13.1.1.2" xref="S2.E8.m1.13.13.1.1.2.cmml">⁢</mo><mrow id="S2.E8.m1.13.13.1.1.1.1" xref="S2.E8.m1.13.13.1.1.1.1.1.cmml"><mo id="S2.E8.m1.13.13.1.1.1.1.2" stretchy="false" xref="S2.E8.m1.13.13.1.1.1.1.1.cmml">(</mo><mrow id="S2.E8.m1.13.13.1.1.1.1.1" xref="S2.E8.m1.13.13.1.1.1.1.1.cmml"><msub id="S2.E8.m1.13.13.1.1.1.1.1.6" xref="S2.E8.m1.13.13.1.1.1.1.1.6.cmml"><mi id="S2.E8.m1.13.13.1.1.1.1.1.6.2" xref="S2.E8.m1.13.13.1.1.1.1.1.6.2.cmml">x</mi><mrow id="S2.E8.m1.2.2.2.4" xref="S2.E8.m1.2.2.2.3.cmml"><mi id="S2.E8.m1.1.1.1.1" xref="S2.E8.m1.1.1.1.1.cmml">i</mi><mo id="S2.E8.m1.2.2.2.4.1" xref="S2.E8.m1.2.2.2.3.cmml">,</mo><mi id="S2.E8.m1.2.2.2.2" xref="S2.E8.m1.2.2.2.2.cmml">j</mi></mrow></msub><mo id="S2.E8.m1.13.13.1.1.1.1.1.5" xref="S2.E8.m1.13.13.1.1.1.1.1.5.cmml">∣</mo><mrow id="S2.E8.m1.13.13.1.1.1.1.1.4.4" xref="S2.E8.m1.13.13.1.1.1.1.1.4.5.cmml"><msubsup id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.2" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.2.cmml">x</mi><mrow id="S2.E8.m1.4.4.2.4" xref="S2.E8.m1.4.4.2.3.cmml"><mn id="S2.E8.m1.3.3.1.1" xref="S2.E8.m1.3.3.1.1.cmml">1</mn><mo id="S2.E8.m1.4.4.2.4.1" xref="S2.E8.m1.4.4.2.3.cmml">,</mo><mn id="S2.E8.m1.4.4.2.2" xref="S2.E8.m1.4.4.2.2.cmml">1</mn></mrow><mi id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.3" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.3.cmml">m</mi></msubsup><mo id="S2.E8.m1.13.13.1.1.1.1.1.4.4.5" xref="S2.E8.m1.13.13.1.1.1.1.1.4.5.cmml">,</mo><mi id="S2.E8.m1.11.11" mathvariant="normal" xref="S2.E8.m1.11.11.cmml">⋯</mi><mo id="S2.E8.m1.13.13.1.1.1.1.1.4.4.6" xref="S2.E8.m1.13.13.1.1.1.1.1.4.5.cmml">,</mo><msubsup id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.cmml"><mi id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.2" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.2.cmml">x</mi><mrow id="S2.E8.m1.6.6.2.2" xref="S2.E8.m1.6.6.2.3.cmml"><mrow id="S2.E8.m1.5.5.1.1.1" xref="S2.E8.m1.5.5.1.1.1.cmml"><mi id="S2.E8.m1.5.5.1.1.1.2" xref="S2.E8.m1.5.5.1.1.1.2.cmml">i</mi><mo id="S2.E8.m1.5.5.1.1.1.1" xref="S2.E8.m1.5.5.1.1.1.1.cmml">−</mo><mn id="S2.E8.m1.5.5.1.1.1.3" xref="S2.E8.m1.5.5.1.1.1.3.cmml">1</mn></mrow><mo id="S2.E8.m1.6.6.2.2.3" xref="S2.E8.m1.6.6.2.3.cmml">,</mo><msub id="S2.E8.m1.6.6.2.2.2" xref="S2.E8.m1.6.6.2.2.2.cmml"><mi id="S2.E8.m1.6.6.2.2.2.2" xref="S2.E8.m1.6.6.2.2.2.2.cmml">k</mi><mrow id="S2.E8.m1.6.6.2.2.2.3" xref="S2.E8.m1.6.6.2.2.2.3.cmml"><mi id="S2.E8.m1.6.6.2.2.2.3.2" xref="S2.E8.m1.6.6.2.2.2.3.2.cmml">i</mi><mo id="S2.E8.m1.6.6.2.2.2.3.1" xref="S2.E8.m1.6.6.2.2.2.3.1.cmml">−</mo><mn id="S2.E8.m1.6.6.2.2.2.3.3" xref="S2.E8.m1.6.6.2.2.2.3.3.cmml">1</mn></mrow></msub></mrow><mi id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.3" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.3.cmml">m</mi></msubsup><mo id="S2.E8.m1.13.13.1.1.1.1.1.4.4.7" xref="S2.E8.m1.13.13.1.1.1.1.1.4.5.cmml">,</mo><msub id="S2.E8.m1.13.13.1.1.1.1.1.3.3.3" xref="S2.E8.m1.13.13.1.1.1.1.1.3.3.3.cmml"><mi id="S2.E8.m1.13.13.1.1.1.1.1.3.3.3.2" xref="S2.E8.m1.13.13.1.1.1.1.1.3.3.3.2.cmml">x</mi><mrow id="S2.E8.m1.8.8.2.4" xref="S2.E8.m1.8.8.2.3.cmml"><mi id="S2.E8.m1.7.7.1.1" xref="S2.E8.m1.7.7.1.1.cmml">i</mi><mo id="S2.E8.m1.8.8.2.4.1" xref="S2.E8.m1.8.8.2.3.cmml">,</mo><mn id="S2.E8.m1.8.8.2.2" xref="S2.E8.m1.8.8.2.2.cmml">1</mn></mrow></msub><mo id="S2.E8.m1.13.13.1.1.1.1.1.4.4.8" xref="S2.E8.m1.13.13.1.1.1.1.1.4.5.cmml">,</mo><mi id="S2.E8.m1.12.12" mathvariant="normal" xref="S2.E8.m1.12.12.cmml">⋯</mi><mo id="S2.E8.m1.13.13.1.1.1.1.1.4.4.9" xref="S2.E8.m1.13.13.1.1.1.1.1.4.5.cmml">,</mo><msub id="S2.E8.m1.13.13.1.1.1.1.1.4.4.4" xref="S2.E8.m1.13.13.1.1.1.1.1.4.4.4.cmml"><mi id="S2.E8.m1.13.13.1.1.1.1.1.4.4.4.2" xref="S2.E8.m1.13.13.1.1.1.1.1.4.4.4.2.cmml">x</mi><mrow id="S2.E8.m1.10.10.2.2" xref="S2.E8.m1.10.10.2.3.cmml"><mi id="S2.E8.m1.9.9.1.1" xref="S2.E8.m1.9.9.1.1.cmml">i</mi><mo id="S2.E8.m1.10.10.2.2.2" xref="S2.E8.m1.10.10.2.3.cmml">,</mo><mrow id="S2.E8.m1.10.10.2.2.1" xref="S2.E8.m1.10.10.2.2.1.cmml"><mi id="S2.E8.m1.10.10.2.2.1.2" xref="S2.E8.m1.10.10.2.2.1.2.cmml">j</mi><mo id="S2.E8.m1.10.10.2.2.1.1" xref="S2.E8.m1.10.10.2.2.1.1.cmml">−</mo><mn id="S2.E8.m1.10.10.2.2.1.3" xref="S2.E8.m1.10.10.2.2.1.3.cmml">1</mn></mrow></mrow></msub></mrow></mrow><mo id="S2.E8.m1.13.13.1.1.1.1.3" stretchy="false" xref="S2.E8.m1.13.13.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E8.m1.13.13.1.2" lspace="0em" xref="S2.E8.m1.13.13.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E8.m1.13b"><apply id="S2.E8.m1.13.13.1.1.cmml" xref="S2.E8.m1.13.13.1"><times id="S2.E8.m1.13.13.1.1.2.cmml" xref="S2.E8.m1.13.13.1.1.2"></times><apply id="S2.E8.m1.13.13.1.1.3.cmml" xref="S2.E8.m1.13.13.1.1.3"><apply id="S2.E8.m1.13.13.1.1.3.1.cmml" xref="S2.E8.m1.13.13.1.1.3.1"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.3.1.1.cmml" xref="S2.E8.m1.13.13.1.1.3.1">subscript</csymbol><max id="S2.E8.m1.13.13.1.1.3.1.2.cmml" xref="S2.E8.m1.13.13.1.1.3.1.2"></max><apply id="S2.E8.m1.13.13.1.1.3.1.3.cmml" xref="S2.E8.m1.13.13.1.1.3.1.3"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.3.1.3.1.cmml" xref="S2.E8.m1.13.13.1.1.3.1.3">subscript</csymbol><ci id="S2.E8.m1.13.13.1.1.3.1.3.2.cmml" xref="S2.E8.m1.13.13.1.1.3.1.3.2">Θ</ci><ci id="S2.E8.m1.13.13.1.1.3.1.3.3a.cmml" xref="S2.E8.m1.13.13.1.1.3.1.3.3"><mtext id="S2.E8.m1.13.13.1.1.3.1.3.3.cmml" mathsize="50%" xref="S2.E8.m1.13.13.1.1.3.1.3.3">mem</mtext></ci></apply></apply><ci id="S2.E8.m1.13.13.1.1.3.2.cmml" xref="S2.E8.m1.13.13.1.1.3.2">𝒫</ci></apply><apply id="S2.E8.m1.13.13.1.1.1.1.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1"><csymbol cd="latexml" id="S2.E8.m1.13.13.1.1.1.1.1.5.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.5">conditional</csymbol><apply id="S2.E8.m1.13.13.1.1.1.1.1.6.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.6"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.1.1.1.6.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.6">subscript</csymbol><ci id="S2.E8.m1.13.13.1.1.1.1.1.6.2.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.6.2">𝑥</ci><list id="S2.E8.m1.2.2.2.3.cmml" xref="S2.E8.m1.2.2.2.4"><ci id="S2.E8.m1.1.1.1.1.cmml" xref="S2.E8.m1.1.1.1.1">𝑖</ci><ci id="S2.E8.m1.2.2.2.2.cmml" xref="S2.E8.m1.2.2.2.2">𝑗</ci></list></apply><list id="S2.E8.m1.13.13.1.1.1.1.1.4.5.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.4.4"><apply id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.2.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.2">𝑥</ci><ci id="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.3.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.1.1.1.2.3">𝑚</ci></apply><list id="S2.E8.m1.4.4.2.3.cmml" xref="S2.E8.m1.4.4.2.4"><cn id="S2.E8.m1.3.3.1.1.cmml" type="integer" xref="S2.E8.m1.3.3.1.1">1</cn><cn id="S2.E8.m1.4.4.2.2.cmml" type="integer" xref="S2.E8.m1.4.4.2.2">1</cn></list></apply><ci id="S2.E8.m1.11.11.cmml" xref="S2.E8.m1.11.11">⋯</ci><apply id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2">subscript</csymbol><apply id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2">superscript</csymbol><ci id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.2.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.2">𝑥</ci><ci id="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.3.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.2.2.2.2.3">𝑚</ci></apply><list id="S2.E8.m1.6.6.2.3.cmml" xref="S2.E8.m1.6.6.2.2"><apply id="S2.E8.m1.5.5.1.1.1.cmml" xref="S2.E8.m1.5.5.1.1.1"><minus id="S2.E8.m1.5.5.1.1.1.1.cmml" xref="S2.E8.m1.5.5.1.1.1.1"></minus><ci id="S2.E8.m1.5.5.1.1.1.2.cmml" xref="S2.E8.m1.5.5.1.1.1.2">𝑖</ci><cn id="S2.E8.m1.5.5.1.1.1.3.cmml" type="integer" xref="S2.E8.m1.5.5.1.1.1.3">1</cn></apply><apply id="S2.E8.m1.6.6.2.2.2.cmml" xref="S2.E8.m1.6.6.2.2.2"><csymbol cd="ambiguous" id="S2.E8.m1.6.6.2.2.2.1.cmml" xref="S2.E8.m1.6.6.2.2.2">subscript</csymbol><ci id="S2.E8.m1.6.6.2.2.2.2.cmml" xref="S2.E8.m1.6.6.2.2.2.2">𝑘</ci><apply id="S2.E8.m1.6.6.2.2.2.3.cmml" xref="S2.E8.m1.6.6.2.2.2.3"><minus id="S2.E8.m1.6.6.2.2.2.3.1.cmml" xref="S2.E8.m1.6.6.2.2.2.3.1"></minus><ci id="S2.E8.m1.6.6.2.2.2.3.2.cmml" xref="S2.E8.m1.6.6.2.2.2.3.2">𝑖</ci><cn id="S2.E8.m1.6.6.2.2.2.3.3.cmml" type="integer" xref="S2.E8.m1.6.6.2.2.2.3.3">1</cn></apply></apply></list></apply><apply id="S2.E8.m1.13.13.1.1.1.1.1.3.3.3.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.1.1.1.3.3.3.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.3.3.3">subscript</csymbol><ci id="S2.E8.m1.13.13.1.1.1.1.1.3.3.3.2.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.3.3.3.2">𝑥</ci><list id="S2.E8.m1.8.8.2.3.cmml" xref="S2.E8.m1.8.8.2.4"><ci id="S2.E8.m1.7.7.1.1.cmml" xref="S2.E8.m1.7.7.1.1">𝑖</ci><cn id="S2.E8.m1.8.8.2.2.cmml" type="integer" xref="S2.E8.m1.8.8.2.2">1</cn></list></apply><ci id="S2.E8.m1.12.12.cmml" xref="S2.E8.m1.12.12">⋯</ci><apply id="S2.E8.m1.13.13.1.1.1.1.1.4.4.4.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.4.4.4"><csymbol cd="ambiguous" id="S2.E8.m1.13.13.1.1.1.1.1.4.4.4.1.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.4.4.4">subscript</csymbol><ci id="S2.E8.m1.13.13.1.1.1.1.1.4.4.4.2.cmml" xref="S2.E8.m1.13.13.1.1.1.1.1.4.4.4.2">𝑥</ci><list id="S2.E8.m1.10.10.2.3.cmml" xref="S2.E8.m1.10.10.2.2"><ci id="S2.E8.m1.9.9.1.1.cmml" xref="S2.E8.m1.9.9.1.1">𝑖</ci><apply id="S2.E8.m1.10.10.2.2.1.cmml" xref="S2.E8.m1.10.10.2.2.1"><minus id="S2.E8.m1.10.10.2.2.1.1.cmml" xref="S2.E8.m1.10.10.2.2.1.1"></minus><ci id="S2.E8.m1.10.10.2.2.1.2.cmml" xref="S2.E8.m1.10.10.2.2.1.2">𝑗</ci><cn id="S2.E8.m1.10.10.2.2.1.3.cmml" type="integer" xref="S2.E8.m1.10.10.2.2.1.3">1</cn></apply></list></apply></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E8.m1.13c">\displaystyle\max_{\Theta_{\text{mem}}}{\mathcal{P}}(x_{i,j}\mid x^{m}_{1,1},%
\cdots,x^{m}_{i-1,k_{i-1}},x_{i,1},\cdots,x_{i,j-1}).</annotation><annotation encoding="application/x-llamapun" id="S2.E8.m1.13d">roman_max start_POSTSUBSCRIPT roman_Θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT end_POSTSUBSCRIPT caligraphic_P ( italic_x start_POSTSUBSCRIPT italic_i , italic_j end_POSTSUBSCRIPT ∣ italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 , 1 end_POSTSUBSCRIPT , ⋯ , italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i - 1 , italic_k start_POSTSUBSCRIPT italic_i - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT , italic_x start_POSTSUBSCRIPT italic_i , 1 end_POSTSUBSCRIPT , ⋯ , italic_x start_POSTSUBSCRIPT italic_i , italic_j - 1 end_POSTSUBSCRIPT ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p4">
<p class="ltx_p" id="S2.SS2.p4.2">The objective in Eq. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.E8" title="In 2.2 Training for Memory Module ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">8</span></a>) aims to maximize the generation probability of the next token given the KV cache of the previous memory tokens <math alttext="\{x^{m}_{1,1},\cdots,x^{m}_{i-1,k_{i-1}}\}" class="ltx_Math" display="inline" id="S2.SS2.p4.1.m1.7"><semantics id="S2.SS2.p4.1.m1.7a"><mrow id="S2.SS2.p4.1.m1.7.7.2" xref="S2.SS2.p4.1.m1.7.7.3.cmml"><mo id="S2.SS2.p4.1.m1.7.7.2.3" stretchy="false" xref="S2.SS2.p4.1.m1.7.7.3.cmml">{</mo><msubsup id="S2.SS2.p4.1.m1.6.6.1.1" xref="S2.SS2.p4.1.m1.6.6.1.1.cmml"><mi id="S2.SS2.p4.1.m1.6.6.1.1.2.2" xref="S2.SS2.p4.1.m1.6.6.1.1.2.2.cmml">x</mi><mrow id="S2.SS2.p4.1.m1.2.2.2.4" xref="S2.SS2.p4.1.m1.2.2.2.3.cmml"><mn id="S2.SS2.p4.1.m1.1.1.1.1" xref="S2.SS2.p4.1.m1.1.1.1.1.cmml">1</mn><mo id="S2.SS2.p4.1.m1.2.2.2.4.1" xref="S2.SS2.p4.1.m1.2.2.2.3.cmml">,</mo><mn id="S2.SS2.p4.1.m1.2.2.2.2" xref="S2.SS2.p4.1.m1.2.2.2.2.cmml">1</mn></mrow><mi id="S2.SS2.p4.1.m1.6.6.1.1.2.3" xref="S2.SS2.p4.1.m1.6.6.1.1.2.3.cmml">m</mi></msubsup><mo id="S2.SS2.p4.1.m1.7.7.2.4" xref="S2.SS2.p4.1.m1.7.7.3.cmml">,</mo><mi id="S2.SS2.p4.1.m1.5.5" mathvariant="normal" xref="S2.SS2.p4.1.m1.5.5.cmml">⋯</mi><mo id="S2.SS2.p4.1.m1.7.7.2.5" xref="S2.SS2.p4.1.m1.7.7.3.cmml">,</mo><msubsup id="S2.SS2.p4.1.m1.7.7.2.2" xref="S2.SS2.p4.1.m1.7.7.2.2.cmml"><mi id="S2.SS2.p4.1.m1.7.7.2.2.2.2" xref="S2.SS2.p4.1.m1.7.7.2.2.2.2.cmml">x</mi><mrow id="S2.SS2.p4.1.m1.4.4.2.2" xref="S2.SS2.p4.1.m1.4.4.2.3.cmml"><mrow id="S2.SS2.p4.1.m1.3.3.1.1.1" xref="S2.SS2.p4.1.m1.3.3.1.1.1.cmml"><mi id="S2.SS2.p4.1.m1.3.3.1.1.1.2" xref="S2.SS2.p4.1.m1.3.3.1.1.1.2.cmml">i</mi><mo id="S2.SS2.p4.1.m1.3.3.1.1.1.1" xref="S2.SS2.p4.1.m1.3.3.1.1.1.1.cmml">−</mo><mn id="S2.SS2.p4.1.m1.3.3.1.1.1.3" xref="S2.SS2.p4.1.m1.3.3.1.1.1.3.cmml">1</mn></mrow><mo id="S2.SS2.p4.1.m1.4.4.2.2.3" xref="S2.SS2.p4.1.m1.4.4.2.3.cmml">,</mo><msub id="S2.SS2.p4.1.m1.4.4.2.2.2" xref="S2.SS2.p4.1.m1.4.4.2.2.2.cmml"><mi id="S2.SS2.p4.1.m1.4.4.2.2.2.2" xref="S2.SS2.p4.1.m1.4.4.2.2.2.2.cmml">k</mi><mrow id="S2.SS2.p4.1.m1.4.4.2.2.2.3" xref="S2.SS2.p4.1.m1.4.4.2.2.2.3.cmml"><mi id="S2.SS2.p4.1.m1.4.4.2.2.2.3.2" xref="S2.SS2.p4.1.m1.4.4.2.2.2.3.2.cmml">i</mi><mo id="S2.SS2.p4.1.m1.4.4.2.2.2.3.1" xref="S2.SS2.p4.1.m1.4.4.2.2.2.3.1.cmml">−</mo><mn id="S2.SS2.p4.1.m1.4.4.2.2.2.3.3" xref="S2.SS2.p4.1.m1.4.4.2.2.2.3.3.cmml">1</mn></mrow></msub></mrow><mi id="S2.SS2.p4.1.m1.7.7.2.2.2.3" xref="S2.SS2.p4.1.m1.7.7.2.2.2.3.cmml">m</mi></msubsup><mo id="S2.SS2.p4.1.m1.7.7.2.6" stretchy="false" xref="S2.SS2.p4.1.m1.7.7.3.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.1.m1.7b"><set id="S2.SS2.p4.1.m1.7.7.3.cmml" xref="S2.SS2.p4.1.m1.7.7.2"><apply id="S2.SS2.p4.1.m1.6.6.1.1.cmml" xref="S2.SS2.p4.1.m1.6.6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.1.m1.6.6.1.1.1.cmml" xref="S2.SS2.p4.1.m1.6.6.1.1">subscript</csymbol><apply id="S2.SS2.p4.1.m1.6.6.1.1.2.cmml" xref="S2.SS2.p4.1.m1.6.6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.1.m1.6.6.1.1.2.1.cmml" xref="S2.SS2.p4.1.m1.6.6.1.1">superscript</csymbol><ci id="S2.SS2.p4.1.m1.6.6.1.1.2.2.cmml" xref="S2.SS2.p4.1.m1.6.6.1.1.2.2">𝑥</ci><ci id="S2.SS2.p4.1.m1.6.6.1.1.2.3.cmml" xref="S2.SS2.p4.1.m1.6.6.1.1.2.3">𝑚</ci></apply><list id="S2.SS2.p4.1.m1.2.2.2.3.cmml" xref="S2.SS2.p4.1.m1.2.2.2.4"><cn id="S2.SS2.p4.1.m1.1.1.1.1.cmml" type="integer" xref="S2.SS2.p4.1.m1.1.1.1.1">1</cn><cn id="S2.SS2.p4.1.m1.2.2.2.2.cmml" type="integer" xref="S2.SS2.p4.1.m1.2.2.2.2">1</cn></list></apply><ci id="S2.SS2.p4.1.m1.5.5.cmml" xref="S2.SS2.p4.1.m1.5.5">⋯</ci><apply id="S2.SS2.p4.1.m1.7.7.2.2.cmml" xref="S2.SS2.p4.1.m1.7.7.2.2"><csymbol cd="ambiguous" id="S2.SS2.p4.1.m1.7.7.2.2.1.cmml" xref="S2.SS2.p4.1.m1.7.7.2.2">subscript</csymbol><apply id="S2.SS2.p4.1.m1.7.7.2.2.2.cmml" xref="S2.SS2.p4.1.m1.7.7.2.2"><csymbol cd="ambiguous" id="S2.SS2.p4.1.m1.7.7.2.2.2.1.cmml" xref="S2.SS2.p4.1.m1.7.7.2.2">superscript</csymbol><ci id="S2.SS2.p4.1.m1.7.7.2.2.2.2.cmml" xref="S2.SS2.p4.1.m1.7.7.2.2.2.2">𝑥</ci><ci id="S2.SS2.p4.1.m1.7.7.2.2.2.3.cmml" xref="S2.SS2.p4.1.m1.7.7.2.2.2.3">𝑚</ci></apply><list id="S2.SS2.p4.1.m1.4.4.2.3.cmml" xref="S2.SS2.p4.1.m1.4.4.2.2"><apply id="S2.SS2.p4.1.m1.3.3.1.1.1.cmml" xref="S2.SS2.p4.1.m1.3.3.1.1.1"><minus id="S2.SS2.p4.1.m1.3.3.1.1.1.1.cmml" xref="S2.SS2.p4.1.m1.3.3.1.1.1.1"></minus><ci id="S2.SS2.p4.1.m1.3.3.1.1.1.2.cmml" xref="S2.SS2.p4.1.m1.3.3.1.1.1.2">𝑖</ci><cn id="S2.SS2.p4.1.m1.3.3.1.1.1.3.cmml" type="integer" xref="S2.SS2.p4.1.m1.3.3.1.1.1.3">1</cn></apply><apply id="S2.SS2.p4.1.m1.4.4.2.2.2.cmml" xref="S2.SS2.p4.1.m1.4.4.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.p4.1.m1.4.4.2.2.2.1.cmml" xref="S2.SS2.p4.1.m1.4.4.2.2.2">subscript</csymbol><ci id="S2.SS2.p4.1.m1.4.4.2.2.2.2.cmml" xref="S2.SS2.p4.1.m1.4.4.2.2.2.2">𝑘</ci><apply id="S2.SS2.p4.1.m1.4.4.2.2.2.3.cmml" xref="S2.SS2.p4.1.m1.4.4.2.2.2.3"><minus id="S2.SS2.p4.1.m1.4.4.2.2.2.3.1.cmml" xref="S2.SS2.p4.1.m1.4.4.2.2.2.3.1"></minus><ci id="S2.SS2.p4.1.m1.4.4.2.2.2.3.2.cmml" xref="S2.SS2.p4.1.m1.4.4.2.2.2.3.2">𝑖</ci><cn id="S2.SS2.p4.1.m1.4.4.2.2.2.3.3.cmml" type="integer" xref="S2.SS2.p4.1.m1.4.4.2.2.2.3.3">1</cn></apply></apply></list></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.1.m1.7c">\{x^{m}_{1,1},\cdots,x^{m}_{i-1,k_{i-1}}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.1.m1.7d">{ italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 1 , 1 end_POSTSUBSCRIPT , ⋯ , italic_x start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i - 1 , italic_k start_POSTSUBSCRIPT italic_i - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT }</annotation></semantics></math> and recent raw tokens <math alttext="\{x_{i,1},\cdots,x_{i,j-1}\}" class="ltx_Math" display="inline" id="S2.SS2.p4.2.m2.7"><semantics id="S2.SS2.p4.2.m2.7a"><mrow id="S2.SS2.p4.2.m2.7.7.2" xref="S2.SS2.p4.2.m2.7.7.3.cmml"><mo id="S2.SS2.p4.2.m2.7.7.2.3" stretchy="false" xref="S2.SS2.p4.2.m2.7.7.3.cmml">{</mo><msub id="S2.SS2.p4.2.m2.6.6.1.1" xref="S2.SS2.p4.2.m2.6.6.1.1.cmml"><mi id="S2.SS2.p4.2.m2.6.6.1.1.2" xref="S2.SS2.p4.2.m2.6.6.1.1.2.cmml">x</mi><mrow id="S2.SS2.p4.2.m2.2.2.2.4" xref="S2.SS2.p4.2.m2.2.2.2.3.cmml"><mi id="S2.SS2.p4.2.m2.1.1.1.1" xref="S2.SS2.p4.2.m2.1.1.1.1.cmml">i</mi><mo id="S2.SS2.p4.2.m2.2.2.2.4.1" xref="S2.SS2.p4.2.m2.2.2.2.3.cmml">,</mo><mn id="S2.SS2.p4.2.m2.2.2.2.2" xref="S2.SS2.p4.2.m2.2.2.2.2.cmml">1</mn></mrow></msub><mo id="S2.SS2.p4.2.m2.7.7.2.4" xref="S2.SS2.p4.2.m2.7.7.3.cmml">,</mo><mi id="S2.SS2.p4.2.m2.5.5" mathvariant="normal" xref="S2.SS2.p4.2.m2.5.5.cmml">⋯</mi><mo id="S2.SS2.p4.2.m2.7.7.2.5" xref="S2.SS2.p4.2.m2.7.7.3.cmml">,</mo><msub id="S2.SS2.p4.2.m2.7.7.2.2" xref="S2.SS2.p4.2.m2.7.7.2.2.cmml"><mi id="S2.SS2.p4.2.m2.7.7.2.2.2" xref="S2.SS2.p4.2.m2.7.7.2.2.2.cmml">x</mi><mrow id="S2.SS2.p4.2.m2.4.4.2.2" xref="S2.SS2.p4.2.m2.4.4.2.3.cmml"><mi id="S2.SS2.p4.2.m2.3.3.1.1" xref="S2.SS2.p4.2.m2.3.3.1.1.cmml">i</mi><mo id="S2.SS2.p4.2.m2.4.4.2.2.2" xref="S2.SS2.p4.2.m2.4.4.2.3.cmml">,</mo><mrow id="S2.SS2.p4.2.m2.4.4.2.2.1" xref="S2.SS2.p4.2.m2.4.4.2.2.1.cmml"><mi id="S2.SS2.p4.2.m2.4.4.2.2.1.2" xref="S2.SS2.p4.2.m2.4.4.2.2.1.2.cmml">j</mi><mo id="S2.SS2.p4.2.m2.4.4.2.2.1.1" xref="S2.SS2.p4.2.m2.4.4.2.2.1.1.cmml">−</mo><mn id="S2.SS2.p4.2.m2.4.4.2.2.1.3" xref="S2.SS2.p4.2.m2.4.4.2.2.1.3.cmml">1</mn></mrow></mrow></msub><mo id="S2.SS2.p4.2.m2.7.7.2.6" stretchy="false" xref="S2.SS2.p4.2.m2.7.7.3.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.2.m2.7b"><set id="S2.SS2.p4.2.m2.7.7.3.cmml" xref="S2.SS2.p4.2.m2.7.7.2"><apply id="S2.SS2.p4.2.m2.6.6.1.1.cmml" xref="S2.SS2.p4.2.m2.6.6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.2.m2.6.6.1.1.1.cmml" xref="S2.SS2.p4.2.m2.6.6.1.1">subscript</csymbol><ci id="S2.SS2.p4.2.m2.6.6.1.1.2.cmml" xref="S2.SS2.p4.2.m2.6.6.1.1.2">𝑥</ci><list id="S2.SS2.p4.2.m2.2.2.2.3.cmml" xref="S2.SS2.p4.2.m2.2.2.2.4"><ci id="S2.SS2.p4.2.m2.1.1.1.1.cmml" xref="S2.SS2.p4.2.m2.1.1.1.1">𝑖</ci><cn id="S2.SS2.p4.2.m2.2.2.2.2.cmml" type="integer" xref="S2.SS2.p4.2.m2.2.2.2.2">1</cn></list></apply><ci id="S2.SS2.p4.2.m2.5.5.cmml" xref="S2.SS2.p4.2.m2.5.5">⋯</ci><apply id="S2.SS2.p4.2.m2.7.7.2.2.cmml" xref="S2.SS2.p4.2.m2.7.7.2.2"><csymbol cd="ambiguous" id="S2.SS2.p4.2.m2.7.7.2.2.1.cmml" xref="S2.SS2.p4.2.m2.7.7.2.2">subscript</csymbol><ci id="S2.SS2.p4.2.m2.7.7.2.2.2.cmml" xref="S2.SS2.p4.2.m2.7.7.2.2.2">𝑥</ci><list id="S2.SS2.p4.2.m2.4.4.2.3.cmml" xref="S2.SS2.p4.2.m2.4.4.2.2"><ci id="S2.SS2.p4.2.m2.3.3.1.1.cmml" xref="S2.SS2.p4.2.m2.3.3.1.1">𝑖</ci><apply id="S2.SS2.p4.2.m2.4.4.2.2.1.cmml" xref="S2.SS2.p4.2.m2.4.4.2.2.1"><minus id="S2.SS2.p4.2.m2.4.4.2.2.1.1.cmml" xref="S2.SS2.p4.2.m2.4.4.2.2.1.1"></minus><ci id="S2.SS2.p4.2.m2.4.4.2.2.1.2.cmml" xref="S2.SS2.p4.2.m2.4.4.2.2.1.2">𝑗</ci><cn id="S2.SS2.p4.2.m2.4.4.2.2.1.3.cmml" type="integer" xref="S2.SS2.p4.2.m2.4.4.2.2.1.3">1</cn></apply></list></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.2.m2.7c">\{x_{i,1},\cdots,x_{i,j-1}\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.2.m2.7d">{ italic_x start_POSTSUBSCRIPT italic_i , 1 end_POSTSUBSCRIPT , ⋯ , italic_x start_POSTSUBSCRIPT italic_i , italic_j - 1 end_POSTSUBSCRIPT }</annotation></semantics></math>.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>The MemoRAG Framework</h3>
<div class="ltx_para ltx_noindent" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.7">In the previous section, the input sequence <math alttext="{\mathcal{X}}" class="ltx_Math" display="inline" id="S2.SS3.p1.1.m1.1"><semantics id="S2.SS3.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.1.m1.1.1" xref="S2.SS3.p1.1.m1.1.1.cmml">𝒳</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.1b"><ci id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1">𝒳</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.1c">{\mathcal{X}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.1.m1.1d">caligraphic_X</annotation></semantics></math> was transformed into a compact memory representation <math alttext="\bm{{\mathcal{X}}}^{m}" class="ltx_Math" display="inline" id="S2.SS3.p1.2.m2.1"><semantics id="S2.SS3.p1.2.m2.1a"><msup id="S2.SS3.p1.2.m2.1.1" xref="S2.SS3.p1.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.2.m2.1.1.2" xref="S2.SS3.p1.2.m2.1.1.2.cmml">𝓧</mi><mi id="S2.SS3.p1.2.m2.1.1.3" xref="S2.SS3.p1.2.m2.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.2.m2.1b"><apply id="S2.SS3.p1.2.m2.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.2.m2.1.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1">superscript</csymbol><ci id="S2.SS3.p1.2.m2.1.1.2.cmml" xref="S2.SS3.p1.2.m2.1.1.2">𝓧</ci><ci id="S2.SS3.p1.2.m2.1.1.3.cmml" xref="S2.SS3.p1.2.m2.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.2.m2.1c">\bm{{\mathcal{X}}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.2.m2.1d">bold_caligraphic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>, which encapsulates high-level semantic information from a global perspective. A straightforward way to utilize this memory <math alttext="\bm{{\mathcal{X}}}^{m}" class="ltx_Math" display="inline" id="S2.SS3.p1.3.m3.1"><semantics id="S2.SS3.p1.3.m3.1a"><msup id="S2.SS3.p1.3.m3.1.1" xref="S2.SS3.p1.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.3.m3.1.1.2" xref="S2.SS3.p1.3.m3.1.1.2.cmml">𝓧</mi><mi id="S2.SS3.p1.3.m3.1.1.3" xref="S2.SS3.p1.3.m3.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.3.m3.1b"><apply id="S2.SS3.p1.3.m3.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.3.m3.1.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1">superscript</csymbol><ci id="S2.SS3.p1.3.m3.1.1.2.cmml" xref="S2.SS3.p1.3.m3.1.1.2">𝓧</ci><ci id="S2.SS3.p1.3.m3.1.1.3.cmml" xref="S2.SS3.p1.3.m3.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.3.m3.1c">\bm{{\mathcal{X}}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.3.m3.1d">bold_caligraphic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> is to prompt it to generate task-specific answers, i.e., <math alttext="{\mathcal{Y}}=\Theta_{\text{mem}}(\bm{{\mathcal{X}}}^{m},q|\theta)" class="ltx_Math" display="inline" id="S2.SS3.p1.4.m4.2"><semantics id="S2.SS3.p1.4.m4.2a"><mrow id="S2.SS3.p1.4.m4.2.2" xref="S2.SS3.p1.4.m4.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.4.m4.2.2.4" xref="S2.SS3.p1.4.m4.2.2.4.cmml">𝒴</mi><mo id="S2.SS3.p1.4.m4.2.2.3" xref="S2.SS3.p1.4.m4.2.2.3.cmml">=</mo><mrow id="S2.SS3.p1.4.m4.2.2.2" xref="S2.SS3.p1.4.m4.2.2.2.cmml"><msub id="S2.SS3.p1.4.m4.2.2.2.4" xref="S2.SS3.p1.4.m4.2.2.2.4.cmml"><mi id="S2.SS3.p1.4.m4.2.2.2.4.2" mathvariant="normal" xref="S2.SS3.p1.4.m4.2.2.2.4.2.cmml">Θ</mi><mtext id="S2.SS3.p1.4.m4.2.2.2.4.3" xref="S2.SS3.p1.4.m4.2.2.2.4.3a.cmml">mem</mtext></msub><mo id="S2.SS3.p1.4.m4.2.2.2.3" xref="S2.SS3.p1.4.m4.2.2.2.3.cmml">⁢</mo><mrow id="S2.SS3.p1.4.m4.2.2.2.2.2" xref="S2.SS3.p1.4.m4.2.2.2.2.3.cmml"><mo id="S2.SS3.p1.4.m4.2.2.2.2.2.3" stretchy="false" xref="S2.SS3.p1.4.m4.2.2.2.2.3.cmml">(</mo><msup id="S2.SS3.p1.4.m4.1.1.1.1.1.1" xref="S2.SS3.p1.4.m4.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.4.m4.1.1.1.1.1.1.2" xref="S2.SS3.p1.4.m4.1.1.1.1.1.1.2.cmml">𝓧</mi><mi id="S2.SS3.p1.4.m4.1.1.1.1.1.1.3" xref="S2.SS3.p1.4.m4.1.1.1.1.1.1.3.cmml">m</mi></msup><mo id="S2.SS3.p1.4.m4.2.2.2.2.2.4" xref="S2.SS3.p1.4.m4.2.2.2.2.3.cmml">,</mo><mrow id="S2.SS3.p1.4.m4.2.2.2.2.2.2" xref="S2.SS3.p1.4.m4.2.2.2.2.2.2.cmml"><mi id="S2.SS3.p1.4.m4.2.2.2.2.2.2.2" xref="S2.SS3.p1.4.m4.2.2.2.2.2.2.2.cmml">q</mi><mo fence="false" id="S2.SS3.p1.4.m4.2.2.2.2.2.2.1" xref="S2.SS3.p1.4.m4.2.2.2.2.2.2.1.cmml">|</mo><mi id="S2.SS3.p1.4.m4.2.2.2.2.2.2.3" xref="S2.SS3.p1.4.m4.2.2.2.2.2.2.3.cmml">θ</mi></mrow><mo id="S2.SS3.p1.4.m4.2.2.2.2.2.5" stretchy="false" xref="S2.SS3.p1.4.m4.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.4.m4.2b"><apply id="S2.SS3.p1.4.m4.2.2.cmml" xref="S2.SS3.p1.4.m4.2.2"><eq id="S2.SS3.p1.4.m4.2.2.3.cmml" xref="S2.SS3.p1.4.m4.2.2.3"></eq><ci id="S2.SS3.p1.4.m4.2.2.4.cmml" xref="S2.SS3.p1.4.m4.2.2.4">𝒴</ci><apply id="S2.SS3.p1.4.m4.2.2.2.cmml" xref="S2.SS3.p1.4.m4.2.2.2"><times id="S2.SS3.p1.4.m4.2.2.2.3.cmml" xref="S2.SS3.p1.4.m4.2.2.2.3"></times><apply id="S2.SS3.p1.4.m4.2.2.2.4.cmml" xref="S2.SS3.p1.4.m4.2.2.2.4"><csymbol cd="ambiguous" id="S2.SS3.p1.4.m4.2.2.2.4.1.cmml" xref="S2.SS3.p1.4.m4.2.2.2.4">subscript</csymbol><ci id="S2.SS3.p1.4.m4.2.2.2.4.2.cmml" xref="S2.SS3.p1.4.m4.2.2.2.4.2">Θ</ci><ci id="S2.SS3.p1.4.m4.2.2.2.4.3a.cmml" xref="S2.SS3.p1.4.m4.2.2.2.4.3"><mtext id="S2.SS3.p1.4.m4.2.2.2.4.3.cmml" mathsize="70%" xref="S2.SS3.p1.4.m4.2.2.2.4.3">mem</mtext></ci></apply><interval closure="open" id="S2.SS3.p1.4.m4.2.2.2.2.3.cmml" xref="S2.SS3.p1.4.m4.2.2.2.2.2"><apply id="S2.SS3.p1.4.m4.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.4.m4.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1.1.1.1.1">superscript</csymbol><ci id="S2.SS3.p1.4.m4.1.1.1.1.1.1.2.cmml" xref="S2.SS3.p1.4.m4.1.1.1.1.1.1.2">𝓧</ci><ci id="S2.SS3.p1.4.m4.1.1.1.1.1.1.3.cmml" xref="S2.SS3.p1.4.m4.1.1.1.1.1.1.3">𝑚</ci></apply><apply id="S2.SS3.p1.4.m4.2.2.2.2.2.2.cmml" xref="S2.SS3.p1.4.m4.2.2.2.2.2.2"><csymbol cd="latexml" id="S2.SS3.p1.4.m4.2.2.2.2.2.2.1.cmml" xref="S2.SS3.p1.4.m4.2.2.2.2.2.2.1">conditional</csymbol><ci id="S2.SS3.p1.4.m4.2.2.2.2.2.2.2.cmml" xref="S2.SS3.p1.4.m4.2.2.2.2.2.2.2">𝑞</ci><ci id="S2.SS3.p1.4.m4.2.2.2.2.2.2.3.cmml" xref="S2.SS3.p1.4.m4.2.2.2.2.2.2.3">𝜃</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.4.m4.2c">{\mathcal{Y}}=\Theta_{\text{mem}}(\bm{{\mathcal{X}}}^{m},q|\theta)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.4.m4.2d">caligraphic_Y = roman_Θ start_POSTSUBSCRIPT mem end_POSTSUBSCRIPT ( bold_caligraphic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT , italic_q | italic_θ )</annotation></semantics></math>, where <math alttext="q" class="ltx_Math" display="inline" id="S2.SS3.p1.5.m5.1"><semantics id="S2.SS3.p1.5.m5.1a"><mi id="S2.SS3.p1.5.m5.1.1" xref="S2.SS3.p1.5.m5.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.5.m5.1b"><ci id="S2.SS3.p1.5.m5.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.5.m5.1c">q</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.5.m5.1d">italic_q</annotation></semantics></math> represents the task description (e.g., a query or a summarization instruction). While this approach is feasible, it may lack information accuracy since <math alttext="\bm{{\mathcal{X}}}^{m}" class="ltx_Math" display="inline" id="S2.SS3.p1.6.m6.1"><semantics id="S2.SS3.p1.6.m6.1a"><msup id="S2.SS3.p1.6.m6.1.1" xref="S2.SS3.p1.6.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.6.m6.1.1.2" xref="S2.SS3.p1.6.m6.1.1.2.cmml">𝓧</mi><mi id="S2.SS3.p1.6.m6.1.1.3" xref="S2.SS3.p1.6.m6.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.6.m6.1b"><apply id="S2.SS3.p1.6.m6.1.1.cmml" xref="S2.SS3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.6.m6.1.1.1.cmml" xref="S2.SS3.p1.6.m6.1.1">superscript</csymbol><ci id="S2.SS3.p1.6.m6.1.1.2.cmml" xref="S2.SS3.p1.6.m6.1.1.2">𝓧</ci><ci id="S2.SS3.p1.6.m6.1.1.3.cmml" xref="S2.SS3.p1.6.m6.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.6.m6.1c">\bm{{\mathcal{X}}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.6.m6.1d">bold_caligraphic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> is a highly condensed form of the raw input sequence <math alttext="{\mathcal{X}}" class="ltx_Math" display="inline" id="S2.SS3.p1.7.m7.1"><semantics id="S2.SS3.p1.7.m7.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.7.m7.1.1" xref="S2.SS3.p1.7.m7.1.1.cmml">𝒳</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.7.m7.1b"><ci id="S2.SS3.p1.7.m7.1.1.cmml" xref="S2.SS3.p1.7.m7.1.1">𝒳</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.7.m7.1c">{\mathcal{X}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.7.m7.1d">caligraphic_X</annotation></semantics></math>. This is analogous to how humans may struggle to recall detailed information from memory but can generate a draft answer, which can then be refined by revisiting and finding relevant evidence.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS3.p2">
<p class="ltx_p" id="S2.SS3.p2.3">In MemoRAG, the global memory <math alttext="\bm{{\mathcal{X}}}^{m}" class="ltx_Math" display="inline" id="S2.SS3.p2.1.m1.1"><semantics id="S2.SS3.p2.1.m1.1a"><msup id="S2.SS3.p2.1.m1.1.1" xref="S2.SS3.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p2.1.m1.1.1.2" xref="S2.SS3.p2.1.m1.1.1.2.cmml">𝓧</mi><mi id="S2.SS3.p2.1.m1.1.1.3" xref="S2.SS3.p2.1.m1.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.SS3.p2.1.m1.1b"><apply id="S2.SS3.p2.1.m1.1.1.cmml" xref="S2.SS3.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p2.1.m1.1.1.1.cmml" xref="S2.SS3.p2.1.m1.1.1">superscript</csymbol><ci id="S2.SS3.p2.1.m1.1.1.2.cmml" xref="S2.SS3.p2.1.m1.1.1.2">𝓧</ci><ci id="S2.SS3.p2.1.m1.1.1.3.cmml" xref="S2.SS3.p2.1.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p2.1.m1.1c">\bm{{\mathcal{X}}}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p2.1.m1.1d">bold_caligraphic_X start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> is used to generate task-specific clues <math alttext="y" class="ltx_Math" display="inline" id="S2.SS3.p2.2.m2.1"><semantics id="S2.SS3.p2.2.m2.1a"><mi id="S2.SS3.p2.2.m2.1.1" xref="S2.SS3.p2.2.m2.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p2.2.m2.1b"><ci id="S2.SS3.p2.2.m2.1.1.cmml" xref="S2.SS3.p2.2.m2.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p2.2.m2.1c">y</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p2.2.m2.1d">italic_y</annotation></semantics></math>. These clues help outline the expected answers <math alttext="{\mathcal{Y}}" class="ltx_Math" display="inline" id="S2.SS3.p2.3.m3.1"><semantics id="S2.SS3.p2.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p2.3.m3.1.1" xref="S2.SS3.p2.3.m3.1.1.cmml">𝒴</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p2.3.m3.1b"><ci id="S2.SS3.p2.3.m3.1.1.cmml" xref="S2.SS3.p2.3.m3.1.1">𝒴</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p2.3.m3.1c">{\mathcal{Y}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p2.3.m3.1d">caligraphic_Y</annotation></semantics></math>, effectively bridging the gap between the raw input context and the ground-truth answer. Based on these memory-generated clues, any stand-alone retriever can be employed to locate the precise evidence text within the input sequence, as defined in Eq. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.E2" title="In 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">2</span></a>).</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS3.p3">
<p class="ltx_p" id="S2.SS3.p3.5">Subsequently, the final answer <math alttext="{\mathcal{Y}}" class="ltx_Math" display="inline" id="S2.SS3.p3.1.m1.1"><semantics id="S2.SS3.p3.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p3.1.m1.1.1" xref="S2.SS3.p3.1.m1.1.1.cmml">𝒴</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.1.m1.1b"><ci id="S2.SS3.p3.1.m1.1.1.cmml" xref="S2.SS3.p3.1.m1.1.1">𝒴</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.1.m1.1c">{\mathcal{Y}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.1.m1.1d">caligraphic_Y</annotation></semantics></math> is generated based on the retrieved evidence text, <math alttext="{\mathcal{Y}}=\Theta_{\text{gen}}(\hat{{\mathcal{X}}},q|\theta)" class="ltx_Math" display="inline" id="S2.SS3.p3.2.m2.2"><semantics id="S2.SS3.p3.2.m2.2a"><mrow id="S2.SS3.p3.2.m2.2.2" xref="S2.SS3.p3.2.m2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p3.2.m2.2.2.3" xref="S2.SS3.p3.2.m2.2.2.3.cmml">𝒴</mi><mo id="S2.SS3.p3.2.m2.2.2.2" xref="S2.SS3.p3.2.m2.2.2.2.cmml">=</mo><mrow id="S2.SS3.p3.2.m2.2.2.1" xref="S2.SS3.p3.2.m2.2.2.1.cmml"><msub id="S2.SS3.p3.2.m2.2.2.1.3" xref="S2.SS3.p3.2.m2.2.2.1.3.cmml"><mi id="S2.SS3.p3.2.m2.2.2.1.3.2" mathvariant="normal" xref="S2.SS3.p3.2.m2.2.2.1.3.2.cmml">Θ</mi><mtext id="S2.SS3.p3.2.m2.2.2.1.3.3" xref="S2.SS3.p3.2.m2.2.2.1.3.3a.cmml">gen</mtext></msub><mo id="S2.SS3.p3.2.m2.2.2.1.2" xref="S2.SS3.p3.2.m2.2.2.1.2.cmml">⁢</mo><mrow id="S2.SS3.p3.2.m2.2.2.1.1.1" xref="S2.SS3.p3.2.m2.2.2.1.1.2.cmml"><mo id="S2.SS3.p3.2.m2.2.2.1.1.1.2" stretchy="false" xref="S2.SS3.p3.2.m2.2.2.1.1.2.cmml">(</mo><mover accent="true" id="S2.SS3.p3.2.m2.1.1" xref="S2.SS3.p3.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p3.2.m2.1.1.2" xref="S2.SS3.p3.2.m2.1.1.2.cmml">𝒳</mi><mo id="S2.SS3.p3.2.m2.1.1.1" xref="S2.SS3.p3.2.m2.1.1.1.cmml">^</mo></mover><mo id="S2.SS3.p3.2.m2.2.2.1.1.1.3" xref="S2.SS3.p3.2.m2.2.2.1.1.2.cmml">,</mo><mrow id="S2.SS3.p3.2.m2.2.2.1.1.1.1" xref="S2.SS3.p3.2.m2.2.2.1.1.1.1.cmml"><mi id="S2.SS3.p3.2.m2.2.2.1.1.1.1.2" xref="S2.SS3.p3.2.m2.2.2.1.1.1.1.2.cmml">q</mi><mo fence="false" id="S2.SS3.p3.2.m2.2.2.1.1.1.1.1" xref="S2.SS3.p3.2.m2.2.2.1.1.1.1.1.cmml">|</mo><mi id="S2.SS3.p3.2.m2.2.2.1.1.1.1.3" xref="S2.SS3.p3.2.m2.2.2.1.1.1.1.3.cmml">θ</mi></mrow><mo id="S2.SS3.p3.2.m2.2.2.1.1.1.4" stretchy="false" xref="S2.SS3.p3.2.m2.2.2.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.2.m2.2b"><apply id="S2.SS3.p3.2.m2.2.2.cmml" xref="S2.SS3.p3.2.m2.2.2"><eq id="S2.SS3.p3.2.m2.2.2.2.cmml" xref="S2.SS3.p3.2.m2.2.2.2"></eq><ci id="S2.SS3.p3.2.m2.2.2.3.cmml" xref="S2.SS3.p3.2.m2.2.2.3">𝒴</ci><apply id="S2.SS3.p3.2.m2.2.2.1.cmml" xref="S2.SS3.p3.2.m2.2.2.1"><times id="S2.SS3.p3.2.m2.2.2.1.2.cmml" xref="S2.SS3.p3.2.m2.2.2.1.2"></times><apply id="S2.SS3.p3.2.m2.2.2.1.3.cmml" xref="S2.SS3.p3.2.m2.2.2.1.3"><csymbol cd="ambiguous" id="S2.SS3.p3.2.m2.2.2.1.3.1.cmml" xref="S2.SS3.p3.2.m2.2.2.1.3">subscript</csymbol><ci id="S2.SS3.p3.2.m2.2.2.1.3.2.cmml" xref="S2.SS3.p3.2.m2.2.2.1.3.2">Θ</ci><ci id="S2.SS3.p3.2.m2.2.2.1.3.3a.cmml" xref="S2.SS3.p3.2.m2.2.2.1.3.3"><mtext id="S2.SS3.p3.2.m2.2.2.1.3.3.cmml" mathsize="70%" xref="S2.SS3.p3.2.m2.2.2.1.3.3">gen</mtext></ci></apply><interval closure="open" id="S2.SS3.p3.2.m2.2.2.1.1.2.cmml" xref="S2.SS3.p3.2.m2.2.2.1.1.1"><apply id="S2.SS3.p3.2.m2.1.1.cmml" xref="S2.SS3.p3.2.m2.1.1"><ci id="S2.SS3.p3.2.m2.1.1.1.cmml" xref="S2.SS3.p3.2.m2.1.1.1">^</ci><ci id="S2.SS3.p3.2.m2.1.1.2.cmml" xref="S2.SS3.p3.2.m2.1.1.2">𝒳</ci></apply><apply id="S2.SS3.p3.2.m2.2.2.1.1.1.1.cmml" xref="S2.SS3.p3.2.m2.2.2.1.1.1.1"><csymbol cd="latexml" id="S2.SS3.p3.2.m2.2.2.1.1.1.1.1.cmml" xref="S2.SS3.p3.2.m2.2.2.1.1.1.1.1">conditional</csymbol><ci id="S2.SS3.p3.2.m2.2.2.1.1.1.1.2.cmml" xref="S2.SS3.p3.2.m2.2.2.1.1.1.1.2">𝑞</ci><ci id="S2.SS3.p3.2.m2.2.2.1.1.1.1.3.cmml" xref="S2.SS3.p3.2.m2.2.2.1.1.1.1.3">𝜃</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.2.m2.2c">{\mathcal{Y}}=\Theta_{\text{gen}}(\hat{{\mathcal{X}}},q|\theta)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.2.m2.2d">caligraphic_Y = roman_Θ start_POSTSUBSCRIPT gen end_POSTSUBSCRIPT ( over^ start_ARG caligraphic_X end_ARG , italic_q | italic_θ )</annotation></semantics></math>, where <math alttext="\hat{{\mathcal{X}}}" class="ltx_Math" display="inline" id="S2.SS3.p3.3.m3.1"><semantics id="S2.SS3.p3.3.m3.1a"><mover accent="true" id="S2.SS3.p3.3.m3.1.1" xref="S2.SS3.p3.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p3.3.m3.1.1.2" xref="S2.SS3.p3.3.m3.1.1.2.cmml">𝒳</mi><mo id="S2.SS3.p3.3.m3.1.1.1" xref="S2.SS3.p3.3.m3.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.3.m3.1b"><apply id="S2.SS3.p3.3.m3.1.1.cmml" xref="S2.SS3.p3.3.m3.1.1"><ci id="S2.SS3.p3.3.m3.1.1.1.cmml" xref="S2.SS3.p3.3.m3.1.1.1">^</ci><ci id="S2.SS3.p3.3.m3.1.1.2.cmml" xref="S2.SS3.p3.3.m3.1.1.2">𝒳</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.3.m3.1c">\hat{{\mathcal{X}}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.3.m3.1d">over^ start_ARG caligraphic_X end_ARG</annotation></semantics></math> includes the input query or task instruction <math alttext="q" class="ltx_Math" display="inline" id="S2.SS3.p3.4.m4.1"><semantics id="S2.SS3.p3.4.m4.1a"><mi id="S2.SS3.p3.4.m4.1.1" xref="S2.SS3.p3.4.m4.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.4.m4.1b"><ci id="S2.SS3.p3.4.m4.1.1.cmml" xref="S2.SS3.p3.4.m4.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.4.m4.1c">q</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.4.m4.1d">italic_q</annotation></semantics></math> and the retrieved context <math alttext="\hat{{\mathcal{C}}}" class="ltx_Math" display="inline" id="S2.SS3.p3.5.m5.1"><semantics id="S2.SS3.p3.5.m5.1a"><mover accent="true" id="S2.SS3.p3.5.m5.1.1" xref="S2.SS3.p3.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p3.5.m5.1.1.2" xref="S2.SS3.p3.5.m5.1.1.2.cmml">𝒞</mi><mo id="S2.SS3.p3.5.m5.1.1.1" xref="S2.SS3.p3.5.m5.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.5.m5.1b"><apply id="S2.SS3.p3.5.m5.1.1.cmml" xref="S2.SS3.p3.5.m5.1.1"><ci id="S2.SS3.p3.5.m5.1.1.1.cmml" xref="S2.SS3.p3.5.m5.1.1.1">^</ci><ci id="S2.SS3.p3.5.m5.1.1.2.cmml" xref="S2.SS3.p3.5.m5.1.1.2">𝒞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.5.m5.1c">\hat{{\mathcal{C}}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.5.m5.1d">over^ start_ARG caligraphic_C end_ARG</annotation></semantics></math>. The generation model can be any generative LM, and by default, MemoRAG utilizes the underlying LM of the memory model for generation, avoiding the need to load additional model parameters.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.4 </span>Applicability</h3>
<div class="ltx_para ltx_noindent" id="S2.SS4.p1">
<p class="ltx_p" id="S2.SS4.p1.1">In the following sections, we demonstrate how global memory can expand the applicability of standard RAG, making it suitable for more general-purpose tasks.</p>
</div>
<section class="ltx_paragraph" id="S2.SS4.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Ambiguous Information Needs</h4>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS4.SSS0.Px1.p1.1">Information seeking with ambiguous information needs is challenging for standard RAG, as the user’s intent is often not explicitly stated, requiring deeper contextual understanding and inferential reasoning.
To address this, MemoRAG creates a global memory across the relevant database, enabling it to infer the underlying intent of implicit queries. By generating staging answers, such as more specific answer clues, MemoRAG bridges the gap between implicit information needs and the retrieval process. This significantly broadens the applicability of standard RAG systems to a wider range of tasks involving implicit queries.</p>
</div>
<div class="ltx_para" id="S2.SS4.SSS0.Px1.p2">
<p class="ltx_p" id="S2.SS4.SSS0.Px1.p2.1">In Table <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.T1" title="Table 1 ‣ Ambiguous Information Needs ‣ 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">1</span></a>, we illustrate how MemoRAG handles implicit queries. For instance, the input query “How does the book convey the theme of love?” lacks a direct semantic connection with the content in the relevant database, as “the theme of love” is not explicitly stated in the raw text. MemoRAG forms a global memory across the entire database and generates key answer clues that facilitate the retrieval of relevant content from the database.</p>
</div>
<figure class="ltx_table" id="S2.T1">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Case for Information Seeking with Implicit Query.</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S2.T1.1">
<tr class="ltx_tr" id="S2.T1.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S2.T1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.1.1.1">
<span class="ltx_p" id="S2.T1.1.1.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T1.1.1.1.1.1.1">Query</span>: How the book convey the theme of love?</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.2.1.1">
<span class="ltx_p" id="S2.T1.1.2.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T1.1.2.1.1.1.1">Database</span>: Harry Potter series</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.3">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S2.T1.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.3.1.1">
<span class="ltx_p" id="S2.T1.1.3.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T1.1.3.1.1.1.1">Clues #1</span>: Lily Potter’s sacrifice</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.4.1.1">
<span class="ltx_p" id="S2.T1.1.4.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T1.1.4.1.1.1.1">Clues #2</span>: The Weasley Family</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T1.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.5.1.1">
<span class="ltx_p" id="S2.T1.1.5.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T1.1.5.1.1.1.1">Clues #3</span>: Romantic relationship with Ginny Weasley</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T1.1.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S2.T1.1.6.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T1.1.6.1.1">
<span class="ltx_p" id="S2.T1.1.6.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T1.1.6.1.1.1.1">Answer</span>: The theme of love is conveyed through various key moments and relationships in the Harry Potter series. Lily Potter’s sacrifice is a profound example of a mother’s love, which protects Harry and plays a central role in the story. The Weasley family embodies the warmth and support of familial love, providing Harry with a sense of belonging and stability. Additionally, the romantic relationship between Harry and Ginny Weasley highlights the development of romantic love throughout the series. These elements collectively illustrate how love, in its many forms, is a powerful and recurring theme in the narrative.</span>
</span>
</td>
</tr>
</table>
</figure>
</section>
<section class="ltx_paragraph" id="S2.SS4.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Information Seeking with Distributed Evidence Query</h4>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS4.SSS0.Px2.p1.1">Information seeking with queries that require distributed evidence gathering introduces additional complexity for standard RAG systems, as these queries require integrating knowledge across multiple steps or unstructured database. Most retrieval methods struggle with these queries because they demand a coherent understanding of interrelated data points, often spanning different contexts.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px2.p2">
<p class="ltx_p" id="S2.SS4.SSS0.Px2.p2.1">To address this challenge, MemoRAG utilizes its global memory capabilities to connect and integrate relevant information across multiple steps within the database. By generating staging answers that guide the retrieval of interconnected data points, MemoRAG effectively manages the complexity of multi-hop queries. This approach allows MemoRAG to significantly enhance the performance of standard RAG systems in tasks that involve multi-hop reasoning.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px2.p3">
<p class="ltx_p" id="S2.SS4.SSS0.Px2.p3.1">In Table <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.T2" title="Table 2 ‣ Information Seeking with Distributed Evidence Query ‣ 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">2</span></a>, we demonstrate how MemoRAG handles such a query. For instance, the input query “Which year had the peak revenue in the past three years?” requires analyzing financial data across multiple years. MemoRAG forms a global memory from the past ten years’ financial reports of a large company, reformulates the multi-hop query into several specific query, and integrates this information to determine the peak revenue year.</p>
</div>
<figure class="ltx_table" id="S2.T2">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Case for Information Seeking with Distributed Evidence Query.</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S2.T2.1">
<tr class="ltx_tr" id="S2.T2.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S2.T2.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T2.1.1.1.1">
<span class="ltx_p" id="S2.T2.1.1.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.1.1.1.1">Query</span>: Which year had the peak revenue in the past three years?</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T2.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T2.1.2.1.1">
<span class="ltx_p" id="S2.T2.1.2.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.2.1.1.1.1">Database</span>: Past ten years’ financial reports of a large company</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.3">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S2.T2.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T2.1.3.1.1">
<span class="ltx_p" id="S2.T2.1.3.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.3.1.1.1.1">Surrogate Query #1</span>: Revenue figures from Year 2021</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T2.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T2.1.4.1.1">
<span class="ltx_p" id="S2.T2.1.4.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.4.1.1.1.1">Surrogate Query #2</span>: Revenue figures from Year 2022</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T2.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T2.1.5.1.1">
<span class="ltx_p" id="S2.T2.1.5.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.5.1.1.1.1">Surrogate Query #3</span>: Revenue figures from Year 2023</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S2.T2.1.6.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T2.1.6.1.1">
<span class="ltx_p" id="S2.T2.1.6.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.6.1.1.1.1">Answer</span>: Year 2021 had the peak revenue</span>
</span>
</td>
</tr>
</table>
</figure>
</section>
<section class="ltx_paragraph" id="S2.SS4.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">Information Aggregation</h4>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px3.p1">
<p class="ltx_p" id="S2.SS4.SSS0.Px3.p1.1">Information aggregation tasks, such as summarizing long documents, require the ability to condense large amounts of unstructured data into concise and coherent outputs. Standard RAG systems often struggle with these tasks because they rely on retrieving discrete pieces of information without a mechanism to effectively combine and summarize them into a comprehensive overview.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px3.p2">
<p class="ltx_p" id="S2.SS4.SSS0.Px3.p2.1">MemoRAG addresses this challenge by leveraging its global memory to capture and synthesize key points from the entire dataset. Through this process, MemoRAG is able to generate intermediate staging answers that represent the essential elements of the content, which are then used to retrieve detailed information from the raw content. All of these information are aggregated to produce a final summarization.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px3.p3">
<p class="ltx_p" id="S2.SS4.SSS0.Px3.p3.1">In Table <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.T3" title="Table 3 ‣ Information Aggregation ‣ 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">3</span></a>, we illustrate how MemoRAG handles an information aggregation task. For instance, the task is to summarize a government report on city construction. MemoRAG first extracts key points from the report, such as infrastructure development, budget allocations, and future planning, then retrieve detailed content, and aggregates these information to produce a comprehensive summary of the report.</p>
</div>
<figure class="ltx_table" id="S2.T3">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Case for Information Aggregation.</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S2.T3.1">
<tr class="ltx_tr" id="S2.T3.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S2.T3.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T3.1.1.1.1">
<span class="ltx_p" id="S2.T3.1.1.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T3.1.1.1.1.1.1">Task</span>: Summarize the government report</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T3.1.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T3.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T3.1.2.1.1">
<span class="ltx_p" id="S2.T3.1.2.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T3.1.2.1.1.1.1">Database</span>: A government report on city construction</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T3.1.3">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S2.T3.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T3.1.3.1.1">
<span class="ltx_p" id="S2.T3.1.3.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T3.1.3.1.1.1.1">Key Points #1</span>: Infrastructure development initiatives</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T3.1.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T3.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T3.1.4.1.1">
<span class="ltx_p" id="S2.T3.1.4.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T3.1.4.1.1.1.1">Key Points #2</span>: Budget allocations and expenditures</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T3.1.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T3.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T3.1.5.1.1">
<span class="ltx_p" id="S2.T3.1.5.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T3.1.5.1.1.1.1">Key Points #3</span>: Future urban planning and zoning</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T3.1.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S2.T3.1.6.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T3.1.6.1.1">
<span class="ltx_p" id="S2.T3.1.6.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T3.1.6.1.1.1.1">Final Summary</span>: The report outlines significant infrastructure projects, details the financial aspects including budget allocations, and presents future urban planning strategies to enhance city construction efforts. Specifically, the report highlights major infrastructure developments such as the construction of new public transportation systems…</span>
</span>
</td>
</tr>
</table>
</figure>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px3.p4">
<p class="ltx_p" id="S2.SS4.SSS0.Px3.p4.1"><span class="ltx_text ltx_font_italic" id="S2.SS4.SSS0.Px3.p4.1.1">The current version of MemoRAG primarily targets the aforementioned application scenarios. Below, we outline our planned application scenarios for MemoRAG, which could be achieved by further training on task-specific training data.</span></p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS4.SSS0.Px4">
<h4 class="ltx_title ltx_title_paragraph">Personalized Assistant</h4>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px4.p1">
<p class="ltx_p" id="S2.SS4.SSS0.Px4.p1.1">Personalized assistant tasks, such as recommending a song based on a user’s preferences, require a deep understanding of the user’s unique characteristics and history. This is because personalized information needs are often ambiguous, heavily influenced by the user’s individual persona. Standard RAG systems may struggle with such tasks because they typically rely on general relevance matching rather than personalizing results based on specific user data.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px4.p2">
<p class="ltx_p" id="S2.SS4.SSS0.Px4.p2.1">MemoRAG enhances personalization by leveraging global memory to analyze and understand the user’s dialogue history. This allows MemoRAG to identify and utilize key clues such as the user’s music preferences, knowledge background, age, and other relevant factors that can be inferred from past interactions. By synthesizing this information, MemoRAG can generate highly personalized recommendations that align closely with the user’s tastes.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px4.p3">
<p class="ltx_p" id="S2.SS4.SSS0.Px4.p3.1">In Table <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.T4" title="Table 4 ‣ Personalized Assistant ‣ 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">4</span></a>, we demonstrate how MemoRAG handles a personalized recommendation query. For example, when asked, “Can you recommend a song for me?” MemoRAG analyzes the dialogue history of the user, identifying preferences for certain music genres, artists, or eras, and uses this information to suggest a song that fits the user’s profile.</p>
</div>
<figure class="ltx_table" id="S2.T4">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Case for Personalized Assistant.</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S2.T4.1">
<tr class="ltx_tr" id="S2.T4.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S2.T4.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T4.1.1.1.1">
<span class="ltx_p" id="S2.T4.1.1.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T4.1.1.1.1.1.1">Query</span>: Can you recommend a song for me?</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T4.1.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T4.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T4.1.2.1.1">
<span class="ltx_p" id="S2.T4.1.2.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T4.1.2.1.1.1.1">Database</span>: Dialogue history of a user</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T4.1.3">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S2.T4.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T4.1.3.1.1">
<span class="ltx_p" id="S2.T4.1.3.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T4.1.3.1.1.1.1">Clues #1</span>: User’s preference for jazz music</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T4.1.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T4.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T4.1.4.1.1">
<span class="ltx_p" id="S2.T4.1.4.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T4.1.4.1.1.1.1">Clues #2</span>: Mentioned fondness for 1980s music</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T4.1.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T4.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T4.1.5.1.1">
<span class="ltx_p" id="S2.T4.1.5.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T4.1.5.1.1.1.1">Clues #3</span>: Knowledge background in music theory</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T4.1.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S2.T4.1.6.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T4.1.6.1.1">
<span class="ltx_p" id="S2.T4.1.6.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T4.1.6.1.1.1.1">Recommendation</span>: “Take Five” by Dave Brubeck, a classic jazz piece from the 1960s that aligns with the user’s preference for jazz and appreciation for music with complex structures.</span>
</span>
</td>
</tr>
</table>
</figure>
</section>
<section class="ltx_paragraph" id="S2.SS4.SSS0.Px5">
<h4 class="ltx_title ltx_title_paragraph">Life-Long Conversational Search</h4>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px5.p1">
<p class="ltx_p" id="S2.SS4.SSS0.Px5.p1.1">Conversational search frequently involves queries with omitted semantics, where the user’s intent relies on the context of prior interactions. Query rewriting is a widely adopted technique to address this challenge. In life-long conversational search, the semantic dependencies of the current query may extend to much earlier interactions, making it essential to accurately identify the relevant context within an extremely long interaction history. Standard RAG systems may struggle with this task due to the ambiguity in the information need presented by the query. This is primarily because standard RAG systems lack the ability to effectively track and incorporate the evolving conversational context, often resulting in incomplete or inaccurate retrievals.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px5.p2">
<p class="ltx_p" id="S2.SS4.SSS0.Px5.p2.1">MemoRAG addresses this challenge by leveraging its global memory to maintain and utilize the full context of the conversational history. This enables the system to interpret queries with omitted semantics by referencing relevant previous exchanges and filling in the gaps in meaning. As a result, MemoRAG can accurately interpret and respond to follow-up queries that depend on prior conversation context.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px5.p3">
<p class="ltx_p" id="S2.SS4.SSS0.Px5.p3.1">For instance, consider the query, “Does it have any weaknesses?” posed after a discussion about a particular research paper. A standard retrieval system might struggle to understand what “it” refers to without explicit context, potentially retrieving irrelevant information. In contrast, MemoRAG would refer back to the previous conversation, recognize that “it” refers to the research paper being discussed, and then retrieve information about the paper’s weaknesses.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS4.SSS0.Px5.p4">
<p class="ltx_p" id="S2.SS4.SSS0.Px5.p4.1">In Table <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S2.T5" title="Table 5 ‣ Life-Long Conversational Search ‣ 2.4 Applicability ‣ 2 MemoRAG ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">5</span></a>, we illustrate how MemoRAG handles a query with omitted semantics in a conversational search context. By drawing on the full conversational history, MemoRAG ensures accurate and contextually appropriate responses.</p>
</div>
<figure class="ltx_table" id="S2.T5">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Case for Conversational Search with Omitted Semantics.</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S2.T5.1">
<tr class="ltx_tr" id="S2.T5.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S2.T5.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T5.1.1.1.1">
<span class="ltx_p" id="S2.T5.1.1.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T5.1.1.1.1.1.1">Query</span>: Does it have any weaknesses compared the paper we discussed last Monday?</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T5.1.2">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T5.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T5.1.2.1.1">
<span class="ltx_p" id="S2.T5.1.2.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T5.1.2.1.1.1.1">Database</span>: Conversational search history involving follow-up questions and answers.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T5.1.3">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S2.T5.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T5.1.3.1.1">
<span class="ltx_p" id="S2.T5.1.3.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T5.1.3.1.1.1.1">Surrogate Query #1</span>: What are the weaknesses of the this paper compared to the “ABC” paper?</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T5.1.4">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T5.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T5.1.4.1.1">
<span class="ltx_p" id="S2.T5.1.4.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T5.1.4.1.1.1.1">Clues #1</span>: This paper claims XXX while the “ABC” paper claims YYY.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T5.1.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S2.T5.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T5.1.5.1.1">
<span class="ltx_p" id="S2.T5.1.5.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T5.1.5.1.1.1.1">Clues #2</span>: The “ABC” paper has several key findings.</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S2.T5.1.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S2.T5.1.6.1">
<span class="ltx_inline-block ltx_align_top" id="S2.T5.1.6.1.1">
<span class="ltx_p" id="S2.T5.1.6.1.1.1" style="width:424.9pt;"><span class="ltx_text ltx_font_bold" id="S2.T5.1.6.1.1.1.1">Answer</span>: The research paper has several weaknesses, including limitations in the methodology and gaps in the data analysis.</span>
</span>
</td>
</tr>
</table>
</figure>
</section>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Experiment</h2>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Dataset</h3>
<div class="ltx_para ltx_noindent" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">The standard RAG system primarily focuses on QA tasks that involve explicit information needs. To assess the effectiveness of MemoRAG compared to the standard RAG system in such tasks, we evaluate both MemoRAG and baseline models using 13 existing benchmark datasets, including:
(1) Single-Doc QA: NarrativeQA <cite class="ltx_cite ltx_citemacro_citep">(Kočiský et al., <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib15" title="">2017</a>)</cite>, Qasper <cite class="ltx_cite ltx_citemacro_citep">(Dasigi et al., <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib6" title="">2021</a>)</cite>, and MultiFieldQA <cite class="ltx_cite ltx_citemacro_citep">(Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib2" title="">2023</a>)</cite>.
(2) Multi-Doc QA: HotpotQA <cite class="ltx_cite ltx_citemacro_citep">(Yang et al., <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib23" title="">2018</a>)</cite>, 2WikiMQA <cite class="ltx_cite ltx_citemacro_citep">(Ho et al., <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib11" title="">2020</a>)</cite>, and MuSiQue <cite class="ltx_cite ltx_citemacro_citep">(Trivedi et al., <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib22" title="">2022</a>)</cite>.
(3) Summarization: GovReport <cite class="ltx_cite ltx_citemacro_citep">(Huang et al., <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib12" title="">2021</a>)</cite>, MultiNews <cite class="ltx_cite ltx_citemacro_citep">(Fabbri et al., <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib8" title="">2019</a>)</cite>, and En.SUM <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib24" title="">2024</a>)</cite>.
(4) Long-book QA: En.QA <cite class="ltx_cite ltx_citemacro_cite">Zhang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib24" title="">2024</a>)</cite>.
For summarization tasks, we use the task instruct as a fake query.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.1">In practical scenarios, not all user queries have explicit information needs. Most queries require a comprehensive understanding of the full context and the aggregation of multiple pieces of information to obtain a final answer. To evaluate MemoRAG and standard RAG systems across a broad range of applications, we have constructed the <span class="ltx_text ltx_font_smallcaps" id="S3.SS1.p2.1.1">UltraDomain </span> benchmark. The benchmark comprises tasks with long context and high-level query on multiple specialized domains.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.1">First, we utilize contexts from datasets representing specialized areas of knowledge, focusing on two specialized datasets. The first is the Fin dataset, derived from financial reports. This dataset tests MemoRAG’s ability to process and interpret complex financial data, ensuring that the system can handle the intricacies of financial language and reporting. The second is the Legal dataset, constructed from legal contracts. This dataset challenges MemoRAG to understand and navigate the complex and nuanced language of legal documents, where precision is critical.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p4">
<p class="ltx_p" id="S3.SS1.p4.1">In addition to these specialized datasets, we collected a diverse set of 428 college textbooks spanning 18 distinct domains, such as natural sciences, humanities, and social sciences, from <a class="ltx_ref ltx_href" href="https://huggingface.co/datasets/P1ayer-1/books-3-textbooks" title="">this repository</a>. These textbooks are used to test MemoRAG’s versatility and adaptability across a wide range of topics that may not directly relate to the specialized datasets. By evaluating MemoRAG on these varied contexts, we gain a deeper understanding of its potential for broader applications beyond specific domains such as finance and law.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p5">
<p class="ltx_p" id="S3.SS1.p5.1">Lastly, we construct a dataset comprising of mixed context from above datasets, namely Mix. This mixed dataset is intended to evaluate how well MemoRAG can generalize its understanding across different types of context.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p6">
<p class="ltx_p" id="S3.SS1.p6.1">The statistical details of the specialized datasets are provided in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#A1.T8" title="Table 8 ‣ Appendix A More details of the Datasets ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">8</span></a>, while the details of the textbook-based datasets are shown in Table <span class="ltx_ref ltx_missing_label ltx_ref_self">LABEL:tab:outdomain</span>. Together, these datasets form a comprehensive benchmark that rigorously tests MemoRAG’s effectiveness in handling both domain-specific challenges and broader, cross-disciplinary tasks.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p7">
<p class="ltx_p" id="S3.SS1.p7.1">Further details on the datasets, their construction, and the evaluation metrics used in this study can be found in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#A1" title="Appendix A More details of the Datasets ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">A</span></a>.</p>
</div>
<figure class="ltx_table" id="S3.T6">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 6: </span>Main experiment results on <span class="ltx_text ltx_font_smallcaps" id="S3.T6.30.1">UltraDomain</span> using Mistral-7B-Instruct-v0.2-32K as the generator. The evaluation metric is the F1-score, with the best results highlighted in bold and the second-best results underlined. The upward arrow <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.3.m1.1"><semantics id="S3.T6.3.m1.1b"><mo id="S3.T6.3.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.3.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.3.m1.1c"><ci id="S3.T6.3.m1.1.1.cmml" xref="S3.T6.3.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.3.m1.1d">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.3.m1.1e">↑</annotation></semantics></math> indicates the improvement over the second-best results. <math alttext="\text{ave}(|{\mathcal{C}}|)" class="ltx_Math" display="inline" id="S3.T6.4.m2.2"><semantics id="S3.T6.4.m2.2b"><mrow id="S3.T6.4.m2.2.2" xref="S3.T6.4.m2.2.2.cmml"><mtext id="S3.T6.4.m2.2.2.3" xref="S3.T6.4.m2.2.2.3a.cmml">ave</mtext><mo id="S3.T6.4.m2.2.2.2" xref="S3.T6.4.m2.2.2.2.cmml">⁢</mo><mrow id="S3.T6.4.m2.2.2.1.1" xref="S3.T6.4.m2.2.2.cmml"><mo id="S3.T6.4.m2.2.2.1.1.2" stretchy="false" xref="S3.T6.4.m2.2.2.cmml">(</mo><mrow id="S3.T6.4.m2.2.2.1.1.1.2" xref="S3.T6.4.m2.2.2.1.1.1.1.cmml"><mo id="S3.T6.4.m2.2.2.1.1.1.2.1" stretchy="false" xref="S3.T6.4.m2.2.2.1.1.1.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="S3.T6.4.m2.1.1" xref="S3.T6.4.m2.1.1.cmml">𝒞</mi><mo id="S3.T6.4.m2.2.2.1.1.1.2.2" stretchy="false" xref="S3.T6.4.m2.2.2.1.1.1.1.1.cmml">|</mo></mrow><mo id="S3.T6.4.m2.2.2.1.1.3" stretchy="false" xref="S3.T6.4.m2.2.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.T6.4.m2.2c"><apply id="S3.T6.4.m2.2.2.cmml" xref="S3.T6.4.m2.2.2"><times id="S3.T6.4.m2.2.2.2.cmml" xref="S3.T6.4.m2.2.2.2"></times><ci id="S3.T6.4.m2.2.2.3a.cmml" xref="S3.T6.4.m2.2.2.3"><mtext id="S3.T6.4.m2.2.2.3.cmml" xref="S3.T6.4.m2.2.2.3">ave</mtext></ci><apply id="S3.T6.4.m2.2.2.1.1.1.1.cmml" xref="S3.T6.4.m2.2.2.1.1.1.2"><abs id="S3.T6.4.m2.2.2.1.1.1.1.1.cmml" xref="S3.T6.4.m2.2.2.1.1.1.2.1"></abs><ci id="S3.T6.4.m2.1.1.cmml" xref="S3.T6.4.m2.1.1">𝒞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.4.m2.2d">\text{ave}(|{\mathcal{C}}|)</annotation><annotation encoding="application/x-llamapun" id="S3.T6.4.m2.2e">ave ( | caligraphic_C | )</annotation></semantics></math> refers to the average context length, counted in thousands of tokens (K).</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S3.T6.28">
<tr class="ltx_tr" id="S3.T6.5.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S3.T6.5.1.2"><span class="ltx_text ltx_font_smallcaps" id="S3.T6.5.1.2.1">UltraDomain</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T6.5.1.3">Full</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T6.5.1.4">BGE-M3</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T6.5.1.5">Stella-v5</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T6.5.1.6">HyDE</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T6.5.1.7">MemoRAG</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T6.5.1.1">
<math alttext="\text{ave}(|{\mathcal{C}}|)" class="ltx_Math" display="inline" id="S3.T6.5.1.1.m1.2"><semantics id="S3.T6.5.1.1.m1.2a"><mrow id="S3.T6.5.1.1.m1.2.2" xref="S3.T6.5.1.1.m1.2.2.cmml"><mtext id="S3.T6.5.1.1.m1.2.2.3" xref="S3.T6.5.1.1.m1.2.2.3a.cmml">ave</mtext><mo id="S3.T6.5.1.1.m1.2.2.2" xref="S3.T6.5.1.1.m1.2.2.2.cmml">⁢</mo><mrow id="S3.T6.5.1.1.m1.2.2.1.1" xref="S3.T6.5.1.1.m1.2.2.cmml"><mo id="S3.T6.5.1.1.m1.2.2.1.1.2" stretchy="false" xref="S3.T6.5.1.1.m1.2.2.cmml">(</mo><mrow id="S3.T6.5.1.1.m1.2.2.1.1.1.2" xref="S3.T6.5.1.1.m1.2.2.1.1.1.1.cmml"><mo id="S3.T6.5.1.1.m1.2.2.1.1.1.2.1" stretchy="false" xref="S3.T6.5.1.1.m1.2.2.1.1.1.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="S3.T6.5.1.1.m1.1.1" xref="S3.T6.5.1.1.m1.1.1.cmml">𝒞</mi><mo id="S3.T6.5.1.1.m1.2.2.1.1.1.2.2" stretchy="false" xref="S3.T6.5.1.1.m1.2.2.1.1.1.1.1.cmml">|</mo></mrow><mo id="S3.T6.5.1.1.m1.2.2.1.1.3" stretchy="false" xref="S3.T6.5.1.1.m1.2.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.T6.5.1.1.m1.2b"><apply id="S3.T6.5.1.1.m1.2.2.cmml" xref="S3.T6.5.1.1.m1.2.2"><times id="S3.T6.5.1.1.m1.2.2.2.cmml" xref="S3.T6.5.1.1.m1.2.2.2"></times><ci id="S3.T6.5.1.1.m1.2.2.3a.cmml" xref="S3.T6.5.1.1.m1.2.2.3"><mtext id="S3.T6.5.1.1.m1.2.2.3.cmml" xref="S3.T6.5.1.1.m1.2.2.3">ave</mtext></ci><apply id="S3.T6.5.1.1.m1.2.2.1.1.1.1.cmml" xref="S3.T6.5.1.1.m1.2.2.1.1.1.2"><abs id="S3.T6.5.1.1.m1.2.2.1.1.1.1.1.cmml" xref="S3.T6.5.1.1.m1.2.2.1.1.1.2.1"></abs><ci id="S3.T6.5.1.1.m1.1.1.cmml" xref="S3.T6.5.1.1.m1.1.1">𝒞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.5.1.1.m1.2c">\text{ave}(|{\mathcal{C}}|)</annotation><annotation encoding="application/x-llamapun" id="S3.T6.5.1.1.m1.2d">ave ( | caligraphic_C | )</annotation></semantics></math> (K)</td>
</tr>
<tr class="ltx_tr" id="S3.T6.28.25">
<td class="ltx_td ltx_align_left ltx_border_t" colspan="5" id="S3.T6.28.25.1"><span class="ltx_text ltx_font_bold" id="S3.T6.28.25.1.1">In-domain</span></td>
<td class="ltx_td ltx_border_t" id="S3.T6.28.25.2"></td>
<td class="ltx_td ltx_border_t" id="S3.T6.28.25.3"></td>
</tr>
<tr class="ltx_tr" id="S3.T6.6.2">
<td class="ltx_td ltx_align_left ltx_border_t" id="S3.T6.6.2.2">Legal</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.6.2.3">35.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.6.2.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.6.2.4.1">42.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.6.2.5">34.9</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.6.2.6">35.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.6.2.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.6.2.1.1">51.2</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.6.2.1.m1.1"><semantics id="S3.T6.6.2.1.m1.1a"><mo id="S3.T6.6.2.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.6.2.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.6.2.1.m1.1b"><ci id="S3.T6.6.2.1.m1.1.1.cmml" xref="S3.T6.6.2.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.6.2.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.6.2.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.6.2.1.2" style="color:#008080;">9.2</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.6.2.7">51.4</td>
</tr>
<tr class="ltx_tr" id="S3.T6.7.3">
<td class="ltx_td ltx_align_left" id="S3.T6.7.3.2">Financial</td>
<td class="ltx_td ltx_align_center" id="S3.T6.7.3.3">36.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.7.3.4">40.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.7.3.5">40.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.7.3.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.7.3.6.1">42.8</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.7.3.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.7.3.1.1">48.0</span> <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.7.3.1.m1.1"><semantics id="S3.T6.7.3.1.m1.1a"><mo id="S3.T6.7.3.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.7.3.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.7.3.1.m1.1b"><ci id="S3.T6.7.3.1.m1.1.1.cmml" xref="S3.T6.7.3.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.7.3.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.7.3.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.7.3.1.2" style="color:#008080;"> 5.2</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.7.3.7">40.6</td>
</tr>
<tr class="ltx_tr" id="S3.T6.8.4">
<td class="ltx_td ltx_align_left" id="S3.T6.8.4.2">Mix</td>
<td class="ltx_td ltx_align_center" id="S3.T6.8.4.3">42.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.8.4.4">41.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.8.4.5">42.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.8.4.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.8.4.6.1">43.9</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.8.4.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.8.4.1.1">53.6</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.8.4.1.m1.1"><semantics id="S3.T6.8.4.1.m1.1a"><mo id="S3.T6.8.4.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.8.4.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.8.4.1.m1.1b"><ci id="S3.T6.8.4.1.m1.1.1.cmml" xref="S3.T6.8.4.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.8.4.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.8.4.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.8.4.1.2" style="color:#008080;">9.7</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.8.4.7">20.3</td>
</tr>
<tr class="ltx_tr" id="S3.T6.9.5">
<td class="ltx_td ltx_align_left ltx_border_t" id="S3.T6.9.5.2">Average</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.9.5.3">38.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.9.5.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.9.5.4.1">41.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.9.5.5">39.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.9.5.6">40.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.9.5.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.9.5.1.1">50.9</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.9.5.1.m1.1"><semantics id="S3.T6.9.5.1.m1.1a"><mo id="S3.T6.9.5.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.9.5.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.9.5.1.m1.1b"><ci id="S3.T6.9.5.1.m1.1.1.cmml" xref="S3.T6.9.5.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.9.5.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.9.5.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.9.5.1.2" style="color:#008080;">9.7</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.9.5.7">37.4</td>
</tr>
<tr class="ltx_tr" id="S3.T6.28.26">
<td class="ltx_td ltx_align_left ltx_border_t" colspan="5" id="S3.T6.28.26.1"><span class="ltx_text ltx_font_bold" id="S3.T6.28.26.1.1">Out-of-domain</span></td>
<td class="ltx_td ltx_border_t" id="S3.T6.28.26.2"></td>
<td class="ltx_td ltx_border_t" id="S3.T6.28.26.3"></td>
</tr>
<tr class="ltx_tr" id="S3.T6.10.6">
<td class="ltx_td ltx_align_left ltx_border_t" id="S3.T6.10.6.2">Biology</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.10.6.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.10.6.3.1">34.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.10.6.4">32.2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.10.6.5">32.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.10.6.6">31.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.10.6.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.10.6.1.1">35.7</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.10.6.1.m1.1"><semantics id="S3.T6.10.6.1.m1.1a"><mo id="S3.T6.10.6.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.10.6.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.10.6.1.m1.1b"><ci id="S3.T6.10.6.1.m1.1.1.cmml" xref="S3.T6.10.6.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.10.6.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.10.6.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.10.6.1.2" style="color:#008080;">1.6</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T6.10.6.7">125.2</td>
</tr>
<tr class="ltx_tr" id="S3.T6.11.7">
<td class="ltx_td ltx_align_left" id="S3.T6.11.7.2">Religion</td>
<td class="ltx_td ltx_align_center" id="S3.T6.11.7.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.11.7.3.1">36.7</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.11.7.4">35.2</td>
<td class="ltx_td ltx_align_center" id="S3.T6.11.7.5">34.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.11.7.6">34.7</td>
<td class="ltx_td ltx_align_center" id="S3.T6.11.7.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.11.7.1.1">37.8</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.11.7.1.m1.1"><semantics id="S3.T6.11.7.1.m1.1a"><mo id="S3.T6.11.7.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.11.7.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.11.7.1.m1.1b"><ci id="S3.T6.11.7.1.m1.1.1.cmml" xref="S3.T6.11.7.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.11.7.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.11.7.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.11.7.1.2" style="color:#008080;">1.1</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.11.7.7">131.4</td>
</tr>
<tr class="ltx_tr" id="S3.T6.12.8">
<td class="ltx_td ltx_align_left" id="S3.T6.12.8.2">Computer</td>
<td class="ltx_td ltx_align_center" id="S3.T6.12.8.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.12.8.3.1">36.5</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.12.8.4">35.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.12.8.5">32.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.12.8.6">35.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.12.8.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.12.8.1.1">40.5</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.12.8.1.m1.1"><semantics id="S3.T6.12.8.1.m1.1a"><mo id="S3.T6.12.8.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.12.8.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.12.8.1.m1.1b"><ci id="S3.T6.12.8.1.m1.1.1.cmml" xref="S3.T6.12.8.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.12.8.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.12.8.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.12.8.1.2" style="color:#008080;">4.0</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.12.8.7">215.9</td>
</tr>
<tr class="ltx_tr" id="S3.T6.13.9">
<td class="ltx_td ltx_align_left" id="S3.T6.13.9.2">Fiction</td>
<td class="ltx_td ltx_align_center" id="S3.T6.13.9.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.13.9.3.1">29.0</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.13.9.4">27.6</td>
<td class="ltx_td ltx_align_center" id="S3.T6.13.9.5">26.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.13.9.6">27.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.13.9.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.13.9.1.1">31.3</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.13.9.1.m1.1"><semantics id="S3.T6.13.9.1.m1.1a"><mo id="S3.T6.13.9.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.13.9.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.13.9.1.m1.1b"><ci id="S3.T6.13.9.1.m1.1.1.cmml" xref="S3.T6.13.9.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.13.9.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.13.9.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.13.9.1.2" style="color:#008080;">2.3</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.13.9.7">137.7</td>
</tr>
<tr class="ltx_tr" id="S3.T6.14.10">
<td class="ltx_td ltx_align_left" id="S3.T6.14.10.2">Literature</td>
<td class="ltx_td ltx_align_center" id="S3.T6.14.10.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.14.10.3.1">30.5</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.14.10.4">29.6</td>
<td class="ltx_td ltx_align_center" id="S3.T6.14.10.5">28.8</td>
<td class="ltx_td ltx_align_center" id="S3.T6.14.10.6">29.2</td>
<td class="ltx_td ltx_align_center" id="S3.T6.14.10.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.14.10.1.1">34.4</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.14.10.1.m1.1"><semantics id="S3.T6.14.10.1.m1.1a"><mo id="S3.T6.14.10.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.14.10.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.14.10.1.m1.1b"><ci id="S3.T6.14.10.1.m1.1.1.cmml" xref="S3.T6.14.10.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.14.10.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.14.10.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.14.10.1.2" style="color:#008080;">3.9</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.14.10.7">129.4</td>
</tr>
<tr class="ltx_tr" id="S3.T6.15.11">
<td class="ltx_td ltx_align_left" id="S3.T6.15.11.2">History</td>
<td class="ltx_td ltx_align_center" id="S3.T6.15.11.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.15.11.3.1">33.3</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.15.11.4">31.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.15.11.5">32.3</td>
<td class="ltx_td ltx_align_center" id="S3.T6.15.11.6">31.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.15.11.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.15.11.1.1">35.6</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.15.11.1.m1.1"><semantics id="S3.T6.15.11.1.m1.1a"><mo id="S3.T6.15.11.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.15.11.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.15.11.1.m1.1b"><ci id="S3.T6.15.11.1.m1.1.1.cmml" xref="S3.T6.15.11.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.15.11.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.15.11.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.15.11.1.2" style="color:#008080;">2.3</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.15.11.7">195.2</td>
</tr>
<tr class="ltx_tr" id="S3.T6.16.12">
<td class="ltx_td ltx_align_left" id="S3.T6.16.12.2">Biography</td>
<td class="ltx_td ltx_align_center" id="S3.T6.16.12.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.16.12.3.1">32.4</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.16.12.4">31.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.16.12.5">29.8</td>
<td class="ltx_td ltx_align_center" id="S3.T6.16.12.6">30.3</td>
<td class="ltx_td ltx_align_center" id="S3.T6.16.12.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.16.12.1.1">35.3</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.16.12.1.m1.1"><semantics id="S3.T6.16.12.1.m1.1a"><mo id="S3.T6.16.12.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.16.12.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.16.12.1.m1.1b"><ci id="S3.T6.16.12.1.m1.1.1.cmml" xref="S3.T6.16.12.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.16.12.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.16.12.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.16.12.1.2" style="color:#008080;">2.9</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.16.12.7">163.5</td>
</tr>
<tr class="ltx_tr" id="S3.T6.17.13">
<td class="ltx_td ltx_align_left" id="S3.T6.17.13.2">Physics</td>
<td class="ltx_td ltx_align_center" id="S3.T6.17.13.3">36.4</td>
<td class="ltx_td ltx_align_center" id="S3.T6.17.13.4">38.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.17.13.5">37.3</td>
<td class="ltx_td ltx_align_center" id="S3.T6.17.13.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.17.13.6.1">38.2</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.17.13.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.17.13.1.1">38.8</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.17.13.1.m1.1"><semantics id="S3.T6.17.13.1.m1.1a"><mo id="S3.T6.17.13.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.17.13.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.17.13.1.m1.1b"><ci id="S3.T6.17.13.1.m1.1.1.cmml" xref="S3.T6.17.13.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.17.13.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.17.13.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.17.13.1.2" style="color:#008080;">0.6</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.17.13.7">105.8</td>
</tr>
<tr class="ltx_tr" id="S3.T6.18.14">
<td class="ltx_td ltx_align_left" id="S3.T6.18.14.2">Music</td>
<td class="ltx_td ltx_align_center" id="S3.T6.18.14.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.18.14.3.1">33.9</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.18.14.4">33.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.18.14.5">31.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.18.14.6">32.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.18.14.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.18.14.1.1">35.1</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.18.14.1.m1.1"><semantics id="S3.T6.18.14.1.m1.1a"><mo id="S3.T6.18.14.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.18.14.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.18.14.1.m1.1b"><ci id="S3.T6.18.14.1.m1.1.1.cmml" xref="S3.T6.18.14.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.18.14.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.18.14.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.18.14.1.2" style="color:#008080;">1.2</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.18.14.7">168.7</td>
</tr>
<tr class="ltx_tr" id="S3.T6.19.15">
<td class="ltx_td ltx_align_left" id="S3.T6.19.15.2">Art</td>
<td class="ltx_td ltx_align_center" id="S3.T6.19.15.3">32.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.19.15.4"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.19.15.4.1">33.7</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.19.15.5">33.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.19.15.6">33.0</td>
<td class="ltx_td ltx_align_center" id="S3.T6.19.15.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.19.15.1.1">36.6</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.19.15.1.m1.1"><semantics id="S3.T6.19.15.1.m1.1a"><mo id="S3.T6.19.15.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.19.15.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.19.15.1.m1.1b"><ci id="S3.T6.19.15.1.m1.1.1.cmml" xref="S3.T6.19.15.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.19.15.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.19.15.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.19.15.1.2" style="color:#008080;">2.9</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.19.15.7">129.0</td>
</tr>
<tr class="ltx_tr" id="S3.T6.20.16">
<td class="ltx_td ltx_align_left" id="S3.T6.20.16.2">Mathematics</td>
<td class="ltx_td ltx_align_center" id="S3.T6.20.16.3">34.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.20.16.4">35.0</td>
<td class="ltx_td ltx_align_center" id="S3.T6.20.16.5">33.8</td>
<td class="ltx_td ltx_align_center" id="S3.T6.20.16.6"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.20.16.6.1">35.4</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.20.16.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.20.16.1.1">36.4</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.20.16.1.m1.1"><semantics id="S3.T6.20.16.1.m1.1a"><mo id="S3.T6.20.16.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.20.16.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.20.16.1.m1.1b"><ci id="S3.T6.20.16.1.m1.1.1.cmml" xref="S3.T6.20.16.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.20.16.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.20.16.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.20.16.1.2" style="color:#008080;">1.0</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.20.16.7">198.0</td>
</tr>
<tr class="ltx_tr" id="S3.T6.21.17">
<td class="ltx_td ltx_align_left" id="S3.T6.21.17.2">Health</td>
<td class="ltx_td ltx_align_center" id="S3.T6.21.17.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.21.17.3.1">34.8</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.21.17.4">33.2</td>
<td class="ltx_td ltx_align_center" id="S3.T6.21.17.5">32.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.21.17.6">31.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.21.17.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.21.17.1.1">37.4</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.21.17.1.m1.1"><semantics id="S3.T6.21.17.1.m1.1a"><mo id="S3.T6.21.17.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.21.17.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.21.17.1.m1.1b"><ci id="S3.T6.21.17.1.m1.1.1.cmml" xref="S3.T6.21.17.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.21.17.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.21.17.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.21.17.1.2" style="color:#008080;">2.6</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.21.17.7">134.9</td>
</tr>
<tr class="ltx_tr" id="S3.T6.22.18">
<td class="ltx_td ltx_align_left" id="S3.T6.22.18.2">Psychology</td>
<td class="ltx_td ltx_align_center" id="S3.T6.22.18.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.22.18.3.1">34.3</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.22.18.4">33.6</td>
<td class="ltx_td ltx_align_center" id="S3.T6.22.18.5">31.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.22.18.6">33.0</td>
<td class="ltx_td ltx_align_center" id="S3.T6.22.18.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.22.18.1.1">37.6</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.22.18.1.m1.1"><semantics id="S3.T6.22.18.1.m1.1a"><mo id="S3.T6.22.18.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.22.18.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.22.18.1.m1.1b"><ci id="S3.T6.22.18.1.m1.1.1.cmml" xref="S3.T6.22.18.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.22.18.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.22.18.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.22.18.1.2" style="color:#008080;">3.3</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.22.18.7">150.1</td>
</tr>
<tr class="ltx_tr" id="S3.T6.23.19">
<td class="ltx_td ltx_align_left" id="S3.T6.23.19.2">Technology</td>
<td class="ltx_td ltx_align_center" id="S3.T6.23.19.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.23.19.3.1">33.9</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.23.19.4">32.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.23.19.5">31.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.23.19.6">31.8</td>
<td class="ltx_td ltx_align_center" id="S3.T6.23.19.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.23.19.1.1">37.4</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.23.19.1.m1.1"><semantics id="S3.T6.23.19.1.m1.1a"><mo id="S3.T6.23.19.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.23.19.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.23.19.1.m1.1b"><ci id="S3.T6.23.19.1.m1.1.1.cmml" xref="S3.T6.23.19.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.23.19.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.23.19.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.23.19.1.2" style="color:#008080;">3.5</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.23.19.7">144.0</td>
</tr>
<tr class="ltx_tr" id="S3.T6.24.20">
<td class="ltx_td ltx_align_left" id="S3.T6.24.20.2">Politics</td>
<td class="ltx_td ltx_align_center" id="S3.T6.24.20.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.24.20.3.1">33.0</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.24.20.4">32.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.24.20.5">30.2</td>
<td class="ltx_td ltx_align_center" id="S3.T6.24.20.6">32.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.24.20.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.24.20.1.1">35.2</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.24.20.1.m1.1"><semantics id="S3.T6.24.20.1.m1.1a"><mo id="S3.T6.24.20.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.24.20.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.24.20.1.m1.1b"><ci id="S3.T6.24.20.1.m1.1.1.cmml" xref="S3.T6.24.20.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.24.20.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.24.20.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.24.20.1.2" style="color:#008080;">2.2</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.24.20.7">139.6</td>
</tr>
<tr class="ltx_tr" id="S3.T6.25.21">
<td class="ltx_td ltx_align_left" id="S3.T6.25.21.2">Cooking</td>
<td class="ltx_td ltx_align_center" id="S3.T6.25.21.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.25.21.3.1">34.1</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.25.21.4">33.1</td>
<td class="ltx_td ltx_align_center" id="S3.T6.25.21.5">31.0</td>
<td class="ltx_td ltx_align_center" id="S3.T6.25.21.6">32.9</td>
<td class="ltx_td ltx_align_center" id="S3.T6.25.21.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.25.21.1.1">35.6</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.25.21.1.m1.1"><semantics id="S3.T6.25.21.1.m1.1a"><mo id="S3.T6.25.21.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.25.21.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.25.21.1.m1.1b"><ci id="S3.T6.25.21.1.m1.1.1.cmml" xref="S3.T6.25.21.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.25.21.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.25.21.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.25.21.1.2" style="color:#008080;">1.5</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.25.21.7">156.1</td>
</tr>
<tr class="ltx_tr" id="S3.T6.26.22">
<td class="ltx_td ltx_align_left" id="S3.T6.26.22.2">Agriculture</td>
<td class="ltx_td ltx_align_center" id="S3.T6.26.22.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.26.22.3.1">34.9</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.26.22.4">34.0</td>
<td class="ltx_td ltx_align_center" id="S3.T6.26.22.5">33.2</td>
<td class="ltx_td ltx_align_center" id="S3.T6.26.22.6">32.8</td>
<td class="ltx_td ltx_align_center" id="S3.T6.26.22.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.26.22.1.1">36.7</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.26.22.1.m1.1"><semantics id="S3.T6.26.22.1.m1.1a"><mo id="S3.T6.26.22.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.26.22.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.26.22.1.m1.1b"><ci id="S3.T6.26.22.1.m1.1.1.cmml" xref="S3.T6.26.22.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.26.22.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.26.22.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.26.22.1.2" style="color:#008080;">1.8</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.26.22.7">151.0</td>
</tr>
<tr class="ltx_tr" id="S3.T6.27.23">
<td class="ltx_td ltx_align_left" id="S3.T6.27.23.2">Philosophy</td>
<td class="ltx_td ltx_align_center" id="S3.T6.27.23.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.27.23.3.1">33.0</span></td>
<td class="ltx_td ltx_align_center" id="S3.T6.27.23.4">32.5</td>
<td class="ltx_td ltx_align_center" id="S3.T6.27.23.5">31.8</td>
<td class="ltx_td ltx_align_center" id="S3.T6.27.23.6">32.2</td>
<td class="ltx_td ltx_align_center" id="S3.T6.27.23.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.27.23.1.1">36.2</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.27.23.1.m1.1"><semantics id="S3.T6.27.23.1.m1.1a"><mo id="S3.T6.27.23.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.27.23.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.27.23.1.m1.1b"><ci id="S3.T6.27.23.1.m1.1.1.cmml" xref="S3.T6.27.23.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.27.23.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.27.23.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.27.23.1.2" style="color:#008080;">3.2</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T6.27.23.7">135.7</td>
</tr>
<tr class="ltx_tr" id="S3.T6.28.24">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="S3.T6.28.24.2">Average</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T6.28.24.3"><span class="ltx_text ltx_framed ltx_framed_underline" id="S3.T6.28.24.3.1">33.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T6.28.24.4">33.0</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T6.28.24.5">31.9</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T6.28.24.6">32.5</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T6.28.24.1">
<span class="ltx_text ltx_font_bold" id="S3.T6.28.24.1.1">36.2</span>  <math alttext="\uparrow" class="ltx_Math" display="inline" id="S3.T6.28.24.1.m1.1"><semantics id="S3.T6.28.24.1.m1.1a"><mo id="S3.T6.28.24.1.m1.1.1" mathcolor="#008080" stretchy="false" xref="S3.T6.28.24.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S3.T6.28.24.1.m1.1b"><ci id="S3.T6.28.24.1.m1.1.1.cmml" xref="S3.T6.28.24.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T6.28.24.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S3.T6.28.24.1.m1.1d">↑</annotation></semantics></math><span class="ltx_text" id="S3.T6.28.24.1.2" style="color:#008080;">2.4</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S3.T6.28.24.7">150.6</td>
</tr>
</table>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Baselines</h3>
<div class="ltx_para ltx_noindent" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">We compare MemoRAG with the following baselines:
(1) <span class="ltx_text ltx_font_bold" id="S3.SS2.p1.1.1">Full</span>: Directly feeding the full context into LLMs to fit the maximum length of the LLMs.
(2) <span class="ltx_text ltx_font_bold" id="S3.SS2.p1.1.2">BGE-M3</span> <cite class="ltx_cite ltx_citemacro_cite">Chen et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib5" title="">2023</a>)</cite>: A general-purpose retriever, with which we perform standard RAG.
(3) <span class="ltx_text ltx_font_bold" id="S3.SS2.p1.1.3">Stella-en-1.5B-v5<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note"><span class="ltx_text ltx_font_medium" id="footnote1.1.1.1">1</span></span><a class="ltx_ref ltx_url ltx_font_typewriter ltx_font_medium" href="https://huggingface.co/dunzhang/stella_en_1.5B_v5" title="">https://huggingface.co/dunzhang/stella_en_1.5B_v5</a></span></span></span></span>: This model ranks top-3 on the MTEB leaderboard at the time of writing this paper, and we perform standard RAG with it.
(4) <span class="ltx_text ltx_font_bold" id="S3.SS2.p1.1.4">RQ-RAG</span> <cite class="ltx_cite ltx_citemacro_cite">Chan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib4" title="">2024</a>)</cite>: RQ-RAG prompt LLMs to resolve the input query into several queries that are better for searching regarding explicit rewriting, decomposition, and disambiguation. The supporting passages are retrieved by both the input query and refined queries.
(5) <span class="ltx_text ltx_font_bold" id="S3.SS2.p1.1.5">HyDE</span> <cite class="ltx_cite ltx_citemacro_cite">Gao et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib9" title="">2022</a>)</cite>: Directly prompts LLMs to produce fake documents by providing only a query and then retrieves passages using the fake documents, then producing the final answer generation according to the retrieved passages.
For more comprehensive comparison, we use three popular LLMs as the generators: Llama3-8B-Instruct-8K <span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/meta-llama/Meta-Llama-3-8B-Instruct" title="">https://huggingface.co/meta-llama/Meta-Llama-3-8B-Instruct</a></span></span></span>; Mistral-7B-Instruct-v0.2-32K <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib14" title="">2023</a>)</cite> and Phi-3-mini-128K <cite class="ltx_cite ltx_citemacro_cite">Abdin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#bib.bib1" title="">2024</a>)</cite>.</p>
</div>
<figure class="ltx_table" id="S3.T7">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Main experiment results. The best results of each block are in bold. The evaluation metrics for all dataset would be introduced in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#A1" title="Appendix A More details of the Datasets ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">A</span></a>. The Memory Model used in these experiments is trained based on Mistral-7B-Instruct-v0.2-32K, which is available at <a class="ltx_ref ltx_href" href="https://huggingface.co/TommyChien/memorag-mistral-7b-inst" title="">HuggingFace</a>.</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="S3.T7.1">
<tr class="ltx_tr" id="S3.T7.1.1">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.1.1">
<span class="ltx_p" id="S3.T7.1.1.1.1.1" style="width:42.7pt;">Dataset</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.2.1">
<span class="ltx_p" id="S3.T7.1.1.2.1.1" style="width:11.4pt;">nar</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.3.1">
<span class="ltx_p" id="S3.T7.1.1.3.1.1" style="width:11.4pt;">qas</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.4.1">
<span class="ltx_p" id="S3.T7.1.1.4.1.1" style="width:11.4pt;">mul</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.5.1">
<span class="ltx_p" id="S3.T7.1.1.5.1.1" style="width:11.4pt;">mus</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.6.1">
<span class="ltx_p" id="S3.T7.1.1.6.1.1" style="width:14.2pt;">2wiki</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.7.1">
<span class="ltx_p" id="S3.T7.1.1.7.1.1" style="width:11.4pt;">hot</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.8.1">
<span class="ltx_p" id="S3.T7.1.1.8.1.1" style="width:11.4pt;">news</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.9.1">
<span class="ltx_p" id="S3.T7.1.1.9.1.1" style="width:11.4pt;">gov</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.10.1">
<span class="ltx_p" id="S3.T7.1.1.10.1.1" style="width:17.1pt;">en.sum</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.11.1">
<span class="ltx_p" id="S3.T7.1.1.11.1.1" style="width:14.2pt;">en.qa</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.12.1">
<span class="ltx_p" id="S3.T7.1.1.12.1.1" style="width:11.4pt;">fin</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.13.1">
<span class="ltx_p" id="S3.T7.1.1.13.1.1" style="width:11.4pt;">legal</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="S3.T7.1.1.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.1.14.1">
<span class="ltx_p" id="S3.T7.1.1.14.1.1" style="width:11.4pt;">mix</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.2">
<td class="ltx_td ltx_align_top" id="S3.T7.1.2.1"></td>
<td class="ltx_td ltx_align_center ltx_align_top" colspan="8" id="S3.T7.1.2.2"><span class="ltx_text ltx_font_smallcaps" id="S3.T7.1.2.2.1">LongBench</span></td>
<td class="ltx_td ltx_align_center ltx_align_top" colspan="2" id="S3.T7.1.2.3"><span class="ltx_text ltx_font_smallcaps" id="S3.T7.1.2.3.1">InfBench</span></td>
<td class="ltx_td ltx_align_center ltx_align_top" colspan="3" id="S3.T7.1.2.4"><span class="ltx_text ltx_font_smallcaps" id="S3.T7.1.2.4.1">UltraDomain</span></td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.3">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" colspan="8" id="S3.T7.1.3.1"><span class="ltx_text ltx_font_bold" id="S3.T7.1.3.1.1">Generator: Llama3-8B-Instruct-8K</span></td>
<td class="ltx_td ltx_align_top ltx_border_t" id="S3.T7.1.3.2"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.3.3"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.3.4"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.3.5"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.3.6"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.3.7"></td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.4">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.1.1">
<span class="ltx_p" id="S3.T7.1.4.1.1.1" style="width:42.7pt;">Full</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.2.1">
<span class="ltx_p" id="S3.T7.1.4.2.1.1" style="width:11.4pt;">21.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.3.1">
<span class="ltx_p" id="S3.T7.1.4.3.1.1" style="width:11.4pt;">43.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.4.1">
<span class="ltx_p" id="S3.T7.1.4.4.1.1" style="width:11.4pt;">46.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.5.1">
<span class="ltx_p" id="S3.T7.1.4.5.1.1" style="width:11.4pt;">23.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.6.1">
<span class="ltx_p" id="S3.T7.1.4.6.1.1" style="width:14.2pt;">38.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.7.1">
<span class="ltx_p" id="S3.T7.1.4.7.1.1" style="width:11.4pt;">47.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.8.1">
<span class="ltx_p" id="S3.T7.1.4.8.1.1" style="width:11.4pt;">24.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.9.1">
<span class="ltx_p" id="S3.T7.1.4.9.1.1" style="width:11.4pt;">23.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.10.1">
<span class="ltx_p" id="S3.T7.1.4.10.1.1" style="width:17.1pt;">13.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.11.1">
<span class="ltx_p" id="S3.T7.1.4.11.1.1" style="width:14.2pt;">6.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.12.1">
<span class="ltx_p" id="S3.T7.1.4.12.1.1" style="width:11.4pt;">34.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.13.1">
<span class="ltx_p" id="S3.T7.1.4.13.1.1" style="width:11.4pt;">33.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.4.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.4.14.1">
<span class="ltx_p" id="S3.T7.1.4.14.1.1" style="width:11.4pt;">42.7</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.5">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.1.1">
<span class="ltx_p" id="S3.T7.1.5.1.1.1" style="width:42.7pt;">BGE-M3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.2.1">
<span class="ltx_p" id="S3.T7.1.5.2.1.1" style="width:11.4pt;">22.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.3.1">
<span class="ltx_p" id="S3.T7.1.5.3.1.1" style="width:11.4pt;">44.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.4.1">
<span class="ltx_p" id="S3.T7.1.5.4.1.1" style="width:11.4pt;">50.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.5.1">
<span class="ltx_p" id="S3.T7.1.5.5.1.1" style="width:11.4pt;">22.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.6.1">
<span class="ltx_p" id="S3.T7.1.5.6.1.1" style="width:14.2pt;">36.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.7.1">
<span class="ltx_p" id="S3.T7.1.5.7.1.1" style="width:11.4pt;">48.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.8.1">
<span class="ltx_p" id="S3.T7.1.5.8.1.1" style="width:11.4pt;">22.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.9.1">
<span class="ltx_p" id="S3.T7.1.5.9.1.1" style="width:11.4pt;">20.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.10.1">
<span class="ltx_p" id="S3.T7.1.5.10.1.1" style="width:17.1pt;">12.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.11.1">
<span class="ltx_p" id="S3.T7.1.5.11.1.1" style="width:14.2pt;">15.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.12.1">
<span class="ltx_p" id="S3.T7.1.5.12.1.1" style="width:11.4pt;">41.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.13.1">
<span class="ltx_p" id="S3.T7.1.5.13.1.1" style="width:11.4pt;">40.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.5.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.5.14.1">
<span class="ltx_p" id="S3.T7.1.5.14.1.1" style="width:11.4pt;">46.4</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.6">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.1.1">
<span class="ltx_p" id="S3.T7.1.6.1.1.1" style="width:42.7pt;">Stella-v5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.2.1">
<span class="ltx_p" id="S3.T7.1.6.2.1.1" style="width:11.4pt;">12.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.3.1">
<span class="ltx_p" id="S3.T7.1.6.3.1.1" style="width:11.4pt;">35.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.4.1">
<span class="ltx_p" id="S3.T7.1.6.4.1.1" style="width:11.4pt;">44.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.5.1">
<span class="ltx_p" id="S3.T7.1.6.5.1.1" style="width:11.4pt;">22.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.6.1">
<span class="ltx_p" id="S3.T7.1.6.6.1.1" style="width:14.2pt;">33.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.7.1">
<span class="ltx_p" id="S3.T7.1.6.7.1.1" style="width:11.4pt;">41.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.8.1">
<span class="ltx_p" id="S3.T7.1.6.8.1.1" style="width:11.4pt;">22.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.9.1">
<span class="ltx_p" id="S3.T7.1.6.9.1.1" style="width:11.4pt;">20.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.10.1">
<span class="ltx_p" id="S3.T7.1.6.10.1.1" style="width:17.1pt;">11.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.11.1">
<span class="ltx_p" id="S3.T7.1.6.11.1.1" style="width:14.2pt;">14.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.12.1">
<span class="ltx_p" id="S3.T7.1.6.12.1.1" style="width:11.4pt;">41.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.13.1">
<span class="ltx_p" id="S3.T7.1.6.13.1.1" style="width:11.4pt;">33.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.6.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.6.14.1">
<span class="ltx_p" id="S3.T7.1.6.14.1.1" style="width:11.4pt;">44.9</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.7">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.1.1">
<span class="ltx_p" id="S3.T7.1.7.1.1.1" style="width:42.7pt;">RQ-RAG</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.2.1">
<span class="ltx_p" id="S3.T7.1.7.2.1.1" style="width:11.4pt;">20.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.3.1">
<span class="ltx_p" id="S3.T7.1.7.3.1.1" style="width:11.4pt;">43.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.4.1">
<span class="ltx_p" id="S3.T7.1.7.4.1.1" style="width:11.4pt;">49.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.5.1">
<span class="ltx_p" id="S3.T7.1.7.5.1.1" style="width:11.4pt;">22.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.6.1">
<span class="ltx_p" id="S3.T7.1.7.6.1.1" style="width:14.2pt;">36.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.7.1">
<span class="ltx_p" id="S3.T7.1.7.7.1.1" style="width:11.4pt;">44.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.8.1">
<span class="ltx_p" id="S3.T7.1.7.8.1.1" style="width:11.4pt;">20.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.9.1">
<span class="ltx_p" id="S3.T7.1.7.9.1.1" style="width:11.4pt;">21.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.10.1">
<span class="ltx_p" id="S3.T7.1.7.10.1.1" style="width:17.1pt;">12.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.11.1">
<span class="ltx_p" id="S3.T7.1.7.11.1.1" style="width:14.2pt;">13.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.12.1">
<span class="ltx_p" id="S3.T7.1.7.12.1.1" style="width:11.4pt;">39.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.13.1">
<span class="ltx_p" id="S3.T7.1.7.13.1.1" style="width:11.4pt;">36.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.7.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.7.14.1">
<span class="ltx_p" id="S3.T7.1.7.14.1.1" style="width:11.4pt;">44.5</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.8">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.1.1">
<span class="ltx_p" id="S3.T7.1.8.1.1.1" style="width:42.7pt;">HyDE</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.2.1">
<span class="ltx_p" id="S3.T7.1.8.2.1.1" style="width:11.4pt;">22.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.3.1">
<span class="ltx_p" id="S3.T7.1.8.3.1.1" style="width:11.4pt;">44.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.4.1">
<span class="ltx_p" id="S3.T7.1.8.4.1.1" style="width:11.4pt;">50.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.5.1">
<span class="ltx_p" id="S3.T7.1.8.5.1.1" style="width:11.4pt;">22.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.6.1">
<span class="ltx_p" id="S3.T7.1.8.6.1.1" style="width:14.2pt;">36.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.7.1">
<span class="ltx_p" id="S3.T7.1.8.7.1.1" style="width:11.4pt;">48.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.8.1">
<span class="ltx_p" id="S3.T7.1.8.8.1.1" style="width:11.4pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.9.1">
<span class="ltx_p" id="S3.T7.1.8.9.1.1" style="width:11.4pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.10.1">
<span class="ltx_p" id="S3.T7.1.8.10.1.1" style="width:17.1pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.11.1">
<span class="ltx_p" id="S3.T7.1.8.11.1.1" style="width:14.2pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.8.11.1.1.1">19.1</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.12.1">
<span class="ltx_p" id="S3.T7.1.8.12.1.1" style="width:11.4pt;">41.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.13.1">
<span class="ltx_p" id="S3.T7.1.8.13.1.1" style="width:11.4pt;">40.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.8.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.8.14.1">
<span class="ltx_p" id="S3.T7.1.8.14.1.1" style="width:11.4pt;">46.4</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.9">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.1.1">
<span class="ltx_p" id="S3.T7.1.9.1.1.1" style="width:42.7pt;">MemoRAG</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.2.1">
<span class="ltx_p" id="S3.T7.1.9.2.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.2.1.1.1">22.8</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.3.1">
<span class="ltx_p" id="S3.T7.1.9.3.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.3.1.1.1">45.7</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.4.1">
<span class="ltx_p" id="S3.T7.1.9.4.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.4.1.1.1">50.7</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.5.1">
<span class="ltx_p" id="S3.T7.1.9.5.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.5.1.1.1">28.4</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.6.1">
<span class="ltx_p" id="S3.T7.1.9.6.1.1" style="width:14.2pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.6.1.1.1">51.4</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.7.1">
<span class="ltx_p" id="S3.T7.1.9.7.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.7.1.1.1">57.0</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.8.1">
<span class="ltx_p" id="S3.T7.1.9.8.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.8.1.1.1">27.4</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.9.1">
<span class="ltx_p" id="S3.T7.1.9.9.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.9.1.1.1">27.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.10.1">
<span class="ltx_p" id="S3.T7.1.9.10.1.1" style="width:17.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.10.1.1.1">14.1</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.11.1">
<span class="ltx_p" id="S3.T7.1.9.11.1.1" style="width:14.2pt;">16.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.12.1">
<span class="ltx_p" id="S3.T7.1.9.12.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.12.1.1.1">47.8</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.13.1">
<span class="ltx_p" id="S3.T7.1.9.13.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.13.1.1.1">47.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.9.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.9.14.1">
<span class="ltx_p" id="S3.T7.1.9.14.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.9.14.1.1.1">55.5</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.10">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" colspan="8" id="S3.T7.1.10.1"><span class="ltx_text ltx_font_bold" id="S3.T7.1.10.1.1">Generator: Phi-3-mini-128K</span></td>
<td class="ltx_td ltx_align_top ltx_border_t" id="S3.T7.1.10.2"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.10.3"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.10.4"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.10.5"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.10.6"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.10.7"></td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.11">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.1.1">
<span class="ltx_p" id="S3.T7.1.11.1.1.1" style="width:42.7pt;">Full</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.2.1">
<span class="ltx_p" id="S3.T7.1.11.2.1.1" style="width:11.4pt;">21.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.3.1">
<span class="ltx_p" id="S3.T7.1.11.3.1.1" style="width:11.4pt;">35.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.4.1">
<span class="ltx_p" id="S3.T7.1.11.4.1.1" style="width:11.4pt;">47.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.5.1">
<span class="ltx_p" id="S3.T7.1.11.5.1.1" style="width:11.4pt;">19.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.6.1">
<span class="ltx_p" id="S3.T7.1.11.6.1.1" style="width:14.2pt;">35.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.7.1">
<span class="ltx_p" id="S3.T7.1.11.7.1.1" style="width:11.4pt;">42.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.8.1">
<span class="ltx_p" id="S3.T7.1.11.8.1.1" style="width:11.4pt;">25.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.9.1">
<span class="ltx_p" id="S3.T7.1.11.9.1.1" style="width:11.4pt;">23.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.10.1">
<span class="ltx_p" id="S3.T7.1.11.10.1.1" style="width:17.1pt;">13.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.11.1">
<span class="ltx_p" id="S3.T7.1.11.11.1.1" style="width:14.2pt;">15.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.12.1">
<span class="ltx_p" id="S3.T7.1.11.12.1.1" style="width:11.4pt;">44.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.13.1">
<span class="ltx_p" id="S3.T7.1.11.13.1.1" style="width:11.4pt;">40.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.11.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.11.14.1">
<span class="ltx_p" id="S3.T7.1.11.14.1.1" style="width:11.4pt;">44.7</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.12">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.1.1">
<span class="ltx_p" id="S3.T7.1.12.1.1.1" style="width:42.7pt;">BGE-M3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.2.1">
<span class="ltx_p" id="S3.T7.1.12.2.1.1" style="width:11.4pt;">20.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.3.1">
<span class="ltx_p" id="S3.T7.1.12.3.1.1" style="width:11.4pt;">33.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.4.1">
<span class="ltx_p" id="S3.T7.1.12.4.1.1" style="width:11.4pt;">44.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.5.1">
<span class="ltx_p" id="S3.T7.1.12.5.1.1" style="width:11.4pt;">21.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.6.1">
<span class="ltx_p" id="S3.T7.1.12.6.1.1" style="width:14.2pt;">35.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.7.1">
<span class="ltx_p" id="S3.T7.1.12.7.1.1" style="width:11.4pt;">42.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.8.1">
<span class="ltx_p" id="S3.T7.1.12.8.1.1" style="width:11.4pt;">17.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.9.1">
<span class="ltx_p" id="S3.T7.1.12.9.1.1" style="width:11.4pt;">19.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.10.1">
<span class="ltx_p" id="S3.T7.1.12.10.1.1" style="width:17.1pt;">9.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.11.1">
<span class="ltx_p" id="S3.T7.1.12.11.1.1" style="width:14.2pt;">16.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.12.1">
<span class="ltx_p" id="S3.T7.1.12.12.1.1" style="width:11.4pt;">41.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.13.1">
<span class="ltx_p" id="S3.T7.1.12.13.1.1" style="width:11.4pt;">41.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.12.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.12.14.1">
<span class="ltx_p" id="S3.T7.1.12.14.1.1" style="width:11.4pt;">43.7</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.13">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.1.1">
<span class="ltx_p" id="S3.T7.1.13.1.1.1" style="width:42.7pt;">Stella-v5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.2.1">
<span class="ltx_p" id="S3.T7.1.13.2.1.1" style="width:11.4pt;">13.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.3.1">
<span class="ltx_p" id="S3.T7.1.13.3.1.1" style="width:11.4pt;">32.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.4.1">
<span class="ltx_p" id="S3.T7.1.13.4.1.1" style="width:11.4pt;">43.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.5.1">
<span class="ltx_p" id="S3.T7.1.13.5.1.1" style="width:11.4pt;">21.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.6.1">
<span class="ltx_p" id="S3.T7.1.13.6.1.1" style="width:14.2pt;">35.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.7.1">
<span class="ltx_p" id="S3.T7.1.13.7.1.1" style="width:11.4pt;">40.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.8.1">
<span class="ltx_p" id="S3.T7.1.13.8.1.1" style="width:11.4pt;">20.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.9.1">
<span class="ltx_p" id="S3.T7.1.13.9.1.1" style="width:11.4pt;">18.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.10.1">
<span class="ltx_p" id="S3.T7.1.13.10.1.1" style="width:17.1pt;">10.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.11.1">
<span class="ltx_p" id="S3.T7.1.13.11.1.1" style="width:14.2pt;">19.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.12.1">
<span class="ltx_p" id="S3.T7.1.13.12.1.1" style="width:11.4pt;">42.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.13.1">
<span class="ltx_p" id="S3.T7.1.13.13.1.1" style="width:11.4pt;">35.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.13.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.13.14.1">
<span class="ltx_p" id="S3.T7.1.13.14.1.1" style="width:11.4pt;">43.9</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.14">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.1.1">
<span class="ltx_p" id="S3.T7.1.14.1.1.1" style="width:42.7pt;">RQ-RAG</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.2.1">
<span class="ltx_p" id="S3.T7.1.14.2.1.1" style="width:11.4pt;">19.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.3.1">
<span class="ltx_p" id="S3.T7.1.14.3.1.1" style="width:11.4pt;">34.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.4.1">
<span class="ltx_p" id="S3.T7.1.14.4.1.1" style="width:11.4pt;">46.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.5.1">
<span class="ltx_p" id="S3.T7.1.14.5.1.1" style="width:11.4pt;">21.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.6.1">
<span class="ltx_p" id="S3.T7.1.14.6.1.1" style="width:14.2pt;">36.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.7.1">
<span class="ltx_p" id="S3.T7.1.14.7.1.1" style="width:11.4pt;">41.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.8.1">
<span class="ltx_p" id="S3.T7.1.14.8.1.1" style="width:11.4pt;">20.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.9.1">
<span class="ltx_p" id="S3.T7.1.14.9.1.1" style="width:11.4pt;">18.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.10.1">
<span class="ltx_p" id="S3.T7.1.14.10.1.1" style="width:17.1pt;">10.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.11.1">
<span class="ltx_p" id="S3.T7.1.14.11.1.1" style="width:14.2pt;">16.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.12.1">
<span class="ltx_p" id="S3.T7.1.14.12.1.1" style="width:11.4pt;">41.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.13.1">
<span class="ltx_p" id="S3.T7.1.14.13.1.1" style="width:11.4pt;">40.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.14.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.14.14.1">
<span class="ltx_p" id="S3.T7.1.14.14.1.1" style="width:11.4pt;">43.2</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.15">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.1.1">
<span class="ltx_p" id="S3.T7.1.15.1.1.1" style="width:42.7pt;">HyDE</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.2.1">
<span class="ltx_p" id="S3.T7.1.15.2.1.1" style="width:11.4pt;">18.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.3.1">
<span class="ltx_p" id="S3.T7.1.15.3.1.1" style="width:11.4pt;">36.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.4.1">
<span class="ltx_p" id="S3.T7.1.15.4.1.1" style="width:11.4pt;">47.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.5.1">
<span class="ltx_p" id="S3.T7.1.15.5.1.1" style="width:11.4pt;">20.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.6.1">
<span class="ltx_p" id="S3.T7.1.15.6.1.1" style="width:14.2pt;">36.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.7.1">
<span class="ltx_p" id="S3.T7.1.15.7.1.1" style="width:11.4pt;">42.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.8.1">
<span class="ltx_p" id="S3.T7.1.15.8.1.1" style="width:11.4pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.9.1">
<span class="ltx_p" id="S3.T7.1.15.9.1.1" style="width:11.4pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.10.1">
<span class="ltx_p" id="S3.T7.1.15.10.1.1" style="width:17.1pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.11.1">
<span class="ltx_p" id="S3.T7.1.15.11.1.1" style="width:14.2pt;">19.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.12.1">
<span class="ltx_p" id="S3.T7.1.15.12.1.1" style="width:11.4pt;">43.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.13.1">
<span class="ltx_p" id="S3.T7.1.15.13.1.1" style="width:11.4pt;">41.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.15.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.15.14.1">
<span class="ltx_p" id="S3.T7.1.15.14.1.1" style="width:11.4pt;">44.2</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.16">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.1.1">
<span class="ltx_p" id="S3.T7.1.16.1.1.1" style="width:42.7pt;">MemoRAG</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.2.1">
<span class="ltx_p" id="S3.T7.1.16.2.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.2.1.1.1">27.5</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.3.1">
<span class="ltx_p" id="S3.T7.1.16.3.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.3.1.1.1">43.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.4.1">
<span class="ltx_p" id="S3.T7.1.16.4.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.4.1.1.1">52.2</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.5.1">
<span class="ltx_p" id="S3.T7.1.16.5.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.5.1.1.1">33.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.6.1">
<span class="ltx_p" id="S3.T7.1.16.6.1.1" style="width:14.2pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.6.1.1.1">54.1</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.7.1">
<span class="ltx_p" id="S3.T7.1.16.7.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.7.1.1.1">54.8</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.8.1">
<span class="ltx_p" id="S3.T7.1.16.8.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.8.1.1.1">32.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.9.1">
<span class="ltx_p" id="S3.T7.1.16.9.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.9.1.1.1">26.3</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.10.1">
<span class="ltx_p" id="S3.T7.1.16.10.1.1" style="width:17.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.10.1.1.1">15.7</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.11.1">
<span class="ltx_p" id="S3.T7.1.16.11.1.1" style="width:14.2pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.11.1.1.1">22.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.12.1">
<span class="ltx_p" id="S3.T7.1.16.12.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.12.1.1.1">51.5</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.13.1">
<span class="ltx_p" id="S3.T7.1.16.13.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.13.1.1.1">51.0</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.16.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.16.14.1">
<span class="ltx_p" id="S3.T7.1.16.14.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.16.14.1.1.1">55.6</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.17">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" colspan="8" id="S3.T7.1.17.1"><span class="ltx_text ltx_font_bold" id="S3.T7.1.17.1.1">Generator: Mistral-7B-Instruct-v0.2-32K</span></td>
<td class="ltx_td ltx_align_top ltx_border_t" id="S3.T7.1.17.2"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.17.3"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.17.4"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.17.5"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.17.6"></td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.17.7"></td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.18">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.1.1">
<span class="ltx_p" id="S3.T7.1.18.1.1.1" style="width:42.7pt;">Full</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.2.1">
<span class="ltx_p" id="S3.T7.1.18.2.1.1" style="width:11.4pt;">20.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.3.1">
<span class="ltx_p" id="S3.T7.1.18.3.1.1" style="width:11.4pt;">29.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.4.1">
<span class="ltx_p" id="S3.T7.1.18.4.1.1" style="width:11.4pt;">46.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.5.1">
<span class="ltx_p" id="S3.T7.1.18.5.1.1" style="width:11.4pt;">18.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.6.1">
<span class="ltx_p" id="S3.T7.1.18.6.1.1" style="width:14.2pt;">20.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.7.1">
<span class="ltx_p" id="S3.T7.1.18.7.1.1" style="width:11.4pt;">37.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.8.1">
<span class="ltx_p" id="S3.T7.1.18.8.1.1" style="width:11.4pt;">25.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.9.1">
<span class="ltx_p" id="S3.T7.1.18.9.1.1" style="width:11.4pt;">27.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.10.1">
<span class="ltx_p" id="S3.T7.1.18.10.1.1" style="width:17.1pt;">12.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.11.1">
<span class="ltx_p" id="S3.T7.1.18.11.1.1" style="width:14.2pt;">12.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.12.1">
<span class="ltx_p" id="S3.T7.1.18.12.1.1" style="width:11.4pt;">36.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.13.1">
<span class="ltx_p" id="S3.T7.1.18.13.1.1" style="width:11.4pt;">35.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S3.T7.1.18.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.18.14.1">
<span class="ltx_p" id="S3.T7.1.18.14.1.1" style="width:11.4pt;">42.1</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.19">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.1.1">
<span class="ltx_p" id="S3.T7.1.19.1.1.1" style="width:42.7pt;">BGE-M3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.2.1">
<span class="ltx_p" id="S3.T7.1.19.2.1.1" style="width:11.4pt;">17.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.3.1">
<span class="ltx_p" id="S3.T7.1.19.3.1.1" style="width:11.4pt;">29.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.4.1">
<span class="ltx_p" id="S3.T7.1.19.4.1.1" style="width:11.4pt;">46.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.5.1">
<span class="ltx_p" id="S3.T7.1.19.5.1.1" style="width:11.4pt;">18.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.6.1">
<span class="ltx_p" id="S3.T7.1.19.6.1.1" style="width:14.2pt;">20.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.7.1">
<span class="ltx_p" id="S3.T7.1.19.7.1.1" style="width:11.4pt;">36.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.8.1">
<span class="ltx_p" id="S3.T7.1.19.8.1.1" style="width:11.4pt;">24.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.9.1">
<span class="ltx_p" id="S3.T7.1.19.9.1.1" style="width:11.4pt;">26.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.10.1">
<span class="ltx_p" id="S3.T7.1.19.10.1.1" style="width:17.1pt;">13.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.11.1">
<span class="ltx_p" id="S3.T7.1.19.11.1.1" style="width:14.2pt;">12.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.12.1">
<span class="ltx_p" id="S3.T7.1.19.12.1.1" style="width:11.4pt;">40.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.13.1">
<span class="ltx_p" id="S3.T7.1.19.13.1.1" style="width:11.4pt;">42.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.19.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.19.14.1">
<span class="ltx_p" id="S3.T7.1.19.14.1.1" style="width:11.4pt;">41.1</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.20">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.1.1">
<span class="ltx_p" id="S3.T7.1.20.1.1.1" style="width:42.7pt;">Stella-v5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.2.1">
<span class="ltx_p" id="S3.T7.1.20.2.1.1" style="width:11.4pt;">13.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.3.1">
<span class="ltx_p" id="S3.T7.1.20.3.1.1" style="width:11.4pt;">23.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.4.1">
<span class="ltx_p" id="S3.T7.1.20.4.1.1" style="width:11.4pt;">42.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.5.1">
<span class="ltx_p" id="S3.T7.1.20.5.1.1" style="width:11.4pt;">18.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.6.1">
<span class="ltx_p" id="S3.T7.1.20.6.1.1" style="width:14.2pt;">22.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.7.1">
<span class="ltx_p" id="S3.T7.1.20.7.1.1" style="width:11.4pt;">31.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.8.1">
<span class="ltx_p" id="S3.T7.1.20.8.1.1" style="width:11.4pt;">21.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.9.1">
<span class="ltx_p" id="S3.T7.1.20.9.1.1" style="width:11.4pt;">18.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.10.1">
<span class="ltx_p" id="S3.T7.1.20.10.1.1" style="width:17.1pt;">13.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.11.1">
<span class="ltx_p" id="S3.T7.1.20.11.1.1" style="width:14.2pt;">9.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.12.1">
<span class="ltx_p" id="S3.T7.1.20.12.1.1" style="width:11.4pt;">40.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.13.1">
<span class="ltx_p" id="S3.T7.1.20.13.1.1" style="width:11.4pt;">34.9</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.20.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.20.14.1">
<span class="ltx_p" id="S3.T7.1.20.14.1.1" style="width:11.4pt;">42.1</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.21">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.1.1">
<span class="ltx_p" id="S3.T7.1.21.1.1.1" style="width:42.7pt;">RQ-RAG</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.2.1">
<span class="ltx_p" id="S3.T7.1.21.2.1.1" style="width:11.4pt;">17.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.3.1">
<span class="ltx_p" id="S3.T7.1.21.3.1.1" style="width:11.4pt;">29.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.4.1">
<span class="ltx_p" id="S3.T7.1.21.4.1.1" style="width:11.4pt;">47.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.5.1">
<span class="ltx_p" id="S3.T7.1.21.5.1.1" style="width:11.4pt;">19.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.6.1">
<span class="ltx_p" id="S3.T7.1.21.6.1.1" style="width:14.2pt;">21.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.7.1">
<span class="ltx_p" id="S3.T7.1.21.7.1.1" style="width:11.4pt;">37.0</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.8.1">
<span class="ltx_p" id="S3.T7.1.21.8.1.1" style="width:11.4pt;">22.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.9.1">
<span class="ltx_p" id="S3.T7.1.21.9.1.1" style="width:11.4pt;">18.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.10.1">
<span class="ltx_p" id="S3.T7.1.21.10.1.1" style="width:17.1pt;">13.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.11.1">
<span class="ltx_p" id="S3.T7.1.21.11.1.1" style="width:14.2pt;">12.7</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.12.1">
<span class="ltx_p" id="S3.T7.1.21.12.1.1" style="width:11.4pt;">44.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.13.1">
<span class="ltx_p" id="S3.T7.1.21.13.1.1" style="width:11.4pt;">44.6</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.21.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.21.14.1">
<span class="ltx_p" id="S3.T7.1.21.14.1.1" style="width:11.4pt;">43.4</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.22">
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.1.1">
<span class="ltx_p" id="S3.T7.1.22.1.1.1" style="width:42.7pt;">HyDE</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.2.1">
<span class="ltx_p" id="S3.T7.1.22.2.1.1" style="width:11.4pt;">17.4</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.3.1">
<span class="ltx_p" id="S3.T7.1.22.3.1.1" style="width:11.4pt;">29.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.4.1">
<span class="ltx_p" id="S3.T7.1.22.4.1.1" style="width:11.4pt;">46.3</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.5.1">
<span class="ltx_p" id="S3.T7.1.22.5.1.1" style="width:11.4pt;">18.5</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.6.1">
<span class="ltx_p" id="S3.T7.1.22.6.1.1" style="width:14.2pt;">20.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.7.1">
<span class="ltx_p" id="S3.T7.1.22.7.1.1" style="width:11.4pt;">36.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.8.1">
<span class="ltx_p" id="S3.T7.1.22.8.1.1" style="width:11.4pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.9.1">
<span class="ltx_p" id="S3.T7.1.22.9.1.1" style="width:11.4pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.10.1">
<span class="ltx_p" id="S3.T7.1.22.10.1.1" style="width:17.1pt;">-</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.11.1">
<span class="ltx_p" id="S3.T7.1.22.11.1.1" style="width:14.2pt;">12.2</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.12.1">
<span class="ltx_p" id="S3.T7.1.22.12.1.1" style="width:11.4pt;">42.8</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.13.1">
<span class="ltx_p" id="S3.T7.1.22.13.1.1" style="width:11.4pt;">35.1</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top" id="S3.T7.1.22.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.22.14.1">
<span class="ltx_p" id="S3.T7.1.22.14.1.1" style="width:11.4pt;">43.9</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S3.T7.1.23">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.1">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.1.1">
<span class="ltx_p" id="S3.T7.1.23.1.1.1" style="width:42.7pt;">MemoRAG</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.2">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.2.1">
<span class="ltx_p" id="S3.T7.1.23.2.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.2.1.1.1">23.1</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.3">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.3.1">
<span class="ltx_p" id="S3.T7.1.23.3.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.3.1.1.1">31.2</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.4">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.4.1">
<span class="ltx_p" id="S3.T7.1.23.4.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.4.1.1.1">50.0</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.5">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.5.1">
<span class="ltx_p" id="S3.T7.1.23.5.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.5.1.1.1">26.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.6">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.6.1">
<span class="ltx_p" id="S3.T7.1.23.6.1.1" style="width:14.2pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.6.1.1.1">30.3</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.7">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.7.1">
<span class="ltx_p" id="S3.T7.1.23.7.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.7.1.1.1">42.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.8">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.8.1">
<span class="ltx_p" id="S3.T7.1.23.8.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.8.1.1.1">27.1</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.9">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.9.1">
<span class="ltx_p" id="S3.T7.1.23.9.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.9.1.1.1">31.6</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.10">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.10.1">
<span class="ltx_p" id="S3.T7.1.23.10.1.1" style="width:17.1pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.10.1.1.1">17.9</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.11">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.11.1">
<span class="ltx_p" id="S3.T7.1.23.11.1.1" style="width:14.2pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.11.1.1.1">15.4</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.12">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.12.1">
<span class="ltx_p" id="S3.T7.1.23.12.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.12.1.1.1">48.0</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.13">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.13.1">
<span class="ltx_p" id="S3.T7.1.23.13.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.13.1.1.1">51.2</span></span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="S3.T7.1.23.14">
<span class="ltx_inline-block ltx_align_top" id="S3.T7.1.23.14.1">
<span class="ltx_p" id="S3.T7.1.23.14.1.1" style="width:11.4pt;"><span class="ltx_text ltx_font_bold" id="S3.T7.1.23.14.1.1.1">53.6</span></span>
</span>
</td>
</tr>
</table>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Experiments on UltraDomain</h3>
<div class="ltx_para ltx_noindent" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">To evaluate MemoRAG’s ability to generalize across diverse and complex tasks, we evaluate MemoRAG on the UltraDomain benchmark. Most queries in UltraDomain involve either ambiguous information needs or unstructured knowledge retrieval challenges. UltraDomain consists of two types of datasets. The first type includes three datasets with context sizes under 100K tokens which are in the same distributions of our training datasets. We refer to these three datasets as the in-domain datasets. The second type includes 18 datasets sourced from 428 English college textbooks with context length up to one million tokens, covering subjects such as philosophy, exemplified by ‘Nietzsche and Greek Thought,’ and mathematics, represented by ‘Quantum Theory for Mathematicians.’ As the data distribution of the second type of datasets are different from training data, we refer the second type as out-of-domain datasets.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS3.p2">
<p class="ltx_p" id="S3.SS3.p2.1">The experiment results are summarized in Table <span class="ltx_ref ltx_missing_label ltx_ref_self">LABEL:tab:domain_exp</span>, from which we draw the following conclusions: (1) MemoRAG outperforms all baseline models across all datasets, demonstrating its strong domain generalization capabilities. (2) Directly inputting the full context into LLMs generally yields better performance compared to other RAG methods (BGE-M3, Stella-v5, and HyDE). This finding reveals that standard RAG systems struggle with handling long contexts and high-level questions. (3) In contrast, MemoRAG consistently surpasses the performance of directly using the full context, illustrating its ability to effectively bridge the gap between processing super long contexts and addressing complex tasks.
(4) MemoRAG demonstrates superior performance on the three in-domain datasets, suggesting that its potential can be further enhanced with more diverse training data.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Experiments on All Benchmarks</h3>
<div class="ltx_para ltx_noindent" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#S3.T7" title="Table 7 ‣ 3.2 Baselines ‣ 3 Experiment ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">7</span></a> shows the experiment results on three benchmarks, from which we can conclude that MemoRAG generally surpasses all baselines on all datasets, except for a single outlier.
<span class="ltx_text ltx_font_bold" id="S3.SS4.p1.1.1">First</span>, for open-domain QA tasks, MemoRAG improves performance over all baselines on all datasets except for en.qa with Llama3 as generator. This verifies that in the comfortable zone of standard RAG, where most queries have explicit information needs, MemoRAG can better locate the expected evidence within the original context, thanks to the memory-generated clues.
<span class="ltx_text ltx_font_bold" id="S3.SS4.p1.1.2">Second</span>, most previous RAG methods struggle with tasks that do not involve queries, such as summarization tasks (e.g., MultiNews, GovReport, and en.sum)<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>In the experiments, we use the summarization instruct as a fake query to facilitate standard RAG to perform summarization.</span></span></span>. Our MemoRAG enables the RAG system to generate key points from the input context and retrieve more details to form a comprehensive summary.
<span class="ltx_text ltx_font_bold" id="S3.SS4.p1.1.3">Third</span>, for domain-specific tasks (e.g., Financial and Legal), MemoRAG shows significant improvement, indicating MemoRAG’s superiority in handling complex tasks with long contexts.
<span class="ltx_text ltx_font_bold" id="S3.SS4.p1.1.4">In summary</span>, the results demonstrate that MemoRAG significantly enhances performance over standard RAG methods and other baselines across various datasets and query types. MemoRAG’s ability to handle complex and long-context tasks effectively highlights its advantages, particularly in scenarios where standard RAG systems struggle. This consistency across different generators underscores the robustness and general applicability of MemoRAG.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Conclusion</h2>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">In this paper, we introduce MemoRAG, a novel Retrieval-Augmented Generation (RAG) system that integrates global context-awareness to address the challenges posed by complex tasks involving long input contexts. MemoRAG features a memory module that constructs a compact global memory across the entire database, facilitating the generation of context-dependent clues that effectively link the knowledge database to the precise information required for accurate answers. Extensive experiments across knowledge-intensive QA, summarization, and real-world applications involving lengthy documents demonstrate that MemoRAG significantly outperforms traditional RAG systems. It excels in tasks requiring advanced information aggregation and exhibits exceptional robustness and versatility in managing large-scale texts, such as textbooks, financial reports, and legal contracts, handling contexts of up to one million tokens and resolving complex queries with superior accuracy.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Abdin et al. (2024)</span>
<span class="ltx_bibblock">
Marah Abdin, Sam Ade Jacobs, Ammar Ahmad Awan, Jyoti Aneja, Ahmed Awadallah, Hany Awadalla, Nguyen Bach, Amit Bahree, Arash Bakhtiari, Harkirat Behl, Alon Benhaim, Misha Bilenko, Johan Bjorck, Sébastien Bubeck, Martin Cai, Caio César Teodoro Mendes, Weizhu Chen, Vishrav Chaudhary, Parul Chopra, Allie Del Giorno, Gustavo de Rosa, Matthew Dixon, Ronen Eldan, Dan Iter, Amit Garg, Abhishek Goswami, Suriya Gunasekar, Emman Haider, Junheng Hao, Russell J. Hewett, Jamie Huynh, Mojan Javaheripi, Xin Jin, Piero Kauffmann, Nikos Karampatziakis, Dongwoo Kim, Mahoud Khademi, Lev Kurilenko, James R. Lee, Yin Tat Lee, Yuanzhi Li, Chen Liang, Weishung Liu, Eric Lin, Zeqi Lin, Piyush Madan, Arindam Mitra, Hardik Modi, Anh Nguyen, Brandon Norick, Barun Patra, Daniel Perez-Becker, Thomas Portet, Reid Pryzant, Heyang Qin, Marko Radmilac, Corby Rosset, Sambudha Roy, Olatunji Ruwase, Olli Saarikivi, Amin Saied, Adil Salim, Michael Santacroce, Shital Shah, Ning Shang, Hiteshi Sharma, Xia Song, Masahiro Tanaka, Xin Wang, Rachel
Ward, Guanhua Wang, Philipp Witte, Michael Wyatt, Can Xu, Jiahang Xu, Sonali Yadav, Fan Yang, Ziyi Yang, Donghan Yu, Chengruidong Zhang, Cyril Zhang, Jianwen Zhang, Li Lyna Zhang, Yi Zhang, Yue Zhang, Yunan Zhang, and Xiren Zhou.

</span>
<span class="ltx_bibblock">Phi-3 technical report: A highly capable language model locally on your phone, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2023)</span>
<span class="ltx_bibblock">
Yushi Bai, Xin Lv, Jiajie Zhang, Hongchang Lyu, Jiankai Tang, Zhidian Huang, Zhengxiao Du, Xiao Liu, Aohan Zeng, Lei Hou, et al.

</span>
<span class="ltx_bibblock">Longbench: A bilingual, multitask benchmark for long context understanding.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv preprint arXiv:2308.14508</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Brown et al. (2020)</span>
<span class="ltx_bibblock">
Tom Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared D Kaplan, Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda Askell, et al.

</span>
<span class="ltx_bibblock">Language models are few-shot learners.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Advances in neural information processing systems</em>, 33:1877–1901, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chan et al. (2024)</span>
<span class="ltx_bibblock">
Chi-Min Chan, Chunpu Xu, Ruibin Yuan, Hongyin Luo, Wei Xue, Yike Guo, and Jie Fu.

</span>
<span class="ltx_bibblock">Rq-rag: Learning to refine queries for retrieval augmented generation, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://arxiv.org/abs/2404.00610" title="">https://arxiv.org/abs/2404.00610</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2023)</span>
<span class="ltx_bibblock">
Jianlv Chen, Shitao Xiao, Peitian Zhang, Kun Luo, Defu Lian, and Zheng Liu.

</span>
<span class="ltx_bibblock">Bge m3-embedding: Multi-lingual, multi-functionality, multi-granularity text embeddings through self-knowledge distillation, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dasigi et al. (2021)</span>
<span class="ltx_bibblock">
Pradeep Dasigi, Kyle Lo, Iz Beltagy, Arman Cohan, Noah A Smith, and Matt Gardner.

</span>
<span class="ltx_bibblock">A dataset of information-seeking questions and answers anchored in research papers.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">Proceedings of the 2021 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies</em>, pp.  4599–4610, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Edge et al. (2024)</span>
<span class="ltx_bibblock">
Darren Edge, Ha Trinh, Newman Cheng, Joshua Bradley, Alex Chao, Apurva Mody, Steven Truitt, and Jonathan Larson.

</span>
<span class="ltx_bibblock">From local to global: A graph rag approach to query-focused summarization, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://arxiv.org/abs/2404.16130" title="">https://arxiv.org/abs/2404.16130</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fabbri et al. (2019)</span>
<span class="ltx_bibblock">
Alexander R. Fabbri, Irene Li, Tianwei She, Suyi Li, and Dragomir R. Radev.

</span>
<span class="ltx_bibblock">Multi-news: a large-scale multi-document summarization dataset and abstractive hierarchical model, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2022)</span>
<span class="ltx_bibblock">
Luyu Gao, Xueguang Ma, Jimmy Lin, and Jamie Callan.

</span>
<span class="ltx_bibblock">Precise zero-shot dense retrieval without relevance labels, 2022.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://arxiv.org/abs/2212.10496" title="">https://arxiv.org/abs/2212.10496</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2024)</span>
<span class="ltx_bibblock">
Yunfan Gao, Yun Xiong, Xinyu Gao, Kangxiang Jia, Jinliu Pan, Yuxi Bi, Yi Dai, Jiawei Sun, Qianyu Guo, Meng Wang, and Haofen Wang.

</span>
<span class="ltx_bibblock">Retrieval-augmented generation for large language models: A survey, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ho et al. (2020)</span>
<span class="ltx_bibblock">
Xanh Ho, Anh-Khoa Duong Nguyen, Saku Sugawara, and Akiko Aizawa.

</span>
<span class="ltx_bibblock">Constructing a multi-hop QA dataset for comprehensive evaluation of reasoning steps.

</span>
<span class="ltx_bibblock">In Donia Scott, Nuria Bel, and Chengqing Zong (eds.), <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Proceedings of the 28th International Conference on Computational Linguistics</em>, pp.  6609–6625, Barcelona, Spain (Online), December 2020. International Committee on Computational Linguistics.

</span>
<span class="ltx_bibblock">doi: <span class="ltx_ref ltx_nolink ltx_Url ltx_ref_self">10.18653/v1/2020.coling-main.580</span>.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://aclanthology.org/2020.coling-main.580" title="">https://aclanthology.org/2020.coling-main.580</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2021)</span>
<span class="ltx_bibblock">
Luyang Huang, Shuyang Cao, Nikolaus Parulian, Heng Ji, and Lu Wang.

</span>
<span class="ltx_bibblock">Efficient attentions for long document summarization.

</span>
<span class="ltx_bibblock">In Kristina Toutanova, Anna Rumshisky, Luke Zettlemoyer, Dilek Hakkani-Tur, Iz Beltagy, Steven Bethard, Ryan Cotterell, Tanmoy Chakraborty, and Yichao Zhou (eds.), <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Proceedings of the 2021 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies</em>, pp.  1419–1436, Online, June 2021. Association for Computational Linguistics.

</span>
<span class="ltx_bibblock">doi: <span class="ltx_ref ltx_nolink ltx_Url ltx_ref_self">10.18653/v1/2021.naacl-main.112</span>.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://aclanthology.org/2021.naacl-main.112" title="">https://aclanthology.org/2021.naacl-main.112</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Izacard &amp; Grave (2021)</span>
<span class="ltx_bibblock">
Gautier Izacard and Édouard Grave.

</span>
<span class="ltx_bibblock">Leveraging passage retrieval with generative models for open domain question answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Proceedings of the 16th Conference of the European Chapter of the Association for Computational Linguistics: Main Volume</em>, pp.  874–880, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023)</span>
<span class="ltx_bibblock">
Albert Q Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel, Guillaume Lample, Lucile Saulnier, et al.

</span>
<span class="ltx_bibblock">Mistral 7b.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">arXiv preprint arXiv:2310.06825</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kočiský et al. (2017)</span>
<span class="ltx_bibblock">
Tomáš Kočiský, Jonathan Schwarz, Phil Blunsom, Chris Dyer, Karl Moritz Hermann, Gábor Melis, and Edward Grefenstette.

</span>
<span class="ltx_bibblock">The narrativeqa reading comprehension challenge, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lewis et al. (2020)</span>
<span class="ltx_bibblock">
Patrick Lewis, Ethan Perez, Aleksandra Piktus, Fabio Petroni, Vladimir Karpukhin, Naman Goyal, Heinrich Küttler, Mike Lewis, Wen-tau Yih, Tim Rocktäschel, Sebastian Riedel, and Douwe Kiela.

</span>
<span class="ltx_bibblock">Retrieval-Augmented Generation for knowledge-intensive NLP tasks.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Advances in Neural Information Processing Systems</em>, volume 33, pp.  9459–9474, 2020.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://proceedings.neurips.cc/paper_files/paper/2020/file/6b493230205f780e1bc26945df7481e5-Paper.pdf" title="">https://proceedings.neurips.cc/paper_files/paper/2020/file/6b493230205f780e1bc26945df7481e5-Paper.pdf</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nogueira &amp; Cho (2020)</span>
<span class="ltx_bibblock">
Rodrigo Nogueira and Kyunghyun Cho.

</span>
<span class="ltx_bibblock">Passage re-ranking with bert.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">arXiv preprint arXiv:1901.04085</em>, 2020.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://arxiv.org/pdf/1901.04085" title="">https://arxiv.org/pdf/1901.04085</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2023)</span>
<span class="ltx_bibblock">
OpenAI.

</span>
<span class="ltx_bibblock">Gpt-4 technical report.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://cdn.openai.com/papers/gpt-4.pdf" title="">https://cdn.openai.com/papers/gpt-4.pdf</a>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Qian et al. (2024)</span>
<span class="ltx_bibblock">
Hongjin Qian, Zheng Liu, Peitian Zhang, Kelong Mao, Yujia Zhou, Xu Chen, and Zhicheng Dou.

</span>
<span class="ltx_bibblock">Are long-llms a necessity for long-context tasks?, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://arxiv.org/abs/2405.15318" title="">https://arxiv.org/abs/2405.15318</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Soboleva et al. (2023)</span>
<span class="ltx_bibblock">
Daria Soboleva, Faisal Al-Khateeb, Robert Myers, Jacob R Steeves, Joel Hestness, and Nolan Dey.

</span>
<span class="ltx_bibblock">SlimPajama: A 627B token cleaned and deduplicated version of RedPajama.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://www.cerebras.net/blog/slimpajama-a-627b-token-cleaned-and-deduplicated-version-of-redpajama" title="">https://www.cerebras.net/blog/slimpajama-a-627b-token-cleaned-and-deduplicated-version-of-redpajama</a>, June 2023.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/datasets/cerebras/SlimPajama-627B" title="">https://huggingface.co/datasets/cerebras/SlimPajama-627B</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et al. (2023)</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, et al.

</span>
<span class="ltx_bibblock">Llama 2: Open foundation and fine-tuned chat models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">arXiv preprint arXiv:2307.09288</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Trivedi et al. (2022)</span>
<span class="ltx_bibblock">
Harsh Trivedi, Niranjan Balasubramanian, Tushar Khot, and Ashish Sabharwal.

</span>
<span class="ltx_bibblock">Musique: Multihop questions via single-hop question composition.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">Transactions of the Association for Computational Linguistics</em>, 10:539–554, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang et al. (2018)</span>
<span class="ltx_bibblock">
Zhilin Yang, Peng Qi, Saizheng Zhang, Yoshua Bengio, William W. Cohen, Ruslan Salakhutdinov, and Christopher D. Manning.

</span>
<span class="ltx_bibblock">Hotpotqa: A dataset for diverse, explainable multi-hop question answering, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2024)</span>
<span class="ltx_bibblock">
Xinrong Zhang, Yingfa Chen, Shengding Hu, Zihang Xu, Junhao Chen, Moo Khai Hao, Xu Han, Zhen Leng Thai, Shuo Wang, Zhiyuan Liu, and Maosong Sun.

</span>
<span class="ltx_bibblock"><math alttext="\infty" class="ltx_Math" display="inline" id="bib.bib24.1.m1.1"><semantics id="bib.bib24.1.m1.1a"><mi id="bib.bib24.1.m1.1.1" mathvariant="normal" xref="bib.bib24.1.m1.1.1.cmml">∞</mi><annotation-xml encoding="MathML-Content" id="bib.bib24.1.m1.1b"><infinity id="bib.bib24.1.m1.1.1.cmml" xref="bib.bib24.1.m1.1.1"></infinity></annotation-xml><annotation encoding="application/x-tex" id="bib.bib24.1.m1.1c">\infty</annotation><annotation encoding="application/x-llamapun" id="bib.bib24.1.m1.1d">∞</annotation></semantics></math>bench: Extending long context evaluation beyond 100k tokens, 2024.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>More details of the Datasets</h2>
<div class="ltx_para ltx_noindent" id="A1.p1">
<p class="ltx_p" id="A1.p1.1">To construct the SFT training set, we first collect long contexts from novels, academic papers, news, financial reports, and legal contracts. The collection of novels, academic papers, and news comes from the training datasets of NarrativeQA, Qasper, and HotpotQA. The legal contracts are sourced from <a class="ltx_ref ltx_href" href="https://huggingface.co/datasets/albertvillanova/legal_contracts/tree/main" title="">this repository</a>, and the financial reports are from <a class="ltx_ref ltx_href" href="https://huggingface.co/datasets/albertvillanova/legal_contracts/tree/main" title="">this repository</a>. We then sample long contexts with lengths of up to 80K tokens and prompt strong LLMs (e.g., GPT-4 128K, Deepseek-v2-128K) to generate high-level and insightful question-answer pairs. After quality inspection of these generated QA pairs, we select 20,000 samples to prompt the same LLMs to generate answer clues that can bridge the gap between the query and the long context. In this process, we provide the model with the query, the long context, and the answer, enabling the LLMs to utilize both priori and posteriori knowledge to more easily generate the answer clues. We then inspect the generated answer clues, performing strategic filtering for better quality, resulting in 17,116 SFT training samples.</p>
</div>
<div class="ltx_para" id="A1.p2">
<p class="ltx_p" id="A1.p2.1">For the evaluation dataset, we use a separate set of contexts from the aforementioned datasets as the evaluation context. We follow the same process to generate QA pairs, creating the in-domain evaluation datasets: the Fin dataset (from the financial reports), the Leg dataset (from the legal contracts), and the Mix dataset (from NarrativeQA, Qasper, and HotpotQA). Additionally, we collect college textbooks from 18 domains from <a class="ltx_ref ltx_href" href="https://huggingface.co/datasets/P1ayer-1/books-3-textbooks" title="">this repository</a> to construct the out-of-domain evaluation dataset, following the same process. The statistical information of the in-domain datasets is shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.05591v2#A1.T8" title="Table 8 ‣ Appendix A More details of the Datasets ‣ MemoRAG: Moving towards Next-Gen RAG Via Memory-Inspired Knowledge Discovery"><span class="ltx_text ltx_ref_tag">8</span></a>, and the statistical information of the out-of-domain datasets is shown in Table <span class="ltx_ref ltx_missing_label ltx_ref_self">LABEL:tab:outdomain</span>.</p>
</div>
<figure class="ltx_table" id="A1.T8">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 8: </span>Statistical information of the datasets utilized in this paper.</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="A1.T8.1">
<tr class="ltx_tr" id="A1.T8.1.1">
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.1.1">Dataset</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.1.2">Narrative</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.1.3">Qasper</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.1.4">MultiField</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.1.5">Hotpot</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.1.6">MuSiQue</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.1.7">2Wiki</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.1">Num of Samples</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.2">200</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.3">200</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.4">150</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.5">200</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.6">200</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.2.7">200</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.3">
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.1">Ave. Length</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.2">18,409</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.3">3,619</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.4">4,559</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.5">9,151</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.6">11,214</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.3.7">4,887</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.4">
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.1">Metric</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.2">F1</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.3">F1</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.4">F1</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.5">F1</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.6">F1</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.4.7">F1</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.5">
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.5.1">Dataset</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.5.2">GovReport</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.5.3">MultiNews</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.5.4">En.Sum</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.5.5">En.QA</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.5.6">Fin</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T8.1.5.7">Legal</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.6">
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.6.1">Num of Samples</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.6.2">200</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.6.3">200</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.6.4">103</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.6.5">351</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.6.6">345</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T8.1.6.7">438</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.7">
<td class="ltx_td ltx_align_center" id="A1.T8.1.7.1">Ave. Length</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.7.2">8,734</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.7.3">2,113</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.7.4">171,500</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.7.5">192,600</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.7.6">40,625</td>
<td class="ltx_td ltx_align_center" id="A1.T8.1.7.7">51,413</td>
</tr>
<tr class="ltx_tr" id="A1.T8.1.8">
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T8.1.8.1">Metric</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T8.1.8.2">Rouge-L</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T8.1.8.3">Rouge-L</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T8.1.8.4">F1</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T8.1.8.5">Rouge-L</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T8.1.8.6">F1</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A1.T8.1.8.7">F1</td>
</tr>
</table>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
<figure class="ltx_table" id="A1.T9">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 9: </span>Statistical information of the out-of-domain evaluation datasets utilized in this paper.</figcaption>
<table class="ltx_tabular ltx_centering ltx_align_middle" id="A1.T9.5">
<tr class="ltx_tr" id="A1.T9.5.5">
<td class="ltx_td ltx_align_left ltx_border_tt" id="A1.T9.5.5.6">Dataset</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T9.5.5.7">Num</td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T9.1.1.1"><math alttext="\max(|{\mathcal{C}}|)" class="ltx_Math" display="inline" id="A1.T9.1.1.1.m1.3"><semantics id="A1.T9.1.1.1.m1.3a"><mrow id="A1.T9.1.1.1.m1.3.3.1" xref="A1.T9.1.1.1.m1.3.3.2.cmml"><mi id="A1.T9.1.1.1.m1.2.2" xref="A1.T9.1.1.1.m1.2.2.cmml">max</mi><mo id="A1.T9.1.1.1.m1.3.3.1a" xref="A1.T9.1.1.1.m1.3.3.2.cmml">⁡</mo><mrow id="A1.T9.1.1.1.m1.3.3.1.1" xref="A1.T9.1.1.1.m1.3.3.2.cmml"><mo id="A1.T9.1.1.1.m1.3.3.1.1.2" stretchy="false" xref="A1.T9.1.1.1.m1.3.3.2.cmml">(</mo><mrow id="A1.T9.1.1.1.m1.3.3.1.1.1.2" xref="A1.T9.1.1.1.m1.3.3.1.1.1.1.cmml"><mo id="A1.T9.1.1.1.m1.3.3.1.1.1.2.1" stretchy="false" xref="A1.T9.1.1.1.m1.3.3.1.1.1.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="A1.T9.1.1.1.m1.1.1" xref="A1.T9.1.1.1.m1.1.1.cmml">𝒞</mi><mo id="A1.T9.1.1.1.m1.3.3.1.1.1.2.2" stretchy="false" xref="A1.T9.1.1.1.m1.3.3.1.1.1.1.1.cmml">|</mo></mrow><mo id="A1.T9.1.1.1.m1.3.3.1.1.3" stretchy="false" xref="A1.T9.1.1.1.m1.3.3.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.T9.1.1.1.m1.3b"><apply id="A1.T9.1.1.1.m1.3.3.2.cmml" xref="A1.T9.1.1.1.m1.3.3.1"><max id="A1.T9.1.1.1.m1.2.2.cmml" xref="A1.T9.1.1.1.m1.2.2"></max><apply id="A1.T9.1.1.1.m1.3.3.1.1.1.1.cmml" xref="A1.T9.1.1.1.m1.3.3.1.1.1.2"><abs id="A1.T9.1.1.1.m1.3.3.1.1.1.1.1.cmml" xref="A1.T9.1.1.1.m1.3.3.1.1.1.2.1"></abs><ci id="A1.T9.1.1.1.m1.1.1.cmml" xref="A1.T9.1.1.1.m1.1.1">𝒞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.1.1.1.m1.3c">\max(|{\mathcal{C}}|)</annotation><annotation encoding="application/x-llamapun" id="A1.T9.1.1.1.m1.3d">roman_max ( | caligraphic_C | )</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T9.2.2.2"><math alttext="\min(|{\mathcal{C}}|)" class="ltx_Math" display="inline" id="A1.T9.2.2.2.m1.3"><semantics id="A1.T9.2.2.2.m1.3a"><mrow id="A1.T9.2.2.2.m1.3.3.1" xref="A1.T9.2.2.2.m1.3.3.2.cmml"><mi id="A1.T9.2.2.2.m1.2.2" xref="A1.T9.2.2.2.m1.2.2.cmml">min</mi><mo id="A1.T9.2.2.2.m1.3.3.1a" xref="A1.T9.2.2.2.m1.3.3.2.cmml">⁡</mo><mrow id="A1.T9.2.2.2.m1.3.3.1.1" xref="A1.T9.2.2.2.m1.3.3.2.cmml"><mo id="A1.T9.2.2.2.m1.3.3.1.1.2" stretchy="false" xref="A1.T9.2.2.2.m1.3.3.2.cmml">(</mo><mrow id="A1.T9.2.2.2.m1.3.3.1.1.1.2" xref="A1.T9.2.2.2.m1.3.3.1.1.1.1.cmml"><mo id="A1.T9.2.2.2.m1.3.3.1.1.1.2.1" stretchy="false" xref="A1.T9.2.2.2.m1.3.3.1.1.1.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="A1.T9.2.2.2.m1.1.1" xref="A1.T9.2.2.2.m1.1.1.cmml">𝒞</mi><mo id="A1.T9.2.2.2.m1.3.3.1.1.1.2.2" stretchy="false" xref="A1.T9.2.2.2.m1.3.3.1.1.1.1.1.cmml">|</mo></mrow><mo id="A1.T9.2.2.2.m1.3.3.1.1.3" stretchy="false" xref="A1.T9.2.2.2.m1.3.3.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.T9.2.2.2.m1.3b"><apply id="A1.T9.2.2.2.m1.3.3.2.cmml" xref="A1.T9.2.2.2.m1.3.3.1"><min id="A1.T9.2.2.2.m1.2.2.cmml" xref="A1.T9.2.2.2.m1.2.2"></min><apply id="A1.T9.2.2.2.m1.3.3.1.1.1.1.cmml" xref="A1.T9.2.2.2.m1.3.3.1.1.1.2"><abs id="A1.T9.2.2.2.m1.3.3.1.1.1.1.1.cmml" xref="A1.T9.2.2.2.m1.3.3.1.1.1.2.1"></abs><ci id="A1.T9.2.2.2.m1.1.1.cmml" xref="A1.T9.2.2.2.m1.1.1">𝒞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.2.2.2.m1.3c">\min(|{\mathcal{C}}|)</annotation><annotation encoding="application/x-llamapun" id="A1.T9.2.2.2.m1.3d">roman_min ( | caligraphic_C | )</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T9.3.3.3"><math alttext="\text{ave}(|{\mathcal{C}}|)" class="ltx_Math" display="inline" id="A1.T9.3.3.3.m1.2"><semantics id="A1.T9.3.3.3.m1.2a"><mrow id="A1.T9.3.3.3.m1.2.2" xref="A1.T9.3.3.3.m1.2.2.cmml"><mtext id="A1.T9.3.3.3.m1.2.2.3" xref="A1.T9.3.3.3.m1.2.2.3a.cmml">ave</mtext><mo id="A1.T9.3.3.3.m1.2.2.2" xref="A1.T9.3.3.3.m1.2.2.2.cmml">⁢</mo><mrow id="A1.T9.3.3.3.m1.2.2.1.1" xref="A1.T9.3.3.3.m1.2.2.cmml"><mo id="A1.T9.3.3.3.m1.2.2.1.1.2" stretchy="false" xref="A1.T9.3.3.3.m1.2.2.cmml">(</mo><mrow id="A1.T9.3.3.3.m1.2.2.1.1.1.2" xref="A1.T9.3.3.3.m1.2.2.1.1.1.1.cmml"><mo id="A1.T9.3.3.3.m1.2.2.1.1.1.2.1" stretchy="false" xref="A1.T9.3.3.3.m1.2.2.1.1.1.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="A1.T9.3.3.3.m1.1.1" xref="A1.T9.3.3.3.m1.1.1.cmml">𝒞</mi><mo id="A1.T9.3.3.3.m1.2.2.1.1.1.2.2" stretchy="false" xref="A1.T9.3.3.3.m1.2.2.1.1.1.1.1.cmml">|</mo></mrow><mo id="A1.T9.3.3.3.m1.2.2.1.1.3" stretchy="false" xref="A1.T9.3.3.3.m1.2.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.T9.3.3.3.m1.2b"><apply id="A1.T9.3.3.3.m1.2.2.cmml" xref="A1.T9.3.3.3.m1.2.2"><times id="A1.T9.3.3.3.m1.2.2.2.cmml" xref="A1.T9.3.3.3.m1.2.2.2"></times><ci id="A1.T9.3.3.3.m1.2.2.3a.cmml" xref="A1.T9.3.3.3.m1.2.2.3"><mtext id="A1.T9.3.3.3.m1.2.2.3.cmml" xref="A1.T9.3.3.3.m1.2.2.3">ave</mtext></ci><apply id="A1.T9.3.3.3.m1.2.2.1.1.1.1.cmml" xref="A1.T9.3.3.3.m1.2.2.1.1.1.2"><abs id="A1.T9.3.3.3.m1.2.2.1.1.1.1.1.cmml" xref="A1.T9.3.3.3.m1.2.2.1.1.1.2.1"></abs><ci id="A1.T9.3.3.3.m1.1.1.cmml" xref="A1.T9.3.3.3.m1.1.1">𝒞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.3.3.3.m1.2c">\text{ave}(|{\mathcal{C}}|)</annotation><annotation encoding="application/x-llamapun" id="A1.T9.3.3.3.m1.2d">ave ( | caligraphic_C | )</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T9.4.4.4"><math alttext="\text{ave}(|{\mathcal{Q}}|)" class="ltx_Math" display="inline" id="A1.T9.4.4.4.m1.2"><semantics id="A1.T9.4.4.4.m1.2a"><mrow id="A1.T9.4.4.4.m1.2.2" xref="A1.T9.4.4.4.m1.2.2.cmml"><mtext id="A1.T9.4.4.4.m1.2.2.3" xref="A1.T9.4.4.4.m1.2.2.3a.cmml">ave</mtext><mo id="A1.T9.4.4.4.m1.2.2.2" xref="A1.T9.4.4.4.m1.2.2.2.cmml">⁢</mo><mrow id="A1.T9.4.4.4.m1.2.2.1.1" xref="A1.T9.4.4.4.m1.2.2.cmml"><mo id="A1.T9.4.4.4.m1.2.2.1.1.2" stretchy="false" xref="A1.T9.4.4.4.m1.2.2.cmml">(</mo><mrow id="A1.T9.4.4.4.m1.2.2.1.1.1.2" xref="A1.T9.4.4.4.m1.2.2.1.1.1.1.cmml"><mo id="A1.T9.4.4.4.m1.2.2.1.1.1.2.1" stretchy="false" xref="A1.T9.4.4.4.m1.2.2.1.1.1.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="A1.T9.4.4.4.m1.1.1" xref="A1.T9.4.4.4.m1.1.1.cmml">𝒬</mi><mo id="A1.T9.4.4.4.m1.2.2.1.1.1.2.2" stretchy="false" xref="A1.T9.4.4.4.m1.2.2.1.1.1.1.1.cmml">|</mo></mrow><mo id="A1.T9.4.4.4.m1.2.2.1.1.3" stretchy="false" xref="A1.T9.4.4.4.m1.2.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.T9.4.4.4.m1.2b"><apply id="A1.T9.4.4.4.m1.2.2.cmml" xref="A1.T9.4.4.4.m1.2.2"><times id="A1.T9.4.4.4.m1.2.2.2.cmml" xref="A1.T9.4.4.4.m1.2.2.2"></times><ci id="A1.T9.4.4.4.m1.2.2.3a.cmml" xref="A1.T9.4.4.4.m1.2.2.3"><mtext id="A1.T9.4.4.4.m1.2.2.3.cmml" xref="A1.T9.4.4.4.m1.2.2.3">ave</mtext></ci><apply id="A1.T9.4.4.4.m1.2.2.1.1.1.1.cmml" xref="A1.T9.4.4.4.m1.2.2.1.1.1.2"><abs id="A1.T9.4.4.4.m1.2.2.1.1.1.1.1.cmml" xref="A1.T9.4.4.4.m1.2.2.1.1.1.2.1"></abs><ci id="A1.T9.4.4.4.m1.1.1.cmml" xref="A1.T9.4.4.4.m1.1.1">𝒬</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.4.4.4.m1.2c">\text{ave}(|{\mathcal{Q}}|)</annotation><annotation encoding="application/x-llamapun" id="A1.T9.4.4.4.m1.2d">ave ( | caligraphic_Q | )</annotation></semantics></math></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A1.T9.5.5.5"><math alttext="\text{ave}(|{\mathcal{A}}|)" class="ltx_Math" display="inline" id="A1.T9.5.5.5.m1.2"><semantics id="A1.T9.5.5.5.m1.2a"><mrow id="A1.T9.5.5.5.m1.2.2" xref="A1.T9.5.5.5.m1.2.2.cmml"><mtext id="A1.T9.5.5.5.m1.2.2.3" xref="A1.T9.5.5.5.m1.2.2.3a.cmml">ave</mtext><mo id="A1.T9.5.5.5.m1.2.2.2" xref="A1.T9.5.5.5.m1.2.2.2.cmml">⁢</mo><mrow id="A1.T9.5.5.5.m1.2.2.1.1" xref="A1.T9.5.5.5.m1.2.2.cmml"><mo id="A1.T9.5.5.5.m1.2.2.1.1.2" stretchy="false" xref="A1.T9.5.5.5.m1.2.2.cmml">(</mo><mrow id="A1.T9.5.5.5.m1.2.2.1.1.1.2" xref="A1.T9.5.5.5.m1.2.2.1.1.1.1.cmml"><mo id="A1.T9.5.5.5.m1.2.2.1.1.1.2.1" stretchy="false" xref="A1.T9.5.5.5.m1.2.2.1.1.1.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="A1.T9.5.5.5.m1.1.1" xref="A1.T9.5.5.5.m1.1.1.cmml">𝒜</mi><mo id="A1.T9.5.5.5.m1.2.2.1.1.1.2.2" stretchy="false" xref="A1.T9.5.5.5.m1.2.2.1.1.1.1.1.cmml">|</mo></mrow><mo id="A1.T9.5.5.5.m1.2.2.1.1.3" stretchy="false" xref="A1.T9.5.5.5.m1.2.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.T9.5.5.5.m1.2b"><apply id="A1.T9.5.5.5.m1.2.2.cmml" xref="A1.T9.5.5.5.m1.2.2"><times id="A1.T9.5.5.5.m1.2.2.2.cmml" xref="A1.T9.5.5.5.m1.2.2.2"></times><ci id="A1.T9.5.5.5.m1.2.2.3a.cmml" xref="A1.T9.5.5.5.m1.2.2.3"><mtext id="A1.T9.5.5.5.m1.2.2.3.cmml" xref="A1.T9.5.5.5.m1.2.2.3">ave</mtext></ci><apply id="A1.T9.5.5.5.m1.2.2.1.1.1.1.cmml" xref="A1.T9.5.5.5.m1.2.2.1.1.1.2"><abs id="A1.T9.5.5.5.m1.2.2.1.1.1.1.1.cmml" xref="A1.T9.5.5.5.m1.2.2.1.1.1.2.1"></abs><ci id="A1.T9.5.5.5.m1.1.1.cmml" xref="A1.T9.5.5.5.m1.1.1">𝒜</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.T9.5.5.5.m1.2c">\text{ave}(|{\mathcal{A}}|)</annotation><annotation encoding="application/x-llamapun" id="A1.T9.5.5.5.m1.2d">ave ( | caligraphic_A | )</annotation></semantics></math></td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.6">
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T9.5.6.1">Technology</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.5.6.2">240</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.5.6.3">306,073</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.5.6.4">44,549</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.5.6.5">144029.7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.5.6.6">14.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A1.T9.5.6.7">40.2</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.7">
<td class="ltx_td ltx_align_left" id="A1.T9.5.7.1">Biology</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.7.2">220</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.7.3">257,644</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.7.4">39,218</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.7.5">125284.9</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.7.6">16.8</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.7.7">49.1</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.8">
<td class="ltx_td ltx_align_left" id="A1.T9.5.8.1">Religion</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.8.2">220</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.8.3">1,071,342</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.8.4">34,257</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.8.5">131424.8</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.8.6">17.4</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.8.7">54.2</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.9">
<td class="ltx_td ltx_align_left" id="A1.T9.5.9.1">Fiction</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.9.2">220</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.9.3">564,980</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.9.4">44,057</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.9.5">137689.7</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.9.6">16.2</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.9.7">43.6</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.10">
<td class="ltx_td ltx_align_left" id="A1.T9.5.10.1">Psychology</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.10.2">200</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.10.3">571,725</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.10.4">37,988</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.10.5">150119.5</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.10.6">16.7</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.10.7">46.5</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.11">
<td class="ltx_td ltx_align_left" id="A1.T9.5.11.1">Music</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.11.2">200</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.11.3">381,043</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.11.4">51,517</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.11.5">168672.9</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.11.6">17.5</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.11.7">49.7</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.12">
<td class="ltx_td ltx_align_left" id="A1.T9.5.12.1">Art</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.12.2">200</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.12.3">305,001</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.12.4">32,793</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.12.5">128961.2</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.12.6">17.8</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.12.7">52.2</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.13">
<td class="ltx_td ltx_align_left" id="A1.T9.5.13.1">Philosophy</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.13.2">200</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.13.3">678,553</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.13.4">38,729</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.13.5">135682.7</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.13.6">17.2</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.13.7">51.0</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.14">
<td class="ltx_td ltx_align_left" id="A1.T9.5.14.1">Health</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.14.2">180</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.14.3">289,258</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.14.4">50,600</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.14.5">135902.0</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.14.6">16.2</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.14.7">48.2</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.15">
<td class="ltx_td ltx_align_left" id="A1.T9.5.15.1">History</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.15.2">180</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.15.3">688,074</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.15.4">53,277</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.15.5">195265.0</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.15.6">17.9</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.15.7">51.0</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.16">
<td class="ltx_td ltx_align_left" id="A1.T9.5.16.1">Literature</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.16.2">180</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.16.3">534,836</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.16.4">33,043</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.16.5">129363.7</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.16.6">16.9</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.16.7">47.0</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.17">
<td class="ltx_td ltx_align_left" id="A1.T9.5.17.1">Biography</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.17.2">180</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.17.3">408,969</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.17.4">45,052</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.17.5">163522.3</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.17.6">18.0</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.17.7">52.0</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.18">
<td class="ltx_td ltx_align_left" id="A1.T9.5.18.1">Politics</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.18.2">180</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.18.3">387,157</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.18.4">49,853</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.18.5">139624.3</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.18.6">17.9</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.18.7">54.9</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.19">
<td class="ltx_td ltx_align_left" id="A1.T9.5.19.1">Mathematics</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.19.2">160</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.19.3">726,144</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.19.4">60,936</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.19.5">197924.6</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.19.6">16.7</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.19.7">47.6</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.20">
<td class="ltx_td ltx_align_left" id="A1.T9.5.20.1">Physics</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.20.2">160</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.20.3">226,811</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.20.4">36,717</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.20.5">105805.6</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.20.6">14.8</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.20.7">54.2</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.21">
<td class="ltx_td ltx_align_left" id="A1.T9.5.21.1">Cooking</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.21.2">120</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.21.3">466,885</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.21.4">58,360</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.21.5">156139.2</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.21.6">16.5</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.21.7">46.6</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.22">
<td class="ltx_td ltx_align_left" id="A1.T9.5.22.1">Agriculture</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.22.2">100</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.22.3">385,915</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.22.4">76,581</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.22.5">150969.6</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.22.6">15.6</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.22.7">45.9</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.23">
<td class="ltx_td ltx_align_left" id="A1.T9.5.23.1">Computer</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.23.2">100</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.23.3">437,070</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.23.4">51,704</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.23.5">215929.5</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.23.6">14.3</td>
<td class="ltx_td ltx_align_center" id="A1.T9.5.23.7">39.8</td>
</tr>
<tr class="ltx_tr" id="A1.T9.5.24">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="A1.T9.5.24.1">Total</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A1.T9.5.24.2">3,240</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A1.T9.5.24.3">1,071,342</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A1.T9.5.24.4">32,793</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A1.T9.5.24.5">150684.0</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A1.T9.5.24.6">16.6</td>
<td class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="A1.T9.5.24.7">48.5</td>
</tr>
</table>
</figure>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Tue Sep 10 02:00:18 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
