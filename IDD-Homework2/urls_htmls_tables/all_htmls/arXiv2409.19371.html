<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms</title>
<!--Generated on Sat Sep 28 14:45:59 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2409.19371v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S1" title="In Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S1.SS1" title="In 1 Introduction ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1.1 </span>Related work</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S1.SS2" title="In 1 Introduction ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1.2 </span>Contributions of this paper</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2" title="In Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Methods</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.SS1" title="In 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Overall description of the proposed EDM-Lx model</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.SS2" title="In 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span><math alttext="\Gamma" class="ltx_Math" display="inline"><semantics><mi mathvariant="normal">Γ</mi><annotation-xml encoding="MathML-Content"><ci>Γ</ci></annotation-xml><annotation encoding="application/x-tex">\Gamma</annotation><annotation encoding="application/x-llamapun">roman_Γ</annotation></semantics></math>-VAE: rationale</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.SS3" title="In 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span><math alttext="\Gamma" class="ltx_Math" display="inline"><semantics><mi mathvariant="normal">Γ</mi><annotation-xml encoding="MathML-Content"><ci>Γ</ci></annotation-xml><annotation encoding="application/x-tex">\Gamma</annotation><annotation encoding="application/x-llamapun">roman_Γ</annotation></semantics></math>-VAE: calculation of the KL-divergence</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.SS4" title="In 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.4 </span>Diffusion model: rationale</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.SS5" title="In 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.5 </span>Diffusion model: semantic conditioning</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3" title="In Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Materials and experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS1" title="In 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Collection and preparation of real data</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS2" title="In 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Architectural details for the generative models</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS2.SSS1" title="In 3.2 Architectural details for the generative models ‣ 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2.1 </span>Diffusion models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS2.SSS2" title="In 3.2 Architectural details for the generative models ‣ 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2.2 </span>Variational Autoencoders</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS3" title="In 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Downstream tasks for data evaluation</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS3.SSS1" title="In 3.3 Downstream tasks for data evaluation ‣ 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.1 </span>Segmentation Model</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS3.SSS2" title="In 3.3 Downstream tasks for data evaluation ‣ 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3.2 </span>Classification Model</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS4" title="In 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.4 </span>Experiments</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.SS5" title="In 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.5 </span>Further implementation details and code availability</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4" title="In Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Results</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.SS1" title="In 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Qualitative Results: Realism</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.SS2" title="In 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Quantitative Results: Downstream Tasks</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.SS2.SSS1" title="In 4.2 Quantitative Results: Downstream Tasks ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2.1 </span>Performance on real data of the synthetic-trained segmenter</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.SS2.SSS2" title="In 4.2 Quantitative Results: Downstream Tasks ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2.2 </span>Performance on real data of the synthetic-trained classifier</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.SS3" title="In 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Quantitative Results: Computational Efficiency</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S5" title="In Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Discussion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S6" title="In Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
David Stojanovski
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Mariana da Silva
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Pablo Lamata
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Arian Beqiri
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Alberto Gomez
</span><span class="ltx_author_notes">
Manuscript received X; accepted X . Date of publication X; date of current version X.
This work was supported by the Wellcome/EPSRC Centre for Medical Engineering [WT203148/Z/16/Z] and the National Institute for Health Research (NIHR) Biomedical Research Centre at Guy’s and St Thomas’ NHS Foundation Trust and King’s College London. The views expressed are those of the author(s) and not necessarily those of the NHS, the NIHR or the Department of Health. David Stojanovski and Pablo Lamata are with King’s College London, London, WC2R 2LS, United Kingdom (e-mail: first.last@kcl.ac.uk).Arian Beqiri and Alberto Gomez are affiliated with King’s College London, and Ultromics Ltd., 4630 Kingsgate, Oxford Business Park South, OX4 2SU, United Kingdom (e-mail: first.last@ultromics.com).</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id1.1">We investigate the utility of diffusion generative models to efficiently synthesise datasets that effectively train deep learning models for image analysis. Specifically, we propose novel <math alttext="\Gamma" class="ltx_Math" display="inline" id="id1.1.m1.1"><semantics id="id1.1.m1.1a"><mi id="id1.1.m1.1.1" mathvariant="normal" xref="id1.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="id1.1.m1.1b"><ci id="id1.1.m1.1.1.cmml" xref="id1.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="id1.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="id1.1.m1.1d">roman_Γ</annotation></semantics></math>-distribution Latent Denoising Diffusion Models (LDMs) designed to generate semantically guided synthetic cardiac ultrasound images with improved computational efficiency. We also investigate the potential of using these synthetic images as a replacement for real data in training deep networks for left-ventricular segmentation and binary echocardiogram view classification tasks.</p>
<p class="ltx_p" id="id2.id1">We compared six diffusion models in terms of the computational cost of generating synthetic 2D echo data, the visual realism of the resulting images, and the performance, on real data, of downstream tasks (segmentation and classification) trained using these synthetic echoes. We compare various diffusion strategies and ODE solvers for their impact on segmentation and classification performance. The results show that our proposed architectures significantly reduce computational costs while maintaining or improving downstream task performance compared to state-of-the-art methods. While other diffusion models generated more realistic-looking echo images at higher computational cost, our research suggests that for model training, visual realism is not necessarily related to model performance, and considerable compute costs can be saved by using more efficient models.</p>
</div>
<div class="ltx_para" id="p1">
<span class="ltx_ERROR undefined" id="p1.1">{IEEEkeywords}</span>
<p class="ltx_p" id="p1.2">Latent Diffusion Models, Image Synthesis, Ultrasound, Segmentation, Classification</p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<span class="ltx_ERROR undefined" id="S1.p1.1">\IEEEPARstart</span>
<p class="ltx_p" id="S1.p1.2">Echocardiography (echo) is the most widely used cardiac imaging modality in both clinical and research settings<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib1" title="">1</a>]</cite>, providing real-time information on cardiac structure and function <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib2" title="">2</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Echo acquisition and interpretation is, however, a challenging process that requires extensive expertise and hand-eye coordination to navigate the transducer across the patient’s anatomy. This makes resulting images particularly equipment-, patient-, and operator-dependent in terms of view and image quality<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib3" title="">3</a>]</cite>. This often results in clinically suboptimal images that limit subsequent use <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib4" title="">4</a>]</cite>, and are liable to high inter- and intra-observer variability in image interpretation, further complicating the extraction of consistent and reliable diagnostic features. These challenges motivate the need for automation and computer-assisted echo image acquisition and analysis.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Deep learning (DL) has shown strong capabilities for automating medical image analysis in various tasks such as classification<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib5" title="">5</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib7" title="">7</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib8" title="">8</a>]</cite>, regression <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib9" title="">9</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib10" title="">10</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib11" title="">11</a>]</cite>, and segmentation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib12" title="">12</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib13" title="">13</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib14" title="">14</a>]</cite>. However, they require large, often labelled, datasets. Major challenges in using DL with medical imaging are the availability, access, and privacy preservation of those datasets. This paper investigates the efficient generation of synthetic data as an alternative to real data for training DL models.</p>
</div>
<section class="ltx_subsection" id="S1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">1.1 </span>Related work</h3>
<div class="ltx_para" id="S1.SS1.p1">
<p class="ltx_p" id="S1.SS1.p1.1">Advances in generative artificial intelligence have proven the possibility of synthesising new, realistic data. This capability has the potential to improve the robustness and generalisability of medical imaging models <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib15" title="">15</a>]</cite>. By generating diverse synthetic images that include rare cases <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib16" title="">16</a>]</cite> or variations in image quality <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib17" title="">17</a>]</cite>, synthetic data can reduce overfitting. While models trained on real data with limited variability often underperform across different patient populations or imaging conditions <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib18" title="">18</a>]</cite>, generative models can improve data augmentation strategies (producing more diverse data and reducing the risk of bias) or assist in domain adaptation, helping models trained in data from different hospital equipment <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib19" title="">19</a>]</cite> or imaging modalities<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib20" title="">20</a>]</cite> perform well elsewhere.</p>
</div>
<div class="ltx_para" id="S1.SS1.p2">
<p class="ltx_p" id="S1.SS1.p2.1">Generative Adversarial Networks (GANs) and CycleGANs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib21" title="">21</a>]</cite> have until recently been state-of-the-art (SOTA) methods for synthetic image generation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib22" title="">22</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib23" title="">23</a>]</cite>. However, these methods suffer from training instability, vanishing gradients, and mode collapse, limiting their practical utility <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib24" title="">24</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S1.SS1.p3">
<p class="ltx_p" id="S1.SS1.p3.1">Denoising Diffusion Probabilistic Models (DDPMs) have emerged as a promising alternative, overcoming challenges such as training instability and offering more control over generated outputs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib25" title="">25</a>]</cite>. DDPMs still face limitations; primarily, training and generating datasets using DDPMs has a prohibitive computational expense compared to GANs for many applications and users <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib26" title="">26</a>]</cite>. Recent research has focused on mitigating these costs, for instance by generating images with fewer diffusion steps by more advanced Ordinary Differential Equation (ODE) solvers <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib27" title="">27</a>]</cite>, architectural innovations to improve convergence rates <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib28" title="">28</a>]</cite>, and knowledge distillation methods to compress large diffusion models into more compact and efficient versions <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib29" title="">29</a>]</cite>. The most popular efficiency strategy for SOTA models is to train a Latent Diffusion Model (LDM) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib30" title="">30</a>]</cite>. LDMs follow a two-stage process in which a Variational Auto-Encoder (VAE) is first trained to map high-dimensional image data into a lower-dimensional, Gaussian-distributed latent space. When the VAE has been trained, it then encodes full-resolution images into a low-resolution latent space on which the diffusion model can be trained. Finally, during inference, the diffusion model denoises an image in the latent space resolution, followed by decoding from the pre-trained VAE model to the full-resolution.</p>
</div>
<div class="ltx_para" id="S1.SS1.p4">
<p class="ltx_p" id="S1.SS1.p4.1">All of the methods previously discussed have been strictly concerned with maximising image realism, while the utility of synthetic images for AI model development depends on downstream task performance with models trained on the generated images. There is no evidence that realism and utility for training are directly related, and indeed multiple works show that it may not be the case. For example, domain randomisation (a field that seeks to actively generate unrealistic samples <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib31" title="">31</a>]</cite>) is predicated on growing evidence that data augmentation beyond realism can enhance model generalisation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib32" title="">32</a>]</cite> by effectively creating a training set of synthetic images that act as a superset of real images, and in turn, improve performance in downstream tasks <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib33" title="">33</a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib34" title="">34</a>]</cite>. In this context, we investigate the utility of synthetically generated images by the performance of models trained on them and tested on real data.</p>
</div>
<div class="ltx_para" id="S1.SS1.p5">
<p class="ltx_p" id="S1.SS1.p5.5">Our research <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib35" title="">35</a>]</cite> has demonstrated the effectiveness of DDPMs for the synthesis of semantically guided cardiac ultrasound images. We proposed using a Semantic Diffusion Model (SDM) network, based on the standard DDPM network proposed in <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib25" title="">25</a>]</cite>, in conjunction with Spatially Adaptive De-normalisation (SPADE) normalisation blocks in the decoder section of the network for generating cardiac echoes. Using this formulation, synthetic cardiac ultrasound images were generated that were more realistic in appearance than GAN-based methods, while also following the guiding semantic map more closely. However, this method was associated with prohibitively high computational costs compared to GANs and prevented its practical use. The number of steps, <math alttext="T" class="ltx_Math" display="inline" id="S1.SS1.p5.1.m1.1"><semantics id="S1.SS1.p5.1.m1.1a"><mi id="S1.SS1.p5.1.m1.1.1" xref="S1.SS1.p5.1.m1.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S1.SS1.p5.1.m1.1b"><ci id="S1.SS1.p5.1.m1.1.1.cmml" xref="S1.SS1.p5.1.m1.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.SS1.p5.1.m1.1c">T</annotation><annotation encoding="application/x-llamapun" id="S1.SS1.p5.1.m1.1d">italic_T</annotation></semantics></math> in the forward process is a crucial hyperparameter in DDPMs. A large <math alttext="T" class="ltx_Math" display="inline" id="S1.SS1.p5.2.m2.1"><semantics id="S1.SS1.p5.2.m2.1a"><mi id="S1.SS1.p5.2.m2.1.1" xref="S1.SS1.p5.2.m2.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S1.SS1.p5.2.m2.1b"><ci id="S1.SS1.p5.2.m2.1.1.cmml" xref="S1.SS1.p5.2.m2.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.SS1.p5.2.m2.1c">T</annotation><annotation encoding="application/x-llamapun" id="S1.SS1.p5.2.m2.1d">italic_T</annotation></semantics></math> value ensures that the reverse process closely approximates a Gaussian distribution, making the generative process using Gaussian conditional distributions a good approximation. This rationale supports the use of large <math alttext="T" class="ltx_Math" display="inline" id="S1.SS1.p5.3.m3.1"><semantics id="S1.SS1.p5.3.m3.1a"><mi id="S1.SS1.p5.3.m3.1.1" xref="S1.SS1.p5.3.m3.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S1.SS1.p5.3.m3.1b"><ci id="S1.SS1.p5.3.m3.1.1.cmml" xref="S1.SS1.p5.3.m3.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.SS1.p5.3.m3.1c">T</annotation><annotation encoding="application/x-llamapun" id="S1.SS1.p5.3.m3.1d">italic_T</annotation></semantics></math> values, e.g., 1000, as employed by <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib25" title="">25</a>]</cite>. However, since each of the <math alttext="T" class="ltx_Math" display="inline" id="S1.SS1.p5.4.m4.1"><semantics id="S1.SS1.p5.4.m4.1a"><mi id="S1.SS1.p5.4.m4.1.1" xref="S1.SS1.p5.4.m4.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S1.SS1.p5.4.m4.1b"><ci id="S1.SS1.p5.4.m4.1.1.cmml" xref="S1.SS1.p5.4.m4.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.SS1.p5.4.m4.1c">T</annotation><annotation encoding="application/x-llamapun" id="S1.SS1.p5.4.m4.1d">italic_T</annotation></semantics></math> iterations must be executed sequentially to generate a sample, <math alttext="x_{0}" class="ltx_Math" display="inline" id="S1.SS1.p5.5.m5.1"><semantics id="S1.SS1.p5.5.m5.1a"><msub id="S1.SS1.p5.5.m5.1.1" xref="S1.SS1.p5.5.m5.1.1.cmml"><mi id="S1.SS1.p5.5.m5.1.1.2" xref="S1.SS1.p5.5.m5.1.1.2.cmml">x</mi><mn id="S1.SS1.p5.5.m5.1.1.3" xref="S1.SS1.p5.5.m5.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S1.SS1.p5.5.m5.1b"><apply id="S1.SS1.p5.5.m5.1.1.cmml" xref="S1.SS1.p5.5.m5.1.1"><csymbol cd="ambiguous" id="S1.SS1.p5.5.m5.1.1.1.cmml" xref="S1.SS1.p5.5.m5.1.1">subscript</csymbol><ci id="S1.SS1.p5.5.m5.1.1.2.cmml" xref="S1.SS1.p5.5.m5.1.1.2">𝑥</ci><cn id="S1.SS1.p5.5.m5.1.1.3.cmml" type="integer" xref="S1.SS1.p5.5.m5.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.SS1.p5.5.m5.1c">x_{0}</annotation><annotation encoding="application/x-llamapun" id="S1.SS1.p5.5.m5.1d">italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>, sampling from DDPMs is significantly slower compared to other deep generative models. Another issue with using the SPADE blocks in conjunction with LDMs is that there needs to be a clear spatial consistency between the image and associated semantic map, which in the case of Gaussian-distributed VAEs is not necessarily the case.</p>
</div>
</section>
<section class="ltx_subsection" id="S1.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">1.2 </span>Contributions of this paper</h3>
<div class="ltx_para" id="S1.SS2.p1">
<p class="ltx_p" id="S1.SS2.p1.1">In this paper we investigate alternative architectures and solvers to our previously proposed SDM model <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib35" title="">35</a>]</cite> that can generate useful images (with respect to training a model for image classification and segmentation) while substantially reducing the computational costs of image generation. In summary, our contributions are:</p>
</div>
<div class="ltx_para" id="S1.SS2.p2">
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">Comprehensive comparison of multiple diffusion strategies with SPADE-based semantically guided image synthesis, and the performance of segmentation and classification tasks on real echo images when trained with the synthetically generated data. Included in this, recognising the critical role of ODE solvers in diffusion-based generative models, we integrate and test several ODE solvers to determine their impact on model performance (in both segmentation and classification tasks) and computational efficiency. This assessment aids in identifying optimal solver configurations that balance accuracy and resource utilisation.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.4">A new <math alttext="\Gamma" class="ltx_Math" display="inline" id="S1.I1.i2.p1.1.m1.1"><semantics id="S1.I1.i2.p1.1.m1.1a"><mi id="S1.I1.i2.p1.1.m1.1.1" mathvariant="normal" xref="S1.I1.i2.p1.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S1.I1.i2.p1.1.m1.1b"><ci id="S1.I1.i2.p1.1.m1.1.1.cmml" xref="S1.I1.i2.p1.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i2.p1.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S1.I1.i2.p1.1.m1.1d">roman_Γ</annotation></semantics></math> Variational Autoencoder (<math alttext="\Gamma" class="ltx_Math" display="inline" id="S1.I1.i2.p1.2.m2.1"><semantics id="S1.I1.i2.p1.2.m2.1a"><mi id="S1.I1.i2.p1.2.m2.1.1" mathvariant="normal" xref="S1.I1.i2.p1.2.m2.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S1.I1.i2.p1.2.m2.1b"><ci id="S1.I1.i2.p1.2.m2.1.1.cmml" xref="S1.I1.i2.p1.2.m2.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i2.p1.2.m2.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S1.I1.i2.p1.2.m2.1d">roman_Γ</annotation></semantics></math>-VAE) tailored for latent diffusion models for echo: a <math alttext="\Gamma" class="ltx_Math" display="inline" id="S1.I1.i2.p1.3.m3.1"><semantics id="S1.I1.i2.p1.3.m3.1a"><mi id="S1.I1.i2.p1.3.m3.1.1" mathvariant="normal" xref="S1.I1.i2.p1.3.m3.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S1.I1.i2.p1.3.m3.1b"><ci id="S1.I1.i2.p1.3.m3.1.1.cmml" xref="S1.I1.i2.p1.3.m3.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i2.p1.3.m3.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S1.I1.i2.p1.3.m3.1d">roman_Γ</annotation></semantics></math> distribution ensures a minimum value of 0, preserving the semantics of the “background” (pixels outside the ultrasound sector) and leading to improved latent representation learning and semantic-guided image generation fidelity. The <math alttext="\Gamma" class="ltx_Math" display="inline" id="S1.I1.i2.p1.4.m4.1"><semantics id="S1.I1.i2.p1.4.m4.1a"><mi id="S1.I1.i2.p1.4.m4.1.1" mathvariant="normal" xref="S1.I1.i2.p1.4.m4.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S1.I1.i2.p1.4.m4.1b"><ci id="S1.I1.i2.p1.4.m4.1.1.cmml" xref="S1.I1.i2.p1.4.m4.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i2.p1.4.m4.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S1.I1.i2.p1.4.m4.1d">roman_Γ</annotation></semantics></math> distribution follows the data distribution in the images inside the ultrasound sector more closely.</p>
</div>
</li>
</ul>
</div>
</section>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Methods</h2>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.1">To assess the utility of the synthetically generated images for training DL models, we generate 24 synthetic datasets with six different generative models respectively. Of these six, two are our novel EDM-Lx methods (described below), which are compared to three baseline methods, namely the Elucidating Diffusion Model (EDM) from <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib36" title="">36</a>]</cite>, Variance Exploding (VE), and Variance Preserving (VP) from <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib27" title="">27</a>]</cite>) and to the current SOTA, our previously proposed Semantic Diffusion Model (SDM) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib35" title="">35</a>]</cite>.</p>
</div>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Overall description of the proposed EDM-Lx model</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">The proposed model is an extension of the EDM model developed by <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib29" title="">29</a>]</cite>, where we utilise principles from Latent Diffusion Models (LDMs) and semantically-guided DMs together. We name the model EDM-Lx, where x is the size of the latent space. Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.F1" title="Figure 1 ‣ 2.1 Overall description of the proposed EDM-Lx model ‣ 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">1</span></a> shows a diagram with the proposed architecture.</p>
</div>
<figure class="ltx_figure" id="S2.F1">
<p class="ltx_p ltx_align_center ltx_align_center" id="S2.F1.1"><span class="ltx_text" id="S2.F1.1.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="237" id="S2.F1.1.1.g1" src="x1.png" width="598"/></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Architecture diagram of the proposed method. Purple parallelogram: <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.F1.3.m1.1"><semantics id="S2.F1.3.m1.1b"><mi id="S2.F1.3.m1.1.1" mathvariant="normal" xref="S2.F1.3.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.F1.3.m1.1c"><ci id="S2.F1.3.m1.1.1.cmml" xref="S2.F1.3.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.F1.3.m1.1d">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.F1.3.m1.1e">roman_Γ</annotation></semantics></math>-VAE; green box: diffusion network; red box: SPADE module for semantic conditioning.</figcaption>
</figure>
<div class="ltx_para" id="S2.SS1.p2">
<p class="ltx_p" id="S2.SS1.p2.4">The model consists of a new <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS1.p2.1.m1.1"><semantics id="S2.SS1.p2.1.m1.1a"><mi id="S2.SS1.p2.1.m1.1.1" mathvariant="normal" xref="S2.SS1.p2.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.1.m1.1b"><ci id="S2.SS1.p2.1.m1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.1.m1.1d">roman_Γ</annotation></semantics></math>-VAE and a latent diffusion bottleneck. We first pre-train the <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS1.p2.2.m2.1"><semantics id="S2.SS1.p2.2.m2.1a"><mi id="S2.SS1.p2.2.m2.1.1" mathvariant="normal" xref="S2.SS1.p2.2.m2.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.2.m2.1b"><ci id="S2.SS1.p2.2.m2.1.1.cmml" xref="S2.SS1.p2.2.m2.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.2.m2.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.2.m2.1d">roman_Γ</annotation></semantics></math>-VAE for echo image reconstruction and then use the pre-trained <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS1.p2.3.m3.1"><semantics id="S2.SS1.p2.3.m3.1a"><mi id="S2.SS1.p2.3.m3.1.1" mathvariant="normal" xref="S2.SS1.p2.3.m3.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.3.m3.1b"><ci id="S2.SS1.p2.3.m3.1.1.cmml" xref="S2.SS1.p2.3.m3.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.3.m3.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.3.m3.1d">roman_Γ</annotation></semantics></math>-VAE to compress the input image to a smaller resolution for the training of the diffusion model. During image generation, the pre-trained <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS1.p2.4.m4.1"><semantics id="S2.SS1.p2.4.m4.1a"><mi id="S2.SS1.p2.4.m4.1.1" mathvariant="normal" xref="S2.SS1.p2.4.m4.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.4.m4.1b"><ci id="S2.SS1.p2.4.m4.1.1.cmml" xref="S2.SS1.p2.4.m4.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.4.m4.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.4.m4.1d">roman_Γ</annotation></semantics></math>-VAE decoder is used to upscale the output from the diffusion model. Each component is described in turn.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span><math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS2.1.m1.1"><semantics id="S2.SS2.1.m1.1b"><mi id="S2.SS2.1.m1.1.1" mathvariant="normal" xref="S2.SS2.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.1.m1.1c"><ci id="S2.SS2.1.m1.1.1.cmml" xref="S2.SS2.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.1.m1.1d">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.1.m1.1e">roman_Γ</annotation></semantics></math>-VAE: rationale</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.11">VAEs are a class of generative models that combine the principles of variational inference and neural networks to learn compact latent representations of data distributions. For the set of all latent variables and parameters, <math alttext="\boldsymbol{Z}" class="ltx_Math" display="inline" id="S2.SS2.p1.1.m1.1"><semantics id="S2.SS2.p1.1.m1.1a"><mi id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml">𝒁</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b"><ci id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">𝒁</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">\boldsymbol{Z}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.1.m1.1d">bold_italic_Z</annotation></semantics></math>, and the set of all observed variables, <math alttext="\boldsymbol{X}" class="ltx_Math" display="inline" id="S2.SS2.p1.2.m2.1"><semantics id="S2.SS2.p1.2.m2.1a"><mi id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml">𝑿</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.1b"><ci id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">𝑿</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.1c">\boldsymbol{X}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.2.m2.1d">bold_italic_X</annotation></semantics></math>, a probabilistic model specifies a joint distribution, <math alttext="p(\boldsymbol{X},\boldsymbol{Z})" class="ltx_Math" display="inline" id="S2.SS2.p1.3.m3.2"><semantics id="S2.SS2.p1.3.m3.2a"><mrow id="S2.SS2.p1.3.m3.2.3" xref="S2.SS2.p1.3.m3.2.3.cmml"><mi id="S2.SS2.p1.3.m3.2.3.2" xref="S2.SS2.p1.3.m3.2.3.2.cmml">p</mi><mo id="S2.SS2.p1.3.m3.2.3.1" xref="S2.SS2.p1.3.m3.2.3.1.cmml">⁢</mo><mrow id="S2.SS2.p1.3.m3.2.3.3.2" xref="S2.SS2.p1.3.m3.2.3.3.1.cmml"><mo id="S2.SS2.p1.3.m3.2.3.3.2.1" stretchy="false" xref="S2.SS2.p1.3.m3.2.3.3.1.cmml">(</mo><mi id="S2.SS2.p1.3.m3.1.1" xref="S2.SS2.p1.3.m3.1.1.cmml">𝑿</mi><mo id="S2.SS2.p1.3.m3.2.3.3.2.2" xref="S2.SS2.p1.3.m3.2.3.3.1.cmml">,</mo><mi id="S2.SS2.p1.3.m3.2.2" xref="S2.SS2.p1.3.m3.2.2.cmml">𝒁</mi><mo id="S2.SS2.p1.3.m3.2.3.3.2.3" stretchy="false" xref="S2.SS2.p1.3.m3.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.3.m3.2b"><apply id="S2.SS2.p1.3.m3.2.3.cmml" xref="S2.SS2.p1.3.m3.2.3"><times id="S2.SS2.p1.3.m3.2.3.1.cmml" xref="S2.SS2.p1.3.m3.2.3.1"></times><ci id="S2.SS2.p1.3.m3.2.3.2.cmml" xref="S2.SS2.p1.3.m3.2.3.2">𝑝</ci><interval closure="open" id="S2.SS2.p1.3.m3.2.3.3.1.cmml" xref="S2.SS2.p1.3.m3.2.3.3.2"><ci id="S2.SS2.p1.3.m3.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1">𝑿</ci><ci id="S2.SS2.p1.3.m3.2.2.cmml" xref="S2.SS2.p1.3.m3.2.2">𝒁</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.3.m3.2c">p(\boldsymbol{X},\boldsymbol{Z})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.3.m3.2d">italic_p ( bold_italic_X , bold_italic_Z )</annotation></semantics></math>. The aim is then to find a suitable approximation for the posterior distribution, <math alttext="p(\boldsymbol{Z}|\boldsymbol{X})" class="ltx_Math" display="inline" id="S2.SS2.p1.4.m4.1"><semantics id="S2.SS2.p1.4.m4.1a"><mrow id="S2.SS2.p1.4.m4.1.1" xref="S2.SS2.p1.4.m4.1.1.cmml"><mi id="S2.SS2.p1.4.m4.1.1.3" xref="S2.SS2.p1.4.m4.1.1.3.cmml">p</mi><mo id="S2.SS2.p1.4.m4.1.1.2" xref="S2.SS2.p1.4.m4.1.1.2.cmml">⁢</mo><mrow id="S2.SS2.p1.4.m4.1.1.1.1" xref="S2.SS2.p1.4.m4.1.1.1.1.1.cmml"><mo id="S2.SS2.p1.4.m4.1.1.1.1.2" stretchy="false" xref="S2.SS2.p1.4.m4.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p1.4.m4.1.1.1.1.1" xref="S2.SS2.p1.4.m4.1.1.1.1.1.cmml"><mi id="S2.SS2.p1.4.m4.1.1.1.1.1.2" xref="S2.SS2.p1.4.m4.1.1.1.1.1.2.cmml">𝒁</mi><mo fence="false" id="S2.SS2.p1.4.m4.1.1.1.1.1.1" xref="S2.SS2.p1.4.m4.1.1.1.1.1.1.cmml">|</mo><mi id="S2.SS2.p1.4.m4.1.1.1.1.1.3" xref="S2.SS2.p1.4.m4.1.1.1.1.1.3.cmml">𝑿</mi></mrow><mo id="S2.SS2.p1.4.m4.1.1.1.1.3" stretchy="false" xref="S2.SS2.p1.4.m4.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.4.m4.1b"><apply id="S2.SS2.p1.4.m4.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1"><times id="S2.SS2.p1.4.m4.1.1.2.cmml" xref="S2.SS2.p1.4.m4.1.1.2"></times><ci id="S2.SS2.p1.4.m4.1.1.3.cmml" xref="S2.SS2.p1.4.m4.1.1.3">𝑝</ci><apply id="S2.SS2.p1.4.m4.1.1.1.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1.1.1"><csymbol cd="latexml" id="S2.SS2.p1.4.m4.1.1.1.1.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1.1.1.1.1">conditional</csymbol><ci id="S2.SS2.p1.4.m4.1.1.1.1.1.2.cmml" xref="S2.SS2.p1.4.m4.1.1.1.1.1.2">𝒁</ci><ci id="S2.SS2.p1.4.m4.1.1.1.1.1.3.cmml" xref="S2.SS2.p1.4.m4.1.1.1.1.1.3">𝑿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.4.m4.1c">p(\boldsymbol{Z}|\boldsymbol{X})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.4.m4.1d">italic_p ( bold_italic_Z | bold_italic_X )</annotation></semantics></math>. The log marginal probability can be decomposed into a summation of the evidence lower bound (ELBO), <math alttext="\mathcal{L}(q)" class="ltx_Math" display="inline" id="S2.SS2.p1.5.m5.1"><semantics id="S2.SS2.p1.5.m5.1a"><mrow id="S2.SS2.p1.5.m5.1.2" xref="S2.SS2.p1.5.m5.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.5.m5.1.2.2" xref="S2.SS2.p1.5.m5.1.2.2.cmml">ℒ</mi><mo id="S2.SS2.p1.5.m5.1.2.1" xref="S2.SS2.p1.5.m5.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.p1.5.m5.1.2.3.2" xref="S2.SS2.p1.5.m5.1.2.cmml"><mo id="S2.SS2.p1.5.m5.1.2.3.2.1" stretchy="false" xref="S2.SS2.p1.5.m5.1.2.cmml">(</mo><mi id="S2.SS2.p1.5.m5.1.1" xref="S2.SS2.p1.5.m5.1.1.cmml">q</mi><mo id="S2.SS2.p1.5.m5.1.2.3.2.2" stretchy="false" xref="S2.SS2.p1.5.m5.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.5.m5.1b"><apply id="S2.SS2.p1.5.m5.1.2.cmml" xref="S2.SS2.p1.5.m5.1.2"><times id="S2.SS2.p1.5.m5.1.2.1.cmml" xref="S2.SS2.p1.5.m5.1.2.1"></times><ci id="S2.SS2.p1.5.m5.1.2.2.cmml" xref="S2.SS2.p1.5.m5.1.2.2">ℒ</ci><ci id="S2.SS2.p1.5.m5.1.1.cmml" xref="S2.SS2.p1.5.m5.1.1">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.5.m5.1c">\mathcal{L}(q)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.5.m5.1d">caligraphic_L ( italic_q )</annotation></semantics></math>, and Kullback-Leibler divergence, <math alttext="D_{\text{KL}}" class="ltx_Math" display="inline" id="S2.SS2.p1.6.m6.1"><semantics id="S2.SS2.p1.6.m6.1a"><msub id="S2.SS2.p1.6.m6.1.1" xref="S2.SS2.p1.6.m6.1.1.cmml"><mi id="S2.SS2.p1.6.m6.1.1.2" xref="S2.SS2.p1.6.m6.1.1.2.cmml">D</mi><mtext id="S2.SS2.p1.6.m6.1.1.3" xref="S2.SS2.p1.6.m6.1.1.3a.cmml">KL</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.6.m6.1b"><apply id="S2.SS2.p1.6.m6.1.1.cmml" xref="S2.SS2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.6.m6.1.1.1.cmml" xref="S2.SS2.p1.6.m6.1.1">subscript</csymbol><ci id="S2.SS2.p1.6.m6.1.1.2.cmml" xref="S2.SS2.p1.6.m6.1.1.2">𝐷</ci><ci id="S2.SS2.p1.6.m6.1.1.3a.cmml" xref="S2.SS2.p1.6.m6.1.1.3"><mtext id="S2.SS2.p1.6.m6.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p1.6.m6.1.1.3">KL</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.6.m6.1c">D_{\text{KL}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.6.m6.1d">italic_D start_POSTSUBSCRIPT KL end_POSTSUBSCRIPT</annotation></semantics></math>, as shown in (<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.E1" title="In 2.2 Γ-VAE: rationale ‣ 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">1</span></a>). The evidence lower bound can be regarded as the lower bound of the log-likelihood for observed data. The direct calculation of <math alttext="p(\boldsymbol{Z}|\boldsymbol{X})" class="ltx_Math" display="inline" id="S2.SS2.p1.7.m7.1"><semantics id="S2.SS2.p1.7.m7.1a"><mrow id="S2.SS2.p1.7.m7.1.1" xref="S2.SS2.p1.7.m7.1.1.cmml"><mi id="S2.SS2.p1.7.m7.1.1.3" xref="S2.SS2.p1.7.m7.1.1.3.cmml">p</mi><mo id="S2.SS2.p1.7.m7.1.1.2" xref="S2.SS2.p1.7.m7.1.1.2.cmml">⁢</mo><mrow id="S2.SS2.p1.7.m7.1.1.1.1" xref="S2.SS2.p1.7.m7.1.1.1.1.1.cmml"><mo id="S2.SS2.p1.7.m7.1.1.1.1.2" stretchy="false" xref="S2.SS2.p1.7.m7.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p1.7.m7.1.1.1.1.1" xref="S2.SS2.p1.7.m7.1.1.1.1.1.cmml"><mi id="S2.SS2.p1.7.m7.1.1.1.1.1.2" xref="S2.SS2.p1.7.m7.1.1.1.1.1.2.cmml">𝒁</mi><mo fence="false" id="S2.SS2.p1.7.m7.1.1.1.1.1.1" xref="S2.SS2.p1.7.m7.1.1.1.1.1.1.cmml">|</mo><mi id="S2.SS2.p1.7.m7.1.1.1.1.1.3" xref="S2.SS2.p1.7.m7.1.1.1.1.1.3.cmml">𝑿</mi></mrow><mo id="S2.SS2.p1.7.m7.1.1.1.1.3" stretchy="false" xref="S2.SS2.p1.7.m7.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.7.m7.1b"><apply id="S2.SS2.p1.7.m7.1.1.cmml" xref="S2.SS2.p1.7.m7.1.1"><times id="S2.SS2.p1.7.m7.1.1.2.cmml" xref="S2.SS2.p1.7.m7.1.1.2"></times><ci id="S2.SS2.p1.7.m7.1.1.3.cmml" xref="S2.SS2.p1.7.m7.1.1.3">𝑝</ci><apply id="S2.SS2.p1.7.m7.1.1.1.1.1.cmml" xref="S2.SS2.p1.7.m7.1.1.1.1"><csymbol cd="latexml" id="S2.SS2.p1.7.m7.1.1.1.1.1.1.cmml" xref="S2.SS2.p1.7.m7.1.1.1.1.1.1">conditional</csymbol><ci id="S2.SS2.p1.7.m7.1.1.1.1.1.2.cmml" xref="S2.SS2.p1.7.m7.1.1.1.1.1.2">𝒁</ci><ci id="S2.SS2.p1.7.m7.1.1.1.1.1.3.cmml" xref="S2.SS2.p1.7.m7.1.1.1.1.1.3">𝑿</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.7.m7.1c">p(\boldsymbol{Z}|\boldsymbol{X})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.7.m7.1d">italic_p ( bold_italic_Z | bold_italic_X )</annotation></semantics></math> is computationally expensive and is mostly intractable, so an approximation distribution <math alttext="q(\cdot)" class="ltx_Math" display="inline" id="S2.SS2.p1.8.m8.1"><semantics id="S2.SS2.p1.8.m8.1a"><mrow id="S2.SS2.p1.8.m8.1.2" xref="S2.SS2.p1.8.m8.1.2.cmml"><mi id="S2.SS2.p1.8.m8.1.2.2" xref="S2.SS2.p1.8.m8.1.2.2.cmml">q</mi><mo id="S2.SS2.p1.8.m8.1.2.1" xref="S2.SS2.p1.8.m8.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.p1.8.m8.1.2.3.2" xref="S2.SS2.p1.8.m8.1.2.cmml"><mo id="S2.SS2.p1.8.m8.1.2.3.2.1" stretchy="false" xref="S2.SS2.p1.8.m8.1.2.cmml">(</mo><mo id="S2.SS2.p1.8.m8.1.1" lspace="0em" rspace="0em" xref="S2.SS2.p1.8.m8.1.1.cmml">⋅</mo><mo id="S2.SS2.p1.8.m8.1.2.3.2.2" stretchy="false" xref="S2.SS2.p1.8.m8.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.8.m8.1b"><apply id="S2.SS2.p1.8.m8.1.2.cmml" xref="S2.SS2.p1.8.m8.1.2"><times id="S2.SS2.p1.8.m8.1.2.1.cmml" xref="S2.SS2.p1.8.m8.1.2.1"></times><ci id="S2.SS2.p1.8.m8.1.2.2.cmml" xref="S2.SS2.p1.8.m8.1.2.2">𝑞</ci><ci id="S2.SS2.p1.8.m8.1.1.cmml" xref="S2.SS2.p1.8.m8.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.8.m8.1c">q(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.8.m8.1d">italic_q ( ⋅ )</annotation></semantics></math> is optimised so that <math alttext="q(\boldsymbol{Z}|\boldsymbol{X})\approx p(\boldsymbol{Z}|\boldsymbol{X})" class="ltx_Math" display="inline" id="S2.SS2.p1.9.m9.2"><semantics id="S2.SS2.p1.9.m9.2a"><mrow id="S2.SS2.p1.9.m9.2.2" xref="S2.SS2.p1.9.m9.2.2.cmml"><mrow id="S2.SS2.p1.9.m9.1.1.1" xref="S2.SS2.p1.9.m9.1.1.1.cmml"><mi id="S2.SS2.p1.9.m9.1.1.1.3" xref="S2.SS2.p1.9.m9.1.1.1.3.cmml">q</mi><mo id="S2.SS2.p1.9.m9.1.1.1.2" xref="S2.SS2.p1.9.m9.1.1.1.2.cmml">⁢</mo><mrow id="S2.SS2.p1.9.m9.1.1.1.1.1" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.cmml"><mo id="S2.SS2.p1.9.m9.1.1.1.1.1.2" stretchy="false" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p1.9.m9.1.1.1.1.1.1" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.cmml"><mi id="S2.SS2.p1.9.m9.1.1.1.1.1.1.2" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.2.cmml">𝒁</mi><mo fence="false" id="S2.SS2.p1.9.m9.1.1.1.1.1.1.1" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.1.cmml">|</mo><mi id="S2.SS2.p1.9.m9.1.1.1.1.1.1.3" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.3.cmml">𝑿</mi></mrow><mo id="S2.SS2.p1.9.m9.1.1.1.1.1.3" stretchy="false" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.SS2.p1.9.m9.2.2.3" xref="S2.SS2.p1.9.m9.2.2.3.cmml">≈</mo><mrow id="S2.SS2.p1.9.m9.2.2.2" xref="S2.SS2.p1.9.m9.2.2.2.cmml"><mi id="S2.SS2.p1.9.m9.2.2.2.3" xref="S2.SS2.p1.9.m9.2.2.2.3.cmml">p</mi><mo id="S2.SS2.p1.9.m9.2.2.2.2" xref="S2.SS2.p1.9.m9.2.2.2.2.cmml">⁢</mo><mrow id="S2.SS2.p1.9.m9.2.2.2.1.1" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.cmml"><mo id="S2.SS2.p1.9.m9.2.2.2.1.1.2" stretchy="false" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.cmml">(</mo><mrow id="S2.SS2.p1.9.m9.2.2.2.1.1.1" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.cmml"><mi id="S2.SS2.p1.9.m9.2.2.2.1.1.1.2" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.2.cmml">𝒁</mi><mo fence="false" id="S2.SS2.p1.9.m9.2.2.2.1.1.1.1" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.1.cmml">|</mo><mi id="S2.SS2.p1.9.m9.2.2.2.1.1.1.3" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.3.cmml">𝑿</mi></mrow><mo id="S2.SS2.p1.9.m9.2.2.2.1.1.3" stretchy="false" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.9.m9.2b"><apply id="S2.SS2.p1.9.m9.2.2.cmml" xref="S2.SS2.p1.9.m9.2.2"><approx id="S2.SS2.p1.9.m9.2.2.3.cmml" xref="S2.SS2.p1.9.m9.2.2.3"></approx><apply id="S2.SS2.p1.9.m9.1.1.1.cmml" xref="S2.SS2.p1.9.m9.1.1.1"><times id="S2.SS2.p1.9.m9.1.1.1.2.cmml" xref="S2.SS2.p1.9.m9.1.1.1.2"></times><ci id="S2.SS2.p1.9.m9.1.1.1.3.cmml" xref="S2.SS2.p1.9.m9.1.1.1.3">𝑞</ci><apply id="S2.SS2.p1.9.m9.1.1.1.1.1.1.cmml" xref="S2.SS2.p1.9.m9.1.1.1.1.1"><csymbol cd="latexml" id="S2.SS2.p1.9.m9.1.1.1.1.1.1.1.cmml" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.1">conditional</csymbol><ci id="S2.SS2.p1.9.m9.1.1.1.1.1.1.2.cmml" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.2">𝒁</ci><ci id="S2.SS2.p1.9.m9.1.1.1.1.1.1.3.cmml" xref="S2.SS2.p1.9.m9.1.1.1.1.1.1.3">𝑿</ci></apply></apply><apply id="S2.SS2.p1.9.m9.2.2.2.cmml" xref="S2.SS2.p1.9.m9.2.2.2"><times id="S2.SS2.p1.9.m9.2.2.2.2.cmml" xref="S2.SS2.p1.9.m9.2.2.2.2"></times><ci id="S2.SS2.p1.9.m9.2.2.2.3.cmml" xref="S2.SS2.p1.9.m9.2.2.2.3">𝑝</ci><apply id="S2.SS2.p1.9.m9.2.2.2.1.1.1.cmml" xref="S2.SS2.p1.9.m9.2.2.2.1.1"><csymbol cd="latexml" id="S2.SS2.p1.9.m9.2.2.2.1.1.1.1.cmml" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.1">conditional</csymbol><ci id="S2.SS2.p1.9.m9.2.2.2.1.1.1.2.cmml" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.2">𝒁</ci><ci id="S2.SS2.p1.9.m9.2.2.2.1.1.1.3.cmml" xref="S2.SS2.p1.9.m9.2.2.2.1.1.1.3">𝑿</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.9.m9.2c">q(\boldsymbol{Z}|\boldsymbol{X})\approx p(\boldsymbol{Z}|\boldsymbol{X})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.9.m9.2d">italic_q ( bold_italic_Z | bold_italic_X ) ≈ italic_p ( bold_italic_Z | bold_italic_X )</annotation></semantics></math>. Subsequently, it can be found that maximising the lower bound <math alttext="\mathcal{L}(q)" class="ltx_Math" display="inline" id="S2.SS2.p1.10.m10.1"><semantics id="S2.SS2.p1.10.m10.1a"><mrow id="S2.SS2.p1.10.m10.1.2" xref="S2.SS2.p1.10.m10.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p1.10.m10.1.2.2" xref="S2.SS2.p1.10.m10.1.2.2.cmml">ℒ</mi><mo id="S2.SS2.p1.10.m10.1.2.1" xref="S2.SS2.p1.10.m10.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.p1.10.m10.1.2.3.2" xref="S2.SS2.p1.10.m10.1.2.cmml"><mo id="S2.SS2.p1.10.m10.1.2.3.2.1" stretchy="false" xref="S2.SS2.p1.10.m10.1.2.cmml">(</mo><mi id="S2.SS2.p1.10.m10.1.1" xref="S2.SS2.p1.10.m10.1.1.cmml">q</mi><mo id="S2.SS2.p1.10.m10.1.2.3.2.2" stretchy="false" xref="S2.SS2.p1.10.m10.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.10.m10.1b"><apply id="S2.SS2.p1.10.m10.1.2.cmml" xref="S2.SS2.p1.10.m10.1.2"><times id="S2.SS2.p1.10.m10.1.2.1.cmml" xref="S2.SS2.p1.10.m10.1.2.1"></times><ci id="S2.SS2.p1.10.m10.1.2.2.cmml" xref="S2.SS2.p1.10.m10.1.2.2">ℒ</ci><ci id="S2.SS2.p1.10.m10.1.1.cmml" xref="S2.SS2.p1.10.m10.1.1">𝑞</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.10.m10.1c">\mathcal{L}(q)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.10.m10.1d">caligraphic_L ( italic_q )</annotation></semantics></math> is equivalent to minimising <math alttext="D_{\text{KL}}" class="ltx_Math" display="inline" id="S2.SS2.p1.11.m11.1"><semantics id="S2.SS2.p1.11.m11.1a"><msub id="S2.SS2.p1.11.m11.1.1" xref="S2.SS2.p1.11.m11.1.1.cmml"><mi id="S2.SS2.p1.11.m11.1.1.2" xref="S2.SS2.p1.11.m11.1.1.2.cmml">D</mi><mtext id="S2.SS2.p1.11.m11.1.1.3" xref="S2.SS2.p1.11.m11.1.1.3a.cmml">KL</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.11.m11.1b"><apply id="S2.SS2.p1.11.m11.1.1.cmml" xref="S2.SS2.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.11.m11.1.1.1.cmml" xref="S2.SS2.p1.11.m11.1.1">subscript</csymbol><ci id="S2.SS2.p1.11.m11.1.1.2.cmml" xref="S2.SS2.p1.11.m11.1.1.2">𝐷</ci><ci id="S2.SS2.p1.11.m11.1.1.3a.cmml" xref="S2.SS2.p1.11.m11.1.1.3"><mtext id="S2.SS2.p1.11.m11.1.1.3.cmml" mathsize="70%" xref="S2.SS2.p1.11.m11.1.1.3">KL</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.11.m11.1c">D_{\text{KL}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.11.m11.1d">italic_D start_POSTSUBSCRIPT KL end_POSTSUBSCRIPT</annotation></semantics></math>. Maximising the ELBO would simultaneously aim to obtain an accurate generative and discriminative model <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib37" title="">37</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S2.SS2.p2">
<table class="ltx_equation ltx_eqn_table" id="S2.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\ln p(\boldsymbol{X})=\mathcal{L}(q)-D_{\text{KL}}(q||p)," class="ltx_math_unparsed" display="block" id="S2.E1.m1.2"><semantics id="S2.E1.m1.2a"><mrow id="S2.E1.m1.2b"><mi id="S2.E1.m1.2.3">ln</mi><mi id="S2.E1.m1.2.4">p</mi><mrow id="S2.E1.m1.2.5"><mo id="S2.E1.m1.2.5.1" stretchy="false">(</mo><mi id="S2.E1.m1.1.1">𝑿</mi><mo id="S2.E1.m1.2.5.2" stretchy="false">)</mo></mrow><mo id="S2.E1.m1.2.6">=</mo><mi class="ltx_font_mathcaligraphic" id="S2.E1.m1.2.7">ℒ</mi><mrow id="S2.E1.m1.2.8"><mo id="S2.E1.m1.2.8.1" stretchy="false">(</mo><mi id="S2.E1.m1.2.2">q</mi><mo id="S2.E1.m1.2.8.2" stretchy="false">)</mo></mrow><mo id="S2.E1.m1.2.9">−</mo><msub id="S2.E1.m1.2.10"><mi id="S2.E1.m1.2.10.2">D</mi><mtext id="S2.E1.m1.2.10.3">KL</mtext></msub><mrow id="S2.E1.m1.2.11"><mo id="S2.E1.m1.2.11.1" stretchy="false">(</mo><mi id="S2.E1.m1.2.11.2">q</mi><mo fence="false" id="S2.E1.m1.2.11.3" rspace="0.167em" stretchy="false">|</mo><mo fence="false" id="S2.E1.m1.2.11.4" rspace="0.167em" stretchy="false">|</mo><mi id="S2.E1.m1.2.11.5">p</mi><mo id="S2.E1.m1.2.11.6" stretchy="false">)</mo></mrow><mo id="S2.E1.m1.2.12">,</mo></mrow><annotation encoding="application/x-tex" id="S2.E1.m1.2c">\ln p(\boldsymbol{X})=\mathcal{L}(q)-D_{\text{KL}}(q||p),</annotation><annotation encoding="application/x-llamapun" id="S2.E1.m1.2d">roman_ln italic_p ( bold_italic_X ) = caligraphic_L ( italic_q ) - italic_D start_POSTSUBSCRIPT KL end_POSTSUBSCRIPT ( italic_q | | italic_p ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS2.p3">
<p class="ltx_p" id="S2.SS2.p3.1">with the following denotations;</p>
</div>
<div class="ltx_para" id="S2.SS2.p4">
<span class="ltx_ERROR undefined" id="S2.SS2.p4.3">{IEEEeqnarray}</span>
<p class="ltx_p" id="S2.SS2.p4.2">lCr
<span class="ltx_text ltx_font_caligraphic" id="S2.SS2.p4.2.3">L</span>(q) &amp;= ∫q(<span class="ltx_text ltx_font_bold" id="S2.SS2.p4.2.4">Z</span>)ln(p(<span class="ltx_text ltx_font_bold" id="S2.SS2.p4.1.1.1.1.1.1.2.1.1">X</span>, <span class="ltx_text ltx_font_bold" id="S2.SS2.p4.1.1.1.1.1.1.2.1.2">Z</span>)q(<span class="ltx_text ltx_font_bold" id="S2.SS2.p4.1.1.1.1.1.1.3.1.1">Z</span>)) d<span class="ltx_text ltx_font_bold" id="S2.SS2.p4.2.5">Z</span>
<br class="ltx_break"/>D_<span class="ltx_text" id="S2.SS2.p4.2.6">KL</span>(q——p) = ∫q(<span class="ltx_text ltx_font_bold" id="S2.SS2.p4.2.7">Z</span>)ln(p(<span class="ltx_text ltx_font_bold" id="S2.SS2.p4.2.2.1.1.1.1.2.1.1">Z</span>— <span class="ltx_text ltx_font_bold" id="S2.SS2.p4.2.2.1.1.1.1.2.1.2">X</span>)q(<span class="ltx_text ltx_font_bold" id="S2.SS2.p4.2.2.1.1.1.1.3.1.1">Z</span>)) d<span class="ltx_text ltx_font_bold" id="S2.SS2.p4.2.8">Z</span>.</p>
</div>
<div class="ltx_para" id="S2.SS2.p5">
<p class="ltx_p" id="S2.SS2.p5.2">As can be seen in (<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.SS2" title="2.2 Γ-VAE: rationale ‣ 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">2.2</span></a>), the choice for approximating distributions is arbitrary. The most commonly chosen prior is the same as in the original paper proposing VAEs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib38" title="">38</a>]</cite>, i.e., setting <math alttext="p(z)" class="ltx_Math" display="inline" id="S2.SS2.p5.1.m1.1"><semantics id="S2.SS2.p5.1.m1.1a"><mrow id="S2.SS2.p5.1.m1.1.2" xref="S2.SS2.p5.1.m1.1.2.cmml"><mi id="S2.SS2.p5.1.m1.1.2.2" xref="S2.SS2.p5.1.m1.1.2.2.cmml">p</mi><mo id="S2.SS2.p5.1.m1.1.2.1" xref="S2.SS2.p5.1.m1.1.2.1.cmml">⁢</mo><mrow id="S2.SS2.p5.1.m1.1.2.3.2" xref="S2.SS2.p5.1.m1.1.2.cmml"><mo id="S2.SS2.p5.1.m1.1.2.3.2.1" stretchy="false" xref="S2.SS2.p5.1.m1.1.2.cmml">(</mo><mi id="S2.SS2.p5.1.m1.1.1" xref="S2.SS2.p5.1.m1.1.1.cmml">z</mi><mo id="S2.SS2.p5.1.m1.1.2.3.2.2" stretchy="false" xref="S2.SS2.p5.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.1.m1.1b"><apply id="S2.SS2.p5.1.m1.1.2.cmml" xref="S2.SS2.p5.1.m1.1.2"><times id="S2.SS2.p5.1.m1.1.2.1.cmml" xref="S2.SS2.p5.1.m1.1.2.1"></times><ci id="S2.SS2.p5.1.m1.1.2.2.cmml" xref="S2.SS2.p5.1.m1.1.2.2">𝑝</ci><ci id="S2.SS2.p5.1.m1.1.1.cmml" xref="S2.SS2.p5.1.m1.1.1">𝑧</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.1.m1.1c">p(z)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.1.m1.1d">italic_p ( italic_z )</annotation></semantics></math> to be a normal Gaussian distribution of the form <math alttext="X\sim\mathcal{N}(0,1)" class="ltx_Math" display="inline" id="S2.SS2.p5.2.m2.2"><semantics id="S2.SS2.p5.2.m2.2a"><mrow id="S2.SS2.p5.2.m2.2.3" xref="S2.SS2.p5.2.m2.2.3.cmml"><mi id="S2.SS2.p5.2.m2.2.3.2" xref="S2.SS2.p5.2.m2.2.3.2.cmml">X</mi><mo id="S2.SS2.p5.2.m2.2.3.1" xref="S2.SS2.p5.2.m2.2.3.1.cmml">∼</mo><mrow id="S2.SS2.p5.2.m2.2.3.3" xref="S2.SS2.p5.2.m2.2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p5.2.m2.2.3.3.2" xref="S2.SS2.p5.2.m2.2.3.3.2.cmml">𝒩</mi><mo id="S2.SS2.p5.2.m2.2.3.3.1" xref="S2.SS2.p5.2.m2.2.3.3.1.cmml">⁢</mo><mrow id="S2.SS2.p5.2.m2.2.3.3.3.2" xref="S2.SS2.p5.2.m2.2.3.3.3.1.cmml"><mo id="S2.SS2.p5.2.m2.2.3.3.3.2.1" stretchy="false" xref="S2.SS2.p5.2.m2.2.3.3.3.1.cmml">(</mo><mn id="S2.SS2.p5.2.m2.1.1" xref="S2.SS2.p5.2.m2.1.1.cmml">0</mn><mo id="S2.SS2.p5.2.m2.2.3.3.3.2.2" xref="S2.SS2.p5.2.m2.2.3.3.3.1.cmml">,</mo><mn id="S2.SS2.p5.2.m2.2.2" xref="S2.SS2.p5.2.m2.2.2.cmml">1</mn><mo id="S2.SS2.p5.2.m2.2.3.3.3.2.3" stretchy="false" xref="S2.SS2.p5.2.m2.2.3.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.2.m2.2b"><apply id="S2.SS2.p5.2.m2.2.3.cmml" xref="S2.SS2.p5.2.m2.2.3"><csymbol cd="latexml" id="S2.SS2.p5.2.m2.2.3.1.cmml" xref="S2.SS2.p5.2.m2.2.3.1">similar-to</csymbol><ci id="S2.SS2.p5.2.m2.2.3.2.cmml" xref="S2.SS2.p5.2.m2.2.3.2">𝑋</ci><apply id="S2.SS2.p5.2.m2.2.3.3.cmml" xref="S2.SS2.p5.2.m2.2.3.3"><times id="S2.SS2.p5.2.m2.2.3.3.1.cmml" xref="S2.SS2.p5.2.m2.2.3.3.1"></times><ci id="S2.SS2.p5.2.m2.2.3.3.2.cmml" xref="S2.SS2.p5.2.m2.2.3.3.2">𝒩</ci><interval closure="open" id="S2.SS2.p5.2.m2.2.3.3.3.1.cmml" xref="S2.SS2.p5.2.m2.2.3.3.3.2"><cn id="S2.SS2.p5.2.m2.1.1.cmml" type="integer" xref="S2.SS2.p5.2.m2.1.1">0</cn><cn id="S2.SS2.p5.2.m2.2.2.cmml" type="integer" xref="S2.SS2.p5.2.m2.2.2">1</cn></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.2.m2.2c">X\sim\mathcal{N}(0,1)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.2.m2.2d">italic_X ∼ caligraphic_N ( 0 , 1 )</annotation></semantics></math>. While this VAE can effectively reconstruct images with good realism, when used in combination with the SPADE diffusion model, the model loses the ability to generate realistic images effectively guided by the semantic maps in the latent space.</p>
</div>
<div class="ltx_para" id="S2.SS2.p6">
<p class="ltx_p" id="S2.SS2.p6.1">We hypothesise that it fails for two reasons. First, the lack of spatial consistency of the latent representation. The guiding semantic map is a multi-label map of cardiac tissues at a lower resolution than the input, and there is nothing in the standard VAE enforcing spatial consistency across resolutions between the latent representation and input image. Note that, while convolutions and pooling operations will propagate local information, this information may be distributed arbitrarily over many channels of the latent space.</p>
</div>
<div class="ltx_para" id="S2.SS2.p7">
<p class="ltx_p" id="S2.SS2.p7.1">As a solution for this first reason, we propose that simply restricting the latent space to have one channel prevents spatial features being distributed across channels and that adding a loss term that enforces similarity between the latent representation and a downsampled version of the input encourages consistency between the semantic map and the latent representation. This leaves one remaining inconsistency in the formulation though: the KL divergence promotes that pixels are Gaussian distributed in the latent space, while the input echo image will follow typically a Rayleigh distribution <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib39" title="">39</a>]</cite>, resulting in a conflict between the two loss terms.</p>
</div>
<div class="ltx_para" id="S2.SS2.p8">
<p class="ltx_p" id="S2.SS2.p8.1">A second, domain-specific, reason for the failure mode is a particularity of echo images: they display an ultrasound sector region, where image data is defined, and a background region, which is all black and set to a padding value (typically 0). As a result, a desirable property of the latent representation (which should be consistent with the input to be compatible with the guiding semantic map) is that it preserves a fixed background value that ensures proper management of the triangular region. A normal Gaussian distribution enforces a pixel-wise 0-mean, which results in a loss of the background concept after the usual normalisation layers and prior to feeding to the diffusion bottleneck. Conveniently, a <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS2.p8.1.m1.1"><semantics id="S2.SS2.p8.1.m1.1a"><mi id="S2.SS2.p8.1.m1.1.1" mathvariant="normal" xref="S2.SS2.p8.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p8.1.m1.1b"><ci id="S2.SS2.p8.1.m1.1.1.cmml" xref="S2.SS2.p8.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p8.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p8.1.m1.1d">roman_Γ</annotation></semantics></math> distribution is bounded by 0 at its lower end, lending itself as an ideal choice to replace the normal distribution in this case.</p>
</div>
<div class="ltx_para" id="S2.SS2.p9">
<p class="ltx_p" id="S2.SS2.p9.2">Furthermore, substituting the normal Gaussian by a <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS2.p9.1.m1.1"><semantics id="S2.SS2.p9.1.m1.1a"><mi id="S2.SS2.p9.1.m1.1.1" mathvariant="normal" xref="S2.SS2.p9.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p9.1.m1.1b"><ci id="S2.SS2.p9.1.m1.1.1.cmml" xref="S2.SS2.p9.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p9.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p9.1.m1.1d">roman_Γ</annotation></semantics></math> distribution solves the aforementioned conflict between the KL divergence and the latent similarity terms. Even more, as shown next, the KL divergence has a closed-form solution under the <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS2.p9.2.m2.1"><semantics id="S2.SS2.p9.2.m2.1a"><mi id="S2.SS2.p9.2.m2.1.1" mathvariant="normal" xref="S2.SS2.p9.2.m2.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p9.2.m2.1b"><ci id="S2.SS2.p9.2.m2.1.1.cmml" xref="S2.SS2.p9.2.m2.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p9.2.m2.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p9.2.m2.1d">roman_Γ</annotation></semantics></math> distribution.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span><math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS3.1.m1.1"><semantics id="S2.SS3.1.m1.1b"><mi id="S2.SS3.1.m1.1.1" mathvariant="normal" xref="S2.SS3.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.1.m1.1c"><ci id="S2.SS3.1.m1.1.1.cmml" xref="S2.SS3.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.1.m1.1d">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.1.m1.1e">roman_Γ</annotation></semantics></math>-VAE: calculation of the KL-divergence</h3>
<div class="ltx_para" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.1">The PDF for the <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS3.p1.1.m1.1"><semantics id="S2.SS3.p1.1.m1.1a"><mi id="S2.SS3.p1.1.m1.1.1" mathvariant="normal" xref="S2.SS3.p1.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.1b"><ci id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.1.m1.1d">roman_Γ</annotation></semantics></math> distribution is:</p>
</div>
<div class="ltx_para" id="S2.SS3.p2">
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="S6.EGx1">
<tbody id="S2.E2"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle f(x)=\frac{\beta^{\alpha}}{(\alpha-1)!}x^{\alpha-1}e^{-\beta x}," class="ltx_Math" display="inline" id="S2.E2.m1.3"><semantics id="S2.E2.m1.3a"><mrow id="S2.E2.m1.3.3.1" xref="S2.E2.m1.3.3.1.1.cmml"><mrow id="S2.E2.m1.3.3.1.1" xref="S2.E2.m1.3.3.1.1.cmml"><mrow id="S2.E2.m1.3.3.1.1.2" xref="S2.E2.m1.3.3.1.1.2.cmml"><mi id="S2.E2.m1.3.3.1.1.2.2" xref="S2.E2.m1.3.3.1.1.2.2.cmml">f</mi><mo id="S2.E2.m1.3.3.1.1.2.1" xref="S2.E2.m1.3.3.1.1.2.1.cmml">⁢</mo><mrow id="S2.E2.m1.3.3.1.1.2.3.2" xref="S2.E2.m1.3.3.1.1.2.cmml"><mo id="S2.E2.m1.3.3.1.1.2.3.2.1" stretchy="false" xref="S2.E2.m1.3.3.1.1.2.cmml">(</mo><mi id="S2.E2.m1.2.2" xref="S2.E2.m1.2.2.cmml">x</mi><mo id="S2.E2.m1.3.3.1.1.2.3.2.2" stretchy="false" xref="S2.E2.m1.3.3.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.3.3.1.1.1" xref="S2.E2.m1.3.3.1.1.1.cmml">=</mo><mrow id="S2.E2.m1.3.3.1.1.3" xref="S2.E2.m1.3.3.1.1.3.cmml"><mstyle displaystyle="true" id="S2.E2.m1.1.1" xref="S2.E2.m1.1.1.cmml"><mfrac id="S2.E2.m1.1.1a" xref="S2.E2.m1.1.1.cmml"><msup id="S2.E2.m1.1.1.3" xref="S2.E2.m1.1.1.3.cmml"><mi id="S2.E2.m1.1.1.3.2" xref="S2.E2.m1.1.1.3.2.cmml">β</mi><mi id="S2.E2.m1.1.1.3.3" xref="S2.E2.m1.1.1.3.3.cmml">α</mi></msup><mrow id="S2.E2.m1.1.1.1" xref="S2.E2.m1.1.1.1.cmml"><mrow id="S2.E2.m1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.cmml"><mo id="S2.E2.m1.1.1.1.1.1.2" stretchy="false" xref="S2.E2.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.1.1.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.1.1.2.cmml">α</mi><mo id="S2.E2.m1.1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.1.cmml">−</mo><mn id="S2.E2.m1.1.1.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S2.E2.m1.1.1.1.1.1.3" stretchy="false" xref="S2.E2.m1.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="S2.E2.m1.1.1.1.2" xref="S2.E2.m1.1.1.1.2.cmml">!</mo></mrow></mfrac></mstyle><mo id="S2.E2.m1.3.3.1.1.3.1" xref="S2.E2.m1.3.3.1.1.3.1.cmml">⁢</mo><msup id="S2.E2.m1.3.3.1.1.3.2" xref="S2.E2.m1.3.3.1.1.3.2.cmml"><mi id="S2.E2.m1.3.3.1.1.3.2.2" xref="S2.E2.m1.3.3.1.1.3.2.2.cmml">x</mi><mrow id="S2.E2.m1.3.3.1.1.3.2.3" xref="S2.E2.m1.3.3.1.1.3.2.3.cmml"><mi id="S2.E2.m1.3.3.1.1.3.2.3.2" xref="S2.E2.m1.3.3.1.1.3.2.3.2.cmml">α</mi><mo id="S2.E2.m1.3.3.1.1.3.2.3.1" xref="S2.E2.m1.3.3.1.1.3.2.3.1.cmml">−</mo><mn id="S2.E2.m1.3.3.1.1.3.2.3.3" xref="S2.E2.m1.3.3.1.1.3.2.3.3.cmml">1</mn></mrow></msup><mo id="S2.E2.m1.3.3.1.1.3.1a" xref="S2.E2.m1.3.3.1.1.3.1.cmml">⁢</mo><msup id="S2.E2.m1.3.3.1.1.3.3" xref="S2.E2.m1.3.3.1.1.3.3.cmml"><mi id="S2.E2.m1.3.3.1.1.3.3.2" xref="S2.E2.m1.3.3.1.1.3.3.2.cmml">e</mi><mrow id="S2.E2.m1.3.3.1.1.3.3.3" xref="S2.E2.m1.3.3.1.1.3.3.3.cmml"><mo id="S2.E2.m1.3.3.1.1.3.3.3a" xref="S2.E2.m1.3.3.1.1.3.3.3.cmml">−</mo><mrow id="S2.E2.m1.3.3.1.1.3.3.3.2" xref="S2.E2.m1.3.3.1.1.3.3.3.2.cmml"><mi id="S2.E2.m1.3.3.1.1.3.3.3.2.2" xref="S2.E2.m1.3.3.1.1.3.3.3.2.2.cmml">β</mi><mo id="S2.E2.m1.3.3.1.1.3.3.3.2.1" xref="S2.E2.m1.3.3.1.1.3.3.3.2.1.cmml">⁢</mo><mi id="S2.E2.m1.3.3.1.1.3.3.3.2.3" xref="S2.E2.m1.3.3.1.1.3.3.3.2.3.cmml">x</mi></mrow></mrow></msup></mrow></mrow><mo id="S2.E2.m1.3.3.1.2" xref="S2.E2.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.3b"><apply id="S2.E2.m1.3.3.1.1.cmml" xref="S2.E2.m1.3.3.1"><eq id="S2.E2.m1.3.3.1.1.1.cmml" xref="S2.E2.m1.3.3.1.1.1"></eq><apply id="S2.E2.m1.3.3.1.1.2.cmml" xref="S2.E2.m1.3.3.1.1.2"><times id="S2.E2.m1.3.3.1.1.2.1.cmml" xref="S2.E2.m1.3.3.1.1.2.1"></times><ci id="S2.E2.m1.3.3.1.1.2.2.cmml" xref="S2.E2.m1.3.3.1.1.2.2">𝑓</ci><ci id="S2.E2.m1.2.2.cmml" xref="S2.E2.m1.2.2">𝑥</ci></apply><apply id="S2.E2.m1.3.3.1.1.3.cmml" xref="S2.E2.m1.3.3.1.1.3"><times id="S2.E2.m1.3.3.1.1.3.1.cmml" xref="S2.E2.m1.3.3.1.1.3.1"></times><apply id="S2.E2.m1.1.1.cmml" xref="S2.E2.m1.1.1"><divide id="S2.E2.m1.1.1.2.cmml" xref="S2.E2.m1.1.1"></divide><apply id="S2.E2.m1.1.1.3.cmml" xref="S2.E2.m1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.3.1.cmml" xref="S2.E2.m1.1.1.3">superscript</csymbol><ci id="S2.E2.m1.1.1.3.2.cmml" xref="S2.E2.m1.1.1.3.2">𝛽</ci><ci id="S2.E2.m1.1.1.3.3.cmml" xref="S2.E2.m1.1.1.3.3">𝛼</ci></apply><apply id="S2.E2.m1.1.1.1.cmml" xref="S2.E2.m1.1.1.1"><factorial id="S2.E2.m1.1.1.1.2.cmml" xref="S2.E2.m1.1.1.1.2"></factorial><apply id="S2.E2.m1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1"><minus id="S2.E2.m1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.1"></minus><ci id="S2.E2.m1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2">𝛼</ci><cn id="S2.E2.m1.1.1.1.1.1.1.3.cmml" type="integer" xref="S2.E2.m1.1.1.1.1.1.1.3">1</cn></apply></apply></apply><apply id="S2.E2.m1.3.3.1.1.3.2.cmml" xref="S2.E2.m1.3.3.1.1.3.2"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.1.1.3.2.1.cmml" xref="S2.E2.m1.3.3.1.1.3.2">superscript</csymbol><ci id="S2.E2.m1.3.3.1.1.3.2.2.cmml" xref="S2.E2.m1.3.3.1.1.3.2.2">𝑥</ci><apply id="S2.E2.m1.3.3.1.1.3.2.3.cmml" xref="S2.E2.m1.3.3.1.1.3.2.3"><minus id="S2.E2.m1.3.3.1.1.3.2.3.1.cmml" xref="S2.E2.m1.3.3.1.1.3.2.3.1"></minus><ci id="S2.E2.m1.3.3.1.1.3.2.3.2.cmml" xref="S2.E2.m1.3.3.1.1.3.2.3.2">𝛼</ci><cn id="S2.E2.m1.3.3.1.1.3.2.3.3.cmml" type="integer" xref="S2.E2.m1.3.3.1.1.3.2.3.3">1</cn></apply></apply><apply id="S2.E2.m1.3.3.1.1.3.3.cmml" xref="S2.E2.m1.3.3.1.1.3.3"><csymbol cd="ambiguous" id="S2.E2.m1.3.3.1.1.3.3.1.cmml" xref="S2.E2.m1.3.3.1.1.3.3">superscript</csymbol><ci id="S2.E2.m1.3.3.1.1.3.3.2.cmml" xref="S2.E2.m1.3.3.1.1.3.3.2">𝑒</ci><apply id="S2.E2.m1.3.3.1.1.3.3.3.cmml" xref="S2.E2.m1.3.3.1.1.3.3.3"><minus id="S2.E2.m1.3.3.1.1.3.3.3.1.cmml" xref="S2.E2.m1.3.3.1.1.3.3.3"></minus><apply id="S2.E2.m1.3.3.1.1.3.3.3.2.cmml" xref="S2.E2.m1.3.3.1.1.3.3.3.2"><times id="S2.E2.m1.3.3.1.1.3.3.3.2.1.cmml" xref="S2.E2.m1.3.3.1.1.3.3.3.2.1"></times><ci id="S2.E2.m1.3.3.1.1.3.3.3.2.2.cmml" xref="S2.E2.m1.3.3.1.1.3.3.3.2.2">𝛽</ci><ci id="S2.E2.m1.3.3.1.1.3.3.3.2.3.cmml" xref="S2.E2.m1.3.3.1.1.3.3.3.2.3">𝑥</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.3c">\displaystyle f(x)=\frac{\beta^{\alpha}}{(\alpha-1)!}x^{\alpha-1}e^{-\beta x},</annotation><annotation encoding="application/x-llamapun" id="S2.E2.m1.3d">italic_f ( italic_x ) = divide start_ARG italic_β start_POSTSUPERSCRIPT italic_α end_POSTSUPERSCRIPT end_ARG start_ARG ( italic_α - 1 ) ! end_ARG italic_x start_POSTSUPERSCRIPT italic_α - 1 end_POSTSUPERSCRIPT italic_e start_POSTSUPERSCRIPT - italic_β italic_x end_POSTSUPERSCRIPT ,</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\quad\text{for }\left[\alpha&gt;0,\beta&gt;0\right]" class="ltx_Math" display="inline" id="S2.E2.m2.1"><semantics id="S2.E2.m2.1a"><mrow id="S2.E2.m2.1.1" xref="S2.E2.m2.1.1.cmml"><mtext id="S2.E2.m2.1.1.3" xref="S2.E2.m2.1.1.3a.cmml">for </mtext><mo id="S2.E2.m2.1.1.2" xref="S2.E2.m2.1.1.2.cmml">⁢</mo><mrow id="S2.E2.m2.1.1.1.1" xref="S2.E2.m2.1.1.1.2.cmml"><mo id="S2.E2.m2.1.1.1.1.2" xref="S2.E2.m2.1.1.1.2.1.cmml">[</mo><mrow id="S2.E2.m2.1.1.1.1.1.2" xref="S2.E2.m2.1.1.1.1.1.3.cmml"><mrow id="S2.E2.m2.1.1.1.1.1.1.1" xref="S2.E2.m2.1.1.1.1.1.1.1.cmml"><mi id="S2.E2.m2.1.1.1.1.1.1.1.2" xref="S2.E2.m2.1.1.1.1.1.1.1.2.cmml">α</mi><mo id="S2.E2.m2.1.1.1.1.1.1.1.1" xref="S2.E2.m2.1.1.1.1.1.1.1.1.cmml">&gt;</mo><mn id="S2.E2.m2.1.1.1.1.1.1.1.3" xref="S2.E2.m2.1.1.1.1.1.1.1.3.cmml">0</mn></mrow><mo id="S2.E2.m2.1.1.1.1.1.2.3" xref="S2.E2.m2.1.1.1.1.1.3a.cmml">,</mo><mrow id="S2.E2.m2.1.1.1.1.1.2.2" xref="S2.E2.m2.1.1.1.1.1.2.2.cmml"><mi id="S2.E2.m2.1.1.1.1.1.2.2.2" xref="S2.E2.m2.1.1.1.1.1.2.2.2.cmml">β</mi><mo id="S2.E2.m2.1.1.1.1.1.2.2.1" xref="S2.E2.m2.1.1.1.1.1.2.2.1.cmml">&gt;</mo><mn id="S2.E2.m2.1.1.1.1.1.2.2.3" xref="S2.E2.m2.1.1.1.1.1.2.2.3.cmml">0</mn></mrow></mrow><mo id="S2.E2.m2.1.1.1.1.3" xref="S2.E2.m2.1.1.1.2.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m2.1b"><apply id="S2.E2.m2.1.1.cmml" xref="S2.E2.m2.1.1"><times id="S2.E2.m2.1.1.2.cmml" xref="S2.E2.m2.1.1.2"></times><ci id="S2.E2.m2.1.1.3a.cmml" xref="S2.E2.m2.1.1.3"><mtext id="S2.E2.m2.1.1.3.cmml" xref="S2.E2.m2.1.1.3">for </mtext></ci><apply id="S2.E2.m2.1.1.1.2.cmml" xref="S2.E2.m2.1.1.1.1"><csymbol cd="latexml" id="S2.E2.m2.1.1.1.2.1.cmml" xref="S2.E2.m2.1.1.1.1.2">delimited-[]</csymbol><apply id="S2.E2.m2.1.1.1.1.1.3.cmml" xref="S2.E2.m2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E2.m2.1.1.1.1.1.3a.cmml" xref="S2.E2.m2.1.1.1.1.1.2.3">formulae-sequence</csymbol><apply id="S2.E2.m2.1.1.1.1.1.1.1.cmml" xref="S2.E2.m2.1.1.1.1.1.1.1"><gt id="S2.E2.m2.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m2.1.1.1.1.1.1.1.1"></gt><ci id="S2.E2.m2.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m2.1.1.1.1.1.1.1.2">𝛼</ci><cn id="S2.E2.m2.1.1.1.1.1.1.1.3.cmml" type="integer" xref="S2.E2.m2.1.1.1.1.1.1.1.3">0</cn></apply><apply id="S2.E2.m2.1.1.1.1.1.2.2.cmml" xref="S2.E2.m2.1.1.1.1.1.2.2"><gt id="S2.E2.m2.1.1.1.1.1.2.2.1.cmml" xref="S2.E2.m2.1.1.1.1.1.2.2.1"></gt><ci id="S2.E2.m2.1.1.1.1.1.2.2.2.cmml" xref="S2.E2.m2.1.1.1.1.1.2.2.2">𝛽</ci><cn id="S2.E2.m2.1.1.1.1.1.2.2.3.cmml" type="integer" xref="S2.E2.m2.1.1.1.1.1.2.2.3">0</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m2.1c">\displaystyle\quad\text{for }\left[\alpha&gt;0,\beta&gt;0\right]</annotation><annotation encoding="application/x-llamapun" id="S2.E2.m2.1d">for [ italic_α &gt; 0 , italic_β &gt; 0 ]</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS3.p3">
<p class="ltx_p" id="S2.SS3.p3.5">where <math alttext="\alpha" class="ltx_Math" display="inline" id="S2.SS3.p3.1.m1.1"><semantics id="S2.SS3.p3.1.m1.1a"><mi id="S2.SS3.p3.1.m1.1.1" xref="S2.SS3.p3.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.1.m1.1b"><ci id="S2.SS3.p3.1.m1.1.1.cmml" xref="S2.SS3.p3.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.1.m1.1c">\alpha</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.1.m1.1d">italic_α</annotation></semantics></math> and <math alttext="\beta" class="ltx_Math" display="inline" id="S2.SS3.p3.2.m2.1"><semantics id="S2.SS3.p3.2.m2.1a"><mi id="S2.SS3.p3.2.m2.1.1" xref="S2.SS3.p3.2.m2.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.2.m2.1b"><ci id="S2.SS3.p3.2.m2.1.1.cmml" xref="S2.SS3.p3.2.m2.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.2.m2.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.2.m2.1d">italic_β</annotation></semantics></math> are the shape and rate parameters for fitting the PDF, and <math alttext="x" class="ltx_Math" display="inline" id="S2.SS3.p3.3.m3.1"><semantics id="S2.SS3.p3.3.m3.1a"><mi id="S2.SS3.p3.3.m3.1.1" xref="S2.SS3.p3.3.m3.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.3.m3.1b"><ci id="S2.SS3.p3.3.m3.1.1.cmml" xref="S2.SS3.p3.3.m3.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.3.m3.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.3.m3.1d">italic_x</annotation></semantics></math> is an input value. The KL-divergence between two <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS3.p3.4.m4.1"><semantics id="S2.SS3.p3.4.m4.1a"><mi id="S2.SS3.p3.4.m4.1.1" mathvariant="normal" xref="S2.SS3.p3.4.m4.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.4.m4.1b"><ci id="S2.SS3.p3.4.m4.1.1.cmml" xref="S2.SS3.p3.4.m4.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.4.m4.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.4.m4.1d">roman_Γ</annotation></semantics></math> distributions (disregarding the area outside the ultrasound triangle with the <math alttext="\odot\operatorname{Bool}(\text{Sector})" class="ltx_Math" display="inline" id="S2.SS3.p3.5.m5.2"><semantics id="S2.SS3.p3.5.m5.2a"><mrow id="S2.SS3.p3.5.m5.2.3" xref="S2.SS3.p3.5.m5.2.3.cmml"><mi id="S2.SS3.p3.5.m5.2.3.2" xref="S2.SS3.p3.5.m5.2.3.2.cmml"></mi><mo id="S2.SS3.p3.5.m5.2.3.1" lspace="0.222em" rspace="0.222em" xref="S2.SS3.p3.5.m5.2.3.1.cmml">⊙</mo><mrow id="S2.SS3.p3.5.m5.2.3.3.2" xref="S2.SS3.p3.5.m5.2.3.3.1.cmml"><mi id="S2.SS3.p3.5.m5.1.1" xref="S2.SS3.p3.5.m5.1.1.cmml">Bool</mi><mo id="S2.SS3.p3.5.m5.2.3.3.2a" xref="S2.SS3.p3.5.m5.2.3.3.1.cmml">⁡</mo><mrow id="S2.SS3.p3.5.m5.2.3.3.2.1" xref="S2.SS3.p3.5.m5.2.3.3.1.cmml"><mo id="S2.SS3.p3.5.m5.2.3.3.2.1.1" stretchy="false" xref="S2.SS3.p3.5.m5.2.3.3.1.cmml">(</mo><mtext id="S2.SS3.p3.5.m5.2.2" xref="S2.SS3.p3.5.m5.2.2a.cmml">Sector</mtext><mo id="S2.SS3.p3.5.m5.2.3.3.2.1.2" stretchy="false" xref="S2.SS3.p3.5.m5.2.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p3.5.m5.2b"><apply id="S2.SS3.p3.5.m5.2.3.cmml" xref="S2.SS3.p3.5.m5.2.3"><csymbol cd="latexml" id="S2.SS3.p3.5.m5.2.3.1.cmml" xref="S2.SS3.p3.5.m5.2.3.1">direct-product</csymbol><csymbol cd="latexml" id="S2.SS3.p3.5.m5.2.3.2.cmml" xref="S2.SS3.p3.5.m5.2.3.2">absent</csymbol><apply id="S2.SS3.p3.5.m5.2.3.3.1.cmml" xref="S2.SS3.p3.5.m5.2.3.3.2"><ci id="S2.SS3.p3.5.m5.1.1.cmml" xref="S2.SS3.p3.5.m5.1.1">Bool</ci><ci id="S2.SS3.p3.5.m5.2.2a.cmml" xref="S2.SS3.p3.5.m5.2.2"><mtext id="S2.SS3.p3.5.m5.2.2.cmml" xref="S2.SS3.p3.5.m5.2.2">Sector</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p3.5.m5.2c">\odot\operatorname{Bool}(\text{Sector})</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p3.5.m5.2d">⊙ roman_Bool ( Sector )</annotation></semantics></math> operation) is:</p>
</div>
<div class="ltx_para" id="S2.SS3.p4">
<span class="ltx_ERROR undefined" id="S2.SS3.p4.3">{IEEEeqnarray*}</span>
<p class="ltx_p" id="S2.SS3.p4.2">l
D_KL(<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.3">α</span>_p,<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.4">β</span>_p; <span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.5">α</span>_q, <span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.6">β</span>_q) = (<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.7">α</span>_p-<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.8">α</span>_q) <span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.9">ψ</span>(<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.10">α</span>_p) - log(<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.1.1.1.1.1.1.1">α</span>_p-1)! 
<br class="ltx_break"/>  +  log(<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.2.1.1.1.1.1">α</span>_q-1)! + <span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.11">α</span>_q(log<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.13">β</span>_p - log<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.15">β</span>_q) + <span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.16">α</span>_p<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.17.2.1.1">β</span><span class="ltx_text" id="S2.SS3.p4.2.17.2.2.1.1.1" style="font-size:70%;">q</span>-<span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.17.2.3.1">β</span><span class="ltx_text" id="S2.SS3.p4.2.17.2.4.1.1.1" style="font-size:70%;">p</span><span class="ltx_text ltx_font_italic" id="S2.SS3.p4.2.17.3.1.1">β</span><span class="ltx_text" id="S2.SS3.p4.2.17.3.2.1.1.1" style="font-size:70%;">p</span>,   
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="S2.SS3.p4.2.18">\IEEEeqnarraymulticol</span>1l
D_KL = D_KL⊙Bool(<span class="ltx_text" id="S2.SS3.p4.2.20">Sector</span>)  <span class="ltx_ERROR undefined" id="S2.SS3.p4.2.21">\IEEEyesnumber</span></p>
</div>
<div class="ltx_para" id="S2.SS3.p5">
<p class="ltx_p" id="S2.SS3.p5.3">where <math alttext="\alpha_{p},\beta_{p}" class="ltx_Math" display="inline" id="S2.SS3.p5.1.m1.2"><semantics id="S2.SS3.p5.1.m1.2a"><mrow id="S2.SS3.p5.1.m1.2.2.2" xref="S2.SS3.p5.1.m1.2.2.3.cmml"><msub id="S2.SS3.p5.1.m1.1.1.1.1" xref="S2.SS3.p5.1.m1.1.1.1.1.cmml"><mi id="S2.SS3.p5.1.m1.1.1.1.1.2" xref="S2.SS3.p5.1.m1.1.1.1.1.2.cmml">α</mi><mi id="S2.SS3.p5.1.m1.1.1.1.1.3" xref="S2.SS3.p5.1.m1.1.1.1.1.3.cmml">p</mi></msub><mo id="S2.SS3.p5.1.m1.2.2.2.3" xref="S2.SS3.p5.1.m1.2.2.3.cmml">,</mo><msub id="S2.SS3.p5.1.m1.2.2.2.2" xref="S2.SS3.p5.1.m1.2.2.2.2.cmml"><mi id="S2.SS3.p5.1.m1.2.2.2.2.2" xref="S2.SS3.p5.1.m1.2.2.2.2.2.cmml">β</mi><mi id="S2.SS3.p5.1.m1.2.2.2.2.3" xref="S2.SS3.p5.1.m1.2.2.2.2.3.cmml">p</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p5.1.m1.2b"><list id="S2.SS3.p5.1.m1.2.2.3.cmml" xref="S2.SS3.p5.1.m1.2.2.2"><apply id="S2.SS3.p5.1.m1.1.1.1.1.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p5.1.m1.1.1.1.1.1.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1">subscript</csymbol><ci id="S2.SS3.p5.1.m1.1.1.1.1.2.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.2">𝛼</ci><ci id="S2.SS3.p5.1.m1.1.1.1.1.3.cmml" xref="S2.SS3.p5.1.m1.1.1.1.1.3">𝑝</ci></apply><apply id="S2.SS3.p5.1.m1.2.2.2.2.cmml" xref="S2.SS3.p5.1.m1.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.p5.1.m1.2.2.2.2.1.cmml" xref="S2.SS3.p5.1.m1.2.2.2.2">subscript</csymbol><ci id="S2.SS3.p5.1.m1.2.2.2.2.2.cmml" xref="S2.SS3.p5.1.m1.2.2.2.2.2">𝛽</ci><ci id="S2.SS3.p5.1.m1.2.2.2.2.3.cmml" xref="S2.SS3.p5.1.m1.2.2.2.2.3">𝑝</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p5.1.m1.2c">\alpha_{p},\beta_{p}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p5.1.m1.2d">italic_α start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT , italic_β start_POSTSUBSCRIPT italic_p end_POSTSUBSCRIPT</annotation></semantics></math> are the prior distribution parameters, <math alttext="\alpha_{q},\beta_{q}" class="ltx_Math" display="inline" id="S2.SS3.p5.2.m2.2"><semantics id="S2.SS3.p5.2.m2.2a"><mrow id="S2.SS3.p5.2.m2.2.2.2" xref="S2.SS3.p5.2.m2.2.2.3.cmml"><msub id="S2.SS3.p5.2.m2.1.1.1.1" xref="S2.SS3.p5.2.m2.1.1.1.1.cmml"><mi id="S2.SS3.p5.2.m2.1.1.1.1.2" xref="S2.SS3.p5.2.m2.1.1.1.1.2.cmml">α</mi><mi id="S2.SS3.p5.2.m2.1.1.1.1.3" xref="S2.SS3.p5.2.m2.1.1.1.1.3.cmml">q</mi></msub><mo id="S2.SS3.p5.2.m2.2.2.2.3" xref="S2.SS3.p5.2.m2.2.2.3.cmml">,</mo><msub id="S2.SS3.p5.2.m2.2.2.2.2" xref="S2.SS3.p5.2.m2.2.2.2.2.cmml"><mi id="S2.SS3.p5.2.m2.2.2.2.2.2" xref="S2.SS3.p5.2.m2.2.2.2.2.2.cmml">β</mi><mi id="S2.SS3.p5.2.m2.2.2.2.2.3" xref="S2.SS3.p5.2.m2.2.2.2.2.3.cmml">q</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p5.2.m2.2b"><list id="S2.SS3.p5.2.m2.2.2.3.cmml" xref="S2.SS3.p5.2.m2.2.2.2"><apply id="S2.SS3.p5.2.m2.1.1.1.1.cmml" xref="S2.SS3.p5.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p5.2.m2.1.1.1.1.1.cmml" xref="S2.SS3.p5.2.m2.1.1.1.1">subscript</csymbol><ci id="S2.SS3.p5.2.m2.1.1.1.1.2.cmml" xref="S2.SS3.p5.2.m2.1.1.1.1.2">𝛼</ci><ci id="S2.SS3.p5.2.m2.1.1.1.1.3.cmml" xref="S2.SS3.p5.2.m2.1.1.1.1.3">𝑞</ci></apply><apply id="S2.SS3.p5.2.m2.2.2.2.2.cmml" xref="S2.SS3.p5.2.m2.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS3.p5.2.m2.2.2.2.2.1.cmml" xref="S2.SS3.p5.2.m2.2.2.2.2">subscript</csymbol><ci id="S2.SS3.p5.2.m2.2.2.2.2.2.cmml" xref="S2.SS3.p5.2.m2.2.2.2.2.2">𝛽</ci><ci id="S2.SS3.p5.2.m2.2.2.2.2.3.cmml" xref="S2.SS3.p5.2.m2.2.2.2.2.3">𝑞</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p5.2.m2.2c">\alpha_{q},\beta_{q}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p5.2.m2.2d">italic_α start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT , italic_β start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT</annotation></semantics></math> are the approximating distribution parameters, and <math alttext="\psi(\cdot)" class="ltx_Math" display="inline" id="S2.SS3.p5.3.m3.1"><semantics id="S2.SS3.p5.3.m3.1a"><mrow id="S2.SS3.p5.3.m3.1.2" xref="S2.SS3.p5.3.m3.1.2.cmml"><mi id="S2.SS3.p5.3.m3.1.2.2" xref="S2.SS3.p5.3.m3.1.2.2.cmml">ψ</mi><mo id="S2.SS3.p5.3.m3.1.2.1" xref="S2.SS3.p5.3.m3.1.2.1.cmml">⁢</mo><mrow id="S2.SS3.p5.3.m3.1.2.3.2" xref="S2.SS3.p5.3.m3.1.2.cmml"><mo id="S2.SS3.p5.3.m3.1.2.3.2.1" stretchy="false" xref="S2.SS3.p5.3.m3.1.2.cmml">(</mo><mo id="S2.SS3.p5.3.m3.1.1" lspace="0em" rspace="0em" xref="S2.SS3.p5.3.m3.1.1.cmml">⋅</mo><mo id="S2.SS3.p5.3.m3.1.2.3.2.2" stretchy="false" xref="S2.SS3.p5.3.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p5.3.m3.1b"><apply id="S2.SS3.p5.3.m3.1.2.cmml" xref="S2.SS3.p5.3.m3.1.2"><times id="S2.SS3.p5.3.m3.1.2.1.cmml" xref="S2.SS3.p5.3.m3.1.2.1"></times><ci id="S2.SS3.p5.3.m3.1.2.2.cmml" xref="S2.SS3.p5.3.m3.1.2.2">𝜓</ci><ci id="S2.SS3.p5.3.m3.1.1.cmml" xref="S2.SS3.p5.3.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p5.3.m3.1c">\psi(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p5.3.m3.1d">italic_ψ ( ⋅ )</annotation></semantics></math> is the Digamma function, given by</p>
</div>
<div class="ltx_para" id="S2.SS3.p6">
<table class="ltx_equation ltx_eqn_table" id="S2.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\psi(x)=\frac{d}{dx}\ln(x-1)!" class="ltx_Math" display="block" id="S2.E3.m1.3"><semantics id="S2.E3.m1.3a"><mrow id="S2.E3.m1.3.4" xref="S2.E3.m1.3.4.cmml"><mrow id="S2.E3.m1.3.4.2" xref="S2.E3.m1.3.4.2.cmml"><mi id="S2.E3.m1.3.4.2.2" xref="S2.E3.m1.3.4.2.2.cmml">ψ</mi><mo id="S2.E3.m1.3.4.2.1" xref="S2.E3.m1.3.4.2.1.cmml">⁢</mo><mrow id="S2.E3.m1.3.4.2.3.2" xref="S2.E3.m1.3.4.2.cmml"><mo id="S2.E3.m1.3.4.2.3.2.1" stretchy="false" xref="S2.E3.m1.3.4.2.cmml">(</mo><mi id="S2.E3.m1.3.3" xref="S2.E3.m1.3.3.cmml">x</mi><mo id="S2.E3.m1.3.4.2.3.2.2" stretchy="false" xref="S2.E3.m1.3.4.2.cmml">)</mo></mrow></mrow><mo id="S2.E3.m1.3.4.1" xref="S2.E3.m1.3.4.1.cmml">=</mo><mrow id="S2.E3.m1.3.4.3" xref="S2.E3.m1.3.4.3.cmml"><mfrac id="S2.E3.m1.3.4.3.2" xref="S2.E3.m1.3.4.3.2.cmml"><mi id="S2.E3.m1.3.4.3.2.2" xref="S2.E3.m1.3.4.3.2.2.cmml">d</mi><mrow id="S2.E3.m1.3.4.3.2.3" xref="S2.E3.m1.3.4.3.2.3.cmml"><mi id="S2.E3.m1.3.4.3.2.3.2" xref="S2.E3.m1.3.4.3.2.3.2.cmml">d</mi><mo id="S2.E3.m1.3.4.3.2.3.1" xref="S2.E3.m1.3.4.3.2.3.1.cmml">⁢</mo><mi id="S2.E3.m1.3.4.3.2.3.3" xref="S2.E3.m1.3.4.3.2.3.3.cmml">x</mi></mrow></mfrac><mo id="S2.E3.m1.3.4.3.1" lspace="0.167em" xref="S2.E3.m1.3.4.3.1.cmml">⁢</mo><mrow id="S2.E3.m1.3.4.3.3" xref="S2.E3.m1.3.4.3.3.cmml"><mrow id="S2.E3.m1.2.2.4" xref="S2.E3.m1.2.2.3.cmml"><mi id="S2.E3.m1.2.2.2.2" xref="S2.E3.m1.2.2.3.1.cmml">ln</mi><mo id="S2.E3.m1.2.2.4a" xref="S2.E3.m1.2.2.3.1.cmml">⁡</mo><mrow id="S2.E3.m1.2.2.4.1" xref="S2.E3.m1.2.2.3.cmml"><mo id="S2.E3.m1.2.2.4.1.1" xref="S2.E3.m1.2.2.3.1.cmml">(</mo><mrow id="S2.E3.m1.1.1.1.1.1" xref="S2.E3.m1.1.1.1.1.1.cmml"><mi id="S2.E3.m1.1.1.1.1.1.2" xref="S2.E3.m1.1.1.1.1.1.2.cmml">x</mi><mo id="S2.E3.m1.1.1.1.1.1.1" xref="S2.E3.m1.1.1.1.1.1.1.cmml">−</mo><mn id="S2.E3.m1.1.1.1.1.1.3" xref="S2.E3.m1.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S2.E3.m1.2.2.4.1.2" xref="S2.E3.m1.2.2.3.1.cmml">)</mo></mrow></mrow><mo id="S2.E3.m1.3.4.3.3.1" xref="S2.E3.m1.3.4.3.3.1.cmml">!</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E3.m1.3b"><apply id="S2.E3.m1.3.4.cmml" xref="S2.E3.m1.3.4"><eq id="S2.E3.m1.3.4.1.cmml" xref="S2.E3.m1.3.4.1"></eq><apply id="S2.E3.m1.3.4.2.cmml" xref="S2.E3.m1.3.4.2"><times id="S2.E3.m1.3.4.2.1.cmml" xref="S2.E3.m1.3.4.2.1"></times><ci id="S2.E3.m1.3.4.2.2.cmml" xref="S2.E3.m1.3.4.2.2">𝜓</ci><ci id="S2.E3.m1.3.3.cmml" xref="S2.E3.m1.3.3">𝑥</ci></apply><apply id="S2.E3.m1.3.4.3.cmml" xref="S2.E3.m1.3.4.3"><times id="S2.E3.m1.3.4.3.1.cmml" xref="S2.E3.m1.3.4.3.1"></times><apply id="S2.E3.m1.3.4.3.2.cmml" xref="S2.E3.m1.3.4.3.2"><divide id="S2.E3.m1.3.4.3.2.1.cmml" xref="S2.E3.m1.3.4.3.2"></divide><ci id="S2.E3.m1.3.4.3.2.2.cmml" xref="S2.E3.m1.3.4.3.2.2">𝑑</ci><apply id="S2.E3.m1.3.4.3.2.3.cmml" xref="S2.E3.m1.3.4.3.2.3"><times id="S2.E3.m1.3.4.3.2.3.1.cmml" xref="S2.E3.m1.3.4.3.2.3.1"></times><ci id="S2.E3.m1.3.4.3.2.3.2.cmml" xref="S2.E3.m1.3.4.3.2.3.2">𝑑</ci><ci id="S2.E3.m1.3.4.3.2.3.3.cmml" xref="S2.E3.m1.3.4.3.2.3.3">𝑥</ci></apply></apply><apply id="S2.E3.m1.3.4.3.3.cmml" xref="S2.E3.m1.3.4.3.3"><factorial id="S2.E3.m1.3.4.3.3.1.cmml" xref="S2.E3.m1.3.4.3.3.1"></factorial><apply id="S2.E3.m1.2.2.3.cmml" xref="S2.E3.m1.2.2.4"><ln id="S2.E3.m1.2.2.3.1.cmml" xref="S2.E3.m1.2.2.2.2"></ln><apply id="S2.E3.m1.1.1.1.1.1.cmml" xref="S2.E3.m1.1.1.1.1.1"><minus id="S2.E3.m1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.1.1.1.1.1.1"></minus><ci id="S2.E3.m1.1.1.1.1.1.2.cmml" xref="S2.E3.m1.1.1.1.1.1.2">𝑥</ci><cn id="S2.E3.m1.1.1.1.1.1.3.cmml" type="integer" xref="S2.E3.m1.1.1.1.1.1.3">1</cn></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m1.3c">\psi(x)=\frac{d}{dx}\ln(x-1)!</annotation><annotation encoding="application/x-llamapun" id="S2.E3.m1.3d">italic_ψ ( italic_x ) = divide start_ARG italic_d end_ARG start_ARG italic_d italic_x end_ARG roman_ln ( start_ARG italic_x - 1 end_ARG ) !</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS3.p7">
<p class="ltx_p" id="S2.SS3.p7.3">During the training phase of the <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS3.p7.1.m1.1"><semantics id="S2.SS3.p7.1.m1.1a"><mi id="S2.SS3.p7.1.m1.1.1" mathvariant="normal" xref="S2.SS3.p7.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p7.1.m1.1b"><ci id="S2.SS3.p7.1.m1.1.1.cmml" xref="S2.SS3.p7.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p7.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p7.1.m1.1d">roman_Γ</annotation></semantics></math>-VAE, the reparametrisation trick is used<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib38" title="">38</a>]</cite>. However, during the diffusion model training phase, we do not sample from the <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS3.p7.2.m2.1"><semantics id="S2.SS3.p7.2.m2.1a"><mi id="S2.SS3.p7.2.m2.1.1" mathvariant="normal" xref="S2.SS3.p7.2.m2.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p7.2.m2.1b"><ci id="S2.SS3.p7.2.m2.1.1.cmml" xref="S2.SS3.p7.2.m2.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p7.2.m2.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p7.2.m2.1d">roman_Γ</annotation></semantics></math> distribution; instead, the latent representation corresponding to the expected value of the distribution is used. The expectation for a random sample <math alttext="X\sim\Gamma(\alpha,\beta)" class="ltx_Math" display="inline" id="S2.SS3.p7.3.m3.2"><semantics id="S2.SS3.p7.3.m3.2a"><mrow id="S2.SS3.p7.3.m3.2.3" xref="S2.SS3.p7.3.m3.2.3.cmml"><mi id="S2.SS3.p7.3.m3.2.3.2" xref="S2.SS3.p7.3.m3.2.3.2.cmml">X</mi><mo id="S2.SS3.p7.3.m3.2.3.1" xref="S2.SS3.p7.3.m3.2.3.1.cmml">∼</mo><mrow id="S2.SS3.p7.3.m3.2.3.3" xref="S2.SS3.p7.3.m3.2.3.3.cmml"><mi id="S2.SS3.p7.3.m3.2.3.3.2" mathvariant="normal" xref="S2.SS3.p7.3.m3.2.3.3.2.cmml">Γ</mi><mo id="S2.SS3.p7.3.m3.2.3.3.1" xref="S2.SS3.p7.3.m3.2.3.3.1.cmml">⁢</mo><mrow id="S2.SS3.p7.3.m3.2.3.3.3.2" xref="S2.SS3.p7.3.m3.2.3.3.3.1.cmml"><mo id="S2.SS3.p7.3.m3.2.3.3.3.2.1" stretchy="false" xref="S2.SS3.p7.3.m3.2.3.3.3.1.cmml">(</mo><mi id="S2.SS3.p7.3.m3.1.1" xref="S2.SS3.p7.3.m3.1.1.cmml">α</mi><mo id="S2.SS3.p7.3.m3.2.3.3.3.2.2" xref="S2.SS3.p7.3.m3.2.3.3.3.1.cmml">,</mo><mi id="S2.SS3.p7.3.m3.2.2" xref="S2.SS3.p7.3.m3.2.2.cmml">β</mi><mo id="S2.SS3.p7.3.m3.2.3.3.3.2.3" stretchy="false" xref="S2.SS3.p7.3.m3.2.3.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p7.3.m3.2b"><apply id="S2.SS3.p7.3.m3.2.3.cmml" xref="S2.SS3.p7.3.m3.2.3"><csymbol cd="latexml" id="S2.SS3.p7.3.m3.2.3.1.cmml" xref="S2.SS3.p7.3.m3.2.3.1">similar-to</csymbol><ci id="S2.SS3.p7.3.m3.2.3.2.cmml" xref="S2.SS3.p7.3.m3.2.3.2">𝑋</ci><apply id="S2.SS3.p7.3.m3.2.3.3.cmml" xref="S2.SS3.p7.3.m3.2.3.3"><times id="S2.SS3.p7.3.m3.2.3.3.1.cmml" xref="S2.SS3.p7.3.m3.2.3.3.1"></times><ci id="S2.SS3.p7.3.m3.2.3.3.2.cmml" xref="S2.SS3.p7.3.m3.2.3.3.2">Γ</ci><interval closure="open" id="S2.SS3.p7.3.m3.2.3.3.3.1.cmml" xref="S2.SS3.p7.3.m3.2.3.3.3.2"><ci id="S2.SS3.p7.3.m3.1.1.cmml" xref="S2.SS3.p7.3.m3.1.1">𝛼</ci><ci id="S2.SS3.p7.3.m3.2.2.cmml" xref="S2.SS3.p7.3.m3.2.2">𝛽</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p7.3.m3.2c">X\sim\Gamma(\alpha,\beta)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p7.3.m3.2d">italic_X ∼ roman_Γ ( italic_α , italic_β )</annotation></semantics></math> is given by</p>
</div>
<div class="ltx_para" id="S2.SS3.p8">
<table class="ltx_equation ltx_eqn_table" id="S2.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\mathbb{E}(X)=\frac{\alpha}{\beta}." class="ltx_Math" display="block" id="S2.E4.m1.2"><semantics id="S2.E4.m1.2a"><mrow id="S2.E4.m1.2.2.1" xref="S2.E4.m1.2.2.1.1.cmml"><mrow id="S2.E4.m1.2.2.1.1" xref="S2.E4.m1.2.2.1.1.cmml"><mrow id="S2.E4.m1.2.2.1.1.2" xref="S2.E4.m1.2.2.1.1.2.cmml"><mi id="S2.E4.m1.2.2.1.1.2.2" xref="S2.E4.m1.2.2.1.1.2.2.cmml">𝔼</mi><mo id="S2.E4.m1.2.2.1.1.2.1" xref="S2.E4.m1.2.2.1.1.2.1.cmml">⁢</mo><mrow id="S2.E4.m1.2.2.1.1.2.3.2" xref="S2.E4.m1.2.2.1.1.2.cmml"><mo id="S2.E4.m1.2.2.1.1.2.3.2.1" stretchy="false" xref="S2.E4.m1.2.2.1.1.2.cmml">(</mo><mi id="S2.E4.m1.1.1" xref="S2.E4.m1.1.1.cmml">X</mi><mo id="S2.E4.m1.2.2.1.1.2.3.2.2" stretchy="false" xref="S2.E4.m1.2.2.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E4.m1.2.2.1.1.1" xref="S2.E4.m1.2.2.1.1.1.cmml">=</mo><mfrac id="S2.E4.m1.2.2.1.1.3" xref="S2.E4.m1.2.2.1.1.3.cmml"><mi id="S2.E4.m1.2.2.1.1.3.2" xref="S2.E4.m1.2.2.1.1.3.2.cmml">α</mi><mi id="S2.E4.m1.2.2.1.1.3.3" xref="S2.E4.m1.2.2.1.1.3.3.cmml">β</mi></mfrac></mrow><mo id="S2.E4.m1.2.2.1.2" lspace="0em" xref="S2.E4.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E4.m1.2b"><apply id="S2.E4.m1.2.2.1.1.cmml" xref="S2.E4.m1.2.2.1"><eq id="S2.E4.m1.2.2.1.1.1.cmml" xref="S2.E4.m1.2.2.1.1.1"></eq><apply id="S2.E4.m1.2.2.1.1.2.cmml" xref="S2.E4.m1.2.2.1.1.2"><times id="S2.E4.m1.2.2.1.1.2.1.cmml" xref="S2.E4.m1.2.2.1.1.2.1"></times><ci id="S2.E4.m1.2.2.1.1.2.2.cmml" xref="S2.E4.m1.2.2.1.1.2.2">𝔼</ci><ci id="S2.E4.m1.1.1.cmml" xref="S2.E4.m1.1.1">𝑋</ci></apply><apply id="S2.E4.m1.2.2.1.1.3.cmml" xref="S2.E4.m1.2.2.1.1.3"><divide id="S2.E4.m1.2.2.1.1.3.1.cmml" xref="S2.E4.m1.2.2.1.1.3"></divide><ci id="S2.E4.m1.2.2.1.1.3.2.cmml" xref="S2.E4.m1.2.2.1.1.3.2">𝛼</ci><ci id="S2.E4.m1.2.2.1.1.3.3.cmml" xref="S2.E4.m1.2.2.1.1.3.3">𝛽</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E4.m1.2c">\mathbb{E}(X)=\frac{\alpha}{\beta}.</annotation><annotation encoding="application/x-llamapun" id="S2.E4.m1.2d">blackboard_E ( italic_X ) = divide start_ARG italic_α end_ARG start_ARG italic_β end_ARG .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS3.p9">
<p class="ltx_p" id="S2.SS3.p9.1">This ensures each segmentation mask provided to the diffusion model has a unique corresponding latent representation.</p>
</div>
<div class="ltx_para" id="S2.SS3.p10">
<p class="ltx_p" id="S2.SS3.p10.2">The final <math alttext="\Gamma" class="ltx_Math" display="inline" id="S2.SS3.p10.1.m1.1"><semantics id="S2.SS3.p10.1.m1.1a"><mi id="S2.SS3.p10.1.m1.1.1" mathvariant="normal" xref="S2.SS3.p10.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p10.1.m1.1b"><ci id="S2.SS3.p10.1.m1.1.1.cmml" xref="S2.SS3.p10.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p10.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p10.1.m1.1d">roman_Γ</annotation></semantics></math>-VAE loss function for an input image, <math alttext="X" class="ltx_Math" display="inline" id="S2.SS3.p10.2.m2.1"><semantics id="S2.SS3.p10.2.m2.1a"><mi id="S2.SS3.p10.2.m2.1.1" xref="S2.SS3.p10.2.m2.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p10.2.m2.1b"><ci id="S2.SS3.p10.2.m2.1.1.cmml" xref="S2.SS3.p10.2.m2.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p10.2.m2.1c">X</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p10.2.m2.1d">italic_X</annotation></semantics></math> is:</p>
</div>
<div class="ltx_para" id="S2.SS3.p11">
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="S6.EGx2">
<tbody id="S2.E5"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell" colspan="2"><math alttext="\displaystyle\begin{split}\mathcal{L}&amp;=\lambda_{1}\|X-Y\|^{2}_{2}+\lambda_{2}%
\mathcal{P}(X,Y)\\
&amp;+\lambda_{3}D_{KL}+\lambda_{4}\|x-y\|^{2}_{2},\end{split}" class="ltx_Math" display="inline" id="S2.E5.m1.39"><semantics id="S2.E5.m1.39a"><mtable columnspacing="0pt" id="S2.E5.m1.39.39.3" rowspacing="0pt"><mtr id="S2.E5.m1.39.39.3a"><mtd class="ltx_align_right" columnalign="right" id="S2.E5.m1.39.39.3b"><mi class="ltx_font_mathcaligraphic" id="S2.E5.m1.1.1.1.1.1.1" xref="S2.E5.m1.1.1.1.1.1.1.cmml">ℒ</mi></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E5.m1.39.39.3c"><mrow id="S2.E5.m1.38.38.2.37.21.20"><mi id="S2.E5.m1.38.38.2.37.21.20.21" xref="S2.E5.m1.37.37.1.1.1.cmml"></mi><mo id="S2.E5.m1.2.2.2.2.1.1" xref="S2.E5.m1.2.2.2.2.1.1.cmml">=</mo><mrow id="S2.E5.m1.38.38.2.37.21.20.20"><mrow id="S2.E5.m1.38.38.2.37.21.20.20.1"><msub id="S2.E5.m1.38.38.2.37.21.20.20.1.3"><mi id="S2.E5.m1.3.3.3.3.2.2" xref="S2.E5.m1.3.3.3.3.2.2.cmml">λ</mi><mn id="S2.E5.m1.4.4.4.4.3.3.1" xref="S2.E5.m1.4.4.4.4.3.3.1.cmml">1</mn></msub><mo id="S2.E5.m1.38.38.2.37.21.20.20.1.2" xref="S2.E5.m1.37.37.1.1.1.cmml">⁢</mo><msubsup id="S2.E5.m1.38.38.2.37.21.20.20.1.1"><mrow id="S2.E5.m1.38.38.2.37.21.20.20.1.1.1.1.1"><mo id="S2.E5.m1.5.5.5.5.4.4" stretchy="false" xref="S2.E5.m1.37.37.1.1.1.cmml">‖</mo><mrow id="S2.E5.m1.38.38.2.37.21.20.20.1.1.1.1.1.1"><mi id="S2.E5.m1.6.6.6.6.5.5" xref="S2.E5.m1.6.6.6.6.5.5.cmml">X</mi><mo id="S2.E5.m1.7.7.7.7.6.6" xref="S2.E5.m1.7.7.7.7.6.6.cmml">−</mo><mi id="S2.E5.m1.8.8.8.8.7.7" xref="S2.E5.m1.8.8.8.8.7.7.cmml">Y</mi></mrow><mo id="S2.E5.m1.9.9.9.9.8.8" stretchy="false" xref="S2.E5.m1.37.37.1.1.1.cmml">‖</mo></mrow><mn id="S2.E5.m1.11.11.11.11.10.10.1" xref="S2.E5.m1.11.11.11.11.10.10.1.cmml">2</mn><mn id="S2.E5.m1.10.10.10.10.9.9.1" xref="S2.E5.m1.10.10.10.10.9.9.1.cmml">2</mn></msubsup></mrow><mo id="S2.E5.m1.12.12.12.12.11.11" xref="S2.E5.m1.12.12.12.12.11.11.cmml">+</mo><mrow id="S2.E5.m1.38.38.2.37.21.20.20.2"><msub id="S2.E5.m1.38.38.2.37.21.20.20.2.2"><mi id="S2.E5.m1.13.13.13.13.12.12" xref="S2.E5.m1.13.13.13.13.12.12.cmml">λ</mi><mn id="S2.E5.m1.14.14.14.14.13.13.1" xref="S2.E5.m1.14.14.14.14.13.13.1.cmml">2</mn></msub><mo id="S2.E5.m1.38.38.2.37.21.20.20.2.1" xref="S2.E5.m1.37.37.1.1.1.cmml">⁢</mo><mi class="ltx_font_mathcaligraphic" id="S2.E5.m1.15.15.15.15.14.14" xref="S2.E5.m1.15.15.15.15.14.14.cmml">𝒫</mi><mo id="S2.E5.m1.38.38.2.37.21.20.20.2.1a" xref="S2.E5.m1.37.37.1.1.1.cmml">⁢</mo><mrow id="S2.E5.m1.38.38.2.37.21.20.20.2.3"><mo id="S2.E5.m1.16.16.16.16.15.15" stretchy="false" xref="S2.E5.m1.37.37.1.1.1.cmml">(</mo><mi id="S2.E5.m1.17.17.17.17.16.16" xref="S2.E5.m1.17.17.17.17.16.16.cmml">X</mi><mo id="S2.E5.m1.18.18.18.18.17.17" xref="S2.E5.m1.37.37.1.1.1.cmml">,</mo><mi id="S2.E5.m1.19.19.19.19.18.18" xref="S2.E5.m1.19.19.19.19.18.18.cmml">Y</mi><mo id="S2.E5.m1.20.20.20.20.19.19" stretchy="false" xref="S2.E5.m1.37.37.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mtd></mtr><mtr id="S2.E5.m1.39.39.3d"><mtd id="S2.E5.m1.39.39.3e" xref="S2.E5.m1.37.37.1.1.1.cmml"></mtd><mtd class="ltx_align_left" columnalign="left" id="S2.E5.m1.39.39.3f"><mrow id="S2.E5.m1.39.39.3.38.17.17.17"><mrow id="S2.E5.m1.39.39.3.38.17.17.17.1"><mrow id="S2.E5.m1.39.39.3.38.17.17.17.1.2"><mo id="S2.E5.m1.39.39.3.38.17.17.17.1.2a" xref="S2.E5.m1.37.37.1.1.1.cmml">+</mo><mrow id="S2.E5.m1.39.39.3.38.17.17.17.1.2.1"><msub id="S2.E5.m1.39.39.3.38.17.17.17.1.2.1.2"><mi id="S2.E5.m1.22.22.22.2.2.2" xref="S2.E5.m1.22.22.22.2.2.2.cmml">λ</mi><mn id="S2.E5.m1.23.23.23.3.3.3.1" xref="S2.E5.m1.23.23.23.3.3.3.1.cmml">3</mn></msub><mo id="S2.E5.m1.39.39.3.38.17.17.17.1.2.1.1" xref="S2.E5.m1.37.37.1.1.1.cmml">⁢</mo><msub id="S2.E5.m1.39.39.3.38.17.17.17.1.2.1.3"><mi id="S2.E5.m1.24.24.24.4.4.4" xref="S2.E5.m1.24.24.24.4.4.4.cmml">D</mi><mrow id="S2.E5.m1.25.25.25.5.5.5.1" xref="S2.E5.m1.25.25.25.5.5.5.1.cmml"><mi id="S2.E5.m1.25.25.25.5.5.5.1.2" xref="S2.E5.m1.25.25.25.5.5.5.1.2.cmml">K</mi><mo id="S2.E5.m1.25.25.25.5.5.5.1.1" xref="S2.E5.m1.25.25.25.5.5.5.1.1.cmml">⁢</mo><mi id="S2.E5.m1.25.25.25.5.5.5.1.3" xref="S2.E5.m1.25.25.25.5.5.5.1.3.cmml">L</mi></mrow></msub></mrow></mrow><mo id="S2.E5.m1.26.26.26.6.6.6" xref="S2.E5.m1.37.37.1.1.1.cmml">+</mo><mrow id="S2.E5.m1.39.39.3.38.17.17.17.1.1"><msub id="S2.E5.m1.39.39.3.38.17.17.17.1.1.3"><mi id="S2.E5.m1.27.27.27.7.7.7" xref="S2.E5.m1.27.27.27.7.7.7.cmml">λ</mi><mn id="S2.E5.m1.28.28.28.8.8.8.1" xref="S2.E5.m1.28.28.28.8.8.8.1.cmml">4</mn></msub><mo id="S2.E5.m1.39.39.3.38.17.17.17.1.1.2" xref="S2.E5.m1.37.37.1.1.1.cmml">⁢</mo><msubsup id="S2.E5.m1.39.39.3.38.17.17.17.1.1.1"><mrow id="S2.E5.m1.39.39.3.38.17.17.17.1.1.1.1.1.1"><mo id="S2.E5.m1.29.29.29.9.9.9" stretchy="false" xref="S2.E5.m1.37.37.1.1.1.cmml">‖</mo><mrow id="S2.E5.m1.39.39.3.38.17.17.17.1.1.1.1.1.1.1"><mi id="S2.E5.m1.30.30.30.10.10.10" xref="S2.E5.m1.30.30.30.10.10.10.cmml">x</mi><mo id="S2.E5.m1.31.31.31.11.11.11" xref="S2.E5.m1.31.31.31.11.11.11.cmml">−</mo><mi id="S2.E5.m1.32.32.32.12.12.12" xref="S2.E5.m1.32.32.32.12.12.12.cmml">y</mi></mrow><mo id="S2.E5.m1.33.33.33.13.13.13" stretchy="false" xref="S2.E5.m1.37.37.1.1.1.cmml">‖</mo></mrow><mn id="S2.E5.m1.35.35.35.15.15.15.1" xref="S2.E5.m1.35.35.35.15.15.15.1.cmml">2</mn><mn id="S2.E5.m1.34.34.34.14.14.14.1" xref="S2.E5.m1.34.34.34.14.14.14.1.cmml">2</mn></msubsup></mrow></mrow><mo id="S2.E5.m1.36.36.36.16.16.16" xref="S2.E5.m1.37.37.1.1.1.cmml">,</mo></mrow></mtd></mtr></mtable><annotation-xml encoding="MathML-Content" id="S2.E5.m1.39b"><apply id="S2.E5.m1.37.37.1.1.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><eq id="S2.E5.m1.2.2.2.2.1.1.cmml" xref="S2.E5.m1.2.2.2.2.1.1"></eq><ci id="S2.E5.m1.1.1.1.1.1.1.cmml" xref="S2.E5.m1.1.1.1.1.1.1">ℒ</ci><apply id="S2.E5.m1.37.37.1.1.1.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><plus id="S2.E5.m1.12.12.12.12.11.11.cmml" xref="S2.E5.m1.12.12.12.12.11.11"></plus><apply id="S2.E5.m1.37.37.1.1.1.1.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><times id="S2.E5.m1.37.37.1.1.1.1.1.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"></times><apply id="S2.E5.m1.37.37.1.1.1.1.1.3.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.1.1.3.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">subscript</csymbol><ci id="S2.E5.m1.3.3.3.3.2.2.cmml" xref="S2.E5.m1.3.3.3.3.2.2">𝜆</ci><cn id="S2.E5.m1.4.4.4.4.3.3.1.cmml" type="integer" xref="S2.E5.m1.4.4.4.4.3.3.1">1</cn></apply><apply id="S2.E5.m1.37.37.1.1.1.1.1.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.1.1.1.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">subscript</csymbol><apply id="S2.E5.m1.37.37.1.1.1.1.1.1.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.1.1.1.1.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">superscript</csymbol><apply id="S2.E5.m1.37.37.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="latexml" id="S2.E5.m1.37.37.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">delimited-∥∥</csymbol><apply id="S2.E5.m1.37.37.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><minus id="S2.E5.m1.7.7.7.7.6.6.cmml" xref="S2.E5.m1.7.7.7.7.6.6"></minus><ci id="S2.E5.m1.6.6.6.6.5.5.cmml" xref="S2.E5.m1.6.6.6.6.5.5">𝑋</ci><ci id="S2.E5.m1.8.8.8.8.7.7.cmml" xref="S2.E5.m1.8.8.8.8.7.7">𝑌</ci></apply></apply><cn id="S2.E5.m1.10.10.10.10.9.9.1.cmml" type="integer" xref="S2.E5.m1.10.10.10.10.9.9.1">2</cn></apply><cn id="S2.E5.m1.11.11.11.11.10.10.1.cmml" type="integer" xref="S2.E5.m1.11.11.11.11.10.10.1">2</cn></apply></apply><apply id="S2.E5.m1.37.37.1.1.1.2.4.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><times id="S2.E5.m1.37.37.1.1.1.2.4.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"></times><apply id="S2.E5.m1.37.37.1.1.1.2.4.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.2.4.2.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">subscript</csymbol><ci id="S2.E5.m1.13.13.13.13.12.12.cmml" xref="S2.E5.m1.13.13.13.13.12.12">𝜆</ci><cn id="S2.E5.m1.14.14.14.14.13.13.1.cmml" type="integer" xref="S2.E5.m1.14.14.14.14.13.13.1">2</cn></apply><ci id="S2.E5.m1.15.15.15.15.14.14.cmml" xref="S2.E5.m1.15.15.15.15.14.14">𝒫</ci><interval closure="open" id="S2.E5.m1.37.37.1.1.1.2.4.4.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><ci id="S2.E5.m1.17.17.17.17.16.16.cmml" xref="S2.E5.m1.17.17.17.17.16.16">𝑋</ci><ci id="S2.E5.m1.19.19.19.19.18.18.cmml" xref="S2.E5.m1.19.19.19.19.18.18">𝑌</ci></interval></apply><apply id="S2.E5.m1.37.37.1.1.1.2.5.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><times id="S2.E5.m1.37.37.1.1.1.2.5.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"></times><apply id="S2.E5.m1.37.37.1.1.1.2.5.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.2.5.2.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">subscript</csymbol><ci id="S2.E5.m1.22.22.22.2.2.2.cmml" xref="S2.E5.m1.22.22.22.2.2.2">𝜆</ci><cn id="S2.E5.m1.23.23.23.3.3.3.1.cmml" type="integer" xref="S2.E5.m1.23.23.23.3.3.3.1">3</cn></apply><apply id="S2.E5.m1.37.37.1.1.1.2.5.3.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.2.5.3.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">subscript</csymbol><ci id="S2.E5.m1.24.24.24.4.4.4.cmml" xref="S2.E5.m1.24.24.24.4.4.4">𝐷</ci><apply id="S2.E5.m1.25.25.25.5.5.5.1.cmml" xref="S2.E5.m1.25.25.25.5.5.5.1"><times id="S2.E5.m1.25.25.25.5.5.5.1.1.cmml" xref="S2.E5.m1.25.25.25.5.5.5.1.1"></times><ci id="S2.E5.m1.25.25.25.5.5.5.1.2.cmml" xref="S2.E5.m1.25.25.25.5.5.5.1.2">𝐾</ci><ci id="S2.E5.m1.25.25.25.5.5.5.1.3.cmml" xref="S2.E5.m1.25.25.25.5.5.5.1.3">𝐿</ci></apply></apply></apply><apply id="S2.E5.m1.37.37.1.1.1.2.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><times id="S2.E5.m1.37.37.1.1.1.2.2.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"></times><apply id="S2.E5.m1.37.37.1.1.1.2.2.3.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.2.2.3.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">subscript</csymbol><ci id="S2.E5.m1.27.27.27.7.7.7.cmml" xref="S2.E5.m1.27.27.27.7.7.7">𝜆</ci><cn id="S2.E5.m1.28.28.28.8.8.8.1.cmml" type="integer" xref="S2.E5.m1.28.28.28.8.8.8.1">4</cn></apply><apply id="S2.E5.m1.37.37.1.1.1.2.2.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.2.2.1.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">subscript</csymbol><apply id="S2.E5.m1.37.37.1.1.1.2.2.1.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="ambiguous" id="S2.E5.m1.37.37.1.1.1.2.2.1.1.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">superscript</csymbol><apply id="S2.E5.m1.37.37.1.1.1.2.2.1.1.1.2.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><csymbol cd="latexml" id="S2.E5.m1.37.37.1.1.1.2.2.1.1.1.2.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21">delimited-∥∥</csymbol><apply id="S2.E5.m1.37.37.1.1.1.2.2.1.1.1.1.1.cmml" xref="S2.E5.m1.38.38.2.37.21.20.21"><minus id="S2.E5.m1.31.31.31.11.11.11.cmml" xref="S2.E5.m1.31.31.31.11.11.11"></minus><ci id="S2.E5.m1.30.30.30.10.10.10.cmml" xref="S2.E5.m1.30.30.30.10.10.10">𝑥</ci><ci id="S2.E5.m1.32.32.32.12.12.12.cmml" xref="S2.E5.m1.32.32.32.12.12.12">𝑦</ci></apply></apply><cn id="S2.E5.m1.34.34.34.14.14.14.1.cmml" type="integer" xref="S2.E5.m1.34.34.34.14.14.14.1">2</cn></apply><cn id="S2.E5.m1.35.35.35.15.15.15.1.cmml" type="integer" xref="S2.E5.m1.35.35.35.15.15.15.1">2</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E5.m1.39c">\displaystyle\begin{split}\mathcal{L}&amp;=\lambda_{1}\|X-Y\|^{2}_{2}+\lambda_{2}%
\mathcal{P}(X,Y)\\
&amp;+\lambda_{3}D_{KL}+\lambda_{4}\|x-y\|^{2}_{2},\end{split}</annotation><annotation encoding="application/x-llamapun" id="S2.E5.m1.39d">start_ROW start_CELL caligraphic_L end_CELL start_CELL = italic_λ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT ∥ italic_X - italic_Y ∥ start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT + italic_λ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT caligraphic_P ( italic_X , italic_Y ) end_CELL end_ROW start_ROW start_CELL end_CELL start_CELL + italic_λ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT italic_D start_POSTSUBSCRIPT italic_K italic_L end_POSTSUBSCRIPT + italic_λ start_POSTSUBSCRIPT 4 end_POSTSUBSCRIPT ∥ italic_x - italic_y ∥ start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS3.p12">
<p class="ltx_p" id="S2.SS3.p12.5">where <math alttext="\lambda_{(\cdot)}" class="ltx_Math" display="inline" id="S2.SS3.p12.1.m1.1"><semantics id="S2.SS3.p12.1.m1.1a"><msub id="S2.SS3.p12.1.m1.1.2" xref="S2.SS3.p12.1.m1.1.2.cmml"><mi id="S2.SS3.p12.1.m1.1.2.2" xref="S2.SS3.p12.1.m1.1.2.2.cmml">λ</mi><mrow id="S2.SS3.p12.1.m1.1.1.1.3" xref="S2.SS3.p12.1.m1.1.2.cmml"><mo id="S2.SS3.p12.1.m1.1.1.1.3.1" stretchy="false" xref="S2.SS3.p12.1.m1.1.2.cmml">(</mo><mo id="S2.SS3.p12.1.m1.1.1.1.1" lspace="0em" rspace="0em" xref="S2.SS3.p12.1.m1.1.1.1.1.cmml">⋅</mo><mo id="S2.SS3.p12.1.m1.1.1.1.3.2" stretchy="false" xref="S2.SS3.p12.1.m1.1.2.cmml">)</mo></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p12.1.m1.1b"><apply id="S2.SS3.p12.1.m1.1.2.cmml" xref="S2.SS3.p12.1.m1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p12.1.m1.1.2.1.cmml" xref="S2.SS3.p12.1.m1.1.2">subscript</csymbol><ci id="S2.SS3.p12.1.m1.1.2.2.cmml" xref="S2.SS3.p12.1.m1.1.2.2">𝜆</ci><ci id="S2.SS3.p12.1.m1.1.1.1.1.cmml" xref="S2.SS3.p12.1.m1.1.1.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p12.1.m1.1c">\lambda_{(\cdot)}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p12.1.m1.1d">italic_λ start_POSTSUBSCRIPT ( ⋅ ) end_POSTSUBSCRIPT</annotation></semantics></math> are loss weighting factors, <math alttext="Y" class="ltx_Math" display="inline" id="S2.SS3.p12.2.m2.1"><semantics id="S2.SS3.p12.2.m2.1a"><mi id="S2.SS3.p12.2.m2.1.1" xref="S2.SS3.p12.2.m2.1.1.cmml">Y</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p12.2.m2.1b"><ci id="S2.SS3.p12.2.m2.1.1.cmml" xref="S2.SS3.p12.2.m2.1.1">𝑌</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p12.2.m2.1c">Y</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p12.2.m2.1d">italic_Y</annotation></semantics></math>, is the predicted image reconstruction, <math alttext="\mathcal{P}(\cdot)" class="ltx_Math" display="inline" id="S2.SS3.p12.3.m3.1"><semantics id="S2.SS3.p12.3.m3.1a"><mrow id="S2.SS3.p12.3.m3.1.2" xref="S2.SS3.p12.3.m3.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p12.3.m3.1.2.2" xref="S2.SS3.p12.3.m3.1.2.2.cmml">𝒫</mi><mo id="S2.SS3.p12.3.m3.1.2.1" xref="S2.SS3.p12.3.m3.1.2.1.cmml">⁢</mo><mrow id="S2.SS3.p12.3.m3.1.2.3.2" xref="S2.SS3.p12.3.m3.1.2.cmml"><mo id="S2.SS3.p12.3.m3.1.2.3.2.1" stretchy="false" xref="S2.SS3.p12.3.m3.1.2.cmml">(</mo><mo id="S2.SS3.p12.3.m3.1.1" lspace="0em" rspace="0em" xref="S2.SS3.p12.3.m3.1.1.cmml">⋅</mo><mo id="S2.SS3.p12.3.m3.1.2.3.2.2" stretchy="false" xref="S2.SS3.p12.3.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p12.3.m3.1b"><apply id="S2.SS3.p12.3.m3.1.2.cmml" xref="S2.SS3.p12.3.m3.1.2"><times id="S2.SS3.p12.3.m3.1.2.1.cmml" xref="S2.SS3.p12.3.m3.1.2.1"></times><ci id="S2.SS3.p12.3.m3.1.2.2.cmml" xref="S2.SS3.p12.3.m3.1.2.2">𝒫</ci><ci id="S2.SS3.p12.3.m3.1.1.cmml" xref="S2.SS3.p12.3.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p12.3.m3.1c">\mathcal{P}(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p12.3.m3.1d">caligraphic_P ( ⋅ )</annotation></semantics></math>, is the perceptual loss function <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib40" title="">40</a>]</cite>, <math alttext="x" class="ltx_Math" display="inline" id="S2.SS3.p12.4.m4.1"><semantics id="S2.SS3.p12.4.m4.1a"><mi id="S2.SS3.p12.4.m4.1.1" xref="S2.SS3.p12.4.m4.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p12.4.m4.1b"><ci id="S2.SS3.p12.4.m4.1.1.cmml" xref="S2.SS3.p12.4.m4.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p12.4.m4.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p12.4.m4.1d">italic_x</annotation></semantics></math> and <math alttext="y" class="ltx_Math" display="inline" id="S2.SS3.p12.5.m5.1"><semantics id="S2.SS3.p12.5.m5.1a"><mi id="S2.SS3.p12.5.m5.1.1" xref="S2.SS3.p12.5.m5.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p12.5.m5.1b"><ci id="S2.SS3.p12.5.m5.1.1.cmml" xref="S2.SS3.p12.5.m5.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p12.5.m5.1c">y</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p12.5.m5.1d">italic_y</annotation></semantics></math> are the subsampled resolution image and the latent prediction image, respectively.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.4 </span>Diffusion model: rationale</h3>
<div class="ltx_para" id="S2.SS4.p1">
<p class="ltx_p" id="S2.SS4.p1.3">In latent diffusion models (LDMs), the latent space of the VAE is replaced by a diffusion process. A diffusion process can be understood as a Markov chain of <math alttext="T" class="ltx_Math" display="inline" id="S2.SS4.p1.1.m1.1"><semantics id="S2.SS4.p1.1.m1.1a"><mi id="S2.SS4.p1.1.m1.1.1" xref="S2.SS4.p1.1.m1.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p1.1.m1.1b"><ci id="S2.SS4.p1.1.m1.1.1.cmml" xref="S2.SS4.p1.1.m1.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p1.1.m1.1c">T</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p1.1.m1.1d">italic_T</annotation></semantics></math> steps. In the forward process, also known as the diffusion process, small amounts of noise are iteratively added to the data. This process continues until the data is transformed into pure noise. Formally, for a given distribution <math alttext="x_{0}\sim q(x_{0})" class="ltx_Math" display="inline" id="S2.SS4.p1.2.m2.1"><semantics id="S2.SS4.p1.2.m2.1a"><mrow id="S2.SS4.p1.2.m2.1.1" xref="S2.SS4.p1.2.m2.1.1.cmml"><msub id="S2.SS4.p1.2.m2.1.1.3" xref="S2.SS4.p1.2.m2.1.1.3.cmml"><mi id="S2.SS4.p1.2.m2.1.1.3.2" xref="S2.SS4.p1.2.m2.1.1.3.2.cmml">x</mi><mn id="S2.SS4.p1.2.m2.1.1.3.3" xref="S2.SS4.p1.2.m2.1.1.3.3.cmml">0</mn></msub><mo id="S2.SS4.p1.2.m2.1.1.2" xref="S2.SS4.p1.2.m2.1.1.2.cmml">∼</mo><mrow id="S2.SS4.p1.2.m2.1.1.1" xref="S2.SS4.p1.2.m2.1.1.1.cmml"><mi id="S2.SS4.p1.2.m2.1.1.1.3" xref="S2.SS4.p1.2.m2.1.1.1.3.cmml">q</mi><mo id="S2.SS4.p1.2.m2.1.1.1.2" xref="S2.SS4.p1.2.m2.1.1.1.2.cmml">⁢</mo><mrow id="S2.SS4.p1.2.m2.1.1.1.1.1" xref="S2.SS4.p1.2.m2.1.1.1.1.1.1.cmml"><mo id="S2.SS4.p1.2.m2.1.1.1.1.1.2" stretchy="false" xref="S2.SS4.p1.2.m2.1.1.1.1.1.1.cmml">(</mo><msub id="S2.SS4.p1.2.m2.1.1.1.1.1.1" xref="S2.SS4.p1.2.m2.1.1.1.1.1.1.cmml"><mi id="S2.SS4.p1.2.m2.1.1.1.1.1.1.2" xref="S2.SS4.p1.2.m2.1.1.1.1.1.1.2.cmml">x</mi><mn id="S2.SS4.p1.2.m2.1.1.1.1.1.1.3" xref="S2.SS4.p1.2.m2.1.1.1.1.1.1.3.cmml">0</mn></msub><mo id="S2.SS4.p1.2.m2.1.1.1.1.1.3" stretchy="false" xref="S2.SS4.p1.2.m2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p1.2.m2.1b"><apply id="S2.SS4.p1.2.m2.1.1.cmml" xref="S2.SS4.p1.2.m2.1.1"><csymbol cd="latexml" id="S2.SS4.p1.2.m2.1.1.2.cmml" xref="S2.SS4.p1.2.m2.1.1.2">similar-to</csymbol><apply id="S2.SS4.p1.2.m2.1.1.3.cmml" xref="S2.SS4.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S2.SS4.p1.2.m2.1.1.3.1.cmml" xref="S2.SS4.p1.2.m2.1.1.3">subscript</csymbol><ci id="S2.SS4.p1.2.m2.1.1.3.2.cmml" xref="S2.SS4.p1.2.m2.1.1.3.2">𝑥</ci><cn id="S2.SS4.p1.2.m2.1.1.3.3.cmml" type="integer" xref="S2.SS4.p1.2.m2.1.1.3.3">0</cn></apply><apply id="S2.SS4.p1.2.m2.1.1.1.cmml" xref="S2.SS4.p1.2.m2.1.1.1"><times id="S2.SS4.p1.2.m2.1.1.1.2.cmml" xref="S2.SS4.p1.2.m2.1.1.1.2"></times><ci id="S2.SS4.p1.2.m2.1.1.1.3.cmml" xref="S2.SS4.p1.2.m2.1.1.1.3">𝑞</ci><apply id="S2.SS4.p1.2.m2.1.1.1.1.1.1.cmml" xref="S2.SS4.p1.2.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p1.2.m2.1.1.1.1.1.1.1.cmml" xref="S2.SS4.p1.2.m2.1.1.1.1.1">subscript</csymbol><ci id="S2.SS4.p1.2.m2.1.1.1.1.1.1.2.cmml" xref="S2.SS4.p1.2.m2.1.1.1.1.1.1.2">𝑥</ci><cn id="S2.SS4.p1.2.m2.1.1.1.1.1.1.3.cmml" type="integer" xref="S2.SS4.p1.2.m2.1.1.1.1.1.1.3">0</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p1.2.m2.1c">x_{0}\sim q(x_{0})</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p1.2.m2.1d">italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ∼ italic_q ( italic_x start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math>, the forward noising process, <math alttext="q" class="ltx_Math" display="inline" id="S2.SS4.p1.3.m3.1"><semantics id="S2.SS4.p1.3.m3.1a"><mi id="S2.SS4.p1.3.m3.1.1" xref="S2.SS4.p1.3.m3.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p1.3.m3.1b"><ci id="S2.SS4.p1.3.m3.1.1.cmml" xref="S2.SS4.p1.3.m3.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p1.3.m3.1c">q</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p1.3.m3.1d">italic_q</annotation></semantics></math>, can be defined as:</p>
</div>
<div class="ltx_para" id="S2.SS4.p2">
<table class="ltx_equation ltx_eqn_table" id="S2.E6">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="q(x_{t}|x_{t-1})\coloneq\mathcal{N}(x_{t};\sqrt{1-\beta_{t}}x_{t-1},\beta_{t}%
\textbf{I})." class="ltx_Math" display="block" id="S2.E6.m1.1"><semantics id="S2.E6.m1.1a"><mrow id="S2.E6.m1.1.1.1" xref="S2.E6.m1.1.1.1.1.cmml"><mrow id="S2.E6.m1.1.1.1.1" xref="S2.E6.m1.1.1.1.1.cmml"><mrow id="S2.E6.m1.1.1.1.1.1" xref="S2.E6.m1.1.1.1.1.1.cmml"><mi id="S2.E6.m1.1.1.1.1.1.3" xref="S2.E6.m1.1.1.1.1.1.3.cmml">q</mi><mo id="S2.E6.m1.1.1.1.1.1.2" xref="S2.E6.m1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E6.m1.1.1.1.1.1.1.1" xref="S2.E6.m1.1.1.1.1.1.1.1.1.cmml"><mo id="S2.E6.m1.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.E6.m1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E6.m1.1.1.1.1.1.1.1.1" xref="S2.E6.m1.1.1.1.1.1.1.1.1.cmml"><msub id="S2.E6.m1.1.1.1.1.1.1.1.1.2" xref="S2.E6.m1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S2.E6.m1.1.1.1.1.1.1.1.1.2.2" xref="S2.E6.m1.1.1.1.1.1.1.1.1.2.2.cmml">x</mi><mi id="S2.E6.m1.1.1.1.1.1.1.1.1.2.3" xref="S2.E6.m1.1.1.1.1.1.1.1.1.2.3.cmml">t</mi></msub><mo fence="false" id="S2.E6.m1.1.1.1.1.1.1.1.1.1" xref="S2.E6.m1.1.1.1.1.1.1.1.1.1.cmml">|</mo><msub id="S2.E6.m1.1.1.1.1.1.1.1.1.3" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S2.E6.m1.1.1.1.1.1.1.1.1.3.2" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.2.cmml">x</mi><mrow id="S2.E6.m1.1.1.1.1.1.1.1.1.3.3" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.cmml"><mi id="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.2" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.2.cmml">t</mi><mo id="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.1" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.1.cmml">−</mo><mn id="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.3" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.3.cmml">1</mn></mrow></msub></mrow><mo id="S2.E6.m1.1.1.1.1.1.1.1.3" rspace="0.278em" stretchy="false" xref="S2.E6.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E6.m1.1.1.1.1.5" rspace="0.278em" xref="S2.E6.m1.1.1.1.1.5.cmml">:-</mo><mrow id="S2.E6.m1.1.1.1.1.4" xref="S2.E6.m1.1.1.1.1.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E6.m1.1.1.1.1.4.5" xref="S2.E6.m1.1.1.1.1.4.5.cmml">𝒩</mi><mo id="S2.E6.m1.1.1.1.1.4.4" xref="S2.E6.m1.1.1.1.1.4.4.cmml">⁢</mo><mrow id="S2.E6.m1.1.1.1.1.4.3.3" xref="S2.E6.m1.1.1.1.1.4.3.4.cmml"><mo id="S2.E6.m1.1.1.1.1.4.3.3.4" stretchy="false" xref="S2.E6.m1.1.1.1.1.4.3.4.cmml">(</mo><msub id="S2.E6.m1.1.1.1.1.2.1.1.1" xref="S2.E6.m1.1.1.1.1.2.1.1.1.cmml"><mi id="S2.E6.m1.1.1.1.1.2.1.1.1.2" xref="S2.E6.m1.1.1.1.1.2.1.1.1.2.cmml">x</mi><mi id="S2.E6.m1.1.1.1.1.2.1.1.1.3" xref="S2.E6.m1.1.1.1.1.2.1.1.1.3.cmml">t</mi></msub><mo id="S2.E6.m1.1.1.1.1.4.3.3.5" xref="S2.E6.m1.1.1.1.1.4.3.4.cmml">;</mo><mrow id="S2.E6.m1.1.1.1.1.3.2.2.2" xref="S2.E6.m1.1.1.1.1.3.2.2.2.cmml"><msqrt id="S2.E6.m1.1.1.1.1.3.2.2.2.2" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.cmml"><mrow id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.cmml"><mn id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.2" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.2.cmml">1</mn><mo id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.1" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.1.cmml">−</mo><msub id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.cmml"><mi id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.2" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.2.cmml">β</mi><mi id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.3" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.3.cmml">t</mi></msub></mrow></msqrt><mo id="S2.E6.m1.1.1.1.1.3.2.2.2.1" xref="S2.E6.m1.1.1.1.1.3.2.2.2.1.cmml">⁢</mo><msub id="S2.E6.m1.1.1.1.1.3.2.2.2.3" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.cmml"><mi id="S2.E6.m1.1.1.1.1.3.2.2.2.3.2" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.2.cmml">x</mi><mrow id="S2.E6.m1.1.1.1.1.3.2.2.2.3.3" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.cmml"><mi id="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.2" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.2.cmml">t</mi><mo id="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.1" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.1.cmml">−</mo><mn id="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.3" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.3.cmml">1</mn></mrow></msub></mrow><mo id="S2.E6.m1.1.1.1.1.4.3.3.6" xref="S2.E6.m1.1.1.1.1.4.3.4.cmml">,</mo><mrow id="S2.E6.m1.1.1.1.1.4.3.3.3" xref="S2.E6.m1.1.1.1.1.4.3.3.3.cmml"><msub id="S2.E6.m1.1.1.1.1.4.3.3.3.2" xref="S2.E6.m1.1.1.1.1.4.3.3.3.2.cmml"><mi id="S2.E6.m1.1.1.1.1.4.3.3.3.2.2" xref="S2.E6.m1.1.1.1.1.4.3.3.3.2.2.cmml">β</mi><mi id="S2.E6.m1.1.1.1.1.4.3.3.3.2.3" xref="S2.E6.m1.1.1.1.1.4.3.3.3.2.3.cmml">t</mi></msub><mo id="S2.E6.m1.1.1.1.1.4.3.3.3.1" xref="S2.E6.m1.1.1.1.1.4.3.3.3.1.cmml">⁢</mo><mtext class="ltx_mathvariant_bold" id="S2.E6.m1.1.1.1.1.4.3.3.3.3" xref="S2.E6.m1.1.1.1.1.4.3.3.3.3a.cmml">I</mtext></mrow><mo id="S2.E6.m1.1.1.1.1.4.3.3.7" stretchy="false" xref="S2.E6.m1.1.1.1.1.4.3.4.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E6.m1.1.1.1.2" lspace="0em" xref="S2.E6.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E6.m1.1b"><apply id="S2.E6.m1.1.1.1.1.cmml" xref="S2.E6.m1.1.1.1"><ci id="S2.E6.m1.1.1.1.1.5.cmml" xref="S2.E6.m1.1.1.1.1.5">:-</ci><apply id="S2.E6.m1.1.1.1.1.1.cmml" xref="S2.E6.m1.1.1.1.1.1"><times id="S2.E6.m1.1.1.1.1.1.2.cmml" xref="S2.E6.m1.1.1.1.1.1.2"></times><ci id="S2.E6.m1.1.1.1.1.1.3.cmml" xref="S2.E6.m1.1.1.1.1.1.3">𝑞</ci><apply id="S2.E6.m1.1.1.1.1.1.1.1.1.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.E6.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S2.E6.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E6.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.E6.m1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.2.2">𝑥</ci><ci id="S2.E6.m1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.2.3">𝑡</ci></apply><apply id="S2.E6.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E6.m1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E6.m1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.2">𝑥</ci><apply id="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.3"><minus id="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.1"></minus><ci id="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.2.cmml" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.2">𝑡</ci><cn id="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.3.cmml" type="integer" xref="S2.E6.m1.1.1.1.1.1.1.1.1.3.3.3">1</cn></apply></apply></apply></apply><apply id="S2.E6.m1.1.1.1.1.4.cmml" xref="S2.E6.m1.1.1.1.1.4"><times id="S2.E6.m1.1.1.1.1.4.4.cmml" xref="S2.E6.m1.1.1.1.1.4.4"></times><ci id="S2.E6.m1.1.1.1.1.4.5.cmml" xref="S2.E6.m1.1.1.1.1.4.5">𝒩</ci><list id="S2.E6.m1.1.1.1.1.4.3.4.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3"><apply id="S2.E6.m1.1.1.1.1.2.1.1.1.cmml" xref="S2.E6.m1.1.1.1.1.2.1.1.1"><csymbol cd="ambiguous" id="S2.E6.m1.1.1.1.1.2.1.1.1.1.cmml" xref="S2.E6.m1.1.1.1.1.2.1.1.1">subscript</csymbol><ci id="S2.E6.m1.1.1.1.1.2.1.1.1.2.cmml" xref="S2.E6.m1.1.1.1.1.2.1.1.1.2">𝑥</ci><ci id="S2.E6.m1.1.1.1.1.2.1.1.1.3.cmml" xref="S2.E6.m1.1.1.1.1.2.1.1.1.3">𝑡</ci></apply><apply id="S2.E6.m1.1.1.1.1.3.2.2.2.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2"><times id="S2.E6.m1.1.1.1.1.3.2.2.2.1.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.1"></times><apply id="S2.E6.m1.1.1.1.1.3.2.2.2.2.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2"><root id="S2.E6.m1.1.1.1.1.3.2.2.2.2a.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2"></root><apply id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2"><minus id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.1.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.1"></minus><cn id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.2.cmml" type="integer" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.2">1</cn><apply id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.1.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3">subscript</csymbol><ci id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.2.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.2">𝛽</ci><ci id="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.3.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.2.2.3.3">𝑡</ci></apply></apply></apply><apply id="S2.E6.m1.1.1.1.1.3.2.2.2.3.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3"><csymbol cd="ambiguous" id="S2.E6.m1.1.1.1.1.3.2.2.2.3.1.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3">subscript</csymbol><ci id="S2.E6.m1.1.1.1.1.3.2.2.2.3.2.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.2">𝑥</ci><apply id="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.3"><minus id="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.1.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.1"></minus><ci id="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.2.cmml" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.2">𝑡</ci><cn id="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.3.cmml" type="integer" xref="S2.E6.m1.1.1.1.1.3.2.2.2.3.3.3">1</cn></apply></apply></apply><apply id="S2.E6.m1.1.1.1.1.4.3.3.3.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3.3"><times id="S2.E6.m1.1.1.1.1.4.3.3.3.1.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3.3.1"></times><apply id="S2.E6.m1.1.1.1.1.4.3.3.3.2.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3.3.2"><csymbol cd="ambiguous" id="S2.E6.m1.1.1.1.1.4.3.3.3.2.1.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3.3.2">subscript</csymbol><ci id="S2.E6.m1.1.1.1.1.4.3.3.3.2.2.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3.3.2.2">𝛽</ci><ci id="S2.E6.m1.1.1.1.1.4.3.3.3.2.3.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3.3.2.3">𝑡</ci></apply><ci id="S2.E6.m1.1.1.1.1.4.3.3.3.3a.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3.3.3"><mtext class="ltx_mathvariant_bold" id="S2.E6.m1.1.1.1.1.4.3.3.3.3.cmml" xref="S2.E6.m1.1.1.1.1.4.3.3.3.3">I</mtext></ci></apply></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E6.m1.1c">q(x_{t}|x_{t-1})\coloneq\mathcal{N}(x_{t};\sqrt{1-\beta_{t}}x_{t-1},\beta_{t}%
\textbf{I}).</annotation><annotation encoding="application/x-llamapun" id="S2.E6.m1.1d">italic_q ( italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT | italic_x start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT ) :- caligraphic_N ( italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ; square-root start_ARG 1 - italic_β start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT end_ARG italic_x start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT , italic_β start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT I ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS4.p3">
<p class="ltx_p" id="S2.SS4.p3.5">where <math alttext="x_{t}" class="ltx_Math" display="inline" id="S2.SS4.p3.1.m1.1"><semantics id="S2.SS4.p3.1.m1.1a"><msub id="S2.SS4.p3.1.m1.1.1" xref="S2.SS4.p3.1.m1.1.1.cmml"><mi id="S2.SS4.p3.1.m1.1.1.2" xref="S2.SS4.p3.1.m1.1.1.2.cmml">x</mi><mi id="S2.SS4.p3.1.m1.1.1.3" xref="S2.SS4.p3.1.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS4.p3.1.m1.1b"><apply id="S2.SS4.p3.1.m1.1.1.cmml" xref="S2.SS4.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p3.1.m1.1.1.1.cmml" xref="S2.SS4.p3.1.m1.1.1">subscript</csymbol><ci id="S2.SS4.p3.1.m1.1.1.2.cmml" xref="S2.SS4.p3.1.m1.1.1.2">𝑥</ci><ci id="S2.SS4.p3.1.m1.1.1.3.cmml" xref="S2.SS4.p3.1.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p3.1.m1.1c">x_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p3.1.m1.1d">italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> represents the data at timestep <math alttext="t" class="ltx_Math" display="inline" id="S2.SS4.p3.2.m2.1"><semantics id="S2.SS4.p3.2.m2.1a"><mi id="S2.SS4.p3.2.m2.1.1" xref="S2.SS4.p3.2.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p3.2.m2.1b"><ci id="S2.SS4.p3.2.m2.1.1.cmml" xref="S2.SS4.p3.2.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p3.2.m2.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p3.2.m2.1d">italic_t</annotation></semantics></math>, <math alttext="\beta_{t}" class="ltx_Math" display="inline" id="S2.SS4.p3.3.m3.1"><semantics id="S2.SS4.p3.3.m3.1a"><msub id="S2.SS4.p3.3.m3.1.1" xref="S2.SS4.p3.3.m3.1.1.cmml"><mi id="S2.SS4.p3.3.m3.1.1.2" xref="S2.SS4.p3.3.m3.1.1.2.cmml">β</mi><mi id="S2.SS4.p3.3.m3.1.1.3" xref="S2.SS4.p3.3.m3.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS4.p3.3.m3.1b"><apply id="S2.SS4.p3.3.m3.1.1.cmml" xref="S2.SS4.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS4.p3.3.m3.1.1.1.cmml" xref="S2.SS4.p3.3.m3.1.1">subscript</csymbol><ci id="S2.SS4.p3.3.m3.1.1.2.cmml" xref="S2.SS4.p3.3.m3.1.1.2">𝛽</ci><ci id="S2.SS4.p3.3.m3.1.1.3.cmml" xref="S2.SS4.p3.3.m3.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p3.3.m3.1c">\beta_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p3.3.m3.1d">italic_β start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> is a variance schedule that controls the amount of noise added at each step, and <math alttext="\mathcal{N(\cdot)}" class="ltx_Math" display="inline" id="S2.SS4.p3.4.m4.1"><semantics id="S2.SS4.p3.4.m4.1a"><mrow id="S2.SS4.p3.4.m4.1.2" xref="S2.SS4.p3.4.m4.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS4.p3.4.m4.1.2.2" xref="S2.SS4.p3.4.m4.1.2.2.cmml">𝒩</mi><mo id="S2.SS4.p3.4.m4.1.2.1" xref="S2.SS4.p3.4.m4.1.2.1.cmml">⁢</mo><mrow id="S2.SS4.p3.4.m4.1.2.3.2" xref="S2.SS4.p3.4.m4.1.2.cmml"><mo id="S2.SS4.p3.4.m4.1.2.3.2.1" stretchy="false" xref="S2.SS4.p3.4.m4.1.2.cmml">(</mo><mo id="S2.SS4.p3.4.m4.1.1" lspace="0em" rspace="0em" xref="S2.SS4.p3.4.m4.1.1.cmml">⋅</mo><mo id="S2.SS4.p3.4.m4.1.2.3.2.2" stretchy="false" xref="S2.SS4.p3.4.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p3.4.m4.1b"><apply id="S2.SS4.p3.4.m4.1.2.cmml" xref="S2.SS4.p3.4.m4.1.2"><times id="S2.SS4.p3.4.m4.1.2.1.cmml" xref="S2.SS4.p3.4.m4.1.2.1"></times><ci id="S2.SS4.p3.4.m4.1.2.2.cmml" xref="S2.SS4.p3.4.m4.1.2.2">𝒩</ci><ci id="S2.SS4.p3.4.m4.1.1.cmml" xref="S2.SS4.p3.4.m4.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p3.4.m4.1c">\mathcal{N(\cdot)}</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p3.4.m4.1d">caligraphic_N ( ⋅ )</annotation></semantics></math> denotes a Gaussian distribution. The reverse distribution, <math alttext="q(x_{t-1}|x_{t})" class="ltx_Math" display="inline" id="S2.SS4.p3.5.m5.1"><semantics id="S2.SS4.p3.5.m5.1a"><mrow id="S2.SS4.p3.5.m5.1.1" xref="S2.SS4.p3.5.m5.1.1.cmml"><mi id="S2.SS4.p3.5.m5.1.1.3" xref="S2.SS4.p3.5.m5.1.1.3.cmml">q</mi><mo id="S2.SS4.p3.5.m5.1.1.2" xref="S2.SS4.p3.5.m5.1.1.2.cmml">⁢</mo><mrow id="S2.SS4.p3.5.m5.1.1.1.1" xref="S2.SS4.p3.5.m5.1.1.1.1.1.cmml"><mo id="S2.SS4.p3.5.m5.1.1.1.1.2" stretchy="false" xref="S2.SS4.p3.5.m5.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS4.p3.5.m5.1.1.1.1.1" xref="S2.SS4.p3.5.m5.1.1.1.1.1.cmml"><msub id="S2.SS4.p3.5.m5.1.1.1.1.1.2" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.cmml"><mi id="S2.SS4.p3.5.m5.1.1.1.1.1.2.2" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.2.cmml">x</mi><mrow id="S2.SS4.p3.5.m5.1.1.1.1.1.2.3" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.cmml"><mi id="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.2" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.2.cmml">t</mi><mo id="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.1" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.1.cmml">−</mo><mn id="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.3" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.3.cmml">1</mn></mrow></msub><mo fence="false" id="S2.SS4.p3.5.m5.1.1.1.1.1.1" xref="S2.SS4.p3.5.m5.1.1.1.1.1.1.cmml">|</mo><msub id="S2.SS4.p3.5.m5.1.1.1.1.1.3" xref="S2.SS4.p3.5.m5.1.1.1.1.1.3.cmml"><mi id="S2.SS4.p3.5.m5.1.1.1.1.1.3.2" xref="S2.SS4.p3.5.m5.1.1.1.1.1.3.2.cmml">x</mi><mi id="S2.SS4.p3.5.m5.1.1.1.1.1.3.3" xref="S2.SS4.p3.5.m5.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S2.SS4.p3.5.m5.1.1.1.1.3" stretchy="false" xref="S2.SS4.p3.5.m5.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p3.5.m5.1b"><apply id="S2.SS4.p3.5.m5.1.1.cmml" xref="S2.SS4.p3.5.m5.1.1"><times id="S2.SS4.p3.5.m5.1.1.2.cmml" xref="S2.SS4.p3.5.m5.1.1.2"></times><ci id="S2.SS4.p3.5.m5.1.1.3.cmml" xref="S2.SS4.p3.5.m5.1.1.3">𝑞</ci><apply id="S2.SS4.p3.5.m5.1.1.1.1.1.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1"><csymbol cd="latexml" id="S2.SS4.p3.5.m5.1.1.1.1.1.1.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.1">conditional</csymbol><apply id="S2.SS4.p3.5.m5.1.1.1.1.1.2.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.SS4.p3.5.m5.1.1.1.1.1.2.1.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2">subscript</csymbol><ci id="S2.SS4.p3.5.m5.1.1.1.1.1.2.2.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.2">𝑥</ci><apply id="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.3"><minus id="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.1.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.1"></minus><ci id="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.2.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.2">𝑡</ci><cn id="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.3.cmml" type="integer" xref="S2.SS4.p3.5.m5.1.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S2.SS4.p3.5.m5.1.1.1.1.1.3.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.SS4.p3.5.m5.1.1.1.1.1.3.1.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.3">subscript</csymbol><ci id="S2.SS4.p3.5.m5.1.1.1.1.1.3.2.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.3.2">𝑥</ci><ci id="S2.SS4.p3.5.m5.1.1.1.1.1.3.3.cmml" xref="S2.SS4.p3.5.m5.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p3.5.m5.1c">q(x_{t-1}|x_{t})</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p3.5.m5.1d">italic_q ( italic_x start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT | italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT )</annotation></semantics></math>, depends upon the entire data distribution and so is approximated in a network using:</p>
</div>
<div class="ltx_para" id="S2.SS4.p4">
<table class="ltx_equation ltx_eqn_table" id="S2.E7">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="p_{\theta}(x_{t-1}\mid x_{t}):=\mathcal{N}(x_{t-1};\mu_{\theta}(x_{t},t),%
\Sigma_{\theta}(x_{t},t))," class="ltx_Math" display="block" id="S2.E7.m1.3"><semantics id="S2.E7.m1.3a"><mrow id="S2.E7.m1.3.3.1" xref="S2.E7.m1.3.3.1.1.cmml"><mrow id="S2.E7.m1.3.3.1.1" xref="S2.E7.m1.3.3.1.1.cmml"><mrow id="S2.E7.m1.3.3.1.1.1" xref="S2.E7.m1.3.3.1.1.1.cmml"><msub id="S2.E7.m1.3.3.1.1.1.3" xref="S2.E7.m1.3.3.1.1.1.3.cmml"><mi id="S2.E7.m1.3.3.1.1.1.3.2" xref="S2.E7.m1.3.3.1.1.1.3.2.cmml">p</mi><mi id="S2.E7.m1.3.3.1.1.1.3.3" xref="S2.E7.m1.3.3.1.1.1.3.3.cmml">θ</mi></msub><mo id="S2.E7.m1.3.3.1.1.1.2" xref="S2.E7.m1.3.3.1.1.1.2.cmml">⁢</mo><mrow id="S2.E7.m1.3.3.1.1.1.1.1" xref="S2.E7.m1.3.3.1.1.1.1.1.1.cmml"><mo id="S2.E7.m1.3.3.1.1.1.1.1.2" stretchy="false" xref="S2.E7.m1.3.3.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E7.m1.3.3.1.1.1.1.1.1" xref="S2.E7.m1.3.3.1.1.1.1.1.1.cmml"><msub id="S2.E7.m1.3.3.1.1.1.1.1.1.2" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.cmml"><mi id="S2.E7.m1.3.3.1.1.1.1.1.1.2.2" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.2.cmml">x</mi><mrow id="S2.E7.m1.3.3.1.1.1.1.1.1.2.3" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.cmml"><mi id="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.2" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.2.cmml">t</mi><mo id="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.1" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.1.cmml">−</mo><mn id="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.3" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.3.cmml">1</mn></mrow></msub><mo id="S2.E7.m1.3.3.1.1.1.1.1.1.1" xref="S2.E7.m1.3.3.1.1.1.1.1.1.1.cmml">∣</mo><msub id="S2.E7.m1.3.3.1.1.1.1.1.1.3" xref="S2.E7.m1.3.3.1.1.1.1.1.1.3.cmml"><mi id="S2.E7.m1.3.3.1.1.1.1.1.1.3.2" xref="S2.E7.m1.3.3.1.1.1.1.1.1.3.2.cmml">x</mi><mi id="S2.E7.m1.3.3.1.1.1.1.1.1.3.3" xref="S2.E7.m1.3.3.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo id="S2.E7.m1.3.3.1.1.1.1.1.3" rspace="0.278em" stretchy="false" xref="S2.E7.m1.3.3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E7.m1.3.3.1.1.5" rspace="0.278em" xref="S2.E7.m1.3.3.1.1.5.cmml">:=</mo><mrow id="S2.E7.m1.3.3.1.1.4" xref="S2.E7.m1.3.3.1.1.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E7.m1.3.3.1.1.4.5" xref="S2.E7.m1.3.3.1.1.4.5.cmml">𝒩</mi><mo id="S2.E7.m1.3.3.1.1.4.4" xref="S2.E7.m1.3.3.1.1.4.4.cmml">⁢</mo><mrow id="S2.E7.m1.3.3.1.1.4.3.3" xref="S2.E7.m1.3.3.1.1.4.3.4.cmml"><mo id="S2.E7.m1.3.3.1.1.4.3.3.4" stretchy="false" xref="S2.E7.m1.3.3.1.1.4.3.4.cmml">(</mo><msub id="S2.E7.m1.3.3.1.1.2.1.1.1" xref="S2.E7.m1.3.3.1.1.2.1.1.1.cmml"><mi id="S2.E7.m1.3.3.1.1.2.1.1.1.2" xref="S2.E7.m1.3.3.1.1.2.1.1.1.2.cmml">x</mi><mrow id="S2.E7.m1.3.3.1.1.2.1.1.1.3" xref="S2.E7.m1.3.3.1.1.2.1.1.1.3.cmml"><mi id="S2.E7.m1.3.3.1.1.2.1.1.1.3.2" xref="S2.E7.m1.3.3.1.1.2.1.1.1.3.2.cmml">t</mi><mo id="S2.E7.m1.3.3.1.1.2.1.1.1.3.1" xref="S2.E7.m1.3.3.1.1.2.1.1.1.3.1.cmml">−</mo><mn id="S2.E7.m1.3.3.1.1.2.1.1.1.3.3" xref="S2.E7.m1.3.3.1.1.2.1.1.1.3.3.cmml">1</mn></mrow></msub><mo id="S2.E7.m1.3.3.1.1.4.3.3.5" xref="S2.E7.m1.3.3.1.1.4.3.4.cmml">;</mo><mrow id="S2.E7.m1.3.3.1.1.3.2.2.2" xref="S2.E7.m1.3.3.1.1.3.2.2.2.cmml"><msub id="S2.E7.m1.3.3.1.1.3.2.2.2.3" xref="S2.E7.m1.3.3.1.1.3.2.2.2.3.cmml"><mi id="S2.E7.m1.3.3.1.1.3.2.2.2.3.2" xref="S2.E7.m1.3.3.1.1.3.2.2.2.3.2.cmml">μ</mi><mi id="S2.E7.m1.3.3.1.1.3.2.2.2.3.3" xref="S2.E7.m1.3.3.1.1.3.2.2.2.3.3.cmml">θ</mi></msub><mo id="S2.E7.m1.3.3.1.1.3.2.2.2.2" xref="S2.E7.m1.3.3.1.1.3.2.2.2.2.cmml">⁢</mo><mrow id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.2.cmml"><mo id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.2" stretchy="false" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.2.cmml">(</mo><msub id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.cmml"><mi id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.2" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.2.cmml">x</mi><mi id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.3" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.3.cmml">t</mi></msub><mo id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.3" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.2.cmml">,</mo><mi id="S2.E7.m1.1.1" xref="S2.E7.m1.1.1.cmml">t</mi><mo id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.4" stretchy="false" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E7.m1.3.3.1.1.4.3.3.6" xref="S2.E7.m1.3.3.1.1.4.3.4.cmml">,</mo><mrow id="S2.E7.m1.3.3.1.1.4.3.3.3" xref="S2.E7.m1.3.3.1.1.4.3.3.3.cmml"><msub id="S2.E7.m1.3.3.1.1.4.3.3.3.3" xref="S2.E7.m1.3.3.1.1.4.3.3.3.3.cmml"><mi id="S2.E7.m1.3.3.1.1.4.3.3.3.3.2" mathvariant="normal" xref="S2.E7.m1.3.3.1.1.4.3.3.3.3.2.cmml">Σ</mi><mi id="S2.E7.m1.3.3.1.1.4.3.3.3.3.3" xref="S2.E7.m1.3.3.1.1.4.3.3.3.3.3.cmml">θ</mi></msub><mo id="S2.E7.m1.3.3.1.1.4.3.3.3.2" xref="S2.E7.m1.3.3.1.1.4.3.3.3.2.cmml">⁢</mo><mrow id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.2.cmml"><mo id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.2" stretchy="false" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.2.cmml">(</mo><msub id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.cmml"><mi id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.2" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.2.cmml">x</mi><mi id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.3" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.3.cmml">t</mi></msub><mo id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.3" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.2.cmml">,</mo><mi id="S2.E7.m1.2.2" xref="S2.E7.m1.2.2.cmml">t</mi><mo id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.4" stretchy="false" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E7.m1.3.3.1.1.4.3.3.7" stretchy="false" xref="S2.E7.m1.3.3.1.1.4.3.4.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E7.m1.3.3.1.2" xref="S2.E7.m1.3.3.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E7.m1.3b"><apply id="S2.E7.m1.3.3.1.1.cmml" xref="S2.E7.m1.3.3.1"><csymbol cd="latexml" id="S2.E7.m1.3.3.1.1.5.cmml" xref="S2.E7.m1.3.3.1.1.5">assign</csymbol><apply id="S2.E7.m1.3.3.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.1"><times id="S2.E7.m1.3.3.1.1.1.2.cmml" xref="S2.E7.m1.3.3.1.1.1.2"></times><apply id="S2.E7.m1.3.3.1.1.1.3.cmml" xref="S2.E7.m1.3.3.1.1.1.3"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.1.3.1.cmml" xref="S2.E7.m1.3.3.1.1.1.3">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.1.3.2.cmml" xref="S2.E7.m1.3.3.1.1.1.3.2">𝑝</ci><ci id="S2.E7.m1.3.3.1.1.1.3.3.cmml" xref="S2.E7.m1.3.3.1.1.1.3.3">𝜃</ci></apply><apply id="S2.E7.m1.3.3.1.1.1.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1"><csymbol cd="latexml" id="S2.E7.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.1">conditional</csymbol><apply id="S2.E7.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.1.1.1.1.2.1.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.1.1.1.1.2.2.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.2">𝑥</ci><apply id="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.3"><minus id="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.1.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.1"></minus><ci id="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.2.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.2">𝑡</ci><cn id="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.3.cmml" type="integer" xref="S2.E7.m1.3.3.1.1.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S2.E7.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.1.1.1.1.3.1.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.1.1.1.1.3.2.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.3.2">𝑥</ci><ci id="S2.E7.m1.3.3.1.1.1.1.1.1.3.3.cmml" xref="S2.E7.m1.3.3.1.1.1.1.1.1.3.3">𝑡</ci></apply></apply></apply><apply id="S2.E7.m1.3.3.1.1.4.cmml" xref="S2.E7.m1.3.3.1.1.4"><times id="S2.E7.m1.3.3.1.1.4.4.cmml" xref="S2.E7.m1.3.3.1.1.4.4"></times><ci id="S2.E7.m1.3.3.1.1.4.5.cmml" xref="S2.E7.m1.3.3.1.1.4.5">𝒩</ci><list id="S2.E7.m1.3.3.1.1.4.3.4.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3"><apply id="S2.E7.m1.3.3.1.1.2.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.2.1.1.1"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.2.1.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.2.1.1.1">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.2.1.1.1.2.cmml" xref="S2.E7.m1.3.3.1.1.2.1.1.1.2">𝑥</ci><apply id="S2.E7.m1.3.3.1.1.2.1.1.1.3.cmml" xref="S2.E7.m1.3.3.1.1.2.1.1.1.3"><minus id="S2.E7.m1.3.3.1.1.2.1.1.1.3.1.cmml" xref="S2.E7.m1.3.3.1.1.2.1.1.1.3.1"></minus><ci id="S2.E7.m1.3.3.1.1.2.1.1.1.3.2.cmml" xref="S2.E7.m1.3.3.1.1.2.1.1.1.3.2">𝑡</ci><cn id="S2.E7.m1.3.3.1.1.2.1.1.1.3.3.cmml" type="integer" xref="S2.E7.m1.3.3.1.1.2.1.1.1.3.3">1</cn></apply></apply><apply id="S2.E7.m1.3.3.1.1.3.2.2.2.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2"><times id="S2.E7.m1.3.3.1.1.3.2.2.2.2.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.2"></times><apply id="S2.E7.m1.3.3.1.1.3.2.2.2.3.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.3"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.3.2.2.2.3.1.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.3">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.3.2.2.2.3.2.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.3.2">𝜇</ci><ci id="S2.E7.m1.3.3.1.1.3.2.2.2.3.3.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.3.3">𝜃</ci></apply><interval closure="open" id="S2.E7.m1.3.3.1.1.3.2.2.2.1.2.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.1"><apply id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.2.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.2">𝑥</ci><ci id="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.3.cmml" xref="S2.E7.m1.3.3.1.1.3.2.2.2.1.1.1.3">𝑡</ci></apply><ci id="S2.E7.m1.1.1.cmml" xref="S2.E7.m1.1.1">𝑡</ci></interval></apply><apply id="S2.E7.m1.3.3.1.1.4.3.3.3.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3"><times id="S2.E7.m1.3.3.1.1.4.3.3.3.2.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.2"></times><apply id="S2.E7.m1.3.3.1.1.4.3.3.3.3.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.3"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.4.3.3.3.3.1.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.3">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.4.3.3.3.3.2.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.3.2">Σ</ci><ci id="S2.E7.m1.3.3.1.1.4.3.3.3.3.3.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.3.3">𝜃</ci></apply><interval closure="open" id="S2.E7.m1.3.3.1.1.4.3.3.3.1.2.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.1"><apply id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1"><csymbol cd="ambiguous" id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.1.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1">subscript</csymbol><ci id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.2.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.2">𝑥</ci><ci id="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.3.cmml" xref="S2.E7.m1.3.3.1.1.4.3.3.3.1.1.1.3">𝑡</ci></apply><ci id="S2.E7.m1.2.2.cmml" xref="S2.E7.m1.2.2">𝑡</ci></interval></apply></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E7.m1.3c">p_{\theta}(x_{t-1}\mid x_{t}):=\mathcal{N}(x_{t-1};\mu_{\theta}(x_{t},t),%
\Sigma_{\theta}(x_{t},t)),</annotation><annotation encoding="application/x-llamapun" id="S2.E7.m1.3d">italic_p start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_x start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT ∣ italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ) := caligraphic_N ( italic_x start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT ; italic_μ start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_t ) , roman_Σ start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( italic_x start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT , italic_t ) ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS4.p4.1">where <math alttext="\theta" class="ltx_Math" display="inline" id="S2.SS4.p4.1.m1.1"><semantics id="S2.SS4.p4.1.m1.1a"><mi id="S2.SS4.p4.1.m1.1.1" xref="S2.SS4.p4.1.m1.1.1.cmml">θ</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p4.1.m1.1b"><ci id="S2.SS4.p4.1.m1.1.1.cmml" xref="S2.SS4.p4.1.m1.1.1">𝜃</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p4.1.m1.1c">\theta</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p4.1.m1.1d">italic_θ</annotation></semantics></math> represents the learnable parameters of the model.</p>
</div>
<div class="ltx_para" id="S2.SS4.p5">
<p class="ltx_p" id="S2.SS4.p5.2">The probability flow ordinary differential equation (ODE) is a continuous-time formulation of the diffusion process. This ODE continuously adjusts the noise level of the input when moving forward (increasing noise) or backward (decreasing noise) in time. To fully specify the probability flow ODE, a noise schedule function, <math alttext="\sigma(t)" class="ltx_Math" display="inline" id="S2.SS4.p5.1.m1.1"><semantics id="S2.SS4.p5.1.m1.1a"><mrow id="S2.SS4.p5.1.m1.1.2" xref="S2.SS4.p5.1.m1.1.2.cmml"><mi id="S2.SS4.p5.1.m1.1.2.2" xref="S2.SS4.p5.1.m1.1.2.2.cmml">σ</mi><mo id="S2.SS4.p5.1.m1.1.2.1" xref="S2.SS4.p5.1.m1.1.2.1.cmml">⁢</mo><mrow id="S2.SS4.p5.1.m1.1.2.3.2" xref="S2.SS4.p5.1.m1.1.2.cmml"><mo id="S2.SS4.p5.1.m1.1.2.3.2.1" stretchy="false" xref="S2.SS4.p5.1.m1.1.2.cmml">(</mo><mi id="S2.SS4.p5.1.m1.1.1" xref="S2.SS4.p5.1.m1.1.1.cmml">t</mi><mo id="S2.SS4.p5.1.m1.1.2.3.2.2" stretchy="false" xref="S2.SS4.p5.1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p5.1.m1.1b"><apply id="S2.SS4.p5.1.m1.1.2.cmml" xref="S2.SS4.p5.1.m1.1.2"><times id="S2.SS4.p5.1.m1.1.2.1.cmml" xref="S2.SS4.p5.1.m1.1.2.1"></times><ci id="S2.SS4.p5.1.m1.1.2.2.cmml" xref="S2.SS4.p5.1.m1.1.2.2">𝜎</ci><ci id="S2.SS4.p5.1.m1.1.1.cmml" xref="S2.SS4.p5.1.m1.1.1">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p5.1.m1.1c">\sigma(t)</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p5.1.m1.1d">italic_σ ( italic_t )</annotation></semantics></math>, that defines the desired noise level at each time point, <math alttext="t" class="ltx_Math" display="inline" id="S2.SS4.p5.2.m2.1"><semantics id="S2.SS4.p5.2.m2.1a"><mi id="S2.SS4.p5.2.m2.1.1" xref="S2.SS4.p5.2.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p5.2.m2.1b"><ci id="S2.SS4.p5.2.m2.1.1.cmml" xref="S2.SS4.p5.2.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p5.2.m2.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p5.2.m2.1d">italic_t</annotation></semantics></math>, must be chosen. This noise schedule determines how the noise is gradually added or removed from the image during the diffusion process. The differential step in the diffusion process can be given by</p>
</div>
<div class="ltx_para" id="S2.SS4.p6">
<table class="ltx_equation ltx_eqn_table" id="S2.E8">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="d\boldsymbol{x}=-\dot{\sigma}(t)\sigma(t)\nabla_{x}\log p(\boldsymbol{x};%
\sigma(t))\,dt," class="ltx_Math" display="block" id="S2.E8.m1.5"><semantics id="S2.E8.m1.5a"><mrow id="S2.E8.m1.5.5.1" xref="S2.E8.m1.5.5.1.1.cmml"><mrow id="S2.E8.m1.5.5.1.1" xref="S2.E8.m1.5.5.1.1.cmml"><mrow id="S2.E8.m1.5.5.1.1.3" xref="S2.E8.m1.5.5.1.1.3.cmml"><mi id="S2.E8.m1.5.5.1.1.3.2" xref="S2.E8.m1.5.5.1.1.3.2.cmml">d</mi><mo id="S2.E8.m1.5.5.1.1.3.1" xref="S2.E8.m1.5.5.1.1.3.1.cmml">⁢</mo><mi id="S2.E8.m1.5.5.1.1.3.3" xref="S2.E8.m1.5.5.1.1.3.3.cmml">𝒙</mi></mrow><mo id="S2.E8.m1.5.5.1.1.2" xref="S2.E8.m1.5.5.1.1.2.cmml">=</mo><mrow id="S2.E8.m1.5.5.1.1.1" xref="S2.E8.m1.5.5.1.1.1.cmml"><mo id="S2.E8.m1.5.5.1.1.1a" xref="S2.E8.m1.5.5.1.1.1.cmml">−</mo><mrow id="S2.E8.m1.5.5.1.1.1.1" xref="S2.E8.m1.5.5.1.1.1.1.cmml"><mover accent="true" id="S2.E8.m1.5.5.1.1.1.1.3" xref="S2.E8.m1.5.5.1.1.1.1.3.cmml"><mi id="S2.E8.m1.5.5.1.1.1.1.3.2" xref="S2.E8.m1.5.5.1.1.1.1.3.2.cmml">σ</mi><mo id="S2.E8.m1.5.5.1.1.1.1.3.1" xref="S2.E8.m1.5.5.1.1.1.1.3.1.cmml">˙</mo></mover><mo id="S2.E8.m1.5.5.1.1.1.1.2" xref="S2.E8.m1.5.5.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E8.m1.5.5.1.1.1.1.4.2" xref="S2.E8.m1.5.5.1.1.1.1.cmml"><mo id="S2.E8.m1.5.5.1.1.1.1.4.2.1" stretchy="false" xref="S2.E8.m1.5.5.1.1.1.1.cmml">(</mo><mi id="S2.E8.m1.1.1" xref="S2.E8.m1.1.1.cmml">t</mi><mo id="S2.E8.m1.5.5.1.1.1.1.4.2.2" stretchy="false" xref="S2.E8.m1.5.5.1.1.1.1.cmml">)</mo></mrow><mo id="S2.E8.m1.5.5.1.1.1.1.2a" xref="S2.E8.m1.5.5.1.1.1.1.2.cmml">⁢</mo><mi id="S2.E8.m1.5.5.1.1.1.1.5" xref="S2.E8.m1.5.5.1.1.1.1.5.cmml">σ</mi><mo id="S2.E8.m1.5.5.1.1.1.1.2b" xref="S2.E8.m1.5.5.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E8.m1.5.5.1.1.1.1.6.2" xref="S2.E8.m1.5.5.1.1.1.1.cmml"><mo id="S2.E8.m1.5.5.1.1.1.1.6.2.1" stretchy="false" xref="S2.E8.m1.5.5.1.1.1.1.cmml">(</mo><mi id="S2.E8.m1.2.2" xref="S2.E8.m1.2.2.cmml">t</mi><mo id="S2.E8.m1.5.5.1.1.1.1.6.2.2" stretchy="false" xref="S2.E8.m1.5.5.1.1.1.1.cmml">)</mo></mrow><mo id="S2.E8.m1.5.5.1.1.1.1.2c" lspace="0.167em" xref="S2.E8.m1.5.5.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E8.m1.5.5.1.1.1.1.7" xref="S2.E8.m1.5.5.1.1.1.1.7.cmml"><mrow id="S2.E8.m1.5.5.1.1.1.1.7.1" xref="S2.E8.m1.5.5.1.1.1.1.7.1.cmml"><msub id="S2.E8.m1.5.5.1.1.1.1.7.1.1" xref="S2.E8.m1.5.5.1.1.1.1.7.1.1.cmml"><mo id="S2.E8.m1.5.5.1.1.1.1.7.1.1.2" rspace="0.167em" xref="S2.E8.m1.5.5.1.1.1.1.7.1.1.2.cmml">∇</mo><mi id="S2.E8.m1.5.5.1.1.1.1.7.1.1.3" xref="S2.E8.m1.5.5.1.1.1.1.7.1.1.3.cmml">x</mi></msub><mi id="S2.E8.m1.5.5.1.1.1.1.7.1.2" xref="S2.E8.m1.5.5.1.1.1.1.7.1.2.cmml">log</mi></mrow><mo id="S2.E8.m1.5.5.1.1.1.1.7a" lspace="0.167em" xref="S2.E8.m1.5.5.1.1.1.1.7.cmml">⁡</mo><mi id="S2.E8.m1.5.5.1.1.1.1.7.2" xref="S2.E8.m1.5.5.1.1.1.1.7.2.cmml">p</mi></mrow><mo id="S2.E8.m1.5.5.1.1.1.1.2d" xref="S2.E8.m1.5.5.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E8.m1.5.5.1.1.1.1.1.1" xref="S2.E8.m1.5.5.1.1.1.1.1.2.cmml"><mo id="S2.E8.m1.5.5.1.1.1.1.1.1.2" stretchy="false" xref="S2.E8.m1.5.5.1.1.1.1.1.2.cmml">(</mo><mi id="S2.E8.m1.4.4" xref="S2.E8.m1.4.4.cmml">𝒙</mi><mo id="S2.E8.m1.5.5.1.1.1.1.1.1.3" xref="S2.E8.m1.5.5.1.1.1.1.1.2.cmml">;</mo><mrow id="S2.E8.m1.5.5.1.1.1.1.1.1.1" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1.cmml"><mi id="S2.E8.m1.5.5.1.1.1.1.1.1.1.2" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1.2.cmml">σ</mi><mo id="S2.E8.m1.5.5.1.1.1.1.1.1.1.1" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1.1.cmml">⁢</mo><mrow id="S2.E8.m1.5.5.1.1.1.1.1.1.1.3.2" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1.cmml"><mo id="S2.E8.m1.5.5.1.1.1.1.1.1.1.3.2.1" stretchy="false" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1.cmml">(</mo><mi id="S2.E8.m1.3.3" xref="S2.E8.m1.3.3.cmml">t</mi><mo id="S2.E8.m1.5.5.1.1.1.1.1.1.1.3.2.2" stretchy="false" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E8.m1.5.5.1.1.1.1.1.1.4" stretchy="false" xref="S2.E8.m1.5.5.1.1.1.1.1.2.cmml">)</mo></mrow><mo id="S2.E8.m1.5.5.1.1.1.1.2e" lspace="0.170em" xref="S2.E8.m1.5.5.1.1.1.1.2.cmml">⁢</mo><mi id="S2.E8.m1.5.5.1.1.1.1.8" xref="S2.E8.m1.5.5.1.1.1.1.8.cmml">d</mi><mo id="S2.E8.m1.5.5.1.1.1.1.2f" xref="S2.E8.m1.5.5.1.1.1.1.2.cmml">⁢</mo><mi id="S2.E8.m1.5.5.1.1.1.1.9" xref="S2.E8.m1.5.5.1.1.1.1.9.cmml">t</mi></mrow></mrow></mrow><mo id="S2.E8.m1.5.5.1.2" xref="S2.E8.m1.5.5.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E8.m1.5b"><apply id="S2.E8.m1.5.5.1.1.cmml" xref="S2.E8.m1.5.5.1"><eq id="S2.E8.m1.5.5.1.1.2.cmml" xref="S2.E8.m1.5.5.1.1.2"></eq><apply id="S2.E8.m1.5.5.1.1.3.cmml" xref="S2.E8.m1.5.5.1.1.3"><times id="S2.E8.m1.5.5.1.1.3.1.cmml" xref="S2.E8.m1.5.5.1.1.3.1"></times><ci id="S2.E8.m1.5.5.1.1.3.2.cmml" xref="S2.E8.m1.5.5.1.1.3.2">𝑑</ci><ci id="S2.E8.m1.5.5.1.1.3.3.cmml" xref="S2.E8.m1.5.5.1.1.3.3">𝒙</ci></apply><apply id="S2.E8.m1.5.5.1.1.1.cmml" xref="S2.E8.m1.5.5.1.1.1"><minus id="S2.E8.m1.5.5.1.1.1.2.cmml" xref="S2.E8.m1.5.5.1.1.1"></minus><apply id="S2.E8.m1.5.5.1.1.1.1.cmml" xref="S2.E8.m1.5.5.1.1.1.1"><times id="S2.E8.m1.5.5.1.1.1.1.2.cmml" xref="S2.E8.m1.5.5.1.1.1.1.2"></times><apply id="S2.E8.m1.5.5.1.1.1.1.3.cmml" xref="S2.E8.m1.5.5.1.1.1.1.3"><ci id="S2.E8.m1.5.5.1.1.1.1.3.1.cmml" xref="S2.E8.m1.5.5.1.1.1.1.3.1">˙</ci><ci id="S2.E8.m1.5.5.1.1.1.1.3.2.cmml" xref="S2.E8.m1.5.5.1.1.1.1.3.2">𝜎</ci></apply><ci id="S2.E8.m1.1.1.cmml" xref="S2.E8.m1.1.1">𝑡</ci><ci id="S2.E8.m1.5.5.1.1.1.1.5.cmml" xref="S2.E8.m1.5.5.1.1.1.1.5">𝜎</ci><ci id="S2.E8.m1.2.2.cmml" xref="S2.E8.m1.2.2">𝑡</ci><apply id="S2.E8.m1.5.5.1.1.1.1.7.cmml" xref="S2.E8.m1.5.5.1.1.1.1.7"><apply id="S2.E8.m1.5.5.1.1.1.1.7.1.cmml" xref="S2.E8.m1.5.5.1.1.1.1.7.1"><apply id="S2.E8.m1.5.5.1.1.1.1.7.1.1.cmml" xref="S2.E8.m1.5.5.1.1.1.1.7.1.1"><csymbol cd="ambiguous" id="S2.E8.m1.5.5.1.1.1.1.7.1.1.1.cmml" xref="S2.E8.m1.5.5.1.1.1.1.7.1.1">subscript</csymbol><ci id="S2.E8.m1.5.5.1.1.1.1.7.1.1.2.cmml" xref="S2.E8.m1.5.5.1.1.1.1.7.1.1.2">∇</ci><ci id="S2.E8.m1.5.5.1.1.1.1.7.1.1.3.cmml" xref="S2.E8.m1.5.5.1.1.1.1.7.1.1.3">𝑥</ci></apply><log id="S2.E8.m1.5.5.1.1.1.1.7.1.2.cmml" xref="S2.E8.m1.5.5.1.1.1.1.7.1.2"></log></apply><ci id="S2.E8.m1.5.5.1.1.1.1.7.2.cmml" xref="S2.E8.m1.5.5.1.1.1.1.7.2">𝑝</ci></apply><list id="S2.E8.m1.5.5.1.1.1.1.1.2.cmml" xref="S2.E8.m1.5.5.1.1.1.1.1.1"><ci id="S2.E8.m1.4.4.cmml" xref="S2.E8.m1.4.4">𝒙</ci><apply id="S2.E8.m1.5.5.1.1.1.1.1.1.1.cmml" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1"><times id="S2.E8.m1.5.5.1.1.1.1.1.1.1.1.cmml" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1.1"></times><ci id="S2.E8.m1.5.5.1.1.1.1.1.1.1.2.cmml" xref="S2.E8.m1.5.5.1.1.1.1.1.1.1.2">𝜎</ci><ci id="S2.E8.m1.3.3.cmml" xref="S2.E8.m1.3.3">𝑡</ci></apply></list><ci id="S2.E8.m1.5.5.1.1.1.1.8.cmml" xref="S2.E8.m1.5.5.1.1.1.1.8">𝑑</ci><ci id="S2.E8.m1.5.5.1.1.1.1.9.cmml" xref="S2.E8.m1.5.5.1.1.1.1.9">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E8.m1.5c">d\boldsymbol{x}=-\dot{\sigma}(t)\sigma(t)\nabla_{x}\log p(\boldsymbol{x};%
\sigma(t))\,dt,</annotation><annotation encoding="application/x-llamapun" id="S2.E8.m1.5d">italic_d bold_italic_x = - over˙ start_ARG italic_σ end_ARG ( italic_t ) italic_σ ( italic_t ) ∇ start_POSTSUBSCRIPT italic_x end_POSTSUBSCRIPT roman_log italic_p ( bold_italic_x ; italic_σ ( italic_t ) ) italic_d italic_t ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS4.p7">
<p class="ltx_p" id="S2.SS4.p7.3">where <math alttext="\log p(\boldsymbol{x};\sigma)" class="ltx_Math" display="inline" id="S2.SS4.p7.1.m1.2"><semantics id="S2.SS4.p7.1.m1.2a"><mrow id="S2.SS4.p7.1.m1.2.3" xref="S2.SS4.p7.1.m1.2.3.cmml"><mrow id="S2.SS4.p7.1.m1.2.3.2" xref="S2.SS4.p7.1.m1.2.3.2.cmml"><mi id="S2.SS4.p7.1.m1.2.3.2.1" xref="S2.SS4.p7.1.m1.2.3.2.1.cmml">log</mi><mo id="S2.SS4.p7.1.m1.2.3.2a" lspace="0.167em" xref="S2.SS4.p7.1.m1.2.3.2.cmml">⁡</mo><mi id="S2.SS4.p7.1.m1.2.3.2.2" xref="S2.SS4.p7.1.m1.2.3.2.2.cmml">p</mi></mrow><mo id="S2.SS4.p7.1.m1.2.3.1" xref="S2.SS4.p7.1.m1.2.3.1.cmml">⁢</mo><mrow id="S2.SS4.p7.1.m1.2.3.3.2" xref="S2.SS4.p7.1.m1.2.3.3.1.cmml"><mo id="S2.SS4.p7.1.m1.2.3.3.2.1" stretchy="false" xref="S2.SS4.p7.1.m1.2.3.3.1.cmml">(</mo><mi id="S2.SS4.p7.1.m1.1.1" xref="S2.SS4.p7.1.m1.1.1.cmml">𝒙</mi><mo id="S2.SS4.p7.1.m1.2.3.3.2.2" xref="S2.SS4.p7.1.m1.2.3.3.1.cmml">;</mo><mi id="S2.SS4.p7.1.m1.2.2" xref="S2.SS4.p7.1.m1.2.2.cmml">σ</mi><mo id="S2.SS4.p7.1.m1.2.3.3.2.3" stretchy="false" xref="S2.SS4.p7.1.m1.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p7.1.m1.2b"><apply id="S2.SS4.p7.1.m1.2.3.cmml" xref="S2.SS4.p7.1.m1.2.3"><times id="S2.SS4.p7.1.m1.2.3.1.cmml" xref="S2.SS4.p7.1.m1.2.3.1"></times><apply id="S2.SS4.p7.1.m1.2.3.2.cmml" xref="S2.SS4.p7.1.m1.2.3.2"><log id="S2.SS4.p7.1.m1.2.3.2.1.cmml" xref="S2.SS4.p7.1.m1.2.3.2.1"></log><ci id="S2.SS4.p7.1.m1.2.3.2.2.cmml" xref="S2.SS4.p7.1.m1.2.3.2.2">𝑝</ci></apply><list id="S2.SS4.p7.1.m1.2.3.3.1.cmml" xref="S2.SS4.p7.1.m1.2.3.3.2"><ci id="S2.SS4.p7.1.m1.1.1.cmml" xref="S2.SS4.p7.1.m1.1.1">𝒙</ci><ci id="S2.SS4.p7.1.m1.2.2.cmml" xref="S2.SS4.p7.1.m1.2.2">𝜎</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p7.1.m1.2c">\log p(\boldsymbol{x};\sigma)</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p7.1.m1.2d">roman_log italic_p ( bold_italic_x ; italic_σ )</annotation></semantics></math> is defined as the score function <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib41" title="">41</a>]</cite>, a vector gradient towards a higher density of data for a given noise level. The diffusion network can be regarded as a denoising function, <math alttext="\mathcal{D}(\boldsymbol{x};\sigma)" class="ltx_Math" display="inline" id="S2.SS4.p7.2.m2.2"><semantics id="S2.SS4.p7.2.m2.2a"><mrow id="S2.SS4.p7.2.m2.2.3" xref="S2.SS4.p7.2.m2.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS4.p7.2.m2.2.3.2" xref="S2.SS4.p7.2.m2.2.3.2.cmml">𝒟</mi><mo id="S2.SS4.p7.2.m2.2.3.1" xref="S2.SS4.p7.2.m2.2.3.1.cmml">⁢</mo><mrow id="S2.SS4.p7.2.m2.2.3.3.2" xref="S2.SS4.p7.2.m2.2.3.3.1.cmml"><mo id="S2.SS4.p7.2.m2.2.3.3.2.1" stretchy="false" xref="S2.SS4.p7.2.m2.2.3.3.1.cmml">(</mo><mi id="S2.SS4.p7.2.m2.1.1" xref="S2.SS4.p7.2.m2.1.1.cmml">𝒙</mi><mo id="S2.SS4.p7.2.m2.2.3.3.2.2" xref="S2.SS4.p7.2.m2.2.3.3.1.cmml">;</mo><mi id="S2.SS4.p7.2.m2.2.2" xref="S2.SS4.p7.2.m2.2.2.cmml">σ</mi><mo id="S2.SS4.p7.2.m2.2.3.3.2.3" stretchy="false" xref="S2.SS4.p7.2.m2.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p7.2.m2.2b"><apply id="S2.SS4.p7.2.m2.2.3.cmml" xref="S2.SS4.p7.2.m2.2.3"><times id="S2.SS4.p7.2.m2.2.3.1.cmml" xref="S2.SS4.p7.2.m2.2.3.1"></times><ci id="S2.SS4.p7.2.m2.2.3.2.cmml" xref="S2.SS4.p7.2.m2.2.3.2">𝒟</ci><list id="S2.SS4.p7.2.m2.2.3.3.1.cmml" xref="S2.SS4.p7.2.m2.2.3.3.2"><ci id="S2.SS4.p7.2.m2.1.1.cmml" xref="S2.SS4.p7.2.m2.1.1">𝒙</ci><ci id="S2.SS4.p7.2.m2.2.2.cmml" xref="S2.SS4.p7.2.m2.2.2">𝜎</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p7.2.m2.2c">\mathcal{D}(\boldsymbol{x};\sigma)</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p7.2.m2.2d">caligraphic_D ( bold_italic_x ; italic_σ )</annotation></semantics></math>, which minimises the expected <math alttext="L_{2}" class="ltx_Math" display="inline" id="S2.SS4.p7.3.m3.1"><semantics id="S2.SS4.p7.3.m3.1a"><msub id="S2.SS4.p7.3.m3.1.1" xref="S2.SS4.p7.3.m3.1.1.cmml"><mi id="S2.SS4.p7.3.m3.1.1.2" xref="S2.SS4.p7.3.m3.1.1.2.cmml">L</mi><mn id="S2.SS4.p7.3.m3.1.1.3" xref="S2.SS4.p7.3.m3.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS4.p7.3.m3.1b"><apply id="S2.SS4.p7.3.m3.1.1.cmml" xref="S2.SS4.p7.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS4.p7.3.m3.1.1.1.cmml" xref="S2.SS4.p7.3.m3.1.1">subscript</csymbol><ci id="S2.SS4.p7.3.m3.1.1.2.cmml" xref="S2.SS4.p7.3.m3.1.1.2">𝐿</ci><cn id="S2.SS4.p7.3.m3.1.1.3.cmml" type="integer" xref="S2.SS4.p7.3.m3.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p7.3.m3.1c">L_{2}</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p7.3.m3.1d">italic_L start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math> norm denoising error, i.e.</p>
</div>
<div class="ltx_para" id="S2.SS4.p8">
<table class="ltx_equation ltx_eqn_table" id="S2.E9">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\min\|\mathcal{D}(\boldsymbol{x+n};\sigma)-\boldsymbol{x}\|^{2}_{2}" class="ltx_Math" display="block" id="S2.E9.m1.2"><semantics id="S2.E9.m1.2a"><mrow id="S2.E9.m1.2.2" xref="S2.E9.m1.2.2.cmml"><mi id="S2.E9.m1.2.2.2" xref="S2.E9.m1.2.2.2.cmml">min</mi><mo id="S2.E9.m1.2.2a" xref="S2.E9.m1.2.2.cmml">⁡</mo><msubsup id="S2.E9.m1.2.2.1" xref="S2.E9.m1.2.2.1.cmml"><mrow id="S2.E9.m1.2.2.1.1.1.1" xref="S2.E9.m1.2.2.1.1.1.2.cmml"><mo id="S2.E9.m1.2.2.1.1.1.1.2" stretchy="false" xref="S2.E9.m1.2.2.1.1.1.2.1.cmml">‖</mo><mrow id="S2.E9.m1.2.2.1.1.1.1.1" xref="S2.E9.m1.2.2.1.1.1.1.1.cmml"><mrow id="S2.E9.m1.2.2.1.1.1.1.1.1" xref="S2.E9.m1.2.2.1.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E9.m1.2.2.1.1.1.1.1.1.3" xref="S2.E9.m1.2.2.1.1.1.1.1.1.3.cmml">𝒟</mi><mo id="S2.E9.m1.2.2.1.1.1.1.1.1.2" xref="S2.E9.m1.2.2.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.2.cmml"><mo id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.2.cmml">(</mo><mrow id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.2" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml">𝒙</mi><mo class="ltx_mathvariant_bold" id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.1" mathvariant="bold" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml">+</mo><mi id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.3" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml">𝒏</mi></mrow><mo id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.2.cmml">;</mo><mi id="S2.E9.m1.1.1" xref="S2.E9.m1.1.1.cmml">σ</mi><mo id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.4" stretchy="false" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E9.m1.2.2.1.1.1.1.1.2" xref="S2.E9.m1.2.2.1.1.1.1.1.2.cmml">−</mo><mi id="S2.E9.m1.2.2.1.1.1.1.1.3" xref="S2.E9.m1.2.2.1.1.1.1.1.3.cmml">𝒙</mi></mrow><mo id="S2.E9.m1.2.2.1.1.1.1.3" stretchy="false" xref="S2.E9.m1.2.2.1.1.1.2.1.cmml">‖</mo></mrow><mn id="S2.E9.m1.2.2.1.3" xref="S2.E9.m1.2.2.1.3.cmml">2</mn><mn id="S2.E9.m1.2.2.1.1.3" xref="S2.E9.m1.2.2.1.1.3.cmml">2</mn></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S2.E9.m1.2b"><apply id="S2.E9.m1.2.2.cmml" xref="S2.E9.m1.2.2"><min id="S2.E9.m1.2.2.2.cmml" xref="S2.E9.m1.2.2.2"></min><apply id="S2.E9.m1.2.2.1.cmml" xref="S2.E9.m1.2.2.1"><csymbol cd="ambiguous" id="S2.E9.m1.2.2.1.2.cmml" xref="S2.E9.m1.2.2.1">subscript</csymbol><apply id="S2.E9.m1.2.2.1.1.cmml" xref="S2.E9.m1.2.2.1"><csymbol cd="ambiguous" id="S2.E9.m1.2.2.1.1.2.cmml" xref="S2.E9.m1.2.2.1">superscript</csymbol><apply id="S2.E9.m1.2.2.1.1.1.2.cmml" xref="S2.E9.m1.2.2.1.1.1.1"><csymbol cd="latexml" id="S2.E9.m1.2.2.1.1.1.2.1.cmml" xref="S2.E9.m1.2.2.1.1.1.1.2">norm</csymbol><apply id="S2.E9.m1.2.2.1.1.1.1.1.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1"><minus id="S2.E9.m1.2.2.1.1.1.1.1.2.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.2"></minus><apply id="S2.E9.m1.2.2.1.1.1.1.1.1.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.1"><times id="S2.E9.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.1.2"></times><ci id="S2.E9.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.1.3">𝒟</ci><list id="S2.E9.m1.2.2.1.1.1.1.1.1.1.2.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1"><apply id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1"><plus id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.1"></plus><ci id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.2">𝒙</ci><ci id="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.1.1.1.1.3">𝒏</ci></apply><ci id="S2.E9.m1.1.1.cmml" xref="S2.E9.m1.1.1">𝜎</ci></list></apply><ci id="S2.E9.m1.2.2.1.1.1.1.1.3.cmml" xref="S2.E9.m1.2.2.1.1.1.1.1.3">𝒙</ci></apply></apply><cn id="S2.E9.m1.2.2.1.1.3.cmml" type="integer" xref="S2.E9.m1.2.2.1.1.3">2</cn></apply><cn id="S2.E9.m1.2.2.1.3.cmml" type="integer" xref="S2.E9.m1.2.2.1.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E9.m1.2c">\min\|\mathcal{D}(\boldsymbol{x+n};\sigma)-\boldsymbol{x}\|^{2}_{2}</annotation><annotation encoding="application/x-llamapun" id="S2.E9.m1.2d">roman_min ∥ caligraphic_D ( bold_italic_x bold_+ bold_italic_n ; italic_σ ) - bold_italic_x ∥ start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(9)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS4.p9">
<p class="ltx_p" id="S2.SS4.p9.2">where <math alttext="\boldsymbol{x}" class="ltx_Math" display="inline" id="S2.SS4.p9.1.m1.1"><semantics id="S2.SS4.p9.1.m1.1a"><mi id="S2.SS4.p9.1.m1.1.1" xref="S2.SS4.p9.1.m1.1.1.cmml">𝒙</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p9.1.m1.1b"><ci id="S2.SS4.p9.1.m1.1.1.cmml" xref="S2.SS4.p9.1.m1.1.1">𝒙</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p9.1.m1.1c">\boldsymbol{x}</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p9.1.m1.1d">bold_italic_x</annotation></semantics></math> is the input image and <span class="ltx_text ltx_markedasmath ltx_font_bold" id="S2.SS4.p9.2.1">n</span> is the added noise. The alternative definition of the score function can be defined as</p>
</div>
<div class="ltx_para" id="S2.SS4.p10">
<table class="ltx_equation ltx_eqn_table" id="S2.E10">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\nabla_{\boldsymbol{x}}\log p(\boldsymbol{x};\sigma)=\frac{(\mathcal{D}(%
\boldsymbol{x};\sigma)-\boldsymbol{x})}{\sigma^{2}}." class="ltx_Math" display="block" id="S2.E10.m1.6"><semantics id="S2.E10.m1.6a"><mrow id="S2.E10.m1.6.6.1" xref="S2.E10.m1.6.6.1.1.cmml"><mrow id="S2.E10.m1.6.6.1.1" xref="S2.E10.m1.6.6.1.1.cmml"><mrow id="S2.E10.m1.6.6.1.1.2" xref="S2.E10.m1.6.6.1.1.2.cmml"><mrow id="S2.E10.m1.6.6.1.1.2.2" xref="S2.E10.m1.6.6.1.1.2.2.cmml"><mrow id="S2.E10.m1.6.6.1.1.2.2.1" xref="S2.E10.m1.6.6.1.1.2.2.1.cmml"><msub id="S2.E10.m1.6.6.1.1.2.2.1.1" xref="S2.E10.m1.6.6.1.1.2.2.1.1.cmml"><mo id="S2.E10.m1.6.6.1.1.2.2.1.1.2" xref="S2.E10.m1.6.6.1.1.2.2.1.1.2.cmml">∇</mo><mi id="S2.E10.m1.6.6.1.1.2.2.1.1.3" xref="S2.E10.m1.6.6.1.1.2.2.1.1.3.cmml">𝒙</mi></msub><mi id="S2.E10.m1.6.6.1.1.2.2.1.2" xref="S2.E10.m1.6.6.1.1.2.2.1.2.cmml">log</mi></mrow><mo id="S2.E10.m1.6.6.1.1.2.2a" lspace="0.167em" xref="S2.E10.m1.6.6.1.1.2.2.cmml">⁡</mo><mi id="S2.E10.m1.6.6.1.1.2.2.2" xref="S2.E10.m1.6.6.1.1.2.2.2.cmml">p</mi></mrow><mo id="S2.E10.m1.6.6.1.1.2.1" xref="S2.E10.m1.6.6.1.1.2.1.cmml">⁢</mo><mrow id="S2.E10.m1.6.6.1.1.2.3.2" xref="S2.E10.m1.6.6.1.1.2.3.1.cmml"><mo id="S2.E10.m1.6.6.1.1.2.3.2.1" stretchy="false" xref="S2.E10.m1.6.6.1.1.2.3.1.cmml">(</mo><mi id="S2.E10.m1.4.4" xref="S2.E10.m1.4.4.cmml">𝒙</mi><mo id="S2.E10.m1.6.6.1.1.2.3.2.2" xref="S2.E10.m1.6.6.1.1.2.3.1.cmml">;</mo><mi id="S2.E10.m1.5.5" xref="S2.E10.m1.5.5.cmml">σ</mi><mo id="S2.E10.m1.6.6.1.1.2.3.2.3" stretchy="false" xref="S2.E10.m1.6.6.1.1.2.3.1.cmml">)</mo></mrow></mrow><mo id="S2.E10.m1.6.6.1.1.1" xref="S2.E10.m1.6.6.1.1.1.cmml">=</mo><mfrac id="S2.E10.m1.3.3" xref="S2.E10.m1.3.3.cmml"><mrow id="S2.E10.m1.3.3.3.3" xref="S2.E10.m1.3.3.3.3.1.cmml"><mo id="S2.E10.m1.3.3.3.3.2" stretchy="false" xref="S2.E10.m1.3.3.3.3.1.cmml">(</mo><mrow id="S2.E10.m1.3.3.3.3.1" xref="S2.E10.m1.3.3.3.3.1.cmml"><mrow id="S2.E10.m1.3.3.3.3.1.2" xref="S2.E10.m1.3.3.3.3.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E10.m1.3.3.3.3.1.2.2" xref="S2.E10.m1.3.3.3.3.1.2.2.cmml">𝒟</mi><mo id="S2.E10.m1.3.3.3.3.1.2.1" xref="S2.E10.m1.3.3.3.3.1.2.1.cmml">⁢</mo><mrow id="S2.E10.m1.3.3.3.3.1.2.3.2" xref="S2.E10.m1.3.3.3.3.1.2.3.1.cmml"><mo id="S2.E10.m1.3.3.3.3.1.2.3.2.1" stretchy="false" xref="S2.E10.m1.3.3.3.3.1.2.3.1.cmml">(</mo><mi id="S2.E10.m1.1.1.1.1" xref="S2.E10.m1.1.1.1.1.cmml">𝒙</mi><mo id="S2.E10.m1.3.3.3.3.1.2.3.2.2" xref="S2.E10.m1.3.3.3.3.1.2.3.1.cmml">;</mo><mi id="S2.E10.m1.2.2.2.2" xref="S2.E10.m1.2.2.2.2.cmml">σ</mi><mo id="S2.E10.m1.3.3.3.3.1.2.3.2.3" stretchy="false" xref="S2.E10.m1.3.3.3.3.1.2.3.1.cmml">)</mo></mrow></mrow><mo id="S2.E10.m1.3.3.3.3.1.1" xref="S2.E10.m1.3.3.3.3.1.1.cmml">−</mo><mi id="S2.E10.m1.3.3.3.3.1.3" xref="S2.E10.m1.3.3.3.3.1.3.cmml">𝒙</mi></mrow><mo id="S2.E10.m1.3.3.3.3.3" stretchy="false" xref="S2.E10.m1.3.3.3.3.1.cmml">)</mo></mrow><msup id="S2.E10.m1.3.3.5" xref="S2.E10.m1.3.3.5.cmml"><mi id="S2.E10.m1.3.3.5.2" xref="S2.E10.m1.3.3.5.2.cmml">σ</mi><mn id="S2.E10.m1.3.3.5.3" xref="S2.E10.m1.3.3.5.3.cmml">2</mn></msup></mfrac></mrow><mo id="S2.E10.m1.6.6.1.2" lspace="0em" xref="S2.E10.m1.6.6.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E10.m1.6b"><apply id="S2.E10.m1.6.6.1.1.cmml" xref="S2.E10.m1.6.6.1"><eq id="S2.E10.m1.6.6.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.1"></eq><apply id="S2.E10.m1.6.6.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.2"><times id="S2.E10.m1.6.6.1.1.2.1.cmml" xref="S2.E10.m1.6.6.1.1.2.1"></times><apply id="S2.E10.m1.6.6.1.1.2.2.cmml" xref="S2.E10.m1.6.6.1.1.2.2"><apply id="S2.E10.m1.6.6.1.1.2.2.1.cmml" xref="S2.E10.m1.6.6.1.1.2.2.1"><apply id="S2.E10.m1.6.6.1.1.2.2.1.1.cmml" xref="S2.E10.m1.6.6.1.1.2.2.1.1"><csymbol cd="ambiguous" id="S2.E10.m1.6.6.1.1.2.2.1.1.1.cmml" xref="S2.E10.m1.6.6.1.1.2.2.1.1">subscript</csymbol><ci id="S2.E10.m1.6.6.1.1.2.2.1.1.2.cmml" xref="S2.E10.m1.6.6.1.1.2.2.1.1.2">∇</ci><ci id="S2.E10.m1.6.6.1.1.2.2.1.1.3.cmml" xref="S2.E10.m1.6.6.1.1.2.2.1.1.3">𝒙</ci></apply><log id="S2.E10.m1.6.6.1.1.2.2.1.2.cmml" xref="S2.E10.m1.6.6.1.1.2.2.1.2"></log></apply><ci id="S2.E10.m1.6.6.1.1.2.2.2.cmml" xref="S2.E10.m1.6.6.1.1.2.2.2">𝑝</ci></apply><list id="S2.E10.m1.6.6.1.1.2.3.1.cmml" xref="S2.E10.m1.6.6.1.1.2.3.2"><ci id="S2.E10.m1.4.4.cmml" xref="S2.E10.m1.4.4">𝒙</ci><ci id="S2.E10.m1.5.5.cmml" xref="S2.E10.m1.5.5">𝜎</ci></list></apply><apply id="S2.E10.m1.3.3.cmml" xref="S2.E10.m1.3.3"><divide id="S2.E10.m1.3.3.4.cmml" xref="S2.E10.m1.3.3"></divide><apply id="S2.E10.m1.3.3.3.3.1.cmml" xref="S2.E10.m1.3.3.3.3"><minus id="S2.E10.m1.3.3.3.3.1.1.cmml" xref="S2.E10.m1.3.3.3.3.1.1"></minus><apply id="S2.E10.m1.3.3.3.3.1.2.cmml" xref="S2.E10.m1.3.3.3.3.1.2"><times id="S2.E10.m1.3.3.3.3.1.2.1.cmml" xref="S2.E10.m1.3.3.3.3.1.2.1"></times><ci id="S2.E10.m1.3.3.3.3.1.2.2.cmml" xref="S2.E10.m1.3.3.3.3.1.2.2">𝒟</ci><list id="S2.E10.m1.3.3.3.3.1.2.3.1.cmml" xref="S2.E10.m1.3.3.3.3.1.2.3.2"><ci id="S2.E10.m1.1.1.1.1.cmml" xref="S2.E10.m1.1.1.1.1">𝒙</ci><ci id="S2.E10.m1.2.2.2.2.cmml" xref="S2.E10.m1.2.2.2.2">𝜎</ci></list></apply><ci id="S2.E10.m1.3.3.3.3.1.3.cmml" xref="S2.E10.m1.3.3.3.3.1.3">𝒙</ci></apply><apply id="S2.E10.m1.3.3.5.cmml" xref="S2.E10.m1.3.3.5"><csymbol cd="ambiguous" id="S2.E10.m1.3.3.5.1.cmml" xref="S2.E10.m1.3.3.5">superscript</csymbol><ci id="S2.E10.m1.3.3.5.2.cmml" xref="S2.E10.m1.3.3.5.2">𝜎</ci><cn id="S2.E10.m1.3.3.5.3.cmml" type="integer" xref="S2.E10.m1.3.3.5.3">2</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E10.m1.6c">\nabla_{\boldsymbol{x}}\log p(\boldsymbol{x};\sigma)=\frac{(\mathcal{D}(%
\boldsymbol{x};\sigma)-\boldsymbol{x})}{\sigma^{2}}.</annotation><annotation encoding="application/x-llamapun" id="S2.E10.m1.6d">∇ start_POSTSUBSCRIPT bold_italic_x end_POSTSUBSCRIPT roman_log italic_p ( bold_italic_x ; italic_σ ) = divide start_ARG ( caligraphic_D ( bold_italic_x ; italic_σ ) - bold_italic_x ) end_ARG start_ARG italic_σ start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT end_ARG .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(10)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS4.p11">
<p class="ltx_p" id="S2.SS4.p11.1">We are strictly concerned with conditional image generation where our conditioning is the corresponding semantic label maps, <math alttext="\Phi" class="ltx_Math" display="inline" id="S2.SS4.p11.1.m1.1"><semantics id="S2.SS4.p11.1.m1.1a"><mi id="S2.SS4.p11.1.m1.1.1" mathvariant="normal" xref="S2.SS4.p11.1.m1.1.1.cmml">Φ</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p11.1.m1.1b"><ci id="S2.SS4.p11.1.m1.1.1.cmml" xref="S2.SS4.p11.1.m1.1.1">Φ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p11.1.m1.1c">\Phi</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p11.1.m1.1d">roman_Φ</annotation></semantics></math>. Using this fact and substituting (<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.E10" title="In 2.4 Diffusion model: rationale ‣ 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">10</span></a>) into (<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S2.E8" title="In 2.4 Diffusion model: rationale ‣ 2 Methods ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">8</span></a>) we get the general form of the ODE equation that can be solved with any desired ODE solver:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E11">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="d\boldsymbol{x}=-\dot{\sigma}(t)\sigma(t)\frac{(\mathcal{D}(\boldsymbol{x|\Phi%
};\sigma)-\boldsymbol{x})}{\sigma^{2}}dt." class="ltx_Math" display="block" id="S2.E11.m1.6"><semantics id="S2.E11.m1.6a"><mrow id="S2.E11.m1.6.6.1" xref="S2.E11.m1.6.6.1.1.cmml"><mrow id="S2.E11.m1.6.6.1.1" xref="S2.E11.m1.6.6.1.1.cmml"><mrow id="S2.E11.m1.6.6.1.1.2" xref="S2.E11.m1.6.6.1.1.2.cmml"><mi id="S2.E11.m1.6.6.1.1.2.2" xref="S2.E11.m1.6.6.1.1.2.2.cmml">d</mi><mo id="S2.E11.m1.6.6.1.1.2.1" xref="S2.E11.m1.6.6.1.1.2.1.cmml">⁢</mo><mi id="S2.E11.m1.6.6.1.1.2.3" xref="S2.E11.m1.6.6.1.1.2.3.cmml">𝒙</mi></mrow><mo id="S2.E11.m1.6.6.1.1.1" xref="S2.E11.m1.6.6.1.1.1.cmml">=</mo><mrow id="S2.E11.m1.6.6.1.1.3" xref="S2.E11.m1.6.6.1.1.3.cmml"><mo id="S2.E11.m1.6.6.1.1.3a" xref="S2.E11.m1.6.6.1.1.3.cmml">−</mo><mrow id="S2.E11.m1.6.6.1.1.3.2" xref="S2.E11.m1.6.6.1.1.3.2.cmml"><mover accent="true" id="S2.E11.m1.6.6.1.1.3.2.2" xref="S2.E11.m1.6.6.1.1.3.2.2.cmml"><mi id="S2.E11.m1.6.6.1.1.3.2.2.2" xref="S2.E11.m1.6.6.1.1.3.2.2.2.cmml">σ</mi><mo id="S2.E11.m1.6.6.1.1.3.2.2.1" xref="S2.E11.m1.6.6.1.1.3.2.2.1.cmml">˙</mo></mover><mo id="S2.E11.m1.6.6.1.1.3.2.1" xref="S2.E11.m1.6.6.1.1.3.2.1.cmml">⁢</mo><mrow id="S2.E11.m1.6.6.1.1.3.2.3.2" xref="S2.E11.m1.6.6.1.1.3.2.cmml"><mo id="S2.E11.m1.6.6.1.1.3.2.3.2.1" stretchy="false" xref="S2.E11.m1.6.6.1.1.3.2.cmml">(</mo><mi id="S2.E11.m1.4.4" xref="S2.E11.m1.4.4.cmml">t</mi><mo id="S2.E11.m1.6.6.1.1.3.2.3.2.2" stretchy="false" xref="S2.E11.m1.6.6.1.1.3.2.cmml">)</mo></mrow><mo id="S2.E11.m1.6.6.1.1.3.2.1a" xref="S2.E11.m1.6.6.1.1.3.2.1.cmml">⁢</mo><mi id="S2.E11.m1.6.6.1.1.3.2.4" xref="S2.E11.m1.6.6.1.1.3.2.4.cmml">σ</mi><mo id="S2.E11.m1.6.6.1.1.3.2.1b" xref="S2.E11.m1.6.6.1.1.3.2.1.cmml">⁢</mo><mrow id="S2.E11.m1.6.6.1.1.3.2.5.2" xref="S2.E11.m1.6.6.1.1.3.2.cmml"><mo id="S2.E11.m1.6.6.1.1.3.2.5.2.1" stretchy="false" xref="S2.E11.m1.6.6.1.1.3.2.cmml">(</mo><mi id="S2.E11.m1.5.5" xref="S2.E11.m1.5.5.cmml">t</mi><mo id="S2.E11.m1.6.6.1.1.3.2.5.2.2" stretchy="false" xref="S2.E11.m1.6.6.1.1.3.2.cmml">)</mo></mrow><mo id="S2.E11.m1.6.6.1.1.3.2.1c" xref="S2.E11.m1.6.6.1.1.3.2.1.cmml">⁢</mo><mfrac id="S2.E11.m1.3.3" xref="S2.E11.m1.3.3.cmml"><mrow id="S2.E11.m1.3.3.3.3" xref="S2.E11.m1.3.3.3.3.1.cmml"><mo id="S2.E11.m1.3.3.3.3.2" stretchy="false" xref="S2.E11.m1.3.3.3.3.1.cmml">(</mo><mrow id="S2.E11.m1.3.3.3.3.1" xref="S2.E11.m1.3.3.3.3.1.cmml"><mrow id="S2.E11.m1.3.3.3.3.1.1" xref="S2.E11.m1.3.3.3.3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E11.m1.3.3.3.3.1.1.3" xref="S2.E11.m1.3.3.3.3.1.1.3.cmml">𝒟</mi><mo id="S2.E11.m1.3.3.3.3.1.1.2" xref="S2.E11.m1.3.3.3.3.1.1.2.cmml">⁢</mo><mrow id="S2.E11.m1.3.3.3.3.1.1.1.1" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.cmml"><mo id="S2.E11.m1.3.3.3.3.1.1.1.1.2" stretchy="false" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.cmml">(</mo><mrow id="S2.E11.m1.3.3.3.3.1.1.1.1.1" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.cmml"><mi id="S2.E11.m1.3.3.3.3.1.1.1.1.1.2" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.2.cmml">𝒙</mi><mo class="ltx_mathvariant_bold" fence="false" id="S2.E11.m1.3.3.3.3.1.1.1.1.1.1" mathvariant="bold" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.1.cmml">|</mo><mrow id="S2.E11.m1.3.3.3.3.1.1.1.1.1.3.2" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.3.1.cmml"><mi id="S2.E11.m1.1.1.1.1" xref="S2.E11.m1.1.1.1.1.cmml">𝚽</mi><mo id="S2.E11.m1.3.3.3.3.1.1.1.1.1.3.2.1" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.3.1.cmml">;</mo><mi id="S2.E11.m1.2.2.2.2" xref="S2.E11.m1.2.2.2.2.cmml">σ</mi></mrow></mrow><mo id="S2.E11.m1.3.3.3.3.1.1.1.1.3" stretchy="false" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E11.m1.3.3.3.3.1.2" xref="S2.E11.m1.3.3.3.3.1.2.cmml">−</mo><mi id="S2.E11.m1.3.3.3.3.1.3" xref="S2.E11.m1.3.3.3.3.1.3.cmml">𝒙</mi></mrow><mo id="S2.E11.m1.3.3.3.3.3" stretchy="false" xref="S2.E11.m1.3.3.3.3.1.cmml">)</mo></mrow><msup id="S2.E11.m1.3.3.5" xref="S2.E11.m1.3.3.5.cmml"><mi id="S2.E11.m1.3.3.5.2" xref="S2.E11.m1.3.3.5.2.cmml">σ</mi><mn id="S2.E11.m1.3.3.5.3" xref="S2.E11.m1.3.3.5.3.cmml">2</mn></msup></mfrac><mo id="S2.E11.m1.6.6.1.1.3.2.1d" xref="S2.E11.m1.6.6.1.1.3.2.1.cmml">⁢</mo><mi id="S2.E11.m1.6.6.1.1.3.2.6" xref="S2.E11.m1.6.6.1.1.3.2.6.cmml">d</mi><mo id="S2.E11.m1.6.6.1.1.3.2.1e" xref="S2.E11.m1.6.6.1.1.3.2.1.cmml">⁢</mo><mi id="S2.E11.m1.6.6.1.1.3.2.7" xref="S2.E11.m1.6.6.1.1.3.2.7.cmml">t</mi></mrow></mrow></mrow><mo id="S2.E11.m1.6.6.1.2" lspace="0em" xref="S2.E11.m1.6.6.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E11.m1.6b"><apply id="S2.E11.m1.6.6.1.1.cmml" xref="S2.E11.m1.6.6.1"><eq id="S2.E11.m1.6.6.1.1.1.cmml" xref="S2.E11.m1.6.6.1.1.1"></eq><apply id="S2.E11.m1.6.6.1.1.2.cmml" xref="S2.E11.m1.6.6.1.1.2"><times id="S2.E11.m1.6.6.1.1.2.1.cmml" xref="S2.E11.m1.6.6.1.1.2.1"></times><ci id="S2.E11.m1.6.6.1.1.2.2.cmml" xref="S2.E11.m1.6.6.1.1.2.2">𝑑</ci><ci id="S2.E11.m1.6.6.1.1.2.3.cmml" xref="S2.E11.m1.6.6.1.1.2.3">𝒙</ci></apply><apply id="S2.E11.m1.6.6.1.1.3.cmml" xref="S2.E11.m1.6.6.1.1.3"><minus id="S2.E11.m1.6.6.1.1.3.1.cmml" xref="S2.E11.m1.6.6.1.1.3"></minus><apply id="S2.E11.m1.6.6.1.1.3.2.cmml" xref="S2.E11.m1.6.6.1.1.3.2"><times id="S2.E11.m1.6.6.1.1.3.2.1.cmml" xref="S2.E11.m1.6.6.1.1.3.2.1"></times><apply id="S2.E11.m1.6.6.1.1.3.2.2.cmml" xref="S2.E11.m1.6.6.1.1.3.2.2"><ci id="S2.E11.m1.6.6.1.1.3.2.2.1.cmml" xref="S2.E11.m1.6.6.1.1.3.2.2.1">˙</ci><ci id="S2.E11.m1.6.6.1.1.3.2.2.2.cmml" xref="S2.E11.m1.6.6.1.1.3.2.2.2">𝜎</ci></apply><ci id="S2.E11.m1.4.4.cmml" xref="S2.E11.m1.4.4">𝑡</ci><ci id="S2.E11.m1.6.6.1.1.3.2.4.cmml" xref="S2.E11.m1.6.6.1.1.3.2.4">𝜎</ci><ci id="S2.E11.m1.5.5.cmml" xref="S2.E11.m1.5.5">𝑡</ci><apply id="S2.E11.m1.3.3.cmml" xref="S2.E11.m1.3.3"><divide id="S2.E11.m1.3.3.4.cmml" xref="S2.E11.m1.3.3"></divide><apply id="S2.E11.m1.3.3.3.3.1.cmml" xref="S2.E11.m1.3.3.3.3"><minus id="S2.E11.m1.3.3.3.3.1.2.cmml" xref="S2.E11.m1.3.3.3.3.1.2"></minus><apply id="S2.E11.m1.3.3.3.3.1.1.cmml" xref="S2.E11.m1.3.3.3.3.1.1"><times id="S2.E11.m1.3.3.3.3.1.1.2.cmml" xref="S2.E11.m1.3.3.3.3.1.1.2"></times><ci id="S2.E11.m1.3.3.3.3.1.1.3.cmml" xref="S2.E11.m1.3.3.3.3.1.1.3">𝒟</ci><apply id="S2.E11.m1.3.3.3.3.1.1.1.1.1.cmml" xref="S2.E11.m1.3.3.3.3.1.1.1.1"><csymbol cd="latexml" id="S2.E11.m1.3.3.3.3.1.1.1.1.1.1.cmml" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.1">conditional</csymbol><ci id="S2.E11.m1.3.3.3.3.1.1.1.1.1.2.cmml" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.2">𝒙</ci><list id="S2.E11.m1.3.3.3.3.1.1.1.1.1.3.1.cmml" xref="S2.E11.m1.3.3.3.3.1.1.1.1.1.3.2"><ci id="S2.E11.m1.1.1.1.1.cmml" xref="S2.E11.m1.1.1.1.1">𝚽</ci><ci id="S2.E11.m1.2.2.2.2.cmml" xref="S2.E11.m1.2.2.2.2">𝜎</ci></list></apply></apply><ci id="S2.E11.m1.3.3.3.3.1.3.cmml" xref="S2.E11.m1.3.3.3.3.1.3">𝒙</ci></apply><apply id="S2.E11.m1.3.3.5.cmml" xref="S2.E11.m1.3.3.5"><csymbol cd="ambiguous" id="S2.E11.m1.3.3.5.1.cmml" xref="S2.E11.m1.3.3.5">superscript</csymbol><ci id="S2.E11.m1.3.3.5.2.cmml" xref="S2.E11.m1.3.3.5.2">𝜎</ci><cn id="S2.E11.m1.3.3.5.3.cmml" type="integer" xref="S2.E11.m1.3.3.5.3">2</cn></apply></apply><ci id="S2.E11.m1.6.6.1.1.3.2.6.cmml" xref="S2.E11.m1.6.6.1.1.3.2.6">𝑑</ci><ci id="S2.E11.m1.6.6.1.1.3.2.7.cmml" xref="S2.E11.m1.6.6.1.1.3.2.7">𝑡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E11.m1.6c">d\boldsymbol{x}=-\dot{\sigma}(t)\sigma(t)\frac{(\mathcal{D}(\boldsymbol{x|\Phi%
};\sigma)-\boldsymbol{x})}{\sigma^{2}}dt.</annotation><annotation encoding="application/x-llamapun" id="S2.E11.m1.6d">italic_d bold_italic_x = - over˙ start_ARG italic_σ end_ARG ( italic_t ) italic_σ ( italic_t ) divide start_ARG ( caligraphic_D ( bold_italic_x bold_| bold_Φ ; italic_σ ) - bold_italic_x ) end_ARG start_ARG italic_σ start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT end_ARG italic_d italic_t .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(11)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS4.p12">
<p class="ltx_p" id="S2.SS4.p12.5">Numerical solutions of ODEs involve approximating the true solution path. Each approximation step introduces a truncation error, which accumulates over multiple steps. The error typically increases faster than linearly with step size, so increasing the number of steps improves accuracy. Euler’s method, a commonly used solver, produces <math alttext="\mathcal{O}\left(h^{2}\right)" class="ltx_Math" display="inline" id="S2.SS4.p12.1.m1.1"><semantics id="S2.SS4.p12.1.m1.1a"><mrow id="S2.SS4.p12.1.m1.1.1" xref="S2.SS4.p12.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS4.p12.1.m1.1.1.3" xref="S2.SS4.p12.1.m1.1.1.3.cmml">𝒪</mi><mo id="S2.SS4.p12.1.m1.1.1.2" xref="S2.SS4.p12.1.m1.1.1.2.cmml">⁢</mo><mrow id="S2.SS4.p12.1.m1.1.1.1.1" xref="S2.SS4.p12.1.m1.1.1.1.1.1.cmml"><mo id="S2.SS4.p12.1.m1.1.1.1.1.2" xref="S2.SS4.p12.1.m1.1.1.1.1.1.cmml">(</mo><msup id="S2.SS4.p12.1.m1.1.1.1.1.1" xref="S2.SS4.p12.1.m1.1.1.1.1.1.cmml"><mi id="S2.SS4.p12.1.m1.1.1.1.1.1.2" xref="S2.SS4.p12.1.m1.1.1.1.1.1.2.cmml">h</mi><mn id="S2.SS4.p12.1.m1.1.1.1.1.1.3" xref="S2.SS4.p12.1.m1.1.1.1.1.1.3.cmml">2</mn></msup><mo id="S2.SS4.p12.1.m1.1.1.1.1.3" xref="S2.SS4.p12.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p12.1.m1.1b"><apply id="S2.SS4.p12.1.m1.1.1.cmml" xref="S2.SS4.p12.1.m1.1.1"><times id="S2.SS4.p12.1.m1.1.1.2.cmml" xref="S2.SS4.p12.1.m1.1.1.2"></times><ci id="S2.SS4.p12.1.m1.1.1.3.cmml" xref="S2.SS4.p12.1.m1.1.1.3">𝒪</ci><apply id="S2.SS4.p12.1.m1.1.1.1.1.1.cmml" xref="S2.SS4.p12.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p12.1.m1.1.1.1.1.1.1.cmml" xref="S2.SS4.p12.1.m1.1.1.1.1">superscript</csymbol><ci id="S2.SS4.p12.1.m1.1.1.1.1.1.2.cmml" xref="S2.SS4.p12.1.m1.1.1.1.1.1.2">ℎ</ci><cn id="S2.SS4.p12.1.m1.1.1.1.1.1.3.cmml" type="integer" xref="S2.SS4.p12.1.m1.1.1.1.1.1.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p12.1.m1.1c">\mathcal{O}\left(h^{2}\right)</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p12.1.m1.1d">caligraphic_O ( italic_h start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT )</annotation></semantics></math> local error with respect to step size <math alttext="h" class="ltx_Math" display="inline" id="S2.SS4.p12.2.m2.1"><semantics id="S2.SS4.p12.2.m2.1a"><mi id="S2.SS4.p12.2.m2.1.1" xref="S2.SS4.p12.2.m2.1.1.cmml">h</mi><annotation-xml encoding="MathML-Content" id="S2.SS4.p12.2.m2.1b"><ci id="S2.SS4.p12.2.m2.1.1.cmml" xref="S2.SS4.p12.2.m2.1.1">ℎ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p12.2.m2.1c">h</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p12.2.m2.1d">italic_h</annotation></semantics></math>. Higher-order Runge-Kutta methods offer better error scaling but require more evaluations of the diffusion model per step. Heun’s method incorporates an additional correction step between steps at <math alttext="t_{i}" class="ltx_Math" display="inline" id="S2.SS4.p12.3.m3.1"><semantics id="S2.SS4.p12.3.m3.1a"><msub id="S2.SS4.p12.3.m3.1.1" xref="S2.SS4.p12.3.m3.1.1.cmml"><mi id="S2.SS4.p12.3.m3.1.1.2" xref="S2.SS4.p12.3.m3.1.1.2.cmml">t</mi><mi id="S2.SS4.p12.3.m3.1.1.3" xref="S2.SS4.p12.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS4.p12.3.m3.1b"><apply id="S2.SS4.p12.3.m3.1.1.cmml" xref="S2.SS4.p12.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS4.p12.3.m3.1.1.1.cmml" xref="S2.SS4.p12.3.m3.1.1">subscript</csymbol><ci id="S2.SS4.p12.3.m3.1.1.2.cmml" xref="S2.SS4.p12.3.m3.1.1.2">𝑡</ci><ci id="S2.SS4.p12.3.m3.1.1.3.cmml" xref="S2.SS4.p12.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p12.3.m3.1c">t_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p12.3.m3.1d">italic_t start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="t_{i+1}" class="ltx_Math" display="inline" id="S2.SS4.p12.4.m4.1"><semantics id="S2.SS4.p12.4.m4.1a"><msub id="S2.SS4.p12.4.m4.1.1" xref="S2.SS4.p12.4.m4.1.1.cmml"><mi id="S2.SS4.p12.4.m4.1.1.2" xref="S2.SS4.p12.4.m4.1.1.2.cmml">t</mi><mrow id="S2.SS4.p12.4.m4.1.1.3" xref="S2.SS4.p12.4.m4.1.1.3.cmml"><mi id="S2.SS4.p12.4.m4.1.1.3.2" xref="S2.SS4.p12.4.m4.1.1.3.2.cmml">i</mi><mo id="S2.SS4.p12.4.m4.1.1.3.1" xref="S2.SS4.p12.4.m4.1.1.3.1.cmml">+</mo><mn id="S2.SS4.p12.4.m4.1.1.3.3" xref="S2.SS4.p12.4.m4.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS4.p12.4.m4.1b"><apply id="S2.SS4.p12.4.m4.1.1.cmml" xref="S2.SS4.p12.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS4.p12.4.m4.1.1.1.cmml" xref="S2.SS4.p12.4.m4.1.1">subscript</csymbol><ci id="S2.SS4.p12.4.m4.1.1.2.cmml" xref="S2.SS4.p12.4.m4.1.1.2">𝑡</ci><apply id="S2.SS4.p12.4.m4.1.1.3.cmml" xref="S2.SS4.p12.4.m4.1.1.3"><plus id="S2.SS4.p12.4.m4.1.1.3.1.cmml" xref="S2.SS4.p12.4.m4.1.1.3.1"></plus><ci id="S2.SS4.p12.4.m4.1.1.3.2.cmml" xref="S2.SS4.p12.4.m4.1.1.3.2">𝑖</ci><cn id="S2.SS4.p12.4.m4.1.1.3.3.cmml" type="integer" xref="S2.SS4.p12.4.m4.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p12.4.m4.1c">t_{i+1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p12.4.m4.1d">italic_t start_POSTSUBSCRIPT italic_i + 1 end_POSTSUBSCRIPT</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib42" title="">42</a>]</cite>. This correction yields <math alttext="\mathcal{O}\left(h^{3}\right)" class="ltx_Math" display="inline" id="S2.SS4.p12.5.m5.1"><semantics id="S2.SS4.p12.5.m5.1a"><mrow id="S2.SS4.p12.5.m5.1.1" xref="S2.SS4.p12.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS4.p12.5.m5.1.1.3" xref="S2.SS4.p12.5.m5.1.1.3.cmml">𝒪</mi><mo id="S2.SS4.p12.5.m5.1.1.2" xref="S2.SS4.p12.5.m5.1.1.2.cmml">⁢</mo><mrow id="S2.SS4.p12.5.m5.1.1.1.1" xref="S2.SS4.p12.5.m5.1.1.1.1.1.cmml"><mo id="S2.SS4.p12.5.m5.1.1.1.1.2" xref="S2.SS4.p12.5.m5.1.1.1.1.1.cmml">(</mo><msup id="S2.SS4.p12.5.m5.1.1.1.1.1" xref="S2.SS4.p12.5.m5.1.1.1.1.1.cmml"><mi id="S2.SS4.p12.5.m5.1.1.1.1.1.2" xref="S2.SS4.p12.5.m5.1.1.1.1.1.2.cmml">h</mi><mn id="S2.SS4.p12.5.m5.1.1.1.1.1.3" xref="S2.SS4.p12.5.m5.1.1.1.1.1.3.cmml">3</mn></msup><mo id="S2.SS4.p12.5.m5.1.1.1.1.3" xref="S2.SS4.p12.5.m5.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS4.p12.5.m5.1b"><apply id="S2.SS4.p12.5.m5.1.1.cmml" xref="S2.SS4.p12.5.m5.1.1"><times id="S2.SS4.p12.5.m5.1.1.2.cmml" xref="S2.SS4.p12.5.m5.1.1.2"></times><ci id="S2.SS4.p12.5.m5.1.1.3.cmml" xref="S2.SS4.p12.5.m5.1.1.3">𝒪</ci><apply id="S2.SS4.p12.5.m5.1.1.1.1.1.cmml" xref="S2.SS4.p12.5.m5.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS4.p12.5.m5.1.1.1.1.1.1.cmml" xref="S2.SS4.p12.5.m5.1.1.1.1">superscript</csymbol><ci id="S2.SS4.p12.5.m5.1.1.1.1.1.2.cmml" xref="S2.SS4.p12.5.m5.1.1.1.1.1.2">ℎ</ci><cn id="S2.SS4.p12.5.m5.1.1.1.1.1.3.cmml" type="integer" xref="S2.SS4.p12.5.m5.1.1.1.1.1.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS4.p12.5.m5.1c">\mathcal{O}\left(h^{3}\right)</annotation><annotation encoding="application/x-llamapun" id="S2.SS4.p12.5.m5.1d">caligraphic_O ( italic_h start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT )</annotation></semantics></math> local error at the expense of one additional Neural Function Evaluation (NFE) per step. We thus follow the recommendations in <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib36" title="">36</a>]</cite> and use the Heun method.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.5 </span>Diffusion model: semantic conditioning</h3>
<div class="ltx_para" id="S2.SS5.p1">
<p class="ltx_p" id="S2.SS5.p1.1">The Spatially Adaptive De-normalization (SPADE) method was proposed to provide spatially-variant normalisation, designed to adapt to the semantic content of input images <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib43" title="">43</a>]</cite>. The SPADE module for a layer of a convolutional neural network is formally defined as</p>
</div>
<div class="ltx_para" id="S2.SS5.p2">
<table class="ltx_equation ltx_eqn_table" id="S2.E12">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\gamma_{c,y,x}(\mathbf{m})\cdot\frac{h_{n,c,y,x}-\mu_{c}}{\sigma_{c}}+\beta_{c%
,y,x}(\mathbf{m})," class="ltx_Math" display="block" id="S2.E12.m1.13"><semantics id="S2.E12.m1.13a"><mrow id="S2.E12.m1.13.13.1" xref="S2.E12.m1.13.13.1.1.cmml"><mrow id="S2.E12.m1.13.13.1.1" xref="S2.E12.m1.13.13.1.1.cmml"><mrow id="S2.E12.m1.13.13.1.1.2" xref="S2.E12.m1.13.13.1.1.2.cmml"><mrow id="S2.E12.m1.13.13.1.1.2.2" xref="S2.E12.m1.13.13.1.1.2.2.cmml"><msub id="S2.E12.m1.13.13.1.1.2.2.2" xref="S2.E12.m1.13.13.1.1.2.2.2.cmml"><mi id="S2.E12.m1.13.13.1.1.2.2.2.2" xref="S2.E12.m1.13.13.1.1.2.2.2.2.cmml">γ</mi><mrow id="S2.E12.m1.3.3.3.5" xref="S2.E12.m1.3.3.3.4.cmml"><mi id="S2.E12.m1.1.1.1.1" xref="S2.E12.m1.1.1.1.1.cmml">c</mi><mo id="S2.E12.m1.3.3.3.5.1" xref="S2.E12.m1.3.3.3.4.cmml">,</mo><mi id="S2.E12.m1.2.2.2.2" xref="S2.E12.m1.2.2.2.2.cmml">y</mi><mo id="S2.E12.m1.3.3.3.5.2" xref="S2.E12.m1.3.3.3.4.cmml">,</mo><mi id="S2.E12.m1.3.3.3.3" xref="S2.E12.m1.3.3.3.3.cmml">x</mi></mrow></msub><mo id="S2.E12.m1.13.13.1.1.2.2.1" xref="S2.E12.m1.13.13.1.1.2.2.1.cmml">⁢</mo><mrow id="S2.E12.m1.13.13.1.1.2.2.3.2" xref="S2.E12.m1.13.13.1.1.2.2.cmml"><mo id="S2.E12.m1.13.13.1.1.2.2.3.2.1" stretchy="false" xref="S2.E12.m1.13.13.1.1.2.2.cmml">(</mo><mi id="S2.E12.m1.11.11" xref="S2.E12.m1.11.11.cmml">𝐦</mi><mo id="S2.E12.m1.13.13.1.1.2.2.3.2.2" rspace="0.055em" stretchy="false" xref="S2.E12.m1.13.13.1.1.2.2.cmml">)</mo></mrow></mrow><mo id="S2.E12.m1.13.13.1.1.2.1" rspace="0.222em" xref="S2.E12.m1.13.13.1.1.2.1.cmml">⋅</mo><mfrac id="S2.E12.m1.7.7" xref="S2.E12.m1.7.7.cmml"><mrow id="S2.E12.m1.7.7.4" xref="S2.E12.m1.7.7.4.cmml"><msub id="S2.E12.m1.7.7.4.6" xref="S2.E12.m1.7.7.4.6.cmml"><mi id="S2.E12.m1.7.7.4.6.2" xref="S2.E12.m1.7.7.4.6.2.cmml">h</mi><mrow id="S2.E12.m1.7.7.4.4.4.6" xref="S2.E12.m1.7.7.4.4.4.5.cmml"><mi id="S2.E12.m1.4.4.1.1.1.1" xref="S2.E12.m1.4.4.1.1.1.1.cmml">n</mi><mo id="S2.E12.m1.7.7.4.4.4.6.1" xref="S2.E12.m1.7.7.4.4.4.5.cmml">,</mo><mi id="S2.E12.m1.5.5.2.2.2.2" xref="S2.E12.m1.5.5.2.2.2.2.cmml">c</mi><mo id="S2.E12.m1.7.7.4.4.4.6.2" xref="S2.E12.m1.7.7.4.4.4.5.cmml">,</mo><mi id="S2.E12.m1.6.6.3.3.3.3" xref="S2.E12.m1.6.6.3.3.3.3.cmml">y</mi><mo id="S2.E12.m1.7.7.4.4.4.6.3" xref="S2.E12.m1.7.7.4.4.4.5.cmml">,</mo><mi id="S2.E12.m1.7.7.4.4.4.4" xref="S2.E12.m1.7.7.4.4.4.4.cmml">x</mi></mrow></msub><mo id="S2.E12.m1.7.7.4.5" xref="S2.E12.m1.7.7.4.5.cmml">−</mo><msub id="S2.E12.m1.7.7.4.7" xref="S2.E12.m1.7.7.4.7.cmml"><mi id="S2.E12.m1.7.7.4.7.2" xref="S2.E12.m1.7.7.4.7.2.cmml">μ</mi><mi id="S2.E12.m1.7.7.4.7.3" xref="S2.E12.m1.7.7.4.7.3.cmml">c</mi></msub></mrow><msub id="S2.E12.m1.7.7.6" xref="S2.E12.m1.7.7.6.cmml"><mi id="S2.E12.m1.7.7.6.2" xref="S2.E12.m1.7.7.6.2.cmml">σ</mi><mi id="S2.E12.m1.7.7.6.3" xref="S2.E12.m1.7.7.6.3.cmml">c</mi></msub></mfrac></mrow><mo id="S2.E12.m1.13.13.1.1.1" xref="S2.E12.m1.13.13.1.1.1.cmml">+</mo><mrow id="S2.E12.m1.13.13.1.1.3" xref="S2.E12.m1.13.13.1.1.3.cmml"><msub id="S2.E12.m1.13.13.1.1.3.2" xref="S2.E12.m1.13.13.1.1.3.2.cmml"><mi id="S2.E12.m1.13.13.1.1.3.2.2" xref="S2.E12.m1.13.13.1.1.3.2.2.cmml">β</mi><mrow id="S2.E12.m1.10.10.3.5" xref="S2.E12.m1.10.10.3.4.cmml"><mi id="S2.E12.m1.8.8.1.1" xref="S2.E12.m1.8.8.1.1.cmml">c</mi><mo id="S2.E12.m1.10.10.3.5.1" xref="S2.E12.m1.10.10.3.4.cmml">,</mo><mi id="S2.E12.m1.9.9.2.2" xref="S2.E12.m1.9.9.2.2.cmml">y</mi><mo id="S2.E12.m1.10.10.3.5.2" xref="S2.E12.m1.10.10.3.4.cmml">,</mo><mi id="S2.E12.m1.10.10.3.3" xref="S2.E12.m1.10.10.3.3.cmml">x</mi></mrow></msub><mo id="S2.E12.m1.13.13.1.1.3.1" xref="S2.E12.m1.13.13.1.1.3.1.cmml">⁢</mo><mrow id="S2.E12.m1.13.13.1.1.3.3.2" xref="S2.E12.m1.13.13.1.1.3.cmml"><mo id="S2.E12.m1.13.13.1.1.3.3.2.1" stretchy="false" xref="S2.E12.m1.13.13.1.1.3.cmml">(</mo><mi id="S2.E12.m1.12.12" xref="S2.E12.m1.12.12.cmml">𝐦</mi><mo id="S2.E12.m1.13.13.1.1.3.3.2.2" stretchy="false" xref="S2.E12.m1.13.13.1.1.3.cmml">)</mo></mrow></mrow></mrow><mo id="S2.E12.m1.13.13.1.2" xref="S2.E12.m1.13.13.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E12.m1.13b"><apply id="S2.E12.m1.13.13.1.1.cmml" xref="S2.E12.m1.13.13.1"><plus id="S2.E12.m1.13.13.1.1.1.cmml" xref="S2.E12.m1.13.13.1.1.1"></plus><apply id="S2.E12.m1.13.13.1.1.2.cmml" xref="S2.E12.m1.13.13.1.1.2"><ci id="S2.E12.m1.13.13.1.1.2.1.cmml" xref="S2.E12.m1.13.13.1.1.2.1">⋅</ci><apply id="S2.E12.m1.13.13.1.1.2.2.cmml" xref="S2.E12.m1.13.13.1.1.2.2"><times id="S2.E12.m1.13.13.1.1.2.2.1.cmml" xref="S2.E12.m1.13.13.1.1.2.2.1"></times><apply id="S2.E12.m1.13.13.1.1.2.2.2.cmml" xref="S2.E12.m1.13.13.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E12.m1.13.13.1.1.2.2.2.1.cmml" xref="S2.E12.m1.13.13.1.1.2.2.2">subscript</csymbol><ci id="S2.E12.m1.13.13.1.1.2.2.2.2.cmml" xref="S2.E12.m1.13.13.1.1.2.2.2.2">𝛾</ci><list id="S2.E12.m1.3.3.3.4.cmml" xref="S2.E12.m1.3.3.3.5"><ci id="S2.E12.m1.1.1.1.1.cmml" xref="S2.E12.m1.1.1.1.1">𝑐</ci><ci id="S2.E12.m1.2.2.2.2.cmml" xref="S2.E12.m1.2.2.2.2">𝑦</ci><ci id="S2.E12.m1.3.3.3.3.cmml" xref="S2.E12.m1.3.3.3.3">𝑥</ci></list></apply><ci id="S2.E12.m1.11.11.cmml" xref="S2.E12.m1.11.11">𝐦</ci></apply><apply id="S2.E12.m1.7.7.cmml" xref="S2.E12.m1.7.7"><divide id="S2.E12.m1.7.7.5.cmml" xref="S2.E12.m1.7.7"></divide><apply id="S2.E12.m1.7.7.4.cmml" xref="S2.E12.m1.7.7.4"><minus id="S2.E12.m1.7.7.4.5.cmml" xref="S2.E12.m1.7.7.4.5"></minus><apply id="S2.E12.m1.7.7.4.6.cmml" xref="S2.E12.m1.7.7.4.6"><csymbol cd="ambiguous" id="S2.E12.m1.7.7.4.6.1.cmml" xref="S2.E12.m1.7.7.4.6">subscript</csymbol><ci id="S2.E12.m1.7.7.4.6.2.cmml" xref="S2.E12.m1.7.7.4.6.2">ℎ</ci><list id="S2.E12.m1.7.7.4.4.4.5.cmml" xref="S2.E12.m1.7.7.4.4.4.6"><ci id="S2.E12.m1.4.4.1.1.1.1.cmml" xref="S2.E12.m1.4.4.1.1.1.1">𝑛</ci><ci id="S2.E12.m1.5.5.2.2.2.2.cmml" xref="S2.E12.m1.5.5.2.2.2.2">𝑐</ci><ci id="S2.E12.m1.6.6.3.3.3.3.cmml" xref="S2.E12.m1.6.6.3.3.3.3">𝑦</ci><ci id="S2.E12.m1.7.7.4.4.4.4.cmml" xref="S2.E12.m1.7.7.4.4.4.4">𝑥</ci></list></apply><apply id="S2.E12.m1.7.7.4.7.cmml" xref="S2.E12.m1.7.7.4.7"><csymbol cd="ambiguous" id="S2.E12.m1.7.7.4.7.1.cmml" xref="S2.E12.m1.7.7.4.7">subscript</csymbol><ci id="S2.E12.m1.7.7.4.7.2.cmml" xref="S2.E12.m1.7.7.4.7.2">𝜇</ci><ci id="S2.E12.m1.7.7.4.7.3.cmml" xref="S2.E12.m1.7.7.4.7.3">𝑐</ci></apply></apply><apply id="S2.E12.m1.7.7.6.cmml" xref="S2.E12.m1.7.7.6"><csymbol cd="ambiguous" id="S2.E12.m1.7.7.6.1.cmml" xref="S2.E12.m1.7.7.6">subscript</csymbol><ci id="S2.E12.m1.7.7.6.2.cmml" xref="S2.E12.m1.7.7.6.2">𝜎</ci><ci id="S2.E12.m1.7.7.6.3.cmml" xref="S2.E12.m1.7.7.6.3">𝑐</ci></apply></apply></apply><apply id="S2.E12.m1.13.13.1.1.3.cmml" xref="S2.E12.m1.13.13.1.1.3"><times id="S2.E12.m1.13.13.1.1.3.1.cmml" xref="S2.E12.m1.13.13.1.1.3.1"></times><apply id="S2.E12.m1.13.13.1.1.3.2.cmml" xref="S2.E12.m1.13.13.1.1.3.2"><csymbol cd="ambiguous" id="S2.E12.m1.13.13.1.1.3.2.1.cmml" xref="S2.E12.m1.13.13.1.1.3.2">subscript</csymbol><ci id="S2.E12.m1.13.13.1.1.3.2.2.cmml" xref="S2.E12.m1.13.13.1.1.3.2.2">𝛽</ci><list id="S2.E12.m1.10.10.3.4.cmml" xref="S2.E12.m1.10.10.3.5"><ci id="S2.E12.m1.8.8.1.1.cmml" xref="S2.E12.m1.8.8.1.1">𝑐</ci><ci id="S2.E12.m1.9.9.2.2.cmml" xref="S2.E12.m1.9.9.2.2">𝑦</ci><ci id="S2.E12.m1.10.10.3.3.cmml" xref="S2.E12.m1.10.10.3.3">𝑥</ci></list></apply><ci id="S2.E12.m1.12.12.cmml" xref="S2.E12.m1.12.12">𝐦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E12.m1.13c">\gamma_{c,y,x}(\mathbf{m})\cdot\frac{h_{n,c,y,x}-\mu_{c}}{\sigma_{c}}+\beta_{c%
,y,x}(\mathbf{m}),</annotation><annotation encoding="application/x-llamapun" id="S2.E12.m1.13d">italic_γ start_POSTSUBSCRIPT italic_c , italic_y , italic_x end_POSTSUBSCRIPT ( bold_m ) ⋅ divide start_ARG italic_h start_POSTSUBSCRIPT italic_n , italic_c , italic_y , italic_x end_POSTSUBSCRIPT - italic_μ start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT end_ARG start_ARG italic_σ start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT end_ARG + italic_β start_POSTSUBSCRIPT italic_c , italic_y , italic_x end_POSTSUBSCRIPT ( bold_m ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(12)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS5.p3">
<p class="ltx_p" id="S2.SS5.p3.9">where <math alttext="\mathbf{m}" class="ltx_Math" display="inline" id="S2.SS5.p3.1.m1.1"><semantics id="S2.SS5.p3.1.m1.1a"><mi id="S2.SS5.p3.1.m1.1.1" xref="S2.SS5.p3.1.m1.1.1.cmml">𝐦</mi><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.1.m1.1b"><ci id="S2.SS5.p3.1.m1.1.1.cmml" xref="S2.SS5.p3.1.m1.1.1">𝐦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.1.m1.1c">\mathbf{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.1.m1.1d">bold_m</annotation></semantics></math> is the given segmentation mask, <math alttext="\gamma(\cdot)" class="ltx_Math" display="inline" id="S2.SS5.p3.2.m2.1"><semantics id="S2.SS5.p3.2.m2.1a"><mrow id="S2.SS5.p3.2.m2.1.2" xref="S2.SS5.p3.2.m2.1.2.cmml"><mi id="S2.SS5.p3.2.m2.1.2.2" xref="S2.SS5.p3.2.m2.1.2.2.cmml">γ</mi><mo id="S2.SS5.p3.2.m2.1.2.1" xref="S2.SS5.p3.2.m2.1.2.1.cmml">⁢</mo><mrow id="S2.SS5.p3.2.m2.1.2.3.2" xref="S2.SS5.p3.2.m2.1.2.cmml"><mo id="S2.SS5.p3.2.m2.1.2.3.2.1" stretchy="false" xref="S2.SS5.p3.2.m2.1.2.cmml">(</mo><mo id="S2.SS5.p3.2.m2.1.1" lspace="0em" rspace="0em" xref="S2.SS5.p3.2.m2.1.1.cmml">⋅</mo><mo id="S2.SS5.p3.2.m2.1.2.3.2.2" stretchy="false" xref="S2.SS5.p3.2.m2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.2.m2.1b"><apply id="S2.SS5.p3.2.m2.1.2.cmml" xref="S2.SS5.p3.2.m2.1.2"><times id="S2.SS5.p3.2.m2.1.2.1.cmml" xref="S2.SS5.p3.2.m2.1.2.1"></times><ci id="S2.SS5.p3.2.m2.1.2.2.cmml" xref="S2.SS5.p3.2.m2.1.2.2">𝛾</ci><ci id="S2.SS5.p3.2.m2.1.1.cmml" xref="S2.SS5.p3.2.m2.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.2.m2.1c">\gamma(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.2.m2.1d">italic_γ ( ⋅ )</annotation></semantics></math> and <math alttext="\beta(\cdot)" class="ltx_Math" display="inline" id="S2.SS5.p3.3.m3.1"><semantics id="S2.SS5.p3.3.m3.1a"><mrow id="S2.SS5.p3.3.m3.1.2" xref="S2.SS5.p3.3.m3.1.2.cmml"><mi id="S2.SS5.p3.3.m3.1.2.2" xref="S2.SS5.p3.3.m3.1.2.2.cmml">β</mi><mo id="S2.SS5.p3.3.m3.1.2.1" xref="S2.SS5.p3.3.m3.1.2.1.cmml">⁢</mo><mrow id="S2.SS5.p3.3.m3.1.2.3.2" xref="S2.SS5.p3.3.m3.1.2.cmml"><mo id="S2.SS5.p3.3.m3.1.2.3.2.1" stretchy="false" xref="S2.SS5.p3.3.m3.1.2.cmml">(</mo><mo id="S2.SS5.p3.3.m3.1.1" lspace="0em" rspace="0em" xref="S2.SS5.p3.3.m3.1.1.cmml">⋅</mo><mo id="S2.SS5.p3.3.m3.1.2.3.2.2" stretchy="false" xref="S2.SS5.p3.3.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.3.m3.1b"><apply id="S2.SS5.p3.3.m3.1.2.cmml" xref="S2.SS5.p3.3.m3.1.2"><times id="S2.SS5.p3.3.m3.1.2.1.cmml" xref="S2.SS5.p3.3.m3.1.2.1"></times><ci id="S2.SS5.p3.3.m3.1.2.2.cmml" xref="S2.SS5.p3.3.m3.1.2.2">𝛽</ci><ci id="S2.SS5.p3.3.m3.1.1.cmml" xref="S2.SS5.p3.3.m3.1.1">⋅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.3.m3.1c">\beta(\cdot)</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.3.m3.1d">italic_β ( ⋅ )</annotation></semantics></math> are the learned modulation parameters of the network layer in the given channel <math alttext="c" class="ltx_Math" display="inline" id="S2.SS5.p3.4.m4.1"><semantics id="S2.SS5.p3.4.m4.1a"><mi id="S2.SS5.p3.4.m4.1.1" xref="S2.SS5.p3.4.m4.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.4.m4.1b"><ci id="S2.SS5.p3.4.m4.1.1.cmml" xref="S2.SS5.p3.4.m4.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.4.m4.1c">c</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.4.m4.1d">italic_c</annotation></semantics></math>, with spatial position <math alttext="x,y" class="ltx_Math" display="inline" id="S2.SS5.p3.5.m5.2"><semantics id="S2.SS5.p3.5.m5.2a"><mrow id="S2.SS5.p3.5.m5.2.3.2" xref="S2.SS5.p3.5.m5.2.3.1.cmml"><mi id="S2.SS5.p3.5.m5.1.1" xref="S2.SS5.p3.5.m5.1.1.cmml">x</mi><mo id="S2.SS5.p3.5.m5.2.3.2.1" xref="S2.SS5.p3.5.m5.2.3.1.cmml">,</mo><mi id="S2.SS5.p3.5.m5.2.2" xref="S2.SS5.p3.5.m5.2.2.cmml">y</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.5.m5.2b"><list id="S2.SS5.p3.5.m5.2.3.1.cmml" xref="S2.SS5.p3.5.m5.2.3.2"><ci id="S2.SS5.p3.5.m5.1.1.cmml" xref="S2.SS5.p3.5.m5.1.1">𝑥</ci><ci id="S2.SS5.p3.5.m5.2.2.cmml" xref="S2.SS5.p3.5.m5.2.2">𝑦</ci></list></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.5.m5.2c">x,y</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.5.m5.2d">italic_x , italic_y</annotation></semantics></math> ; <math alttext="h" class="ltx_Math" display="inline" id="S2.SS5.p3.6.m6.1"><semantics id="S2.SS5.p3.6.m6.1a"><mi id="S2.SS5.p3.6.m6.1.1" xref="S2.SS5.p3.6.m6.1.1.cmml">h</mi><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.6.m6.1b"><ci id="S2.SS5.p3.6.m6.1.1.cmml" xref="S2.SS5.p3.6.m6.1.1">ℎ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.6.m6.1c">h</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.6.m6.1d">italic_h</annotation></semantics></math> is the activation at the site before normalisation for batch size <math alttext="n" class="ltx_Math" display="inline" id="S2.SS5.p3.7.m7.1"><semantics id="S2.SS5.p3.7.m7.1a"><mi id="S2.SS5.p3.7.m7.1.1" xref="S2.SS5.p3.7.m7.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.7.m7.1b"><ci id="S2.SS5.p3.7.m7.1.1.cmml" xref="S2.SS5.p3.7.m7.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.7.m7.1c">n</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.7.m7.1d">italic_n</annotation></semantics></math>, and <math alttext="\mu_{c}" class="ltx_Math" display="inline" id="S2.SS5.p3.8.m8.1"><semantics id="S2.SS5.p3.8.m8.1a"><msub id="S2.SS5.p3.8.m8.1.1" xref="S2.SS5.p3.8.m8.1.1.cmml"><mi id="S2.SS5.p3.8.m8.1.1.2" xref="S2.SS5.p3.8.m8.1.1.2.cmml">μ</mi><mi id="S2.SS5.p3.8.m8.1.1.3" xref="S2.SS5.p3.8.m8.1.1.3.cmml">c</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.8.m8.1b"><apply id="S2.SS5.p3.8.m8.1.1.cmml" xref="S2.SS5.p3.8.m8.1.1"><csymbol cd="ambiguous" id="S2.SS5.p3.8.m8.1.1.1.cmml" xref="S2.SS5.p3.8.m8.1.1">subscript</csymbol><ci id="S2.SS5.p3.8.m8.1.1.2.cmml" xref="S2.SS5.p3.8.m8.1.1.2">𝜇</ci><ci id="S2.SS5.p3.8.m8.1.1.3.cmml" xref="S2.SS5.p3.8.m8.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.8.m8.1c">\mu_{c}</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.8.m8.1d">italic_μ start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\sigma_{c}" class="ltx_Math" display="inline" id="S2.SS5.p3.9.m9.1"><semantics id="S2.SS5.p3.9.m9.1a"><msub id="S2.SS5.p3.9.m9.1.1" xref="S2.SS5.p3.9.m9.1.1.cmml"><mi id="S2.SS5.p3.9.m9.1.1.2" xref="S2.SS5.p3.9.m9.1.1.2.cmml">σ</mi><mi id="S2.SS5.p3.9.m9.1.1.3" xref="S2.SS5.p3.9.m9.1.1.3.cmml">c</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS5.p3.9.m9.1b"><apply id="S2.SS5.p3.9.m9.1.1.cmml" xref="S2.SS5.p3.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS5.p3.9.m9.1.1.1.cmml" xref="S2.SS5.p3.9.m9.1.1">subscript</csymbol><ci id="S2.SS5.p3.9.m9.1.1.2.cmml" xref="S2.SS5.p3.9.m9.1.1.2">𝜎</ci><ci id="S2.SS5.p3.9.m9.1.1.3.cmml" xref="S2.SS5.p3.9.m9.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS5.p3.9.m9.1c">\sigma_{c}</annotation><annotation encoding="application/x-llamapun" id="S2.SS5.p3.9.m9.1d">italic_σ start_POSTSUBSCRIPT italic_c end_POSTSUBSCRIPT</annotation></semantics></math> are the mean and standard deviation of the activations in the channel.</p>
</div>
<div class="ltx_para" id="S2.SS5.p4">
<p class="ltx_p" id="S2.SS5.p4.1">Consequently, by substituting all commonplace normalisation layers with SPADE blocks, it becomes possible to effectively propagate semantic information through the network, which was shown to improve visual fidelity and spatial congruence <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib43" title="">43</a>]</cite>.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Materials and experiments</h2>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Collection and preparation of real data</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">We utilised the CAMUS echocardiography dataset <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib44" title="">44</a>]</cite>, comprising 500 patients with semantic (segmentation) maps with three labels: left ventricle (LV) myocardium, endocardium, and left atrium (LA) area in apical four-chamber (A4C) and two-chamber (A2C) views at end-diastole (ED) and end-systole (ES). This dataset consists of a mixture of healthy and diseased patients, acquired across multiple sites in France. After reserving 50 patients for testing purposes on the downstream tasks (described later), we used the remaining 450 for training and validating the generative models. We added a fourth label to the semantic maps with the ultrasound sector (triangle) through simple thresholding on the original images. The native resolution of that dataset is <math alttext="256\times 256" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.1"><semantics id="S3.SS1.p1.1.m1.1a"><mrow id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml"><mn id="S3.SS1.p1.1.m1.1.1.2" xref="S3.SS1.p1.1.m1.1.1.2.cmml">256</mn><mo id="S3.SS1.p1.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS1.p1.1.m1.1.1.1.cmml">×</mo><mn id="S3.SS1.p1.1.m1.1.1.3" xref="S3.SS1.p1.1.m1.1.1.3.cmml">256</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><apply id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1"><times id="S3.SS1.p1.1.m1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1.1"></times><cn id="S3.SS1.p1.1.m1.1.1.2.cmml" type="integer" xref="S3.SS1.p1.1.m1.1.1.2">256</cn><cn id="S3.SS1.p1.1.m1.1.1.3.cmml" type="integer" xref="S3.SS1.p1.1.m1.1.1.3">256</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">256\times 256</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.1d">256 × 256</annotation></semantics></math> pixels.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Architectural details for the generative models</h3>
<section class="ltx_subsubsection" id="S3.SS2.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.1 </span>Diffusion models</h4>
<div class="ltx_para" id="S3.SS2.SSS1.p1">
<p class="ltx_p" id="S3.SS2.SSS1.p1.4">The EDM, VE, and VP configurations were all trained and tested at the full <math alttext="256\times 256" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.1.m1.1"><semantics id="S3.SS2.SSS1.p1.1.m1.1a"><mrow id="S3.SS2.SSS1.p1.1.m1.1.1" xref="S3.SS2.SSS1.p1.1.m1.1.1.cmml"><mn id="S3.SS2.SSS1.p1.1.m1.1.1.2" xref="S3.SS2.SSS1.p1.1.m1.1.1.2.cmml">256</mn><mo id="S3.SS2.SSS1.p1.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS2.SSS1.p1.1.m1.1.1.1.cmml">×</mo><mn id="S3.SS2.SSS1.p1.1.m1.1.1.3" xref="S3.SS2.SSS1.p1.1.m1.1.1.3.cmml">256</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.1.m1.1b"><apply id="S3.SS2.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1"><times id="S3.SS2.SSS1.p1.1.m1.1.1.1.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1.1"></times><cn id="S3.SS2.SSS1.p1.1.m1.1.1.2.cmml" type="integer" xref="S3.SS2.SSS1.p1.1.m1.1.1.2">256</cn><cn id="S3.SS2.SSS1.p1.1.m1.1.1.3.cmml" type="integer" xref="S3.SS2.SSS1.p1.1.m1.1.1.3">256</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.1.m1.1c">256\times 256</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.1.m1.1d">256 × 256</annotation></semantics></math> resolution. Subsequently, the EDM model was also trained in the <math alttext="\Gamma" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.2.m2.1"><semantics id="S3.SS2.SSS1.p1.2.m2.1a"><mi id="S3.SS2.SSS1.p1.2.m2.1.1" mathvariant="normal" xref="S3.SS2.SSS1.p1.2.m2.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.2.m2.1b"><ci id="S3.SS2.SSS1.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS1.p1.2.m2.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.2.m2.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.2.m2.1d">roman_Γ</annotation></semantics></math>-VAE latent configuration at latent resolutions of <math alttext="64\times 64" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.3.m3.1"><semantics id="S3.SS2.SSS1.p1.3.m3.1a"><mrow id="S3.SS2.SSS1.p1.3.m3.1.1" xref="S3.SS2.SSS1.p1.3.m3.1.1.cmml"><mn id="S3.SS2.SSS1.p1.3.m3.1.1.2" xref="S3.SS2.SSS1.p1.3.m3.1.1.2.cmml">64</mn><mo id="S3.SS2.SSS1.p1.3.m3.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS2.SSS1.p1.3.m3.1.1.1.cmml">×</mo><mn id="S3.SS2.SSS1.p1.3.m3.1.1.3" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.cmml">64</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.3.m3.1b"><apply id="S3.SS2.SSS1.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1"><times id="S3.SS2.SSS1.p1.3.m3.1.1.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.1"></times><cn id="S3.SS2.SSS1.p1.3.m3.1.1.2.cmml" type="integer" xref="S3.SS2.SSS1.p1.3.m3.1.1.2">64</cn><cn id="S3.SS2.SSS1.p1.3.m3.1.1.3.cmml" type="integer" xref="S3.SS2.SSS1.p1.3.m3.1.1.3">64</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.3.m3.1c">64\times 64</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.3.m3.1d">64 × 64</annotation></semantics></math> and <math alttext="128\times 128" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.4.m4.1"><semantics id="S3.SS2.SSS1.p1.4.m4.1a"><mrow id="S3.SS2.SSS1.p1.4.m4.1.1" xref="S3.SS2.SSS1.p1.4.m4.1.1.cmml"><mn id="S3.SS2.SSS1.p1.4.m4.1.1.2" xref="S3.SS2.SSS1.p1.4.m4.1.1.2.cmml">128</mn><mo id="S3.SS2.SSS1.p1.4.m4.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS2.SSS1.p1.4.m4.1.1.1.cmml">×</mo><mn id="S3.SS2.SSS1.p1.4.m4.1.1.3" xref="S3.SS2.SSS1.p1.4.m4.1.1.3.cmml">128</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.4.m4.1b"><apply id="S3.SS2.SSS1.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1"><times id="S3.SS2.SSS1.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1.1"></times><cn id="S3.SS2.SSS1.p1.4.m4.1.1.2.cmml" type="integer" xref="S3.SS2.SSS1.p1.4.m4.1.1.2">128</cn><cn id="S3.SS2.SSS1.p1.4.m4.1.1.3.cmml" type="integer" xref="S3.SS2.SSS1.p1.4.m4.1.1.3">128</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.4.m4.1c">128\times 128</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS1.p1.4.m4.1d">128 × 128</annotation></semantics></math> for the EDM-L64 and EDM-L128 models, respectively.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS2.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.2 </span>Variational Autoencoders</h4>
<div class="ltx_para" id="S3.SS2.SSS2.p1">
<p class="ltx_p" id="S3.SS2.SSS2.p1.9">The EDM model with <math alttext="\Gamma" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.1.m1.1"><semantics id="S3.SS2.SSS2.p1.1.m1.1a"><mi id="S3.SS2.SSS2.p1.1.m1.1.1" mathvariant="normal" xref="S3.SS2.SSS2.p1.1.m1.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.1.m1.1b"><ci id="S3.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.1.m1.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.1.m1.1d">roman_Γ</annotation></semantics></math>-VAEs encoded inputs into smaller representations of <math alttext="128\times 128" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.2.m2.1"><semantics id="S3.SS2.SSS2.p1.2.m2.1a"><mrow id="S3.SS2.SSS2.p1.2.m2.1.1" xref="S3.SS2.SSS2.p1.2.m2.1.1.cmml"><mn id="S3.SS2.SSS2.p1.2.m2.1.1.2" xref="S3.SS2.SSS2.p1.2.m2.1.1.2.cmml">128</mn><mo id="S3.SS2.SSS2.p1.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS2.SSS2.p1.2.m2.1.1.1.cmml">×</mo><mn id="S3.SS2.SSS2.p1.2.m2.1.1.3" xref="S3.SS2.SSS2.p1.2.m2.1.1.3.cmml">128</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.2.m2.1b"><apply id="S3.SS2.SSS2.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1"><times id="S3.SS2.SSS2.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1.1"></times><cn id="S3.SS2.SSS2.p1.2.m2.1.1.2.cmml" type="integer" xref="S3.SS2.SSS2.p1.2.m2.1.1.2">128</cn><cn id="S3.SS2.SSS2.p1.2.m2.1.1.3.cmml" type="integer" xref="S3.SS2.SSS2.p1.2.m2.1.1.3">128</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.2.m2.1c">128\times 128</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.2.m2.1d">128 × 128</annotation></semantics></math> and <math alttext="64\times 64" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.3.m3.1"><semantics id="S3.SS2.SSS2.p1.3.m3.1a"><mrow id="S3.SS2.SSS2.p1.3.m3.1.1" xref="S3.SS2.SSS2.p1.3.m3.1.1.cmml"><mn id="S3.SS2.SSS2.p1.3.m3.1.1.2" xref="S3.SS2.SSS2.p1.3.m3.1.1.2.cmml">64</mn><mo id="S3.SS2.SSS2.p1.3.m3.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS2.SSS2.p1.3.m3.1.1.1.cmml">×</mo><mn id="S3.SS2.SSS2.p1.3.m3.1.1.3" xref="S3.SS2.SSS2.p1.3.m3.1.1.3.cmml">64</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.3.m3.1b"><apply id="S3.SS2.SSS2.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS2.p1.3.m3.1.1"><times id="S3.SS2.SSS2.p1.3.m3.1.1.1.cmml" xref="S3.SS2.SSS2.p1.3.m3.1.1.1"></times><cn id="S3.SS2.SSS2.p1.3.m3.1.1.2.cmml" type="integer" xref="S3.SS2.SSS2.p1.3.m3.1.1.2">64</cn><cn id="S3.SS2.SSS2.p1.3.m3.1.1.3.cmml" type="integer" xref="S3.SS2.SSS2.p1.3.m3.1.1.3">64</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.3.m3.1c">64\times 64</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.3.m3.1d">64 × 64</annotation></semantics></math> pixels with 2 and 3 encoder layers respectively. The encoder and decoder were symmetric in structure with <math alttext="N_{params}=layer\cdot 2^{6}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.4.m4.1"><semantics id="S3.SS2.SSS2.p1.4.m4.1a"><mrow id="S3.SS2.SSS2.p1.4.m4.1.1" xref="S3.SS2.SSS2.p1.4.m4.1.1.cmml"><msub id="S3.SS2.SSS2.p1.4.m4.1.1.2" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.cmml"><mi id="S3.SS2.SSS2.p1.4.m4.1.1.2.2" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.2.cmml">N</mi><mrow id="S3.SS2.SSS2.p1.4.m4.1.1.2.3" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.cmml"><mi id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.2" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.2.cmml">p</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.3" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.3.cmml">a</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1a" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.4" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.4.cmml">r</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1b" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.5" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.5.cmml">a</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1c" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.6" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.6.cmml">m</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1d" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.7" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.7.cmml">s</mi></mrow></msub><mo id="S3.SS2.SSS2.p1.4.m4.1.1.1" xref="S3.SS2.SSS2.p1.4.m4.1.1.1.cmml">=</mo><mrow id="S3.SS2.SSS2.p1.4.m4.1.1.3" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.cmml"><mrow id="S3.SS2.SSS2.p1.4.m4.1.1.3.2" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.cmml"><mi id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.2" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.2.cmml">l</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.3" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.3.cmml">a</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1a" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.4" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.4.cmml">y</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1b" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.5" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.5.cmml">e</mi><mo id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1c" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1.cmml">⁢</mo><mi id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.6" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.6.cmml">r</mi></mrow><mo id="S3.SS2.SSS2.p1.4.m4.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.1.cmml">⋅</mo><msup id="S3.SS2.SSS2.p1.4.m4.1.1.3.3" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3.cmml"><mn id="S3.SS2.SSS2.p1.4.m4.1.1.3.3.2" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3.2.cmml">2</mn><mn id="S3.SS2.SSS2.p1.4.m4.1.1.3.3.3" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3.3.cmml">6</mn></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.4.m4.1b"><apply id="S3.SS2.SSS2.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1"><eq id="S3.SS2.SSS2.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.1"></eq><apply id="S3.SS2.SSS2.p1.4.m4.1.1.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.4.m4.1.1.2.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2">subscript</csymbol><ci id="S3.SS2.SSS2.p1.4.m4.1.1.2.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.2">𝑁</ci><apply id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3"><times id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.1"></times><ci id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.2">𝑝</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.3.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.3">𝑎</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.4.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.4">𝑟</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.5.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.5">𝑎</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.6.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.6">𝑚</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.2.3.7.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.3.7">𝑠</ci></apply></apply><apply id="S3.SS2.SSS2.p1.4.m4.1.1.3.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3"><ci id="S3.SS2.SSS2.p1.4.m4.1.1.3.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.1">⋅</ci><apply id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2"><times id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.1"></times><ci id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.2">𝑙</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.3.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.3">𝑎</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.4.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.4">𝑦</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.5.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.5">𝑒</ci><ci id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.6.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.6">𝑟</ci></apply><apply id="S3.SS2.SSS2.p1.4.m4.1.1.3.3.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.4.m4.1.1.3.3.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3">superscript</csymbol><cn id="S3.SS2.SSS2.p1.4.m4.1.1.3.3.2.cmml" type="integer" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3.2">2</cn><cn id="S3.SS2.SSS2.p1.4.m4.1.1.3.3.3.cmml" type="integer" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3.3">6</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.4.m4.1c">N_{params}=layer\cdot 2^{6}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.4.m4.1d">italic_N start_POSTSUBSCRIPT italic_p italic_a italic_r italic_a italic_m italic_s end_POSTSUBSCRIPT = italic_l italic_a italic_y italic_e italic_r ⋅ 2 start_POSTSUPERSCRIPT 6 end_POSTSUPERSCRIPT</annotation></semantics></math>. In practical terms, appropriate values of <math alttext="\alpha" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.5.m5.1"><semantics id="S3.SS2.SSS2.p1.5.m5.1a"><mi id="S3.SS2.SSS2.p1.5.m5.1.1" xref="S3.SS2.SSS2.p1.5.m5.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.5.m5.1b"><ci id="S3.SS2.SSS2.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.5.m5.1c">\alpha</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.5.m5.1d">italic_α</annotation></semantics></math> and <math alttext="\beta" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.6.m6.1"><semantics id="S3.SS2.SSS2.p1.6.m6.1a"><mi id="S3.SS2.SSS2.p1.6.m6.1.1" xref="S3.SS2.SSS2.p1.6.m6.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.6.m6.1b"><ci id="S3.SS2.SSS2.p1.6.m6.1.1.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.6.m6.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.6.m6.1d">italic_β</annotation></semantics></math> for our <math alttext="\Gamma" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.7.m7.1"><semantics id="S3.SS2.SSS2.p1.7.m7.1a"><mi id="S3.SS2.SSS2.p1.7.m7.1.1" mathvariant="normal" xref="S3.SS2.SSS2.p1.7.m7.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.7.m7.1b"><ci id="S3.SS2.SSS2.p1.7.m7.1.1.cmml" xref="S3.SS2.SSS2.p1.7.m7.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.7.m7.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.7.m7.1d">roman_Γ</annotation></semantics></math> distribution parameters are needed; for the CAMUS training set, we found, via grid search, appropriate values to be <math alttext="3.75" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.8.m8.1"><semantics id="S3.SS2.SSS2.p1.8.m8.1a"><mn id="S3.SS2.SSS2.p1.8.m8.1.1" xref="S3.SS2.SSS2.p1.8.m8.1.1.cmml">3.75</mn><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.8.m8.1b"><cn id="S3.SS2.SSS2.p1.8.m8.1.1.cmml" type="float" xref="S3.SS2.SSS2.p1.8.m8.1.1">3.75</cn></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.8.m8.1c">3.75</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.8.m8.1d">3.75</annotation></semantics></math> and <math alttext="10.8" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.9.m9.1"><semantics id="S3.SS2.SSS2.p1.9.m9.1a"><mn id="S3.SS2.SSS2.p1.9.m9.1.1" xref="S3.SS2.SSS2.p1.9.m9.1.1.cmml">10.8</mn><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.9.m9.1b"><cn id="S3.SS2.SSS2.p1.9.m9.1.1.cmml" type="float" xref="S3.SS2.SSS2.p1.9.m9.1.1">10.8</cn></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.9.m9.1c">10.8</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.SSS2.p1.9.m9.1d">10.8</annotation></semantics></math> respectively.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Downstream tasks for data evaluation</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.2">Downstream tasks were trained using synthetic data (using the same seantic labels for all generative models). Two downstream tasks were used to assess the quality of the synthetic data: a segmentation task and a view classification task. Both models were trained using a <math alttext="256\times 256" class="ltx_Math" display="inline" id="S3.SS3.p1.1.m1.1"><semantics id="S3.SS3.p1.1.m1.1a"><mrow id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml"><mn id="S3.SS3.p1.1.m1.1.1.2" xref="S3.SS3.p1.1.m1.1.1.2.cmml">256</mn><mo id="S3.SS3.p1.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS3.p1.1.m1.1.1.1.cmml">×</mo><mn id="S3.SS3.p1.1.m1.1.1.3" xref="S3.SS3.p1.1.m1.1.1.3.cmml">256</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><apply id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1"><times id="S3.SS3.p1.1.m1.1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1.1"></times><cn id="S3.SS3.p1.1.m1.1.1.2.cmml" type="integer" xref="S3.SS3.p1.1.m1.1.1.2">256</cn><cn id="S3.SS3.p1.1.m1.1.1.3.cmml" type="integer" xref="S3.SS3.p1.1.m1.1.1.3">256</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">256\times 256</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.1.m1.1d">256 × 256</annotation></semantics></math> size input, for 250 epochs using the Adam optimizer<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib45" title="">45</a>]</cite> with a learning rate of <math alttext="1\times 10^{-4}" class="ltx_Math" display="inline" id="S3.SS3.p1.2.m2.1"><semantics id="S3.SS3.p1.2.m2.1a"><mrow id="S3.SS3.p1.2.m2.1.1" xref="S3.SS3.p1.2.m2.1.1.cmml"><mn id="S3.SS3.p1.2.m2.1.1.2" xref="S3.SS3.p1.2.m2.1.1.2.cmml">1</mn><mo id="S3.SS3.p1.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS3.p1.2.m2.1.1.1.cmml">×</mo><msup id="S3.SS3.p1.2.m2.1.1.3" xref="S3.SS3.p1.2.m2.1.1.3.cmml"><mn id="S3.SS3.p1.2.m2.1.1.3.2" xref="S3.SS3.p1.2.m2.1.1.3.2.cmml">10</mn><mrow id="S3.SS3.p1.2.m2.1.1.3.3" xref="S3.SS3.p1.2.m2.1.1.3.3.cmml"><mo id="S3.SS3.p1.2.m2.1.1.3.3a" xref="S3.SS3.p1.2.m2.1.1.3.3.cmml">−</mo><mn id="S3.SS3.p1.2.m2.1.1.3.3.2" xref="S3.SS3.p1.2.m2.1.1.3.3.2.cmml">4</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.2.m2.1b"><apply id="S3.SS3.p1.2.m2.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1"><times id="S3.SS3.p1.2.m2.1.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1.1"></times><cn id="S3.SS3.p1.2.m2.1.1.2.cmml" type="integer" xref="S3.SS3.p1.2.m2.1.1.2">1</cn><apply id="S3.SS3.p1.2.m2.1.1.3.cmml" xref="S3.SS3.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p1.2.m2.1.1.3.1.cmml" xref="S3.SS3.p1.2.m2.1.1.3">superscript</csymbol><cn id="S3.SS3.p1.2.m2.1.1.3.2.cmml" type="integer" xref="S3.SS3.p1.2.m2.1.1.3.2">10</cn><apply id="S3.SS3.p1.2.m2.1.1.3.3.cmml" xref="S3.SS3.p1.2.m2.1.1.3.3"><minus id="S3.SS3.p1.2.m2.1.1.3.3.1.cmml" xref="S3.SS3.p1.2.m2.1.1.3.3"></minus><cn id="S3.SS3.p1.2.m2.1.1.3.3.2.cmml" type="integer" xref="S3.SS3.p1.2.m2.1.1.3.3.2">4</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.2.m2.1c">1\times 10^{-4}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.2.m2.1d">1 × 10 start_POSTSUPERSCRIPT - 4 end_POSTSUPERSCRIPT</annotation></semantics></math>.</p>
</div>
<section class="ltx_subsubsection" id="S3.SS3.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.1 </span>Segmentation Model</h4>
<div class="ltx_para" id="S3.SS3.SSS1.p1">
<p class="ltx_p" id="S3.SS3.SSS1.p1.1">The segmentation model used was the MONAI <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib46" title="">46</a>]</cite> implementation of nnU-Net proposed by Hatamizadeh et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib47" title="">47</a>]</cite>. This network has been shown to have excellent performance on the CAMUS dataset and can act as a common benchmark.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S3.SS3.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.3.2 </span>Classification Model</h4>
<div class="ltx_para" id="S3.SS3.SSS2.p1">
<p class="ltx_p" id="S3.SS3.SSS2.p1.1">We chose the EfficientNetV2-Small <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib48" title="">48</a>]</cite> model to implement view classification (A2C vs A4C). This model is publicly available via PyTorch and provides a standardized baseline that can be easily reproduced across different research environments.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Experiments</h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">We first provide a brief insight into the appearance of the syntheticly generated images and specifically illustrate what the images generated with the different models look like for increasing number of denoising iterations.</p>
</div>
<div class="ltx_para" id="S3.SS4.p2">
<p class="ltx_p" id="S3.SS4.p2.1">Then we carry out a quantitative analysis of the utility of the synthetic images when used for training the downstream task models. To that end, we first generate five new synthetic datasets, of 9000 images each, using the five generative models (VE, VP, EDM, EDM-L128 and EDM-L64). All five models took the same inputs: 9000 semantic maps. These maps come from the 400 + 50 CAMUS patients used for training and validating the generative models, and adding 5 random transformations to each as described in <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib35" title="">35</a>]</cite>. Note this approach left out 50 patients from the CAMUS dataset for testing the downstream task models.</p>
</div>
<div class="ltx_para" id="S3.SS4.p3">
<p class="ltx_p" id="S3.SS4.p3.3">We trained the downstream task models (segmentation and classification) using the different synthetic datasets until convergence. For the segmentation task, we assessed the segmentation task with the Dice coefficient <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib49" title="">49</a>]</cite> and the mean Hausdorff distance (HD) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib50" title="">50</a>]</cite> of the left ventricular endocardium. These are defined in (<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.E13" title="In 3.4 Experiments ‣ 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">13</span></a>) and (<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S3.E14" title="In 3.4 Experiments ‣ 3 Materials and experiments ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">14</span></a>), respectively.</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E13">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\text{Dice}=\frac{2|X\cap Y|}{|X|+|Y|}" class="ltx_Math" display="block" id="S3.E13.m1.3"><semantics id="S3.E13.m1.3a"><mrow id="S3.E13.m1.3.4" xref="S3.E13.m1.3.4.cmml"><mtext id="S3.E13.m1.3.4.2" xref="S3.E13.m1.3.4.2a.cmml">Dice</mtext><mo id="S3.E13.m1.3.4.1" xref="S3.E13.m1.3.4.1.cmml">=</mo><mfrac id="S3.E13.m1.3.3" xref="S3.E13.m1.3.3.cmml"><mrow id="S3.E13.m1.1.1.1" xref="S3.E13.m1.1.1.1.cmml"><mn id="S3.E13.m1.1.1.1.3" xref="S3.E13.m1.1.1.1.3.cmml">2</mn><mo id="S3.E13.m1.1.1.1.2" xref="S3.E13.m1.1.1.1.2.cmml">⁢</mo><mrow id="S3.E13.m1.1.1.1.1.1" xref="S3.E13.m1.1.1.1.1.2.cmml"><mo id="S3.E13.m1.1.1.1.1.1.2" stretchy="false" xref="S3.E13.m1.1.1.1.1.2.1.cmml">|</mo><mrow id="S3.E13.m1.1.1.1.1.1.1" xref="S3.E13.m1.1.1.1.1.1.1.cmml"><mi id="S3.E13.m1.1.1.1.1.1.1.2" xref="S3.E13.m1.1.1.1.1.1.1.2.cmml">X</mi><mo id="S3.E13.m1.1.1.1.1.1.1.1" xref="S3.E13.m1.1.1.1.1.1.1.1.cmml">∩</mo><mi id="S3.E13.m1.1.1.1.1.1.1.3" xref="S3.E13.m1.1.1.1.1.1.1.3.cmml">Y</mi></mrow><mo id="S3.E13.m1.1.1.1.1.1.3" stretchy="false" xref="S3.E13.m1.1.1.1.1.2.1.cmml">|</mo></mrow></mrow><mrow id="S3.E13.m1.3.3.3" xref="S3.E13.m1.3.3.3.cmml"><mrow id="S3.E13.m1.3.3.3.4.2" xref="S3.E13.m1.3.3.3.4.1.cmml"><mo id="S3.E13.m1.3.3.3.4.2.1" stretchy="false" xref="S3.E13.m1.3.3.3.4.1.1.cmml">|</mo><mi id="S3.E13.m1.2.2.2.1" xref="S3.E13.m1.2.2.2.1.cmml">X</mi><mo id="S3.E13.m1.3.3.3.4.2.2" stretchy="false" xref="S3.E13.m1.3.3.3.4.1.1.cmml">|</mo></mrow><mo id="S3.E13.m1.3.3.3.3" xref="S3.E13.m1.3.3.3.3.cmml">+</mo><mrow id="S3.E13.m1.3.3.3.5.2" xref="S3.E13.m1.3.3.3.5.1.cmml"><mo id="S3.E13.m1.3.3.3.5.2.1" stretchy="false" xref="S3.E13.m1.3.3.3.5.1.1.cmml">|</mo><mi id="S3.E13.m1.3.3.3.2" xref="S3.E13.m1.3.3.3.2.cmml">Y</mi><mo id="S3.E13.m1.3.3.3.5.2.2" stretchy="false" xref="S3.E13.m1.3.3.3.5.1.1.cmml">|</mo></mrow></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S3.E13.m1.3b"><apply id="S3.E13.m1.3.4.cmml" xref="S3.E13.m1.3.4"><eq id="S3.E13.m1.3.4.1.cmml" xref="S3.E13.m1.3.4.1"></eq><ci id="S3.E13.m1.3.4.2a.cmml" xref="S3.E13.m1.3.4.2"><mtext id="S3.E13.m1.3.4.2.cmml" xref="S3.E13.m1.3.4.2">Dice</mtext></ci><apply id="S3.E13.m1.3.3.cmml" xref="S3.E13.m1.3.3"><divide id="S3.E13.m1.3.3.4.cmml" xref="S3.E13.m1.3.3"></divide><apply id="S3.E13.m1.1.1.1.cmml" xref="S3.E13.m1.1.1.1"><times id="S3.E13.m1.1.1.1.2.cmml" xref="S3.E13.m1.1.1.1.2"></times><cn id="S3.E13.m1.1.1.1.3.cmml" type="integer" xref="S3.E13.m1.1.1.1.3">2</cn><apply id="S3.E13.m1.1.1.1.1.2.cmml" xref="S3.E13.m1.1.1.1.1.1"><abs id="S3.E13.m1.1.1.1.1.2.1.cmml" xref="S3.E13.m1.1.1.1.1.1.2"></abs><apply id="S3.E13.m1.1.1.1.1.1.1.cmml" xref="S3.E13.m1.1.1.1.1.1.1"><intersect id="S3.E13.m1.1.1.1.1.1.1.1.cmml" xref="S3.E13.m1.1.1.1.1.1.1.1"></intersect><ci id="S3.E13.m1.1.1.1.1.1.1.2.cmml" xref="S3.E13.m1.1.1.1.1.1.1.2">𝑋</ci><ci id="S3.E13.m1.1.1.1.1.1.1.3.cmml" xref="S3.E13.m1.1.1.1.1.1.1.3">𝑌</ci></apply></apply></apply><apply id="S3.E13.m1.3.3.3.cmml" xref="S3.E13.m1.3.3.3"><plus id="S3.E13.m1.3.3.3.3.cmml" xref="S3.E13.m1.3.3.3.3"></plus><apply id="S3.E13.m1.3.3.3.4.1.cmml" xref="S3.E13.m1.3.3.3.4.2"><abs id="S3.E13.m1.3.3.3.4.1.1.cmml" xref="S3.E13.m1.3.3.3.4.2.1"></abs><ci id="S3.E13.m1.2.2.2.1.cmml" xref="S3.E13.m1.2.2.2.1">𝑋</ci></apply><apply id="S3.E13.m1.3.3.3.5.1.cmml" xref="S3.E13.m1.3.3.3.5.2"><abs id="S3.E13.m1.3.3.3.5.1.1.cmml" xref="S3.E13.m1.3.3.3.5.2.1"></abs><ci id="S3.E13.m1.3.3.3.2.cmml" xref="S3.E13.m1.3.3.3.2">𝑌</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E13.m1.3c">\text{Dice}=\frac{2|X\cap Y|}{|X|+|Y|}</annotation><annotation encoding="application/x-llamapun" id="S3.E13.m1.3d">Dice = divide start_ARG 2 | italic_X ∩ italic_Y | end_ARG start_ARG | italic_X | + | italic_Y | end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(13)</span></td>
</tr></tbody>
</table>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="S6.EGx3">
<tbody id="S3.E14"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_center ltx_eqn_cell" colspan="2"><math alttext="\displaystyle\begin{split}H(X,Y)&amp;=\max(h(X,Y),h(Y,X))\\
h(X,Y)&amp;=\max_{x\in X}\min_{y\in Y}\|x-y\|\end{split}" class="ltx_Math" display="inline" id="S3.E14.m1.45"><semantics id="S3.E14.m1.45a"><mtable columnspacing="0pt" id="S3.E14.m1.45.45.6" rowspacing="0pt" xref="S3.E14.m1.42.42.3.cmml"><mtr id="S3.E14.m1.45.45.6a" xref="S3.E14.m1.42.42.3.cmml"><mtd class="ltx_align_right" columnalign="right" id="S3.E14.m1.45.45.6b" xref="S3.E14.m1.42.42.3.cmml"><mrow id="S3.E14.m1.6.6.6.6.6a" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.1.1.1.1.1.1" xref="S3.E14.m1.1.1.1.1.1.1.cmml">H</mi><mo id="S3.E14.m1.6.6.6.6.6a.7" xref="S3.E14.m1.42.42.3a.cmml">⁢</mo><mrow id="S3.E14.m1.6.6.6.6.6a.8" xref="S3.E14.m1.42.42.3.cmml"><mo id="S3.E14.m1.2.2.2.2.2.2" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">(</mo><mi id="S3.E14.m1.3.3.3.3.3.3" xref="S3.E14.m1.3.3.3.3.3.3.cmml">X</mi><mo id="S3.E14.m1.4.4.4.4.4.4" xref="S3.E14.m1.42.42.3a.cmml">,</mo><mi id="S3.E14.m1.5.5.5.5.5.5" xref="S3.E14.m1.5.5.5.5.5.5.cmml">Y</mi><mo id="S3.E14.m1.6.6.6.6.6.6" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">)</mo></mrow></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E14.m1.45.45.6c" xref="S3.E14.m1.42.42.3.cmml"><mrow id="S3.E14.m1.44.44.5.41.25.19" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.44.44.5.41.25.19.20" xref="S3.E14.m1.42.42.3a.cmml"></mi><mo id="S3.E14.m1.7.7.7.7.1.1" xref="S3.E14.m1.7.7.7.7.1.1.cmml">=</mo><mrow id="S3.E14.m1.44.44.5.41.25.19.19.2" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.8.8.8.8.2.2" xref="S3.E14.m1.8.8.8.8.2.2.cmml">max</mi><mo id="S3.E14.m1.44.44.5.41.25.19.19.2a" xref="S3.E14.m1.42.42.3a.cmml">⁡</mo><mrow id="S3.E14.m1.44.44.5.41.25.19.19.2.2" xref="S3.E14.m1.42.42.3.cmml"><mo id="S3.E14.m1.9.9.9.9.3.3" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">(</mo><mrow id="S3.E14.m1.43.43.4.40.24.18.18.1.1.1" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.10.10.10.10.4.4" xref="S3.E14.m1.10.10.10.10.4.4.cmml">h</mi><mo id="S3.E14.m1.43.43.4.40.24.18.18.1.1.1.1" xref="S3.E14.m1.42.42.3a.cmml">⁢</mo><mrow id="S3.E14.m1.43.43.4.40.24.18.18.1.1.1.2" xref="S3.E14.m1.42.42.3.cmml"><mo id="S3.E14.m1.11.11.11.11.5.5" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">(</mo><mi id="S3.E14.m1.12.12.12.12.6.6" xref="S3.E14.m1.12.12.12.12.6.6.cmml">X</mi><mo id="S3.E14.m1.13.13.13.13.7.7" xref="S3.E14.m1.42.42.3a.cmml">,</mo><mi id="S3.E14.m1.14.14.14.14.8.8" xref="S3.E14.m1.14.14.14.14.8.8.cmml">Y</mi><mo id="S3.E14.m1.15.15.15.15.9.9" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">)</mo></mrow></mrow><mo id="S3.E14.m1.16.16.16.16.10.10" xref="S3.E14.m1.42.42.3a.cmml">,</mo><mrow id="S3.E14.m1.44.44.5.41.25.19.19.2.2.2" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.17.17.17.17.11.11" xref="S3.E14.m1.17.17.17.17.11.11.cmml">h</mi><mo id="S3.E14.m1.44.44.5.41.25.19.19.2.2.2.1" xref="S3.E14.m1.42.42.3a.cmml">⁢</mo><mrow id="S3.E14.m1.44.44.5.41.25.19.19.2.2.2.2" xref="S3.E14.m1.42.42.3.cmml"><mo id="S3.E14.m1.18.18.18.18.12.12" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">(</mo><mi id="S3.E14.m1.19.19.19.19.13.13" xref="S3.E14.m1.19.19.19.19.13.13.cmml">Y</mi><mo id="S3.E14.m1.20.20.20.20.14.14" xref="S3.E14.m1.42.42.3a.cmml">,</mo><mi id="S3.E14.m1.21.21.21.21.15.15" xref="S3.E14.m1.21.21.21.21.15.15.cmml">X</mi><mo id="S3.E14.m1.22.22.22.22.16.16" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">)</mo></mrow></mrow><mo id="S3.E14.m1.23.23.23.23.17.17" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">)</mo></mrow></mrow></mrow></mtd></mtr><mtr id="S3.E14.m1.45.45.6d" xref="S3.E14.m1.42.42.3.cmml"><mtd class="ltx_align_right" columnalign="right" id="S3.E14.m1.45.45.6e" xref="S3.E14.m1.42.42.3.cmml"><mrow id="S3.E14.m1.29.29.29.6.6a" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.24.24.24.1.1.1" xref="S3.E14.m1.24.24.24.1.1.1.cmml">h</mi><mo id="S3.E14.m1.29.29.29.6.6a.7" xref="S3.E14.m1.42.42.3a.cmml">⁢</mo><mrow id="S3.E14.m1.29.29.29.6.6a.8" xref="S3.E14.m1.42.42.3.cmml"><mo id="S3.E14.m1.25.25.25.2.2.2" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">(</mo><mi id="S3.E14.m1.26.26.26.3.3.3" xref="S3.E14.m1.26.26.26.3.3.3.cmml">X</mi><mo id="S3.E14.m1.27.27.27.4.4.4" xref="S3.E14.m1.42.42.3a.cmml">,</mo><mi id="S3.E14.m1.28.28.28.5.5.5" xref="S3.E14.m1.28.28.28.5.5.5.cmml">Y</mi><mo id="S3.E14.m1.29.29.29.6.6.6" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">)</mo></mrow></mrow></mtd><mtd class="ltx_align_left" columnalign="left" id="S3.E14.m1.45.45.6f" xref="S3.E14.m1.42.42.3.cmml"><mrow id="S3.E14.m1.45.45.6.42.17.11" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.45.45.6.42.17.11.12" xref="S3.E14.m1.42.42.3a.cmml"></mi><mo id="S3.E14.m1.30.30.30.7.1.1" xref="S3.E14.m1.30.30.30.7.1.1.cmml">=</mo><mrow id="S3.E14.m1.45.45.6.42.17.11.11" xref="S3.E14.m1.42.42.3.cmml"><munder id="S3.E14.m1.45.45.6.42.17.11.11.2" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.31.31.31.8.2.2" xref="S3.E14.m1.31.31.31.8.2.2.cmml">max</mi><mrow id="S3.E14.m1.32.32.32.9.3.3.1" xref="S3.E14.m1.32.32.32.9.3.3.1.cmml"><mi id="S3.E14.m1.32.32.32.9.3.3.1.2" xref="S3.E14.m1.32.32.32.9.3.3.1.2.cmml">x</mi><mo id="S3.E14.m1.32.32.32.9.3.3.1.1" xref="S3.E14.m1.32.32.32.9.3.3.1.1.cmml">∈</mo><mi id="S3.E14.m1.32.32.32.9.3.3.1.3" xref="S3.E14.m1.32.32.32.9.3.3.1.3.cmml">X</mi></mrow></munder><mo id="S3.E14.m1.45.45.6.42.17.11.11a" lspace="0.167em" xref="S3.E14.m1.42.42.3a.cmml">⁡</mo><mrow id="S3.E14.m1.45.45.6.42.17.11.11.1" xref="S3.E14.m1.42.42.3.cmml"><munder id="S3.E14.m1.45.45.6.42.17.11.11.1.2" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.33.33.33.10.4.4" xref="S3.E14.m1.33.33.33.10.4.4.cmml">min</mi><mrow id="S3.E14.m1.34.34.34.11.5.5.1" xref="S3.E14.m1.34.34.34.11.5.5.1.cmml"><mi id="S3.E14.m1.34.34.34.11.5.5.1.2" xref="S3.E14.m1.34.34.34.11.5.5.1.2.cmml">y</mi><mo id="S3.E14.m1.34.34.34.11.5.5.1.1" xref="S3.E14.m1.34.34.34.11.5.5.1.1.cmml">∈</mo><mi id="S3.E14.m1.34.34.34.11.5.5.1.3" xref="S3.E14.m1.34.34.34.11.5.5.1.3.cmml">Y</mi></mrow></munder><mo id="S3.E14.m1.45.45.6.42.17.11.11.1a" xref="S3.E14.m1.42.42.3a.cmml">⁡</mo><mrow id="S3.E14.m1.45.45.6.42.17.11.11.1.1.1" xref="S3.E14.m1.42.42.3.cmml"><mo id="S3.E14.m1.35.35.35.12.6.6" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">‖</mo><mrow id="S3.E14.m1.45.45.6.42.17.11.11.1.1.1.1" xref="S3.E14.m1.42.42.3.cmml"><mi id="S3.E14.m1.36.36.36.13.7.7" xref="S3.E14.m1.36.36.36.13.7.7.cmml">x</mi><mo id="S3.E14.m1.37.37.37.14.8.8" xref="S3.E14.m1.37.37.37.14.8.8.cmml">−</mo><mi id="S3.E14.m1.38.38.38.15.9.9" xref="S3.E14.m1.38.38.38.15.9.9.cmml">y</mi></mrow><mo id="S3.E14.m1.39.39.39.16.10.10" stretchy="false" xref="S3.E14.m1.42.42.3a.cmml">‖</mo></mrow></mrow></mrow></mrow></mtd></mtr></mtable><annotation-xml encoding="MathML-Content" id="S3.E14.m1.45b"><apply id="S3.E14.m1.42.42.3.cmml" xref="S3.E14.m1.45.45.6"><and id="S3.E14.m1.42.42.3a.cmml" xref="S3.E14.m1.6.6.6.6.6a.7"></and><apply id="S3.E14.m1.42.42.3b.cmml" xref="S3.E14.m1.45.45.6"><eq id="S3.E14.m1.7.7.7.7.1.1.cmml" xref="S3.E14.m1.7.7.7.7.1.1"></eq><apply id="S3.E14.m1.42.42.3.5.cmml" xref="S3.E14.m1.45.45.6"><times id="S3.E14.m1.42.42.3.5.1.cmml" xref="S3.E14.m1.6.6.6.6.6a.7"></times><ci id="S3.E14.m1.1.1.1.1.1.1.cmml" xref="S3.E14.m1.1.1.1.1.1.1">𝐻</ci><interval closure="open" id="S3.E14.m1.42.42.3.5.3.cmml" xref="S3.E14.m1.45.45.6"><ci id="S3.E14.m1.3.3.3.3.3.3.cmml" xref="S3.E14.m1.3.3.3.3.3.3">𝑋</ci><ci id="S3.E14.m1.5.5.5.5.5.5.cmml" xref="S3.E14.m1.5.5.5.5.5.5">𝑌</ci></interval></apply><apply id="S3.E14.m1.41.41.2.2.cmml" xref="S3.E14.m1.45.45.6"><times id="S3.E14.m1.41.41.2.2.3.cmml" xref="S3.E14.m1.6.6.6.6.6a.7"></times><apply id="S3.E14.m1.41.41.2.2.2.3.cmml" xref="S3.E14.m1.45.45.6"><max id="S3.E14.m1.8.8.8.8.2.2.cmml" xref="S3.E14.m1.8.8.8.8.2.2"></max><apply id="S3.E14.m1.40.40.1.1.1.1.1.1.cmml" xref="S3.E14.m1.45.45.6"><times id="S3.E14.m1.40.40.1.1.1.1.1.1.1.cmml" xref="S3.E14.m1.45.45.6"></times><ci id="S3.E14.m1.10.10.10.10.4.4.cmml" xref="S3.E14.m1.10.10.10.10.4.4">ℎ</ci><interval closure="open" id="S3.E14.m1.40.40.1.1.1.1.1.1.3.cmml" xref="S3.E14.m1.45.45.6"><ci id="S3.E14.m1.12.12.12.12.6.6.cmml" xref="S3.E14.m1.12.12.12.12.6.6">𝑋</ci><ci id="S3.E14.m1.14.14.14.14.8.8.cmml" xref="S3.E14.m1.14.14.14.14.8.8">𝑌</ci></interval></apply><apply id="S3.E14.m1.41.41.2.2.2.2.2.2.cmml" xref="S3.E14.m1.45.45.6"><times id="S3.E14.m1.41.41.2.2.2.2.2.2.1.cmml" xref="S3.E14.m1.45.45.6"></times><ci id="S3.E14.m1.17.17.17.17.11.11.cmml" xref="S3.E14.m1.17.17.17.17.11.11">ℎ</ci><interval closure="open" id="S3.E14.m1.41.41.2.2.2.2.2.2.3.cmml" xref="S3.E14.m1.45.45.6"><ci id="S3.E14.m1.19.19.19.19.13.13.cmml" xref="S3.E14.m1.19.19.19.19.13.13">𝑌</ci><ci id="S3.E14.m1.21.21.21.21.15.15.cmml" xref="S3.E14.m1.21.21.21.21.15.15">𝑋</ci></interval></apply></apply><ci id="S3.E14.m1.24.24.24.1.1.1.cmml" xref="S3.E14.m1.24.24.24.1.1.1">ℎ</ci><interval closure="open" id="S3.E14.m1.41.41.2.2.5.cmml" xref="S3.E14.m1.45.45.6"><ci id="S3.E14.m1.26.26.26.3.3.3.cmml" xref="S3.E14.m1.26.26.26.3.3.3">𝑋</ci><ci id="S3.E14.m1.28.28.28.5.5.5.cmml" xref="S3.E14.m1.28.28.28.5.5.5">𝑌</ci></interval></apply></apply><apply id="S3.E14.m1.42.42.3c.cmml" xref="S3.E14.m1.45.45.6"><eq id="S3.E14.m1.30.30.30.7.1.1.cmml" xref="S3.E14.m1.30.30.30.7.1.1"></eq><share href="https://arxiv.org/html/2409.19371v1#S3.E14.m1.41.41.2.2.cmml" id="S3.E14.m1.42.42.3d.cmml" xref="S3.E14.m1.6.6.6.6.6a.7"></share><apply id="S3.E14.m1.42.42.3.3.cmml" xref="S3.E14.m1.45.45.6"><apply id="S3.E14.m1.42.42.3.3.2.cmml" xref="S3.E14.m1.45.45.6"><csymbol cd="ambiguous" id="S3.E14.m1.42.42.3.3.2.1.cmml" xref="S3.E14.m1.6.6.6.6.6a.7">subscript</csymbol><max id="S3.E14.m1.31.31.31.8.2.2.cmml" xref="S3.E14.m1.31.31.31.8.2.2"></max><apply id="S3.E14.m1.32.32.32.9.3.3.1.cmml" xref="S3.E14.m1.32.32.32.9.3.3.1"><in id="S3.E14.m1.32.32.32.9.3.3.1.1.cmml" xref="S3.E14.m1.32.32.32.9.3.3.1.1"></in><ci id="S3.E14.m1.32.32.32.9.3.3.1.2.cmml" xref="S3.E14.m1.32.32.32.9.3.3.1.2">𝑥</ci><ci id="S3.E14.m1.32.32.32.9.3.3.1.3.cmml" xref="S3.E14.m1.32.32.32.9.3.3.1.3">𝑋</ci></apply></apply><apply id="S3.E14.m1.42.42.3.3.1.cmml" xref="S3.E14.m1.45.45.6"><apply id="S3.E14.m1.42.42.3.3.1.2.cmml" xref="S3.E14.m1.45.45.6"><csymbol cd="ambiguous" id="S3.E14.m1.42.42.3.3.1.2.1.cmml" xref="S3.E14.m1.6.6.6.6.6a.7">subscript</csymbol><min id="S3.E14.m1.33.33.33.10.4.4.cmml" xref="S3.E14.m1.33.33.33.10.4.4"></min><apply id="S3.E14.m1.34.34.34.11.5.5.1.cmml" xref="S3.E14.m1.34.34.34.11.5.5.1"><in id="S3.E14.m1.34.34.34.11.5.5.1.1.cmml" xref="S3.E14.m1.34.34.34.11.5.5.1.1"></in><ci id="S3.E14.m1.34.34.34.11.5.5.1.2.cmml" xref="S3.E14.m1.34.34.34.11.5.5.1.2">𝑦</ci><ci id="S3.E14.m1.34.34.34.11.5.5.1.3.cmml" xref="S3.E14.m1.34.34.34.11.5.5.1.3">𝑌</ci></apply></apply><apply id="S3.E14.m1.42.42.3.3.1.1.2.cmml" xref="S3.E14.m1.45.45.6"><csymbol cd="latexml" id="S3.E14.m1.42.42.3.3.1.1.2.1.cmml" xref="S3.E14.m1.45.45.6">delimited-∥∥</csymbol><apply id="S3.E14.m1.42.42.3.3.1.1.1.1.cmml" xref="S3.E14.m1.45.45.6"><minus id="S3.E14.m1.37.37.37.14.8.8.cmml" xref="S3.E14.m1.37.37.37.14.8.8"></minus><ci id="S3.E14.m1.36.36.36.13.7.7.cmml" xref="S3.E14.m1.36.36.36.13.7.7">𝑥</ci><ci id="S3.E14.m1.38.38.38.15.9.9.cmml" xref="S3.E14.m1.38.38.38.15.9.9">𝑦</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E14.m1.45c">\displaystyle\begin{split}H(X,Y)&amp;=\max(h(X,Y),h(Y,X))\\
h(X,Y)&amp;=\max_{x\in X}\min_{y\in Y}\|x-y\|\end{split}</annotation><annotation encoding="application/x-llamapun" id="S3.E14.m1.45d">start_ROW start_CELL italic_H ( italic_X , italic_Y ) end_CELL start_CELL = roman_max ( italic_h ( italic_X , italic_Y ) , italic_h ( italic_Y , italic_X ) ) end_CELL end_ROW start_ROW start_CELL italic_h ( italic_X , italic_Y ) end_CELL start_CELL = roman_max start_POSTSUBSCRIPT italic_x ∈ italic_X end_POSTSUBSCRIPT roman_min start_POSTSUBSCRIPT italic_y ∈ italic_Y end_POSTSUBSCRIPT ∥ italic_x - italic_y ∥ end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(14)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS4.p3.2">where <math alttext="X" class="ltx_Math" display="inline" id="S3.SS4.p3.1.m1.1"><semantics id="S3.SS4.p3.1.m1.1a"><mi id="S3.SS4.p3.1.m1.1.1" xref="S3.SS4.p3.1.m1.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.1.m1.1b"><ci id="S3.SS4.p3.1.m1.1.1.cmml" xref="S3.SS4.p3.1.m1.1.1">𝑋</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.1.m1.1c">X</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.1.m1.1d">italic_X</annotation></semantics></math> and <math alttext="Y" class="ltx_Math" display="inline" id="S3.SS4.p3.2.m2.1"><semantics id="S3.SS4.p3.2.m2.1a"><mi id="S3.SS4.p3.2.m2.1.1" xref="S3.SS4.p3.2.m2.1.1.cmml">Y</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.2.m2.1b"><ci id="S3.SS4.p3.2.m2.1.1.cmml" xref="S3.SS4.p3.2.m2.1.1">𝑌</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.2.m2.1c">Y</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p3.2.m2.1d">italic_Y</annotation></semantics></math> represent the pixels with non-zero values in the prediction and ground truth segmentation, respectively.</p>
</div>
<div class="ltx_para" id="S3.SS4.p4">
<p class="ltx_p" id="S3.SS4.p4.1">For the classification task, we used the classification accuracy, defined for the binary classification task as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E15">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\text{A}=\frac{TP+TN}{TP+TN+FP+FN}." class="ltx_Math" display="block" id="S3.E15.m1.1"><semantics id="S3.E15.m1.1a"><mrow id="S3.E15.m1.1.1.1" xref="S3.E15.m1.1.1.1.1.cmml"><mrow id="S3.E15.m1.1.1.1.1" xref="S3.E15.m1.1.1.1.1.cmml"><mtext id="S3.E15.m1.1.1.1.1.2" xref="S3.E15.m1.1.1.1.1.2a.cmml">A</mtext><mo id="S3.E15.m1.1.1.1.1.1" xref="S3.E15.m1.1.1.1.1.1.cmml">=</mo><mfrac id="S3.E15.m1.1.1.1.1.3" xref="S3.E15.m1.1.1.1.1.3.cmml"><mrow id="S3.E15.m1.1.1.1.1.3.2" xref="S3.E15.m1.1.1.1.1.3.2.cmml"><mrow id="S3.E15.m1.1.1.1.1.3.2.2" xref="S3.E15.m1.1.1.1.1.3.2.2.cmml"><mi id="S3.E15.m1.1.1.1.1.3.2.2.2" xref="S3.E15.m1.1.1.1.1.3.2.2.2.cmml">T</mi><mo id="S3.E15.m1.1.1.1.1.3.2.2.1" xref="S3.E15.m1.1.1.1.1.3.2.2.1.cmml">⁢</mo><mi id="S3.E15.m1.1.1.1.1.3.2.2.3" xref="S3.E15.m1.1.1.1.1.3.2.2.3.cmml">P</mi></mrow><mo id="S3.E15.m1.1.1.1.1.3.2.1" xref="S3.E15.m1.1.1.1.1.3.2.1.cmml">+</mo><mrow id="S3.E15.m1.1.1.1.1.3.2.3" xref="S3.E15.m1.1.1.1.1.3.2.3.cmml"><mi id="S3.E15.m1.1.1.1.1.3.2.3.2" xref="S3.E15.m1.1.1.1.1.3.2.3.2.cmml">T</mi><mo id="S3.E15.m1.1.1.1.1.3.2.3.1" xref="S3.E15.m1.1.1.1.1.3.2.3.1.cmml">⁢</mo><mi id="S3.E15.m1.1.1.1.1.3.2.3.3" xref="S3.E15.m1.1.1.1.1.3.2.3.3.cmml">N</mi></mrow></mrow><mrow id="S3.E15.m1.1.1.1.1.3.3" xref="S3.E15.m1.1.1.1.1.3.3.cmml"><mrow id="S3.E15.m1.1.1.1.1.3.3.2" xref="S3.E15.m1.1.1.1.1.3.3.2.cmml"><mi id="S3.E15.m1.1.1.1.1.3.3.2.2" xref="S3.E15.m1.1.1.1.1.3.3.2.2.cmml">T</mi><mo id="S3.E15.m1.1.1.1.1.3.3.2.1" xref="S3.E15.m1.1.1.1.1.3.3.2.1.cmml">⁢</mo><mi id="S3.E15.m1.1.1.1.1.3.3.2.3" xref="S3.E15.m1.1.1.1.1.3.3.2.3.cmml">P</mi></mrow><mo id="S3.E15.m1.1.1.1.1.3.3.1" xref="S3.E15.m1.1.1.1.1.3.3.1.cmml">+</mo><mrow id="S3.E15.m1.1.1.1.1.3.3.3" xref="S3.E15.m1.1.1.1.1.3.3.3.cmml"><mi id="S3.E15.m1.1.1.1.1.3.3.3.2" xref="S3.E15.m1.1.1.1.1.3.3.3.2.cmml">T</mi><mo id="S3.E15.m1.1.1.1.1.3.3.3.1" xref="S3.E15.m1.1.1.1.1.3.3.3.1.cmml">⁢</mo><mi id="S3.E15.m1.1.1.1.1.3.3.3.3" xref="S3.E15.m1.1.1.1.1.3.3.3.3.cmml">N</mi></mrow><mo id="S3.E15.m1.1.1.1.1.3.3.1a" xref="S3.E15.m1.1.1.1.1.3.3.1.cmml">+</mo><mrow id="S3.E15.m1.1.1.1.1.3.3.4" xref="S3.E15.m1.1.1.1.1.3.3.4.cmml"><mi id="S3.E15.m1.1.1.1.1.3.3.4.2" xref="S3.E15.m1.1.1.1.1.3.3.4.2.cmml">F</mi><mo id="S3.E15.m1.1.1.1.1.3.3.4.1" xref="S3.E15.m1.1.1.1.1.3.3.4.1.cmml">⁢</mo><mi id="S3.E15.m1.1.1.1.1.3.3.4.3" xref="S3.E15.m1.1.1.1.1.3.3.4.3.cmml">P</mi></mrow><mo id="S3.E15.m1.1.1.1.1.3.3.1b" xref="S3.E15.m1.1.1.1.1.3.3.1.cmml">+</mo><mrow id="S3.E15.m1.1.1.1.1.3.3.5" xref="S3.E15.m1.1.1.1.1.3.3.5.cmml"><mi id="S3.E15.m1.1.1.1.1.3.3.5.2" xref="S3.E15.m1.1.1.1.1.3.3.5.2.cmml">F</mi><mo id="S3.E15.m1.1.1.1.1.3.3.5.1" xref="S3.E15.m1.1.1.1.1.3.3.5.1.cmml">⁢</mo><mi id="S3.E15.m1.1.1.1.1.3.3.5.3" xref="S3.E15.m1.1.1.1.1.3.3.5.3.cmml">N</mi></mrow></mrow></mfrac></mrow><mo id="S3.E15.m1.1.1.1.2" lspace="0em" xref="S3.E15.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E15.m1.1b"><apply id="S3.E15.m1.1.1.1.1.cmml" xref="S3.E15.m1.1.1.1"><eq id="S3.E15.m1.1.1.1.1.1.cmml" xref="S3.E15.m1.1.1.1.1.1"></eq><ci id="S3.E15.m1.1.1.1.1.2a.cmml" xref="S3.E15.m1.1.1.1.1.2"><mtext id="S3.E15.m1.1.1.1.1.2.cmml" xref="S3.E15.m1.1.1.1.1.2">A</mtext></ci><apply id="S3.E15.m1.1.1.1.1.3.cmml" xref="S3.E15.m1.1.1.1.1.3"><divide id="S3.E15.m1.1.1.1.1.3.1.cmml" xref="S3.E15.m1.1.1.1.1.3"></divide><apply id="S3.E15.m1.1.1.1.1.3.2.cmml" xref="S3.E15.m1.1.1.1.1.3.2"><plus id="S3.E15.m1.1.1.1.1.3.2.1.cmml" xref="S3.E15.m1.1.1.1.1.3.2.1"></plus><apply id="S3.E15.m1.1.1.1.1.3.2.2.cmml" xref="S3.E15.m1.1.1.1.1.3.2.2"><times id="S3.E15.m1.1.1.1.1.3.2.2.1.cmml" xref="S3.E15.m1.1.1.1.1.3.2.2.1"></times><ci id="S3.E15.m1.1.1.1.1.3.2.2.2.cmml" xref="S3.E15.m1.1.1.1.1.3.2.2.2">𝑇</ci><ci id="S3.E15.m1.1.1.1.1.3.2.2.3.cmml" xref="S3.E15.m1.1.1.1.1.3.2.2.3">𝑃</ci></apply><apply id="S3.E15.m1.1.1.1.1.3.2.3.cmml" xref="S3.E15.m1.1.1.1.1.3.2.3"><times id="S3.E15.m1.1.1.1.1.3.2.3.1.cmml" xref="S3.E15.m1.1.1.1.1.3.2.3.1"></times><ci id="S3.E15.m1.1.1.1.1.3.2.3.2.cmml" xref="S3.E15.m1.1.1.1.1.3.2.3.2">𝑇</ci><ci id="S3.E15.m1.1.1.1.1.3.2.3.3.cmml" xref="S3.E15.m1.1.1.1.1.3.2.3.3">𝑁</ci></apply></apply><apply id="S3.E15.m1.1.1.1.1.3.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3"><plus id="S3.E15.m1.1.1.1.1.3.3.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.1"></plus><apply id="S3.E15.m1.1.1.1.1.3.3.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.2"><times id="S3.E15.m1.1.1.1.1.3.3.2.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.2.1"></times><ci id="S3.E15.m1.1.1.1.1.3.3.2.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.2.2">𝑇</ci><ci id="S3.E15.m1.1.1.1.1.3.3.2.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.2.3">𝑃</ci></apply><apply id="S3.E15.m1.1.1.1.1.3.3.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.3"><times id="S3.E15.m1.1.1.1.1.3.3.3.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.3.1"></times><ci id="S3.E15.m1.1.1.1.1.3.3.3.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.3.2">𝑇</ci><ci id="S3.E15.m1.1.1.1.1.3.3.3.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.3.3">𝑁</ci></apply><apply id="S3.E15.m1.1.1.1.1.3.3.4.cmml" xref="S3.E15.m1.1.1.1.1.3.3.4"><times id="S3.E15.m1.1.1.1.1.3.3.4.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.4.1"></times><ci id="S3.E15.m1.1.1.1.1.3.3.4.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.4.2">𝐹</ci><ci id="S3.E15.m1.1.1.1.1.3.3.4.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.4.3">𝑃</ci></apply><apply id="S3.E15.m1.1.1.1.1.3.3.5.cmml" xref="S3.E15.m1.1.1.1.1.3.3.5"><times id="S3.E15.m1.1.1.1.1.3.3.5.1.cmml" xref="S3.E15.m1.1.1.1.1.3.3.5.1"></times><ci id="S3.E15.m1.1.1.1.1.3.3.5.2.cmml" xref="S3.E15.m1.1.1.1.1.3.3.5.2">𝐹</ci><ci id="S3.E15.m1.1.1.1.1.3.3.5.3.cmml" xref="S3.E15.m1.1.1.1.1.3.3.5.3">𝑁</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E15.m1.1c">\text{A}=\frac{TP+TN}{TP+TN+FP+FN}.</annotation><annotation encoding="application/x-llamapun" id="S3.E15.m1.1d">A = divide start_ARG italic_T italic_P + italic_T italic_N end_ARG start_ARG italic_T italic_P + italic_T italic_N + italic_F italic_P + italic_F italic_N end_ARG .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(15)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS4.p4.2">where TP, TN, FP, and FN are true positive, true negative, false positive, and false negative classifications, respectively.</p>
</div>
<div class="ltx_para" id="S3.SS4.p5">
<p class="ltx_p" id="S3.SS4.p5.1">Both the classification and segmentation experiments were bootstrapped by taking a random <math alttext="80\%" class="ltx_Math" display="inline" id="S3.SS4.p5.1.m1.1"><semantics id="S3.SS4.p5.1.m1.1a"><mrow id="S3.SS4.p5.1.m1.1.1" xref="S3.SS4.p5.1.m1.1.1.cmml"><mn id="S3.SS4.p5.1.m1.1.1.2" xref="S3.SS4.p5.1.m1.1.1.2.cmml">80</mn><mo id="S3.SS4.p5.1.m1.1.1.1" xref="S3.SS4.p5.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p5.1.m1.1b"><apply id="S3.SS4.p5.1.m1.1.1.cmml" xref="S3.SS4.p5.1.m1.1.1"><csymbol cd="latexml" id="S3.SS4.p5.1.m1.1.1.1.cmml" xref="S3.SS4.p5.1.m1.1.1.1">percent</csymbol><cn id="S3.SS4.p5.1.m1.1.1.2.cmml" type="integer" xref="S3.SS4.p5.1.m1.1.1.2">80</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p5.1.m1.1c">80\%</annotation><annotation encoding="application/x-llamapun" id="S3.SS4.p5.1.m1.1d">80 %</annotation></semantics></math> subset of the test set and repeating this for 1000 iterations. The values reported are the mean values and standard deviations over 1000 iterations.</p>
</div>
<div class="ltx_para" id="S3.SS4.p6">
<p class="ltx_p" id="S3.SS4.p6.1">Last, we carried out a computational cost analysis by measuring the throughput for each generative model (in images per second) on the same compute platform and correlated that with the number of Neural Function Evaluations (NFEs) and downstream task performance.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.5 </span>Further implementation details and code availability</h3>
<div class="ltx_para" id="S3.SS5.p1">
<p class="ltx_p" id="S3.SS5.p1.6">All models were trained on 6<math alttext="\times" class="ltx_Math" display="inline" id="S3.SS5.p1.1.m1.1"><semantics id="S3.SS5.p1.1.m1.1a"><mo id="S3.SS5.p1.1.m1.1.1" xref="S3.SS5.p1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.1.m1.1b"><times id="S3.SS5.p1.1.m1.1.1.cmml" xref="S3.SS5.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.1.m1.1c">\times</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.1.m1.1d">×</annotation></semantics></math>Nvidia 40GB A100 graphics processing units using Pytorch 2.4 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib51" title="">51</a>]</cite>. The diffusion models were trained for <math alttext="5\times 10^{5}" class="ltx_Math" display="inline" id="S3.SS5.p1.2.m2.1"><semantics id="S3.SS5.p1.2.m2.1a"><mrow id="S3.SS5.p1.2.m2.1.1" xref="S3.SS5.p1.2.m2.1.1.cmml"><mn id="S3.SS5.p1.2.m2.1.1.2" xref="S3.SS5.p1.2.m2.1.1.2.cmml">5</mn><mo id="S3.SS5.p1.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS5.p1.2.m2.1.1.1.cmml">×</mo><msup id="S3.SS5.p1.2.m2.1.1.3" xref="S3.SS5.p1.2.m2.1.1.3.cmml"><mn id="S3.SS5.p1.2.m2.1.1.3.2" xref="S3.SS5.p1.2.m2.1.1.3.2.cmml">10</mn><mn id="S3.SS5.p1.2.m2.1.1.3.3" xref="S3.SS5.p1.2.m2.1.1.3.3.cmml">5</mn></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.2.m2.1b"><apply id="S3.SS5.p1.2.m2.1.1.cmml" xref="S3.SS5.p1.2.m2.1.1"><times id="S3.SS5.p1.2.m2.1.1.1.cmml" xref="S3.SS5.p1.2.m2.1.1.1"></times><cn id="S3.SS5.p1.2.m2.1.1.2.cmml" type="integer" xref="S3.SS5.p1.2.m2.1.1.2">5</cn><apply id="S3.SS5.p1.2.m2.1.1.3.cmml" xref="S3.SS5.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS5.p1.2.m2.1.1.3.1.cmml" xref="S3.SS5.p1.2.m2.1.1.3">superscript</csymbol><cn id="S3.SS5.p1.2.m2.1.1.3.2.cmml" type="integer" xref="S3.SS5.p1.2.m2.1.1.3.2">10</cn><cn id="S3.SS5.p1.2.m2.1.1.3.3.cmml" type="integer" xref="S3.SS5.p1.2.m2.1.1.3.3">5</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.2.m2.1c">5\times 10^{5}</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.2.m2.1d">5 × 10 start_POSTSUPERSCRIPT 5 end_POSTSUPERSCRIPT</annotation></semantics></math> images with global batch sizes of 24, 54, and 120, for the <math alttext="256\times 256" class="ltx_Math" display="inline" id="S3.SS5.p1.3.m3.1"><semantics id="S3.SS5.p1.3.m3.1a"><mrow id="S3.SS5.p1.3.m3.1.1" xref="S3.SS5.p1.3.m3.1.1.cmml"><mn id="S3.SS5.p1.3.m3.1.1.2" xref="S3.SS5.p1.3.m3.1.1.2.cmml">256</mn><mo id="S3.SS5.p1.3.m3.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS5.p1.3.m3.1.1.1.cmml">×</mo><mn id="S3.SS5.p1.3.m3.1.1.3" xref="S3.SS5.p1.3.m3.1.1.3.cmml">256</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.3.m3.1b"><apply id="S3.SS5.p1.3.m3.1.1.cmml" xref="S3.SS5.p1.3.m3.1.1"><times id="S3.SS5.p1.3.m3.1.1.1.cmml" xref="S3.SS5.p1.3.m3.1.1.1"></times><cn id="S3.SS5.p1.3.m3.1.1.2.cmml" type="integer" xref="S3.SS5.p1.3.m3.1.1.2">256</cn><cn id="S3.SS5.p1.3.m3.1.1.3.cmml" type="integer" xref="S3.SS5.p1.3.m3.1.1.3">256</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.3.m3.1c">256\times 256</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.3.m3.1d">256 × 256</annotation></semantics></math> native resolution, <math alttext="128\times 128" class="ltx_Math" display="inline" id="S3.SS5.p1.4.m4.1"><semantics id="S3.SS5.p1.4.m4.1a"><mrow id="S3.SS5.p1.4.m4.1.1" xref="S3.SS5.p1.4.m4.1.1.cmml"><mn id="S3.SS5.p1.4.m4.1.1.2" xref="S3.SS5.p1.4.m4.1.1.2.cmml">128</mn><mo id="S3.SS5.p1.4.m4.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS5.p1.4.m4.1.1.1.cmml">×</mo><mn id="S3.SS5.p1.4.m4.1.1.3" xref="S3.SS5.p1.4.m4.1.1.3.cmml">128</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.4.m4.1b"><apply id="S3.SS5.p1.4.m4.1.1.cmml" xref="S3.SS5.p1.4.m4.1.1"><times id="S3.SS5.p1.4.m4.1.1.1.cmml" xref="S3.SS5.p1.4.m4.1.1.1"></times><cn id="S3.SS5.p1.4.m4.1.1.2.cmml" type="integer" xref="S3.SS5.p1.4.m4.1.1.2">128</cn><cn id="S3.SS5.p1.4.m4.1.1.3.cmml" type="integer" xref="S3.SS5.p1.4.m4.1.1.3">128</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.4.m4.1c">128\times 128</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.4.m4.1d">128 × 128</annotation></semantics></math>, and <math alttext="64\times 64" class="ltx_Math" display="inline" id="S3.SS5.p1.5.m5.1"><semantics id="S3.SS5.p1.5.m5.1a"><mrow id="S3.SS5.p1.5.m5.1.1" xref="S3.SS5.p1.5.m5.1.1.cmml"><mn id="S3.SS5.p1.5.m5.1.1.2" xref="S3.SS5.p1.5.m5.1.1.2.cmml">64</mn><mo id="S3.SS5.p1.5.m5.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS5.p1.5.m5.1.1.1.cmml">×</mo><mn id="S3.SS5.p1.5.m5.1.1.3" xref="S3.SS5.p1.5.m5.1.1.3.cmml">64</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.5.m5.1b"><apply id="S3.SS5.p1.5.m5.1.1.cmml" xref="S3.SS5.p1.5.m5.1.1"><times id="S3.SS5.p1.5.m5.1.1.1.cmml" xref="S3.SS5.p1.5.m5.1.1.1"></times><cn id="S3.SS5.p1.5.m5.1.1.2.cmml" type="integer" xref="S3.SS5.p1.5.m5.1.1.2">64</cn><cn id="S3.SS5.p1.5.m5.1.1.3.cmml" type="integer" xref="S3.SS5.p1.5.m5.1.1.3">64</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.5.m5.1c">64\times 64</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.5.m5.1d">64 × 64</annotation></semantics></math> latent resolution models, respectively. The <math alttext="\Gamma" class="ltx_Math" display="inline" id="S3.SS5.p1.6.m6.1"><semantics id="S3.SS5.p1.6.m6.1a"><mi id="S3.SS5.p1.6.m6.1.1" mathvariant="normal" xref="S3.SS5.p1.6.m6.1.1.cmml">Γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.6.m6.1b"><ci id="S3.SS5.p1.6.m6.1.1.cmml" xref="S3.SS5.p1.6.m6.1.1">Γ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.6.m6.1c">\Gamma</annotation><annotation encoding="application/x-llamapun" id="S3.SS5.p1.6.m6.1d">roman_Γ</annotation></semantics></math>-VAE models were trained for 200 epochs and a batch size of 12. The model throughput was calculated on an Nvidia RTX 3090 GPU. Code and data is available at <a class="ltx_ref ltx_href" href="https://github.com/david-stojanovski/EDMLX" title="">https://github.com/david-stojanovski/EDMLX</a>.</p>
</div>
<div class="ltx_para" id="S3.SS5.p2">
<p class="ltx_p" id="S3.SS5.p2.1">During training for the diffusion models, only geometric transformations were applied. No colorimetric transforms were performed, in order not to encourage the generation of images that are outside the realistic bounds of the physics constraints of ultrasound imaging. The autoencoder and segmentation network training included both colourimetric and geometric transforms. Moreover, the loss calculation for the generative models was restricted to the sector region of the ultrasound image. For each loss term, we first calculate the loss on a per-pixel basis, but before the sum reduction, we perform an elementwise multiplication between the per-pixel loss and a binarised guiding segmentation mask. To turn the sum into a mean (which we found more numerically stable for training), we divided by the number of in-sector pixels.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Results</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Qualitative Results: Realism</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.F2" title="Figure 2 ‣ 4.1 Qualitative Results: Realism ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">2</span></a> shows an example A4C ED image generated by all models across an increasing number of neural function evaluations. We found that this example is representative of the entire dataset in terms of appearance and variation across models.</p>
</div>
<figure class="ltx_figure" id="S4.F2">
<p class="ltx_p ltx_align_center" id="S4.F2.1"><span class="ltx_text" id="S4.F2.1.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_portrait" height="1075" id="S4.F2.1.1.g1" src="x2.png" width="789"/></span></p>
<br class="ltx_break ltx_break"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Example of 4 chamber generated images from all models across all timesteps. Each image was generated using the same guiding segmentation mask as input (shown in green box). Real Image<sup class="ltx_sup" id="S4.F2.5.1">∗</sup>: Image from which the labelmap was derived. Purple Box: Latent Models.</figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1">Visually, image realism, considering the presence of correct anatomical structures with a sharp appearance and contrast, generally peaks at 50 NFEs across all models. All full-resolution models (i.e., VE, VP, and EDM) can be seen to generate highly realistic examples of ultrasound images after 50 NFEs, albeit with varying styles. The latent diffusion models introduce blurriness, a characteristic expected from the VAE reconstruction that is more intense the lower the resolution of the latent space.</p>
</div>
<div class="ltx_para" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1">The appearance of the VE model at 20 NFEs has a strong visual resemblance to the SDM models from our previous work’s <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib35" title="">35</a>]</cite> generated images at 1000 NFEs.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Quantitative Results: Downstream Tasks</h3>
<section class="ltx_subsubsection" id="S4.SS2.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.2.1 </span>Performance on real data of the synthetic-trained segmenter</h4>
<div class="ltx_para" id="S4.SS2.SSS1.p1">
<p class="ltx_p" id="S4.SS2.SSS1.p1.1">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.F3" title="Figure 3 ‣ 4.2.1 Performance on real data of the synthetic-trained segmenter ‣ 4.2 Quantitative Results: Downstream Tasks ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">3</span></a> shows the mean Dice score achieved by the diffusion models against the number of NFEs. The red dashed line indicates the best possible performance when the model is trained on real data, and the purple dashed line indicates the performance achieved when training on synthetic images generated by the current SOTA (our previously proposed SDM method from <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#bib.bib35" title="">35</a>]</cite>). All EDM-based models achieved Dice <math alttext="&gt;88" class="ltx_Math" display="inline" id="S4.SS2.SSS1.p1.1.m1.1"><semantics id="S4.SS2.SSS1.p1.1.m1.1a"><mrow id="S4.SS2.SSS1.p1.1.m1.1.1" xref="S4.SS2.SSS1.p1.1.m1.1.1.cmml"><mi id="S4.SS2.SSS1.p1.1.m1.1.1.2" xref="S4.SS2.SSS1.p1.1.m1.1.1.2.cmml"></mi><mo id="S4.SS2.SSS1.p1.1.m1.1.1.1" xref="S4.SS2.SSS1.p1.1.m1.1.1.1.cmml">&gt;</mo><mn id="S4.SS2.SSS1.p1.1.m1.1.1.3" xref="S4.SS2.SSS1.p1.1.m1.1.1.3.cmml">88</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.1.m1.1b"><apply id="S4.SS2.SSS1.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS1.p1.1.m1.1.1"><gt id="S4.SS2.SSS1.p1.1.m1.1.1.1.cmml" xref="S4.SS2.SSS1.p1.1.m1.1.1.1"></gt><csymbol cd="latexml" id="S4.SS2.SSS1.p1.1.m1.1.1.2.cmml" xref="S4.SS2.SSS1.p1.1.m1.1.1.2">absent</csymbol><cn id="S4.SS2.SSS1.p1.1.m1.1.1.3.cmml" type="integer" xref="S4.SS2.SSS1.p1.1.m1.1.1.3">88</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.1.m1.1c">&gt;88</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.SSS1.p1.1.m1.1d">&gt; 88</annotation></semantics></math> even at 20 NFEs, with all models converging from this point and displaying no significant differences.</p>
</div>
<div class="ltx_para" id="S4.SS2.SSS1.p2">
<span class="ltx_ERROR undefined" id="S4.SS2.SSS1.p2.1">\floatsetup</span>
<p class="ltx_p" id="S4.SS2.SSS1.p2.2">[figure]subcapbesideposition=top</p>
</div>
<figure class="ltx_figure" id="S4.F3">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1"><span class="ltx_ERROR ltx_centering ltx_figure_panel undefined" id="S4.F3.4">\sidesubfloat</span></div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<p class="ltx_p ltx_figure_panel ltx_align_center" id="S4.F3.3">[]<img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="622" id="S4.F3.1.g1" src="x3.png" width="830"/>
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="S4.F3.3.1">\sidesubfloat</span>[]<img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="622" id="S4.F3.2.g2" src="x4.png" width="830"/>
<br class="ltx_break"/><span class="ltx_ERROR undefined" id="S4.F3.3.2">\sidesubfloat</span>[]<img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="622" id="S4.F3.3.g3" src="x5.png" width="830"/></p>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Comparing model performance on segmentation tasks and classification tasks.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS2.SSS1.p3">
<p class="ltx_p" id="S4.SS2.SSS1.p3.1">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.F3" title="Figure 3 ‣ 4.2.1 Performance on real data of the synthetic-trained segmenter ‣ 4.2 Quantitative Results: Downstream Tasks ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">3</span></a> shows the Hausdorff distance of all models for the LV endocardium. Though the SOTA SDM model displays an equivalent performance for the Dice score, it is surpassed by all models from 20 NFEs and onwards when evaluating the Hausdorff distance for the LV Endocardium. The HD measures the furthest point of dissimilarity and is sensitive to outliers or localised errors. Even a small portion of one boundary deviating significantly from the other can result in a large HD. The lower HD of our models shows that there is greater consistency in the structure of the LV endocardium within the generated images. The EDM-L64 model is consistently among the lowest Hausdorff distances measured on the test set.</p>
</div>
</section>
<section class="ltx_subsubsection" id="S4.SS2.SSS2">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.2.2 </span>Performance on real data of the synthetic-trained classifier</h4>
<div class="ltx_para" id="S4.SS2.SSS2.p1">
<p class="ltx_p" id="S4.SS2.SSS2.p1.1">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.F3" title="Figure 3 ‣ 4.2.1 Performance on real data of the synthetic-trained segmenter ‣ 4.2 Quantitative Results: Downstream Tasks ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">3</span></a> shows the mean accuracy for performing view classification between A2C or A4C. With 10 or more NFEs, the VP and EDM-L64 models can supersede the performance of the previous SOTA SDM model, and by 50 NFEs, all models have outperformed SDM. The performance difference between real data and synthetic data is marginal once models have converged. These results show that the visual features that a network uses for segmentation and classification are inherently different.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Quantitative Results: Computational Efficiency</h3>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.2">Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.F4" title="Figure 4 ‣ 4.3 Quantitative Results: Computational Efficiency ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">4</span></a> shows the throughput (both in absolute terms in the left y-axis and in relative terms to the SDM method, on the right y-axis) of the 5 competing generative models. Note that the EDM, VE, and VP methods practically overlap, showing effectively an indistinguishable computational efficiency. The throughput decreases logarithmically with the number of NFEs in all cases. Independently of the number of NFEs, the throughput of the EDM-L64 model (the fastest one) is <math alttext="10\text{X}" class="ltx_Math" display="inline" id="S4.SS3.p1.1.m1.1"><semantics id="S4.SS3.p1.1.m1.1a"><mrow id="S4.SS3.p1.1.m1.1.1" xref="S4.SS3.p1.1.m1.1.1.cmml"><mn id="S4.SS3.p1.1.m1.1.1.2" xref="S4.SS3.p1.1.m1.1.1.2.cmml">10</mn><mo id="S4.SS3.p1.1.m1.1.1.1" xref="S4.SS3.p1.1.m1.1.1.1.cmml">⁢</mo><mtext id="S4.SS3.p1.1.m1.1.1.3" xref="S4.SS3.p1.1.m1.1.1.3a.cmml">X</mtext></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.1.m1.1b"><apply id="S4.SS3.p1.1.m1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1"><times id="S4.SS3.p1.1.m1.1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1.1"></times><cn id="S4.SS3.p1.1.m1.1.1.2.cmml" type="integer" xref="S4.SS3.p1.1.m1.1.1.2">10</cn><ci id="S4.SS3.p1.1.m1.1.1.3a.cmml" xref="S4.SS3.p1.1.m1.1.1.3"><mtext id="S4.SS3.p1.1.m1.1.1.3.cmml" xref="S4.SS3.p1.1.m1.1.1.3">X</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.1.m1.1c">10\text{X}</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p1.1.m1.1d">10 X</annotation></semantics></math> that of VP, VE, or EDM and <math alttext="3\text{X}" class="ltx_Math" display="inline" id="S4.SS3.p1.2.m2.1"><semantics id="S4.SS3.p1.2.m2.1a"><mrow id="S4.SS3.p1.2.m2.1.1" xref="S4.SS3.p1.2.m2.1.1.cmml"><mn id="S4.SS3.p1.2.m2.1.1.2" xref="S4.SS3.p1.2.m2.1.1.2.cmml">3</mn><mo id="S4.SS3.p1.2.m2.1.1.1" xref="S4.SS3.p1.2.m2.1.1.1.cmml">⁢</mo><mtext id="S4.SS3.p1.2.m2.1.1.3" xref="S4.SS3.p1.2.m2.1.1.3a.cmml">X</mtext></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.2.m2.1b"><apply id="S4.SS3.p1.2.m2.1.1.cmml" xref="S4.SS3.p1.2.m2.1.1"><times id="S4.SS3.p1.2.m2.1.1.1.cmml" xref="S4.SS3.p1.2.m2.1.1.1"></times><cn id="S4.SS3.p1.2.m2.1.1.2.cmml" type="integer" xref="S4.SS3.p1.2.m2.1.1.2">3</cn><ci id="S4.SS3.p1.2.m2.1.1.3a.cmml" xref="S4.SS3.p1.2.m2.1.1.3"><mtext id="S4.SS3.p1.2.m2.1.1.3.cmml" xref="S4.SS3.p1.2.m2.1.1.3">X</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.2.m2.1c">3\text{X}</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p1.2.m2.1d">3 X</annotation></semantics></math> that of EDM-L128.</p>
</div>
<div class="ltx_para" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.2">The peak Dice score obtained was from the EDM-L64 dataset at 100 NFEs. This is the most efficient general model and can perform better than the previous state-of-the-art SDM with more than a <math alttext="100\text{X}" class="ltx_Math" display="inline" id="S4.SS3.p2.1.m1.1"><semantics id="S4.SS3.p2.1.m1.1a"><mrow id="S4.SS3.p2.1.m1.1.1" xref="S4.SS3.p2.1.m1.1.1.cmml"><mn id="S4.SS3.p2.1.m1.1.1.2" xref="S4.SS3.p2.1.m1.1.1.2.cmml">100</mn><mo id="S4.SS3.p2.1.m1.1.1.1" xref="S4.SS3.p2.1.m1.1.1.1.cmml">⁢</mo><mtext id="S4.SS3.p2.1.m1.1.1.3" xref="S4.SS3.p2.1.m1.1.1.3a.cmml">X</mtext></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p2.1.m1.1b"><apply id="S4.SS3.p2.1.m1.1.1.cmml" xref="S4.SS3.p2.1.m1.1.1"><times id="S4.SS3.p2.1.m1.1.1.1.cmml" xref="S4.SS3.p2.1.m1.1.1.1"></times><cn id="S4.SS3.p2.1.m1.1.1.2.cmml" type="integer" xref="S4.SS3.p2.1.m1.1.1.2">100</cn><ci id="S4.SS3.p2.1.m1.1.1.3a.cmml" xref="S4.SS3.p2.1.m1.1.1.3"><mtext id="S4.SS3.p2.1.m1.1.1.3.cmml" xref="S4.SS3.p2.1.m1.1.1.3">X</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p2.1.m1.1c">100\text{X}</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p2.1.m1.1d">100 X</annotation></semantics></math> decrease in image generation compute. For classification task purposes, the reduction in computational power required is even greater as superior performance can be obtained with the EDM-L64 at 10 NFEs, which is a greater than <math alttext="1000\text{X}" class="ltx_Math" display="inline" id="S4.SS3.p2.2.m2.1"><semantics id="S4.SS3.p2.2.m2.1a"><mrow id="S4.SS3.p2.2.m2.1.1" xref="S4.SS3.p2.2.m2.1.1.cmml"><mn id="S4.SS3.p2.2.m2.1.1.2" xref="S4.SS3.p2.2.m2.1.1.2.cmml">1000</mn><mo id="S4.SS3.p2.2.m2.1.1.1" xref="S4.SS3.p2.2.m2.1.1.1.cmml">⁢</mo><mtext id="S4.SS3.p2.2.m2.1.1.3" xref="S4.SS3.p2.2.m2.1.1.3a.cmml">X</mtext></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p2.2.m2.1b"><apply id="S4.SS3.p2.2.m2.1.1.cmml" xref="S4.SS3.p2.2.m2.1.1"><times id="S4.SS3.p2.2.m2.1.1.1.cmml" xref="S4.SS3.p2.2.m2.1.1.1"></times><cn id="S4.SS3.p2.2.m2.1.1.2.cmml" type="integer" xref="S4.SS3.p2.2.m2.1.1.2">1000</cn><ci id="S4.SS3.p2.2.m2.1.1.3a.cmml" xref="S4.SS3.p2.2.m2.1.1.3"><mtext id="S4.SS3.p2.2.m2.1.1.3.cmml" xref="S4.SS3.p2.2.m2.1.1.3">X</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p2.2.m2.1c">1000\text{X}</annotation><annotation encoding="application/x-llamapun" id="S4.SS3.p2.2.m2.1d">1000 X</annotation></semantics></math> decrease in relation to SDM. Focusing on 100 NFEs, where EDM-L64 achieves top performance in segmentation and classification, to match the throughput, EDM-L128 can run up to around 25 NFEs (where, in terms of performance, it is close but not yet converged to peak), and the other models would not be able to run even 10 NFEs where performance is significantly below peak.</p>
</div>
<figure class="ltx_figure" id="S4.F4">
<p class="ltx_p ltx_align_center ltx_align_center" id="S4.F4.1"><span class="ltx_text" id="S4.F4.1.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="622" id="S4.F4.1.1.g1" src="x6.png" width="830"/></span></p>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Throughput of models and relative throughput when compared against SDM. Note: EDM, VE, and VP are functionally identical in performance.</figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Discussion</h2>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1">A much more efficient (up to 1,000 times with respect to the SOTA method with 1000 NFEs) generative model is presented. While arguably the blurriness introduced by VAE-based methods can be seen as a lower visually perceived realism, quantitative results show that there is no significant drop in downstream task performance (i.e., image quality for image segmentation and view classification).</p>
</div>
<div class="ltx_para" id="S5.p2">
<p class="ltx_p" id="S5.p2.1">The highest Dice score is obtained with EDM-L64 (the model with the lowest resolution latent space) at 100 NFEs, suggesting that visually perceived image realism and model-synthesised image quality are not necessarily the same. Further, the results in Sections <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.SS2.SSS1" title="4.2.1 Performance on real data of the synthetic-trained segmenter ‣ 4.2 Quantitative Results: Downstream Tasks ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">4.2.1</span></a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.SS2.SSS2" title="4.2.2 Performance on real data of the synthetic-trained classifier ‣ 4.2 Quantitative Results: Downstream Tasks ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">4.2.2</span></a>, <a class="ltx_ref" href="https://arxiv.org/html/2409.19371v1#S4.SS3" title="4.3 Quantitative Results: Computational Efficiency ‣ 4 Results ‣ Efficient Semantic Diffusion Architectures for Model Training on Synthetic Echocardiograms"><span class="ltx_text ltx_ref_tag">4.3</span></a> suggest that there may not be a correlation between image realism and downstream task performance for either segmentation or classification. This supports the idea of domain randomisation introduced earlier and the need for establishing image quality metrics that reflect the quality of synthetic data for a specific intended use. This is a considerable challenge since human-perceived realism features will not necessarily be good image quality metrics.</p>
</div>
<div class="ltx_para" id="S5.p3">
<p class="ltx_p" id="S5.p3.1">We observe that both Dice and Haussdorf distance graphs have a subtle trend to peak at around 100 NFEs and then show a mild regression in performance towards higher NFEs. While we could not establish the reason for this, and visually there is little or no difference in the generated images beyond 50 NFEs, we hypothesise that the noise present at 50-100 NFEs acts as a regulariser that allows for greater generalizability, and this might be lost with more NFEs. Proving this hypothesis is out of the scope of this paper.</p>
</div>
<div class="ltx_para" id="S5.p4">
<p class="ltx_p" id="S5.p4.1">In both segmentation and classification tasks, it is seen that at low NFEs (up to 20), the EDM model and variants follow the trend that the lower the resolution, the better the utility to train downstream tasks. While the performance achieved at this relatively low number of NFEs is far from the peak performance, this raises the question, to be addressed in future work, of whether a larger number of synthetic images trained at lower NFEs may outperform the proposed setups.</p>
</div>
<div class="ltx_para" id="S5.p5">
<p class="ltx_p" id="S5.p5.1">Our results suggest that LDMs can produce useful synthetic images that are as useful as images generated by full-resolution models at a computational cost of 10 times lower (in the case of EDM-L64). This translates directly into financial savings when using, for example, cloud computing services which charge per time of use.</p>
</div>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">The highly effective combination of SPADE blocks and diffusion models can be applied to different architectures and ODE solver sampling schemes, as well as to latent diffusion models. Such models generate images that, while visually appearing of variable realism, are efficient for training models for downstream tasks that then perform well on real data and, when using LDMs, achieve large computational cost savings.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
M. Dewey, M. Siebes, M. Kachelrieß, K. F. Kofoed, P. Maurovich-Horvat, K. Nikolaou, W. Bai, A. Kofler, R. Manka, S. Kozerke, A. Chiribiri, T. Schaeffter, F. Michallek, F. Bengel, S. Nekolla, P. Knaapen, M. Lubberink, R. Senior, M. X. Tang, J. J. Piek, T. van de Hoef, J. Martens, and L. Schreiber, “Clinical quantitative cardiac imaging for the assessment of myocardial ischaemia,” <span class="ltx_text ltx_font_italic" id="bib.bib1.1.1">Nature Reviews Cardiology</span>, vol. 17, no. 7, pp. 427–450, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
H. Soliman-Aboumari, S. S. Joshi, M. Cameli, B. Michalski, R. Manka, K. Haugaa, A. Demirkiran, T. Podlesnikar, R. Jurcut, D. Muraru, L. P. Badano, and M. R. Dweck, “EACVI survey on the multi-modality imaging assessment of the right heart,” <span class="ltx_text ltx_font_italic" id="bib.bib2.1.1">European Heart Journal Cardiovascular Imaging</span>, vol. 23, pp. 1417–1422, nov 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
S. Beck, H. Aziz Shamri, S. Coffey, M. Anakin, and G. Whalley, “Image quality and technical limitations in emergency department cardiac point-of-care ultrasound: A retrospective cohort study,” <span class="ltx_text ltx_font_italic" id="bib.bib3.1.1">EMA - Emergency Medicine Australasia</span>, vol. 36, no. 2, pp. 295–301, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
I. Nicastro, V. Barletta, L. Conte, I. Fabiani, A. Morgantini, G. Lastrucci, and V. Bello, “Professional education, training and role of the cardiac sonographer in different countries,” <span class="ltx_text ltx_font_italic" id="bib.bib4.1.1">Journal of Cardiovascular Echography</span>, vol. 23, no. 1, pp. 18–23, 2013.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
R. Upton, A. Mumith, A. Beqiri, A. Parker, W. Hawkes, S. Gao, M. Porumb, R. Sarwar, P. Marques, D. Markham, J. Kenworthy, J. M. O’Driscoll, N. Hassanali, K. Groves, C. Dockerill, W. Woodward, M. Alsharqi, A. McCourt, E. H. Wilkes, S. B. Heitner, M. Yadava, D. Stojanovski, P. Lamata, G. Woodward, and P. Leeson, “Automated Echocardiographic Detection of Severe Coronary Artery Disease Using Artificial Intelligence,” <span class="ltx_text ltx_font_italic" id="bib.bib5.1.1">JACC: Cardiovascular Imaging</span>, vol. 15, no. 5, pp. 715–727, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Y.-C. Zhu, P.-F. Jin, J. Bao, Q. Jiang, and X. Wang, “Thyroid ultrasound image classification using a convolutional neural network,” <span class="ltx_text ltx_font_italic" id="bib.bib6.1.1">Annals of Translational Medicine</span>, vol. 9, no. 20, pp. 1526–1526, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
J. Xie, X. Song, W. Zhang, Q. Dong, Y. Wang, F. Li, and C. Wan, “A novel approach with dual-sampling convolutional neural network for ultrasound image classification of breast tumors,” <span class="ltx_text ltx_font_italic" id="bib.bib7.1.1">Physics in Medicine and Biology</span>, vol. 65, no. 24, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
S. Sudharson and P. Kokil, “An ensemble of deep neural networks for kidney ultrasound image classification,” <span class="ltx_text ltx_font_italic" id="bib.bib8.1.1">Computer Methods and Programs in Biomedicine</span>, vol. 197, no. 2020, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
J. Zhang, C. Petitjean, P. Lopez, and S. Ainouz, “Direct estimation of fetal head circumference from ultrasound images based on regression CNN,” <span class="ltx_text ltx_font_italic" id="bib.bib9.1.1">Proceedings of Machine Learning Research</span>, vol. 121, pp. 914–922, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
D. Perdios, M. Vonlanthen, F. Martinez, M. Arditi, and J. P. Thiran, “CNN-Based Ultrasound Image Reconstruction for Ultrafast Displacement Tracking,” <span class="ltx_text ltx_font_italic" id="bib.bib10.1.1">IEEE Transactions on Medical Imaging</span>, vol. 40, no. 3, pp. 1078–1089, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
F. Zhu, M. Liu, F. Wang, D. Qiu, R. Li, and C. Dai, “Automatic measurement of fetal femur length in ultrasound images: A comparison of random forest regression model and SegNet,” <span class="ltx_text ltx_font_italic" id="bib.bib11.1.1">Mathematical Biosciences and Engineering</span>, vol. 18, no. 6, pp. 7790–7805, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
H. Wei, H. Cao, Y. Cao, Y. Zhou, W. Xue, D. Ni, and S. Li, “Temporal-Consistent Segmentation of Echocardiography with Co-learning from Appearance and Shape,” in <span class="ltx_text ltx_font_italic" id="bib.bib12.1.1">Lecture Notes in Computer Science (including subseries Lecture Notes in Artificial Intelligence and Lecture Notes in Bioinformatics)</span>, vol. 12262 LNCS, pp. 623–632, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
C. Sfakianakis, G. Simantiris, and G. Tziritas, “GUDU: Geometrically-constrained Ultrasound Data augmentation in U-Net for echocardiography semantic segmentation,” <span class="ltx_text ltx_font_italic" id="bib.bib13.1.1">Biomedical Signal Processing and Control</span>, vol. 82, no. August 2022, p. 104557, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
O. Oktay, E. Ferrante, K. Kamnitsas, M. Heinrich, W. Bai, J. Caballero, S. A. Cook, A. De Marvao, T. Dawes, D. P. O’Regan, B. Kainz, B. Glocker, and D. Rueckert, “Anatomically Constrained Neural Networks (ACNNs): Application to Cardiac Image Enhancement and Segmentation,” <span class="ltx_text ltx_font_italic" id="bib.bib14.1.1">IEEE Transactions on Medical Imaging</span>, vol. 37, no. 2, pp. 384–395, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
L. Pinto-Coelho, “How Artificial Intelligence Is Shaping Medical Imaging Technology: A Survey of Innovations and Applications,” <span class="ltx_text ltx_font_italic" id="bib.bib15.1.1">Bioengineering</span>, vol. 10, no. 12, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
K. Yu, Y. Wang, Y. Cai, C. Xiao, E. Zhao, L. Glass, and J. Sun, “Rare Disease Detection by Sequence Modeling with Generative Adversarial Networks,” 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
M. Escobar, A. Castillo, A. Romero, and P. Arbeláez, “Ultragan: Ultrasound enhancement through adversarial generation,” <span class="ltx_text ltx_font_italic" id="bib.bib17.1.1">Lecture Notes in Computer Science (including subseries Lecture Notes in Artificial Intelligence and Lecture Notes in Bioinformatics)</span>, vol. 12417 LNCS, pp. 120–130, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
T. Lee, E. Puyol-Antón, B. Ruijsink, M. Shi, and A. P. King, “A Systematic Study of Race and Sex Bias in CNN-Based Cardiac MR Segmentation,” <span class="ltx_text ltx_font_italic" id="bib.bib18.1.1">Lecture Notes in Computer Science (including subseries Lecture Notes in Artificial Intelligence and Lecture Notes in Bioinformatics)</span>, vol. 13593 LNCS, pp. 233–244, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
N. Karani, K. Chaitanya, C. Baumgartner, and E. Konukoglu, “A lifelong learning approach to brain MR segmentation across scanners and protocols,” <span class="ltx_text ltx_font_italic" id="bib.bib19.1.1">Lecture Notes in Computer Science (including subseries Lecture Notes in Artificial Intelligence and Lecture Notes in Bioinformatics)</span>, vol. 11070 LNCS, pp. 476–484, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
C. Huang, H. Han, Q. Yao, S. Zhu, and K. S. Zhou, “3D U2-Net: A 3D Universal U-Net for Multi-domain Medical Image Segmentation,” <span class="ltx_text ltx_font_italic" id="bib.bib20.1.1">Proceeding of the International Conference on Medical Image Computing and Computer Assisted Interventions</span>, vol. 1, pp. 291–299, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
J. Y. Zhu, T. Park, P. Isola, and A. A. Efros, “Unpaired Image-to-Image Translation Using Cycle-Consistent Adversarial Networks,” <span class="ltx_text ltx_font_italic" id="bib.bib21.1.1">Proceedings of the IEEE International Conference on Computer Vision</span>, vol. 2017-Octob, pp. 2242–2251, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
J. M. Wolterink, A. M. Dinkla, M. H. Savenije, P. R. Seevinck, C. A. van den Berg, and I. Išgum, “Deep MR to CT synthesis using unpaired data,” <span class="ltx_text ltx_font_italic" id="bib.bib22.1.1">Lecture Notes in Computer Science (including subseries Lecture Notes in Artificial Intelligence and Lecture Notes in Bioinformatics)</span>, vol. 10557 LNCS, pp. 14–23, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
K. Armanious, C. Jiang, S. Abdulatif, T. Küstner, S. Gatidis, and B. Yang, “Unsupervised medical image translation using Cycle-MeDGAN,” <span class="ltx_text ltx_font_italic" id="bib.bib23.1.1">European Signal Processing Conference</span>, vol. 2019-Septe, mar 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
D. Saxena and J. Cao, “Generative Adversarial Networks (GANs),” <span class="ltx_text ltx_font_italic" id="bib.bib24.1.1">ACM Computing Surveys</span>, vol. 54, no. 3, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
J. Ho, A. Jain, and P. Abbeel, “Denoising diffusion probabilistic models,” <span class="ltx_text ltx_font_italic" id="bib.bib25.1.1">Advances in Neural Information Processing Systems</span>, vol. 2020-Decem, no. NeurIPS 2020, pp. 1–25, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
B. Cottier, R. Rahman, L. Fattorini, N. Maslej, and D. Owen, “The rising costs of training frontier AI models,” <span class="ltx_text ltx_font_italic" id="bib.bib26.1.1">arXiv preprint arXiv:2405.21015</span>, vol. 2016, pp. 1–20, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
J. Song, C. Meng, and S. Ermon, “Denoising Diffusion Implicit Models,” <span class="ltx_text ltx_font_italic" id="bib.bib27.1.1">ICLR 2021 - 9th International Conference on Learning Representations</span>, pp. 1–22, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
A. Jabri, D. J. Fleet, and T. Chen, “Scalable Adaptive Computation for Iterative Generation,” <span class="ltx_text ltx_font_italic" id="bib.bib28.1.1">Proceedings of Machine Learning Research</span>, vol. 202, pp. 14569–14589, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
T. Karras, M. Aittala, T. Kynkäänniemi, J. Lehtinen, T. Aila, and S. Laine, “Guiding a Diffusion Model with a Bad Version of Itself,” 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
R. Rombach, A. Blattmann, D. Lorenz, P. Esser, and B. Ommer, “High-Resolution Image Synthesis with Latent Diffusion Models,” <span class="ltx_text ltx_font_italic" id="bib.bib30.1.1">Proceedings of the IEEE Computer Society Conference on Computer Vision and Pattern Recognition</span>, vol. 2022-June, pp. 10674–10685, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
J. Tobin, R. Fong, A. Ray, J. Schneider, W. Zaremba, and P. Abbeel, “Domain randomization for transferring deep neural networks from simulation to the real world,” <span class="ltx_text ltx_font_italic" id="bib.bib31.1.1">IEEE International Conference on Intelligent Robots and Systems</span>, vol. 2017-Septe, pp. 23–30, 2017.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Y. Bengio, F. Bastien, A. Bergeron, N. Boulanger-Lewandowski, T. Breuel, Y. Chherawala, M. Cisse, M. Côté, D. Erhan, J. Eustache, X. Glorot, X. Muller, S. P. Lebeuf, R. Pascanu, S. Rifai, F. Savard, and G. Sicard, “Deep learners benefit more from out-of-distribution examples,” <span class="ltx_text ltx_font_italic" id="bib.bib32.1.1">Journal of Machine Learning Research</span>, vol. 15, pp. 164–172, 2011.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
B. Billot, D. N. Greve, O. Puonti, A. Thielscher, K. Van Leemput, B. Fischl, A. V. Dalca, and J. E. Iglesias, “SynthSeg: Segmentation of brain MRI scans of any contrast and resolution without retraining,” <span class="ltx_text ltx_font_italic" id="bib.bib33.1.1">Medical Image Analysis</span>, vol. 86, no. February 2022, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
J. Tremblay, A. Prakash, D. Acuna, M. Brophy, V. Jampani, C. Anil, T. To, E. Cameracci, S. Boochoon, and S. Birchfield, “Training deep networks with synthetic data: Bridging the reality gap by domain randomization,” <span class="ltx_text ltx_font_italic" id="bib.bib34.1.1">IEEE Computer Society Conference on Computer Vision and Pattern Recognition Workshops</span>, vol. 2018-June, pp. 1082–1090, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
D. Stojanovski, U. Hermida, P. Lamata, A. Beqiri, and A. Gomez, “Echo from Noise: Synthetic Ultrasound Image Generation Using Diffusion Models for Real Image Segmentation,” in <span class="ltx_text ltx_font_italic" id="bib.bib35.1.1">Lecture Notes in Computer Science (including subseries Lecture Notes in Artificial Intelligence and Lecture Notes in Bioinformatics)</span>, vol. 14337 LNCS, pp. 34–43, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
T. Karras, M. Aittala, T. Aila, and S. Laine, “Elucidating the Design Space of Diffusion-Based Generative Models,” <span class="ltx_text ltx_font_italic" id="bib.bib36.1.1">Advances in Neural Information Processing Systems</span>, vol. 35, no. NeurIPS, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
R. M. Neal and G. E. Hinton, “A View of the Em Algorithm that Justifies Incremental, Sparse, and other Variants,” in <span class="ltx_text ltx_font_italic" id="bib.bib37.1.1">Learning in Graphical Models</span>, pp. 355–368, Dordrecht: Springer Netherlands, 1998.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
D. P. Kingma and M. Welling, “Auto-encoding variational bayes,” <span class="ltx_text ltx_font_italic" id="bib.bib38.1.1">2nd International Conference on Learning Representations, ICLR 2014 - Conference Track Proceedings</span>, no. Ml, pp. 1–14, 2014.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
Y. Deng, Y. Wang, and Y. Shen, “Speckle reduction of ultrasound images based on Rayleigh-trimmed anisotropic diffusion filter,” <span class="ltx_text ltx_font_italic" id="bib.bib39.1.1">Pattern Recognition Letters</span>, vol. 32, no. 13, pp. 1516–1525, 2011.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
R. Zhang, P. Isola, A. A. Efros, E. Shechtman, and O. Wang, “The Unreasonable Effectiveness of Deep Features as a Perceptual Metric,” no. 1.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
A. Hyvärinen, J. Hurri, and P. O. Hoyer, “Estimation of Non-normalized Statistical Models,” pp. 419–426, 2009.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_tag_bibitem">[42]</span>
<span class="ltx_bibblock">
E. Süli and D. F. Mayers, <span class="ltx_text ltx_font_italic" id="bib.bib42.1.1">An Introduction to Numerical Analysis</span>.

</span>
<span class="ltx_bibblock">Cambridge University Press, aug 2003.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_tag_bibitem">[43]</span>
<span class="ltx_bibblock">
T. Park, M. Y. Liu, T. C. Wang, and J. Y. Zhu, “Semantic image synthesis with spatially-adaptive normalization,” <span class="ltx_text ltx_font_italic" id="bib.bib43.1.1">Proceedings of the IEEE Computer Society Conference on Computer Vision and Pattern Recognition</span>, vol. 2019-June, pp. 2332–2341, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_tag_bibitem">[44]</span>
<span class="ltx_bibblock">
S. Leclerc, E. Smistad, J. Pedrosa, A. Ostvik, F. Cervenansky, F. Espinosa, T. Espeland, E. A. R. Berg, P. M. Jodoin, T. Grenier, C. Lartizien, J. Dhooge, L. Lovstakken, and O. Bernard, “Deep Learning for Segmentation Using an Open Large-Scale Dataset in 2D Echocardiography,” <span class="ltx_text ltx_font_italic" id="bib.bib44.1.1">IEEE transactions on medical imaging</span>, vol. 38, no. 9, pp. 2198–2210, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_tag_bibitem">[45]</span>
<span class="ltx_bibblock">
D. P. Kingma and J. L. Ba, “Adam: A method for stochastic optimization,” <span class="ltx_text ltx_font_italic" id="bib.bib45.1.1">3rd International Conference on Learning Representations, ICLR 2015 - Conference Track Proceedings</span>, pp. 1–15, 2015.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_tag_bibitem">[46]</span>
<span class="ltx_bibblock">
W. H. L. Pinaya, M. S. Graham, E. Kerfoot, P.-D. Tudosiu, J. Dafflon, V. Fernandez, P. Sanchez, J. Wolleb, P. F. da Costa, A. Patel, H. Chung, C. Zhao, W. Peng, Z. Liu, X. Mei, O. Lucena, J. C. Ye, S. A. Tsaftaris, P. Dogra, A. Feng, M. Modat, P. Nachev, S. Ourselin, and M. J. Cardoso, “Generative AI for Medical Imaging: extending the MONAI Framework,” pp. 1–23, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib47">
<span class="ltx_tag ltx_tag_bibitem">[47]</span>
<span class="ltx_bibblock">
F. Isensee, P. F. Jaeger, S. A. Kohl, J. Petersen, and K. H. Maier-Hein, “nnU-Net: a self-configuring method for deep learning-based biomedical image segmentation,” <span class="ltx_text ltx_font_italic" id="bib.bib47.1.1">Nature Methods</span>, vol. 18, no. 2, pp. 203–211, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib48">
<span class="ltx_tag ltx_tag_bibitem">[48]</span>
<span class="ltx_bibblock">
M. Tan and Q. V. Le, “EfficientNetV2: Smaller Models and Faster Training,” <span class="ltx_text ltx_font_italic" id="bib.bib48.1.1">Proceedings of Machine Learning Research</span>, vol. 139, pp. 10096–10106, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib49">
<span class="ltx_tag ltx_tag_bibitem">[49]</span>
<span class="ltx_bibblock">
L. R. Dice, “Measures of the Amount of Ecologic Association Between Species,” <span class="ltx_text ltx_font_italic" id="bib.bib49.1.1">Ecology</span>, vol. 26, pp. 297–302, jul 1945.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib50">
<span class="ltx_tag ltx_tag_bibitem">[50]</span>
<span class="ltx_bibblock">
D. P. Huttenlocher, W. J. Rucklidge, and G. A. Klanderman, “Comparing images using the Hausdorff distance under translation,” <span class="ltx_text ltx_font_italic" id="bib.bib50.1.1">Proceedings of the IEEE Computer Society Conference on Computer Vision and Pattern Recognition</span>, vol. 1992-June, no. 9, pp. 654–656, 1992.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib51">
<span class="ltx_tag ltx_tag_bibitem">[51]</span>
<span class="ltx_bibblock">
A. Paszke, S. Gross, F. Massa, A. Lerer, J. Bradbury, G. Chanan, T. Killeen, Z. Lin, N. Gimelshein, L. Antiga, A. Desmaison, A. Köpf, E. Yang, Z. DeVito, M. Raison, A. Tejani, S. Chilamkurthy, B. Steiner, L. Fang, J. Bai, and S. Chintala, “PyTorch: An imperative style, high-performance deep learning library,” tech. rep., 2019.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Sat Sep 28 14:45:59 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
