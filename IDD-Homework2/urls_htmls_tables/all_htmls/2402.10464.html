<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2402.10464] FedKit: Enabling Cross-Platform Federated Learning for Android and iOS</title><meta property="og:description" content="We present FedKit, a federated learning (FL) system tailored for
cross-platform FL research on Android and iOS devices.
FedKit pipelines cross-platform FL development by
enabling model conversion,
hardware-accelerated ‚Ä¶">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FedKit: Enabling Cross-Platform Federated Learning for Android and iOS">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="FedKit: Enabling Cross-Platform Federated Learning for Android and iOS">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2402.10464">

<!--Generated on Tue Mar  5 18:20:56 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">
<span id="id1.id1" class="ltx_text ltx_font_smallcaps">FedKit</span>: Enabling Cross-Platform Federated Learning for Android and iOS</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Sichang He1, Beilong Tang1, Boyan Zhang1, Jiaoqi Shao12, Xiaomin Ouyang3, Daniel‚ÄâNata Nugraha4, Bing Luo1
</span><span class="ltx_author_notes">This work of Sichang He, Beilong Tang, and Boyan Zhang was supported by DKU Undergraduate Studies Office through the Summer Research Scholars program. The work of Jiaqi Shao and Bing Luo was supported by the Suzhou Frontier Science and Technology Program (SYG202310). (Corrsponding author: Bing Luo.)
<span class="ltx_contact ltx_role_affiliation">1Duke Kunshan University, Jiangsu, China,
2The Hong Kong University of Science and Technology, China,
<br class="ltx_break">3University of California, Los Angeles, USA,
4Flower Labs GmbH, Winterhuder Weg 29, 22085 Hamburg, Germany

</span></span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id2.id1" class="ltx_p">We present <span id="id2.id1.1" class="ltx_text ltx_font_smallcaps">FedKit</span>, a federated learning (FL) system tailored for
cross-platform FL research on <span id="id2.id1.2" class="ltx_text ltx_font_italic">Android and iOS</span> devices.
<span id="id2.id1.3" class="ltx_text ltx_font_smallcaps">FedKit</span> pipelines cross-platform FL development by
enabling model conversion,
hardware-accelerated training,
and cross-platform model aggregation.
Our FL workflow supports flexible machine learning operations (MLOps) in production,
facilitating continuous model delivery and training.
We have deployed <span id="id2.id1.4" class="ltx_text ltx_font_smallcaps">FedKit</span> in a real-world use case for
health data analysis on university campuses,
demonstrating its effectiveness.
<span id="id2.id1.5" class="ltx_text ltx_font_smallcaps">FedKit</span> is open-source at <a target="_blank" href="https://github.com/FedCampus/FedKit" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/FedCampus/FedKit</a>.</p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">I </span><span id="S1.1.1" class="ltx_text ltx_font_smallcaps">Motivation and Analysis</span>
</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">FL is promising for training shared ML models collaboratively on
end devices while preserving data privacy¬†<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>.
Yet, most FL research relies on simulations on desktop computers,
which may overlook constraints in realistic FL applications.
To enhance FL algorithm design with real-world data,
we aim to build a practical mobile FL system
harnessing real user data.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">However,
existing accessible mobile FL systems exhibit important limitations,
as outlined in Table¬†<a href="#S2.T1" title="TABLE I ‚Ä£ II-A Cross-Platform FL Model Pipeline ‚Ä£ II Proposed Solution ‚Ä£ FedKit: Enabling Cross-Platform Federated Learning for Android and iOS" class="ltx_ref"><span class="ltx_text ltx_ref_tag">I</span></a>.
Specifically, we identify <span id="S1.p2.1.1" class="ltx_text ltx_font_bold">three key challenges</span>:
<span id="S1.p2.1.2" class="ltx_text ltx_font_bold">(C0)</span>¬†To collaboratively train the same models across
our users‚Äô diverse smartphones,
we require <span id="S1.p2.1.3" class="ltx_text ltx_font_bold">cross-platform on-device training and model aggregation</span>.
<span id="S1.p2.1.4" class="ltx_text ltx_font_bold">(C1)</span>¬†To customize FL algorithms and update models in production,
we need <span id="S1.p2.1.5" class="ltx_text ltx_font_bold">maximal control over the FL process</span> on
user‚Äô devices from our end.
<span id="S1.p2.1.6" class="ltx_text ltx_font_bold">(C2)</span>¬†The unfamiliar mobile <span id="S1.p2.1.7" class="ltx_text ltx_font_bold">development environment</span> hinders
data scientists while developing models for mobile FL.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">II </span><span id="S2.1.1" class="ltx_text ltx_font_smallcaps">Proposed Solution</span>
</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p"><span id="S2.p1.1.1" class="ltx_text ltx_font_smallcaps">FedKit</span> is designed to enable practical <span id="S2.p1.1.2" class="ltx_text ltx_font_bold">cross-platform</span> FL research on
<span id="S2.p1.1.3" class="ltx_text ltx_font_bold">Android and iOS</span>.
In Sec.¬†<a href="#S2.SS1" title="II-A Cross-Platform FL Model Pipeline ‚Ä£ II Proposed Solution ‚Ä£ FedKit: Enabling Cross-Platform Federated Learning for Android and iOS" class="ltx_ref"><span class="ltx_text ltx_ref_tag"><span class="ltx_text">II-A</span></span></a>,
we present an FL pipeline that converts Python-based models,
and trains and aggregates them across platforms,
addressing¬†<span id="S2.p1.1.4" class="ltx_text ltx_font_bold">(C0)</span>.
For¬†<span id="S2.p1.1.5" class="ltx_text ltx_font_bold">(C1)</span>,
our FL workflow enables <span id="S2.p1.1.6" class="ltx_text ltx_font_bold">flexible MLOps</span> from the backend in production,
as we detail in Sec.¬†<a href="#S2.SS2" title="II-B Flexible MLOps in Production ‚Ä£ II Proposed Solution ‚Ä£ FedKit: Enabling Cross-Platform Federated Learning for Android and iOS" class="ltx_ref"><span class="ltx_text ltx_ref_tag"><span class="ltx_text">II-B</span></span></a>.
The entire procedure tackles¬†<span id="S2.p1.1.7" class="ltx_text ltx_font_bold">(C2)</span> by
ensuring a user-friendly development environment in Python.
Overall,
<span id="S2.p1.1.8" class="ltx_text ltx_font_smallcaps">FedKit</span> facilitates FL across Android and iOS client devices,
coordinated by a single Backend server.
Each client trains a local model with private data,
and the Backend performs cross-platform aggregation of these local models to
update the global model.</p>
</div>
<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S2.SS1.5.1.1" class="ltx_text">II-A</span> </span><span id="S2.SS1.6.2" class="ltx_text ltx_font_italic">Cross-Platform FL Model Pipeline</span>
</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">To enable cross-platform FL,
especially <span id="S2.SS1.p1.1.1" class="ltx_text ltx_font_italic">cross-platform aggregation</span>,
we propose a pipeline comprising
<span id="S2.SS1.p1.1.2" class="ltx_text ltx_font_italic">model conversion</span> and
<span id="S2.SS1.p1.1.3" class="ltx_text ltx_font_italic">unified training APIs</span>,
as shown in Fig.¬†<a href="#S2.F1" title="Figure 1 ‚Ä£ II-A Cross-Platform FL Model Pipeline ‚Ä£ II Proposed Solution ‚Ä£ FedKit: Enabling Cross-Platform Federated Learning for Android and iOS" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<figure id="S2.T1" class="ltx_table">
<table id="S2.T1.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S2.T1.1.1.1" class="ltx_tr">
<th id="S2.T1.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column">Functionality</th>
<th id="S2.T1.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column"><cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite></th>
<th id="S2.T1.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column"><cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite></th>
<th id="S2.T1.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column"><cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite></th>
<th id="S2.T1.1.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column"><cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite></th>
<th id="S2.T1.1.1.1.6" class="ltx_td ltx_align_center ltx_th ltx_th_column"><span id="S2.T1.1.1.1.6.1" class="ltx_text ltx_font_smallcaps">FedKit</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S2.T1.1.2.1" class="ltx_tr">
<td id="S2.T1.1.2.1.1" class="ltx_td ltx_align_left ltx_border_t">Android-Only</td>
<td id="S2.T1.1.2.1.2" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
<td id="S2.T1.1.2.1.3" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
<td id="S2.T1.1.2.1.4" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
<td id="S2.T1.1.2.1.5" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
<td id="S2.T1.1.2.1.6" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
</tr>
<tr id="S2.T1.1.3.2" class="ltx_tr">
<td id="S2.T1.1.3.2.1" class="ltx_td ltx_align_left">iOS-Only</td>
<td id="S2.T1.1.3.2.2" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.3.2.3" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.3.2.4" class="ltx_td ltx_align_center">‚úì</td>
<td id="S2.T1.1.3.2.5" class="ltx_td ltx_align_center">‚úì</td>
<td id="S2.T1.1.3.2.6" class="ltx_td ltx_align_center">‚úì</td>
</tr>
<tr id="S2.T1.1.4.3" class="ltx_tr">
<td id="S2.T1.1.4.3.1" class="ltx_td ltx_align_left">Cross-Platform Aggregation</td>
<td id="S2.T1.1.4.3.2" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.4.3.3" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.4.3.4" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.4.3.5" class="ltx_td ltx_align_center">‚úì</td>
<td id="S2.T1.1.4.3.6" class="ltx_td ltx_align_center">‚úì</td>
</tr>
<tr id="S2.T1.1.5.4" class="ltx_tr">
<td id="S2.T1.1.5.4.1" class="ltx_td ltx_align_left ltx_border_t">Training Acceleration</td>
<td id="S2.T1.1.5.4.2" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
<td id="S2.T1.1.5.4.3" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
<td id="S2.T1.1.5.4.4" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
<td id="S2.T1.1.5.4.5" class="ltx_td ltx_align_center ltx_border_t">‚úó</td>
<td id="S2.T1.1.5.4.6" class="ltx_td ltx_align_center ltx_border_t">‚úì</td>
</tr>
<tr id="S2.T1.1.6.5" class="ltx_tr">
<td id="S2.T1.1.6.5.1" class="ltx_td ltx_align_left">MLOps</td>
<td id="S2.T1.1.6.5.2" class="ltx_td ltx_align_center">‚úì</td>
<td id="S2.T1.1.6.5.3" class="ltx_td ltx_align_center">‚úì</td>
<td id="S2.T1.1.6.5.4" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.6.5.5" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.6.5.6" class="ltx_td ltx_align_center">‚úì</td>
</tr>
<tr id="S2.T1.1.7.6" class="ltx_tr">
<td id="S2.T1.1.7.6.1" class="ltx_td ltx_align_left">Open-Source Backend</td>
<td id="S2.T1.1.7.6.2" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.7.6.3" class="ltx_td ltx_align_center">‚úó</td>
<td id="S2.T1.1.7.6.4" class="ltx_td ltx_align_center">‚úì</td>
<td id="S2.T1.1.7.6.5" class="ltx_td ltx_align_center">‚úì</td>
<td id="S2.T1.1.7.6.6" class="ltx_td ltx_align_center">‚úì</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">TABLE I: </span>Functionality Comparison among On-Smartphone FL Systems.</figcaption>
</figure>
<figure id="S2.F1" class="ltx_figure"><img src="/html/2402.10464/assets/x1.png" id="S2.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="190" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span><span id="S2.F1.2.1" class="ltx_text ltx_font_smallcaps">FedKit</span> Model Pipeline for Cross-Platform FL.</figcaption>
</figure>
<section id="S2.SS1.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection"><span id="S2.SS1.SSS1.5.1.1" class="ltx_text">II-A</span>1 </span>Model Conversion</h4>

<div id="S2.SS1.SSS1.p1" class="ltx_para">
<p id="S2.SS1.SSS1.p1.1" class="ltx_p">To enable model creation in Python,
we begin by converting models into formats compatible with
Android (TensorFlow Lite or TFLite) and iOS (Core ML).
Core ML defines a fixed model structure and provides
the official converter CoreMLTools.
For TFLite, we standardized a model format, and then
developed a compliant TensorFlow converter.
This standardized format includes
four essential FL methods
(<span id="S2.SS1.SSS1.p1.1.1" class="ltx_text ltx_font_sansserif">train</span>, <span id="S2.SS1.SSS1.p1.1.2" class="ltx_text ltx_font_sansserif">infer</span>, <span id="S2.SS1.SSS1.p1.1.3" class="ltx_text ltx_font_sansserif">parameters</span>,
and <span id="S2.SS1.SSS1.p1.1.4" class="ltx_text ltx_font_sansserif">restore</span>).</p>
</div>
</section>
<section id="S2.SS1.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection"><span id="S2.SS1.SSS2.5.1.1" class="ltx_text">II-A</span>2 </span>Unified Training APIs</h4>

<div id="S2.SS1.SSS2.p1" class="ltx_para">
<p id="S2.SS1.SSS2.p1.1" class="ltx_p"><span id="S2.SS1.SSS2.p1.1.1" class="ltx_text ltx_font_smallcaps">FedKit</span> provides <span id="S2.SS1.SSS2.p1.1.2" class="ltx_text ltx_font_italic">TFLite Trainer</span> and <span id="S2.SS1.SSS2.p1.1.3" class="ltx_text ltx_font_italic">Core ML Trainer</span> to
train the converted models on Android and iOS devices,
utilizing GPU and NPU acceleration.
Moreover, both trainers expose unified APIs for
<span id="S2.SS1.SSS2.p1.1.4" class="ltx_text ltx_font_italic">retrieving and setting model parameters,
model fitting, and evaluation</span>.
On Android, these APIs invoke the TFLite interpreter to call
our <span id="S2.SS1.SSS2.p1.1.5" class="ltx_text ltx_font_italic">standardized methods</span> defined in <span id="S2.SS1.SSS2.p1.1.6" class="ltx_text ltx_font_italic">Model Conversion</span>.
However, on iOS, our experimentation revealed that
Core ML <span id="S2.SS1.SSS2.p1.1.7" class="ltx_text ltx_font_italic">forbids</span> directly setting parameters, which could impede FL.
To overcome this constraint,
we apply a mostly undocumented method that
modifies the underlying ProtoBuf representations of Core ML models.
Specifically,
we employ Swift code generated from the relevant ProtoBuf definition files,
and navigate nested model definitions to access parameters on iOS.
Consequently, our unified training APIs exhibit comparable functionality on
both iOS and Android platforms.
</p>
</div>
</section>
<section id="S2.SS1.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection"><span id="S2.SS1.SSS3.5.1.1" class="ltx_text">II-A</span>3 </span>Cross-Platform Aggregation</h4>

<div id="S2.SS1.SSS3.p1" class="ltx_para">
<p id="S2.SS1.SSS3.p1.1" class="ltx_p">Aggregation necessitates
<span id="S2.SS1.SSS3.p1.1.1" class="ltx_text ltx_font_italic">uniform parameter representations</span>,
posing primary challenges in
retrieving and setting parameters for Core ML and TFLite.
1)¬†Core ML permits <span id="S2.SS1.SSS3.p1.1.2" class="ltx_text ltx_font_italic">only</span> specific layers to be <span id="S2.SS1.SSS3.p1.1.3" class="ltx_text ltx_font_italic">updatable</span> and
only provides their parameters post-training.
Thus, to obtain <span id="S2.SS1.SSS3.p1.1.4" class="ltx_text ltx_font_italic">other layers‚Äô</span> parameters,
we implemented a solution using ProtoBuf manipulation.
This approach involves recording layer information
in <span id="S2.SS1.SSS3.p1.1.5" class="ltx_text ltx_font_italic">Model Conversion</span> and
utilizing it during training.
2)¬†The TFLite interpreter only accepts inputs/outputs as maps from
<span id="S2.SS1.SSS3.p1.1.6" class="ltx_text ltx_font_italic">names</span> to <span id="S2.SS1.SSS3.p1.1.7" class="ltx_text ltx_font_italic">tensors</span>.
Therefore, during <span id="S2.SS1.SSS3.p1.1.8" class="ltx_text ltx_font_italic">Model Conversion</span>,
we assign index-based names to each parameter layer and
dynamically generate the concrete methods that accept these arguments.
During training, we call the methods with these index-based names to
access parameters.
Finally, these unified parameters enable seamless cross-platform aggregation.</p>
</div>
</section>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S2.SS2.5.1.1" class="ltx_text">II-B</span> </span><span id="S2.SS2.6.2" class="ltx_text ltx_font_italic">Flexible MLOps in Production</span>
</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">In production,
FL development faces challenges from
the lack of direct control over end devices.
<span id="S2.SS2.p1.1.1" class="ltx_text ltx_font_smallcaps">FedKit</span> empowers researchers to deploy models and algorithms continuously (MLOps).
Leveraging our complete control of the self-hosted Backend,
<span id="S2.SS2.p1.1.2" class="ltx_text ltx_font_smallcaps">FedKit</span>‚Äôs three-step FL workflow
facilitates continuous delivery and training,
as illustrated in Fig.¬†<a href="#S2.F2" title="Figure 2 ‚Ä£ II-B Flexible MLOps in Production ‚Ä£ II Proposed Solution ‚Ä£ FedKit: Enabling Cross-Platform Federated Learning for Android and iOS" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<figure id="S2.F2" class="ltx_figure"><img src="/html/2402.10464/assets/x2.png" id="S2.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="368" height="120" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span><span id="S2.F2.2.1" class="ltx_text ltx_font_smallcaps">FedKit</span> FL Workflow.</figcaption>
</figure>
<section id="S2.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection"><span id="S2.SS2.SSS1.5.1.1" class="ltx_text">II-B</span>1 </span>Continuous Cross-Platform Model Delivery</h4>

<div id="S2.SS2.SSS1.p1" class="ltx_para">
<p id="S2.SS2.SSS1.p1.1" class="ltx_p">Traditionally, models for on-device training are <span id="S2.SS2.SSS1.p1.1.1" class="ltx_text ltx_font_italic">embedded</span> into client apps.
However, this approach couples model delivery with app updates,
resulting in complexities when submitting apps to app stores and garnering user adoption.</p>
</div>
<div id="S2.SS2.SSS1.p2" class="ltx_para">
<p id="S2.SS2.SSS1.p2.1" class="ltx_p">Circumventing this complexity,
<span id="S2.SS2.SSS1.p2.1.1" class="ltx_text ltx_font_smallcaps">FedKit</span> enables <span id="S2.SS2.SSS1.p2.1.2" class="ltx_text ltx_font_italic">continuous model delivery without app updates</span> by
decoupling models from clients through <span id="S2.SS2.SSS1.p2.1.3" class="ltx_text ltx_font_italic">Model Request</span>,
which allows new model deployment by uploading to the Backend.
Specifically, clients request the Backend for a model (TFLite/Core ML)
aligned with
their platform (Android/iOS) and training data type.
The Backend selects the appropriate model <math id="S2.SS2.SSS1.p2.1.m1.1" class="ltx_Math" alttext="M" display="inline"><semantics id="S2.SS2.SSS1.p2.1.m1.1a"><mi id="S2.SS2.SSS1.p2.1.m1.1.1" xref="S2.SS2.SSS1.p2.1.m1.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p2.1.m1.1b"><ci id="S2.SS2.SSS1.p2.1.m1.1.1.cmml" xref="S2.SS2.SSS1.p2.1.m1.1.1">ùëÄ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p2.1.m1.1c">M</annotation></semantics></math> from the database and
responds with detailed model information.
Consequently, <span id="S2.SS2.SSS1.p2.1.4" class="ltx_text ltx_font_italic">Model Request</span> delivers the TFLite or Core ML model
to clients for FL training.</p>
</div>
</section>
<section id="S2.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection"><span id="S2.SS2.SSS2.5.1.1" class="ltx_text">II-B</span>2 </span>Customizable Continuous FL Training</h4>

<div id="S2.SS2.SSS2.p1" class="ltx_para">
<p id="S2.SS2.SSS2.p1.2" class="ltx_p"><span id="S2.SS2.SSS2.p1.2.1" class="ltx_text ltx_font_smallcaps">FedKit</span> manages continuous FL training by allowing <span id="S2.SS2.SSS2.p1.2.2" class="ltx_text ltx_font_italic">multiple parallel FL training sessions</span>
through <span id="S2.SS2.SSS2.p1.2.3" class="ltx_text ltx_font_italic">FL Server Setup</span>.
When clients request an FL Server to
train their chosen model <math id="S2.SS2.SSS2.p1.1.m1.1" class="ltx_Math" alttext="M" display="inline"><semantics id="S2.SS2.SSS2.p1.1.m1.1a"><mi id="S2.SS2.SSS2.p1.1.m1.1.1" xref="S2.SS2.SSS2.p1.1.m1.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.1.m1.1b"><ci id="S2.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS2.p1.1.m1.1.1">ùëÄ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.1.m1.1c">M</annotation></semantics></math>,
the Backend either reuses a suitable FL Server <math id="S2.SS2.SSS2.p1.2.m2.1" class="ltx_Math" alttext="S_{\mathrm{F}}" display="inline"><semantics id="S2.SS2.SSS2.p1.2.m2.1a"><msub id="S2.SS2.SSS2.p1.2.m2.1.1" xref="S2.SS2.SSS2.p1.2.m2.1.1.cmml"><mi id="S2.SS2.SSS2.p1.2.m2.1.1.2" xref="S2.SS2.SSS2.p1.2.m2.1.1.2.cmml">S</mi><mi mathvariant="normal" id="S2.SS2.SSS2.p1.2.m2.1.1.3" xref="S2.SS2.SSS2.p1.2.m2.1.1.3.cmml">F</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.2.m2.1b"><apply id="S2.SS2.SSS2.p1.2.m2.1.1.cmml" xref="S2.SS2.SSS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.SSS2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.SSS2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.SSS2.p1.2.m2.1.1.2">ùëÜ</ci><ci id="S2.SS2.SSS2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.SSS2.p1.2.m2.1.1.3">F</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.2.m2.1c">S_{\mathrm{F}}</annotation></semantics></math> if it exists,
or spawns a new one.
Each FL Server
operates as an independent Python subprocess of the Django Backend,
occupying its own port that
clients connect to for FL Training.
This dynamic approach ensures that
newly delivered models can be immediately trained with new FL Servers
without affecting ongoing ones.
Furthermore,
these FL Servers employ the Flower FL Framework¬†<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite> for
scheduling training and evaluation.
This decision empowers our FL Servers to leverage Flower‚Äôs flexibility and
allow for FL algorithm customizations in Python.</p>
</div>
</section>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">III </span><span id="S3.1.1" class="ltx_text ltx_font_smallcaps">Live Demonstrations</span>
</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">We demonstrate <span id="S3.p1.1.1" class="ltx_text ltx_font_smallcaps">FedKit</span>‚Äôs effectiveness in two settings.<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>
Demo video: <a target="_blank" href="https://www.youtube.com/watch?v=TONTBkp_l6M" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://www.youtube.com/watch?v=TONTBkp_l6M</a>.
</span></span></span></p>
</div>
<section id="S3.SS0.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection"><span id="S3.SS0.SSS1.5.1.1" class="ltx_text">III-</span>1 </span>Model Deployment on Demo Android/iOS App</h4>

<div id="S3.SS0.SSS1.p1" class="ltx_para">
<p id="S3.SS0.SSS1.p1.2" class="ltx_p">We demonstrate FL among
devices running a Flutter client app
and a laptop running a <span id="S3.SS0.SSS1.p1.2.1" class="ltx_text ltx_font_smallcaps">FedKit</span> Backend.
First, we demonstrate our seamless <span id="S3.SS0.SSS1.p1.2.2" class="ltx_text ltx_font_italic">FL model pipeline</span>.
We convert a TensorFlow MNIST model,
and conduct <span id="S3.SS0.SSS1.p1.2.3" class="ltx_text ltx_font_italic">normal</span> FL across an Android and an iOS device,
despite the heterogeneity.
Note that TFLite, Core ML, and the aggregation strategy determine the model
performance.
Second, to showcase <span id="S3.SS0.SSS1.p1.2.4" class="ltx_text ltx_font_italic">MLOps</span>,
we modify the model and deploy its new version.
As outlined in Table¬†<a href="#S3.T2" title="TABLE II ‚Ä£ III-1 Model Deployment on Demo Android/iOS App ‚Ä£ III Live Demonstrations ‚Ä£ FedKit: Enabling Cross-Platform Federated Learning for Android and iOS" class="ltx_ref"><span class="ltx_text ltx_ref_tag">II</span></a>,
our telemetry shows that
the iOS device is over 5<math id="S3.SS0.SSS1.p1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S3.SS0.SSS1.p1.1.m1.1a"><mo id="S3.SS0.SSS1.p1.1.m1.1.1" xref="S3.SS0.SSS1.p1.1.m1.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS1.p1.1.m1.1b"><times id="S3.SS0.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS0.SSS1.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS1.p1.1.m1.1c">\times</annotation></semantics></math> faster in local training despite
having 0.5<math id="S3.SS0.SSS1.p1.2.m2.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S3.SS0.SSS1.p1.2.m2.1a"><mo id="S3.SS0.SSS1.p1.2.m2.1.1" xref="S3.SS0.SSS1.p1.2.m2.1.1.cmml">√ó</mo><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS1.p1.2.m2.1b"><times id="S3.SS0.SSS1.p1.2.m2.1.1.cmml" xref="S3.SS0.SSS1.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS1.p1.2.m2.1c">\times</annotation></semantics></math> RAM,
illustrating how <span id="S3.SS0.SSS1.p1.2.5" class="ltx_text ltx_font_smallcaps">FedKit</span> will provide real-world statistics to
enhance FL algorithm design.</p>
</div>
<figure id="S3.T2" class="ltx_table">
<table id="S3.T2.1" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S3.T2.1.1.1" class="ltx_tr">
<th id="S3.T2.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column" style="padding-left:4.0pt;padding-right:4.0pt;">Device</th>
<th id="S3.T2.1.1.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column" style="padding-left:4.0pt;padding-right:4.0pt;">System on a Chip</th>
<th id="S3.T2.1.1.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_column" style="padding-left:4.0pt;padding-right:4.0pt;">Accel.</th>
<th id="S3.T2.1.1.1.4" class="ltx_td ltx_align_left ltx_th ltx_th_column" style="padding-left:4.0pt;padding-right:4.0pt;">RAM</th>
<th id="S3.T2.1.1.1.5" class="ltx_td ltx_align_left ltx_th ltx_th_column" style="padding-left:4.0pt;padding-right:4.0pt;">Time</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S3.T2.1.2.1" class="ltx_tr">
<td id="S3.T2.1.2.1.1" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;">Nova 9 Pro</td>
<td id="S3.T2.1.2.1.2" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;">Snapdragon 778G</td>
<td id="S3.T2.1.2.1.3" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;">OpenCL</td>
<td id="S3.T2.1.2.1.4" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;">8GB LPDDR5</td>
<td id="S3.T2.1.2.1.5" class="ltx_td ltx_align_left ltx_border_t" style="padding-left:4.0pt;padding-right:4.0pt;">3.583s</td>
</tr>
<tr id="S3.T2.1.3.2" class="ltx_tr">
<td id="S3.T2.1.3.2.1" class="ltx_td ltx_align_left" style="padding-left:4.0pt;padding-right:4.0pt;">iPhone 13</td>
<td id="S3.T2.1.3.2.2" class="ltx_td ltx_align_left" style="padding-left:4.0pt;padding-right:4.0pt;">A15 Bionic, 4 GPU</td>
<td id="S3.T2.1.3.2.3" class="ltx_td ltx_align_left" style="padding-left:4.0pt;padding-right:4.0pt;">CoreML</td>
<td id="S3.T2.1.3.2.4" class="ltx_td ltx_align_left" style="padding-left:4.0pt;padding-right:4.0pt;">4GB LPDDR4X</td>
<td id="S3.T2.1.3.2.5" class="ltx_td ltx_align_left" style="padding-left:4.0pt;padding-right:4.0pt;">0.656s</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">TABLE II: </span>Configurations of Devices and Average Local Training Time Per Round
(Two Local Epochs) in A Previous Demo Run.
</figcaption>
</figure>
</section>
<section id="S3.SS0.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection"><span id="S3.SS0.SSS2.5.1.1" class="ltx_text">III-</span>2 </span><span id="S3.SS0.SSS2.6.2" class="ltx_text ltx_font_smallcaps">FedCampus</span>
</h4>

<div id="S3.SS0.SSS2.p1" class="ltx_para">
<p id="S3.SS0.SSS2.p1.1" class="ltx_p">To harness real users‚Äô health data on university campuses,
we developed the <span id="S3.SS0.SSS2.p1.1.1" class="ltx_text ltx_font_smallcaps">FedCampus</span> Android/iOS app to leverage data from
participants‚Äô smartwatches to perform FL on
a sleep-duration prediction model.
As illustrated in Fig.¬†<a href="#S3.F3" title="Figure 3 ‚Ä£ III-2 FedCampus ‚Ä£ III Live Demonstrations ‚Ä£ FedKit: Enabling Cross-Platform Federated Learning for Android and iOS" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>,
we showcase our self-hosted Backend,
and display the real-time logs and losses on a connected laptop.
The results of our cross-platform continuous training showcased
a significant reduction in the model‚Äôs training loss,
demonstrating <span id="S3.SS0.SSS2.p1.1.2" class="ltx_text ltx_font_smallcaps">FedKit</span>‚Äôs effectiveness in real-world scenarios.</p>
</div>
<figure id="S3.F3" class="ltx_figure"><img src="/html/2402.10464/assets/x3.png" id="S3.F3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="415" height="165" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span><span id="S3.F3.2.1" class="ltx_text ltx_font_smallcaps">FedCampus</span> Experiment Setup on Duke Kunshan University Campus.</figcaption>
</figure>
</section>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
A.¬†Farcas <em id="bib.bib1.1.1" class="ltx_emph ltx_font_italic">et¬†al.</em>, ‚ÄúDemo abstract: A hardware prototype targeting federated learning with user mobility and device heterogeneity,‚Äù in <em id="bib.bib1.2.2" class="ltx_emph ltx_font_italic">IoTDI</em>, 2023.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
C.¬†He <em id="bib.bib2.1.1" class="ltx_emph ltx_font_italic">et¬†al.</em>, ‚ÄúFedML: A research library and benchmark for federated machine learning,‚Äù 2020.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
D.¬†Madrigal <em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">et¬†al.</em>, ‚ÄúProject florida: Federated learning made easy,‚Äù Microsoft, Tech. Rep., Jul. 2023.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
A.¬†Mathur <em id="bib.bib4.1.1" class="ltx_emph ltx_font_italic">et¬†al.</em>, ‚ÄúOn-device federated learning with flower,‚Äù 2021.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
A.¬†J. Hall <em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">et¬†al.</em>, ‚ÄúSyft 0.5: A platform for universally deployable structured transparency,‚Äù 2021.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2402.10463" class="ar5iv-nav-button ar5iv-nav-button-prev">‚óÑ</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2402.10464" class="ar5iv-text-button ar5iv-severity-ok">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2402.10464">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2402.10464" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2402.10465" class="ar5iv-nav-button ar5iv-nav-button-next">‚ñ∫</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Tue Mar  5 18:20:56 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "√ó";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
