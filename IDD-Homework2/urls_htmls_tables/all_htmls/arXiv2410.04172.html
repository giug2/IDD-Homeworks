<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>DB-SAM: Delving into High Quality Universal Medical Image Segmentation</title>
<!--Generated on Sat Oct  5 14:31:15 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<meta content="Medical Image Segmentation Segmentation Foundation Model Multi-modality." lang="en" name="keywords"/>
<base href="/html/2410.04172v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S1" title="In DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2" title="In DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Method</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.SS1" title="In 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>ViT Branch</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.SS2" title="In 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Convolution Branch</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.SS3" title="In 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>ViT-Conv Fusion Block</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S3" title="In DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S3.SS1" title="In 3 Experiments ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Implementation and Evaluation Metrics</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S3.SS2" title="In 3 Experiments ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Comparison with SAM and MedSAM</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S3.SS3" title="In 3 Experiments ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Ablation Study</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S4" title="In DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Conclusion</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S4.SS0.SSS1" title="In 4 Conclusion ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.0.1 </span><span class="ltx_ERROR undefined">\discintname</span></span></a></li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line"><span class="ltx_note ltx_role_institutetext" id="id1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">institutetext: </span>Mohamed bin Zayed University of Artificial Intelligence, Abu Dhabi, United Arab Emirates 
<br class="ltx_break"/><span class="ltx_note ltx_role_email" id="id1.1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">email: </span>chao.qin@mbzuai.ac.ae</span></span></span>
<br class="ltx_break"/></span></span></span><span class="ltx_note ltx_role_institutetext" id="id2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_note_type">institutetext: </span>Tianjin University, Tianjin, China </span></span></span><span class="ltx_note ltx_role_institutetext" id="id3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_note_type">institutetext: </span>Institute of High Performance Computing, Agency for Science, Technology and Research, Singapore </span></span></span><span class="ltx_note ltx_role_institutetext" id="id4"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_note_type">institutetext: </span>Linköping University, Linköping, Sweden</span></span></span>
<h1 class="ltx_title ltx_title_document">DB-SAM: Delving into High Quality Universal Medical Image Segmentation</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Chao Qin<math alttext="{}^{\textrm{({\char 0\relax})}}" class="ltx_Math" display="inline" id="id1.1.m1.1"><semantics id="id1.1.m1.1a"><msup id="id1.1.m1.1.1" xref="id1.1.m1.1.1.cmml"><mi id="id1.1.m1.1.1a" xref="id1.1.m1.1.1.cmml"></mi><mtext id="id1.1.m1.1.1.1" xref="id1.1.m1.1.1.1a.cmml">(✉)</mtext></msup><annotation-xml encoding="MathML-Content" id="id1.1.m1.1b"><apply id="id1.1.m1.1.1.cmml" xref="id1.1.m1.1.1"><ci id="id1.1.m1.1.1.1a.cmml" xref="id1.1.m1.1.1.1"><mtext id="id1.1.m1.1.1.1.cmml" mathsize="70%" xref="id1.1.m1.1.1.1">(✉)</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="id1.1.m1.1c">{}^{\textrm{({\char 0\relax})}}</annotation><annotation encoding="application/x-llamapun" id="id1.1.m1.1d">start_FLOATSUPERSCRIPT (✉) end_FLOATSUPERSCRIPT</annotation></semantics></math>
</span><span class="ltx_author_notes">11</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Jiale Cao
</span><span class="ltx_author_notes">22</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Huazhu Fu
</span><span class="ltx_author_notes">33</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Fahad Shahbaz Khan
</span><span class="ltx_author_notes">11 4 4</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
<br class="ltx_break"/>Rao Muhammad Anwer
</span><span class="ltx_author_notes">11</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id2.id1">Recently, the Segment Anything Model (SAM) has demonstrated promising segmentation capabilities in a variety of downstream segmentation tasks. However in the context of universal medical image segmentation there exists a notable performance discrepancy when directly applying SAM due to the domain gap between natural and 2D/3D medical data. In this work, we propose a dual-branch adapted SAM framework, named DB-SAM, that strives to effectively bridge this domain gap. Our dual-branch adapted SAM contains two branches in parallel: a ViT branch and a convolution branch. The ViT branch incorporates a learnable channel attention block after each frozen attention block, which captures domain-specific local features. On the other hand, the convolution branch employs a light-weight convolutional block to extract domain-specific shallow features from the input medical image. To perform cross-branch feature fusion, we design a bilateral cross-attention block and a ViT convolution fusion block, which dynamically combine diverse information of two branches for mask decoder. Extensive experiments on large-scale medical image dataset with various 3D and 2D medical segmentation tasks reveal the merits of our proposed contributions. On 21 3D medical image segmentation tasks, our proposed DB-SAM achieves an absolute gain of 8.8%, compared to a recent medical SAM adapter in the literature. The code and model are available at https://github.com/AlfredQin/DB-SAM.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Keywords: </h6>Medical Image Segmentation Segmentation Foundation Model Multi-modality.
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.2">Medical image segmentation plays a pivotal role in various clinical applications, including disease diagnosis and surgical planning. In past years, deep learning-based methods have achieved significant progress on medical image segmentation tasks. Most existing methods <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib32" title="">32</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib8" title="">8</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib9" title="">9</a>]</cite> are typically task-specific in that they usually focus on a specific segmentation task, for which the dataset is captured through a specific type of medical device. As a result, these methods have limited generalization ability to different medical segmentation tasks, especially when the medical device belongs to different types.
Recently, a class-agnostic segmentation model, named SAM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib18" title="">18</a>]</cite>, has been introduced to perform universal segmentation in natural images.
SAM is trained on large-scale data and exhibits impressive generalization ability on various down-stream segmentation tasks.
However, its segmentation quality deteriorates when directly adapting to 2D and 3D medical image segmentation. This is due to a large domain gap between natural images and medical images.
A straightforward way to adapt SAM for universal medical image segmentation is re-training the entire SAM model on medical image datasets. However, this is challenging since it requires significant computational resources along with the availability of a very large-scale medical image dataset. Compared to natural images, medical images are relatively scarce and expensive. To address this issue, the recently introduced MedSAM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a>]</cite> focuses on only fine-tuning the mask decoder of SAM, achieving better universal medical image segmentation performance compared to the vanilla SAM. Nonetheless, this fine-tuning strategy does not fully harness domain-specific (medical) knowledge and likely results in sub-optimal segmentation performance, especially on organs with intricate outlines. In contrast, the concept of adapter that is prevalent in natural language processing (NLP) provides a potential avenue. The adapter module is usually parameter-efficient and can be easily integrated into a pre-trained model. During training, only the adapter module is trained and the pre-trained model parameters are frozen.
In this work, we propose a dual-branch framework, named DB-SAM, that adapts SAM for high-quality universal medical image segmentation. We introduce a novel dual-branch encoder comprising <span class="ltx_text ltx_font_bold" id="S1.p1.2.1">(i)</span> a ViT branch with inserted channel attention blocks for domain-specific locality inductive bias, and <span class="ltx_text ltx_font_bold" id="S1.p1.2.2">(ii)</span> a convolution branch equipped with lightweight convolutional blocks for extracting shallow features. A bilateral cross-attention block is designed for effective cross-layer feature fusion between ViT branch and convolution branch. Finally, the output features of two branches are fused through an automatic selective mechanism.
Our proposed DB-SAM is evaluated on a comprehensive dataset drawn from 30 public medical datasets covering both 3D and 2D images of different modalities. Our experimental results demonstrate the effectiveness of the proposed DB-SAM, leading to consistent improvement in performance on a diverse set of 2D and 3D medical segmentation tasks. In case of 3D medical image segmentation, the proposed DB-SAM achieves an absolute gain of <math alttext="6\%" class="ltx_Math" display="inline" id="S1.p1.1.m1.1"><semantics id="S1.p1.1.m1.1a"><mrow id="S1.p1.1.m1.1.1" xref="S1.p1.1.m1.1.1.cmml"><mn id="S1.p1.1.m1.1.1.2" xref="S1.p1.1.m1.1.1.2.cmml">6</mn><mo id="S1.p1.1.m1.1.1.1" xref="S1.p1.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S1.p1.1.m1.1b"><apply id="S1.p1.1.m1.1.1.cmml" xref="S1.p1.1.m1.1.1"><csymbol cd="latexml" id="S1.p1.1.m1.1.1.1.cmml" xref="S1.p1.1.m1.1.1.1">percent</csymbol><cn id="S1.p1.1.m1.1.1.2.cmml" type="integer" xref="S1.p1.1.m1.1.1.2">6</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p1.1.m1.1c">6\%</annotation><annotation encoding="application/x-llamapun" id="S1.p1.1.m1.1d">6 %</annotation></semantics></math> and <math alttext="8.9\%" class="ltx_Math" display="inline" id="S1.p1.2.m2.1"><semantics id="S1.p1.2.m2.1a"><mrow id="S1.p1.2.m2.1.1" xref="S1.p1.2.m2.1.1.cmml"><mn id="S1.p1.2.m2.1.1.2" xref="S1.p1.2.m2.1.1.2.cmml">8.9</mn><mo id="S1.p1.2.m2.1.1.1" xref="S1.p1.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S1.p1.2.m2.1b"><apply id="S1.p1.2.m2.1.1.cmml" xref="S1.p1.2.m2.1.1"><csymbol cd="latexml" id="S1.p1.2.m2.1.1.1.cmml" xref="S1.p1.2.m2.1.1.1">percent</csymbol><cn id="S1.p1.2.m2.1.1.2.cmml" type="float" xref="S1.p1.2.m2.1.1.2">8.9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p1.2.m2.1c">8.9\%</annotation><annotation encoding="application/x-llamapun" id="S1.p1.2.m2.1d">8.9 %</annotation></semantics></math> in terms of DSC and NSD, respectively, compared to the baseline MedSAM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a>]</cite>.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Method</h2>
<figure class="ltx_figure" id="S2.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="397" id="S2.F1.g1" src="extracted/5903890/model.jpg" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span><span class="ltx_text ltx_font_bold" id="S2.F1.5.1">(a)</span> Overall architecture of our DB-SAM. Our DB-SAM contains two branches: one ViT branch and one convolution branch. The ViT branch incorporates channel attention block <span class="ltx_text ltx_font_bold" id="S2.F1.6.2">(b)</span> to capture domain-specific high-level features, while the convolution branch adopts light-weight convolution blocks to extract shallow features. For cross-branch fusion, we introduce a bilateral cross-attention operation <span class="ltx_text ltx_font_bold" id="S2.F1.7.3">(c)</span> and ViT-Conv fusion module <span class="ltx_text ltx_font_bold" id="S2.F1.8.4">(d)</span> to adaptively combine the features. Finally, the fused features and prompt embeddings are fed to mask decoder.</figcaption>
</figure>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.7">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.F1" title="Figure 1 ‣ 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">1</span></a>(a) shows overall architecture of our method. Given an input image <math alttext="I" class="ltx_Math" display="inline" id="S2.p1.1.m1.1"><semantics id="S2.p1.1.m1.1a"><mi id="S2.p1.1.m1.1.1" xref="S2.p1.1.m1.1.1.cmml">I</mi><annotation-xml encoding="MathML-Content" id="S2.p1.1.m1.1b"><ci id="S2.p1.1.m1.1.1.cmml" xref="S2.p1.1.m1.1.1">𝐼</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.1.m1.1c">I</annotation><annotation encoding="application/x-llamapun" id="S2.p1.1.m1.1d">italic_I</annotation></semantics></math>, we first resize the input image into two images of different resolutions that are represented as <math alttext="I_{vit}\in\mathbb{R}^{1024\times 1024}" class="ltx_Math" display="inline" id="S2.p1.2.m2.1"><semantics id="S2.p1.2.m2.1a"><mrow id="S2.p1.2.m2.1.1" xref="S2.p1.2.m2.1.1.cmml"><msub id="S2.p1.2.m2.1.1.2" xref="S2.p1.2.m2.1.1.2.cmml"><mi id="S2.p1.2.m2.1.1.2.2" xref="S2.p1.2.m2.1.1.2.2.cmml">I</mi><mrow id="S2.p1.2.m2.1.1.2.3" xref="S2.p1.2.m2.1.1.2.3.cmml"><mi id="S2.p1.2.m2.1.1.2.3.2" xref="S2.p1.2.m2.1.1.2.3.2.cmml">v</mi><mo id="S2.p1.2.m2.1.1.2.3.1" xref="S2.p1.2.m2.1.1.2.3.1.cmml">⁢</mo><mi id="S2.p1.2.m2.1.1.2.3.3" xref="S2.p1.2.m2.1.1.2.3.3.cmml">i</mi><mo id="S2.p1.2.m2.1.1.2.3.1a" xref="S2.p1.2.m2.1.1.2.3.1.cmml">⁢</mo><mi id="S2.p1.2.m2.1.1.2.3.4" xref="S2.p1.2.m2.1.1.2.3.4.cmml">t</mi></mrow></msub><mo id="S2.p1.2.m2.1.1.1" xref="S2.p1.2.m2.1.1.1.cmml">∈</mo><msup id="S2.p1.2.m2.1.1.3" xref="S2.p1.2.m2.1.1.3.cmml"><mi id="S2.p1.2.m2.1.1.3.2" xref="S2.p1.2.m2.1.1.3.2.cmml">ℝ</mi><mrow id="S2.p1.2.m2.1.1.3.3" xref="S2.p1.2.m2.1.1.3.3.cmml"><mn id="S2.p1.2.m2.1.1.3.3.2" xref="S2.p1.2.m2.1.1.3.3.2.cmml">1024</mn><mo id="S2.p1.2.m2.1.1.3.3.1" lspace="0.222em" rspace="0.222em" xref="S2.p1.2.m2.1.1.3.3.1.cmml">×</mo><mn id="S2.p1.2.m2.1.1.3.3.3" xref="S2.p1.2.m2.1.1.3.3.3.cmml">1024</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S2.p1.2.m2.1b"><apply id="S2.p1.2.m2.1.1.cmml" xref="S2.p1.2.m2.1.1"><in id="S2.p1.2.m2.1.1.1.cmml" xref="S2.p1.2.m2.1.1.1"></in><apply id="S2.p1.2.m2.1.1.2.cmml" xref="S2.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="S2.p1.2.m2.1.1.2.1.cmml" xref="S2.p1.2.m2.1.1.2">subscript</csymbol><ci id="S2.p1.2.m2.1.1.2.2.cmml" xref="S2.p1.2.m2.1.1.2.2">𝐼</ci><apply id="S2.p1.2.m2.1.1.2.3.cmml" xref="S2.p1.2.m2.1.1.2.3"><times id="S2.p1.2.m2.1.1.2.3.1.cmml" xref="S2.p1.2.m2.1.1.2.3.1"></times><ci id="S2.p1.2.m2.1.1.2.3.2.cmml" xref="S2.p1.2.m2.1.1.2.3.2">𝑣</ci><ci id="S2.p1.2.m2.1.1.2.3.3.cmml" xref="S2.p1.2.m2.1.1.2.3.3">𝑖</ci><ci id="S2.p1.2.m2.1.1.2.3.4.cmml" xref="S2.p1.2.m2.1.1.2.3.4">𝑡</ci></apply></apply><apply id="S2.p1.2.m2.1.1.3.cmml" xref="S2.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S2.p1.2.m2.1.1.3.1.cmml" xref="S2.p1.2.m2.1.1.3">superscript</csymbol><ci id="S2.p1.2.m2.1.1.3.2.cmml" xref="S2.p1.2.m2.1.1.3.2">ℝ</ci><apply id="S2.p1.2.m2.1.1.3.3.cmml" xref="S2.p1.2.m2.1.1.3.3"><times id="S2.p1.2.m2.1.1.3.3.1.cmml" xref="S2.p1.2.m2.1.1.3.3.1"></times><cn id="S2.p1.2.m2.1.1.3.3.2.cmml" type="integer" xref="S2.p1.2.m2.1.1.3.3.2">1024</cn><cn id="S2.p1.2.m2.1.1.3.3.3.cmml" type="integer" xref="S2.p1.2.m2.1.1.3.3.3">1024</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.2.m2.1c">I_{vit}\in\mathbb{R}^{1024\times 1024}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.2.m2.1d">italic_I start_POSTSUBSCRIPT italic_v italic_i italic_t end_POSTSUBSCRIPT ∈ blackboard_R start_POSTSUPERSCRIPT 1024 × 1024 end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="I_{conv}\in\mathbb{R}^{256\times 256}" class="ltx_Math" display="inline" id="S2.p1.3.m3.1"><semantics id="S2.p1.3.m3.1a"><mrow id="S2.p1.3.m3.1.1" xref="S2.p1.3.m3.1.1.cmml"><msub id="S2.p1.3.m3.1.1.2" xref="S2.p1.3.m3.1.1.2.cmml"><mi id="S2.p1.3.m3.1.1.2.2" xref="S2.p1.3.m3.1.1.2.2.cmml">I</mi><mrow id="S2.p1.3.m3.1.1.2.3" xref="S2.p1.3.m3.1.1.2.3.cmml"><mi id="S2.p1.3.m3.1.1.2.3.2" xref="S2.p1.3.m3.1.1.2.3.2.cmml">c</mi><mo id="S2.p1.3.m3.1.1.2.3.1" xref="S2.p1.3.m3.1.1.2.3.1.cmml">⁢</mo><mi id="S2.p1.3.m3.1.1.2.3.3" xref="S2.p1.3.m3.1.1.2.3.3.cmml">o</mi><mo id="S2.p1.3.m3.1.1.2.3.1a" xref="S2.p1.3.m3.1.1.2.3.1.cmml">⁢</mo><mi id="S2.p1.3.m3.1.1.2.3.4" xref="S2.p1.3.m3.1.1.2.3.4.cmml">n</mi><mo id="S2.p1.3.m3.1.1.2.3.1b" xref="S2.p1.3.m3.1.1.2.3.1.cmml">⁢</mo><mi id="S2.p1.3.m3.1.1.2.3.5" xref="S2.p1.3.m3.1.1.2.3.5.cmml">v</mi></mrow></msub><mo id="S2.p1.3.m3.1.1.1" xref="S2.p1.3.m3.1.1.1.cmml">∈</mo><msup id="S2.p1.3.m3.1.1.3" xref="S2.p1.3.m3.1.1.3.cmml"><mi id="S2.p1.3.m3.1.1.3.2" xref="S2.p1.3.m3.1.1.3.2.cmml">ℝ</mi><mrow id="S2.p1.3.m3.1.1.3.3" xref="S2.p1.3.m3.1.1.3.3.cmml"><mn id="S2.p1.3.m3.1.1.3.3.2" xref="S2.p1.3.m3.1.1.3.3.2.cmml">256</mn><mo id="S2.p1.3.m3.1.1.3.3.1" lspace="0.222em" rspace="0.222em" xref="S2.p1.3.m3.1.1.3.3.1.cmml">×</mo><mn id="S2.p1.3.m3.1.1.3.3.3" xref="S2.p1.3.m3.1.1.3.3.3.cmml">256</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S2.p1.3.m3.1b"><apply id="S2.p1.3.m3.1.1.cmml" xref="S2.p1.3.m3.1.1"><in id="S2.p1.3.m3.1.1.1.cmml" xref="S2.p1.3.m3.1.1.1"></in><apply id="S2.p1.3.m3.1.1.2.cmml" xref="S2.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="S2.p1.3.m3.1.1.2.1.cmml" xref="S2.p1.3.m3.1.1.2">subscript</csymbol><ci id="S2.p1.3.m3.1.1.2.2.cmml" xref="S2.p1.3.m3.1.1.2.2">𝐼</ci><apply id="S2.p1.3.m3.1.1.2.3.cmml" xref="S2.p1.3.m3.1.1.2.3"><times id="S2.p1.3.m3.1.1.2.3.1.cmml" xref="S2.p1.3.m3.1.1.2.3.1"></times><ci id="S2.p1.3.m3.1.1.2.3.2.cmml" xref="S2.p1.3.m3.1.1.2.3.2">𝑐</ci><ci id="S2.p1.3.m3.1.1.2.3.3.cmml" xref="S2.p1.3.m3.1.1.2.3.3">𝑜</ci><ci id="S2.p1.3.m3.1.1.2.3.4.cmml" xref="S2.p1.3.m3.1.1.2.3.4">𝑛</ci><ci id="S2.p1.3.m3.1.1.2.3.5.cmml" xref="S2.p1.3.m3.1.1.2.3.5">𝑣</ci></apply></apply><apply id="S2.p1.3.m3.1.1.3.cmml" xref="S2.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S2.p1.3.m3.1.1.3.1.cmml" xref="S2.p1.3.m3.1.1.3">superscript</csymbol><ci id="S2.p1.3.m3.1.1.3.2.cmml" xref="S2.p1.3.m3.1.1.3.2">ℝ</ci><apply id="S2.p1.3.m3.1.1.3.3.cmml" xref="S2.p1.3.m3.1.1.3.3"><times id="S2.p1.3.m3.1.1.3.3.1.cmml" xref="S2.p1.3.m3.1.1.3.3.1"></times><cn id="S2.p1.3.m3.1.1.3.3.2.cmml" type="integer" xref="S2.p1.3.m3.1.1.3.3.2">256</cn><cn id="S2.p1.3.m3.1.1.3.3.3.cmml" type="integer" xref="S2.p1.3.m3.1.1.3.3.3">256</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.3.m3.1c">I_{conv}\in\mathbb{R}^{256\times 256}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.3.m3.1d">italic_I start_POSTSUBSCRIPT italic_c italic_o italic_n italic_v end_POSTSUBSCRIPT ∈ blackboard_R start_POSTSUPERSCRIPT 256 × 256 end_POSTSUPERSCRIPT</annotation></semantics></math>. These two images are fed to two different branches of our dual-branch image encoder, where the image <math alttext="I_{vit}" class="ltx_Math" display="inline" id="S2.p1.4.m4.1"><semantics id="S2.p1.4.m4.1a"><msub id="S2.p1.4.m4.1.1" xref="S2.p1.4.m4.1.1.cmml"><mi id="S2.p1.4.m4.1.1.2" xref="S2.p1.4.m4.1.1.2.cmml">I</mi><mrow id="S2.p1.4.m4.1.1.3" xref="S2.p1.4.m4.1.1.3.cmml"><mi id="S2.p1.4.m4.1.1.3.2" xref="S2.p1.4.m4.1.1.3.2.cmml">v</mi><mo id="S2.p1.4.m4.1.1.3.1" xref="S2.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S2.p1.4.m4.1.1.3.3" xref="S2.p1.4.m4.1.1.3.3.cmml">i</mi><mo id="S2.p1.4.m4.1.1.3.1a" xref="S2.p1.4.m4.1.1.3.1.cmml">⁢</mo><mi id="S2.p1.4.m4.1.1.3.4" xref="S2.p1.4.m4.1.1.3.4.cmml">t</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.p1.4.m4.1b"><apply id="S2.p1.4.m4.1.1.cmml" xref="S2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.p1.4.m4.1.1.1.cmml" xref="S2.p1.4.m4.1.1">subscript</csymbol><ci id="S2.p1.4.m4.1.1.2.cmml" xref="S2.p1.4.m4.1.1.2">𝐼</ci><apply id="S2.p1.4.m4.1.1.3.cmml" xref="S2.p1.4.m4.1.1.3"><times id="S2.p1.4.m4.1.1.3.1.cmml" xref="S2.p1.4.m4.1.1.3.1"></times><ci id="S2.p1.4.m4.1.1.3.2.cmml" xref="S2.p1.4.m4.1.1.3.2">𝑣</ci><ci id="S2.p1.4.m4.1.1.3.3.cmml" xref="S2.p1.4.m4.1.1.3.3">𝑖</ci><ci id="S2.p1.4.m4.1.1.3.4.cmml" xref="S2.p1.4.m4.1.1.3.4">𝑡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.4.m4.1c">I_{vit}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.4.m4.1d">italic_I start_POSTSUBSCRIPT italic_v italic_i italic_t end_POSTSUBSCRIPT</annotation></semantics></math> goes through the ViT branch and the image <math alttext="I_{conv}" class="ltx_Math" display="inline" id="S2.p1.5.m5.1"><semantics id="S2.p1.5.m5.1a"><msub id="S2.p1.5.m5.1.1" xref="S2.p1.5.m5.1.1.cmml"><mi id="S2.p1.5.m5.1.1.2" xref="S2.p1.5.m5.1.1.2.cmml">I</mi><mrow id="S2.p1.5.m5.1.1.3" xref="S2.p1.5.m5.1.1.3.cmml"><mi id="S2.p1.5.m5.1.1.3.2" xref="S2.p1.5.m5.1.1.3.2.cmml">c</mi><mo id="S2.p1.5.m5.1.1.3.1" xref="S2.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S2.p1.5.m5.1.1.3.3" xref="S2.p1.5.m5.1.1.3.3.cmml">o</mi><mo id="S2.p1.5.m5.1.1.3.1a" xref="S2.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S2.p1.5.m5.1.1.3.4" xref="S2.p1.5.m5.1.1.3.4.cmml">n</mi><mo id="S2.p1.5.m5.1.1.3.1b" xref="S2.p1.5.m5.1.1.3.1.cmml">⁢</mo><mi id="S2.p1.5.m5.1.1.3.5" xref="S2.p1.5.m5.1.1.3.5.cmml">v</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.p1.5.m5.1b"><apply id="S2.p1.5.m5.1.1.cmml" xref="S2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.p1.5.m5.1.1.1.cmml" xref="S2.p1.5.m5.1.1">subscript</csymbol><ci id="S2.p1.5.m5.1.1.2.cmml" xref="S2.p1.5.m5.1.1.2">𝐼</ci><apply id="S2.p1.5.m5.1.1.3.cmml" xref="S2.p1.5.m5.1.1.3"><times id="S2.p1.5.m5.1.1.3.1.cmml" xref="S2.p1.5.m5.1.1.3.1"></times><ci id="S2.p1.5.m5.1.1.3.2.cmml" xref="S2.p1.5.m5.1.1.3.2">𝑐</ci><ci id="S2.p1.5.m5.1.1.3.3.cmml" xref="S2.p1.5.m5.1.1.3.3">𝑜</ci><ci id="S2.p1.5.m5.1.1.3.4.cmml" xref="S2.p1.5.m5.1.1.3.4">𝑛</ci><ci id="S2.p1.5.m5.1.1.3.5.cmml" xref="S2.p1.5.m5.1.1.3.5">𝑣</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.5.m5.1c">I_{conv}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.5.m5.1d">italic_I start_POSTSUBSCRIPT italic_c italic_o italic_n italic_v end_POSTSUBSCRIPT</annotation></semantics></math> goes through the convolution branch. The ViT branch comprises a patch embedding block, multiple attention blocks, and multiple channel attention blocks. The convolution branch contains multiple light-weight convolutional blocks. To fuse the features between two branches, the bilateral cross-attention block is designed to perform cross-layer feature fusion. The output features of two branches are represented as <math alttext="F_{d}^{o}" class="ltx_Math" display="inline" id="S2.p1.6.m6.1"><semantics id="S2.p1.6.m6.1a"><msubsup id="S2.p1.6.m6.1.1" xref="S2.p1.6.m6.1.1.cmml"><mi id="S2.p1.6.m6.1.1.2.2" xref="S2.p1.6.m6.1.1.2.2.cmml">F</mi><mi id="S2.p1.6.m6.1.1.2.3" xref="S2.p1.6.m6.1.1.2.3.cmml">d</mi><mi id="S2.p1.6.m6.1.1.3" xref="S2.p1.6.m6.1.1.3.cmml">o</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.p1.6.m6.1b"><apply id="S2.p1.6.m6.1.1.cmml" xref="S2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.p1.6.m6.1.1.1.cmml" xref="S2.p1.6.m6.1.1">superscript</csymbol><apply id="S2.p1.6.m6.1.1.2.cmml" xref="S2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.p1.6.m6.1.1.2.1.cmml" xref="S2.p1.6.m6.1.1">subscript</csymbol><ci id="S2.p1.6.m6.1.1.2.2.cmml" xref="S2.p1.6.m6.1.1.2.2">𝐹</ci><ci id="S2.p1.6.m6.1.1.2.3.cmml" xref="S2.p1.6.m6.1.1.2.3">𝑑</ci></apply><ci id="S2.p1.6.m6.1.1.3.cmml" xref="S2.p1.6.m6.1.1.3">𝑜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.6.m6.1c">F_{d}^{o}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.6.m6.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_o end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="F_{s}^{o}" class="ltx_Math" display="inline" id="S2.p1.7.m7.1"><semantics id="S2.p1.7.m7.1a"><msubsup id="S2.p1.7.m7.1.1" xref="S2.p1.7.m7.1.1.cmml"><mi id="S2.p1.7.m7.1.1.2.2" xref="S2.p1.7.m7.1.1.2.2.cmml">F</mi><mi id="S2.p1.7.m7.1.1.2.3" xref="S2.p1.7.m7.1.1.2.3.cmml">s</mi><mi id="S2.p1.7.m7.1.1.3" xref="S2.p1.7.m7.1.1.3.cmml">o</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.p1.7.m7.1b"><apply id="S2.p1.7.m7.1.1.cmml" xref="S2.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.p1.7.m7.1.1.1.cmml" xref="S2.p1.7.m7.1.1">superscript</csymbol><apply id="S2.p1.7.m7.1.1.2.cmml" xref="S2.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.p1.7.m7.1.1.2.1.cmml" xref="S2.p1.7.m7.1.1">subscript</csymbol><ci id="S2.p1.7.m7.1.1.2.2.cmml" xref="S2.p1.7.m7.1.1.2.2">𝐹</ci><ci id="S2.p1.7.m7.1.1.2.3.cmml" xref="S2.p1.7.m7.1.1.2.3">𝑠</ci></apply><ci id="S2.p1.7.m7.1.1.3.cmml" xref="S2.p1.7.m7.1.1.3">𝑜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.7.m7.1c">F_{s}^{o}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.7.m7.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_o end_POSTSUPERSCRIPT</annotation></semantics></math>, which are fused as final image embeddings for mask decoder. In addition, we convert the bounding-box into prompt embeddings using a prompt encoder. Based on the image embeddings and prompt embeddings, we employ mask decoder to predict corresponding segmentation map.</p>
</div>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>ViT Branch</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">The SAM adopts the transformer ViT as image encoder, and trains it on large-scale natural image dataset. To keep the strong feature representation ability of pre-trained ViT, we do not fine-tune the weights of pre-trained ViT during training, and introduce a local adapter module to introduce a locality inductive bias. Inspired by the advances in EfficientNetV2 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib31" title="">31</a>]</cite>, our local adapter module contains a channel attention block attached after the attention block of ViT. Different to attention block, the channel attention block is learnable during training and aims to extract high-level domain-specific features from the different levels of ViT encoder. As a result, our ViT branch adapts the original ViT to medical image segmentation without losing the strong feature representation ability.</p>
</div>
<div class="ltx_para" id="S2.SS1.p2">
<p class="ltx_p" id="S2.SS1.p2.7">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.F1" title="Figure 1 ‣ 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">1</span></a>(b) shows the structure of channel attention block, which is written as</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="F_{\text{out}}=F_{\text{vit}}+\text{Conv}_{1\times 1}\left(\text{SE}\left(%
\text{DWConv}_{3\times 3}\left(\text{LN}(F_{\text{vit}})\right)\right)\right)" class="ltx_Math" display="block" id="S2.E1.m1.1"><semantics id="S2.E1.m1.1a"><mrow id="S2.E1.m1.1.1" xref="S2.E1.m1.1.1.cmml"><msub id="S2.E1.m1.1.1.3" xref="S2.E1.m1.1.1.3.cmml"><mi id="S2.E1.m1.1.1.3.2" xref="S2.E1.m1.1.1.3.2.cmml">F</mi><mtext id="S2.E1.m1.1.1.3.3" xref="S2.E1.m1.1.1.3.3a.cmml">out</mtext></msub><mo id="S2.E1.m1.1.1.2" xref="S2.E1.m1.1.1.2.cmml">=</mo><mrow id="S2.E1.m1.1.1.1" xref="S2.E1.m1.1.1.1.cmml"><msub id="S2.E1.m1.1.1.1.3" xref="S2.E1.m1.1.1.1.3.cmml"><mi id="S2.E1.m1.1.1.1.3.2" xref="S2.E1.m1.1.1.1.3.2.cmml">F</mi><mtext id="S2.E1.m1.1.1.1.3.3" xref="S2.E1.m1.1.1.1.3.3a.cmml">vit</mtext></msub><mo id="S2.E1.m1.1.1.1.2" xref="S2.E1.m1.1.1.1.2.cmml">+</mo><mrow id="S2.E1.m1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.cmml"><msub id="S2.E1.m1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.3.cmml"><mtext id="S2.E1.m1.1.1.1.1.3.2" xref="S2.E1.m1.1.1.1.1.3.2a.cmml">Conv</mtext><mrow id="S2.E1.m1.1.1.1.1.3.3" xref="S2.E1.m1.1.1.1.1.3.3.cmml"><mn id="S2.E1.m1.1.1.1.1.3.3.2" xref="S2.E1.m1.1.1.1.1.3.3.2.cmml">1</mn><mo id="S2.E1.m1.1.1.1.1.3.3.1" lspace="0.222em" rspace="0.222em" xref="S2.E1.m1.1.1.1.1.3.3.1.cmml">×</mo><mn id="S2.E1.m1.1.1.1.1.3.3.3" xref="S2.E1.m1.1.1.1.1.3.3.3.cmml">1</mn></mrow></msub><mo id="S2.E1.m1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E1.m1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.cmml"><mo id="S2.E1.m1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E1.m1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.cmml"><mtext id="S2.E1.m1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.3a.cmml">SE</mtext><mo id="S2.E1.m1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E1.m1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml"><msub id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mtext id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.2a.cmml">DWConv</mtext><mrow id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.cmml"><mn id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.cmml">3</mn><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.1" lspace="0.222em" rspace="0.222em" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.1.cmml">×</mo><mn id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.3.cmml">3</mn></mrow></msub><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mtext id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.3a.cmml">LN</mtext><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><msub id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">F</mi><mtext id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3a.cmml">vit</mtext></msub><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.1.1.1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.1b"><apply id="S2.E1.m1.1.1.cmml" xref="S2.E1.m1.1.1"><eq id="S2.E1.m1.1.1.2.cmml" xref="S2.E1.m1.1.1.2"></eq><apply id="S2.E1.m1.1.1.3.cmml" xref="S2.E1.m1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.3">subscript</csymbol><ci id="S2.E1.m1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.3.2">𝐹</ci><ci id="S2.E1.m1.1.1.3.3a.cmml" xref="S2.E1.m1.1.1.3.3"><mtext id="S2.E1.m1.1.1.3.3.cmml" mathsize="70%" xref="S2.E1.m1.1.1.3.3">out</mtext></ci></apply><apply id="S2.E1.m1.1.1.1.cmml" xref="S2.E1.m1.1.1.1"><plus id="S2.E1.m1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.2"></plus><apply id="S2.E1.m1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.1.3">subscript</csymbol><ci id="S2.E1.m1.1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.1.3.2">𝐹</ci><ci id="S2.E1.m1.1.1.1.3.3a.cmml" xref="S2.E1.m1.1.1.1.3.3"><mtext id="S2.E1.m1.1.1.1.3.3.cmml" mathsize="70%" xref="S2.E1.m1.1.1.1.3.3">vit</mtext></ci></apply><apply id="S2.E1.m1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1"><times id="S2.E1.m1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.2"></times><apply id="S2.E1.m1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.1.1.3">subscript</csymbol><ci id="S2.E1.m1.1.1.1.1.3.2a.cmml" xref="S2.E1.m1.1.1.1.1.3.2"><mtext id="S2.E1.m1.1.1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.1.1.3.2">Conv</mtext></ci><apply id="S2.E1.m1.1.1.1.1.3.3.cmml" xref="S2.E1.m1.1.1.1.1.3.3"><times id="S2.E1.m1.1.1.1.1.3.3.1.cmml" xref="S2.E1.m1.1.1.1.1.3.3.1"></times><cn id="S2.E1.m1.1.1.1.1.3.3.2.cmml" type="integer" xref="S2.E1.m1.1.1.1.1.3.3.2">1</cn><cn id="S2.E1.m1.1.1.1.1.3.3.3.cmml" type="integer" xref="S2.E1.m1.1.1.1.1.3.3.3">1</cn></apply></apply><apply id="S2.E1.m1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1"><times id="S2.E1.m1.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.2"></times><ci id="S2.E1.m1.1.1.1.1.1.1.1.3a.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.3"><mtext id="S2.E1.m1.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.3">SE</mtext></ci><apply id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1"><times id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.2"></times><apply id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.2a.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.2"><mtext id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.2">DWConv</mtext></ci><apply id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3"><times id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.1"></times><cn id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.cmml" type="integer" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.2">3</cn><cn id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.3.cmml" type="integer" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.3.3.3">3</cn></apply></apply><apply id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1"><times id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.2"></times><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.3a.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.3"><mtext id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.3">LN</mtext></ci><apply id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.2">𝐹</ci><ci id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3a.cmml" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3"><mtext id="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" mathsize="70%" xref="S2.E1.m1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.1.3">vit</mtext></ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.1c">F_{\text{out}}=F_{\text{vit}}+\text{Conv}_{1\times 1}\left(\text{SE}\left(%
\text{DWConv}_{3\times 3}\left(\text{LN}(F_{\text{vit}})\right)\right)\right)</annotation><annotation encoding="application/x-llamapun" id="S2.E1.m1.1d">italic_F start_POSTSUBSCRIPT out end_POSTSUBSCRIPT = italic_F start_POSTSUBSCRIPT vit end_POSTSUBSCRIPT + Conv start_POSTSUBSCRIPT 1 × 1 end_POSTSUBSCRIPT ( SE ( DWConv start_POSTSUBSCRIPT 3 × 3 end_POSTSUBSCRIPT ( LN ( italic_F start_POSTSUBSCRIPT vit end_POSTSUBSCRIPT ) ) ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS1.p2.6">where <math alttext="F_{\text{vit}}" class="ltx_Math" display="inline" id="S2.SS1.p2.1.m1.1"><semantics id="S2.SS1.p2.1.m1.1a"><msub id="S2.SS1.p2.1.m1.1.1" xref="S2.SS1.p2.1.m1.1.1.cmml"><mi id="S2.SS1.p2.1.m1.1.1.2" xref="S2.SS1.p2.1.m1.1.1.2.cmml">F</mi><mtext id="S2.SS1.p2.1.m1.1.1.3" xref="S2.SS1.p2.1.m1.1.1.3a.cmml">vit</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.1.m1.1b"><apply id="S2.SS1.p2.1.m1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.1.m1.1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1">subscript</csymbol><ci id="S2.SS1.p2.1.m1.1.1.2.cmml" xref="S2.SS1.p2.1.m1.1.1.2">𝐹</ci><ci id="S2.SS1.p2.1.m1.1.1.3a.cmml" xref="S2.SS1.p2.1.m1.1.1.3"><mtext id="S2.SS1.p2.1.m1.1.1.3.cmml" mathsize="70%" xref="S2.SS1.p2.1.m1.1.1.3">vit</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.1.m1.1c">F_{\text{vit}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.1.m1.1d">italic_F start_POSTSUBSCRIPT vit end_POSTSUBSCRIPT</annotation></semantics></math> represents input embeddings from ViT attention block, <span class="ltx_text ltx_markedasmath" id="S2.SS1.p2.6.1">LN</span> represents layer normalization, <math alttext="\text{DWConv}_{3\times 3}" class="ltx_Math" display="inline" id="S2.SS1.p2.3.m3.1"><semantics id="S2.SS1.p2.3.m3.1a"><msub id="S2.SS1.p2.3.m3.1.1" xref="S2.SS1.p2.3.m3.1.1.cmml"><mtext id="S2.SS1.p2.3.m3.1.1.2" xref="S2.SS1.p2.3.m3.1.1.2a.cmml">DWConv</mtext><mrow id="S2.SS1.p2.3.m3.1.1.3" xref="S2.SS1.p2.3.m3.1.1.3.cmml"><mn id="S2.SS1.p2.3.m3.1.1.3.2" xref="S2.SS1.p2.3.m3.1.1.3.2.cmml">3</mn><mo id="S2.SS1.p2.3.m3.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="S2.SS1.p2.3.m3.1.1.3.1.cmml">×</mo><mn id="S2.SS1.p2.3.m3.1.1.3.3" xref="S2.SS1.p2.3.m3.1.1.3.3.cmml">3</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.3.m3.1b"><apply id="S2.SS1.p2.3.m3.1.1.cmml" xref="S2.SS1.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.3.m3.1.1.1.cmml" xref="S2.SS1.p2.3.m3.1.1">subscript</csymbol><ci id="S2.SS1.p2.3.m3.1.1.2a.cmml" xref="S2.SS1.p2.3.m3.1.1.2"><mtext id="S2.SS1.p2.3.m3.1.1.2.cmml" xref="S2.SS1.p2.3.m3.1.1.2">DWConv</mtext></ci><apply id="S2.SS1.p2.3.m3.1.1.3.cmml" xref="S2.SS1.p2.3.m3.1.1.3"><times id="S2.SS1.p2.3.m3.1.1.3.1.cmml" xref="S2.SS1.p2.3.m3.1.1.3.1"></times><cn id="S2.SS1.p2.3.m3.1.1.3.2.cmml" type="integer" xref="S2.SS1.p2.3.m3.1.1.3.2">3</cn><cn id="S2.SS1.p2.3.m3.1.1.3.3.cmml" type="integer" xref="S2.SS1.p2.3.m3.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.3.m3.1c">\text{DWConv}_{3\times 3}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.3.m3.1d">DWConv start_POSTSUBSCRIPT 3 × 3 end_POSTSUBSCRIPT</annotation></semantics></math> denotes depth-wise <math alttext="3\times 3" class="ltx_Math" display="inline" id="S2.SS1.p2.4.m4.1"><semantics id="S2.SS1.p2.4.m4.1a"><mrow id="S2.SS1.p2.4.m4.1.1" xref="S2.SS1.p2.4.m4.1.1.cmml"><mn id="S2.SS1.p2.4.m4.1.1.2" xref="S2.SS1.p2.4.m4.1.1.2.cmml">3</mn><mo id="S2.SS1.p2.4.m4.1.1.1" lspace="0.222em" rspace="0.222em" xref="S2.SS1.p2.4.m4.1.1.1.cmml">×</mo><mn id="S2.SS1.p2.4.m4.1.1.3" xref="S2.SS1.p2.4.m4.1.1.3.cmml">3</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.4.m4.1b"><apply id="S2.SS1.p2.4.m4.1.1.cmml" xref="S2.SS1.p2.4.m4.1.1"><times id="S2.SS1.p2.4.m4.1.1.1.cmml" xref="S2.SS1.p2.4.m4.1.1.1"></times><cn id="S2.SS1.p2.4.m4.1.1.2.cmml" type="integer" xref="S2.SS1.p2.4.m4.1.1.2">3</cn><cn id="S2.SS1.p2.4.m4.1.1.3.cmml" type="integer" xref="S2.SS1.p2.4.m4.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.4.m4.1c">3\times 3</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.4.m4.1d">3 × 3</annotation></semantics></math> convolution, <span class="ltx_text ltx_markedasmath" id="S2.SS1.p2.6.2">SE</span> refers to the squeeze and excitation block <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib15" title="">15</a>]</cite>, and <math alttext="\text{Conv}_{1\times 1}" class="ltx_Math" display="inline" id="S2.SS1.p2.6.m6.1"><semantics id="S2.SS1.p2.6.m6.1a"><msub id="S2.SS1.p2.6.m6.1.1" xref="S2.SS1.p2.6.m6.1.1.cmml"><mtext id="S2.SS1.p2.6.m6.1.1.2" xref="S2.SS1.p2.6.m6.1.1.2a.cmml">Conv</mtext><mrow id="S2.SS1.p2.6.m6.1.1.3" xref="S2.SS1.p2.6.m6.1.1.3.cmml"><mn id="S2.SS1.p2.6.m6.1.1.3.2" xref="S2.SS1.p2.6.m6.1.1.3.2.cmml">1</mn><mo id="S2.SS1.p2.6.m6.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="S2.SS1.p2.6.m6.1.1.3.1.cmml">×</mo><mn id="S2.SS1.p2.6.m6.1.1.3.3" xref="S2.SS1.p2.6.m6.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.6.m6.1b"><apply id="S2.SS1.p2.6.m6.1.1.cmml" xref="S2.SS1.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.6.m6.1.1.1.cmml" xref="S2.SS1.p2.6.m6.1.1">subscript</csymbol><ci id="S2.SS1.p2.6.m6.1.1.2a.cmml" xref="S2.SS1.p2.6.m6.1.1.2"><mtext id="S2.SS1.p2.6.m6.1.1.2.cmml" xref="S2.SS1.p2.6.m6.1.1.2">Conv</mtext></ci><apply id="S2.SS1.p2.6.m6.1.1.3.cmml" xref="S2.SS1.p2.6.m6.1.1.3"><times id="S2.SS1.p2.6.m6.1.1.3.1.cmml" xref="S2.SS1.p2.6.m6.1.1.3.1"></times><cn id="S2.SS1.p2.6.m6.1.1.3.2.cmml" type="integer" xref="S2.SS1.p2.6.m6.1.1.3.2">1</cn><cn id="S2.SS1.p2.6.m6.1.1.3.3.cmml" type="integer" xref="S2.SS1.p2.6.m6.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.6.m6.1c">\text{Conv}_{1\times 1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.6.m6.1d">Conv start_POSTSUBSCRIPT 1 × 1 end_POSTSUBSCRIPT</annotation></semantics></math> is the point-wise convolution. The channel attention block is a simple and efficient operation, which does not introduce much computational cost for ViT encoder.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Convolution Branch</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.2">The original ViT employs the patch embeddings to downsample the input image <math alttext="16" class="ltx_Math" display="inline" id="S2.SS2.p1.1.m1.1"><semantics id="S2.SS2.p1.1.m1.1a"><mn id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml">16</mn><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b"><cn id="S2.SS2.p1.1.m1.1.1.cmml" type="integer" xref="S2.SS2.p1.1.m1.1.1">16</cn></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">16</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.1.m1.1d">16</annotation></semantics></math> times and then extracts deep features. We argue that the downsampling is not good to keep locality inductive bias. To incorporate more local details for accurate segmentation, we introduce a convolution branch that employs light-weight convolution blocks to directly extract shallow features from resized image <math alttext="I_{conv}" class="ltx_Math" display="inline" id="S2.SS2.p1.2.m2.1"><semantics id="S2.SS2.p1.2.m2.1a"><msub id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml"><mi id="S2.SS2.p1.2.m2.1.1.2" xref="S2.SS2.p1.2.m2.1.1.2.cmml">I</mi><mrow id="S2.SS2.p1.2.m2.1.1.3" xref="S2.SS2.p1.2.m2.1.1.3.cmml"><mi id="S2.SS2.p1.2.m2.1.1.3.2" xref="S2.SS2.p1.2.m2.1.1.3.2.cmml">c</mi><mo id="S2.SS2.p1.2.m2.1.1.3.1" xref="S2.SS2.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S2.SS2.p1.2.m2.1.1.3.3" xref="S2.SS2.p1.2.m2.1.1.3.3.cmml">o</mi><mo id="S2.SS2.p1.2.m2.1.1.3.1a" xref="S2.SS2.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S2.SS2.p1.2.m2.1.1.3.4" xref="S2.SS2.p1.2.m2.1.1.3.4.cmml">n</mi><mo id="S2.SS2.p1.2.m2.1.1.3.1b" xref="S2.SS2.p1.2.m2.1.1.3.1.cmml">⁢</mo><mi id="S2.SS2.p1.2.m2.1.1.3.5" xref="S2.SS2.p1.2.m2.1.1.3.5.cmml">v</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.1b"><apply id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.p1.2.m2.1.1.2">𝐼</ci><apply id="S2.SS2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.p1.2.m2.1.1.3"><times id="S2.SS2.p1.2.m2.1.1.3.1.cmml" xref="S2.SS2.p1.2.m2.1.1.3.1"></times><ci id="S2.SS2.p1.2.m2.1.1.3.2.cmml" xref="S2.SS2.p1.2.m2.1.1.3.2">𝑐</ci><ci id="S2.SS2.p1.2.m2.1.1.3.3.cmml" xref="S2.SS2.p1.2.m2.1.1.3.3">𝑜</ci><ci id="S2.SS2.p1.2.m2.1.1.3.4.cmml" xref="S2.SS2.p1.2.m2.1.1.3.4">𝑛</ci><ci id="S2.SS2.p1.2.m2.1.1.3.5.cmml" xref="S2.SS2.p1.2.m2.1.1.3.5">𝑣</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.1c">I_{conv}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.2.m2.1d">italic_I start_POSTSUBSCRIPT italic_c italic_o italic_n italic_v end_POSTSUBSCRIPT</annotation></semantics></math>. In addition, we introduce a bilateral cross attention block to fuse deep features from ViT branch and shallow features from convolution branch,</p>
</div>
<div class="ltx_para" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.7">As in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.F1" title="Figure 1 ‣ 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">1</span></a>, we first feed the resized image <math alttext="I_{conv}" class="ltx_Math" display="inline" id="S2.SS2.p2.1.m1.1"><semantics id="S2.SS2.p2.1.m1.1a"><msub id="S2.SS2.p2.1.m1.1.1" xref="S2.SS2.p2.1.m1.1.1.cmml"><mi id="S2.SS2.p2.1.m1.1.1.2" xref="S2.SS2.p2.1.m1.1.1.2.cmml">I</mi><mrow id="S2.SS2.p2.1.m1.1.1.3" xref="S2.SS2.p2.1.m1.1.1.3.cmml"><mi id="S2.SS2.p2.1.m1.1.1.3.2" xref="S2.SS2.p2.1.m1.1.1.3.2.cmml">c</mi><mo id="S2.SS2.p2.1.m1.1.1.3.1" xref="S2.SS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S2.SS2.p2.1.m1.1.1.3.3" xref="S2.SS2.p2.1.m1.1.1.3.3.cmml">o</mi><mo id="S2.SS2.p2.1.m1.1.1.3.1a" xref="S2.SS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S2.SS2.p2.1.m1.1.1.3.4" xref="S2.SS2.p2.1.m1.1.1.3.4.cmml">n</mi><mo id="S2.SS2.p2.1.m1.1.1.3.1b" xref="S2.SS2.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S2.SS2.p2.1.m1.1.1.3.5" xref="S2.SS2.p2.1.m1.1.1.3.5.cmml">v</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.1.m1.1b"><apply id="S2.SS2.p2.1.m1.1.1.cmml" xref="S2.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.1.m1.1.1.1.cmml" xref="S2.SS2.p2.1.m1.1.1">subscript</csymbol><ci id="S2.SS2.p2.1.m1.1.1.2.cmml" xref="S2.SS2.p2.1.m1.1.1.2">𝐼</ci><apply id="S2.SS2.p2.1.m1.1.1.3.cmml" xref="S2.SS2.p2.1.m1.1.1.3"><times id="S2.SS2.p2.1.m1.1.1.3.1.cmml" xref="S2.SS2.p2.1.m1.1.1.3.1"></times><ci id="S2.SS2.p2.1.m1.1.1.3.2.cmml" xref="S2.SS2.p2.1.m1.1.1.3.2">𝑐</ci><ci id="S2.SS2.p2.1.m1.1.1.3.3.cmml" xref="S2.SS2.p2.1.m1.1.1.3.3">𝑜</ci><ci id="S2.SS2.p2.1.m1.1.1.3.4.cmml" xref="S2.SS2.p2.1.m1.1.1.3.4">𝑛</ci><ci id="S2.SS2.p2.1.m1.1.1.3.5.cmml" xref="S2.SS2.p2.1.m1.1.1.3.5">𝑣</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.1.m1.1c">I_{conv}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.1.m1.1d">italic_I start_POSTSUBSCRIPT italic_c italic_o italic_n italic_v end_POSTSUBSCRIPT</annotation></semantics></math> to the light-weight convolution block to extract shallow features <math alttext="F_{s}" class="ltx_Math" display="inline" id="S2.SS2.p2.2.m2.1"><semantics id="S2.SS2.p2.2.m2.1a"><msub id="S2.SS2.p2.2.m2.1.1" xref="S2.SS2.p2.2.m2.1.1.cmml"><mi id="S2.SS2.p2.2.m2.1.1.2" xref="S2.SS2.p2.2.m2.1.1.2.cmml">F</mi><mi id="S2.SS2.p2.2.m2.1.1.3" xref="S2.SS2.p2.2.m2.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.2.m2.1b"><apply id="S2.SS2.p2.2.m2.1.1.cmml" xref="S2.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.2.m2.1.1.1.cmml" xref="S2.SS2.p2.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.p2.2.m2.1.1.2.cmml" xref="S2.SS2.p2.2.m2.1.1.2">𝐹</ci><ci id="S2.SS2.p2.2.m2.1.1.3.cmml" xref="S2.SS2.p2.2.m2.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.2.m2.1c">F_{s}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.2.m2.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math>. Afterwards, we employ the bilateral cross attention block to perform feature fusion. The generated features for two branches are represented as shallow features <math alttext="F_{s}^{1}" class="ltx_Math" display="inline" id="S2.SS2.p2.3.m3.1"><semantics id="S2.SS2.p2.3.m3.1a"><msubsup id="S2.SS2.p2.3.m3.1.1" xref="S2.SS2.p2.3.m3.1.1.cmml"><mi id="S2.SS2.p2.3.m3.1.1.2.2" xref="S2.SS2.p2.3.m3.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p2.3.m3.1.1.2.3" xref="S2.SS2.p2.3.m3.1.1.2.3.cmml">s</mi><mn id="S2.SS2.p2.3.m3.1.1.3" xref="S2.SS2.p2.3.m3.1.1.3.cmml">1</mn></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.3.m3.1b"><apply id="S2.SS2.p2.3.m3.1.1.cmml" xref="S2.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.3.m3.1.1.1.cmml" xref="S2.SS2.p2.3.m3.1.1">superscript</csymbol><apply id="S2.SS2.p2.3.m3.1.1.2.cmml" xref="S2.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.3.m3.1.1.2.1.cmml" xref="S2.SS2.p2.3.m3.1.1">subscript</csymbol><ci id="S2.SS2.p2.3.m3.1.1.2.2.cmml" xref="S2.SS2.p2.3.m3.1.1.2.2">𝐹</ci><ci id="S2.SS2.p2.3.m3.1.1.2.3.cmml" xref="S2.SS2.p2.3.m3.1.1.2.3">𝑠</ci></apply><cn id="S2.SS2.p2.3.m3.1.1.3.cmml" type="integer" xref="S2.SS2.p2.3.m3.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.3.m3.1c">F_{s}^{1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.3.m3.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT</annotation></semantics></math> and deep features <math alttext="F_{d}^{1}" class="ltx_Math" display="inline" id="S2.SS2.p2.4.m4.1"><semantics id="S2.SS2.p2.4.m4.1a"><msubsup id="S2.SS2.p2.4.m4.1.1" xref="S2.SS2.p2.4.m4.1.1.cmml"><mi id="S2.SS2.p2.4.m4.1.1.2.2" xref="S2.SS2.p2.4.m4.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p2.4.m4.1.1.2.3" xref="S2.SS2.p2.4.m4.1.1.2.3.cmml">d</mi><mn id="S2.SS2.p2.4.m4.1.1.3" xref="S2.SS2.p2.4.m4.1.1.3.cmml">1</mn></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.4.m4.1b"><apply id="S2.SS2.p2.4.m4.1.1.cmml" xref="S2.SS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.4.m4.1.1.1.cmml" xref="S2.SS2.p2.4.m4.1.1">superscript</csymbol><apply id="S2.SS2.p2.4.m4.1.1.2.cmml" xref="S2.SS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.4.m4.1.1.2.1.cmml" xref="S2.SS2.p2.4.m4.1.1">subscript</csymbol><ci id="S2.SS2.p2.4.m4.1.1.2.2.cmml" xref="S2.SS2.p2.4.m4.1.1.2.2">𝐹</ci><ci id="S2.SS2.p2.4.m4.1.1.2.3.cmml" xref="S2.SS2.p2.4.m4.1.1.2.3">𝑑</ci></apply><cn id="S2.SS2.p2.4.m4.1.1.3.cmml" type="integer" xref="S2.SS2.p2.4.m4.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.4.m4.1c">F_{d}^{1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.4.m4.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT</annotation></semantics></math>. Then we feed the features <math alttext="F_{d}^{1}" class="ltx_Math" display="inline" id="S2.SS2.p2.5.m5.1"><semantics id="S2.SS2.p2.5.m5.1a"><msubsup id="S2.SS2.p2.5.m5.1.1" xref="S2.SS2.p2.5.m5.1.1.cmml"><mi id="S2.SS2.p2.5.m5.1.1.2.2" xref="S2.SS2.p2.5.m5.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p2.5.m5.1.1.2.3" xref="S2.SS2.p2.5.m5.1.1.2.3.cmml">d</mi><mn id="S2.SS2.p2.5.m5.1.1.3" xref="S2.SS2.p2.5.m5.1.1.3.cmml">1</mn></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.5.m5.1b"><apply id="S2.SS2.p2.5.m5.1.1.cmml" xref="S2.SS2.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.5.m5.1.1.1.cmml" xref="S2.SS2.p2.5.m5.1.1">superscript</csymbol><apply id="S2.SS2.p2.5.m5.1.1.2.cmml" xref="S2.SS2.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.5.m5.1.1.2.1.cmml" xref="S2.SS2.p2.5.m5.1.1">subscript</csymbol><ci id="S2.SS2.p2.5.m5.1.1.2.2.cmml" xref="S2.SS2.p2.5.m5.1.1.2.2">𝐹</ci><ci id="S2.SS2.p2.5.m5.1.1.2.3.cmml" xref="S2.SS2.p2.5.m5.1.1.2.3">𝑑</ci></apply><cn id="S2.SS2.p2.5.m5.1.1.3.cmml" type="integer" xref="S2.SS2.p2.5.m5.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.5.m5.1c">F_{d}^{1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.5.m5.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT</annotation></semantics></math> to next self-attention blocks in the ViT branch. Similarly, we perform feature fusion of output features of each block. The final features for two branches are represented as <math alttext="F_{s}^{o}" class="ltx_Math" display="inline" id="S2.SS2.p2.6.m6.1"><semantics id="S2.SS2.p2.6.m6.1a"><msubsup id="S2.SS2.p2.6.m6.1.1" xref="S2.SS2.p2.6.m6.1.1.cmml"><mi id="S2.SS2.p2.6.m6.1.1.2.2" xref="S2.SS2.p2.6.m6.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p2.6.m6.1.1.2.3" xref="S2.SS2.p2.6.m6.1.1.2.3.cmml">s</mi><mi id="S2.SS2.p2.6.m6.1.1.3" xref="S2.SS2.p2.6.m6.1.1.3.cmml">o</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.6.m6.1b"><apply id="S2.SS2.p2.6.m6.1.1.cmml" xref="S2.SS2.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.6.m6.1.1.1.cmml" xref="S2.SS2.p2.6.m6.1.1">superscript</csymbol><apply id="S2.SS2.p2.6.m6.1.1.2.cmml" xref="S2.SS2.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.6.m6.1.1.2.1.cmml" xref="S2.SS2.p2.6.m6.1.1">subscript</csymbol><ci id="S2.SS2.p2.6.m6.1.1.2.2.cmml" xref="S2.SS2.p2.6.m6.1.1.2.2">𝐹</ci><ci id="S2.SS2.p2.6.m6.1.1.2.3.cmml" xref="S2.SS2.p2.6.m6.1.1.2.3">𝑠</ci></apply><ci id="S2.SS2.p2.6.m6.1.1.3.cmml" xref="S2.SS2.p2.6.m6.1.1.3">𝑜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.6.m6.1c">F_{s}^{o}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.6.m6.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_o end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="F_{d}^{o}" class="ltx_Math" display="inline" id="S2.SS2.p2.7.m7.1"><semantics id="S2.SS2.p2.7.m7.1a"><msubsup id="S2.SS2.p2.7.m7.1.1" xref="S2.SS2.p2.7.m7.1.1.cmml"><mi id="S2.SS2.p2.7.m7.1.1.2.2" xref="S2.SS2.p2.7.m7.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p2.7.m7.1.1.2.3" xref="S2.SS2.p2.7.m7.1.1.2.3.cmml">d</mi><mi id="S2.SS2.p2.7.m7.1.1.3" xref="S2.SS2.p2.7.m7.1.1.3.cmml">o</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p2.7.m7.1b"><apply id="S2.SS2.p2.7.m7.1.1.cmml" xref="S2.SS2.p2.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.7.m7.1.1.1.cmml" xref="S2.SS2.p2.7.m7.1.1">superscript</csymbol><apply id="S2.SS2.p2.7.m7.1.1.2.cmml" xref="S2.SS2.p2.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.p2.7.m7.1.1.2.1.cmml" xref="S2.SS2.p2.7.m7.1.1">subscript</csymbol><ci id="S2.SS2.p2.7.m7.1.1.2.2.cmml" xref="S2.SS2.p2.7.m7.1.1.2.2">𝐹</ci><ci id="S2.SS2.p2.7.m7.1.1.2.3.cmml" xref="S2.SS2.p2.7.m7.1.1.2.3">𝑑</ci></apply><ci id="S2.SS2.p2.7.m7.1.1.3.cmml" xref="S2.SS2.p2.7.m7.1.1.3">𝑜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p2.7.m7.1c">F_{d}^{o}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p2.7.m7.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_o end_POSTSUPERSCRIPT</annotation></semantics></math>. We introduce the light-weight convolution block and bilateral cross attention block in details as follow.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p3">
<p class="ltx_p" id="S2.SS2.p3.2"><span class="ltx_text ltx_font_bold" id="S2.SS2.p3.2.1">Light-weight convolution block:</span> Our light-weight convolution block consists of two <math alttext="3\times 3" class="ltx_Math" display="inline" id="S2.SS2.p3.1.m1.1"><semantics id="S2.SS2.p3.1.m1.1a"><mrow id="S2.SS2.p3.1.m1.1.1" xref="S2.SS2.p3.1.m1.1.1.cmml"><mn id="S2.SS2.p3.1.m1.1.1.2" xref="S2.SS2.p3.1.m1.1.1.2.cmml">3</mn><mo id="S2.SS2.p3.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="S2.SS2.p3.1.m1.1.1.1.cmml">×</mo><mn id="S2.SS2.p3.1.m1.1.1.3" xref="S2.SS2.p3.1.m1.1.1.3.cmml">3</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.1.m1.1b"><apply id="S2.SS2.p3.1.m1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1"><times id="S2.SS2.p3.1.m1.1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1.1"></times><cn id="S2.SS2.p3.1.m1.1.1.2.cmml" type="integer" xref="S2.SS2.p3.1.m1.1.1.2">3</cn><cn id="S2.SS2.p3.1.m1.1.1.3.cmml" type="integer" xref="S2.SS2.p3.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.1.m1.1c">3\times 3</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.1.m1.1d">3 × 3</annotation></semantics></math> and three <math alttext="1\times 1" class="ltx_Math" display="inline" id="S2.SS2.p3.2.m2.1"><semantics id="S2.SS2.p3.2.m2.1a"><mrow id="S2.SS2.p3.2.m2.1.1" xref="S2.SS2.p3.2.m2.1.1.cmml"><mn id="S2.SS2.p3.2.m2.1.1.2" xref="S2.SS2.p3.2.m2.1.1.2.cmml">1</mn><mo id="S2.SS2.p3.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S2.SS2.p3.2.m2.1.1.1.cmml">×</mo><mn id="S2.SS2.p3.2.m2.1.1.3" xref="S2.SS2.p3.2.m2.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.2.m2.1b"><apply id="S2.SS2.p3.2.m2.1.1.cmml" xref="S2.SS2.p3.2.m2.1.1"><times id="S2.SS2.p3.2.m2.1.1.1.cmml" xref="S2.SS2.p3.2.m2.1.1.1"></times><cn id="S2.SS2.p3.2.m2.1.1.2.cmml" type="integer" xref="S2.SS2.p3.2.m2.1.1.2">1</cn><cn id="S2.SS2.p3.2.m2.1.1.3.cmml" type="integer" xref="S2.SS2.p3.2.m2.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.2.m2.1c">1\times 1</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.2.m2.1d">1 × 1</annotation></semantics></math> convolutional layers. We add a batch normalization layer and a ReLU layer after convolutional layer at the first four layers.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p4">
<p class="ltx_p" id="S2.SS2.p4.10"><span class="ltx_text ltx_font_bold" id="S2.SS2.p4.10.1">Bilateral cross attention block:</span> Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.F1" title="Figure 1 ‣ 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">1</span></a>(c) shows the structure of bilateral cross attention block that aims to perform cross-branch feature fusion. Assuming that the deep feature is <math alttext="F_{d}" class="ltx_Math" display="inline" id="S2.SS2.p4.1.m1.1"><semantics id="S2.SS2.p4.1.m1.1a"><msub id="S2.SS2.p4.1.m1.1.1" xref="S2.SS2.p4.1.m1.1.1.cmml"><mi id="S2.SS2.p4.1.m1.1.1.2" xref="S2.SS2.p4.1.m1.1.1.2.cmml">F</mi><mi id="S2.SS2.p4.1.m1.1.1.3" xref="S2.SS2.p4.1.m1.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.1.m1.1b"><apply id="S2.SS2.p4.1.m1.1.1.cmml" xref="S2.SS2.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.1.m1.1.1.1.cmml" xref="S2.SS2.p4.1.m1.1.1">subscript</csymbol><ci id="S2.SS2.p4.1.m1.1.1.2.cmml" xref="S2.SS2.p4.1.m1.1.1.2">𝐹</ci><ci id="S2.SS2.p4.1.m1.1.1.3.cmml" xref="S2.SS2.p4.1.m1.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.1.m1.1c">F_{d}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.1.m1.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> and the shallow feature is <math alttext="F_{s}" class="ltx_Math" display="inline" id="S2.SS2.p4.2.m2.1"><semantics id="S2.SS2.p4.2.m2.1a"><msub id="S2.SS2.p4.2.m2.1.1" xref="S2.SS2.p4.2.m2.1.1.cmml"><mi id="S2.SS2.p4.2.m2.1.1.2" xref="S2.SS2.p4.2.m2.1.1.2.cmml">F</mi><mi id="S2.SS2.p4.2.m2.1.1.3" xref="S2.SS2.p4.2.m2.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.2.m2.1b"><apply id="S2.SS2.p4.2.m2.1.1.cmml" xref="S2.SS2.p4.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.2.m2.1.1.1.cmml" xref="S2.SS2.p4.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.p4.2.m2.1.1.2.cmml" xref="S2.SS2.p4.2.m2.1.1.2">𝐹</ci><ci id="S2.SS2.p4.2.m2.1.1.3.cmml" xref="S2.SS2.p4.2.m2.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.2.m2.1c">F_{s}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.2.m2.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math>, we employ deformable attention <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib33" title="">33</a>]</cite> to fuse them as in <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib10" title="">10</a>]</cite>. For the ViT branch, we treat deep feature <math alttext="F_{d}" class="ltx_Math" display="inline" id="S2.SS2.p4.3.m3.1"><semantics id="S2.SS2.p4.3.m3.1a"><msub id="S2.SS2.p4.3.m3.1.1" xref="S2.SS2.p4.3.m3.1.1.cmml"><mi id="S2.SS2.p4.3.m3.1.1.2" xref="S2.SS2.p4.3.m3.1.1.2.cmml">F</mi><mi id="S2.SS2.p4.3.m3.1.1.3" xref="S2.SS2.p4.3.m3.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.3.m3.1b"><apply id="S2.SS2.p4.3.m3.1.1.cmml" xref="S2.SS2.p4.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.3.m3.1.1.1.cmml" xref="S2.SS2.p4.3.m3.1.1">subscript</csymbol><ci id="S2.SS2.p4.3.m3.1.1.2.cmml" xref="S2.SS2.p4.3.m3.1.1.2">𝐹</ci><ci id="S2.SS2.p4.3.m3.1.1.3.cmml" xref="S2.SS2.p4.3.m3.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.3.m3.1c">F_{d}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.3.m3.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> as query, and treat shallow feature <math alttext="F_{s}" class="ltx_Math" display="inline" id="S2.SS2.p4.4.m4.1"><semantics id="S2.SS2.p4.4.m4.1a"><msub id="S2.SS2.p4.4.m4.1.1" xref="S2.SS2.p4.4.m4.1.1.cmml"><mi id="S2.SS2.p4.4.m4.1.1.2" xref="S2.SS2.p4.4.m4.1.1.2.cmml">F</mi><mi id="S2.SS2.p4.4.m4.1.1.3" xref="S2.SS2.p4.4.m4.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.4.m4.1b"><apply id="S2.SS2.p4.4.m4.1.1.cmml" xref="S2.SS2.p4.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.4.m4.1.1.1.cmml" xref="S2.SS2.p4.4.m4.1.1">subscript</csymbol><ci id="S2.SS2.p4.4.m4.1.1.2.cmml" xref="S2.SS2.p4.4.m4.1.1.2">𝐹</ci><ci id="S2.SS2.p4.4.m4.1.1.3.cmml" xref="S2.SS2.p4.4.m4.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.4.m4.1c">F_{s}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.4.m4.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math> as key and value. For the convolution branch, we treat shallow feature <math alttext="F_{s}" class="ltx_Math" display="inline" id="S2.SS2.p4.5.m5.1"><semantics id="S2.SS2.p4.5.m5.1a"><msub id="S2.SS2.p4.5.m5.1.1" xref="S2.SS2.p4.5.m5.1.1.cmml"><mi id="S2.SS2.p4.5.m5.1.1.2" xref="S2.SS2.p4.5.m5.1.1.2.cmml">F</mi><mi id="S2.SS2.p4.5.m5.1.1.3" xref="S2.SS2.p4.5.m5.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.5.m5.1b"><apply id="S2.SS2.p4.5.m5.1.1.cmml" xref="S2.SS2.p4.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.5.m5.1.1.1.cmml" xref="S2.SS2.p4.5.m5.1.1">subscript</csymbol><ci id="S2.SS2.p4.5.m5.1.1.2.cmml" xref="S2.SS2.p4.5.m5.1.1.2">𝐹</ci><ci id="S2.SS2.p4.5.m5.1.1.3.cmml" xref="S2.SS2.p4.5.m5.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.5.m5.1c">F_{s}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.5.m5.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math> as query, and treat deep feature <math alttext="F_{d}" class="ltx_Math" display="inline" id="S2.SS2.p4.6.m6.1"><semantics id="S2.SS2.p4.6.m6.1a"><msub id="S2.SS2.p4.6.m6.1.1" xref="S2.SS2.p4.6.m6.1.1.cmml"><mi id="S2.SS2.p4.6.m6.1.1.2" xref="S2.SS2.p4.6.m6.1.1.2.cmml">F</mi><mi id="S2.SS2.p4.6.m6.1.1.3" xref="S2.SS2.p4.6.m6.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.6.m6.1b"><apply id="S2.SS2.p4.6.m6.1.1.cmml" xref="S2.SS2.p4.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.6.m6.1.1.1.cmml" xref="S2.SS2.p4.6.m6.1.1">subscript</csymbol><ci id="S2.SS2.p4.6.m6.1.1.2.cmml" xref="S2.SS2.p4.6.m6.1.1.2">𝐹</ci><ci id="S2.SS2.p4.6.m6.1.1.3.cmml" xref="S2.SS2.p4.6.m6.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.6.m6.1c">F_{d}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.6.m6.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> as key and value. The features generated by deformable attention are respectively represented as <math alttext="F_{d}^{c}" class="ltx_Math" display="inline" id="S2.SS2.p4.7.m7.1"><semantics id="S2.SS2.p4.7.m7.1a"><msubsup id="S2.SS2.p4.7.m7.1.1" xref="S2.SS2.p4.7.m7.1.1.cmml"><mi id="S2.SS2.p4.7.m7.1.1.2.2" xref="S2.SS2.p4.7.m7.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p4.7.m7.1.1.2.3" xref="S2.SS2.p4.7.m7.1.1.2.3.cmml">d</mi><mi id="S2.SS2.p4.7.m7.1.1.3" xref="S2.SS2.p4.7.m7.1.1.3.cmml">c</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.7.m7.1b"><apply id="S2.SS2.p4.7.m7.1.1.cmml" xref="S2.SS2.p4.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.7.m7.1.1.1.cmml" xref="S2.SS2.p4.7.m7.1.1">superscript</csymbol><apply id="S2.SS2.p4.7.m7.1.1.2.cmml" xref="S2.SS2.p4.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.7.m7.1.1.2.1.cmml" xref="S2.SS2.p4.7.m7.1.1">subscript</csymbol><ci id="S2.SS2.p4.7.m7.1.1.2.2.cmml" xref="S2.SS2.p4.7.m7.1.1.2.2">𝐹</ci><ci id="S2.SS2.p4.7.m7.1.1.2.3.cmml" xref="S2.SS2.p4.7.m7.1.1.2.3">𝑑</ci></apply><ci id="S2.SS2.p4.7.m7.1.1.3.cmml" xref="S2.SS2.p4.7.m7.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.7.m7.1c">F_{d}^{c}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.7.m7.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_c end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="F_{s}^{c}" class="ltx_Math" display="inline" id="S2.SS2.p4.8.m8.1"><semantics id="S2.SS2.p4.8.m8.1a"><msubsup id="S2.SS2.p4.8.m8.1.1" xref="S2.SS2.p4.8.m8.1.1.cmml"><mi id="S2.SS2.p4.8.m8.1.1.2.2" xref="S2.SS2.p4.8.m8.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p4.8.m8.1.1.2.3" xref="S2.SS2.p4.8.m8.1.1.2.3.cmml">s</mi><mi id="S2.SS2.p4.8.m8.1.1.3" xref="S2.SS2.p4.8.m8.1.1.3.cmml">c</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.8.m8.1b"><apply id="S2.SS2.p4.8.m8.1.1.cmml" xref="S2.SS2.p4.8.m8.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.8.m8.1.1.1.cmml" xref="S2.SS2.p4.8.m8.1.1">superscript</csymbol><apply id="S2.SS2.p4.8.m8.1.1.2.cmml" xref="S2.SS2.p4.8.m8.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.8.m8.1.1.2.1.cmml" xref="S2.SS2.p4.8.m8.1.1">subscript</csymbol><ci id="S2.SS2.p4.8.m8.1.1.2.2.cmml" xref="S2.SS2.p4.8.m8.1.1.2.2">𝐹</ci><ci id="S2.SS2.p4.8.m8.1.1.2.3.cmml" xref="S2.SS2.p4.8.m8.1.1.2.3">𝑠</ci></apply><ci id="S2.SS2.p4.8.m8.1.1.3.cmml" xref="S2.SS2.p4.8.m8.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.8.m8.1c">F_{s}^{c}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.8.m8.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_c end_POSTSUPERSCRIPT</annotation></semantics></math>, which are fed to a layer normalization layer and a feed-forward layer to generate the output features <math alttext="F_{d}^{1}" class="ltx_Math" display="inline" id="S2.SS2.p4.9.m9.1"><semantics id="S2.SS2.p4.9.m9.1a"><msubsup id="S2.SS2.p4.9.m9.1.1" xref="S2.SS2.p4.9.m9.1.1.cmml"><mi id="S2.SS2.p4.9.m9.1.1.2.2" xref="S2.SS2.p4.9.m9.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p4.9.m9.1.1.2.3" xref="S2.SS2.p4.9.m9.1.1.2.3.cmml">d</mi><mn id="S2.SS2.p4.9.m9.1.1.3" xref="S2.SS2.p4.9.m9.1.1.3.cmml">1</mn></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.9.m9.1b"><apply id="S2.SS2.p4.9.m9.1.1.cmml" xref="S2.SS2.p4.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.9.m9.1.1.1.cmml" xref="S2.SS2.p4.9.m9.1.1">superscript</csymbol><apply id="S2.SS2.p4.9.m9.1.1.2.cmml" xref="S2.SS2.p4.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.9.m9.1.1.2.1.cmml" xref="S2.SS2.p4.9.m9.1.1">subscript</csymbol><ci id="S2.SS2.p4.9.m9.1.1.2.2.cmml" xref="S2.SS2.p4.9.m9.1.1.2.2">𝐹</ci><ci id="S2.SS2.p4.9.m9.1.1.2.3.cmml" xref="S2.SS2.p4.9.m9.1.1.2.3">𝑑</ci></apply><cn id="S2.SS2.p4.9.m9.1.1.3.cmml" type="integer" xref="S2.SS2.p4.9.m9.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.9.m9.1c">F_{d}^{1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.9.m9.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="F_{s}^{1}" class="ltx_Math" display="inline" id="S2.SS2.p4.10.m10.1"><semantics id="S2.SS2.p4.10.m10.1a"><msubsup id="S2.SS2.p4.10.m10.1.1" xref="S2.SS2.p4.10.m10.1.1.cmml"><mi id="S2.SS2.p4.10.m10.1.1.2.2" xref="S2.SS2.p4.10.m10.1.1.2.2.cmml">F</mi><mi id="S2.SS2.p4.10.m10.1.1.2.3" xref="S2.SS2.p4.10.m10.1.1.2.3.cmml">s</mi><mn id="S2.SS2.p4.10.m10.1.1.3" xref="S2.SS2.p4.10.m10.1.1.3.cmml">1</mn></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.10.m10.1b"><apply id="S2.SS2.p4.10.m10.1.1.cmml" xref="S2.SS2.p4.10.m10.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.10.m10.1.1.1.cmml" xref="S2.SS2.p4.10.m10.1.1">superscript</csymbol><apply id="S2.SS2.p4.10.m10.1.1.2.cmml" xref="S2.SS2.p4.10.m10.1.1"><csymbol cd="ambiguous" id="S2.SS2.p4.10.m10.1.1.2.1.cmml" xref="S2.SS2.p4.10.m10.1.1">subscript</csymbol><ci id="S2.SS2.p4.10.m10.1.1.2.2.cmml" xref="S2.SS2.p4.10.m10.1.1.2.2">𝐹</ci><ci id="S2.SS2.p4.10.m10.1.1.2.3.cmml" xref="S2.SS2.p4.10.m10.1.1.2.3">𝑠</ci></apply><cn id="S2.SS2.p4.10.m10.1.1.3.cmml" type="integer" xref="S2.SS2.p4.10.m10.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.10.m10.1c">F_{s}^{1}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.10.m10.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT</annotation></semantics></math>. The feed-forward layer contains two MLP layers and a GeLU layer. In addition, we add the residual connection in both deformable attention and feed forward layers.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>ViT-Conv Fusion Block</h3>
<div class="ltx_para" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.5">We design a fusion module with an automatic selective mechanism to integrate the diverse information from ViT branch and convolution branch.
Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.F1" title="Figure 1 ‣ 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">1</span></a>(d) gives the architecture.
The feature from a given branch, denoted as <math alttext="F_{d}" class="ltx_Math" display="inline" id="S2.SS3.p1.1.m1.1"><semantics id="S2.SS3.p1.1.m1.1a"><msub id="S2.SS3.p1.1.m1.1.1" xref="S2.SS3.p1.1.m1.1.1.cmml"><mi id="S2.SS3.p1.1.m1.1.1.2" xref="S2.SS3.p1.1.m1.1.1.2.cmml">F</mi><mi id="S2.SS3.p1.1.m1.1.1.3" xref="S2.SS3.p1.1.m1.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.1b"><apply id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.1.m1.1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS3.p1.1.m1.1.1.2.cmml" xref="S2.SS3.p1.1.m1.1.1.2">𝐹</ci><ci id="S2.SS3.p1.1.m1.1.1.3.cmml" xref="S2.SS3.p1.1.m1.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.1c">F_{d}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.1.m1.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="F_{s}" class="ltx_Math" display="inline" id="S2.SS3.p1.2.m2.1"><semantics id="S2.SS3.p1.2.m2.1a"><msub id="S2.SS3.p1.2.m2.1.1" xref="S2.SS3.p1.2.m2.1.1.cmml"><mi id="S2.SS3.p1.2.m2.1.1.2" xref="S2.SS3.p1.2.m2.1.1.2.cmml">F</mi><mi id="S2.SS3.p1.2.m2.1.1.3" xref="S2.SS3.p1.2.m2.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.2.m2.1b"><apply id="S2.SS3.p1.2.m2.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.2.m2.1.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS3.p1.2.m2.1.1.2.cmml" xref="S2.SS3.p1.2.m2.1.1.2">𝐹</ci><ci id="S2.SS3.p1.2.m2.1.1.3.cmml" xref="S2.SS3.p1.2.m2.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.2.m2.1c">F_{s}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.2.m2.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math>, is initially processed through a channel attention layer. This layer comprises a fully connected squeeze layer, a GELU activation layer, and a fully connected restore layer. This process yields the logits <math alttext="\Lambda_{d}" class="ltx_Math" display="inline" id="S2.SS3.p1.3.m3.1"><semantics id="S2.SS3.p1.3.m3.1a"><msub id="S2.SS3.p1.3.m3.1.1" xref="S2.SS3.p1.3.m3.1.1.cmml"><mi id="S2.SS3.p1.3.m3.1.1.2" mathvariant="normal" xref="S2.SS3.p1.3.m3.1.1.2.cmml">Λ</mi><mi id="S2.SS3.p1.3.m3.1.1.3" xref="S2.SS3.p1.3.m3.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.3.m3.1b"><apply id="S2.SS3.p1.3.m3.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.3.m3.1.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1">subscript</csymbol><ci id="S2.SS3.p1.3.m3.1.1.2.cmml" xref="S2.SS3.p1.3.m3.1.1.2">Λ</ci><ci id="S2.SS3.p1.3.m3.1.1.3.cmml" xref="S2.SS3.p1.3.m3.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.3.m3.1c">\Lambda_{d}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.3.m3.1d">roman_Λ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> or <math alttext="\Lambda_{s}" class="ltx_Math" display="inline" id="S2.SS3.p1.4.m4.1"><semantics id="S2.SS3.p1.4.m4.1a"><msub id="S2.SS3.p1.4.m4.1.1" xref="S2.SS3.p1.4.m4.1.1.cmml"><mi id="S2.SS3.p1.4.m4.1.1.2" mathvariant="normal" xref="S2.SS3.p1.4.m4.1.1.2.cmml">Λ</mi><mi id="S2.SS3.p1.4.m4.1.1.3" xref="S2.SS3.p1.4.m4.1.1.3.cmml">s</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.4.m4.1b"><apply id="S2.SS3.p1.4.m4.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.4.m4.1.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1">subscript</csymbol><ci id="S2.SS3.p1.4.m4.1.1.2.cmml" xref="S2.SS3.p1.4.m4.1.1.2">Λ</ci><ci id="S2.SS3.p1.4.m4.1.1.3.cmml" xref="S2.SS3.p1.4.m4.1.1.3">𝑠</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.4.m4.1c">\Lambda_{s}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.4.m4.1d">roman_Λ start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT</annotation></semantics></math>. The output logits from each branch’s channel attention layer are then combined, leading to the creation of an element-wise selective mask. This mask is derived by applying the sigmoid to the summed features as
<math alttext="\mathcal{M}=\text{Sigmoid}(\Lambda_{d}+\Lambda_{s})" class="ltx_Math" display="inline" id="S2.SS3.p1.5.m5.1"><semantics id="S2.SS3.p1.5.m5.1a"><mrow id="S2.SS3.p1.5.m5.1.1" xref="S2.SS3.p1.5.m5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.5.m5.1.1.3" xref="S2.SS3.p1.5.m5.1.1.3.cmml">ℳ</mi><mo id="S2.SS3.p1.5.m5.1.1.2" xref="S2.SS3.p1.5.m5.1.1.2.cmml">=</mo><mrow id="S2.SS3.p1.5.m5.1.1.1" xref="S2.SS3.p1.5.m5.1.1.1.cmml"><mtext id="S2.SS3.p1.5.m5.1.1.1.3" xref="S2.SS3.p1.5.m5.1.1.1.3a.cmml">Sigmoid</mtext><mo id="S2.SS3.p1.5.m5.1.1.1.2" xref="S2.SS3.p1.5.m5.1.1.1.2.cmml">⁢</mo><mrow id="S2.SS3.p1.5.m5.1.1.1.1.1" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.cmml"><mo id="S2.SS3.p1.5.m5.1.1.1.1.1.2" stretchy="false" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS3.p1.5.m5.1.1.1.1.1.1" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.cmml"><msub id="S2.SS3.p1.5.m5.1.1.1.1.1.1.2" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.cmml"><mi id="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.2" mathvariant="normal" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.2.cmml">Λ</mi><mi id="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.3" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.3.cmml">d</mi></msub><mo id="S2.SS3.p1.5.m5.1.1.1.1.1.1.1" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.1.cmml">+</mo><msub id="S2.SS3.p1.5.m5.1.1.1.1.1.1.3" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.cmml"><mi id="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.2" mathvariant="normal" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.2.cmml">Λ</mi><mi id="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.3" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.3.cmml">s</mi></msub></mrow><mo id="S2.SS3.p1.5.m5.1.1.1.1.1.3" stretchy="false" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.5.m5.1b"><apply id="S2.SS3.p1.5.m5.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1"><eq id="S2.SS3.p1.5.m5.1.1.2.cmml" xref="S2.SS3.p1.5.m5.1.1.2"></eq><ci id="S2.SS3.p1.5.m5.1.1.3.cmml" xref="S2.SS3.p1.5.m5.1.1.3">ℳ</ci><apply id="S2.SS3.p1.5.m5.1.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1.1"><times id="S2.SS3.p1.5.m5.1.1.1.2.cmml" xref="S2.SS3.p1.5.m5.1.1.1.2"></times><ci id="S2.SS3.p1.5.m5.1.1.1.3a.cmml" xref="S2.SS3.p1.5.m5.1.1.1.3"><mtext id="S2.SS3.p1.5.m5.1.1.1.3.cmml" xref="S2.SS3.p1.5.m5.1.1.1.3">Sigmoid</mtext></ci><apply id="S2.SS3.p1.5.m5.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1"><plus id="S2.SS3.p1.5.m5.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.1"></plus><apply id="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.1.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.2.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.2">Λ</ci><ci id="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.3.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.2.3">𝑑</ci></apply><apply id="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.1.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.2.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.2">Λ</ci><ci id="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.3.cmml" xref="S2.SS3.p1.5.m5.1.1.1.1.1.1.3.3">𝑠</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.5.m5.1c">\mathcal{M}=\text{Sigmoid}(\Lambda_{d}+\Lambda_{s})</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.5.m5.1d">caligraphic_M = Sigmoid ( roman_Λ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT + roman_Λ start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT )</annotation></semantics></math>.
The final fusion output, representing an amalgamation of both branches, is computed as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="F_{\text{output}}=F_{d}^{o}\otimes\mathcal{M}+F_{s}^{o}\otimes(1-\mathcal{M})," class="ltx_Math" display="block" id="S2.E2.m1.1"><semantics id="S2.E2.m1.1a"><mrow id="S2.E2.m1.1.1.1" xref="S2.E2.m1.1.1.1.1.cmml"><mrow id="S2.E2.m1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.cmml"><msub id="S2.E2.m1.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.1.1.1.1.3.2" xref="S2.E2.m1.1.1.1.1.3.2.cmml">F</mi><mtext id="S2.E2.m1.1.1.1.1.3.3" xref="S2.E2.m1.1.1.1.1.3.3a.cmml">output</mtext></msub><mo id="S2.E2.m1.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.2.cmml">=</mo><mrow id="S2.E2.m1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.cmml"><mrow id="S2.E2.m1.1.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.3.cmml"><msubsup id="S2.E2.m1.1.1.1.1.1.3.2" xref="S2.E2.m1.1.1.1.1.1.3.2.cmml"><mi id="S2.E2.m1.1.1.1.1.1.3.2.2.2" xref="S2.E2.m1.1.1.1.1.1.3.2.2.2.cmml">F</mi><mi id="S2.E2.m1.1.1.1.1.1.3.2.2.3" xref="S2.E2.m1.1.1.1.1.1.3.2.2.3.cmml">d</mi><mi id="S2.E2.m1.1.1.1.1.1.3.2.3" xref="S2.E2.m1.1.1.1.1.1.3.2.3.cmml">o</mi></msubsup><mo id="S2.E2.m1.1.1.1.1.1.3.1" lspace="0.222em" rspace="0.222em" xref="S2.E2.m1.1.1.1.1.1.3.1.cmml">⊗</mo><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.1.1.1.1.1.3.3" xref="S2.E2.m1.1.1.1.1.1.3.3.cmml">ℳ</mi></mrow><mo id="S2.E2.m1.1.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.1.2.cmml">+</mo><mrow id="S2.E2.m1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.cmml"><msubsup id="S2.E2.m1.1.1.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.1.1.1.1.1.1.3.2.2" xref="S2.E2.m1.1.1.1.1.1.1.3.2.2.cmml">F</mi><mi id="S2.E2.m1.1.1.1.1.1.1.3.2.3" xref="S2.E2.m1.1.1.1.1.1.1.3.2.3.cmml">s</mi><mi id="S2.E2.m1.1.1.1.1.1.1.3.3" xref="S2.E2.m1.1.1.1.1.1.1.3.3.cmml">o</mi></msubsup><mo id="S2.E2.m1.1.1.1.1.1.1.2" lspace="0.222em" rspace="0.222em" xref="S2.E2.m1.1.1.1.1.1.1.2.cmml">⊗</mo><mrow id="S2.E2.m1.1.1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S2.E2.m1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.1.1.1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.cmml"><mn id="S2.E2.m1.1.1.1.1.1.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.2.cmml">1</mn><mo id="S2.E2.m1.1.1.1.1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.1.cmml">−</mo><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.1.1.1.1.1.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.3.cmml">ℳ</mi></mrow><mo id="S2.E2.m1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S2.E2.m1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.1b"><apply id="S2.E2.m1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1"><eq id="S2.E2.m1.1.1.1.1.2.cmml" xref="S2.E2.m1.1.1.1.1.2"></eq><apply id="S2.E2.m1.1.1.1.1.3.cmml" xref="S2.E2.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.1.1.1.1.3">subscript</csymbol><ci id="S2.E2.m1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.1.1.1.1.3.2">𝐹</ci><ci id="S2.E2.m1.1.1.1.1.3.3a.cmml" xref="S2.E2.m1.1.1.1.1.3.3"><mtext id="S2.E2.m1.1.1.1.1.3.3.cmml" mathsize="70%" xref="S2.E2.m1.1.1.1.1.3.3">output</mtext></ci></apply><apply id="S2.E2.m1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1"><plus id="S2.E2.m1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.1.1.1.1.1.2"></plus><apply id="S2.E2.m1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.1.1.1.1.1.3"><csymbol cd="latexml" id="S2.E2.m1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.1.1.1.1.1.3.1">tensor-product</csymbol><apply id="S2.E2.m1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.1.3.2.1.cmml" xref="S2.E2.m1.1.1.1.1.1.3.2">superscript</csymbol><apply id="S2.E2.m1.1.1.1.1.1.3.2.2.cmml" xref="S2.E2.m1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.1.3.2.2.1.cmml" xref="S2.E2.m1.1.1.1.1.1.3.2">subscript</csymbol><ci id="S2.E2.m1.1.1.1.1.1.3.2.2.2.cmml" xref="S2.E2.m1.1.1.1.1.1.3.2.2.2">𝐹</ci><ci id="S2.E2.m1.1.1.1.1.1.3.2.2.3.cmml" xref="S2.E2.m1.1.1.1.1.1.3.2.2.3">𝑑</ci></apply><ci id="S2.E2.m1.1.1.1.1.1.3.2.3.cmml" xref="S2.E2.m1.1.1.1.1.1.3.2.3">𝑜</ci></apply><ci id="S2.E2.m1.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.1.1.1.1.1.3.3">ℳ</ci></apply><apply id="S2.E2.m1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.E2.m1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.2">tensor-product</csymbol><apply id="S2.E2.m1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.3">superscript</csymbol><apply id="S2.E2.m1.1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.1.1.3.2.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E2.m1.1.1.1.1.1.1.3.2.2.cmml" xref="S2.E2.m1.1.1.1.1.1.1.3.2.2">𝐹</ci><ci id="S2.E2.m1.1.1.1.1.1.1.3.2.3.cmml" xref="S2.E2.m1.1.1.1.1.1.1.3.2.3">𝑠</ci></apply><ci id="S2.E2.m1.1.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.1.1.1.1.1.1.3.3">𝑜</ci></apply><apply id="S2.E2.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.1.1"><minus id="S2.E2.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.1"></minus><cn id="S2.E2.m1.1.1.1.1.1.1.1.1.1.2.cmml" type="integer" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.2">1</cn><ci id="S2.E2.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.1.1.1.1.1.1.1.1.1.3">ℳ</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.1c">F_{\text{output}}=F_{d}^{o}\otimes\mathcal{M}+F_{s}^{o}\otimes(1-\mathcal{M}),</annotation><annotation encoding="application/x-llamapun" id="S2.E2.m1.1d">italic_F start_POSTSUBSCRIPT output end_POSTSUBSCRIPT = italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_o end_POSTSUPERSCRIPT ⊗ caligraphic_M + italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_o end_POSTSUPERSCRIPT ⊗ ( 1 - caligraphic_M ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS3.p1.8">where <math alttext="F_{d}^{o}" class="ltx_Math" display="inline" id="S2.SS3.p1.6.m1.1"><semantics id="S2.SS3.p1.6.m1.1a"><msubsup id="S2.SS3.p1.6.m1.1.1" xref="S2.SS3.p1.6.m1.1.1.cmml"><mi id="S2.SS3.p1.6.m1.1.1.2.2" xref="S2.SS3.p1.6.m1.1.1.2.2.cmml">F</mi><mi id="S2.SS3.p1.6.m1.1.1.2.3" xref="S2.SS3.p1.6.m1.1.1.2.3.cmml">d</mi><mi id="S2.SS3.p1.6.m1.1.1.3" xref="S2.SS3.p1.6.m1.1.1.3.cmml">o</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.6.m1.1b"><apply id="S2.SS3.p1.6.m1.1.1.cmml" xref="S2.SS3.p1.6.m1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.6.m1.1.1.1.cmml" xref="S2.SS3.p1.6.m1.1.1">superscript</csymbol><apply id="S2.SS3.p1.6.m1.1.1.2.cmml" xref="S2.SS3.p1.6.m1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.6.m1.1.1.2.1.cmml" xref="S2.SS3.p1.6.m1.1.1">subscript</csymbol><ci id="S2.SS3.p1.6.m1.1.1.2.2.cmml" xref="S2.SS3.p1.6.m1.1.1.2.2">𝐹</ci><ci id="S2.SS3.p1.6.m1.1.1.2.3.cmml" xref="S2.SS3.p1.6.m1.1.1.2.3">𝑑</ci></apply><ci id="S2.SS3.p1.6.m1.1.1.3.cmml" xref="S2.SS3.p1.6.m1.1.1.3">𝑜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.6.m1.1c">F_{d}^{o}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.6.m1.1d">italic_F start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_o end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="F_{s}^{o}" class="ltx_Math" display="inline" id="S2.SS3.p1.7.m2.1"><semantics id="S2.SS3.p1.7.m2.1a"><msubsup id="S2.SS3.p1.7.m2.1.1" xref="S2.SS3.p1.7.m2.1.1.cmml"><mi id="S2.SS3.p1.7.m2.1.1.2.2" xref="S2.SS3.p1.7.m2.1.1.2.2.cmml">F</mi><mi id="S2.SS3.p1.7.m2.1.1.2.3" xref="S2.SS3.p1.7.m2.1.1.2.3.cmml">s</mi><mi id="S2.SS3.p1.7.m2.1.1.3" xref="S2.SS3.p1.7.m2.1.1.3.cmml">o</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.7.m2.1b"><apply id="S2.SS3.p1.7.m2.1.1.cmml" xref="S2.SS3.p1.7.m2.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.7.m2.1.1.1.cmml" xref="S2.SS3.p1.7.m2.1.1">superscript</csymbol><apply id="S2.SS3.p1.7.m2.1.1.2.cmml" xref="S2.SS3.p1.7.m2.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.7.m2.1.1.2.1.cmml" xref="S2.SS3.p1.7.m2.1.1">subscript</csymbol><ci id="S2.SS3.p1.7.m2.1.1.2.2.cmml" xref="S2.SS3.p1.7.m2.1.1.2.2">𝐹</ci><ci id="S2.SS3.p1.7.m2.1.1.2.3.cmml" xref="S2.SS3.p1.7.m2.1.1.2.3">𝑠</ci></apply><ci id="S2.SS3.p1.7.m2.1.1.3.cmml" xref="S2.SS3.p1.7.m2.1.1.3">𝑜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.7.m2.1c">F_{s}^{o}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.7.m2.1d">italic_F start_POSTSUBSCRIPT italic_s end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_o end_POSTSUPERSCRIPT</annotation></semantics></math> represent the features from the ViT and convolution branches, respectively, while <math alttext="\otimes" class="ltx_Math" display="inline" id="S2.SS3.p1.8.m3.1"><semantics id="S2.SS3.p1.8.m3.1a"><mo id="S2.SS3.p1.8.m3.1.1" xref="S2.SS3.p1.8.m3.1.1.cmml">⊗</mo><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.8.m3.1b"><csymbol cd="latexml" id="S2.SS3.p1.8.m3.1.1.cmml" xref="S2.SS3.p1.8.m3.1.1">tensor-product</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.8.m3.1c">\otimes</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.8.m3.1d">⊗</annotation></semantics></math> signifies element-wise multiplication. Each token in the final output feature map learns both the global context information from the ViT branch and the local spatial information from the convolution branch. This is achieved by adaptive fusion between the two branches, ensuring a comprehensive representation of the features.</p>
</div>
<figure class="ltx_table" id="S2.T1">
<figcaption class="ltx_caption ltx_centering" style="font-size:80%;"><span class="ltx_tag ltx_tag_table">Table 1: </span>Performance comparison between our method, MedSAM, and SAM on 21 3D medical image segmentation tasks evaluated by DSC and NSD. Our model achieves significant and consistent improvements across all the tasks. Best results are in bold.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S2.T1.3" style="width:433.6pt;height:250.1pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-157.7pt,91.0pt) scale(0.578887560178988,0.578887560178988) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S2.T1.3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S2.T1.3.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_t" id="S2.T1.3.1.1.1.1" rowspan="2"><span class="ltx_text" id="S2.T1.3.1.1.1.1.1" style="font-size:80%;">Segmentation Task</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S2.T1.3.1.1.1.2" rowspan="2"><span class="ltx_text" id="S2.T1.3.1.1.1.2.1" style="font-size:80%;">Modality</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="3" id="S2.T1.3.1.1.1.3"><span class="ltx_text" id="S2.T1.3.1.1.1.3.1" style="font-size:80%;">DSC (%)</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="3" id="S2.T1.3.1.1.1.4"><span class="ltx_text" id="S2.T1.3.1.1.1.4.1" style="font-size:80%;">NSD (%)</span></th>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S2.T1.3.1.2.2.1">
<span class="ltx_text" id="S2.T1.3.1.2.2.1.1" style="font-size:80%;">SAM </span><cite class="ltx_cite ltx_citemacro_cite"><span class="ltx_text" id="S2.T1.3.1.2.2.1.2.1" style="font-size:80%;">[</span><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib18" title="">18</a><span class="ltx_text" id="S2.T1.3.1.2.2.1.3.2" style="font-size:80%;">]</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S2.T1.3.1.2.2.2">
<span class="ltx_text" id="S2.T1.3.1.2.2.2.1" style="font-size:80%;">MedSAM </span><cite class="ltx_cite ltx_citemacro_cite"><span class="ltx_text" id="S2.T1.3.1.2.2.2.2.1" style="font-size:80%;">[</span><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a><span class="ltx_text" id="S2.T1.3.1.2.2.2.3.2" style="font-size:80%;">]</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S2.T1.3.1.2.2.3"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.2.2.3.1" style="font-size:80%;">DB-SAM (Ours)</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S2.T1.3.1.2.2.4">
<span class="ltx_text" id="S2.T1.3.1.2.2.4.1" style="font-size:80%;">SAM </span><cite class="ltx_cite ltx_citemacro_cite"><span class="ltx_text" id="S2.T1.3.1.2.2.4.2.1" style="font-size:80%;">[</span><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib18" title="">18</a><span class="ltx_text" id="S2.T1.3.1.2.2.4.3.2" style="font-size:80%;">]</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S2.T1.3.1.2.2.5">
<span class="ltx_text" id="S2.T1.3.1.2.2.5.1" style="font-size:80%;">MedSAM </span><cite class="ltx_cite ltx_citemacro_cite"><span class="ltx_text" id="S2.T1.3.1.2.2.5.2.1" style="font-size:80%;">[</span><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a><span class="ltx_text" id="S2.T1.3.1.2.2.5.3.2" style="font-size:80%;">]</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S2.T1.3.1.2.2.6"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.2.2.6.1" style="font-size:80%;">DB-SAM (Ours)</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S2.T1.3.1.3.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S2.T1.3.1.3.1.1"><span class="ltx_text" id="S2.T1.3.1.3.1.1.1" style="font-size:80%;">Brain Ventricles</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S2.T1.3.1.3.1.2"><span class="ltx_text" id="S2.T1.3.1.3.1.2.1" style="font-size:80%;">MR-T1</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.1.3.1.3"><span class="ltx_text" id="S2.T1.3.1.3.1.3.1" style="font-size:80%;">41.96</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.1.3.1.4"><span class="ltx_text" id="S2.T1.3.1.3.1.4.1" style="font-size:80%;">74.82</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S2.T1.3.1.3.1.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.3.1.5.1" style="font-size:80%;">78.95</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.1.3.1.6"><span class="ltx_text" id="S2.T1.3.1.3.1.6.1" style="font-size:80%;">31.26</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.1.3.1.7"><span class="ltx_text" id="S2.T1.3.1.3.1.7.1" style="font-size:80%;">78.17</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S2.T1.3.1.3.1.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.3.1.8.1" style="font-size:80%;">82.08</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.4.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.4.2.1"><span class="ltx_text" id="S2.T1.3.1.4.2.1.1" style="font-size:80%;">Brain Ventricles</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.4.2.2"><span class="ltx_text" id="S2.T1.3.1.4.2.2.1" style="font-size:80%;">MR-T2</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.4.2.3"><span class="ltx_text" id="S2.T1.3.1.4.2.3.1" style="font-size:80%;">39.56</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.4.2.4"><span class="ltx_text" id="S2.T1.3.1.4.2.4.1" style="font-size:80%;">72.87</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.4.2.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.4.2.5.1" style="font-size:80%;">77.02</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.4.2.6"><span class="ltx_text" id="S2.T1.3.1.4.2.6.1" style="font-size:80%;">31.39</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.4.2.7"><span class="ltx_text" id="S2.T1.3.1.4.2.7.1" style="font-size:80%;">75.01</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.4.2.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.4.2.8.1" style="font-size:80%;">81.23</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.5.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.5.3.1"><span class="ltx_text" id="S2.T1.3.1.5.3.1.1" style="font-size:80%;">Brain Tumor</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.5.3.2"><span class="ltx_text" id="S2.T1.3.1.5.3.2.1" style="font-size:80%;">MR-FLAIR</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.5.3.3"><span class="ltx_text" id="S2.T1.3.1.5.3.3.1" style="font-size:80%;">74</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.5.3.4"><span class="ltx_text" id="S2.T1.3.1.5.3.4.1" style="font-size:80%;">89.15</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.5.3.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.5.3.5.1" style="font-size:80%;">92.49</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.5.3.6"><span class="ltx_text" id="S2.T1.3.1.5.3.6.1" style="font-size:80%;">38.27</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.5.3.7"><span class="ltx_text" id="S2.T1.3.1.5.3.7.1" style="font-size:80%;">76.13</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.5.3.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.5.3.8.1" style="font-size:80%;">85.77</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.6.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.6.4.1"><span class="ltx_text" id="S2.T1.3.1.6.4.1.1" style="font-size:80%;">Cerebellum</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.6.4.2"><span class="ltx_text" id="S2.T1.3.1.6.4.2.1" style="font-size:80%;">MR-T1</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.6.4.3"><span class="ltx_text" id="S2.T1.3.1.6.4.3.1" style="font-size:80%;">83.25</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.6.4.4"><span class="ltx_text" id="S2.T1.3.1.6.4.4.1" style="font-size:80%;">93.31</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.6.4.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.6.4.5.1" style="font-size:80%;">94.47</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.6.4.6"><span class="ltx_text" id="S2.T1.3.1.6.4.6.1" style="font-size:80%;">44.55</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.6.4.7"><span class="ltx_text" id="S2.T1.3.1.6.4.7.1" style="font-size:80%;">82.39</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.6.4.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.6.4.8.1" style="font-size:80%;">88.32</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.7.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.7.5.1"><span class="ltx_text" id="S2.T1.3.1.7.5.1.1" style="font-size:80%;">Cerebellum</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.7.5.2"><span class="ltx_text" id="S2.T1.3.1.7.5.2.1" style="font-size:80%;">MR-T2</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.7.5.3"><span class="ltx_text" id="S2.T1.3.1.7.5.3.1" style="font-size:80%;">81.88</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.7.5.4"><span class="ltx_text" id="S2.T1.3.1.7.5.4.1" style="font-size:80%;">90.78</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.7.5.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.7.5.5.1" style="font-size:80%;">92.69</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.7.5.6"><span class="ltx_text" id="S2.T1.3.1.7.5.6.1" style="font-size:80%;">38.84</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.7.5.7"><span class="ltx_text" id="S2.T1.3.1.7.5.7.1" style="font-size:80%;">70.01</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.7.5.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.7.5.8.1" style="font-size:80%;">76.77</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.8.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.8.6.1"><span class="ltx_text" id="S2.T1.3.1.8.6.1.1" style="font-size:80%;">Gallbladder</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.8.6.2"><span class="ltx_text" id="S2.T1.3.1.8.6.2.1" style="font-size:80%;">MR</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.8.6.3"><span class="ltx_text" id="S2.T1.3.1.8.6.3.1" style="font-size:80%;">61.97</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.8.6.4"><span class="ltx_text" id="S2.T1.3.1.8.6.4.1" style="font-size:80%;">77.78</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.8.6.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.8.6.5.1" style="font-size:80%;">87.43</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.8.6.6"><span class="ltx_text" id="S2.T1.3.1.8.6.6.1" style="font-size:80%;">36.34</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.8.6.7"><span class="ltx_text" id="S2.T1.3.1.8.6.7.1" style="font-size:80%;">76.36</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.8.6.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.8.6.8.1" style="font-size:80%;">84.57</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.9.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.9.7.1"><span class="ltx_text" id="S2.T1.3.1.9.7.1.1" style="font-size:80%;">Left Ventricle</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.9.7.2"><span class="ltx_text" id="S2.T1.3.1.9.7.2.1" style="font-size:80%;">MR</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.9.7.3"><span class="ltx_text" id="S2.T1.3.1.9.7.3.1" style="font-size:80%;">68.44</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.9.7.4"><span class="ltx_text" id="S2.T1.3.1.9.7.4.1" style="font-size:80%;">88.91</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.9.7.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.9.7.5.1" style="font-size:80%;">91.15</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.9.7.6"><span class="ltx_text" id="S2.T1.3.1.9.7.6.1" style="font-size:80%;">55.73</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.9.7.7"><span class="ltx_text" id="S2.T1.3.1.9.7.7.1" style="font-size:80%;">91.05</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.9.7.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.9.7.8.1" style="font-size:80%;">94.10</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.10.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.10.8.1"><span class="ltx_text" id="S2.T1.3.1.10.8.1.1" style="font-size:80%;">Right Ventricle</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.10.8.2"><span class="ltx_text" id="S2.T1.3.1.10.8.2.1" style="font-size:80%;">MR</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.10.8.3"><span class="ltx_text" id="S2.T1.3.1.10.8.3.1" style="font-size:80%;">72.11</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.10.8.4"><span class="ltx_text" id="S2.T1.3.1.10.8.4.1" style="font-size:80%;">85.92</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.10.8.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.10.8.5.1" style="font-size:80%;">90.51</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.10.8.6"><span class="ltx_text" id="S2.T1.3.1.10.8.6.1" style="font-size:80%;">68.98</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.10.8.7"><span class="ltx_text" id="S2.T1.3.1.10.8.7.1" style="font-size:80%;">88.85</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.10.8.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.10.8.8.1" style="font-size:80%;">94.97</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.11.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.11.9.1"><span class="ltx_text" id="S2.T1.3.1.11.9.1.1" style="font-size:80%;">Liver</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.11.9.2"><span class="ltx_text" id="S2.T1.3.1.11.9.2.1" style="font-size:80%;">MR</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.11.9.3"><span class="ltx_text" id="S2.T1.3.1.11.9.3.1" style="font-size:80%;">80.38</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.11.9.4"><span class="ltx_text" id="S2.T1.3.1.11.9.4.1" style="font-size:80%;">93.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.11.9.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.11.9.5.1" style="font-size:80%;">96.17</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.11.9.6"><span class="ltx_text" id="S2.T1.3.1.11.9.6.1" style="font-size:80%;">33</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.11.9.7"><span class="ltx_text" id="S2.T1.3.1.11.9.7.1" style="font-size:80%;">80.13</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.11.9.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.11.9.8.1" style="font-size:80%;">89.87</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.12.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.12.10.1"><span class="ltx_text" id="S2.T1.3.1.12.10.1.1" style="font-size:80%;">Pancreas</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.12.10.2"><span class="ltx_text" id="S2.T1.3.1.12.10.2.1" style="font-size:80%;">MR</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.12.10.3"><span class="ltx_text" id="S2.T1.3.1.12.10.3.1" style="font-size:80%;">51.11</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.12.10.4"><span class="ltx_text" id="S2.T1.3.1.12.10.4.1" style="font-size:80%;">80.07</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.12.10.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.12.10.5.1" style="font-size:80%;">85.16</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.12.10.6"><span class="ltx_text" id="S2.T1.3.1.12.10.6.1" style="font-size:80%;">32.71</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.12.10.7"><span class="ltx_text" id="S2.T1.3.1.12.10.7.1" style="font-size:80%;">79.42</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.12.10.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.12.10.8.1" style="font-size:80%;">88.26</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.13.11">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.13.11.1"><span class="ltx_text" id="S2.T1.3.1.13.11.1.1" style="font-size:80%;">Prostate</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.13.11.2"><span class="ltx_text" id="S2.T1.3.1.13.11.2.1" style="font-size:80%;">MR-ADC</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.13.11.3"><span class="ltx_text" id="S2.T1.3.1.13.11.3.1" style="font-size:80%;">79.61</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.13.11.4"><span class="ltx_text" id="S2.T1.3.1.13.11.4.1" style="font-size:80%;">92.25</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.13.11.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.13.11.5.1" style="font-size:80%;">93.25</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.13.11.6"><span class="ltx_text" id="S2.T1.3.1.13.11.6.1" style="font-size:80%;">60.12</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.13.11.7"><span class="ltx_text" id="S2.T1.3.1.13.11.7.1" style="font-size:80%;">92.72</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.13.11.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.13.11.8.1" style="font-size:80%;">94.13</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.14.12">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.14.12.1"><span class="ltx_text" id="S2.T1.3.1.14.12.1.1" style="font-size:80%;">Prostate</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.14.12.2"><span class="ltx_text" id="S2.T1.3.1.14.12.2.1" style="font-size:80%;">MR-T2</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.14.12.3"><span class="ltx_text" id="S2.T1.3.1.14.12.3.1" style="font-size:80%;">79.39</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.14.12.4"><span class="ltx_text" id="S2.T1.3.1.14.12.4.1" style="font-size:80%;">92.18</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.14.12.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.14.12.5.1" style="font-size:80%;">93.45</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.14.12.6"><span class="ltx_text" id="S2.T1.3.1.14.12.6.1" style="font-size:80%;">57.6</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.14.12.7"><span class="ltx_text" id="S2.T1.3.1.14.12.7.1" style="font-size:80%;">92</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.14.12.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.14.12.8.1" style="font-size:80%;">94.32</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.15.13">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.15.13.1"><span class="ltx_text" id="S2.T1.3.1.15.13.1.1" style="font-size:80%;">Abdomen Tumor</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.15.13.2"><span class="ltx_text" id="S2.T1.3.1.15.13.2.1" style="font-size:80%;">CT</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.15.13.3"><span class="ltx_text" id="S2.T1.3.1.15.13.3.1" style="font-size:80%;">42.86</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.15.13.4"><span class="ltx_text" id="S2.T1.3.1.15.13.4.1" style="font-size:80%;">65.54</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.15.13.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.15.13.5.1" style="font-size:80%;">78.31</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.15.13.6"><span class="ltx_text" id="S2.T1.3.1.15.13.6.1" style="font-size:80%;">34.49</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.15.13.7"><span class="ltx_text" id="S2.T1.3.1.15.13.7.1" style="font-size:80%;">64.99</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.15.13.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.15.13.8.1" style="font-size:80%;">79.62</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.16.14">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.16.14.1"><span class="ltx_text" id="S2.T1.3.1.16.14.1.1" style="font-size:80%;">Gallbladder</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.16.14.2"><span class="ltx_text" id="S2.T1.3.1.16.14.2.1" style="font-size:80%;">CT</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.16.14.3"><span class="ltx_text" id="S2.T1.3.1.16.14.3.1" style="font-size:80%;">47.28</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.16.14.4"><span class="ltx_text" id="S2.T1.3.1.16.14.4.1" style="font-size:80%;">84.36</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.16.14.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.16.14.5.1" style="font-size:80%;">90.12</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.16.14.6"><span class="ltx_text" id="S2.T1.3.1.16.14.6.1" style="font-size:80%;">30.48</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.16.14.7"><span class="ltx_text" id="S2.T1.3.1.16.14.7.1" style="font-size:80%;">87.07</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.16.14.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.16.14.8.1" style="font-size:80%;">94.92</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.17.15">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.17.15.1"><span class="ltx_text" id="S2.T1.3.1.17.15.1.1" style="font-size:80%;">Head-Neck Tumor</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.17.15.2"><span class="ltx_text" id="S2.T1.3.1.17.15.2.1" style="font-size:80%;">CT</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.17.15.3"><span class="ltx_text" id="S2.T1.3.1.17.15.3.1" style="font-size:80%;">23.87</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.17.15.4"><span class="ltx_text" id="S2.T1.3.1.17.15.4.1" style="font-size:80%;">68.29</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.17.15.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.17.15.5.1" style="font-size:80%;">76.14</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.17.15.6"><span class="ltx_text" id="S2.T1.3.1.17.15.6.1" style="font-size:80%;">23.88</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.17.15.7"><span class="ltx_text" id="S2.T1.3.1.17.15.7.1" style="font-size:80%;">47.36</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.17.15.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.17.15.8.1" style="font-size:80%;">56.27</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.18.16">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.18.16.1"><span class="ltx_text" id="S2.T1.3.1.18.16.1.1" style="font-size:80%;">Liver</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.18.16.2"><span class="ltx_text" id="S2.T1.3.1.18.16.2.1" style="font-size:80%;">CT</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.18.16.3"><span class="ltx_text" id="S2.T1.3.1.18.16.3.1" style="font-size:80%;">74.21</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.18.16.4"><span class="ltx_text" id="S2.T1.3.1.18.16.4.1" style="font-size:80%;">91.42</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.18.16.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.18.16.5.1" style="font-size:80%;">96.21</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.18.16.6"><span class="ltx_text" id="S2.T1.3.1.18.16.6.1" style="font-size:80%;">26.08</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.18.16.7"><span class="ltx_text" id="S2.T1.3.1.18.16.7.1" style="font-size:80%;">76.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.18.16.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.18.16.8.1" style="font-size:80%;">91.35</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.19.17">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.19.17.1"><span class="ltx_text" id="S2.T1.3.1.19.17.1.1" style="font-size:80%;">Lung Infections</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.19.17.2"><span class="ltx_text" id="S2.T1.3.1.19.17.2.1" style="font-size:80%;">CT</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.19.17.3"><span class="ltx_text" id="S2.T1.3.1.19.17.3.1" style="font-size:80%;">32.54</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.19.17.4"><span class="ltx_text" id="S2.T1.3.1.19.17.4.1" style="font-size:80%;">60.01</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.19.17.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.19.17.5.1" style="font-size:80%;">78.51</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.19.17.6"><span class="ltx_text" id="S2.T1.3.1.19.17.6.1" style="font-size:80%;">25.84</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.19.17.7"><span class="ltx_text" id="S2.T1.3.1.19.17.7.1" style="font-size:80%;">58.89</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.19.17.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.19.17.8.1" style="font-size:80%;">78.98</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.20.18">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.20.18.1"><span class="ltx_text" id="S2.T1.3.1.20.18.1.1" style="font-size:80%;">Pancreas</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.20.18.2"><span class="ltx_text" id="S2.T1.3.1.20.18.2.1" style="font-size:80%;">CT</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.20.18.3"><span class="ltx_text" id="S2.T1.3.1.20.18.3.1" style="font-size:80%;">43.53</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.20.18.4"><span class="ltx_text" id="S2.T1.3.1.20.18.4.1" style="font-size:80%;">76.76</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.20.18.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.20.18.5.1" style="font-size:80%;">83.8</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.20.18.6"><span class="ltx_text" id="S2.T1.3.1.20.18.6.1" style="font-size:80%;">32.38</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.20.18.7"><span class="ltx_text" id="S2.T1.3.1.20.18.7.1" style="font-size:80%;">81.09</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.20.18.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.20.18.8.1" style="font-size:80%;">89.45</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.21.19">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.21.19.1"><span class="ltx_text" id="S2.T1.3.1.21.19.1.1" style="font-size:80%;">Pleural Effusion</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.21.19.2"><span class="ltx_text" id="S2.T1.3.1.21.19.2.1" style="font-size:80%;">CT</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.21.19.3"><span class="ltx_text" id="S2.T1.3.1.21.19.3.1" style="font-size:80%;">9.52</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.21.19.4"><span class="ltx_text" id="S2.T1.3.1.21.19.4.1" style="font-size:80%;">59.46</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.21.19.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.21.19.5.1" style="font-size:80%;">75.52</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.21.19.6"><span class="ltx_text" id="S2.T1.3.1.21.19.6.1" style="font-size:80%;">11.19</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.21.19.7"><span class="ltx_text" id="S2.T1.3.1.21.19.7.1" style="font-size:80%;">75.77</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.21.19.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.21.19.8.1" style="font-size:80%;">90.96</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.22.20">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.22.20.1"><span class="ltx_text" id="S2.T1.3.1.22.20.1.1" style="font-size:80%;">Stomach</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.22.20.2"><span class="ltx_text" id="S2.T1.3.1.22.20.2.1" style="font-size:80%;">CT</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.22.20.3"><span class="ltx_text" id="S2.T1.3.1.22.20.3.1" style="font-size:80%;">68.95</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.22.20.4"><span class="ltx_text" id="S2.T1.3.1.22.20.4.1" style="font-size:80%;">82.66</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.22.20.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.22.20.5.1" style="font-size:80%;">92.54</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.22.20.6"><span class="ltx_text" id="S2.T1.3.1.22.20.6.1" style="font-size:80%;">35.49</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.22.20.7"><span class="ltx_text" id="S2.T1.3.1.22.20.7.1" style="font-size:80%;">70.93</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.22.20.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.22.20.8.1" style="font-size:80%;">87.74</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.23.21">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S2.T1.3.1.23.21.1"><span class="ltx_text" id="S2.T1.3.1.23.21.1.1" style="font-size:80%;">Head-Neck Tumor</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S2.T1.3.1.23.21.2"><span class="ltx_text" id="S2.T1.3.1.23.21.2.1" style="font-size:80%;">PET</span></th>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.23.21.3"><span class="ltx_text" id="S2.T1.3.1.23.21.3.1" style="font-size:80%;">72.45</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.23.21.4"><span class="ltx_text" id="S2.T1.3.1.23.21.4.1" style="font-size:80%;">81.17</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.23.21.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.23.21.5.1" style="font-size:80%;">84.12</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.23.21.6"><span class="ltx_text" id="S2.T1.3.1.23.21.6.1" style="font-size:80%;">38.57</span></td>
<td class="ltx_td ltx_align_center" id="S2.T1.3.1.23.21.7"><span class="ltx_text" id="S2.T1.3.1.23.21.7.1" style="font-size:80%;">62.76</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S2.T1.3.1.23.21.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.23.21.8.1" style="font-size:80%;">67.78</span></td>
</tr>
<tr class="ltx_tr" id="S2.T1.3.1.24.22">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_t" id="S2.T1.3.1.24.22.1"><span class="ltx_text" id="S2.T1.3.1.24.22.1.1" style="font-size:80%;">Average</span></th>
<th class="ltx_td ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t" id="S2.T1.3.1.24.22.2"></th>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S2.T1.3.1.24.22.3"><span class="ltx_text" id="S2.T1.3.1.24.22.3.1" style="font-size:80%;">58.52</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S2.T1.3.1.24.22.4"><span class="ltx_text" id="S2.T1.3.1.24.22.4.1" style="font-size:80%;">81.02</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S2.T1.3.1.24.22.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.24.22.5.1" style="font-size:80%;">87.05</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S2.T1.3.1.24.22.6"><span class="ltx_text" id="S2.T1.3.1.24.22.6.1" style="font-size:80%;">37.49</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S2.T1.3.1.24.22.7"><span class="ltx_text" id="S2.T1.3.1.24.22.7.1" style="font-size:80%;">76.54</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S2.T1.3.1.24.22.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.1.24.22.8.1" style="font-size:80%;">85.31</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Experiments</h2>
<figure class="ltx_table" id="S3.T2">
<figcaption class="ltx_caption ltx_centering" style="font-size:80%;"><span class="ltx_tag ltx_tag_table">Table 2: </span>Performance comparison between our method and MedSAM as well as SAM on 9 2D medical image segmentation tasks evaluated by Normalized Surface Distance. Our model achieves significant and consistent improvements across all the tasks. Best results are in bold.</figcaption>
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S3.T2.3" style="width:433.6pt;height:123.4pt;vertical-align:-0.6pt;"><span class="ltx_transformed_inner" style="transform:translate(-164.6pt,46.6pt) scale(0.568514891753942,0.568514891753942) ;">
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S3.T2.3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T2.3.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_t" id="S3.T2.3.1.1.1.1" rowspan="2"><span class="ltx_text" id="S3.T2.3.1.1.1.1.1" style="font-size:80%;">Segmentation Task</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S3.T2.3.1.1.1.2" rowspan="2"><span class="ltx_text" id="S3.T2.3.1.1.1.2.1" style="font-size:80%;">Modality</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="3" id="S3.T2.3.1.1.1.3"><span class="ltx_text" id="S3.T2.3.1.1.1.3.1" style="font-size:80%;">DSC(%)</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="3" id="S3.T2.3.1.1.1.4"><span class="ltx_text" id="S3.T2.3.1.1.1.4.1" style="font-size:80%;">NSD(%)</span></th>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T2.3.1.2.2.1">
<span class="ltx_text" id="S3.T2.3.1.2.2.1.1" style="font-size:80%;">SAM  </span><cite class="ltx_cite ltx_citemacro_cite"><span class="ltx_text" id="S3.T2.3.1.2.2.1.2.1" style="font-size:80%;">[</span><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib18" title="">18</a><span class="ltx_text" id="S3.T2.3.1.2.2.1.3.2" style="font-size:80%;">]</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T2.3.1.2.2.2">
<span class="ltx_text" id="S3.T2.3.1.2.2.2.1" style="font-size:80%;">MedSAM </span><cite class="ltx_cite ltx_citemacro_cite"><span class="ltx_text" id="S3.T2.3.1.2.2.2.2.1" style="font-size:80%;">[</span><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a><span class="ltx_text" id="S3.T2.3.1.2.2.2.3.2" style="font-size:80%;">]</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T2.3.1.2.2.3"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.2.2.3.1" style="font-size:80%;">DB-SAM (Ours)</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T2.3.1.2.2.4">
<span class="ltx_text" id="S3.T2.3.1.2.2.4.1" style="font-size:80%;">SAM </span><cite class="ltx_cite ltx_citemacro_cite"><span class="ltx_text" id="S3.T2.3.1.2.2.4.2.1" style="font-size:80%;">[</span><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib18" title="">18</a><span class="ltx_text" id="S3.T2.3.1.2.2.4.3.2" style="font-size:80%;">]</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T2.3.1.2.2.5">
<span class="ltx_text" id="S3.T2.3.1.2.2.5.1" style="font-size:80%;">MedSAM </span><cite class="ltx_cite ltx_citemacro_cite"><span class="ltx_text" id="S3.T2.3.1.2.2.5.2.1" style="font-size:80%;">[</span><a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a><span class="ltx_text" id="S3.T2.3.1.2.2.5.3.2" style="font-size:80%;">]</span></cite>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T2.3.1.2.2.6"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.2.2.6.1" style="font-size:80%;">DB-SAM (Ours)</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T2.3.1.3.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S3.T2.3.1.3.1.1"><span class="ltx_text" id="S3.T2.3.1.3.1.1.1" style="font-size:80%;">Breast Tumor</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T2.3.1.3.1.2"><span class="ltx_text" id="S3.T2.3.1.3.1.2.1" style="font-size:80%;">Ultrasound</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.3.1.3.1.3"><span class="ltx_text" id="S3.T2.3.1.3.1.3.1" style="font-size:80%;">78.01</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.3.1.3.1.4"><span class="ltx_text" id="S3.T2.3.1.3.1.4.1" style="font-size:80%;">85.42</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T2.3.1.3.1.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.3.1.5.1" style="font-size:80%;">87.43</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.3.1.3.1.6"><span class="ltx_text" id="S3.T2.3.1.3.1.6.1" style="font-size:80%;">82.48</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T2.3.1.3.1.7"><span class="ltx_text" id="S3.T2.3.1.3.1.7.1" style="font-size:80%;">89.02</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T2.3.1.3.1.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.3.1.8.1" style="font-size:80%;">92.30</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.4.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T2.3.1.4.2.1"><span class="ltx_text" id="S3.T2.3.1.4.2.1.1" style="font-size:80%;">Liver</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S3.T2.3.1.4.2.2"><span class="ltx_text" id="S3.T2.3.1.4.2.2.1" style="font-size:80%;">Ultrasound</span></th>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.4.2.3"><span class="ltx_text" id="S3.T2.3.1.4.2.3.1" style="font-size:80%;">67.81</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.4.2.4"><span class="ltx_text" id="S3.T2.3.1.4.2.4.1" style="font-size:80%;">74.36</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.4.2.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.4.2.5.1" style="font-size:80%;">81.10</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.4.2.6"><span class="ltx_text" id="S3.T2.3.1.4.2.6.1" style="font-size:80%;">72.07</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.4.2.7"><span class="ltx_text" id="S3.T2.3.1.4.2.7.1" style="font-size:80%;">79.07</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.4.2.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.4.2.8.1" style="font-size:80%;">92.67</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.5.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T2.3.1.5.3.1"><span class="ltx_text" id="S3.T2.3.1.5.3.1.1" style="font-size:80%;">Vessel</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S3.T2.3.1.5.3.2"><span class="ltx_text" id="S3.T2.3.1.5.3.2.1" style="font-size:80%;">Ultrasound</span></th>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.5.3.3"><span class="ltx_text" id="S3.T2.3.1.5.3.3.1" style="font-size:80%;">57.6</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.5.3.4"><span class="ltx_text" id="S3.T2.3.1.5.3.4.1" style="font-size:80%;">70.88</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.5.3.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.5.3.5.1" style="font-size:80%;">72.15</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.5.3.6"><span class="ltx_text" id="S3.T2.3.1.5.3.6.1" style="font-size:80%;">65.1</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.5.3.7"><span class="ltx_text" id="S3.T2.3.1.5.3.7.1" style="font-size:80%;">78.41</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.5.3.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.5.3.8.1" style="font-size:80%;">86.45</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.6.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T2.3.1.6.4.1"><span class="ltx_text" id="S3.T2.3.1.6.4.1.1" style="font-size:80%;">Heart</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S3.T2.3.1.6.4.2"><span class="ltx_text" id="S3.T2.3.1.6.4.2.1" style="font-size:80%;">X-Ray</span></th>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.6.4.3"><span class="ltx_text" id="S3.T2.3.1.6.4.3.1" style="font-size:80%;">79.28</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.6.4.4"><span class="ltx_text" id="S3.T2.3.1.6.4.4.1" style="font-size:80%;">91.19</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.6.4.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.6.4.5.1" style="font-size:80%;">95.35</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.6.4.6"><span class="ltx_text" id="S3.T2.3.1.6.4.6.1" style="font-size:80%;">83.85</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.6.4.7"><span class="ltx_text" id="S3.T2.3.1.6.4.7.1" style="font-size:80%;">94.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.6.4.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.6.4.8.1" style="font-size:80%;">95.65</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.7.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T2.3.1.7.5.1"><span class="ltx_text" id="S3.T2.3.1.7.5.1.1" style="font-size:80%;">Lungs</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S3.T2.3.1.7.5.2"><span class="ltx_text" id="S3.T2.3.1.7.5.2.1" style="font-size:80%;">X-Ray</span></th>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.7.5.3"><span class="ltx_text" id="S3.T2.3.1.7.5.3.1" style="font-size:80%;">72.24</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.7.5.4"><span class="ltx_text" id="S3.T2.3.1.7.5.4.1" style="font-size:80%;">96.57</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.7.5.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.7.5.5.1" style="font-size:80%;">97.60</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.7.5.6"><span class="ltx_text" id="S3.T2.3.1.7.5.6.1" style="font-size:80%;">75.45</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.7.5.7"><span class="ltx_text" id="S3.T2.3.1.7.5.7.1" style="font-size:80%;">98.56</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.7.5.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.7.5.8.1" style="font-size:80%;">99.30</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.8.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T2.3.1.8.6.1"><span class="ltx_text" id="S3.T2.3.1.8.6.1.1" style="font-size:80%;">Polyp</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S3.T2.3.1.8.6.2"><span class="ltx_text" id="S3.T2.3.1.8.6.2.1" style="font-size:80%;">Endoscope</span></th>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.8.6.3"><span class="ltx_text" id="S3.T2.3.1.8.6.3.1" style="font-size:80%;">81.6</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.8.6.4"><span class="ltx_text" id="S3.T2.3.1.8.6.4.1" style="font-size:80%;">86.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.8.6.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.8.6.5.1" style="font-size:80%;">92.13</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.8.6.6"><span class="ltx_text" id="S3.T2.3.1.8.6.6.1" style="font-size:80%;">85.93</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.8.6.7"><span class="ltx_text" id="S3.T2.3.1.8.6.7.1" style="font-size:80%;">90.91</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.8.6.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.8.6.8.1" style="font-size:80%;">96.28</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.9.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T2.3.1.9.7.1"><span class="ltx_text" id="S3.T2.3.1.9.7.1.1" style="font-size:80%;">Instrument</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S3.T2.3.1.9.7.2"><span class="ltx_text" id="S3.T2.3.1.9.7.2.1" style="font-size:80%;">Endoscope</span></th>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.9.7.3"><span class="ltx_text" id="S3.T2.3.1.9.7.3.1" style="font-size:80%;">76.61</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.9.7.4"><span class="ltx_text" id="S3.T2.3.1.9.7.4.1" style="font-size:80%;">86.37</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.9.7.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.9.7.5.1" style="font-size:80%;">91.89</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.9.7.6"><span class="ltx_text" id="S3.T2.3.1.9.7.6.1" style="font-size:80%;">82.36</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.9.7.7"><span class="ltx_text" id="S3.T2.3.1.9.7.7.1" style="font-size:80%;">90.93</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.9.7.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.9.7.8.1" style="font-size:80%;">97.33</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.10.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T2.3.1.10.8.1"><span class="ltx_text" id="S3.T2.3.1.10.8.1.1" style="font-size:80%;">Retinal Vessel</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S3.T2.3.1.10.8.2"><span class="ltx_text" id="S3.T2.3.1.10.8.2.1" style="font-size:80%;">Retinal Image</span></th>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.10.8.3"><span class="ltx_text" id="S3.T2.3.1.10.8.3.1" style="font-size:80%;">0.75</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.10.8.4"><span class="ltx_text" id="S3.T2.3.1.10.8.4.1" style="font-size:80%;">66.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.10.8.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.10.8.5.1" style="font-size:80%;">67.53</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.10.8.6"><span class="ltx_text" id="S3.T2.3.1.10.8.6.1" style="font-size:80%;">3.45</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.10.8.7"><span class="ltx_text" id="S3.T2.3.1.10.8.7.1" style="font-size:80%;">84.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.10.8.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.10.8.8.1" style="font-size:80%;">91.36</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.11.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T2.3.1.11.9.1"><span class="ltx_text" id="S3.T2.3.1.11.9.1.1" style="font-size:80%;">Gland</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="S3.T2.3.1.11.9.2"><span class="ltx_text" id="S3.T2.3.1.11.9.2.1" style="font-size:80%;">Pathology</span></th>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.11.9.3"><span class="ltx_text" id="S3.T2.3.1.11.9.3.1" style="font-size:80%;">22.63</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.11.9.4"><span class="ltx_text" id="S3.T2.3.1.11.9.4.1" style="font-size:80%;">37.23</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.11.9.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.11.9.5.1" style="font-size:80%;">52.79</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.11.9.6"><span class="ltx_text" id="S3.T2.3.1.11.9.6.1" style="font-size:80%;">27.75</span></td>
<td class="ltx_td ltx_align_center" id="S3.T2.3.1.11.9.7"><span class="ltx_text" id="S3.T2.3.1.11.9.7.1" style="font-size:80%;">43.09</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T2.3.1.11.9.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.11.9.8.1" style="font-size:80%;">74.95</span></td>
</tr>
<tr class="ltx_tr" id="S3.T2.3.1.12.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_t" id="S3.T2.3.1.12.10.1"><span class="ltx_text" id="S3.T2.3.1.12.10.1.1" style="font-size:80%;">Average</span></th>
<th class="ltx_td ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t" id="S3.T2.3.1.12.10.2"></th>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S3.T2.3.1.12.10.3"><span class="ltx_text" id="S3.T2.3.1.12.10.3.1" style="font-size:80%;">59.62</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S3.T2.3.1.12.10.4"><span class="ltx_text" id="S3.T2.3.1.12.10.4.1" style="font-size:80%;">77.22</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T2.3.1.12.10.5"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.12.10.5.1" style="font-size:80%;">82.00</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S3.T2.3.1.12.10.6"><span class="ltx_text" id="S3.T2.3.1.12.10.6.1" style="font-size:80%;">64.27</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S3.T2.3.1.12.10.7"><span class="ltx_text" id="S3.T2.3.1.12.10.7.1" style="font-size:80%;">83.17</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T2.3.1.12.10.8"><span class="ltx_text ltx_font_bold" id="S3.T2.3.1.12.10.8.1" style="font-size:80%;">91.81</span></td>
</tr>
</tbody>
</table>
</span></div>
</figure>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Implementation and Evaluation Metrics</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.2"><span class="ltx_text ltx_font_bold" id="S3.SS1.p1.2.1">Dataset.</span>
Our proposed method utilizes the extensive and heterogeneous large-scale dataset collected by MedSAM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a>]</cite>, adhering to their established split criteria for training and testing. The large-scale dataset encompasses 30 distinct segmentation tasks collected from public datasets across various medical devices.
Specifically, the
segmentation tasks of brain ventricle, brain tumor, cerebellum, gallbladder, and the left and right ventricles of the heart are generated from various MR sequences such as T1, T2, ADC, and FLAIR <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib17" title="">17</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib21" title="">21</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib5" title="">5</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib7" title="">7</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib27" title="">27</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib16" title="">16</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib12" title="">12</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib28" title="">28</a>]</cite>. The segmentation tasks of abdominal tumors, COVID-19 related infections, gallbladder, head and neck tumors, liver, pancreas, pleural effusion, and stomach are generated from CT scans <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib24" title="">24</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib14" title="">14</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib25" title="">25</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib23" title="">23</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib28" title="">28</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib3" title="">3</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib20" title="">20</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib19" title="">19</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib11" title="">11</a>]</cite>. The segmentation tasks of heart and lungs are from X-Ray images <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib26" title="">26</a>]</cite>.
The segmentation tasks of polyps and instruments are from endoscopic images <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib2" title="">2</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib13" title="">13</a>]</cite>.
The segmentation task of vessels is from retinal images <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib1" title="">1</a>]</cite>.
The segmentation task of colon glands is from pathology images <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib29" title="">29</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib30" title="">30</a>]</cite>.
The images of all segmentation tasks are normalized to the range of <math alttext="\left[0,255\right]" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.2"><semantics id="S3.SS1.p1.1.m1.2a"><mrow id="S3.SS1.p1.1.m1.2.3.2" xref="S3.SS1.p1.1.m1.2.3.1.cmml"><mo id="S3.SS1.p1.1.m1.2.3.2.1" xref="S3.SS1.p1.1.m1.2.3.1.cmml">[</mo><mn id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">0</mn><mo id="S3.SS1.p1.1.m1.2.3.2.2" xref="S3.SS1.p1.1.m1.2.3.1.cmml">,</mo><mn id="S3.SS1.p1.1.m1.2.2" xref="S3.SS1.p1.1.m1.2.2.cmml">255</mn><mo id="S3.SS1.p1.1.m1.2.3.2.3" xref="S3.SS1.p1.1.m1.2.3.1.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.2b"><interval closure="closed" id="S3.SS1.p1.1.m1.2.3.1.cmml" xref="S3.SS1.p1.1.m1.2.3.2"><cn id="S3.SS1.p1.1.m1.1.1.cmml" type="integer" xref="S3.SS1.p1.1.m1.1.1">0</cn><cn id="S3.SS1.p1.1.m1.2.2.cmml" type="integer" xref="S3.SS1.p1.1.m1.2.2">255</cn></interval></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.2c">\left[0,255\right]</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.2d">[ 0 , 255 ]</annotation></semantics></math> and resized to the fixed resolution of <math alttext="256\times 256\times 3" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.1"><semantics id="S3.SS1.p1.2.m2.1a"><mrow id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml"><mn id="S3.SS1.p1.2.m2.1.1.2" xref="S3.SS1.p1.2.m2.1.1.2.cmml">256</mn><mo id="S3.SS1.p1.2.m2.1.1.1" lspace="0.222em" rspace="0.222em" xref="S3.SS1.p1.2.m2.1.1.1.cmml">×</mo><mn id="S3.SS1.p1.2.m2.1.1.3" xref="S3.SS1.p1.2.m2.1.1.3.cmml">256</mn><mo id="S3.SS1.p1.2.m2.1.1.1a" lspace="0.222em" rspace="0.222em" xref="S3.SS1.p1.2.m2.1.1.1.cmml">×</mo><mn id="S3.SS1.p1.2.m2.1.1.4" xref="S3.SS1.p1.2.m2.1.1.4.cmml">3</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><apply id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1"><times id="S3.SS1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1.1"></times><cn id="S3.SS1.p1.2.m2.1.1.2.cmml" type="integer" xref="S3.SS1.p1.2.m2.1.1.2">256</cn><cn id="S3.SS1.p1.2.m2.1.1.3.cmml" type="integer" xref="S3.SS1.p1.2.m2.1.1.3">256</cn><cn id="S3.SS1.p1.2.m2.1.1.4.cmml" type="integer" xref="S3.SS1.p1.2.m2.1.1.4">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">256\times 256\times 3</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.1d">256 × 256 × 3</annotation></semantics></math>. For 3D images, such as those from CT and MR scans, the images are split into 2D slices along axial plane. Finally, the training set contains 161,857 images, while the test set comprises of 52,506 images.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.1"><span class="ltx_text ltx_font_bold" id="S3.SS1.p2.1.1">Training Settings.</span>
We leverage a pre-trained SAM with ViT-B and integrate our proposed adapter modules. Both the ViT encoder and the prompt encoder are kept frozen during training. Similar to MedSAM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a>]</cite>, the mask decoder is trainable. During training, to closely replicate a real-world clinical setting where a doctor manually marks a target area, we generated bounding box prompts from ground-truth masks with a random perturbation ranging from 0 to 20 pixels. This approach is designed to reflect the variability and imprecision inherent in human-drawn bounding boxes in medical imaging. We train our method using 4 Nvidia A100 GPUs, and adopt the AdamW optimizer with a polynomial learning rate. There are totally 12 epochs with initial learning rate of 1e-4. The adapter module is regulated by dropout and drop path with the rates of 0.4.
We employ the sum of cross-entropy loss and dice loss to supervise mask learning.</p>
</div>
<div class="ltx_para ltx_noindent" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.1"><span class="ltx_text ltx_font_bold" id="S3.SS1.p3.1.1">Evaluation Metrics.</span>
Similar to MedSAM, the performance is evaluated using the standard Dice Similarity Coefficient (DSC) and Normalized Surface Distance (NSD) with 1 <math alttext="mm" class="ltx_Math" display="inline" id="S3.SS1.p3.1.m1.1"><semantics id="S3.SS1.p3.1.m1.1a"><mrow id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml"><mi id="S3.SS1.p3.1.m1.1.1.2" xref="S3.SS1.p3.1.m1.1.1.2.cmml">m</mi><mo id="S3.SS1.p3.1.m1.1.1.1" xref="S3.SS1.p3.1.m1.1.1.1.cmml">⁢</mo><mi id="S3.SS1.p3.1.m1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.3.cmml">m</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.1b"><apply id="S3.SS1.p3.1.m1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1"><times id="S3.SS1.p3.1.m1.1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1.1"></times><ci id="S3.SS1.p3.1.m1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.2">𝑚</ci><ci id="S3.SS1.p3.1.m1.1.1.3.cmml" xref="S3.SS1.p3.1.m1.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.1c">mm</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.1.m1.1d">italic_m italic_m</annotation></semantics></math> tolerance, a widely recognized and reliable metrics for segmentation efficacy.</p>
</div>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="318" id="S3.F2.g1" src="extracted/5903890/comparision.jpg" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Visualization examples of the pre-trained SAM, MedSAM, our model and GT on different 3D and 2D tasks. Our DB-SAM model achieves more accurate segmentation than the SAM and MedSAM, especially in scenarios involving small organs and organs with complex shapes. Best viewed zoomed in. Additional results are presented in the supplementary material.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Comparison with SAM and MedSAM</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">Here we compare our DB-SAM with SAM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib18" title="">18</a>]</cite> and MedSAM <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#bib.bib22" title="">22</a>]</cite> on both 3D and 2D tasks in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S2.T1" title="Table 1 ‣ 2.3 ViT-Conv Fusion Block ‣ 2 Method ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">1</span></a> and Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S3.T2" title="Table 2 ‣ 3 Experiments ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">2</span></a>. Our DB-SAM significantly outperforms both the original SAM and MedSAM across all 30 segmentation tasks.
Compared to SAM on different 3D medical segmentation tasks, our DB-SAM achieves 28.53% improvement in terms of average DSC and 47.82% in terms of average NSD. Compared to MedSAM, our DB-SAM obtains 6.03% improvement in terms of average DSC and 8.77% in terms of average NSD.
Further, we observe that our DB-SAM particularly excels in complex 3D tasks involving abdomen tumors, liver, lungs, pleural effusion, and stomach. For instance, on abdomen tumor segmentation, our DB-SAM obtains a DSC of 78.31%, whereas MedSAM provides a DSC of 65.54%. This leads to an absolute improvement of 12.77%, likely due to the ability of DB-SAM to capture rich local information and adapt to varying scales through its convolution branch and deformable attention operation. As a result, DB-SAM effectively addresses challenges posed by small, discrete, and irregularly shaped objects.
Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S3.T2" title="Table 2 ‣ 3 Experiments ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">2</span></a> shows results on different 2D tasks. In terms of DSC, SAM obtains 59.62%, MedSAM achieves 77.22%, whereas our DB-SAM obtains significantly improved performance of 82.00%. Similarly, our Db-SAM outperforms SAM and MedSAM by 27.54% and 8.64% in terms of NSD.</p>
</div>
<figure class="ltx_table" id="S3.T3">
<figcaption class="ltx_caption ltx_centering" style="font-size:80%;"><span class="ltx_tag ltx_tag_table">Table 3: </span>Ablation study of integrating different modules, including channel attention block, bilateral cross attention block, and ViT-Conv fusion block.</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S3.T3.3">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T3.3.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_t" id="S3.T3.3.1.1.1" rowspan="2"><span class="ltx_text" id="S3.T3.3.1.1.1.1" style="font-size:80%;">
<span class="ltx_tabular ltx_align_middle" id="S3.T3.3.1.1.1.1.1">
<span class="ltx_tr" id="S3.T3.3.1.1.1.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T3.3.1.1.1.1.1.1.1">Channel</span></span>
<span class="ltx_tr" id="S3.T3.3.1.1.1.1.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T3.3.1.1.1.1.1.2.1">attention</span></span>
</span></span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.3.1.1.2" rowspan="2"><span class="ltx_text" id="S3.T3.3.1.1.2.1" style="font-size:80%;">
<span class="ltx_tabular ltx_align_middle" id="S3.T3.3.1.1.2.1.1">
<span class="ltx_tr" id="S3.T3.3.1.1.2.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T3.3.1.1.2.1.1.1.1">Bilateral</span></span>
<span class="ltx_tr" id="S3.T3.3.1.1.2.1.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T3.3.1.1.2.1.1.2.1">cross attention</span></span>
</span></span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T3.3.1.1.3" rowspan="2"><span class="ltx_text" id="S3.T3.3.1.1.3.1" style="font-size:80%;">
<span class="ltx_tabular ltx_align_middle" id="S3.T3.3.1.1.3.1.1">
<span class="ltx_tr" id="S3.T3.3.1.1.3.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T3.3.1.1.3.1.1.1.1">Final</span></span>
<span class="ltx_tr" id="S3.T3.3.1.1.3.1.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T3.3.1.1.3.1.1.2.1">fusion</span></span>
</span></span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2" id="S3.T3.3.1.1.4"><span class="ltx_text" id="S3.T3.3.1.1.4.1" style="font-size:80%;">3D Average</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2" id="S3.T3.3.1.1.5"><span class="ltx_text" id="S3.T3.3.1.1.5.1" style="font-size:80%;">2D Average</span></th>
</tr>
<tr class="ltx_tr" id="S3.T3.3.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.3.2.2.1"><span class="ltx_text" id="S3.T3.3.2.2.1.1" style="font-size:80%;">Dice</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T3.3.2.2.2"><span class="ltx_text" id="S3.T3.3.2.2.2.1" style="font-size:80%;">NSD</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.3.2.2.3"><span class="ltx_text" id="S3.T3.3.2.2.3.1" style="font-size:80%;">Dice</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T3.3.2.2.4"><span class="ltx_text" id="S3.T3.3.2.2.4.1" style="font-size:80%;">NSD</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T3.3.3.1">
<th class="ltx_td ltx_th ltx_th_row ltx_border_l ltx_border_t" id="S3.T3.3.3.1.1"></th>
<td class="ltx_td ltx_border_t" id="S3.T3.3.3.1.2"></td>
<td class="ltx_td ltx_border_r ltx_border_t" id="S3.T3.3.3.1.3"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.3.3.1.4"><span class="ltx_text" id="S3.T3.3.3.1.4.1" style="font-size:80%;">81.02</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T3.3.3.1.5"><span class="ltx_text" id="S3.T3.3.3.1.5.1" style="font-size:80%;">76.54</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.3.3.1.6"><span class="ltx_text" id="S3.T3.3.3.1.6.1" style="font-size:80%;">77.22</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T3.3.3.1.7"><span class="ltx_text" id="S3.T3.3.3.1.7.1" style="font-size:80%;">83.17</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.3.4.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T3.3.4.2.1"><span class="ltx_text" id="S3.T3.3.4.2.1.1" style="font-size:80%;">✓</span></th>
<td class="ltx_td" id="S3.T3.3.4.2.2"></td>
<td class="ltx_td ltx_border_r" id="S3.T3.3.4.2.3"></td>
<td class="ltx_td ltx_align_center" id="S3.T3.3.4.2.4"><span class="ltx_text" id="S3.T3.3.4.2.4.1" style="font-size:80%;">85.25</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T3.3.4.2.5"><span class="ltx_text" id="S3.T3.3.4.2.5.1" style="font-size:80%;">82.25</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.3.4.2.6"><span class="ltx_text" id="S3.T3.3.4.2.6.1" style="font-size:80%;">78.26</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T3.3.4.2.7"><span class="ltx_text" id="S3.T3.3.4.2.7.1" style="font-size:80%;">89.02</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.3.5.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l" id="S3.T3.3.5.3.1"><span class="ltx_text" id="S3.T3.3.5.3.1.1" style="font-size:80%;">✓</span></th>
<td class="ltx_td ltx_align_center" id="S3.T3.3.5.3.2"><span class="ltx_text" id="S3.T3.3.5.3.2.1" style="font-size:80%;">✓</span></td>
<td class="ltx_td ltx_border_r" id="S3.T3.3.5.3.3"></td>
<td class="ltx_td ltx_align_center" id="S3.T3.3.5.3.4"><span class="ltx_text" id="S3.T3.3.5.3.4.1" style="font-size:80%;">86.60</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T3.3.5.3.5"><span class="ltx_text" id="S3.T3.3.5.3.5.1" style="font-size:80%;">85.01</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.3.5.3.6"><span class="ltx_text" id="S3.T3.3.5.3.6.1" style="font-size:80%;">79.55</span></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="S3.T3.3.5.3.7"><span class="ltx_text" id="S3.T3.3.5.3.7.1" style="font-size:80%;">90.06</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.3.6.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_l" id="S3.T3.3.6.4.1"><span class="ltx_text" id="S3.T3.3.6.4.1.1" style="font-size:80%;">✓</span></th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T3.3.6.4.2"><span class="ltx_text" id="S3.T3.3.6.4.2.1" style="font-size:80%;">✓</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S3.T3.3.6.4.3"><span class="ltx_text" id="S3.T3.3.6.4.3.1" style="font-size:80%;">✓</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T3.3.6.4.4"><span class="ltx_text ltx_font_bold" id="S3.T3.3.6.4.4.1" style="font-size:80%;">87.05</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S3.T3.3.6.4.5"><span class="ltx_text ltx_font_bold" id="S3.T3.3.6.4.5.1" style="font-size:80%;">85.31</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T3.3.6.4.6"><span class="ltx_text ltx_font_bold" id="S3.T3.3.6.4.6.1" style="font-size:80%;">82.00</span></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="S3.T3.3.6.4.7"><span class="ltx_text ltx_font_bold" id="S3.T3.3.6.4.7.1" style="font-size:80%;">91.81</span></td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S3.F2" title="Figure 2 ‣ 3.1 Implementation and Evaluation Metrics ‣ 3 Experiments ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">2</span></a> presents a qualitative comparison of pre-trained SAM, MedSAM, and our DB-SAM with respect to ground-truth (GT).Compared to SAM and MedSAM, our proposed method can generate high-quality results. For instance, the first-row example highlights our proposed method has a superior performance in segmenting small objects with complicated shapes. Specifically, the pre-trained SAM could identify a small portion of the object, MedSAM is able to recognize some more parts. In contrast, our proposed method can accurately predict the masks of the small object. The third-row example shows that our proposed method is able to segment very small object accurately.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Ablation Study</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1"><span class="ltx_text ltx_font_bold" id="S3.SS3.p1.1.1">Efficacy of proposed modules</span>. We conduct an ablation study on impact of three different experiments in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04172v1#S3.T3" title="Table 3 ‣ 3.2 Comparison with SAM and MedSAM ‣ 3 Experiments ‣ DB-SAM: Delving into High Quality Universal Medical Image Segmentation"><span class="ltx_text ltx_ref_tag">3</span></a>. The baseline method is MedSAM, which only fine-tunes mask decoder during training. MedSAM has an averaged DSC score of 81.02% and an averaged NSD score of 76.54% on 3D tasks. When we only integrate the channel attention mechanism into the ViT branch, it has an averaged DSC score of 85.25% and an averaged NSD score of 82.25% on 3D tasks. It outperforms the baseline by 4.21% in terms of DSC and 5.71% in terms of NSD. When further integrating convolution branch, it has an averaged DSC score of 86.60% and an averaged NSD score of 85.01% on 3D tasks. It outperforms the baseline by 5.58% in terms of DSC and 8.47% in terms of NSD. Finally, when fusing the output features of two branches, it has an averaged DSC score of 87.05% and an averaged NSD score of 85.31% on 3D tasks, which outperforms the baseline by 6.01% and 8.77%. Similarly, we observe that integrating different modules can improve the performance on 2D tasks.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Conclusion</h2>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">We introduce a dual-branch method, DB-SAM, to adapt SAM for universal medical image segmentation tasks. Our proposed DB-SAM replaces the original image encoder of SAM with a dual-branch image encoder. The dual-branch image encoder comprises a ViT branch and a convolution branch, which are respectively used to extract high-and low-level domain-specific features. Experiments on large-scale medical image segmentation dataset demonstrate the effectiveness of proposed method, leading to superior segmentation performance.</p>
</div>
<div class="ltx_para" id="S4.p2">
<span class="ltx_ERROR undefined" id="S4.p2.1">{credits}</span>
</div>
<section class="ltx_subsubsection" id="S4.SS0.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.0.1 </span><span class="ltx_ERROR undefined" id="S4.SS0.SSS1.1.1">\discintname</span>
</h4>
<div class="ltx_para" id="S4.SS0.SSS1.p1">
<p class="ltx_p" id="S4.SS0.SSS1.p1.1">The authors have no competing interests to declare that are
relevant to the content of this article.</p>
</div>
</section>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Drive: Digital retinal images for vessel extraction (2023), <a class="ltx_ref" href="https://drive.grand-challenge.org" title="">https://drive.grand-challenge.org</a>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Ali, S., Jha, D., Ghatwary, N., et al.: A multi-centre polyp detection and segmentation dataset for generalisability assessment. Scientific Data <span class="ltx_text ltx_font_bold" id="bib.bib2.1.1">10</span>(1),  75 (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Andrearczyk, V., Oreiller, V., Jreige, M., et al.: Overview of the hecktor challenge at miccai 2020: Automatic head and neck tumor segmentation in pet/ct. In: Head and Neck Tumor Segmentation. pp. 1–21 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Bakas, S., Reyes, M., Jakab, A., et al.: Identifying the best machine learning algorithms for brain tumor segmentation, progression assessment, and overall survival prediction in the brats challenge. arXiv:1811.02629 (2018)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Bernard, O., Lalande, A., Zotti, C., et al.: Deep learning techniques for automatic mri cardiac multi-structures segmentation and diagnosis: is the problem solved? IEEE Transactions on Medical Imaging <span class="ltx_text ltx_font_bold" id="bib.bib5.1.1">37</span>(11), 2514–2525 (2018)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Bilic, P., Christ, P., Li, H.B., et al.: The liver tumor segmentation benchmark (lits). Medical Image Analysis <span class="ltx_text ltx_font_bold" id="bib.bib6.1.1">84</span>, 102680 (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Bloch, N., Madabhushi, A., Huisman, H., et al.: Nci-isbi 2013 challenge: automated segmentation of prostate structures (2015), <a class="ltx_ref" href="https://wiki.cancerimagingarchive.net" title="">https://wiki.cancerimagingarchive.net</a>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Cao, H., Wang, Y., Chen, J., et al.: Swin-unet: Unet-like pure transformer for medical image segmentation. In: ECCVW (2022)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Chen, J., Lu, Y., Yu, Q., et al.: Transunet: Transformers make strong encoders for medical image segmentation. arXiv:2102.04306 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Chen, Z., Duan, Y., Wang, W., et al.: Vision transformer adapter for dense predictions. arXiv:2205.08534 (2022)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Clark, K., Vendt, B., Smith, K., et al.: The cancer imaging archive (tcia): maintaining and operating a public information repository. Journal of Digital Imaging <span class="ltx_text ltx_font_bold" id="bib.bib11.1.1">26</span>(6), 1045–1057 (2013)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Full, P.M., Isensee, F., Jäger, P.F., Maier-Hein, K.: Studying robustness of semantic segmentation under domain shift in cardiac mri. In: Statistical Atlases and Computational Models of the Heart. M&amp;Ms and EMIDEC Challenges (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Garcia-Peraza-Herrera, L.C., Fidon, L., D’Ettorre, C., et al.: Image compositing for segmentation of surgical tools without manual annotations. IEEE Transactions on Medical Imaging <span class="ltx_text ltx_font_bold" id="bib.bib13.1.1">40</span>(5), 1450–1460 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Heller, N., Isensee, F., Maier-Hein, K.H., et al.: The state of the art in kidney and kidney tumor segmentation in contrast-enhanced ct imaging: Results of the kits19 challenge. Medical Image Analysis <span class="ltx_text ltx_font_bold" id="bib.bib14.1.1">67</span>, 101821 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Hu, J., Shen, L., Sun, G.: Squeeze-and-excitation networks. In: Proceedings of the IEEE conference on computer vision and pattern recognition. pp. 7132–7141 (2018)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Ji, Y., Bai, H., Yang, J., et al.: Amos: A large-scale abdominal multi-organ benchmark for versatile medical image segmentation. arXiv:2206.08023 (2022)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Jia, H., Cai, W., Huang, H., Xia, Y.: H2nf-net for brain tumor segmentation using multimodal mr imaging: 2nd place solution to brats challenge 2020 segmentation task. In: Brainlesion: Glioma, Multiple Sclerosis, Stroke and Traumatic Brain Injuries. pp. 58–68. Springer International Publishing, Cham (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Kirillov, A., Mintun, E., Ravi, N., et al.: Segment anything. arXiv:2304.02643 (2023)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Kiser, K.J., Barman, A., Stieb, S., et al.: Novel autosegmentation spatial similarity metrics capture the time required to correct segmentations better than traditional metrics in a thoracic cavity segmentation workflow. Journal of Digital Imaging <span class="ltx_text ltx_font_bold" id="bib.bib19.1.1">34</span>, 541–553 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Kiser, K., Ahmed, S., Stieb, S., et al.: Data from the thoracic volume and pleural effusion segmentations in diseased lungs for benchmarking chest ct processing pipelines. The Cancer Imaging Archive (2020)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Litjens, G., Toth, R., van de Ven, W., et al.: Evaluation of prostate segmentation algorithms for mri: the promise12 challenge. Medical Image Analysis <span class="ltx_text ltx_font_bold" id="bib.bib21.1.1">18</span>(2), 359–373 (2014)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Ma, J., He, Y., Li, F., Han, L., You, C., Wang, B.: Segment anything in medical images. Nature Communications <span class="ltx_text ltx_font_bold" id="bib.bib22.1.1">15</span>(1),  654 (2024)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Ma, J., Wang, Y., An, X., et al.: Towards data-efficient learning: A benchmark for covid-19 ct lung and infection segmentation. Medical Physics <span class="ltx_text ltx_font_bold" id="bib.bib23.1.1">48</span>(3), 1197–1210 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Ma, J., Zhang, Y., Gu, S., et al.: Abdomenct-1k: Is abdominal organ segmentation a solved problem? IEEE Transactions on Pattern Analysis and Machine Intelligence <span class="ltx_text ltx_font_bold" id="bib.bib24.1.1">44</span>(10), 6695–6714 (2022)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Ma, J., Zhang, Y., Gu, S., et al.: Fast and low-gpu-memory abdomen ct organ segmentation: The flare challenge. Medical Image Analysis <span class="ltx_text ltx_font_bold" id="bib.bib25.1.1">82</span>, 102616 (2022)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Shiraishi, J., Katsuragawa, S., Ikezoe, J., et al.: Development of a digital image database for chest radiographs with and without a lung nodule: receiver operating characteristic analysis of radiologists’ detection of pulmonary nodules. American Journal of Roentgenology <span class="ltx_text ltx_font_bold" id="bib.bib26.1.1">174</span>(1), 71–74 (2000)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Shusharina, N., Bortfeld, T., Cardenas, C., Yang, J.: Anatomical brain barriers to cancer spread: Segmentation from ct and mr images (2020), <a class="ltx_ref" href="https://doi.org/10.5281/zenodo.3746561" title="">https://doi.org/10.5281/zenodo.3746561</a>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Simpson, A.L., Antonelli, M., Bakas, S., et al.: A large annotated medical image dataset for the development and evaluation of segmentation algorithms. arXiv:1902.09063 (2019)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Sirinukunwattana, K., Pluim, J.P., Chen, H., et al.: Gland segmentation in colon histology images: The glas challenge contest. Medical Image Analysis <span class="ltx_text ltx_font_bold" id="bib.bib29.1.1">35</span>, 489–502 (2017)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
Sirinukunwattana, K., Snead, D.R., Rajpoot, N.M.: A stochastic polygons model for glandular structures in colon histology images. IEEE Transactions on Medical Imaging <span class="ltx_text ltx_font_bold" id="bib.bib30.1.1">34</span>(11), 2366–2378 (2015)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Tan, M., Le, Q.: Efficientnetv2: Smaller models and faster training. In: International conference on machine learning. pp. 10096–10106 (2021)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Zhou, Z., Rahman Siddiquee, M.M., et al.: Unet++: A nested u-net architecture for medical image segmentation. arXiv:1807.10165 (2018)

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
Zhu, X., Su, W., Lu, L., et al.: Deformable detr: Deformable transformers for end-to-end object detection. arXiv:2010.04159 (2020)

</span>
</li>
</ul>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Sat Oct  5 14:31:15 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
