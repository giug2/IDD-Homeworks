<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!</title>
<!--Generated on Sat Oct 12 22:28:27 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<meta content="
Large language Models,  retrieval-augmented generation,  program synthesis,  commit message generation. assertion generation,  approximate nearest neighbour search
" lang="en" name="keywords"/>
<base href="/html/2410.09662v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S1" title="In Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">I </span><span class="ltx_text ltx_font_smallcaps">Introduction</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S2" title="In Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">II </span><span class="ltx_text ltx_font_smallcaps">Background</span></span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S2.SS1" title="In II Background ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">II-A</span> </span><span class="ltx_text ltx_font_italic">Retrieval Augmentation Generation</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S2.SS2" title="In II Background ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">II-B</span> </span><span class="ltx_text ltx_font_italic">Retrieval Approach</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S2.SS3" title="In II Background ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">II-C</span> </span><span class="ltx_text ltx_font_italic">Related work</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3" title="In Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">III </span><span class="ltx_text ltx_font_smallcaps">Experimental Design</span></span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.SS1" title="In III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">III-A</span> </span><span class="ltx_text ltx_font_italic">Research Question</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.SS2" title="In III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">III-B</span> </span><span class="ltx_text ltx_font_italic">Dataset and Metric</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.SS3" title="In III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">III-C</span> </span><span class="ltx_text ltx_font_italic">Studied Retrievers</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.SS4" title="In III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">III-D</span> </span><span class="ltx_text ltx_font_italic">Prompt Templates</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.SS5" title="In III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">III-E</span> </span><span class="ltx_text ltx_font_italic">Implementation details</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.SS6" title="In III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">III-F</span> </span><span class="ltx_text ltx_font_italic">Approach of RQs</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4" title="In Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">IV </span><span class="ltx_text ltx_font_smallcaps">RESULTS</span></span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.SS1" title="In IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">IV-A</span> </span><span class="ltx_text ltx_font_italic">RQ1 - Effectiveness</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.SS2" title="In IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">IV-B</span> </span><span class="ltx_text ltx_font_italic">RQ2 - Efficiency</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.SS3" title="In IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">IV-C</span> </span><span class="ltx_text ltx_font_italic">RQ3 - Trade-off between Efficiency and Effectiveness</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.SS4" title="In IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">IV-D</span> </span><span class="ltx_text ltx_font_italic">RQ4 - Impact of the Hyper-parameters</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.SS5" title="In IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">IV-E</span> </span><span class="ltx_text ltx_font_italic">RQ5 - Impact of Number of Shots</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S5" title="In Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">V </span><span class="ltx_text ltx_font_smallcaps">Discussion</span></span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S5.SS1" title="In V Discussion ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">V-A</span> </span><span class="ltx_text ltx_font_italic">Implications of our study</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S5.SS2" title="In V Discussion ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref"><span class="ltx_text">V-B</span> </span><span class="ltx_text ltx_font_italic">Threats to validity</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S6" title="In Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">VI </span><span class="ltx_text ltx_font_smallcaps">Conclusion</span></span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Pengfei He, Shaowei Wang, Shaiful Chowdhury
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_font_italic" id="id2.1.id1">University of Manitoba</span>
<br class="ltx_break"/><span class="ltx_text ltx_font_italic" id="id3.2.id2">Canada
<br class="ltx_break"/></span>hep2@myumanitoba.ca, {shaowei.wang, shaiful.chowdhury}@umanitoba.ca

</span></span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Tse-Hsun Chen
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_font_italic" id="id4.1.id1">Concordia University
<br class="ltx_break"/>Canada</span>
<br class="ltx_break"/>peterc@encs.concordia.ca
</span></span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id1.1">Retrieval-Augmented Generation (RAG) enhances Large Language Models (LLMs) by integrating external knowledge bases, achieving state-of-the-art results in various coding tasks. The core of RAG is retrieving demonstration examples, which is essential to balance effectiveness (generation quality) and efficiency (retrieval time) for optimal performance. However, the high-dimensional nature of code representations and large knowledge bases often create efficiency bottlenecks, which are overlooked in previous research. This paper systematically evaluates the efficiency-effectiveness trade-off of retrievers across three coding tasks: Program Synthesis, Commit Message Generation, and Assertion Generation. We examined six retrievers: two sparse (BM25 and BM25L) and four dense retrievers, including one exhaustive dense retriever (SBERT’s Semantic Search) and three approximate dense retrievers (ANNOY, LSH, and HNSW). Our findings show that while BM25 excels in effectiveness, it suffers in efficiency as the knowledge base grows beyond <math alttext="10^{3}" class="ltx_Math" display="inline" id="id1.1.m1.1"><semantics id="id1.1.m1.1a"><msup id="id1.1.m1.1.1" xref="id1.1.m1.1.1.cmml"><mn id="id1.1.m1.1.1.2" xref="id1.1.m1.1.1.2.cmml">10</mn><mn id="id1.1.m1.1.1.3" xref="id1.1.m1.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="id1.1.m1.1b"><apply id="id1.1.m1.1.1.cmml" xref="id1.1.m1.1.1"><csymbol cd="ambiguous" id="id1.1.m1.1.1.1.cmml" xref="id1.1.m1.1.1">superscript</csymbol><cn id="id1.1.m1.1.1.2.cmml" type="integer" xref="id1.1.m1.1.1.2">10</cn><cn id="id1.1.m1.1.1.3.cmml" type="integer" xref="id1.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="id1.1.m1.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="id1.1.m1.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math> entries. In large-scale retrieval, efficiency differences become more pronounced, with approximate dense retrievers offering the greatest gains.
For instance, in Commit Generation task, HNSW achieves a 44x speed up, while only with a 1.74% drop in RougeL compared with BM25. Our results also show that increasing the number of demonstrations in the prompt doesn’t always improve the effectiveness and can increase latency and lead to incorrect outputs. Our
findings provide valuable insights for practitioners aiming to build efficient and effective RAG systems for coding tasks.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Index Terms: </h6>
Large language Models, retrieval-augmented generation, program synthesis, commit message generation. assertion generation, approximate nearest neighbour search

</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">I </span><span class="ltx_text ltx_font_smallcaps" id="S1.1.1">Introduction</span>
</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Large language models (LLMs) have achieved remarkable success in natural language processing, but they still encounter significant limitations in the domain of knowledge-intensive tasks. In particular, LLMs are susceptible to “hallucinations” when confronted with queries that exceed the scope of their training data or necessitate the utilization of current information <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib1" title="">1</a>]</cite>. Retrieval-Augmented Generation (RAG) is the leading technique for improving LLMs by providing demonstrations from knowledge bases. By referencing external knowledge sources, RAG effectively mitigates the problem of generating factual inconsistency content and facilitates the continuous updating of knowledge <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib2" title="">2</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Recently, the application of RAG has achieved promising results for various code-specific tasks such as Code Search <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib3" title="">3</a>]</cite>, Program Synthesis <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib5" title="">5</a>]</cite>, and Assertion Generation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>]</cite>. In these tasks, LLM learns from contextual prompts consisting of task descriptions, queries, and additional demonstration examples without the need to fine-tune the model parameters. The retrieved demonstrations are typically used as the context to assist the pre-trained LLM in comprehending the task and regulating the generation behavior, which usually has a significant impact on the quality of the generated output. Therefore, it is important to retrieve appropriate demonstrations from a vast knowledge base.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">The retriever plays a core role in retrieving relevant demonstrations from the external knowledge base and significantly affects the performance of RAG <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib7" title="">7</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib8" title="">8</a>]</cite>. Retrievers are typically classified into sparse and dense retrievers based on representation methods. Sparse retrievers operate at the token level, while dense retrievers operate at the level of latent semantics. The most widely-used sparse retriever, BM25 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib9" title="">9</a>]</cite>, ranks demonstrations based on term frequency (TF) and inverse document frequency (IDF) of the query. Dense retrievers perform retrieval by encoding the query and demonstrations into dense embedding representations and scoring each demonstration by its similarity with the query embedding. For instance, the popular RAG system Llamaindex <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib10" title="">10</a>]</cite> supports both BM25 and custom embedding encoders in RAG workflow. Similarly, recent approaches for coding tasks, such as the work by Nashid et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>]</cite>, Zhou et al.  <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib5" title="">5</a>]</cite>, and Gao et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite> use both BM25 and BERT-based encoder (e.g., SBERT <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib11" title="">11</a>]</cite> and Unixcoder <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib12" title="">12</a>]</cite>) to select code samples from their demonstration pools. In these studies, RAG demonstrated superior performance compared to task-specific models across a range of code-related tasks, highlighting the critical role of retrieving semantically relevant demonstrations.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.2">When deploying RAG systems, it is essential to achieve a balance between “effectiveness” (quality of the generated results) and “efficiency” (runtime of demonstrations retrieval), typically when knowledge base is large. However, existing studies in the RAG for code-specific tasks lack attention to efficiency and have some limitations. <span class="ltx_text ltx_font_bold" id="S1.p4.2.1">(1) Insufficient trade-off consideration:</span> When RAG is implemented on a large scale, significant retrieval time gaps are observed between different retrievers. For instance, after our preliminary evaluation of the Assertion Generation Task <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib13" title="">13</a>]</cite> with a knowledge base size of 150k, we found that BM25 is more than two times slower per retrieval compared to SBERT’s Semantic Search while yielding only a 1% improvement in the Exact Match rate. <span class="ltx_text ltx_font_bold" id="S1.p4.2.2">(2) High complexity of Exhaustive Nearest Neighbor Search:</span> Exhaustive dense retrievers depend on performing an exhaustive nearest neighbor search after encoding, requiring a linear scan across the entire knowledge base to find the most relevant demonstrations. For instance, SBERT’s Semantic Search, which utilizes 768-dimensional SBERT embeddings, results in a computational complexity of <math alttext="O(768n)" class="ltx_Math" display="inline" id="S1.p4.1.m1.1"><semantics id="S1.p4.1.m1.1a"><mrow id="S1.p4.1.m1.1.1" xref="S1.p4.1.m1.1.1.cmml"><mi id="S1.p4.1.m1.1.1.3" xref="S1.p4.1.m1.1.1.3.cmml">O</mi><mo id="S1.p4.1.m1.1.1.2" xref="S1.p4.1.m1.1.1.2.cmml">⁢</mo><mrow id="S1.p4.1.m1.1.1.1.1" xref="S1.p4.1.m1.1.1.1.1.1.cmml"><mo id="S1.p4.1.m1.1.1.1.1.2" stretchy="false" xref="S1.p4.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S1.p4.1.m1.1.1.1.1.1" xref="S1.p4.1.m1.1.1.1.1.1.cmml"><mn id="S1.p4.1.m1.1.1.1.1.1.2" xref="S1.p4.1.m1.1.1.1.1.1.2.cmml">768</mn><mo id="S1.p4.1.m1.1.1.1.1.1.1" xref="S1.p4.1.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="S1.p4.1.m1.1.1.1.1.1.3" xref="S1.p4.1.m1.1.1.1.1.1.3.cmml">n</mi></mrow><mo id="S1.p4.1.m1.1.1.1.1.3" stretchy="false" xref="S1.p4.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.1.m1.1b"><apply id="S1.p4.1.m1.1.1.cmml" xref="S1.p4.1.m1.1.1"><times id="S1.p4.1.m1.1.1.2.cmml" xref="S1.p4.1.m1.1.1.2"></times><ci id="S1.p4.1.m1.1.1.3.cmml" xref="S1.p4.1.m1.1.1.3">𝑂</ci><apply id="S1.p4.1.m1.1.1.1.1.1.cmml" xref="S1.p4.1.m1.1.1.1.1"><times id="S1.p4.1.m1.1.1.1.1.1.1.cmml" xref="S1.p4.1.m1.1.1.1.1.1.1"></times><cn id="S1.p4.1.m1.1.1.1.1.1.2.cmml" type="integer" xref="S1.p4.1.m1.1.1.1.1.1.2">768</cn><ci id="S1.p4.1.m1.1.1.1.1.1.3.cmml" xref="S1.p4.1.m1.1.1.1.1.1.3">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.1.m1.1c">O(768n)</annotation><annotation encoding="application/x-llamapun" id="S1.p4.1.m1.1d">italic_O ( 768 italic_n )</annotation></semantics></math> when searching through a knowledge base with <math alttext="n" class="ltx_Math" display="inline" id="S1.p4.2.m2.1"><semantics id="S1.p4.2.m2.1a"><mi id="S1.p4.2.m2.1.1" xref="S1.p4.2.m2.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S1.p4.2.m2.1b"><ci id="S1.p4.2.m2.1.1.cmml" xref="S1.p4.2.m2.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.2.m2.1c">n</annotation><annotation encoding="application/x-llamapun" id="S1.p4.2.m2.1d">italic_n</annotation></semantics></math> entries. This high computational overhead makes the approach inefficient, severely limiting the scalability of RAG systems, particularly when working with large-scale code knowledge bases.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">To address these limitations, we conducted a comprehensive study to assess the effectiveness and efficiency of various retrievers in coding tasks utilizing RAG. Specifically, we evaluated six retrievers across three tasks: Program Synthesis, Commit Message Generation, and Assertion Generation. For sparse retrievers, we used BM25 and its variant, BM25L <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib14" title="">14</a>]</cite>. For dense retrievers, we first encoded queries and demonstrations of knowledge base as embedding vectors using SBERT <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib11" title="">11</a>]</cite>. We then employed two types of search strategies, Exhaustive and Approximate Nearest Neighbor (ANN) search, to find the demonstration in a knowledge base that is closest to a query data point. SBERT’s Semantic Search (SBERT_SS) is a widely-used exhaustive dense retriever <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib15" title="">15</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>]</cite>, performing a linear scan by calculating cosine similarity between the query and all demonstrations in the knowledge base. In contrast, we introduced three ANN-based approaches for approximate dense retrieval: Approximate Nearest Neighbors Oh Yeah (ANNOY)<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib16" title="">16</a>]</cite>, Locality-Sensitive Hashing (LSH)<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib17" title="">17</a>]</cite>, and Hierarchical Navigable Small World (HNSW) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib18" title="">18</a>]</cite>. Unlike exhaustive retrieval, these approximate approaches retrieve a subset of relevant demonstrations using approximation algorithms, significantly speeding up the retrieval process by limiting the search to a smaller subset rather than the entire knowledge base.</p>
</div>
<div class="ltx_para" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">We find that while the sparse retriever BM25 excels in effectiveness, its efficiency becomes the worst when the knowledge base exceeds <math alttext="10^{3}" class="ltx_Math" display="inline" id="S1.p6.1.m1.1"><semantics id="S1.p6.1.m1.1a"><msup id="S1.p6.1.m1.1.1" xref="S1.p6.1.m1.1.1.cmml"><mn id="S1.p6.1.m1.1.1.2" xref="S1.p6.1.m1.1.1.2.cmml">10</mn><mn id="S1.p6.1.m1.1.1.3" xref="S1.p6.1.m1.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S1.p6.1.m1.1b"><apply id="S1.p6.1.m1.1.1.cmml" xref="S1.p6.1.m1.1.1"><csymbol cd="ambiguous" id="S1.p6.1.m1.1.1.1.cmml" xref="S1.p6.1.m1.1.1">superscript</csymbol><cn id="S1.p6.1.m1.1.1.2.cmml" type="integer" xref="S1.p6.1.m1.1.1.2">10</cn><cn id="S1.p6.1.m1.1.1.3.cmml" type="integer" xref="S1.p6.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p6.1.m1.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="S1.p6.1.m1.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math> entries. For larger-scale retrieval, approximate dense retrievers offer significant efficiency gains, achieving a better trade-off between efficiency and effectiveness. For example, in the Commit Generation task, HNSW delivers a 44x speedup with only a 1.74% drop in RougeL compared to BM25. However, a high degree of approximation, while improving efficiency, may reduce retrieval precision and impact overall effectiveness. Additionally, we observe that adding more demonstrations to the prompt does not necessarily enhance RAG effectiveness, often increasing response latency and leading to incorrect outputs. These findings provide important insights for practitioners aiming to build efficient and effective RAG systems for coding tasks.</p>
</div>
<div class="ltx_para" id="S1.p7">
<p class="ltx_p" id="S1.p7.1">In summary, the contributions of our paper include:</p>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We conducted the first systematic study to assess both the efficiency and effectiveness of various retrievers in RAG for coding tasks with extensive experiments.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">Our findings provide actionable insights into the selection of retrievers for practitioners aiming to implement RAG for code-specific tasks. <span class="ltx_text ltx_font_bold" id="S1.I1.i2.p1.1.1">Yeas 1:</span> Using approximate approaches (e.g., HNSW and LSH) for RAG can significantly speed up retrieval with negligible degradation in generation quality for large knowledge bases (e.g., exceeds <math alttext="10^{3}" class="ltx_Math" display="inline" id="S1.I1.i2.p1.1.m1.1"><semantics id="S1.I1.i2.p1.1.m1.1a"><msup id="S1.I1.i2.p1.1.m1.1.1" xref="S1.I1.i2.p1.1.m1.1.1.cmml"><mn id="S1.I1.i2.p1.1.m1.1.1.2" xref="S1.I1.i2.p1.1.m1.1.1.2.cmml">10</mn><mn id="S1.I1.i2.p1.1.m1.1.1.3" xref="S1.I1.i2.p1.1.m1.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S1.I1.i2.p1.1.m1.1b"><apply id="S1.I1.i2.p1.1.m1.1.1.cmml" xref="S1.I1.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S1.I1.i2.p1.1.m1.1.1.1.cmml" xref="S1.I1.i2.p1.1.m1.1.1">superscript</csymbol><cn id="S1.I1.i2.p1.1.m1.1.1.2.cmml" type="integer" xref="S1.I1.i2.p1.1.m1.1.1.2">10</cn><cn id="S1.I1.i2.p1.1.m1.1.1.3.cmml" type="integer" xref="S1.I1.i2.p1.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.I1.i2.p1.1.m1.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="S1.I1.i2.p1.1.m1.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math> entries). <span class="ltx_text ltx_font_bold" id="S1.I1.i2.p1.1.2">Yeas 2:</span> Using sparse retrievers such as BM25 which excels in effectiveness when the knowledge base is small. <span class="ltx_text ltx_font_bold" id="S1.I1.i2.p1.1.3">Nays1: </span> Be cautious! More demonstrations do not necessarily guarantee better generation.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">We release our replication package <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib19" title="">19</a>]</cite> to facilitate future research.</p>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">II </span><span class="ltx_text ltx_font_smallcaps" id="S2.1.1">Background</span>
</h2>
<figure class="ltx_figure" id="S2.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="371" id="S2.F1.g1" src="x1.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>The general framework of RAG for coding tasks.</figcaption>
</figure>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S2.SS1.4.1.1">II-A</span> </span><span class="ltx_text ltx_font_italic" id="S2.SS1.5.2">Retrieval Augmentation Generation</span>
</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">RAG is the leading prompt engineering technique designed to enhance the output of LLMs by integrating external knowledge through a two-phase process: <span class="ltx_text ltx_font_bold" id="S2.SS1.p1.1.1">Retrieval</span> and <span class="ltx_text ltx_font_bold" id="S2.SS1.p1.1.2">Generation</span>. The primary purpose of RAG is to provide LLMs with relevant demonstrations as context, thereby improving its ability to generate accurate and context-relevant outputs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib2" title="">2</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S2.SS1.p2">
<p class="ltx_p" id="S2.SS1.p2.7">In the <span class="ltx_text ltx_font_bold" id="S2.SS1.p2.7.1">Retrieval</span> phase, the objective is to retrieve demonstrations that are highly relevant to the query for the subsequent <span class="ltx_text ltx_font_bold" id="S2.SS1.p2.7.2">Generation</span> phase. For example, as depicted in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S2.F1" title="Figure 1 ‣ II Background ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">1</span></a> in the context of a Program Synthesis task, the process begins with a query input <math alttext="I_{query}" class="ltx_Math" display="inline" id="S2.SS1.p2.1.m1.1"><semantics id="S2.SS1.p2.1.m1.1a"><msub id="S2.SS1.p2.1.m1.1.1" xref="S2.SS1.p2.1.m1.1.1.cmml"><mi id="S2.SS1.p2.1.m1.1.1.2" xref="S2.SS1.p2.1.m1.1.1.2.cmml">I</mi><mrow id="S2.SS1.p2.1.m1.1.1.3" xref="S2.SS1.p2.1.m1.1.1.3.cmml"><mi id="S2.SS1.p2.1.m1.1.1.3.2" xref="S2.SS1.p2.1.m1.1.1.3.2.cmml">q</mi><mo id="S2.SS1.p2.1.m1.1.1.3.1" xref="S2.SS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S2.SS1.p2.1.m1.1.1.3.3" xref="S2.SS1.p2.1.m1.1.1.3.3.cmml">u</mi><mo id="S2.SS1.p2.1.m1.1.1.3.1a" xref="S2.SS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S2.SS1.p2.1.m1.1.1.3.4" xref="S2.SS1.p2.1.m1.1.1.3.4.cmml">e</mi><mo id="S2.SS1.p2.1.m1.1.1.3.1b" xref="S2.SS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S2.SS1.p2.1.m1.1.1.3.5" xref="S2.SS1.p2.1.m1.1.1.3.5.cmml">r</mi><mo id="S2.SS1.p2.1.m1.1.1.3.1c" xref="S2.SS1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="S2.SS1.p2.1.m1.1.1.3.6" xref="S2.SS1.p2.1.m1.1.1.3.6.cmml">y</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.1.m1.1b"><apply id="S2.SS1.p2.1.m1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.1.m1.1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1">subscript</csymbol><ci id="S2.SS1.p2.1.m1.1.1.2.cmml" xref="S2.SS1.p2.1.m1.1.1.2">𝐼</ci><apply id="S2.SS1.p2.1.m1.1.1.3.cmml" xref="S2.SS1.p2.1.m1.1.1.3"><times id="S2.SS1.p2.1.m1.1.1.3.1.cmml" xref="S2.SS1.p2.1.m1.1.1.3.1"></times><ci id="S2.SS1.p2.1.m1.1.1.3.2.cmml" xref="S2.SS1.p2.1.m1.1.1.3.2">𝑞</ci><ci id="S2.SS1.p2.1.m1.1.1.3.3.cmml" xref="S2.SS1.p2.1.m1.1.1.3.3">𝑢</ci><ci id="S2.SS1.p2.1.m1.1.1.3.4.cmml" xref="S2.SS1.p2.1.m1.1.1.3.4">𝑒</ci><ci id="S2.SS1.p2.1.m1.1.1.3.5.cmml" xref="S2.SS1.p2.1.m1.1.1.3.5">𝑟</ci><ci id="S2.SS1.p2.1.m1.1.1.3.6.cmml" xref="S2.SS1.p2.1.m1.1.1.3.6">𝑦</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.1.m1.1c">I_{query}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.1.m1.1d">italic_I start_POSTSUBSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUBSCRIPT</annotation></semantics></math> asking how to implement a specific function. The retriever returns Top <math alttext="K" class="ltx_Math" display="inline" id="S2.SS1.p2.2.m2.1"><semantics id="S2.SS1.p2.2.m2.1a"><mi id="S2.SS1.p2.2.m2.1.1" xref="S2.SS1.p2.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.2.m2.1b"><ci id="S2.SS1.p2.2.m2.1.1.cmml" xref="S2.SS1.p2.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.2.m2.1c">K</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.2.m2.1d">italic_K</annotation></semantics></math> relevant demonstrations, forming the set <math alttext="D_{K}" class="ltx_Math" display="inline" id="S2.SS1.p2.3.m3.1"><semantics id="S2.SS1.p2.3.m3.1a"><msub id="S2.SS1.p2.3.m3.1.1" xref="S2.SS1.p2.3.m3.1.1.cmml"><mi id="S2.SS1.p2.3.m3.1.1.2" xref="S2.SS1.p2.3.m3.1.1.2.cmml">D</mi><mi id="S2.SS1.p2.3.m3.1.1.3" xref="S2.SS1.p2.3.m3.1.1.3.cmml">K</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.3.m3.1b"><apply id="S2.SS1.p2.3.m3.1.1.cmml" xref="S2.SS1.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.3.m3.1.1.1.cmml" xref="S2.SS1.p2.3.m3.1.1">subscript</csymbol><ci id="S2.SS1.p2.3.m3.1.1.2.cmml" xref="S2.SS1.p2.3.m3.1.1.2">𝐷</ci><ci id="S2.SS1.p2.3.m3.1.1.3.cmml" xref="S2.SS1.p2.3.m3.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.3.m3.1c">D_{K}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.3.m3.1d">italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT</annotation></semantics></math>, where each demonstration <math alttext="demo_{i}" class="ltx_Math" display="inline" id="S2.SS1.p2.4.m4.1"><semantics id="S2.SS1.p2.4.m4.1a"><mrow id="S2.SS1.p2.4.m4.1.1" xref="S2.SS1.p2.4.m4.1.1.cmml"><mi id="S2.SS1.p2.4.m4.1.1.2" xref="S2.SS1.p2.4.m4.1.1.2.cmml">d</mi><mo id="S2.SS1.p2.4.m4.1.1.1" xref="S2.SS1.p2.4.m4.1.1.1.cmml">⁢</mo><mi id="S2.SS1.p2.4.m4.1.1.3" xref="S2.SS1.p2.4.m4.1.1.3.cmml">e</mi><mo id="S2.SS1.p2.4.m4.1.1.1a" xref="S2.SS1.p2.4.m4.1.1.1.cmml">⁢</mo><mi id="S2.SS1.p2.4.m4.1.1.4" xref="S2.SS1.p2.4.m4.1.1.4.cmml">m</mi><mo id="S2.SS1.p2.4.m4.1.1.1b" xref="S2.SS1.p2.4.m4.1.1.1.cmml">⁢</mo><msub id="S2.SS1.p2.4.m4.1.1.5" xref="S2.SS1.p2.4.m4.1.1.5.cmml"><mi id="S2.SS1.p2.4.m4.1.1.5.2" xref="S2.SS1.p2.4.m4.1.1.5.2.cmml">o</mi><mi id="S2.SS1.p2.4.m4.1.1.5.3" xref="S2.SS1.p2.4.m4.1.1.5.3.cmml">i</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.4.m4.1b"><apply id="S2.SS1.p2.4.m4.1.1.cmml" xref="S2.SS1.p2.4.m4.1.1"><times id="S2.SS1.p2.4.m4.1.1.1.cmml" xref="S2.SS1.p2.4.m4.1.1.1"></times><ci id="S2.SS1.p2.4.m4.1.1.2.cmml" xref="S2.SS1.p2.4.m4.1.1.2">𝑑</ci><ci id="S2.SS1.p2.4.m4.1.1.3.cmml" xref="S2.SS1.p2.4.m4.1.1.3">𝑒</ci><ci id="S2.SS1.p2.4.m4.1.1.4.cmml" xref="S2.SS1.p2.4.m4.1.1.4">𝑚</ci><apply id="S2.SS1.p2.4.m4.1.1.5.cmml" xref="S2.SS1.p2.4.m4.1.1.5"><csymbol cd="ambiguous" id="S2.SS1.p2.4.m4.1.1.5.1.cmml" xref="S2.SS1.p2.4.m4.1.1.5">subscript</csymbol><ci id="S2.SS1.p2.4.m4.1.1.5.2.cmml" xref="S2.SS1.p2.4.m4.1.1.5.2">𝑜</ci><ci id="S2.SS1.p2.4.m4.1.1.5.3.cmml" xref="S2.SS1.p2.4.m4.1.1.5.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.4.m4.1c">demo_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.4.m4.1d">italic_d italic_e italic_m italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is composed of similar requirements <math alttext="I_{i}" class="ltx_Math" display="inline" id="S2.SS1.p2.5.m5.1"><semantics id="S2.SS1.p2.5.m5.1a"><msub id="S2.SS1.p2.5.m5.1.1" xref="S2.SS1.p2.5.m5.1.1.cmml"><mi id="S2.SS1.p2.5.m5.1.1.2" xref="S2.SS1.p2.5.m5.1.1.2.cmml">I</mi><mi id="S2.SS1.p2.5.m5.1.1.3" xref="S2.SS1.p2.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.5.m5.1b"><apply id="S2.SS1.p2.5.m5.1.1.cmml" xref="S2.SS1.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.5.m5.1.1.1.cmml" xref="S2.SS1.p2.5.m5.1.1">subscript</csymbol><ci id="S2.SS1.p2.5.m5.1.1.2.cmml" xref="S2.SS1.p2.5.m5.1.1.2">𝐼</ci><ci id="S2.SS1.p2.5.m5.1.1.3.cmml" xref="S2.SS1.p2.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.5.m5.1c">I_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.5.m5.1d">italic_I start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and corresponding code snippets <math alttext="O_{i}" class="ltx_Math" display="inline" id="S2.SS1.p2.6.m6.1"><semantics id="S2.SS1.p2.6.m6.1a"><msub id="S2.SS1.p2.6.m6.1.1" xref="S2.SS1.p2.6.m6.1.1.cmml"><mi id="S2.SS1.p2.6.m6.1.1.2" xref="S2.SS1.p2.6.m6.1.1.2.cmml">O</mi><mi id="S2.SS1.p2.6.m6.1.1.3" xref="S2.SS1.p2.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.6.m6.1b"><apply id="S2.SS1.p2.6.m6.1.1.cmml" xref="S2.SS1.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.6.m6.1.1.1.cmml" xref="S2.SS1.p2.6.m6.1.1">subscript</csymbol><ci id="S2.SS1.p2.6.m6.1.1.2.cmml" xref="S2.SS1.p2.6.m6.1.1.2">𝑂</ci><ci id="S2.SS1.p2.6.m6.1.1.3.cmml" xref="S2.SS1.p2.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.6.m6.1c">O_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.6.m6.1d">italic_O start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> as represented by <math alttext="D_{K}=\{demo1:(I_{1},O_{1}),demo2:(I_{2},O_{2}),\dots,demoK:(I_{K},O_{K})\}" class="ltx_Math" display="inline" id="S2.SS1.p2.7.m7.3"><semantics id="S2.SS1.p2.7.m7.3a"><mrow id="S2.SS1.p2.7.m7.3.3" xref="S2.SS1.p2.7.m7.3.3.cmml"><msub id="S2.SS1.p2.7.m7.3.3.4" xref="S2.SS1.p2.7.m7.3.3.4.cmml"><mi id="S2.SS1.p2.7.m7.3.3.4.2" xref="S2.SS1.p2.7.m7.3.3.4.2.cmml">D</mi><mi id="S2.SS1.p2.7.m7.3.3.4.3" xref="S2.SS1.p2.7.m7.3.3.4.3.cmml">K</mi></msub><mo id="S2.SS1.p2.7.m7.3.3.3" xref="S2.SS1.p2.7.m7.3.3.3.cmml">=</mo><mrow id="S2.SS1.p2.7.m7.3.3.2.2" xref="S2.SS1.p2.7.m7.3.3.2.3.cmml"><mo id="S2.SS1.p2.7.m7.3.3.2.2.3" stretchy="false" xref="S2.SS1.p2.7.m7.3.3.2.3.1.cmml">{</mo><mrow id="S2.SS1.p2.7.m7.2.2.1.1.1" xref="S2.SS1.p2.7.m7.2.2.1.1.1.cmml"><mi id="S2.SS1.p2.7.m7.2.2.1.1.1.2" xref="S2.SS1.p2.7.m7.2.2.1.1.1.2.cmml">d</mi><mo id="S2.SS1.p2.7.m7.2.2.1.1.1.1" xref="S2.SS1.p2.7.m7.2.2.1.1.1.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.2.2.1.1.1.3" xref="S2.SS1.p2.7.m7.2.2.1.1.1.3.cmml">e</mi><mo id="S2.SS1.p2.7.m7.2.2.1.1.1.1a" xref="S2.SS1.p2.7.m7.2.2.1.1.1.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.2.2.1.1.1.4" xref="S2.SS1.p2.7.m7.2.2.1.1.1.4.cmml">m</mi><mo id="S2.SS1.p2.7.m7.2.2.1.1.1.1b" xref="S2.SS1.p2.7.m7.2.2.1.1.1.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.2.2.1.1.1.5" xref="S2.SS1.p2.7.m7.2.2.1.1.1.5.cmml">o</mi><mo id="S2.SS1.p2.7.m7.2.2.1.1.1.1c" xref="S2.SS1.p2.7.m7.2.2.1.1.1.1.cmml">⁢</mo><mn id="S2.SS1.p2.7.m7.2.2.1.1.1.6" xref="S2.SS1.p2.7.m7.2.2.1.1.1.6.cmml">1</mn></mrow><mo id="S2.SS1.p2.7.m7.3.3.2.2.4" lspace="0.278em" rspace="0.278em" xref="S2.SS1.p2.7.m7.3.3.2.3.1.cmml">:</mo><mrow id="S2.SS1.p2.7.m7.3.3.2.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.cmml"><mrow id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.3.cmml"><mrow id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.3.cmml"><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.3" stretchy="false" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.3.cmml">(</mo><msub id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.cmml"><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.2.cmml">I</mi><mn id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.3.cmml">1</mn></msub><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.4" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.3.cmml">,</mo><msub id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.cmml"><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.2.cmml">O</mi><mn id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.3.cmml">1</mn></msub><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.5" stretchy="false" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.3.cmml">)</mo></mrow><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.3.cmml">,</mo><mrow id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.cmml"><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.2.cmml">d</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.3.cmml">e</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1a" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.4" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.4.cmml">m</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1b" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.5" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.5.cmml">o</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1c" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1.cmml">⁢</mo><mn id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.6" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.6.cmml">2</mn></mrow></mrow><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.8" lspace="0.278em" rspace="0.278em" xref="S2.SS1.p2.7.m7.3.3.2.2.2.8.cmml">:</mo><mrow id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.3.cmml"><mrow id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.3.cmml"><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.3" stretchy="false" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.3.cmml">(</mo><msub id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.cmml"><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.2.cmml">I</mi><mn id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.3.cmml">2</mn></msub><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.4" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.3.cmml">,</mo><msub id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.cmml"><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.2.cmml">O</mi><mn id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.3.cmml">2</mn></msub><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.5" stretchy="false" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.3.cmml">)</mo></mrow><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.3.cmml">,</mo><mi id="S2.SS1.p2.7.m7.1.1" mathvariant="normal" xref="S2.SS1.p2.7.m7.1.1.cmml">…</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.4" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.3.cmml">,</mo><mrow id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.cmml"><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.2.cmml">d</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.3.cmml">e</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1a" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.4" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.4.cmml">m</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1b" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.5" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.5.cmml">o</mi><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1c" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1.cmml">⁢</mo><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.6" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.6.cmml">K</mi></mrow></mrow><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.9" lspace="0.278em" rspace="0.278em" xref="S2.SS1.p2.7.m7.3.3.2.2.2.9.cmml">:</mo><mrow id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.3.cmml"><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.3" stretchy="false" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.3.cmml">(</mo><msub id="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1" xref="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.cmml"><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.2.cmml">I</mi><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.3.cmml">K</mi></msub><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.4" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.3.cmml">,</mo><msub id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.cmml"><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.2" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.2.cmml">O</mi><mi id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.3" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.3.cmml">K</mi></msub><mo id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.5" stretchy="false" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.3.cmml">)</mo></mrow></mrow><mo id="S2.SS1.p2.7.m7.3.3.2.2.5" stretchy="false" xref="S2.SS1.p2.7.m7.3.3.2.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.7.m7.3b"><apply id="S2.SS1.p2.7.m7.3.3.cmml" xref="S2.SS1.p2.7.m7.3.3"><eq id="S2.SS1.p2.7.m7.3.3.3.cmml" xref="S2.SS1.p2.7.m7.3.3.3"></eq><apply id="S2.SS1.p2.7.m7.3.3.4.cmml" xref="S2.SS1.p2.7.m7.3.3.4"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m7.3.3.4.1.cmml" xref="S2.SS1.p2.7.m7.3.3.4">subscript</csymbol><ci id="S2.SS1.p2.7.m7.3.3.4.2.cmml" xref="S2.SS1.p2.7.m7.3.3.4.2">𝐷</ci><ci id="S2.SS1.p2.7.m7.3.3.4.3.cmml" xref="S2.SS1.p2.7.m7.3.3.4.3">𝐾</ci></apply><apply id="S2.SS1.p2.7.m7.3.3.2.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2"><csymbol cd="latexml" id="S2.SS1.p2.7.m7.3.3.2.3.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.3">conditional-set</csymbol><apply id="S2.SS1.p2.7.m7.2.2.1.1.1.cmml" xref="S2.SS1.p2.7.m7.2.2.1.1.1"><times id="S2.SS1.p2.7.m7.2.2.1.1.1.1.cmml" xref="S2.SS1.p2.7.m7.2.2.1.1.1.1"></times><ci id="S2.SS1.p2.7.m7.2.2.1.1.1.2.cmml" xref="S2.SS1.p2.7.m7.2.2.1.1.1.2">𝑑</ci><ci id="S2.SS1.p2.7.m7.2.2.1.1.1.3.cmml" xref="S2.SS1.p2.7.m7.2.2.1.1.1.3">𝑒</ci><ci id="S2.SS1.p2.7.m7.2.2.1.1.1.4.cmml" xref="S2.SS1.p2.7.m7.2.2.1.1.1.4">𝑚</ci><ci id="S2.SS1.p2.7.m7.2.2.1.1.1.5.cmml" xref="S2.SS1.p2.7.m7.2.2.1.1.1.5">𝑜</ci><cn id="S2.SS1.p2.7.m7.2.2.1.1.1.6.cmml" type="integer" xref="S2.SS1.p2.7.m7.2.2.1.1.1.6">1</cn></apply><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2"><and id="S2.SS1.p2.7.m7.3.3.2.2.2a.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2"></and><apply id="S2.SS1.p2.7.m7.3.3.2.2.2b.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2"><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.8.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.8">:</ci><list id="S2.SS1.p2.7.m7.3.3.2.2.2.2.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2"><interval closure="open" id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2"><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1">subscript</csymbol><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.2">𝐼</ci><cn id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.3.cmml" type="integer" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.1.1.3">1</cn></apply><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2">subscript</csymbol><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.2">𝑂</ci><cn id="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.3.cmml" type="integer" xref="S2.SS1.p2.7.m7.3.3.2.2.2.1.1.1.2.2.3">1</cn></apply></interval><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2"><times id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.1"></times><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.2">𝑑</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.3">𝑒</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.4.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.4">𝑚</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.5.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.5">𝑜</ci><cn id="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.6.cmml" type="integer" xref="S2.SS1.p2.7.m7.3.3.2.2.2.2.2.2.6">2</cn></apply></list><list id="S2.SS1.p2.7.m7.3.3.2.2.2.4.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2"><interval closure="open" id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2"><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1">subscript</csymbol><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.2">𝐼</ci><cn id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.3.cmml" type="integer" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.1.1.3">2</cn></apply><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2">subscript</csymbol><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.2">𝑂</ci><cn id="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.3.cmml" type="integer" xref="S2.SS1.p2.7.m7.3.3.2.2.2.3.1.1.2.2.3">2</cn></apply></interval><ci id="S2.SS1.p2.7.m7.1.1.cmml" xref="S2.SS1.p2.7.m7.1.1">…</ci><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2"><times id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.1"></times><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.2">𝑑</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.3">𝑒</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.4.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.4">𝑚</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.5.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.5">𝑜</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.6.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.4.2.2.6">𝐾</ci></apply></list></apply><apply id="S2.SS1.p2.7.m7.3.3.2.2.2c.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2"><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.9.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.9">:</ci><share href="https://arxiv.org/html/2410.09662v1#S2.SS1.p2.7.m7.3.3.2.2.2.4.cmml" id="S2.SS1.p2.7.m7.3.3.2.2.2d.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2"></share><interval closure="open" id="S2.SS1.p2.7.m7.3.3.2.2.2.6.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.2"><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1">subscript</csymbol><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.2">𝐼</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.5.1.1.3">𝐾</ci></apply><apply id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2"><csymbol cd="ambiguous" id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.1.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2">subscript</csymbol><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.2.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.2">𝑂</ci><ci id="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.3.cmml" xref="S2.SS1.p2.7.m7.3.3.2.2.2.6.2.2.3">𝐾</ci></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.7.m7.3c">D_{K}=\{demo1:(I_{1},O_{1}),demo2:(I_{2},O_{2}),\dots,demoK:(I_{K},O_{K})\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.7.m7.3d">italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT = { italic_d italic_e italic_m italic_o 1 : ( italic_I start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_O start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT ) , italic_d italic_e italic_m italic_o 2 : ( italic_I start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , italic_O start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT ) , … , italic_d italic_e italic_m italic_o italic_K : ( italic_I start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT , italic_O start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT ) }</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S2.SS1.p3">
<p class="ltx_p" id="S2.SS1.p3.3">In the <span class="ltx_text ltx_font_bold" id="S2.SS1.p3.3.1">Generation</span> phase, the query and the retrieved demonstrations are combined to create a retrieval-augmented prompt using a predefined template, denoted as <math alttext="Template(D_{K},I_{query})" class="ltx_Math" display="inline" id="S2.SS1.p3.1.m1.2"><semantics id="S2.SS1.p3.1.m1.2a"><mrow id="S2.SS1.p3.1.m1.2.2" xref="S2.SS1.p3.1.m1.2.2.cmml"><mi id="S2.SS1.p3.1.m1.2.2.4" xref="S2.SS1.p3.1.m1.2.2.4.cmml">T</mi><mo id="S2.SS1.p3.1.m1.2.2.3" xref="S2.SS1.p3.1.m1.2.2.3.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.5" xref="S2.SS1.p3.1.m1.2.2.5.cmml">e</mi><mo id="S2.SS1.p3.1.m1.2.2.3a" xref="S2.SS1.p3.1.m1.2.2.3.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.6" xref="S2.SS1.p3.1.m1.2.2.6.cmml">m</mi><mo id="S2.SS1.p3.1.m1.2.2.3b" xref="S2.SS1.p3.1.m1.2.2.3.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.7" xref="S2.SS1.p3.1.m1.2.2.7.cmml">p</mi><mo id="S2.SS1.p3.1.m1.2.2.3c" xref="S2.SS1.p3.1.m1.2.2.3.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.8" xref="S2.SS1.p3.1.m1.2.2.8.cmml">l</mi><mo id="S2.SS1.p3.1.m1.2.2.3d" xref="S2.SS1.p3.1.m1.2.2.3.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.9" xref="S2.SS1.p3.1.m1.2.2.9.cmml">a</mi><mo id="S2.SS1.p3.1.m1.2.2.3e" xref="S2.SS1.p3.1.m1.2.2.3.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.10" xref="S2.SS1.p3.1.m1.2.2.10.cmml">t</mi><mo id="S2.SS1.p3.1.m1.2.2.3f" xref="S2.SS1.p3.1.m1.2.2.3.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.11" xref="S2.SS1.p3.1.m1.2.2.11.cmml">e</mi><mo id="S2.SS1.p3.1.m1.2.2.3g" xref="S2.SS1.p3.1.m1.2.2.3.cmml">⁢</mo><mrow id="S2.SS1.p3.1.m1.2.2.2.2" xref="S2.SS1.p3.1.m1.2.2.2.3.cmml"><mo id="S2.SS1.p3.1.m1.2.2.2.2.3" stretchy="false" xref="S2.SS1.p3.1.m1.2.2.2.3.cmml">(</mo><msub id="S2.SS1.p3.1.m1.1.1.1.1.1" xref="S2.SS1.p3.1.m1.1.1.1.1.1.cmml"><mi id="S2.SS1.p3.1.m1.1.1.1.1.1.2" xref="S2.SS1.p3.1.m1.1.1.1.1.1.2.cmml">D</mi><mi id="S2.SS1.p3.1.m1.1.1.1.1.1.3" xref="S2.SS1.p3.1.m1.1.1.1.1.1.3.cmml">K</mi></msub><mo id="S2.SS1.p3.1.m1.2.2.2.2.4" xref="S2.SS1.p3.1.m1.2.2.2.3.cmml">,</mo><msub id="S2.SS1.p3.1.m1.2.2.2.2.2" xref="S2.SS1.p3.1.m1.2.2.2.2.2.cmml"><mi id="S2.SS1.p3.1.m1.2.2.2.2.2.2" xref="S2.SS1.p3.1.m1.2.2.2.2.2.2.cmml">I</mi><mrow id="S2.SS1.p3.1.m1.2.2.2.2.2.3" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.cmml"><mi id="S2.SS1.p3.1.m1.2.2.2.2.2.3.2" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.2.cmml">q</mi><mo id="S2.SS1.p3.1.m1.2.2.2.2.2.3.1" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.2.2.2.3.3" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.3.cmml">u</mi><mo id="S2.SS1.p3.1.m1.2.2.2.2.2.3.1a" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.2.2.2.3.4" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.4.cmml">e</mi><mo id="S2.SS1.p3.1.m1.2.2.2.2.2.3.1b" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.2.2.2.3.5" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.5.cmml">r</mi><mo id="S2.SS1.p3.1.m1.2.2.2.2.2.3.1c" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.1.cmml">⁢</mo><mi id="S2.SS1.p3.1.m1.2.2.2.2.2.3.6" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.6.cmml">y</mi></mrow></msub><mo id="S2.SS1.p3.1.m1.2.2.2.2.5" stretchy="false" xref="S2.SS1.p3.1.m1.2.2.2.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p3.1.m1.2b"><apply id="S2.SS1.p3.1.m1.2.2.cmml" xref="S2.SS1.p3.1.m1.2.2"><times id="S2.SS1.p3.1.m1.2.2.3.cmml" xref="S2.SS1.p3.1.m1.2.2.3"></times><ci id="S2.SS1.p3.1.m1.2.2.4.cmml" xref="S2.SS1.p3.1.m1.2.2.4">𝑇</ci><ci id="S2.SS1.p3.1.m1.2.2.5.cmml" xref="S2.SS1.p3.1.m1.2.2.5">𝑒</ci><ci id="S2.SS1.p3.1.m1.2.2.6.cmml" xref="S2.SS1.p3.1.m1.2.2.6">𝑚</ci><ci id="S2.SS1.p3.1.m1.2.2.7.cmml" xref="S2.SS1.p3.1.m1.2.2.7">𝑝</ci><ci id="S2.SS1.p3.1.m1.2.2.8.cmml" xref="S2.SS1.p3.1.m1.2.2.8">𝑙</ci><ci id="S2.SS1.p3.1.m1.2.2.9.cmml" xref="S2.SS1.p3.1.m1.2.2.9">𝑎</ci><ci id="S2.SS1.p3.1.m1.2.2.10.cmml" xref="S2.SS1.p3.1.m1.2.2.10">𝑡</ci><ci id="S2.SS1.p3.1.m1.2.2.11.cmml" xref="S2.SS1.p3.1.m1.2.2.11">𝑒</ci><interval closure="open" id="S2.SS1.p3.1.m1.2.2.2.3.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2"><apply id="S2.SS1.p3.1.m1.1.1.1.1.1.cmml" xref="S2.SS1.p3.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p3.1.m1.1.1.1.1.1.1.cmml" xref="S2.SS1.p3.1.m1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS1.p3.1.m1.1.1.1.1.1.2.cmml" xref="S2.SS1.p3.1.m1.1.1.1.1.1.2">𝐷</ci><ci id="S2.SS1.p3.1.m1.1.1.1.1.1.3.cmml" xref="S2.SS1.p3.1.m1.1.1.1.1.1.3">𝐾</ci></apply><apply id="S2.SS1.p3.1.m1.2.2.2.2.2.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.p3.1.m1.2.2.2.2.2.1.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2">subscript</csymbol><ci id="S2.SS1.p3.1.m1.2.2.2.2.2.2.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2.2">𝐼</ci><apply id="S2.SS1.p3.1.m1.2.2.2.2.2.3.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3"><times id="S2.SS1.p3.1.m1.2.2.2.2.2.3.1.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.1"></times><ci id="S2.SS1.p3.1.m1.2.2.2.2.2.3.2.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.2">𝑞</ci><ci id="S2.SS1.p3.1.m1.2.2.2.2.2.3.3.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.3">𝑢</ci><ci id="S2.SS1.p3.1.m1.2.2.2.2.2.3.4.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.4">𝑒</ci><ci id="S2.SS1.p3.1.m1.2.2.2.2.2.3.5.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.5">𝑟</ci><ci id="S2.SS1.p3.1.m1.2.2.2.2.2.3.6.cmml" xref="S2.SS1.p3.1.m1.2.2.2.2.2.3.6">𝑦</ci></apply></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p3.1.m1.2c">Template(D_{K},I_{query})</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p3.1.m1.2d">italic_T italic_e italic_m italic_p italic_l italic_a italic_t italic_e ( italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT , italic_I start_POSTSUBSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUBSCRIPT )</annotation></semantics></math>. The <math alttext="K" class="ltx_Math" display="inline" id="S2.SS1.p3.2.m2.1"><semantics id="S2.SS1.p3.2.m2.1a"><mi id="S2.SS1.p3.2.m2.1.1" xref="S2.SS1.p3.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p3.2.m2.1b"><ci id="S2.SS1.p3.2.m2.1.1.cmml" xref="S2.SS1.p3.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p3.2.m2.1c">K</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p3.2.m2.1d">italic_K</annotation></semantics></math> demonstrations in <math alttext="D_{K}" class="ltx_Math" display="inline" id="S2.SS1.p3.3.m3.1"><semantics id="S2.SS1.p3.3.m3.1a"><msub id="S2.SS1.p3.3.m3.1.1" xref="S2.SS1.p3.3.m3.1.1.cmml"><mi id="S2.SS1.p3.3.m3.1.1.2" xref="S2.SS1.p3.3.m3.1.1.2.cmml">D</mi><mi id="S2.SS1.p3.3.m3.1.1.3" xref="S2.SS1.p3.3.m3.1.1.3.cmml">K</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p3.3.m3.1b"><apply id="S2.SS1.p3.3.m3.1.1.cmml" xref="S2.SS1.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS1.p3.3.m3.1.1.1.cmml" xref="S2.SS1.p3.3.m3.1.1">subscript</csymbol><ci id="S2.SS1.p3.3.m3.1.1.2.cmml" xref="S2.SS1.p3.3.m3.1.1.2">𝐷</ci><ci id="S2.SS1.p3.3.m3.1.1.3.cmml" xref="S2.SS1.p3.3.m3.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p3.3.m3.1c">D_{K}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p3.3.m3.1d">italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT</annotation></semantics></math> can be arranged in different ways, such as by similarity to the query, in reverse similarity order <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite>, or reordered to avoid the “lost in the middle” issue <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib20" title="">20</a>]</cite>, where demonstrations at both ends tend to have more influence than those in the middle. Following the recommended setup in ICL4code <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite>, we adopt a similarity-based order in this study, positioning the most relevant demonstration closest to the query. This retrieval-enhanced prompt is then fed into the LLM to generate the final output.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S2.SS2.4.1.1">II-B</span> </span><span class="ltx_text ltx_font_italic" id="S2.SS2.5.2">Retrieval Approach</span>
</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">Typically, there are two families of retrieval approaches, namely <span class="ltx_text ltx_font_bold" id="S2.SS2.p1.1.1">Sparse</span> and <span class="ltx_text ltx_font_bold" id="S2.SS2.p1.1.2">Dense</span>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.1"><span class="ltx_text ltx_font_bold" id="S2.SS2.p2.1.1">Sparse</span> retrievers rank demonstrations by evaluating the frequency of terms within a demonstration (TF) and their rarity across the entire knowledge base (IDF). Specifically, for each term in the query, a TF/IDF score is calculated for every demonstration in the knowledge base. Demonstrations that have higher cumulative TF/IDF scores are considered more relevant. BM25<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib21" title="">21</a>]</cite> and its variants (e.g., BM25L<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib14" title="">14</a>]</cite>, BM25+<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib22" title="">22</a>]</cite>) improve upon TF/IDF by normalizing the TF and adjusting for the saturation effect. This results in a more nuanced ranking that better reflects the relevance of demonstrations to the query.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS2.p3">
<p class="ltx_p" id="S2.SS2.p3.1"><span class="ltx_text ltx_font_bold" id="S2.SS2.p3.1.1">Dense</span> retrievers leverage high-dimensional numeric representations to encode demonstrations and queries, with cosine similarity as a common metric to measure their relevance. For instance, using SBERT <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib11" title="">11</a>]</cite> as the encoder, SBERT’s Semantic Search implements a straightforward and widely-used strategy to perform a linear scan of the entire knowledge base <math alttext="D" class="ltx_Math" display="inline" id="S2.SS2.p3.1.m1.1"><semantics id="S2.SS2.p3.1.m1.1a"><mi id="S2.SS2.p3.1.m1.1.1" xref="S2.SS2.p3.1.m1.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.1.m1.1b"><ci id="S2.SS2.p3.1.m1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.1.m1.1c">D</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.1.m1.1d">italic_D</annotation></semantics></math>, commonly referred to as an <span class="ltx_text ltx_font_bold" id="S2.SS2.p3.1.2">exhaustive</span> dense retriever <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib5" title="">5</a>]</cite>, as expressed by:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="D_{K}=\arg\max_{D_{K}\subset D,|D_{K}|=K}\sum_{demo_{i}\in D}\operatorname{Sim%
}\left(I_{query},demo_{i}\right)" class="ltx_Math" display="block" id="S2.E1.m1.5"><semantics id="S2.E1.m1.5a"><mrow id="S2.E1.m1.5.5" xref="S2.E1.m1.5.5.cmml"><msub id="S2.E1.m1.5.5.4" xref="S2.E1.m1.5.5.4.cmml"><mi id="S2.E1.m1.5.5.4.2" xref="S2.E1.m1.5.5.4.2.cmml">D</mi><mi id="S2.E1.m1.5.5.4.3" xref="S2.E1.m1.5.5.4.3.cmml">K</mi></msub><mo id="S2.E1.m1.5.5.3" xref="S2.E1.m1.5.5.3.cmml">=</mo><mrow id="S2.E1.m1.5.5.2" xref="S2.E1.m1.5.5.2.cmml"><mrow id="S2.E1.m1.5.5.2.4" xref="S2.E1.m1.5.5.2.4.cmml"><mi id="S2.E1.m1.5.5.2.4.1" xref="S2.E1.m1.5.5.2.4.1.cmml">arg</mi><mo id="S2.E1.m1.5.5.2.4a" lspace="0.167em" xref="S2.E1.m1.5.5.2.4.cmml">⁡</mo><munder id="S2.E1.m1.5.5.2.4.2" xref="S2.E1.m1.5.5.2.4.2.cmml"><mi id="S2.E1.m1.5.5.2.4.2.2" xref="S2.E1.m1.5.5.2.4.2.2.cmml">max</mi><mrow id="S2.E1.m1.2.2.2.2" xref="S2.E1.m1.2.2.2.3.cmml"><mrow id="S2.E1.m1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.cmml"><msub id="S2.E1.m1.1.1.1.1.1.2" xref="S2.E1.m1.1.1.1.1.1.2.cmml"><mi id="S2.E1.m1.1.1.1.1.1.2.2" xref="S2.E1.m1.1.1.1.1.1.2.2.cmml">D</mi><mi id="S2.E1.m1.1.1.1.1.1.2.3" xref="S2.E1.m1.1.1.1.1.1.2.3.cmml">K</mi></msub><mo id="S2.E1.m1.1.1.1.1.1.1" xref="S2.E1.m1.1.1.1.1.1.1.cmml">⊂</mo><mi id="S2.E1.m1.1.1.1.1.1.3" xref="S2.E1.m1.1.1.1.1.1.3.cmml">D</mi></mrow><mo id="S2.E1.m1.2.2.2.2.3" xref="S2.E1.m1.2.2.2.3a.cmml">,</mo><mrow id="S2.E1.m1.2.2.2.2.2" xref="S2.E1.m1.2.2.2.2.2.cmml"><mrow id="S2.E1.m1.2.2.2.2.2.1.1" xref="S2.E1.m1.2.2.2.2.2.1.2.cmml"><mo id="S2.E1.m1.2.2.2.2.2.1.1.2" stretchy="false" xref="S2.E1.m1.2.2.2.2.2.1.2.1.cmml">|</mo><msub id="S2.E1.m1.2.2.2.2.2.1.1.1" xref="S2.E1.m1.2.2.2.2.2.1.1.1.cmml"><mi id="S2.E1.m1.2.2.2.2.2.1.1.1.2" xref="S2.E1.m1.2.2.2.2.2.1.1.1.2.cmml">D</mi><mi id="S2.E1.m1.2.2.2.2.2.1.1.1.3" xref="S2.E1.m1.2.2.2.2.2.1.1.1.3.cmml">K</mi></msub><mo id="S2.E1.m1.2.2.2.2.2.1.1.3" stretchy="false" xref="S2.E1.m1.2.2.2.2.2.1.2.1.cmml">|</mo></mrow><mo id="S2.E1.m1.2.2.2.2.2.2" xref="S2.E1.m1.2.2.2.2.2.2.cmml">=</mo><mi id="S2.E1.m1.2.2.2.2.2.3" xref="S2.E1.m1.2.2.2.2.2.3.cmml">K</mi></mrow></mrow></munder></mrow><mo id="S2.E1.m1.5.5.2.3" xref="S2.E1.m1.5.5.2.3.cmml">⁢</mo><mrow id="S2.E1.m1.5.5.2.2" xref="S2.E1.m1.5.5.2.2.cmml"><munder id="S2.E1.m1.5.5.2.2.3" xref="S2.E1.m1.5.5.2.2.3.cmml"><mo id="S2.E1.m1.5.5.2.2.3.2" movablelimits="false" xref="S2.E1.m1.5.5.2.2.3.2.cmml">∑</mo><mrow id="S2.E1.m1.5.5.2.2.3.3" xref="S2.E1.m1.5.5.2.2.3.3.cmml"><mrow id="S2.E1.m1.5.5.2.2.3.3.2" xref="S2.E1.m1.5.5.2.2.3.3.2.cmml"><mi id="S2.E1.m1.5.5.2.2.3.3.2.2" xref="S2.E1.m1.5.5.2.2.3.3.2.2.cmml">d</mi><mo id="S2.E1.m1.5.5.2.2.3.3.2.1" xref="S2.E1.m1.5.5.2.2.3.3.2.1.cmml">⁢</mo><mi id="S2.E1.m1.5.5.2.2.3.3.2.3" xref="S2.E1.m1.5.5.2.2.3.3.2.3.cmml">e</mi><mo id="S2.E1.m1.5.5.2.2.3.3.2.1a" xref="S2.E1.m1.5.5.2.2.3.3.2.1.cmml">⁢</mo><mi id="S2.E1.m1.5.5.2.2.3.3.2.4" xref="S2.E1.m1.5.5.2.2.3.3.2.4.cmml">m</mi><mo id="S2.E1.m1.5.5.2.2.3.3.2.1b" xref="S2.E1.m1.5.5.2.2.3.3.2.1.cmml">⁢</mo><msub id="S2.E1.m1.5.5.2.2.3.3.2.5" xref="S2.E1.m1.5.5.2.2.3.3.2.5.cmml"><mi id="S2.E1.m1.5.5.2.2.3.3.2.5.2" xref="S2.E1.m1.5.5.2.2.3.3.2.5.2.cmml">o</mi><mi id="S2.E1.m1.5.5.2.2.3.3.2.5.3" xref="S2.E1.m1.5.5.2.2.3.3.2.5.3.cmml">i</mi></msub></mrow><mo id="S2.E1.m1.5.5.2.2.3.3.1" xref="S2.E1.m1.5.5.2.2.3.3.1.cmml">∈</mo><mi id="S2.E1.m1.5.5.2.2.3.3.3" xref="S2.E1.m1.5.5.2.2.3.3.3.cmml">D</mi></mrow></munder><mrow id="S2.E1.m1.5.5.2.2.2.2" xref="S2.E1.m1.5.5.2.2.2.3.cmml"><mi id="S2.E1.m1.3.3" xref="S2.E1.m1.3.3.cmml">Sim</mi><mo id="S2.E1.m1.5.5.2.2.2.2a" xref="S2.E1.m1.5.5.2.2.2.3.cmml">⁡</mo><mrow id="S2.E1.m1.5.5.2.2.2.2.2" xref="S2.E1.m1.5.5.2.2.2.3.cmml"><mo id="S2.E1.m1.5.5.2.2.2.2.2.3" xref="S2.E1.m1.5.5.2.2.2.3.cmml">(</mo><msub id="S2.E1.m1.4.4.1.1.1.1.1.1" xref="S2.E1.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S2.E1.m1.4.4.1.1.1.1.1.1.2" xref="S2.E1.m1.4.4.1.1.1.1.1.1.2.cmml">I</mi><mrow id="S2.E1.m1.4.4.1.1.1.1.1.1.3" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.cmml"><mi id="S2.E1.m1.4.4.1.1.1.1.1.1.3.2" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.2.cmml">q</mi><mo id="S2.E1.m1.4.4.1.1.1.1.1.1.3.1" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S2.E1.m1.4.4.1.1.1.1.1.1.3.3" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.3.cmml">u</mi><mo id="S2.E1.m1.4.4.1.1.1.1.1.1.3.1a" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S2.E1.m1.4.4.1.1.1.1.1.1.3.4" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.4.cmml">e</mi><mo id="S2.E1.m1.4.4.1.1.1.1.1.1.3.1b" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S2.E1.m1.4.4.1.1.1.1.1.1.3.5" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.5.cmml">r</mi><mo id="S2.E1.m1.4.4.1.1.1.1.1.1.3.1c" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S2.E1.m1.4.4.1.1.1.1.1.1.3.6" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.6.cmml">y</mi></mrow></msub><mo id="S2.E1.m1.5.5.2.2.2.2.2.4" xref="S2.E1.m1.5.5.2.2.2.3.cmml">,</mo><mrow id="S2.E1.m1.5.5.2.2.2.2.2.2" xref="S2.E1.m1.5.5.2.2.2.2.2.2.cmml"><mi id="S2.E1.m1.5.5.2.2.2.2.2.2.2" xref="S2.E1.m1.5.5.2.2.2.2.2.2.2.cmml">d</mi><mo id="S2.E1.m1.5.5.2.2.2.2.2.2.1" xref="S2.E1.m1.5.5.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S2.E1.m1.5.5.2.2.2.2.2.2.3" xref="S2.E1.m1.5.5.2.2.2.2.2.2.3.cmml">e</mi><mo id="S2.E1.m1.5.5.2.2.2.2.2.2.1a" xref="S2.E1.m1.5.5.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S2.E1.m1.5.5.2.2.2.2.2.2.4" xref="S2.E1.m1.5.5.2.2.2.2.2.2.4.cmml">m</mi><mo id="S2.E1.m1.5.5.2.2.2.2.2.2.1b" xref="S2.E1.m1.5.5.2.2.2.2.2.2.1.cmml">⁢</mo><msub id="S2.E1.m1.5.5.2.2.2.2.2.2.5" xref="S2.E1.m1.5.5.2.2.2.2.2.2.5.cmml"><mi id="S2.E1.m1.5.5.2.2.2.2.2.2.5.2" xref="S2.E1.m1.5.5.2.2.2.2.2.2.5.2.cmml">o</mi><mi id="S2.E1.m1.5.5.2.2.2.2.2.2.5.3" xref="S2.E1.m1.5.5.2.2.2.2.2.2.5.3.cmml">i</mi></msub></mrow><mo id="S2.E1.m1.5.5.2.2.2.2.2.5" xref="S2.E1.m1.5.5.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.5b"><apply id="S2.E1.m1.5.5.cmml" xref="S2.E1.m1.5.5"><eq id="S2.E1.m1.5.5.3.cmml" xref="S2.E1.m1.5.5.3"></eq><apply id="S2.E1.m1.5.5.4.cmml" xref="S2.E1.m1.5.5.4"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.4.1.cmml" xref="S2.E1.m1.5.5.4">subscript</csymbol><ci id="S2.E1.m1.5.5.4.2.cmml" xref="S2.E1.m1.5.5.4.2">𝐷</ci><ci id="S2.E1.m1.5.5.4.3.cmml" xref="S2.E1.m1.5.5.4.3">𝐾</ci></apply><apply id="S2.E1.m1.5.5.2.cmml" xref="S2.E1.m1.5.5.2"><times id="S2.E1.m1.5.5.2.3.cmml" xref="S2.E1.m1.5.5.2.3"></times><apply id="S2.E1.m1.5.5.2.4.cmml" xref="S2.E1.m1.5.5.2.4"><arg id="S2.E1.m1.5.5.2.4.1.cmml" xref="S2.E1.m1.5.5.2.4.1"></arg><apply id="S2.E1.m1.5.5.2.4.2.cmml" xref="S2.E1.m1.5.5.2.4.2"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.2.4.2.1.cmml" xref="S2.E1.m1.5.5.2.4.2">subscript</csymbol><max id="S2.E1.m1.5.5.2.4.2.2.cmml" xref="S2.E1.m1.5.5.2.4.2.2"></max><apply id="S2.E1.m1.2.2.2.3.cmml" xref="S2.E1.m1.2.2.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.2.3a.cmml" xref="S2.E1.m1.2.2.2.2.3">formulae-sequence</csymbol><apply id="S2.E1.m1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1"><subset id="S2.E1.m1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.1.1.1.1.1.1"></subset><apply id="S2.E1.m1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E1.m1.1.1.1.1.1.2.1.cmml" xref="S2.E1.m1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.E1.m1.1.1.1.1.1.2.2.cmml" xref="S2.E1.m1.1.1.1.1.1.2.2">𝐷</ci><ci id="S2.E1.m1.1.1.1.1.1.2.3.cmml" xref="S2.E1.m1.1.1.1.1.1.2.3">𝐾</ci></apply><ci id="S2.E1.m1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.1.1.1.1.1.3">𝐷</ci></apply><apply id="S2.E1.m1.2.2.2.2.2.cmml" xref="S2.E1.m1.2.2.2.2.2"><eq id="S2.E1.m1.2.2.2.2.2.2.cmml" xref="S2.E1.m1.2.2.2.2.2.2"></eq><apply id="S2.E1.m1.2.2.2.2.2.1.2.cmml" xref="S2.E1.m1.2.2.2.2.2.1.1"><abs id="S2.E1.m1.2.2.2.2.2.1.2.1.cmml" xref="S2.E1.m1.2.2.2.2.2.1.1.2"></abs><apply id="S2.E1.m1.2.2.2.2.2.1.1.1.cmml" xref="S2.E1.m1.2.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.2.2.2.1.1.1.1.cmml" xref="S2.E1.m1.2.2.2.2.2.1.1.1">subscript</csymbol><ci id="S2.E1.m1.2.2.2.2.2.1.1.1.2.cmml" xref="S2.E1.m1.2.2.2.2.2.1.1.1.2">𝐷</ci><ci id="S2.E1.m1.2.2.2.2.2.1.1.1.3.cmml" xref="S2.E1.m1.2.2.2.2.2.1.1.1.3">𝐾</ci></apply></apply><ci id="S2.E1.m1.2.2.2.2.2.3.cmml" xref="S2.E1.m1.2.2.2.2.2.3">𝐾</ci></apply></apply></apply></apply><apply id="S2.E1.m1.5.5.2.2.cmml" xref="S2.E1.m1.5.5.2.2"><apply id="S2.E1.m1.5.5.2.2.3.cmml" xref="S2.E1.m1.5.5.2.2.3"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.2.2.3.1.cmml" xref="S2.E1.m1.5.5.2.2.3">subscript</csymbol><sum id="S2.E1.m1.5.5.2.2.3.2.cmml" xref="S2.E1.m1.5.5.2.2.3.2"></sum><apply id="S2.E1.m1.5.5.2.2.3.3.cmml" xref="S2.E1.m1.5.5.2.2.3.3"><in id="S2.E1.m1.5.5.2.2.3.3.1.cmml" xref="S2.E1.m1.5.5.2.2.3.3.1"></in><apply id="S2.E1.m1.5.5.2.2.3.3.2.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2"><times id="S2.E1.m1.5.5.2.2.3.3.2.1.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2.1"></times><ci id="S2.E1.m1.5.5.2.2.3.3.2.2.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2.2">𝑑</ci><ci id="S2.E1.m1.5.5.2.2.3.3.2.3.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2.3">𝑒</ci><ci id="S2.E1.m1.5.5.2.2.3.3.2.4.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2.4">𝑚</ci><apply id="S2.E1.m1.5.5.2.2.3.3.2.5.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2.5"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.2.2.3.3.2.5.1.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2.5">subscript</csymbol><ci id="S2.E1.m1.5.5.2.2.3.3.2.5.2.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2.5.2">𝑜</ci><ci id="S2.E1.m1.5.5.2.2.3.3.2.5.3.cmml" xref="S2.E1.m1.5.5.2.2.3.3.2.5.3">𝑖</ci></apply></apply><ci id="S2.E1.m1.5.5.2.2.3.3.3.cmml" xref="S2.E1.m1.5.5.2.2.3.3.3">𝐷</ci></apply></apply><apply id="S2.E1.m1.5.5.2.2.2.3.cmml" xref="S2.E1.m1.5.5.2.2.2.2"><ci id="S2.E1.m1.3.3.cmml" xref="S2.E1.m1.3.3">Sim</ci><apply id="S2.E1.m1.4.4.1.1.1.1.1.1.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E1.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1.2">𝐼</ci><apply id="S2.E1.m1.4.4.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3"><times id="S2.E1.m1.4.4.1.1.1.1.1.1.3.1.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.1"></times><ci id="S2.E1.m1.4.4.1.1.1.1.1.1.3.2.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.2">𝑞</ci><ci id="S2.E1.m1.4.4.1.1.1.1.1.1.3.3.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.3">𝑢</ci><ci id="S2.E1.m1.4.4.1.1.1.1.1.1.3.4.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.4">𝑒</ci><ci id="S2.E1.m1.4.4.1.1.1.1.1.1.3.5.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.5">𝑟</ci><ci id="S2.E1.m1.4.4.1.1.1.1.1.1.3.6.cmml" xref="S2.E1.m1.4.4.1.1.1.1.1.1.3.6">𝑦</ci></apply></apply><apply id="S2.E1.m1.5.5.2.2.2.2.2.2.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2"><times id="S2.E1.m1.5.5.2.2.2.2.2.2.1.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2.1"></times><ci id="S2.E1.m1.5.5.2.2.2.2.2.2.2.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2.2">𝑑</ci><ci id="S2.E1.m1.5.5.2.2.2.2.2.2.3.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2.3">𝑒</ci><ci id="S2.E1.m1.5.5.2.2.2.2.2.2.4.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2.4">𝑚</ci><apply id="S2.E1.m1.5.5.2.2.2.2.2.2.5.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2.5"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.2.2.2.2.2.2.5.1.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2.5">subscript</csymbol><ci id="S2.E1.m1.5.5.2.2.2.2.2.2.5.2.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2.5.2">𝑜</ci><ci id="S2.E1.m1.5.5.2.2.2.2.2.2.5.3.cmml" xref="S2.E1.m1.5.5.2.2.2.2.2.2.5.3">𝑖</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.5c">D_{K}=\arg\max_{D_{K}\subset D,|D_{K}|=K}\sum_{demo_{i}\in D}\operatorname{Sim%
}\left(I_{query},demo_{i}\right)</annotation><annotation encoding="application/x-llamapun" id="S2.E1.m1.5d">italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT = roman_arg roman_max start_POSTSUBSCRIPT italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT ⊂ italic_D , | italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT | = italic_K end_POSTSUBSCRIPT ∑ start_POSTSUBSCRIPT italic_d italic_e italic_m italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ italic_D end_POSTSUBSCRIPT roman_Sim ( italic_I start_POSTSUBSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUBSCRIPT , italic_d italic_e italic_m italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS2.p3.9">This process incurs a computational complexity of <math alttext="O(mn)" class="ltx_Math" display="inline" id="S2.SS2.p3.2.m1.1"><semantics id="S2.SS2.p3.2.m1.1a"><mrow id="S2.SS2.p3.2.m1.1.1" xref="S2.SS2.p3.2.m1.1.1.cmml"><mi id="S2.SS2.p3.2.m1.1.1.3" xref="S2.SS2.p3.2.m1.1.1.3.cmml">O</mi><mo id="S2.SS2.p3.2.m1.1.1.2" xref="S2.SS2.p3.2.m1.1.1.2.cmml">⁢</mo><mrow id="S2.SS2.p3.2.m1.1.1.1.1" xref="S2.SS2.p3.2.m1.1.1.1.1.1.cmml"><mo id="S2.SS2.p3.2.m1.1.1.1.1.2" stretchy="false" xref="S2.SS2.p3.2.m1.1.1.1.1.1.cmml">(</mo><mrow id="S2.SS2.p3.2.m1.1.1.1.1.1" xref="S2.SS2.p3.2.m1.1.1.1.1.1.cmml"><mi id="S2.SS2.p3.2.m1.1.1.1.1.1.2" xref="S2.SS2.p3.2.m1.1.1.1.1.1.2.cmml">m</mi><mo id="S2.SS2.p3.2.m1.1.1.1.1.1.1" xref="S2.SS2.p3.2.m1.1.1.1.1.1.1.cmml">⁢</mo><mi id="S2.SS2.p3.2.m1.1.1.1.1.1.3" xref="S2.SS2.p3.2.m1.1.1.1.1.1.3.cmml">n</mi></mrow><mo id="S2.SS2.p3.2.m1.1.1.1.1.3" stretchy="false" xref="S2.SS2.p3.2.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.2.m1.1b"><apply id="S2.SS2.p3.2.m1.1.1.cmml" xref="S2.SS2.p3.2.m1.1.1"><times id="S2.SS2.p3.2.m1.1.1.2.cmml" xref="S2.SS2.p3.2.m1.1.1.2"></times><ci id="S2.SS2.p3.2.m1.1.1.3.cmml" xref="S2.SS2.p3.2.m1.1.1.3">𝑂</ci><apply id="S2.SS2.p3.2.m1.1.1.1.1.1.cmml" xref="S2.SS2.p3.2.m1.1.1.1.1"><times id="S2.SS2.p3.2.m1.1.1.1.1.1.1.cmml" xref="S2.SS2.p3.2.m1.1.1.1.1.1.1"></times><ci id="S2.SS2.p3.2.m1.1.1.1.1.1.2.cmml" xref="S2.SS2.p3.2.m1.1.1.1.1.1.2">𝑚</ci><ci id="S2.SS2.p3.2.m1.1.1.1.1.1.3.cmml" xref="S2.SS2.p3.2.m1.1.1.1.1.1.3">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.2.m1.1c">O(mn)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.2.m1.1d">italic_O ( italic_m italic_n )</annotation></semantics></math>, where <math alttext="m" class="ltx_Math" display="inline" id="S2.SS2.p3.3.m2.1"><semantics id="S2.SS2.p3.3.m2.1a"><mi id="S2.SS2.p3.3.m2.1.1" xref="S2.SS2.p3.3.m2.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.3.m2.1b"><ci id="S2.SS2.p3.3.m2.1.1.cmml" xref="S2.SS2.p3.3.m2.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.3.m2.1c">m</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.3.m2.1d">italic_m</annotation></semantics></math> is the dimensionality of the embeddings and <math alttext="n" class="ltx_Math" display="inline" id="S2.SS2.p3.4.m3.1"><semantics id="S2.SS2.p3.4.m3.1a"><mi id="S2.SS2.p3.4.m3.1.1" xref="S2.SS2.p3.4.m3.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.4.m3.1b"><ci id="S2.SS2.p3.4.m3.1.1.cmml" xref="S2.SS2.p3.4.m3.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.4.m3.1c">n</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.4.m3.1d">italic_n</annotation></semantics></math> is the size of the knowledge base. As the dataset grows, this complexity becomes impractical due to <em class="ltx_emph ltx_font_italic" id="S2.SS2.p3.9.1">the curse of dimensionality</em>, making exhaustive searches increasingly inefficient for large-scale retrieval tasks <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib23" title="">23</a>]</cite>. To enable efficient RAG, it is necessary to reduce the computational complexity of the retrieval process. Therefore, in this study, we also explore <span class="ltx_text ltx_font_bold" id="S2.SS2.p3.9.2">approximate</span> dense retrievers <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib23" title="">23</a>]</cite>, which leverage ANN techniques that have not been thoroughly investigated in previous studies on coding tasks. Approximate dense retrievers build indexes on <math alttext="D" class="ltx_Math" display="inline" id="S2.SS2.p3.5.m4.1"><semantics id="S2.SS2.p3.5.m4.1a"><mi id="S2.SS2.p3.5.m4.1.1" xref="S2.SS2.p3.5.m4.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.5.m4.1b"><ci id="S2.SS2.p3.5.m4.1.1.cmml" xref="S2.SS2.p3.5.m4.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.5.m4.1c">D</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.5.m4.1d">italic_D</annotation></semantics></math>. When a query is given, it retrieves a subset <math alttext="A" class="ltx_Math" display="inline" id="S2.SS2.p3.6.m5.1"><semantics id="S2.SS2.p3.6.m5.1a"><mi id="S2.SS2.p3.6.m5.1.1" xref="S2.SS2.p3.6.m5.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.6.m5.1b"><ci id="S2.SS2.p3.6.m5.1.1.cmml" xref="S2.SS2.p3.6.m5.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.6.m5.1c">A</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.6.m5.1d">italic_A</annotation></semantics></math> of <math alttext="D" class="ltx_Math" display="inline" id="S2.SS2.p3.7.m6.1"><semantics id="S2.SS2.p3.7.m6.1a"><mi id="S2.SS2.p3.7.m6.1.1" xref="S2.SS2.p3.7.m6.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.7.m6.1b"><ci id="S2.SS2.p3.7.m6.1.1.cmml" xref="S2.SS2.p3.7.m6.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.7.m6.1c">D</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.7.m6.1d">italic_D</annotation></semantics></math> by indexes and then finds relevant demonstrations in <math alttext="A" class="ltx_Math" display="inline" id="S2.SS2.p3.8.m7.1"><semantics id="S2.SS2.p3.8.m7.1a"><mi id="S2.SS2.p3.8.m7.1.1" xref="S2.SS2.p3.8.m7.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.8.m7.1b"><ci id="S2.SS2.p3.8.m7.1.1.cmml" xref="S2.SS2.p3.8.m7.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.8.m7.1c">A</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.8.m7.1d">italic_A</annotation></semantics></math> rather than scanning the entire knowledge base <math alttext="D" class="ltx_Math" display="inline" id="S2.SS2.p3.9.m8.1"><semantics id="S2.SS2.p3.9.m8.1a"><mi id="S2.SS2.p3.9.m8.1.1" xref="S2.SS2.p3.9.m8.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.9.m8.1b"><ci id="S2.SS2.p3.9.m8.1.1.cmml" xref="S2.SS2.p3.9.m8.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.9.m8.1c">D</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.9.m8.1d">italic_D</annotation></semantics></math>. In this way, approximate dense retrievers can get an approximation of true similar demonstrations through reducing the search neighbors as:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="D_{K}=\arg\max_{D_{K}\subset A,|D_{K}|=K}\sum_{demo_{i}\in A\subset D}%
\operatorname{Sim}\left(I_{query},demo_{i}\right)" class="ltx_Math" display="block" id="S2.E2.m1.5"><semantics id="S2.E2.m1.5a"><mrow id="S2.E2.m1.5.5" xref="S2.E2.m1.5.5.cmml"><msub id="S2.E2.m1.5.5.4" xref="S2.E2.m1.5.5.4.cmml"><mi id="S2.E2.m1.5.5.4.2" xref="S2.E2.m1.5.5.4.2.cmml">D</mi><mi id="S2.E2.m1.5.5.4.3" xref="S2.E2.m1.5.5.4.3.cmml">K</mi></msub><mo id="S2.E2.m1.5.5.3" xref="S2.E2.m1.5.5.3.cmml">=</mo><mrow id="S2.E2.m1.5.5.2" xref="S2.E2.m1.5.5.2.cmml"><mrow id="S2.E2.m1.5.5.2.4" xref="S2.E2.m1.5.5.2.4.cmml"><mi id="S2.E2.m1.5.5.2.4.1" xref="S2.E2.m1.5.5.2.4.1.cmml">arg</mi><mo id="S2.E2.m1.5.5.2.4a" lspace="0.167em" xref="S2.E2.m1.5.5.2.4.cmml">⁡</mo><munder id="S2.E2.m1.5.5.2.4.2" xref="S2.E2.m1.5.5.2.4.2.cmml"><mi id="S2.E2.m1.5.5.2.4.2.2" xref="S2.E2.m1.5.5.2.4.2.2.cmml">max</mi><mrow id="S2.E2.m1.2.2.2.2" xref="S2.E2.m1.2.2.2.3.cmml"><mrow id="S2.E2.m1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.cmml"><msub id="S2.E2.m1.1.1.1.1.1.2" xref="S2.E2.m1.1.1.1.1.1.2.cmml"><mi id="S2.E2.m1.1.1.1.1.1.2.2" xref="S2.E2.m1.1.1.1.1.1.2.2.cmml">D</mi><mi id="S2.E2.m1.1.1.1.1.1.2.3" xref="S2.E2.m1.1.1.1.1.1.2.3.cmml">K</mi></msub><mo id="S2.E2.m1.1.1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.1.1.cmml">⊂</mo><mi id="S2.E2.m1.1.1.1.1.1.3" xref="S2.E2.m1.1.1.1.1.1.3.cmml">A</mi></mrow><mo id="S2.E2.m1.2.2.2.2.3" xref="S2.E2.m1.2.2.2.3a.cmml">,</mo><mrow id="S2.E2.m1.2.2.2.2.2" xref="S2.E2.m1.2.2.2.2.2.cmml"><mrow id="S2.E2.m1.2.2.2.2.2.1.1" xref="S2.E2.m1.2.2.2.2.2.1.2.cmml"><mo id="S2.E2.m1.2.2.2.2.2.1.1.2" stretchy="false" xref="S2.E2.m1.2.2.2.2.2.1.2.1.cmml">|</mo><msub id="S2.E2.m1.2.2.2.2.2.1.1.1" xref="S2.E2.m1.2.2.2.2.2.1.1.1.cmml"><mi id="S2.E2.m1.2.2.2.2.2.1.1.1.2" xref="S2.E2.m1.2.2.2.2.2.1.1.1.2.cmml">D</mi><mi id="S2.E2.m1.2.2.2.2.2.1.1.1.3" xref="S2.E2.m1.2.2.2.2.2.1.1.1.3.cmml">K</mi></msub><mo id="S2.E2.m1.2.2.2.2.2.1.1.3" stretchy="false" xref="S2.E2.m1.2.2.2.2.2.1.2.1.cmml">|</mo></mrow><mo id="S2.E2.m1.2.2.2.2.2.2" xref="S2.E2.m1.2.2.2.2.2.2.cmml">=</mo><mi id="S2.E2.m1.2.2.2.2.2.3" xref="S2.E2.m1.2.2.2.2.2.3.cmml">K</mi></mrow></mrow></munder></mrow><mo id="S2.E2.m1.5.5.2.3" xref="S2.E2.m1.5.5.2.3.cmml">⁢</mo><mrow id="S2.E2.m1.5.5.2.2" xref="S2.E2.m1.5.5.2.2.cmml"><munder id="S2.E2.m1.5.5.2.2.3" xref="S2.E2.m1.5.5.2.2.3.cmml"><mo id="S2.E2.m1.5.5.2.2.3.2" movablelimits="false" xref="S2.E2.m1.5.5.2.2.3.2.cmml">∑</mo><mrow id="S2.E2.m1.5.5.2.2.3.3" xref="S2.E2.m1.5.5.2.2.3.3.cmml"><mrow id="S2.E2.m1.5.5.2.2.3.3.2" xref="S2.E2.m1.5.5.2.2.3.3.2.cmml"><mi id="S2.E2.m1.5.5.2.2.3.3.2.2" xref="S2.E2.m1.5.5.2.2.3.3.2.2.cmml">d</mi><mo id="S2.E2.m1.5.5.2.2.3.3.2.1" xref="S2.E2.m1.5.5.2.2.3.3.2.1.cmml">⁢</mo><mi id="S2.E2.m1.5.5.2.2.3.3.2.3" xref="S2.E2.m1.5.5.2.2.3.3.2.3.cmml">e</mi><mo id="S2.E2.m1.5.5.2.2.3.3.2.1a" xref="S2.E2.m1.5.5.2.2.3.3.2.1.cmml">⁢</mo><mi id="S2.E2.m1.5.5.2.2.3.3.2.4" xref="S2.E2.m1.5.5.2.2.3.3.2.4.cmml">m</mi><mo id="S2.E2.m1.5.5.2.2.3.3.2.1b" xref="S2.E2.m1.5.5.2.2.3.3.2.1.cmml">⁢</mo><msub id="S2.E2.m1.5.5.2.2.3.3.2.5" xref="S2.E2.m1.5.5.2.2.3.3.2.5.cmml"><mi id="S2.E2.m1.5.5.2.2.3.3.2.5.2" xref="S2.E2.m1.5.5.2.2.3.3.2.5.2.cmml">o</mi><mi id="S2.E2.m1.5.5.2.2.3.3.2.5.3" xref="S2.E2.m1.5.5.2.2.3.3.2.5.3.cmml">i</mi></msub></mrow><mo id="S2.E2.m1.5.5.2.2.3.3.3" xref="S2.E2.m1.5.5.2.2.3.3.3.cmml">∈</mo><mi id="S2.E2.m1.5.5.2.2.3.3.4" xref="S2.E2.m1.5.5.2.2.3.3.4.cmml">A</mi><mo id="S2.E2.m1.5.5.2.2.3.3.5" xref="S2.E2.m1.5.5.2.2.3.3.5.cmml">⊂</mo><mi id="S2.E2.m1.5.5.2.2.3.3.6" xref="S2.E2.m1.5.5.2.2.3.3.6.cmml">D</mi></mrow></munder><mrow id="S2.E2.m1.5.5.2.2.2.2" xref="S2.E2.m1.5.5.2.2.2.3.cmml"><mi id="S2.E2.m1.3.3" xref="S2.E2.m1.3.3.cmml">Sim</mi><mo id="S2.E2.m1.5.5.2.2.2.2a" xref="S2.E2.m1.5.5.2.2.2.3.cmml">⁡</mo><mrow id="S2.E2.m1.5.5.2.2.2.2.2" xref="S2.E2.m1.5.5.2.2.2.3.cmml"><mo id="S2.E2.m1.5.5.2.2.2.2.2.3" xref="S2.E2.m1.5.5.2.2.2.3.cmml">(</mo><msub id="S2.E2.m1.4.4.1.1.1.1.1.1" xref="S2.E2.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.4.4.1.1.1.1.1.1.2" xref="S2.E2.m1.4.4.1.1.1.1.1.1.2.cmml">I</mi><mrow id="S2.E2.m1.4.4.1.1.1.1.1.1.3" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.4.4.1.1.1.1.1.1.3.2" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.2.cmml">q</mi><mo id="S2.E2.m1.4.4.1.1.1.1.1.1.3.1" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S2.E2.m1.4.4.1.1.1.1.1.1.3.3" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.3.cmml">u</mi><mo id="S2.E2.m1.4.4.1.1.1.1.1.1.3.1a" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S2.E2.m1.4.4.1.1.1.1.1.1.3.4" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.4.cmml">e</mi><mo id="S2.E2.m1.4.4.1.1.1.1.1.1.3.1b" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S2.E2.m1.4.4.1.1.1.1.1.1.3.5" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.5.cmml">r</mi><mo id="S2.E2.m1.4.4.1.1.1.1.1.1.3.1c" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="S2.E2.m1.4.4.1.1.1.1.1.1.3.6" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.6.cmml">y</mi></mrow></msub><mo id="S2.E2.m1.5.5.2.2.2.2.2.4" xref="S2.E2.m1.5.5.2.2.2.3.cmml">,</mo><mrow id="S2.E2.m1.5.5.2.2.2.2.2.2" xref="S2.E2.m1.5.5.2.2.2.2.2.2.cmml"><mi id="S2.E2.m1.5.5.2.2.2.2.2.2.2" xref="S2.E2.m1.5.5.2.2.2.2.2.2.2.cmml">d</mi><mo id="S2.E2.m1.5.5.2.2.2.2.2.2.1" xref="S2.E2.m1.5.5.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S2.E2.m1.5.5.2.2.2.2.2.2.3" xref="S2.E2.m1.5.5.2.2.2.2.2.2.3.cmml">e</mi><mo id="S2.E2.m1.5.5.2.2.2.2.2.2.1a" xref="S2.E2.m1.5.5.2.2.2.2.2.2.1.cmml">⁢</mo><mi id="S2.E2.m1.5.5.2.2.2.2.2.2.4" xref="S2.E2.m1.5.5.2.2.2.2.2.2.4.cmml">m</mi><mo id="S2.E2.m1.5.5.2.2.2.2.2.2.1b" xref="S2.E2.m1.5.5.2.2.2.2.2.2.1.cmml">⁢</mo><msub id="S2.E2.m1.5.5.2.2.2.2.2.2.5" xref="S2.E2.m1.5.5.2.2.2.2.2.2.5.cmml"><mi id="S2.E2.m1.5.5.2.2.2.2.2.2.5.2" xref="S2.E2.m1.5.5.2.2.2.2.2.2.5.2.cmml">o</mi><mi id="S2.E2.m1.5.5.2.2.2.2.2.2.5.3" xref="S2.E2.m1.5.5.2.2.2.2.2.2.5.3.cmml">i</mi></msub></mrow><mo id="S2.E2.m1.5.5.2.2.2.2.2.5" xref="S2.E2.m1.5.5.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.5b"><apply id="S2.E2.m1.5.5.cmml" xref="S2.E2.m1.5.5"><eq id="S2.E2.m1.5.5.3.cmml" xref="S2.E2.m1.5.5.3"></eq><apply id="S2.E2.m1.5.5.4.cmml" xref="S2.E2.m1.5.5.4"><csymbol cd="ambiguous" id="S2.E2.m1.5.5.4.1.cmml" xref="S2.E2.m1.5.5.4">subscript</csymbol><ci id="S2.E2.m1.5.5.4.2.cmml" xref="S2.E2.m1.5.5.4.2">𝐷</ci><ci id="S2.E2.m1.5.5.4.3.cmml" xref="S2.E2.m1.5.5.4.3">𝐾</ci></apply><apply id="S2.E2.m1.5.5.2.cmml" xref="S2.E2.m1.5.5.2"><times id="S2.E2.m1.5.5.2.3.cmml" xref="S2.E2.m1.5.5.2.3"></times><apply id="S2.E2.m1.5.5.2.4.cmml" xref="S2.E2.m1.5.5.2.4"><arg id="S2.E2.m1.5.5.2.4.1.cmml" xref="S2.E2.m1.5.5.2.4.1"></arg><apply id="S2.E2.m1.5.5.2.4.2.cmml" xref="S2.E2.m1.5.5.2.4.2"><csymbol cd="ambiguous" id="S2.E2.m1.5.5.2.4.2.1.cmml" xref="S2.E2.m1.5.5.2.4.2">subscript</csymbol><max id="S2.E2.m1.5.5.2.4.2.2.cmml" xref="S2.E2.m1.5.5.2.4.2.2"></max><apply id="S2.E2.m1.2.2.2.3.cmml" xref="S2.E2.m1.2.2.2.2"><csymbol cd="ambiguous" id="S2.E2.m1.2.2.2.3a.cmml" xref="S2.E2.m1.2.2.2.2.3">formulae-sequence</csymbol><apply id="S2.E2.m1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1"><subset id="S2.E2.m1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1.1.1"></subset><apply id="S2.E2.m1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E2.m1.1.1.1.1.1.2.1.cmml" xref="S2.E2.m1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.E2.m1.1.1.1.1.1.2.2.cmml" xref="S2.E2.m1.1.1.1.1.1.2.2">𝐷</ci><ci id="S2.E2.m1.1.1.1.1.1.2.3.cmml" xref="S2.E2.m1.1.1.1.1.1.2.3">𝐾</ci></apply><ci id="S2.E2.m1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.1.1.1.1.1.3">𝐴</ci></apply><apply id="S2.E2.m1.2.2.2.2.2.cmml" xref="S2.E2.m1.2.2.2.2.2"><eq id="S2.E2.m1.2.2.2.2.2.2.cmml" xref="S2.E2.m1.2.2.2.2.2.2"></eq><apply id="S2.E2.m1.2.2.2.2.2.1.2.cmml" xref="S2.E2.m1.2.2.2.2.2.1.1"><abs id="S2.E2.m1.2.2.2.2.2.1.2.1.cmml" xref="S2.E2.m1.2.2.2.2.2.1.1.2"></abs><apply id="S2.E2.m1.2.2.2.2.2.1.1.1.cmml" xref="S2.E2.m1.2.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.2.2.2.2.2.1.1.1.1.cmml" xref="S2.E2.m1.2.2.2.2.2.1.1.1">subscript</csymbol><ci id="S2.E2.m1.2.2.2.2.2.1.1.1.2.cmml" xref="S2.E2.m1.2.2.2.2.2.1.1.1.2">𝐷</ci><ci id="S2.E2.m1.2.2.2.2.2.1.1.1.3.cmml" xref="S2.E2.m1.2.2.2.2.2.1.1.1.3">𝐾</ci></apply></apply><ci id="S2.E2.m1.2.2.2.2.2.3.cmml" xref="S2.E2.m1.2.2.2.2.2.3">𝐾</ci></apply></apply></apply></apply><apply id="S2.E2.m1.5.5.2.2.cmml" xref="S2.E2.m1.5.5.2.2"><apply id="S2.E2.m1.5.5.2.2.3.cmml" xref="S2.E2.m1.5.5.2.2.3"><csymbol cd="ambiguous" id="S2.E2.m1.5.5.2.2.3.1.cmml" xref="S2.E2.m1.5.5.2.2.3">subscript</csymbol><sum id="S2.E2.m1.5.5.2.2.3.2.cmml" xref="S2.E2.m1.5.5.2.2.3.2"></sum><apply id="S2.E2.m1.5.5.2.2.3.3.cmml" xref="S2.E2.m1.5.5.2.2.3.3"><and id="S2.E2.m1.5.5.2.2.3.3a.cmml" xref="S2.E2.m1.5.5.2.2.3.3"></and><apply id="S2.E2.m1.5.5.2.2.3.3b.cmml" xref="S2.E2.m1.5.5.2.2.3.3"><in id="S2.E2.m1.5.5.2.2.3.3.3.cmml" xref="S2.E2.m1.5.5.2.2.3.3.3"></in><apply id="S2.E2.m1.5.5.2.2.3.3.2.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2"><times id="S2.E2.m1.5.5.2.2.3.3.2.1.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2.1"></times><ci id="S2.E2.m1.5.5.2.2.3.3.2.2.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2.2">𝑑</ci><ci id="S2.E2.m1.5.5.2.2.3.3.2.3.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2.3">𝑒</ci><ci id="S2.E2.m1.5.5.2.2.3.3.2.4.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2.4">𝑚</ci><apply id="S2.E2.m1.5.5.2.2.3.3.2.5.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2.5"><csymbol cd="ambiguous" id="S2.E2.m1.5.5.2.2.3.3.2.5.1.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2.5">subscript</csymbol><ci id="S2.E2.m1.5.5.2.2.3.3.2.5.2.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2.5.2">𝑜</ci><ci id="S2.E2.m1.5.5.2.2.3.3.2.5.3.cmml" xref="S2.E2.m1.5.5.2.2.3.3.2.5.3">𝑖</ci></apply></apply><ci id="S2.E2.m1.5.5.2.2.3.3.4.cmml" xref="S2.E2.m1.5.5.2.2.3.3.4">𝐴</ci></apply><apply id="S2.E2.m1.5.5.2.2.3.3c.cmml" xref="S2.E2.m1.5.5.2.2.3.3"><subset id="S2.E2.m1.5.5.2.2.3.3.5.cmml" xref="S2.E2.m1.5.5.2.2.3.3.5"></subset><share href="https://arxiv.org/html/2410.09662v1#S2.E2.m1.5.5.2.2.3.3.4.cmml" id="S2.E2.m1.5.5.2.2.3.3d.cmml" xref="S2.E2.m1.5.5.2.2.3.3"></share><ci id="S2.E2.m1.5.5.2.2.3.3.6.cmml" xref="S2.E2.m1.5.5.2.2.3.3.6">𝐷</ci></apply></apply></apply><apply id="S2.E2.m1.5.5.2.2.2.3.cmml" xref="S2.E2.m1.5.5.2.2.2.2"><ci id="S2.E2.m1.3.3.cmml" xref="S2.E2.m1.3.3">Sim</ci><apply id="S2.E2.m1.4.4.1.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.2">𝐼</ci><apply id="S2.E2.m1.4.4.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3"><times id="S2.E2.m1.4.4.1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.1"></times><ci id="S2.E2.m1.4.4.1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.2">𝑞</ci><ci id="S2.E2.m1.4.4.1.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.3">𝑢</ci><ci id="S2.E2.m1.4.4.1.1.1.1.1.1.3.4.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.4">𝑒</ci><ci id="S2.E2.m1.4.4.1.1.1.1.1.1.3.5.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.5">𝑟</ci><ci id="S2.E2.m1.4.4.1.1.1.1.1.1.3.6.cmml" xref="S2.E2.m1.4.4.1.1.1.1.1.1.3.6">𝑦</ci></apply></apply><apply id="S2.E2.m1.5.5.2.2.2.2.2.2.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2"><times id="S2.E2.m1.5.5.2.2.2.2.2.2.1.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2.1"></times><ci id="S2.E2.m1.5.5.2.2.2.2.2.2.2.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2.2">𝑑</ci><ci id="S2.E2.m1.5.5.2.2.2.2.2.2.3.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2.3">𝑒</ci><ci id="S2.E2.m1.5.5.2.2.2.2.2.2.4.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2.4">𝑚</ci><apply id="S2.E2.m1.5.5.2.2.2.2.2.2.5.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2.5"><csymbol cd="ambiguous" id="S2.E2.m1.5.5.2.2.2.2.2.2.5.1.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2.5">subscript</csymbol><ci id="S2.E2.m1.5.5.2.2.2.2.2.2.5.2.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2.5.2">𝑜</ci><ci id="S2.E2.m1.5.5.2.2.2.2.2.2.5.3.cmml" xref="S2.E2.m1.5.5.2.2.2.2.2.2.5.3">𝑖</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.5c">D_{K}=\arg\max_{D_{K}\subset A,|D_{K}|=K}\sum_{demo_{i}\in A\subset D}%
\operatorname{Sim}\left(I_{query},demo_{i}\right)</annotation><annotation encoding="application/x-llamapun" id="S2.E2.m1.5d">italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT = roman_arg roman_max start_POSTSUBSCRIPT italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT ⊂ italic_A , | italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT | = italic_K end_POSTSUBSCRIPT ∑ start_POSTSUBSCRIPT italic_d italic_e italic_m italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∈ italic_A ⊂ italic_D end_POSTSUBSCRIPT roman_Sim ( italic_I start_POSTSUBSCRIPT italic_q italic_u italic_e italic_r italic_y end_POSTSUBSCRIPT , italic_d italic_e italic_m italic_o start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS2.p4">
<p class="ltx_p" id="S2.SS2.p4.1">Various ANN techniques exist to build these indexes, including tree-based (e.g., KDTree<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib24" title="">24</a>]</cite>, ANNOY<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib16" title="">16</a>]</cite>), graph-based (e.g., HNSW <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib25" title="">25</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib18" title="">18</a>]</cite>), and hash-based approaches (e.g., LSH <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib25" title="">25</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib17" title="">17</a>]</cite>). For instance, ANNOY creates a tree structure that partitions the data space, enabling early termination of the search process once a sufficiently close neighbor is identified. HNSW constructs a graph in which each vertex represents a data point linked to its true nearest neighbors, enabling efficient traversal to locate approximate nearest neighbors. Hash-based approaches, such as LSH, optimize search efficiency by reducing the dimensionality of data points using specialized hashing functions.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S2.SS3.4.1.1">II-C</span> </span><span class="ltx_text ltx_font_italic" id="S2.SS3.5.2">Related work</span>
</h3>
<div class="ltx_para" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.1">RAG has been increasingly adopted in coding tasks to improve the quality of outputs generated by LLMs <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib3" title="">3</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib5" title="">5</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite>. Chen et al.<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib3" title="">3</a>]</cite> explored a RAG framework for Code Suggestion, employing four retrieval strategies to identify similar code demonstrations. They observed that integrating retrieved demonstrations significantly improved outputs of LLMs in Code Suggestion tasks. Similarly, Zhou et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib5" title="">5</a>]</cite> proposed a text-to-code generation framework that utilizes retrieved API documentation, ensuring LLMs stay up-to-date with the latest API changes. Nashid et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>]</cite> demonstrated the effectiveness of RAG approaches in more complex tasks, such as Program Repair and automatic Assertion Generation, achieving notable improvements without requiring task-specific fine-tuning. In a systematic study, Gao et al.  <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite> analyzed the influence of retrieval demonstrations on various coding tasks, such as Code Summarization and Bug Fixing. They investigated optimal strategies for selecting, ordering, and determining the quantity of demonstrations.</p>
</div>
<div class="ltx_para" id="S2.SS3.p2">
<p class="ltx_p" id="S2.SS3.p2.1">Among these studies, sparse retrievers like BM25 and dense exhaustive retrievers utilizing encoders have become standard approaches in RAG workflows. However, no comprehensive studies have evaluated the effectiveness-efficiency trade-off between different retrievers. This trade-off is critical but often overlooked, as it significantly impacts both generation quality and runtime. Additionally, we are the first to investigate approximate dense retrievers in RAG for coding tasks using Approximate Nearest Neighbor search (ANN) <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib26" title="">26</a>]</cite>, a range of approaches widely studied in high-dimensional fields such as computer vision and recommendation systems <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib27" title="">27</a>]</cite>, but unexplored in RAG domain.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">III </span><span class="ltx_text ltx_font_smallcaps" id="S3.1.1">Experimental Design</span>
</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">In this section, we present our research questions (RQs),
studied dataset, retrievers, used prompt templates, implementation details, and our approach to RQs. We conduct all our experiments following the framework presented in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S2.F1" title="Figure 1 ‣ II Background ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S3.SS1.4.1.1">III-A</span> </span><span class="ltx_text ltx_font_italic" id="S3.SS1.5.2">Research Question</span>
</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">We aim to answer the following research question:</p>
<ul class="ltx_itemize" id="S3.I1">
<li class="ltx_item" id="S3.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i1.p1">
<p class="ltx_p" id="S3.I1.i1.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I1.i1.p1.1.1">RQ1: What is the effectiveness of different retrievers?</span></p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i2.p1">
<p class="ltx_p" id="S3.I1.i2.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I1.i2.p1.1.1">RQ2: What is the efficiency of different retrievers?</span></p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i3.p1">
<p class="ltx_p" id="S3.I1.i3.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I1.i3.p1.1.1">RQ3: What is the effectiveness-efficiency trade-off of different retrievers?</span></p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i4" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i4.p1">
<p class="ltx_p" id="S3.I1.i4.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I1.i4.p1.1.1">RQ4: What is the impact of the hyper-parameters of retrievers on their efficiency and effectiveness?</span></p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i5" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S3.I1.i5.p1">
<p class="ltx_p" id="S3.I1.i5.p1.1"><span class="ltx_text ltx_font_bold" id="S3.I1.i5.p1.1.1">RQ5: What is the impact of the number of shots in RAG?</span></p>
</div>
</li>
</ul>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.1">In RQ1, we aim to evaluate the effectiveness of various retrievers by comparing how well they retrieve relevant demonstrations that enhance output quality. RQ2 focuses on the efficiency of these retrievers, assessing retrieval time and scalability as the knowledge base grows. RQ3 investigates the trade-off between effectiveness and efficiency, identifying retrievers that balance high-quality output with minimal retrieval time. RQ4 explores approximate dense retrievers, analyzing how parameter adjustments impact both retrieval time and generation quality. Finally, RQ5 examines the effect of the number of demonstrations, determining whether increasing the number of shots consistently improves effectivenes.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S3.SS2.4.1.1">III-B</span> </span><span class="ltx_text ltx_font_italic" id="S3.SS2.5.2">Dataset and Metric</span>
</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">To answer our RQs, we conducted our study on three popular coding tasks: Program Synthesis <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib28" title="">28</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib5" title="">5</a>]</cite>, Commit Message Generation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib29" title="">29</a>]</cite>, and Assertion Generation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib13" title="">13</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1">Program Synthesis focuses on generating code snippets from natural language requirements. We employed the CoNaLa dataset <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib28" title="">28</a>]</cite>, which contains 2,889 NL-code pairs from Stack Overflow (Python). Following prior research <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite>, we used four evaluation metrics: Code Bleu <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib30" title="">30</a>]</cite>, Syntax Match, Dataflow Match, and N-gram Match rate. These metrics capture both surface- and semantic- level correctness, with Code Bleu extending traditional BLEU for code features.</p>
</div>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.1">Commit Message Generation involves creating descriptive messages to accompany code changes during commits. For this, we utilized the NNgen dataset <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib29" title="">29</a>]</cite>, which consists of diff-commit pairs from Git repositories. The diff serves as the input, representing the changes between two repository versions, while the commit serves as the output, summarizing the change. We evaluated the task using RougeL, Meteror, Rouge1, and Rouge2, following previous work <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib29" title="">29</a>]</cite>. RougeL measures the longest common subsequence between the generated and reference messages, while Meteor combines unigram precision and recall. Rouge1 and Rouge2 assess unigram and bigram overlaps, respectively.</p>
</div>
<div class="ltx_para" id="S3.SS2.p4">
<p class="ltx_p" id="S3.SS2.p4.2">Assertion Generation automates the creation of assertion statements to verify the correctness of a focal method (i.e., a method under
test). We used the Atlas dataset <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>]</cite>, which contains pairs of focal and test methods to generate assertion statements. Following <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>]</cite>, we employed four evaluation metrics: Exact Match, Plausible Match, Longest Common Subsequence, and Edit Distance. Exact Match rate measures the proportion of predictions that exactly match the ground truth, while Plausible Match accounts for semantically equivalent assertions (e.g., treating <math alttext="assertTrue(value==0)" class="ltx_math_unparsed" display="inline" id="S3.SS2.p4.1.m1.1"><semantics id="S3.SS2.p4.1.m1.1a"><mrow id="S3.SS2.p4.1.m1.1b"><mi id="S3.SS2.p4.1.m1.1.1">a</mi><mi id="S3.SS2.p4.1.m1.1.2">s</mi><mi id="S3.SS2.p4.1.m1.1.3">s</mi><mi id="S3.SS2.p4.1.m1.1.4">e</mi><mi id="S3.SS2.p4.1.m1.1.5">r</mi><mi id="S3.SS2.p4.1.m1.1.6">t</mi><mi id="S3.SS2.p4.1.m1.1.7">T</mi><mi id="S3.SS2.p4.1.m1.1.8">r</mi><mi id="S3.SS2.p4.1.m1.1.9">u</mi><mi id="S3.SS2.p4.1.m1.1.10">e</mi><mrow id="S3.SS2.p4.1.m1.1.11"><mo id="S3.SS2.p4.1.m1.1.11.1" stretchy="false">(</mo><mi id="S3.SS2.p4.1.m1.1.11.2">v</mi><mi id="S3.SS2.p4.1.m1.1.11.3">a</mi><mi id="S3.SS2.p4.1.m1.1.11.4">l</mi><mi id="S3.SS2.p4.1.m1.1.11.5">u</mi><mi id="S3.SS2.p4.1.m1.1.11.6">e</mi><mo id="S3.SS2.p4.1.m1.1.11.7" rspace="0em">=</mo><mo id="S3.SS2.p4.1.m1.1.11.8" lspace="0em">=</mo><mn id="S3.SS2.p4.1.m1.1.11.9">0</mn><mo id="S3.SS2.p4.1.m1.1.11.10" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S3.SS2.p4.1.m1.1c">assertTrue(value==0)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.1.m1.1d">italic_a italic_s italic_s italic_e italic_r italic_t italic_T italic_r italic_u italic_e ( italic_v italic_a italic_l italic_u italic_e = = 0 )</annotation></semantics></math> and <math alttext="assertEquals(value,0)" class="ltx_Math" display="inline" id="S3.SS2.p4.2.m2.2"><semantics id="S3.SS2.p4.2.m2.2a"><mrow id="S3.SS2.p4.2.m2.2.2" xref="S3.SS2.p4.2.m2.2.2.cmml"><mi id="S3.SS2.p4.2.m2.2.2.3" xref="S3.SS2.p4.2.m2.2.2.3.cmml">a</mi><mo id="S3.SS2.p4.2.m2.2.2.2" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.4" xref="S3.SS2.p4.2.m2.2.2.4.cmml">s</mi><mo id="S3.SS2.p4.2.m2.2.2.2a" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.5" xref="S3.SS2.p4.2.m2.2.2.5.cmml">s</mi><mo id="S3.SS2.p4.2.m2.2.2.2b" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.6" xref="S3.SS2.p4.2.m2.2.2.6.cmml">e</mi><mo id="S3.SS2.p4.2.m2.2.2.2c" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.7" xref="S3.SS2.p4.2.m2.2.2.7.cmml">r</mi><mo id="S3.SS2.p4.2.m2.2.2.2d" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.8" xref="S3.SS2.p4.2.m2.2.2.8.cmml">t</mi><mo id="S3.SS2.p4.2.m2.2.2.2e" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.9" xref="S3.SS2.p4.2.m2.2.2.9.cmml">E</mi><mo id="S3.SS2.p4.2.m2.2.2.2f" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.10" xref="S3.SS2.p4.2.m2.2.2.10.cmml">q</mi><mo id="S3.SS2.p4.2.m2.2.2.2g" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.11" xref="S3.SS2.p4.2.m2.2.2.11.cmml">u</mi><mo id="S3.SS2.p4.2.m2.2.2.2h" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.12" xref="S3.SS2.p4.2.m2.2.2.12.cmml">a</mi><mo id="S3.SS2.p4.2.m2.2.2.2i" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.13" xref="S3.SS2.p4.2.m2.2.2.13.cmml">l</mi><mo id="S3.SS2.p4.2.m2.2.2.2j" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.14" xref="S3.SS2.p4.2.m2.2.2.14.cmml">s</mi><mo id="S3.SS2.p4.2.m2.2.2.2k" xref="S3.SS2.p4.2.m2.2.2.2.cmml">⁢</mo><mrow id="S3.SS2.p4.2.m2.2.2.1.1" xref="S3.SS2.p4.2.m2.2.2.1.2.cmml"><mo id="S3.SS2.p4.2.m2.2.2.1.1.2" stretchy="false" xref="S3.SS2.p4.2.m2.2.2.1.2.cmml">(</mo><mrow id="S3.SS2.p4.2.m2.2.2.1.1.1" xref="S3.SS2.p4.2.m2.2.2.1.1.1.cmml"><mi id="S3.SS2.p4.2.m2.2.2.1.1.1.2" xref="S3.SS2.p4.2.m2.2.2.1.1.1.2.cmml">v</mi><mo id="S3.SS2.p4.2.m2.2.2.1.1.1.1" xref="S3.SS2.p4.2.m2.2.2.1.1.1.1.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.1.1.1.3" xref="S3.SS2.p4.2.m2.2.2.1.1.1.3.cmml">a</mi><mo id="S3.SS2.p4.2.m2.2.2.1.1.1.1a" xref="S3.SS2.p4.2.m2.2.2.1.1.1.1.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.1.1.1.4" xref="S3.SS2.p4.2.m2.2.2.1.1.1.4.cmml">l</mi><mo id="S3.SS2.p4.2.m2.2.2.1.1.1.1b" xref="S3.SS2.p4.2.m2.2.2.1.1.1.1.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.1.1.1.5" xref="S3.SS2.p4.2.m2.2.2.1.1.1.5.cmml">u</mi><mo id="S3.SS2.p4.2.m2.2.2.1.1.1.1c" xref="S3.SS2.p4.2.m2.2.2.1.1.1.1.cmml">⁢</mo><mi id="S3.SS2.p4.2.m2.2.2.1.1.1.6" xref="S3.SS2.p4.2.m2.2.2.1.1.1.6.cmml">e</mi></mrow><mo id="S3.SS2.p4.2.m2.2.2.1.1.3" xref="S3.SS2.p4.2.m2.2.2.1.2.cmml">,</mo><mn id="S3.SS2.p4.2.m2.1.1" xref="S3.SS2.p4.2.m2.1.1.cmml">0</mn><mo id="S3.SS2.p4.2.m2.2.2.1.1.4" stretchy="false" xref="S3.SS2.p4.2.m2.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.2.m2.2b"><apply id="S3.SS2.p4.2.m2.2.2.cmml" xref="S3.SS2.p4.2.m2.2.2"><times id="S3.SS2.p4.2.m2.2.2.2.cmml" xref="S3.SS2.p4.2.m2.2.2.2"></times><ci id="S3.SS2.p4.2.m2.2.2.3.cmml" xref="S3.SS2.p4.2.m2.2.2.3">𝑎</ci><ci id="S3.SS2.p4.2.m2.2.2.4.cmml" xref="S3.SS2.p4.2.m2.2.2.4">𝑠</ci><ci id="S3.SS2.p4.2.m2.2.2.5.cmml" xref="S3.SS2.p4.2.m2.2.2.5">𝑠</ci><ci id="S3.SS2.p4.2.m2.2.2.6.cmml" xref="S3.SS2.p4.2.m2.2.2.6">𝑒</ci><ci id="S3.SS2.p4.2.m2.2.2.7.cmml" xref="S3.SS2.p4.2.m2.2.2.7">𝑟</ci><ci id="S3.SS2.p4.2.m2.2.2.8.cmml" xref="S3.SS2.p4.2.m2.2.2.8">𝑡</ci><ci id="S3.SS2.p4.2.m2.2.2.9.cmml" xref="S3.SS2.p4.2.m2.2.2.9">𝐸</ci><ci id="S3.SS2.p4.2.m2.2.2.10.cmml" xref="S3.SS2.p4.2.m2.2.2.10">𝑞</ci><ci id="S3.SS2.p4.2.m2.2.2.11.cmml" xref="S3.SS2.p4.2.m2.2.2.11">𝑢</ci><ci id="S3.SS2.p4.2.m2.2.2.12.cmml" xref="S3.SS2.p4.2.m2.2.2.12">𝑎</ci><ci id="S3.SS2.p4.2.m2.2.2.13.cmml" xref="S3.SS2.p4.2.m2.2.2.13">𝑙</ci><ci id="S3.SS2.p4.2.m2.2.2.14.cmml" xref="S3.SS2.p4.2.m2.2.2.14">𝑠</ci><interval closure="open" id="S3.SS2.p4.2.m2.2.2.1.2.cmml" xref="S3.SS2.p4.2.m2.2.2.1.1"><apply id="S3.SS2.p4.2.m2.2.2.1.1.1.cmml" xref="S3.SS2.p4.2.m2.2.2.1.1.1"><times id="S3.SS2.p4.2.m2.2.2.1.1.1.1.cmml" xref="S3.SS2.p4.2.m2.2.2.1.1.1.1"></times><ci id="S3.SS2.p4.2.m2.2.2.1.1.1.2.cmml" xref="S3.SS2.p4.2.m2.2.2.1.1.1.2">𝑣</ci><ci id="S3.SS2.p4.2.m2.2.2.1.1.1.3.cmml" xref="S3.SS2.p4.2.m2.2.2.1.1.1.3">𝑎</ci><ci id="S3.SS2.p4.2.m2.2.2.1.1.1.4.cmml" xref="S3.SS2.p4.2.m2.2.2.1.1.1.4">𝑙</ci><ci id="S3.SS2.p4.2.m2.2.2.1.1.1.5.cmml" xref="S3.SS2.p4.2.m2.2.2.1.1.1.5">𝑢</ci><ci id="S3.SS2.p4.2.m2.2.2.1.1.1.6.cmml" xref="S3.SS2.p4.2.m2.2.2.1.1.1.6">𝑒</ci></apply><cn id="S3.SS2.p4.2.m2.1.1.cmml" type="integer" xref="S3.SS2.p4.2.m2.1.1">0</cn></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.2.m2.2c">assertEquals(value,0)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.2.m2.2d">italic_a italic_s italic_s italic_e italic_r italic_t italic_E italic_q italic_u italic_a italic_l italic_s ( italic_v italic_a italic_l italic_u italic_e , 0 )</annotation></semantics></math> as identical). Longest Common Subsequence evaluates the overlap between predicted and expected assertions, and Edit Distance calculates the number of edits needed to match the prediction to the ground truth.</p>
</div>
<div class="ltx_para" id="S3.SS2.p5">
<p class="ltx_p" id="S3.SS2.p5.1">For RQ1, we report the effectiveness in terms of all introduced evaluation metrics. However, given the space constraints and the correlation among metrics, in RQ2 to RQ5, we primarily focus on <span class="ltx_text ltx_font_bold" id="S3.SS2.p5.1.1">Code Bleu</span>, <span class="ltx_text ltx_font_bold" id="S3.SS2.p5.1.2">RougeL</span>, and <span class="ltx_text ltx_font_bold" id="S3.SS2.p5.1.3">Exact Match</span> for Program Synthesis, Commit Generation, and Assertion Generation, respectively.</p>
</div>
<div class="ltx_para" id="S3.SS2.p6">
<p class="ltx_p" id="S3.SS2.p6.1">The statistics for these three tasks are presented in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.T1" title="TABLE I ‣ III-B Dataset and Metric ‣ III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">I</span></a>. We used the original dataset partitions, with the training set serving as the knowledge base and the test set for evaluation. Our dataset consists of tasks with different size of knowledge base for retrieval.</p>
</div>
<figure class="ltx_table" id="S3.T1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE I: </span>Statistics of our studied datasets.</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S3.T1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T1.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S3.T1.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S3.T1.1.1.1.1.1">Task</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T1.1.1.1.2"><span class="ltx_text ltx_font_bold" id="S3.T1.1.1.1.2.1">Dataset</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T1.1.1.1.3"><span class="ltx_text ltx_font_bold" id="S3.T1.1.1.1.3.1">Knowledge Base</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T1.1.1.1.4"><span class="ltx_text ltx_font_bold" id="S3.T1.1.1.1.4.1">Test</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T1.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T1.1.2.1.1">Program Synthesis</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.2.1.2">CoNaLa<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib28" title="">28</a>]</cite>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.2.1.3">2,300</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T1.1.2.1.4">477</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T1.1.3.2.1">Commit Generation</th>
<td class="ltx_td ltx_align_center" id="S3.T1.1.3.2.2">NNGen<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib29" title="">29</a>]</cite>
</td>
<td class="ltx_td ltx_align_center" id="S3.T1.1.3.2.3">22,112</td>
<td class="ltx_td ltx_align_center" id="S3.T1.1.3.2.4">2,521</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S3.T1.1.4.3.1">Assertion Generation</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T1.1.4.3.2">Atlas<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>]</cite>
</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T1.1.4.3.3">150,523</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T1.1.4.3.4">18,027</td>
</tr>
</tbody>
</table>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S3.SS3.4.1.1">III-C</span> </span><span class="ltx_text ltx_font_italic" id="S3.SS3.5.2">Studied Retrievers</span>
</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">To ensure reliable insights, we selected representative retrievers from both sparse and dense retrieval families for their broad adoption in various studies <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib15" title="">15</a>]</cite>. For sparse retrievers, we chose two retrievers: BM25 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib21" title="">21</a>]</cite> and BM25L <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib14" title="">14</a>]</cite>. For dense retrievers, we selected SBERT_SS <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib11" title="">11</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite> as the non-approximate dense retriever. For approximate dense retrievers, we selected three ANN approaches based on different underlying structures: ANNOY <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib16" title="">16</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib26" title="">26</a>]</cite> for tree-based approaches, LSH <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib17" title="">17</a>]</cite> for hash-based approaches, and HNSW <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib18" title="">18</a>]</cite> for graph-based approaches.</p>
</div>
<div class="ltx_para" id="S3.SS3.p2">
<p class="ltx_p" id="S3.SS3.p2.1">BM25<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib21" title="">21</a>]</cite> is an advanced ranking function used in information retrieval to assess the relevance of documents to a search query. Building on the conventional TF-IDF model, BM25 improves by incorporating document length normalization and a non-linear term frequency function. We utilize the rank-bm25 implementation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib9" title="">9</a>]</cite>, which has also been employed in previous research <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib10" title="">10</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib15" title="">15</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib5" title="">5</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S3.SS3.p3">
<p class="ltx_p" id="S3.SS3.p3.1">BM25L<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib14" title="">14</a>]</cite> is a variant of BM25 that modifies the document length normalization factor to enhance retrieval performance for longer documents. This adaptation addresses the bias toward shorter documents present in the original BM25 model. Like BM25, we also use the rank-bm25 implementation.</p>
</div>
<div class="ltx_para" id="S3.SS3.p4">
<p class="ltx_p" id="S3.SS3.p4.1">SBERT_SS <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib31" title="">31</a>]</cite> is a built-in method of SBERT that computes the cosine similarity between the query vector and all demonstration vectors in the knowledge base. SBERT_SS has been widely used in previous works <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib5" title="">5</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib32" title="">32</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S3.SS3.p5">
<p class="ltx_p" id="S3.SS3.p5.1">ANNOY <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib16" title="">16</a>]</cite> constructs a forest of binary trees using random projections. Each non-leaf node acts as a hyperplane, splitting the space into two partitions. During a search, ANNOY traverses these trees, comparing the query point to points in each leaf node and updating the current nearest data point. The hyper-parameter <span class="ltx_text ltx_font_bold" id="S3.SS3.p5.1.1">Search_K</span> (the number of nodes inspected) controls the trade-off between precision and efficiency. ANNOY is a competitive ANN approach in the ANN benchmark<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib26" title="">26</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S3.SS3.p6">
<p class="ltx_p" id="S3.SS3.p6.1">LSH <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib17" title="">17</a>]</cite> reduces data dimensionality while preserving local distances. For a binary flat index, LSH converts data points into binary vectors, increasing the likelihood that similar data points are hashed into the same bucket. The hyper-parameter <span class="ltx_text ltx_font_bold" id="S3.SS3.p6.1.1">Nbit</span> (the number of bits) controls the trade-off between precision and efficiency. We use the faiss<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib25" title="">25</a>]</cite> implementation, which is also utilized in the ANN benchmark<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib26" title="">26</a>]</cite>.</p>
</div>
<div class="ltx_para" id="S3.SS3.p7">
<p class="ltx_p" id="S3.SS3.p7.1">HNSW <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib18" title="">18</a>]</cite> organizes data points into hierarchical layers and leverages small-world network properties. The search begins at the top layer and moves downward, with each layer refining the search by following connections to nodes closer to the query. The hyper-parameter <span class="ltx_text ltx_font_bold" id="S3.SS3.p7.1.1">M</span> (the number of neighbors in the graph) controls the trade-off between precision and efficiency. We use the faiss implementation for HNSW as well.</p>
</div>
<figure class="ltx_table" id="S3.T2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE II: </span>Prompt templates for the three studied tasks.</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S3.T2.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T2.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S3.T2.1.1.1.1">Task</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T2.1.1.1.2">Program Synthesis</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T2.1.1.1.3">Commit Generation</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T2.1.1.1.4">Assertion Generation</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T2.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t" id="S3.T2.1.2.1.1">Templates</th>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="S3.T2.1.2.1.2">
<table class="ltx_tabular ltx_align_middle" id="S3.T2.1.2.1.2.1">
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.1.1">Generate only single line code</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.2.1">for the target requirement directly,</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.3.1">and nothing else.</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.4.1">### requirement: [requirement]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.5.1">### code: [code]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.6">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.6.1">end_of_demo</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.7">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.7.1">…</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.8">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.8.1">### target requirement: [requirement]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.2.1.9">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.2.1.9.1">### code: [code]</td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t" id="S3.T2.1.2.1.3">
<table class="ltx_tabular ltx_align_middle" id="S3.T2.1.2.1.3.1">
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.1.1">Generate commit message for</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.2.1">query diff: [diff]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.3.1">commit message: [commit massage]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.4.1">only return the [commit massage],</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.5.1">and nothing else.</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.6">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.6.1">Make sure your output is for query diff</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.7">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.7.1">and concise.</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.8">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.8.1">Here are some reference demonstrations:</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.9">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.9.1">diff: [diff],</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.10">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.10.1">commit message: [commit massage]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.3.1.11">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.3.1.11.1">…</td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_t" id="S3.T2.1.2.1.4">
<table class="ltx_tabular ltx_align_middle" id="S3.T2.1.2.1.4.1">
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.1.1">Generate only assertions based on DEMO,</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.2.1">and nothing else.</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.3">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.3.1">### METHOD_UNDER_TEST: [focal method]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.4">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.4.1">### UNIT_TEST  [test method]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.5">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.5.1">### generate assertion:
[assertion]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.6">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.6.1">end_of_demo</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.7">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.7.1">…</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.8">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.8.1">### METHOD_UNDER_TEST: [focal method]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.9">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.9.1">### UNIT_TEST  [test method]</td>
</tr>
<tr class="ltx_tr" id="S3.T2.1.2.1.4.1.10">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T2.1.2.1.4.1.10.1">### generate assertion:
[assertion]</td>
</tr>
</table>
</td>
</tr>
</tbody>
</table>
</figure>
</section>
<section class="ltx_subsection" id="S3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S3.SS4.4.1.1">III-D</span> </span><span class="ltx_text ltx_font_italic" id="S3.SS4.5.2">Prompt Templates</span>
</h3>
<div class="ltx_para" id="S3.SS4.p1">
<p class="ltx_p" id="S3.SS4.p1.1">For a given coding task, we combine demonstrations, queries, and natural language instructions through templates to construct prompts. Building on top of previous work <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib3" title="">3</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib6" title="">6</a>]</cite>, we adapted the prompt templates to our specific tasks. The task-specific templates are presented in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.T2" title="TABLE II ‣ III-C Studied Retrievers ‣ III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">II</span></a>. These RAG-enhanced prompts provide LLM with additional context about the developer’s intent, potentially improving the quality of the generated output.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S3.SS5.4.1.1">III-E</span> </span><span class="ltx_text ltx_font_italic" id="S3.SS5.5.2">Implementation details</span>
</h3>
<div class="ltx_para" id="S3.SS5.p1">
<p class="ltx_p" id="S3.SS5.p1.1"><span class="ltx_text ltx_font_bold" id="S3.SS5.p1.1.1">Large Language Model.</span> To ensure transparency and reproducibility of our experiments, we use one of the more recent open-source LLMs fine-tuned for code, CodeLlama-Instruct-13B <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib33" title="">33</a>]</cite> for all tasks. CodeLlama is trained based on Llama 2 for coding tasks, which supports large input contexts as well as zero-shot instructions. We set the temperature to 0 to get a more consistent output. Due to memory constraints, the maximum number of tokens is set to 7000. Thus, in the Assertion Generation task, we tested 1,444 samples in the Atlas test set that satisfy the length limit.</p>
</div>
<div class="ltx_para" id="S3.SS5.p2">
<p class="ltx_p" id="S3.SS5.p2.1"><span class="ltx_text ltx_font_bold" id="S3.SS5.p2.1.1">Computing hardware.</span> We conduct all the experiments on a Linux server with four Nvidia RTX 3090 GPUs, AMD Ryzen 48-Core CPU, and 256 GB RAM.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS6">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S3.SS6.4.1.1">III-F</span> </span><span class="ltx_text ltx_font_italic" id="S3.SS6.5.2">Approach of RQs</span>
</h3>
<div class="ltx_para" id="S3.SS6.p1">
<p class="ltx_p" id="S3.SS6.p1.1"><span class="ltx_text ltx_font_bold" id="S3.SS6.p1.1.1">RQ1:</span> Our goal is to evaluate the effectiveness of various retrievers in the context of RAG for coding tasks. We assess their effectiveness by integrating them into the RAG process and comparing the generated outputs using our chosen evaluation metrics. A retriever is deemed more effective if its integration into RAG leads to better results.</p>
</div>
<div class="ltx_para" id="S3.SS6.p2">
<p class="ltx_p" id="S3.SS6.p2.1">To further understand why some retrievers outperform others, we examine which retrievers return better demonstrations during the retrieval phase. Unlike previous works <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib34" title="">34</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib35" title="">35</a>]</cite>, coding tasks do not have explicitly defined <em class="ltx_emph ltx_font_italic" id="S3.SS6.p2.1.1">ground truth</em> for relevant demonstrations.
However, as shown in prior studies <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib36" title="">36</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite>, demonstrations that closely match the output sequences of a query, rather than its input sequences, usually can be referred to as <em class="ltx_emph ltx_font_italic" id="S3.SS6.p2.1.2">gold demonstrations</em>, and provide the greatest benefit in improving the quality of the generated output. Notably, the output of the query is only accessible during the experiment. By using <em class="ltx_emph ltx_font_italic" id="S3.SS6.p2.1.3">gold demonstrations</em> as the <em class="ltx_emph ltx_font_italic" id="S3.SS6.p2.1.4">ground truth</em>, we can evaluate how well a retriever performs in retrieving demonstrations. To quantify this, we introduce a modified recall metric, <em class="ltx_emph ltx_font_italic" id="S3.SS6.p2.1.5">RecallGold@K</em>, which is defined as the fraction of correctly retrieved <em class="ltx_emph ltx_font_italic" id="S3.SS6.p2.1.6">gold demonstrations</em> from the top <math alttext="K" class="ltx_Math" display="inline" id="S3.SS6.p2.1.m1.1"><semantics id="S3.SS6.p2.1.m1.1a"><mi id="S3.SS6.p2.1.m1.1.1" xref="S3.SS6.p2.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.SS6.p2.1.m1.1b"><ci id="S3.SS6.p2.1.m1.1.1.cmml" xref="S3.SS6.p2.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS6.p2.1.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="S3.SS6.p2.1.m1.1d">italic_K</annotation></semantics></math> retrieved demonstrations. The formula is given by:</p>
<table class="ltx_equationgroup ltx_eqn_table" id="S3.E3">
<tbody>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E3X">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\emph{RecallGold@K}=\frac{\left|D_{K}\cap D_{K}^{Gold}\right|}{K}" class="ltx_Math" display="inline" id="S3.E3X.2.1.1.m1.1"><semantics id="S3.E3X.2.1.1.m1.1a"><mrow id="S3.E3X.2.1.1.m1.1.2" xref="S3.E3X.2.1.1.m1.1.2.cmml"><mtext class="ltx_mathvariant_italic" id="S3.E3X.2.1.1.m1.1.2.2" xref="S3.E3X.2.1.1.m1.1.2.2b.cmml"><em class="ltx_emph ltx_font_italic" id="S3.E3X.2.1.1.m1.1.2.2.1nest">RecallGold@K</em></mtext><mo id="S3.E3X.2.1.1.m1.1.2.1" xref="S3.E3X.2.1.1.m1.1.2.1.cmml">=</mo><mstyle displaystyle="true" id="S3.E3X.2.1.1.m1.1.1" xref="S3.E3X.2.1.1.m1.1.1.cmml"><mfrac id="S3.E3X.2.1.1.m1.1.1a" xref="S3.E3X.2.1.1.m1.1.1.cmml"><mrow id="S3.E3X.2.1.1.m1.1.1.1.1" xref="S3.E3X.2.1.1.m1.1.1.1.2.cmml"><mo id="S3.E3X.2.1.1.m1.1.1.1.1.2" xref="S3.E3X.2.1.1.m1.1.1.1.2.1.cmml">|</mo><mrow id="S3.E3X.2.1.1.m1.1.1.1.1.1" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.cmml"><msub id="S3.E3X.2.1.1.m1.1.1.1.1.1.2" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.2.cmml"><mi id="S3.E3X.2.1.1.m1.1.1.1.1.1.2.2" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.2.2.cmml">D</mi><mi id="S3.E3X.2.1.1.m1.1.1.1.1.1.2.3" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.2.3.cmml">K</mi></msub><mo id="S3.E3X.2.1.1.m1.1.1.1.1.1.1" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.1.cmml">∩</mo><msubsup id="S3.E3X.2.1.1.m1.1.1.1.1.1.3" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.cmml"><mi id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.2" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.2.cmml">D</mi><mi id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.3" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.3.cmml">K</mi><mrow id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.cmml"><mi id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.2" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.2.cmml">G</mi><mo id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.1" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.3" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.3.cmml">o</mi><mo id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.1a" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.4" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.4.cmml">l</mi><mo id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.1b" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.1.cmml">⁢</mo><mi id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.5" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.5.cmml">d</mi></mrow></msubsup></mrow><mo id="S3.E3X.2.1.1.m1.1.1.1.1.3" xref="S3.E3X.2.1.1.m1.1.1.1.2.1.cmml">|</mo></mrow><mi id="S3.E3X.2.1.1.m1.1.1.3" xref="S3.E3X.2.1.1.m1.1.1.3.cmml">K</mi></mfrac></mstyle></mrow><annotation-xml encoding="MathML-Content" id="S3.E3X.2.1.1.m1.1b"><apply id="S3.E3X.2.1.1.m1.1.2.cmml" xref="S3.E3X.2.1.1.m1.1.2"><eq id="S3.E3X.2.1.1.m1.1.2.1.cmml" xref="S3.E3X.2.1.1.m1.1.2.1"></eq><ci id="S3.E3X.2.1.1.m1.1.2.2b.cmml" xref="S3.E3X.2.1.1.m1.1.2.2"><mtext class="ltx_mathvariant_italic" id="S3.E3X.2.1.1.m1.1.2.2.cmml" xref="S3.E3X.2.1.1.m1.1.2.2"><em class="ltx_emph ltx_font_italic" id="S3.E3X.2.1.1.m1.1.2.2.1anest">RecallGold@K</em></mtext></ci><apply id="S3.E3X.2.1.1.m1.1.1.cmml" xref="S3.E3X.2.1.1.m1.1.1"><divide id="S3.E3X.2.1.1.m1.1.1.2.cmml" xref="S3.E3X.2.1.1.m1.1.1"></divide><apply id="S3.E3X.2.1.1.m1.1.1.1.2.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1"><abs id="S3.E3X.2.1.1.m1.1.1.1.2.1.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.2"></abs><apply id="S3.E3X.2.1.1.m1.1.1.1.1.1.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1"><intersect id="S3.E3X.2.1.1.m1.1.1.1.1.1.1.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.1"></intersect><apply id="S3.E3X.2.1.1.m1.1.1.1.1.1.2.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E3X.2.1.1.m1.1.1.1.1.1.2.1.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E3X.2.1.1.m1.1.1.1.1.1.2.2.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.2.2">𝐷</ci><ci id="S3.E3X.2.1.1.m1.1.1.1.1.1.2.3.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.2.3">𝐾</ci></apply><apply id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.1.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3">superscript</csymbol><apply id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.1.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.2.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.2">𝐷</ci><ci id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.3.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.2.3">𝐾</ci></apply><apply id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3"><times id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.1.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.1"></times><ci id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.2.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.2">𝐺</ci><ci id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.3.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.3">𝑜</ci><ci id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.4.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.4">𝑙</ci><ci id="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.5.cmml" xref="S3.E3X.2.1.1.m1.1.1.1.1.1.3.3.5">𝑑</ci></apply></apply></apply></apply><ci id="S3.E3X.2.1.1.m1.1.1.3.cmml" xref="S3.E3X.2.1.1.m1.1.1.3">𝐾</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3X.2.1.1.m1.1c">\displaystyle\emph{RecallGold@K}=\frac{\left|D_{K}\cap D_{K}^{Gold}\right|}{K}</annotation><annotation encoding="application/x-llamapun" id="S3.E3X.2.1.1.m1.1d">RecallGold@K = divide start_ARG | italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT ∩ italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_G italic_o italic_l italic_d end_POSTSUPERSCRIPT | end_ARG start_ARG italic_K end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(3)</span></td>
</tr>
</tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS6.p3">
<p class="ltx_p" id="S3.SS6.p3.1">To mitigate the noise introduced by multiple demonstrations <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib15" title="">15</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib3" title="">3</a>]</cite>, we set <math alttext="K" class="ltx_Math" display="inline" id="S3.SS6.p3.1.m1.1"><semantics id="S3.SS6.p3.1.m1.1a"><mi id="S3.SS6.p3.1.m1.1.1" xref="S3.SS6.p3.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.SS6.p3.1.m1.1b"><ci id="S3.SS6.p3.1.m1.1.1.cmml" xref="S3.SS6.p3.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS6.p3.1.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="S3.SS6.p3.1.m1.1d">italic_K</annotation></semantics></math>=1 in RQ1-4 and discuss the multiple-shot context in RQ5.</p>
</div>
<div class="ltx_para" id="S3.SS6.p4">
<p class="ltx_p" id="S3.SS6.p4.1"><span class="ltx_text ltx_font_bold" id="S3.SS6.p4.1.1">RQ2:</span> The efficiency of a retriever is determined by <em class="ltx_emph ltx_font_italic" id="S3.SS6.p4.1.2">how much time it takes to return the demonstrations for a query</em>. To evaluate this, we compared their <span class="ltx_text ltx_font_bold" id="S3.SS6.p4.1.3">Time Per Query</span> <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib26" title="">26</a>]</cite>, aiming to identify the most efficient retrievers. Additionally, given the need for <span class="ltx_text ltx_font_bold" id="S3.SS6.p4.1.4">scalability</span> in RAG when increasing the knowledge base, we examined how each retrievers scales with the size of the knowledge base. This involved assessing retrieval efficiency under varying data loads.</p>
</div>
<div class="ltx_para" id="S3.SS6.p5">
<p class="ltx_p" id="S3.SS6.p5.1"><span class="ltx_text ltx_font_bold" id="S3.SS6.p5.1.1">RQ3:</span> When deploying RAG systems, achieving a balance between efficiency and effectiveness is essential <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib34" title="">34</a>]</cite>. This requires considering both how quickly the retriever returns demonstrations and the quality of the final generated results. To observe this trade-off, we calculated the <span class="ltx_text ltx_font_bold" id="S3.SS6.p5.1.2">Speedup</span> of other retriever relative to the the state-of-the-art BM25 and the decrease in generation quality. We also plot <span class="ltx_text ltx_font_bold" id="S3.SS6.p5.1.3">Queries Per Second (QPS)</span> against the used evaluation metrics for measuring effectiveness, aiming to identify the optimal balance, typically located in the upper-right region of the plots.</p>
</div>
<div class="ltx_para" id="S3.SS6.p6">
<p class="ltx_p" id="S3.SS6.p6.1"><span class="ltx_text ltx_font_bold" id="S3.SS6.p6.1.1">RQ4:</span>
Approximate retrievers (LSH, ANNOY, HNSW) allow for tuning the degrees of approximation by adjusting hyper-parameter settings, which potentially affects their efficiency and effectiveness. In RQ1-3, we use the default hyper-parameter settings for the approximate dense retrievers. To identify the hyper-parameters that best balance effectiveness and efficiency, we conduct experiments with various configurations, including: 1) the number of nodes inspected for ANNOY, 2) the number of bits for LSH, and 3) the number of neighbors per graph for HNSW. Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.T3" title="TABLE III ‣ III-F Approach of RQs ‣ III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">III</span></a> presents the hyper-parameters we investigated for each task.</p>
</div>
<figure class="ltx_table" id="S3.T3">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE III: </span>Hyper-parameter settings of approximate retrievers for each task.</figcaption>
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S3.T3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T3.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S3.T3.1.1.1.1">Parameter</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T3.1.1.1.2">Program Synthesis</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T3.1.1.1.3">Commit</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="S3.T3.1.1.1.4">Assertion</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T3.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T3.1.2.1.1">
<table class="ltx_tabular ltx_align_middle" id="S3.T3.1.2.1.1.1">
<tr class="ltx_tr" id="S3.T3.1.2.1.1.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T3.1.2.1.1.1.1.1">ANNOY:</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.2.1.1.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T3.1.2.1.1.1.2.1">Search_K</td>
</tr>
</table>
</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T3.1.2.1.2">[1,2,5,15,30]</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T3.1.2.1.3">[1,10,40,60,100]</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.2.1.4">[1,10,50,100,300]</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T3.1.3.2.1">
<table class="ltx_tabular ltx_align_middle" id="S3.T3.1.3.2.1.1">
<tr class="ltx_tr" id="S3.T3.1.3.2.1.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T3.1.3.2.1.1.1.1">LSH:</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.3.2.1.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T3.1.3.2.1.1.2.1">Nbits</td>
</tr>
</table>
</th>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T3.1.3.2.2">[1,2,5,15,30]</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T3.1.3.2.3">[1,2,5,15,30]</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.1.3.2.4">[1,2,5,15,40]</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t" id="S3.T3.1.4.3.1">
<table class="ltx_tabular ltx_align_middle" id="S3.T3.1.4.3.1.1">
<tr class="ltx_tr" id="S3.T3.1.4.3.1.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T3.1.4.3.1.1.1.1">HNSW:</td>
</tr>
<tr class="ltx_tr" id="S3.T3.1.4.3.1.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_left" id="S3.T3.1.4.3.1.1.2.1">M</td>
</tr>
</table>
</th>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T3.1.4.3.2">[2,3,4,8,16]</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T3.1.4.3.3">[2,3,4,8,32]</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_t" id="S3.T3.1.4.3.4">[3,4,8,16,64]</td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para" id="S3.SS6.p7">
<p class="ltx_p" id="S3.SS6.p7.1">To provide additional insights, we also examine the retrieval <em class="ltx_emph ltx_font_italic" id="S3.SS6.p7.1.1">Precision</em> of the approximate dense retrievers. <em class="ltx_emph ltx_font_italic" id="S3.SS6.p7.1.2">Precision</em> represents the fraction of demonstrations in the result tuple that are true nearest neighbors, as determined through exhaustive dense retrieval without approximation <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib26" title="">26</a>]</cite>. It is given by:</p>
<table class="ltx_equationgroup ltx_eqn_table" id="S3.E4">
<tbody>
<tr class="ltx_equation ltx_eqn_row ltx_align_baseline" id="S3.E4X">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\emph{Precision@K}=\frac{\left|D_{K}^{Approx.}\cap D_{K}^{Exh.}%
\right|}{K}" class="ltx_Math" display="inline" id="S3.E4X.2.1.1.m1.3"><semantics id="S3.E4X.2.1.1.m1.3a"><mrow id="S3.E4X.2.1.1.m1.3.4" xref="S3.E4X.2.1.1.m1.3.4.cmml"><mtext class="ltx_mathvariant_italic" id="S3.E4X.2.1.1.m1.3.4.2" xref="S3.E4X.2.1.1.m1.3.4.2b.cmml"><em class="ltx_emph ltx_font_italic" id="S3.E4X.2.1.1.m1.3.4.2.1nest">Precision@K</em></mtext><mo id="S3.E4X.2.1.1.m1.3.4.1" xref="S3.E4X.2.1.1.m1.3.4.1.cmml">=</mo><mstyle displaystyle="true" id="S3.E4X.2.1.1.m1.3.3" xref="S3.E4X.2.1.1.m1.3.3.cmml"><mfrac id="S3.E4X.2.1.1.m1.3.3a" xref="S3.E4X.2.1.1.m1.3.3.cmml"><mrow id="S3.E4X.2.1.1.m1.3.3.3.3" xref="S3.E4X.2.1.1.m1.3.3.3.4.cmml"><mo id="S3.E4X.2.1.1.m1.3.3.3.3.2" xref="S3.E4X.2.1.1.m1.3.3.3.4.1.cmml">|</mo><mrow id="S3.E4X.2.1.1.m1.3.3.3.3.1" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.cmml"><msubsup id="S3.E4X.2.1.1.m1.3.3.3.3.1.2" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2.cmml"><mi id="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.2" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.2.cmml">D</mi><mi id="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.3" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.3.cmml">K</mi><mrow id="S3.E4X.2.1.1.m1.1.1.1.1.1.1" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.2.cmml"><mrow id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.cmml"><mi id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.2" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.2.cmml">A</mi><mo id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.3" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.3.cmml">p</mi><mo id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1a" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.4" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.4.cmml">p</mi><mo id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1b" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.5" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.5.cmml">r</mi><mo id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1c" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.6" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.6.cmml">o</mi><mo id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1d" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1.cmml">⁢</mo><mi id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.7" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.7.cmml">x</mi></mrow><mo id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.2" lspace="0em" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.2.cmml">.</mo></mrow></msubsup><mo id="S3.E4X.2.1.1.m1.3.3.3.3.1.1" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.1.cmml">∩</mo><msubsup id="S3.E4X.2.1.1.m1.3.3.3.3.1.3" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3.cmml"><mi id="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.2" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.2.cmml">D</mi><mi id="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.3" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.3.cmml">K</mi><mrow id="S3.E4X.2.1.1.m1.2.2.2.2.1.1" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.2.cmml"><mrow id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.cmml"><mi id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.2" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.2.cmml">E</mi><mo id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.1" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.1.cmml">⁢</mo><mi id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.3" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.3.cmml">x</mi><mo id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.1a" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.1.cmml">⁢</mo><mi id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.4" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.4.cmml">h</mi></mrow><mo id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.2" lspace="0em" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.2.cmml">.</mo></mrow></msubsup></mrow><mo id="S3.E4X.2.1.1.m1.3.3.3.3.3" xref="S3.E4X.2.1.1.m1.3.3.3.4.1.cmml">|</mo></mrow><mi id="S3.E4X.2.1.1.m1.3.3.5" xref="S3.E4X.2.1.1.m1.3.3.5.cmml">K</mi></mfrac></mstyle></mrow><annotation-xml encoding="MathML-Content" id="S3.E4X.2.1.1.m1.3b"><apply id="S3.E4X.2.1.1.m1.3.4.cmml" xref="S3.E4X.2.1.1.m1.3.4"><eq id="S3.E4X.2.1.1.m1.3.4.1.cmml" xref="S3.E4X.2.1.1.m1.3.4.1"></eq><ci id="S3.E4X.2.1.1.m1.3.4.2b.cmml" xref="S3.E4X.2.1.1.m1.3.4.2"><mtext class="ltx_mathvariant_italic" id="S3.E4X.2.1.1.m1.3.4.2.cmml" xref="S3.E4X.2.1.1.m1.3.4.2"><em class="ltx_emph ltx_font_italic" id="S3.E4X.2.1.1.m1.3.4.2.1anest">Precision@K</em></mtext></ci><apply id="S3.E4X.2.1.1.m1.3.3.cmml" xref="S3.E4X.2.1.1.m1.3.3"><divide id="S3.E4X.2.1.1.m1.3.3.4.cmml" xref="S3.E4X.2.1.1.m1.3.3"></divide><apply id="S3.E4X.2.1.1.m1.3.3.3.4.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3"><abs id="S3.E4X.2.1.1.m1.3.3.3.4.1.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.2"></abs><apply id="S3.E4X.2.1.1.m1.3.3.3.3.1.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1"><intersect id="S3.E4X.2.1.1.m1.3.3.3.3.1.1.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.1"></intersect><apply id="S3.E4X.2.1.1.m1.3.3.3.3.1.2.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2"><csymbol cd="ambiguous" id="S3.E4X.2.1.1.m1.3.3.3.3.1.2.1.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2">superscript</csymbol><apply id="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2"><csymbol cd="ambiguous" id="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.1.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2">subscript</csymbol><ci id="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.2.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.2">𝐷</ci><ci id="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.3.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.2.2.3">𝐾</ci></apply><list id="S3.E4X.2.1.1.m1.1.1.1.1.1.2.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1"><apply id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1"><times id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.1"></times><ci id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.2">𝐴</ci><ci id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.3.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.3">𝑝</ci><ci id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.4.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.4">𝑝</ci><ci id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.5.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.5">𝑟</ci><ci id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.6.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.6">𝑜</ci><ci id="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.7.cmml" xref="S3.E4X.2.1.1.m1.1.1.1.1.1.1.1.7">𝑥</ci></apply></list></apply><apply id="S3.E4X.2.1.1.m1.3.3.3.3.1.3.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3"><csymbol cd="ambiguous" id="S3.E4X.2.1.1.m1.3.3.3.3.1.3.1.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3">superscript</csymbol><apply id="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3"><csymbol cd="ambiguous" id="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.1.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3">subscript</csymbol><ci id="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.2.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.2">𝐷</ci><ci id="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.3.cmml" xref="S3.E4X.2.1.1.m1.3.3.3.3.1.3.2.3">𝐾</ci></apply><list id="S3.E4X.2.1.1.m1.2.2.2.2.1.2.cmml" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1"><apply id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.cmml" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1"><times id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.1.cmml" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.1"></times><ci id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.2.cmml" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.2">𝐸</ci><ci id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.3.cmml" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.3">𝑥</ci><ci id="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.4.cmml" xref="S3.E4X.2.1.1.m1.2.2.2.2.1.1.1.4">ℎ</ci></apply></list></apply></apply></apply><ci id="S3.E4X.2.1.1.m1.3.3.5.cmml" xref="S3.E4X.2.1.1.m1.3.3.5">𝐾</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4X.2.1.1.m1.3c">\displaystyle\emph{Precision@K}=\frac{\left|D_{K}^{Approx.}\cap D_{K}^{Exh.}%
\right|}{K}</annotation><annotation encoding="application/x-llamapun" id="S3.E4X.2.1.1.m1.3d">Precision@K = divide start_ARG | italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_A italic_p italic_p italic_r italic_o italic_x . end_POSTSUPERSCRIPT ∩ italic_D start_POSTSUBSCRIPT italic_K end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_E italic_x italic_h . end_POSTSUPERSCRIPT | end_ARG start_ARG italic_K end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(4)</span></td>
</tr>
</tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS6.p8">
<p class="ltx_p" id="S3.SS6.p8.1">We also set <math alttext="K" class="ltx_Math" display="inline" id="S3.SS6.p8.1.m1.1"><semantics id="S3.SS6.p8.1.m1.1a"><mi id="S3.SS6.p8.1.m1.1.1" xref="S3.SS6.p8.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.SS6.p8.1.m1.1b"><ci id="S3.SS6.p8.1.m1.1.1.cmml" xref="S3.SS6.p8.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS6.p8.1.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="S3.SS6.p8.1.m1.1d">italic_K</annotation></semantics></math>=1 here to avoid noise. Generally, tuning hyper-parameters to achieve higher degrees of approximate results in improved efficiency but lower retrieval precision. By analyzing this trade-off, we can assess how the hyper-parameters of approximate retrievers influence final generation effectiveness through their impact on retrieval precision.</p>
</div>
<div class="ltx_para" id="S3.SS6.p9">
<p class="ltx_p" id="S3.SS6.p9.1"><span class="ltx_text ltx_font_bold" id="S3.SS6.p9.1.1">RQ5:</span>
In previous work <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib37" title="">37</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib15" title="">15</a>]</cite>, it has been demonstrated that the number of demonstrations significantly impacts the effectiveness. However, they have examined the effect of shot count with single retrievers. To obtain more comprehensive insights, we conduct a investigation into how varying the number of demonstrations across different retrievers influences the quality of generated results. This systematic exploration aimed to determine the optimal number of shots across retrievers to maximize the effectiveness of the RAG.</p>
</div>
<figure class="ltx_table" id="S3.T4">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">TABLE IV: </span>The results of retrieval approaches in terms of generation effectiveness and retrieval efficacy. A one-shot setting is employed to ensure a fair comparison and darker colors indicate superior results.(a) Program Synthesis  (b) Commit Generation   (c) Assertion Generation</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S3.T4.15">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T4.15.16.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" colspan="2" id="S3.T4.15.16.1.1">(a) Approach</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.16.1.2">Code Bleu</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.16.1.3">Syntax Match</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.16.1.4">Dataflow Match</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.16.1.5">Ngram Match</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.16.1.6">
<table class="ltx_tabular ltx_align_middle" id="S3.T4.15.16.1.6.1">
<tr class="ltx_tr" id="S3.T4.15.16.1.6.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.16.1.6.1.1.1">Time Per</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.16.1.6.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.16.1.6.1.2.1">Query (ms)</td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S3.T4.15.16.1.7">Speedup</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.16.1.8">
<table class="ltx_tabular ltx_align_middle" id="S3.T4.15.16.1.8.1">
<tr class="ltx_tr" id="S3.T4.15.16.1.8.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.16.1.8.1.1.1">Reduced</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.16.1.8.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.16.1.8.1.2.1">Code Bleu</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.1.1.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.1.1.3">BM25L <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib14" title="">14</a>]</cite>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.4" style="background-color:#FFF2F2;"><span class="ltx_text" id="S3.T4.1.1.4.1" style="background-color:#FFF2F2;">0.249</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.5" style="background-color:#FFF2F2;"><span class="ltx_text" id="S3.T4.1.1.5.1" style="background-color:#FFF2F2;">0.379</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.6" style="background-color:#FFF2F2;"><span class="ltx_text" id="S3.T4.1.1.6.1" style="background-color:#FFF2F2;">0.361</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.7" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.1.1.7.1" style="background-color:#FFCCCC;">0.128</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.8" style="background-color:#F86B6D;"><span class="ltx_text" id="S3.T4.1.1.8.1" style="background-color:#F86B6D;">2.31</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.9">0.98x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.1">5.75%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.1.1.1.m1.1"><semantics id="S3.T4.1.1.1.m1.1a"><mo id="S3.T4.1.1.1.m1.1.1" stretchy="false" xref="S3.T4.1.1.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.1.1.1.m1.1b"><ci id="S3.T4.1.1.1.m1.1.1.cmml" xref="S3.T4.1.1.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.1.1.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.1.1.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.17.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.15.17.2.1"><span class="ltx_text" id="S3.T4.15.17.2.1.1">Sparse</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.15.17.2.2">BM25 <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib21" title="">21</a>]</cite>
</th>
<td class="ltx_td ltx_align_center" id="S3.T4.15.17.2.3" style="background-color:#FF6666;"><span class="ltx_text" id="S3.T4.15.17.2.3.1" style="background-color:#FF6666;">0.264</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.17.2.4" style="background-color:#FF6666;"><span class="ltx_text" id="S3.T4.15.17.2.4.1" style="background-color:#FF6666;">0.391</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.17.2.5" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.15.17.2.5.1" style="background-color:#FFCCCC;">0.373</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.17.2.6" style="background-color:#FF6666;"><span class="ltx_text" id="S3.T4.15.17.2.6.1" style="background-color:#FF6666;">0.146</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.17.2.7" style="background-color:#F8696B;"><span class="ltx_text" id="S3.T4.15.17.2.7.1" style="background-color:#F8696B;">2.26</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.17.2.8">1.00x</td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.17.2.9">0.00%-</td>
</tr>
<tr class="ltx_tr" id="S3.T4.2.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.2.2.2">Exhaustive</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.2.2.3">SBERT_SS <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib11" title="">11</a>]</cite>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.2.2.4" style="background-color:#FF6666;"><span class="ltx_text" id="S3.T4.2.2.4.1" style="background-color:#FF6666;">0.261</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.2.2.5" style="background-color:#FF6666;"><span class="ltx_text" id="S3.T4.2.2.5.1" style="background-color:#FF6666;">0.387</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.2.2.6" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.2.2.6.1" style="background-color:#FFCCCC;">0.380</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.2.2.7" style="background-color:#FF6666;"><span class="ltx_text" id="S3.T4.2.2.7.1" style="background-color:#FF6666;">0.138</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.2.2.8" style="background-color:#FFF2F2;"><span class="ltx_text" id="S3.T4.2.2.8.1" style="background-color:#FFF2F2;">5.07</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.2.2.9">0.45x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.2.2.1">1.21%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.2.2.1.m1.1"><semantics id="S3.T4.2.2.1.m1.1a"><mo id="S3.T4.2.2.1.m1.1.1" stretchy="false" xref="S3.T4.2.2.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.2.2.1.m1.1b"><ci id="S3.T4.2.2.1.m1.1.1.cmml" xref="S3.T4.2.2.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.2.2.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.2.2.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.3.3">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.3.3.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.3.3.3">ANNOY <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib16" title="">16</a>]</cite>
</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.3.3.4" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.3.3.4.1" style="background-color:#FFCCCC;">0.259</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.3.3.5" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.3.3.5.1" style="background-color:#FFCCCC;">0.380</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.3.3.6" style="background-color:#FF6666;"><span class="ltx_text" id="S3.T4.3.3.6.1" style="background-color:#FF6666;">0.385</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.3.3.7" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.3.3.7.1" style="background-color:#FFCCCC;">0.136</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.3.3.8" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.3.3.8.1" style="background-color:#FFCCCC;">5.29</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.3.3.9">0.43x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.3.3.1">1.89%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.3.3.1.m1.1"><semantics id="S3.T4.3.3.1.m1.1a"><mo id="S3.T4.3.3.1.m1.1.1" stretchy="false" xref="S3.T4.3.3.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.3.3.1.m1.1b"><ci id="S3.T4.3.3.1.m1.1.1.cmml" xref="S3.T4.3.3.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.3.3.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.3.3.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.4.4">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S3.T4.4.4.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.4.4.3">LSH <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib25" title="">25</a>]</cite>
</th>
<td class="ltx_td ltx_align_center" id="S3.T4.4.4.4" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.4.4.4.1" style="background-color:#FFCCCC;">0.252</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.4.4.5" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.4.4.5.1" style="background-color:#FFCCCC;">0.385</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.4.4.6" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.4.4.6.1" style="background-color:#FFCCCC;">0.376</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.4.4.7" style="background-color:#FFF2F2;"><span class="ltx_text" id="S3.T4.4.4.7.1" style="background-color:#FFF2F2;">0.124</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.4.4.8" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.4.4.8.1" style="background-color:#FFCCCC;">5.08</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.4.4.9">0.44x</td>
<td class="ltx_td ltx_align_center" id="S3.T4.4.4.1">4.62%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.4.4.1.m1.1"><semantics id="S3.T4.4.4.1.m1.1a"><mo id="S3.T4.4.4.1.m1.1.1" stretchy="false" xref="S3.T4.4.4.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.4.4.1.m1.1b"><ci id="S3.T4.4.4.1.m1.1.1.cmml" xref="S3.T4.4.4.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.4.4.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.4.4.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.5.5.2"><span class="ltx_text" id="S3.T4.5.5.2.1">Approximate</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.5.5.3">HNSW <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib18" title="">18</a>]</cite>
</th>
<td class="ltx_td ltx_align_center" id="S3.T4.5.5.4" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.5.5.4.1" style="background-color:#FFCCCC;">0.258</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.5.5.5" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.5.5.5.1" style="background-color:#FFCCCC;">0.384</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.5.5.6" style="background-color:#FF6666;"><span class="ltx_text" id="S3.T4.5.5.6.1" style="background-color:#FF6666;">0.381</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.5.5.7" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.5.5.7.1" style="background-color:#FFCCCC;">0.134</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.5.5.8" style="background-color:#FFCCCC;"><span class="ltx_text" id="S3.T4.5.5.8.1" style="background-color:#FFCCCC;">5.18</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.5.5.9">0.44x</td>
<td class="ltx_td ltx_align_center" id="S3.T4.5.5.1">2.27%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.5.5.1.m1.1"><semantics id="S3.T4.5.5.1.m1.1a"><mo id="S3.T4.5.5.1.m1.1.1" stretchy="false" xref="S3.T4.5.5.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.5.5.1.m1.1b"><ci id="S3.T4.5.5.1.m1.1.1.cmml" xref="S3.T4.5.5.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.5.5.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.5.5.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.18.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" colspan="2" id="S3.T4.15.18.3.1">(b) Approach</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.18.3.2">RougeL</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.18.3.3">Meteor</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.18.3.4">Rouge1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.18.3.5">Rouge2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.18.3.6">
<table class="ltx_tabular ltx_align_middle" id="S3.T4.15.18.3.6.1">
<tr class="ltx_tr" id="S3.T4.15.18.3.6.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.18.3.6.1.1.1">Time Per</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.18.3.6.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.18.3.6.1.2.1">Query (ms)</td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.18.3.7">Speedup</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.18.3.8">
<table class="ltx_tabular ltx_align_middle" id="S3.T4.15.18.3.8.1">
<tr class="ltx_tr" id="S3.T4.15.18.3.8.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.18.3.8.1.1.1">Reduced</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.18.3.8.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.18.3.8.1.2.1">RougeL</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.6.6">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.6.6.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.6.6.3">BM25L</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.6.6.4" style="background-color:#F2FFF2;"><span class="ltx_text" id="S3.T4.6.6.4.1" style="background-color:#F2FFF2;">0.186</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.6.6.5" style="background-color:#F2FFF2;"><span class="ltx_text" id="S3.T4.6.6.5.1" style="background-color:#F2FFF2;">0.149</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.6.6.6" style="background-color:#F2FFF2;"><span class="ltx_text" id="S3.T4.6.6.6.1" style="background-color:#F2FFF2;">0.192</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.6.6.7" style="background-color:#F2FFF2;"><span class="ltx_text" id="S3.T4.6.6.7.1" style="background-color:#F2FFF2;">0.087</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.6.6.8" style="background-color:#F2FFF2;"><span class="ltx_text" id="S3.T4.6.6.8.1" style="background-color:#F2FFF2;">252.98</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.6.6.9">0.95x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.6.6.1">35.34%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.6.6.1.m1.1"><semantics id="S3.T4.6.6.1.m1.1a"><mo id="S3.T4.6.6.1.m1.1.1" stretchy="false" xref="S3.T4.6.6.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.6.6.1.m1.1b"><ci id="S3.T4.6.6.1.m1.1.1.cmml" xref="S3.T4.6.6.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.6.6.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.6.6.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.19.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.15.19.4.1"><span class="ltx_text" id="S3.T4.15.19.4.1.1">Sparse</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.15.19.4.2">BM25</th>
<td class="ltx_td ltx_align_center" id="S3.T4.15.19.4.3" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.15.19.4.3.1" style="background-color:#66FF66;">0.288</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.19.4.4" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.15.19.4.4.1" style="background-color:#66FF66;">0.244</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.19.4.5" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.15.19.4.5.1" style="background-color:#66FF66;">0.294</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.19.4.6" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.15.19.4.6.1" style="background-color:#66FF66;">0.169</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.19.4.7" style="background-color:#F2FFF2;"><span class="ltx_text" id="S3.T4.15.19.4.7.1" style="background-color:#F2FFF2;">239.53</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.19.4.8">1.00x</td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.19.4.9">0.00%-</td>
</tr>
<tr class="ltx_tr" id="S3.T4.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.7.7.2">Exhaustive</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.7.7.3">SBERT_SS</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.7.7.4" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.7.7.4.1" style="background-color:#66FF66;">0.286</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.7.7.5" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.7.7.5.1" style="background-color:#CCFFCC;">0.238</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.7.7.6" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.7.7.6.1" style="background-color:#CCFFCC;">0.290</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.7.7.7" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.7.7.7.1" style="background-color:#CCFFCC;">0.166</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.7.7.8" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.7.7.8.1" style="background-color:#CCFFCC;">16.67</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.7.7.9">14.37x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.7.7.1">1.11%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.7.7.1.m1.1"><semantics id="S3.T4.7.7.1.m1.1a"><mo id="S3.T4.7.7.1.m1.1.1" stretchy="false" xref="S3.T4.7.7.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.7.7.1.m1.1b"><ci id="S3.T4.7.7.1.m1.1.1.cmml" xref="S3.T4.7.7.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.7.7.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.7.7.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.8.8">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.8.8.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.8.8.3">ANNOY</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.8.8.4" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.8.8.4.1" style="background-color:#CCFFCC;">0.280</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.8.8.5" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.8.8.5.1" style="background-color:#CCFFCC;">0.234</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.8.8.6" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.8.8.6.1" style="background-color:#CCFFCC;">0.286</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.8.8.7" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.8.8.7.1" style="background-color:#CCFFCC;">0.164</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.8.8.8" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.8.8.8.1" style="background-color:#66FF66;">5.83</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.8.8.9">41.08x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.8.8.1">2.74%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.8.8.1.m1.1"><semantics id="S3.T4.8.8.1.m1.1a"><mo id="S3.T4.8.8.1.m1.1.1" stretchy="false" xref="S3.T4.8.8.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.8.8.1.m1.1b"><ci id="S3.T4.8.8.1.m1.1.1.cmml" xref="S3.T4.8.8.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.8.8.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.8.8.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.9.9">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S3.T4.9.9.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.9.9.3">LSH</th>
<td class="ltx_td ltx_align_center" id="S3.T4.9.9.4" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.9.9.4.1" style="background-color:#CCFFCC;">0.285</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.9.9.5" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.9.9.5.1" style="background-color:#66FF66;">0.242</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.9.9.6" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.9.9.6.1" style="background-color:#66FF66;">0.291</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.9.9.7" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.9.9.7.1" style="background-color:#66FF66;">0.168</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.9.9.8" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.9.9.8.1" style="background-color:#66FF66;">5.82</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.9.9.9">41.17x</td>
<td class="ltx_td ltx_align_center" id="S3.T4.9.9.1">0.88%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.9.9.1.m1.1"><semantics id="S3.T4.9.9.1.m1.1a"><mo id="S3.T4.9.9.1.m1.1.1" stretchy="false" xref="S3.T4.9.9.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.9.9.1.m1.1b"><ci id="S3.T4.9.9.1.m1.1.1.cmml" xref="S3.T4.9.9.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.9.9.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.9.9.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.10.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.10.10.2"><span class="ltx_text" id="S3.T4.10.10.2.1">Approximate</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.10.10.3">HNSW</th>
<td class="ltx_td ltx_align_center" id="S3.T4.10.10.4" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.10.10.4.1" style="background-color:#CCFFCC;">0.283</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.10.10.5" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.10.10.5.1" style="background-color:#CCFFCC;">0.237</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.10.10.6" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.10.10.6.1" style="background-color:#CCFFCC;">0.289</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.10.10.7" style="background-color:#CCFFCC;"><span class="ltx_text" id="S3.T4.10.10.7.1" style="background-color:#CCFFCC;">0.166</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.10.10.8" style="background-color:#66FF66;"><span class="ltx_text" id="S3.T4.10.10.8.1" style="background-color:#66FF66;">5.44</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.10.10.9">44.05x</td>
<td class="ltx_td ltx_align_center" id="S3.T4.10.10.1">1.74%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.10.10.1.m1.1"><semantics id="S3.T4.10.10.1.m1.1a"><mo id="S3.T4.10.10.1.m1.1.1" stretchy="false" xref="S3.T4.10.10.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.10.10.1.m1.1b"><ci id="S3.T4.10.10.1.m1.1.1.cmml" xref="S3.T4.10.10.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.10.10.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.10.10.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.20.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" colspan="2" id="S3.T4.15.20.5.1">(c) Approach</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.20.5.2">Exact Match</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.20.5.3">
<table class="ltx_tabular ltx_align_middle" id="S3.T4.15.20.5.3.1">
<tr class="ltx_tr" id="S3.T4.15.20.5.3.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.20.5.3.1.1.1">Longest Common</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.20.5.3.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.20.5.3.1.2.1">Subsequence</td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.20.5.4">Plausible Match</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.20.5.5">Edit Distance</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.20.5.6">
<table class="ltx_tabular ltx_align_middle" id="S3.T4.15.20.5.6.1">
<tr class="ltx_tr" id="S3.T4.15.20.5.6.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.20.5.6.1.1.1">Time Per</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.20.5.6.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.20.5.6.1.2.1">Query (ms)</td>
</tr>
</table>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.20.5.7">Speedup</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.15.20.5.8">
<table class="ltx_tabular ltx_align_middle" id="S3.T4.15.20.5.8.1">
<tr class="ltx_tr" id="S3.T4.15.20.5.8.1.1">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.20.5.8.1.1.1">Reduced</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.20.5.8.1.2">
<td class="ltx_td ltx_nopad_r ltx_align_center" id="S3.T4.15.20.5.8.1.2.1">Exact Match</td>
</tr>
</table>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.11.11">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.11.11.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.11.11.3">BM25L</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.11.11.4" style="background-color:#F2F2FF;"><span class="ltx_text" id="S3.T4.11.11.4.1" style="background-color:#F2F2FF;">0.414</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.11.11.5" style="background-color:#F2F2FF;"><span class="ltx_text" id="S3.T4.11.11.5.1" style="background-color:#F2F2FF;">73.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.11.11.6" style="background-color:#F2F2FF;"><span class="ltx_text" id="S3.T4.11.11.6.1" style="background-color:#F2F2FF;">0.492</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.11.11.7" style="background-color:#F2F2FF;"><span class="ltx_text" id="S3.T4.11.11.7.1" style="background-color:#F2F2FF;">15.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.11.11.8" style="background-color:#F2F2FF;"><span class="ltx_text" id="S3.T4.11.11.8.1" style="background-color:#F2F2FF;">206.19</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.11.11.9">1.15x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.11.11.1">32.22%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.11.11.1.m1.1"><semantics id="S3.T4.11.11.1.m1.1a"><mo id="S3.T4.11.11.1.m1.1.1" stretchy="false" xref="S3.T4.11.11.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.11.11.1.m1.1b"><ci id="S3.T4.11.11.1.m1.1.1.cmml" xref="S3.T4.11.11.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.11.11.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.11.11.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.21.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.15.21.6.1"><span class="ltx_text" id="S3.T4.15.21.6.1.1">Sparse</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.15.21.6.2">BM25</th>
<td class="ltx_td ltx_align_center" id="S3.T4.15.21.6.3" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.15.21.6.3.1" style="background-color:#6666FF;">0.612</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.21.6.4" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.15.21.6.4.1" style="background-color:#6666FF;">83.6</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.21.6.5" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.15.21.6.5.1" style="background-color:#6666FF;">0.671</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.21.6.6" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.15.21.6.6.1" style="background-color:#6666FF;">7.5</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.21.6.7" style="background-color:#F2F2FF;"><span class="ltx_text" id="S3.T4.15.21.6.7.1" style="background-color:#F2F2FF;">237.53</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.21.6.8">1.00x</td>
<td class="ltx_td ltx_align_center" id="S3.T4.15.21.6.9">0.00%-</td>
</tr>
<tr class="ltx_tr" id="S3.T4.12.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.12.12.2">Exhaustive</th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.12.12.3">SBERT_SS</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.12.12.4" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.12.12.4.1" style="background-color:#6666FF;">0.603</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.12.12.5" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.12.12.5.1" style="background-color:#6666FF;">83.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.12.12.6" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.12.12.6.1" style="background-color:#6666FF;">0.669</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.12.12.7" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.12.12.7.1" style="background-color:#CCCCFF;">8.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.12.12.8" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.12.12.8.1" style="background-color:#CCCCFF;">97.09</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.12.12.9">2.45x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.12.12.1">1.32%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.12.12.1.m1.1"><semantics id="S3.T4.12.12.1.m1.1a"><mo id="S3.T4.12.12.1.m1.1.1" stretchy="false" xref="S3.T4.12.12.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.12.12.1.m1.1b"><ci id="S3.T4.12.12.1.m1.1.1.cmml" xref="S3.T4.12.12.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.12.12.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.12.12.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.13.13">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.13.13.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S3.T4.13.13.3">ANNOY</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.13.13.4" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.13.13.4.1" style="background-color:#CCCCFF;">0.576</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.13.13.5" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.13.13.5.1" style="background-color:#CCCCFF;">81.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.13.13.6" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.13.13.6.1" style="background-color:#CCCCFF;">0.649</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.13.13.7" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.13.13.7.1" style="background-color:#CCCCFF;">8.9</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.13.13.8" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.13.13.8.1" style="background-color:#6666FF;">6.34</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.13.13.9">37.45x</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.13.13.1">5.74%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.13.13.1.m1.1"><semantics id="S3.T4.13.13.1.m1.1a"><mo id="S3.T4.13.13.1.m1.1.1" stretchy="false" xref="S3.T4.13.13.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.13.13.1.m1.1b"><ci id="S3.T4.13.13.1.m1.1.1.cmml" xref="S3.T4.13.13.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.13.13.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.13.13.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.14.14">
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="S3.T4.14.14.2"></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S3.T4.14.14.3">LSH</th>
<td class="ltx_td ltx_align_center" id="S3.T4.14.14.4" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.14.14.4.1" style="background-color:#CCCCFF;">0.601</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.14.14.5" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.14.14.5.1" style="background-color:#CCCCFF;">83.0</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.14.14.6" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.14.14.6.1" style="background-color:#CCCCFF;">0.666</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.14.14.7" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.14.14.7.1" style="background-color:#6666FF;">8.0</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.14.14.8" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.14.14.8.1" style="background-color:#6666FF;">7.79</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.14.14.9">30.51x</td>
<td class="ltx_td ltx_align_center" id="S3.T4.14.14.1">1.78%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.14.14.1.m1.1"><semantics id="S3.T4.14.14.1.m1.1a"><mo id="S3.T4.14.14.1.m1.1.1" stretchy="false" xref="S3.T4.14.14.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.14.14.1.m1.1b"><ci id="S3.T4.14.14.1.m1.1.1.cmml" xref="S3.T4.14.14.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.14.14.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.14.14.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
<tr class="ltx_tr" id="S3.T4.15.15">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S3.T4.15.15.2"><span class="ltx_text" id="S3.T4.15.15.2.1">Approximate</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S3.T4.15.15.3">HNSW</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T4.15.15.4" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.15.15.4.1" style="background-color:#CCCCFF;">0.597</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T4.15.15.5" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.15.15.5.1" style="background-color:#CCCCFF;">82.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T4.15.15.6" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.15.15.6.1" style="background-color:#CCCCFF;">0.664</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T4.15.15.7" style="background-color:#CCCCFF;"><span class="ltx_text" id="S3.T4.15.15.7.1" style="background-color:#CCCCFF;">8.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T4.15.15.8" style="background-color:#6666FF;"><span class="ltx_text" id="S3.T4.15.15.8.1" style="background-color:#6666FF;">6.06</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T4.15.15.9">39.21x</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S3.T4.15.15.1">2.35%<math alttext="\downarrow" class="ltx_Math" display="inline" id="S3.T4.15.15.1.m1.1"><semantics id="S3.T4.15.15.1.m1.1a"><mo id="S3.T4.15.15.1.m1.1.1" stretchy="false" xref="S3.T4.15.15.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S3.T4.15.15.1.m1.1b"><ci id="S3.T4.15.15.1.m1.1.1.cmml" xref="S3.T4.15.15.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T4.15.15.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S3.T4.15.15.1.m1.1d">↓</annotation></semantics></math>
</td>
</tr>
</tbody>
</table>
</figure>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">IV </span><span class="ltx_text ltx_font_smallcaps" id="S4.1.1">RESULTS</span>
</h2>
<figure class="ltx_figure" id="S4.F2">
<figure class="ltx_figure ltx_align_center" id="S4.F2.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="708" id="S4.F2.sf1.g1" src="x2.png" width="830"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F2.sf1.2.1.1" style="font-size:80%;">(a)</span> </span><span class="ltx_text" id="S4.F2.sf1.3.2" style="font-size:80%;">Program Synthesis  (b) Commit Generation   (c) Assertion Generation</span></figcaption>
</figure>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>The average tokens of prompts of different retrievers.</figcaption>
</figure>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S4.SS1.4.1.1">IV-A</span> </span><span class="ltx_text ltx_font_italic" id="S4.SS1.5.2">RQ1 - Effectiveness</span>
</h3>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.T4" title="TABLE IV ‣ III-F Approach of RQs ‣ III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">IV</span></a> presents the empirical results of generated outputs across three coding tasks. For example, BM25 achieves a Code Bleu rate of 0.264 in the Program Synthesis task, a RougeL score of 0.288 in the Commit Generation task, and an Exact Match score of 0.612 in the Assertion Generation task. Notably, BM25 outperforms all other retrievers across these tasks. However, despite being a sparse retriever, BM25L consistently performs worse compared to other retrievers.</p>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.1">The underperformance of BM25L may be attributed to the length preference bias it introduces. Specifically, BM25L modifies the term frequency normalization to favor longer documents<cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib14" title="">14</a>]</cite>. As illustrated in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.F2" title="Figure 2 ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">2</span></a>, the demonstration returned by BM25L consists of longest prompts. This inclination may cause the BM25L to select longer rather than relevant demonstrations, compromising its effectiveness.</p>
</div>
<div class="ltx_para" id="S4.SS1.p3">
<p class="ltx_p" id="S4.SS1.p3.1">When comparing effectiveness within dense retrievers, we observe that the exhaustive dense retriever SBERT_SS generally performs better than the three approximate dense retrievers, though the gap is always small. This indicates that while SBERT_SS achieves slightly higher effectiveness, the approximate dense retrievers offer a comparable level of effectiveness while potentially offering gains in efficiency.</p>
</div>
<figure class="ltx_figure" id="S4.F3">
<figure class="ltx_figure ltx_align_center" id="S4.F3.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="423" id="S4.F3.sf1.g1" src="x3.png" width="830"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F3.sf1.2.1.1" style="font-size:80%;">(a)</span> </span><span class="ltx_text" id="S4.F3.sf1.3.2" style="font-size:80%;">Program Synthesis  (b) Commit Generation   (c) Assertion Generation</span></figcaption>
</figure>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>The effectiveness of retrievers exhibits a strong correlation to the retriever’s ability to recall <em class="ltx_emph ltx_font_italic" id="S4.F3.2.1">gold demonstrations</em>.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS1.p4">
<p class="ltx_p" id="S4.SS1.p4.1">To understand why some retrievers outperform others, we examine which retrievers return better demonstrations using <em class="ltx_emph ltx_font_italic" id="S4.SS1.p4.1.1">RecallGold@K</em>. As illustrated in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.F3" title="Figure 3 ‣ IV-A RQ1 - Effectiveness ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">3</span></a>, we observe a strong positive correlation between the <em class="ltx_emph ltx_font_italic" id="S4.SS1.p4.1.2">RecallGold@K</em> scores of various retrievers and their effectiveness. The non-parametric Kendall’s <math alttext="\tau" class="ltx_Math" display="inline" id="S4.SS1.p4.1.m1.1"><semantics id="S4.SS1.p4.1.m1.1a"><mi id="S4.SS1.p4.1.m1.1.1" xref="S4.SS1.p4.1.m1.1.1.cmml">τ</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p4.1.m1.1b"><ci id="S4.SS1.p4.1.m1.1.1.cmml" xref="S4.SS1.p4.1.m1.1.1">𝜏</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p4.1.m1.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p4.1.m1.1d">italic_τ</annotation></semantics></math> correlations <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib38" title="">38</a>]</cite> are 0.75, 0.69, and 1.00 for Program Synthesis, Commit Generation, and Assertion Generation, respectively, with corresponding p-values of 0.04, 0.05, and 0.003. These findings suggest that the effectiveness of retrievers is significantly influenced by their ability to recall <em class="ltx_emph ltx_font_italic" id="S4.SS1.p4.1.3">gold demonstrations</em>.</p>
</div>
<div class="ltx_para" id="S4.SS1.p5">
<span class="ltx_ERROR undefined" id="S4.SS1.p5.2">{mdframed}</span>
<p class="ltx_p" id="S4.SS1.p5.1">[roundcorner=5pt]
<span class="ltx_text ltx_font_bold" id="S4.SS1.p5.1.1">Finding 1:</span> The effectiveness hierarchy of retrievers is BM25 &gt; exhaustive dense (SBERT_SS) <math alttext="\gtrsim" class="ltx_Math" display="inline" id="S4.SS1.p5.1.m1.1"><semantics id="S4.SS1.p5.1.m1.1a"><mo id="S4.SS1.p5.1.m1.1.1" xref="S4.SS1.p5.1.m1.1.1.cmml">≳</mo><annotation-xml encoding="MathML-Content" id="S4.SS1.p5.1.m1.1b"><csymbol cd="latexml" id="S4.SS1.p5.1.m1.1.1.cmml" xref="S4.SS1.p5.1.m1.1.1">greater-than-or-equivalent-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p5.1.m1.1c">\gtrsim</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p5.1.m1.1d">≳</annotation></semantics></math> approximate dense (ANNOY, LSH, HNSW) &gt; BM25L. The effectiveness of retrievers exhibits a strong correlation to the retriever’s ability to recall <em class="ltx_emph ltx_font_italic" id="S4.SS1.p5.1.2">gold demonstrations</em>.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S4.SS2.4.1.1">IV-B</span> </span><span class="ltx_text ltx_font_italic" id="S4.SS2.5.2">RQ2 - Efficiency</span>
</h3>
<figure class="ltx_figure" id="S4.F4">
<figure class="ltx_figure ltx_align_center" id="S4.F4.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="343" id="S4.F4.sf1.g1" src="x4.png" width="830"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F4.sf1.2.1.1" style="font-size:80%;">(a)</span> </span><span class="ltx_text" id="S4.F4.sf1.3.2" style="font-size:80%;">Program Synthesis  (b) Commit Generation   (c) Assertion Generation</span></figcaption>
</figure>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Efficacy comparison between different retrievers with increasing knowledge base size.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">We present the efficiency of various retrievers across the three coding tasks in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.T4" title="TABLE IV ‣ III-F Approach of RQs ‣ III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">IV</span></a>. For instance, in the Program Synthesis task, it takes 2.26 ms for BM25 to retrieve demonstrations for a query. In this task, the sparse retrievers tend to have the shortest retrieval times, while the dense retrievers take longer. However, this trend reverses in the Commit Generation and Assertion Generation tasks, where dense retrievers outperform sparse retrievers in terms of efficiency.</p>
</div>
<div class="ltx_para" id="S4.SS2.p2">
<p class="ltx_p" id="S4.SS2.p2.1">Among the dense retrievers, there is minimal efficiency disparity when the knowledge base is small, as observed in the Program Synthesis task. However, as the knowledge base grows, approximate dense retrievers demonstrate significant efficiency advantages. For instance, in the Assertion Generation task, ANNOY reduces retrieval time to 6 ms compared to the 97 ms required by the exhaustive SBERT_SS retriever. This difference arises because SBERT_SS performs a linear scan of all demonstrations in the knowledge base, which can be computationally intensive. In contrast, approximate dense retrievers like HNSW, ANNOY, and LSH leverage specialized data structures that allow for a degree of approximation, significantly reducing the number of comparisons needed. The variation in efficiency across tasks suggests that the size of the knowledge base plays a crucial role in influencing the efficiency of different retrievers.</p>
</div>
<div class="ltx_para" id="S4.SS2.p3">
<p class="ltx_p" id="S4.SS2.p3.1">In addition to analyzing fixed-size knowledge base, we also investigate scalability in terms of efficiency. Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.F4" title="Figure 4 ‣ IV-B RQ2 - Efficiency ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">4</span></a> illustrates the efficiency trends of each retriever as the knowledge base size increases. To simplify the comparison, we only plot BM25, as it exhibits similar efficiency to its variant, BM25L. At smaller knowledge base sizes (fewer than <math alttext="10^{3}" class="ltx_Math" display="inline" id="S4.SS2.p3.1.m1.1"><semantics id="S4.SS2.p3.1.m1.1a"><msup id="S4.SS2.p3.1.m1.1.1" xref="S4.SS2.p3.1.m1.1.1.cmml"><mn id="S4.SS2.p3.1.m1.1.1.2" xref="S4.SS2.p3.1.m1.1.1.2.cmml">10</mn><mn id="S4.SS2.p3.1.m1.1.1.3" xref="S4.SS2.p3.1.m1.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.1.m1.1b"><apply id="S4.SS2.p3.1.m1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p3.1.m1.1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1">superscript</csymbol><cn id="S4.SS2.p3.1.m1.1.1.2.cmml" type="integer" xref="S4.SS2.p3.1.m1.1.1.2">10</cn><cn id="S4.SS2.p3.1.m1.1.1.3.cmml" type="integer" xref="S4.SS2.p3.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.1.m1.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p3.1.m1.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math> entries), BM25 shows greater efficiency. However, as the knowledge base expands, its efficiency decreases relative to that of dense retrievers. Dense retrievers, which utilize fixed-size numeric representations, become increasingly efficient compared to sparse retrievers that need to manage large document-term matrices. Furthermore, approximate dense retrievers such as HNSW and ANNOY exhibit significant scalability, maintaining a nearly flat efficiency curve as the knowledge base size increases. This demonstrates the advantages of using approximate dense retrievers for large-scale retrieval tasks.</p>
</div>
<div class="ltx_para" id="S4.SS2.p4">
<span class="ltx_ERROR undefined" id="S4.SS2.p4.3">{mdframed}</span>
<p class="ltx_p" id="S4.SS2.p4.2">[roundcorner=5pt]
<span class="ltx_text ltx_font_bold" id="S4.SS2.p4.2.1">Finding 2:</span> For knowledge bases smaller than <math alttext="10^{3}" class="ltx_Math" display="inline" id="S4.SS2.p4.1.m1.1"><semantics id="S4.SS2.p4.1.m1.1a"><msup id="S4.SS2.p4.1.m1.1.1" xref="S4.SS2.p4.1.m1.1.1.cmml"><mn id="S4.SS2.p4.1.m1.1.1.2" xref="S4.SS2.p4.1.m1.1.1.2.cmml">10</mn><mn id="S4.SS2.p4.1.m1.1.1.3" xref="S4.SS2.p4.1.m1.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S4.SS2.p4.1.m1.1b"><apply id="S4.SS2.p4.1.m1.1.1.cmml" xref="S4.SS2.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS2.p4.1.m1.1.1.1.cmml" xref="S4.SS2.p4.1.m1.1.1">superscript</csymbol><cn id="S4.SS2.p4.1.m1.1.1.2.cmml" type="integer" xref="S4.SS2.p4.1.m1.1.1.2">10</cn><cn id="S4.SS2.p4.1.m1.1.1.3.cmml" type="integer" xref="S4.SS2.p4.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p4.1.m1.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p4.1.m1.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math>, the efficiency hierarchy is sparse &gt; exhaustive dense &gt; approximate dense. In more general cases with knowledge bases larger than
<math alttext="10^{3}" class="ltx_Math" display="inline" id="S4.SS2.p4.2.m2.1"><semantics id="S4.SS2.p4.2.m2.1a"><msup id="S4.SS2.p4.2.m2.1.1" xref="S4.SS2.p4.2.m2.1.1.cmml"><mn id="S4.SS2.p4.2.m2.1.1.2" xref="S4.SS2.p4.2.m2.1.1.2.cmml">10</mn><mn id="S4.SS2.p4.2.m2.1.1.3" xref="S4.SS2.p4.2.m2.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S4.SS2.p4.2.m2.1b"><apply id="S4.SS2.p4.2.m2.1.1.cmml" xref="S4.SS2.p4.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS2.p4.2.m2.1.1.1.cmml" xref="S4.SS2.p4.2.m2.1.1">superscript</csymbol><cn id="S4.SS2.p4.2.m2.1.1.2.cmml" type="integer" xref="S4.SS2.p4.2.m2.1.1.2">10</cn><cn id="S4.SS2.p4.2.m2.1.1.3.cmml" type="integer" xref="S4.SS2.p4.2.m2.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p4.2.m2.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p4.2.m2.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math>, the efficiency hierarchy changes to approximate dense &gt; exhaustive dense &gt; sparse.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S4.SS3.4.1.1">IV-C</span> </span><span class="ltx_text ltx_font_italic" id="S4.SS3.5.2">RQ3 - Trade-off between Efficiency and Effectiveness</span>
</h3>
<figure class="ltx_figure" id="S4.F5">
<figure class="ltx_figure ltx_align_center" id="S4.F5.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="243" id="S4.F5.sf1.g1" src="x5.png" width="830"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F5.sf1.2.1.1" style="font-size:80%;">(a)</span> </span><span class="ltx_text" id="S4.F5.sf1.3.2" style="font-size:80%;">Program Synthesis  (b) Commit Message Generation   (c) Assertion Generation</span></figcaption>
</figure>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>The trade-off between efficiency and effectiveness of retrievers. The retrievers located in up and right corner are better.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">Based on the previous RQs, BM25 emerged as the most effective but less efficient retriever for tasks involving large knowledge bases. Using BM25 as a benchmark, we presented the speedup and quality degradation of other retrievers in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.T4" title="TABLE IV ‣ III-F Approach of RQs ‣ III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">IV</span></a>. For instance, in Assertion Generation tasks, while exhaustive dense retrieval offers a 2x speedup with only a 1.32% drop in Exact Match, LSH provides a further 31x speedup with just a 1.78% reduction through approximation. Similarly, in Commit Generation, HNSW achieves a 44x speedup, while only with a 1.74% drop in RougeL compared with BM25.</p>
</div>
<div class="ltx_para" id="S4.SS3.p2">
<p class="ltx_p" id="S4.SS3.p2.1">We also plot both efficiency and effectiveness of different retrievers in Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.F5" title="Figure 5 ‣ IV-C RQ3 - Trade-off between Efficiency and Effectiveness ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">5</span></a> to provide a trade-off perspective. Retrievers positioned in the upper-right corner represent a more favorable balance between efficiency and effectiveness.</p>
</div>
<div class="ltx_para" id="S4.SS3.p3">
<p class="ltx_p" id="S4.SS3.p3.1">This trade-off varies across tasks. In the Program Synthesis task, BM25 achieves the optimal balance, combining high effectiveness with strong efficiency. In contrast, SBERT_SS and BM25L fall short: SBERT_SS is located in the upper-left quadrant, indicating high effectiveness but low efficiency, while BM25L resides in the lower-right quadrant, highlighting poor effectiveness and decent efficiency. Additionally, the three approximate dense retrievers (ANNOY, LSH, and HNSW) underperform in both dimensions in this task.
In the Commit Generation and Assertion Generation tasks, BM25 and SBERT_SS start with high effectiveness but exhibit low efficiency, occupying the upper-left quadrant. BM25L continues to lag behind in both metrics. However, all three approximate dense retrievers, ANNOY, LSH, and HNSW, strike a much better balance between efficiency and effectiveness, outperforming their sparse and exhaustive dense counterparts in these tasks with a larger knowledge base.</p>
</div>
<div class="ltx_para" id="S4.SS3.p4">
<span class="ltx_ERROR undefined" id="S4.SS3.p4.1">{mdframed}</span>
<p class="ltx_p" id="S4.SS3.p4.2">[roundcorner=5pt]
<span class="ltx_text ltx_font_bold" id="S4.SS3.p4.2.1">Finding 3:</span> BM25 achieves the best balance between efficiency and effectiveness when the knowledge base size is small. However, for tasks involving larger knowledge bases, approximate dense retrievers offer the best trade-off between efficiency and effectiveness.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S4.SS4.4.1.1">IV-D</span> </span><span class="ltx_text ltx_font_italic" id="S4.SS4.5.2">RQ4 - Impact of the Hyper-parameters</span>
</h3>
<div class="ltx_para" id="S4.SS4.p1">
<p class="ltx_p" id="S4.SS4.p1.1">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.F6" title="Figure 6 ‣ IV-D RQ4 - Impact of the Hyper-parameters ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">6</span></a> illustrates the relationships between effectiveness and efficiency (top row), retrieval precision and efficiency (middle row), retrieval precision and effectiveness (bottom row) using different hyper-parameter configurations. A high degree of approximation (i.e., a smaller hyper-parameter setting in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3.T3" title="TABLE III ‣ III-F Approach of RQs ‣ III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">III</span></a>) always leads to higher efficiency (higher QPS), but lower retrieval precision and effectiveness since ignores more nodes inspected. Specifically, LSH consistently maintains stable effectiveness and precision across different QPS values, with only slight variations. HNSW achieves high QPS values across a range of parameters. However, at the highest QPS values, the retrieval precision and effectiveness of generated outputs drops significantly. ANNOY demonstrates similar trade-off to HNSW, though the decline in precision and effectiveness is less pronounced.</p>
</div>
<div class="ltx_para" id="S4.SS4.p2">
<p class="ltx_p" id="S4.SS4.p2.2">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.F6" title="Figure 6 ‣ IV-D RQ4 - Impact of the Hyper-parameters ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">6</span></a> also shows that the trade-off between retrieval precision and effectiveness remain consistent due to their strong positive correlation. Both HNSW and ANNOY’s Kendall <math alttext="\tau" class="ltx_Math" display="inline" id="S4.SS4.p2.1.m1.1"><semantics id="S4.SS4.p2.1.m1.1a"><mi id="S4.SS4.p2.1.m1.1.1" xref="S4.SS4.p2.1.m1.1.1.cmml">τ</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p2.1.m1.1b"><ci id="S4.SS4.p2.1.m1.1.1.cmml" xref="S4.SS4.p2.1.m1.1.1">𝜏</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p2.1.m1.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S4.SS4.p2.1.m1.1d">italic_τ</annotation></semantics></math> coefficients were statistically significant (p-value <math alttext="\leq" class="ltx_Math" display="inline" id="S4.SS4.p2.2.m2.1"><semantics id="S4.SS4.p2.2.m2.1a"><mo id="S4.SS4.p2.2.m2.1.1" xref="S4.SS4.p2.2.m2.1.1.cmml">≤</mo><annotation-xml encoding="MathML-Content" id="S4.SS4.p2.2.m2.1b"><leq id="S4.SS4.p2.2.m2.1.1.cmml" xref="S4.SS4.p2.2.m2.1.1"></leq></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p2.2.m2.1c">\leq</annotation><annotation encoding="application/x-llamapun" id="S4.SS4.p2.2.m2.1d">≤</annotation></semantics></math> 0.05). In contrast, LSH exhibited p-values of 0.23, 0.23, and 0.48 across the three tasks, potentially due to the low variance of LSH’s effectiveness metrics. Therefore, optimizing these trade-off during the retrieval step is essential to achieve the optimal balance between efficiency and effectiveness in the final generation phase.
<span class="ltx_ERROR undefined" id="S4.SS4.p2.2.1">{mdframed}</span>[roundcorner=5pt]
<span class="ltx_text ltx_font_bold" id="S4.SS4.p2.2.2">Finding 4:</span> A higher degree of approximation improves the efficiency of dense retrieval but reduces retrieval precision, which adversely affects overall effectiveness. This is because of the strong positive correlation between retrieval precision and effectiveness.</p>
</div>
<figure class="ltx_figure" id="S4.F6">
<figure class="ltx_figure ltx_align_center" id="S4.F6.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="655" id="S4.F6.sf1.g1" src="x6.png" width="830"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F6.sf1.2.1.1" style="font-size:80%;">(a)</span> </span><span class="ltx_text" id="S4.F6.sf1.3.2" style="font-size:80%;">Program Synthesis  (b) Commit Generation   (c) Assertion Generation</span></figcaption>
</figure>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>Effectiveness-efficiency (top), precision-efficiency (middle), and precision-effectiveness (bottom) relations for approximate retrievers with different hyper-parameters.</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="S4.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S4.SS5.4.1.1">IV-E</span> </span><span class="ltx_text ltx_font_italic" id="S4.SS5.5.2">RQ5 - Impact of Number of Shots</span>
</h3>
<figure class="ltx_figure" id="S4.F7">
<figure class="ltx_figure ltx_align_center" id="S4.F7.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="265" id="S4.F7.sf1.g1" src="x7.png" width="830"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S4.F7.sf1.2.1.1" style="font-size:80%;">(a)</span> </span><span class="ltx_text" id="S4.F7.sf1.3.2" style="font-size:80%;">Program Synthesis  (b) Commit Generation   (c) Assertion Generation</span></figcaption>
</figure>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>The impact of the number of shots on the effectiveness of different retrievers.</figcaption>
</figure>
<div class="ltx_para" id="S4.SS5.p1">
<p class="ltx_p" id="S4.SS5.p1.1">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.F7" title="Figure 7 ‣ IV-E RQ5 - Impact of Number of Shots ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">7</span></a> illustrates the relationship between effectiveness and the number of demonstrations across different retrievers. Notably, more demonstrations do not always correlate with improved effectiveness. In Assertion Generation, the Exact Match rate consistently decreases as the number of demonstrations increases across all retrievers. In Program Synthesis, while three demonstrations yield better results than one when using BM25, adding more than three leads to a decline in effectiveness.</p>
</div>
<div class="ltx_para" id="S4.SS5.p2">
<p class="ltx_p" id="S4.SS5.p2.1">A potential explanation for introducing more demonstrations does not assert improvement is that too many demonstrations may introduce noise, as LLMs can easily become distracted <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib39" title="">39</a>]</cite>. This effect is particularly evident when the inputs of multiple demonstrations are highly similar, but their outputs differ significantly. Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.T5" title="TABLE V ‣ IV-E RQ5 - Impact of Number of Shots ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">V</span></a> presents an example where the LLM’s response to the same query changes as more demonstrations are added. Although the inputs in the query and demonstrations are relevant, the corresponding code examples address distinct objectives. For example, Demo3 introduces code for obtaining keys based on dictionary values, while the query requires retrieving values based on key prefixes.</p>
</div>
<div class="ltx_para" id="S4.SS5.p3">
<p class="ltx_p" id="S4.SS5.p3.1">This also explains the inconsistent trends observed as the number of demonstrations increases across different tasks. As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.T6" title="TABLE VI ‣ IV-E RQ5 - Impact of Number of Shots ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">VI</span></a>, the average input similarity between the demonstrations in the retrieval tuple and the query is significantly higher in Assertion Generation and Commit Generation tasks compared to Program Synthesis. For instance, in Assertion Generation, demonstrations in 9-shot prompts exhibit a high average similarity of 0.819 to the query, yet their outputs are likely to differ. This increases the likelihood that the LLM will become distracted in this task. These observations align with the findings of Gao et al. <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib4" title="">4</a>]</cite>, which concluded that a more diverse set of demonstrations tends to be more beneficial for RAG, as it reduces the risk of confusing the LLM with highly similar demonstrations that have divergent outputs.</p>
</div>
<div class="ltx_para" id="S4.SS5.p4">
<p class="ltx_p" id="S4.SS5.p4.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S4.T6" title="TABLE VI ‣ IV-E RQ5 - Impact of Number of Shots ‣ IV RESULTS ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">VI</span></a> also shows that the inclusion of additional demonstrations, despite their uncertain benefits, inevitably increases the latency of LLM responses due to the longer prompt length. Therefore, the careful selection of the number of demonstrations is critical and should be tailored to the specific requirements of the task at hand.</p>
</div>
<figure class="ltx_table" id="S4.T5">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">TABLE V: </span>Case study from Program Synthesis: LLMs can be easily distracted by noisy information.</figcaption>
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T5.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T5.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S4.T5.1.1.1.1" rowspan="2"><span class="ltx_text" id="S4.T5.1.1.1.1.1">Sample</span></th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S4.T5.1.1.1.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.1.1.2.1">
<span class="ltx_p" id="S4.T5.1.1.1.2.1.1" style="width:28.5pt;">Query</span>
</span>
</th>
<th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_t" id="S4.T5.1.1.1.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.1.1.3.1">
<span class="ltx_p" id="S4.T5.1.1.1.3.1.1" style="width:156.5pt;">
<span class="ltx_tabular ltx_align_middle" id="S4.T5.1.1.1.3.1.1.1">
<span class="ltx_tr" id="S4.T5.1.1.1.3.1.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.1.1.3.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.1.1.3.1.1.1.1.1.1">
<span class="ltx_p" id="S4.T5.1.1.1.3.1.1.1.1.1.1.1" style="width:199.2pt;">### requirement</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.1.1.3.1.1.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.1.1.3.1.1.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.1.1.3.1.1.1.2.1.1">
<span class="ltx_p" id="S4.T5.1.1.1.3.1.1.1.2.1.1.1" style="width:199.2pt;">create list of values from dictionary ‘dict1‘ that</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.1.1.3.1.1.1.3">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.1.1.3.1.1.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.1.1.3.1.1.1.3.1.1">
<span class="ltx_p" id="S4.T5.1.1.1.3.1.1.1.3.1.1.1" style="width:199.2pt;">have a key that starts with ’EMP’</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.1.1.3.1.1.1.4">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.1.1.3.1.1.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.1.1.3.1.1.1.4.1.1">
<span class="ltx_p" id="S4.T5.1.1.1.3.1.1.1.4.1.1.1" style="width:199.2pt;">### code</span>
</span></span></span>
</span></span>
</span>
</th>
</tr>
<tr class="ltx_tr" id="S4.T5.1.2.2">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T5.1.2.2.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.2.2.1.1">
<span class="ltx_p" id="S4.T5.1.2.2.1.1.1" style="width:28.5pt;">Actual</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.T5.1.2.2.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.2.2.2.1">
<span class="ltx_p" id="S4.T5.1.2.2.2.1.1" style="width:156.5pt;">[value for key, value in list(dict1.items()) if key.startswith(’EMP’)]</span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.3.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T5.1.3.3.1" rowspan="2"><span class="ltx_text" id="S4.T5.1.3.3.1.1">1-shot</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T5.1.3.3.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.2.1">
<span class="ltx_p" id="S4.T5.1.3.3.2.1.1" style="width:28.5pt;">Context</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.T5.1.3.3.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.3.1">
<span class="ltx_p" id="S4.T5.1.3.3.3.1.1" style="width:156.5pt;">
<span class="ltx_tabular ltx_align_middle" id="S4.T5.1.3.3.3.1.1.1">
<span class="ltx_tr" id="S4.T5.1.3.3.3.1.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.1.1.1">
<span class="ltx_p" id="S4.T5.1.3.3.3.1.1.1.1.1.1.1" style="width:199.2pt;">Demo1: ### requirement</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.3.3.3.1.1.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.2.1.1">
<span class="ltx_p" id="S4.T5.1.3.3.3.1.1.1.2.1.1.1" style="width:199.2pt;">create a list of values from the dictionary</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.3.3.3.1.1.1.3">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.3.1.1">
<span class="ltx_p" id="S4.T5.1.3.3.3.1.1.1.3.1.1.1" style="width:199.2pt;">‘programs‘ that have a key with a case</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.3.3.3.1.1.1.4">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.4.1.1">
<span class="ltx_p" id="S4.T5.1.3.3.3.1.1.1.4.1.1.1" style="width:199.2pt;">insensitive match to ’new york’</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.3.3.3.1.1.1.5">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.5.1.1">
<span class="ltx_p" id="S4.T5.1.3.3.3.1.1.1.5.1.1.1" style="width:199.2pt;">### code</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.3.3.3.1.1.1.6">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.6.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.6.1.1">
<span class="ltx_p" id="S4.T5.1.3.3.3.1.1.1.6.1.1.1" style="width:199.2pt;">[value for key, value in list(programs.items()) if</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.3.3.3.1.1.1.7">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.7.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.3.3.3.1.1.1.7.1.1">
<span class="ltx_p" id="S4.T5.1.3.3.3.1.1.1.7.1.1.1" style="width:199.2pt;">’new york’ in key.lower()]</span>
</span></span></span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.4.4">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T5.1.4.4.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.4.4.1.1">
<span class="ltx_p" id="S4.T5.1.4.4.1.1.1" style="width:28.5pt;">Response</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.T5.1.4.4.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.4.4.2.1">
<span class="ltx_p" id="S4.T5.1.4.4.2.1.1" style="width:156.5pt;">[value for key, value in list(dict1.items()) if key.startswith(’EMP’)] <span class="ltx_text" id="S4.T5.1.4.4.2.1.1.1" style="color:#00FF00;">✓</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.5.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T5.1.5.5.1" rowspan="2"><span class="ltx_text" id="S4.T5.1.5.5.1.1">2-shot</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T5.1.5.5.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.5.5.2.1">
<span class="ltx_p" id="S4.T5.1.5.5.2.1.1" style="width:28.5pt;">Context</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.T5.1.5.5.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.5.5.3.1">
<span class="ltx_p" id="S4.T5.1.5.5.3.1.1" style="width:156.5pt;">
<span class="ltx_tabular ltx_align_middle" id="S4.T5.1.5.5.3.1.1.1">
<span class="ltx_tr" id="S4.T5.1.5.5.3.1.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.1.1.1">
<span class="ltx_p" id="S4.T5.1.5.5.3.1.1.1.1.1.1.1" style="width:199.2pt;">//Demo1</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.5.5.3.1.1.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.2.1.1">
<span class="ltx_p" id="S4.T5.1.5.5.3.1.1.1.2.1.1.1" style="width:199.2pt;">Demo2: ### requirement</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.5.5.3.1.1.1.3">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.3.1.1">
<span class="ltx_p" id="S4.T5.1.5.5.3.1.1.1.3.1.1.1" style="width:199.2pt;">sort a dictionary ‘a‘ by values that are list type</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.5.5.3.1.1.1.4">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.4.1.1">
<span class="ltx_p" id="S4.T5.1.5.5.3.1.1.1.4.1.1.1" style="width:199.2pt;">### code</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.5.5.3.1.1.1.5">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.5.5.3.1.1.1.5.1.1">
<span class="ltx_p" id="S4.T5.1.5.5.3.1.1.1.5.1.1.1" style="width:199.2pt;">t = sorted(list(a.items()), key=lambda x: x[1])</span>
</span></span></span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.6.6">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T5.1.6.6.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.6.6.1.1">
<span class="ltx_p" id="S4.T5.1.6.6.1.1.1" style="width:28.5pt;">Response</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.T5.1.6.6.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.6.6.2.1">
<span class="ltx_p" id="S4.T5.1.6.6.2.1.1" style="width:156.5pt;">[value for key, value in list(dict1.items()) if key.startswith(’EMP’)] <span class="ltx_text" id="S4.T5.1.6.6.2.1.1.1" style="color:#00FF00;">✓</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.7.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r ltx_border_t" id="S4.T5.1.7.7.1" rowspan="2"><span class="ltx_text" id="S4.T5.1.7.7.1.1">3-shot</span></th>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t" id="S4.T5.1.7.7.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.2.1">
<span class="ltx_p" id="S4.T5.1.7.7.2.1.1" style="width:28.5pt;">Context</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="S4.T5.1.7.7.3">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1" style="width:156.5pt;">
<span class="ltx_tabular ltx_align_middle" id="S4.T5.1.7.7.3.1.1.1">
<span class="ltx_tr" id="S4.T5.1.7.7.3.1.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.1.1.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1.1.1.1.1.1" style="width:199.2pt;">//Demo1</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.7.7.3.1.1.1.2">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.2.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.2.1.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1.1.2.1.1.1" style="width:199.2pt;">//Demo2</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.7.7.3.1.1.1.3">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.3.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.3.1.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1.1.3.1.1.1" style="width:199.2pt;">Demo3: ### requirement</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.7.7.3.1.1.1.4">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.4.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.4.1.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1.1.4.1.1.1" style="width:199.2pt;">get keys of dictionary ‘my_dict‘ that contain any</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.7.7.3.1.1.1.5">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.5.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.5.1.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1.1.5.1.1.1" style="width:199.2pt;">values from list ‘lst‘</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.7.7.3.1.1.1.6">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.6.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.6.1.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1.1.6.1.1.1" style="width:199.2pt;">### code</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.7.7.3.1.1.1.7">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.7.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.7.1.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1.1.7.1.1.1" style="width:199.2pt;">[key for key, value in list(my_dict.items()) if</span>
</span></span></span>
<span class="ltx_tr" id="S4.T5.1.7.7.3.1.1.1.8">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.8.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.7.7.3.1.1.1.8.1.1">
<span class="ltx_p" id="S4.T5.1.7.7.3.1.1.1.8.1.1.1" style="width:199.2pt;">set(value).intersection(lst)]</span>
</span></span></span>
</span></span>
</span>
</td>
</tr>
<tr class="ltx_tr" id="S4.T5.1.8.8">
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t" id="S4.T5.1.8.8.1">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.8.8.1.1">
<span class="ltx_p" id="S4.T5.1.8.8.1.1.1" style="width:28.5pt;">Response</span>
</span>
</td>
<td class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_t" id="S4.T5.1.8.8.2">
<span class="ltx_inline-block ltx_align_top" id="S4.T5.1.8.8.2.1">
<span class="ltx_p" id="S4.T5.1.8.8.2.1.1" style="width:156.5pt;">[key for key, value in list(dict1.items()) if key.startswith(’EMP’)] <span class="ltx_text" id="S4.T5.1.8.8.2.1.1.1" style="color:#FF0000;">✗</span></span>
</span>
</td>
</tr>
</tbody>
</table>
</figure>
<figure class="ltx_table" id="S4.T6">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">TABLE VI: </span>The average prompt length, query latency (ms), and cosine similarity (%) of demonstrations to the query using SBERT_SS with varying numbers of shots.</figcaption>
<table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T6.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S4.T6.1.1.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.1.1.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.1.1.1.1">Task</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" colspan="5" id="S4.T6.1.1.1.2">Program Synthesis</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S4.T6.1.2.1">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.2.1.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.2.1.1.1"># of shots</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.2.1.2">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.2.1.3">3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.2.1.4">5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.2.1.5">7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.2.1.6">9</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.3.2">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.3.2.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.3.2.1.1">Avg # of Tokens</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.3.2.2">72.4</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.3.2.3">173</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.3.2.4">272.6</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.3.2.5">372</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.3.2.6">471.6</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.4.3">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.4.3.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.4.3.1.1">Latency Per Query</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.3.2">1.8</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.3.3">1.9</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.3.4">2.3</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.3.5">2.5</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.4.3.6">2.6</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.5.4">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.5.4.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.5.4.1.1">Avg Similarity</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.4.2">72.9</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.4.3">69.8</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.4.4">67.8</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.4.5">66.4</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.5.4.6">65.2</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.6.5">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.6.5.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.6.5.1.1">Task</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" colspan="5" id="S4.T6.1.6.5.2">Commit Generation</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.7.6">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.7.6.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.7.6.1.1"># of shots</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.7.6.2">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.7.6.3">3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.7.6.4">5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.7.6.5">7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.7.6.6">9</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.8.7">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.8.7.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.8.7.1.1">Avg # of Tokens</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.7.2">299.8</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.7.3">540.2</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.7.4">779.1</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.7.5">1017.2</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.8.7.6">1254.5</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.9.8">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.9.8.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.9.8.1.1">Latency Per Query</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.9.8.2">0.5</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.9.8.3">0.6</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.9.8.4">0.7</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.9.8.5">0.9</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.9.8.6">1</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.10.9">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.10.9.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.10.9.1.1">Avg Similarity</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.9.2">88.9</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.9.3">86.4</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.9.4">85</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.9.5">84.2</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.10.9.6">83.5</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.11.10">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.11.10.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.11.10.1.1">Task</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" colspan="5" id="S4.T6.1.11.10.2">Assertion Generation</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.12.11">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t" id="S4.T6.1.12.11.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.12.11.1.1"># of shots</span></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.12.11.2">1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.12.11.3">3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.12.11.4">5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.12.11.5">7</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T6.1.12.11.6">9</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.13.12">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.13.12.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.13.12.1.1">Avg # of Tokens</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.12.2">755.1</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.12.3">1515.3</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.12.4">2263.3</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.12.5">3004.2</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.13.12.6">3747.7</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.14.13">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r" id="S4.T6.1.14.13.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.14.13.1.1">Latency Per Query</span></th>
<td class="ltx_td ltx_align_center" id="S4.T6.1.14.13.2">0.9</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.14.13.3">1.2</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.14.13.4">1.6</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.14.13.5">1.9</td>
<td class="ltx_td ltx_align_center" id="S4.T6.1.14.13.6">2.2</td>
</tr>
<tr class="ltx_tr" id="S4.T6.1.15.14">
<th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r" id="S4.T6.1.15.14.1"><span class="ltx_text ltx_font_bold" id="S4.T6.1.15.14.1.1">Avg Similarity</span></th>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.15.14.2">91.5</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.15.14.3">87.5</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.15.14.4">85.1</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.15.14.5">83.2</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="S4.T6.1.15.14.6">81.9</td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_para" id="S4.SS5.p5">
<span class="ltx_ERROR undefined" id="S4.SS5.p5.1">{mdframed}</span>
<p class="ltx_p" id="S4.SS5.p5.2">[roundcorner=5pt]
<span class="ltx_text ltx_font_bold" id="S4.SS5.p5.2.1">Finding 5:</span> More demonstrations are not always beneficial to RAG. Adding additional demonstrations may introduce more noise, potentially leading to inaccurate outputs. Moreover, an increase in the number of tokens in the prompt can result in longer response delays.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">V </span><span class="ltx_text ltx_font_smallcaps" id="S5.1.1">Discussion</span>
</h2>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S5.SS1.4.1.1">V-A</span> </span><span class="ltx_text ltx_font_italic" id="S5.SS1.5.2">Implications of our study</span>
</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.2"><span class="ltx_text ltx_font_bold" id="S5.SS1.p1.2.1">We encourage practitioners to select retrievers based on their specific context. Generally, dense approximate retrievers offer the best balance between effectiveness and efficiency.</span>
In light of Findings 1, 2, and 3, different retrievers vary in their efficiency and effectiveness. For instance, with knowledge bases smaller than <math alttext="10^{3}" class="ltx_Math" display="inline" id="S5.SS1.p1.1.m1.1"><semantics id="S5.SS1.p1.1.m1.1a"><msup id="S5.SS1.p1.1.m1.1.1" xref="S5.SS1.p1.1.m1.1.1.cmml"><mn id="S5.SS1.p1.1.m1.1.1.2" xref="S5.SS1.p1.1.m1.1.1.2.cmml">10</mn><mn id="S5.SS1.p1.1.m1.1.1.3" xref="S5.SS1.p1.1.m1.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S5.SS1.p1.1.m1.1b"><apply id="S5.SS1.p1.1.m1.1.1.cmml" xref="S5.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S5.SS1.p1.1.m1.1.1.1.cmml" xref="S5.SS1.p1.1.m1.1.1">superscript</csymbol><cn id="S5.SS1.p1.1.m1.1.1.2.cmml" type="integer" xref="S5.SS1.p1.1.m1.1.1.2">10</cn><cn id="S5.SS1.p1.1.m1.1.1.3.cmml" type="integer" xref="S5.SS1.p1.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p1.1.m1.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p1.1.m1.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math>, the sparse retriever BM25 is more efficient and effective compared to approximate dense and exhaustive dense retrievers. However, for larger knowledge bases exceeding <math alttext="10^{3}" class="ltx_Math" display="inline" id="S5.SS1.p1.2.m2.1"><semantics id="S5.SS1.p1.2.m2.1a"><msup id="S5.SS1.p1.2.m2.1.1" xref="S5.SS1.p1.2.m2.1.1.cmml"><mn id="S5.SS1.p1.2.m2.1.1.2" xref="S5.SS1.p1.2.m2.1.1.2.cmml">10</mn><mn id="S5.SS1.p1.2.m2.1.1.3" xref="S5.SS1.p1.2.m2.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S5.SS1.p1.2.m2.1b"><apply id="S5.SS1.p1.2.m2.1.1.cmml" xref="S5.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S5.SS1.p1.2.m2.1.1.1.cmml" xref="S5.SS1.p1.2.m2.1.1">superscript</csymbol><cn id="S5.SS1.p1.2.m2.1.1.2.cmml" type="integer" xref="S5.SS1.p1.2.m2.1.1.2">10</cn><cn id="S5.SS1.p1.2.m2.1.1.3.cmml" type="integer" xref="S5.SS1.p1.2.m2.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p1.2.m2.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p1.2.m2.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math>, approximate dense retrievers demonstrate superior efficiency while maintaining effectiveness comparable to BM25. Therefore, considering both efficiency and effectiveness, employing an approximate dense retriever can enhance speed with only a minimal trade-off in generation quality, except when dealing with very small knowledge bases.</p>
</div>
<div class="ltx_para" id="S5.SS1.p2">
<p class="ltx_p" id="S5.SS1.p2.1"><span class="ltx_text ltx_font_bold" id="S5.SS1.p2.1.1">We recommend practitioners balance effectiveness and efficiency when tuning hyper-parameters for approximate retrievers.</span>
As demonstrated in RQ4, the parameters of approximate dense retrievers can be adjusted to improve retrieval efficiency. However, practitioners should be cautious, as retrieval precision and overall effectiveness may significantly decline at high QPS (Queries Per Second).</p>
</div>
<div class="ltx_para" id="S5.SS1.p3">
<p class="ltx_p" id="S5.SS1.p3.1"><span class="ltx_text ltx_font_bold" id="S5.SS1.p3.1.1">More demonstrations do not necessarily guarantee better effectiveness. Practitioners should exercise caution when adding demonstrations.</span>
As indicated in RQ5, increasing the number of demonstrations does not necessarily improve the effectiveness of RAG. In certain instances, adding more demonstrations can distract the model, particularly when the retrieved demonstrations share similar inputs but yield different outputs relative to the query. Consequently, it is advisable to limit the number of demonstrations.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span class="ltx_text" id="S5.SS2.4.1.1">V-B</span> </span><span class="ltx_text ltx_font_italic" id="S5.SS2.5.2">Threats to validity</span>
</h3>
<div class="ltx_para ltx_noindent" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.1"><span class="ltx_text ltx_font_bold" id="S5.SS2.p1.1.1">Internal Validity</span>
Prompt engineering has a significant impact on the LLM’s performance <cite class="ltx_cite ltx_citemacro_cite">[<a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#bib.bib40" title="">40</a>]</cite>. Different prompts probably can lead to different results. However, as we discussed in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.09662v1#S3" title="III Experimental Design ‣ Exploring Demonstration Retrievers in RAG for Coding Tasks: Yeas and Nays!"><span class="ltx_text ltx_ref_tag">III</span></a>, our tasks are basic and straightforward. More importantly, we use the same prompt template for our experiments for fair comparison.</p>
</div>
<div class="ltx_para ltx_noindent" id="S5.SS2.p2">
<p class="ltx_p" id="S5.SS2.p2.1"><span class="ltx_text ltx_font_bold" id="S5.SS2.p2.1.1">External Validity</span>
relates to the generalizability of our findings. In this study, we opted to use CodeLlama-13b for our experiments due to the cost constraints, RAG capability, and memory limitation. This choice may influence the generalizability of our findings. Similarity, we focus on six retrievers in this study, which are selected from different families, and widely used in previous studies. Nevertheless, we encourage future study to extend our study to more LLMs and retrievers.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">VI </span><span class="ltx_text ltx_font_smallcaps" id="S6.1.1">Conclusion</span>
</h2>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">In this paper, we experimentally investigate the efficiency-effectiveness trade-off of different retrievers applied to RAG in coding tasks. Our results show that the sparse BM25 retriever excels in effectiveness, particularly in recalling more <em class="ltx_emph ltx_font_italic" id="S6.p1.1.1">gold demonstrations</em>. However, the efficiency and trade-off between effectiveness depend on the size of the knowledge base. Sparse approaches are more efficient only when the knowledge base contains fewer than <math alttext="10^{3}" class="ltx_Math" display="inline" id="S6.p1.1.m1.1"><semantics id="S6.p1.1.m1.1a"><msup id="S6.p1.1.m1.1.1" xref="S6.p1.1.m1.1.1.cmml"><mn id="S6.p1.1.m1.1.1.2" xref="S6.p1.1.m1.1.1.2.cmml">10</mn><mn id="S6.p1.1.m1.1.1.3" xref="S6.p1.1.m1.1.1.3.cmml">3</mn></msup><annotation-xml encoding="MathML-Content" id="S6.p1.1.m1.1b"><apply id="S6.p1.1.m1.1.1.cmml" xref="S6.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S6.p1.1.m1.1.1.1.cmml" xref="S6.p1.1.m1.1.1">superscript</csymbol><cn id="S6.p1.1.m1.1.1.2.cmml" type="integer" xref="S6.p1.1.m1.1.1.2">10</cn><cn id="S6.p1.1.m1.1.1.3.cmml" type="integer" xref="S6.p1.1.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.p1.1.m1.1c">10^{3}</annotation><annotation encoding="application/x-llamapun" id="S6.p1.1.m1.1d">10 start_POSTSUPERSCRIPT 3 end_POSTSUPERSCRIPT</annotation></semantics></math> entries. For larger-scale retrieval, approximate dense retrievers offer significant efficiency gains with minimal degradation in effectiveness. Additionally, our findings reveal that increasing the number of demonstrations does not always enhance RAG effectiveness. In fact, it can introduce response latency and lead to incorrect outputs due to distraction. These insights offer valuable guidance for practitioners aiming to build efficient and effective RAG systems for coding tasks.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Y. Tian, W. Yan, Q. Yang, Q. Chen, W. Wang, Z. Luo, and L. Ma, “Codehalu: Code hallucinations in llms driven by execution-based verification,” 2024. [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://arxiv.org/abs/2405.00253</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Y. Gao, Y. Xiong, X. Gao, K. Jia, J. Pan, Y. Bi, Y. Dai, J. Sun, and H. Wang, “Retrieval-augmented generation for large language models: A survey,” <em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv e-prints</em>, pp. arXiv–2312, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
J. Chen, X. Hu, Z. Li, C. Gao, X. Xia, and D. Lo, “Code search is all you need? improving code suggestions with code search,” in <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">2024 IEEE/ACM 46th International Conference on Software Engineering (ICSE)</em>.   Los Alamitos, CA, USA: IEEE Computer Society, apr 2024, pp. 857–857. [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://doi.ieeecomputersociety.org/</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
S. Gao, X.-C. Wen, C. Gao, W. Wang, H. Zhang, and M. R. Lyu, “What makes good in-context demonstrations for code intelligence tasks with llms?” in <em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">2023 38th IEEE/ACM International Conference on Automated Software Engineering (ASE)</em>.   IEEE, 2023, pp. 761–773.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
S. Zhou, U. Alon, F. F. Xu, Z. Wang, Z. Jiang, and G. Neubig, “Docprompting: Generating code by retrieving the docs,” in <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">International Conference on Learning Representations (ICLR)</em>, Kigali, Rwanda, May 2023. [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://arxiv.org/abs/2207.05987</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
N. Nashid, M. Sintaha, and A. Mesbah, “Retrieval-based prompt selection for code-related few-shot learning,” in <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">2023 IEEE/ACM 45th International Conference on Software Engineering (ICSE)</em>.   IEEE, 2023, pp. 2450–2462.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
K. Sawarkar, A. Mangal, and S. R. Solanki, “Blended rag: Improving rag (retriever-augmented generation) accuracy with semantic search and hybrid query-based retrievers,” <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">arXiv preprint arXiv:2404.07220</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
A. Salemi and H. Zamani, “Evaluating retrieval quality in retrieval-augmented generation,” in <em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">Proceedings of the 47th International ACM SIGIR Conference on Research and Development in Information Retrieval</em>, 2024, pp. 2395–2400.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
D. Brown, “Rank-BM25: A Collection of BM25 Algorithms in Python,” 2020. [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://doi.org/10.5281/zenodo.4520057</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
J. Liu, “LlamaIndex,” 11 2022. [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://github.com/jerryjliu/llama_index</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
N. Reimers and I. Gurevych, “Sentence-bert: Sentence embeddings using siamese bert-networks,” <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">arXiv preprint arXiv:1908.10084</em>, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
D. Guo, S. Lu, N. Duan, Y. Wang, M. Zhou, and J. Yin, “Unixcoder: Unified cross-modal pre-training for code representation,” in <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Proceedings of the 60th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, 2022, pp. 7212–7225.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
C. Watson, M. Tufano, K. Moran, G. Bavota, and D. Poshyvanyk, “On learning meaningful assert statements for unit test cases,” in <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">2020 IEEE/ACM 42nd International Conference on Software Engineering (ICSE)</em>, 2020, pp. 1398–1409.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Y. Lv and C. Zhai, “When documents are very long, bm25 fails!” in <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Proceedings of the 34th international ACM SIGIR conference on Research and development in Information Retrieval</em>, 2011, pp. 1103–1104.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
H. Jiang, Q. Wu, X. Luo, D. Li, C.-Y. Lin, Y. Yang, and L. Qiu, “Longllmlingua: Accelerating and enhancing llms in long context scenarios via prompt compression,” <em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">arXiv preprint arXiv:2310.06839</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Erik Bernhardsson, “Approximate nearest neighbors oh yeah.” [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://github.com/spotify/annoy</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
O. Jafari, P. Maurya, P. Nagarkar, K. M. Islam, and C. Crushev, “A survey on locality sensitive hashing algorithms and their applications,” <em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">arXiv preprint arXiv:2102.08942</em>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Y. A. Malkov and D. A. Yashunin, “Efficient and robust approximate nearest neighbor search using hierarchical navigable small world graphs,” <em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">IEEE transactions on pattern analysis and machine intelligence</em>, vol. 42, no. 4, pp. 824–836, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
anonymous, “Ann4rag,” <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://anonymous.4open.science/r/ANN4RAG-FE43</span>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
N. F. Liu, K. Lin, J. Hewitt, A. Paranjape, M. Bevilacqua, F. Petroni, and P. Liang, “Lost in the middle: How language models use long contexts,” <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Transactions of the Association for Computational Linguistics</em>, vol. 12, pp. 157–173, 2024. [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://aclanthology.org/2024.tacl-1.9</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
S. E. Robertson, S. Walker, S. Jones, M. M. Hancock-Beaulieu, M. Gatford <em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">et al.</em>, “Okapi at trec-3,” <em class="ltx_emph ltx_font_italic" id="bib.bib21.2.2">Nist Special Publication Sp</em>, vol. 109, p. 109, 1995.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
A. Trotman, A. Puurula, and B. Burgess, “Improvements to bm25 and language models examined,” in <em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">Proceedings of the 19th Australasian Document Computing Symposium</em>, 2014, pp. 58–65.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
W. B. Powell, <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Approximate Dynamic Programming: Solving the curses of dimensionality</em>.   John Wiley &amp; Sons, 2007, vol. 703.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
P. Ram and K. Sinha, “Revisiting kd-tree for nearest neighbor search,” in <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">Proceedings of the 25th acm sigkdd international conference on knowledge discovery &amp; data mining</em>, 2019, pp. 1378–1388.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
J. Johnson, M. Douze, and H. Jégou, “Billion-scale similarity search with GPUs,” <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">IEEE Transactions on Big Data</em>, vol. 7, no. 3, pp. 535–547, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
M. Aumüller, E. Bernhardsson, and A. Faithfull, “Ann-benchmarks: A benchmarking tool for approximate nearest neighbor algorithms,” 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
M. Wang, X. Xu, Q. Yue, and Y. Wang, “A comprehensive survey and experimental comparison of graph-based approximate nearest neighbor search,” <em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">Proceedings of the VLDB Endowment</em>, vol. 14, no. 11, pp. 1964–1978, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
P. Yin, B. Deng, E. Chen, B. Vasilescu, and G. Neubig, “Learning to mine aligned code and natural language pairs from stack overflow,” in <em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">International Conference on Mining Software Repositories</em>, ser. MSR.   ACM, 2018, pp. 476–486.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
H. Wang, X. Xia, D. Lo, Q. He, X. Wang, and J. Grundy, “Context-aware retrieval-based deep commit message generation,” <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">ACM Transactions on Software Engineering and Methodology (TOSEM)</em>, vol. 30, no. 4, pp. 1–30, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
S. Ren, D. Guo, S. Lu, L. Zhou, S. Liu, D. Tang, N. Sundaresan, M. Zhou, A. Blanco, and S. Ma, “Codebleu: a method for automatic evaluation of code synthesis,” <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">arXiv preprint arXiv:2009.10297</em>, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
R. et al., “Sbert,” <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://www.sbert.net/</span>, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Z. Pan, Q. Wu, H. Jiang, M. Xia, X. Luo, J. Zhang, Q. Lin, V. Rühle, Y. Yang, C.-Y. Lin, H. V. Zhao, L. Qiu, and D. Zhang, “LLMLingua-2: Data distillation for efficient and faithful task-agnostic prompt compression,” in <em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">Findings of the Association for Computational Linguistics ACL 2024</em>, L.-W. Ku, A. Martins, and V. Srikumar, Eds.   Bangkok, Thailand and virtual meeting: Association for Computational Linguistics, Aug. 2024, pp. 963–981. [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://aclanthology.org/2024.findings-acl.57</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
B. Rozière, J. Gehring, F. Gloeckle, S. Sootla, I. Gat, X. E. Tan, Y. Adi, J. Liu, R. Sauvestre, T. Remez, J. Rapin, A. Kozhevnikov, I. Evtimov, J. Bitton, M. Bhatt, C. C. Ferrer, A. Grattafiori, W. Xiong, A. Défossez, J. Copet, F. Azhar, H. Touvron, L. Martin, N. Usunier, T. Scialom, and G. Synnaeve, “Code llama: Open foundation models for code,” 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
P. Finardi, L. Avila, R. Castaldoni, P. Gengo, C. Larcher, M. Piau, P. Costa, and V. Caridá, “The chronicles of rag: The retriever, the chunk and the generator,” <em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">arXiv preprint arXiv:2401.07883</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
A. Yates, R. Nogueira, and J. Lin, “Pretrained transformers for text ranking: Bert and beyond,” <em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">NAACL-HLT 2021</em>, p. 1, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
O. Rubin, J. Herzig, and J. Berant, “Learning to retrieve prompts for in-context learning,” 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
J. Chen, L. Chen, C. Zhu, and T. Zhou, “How many demonstrations do you need for in-context learning?” in <em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">Findings of the Association for Computational Linguistics: EMNLP 2023</em>, 2023, pp. 11 149–11 159.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
S. Chowdhury, R. Holmes, A. Zaidman, and R. Kazman, “Revisiting the debate: Are code metrics useful for measuring maintenance effort?” <em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">Empirical Software Engineering</em>, vol. 27, no. 6, p. 158, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
F. Shi, X. Chen, K. Misra, N. Scales, D. Dohan, E. Chi, N. Schärli, and D. Zhou, “Large language models can be easily distracted by irrelevant context,” 2023. [Online]. Available: <span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://arxiv.org/abs/2302.00093</span>
</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
D. Grabb, “The impact of prompt engineering in large language model performance: a psychiatric example,” <em class="ltx_emph ltx_font_italic" id="bib.bib40.1.1">Journal of Medical Artificial Intelligence</em>, vol. 6, 2023.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Sat Oct 12 22:28:27 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
