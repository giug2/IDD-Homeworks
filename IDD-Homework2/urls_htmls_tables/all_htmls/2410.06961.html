<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Self-Boosting LLMs with Synthetic Preference Data</title>
<!--Generated on Wed Oct  9 14:53:48 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2410.06961v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S1" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Self-Boosting LLM with Synthetic Preference Data</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS1" title="In 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Synthetic Prompt Creation</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS1.SSS0.Px1" title="In 2.1 Synthetic Prompt Creation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Self-Prompt Generator Training</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS1.SSS0.Px2" title="In 2.1 Synthetic Prompt Creation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Keywords Sampling and Prompt Generating</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS2" title="In 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Synthetic Preference Generation</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS2.SSS0.Px1" title="In 2.2 Synthetic Preference Generation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Response Improver Training</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS2.SSS0.Px2" title="In 2.2 Synthetic Preference Generation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Response Improving</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS2.SSS0.Px3" title="In 2.2 Synthetic Preference Generation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Data Filtering</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS3" title="In 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>Synthetic Preference Optimization</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS1" title="In 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Experimental Setup</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS1.SSS0.Px1" title="In 3.1 Experimental Setup ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Models and Training</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS1.SSS0.Px2" title="In 3.1 Experimental Setup ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Seed Data Construction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS1.SSS0.Px3" title="In 3.1 Experimental Setup ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Baselines</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS2" title="In 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Preference Alignment</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS2.SSS0.Px1" title="In 3.2 Preference Alignment ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Single-Turn Dialogues</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS2.SSS0.Px2" title="In 3.2 Preference Alignment ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Multi-Turn Dialogues</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS3" title="In 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Downstream Task Performance</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS3.SSS0.Px1" title="In 3.3 Downstream Task Performance ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Open LLM Leaderboard</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.SS3.SSS0.Px2" title="In 3.3 Downstream Task Performance ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">LLM Harness Tasks</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S4" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Ablation Studies</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S4.SS1" title="In 4 Ablation Studies ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Synthetic Prompts and Responses</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S4.SS2" title="In 4 Ablation Studies ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Impact of Seed Data</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S5" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S5.SS0.SSS0.Px1" title="In 5 Related Work ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Preference Data Construction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S5.SS0.SSS0.Px2" title="In 5 Related Work ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">LLM Self-Boosting</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S5.SS0.SSS0.Px3" title="In 5 Related Work ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title">Synthetic Data for LLMs</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S6" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A1" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Algorithm</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A2" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Prompt for Response-refiner</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Experimental Details</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3.SS1" title="In Appendix C Experimental Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1 </span>Self-Prompt Generator Training</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3.SS2" title="In Appendix C Experimental Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.2 </span>Response Improver Training</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3.SS3" title="In Appendix C Experimental Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.3 </span>Response Improving and Filtering Setting</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3.SS4" title="In Appendix C Experimental Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.4 </span>Optimization</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3.SS5" title="In Appendix C Experimental Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.5 </span>Baselines</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3.SS6" title="In Appendix C Experimental Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.6 </span>Decoding Hyperparameters</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A4" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Additional Details on Seed Data Ablation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A5" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>API Usage</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A6" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">F </span>Prompt Analysis</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A7" title="In Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">G </span>Evaluation Details</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Self-Boosting LLMs with Synthetic Preference Data</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Qingxiu Dong<sup class="ltx_sup" id="id8.8.id1"><span class="ltx_text ltx_font_italic" id="id8.8.id1.1">†,‡</span></sup>    Li Dong<sup class="ltx_sup" id="id9.9.id2">‡</sup>    Xingxing Zhang<sup class="ltx_sup" id="id10.10.id3">‡</sup>    Zhifang Sui<sup class="ltx_sup" id="id11.11.id4">†</sup>    Furu Wei<sup class="ltx_sup" id="id12.12.id5">‡</sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id13.13.id6">†</sup>Peking University     <sup class="ltx_sup" id="id14.14.id7">‡</sup>Microsoft Research

<br class="ltx_break"/>
</span></span>
</div>
<h1 class="ltx_title ltx_title_document">Self-Boosting Large Language Models with 
<br class="ltx_break"/>Synthetic Preference Data</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Qingxiu Dong<sup class="ltx_sup" id="id8.8.id1"><span class="ltx_text ltx_font_italic" id="id8.8.id1.1">†,‡</span></sup>    Li Dong<sup class="ltx_sup" id="id9.9.id2">‡</sup>    Xingxing Zhang<sup class="ltx_sup" id="id10.10.id3">‡</sup>    Zhifang Sui<sup class="ltx_sup" id="id11.11.id4">†</sup>    Furu Wei<sup class="ltx_sup" id="id12.12.id5">‡</sup>
<br class="ltx_break"/><sup class="ltx_sup" id="id13.13.id6">†</sup>Peking University     <sup class="ltx_sup" id="id14.14.id7">‡</sup>Microsoft Research

<br class="ltx_break"/>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id15.id1">Through alignment with human preferences, Large Language Models (LLMs) have advanced significantly in generating honest, harmless, and helpful responses.
However, collecting high-quality preference data is a resource-intensive and creativity-demanding process, especially for the continual improvement of LLMs.
We introduce SynPO, a self-boosting paradigm that leverages synthetic preference data for model alignment.
SynPO employs an iterative mechanism wherein a self-prompt generator creates diverse prompts, and a response improver refines model responses progressively.
This approach trains LLMs to autonomously learn the generative rewards for their own outputs and eliminates the need for large-scale annotation of prompts and human preferences.
After four SynPO iterations, Llama3-8B and Mistral-7B show significant enhancements in instruction-following abilities, achieving over 22.1% win rate improvements on AlpacaEval 2.0 and ArenaHard.
Simultaneously, SynPO improves the general performance of LLMs on various tasks, validated by a 3.2 to 5.0 average score increase on the well-recognized Open LLM leaderboard.</p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para ltx_noindent" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Large Language Models (LLMs) have made remarkable progress in following user instructions and generating honest, harmless, and helpful responses <cite class="ltx_cite ltx_citemacro_citep">(Achiam et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib1" title="">2023</a>; Dubey et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib16" title="">2024</a>)</cite>. This advancement is primarily achieved in the model alignment stage, which involves training reward models or LLMs directly on datasets curated from human preferences <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib45" title="">2022b</a>; Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib5" title="">2022a</a>)</cite>
, typically employing Reinforcement Learning from Human Feedback (RLHF) <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib45" title="">2022b</a>)</cite> or Direct Preference Optimization (DPO) <cite class="ltx_cite ltx_citemacro_citep">(Rafailov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib47" title="">2024</a>)</cite>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Recent research has made significant strides in model alignment by
collecting high-quality preference data <cite class="ltx_cite ltx_citemacro_citep">(Hu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib26" title="">2024</a>)</cite>
, sampling and ranking on-policy responses <cite class="ltx_cite ltx_citemacro_citep">(Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>; Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib60" title="">2024b</a>)</cite>, or introducing LLM-as-a-Judge as substitutes for human preferences <cite class="ltx_cite ltx_citemacro_citep">(Yuan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib64" title="">2024</a>; Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>)</cite>.
However, most work still relies on static, pre-collected preference datasets from human or stronger LLM annotation.
As LLMs improve rapidly, collecting large, high-quality preference data for effective learning becomes increasingly challenging and costly, whether from humans or stronger models <cite class="ltx_cite ltx_citemacro_citep">(Shi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib51" title="">2023</a>)</cite>.
According to <cite class="ltx_cite ltx_citemacro_citet">Yin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib63" title="">2024</a>)</cite>, directly sampling preference pairs, which closely resembles an on-policy setting, can result in performance declines due to inherent volatility and inefficiency.
Therefore, constructing effective preference data to continuously improve LLMs remains a critical research problem.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">In this work, we present a self-boosting paradigm for LLM alignment, SynPO.
This paradigm leverages a small set of supervised fine-tuning (SFT) data to steer the generation of synthetic preference data, thereby enabling LLMs to iteratively extend their capabilities through optimizing on synthetic data.
To support iterative preference learning across diverse scenarios, SynPO first trains a self-prompt generator to create large-scale synthetic prompts.
Unlike previous approaches that require more powerful LLMs and instruction examples <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib58" title="">2022</a>)</cite>, our generator utilizes only the LLM itself and three random keywords as input.
To generate preference pairs for the synthetic prompts,
SynPO utilizes model-generated responses as rejected candidates and employs a response improver to refine these responses into chosen ones.
The response improver comes from two straightforward intuitions: (1) LLMs excel at identifying distribution gaps between texts <cite class="ltx_cite ltx_citemacro_citep">(Zhong et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib68" title="">2022</a>; Singh et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib52" title="">2022</a>)</cite>, and (2) refining a response is generally easier than generating a high-quality response from scratch <cite class="ltx_cite ltx_citemacro_citep">(Madaan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib39" title="">2023</a>; Lu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib36" title="">2023</a>; Nguyen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib43" title="">2024</a>)</cite>.
In each iteration, we train the initial model to be a response improver, focusing on identifying distribution gaps between current model outputs and gold standard responses in seed data. We then use the response improver to refine the model outputs, thereby providing generative rewards to the responses.
This approach allows the LLM to make subtle improvements and gradually push its boundaries.
By leveraging small high-quality data and the current model state to guide the generation of synthetic data, we introduce stronger supervision in an iterative manner.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">Experimental results demonstrate that SynPO not only benefits LLM alignment with human preferences, but also improves generalist capabilities across various tasks.
Trained solely on synthetic data, SynPO significantly improves the instruction-following abilities of Llama3-8B and Mistral-7B (as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">1</span></a> and Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">1</span></a>), achieving over a 26% length-controlled win rate improvement on AlpacaEval 2.0 <cite class="ltx_cite ltx_citemacro_citep">(Dubois et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib17" title="">2024</a>)</cite> and a 22% to 30% improvement on Arena-hard <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib32" title="">2024c</a>)</cite> (as shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.T2" title="Table 2 ‣ 2.3 Synthetic Preference Optimization ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">2</span></a>). Furthermore, self-boosted models achieve 3.2% to 5.0% higher average performance than SFT models on the Open LLM leaderboard <cite class="ltx_cite ltx_citemacro_citep">(Beeching et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib7" title="">2023</a>)</cite>, indicating SynPO also enhances general LLM performance.</p>
</div>
<div class="ltx_para ltx_noindent" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">To summarize, our contribution includes:</p>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We introduce SynPO, a self-boosting mechanism that iteratively induces LLMs to synthesize high-quality data for training.
Without requiring human-annotated preference data, SynPO significantly enhances the diversity and quality of synthetic prompts and responses.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;padding-top:0.1pt;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">SynPO dynamically guides LLMs to improve their own outputs, using pre- and post-refinement generations as synthetic preference pairs for training. This approach effectively integrates generative rewards for preference learning, enabling LLMs to gradually push their boundaries.</p>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;padding-top:0.1pt;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para ltx_noindent" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">SynPO significantly enhances both the instruction-following capabilities and the general performance of LLMs, showing substantial improvements over three to four iterations.</p>
</div>
</li>
</ul>
</div>
<figure class="ltx_figure" id="S1.F1">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_bottom" id="S1.F1.1" style="width:188.8pt;"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="655" id="S1.F1.1.g1" src="x1.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Length-controlled win rate on AlpacaEval 2.0 improves with SynPO iterations, approaching GPT-4 level for the base versions of Llama3-8B and Mistral-7B.</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_bottom" id="S1.F1.fig1" style="width:190.8pt;">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S1.F1.fig1.1" style="width:393.5pt;height:482pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(79.2pt,-97.0pt) scale(1.67372594887512,1.67372594887512) ;">
<table class="ltx_tabular ltx_align_middle" id="S1.F1.fig1.1.1">
<tr class="ltx_tr" id="S1.F1.fig1.1.1.1">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_tt" id="S1.F1.fig1.1.1.1.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.1.1.1">Model</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="S1.F1.fig1.1.1.1.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.1.2.1">Size</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="S1.F1.fig1.1.1.1.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.1.3.1">LC (%)</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="S1.F1.fig1.1.1.1.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.1.4.1">WR (%)</span></td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.2">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S1.F1.fig1.1.1.2.1" style="padding-left:2.0pt;padding-right:2.0pt;">gpt4_1106_preview</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S1.F1.fig1.1.1.2.2" style="padding-left:2.0pt;padding-right:2.0pt;">-</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S1.F1.fig1.1.1.2.3" style="padding-left:2.0pt;padding-right:2.0pt;">50.0</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="S1.F1.fig1.1.1.2.4" style="padding-left:2.0pt;padding-right:2.0pt;">50.0</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.3">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.3.1" style="padding-left:2.0pt;padding-right:2.0pt;">GPT-4 (03/14)</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.3.2" style="padding-left:2.0pt;padding-right:2.0pt;">-</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.3.3" style="padding-left:2.0pt;padding-right:2.0pt;">35.3</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.3.4" style="padding-left:2.0pt;padding-right:2.0pt;">22.1</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.4">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.4.1" style="padding-left:2.0pt;padding-right:2.0pt;">Meta-Llama-3-70B-Instruct</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.4.2" style="padding-left:2.0pt;padding-right:2.0pt;">70B</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.4.3" style="padding-left:2.0pt;padding-right:2.0pt;">34.4</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.4.4" style="padding-left:2.0pt;padding-right:2.0pt;">33.2</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.5" style="background-color:#B3B3B3;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.5.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.5.1.1" style="background-color:#B3B3B3;">Mistral-Base-SynPO   <span class="ltx_text ltx_font_medium ltx_font_italic" id="S1.F1.fig1.1.1.5.1.1.1">Iter4</span></span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.5.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.5.2.1" style="background-color:#B3B3B3;">7B</span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.5.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.5.3.1" style="background-color:#B3B3B3;">34.0</span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.5.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.5.4.1" style="background-color:#B3B3B3;">36.4</span></td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.6">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.6.1" style="padding-left:2.0pt;padding-right:2.0pt;">Mistral Large (24/02)</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.6.2" style="padding-left:2.0pt;padding-right:2.0pt;">123B</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.6.3" style="padding-left:2.0pt;padding-right:2.0pt;">32.7</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.6.4" style="padding-left:2.0pt;padding-right:2.0pt;">21.4</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.7" style="background-color:#C4C4C4;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.7.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.7.1.1" style="background-color:#C4C4C4;">Mistral-Base-SynPO   <span class="ltx_text ltx_font_medium ltx_font_italic" id="S1.F1.fig1.1.1.7.1.1.1">Iter3</span></span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.7.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.7.2.1" style="background-color:#C4C4C4;">7B</span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.7.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.7.3.1" style="background-color:#C4C4C4;">31.7</span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.7.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.7.4.1" style="background-color:#C4C4C4;">33.8</span></td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.8">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.8.1" style="padding-left:2.0pt;padding-right:2.0pt;">GPT-4 (06/13)</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.8.2" style="padding-left:2.0pt;padding-right:2.0pt;">-</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.8.3" style="padding-left:2.0pt;padding-right:2.0pt;">30.2</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.8.4" style="padding-left:2.0pt;padding-right:2.0pt;">15.8</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.9">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.9.1" style="padding-left:2.0pt;padding-right:2.0pt;">Claude 2</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.9.2" style="padding-left:2.0pt;padding-right:2.0pt;">-</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.9.3" style="padding-left:2.0pt;padding-right:2.0pt;">28.2</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.9.4" style="padding-left:2.0pt;padding-right:2.0pt;">17.2</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.10">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.10.1" style="padding-left:2.0pt;padding-right:2.0pt;">Claude 2.1</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.10.2" style="padding-left:2.0pt;padding-right:2.0pt;">-</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.10.3" style="padding-left:2.0pt;padding-right:2.0pt;">27.3</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.10.4" style="padding-left:2.0pt;padding-right:2.0pt;">17.0</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.11" style="background-color:#D6D6D6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.11.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.11.1.1" style="background-color:#D6D6D6;">Mistral-Base-SynPO   <span class="ltx_text ltx_font_medium ltx_font_italic" id="S1.F1.fig1.1.1.11.1.1.1">Iter2</span></span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.11.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.11.2.1" style="background-color:#D6D6D6;">7B</span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.11.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.11.3.1" style="background-color:#D6D6D6;">25.7</span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.11.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.11.4.1" style="background-color:#D6D6D6;">28.1</span></td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.12">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.12.1" style="padding-left:2.0pt;padding-right:2.0pt;">gemini-pro</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.12.2" style="padding-left:2.0pt;padding-right:2.0pt;">-</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.12.3" style="padding-left:2.0pt;padding-right:2.0pt;">24.4</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.12.4" style="padding-left:2.0pt;padding-right:2.0pt;">18.2</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.13">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.13.1" style="padding-left:2.0pt;padding-right:2.0pt;">Mixtral-8x7B-Instruct-v0.1</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.13.2" style="padding-left:2.0pt;padding-right:2.0pt;">8x7B</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.13.3" style="padding-left:2.0pt;padding-right:2.0pt;">23.7</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.13.4" style="padding-left:2.0pt;padding-right:2.0pt;">18.3</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.14">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.14.1" style="padding-left:2.0pt;padding-right:2.0pt;">Mistral-7B-Instruct-v0.2</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.14.2" style="padding-left:2.0pt;padding-right:2.0pt;">7B</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.14.3" style="padding-left:2.0pt;padding-right:2.0pt;">17.1</td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.14.4" style="padding-left:2.0pt;padding-right:2.0pt;">14.7</td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.15" style="background-color:#E6E6E6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S1.F1.fig1.1.1.15.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.15.1.1" style="background-color:#E6E6E6;">Mistral-Base-SynPO   <span class="ltx_text ltx_font_medium ltx_font_italic" id="S1.F1.fig1.1.1.15.1.1.1">Iter1</span></span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.15.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.15.2.1" style="background-color:#E6E6E6;">7B</span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.15.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.15.3.1" style="background-color:#E6E6E6;">13.3</span></td>
<td class="ltx_td ltx_align_right" id="S1.F1.fig1.1.1.15.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S1.F1.fig1.1.1.15.4.1" style="background-color:#E6E6E6;">15.3</span></td>
</tr>
<tr class="ltx_tr" id="S1.F1.fig1.1.1.16">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_r" id="S1.F1.fig1.1.1.16.1" style="padding-left:2.0pt;padding-right:2.0pt;">Mistral-Base-SFT</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S1.F1.fig1.1.1.16.2" style="padding-left:2.0pt;padding-right:2.0pt;">7B</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S1.F1.fig1.1.1.16.3" style="padding-left:2.0pt;padding-right:2.0pt;">6.6</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="S1.F1.fig1.1.1.16.4" style="padding-left:2.0pt;padding-right:2.0pt;">3.6</td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Table 1: </span>Results on AlpacaEval 2.0 leaderboard. LC and WR represent length-controlled and raw win rate, respectively.</figcaption>
</figure>
</div>
</div>
</figure>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Self-Boosting LLM with Synthetic Preference Data</h2>
<figure class="ltx_figure" id="S2.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="255" id="S2.F2.g1" src="x2.png" width="788"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span><span class="ltx_text ltx_font_bold" id="S2.F2.16.1">Overview of SynPO in the <math alttext="\mathbf{t^{th}}" class="ltx_Math" display="inline" id="S2.F2.16.1.m1.1"><semantics id="S2.F2.16.1.m1.1b"><msup id="S2.F2.16.1.m1.1.1" xref="S2.F2.16.1.m1.1.1.cmml"><mi id="S2.F2.16.1.m1.1.1.2" xref="S2.F2.16.1.m1.1.1.2.cmml">𝐭</mi><mi id="S2.F2.16.1.m1.1.1.3" xref="S2.F2.16.1.m1.1.1.3.cmml">𝐭𝐡</mi></msup><annotation-xml encoding="MathML-Content" id="S2.F2.16.1.m1.1c"><apply id="S2.F2.16.1.m1.1.1.cmml" xref="S2.F2.16.1.m1.1.1"><csymbol cd="ambiguous" id="S2.F2.16.1.m1.1.1.1.cmml" xref="S2.F2.16.1.m1.1.1">superscript</csymbol><ci id="S2.F2.16.1.m1.1.1.2.cmml" xref="S2.F2.16.1.m1.1.1.2">𝐭</ci><ci id="S2.F2.16.1.m1.1.1.3.cmml" xref="S2.F2.16.1.m1.1.1.3">𝐭𝐡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.16.1.m1.1d">\mathbf{t^{th}}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.16.1.m1.1e">bold_t start_POSTSUPERSCRIPT bold_th end_POSTSUPERSCRIPT</annotation></semantics></math> iteration.</span> Starting with the previous iteration model <math alttext="M_{t-1}" class="ltx_Math" display="inline" id="S2.F2.17.m1.1"><semantics id="S2.F2.17.m1.1b"><msub id="S2.F2.17.m1.1.1" xref="S2.F2.17.m1.1.1.cmml"><mi id="S2.F2.17.m1.1.1.2" xref="S2.F2.17.m1.1.1.2.cmml">M</mi><mrow id="S2.F2.17.m1.1.1.3" xref="S2.F2.17.m1.1.1.3.cmml"><mi id="S2.F2.17.m1.1.1.3.2" xref="S2.F2.17.m1.1.1.3.2.cmml">t</mi><mo id="S2.F2.17.m1.1.1.3.1" xref="S2.F2.17.m1.1.1.3.1.cmml">−</mo><mn id="S2.F2.17.m1.1.1.3.3" xref="S2.F2.17.m1.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.F2.17.m1.1c"><apply id="S2.F2.17.m1.1.1.cmml" xref="S2.F2.17.m1.1.1"><csymbol cd="ambiguous" id="S2.F2.17.m1.1.1.1.cmml" xref="S2.F2.17.m1.1.1">subscript</csymbol><ci id="S2.F2.17.m1.1.1.2.cmml" xref="S2.F2.17.m1.1.1.2">𝑀</ci><apply id="S2.F2.17.m1.1.1.3.cmml" xref="S2.F2.17.m1.1.1.3"><minus id="S2.F2.17.m1.1.1.3.1.cmml" xref="S2.F2.17.m1.1.1.3.1"></minus><ci id="S2.F2.17.m1.1.1.3.2.cmml" xref="S2.F2.17.m1.1.1.3.2">𝑡</ci><cn id="S2.F2.17.m1.1.1.3.3.cmml" type="integer" xref="S2.F2.17.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.17.m1.1d">M_{t-1}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.17.m1.1e">italic_M start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math>, SynPO first learns a response improver <math alttext="R_{t}" class="ltx_Math" display="inline" id="S2.F2.18.m2.1"><semantics id="S2.F2.18.m2.1b"><msub id="S2.F2.18.m2.1.1" xref="S2.F2.18.m2.1.1.cmml"><mi id="S2.F2.18.m2.1.1.2" xref="S2.F2.18.m2.1.1.2.cmml">R</mi><mi id="S2.F2.18.m2.1.1.3" xref="S2.F2.18.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.F2.18.m2.1c"><apply id="S2.F2.18.m2.1.1.cmml" xref="S2.F2.18.m2.1.1"><csymbol cd="ambiguous" id="S2.F2.18.m2.1.1.1.cmml" xref="S2.F2.18.m2.1.1">subscript</csymbol><ci id="S2.F2.18.m2.1.1.2.cmml" xref="S2.F2.18.m2.1.1.2">𝑅</ci><ci id="S2.F2.18.m2.1.1.3.cmml" xref="S2.F2.18.m2.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.18.m2.1d">R_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.18.m2.1e">italic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> to identify discrepancies between model responses (<math alttext="y^{*}_{t-1}" class="ltx_Math" display="inline" id="S2.F2.19.m3.1"><semantics id="S2.F2.19.m3.1b"><msubsup id="S2.F2.19.m3.1.1" xref="S2.F2.19.m3.1.1.cmml"><mi id="S2.F2.19.m3.1.1.2.2" xref="S2.F2.19.m3.1.1.2.2.cmml">y</mi><mrow id="S2.F2.19.m3.1.1.3" xref="S2.F2.19.m3.1.1.3.cmml"><mi id="S2.F2.19.m3.1.1.3.2" xref="S2.F2.19.m3.1.1.3.2.cmml">t</mi><mo id="S2.F2.19.m3.1.1.3.1" xref="S2.F2.19.m3.1.1.3.1.cmml">−</mo><mn id="S2.F2.19.m3.1.1.3.3" xref="S2.F2.19.m3.1.1.3.3.cmml">1</mn></mrow><mo id="S2.F2.19.m3.1.1.2.3" xref="S2.F2.19.m3.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="S2.F2.19.m3.1c"><apply id="S2.F2.19.m3.1.1.cmml" xref="S2.F2.19.m3.1.1"><csymbol cd="ambiguous" id="S2.F2.19.m3.1.1.1.cmml" xref="S2.F2.19.m3.1.1">subscript</csymbol><apply id="S2.F2.19.m3.1.1.2.cmml" xref="S2.F2.19.m3.1.1"><csymbol cd="ambiguous" id="S2.F2.19.m3.1.1.2.1.cmml" xref="S2.F2.19.m3.1.1">superscript</csymbol><ci id="S2.F2.19.m3.1.1.2.2.cmml" xref="S2.F2.19.m3.1.1.2.2">𝑦</ci><times id="S2.F2.19.m3.1.1.2.3.cmml" xref="S2.F2.19.m3.1.1.2.3"></times></apply><apply id="S2.F2.19.m3.1.1.3.cmml" xref="S2.F2.19.m3.1.1.3"><minus id="S2.F2.19.m3.1.1.3.1.cmml" xref="S2.F2.19.m3.1.1.3.1"></minus><ci id="S2.F2.19.m3.1.1.3.2.cmml" xref="S2.F2.19.m3.1.1.3.2">𝑡</ci><cn id="S2.F2.19.m3.1.1.3.3.cmml" type="integer" xref="S2.F2.19.m3.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.19.m3.1d">y^{*}_{t-1}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.19.m3.1e">italic_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math>) and gold standard responses (<math alttext="y^{*}" class="ltx_Math" display="inline" id="S2.F2.20.m4.1"><semantics id="S2.F2.20.m4.1b"><msup id="S2.F2.20.m4.1.1" xref="S2.F2.20.m4.1.1.cmml"><mi id="S2.F2.20.m4.1.1.2" xref="S2.F2.20.m4.1.1.2.cmml">y</mi><mo id="S2.F2.20.m4.1.1.3" xref="S2.F2.20.m4.1.1.3.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="S2.F2.20.m4.1c"><apply id="S2.F2.20.m4.1.1.cmml" xref="S2.F2.20.m4.1.1"><csymbol cd="ambiguous" id="S2.F2.20.m4.1.1.1.cmml" xref="S2.F2.20.m4.1.1">superscript</csymbol><ci id="S2.F2.20.m4.1.1.2.cmml" xref="S2.F2.20.m4.1.1.2">𝑦</ci><times id="S2.F2.20.m4.1.1.3.cmml" xref="S2.F2.20.m4.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.20.m4.1d">y^{*}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.20.m4.1e">italic_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT</annotation></semantics></math>) on seed data, and learns to refine model responses. Subsequently, on the self-generated prompts <math alttext="x" class="ltx_Math" display="inline" id="S2.F2.21.m5.1"><semantics id="S2.F2.21.m5.1b"><mi id="S2.F2.21.m5.1.1" xref="S2.F2.21.m5.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.F2.21.m5.1c"><ci id="S2.F2.21.m5.1.1.cmml" xref="S2.F2.21.m5.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.21.m5.1d">x</annotation><annotation encoding="application/x-llamapun" id="S2.F2.21.m5.1e">italic_x</annotation></semantics></math> (elaborated in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS1" title="2.1 Synthetic Prompt Creation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">2.1</span></a>), SynPO employs <math alttext="R_{t}" class="ltx_Math" display="inline" id="S2.F2.22.m6.1"><semantics id="S2.F2.22.m6.1b"><msub id="S2.F2.22.m6.1.1" xref="S2.F2.22.m6.1.1.cmml"><mi id="S2.F2.22.m6.1.1.2" xref="S2.F2.22.m6.1.1.2.cmml">R</mi><mi id="S2.F2.22.m6.1.1.3" xref="S2.F2.22.m6.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.F2.22.m6.1c"><apply id="S2.F2.22.m6.1.1.cmml" xref="S2.F2.22.m6.1.1"><csymbol cd="ambiguous" id="S2.F2.22.m6.1.1.1.cmml" xref="S2.F2.22.m6.1.1">subscript</csymbol><ci id="S2.F2.22.m6.1.1.2.cmml" xref="S2.F2.22.m6.1.1.2">𝑅</ci><ci id="S2.F2.22.m6.1.1.3.cmml" xref="S2.F2.22.m6.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.22.m6.1d">R_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.22.m6.1e">italic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> to refine the <math alttext="M_{t-1}" class="ltx_Math" display="inline" id="S2.F2.23.m7.1"><semantics id="S2.F2.23.m7.1b"><msub id="S2.F2.23.m7.1.1" xref="S2.F2.23.m7.1.1.cmml"><mi id="S2.F2.23.m7.1.1.2" xref="S2.F2.23.m7.1.1.2.cmml">M</mi><mrow id="S2.F2.23.m7.1.1.3" xref="S2.F2.23.m7.1.1.3.cmml"><mi id="S2.F2.23.m7.1.1.3.2" xref="S2.F2.23.m7.1.1.3.2.cmml">t</mi><mo id="S2.F2.23.m7.1.1.3.1" xref="S2.F2.23.m7.1.1.3.1.cmml">−</mo><mn id="S2.F2.23.m7.1.1.3.3" xref="S2.F2.23.m7.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.F2.23.m7.1c"><apply id="S2.F2.23.m7.1.1.cmml" xref="S2.F2.23.m7.1.1"><csymbol cd="ambiguous" id="S2.F2.23.m7.1.1.1.cmml" xref="S2.F2.23.m7.1.1">subscript</csymbol><ci id="S2.F2.23.m7.1.1.2.cmml" xref="S2.F2.23.m7.1.1.2">𝑀</ci><apply id="S2.F2.23.m7.1.1.3.cmml" xref="S2.F2.23.m7.1.1.3"><minus id="S2.F2.23.m7.1.1.3.1.cmml" xref="S2.F2.23.m7.1.1.3.1"></minus><ci id="S2.F2.23.m7.1.1.3.2.cmml" xref="S2.F2.23.m7.1.1.3.2">𝑡</ci><cn id="S2.F2.23.m7.1.1.3.3.cmml" type="integer" xref="S2.F2.23.m7.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.23.m7.1d">M_{t-1}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.23.m7.1e">italic_M start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math> responses (<math alttext="y_{t-1}" class="ltx_Math" display="inline" id="S2.F2.24.m8.1"><semantics id="S2.F2.24.m8.1b"><msub id="S2.F2.24.m8.1.1" xref="S2.F2.24.m8.1.1.cmml"><mi id="S2.F2.24.m8.1.1.2" xref="S2.F2.24.m8.1.1.2.cmml">y</mi><mrow id="S2.F2.24.m8.1.1.3" xref="S2.F2.24.m8.1.1.3.cmml"><mi id="S2.F2.24.m8.1.1.3.2" xref="S2.F2.24.m8.1.1.3.2.cmml">t</mi><mo id="S2.F2.24.m8.1.1.3.1" xref="S2.F2.24.m8.1.1.3.1.cmml">−</mo><mn id="S2.F2.24.m8.1.1.3.3" xref="S2.F2.24.m8.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.F2.24.m8.1c"><apply id="S2.F2.24.m8.1.1.cmml" xref="S2.F2.24.m8.1.1"><csymbol cd="ambiguous" id="S2.F2.24.m8.1.1.1.cmml" xref="S2.F2.24.m8.1.1">subscript</csymbol><ci id="S2.F2.24.m8.1.1.2.cmml" xref="S2.F2.24.m8.1.1.2">𝑦</ci><apply id="S2.F2.24.m8.1.1.3.cmml" xref="S2.F2.24.m8.1.1.3"><minus id="S2.F2.24.m8.1.1.3.1.cmml" xref="S2.F2.24.m8.1.1.3.1"></minus><ci id="S2.F2.24.m8.1.1.3.2.cmml" xref="S2.F2.24.m8.1.1.3.2">𝑡</ci><cn id="S2.F2.24.m8.1.1.3.3.cmml" type="integer" xref="S2.F2.24.m8.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.24.m8.1d">y_{t-1}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.24.m8.1e">italic_y start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT</annotation></semantics></math>) into improved responses (<math alttext="y_{t-1}^{w}" class="ltx_Math" display="inline" id="S2.F2.25.m9.1"><semantics id="S2.F2.25.m9.1b"><msubsup id="S2.F2.25.m9.1.1" xref="S2.F2.25.m9.1.1.cmml"><mi id="S2.F2.25.m9.1.1.2.2" xref="S2.F2.25.m9.1.1.2.2.cmml">y</mi><mrow id="S2.F2.25.m9.1.1.2.3" xref="S2.F2.25.m9.1.1.2.3.cmml"><mi id="S2.F2.25.m9.1.1.2.3.2" xref="S2.F2.25.m9.1.1.2.3.2.cmml">t</mi><mo id="S2.F2.25.m9.1.1.2.3.1" xref="S2.F2.25.m9.1.1.2.3.1.cmml">−</mo><mn id="S2.F2.25.m9.1.1.2.3.3" xref="S2.F2.25.m9.1.1.2.3.3.cmml">1</mn></mrow><mi id="S2.F2.25.m9.1.1.3" xref="S2.F2.25.m9.1.1.3.cmml">w</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.F2.25.m9.1c"><apply id="S2.F2.25.m9.1.1.cmml" xref="S2.F2.25.m9.1.1"><csymbol cd="ambiguous" id="S2.F2.25.m9.1.1.1.cmml" xref="S2.F2.25.m9.1.1">superscript</csymbol><apply id="S2.F2.25.m9.1.1.2.cmml" xref="S2.F2.25.m9.1.1"><csymbol cd="ambiguous" id="S2.F2.25.m9.1.1.2.1.cmml" xref="S2.F2.25.m9.1.1">subscript</csymbol><ci id="S2.F2.25.m9.1.1.2.2.cmml" xref="S2.F2.25.m9.1.1.2.2">𝑦</ci><apply id="S2.F2.25.m9.1.1.2.3.cmml" xref="S2.F2.25.m9.1.1.2.3"><minus id="S2.F2.25.m9.1.1.2.3.1.cmml" xref="S2.F2.25.m9.1.1.2.3.1"></minus><ci id="S2.F2.25.m9.1.1.2.3.2.cmml" xref="S2.F2.25.m9.1.1.2.3.2">𝑡</ci><cn id="S2.F2.25.m9.1.1.2.3.3.cmml" type="integer" xref="S2.F2.25.m9.1.1.2.3.3">1</cn></apply></apply><ci id="S2.F2.25.m9.1.1.3.cmml" xref="S2.F2.25.m9.1.1.3">𝑤</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.25.m9.1d">y_{t-1}^{w}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.25.m9.1e">italic_y start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_w end_POSTSUPERSCRIPT</annotation></semantics></math>). The valid synthetic prompts <math alttext="x" class="ltx_Math" display="inline" id="S2.F2.26.m10.1"><semantics id="S2.F2.26.m10.1b"><mi id="S2.F2.26.m10.1.1" xref="S2.F2.26.m10.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.F2.26.m10.1c"><ci id="S2.F2.26.m10.1.1.cmml" xref="S2.F2.26.m10.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.26.m10.1d">x</annotation><annotation encoding="application/x-llamapun" id="S2.F2.26.m10.1e">italic_x</annotation></semantics></math>, refined responses (<math alttext="y_{t-1}^{w}" class="ltx_Math" display="inline" id="S2.F2.27.m11.1"><semantics id="S2.F2.27.m11.1b"><msubsup id="S2.F2.27.m11.1.1" xref="S2.F2.27.m11.1.1.cmml"><mi id="S2.F2.27.m11.1.1.2.2" xref="S2.F2.27.m11.1.1.2.2.cmml">y</mi><mrow id="S2.F2.27.m11.1.1.2.3" xref="S2.F2.27.m11.1.1.2.3.cmml"><mi id="S2.F2.27.m11.1.1.2.3.2" xref="S2.F2.27.m11.1.1.2.3.2.cmml">t</mi><mo id="S2.F2.27.m11.1.1.2.3.1" xref="S2.F2.27.m11.1.1.2.3.1.cmml">−</mo><mn id="S2.F2.27.m11.1.1.2.3.3" xref="S2.F2.27.m11.1.1.2.3.3.cmml">1</mn></mrow><mi id="S2.F2.27.m11.1.1.3" xref="S2.F2.27.m11.1.1.3.cmml">w</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.F2.27.m11.1c"><apply id="S2.F2.27.m11.1.1.cmml" xref="S2.F2.27.m11.1.1"><csymbol cd="ambiguous" id="S2.F2.27.m11.1.1.1.cmml" xref="S2.F2.27.m11.1.1">superscript</csymbol><apply id="S2.F2.27.m11.1.1.2.cmml" xref="S2.F2.27.m11.1.1"><csymbol cd="ambiguous" id="S2.F2.27.m11.1.1.2.1.cmml" xref="S2.F2.27.m11.1.1">subscript</csymbol><ci id="S2.F2.27.m11.1.1.2.2.cmml" xref="S2.F2.27.m11.1.1.2.2">𝑦</ci><apply id="S2.F2.27.m11.1.1.2.3.cmml" xref="S2.F2.27.m11.1.1.2.3"><minus id="S2.F2.27.m11.1.1.2.3.1.cmml" xref="S2.F2.27.m11.1.1.2.3.1"></minus><ci id="S2.F2.27.m11.1.1.2.3.2.cmml" xref="S2.F2.27.m11.1.1.2.3.2">𝑡</ci><cn id="S2.F2.27.m11.1.1.2.3.3.cmml" type="integer" xref="S2.F2.27.m11.1.1.2.3.3">1</cn></apply></apply><ci id="S2.F2.27.m11.1.1.3.cmml" xref="S2.F2.27.m11.1.1.3">𝑤</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.27.m11.1d">y_{t-1}^{w}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.27.m11.1e">italic_y start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_w end_POSTSUPERSCRIPT</annotation></semantics></math>), and initial model <math alttext="M_{0}" class="ltx_Math" display="inline" id="S2.F2.28.m12.1"><semantics id="S2.F2.28.m12.1b"><msub id="S2.F2.28.m12.1.1" xref="S2.F2.28.m12.1.1.cmml"><mi id="S2.F2.28.m12.1.1.2" xref="S2.F2.28.m12.1.1.2.cmml">M</mi><mn id="S2.F2.28.m12.1.1.3" xref="S2.F2.28.m12.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.F2.28.m12.1c"><apply id="S2.F2.28.m12.1.1.cmml" xref="S2.F2.28.m12.1.1"><csymbol cd="ambiguous" id="S2.F2.28.m12.1.1.1.cmml" xref="S2.F2.28.m12.1.1">subscript</csymbol><ci id="S2.F2.28.m12.1.1.2.cmml" xref="S2.F2.28.m12.1.1.2">𝑀</ci><cn id="S2.F2.28.m12.1.1.3.cmml" type="integer" xref="S2.F2.28.m12.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.28.m12.1d">M_{0}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.28.m12.1e">italic_M start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> responses (<math alttext="y_{0}" class="ltx_Math" display="inline" id="S2.F2.29.m13.1"><semantics id="S2.F2.29.m13.1b"><msub id="S2.F2.29.m13.1.1" xref="S2.F2.29.m13.1.1.cmml"><mi id="S2.F2.29.m13.1.1.2" xref="S2.F2.29.m13.1.1.2.cmml">y</mi><mn id="S2.F2.29.m13.1.1.3" xref="S2.F2.29.m13.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.F2.29.m13.1c"><apply id="S2.F2.29.m13.1.1.cmml" xref="S2.F2.29.m13.1.1"><csymbol cd="ambiguous" id="S2.F2.29.m13.1.1.1.cmml" xref="S2.F2.29.m13.1.1">subscript</csymbol><ci id="S2.F2.29.m13.1.1.2.cmml" xref="S2.F2.29.m13.1.1.2">𝑦</ci><cn id="S2.F2.29.m13.1.1.3.cmml" type="integer" xref="S2.F2.29.m13.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.29.m13.1d">y_{0}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.29.m13.1e">italic_y start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>) to form synthetic preference data. These data are incorporated into the synthetic preference dataset for preference optimization, resulting in an updated <math alttext="M_{t}" class="ltx_Math" display="inline" id="S2.F2.30.m14.1"><semantics id="S2.F2.30.m14.1b"><msub id="S2.F2.30.m14.1.1" xref="S2.F2.30.m14.1.1.cmml"><mi id="S2.F2.30.m14.1.1.2" xref="S2.F2.30.m14.1.1.2.cmml">M</mi><mi id="S2.F2.30.m14.1.1.3" xref="S2.F2.30.m14.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.F2.30.m14.1c"><apply id="S2.F2.30.m14.1.1.cmml" xref="S2.F2.30.m14.1.1"><csymbol cd="ambiguous" id="S2.F2.30.m14.1.1.1.cmml" xref="S2.F2.30.m14.1.1">subscript</csymbol><ci id="S2.F2.30.m14.1.1.2.cmml" xref="S2.F2.30.m14.1.1.2">𝑀</ci><ci id="S2.F2.30.m14.1.1.3.cmml" xref="S2.F2.30.m14.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.30.m14.1d">M_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.F2.30.m14.1e">italic_M start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> for the next iteration. The iterative process continually enhances LLM capabilities in instruction-following and task performance.
</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S2.p1">
<p class="ltx_p" id="S2.p1.2">SynPO is a self-boosting scheme designed to iteratively generate high-quality preference data. An overview of SynPO is presented in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.F2" title="Figure 2 ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">2</span></a>.
It begins with a small set of SFT data as seed data, denoted as <math alttext="\left\{(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{i})\right\}_{i=0}^{n}" class="ltx_Math" display="inline" id="S2.p1.1.m1.1"><semantics id="S2.p1.1.m1.1a"><msubsup id="S2.p1.1.m1.1.1" xref="S2.p1.1.m1.1.1.cmml"><mrow id="S2.p1.1.m1.1.1.1.1.1" xref="S2.p1.1.m1.1.1.1.1.2.cmml"><mo id="S2.p1.1.m1.1.1.1.1.1.2" xref="S2.p1.1.m1.1.1.1.1.2.cmml">{</mo><mrow id="S2.p1.1.m1.1.1.1.1.1.1.2" xref="S2.p1.1.m1.1.1.1.1.1.1.3.cmml"><mo id="S2.p1.1.m1.1.1.1.1.1.1.2.3" stretchy="false" xref="S2.p1.1.m1.1.1.1.1.1.1.3.cmml">(</mo><msubsup id="S2.p1.1.m1.1.1.1.1.1.1.1.1" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.2" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.2.cmml">𝐱</mi><mi id="S2.p1.1.m1.1.1.1.1.1.1.1.1.3" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi><mo id="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.3" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.3.cmml">∗</mo></msubsup><mo id="S2.p1.1.m1.1.1.1.1.1.1.2.4" xref="S2.p1.1.m1.1.1.1.1.1.1.3.cmml">,</mo><msubsup id="S2.p1.1.m1.1.1.1.1.1.1.2.2" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2.cmml"><mi id="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.2" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.2.cmml">𝐲</mi><mi id="S2.p1.1.m1.1.1.1.1.1.1.2.2.3" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2.3.cmml">i</mi><mo id="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.3" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.3.cmml">∗</mo></msubsup><mo id="S2.p1.1.m1.1.1.1.1.1.1.2.5" stretchy="false" xref="S2.p1.1.m1.1.1.1.1.1.1.3.cmml">)</mo></mrow><mo id="S2.p1.1.m1.1.1.1.1.1.3" xref="S2.p1.1.m1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S2.p1.1.m1.1.1.1.3" xref="S2.p1.1.m1.1.1.1.3.cmml"><mi id="S2.p1.1.m1.1.1.1.3.2" xref="S2.p1.1.m1.1.1.1.3.2.cmml">i</mi><mo id="S2.p1.1.m1.1.1.1.3.1" xref="S2.p1.1.m1.1.1.1.3.1.cmml">=</mo><mn id="S2.p1.1.m1.1.1.1.3.3" xref="S2.p1.1.m1.1.1.1.3.3.cmml">0</mn></mrow><mi id="S2.p1.1.m1.1.1.3" xref="S2.p1.1.m1.1.1.3.cmml">n</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.p1.1.m1.1b"><apply id="S2.p1.1.m1.1.1.cmml" xref="S2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.p1.1.m1.1.1.2.cmml" xref="S2.p1.1.m1.1.1">superscript</csymbol><apply id="S2.p1.1.m1.1.1.1.cmml" xref="S2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.p1.1.m1.1.1.1.2.cmml" xref="S2.p1.1.m1.1.1">subscript</csymbol><set id="S2.p1.1.m1.1.1.1.1.2.cmml" xref="S2.p1.1.m1.1.1.1.1.1"><interval closure="open" id="S2.p1.1.m1.1.1.1.1.1.1.3.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.2"><apply id="S2.p1.1.m1.1.1.1.1.1.1.1.1.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.p1.1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.2">𝐱</ci><times id="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1.2.3"></times></apply><ci id="S2.p1.1.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.p1.1.m1.1.1.1.1.1.1.2.2.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.p1.1.m1.1.1.1.1.1.1.2.2.1.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2">subscript</csymbol><apply id="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2">superscript</csymbol><ci id="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.2">𝐲</ci><times id="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.3.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2.2.3"></times></apply><ci id="S2.p1.1.m1.1.1.1.1.1.1.2.2.3.cmml" xref="S2.p1.1.m1.1.1.1.1.1.1.2.2.3">𝑖</ci></apply></interval></set><apply id="S2.p1.1.m1.1.1.1.3.cmml" xref="S2.p1.1.m1.1.1.1.3"><eq id="S2.p1.1.m1.1.1.1.3.1.cmml" xref="S2.p1.1.m1.1.1.1.3.1"></eq><ci id="S2.p1.1.m1.1.1.1.3.2.cmml" xref="S2.p1.1.m1.1.1.1.3.2">𝑖</ci><cn id="S2.p1.1.m1.1.1.1.3.3.cmml" type="integer" xref="S2.p1.1.m1.1.1.1.3.3">0</cn></apply></apply><ci id="S2.p1.1.m1.1.1.3.cmml" xref="S2.p1.1.m1.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.1.m1.1c">\left\{(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{i})\right\}_{i=0}^{n}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.1.m1.1d">{ ( bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_i = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT</annotation></semantics></math>, and the initial policy model <math alttext="\pi_{\theta_{0}}" class="ltx_Math" display="inline" id="S2.p1.2.m2.1"><semantics id="S2.p1.2.m2.1a"><msub id="S2.p1.2.m2.1.1" xref="S2.p1.2.m2.1.1.cmml"><mi id="S2.p1.2.m2.1.1.2" xref="S2.p1.2.m2.1.1.2.cmml">π</mi><msub id="S2.p1.2.m2.1.1.3" xref="S2.p1.2.m2.1.1.3.cmml"><mi id="S2.p1.2.m2.1.1.3.2" xref="S2.p1.2.m2.1.1.3.2.cmml">θ</mi><mn id="S2.p1.2.m2.1.1.3.3" xref="S2.p1.2.m2.1.1.3.3.cmml">0</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S2.p1.2.m2.1b"><apply id="S2.p1.2.m2.1.1.cmml" xref="S2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.p1.2.m2.1.1.1.cmml" xref="S2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.p1.2.m2.1.1.2.cmml" xref="S2.p1.2.m2.1.1.2">𝜋</ci><apply id="S2.p1.2.m2.1.1.3.cmml" xref="S2.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S2.p1.2.m2.1.1.3.1.cmml" xref="S2.p1.2.m2.1.1.3">subscript</csymbol><ci id="S2.p1.2.m2.1.1.3.2.cmml" xref="S2.p1.2.m2.1.1.3.2">𝜃</ci><cn id="S2.p1.2.m2.1.1.3.3.cmml" type="integer" xref="S2.p1.2.m2.1.1.3.3">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.2.m2.1c">\pi_{\theta_{0}}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.2.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>.
By incorporating both the self-prompt generator and the response improver, SynPO provides sufficient prompts for iterative training and leverages the generative rewards in the synthetic preference data.
This approach allows the policy model to make subtle improvements and gradually expand its boundaries.</p>
</div>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Synthetic Prompt Creation</h3>
<div class="ltx_para ltx_noindent" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.1">Diverse and ample prompts are crucial for effective preference learning <cite class="ltx_cite ltx_citemacro_citep">(Shi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib51" title="">2023</a>; Yuan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib64" title="">2024</a>; Song et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib54" title="">2024</a>)</cite>. Diversity facilitates generalization and a sufficient number of prompts allows data selection from a large candidate pool.
In SynPO, we propose a novel strategy for synthetic prompt generation.
We design a keywords-to-text task to guide the training of a self-prompt generator and create pseudo-label data from the seed SFT data.</p>
</div>
<figure class="ltx_figure" id="S2.F3"><svg class="ltx_picture ltx_centering" height="407.06" id="S2.F3.pic1" overflow="visible" version="1.1" width="603.54"><g fill="#000000" stroke="#000000" stroke-width="0.4pt" transform="translate(0,407.06) matrix(1 0 0 -1 0 0) translate(0,3.54)"><g color="#F2F2F2" fill="#F2F2F2" fill-opacity="0.5" stroke="#F2F2F2" stroke-opacity="0.5"><path d="M 3.54 4.13 L 3.54 392.3 C 3.54 396.54 6.98 399.98 11.22 399.98 L 595.87 399.98 C 600.11 399.98 603.54 396.54 603.54 392.3 L 603.54 4.13 C 603.54 -0.11 600.11 -3.54 595.87 -3.54 L 11.22 -3.54 C 6.98 -3.54 3.54 -0.11 3.54 4.13 Z" style="stroke:none"></path></g><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 397.62 C 0 400.88 2.64 403.52 5.91 403.52 L 594.09 403.52 C 597.36 403.52 600 400.88 600 397.62 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 387.44 L 598.03 387.44 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 17.72 389.41)"><foreignobject color="#FFFFFF" height="12.15" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="564.57">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="S2.F3.pic1.1.1.1.1.1" style="width:408.0pt;">
<span class="ltx_p" id="S2.F3.pic1.1.1.1.1.1.1">Question Generation Prompt</span>
</span></foreignobject></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 17.72 5.91)"><foreignobject color="#000000" height="377.6" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="564.57">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="S2.F3.pic1.2.2.2.1.1" style="width:408.0pt;">
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.1"><span class="ltx_text ltx_font_bold" id="S2.F3.pic1.2.2.2.1.1.1.1">## Background</span></span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.2">Design ONE question/instruction (and its solution) with given keywords.</span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.3"><span class="ltx_text ltx_font_bold" id="S2.F3.pic1.2.2.2.1.1.3.1">### Requirements</span></span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.4">The question/instruction should try to contain the keywords in ‘## Given Keywords’. The solution MUST BE CORRECT, including detailed reasoning steps and dense knowledge.</span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.5"><span class="ltx_text ltx_font_bold" id="S2.F3.pic1.2.2.2.1.1.5.1">## Given Keywords</span></span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.6">{keywords}</span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.7"><span class="ltx_text ltx_font_bold" id="S2.F3.pic1.2.2.2.1.1.7.1">## Output Format</span></span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.8">== GENERATED QUESTION &amp; CORRECT SOLUTION ==</span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.9">&lt;question&gt; question content …
&lt;/question&gt;</span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.10">&lt;/solution&gt; correct solution …
&lt;/solution&gt;</span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.11"><span class="ltx_text ltx_font_bold" id="S2.F3.pic1.2.2.2.1.1.11.1">## Output</span></span>
<span class="ltx_p" id="S2.F3.pic1.2.2.2.1.1.12">== GENERATED QUESTION &amp; CORRECT SOLUTION ==</span>
</span></foreignobject></g></g></svg>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Prompt used in SynPO for LLMs to act as self-prompt generators.
</figcaption>
</figure>
<section class="ltx_paragraph" id="S2.SS1.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Self-Prompt Generator Training</h4>
<div class="ltx_para ltx_noindent" id="S2.SS1.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS1.SSS0.Px1.p1.11">We train the LLM itself to serve as a high-quality prompt generator.
For each prompt <math alttext="\mathbf{x}^{*}_{i}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.1.m1.1"><semantics id="S2.SS1.SSS0.Px1.p1.1.m1.1a"><msubsup id="S2.SS1.SSS0.Px1.p1.1.m1.1.1" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1.cmml"><mi id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.2" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.2.cmml">𝐱</mi><mi id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.3" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1.3.cmml">i</mi><mo id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.3" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.1.m1.1b"><apply id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1">subscript</csymbol><apply id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.cmml" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.1.cmml" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1">superscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.2.cmml" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.2">𝐱</ci><times id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.3.cmml" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1.2.3"></times></apply><ci id="S2.SS1.SSS0.Px1.p1.1.m1.1.1.3.cmml" xref="S2.SS1.SSS0.Px1.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.1.m1.1c">\mathbf{x}^{*}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.1.m1.1d">bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> in seed data, we randomly extract two keywords from <math alttext="\mathbf{x}^{*}_{i}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.2.m2.1"><semantics id="S2.SS1.SSS0.Px1.p1.2.m2.1a"><msubsup id="S2.SS1.SSS0.Px1.p1.2.m2.1.1" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1.cmml"><mi id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.2" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.2.cmml">𝐱</mi><mi id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.3" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1.3.cmml">i</mi><mo id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.3" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.2.m2.1b"><apply id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1">subscript</csymbol><apply id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.cmml" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.1.cmml" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1">superscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.2.cmml" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.2">𝐱</ci><times id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.3.cmml" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1.2.3"></times></apply><ci id="S2.SS1.SSS0.Px1.p1.2.m2.1.1.3.cmml" xref="S2.SS1.SSS0.Px1.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.2.m2.1c">\mathbf{x}^{*}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.2.m2.1d">bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and one noise keyword from <math alttext="\mathbf{x}^{*}_{j}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.3.m3.1"><semantics id="S2.SS1.SSS0.Px1.p1.3.m3.1a"><msubsup id="S2.SS1.SSS0.Px1.p1.3.m3.1.1" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1.cmml"><mi id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.2" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.2.cmml">𝐱</mi><mi id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.3" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1.3.cmml">j</mi><mo id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.3" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.3.m3.1b"><apply id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1">subscript</csymbol><apply id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.cmml" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.1.cmml" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1">superscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.2.cmml" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.2">𝐱</ci><times id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.3.cmml" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1.2.3"></times></apply><ci id="S2.SS1.SSS0.Px1.p1.3.m3.1.1.3.cmml" xref="S2.SS1.SSS0.Px1.p1.3.m3.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.3.m3.1c">\mathbf{x}^{*}_{j}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.3.m3.1d">bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT</annotation></semantics></math>, where <math alttext="j\in\{1,2,\ldots,n\}\setminus\{i\}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.4.m4.5"><semantics id="S2.SS1.SSS0.Px1.p1.4.m4.5a"><mrow id="S2.SS1.SSS0.Px1.p1.4.m4.5.6" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.cmml"><mi id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.2" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.2.cmml">j</mi><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.1" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.1.cmml">∈</mo><mrow id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.cmml"><mrow id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.2" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.1.cmml"><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.2.1" stretchy="false" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.1.cmml">{</mo><mn id="S2.SS1.SSS0.Px1.p1.4.m4.1.1" xref="S2.SS1.SSS0.Px1.p1.4.m4.1.1.cmml">1</mn><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.2.2" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.1.cmml">,</mo><mn id="S2.SS1.SSS0.Px1.p1.4.m4.2.2" xref="S2.SS1.SSS0.Px1.p1.4.m4.2.2.cmml">2</mn><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.2.3" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.1.cmml">,</mo><mi id="S2.SS1.SSS0.Px1.p1.4.m4.3.3" mathvariant="normal" xref="S2.SS1.SSS0.Px1.p1.4.m4.3.3.cmml">…</mi><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.2.4" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.1.cmml">,</mo><mi id="S2.SS1.SSS0.Px1.p1.4.m4.4.4" xref="S2.SS1.SSS0.Px1.p1.4.m4.4.4.cmml">n</mi><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.2.5" stretchy="false" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.1.cmml">}</mo></mrow><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.1" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.1.cmml">∖</mo><mrow id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.3.2" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.3.1.cmml"><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.3.2.1" stretchy="false" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.3.1.cmml">{</mo><mi id="S2.SS1.SSS0.Px1.p1.4.m4.5.5" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.5.cmml">i</mi><mo id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.3.2.2" stretchy="false" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.3.1.cmml">}</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.4.m4.5b"><apply id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6"><in id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.1.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.1"></in><ci id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.2.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.2">𝑗</ci><apply id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3"><setdiff id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.1.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.1"></setdiff><set id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.1.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.2.2"><cn id="S2.SS1.SSS0.Px1.p1.4.m4.1.1.cmml" type="integer" xref="S2.SS1.SSS0.Px1.p1.4.m4.1.1">1</cn><cn id="S2.SS1.SSS0.Px1.p1.4.m4.2.2.cmml" type="integer" xref="S2.SS1.SSS0.Px1.p1.4.m4.2.2">2</cn><ci id="S2.SS1.SSS0.Px1.p1.4.m4.3.3.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.3.3">…</ci><ci id="S2.SS1.SSS0.Px1.p1.4.m4.4.4.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.4.4">𝑛</ci></set><set id="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.3.1.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.6.3.3.2"><ci id="S2.SS1.SSS0.Px1.p1.4.m4.5.5.cmml" xref="S2.SS1.SSS0.Px1.p1.4.m4.5.5">𝑖</ci></set></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.4.m4.5c">j\in\{1,2,\ldots,n\}\setminus\{i\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.4.m4.5d">italic_j ∈ { 1 , 2 , … , italic_n } ∖ { italic_i }</annotation></semantics></math>.
The inclusion of the noise keyword enhances the robustness of the prompt generator. It learns to filter out irrelevant keywords during training and ensure that the generated prompts are fluent.
This process yields a keyword list, <math alttext="k_{i}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.5.m5.1"><semantics id="S2.SS1.SSS0.Px1.p1.5.m5.1a"><msub id="S2.SS1.SSS0.Px1.p1.5.m5.1.1" xref="S2.SS1.SSS0.Px1.p1.5.m5.1.1.cmml"><mi id="S2.SS1.SSS0.Px1.p1.5.m5.1.1.2" xref="S2.SS1.SSS0.Px1.p1.5.m5.1.1.2.cmml">k</mi><mi id="S2.SS1.SSS0.Px1.p1.5.m5.1.1.3" xref="S2.SS1.SSS0.Px1.p1.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.5.m5.1b"><apply id="S2.SS1.SSS0.Px1.p1.5.m5.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.5.m5.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.5.m5.1.1">subscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.5.m5.1.1.2.cmml" xref="S2.SS1.SSS0.Px1.p1.5.m5.1.1.2">𝑘</ci><ci id="S2.SS1.SSS0.Px1.p1.5.m5.1.1.3.cmml" xref="S2.SS1.SSS0.Px1.p1.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.5.m5.1c">k_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.5.m5.1d">italic_k start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> for <math alttext="\mathbf{x}^{*}_{i}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.6.m6.1"><semantics id="S2.SS1.SSS0.Px1.p1.6.m6.1a"><msubsup id="S2.SS1.SSS0.Px1.p1.6.m6.1.1" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1.cmml"><mi id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.2" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.2.cmml">𝐱</mi><mi id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.3" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1.3.cmml">i</mi><mo id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.3" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.6.m6.1b"><apply id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1">subscript</csymbol><apply id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.cmml" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.1.cmml" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1">superscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.2.cmml" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.2">𝐱</ci><times id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.3.cmml" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1.2.3"></times></apply><ci id="S2.SS1.SSS0.Px1.p1.6.m6.1.1.3.cmml" xref="S2.SS1.SSS0.Px1.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.6.m6.1c">\mathbf{x}^{*}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.6.m6.1d">bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>.
Next, we insert <math alttext="k_{i}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.7.m7.1"><semantics id="S2.SS1.SSS0.Px1.p1.7.m7.1a"><msub id="S2.SS1.SSS0.Px1.p1.7.m7.1.1" xref="S2.SS1.SSS0.Px1.p1.7.m7.1.1.cmml"><mi id="S2.SS1.SSS0.Px1.p1.7.m7.1.1.2" xref="S2.SS1.SSS0.Px1.p1.7.m7.1.1.2.cmml">k</mi><mi id="S2.SS1.SSS0.Px1.p1.7.m7.1.1.3" xref="S2.SS1.SSS0.Px1.p1.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.7.m7.1b"><apply id="S2.SS1.SSS0.Px1.p1.7.m7.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.7.m7.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.7.m7.1.1">subscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.7.m7.1.1.2.cmml" xref="S2.SS1.SSS0.Px1.p1.7.m7.1.1.2">𝑘</ci><ci id="S2.SS1.SSS0.Px1.p1.7.m7.1.1.3.cmml" xref="S2.SS1.SSS0.Px1.p1.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.7.m7.1c">k_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.7.m7.1d">italic_k start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> into a prompt template (see Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.F3" title="Figure 3 ‣ 2.1 Synthetic Prompt Creation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">3</span></a>) to create a prompt and use <math alttext="(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{i})" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.8.m8.2"><semantics id="S2.SS1.SSS0.Px1.p1.8.m8.2a"><mrow id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.3.cmml"><mo id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.3" stretchy="false" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.3.cmml">(</mo><msubsup id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.cmml"><mi id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.2" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.2.cmml">𝐱</mi><mi id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.3" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.3.cmml">i</mi><mo id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.3" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.3.cmml">∗</mo></msubsup><mo id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.4" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.3.cmml">,</mo><msubsup id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.cmml"><mi id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.2" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.2.cmml">𝐲</mi><mi id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.3" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.3.cmml">i</mi><mo id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.3" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.3.cmml">∗</mo></msubsup><mo id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.5" stretchy="false" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.8.m8.2b"><interval closure="open" id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.3.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2"><apply id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1">subscript</csymbol><apply id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.1.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1">superscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.2.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.2">𝐱</ci><times id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.3.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.2.3"></times></apply><ci id="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.3.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.1.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2">subscript</csymbol><apply id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.1.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2">superscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.2.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.2">𝐲</ci><times id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.3.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.2.3"></times></apply><ci id="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.3.cmml" xref="S2.SS1.SSS0.Px1.p1.8.m8.2.2.2.2.3">𝑖</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.8.m8.2c">(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{i})</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.8.m8.2d">( bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> as the corresponding completion. This process constructs training data for the prompt generator.
We then optimize <math alttext="\theta_{0}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.9.m9.1"><semantics id="S2.SS1.SSS0.Px1.p1.9.m9.1a"><msub id="S2.SS1.SSS0.Px1.p1.9.m9.1.1" xref="S2.SS1.SSS0.Px1.p1.9.m9.1.1.cmml"><mi id="S2.SS1.SSS0.Px1.p1.9.m9.1.1.2" xref="S2.SS1.SSS0.Px1.p1.9.m9.1.1.2.cmml">θ</mi><mn id="S2.SS1.SSS0.Px1.p1.9.m9.1.1.3" xref="S2.SS1.SSS0.Px1.p1.9.m9.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.9.m9.1b"><apply id="S2.SS1.SSS0.Px1.p1.9.m9.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px1.p1.9.m9.1.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.9.m9.1.1">subscript</csymbol><ci id="S2.SS1.SSS0.Px1.p1.9.m9.1.1.2.cmml" xref="S2.SS1.SSS0.Px1.p1.9.m9.1.1.2">𝜃</ci><cn id="S2.SS1.SSS0.Px1.p1.9.m9.1.1.3.cmml" type="integer" xref="S2.SS1.SSS0.Px1.p1.9.m9.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.9.m9.1c">\theta_{0}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.9.m9.1d">italic_θ start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> through SFT to transform the model into a prompt generator <math alttext="\mathcal{G}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.10.m10.1"><semantics id="S2.SS1.SSS0.Px1.p1.10.m10.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.SSS0.Px1.p1.10.m10.1.1" xref="S2.SS1.SSS0.Px1.p1.10.m10.1.1.cmml">𝒢</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.10.m10.1b"><ci id="S2.SS1.SSS0.Px1.p1.10.m10.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.10.m10.1.1">𝒢</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.10.m10.1c">\mathcal{G}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.10.m10.1d">caligraphic_G</annotation></semantics></math>.
<math alttext="\mathcal{G}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px1.p1.11.m11.1"><semantics id="S2.SS1.SSS0.Px1.p1.11.m11.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.SSS0.Px1.p1.11.m11.1.1" xref="S2.SS1.SSS0.Px1.p1.11.m11.1.1.cmml">𝒢</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px1.p1.11.m11.1b"><ci id="S2.SS1.SSS0.Px1.p1.11.m11.1.1.cmml" xref="S2.SS1.SSS0.Px1.p1.11.m11.1.1">𝒢</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px1.p1.11.m11.1c">\mathcal{G}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px1.p1.11.m11.1d">caligraphic_G</annotation></semantics></math> possesses the capability to generate unlimited, diverse, and high-quality user instructions, controlled by the given keywords.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS1.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Keywords Sampling and Prompt Generating</h4>
<div class="ltx_para ltx_noindent" id="S2.SS1.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS1.SSS0.Px2.p1.3">To enhance the overall diversity of prompts, we sample keywords from pretrain corpus paragraphs.
We select three keywords from a same paragraph to maintain the inherent distribution between keywords, and sample from different paragraphs to ensure overall diversity.
Specifically, we randomly sample keyword lists from the RefinedWeb paragraphs <cite class="ltx_cite ltx_citemacro_citep">(Penedo et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib46" title="">2023</a>)</cite> and generate <math alttext="m" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px2.p1.1.m1.1"><semantics id="S2.SS1.SSS0.Px2.p1.1.m1.1a"><mi id="S2.SS1.SSS0.Px2.p1.1.m1.1.1" xref="S2.SS1.SSS0.Px2.p1.1.m1.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px2.p1.1.m1.1b"><ci id="S2.SS1.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S2.SS1.SSS0.Px2.p1.1.m1.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px2.p1.1.m1.1c">m</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px2.p1.1.m1.1d">italic_m</annotation></semantics></math> synthetic prompts, denoted <math alttext="\{\mathbf{x}_{i}\}_{i=1}^{m}" class="ltx_Math" display="inline" id="S2.SS1.SSS0.Px2.p1.2.m2.1"><semantics id="S2.SS1.SSS0.Px2.p1.2.m2.1a"><msubsup id="S2.SS1.SSS0.Px2.p1.2.m2.1.1" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.cmml"><mrow id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.2.cmml"><mo id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.2" stretchy="false" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.2.cmml">{</mo><msub id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.cmml"><mi id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.2" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.2.cmml">𝐱</mi><mi id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.3" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.3" stretchy="false" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.cmml"><mi id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.2" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.2.cmml">i</mi><mo id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.1" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.1.cmml">=</mo><mn id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.3" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.3.cmml">1</mn></mrow><mi id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.3" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.3.cmml">m</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS1.SSS0.Px2.p1.2.m2.1b"><apply id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.2.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1">superscript</csymbol><apply id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.2.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1">subscript</csymbol><set id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.2.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1"><apply id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.1.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.2.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.2">𝐱</ci><ci id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.3.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3"><eq id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.1.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.1"></eq><ci id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.2.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.2">𝑖</ci><cn id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.3.cmml" type="integer" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.1.3.3">1</cn></apply></apply><ci id="S2.SS1.SSS0.Px2.p1.2.m2.1.1.3.cmml" xref="S2.SS1.SSS0.Px2.p1.2.m2.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px2.p1.2.m2.1c">\{\mathbf{x}_{i}\}_{i=1}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px2.p1.2.m2.1d">{ bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>, <math alttext="\mathbf{x}_{i}\sim\mathcal{G}(\cdot|\mathbf{k}_{i})" class="ltx_math_unparsed" display="inline" id="S2.SS1.SSS0.Px2.p1.3.m3.1"><semantics id="S2.SS1.SSS0.Px2.p1.3.m3.1a"><mrow id="S2.SS1.SSS0.Px2.p1.3.m3.1b"><msub id="S2.SS1.SSS0.Px2.p1.3.m3.1.1"><mi id="S2.SS1.SSS0.Px2.p1.3.m3.1.1.2">𝐱</mi><mi id="S2.SS1.SSS0.Px2.p1.3.m3.1.1.3">i</mi></msub><mo id="S2.SS1.SSS0.Px2.p1.3.m3.1.2">∼</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.SSS0.Px2.p1.3.m3.1.3">𝒢</mi><mrow id="S2.SS1.SSS0.Px2.p1.3.m3.1.4"><mo id="S2.SS1.SSS0.Px2.p1.3.m3.1.4.1" stretchy="false">(</mo><mo id="S2.SS1.SSS0.Px2.p1.3.m3.1.4.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="S2.SS1.SSS0.Px2.p1.3.m3.1.4.3" rspace="0.167em" stretchy="false">|</mo><msub id="S2.SS1.SSS0.Px2.p1.3.m3.1.4.4"><mi id="S2.SS1.SSS0.Px2.p1.3.m3.1.4.4.2">𝐤</mi><mi id="S2.SS1.SSS0.Px2.p1.3.m3.1.4.4.3">i</mi></msub><mo id="S2.SS1.SSS0.Px2.p1.3.m3.1.4.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S2.SS1.SSS0.Px2.p1.3.m3.1c">\mathbf{x}_{i}\sim\mathcal{G}(\cdot|\mathbf{k}_{i})</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.SSS0.Px2.p1.3.m3.1d">bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∼ caligraphic_G ( ⋅ | bold_k start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS1.SSS0.Px2.p2">
<p class="ltx_p" id="S2.SS1.SSS0.Px2.p2.1">Benefiting from the self-prompt generator, our approach requires only a small SFT data to enable the model to generate diverse prompts independently, no in-context learning examples or predefined topic lists are required.
Due to the high combinatorial possibilities of keyword sampling, the self-prompt generator can produce an infinite variety of synthetic prompts for preference learning.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS1.SSS0.Px2.p3">
<p class="ltx_p" id="S2.SS1.SSS0.Px2.p3.1">For further analysis, we randomly sampled 1k self-generated prompts from the Llama3-8B-Base prompt generator and used GPT-4 Turbo to classify the intentions and topics behind these prompts<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>Experimental details in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A6" title="Appendix F Prompt Analysis ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">F</span></a>.</span></span></span>.
The results, shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.F5" title="Figure 5 ‣ Keywords Sampling and Prompt Generating ‣ 2.1 Synthetic Prompt Creation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">5</span></a>, demonstrate significant diversity across various topics and user intentions.
Even compared to prompts from GPT3.5-Turbo <cite class="ltx_cite ltx_citemacro_citep">(Ding et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib15" title="">2023</a>)</cite> or a collection of prompts from different sources <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>)</cite>, as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.F5" title="Figure 5 ‣ Keywords Sampling and Prompt Generating ‣ 2.1 Synthetic Prompt Creation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">5</span></a>, SynPO generated prompts exhibit lower inter-prompt similarity and greater diversity.</p>
</div>
<figure class="ltx_figure" id="S2.F5">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_bottom" id="S2.F5.1" style="width:186.8pt;"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="832" id="S2.F5.1.g1" src="x3.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>The top 25 most common topics (outer circle) and the top 12 most common intentions (inner circle) in SynPO generated prompts. We aggregate the other topics and intentions to the ‘Others’ group.
</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_bottom" id="S2.F5.2" style="width:190.8pt;"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="447" id="S2.F5.2.g1" src="x4.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>Inter-prompt similarity distributions for 1,000 randomly sampled prompts from SynPO, UltraFeedback <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>)</cite>, Self-Instruct <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib58" title="">2022</a>)</cite>, and UltraChat <cite class="ltx_cite ltx_citemacro_citep">(Ding et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib15" title="">2023</a>)</cite>. We used SentenceTransformer  <cite class="ltx_cite ltx_citemacro_citep">(Reimers &amp; Gurevych, <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib48" title="">2019</a>)</cite> to compute sentence embeddings and calculated the cosine similarity between each prompt and all others, then averaged these values for each prompt. The results suggest that our method, SynPO, generates more diverse prompts with lower inter-prompt similarity.</figcaption>
</figure>
</div>
</div>
</figure>
</section>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Synthetic Preference Generation</h3>
<div class="ltx_para ltx_noindent" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">A primary challenge in leveraging synthetic prompts is the lack of high-quality responses to provide sufficient supervision <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib31" title="">2024b</a>)</cite>.
To address this, we introduce a response improver to enhance the quality of model responses to synthetic prompts.
Pre- and post-improvement responses naturally become the rejected and chosen candidates, respectively, with the chosen ones providing clear guidance on what approximates a gold standard response.</p>
</div>
<section class="ltx_paragraph" id="S2.SS2.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Response Improver Training</h4>
<div class="ltx_para ltx_noindent" id="S2.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S2.SS2.SSS0.Px1.p1.9">In each iteration, we train the LLM as a response improver to further reduce the gap between policy model outputs and gold standard responses.
Formally, let <math alttext="\pi_{\bm{\theta}_{t-1}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.1.m1.1"><semantics id="S2.SS2.SSS0.Px1.p1.1.m1.1a"><msub id="S2.SS2.SSS0.Px1.p1.1.m1.1.1" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.2" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.2.cmml">π</mi><msub id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.cmml"><mi id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.2" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.2.cmml">𝜽</mi><mrow id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.cmml"><mi id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.2" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.2.cmml">t</mi><mo id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.1" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.1.cmml">−</mo><mn id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.3" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.3.cmml">1</mn></mrow></msub></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.1.m1.1b"><apply id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.2">𝜋</ci><apply id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.1.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.2.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.2">𝜽</ci><apply id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3"><minus id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.1.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.1"></minus><ci id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.2.cmml" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.2">𝑡</ci><cn id="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.3.cmml" type="integer" xref="S2.SS2.SSS0.Px1.p1.1.m1.1.1.3.3.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.1.m1.1c">\pi_{\bm{\theta}_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.1.m1.1d">italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> denote the policy model at the beginning of the <math alttext="t" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.2.m2.1"><semantics id="S2.SS2.SSS0.Px1.p1.2.m2.1a"><mi id="S2.SS2.SSS0.Px1.p1.2.m2.1.1" xref="S2.SS2.SSS0.Px1.p1.2.m2.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.2.m2.1b"><ci id="S2.SS2.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.2.m2.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.2.m2.1c">t</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.2.m2.1d">italic_t</annotation></semantics></math>-th iteration. We generate outputs from <math alttext="\pi_{\bm{\theta}_{t-1}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.3.m3.1"><semantics id="S2.SS2.SSS0.Px1.p1.3.m3.1a"><msub id="S2.SS2.SSS0.Px1.p1.3.m3.1.1" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.2" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.2.cmml">π</mi><msub id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.cmml"><mi id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.2" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.2.cmml">𝜽</mi><mrow id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.cmml"><mi id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.2" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.2.cmml">t</mi><mo id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.1" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.1.cmml">−</mo><mn id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.3" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.3.cmml">1</mn></mrow></msub></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.3.m3.1b"><apply id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.2">𝜋</ci><apply id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.1.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.2.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.2">𝜽</ci><apply id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3"><minus id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.1.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.1"></minus><ci id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.2.cmml" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.2">𝑡</ci><cn id="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.3.cmml" type="integer" xref="S2.SS2.SSS0.Px1.p1.3.m3.1.1.3.3.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.3.m3.1c">\pi_{\bm{\theta}_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.3.m3.1d">italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> for the seed data prompts: <math alttext="\mathbf{y}^{*}_{(t-1),i}\sim\pi_{\bm{\theta}_{t-1}}(\cdot|\mathbf{x}^{*}_{i})" class="ltx_math_unparsed" display="inline" id="S2.SS2.SSS0.Px1.p1.4.m4.2"><semantics id="S2.SS2.SSS0.Px1.p1.4.m4.2a"><mrow id="S2.SS2.SSS0.Px1.p1.4.m4.2b"><msubsup id="S2.SS2.SSS0.Px1.p1.4.m4.2.3"><mi id="S2.SS2.SSS0.Px1.p1.4.m4.2.3.2.2">𝐲</mi><mrow id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2"><mrow id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2.1.1"><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2.1.1.1"><mi id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2.1.1.1.2">t</mi><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2.1.1.1.1">−</mo><mn id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2.1.1.1.3">1</mn></mrow><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.2.2.2.2">,</mo><mi id="S2.SS2.SSS0.Px1.p1.4.m4.1.1.1.1">i</mi></mrow><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.3.2.3">∗</mo></msubsup><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.4">∼</mo><msub id="S2.SS2.SSS0.Px1.p1.4.m4.2.5"><mi id="S2.SS2.SSS0.Px1.p1.4.m4.2.5.2">π</mi><msub id="S2.SS2.SSS0.Px1.p1.4.m4.2.5.3"><mi id="S2.SS2.SSS0.Px1.p1.4.m4.2.5.3.2">𝜽</mi><mrow id="S2.SS2.SSS0.Px1.p1.4.m4.2.5.3.3"><mi id="S2.SS2.SSS0.Px1.p1.4.m4.2.5.3.3.2">t</mi><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.5.3.3.1">−</mo><mn id="S2.SS2.SSS0.Px1.p1.4.m4.2.5.3.3.3">1</mn></mrow></msub></msub><mrow id="S2.SS2.SSS0.Px1.p1.4.m4.2.6"><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.6.1" stretchy="false">(</mo><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.6.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="S2.SS2.SSS0.Px1.p1.4.m4.2.6.3" rspace="0.167em" stretchy="false">|</mo><msubsup id="S2.SS2.SSS0.Px1.p1.4.m4.2.6.4"><mi id="S2.SS2.SSS0.Px1.p1.4.m4.2.6.4.2.2">𝐱</mi><mi id="S2.SS2.SSS0.Px1.p1.4.m4.2.6.4.3">i</mi><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.6.4.2.3">∗</mo></msubsup><mo id="S2.SS2.SSS0.Px1.p1.4.m4.2.6.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.4.m4.2c">\mathbf{y}^{*}_{(t-1),i}\sim\pi_{\bm{\theta}_{t-1}}(\cdot|\mathbf{x}^{*}_{i})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.4.m4.2d">bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT ∼ italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, <math alttext="i\in\{1,\dots,m\}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.5.m5.3"><semantics id="S2.SS2.SSS0.Px1.p1.5.m5.3a"><mrow id="S2.SS2.SSS0.Px1.p1.5.m5.3.4" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.cmml"><mi id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.2" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.2.cmml">i</mi><mo id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.1" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.1.cmml">∈</mo><mrow id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.2" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.1.cmml"><mo id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.2.1" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.1.cmml">{</mo><mn id="S2.SS2.SSS0.Px1.p1.5.m5.1.1" xref="S2.SS2.SSS0.Px1.p1.5.m5.1.1.cmml">1</mn><mo id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.2.2" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.1.cmml">,</mo><mi id="S2.SS2.SSS0.Px1.p1.5.m5.2.2" mathvariant="normal" xref="S2.SS2.SSS0.Px1.p1.5.m5.2.2.cmml">…</mi><mo id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.2.3" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.1.cmml">,</mo><mi id="S2.SS2.SSS0.Px1.p1.5.m5.3.3" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.3.cmml">m</mi><mo id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.2.4" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.5.m5.3b"><apply id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4"><in id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.1.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.1"></in><ci id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.2.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.2">𝑖</ci><set id="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.1.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.4.3.2"><cn id="S2.SS2.SSS0.Px1.p1.5.m5.1.1.cmml" type="integer" xref="S2.SS2.SSS0.Px1.p1.5.m5.1.1">1</cn><ci id="S2.SS2.SSS0.Px1.p1.5.m5.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m5.2.2">…</ci><ci id="S2.SS2.SSS0.Px1.p1.5.m5.3.3.cmml" xref="S2.SS2.SSS0.Px1.p1.5.m5.3.3">𝑚</ci></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.5.m5.3c">i\in\{1,\dots,m\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.5.m5.3d">italic_i ∈ { 1 , … , italic_m }</annotation></semantics></math>. These outputs, along with the seed data responses, form the training set for the response improver, following the template provided in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A2" title="Appendix B Prompt for Response-refiner ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">B</span></a>. Each training example consists of the prompt and the policy model output <math alttext="(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{(t-1),i})" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.6.m6.4"><semantics id="S2.SS2.SSS0.Px1.p1.6.m6.4a"><mrow id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.3.cmml"><mo id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.3" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.3.cmml">(</mo><msubsup id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.2" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.2.cmml">𝐱</mi><mi id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.3" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.3.cmml">i</mi><mo id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.3" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.3.cmml">∗</mo></msubsup><mo id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.4" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.3.cmml">,</mo><msubsup id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.cmml"><mi id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.2" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.2.cmml">𝐲</mi><mrow id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.3.cmml"><mrow id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.cmml"><mo id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.2" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.cmml">(</mo><mrow id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.2" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.2.cmml">t</mi><mo id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.1" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.3" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.3" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.2" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.3.cmml">,</mo><mi id="S2.SS2.SSS0.Px1.p1.6.m6.1.1.1.1" xref="S2.SS2.SSS0.Px1.p1.6.m6.1.1.1.1.cmml">i</mi></mrow><mo id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.3" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.3.cmml">∗</mo></msubsup><mo id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.5" stretchy="false" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.6.m6.4b"><interval closure="open" id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.3.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2"><apply id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1">subscript</csymbol><apply id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.2">𝐱</ci><times id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.2.3"></times></apply><ci id="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.3.3.1.1.3">𝑖</ci></apply><apply id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2">subscript</csymbol><apply id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.2">𝐲</ci><times id="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.4.4.2.2.2.3"></times></apply><list id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2"><apply id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1"><minus id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.1"></minus><ci id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.2">𝑡</ci><cn id="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.3.cmml" type="integer" xref="S2.SS2.SSS0.Px1.p1.6.m6.2.2.2.2.1.1.1.3">1</cn></apply><ci id="S2.SS2.SSS0.Px1.p1.6.m6.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.6.m6.1.1.1.1">𝑖</ci></list></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.6.m6.4c">(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{(t-1),i})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.6.m6.4d">( bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> as the input, and the gold standard response <math alttext="\mathbf{y}^{*}_{i}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.7.m7.1"><semantics id="S2.SS2.SSS0.Px1.p1.7.m7.1a"><msubsup id="S2.SS2.SSS0.Px1.p1.7.m7.1.1" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.2" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.2.cmml">𝐲</mi><mi id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.3" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1.3.cmml">i</mi><mo id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.3" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.7.m7.1b"><apply id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1">subscript</csymbol><apply id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.1.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1">superscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.2.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.2">𝐲</ci><times id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.3.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1.2.3"></times></apply><ci id="S2.SS2.SSS0.Px1.p1.7.m7.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.7.m7.1c">\mathbf{y}^{*}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.7.m7.1d">bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> as the output.
We fine-tune <math alttext="\pi_{\bm{\theta}_{0}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.8.m8.1"><semantics id="S2.SS2.SSS0.Px1.p1.8.m8.1a"><msub id="S2.SS2.SSS0.Px1.p1.8.m8.1.1" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.cmml"><mi id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.2" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.2.cmml">π</mi><msub id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.cmml"><mi id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.2" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.2.cmml">𝜽</mi><mn id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.3" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.3.cmml">0</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.8.m8.1b"><apply id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.2">𝜋</ci><apply id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.1.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.2.cmml" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.2">𝜽</ci><cn id="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.3.cmml" type="integer" xref="S2.SS2.SSS0.Px1.p1.8.m8.1.1.3.3">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.8.m8.1c">\pi_{\bm{\theta}_{0}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.8.m8.1d">italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> on the training set to obtain the response improver <math alttext="\mathcal{R}_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px1.p1.9.m9.1"><semantics id="S2.SS2.SSS0.Px1.p1.9.m9.1a"><msub id="S2.SS2.SSS0.Px1.p1.9.m9.1.1" xref="S2.SS2.SSS0.Px1.p1.9.m9.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.SSS0.Px1.p1.9.m9.1.1.2" xref="S2.SS2.SSS0.Px1.p1.9.m9.1.1.2.cmml">ℛ</mi><mi id="S2.SS2.SSS0.Px1.p1.9.m9.1.1.3" xref="S2.SS2.SSS0.Px1.p1.9.m9.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px1.p1.9.m9.1b"><apply id="S2.SS2.SSS0.Px1.p1.9.m9.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px1.p1.9.m9.1.1.1.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m9.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px1.p1.9.m9.1.1.2.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m9.1.1.2">ℛ</ci><ci id="S2.SS2.SSS0.Px1.p1.9.m9.1.1.3.cmml" xref="S2.SS2.SSS0.Px1.p1.9.m9.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px1.p1.9.m9.1c">\mathcal{R}_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px1.p1.9.m9.1d">caligraphic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math>. This response improver refines the policy model outputs, aligning them more closely with the gold standard responses.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS2.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Response Improving</h4>
<div class="ltx_para ltx_noindent" id="S2.SS2.SSS0.Px2.p1">
<p class="ltx_p" id="S2.SS2.SSS0.Px2.p1.8">Subsequently, we use <math alttext="\mathcal{R}_{t}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.1.m1.1"><semantics id="S2.SS2.SSS0.Px2.p1.1.m1.1a"><msub id="S2.SS2.SSS0.Px2.p1.1.m1.1.1" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.2" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.2.cmml">ℛ</mi><mi id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.3" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.1.m1.1b"><apply id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.2">ℛ</ci><ci id="S2.SS2.SSS0.Px2.p1.1.m1.1.1.3.cmml" xref="S2.SS2.SSS0.Px2.p1.1.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.1.m1.1c">\mathcal{R}_{t}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.1.m1.1d">caligraphic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> to refine model responses to synthetic prompts, obtaining pre- and post-improvement responses as synthetic preference pairs. For each synthetic prompt <math alttext="\mathbf{x}_{i}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.2.m2.1"><semantics id="S2.SS2.SSS0.Px2.p1.2.m2.1a"><msub id="S2.SS2.SSS0.Px2.p1.2.m2.1.1" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.cmml"><mi id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.2" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.2.cmml">𝐱</mi><mi id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.3" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.2.m2.1b"><apply id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.2">𝐱</ci><ci id="S2.SS2.SSS0.Px2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.SSS0.Px2.p1.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.2.m2.1c">\mathbf{x}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.2.m2.1d">bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, we first obtain the current model output <math alttext="\mathbf{y}_{(t-1),i}\sim\pi_{\bm{\theta}_{t-1}}(\cdot|\mathbf{x}_{i})" class="ltx_math_unparsed" display="inline" id="S2.SS2.SSS0.Px2.p1.3.m3.2"><semantics id="S2.SS2.SSS0.Px2.p1.3.m3.2a"><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.2b"><msub id="S2.SS2.SSS0.Px2.p1.3.m3.2.3"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.3.2">𝐲</mi><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2"><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.1.1"><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.1.1.1"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.1.1.1.2">t</mi><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.1.1.1.1">−</mo><mn id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.1.1.1.3">1</mn></mrow><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.2.2.2.2">,</mo><mi id="S2.SS2.SSS0.Px2.p1.3.m3.1.1.1.1">i</mi></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.4">∼</mo><msub id="S2.SS2.SSS0.Px2.p1.3.m3.2.5"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.5.2">π</mi><msub id="S2.SS2.SSS0.Px2.p1.3.m3.2.5.3"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.5.3.2">𝜽</mi><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.2.5.3.3"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.5.3.3.2">t</mi><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.5.3.3.1">−</mo><mn id="S2.SS2.SSS0.Px2.p1.3.m3.2.5.3.3.3">1</mn></mrow></msub></msub><mrow id="S2.SS2.SSS0.Px2.p1.3.m3.2.6"><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.6.1" stretchy="false">(</mo><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.6.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="S2.SS2.SSS0.Px2.p1.3.m3.2.6.3" rspace="0.167em" stretchy="false">|</mo><msub id="S2.SS2.SSS0.Px2.p1.3.m3.2.6.4"><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.6.4.2">𝐱</mi><mi id="S2.SS2.SSS0.Px2.p1.3.m3.2.6.4.3">i</mi></msub><mo id="S2.SS2.SSS0.Px2.p1.3.m3.2.6.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.3.m3.2c">\mathbf{y}_{(t-1),i}\sim\pi_{\bm{\theta}_{t-1}}(\cdot|\mathbf{x}_{i})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.3.m3.2d">bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT ∼ italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, for <math alttext="i\in\{1,\dots,m\}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.4.m4.3"><semantics id="S2.SS2.SSS0.Px2.p1.4.m4.3a"><mrow id="S2.SS2.SSS0.Px2.p1.4.m4.3.4" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.cmml"><mi id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.2" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.2.cmml">i</mi><mo id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.1" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.1.cmml">∈</mo><mrow id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.2" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.1.cmml"><mo id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.2.1" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.1.cmml">{</mo><mn id="S2.SS2.SSS0.Px2.p1.4.m4.1.1" xref="S2.SS2.SSS0.Px2.p1.4.m4.1.1.cmml">1</mn><mo id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.2.2" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.1.cmml">,</mo><mi id="S2.SS2.SSS0.Px2.p1.4.m4.2.2" mathvariant="normal" xref="S2.SS2.SSS0.Px2.p1.4.m4.2.2.cmml">…</mi><mo id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.2.3" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.1.cmml">,</mo><mi id="S2.SS2.SSS0.Px2.p1.4.m4.3.3" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.3.cmml">m</mi><mo id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.2.4" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.4.m4.3b"><apply id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4"><in id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.1.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.1"></in><ci id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.2.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.2">𝑖</ci><set id="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.1.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.4.3.2"><cn id="S2.SS2.SSS0.Px2.p1.4.m4.1.1.cmml" type="integer" xref="S2.SS2.SSS0.Px2.p1.4.m4.1.1">1</cn><ci id="S2.SS2.SSS0.Px2.p1.4.m4.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m4.2.2">…</ci><ci id="S2.SS2.SSS0.Px2.p1.4.m4.3.3.cmml" xref="S2.SS2.SSS0.Px2.p1.4.m4.3.3">𝑚</ci></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.4.m4.3c">i\in\{1,\dots,m\}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.4.m4.3d">italic_i ∈ { 1 , … , italic_m }</annotation></semantics></math>. The response improver then refines this completion to produce <math alttext="\overline{\mathbf{y}_{(t-1),i}}\sim\mathcal{R}_{t}(\cdot|\mathbf{x}_{i},%
\mathbf{y}_{(t-1),i})" class="ltx_math_unparsed" display="inline" id="S2.SS2.SSS0.Px2.p1.5.m5.4"><semantics id="S2.SS2.SSS0.Px2.p1.5.m5.4a"><mrow id="S2.SS2.SSS0.Px2.p1.5.m5.4b"><mover accent="true" id="S2.SS2.SSS0.Px2.p1.5.m5.2.2"><msub id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2"><mi id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.4">𝐲</mi><mrow id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2"><mrow id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2.1.1"><mo id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2.1.1.1"><mi id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2.1.1.1.2">t</mi><mo id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2.1.1.1.1">−</mo><mn id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2.1.1.1.3">1</mn></mrow><mo id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.2.2.2.2.2">,</mo><mi id="S2.SS2.SSS0.Px2.p1.5.m5.1.1.1.1.1.1">i</mi></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.5.m5.2.2.3">¯</mo></mover><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.5">∼</mo><msub id="S2.SS2.SSS0.Px2.p1.5.m5.4.6"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.SSS0.Px2.p1.5.m5.4.6.2">ℛ</mi><mi id="S2.SS2.SSS0.Px2.p1.5.m5.4.6.3">t</mi></msub><mrow id="S2.SS2.SSS0.Px2.p1.5.m5.4.7"><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.1" stretchy="false">(</mo><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.3" rspace="0.167em" stretchy="false">|</mo><msub id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.4"><mi id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.4.2">𝐱</mi><mi id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.4.3">i</mi></msub><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.5">,</mo><msub id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.6"><mi id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.6.2">𝐲</mi><mrow id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2"><mrow id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2.1.1"><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2.1.1.2" stretchy="false">(</mo><mrow id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2.1.1.1"><mi id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2.1.1.1.2">t</mi><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2.1.1.1.1">−</mo><mn id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2.1.1.1.3">1</mn></mrow><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.4.2.2.2">,</mo><mi id="S2.SS2.SSS0.Px2.p1.5.m5.3.3.1.1">i</mi></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.5.m5.4.7.7" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.5.m5.4c">\overline{\mathbf{y}_{(t-1),i}}\sim\mathcal{R}_{t}(\cdot|\mathbf{x}_{i},%
\mathbf{y}_{(t-1),i})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.5.m5.4d">over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG ∼ caligraphic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( ⋅ | bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, considered the chosen response.
As we fine-tune the initial model in each iteration, the initial policy model output <math alttext="\mathbf{y}_{(0),i}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.6.m6.3"><semantics id="S2.SS2.SSS0.Px2.p1.6.m6.3a"><msub id="S2.SS2.SSS0.Px2.p1.6.m6.3.4" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.4.cmml"><mi id="S2.SS2.SSS0.Px2.p1.6.m6.3.4.2" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.4.2.cmml">𝐲</mi><mrow id="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.3" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.4.cmml"><mrow id="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.3.1.2" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.4.cmml"><mo id="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.3.1.2.1" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.4.cmml">(</mo><mn id="S2.SS2.SSS0.Px2.p1.6.m6.1.1.1.1" xref="S2.SS2.SSS0.Px2.p1.6.m6.1.1.1.1.cmml">0</mn><mo id="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.3.1.2.2" stretchy="false" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.4.cmml">)</mo></mrow><mo id="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.3.2" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.4.cmml">,</mo><mi id="S2.SS2.SSS0.Px2.p1.6.m6.2.2.2.2" xref="S2.SS2.SSS0.Px2.p1.6.m6.2.2.2.2.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.6.m6.3b"><apply id="S2.SS2.SSS0.Px2.p1.6.m6.3.4.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.4"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.6.m6.3.4.1.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.4">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.6.m6.3.4.2.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.4.2">𝐲</ci><list id="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.4.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m6.3.3.3.3"><cn id="S2.SS2.SSS0.Px2.p1.6.m6.1.1.1.1.cmml" type="integer" xref="S2.SS2.SSS0.Px2.p1.6.m6.1.1.1.1">0</cn><ci id="S2.SS2.SSS0.Px2.p1.6.m6.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px2.p1.6.m6.2.2.2.2">𝑖</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.6.m6.3c">\mathbf{y}_{(0),i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.6.m6.3d">bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT</annotation></semantics></math> serves as the on-policy rejected response for <math alttext="\mathbf{x}_{i}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px2.p1.7.m7.1"><semantics id="S2.SS2.SSS0.Px2.p1.7.m7.1a"><msub id="S2.SS2.SSS0.Px2.p1.7.m7.1.1" xref="S2.SS2.SSS0.Px2.p1.7.m7.1.1.cmml"><mi id="S2.SS2.SSS0.Px2.p1.7.m7.1.1.2" xref="S2.SS2.SSS0.Px2.p1.7.m7.1.1.2.cmml">𝐱</mi><mi id="S2.SS2.SSS0.Px2.p1.7.m7.1.1.3" xref="S2.SS2.SSS0.Px2.p1.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px2.p1.7.m7.1b"><apply id="S2.SS2.SSS0.Px2.p1.7.m7.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px2.p1.7.m7.1.1.1.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m7.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px2.p1.7.m7.1.1.2.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m7.1.1.2">𝐱</ci><ci id="S2.SS2.SSS0.Px2.p1.7.m7.1.1.3.cmml" xref="S2.SS2.SSS0.Px2.p1.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.7.m7.1c">\mathbf{x}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.7.m7.1d">bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. Here, <math alttext="\mathbf{y}_{(0),i}\sim\pi_{\bm{\theta}_{0}}(\cdot|\mathbf{x}_{i})" class="ltx_math_unparsed" display="inline" id="S2.SS2.SSS0.Px2.p1.8.m8.3"><semantics id="S2.SS2.SSS0.Px2.p1.8.m8.3a"><mrow id="S2.SS2.SSS0.Px2.p1.8.m8.3b"><msub id="S2.SS2.SSS0.Px2.p1.8.m8.3.4"><mi id="S2.SS2.SSS0.Px2.p1.8.m8.3.4.2">𝐲</mi><mrow id="S2.SS2.SSS0.Px2.p1.8.m8.3.3.3.3"><mrow id="S2.SS2.SSS0.Px2.p1.8.m8.3.3.3.3.1.2"><mo id="S2.SS2.SSS0.Px2.p1.8.m8.3.3.3.3.1.2.1" stretchy="false">(</mo><mn id="S2.SS2.SSS0.Px2.p1.8.m8.1.1.1.1">0</mn><mo id="S2.SS2.SSS0.Px2.p1.8.m8.3.3.3.3.1.2.2" stretchy="false">)</mo></mrow><mo id="S2.SS2.SSS0.Px2.p1.8.m8.3.3.3.3.2">,</mo><mi id="S2.SS2.SSS0.Px2.p1.8.m8.2.2.2.2">i</mi></mrow></msub><mo id="S2.SS2.SSS0.Px2.p1.8.m8.3.5">∼</mo><msub id="S2.SS2.SSS0.Px2.p1.8.m8.3.6"><mi id="S2.SS2.SSS0.Px2.p1.8.m8.3.6.2">π</mi><msub id="S2.SS2.SSS0.Px2.p1.8.m8.3.6.3"><mi id="S2.SS2.SSS0.Px2.p1.8.m8.3.6.3.2">𝜽</mi><mn id="S2.SS2.SSS0.Px2.p1.8.m8.3.6.3.3">0</mn></msub></msub><mrow id="S2.SS2.SSS0.Px2.p1.8.m8.3.7"><mo id="S2.SS2.SSS0.Px2.p1.8.m8.3.7.1" stretchy="false">(</mo><mo id="S2.SS2.SSS0.Px2.p1.8.m8.3.7.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="S2.SS2.SSS0.Px2.p1.8.m8.3.7.3" rspace="0.167em" stretchy="false">|</mo><msub id="S2.SS2.SSS0.Px2.p1.8.m8.3.7.4"><mi id="S2.SS2.SSS0.Px2.p1.8.m8.3.7.4.2">𝐱</mi><mi id="S2.SS2.SSS0.Px2.p1.8.m8.3.7.4.3">i</mi></msub><mo id="S2.SS2.SSS0.Px2.p1.8.m8.3.7.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px2.p1.8.m8.3c">\mathbf{y}_{(0),i}\sim\pi_{\bm{\theta}_{0}}(\cdot|\mathbf{x}_{i})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px2.p1.8.m8.3d">bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT ∼ italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>.
This method generates numerous synthetic preference candidates, including both chosen and rejected responses.</p>
</div>
</section>
<section class="ltx_paragraph" id="S2.SS2.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">Data Filtering</h4>
<div class="ltx_para ltx_noindent" id="S2.SS2.SSS0.Px3.p1">
<p class="ltx_p" id="S2.SS2.SSS0.Px3.p1.8">Unlike data from humans or strong teacher LLMs, which come with clear standard responses, self-generated data require proper filtering to ensure quality <cite class="ltx_cite ltx_citemacro_citep">(Gulcehre et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib21" title="">2023</a>)</cite>.
As our policy model improves, many responses no longer need refining; we only need to retain data with a preference gap between the chosen and rejected responses.
Instead of using GPT4-Turbo-as-a-Judge for data filtering <cite class="ltx_cite ltx_citemacro_citep">(Rosset et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib49" title="">2024</a>)</cite>, SynPO employs only a small model (e.g., a 0.4B PairRM <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib28" title="">2023</a>)</cite>) or the model itself for scoring. Similar to SimPO <cite class="ltx_cite ltx_citemacro_citep">(Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite> and SPPO <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib60" title="">2024b</a>)</cite>, this ensures the process does not rely on a more powerful teacher model.
We retain <math alttext="\overline{\mathbf{y}_{(t-1),i}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.1.m1.2"><semantics id="S2.SS2.SSS0.Px3.p1.1.m1.2a"><mover accent="true" id="S2.SS2.SSS0.Px3.p1.1.m1.2.2" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.cmml"><msub id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.cmml"><mi id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.4" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.4.cmml">𝐲</mi><mrow id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.3.cmml"><mrow id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.cmml"><mo id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.2" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.cmml">(</mo><mrow id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.cmml"><mi id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.2" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.2.cmml">t</mi><mo id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.1" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.3" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.3" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.2" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.3.cmml">,</mo><mi id="S2.SS2.SSS0.Px3.p1.1.m1.1.1.1.1.1.1" xref="S2.SS2.SSS0.Px3.p1.1.m1.1.1.1.1.1.1.cmml">i</mi></mrow></msub><mo id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.3" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.3.cmml">¯</mo></mover><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.1.m1.2b"><apply id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2"><ci id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.3">¯</ci><apply id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.4.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.4">𝐲</ci><list id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2"><apply id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1"><minus id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.1"></minus><ci id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.2.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.2">𝑡</ci><cn id="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.3.cmml" type="integer" xref="S2.SS2.SSS0.Px3.p1.1.m1.2.2.2.2.2.2.1.1.1.3">1</cn></apply><ci id="S2.SS2.SSS0.Px3.p1.1.m1.1.1.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.1.m1.1.1.1.1.1.1">𝑖</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.1.m1.2c">\overline{\mathbf{y}_{(t-1),i}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.1.m1.2d">over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG</annotation></semantics></math> and <math alttext="\mathbf{y}_{(0),i}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.2.m2.3"><semantics id="S2.SS2.SSS0.Px3.p1.2.m2.3a"><msub id="S2.SS2.SSS0.Px3.p1.2.m2.3.4" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.4.cmml"><mi id="S2.SS2.SSS0.Px3.p1.2.m2.3.4.2" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.4.2.cmml">𝐲</mi><mrow id="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.3" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.4.cmml"><mrow id="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.3.1.2" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.4.cmml"><mo id="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.3.1.2.1" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.4.cmml">(</mo><mn id="S2.SS2.SSS0.Px3.p1.2.m2.1.1.1.1" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1.1.1.cmml">0</mn><mo id="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.3.1.2.2" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.4.cmml">)</mo></mrow><mo id="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.3.2" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.4.cmml">,</mo><mi id="S2.SS2.SSS0.Px3.p1.2.m2.2.2.2.2" xref="S2.SS2.SSS0.Px3.p1.2.m2.2.2.2.2.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.2.m2.3b"><apply id="S2.SS2.SSS0.Px3.p1.2.m2.3.4.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.4"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.2.m2.3.4.1.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.4">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.2.m2.3.4.2.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.4.2">𝐲</ci><list id="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.4.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.3.3.3.3"><cn id="S2.SS2.SSS0.Px3.p1.2.m2.1.1.1.1.cmml" type="integer" xref="S2.SS2.SSS0.Px3.p1.2.m2.1.1.1.1">0</cn><ci id="S2.SS2.SSS0.Px3.p1.2.m2.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.2.m2.2.2.2.2">𝑖</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.2.m2.3c">\mathbf{y}_{(0),i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.2.m2.3d">bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT</annotation></semantics></math> with significant preference differences (i.e., a large score gap). <math alttext="\overline{\mathbf{y}_{(t-1),i}}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.3.m3.2"><semantics id="S2.SS2.SSS0.Px3.p1.3.m3.2a"><mover accent="true" id="S2.SS2.SSS0.Px3.p1.3.m3.2.2" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.cmml"><msub id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.cmml"><mi id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.4" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.4.cmml">𝐲</mi><mrow id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.3.cmml"><mrow id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.cmml"><mo id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.2" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.cmml">(</mo><mrow id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.cmml"><mi id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.2" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.2.cmml">t</mi><mo id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.1" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.3" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.3" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.2" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.3.cmml">,</mo><mi id="S2.SS2.SSS0.Px3.p1.3.m3.1.1.1.1.1.1" xref="S2.SS2.SSS0.Px3.p1.3.m3.1.1.1.1.1.1.cmml">i</mi></mrow></msub><mo id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.3" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.3.cmml">¯</mo></mover><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.3.m3.2b"><apply id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2"><ci id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.3">¯</ci><apply id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.4.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.4">𝐲</ci><list id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2"><apply id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1"><minus id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.1"></minus><ci id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.2.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.2">𝑡</ci><cn id="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.3.cmml" type="integer" xref="S2.SS2.SSS0.Px3.p1.3.m3.2.2.2.2.2.2.1.1.1.3">1</cn></apply><ci id="S2.SS2.SSS0.Px3.p1.3.m3.1.1.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.3.m3.1.1.1.1.1.1">𝑖</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.3.m3.2c">\overline{\mathbf{y}_{(t-1),i}}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.3.m3.2d">over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG</annotation></semantics></math> is regarded as the chosen response, <math alttext="\mathbf{y}_{i}^{w}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.4.m4.1"><semantics id="S2.SS2.SSS0.Px3.p1.4.m4.1a"><msubsup id="S2.SS2.SSS0.Px3.p1.4.m4.1.1" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1.cmml"><mi id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.2" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.2.cmml">𝐲</mi><mi id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.3" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.3.cmml">i</mi><mi id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.3" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1.3.cmml">w</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.4.m4.1b"><apply id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1">superscript</csymbol><apply id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.cmml" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.1.cmml" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.2">𝐲</ci><ci id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1.2.3">𝑖</ci></apply><ci id="S2.SS2.SSS0.Px3.p1.4.m4.1.1.3.cmml" xref="S2.SS2.SSS0.Px3.p1.4.m4.1.1.3">𝑤</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.4.m4.1c">\mathbf{y}_{i}^{w}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.4.m4.1d">bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_w end_POSTSUPERSCRIPT</annotation></semantics></math>, while <math alttext="\mathbf{y}_{(0),i}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.5.m5.3"><semantics id="S2.SS2.SSS0.Px3.p1.5.m5.3a"><msub id="S2.SS2.SSS0.Px3.p1.5.m5.3.4" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.4.cmml"><mi id="S2.SS2.SSS0.Px3.p1.5.m5.3.4.2" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.4.2.cmml">𝐲</mi><mrow id="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.3" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.4.cmml"><mrow id="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.3.1.2" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.4.cmml"><mo id="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.3.1.2.1" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.4.cmml">(</mo><mn id="S2.SS2.SSS0.Px3.p1.5.m5.1.1.1.1" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1.1.1.cmml">0</mn><mo id="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.3.1.2.2" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.4.cmml">)</mo></mrow><mo id="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.3.2" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.4.cmml">,</mo><mi id="S2.SS2.SSS0.Px3.p1.5.m5.2.2.2.2" xref="S2.SS2.SSS0.Px3.p1.5.m5.2.2.2.2.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.5.m5.3b"><apply id="S2.SS2.SSS0.Px3.p1.5.m5.3.4.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.4"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.5.m5.3.4.1.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.4">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.5.m5.3.4.2.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.4.2">𝐲</ci><list id="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.4.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.3.3.3.3"><cn id="S2.SS2.SSS0.Px3.p1.5.m5.1.1.1.1.cmml" type="integer" xref="S2.SS2.SSS0.Px3.p1.5.m5.1.1.1.1">0</cn><ci id="S2.SS2.SSS0.Px3.p1.5.m5.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.5.m5.2.2.2.2">𝑖</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.5.m5.3c">\mathbf{y}_{(0),i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.5.m5.3d">bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is regarded as the rejected response, <math alttext="\mathbf{y}_{i}^{l}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.6.m6.1"><semantics id="S2.SS2.SSS0.Px3.p1.6.m6.1a"><msubsup id="S2.SS2.SSS0.Px3.p1.6.m6.1.1" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1.cmml"><mi id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.2" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.2.cmml">𝐲</mi><mi id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.3" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.3.cmml">i</mi><mi id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.3" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1.3.cmml">l</mi></msubsup><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.6.m6.1b"><apply id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1">superscript</csymbol><apply id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.cmml" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.1.cmml" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.2">𝐲</ci><ci id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1.2.3">𝑖</ci></apply><ci id="S2.SS2.SSS0.Px3.p1.6.m6.1.1.3.cmml" xref="S2.SS2.SSS0.Px3.p1.6.m6.1.1.3">𝑙</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.6.m6.1c">\mathbf{y}_{i}^{l}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.6.m6.1d">bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_l end_POSTSUPERSCRIPT</annotation></semantics></math>. Along with the corresponding prompt <math alttext="\mathbf{x}_{i}" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.7.m7.1"><semantics id="S2.SS2.SSS0.Px3.p1.7.m7.1a"><msub id="S2.SS2.SSS0.Px3.p1.7.m7.1.1" xref="S2.SS2.SSS0.Px3.p1.7.m7.1.1.cmml"><mi id="S2.SS2.SSS0.Px3.p1.7.m7.1.1.2" xref="S2.SS2.SSS0.Px3.p1.7.m7.1.1.2.cmml">𝐱</mi><mi id="S2.SS2.SSS0.Px3.p1.7.m7.1.1.3" xref="S2.SS2.SSS0.Px3.p1.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.7.m7.1b"><apply id="S2.SS2.SSS0.Px3.p1.7.m7.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.7.m7.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.7.m7.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.7.m7.1.1.2.cmml" xref="S2.SS2.SSS0.Px3.p1.7.m7.1.1.2">𝐱</ci><ci id="S2.SS2.SSS0.Px3.p1.7.m7.1.1.3.cmml" xref="S2.SS2.SSS0.Px3.p1.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.7.m7.1c">\mathbf{x}_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.7.m7.1d">bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, they form a valid instance <math alttext="(\mathbf{x}_{i},\mathbf{y}_{i}^{w},\mathbf{y}_{i}^{l})" class="ltx_Math" display="inline" id="S2.SS2.SSS0.Px3.p1.8.m8.3"><semantics id="S2.SS2.SSS0.Px3.p1.8.m8.3a"><mrow id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.4.cmml"><mo id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.4" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.4.cmml">(</mo><msub id="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1" xref="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.cmml"><mi id="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.2" xref="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.2.cmml">𝐱</mi><mi id="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.3" xref="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.5" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.4.cmml">,</mo><msubsup id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.cmml"><mi id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.2" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.2.cmml">𝐲</mi><mi id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.3" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.3.cmml">i</mi><mi id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.3" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.3.cmml">w</mi></msubsup><mo id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.6" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.4.cmml">,</mo><msubsup id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.cmml"><mi id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.2" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.2.cmml">𝐲</mi><mi id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.3" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.3.cmml">i</mi><mi id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.3" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.3.cmml">l</mi></msubsup><mo id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.7" stretchy="false" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.4.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS0.Px3.p1.8.m8.3b"><vector id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.4.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3"><apply id="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.1.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.2.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.2">𝐱</ci><ci id="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.3.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.1.1.1.1.3">𝑖</ci></apply><apply id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.1.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2">superscript</csymbol><apply id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.1.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.2">𝐲</ci><ci id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.2.3">𝑖</ci></apply><ci id="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.2.2.2.2.3">𝑤</ci></apply><apply id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.1.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3">superscript</csymbol><apply id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3"><csymbol cd="ambiguous" id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.1.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3">subscript</csymbol><ci id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.2.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.2">𝐲</ci><ci id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.3.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.2.3">𝑖</ci></apply><ci id="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.3.cmml" xref="S2.SS2.SSS0.Px3.p1.8.m8.3.3.3.3.3">𝑙</ci></apply></vector></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS0.Px3.p1.8.m8.3c">(\mathbf{x}_{i},\mathbf{y}_{i}^{w},\mathbf{y}_{i}^{l})</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.SSS0.Px3.p1.8.m8.3d">( bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_w end_POSTSUPERSCRIPT , bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_l end_POSTSUPERSCRIPT )</annotation></semantics></math>.
All valid data is then integrated into the synthetic preference data for subsequent iterations.</p>
</div>
</section>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>Synthetic Preference Optimization</h3>
<div class="ltx_para ltx_noindent" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.1">The large-scale synthetic preference data naturally facilitate the multi-iteration process of self-boosting.
In each iteration, we follow SimPO <cite class="ltx_cite ltx_citemacro_citep">(Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite> for training; actually, our method is also compatible with other preference optimization training methods, such as DPO <cite class="ltx_cite ltx_citemacro_citep">(Rafailov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib47" title="">2024</a>)</cite> and KTO <cite class="ltx_cite ltx_citemacro_citep">(Ethayarajh et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib19" title="">2024</a>)</cite>. Denoting <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S2.SS3.p1.1.m1.1"><semantics id="S2.SS3.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS3.p1.1.m1.1.1" xref="S2.SS3.p1.1.m1.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.1b"><ci id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.1.m1.1d">caligraphic_D</annotation></semantics></math> as the synthetic preference data, we have:</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A7.EGx1">
<tbody id="S2.Ex1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\bm{\theta}_{t}\leftarrow\operatorname*{arg\,min}_{\bm{\theta}}%
\mathbb{E}_{(\mathbf{x}_{i},\mathbf{y}_{i}^{w},\mathbf{y}_{i}^{l})\sim\mathcal%
{D}}\left[\log\sigma\left(\frac{\beta}{|\mathbf{y}_{i}^{w}|}\log\pi_{\theta_{t%
-1}}(\mathbf{y}_{i}^{w}\mid\mathbf{x}_{i})-\frac{\beta}{|\mathbf{y}_{i}^{l}|}%
\log\pi_{\theta_{t-1}}(\mathbf{y}_{i}^{l}\mid\mathbf{x}_{i})-\gamma\right)\right]" class="ltx_Math" display="inline" id="S2.Ex1.m1.6"><semantics id="S2.Ex1.m1.6a"><mrow id="S2.Ex1.m1.6.6" xref="S2.Ex1.m1.6.6.cmml"><msub id="S2.Ex1.m1.6.6.3" xref="S2.Ex1.m1.6.6.3.cmml"><mi id="S2.Ex1.m1.6.6.3.2" xref="S2.Ex1.m1.6.6.3.2.cmml">𝜽</mi><mi id="S2.Ex1.m1.6.6.3.3" xref="S2.Ex1.m1.6.6.3.3.cmml">t</mi></msub><mo id="S2.Ex1.m1.6.6.2" stretchy="false" xref="S2.Ex1.m1.6.6.2.cmml">←</mo><mrow id="S2.Ex1.m1.6.6.1" xref="S2.Ex1.m1.6.6.1.cmml"><mrow id="S2.Ex1.m1.6.6.1.3" xref="S2.Ex1.m1.6.6.1.3.cmml"><munder id="S2.Ex1.m1.6.6.1.3.1" xref="S2.Ex1.m1.6.6.1.3.1.cmml"><mrow id="S2.Ex1.m1.6.6.1.3.1.2" xref="S2.Ex1.m1.6.6.1.3.1.2.cmml"><mi id="S2.Ex1.m1.6.6.1.3.1.2.2" xref="S2.Ex1.m1.6.6.1.3.1.2.2.cmml">arg</mi><mo id="S2.Ex1.m1.6.6.1.3.1.2.1" lspace="0.170em" xref="S2.Ex1.m1.6.6.1.3.1.2.1.cmml">⁢</mo><mi id="S2.Ex1.m1.6.6.1.3.1.2.3" xref="S2.Ex1.m1.6.6.1.3.1.2.3.cmml">min</mi></mrow><mi id="S2.Ex1.m1.6.6.1.3.1.3" xref="S2.Ex1.m1.6.6.1.3.1.3.cmml">𝜽</mi></munder><mo id="S2.Ex1.m1.6.6.1.3a" xref="S2.Ex1.m1.6.6.1.3.cmml">⁡</mo><msub id="S2.Ex1.m1.6.6.1.3.2" xref="S2.Ex1.m1.6.6.1.3.2.cmml"><mi id="S2.Ex1.m1.6.6.1.3.2.2" xref="S2.Ex1.m1.6.6.1.3.2.2.cmml">𝔼</mi><mrow id="S2.Ex1.m1.3.3.3" xref="S2.Ex1.m1.3.3.3.cmml"><mrow id="S2.Ex1.m1.3.3.3.3.3" xref="S2.Ex1.m1.3.3.3.3.4.cmml"><mo id="S2.Ex1.m1.3.3.3.3.3.4" stretchy="false" xref="S2.Ex1.m1.3.3.3.3.4.cmml">(</mo><msub id="S2.Ex1.m1.1.1.1.1.1.1" xref="S2.Ex1.m1.1.1.1.1.1.1.cmml"><mi id="S2.Ex1.m1.1.1.1.1.1.1.2" xref="S2.Ex1.m1.1.1.1.1.1.1.2.cmml">𝐱</mi><mi id="S2.Ex1.m1.1.1.1.1.1.1.3" xref="S2.Ex1.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.Ex1.m1.3.3.3.3.3.5" xref="S2.Ex1.m1.3.3.3.3.4.cmml">,</mo><msubsup id="S2.Ex1.m1.2.2.2.2.2.2" xref="S2.Ex1.m1.2.2.2.2.2.2.cmml"><mi id="S2.Ex1.m1.2.2.2.2.2.2.2.2" xref="S2.Ex1.m1.2.2.2.2.2.2.2.2.cmml">𝐲</mi><mi id="S2.Ex1.m1.2.2.2.2.2.2.2.3" xref="S2.Ex1.m1.2.2.2.2.2.2.2.3.cmml">i</mi><mi id="S2.Ex1.m1.2.2.2.2.2.2.3" xref="S2.Ex1.m1.2.2.2.2.2.2.3.cmml">w</mi></msubsup><mo id="S2.Ex1.m1.3.3.3.3.3.6" xref="S2.Ex1.m1.3.3.3.3.4.cmml">,</mo><msubsup id="S2.Ex1.m1.3.3.3.3.3.3" xref="S2.Ex1.m1.3.3.3.3.3.3.cmml"><mi id="S2.Ex1.m1.3.3.3.3.3.3.2.2" xref="S2.Ex1.m1.3.3.3.3.3.3.2.2.cmml">𝐲</mi><mi id="S2.Ex1.m1.3.3.3.3.3.3.2.3" xref="S2.Ex1.m1.3.3.3.3.3.3.2.3.cmml">i</mi><mi id="S2.Ex1.m1.3.3.3.3.3.3.3" xref="S2.Ex1.m1.3.3.3.3.3.3.3.cmml">l</mi></msubsup><mo id="S2.Ex1.m1.3.3.3.3.3.7" stretchy="false" xref="S2.Ex1.m1.3.3.3.3.4.cmml">)</mo></mrow><mo id="S2.Ex1.m1.3.3.3.4" xref="S2.Ex1.m1.3.3.3.4.cmml">∼</mo><mi class="ltx_font_mathcaligraphic" id="S2.Ex1.m1.3.3.3.5" xref="S2.Ex1.m1.3.3.3.5.cmml">𝒟</mi></mrow></msub></mrow><mo id="S2.Ex1.m1.6.6.1.2" xref="S2.Ex1.m1.6.6.1.2.cmml">⁢</mo><mrow id="S2.Ex1.m1.6.6.1.1.1" xref="S2.Ex1.m1.6.6.1.1.2.cmml"><mo id="S2.Ex1.m1.6.6.1.1.1.2" xref="S2.Ex1.m1.6.6.1.1.2.1.cmml">[</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.cmml"><mrow id="S2.Ex1.m1.6.6.1.1.1.1.3" xref="S2.Ex1.m1.6.6.1.1.1.1.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.3.1" xref="S2.Ex1.m1.6.6.1.1.1.1.3.1.cmml">log</mi><mo id="S2.Ex1.m1.6.6.1.1.1.1.3a" lspace="0.167em" xref="S2.Ex1.m1.6.6.1.1.1.1.3.cmml">⁡</mo><mi id="S2.Ex1.m1.6.6.1.1.1.1.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.3.2.cmml">σ</mi></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.1.2" xref="S2.Ex1.m1.6.6.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.cmml"><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.cmml"><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.cmml"><mstyle displaystyle="true" id="S2.Ex1.m1.4.4" xref="S2.Ex1.m1.4.4.cmml"><mfrac id="S2.Ex1.m1.4.4a" xref="S2.Ex1.m1.4.4.cmml"><mi id="S2.Ex1.m1.4.4.3" xref="S2.Ex1.m1.4.4.3.cmml">β</mi><mrow id="S2.Ex1.m1.4.4.1.1" xref="S2.Ex1.m1.4.4.1.2.cmml"><mo id="S2.Ex1.m1.4.4.1.1.2" stretchy="false" xref="S2.Ex1.m1.4.4.1.2.1.cmml">|</mo><msubsup id="S2.Ex1.m1.4.4.1.1.1" xref="S2.Ex1.m1.4.4.1.1.1.cmml"><mi id="S2.Ex1.m1.4.4.1.1.1.2.2" xref="S2.Ex1.m1.4.4.1.1.1.2.2.cmml">𝐲</mi><mi id="S2.Ex1.m1.4.4.1.1.1.2.3" xref="S2.Ex1.m1.4.4.1.1.1.2.3.cmml">i</mi><mi id="S2.Ex1.m1.4.4.1.1.1.3" xref="S2.Ex1.m1.4.4.1.1.1.3.cmml">w</mi></msubsup><mo id="S2.Ex1.m1.4.4.1.1.3" stretchy="false" xref="S2.Ex1.m1.4.4.1.2.1.cmml">|</mo></mrow></mfrac></mstyle><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.2" lspace="0.167em" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.1.cmml">log</mi><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3a" lspace="0.167em" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.cmml">⁡</mo><msub id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.2.cmml">π</mi><msub id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.2.cmml">θ</mi><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.2.cmml">t</mi><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.1.cmml">−</mo><mn id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.3.cmml">1</mn></mrow></msub></msub></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.2a" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.cmml"><msubsup id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml">𝐲</mi><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.3.cmml">i</mi><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">w</mi></msubsup><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.1.cmml">∣</mo><msub id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml">𝐱</mi><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml">i</mi></msub></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.3.cmml">−</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.cmml"><mstyle displaystyle="true" id="S2.Ex1.m1.5.5" xref="S2.Ex1.m1.5.5.cmml"><mfrac id="S2.Ex1.m1.5.5a" xref="S2.Ex1.m1.5.5.cmml"><mi id="S2.Ex1.m1.5.5.3" xref="S2.Ex1.m1.5.5.3.cmml">β</mi><mrow id="S2.Ex1.m1.5.5.1.1" xref="S2.Ex1.m1.5.5.1.2.cmml"><mo id="S2.Ex1.m1.5.5.1.1.2" stretchy="false" xref="S2.Ex1.m1.5.5.1.2.1.cmml">|</mo><msubsup id="S2.Ex1.m1.5.5.1.1.1" xref="S2.Ex1.m1.5.5.1.1.1.cmml"><mi id="S2.Ex1.m1.5.5.1.1.1.2.2" xref="S2.Ex1.m1.5.5.1.1.1.2.2.cmml">𝐲</mi><mi id="S2.Ex1.m1.5.5.1.1.1.2.3" xref="S2.Ex1.m1.5.5.1.1.1.2.3.cmml">i</mi><mi id="S2.Ex1.m1.5.5.1.1.1.3" xref="S2.Ex1.m1.5.5.1.1.1.3.cmml">l</mi></msubsup><mo id="S2.Ex1.m1.5.5.1.1.3" stretchy="false" xref="S2.Ex1.m1.5.5.1.2.1.cmml">|</mo></mrow></mfrac></mstyle><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.2" lspace="0.167em" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.2.cmml">⁢</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.1.cmml">log</mi><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3a" lspace="0.167em" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.cmml">⁡</mo><msub id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.2.cmml">π</mi><msub id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.2.cmml">θ</mi><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.2.cmml">t</mi><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.1.cmml">−</mo><mn id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.3.cmml">1</mn></mrow></msub></msub></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.2a" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.2.cmml">⁢</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.cmml"><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.2" stretchy="false" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.cmml">(</mo><mrow id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.cmml"><msubsup id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.2.cmml">𝐲</mi><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.3.cmml">i</mi><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.3.cmml">l</mi></msubsup><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.1" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.1.cmml">∣</mo><msub id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.cmml"><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.2" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.2.cmml">𝐱</mi><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.3.cmml">i</mi></msub></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.3" stretchy="false" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.3a" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.3.cmml">−</mo><mi id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.4" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.4.cmml">γ</mi></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.1.1.1.3" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.Ex1.m1.6.6.1.1.1.3" xref="S2.Ex1.m1.6.6.1.1.2.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.Ex1.m1.6b"><apply id="S2.Ex1.m1.6.6.cmml" xref="S2.Ex1.m1.6.6"><ci id="S2.Ex1.m1.6.6.2.cmml" xref="S2.Ex1.m1.6.6.2">←</ci><apply id="S2.Ex1.m1.6.6.3.cmml" xref="S2.Ex1.m1.6.6.3"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.3.1.cmml" xref="S2.Ex1.m1.6.6.3">subscript</csymbol><ci id="S2.Ex1.m1.6.6.3.2.cmml" xref="S2.Ex1.m1.6.6.3.2">𝜽</ci><ci id="S2.Ex1.m1.6.6.3.3.cmml" xref="S2.Ex1.m1.6.6.3.3">𝑡</ci></apply><apply id="S2.Ex1.m1.6.6.1.cmml" xref="S2.Ex1.m1.6.6.1"><times id="S2.Ex1.m1.6.6.1.2.cmml" xref="S2.Ex1.m1.6.6.1.2"></times><apply id="S2.Ex1.m1.6.6.1.3.cmml" xref="S2.Ex1.m1.6.6.1.3"><apply id="S2.Ex1.m1.6.6.1.3.1.cmml" xref="S2.Ex1.m1.6.6.1.3.1"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.3.1.1.cmml" xref="S2.Ex1.m1.6.6.1.3.1">subscript</csymbol><apply id="S2.Ex1.m1.6.6.1.3.1.2.cmml" xref="S2.Ex1.m1.6.6.1.3.1.2"><times id="S2.Ex1.m1.6.6.1.3.1.2.1.cmml" xref="S2.Ex1.m1.6.6.1.3.1.2.1"></times><ci id="S2.Ex1.m1.6.6.1.3.1.2.2.cmml" xref="S2.Ex1.m1.6.6.1.3.1.2.2">arg</ci><ci id="S2.Ex1.m1.6.6.1.3.1.2.3.cmml" xref="S2.Ex1.m1.6.6.1.3.1.2.3">min</ci></apply><ci id="S2.Ex1.m1.6.6.1.3.1.3.cmml" xref="S2.Ex1.m1.6.6.1.3.1.3">𝜽</ci></apply><apply id="S2.Ex1.m1.6.6.1.3.2.cmml" xref="S2.Ex1.m1.6.6.1.3.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.3.2.1.cmml" xref="S2.Ex1.m1.6.6.1.3.2">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.3.2.2.cmml" xref="S2.Ex1.m1.6.6.1.3.2.2">𝔼</ci><apply id="S2.Ex1.m1.3.3.3.cmml" xref="S2.Ex1.m1.3.3.3"><csymbol cd="latexml" id="S2.Ex1.m1.3.3.3.4.cmml" xref="S2.Ex1.m1.3.3.3.4">similar-to</csymbol><vector id="S2.Ex1.m1.3.3.3.3.4.cmml" xref="S2.Ex1.m1.3.3.3.3.3"><apply id="S2.Ex1.m1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.Ex1.m1.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.Ex1.m1.1.1.1.1.1.1.2.cmml" xref="S2.Ex1.m1.1.1.1.1.1.1.2">𝐱</ci><ci id="S2.Ex1.m1.1.1.1.1.1.1.3.cmml" xref="S2.Ex1.m1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S2.Ex1.m1.2.2.2.2.2.2.cmml" xref="S2.Ex1.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.2.2.2.2.2.2.1.cmml" xref="S2.Ex1.m1.2.2.2.2.2.2">superscript</csymbol><apply id="S2.Ex1.m1.2.2.2.2.2.2.2.cmml" xref="S2.Ex1.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.2.2.2.2.2.2.2.1.cmml" xref="S2.Ex1.m1.2.2.2.2.2.2">subscript</csymbol><ci id="S2.Ex1.m1.2.2.2.2.2.2.2.2.cmml" xref="S2.Ex1.m1.2.2.2.2.2.2.2.2">𝐲</ci><ci id="S2.Ex1.m1.2.2.2.2.2.2.2.3.cmml" xref="S2.Ex1.m1.2.2.2.2.2.2.2.3">𝑖</ci></apply><ci id="S2.Ex1.m1.2.2.2.2.2.2.3.cmml" xref="S2.Ex1.m1.2.2.2.2.2.2.3">𝑤</ci></apply><apply id="S2.Ex1.m1.3.3.3.3.3.3.cmml" xref="S2.Ex1.m1.3.3.3.3.3.3"><csymbol cd="ambiguous" id="S2.Ex1.m1.3.3.3.3.3.3.1.cmml" xref="S2.Ex1.m1.3.3.3.3.3.3">superscript</csymbol><apply id="S2.Ex1.m1.3.3.3.3.3.3.2.cmml" xref="S2.Ex1.m1.3.3.3.3.3.3"><csymbol cd="ambiguous" id="S2.Ex1.m1.3.3.3.3.3.3.2.1.cmml" xref="S2.Ex1.m1.3.3.3.3.3.3">subscript</csymbol><ci id="S2.Ex1.m1.3.3.3.3.3.3.2.2.cmml" xref="S2.Ex1.m1.3.3.3.3.3.3.2.2">𝐲</ci><ci id="S2.Ex1.m1.3.3.3.3.3.3.2.3.cmml" xref="S2.Ex1.m1.3.3.3.3.3.3.2.3">𝑖</ci></apply><ci id="S2.Ex1.m1.3.3.3.3.3.3.3.cmml" xref="S2.Ex1.m1.3.3.3.3.3.3.3">𝑙</ci></apply></vector><ci id="S2.Ex1.m1.3.3.3.5.cmml" xref="S2.Ex1.m1.3.3.3.5">𝒟</ci></apply></apply></apply><apply id="S2.Ex1.m1.6.6.1.1.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1"><csymbol cd="latexml" id="S2.Ex1.m1.6.6.1.1.2.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.2">delimited-[]</csymbol><apply id="S2.Ex1.m1.6.6.1.1.1.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1"><times id="S2.Ex1.m1.6.6.1.1.1.1.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.2"></times><apply id="S2.Ex1.m1.6.6.1.1.1.1.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.3"><log id="S2.Ex1.m1.6.6.1.1.1.1.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.3.1"></log><ci id="S2.Ex1.m1.6.6.1.1.1.1.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.3.2">𝜎</ci></apply><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1"><minus id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.3"></minus><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1"><times id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.2"></times><apply id="S2.Ex1.m1.4.4.cmml" xref="S2.Ex1.m1.4.4"><divide id="S2.Ex1.m1.4.4.2.cmml" xref="S2.Ex1.m1.4.4"></divide><ci id="S2.Ex1.m1.4.4.3.cmml" xref="S2.Ex1.m1.4.4.3">𝛽</ci><apply id="S2.Ex1.m1.4.4.1.2.cmml" xref="S2.Ex1.m1.4.4.1.1"><abs id="S2.Ex1.m1.4.4.1.2.1.cmml" xref="S2.Ex1.m1.4.4.1.1.2"></abs><apply id="S2.Ex1.m1.4.4.1.1.1.cmml" xref="S2.Ex1.m1.4.4.1.1.1"><csymbol cd="ambiguous" id="S2.Ex1.m1.4.4.1.1.1.1.cmml" xref="S2.Ex1.m1.4.4.1.1.1">superscript</csymbol><apply id="S2.Ex1.m1.4.4.1.1.1.2.cmml" xref="S2.Ex1.m1.4.4.1.1.1"><csymbol cd="ambiguous" id="S2.Ex1.m1.4.4.1.1.1.2.1.cmml" xref="S2.Ex1.m1.4.4.1.1.1">subscript</csymbol><ci id="S2.Ex1.m1.4.4.1.1.1.2.2.cmml" xref="S2.Ex1.m1.4.4.1.1.1.2.2">𝐲</ci><ci id="S2.Ex1.m1.4.4.1.1.1.2.3.cmml" xref="S2.Ex1.m1.4.4.1.1.1.2.3">𝑖</ci></apply><ci id="S2.Ex1.m1.4.4.1.1.1.3.cmml" xref="S2.Ex1.m1.4.4.1.1.1.3">𝑤</ci></apply></apply></apply><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3"><log id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.1"></log><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.2">𝜋</ci><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.2">𝜃</ci><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3"><minus id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.1"></minus><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.2">𝑡</ci><cn id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.3.cmml" type="integer" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.3.2.3.3.3">1</cn></apply></apply></apply></apply><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2">superscript</csymbol><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.2">𝐲</ci><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.2.3">𝑖</ci></apply><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.2.3">𝑤</ci></apply><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.2">𝐱</ci><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.1.1.1.1.3.3">𝑖</ci></apply></apply></apply><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2"><times id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.2"></times><apply id="S2.Ex1.m1.5.5.cmml" xref="S2.Ex1.m1.5.5"><divide id="S2.Ex1.m1.5.5.2.cmml" xref="S2.Ex1.m1.5.5"></divide><ci id="S2.Ex1.m1.5.5.3.cmml" xref="S2.Ex1.m1.5.5.3">𝛽</ci><apply id="S2.Ex1.m1.5.5.1.2.cmml" xref="S2.Ex1.m1.5.5.1.1"><abs id="S2.Ex1.m1.5.5.1.2.1.cmml" xref="S2.Ex1.m1.5.5.1.1.2"></abs><apply id="S2.Ex1.m1.5.5.1.1.1.cmml" xref="S2.Ex1.m1.5.5.1.1.1"><csymbol cd="ambiguous" id="S2.Ex1.m1.5.5.1.1.1.1.cmml" xref="S2.Ex1.m1.5.5.1.1.1">superscript</csymbol><apply id="S2.Ex1.m1.5.5.1.1.1.2.cmml" xref="S2.Ex1.m1.5.5.1.1.1"><csymbol cd="ambiguous" id="S2.Ex1.m1.5.5.1.1.1.2.1.cmml" xref="S2.Ex1.m1.5.5.1.1.1">subscript</csymbol><ci id="S2.Ex1.m1.5.5.1.1.1.2.2.cmml" xref="S2.Ex1.m1.5.5.1.1.1.2.2">𝐲</ci><ci id="S2.Ex1.m1.5.5.1.1.1.2.3.cmml" xref="S2.Ex1.m1.5.5.1.1.1.2.3">𝑖</ci></apply><ci id="S2.Ex1.m1.5.5.1.1.1.3.cmml" xref="S2.Ex1.m1.5.5.1.1.1.3">𝑙</ci></apply></apply></apply><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3"><log id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.1"></log><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.2">𝜋</ci><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.2">𝜃</ci><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3"><minus id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.1"></minus><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.2">𝑡</ci><cn id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.3.cmml" type="integer" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.3.2.3.3.3">1</cn></apply></apply></apply></apply><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1"><csymbol cd="latexml" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.1">conditional</csymbol><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2">superscript</csymbol><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.2">𝐲</ci><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.2.3">𝑖</ci></apply><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.2.3">𝑙</ci></apply><apply id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3"><csymbol cd="ambiguous" id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.1.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3">subscript</csymbol><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.2.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.2">𝐱</ci><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.3.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.2.1.1.1.3.3">𝑖</ci></apply></apply></apply><ci id="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.4.cmml" xref="S2.Ex1.m1.6.6.1.1.1.1.1.1.1.4">𝛾</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.Ex1.m1.6c">\displaystyle\bm{\theta}_{t}\leftarrow\operatorname*{arg\,min}_{\bm{\theta}}%
\mathbb{E}_{(\mathbf{x}_{i},\mathbf{y}_{i}^{w},\mathbf{y}_{i}^{l})\sim\mathcal%
{D}}\left[\log\sigma\left(\frac{\beta}{|\mathbf{y}_{i}^{w}|}\log\pi_{\theta_{t%
-1}}(\mathbf{y}_{i}^{w}\mid\mathbf{x}_{i})-\frac{\beta}{|\mathbf{y}_{i}^{l}|}%
\log\pi_{\theta_{t-1}}(\mathbf{y}_{i}^{l}\mid\mathbf{x}_{i})-\gamma\right)\right]</annotation><annotation encoding="application/x-llamapun" id="S2.Ex1.m1.6d">bold_italic_θ start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ← start_OPERATOR roman_arg roman_min end_OPERATOR start_POSTSUBSCRIPT bold_italic_θ end_POSTSUBSCRIPT blackboard_E start_POSTSUBSCRIPT ( bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_w end_POSTSUPERSCRIPT , bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_l end_POSTSUPERSCRIPT ) ∼ caligraphic_D end_POSTSUBSCRIPT [ roman_log italic_σ ( divide start_ARG italic_β end_ARG start_ARG | bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_w end_POSTSUPERSCRIPT | end_ARG roman_log italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_w end_POSTSUPERSCRIPT ∣ bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) - divide start_ARG italic_β end_ARG start_ARG | bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_l end_POSTSUPERSCRIPT | end_ARG roman_log italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( bold_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_l end_POSTSUPERSCRIPT ∣ bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) - italic_γ ) ]</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS3.p1.3"><math alttext="\sigma" class="ltx_Math" display="inline" id="S2.SS3.p1.2.m1.1"><semantics id="S2.SS3.p1.2.m1.1a"><mi id="S2.SS3.p1.2.m1.1.1" xref="S2.SS3.p1.2.m1.1.1.cmml">σ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.2.m1.1b"><ci id="S2.SS3.p1.2.m1.1.1.cmml" xref="S2.SS3.p1.2.m1.1.1">𝜎</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.2.m1.1c">\sigma</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.2.m1.1d">italic_σ</annotation></semantics></math> and <math alttext="\gamma" class="ltx_Math" display="inline" id="S2.SS3.p1.3.m2.1"><semantics id="S2.SS3.p1.3.m2.1a"><mi id="S2.SS3.p1.3.m2.1.1" xref="S2.SS3.p1.3.m2.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.3.m2.1b"><ci id="S2.SS3.p1.3.m2.1.1.cmml" xref="S2.SS3.p1.3.m2.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.3.m2.1c">\gamma</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.3.m2.1d">italic_γ</annotation></semantics></math> are hyperparameters.
Different from the vanilla SimPO, SynPO is a iterative process and all the preference data are synthetic ones.
The response improver continuously refines the generation distribution to align with the ideal data distribution across multiple iterations.</p>
</div>
<div class="ltx_para ltx_noindent" id="S2.SS3.p2">
<p class="ltx_p" id="S2.SS3.p2.1">Overall, the response improver automatically learns to generate implicit generative rewards for the outputs of the LLM.
Unlike using a discriminative reward model straightforwardly, this approach helps the model learning to improve its outputs.
We present the <span class="ltx_text ltx_font_italic" id="S2.SS3.p2.1.1">Synthetic Preference Optimization</span> algorithm in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A1" title="Appendix A Algorithm ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">A</span></a>.
The entire optimization process is performed on synthetic preference data, requiring only a small amount of high-quality data for validation. This strategy maintains two key advantages: (1) Compared to the limited and hard-to-collect preference data, SynPO generates an unlimited amount of new self-synthetic data to meet the needs of iterative model improvement. (2) Using small, high-quality validation data prevents the model from deviating during training and consistently guides the generation of more relevant synthetic data.</p>
</div>
<figure class="ltx_table" id="S2.T2">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S2.T2.1" style="width:377.6pt;height:269.8pt;vertical-align:-0.9pt;"><span class="ltx_transformed_inner" style="transform:translate(-26.1pt,18.6pt) scale(0.878727861999447,0.878727861999447) ;">
<table class="ltx_tabular ltx_align_middle" id="S2.T2.1.1">
<tr class="ltx_tr" id="S2.T2.1.1.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S2.T2.1.1.1.1" rowspan="3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.1.1.1">Data Construction</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="3" id="S2.T2.1.1.1.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.1.2.1">Mistral-Base (7B)</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="3" id="S2.T2.1.1.1.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.1.3.1">Llama3-Base (8B)</span></td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.2">
<td class="ltx_td ltx_align_center ltx_border_t" colspan="2" id="S2.T2.1.1.2.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.2.1.1">AlpacaEval 2.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.2.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.2.2.1">Arena-Hard</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" colspan="2" id="S2.T2.1.1.2.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.2.3.1">AlpacaEval 2.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.2.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.2.4.1">Arena-Hard</span></td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.3">
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.3.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.3.1.1">LC (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.3.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.3.2.1">WR (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.3.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.3.3.1">WR (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.3.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.3.4.1">LC (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.3.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.3.5.1">WR (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.3.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.3.6.1">WR (%)</span></td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.4">
<td class="ltx_td ltx_align_left ltx_border_t" id="S2.T2.1.1.4.1" style="padding-left:5.0pt;padding-right:5.0pt;">SFT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.4.2" style="padding-left:5.0pt;padding-right:5.0pt;">6.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.4.3" style="padding-left:5.0pt;padding-right:5.0pt;">3.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.4.4" style="padding-left:5.0pt;padding-right:5.0pt;">2.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.4.5" style="padding-left:5.0pt;padding-right:5.0pt;">5.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.4.6" style="padding-left:5.0pt;padding-right:5.0pt;">3.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.4.7" style="padding-left:5.0pt;padding-right:5.0pt;">2.7</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.5">
<td class="ltx_td ltx_align_left ltx_border_t" id="S2.T2.1.1.5.1" style="padding-left:5.0pt;padding-right:5.0pt;">Manual Collection</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.5.2" style="padding-left:5.0pt;padding-right:5.0pt;">21.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.5.3" style="padding-left:5.0pt;padding-right:5.0pt;">20.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.5.4" style="padding-left:5.0pt;padding-right:5.0pt;">16.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.5.5" style="padding-left:5.0pt;padding-right:5.0pt;">22.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.5.6" style="padding-left:5.0pt;padding-right:5.0pt;">19.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.5.7" style="padding-left:5.0pt;padding-right:5.0pt;">23.2</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.6">
<td class="ltx_td ltx_align_left ltx_border_t" id="S2.T2.1.1.6.1" style="padding-left:5.0pt;padding-right:5.0pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.6.1.1">Iter1</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.6.2" style="padding-left:5.0pt;padding-right:5.0pt;">6.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.6.3" style="padding-left:5.0pt;padding-right:5.0pt;">4.4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.6.4" style="padding-left:5.0pt;padding-right:5.0pt;">4.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.6.5" style="padding-left:5.0pt;padding-right:5.0pt;">7.2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.6.6" style="padding-left:5.0pt;padding-right:5.0pt;">4.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.6.7" style="padding-left:5.0pt;padding-right:5.0pt;">4.4</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.7">
<td class="ltx_td ltx_align_left" id="S2.T2.1.1.7.1" style="padding-left:5.0pt;padding-right:5.0pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.7.1.1">Iter2</span>
</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.7.2" style="padding-left:5.0pt;padding-right:5.0pt;">9.3</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.7.3" style="padding-left:5.0pt;padding-right:5.0pt;">6.4</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.7.4" style="padding-left:5.0pt;padding-right:5.0pt;">4.3</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.7.5" style="padding-left:5.0pt;padding-right:5.0pt;">7.7</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.7.6" style="padding-left:5.0pt;padding-right:5.0pt;">4.7</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.7.7" style="padding-left:5.0pt;padding-right:5.0pt;">6.2</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.8">
<td class="ltx_td ltx_align_left" id="S2.T2.1.1.8.1" style="padding-left:5.0pt;padding-right:5.0pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.8.1.1">Iter3</span>
</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.8.2" style="padding-left:5.0pt;padding-right:5.0pt;">10.6</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.8.3" style="padding-left:5.0pt;padding-right:5.0pt;">7.5</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.8.4" style="padding-left:5.0pt;padding-right:5.0pt;">7.9</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.8.5" style="padding-left:5.0pt;padding-right:5.0pt;">13.8</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.8.6" style="padding-left:5.0pt;padding-right:5.0pt;">8.2</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.8.7" style="padding-left:5.0pt;padding-right:5.0pt;">8.4</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.9">
<td class="ltx_td ltx_align_left" id="S2.T2.1.1.9.1" style="padding-left:5.0pt;padding-right:5.0pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.9.1.1">Iter4</span>
</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.9.2" style="padding-left:5.0pt;padding-right:5.0pt;">11.6</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.9.3" style="padding-left:5.0pt;padding-right:5.0pt;">8.0</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.9.4" style="padding-left:5.0pt;padding-right:5.0pt;">9.6</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.9.5" style="padding-left:5.0pt;padding-right:5.0pt;">14.2</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.9.6" style="padding-left:5.0pt;padding-right:5.0pt;">8.4</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.9.7" style="padding-left:5.0pt;padding-right:5.0pt;">10.4</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.10">
<td class="ltx_td ltx_align_left ltx_border_t" id="S2.T2.1.1.10.1" style="padding-left:5.0pt;padding-right:5.0pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.10.1.1">Iter1</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.10.2" style="padding-left:5.0pt;padding-right:5.0pt;">19.5</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.10.3" style="padding-left:5.0pt;padding-right:5.0pt;">19.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.10.4" style="padding-left:5.0pt;padding-right:5.0pt;">11.9</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.10.5" style="padding-left:5.0pt;padding-right:5.0pt;">20.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.10.6" style="padding-left:5.0pt;padding-right:5.0pt;">20.3</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.10.7" style="padding-left:5.0pt;padding-right:5.0pt;">20.8</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.11">
<td class="ltx_td ltx_align_left" id="S2.T2.1.1.11.1" style="padding-left:5.0pt;padding-right:5.0pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.11.1.1">Iter2</span>
</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.11.2" style="padding-left:5.0pt;padding-right:5.0pt;">22.4</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.11.3" style="padding-left:5.0pt;padding-right:5.0pt;">23.5</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.11.4" style="padding-left:5.0pt;padding-right:5.0pt;">19.2</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.11.5" style="padding-left:5.0pt;padding-right:5.0pt;">21.7</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.11.6" style="padding-left:5.0pt;padding-right:5.0pt;">22.4</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.11.7" style="padding-left:5.0pt;padding-right:5.0pt;">20.5</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.12">
<td class="ltx_td ltx_align_left" id="S2.T2.1.1.12.1" style="padding-left:5.0pt;padding-right:5.0pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.12.1.1">Iter3</span>
</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.12.2" style="padding-left:5.0pt;padding-right:5.0pt;">24.6</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.12.3" style="padding-left:5.0pt;padding-right:5.0pt;">26.3</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.12.4" style="padding-left:5.0pt;padding-right:5.0pt;">20.8</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.12.5" style="padding-left:5.0pt;padding-right:5.0pt;">22.4</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.12.6" style="padding-left:5.0pt;padding-right:5.0pt;">24.1</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.12.7" style="padding-left:5.0pt;padding-right:5.0pt;">23.8</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.13">
<td class="ltx_td ltx_align_left" id="S2.T2.1.1.13.1" style="padding-left:5.0pt;padding-right:5.0pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.13.1.1">Iter4</span>
</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.13.2" style="padding-left:5.0pt;padding-right:5.0pt;">26.1</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.13.3" style="padding-left:5.0pt;padding-right:5.0pt;">28.0</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.13.4" style="padding-left:5.0pt;padding-right:5.0pt;">21.1</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.13.5" style="padding-left:5.0pt;padding-right:5.0pt;">24.8</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.13.6" style="padding-left:5.0pt;padding-right:5.0pt;">25.6</td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.13.7" style="padding-left:5.0pt;padding-right:5.0pt;">25.0</td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.14" style="background-color:#E6E6E6;">
<td class="ltx_td ltx_align_left ltx_border_t" id="S2.T2.1.1.14.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S2.T2.1.1.14.1.1" style="background-color:#E6E6E6;">SynPO<span class="ltx_text ltx_font_upright" id="S2.T2.1.1.14.1.1.1">   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.14.1.1.1.1">Iter1</span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.14.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.14.2.1" style="background-color:#E6E6E6;">13.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.14.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.14.3.1" style="background-color:#E6E6E6;">15.3</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.14.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.14.4.1" style="background-color:#E6E6E6;">9.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.14.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.14.5.1" style="background-color:#E6E6E6;">10.6</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.14.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.14.6.1" style="background-color:#E6E6E6;">10.7</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S2.T2.1.1.14.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.14.7.1" style="background-color:#E6E6E6;">11.6</span></td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.15" style="background-color:#D6D6D6;">
<td class="ltx_td ltx_align_left" id="S2.T2.1.1.15.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S2.T2.1.1.15.1.1" style="background-color:#D6D6D6;">SynPO<span class="ltx_text ltx_font_upright" id="S2.T2.1.1.15.1.1.1">   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.15.1.1.1.1">Iter2</span></span></span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.15.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.15.2.1" style="background-color:#D6D6D6;">25.7</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.15.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.15.3.1" style="background-color:#D6D6D6;">28.1</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.15.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.15.4.1" style="background-color:#D6D6D6;">20.8</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.15.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.15.5.1" style="background-color:#D6D6D6;">23.4</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.15.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.15.6.1" style="background-color:#D6D6D6;">24.1</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.15.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.15.7.1" style="background-color:#D6D6D6;">24.6</span></td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.16" style="background-color:#C4C4C4;">
<td class="ltx_td ltx_align_left" id="S2.T2.1.1.16.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S2.T2.1.1.16.1.1" style="background-color:#C4C4C4;">SynPO<span class="ltx_text ltx_font_upright" id="S2.T2.1.1.16.1.1.1">   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.16.1.1.1.1">Iter3</span></span></span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.16.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.16.2.1" style="background-color:#C4C4C4;">31.7</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.16.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.16.3.1" style="background-color:#C4C4C4;">33.8</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.16.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.16.4.1" style="background-color:#C4C4C4;">24.1</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.16.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.16.5.1" style="background-color:#C4C4C4;">28.6</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.16.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.16.6.1" style="background-color:#C4C4C4;">31.5</span></td>
<td class="ltx_td ltx_align_center" id="S2.T2.1.1.16.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.16.7.1" style="background-color:#C4C4C4;">32.5</span></td>
</tr>
<tr class="ltx_tr" id="S2.T2.1.1.17" style="background-color:#B3B3B3;">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S2.T2.1.1.17.1" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S2.T2.1.1.17.1.1" style="background-color:#B3B3B3;">SynPO<span class="ltx_text ltx_font_upright" id="S2.T2.1.1.17.1.1.1">   <span class="ltx_text ltx_font_italic" id="S2.T2.1.1.17.1.1.1.1">Iter4</span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S2.T2.1.1.17.2" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.17.2.1" style="background-color:#B3B3B3;">34.0</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S2.T2.1.1.17.3" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.17.3.1" style="background-color:#B3B3B3;">36.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S2.T2.1.1.17.4" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.17.4.1" style="background-color:#B3B3B3;">22.8</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S2.T2.1.1.17.5" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.17.5.1" style="background-color:#B3B3B3;">32.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S2.T2.1.1.17.6" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text ltx_font_bold" id="S2.T2.1.1.17.6.1" style="background-color:#B3B3B3;">33.6</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S2.T2.1.1.17.7" style="padding-left:5.0pt;padding-right:5.0pt;"><span class="ltx_text" id="S2.T2.1.1.17.7.1" style="background-color:#B3B3B3;">31.4</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Results on AlpacaEval 2.0 and Arena-Hard. LC and WR denote length-controlled and raw win rates, respectively. After four <span class="ltx_text ltx_font_smallcaps" id="S2.T2.4.1">SynPO</span> iterations, Mistral-Base and Llama3-Base increase LC by 27.4% and 26.7%, respectively, on AlpacaEval 2.0. In Arena-Hard, <span class="ltx_text ltx_font_smallcaps" id="S2.T2.5.2">SynPO</span> achieves the highest WR by the third iteration, improving both models by over 22.1%.
</figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Experiments</h2>
<div class="ltx_para ltx_noindent" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">We carry out comprehensive experiments to demonstrate the effectiveness of SynPO in enhancing model alignment and improving general model performance.</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Experimental Setup</h3>
<section class="ltx_paragraph" id="S3.SS1.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Models and Training</h4>
<div class="ltx_para ltx_noindent" id="S3.SS1.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS1.SSS0.Px1.p1.2">We perform synthetic preference optimization on both Mistral-Base 7B and Llama3-8B Base.
Following <cite class="ltx_cite ltx_citemacro_citet">Meng et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite>, we employ supervised fine-tuned models as the initial models. Specifically, the Mistral-Base 7B model (mistralai/Mistral-7B-v0.1) and the Llama3-8B Base model (meta-llama/Meta-Llama-3-8B-Base) were fine-tuned on the UltraChat-200k dataset as part of the Zephyr <cite class="ltx_cite ltx_citemacro_citep">(Tunstall et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib56" title="">2023</a>)</cite> training pipeline.<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/alignment-handbook/zephyr-7b-sft-full" title="">https://huggingface.co/alignment-handbook/zephyr-7b-sft-full</a> and <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/princeton-nlp/Llama-3-Base-8B-SFT" title="">https://huggingface.co/princeton-nlp/Llama-3-Base-8B-SFT</a></span></span></span>
Subsequently, we utilize 18k seed data to SFT the self-prompt generator and then generate 50k synthetic prompts per iteration. For data filtering, we employ the 0.4B PairRM <cite class="ltx_cite ltx_citemacro_citep">(Jiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib28" title="">2023</a>)</cite> as a small pairwise scoring model for the Mistral-Base 7B. For Llama3-Base 8B, we use Llama3 itself (ArmoRM-Llama3-8B-v0.1<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/RLHFlow/ArmoRM-Llama3-8B-v0.1" title="">https://huggingface.co/RLHFlow/ArmoRM-Llama3-8B-v0.1</a></span></span></span>) as a scoring model for data filtering, given its superior alignment with human scoring <cite class="ltx_cite ltx_citemacro_citep">(Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite>.
In each iteration <math alttext="t=1,\ldots,T" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.1.m1.3"><semantics id="S3.SS1.SSS0.Px1.p1.1.m1.3a"><mrow id="S3.SS1.SSS0.Px1.p1.1.m1.3.4" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.cmml"><mi id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.2" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.2.cmml">t</mi><mo id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.1" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.1.cmml">=</mo><mrow id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.3.2" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.3.1.cmml"><mn id="S3.SS1.SSS0.Px1.p1.1.m1.1.1" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.cmml">1</mn><mo id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.3.2.1" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.3.1.cmml">,</mo><mi id="S3.SS1.SSS0.Px1.p1.1.m1.2.2" mathvariant="normal" xref="S3.SS1.SSS0.Px1.p1.1.m1.2.2.cmml">…</mi><mo id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.3.2.2" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.3.1.cmml">,</mo><mi id="S3.SS1.SSS0.Px1.p1.1.m1.3.3" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.3.cmml">T</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.1.m1.3b"><apply id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4"><eq id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.1.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.1"></eq><ci id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.2.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.2">𝑡</ci><list id="S3.SS1.SSS0.Px1.p1.1.m1.3.4.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.4.3.2"><cn id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.cmml" type="integer" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1">1</cn><ci id="S3.SS1.SSS0.Px1.p1.1.m1.2.2.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.2.2">…</ci><ci id="S3.SS1.SSS0.Px1.p1.1.m1.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.3.3">𝑇</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.1.m1.3c">t=1,\ldots,T</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS0.Px1.p1.1.m1.3d">italic_t = 1 , … , italic_T</annotation></semantics></math>, we use model <math alttext="\pi_{\theta_{t-1}}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.2.m2.1"><semantics id="S3.SS1.SSS0.Px1.p1.2.m2.1a"><msub id="S3.SS1.SSS0.Px1.p1.2.m2.1.1" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.cmml"><mi id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.2" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.2.cmml">π</mi><msub id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.cmml"><mi id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.2" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.2.cmml">θ</mi><mrow id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.cmml"><mi id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.2" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.2.cmml">t</mi><mo id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.1" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.1.cmml">−</mo><mn id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.3" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.3.cmml">1</mn></mrow></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.2.m2.1b"><apply id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.2">𝜋</ci><apply id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3">subscript</csymbol><ci id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.2">𝜃</ci><apply id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3"><minus id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.1"></minus><ci id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.2">𝑡</ci><cn id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.3.cmml" type="integer" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.3.3.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.2.m2.1c">\pi_{\theta_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.SSS0.Px1.p1.2.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> from the previous iteration to generate synthetic preference data and then preference optimize the initial models again.
More details on training parameters, filtering thresholds, and implementation environments are provided in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3" title="Appendix C Experimental Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">C</span></a>.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS1.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Seed Data Construction</h4>
<div class="ltx_para ltx_noindent" id="S3.SS1.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS1.SSS0.Px2.p1.1">We randomly sample UltraFeedback <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>)</cite> prompts and their GPT-4 Turbo completions as our seed data.
The seed data is multipurposely transformed for the training of self-prompt generator, response improver, and the validation of synthetic preference optimization.
The complete UltraFeedback dataset contains 61k instructions from sources including TruthfulQA <cite class="ltx_cite ltx_citemacro_citep">(Lin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib35" title="">2021</a>)</cite>, FalseQA <cite class="ltx_cite ltx_citemacro_citep">(Hu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib25" title="">2023</a>)</cite>, Evol-Instruct <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib61" title="">2023a</a>)</cite>, UltraChat <cite class="ltx_cite ltx_citemacro_citep">(Ding et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib15" title="">2023</a>)</cite>, and ShareGPT <cite class="ltx_cite ltx_citemacro_citep">(Chiang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib10" title="">2023</a>)</cite>.
To construct seed SFT data with high-quality responses, we randomly sampled 18k prompts and obtained the corresponding completions generated by GPT-4 Turbo.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS1.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">Baselines</h4>
<div class="ltx_para ltx_noindent" id="S3.SS1.SSS0.Px3.p1">
<p class="ltx_p" id="S3.SS1.SSS0.Px3.p1.1">As baselines, we use the initial supervised fine-tuned models and those optimized with data from various preference construction methods, including manual collection and iterative approaches.
We recognize the UltraFeedback preference data <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>)</cite> as a product of manual collection. It is gathered from six high-quality datasets and various models, with preferences annotated by GPT-4 <cite class="ltx_cite ltx_citemacro_citep">(Achiam et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib1" title="">2023</a>)</cite>.
For iterative construction approaches, we involve Sampling-Ranking and Self-Rewarding. For Sampling-Ranking, similar to <cite class="ltx_cite ltx_citemacro_citet">Meng et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite> and <cite class="ltx_cite ltx_citemacro_citet">Wu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib60" title="">2024b</a>)</cite>, we involves LLMs in sampling five responses per prompt in each iteration. The same scoring models, i.e., PairRM and ArmoRM-Llama3-8B-v0.1, are then used to select the highest and lowest scoring responses as the chosen and rejected responses, respectively.
For the Self-Rewarding method <cite class="ltx_cite ltx_citemacro_citep">(Yuan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib64" title="">2024</a>)</cite>, we generate preference data based on model’s own rewards via LLM-as-a-Judge prompting. We employ our 18k seed data as the initial instruction-following data. Given that Self-Rewarding requires additional LLM-as-a-Judge training data, we generate 16k seed data with GPT-4 Turbo.
For all settings, we adopt SimPO <cite class="ltx_cite ltx_citemacro_citep">(Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite> for preference optimization.
More detailed are elaborated in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A3.SS5" title="C.5 Baselines ‣ Appendix C Experimental Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">C.5</span></a>.</p>
</div>
<figure class="ltx_table" id="S3.T3">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_bottom" id="S3.T3.fig1" style="width:216.8pt;">
<div class="ltx_inline-block ltx_transformed_outer" id="S3.T3.fig1.1" style="width:393.5pt;height:273.2pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(67.1pt,-46.6pt) scale(1.5180476224533,1.5180476224533) ;">
<table class="ltx_tabular ltx_align_middle" id="S3.T3.fig1.1.1">
<tr class="ltx_tr" id="S3.T3.fig1.1.1.1">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S3.T3.fig1.1.1.1.1" rowspan="2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.1.1.1">Data Construction</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S3.T3.fig1.1.1.1.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.1.2.1">Mistral-Base</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S3.T3.fig1.1.1.1.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.1.3.1">Llama3-Base</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.2.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.2.1.1">Turn 1</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.2.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.2.2.1">Turn 2</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.2.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.2.3.1">Turn 1</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.2.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.2.4.1">Turn 2</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.3">
<td class="ltx_td ltx_align_left ltx_border_t" id="S3.T3.fig1.1.1.3.1" style="padding-left:2.0pt;padding-right:2.0pt;">SFT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.3.2" style="padding-left:2.0pt;padding-right:2.0pt;">6.04</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.3.3" style="padding-left:2.0pt;padding-right:2.0pt;">5.65</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.3.4" style="padding-left:2.0pt;padding-right:2.0pt;">6.55</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.3.5" style="padding-left:2.0pt;padding-right:2.0pt;">5.36</td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.4">
<td class="ltx_td ltx_align_left ltx_border_t" id="S3.T3.fig1.1.1.4.1" style="padding-left:2.0pt;padding-right:2.0pt;">Manual Collection</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.4.2" style="padding-left:2.0pt;padding-right:2.0pt;">6.73</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.4.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.4.3.1">6.82</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.4.4" style="padding-left:2.0pt;padding-right:2.0pt;">7.29</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T3.fig1.1.1.4.5" style="padding-left:2.0pt;padding-right:2.0pt;">7.00</td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.5">
<td class="ltx_td ltx_align_left" id="S3.T3.fig1.1.1.5.1" style="padding-left:2.0pt;padding-right:2.0pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S3.T3.fig1.1.1.5.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.5.2" style="padding-left:2.0pt;padding-right:2.0pt;">6.83</td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.5.3" style="padding-left:2.0pt;padding-right:2.0pt;">6.18</td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.5.4" style="padding-left:2.0pt;padding-right:2.0pt;">7.06</td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.5.5" style="padding-left:2.0pt;padding-right:2.0pt;">6.99</td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.6">
<td class="ltx_td ltx_align_left" id="S3.T3.fig1.1.1.6.1" style="padding-left:2.0pt;padding-right:2.0pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S3.T3.fig1.1.1.6.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.6.2" style="padding-left:2.0pt;padding-right:2.0pt;">6.71</td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.6.3" style="padding-left:2.0pt;padding-right:2.0pt;">6.63</td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.6.4" style="padding-left:2.0pt;padding-right:2.0pt;">7.30</td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.6.5" style="padding-left:2.0pt;padding-right:2.0pt;">7.28</td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.7" style="background-color:#E6E6E6;">
<td class="ltx_td ltx_align_left" id="S3.T3.fig1.1.1.7.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.fig1.1.1.7.1.1" style="background-color:#E6E6E6;">SynPO<span class="ltx_text ltx_font_upright" id="S3.T3.fig1.1.1.7.1.1.1">  <span class="ltx_text ltx_font_italic" id="S3.T3.fig1.1.1.7.1.1.1.1">Iter1</span></span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.7.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.7.2.1" style="background-color:#E6E6E6;">6.53</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.7.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.7.3.1" style="background-color:#E6E6E6;">6.41</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.7.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.7.4.1" style="background-color:#E6E6E6;">6.99</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.7.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.7.5.1" style="background-color:#E6E6E6;">6.65</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.8" style="background-color:#D6D6D6;">
<td class="ltx_td ltx_align_left" id="S3.T3.fig1.1.1.8.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.fig1.1.1.8.1.1" style="background-color:#D6D6D6;">SynPO<span class="ltx_text ltx_font_upright" id="S3.T3.fig1.1.1.8.1.1.1">  <span class="ltx_text ltx_font_italic" id="S3.T3.fig1.1.1.8.1.1.1.1">Iter2</span></span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.8.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.8.2.1" style="background-color:#D6D6D6;">6.66</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.8.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.8.3.1" style="background-color:#D6D6D6;">6.65</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.8.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.8.4.1" style="background-color:#D6D6D6;">7.34</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.8.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.8.5.1" style="background-color:#D6D6D6;">7.30</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.9" style="background-color:#C4C4C4;">
<td class="ltx_td ltx_align_left" id="S3.T3.fig1.1.1.9.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.fig1.1.1.9.1.1" style="background-color:#C4C4C4;">SynPO<span class="ltx_text ltx_font_upright" id="S3.T3.fig1.1.1.9.1.1.1">  <span class="ltx_text ltx_font_italic" id="S3.T3.fig1.1.1.9.1.1.1.1">Iter3</span></span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.9.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.9.2.1" style="background-color:#C4C4C4;">6.86</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.9.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.9.3.1" style="background-color:#C4C4C4;">6.82</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.9.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.9.4.1" style="background-color:#C4C4C4;">7.34</span></td>
<td class="ltx_td ltx_align_center" id="S3.T3.fig1.1.1.9.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.9.5.1" style="background-color:#C4C4C4;">7.34</span></td>
</tr>
<tr class="ltx_tr" id="S3.T3.fig1.1.1.10" style="background-color:#B3B3B3;">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S3.T3.fig1.1.1.10.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_smallcaps" id="S3.T3.fig1.1.1.10.1.1" style="background-color:#B3B3B3;">SynPO<span class="ltx_text ltx_font_upright" id="S3.T3.fig1.1.1.10.1.1.1">  <span class="ltx_text ltx_font_italic" id="S3.T3.fig1.1.1.10.1.1.1.1">Iter4</span></span></span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.fig1.1.1.10.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.10.2.1" style="background-color:#B3B3B3;">6.73</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.fig1.1.1.10.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.10.3.1" style="background-color:#B3B3B3;">6.69</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.fig1.1.1.10.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S3.T3.fig1.1.1.10.4.1" style="background-color:#B3B3B3;">7.43</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T3.fig1.1.1.10.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text" id="S3.T3.fig1.1.1.10.5.1" style="background-color:#B3B3B3;">7.04</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Table 3: </span>Multi-turn evaluation on MT-Bench. An asterisk (*) denotes the best score across multiple iterations. For Sampling-Ranking, Llama’s best is from iteration 4 and Mistral’s from iteration 3. For Self-Rewarding, both are from iteration 3. <span class="ltx_text ltx_font_smallcaps" id="S3.T3.fig1.3.1">SynPO</span> progressively enhances the multi-turn instruction-following capabilities of LLMs.
</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_bottom" id="S3.T3.1" style="width:195.1pt;"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="538" id="S3.T3.1.g1" src="x5.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>Radar chart for Llama3-8B-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.3.1">SynPO</span> on MT-Bench. <span class="ltx_text ltx_font_smallcaps" id="S3.T3.1.4.2">SynPO</span> achieves notable improvements across various prompt categories, particularly in RolePlay, STEM, Reasoning, and Coding tasks.</figcaption>
</figure>
</div>
</div>
</figure>
</section>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Preference Alignment</h3>
<div class="ltx_para ltx_noindent" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">We evaluate the model alignment performance on three benchmarks: AlpacaEval 2.0 <cite class="ltx_cite ltx_citemacro_citep">(Dubois et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib17" title="">2024</a>)</cite>, Arena-Hard <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib32" title="">2024c</a>)</cite>, and MT-Bench <cite class="ltx_cite ltx_citemacro_citep">(Zheng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib67" title="">2024</a>)</cite>.
AlpacaEval 2.0 includes 805 user prompts and utilizes pair-wise comparison with LLM-as-a-Judge. Specifically, the win rate against the baseline GPT-4 Turbo model is determined based on GPT-4 Turbo evaluation.
Arena-Hard includes 500 more challenging user queries, employing GPT-4-Turbo to judge the model responses against GPT-4.
MT-Bench features 80 multi-turn questions spanning various domains, with GPT-4 scoring the model responses out of 10.<span class="ltx_note ltx_role_footnote" id="footnote4"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>More details on API usage for LLM judgement are listed in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A5" title="Appendix E API Usage ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">E</span></a> and <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A7" title="Appendix G Evaluation Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">G</span></a>.</span></span></span></p>
</div>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Single-Turn Dialogues</h4>
<div class="ltx_para ltx_noindent" id="S3.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px1.p1.1">We compare the instruction-following and human preference alignment capabilities on AlpacaEval 2.0 <cite class="ltx_cite ltx_citemacro_citep">(Dubois et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib17" title="">2024</a>)</cite> and Arena-Hard <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib32" title="">2024c</a>)</cite> in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.T2" title="Table 2 ‣ 2.3 Synthetic Preference Optimization ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">2</span></a>. Compared to the initial model post-SFT, SynPO shows sustained improvement over four iterations in win rate against GPT-4 Turbo or GPT-4. On AlpacaEval 2.0, Mistral-Base achieves a 27.4% increase in length-controlled win rate and a 32.8% increase in raw win rate after four iterations. Similarly, Llama3 exhibits a 26.7% rise in length-controlled win rate and a 30.5% improvement in raw win rate after the same number of iterations. In the more challenging Arena-Hard setting, SynPO reaches the highest win rate after the third iteration.
Compared to the baseline methods, SynPO’s iterative preference learning on synthetic data yielded more significant improvements.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS2.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Multi-Turn Dialogues</h4>
<div class="ltx_para ltx_noindent" id="S3.SS2.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS2.SSS0.Px2.p1.1">For the multi-turn benchmark MT-Bench, we report both the first-turn and second-turn scores (in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.T3" title="Table 3 ‣ Baselines ‣ 3.1 Experimental Setup ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">3</span></a>) as well as a radar chart depicting performance across different question types (refer to Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.T3" title="Table 3 ‣ Baselines ‣ 3.1 Experimental Setup ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">3</span></a>).<span class="ltx_note ltx_role_footnote" id="footnote5"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_tag ltx_tag_note">5</span>Similar results for Mistral-7B are shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A7.F10" title="Figure 10 ‣ Appendix G Evaluation Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">10</span></a> in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A7" title="Appendix G Evaluation Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">G</span></a>.</span></span></span> The results indicate that SynPO enhances not only first-turn performance, with an increase of over 0.7 points, but also subsequent turns, with an increase of over 1.2 points. Compared to the initial model, SynPO shows improved performance across various question types, particularly in humanities, writing, STEM, and roleplaying.</p>
</div>
<figure class="ltx_table" id="S3.T4">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S3.T4.1" style="width:377.6pt;height:271.9pt;vertical-align:-0.9pt;"><span class="ltx_transformed_inner" style="transform:translate(-24.4pt,17.5pt) scale(0.885683679545571,0.885683679545571) ;">
<table class="ltx_tabular ltx_align_middle" id="S3.T4.1.1">
<tr class="ltx_tr" id="S3.T4.1.1.1">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_tt" id="S3.T4.1.1.1.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.1.1.1">Model</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T4.1.1.1.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.1.2.1">Arc</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T4.1.1.1.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.1.3.1">HellaSwag</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T4.1.1.1.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.1.4.1">TQA</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T4.1.1.1.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.1.5.1">MMLU</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T4.1.1.1.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.1.6.1">Winogrande</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T4.1.1.1.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.1.7.1">GSM8k</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T4.1.1.1.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.1.8.1">Average</span></td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.2">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S3.T4.1.1.2.1" style="padding-left:3.5pt;padding-right:3.5pt;">Mistral-Base-SFT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.2.2" style="padding-left:3.5pt;padding-right:3.5pt;">58.02</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.2.3" style="padding-left:3.5pt;padding-right:3.5pt;">80.89</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.2.4" style="padding-left:3.5pt;padding-right:3.5pt;">40.37</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.2.5" style="padding-left:3.5pt;padding-right:3.5pt;">58.78</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.2.6" style="padding-left:3.5pt;padding-right:3.5pt;">76.40</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.2.7" style="padding-left:3.5pt;padding-right:3.5pt;">34.72</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.2.8" style="padding-left:3.5pt;padding-right:3.5pt;">58.20</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.3">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S3.T4.1.1.3.1" style="padding-left:3.5pt;padding-right:3.5pt;">Manual Collection</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.3.2" style="padding-left:3.5pt;padding-right:3.5pt;">62.71</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.3.3" style="padding-left:3.5pt;padding-right:3.5pt;">83.39</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.3.4" style="padding-left:3.5pt;padding-right:3.5pt;">50.69</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.3.5" style="padding-left:3.5pt;padding-right:3.5pt;">58.47</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.3.6" style="padding-left:3.5pt;padding-right:3.5pt;">77.35</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.3.7" style="padding-left:3.5pt;padding-right:3.5pt;">32.83</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.3.8" style="padding-left:3.5pt;padding-right:3.5pt;">60.91</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.4">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.4.1" style="padding-left:3.5pt;padding-right:3.5pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.4.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.4.2" style="padding-left:3.5pt;padding-right:3.5pt;">60.32</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.4.3" style="padding-left:3.5pt;padding-right:3.5pt;">81.80</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.4.4" style="padding-left:3.5pt;padding-right:3.5pt;">44.43</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.4.5" style="padding-left:3.5pt;padding-right:3.5pt;">59.09</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.4.6" style="padding-left:3.5pt;padding-right:3.5pt;">76.95</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.4.7" style="padding-left:3.5pt;padding-right:3.5pt;">36.85</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.4.8" style="padding-left:3.5pt;padding-right:3.5pt;">59.91</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.5">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.5.1" style="padding-left:3.5pt;padding-right:3.5pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.5.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.5.2" style="padding-left:3.5pt;padding-right:3.5pt;">60.15</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.5.3" style="padding-left:3.5pt;padding-right:3.5pt;">81.84</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.5.4" style="padding-left:3.5pt;padding-right:3.5pt;">43.25</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.5.5" style="padding-left:3.5pt;padding-right:3.5pt;">58.98</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.5.6" style="padding-left:3.5pt;padding-right:3.5pt;">76.48</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.5.7" style="padding-left:3.5pt;padding-right:3.5pt;">34.72</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.5.8" style="padding-left:3.5pt;padding-right:3.5pt;">59.24</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.6" style="background-color:#E6E6E6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.6.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.6.1.1" style="background-color:#E6E6E6;">Mistral-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T4.1.1.6.1.1.1">SynPO</span>   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.6.1.1.2">Iter1</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.6.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.6.2.1" style="background-color:#E6E6E6;">60.49</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.6.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.6.3.1" style="background-color:#E6E6E6;">82.25</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.6.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.6.4.1" style="background-color:#E6E6E6;">50.36</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.6.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.6.5.1" style="background-color:#E6E6E6;">59.00</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.6.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.6.6.1" style="background-color:#E6E6E6;">76.48</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.6.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.6.7.1" style="background-color:#E6E6E6;">36.39</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.6.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.6.8.1" style="background-color:#E6E6E6;">60.83</span></td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.7" style="background-color:#D6D6D6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.7.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.7.1.1" style="background-color:#D6D6D6;">Mistral-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T4.1.1.7.1.1.1">SynPO</span>   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.7.1.1.2">Iter2</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.7.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.7.2.1" style="background-color:#D6D6D6;">63.65</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.7.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.7.3.1" style="background-color:#D6D6D6;">83.24</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.7.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.7.4.1" style="background-color:#D6D6D6;">58.04</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.7.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.7.5.1" style="background-color:#D6D6D6;">58.74</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.7.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.7.6.1" style="background-color:#D6D6D6;">76.48</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.7.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.7.7.1" style="background-color:#D6D6D6;">27.35</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.7.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.7.8.1" style="background-color:#D6D6D6;">61.25</span></td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.8" style="background-color:#C4C4C4;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.8.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.8.1.1" style="background-color:#C4C4C4;">Mistral-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T4.1.1.8.1.1.1">SynPO</span>   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.8.1.1.2">Iter3</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.8.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.8.2.1" style="background-color:#C4C4C4;">63.54</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.8.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.8.3.1" style="background-color:#C4C4C4;">83.14</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.8.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.8.4.1" style="background-color:#C4C4C4;">58.11</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.8.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.8.5.1" style="background-color:#C4C4C4;">58.37</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.8.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.8.6.1" style="background-color:#C4C4C4;">75.77</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.8.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.8.7.1" style="background-color:#C4C4C4;">25.26</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.8.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.8.8.1" style="background-color:#C4C4C4;">60.70</span></td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.9" style="background-color:#B3B3B3;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.9.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.9.1.1" style="background-color:#B3B3B3;">Mistral-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T4.1.1.9.1.1.1">SynPO</span>   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.9.1.1.2">Iter4</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.9.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.9.2.1" style="background-color:#B3B3B3;">63.57</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.9.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.9.3.1" style="background-color:#B3B3B3;">83.04</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.9.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.9.4.1" style="background-color:#B3B3B3;">56.12</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.9.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.9.5.1" style="background-color:#B3B3B3;">58.75</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.9.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.9.6.1" style="background-color:#B3B3B3;">75.77</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.9.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.9.7.1" style="background-color:#B3B3B3;">31.08</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.9.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.9.8.1" style="background-color:#B3B3B3;">61.39</span></td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.10">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S3.T4.1.1.10.1" style="padding-left:3.5pt;padding-right:3.5pt;">LLama3-Base-SFT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.10.2" style="padding-left:3.5pt;padding-right:3.5pt;">60.92</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.10.3" style="padding-left:3.5pt;padding-right:3.5pt;">81.28</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.10.4" style="padding-left:3.5pt;padding-right:3.5pt;">45.37</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.10.5" style="padding-left:3.5pt;padding-right:3.5pt;">63.80</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.10.6" style="padding-left:3.5pt;padding-right:3.5pt;">76.72</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.10.7" style="padding-left:3.5pt;padding-right:3.5pt;">51.93</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.10.8" style="padding-left:3.5pt;padding-right:3.5pt;">63.34</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.11">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S3.T4.1.1.11.1" style="padding-left:3.5pt;padding-right:3.5pt;">Manual Collection</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.11.2" style="padding-left:3.5pt;padding-right:3.5pt;">66.72</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.11.3" style="padding-left:3.5pt;padding-right:3.5pt;">82.89</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.11.4" style="padding-left:3.5pt;padding-right:3.5pt;">59.47</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.11.5" style="padding-left:3.5pt;padding-right:3.5pt;">63.10</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.11.6" style="padding-left:3.5pt;padding-right:3.5pt;">77.82</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.11.7" style="padding-left:3.5pt;padding-right:3.5pt;">45.72</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T4.1.1.11.8" style="padding-left:3.5pt;padding-right:3.5pt;">65.95</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.12">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.12.1" style="padding-left:3.5pt;padding-right:3.5pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.12.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.12.2" style="padding-left:3.5pt;padding-right:3.5pt;">66.38</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.12.3" style="padding-left:3.5pt;padding-right:3.5pt;">82.71</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.12.4" style="padding-left:3.5pt;padding-right:3.5pt;">59.84</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.12.5" style="padding-left:3.5pt;padding-right:3.5pt;">63.37</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.12.6" style="padding-left:3.5pt;padding-right:3.5pt;">77.27</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.12.7" style="padding-left:3.5pt;padding-right:3.5pt;">54.40</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.12.8" style="padding-left:3.5pt;padding-right:3.5pt;">67.33</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.13">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.13.1" style="padding-left:3.5pt;padding-right:3.5pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.13.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.13.2" style="padding-left:3.5pt;padding-right:3.5pt;">64.76</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.13.3" style="padding-left:3.5pt;padding-right:3.5pt;">82.48</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.13.4" style="padding-left:3.5pt;padding-right:3.5pt;">55.54</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.13.5" style="padding-left:3.5pt;padding-right:3.5pt;">63.42</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.13.6" style="padding-left:3.5pt;padding-right:3.5pt;">77.03</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.13.7" style="padding-left:3.5pt;padding-right:3.5pt;">54.59</td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.13.8" style="padding-left:3.5pt;padding-right:3.5pt;">66.30</td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.14" style="background-color:#E6E6E6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.14.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.14.1.1" style="background-color:#E6E6E6;">LLama3-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T4.1.1.14.1.1.1">SynPO</span>   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.14.1.1.2">Iter1</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.14.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.14.2.1" style="background-color:#E6E6E6;">63.99</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.14.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.14.3.1" style="background-color:#E6E6E6;">82.66</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.14.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.14.4.1" style="background-color:#E6E6E6;">54.20</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.14.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.14.5.1" style="background-color:#E6E6E6;">64.02</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.14.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.14.6.1" style="background-color:#E6E6E6;">77.51</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.14.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.14.7.1" style="background-color:#E6E6E6;">56.10</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.14.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.14.8.1" style="background-color:#E6E6E6;">66.41</span></td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.15" style="background-color:#D6D6D6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.15.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.15.1.1" style="background-color:#D6D6D6;">LLama3-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T4.1.1.15.1.1.1">SynPO</span>   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.15.1.1.2">Iter2</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.15.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.15.2.1" style="background-color:#D6D6D6;">65.70</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.15.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.15.3.1" style="background-color:#D6D6D6;">83.22</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.15.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.15.4.1" style="background-color:#D6D6D6;">61.73</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.15.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.15.5.1" style="background-color:#D6D6D6;">64.03</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.15.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.15.6.1" style="background-color:#D6D6D6;">76.56</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.15.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.15.7.1" style="background-color:#D6D6D6;">56.25</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.15.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.15.8.1" style="background-color:#D6D6D6;">67.92</span></td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.16" style="background-color:#C4C4C4;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T4.1.1.16.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.16.1.1" style="background-color:#C4C4C4;">LLama3-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T4.1.1.16.1.1.1">SynPO</span>   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.16.1.1.2">Iter3</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.16.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.16.2.1" style="background-color:#C4C4C4;">66.55</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.16.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.16.3.1" style="background-color:#C4C4C4;">83.57</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.16.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.16.4.1" style="background-color:#C4C4C4;">63.53</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.16.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.16.5.1" style="background-color:#C4C4C4;">63.91</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.16.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.16.6.1" style="background-color:#C4C4C4;">76.80</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.16.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.16.7.1" style="background-color:#C4C4C4;">55.27</span></td>
<td class="ltx_td ltx_align_center" id="S3.T4.1.1.16.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.16.8.1" style="background-color:#C4C4C4;">68.27</span></td>
</tr>
<tr class="ltx_tr" id="S3.T4.1.1.17" style="background-color:#B3B3B3;">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_r" id="S3.T4.1.1.17.1" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.17.1.1" style="background-color:#B3B3B3;">LLama3-Base-<span class="ltx_text ltx_font_smallcaps" id="S3.T4.1.1.17.1.1.1">SynPO</span>   <span class="ltx_text ltx_font_italic" id="S3.T4.1.1.17.1.1.2">Iter4</span></span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T4.1.1.17.2" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.17.2.1" style="background-color:#B3B3B3;">66.47</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T4.1.1.17.3" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.17.3.1" style="background-color:#B3B3B3;">83.44</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T4.1.1.17.4" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.17.4.1" style="background-color:#B3B3B3;">63.69</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T4.1.1.17.5" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.17.5.1" style="background-color:#B3B3B3;">63.79</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T4.1.1.17.6" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.17.6.1" style="background-color:#B3B3B3;">76.90</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T4.1.1.17.7" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text" id="S3.T4.1.1.17.7.1" style="background-color:#B3B3B3;">55.72</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T4.1.1.17.8" style="padding-left:3.5pt;padding-right:3.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T4.1.1.17.8.1" style="background-color:#B3B3B3;">68.34</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Open LLM Leaderboard results. TQA stands for TruthfulQA. The asterisk (*) represents the best performance across multiple iterations. Compared to the SFT versions, <span class="ltx_text ltx_font_smallcaps" id="S3.T4.3.1">SynPO</span> achieves an overall improvement of 3.19% for Mistral and 5.00% for Llama3 on the average score.</figcaption>
</figure>
</section>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Downstream Task Performance</h3>
<div class="ltx_para ltx_noindent" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.1">In terms of the general model performance on various tasks, we report the average scores on the well-recognized Open LLM Leaderboard <cite class="ltx_cite ltx_citemacro_citep">(Beeching et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib7" title="">2023</a>)</cite> and 6 additional benchmarks from Language Model Evaluation Harness library (LLM Harness) <cite class="ltx_cite ltx_citemacro_citep">(Gao et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib20" title="">2024</a>)</cite>.
Open LLM Leaderboard <cite class="ltx_cite ltx_citemacro_citep">(Beeching et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib7" title="">2023</a>)</cite> is recognized as a standard assessment for the general performance of LLMs. It includes six different datasets, evaluating LLMs on commonsense reasoning (Arc <cite class="ltx_cite ltx_citemacro_citep">(Clark et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib11" title="">2018</a>)</cite>, HellaSwag <cite class="ltx_cite ltx_citemacro_citep">(Zellers et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib65" title="">2019</a>)</cite>, Winogrande <cite class="ltx_cite ltx_citemacro_citep">(Sakaguchi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib50" title="">2021</a>)</cite>), wide knowledge (MMLU <cite class="ltx_cite ltx_citemacro_citep">(Hendrycks et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib23" title="">2020</a>)</cite>, TruthfulQA <cite class="ltx_cite ltx_citemacro_citep">(Lin et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib35" title="">2021</a>)</cite>), and math (GSM8k <cite class="ltx_cite ltx_citemacro_citep">(Cobbe et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib12" title="">2021</a>)</cite>).
The six addtional LLM Harness tasks include Openbook Question Answering (OBQA) <cite class="ltx_cite ltx_citemacro_citep">(Mihaylov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib41" title="">2018</a>)</cite> and Haerae <cite class="ltx_cite ltx_citemacro_citep">(Son et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib53" title="">2023</a>)</cite> for model knowledge, MathQA <cite class="ltx_cite ltx_citemacro_citep">(Amini et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib2" title="">2019</a>)</cite>, XNLI <cite class="ltx_cite ltx_citemacro_citep">(Conneau et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib13" title="">2018</a>)</cite>, and PROST <cite class="ltx_cite ltx_citemacro_citep">(Aroca-Ouellette et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib3" title="">2021</a>)</cite> for reasoning, as well as Toxigen <cite class="ltx_cite ltx_citemacro_citep">(Hartvigsen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib22" title="">2022</a>)</cite> for toxicity evaluation.<span class="ltx_note ltx_role_footnote" id="footnote6"><sup class="ltx_note_mark">6</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">6</sup><span class="ltx_tag ltx_tag_note">6</span>We follow the standard few-shot setting on Open LLM Leaderboard, as elaborated in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A7" title="Appendix G Evaluation Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">G</span></a>. For the six additional tasks, we employ a fixed 5-shot setting for evaluation.</span></span></span></p>
</div>
<section class="ltx_paragraph" id="S3.SS3.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Open LLM Leaderboard</h4>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS0.Px1.p1">
<p class="ltx_p" id="S3.SS3.SSS0.Px1.p1.1">On the Open LLM leaderboard, we observe an overall improvement of 3.19% of Mistral-Base-SFT and 5.00% of Llama3-Base-SFT on the average score.
Specifically, SynPO achieves over 6% improvement on the ARC challenge and over 16% on TruthfulQA compared to the SFT model, after four rounds of self-boosting.
Notably, the performance of Mistral-Base on GSM8K has experienced a decline, whereas Llama3-Base has demonstrated an improvement of nearly 4 points on the same benchmark.
This disparity likely stems from the superior data filtering capability of ArmoRM-Llama3-8B-v0.1 compared to the 0.4B PairRM. ArmoRM-Llama3-8B-v0.1 effectively mitigates erroneous responses and enhances mathematical problem-solving performance.</p>
</div>
</section>
<section class="ltx_paragraph" id="S3.SS3.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">LLM Harness Tasks</h4>
<figure class="ltx_table" id="S3.T5">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S3.T5.1" style="width:377.6pt;height:264pt;vertical-align:-0.9pt;"><span class="ltx_transformed_inner" style="transform:translate(-30.8pt,21.4pt) scale(0.859939279926184,0.859939279926184) ;">
<table class="ltx_tabular ltx_align_middle" id="S3.T5.1.1">
<tr class="ltx_tr" id="S3.T5.1.1.1">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_tt" id="S3.T5.1.1.1.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.1.1.1">Model</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T5.1.1.1.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.1.2.1">OBQA</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T5.1.1.1.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.1.3.1">Haerae</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T5.1.1.1.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.1.4.1">MathQA</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T5.1.1.1.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.1.5.1">XNLI</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T5.1.1.1.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.1.6.1">Toxigen</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T5.1.1.1.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.1.7.1">PROST</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S3.T5.1.1.1.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.1.8.1">Average</span></td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.2">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S3.T5.1.1.2.1" style="padding-left:5.5pt;padding-right:5.5pt;">Mistral-Base-SFT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.2.2" style="padding-left:5.5pt;padding-right:5.5pt;">46.40</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.2.3" style="padding-left:5.5pt;padding-right:5.5pt;">39.96</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.2.4" style="padding-left:5.5pt;padding-right:5.5pt;">36.25</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.2.5" style="padding-left:5.5pt;padding-right:5.5pt;">43.76</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.2.6" style="padding-left:5.5pt;padding-right:5.5pt;">60.11</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.2.7" style="padding-left:5.5pt;padding-right:5.5pt;">52.04</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.2.8" style="padding-left:5.5pt;padding-right:5.5pt;">46.42</td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.3">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S3.T5.1.1.3.1" style="padding-left:5.5pt;padding-right:5.5pt;">Manual Collection</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.3.2" style="padding-left:5.5pt;padding-right:5.5pt;">50.20</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.3.3" style="padding-left:5.5pt;padding-right:5.5pt;">40.35</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.3.4" style="padding-left:5.5pt;padding-right:5.5pt;">36.72</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.3.5" style="padding-left:5.5pt;padding-right:5.5pt;">44.65</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.3.6" style="padding-left:5.5pt;padding-right:5.5pt;">62.83</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.3.7" style="padding-left:5.5pt;padding-right:5.5pt;">54.66</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.3.8" style="padding-left:5.5pt;padding-right:5.5pt;">48.24</td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.4">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.4.1" style="padding-left:5.5pt;padding-right:5.5pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.4.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.4.2" style="padding-left:5.5pt;padding-right:5.5pt;">47.60</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.4.3" style="padding-left:5.5pt;padding-right:5.5pt;">40.15</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.4.4" style="padding-left:5.5pt;padding-right:5.5pt;">36.21</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.4.5" style="padding-left:5.5pt;padding-right:5.5pt;">44.71</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.4.6" style="padding-left:5.5pt;padding-right:5.5pt;">62.45</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.4.7" style="padding-left:5.5pt;padding-right:5.5pt;">53.74</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.4.8" style="padding-left:5.5pt;padding-right:5.5pt;">47.48</td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.5">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.5.1" style="padding-left:5.5pt;padding-right:5.5pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.5.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.5.2" style="padding-left:5.5pt;padding-right:5.5pt;">48.60</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.5.3" style="padding-left:5.5pt;padding-right:5.5pt;">40.15</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.5.4" style="padding-left:5.5pt;padding-right:5.5pt;">36.25</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.5.5" style="padding-left:5.5pt;padding-right:5.5pt;">44.17</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.5.6" style="padding-left:5.5pt;padding-right:5.5pt;">61.28</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.5.7" style="padding-left:5.5pt;padding-right:5.5pt;">53.29</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.5.8" style="padding-left:5.5pt;padding-right:5.5pt;">47.29</td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.6" style="background-color:#E6E6E6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.6.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.6.1.1" style="background-color:#E6E6E6;">Mistral-Base-SynPO   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.6.1.1.1">Iter1</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.6.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.6.2.1" style="background-color:#E6E6E6;">48.00</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.6.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.6.3.1" style="background-color:#E6E6E6;">39.78</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.6.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.6.4.1" style="background-color:#E6E6E6;">36.05</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.6.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.6.5.1" style="background-color:#E6E6E6;">44.23</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.6.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.6.6.1" style="background-color:#E6E6E6;">60.74</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.6.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.6.7.1" style="background-color:#E6E6E6;">52.39</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.6.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.6.8.1" style="background-color:#E6E6E6;">46.87</span></td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.7" style="background-color:#D6D6D6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.7.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.7.1.1" style="background-color:#D6D6D6;">Mistral-Base-SynPO   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.7.1.1.1">Iter2</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.7.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.7.2.1" style="background-color:#D6D6D6;">50.40</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.7.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.7.3.1" style="background-color:#D6D6D6;">40.05</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.7.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.7.4.1" style="background-color:#D6D6D6;">36.85</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.7.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.7.5.1" style="background-color:#D6D6D6;">43.97</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.7.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.7.6.1" style="background-color:#D6D6D6;">60.96</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.7.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.7.7.1" style="background-color:#D6D6D6;">53.04</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.7.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.7.8.1" style="background-color:#D6D6D6;">47.55</span></td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.8" style="background-color:#C4C4C4;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.8.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.8.1.1" style="background-color:#C4C4C4;">Mistral-Base-SynPO   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.8.1.1.1">Iter3</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.8.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.8.2.1" style="background-color:#C4C4C4;">51.20</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.8.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.8.3.1" style="background-color:#C4C4C4;">40.51</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.8.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.8.4.1" style="background-color:#C4C4C4;">35.88</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.8.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.8.5.1" style="background-color:#C4C4C4;">44.37</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.8.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.8.6.1" style="background-color:#C4C4C4;">60.74</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.8.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.8.7.1" style="background-color:#C4C4C4;">53.45</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.8.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.8.8.1" style="background-color:#C4C4C4;">47.69</span></td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.9" style="background-color:#B3B3B3;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.9.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.9.1.1" style="background-color:#B3B3B3;">Mistral-Base-SynPO   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.9.1.1.1">Iter4</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.9.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.9.2.1" style="background-color:#B3B3B3;">51.40</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.9.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.9.3.1" style="background-color:#B3B3B3;">40.88</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.9.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.9.4.1" style="background-color:#B3B3B3;">36.48</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.9.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.9.5.1" style="background-color:#B3B3B3;">44.47</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.9.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.9.6.1" style="background-color:#B3B3B3;">63.40</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.9.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.9.7.1" style="background-color:#B3B3B3;">55.05</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.9.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.9.8.1" style="background-color:#B3B3B3;">48.61</span></td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.10">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S3.T5.1.1.10.1" style="padding-left:5.5pt;padding-right:5.5pt;">Llama3-Base-SFT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.10.2" style="padding-left:5.5pt;padding-right:5.5pt;">46.20</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.10.3" style="padding-left:5.5pt;padding-right:5.5pt;">61.78</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.10.4" style="padding-left:5.5pt;padding-right:5.5pt;">42.04</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.10.5" style="padding-left:5.5pt;padding-right:5.5pt;">45.47</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.10.6" style="padding-left:5.5pt;padding-right:5.5pt;">68.83</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.10.7" style="padding-left:5.5pt;padding-right:5.5pt;">52.40</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.10.8" style="padding-left:5.5pt;padding-right:5.5pt;">52.79</td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.11">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S3.T5.1.1.11.1" style="padding-left:5.5pt;padding-right:5.5pt;">Manual Collection</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.11.2" style="padding-left:5.5pt;padding-right:5.5pt;">51.60</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.11.3" style="padding-left:5.5pt;padding-right:5.5pt;">61.59</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.11.4" style="padding-left:5.5pt;padding-right:5.5pt;">42.51</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.11.5" style="padding-left:5.5pt;padding-right:5.5pt;">44.77</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.11.6" style="padding-left:5.5pt;padding-right:5.5pt;">74.38</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.11.7" style="padding-left:5.5pt;padding-right:5.5pt;">55.96</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S3.T5.1.1.11.8" style="padding-left:5.5pt;padding-right:5.5pt;">55.14</td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.12">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.12.1" style="padding-left:5.5pt;padding-right:5.5pt;">Sampling-Ranking   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.12.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.12.2" style="padding-left:5.5pt;padding-right:5.5pt;">50.80</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.12.3" style="padding-left:5.5pt;padding-right:5.5pt;">62.05</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.12.4" style="padding-left:5.5pt;padding-right:5.5pt;">42.81</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.12.5" style="padding-left:5.5pt;padding-right:5.5pt;">46.67</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.12.6" style="padding-left:5.5pt;padding-right:5.5pt;">74.68</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.12.7" style="padding-left:5.5pt;padding-right:5.5pt;">55.41</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.12.8" style="padding-left:5.5pt;padding-right:5.5pt;">55.40</td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.13">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.13.1" style="padding-left:5.5pt;padding-right:5.5pt;">Self-Rewarding   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.13.1.1">Iters*</span>
</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.13.2" style="padding-left:5.5pt;padding-right:5.5pt;">48.60</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.13.3" style="padding-left:5.5pt;padding-right:5.5pt;">62.42</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.13.4" style="padding-left:5.5pt;padding-right:5.5pt;">42.78</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.13.5" style="padding-left:5.5pt;padding-right:5.5pt;">46.31</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.13.6" style="padding-left:5.5pt;padding-right:5.5pt;">74.15</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.13.7" style="padding-left:5.5pt;padding-right:5.5pt;">54.23</td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.13.8" style="padding-left:5.5pt;padding-right:5.5pt;">54.75</td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.14" style="background-color:#E6E6E6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.14.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.14.1.1" style="background-color:#E6E6E6;">Llama3-Base-SynPO   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.14.1.1.1">Iter1</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.14.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.14.2.1" style="background-color:#E6E6E6;">48.20</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.14.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.14.3.1" style="background-color:#E6E6E6;">61.96</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.14.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.14.4.1" style="background-color:#E6E6E6;">42.71</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.14.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.14.5.1" style="background-color:#E6E6E6;">46.15</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.14.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.14.6.1" style="background-color:#E6E6E6;">71.17</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.14.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.14.7.1" style="background-color:#E6E6E6;">53.77</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.14.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.14.8.1" style="background-color:#E6E6E6;">53.99</span></td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.15" style="background-color:#D6D6D6;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.15.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.15.1.1" style="background-color:#D6D6D6;">Llama3-Base-SynPO   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.15.1.1.1">Iter2</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.15.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.15.2.1" style="background-color:#D6D6D6;">50.80</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.15.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.15.3.1" style="background-color:#D6D6D6;">62.60</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.15.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.15.4.1" style="background-color:#D6D6D6;">42.75</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.15.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.15.5.1" style="background-color:#D6D6D6;">46.34</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.15.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.15.6.1" style="background-color:#D6D6D6;">74.04</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.15.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.15.7.1" style="background-color:#D6D6D6;">54.85</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.15.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.15.8.1" style="background-color:#D6D6D6;">55.23</span></td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.16" style="background-color:#C4C4C4;">
<td class="ltx_td ltx_align_left ltx_border_r" id="S3.T5.1.1.16.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.16.1.1" style="background-color:#C4C4C4;">Llama3-Base-SynPO   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.16.1.1.1">Iter3</span></span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.16.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.16.2.1" style="background-color:#C4C4C4;">51.00</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.16.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.16.3.1" style="background-color:#C4C4C4;">62.51</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.16.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.16.4.1" style="background-color:#C4C4C4;">42.78</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.16.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.16.5.1" style="background-color:#C4C4C4;">46.37</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.16.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.16.6.1" style="background-color:#C4C4C4;">75.11</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.16.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.16.7.1" style="background-color:#C4C4C4;">55.29</span></td>
<td class="ltx_td ltx_align_center" id="S3.T5.1.1.16.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.16.8.1" style="background-color:#C4C4C4;">55.51</span></td>
</tr>
<tr class="ltx_tr" id="S3.T5.1.1.17" style="background-color:#B3B3B3;">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_r" id="S3.T5.1.1.17.1" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.17.1.1" style="background-color:#B3B3B3;">Llama3-Base-SynPO   <span class="ltx_text ltx_font_italic" id="S3.T5.1.1.17.1.1.1">Iter4</span></span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T5.1.1.17.2" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.17.2.1" style="background-color:#B3B3B3;">52.00</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T5.1.1.17.3" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.17.3.1" style="background-color:#B3B3B3;">62.51</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T5.1.1.17.4" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.17.4.1" style="background-color:#B3B3B3;">42.65</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T5.1.1.17.5" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.17.5.1" style="background-color:#B3B3B3;">46.27</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T5.1.1.17.6" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.17.6.1" style="background-color:#B3B3B3;">75.18</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T5.1.1.17.7" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text" id="S3.T5.1.1.17.7.1" style="background-color:#B3B3B3;">56.14</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S3.T5.1.1.17.8" style="padding-left:5.5pt;padding-right:5.5pt;"><span class="ltx_text ltx_font_bold" id="S3.T5.1.1.17.8.1" style="background-color:#B3B3B3;">55.79</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Downstream performance in each SynPO iteration on six tasks in LM Evaluation Harness. An asterisk (*) represents the best performance across multiple iterations.
</figcaption>
</figure>
<div class="ltx_para ltx_noindent" id="S3.SS3.SSS0.Px2.p1">
<p class="ltx_p" id="S3.SS3.SSS0.Px2.p1.1">The advantages above are also reflected in the results for more diverse tasks in LLM Harness, as evidenced by Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S3.T5" title="Table 5 ‣ LLM Harness Tasks ‣ 3.3 Downstream Task Performance ‣ 3 Experiments ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">5</span></a>.
Previous works <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib60" title="">2024b</a>; Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite> demonstrate that preference optimization can induce the “alignment tax” - aligning models with human preferences can improve performance for only 1<math alttext="\sim" class="ltx_Math" display="inline" id="S3.SS3.SSS0.Px2.p1.1.m1.1"><semantics id="S3.SS3.SSS0.Px2.p1.1.m1.1a"><mo id="S3.SS3.SSS0.Px2.p1.1.m1.1.1" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS3.SSS0.Px2.p1.1.m1.1b"><csymbol cd="latexml" id="S3.SS3.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S3.SS3.SSS0.Px2.p1.1.m1.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.SSS0.Px2.p1.1.m1.1c">\sim</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.SSS0.Px2.p1.1.m1.1d">∼</annotation></semantics></math>2 iterations or even degrade overall performance on downstream tasks <cite class="ltx_cite ltx_citemacro_citep">(Askell et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib4" title="">2021</a>)</cite>. Our method exhibits similar behavior on MathQA; however, overall, SynPO shows improvements across more iterations on other tasks. This is because synthesizing better chosen candidates introduces additional supervision, partially mitigating the alignment tax issue and enabling LLMs to continuously enhance their capabilities on downstream tasks at the same time of alignment.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Ablation Studies</h2>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Synthetic Prompts and Responses</h3>
<div class="ltx_para ltx_noindent" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">We have demonstrated the diversity of prompts generated by SynPO in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS1" title="2.1 Synthetic Prompt Creation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">2.1</span></a>.
To further validate the self-prompt generator, we compare the generated prompts with manual collected prompts <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>)</cite> and Self-Instruct prompts <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib58" title="">2022</a>)</cite>.
For each prompt construction approach, we randomly sample 20k prompts and construct response pairs through both SynPO and Sampling-Ranking.
We compare the single iteration results of Llama3-8B. As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S4.T7" title="Table 7 ‣ 4.2 Impact of Seed Data ‣ 4 Ablation Studies ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">7</span></a>,
whether through self-refinement or Sampling-Ranking, synthetic prompts generated by SynPO lead to better-aligned models, validating the quality of these prompts.
It is worth mentioning that SynPO prompts are even more effective than the superset of its seed training data, UltraFeedback prompts.
This increased effectiveness may be attributed to the greater diversity of SynPO prompts, achieved through the keyword sampling process in prompt synthesis.
Results of mixing SynPO and manual collected prompts further indicate the potential of SynPO in augmenting existing prompts.</p>
</div>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Impact of Seed Data</h3>
<div class="ltx_para ltx_noindent" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">SynPO involves training LLMs solely on synthetic preference data while using seed SFT data for validation.
To investigate the maximum impact of the seed SFT data, we compare SynPO with the following settings: 1) <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.2">Seed SFT:</span> Directly fine-tuning the LLM using seed data. 2) <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.3">Seed PO:</span> For each prompt in the seed SFT data, using the gold standard response in the seed data as the chosen response and the initial policy model response as the rejected response for preference optimization. 3) <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.4">Seed SFT + PO:</span> To avoid distribution shifts in directly using seed SFT data, we first obtain a model fine-tuned on seed data as in 1), then construct preference data using the model output and gold standard responses. 4) <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.1">Seed SFT + PO<math alttext="{}^{\text{me}}" class="ltx_Math" display="inline" id="S4.SS2.p1.1.1.m1.1"><semantics id="S4.SS2.p1.1.1.m1.1a"><msup id="S4.SS2.p1.1.1.m1.1.1" xref="S4.SS2.p1.1.1.m1.1.1.cmml"><mi id="S4.SS2.p1.1.1.m1.1.1a" xref="S4.SS2.p1.1.1.m1.1.1.cmml"></mi><mtext class="ltx_mathvariant_italic" id="S4.SS2.p1.1.1.m1.1.1.1" xref="S4.SS2.p1.1.1.m1.1.1.1a.cmml">me</mtext></msup><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.1.m1.1b"><apply id="S4.SS2.p1.1.1.m1.1.1.cmml" xref="S4.SS2.p1.1.1.m1.1.1"><ci id="S4.SS2.p1.1.1.m1.1.1.1a.cmml" xref="S4.SS2.p1.1.1.m1.1.1.1"><mtext class="ltx_mathvariant_italic" id="S4.SS2.p1.1.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.SS2.p1.1.1.m1.1.1.1">me</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.1.1.m1.1c">{}^{\text{me}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS2.p1.1.1.m1.1d">start_FLOATSUPERSCRIPT me end_FLOATSUPERSCRIPT</annotation></semantics></math>:</span> Training on data from 3) for multiple epochs.<span class="ltx_note ltx_role_footnote" id="footnote7"><sup class="ltx_note_mark">7</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">7</sup><span class="ltx_tag ltx_tag_note">7</span>We compare the results of 2 epochs and 3 epochs and select the better-performing 2 epochs. More experimental details in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A4" title="Appendix D Additional Details on Seed Data Ablation ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">D</span></a></span></span></span>
The results on AlpacaEval 2.0 are presented in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S4.T7" title="Table 7 ‣ 4.2 Impact of Seed Data ‣ 4 Ablation Studies ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">7</span></a>.
Among the evaluated methods except for SynPO, setting 3) is most analogous to SynPO, and proves to be the most effective.
However, due to the limited quantity of seed data, the improvement is less than that achieved by iterative SynPO on synthetic data. Training under such conditions for multiple epochs does not yield further improvements and even degrades performance. These findings validate that SynPO is a promising approach to construct preference data and maximize the utilization of minimal high-quality data.</p>
</div>
<figure class="ltx_table" id="S4.T7">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_bottom" id="S4.T7.fig1" style="width:218.6pt;">
<div class="ltx_inline-block ltx_transformed_outer" id="S4.T7.fig1.1" style="width:393.5pt;height:172.3pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(73.4pt,-32.1pt) scale(1.59531739514369,1.59531739514369) ;">
<table class="ltx_tabular ltx_align_middle" id="S4.T7.fig1.1.1">
<tr class="ltx_tr" id="S4.T7.fig1.1.1.1">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_tt" id="S4.T7.fig1.1.1.1.1" rowspan="2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.1.1.1">Prompts</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.T7.fig1.1.1.1.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.1.2.1">SynPO</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="2" id="S4.T7.fig1.1.1.1.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.1.3.1">Sampling-Ranking</span></td>
</tr>
<tr class="ltx_tr" id="S4.T7.fig1.1.1.2">
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.fig1.1.1.2.1" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.2.1.1">LC (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.fig1.1.1.2.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.2.2.1">WR (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.fig1.1.1.2.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.2.3.1">LC (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.fig1.1.1.2.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.2.4.1">WR (%)</span></td>
</tr>
<tr class="ltx_tr" id="S4.T7.fig1.1.1.3">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="S4.T7.fig1.1.1.3.1" style="padding-left:2.0pt;padding-right:2.0pt;">Manual Collection</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.fig1.1.1.3.2" style="padding-left:2.0pt;padding-right:2.0pt;">23.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.fig1.1.1.3.3" style="padding-left:2.0pt;padding-right:2.0pt;">25.6</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.fig1.1.1.3.4" style="padding-left:2.0pt;padding-right:2.0pt;">7.8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.fig1.1.1.3.5" style="padding-left:2.0pt;padding-right:2.0pt;">6.2</td>
</tr>
<tr class="ltx_tr" id="S4.T7.fig1.1.1.4">
<td class="ltx_td ltx_align_left ltx_border_r" id="S4.T7.fig1.1.1.4.1" style="padding-left:2.0pt;padding-right:2.0pt;">Self-Instruct</td>
<td class="ltx_td ltx_align_center" id="S4.T7.fig1.1.1.4.2" style="padding-left:2.0pt;padding-right:2.0pt;">21.7</td>
<td class="ltx_td ltx_align_center" id="S4.T7.fig1.1.1.4.3" style="padding-left:2.0pt;padding-right:2.0pt;">21.4</td>
<td class="ltx_td ltx_align_center" id="S4.T7.fig1.1.1.4.4" style="padding-left:2.0pt;padding-right:2.0pt;">9.1</td>
<td class="ltx_td ltx_align_center" id="S4.T7.fig1.1.1.4.5" style="padding-left:2.0pt;padding-right:2.0pt;">4.6</td>
</tr>
<tr class="ltx_tr" id="S4.T7.fig1.1.1.5">
<td class="ltx_td ltx_align_left ltx_border_r" id="S4.T7.fig1.1.1.5.1" style="padding-left:2.0pt;padding-right:2.0pt;">SynPO</td>
<td class="ltx_td ltx_align_center" id="S4.T7.fig1.1.1.5.2" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.5.2.1">24.3</span></td>
<td class="ltx_td ltx_align_center" id="S4.T7.fig1.1.1.5.3" style="padding-left:2.0pt;padding-right:2.0pt;">24.5</td>
<td class="ltx_td ltx_align_center" id="S4.T7.fig1.1.1.5.4" style="padding-left:2.0pt;padding-right:2.0pt;">9.2</td>
<td class="ltx_td ltx_align_center" id="S4.T7.fig1.1.1.5.5" style="padding-left:2.0pt;padding-right:2.0pt;">5.3</td>
</tr>
<tr class="ltx_tr" id="S4.T7.fig1.1.1.6">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_r" id="S4.T7.fig1.1.1.6.1" style="padding-left:2.0pt;padding-right:2.0pt;">SynPO Mix.</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T7.fig1.1.1.6.2" style="padding-left:2.0pt;padding-right:2.0pt;">23.4</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T7.fig1.1.1.6.3" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.6.3.1">29.4</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T7.fig1.1.1.6.4" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.6.4.1">14.2</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T7.fig1.1.1.6.5" style="padding-left:2.0pt;padding-right:2.0pt;"><span class="ltx_text ltx_font_bold" id="S4.T7.fig1.1.1.6.5.1">6.9</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Table 6: </span>Comparison of various prompt generation methods on AlpacaEval 2.0. SynPO Mix. combines SynPO prompts with manually collected prompts.</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_bottom" id="S4.T7.3" style="width:166.9pt;">
<div class="ltx_inline-block ltx_transformed_outer" id="S4.T7.1.1" style="width:393.5pt;height:221.9pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(101.0pt,-57.0pt) scale(2.05501101125445,2.05501101125445) ;">
<table class="ltx_tabular ltx_align_middle" id="S4.T7.1.1.1">
<tr class="ltx_tr" id="S4.T7.1.1.1.2">
<td class="ltx_td ltx_align_left ltx_border_tt" id="S4.T7.1.1.1.2.1"><span class="ltx_text ltx_font_bold" id="S4.T7.1.1.1.2.1.1">Method</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T7.1.1.1.2.2"><span class="ltx_text ltx_font_bold" id="S4.T7.1.1.1.2.2.1">LC (%)</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="S4.T7.1.1.1.2.3"><span class="ltx_text ltx_font_bold" id="S4.T7.1.1.1.2.3.1">WR (%)</span></td>
</tr>
<tr class="ltx_tr" id="S4.T7.1.1.1.3">
<td class="ltx_td ltx_align_left ltx_border_t" id="S4.T7.1.1.1.3.1">Seed SFT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.1.1.1.3.2">20.1</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="S4.T7.1.1.1.3.3">19.7</td>
</tr>
<tr class="ltx_tr" id="S4.T7.1.1.1.4">
<td class="ltx_td ltx_align_left" id="S4.T7.1.1.1.4.1">Seed PO</td>
<td class="ltx_td ltx_align_center" id="S4.T7.1.1.1.4.2">11.6</td>
<td class="ltx_td ltx_align_center" id="S4.T7.1.1.1.4.3">10.7</td>
</tr>
<tr class="ltx_tr" id="S4.T7.1.1.1.5">
<td class="ltx_td ltx_align_left" id="S4.T7.1.1.1.5.1">Seed SFT + PO</td>
<td class="ltx_td ltx_align_center" id="S4.T7.1.1.1.5.2">24.6</td>
<td class="ltx_td ltx_align_center" id="S4.T7.1.1.1.5.3">20.9</td>
</tr>
<tr class="ltx_tr" id="S4.T7.1.1.1.1">
<td class="ltx_td ltx_align_left" id="S4.T7.1.1.1.1.1">Seed SFT + PO<math alttext="{}^{\text{me}}" class="ltx_Math" display="inline" id="S4.T7.1.1.1.1.1.m1.1"><semantics id="S4.T7.1.1.1.1.1.m1.1a"><msup id="S4.T7.1.1.1.1.1.m1.1.1" xref="S4.T7.1.1.1.1.1.m1.1.1.cmml"><mi id="S4.T7.1.1.1.1.1.m1.1.1a" xref="S4.T7.1.1.1.1.1.m1.1.1.cmml"></mi><mtext id="S4.T7.1.1.1.1.1.m1.1.1.1" xref="S4.T7.1.1.1.1.1.m1.1.1.1a.cmml">me</mtext></msup><annotation-xml encoding="MathML-Content" id="S4.T7.1.1.1.1.1.m1.1b"><apply id="S4.T7.1.1.1.1.1.m1.1.1.cmml" xref="S4.T7.1.1.1.1.1.m1.1.1"><ci id="S4.T7.1.1.1.1.1.m1.1.1.1a.cmml" xref="S4.T7.1.1.1.1.1.m1.1.1.1"><mtext id="S4.T7.1.1.1.1.1.m1.1.1.1.cmml" mathsize="70%" xref="S4.T7.1.1.1.1.1.m1.1.1.1">me</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T7.1.1.1.1.1.m1.1c">{}^{\text{me}}</annotation><annotation encoding="application/x-llamapun" id="S4.T7.1.1.1.1.1.m1.1d">start_FLOATSUPERSCRIPT me end_FLOATSUPERSCRIPT</annotation></semantics></math>
</td>
<td class="ltx_td ltx_align_center" id="S4.T7.1.1.1.1.2">22.4</td>
<td class="ltx_td ltx_align_center" id="S4.T7.1.1.1.1.3">15.0</td>
</tr>
<tr class="ltx_tr" id="S4.T7.1.1.1.6">
<td class="ltx_td ltx_align_left ltx_border_bb" id="S4.T7.1.1.1.6.1">SynPO   <span class="ltx_text ltx_font_italic" id="S4.T7.1.1.1.6.1.1">Iter4</span>
</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T7.1.1.1.6.2"><span class="ltx_text ltx_font_bold" id="S4.T7.1.1.1.6.2.1">32.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="S4.T7.1.1.1.6.3"><span class="ltx_text ltx_font_bold" id="S4.T7.1.1.1.6.3.1">33.6</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Table 7: </span>Impact analysis of seed data on AlpacaEval 2.0. PO<math alttext="{}^{\text{me}}" class="ltx_Math" display="inline" id="S4.T7.3.3.m1.1"><semantics id="S4.T7.3.3.m1.1b"><msup id="S4.T7.3.3.m1.1.1" xref="S4.T7.3.3.m1.1.1.cmml"><mi id="S4.T7.3.3.m1.1.1b" xref="S4.T7.3.3.m1.1.1.cmml"></mi><mtext id="S4.T7.3.3.m1.1.1.1" xref="S4.T7.3.3.m1.1.1.1a.cmml">me</mtext></msup><annotation-xml encoding="MathML-Content" id="S4.T7.3.3.m1.1c"><apply id="S4.T7.3.3.m1.1.1.cmml" xref="S4.T7.3.3.m1.1.1"><ci id="S4.T7.3.3.m1.1.1.1a.cmml" xref="S4.T7.3.3.m1.1.1.1"><mtext id="S4.T7.3.3.m1.1.1.1.cmml" mathsize="70%" xref="S4.T7.3.3.m1.1.1.1">me</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T7.3.3.m1.1d">{}^{\text{me}}</annotation><annotation encoding="application/x-llamapun" id="S4.T7.3.3.m1.1e">start_FLOATSUPERSCRIPT me end_FLOATSUPERSCRIPT</annotation></semantics></math> refers to preference optimization over multiple epochs.</figcaption>
</figure>
</div>
</div>
</figure>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Related Work</h2>
<section class="ltx_paragraph" id="S5.SS0.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Preference Data Construction</h4>
<div class="ltx_para ltx_noindent" id="S5.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S5.SS0.SSS0.Px1.p1.1">Preference data are triplets consisting of user prompts, user-preferred responses, and non-preferred responses.
Acquiring preference data from humans can be resource intensive, often constrained by the data collection platform <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib44" title="">2022a</a>)</cite> or the cost of human annotation <cite class="ltx_cite ltx_citemacro_citep">(Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib5" title="">2022a</a>; Ethayarajh et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib18" title="">2022</a>; Nakano et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib42" title="">2021</a>)</cite>.
To alleviate this problem, researchers have started using teacher LLMs, such as GPT-4 <cite class="ltx_cite ltx_citemacro_citep">(Achiam et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib1" title="">2023</a>)</cite>, to simulate human preferences <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>; Ding et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib15" title="">2023</a>; Huang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib27" title="">2024</a>)</cite>. Given user prompts and candidate responses, this line of work employs a stronger model to annotate preferences, thereby overcoming the scarcity and constraints of existing preference data <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>)</cite>.
However, the prompts still need to be collected <cite class="ltx_cite ltx_citemacro_citep">(Cui et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib14" title="">2023</a>)</cite>, which limits the domain, diversity, and quantity of the data. Both human annotation and the utilization of large teacher model APIs incur substantial costs <cite class="ltx_cite ltx_citemacro_citep">(Shi et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib51" title="">2023</a>)</cite>.
Moreover, relying solely on reward scores or win-lose annotation fails to fully capture the subtleties and complexities of human preferences.</p>
</div>
</section>
<section class="ltx_paragraph" id="S5.SS0.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">LLM Self-Boosting</h4>
<div class="ltx_para ltx_noindent" id="S5.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S5.SS0.SSS0.Px2.p1.1">Previous work has advanced the self-boosting of LLMs by searching for high-reward behaviors <cite class="ltx_cite ltx_citemacro_citep">(Tian et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib55" title="">2024</a>; Zhang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib66" title="">2024</a>)</cite>, using LLMs as judges to select responses <cite class="ltx_cite ltx_citemacro_citep">(Yuan et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib64" title="">2024</a>; Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib57" title="">2024</a>; Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib59" title="">2024a</a>; Kim et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib29" title="">2024</a>)</cite>, and leveraging self-play strategies <cite class="ltx_cite ltx_citemacro_citep">(Chen et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib8" title="">2024</a>; Cheng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib9" title="">2024</a>; Luo et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib38" title="">2024</a>; Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib60" title="">2024b</a>)</cite>.
These works typically use a fixed set of existing prompts, limiting the LLM ability to learn across wide scenarios.
Furthermore, the deterministic reward signals in these methods do not help the model recognize subtle discrepancies between its responses and ideal responses.
Prior to our work, Constitutional AI <cite class="ltx_cite ltx_citemacro_citep">(Bai et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib6" title="">2022b</a>)</cite> and SELF <cite class="ltx_cite ltx_citemacro_citep">(Lu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib36" title="">2023</a>)</cite> used AI to generate non-deterministic feedback for training. Constitutional AI used refinement data for reward models, while SELF employed GPT-4 for data generation and taught models self-refinement. However, these methods did not utilize comparative information between pre- and post-revision texts for training.</p>
</div>
</section>
<section class="ltx_paragraph" id="S5.SS0.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">Synthetic Data for LLMs</h4>
<div class="ltx_para ltx_noindent" id="S5.SS0.SSS0.Px3.p1">
<p class="ltx_p" id="S5.SS0.SSS0.Px3.p1.1">Acquiring human-generated data is costly and time-consuming, leading to the use of synthetic data for LLM training <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib58" title="">2022</a>; Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib61" title="">2023a</a>; Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib31" title="">2024b</a>)</cite>. Unnatural Instructions <cite class="ltx_cite ltx_citemacro_citep">(Honovich et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib24" title="">2022</a>)</cite> and Self-Instruct <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib58" title="">2022</a>)</cite> use seed instructions to generate new prompts, while WizardLM <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib61" title="">2023a</a>)</cite> and WizardMath <cite class="ltx_cite ltx_citemacro_citep">(Luo et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib37" title="">2023</a>)</cite> rewrite these instructions into more complex forms using ChatGPT. Seed topics also produce textbook-like data <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib34" title="">2023</a>; <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib31" title="">2024b</a>)</cite> or self-chat dialogues <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib62" title="">2023b</a>; Ding et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib15" title="">2023</a>)</cite> for instruction tuning. These methods often require strong LLMs or examples, benefiting from model distillation <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib61" title="">2023a</a>; Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib31" title="">2024b</a>; <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib30" title="">a</a>)</cite>.
Our approach uses the model itself to generate prompts and responses without needing carefully designed topics, extending beyond the model’s inherent sampling space. This brings generative rewards to the LLM self-boosting process, particularly benefiting initially weaker models. It resembles direct preference knowledge distillation <cite class="ltx_cite ltx_citemacro_citep">(Li et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib33" title="">2024d</a>)</cite> but does not rely on large-scale teacher model responses for supervision.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion</h2>
<div class="ltx_para ltx_noindent" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">We introduce self-boosting LLM with synthetic preference data, SynPO, a method for LLM alignment through iterative training on synthetic data.
In SynPO, we innovatively base the entire training process on synthetic data and only employ limited SFT data for validation.
SynPO diversifies the prompts and dynamically guides LLMs to improve their own output, using pre- and post-refinement generations as synthetic preference pairs for training in the next iteration.
Experimental results show that SynPO leads to significant improvements on both instruction-following capabilities and task performance. This strategy sheds light on high-quality synthetic data generation and self-alignment with minimal supervision, both of which are critical for the continuous development of LLMs.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Achiam et al. (2023)</span>
<span class="ltx_bibblock">
Josh Achiam, Steven Adler, Sandhini Agarwal, Lama Ahmad, Ilge Akkaya, Florencia Leoni Aleman, Diogo Almeida, Janko Altenschmidt, Sam Altman, Shyamal Anadkat, et al.

</span>
<span class="ltx_bibblock">Gpt-4 technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">arXiv preprint arXiv:2303.08774</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Amini et al. (2019)</span>
<span class="ltx_bibblock">
Aida Amini, Saadia Gabriel, Peter Lin, Rik Koncel-Kedziorski, Yejin Choi, and Hannaneh Hajishirzi.

</span>
<span class="ltx_bibblock">Mathqa: Towards interpretable math word problem solving with operation-based formalisms, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Aroca-Ouellette et al. (2021)</span>
<span class="ltx_bibblock">
Stéphane Aroca-Ouellette, Cory Paik, Alessandro Roncone, and Katharina Kann.

</span>
<span class="ltx_bibblock">PROST: Physical reasoning about objects through space and time.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Findings of the Association for Computational Linguistics: ACL-IJCNLP 2021</em>, pp.  4597–4608, Online, August 2021. Association for Computational Linguistics.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://aclanthology.org/2021.findings-acl.404" title="">https://aclanthology.org/2021.findings-acl.404</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Askell et al. (2021)</span>
<span class="ltx_bibblock">
Amanda Askell, Yuntao Bai, Anna Chen, Dawn Drain, Deep Ganguli, Tom Henighan, Andy Jones, Nicholas Joseph, Benjamin Mann, Nova Dassarma, Nelson Elhage, Zac Hatfield-Dodds, Danny Hernandez, John Kernion, Kamal Ndousse, Catherine Olsson, Dario Amodei, Tom B. Brown, Jack Clark, Sam McCandlish, Christopher Olah, and Jared Kaplan.

</span>
<span class="ltx_bibblock">A general language assistant as a laboratory for alignment.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">ArXiv</em>, abs/2112.00861, 2021.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:244799619" title="">https://api.semanticscholar.org/CorpusID:244799619</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2022a)</span>
<span class="ltx_bibblock">
Yuntao Bai, Andy Jones, Kamal Ndousse, Amanda Askell, Anna Chen, Nova DasSarma, Dawn Drain, Stanislav Fort, Deep Ganguli, Tom Henighan, Nicholas Joseph, Saurav Kadavath, Jackson Kernion, Tom Conerly, Sheer El-Showk, Nelson Elhage, Zac Hatfield-Dodds, Danny Hernandez, Tristan Hume, Scott Johnston, Shauna Kravec, Liane Lovitt, Neel Nanda, Catherine Olsson, Dario Amodei, Tom Brown, Jack Clark, Sam McCandlish, Chris Olah, Ben Mann, and Jared Kaplan.

</span>
<span class="ltx_bibblock">Training a helpful and harmless assistant with reinforcement learning from human feedback, 2022a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2022b)</span>
<span class="ltx_bibblock">
Yuntao Bai, Saurav Kadavath, Sandipan Kundu, Amanda Askell, John Kernion, Andy Jones, Anna Chen, Anna Goldie, Azalia Mirhoseini, Cameron McKinnon, Carol Chen, Catherine Olsson, Christopher Olah, Danny Hernandez, Dawn Drain, Deep Ganguli, Dustin Li, Eli Tran-Johnson, E Perez, Jamie Kerr, Jared Mueller, Jeff Ladish, J Landau, Kamal Ndousse, Kamilė Lukoiūtė, Liane Lovitt, Michael Sellitto, Nelson Elhage, Nicholas Schiefer, Noem’i Mercado, Nova Dassarma, Robert Lasenby, Robin Larson, Sam Ringer, Scott Johnston, Shauna Kravec, Sheer El Showk, Stanislav Fort, Tamera Lanham, Timothy Telleen-Lawton, Tom Conerly, Tom Henighan, Tristan Hume, Sam Bowman, Zac Hatfield-Dodds, Benjamin Mann, Dario Amodei, Nicholas Joseph, Sam McCandlish, Tom B. Brown, and Jared Kaplan.

</span>
<span class="ltx_bibblock">Constitutional ai: Harmlessness from ai feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">ArXiv</em>, abs/2212.08073, 2022b.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:254823489" title="">https://api.semanticscholar.org/CorpusID:254823489</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Beeching et al. (2023)</span>
<span class="ltx_bibblock">
Edward Beeching, Clémentine Fourrier, Nathan Habib, Sheon Han, Nathan Lambert, Nazneen Rajani, Omar Sanseviero, Lewis Tunstall, and Thomas Wolf.

</span>
<span class="ltx_bibblock">Open llm leaderboard.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/spaces/open-llm-leaderboard-old/open_llm_leaderboard" title="">https://huggingface.co/spaces/open-llm-leaderboard-old/open_llm_leaderboard</a>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chen et al. (2024)</span>
<span class="ltx_bibblock">
Zixiang Chen, Yihe Deng, Huizhuo Yuan, Kaixuan Ji, and Quanquan Gu.

</span>
<span class="ltx_bibblock">Self-play fine-tuning converts weak language models to strong language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">arXiv preprint arXiv:2401.01335</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cheng et al. (2024)</span>
<span class="ltx_bibblock">
Pengyu Cheng, Tianhao Hu, Han Xu, Zhisong Zhang, Yong Dai, Lei Han, and Nan Du.

</span>
<span class="ltx_bibblock">Self-playing adversarial language game enhances llm reasoning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">ArXiv</em>, abs/2404.10642, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:269157364" title="">https://api.semanticscholar.org/CorpusID:269157364</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chiang et al. (2023)</span>
<span class="ltx_bibblock">
Wei-Lin Chiang, Zhuohan Li, Zi Lin, Ying Sheng, Zhanghao Wu, Hao Zhang, Lianmin Zheng, Siyuan Zhuang, Yonghao Zhuang, Joseph E. Gonzalez, Ion Stoica, and Eric P. Xing.

</span>
<span class="ltx_bibblock">Vicuna: An open-source chatbot impressing gpt-4 with 90%* chatgpt quality, March 2023.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://lmsys.org/blog/2023-03-30-vicuna/" title="">https://lmsys.org/blog/2023-03-30-vicuna/</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Clark et al. (2018)</span>
<span class="ltx_bibblock">
Peter Clark, Isaac Cowhey, Oren Etzioni, Tushar Khot, Ashish Sabharwal, Carissa Schoenick, and Oyvind Tafjord.

</span>
<span class="ltx_bibblock">Think you have solved question answering? try arc, the ai2 reasoning challenge.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">arXiv preprint arXiv:1803.05457</em>, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cobbe et al. (2021)</span>
<span class="ltx_bibblock">
Karl Cobbe, Vineet Kosaraju, Mohammad Bavarian, Mark Chen, Heewoo Jun, Lukasz Kaiser, Matthias Plappert, Jerry Tworek, Jacob Hilton, Reiichiro Nakano, et al.

</span>
<span class="ltx_bibblock">Training verifiers to solve math word problems.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">arXiv preprint arXiv:2110.14168</em>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Conneau et al. (2018)</span>
<span class="ltx_bibblock">
Alexis Conneau, Ruty Rinott, Guillaume Lample, Adina Williams, Samuel R. Bowman, Holger Schwenk, and Veselin Stoyanov.

</span>
<span class="ltx_bibblock">Xnli: Evaluating cross-lingual sentence representations.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Proceedings of the 2018 Conference on Empirical Methods in Natural Language Processing</em>. Association for Computational Linguistics, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cui et al. (2023)</span>
<span class="ltx_bibblock">
Ganqu Cui, Lifan Yuan, Ning Ding, Guanming Yao, Wei Zhu, Yuan Ni, Guotong Xie, Zhiyuan Liu, and Maosong Sun.

</span>
<span class="ltx_bibblock">Ultrafeedback: Boosting language models with high-quality feedback, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ding et al. (2023)</span>
<span class="ltx_bibblock">
Ning Ding, Yulin Chen, Bokai Xu, Yujia Qin, Zhi Zheng, Shengding Hu, Zhiyuan Liu, Maosong Sun, and Bowen Zhou.

</span>
<span class="ltx_bibblock">Enhancing chat language models by scaling high-quality instructional conversations, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dubey et al. (2024)</span>
<span class="ltx_bibblock">
Abhimanyu Dubey, Abhinav Jauhri, Abhinav Pandey, Abhishek Kadian, Ahmad Al-Dahle, Aiesha Letman, Akhil Mathur, Alan Schelten, Amy Yang, Angela Fan, et al.

</span>
<span class="ltx_bibblock">The llama 3 herd of models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:2407.21783</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dubois et al. (2024)</span>
<span class="ltx_bibblock">
Yann Dubois, Balázs Galambosi, Percy Liang, and Tatsunori B Hashimoto.

</span>
<span class="ltx_bibblock">Length-controlled alpacaeval: A simple way to debias automatic evaluators.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">arXiv preprint arXiv:2404.04475</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ethayarajh et al. (2022)</span>
<span class="ltx_bibblock">
Kawin Ethayarajh, Yejin Choi, and Swabha Swayamdipta.

</span>
<span class="ltx_bibblock">Understanding dataset difficulty with <math alttext="\mathcal{V}" class="ltx_Math" display="inline" id="bib.bib18.1.m1.1"><semantics id="bib.bib18.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="bib.bib18.1.m1.1.1" xref="bib.bib18.1.m1.1.1.cmml">𝒱</mi><annotation-xml encoding="MathML-Content" id="bib.bib18.1.m1.1b"><ci id="bib.bib18.1.m1.1.1.cmml" xref="bib.bib18.1.m1.1.1">𝒱</ci></annotation-xml><annotation encoding="application/x-tex" id="bib.bib18.1.m1.1c">\mathcal{V}</annotation><annotation encoding="application/x-llamapun" id="bib.bib18.1.m1.1d">caligraphic_V</annotation></semantics></math>-usable information.

</span>
<span class="ltx_bibblock">In Kamalika Chaudhuri, Stefanie Jegelka, Le Song, Csaba Szepesvari, Gang Niu, and Sivan Sabato (eds.), <em class="ltx_emph ltx_font_italic" id="bib.bib18.2.1">Proceedings of the 39th International Conference on Machine Learning</em>, volume 162 of <em class="ltx_emph ltx_font_italic" id="bib.bib18.3.2">Proceedings of Machine Learning Research</em>, pp.  5988–6008. PMLR, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ethayarajh et al. (2024)</span>
<span class="ltx_bibblock">
Kawin Ethayarajh, Winnie Xu, Niklas Muennighoff, Dan Jurafsky, and Douwe Kiela.

</span>
<span class="ltx_bibblock">Kto: Model alignment as prospect theoretic optimization.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">ArXiv</em>, abs/2402.01306, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:267406810" title="">https://api.semanticscholar.org/CorpusID:267406810</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2024)</span>
<span class="ltx_bibblock">
Leo Gao, Jonathan Tow, Baber Abbasi, Stella Biderman, Sid Black, Anthony DiPofi, Charles Foster, Laurence Golding, Jeffrey Hsu, Alain Le Noac’h, Haonan Li, Kyle McDonell, Niklas Muennighoff, Chris Ociepa, Jason Phang, Laria Reynolds, Hailey Schoelkopf, Aviya Skowron, Lintang Sutawika, Eric Tang, Anish Thite, Ben Wang, Kevin Wang, and Andy Zou.

</span>
<span class="ltx_bibblock">A framework for few-shot language model evaluation, 07 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://zenodo.org/records/12608602" title="">https://zenodo.org/records/12608602</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gulcehre et al. (2023)</span>
<span class="ltx_bibblock">
Caglar Gulcehre, Tom Le Paine, Srivatsan Srinivasan, Ksenia Konyushkova, Lotte Weerts, Abhishek Sharma, Aditya Siddhant, Alexa Ahern, Miaosen Wang, Chenjie Gu, Wolfgang Macherey, A. Doucet, Orhan Firat, and Nando de Freitas.

</span>
<span class="ltx_bibblock">Reinforced self-training (rest) for language modeling.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">ArXiv</em>, abs/2308.08998, 2023.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:261031028" title="">https://api.semanticscholar.org/CorpusID:261031028</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hartvigsen et al. (2022)</span>
<span class="ltx_bibblock">
Thomas Hartvigsen, Saadia Gabriel, Hamid Palangi, Maarten Sap, Dipankar Ray, and Ece Kamar.

</span>
<span class="ltx_bibblock">Toxigen: A large-scale machine-generated dataset for implicit and adversarial hate speech detection.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">Proceedings of the 60th Annual Meeting of the Association for Computational Linguistics</em>, 2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hendrycks et al. (2020)</span>
<span class="ltx_bibblock">
Dan Hendrycks, Collin Burns, Steven Basart, Andy Zou, Mantas Mazeika, Dawn Song, and Jacob Steinhardt.

</span>
<span class="ltx_bibblock">Measuring massive multitask language understanding.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">arXiv preprint arXiv:2009.03300</em>, 2020.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Honovich et al. (2022)</span>
<span class="ltx_bibblock">
Or Honovich, Thomas Scialom, Omer Levy, and Timo Schick.

</span>
<span class="ltx_bibblock">Unnatural instructions: Tuning language models with (almost) no human labor.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">ArXiv</em>, abs/2212.09689, 2022.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:254853659" title="">https://api.semanticscholar.org/CorpusID:254853659</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2023)</span>
<span class="ltx_bibblock">
Shengding Hu, Yi-Xiao Luo, Huadong Wang, Xingyi Cheng, Zhiyuan Liu, and Maosong Sun.

</span>
<span class="ltx_bibblock">Won’t get fooled again: Answering questions with false premises.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Annual Meeting of the Association for Computational Linguistics</em>, 2023.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:259341789" title="">https://api.semanticscholar.org/CorpusID:259341789</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2024)</span>
<span class="ltx_bibblock">
Yulan Hu, Qingyang Li, Ouyang Sheng, Ge Chen, Kaihui Chen, Lijun Mei, Xucheng Ye, Fuzheng Zhang, and Yong Liu.

</span>
<span class="ltx_bibblock">Towards comprehensive preference data collection for reward modeling.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">ArXiv</em>, abs/2406.16486, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:270703662" title="">https://api.semanticscholar.org/CorpusID:270703662</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2024)</span>
<span class="ltx_bibblock">
Shengyi Costa Huang, Agustín Piqueres, Kashif Rasul, Philipp Schmid, Daniel Vila, and Lewis Tunstall.

</span>
<span class="ltx_bibblock">Open hermes preferences.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/datasets/argilla/OpenHermesPreferences" title="">https://huggingface.co/datasets/argilla/OpenHermesPreferences</a>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023)</span>
<span class="ltx_bibblock">
Dongfu Jiang, Xiang Ren, and Bill Yuchen Lin.

</span>
<span class="ltx_bibblock">Llm-blender: Ensembling large language models with pairwise ranking and generative fusion.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">Annual Meeting of the Association for Computational Linguistics</em>, 2023.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:259075564" title="">https://api.semanticscholar.org/CorpusID:259075564</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kim et al. (2024)</span>
<span class="ltx_bibblock">
Dongyoung Kim, Kimin Lee, Jinwoo Shin, and Jaehyung Kim.

</span>
<span class="ltx_bibblock">Aligning large language models with self-generated preference data.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">ArXiv</em>, abs/2406.04412, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:270357971" title="">https://api.semanticscholar.org/CorpusID:270357971</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024a)</span>
<span class="ltx_bibblock">
Ang Li, Qiugen Xiao, Peng Cao, Jian Tang, Yi Yuan, Zijie Zhao, Xiaoyuan Chen, Liang Zhang, Xiangyang Li, Kaitong Yang, Weidong Guo, Yukang Gan, Jeffrey Xu Yu, Dan Tong Wang, and Ying Shan.

</span>
<span class="ltx_bibblock">Hrlaif: Improvements in helpfulness and harmlessness in open-domain reinforcement learning from ai feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">ArXiv</em>, abs/2403.08309, 2024a.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:268379328" title="">https://api.semanticscholar.org/CorpusID:268379328</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024b)</span>
<span class="ltx_bibblock">
Haoran Li, Qingxiu Dong, Zhengyang Tang, Chaojun Wang, Xingxing Zhang, Haoyang Huang, Shaohan Huang, Xiaolong Huang, Zeqiang Huang, Dongdong Zhang, Yuxian Gu, Xin Cheng, Xun Wang, Si-Qing Chen, Li Dong, Wei Lu, Zhifang Sui, Benyou Wang, Wai Lam, and Furu Wei.

</span>
<span class="ltx_bibblock">Synthetic data (almost) from scratch: Generalized instruction tuning for language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">ArXiv</em>, abs/2402.13064, 2024b.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:267759981" title="">https://api.semanticscholar.org/CorpusID:267759981</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024c)</span>
<span class="ltx_bibblock">
Tianle Li, Wei-Lin Chiang, Evan Frick, Lisa Dunlap, Tianhao Wu, Banghua Zhu, Joseph E. Gonzalez, and Ion Stoica.

</span>
<span class="ltx_bibblock">From crowdsourced data to high-quality benchmarks: Arena-hard and benchbuilder pipeline.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">ArXiv</em>, abs/2406.11939, 2024c.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:270562889" title="">https://api.semanticscholar.org/CorpusID:270562889</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2024d)</span>
<span class="ltx_bibblock">
Yixing Li, Yuxian Gu, Li Dong, Dequan Wang, Yu Cheng, and Furu Wei.

</span>
<span class="ltx_bibblock">Direct preference knowledge distillation for large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">ArXiv</em>, abs/2406.19774, 2024d.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:270845775" title="">https://api.semanticscholar.org/CorpusID:270845775</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023)</span>
<span class="ltx_bibblock">
Yuanzhi Li, Sébastien Bubeck, Ronen Eldan, Allie Del Giorno, Suriya Gunasekar, and Yin Tat Lee.

</span>
<span class="ltx_bibblock">Textbooks are all you need ii: phi-1.5 technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">arXiv preprint arXiv:2309.05463</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin et al. (2021)</span>
<span class="ltx_bibblock">
Stephanie Lin, Jacob Hilton, and Owain Evans.

</span>
<span class="ltx_bibblock">Truthfulqa: Measuring how models mimic human falsehoods.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">arXiv preprint arXiv:2109.07958</em>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lu et al. (2023)</span>
<span class="ltx_bibblock">
Jianqiao Lu, Wanjun Zhong, Wenyong Huang, Yufei Wang, Fei Mi, Baojun Wang, Weichao Wang, Lifeng Shang, and Qun Liu.

</span>
<span class="ltx_bibblock">Self: Self-evolution with language feedback.

</span>
<span class="ltx_bibblock">2023.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:263334155" title="">https://api.semanticscholar.org/CorpusID:263334155</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Luo et al. (2023)</span>
<span class="ltx_bibblock">
Haipeng Luo, Qingfeng Sun, Can Xu, Pu Zhao, Jianguang Lou, Chongyang Tao, Xiubo Geng, Qingwei Lin, Shifeng Chen, and Dongmei Zhang.

</span>
<span class="ltx_bibblock">Wizardmath: Empowering mathematical reasoning for large language models via reinforced evol-instruct.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">arXiv preprint arXiv:2308.09583</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Luo et al. (2024)</span>
<span class="ltx_bibblock">
Haipeng Luo, Qingfeng Sun, Can Xu, Pu Zhao, Qingwei Lin, Jianguang Lou, Shifeng Chen, Yansong Tang, and Weizhu Chen.

</span>
<span class="ltx_bibblock">Arena learning: Build data flywheel for llms post-training via simulated chatbot arena.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">ArXiv</em>, abs/2407.10627, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:271213086" title="">https://api.semanticscholar.org/CorpusID:271213086</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Madaan et al. (2023)</span>
<span class="ltx_bibblock">
Aman Madaan, Niket Tandon, Prakhar Gupta, Skyler Hallinan, Luyu Gao, Sarah Wiegreffe, Uri Alon, Nouha Dziri, Shrimai Prabhumoye, Yiming Yang, Sean Welleck, Bodhisattwa Prasad Majumder, Shashank Gupta, Amir Yazdanbakhsh, and Peter Clark.

</span>
<span class="ltx_bibblock">Self-refine: Iterative refinement with self-feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib39.1.1">ArXiv</em>, abs/2303.17651, 2023.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:257900871" title="">https://api.semanticscholar.org/CorpusID:257900871</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Meng et al. (2024)</span>
<span class="ltx_bibblock">
Yu Meng, Mengzhou Xia, and Danqi Chen.

</span>
<span class="ltx_bibblock">Simpo: Simple preference optimization with a reference-free reward.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib40.1.1">arXiv preprint arXiv:2405.14734</em>, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mihaylov et al. (2018)</span>
<span class="ltx_bibblock">
Todor Mihaylov, Peter Clark, Tushar Khot, and Ashish Sabharwal.

</span>
<span class="ltx_bibblock">Can a suit of armor conduct electricity? a new dataset for open book question answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib41.1.1">EMNLP</em>, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nakano et al. (2021)</span>
<span class="ltx_bibblock">
Reiichiro Nakano, Jacob Hilton, Suchir Balaji, Jeff Wu, Long Ouyang, Christina Kim, Christopher Hesse, Shantanu Jain, Vineet Kosaraju, William Saunders, Xu Jiang, Karl Cobbe, Tyna Eloundou, Gretchen Krueger, Kevin Button, Matthew Knight, Benjamin Chess, and John Schulman.

</span>
<span class="ltx_bibblock">Webgpt: Browser-assisted question-answering with human feedback.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib42.1.1">arXiv</em>, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nguyen et al. (2024)</span>
<span class="ltx_bibblock">
Thao Nguyen, Jeffrey Li, Sewoong Oh, Ludwig Schmidt, Jason Weston, Luke Zettlemoyer, and Xian Li.

</span>
<span class="ltx_bibblock">Better alignment with instruction back-and-forth translation.

</span>
<span class="ltx_bibblock">2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:271768943" title="">https://api.semanticscholar.org/CorpusID:271768943</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et al. (2022a)</span>
<span class="ltx_bibblock">
Long Ouyang, Jeff Wu, Xu Jiang, Diogo Almeida, Carroll L. Wainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, John Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda Askell, Peter Welinder, Paul Christiano, Jan Leike, and Ryan Lowe.

</span>
<span class="ltx_bibblock">Training language models to follow instructions with human feedback, 2022a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et al. (2022b)</span>
<span class="ltx_bibblock">
Long Ouyang, Jeff Wu, Xu Jiang, Diogo Almeida, Carroll L. Wainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, John Schulman, Jacob Hilton, Fraser Kelton, Luke E. Miller, Maddie Simens, Amanda Askell, Peter Welinder, Paul Francis Christiano, Jan Leike, and Ryan J. Lowe.

</span>
<span class="ltx_bibblock">Training language models to follow instructions with human feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib45.1.1">ArXiv</em>, abs/2203.02155, 2022b.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:246426909" title="">https://api.semanticscholar.org/CorpusID:246426909</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Penedo et al. (2023)</span>
<span class="ltx_bibblock">
Guilherme Penedo, Quentin Malartic, Daniel Hesslow, Ruxandra Cojocaru, Alessandro Cappelli, Hamza Alobeidli, Baptiste Pannier, Ebtesam Almazrouei, and Julien Launay.

</span>
<span class="ltx_bibblock">The RefinedWeb dataset for Falcon LLM: outperforming curated corpora with web data, and web data only.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib46.1.1">arXiv preprint arXiv:2306.01116</em>, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib47">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rafailov et al. (2024)</span>
<span class="ltx_bibblock">
Rafael Rafailov, Archit Sharma, Eric Mitchell, Christopher D Manning, Stefano Ermon, and Chelsea Finn.

</span>
<span class="ltx_bibblock">Direct preference optimization: Your language model is secretly a reward model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib47.1.1">Advances in Neural Information Processing Systems</em>, 36, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib48">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Reimers &amp; Gurevych (2019)</span>
<span class="ltx_bibblock">
Nils Reimers and Iryna Gurevych.

</span>
<span class="ltx_bibblock">Sentence-bert: Sentence embeddings using siamese bert-networks.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib48.1.1">Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing</em>. Association for Computational Linguistics, 11 2019.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://arxiv.org/abs/1908.10084" title="">https://arxiv.org/abs/1908.10084</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib49">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rosset et al. (2024)</span>
<span class="ltx_bibblock">
Corby Rosset, Ching-An Cheng, Arindam Mitra, Michael Santacroce, Ahmed Awadallah, and Tengyang Xie.

</span>
<span class="ltx_bibblock">Direct nash optimization: Teaching language models to self-improve with general preferences.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib49.1.1">ArXiv</em>, abs/2404.03715, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:268987488" title="">https://api.semanticscholar.org/CorpusID:268987488</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib50">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sakaguchi et al. (2021)</span>
<span class="ltx_bibblock">
Keisuke Sakaguchi, Ronan Le Bras, Chandra Bhagavatula, and Yejin Choi.

</span>
<span class="ltx_bibblock">Winogrande: An adversarial winograd schema challenge at scale.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib50.1.1">Communications of the ACM</em>, 64(9):99–106, 2021.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib51">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shi et al. (2023)</span>
<span class="ltx_bibblock">
Taiwei Shi, Kai Chen, and Jieyu Zhao.

</span>
<span class="ltx_bibblock">Safer-instruct: Aligning language models with automated preference data.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib51.1.1">ArXiv</em>, abs/2311.08685, 2023.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:265212888" title="">https://api.semanticscholar.org/CorpusID:265212888</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib52">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Singh et al. (2022)</span>
<span class="ltx_bibblock">
Chandan Singh, John Xavier Morris, Jyoti Aneja, Alexander M Rush, and Jianfeng Gao.

</span>
<span class="ltx_bibblock">Explaining patterns in data with language models via interpretable autoprompting.

</span>
<span class="ltx_bibblock">2022.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib53">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Son et al. (2023)</span>
<span class="ltx_bibblock">
Guijin Son, Hanwool Lee, Suwan Kim, Huiseo Kim, Jaecheol Lee, Je Won Yeom, Jihyu Jung, Jung Woo Kim, and Songseong Kim.

</span>
<span class="ltx_bibblock">Hae-rae bench: Evaluation of korean knowledge in language models, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib54">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Song et al. (2024)</span>
<span class="ltx_bibblock">
Feifan Song, Bowen Yu, Hao Lang, Haiyang Yu, Fei Huang, Houfeng Wang, and Yongbin Li.

</span>
<span class="ltx_bibblock">Scaling data diversity for fine-tuning language models in human alignment.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib54.1.1">International Conference on Language Resources and Evaluation</em>, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:268512826" title="">https://api.semanticscholar.org/CorpusID:268512826</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib55">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tian et al. (2024)</span>
<span class="ltx_bibblock">
Ye Tian, Baolin Peng, Linfeng Song, Lifeng Jin, Dian Yu, Haitao Mi, and Dong Yu.

</span>
<span class="ltx_bibblock">Toward self-improvement of llms via imagination, searching, and criticizing.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib55.1.1">ArXiv</em>, abs/2404.12253, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:269214525" title="">https://api.semanticscholar.org/CorpusID:269214525</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib56">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tunstall et al. (2023)</span>
<span class="ltx_bibblock">
Lewis Tunstall, Edward Beeching, Nathan Lambert, Nazneen Rajani, Kashif Rasul, Younes Belkada, Shengyi Huang, Leandro von Werra, Clémentine Fourrier, Nathan Habib, Nathan Sarrazin, Omar Sanseviero, Alexander M. Rush, and Thomas Wolf.

</span>
<span class="ltx_bibblock">Zephyr: Direct distillation of lm alignment, 2023.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib57">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2024)</span>
<span class="ltx_bibblock">
Tianlu Wang, Ilia Kulikov, Olga Golovneva, Ping Yu, Weizhe Yuan, Jane Dwivedi-Yu, Richard Yuanzhe Pang, Maryam Fazel-Zarandi, Jason Weston, and Xian Li.

</span>
<span class="ltx_bibblock">Self-taught evaluators.

</span>
<span class="ltx_bibblock">2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:271709606" title="">https://api.semanticscholar.org/CorpusID:271709606</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib58">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2022)</span>
<span class="ltx_bibblock">
Yizhong Wang, Yeganeh Kordi, Swaroop Mishra, Alisa Liu, Noah A. Smith, Daniel Khashabi, and Hannaneh Hajishirzi.

</span>
<span class="ltx_bibblock">Self-instruct: Aligning language models with self-generated instructions.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib58.1.1">Annual Meeting of the Association for Computational Linguistics</em>, 2022.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:254877310" title="">https://api.semanticscholar.org/CorpusID:254877310</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib59">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al. (2024a)</span>
<span class="ltx_bibblock">
Tianhao Wu, Weizhe Yuan, Olga Golovneva, Jing Xu, Yuandong Tian, Jiantao Jiao, Jason Weston, and Sainbayar Sukhbaatar.

</span>
<span class="ltx_bibblock">Meta-rewarding language models: Self-improving alignment with llm-as-a-meta-judge.

</span>
<span class="ltx_bibblock">2024a.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:271533411" title="">https://api.semanticscholar.org/CorpusID:271533411</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib60">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wu et al. (2024b)</span>
<span class="ltx_bibblock">
Yue Wu, Zhiqing Sun, Huizhuo Yuan, Kaixuan Ji, Yiming Yang, and Quanquan Gu.

</span>
<span class="ltx_bibblock">Self-play preference optimization for language model alignment.

</span>
<span class="ltx_bibblock">2024b.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib61">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2023a)</span>
<span class="ltx_bibblock">
Can Xu, Qingfeng Sun, Kai Zheng, Xiubo Geng, Pu Zhao, Jiazhan Feng, Chongyang Tao, and Daxin Jiang.

</span>
<span class="ltx_bibblock">Wizardlm: Empowering large language models to follow complex instructions.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib61.1.1">arXiv preprint arXiv:2304.12244</em>, 2023a.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib62">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2023b)</span>
<span class="ltx_bibblock">
Canwen Xu, Daya Guo, Nan Duan, and Julian McAuley.

</span>
<span class="ltx_bibblock">Baize: An open-source chat model with parameter-efficient tuning on self-chat data.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib62.1.1">arXiv preprint arXiv:2304.01196</em>, 2023b.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib63">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yin et al. (2024)</span>
<span class="ltx_bibblock">
Yueqin Yin, Zhendong Wang, Yujia Xie, Weizhu Chen, and Mingyuan Zhou.

</span>
<span class="ltx_bibblock">Self-augmented preference optimization: Off-policy paradigms for language model alignment.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib63.1.1">ArXiv</em>, abs/2405.20830, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:270199610" title="">https://api.semanticscholar.org/CorpusID:270199610</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib64">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yuan et al. (2024)</span>
<span class="ltx_bibblock">
Weizhe Yuan, Richard Yuanzhe Pang, Kyunghyun Cho, Sainbayar Sukhbaatar, Jing Xu, and Jason Weston.

</span>
<span class="ltx_bibblock">Self-rewarding language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib64.1.1">ArXiv</em>, abs/2401.10020, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:267035293" title="">https://api.semanticscholar.org/CorpusID:267035293</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib65">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zellers et al. (2019)</span>
<span class="ltx_bibblock">
Rowan Zellers, Ari Holtzman, Yonatan Bisk, Ali Farhadi, and Yejin Choi.

</span>
<span class="ltx_bibblock">Hellaswag: Can a machine really finish your sentence?

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib65.1.1">arXiv preprint arXiv:1905.07830</em>, 2019.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib66">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2024)</span>
<span class="ltx_bibblock">
Dan Zhang, Sining Zhoubian, Yisong Yue, Yuxiao Dong, and Jie Tang.

</span>
<span class="ltx_bibblock">Rest-mcts*: Llm self-training via process reward guided tree search.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib66.1.1">ArXiv</em>, abs/2406.03816, 2024.

</span>
<span class="ltx_bibblock">URL <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://api.semanticscholar.org/CorpusID:270285630" title="">https://api.semanticscholar.org/CorpusID:270285630</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib67">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zheng et al. (2024)</span>
<span class="ltx_bibblock">
Lianmin Zheng, Wei-Lin Chiang, Ying Sheng, Siyuan Zhuang, Zhanghao Wu, Yonghao Zhuang, Zi Lin, Zhuohan Li, Dacheng Li, Eric Xing, et al.

</span>
<span class="ltx_bibblock">Judging llm-as-a-judge with mt-bench and chatbot arena.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib67.1.1">Advances in Neural Information Processing Systems</em>, 36, 2024.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib68">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhong et al. (2022)</span>
<span class="ltx_bibblock">
Ruiqi Zhong, Charlie Snell, Dan Klein, and Jacob Steinhardt.

</span>
<span class="ltx_bibblock">Describing differences between text distributions with natural language.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib68.1.1">International Conference on Machine Learning</em>, pp.  27099–27116. PMLR, 2022.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Limitations</h2>
<div class="ltx_para ltx_noindent" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">Our approach begins with a small SFT dataset and does not necessitate specifically labeled data for training a response improver. We assume that model-generated outputs closely resemble the gold standard responses in the SFT, enabling them to serve as training data for the response improver. This necessitates filtering out pairs where the gold standard is inferior to the model-generated output. Such data can cause the response improver to rewrite text through paraphrasing or substantial alteration, as the training data comprises pseudo pairs rather than minimally edited original responses. While prompting a more powerful LLM to generate rewriting-specific data, as suggested by <cite class="ltx_cite ltx_citemacro_citet">Lu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib36" title="">2023</a>)</cite>, can alleviate this, it sacrifices the benefit of learning the distribution gap.</p>
</div>
<div class="ltx_para ltx_noindent" id="Sx1.p2">
<p class="ltx_p" id="Sx1.p2.1">SynPO leverages a small, high-quality dataset repeatedly to guide synthetic data generation, making the seed data quality vital. This approach requires only a small amount of high-quality data for validation, significantly reducing annotation costs. Additionally, recent work on direct on-policy sampling methods <cite class="ltx_cite ltx_citemacro_citep">(Wu et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib60" title="">2024b</a>)</cite>, which do not need additional SFT data, shows considerable promise. After our final round of improvements, the model-generated responses are already of high quality. Future enhancements can incorporate on-policy preference optimization techniques to further refine the model.</p>
</div>
</section>
<section class="ltx_appendix" id="Ax1">
<h2 class="ltx_title ltx_title_appendix">Appendix</h2>
</section>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Algorithm</h2>
<div class="ltx_para" id="A1.p1">
<p class="ltx_p" id="A1.p1.1">We provide the overall pipeline of SynPO in Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#alg1" title="Algorithm 1 ‣ Appendix A Algorithm ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.4.1.1">Algorithm 1</span> </span> <span class="ltx_text ltx_font_typewriter" id="alg1.5.2">Synthetic Preference Optimization</span><span class="ltx_text ltx_font_typewriter" id="alg1.6.3">(SynPO)</span></figcaption>
<div class="ltx_inline-block ltx_transformed_outer" id="alg1.7" style="width:397.5pt;height:147.2pt;vertical-align:-70.6pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<div class="ltx_listing ltx_minipage ltx_align_middle ltx_listing" id="alg1.7.1" style="width:397.5pt;">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span>  <span class="ltx_text ltx_font_bold" id="alg1.l1.1">Input</span>: Initial policy <math alttext="\pi_{\bm{\theta}_{0}}" class="ltx_Math" display="inline" id="alg1.l1.m1.1"><semantics id="alg1.l1.m1.1a"><msub id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml"><mi id="alg1.l1.m1.1.1.2" xref="alg1.l1.m1.1.1.2.cmml">π</mi><msub id="alg1.l1.m1.1.1.3" xref="alg1.l1.m1.1.1.3.cmml"><mi id="alg1.l1.m1.1.1.3.2" xref="alg1.l1.m1.1.1.3.2.cmml">𝜽</mi><mn id="alg1.l1.m1.1.1.3.3" xref="alg1.l1.m1.1.1.3.3.cmml">0</mn></msub></msub><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b"><apply id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1"><csymbol cd="ambiguous" id="alg1.l1.m1.1.1.1.cmml" xref="alg1.l1.m1.1.1">subscript</csymbol><ci id="alg1.l1.m1.1.1.2.cmml" xref="alg1.l1.m1.1.1.2">𝜋</ci><apply id="alg1.l1.m1.1.1.3.cmml" xref="alg1.l1.m1.1.1.3"><csymbol cd="ambiguous" id="alg1.l1.m1.1.1.3.1.cmml" xref="alg1.l1.m1.1.1.3">subscript</csymbol><ci id="alg1.l1.m1.1.1.3.2.cmml" xref="alg1.l1.m1.1.1.3.2">𝜽</ci><cn id="alg1.l1.m1.1.1.3.3.cmml" type="integer" xref="alg1.l1.m1.1.1.3.3">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.1c">\pi_{\bm{\theta}_{0}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.1d">italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, validation set <math alttext="\left\{(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{i})\right\}_{i=0}^{n}" class="ltx_Math" display="inline" id="alg1.l1.m2.1"><semantics id="alg1.l1.m2.1a"><msubsup id="alg1.l1.m2.1.1" xref="alg1.l1.m2.1.1.cmml"><mrow id="alg1.l1.m2.1.1.1.1.1" xref="alg1.l1.m2.1.1.1.1.2.cmml"><mo id="alg1.l1.m2.1.1.1.1.1.2" xref="alg1.l1.m2.1.1.1.1.2.cmml">{</mo><mrow id="alg1.l1.m2.1.1.1.1.1.1.2" xref="alg1.l1.m2.1.1.1.1.1.1.3.cmml"><mo id="alg1.l1.m2.1.1.1.1.1.1.2.3" stretchy="false" xref="alg1.l1.m2.1.1.1.1.1.1.3.cmml">(</mo><msubsup id="alg1.l1.m2.1.1.1.1.1.1.1.1" xref="alg1.l1.m2.1.1.1.1.1.1.1.1.cmml"><mi id="alg1.l1.m2.1.1.1.1.1.1.1.1.2.2" xref="alg1.l1.m2.1.1.1.1.1.1.1.1.2.2.cmml">𝐱</mi><mi id="alg1.l1.m2.1.1.1.1.1.1.1.1.3" xref="alg1.l1.m2.1.1.1.1.1.1.1.1.3.cmml">i</mi><mo id="alg1.l1.m2.1.1.1.1.1.1.1.1.2.3" xref="alg1.l1.m2.1.1.1.1.1.1.1.1.2.3.cmml">∗</mo></msubsup><mo id="alg1.l1.m2.1.1.1.1.1.1.2.4" xref="alg1.l1.m2.1.1.1.1.1.1.3.cmml">,</mo><msubsup id="alg1.l1.m2.1.1.1.1.1.1.2.2" xref="alg1.l1.m2.1.1.1.1.1.1.2.2.cmml"><mi id="alg1.l1.m2.1.1.1.1.1.1.2.2.2.2" xref="alg1.l1.m2.1.1.1.1.1.1.2.2.2.2.cmml">𝐲</mi><mi id="alg1.l1.m2.1.1.1.1.1.1.2.2.3" xref="alg1.l1.m2.1.1.1.1.1.1.2.2.3.cmml">i</mi><mo id="alg1.l1.m2.1.1.1.1.1.1.2.2.2.3" xref="alg1.l1.m2.1.1.1.1.1.1.2.2.2.3.cmml">∗</mo></msubsup><mo id="alg1.l1.m2.1.1.1.1.1.1.2.5" stretchy="false" xref="alg1.l1.m2.1.1.1.1.1.1.3.cmml">)</mo></mrow><mo id="alg1.l1.m2.1.1.1.1.1.3" xref="alg1.l1.m2.1.1.1.1.2.cmml">}</mo></mrow><mrow id="alg1.l1.m2.1.1.1.3" xref="alg1.l1.m2.1.1.1.3.cmml"><mi id="alg1.l1.m2.1.1.1.3.2" xref="alg1.l1.m2.1.1.1.3.2.cmml">i</mi><mo id="alg1.l1.m2.1.1.1.3.1" xref="alg1.l1.m2.1.1.1.3.1.cmml">=</mo><mn id="alg1.l1.m2.1.1.1.3.3" xref="alg1.l1.m2.1.1.1.3.3.cmml">0</mn></mrow><mi id="alg1.l1.m2.1.1.3" xref="alg1.l1.m2.1.1.3.cmml">n</mi></msubsup><annotation-xml encoding="MathML-Content" id="alg1.l1.m2.1b"><apply id="alg1.l1.m2.1.1.cmml" xref="alg1.l1.m2.1.1"><csymbol cd="ambiguous" id="alg1.l1.m2.1.1.2.cmml" xref="alg1.l1.m2.1.1">superscript</csymbol><apply id="alg1.l1.m2.1.1.1.cmml" xref="alg1.l1.m2.1.1"><csymbol cd="ambiguous" id="alg1.l1.m2.1.1.1.2.cmml" xref="alg1.l1.m2.1.1">subscript</csymbol><set id="alg1.l1.m2.1.1.1.1.2.cmml" xref="alg1.l1.m2.1.1.1.1.1"><interval closure="open" id="alg1.l1.m2.1.1.1.1.1.1.3.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.2"><apply id="alg1.l1.m2.1.1.1.1.1.1.1.1.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l1.m2.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="alg1.l1.m2.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l1.m2.1.1.1.1.1.1.1.1.2.1.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="alg1.l1.m2.1.1.1.1.1.1.1.1.2.2.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.1.1.2.2">𝐱</ci><times id="alg1.l1.m2.1.1.1.1.1.1.1.1.2.3.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.1.1.2.3"></times></apply><ci id="alg1.l1.m2.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="alg1.l1.m2.1.1.1.1.1.1.2.2.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="alg1.l1.m2.1.1.1.1.1.1.2.2.1.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.2.2">subscript</csymbol><apply id="alg1.l1.m2.1.1.1.1.1.1.2.2.2.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="alg1.l1.m2.1.1.1.1.1.1.2.2.2.1.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.2.2">superscript</csymbol><ci id="alg1.l1.m2.1.1.1.1.1.1.2.2.2.2.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.2.2.2.2">𝐲</ci><times id="alg1.l1.m2.1.1.1.1.1.1.2.2.2.3.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.2.2.2.3"></times></apply><ci id="alg1.l1.m2.1.1.1.1.1.1.2.2.3.cmml" xref="alg1.l1.m2.1.1.1.1.1.1.2.2.3">𝑖</ci></apply></interval></set><apply id="alg1.l1.m2.1.1.1.3.cmml" xref="alg1.l1.m2.1.1.1.3"><eq id="alg1.l1.m2.1.1.1.3.1.cmml" xref="alg1.l1.m2.1.1.1.3.1"></eq><ci id="alg1.l1.m2.1.1.1.3.2.cmml" xref="alg1.l1.m2.1.1.1.3.2">𝑖</ci><cn id="alg1.l1.m2.1.1.1.3.3.cmml" type="integer" xref="alg1.l1.m2.1.1.1.3.3">0</cn></apply></apply><ci id="alg1.l1.m2.1.1.3.cmml" xref="alg1.l1.m2.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m2.1c">\left\{(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{i})\right\}_{i=0}^{n}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m2.1d">{ ( bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) } start_POSTSUBSCRIPT italic_i = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT</annotation></semantics></math>, keyword list set <math alttext="\mathcal{K}" class="ltx_Math" display="inline" id="alg1.l1.m3.1"><semantics id="alg1.l1.m3.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.l1.m3.1.1" xref="alg1.l1.m3.1.1.cmml">𝒦</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m3.1b"><ci id="alg1.l1.m3.1.1.cmml" xref="alg1.l1.m3.1.1">𝒦</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m3.1c">\mathcal{K}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m3.1d">caligraphic_K</annotation></semantics></math>, prompt generator <math alttext="\mathcal{G}" class="ltx_Math" display="inline" id="alg1.l1.m4.1"><semantics id="alg1.l1.m4.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.l1.m4.1.1" xref="alg1.l1.m4.1.1.cmml">𝒢</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m4.1b"><ci id="alg1.l1.m4.1.1.cmml" xref="alg1.l1.m4.1.1">𝒢</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m4.1c">\mathcal{G}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m4.1d">caligraphic_G</annotation></semantics></math>, data filter <math alttext="\mathcal{F}" class="ltx_Math" display="inline" id="alg1.l1.m5.1"><semantics id="alg1.l1.m5.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.l1.m5.1.1" xref="alg1.l1.m5.1.1.cmml">ℱ</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m5.1b"><ci id="alg1.l1.m5.1.1.cmml" xref="alg1.l1.m5.1.1">ℱ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m5.1c">\mathcal{F}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m5.1d">caligraphic_F</annotation></semantics></math>, synthetic preference data <math alttext="\mathcal{D}=\emptyset" class="ltx_Math" display="inline" id="alg1.l1.m6.1"><semantics id="alg1.l1.m6.1a"><mrow id="alg1.l1.m6.1.1" xref="alg1.l1.m6.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l1.m6.1.1.2" xref="alg1.l1.m6.1.1.2.cmml">𝒟</mi><mo id="alg1.l1.m6.1.1.1" xref="alg1.l1.m6.1.1.1.cmml">=</mo><mi id="alg1.l1.m6.1.1.3" mathvariant="normal" xref="alg1.l1.m6.1.1.3.cmml">∅</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l1.m6.1b"><apply id="alg1.l1.m6.1.1.cmml" xref="alg1.l1.m6.1.1"><eq id="alg1.l1.m6.1.1.1.cmml" xref="alg1.l1.m6.1.1.1"></eq><ci id="alg1.l1.m6.1.1.2.cmml" xref="alg1.l1.m6.1.1.2">𝒟</ci><emptyset id="alg1.l1.m6.1.1.3.cmml" xref="alg1.l1.m6.1.1.3"></emptyset></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m6.1c">\mathcal{D}=\emptyset</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m6.1d">caligraphic_D = ∅</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span>  <span class="ltx_text ltx_font_bold" id="alg1.l2.1">for</span> <math alttext="t=1,2,\dots" class="ltx_Math" display="inline" id="alg1.l2.m1.3"><semantics id="alg1.l2.m1.3a"><mrow id="alg1.l2.m1.3.4" xref="alg1.l2.m1.3.4.cmml"><mi id="alg1.l2.m1.3.4.2" xref="alg1.l2.m1.3.4.2.cmml">t</mi><mo id="alg1.l2.m1.3.4.1" xref="alg1.l2.m1.3.4.1.cmml">=</mo><mrow id="alg1.l2.m1.3.4.3.2" xref="alg1.l2.m1.3.4.3.1.cmml"><mn id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml">1</mn><mo id="alg1.l2.m1.3.4.3.2.1" xref="alg1.l2.m1.3.4.3.1.cmml">,</mo><mn id="alg1.l2.m1.2.2" xref="alg1.l2.m1.2.2.cmml">2</mn><mo id="alg1.l2.m1.3.4.3.2.2" xref="alg1.l2.m1.3.4.3.1.cmml">,</mo><mi id="alg1.l2.m1.3.3" mathvariant="normal" xref="alg1.l2.m1.3.3.cmml">…</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.3b"><apply id="alg1.l2.m1.3.4.cmml" xref="alg1.l2.m1.3.4"><eq id="alg1.l2.m1.3.4.1.cmml" xref="alg1.l2.m1.3.4.1"></eq><ci id="alg1.l2.m1.3.4.2.cmml" xref="alg1.l2.m1.3.4.2">𝑡</ci><list id="alg1.l2.m1.3.4.3.1.cmml" xref="alg1.l2.m1.3.4.3.2"><cn id="alg1.l2.m1.1.1.cmml" type="integer" xref="alg1.l2.m1.1.1">1</cn><cn id="alg1.l2.m1.2.2.cmml" type="integer" xref="alg1.l2.m1.2.2">2</cn><ci id="alg1.l2.m1.3.3.cmml" xref="alg1.l2.m1.3.3">…</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.3c">t=1,2,\dots</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.3d">italic_t = 1 , 2 , …</annotation></semantics></math> <span class="ltx_text ltx_font_bold" id="alg1.l2.2">do</span>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>     Generate <math alttext="m" class="ltx_Math" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><mi id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b"><ci id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">m</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_m</annotation></semantics></math> synthetic prompts <math alttext="\{\mathbf{x}_{i}\}_{i=1}^{m}" class="ltx_Math" display="inline" id="alg1.l3.m2.1"><semantics id="alg1.l3.m2.1a"><msubsup id="alg1.l3.m2.1.1" xref="alg1.l3.m2.1.1.cmml"><mrow id="alg1.l3.m2.1.1.1.1.1" xref="alg1.l3.m2.1.1.1.1.2.cmml"><mo id="alg1.l3.m2.1.1.1.1.1.2" stretchy="false" xref="alg1.l3.m2.1.1.1.1.2.cmml">{</mo><msub id="alg1.l3.m2.1.1.1.1.1.1" xref="alg1.l3.m2.1.1.1.1.1.1.cmml"><mi id="alg1.l3.m2.1.1.1.1.1.1.2" xref="alg1.l3.m2.1.1.1.1.1.1.2.cmml">𝐱</mi><mi id="alg1.l3.m2.1.1.1.1.1.1.3" xref="alg1.l3.m2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l3.m2.1.1.1.1.1.3" stretchy="false" xref="alg1.l3.m2.1.1.1.1.2.cmml">}</mo></mrow><mrow id="alg1.l3.m2.1.1.1.3" xref="alg1.l3.m2.1.1.1.3.cmml"><mi id="alg1.l3.m2.1.1.1.3.2" xref="alg1.l3.m2.1.1.1.3.2.cmml">i</mi><mo id="alg1.l3.m2.1.1.1.3.1" xref="alg1.l3.m2.1.1.1.3.1.cmml">=</mo><mn id="alg1.l3.m2.1.1.1.3.3" xref="alg1.l3.m2.1.1.1.3.3.cmml">1</mn></mrow><mi id="alg1.l3.m2.1.1.3" xref="alg1.l3.m2.1.1.3.cmml">m</mi></msubsup><annotation-xml encoding="MathML-Content" id="alg1.l3.m2.1b"><apply id="alg1.l3.m2.1.1.cmml" xref="alg1.l3.m2.1.1"><csymbol cd="ambiguous" id="alg1.l3.m2.1.1.2.cmml" xref="alg1.l3.m2.1.1">superscript</csymbol><apply id="alg1.l3.m2.1.1.1.cmml" xref="alg1.l3.m2.1.1"><csymbol cd="ambiguous" id="alg1.l3.m2.1.1.1.2.cmml" xref="alg1.l3.m2.1.1">subscript</csymbol><set id="alg1.l3.m2.1.1.1.1.2.cmml" xref="alg1.l3.m2.1.1.1.1.1"><apply id="alg1.l3.m2.1.1.1.1.1.1.cmml" xref="alg1.l3.m2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l3.m2.1.1.1.1.1.1.1.cmml" xref="alg1.l3.m2.1.1.1.1.1.1">subscript</csymbol><ci id="alg1.l3.m2.1.1.1.1.1.1.2.cmml" xref="alg1.l3.m2.1.1.1.1.1.1.2">𝐱</ci><ci id="alg1.l3.m2.1.1.1.1.1.1.3.cmml" xref="alg1.l3.m2.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="alg1.l3.m2.1.1.1.3.cmml" xref="alg1.l3.m2.1.1.1.3"><eq id="alg1.l3.m2.1.1.1.3.1.cmml" xref="alg1.l3.m2.1.1.1.3.1"></eq><ci id="alg1.l3.m2.1.1.1.3.2.cmml" xref="alg1.l3.m2.1.1.1.3.2">𝑖</ci><cn id="alg1.l3.m2.1.1.1.3.3.cmml" type="integer" xref="alg1.l3.m2.1.1.1.3.3">1</cn></apply></apply><ci id="alg1.l3.m2.1.1.3.cmml" xref="alg1.l3.m2.1.1.3">𝑚</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m2.1c">\{\mathbf{x}_{i}\}_{i=1}^{m}</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m2.1d">{ bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math> with <math alttext="\mathbf{x}_{i}\sim\mathcal{G}(\cdot|\mathbf{k}_{i})" class="ltx_math_unparsed" display="inline" id="alg1.l3.m3.1"><semantics id="alg1.l3.m3.1a"><mrow id="alg1.l3.m3.1b"><msub id="alg1.l3.m3.1.1"><mi id="alg1.l3.m3.1.1.2">𝐱</mi><mi id="alg1.l3.m3.1.1.3">i</mi></msub><mo id="alg1.l3.m3.1.2">∼</mo><mi class="ltx_font_mathcaligraphic" id="alg1.l3.m3.1.3">𝒢</mi><mrow id="alg1.l3.m3.1.4"><mo id="alg1.l3.m3.1.4.1" stretchy="false">(</mo><mo id="alg1.l3.m3.1.4.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="alg1.l3.m3.1.4.3" rspace="0.167em" stretchy="false">|</mo><msub id="alg1.l3.m3.1.4.4"><mi id="alg1.l3.m3.1.4.4.2">𝐤</mi><mi id="alg1.l3.m3.1.4.4.3">i</mi></msub><mo id="alg1.l3.m3.1.4.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l3.m3.1c">\mathbf{x}_{i}\sim\mathcal{G}(\cdot|\mathbf{k}_{i})</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m3.1d">bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ∼ caligraphic_G ( ⋅ | bold_k start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, where <math alttext="\mathbf{k}_{i}" class="ltx_Math" display="inline" id="alg1.l3.m4.1"><semantics id="alg1.l3.m4.1a"><msub id="alg1.l3.m4.1.1" xref="alg1.l3.m4.1.1.cmml"><mi id="alg1.l3.m4.1.1.2" xref="alg1.l3.m4.1.1.2.cmml">𝐤</mi><mi id="alg1.l3.m4.1.1.3" xref="alg1.l3.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.l3.m4.1b"><apply id="alg1.l3.m4.1.1.cmml" xref="alg1.l3.m4.1.1"><csymbol cd="ambiguous" id="alg1.l3.m4.1.1.1.cmml" xref="alg1.l3.m4.1.1">subscript</csymbol><ci id="alg1.l3.m4.1.1.2.cmml" xref="alg1.l3.m4.1.1.2">𝐤</ci><ci id="alg1.l3.m4.1.1.3.cmml" xref="alg1.l3.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m4.1c">\mathbf{k}_{i}</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m4.1d">bold_k start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> represents a list of keywords randomly sampled from <math alttext="\mathcal{K}" class="ltx_Math" display="inline" id="alg1.l3.m5.1"><semantics id="alg1.l3.m5.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.l3.m5.1.1" xref="alg1.l3.m5.1.1.cmml">𝒦</mi><annotation-xml encoding="MathML-Content" id="alg1.l3.m5.1b"><ci id="alg1.l3.m5.1.1.cmml" xref="alg1.l3.m5.1.1">𝒦</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m5.1c">\mathcal{K}</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m5.1d">caligraphic_K</annotation></semantics></math>. 

</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>     Train the response improver <math alttext="\mathcal{R}_{t}" class="ltx_Math" display="inline" id="alg1.l4.m1.1"><semantics id="alg1.l4.m1.1a"><msub id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml">ℛ</mi><mi id="alg1.l4.m1.1.1.3" xref="alg1.l4.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1"><csymbol cd="ambiguous" id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1">subscript</csymbol><ci id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2">ℛ</ci><ci id="alg1.l4.m1.1.1.3.cmml" xref="alg1.l4.m1.1.1.3">𝑡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">\mathcal{R}_{t}</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.1d">caligraphic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT</annotation></semantics></math> from <math alttext="\bm{\theta}_{0}" class="ltx_Math" display="inline" id="alg1.l4.m2.1"><semantics id="alg1.l4.m2.1a"><msub id="alg1.l4.m2.1.1" xref="alg1.l4.m2.1.1.cmml"><mi id="alg1.l4.m2.1.1.2" xref="alg1.l4.m2.1.1.2.cmml">𝜽</mi><mn id="alg1.l4.m2.1.1.3" xref="alg1.l4.m2.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="alg1.l4.m2.1b"><apply id="alg1.l4.m2.1.1.cmml" xref="alg1.l4.m2.1.1"><csymbol cd="ambiguous" id="alg1.l4.m2.1.1.1.cmml" xref="alg1.l4.m2.1.1">subscript</csymbol><ci id="alg1.l4.m2.1.1.2.cmml" xref="alg1.l4.m2.1.1.2">𝜽</ci><cn id="alg1.l4.m2.1.1.3.cmml" type="integer" xref="alg1.l4.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m2.1c">\bm{\theta}_{0}</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m2.1d">bold_italic_θ start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="\mathcal{R}_{t}\leftarrow\operatorname*{arg\,min}_{\bm{\theta}}\sum_{i=0}^{n}%
\mathcal{L}(\pi_{\bm{\theta}}(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{(t-1),i}),%
\mathbf{y}^{*}_{i})" class="ltx_Math" display="inline" id="alg1.l4.m3.4"><semantics id="alg1.l4.m3.4a"><mrow id="alg1.l4.m3.4.4" xref="alg1.l4.m3.4.4.cmml"><msub id="alg1.l4.m3.4.4.4" xref="alg1.l4.m3.4.4.4.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l4.m3.4.4.4.2" xref="alg1.l4.m3.4.4.4.2.cmml">ℛ</mi><mi id="alg1.l4.m3.4.4.4.3" xref="alg1.l4.m3.4.4.4.3.cmml">t</mi></msub><mo id="alg1.l4.m3.4.4.3" stretchy="false" xref="alg1.l4.m3.4.4.3.cmml">←</mo><mrow id="alg1.l4.m3.4.4.2" xref="alg1.l4.m3.4.4.2.cmml"><msub id="alg1.l4.m3.4.4.2.4" xref="alg1.l4.m3.4.4.2.4.cmml"><mrow id="alg1.l4.m3.4.4.2.4.2" xref="alg1.l4.m3.4.4.2.4.2.cmml"><mi id="alg1.l4.m3.4.4.2.4.2.2" xref="alg1.l4.m3.4.4.2.4.2.2.cmml">arg</mi><mo id="alg1.l4.m3.4.4.2.4.2.1" lspace="0.170em" xref="alg1.l4.m3.4.4.2.4.2.1.cmml">⁢</mo><mi id="alg1.l4.m3.4.4.2.4.2.3" xref="alg1.l4.m3.4.4.2.4.2.3.cmml">min</mi></mrow><mi id="alg1.l4.m3.4.4.2.4.3" xref="alg1.l4.m3.4.4.2.4.3.cmml">𝜽</mi></msub><mo id="alg1.l4.m3.4.4.2.3" xref="alg1.l4.m3.4.4.2.3.cmml">⁢</mo><mrow id="alg1.l4.m3.4.4.2.2" xref="alg1.l4.m3.4.4.2.2.cmml"><msubsup id="alg1.l4.m3.4.4.2.2.3" xref="alg1.l4.m3.4.4.2.2.3.cmml"><mo id="alg1.l4.m3.4.4.2.2.3.2.2" xref="alg1.l4.m3.4.4.2.2.3.2.2.cmml">∑</mo><mrow id="alg1.l4.m3.4.4.2.2.3.2.3" xref="alg1.l4.m3.4.4.2.2.3.2.3.cmml"><mi id="alg1.l4.m3.4.4.2.2.3.2.3.2" xref="alg1.l4.m3.4.4.2.2.3.2.3.2.cmml">i</mi><mo id="alg1.l4.m3.4.4.2.2.3.2.3.1" xref="alg1.l4.m3.4.4.2.2.3.2.3.1.cmml">=</mo><mn id="alg1.l4.m3.4.4.2.2.3.2.3.3" xref="alg1.l4.m3.4.4.2.2.3.2.3.3.cmml">0</mn></mrow><mi id="alg1.l4.m3.4.4.2.2.3.3" xref="alg1.l4.m3.4.4.2.2.3.3.cmml">n</mi></msubsup><mrow id="alg1.l4.m3.4.4.2.2.2" xref="alg1.l4.m3.4.4.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.l4.m3.4.4.2.2.2.4" xref="alg1.l4.m3.4.4.2.2.2.4.cmml">ℒ</mi><mo id="alg1.l4.m3.4.4.2.2.2.3" xref="alg1.l4.m3.4.4.2.2.2.3.cmml">⁢</mo><mrow id="alg1.l4.m3.4.4.2.2.2.2.2" xref="alg1.l4.m3.4.4.2.2.2.2.3.cmml"><mo id="alg1.l4.m3.4.4.2.2.2.2.2.3" stretchy="false" xref="alg1.l4.m3.4.4.2.2.2.2.3.cmml">(</mo><mrow id="alg1.l4.m3.3.3.1.1.1.1.1.1" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.cmml"><msub id="alg1.l4.m3.3.3.1.1.1.1.1.1.4" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.4.cmml"><mi id="alg1.l4.m3.3.3.1.1.1.1.1.1.4.2" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.4.2.cmml">π</mi><mi id="alg1.l4.m3.3.3.1.1.1.1.1.1.4.3" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.4.3.cmml">𝜽</mi></msub><mo id="alg1.l4.m3.3.3.1.1.1.1.1.1.3" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.3.cmml">⁢</mo><mrow id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.3.cmml"><mo id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.3" stretchy="false" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.3.cmml">(</mo><msubsup id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.cmml"><mi id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.2" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.2.cmml">𝐱</mi><mi id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.3" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.3.cmml">i</mi><mo id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.3" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.3.cmml">∗</mo></msubsup><mo id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.4" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.3.cmml">,</mo><msubsup id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.cmml"><mi id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.2" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.2.cmml">𝐲</mi><mrow id="alg1.l4.m3.2.2.2.2" xref="alg1.l4.m3.2.2.2.3.cmml"><mrow id="alg1.l4.m3.2.2.2.2.1.1" xref="alg1.l4.m3.2.2.2.2.1.1.1.cmml"><mo id="alg1.l4.m3.2.2.2.2.1.1.2" stretchy="false" xref="alg1.l4.m3.2.2.2.2.1.1.1.cmml">(</mo><mrow id="alg1.l4.m3.2.2.2.2.1.1.1" xref="alg1.l4.m3.2.2.2.2.1.1.1.cmml"><mi id="alg1.l4.m3.2.2.2.2.1.1.1.2" xref="alg1.l4.m3.2.2.2.2.1.1.1.2.cmml">t</mi><mo id="alg1.l4.m3.2.2.2.2.1.1.1.1" xref="alg1.l4.m3.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="alg1.l4.m3.2.2.2.2.1.1.1.3" xref="alg1.l4.m3.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo id="alg1.l4.m3.2.2.2.2.1.1.3" stretchy="false" xref="alg1.l4.m3.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="alg1.l4.m3.2.2.2.2.2" xref="alg1.l4.m3.2.2.2.3.cmml">,</mo><mi id="alg1.l4.m3.1.1.1.1" xref="alg1.l4.m3.1.1.1.1.cmml">i</mi></mrow><mo id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.3" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.3.cmml">∗</mo></msubsup><mo id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.5" stretchy="false" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.3.cmml">)</mo></mrow></mrow><mo id="alg1.l4.m3.4.4.2.2.2.2.2.4" xref="alg1.l4.m3.4.4.2.2.2.2.3.cmml">,</mo><msubsup id="alg1.l4.m3.4.4.2.2.2.2.2.2" xref="alg1.l4.m3.4.4.2.2.2.2.2.2.cmml"><mi id="alg1.l4.m3.4.4.2.2.2.2.2.2.2.2" xref="alg1.l4.m3.4.4.2.2.2.2.2.2.2.2.cmml">𝐲</mi><mi id="alg1.l4.m3.4.4.2.2.2.2.2.2.3" xref="alg1.l4.m3.4.4.2.2.2.2.2.2.3.cmml">i</mi><mo id="alg1.l4.m3.4.4.2.2.2.2.2.2.2.3" xref="alg1.l4.m3.4.4.2.2.2.2.2.2.2.3.cmml">∗</mo></msubsup><mo id="alg1.l4.m3.4.4.2.2.2.2.2.5" stretchy="false" xref="alg1.l4.m3.4.4.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m3.4b"><apply id="alg1.l4.m3.4.4.cmml" xref="alg1.l4.m3.4.4"><ci id="alg1.l4.m3.4.4.3.cmml" xref="alg1.l4.m3.4.4.3">←</ci><apply id="alg1.l4.m3.4.4.4.cmml" xref="alg1.l4.m3.4.4.4"><csymbol cd="ambiguous" id="alg1.l4.m3.4.4.4.1.cmml" xref="alg1.l4.m3.4.4.4">subscript</csymbol><ci id="alg1.l4.m3.4.4.4.2.cmml" xref="alg1.l4.m3.4.4.4.2">ℛ</ci><ci id="alg1.l4.m3.4.4.4.3.cmml" xref="alg1.l4.m3.4.4.4.3">𝑡</ci></apply><apply id="alg1.l4.m3.4.4.2.cmml" xref="alg1.l4.m3.4.4.2"><times id="alg1.l4.m3.4.4.2.3.cmml" xref="alg1.l4.m3.4.4.2.3"></times><apply id="alg1.l4.m3.4.4.2.4.cmml" xref="alg1.l4.m3.4.4.2.4"><csymbol cd="ambiguous" id="alg1.l4.m3.4.4.2.4.1.cmml" xref="alg1.l4.m3.4.4.2.4">subscript</csymbol><apply id="alg1.l4.m3.4.4.2.4.2.cmml" xref="alg1.l4.m3.4.4.2.4.2"><times id="alg1.l4.m3.4.4.2.4.2.1.cmml" xref="alg1.l4.m3.4.4.2.4.2.1"></times><ci id="alg1.l4.m3.4.4.2.4.2.2.cmml" xref="alg1.l4.m3.4.4.2.4.2.2">arg</ci><ci id="alg1.l4.m3.4.4.2.4.2.3.cmml" xref="alg1.l4.m3.4.4.2.4.2.3">min</ci></apply><ci id="alg1.l4.m3.4.4.2.4.3.cmml" xref="alg1.l4.m3.4.4.2.4.3">𝜽</ci></apply><apply id="alg1.l4.m3.4.4.2.2.cmml" xref="alg1.l4.m3.4.4.2.2"><apply id="alg1.l4.m3.4.4.2.2.3.cmml" xref="alg1.l4.m3.4.4.2.2.3"><csymbol cd="ambiguous" id="alg1.l4.m3.4.4.2.2.3.1.cmml" xref="alg1.l4.m3.4.4.2.2.3">superscript</csymbol><apply id="alg1.l4.m3.4.4.2.2.3.2.cmml" xref="alg1.l4.m3.4.4.2.2.3"><csymbol cd="ambiguous" id="alg1.l4.m3.4.4.2.2.3.2.1.cmml" xref="alg1.l4.m3.4.4.2.2.3">subscript</csymbol><sum id="alg1.l4.m3.4.4.2.2.3.2.2.cmml" xref="alg1.l4.m3.4.4.2.2.3.2.2"></sum><apply id="alg1.l4.m3.4.4.2.2.3.2.3.cmml" xref="alg1.l4.m3.4.4.2.2.3.2.3"><eq id="alg1.l4.m3.4.4.2.2.3.2.3.1.cmml" xref="alg1.l4.m3.4.4.2.2.3.2.3.1"></eq><ci id="alg1.l4.m3.4.4.2.2.3.2.3.2.cmml" xref="alg1.l4.m3.4.4.2.2.3.2.3.2">𝑖</ci><cn id="alg1.l4.m3.4.4.2.2.3.2.3.3.cmml" type="integer" xref="alg1.l4.m3.4.4.2.2.3.2.3.3">0</cn></apply></apply><ci id="alg1.l4.m3.4.4.2.2.3.3.cmml" xref="alg1.l4.m3.4.4.2.2.3.3">𝑛</ci></apply><apply id="alg1.l4.m3.4.4.2.2.2.cmml" xref="alg1.l4.m3.4.4.2.2.2"><times id="alg1.l4.m3.4.4.2.2.2.3.cmml" xref="alg1.l4.m3.4.4.2.2.2.3"></times><ci id="alg1.l4.m3.4.4.2.2.2.4.cmml" xref="alg1.l4.m3.4.4.2.2.2.4">ℒ</ci><interval closure="open" id="alg1.l4.m3.4.4.2.2.2.2.3.cmml" xref="alg1.l4.m3.4.4.2.2.2.2.2"><apply id="alg1.l4.m3.3.3.1.1.1.1.1.1.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1"><times id="alg1.l4.m3.3.3.1.1.1.1.1.1.3.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.3"></times><apply id="alg1.l4.m3.3.3.1.1.1.1.1.1.4.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="alg1.l4.m3.3.3.1.1.1.1.1.1.4.1.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.4">subscript</csymbol><ci id="alg1.l4.m3.3.3.1.1.1.1.1.1.4.2.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.4.2">𝜋</ci><ci id="alg1.l4.m3.3.3.1.1.1.1.1.1.4.3.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.4.3">𝜽</ci></apply><interval closure="open" id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.3.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2"><apply id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.2">𝐱</ci><times id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.2.3"></times></apply><ci id="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.3.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.1.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2">subscript</csymbol><apply id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.1.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2">superscript</csymbol><ci id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.2.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.2">𝐲</ci><times id="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.3.cmml" xref="alg1.l4.m3.3.3.1.1.1.1.1.1.2.2.2.2.3"></times></apply><list id="alg1.l4.m3.2.2.2.3.cmml" xref="alg1.l4.m3.2.2.2.2"><apply id="alg1.l4.m3.2.2.2.2.1.1.1.cmml" xref="alg1.l4.m3.2.2.2.2.1.1"><minus id="alg1.l4.m3.2.2.2.2.1.1.1.1.cmml" xref="alg1.l4.m3.2.2.2.2.1.1.1.1"></minus><ci id="alg1.l4.m3.2.2.2.2.1.1.1.2.cmml" xref="alg1.l4.m3.2.2.2.2.1.1.1.2">𝑡</ci><cn id="alg1.l4.m3.2.2.2.2.1.1.1.3.cmml" type="integer" xref="alg1.l4.m3.2.2.2.2.1.1.1.3">1</cn></apply><ci id="alg1.l4.m3.1.1.1.1.cmml" xref="alg1.l4.m3.1.1.1.1">𝑖</ci></list></apply></interval></apply><apply id="alg1.l4.m3.4.4.2.2.2.2.2.2.cmml" xref="alg1.l4.m3.4.4.2.2.2.2.2.2"><csymbol cd="ambiguous" id="alg1.l4.m3.4.4.2.2.2.2.2.2.1.cmml" xref="alg1.l4.m3.4.4.2.2.2.2.2.2">subscript</csymbol><apply id="alg1.l4.m3.4.4.2.2.2.2.2.2.2.cmml" xref="alg1.l4.m3.4.4.2.2.2.2.2.2"><csymbol cd="ambiguous" id="alg1.l4.m3.4.4.2.2.2.2.2.2.2.1.cmml" xref="alg1.l4.m3.4.4.2.2.2.2.2.2">superscript</csymbol><ci id="alg1.l4.m3.4.4.2.2.2.2.2.2.2.2.cmml" xref="alg1.l4.m3.4.4.2.2.2.2.2.2.2.2">𝐲</ci><times id="alg1.l4.m3.4.4.2.2.2.2.2.2.2.3.cmml" xref="alg1.l4.m3.4.4.2.2.2.2.2.2.2.3"></times></apply><ci id="alg1.l4.m3.4.4.2.2.2.2.2.2.3.cmml" xref="alg1.l4.m3.4.4.2.2.2.2.2.2.3">𝑖</ci></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m3.4c">\mathcal{R}_{t}\leftarrow\operatorname*{arg\,min}_{\bm{\theta}}\sum_{i=0}^{n}%
\mathcal{L}(\pi_{\bm{\theta}}(\mathbf{x}^{*}_{i},\mathbf{y}^{*}_{(t-1),i}),%
\mathbf{y}^{*}_{i})</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m3.4d">caligraphic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ← start_OPERATOR roman_arg roman_min end_OPERATOR start_POSTSUBSCRIPT bold_italic_θ end_POSTSUBSCRIPT ∑ start_POSTSUBSCRIPT italic_i = 0 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT caligraphic_L ( italic_π start_POSTSUBSCRIPT bold_italic_θ end_POSTSUBSCRIPT ( bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT ) , bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, where <math alttext="\mathbf{y}^{*}_{(t-1),i}\sim\pi_{\bm{\theta}_{t-1}}(\cdot|\mathbf{x}^{*}_{i})" class="ltx_math_unparsed" display="inline" id="alg1.l4.m4.2"><semantics id="alg1.l4.m4.2a"><mrow id="alg1.l4.m4.2b"><msubsup id="alg1.l4.m4.2.3"><mi id="alg1.l4.m4.2.3.2.2">𝐲</mi><mrow id="alg1.l4.m4.2.2.2.2"><mrow id="alg1.l4.m4.2.2.2.2.1.1"><mo id="alg1.l4.m4.2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="alg1.l4.m4.2.2.2.2.1.1.1"><mi id="alg1.l4.m4.2.2.2.2.1.1.1.2">t</mi><mo id="alg1.l4.m4.2.2.2.2.1.1.1.1">−</mo><mn id="alg1.l4.m4.2.2.2.2.1.1.1.3">1</mn></mrow><mo id="alg1.l4.m4.2.2.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="alg1.l4.m4.2.2.2.2.2">,</mo><mi id="alg1.l4.m4.1.1.1.1">i</mi></mrow><mo id="alg1.l4.m4.2.3.2.3">∗</mo></msubsup><mo id="alg1.l4.m4.2.4">∼</mo><msub id="alg1.l4.m4.2.5"><mi id="alg1.l4.m4.2.5.2">π</mi><msub id="alg1.l4.m4.2.5.3"><mi id="alg1.l4.m4.2.5.3.2">𝜽</mi><mrow id="alg1.l4.m4.2.5.3.3"><mi id="alg1.l4.m4.2.5.3.3.2">t</mi><mo id="alg1.l4.m4.2.5.3.3.1">−</mo><mn id="alg1.l4.m4.2.5.3.3.3">1</mn></mrow></msub></msub><mrow id="alg1.l4.m4.2.6"><mo id="alg1.l4.m4.2.6.1" stretchy="false">(</mo><mo id="alg1.l4.m4.2.6.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="alg1.l4.m4.2.6.3" rspace="0.167em" stretchy="false">|</mo><msubsup id="alg1.l4.m4.2.6.4"><mi id="alg1.l4.m4.2.6.4.2.2">𝐱</mi><mi id="alg1.l4.m4.2.6.4.3">i</mi><mo id="alg1.l4.m4.2.6.4.2.3">∗</mo></msubsup><mo id="alg1.l4.m4.2.6.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l4.m4.2c">\mathbf{y}^{*}_{(t-1),i}\sim\pi_{\bm{\theta}_{t-1}}(\cdot|\mathbf{x}^{*}_{i})</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m4.2d">bold_y start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT ∼ italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | bold_x start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> for <math alttext="i\in\{1,\dots,n\}" class="ltx_Math" display="inline" id="alg1.l4.m5.3"><semantics id="alg1.l4.m5.3a"><mrow id="alg1.l4.m5.3.4" xref="alg1.l4.m5.3.4.cmml"><mi id="alg1.l4.m5.3.4.2" xref="alg1.l4.m5.3.4.2.cmml">i</mi><mo id="alg1.l4.m5.3.4.1" xref="alg1.l4.m5.3.4.1.cmml">∈</mo><mrow id="alg1.l4.m5.3.4.3.2" xref="alg1.l4.m5.3.4.3.1.cmml"><mo id="alg1.l4.m5.3.4.3.2.1" stretchy="false" xref="alg1.l4.m5.3.4.3.1.cmml">{</mo><mn id="alg1.l4.m5.1.1" xref="alg1.l4.m5.1.1.cmml">1</mn><mo id="alg1.l4.m5.3.4.3.2.2" xref="alg1.l4.m5.3.4.3.1.cmml">,</mo><mi id="alg1.l4.m5.2.2" mathvariant="normal" xref="alg1.l4.m5.2.2.cmml">…</mi><mo id="alg1.l4.m5.3.4.3.2.3" xref="alg1.l4.m5.3.4.3.1.cmml">,</mo><mi id="alg1.l4.m5.3.3" xref="alg1.l4.m5.3.3.cmml">n</mi><mo id="alg1.l4.m5.3.4.3.2.4" stretchy="false" xref="alg1.l4.m5.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m5.3b"><apply id="alg1.l4.m5.3.4.cmml" xref="alg1.l4.m5.3.4"><in id="alg1.l4.m5.3.4.1.cmml" xref="alg1.l4.m5.3.4.1"></in><ci id="alg1.l4.m5.3.4.2.cmml" xref="alg1.l4.m5.3.4.2">𝑖</ci><set id="alg1.l4.m5.3.4.3.1.cmml" xref="alg1.l4.m5.3.4.3.2"><cn id="alg1.l4.m5.1.1.cmml" type="integer" xref="alg1.l4.m5.1.1">1</cn><ci id="alg1.l4.m5.2.2.cmml" xref="alg1.l4.m5.2.2">…</ci><ci id="alg1.l4.m5.3.3.cmml" xref="alg1.l4.m5.3.3">𝑛</ci></set></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m5.3c">i\in\{1,\dots,n\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m5.3d">italic_i ∈ { 1 , … , italic_n }</annotation></semantics></math>.

</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>     Generate <math alttext="\pi_{\bm{\theta}_{t-1}}" class="ltx_Math" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><msub id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml"><mi id="alg1.l5.m1.1.1.2" xref="alg1.l5.m1.1.1.2.cmml">π</mi><msub id="alg1.l5.m1.1.1.3" xref="alg1.l5.m1.1.1.3.cmml"><mi id="alg1.l5.m1.1.1.3.2" xref="alg1.l5.m1.1.1.3.2.cmml">𝜽</mi><mrow id="alg1.l5.m1.1.1.3.3" xref="alg1.l5.m1.1.1.3.3.cmml"><mi id="alg1.l5.m1.1.1.3.3.2" xref="alg1.l5.m1.1.1.3.3.2.cmml">t</mi><mo id="alg1.l5.m1.1.1.3.3.1" xref="alg1.l5.m1.1.1.3.3.1.cmml">−</mo><mn id="alg1.l5.m1.1.1.3.3.3" xref="alg1.l5.m1.1.1.3.3.3.cmml">1</mn></mrow></msub></msub><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><apply id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1"><csymbol cd="ambiguous" id="alg1.l5.m1.1.1.1.cmml" xref="alg1.l5.m1.1.1">subscript</csymbol><ci id="alg1.l5.m1.1.1.2.cmml" xref="alg1.l5.m1.1.1.2">𝜋</ci><apply id="alg1.l5.m1.1.1.3.cmml" xref="alg1.l5.m1.1.1.3"><csymbol cd="ambiguous" id="alg1.l5.m1.1.1.3.1.cmml" xref="alg1.l5.m1.1.1.3">subscript</csymbol><ci id="alg1.l5.m1.1.1.3.2.cmml" xref="alg1.l5.m1.1.1.3.2">𝜽</ci><apply id="alg1.l5.m1.1.1.3.3.cmml" xref="alg1.l5.m1.1.1.3.3"><minus id="alg1.l5.m1.1.1.3.3.1.cmml" xref="alg1.l5.m1.1.1.3.3.1"></minus><ci id="alg1.l5.m1.1.1.3.3.2.cmml" xref="alg1.l5.m1.1.1.3.3.2">𝑡</ci><cn id="alg1.l5.m1.1.1.3.3.3.cmml" type="integer" xref="alg1.l5.m1.1.1.3.3.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">\pi_{\bm{\theta}_{t-1}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> completions and self-refined completions on the synthetic prompts: <math alttext="\mathbf{y}_{(t-1),i}\sim\pi_{\bm{\theta}_{t-1}}(\cdot|\mathbf{x}_{i})" class="ltx_math_unparsed" display="inline" id="alg1.l5.m2.2"><semantics id="alg1.l5.m2.2a"><mrow id="alg1.l5.m2.2b"><msub id="alg1.l5.m2.2.3"><mi id="alg1.l5.m2.2.3.2">𝐲</mi><mrow id="alg1.l5.m2.2.2.2.2"><mrow id="alg1.l5.m2.2.2.2.2.1.1"><mo id="alg1.l5.m2.2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="alg1.l5.m2.2.2.2.2.1.1.1"><mi id="alg1.l5.m2.2.2.2.2.1.1.1.2">t</mi><mo id="alg1.l5.m2.2.2.2.2.1.1.1.1">−</mo><mn id="alg1.l5.m2.2.2.2.2.1.1.1.3">1</mn></mrow><mo id="alg1.l5.m2.2.2.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="alg1.l5.m2.2.2.2.2.2">,</mo><mi id="alg1.l5.m2.1.1.1.1">i</mi></mrow></msub><mo id="alg1.l5.m2.2.4">∼</mo><msub id="alg1.l5.m2.2.5"><mi id="alg1.l5.m2.2.5.2">π</mi><msub id="alg1.l5.m2.2.5.3"><mi id="alg1.l5.m2.2.5.3.2">𝜽</mi><mrow id="alg1.l5.m2.2.5.3.3"><mi id="alg1.l5.m2.2.5.3.3.2">t</mi><mo id="alg1.l5.m2.2.5.3.3.1">−</mo><mn id="alg1.l5.m2.2.5.3.3.3">1</mn></mrow></msub></msub><mrow id="alg1.l5.m2.2.6"><mo id="alg1.l5.m2.2.6.1" stretchy="false">(</mo><mo id="alg1.l5.m2.2.6.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="alg1.l5.m2.2.6.3" rspace="0.167em" stretchy="false">|</mo><msub id="alg1.l5.m2.2.6.4"><mi id="alg1.l5.m2.2.6.4.2">𝐱</mi><mi id="alg1.l5.m2.2.6.4.3">i</mi></msub><mo id="alg1.l5.m2.2.6.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l5.m2.2c">\mathbf{y}_{(t-1),i}\sim\pi_{\bm{\theta}_{t-1}}(\cdot|\mathbf{x}_{i})</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m2.2d">bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT ∼ italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT italic_t - 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, <math alttext="\overline{\mathbf{y}_{(t-1),i}}\sim\mathcal{R}_{t}(\cdot|\mathbf{x}_{i},%
\mathbf{y}_{(t-1),i})" class="ltx_math_unparsed" display="inline" id="alg1.l5.m3.4"><semantics id="alg1.l5.m3.4a"><mrow id="alg1.l5.m3.4b"><mover accent="true" id="alg1.l5.m3.2.2"><msub id="alg1.l5.m3.2.2.2"><mi id="alg1.l5.m3.2.2.2.4">𝐲</mi><mrow id="alg1.l5.m3.2.2.2.2.2.2"><mrow id="alg1.l5.m3.2.2.2.2.2.2.1.1"><mo id="alg1.l5.m3.2.2.2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="alg1.l5.m3.2.2.2.2.2.2.1.1.1"><mi id="alg1.l5.m3.2.2.2.2.2.2.1.1.1.2">t</mi><mo id="alg1.l5.m3.2.2.2.2.2.2.1.1.1.1">−</mo><mn id="alg1.l5.m3.2.2.2.2.2.2.1.1.1.3">1</mn></mrow><mo id="alg1.l5.m3.2.2.2.2.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="alg1.l5.m3.2.2.2.2.2.2.2">,</mo><mi id="alg1.l5.m3.1.1.1.1.1.1">i</mi></mrow></msub><mo id="alg1.l5.m3.2.2.3">¯</mo></mover><mo id="alg1.l5.m3.4.5">∼</mo><msub id="alg1.l5.m3.4.6"><mi class="ltx_font_mathcaligraphic" id="alg1.l5.m3.4.6.2">ℛ</mi><mi id="alg1.l5.m3.4.6.3">t</mi></msub><mrow id="alg1.l5.m3.4.7"><mo id="alg1.l5.m3.4.7.1" stretchy="false">(</mo><mo id="alg1.l5.m3.4.7.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="alg1.l5.m3.4.7.3" rspace="0.167em" stretchy="false">|</mo><msub id="alg1.l5.m3.4.7.4"><mi id="alg1.l5.m3.4.7.4.2">𝐱</mi><mi id="alg1.l5.m3.4.7.4.3">i</mi></msub><mo id="alg1.l5.m3.4.7.5">,</mo><msub id="alg1.l5.m3.4.7.6"><mi id="alg1.l5.m3.4.7.6.2">𝐲</mi><mrow id="alg1.l5.m3.4.4.2.2"><mrow id="alg1.l5.m3.4.4.2.2.1.1"><mo id="alg1.l5.m3.4.4.2.2.1.1.2" stretchy="false">(</mo><mrow id="alg1.l5.m3.4.4.2.2.1.1.1"><mi id="alg1.l5.m3.4.4.2.2.1.1.1.2">t</mi><mo id="alg1.l5.m3.4.4.2.2.1.1.1.1">−</mo><mn id="alg1.l5.m3.4.4.2.2.1.1.1.3">1</mn></mrow><mo id="alg1.l5.m3.4.4.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="alg1.l5.m3.4.4.2.2.2">,</mo><mi id="alg1.l5.m3.3.3.1.1">i</mi></mrow></msub><mo id="alg1.l5.m3.4.7.7" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l5.m3.4c">\overline{\mathbf{y}_{(t-1),i}}\sim\mathcal{R}_{t}(\cdot|\mathbf{x}_{i},%
\mathbf{y}_{(t-1),i})</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m3.4d">over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG ∼ caligraphic_R start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ( ⋅ | bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> for <math alttext="i\in\{1,\dots,m\}" class="ltx_Math" display="inline" id="alg1.l5.m4.3"><semantics id="alg1.l5.m4.3a"><mrow id="alg1.l5.m4.3.4" xref="alg1.l5.m4.3.4.cmml"><mi id="alg1.l5.m4.3.4.2" xref="alg1.l5.m4.3.4.2.cmml">i</mi><mo id="alg1.l5.m4.3.4.1" xref="alg1.l5.m4.3.4.1.cmml">∈</mo><mrow id="alg1.l5.m4.3.4.3.2" xref="alg1.l5.m4.3.4.3.1.cmml"><mo id="alg1.l5.m4.3.4.3.2.1" stretchy="false" xref="alg1.l5.m4.3.4.3.1.cmml">{</mo><mn id="alg1.l5.m4.1.1" xref="alg1.l5.m4.1.1.cmml">1</mn><mo id="alg1.l5.m4.3.4.3.2.2" xref="alg1.l5.m4.3.4.3.1.cmml">,</mo><mi id="alg1.l5.m4.2.2" mathvariant="normal" xref="alg1.l5.m4.2.2.cmml">…</mi><mo id="alg1.l5.m4.3.4.3.2.3" xref="alg1.l5.m4.3.4.3.1.cmml">,</mo><mi id="alg1.l5.m4.3.3" xref="alg1.l5.m4.3.3.cmml">m</mi><mo id="alg1.l5.m4.3.4.3.2.4" stretchy="false" xref="alg1.l5.m4.3.4.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m4.3b"><apply id="alg1.l5.m4.3.4.cmml" xref="alg1.l5.m4.3.4"><in id="alg1.l5.m4.3.4.1.cmml" xref="alg1.l5.m4.3.4.1"></in><ci id="alg1.l5.m4.3.4.2.cmml" xref="alg1.l5.m4.3.4.2">𝑖</ci><set id="alg1.l5.m4.3.4.3.1.cmml" xref="alg1.l5.m4.3.4.3.2"><cn id="alg1.l5.m4.1.1.cmml" type="integer" xref="alg1.l5.m4.1.1">1</cn><ci id="alg1.l5.m4.2.2.cmml" xref="alg1.l5.m4.2.2">…</ci><ci id="alg1.l5.m4.3.3.cmml" xref="alg1.l5.m4.3.3">𝑚</ci></set></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m4.3c">i\in\{1,\dots,m\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m4.3d">italic_i ∈ { 1 , … , italic_m }</annotation></semantics></math>.

</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>     Filter out invalid refinements and integrate valid data into the synthetic preference dataset:

<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A7.EGx2">
<tbody id="A1.Ex1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\mathcal{D}\leftarrow\mathcal{D}\cup\left\{(\mathbf{x}_{i},%
\overline{\mathbf{y}_{(t-1),i}},\mathbf{y}_{(0),i})\mid\mathcal{F}(\mathbf{x}_%
{i},\overline{\mathbf{y}_{(t-1),i}},\mathbf{y}_{(0),i})=\text{valid},\ i\in\{1%
,\dots,m\}\right\},\mathbf{y}_{(0),i}\sim\pi_{\bm{\theta}_{0}}(\cdot|\mathbf{x%
}_{i})" class="ltx_math_unparsed" display="inline" id="A1.Ex1.m1.16"><semantics id="A1.Ex1.m1.16a"><mrow id="A1.Ex1.m1.16b"><mi class="ltx_font_mathcaligraphic" id="A1.Ex1.m1.16.17">𝒟</mi><mo id="A1.Ex1.m1.16.18" stretchy="false">←</mo><mi class="ltx_font_mathcaligraphic" id="A1.Ex1.m1.16.19">𝒟</mi><mo id="A1.Ex1.m1.16.20">∪</mo><mrow id="A1.Ex1.m1.16.21"><mo id="A1.Ex1.m1.16.21.1">{</mo><mrow id="A1.Ex1.m1.16.21.2"><mo id="A1.Ex1.m1.16.21.2.1" stretchy="false">(</mo><msub id="A1.Ex1.m1.16.21.2.2"><mi id="A1.Ex1.m1.16.21.2.2.2">𝐱</mi><mi id="A1.Ex1.m1.16.21.2.2.3">i</mi></msub><mo id="A1.Ex1.m1.16.21.2.3">,</mo><mover accent="true" id="A1.Ex1.m1.2.2"><msub id="A1.Ex1.m1.2.2.2"><mi id="A1.Ex1.m1.2.2.2.4">𝐲</mi><mrow id="A1.Ex1.m1.2.2.2.2.2.2"><mrow id="A1.Ex1.m1.2.2.2.2.2.2.1.1"><mo id="A1.Ex1.m1.2.2.2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="A1.Ex1.m1.2.2.2.2.2.2.1.1.1"><mi id="A1.Ex1.m1.2.2.2.2.2.2.1.1.1.2">t</mi><mo id="A1.Ex1.m1.2.2.2.2.2.2.1.1.1.1">−</mo><mn id="A1.Ex1.m1.2.2.2.2.2.2.1.1.1.3">1</mn></mrow><mo id="A1.Ex1.m1.2.2.2.2.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="A1.Ex1.m1.2.2.2.2.2.2.2">,</mo><mi id="A1.Ex1.m1.1.1.1.1.1.1">i</mi></mrow></msub><mo id="A1.Ex1.m1.2.2.3">¯</mo></mover><mo id="A1.Ex1.m1.16.21.2.4">,</mo><msub id="A1.Ex1.m1.16.21.2.5"><mi id="A1.Ex1.m1.16.21.2.5.2">𝐲</mi><mrow id="A1.Ex1.m1.5.5.3.3"><mrow id="A1.Ex1.m1.5.5.3.3.1.2"><mo id="A1.Ex1.m1.5.5.3.3.1.2.1" stretchy="false">(</mo><mn id="A1.Ex1.m1.3.3.1.1">0</mn><mo id="A1.Ex1.m1.5.5.3.3.1.2.2" stretchy="false">)</mo></mrow><mo id="A1.Ex1.m1.5.5.3.3.2">,</mo><mi id="A1.Ex1.m1.4.4.2.2">i</mi></mrow></msub><mo id="A1.Ex1.m1.16.21.2.6" stretchy="false">)</mo></mrow><mo id="A1.Ex1.m1.16.21.3" lspace="0em" rspace="0.167em">∣</mo><mi class="ltx_font_mathcaligraphic" id="A1.Ex1.m1.16.21.4">ℱ</mi><mrow id="A1.Ex1.m1.16.21.5"><mo id="A1.Ex1.m1.16.21.5.1" stretchy="false">(</mo><msub id="A1.Ex1.m1.16.21.5.2"><mi id="A1.Ex1.m1.16.21.5.2.2">𝐱</mi><mi id="A1.Ex1.m1.16.21.5.2.3">i</mi></msub><mo id="A1.Ex1.m1.16.21.5.3">,</mo><mover accent="true" id="A1.Ex1.m1.7.7"><msub id="A1.Ex1.m1.7.7.2"><mi id="A1.Ex1.m1.7.7.2.4">𝐲</mi><mrow id="A1.Ex1.m1.7.7.2.2.2.2"><mrow id="A1.Ex1.m1.7.7.2.2.2.2.1.1"><mo id="A1.Ex1.m1.7.7.2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="A1.Ex1.m1.7.7.2.2.2.2.1.1.1"><mi id="A1.Ex1.m1.7.7.2.2.2.2.1.1.1.2">t</mi><mo id="A1.Ex1.m1.7.7.2.2.2.2.1.1.1.1">−</mo><mn id="A1.Ex1.m1.7.7.2.2.2.2.1.1.1.3">1</mn></mrow><mo id="A1.Ex1.m1.7.7.2.2.2.2.1.1.3" stretchy="false">)</mo></mrow><mo id="A1.Ex1.m1.7.7.2.2.2.2.2">,</mo><mi id="A1.Ex1.m1.6.6.1.1.1.1">i</mi></mrow></msub><mo id="A1.Ex1.m1.7.7.3">¯</mo></mover><mo id="A1.Ex1.m1.16.21.5.4">,</mo><msub id="A1.Ex1.m1.16.21.5.5"><mi id="A1.Ex1.m1.16.21.5.5.2">𝐲</mi><mrow id="A1.Ex1.m1.10.10.3.3"><mrow id="A1.Ex1.m1.10.10.3.3.1.2"><mo id="A1.Ex1.m1.10.10.3.3.1.2.1" stretchy="false">(</mo><mn id="A1.Ex1.m1.8.8.1.1">0</mn><mo id="A1.Ex1.m1.10.10.3.3.1.2.2" stretchy="false">)</mo></mrow><mo id="A1.Ex1.m1.10.10.3.3.2">,</mo><mi id="A1.Ex1.m1.9.9.2.2">i</mi></mrow></msub><mo id="A1.Ex1.m1.16.21.5.6" stretchy="false">)</mo></mrow><mo id="A1.Ex1.m1.16.21.6">=</mo><mtext id="A1.Ex1.m1.16.21.7">valid</mtext><mo id="A1.Ex1.m1.16.21.8" rspace="0.667em">,</mo><mi id="A1.Ex1.m1.16.21.9">i</mi><mo id="A1.Ex1.m1.16.21.10">∈</mo><mrow id="A1.Ex1.m1.16.21.11"><mo id="A1.Ex1.m1.16.21.11.1" stretchy="false">{</mo><mn id="A1.Ex1.m1.14.14">1</mn><mo id="A1.Ex1.m1.16.21.11.2">,</mo><mi id="A1.Ex1.m1.15.15" mathvariant="normal">…</mi><mo id="A1.Ex1.m1.16.21.11.3">,</mo><mi id="A1.Ex1.m1.16.16">m</mi><mo id="A1.Ex1.m1.16.21.11.4" stretchy="false">}</mo></mrow><mo id="A1.Ex1.m1.16.21.12">}</mo></mrow><mo id="A1.Ex1.m1.16.22">,</mo><msub id="A1.Ex1.m1.16.23"><mi id="A1.Ex1.m1.16.23.2">𝐲</mi><mrow id="A1.Ex1.m1.13.13.3.3"><mrow id="A1.Ex1.m1.13.13.3.3.1.2"><mo id="A1.Ex1.m1.13.13.3.3.1.2.1" stretchy="false">(</mo><mn id="A1.Ex1.m1.11.11.1.1">0</mn><mo id="A1.Ex1.m1.13.13.3.3.1.2.2" stretchy="false">)</mo></mrow><mo id="A1.Ex1.m1.13.13.3.3.2">,</mo><mi id="A1.Ex1.m1.12.12.2.2">i</mi></mrow></msub><mo id="A1.Ex1.m1.16.24">∼</mo><msub id="A1.Ex1.m1.16.25"><mi id="A1.Ex1.m1.16.25.2">π</mi><msub id="A1.Ex1.m1.16.25.3"><mi id="A1.Ex1.m1.16.25.3.2">𝜽</mi><mn id="A1.Ex1.m1.16.25.3.3">0</mn></msub></msub><mrow id="A1.Ex1.m1.16.26"><mo id="A1.Ex1.m1.16.26.1" stretchy="false">(</mo><mo id="A1.Ex1.m1.16.26.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="A1.Ex1.m1.16.26.3" rspace="0.167em" stretchy="false">|</mo><msub id="A1.Ex1.m1.16.26.4"><mi id="A1.Ex1.m1.16.26.4.2">𝐱</mi><mi id="A1.Ex1.m1.16.26.4.3">i</mi></msub><mo id="A1.Ex1.m1.16.26.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="A1.Ex1.m1.16c">\displaystyle\mathcal{D}\leftarrow\mathcal{D}\cup\left\{(\mathbf{x}_{i},%
\overline{\mathbf{y}_{(t-1),i}},\mathbf{y}_{(0),i})\mid\mathcal{F}(\mathbf{x}_%
{i},\overline{\mathbf{y}_{(t-1),i}},\mathbf{y}_{(0),i})=\text{valid},\ i\in\{1%
,\dots,m\}\right\},\mathbf{y}_{(0),i}\sim\pi_{\bm{\theta}_{0}}(\cdot|\mathbf{x%
}_{i})</annotation><annotation encoding="application/x-llamapun" id="A1.Ex1.m1.16d">caligraphic_D ← caligraphic_D ∪ { ( bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG , bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT ) ∣ caligraphic_F ( bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG , bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT ) = valid , italic_i ∈ { 1 , … , italic_m } } , bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT ∼ italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span>     Optimize <math alttext="\pi_{\bm{\theta}_{0}}" class="ltx_Math" display="inline" id="alg1.l7.m1.1"><semantics id="alg1.l7.m1.1a"><msub id="alg1.l7.m1.1.1" xref="alg1.l7.m1.1.1.cmml"><mi id="alg1.l7.m1.1.1.2" xref="alg1.l7.m1.1.1.2.cmml">π</mi><msub id="alg1.l7.m1.1.1.3" xref="alg1.l7.m1.1.1.3.cmml"><mi id="alg1.l7.m1.1.1.3.2" xref="alg1.l7.m1.1.1.3.2.cmml">𝜽</mi><mn id="alg1.l7.m1.1.1.3.3" xref="alg1.l7.m1.1.1.3.3.cmml">0</mn></msub></msub><annotation-xml encoding="MathML-Content" id="alg1.l7.m1.1b"><apply id="alg1.l7.m1.1.1.cmml" xref="alg1.l7.m1.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.1.1.1.cmml" xref="alg1.l7.m1.1.1">subscript</csymbol><ci id="alg1.l7.m1.1.1.2.cmml" xref="alg1.l7.m1.1.1.2">𝜋</ci><apply id="alg1.l7.m1.1.1.3.cmml" xref="alg1.l7.m1.1.1.3"><csymbol cd="ambiguous" id="alg1.l7.m1.1.1.3.1.cmml" xref="alg1.l7.m1.1.1.3">subscript</csymbol><ci id="alg1.l7.m1.1.1.3.2.cmml" xref="alg1.l7.m1.1.1.3.2">𝜽</ci><cn id="alg1.l7.m1.1.1.3.3.cmml" type="integer" xref="alg1.l7.m1.1.1.3.3">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m1.1c">\pi_{\bm{\theta}_{0}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m1.1d">italic_π start_POSTSUBSCRIPT bold_italic_θ start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> using the SimPO <cite class="ltx_cite ltx_citemacro_citep">(Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite> objective, where <math alttext="\sigma" class="ltx_Math" display="inline" id="alg1.l7.m2.1"><semantics id="alg1.l7.m2.1a"><mi id="alg1.l7.m2.1.1" xref="alg1.l7.m2.1.1.cmml">σ</mi><annotation-xml encoding="MathML-Content" id="alg1.l7.m2.1b"><ci id="alg1.l7.m2.1.1.cmml" xref="alg1.l7.m2.1.1">𝜎</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m2.1c">\sigma</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m2.1d">italic_σ</annotation></semantics></math> and <math alttext="\gamma" class="ltx_Math" display="inline" id="alg1.l7.m3.1"><semantics id="alg1.l7.m3.1a"><mi id="alg1.l7.m3.1.1" xref="alg1.l7.m3.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="alg1.l7.m3.1b"><ci id="alg1.l7.m3.1.1.cmml" xref="alg1.l7.m3.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m3.1c">\gamma</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m3.1d">italic_γ</annotation></semantics></math> are hyperparameters: 

<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A7.EGx3">
<tbody id="A1.Ex2"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\bm{\theta}_{t}\leftarrow\operatorname*{arg\,min}_{\bm{\theta}}%
\mathbb{E}_{(\mathbf{x}_{i},\overline{\mathbf{y}_{(t-1),i}},\mathbf{y}_{(0),i}%
)\sim\mathcal{D}}\left[\log\sigma\left(\frac{\beta}{|\overline{\mathbf{y}_{(t-%
1),i}}|}\log\pi_{\theta}(\overline{\mathbf{y}_{(t-1),i}}\mid\mathbf{x}_{i})-%
\frac{\beta}{|\mathbf{y}_{(0),i}|}\log\pi_{\theta}(\mathbf{y}_{(0),i}\mid%
\mathbf{x}_{i})-\gamma\right)\right]" class="ltx_Math" display="inline" id="A1.Ex2.m1.19"><semantics id="A1.Ex2.m1.19a"><mrow id="A1.Ex2.m1.19.19" xref="A1.Ex2.m1.19.19.cmml"><msub id="A1.Ex2.m1.19.19.3" xref="A1.Ex2.m1.19.19.3.cmml"><mi id="A1.Ex2.m1.19.19.3.2" xref="A1.Ex2.m1.19.19.3.2.cmml">𝜽</mi><mi id="A1.Ex2.m1.19.19.3.3" xref="A1.Ex2.m1.19.19.3.3.cmml">t</mi></msub><mo id="A1.Ex2.m1.19.19.2" stretchy="false" xref="A1.Ex2.m1.19.19.2.cmml">←</mo><mrow id="A1.Ex2.m1.19.19.1" xref="A1.Ex2.m1.19.19.1.cmml"><mrow id="A1.Ex2.m1.19.19.1.3" xref="A1.Ex2.m1.19.19.1.3.cmml"><munder id="A1.Ex2.m1.19.19.1.3.1" xref="A1.Ex2.m1.19.19.1.3.1.cmml"><mrow id="A1.Ex2.m1.19.19.1.3.1.2" xref="A1.Ex2.m1.19.19.1.3.1.2.cmml"><mi id="A1.Ex2.m1.19.19.1.3.1.2.2" xref="A1.Ex2.m1.19.19.1.3.1.2.2.cmml">arg</mi><mo id="A1.Ex2.m1.19.19.1.3.1.2.1" lspace="0.170em" xref="A1.Ex2.m1.19.19.1.3.1.2.1.cmml">⁢</mo><mi id="A1.Ex2.m1.19.19.1.3.1.2.3" xref="A1.Ex2.m1.19.19.1.3.1.2.3.cmml">min</mi></mrow><mi id="A1.Ex2.m1.19.19.1.3.1.3" xref="A1.Ex2.m1.19.19.1.3.1.3.cmml">𝜽</mi></munder><mo id="A1.Ex2.m1.19.19.1.3a" xref="A1.Ex2.m1.19.19.1.3.cmml">⁡</mo><msub id="A1.Ex2.m1.19.19.1.3.2" xref="A1.Ex2.m1.19.19.1.3.2.cmml"><mi id="A1.Ex2.m1.19.19.1.3.2.2" xref="A1.Ex2.m1.19.19.1.3.2.2.cmml">𝔼</mi><mrow id="A1.Ex2.m1.7.7.7" xref="A1.Ex2.m1.7.7.7.cmml"><mrow id="A1.Ex2.m1.7.7.7.7.2" xref="A1.Ex2.m1.7.7.7.7.3.cmml"><mo id="A1.Ex2.m1.7.7.7.7.2.3" stretchy="false" xref="A1.Ex2.m1.7.7.7.7.3.cmml">(</mo><msub id="A1.Ex2.m1.6.6.6.6.1.1" xref="A1.Ex2.m1.6.6.6.6.1.1.cmml"><mi id="A1.Ex2.m1.6.6.6.6.1.1.2" xref="A1.Ex2.m1.6.6.6.6.1.1.2.cmml">𝐱</mi><mi id="A1.Ex2.m1.6.6.6.6.1.1.3" xref="A1.Ex2.m1.6.6.6.6.1.1.3.cmml">i</mi></msub><mo id="A1.Ex2.m1.7.7.7.7.2.4" xref="A1.Ex2.m1.7.7.7.7.3.cmml">,</mo><mover accent="true" id="A1.Ex2.m1.2.2.2.2" xref="A1.Ex2.m1.2.2.2.2.cmml"><msub id="A1.Ex2.m1.2.2.2.2.2" xref="A1.Ex2.m1.2.2.2.2.2.cmml"><mi id="A1.Ex2.m1.2.2.2.2.2.4" xref="A1.Ex2.m1.2.2.2.2.2.4.cmml">𝐲</mi><mrow id="A1.Ex2.m1.2.2.2.2.2.2.2.2" xref="A1.Ex2.m1.2.2.2.2.2.2.2.3.cmml"><mrow id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.cmml"><mo id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.2" stretchy="false" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.cmml">(</mo><mrow id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.cmml"><mi id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.2" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.2.cmml">t</mi><mo id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.1" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.3" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.3" stretchy="false" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="A1.Ex2.m1.2.2.2.2.2.2.2.2.2" xref="A1.Ex2.m1.2.2.2.2.2.2.2.3.cmml">,</mo><mi id="A1.Ex2.m1.1.1.1.1.1.1.1.1" xref="A1.Ex2.m1.1.1.1.1.1.1.1.1.cmml">i</mi></mrow></msub><mo id="A1.Ex2.m1.2.2.2.2.3" xref="A1.Ex2.m1.2.2.2.2.3.cmml">¯</mo></mover><mo id="A1.Ex2.m1.7.7.7.7.2.5" xref="A1.Ex2.m1.7.7.7.7.3.cmml">,</mo><msub id="A1.Ex2.m1.7.7.7.7.2.2" xref="A1.Ex2.m1.7.7.7.7.2.2.cmml"><mi id="A1.Ex2.m1.7.7.7.7.2.2.2" xref="A1.Ex2.m1.7.7.7.7.2.2.2.cmml">𝐲</mi><mrow id="A1.Ex2.m1.5.5.5.5.3.3" xref="A1.Ex2.m1.5.5.5.5.3.4.cmml"><mrow id="A1.Ex2.m1.5.5.5.5.3.3.1.2" xref="A1.Ex2.m1.5.5.5.5.3.4.cmml"><mo id="A1.Ex2.m1.5.5.5.5.3.3.1.2.1" stretchy="false" xref="A1.Ex2.m1.5.5.5.5.3.4.cmml">(</mo><mn id="A1.Ex2.m1.3.3.3.3.1.1" xref="A1.Ex2.m1.3.3.3.3.1.1.cmml">0</mn><mo id="A1.Ex2.m1.5.5.5.5.3.3.1.2.2" stretchy="false" xref="A1.Ex2.m1.5.5.5.5.3.4.cmml">)</mo></mrow><mo id="A1.Ex2.m1.5.5.5.5.3.3.2" xref="A1.Ex2.m1.5.5.5.5.3.4.cmml">,</mo><mi id="A1.Ex2.m1.4.4.4.4.2.2" xref="A1.Ex2.m1.4.4.4.4.2.2.cmml">i</mi></mrow></msub><mo id="A1.Ex2.m1.7.7.7.7.2.6" stretchy="false" xref="A1.Ex2.m1.7.7.7.7.3.cmml">)</mo></mrow><mo id="A1.Ex2.m1.7.7.7.8" xref="A1.Ex2.m1.7.7.7.8.cmml">∼</mo><mi class="ltx_font_mathcaligraphic" id="A1.Ex2.m1.7.7.7.9" xref="A1.Ex2.m1.7.7.7.9.cmml">𝒟</mi></mrow></msub></mrow><mo id="A1.Ex2.m1.19.19.1.2" xref="A1.Ex2.m1.19.19.1.2.cmml">⁢</mo><mrow id="A1.Ex2.m1.19.19.1.1.1" xref="A1.Ex2.m1.19.19.1.1.2.cmml"><mo id="A1.Ex2.m1.19.19.1.1.1.2" xref="A1.Ex2.m1.19.19.1.1.2.1.cmml">[</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.cmml"><mrow id="A1.Ex2.m1.19.19.1.1.1.1.3" xref="A1.Ex2.m1.19.19.1.1.1.1.3.cmml"><mi id="A1.Ex2.m1.19.19.1.1.1.1.3.1" xref="A1.Ex2.m1.19.19.1.1.1.1.3.1.cmml">log</mi><mo id="A1.Ex2.m1.19.19.1.1.1.1.3a" lspace="0.167em" xref="A1.Ex2.m1.19.19.1.1.1.1.3.cmml">⁡</mo><mi id="A1.Ex2.m1.19.19.1.1.1.1.3.2" xref="A1.Ex2.m1.19.19.1.1.1.1.3.2.cmml">σ</mi></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.1.2" xref="A1.Ex2.m1.19.19.1.1.1.1.2.cmml">⁢</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.cmml"><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.cmml">(</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.cmml"><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.cmml"><mstyle displaystyle="true" id="A1.Ex2.m1.9.9" xref="A1.Ex2.m1.9.9.cmml"><mfrac id="A1.Ex2.m1.9.9a" xref="A1.Ex2.m1.9.9.cmml"><mi id="A1.Ex2.m1.9.9.4" xref="A1.Ex2.m1.9.9.4.cmml">β</mi><mrow id="A1.Ex2.m1.9.9.2.4" xref="A1.Ex2.m1.9.9.2.3.cmml"><mo id="A1.Ex2.m1.9.9.2.4.1" stretchy="false" xref="A1.Ex2.m1.9.9.2.3.1.cmml">|</mo><mover accent="true" id="A1.Ex2.m1.9.9.2.2" xref="A1.Ex2.m1.9.9.2.2.cmml"><msub id="A1.Ex2.m1.9.9.2.2.2" xref="A1.Ex2.m1.9.9.2.2.2.cmml"><mi id="A1.Ex2.m1.9.9.2.2.2.4" xref="A1.Ex2.m1.9.9.2.2.2.4.cmml">𝐲</mi><mrow id="A1.Ex2.m1.9.9.2.2.2.2.2.2" xref="A1.Ex2.m1.9.9.2.2.2.2.2.3.cmml"><mrow id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.cmml"><mo id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.2" stretchy="false" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.cmml">(</mo><mrow id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.cmml"><mi id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.2" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.2.cmml">t</mi><mo id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.1" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.3" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.3" stretchy="false" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="A1.Ex2.m1.9.9.2.2.2.2.2.2.2" xref="A1.Ex2.m1.9.9.2.2.2.2.2.3.cmml">,</mo><mi id="A1.Ex2.m1.8.8.1.1.1.1.1.1" xref="A1.Ex2.m1.8.8.1.1.1.1.1.1.cmml">i</mi></mrow></msub><mo id="A1.Ex2.m1.9.9.2.2.3" xref="A1.Ex2.m1.9.9.2.2.3.cmml">¯</mo></mover><mo id="A1.Ex2.m1.9.9.2.4.2" stretchy="false" xref="A1.Ex2.m1.9.9.2.3.1.cmml">|</mo></mrow></mfrac></mstyle><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.2" lspace="0.167em" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.cmml"><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.1.cmml">log</mi><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3a" lspace="0.167em" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.cmml">⁡</mo><msub id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.cmml"><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.2.cmml">π</mi><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.3.cmml">θ</mi></msub></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.2a" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.2" stretchy="false" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.cmml"><mover accent="true" id="A1.Ex2.m1.11.11" xref="A1.Ex2.m1.11.11.cmml"><msub id="A1.Ex2.m1.11.11.2" xref="A1.Ex2.m1.11.11.2.cmml"><mi id="A1.Ex2.m1.11.11.2.4" xref="A1.Ex2.m1.11.11.2.4.cmml">𝐲</mi><mrow id="A1.Ex2.m1.11.11.2.2.2.2" xref="A1.Ex2.m1.11.11.2.2.2.3.cmml"><mrow id="A1.Ex2.m1.11.11.2.2.2.2.1.1" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.cmml"><mo id="A1.Ex2.m1.11.11.2.2.2.2.1.1.2" stretchy="false" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.cmml">(</mo><mrow id="A1.Ex2.m1.11.11.2.2.2.2.1.1.1" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.cmml"><mi id="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.2" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.2.cmml">t</mi><mo id="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.1" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.1.cmml">−</mo><mn id="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.3" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.3.cmml">1</mn></mrow><mo id="A1.Ex2.m1.11.11.2.2.2.2.1.1.3" stretchy="false" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.cmml">)</mo></mrow><mo id="A1.Ex2.m1.11.11.2.2.2.2.2" xref="A1.Ex2.m1.11.11.2.2.2.3.cmml">,</mo><mi id="A1.Ex2.m1.10.10.1.1.1.1" xref="A1.Ex2.m1.10.10.1.1.1.1.cmml">i</mi></mrow></msub><mo id="A1.Ex2.m1.11.11.3" xref="A1.Ex2.m1.11.11.3.cmml">¯</mo></mover><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.1.cmml">∣</mo><msub id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.cmml"><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml">𝐱</mi><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml">i</mi></msub></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.3" stretchy="false" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.3.cmml">−</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.cmml"><mstyle displaystyle="true" id="A1.Ex2.m1.15.15" xref="A1.Ex2.m1.15.15.cmml"><mfrac id="A1.Ex2.m1.15.15a" xref="A1.Ex2.m1.15.15.cmml"><mi id="A1.Ex2.m1.15.15.6" xref="A1.Ex2.m1.15.15.6.cmml">β</mi><mrow id="A1.Ex2.m1.15.15.4.4" xref="A1.Ex2.m1.15.15.4.5.cmml"><mo id="A1.Ex2.m1.15.15.4.4.2" stretchy="false" xref="A1.Ex2.m1.15.15.4.5.1.cmml">|</mo><msub id="A1.Ex2.m1.15.15.4.4.1" xref="A1.Ex2.m1.15.15.4.4.1.cmml"><mi id="A1.Ex2.m1.15.15.4.4.1.2" xref="A1.Ex2.m1.15.15.4.4.1.2.cmml">𝐲</mi><mrow id="A1.Ex2.m1.14.14.3.3.3.3" xref="A1.Ex2.m1.14.14.3.3.3.4.cmml"><mrow id="A1.Ex2.m1.14.14.3.3.3.3.1.2" xref="A1.Ex2.m1.14.14.3.3.3.4.cmml"><mo id="A1.Ex2.m1.14.14.3.3.3.3.1.2.1" stretchy="false" xref="A1.Ex2.m1.14.14.3.3.3.4.cmml">(</mo><mn id="A1.Ex2.m1.12.12.1.1.1.1" xref="A1.Ex2.m1.12.12.1.1.1.1.cmml">0</mn><mo id="A1.Ex2.m1.14.14.3.3.3.3.1.2.2" stretchy="false" xref="A1.Ex2.m1.14.14.3.3.3.4.cmml">)</mo></mrow><mo id="A1.Ex2.m1.14.14.3.3.3.3.2" xref="A1.Ex2.m1.14.14.3.3.3.4.cmml">,</mo><mi id="A1.Ex2.m1.13.13.2.2.2.2" xref="A1.Ex2.m1.13.13.2.2.2.2.cmml">i</mi></mrow></msub><mo id="A1.Ex2.m1.15.15.4.4.3" stretchy="false" xref="A1.Ex2.m1.15.15.4.5.1.cmml">|</mo></mrow></mfrac></mstyle><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.2" lspace="0.167em" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.2.cmml">⁢</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.cmml"><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.1.cmml">log</mi><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3a" lspace="0.167em" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.cmml">⁡</mo><msub id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.cmml"><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.2.cmml">π</mi><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.3.cmml">θ</mi></msub></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.2a" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.2.cmml">⁢</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.cmml"><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.2" stretchy="false" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.cmml">(</mo><mrow id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.cmml"><msub id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2.cmml"><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2.2.cmml">𝐲</mi><mrow id="A1.Ex2.m1.18.18.3.3" xref="A1.Ex2.m1.18.18.3.4.cmml"><mrow id="A1.Ex2.m1.18.18.3.3.1.2" xref="A1.Ex2.m1.18.18.3.4.cmml"><mo id="A1.Ex2.m1.18.18.3.3.1.2.1" stretchy="false" xref="A1.Ex2.m1.18.18.3.4.cmml">(</mo><mn id="A1.Ex2.m1.16.16.1.1" xref="A1.Ex2.m1.16.16.1.1.cmml">0</mn><mo id="A1.Ex2.m1.18.18.3.3.1.2.2" stretchy="false" xref="A1.Ex2.m1.18.18.3.4.cmml">)</mo></mrow><mo id="A1.Ex2.m1.18.18.3.3.2" xref="A1.Ex2.m1.18.18.3.4.cmml">,</mo><mi id="A1.Ex2.m1.17.17.2.2" xref="A1.Ex2.m1.17.17.2.2.cmml">i</mi></mrow></msub><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.1" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.1.cmml">∣</mo><msub id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.cmml"><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.2" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.2.cmml">𝐱</mi><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.3.cmml">i</mi></msub></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.3" stretchy="false" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.cmml">)</mo></mrow></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.3a" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.3.cmml">−</mo><mi id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.4" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.4.cmml">γ</mi></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.1.1.1.3" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="A1.Ex2.m1.19.19.1.1.1.3" xref="A1.Ex2.m1.19.19.1.1.2.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.Ex2.m1.19b"><apply id="A1.Ex2.m1.19.19.cmml" xref="A1.Ex2.m1.19.19"><ci id="A1.Ex2.m1.19.19.2.cmml" xref="A1.Ex2.m1.19.19.2">←</ci><apply id="A1.Ex2.m1.19.19.3.cmml" xref="A1.Ex2.m1.19.19.3"><csymbol cd="ambiguous" id="A1.Ex2.m1.19.19.3.1.cmml" xref="A1.Ex2.m1.19.19.3">subscript</csymbol><ci id="A1.Ex2.m1.19.19.3.2.cmml" xref="A1.Ex2.m1.19.19.3.2">𝜽</ci><ci id="A1.Ex2.m1.19.19.3.3.cmml" xref="A1.Ex2.m1.19.19.3.3">𝑡</ci></apply><apply id="A1.Ex2.m1.19.19.1.cmml" xref="A1.Ex2.m1.19.19.1"><times id="A1.Ex2.m1.19.19.1.2.cmml" xref="A1.Ex2.m1.19.19.1.2"></times><apply id="A1.Ex2.m1.19.19.1.3.cmml" xref="A1.Ex2.m1.19.19.1.3"><apply id="A1.Ex2.m1.19.19.1.3.1.cmml" xref="A1.Ex2.m1.19.19.1.3.1"><csymbol cd="ambiguous" id="A1.Ex2.m1.19.19.1.3.1.1.cmml" xref="A1.Ex2.m1.19.19.1.3.1">subscript</csymbol><apply id="A1.Ex2.m1.19.19.1.3.1.2.cmml" xref="A1.Ex2.m1.19.19.1.3.1.2"><times id="A1.Ex2.m1.19.19.1.3.1.2.1.cmml" xref="A1.Ex2.m1.19.19.1.3.1.2.1"></times><ci id="A1.Ex2.m1.19.19.1.3.1.2.2.cmml" xref="A1.Ex2.m1.19.19.1.3.1.2.2">arg</ci><ci id="A1.Ex2.m1.19.19.1.3.1.2.3.cmml" xref="A1.Ex2.m1.19.19.1.3.1.2.3">min</ci></apply><ci id="A1.Ex2.m1.19.19.1.3.1.3.cmml" xref="A1.Ex2.m1.19.19.1.3.1.3">𝜽</ci></apply><apply id="A1.Ex2.m1.19.19.1.3.2.cmml" xref="A1.Ex2.m1.19.19.1.3.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.19.19.1.3.2.1.cmml" xref="A1.Ex2.m1.19.19.1.3.2">subscript</csymbol><ci id="A1.Ex2.m1.19.19.1.3.2.2.cmml" xref="A1.Ex2.m1.19.19.1.3.2.2">𝔼</ci><apply id="A1.Ex2.m1.7.7.7.cmml" xref="A1.Ex2.m1.7.7.7"><csymbol cd="latexml" id="A1.Ex2.m1.7.7.7.8.cmml" xref="A1.Ex2.m1.7.7.7.8">similar-to</csymbol><vector id="A1.Ex2.m1.7.7.7.7.3.cmml" xref="A1.Ex2.m1.7.7.7.7.2"><apply id="A1.Ex2.m1.6.6.6.6.1.1.cmml" xref="A1.Ex2.m1.6.6.6.6.1.1"><csymbol cd="ambiguous" id="A1.Ex2.m1.6.6.6.6.1.1.1.cmml" xref="A1.Ex2.m1.6.6.6.6.1.1">subscript</csymbol><ci id="A1.Ex2.m1.6.6.6.6.1.1.2.cmml" xref="A1.Ex2.m1.6.6.6.6.1.1.2">𝐱</ci><ci id="A1.Ex2.m1.6.6.6.6.1.1.3.cmml" xref="A1.Ex2.m1.6.6.6.6.1.1.3">𝑖</ci></apply><apply id="A1.Ex2.m1.2.2.2.2.cmml" xref="A1.Ex2.m1.2.2.2.2"><ci id="A1.Ex2.m1.2.2.2.2.3.cmml" xref="A1.Ex2.m1.2.2.2.2.3">¯</ci><apply id="A1.Ex2.m1.2.2.2.2.2.cmml" xref="A1.Ex2.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.2.2.2.2.2.3.cmml" xref="A1.Ex2.m1.2.2.2.2.2">subscript</csymbol><ci id="A1.Ex2.m1.2.2.2.2.2.4.cmml" xref="A1.Ex2.m1.2.2.2.2.2.4">𝐲</ci><list id="A1.Ex2.m1.2.2.2.2.2.2.2.3.cmml" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2"><apply id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.cmml" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1"><minus id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.1.cmml" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.1"></minus><ci id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.2.cmml" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.2">𝑡</ci><cn id="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.3.cmml" type="integer" xref="A1.Ex2.m1.2.2.2.2.2.2.2.2.1.1.1.3">1</cn></apply><ci id="A1.Ex2.m1.1.1.1.1.1.1.1.1.cmml" xref="A1.Ex2.m1.1.1.1.1.1.1.1.1">𝑖</ci></list></apply></apply><apply id="A1.Ex2.m1.7.7.7.7.2.2.cmml" xref="A1.Ex2.m1.7.7.7.7.2.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.7.7.7.7.2.2.1.cmml" xref="A1.Ex2.m1.7.7.7.7.2.2">subscript</csymbol><ci id="A1.Ex2.m1.7.7.7.7.2.2.2.cmml" xref="A1.Ex2.m1.7.7.7.7.2.2.2">𝐲</ci><list id="A1.Ex2.m1.5.5.5.5.3.4.cmml" xref="A1.Ex2.m1.5.5.5.5.3.3"><cn id="A1.Ex2.m1.3.3.3.3.1.1.cmml" type="integer" xref="A1.Ex2.m1.3.3.3.3.1.1">0</cn><ci id="A1.Ex2.m1.4.4.4.4.2.2.cmml" xref="A1.Ex2.m1.4.4.4.4.2.2">𝑖</ci></list></apply></vector><ci id="A1.Ex2.m1.7.7.7.9.cmml" xref="A1.Ex2.m1.7.7.7.9">𝒟</ci></apply></apply></apply><apply id="A1.Ex2.m1.19.19.1.1.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1"><csymbol cd="latexml" id="A1.Ex2.m1.19.19.1.1.2.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.2">delimited-[]</csymbol><apply id="A1.Ex2.m1.19.19.1.1.1.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1"><times id="A1.Ex2.m1.19.19.1.1.1.1.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.2"></times><apply id="A1.Ex2.m1.19.19.1.1.1.1.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.3"><log id="A1.Ex2.m1.19.19.1.1.1.1.3.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.3.1"></log><ci id="A1.Ex2.m1.19.19.1.1.1.1.3.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.3.2">𝜎</ci></apply><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1"><minus id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.3"></minus><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1"><times id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.2"></times><apply id="A1.Ex2.m1.9.9.cmml" xref="A1.Ex2.m1.9.9"><divide id="A1.Ex2.m1.9.9.3.cmml" xref="A1.Ex2.m1.9.9"></divide><ci id="A1.Ex2.m1.9.9.4.cmml" xref="A1.Ex2.m1.9.9.4">𝛽</ci><apply id="A1.Ex2.m1.9.9.2.3.cmml" xref="A1.Ex2.m1.9.9.2.4"><abs id="A1.Ex2.m1.9.9.2.3.1.cmml" xref="A1.Ex2.m1.9.9.2.4.1"></abs><apply id="A1.Ex2.m1.9.9.2.2.cmml" xref="A1.Ex2.m1.9.9.2.2"><ci id="A1.Ex2.m1.9.9.2.2.3.cmml" xref="A1.Ex2.m1.9.9.2.2.3">¯</ci><apply id="A1.Ex2.m1.9.9.2.2.2.cmml" xref="A1.Ex2.m1.9.9.2.2.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.9.9.2.2.2.3.cmml" xref="A1.Ex2.m1.9.9.2.2.2">subscript</csymbol><ci id="A1.Ex2.m1.9.9.2.2.2.4.cmml" xref="A1.Ex2.m1.9.9.2.2.2.4">𝐲</ci><list id="A1.Ex2.m1.9.9.2.2.2.2.2.3.cmml" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2"><apply id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.cmml" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1"><minus id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.1.cmml" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.1"></minus><ci id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.2.cmml" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.2">𝑡</ci><cn id="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.3.cmml" type="integer" xref="A1.Ex2.m1.9.9.2.2.2.2.2.2.1.1.1.3">1</cn></apply><ci id="A1.Ex2.m1.8.8.1.1.1.1.1.1.cmml" xref="A1.Ex2.m1.8.8.1.1.1.1.1.1">𝑖</ci></list></apply></apply></apply></apply><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3"><log id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.1"></log><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2">subscript</csymbol><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.2">𝜋</ci><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.3.2.3">𝜃</ci></apply></apply><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.1">conditional</csymbol><apply id="A1.Ex2.m1.11.11.cmml" xref="A1.Ex2.m1.11.11"><ci id="A1.Ex2.m1.11.11.3.cmml" xref="A1.Ex2.m1.11.11.3">¯</ci><apply id="A1.Ex2.m1.11.11.2.cmml" xref="A1.Ex2.m1.11.11.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.11.11.2.3.cmml" xref="A1.Ex2.m1.11.11.2">subscript</csymbol><ci id="A1.Ex2.m1.11.11.2.4.cmml" xref="A1.Ex2.m1.11.11.2.4">𝐲</ci><list id="A1.Ex2.m1.11.11.2.2.2.3.cmml" xref="A1.Ex2.m1.11.11.2.2.2.2"><apply id="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.cmml" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1"><minus id="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.1.cmml" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.1"></minus><ci id="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.2.cmml" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.2">𝑡</ci><cn id="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.3.cmml" type="integer" xref="A1.Ex2.m1.11.11.2.2.2.2.1.1.1.3">1</cn></apply><ci id="A1.Ex2.m1.10.10.1.1.1.1.cmml" xref="A1.Ex2.m1.10.10.1.1.1.1">𝑖</ci></list></apply></apply><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.2">𝐱</ci><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.1.1.1.1.2.3">𝑖</ci></apply></apply></apply><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2"><times id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.2"></times><apply id="A1.Ex2.m1.15.15.cmml" xref="A1.Ex2.m1.15.15"><divide id="A1.Ex2.m1.15.15.5.cmml" xref="A1.Ex2.m1.15.15"></divide><ci id="A1.Ex2.m1.15.15.6.cmml" xref="A1.Ex2.m1.15.15.6">𝛽</ci><apply id="A1.Ex2.m1.15.15.4.5.cmml" xref="A1.Ex2.m1.15.15.4.4"><abs id="A1.Ex2.m1.15.15.4.5.1.cmml" xref="A1.Ex2.m1.15.15.4.4.2"></abs><apply id="A1.Ex2.m1.15.15.4.4.1.cmml" xref="A1.Ex2.m1.15.15.4.4.1"><csymbol cd="ambiguous" id="A1.Ex2.m1.15.15.4.4.1.1.cmml" xref="A1.Ex2.m1.15.15.4.4.1">subscript</csymbol><ci id="A1.Ex2.m1.15.15.4.4.1.2.cmml" xref="A1.Ex2.m1.15.15.4.4.1.2">𝐲</ci><list id="A1.Ex2.m1.14.14.3.3.3.4.cmml" xref="A1.Ex2.m1.14.14.3.3.3.3"><cn id="A1.Ex2.m1.12.12.1.1.1.1.cmml" type="integer" xref="A1.Ex2.m1.12.12.1.1.1.1">0</cn><ci id="A1.Ex2.m1.13.13.2.2.2.2.cmml" xref="A1.Ex2.m1.13.13.2.2.2.2">𝑖</ci></list></apply></apply></apply><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3"><log id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.1"></log><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2">subscript</csymbol><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.2">𝜋</ci><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.3.2.3">𝜃</ci></apply></apply><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1"><csymbol cd="latexml" id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.1">conditional</csymbol><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2"><csymbol cd="ambiguous" id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2">subscript</csymbol><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.2.2">𝐲</ci><list id="A1.Ex2.m1.18.18.3.4.cmml" xref="A1.Ex2.m1.18.18.3.3"><cn id="A1.Ex2.m1.16.16.1.1.cmml" type="integer" xref="A1.Ex2.m1.16.16.1.1">0</cn><ci id="A1.Ex2.m1.17.17.2.2.cmml" xref="A1.Ex2.m1.17.17.2.2">𝑖</ci></list></apply><apply id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3"><csymbol cd="ambiguous" id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.1.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3">subscript</csymbol><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.2.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.2">𝐱</ci><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.3.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.2.1.1.1.3.3">𝑖</ci></apply></apply></apply><ci id="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.4.cmml" xref="A1.Ex2.m1.19.19.1.1.1.1.1.1.1.4">𝛾</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.Ex2.m1.19c">\displaystyle\bm{\theta}_{t}\leftarrow\operatorname*{arg\,min}_{\bm{\theta}}%
\mathbb{E}_{(\mathbf{x}_{i},\overline{\mathbf{y}_{(t-1),i}},\mathbf{y}_{(0),i}%
)\sim\mathcal{D}}\left[\log\sigma\left(\frac{\beta}{|\overline{\mathbf{y}_{(t-%
1),i}}|}\log\pi_{\theta}(\overline{\mathbf{y}_{(t-1),i}}\mid\mathbf{x}_{i})-%
\frac{\beta}{|\mathbf{y}_{(0),i}|}\log\pi_{\theta}(\mathbf{y}_{(0),i}\mid%
\mathbf{x}_{i})-\gamma\right)\right]</annotation><annotation encoding="application/x-llamapun" id="A1.Ex2.m1.19d">bold_italic_θ start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT ← start_OPERATOR roman_arg roman_min end_OPERATOR start_POSTSUBSCRIPT bold_italic_θ end_POSTSUBSCRIPT blackboard_E start_POSTSUBSCRIPT ( bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG , bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT ) ∼ caligraphic_D end_POSTSUBSCRIPT [ roman_log italic_σ ( divide start_ARG italic_β end_ARG start_ARG | over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG | end_ARG roman_log italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( over¯ start_ARG bold_y start_POSTSUBSCRIPT ( italic_t - 1 ) , italic_i end_POSTSUBSCRIPT end_ARG ∣ bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) - divide start_ARG italic_β end_ARG start_ARG | bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT | end_ARG roman_log italic_π start_POSTSUBSCRIPT italic_θ end_POSTSUBSCRIPT ( bold_y start_POSTSUBSCRIPT ( 0 ) , italic_i end_POSTSUBSCRIPT ∣ bold_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) - italic_γ ) ]</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span>  <span class="ltx_text ltx_font_bold" id="alg1.l8.1">end</span> <span class="ltx_text ltx_font_bold" id="alg1.l8.2">for</span>
</div>
</div>
</span></div>
</figure>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Prompt for Response-refiner</h2>
<div class="ltx_para ltx_noindent" id="A2.p1">
<p class="ltx_p" id="A2.p1.1">The prompt template used for training and inference in the response improver is shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A2.F7" title="Figure 7 ‣ Appendix B Prompt for Response-refiner ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">7</span></a>.</p>
</div>
<figure class="ltx_figure" id="A2.F7"><svg class="ltx_picture ltx_centering" height="171.91" id="A2.F7.pic1" overflow="visible" version="1.1" width="603.54"><g fill="#000000" stroke="#000000" stroke-width="0.4pt" transform="translate(0,171.91) matrix(1 0 0 -1 0 0) translate(0,3.54)"><g color="#F2F2F2" fill="#F2F2F2" fill-opacity="0.5" stroke="#F2F2F2" stroke-opacity="0.5"><path d="M 3.54 4.13 L 3.54 157.15 C 3.54 161.39 6.98 164.83 11.22 164.83 L 595.87 164.83 C 600.11 164.83 603.54 161.39 603.54 157.15 L 603.54 4.13 C 603.54 -0.11 600.11 -3.54 595.87 -3.54 L 11.22 -3.54 C 6.98 -3.54 3.54 -0.11 3.54 4.13 Z" style="stroke:none"></path></g><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 162.46 C 0 165.73 2.64 168.37 5.91 168.37 L 594.09 168.37 C 597.36 168.37 600 165.73 600 162.46 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 152.13 L 598.03 152.13 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 17.72 154.1)"><foreignobject color="#FFFFFF" height="12.3" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="564.57">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A2.F7.pic1.1.1.1.1.1" style="width:408.0pt;">
<span class="ltx_p" id="A2.F7.pic1.1.1.1.1.1.1">Self-Improver Prompt</span>
</span></foreignobject></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 17.72 5.91)"><foreignobject color="#000000" height="142.29" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="564.57">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A2.F7.pic1.2.2.2.1.1" style="width:408.0pt;">
<span class="ltx_p" id="A2.F7.pic1.2.2.2.1.1.1">You are a smart AI assistant. For a given question-answer pair, improve the answer by correcting errors, bolstering informativeness, aligning with the question, and providing comprehensive detail.</span>
<span class="ltx_p" id="A2.F7.pic1.2.2.2.1.1.2">Given Question: {self-generated_question}</span>
<span class="ltx_p" id="A2.F7.pic1.2.2.2.1.1.3">Original Answer: {original_model_completion}</span>
<span class="ltx_p" id="A2.F7.pic1.2.2.2.1.1.4">Rewritten Answer:</span>
</span></foreignobject></g></g></svg>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>Prompt in SynPO for the LLM to act as a response-refiner.</figcaption>
</figure>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Experimental Details</h2>
<div class="ltx_para ltx_noindent" id="A3.p1">
<p class="ltx_p" id="A3.p1.1">Here we list additional experimental details for our implementation and experiments.</p>
</div>
<section class="ltx_subsection" id="A3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.1 </span>Self-Prompt Generator Training</h3>
<div class="ltx_para ltx_noindent" id="A3.SS1.p1">
<p class="ltx_p" id="A3.SS1.p1.1">The hyperparameters for self-prompt generator training are detailed below. During SFT for the self-prompt generator, we employ a learning rate of <math alttext="1.0\times 10^{-6}" class="ltx_Math" display="inline" id="A3.SS1.p1.1.m1.1"><semantics id="A3.SS1.p1.1.m1.1a"><mrow id="A3.SS1.p1.1.m1.1.1" xref="A3.SS1.p1.1.m1.1.1.cmml"><mn id="A3.SS1.p1.1.m1.1.1.2" xref="A3.SS1.p1.1.m1.1.1.2.cmml">1.0</mn><mo id="A3.SS1.p1.1.m1.1.1.1" lspace="0.222em" rspace="0.222em" xref="A3.SS1.p1.1.m1.1.1.1.cmml">×</mo><msup id="A3.SS1.p1.1.m1.1.1.3" xref="A3.SS1.p1.1.m1.1.1.3.cmml"><mn id="A3.SS1.p1.1.m1.1.1.3.2" xref="A3.SS1.p1.1.m1.1.1.3.2.cmml">10</mn><mrow id="A3.SS1.p1.1.m1.1.1.3.3" xref="A3.SS1.p1.1.m1.1.1.3.3.cmml"><mo id="A3.SS1.p1.1.m1.1.1.3.3a" xref="A3.SS1.p1.1.m1.1.1.3.3.cmml">−</mo><mn id="A3.SS1.p1.1.m1.1.1.3.3.2" xref="A3.SS1.p1.1.m1.1.1.3.3.2.cmml">6</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="A3.SS1.p1.1.m1.1b"><apply id="A3.SS1.p1.1.m1.1.1.cmml" xref="A3.SS1.p1.1.m1.1.1"><times id="A3.SS1.p1.1.m1.1.1.1.cmml" xref="A3.SS1.p1.1.m1.1.1.1"></times><cn id="A3.SS1.p1.1.m1.1.1.2.cmml" type="float" xref="A3.SS1.p1.1.m1.1.1.2">1.0</cn><apply id="A3.SS1.p1.1.m1.1.1.3.cmml" xref="A3.SS1.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="A3.SS1.p1.1.m1.1.1.3.1.cmml" xref="A3.SS1.p1.1.m1.1.1.3">superscript</csymbol><cn id="A3.SS1.p1.1.m1.1.1.3.2.cmml" type="integer" xref="A3.SS1.p1.1.m1.1.1.3.2">10</cn><apply id="A3.SS1.p1.1.m1.1.1.3.3.cmml" xref="A3.SS1.p1.1.m1.1.1.3.3"><minus id="A3.SS1.p1.1.m1.1.1.3.3.1.cmml" xref="A3.SS1.p1.1.m1.1.1.3.3"></minus><cn id="A3.SS1.p1.1.m1.1.1.3.3.2.cmml" type="integer" xref="A3.SS1.p1.1.m1.1.1.3.3.2">6</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p1.1.m1.1c">1.0\times 10^{-6}</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p1.1.m1.1d">1.0 × 10 start_POSTSUPERSCRIPT - 6 end_POSTSUPERSCRIPT</annotation></semantics></math> for Mistral-Base and Llama3-Base, with a batch size of 32, a warm-up ratio of 0.1, and an AdamW optimizer. We set the maximum sequence length to 8,000 and train the model for 3 epochs.</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS1.p2">
<p class="ltx_p" id="A3.SS1.p2.1">To generate diverse synthetic prompts, we randomly sampled 1 million paragraphs from RefinedWeb <cite class="ltx_cite ltx_citemacro_citep">(Penedo et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib46" title="">2023</a>)</cite> and randomly selected 3 keywords from each paragraph. This process yields a large keyword list pool containing 1 million keyword lists. These keyword lists serve as the input for the self-prompt generator in each iteration. For each iteration, we generate between 36,000 and 72,000 keyword lists (depending on the filtering ratio at each iteration) and exclude lists containing personal names or stopwords. We use vllm for inference and set the sampling temperature to 0.7.</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.2 </span>Response Improver Training</h3>
<div class="ltx_para ltx_noindent" id="A3.SS2.p1">
<p class="ltx_p" id="A3.SS2.p1.1">As the model iterates and self-improves, it may produce responses superior to those of the seed data. Our objective is for the response improver to learn from its deficiencies. Therefore, we identify instances where the model output is inferior to the original response using the same scoring model as the filtering stage. This ensures that the response improver only learns positive optimizations or semantic paraphrasing, rather than negative optimizations.
Specifically, for a given <math alttext="\mathcal{x}_{i}" class="ltx_Math" display="inline" id="A3.SS2.p1.1.m1.1"><semantics id="A3.SS2.p1.1.m1.1a"><msub id="A3.SS2.p1.1.m1.1.1" xref="A3.SS2.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A3.SS2.p1.1.m1.1.1.2" xref="A3.SS2.p1.1.m1.1.1.2.cmml">𝓍</mi><mi id="A3.SS2.p1.1.m1.1.1.3" xref="A3.SS2.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="A3.SS2.p1.1.m1.1b"><apply id="A3.SS2.p1.1.m1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A3.SS2.p1.1.m1.1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1">subscript</csymbol><ci id="A3.SS2.p1.1.m1.1.1.2.cmml" xref="A3.SS2.p1.1.m1.1.1.2">𝓍</ci><ci id="A3.SS2.p1.1.m1.1.1.3.cmml" xref="A3.SS2.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS2.p1.1.m1.1c">\mathcal{x}_{i}</annotation><annotation encoding="application/x-llamapun" id="A3.SS2.p1.1.m1.1d">caligraphic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, if the score difference between the gold standard completion and the model completion exceeds the threshold, we include this data for response improver training.
In the Mistral-Base setting, we set the PairRM scoring threshold to 0.20. In the Llama3-Base setting, the ArmoRM-Llama3-8B-v0.1 scoring threshold is set to 0.02.</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS2.p2">
<p class="ltx_p" id="A3.SS2.p2.1">Since the response improver data are automatically derived from SFT data conversion, the model also learns paraphrasing. Using a more powerful model, such as GPT-4, to create data that introduce only minor improvements for rewriter training is a promising research direction. However, to explore the potential for self-boosting, we did not introduce additional data or stronger models for data construction, resulting in inevitable paraphrasing by the response improver.</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS2.p3">
<p class="ltx_p" id="A3.SS2.p3.1">During SFT for the response improver, most training parameters are same to the parameters in self-prompt generator training. Some miner differences lie in: we set the max sequence length to 6,000.</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.3 </span>Response Improving and Filtering Setting</h3>
<div class="ltx_para ltx_noindent" id="A3.SS3.p1">
<p class="ltx_p" id="A3.SS3.p1.2">To produce synthetic preference (chosen and rejected) completions for the <math alttext="t" class="ltx_Math" display="inline" id="A3.SS3.p1.1.m1.1"><semantics id="A3.SS3.p1.1.m1.1a"><mi id="A3.SS3.p1.1.m1.1.1" xref="A3.SS3.p1.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="A3.SS3.p1.1.m1.1b"><ci id="A3.SS3.p1.1.m1.1.1.cmml" xref="A3.SS3.p1.1.m1.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS3.p1.1.m1.1c">t</annotation><annotation encoding="application/x-llamapun" id="A3.SS3.p1.1.m1.1d">italic_t</annotation></semantics></math>-th iteration, we utilize the current policy model to generate a completion and employ the response improver to refine it. We use vllm for inference, with the decoding temperature set at <math alttext="T=0.7" class="ltx_Math" display="inline" id="A3.SS3.p1.2.m2.1"><semantics id="A3.SS3.p1.2.m2.1a"><mrow id="A3.SS3.p1.2.m2.1.1" xref="A3.SS3.p1.2.m2.1.1.cmml"><mi id="A3.SS3.p1.2.m2.1.1.2" xref="A3.SS3.p1.2.m2.1.1.2.cmml">T</mi><mo id="A3.SS3.p1.2.m2.1.1.1" xref="A3.SS3.p1.2.m2.1.1.1.cmml">=</mo><mn id="A3.SS3.p1.2.m2.1.1.3" xref="A3.SS3.p1.2.m2.1.1.3.cmml">0.7</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.SS3.p1.2.m2.1b"><apply id="A3.SS3.p1.2.m2.1.1.cmml" xref="A3.SS3.p1.2.m2.1.1"><eq id="A3.SS3.p1.2.m2.1.1.1.cmml" xref="A3.SS3.p1.2.m2.1.1.1"></eq><ci id="A3.SS3.p1.2.m2.1.1.2.cmml" xref="A3.SS3.p1.2.m2.1.1.2">𝑇</ci><cn id="A3.SS3.p1.2.m2.1.1.3.cmml" type="float" xref="A3.SS3.p1.2.m2.1.1.3">0.7</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS3.p1.2.m2.1c">T=0.7</annotation><annotation encoding="application/x-llamapun" id="A3.SS3.p1.2.m2.1d">italic_T = 0.7</annotation></semantics></math>.</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS3.p2">
<p class="ltx_p" id="A3.SS3.p2.1">During synthetic data filtering, we set a threshold 0.20 for PairRM scores and a threshold 0.02 for ArmoRM-Llama3-8B-v0.1 scores.
In addition, we filter out all the data that contain over 50% repetition patterns to avoid model collapse on synthetic data.
In our experiments, we randomly incorporated 10,000 preference pairs from each iteration to the whole synthetic preference data.</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.4 </span>Optimization</h3>
<div class="ltx_para ltx_noindent" id="A3.SS4.p1">
<p class="ltx_p" id="A3.SS4.p1.3">As the parameter <math alttext="\beta" class="ltx_Math" display="inline" id="A3.SS4.p1.1.m1.1"><semantics id="A3.SS4.p1.1.m1.1a"><mi id="A3.SS4.p1.1.m1.1.1" xref="A3.SS4.p1.1.m1.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="A3.SS4.p1.1.m1.1b"><ci id="A3.SS4.p1.1.m1.1.1.cmml" xref="A3.SS4.p1.1.m1.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS4.p1.1.m1.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="A3.SS4.p1.1.m1.1d">italic_β</annotation></semantics></math> is crucial for achieving optimal performance in SimPO <cite class="ltx_cite ltx_citemacro_citep">(Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite>, we individually search the <math alttext="\beta" class="ltx_Math" display="inline" id="A3.SS4.p1.2.m2.1"><semantics id="A3.SS4.p1.2.m2.1a"><mi id="A3.SS4.p1.2.m2.1.1" xref="A3.SS4.p1.2.m2.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="A3.SS4.p1.2.m2.1b"><ci id="A3.SS4.p1.2.m2.1.1.cmml" xref="A3.SS4.p1.2.m2.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS4.p1.2.m2.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="A3.SS4.p1.2.m2.1d">italic_β</annotation></semantics></math> in the range of [2, 4, 6, 8, 10, 12] for each optimization process. We use a fixed <math alttext="\gamma=1.6" class="ltx_Math" display="inline" id="A3.SS4.p1.3.m3.1"><semantics id="A3.SS4.p1.3.m3.1a"><mrow id="A3.SS4.p1.3.m3.1.1" xref="A3.SS4.p1.3.m3.1.1.cmml"><mi id="A3.SS4.p1.3.m3.1.1.2" xref="A3.SS4.p1.3.m3.1.1.2.cmml">γ</mi><mo id="A3.SS4.p1.3.m3.1.1.1" xref="A3.SS4.p1.3.m3.1.1.1.cmml">=</mo><mn id="A3.SS4.p1.3.m3.1.1.3" xref="A3.SS4.p1.3.m3.1.1.3.cmml">1.6</mn></mrow><annotation-xml encoding="MathML-Content" id="A3.SS4.p1.3.m3.1b"><apply id="A3.SS4.p1.3.m3.1.1.cmml" xref="A3.SS4.p1.3.m3.1.1"><eq id="A3.SS4.p1.3.m3.1.1.1.cmml" xref="A3.SS4.p1.3.m3.1.1.1"></eq><ci id="A3.SS4.p1.3.m3.1.1.2.cmml" xref="A3.SS4.p1.3.m3.1.1.2">𝛾</ci><cn id="A3.SS4.p1.3.m3.1.1.3.cmml" type="float" xref="A3.SS4.p1.3.m3.1.1.3">1.6</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS4.p1.3.m3.1c">\gamma=1.6</annotation><annotation encoding="application/x-llamapun" id="A3.SS4.p1.3.m3.1d">italic_γ = 1.6</annotation></semantics></math> for the Mistral-Base model and Llama3-Base.</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.5 </span>Baselines</h3>
<div class="ltx_para ltx_noindent" id="A3.SS5.p1">
<p class="ltx_p" id="A3.SS5.p1.1">In experiments involving iterative baselines, we control various conditions to ensure fairness. We maintain the same training data size for both iterative baselines and SynPO. We adopt the SimPO loss <cite class="ltx_cite ltx_citemacro_citep">(Meng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib40" title="">2024</a>)</cite> for preference optimization, as it is more effective than DPO <cite class="ltx_cite ltx_citemacro_citep">(Rafailov et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib47" title="">2024</a>)</cite>.
We all use self-generated prompts, which have been shown to be superior to prompts generated by other methods, as validated in Section <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S2.SS1.SSS0.Px2" title="Keywords Sampling and Prompt Generating ‣ 2.1 Synthetic Prompt Creation ‣ 2 Self-Boosting LLM with Synthetic Preference Data ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">2.1</span></a> and Section <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#S4.SS1" title="4.1 Synthetic Prompts and Responses ‣ 4 Ablation Studies ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">4.1</span></a>.
All preference construction processes are iterated until performance no longer improves.</p>
</div>
<div class="ltx_para ltx_noindent" id="A3.SS5.p2">
<p class="ltx_p" id="A3.SS5.p2.1">Regarding the baseline models trained on UltraFeedback 61k, we straightforwardly adopt the well-trained versions available from the SimPO repository at <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/princeton-nlp/SimPO" title="">https://github.com/princeton-nlp/SimPO</a>.</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS6">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.6 </span>Decoding Hyperparameters</h3>
<div class="ltx_para ltx_noindent" id="A3.SS6.p1">
<p class="ltx_p" id="A3.SS6.p1.1">For the AlpacaEval 2 <cite class="ltx_cite ltx_citemacro_citep">(Dubois et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib17" title="">2024</a>)</cite> evaluation, we use a sampling-based decoding approach to generate responses. Specifically, we employ vllm for inference, setting the temperature to 0.7 and the maximum tokens to 2048 for both the Mistral-Base and Llama3-Base configurations. All other parameters adhere to the default settings in vllm.
As for MT-Bench <cite class="ltx_cite ltx_citemacro_citep">(Zheng et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib67" title="">2024</a>)</cite>, we adhere to the official decoding setup, which specifies varying sampling temperatures tailored to distinct categories.</p>
</div>
</section>
</section>
<section class="ltx_appendix" id="A4">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix D </span>Additional Details on Seed Data Ablation</h2>
<div class="ltx_para ltx_noindent" id="A4.p1">
<p class="ltx_p" id="A4.p1.1">In setting 2), 3), and 4), to prevent cases where rejected responses are better than the chosen ones, we filter the preference data using the same method as SynPO, specifically employing ArmoRM-Llama3-8B-v0.1 to select valid preference data. We fix the threshold at 0.02, as our search among {0, 0.1, 0.2} reveal that 0.02 consistently performs the best.</p>
</div>
</section>
<section class="ltx_appendix" id="A5">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix E </span>API Usage</h2>
<div class="ltx_para ltx_noindent" id="A5.p1">
<p class="ltx_p" id="A5.p1.1">For GPT-4 Turbo, we all use the latest turbo-2024-04-09 API on Azure OpenAI Service <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#gpt-4-turbo" title="">https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models#gpt-4-turbo</a>.</p>
</div>
</section>
<section class="ltx_appendix" id="A6">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix F </span>Prompt Analysis</h2>
<div class="ltx_para ltx_noindent" id="A6.p1">
<p class="ltx_p" id="A6.p1.1">Here we provide the prompt used for prompt topic and intention analysis in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A6.F8" title="Figure 8 ‣ Appendix F Prompt Analysis ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">8</span></a>, along with a more detailed distribution bar plot for different intentions and topics in Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A6.F9" title="Figure 9 ‣ Appendix F Prompt Analysis ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">9</span></a>. The topic word list is derived from UltraChat <cite class="ltx_cite ltx_citemacro_citep">(Ding et al., <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#bib.bib15" title="">2023</a>)</cite>, while the intention word list was designed by us.</p>
</div>
<figure class="ltx_figure" id="A6.F8"><svg class="ltx_picture ltx_centering" height="606.1" id="A6.F8.pic1" overflow="visible" version="1.1" width="603.54"><g fill="#000000" stroke="#000000" stroke-width="0.4pt" transform="translate(0,606.1) matrix(1 0 0 -1 0 0) translate(0,3.54)"><g color="#F2F2F2" fill="#F2F2F2" fill-opacity="0.5" stroke="#F2F2F2" stroke-opacity="0.5"><path d="M 3.54 4.13 L 3.54 591.34 C 3.54 595.58 6.98 599.02 11.22 599.02 L 595.87 599.02 C 600.11 599.02 603.54 595.58 603.54 591.34 L 603.54 4.13 C 603.54 -0.11 600.11 -3.54 595.87 -3.54 L 11.22 -3.54 C 6.98 -3.54 3.54 -0.11 3.54 4.13 Z" style="stroke:none"></path></g><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 596.65 C 0 599.92 2.64 602.56 5.91 602.56 L 594.09 602.56 C 597.36 602.56 600 599.92 600 596.65 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 586.32 L 598.03 586.32 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 17.72 588.29)"><foreignobject color="#FFFFFF" height="12.3" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="564.57">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A6.F8.pic1.1.1.1.1.1" style="width:408.0pt;">
<span class="ltx_p" id="A6.F8.pic1.1.1.1.1.1.1">Topic and Intention Classification Prompt</span>
</span></foreignobject></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 17.72 5.91)"><foreignobject color="#000000" height="576.48" overflow="visible" transform="matrix(1 0 0 -1 0 16.6)" width="564.57">
<span class="ltx_inline-block ltx_minipage ltx_align_bottom" id="A6.F8.pic1.2.2.2.1.1" style="width:408.0pt;">
<span class="ltx_p" id="A6.F8.pic1.2.2.2.1.1.1">You are a smart AI assistant.
Below the ‘### Given text‘ section, a user’s instruction/query will be provided. Please determine which topic this question belongs to and output ONE most suitable topic from the ‘topics‘ list. Also, output ONE most suitable intention of the user from the ‘intentions‘ list.
(Note: try your best to use the words or phrases in the given lists, but if none of them fits, you can output a new one.)</span>
<span class="ltx_p" id="A6.F8.pic1.2.2.2.1.1.2">### Given Text</span>
<span class="ltx_p" id="A6.F8.pic1.2.2.2.1.1.3">{given_text}</span>
<span class="ltx_p" id="A6.F8.pic1.2.2.2.1.1.4">### Topic List
topics = [“Technology”, “Health and wellness”, “Travel and adventure”, “Food and drink”, “Art and culture”, “Science and innovation”, “Fashion and style”, “Relationships and dating”, “Sports and fitness”, “Nature and the environment”, “Music and entertainment”, “Politics and current events”, “Education and learning”, “Money and finance”, “Work and career”, “Philosophy and ethics”, “History and nostalgia”, “Social media and communication”, “Creativity and inspiration”, “Personal growth and development”, “Spirituality and faith”, “Pop culture and trends”, “Beauty and self-care”, “Family and parenting”, “Entrepreneurship and business”, “Literature and writing”, “Gaming and technology”, “Mindfulness and meditation”, “Diversity and inclusion”, “Travel and culture exchange”]</span>
<span class="ltx_p" id="A6.F8.pic1.2.2.2.1.1.5">### Intention List
intentions = [“Seek advice”, “Design help”, “Plan something”, “Discuss topics”, “Analyze something”, “Evaluate something”, “Search help”, “Learn something”, “Writing/polishing help”, “Quality chat”, “Create something”, “Fix something”, “Compare something”, “Transfer something”, “Calculate something”, “Navigate”, “Explore something new”, “Play a game”, “Install/uninstall help”, “Book/cancel help”, “Buy/sell suggestions”, “Register/enroll help”, “Translation help”, “Proofreading/editing help”, “Mental health advice”, “Recommendations”, “Troubleshoot help”, “Project feedback”, “Creative brainstorming”, “Time management help”, “Organization help”, “Public speaking help”, “Job application help”, “Networking help”, “Language learning help”, “Technology setup help”, “Event coordination help”, “Social media management help”, “Conflict resolution help”, “Sustainable living advice”]</span>
<span class="ltx_p" id="A6.F8.pic1.2.2.2.1.1.6">### Output Format
Format your chosen topic and intention only as a python dictionary with no extraneous output e.g. ”topic”: ”…”, “intention”: ”…”. Each value only contain ONE topic or intention.</span>
</span></foreignobject></g></g></svg>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8: </span>Prompt for using GPT-4 Turbo as a intention and topic classifier.</figcaption>
</figure>
<figure class="ltx_figure" id="A6.F9"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="219" id="A6.F9.g1" src="x6.png" width="830"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 9: </span>Topic and intention distribution bar plot for the synthetic prompts in SynPO and UltraFeedback.</figcaption>
</figure>
</section>
<section class="ltx_appendix" id="A7">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix G </span>Evaluation Details</h2>
<div class="ltx_para ltx_noindent" id="A7.p1">
<p class="ltx_p" id="A7.p1.1">For instruction-following ability evaluation,
Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A7.T8" title="Table 8 ‣ Appendix G Evaluation Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">8</span></a> presents the detailed information for three alignment benchmarks we use, including AlpacaEval 2.0, Arena-Hard and MT-Bench. Additionally, we display the radar chart for MT-Bench scores on different prompt types (see Figure <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A7.F10" title="Figure 10 ‣ Appendix G Evaluation Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">10</span></a>).</p>
</div>
<div class="ltx_para ltx_noindent" id="A7.p2">
<p class="ltx_p" id="A7.p2.1">As for general LLM capability evaluation, we provide the few-shot example numbers on Open LLM Leaderboard in
Table <a class="ltx_ref" href="https://arxiv.org/html/2410.06961v1#A7.T9" title="Table 9 ‣ Appendix G Evaluation Details ‣ Self-Boosting LLMs with Synthetic Preference Data"><span class="ltx_text ltx_ref_tag">9</span></a>
and a comprehensive comparison of SynPO.</p>
</div>
<figure class="ltx_table" id="A7.T8">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A7.T8.1" style="width:357.7pt;height:68.9pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-7.9pt,1.5pt) scale(0.957466553240984,0.957466553240984) ;">
<table class="ltx_tabular ltx_align_middle" id="A7.T8.1.1">
<tr class="ltx_tr" id="A7.T8.1.1.1">
<td class="ltx_td ltx_border_tt" id="A7.T8.1.1.1.1" style="padding-left:3.0pt;padding-right:3.0pt;"></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A7.T8.1.1.1.2" style="padding-left:3.0pt;padding-right:3.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T8.1.1.1.2.1"># Instances</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A7.T8.1.1.1.3" style="padding-left:3.0pt;padding-right:3.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T8.1.1.1.3.1">Baseline Model</span></td>
<td class="ltx_td ltx_align_center ltx_border_tt" id="A7.T8.1.1.1.4" style="padding-left:3.0pt;padding-right:3.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T8.1.1.1.4.1">Judge Model</span></td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_tt" id="A7.T8.1.1.1.5" style="padding-left:3.0pt;padding-right:3.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T8.1.1.1.5.1">Scoring Type</span></td>
</tr>
<tr class="ltx_tr" id="A7.T8.1.1.2">
<td class="ltx_td ltx_align_left ltx_border_t" id="A7.T8.1.1.2.1" style="padding-left:3.0pt;padding-right:3.0pt;">AlpacaEval 2.0</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A7.T8.1.1.2.2" style="padding-left:3.0pt;padding-right:3.0pt;">805</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A7.T8.1.1.2.3" style="padding-left:3.0pt;padding-right:3.0pt;">GPT-4 Turbo</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="A7.T8.1.1.2.4" style="padding-left:3.0pt;padding-right:3.0pt;">GPT-4 Turbo</td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="A7.T8.1.1.2.5" style="padding-left:3.0pt;padding-right:3.0pt;">Pairwise comparison</td>
</tr>
<tr class="ltx_tr" id="A7.T8.1.1.3">
<td class="ltx_td ltx_align_left" id="A7.T8.1.1.3.1" style="padding-left:3.0pt;padding-right:3.0pt;">Arena-Hard</td>
<td class="ltx_td ltx_align_center" id="A7.T8.1.1.3.2" style="padding-left:3.0pt;padding-right:3.0pt;">500</td>
<td class="ltx_td ltx_align_center" id="A7.T8.1.1.3.3" style="padding-left:3.0pt;padding-right:3.0pt;">GPT-4-0314</td>
<td class="ltx_td ltx_align_center" id="A7.T8.1.1.3.4" style="padding-left:3.0pt;padding-right:3.0pt;">GPT-4 Turbo</td>
<td class="ltx_td ltx_nopad_r ltx_align_center" id="A7.T8.1.1.3.5" style="padding-left:3.0pt;padding-right:3.0pt;">Pairwise comparison</td>
</tr>
<tr class="ltx_tr" id="A7.T8.1.1.4">
<td class="ltx_td ltx_align_left ltx_border_bb" id="A7.T8.1.1.4.1" style="padding-left:3.0pt;padding-right:3.0pt;">MT-Bench</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A7.T8.1.1.4.2" style="padding-left:3.0pt;padding-right:3.0pt;">80</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A7.T8.1.1.4.3" style="padding-left:3.0pt;padding-right:3.0pt;">-</td>
<td class="ltx_td ltx_align_center ltx_border_bb" id="A7.T8.1.1.4.4" style="padding-left:3.0pt;padding-right:3.0pt;">GPT-4 Turbo</td>
<td class="ltx_td ltx_nopad_r ltx_align_center ltx_border_bb" id="A7.T8.1.1.4.5" style="padding-left:3.0pt;padding-right:3.0pt;">Single-answer grading</td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>Details for three alignment benchmarks.
</figcaption>
</figure>
<figure class="ltx_table" id="A7.T9">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="A7.T9.1">
<tr class="ltx_tr" id="A7.T9.1.1">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_tt" id="A7.T9.1.1.1" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T9.1.1.1.1">Task</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="A7.T9.1.1.2" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T9.1.1.2.1">Arc</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="A7.T9.1.1.3" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T9.1.1.3.1">HellaSwag</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="A7.T9.1.1.4" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T9.1.1.4.1">TruthfulQA</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="A7.T9.1.1.5" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T9.1.1.5.1">MMLU</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="A7.T9.1.1.6" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T9.1.1.6.1">Winogrande</span></td>
<td class="ltx_td ltx_align_right ltx_border_tt" id="A7.T9.1.1.7" style="padding-left:4.0pt;padding-right:4.0pt;"><span class="ltx_text ltx_font_bold" id="A7.T9.1.1.7.1">GSM8k</span></td>
</tr>
<tr class="ltx_tr" id="A7.T9.1.2">
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t" id="A7.T9.1.2.1" style="padding-left:4.0pt;padding-right:4.0pt;"># Few-shot Examples</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="A7.T9.1.2.2" style="padding-left:4.0pt;padding-right:4.0pt;">25</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="A7.T9.1.2.3" style="padding-left:4.0pt;padding-right:4.0pt;">10</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="A7.T9.1.2.4" style="padding-left:4.0pt;padding-right:4.0pt;">0</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="A7.T9.1.2.5" style="padding-left:4.0pt;padding-right:4.0pt;">5</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="A7.T9.1.2.6" style="padding-left:4.0pt;padding-right:4.0pt;">5</td>
<td class="ltx_td ltx_align_right ltx_border_t" id="A7.T9.1.2.7" style="padding-left:4.0pt;padding-right:4.0pt;">5</td>
</tr>
<tr class="ltx_tr" id="A7.T9.1.3">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_r" id="A7.T9.1.3.1" style="padding-left:4.0pt;padding-right:4.0pt;">Metrics</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A7.T9.1.3.2" style="padding-left:4.0pt;padding-right:4.0pt;">acc_norm</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A7.T9.1.3.3" style="padding-left:4.0pt;padding-right:4.0pt;">acc_norm</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A7.T9.1.3.4" style="padding-left:4.0pt;padding-right:4.0pt;">mc2</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A7.T9.1.3.5" style="padding-left:4.0pt;padding-right:4.0pt;">acc</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A7.T9.1.3.6" style="padding-left:4.0pt;padding-right:4.0pt;">acc</td>
<td class="ltx_td ltx_align_right ltx_border_bb" id="A7.T9.1.3.7" style="padding-left:4.0pt;padding-right:4.0pt;">acc</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 9: </span>Number of few-shot examples in Open LLM Leaderboard evaluation.</figcaption>
</figure>
<figure class="ltx_figure" id="A7.F10"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="303" id="A7.F10.g1" src="x7.png" width="830"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 10: </span>MT-Bench scores on different prompt types. The left radar chart represents results from SynPO on Llama3 and the right comes from Mistral.</figcaption>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Wed Oct  9 14:53:48 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
