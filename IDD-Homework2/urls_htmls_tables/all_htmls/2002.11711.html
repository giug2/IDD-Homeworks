<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2002.11711] FedCoin: A Peer-to-Peer Payment System for Federated Learning</title><meta property="og:description" content="Federated learning (FL) is an emerging collaborative machine learning method to train models on distributed datasets with privacy concerns. To properly incentivize data owners to contribute their efforts, Shapley Value‚Ä¶">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FedCoin: A Peer-to-Peer Payment System for Federated Learning">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="FedCoin: A Peer-to-Peer Payment System for Federated Learning">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2002.11711">

<!--Generated on Tue Mar 19 18:29:29 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">FedCoin: A Peer-to-Peer Payment System for Federated Learning</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Yuan Liu<sup id="id9.2.id1" class="ltx_sup">1</sup><span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>Contact Author</span></span></span>
</span></span>
<span class="ltx_author_before">‚ÄÉ‚ÄÉ</span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Shuai Sun<sup id="id10.2.id1" class="ltx_sup">1</sup>
</span></span>
<span class="ltx_author_before">‚ÄÉ‚ÄÉ</span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Zhengpeng Ai<sup id="id11.3.id1" class="ltx_sup"><span id="id11.3.id1.1" class="ltx_text ltx_font_italic">1</span></sup>&amp;Shuangfeng Zhang<sup id="id12.4.id2" class="ltx_sup">1</sup>
</span></span>
<span class="ltx_author_before">‚ÄÉ‚ÄÉ</span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Zelei Liu<sup id="id13.2.id1" class="ltx_sup"><span id="id13.2.id1.1" class="ltx_text ltx_font_italic">2</span></sup>
</span></span>
<span class="ltx_author_before">‚ÄÉ‚ÄÉ</span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Han Yu<sup id="id14.4.id1" class="ltx_sup"><span id="id14.4.id1.1" class="ltx_text ltx_font_italic">2</span></sup>

<br class="ltx_break"><sup id="id15.5.id2" class="ltx_sup">1</sup>Northeastern University, Shenyang, China
<br class="ltx_break"><sup id="id16.6.id3" class="ltx_sup">2</sup>Nanyang Technological University, Singapore
<br class="ltx_break">liuyuan@swc.neu.edu.cn, sunshuai.edu@gmail, im@aizhengpeng.cn, 1871161@stu.neu.edu.cn
<br class="ltx_break">zelei.liu@ntu.edu.sg, han.yu@ntu.edu.sg
</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id17.id1" class="ltx_p">Federated learning (FL) is an emerging collaborative machine learning method to train models on distributed datasets with privacy concerns. To properly incentivize data owners to contribute their efforts, Shapley Value (SV) is often adopted to fairly assess their contribution. However, the calculation of SV is time-consuming and computationally costly. In this paper, we propose FedCoin, a blockchain-based peer-to-peer payment system for FL to enable a feasible SV based profit distribution. In FedCoin, blockchain consensus entities calculate SVs and a new block is created based on the proof of Shapley (PoSap) protocol. It is in contrast to the popular BitCoin network where consensus entities ‚Äúmine‚Äù new blocks by solving meaningless puzzles. Based on the computed SVs, a scheme for dividing the incentive payoffs among FL clients with nonrepudiation and tamper-resistance properties is proposed. Experimental results based on real-world data show that FedCoin can promote high-quality data from FL clients through accurately computing SVs with an upper bound on the computational resources required for reaching consensus. It opens opportunities for non-data owners to play a role in FL.</p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Nowadays, many businesses generate large amount of data through usage, and rely on making informed decisions using machine learning (ML) based on such data in order to thrive. With changing regulatory scene, ML is facing increasingly difficult challenges with respect to the usage of such data. Data are often collected and owned by multiple distributed entities. They often contain sensitive or private information and is cannot be stored in a centralized server without violating privacy protection laws. In recent years, federated learning (FL) has emerged as a promising solution to these challenges <cite class="ltx_cite ltx_citemacro_cite">Yang <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib18" title="" class="ltx_ref">2019a</a>)</cite>.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">In FL, each entity trains its local model and contributes the local model parameter updates to a center server to help build a more powerful global FL model. Compared with centralized ML methods, FL not only reduces communication costs by transmitting model updates instead of raw data, but also reduce the computational costs of the server by leveraging computing power from the clients. Moreover, since local data never leave the data owners, FL improves user privacy <cite class="ltx_cite ltx_citemacro_cite">McMahan <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib14" title="" class="ltx_ref">2017</a>); Bonawitz <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib4" title="" class="ltx_ref">2019</a>)</cite>.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">From the above description, it is clear that FL clients are making significant contributions towards the FL model. Thus, in order to sustain an FL community, it is important for FL clients to be properly incentivized. For this to happen, FL clients must be treated fairly <cite class="ltx_cite ltx_citemacro_cite">Yu <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib20" title="" class="ltx_ref">2020</a>)</cite>. Existing FL incentive schemes generally agree that fair treatment of FL clients shall be based on a fair assessment of their contributions to the FL model <cite class="ltx_cite ltx_citemacro_cite">Kairouz <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib9" title="" class="ltx_ref">2019</a>)</cite>. Currently, the most widely adopted method for fair assessment of FL client contribution is that of Shapley Values (SVs) <cite class="ltx_cite ltx_citemacro_cite">Jia <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib8" title="" class="ltx_ref">2019</a>); Song <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib17" title="" class="ltx_ref">2019</a>)</cite>.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.2" class="ltx_p">SV is a popular notion in fairly distributing profits earned by a coalition among its contributors. It has been applied in various fields, ranging from economics, information theory, and ML. The reason for its broad application is that the SV divides the payoff with attractive properties such as fairness, individual rationality, and additivity. However, SV based distribution solution often takes exponential time to compute with a complexity of <math id="S1.p4.1.m1.1" class="ltx_Math" alttext="\mathcal{O}(n!)" display="inline"><semantics id="S1.p4.1.m1.1a"><mrow id="S1.p4.1.m1.1.1" xref="S1.p4.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S1.p4.1.m1.1.1.3" xref="S1.p4.1.m1.1.1.3.cmml">ùí™</mi><mo lspace="0em" rspace="0em" id="S1.p4.1.m1.1.1.2" xref="S1.p4.1.m1.1.1.2.cmml">‚Äã</mo><mrow id="S1.p4.1.m1.1.1.1.1" xref="S1.p4.1.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S1.p4.1.m1.1.1.1.1.2" xref="S1.p4.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S1.p4.1.m1.1.1.1.1.1" xref="S1.p4.1.m1.1.1.1.1.1.cmml"><mi id="S1.p4.1.m1.1.1.1.1.1.2" xref="S1.p4.1.m1.1.1.1.1.1.2.cmml">n</mi><mo id="S1.p4.1.m1.1.1.1.1.1.1" xref="S1.p4.1.m1.1.1.1.1.1.1.cmml">!</mo></mrow><mo stretchy="false" id="S1.p4.1.m1.1.1.1.1.3" xref="S1.p4.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.1.m1.1b"><apply id="S1.p4.1.m1.1.1.cmml" xref="S1.p4.1.m1.1.1"><times id="S1.p4.1.m1.1.1.2.cmml" xref="S1.p4.1.m1.1.1.2"></times><ci id="S1.p4.1.m1.1.1.3.cmml" xref="S1.p4.1.m1.1.1.3">ùí™</ci><apply id="S1.p4.1.m1.1.1.1.1.1.cmml" xref="S1.p4.1.m1.1.1.1.1"><factorial id="S1.p4.1.m1.1.1.1.1.1.1.cmml" xref="S1.p4.1.m1.1.1.1.1.1.1"></factorial><ci id="S1.p4.1.m1.1.1.1.1.1.2.cmml" xref="S1.p4.1.m1.1.1.1.1.1.2">ùëõ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.1.m1.1c">\mathcal{O}(n!)</annotation></semantics></math> where <math id="S1.p4.2.m2.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S1.p4.2.m2.1a"><mi id="S1.p4.2.m2.1.1" xref="S1.p4.2.m2.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S1.p4.2.m2.1b"><ci id="S1.p4.2.m2.1.1.cmml" xref="S1.p4.2.m2.1.1">ùëõ</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.2.m2.1c">n</annotation></semantics></math> is the number of data items. Even though the computational complexity can be reduced through approximating SV with marginal error guarantees <cite class="ltx_cite ltx_citemacro_cite">Jia <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib8" title="" class="ltx_ref">2019</a>)</cite>, it is still computationally costly.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">In order to help FL systems compute SVs to support sustainable incentive schemes, we propose a blockchain-based peer-to-peer payment system <span id="S1.p5.1.1" class="ltx_text ltx_font_italic">FedCoin</span>. The Shapley value of each FL client, reflecting its contribution to the global FL model in a fair way, is calculated by the Proof of Shapley (PoSap) consensus protocol which replaces the traditional hash-based protocol in existing proof of work(PoW) based blockchain systems. All the payments are recorded in the block in an immutable manner. Under FedCoin, paying out incentives to FL clients does not need to rely on a central FL server. Based on this, FedCoin provides a decentralized payment scheme for FL so that incentives for all participants can be delivered in third-party-free manner with nonrepudiation and tamper-resistance properties.</p>
</div>
<div id="S1.p6" class="ltx_para">
<p id="S1.p6.1" class="ltx_p">Extensive experiments based on real-world data show that FedCoin is able to properly determine FL clients‚Äô Shapley Value-based contribution to the global FL model with an upper bound on the computational resources required for reaching consensus. To the best of our knowledge, FedCoin is the first attempt to leverage blockchain technology in federated learning incentive scheme research. It opens up new opportunities for entities which has computational resources but without local data to contribute to federated learning.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Work</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">The incentive mechanism design is an important research direction in the field of federated learning <cite class="ltx_cite ltx_citemacro_cite">Kairouz <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib9" title="" class="ltx_ref">2019</a>); Yang <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib18" title="" class="ltx_ref">2019a</a>)</cite>. In <cite class="ltx_cite ltx_citemacro_cite">Kang <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib10" title="" class="ltx_ref">2019</a>)</cite>, the contract theory is employed to improve the accuracy of model training considering the unreliable data contributors. A consortium blockchain architecture is applied to build a decentralized reputation system. In <cite class="ltx_cite ltx_citemacro_cite">Khan <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib11" title="" class="ltx_ref">2019</a>)</cite>, a Stackelberg-game based incentive mechanism is designed to optimize the utilities of both FL clients and the FL server. These works focus on optimizing the rewards for self-interested FL clients and FL customers who pay to use the FL model. Our study is compatible with these works in terms of determining the payment budget for the FL customers.</p>
</div>
<div id="S2.p2" class="ltx_para">
<p id="S2.p2.1" class="ltx_p">In field of ML, SV has also be studied widely for various purpose. SV can be applied in feature selection, ranking the importance of training data, which is further applied in explaining the behavior of ML models <cite class="ltx_cite ltx_citemacro_cite">Li and
Cui (<a href="#bib.bib13" title="" class="ltx_ref">2019</a>)</cite>. Since the computation complexity is <math id="S2.p2.1.m1.1" class="ltx_Math" alttext="\mathcal{O}(n!)" display="inline"><semantics id="S2.p2.1.m1.1a"><mrow id="S2.p2.1.m1.1.1" xref="S2.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p2.1.m1.1.1.3" xref="S2.p2.1.m1.1.1.3.cmml">ùí™</mi><mo lspace="0em" rspace="0em" id="S2.p2.1.m1.1.1.2" xref="S2.p2.1.m1.1.1.2.cmml">‚Äã</mo><mrow id="S2.p2.1.m1.1.1.1.1" xref="S2.p2.1.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.p2.1.m1.1.1.1.1.2" xref="S2.p2.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S2.p2.1.m1.1.1.1.1.1" xref="S2.p2.1.m1.1.1.1.1.1.cmml"><mi id="S2.p2.1.m1.1.1.1.1.1.2" xref="S2.p2.1.m1.1.1.1.1.1.2.cmml">n</mi><mo id="S2.p2.1.m1.1.1.1.1.1.1" xref="S2.p2.1.m1.1.1.1.1.1.1.cmml">!</mo></mrow><mo stretchy="false" id="S2.p2.1.m1.1.1.1.1.3" xref="S2.p2.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p2.1.m1.1b"><apply id="S2.p2.1.m1.1.1.cmml" xref="S2.p2.1.m1.1.1"><times id="S2.p2.1.m1.1.1.2.cmml" xref="S2.p2.1.m1.1.1.2"></times><ci id="S2.p2.1.m1.1.1.3.cmml" xref="S2.p2.1.m1.1.1.3">ùí™</ci><apply id="S2.p2.1.m1.1.1.1.1.1.cmml" xref="S2.p2.1.m1.1.1.1.1"><factorial id="S2.p2.1.m1.1.1.1.1.1.1.cmml" xref="S2.p2.1.m1.1.1.1.1.1.1"></factorial><ci id="S2.p2.1.m1.1.1.1.1.1.2.cmml" xref="S2.p2.1.m1.1.1.1.1.1.2">ùëõ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.1.m1.1c">\mathcal{O}(n!)</annotation></semantics></math>, approximations of SV also attract many attentions. In <cite class="ltx_cite ltx_citemacro_cite">Ancona <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib1" title="" class="ltx_ref">2019</a>)</cite>, a polynomial-time approximation of SV is proposed for deep neural network. Group sampling based approximation is studied in <cite class="ltx_cite ltx_citemacro_cite">Jia <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib8" title="" class="ltx_ref">2019</a>)</cite>. In this work, our objective is not to decrease the computational complexity, but to establish a scheme so that distributed computational resources, which are otherwise wasted, can be leveraged to help FL systems calculate SVs.</p>
</div>
<div id="S2.p3" class="ltx_para">
<p id="S2.p3.1" class="ltx_p">Blockchain has been widely applied in addressing the security problems in FL applications <cite class="ltx_cite ltx_citemacro_cite">Dillenberger <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib5" title="" class="ltx_ref">2019</a>); Kairouz <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib9" title="" class="ltx_ref">2019</a>); Yang <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib18" title="" class="ltx_ref">2019a</a>)</cite>. FLChain <cite class="ltx_cite ltx_citemacro_cite">Bao <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib2" title="" class="ltx_ref">2019</a>)</cite> and BlockFL <cite class="ltx_cite ltx_citemacro_cite">Kim <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib12" title="" class="ltx_ref">2019</a>)</cite> have been proposed to record the local model parameter updates in the temper-resistant manner. A blockchain-based FL was proposed in
<cite class="ltx_cite ltx_citemacro_cite">Ramanan <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib16" title="" class="ltx_ref">2019</a>)</cite> so as to remove the need for an FL server. A blockchain-based trust management system was proposed in <cite class="ltx_cite ltx_citemacro_cite">Kang <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib10" title="" class="ltx_ref">2019</a>)</cite> to assist FL server to select reliable and high quality data owners as FL clients. These blockchain systems are used as immutable ledgers to record local gradients and aggregate them in a trusted manner. Our work will adopt the blockchain network as a computational engine and payment distribution ledger, which is the first of its kind in the current literature.</p>
</div>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Preliminaries</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.12" class="ltx_p">For a typical FL scenario, we take <math id="S3.p1.1.m1.4" class="ltx_Math" alttext="\mathcal{F}_{i}(w)=\ell(x_{i},y_{i};w_{t})" display="inline"><semantics id="S3.p1.1.m1.4a"><mrow id="S3.p1.1.m1.4.4" xref="S3.p1.1.m1.4.4.cmml"><mrow id="S3.p1.1.m1.4.4.5" xref="S3.p1.1.m1.4.4.5.cmml"><msub id="S3.p1.1.m1.4.4.5.2" xref="S3.p1.1.m1.4.4.5.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p1.1.m1.4.4.5.2.2" xref="S3.p1.1.m1.4.4.5.2.2.cmml">‚Ñ±</mi><mi id="S3.p1.1.m1.4.4.5.2.3" xref="S3.p1.1.m1.4.4.5.2.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="S3.p1.1.m1.4.4.5.1" xref="S3.p1.1.m1.4.4.5.1.cmml">‚Äã</mo><mrow id="S3.p1.1.m1.4.4.5.3.2" xref="S3.p1.1.m1.4.4.5.cmml"><mo stretchy="false" id="S3.p1.1.m1.4.4.5.3.2.1" xref="S3.p1.1.m1.4.4.5.cmml">(</mo><mi id="S3.p1.1.m1.1.1" xref="S3.p1.1.m1.1.1.cmml">w</mi><mo stretchy="false" id="S3.p1.1.m1.4.4.5.3.2.2" xref="S3.p1.1.m1.4.4.5.cmml">)</mo></mrow></mrow><mo id="S3.p1.1.m1.4.4.4" xref="S3.p1.1.m1.4.4.4.cmml">=</mo><mrow id="S3.p1.1.m1.4.4.3" xref="S3.p1.1.m1.4.4.3.cmml"><mi mathvariant="normal" id="S3.p1.1.m1.4.4.3.5" xref="S3.p1.1.m1.4.4.3.5.cmml">‚Ñì</mi><mo lspace="0em" rspace="0em" id="S3.p1.1.m1.4.4.3.4" xref="S3.p1.1.m1.4.4.3.4.cmml">‚Äã</mo><mrow id="S3.p1.1.m1.4.4.3.3.3" xref="S3.p1.1.m1.4.4.3.3.4.cmml"><mo stretchy="false" id="S3.p1.1.m1.4.4.3.3.3.4" xref="S3.p1.1.m1.4.4.3.3.4.cmml">(</mo><msub id="S3.p1.1.m1.2.2.1.1.1.1" xref="S3.p1.1.m1.2.2.1.1.1.1.cmml"><mi id="S3.p1.1.m1.2.2.1.1.1.1.2" xref="S3.p1.1.m1.2.2.1.1.1.1.2.cmml">x</mi><mi id="S3.p1.1.m1.2.2.1.1.1.1.3" xref="S3.p1.1.m1.2.2.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.p1.1.m1.4.4.3.3.3.5" xref="S3.p1.1.m1.4.4.3.3.4.cmml">,</mo><msub id="S3.p1.1.m1.3.3.2.2.2.2" xref="S3.p1.1.m1.3.3.2.2.2.2.cmml"><mi id="S3.p1.1.m1.3.3.2.2.2.2.2" xref="S3.p1.1.m1.3.3.2.2.2.2.2.cmml">y</mi><mi id="S3.p1.1.m1.3.3.2.2.2.2.3" xref="S3.p1.1.m1.3.3.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.p1.1.m1.4.4.3.3.3.6" xref="S3.p1.1.m1.4.4.3.3.4.cmml">;</mo><msub id="S3.p1.1.m1.4.4.3.3.3.3" xref="S3.p1.1.m1.4.4.3.3.3.3.cmml"><mi id="S3.p1.1.m1.4.4.3.3.3.3.2" xref="S3.p1.1.m1.4.4.3.3.3.3.2.cmml">w</mi><mi id="S3.p1.1.m1.4.4.3.3.3.3.3" xref="S3.p1.1.m1.4.4.3.3.3.3.3.cmml">t</mi></msub><mo stretchy="false" id="S3.p1.1.m1.4.4.3.3.3.7" xref="S3.p1.1.m1.4.4.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.1.m1.4b"><apply id="S3.p1.1.m1.4.4.cmml" xref="S3.p1.1.m1.4.4"><eq id="S3.p1.1.m1.4.4.4.cmml" xref="S3.p1.1.m1.4.4.4"></eq><apply id="S3.p1.1.m1.4.4.5.cmml" xref="S3.p1.1.m1.4.4.5"><times id="S3.p1.1.m1.4.4.5.1.cmml" xref="S3.p1.1.m1.4.4.5.1"></times><apply id="S3.p1.1.m1.4.4.5.2.cmml" xref="S3.p1.1.m1.4.4.5.2"><csymbol cd="ambiguous" id="S3.p1.1.m1.4.4.5.2.1.cmml" xref="S3.p1.1.m1.4.4.5.2">subscript</csymbol><ci id="S3.p1.1.m1.4.4.5.2.2.cmml" xref="S3.p1.1.m1.4.4.5.2.2">‚Ñ±</ci><ci id="S3.p1.1.m1.4.4.5.2.3.cmml" xref="S3.p1.1.m1.4.4.5.2.3">ùëñ</ci></apply><ci id="S3.p1.1.m1.1.1.cmml" xref="S3.p1.1.m1.1.1">ùë§</ci></apply><apply id="S3.p1.1.m1.4.4.3.cmml" xref="S3.p1.1.m1.4.4.3"><times id="S3.p1.1.m1.4.4.3.4.cmml" xref="S3.p1.1.m1.4.4.3.4"></times><ci id="S3.p1.1.m1.4.4.3.5.cmml" xref="S3.p1.1.m1.4.4.3.5">‚Ñì</ci><vector id="S3.p1.1.m1.4.4.3.3.4.cmml" xref="S3.p1.1.m1.4.4.3.3.3"><apply id="S3.p1.1.m1.2.2.1.1.1.1.cmml" xref="S3.p1.1.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.1.m1.2.2.1.1.1.1.1.cmml" xref="S3.p1.1.m1.2.2.1.1.1.1">subscript</csymbol><ci id="S3.p1.1.m1.2.2.1.1.1.1.2.cmml" xref="S3.p1.1.m1.2.2.1.1.1.1.2">ùë•</ci><ci id="S3.p1.1.m1.2.2.1.1.1.1.3.cmml" xref="S3.p1.1.m1.2.2.1.1.1.1.3">ùëñ</ci></apply><apply id="S3.p1.1.m1.3.3.2.2.2.2.cmml" xref="S3.p1.1.m1.3.3.2.2.2.2"><csymbol cd="ambiguous" id="S3.p1.1.m1.3.3.2.2.2.2.1.cmml" xref="S3.p1.1.m1.3.3.2.2.2.2">subscript</csymbol><ci id="S3.p1.1.m1.3.3.2.2.2.2.2.cmml" xref="S3.p1.1.m1.3.3.2.2.2.2.2">ùë¶</ci><ci id="S3.p1.1.m1.3.3.2.2.2.2.3.cmml" xref="S3.p1.1.m1.3.3.2.2.2.2.3">ùëñ</ci></apply><apply id="S3.p1.1.m1.4.4.3.3.3.3.cmml" xref="S3.p1.1.m1.4.4.3.3.3.3"><csymbol cd="ambiguous" id="S3.p1.1.m1.4.4.3.3.3.3.1.cmml" xref="S3.p1.1.m1.4.4.3.3.3.3">subscript</csymbol><ci id="S3.p1.1.m1.4.4.3.3.3.3.2.cmml" xref="S3.p1.1.m1.4.4.3.3.3.3.2">ùë§</ci><ci id="S3.p1.1.m1.4.4.3.3.3.3.3.cmml" xref="S3.p1.1.m1.4.4.3.3.3.3.3">ùë°</ci></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.1.m1.4c">\mathcal{F}_{i}(w)=\ell(x_{i},y_{i};w_{t})</annotation></semantics></math> as the loss of prediction on a sample (<math id="S3.p1.2.m2.1" class="ltx_Math" alttext="x_{i}" display="inline"><semantics id="S3.p1.2.m2.1a"><msub id="S3.p1.2.m2.1.1" xref="S3.p1.2.m2.1.1.cmml"><mi id="S3.p1.2.m2.1.1.2" xref="S3.p1.2.m2.1.1.2.cmml">x</mi><mi id="S3.p1.2.m2.1.1.3" xref="S3.p1.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.p1.2.m2.1b"><apply id="S3.p1.2.m2.1.1.cmml" xref="S3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.p1.2.m2.1.1.1.cmml" xref="S3.p1.2.m2.1.1">subscript</csymbol><ci id="S3.p1.2.m2.1.1.2.cmml" xref="S3.p1.2.m2.1.1.2">ùë•</ci><ci id="S3.p1.2.m2.1.1.3.cmml" xref="S3.p1.2.m2.1.1.3">ùëñ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.2.m2.1c">x_{i}</annotation></semantics></math>,<math id="S3.p1.3.m3.1" class="ltx_Math" alttext="y_{i}" display="inline"><semantics id="S3.p1.3.m3.1a"><msub id="S3.p1.3.m3.1.1" xref="S3.p1.3.m3.1.1.cmml"><mi id="S3.p1.3.m3.1.1.2" xref="S3.p1.3.m3.1.1.2.cmml">y</mi><mi id="S3.p1.3.m3.1.1.3" xref="S3.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.p1.3.m3.1b"><apply id="S3.p1.3.m3.1.1.cmml" xref="S3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.p1.3.m3.1.1.1.cmml" xref="S3.p1.3.m3.1.1">subscript</csymbol><ci id="S3.p1.3.m3.1.1.2.cmml" xref="S3.p1.3.m3.1.1.2">ùë¶</ci><ci id="S3.p1.3.m3.1.1.3.cmml" xref="S3.p1.3.m3.1.1.3">ùëñ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.3.m3.1c">y_{i}</annotation></semantics></math>) with model parameters <math id="S3.p1.4.m4.1" class="ltx_Math" alttext="w" display="inline"><semantics id="S3.p1.4.m4.1a"><mi id="S3.p1.4.m4.1.1" xref="S3.p1.4.m4.1.1.cmml">w</mi><annotation-xml encoding="MathML-Content" id="S3.p1.4.m4.1b"><ci id="S3.p1.4.m4.1.1.cmml" xref="S3.p1.4.m4.1.1">ùë§</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.4.m4.1c">w</annotation></semantics></math> at the <math id="S3.p1.5.m5.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S3.p1.5.m5.1a"><mi id="S3.p1.5.m5.1.1" xref="S3.p1.5.m5.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.p1.5.m5.1b"><ci id="S3.p1.5.m5.1.1.cmml" xref="S3.p1.5.m5.1.1">ùë°</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.5.m5.1c">t</annotation></semantics></math>-th round. The parameters <math id="S3.p1.6.m6.1" class="ltx_Math" alttext="w^{t}" display="inline"><semantics id="S3.p1.6.m6.1a"><msup id="S3.p1.6.m6.1.1" xref="S3.p1.6.m6.1.1.cmml"><mi id="S3.p1.6.m6.1.1.2" xref="S3.p1.6.m6.1.1.2.cmml">w</mi><mi id="S3.p1.6.m6.1.1.3" xref="S3.p1.6.m6.1.1.3.cmml">t</mi></msup><annotation-xml encoding="MathML-Content" id="S3.p1.6.m6.1b"><apply id="S3.p1.6.m6.1.1.cmml" xref="S3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.p1.6.m6.1.1.1.cmml" xref="S3.p1.6.m6.1.1">superscript</csymbol><ci id="S3.p1.6.m6.1.1.2.cmml" xref="S3.p1.6.m6.1.1.2">ùë§</ci><ci id="S3.p1.6.m6.1.1.3.cmml" xref="S3.p1.6.m6.1.1.3">ùë°</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.6.m6.1c">w^{t}</annotation></semantics></math> is a <math id="S3.p1.7.m7.1" class="ltx_Math" alttext="d" display="inline"><semantics id="S3.p1.7.m7.1a"><mi id="S3.p1.7.m7.1.1" xref="S3.p1.7.m7.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.p1.7.m7.1b"><ci id="S3.p1.7.m7.1.1.cmml" xref="S3.p1.7.m7.1.1">ùëë</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.7.m7.1c">d</annotation></semantics></math>-dimensional vector. We assume that there are <math id="S3.p1.8.m8.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S3.p1.8.m8.1a"><mi id="S3.p1.8.m8.1.1" xref="S3.p1.8.m8.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.p1.8.m8.1b"><ci id="S3.p1.8.m8.1.1.cmml" xref="S3.p1.8.m8.1.1">ùêæ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.8.m8.1c">K</annotation></semantics></math> clients, and each client has a local data set <math id="S3.p1.9.m9.1" class="ltx_Math" alttext="\mathcal{D}_{k}" display="inline"><semantics id="S3.p1.9.m9.1a"><msub id="S3.p1.9.m9.1.1" xref="S3.p1.9.m9.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p1.9.m9.1.1.2" xref="S3.p1.9.m9.1.1.2.cmml">ùíü</mi><mi id="S3.p1.9.m9.1.1.3" xref="S3.p1.9.m9.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S3.p1.9.m9.1b"><apply id="S3.p1.9.m9.1.1.cmml" xref="S3.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S3.p1.9.m9.1.1.1.cmml" xref="S3.p1.9.m9.1.1">subscript</csymbol><ci id="S3.p1.9.m9.1.1.2.cmml" xref="S3.p1.9.m9.1.1.2">ùíü</ci><ci id="S3.p1.9.m9.1.1.3.cmml" xref="S3.p1.9.m9.1.1.3">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.9.m9.1c">\mathcal{D}_{k}</annotation></semantics></math> with <math id="S3.p1.10.m10.1" class="ltx_Math" alttext="n_{k}=|\mathcal{D}_{k}|" display="inline"><semantics id="S3.p1.10.m10.1a"><mrow id="S3.p1.10.m10.1.1" xref="S3.p1.10.m10.1.1.cmml"><msub id="S3.p1.10.m10.1.1.3" xref="S3.p1.10.m10.1.1.3.cmml"><mi id="S3.p1.10.m10.1.1.3.2" xref="S3.p1.10.m10.1.1.3.2.cmml">n</mi><mi id="S3.p1.10.m10.1.1.3.3" xref="S3.p1.10.m10.1.1.3.3.cmml">k</mi></msub><mo id="S3.p1.10.m10.1.1.2" xref="S3.p1.10.m10.1.1.2.cmml">=</mo><mrow id="S3.p1.10.m10.1.1.1.1" xref="S3.p1.10.m10.1.1.1.2.cmml"><mo stretchy="false" id="S3.p1.10.m10.1.1.1.1.2" xref="S3.p1.10.m10.1.1.1.2.1.cmml">|</mo><msub id="S3.p1.10.m10.1.1.1.1.1" xref="S3.p1.10.m10.1.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p1.10.m10.1.1.1.1.1.2" xref="S3.p1.10.m10.1.1.1.1.1.2.cmml">ùíü</mi><mi id="S3.p1.10.m10.1.1.1.1.1.3" xref="S3.p1.10.m10.1.1.1.1.1.3.cmml">k</mi></msub><mo stretchy="false" id="S3.p1.10.m10.1.1.1.1.3" xref="S3.p1.10.m10.1.1.1.2.1.cmml">|</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.10.m10.1b"><apply id="S3.p1.10.m10.1.1.cmml" xref="S3.p1.10.m10.1.1"><eq id="S3.p1.10.m10.1.1.2.cmml" xref="S3.p1.10.m10.1.1.2"></eq><apply id="S3.p1.10.m10.1.1.3.cmml" xref="S3.p1.10.m10.1.1.3"><csymbol cd="ambiguous" id="S3.p1.10.m10.1.1.3.1.cmml" xref="S3.p1.10.m10.1.1.3">subscript</csymbol><ci id="S3.p1.10.m10.1.1.3.2.cmml" xref="S3.p1.10.m10.1.1.3.2">ùëõ</ci><ci id="S3.p1.10.m10.1.1.3.3.cmml" xref="S3.p1.10.m10.1.1.3.3">ùëò</ci></apply><apply id="S3.p1.10.m10.1.1.1.2.cmml" xref="S3.p1.10.m10.1.1.1.1"><abs id="S3.p1.10.m10.1.1.1.2.1.cmml" xref="S3.p1.10.m10.1.1.1.1.2"></abs><apply id="S3.p1.10.m10.1.1.1.1.1.cmml" xref="S3.p1.10.m10.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.10.m10.1.1.1.1.1.1.cmml" xref="S3.p1.10.m10.1.1.1.1.1">subscript</csymbol><ci id="S3.p1.10.m10.1.1.1.1.1.2.cmml" xref="S3.p1.10.m10.1.1.1.1.1.2">ùíü</ci><ci id="S3.p1.10.m10.1.1.1.1.1.3.cmml" xref="S3.p1.10.m10.1.1.1.1.1.3">ùëò</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.10.m10.1c">n_{k}=|\mathcal{D}_{k}|</annotation></semantics></math>. The overall dataset is <math id="S3.p1.11.m11.3" class="ltx_Math" alttext="\mathcal{D}=\{\mathcal{D}_{1},\ldots,\mathcal{D}_{K}\}" display="inline"><semantics id="S3.p1.11.m11.3a"><mrow id="S3.p1.11.m11.3.3" xref="S3.p1.11.m11.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p1.11.m11.3.3.4" xref="S3.p1.11.m11.3.3.4.cmml">ùíü</mi><mo id="S3.p1.11.m11.3.3.3" xref="S3.p1.11.m11.3.3.3.cmml">=</mo><mrow id="S3.p1.11.m11.3.3.2.2" xref="S3.p1.11.m11.3.3.2.3.cmml"><mo stretchy="false" id="S3.p1.11.m11.3.3.2.2.3" xref="S3.p1.11.m11.3.3.2.3.cmml">{</mo><msub id="S3.p1.11.m11.2.2.1.1.1" xref="S3.p1.11.m11.2.2.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p1.11.m11.2.2.1.1.1.2" xref="S3.p1.11.m11.2.2.1.1.1.2.cmml">ùíü</mi><mn id="S3.p1.11.m11.2.2.1.1.1.3" xref="S3.p1.11.m11.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S3.p1.11.m11.3.3.2.2.4" xref="S3.p1.11.m11.3.3.2.3.cmml">,</mo><mi mathvariant="normal" id="S3.p1.11.m11.1.1" xref="S3.p1.11.m11.1.1.cmml">‚Ä¶</mi><mo id="S3.p1.11.m11.3.3.2.2.5" xref="S3.p1.11.m11.3.3.2.3.cmml">,</mo><msub id="S3.p1.11.m11.3.3.2.2.2" xref="S3.p1.11.m11.3.3.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p1.11.m11.3.3.2.2.2.2" xref="S3.p1.11.m11.3.3.2.2.2.2.cmml">ùíü</mi><mi id="S3.p1.11.m11.3.3.2.2.2.3" xref="S3.p1.11.m11.3.3.2.2.2.3.cmml">K</mi></msub><mo stretchy="false" id="S3.p1.11.m11.3.3.2.2.6" xref="S3.p1.11.m11.3.3.2.3.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.11.m11.3b"><apply id="S3.p1.11.m11.3.3.cmml" xref="S3.p1.11.m11.3.3"><eq id="S3.p1.11.m11.3.3.3.cmml" xref="S3.p1.11.m11.3.3.3"></eq><ci id="S3.p1.11.m11.3.3.4.cmml" xref="S3.p1.11.m11.3.3.4">ùíü</ci><set id="S3.p1.11.m11.3.3.2.3.cmml" xref="S3.p1.11.m11.3.3.2.2"><apply id="S3.p1.11.m11.2.2.1.1.1.cmml" xref="S3.p1.11.m11.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.p1.11.m11.2.2.1.1.1.1.cmml" xref="S3.p1.11.m11.2.2.1.1.1">subscript</csymbol><ci id="S3.p1.11.m11.2.2.1.1.1.2.cmml" xref="S3.p1.11.m11.2.2.1.1.1.2">ùíü</ci><cn type="integer" id="S3.p1.11.m11.2.2.1.1.1.3.cmml" xref="S3.p1.11.m11.2.2.1.1.1.3">1</cn></apply><ci id="S3.p1.11.m11.1.1.cmml" xref="S3.p1.11.m11.1.1">‚Ä¶</ci><apply id="S3.p1.11.m11.3.3.2.2.2.cmml" xref="S3.p1.11.m11.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.p1.11.m11.3.3.2.2.2.1.cmml" xref="S3.p1.11.m11.3.3.2.2.2">subscript</csymbol><ci id="S3.p1.11.m11.3.3.2.2.2.2.cmml" xref="S3.p1.11.m11.3.3.2.2.2.2">ùíü</ci><ci id="S3.p1.11.m11.3.3.2.2.2.3.cmml" xref="S3.p1.11.m11.3.3.2.2.2.3">ùêæ</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.11.m11.3c">\mathcal{D}=\{\mathcal{D}_{1},\ldots,\mathcal{D}_{K}\}</annotation></semantics></math> with <math id="S3.p1.12.m12.1" class="ltx_Math" alttext="n=|\mathcal{D}|=\sum_{k=1}^{K}n_{k}" display="inline"><semantics id="S3.p1.12.m12.1a"><mrow id="S3.p1.12.m12.1.2" xref="S3.p1.12.m12.1.2.cmml"><mi id="S3.p1.12.m12.1.2.2" xref="S3.p1.12.m12.1.2.2.cmml">n</mi><mo id="S3.p1.12.m12.1.2.3" xref="S3.p1.12.m12.1.2.3.cmml">=</mo><mrow id="S3.p1.12.m12.1.2.4.2" xref="S3.p1.12.m12.1.2.4.1.cmml"><mo stretchy="false" id="S3.p1.12.m12.1.2.4.2.1" xref="S3.p1.12.m12.1.2.4.1.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="S3.p1.12.m12.1.1" xref="S3.p1.12.m12.1.1.cmml">ùíü</mi><mo stretchy="false" id="S3.p1.12.m12.1.2.4.2.2" xref="S3.p1.12.m12.1.2.4.1.1.cmml">|</mo></mrow><mo rspace="0.111em" id="S3.p1.12.m12.1.2.5" xref="S3.p1.12.m12.1.2.5.cmml">=</mo><mrow id="S3.p1.12.m12.1.2.6" xref="S3.p1.12.m12.1.2.6.cmml"><msubsup id="S3.p1.12.m12.1.2.6.1" xref="S3.p1.12.m12.1.2.6.1.cmml"><mo id="S3.p1.12.m12.1.2.6.1.2.2" xref="S3.p1.12.m12.1.2.6.1.2.2.cmml">‚àë</mo><mrow id="S3.p1.12.m12.1.2.6.1.2.3" xref="S3.p1.12.m12.1.2.6.1.2.3.cmml"><mi id="S3.p1.12.m12.1.2.6.1.2.3.2" xref="S3.p1.12.m12.1.2.6.1.2.3.2.cmml">k</mi><mo id="S3.p1.12.m12.1.2.6.1.2.3.1" xref="S3.p1.12.m12.1.2.6.1.2.3.1.cmml">=</mo><mn id="S3.p1.12.m12.1.2.6.1.2.3.3" xref="S3.p1.12.m12.1.2.6.1.2.3.3.cmml">1</mn></mrow><mi id="S3.p1.12.m12.1.2.6.1.3" xref="S3.p1.12.m12.1.2.6.1.3.cmml">K</mi></msubsup><msub id="S3.p1.12.m12.1.2.6.2" xref="S3.p1.12.m12.1.2.6.2.cmml"><mi id="S3.p1.12.m12.1.2.6.2.2" xref="S3.p1.12.m12.1.2.6.2.2.cmml">n</mi><mi id="S3.p1.12.m12.1.2.6.2.3" xref="S3.p1.12.m12.1.2.6.2.3.cmml">k</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.12.m12.1b"><apply id="S3.p1.12.m12.1.2.cmml" xref="S3.p1.12.m12.1.2"><and id="S3.p1.12.m12.1.2a.cmml" xref="S3.p1.12.m12.1.2"></and><apply id="S3.p1.12.m12.1.2b.cmml" xref="S3.p1.12.m12.1.2"><eq id="S3.p1.12.m12.1.2.3.cmml" xref="S3.p1.12.m12.1.2.3"></eq><ci id="S3.p1.12.m12.1.2.2.cmml" xref="S3.p1.12.m12.1.2.2">ùëõ</ci><apply id="S3.p1.12.m12.1.2.4.1.cmml" xref="S3.p1.12.m12.1.2.4.2"><abs id="S3.p1.12.m12.1.2.4.1.1.cmml" xref="S3.p1.12.m12.1.2.4.2.1"></abs><ci id="S3.p1.12.m12.1.1.cmml" xref="S3.p1.12.m12.1.1">ùíü</ci></apply></apply><apply id="S3.p1.12.m12.1.2c.cmml" xref="S3.p1.12.m12.1.2"><eq id="S3.p1.12.m12.1.2.5.cmml" xref="S3.p1.12.m12.1.2.5"></eq><share href="#S3.p1.12.m12.1.2.4.cmml" id="S3.p1.12.m12.1.2d.cmml" xref="S3.p1.12.m12.1.2"></share><apply id="S3.p1.12.m12.1.2.6.cmml" xref="S3.p1.12.m12.1.2.6"><apply id="S3.p1.12.m12.1.2.6.1.cmml" xref="S3.p1.12.m12.1.2.6.1"><csymbol cd="ambiguous" id="S3.p1.12.m12.1.2.6.1.1.cmml" xref="S3.p1.12.m12.1.2.6.1">superscript</csymbol><apply id="S3.p1.12.m12.1.2.6.1.2.cmml" xref="S3.p1.12.m12.1.2.6.1"><csymbol cd="ambiguous" id="S3.p1.12.m12.1.2.6.1.2.1.cmml" xref="S3.p1.12.m12.1.2.6.1">subscript</csymbol><sum id="S3.p1.12.m12.1.2.6.1.2.2.cmml" xref="S3.p1.12.m12.1.2.6.1.2.2"></sum><apply id="S3.p1.12.m12.1.2.6.1.2.3.cmml" xref="S3.p1.12.m12.1.2.6.1.2.3"><eq id="S3.p1.12.m12.1.2.6.1.2.3.1.cmml" xref="S3.p1.12.m12.1.2.6.1.2.3.1"></eq><ci id="S3.p1.12.m12.1.2.6.1.2.3.2.cmml" xref="S3.p1.12.m12.1.2.6.1.2.3.2">ùëò</ci><cn type="integer" id="S3.p1.12.m12.1.2.6.1.2.3.3.cmml" xref="S3.p1.12.m12.1.2.6.1.2.3.3">1</cn></apply></apply><ci id="S3.p1.12.m12.1.2.6.1.3.cmml" xref="S3.p1.12.m12.1.2.6.1.3">ùêæ</ci></apply><apply id="S3.p1.12.m12.1.2.6.2.cmml" xref="S3.p1.12.m12.1.2.6.2"><csymbol cd="ambiguous" id="S3.p1.12.m12.1.2.6.2.1.cmml" xref="S3.p1.12.m12.1.2.6.2">subscript</csymbol><ci id="S3.p1.12.m12.1.2.6.2.2.cmml" xref="S3.p1.12.m12.1.2.6.2.2">ùëõ</ci><ci id="S3.p1.12.m12.1.2.6.2.3.cmml" xref="S3.p1.12.m12.1.2.6.2.3">ùëò</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.12.m12.1c">n=|\mathcal{D}|=\sum_{k=1}^{K}n_{k}</annotation></semantics></math>. The objective function to be optimized is:</p>
<table id="S3.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E1.m1.3" class="ltx_Math" alttext="\min_{w\in\mathcal{R}^{d}}\mathcal{F}(w)\text{\hskip 14.22636ptwhere \hskip 14.22636pt}\mathcal{F}(w)=\frac{1}{n}\sum_{k=1}^{K}\sum_{i\in\mathcal{D}_{k}}\mathcal{F}_{i}(w)" display="block"><semantics id="S3.E1.m1.3a"><mrow id="S3.E1.m1.3.4" xref="S3.E1.m1.3.4.cmml"><mrow id="S3.E1.m1.3.4.2" xref="S3.E1.m1.3.4.2.cmml"><mrow id="S3.E1.m1.3.4.2.2" xref="S3.E1.m1.3.4.2.2.cmml"><munder id="S3.E1.m1.3.4.2.2.1" xref="S3.E1.m1.3.4.2.2.1.cmml"><mi id="S3.E1.m1.3.4.2.2.1.2" xref="S3.E1.m1.3.4.2.2.1.2.cmml">min</mi><mrow id="S3.E1.m1.3.4.2.2.1.3" xref="S3.E1.m1.3.4.2.2.1.3.cmml"><mi id="S3.E1.m1.3.4.2.2.1.3.2" xref="S3.E1.m1.3.4.2.2.1.3.2.cmml">w</mi><mo id="S3.E1.m1.3.4.2.2.1.3.1" xref="S3.E1.m1.3.4.2.2.1.3.1.cmml">‚àà</mo><msup id="S3.E1.m1.3.4.2.2.1.3.3" xref="S3.E1.m1.3.4.2.2.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.4.2.2.1.3.3.2" xref="S3.E1.m1.3.4.2.2.1.3.3.2.cmml">‚Ñõ</mi><mi id="S3.E1.m1.3.4.2.2.1.3.3.3" xref="S3.E1.m1.3.4.2.2.1.3.3.3.cmml">d</mi></msup></mrow></munder><mo lspace="0.167em" id="S3.E1.m1.3.4.2.2a" xref="S3.E1.m1.3.4.2.2.cmml">‚Å°</mo><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.4.2.2.2" xref="S3.E1.m1.3.4.2.2.2.cmml">‚Ñ±</mi></mrow><mo lspace="0em" rspace="0em" id="S3.E1.m1.3.4.2.1" xref="S3.E1.m1.3.4.2.1.cmml">‚Äã</mo><mrow id="S3.E1.m1.3.4.2.3.2" xref="S3.E1.m1.3.4.2.cmml"><mo stretchy="false" id="S3.E1.m1.3.4.2.3.2.1" xref="S3.E1.m1.3.4.2.cmml">(</mo><mi id="S3.E1.m1.1.1" xref="S3.E1.m1.1.1.cmml">w</mi><mo stretchy="false" id="S3.E1.m1.3.4.2.3.2.2" xref="S3.E1.m1.3.4.2.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E1.m1.3.4.2.1a" xref="S3.E1.m1.3.4.2.1.cmml">‚Äã</mo><mtext id="S3.E1.m1.3.4.2.4" xref="S3.E1.m1.3.4.2.4a.cmml">¬†where¬†</mtext><mo lspace="0em" rspace="0em" id="S3.E1.m1.3.4.2.1b" xref="S3.E1.m1.3.4.2.1.cmml">‚Äã</mo><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.4.2.5" xref="S3.E1.m1.3.4.2.5.cmml">‚Ñ±</mi><mo lspace="0em" rspace="0em" id="S3.E1.m1.3.4.2.1c" xref="S3.E1.m1.3.4.2.1.cmml">‚Äã</mo><mrow id="S3.E1.m1.3.4.2.6.2" xref="S3.E1.m1.3.4.2.cmml"><mo stretchy="false" id="S3.E1.m1.3.4.2.6.2.1" xref="S3.E1.m1.3.4.2.cmml">(</mo><mi id="S3.E1.m1.2.2" xref="S3.E1.m1.2.2.cmml">w</mi><mo stretchy="false" id="S3.E1.m1.3.4.2.6.2.2" xref="S3.E1.m1.3.4.2.cmml">)</mo></mrow></mrow><mo id="S3.E1.m1.3.4.1" xref="S3.E1.m1.3.4.1.cmml">=</mo><mrow id="S3.E1.m1.3.4.3" xref="S3.E1.m1.3.4.3.cmml"><mfrac id="S3.E1.m1.3.4.3.2" xref="S3.E1.m1.3.4.3.2.cmml"><mn id="S3.E1.m1.3.4.3.2.2" xref="S3.E1.m1.3.4.3.2.2.cmml">1</mn><mi id="S3.E1.m1.3.4.3.2.3" xref="S3.E1.m1.3.4.3.2.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="S3.E1.m1.3.4.3.1" xref="S3.E1.m1.3.4.3.1.cmml">‚Äã</mo><mrow id="S3.E1.m1.3.4.3.3" xref="S3.E1.m1.3.4.3.3.cmml"><munderover id="S3.E1.m1.3.4.3.3.1" xref="S3.E1.m1.3.4.3.3.1.cmml"><mo movablelimits="false" rspace="0em" id="S3.E1.m1.3.4.3.3.1.2.2" xref="S3.E1.m1.3.4.3.3.1.2.2.cmml">‚àë</mo><mrow id="S3.E1.m1.3.4.3.3.1.2.3" xref="S3.E1.m1.3.4.3.3.1.2.3.cmml"><mi id="S3.E1.m1.3.4.3.3.1.2.3.2" xref="S3.E1.m1.3.4.3.3.1.2.3.2.cmml">k</mi><mo id="S3.E1.m1.3.4.3.3.1.2.3.1" xref="S3.E1.m1.3.4.3.3.1.2.3.1.cmml">=</mo><mn id="S3.E1.m1.3.4.3.3.1.2.3.3" xref="S3.E1.m1.3.4.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="S3.E1.m1.3.4.3.3.1.3" xref="S3.E1.m1.3.4.3.3.1.3.cmml">K</mi></munderover><mrow id="S3.E1.m1.3.4.3.3.2" xref="S3.E1.m1.3.4.3.3.2.cmml"><munder id="S3.E1.m1.3.4.3.3.2.1" xref="S3.E1.m1.3.4.3.3.2.1.cmml"><mo movablelimits="false" id="S3.E1.m1.3.4.3.3.2.1.2" xref="S3.E1.m1.3.4.3.3.2.1.2.cmml">‚àë</mo><mrow id="S3.E1.m1.3.4.3.3.2.1.3" xref="S3.E1.m1.3.4.3.3.2.1.3.cmml"><mi id="S3.E1.m1.3.4.3.3.2.1.3.2" xref="S3.E1.m1.3.4.3.3.2.1.3.2.cmml">i</mi><mo id="S3.E1.m1.3.4.3.3.2.1.3.1" xref="S3.E1.m1.3.4.3.3.2.1.3.1.cmml">‚àà</mo><msub id="S3.E1.m1.3.4.3.3.2.1.3.3" xref="S3.E1.m1.3.4.3.3.2.1.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.4.3.3.2.1.3.3.2" xref="S3.E1.m1.3.4.3.3.2.1.3.3.2.cmml">ùíü</mi><mi id="S3.E1.m1.3.4.3.3.2.1.3.3.3" xref="S3.E1.m1.3.4.3.3.2.1.3.3.3.cmml">k</mi></msub></mrow></munder><mrow id="S3.E1.m1.3.4.3.3.2.2" xref="S3.E1.m1.3.4.3.3.2.2.cmml"><msub id="S3.E1.m1.3.4.3.3.2.2.2" xref="S3.E1.m1.3.4.3.3.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.4.3.3.2.2.2.2" xref="S3.E1.m1.3.4.3.3.2.2.2.2.cmml">‚Ñ±</mi><mi id="S3.E1.m1.3.4.3.3.2.2.2.3" xref="S3.E1.m1.3.4.3.3.2.2.2.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="S3.E1.m1.3.4.3.3.2.2.1" xref="S3.E1.m1.3.4.3.3.2.2.1.cmml">‚Äã</mo><mrow id="S3.E1.m1.3.4.3.3.2.2.3.2" xref="S3.E1.m1.3.4.3.3.2.2.cmml"><mo stretchy="false" id="S3.E1.m1.3.4.3.3.2.2.3.2.1" xref="S3.E1.m1.3.4.3.3.2.2.cmml">(</mo><mi id="S3.E1.m1.3.3" xref="S3.E1.m1.3.3.cmml">w</mi><mo stretchy="false" id="S3.E1.m1.3.4.3.3.2.2.3.2.2" xref="S3.E1.m1.3.4.3.3.2.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.3b"><apply id="S3.E1.m1.3.4.cmml" xref="S3.E1.m1.3.4"><eq id="S3.E1.m1.3.4.1.cmml" xref="S3.E1.m1.3.4.1"></eq><apply id="S3.E1.m1.3.4.2.cmml" xref="S3.E1.m1.3.4.2"><times id="S3.E1.m1.3.4.2.1.cmml" xref="S3.E1.m1.3.4.2.1"></times><apply id="S3.E1.m1.3.4.2.2.cmml" xref="S3.E1.m1.3.4.2.2"><apply id="S3.E1.m1.3.4.2.2.1.cmml" xref="S3.E1.m1.3.4.2.2.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.4.2.2.1.1.cmml" xref="S3.E1.m1.3.4.2.2.1">subscript</csymbol><min id="S3.E1.m1.3.4.2.2.1.2.cmml" xref="S3.E1.m1.3.4.2.2.1.2"></min><apply id="S3.E1.m1.3.4.2.2.1.3.cmml" xref="S3.E1.m1.3.4.2.2.1.3"><in id="S3.E1.m1.3.4.2.2.1.3.1.cmml" xref="S3.E1.m1.3.4.2.2.1.3.1"></in><ci id="S3.E1.m1.3.4.2.2.1.3.2.cmml" xref="S3.E1.m1.3.4.2.2.1.3.2">ùë§</ci><apply id="S3.E1.m1.3.4.2.2.1.3.3.cmml" xref="S3.E1.m1.3.4.2.2.1.3.3"><csymbol cd="ambiguous" id="S3.E1.m1.3.4.2.2.1.3.3.1.cmml" xref="S3.E1.m1.3.4.2.2.1.3.3">superscript</csymbol><ci id="S3.E1.m1.3.4.2.2.1.3.3.2.cmml" xref="S3.E1.m1.3.4.2.2.1.3.3.2">‚Ñõ</ci><ci id="S3.E1.m1.3.4.2.2.1.3.3.3.cmml" xref="S3.E1.m1.3.4.2.2.1.3.3.3">ùëë</ci></apply></apply></apply><ci id="S3.E1.m1.3.4.2.2.2.cmml" xref="S3.E1.m1.3.4.2.2.2">‚Ñ±</ci></apply><ci id="S3.E1.m1.1.1.cmml" xref="S3.E1.m1.1.1">ùë§</ci><ci id="S3.E1.m1.3.4.2.4a.cmml" xref="S3.E1.m1.3.4.2.4"><mtext id="S3.E1.m1.3.4.2.4.cmml" xref="S3.E1.m1.3.4.2.4">¬†where¬†</mtext></ci><ci id="S3.E1.m1.3.4.2.5.cmml" xref="S3.E1.m1.3.4.2.5">‚Ñ±</ci><ci id="S3.E1.m1.2.2.cmml" xref="S3.E1.m1.2.2">ùë§</ci></apply><apply id="S3.E1.m1.3.4.3.cmml" xref="S3.E1.m1.3.4.3"><times id="S3.E1.m1.3.4.3.1.cmml" xref="S3.E1.m1.3.4.3.1"></times><apply id="S3.E1.m1.3.4.3.2.cmml" xref="S3.E1.m1.3.4.3.2"><divide id="S3.E1.m1.3.4.3.2.1.cmml" xref="S3.E1.m1.3.4.3.2"></divide><cn type="integer" id="S3.E1.m1.3.4.3.2.2.cmml" xref="S3.E1.m1.3.4.3.2.2">1</cn><ci id="S3.E1.m1.3.4.3.2.3.cmml" xref="S3.E1.m1.3.4.3.2.3">ùëõ</ci></apply><apply id="S3.E1.m1.3.4.3.3.cmml" xref="S3.E1.m1.3.4.3.3"><apply id="S3.E1.m1.3.4.3.3.1.cmml" xref="S3.E1.m1.3.4.3.3.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.4.3.3.1.1.cmml" xref="S3.E1.m1.3.4.3.3.1">superscript</csymbol><apply id="S3.E1.m1.3.4.3.3.1.2.cmml" xref="S3.E1.m1.3.4.3.3.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.4.3.3.1.2.1.cmml" xref="S3.E1.m1.3.4.3.3.1">subscript</csymbol><sum id="S3.E1.m1.3.4.3.3.1.2.2.cmml" xref="S3.E1.m1.3.4.3.3.1.2.2"></sum><apply id="S3.E1.m1.3.4.3.3.1.2.3.cmml" xref="S3.E1.m1.3.4.3.3.1.2.3"><eq id="S3.E1.m1.3.4.3.3.1.2.3.1.cmml" xref="S3.E1.m1.3.4.3.3.1.2.3.1"></eq><ci id="S3.E1.m1.3.4.3.3.1.2.3.2.cmml" xref="S3.E1.m1.3.4.3.3.1.2.3.2">ùëò</ci><cn type="integer" id="S3.E1.m1.3.4.3.3.1.2.3.3.cmml" xref="S3.E1.m1.3.4.3.3.1.2.3.3">1</cn></apply></apply><ci id="S3.E1.m1.3.4.3.3.1.3.cmml" xref="S3.E1.m1.3.4.3.3.1.3">ùêæ</ci></apply><apply id="S3.E1.m1.3.4.3.3.2.cmml" xref="S3.E1.m1.3.4.3.3.2"><apply id="S3.E1.m1.3.4.3.3.2.1.cmml" xref="S3.E1.m1.3.4.3.3.2.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.4.3.3.2.1.1.cmml" xref="S3.E1.m1.3.4.3.3.2.1">subscript</csymbol><sum id="S3.E1.m1.3.4.3.3.2.1.2.cmml" xref="S3.E1.m1.3.4.3.3.2.1.2"></sum><apply id="S3.E1.m1.3.4.3.3.2.1.3.cmml" xref="S3.E1.m1.3.4.3.3.2.1.3"><in id="S3.E1.m1.3.4.3.3.2.1.3.1.cmml" xref="S3.E1.m1.3.4.3.3.2.1.3.1"></in><ci id="S3.E1.m1.3.4.3.3.2.1.3.2.cmml" xref="S3.E1.m1.3.4.3.3.2.1.3.2">ùëñ</ci><apply id="S3.E1.m1.3.4.3.3.2.1.3.3.cmml" xref="S3.E1.m1.3.4.3.3.2.1.3.3"><csymbol cd="ambiguous" id="S3.E1.m1.3.4.3.3.2.1.3.3.1.cmml" xref="S3.E1.m1.3.4.3.3.2.1.3.3">subscript</csymbol><ci id="S3.E1.m1.3.4.3.3.2.1.3.3.2.cmml" xref="S3.E1.m1.3.4.3.3.2.1.3.3.2">ùíü</ci><ci id="S3.E1.m1.3.4.3.3.2.1.3.3.3.cmml" xref="S3.E1.m1.3.4.3.3.2.1.3.3.3">ùëò</ci></apply></apply></apply><apply id="S3.E1.m1.3.4.3.3.2.2.cmml" xref="S3.E1.m1.3.4.3.3.2.2"><times id="S3.E1.m1.3.4.3.3.2.2.1.cmml" xref="S3.E1.m1.3.4.3.3.2.2.1"></times><apply id="S3.E1.m1.3.4.3.3.2.2.2.cmml" xref="S3.E1.m1.3.4.3.3.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.3.4.3.3.2.2.2.1.cmml" xref="S3.E1.m1.3.4.3.3.2.2.2">subscript</csymbol><ci id="S3.E1.m1.3.4.3.3.2.2.2.2.cmml" xref="S3.E1.m1.3.4.3.3.2.2.2.2">‚Ñ±</ci><ci id="S3.E1.m1.3.4.3.3.2.2.2.3.cmml" xref="S3.E1.m1.3.4.3.3.2.2.2.3">ùëñ</ci></apply><ci id="S3.E1.m1.3.3.cmml" xref="S3.E1.m1.3.3">ùë§</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.3c">\min_{w\in\mathcal{R}^{d}}\mathcal{F}(w)\text{\hskip 14.22636ptwhere \hskip 14.22636pt}\mathcal{F}(w)=\frac{1}{n}\sum_{k=1}^{K}\sum_{i\in\mathcal{D}_{k}}\mathcal{F}_{i}(w)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<div id="S3.p2" class="ltx_para">
<p id="S3.p2.4" class="ltx_p">This optimization problem is generally solved by stochastic gradient descent (SGD)¬†<cite class="ltx_cite ltx_citemacro_cite">Goodfellow <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib7" title="" class="ltx_ref">2016</a>)</cite> based methods. For example, based on the current model <math id="S3.p2.1.m1.1" class="ltx_Math" alttext="w_{t}" display="inline"><semantics id="S3.p2.1.m1.1a"><msub id="S3.p2.1.m1.1.1" xref="S3.p2.1.m1.1.1.cmml"><mi id="S3.p2.1.m1.1.1.2" xref="S3.p2.1.m1.1.1.2.cmml">w</mi><mi id="S3.p2.1.m1.1.1.3" xref="S3.p2.1.m1.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S3.p2.1.m1.1b"><apply id="S3.p2.1.m1.1.1.cmml" xref="S3.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.p2.1.m1.1.1.1.cmml" xref="S3.p2.1.m1.1.1">subscript</csymbol><ci id="S3.p2.1.m1.1.1.2.cmml" xref="S3.p2.1.m1.1.1.2">ùë§</ci><ci id="S3.p2.1.m1.1.1.3.cmml" xref="S3.p2.1.m1.1.1.3">ùë°</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p2.1.m1.1c">w_{t}</annotation></semantics></math>, the federated averaging algorithm¬†<cite class="ltx_cite ltx_citemacro_cite">McMahan <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib14" title="" class="ltx_ref">2017</a>)</cite> computes the average gradient <math id="S3.p2.2.m2.1" class="ltx_Math" alttext="g_{k}^{t}=\frac{1}{n_{k}}\sum_{i\in\mathcal{D}_{k}}\nabla\mathcal{F}_{i}(w^{t})" display="inline"><semantics id="S3.p2.2.m2.1a"><mrow id="S3.p2.2.m2.1.1" xref="S3.p2.2.m2.1.1.cmml"><msubsup id="S3.p2.2.m2.1.1.3" xref="S3.p2.2.m2.1.1.3.cmml"><mi id="S3.p2.2.m2.1.1.3.2.2" xref="S3.p2.2.m2.1.1.3.2.2.cmml">g</mi><mi id="S3.p2.2.m2.1.1.3.2.3" xref="S3.p2.2.m2.1.1.3.2.3.cmml">k</mi><mi id="S3.p2.2.m2.1.1.3.3" xref="S3.p2.2.m2.1.1.3.3.cmml">t</mi></msubsup><mo id="S3.p2.2.m2.1.1.2" xref="S3.p2.2.m2.1.1.2.cmml">=</mo><mrow id="S3.p2.2.m2.1.1.1" xref="S3.p2.2.m2.1.1.1.cmml"><mfrac id="S3.p2.2.m2.1.1.1.3" xref="S3.p2.2.m2.1.1.1.3.cmml"><mn id="S3.p2.2.m2.1.1.1.3.2" xref="S3.p2.2.m2.1.1.1.3.2.cmml">1</mn><msub id="S3.p2.2.m2.1.1.1.3.3" xref="S3.p2.2.m2.1.1.1.3.3.cmml"><mi id="S3.p2.2.m2.1.1.1.3.3.2" xref="S3.p2.2.m2.1.1.1.3.3.2.cmml">n</mi><mi id="S3.p2.2.m2.1.1.1.3.3.3" xref="S3.p2.2.m2.1.1.1.3.3.3.cmml">k</mi></msub></mfrac><mo lspace="0em" rspace="0em" id="S3.p2.2.m2.1.1.1.2" xref="S3.p2.2.m2.1.1.1.2.cmml">‚Äã</mo><mrow id="S3.p2.2.m2.1.1.1.1" xref="S3.p2.2.m2.1.1.1.1.cmml"><msub id="S3.p2.2.m2.1.1.1.1.2" xref="S3.p2.2.m2.1.1.1.1.2.cmml"><mo id="S3.p2.2.m2.1.1.1.1.2.2" xref="S3.p2.2.m2.1.1.1.1.2.2.cmml">‚àë</mo><mrow id="S3.p2.2.m2.1.1.1.1.2.3" xref="S3.p2.2.m2.1.1.1.1.2.3.cmml"><mi id="S3.p2.2.m2.1.1.1.1.2.3.2" xref="S3.p2.2.m2.1.1.1.1.2.3.2.cmml">i</mi><mo id="S3.p2.2.m2.1.1.1.1.2.3.1" xref="S3.p2.2.m2.1.1.1.1.2.3.1.cmml">‚àà</mo><msub id="S3.p2.2.m2.1.1.1.1.2.3.3" xref="S3.p2.2.m2.1.1.1.1.2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p2.2.m2.1.1.1.1.2.3.3.2" xref="S3.p2.2.m2.1.1.1.1.2.3.3.2.cmml">ùíü</mi><mi id="S3.p2.2.m2.1.1.1.1.2.3.3.3" xref="S3.p2.2.m2.1.1.1.1.2.3.3.3.cmml">k</mi></msub></mrow></msub><mrow id="S3.p2.2.m2.1.1.1.1.1" xref="S3.p2.2.m2.1.1.1.1.1.cmml"><mrow id="S3.p2.2.m2.1.1.1.1.1.3" xref="S3.p2.2.m2.1.1.1.1.1.3.cmml"><mo rspace="0.167em" id="S3.p2.2.m2.1.1.1.1.1.3.1" xref="S3.p2.2.m2.1.1.1.1.1.3.1.cmml">‚àá</mo><msub id="S3.p2.2.m2.1.1.1.1.1.3.2" xref="S3.p2.2.m2.1.1.1.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p2.2.m2.1.1.1.1.1.3.2.2" xref="S3.p2.2.m2.1.1.1.1.1.3.2.2.cmml">‚Ñ±</mi><mi id="S3.p2.2.m2.1.1.1.1.1.3.2.3" xref="S3.p2.2.m2.1.1.1.1.1.3.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="S3.p2.2.m2.1.1.1.1.1.2" xref="S3.p2.2.m2.1.1.1.1.1.2.cmml">‚Äã</mo><mrow id="S3.p2.2.m2.1.1.1.1.1.1.1" xref="S3.p2.2.m2.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.p2.2.m2.1.1.1.1.1.1.1.2" xref="S3.p2.2.m2.1.1.1.1.1.1.1.1.cmml">(</mo><msup id="S3.p2.2.m2.1.1.1.1.1.1.1.1" xref="S3.p2.2.m2.1.1.1.1.1.1.1.1.cmml"><mi id="S3.p2.2.m2.1.1.1.1.1.1.1.1.2" xref="S3.p2.2.m2.1.1.1.1.1.1.1.1.2.cmml">w</mi><mi id="S3.p2.2.m2.1.1.1.1.1.1.1.1.3" xref="S3.p2.2.m2.1.1.1.1.1.1.1.1.3.cmml">t</mi></msup><mo stretchy="false" id="S3.p2.2.m2.1.1.1.1.1.1.1.3" xref="S3.p2.2.m2.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p2.2.m2.1b"><apply id="S3.p2.2.m2.1.1.cmml" xref="S3.p2.2.m2.1.1"><eq id="S3.p2.2.m2.1.1.2.cmml" xref="S3.p2.2.m2.1.1.2"></eq><apply id="S3.p2.2.m2.1.1.3.cmml" xref="S3.p2.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.p2.2.m2.1.1.3.1.cmml" xref="S3.p2.2.m2.1.1.3">superscript</csymbol><apply id="S3.p2.2.m2.1.1.3.2.cmml" xref="S3.p2.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.p2.2.m2.1.1.3.2.1.cmml" xref="S3.p2.2.m2.1.1.3">subscript</csymbol><ci id="S3.p2.2.m2.1.1.3.2.2.cmml" xref="S3.p2.2.m2.1.1.3.2.2">ùëî</ci><ci id="S3.p2.2.m2.1.1.3.2.3.cmml" xref="S3.p2.2.m2.1.1.3.2.3">ùëò</ci></apply><ci id="S3.p2.2.m2.1.1.3.3.cmml" xref="S3.p2.2.m2.1.1.3.3">ùë°</ci></apply><apply id="S3.p2.2.m2.1.1.1.cmml" xref="S3.p2.2.m2.1.1.1"><times id="S3.p2.2.m2.1.1.1.2.cmml" xref="S3.p2.2.m2.1.1.1.2"></times><apply id="S3.p2.2.m2.1.1.1.3.cmml" xref="S3.p2.2.m2.1.1.1.3"><divide id="S3.p2.2.m2.1.1.1.3.1.cmml" xref="S3.p2.2.m2.1.1.1.3"></divide><cn type="integer" id="S3.p2.2.m2.1.1.1.3.2.cmml" xref="S3.p2.2.m2.1.1.1.3.2">1</cn><apply id="S3.p2.2.m2.1.1.1.3.3.cmml" xref="S3.p2.2.m2.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.p2.2.m2.1.1.1.3.3.1.cmml" xref="S3.p2.2.m2.1.1.1.3.3">subscript</csymbol><ci id="S3.p2.2.m2.1.1.1.3.3.2.cmml" xref="S3.p2.2.m2.1.1.1.3.3.2">ùëõ</ci><ci id="S3.p2.2.m2.1.1.1.3.3.3.cmml" xref="S3.p2.2.m2.1.1.1.3.3.3">ùëò</ci></apply></apply><apply id="S3.p2.2.m2.1.1.1.1.cmml" xref="S3.p2.2.m2.1.1.1.1"><apply id="S3.p2.2.m2.1.1.1.1.2.cmml" xref="S3.p2.2.m2.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.p2.2.m2.1.1.1.1.2.1.cmml" xref="S3.p2.2.m2.1.1.1.1.2">subscript</csymbol><sum id="S3.p2.2.m2.1.1.1.1.2.2.cmml" xref="S3.p2.2.m2.1.1.1.1.2.2"></sum><apply id="S3.p2.2.m2.1.1.1.1.2.3.cmml" xref="S3.p2.2.m2.1.1.1.1.2.3"><in id="S3.p2.2.m2.1.1.1.1.2.3.1.cmml" xref="S3.p2.2.m2.1.1.1.1.2.3.1"></in><ci id="S3.p2.2.m2.1.1.1.1.2.3.2.cmml" xref="S3.p2.2.m2.1.1.1.1.2.3.2">ùëñ</ci><apply id="S3.p2.2.m2.1.1.1.1.2.3.3.cmml" xref="S3.p2.2.m2.1.1.1.1.2.3.3"><csymbol cd="ambiguous" id="S3.p2.2.m2.1.1.1.1.2.3.3.1.cmml" xref="S3.p2.2.m2.1.1.1.1.2.3.3">subscript</csymbol><ci id="S3.p2.2.m2.1.1.1.1.2.3.3.2.cmml" xref="S3.p2.2.m2.1.1.1.1.2.3.3.2">ùíü</ci><ci id="S3.p2.2.m2.1.1.1.1.2.3.3.3.cmml" xref="S3.p2.2.m2.1.1.1.1.2.3.3.3">ùëò</ci></apply></apply></apply><apply id="S3.p2.2.m2.1.1.1.1.1.cmml" xref="S3.p2.2.m2.1.1.1.1.1"><times id="S3.p2.2.m2.1.1.1.1.1.2.cmml" xref="S3.p2.2.m2.1.1.1.1.1.2"></times><apply id="S3.p2.2.m2.1.1.1.1.1.3.cmml" xref="S3.p2.2.m2.1.1.1.1.1.3"><ci id="S3.p2.2.m2.1.1.1.1.1.3.1.cmml" xref="S3.p2.2.m2.1.1.1.1.1.3.1">‚àá</ci><apply id="S3.p2.2.m2.1.1.1.1.1.3.2.cmml" xref="S3.p2.2.m2.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.p2.2.m2.1.1.1.1.1.3.2.1.cmml" xref="S3.p2.2.m2.1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.p2.2.m2.1.1.1.1.1.3.2.2.cmml" xref="S3.p2.2.m2.1.1.1.1.1.3.2.2">‚Ñ±</ci><ci id="S3.p2.2.m2.1.1.1.1.1.3.2.3.cmml" xref="S3.p2.2.m2.1.1.1.1.1.3.2.3">ùëñ</ci></apply></apply><apply id="S3.p2.2.m2.1.1.1.1.1.1.1.1.cmml" xref="S3.p2.2.m2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p2.2.m2.1.1.1.1.1.1.1.1.1.cmml" xref="S3.p2.2.m2.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.p2.2.m2.1.1.1.1.1.1.1.1.2.cmml" xref="S3.p2.2.m2.1.1.1.1.1.1.1.1.2">ùë§</ci><ci id="S3.p2.2.m2.1.1.1.1.1.1.1.1.3.cmml" xref="S3.p2.2.m2.1.1.1.1.1.1.1.1.3">ùë°</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p2.2.m2.1c">g_{k}^{t}=\frac{1}{n_{k}}\sum_{i\in\mathcal{D}_{k}}\nabla\mathcal{F}_{i}(w^{t})</annotation></semantics></math> on the local data of client <math id="S3.p2.3.m3.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.p2.3.m3.1a"><mi id="S3.p2.3.m3.1.1" xref="S3.p2.3.m3.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.p2.3.m3.1b"><ci id="S3.p2.3.m3.1.1.cmml" xref="S3.p2.3.m3.1.1">ùëò</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p2.3.m3.1c">k</annotation></semantics></math>. Each client updates its local model <math id="S3.p2.4.m4.1" class="ltx_Math" alttext="w_{k}^{t+1}\leftarrow w_{t}-\eta g_{k}^{t}" display="inline"><semantics id="S3.p2.4.m4.1a"><mrow id="S3.p2.4.m4.1.1" xref="S3.p2.4.m4.1.1.cmml"><msubsup id="S3.p2.4.m4.1.1.2" xref="S3.p2.4.m4.1.1.2.cmml"><mi id="S3.p2.4.m4.1.1.2.2.2" xref="S3.p2.4.m4.1.1.2.2.2.cmml">w</mi><mi id="S3.p2.4.m4.1.1.2.2.3" xref="S3.p2.4.m4.1.1.2.2.3.cmml">k</mi><mrow id="S3.p2.4.m4.1.1.2.3" xref="S3.p2.4.m4.1.1.2.3.cmml"><mi id="S3.p2.4.m4.1.1.2.3.2" xref="S3.p2.4.m4.1.1.2.3.2.cmml">t</mi><mo id="S3.p2.4.m4.1.1.2.3.1" xref="S3.p2.4.m4.1.1.2.3.1.cmml">+</mo><mn id="S3.p2.4.m4.1.1.2.3.3" xref="S3.p2.4.m4.1.1.2.3.3.cmml">1</mn></mrow></msubsup><mo stretchy="false" id="S3.p2.4.m4.1.1.1" xref="S3.p2.4.m4.1.1.1.cmml">‚Üê</mo><mrow id="S3.p2.4.m4.1.1.3" xref="S3.p2.4.m4.1.1.3.cmml"><msub id="S3.p2.4.m4.1.1.3.2" xref="S3.p2.4.m4.1.1.3.2.cmml"><mi id="S3.p2.4.m4.1.1.3.2.2" xref="S3.p2.4.m4.1.1.3.2.2.cmml">w</mi><mi id="S3.p2.4.m4.1.1.3.2.3" xref="S3.p2.4.m4.1.1.3.2.3.cmml">t</mi></msub><mo id="S3.p2.4.m4.1.1.3.1" xref="S3.p2.4.m4.1.1.3.1.cmml">‚àí</mo><mrow id="S3.p2.4.m4.1.1.3.3" xref="S3.p2.4.m4.1.1.3.3.cmml"><mi id="S3.p2.4.m4.1.1.3.3.2" xref="S3.p2.4.m4.1.1.3.3.2.cmml">Œ∑</mi><mo lspace="0em" rspace="0em" id="S3.p2.4.m4.1.1.3.3.1" xref="S3.p2.4.m4.1.1.3.3.1.cmml">‚Äã</mo><msubsup id="S3.p2.4.m4.1.1.3.3.3" xref="S3.p2.4.m4.1.1.3.3.3.cmml"><mi id="S3.p2.4.m4.1.1.3.3.3.2.2" xref="S3.p2.4.m4.1.1.3.3.3.2.2.cmml">g</mi><mi id="S3.p2.4.m4.1.1.3.3.3.2.3" xref="S3.p2.4.m4.1.1.3.3.3.2.3.cmml">k</mi><mi id="S3.p2.4.m4.1.1.3.3.3.3" xref="S3.p2.4.m4.1.1.3.3.3.3.cmml">t</mi></msubsup></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p2.4.m4.1b"><apply id="S3.p2.4.m4.1.1.cmml" xref="S3.p2.4.m4.1.1"><ci id="S3.p2.4.m4.1.1.1.cmml" xref="S3.p2.4.m4.1.1.1">‚Üê</ci><apply id="S3.p2.4.m4.1.1.2.cmml" xref="S3.p2.4.m4.1.1.2"><csymbol cd="ambiguous" id="S3.p2.4.m4.1.1.2.1.cmml" xref="S3.p2.4.m4.1.1.2">superscript</csymbol><apply id="S3.p2.4.m4.1.1.2.2.cmml" xref="S3.p2.4.m4.1.1.2"><csymbol cd="ambiguous" id="S3.p2.4.m4.1.1.2.2.1.cmml" xref="S3.p2.4.m4.1.1.2">subscript</csymbol><ci id="S3.p2.4.m4.1.1.2.2.2.cmml" xref="S3.p2.4.m4.1.1.2.2.2">ùë§</ci><ci id="S3.p2.4.m4.1.1.2.2.3.cmml" xref="S3.p2.4.m4.1.1.2.2.3">ùëò</ci></apply><apply id="S3.p2.4.m4.1.1.2.3.cmml" xref="S3.p2.4.m4.1.1.2.3"><plus id="S3.p2.4.m4.1.1.2.3.1.cmml" xref="S3.p2.4.m4.1.1.2.3.1"></plus><ci id="S3.p2.4.m4.1.1.2.3.2.cmml" xref="S3.p2.4.m4.1.1.2.3.2">ùë°</ci><cn type="integer" id="S3.p2.4.m4.1.1.2.3.3.cmml" xref="S3.p2.4.m4.1.1.2.3.3">1</cn></apply></apply><apply id="S3.p2.4.m4.1.1.3.cmml" xref="S3.p2.4.m4.1.1.3"><minus id="S3.p2.4.m4.1.1.3.1.cmml" xref="S3.p2.4.m4.1.1.3.1"></minus><apply id="S3.p2.4.m4.1.1.3.2.cmml" xref="S3.p2.4.m4.1.1.3.2"><csymbol cd="ambiguous" id="S3.p2.4.m4.1.1.3.2.1.cmml" xref="S3.p2.4.m4.1.1.3.2">subscript</csymbol><ci id="S3.p2.4.m4.1.1.3.2.2.cmml" xref="S3.p2.4.m4.1.1.3.2.2">ùë§</ci><ci id="S3.p2.4.m4.1.1.3.2.3.cmml" xref="S3.p2.4.m4.1.1.3.2.3">ùë°</ci></apply><apply id="S3.p2.4.m4.1.1.3.3.cmml" xref="S3.p2.4.m4.1.1.3.3"><times id="S3.p2.4.m4.1.1.3.3.1.cmml" xref="S3.p2.4.m4.1.1.3.3.1"></times><ci id="S3.p2.4.m4.1.1.3.3.2.cmml" xref="S3.p2.4.m4.1.1.3.3.2">ùúÇ</ci><apply id="S3.p2.4.m4.1.1.3.3.3.cmml" xref="S3.p2.4.m4.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.p2.4.m4.1.1.3.3.3.1.cmml" xref="S3.p2.4.m4.1.1.3.3.3">superscript</csymbol><apply id="S3.p2.4.m4.1.1.3.3.3.2.cmml" xref="S3.p2.4.m4.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.p2.4.m4.1.1.3.3.3.2.1.cmml" xref="S3.p2.4.m4.1.1.3.3.3">subscript</csymbol><ci id="S3.p2.4.m4.1.1.3.3.3.2.2.cmml" xref="S3.p2.4.m4.1.1.3.3.3.2.2">ùëî</ci><ci id="S3.p2.4.m4.1.1.3.3.3.2.3.cmml" xref="S3.p2.4.m4.1.1.3.3.3.2.3">ùëò</ci></apply><ci id="S3.p2.4.m4.1.1.3.3.3.3.cmml" xref="S3.p2.4.m4.1.1.3.3.3.3">ùë°</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p2.4.m4.1c">w_{k}^{t+1}\leftarrow w_{t}-\eta g_{k}^{t}</annotation></semantics></math>, and the FL server aggregates the local models as the global FL model.</p>
<table id="S3.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E2.m1.4" class="ltx_Math" alttext="w_{t+1}\leftarrow\mathcal{A}(\{w_{t+1}^{k}|k=1,\ldots,K\})" display="block"><semantics id="S3.E2.m1.4a"><mrow id="S3.E2.m1.4.4" xref="S3.E2.m1.4.4.cmml"><msub id="S3.E2.m1.4.4.3" xref="S3.E2.m1.4.4.3.cmml"><mi id="S3.E2.m1.4.4.3.2" xref="S3.E2.m1.4.4.3.2.cmml">w</mi><mrow id="S3.E2.m1.4.4.3.3" xref="S3.E2.m1.4.4.3.3.cmml"><mi id="S3.E2.m1.4.4.3.3.2" xref="S3.E2.m1.4.4.3.3.2.cmml">t</mi><mo id="S3.E2.m1.4.4.3.3.1" xref="S3.E2.m1.4.4.3.3.1.cmml">+</mo><mn id="S3.E2.m1.4.4.3.3.3" xref="S3.E2.m1.4.4.3.3.3.cmml">1</mn></mrow></msub><mo stretchy="false" id="S3.E2.m1.4.4.2" xref="S3.E2.m1.4.4.2.cmml">‚Üê</mo><mrow id="S3.E2.m1.4.4.1" xref="S3.E2.m1.4.4.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.4.4.1.3" xref="S3.E2.m1.4.4.1.3.cmml">ùíú</mi><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.2" xref="S3.E2.m1.4.4.1.2.cmml">‚Äã</mo><mrow id="S3.E2.m1.4.4.1.1.1" xref="S3.E2.m1.4.4.1.cmml"><mo stretchy="false" id="S3.E2.m1.4.4.1.1.1.2" xref="S3.E2.m1.4.4.1.cmml">(</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.2" xref="S3.E2.m1.4.4.1.1.1.1.3.cmml"><mo stretchy="false" id="S3.E2.m1.4.4.1.1.1.1.2.3" xref="S3.E2.m1.4.4.1.1.1.1.3.1.cmml">{</mo><msubsup id="S3.E2.m1.4.4.1.1.1.1.1.1" xref="S3.E2.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.4.4.1.1.1.1.1.1.2.2" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.2.cmml">w</mi><mrow id="S3.E2.m1.4.4.1.1.1.1.1.1.2.3" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.cmml"><mi id="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.2" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.2.cmml">t</mi><mo id="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.1" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.1.cmml">+</mo><mn id="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.3" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.3.cmml">1</mn></mrow><mi id="S3.E2.m1.4.4.1.1.1.1.1.1.3" xref="S3.E2.m1.4.4.1.1.1.1.1.1.3.cmml">k</mi></msubsup><mo lspace="0em" rspace="0em" id="S3.E2.m1.4.4.1.1.1.1.2.4" xref="S3.E2.m1.4.4.1.1.1.1.3.1.cmml">|</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.2.2" xref="S3.E2.m1.4.4.1.1.1.1.2.2.cmml"><mi id="S3.E2.m1.4.4.1.1.1.1.2.2.2" xref="S3.E2.m1.4.4.1.1.1.1.2.2.2.cmml">k</mi><mo id="S3.E2.m1.4.4.1.1.1.1.2.2.1" xref="S3.E2.m1.4.4.1.1.1.1.2.2.1.cmml">=</mo><mrow id="S3.E2.m1.4.4.1.1.1.1.2.2.3.2" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.1.cmml"><mn id="S3.E2.m1.1.1" xref="S3.E2.m1.1.1.cmml">1</mn><mo id="S3.E2.m1.4.4.1.1.1.1.2.2.3.2.1" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.1.cmml">,</mo><mi mathvariant="normal" id="S3.E2.m1.2.2" xref="S3.E2.m1.2.2.cmml">‚Ä¶</mi><mo id="S3.E2.m1.4.4.1.1.1.1.2.2.3.2.2" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.1.cmml">,</mo><mi id="S3.E2.m1.3.3" xref="S3.E2.m1.3.3.cmml">K</mi></mrow></mrow><mo stretchy="false" id="S3.E2.m1.4.4.1.1.1.1.2.5" xref="S3.E2.m1.4.4.1.1.1.1.3.1.cmml">}</mo></mrow><mo stretchy="false" id="S3.E2.m1.4.4.1.1.1.3" xref="S3.E2.m1.4.4.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.4b"><apply id="S3.E2.m1.4.4.cmml" xref="S3.E2.m1.4.4"><ci id="S3.E2.m1.4.4.2.cmml" xref="S3.E2.m1.4.4.2">‚Üê</ci><apply id="S3.E2.m1.4.4.3.cmml" xref="S3.E2.m1.4.4.3"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.3.1.cmml" xref="S3.E2.m1.4.4.3">subscript</csymbol><ci id="S3.E2.m1.4.4.3.2.cmml" xref="S3.E2.m1.4.4.3.2">ùë§</ci><apply id="S3.E2.m1.4.4.3.3.cmml" xref="S3.E2.m1.4.4.3.3"><plus id="S3.E2.m1.4.4.3.3.1.cmml" xref="S3.E2.m1.4.4.3.3.1"></plus><ci id="S3.E2.m1.4.4.3.3.2.cmml" xref="S3.E2.m1.4.4.3.3.2">ùë°</ci><cn type="integer" id="S3.E2.m1.4.4.3.3.3.cmml" xref="S3.E2.m1.4.4.3.3.3">1</cn></apply></apply><apply id="S3.E2.m1.4.4.1.cmml" xref="S3.E2.m1.4.4.1"><times id="S3.E2.m1.4.4.1.2.cmml" xref="S3.E2.m1.4.4.1.2"></times><ci id="S3.E2.m1.4.4.1.3.cmml" xref="S3.E2.m1.4.4.1.3">ùíú</ci><apply id="S3.E2.m1.4.4.1.1.1.1.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2"><csymbol cd="latexml" id="S3.E2.m1.4.4.1.1.1.1.3.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.3">conditional-set</csymbol><apply id="S3.E2.m1.4.4.1.1.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E2.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.1.1.1.1.1.1.2.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.4.4.1.1.1.1.1.1.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.2">ùë§</ci><apply id="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.3"><plus id="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.1"></plus><ci id="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.2">ùë°</ci><cn type="integer" id="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.2.3.3">1</cn></apply></apply><ci id="S3.E2.m1.4.4.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.4.4.1.1.1.1.1.1.3">ùëò</ci></apply><apply id="S3.E2.m1.4.4.1.1.1.1.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.2"><eq id="S3.E2.m1.4.4.1.1.1.1.2.2.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.2.1"></eq><ci id="S3.E2.m1.4.4.1.1.1.1.2.2.2.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.2.2">ùëò</ci><list id="S3.E2.m1.4.4.1.1.1.1.2.2.3.1.cmml" xref="S3.E2.m1.4.4.1.1.1.1.2.2.3.2"><cn type="integer" id="S3.E2.m1.1.1.cmml" xref="S3.E2.m1.1.1">1</cn><ci id="S3.E2.m1.2.2.cmml" xref="S3.E2.m1.2.2">‚Ä¶</ci><ci id="S3.E2.m1.3.3.cmml" xref="S3.E2.m1.3.3">ùêæ</ci></list></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.4c">w_{t+1}\leftarrow\mathcal{A}(\{w_{t+1}^{k}|k=1,\ldots,K\})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p id="S3.p2.5" class="ltx_p">where <math id="S3.p2.5.m1.1" class="ltx_Math" alttext="\mathcal{A}" display="inline"><semantics id="S3.p2.5.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p2.5.m1.1.1" xref="S3.p2.5.m1.1.1.cmml">ùíú</mi><annotation-xml encoding="MathML-Content" id="S3.p2.5.m1.1b"><ci id="S3.p2.5.m1.1.1.cmml" xref="S3.p2.5.m1.1.1">ùíú</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p2.5.m1.1c">\mathcal{A}</annotation></semantics></math> is an aggregation function.</p>
</div>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>FedCoin</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">There are two networks of participants in our system: 1) the FL network, and 2) the peer-to-peer blockchain network (Figure <a href="#S4.F1" title="Figure 1 ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>).</p>
</div>
<figure id="S4.F1" class="ltx_figure"><img src="/html/2002.11711/assets/x1.png" id="S4.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="332" height="185" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Overview of the Proposed Model</figcaption>
</figure>
<div id="S4.p2" class="ltx_para">
<p id="S4.p2.2" class="ltx_p">A <span id="S4.p2.2.1" class="ltx_text ltx_font_italic">FL model requester</span> or FL training task requester refers to the entities who need to train an FL network and with a budget of <math id="S4.p2.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.p2.1.m1.1a"><mi id="S4.p2.1.m1.1.1" xref="S4.p2.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.p2.1.m1.1b"><ci id="S4.p2.1.m1.1.1.cmml" xref="S4.p2.1.m1.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p2.1.m1.1c">V</annotation></semantics></math>. In the FL network, there is a centralized server, referred as <span id="S4.p2.2.2" class="ltx_text ltx_font_italic">FL server</span>, in coordinating the executing of model training and receiving payment <math id="S4.p2.2.m2.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.p2.2.m2.1a"><mi id="S4.p2.2.m2.1.1" xref="S4.p2.2.m2.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.p2.2.m2.1b"><ci id="S4.p2.2.m2.1.1.cmml" xref="S4.p2.2.m2.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p2.2.m2.1c">V</annotation></semantics></math> from FL model requester.</p>
</div>
<div id="S4.p3" class="ltx_para">
<p id="S4.p3.2" class="ltx_p">The distributed data owners, called as <span id="S4.p3.2.1" class="ltx_text ltx_font_italic">FL clients</span>, participate in a collaborative training task and receive a payment <math id="S4.p3.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.p3.1.m1.1a"><mi id="S4.p3.1.m1.1.1" xref="S4.p3.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.p3.1.m1.1b"><ci id="S4.p3.1.m1.1.1.cmml" xref="S4.p3.1.m1.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p3.1.m1.1c">V</annotation></semantics></math>. Each FL client trains its local model and submits the parameter updates to the FL server. The FL server plays three roles. Firstly, it publishes a training task to FL clients with price TrainPrice. Secondly, it aggregates local updates through a secure aggregation protocol <cite class="ltx_cite ltx_citemacro_cite">Bonawitz <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib3" title="" class="ltx_ref">2017</a>)</cite> and earns a computation payment (ComPrice). Thirdly, it transfer a processing fee SapPrice to the blockchain network to enlist its members‚Äô help in calculating the FL model. The total payment of the task (TrainPrice+ComPrice+SapPrice) should be not greater than <math id="S4.p3.2.m2.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.p3.2.m2.1a"><mi id="S4.p3.2.m2.1.1" xref="S4.p3.2.m2.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.p3.2.m2.1b"><ci id="S4.p3.2.m2.1.1.cmml" xref="S4.p3.2.m2.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p3.2.m2.1c">V</annotation></semantics></math> in order to sustain payment balance without relying on external transfer of values into this system.</p>
</div>
<div id="S4.p4" class="ltx_para">
<p id="S4.p4.1" class="ltx_p">After each global model update, the FL server publishes a task to calculate the contribution by each FL client. The consensus nodes in blockchain network then collaboratively calculate SVs, and the block winner receives a payment of TrainPrice+SapPrice. The winner then divides ComPrice to FL clients according to their respective SVs by creating transactions in the blockchain. In our current design, we only reward clients with postive contributions, but refrain from penalizing clients with negative contributions. All the transactions are recorded in the new block and further updated to the chain.</p>
</div>
<div id="S4.p5" class="ltx_para">
<p id="S4.p5.3" class="ltx_p">Therefore, the connection between FL network and blockchain network is a special type of task. A task includes the received local update set <math id="S4.p5.1.m1.5" class="ltx_Math" alttext="W=\{w_{k}|k=1,\ldots,K\}" display="inline"><semantics id="S4.p5.1.m1.5a"><mrow id="S4.p5.1.m1.5.5" xref="S4.p5.1.m1.5.5.cmml"><mi id="S4.p5.1.m1.5.5.4" xref="S4.p5.1.m1.5.5.4.cmml">W</mi><mo id="S4.p5.1.m1.5.5.3" xref="S4.p5.1.m1.5.5.3.cmml">=</mo><mrow id="S4.p5.1.m1.5.5.2.2" xref="S4.p5.1.m1.5.5.2.3.cmml"><mo stretchy="false" id="S4.p5.1.m1.5.5.2.2.3" xref="S4.p5.1.m1.5.5.2.3.1.cmml">{</mo><msub id="S4.p5.1.m1.4.4.1.1.1" xref="S4.p5.1.m1.4.4.1.1.1.cmml"><mi id="S4.p5.1.m1.4.4.1.1.1.2" xref="S4.p5.1.m1.4.4.1.1.1.2.cmml">w</mi><mi id="S4.p5.1.m1.4.4.1.1.1.3" xref="S4.p5.1.m1.4.4.1.1.1.3.cmml">k</mi></msub><mo lspace="0em" rspace="0em" id="S4.p5.1.m1.5.5.2.2.4" xref="S4.p5.1.m1.5.5.2.3.1.cmml">|</mo><mrow id="S4.p5.1.m1.5.5.2.2.2" xref="S4.p5.1.m1.5.5.2.2.2.cmml"><mi id="S4.p5.1.m1.5.5.2.2.2.2" xref="S4.p5.1.m1.5.5.2.2.2.2.cmml">k</mi><mo id="S4.p5.1.m1.5.5.2.2.2.1" xref="S4.p5.1.m1.5.5.2.2.2.1.cmml">=</mo><mrow id="S4.p5.1.m1.5.5.2.2.2.3.2" xref="S4.p5.1.m1.5.5.2.2.2.3.1.cmml"><mn id="S4.p5.1.m1.1.1" xref="S4.p5.1.m1.1.1.cmml">1</mn><mo id="S4.p5.1.m1.5.5.2.2.2.3.2.1" xref="S4.p5.1.m1.5.5.2.2.2.3.1.cmml">,</mo><mi mathvariant="normal" id="S4.p5.1.m1.2.2" xref="S4.p5.1.m1.2.2.cmml">‚Ä¶</mi><mo id="S4.p5.1.m1.5.5.2.2.2.3.2.2" xref="S4.p5.1.m1.5.5.2.2.2.3.1.cmml">,</mo><mi id="S4.p5.1.m1.3.3" xref="S4.p5.1.m1.3.3.cmml">K</mi></mrow></mrow><mo stretchy="false" id="S4.p5.1.m1.5.5.2.2.5" xref="S4.p5.1.m1.5.5.2.3.1.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.p5.1.m1.5b"><apply id="S4.p5.1.m1.5.5.cmml" xref="S4.p5.1.m1.5.5"><eq id="S4.p5.1.m1.5.5.3.cmml" xref="S4.p5.1.m1.5.5.3"></eq><ci id="S4.p5.1.m1.5.5.4.cmml" xref="S4.p5.1.m1.5.5.4">ùëä</ci><apply id="S4.p5.1.m1.5.5.2.3.cmml" xref="S4.p5.1.m1.5.5.2.2"><csymbol cd="latexml" id="S4.p5.1.m1.5.5.2.3.1.cmml" xref="S4.p5.1.m1.5.5.2.2.3">conditional-set</csymbol><apply id="S4.p5.1.m1.4.4.1.1.1.cmml" xref="S4.p5.1.m1.4.4.1.1.1"><csymbol cd="ambiguous" id="S4.p5.1.m1.4.4.1.1.1.1.cmml" xref="S4.p5.1.m1.4.4.1.1.1">subscript</csymbol><ci id="S4.p5.1.m1.4.4.1.1.1.2.cmml" xref="S4.p5.1.m1.4.4.1.1.1.2">ùë§</ci><ci id="S4.p5.1.m1.4.4.1.1.1.3.cmml" xref="S4.p5.1.m1.4.4.1.1.1.3">ùëò</ci></apply><apply id="S4.p5.1.m1.5.5.2.2.2.cmml" xref="S4.p5.1.m1.5.5.2.2.2"><eq id="S4.p5.1.m1.5.5.2.2.2.1.cmml" xref="S4.p5.1.m1.5.5.2.2.2.1"></eq><ci id="S4.p5.1.m1.5.5.2.2.2.2.cmml" xref="S4.p5.1.m1.5.5.2.2.2.2">ùëò</ci><list id="S4.p5.1.m1.5.5.2.2.2.3.1.cmml" xref="S4.p5.1.m1.5.5.2.2.2.3.2"><cn type="integer" id="S4.p5.1.m1.1.1.cmml" xref="S4.p5.1.m1.1.1">1</cn><ci id="S4.p5.1.m1.2.2.cmml" xref="S4.p5.1.m1.2.2">‚Ä¶</ci><ci id="S4.p5.1.m1.3.3.cmml" xref="S4.p5.1.m1.3.3">ùêæ</ci></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p5.1.m1.5c">W=\{w_{k}|k=1,\ldots,K\}</annotation></semantics></math>, the aggregation function <math id="S4.p5.2.m2.1" class="ltx_Math" alttext="\mathcal{A}" display="inline"><semantics id="S4.p5.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S4.p5.2.m2.1.1" xref="S4.p5.2.m2.1.1.cmml">ùíú</mi><annotation-xml encoding="MathML-Content" id="S4.p5.2.m2.1b"><ci id="S4.p5.2.m2.1.1.cmml" xref="S4.p5.2.m2.1.1">ùíú</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.p5.2.m2.1c">\mathcal{A}</annotation></semantics></math>, the loss function <math id="S4.p5.3.m3.1" class="ltx_Math" alttext="\mathcal{F}(w)" display="inline"><semantics id="S4.p5.3.m3.1a"><mrow id="S4.p5.3.m3.1.2" xref="S4.p5.3.m3.1.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.p5.3.m3.1.2.2" xref="S4.p5.3.m3.1.2.2.cmml">‚Ñ±</mi><mo lspace="0em" rspace="0em" id="S4.p5.3.m3.1.2.1" xref="S4.p5.3.m3.1.2.1.cmml">‚Äã</mo><mrow id="S4.p5.3.m3.1.2.3.2" xref="S4.p5.3.m3.1.2.cmml"><mo stretchy="false" id="S4.p5.3.m3.1.2.3.2.1" xref="S4.p5.3.m3.1.2.cmml">(</mo><mi id="S4.p5.3.m3.1.1" xref="S4.p5.3.m3.1.1.cmml">w</mi><mo stretchy="false" id="S4.p5.3.m3.1.2.3.2.2" xref="S4.p5.3.m3.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.p5.3.m3.1b"><apply id="S4.p5.3.m3.1.2.cmml" xref="S4.p5.3.m3.1.2"><times id="S4.p5.3.m3.1.2.1.cmml" xref="S4.p5.3.m3.1.2.1"></times><ci id="S4.p5.3.m3.1.2.2.cmml" xref="S4.p5.3.m3.1.2.2">‚Ñ±</ci><ci id="S4.p5.3.m3.1.1.cmml" xref="S4.p5.3.m3.1.1">ùë§</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p5.3.m3.1c">\mathcal{F}(w)</annotation></semantics></math>, and values SapPrice and TrainPrice for each update round. Note that SapPrice and TrainPrice decreases as the number of training rounds increases, and the total payment for training can be divided among the rounds equally or not. Without loss of generality, the following description focuses on a single training round.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Shapley Value Based Blockchain Consensus</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.3" class="ltx_p">Upon receiving a Shapley value calculation task from the FL network, the miners in the blockchain network are to calculate the SV vector <math id="S4.SS1.p1.1.m1.3" class="ltx_Math" alttext="S=[s_{k}]_{k\in[1,K]}" display="inline"><semantics id="S4.SS1.p1.1.m1.3a"><mrow id="S4.SS1.p1.1.m1.3.3" xref="S4.SS1.p1.1.m1.3.3.cmml"><mi id="S4.SS1.p1.1.m1.3.3.3" xref="S4.SS1.p1.1.m1.3.3.3.cmml">S</mi><mo id="S4.SS1.p1.1.m1.3.3.2" xref="S4.SS1.p1.1.m1.3.3.2.cmml">=</mo><msub id="S4.SS1.p1.1.m1.3.3.1" xref="S4.SS1.p1.1.m1.3.3.1.cmml"><mrow id="S4.SS1.p1.1.m1.3.3.1.1.1" xref="S4.SS1.p1.1.m1.3.3.1.1.2.cmml"><mo stretchy="false" id="S4.SS1.p1.1.m1.3.3.1.1.1.2" xref="S4.SS1.p1.1.m1.3.3.1.1.2.1.cmml">[</mo><msub id="S4.SS1.p1.1.m1.3.3.1.1.1.1" xref="S4.SS1.p1.1.m1.3.3.1.1.1.1.cmml"><mi id="S4.SS1.p1.1.m1.3.3.1.1.1.1.2" xref="S4.SS1.p1.1.m1.3.3.1.1.1.1.2.cmml">s</mi><mi id="S4.SS1.p1.1.m1.3.3.1.1.1.1.3" xref="S4.SS1.p1.1.m1.3.3.1.1.1.1.3.cmml">k</mi></msub><mo stretchy="false" id="S4.SS1.p1.1.m1.3.3.1.1.1.3" xref="S4.SS1.p1.1.m1.3.3.1.1.2.1.cmml">]</mo></mrow><mrow id="S4.SS1.p1.1.m1.2.2.2" xref="S4.SS1.p1.1.m1.2.2.2.cmml"><mi id="S4.SS1.p1.1.m1.2.2.2.4" xref="S4.SS1.p1.1.m1.2.2.2.4.cmml">k</mi><mo id="S4.SS1.p1.1.m1.2.2.2.3" xref="S4.SS1.p1.1.m1.2.2.2.3.cmml">‚àà</mo><mrow id="S4.SS1.p1.1.m1.2.2.2.5.2" xref="S4.SS1.p1.1.m1.2.2.2.5.1.cmml"><mo stretchy="false" id="S4.SS1.p1.1.m1.2.2.2.5.2.1" xref="S4.SS1.p1.1.m1.2.2.2.5.1.cmml">[</mo><mn id="S4.SS1.p1.1.m1.1.1.1.1" xref="S4.SS1.p1.1.m1.1.1.1.1.cmml">1</mn><mo id="S4.SS1.p1.1.m1.2.2.2.5.2.2" xref="S4.SS1.p1.1.m1.2.2.2.5.1.cmml">,</mo><mi id="S4.SS1.p1.1.m1.2.2.2.2" xref="S4.SS1.p1.1.m1.2.2.2.2.cmml">K</mi><mo stretchy="false" id="S4.SS1.p1.1.m1.2.2.2.5.2.3" xref="S4.SS1.p1.1.m1.2.2.2.5.1.cmml">]</mo></mrow></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.3b"><apply id="S4.SS1.p1.1.m1.3.3.cmml" xref="S4.SS1.p1.1.m1.3.3"><eq id="S4.SS1.p1.1.m1.3.3.2.cmml" xref="S4.SS1.p1.1.m1.3.3.2"></eq><ci id="S4.SS1.p1.1.m1.3.3.3.cmml" xref="S4.SS1.p1.1.m1.3.3.3">ùëÜ</ci><apply id="S4.SS1.p1.1.m1.3.3.1.cmml" xref="S4.SS1.p1.1.m1.3.3.1"><csymbol cd="ambiguous" id="S4.SS1.p1.1.m1.3.3.1.2.cmml" xref="S4.SS1.p1.1.m1.3.3.1">subscript</csymbol><apply id="S4.SS1.p1.1.m1.3.3.1.1.2.cmml" xref="S4.SS1.p1.1.m1.3.3.1.1.1"><csymbol cd="latexml" id="S4.SS1.p1.1.m1.3.3.1.1.2.1.cmml" xref="S4.SS1.p1.1.m1.3.3.1.1.1.2">delimited-[]</csymbol><apply id="S4.SS1.p1.1.m1.3.3.1.1.1.1.cmml" xref="S4.SS1.p1.1.m1.3.3.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS1.p1.1.m1.3.3.1.1.1.1.1.cmml" xref="S4.SS1.p1.1.m1.3.3.1.1.1.1">subscript</csymbol><ci id="S4.SS1.p1.1.m1.3.3.1.1.1.1.2.cmml" xref="S4.SS1.p1.1.m1.3.3.1.1.1.1.2">ùë†</ci><ci id="S4.SS1.p1.1.m1.3.3.1.1.1.1.3.cmml" xref="S4.SS1.p1.1.m1.3.3.1.1.1.1.3">ùëò</ci></apply></apply><apply id="S4.SS1.p1.1.m1.2.2.2.cmml" xref="S4.SS1.p1.1.m1.2.2.2"><in id="S4.SS1.p1.1.m1.2.2.2.3.cmml" xref="S4.SS1.p1.1.m1.2.2.2.3"></in><ci id="S4.SS1.p1.1.m1.2.2.2.4.cmml" xref="S4.SS1.p1.1.m1.2.2.2.4">ùëò</ci><interval closure="closed" id="S4.SS1.p1.1.m1.2.2.2.5.1.cmml" xref="S4.SS1.p1.1.m1.2.2.2.5.2"><cn type="integer" id="S4.SS1.p1.1.m1.1.1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1.1.1">1</cn><ci id="S4.SS1.p1.1.m1.2.2.2.2.cmml" xref="S4.SS1.p1.1.m1.2.2.2.2">ùêæ</ci></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.3c">S=[s_{k}]_{k\in[1,K]}</annotation></semantics></math> where <math id="S4.SS1.p1.2.m2.1" class="ltx_Math" alttext="s_{k}" display="inline"><semantics id="S4.SS1.p1.2.m2.1a"><msub id="S4.SS1.p1.2.m2.1.1" xref="S4.SS1.p1.2.m2.1.1.cmml"><mi id="S4.SS1.p1.2.m2.1.1.2" xref="S4.SS1.p1.2.m2.1.1.2.cmml">s</mi><mi id="S4.SS1.p1.2.m2.1.1.3" xref="S4.SS1.p1.2.m2.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.2.m2.1b"><apply id="S4.SS1.p1.2.m2.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS1.p1.2.m2.1.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1">subscript</csymbol><ci id="S4.SS1.p1.2.m2.1.1.2.cmml" xref="S4.SS1.p1.2.m2.1.1.2">ùë†</ci><ci id="S4.SS1.p1.2.m2.1.1.3.cmml" xref="S4.SS1.p1.2.m2.1.1.3">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.2.m2.1c">s_{k}</annotation></semantics></math> is the SV of the client in providing <math id="S4.SS1.p1.3.m3.1" class="ltx_Math" alttext="w_{k}\in W" display="inline"><semantics id="S4.SS1.p1.3.m3.1a"><mrow id="S4.SS1.p1.3.m3.1.1" xref="S4.SS1.p1.3.m3.1.1.cmml"><msub id="S4.SS1.p1.3.m3.1.1.2" xref="S4.SS1.p1.3.m3.1.1.2.cmml"><mi id="S4.SS1.p1.3.m3.1.1.2.2" xref="S4.SS1.p1.3.m3.1.1.2.2.cmml">w</mi><mi id="S4.SS1.p1.3.m3.1.1.2.3" xref="S4.SS1.p1.3.m3.1.1.2.3.cmml">k</mi></msub><mo id="S4.SS1.p1.3.m3.1.1.1" xref="S4.SS1.p1.3.m3.1.1.1.cmml">‚àà</mo><mi id="S4.SS1.p1.3.m3.1.1.3" xref="S4.SS1.p1.3.m3.1.1.3.cmml">W</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.3.m3.1b"><apply id="S4.SS1.p1.3.m3.1.1.cmml" xref="S4.SS1.p1.3.m3.1.1"><in id="S4.SS1.p1.3.m3.1.1.1.cmml" xref="S4.SS1.p1.3.m3.1.1.1"></in><apply id="S4.SS1.p1.3.m3.1.1.2.cmml" xref="S4.SS1.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="S4.SS1.p1.3.m3.1.1.2.1.cmml" xref="S4.SS1.p1.3.m3.1.1.2">subscript</csymbol><ci id="S4.SS1.p1.3.m3.1.1.2.2.cmml" xref="S4.SS1.p1.3.m3.1.1.2.2">ùë§</ci><ci id="S4.SS1.p1.3.m3.1.1.2.3.cmml" xref="S4.SS1.p1.3.m3.1.1.2.3">ùëò</ci></apply><ci id="S4.SS1.p1.3.m3.1.1.3.cmml" xref="S4.SS1.p1.3.m3.1.1.3">ùëä</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.3.m3.1c">w_{k}\in W</annotation></semantics></math>. Each miner independently calculates the SV vector following Algorithm <a href="#alg1" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>. Since the objective of the mining process is to competitively calculate SV vectors so as to prove the miner‚Äôs computation power, we name the algorithm as ‚ÄúProof of Shapley (PoSap)‚Äù. The input of Algorithm <a href="#alg1" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> comes from the task specifications from the FL network. The output is a new generated block.</p>
</div>
<figure id="alg1" class="ltx_float ltx_algorithm">
<div id="alg1.31" class="ltx_listing ltx_lst_numbers_left ltx_listing">
<div id="alg1.1.1" class="ltx_listingline">

<span id="alg1.1.1.1" class="ltx_text"><span id="alg1.1.1.1.1" class="ltx_text ltx_font_bold">Input:</span> </span><math id="alg1.1.1.m1.1" class="ltx_Math" alttext="\mathcal{F}" display="inline"><semantics id="alg1.1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.1.1.m1.1.1" xref="alg1.1.1.m1.1.1.cmml">‚Ñ±</mi><annotation-xml encoding="MathML-Content" id="alg1.1.1.m1.1b"><ci id="alg1.1.1.m1.1.1.cmml" xref="alg1.1.1.m1.1.1">‚Ñ±</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.1.1.m1.1c">\mathcal{F}</annotation></semantics></math>: Loss function;
</div>
<div id="alg1.2.2" class="ltx_listingline">
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†<math id="alg1.2.2.m1.1" class="ltx_Math" alttext="\mathcal{A}" display="inline"><semantics id="alg1.2.2.m1.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.2.2.m1.1.1" xref="alg1.2.2.m1.1.1.cmml">ùíú</mi><annotation-xml encoding="MathML-Content" id="alg1.2.2.m1.1b"><ci id="alg1.2.2.m1.1.1.cmml" xref="alg1.2.2.m1.1.1">ùíú</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.2.2.m1.1c">\mathcal{A}</annotation></semantics></math>: Aggregation function;
</div>
<div id="alg1.4.4" class="ltx_listingline">
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†<math id="alg1.3.3.m1.1" class="ltx_Math" alttext="W" display="inline"><semantics id="alg1.3.3.m1.1a"><mi id="alg1.3.3.m1.1.1" xref="alg1.3.3.m1.1.1.cmml">W</mi><annotation-xml encoding="MathML-Content" id="alg1.3.3.m1.1b"><ci id="alg1.3.3.m1.1.1.cmml" xref="alg1.3.3.m1.1.1">ùëä</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.3.3.m1.1c">W</annotation></semantics></math>: Contribution of FL clients in size <math id="alg1.4.4.m2.1" class="ltx_Math" alttext="K" display="inline"><semantics id="alg1.4.4.m2.1a"><mi id="alg1.4.4.m2.1.1" xref="alg1.4.4.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="alg1.4.4.m2.1b"><ci id="alg1.4.4.m2.1.1.cmml" xref="alg1.4.4.m2.1.1">ùêæ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.4.4.m2.1c">K</annotation></semantics></math>;
</div>
<div id="alg1.5.5" class="ltx_listingline">
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†<math id="alg1.5.5.m1.1" class="ltx_Math" alttext="D" display="inline"><semantics id="alg1.5.5.m1.1a"><mi id="alg1.5.5.m1.1.1" xref="alg1.5.5.m1.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="alg1.5.5.m1.1b"><ci id="alg1.5.5.m1.1.1.cmml" xref="alg1.5.5.m1.1.1">ùê∑</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.5.5.m1.1c">D</annotation></semantics></math>: Difficulty in Mining;
</div>
<div id="alg1.31.32" class="ltx_listingline">

</div>
<div id="alg1.6.6" class="ltx_listingline">
<span id="alg1.6.6.1" class="ltx_text"><span id="alg1.6.6.1.1" class="ltx_text ltx_font_bold">Output:</span> </span><math id="alg1.6.6.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.6.6.m1.1a"><mrow id="alg1.6.6.m1.1.1" xref="alg1.6.6.m1.1.1.cmml"><mi id="alg1.6.6.m1.1.1.2" xref="alg1.6.6.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.6.6.m1.1.1.1" xref="alg1.6.6.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.6.6.m1.1.1.3" xref="alg1.6.6.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.6.6.m1.1.1.1a" xref="alg1.6.6.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.6.6.m1.1.1.4" xref="alg1.6.6.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.6.6.m1.1b"><apply id="alg1.6.6.m1.1.1.cmml" xref="alg1.6.6.m1.1.1"><times id="alg1.6.6.m1.1.1.1.cmml" xref="alg1.6.6.m1.1.1.1"></times><ci id="alg1.6.6.m1.1.1.2.cmml" xref="alg1.6.6.m1.1.1.2">ùêµ</ci><ci id="alg1.6.6.m1.1.1.3.cmml" xref="alg1.6.6.m1.1.1.3">ùëô</ci><ci id="alg1.6.6.m1.1.1.4.cmml" xref="alg1.6.6.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.6.6.m1.1c">Blk</annotation></semantics></math>: a new block
</div>
<div id="alg1.7.7" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span>
Initialize <math id="alg1.7.7.m1.3" class="ltx_math_unparsed" alttext="S=[s_{k}=0|k=1,\ldots,K]" display="inline"><semantics id="alg1.7.7.m1.3a"><mrow id="alg1.7.7.m1.3b"><mi id="alg1.7.7.m1.3.4">S</mi><mo id="alg1.7.7.m1.3.5">=</mo><mrow id="alg1.7.7.m1.3.6"><mo stretchy="false" id="alg1.7.7.m1.3.6.1">[</mo><msub id="alg1.7.7.m1.3.6.2"><mi id="alg1.7.7.m1.3.6.2.2">s</mi><mi id="alg1.7.7.m1.3.6.2.3">k</mi></msub><mo id="alg1.7.7.m1.3.6.3">=</mo><mn id="alg1.7.7.m1.3.6.4">0</mn><mo fence="false" rspace="0.167em" stretchy="false" id="alg1.7.7.m1.3.6.5">|</mo><mi id="alg1.7.7.m1.3.6.6">k</mi><mo id="alg1.7.7.m1.3.6.7">=</mo><mn id="alg1.7.7.m1.1.1">1</mn><mo id="alg1.7.7.m1.3.6.8">,</mo><mi mathvariant="normal" id="alg1.7.7.m1.2.2">‚Ä¶</mi><mo id="alg1.7.7.m1.3.6.9">,</mo><mi id="alg1.7.7.m1.3.3">K</mi><mo stretchy="false" id="alg1.7.7.m1.3.6.10">]</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.7.7.m1.3c">S=[s_{k}=0|k=1,\ldots,K]</annotation></semantics></math>;
</div>
<div id="alg1.31.33" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span>
time=0;
</div>
<div id="alg1.9.9" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span>
<span id="alg1.9.9.3" class="ltx_text ltx_font_bold">while</span>¬†<em id="alg1.9.9.2" class="ltx_emph ltx_font_italic">No received <math id="alg1.8.8.1.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.8.8.1.m1.1a"><mrow id="alg1.8.8.1.m1.1.1" xref="alg1.8.8.1.m1.1.1.cmml"><mi id="alg1.8.8.1.m1.1.1.2" xref="alg1.8.8.1.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.8.8.1.m1.1.1.1" xref="alg1.8.8.1.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.8.8.1.m1.1.1.3" xref="alg1.8.8.1.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.8.8.1.m1.1.1.1a" xref="alg1.8.8.1.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.8.8.1.m1.1.1.4" xref="alg1.8.8.1.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.8.8.1.m1.1b"><apply id="alg1.8.8.1.m1.1.1.cmml" xref="alg1.8.8.1.m1.1.1"><times id="alg1.8.8.1.m1.1.1.1.cmml" xref="alg1.8.8.1.m1.1.1.1"></times><ci id="alg1.8.8.1.m1.1.1.2.cmml" xref="alg1.8.8.1.m1.1.1.2">ùêµ</ci><ci id="alg1.8.8.1.m1.1.1.3.cmml" xref="alg1.8.8.1.m1.1.1.3">ùëô</ci><ci id="alg1.8.8.1.m1.1.1.4.cmml" xref="alg1.8.8.1.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.8.8.1.m1.1c">Blk</annotation></semantics></math> OR !VerifyBlock(<math id="alg1.9.9.2.m2.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.9.9.2.m2.1a"><mrow id="alg1.9.9.2.m2.1.1" xref="alg1.9.9.2.m2.1.1.cmml"><mi id="alg1.9.9.2.m2.1.1.2" xref="alg1.9.9.2.m2.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.9.9.2.m2.1.1.1" xref="alg1.9.9.2.m2.1.1.1.cmml">‚Äã</mo><mi id="alg1.9.9.2.m2.1.1.3" xref="alg1.9.9.2.m2.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.9.9.2.m2.1.1.1a" xref="alg1.9.9.2.m2.1.1.1.cmml">‚Äã</mo><mi id="alg1.9.9.2.m2.1.1.4" xref="alg1.9.9.2.m2.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.9.9.2.m2.1b"><apply id="alg1.9.9.2.m2.1.1.cmml" xref="alg1.9.9.2.m2.1.1"><times id="alg1.9.9.2.m2.1.1.1.cmml" xref="alg1.9.9.2.m2.1.1.1"></times><ci id="alg1.9.9.2.m2.1.1.2.cmml" xref="alg1.9.9.2.m2.1.1.2">ùêµ</ci><ci id="alg1.9.9.2.m2.1.1.3.cmml" xref="alg1.9.9.2.m2.1.1.3">ùëô</ci><ci id="alg1.9.9.2.m2.1.1.4.cmml" xref="alg1.9.9.2.m2.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.9.9.2.m2.1c">Blk</annotation></semantics></math>)</em>¬†<span id="alg1.9.9.4" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg1.11.11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<math id="alg1.10.10.m1.3" class="ltx_math_unparsed" alttext="S_{t}=[s_{k}=0|k=1,\ldots,K]" display="inline"><semantics id="alg1.10.10.m1.3a"><mrow id="alg1.10.10.m1.3b"><msub id="alg1.10.10.m1.3.4"><mi id="alg1.10.10.m1.3.4.2">S</mi><mi id="alg1.10.10.m1.3.4.3">t</mi></msub><mo id="alg1.10.10.m1.3.5">=</mo><mrow id="alg1.10.10.m1.3.6"><mo stretchy="false" id="alg1.10.10.m1.3.6.1">[</mo><msub id="alg1.10.10.m1.3.6.2"><mi id="alg1.10.10.m1.3.6.2.2">s</mi><mi id="alg1.10.10.m1.3.6.2.3">k</mi></msub><mo id="alg1.10.10.m1.3.6.3">=</mo><mn id="alg1.10.10.m1.3.6.4">0</mn><mo fence="false" rspace="0.167em" stretchy="false" id="alg1.10.10.m1.3.6.5">|</mo><mi id="alg1.10.10.m1.3.6.6">k</mi><mo id="alg1.10.10.m1.3.6.7">=</mo><mn id="alg1.10.10.m1.1.1">1</mn><mo id="alg1.10.10.m1.3.6.8">,</mo><mi mathvariant="normal" id="alg1.10.10.m1.2.2">‚Ä¶</mi><mo id="alg1.10.10.m1.3.6.9">,</mo><mi id="alg1.10.10.m1.3.3">K</mi><mo stretchy="false" id="alg1.10.10.m1.3.6.10">]</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.10.10.m1.3c">S_{t}=[s_{k}=0|k=1,\ldots,K]</annotation></semantics></math>% temporary store <math id="alg1.11.11.m2.1" class="ltx_Math" alttext="S" display="inline"><semantics id="alg1.11.11.m2.1a"><mi id="alg1.11.11.m2.1.1" xref="alg1.11.11.m2.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="alg1.11.11.m2.1b"><ci id="alg1.11.11.m2.1.1.cmml" xref="alg1.11.11.m2.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.11.11.m2.1c">S</annotation></semantics></math>
</div>
<div id="alg1.12.12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
Random generate a rank <math id="alg1.12.12.m1.4" class="ltx_Math" alttext="R=[r_{k}|k=1,\ldots,K]" display="inline"><semantics id="alg1.12.12.m1.4a"><mrow id="alg1.12.12.m1.4.4" xref="alg1.12.12.m1.4.4.cmml"><mi id="alg1.12.12.m1.4.4.3" xref="alg1.12.12.m1.4.4.3.cmml">R</mi><mo id="alg1.12.12.m1.4.4.2" xref="alg1.12.12.m1.4.4.2.cmml">=</mo><mrow id="alg1.12.12.m1.4.4.1.1" xref="alg1.12.12.m1.4.4.1.2.cmml"><mo stretchy="false" id="alg1.12.12.m1.4.4.1.1.2" xref="alg1.12.12.m1.4.4.1.2.1.cmml">[</mo><mrow id="alg1.12.12.m1.4.4.1.1.1" xref="alg1.12.12.m1.4.4.1.1.1.cmml"><mrow id="alg1.12.12.m1.4.4.1.1.1.2" xref="alg1.12.12.m1.4.4.1.1.1.2.cmml"><msub id="alg1.12.12.m1.4.4.1.1.1.2.2" xref="alg1.12.12.m1.4.4.1.1.1.2.2.cmml"><mi id="alg1.12.12.m1.4.4.1.1.1.2.2.2" xref="alg1.12.12.m1.4.4.1.1.1.2.2.2.cmml">r</mi><mi id="alg1.12.12.m1.4.4.1.1.1.2.2.3" xref="alg1.12.12.m1.4.4.1.1.1.2.2.3.cmml">k</mi></msub><mo fence="false" id="alg1.12.12.m1.4.4.1.1.1.2.1" xref="alg1.12.12.m1.4.4.1.1.1.2.1.cmml">|</mo><mi id="alg1.12.12.m1.4.4.1.1.1.2.3" xref="alg1.12.12.m1.4.4.1.1.1.2.3.cmml">k</mi></mrow><mo id="alg1.12.12.m1.4.4.1.1.1.1" xref="alg1.12.12.m1.4.4.1.1.1.1.cmml">=</mo><mrow id="alg1.12.12.m1.4.4.1.1.1.3.2" xref="alg1.12.12.m1.4.4.1.1.1.3.1.cmml"><mn id="alg1.12.12.m1.1.1" xref="alg1.12.12.m1.1.1.cmml">1</mn><mo id="alg1.12.12.m1.4.4.1.1.1.3.2.1" xref="alg1.12.12.m1.4.4.1.1.1.3.1.cmml">,</mo><mi mathvariant="normal" id="alg1.12.12.m1.2.2" xref="alg1.12.12.m1.2.2.cmml">‚Ä¶</mi><mo id="alg1.12.12.m1.4.4.1.1.1.3.2.2" xref="alg1.12.12.m1.4.4.1.1.1.3.1.cmml">,</mo><mi id="alg1.12.12.m1.3.3" xref="alg1.12.12.m1.3.3.cmml">K</mi></mrow></mrow><mo stretchy="false" id="alg1.12.12.m1.4.4.1.1.3" xref="alg1.12.12.m1.4.4.1.2.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.12.12.m1.4b"><apply id="alg1.12.12.m1.4.4.cmml" xref="alg1.12.12.m1.4.4"><eq id="alg1.12.12.m1.4.4.2.cmml" xref="alg1.12.12.m1.4.4.2"></eq><ci id="alg1.12.12.m1.4.4.3.cmml" xref="alg1.12.12.m1.4.4.3">ùëÖ</ci><apply id="alg1.12.12.m1.4.4.1.2.cmml" xref="alg1.12.12.m1.4.4.1.1"><csymbol cd="latexml" id="alg1.12.12.m1.4.4.1.2.1.cmml" xref="alg1.12.12.m1.4.4.1.1.2">delimited-[]</csymbol><apply id="alg1.12.12.m1.4.4.1.1.1.cmml" xref="alg1.12.12.m1.4.4.1.1.1"><eq id="alg1.12.12.m1.4.4.1.1.1.1.cmml" xref="alg1.12.12.m1.4.4.1.1.1.1"></eq><apply id="alg1.12.12.m1.4.4.1.1.1.2.cmml" xref="alg1.12.12.m1.4.4.1.1.1.2"><csymbol cd="latexml" id="alg1.12.12.m1.4.4.1.1.1.2.1.cmml" xref="alg1.12.12.m1.4.4.1.1.1.2.1">conditional</csymbol><apply id="alg1.12.12.m1.4.4.1.1.1.2.2.cmml" xref="alg1.12.12.m1.4.4.1.1.1.2.2"><csymbol cd="ambiguous" id="alg1.12.12.m1.4.4.1.1.1.2.2.1.cmml" xref="alg1.12.12.m1.4.4.1.1.1.2.2">subscript</csymbol><ci id="alg1.12.12.m1.4.4.1.1.1.2.2.2.cmml" xref="alg1.12.12.m1.4.4.1.1.1.2.2.2">ùëü</ci><ci id="alg1.12.12.m1.4.4.1.1.1.2.2.3.cmml" xref="alg1.12.12.m1.4.4.1.1.1.2.2.3">ùëò</ci></apply><ci id="alg1.12.12.m1.4.4.1.1.1.2.3.cmml" xref="alg1.12.12.m1.4.4.1.1.1.2.3">ùëò</ci></apply><list id="alg1.12.12.m1.4.4.1.1.1.3.1.cmml" xref="alg1.12.12.m1.4.4.1.1.1.3.2"><cn type="integer" id="alg1.12.12.m1.1.1.cmml" xref="alg1.12.12.m1.1.1">1</cn><ci id="alg1.12.12.m1.2.2.cmml" xref="alg1.12.12.m1.2.2">‚Ä¶</ci><ci id="alg1.12.12.m1.3.3.cmml" xref="alg1.12.12.m1.3.3">ùêæ</ci></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.12.12.m1.4c">R=[r_{k}|k=1,\ldots,K]</annotation></semantics></math>;
</div>
<div id="alg1.13.13" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<math id="alg1.13.13.m1.4" class="ltx_Math" alttext="S_{t}(R(1))=\mathcal{F}(\mathcal{A}(W(R(1))))" display="inline"><semantics id="alg1.13.13.m1.4a"><mrow id="alg1.13.13.m1.4.4" xref="alg1.13.13.m1.4.4.cmml"><mrow id="alg1.13.13.m1.3.3.1" xref="alg1.13.13.m1.3.3.1.cmml"><msub id="alg1.13.13.m1.3.3.1.3" xref="alg1.13.13.m1.3.3.1.3.cmml"><mi id="alg1.13.13.m1.3.3.1.3.2" xref="alg1.13.13.m1.3.3.1.3.2.cmml">S</mi><mi id="alg1.13.13.m1.3.3.1.3.3" xref="alg1.13.13.m1.3.3.1.3.3.cmml">t</mi></msub><mo lspace="0em" rspace="0em" id="alg1.13.13.m1.3.3.1.2" xref="alg1.13.13.m1.3.3.1.2.cmml">‚Äã</mo><mrow id="alg1.13.13.m1.3.3.1.1.1" xref="alg1.13.13.m1.3.3.1.1.1.1.cmml"><mo stretchy="false" id="alg1.13.13.m1.3.3.1.1.1.2" xref="alg1.13.13.m1.3.3.1.1.1.1.cmml">(</mo><mrow id="alg1.13.13.m1.3.3.1.1.1.1" xref="alg1.13.13.m1.3.3.1.1.1.1.cmml"><mi id="alg1.13.13.m1.3.3.1.1.1.1.2" xref="alg1.13.13.m1.3.3.1.1.1.1.2.cmml">R</mi><mo lspace="0em" rspace="0em" id="alg1.13.13.m1.3.3.1.1.1.1.1" xref="alg1.13.13.m1.3.3.1.1.1.1.1.cmml">‚Äã</mo><mrow id="alg1.13.13.m1.3.3.1.1.1.1.3.2" xref="alg1.13.13.m1.3.3.1.1.1.1.cmml"><mo stretchy="false" id="alg1.13.13.m1.3.3.1.1.1.1.3.2.1" xref="alg1.13.13.m1.3.3.1.1.1.1.cmml">(</mo><mn id="alg1.13.13.m1.1.1" xref="alg1.13.13.m1.1.1.cmml">1</mn><mo stretchy="false" id="alg1.13.13.m1.3.3.1.1.1.1.3.2.2" xref="alg1.13.13.m1.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="alg1.13.13.m1.3.3.1.1.1.3" xref="alg1.13.13.m1.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.13.13.m1.4.4.3" xref="alg1.13.13.m1.4.4.3.cmml">=</mo><mrow id="alg1.13.13.m1.4.4.2" xref="alg1.13.13.m1.4.4.2.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.13.13.m1.4.4.2.3" xref="alg1.13.13.m1.4.4.2.3.cmml">‚Ñ±</mi><mo lspace="0em" rspace="0em" id="alg1.13.13.m1.4.4.2.2" xref="alg1.13.13.m1.4.4.2.2.cmml">‚Äã</mo><mrow id="alg1.13.13.m1.4.4.2.1.1" xref="alg1.13.13.m1.4.4.2.1.1.1.cmml"><mo stretchy="false" id="alg1.13.13.m1.4.4.2.1.1.2" xref="alg1.13.13.m1.4.4.2.1.1.1.cmml">(</mo><mrow id="alg1.13.13.m1.4.4.2.1.1.1" xref="alg1.13.13.m1.4.4.2.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg1.13.13.m1.4.4.2.1.1.1.3" xref="alg1.13.13.m1.4.4.2.1.1.1.3.cmml">ùíú</mi><mo lspace="0em" rspace="0em" id="alg1.13.13.m1.4.4.2.1.1.1.2" xref="alg1.13.13.m1.4.4.2.1.1.1.2.cmml">‚Äã</mo><mrow id="alg1.13.13.m1.4.4.2.1.1.1.1.1" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="alg1.13.13.m1.4.4.2.1.1.1.1.1.2" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.cmml"><mi id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.3" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.3.cmml">W</mi><mo lspace="0em" rspace="0em" id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.2" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.2.cmml">‚Äã</mo><mrow id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.2" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.cmml"><mi id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.2" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.2.cmml">R</mi><mo lspace="0em" rspace="0em" id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.1" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.1.cmml">‚Äã</mo><mrow id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.3.2" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.3.2.1" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.cmml">(</mo><mn id="alg1.13.13.m1.2.2" xref="alg1.13.13.m1.2.2.cmml">1</mn><mo stretchy="false" id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.3.2.2" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.3" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="alg1.13.13.m1.4.4.2.1.1.1.1.1.3" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="alg1.13.13.m1.4.4.2.1.1.3" xref="alg1.13.13.m1.4.4.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.13.13.m1.4b"><apply id="alg1.13.13.m1.4.4.cmml" xref="alg1.13.13.m1.4.4"><eq id="alg1.13.13.m1.4.4.3.cmml" xref="alg1.13.13.m1.4.4.3"></eq><apply id="alg1.13.13.m1.3.3.1.cmml" xref="alg1.13.13.m1.3.3.1"><times id="alg1.13.13.m1.3.3.1.2.cmml" xref="alg1.13.13.m1.3.3.1.2"></times><apply id="alg1.13.13.m1.3.3.1.3.cmml" xref="alg1.13.13.m1.3.3.1.3"><csymbol cd="ambiguous" id="alg1.13.13.m1.3.3.1.3.1.cmml" xref="alg1.13.13.m1.3.3.1.3">subscript</csymbol><ci id="alg1.13.13.m1.3.3.1.3.2.cmml" xref="alg1.13.13.m1.3.3.1.3.2">ùëÜ</ci><ci id="alg1.13.13.m1.3.3.1.3.3.cmml" xref="alg1.13.13.m1.3.3.1.3.3">ùë°</ci></apply><apply id="alg1.13.13.m1.3.3.1.1.1.1.cmml" xref="alg1.13.13.m1.3.3.1.1.1"><times id="alg1.13.13.m1.3.3.1.1.1.1.1.cmml" xref="alg1.13.13.m1.3.3.1.1.1.1.1"></times><ci id="alg1.13.13.m1.3.3.1.1.1.1.2.cmml" xref="alg1.13.13.m1.3.3.1.1.1.1.2">ùëÖ</ci><cn type="integer" id="alg1.13.13.m1.1.1.cmml" xref="alg1.13.13.m1.1.1">1</cn></apply></apply><apply id="alg1.13.13.m1.4.4.2.cmml" xref="alg1.13.13.m1.4.4.2"><times id="alg1.13.13.m1.4.4.2.2.cmml" xref="alg1.13.13.m1.4.4.2.2"></times><ci id="alg1.13.13.m1.4.4.2.3.cmml" xref="alg1.13.13.m1.4.4.2.3">‚Ñ±</ci><apply id="alg1.13.13.m1.4.4.2.1.1.1.cmml" xref="alg1.13.13.m1.4.4.2.1.1"><times id="alg1.13.13.m1.4.4.2.1.1.1.2.cmml" xref="alg1.13.13.m1.4.4.2.1.1.1.2"></times><ci id="alg1.13.13.m1.4.4.2.1.1.1.3.cmml" xref="alg1.13.13.m1.4.4.2.1.1.1.3">ùíú</ci><apply id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.cmml" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1"><times id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.2.cmml" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.2"></times><ci id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.3.cmml" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.3">ùëä</ci><apply id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1"><times id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.1"></times><ci id="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.2.cmml" xref="alg1.13.13.m1.4.4.2.1.1.1.1.1.1.1.1.1.2">ùëÖ</ci><cn type="integer" id="alg1.13.13.m1.2.2.cmml" xref="alg1.13.13.m1.2.2">1</cn></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.13.13.m1.4c">S_{t}(R(1))=\mathcal{F}(\mathcal{A}(W(R(1))))</annotation></semantics></math>;
</div>
<div id="alg1.16.16" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg1.16.16.4" class="ltx_text ltx_font_bold">for</span>¬†<em id="alg1.16.16.3" class="ltx_emph ltx_font_italic"><math id="alg1.14.14.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="alg1.14.14.1.m1.1a"><mi id="alg1.14.14.1.m1.1.1" xref="alg1.14.14.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="alg1.14.14.1.m1.1b"><ci id="alg1.14.14.1.m1.1.1.cmml" xref="alg1.14.14.1.m1.1.1">ùëñ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.14.14.1.m1.1c">i</annotation></semantics></math> from <math id="alg1.15.15.2.m2.1" class="ltx_Math" alttext="2" display="inline"><semantics id="alg1.15.15.2.m2.1a"><mn id="alg1.15.15.2.m2.1.1" xref="alg1.15.15.2.m2.1.1.cmml">2</mn><annotation-xml encoding="MathML-Content" id="alg1.15.15.2.m2.1b"><cn type="integer" id="alg1.15.15.2.m2.1.1.cmml" xref="alg1.15.15.2.m2.1.1">2</cn></annotation-xml><annotation encoding="application/x-tex" id="alg1.15.15.2.m2.1c">2</annotation></semantics></math> to <math id="alg1.16.16.3.m3.1" class="ltx_Math" alttext="K" display="inline"><semantics id="alg1.16.16.3.m3.1a"><mi id="alg1.16.16.3.m3.1.1" xref="alg1.16.16.3.m3.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="alg1.16.16.3.m3.1b"><ci id="alg1.16.16.3.m3.1.1.cmml" xref="alg1.16.16.3.m3.1.1">ùêæ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.16.16.3.m3.1c">K</annotation></semantics></math></em>¬†<span id="alg1.16.16.5" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg1.17.17" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<math id="alg1.17.17.m1.1" class="ltx_math_unparsed" alttext="S_{t}(R(i))=\mathcal{F}(\mathcal{A}(W(R(1:i))))" display="inline"><semantics id="alg1.17.17.m1.1a"><mrow id="alg1.17.17.m1.1b"><msub id="alg1.17.17.m1.1.2"><mi id="alg1.17.17.m1.1.2.2">S</mi><mi id="alg1.17.17.m1.1.2.3">t</mi></msub><mrow id="alg1.17.17.m1.1.3"><mo stretchy="false" id="alg1.17.17.m1.1.3.1">(</mo><mi id="alg1.17.17.m1.1.3.2">R</mi><mrow id="alg1.17.17.m1.1.3.3"><mo stretchy="false" id="alg1.17.17.m1.1.3.3.1">(</mo><mi id="alg1.17.17.m1.1.1">i</mi><mo stretchy="false" id="alg1.17.17.m1.1.3.3.2">)</mo></mrow><mo stretchy="false" id="alg1.17.17.m1.1.3.4">)</mo></mrow><mo id="alg1.17.17.m1.1.4">=</mo><mi class="ltx_font_mathcaligraphic" id="alg1.17.17.m1.1.5">‚Ñ±</mi><mrow id="alg1.17.17.m1.1.6"><mo stretchy="false" id="alg1.17.17.m1.1.6.1">(</mo><mi class="ltx_font_mathcaligraphic" id="alg1.17.17.m1.1.6.2">ùíú</mi><mrow id="alg1.17.17.m1.1.6.3"><mo stretchy="false" id="alg1.17.17.m1.1.6.3.1">(</mo><mi id="alg1.17.17.m1.1.6.3.2">W</mi><mrow id="alg1.17.17.m1.1.6.3.3"><mo stretchy="false" id="alg1.17.17.m1.1.6.3.3.1">(</mo><mi id="alg1.17.17.m1.1.6.3.3.2">R</mi><mrow id="alg1.17.17.m1.1.6.3.3.3"><mo stretchy="false" id="alg1.17.17.m1.1.6.3.3.3.1">(</mo><mn id="alg1.17.17.m1.1.6.3.3.3.2">1</mn><mo lspace="0.278em" rspace="0.278em" id="alg1.17.17.m1.1.6.3.3.3.3">:</mo><mi id="alg1.17.17.m1.1.6.3.3.3.4">i</mi><mo stretchy="false" id="alg1.17.17.m1.1.6.3.3.3.5">)</mo></mrow><mo stretchy="false" id="alg1.17.17.m1.1.6.3.3.4">)</mo></mrow><mo stretchy="false" id="alg1.17.17.m1.1.6.3.4">)</mo></mrow><mo stretchy="false" id="alg1.17.17.m1.1.6.4">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.17.17.m1.1c">S_{t}(R(i))=\mathcal{F}(\mathcal{A}(W(R(1:i))))</annotation></semantics></math>;
</div>
<div id="alg1.18.18" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<math id="alg1.18.18.m1.6" class="ltx_Math" alttext="S_{t}(R(i))=S_{t}(R(i))-\sum_{j=1}^{i-1}S_{t}(R(j))" display="inline"><semantics id="alg1.18.18.m1.6a"><mrow id="alg1.18.18.m1.6.6" xref="alg1.18.18.m1.6.6.cmml"><mrow id="alg1.18.18.m1.4.4.1" xref="alg1.18.18.m1.4.4.1.cmml"><msub id="alg1.18.18.m1.4.4.1.3" xref="alg1.18.18.m1.4.4.1.3.cmml"><mi id="alg1.18.18.m1.4.4.1.3.2" xref="alg1.18.18.m1.4.4.1.3.2.cmml">S</mi><mi id="alg1.18.18.m1.4.4.1.3.3" xref="alg1.18.18.m1.4.4.1.3.3.cmml">t</mi></msub><mo lspace="0em" rspace="0em" id="alg1.18.18.m1.4.4.1.2" xref="alg1.18.18.m1.4.4.1.2.cmml">‚Äã</mo><mrow id="alg1.18.18.m1.4.4.1.1.1" xref="alg1.18.18.m1.4.4.1.1.1.1.cmml"><mo stretchy="false" id="alg1.18.18.m1.4.4.1.1.1.2" xref="alg1.18.18.m1.4.4.1.1.1.1.cmml">(</mo><mrow id="alg1.18.18.m1.4.4.1.1.1.1" xref="alg1.18.18.m1.4.4.1.1.1.1.cmml"><mi id="alg1.18.18.m1.4.4.1.1.1.1.2" xref="alg1.18.18.m1.4.4.1.1.1.1.2.cmml">R</mi><mo lspace="0em" rspace="0em" id="alg1.18.18.m1.4.4.1.1.1.1.1" xref="alg1.18.18.m1.4.4.1.1.1.1.1.cmml">‚Äã</mo><mrow id="alg1.18.18.m1.4.4.1.1.1.1.3.2" xref="alg1.18.18.m1.4.4.1.1.1.1.cmml"><mo stretchy="false" id="alg1.18.18.m1.4.4.1.1.1.1.3.2.1" xref="alg1.18.18.m1.4.4.1.1.1.1.cmml">(</mo><mi id="alg1.18.18.m1.1.1" xref="alg1.18.18.m1.1.1.cmml">i</mi><mo stretchy="false" id="alg1.18.18.m1.4.4.1.1.1.1.3.2.2" xref="alg1.18.18.m1.4.4.1.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="alg1.18.18.m1.4.4.1.1.1.3" xref="alg1.18.18.m1.4.4.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg1.18.18.m1.6.6.4" xref="alg1.18.18.m1.6.6.4.cmml">=</mo><mrow id="alg1.18.18.m1.6.6.3" xref="alg1.18.18.m1.6.6.3.cmml"><mrow id="alg1.18.18.m1.5.5.2.1" xref="alg1.18.18.m1.5.5.2.1.cmml"><msub id="alg1.18.18.m1.5.5.2.1.3" xref="alg1.18.18.m1.5.5.2.1.3.cmml"><mi id="alg1.18.18.m1.5.5.2.1.3.2" xref="alg1.18.18.m1.5.5.2.1.3.2.cmml">S</mi><mi id="alg1.18.18.m1.5.5.2.1.3.3" xref="alg1.18.18.m1.5.5.2.1.3.3.cmml">t</mi></msub><mo lspace="0em" rspace="0em" id="alg1.18.18.m1.5.5.2.1.2" xref="alg1.18.18.m1.5.5.2.1.2.cmml">‚Äã</mo><mrow id="alg1.18.18.m1.5.5.2.1.1.1" xref="alg1.18.18.m1.5.5.2.1.1.1.1.cmml"><mo stretchy="false" id="alg1.18.18.m1.5.5.2.1.1.1.2" xref="alg1.18.18.m1.5.5.2.1.1.1.1.cmml">(</mo><mrow id="alg1.18.18.m1.5.5.2.1.1.1.1" xref="alg1.18.18.m1.5.5.2.1.1.1.1.cmml"><mi id="alg1.18.18.m1.5.5.2.1.1.1.1.2" xref="alg1.18.18.m1.5.5.2.1.1.1.1.2.cmml">R</mi><mo lspace="0em" rspace="0em" id="alg1.18.18.m1.5.5.2.1.1.1.1.1" xref="alg1.18.18.m1.5.5.2.1.1.1.1.1.cmml">‚Äã</mo><mrow id="alg1.18.18.m1.5.5.2.1.1.1.1.3.2" xref="alg1.18.18.m1.5.5.2.1.1.1.1.cmml"><mo stretchy="false" id="alg1.18.18.m1.5.5.2.1.1.1.1.3.2.1" xref="alg1.18.18.m1.5.5.2.1.1.1.1.cmml">(</mo><mi id="alg1.18.18.m1.2.2" xref="alg1.18.18.m1.2.2.cmml">i</mi><mo stretchy="false" id="alg1.18.18.m1.5.5.2.1.1.1.1.3.2.2" xref="alg1.18.18.m1.5.5.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="alg1.18.18.m1.5.5.2.1.1.1.3" xref="alg1.18.18.m1.5.5.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo rspace="0.055em" id="alg1.18.18.m1.6.6.3.3" xref="alg1.18.18.m1.6.6.3.3.cmml">‚àí</mo><mrow id="alg1.18.18.m1.6.6.3.2" xref="alg1.18.18.m1.6.6.3.2.cmml"><msubsup id="alg1.18.18.m1.6.6.3.2.2" xref="alg1.18.18.m1.6.6.3.2.2.cmml"><mo id="alg1.18.18.m1.6.6.3.2.2.2.2" xref="alg1.18.18.m1.6.6.3.2.2.2.2.cmml">‚àë</mo><mrow id="alg1.18.18.m1.6.6.3.2.2.2.3" xref="alg1.18.18.m1.6.6.3.2.2.2.3.cmml"><mi id="alg1.18.18.m1.6.6.3.2.2.2.3.2" xref="alg1.18.18.m1.6.6.3.2.2.2.3.2.cmml">j</mi><mo id="alg1.18.18.m1.6.6.3.2.2.2.3.1" xref="alg1.18.18.m1.6.6.3.2.2.2.3.1.cmml">=</mo><mn id="alg1.18.18.m1.6.6.3.2.2.2.3.3" xref="alg1.18.18.m1.6.6.3.2.2.2.3.3.cmml">1</mn></mrow><mrow id="alg1.18.18.m1.6.6.3.2.2.3" xref="alg1.18.18.m1.6.6.3.2.2.3.cmml"><mi id="alg1.18.18.m1.6.6.3.2.2.3.2" xref="alg1.18.18.m1.6.6.3.2.2.3.2.cmml">i</mi><mo id="alg1.18.18.m1.6.6.3.2.2.3.1" xref="alg1.18.18.m1.6.6.3.2.2.3.1.cmml">‚àí</mo><mn id="alg1.18.18.m1.6.6.3.2.2.3.3" xref="alg1.18.18.m1.6.6.3.2.2.3.3.cmml">1</mn></mrow></msubsup><mrow id="alg1.18.18.m1.6.6.3.2.1" xref="alg1.18.18.m1.6.6.3.2.1.cmml"><msub id="alg1.18.18.m1.6.6.3.2.1.3" xref="alg1.18.18.m1.6.6.3.2.1.3.cmml"><mi id="alg1.18.18.m1.6.6.3.2.1.3.2" xref="alg1.18.18.m1.6.6.3.2.1.3.2.cmml">S</mi><mi id="alg1.18.18.m1.6.6.3.2.1.3.3" xref="alg1.18.18.m1.6.6.3.2.1.3.3.cmml">t</mi></msub><mo lspace="0em" rspace="0em" id="alg1.18.18.m1.6.6.3.2.1.2" xref="alg1.18.18.m1.6.6.3.2.1.2.cmml">‚Äã</mo><mrow id="alg1.18.18.m1.6.6.3.2.1.1.1" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.cmml"><mo stretchy="false" id="alg1.18.18.m1.6.6.3.2.1.1.1.2" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.cmml">(</mo><mrow id="alg1.18.18.m1.6.6.3.2.1.1.1.1" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.cmml"><mi id="alg1.18.18.m1.6.6.3.2.1.1.1.1.2" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.2.cmml">R</mi><mo lspace="0em" rspace="0em" id="alg1.18.18.m1.6.6.3.2.1.1.1.1.1" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.1.cmml">‚Äã</mo><mrow id="alg1.18.18.m1.6.6.3.2.1.1.1.1.3.2" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.cmml"><mo stretchy="false" id="alg1.18.18.m1.6.6.3.2.1.1.1.1.3.2.1" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.cmml">(</mo><mi id="alg1.18.18.m1.3.3" xref="alg1.18.18.m1.3.3.cmml">j</mi><mo stretchy="false" id="alg1.18.18.m1.6.6.3.2.1.1.1.1.3.2.2" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="alg1.18.18.m1.6.6.3.2.1.1.1.3" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.18.18.m1.6b"><apply id="alg1.18.18.m1.6.6.cmml" xref="alg1.18.18.m1.6.6"><eq id="alg1.18.18.m1.6.6.4.cmml" xref="alg1.18.18.m1.6.6.4"></eq><apply id="alg1.18.18.m1.4.4.1.cmml" xref="alg1.18.18.m1.4.4.1"><times id="alg1.18.18.m1.4.4.1.2.cmml" xref="alg1.18.18.m1.4.4.1.2"></times><apply id="alg1.18.18.m1.4.4.1.3.cmml" xref="alg1.18.18.m1.4.4.1.3"><csymbol cd="ambiguous" id="alg1.18.18.m1.4.4.1.3.1.cmml" xref="alg1.18.18.m1.4.4.1.3">subscript</csymbol><ci id="alg1.18.18.m1.4.4.1.3.2.cmml" xref="alg1.18.18.m1.4.4.1.3.2">ùëÜ</ci><ci id="alg1.18.18.m1.4.4.1.3.3.cmml" xref="alg1.18.18.m1.4.4.1.3.3">ùë°</ci></apply><apply id="alg1.18.18.m1.4.4.1.1.1.1.cmml" xref="alg1.18.18.m1.4.4.1.1.1"><times id="alg1.18.18.m1.4.4.1.1.1.1.1.cmml" xref="alg1.18.18.m1.4.4.1.1.1.1.1"></times><ci id="alg1.18.18.m1.4.4.1.1.1.1.2.cmml" xref="alg1.18.18.m1.4.4.1.1.1.1.2">ùëÖ</ci><ci id="alg1.18.18.m1.1.1.cmml" xref="alg1.18.18.m1.1.1">ùëñ</ci></apply></apply><apply id="alg1.18.18.m1.6.6.3.cmml" xref="alg1.18.18.m1.6.6.3"><minus id="alg1.18.18.m1.6.6.3.3.cmml" xref="alg1.18.18.m1.6.6.3.3"></minus><apply id="alg1.18.18.m1.5.5.2.1.cmml" xref="alg1.18.18.m1.5.5.2.1"><times id="alg1.18.18.m1.5.5.2.1.2.cmml" xref="alg1.18.18.m1.5.5.2.1.2"></times><apply id="alg1.18.18.m1.5.5.2.1.3.cmml" xref="alg1.18.18.m1.5.5.2.1.3"><csymbol cd="ambiguous" id="alg1.18.18.m1.5.5.2.1.3.1.cmml" xref="alg1.18.18.m1.5.5.2.1.3">subscript</csymbol><ci id="alg1.18.18.m1.5.5.2.1.3.2.cmml" xref="alg1.18.18.m1.5.5.2.1.3.2">ùëÜ</ci><ci id="alg1.18.18.m1.5.5.2.1.3.3.cmml" xref="alg1.18.18.m1.5.5.2.1.3.3">ùë°</ci></apply><apply id="alg1.18.18.m1.5.5.2.1.1.1.1.cmml" xref="alg1.18.18.m1.5.5.2.1.1.1"><times id="alg1.18.18.m1.5.5.2.1.1.1.1.1.cmml" xref="alg1.18.18.m1.5.5.2.1.1.1.1.1"></times><ci id="alg1.18.18.m1.5.5.2.1.1.1.1.2.cmml" xref="alg1.18.18.m1.5.5.2.1.1.1.1.2">ùëÖ</ci><ci id="alg1.18.18.m1.2.2.cmml" xref="alg1.18.18.m1.2.2">ùëñ</ci></apply></apply><apply id="alg1.18.18.m1.6.6.3.2.cmml" xref="alg1.18.18.m1.6.6.3.2"><apply id="alg1.18.18.m1.6.6.3.2.2.cmml" xref="alg1.18.18.m1.6.6.3.2.2"><csymbol cd="ambiguous" id="alg1.18.18.m1.6.6.3.2.2.1.cmml" xref="alg1.18.18.m1.6.6.3.2.2">superscript</csymbol><apply id="alg1.18.18.m1.6.6.3.2.2.2.cmml" xref="alg1.18.18.m1.6.6.3.2.2"><csymbol cd="ambiguous" id="alg1.18.18.m1.6.6.3.2.2.2.1.cmml" xref="alg1.18.18.m1.6.6.3.2.2">subscript</csymbol><sum id="alg1.18.18.m1.6.6.3.2.2.2.2.cmml" xref="alg1.18.18.m1.6.6.3.2.2.2.2"></sum><apply id="alg1.18.18.m1.6.6.3.2.2.2.3.cmml" xref="alg1.18.18.m1.6.6.3.2.2.2.3"><eq id="alg1.18.18.m1.6.6.3.2.2.2.3.1.cmml" xref="alg1.18.18.m1.6.6.3.2.2.2.3.1"></eq><ci id="alg1.18.18.m1.6.6.3.2.2.2.3.2.cmml" xref="alg1.18.18.m1.6.6.3.2.2.2.3.2">ùëó</ci><cn type="integer" id="alg1.18.18.m1.6.6.3.2.2.2.3.3.cmml" xref="alg1.18.18.m1.6.6.3.2.2.2.3.3">1</cn></apply></apply><apply id="alg1.18.18.m1.6.6.3.2.2.3.cmml" xref="alg1.18.18.m1.6.6.3.2.2.3"><minus id="alg1.18.18.m1.6.6.3.2.2.3.1.cmml" xref="alg1.18.18.m1.6.6.3.2.2.3.1"></minus><ci id="alg1.18.18.m1.6.6.3.2.2.3.2.cmml" xref="alg1.18.18.m1.6.6.3.2.2.3.2">ùëñ</ci><cn type="integer" id="alg1.18.18.m1.6.6.3.2.2.3.3.cmml" xref="alg1.18.18.m1.6.6.3.2.2.3.3">1</cn></apply></apply><apply id="alg1.18.18.m1.6.6.3.2.1.cmml" xref="alg1.18.18.m1.6.6.3.2.1"><times id="alg1.18.18.m1.6.6.3.2.1.2.cmml" xref="alg1.18.18.m1.6.6.3.2.1.2"></times><apply id="alg1.18.18.m1.6.6.3.2.1.3.cmml" xref="alg1.18.18.m1.6.6.3.2.1.3"><csymbol cd="ambiguous" id="alg1.18.18.m1.6.6.3.2.1.3.1.cmml" xref="alg1.18.18.m1.6.6.3.2.1.3">subscript</csymbol><ci id="alg1.18.18.m1.6.6.3.2.1.3.2.cmml" xref="alg1.18.18.m1.6.6.3.2.1.3.2">ùëÜ</ci><ci id="alg1.18.18.m1.6.6.3.2.1.3.3.cmml" xref="alg1.18.18.m1.6.6.3.2.1.3.3">ùë°</ci></apply><apply id="alg1.18.18.m1.6.6.3.2.1.1.1.1.cmml" xref="alg1.18.18.m1.6.6.3.2.1.1.1"><times id="alg1.18.18.m1.6.6.3.2.1.1.1.1.1.cmml" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.1"></times><ci id="alg1.18.18.m1.6.6.3.2.1.1.1.1.2.cmml" xref="alg1.18.18.m1.6.6.3.2.1.1.1.1.2">ùëÖ</ci><ci id="alg1.18.18.m1.3.3.cmml" xref="alg1.18.18.m1.3.3">ùëó</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.18.18.m1.6c">S_{t}(R(i))=S_{t}(R(i))-\sum_{j=1}^{i-1}S_{t}(R(j))</annotation></semantics></math>;
</div>
<div id="alg1.31.34" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†

</div>
<div id="alg1.31.35" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end for
</div>
<div id="alg1.19.19" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†<math id="alg1.19.19.m1.1" class="ltx_Math" alttext="S=\frac{S\times time+S_{t}}{time+1}" display="inline"><semantics id="alg1.19.19.m1.1a"><mrow id="alg1.19.19.m1.1.1" xref="alg1.19.19.m1.1.1.cmml"><mi id="alg1.19.19.m1.1.1.2" xref="alg1.19.19.m1.1.1.2.cmml">S</mi><mo id="alg1.19.19.m1.1.1.1" xref="alg1.19.19.m1.1.1.1.cmml">=</mo><mfrac id="alg1.19.19.m1.1.1.3" xref="alg1.19.19.m1.1.1.3.cmml"><mrow id="alg1.19.19.m1.1.1.3.2" xref="alg1.19.19.m1.1.1.3.2.cmml"><mrow id="alg1.19.19.m1.1.1.3.2.2" xref="alg1.19.19.m1.1.1.3.2.2.cmml"><mrow id="alg1.19.19.m1.1.1.3.2.2.2" xref="alg1.19.19.m1.1.1.3.2.2.2.cmml"><mi id="alg1.19.19.m1.1.1.3.2.2.2.2" xref="alg1.19.19.m1.1.1.3.2.2.2.2.cmml">S</mi><mo lspace="0.222em" rspace="0.222em" id="alg1.19.19.m1.1.1.3.2.2.2.1" xref="alg1.19.19.m1.1.1.3.2.2.2.1.cmml">√ó</mo><mi id="alg1.19.19.m1.1.1.3.2.2.2.3" xref="alg1.19.19.m1.1.1.3.2.2.2.3.cmml">t</mi></mrow><mo lspace="0em" rspace="0em" id="alg1.19.19.m1.1.1.3.2.2.1" xref="alg1.19.19.m1.1.1.3.2.2.1.cmml">‚Äã</mo><mi id="alg1.19.19.m1.1.1.3.2.2.3" xref="alg1.19.19.m1.1.1.3.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.19.19.m1.1.1.3.2.2.1a" xref="alg1.19.19.m1.1.1.3.2.2.1.cmml">‚Äã</mo><mi id="alg1.19.19.m1.1.1.3.2.2.4" xref="alg1.19.19.m1.1.1.3.2.2.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.19.19.m1.1.1.3.2.2.1b" xref="alg1.19.19.m1.1.1.3.2.2.1.cmml">‚Äã</mo><mi id="alg1.19.19.m1.1.1.3.2.2.5" xref="alg1.19.19.m1.1.1.3.2.2.5.cmml">e</mi></mrow><mo id="alg1.19.19.m1.1.1.3.2.1" xref="alg1.19.19.m1.1.1.3.2.1.cmml">+</mo><msub id="alg1.19.19.m1.1.1.3.2.3" xref="alg1.19.19.m1.1.1.3.2.3.cmml"><mi id="alg1.19.19.m1.1.1.3.2.3.2" xref="alg1.19.19.m1.1.1.3.2.3.2.cmml">S</mi><mi id="alg1.19.19.m1.1.1.3.2.3.3" xref="alg1.19.19.m1.1.1.3.2.3.3.cmml">t</mi></msub></mrow><mrow id="alg1.19.19.m1.1.1.3.3" xref="alg1.19.19.m1.1.1.3.3.cmml"><mrow id="alg1.19.19.m1.1.1.3.3.2" xref="alg1.19.19.m1.1.1.3.3.2.cmml"><mi id="alg1.19.19.m1.1.1.3.3.2.2" xref="alg1.19.19.m1.1.1.3.3.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.19.19.m1.1.1.3.3.2.1" xref="alg1.19.19.m1.1.1.3.3.2.1.cmml">‚Äã</mo><mi id="alg1.19.19.m1.1.1.3.3.2.3" xref="alg1.19.19.m1.1.1.3.3.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.19.19.m1.1.1.3.3.2.1a" xref="alg1.19.19.m1.1.1.3.3.2.1.cmml">‚Äã</mo><mi id="alg1.19.19.m1.1.1.3.3.2.4" xref="alg1.19.19.m1.1.1.3.3.2.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.19.19.m1.1.1.3.3.2.1b" xref="alg1.19.19.m1.1.1.3.3.2.1.cmml">‚Äã</mo><mi id="alg1.19.19.m1.1.1.3.3.2.5" xref="alg1.19.19.m1.1.1.3.3.2.5.cmml">e</mi></mrow><mo id="alg1.19.19.m1.1.1.3.3.1" xref="alg1.19.19.m1.1.1.3.3.1.cmml">+</mo><mn id="alg1.19.19.m1.1.1.3.3.3" xref="alg1.19.19.m1.1.1.3.3.3.cmml">1</mn></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="alg1.19.19.m1.1b"><apply id="alg1.19.19.m1.1.1.cmml" xref="alg1.19.19.m1.1.1"><eq id="alg1.19.19.m1.1.1.1.cmml" xref="alg1.19.19.m1.1.1.1"></eq><ci id="alg1.19.19.m1.1.1.2.cmml" xref="alg1.19.19.m1.1.1.2">ùëÜ</ci><apply id="alg1.19.19.m1.1.1.3.cmml" xref="alg1.19.19.m1.1.1.3"><divide id="alg1.19.19.m1.1.1.3.1.cmml" xref="alg1.19.19.m1.1.1.3"></divide><apply id="alg1.19.19.m1.1.1.3.2.cmml" xref="alg1.19.19.m1.1.1.3.2"><plus id="alg1.19.19.m1.1.1.3.2.1.cmml" xref="alg1.19.19.m1.1.1.3.2.1"></plus><apply id="alg1.19.19.m1.1.1.3.2.2.cmml" xref="alg1.19.19.m1.1.1.3.2.2"><times id="alg1.19.19.m1.1.1.3.2.2.1.cmml" xref="alg1.19.19.m1.1.1.3.2.2.1"></times><apply id="alg1.19.19.m1.1.1.3.2.2.2.cmml" xref="alg1.19.19.m1.1.1.3.2.2.2"><times id="alg1.19.19.m1.1.1.3.2.2.2.1.cmml" xref="alg1.19.19.m1.1.1.3.2.2.2.1"></times><ci id="alg1.19.19.m1.1.1.3.2.2.2.2.cmml" xref="alg1.19.19.m1.1.1.3.2.2.2.2">ùëÜ</ci><ci id="alg1.19.19.m1.1.1.3.2.2.2.3.cmml" xref="alg1.19.19.m1.1.1.3.2.2.2.3">ùë°</ci></apply><ci id="alg1.19.19.m1.1.1.3.2.2.3.cmml" xref="alg1.19.19.m1.1.1.3.2.2.3">ùëñ</ci><ci id="alg1.19.19.m1.1.1.3.2.2.4.cmml" xref="alg1.19.19.m1.1.1.3.2.2.4">ùëö</ci><ci id="alg1.19.19.m1.1.1.3.2.2.5.cmml" xref="alg1.19.19.m1.1.1.3.2.2.5">ùëí</ci></apply><apply id="alg1.19.19.m1.1.1.3.2.3.cmml" xref="alg1.19.19.m1.1.1.3.2.3"><csymbol cd="ambiguous" id="alg1.19.19.m1.1.1.3.2.3.1.cmml" xref="alg1.19.19.m1.1.1.3.2.3">subscript</csymbol><ci id="alg1.19.19.m1.1.1.3.2.3.2.cmml" xref="alg1.19.19.m1.1.1.3.2.3.2">ùëÜ</ci><ci id="alg1.19.19.m1.1.1.3.2.3.3.cmml" xref="alg1.19.19.m1.1.1.3.2.3.3">ùë°</ci></apply></apply><apply id="alg1.19.19.m1.1.1.3.3.cmml" xref="alg1.19.19.m1.1.1.3.3"><plus id="alg1.19.19.m1.1.1.3.3.1.cmml" xref="alg1.19.19.m1.1.1.3.3.1"></plus><apply id="alg1.19.19.m1.1.1.3.3.2.cmml" xref="alg1.19.19.m1.1.1.3.3.2"><times id="alg1.19.19.m1.1.1.3.3.2.1.cmml" xref="alg1.19.19.m1.1.1.3.3.2.1"></times><ci id="alg1.19.19.m1.1.1.3.3.2.2.cmml" xref="alg1.19.19.m1.1.1.3.3.2.2">ùë°</ci><ci id="alg1.19.19.m1.1.1.3.3.2.3.cmml" xref="alg1.19.19.m1.1.1.3.3.2.3">ùëñ</ci><ci id="alg1.19.19.m1.1.1.3.3.2.4.cmml" xref="alg1.19.19.m1.1.1.3.3.2.4">ùëö</ci><ci id="alg1.19.19.m1.1.1.3.3.2.5.cmml" xref="alg1.19.19.m1.1.1.3.3.2.5">ùëí</ci></apply><cn type="integer" id="alg1.19.19.m1.1.1.3.3.3.cmml" xref="alg1.19.19.m1.1.1.3.3.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.19.19.m1.1c">S=\frac{S\times time+S_{t}}{time+1}</annotation></semantics></math>;
</div>
<div id="alg1.31.36" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
time=time+1;
</div>
<div id="alg1.20.20" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
Broadcast <math id="alg1.20.20.m1.1" class="ltx_Math" alttext="S" display="inline"><semantics id="alg1.20.20.m1.1a"><mi id="alg1.20.20.m1.1.1" xref="alg1.20.20.m1.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="alg1.20.20.m1.1b"><ci id="alg1.20.20.m1.1.1.cmml" xref="alg1.20.20.m1.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.20.20.m1.1c">S</annotation></semantics></math> and time;
</div>
<div id="alg1.31.37" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†

</div>
<div id="alg1.31.38" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">16</span> end while
</div>
<div id="alg1.21.21" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">17</span><span id="alg1.21.21.2" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg1.21.21.1" class="ltx_emph ltx_font_italic">Receive a new <math id="alg1.21.21.1.m1.1" class="ltx_Math" alttext="S" display="inline"><semantics id="alg1.21.21.1.m1.1a"><mi id="alg1.21.21.1.m1.1.1" xref="alg1.21.21.1.m1.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="alg1.21.21.1.m1.1b"><ci id="alg1.21.21.1.m1.1.1.cmml" xref="alg1.21.21.1.m1.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.21.21.1.m1.1c">S</annotation></semantics></math></em>¬†<span id="alg1.21.21.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg1.23.23" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">18</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†Average the Received <math id="alg1.22.22.m1.1" class="ltx_Math" alttext="S" display="inline"><semantics id="alg1.22.22.m1.1a"><mi id="alg1.22.22.m1.1.1" xref="alg1.22.22.m1.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="alg1.22.22.m1.1b"><ci id="alg1.22.22.m1.1.1.cmml" xref="alg1.22.22.m1.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.22.22.m1.1c">S</annotation></semantics></math> to <math id="alg1.23.23.m2.1" class="ltx_Math" alttext="\overline{S}=\frac{\sum time\times S}{\sum time}" display="inline"><semantics id="alg1.23.23.m2.1a"><mrow id="alg1.23.23.m2.1.1" xref="alg1.23.23.m2.1.1.cmml"><mover accent="true" id="alg1.23.23.m2.1.1.2" xref="alg1.23.23.m2.1.1.2.cmml"><mi id="alg1.23.23.m2.1.1.2.2" xref="alg1.23.23.m2.1.1.2.2.cmml">S</mi><mo id="alg1.23.23.m2.1.1.2.1" xref="alg1.23.23.m2.1.1.2.1.cmml">¬Ø</mo></mover><mo id="alg1.23.23.m2.1.1.1" xref="alg1.23.23.m2.1.1.1.cmml">=</mo><mfrac id="alg1.23.23.m2.1.1.3" xref="alg1.23.23.m2.1.1.3.cmml"><mstyle scriptlevel="-1" id="alg1.23.23.m2.1.1.3.2" xref="alg1.23.23.m2.1.1.3.2.cmml"><mrow id="alg1.23.23.m2.1.1.3.2a" xref="alg1.23.23.m2.1.1.3.2.cmml"><mo id="alg1.23.23.m2.1.1.3.2.1" xref="alg1.23.23.m2.1.1.3.2.1.cmml">‚àë</mo><mrow id="alg1.23.23.m2.1.1.3.2.2" xref="alg1.23.23.m2.1.1.3.2.2.cmml"><mrow id="alg1.23.23.m2.1.1.3.2.2.2" xref="alg1.23.23.m2.1.1.3.2.2.2.cmml"><mi id="alg1.23.23.m2.1.1.3.2.2.2.2" xref="alg1.23.23.m2.1.1.3.2.2.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.23.23.m2.1.1.3.2.2.2.1" xref="alg1.23.23.m2.1.1.3.2.2.2.1.cmml">‚Äã</mo><mi id="alg1.23.23.m2.1.1.3.2.2.2.3" xref="alg1.23.23.m2.1.1.3.2.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.23.23.m2.1.1.3.2.2.2.1a" xref="alg1.23.23.m2.1.1.3.2.2.2.1.cmml">‚Äã</mo><mi id="alg1.23.23.m2.1.1.3.2.2.2.4" xref="alg1.23.23.m2.1.1.3.2.2.2.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.23.23.m2.1.1.3.2.2.2.1b" xref="alg1.23.23.m2.1.1.3.2.2.2.1.cmml">‚Äã</mo><mi id="alg1.23.23.m2.1.1.3.2.2.2.5" xref="alg1.23.23.m2.1.1.3.2.2.2.5.cmml">e</mi></mrow><mo lspace="0.222em" rspace="0.222em" id="alg1.23.23.m2.1.1.3.2.2.1" xref="alg1.23.23.m2.1.1.3.2.2.1.cmml">√ó</mo><mi id="alg1.23.23.m2.1.1.3.2.2.3" xref="alg1.23.23.m2.1.1.3.2.2.3.cmml">S</mi></mrow></mrow></mstyle><mstyle scriptlevel="-1" id="alg1.23.23.m2.1.1.3.3" xref="alg1.23.23.m2.1.1.3.3.cmml"><mrow id="alg1.23.23.m2.1.1.3.3a" xref="alg1.23.23.m2.1.1.3.3.cmml"><mo id="alg1.23.23.m2.1.1.3.3.1" xref="alg1.23.23.m2.1.1.3.3.1.cmml">‚àë</mo><mrow id="alg1.23.23.m2.1.1.3.3.2" xref="alg1.23.23.m2.1.1.3.3.2.cmml"><mi id="alg1.23.23.m2.1.1.3.3.2.2" xref="alg1.23.23.m2.1.1.3.3.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg1.23.23.m2.1.1.3.3.2.1" xref="alg1.23.23.m2.1.1.3.3.2.1.cmml">‚Äã</mo><mi id="alg1.23.23.m2.1.1.3.3.2.3" xref="alg1.23.23.m2.1.1.3.3.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg1.23.23.m2.1.1.3.3.2.1a" xref="alg1.23.23.m2.1.1.3.3.2.1.cmml">‚Äã</mo><mi id="alg1.23.23.m2.1.1.3.3.2.4" xref="alg1.23.23.m2.1.1.3.3.2.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg1.23.23.m2.1.1.3.3.2.1b" xref="alg1.23.23.m2.1.1.3.3.2.1.cmml">‚Äã</mo><mi id="alg1.23.23.m2.1.1.3.3.2.5" xref="alg1.23.23.m2.1.1.3.3.2.5.cmml">e</mi></mrow></mrow></mstyle></mfrac></mrow><annotation-xml encoding="MathML-Content" id="alg1.23.23.m2.1b"><apply id="alg1.23.23.m2.1.1.cmml" xref="alg1.23.23.m2.1.1"><eq id="alg1.23.23.m2.1.1.1.cmml" xref="alg1.23.23.m2.1.1.1"></eq><apply id="alg1.23.23.m2.1.1.2.cmml" xref="alg1.23.23.m2.1.1.2"><ci id="alg1.23.23.m2.1.1.2.1.cmml" xref="alg1.23.23.m2.1.1.2.1">¬Ø</ci><ci id="alg1.23.23.m2.1.1.2.2.cmml" xref="alg1.23.23.m2.1.1.2.2">ùëÜ</ci></apply><apply id="alg1.23.23.m2.1.1.3.cmml" xref="alg1.23.23.m2.1.1.3"><divide id="alg1.23.23.m2.1.1.3.1.cmml" xref="alg1.23.23.m2.1.1.3"></divide><apply id="alg1.23.23.m2.1.1.3.2.cmml" xref="alg1.23.23.m2.1.1.3.2"><sum id="alg1.23.23.m2.1.1.3.2.1.cmml" xref="alg1.23.23.m2.1.1.3.2.1"></sum><apply id="alg1.23.23.m2.1.1.3.2.2.cmml" xref="alg1.23.23.m2.1.1.3.2.2"><times id="alg1.23.23.m2.1.1.3.2.2.1.cmml" xref="alg1.23.23.m2.1.1.3.2.2.1"></times><apply id="alg1.23.23.m2.1.1.3.2.2.2.cmml" xref="alg1.23.23.m2.1.1.3.2.2.2"><times id="alg1.23.23.m2.1.1.3.2.2.2.1.cmml" xref="alg1.23.23.m2.1.1.3.2.2.2.1"></times><ci id="alg1.23.23.m2.1.1.3.2.2.2.2.cmml" xref="alg1.23.23.m2.1.1.3.2.2.2.2">ùë°</ci><ci id="alg1.23.23.m2.1.1.3.2.2.2.3.cmml" xref="alg1.23.23.m2.1.1.3.2.2.2.3">ùëñ</ci><ci id="alg1.23.23.m2.1.1.3.2.2.2.4.cmml" xref="alg1.23.23.m2.1.1.3.2.2.2.4">ùëö</ci><ci id="alg1.23.23.m2.1.1.3.2.2.2.5.cmml" xref="alg1.23.23.m2.1.1.3.2.2.2.5">ùëí</ci></apply><ci id="alg1.23.23.m2.1.1.3.2.2.3.cmml" xref="alg1.23.23.m2.1.1.3.2.2.3">ùëÜ</ci></apply></apply><apply id="alg1.23.23.m2.1.1.3.3.cmml" xref="alg1.23.23.m2.1.1.3.3"><sum id="alg1.23.23.m2.1.1.3.3.1.cmml" xref="alg1.23.23.m2.1.1.3.3.1"></sum><apply id="alg1.23.23.m2.1.1.3.3.2.cmml" xref="alg1.23.23.m2.1.1.3.3.2"><times id="alg1.23.23.m2.1.1.3.3.2.1.cmml" xref="alg1.23.23.m2.1.1.3.3.2.1"></times><ci id="alg1.23.23.m2.1.1.3.3.2.2.cmml" xref="alg1.23.23.m2.1.1.3.3.2.2">ùë°</ci><ci id="alg1.23.23.m2.1.1.3.3.2.3.cmml" xref="alg1.23.23.m2.1.1.3.3.2.3">ùëñ</ci><ci id="alg1.23.23.m2.1.1.3.3.2.4.cmml" xref="alg1.23.23.m2.1.1.3.3.2.4">ùëö</ci><ci id="alg1.23.23.m2.1.1.3.3.2.5.cmml" xref="alg1.23.23.m2.1.1.3.3.2.5">ùëí</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.23.23.m2.1c">\overline{S}=\frac{\sum time\times S}{\sum time}</annotation></semantics></math>;
</div>
<div id="alg1.24.24" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">19</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg1.24.24.2" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg1.24.24.1" class="ltx_emph ltx_font_italic"><math id="alg1.24.24.1.m1.1" class="ltx_Math" alttext="\|S-\overline{S}\|_{p}\leq D" display="inline"><semantics id="alg1.24.24.1.m1.1a"><mrow id="alg1.24.24.1.m1.1.1" xref="alg1.24.24.1.m1.1.1.cmml"><msub id="alg1.24.24.1.m1.1.1.1" xref="alg1.24.24.1.m1.1.1.1.cmml"><mrow id="alg1.24.24.1.m1.1.1.1.1.1" xref="alg1.24.24.1.m1.1.1.1.1.2.cmml"><mo stretchy="false" id="alg1.24.24.1.m1.1.1.1.1.1.2" xref="alg1.24.24.1.m1.1.1.1.1.2.1.cmml">‚Äñ</mo><mrow id="alg1.24.24.1.m1.1.1.1.1.1.1" xref="alg1.24.24.1.m1.1.1.1.1.1.1.cmml"><mi id="alg1.24.24.1.m1.1.1.1.1.1.1.2" xref="alg1.24.24.1.m1.1.1.1.1.1.1.2.cmml">S</mi><mo id="alg1.24.24.1.m1.1.1.1.1.1.1.1" xref="alg1.24.24.1.m1.1.1.1.1.1.1.1.cmml">‚àí</mo><mover accent="true" id="alg1.24.24.1.m1.1.1.1.1.1.1.3" xref="alg1.24.24.1.m1.1.1.1.1.1.1.3.cmml"><mi id="alg1.24.24.1.m1.1.1.1.1.1.1.3.2" xref="alg1.24.24.1.m1.1.1.1.1.1.1.3.2.cmml">S</mi><mo id="alg1.24.24.1.m1.1.1.1.1.1.1.3.1" xref="alg1.24.24.1.m1.1.1.1.1.1.1.3.1.cmml">¬Ø</mo></mover></mrow><mo stretchy="false" id="alg1.24.24.1.m1.1.1.1.1.1.3" xref="alg1.24.24.1.m1.1.1.1.1.2.1.cmml">‚Äñ</mo></mrow><mi id="alg1.24.24.1.m1.1.1.1.3" xref="alg1.24.24.1.m1.1.1.1.3.cmml">p</mi></msub><mo id="alg1.24.24.1.m1.1.1.2" xref="alg1.24.24.1.m1.1.1.2.cmml">‚â§</mo><mi id="alg1.24.24.1.m1.1.1.3" xref="alg1.24.24.1.m1.1.1.3.cmml">D</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.24.24.1.m1.1b"><apply id="alg1.24.24.1.m1.1.1.cmml" xref="alg1.24.24.1.m1.1.1"><leq id="alg1.24.24.1.m1.1.1.2.cmml" xref="alg1.24.24.1.m1.1.1.2"></leq><apply id="alg1.24.24.1.m1.1.1.1.cmml" xref="alg1.24.24.1.m1.1.1.1"><csymbol cd="ambiguous" id="alg1.24.24.1.m1.1.1.1.2.cmml" xref="alg1.24.24.1.m1.1.1.1">subscript</csymbol><apply id="alg1.24.24.1.m1.1.1.1.1.2.cmml" xref="alg1.24.24.1.m1.1.1.1.1.1"><csymbol cd="latexml" id="alg1.24.24.1.m1.1.1.1.1.2.1.cmml" xref="alg1.24.24.1.m1.1.1.1.1.1.2">norm</csymbol><apply id="alg1.24.24.1.m1.1.1.1.1.1.1.cmml" xref="alg1.24.24.1.m1.1.1.1.1.1.1"><minus id="alg1.24.24.1.m1.1.1.1.1.1.1.1.cmml" xref="alg1.24.24.1.m1.1.1.1.1.1.1.1"></minus><ci id="alg1.24.24.1.m1.1.1.1.1.1.1.2.cmml" xref="alg1.24.24.1.m1.1.1.1.1.1.1.2">ùëÜ</ci><apply id="alg1.24.24.1.m1.1.1.1.1.1.1.3.cmml" xref="alg1.24.24.1.m1.1.1.1.1.1.1.3"><ci id="alg1.24.24.1.m1.1.1.1.1.1.1.3.1.cmml" xref="alg1.24.24.1.m1.1.1.1.1.1.1.3.1">¬Ø</ci><ci id="alg1.24.24.1.m1.1.1.1.1.1.1.3.2.cmml" xref="alg1.24.24.1.m1.1.1.1.1.1.1.3.2">ùëÜ</ci></apply></apply></apply><ci id="alg1.24.24.1.m1.1.1.1.3.cmml" xref="alg1.24.24.1.m1.1.1.1.3">ùëù</ci></apply><ci id="alg1.24.24.1.m1.1.1.3.cmml" xref="alg1.24.24.1.m1.1.1.3">ùê∑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.24.24.1.m1.1c">\|S-\overline{S}\|_{p}\leq D</annotation></semantics></math></em>¬†<span id="alg1.24.24.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg1.25.25" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">20</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†Create a new block <math id="alg1.25.25.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.25.25.m1.1a"><mrow id="alg1.25.25.m1.1.1" xref="alg1.25.25.m1.1.1.cmml"><mi id="alg1.25.25.m1.1.1.2" xref="alg1.25.25.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.25.25.m1.1.1.1" xref="alg1.25.25.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.25.25.m1.1.1.3" xref="alg1.25.25.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.25.25.m1.1.1.1a" xref="alg1.25.25.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.25.25.m1.1.1.4" xref="alg1.25.25.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.25.25.m1.1b"><apply id="alg1.25.25.m1.1.1.cmml" xref="alg1.25.25.m1.1.1"><times id="alg1.25.25.m1.1.1.1.cmml" xref="alg1.25.25.m1.1.1.1"></times><ci id="alg1.25.25.m1.1.1.2.cmml" xref="alg1.25.25.m1.1.1.2">ùêµ</ci><ci id="alg1.25.25.m1.1.1.3.cmml" xref="alg1.25.25.m1.1.1.3">ùëô</ci><ci id="alg1.25.25.m1.1.1.4.cmml" xref="alg1.25.25.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.25.25.m1.1c">Blk</annotation></semantics></math> after longest chain;
</div>
<div id="alg1.26.26" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">21</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
Broadcast <math id="alg1.26.26.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.26.26.m1.1a"><mrow id="alg1.26.26.m1.1.1" xref="alg1.26.26.m1.1.1.cmml"><mi id="alg1.26.26.m1.1.1.2" xref="alg1.26.26.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.26.26.m1.1.1.1" xref="alg1.26.26.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.26.26.m1.1.1.3" xref="alg1.26.26.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.26.26.m1.1.1.1a" xref="alg1.26.26.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.26.26.m1.1.1.4" xref="alg1.26.26.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.26.26.m1.1b"><apply id="alg1.26.26.m1.1.1.cmml" xref="alg1.26.26.m1.1.1"><times id="alg1.26.26.m1.1.1.1.cmml" xref="alg1.26.26.m1.1.1.1"></times><ci id="alg1.26.26.m1.1.1.2.cmml" xref="alg1.26.26.m1.1.1.2">ùêµ</ci><ci id="alg1.26.26.m1.1.1.3.cmml" xref="alg1.26.26.m1.1.1.3">ùëô</ci><ci id="alg1.26.26.m1.1.1.4.cmml" xref="alg1.26.26.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.26.26.m1.1c">Blk</annotation></semantics></math>;
</div>
<div id="alg1.27.27" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">22</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg1.27.27.1" class="ltx_text ltx_font_bold">return</span> <math id="alg1.27.27.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.27.27.m1.1a"><mrow id="alg1.27.27.m1.1.1" xref="alg1.27.27.m1.1.1.cmml"><mi id="alg1.27.27.m1.1.1.2" xref="alg1.27.27.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.27.27.m1.1.1.1" xref="alg1.27.27.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.27.27.m1.1.1.3" xref="alg1.27.27.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.27.27.m1.1.1.1a" xref="alg1.27.27.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.27.27.m1.1.1.4" xref="alg1.27.27.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.27.27.m1.1b"><apply id="alg1.27.27.m1.1.1.cmml" xref="alg1.27.27.m1.1.1"><times id="alg1.27.27.m1.1.1.1.cmml" xref="alg1.27.27.m1.1.1.1"></times><ci id="alg1.27.27.m1.1.1.2.cmml" xref="alg1.27.27.m1.1.1.2">ùêµ</ci><ci id="alg1.27.27.m1.1.1.3.cmml" xref="alg1.27.27.m1.1.1.3">ùëô</ci><ci id="alg1.27.27.m1.1.1.4.cmml" xref="alg1.27.27.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.27.27.m1.1c">Blk</annotation></semantics></math>;
</div>
<div id="alg1.31.39" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">23</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end if
</div>
<div id="alg1.31.40" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">24</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
</div>
<div id="alg1.31.41" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">25</span> end if
</div>
<div id="alg1.28.28" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">26</span><span id="alg1.28.28.2" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg1.28.28.1" class="ltx_emph ltx_font_italic">Receive a new <math id="alg1.28.28.1.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.28.28.1.m1.1a"><mrow id="alg1.28.28.1.m1.1.1" xref="alg1.28.28.1.m1.1.1.cmml"><mi id="alg1.28.28.1.m1.1.1.2" xref="alg1.28.28.1.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.28.28.1.m1.1.1.1" xref="alg1.28.28.1.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.28.28.1.m1.1.1.3" xref="alg1.28.28.1.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.28.28.1.m1.1.1.1a" xref="alg1.28.28.1.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.28.28.1.m1.1.1.4" xref="alg1.28.28.1.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.28.28.1.m1.1b"><apply id="alg1.28.28.1.m1.1.1.cmml" xref="alg1.28.28.1.m1.1.1"><times id="alg1.28.28.1.m1.1.1.1.cmml" xref="alg1.28.28.1.m1.1.1.1"></times><ci id="alg1.28.28.1.m1.1.1.2.cmml" xref="alg1.28.28.1.m1.1.1.2">ùêµ</ci><ci id="alg1.28.28.1.m1.1.1.3.cmml" xref="alg1.28.28.1.m1.1.1.3">ùëô</ci><ci id="alg1.28.28.1.m1.1.1.4.cmml" xref="alg1.28.28.1.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.28.28.1.m1.1c">Blk</annotation></semantics></math></em>¬†<span id="alg1.28.28.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg1.29.29" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">27</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg1.29.29.2" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg1.29.29.1" class="ltx_emph ltx_font_italic">VerifyBlock(<math id="alg1.29.29.1.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.29.29.1.m1.1a"><mrow id="alg1.29.29.1.m1.1.1" xref="alg1.29.29.1.m1.1.1.cmml"><mi id="alg1.29.29.1.m1.1.1.2" xref="alg1.29.29.1.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.29.29.1.m1.1.1.1" xref="alg1.29.29.1.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.29.29.1.m1.1.1.3" xref="alg1.29.29.1.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.29.29.1.m1.1.1.1a" xref="alg1.29.29.1.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.29.29.1.m1.1.1.4" xref="alg1.29.29.1.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.29.29.1.m1.1b"><apply id="alg1.29.29.1.m1.1.1.cmml" xref="alg1.29.29.1.m1.1.1"><times id="alg1.29.29.1.m1.1.1.1.cmml" xref="alg1.29.29.1.m1.1.1.1"></times><ci id="alg1.29.29.1.m1.1.1.2.cmml" xref="alg1.29.29.1.m1.1.1.2">ùêµ</ci><ci id="alg1.29.29.1.m1.1.1.3.cmml" xref="alg1.29.29.1.m1.1.1.3">ùëô</ci><ci id="alg1.29.29.1.m1.1.1.4.cmml" xref="alg1.29.29.1.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.29.29.1.m1.1c">Blk</annotation></semantics></math>)==ture</em>¬†<span id="alg1.29.29.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg1.30.30" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">28</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† Update <math id="alg1.30.30.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.30.30.m1.1a"><mrow id="alg1.30.30.m1.1.1" xref="alg1.30.30.m1.1.1.cmml"><mi id="alg1.30.30.m1.1.1.2" xref="alg1.30.30.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.30.30.m1.1.1.1" xref="alg1.30.30.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.30.30.m1.1.1.3" xref="alg1.30.30.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.30.30.m1.1.1.1a" xref="alg1.30.30.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.30.30.m1.1.1.4" xref="alg1.30.30.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.30.30.m1.1b"><apply id="alg1.30.30.m1.1.1.cmml" xref="alg1.30.30.m1.1.1"><times id="alg1.30.30.m1.1.1.1.cmml" xref="alg1.30.30.m1.1.1.1"></times><ci id="alg1.30.30.m1.1.1.2.cmml" xref="alg1.30.30.m1.1.1.2">ùêµ</ci><ci id="alg1.30.30.m1.1.1.3.cmml" xref="alg1.30.30.m1.1.1.3">ùëô</ci><ci id="alg1.30.30.m1.1.1.4.cmml" xref="alg1.30.30.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.30.30.m1.1c">Blk</annotation></semantics></math> to its chain;
</div>
<div id="alg1.31.31" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">29</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg1.31.31.1" class="ltx_text ltx_font_bold">return</span> <math id="alg1.31.31.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="alg1.31.31.m1.1a"><mrow id="alg1.31.31.m1.1.1" xref="alg1.31.31.m1.1.1.cmml"><mi id="alg1.31.31.m1.1.1.2" xref="alg1.31.31.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg1.31.31.m1.1.1.1" xref="alg1.31.31.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.31.31.m1.1.1.3" xref="alg1.31.31.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg1.31.31.m1.1.1.1a" xref="alg1.31.31.m1.1.1.1.cmml">‚Äã</mo><mi id="alg1.31.31.m1.1.1.4" xref="alg1.31.31.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.31.31.m1.1b"><apply id="alg1.31.31.m1.1.1.cmml" xref="alg1.31.31.m1.1.1"><times id="alg1.31.31.m1.1.1.1.cmml" xref="alg1.31.31.m1.1.1.1"></times><ci id="alg1.31.31.m1.1.1.2.cmml" xref="alg1.31.31.m1.1.1.2">ùêµ</ci><ci id="alg1.31.31.m1.1.1.3.cmml" xref="alg1.31.31.m1.1.1.3">ùëô</ci><ci id="alg1.31.31.m1.1.1.4.cmml" xref="alg1.31.31.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.31.31.m1.1c">Blk</annotation></semantics></math>;

</div>
<div id="alg1.31.42" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">30</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end if
</div>
<div id="alg1.31.43" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">31</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
</div>
<div id="alg1.31.44" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">32</span> end if
</div>
<div id="alg1.31.45" class="ltx_listingline">
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span id="alg1.33.1.1" class="ltx_text ltx_font_bold">Algorithm¬†1</span> </span>Proof of Shapley (PoSap)</figcaption>
</figure>
<div id="S4.SS1.p2" class="ltx_para">
<p id="S4.SS1.p2.7" class="ltx_p">In Algorithm <a href="#alg1" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, a miner first initializes the SV vector as an all-zero vector, and sets the calculation iteration number as <math id="S4.SS1.p2.1.m1.1" class="ltx_Math" alttext="0" display="inline"><semantics id="S4.SS1.p2.1.m1.1a"><mn id="S4.SS1.p2.1.m1.1.1" xref="S4.SS1.p2.1.m1.1.1.cmml">0</mn><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.1b"><cn type="integer" id="S4.SS1.p2.1.m1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1">0</cn></annotation-xml></semantics></math> (Line 1-2). The SV computation continues as long as one of the following two conditions are satisfied: 1) there is no new block received; or 2) the received block fails to pass the verification which is specified in Algorithm <a href="#alg2" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> (Line 3). The SV calculation process is described in Line 4 to Line 13. The miner initializes a temporary SV vector <math id="S4.SS1.p2.2.m2.1" class="ltx_Math" alttext="S_{t}" display="inline"><semantics id="S4.SS1.p2.2.m2.1a"><msub id="S4.SS1.p2.2.m2.1.1" xref="S4.SS1.p2.2.m2.1.1.cmml"><mi id="S4.SS1.p2.2.m2.1.1.2" xref="S4.SS1.p2.2.m2.1.1.2.cmml">S</mi><mi id="S4.SS1.p2.2.m2.1.1.3" xref="S4.SS1.p2.2.m2.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.2.m2.1b"><apply id="S4.SS1.p2.2.m2.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.2.m2.1.1.1.cmml" xref="S4.SS1.p2.2.m2.1.1">subscript</csymbol><ci id="S4.SS1.p2.2.m2.1.1.2.cmml" xref="S4.SS1.p2.2.m2.1.1.2">ùëÜ</ci><ci id="S4.SS1.p2.2.m2.1.1.3.cmml" xref="S4.SS1.p2.2.m2.1.1.3">ùë°</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.2.m2.1c">S_{t}</annotation></semantics></math> to record the calculated value in this iteration (Line 4). Then, the miner randomly generates a rank of the <math id="S4.SS1.p2.3.m3.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S4.SS1.p2.3.m3.1a"><mi id="S4.SS1.p2.3.m3.1.1" xref="S4.SS1.p2.3.m3.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.3.m3.1b"><ci id="S4.SS1.p2.3.m3.1.1.cmml" xref="S4.SS1.p2.3.m3.1.1">ùêæ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.3.m3.1c">K</annotation></semantics></math> FL clients (Line 5). According to the rank, an SV of the first entity is calculated as in Line 6, which is the contribution of the entity to the loss function (Line 6)). For the next entity <math id="S4.SS1.p2.4.m4.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S4.SS1.p2.4.m4.1a"><mi id="S4.SS1.p2.4.m4.1.1" xref="S4.SS1.p2.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.4.m4.1b"><ci id="S4.SS1.p2.4.m4.1.1.cmml" xref="S4.SS1.p2.4.m4.1.1">ùëñ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.4.m4.1c">i</annotation></semantics></math>, the Shapley value is calculated as its marginal contribution (Line 7-10). <math id="S4.SS1.p2.5.m5.1" class="ltx_Math" alttext="S" display="inline"><semantics id="S4.SS1.p2.5.m5.1a"><mi id="S4.SS1.p2.5.m5.1.1" xref="S4.SS1.p2.5.m5.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.5.m5.1b"><ci id="S4.SS1.p2.5.m5.1.1.cmml" xref="S4.SS1.p2.5.m5.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.5.m5.1c">S</annotation></semantics></math> is updated by averaging all the previous iterations and the current <math id="S4.SS1.p2.6.m6.1" class="ltx_Math" alttext="S_{t}" display="inline"><semantics id="S4.SS1.p2.6.m6.1a"><msub id="S4.SS1.p2.6.m6.1.1" xref="S4.SS1.p2.6.m6.1.1.cmml"><mi id="S4.SS1.p2.6.m6.1.1.2" xref="S4.SS1.p2.6.m6.1.1.2.cmml">S</mi><mi id="S4.SS1.p2.6.m6.1.1.3" xref="S4.SS1.p2.6.m6.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.6.m6.1b"><apply id="S4.SS1.p2.6.m6.1.1.cmml" xref="S4.SS1.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.6.m6.1.1.1.cmml" xref="S4.SS1.p2.6.m6.1.1">subscript</csymbol><ci id="S4.SS1.p2.6.m6.1.1.2.cmml" xref="S4.SS1.p2.6.m6.1.1.2">ùëÜ</ci><ci id="S4.SS1.p2.6.m6.1.1.3.cmml" xref="S4.SS1.p2.6.m6.1.1.3">ùë°</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.6.m6.1c">S_{t}</annotation></semantics></math> (Line 11). The iteration time is then incremented by 1 (Line 12). Then, the entity broadcast <math id="S4.SS1.p2.7.m7.1" class="ltx_Math" alttext="S" display="inline"><semantics id="S4.SS1.p2.7.m7.1a"><mi id="S4.SS1.p2.7.m7.1.1" xref="S4.SS1.p2.7.m7.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.7.m7.1b"><ci id="S4.SS1.p2.7.m7.1.1.cmml" xref="S4.SS1.p2.7.m7.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.7.m7.1c">S</annotation></semantics></math> and time (Line 13).</p>
</div>
<div id="S4.SS1.p3" class="ltx_para">
<p id="S4.SS1.p3.10" class="ltx_p">Whenever a miner receives <math id="S4.SS1.p3.1.m1.1" class="ltx_Math" alttext="S" display="inline"><semantics id="S4.SS1.p3.1.m1.1a"><mi id="S4.SS1.p3.1.m1.1.1" xref="S4.SS1.p3.1.m1.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.1.m1.1b"><ci id="S4.SS1.p3.1.m1.1.1.cmml" xref="S4.SS1.p3.1.m1.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.1.m1.1c">S</annotation></semantics></math> and <math id="S4.SS1.p3.2.m2.1" class="ltx_Math" alttext="time" display="inline"><semantics id="S4.SS1.p3.2.m2.1a"><mrow id="S4.SS1.p3.2.m2.1.1" xref="S4.SS1.p3.2.m2.1.1.cmml"><mi id="S4.SS1.p3.2.m2.1.1.2" xref="S4.SS1.p3.2.m2.1.1.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="S4.SS1.p3.2.m2.1.1.1" xref="S4.SS1.p3.2.m2.1.1.1.cmml">‚Äã</mo><mi id="S4.SS1.p3.2.m2.1.1.3" xref="S4.SS1.p3.2.m2.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.SS1.p3.2.m2.1.1.1a" xref="S4.SS1.p3.2.m2.1.1.1.cmml">‚Äã</mo><mi id="S4.SS1.p3.2.m2.1.1.4" xref="S4.SS1.p3.2.m2.1.1.4.cmml">m</mi><mo lspace="0em" rspace="0em" id="S4.SS1.p3.2.m2.1.1.1b" xref="S4.SS1.p3.2.m2.1.1.1.cmml">‚Äã</mo><mi id="S4.SS1.p3.2.m2.1.1.5" xref="S4.SS1.p3.2.m2.1.1.5.cmml">e</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.2.m2.1b"><apply id="S4.SS1.p3.2.m2.1.1.cmml" xref="S4.SS1.p3.2.m2.1.1"><times id="S4.SS1.p3.2.m2.1.1.1.cmml" xref="S4.SS1.p3.2.m2.1.1.1"></times><ci id="S4.SS1.p3.2.m2.1.1.2.cmml" xref="S4.SS1.p3.2.m2.1.1.2">ùë°</ci><ci id="S4.SS1.p3.2.m2.1.1.3.cmml" xref="S4.SS1.p3.2.m2.1.1.3">ùëñ</ci><ci id="S4.SS1.p3.2.m2.1.1.4.cmml" xref="S4.SS1.p3.2.m2.1.1.4">ùëö</ci><ci id="S4.SS1.p3.2.m2.1.1.5.cmml" xref="S4.SS1.p3.2.m2.1.1.5">ùëí</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.2.m2.1c">time</annotation></semantics></math>, the miner calculates the average results <math id="S4.SS1.p3.3.m3.1" class="ltx_Math" alttext="\overline{S}" display="inline"><semantics id="S4.SS1.p3.3.m3.1a"><mover accent="true" id="S4.SS1.p3.3.m3.1.1" xref="S4.SS1.p3.3.m3.1.1.cmml"><mi id="S4.SS1.p3.3.m3.1.1.2" xref="S4.SS1.p3.3.m3.1.1.2.cmml">S</mi><mo id="S4.SS1.p3.3.m3.1.1.1" xref="S4.SS1.p3.3.m3.1.1.1.cmml">¬Ø</mo></mover><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.3.m3.1b"><apply id="S4.SS1.p3.3.m3.1.1.cmml" xref="S4.SS1.p3.3.m3.1.1"><ci id="S4.SS1.p3.3.m3.1.1.1.cmml" xref="S4.SS1.p3.3.m3.1.1.1">¬Ø</ci><ci id="S4.SS1.p3.3.m3.1.1.2.cmml" xref="S4.SS1.p3.3.m3.1.1.2">ùëÜ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.3.m3.1c">\overline{S}</annotation></semantics></math> of all the received <math id="S4.SS1.p3.4.m4.1" class="ltx_Math" alttext="S" display="inline"><semantics id="S4.SS1.p3.4.m4.1a"><mi id="S4.SS1.p3.4.m4.1.1" xref="S4.SS1.p3.4.m4.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.4.m4.1b"><ci id="S4.SS1.p3.4.m4.1.1.cmml" xref="S4.SS1.p3.4.m4.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.4.m4.1c">S</annotation></semantics></math> (Line 16). Then, the miner calculates the <math id="S4.SS1.p3.5.m5.1" class="ltx_Math" alttext="P" display="inline"><semantics id="S4.SS1.p3.5.m5.1a"><mi id="S4.SS1.p3.5.m5.1.1" xref="S4.SS1.p3.5.m5.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.5.m5.1b"><ci id="S4.SS1.p3.5.m5.1.1.cmml" xref="S4.SS1.p3.5.m5.1.1">ùëÉ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.5.m5.1c">P</annotation></semantics></math>-distance between its own <math id="S4.SS1.p3.6.m6.1" class="ltx_Math" alttext="S" display="inline"><semantics id="S4.SS1.p3.6.m6.1a"><mi id="S4.SS1.p3.6.m6.1.1" xref="S4.SS1.p3.6.m6.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.6.m6.1b"><ci id="S4.SS1.p3.6.m6.1.1.cmml" xref="S4.SS1.p3.6.m6.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.6.m6.1c">S</annotation></semantics></math> and <math id="S4.SS1.p3.7.m7.1" class="ltx_Math" alttext="\overline{S}" display="inline"><semantics id="S4.SS1.p3.7.m7.1a"><mover accent="true" id="S4.SS1.p3.7.m7.1.1" xref="S4.SS1.p3.7.m7.1.1.cmml"><mi id="S4.SS1.p3.7.m7.1.1.2" xref="S4.SS1.p3.7.m7.1.1.2.cmml">S</mi><mo id="S4.SS1.p3.7.m7.1.1.1" xref="S4.SS1.p3.7.m7.1.1.1.cmml">¬Ø</mo></mover><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.7.m7.1b"><apply id="S4.SS1.p3.7.m7.1.1.cmml" xref="S4.SS1.p3.7.m7.1.1"><ci id="S4.SS1.p3.7.m7.1.1.1.cmml" xref="S4.SS1.p3.7.m7.1.1.1">¬Ø</ci><ci id="S4.SS1.p3.7.m7.1.1.2.cmml" xref="S4.SS1.p3.7.m7.1.1.2">ùëÜ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.7.m7.1c">\overline{S}</annotation></semantics></math>. When the distance is no greater than the mining difficulty <math id="S4.SS1.p3.8.m8.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S4.SS1.p3.8.m8.1a"><mi id="S4.SS1.p3.8.m8.1.1" xref="S4.SS1.p3.8.m8.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.8.m8.1b"><ci id="S4.SS1.p3.8.m8.1.1.cmml" xref="S4.SS1.p3.8.m8.1.1">ùê∑</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.8.m8.1c">D</annotation></semantics></math>, the miner becomes the winner and generates a new block <math id="S4.SS1.p3.9.m9.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="S4.SS1.p3.9.m9.1a"><mrow id="S4.SS1.p3.9.m9.1.1" xref="S4.SS1.p3.9.m9.1.1.cmml"><mi id="S4.SS1.p3.9.m9.1.1.2" xref="S4.SS1.p3.9.m9.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="S4.SS1.p3.9.m9.1.1.1" xref="S4.SS1.p3.9.m9.1.1.1.cmml">‚Äã</mo><mi id="S4.SS1.p3.9.m9.1.1.3" xref="S4.SS1.p3.9.m9.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.SS1.p3.9.m9.1.1.1a" xref="S4.SS1.p3.9.m9.1.1.1.cmml">‚Äã</mo><mi id="S4.SS1.p3.9.m9.1.1.4" xref="S4.SS1.p3.9.m9.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.9.m9.1b"><apply id="S4.SS1.p3.9.m9.1.1.cmml" xref="S4.SS1.p3.9.m9.1.1"><times id="S4.SS1.p3.9.m9.1.1.1.cmml" xref="S4.SS1.p3.9.m9.1.1.1"></times><ci id="S4.SS1.p3.9.m9.1.1.2.cmml" xref="S4.SS1.p3.9.m9.1.1.2">ùêµ</ci><ci id="S4.SS1.p3.9.m9.1.1.3.cmml" xref="S4.SS1.p3.9.m9.1.1.3">ùëô</ci><ci id="S4.SS1.p3.9.m9.1.1.4.cmml" xref="S4.SS1.p3.9.m9.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.9.m9.1c">Blk</annotation></semantics></math> (Line 18). The difficulty <math id="S4.SS1.p3.10.m10.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S4.SS1.p3.10.m10.1a"><mi id="S4.SS1.p3.10.m10.1.1" xref="S4.SS1.p3.10.m10.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p3.10.m10.1b"><ci id="S4.SS1.p3.10.m10.1.1.cmml" xref="S4.SS1.p3.10.m10.1.1">ùê∑</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p3.10.m10.1c">D</annotation></semantics></math> is adapted dynamically as explained in Section <a href="#S4.SS2" title="4.2 Dynamic Mining Difficulty ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.2</span></a>. The illustration of the Shapley based verification is shown in Figure <a href="#S4.F2" title="Figure 2 ‚Ä£ 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. The new block is then appended to the current longest chain.</p>
</div>
<figure id="S4.F2" class="ltx_figure"><img src="/html/2002.11711/assets/x2.png" id="S4.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="332" height="147" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Shapley Valued based Consensus Protocol</figcaption>
</figure>
<div id="S4.SS1.p4" class="ltx_para">
<p id="S4.SS1.p4.1" class="ltx_p">Whenever a miner receives a new block <math id="S4.SS1.p4.1.m1.1" class="ltx_Math" alttext="Blk" display="inline"><semantics id="S4.SS1.p4.1.m1.1a"><mrow id="S4.SS1.p4.1.m1.1.1" xref="S4.SS1.p4.1.m1.1.1.cmml"><mi id="S4.SS1.p4.1.m1.1.1.2" xref="S4.SS1.p4.1.m1.1.1.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="S4.SS1.p4.1.m1.1.1.1" xref="S4.SS1.p4.1.m1.1.1.1.cmml">‚Äã</mo><mi id="S4.SS1.p4.1.m1.1.1.3" xref="S4.SS1.p4.1.m1.1.1.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.SS1.p4.1.m1.1.1.1a" xref="S4.SS1.p4.1.m1.1.1.1.cmml">‚Äã</mo><mi id="S4.SS1.p4.1.m1.1.1.4" xref="S4.SS1.p4.1.m1.1.1.4.cmml">k</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p4.1.m1.1b"><apply id="S4.SS1.p4.1.m1.1.1.cmml" xref="S4.SS1.p4.1.m1.1.1"><times id="S4.SS1.p4.1.m1.1.1.1.cmml" xref="S4.SS1.p4.1.m1.1.1.1"></times><ci id="S4.SS1.p4.1.m1.1.1.2.cmml" xref="S4.SS1.p4.1.m1.1.1.2">ùêµ</ci><ci id="S4.SS1.p4.1.m1.1.1.3.cmml" xref="S4.SS1.p4.1.m1.1.1.3">ùëô</ci><ci id="S4.SS1.p4.1.m1.1.1.4.cmml" xref="S4.SS1.p4.1.m1.1.1.4">ùëò</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p4.1.m1.1c">Blk</annotation></semantics></math>, the miner verifies this block according to Algorithm <a href="#alg2" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. Once the verification passes, the block is appended to the miner‚Äôs chain, and the mining process terminates (Line 23-28).</p>
</div>
<div id="S4.SS1.p5" class="ltx_para">
<p id="S4.SS1.p5.1" class="ltx_p">The structure of a block is shown in Figure <a href="#S4.F3" title="Figure 3 ‚Ä£ 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, including block header and block body. The block header includes seven pieces of information, Table <a href="#S4.T1" title="Table 1 ‚Ä£ 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> presents the explanation about each header item. The block body records two types of data: (1) The task specification including all the inputs for Algorithm <a href="#alg1" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>; and (2) The transactions in the blockchain network. Here, a transaction is denoted as a certain amount of FedCoins transferred from a user account to another, which is similar to that in BitCoin <cite class="ltx_cite ltx_citemacro_cite">Nakamoto and
others (<a href="#bib.bib15" title="" class="ltx_ref">2008</a>)</cite>. The block winner has the privilege to create special transactions: transferring TrainPrice from its own account to to the FL clients according to <math id="S4.SS1.p5.1.m1.1" class="ltx_Math" alttext="\overline{S}" display="inline"><semantics id="S4.SS1.p5.1.m1.1a"><mover accent="true" id="S4.SS1.p5.1.m1.1.1" xref="S4.SS1.p5.1.m1.1.1.cmml"><mi id="S4.SS1.p5.1.m1.1.1.2" xref="S4.SS1.p5.1.m1.1.1.2.cmml">S</mi><mo id="S4.SS1.p5.1.m1.1.1.1" xref="S4.SS1.p5.1.m1.1.1.1.cmml">¬Ø</mo></mover><annotation-xml encoding="MathML-Content" id="S4.SS1.p5.1.m1.1b"><apply id="S4.SS1.p5.1.m1.1.1.cmml" xref="S4.SS1.p5.1.m1.1.1"><ci id="S4.SS1.p5.1.m1.1.1.1.cmml" xref="S4.SS1.p5.1.m1.1.1.1">¬Ø</ci><ci id="S4.SS1.p5.1.m1.1.1.2.cmml" xref="S4.SS1.p5.1.m1.1.1.2">ùëÜ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p5.1.m1.1c">\overline{S}</annotation></semantics></math>. The detailed design is explained in Section <a href="#S4.SS3" title="4.3 The Payment Scheme ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.3</span></a>.</p>
</div>
<figure id="S4.F3" class="ltx_figure"><img src="/html/2002.11711/assets/x3.png" id="S4.F3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="332" height="165" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Block Structure in FedCoin</figcaption>
</figure>
<figure id="S4.T1" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 1: </span>Explanation of Block Header</figcaption>
<table id="S4.T1.3" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T1.3.4.1" class="ltx_tr">
<th id="S4.T1.3.4.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Type</th>
<th id="S4.T1.3.4.1.2" class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_r ltx_border_t">
<span id="S4.T1.3.4.1.2.1" class="ltx_inline-block ltx_align_top">
<span id="S4.T1.3.4.1.2.1.1" class="ltx_p" style="width:142.3pt;">Explanations</span>
</span>
</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T1.3.5.1" class="ltx_tr">
<th id="S4.T1.3.5.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Block ID</th>
<td id="S4.T1.3.5.1.2" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t">
<span id="S4.T1.3.5.1.2.1" class="ltx_inline-block ltx_align_top">
<span id="S4.T1.3.5.1.2.1.1" class="ltx_p" style="width:142.3pt;">The block height</span>
</span>
</td>
</tr>
<tr id="S4.T1.3.6.2" class="ltx_tr">
<th id="S4.T1.3.6.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Winner‚Äôs ID</th>
<td id="S4.T1.3.6.2.2" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t">
<span id="S4.T1.3.6.2.2.1" class="ltx_inline-block ltx_align_top">
<span id="S4.T1.3.6.2.2.1.1" class="ltx_p" style="width:142.3pt;">Identity of the block generator</span>
</span>
</td>
</tr>
<tr id="S4.T1.1.1" class="ltx_tr">
<th id="S4.T1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Averaged <math id="S4.T1.1.1.1.m1.1" class="ltx_Math" alttext="S" display="inline"><semantics id="S4.T1.1.1.1.m1.1a"><mi id="S4.T1.1.1.1.m1.1.1" xref="S4.T1.1.1.1.m1.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.T1.1.1.1.m1.1b"><ci id="S4.T1.1.1.1.m1.1.1.cmml" xref="S4.T1.1.1.1.m1.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.1.1.1.m1.1c">S</annotation></semantics></math>
</th>
<td id="S4.T1.1.1.2" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t">
<span id="S4.T1.1.1.2.1" class="ltx_inline-block ltx_align_top">
<span id="S4.T1.1.1.2.1.1" class="ltx_p" style="width:142.3pt;">The calculated Shapley vector in Line 15 of Algorithm.<a href="#alg1" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a></span>
</span>
</td>
</tr>
<tr id="S4.T1.3.7.3" class="ltx_tr">
<th id="S4.T1.3.7.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Previous Hash</th>
<td id="S4.T1.3.7.3.2" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t">
<span id="S4.T1.3.7.3.2.1" class="ltx_inline-block ltx_align_top">
<span id="S4.T1.3.7.3.2.1.1" class="ltx_p" style="width:142.3pt;">Hash value of previous block based on a hash function, e.g. SHA 256</span>
</span>
</td>
</tr>
<tr id="S4.T1.2.2" class="ltx_tr">
<th id="S4.T1.2.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Winner‚Äôs <math id="S4.T1.2.2.1.m1.1" class="ltx_Math" alttext="S" display="inline"><semantics id="S4.T1.2.2.1.m1.1a"><mi id="S4.T1.2.2.1.m1.1.1" xref="S4.T1.2.2.1.m1.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.T1.2.2.1.m1.1b"><ci id="S4.T1.2.2.1.m1.1.1.cmml" xref="S4.T1.2.2.1.m1.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.2.2.1.m1.1c">S</annotation></semantics></math>
</th>
<td id="S4.T1.2.2.2" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t">
<span id="S4.T1.2.2.2.1" class="ltx_inline-block ltx_align_top">
<span id="S4.T1.2.2.2.1.1" class="ltx_p" style="width:142.3pt;">The Shapley vector calculated by the winner</span>
</span>
</td>
</tr>
<tr id="S4.T1.3.3" class="ltx_tr">
<th id="S4.T1.3.3.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Difficulty</th>
<td id="S4.T1.3.3.1" class="ltx_td ltx_align_justify ltx_align_top ltx_border_r ltx_border_t">
<span id="S4.T1.3.3.1.1" class="ltx_inline-block ltx_align_top">
<span id="S4.T1.3.3.1.1.1" class="ltx_p" style="width:142.3pt;">The required difficulty <math id="S4.T1.3.3.1.1.1.m1.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S4.T1.3.3.1.1.1.m1.1a"><mi id="S4.T1.3.3.1.1.1.m1.1.1" xref="S4.T1.3.3.1.1.1.m1.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S4.T1.3.3.1.1.1.m1.1b"><ci id="S4.T1.3.3.1.1.1.m1.1.1.cmml" xref="S4.T1.3.3.1.1.1.m1.1.1">ùê∑</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T1.3.3.1.1.1.m1.1c">D</annotation></semantics></math></span>
</span>
</td>
</tr>
<tr id="S4.T1.3.8.4" class="ltx_tr">
<th id="S4.T1.3.8.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_r ltx_border_t">Merkel Tree Root</th>
<td id="S4.T1.3.8.4.2" class="ltx_td ltx_align_justify ltx_align_top ltx_border_b ltx_border_r ltx_border_t">
<span id="S4.T1.3.8.4.2.1" class="ltx_inline-block ltx_align_top">
<span id="S4.T1.3.8.4.2.1.1" class="ltx_p" style="width:142.3pt;">Root of Merkel tree organized with transactions in block body</span>
</span>
</td>
</tr>
</tbody>
</table>
</figure>
<div id="S4.SS1.p6" class="ltx_para">
<p id="S4.SS1.p6.6" class="ltx_p">The verification procedure is described as in Algorithm <a href="#alg2" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. Three conditions must be satisfied for a block to successfully pass the verification. The first condition is <math id="S4.SS1.p6.1.m1.1" class="ltx_Math" alttext="\|S_{t}-\overline{S}_{t}\|_{p}\leq D" display="inline"><semantics id="S4.SS1.p6.1.m1.1a"><mrow id="S4.SS1.p6.1.m1.1.1" xref="S4.SS1.p6.1.m1.1.1.cmml"><msub id="S4.SS1.p6.1.m1.1.1.1" xref="S4.SS1.p6.1.m1.1.1.1.cmml"><mrow id="S4.SS1.p6.1.m1.1.1.1.1.1" xref="S4.SS1.p6.1.m1.1.1.1.1.2.cmml"><mo stretchy="false" id="S4.SS1.p6.1.m1.1.1.1.1.1.2" xref="S4.SS1.p6.1.m1.1.1.1.1.2.1.cmml">‚Äñ</mo><mrow id="S4.SS1.p6.1.m1.1.1.1.1.1.1" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.cmml"><msub id="S4.SS1.p6.1.m1.1.1.1.1.1.1.2" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.cmml"><mi id="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.2" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.2.cmml">S</mi><mi id="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.3" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.3.cmml">t</mi></msub><mo id="S4.SS1.p6.1.m1.1.1.1.1.1.1.1" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.1.cmml">‚àí</mo><msub id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.cmml"><mover accent="true" id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.cmml"><mi id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.2" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.2.cmml">S</mi><mo id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.1" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.1.cmml">¬Ø</mo></mover><mi id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.3" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="S4.SS1.p6.1.m1.1.1.1.1.1.3" xref="S4.SS1.p6.1.m1.1.1.1.1.2.1.cmml">‚Äñ</mo></mrow><mi id="S4.SS1.p6.1.m1.1.1.1.3" xref="S4.SS1.p6.1.m1.1.1.1.3.cmml">p</mi></msub><mo id="S4.SS1.p6.1.m1.1.1.2" xref="S4.SS1.p6.1.m1.1.1.2.cmml">‚â§</mo><mi id="S4.SS1.p6.1.m1.1.1.3" xref="S4.SS1.p6.1.m1.1.1.3.cmml">D</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p6.1.m1.1b"><apply id="S4.SS1.p6.1.m1.1.1.cmml" xref="S4.SS1.p6.1.m1.1.1"><leq id="S4.SS1.p6.1.m1.1.1.2.cmml" xref="S4.SS1.p6.1.m1.1.1.2"></leq><apply id="S4.SS1.p6.1.m1.1.1.1.cmml" xref="S4.SS1.p6.1.m1.1.1.1"><csymbol cd="ambiguous" id="S4.SS1.p6.1.m1.1.1.1.2.cmml" xref="S4.SS1.p6.1.m1.1.1.1">subscript</csymbol><apply id="S4.SS1.p6.1.m1.1.1.1.1.2.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1"><csymbol cd="latexml" id="S4.SS1.p6.1.m1.1.1.1.1.2.1.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.2">norm</csymbol><apply id="S4.SS1.p6.1.m1.1.1.1.1.1.1.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1"><minus id="S4.SS1.p6.1.m1.1.1.1.1.1.1.1.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.1"></minus><apply id="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.1.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.2.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.2">ùëÜ</ci><ci id="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.3.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.2.3">ùë°</ci></apply><apply id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.1.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3">subscript</csymbol><apply id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2"><ci id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.1.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.1">¬Ø</ci><ci id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.2.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.2.2">ùëÜ</ci></apply><ci id="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.3.cmml" xref="S4.SS1.p6.1.m1.1.1.1.1.1.1.3.3">ùë°</ci></apply></apply></apply><ci id="S4.SS1.p6.1.m1.1.1.1.3.cmml" xref="S4.SS1.p6.1.m1.1.1.1.3">ùëù</ci></apply><ci id="S4.SS1.p6.1.m1.1.1.3.cmml" xref="S4.SS1.p6.1.m1.1.1.3">ùê∑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p6.1.m1.1c">\|S_{t}-\overline{S}_{t}\|_{p}\leq D</annotation></semantics></math> which aims to verify whether the winner has generated the block with a valid SV calculation result. The second condition is <math id="S4.SS1.p6.2.m2.1" class="ltx_Math" alttext="\|\overline{S}-\overline{S}_{t}\|_{p}\leq D" display="inline"><semantics id="S4.SS1.p6.2.m2.1a"><mrow id="S4.SS1.p6.2.m2.1.1" xref="S4.SS1.p6.2.m2.1.1.cmml"><msub id="S4.SS1.p6.2.m2.1.1.1" xref="S4.SS1.p6.2.m2.1.1.1.cmml"><mrow id="S4.SS1.p6.2.m2.1.1.1.1.1" xref="S4.SS1.p6.2.m2.1.1.1.1.2.cmml"><mo stretchy="false" id="S4.SS1.p6.2.m2.1.1.1.1.1.2" xref="S4.SS1.p6.2.m2.1.1.1.1.2.1.cmml">‚Äñ</mo><mrow id="S4.SS1.p6.2.m2.1.1.1.1.1.1" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.cmml"><mover accent="true" id="S4.SS1.p6.2.m2.1.1.1.1.1.1.2" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.cmml"><mi id="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.2" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.2.cmml">S</mi><mo id="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.1" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.1.cmml">¬Ø</mo></mover><mo id="S4.SS1.p6.2.m2.1.1.1.1.1.1.1" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.1.cmml">‚àí</mo><msub id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.cmml"><mover accent="true" id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.cmml"><mi id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.2" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.2.cmml">S</mi><mo id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.1" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.1.cmml">¬Ø</mo></mover><mi id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.3" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="S4.SS1.p6.2.m2.1.1.1.1.1.3" xref="S4.SS1.p6.2.m2.1.1.1.1.2.1.cmml">‚Äñ</mo></mrow><mi id="S4.SS1.p6.2.m2.1.1.1.3" xref="S4.SS1.p6.2.m2.1.1.1.3.cmml">p</mi></msub><mo id="S4.SS1.p6.2.m2.1.1.2" xref="S4.SS1.p6.2.m2.1.1.2.cmml">‚â§</mo><mi id="S4.SS1.p6.2.m2.1.1.3" xref="S4.SS1.p6.2.m2.1.1.3.cmml">D</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.p6.2.m2.1b"><apply id="S4.SS1.p6.2.m2.1.1.cmml" xref="S4.SS1.p6.2.m2.1.1"><leq id="S4.SS1.p6.2.m2.1.1.2.cmml" xref="S4.SS1.p6.2.m2.1.1.2"></leq><apply id="S4.SS1.p6.2.m2.1.1.1.cmml" xref="S4.SS1.p6.2.m2.1.1.1"><csymbol cd="ambiguous" id="S4.SS1.p6.2.m2.1.1.1.2.cmml" xref="S4.SS1.p6.2.m2.1.1.1">subscript</csymbol><apply id="S4.SS1.p6.2.m2.1.1.1.1.2.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1"><csymbol cd="latexml" id="S4.SS1.p6.2.m2.1.1.1.1.2.1.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.2">norm</csymbol><apply id="S4.SS1.p6.2.m2.1.1.1.1.1.1.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1"><minus id="S4.SS1.p6.2.m2.1.1.1.1.1.1.1.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.1"></minus><apply id="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.2"><ci id="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.1.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.1">¬Ø</ci><ci id="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.2.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.2.2">ùëÜ</ci></apply><apply id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.1.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3">subscript</csymbol><apply id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2"><ci id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.1.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.1">¬Ø</ci><ci id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.2.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.2.2">ùëÜ</ci></apply><ci id="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.3.cmml" xref="S4.SS1.p6.2.m2.1.1.1.1.1.1.3.3">ùë°</ci></apply></apply></apply><ci id="S4.SS1.p6.2.m2.1.1.1.3.cmml" xref="S4.SS1.p6.2.m2.1.1.1.3">ùëù</ci></apply><ci id="S4.SS1.p6.2.m2.1.1.3.cmml" xref="S4.SS1.p6.2.m2.1.1.3">ùê∑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p6.2.m2.1c">\|\overline{S}-\overline{S}_{t}\|_{p}\leq D</annotation></semantics></math> which requires that the <math id="S4.SS1.p6.3.m3.1" class="ltx_Math" alttext="\overline{S}" display="inline"><semantics id="S4.SS1.p6.3.m3.1a"><mover accent="true" id="S4.SS1.p6.3.m3.1.1" xref="S4.SS1.p6.3.m3.1.1.cmml"><mi id="S4.SS1.p6.3.m3.1.1.2" xref="S4.SS1.p6.3.m3.1.1.2.cmml">S</mi><mo id="S4.SS1.p6.3.m3.1.1.1" xref="S4.SS1.p6.3.m3.1.1.1.cmml">¬Ø</mo></mover><annotation-xml encoding="MathML-Content" id="S4.SS1.p6.3.m3.1b"><apply id="S4.SS1.p6.3.m3.1.1.cmml" xref="S4.SS1.p6.3.m3.1.1"><ci id="S4.SS1.p6.3.m3.1.1.1.cmml" xref="S4.SS1.p6.3.m3.1.1.1">¬Ø</ci><ci id="S4.SS1.p6.3.m3.1.1.2.cmml" xref="S4.SS1.p6.3.m3.1.1.2">ùëÜ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p6.3.m3.1c">\overline{S}</annotation></semantics></math> value of the block should be close enough to the local aggregated <math id="S4.SS1.p6.4.m4.1" class="ltx_Math" alttext="S" display="inline"><semantics id="S4.SS1.p6.4.m4.1a"><mi id="S4.SS1.p6.4.m4.1.1" xref="S4.SS1.p6.4.m4.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p6.4.m4.1b"><ci id="S4.SS1.p6.4.m4.1.1.cmml" xref="S4.SS1.p6.4.m4.1.1">ùëÜ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p6.4.m4.1c">S</annotation></semantics></math>. <math id="S4.SS1.p6.5.m5.1" class="ltx_Math" alttext="\overline{S}" display="inline"><semantics id="S4.SS1.p6.5.m5.1a"><mover accent="true" id="S4.SS1.p6.5.m5.1.1" xref="S4.SS1.p6.5.m5.1.1.cmml"><mi id="S4.SS1.p6.5.m5.1.1.2" xref="S4.SS1.p6.5.m5.1.1.2.cmml">S</mi><mo id="S4.SS1.p6.5.m5.1.1.1" xref="S4.SS1.p6.5.m5.1.1.1.cmml">¬Ø</mo></mover><annotation-xml encoding="MathML-Content" id="S4.SS1.p6.5.m5.1b"><apply id="S4.SS1.p6.5.m5.1.1.cmml" xref="S4.SS1.p6.5.m5.1.1"><ci id="S4.SS1.p6.5.m5.1.1.1.cmml" xref="S4.SS1.p6.5.m5.1.1.1">¬Ø</ci><ci id="S4.SS1.p6.5.m5.1.1.2.cmml" xref="S4.SS1.p6.5.m5.1.1.2">ùëÜ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p6.5.m5.1c">\overline{S}</annotation></semantics></math> should be equal to <math id="S4.SS1.p6.6.m6.1" class="ltx_Math" alttext="\overline{S}_{t}" display="inline"><semantics id="S4.SS1.p6.6.m6.1a"><msub id="S4.SS1.p6.6.m6.1.1" xref="S4.SS1.p6.6.m6.1.1.cmml"><mover accent="true" id="S4.SS1.p6.6.m6.1.1.2" xref="S4.SS1.p6.6.m6.1.1.2.cmml"><mi id="S4.SS1.p6.6.m6.1.1.2.2" xref="S4.SS1.p6.6.m6.1.1.2.2.cmml">S</mi><mo id="S4.SS1.p6.6.m6.1.1.2.1" xref="S4.SS1.p6.6.m6.1.1.2.1.cmml">¬Ø</mo></mover><mi id="S4.SS1.p6.6.m6.1.1.3" xref="S4.SS1.p6.6.m6.1.1.3.cmml">t</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p6.6.m6.1b"><apply id="S4.SS1.p6.6.m6.1.1.cmml" xref="S4.SS1.p6.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS1.p6.6.m6.1.1.1.cmml" xref="S4.SS1.p6.6.m6.1.1">subscript</csymbol><apply id="S4.SS1.p6.6.m6.1.1.2.cmml" xref="S4.SS1.p6.6.m6.1.1.2"><ci id="S4.SS1.p6.6.m6.1.1.2.1.cmml" xref="S4.SS1.p6.6.m6.1.1.2.1">¬Ø</ci><ci id="S4.SS1.p6.6.m6.1.1.2.2.cmml" xref="S4.SS1.p6.6.m6.1.1.2.2">ùëÜ</ci></apply><ci id="S4.SS1.p6.6.m6.1.1.3.cmml" xref="S4.SS1.p6.6.m6.1.1.3">ùë°</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p6.6.m6.1c">\overline{S}_{t}</annotation></semantics></math> when the blockchain network is synchronized. In an asychronized network, this condition requires that the winner should aggregate a sufficient number of results from other entities. Thirdly, the current block ID should be the largest to ensure that only the longest chain is acceptable. This longest chain principle can effectively avoid forking, resulting in consistent chain status in a distributed network.</p>
</div>
<figure id="alg2" class="ltx_float ltx_algorithm">
<div id="alg2.7" class="ltx_listing ltx_lst_numbers_left ltx_listing">
<div id="alg2.7.8" class="ltx_listingline">
<span id="alg2.7.8.1" class="ltx_text"><span id="alg2.7.8.1.1" class="ltx_text ltx_font_bold">Input:</span> </span>Blk: Received new block;
</div>
<div id="alg2.1.1" class="ltx_listingline">
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†<math id="alg2.1.1.m1.1" class="ltx_Math" alttext="\overline{S}" display="inline"><semantics id="alg2.1.1.m1.1a"><mover accent="true" id="alg2.1.1.m1.1.1" xref="alg2.1.1.m1.1.1.cmml"><mi id="alg2.1.1.m1.1.1.2" xref="alg2.1.1.m1.1.1.2.cmml">S</mi><mo id="alg2.1.1.m1.1.1.1" xref="alg2.1.1.m1.1.1.1.cmml">¬Ø</mo></mover><annotation-xml encoding="MathML-Content" id="alg2.1.1.m1.1b"><apply id="alg2.1.1.m1.1.1.cmml" xref="alg2.1.1.m1.1.1"><ci id="alg2.1.1.m1.1.1.1.cmml" xref="alg2.1.1.m1.1.1.1">¬Ø</ci><ci id="alg2.1.1.m1.1.1.2.cmml" xref="alg2.1.1.m1.1.1.2">ùëÜ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.1.1.m1.1c">\overline{S}</annotation></semantics></math>: Local average of received Shapley Value;
</div>
<div id="alg2.2.2" class="ltx_listingline">
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†<math id="alg2.2.2.m1.1" class="ltx_Math" alttext="D" display="inline"><semantics id="alg2.2.2.m1.1a"><mi id="alg2.2.2.m1.1.1" xref="alg2.2.2.m1.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="alg2.2.2.m1.1b"><ci id="alg2.2.2.m1.1.1.cmml" xref="alg2.2.2.m1.1.1">ùê∑</ci></annotation-xml><annotation encoding="application/x-tex" id="alg2.2.2.m1.1c">D</annotation></semantics></math>: Difficulty in Mining;
</div>
<div id="alg2.7.9" class="ltx_listingline">
</div>
<div id="alg2.7.10" class="ltx_listingline">
<span id="alg2.7.10.1" class="ltx_text"><span id="alg2.7.10.1.1" class="ltx_text ltx_font_bold">Output:</span> </span>ValuationResult: True OR False
</div>
<div id="alg2.4.4" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span>
<math id="alg2.3.3.m1.2" class="ltx_Math" alttext="S_{t}=Blk.S" display="inline"><semantics id="alg2.3.3.m1.2a"><mrow id="alg2.3.3.m1.2.2.1" xref="alg2.3.3.m1.2.2.2.cmml"><mrow id="alg2.3.3.m1.2.2.1.1" xref="alg2.3.3.m1.2.2.1.1.cmml"><msub id="alg2.3.3.m1.2.2.1.1.2" xref="alg2.3.3.m1.2.2.1.1.2.cmml"><mi id="alg2.3.3.m1.2.2.1.1.2.2" xref="alg2.3.3.m1.2.2.1.1.2.2.cmml">S</mi><mi id="alg2.3.3.m1.2.2.1.1.2.3" xref="alg2.3.3.m1.2.2.1.1.2.3.cmml">t</mi></msub><mo id="alg2.3.3.m1.2.2.1.1.1" xref="alg2.3.3.m1.2.2.1.1.1.cmml">=</mo><mrow id="alg2.3.3.m1.2.2.1.1.3" xref="alg2.3.3.m1.2.2.1.1.3.cmml"><mi id="alg2.3.3.m1.2.2.1.1.3.2" xref="alg2.3.3.m1.2.2.1.1.3.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg2.3.3.m1.2.2.1.1.3.1" xref="alg2.3.3.m1.2.2.1.1.3.1.cmml">‚Äã</mo><mi id="alg2.3.3.m1.2.2.1.1.3.3" xref="alg2.3.3.m1.2.2.1.1.3.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg2.3.3.m1.2.2.1.1.3.1a" xref="alg2.3.3.m1.2.2.1.1.3.1.cmml">‚Äã</mo><mi id="alg2.3.3.m1.2.2.1.1.3.4" xref="alg2.3.3.m1.2.2.1.1.3.4.cmml">k</mi></mrow></mrow><mo lspace="0em" rspace="0.167em" id="alg2.3.3.m1.2.2.1.2" xref="alg2.3.3.m1.2.2.2a.cmml">.</mo><mi id="alg2.3.3.m1.1.1" xref="alg2.3.3.m1.1.1.cmml">S</mi></mrow><annotation-xml encoding="MathML-Content" id="alg2.3.3.m1.2b"><apply id="alg2.3.3.m1.2.2.2.cmml" xref="alg2.3.3.m1.2.2.1"><csymbol cd="ambiguous" id="alg2.3.3.m1.2.2.2a.cmml" xref="alg2.3.3.m1.2.2.1.2">formulae-sequence</csymbol><apply id="alg2.3.3.m1.2.2.1.1.cmml" xref="alg2.3.3.m1.2.2.1.1"><eq id="alg2.3.3.m1.2.2.1.1.1.cmml" xref="alg2.3.3.m1.2.2.1.1.1"></eq><apply id="alg2.3.3.m1.2.2.1.1.2.cmml" xref="alg2.3.3.m1.2.2.1.1.2"><csymbol cd="ambiguous" id="alg2.3.3.m1.2.2.1.1.2.1.cmml" xref="alg2.3.3.m1.2.2.1.1.2">subscript</csymbol><ci id="alg2.3.3.m1.2.2.1.1.2.2.cmml" xref="alg2.3.3.m1.2.2.1.1.2.2">ùëÜ</ci><ci id="alg2.3.3.m1.2.2.1.1.2.3.cmml" xref="alg2.3.3.m1.2.2.1.1.2.3">ùë°</ci></apply><apply id="alg2.3.3.m1.2.2.1.1.3.cmml" xref="alg2.3.3.m1.2.2.1.1.3"><times id="alg2.3.3.m1.2.2.1.1.3.1.cmml" xref="alg2.3.3.m1.2.2.1.1.3.1"></times><ci id="alg2.3.3.m1.2.2.1.1.3.2.cmml" xref="alg2.3.3.m1.2.2.1.1.3.2">ùêµ</ci><ci id="alg2.3.3.m1.2.2.1.1.3.3.cmml" xref="alg2.3.3.m1.2.2.1.1.3.3">ùëô</ci><ci id="alg2.3.3.m1.2.2.1.1.3.4.cmml" xref="alg2.3.3.m1.2.2.1.1.3.4">ùëò</ci></apply></apply><ci id="alg2.3.3.m1.1.1.cmml" xref="alg2.3.3.m1.1.1">ùëÜ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.3.3.m1.2c">S_{t}=Blk.S</annotation></semantics></math>; <math id="alg2.4.4.m2.2" class="ltx_Math" alttext="\overline{S}_{t}=Blk.\overline{S}" display="inline"><semantics id="alg2.4.4.m2.2a"><mrow id="alg2.4.4.m2.2.2.1" xref="alg2.4.4.m2.2.2.2.cmml"><mrow id="alg2.4.4.m2.2.2.1.1" xref="alg2.4.4.m2.2.2.1.1.cmml"><msub id="alg2.4.4.m2.2.2.1.1.2" xref="alg2.4.4.m2.2.2.1.1.2.cmml"><mover accent="true" id="alg2.4.4.m2.2.2.1.1.2.2" xref="alg2.4.4.m2.2.2.1.1.2.2.cmml"><mi id="alg2.4.4.m2.2.2.1.1.2.2.2" xref="alg2.4.4.m2.2.2.1.1.2.2.2.cmml">S</mi><mo id="alg2.4.4.m2.2.2.1.1.2.2.1" xref="alg2.4.4.m2.2.2.1.1.2.2.1.cmml">¬Ø</mo></mover><mi id="alg2.4.4.m2.2.2.1.1.2.3" xref="alg2.4.4.m2.2.2.1.1.2.3.cmml">t</mi></msub><mo id="alg2.4.4.m2.2.2.1.1.1" xref="alg2.4.4.m2.2.2.1.1.1.cmml">=</mo><mrow id="alg2.4.4.m2.2.2.1.1.3" xref="alg2.4.4.m2.2.2.1.1.3.cmml"><mi id="alg2.4.4.m2.2.2.1.1.3.2" xref="alg2.4.4.m2.2.2.1.1.3.2.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg2.4.4.m2.2.2.1.1.3.1" xref="alg2.4.4.m2.2.2.1.1.3.1.cmml">‚Äã</mo><mi id="alg2.4.4.m2.2.2.1.1.3.3" xref="alg2.4.4.m2.2.2.1.1.3.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg2.4.4.m2.2.2.1.1.3.1a" xref="alg2.4.4.m2.2.2.1.1.3.1.cmml">‚Äã</mo><mi id="alg2.4.4.m2.2.2.1.1.3.4" xref="alg2.4.4.m2.2.2.1.1.3.4.cmml">k</mi></mrow></mrow><mo lspace="0em" rspace="0.167em" id="alg2.4.4.m2.2.2.1.2" xref="alg2.4.4.m2.2.2.2a.cmml">.</mo><mover accent="true" id="alg2.4.4.m2.1.1" xref="alg2.4.4.m2.1.1.cmml"><mi id="alg2.4.4.m2.1.1.2" xref="alg2.4.4.m2.1.1.2.cmml">S</mi><mo id="alg2.4.4.m2.1.1.1" xref="alg2.4.4.m2.1.1.1.cmml">¬Ø</mo></mover></mrow><annotation-xml encoding="MathML-Content" id="alg2.4.4.m2.2b"><apply id="alg2.4.4.m2.2.2.2.cmml" xref="alg2.4.4.m2.2.2.1"><csymbol cd="ambiguous" id="alg2.4.4.m2.2.2.2a.cmml" xref="alg2.4.4.m2.2.2.1.2">formulae-sequence</csymbol><apply id="alg2.4.4.m2.2.2.1.1.cmml" xref="alg2.4.4.m2.2.2.1.1"><eq id="alg2.4.4.m2.2.2.1.1.1.cmml" xref="alg2.4.4.m2.2.2.1.1.1"></eq><apply id="alg2.4.4.m2.2.2.1.1.2.cmml" xref="alg2.4.4.m2.2.2.1.1.2"><csymbol cd="ambiguous" id="alg2.4.4.m2.2.2.1.1.2.1.cmml" xref="alg2.4.4.m2.2.2.1.1.2">subscript</csymbol><apply id="alg2.4.4.m2.2.2.1.1.2.2.cmml" xref="alg2.4.4.m2.2.2.1.1.2.2"><ci id="alg2.4.4.m2.2.2.1.1.2.2.1.cmml" xref="alg2.4.4.m2.2.2.1.1.2.2.1">¬Ø</ci><ci id="alg2.4.4.m2.2.2.1.1.2.2.2.cmml" xref="alg2.4.4.m2.2.2.1.1.2.2.2">ùëÜ</ci></apply><ci id="alg2.4.4.m2.2.2.1.1.2.3.cmml" xref="alg2.4.4.m2.2.2.1.1.2.3">ùë°</ci></apply><apply id="alg2.4.4.m2.2.2.1.1.3.cmml" xref="alg2.4.4.m2.2.2.1.1.3"><times id="alg2.4.4.m2.2.2.1.1.3.1.cmml" xref="alg2.4.4.m2.2.2.1.1.3.1"></times><ci id="alg2.4.4.m2.2.2.1.1.3.2.cmml" xref="alg2.4.4.m2.2.2.1.1.3.2">ùêµ</ci><ci id="alg2.4.4.m2.2.2.1.1.3.3.cmml" xref="alg2.4.4.m2.2.2.1.1.3.3">ùëô</ci><ci id="alg2.4.4.m2.2.2.1.1.3.4.cmml" xref="alg2.4.4.m2.2.2.1.1.3.4">ùëò</ci></apply></apply><apply id="alg2.4.4.m2.1.1.cmml" xref="alg2.4.4.m2.1.1"><ci id="alg2.4.4.m2.1.1.1.cmml" xref="alg2.4.4.m2.1.1.1">¬Ø</ci><ci id="alg2.4.4.m2.1.1.2.cmml" xref="alg2.4.4.m2.1.1.2">ùëÜ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.4.4.m2.2c">\overline{S}_{t}=Blk.\overline{S}</annotation></semantics></math>;
</div>
<div id="alg2.5.5" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span>
<span id="alg2.5.5.2" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg2.5.5.1" class="ltx_emph ltx_font_italic"><math id="alg2.5.5.1.m1.1" class="ltx_Math" alttext="\|S_{t}-\overline{S}_{t}\|_{p}\leq D" display="inline"><semantics id="alg2.5.5.1.m1.1a"><mrow id="alg2.5.5.1.m1.1.1" xref="alg2.5.5.1.m1.1.1.cmml"><msub id="alg2.5.5.1.m1.1.1.1" xref="alg2.5.5.1.m1.1.1.1.cmml"><mrow id="alg2.5.5.1.m1.1.1.1.1.1" xref="alg2.5.5.1.m1.1.1.1.1.2.cmml"><mo stretchy="false" id="alg2.5.5.1.m1.1.1.1.1.1.2" xref="alg2.5.5.1.m1.1.1.1.1.2.1.cmml">‚Äñ</mo><mrow id="alg2.5.5.1.m1.1.1.1.1.1.1" xref="alg2.5.5.1.m1.1.1.1.1.1.1.cmml"><msub id="alg2.5.5.1.m1.1.1.1.1.1.1.2" xref="alg2.5.5.1.m1.1.1.1.1.1.1.2.cmml"><mi id="alg2.5.5.1.m1.1.1.1.1.1.1.2.2" xref="alg2.5.5.1.m1.1.1.1.1.1.1.2.2.cmml">S</mi><mi id="alg2.5.5.1.m1.1.1.1.1.1.1.2.3" xref="alg2.5.5.1.m1.1.1.1.1.1.1.2.3.cmml">t</mi></msub><mo id="alg2.5.5.1.m1.1.1.1.1.1.1.1" xref="alg2.5.5.1.m1.1.1.1.1.1.1.1.cmml">‚àí</mo><msub id="alg2.5.5.1.m1.1.1.1.1.1.1.3" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.cmml"><mover accent="true" id="alg2.5.5.1.m1.1.1.1.1.1.1.3.2" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.cmml"><mi id="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.2" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.2.cmml">S</mi><mo id="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.1" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.1.cmml">¬Ø</mo></mover><mi id="alg2.5.5.1.m1.1.1.1.1.1.1.3.3" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="alg2.5.5.1.m1.1.1.1.1.1.3" xref="alg2.5.5.1.m1.1.1.1.1.2.1.cmml">‚Äñ</mo></mrow><mi id="alg2.5.5.1.m1.1.1.1.3" xref="alg2.5.5.1.m1.1.1.1.3.cmml">p</mi></msub><mo id="alg2.5.5.1.m1.1.1.2" xref="alg2.5.5.1.m1.1.1.2.cmml">‚â§</mo><mi id="alg2.5.5.1.m1.1.1.3" xref="alg2.5.5.1.m1.1.1.3.cmml">D</mi></mrow><annotation-xml encoding="MathML-Content" id="alg2.5.5.1.m1.1b"><apply id="alg2.5.5.1.m1.1.1.cmml" xref="alg2.5.5.1.m1.1.1"><leq id="alg2.5.5.1.m1.1.1.2.cmml" xref="alg2.5.5.1.m1.1.1.2"></leq><apply id="alg2.5.5.1.m1.1.1.1.cmml" xref="alg2.5.5.1.m1.1.1.1"><csymbol cd="ambiguous" id="alg2.5.5.1.m1.1.1.1.2.cmml" xref="alg2.5.5.1.m1.1.1.1">subscript</csymbol><apply id="alg2.5.5.1.m1.1.1.1.1.2.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1"><csymbol cd="latexml" id="alg2.5.5.1.m1.1.1.1.1.2.1.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.2">norm</csymbol><apply id="alg2.5.5.1.m1.1.1.1.1.1.1.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1"><minus id="alg2.5.5.1.m1.1.1.1.1.1.1.1.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.1"></minus><apply id="alg2.5.5.1.m1.1.1.1.1.1.1.2.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="alg2.5.5.1.m1.1.1.1.1.1.1.2.1.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.2">subscript</csymbol><ci id="alg2.5.5.1.m1.1.1.1.1.1.1.2.2.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.2.2">ùëÜ</ci><ci id="alg2.5.5.1.m1.1.1.1.1.1.1.2.3.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.2.3">ùë°</ci></apply><apply id="alg2.5.5.1.m1.1.1.1.1.1.1.3.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="alg2.5.5.1.m1.1.1.1.1.1.1.3.1.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3">subscript</csymbol><apply id="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.2"><ci id="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.1.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.1">¬Ø</ci><ci id="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.2.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.2.2">ùëÜ</ci></apply><ci id="alg2.5.5.1.m1.1.1.1.1.1.1.3.3.cmml" xref="alg2.5.5.1.m1.1.1.1.1.1.1.3.3">ùë°</ci></apply></apply></apply><ci id="alg2.5.5.1.m1.1.1.1.3.cmml" xref="alg2.5.5.1.m1.1.1.1.3">ùëù</ci></apply><ci id="alg2.5.5.1.m1.1.1.3.cmml" xref="alg2.5.5.1.m1.1.1.3">ùê∑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.5.5.1.m1.1c">\|S_{t}-\overline{S}_{t}\|_{p}\leq D</annotation></semantics></math></em>¬†<span id="alg2.5.5.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg2.6.6" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg2.6.6.2" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg2.6.6.1" class="ltx_emph ltx_font_italic"><math id="alg2.6.6.1.m1.1" class="ltx_Math" alttext="\|\overline{S}-\overline{S}_{t}\|_{p}\leq D" display="inline"><semantics id="alg2.6.6.1.m1.1a"><mrow id="alg2.6.6.1.m1.1.1" xref="alg2.6.6.1.m1.1.1.cmml"><msub id="alg2.6.6.1.m1.1.1.1" xref="alg2.6.6.1.m1.1.1.1.cmml"><mrow id="alg2.6.6.1.m1.1.1.1.1.1" xref="alg2.6.6.1.m1.1.1.1.1.2.cmml"><mo stretchy="false" id="alg2.6.6.1.m1.1.1.1.1.1.2" xref="alg2.6.6.1.m1.1.1.1.1.2.1.cmml">‚Äñ</mo><mrow id="alg2.6.6.1.m1.1.1.1.1.1.1" xref="alg2.6.6.1.m1.1.1.1.1.1.1.cmml"><mover accent="true" id="alg2.6.6.1.m1.1.1.1.1.1.1.2" xref="alg2.6.6.1.m1.1.1.1.1.1.1.2.cmml"><mi id="alg2.6.6.1.m1.1.1.1.1.1.1.2.2" xref="alg2.6.6.1.m1.1.1.1.1.1.1.2.2.cmml">S</mi><mo id="alg2.6.6.1.m1.1.1.1.1.1.1.2.1" xref="alg2.6.6.1.m1.1.1.1.1.1.1.2.1.cmml">¬Ø</mo></mover><mo id="alg2.6.6.1.m1.1.1.1.1.1.1.1" xref="alg2.6.6.1.m1.1.1.1.1.1.1.1.cmml">‚àí</mo><msub id="alg2.6.6.1.m1.1.1.1.1.1.1.3" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.cmml"><mover accent="true" id="alg2.6.6.1.m1.1.1.1.1.1.1.3.2" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.cmml"><mi id="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.2" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.2.cmml">S</mi><mo id="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.1" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.1.cmml">¬Ø</mo></mover><mi id="alg2.6.6.1.m1.1.1.1.1.1.1.3.3" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.3.cmml">t</mi></msub></mrow><mo stretchy="false" id="alg2.6.6.1.m1.1.1.1.1.1.3" xref="alg2.6.6.1.m1.1.1.1.1.2.1.cmml">‚Äñ</mo></mrow><mi id="alg2.6.6.1.m1.1.1.1.3" xref="alg2.6.6.1.m1.1.1.1.3.cmml">p</mi></msub><mo id="alg2.6.6.1.m1.1.1.2" xref="alg2.6.6.1.m1.1.1.2.cmml">‚â§</mo><mi id="alg2.6.6.1.m1.1.1.3" xref="alg2.6.6.1.m1.1.1.3.cmml">D</mi></mrow><annotation-xml encoding="MathML-Content" id="alg2.6.6.1.m1.1b"><apply id="alg2.6.6.1.m1.1.1.cmml" xref="alg2.6.6.1.m1.1.1"><leq id="alg2.6.6.1.m1.1.1.2.cmml" xref="alg2.6.6.1.m1.1.1.2"></leq><apply id="alg2.6.6.1.m1.1.1.1.cmml" xref="alg2.6.6.1.m1.1.1.1"><csymbol cd="ambiguous" id="alg2.6.6.1.m1.1.1.1.2.cmml" xref="alg2.6.6.1.m1.1.1.1">subscript</csymbol><apply id="alg2.6.6.1.m1.1.1.1.1.2.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1"><csymbol cd="latexml" id="alg2.6.6.1.m1.1.1.1.1.2.1.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.2">norm</csymbol><apply id="alg2.6.6.1.m1.1.1.1.1.1.1.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1"><minus id="alg2.6.6.1.m1.1.1.1.1.1.1.1.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.1"></minus><apply id="alg2.6.6.1.m1.1.1.1.1.1.1.2.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.2"><ci id="alg2.6.6.1.m1.1.1.1.1.1.1.2.1.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.2.1">¬Ø</ci><ci id="alg2.6.6.1.m1.1.1.1.1.1.1.2.2.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.2.2">ùëÜ</ci></apply><apply id="alg2.6.6.1.m1.1.1.1.1.1.1.3.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="alg2.6.6.1.m1.1.1.1.1.1.1.3.1.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3">subscript</csymbol><apply id="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.2"><ci id="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.1.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.1">¬Ø</ci><ci id="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.2.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.2.2">ùëÜ</ci></apply><ci id="alg2.6.6.1.m1.1.1.1.1.1.1.3.3.cmml" xref="alg2.6.6.1.m1.1.1.1.1.1.1.3.3">ùë°</ci></apply></apply></apply><ci id="alg2.6.6.1.m1.1.1.1.3.cmml" xref="alg2.6.6.1.m1.1.1.1.3">ùëù</ci></apply><ci id="alg2.6.6.1.m1.1.1.3.cmml" xref="alg2.6.6.1.m1.1.1.3">ùê∑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.6.6.1.m1.1c">\|\overline{S}-\overline{S}_{t}\|_{p}\leq D</annotation></semantics></math></em>¬†<span id="alg2.6.6.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg2.7.7" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg2.7.7.2" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg2.7.7.1" class="ltx_emph ltx_font_italic">Blk.ID<math id="alg2.7.7.1.m1.1" class="ltx_Math" alttext="\geq" display="inline"><semantics id="alg2.7.7.1.m1.1a"><mo id="alg2.7.7.1.m1.1.1" xref="alg2.7.7.1.m1.1.1.cmml">‚â•</mo><annotation-xml encoding="MathML-Content" id="alg2.7.7.1.m1.1b"><geq id="alg2.7.7.1.m1.1.1.cmml" xref="alg2.7.7.1.m1.1.1"></geq></annotation-xml><annotation encoding="application/x-tex" id="alg2.7.7.1.m1.1c">\geq</annotation></semantics></math> longest chain length</em>¬†<span id="alg2.7.7.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg2.7.11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†<span id="alg2.7.11.1" class="ltx_text ltx_font_bold">return</span> ValuationResult=ture;
</div>
<div id="alg2.7.12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† 
</div>
<div id="alg2.7.13" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end if
</div>
<div id="alg2.7.14" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†<span id="alg2.7.14.1" class="ltx_text ltx_font_bold">else</span> 
</div>
<div id="alg2.7.15" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†<span id="alg2.7.15.1" class="ltx_text ltx_font_bold">return</span> ValuationResult=false;
</div>
<div id="alg2.7.16" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end if
</div>
<div id="alg2.7.17" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
</div>
<div id="alg2.7.18" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end if
</div>
<div id="alg2.7.19" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†<span id="alg2.7.19.1" class="ltx_text ltx_font_bold">else</span> 
</div>
<div id="alg2.7.20" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†<span id="alg2.7.20.1" class="ltx_text ltx_font_bold">return</span> ValuationResult=false;
</div>
<div id="alg2.7.21" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end if
</div>
<div id="alg2.7.22" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">16</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
</div>
<div id="alg2.7.23" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">17</span> end if
</div>
<div id="alg2.7.24" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">18</span><span id="alg2.7.24.1" class="ltx_text ltx_font_bold">else</span> 
</div>
<div id="alg2.7.25" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">19</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†<span id="alg2.7.25.1" class="ltx_text ltx_font_bold">return</span> ValuationResult=false;
</div>
<div id="alg2.7.26" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">20</span> end if
</div>
<div id="alg2.7.27" class="ltx_listingline">
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span id="alg2.9.1.1" class="ltx_text ltx_font_bold">Algorithm¬†2</span> </span>VerifyBlock (new Blk)</figcaption>
</figure>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Dynamic Mining Difficulty</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">The difficulty level in mining new blocks can be adapted dynamically. There are two main factors influencing the difficulty updates: 1) the total mining power of the miners and 2) the speed of generating a block. Given the same mining power, the difficulty level should be decreased as the the block generation speed increases. Given the same block generation speed, the difficulty level should be increased as the mining power increases. Difficulty update can be achieved by deploying a smart contract. For example, in BitCoin, a block is generated in every ten minutes and the difficulty level is updated in every two-week duration.</p>
</div>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>The Payment Scheme</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p id="S4.SS3.p1.4" class="ltx_p">With the FedCoin system in place, an FL model requester starts by depositing <math id="S4.SS3.p1.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p1.1.m1.1a"><mi id="S4.SS3.p1.1.m1.1.1" xref="S4.SS3.p1.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.1.m1.1b"><ci id="S4.SS3.p1.1.m1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.1.m1.1c">V</annotation></semantics></math> FedCoins in the FL server. The value of <math id="S4.SS3.p1.2.m2.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p1.2.m2.1a"><mi id="S4.SS3.p1.2.m2.1.1" xref="S4.SS3.p1.2.m2.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.2.m2.1b"><ci id="S4.SS3.p1.2.m2.1.1.cmml" xref="S4.SS3.p1.2.m2.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.2.m2.1c">V</annotation></semantics></math> shall be no greater than the value of the FL model for the requester. To divide <math id="S4.SS3.p1.3.m3.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p1.3.m3.1a"><mi id="S4.SS3.p1.3.m3.1.1" xref="S4.SS3.p1.3.m3.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.3.m3.1b"><ci id="S4.SS3.p1.3.m3.1.1.cmml" xref="S4.SS3.p1.3.m3.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.3.m3.1c">V</annotation></semantics></math> among FL clients, blockchain miners, and the FL server, all the entities should register a transaction account. The value of <math id="S4.SS3.p1.4.m4.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p1.4.m4.1a"><mi id="S4.SS3.p1.4.m4.1.1" xref="S4.SS3.p1.4.m4.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.4.m4.1b"><ci id="S4.SS3.p1.4.m4.1.1.cmml" xref="S4.SS3.p1.4.m4.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.4.m4.1c">V</annotation></semantics></math> is then divided into three parts.</p>
<ul id="S4.I1" class="ltx_itemize">
<li id="S4.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">‚Ä¢</span> 
<div id="S4.I1.i1.p1" class="ltx_para">
<p id="S4.I1.i1.p1.1" class="ltx_p">TrainPrice: payments to the FL clients;</p>
</div>
</li>
<li id="S4.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">‚Ä¢</span> 
<div id="S4.I1.i2.p1" class="ltx_para">
<p id="S4.I1.i2.p1.1" class="ltx_p">ComPrice: payment to the FL sever for processing the model aggregation;</p>
</div>
</li>
<li id="S4.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">‚Ä¢</span> 
<div id="S4.I1.i3.p1" class="ltx_para">
<p id="S4.I1.i3.p1.1" class="ltx_p">SapPrice: payments to the blockchain network miners for calculating the Shapley value of each client.</p>
</div>
</li>
</ul>
</div>
<div id="S4.SS3.p2" class="ltx_para">
<p id="S4.SS3.p2.3" class="ltx_p">The division can be determined by a pre-agreed smart contract. For example, the division contract could specify that TrainPrice:ComPrice:SapPrice=7:1:2. Then, TrainPrice=0.7<math id="S4.SS3.p2.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p2.1.m1.1a"><mi id="S4.SS3.p2.1.m1.1.1" xref="S4.SS3.p2.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p2.1.m1.1b"><ci id="S4.SS3.p2.1.m1.1.1.cmml" xref="S4.SS3.p2.1.m1.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p2.1.m1.1c">V</annotation></semantics></math>, ComPrice=0.1<math id="S4.SS3.p2.2.m2.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p2.2.m2.1a"><mi id="S4.SS3.p2.2.m2.1.1" xref="S4.SS3.p2.2.m2.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p2.2.m2.1b"><ci id="S4.SS3.p2.2.m2.1.1.cmml" xref="S4.SS3.p2.2.m2.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p2.2.m2.1c">V</annotation></semantics></math>, and SapPrice=0.2<math id="S4.SS3.p2.3.m3.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p2.3.m3.1a"><mi id="S4.SS3.p2.3.m3.1.1" xref="S4.SS3.p2.3.m3.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p2.3.m3.1b"><ci id="S4.SS3.p2.3.m3.1.1.cmml" xref="S4.SS3.p2.3.m3.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p2.3.m3.1c">V</annotation></semantics></math>. The specific payment scheme is shown in Algorithm <a href="#alg3" title="In 4.3 The Payment Scheme ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>.</p>
</div>
<figure id="alg3" class="ltx_float ltx_algorithm">
<div id="alg3.8" class="ltx_listing ltx_lst_numbers_left ltx_listing">
<div id="alg3.8.9" class="ltx_listingline">

<span id="alg3.8.9.1" class="ltx_text"><span id="alg3.8.9.1.1" class="ltx_text ltx_font_bold">Input:</span> </span>V: The value paid by a model requester;
</div>
<div id="alg3.1.1" class="ltx_listingline">
¬†¬†¬†¬†¬†¬†¬†¬†¬†¬†<math id="alg3.1.1.m1.1" class="ltx_Math" alttext="\overline{S}" display="inline"><semantics id="alg3.1.1.m1.1a"><mover accent="true" id="alg3.1.1.m1.1.1" xref="alg3.1.1.m1.1.1.cmml"><mi id="alg3.1.1.m1.1.1.2" xref="alg3.1.1.m1.1.1.2.cmml">S</mi><mo id="alg3.1.1.m1.1.1.1" xref="alg3.1.1.m1.1.1.1.cmml">¬Ø</mo></mover><annotation-xml encoding="MathML-Content" id="alg3.1.1.m1.1b"><apply id="alg3.1.1.m1.1.1.cmml" xref="alg3.1.1.m1.1.1"><ci id="alg3.1.1.m1.1.1.1.cmml" xref="alg3.1.1.m1.1.1.1">¬Ø</ci><ci id="alg3.1.1.m1.1.1.2.cmml" xref="alg3.1.1.m1.1.1.2">ùëÜ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.1.1.m1.1c">\overline{S}</annotation></semantics></math>: The final aggragated Shapley Value;
</div>
<div id="alg3.8.10" class="ltx_listingline">
</div>
<div id="alg3.2.2" class="ltx_listingline">
<span id="alg3.2.2.1" class="ltx_text"><span id="alg3.2.2.1.1" class="ltx_text ltx_font_bold">Output:</span> </span>An allocation of <math id="alg3.2.2.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="alg3.2.2.m1.1a"><mi id="alg3.2.2.m1.1.1" xref="alg3.2.2.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="alg3.2.2.m1.1b"><ci id="alg3.2.2.m1.1.1.cmml" xref="alg3.2.2.m1.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.2.2.m1.1c">V</annotation></semantics></math>
</div>
<div id="alg3.3.3" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span>
<span id="alg3.3.3.2" class="ltx_text ltx_font_bold">while</span>¬†<em id="alg3.3.3.1" class="ltx_emph ltx_font_italic">FL server receives <math id="alg3.3.3.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="alg3.3.3.1.m1.1a"><mi id="alg3.3.3.1.m1.1.1" xref="alg3.3.3.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="alg3.3.3.1.m1.1b"><ci id="alg3.3.3.1.m1.1.1.cmml" xref="alg3.3.3.1.m1.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.3.3.1.m1.1c">V</annotation></semantics></math> from a model requester</em>¬†<span id="alg3.3.3.3" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg3.8.11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
Calculate TrainPrice and SapPrice;
</div>
<div id="alg3.8.12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
Publish traing task with price TrainPrice;
</div>
<div id="alg3.8.13" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg3.8.13.1" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg3.8.13.2" class="ltx_emph ltx_font_italic">The model is well trained</em>¬†<span id="alg3.8.13.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg3.8.14" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†Publish a Shapley task to blockchain network with pirce SapPrice;
</div>
<div id="alg3.8.15" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end if
</div>
<div id="alg3.8.16" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
</div>
<div id="alg3.8.17" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span> end while
</div>
<div id="alg3.8.18" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span><span id="alg3.8.18.1" class="ltx_text ltx_font_bold">while</span>¬†<em id="alg3.8.18.2" class="ltx_emph ltx_font_italic">a new block is mined</em>¬†<span id="alg3.8.18.3" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg3.4.4" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
FL server transfers TrainPrice+SapPrice to the block winner;
<span id="alg3.4.4.2" class="ltx_text ltx_font_bold">for</span>¬†<em id="alg3.4.4.1" class="ltx_emph ltx_font_italic">each FL client <math id="alg3.4.4.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="alg3.4.4.1.m1.1a"><mi id="alg3.4.4.1.m1.1.1" xref="alg3.4.4.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="alg3.4.4.1.m1.1b"><ci id="alg3.4.4.1.m1.1.1.cmml" xref="alg3.4.4.1.m1.1.1">ùëñ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.4.4.1.m1.1c">i</annotation></semantics></math></em>¬†<span id="alg3.4.4.3" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg3.5.5" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
<span id="alg3.5.5.2" class="ltx_text ltx_font_bold">if</span>¬†<em id="alg3.5.5.1" class="ltx_emph ltx_font_italic"><math id="alg3.5.5.1.m1.1" class="ltx_Math" alttext="S_{i}&gt;0" display="inline"><semantics id="alg3.5.5.1.m1.1a"><mrow id="alg3.5.5.1.m1.1.1" xref="alg3.5.5.1.m1.1.1.cmml"><msub id="alg3.5.5.1.m1.1.1.2" xref="alg3.5.5.1.m1.1.1.2.cmml"><mi id="alg3.5.5.1.m1.1.1.2.2" xref="alg3.5.5.1.m1.1.1.2.2.cmml">S</mi><mi id="alg3.5.5.1.m1.1.1.2.3" xref="alg3.5.5.1.m1.1.1.2.3.cmml">i</mi></msub><mo id="alg3.5.5.1.m1.1.1.1" xref="alg3.5.5.1.m1.1.1.1.cmml">&gt;</mo><mn id="alg3.5.5.1.m1.1.1.3" xref="alg3.5.5.1.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="alg3.5.5.1.m1.1b"><apply id="alg3.5.5.1.m1.1.1.cmml" xref="alg3.5.5.1.m1.1.1"><gt id="alg3.5.5.1.m1.1.1.1.cmml" xref="alg3.5.5.1.m1.1.1.1"></gt><apply id="alg3.5.5.1.m1.1.1.2.cmml" xref="alg3.5.5.1.m1.1.1.2"><csymbol cd="ambiguous" id="alg3.5.5.1.m1.1.1.2.1.cmml" xref="alg3.5.5.1.m1.1.1.2">subscript</csymbol><ci id="alg3.5.5.1.m1.1.1.2.2.cmml" xref="alg3.5.5.1.m1.1.1.2.2">ùëÜ</ci><ci id="alg3.5.5.1.m1.1.1.2.3.cmml" xref="alg3.5.5.1.m1.1.1.2.3">ùëñ</ci></apply><cn type="integer" id="alg3.5.5.1.m1.1.1.3.cmml" xref="alg3.5.5.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.5.5.1.m1.1c">S_{i}&gt;0</annotation></semantics></math></em>¬†<span id="alg3.5.5.3" class="ltx_text ltx_font_bold">then</span> 
</div>
<div id="alg3.6.6" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†<math id="alg3.6.6.m1.1" class="ltx_Math" alttext="p_{i}=\frac{S_{i}}{\sum_{S_{j}&gt;0}S_{j}}" display="inline"><semantics id="alg3.6.6.m1.1a"><mrow id="alg3.6.6.m1.1.1" xref="alg3.6.6.m1.1.1.cmml"><msub id="alg3.6.6.m1.1.1.2" xref="alg3.6.6.m1.1.1.2.cmml"><mi id="alg3.6.6.m1.1.1.2.2" xref="alg3.6.6.m1.1.1.2.2.cmml">p</mi><mi id="alg3.6.6.m1.1.1.2.3" xref="alg3.6.6.m1.1.1.2.3.cmml">i</mi></msub><mo id="alg3.6.6.m1.1.1.1" xref="alg3.6.6.m1.1.1.1.cmml">=</mo><mfrac id="alg3.6.6.m1.1.1.3" xref="alg3.6.6.m1.1.1.3.cmml"><msub id="alg3.6.6.m1.1.1.3.2" xref="alg3.6.6.m1.1.1.3.2.cmml"><mi id="alg3.6.6.m1.1.1.3.2.2" xref="alg3.6.6.m1.1.1.3.2.2.cmml">S</mi><mi id="alg3.6.6.m1.1.1.3.2.3" xref="alg3.6.6.m1.1.1.3.2.3.cmml">i</mi></msub><mrow id="alg3.6.6.m1.1.1.3.3" xref="alg3.6.6.m1.1.1.3.3.cmml"><mstyle displaystyle="false" id="alg3.6.6.m1.1.1.3.3.1" xref="alg3.6.6.m1.1.1.3.3.1.cmml"><msub id="alg3.6.6.m1.1.1.3.3.1a" xref="alg3.6.6.m1.1.1.3.3.1.cmml"><mo id="alg3.6.6.m1.1.1.3.3.1.2" xref="alg3.6.6.m1.1.1.3.3.1.2.cmml">‚àë</mo><mrow id="alg3.6.6.m1.1.1.3.3.1.3" xref="alg3.6.6.m1.1.1.3.3.1.3.cmml"><msub id="alg3.6.6.m1.1.1.3.3.1.3.2" xref="alg3.6.6.m1.1.1.3.3.1.3.2.cmml"><mi id="alg3.6.6.m1.1.1.3.3.1.3.2.2" xref="alg3.6.6.m1.1.1.3.3.1.3.2.2.cmml">S</mi><mi id="alg3.6.6.m1.1.1.3.3.1.3.2.3" xref="alg3.6.6.m1.1.1.3.3.1.3.2.3.cmml">j</mi></msub><mo id="alg3.6.6.m1.1.1.3.3.1.3.1" xref="alg3.6.6.m1.1.1.3.3.1.3.1.cmml">&gt;</mo><mn id="alg3.6.6.m1.1.1.3.3.1.3.3" xref="alg3.6.6.m1.1.1.3.3.1.3.3.cmml">0</mn></mrow></msub></mstyle><msub id="alg3.6.6.m1.1.1.3.3.2" xref="alg3.6.6.m1.1.1.3.3.2.cmml"><mi id="alg3.6.6.m1.1.1.3.3.2.2" xref="alg3.6.6.m1.1.1.3.3.2.2.cmml">S</mi><mi id="alg3.6.6.m1.1.1.3.3.2.3" xref="alg3.6.6.m1.1.1.3.3.2.3.cmml">j</mi></msub></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="alg3.6.6.m1.1b"><apply id="alg3.6.6.m1.1.1.cmml" xref="alg3.6.6.m1.1.1"><eq id="alg3.6.6.m1.1.1.1.cmml" xref="alg3.6.6.m1.1.1.1"></eq><apply id="alg3.6.6.m1.1.1.2.cmml" xref="alg3.6.6.m1.1.1.2"><csymbol cd="ambiguous" id="alg3.6.6.m1.1.1.2.1.cmml" xref="alg3.6.6.m1.1.1.2">subscript</csymbol><ci id="alg3.6.6.m1.1.1.2.2.cmml" xref="alg3.6.6.m1.1.1.2.2">ùëù</ci><ci id="alg3.6.6.m1.1.1.2.3.cmml" xref="alg3.6.6.m1.1.1.2.3">ùëñ</ci></apply><apply id="alg3.6.6.m1.1.1.3.cmml" xref="alg3.6.6.m1.1.1.3"><divide id="alg3.6.6.m1.1.1.3.1.cmml" xref="alg3.6.6.m1.1.1.3"></divide><apply id="alg3.6.6.m1.1.1.3.2.cmml" xref="alg3.6.6.m1.1.1.3.2"><csymbol cd="ambiguous" id="alg3.6.6.m1.1.1.3.2.1.cmml" xref="alg3.6.6.m1.1.1.3.2">subscript</csymbol><ci id="alg3.6.6.m1.1.1.3.2.2.cmml" xref="alg3.6.6.m1.1.1.3.2.2">ùëÜ</ci><ci id="alg3.6.6.m1.1.1.3.2.3.cmml" xref="alg3.6.6.m1.1.1.3.2.3">ùëñ</ci></apply><apply id="alg3.6.6.m1.1.1.3.3.cmml" xref="alg3.6.6.m1.1.1.3.3"><apply id="alg3.6.6.m1.1.1.3.3.1.cmml" xref="alg3.6.6.m1.1.1.3.3.1"><csymbol cd="ambiguous" id="alg3.6.6.m1.1.1.3.3.1.1.cmml" xref="alg3.6.6.m1.1.1.3.3.1">subscript</csymbol><sum id="alg3.6.6.m1.1.1.3.3.1.2.cmml" xref="alg3.6.6.m1.1.1.3.3.1.2"></sum><apply id="alg3.6.6.m1.1.1.3.3.1.3.cmml" xref="alg3.6.6.m1.1.1.3.3.1.3"><gt id="alg3.6.6.m1.1.1.3.3.1.3.1.cmml" xref="alg3.6.6.m1.1.1.3.3.1.3.1"></gt><apply id="alg3.6.6.m1.1.1.3.3.1.3.2.cmml" xref="alg3.6.6.m1.1.1.3.3.1.3.2"><csymbol cd="ambiguous" id="alg3.6.6.m1.1.1.3.3.1.3.2.1.cmml" xref="alg3.6.6.m1.1.1.3.3.1.3.2">subscript</csymbol><ci id="alg3.6.6.m1.1.1.3.3.1.3.2.2.cmml" xref="alg3.6.6.m1.1.1.3.3.1.3.2.2">ùëÜ</ci><ci id="alg3.6.6.m1.1.1.3.3.1.3.2.3.cmml" xref="alg3.6.6.m1.1.1.3.3.1.3.2.3">ùëó</ci></apply><cn type="integer" id="alg3.6.6.m1.1.1.3.3.1.3.3.cmml" xref="alg3.6.6.m1.1.1.3.3.1.3.3">0</cn></apply></apply><apply id="alg3.6.6.m1.1.1.3.3.2.cmml" xref="alg3.6.6.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="alg3.6.6.m1.1.1.3.3.2.1.cmml" xref="alg3.6.6.m1.1.1.3.3.2">subscript</csymbol><ci id="alg3.6.6.m1.1.1.3.3.2.2.cmml" xref="alg3.6.6.m1.1.1.3.3.2.2">ùëÜ</ci><ci id="alg3.6.6.m1.1.1.3.3.2.3.cmml" xref="alg3.6.6.m1.1.1.3.3.2.3">ùëó</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.6.6.m1.1c">p_{i}=\frac{S_{i}}{\sum_{S_{j}&gt;0}S_{j}}</annotation></semantics></math>TrainPrice;
</div>
<div id="alg3.8.8" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
block winner transfers <math id="alg3.7.7.m1.1" class="ltx_Math" alttext="p_{i}" display="inline"><semantics id="alg3.7.7.m1.1a"><msub id="alg3.7.7.m1.1.1" xref="alg3.7.7.m1.1.1.cmml"><mi id="alg3.7.7.m1.1.1.2" xref="alg3.7.7.m1.1.1.2.cmml">p</mi><mi id="alg3.7.7.m1.1.1.3" xref="alg3.7.7.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="alg3.7.7.m1.1b"><apply id="alg3.7.7.m1.1.1.cmml" xref="alg3.7.7.m1.1.1"><csymbol cd="ambiguous" id="alg3.7.7.m1.1.1.1.cmml" xref="alg3.7.7.m1.1.1">subscript</csymbol><ci id="alg3.7.7.m1.1.1.2.cmml" xref="alg3.7.7.m1.1.1.2">ùëù</ci><ci id="alg3.7.7.m1.1.1.3.cmml" xref="alg3.7.7.m1.1.1.3">ùëñ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.7.7.m1.1c">p_{i}</annotation></semantics></math> to <math id="alg3.8.8.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="alg3.8.8.m2.1a"><mi id="alg3.8.8.m2.1.1" xref="alg3.8.8.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="alg3.8.8.m2.1b"><ci id="alg3.8.8.m2.1.1.cmml" xref="alg3.8.8.m2.1.1">ùëñ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.8.8.m2.1c">i</annotation></semantics></math>;
</div>
<div id="alg3.8.19" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end if
</div>
<div id="alg3.8.20" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
</div>
<div id="alg3.8.21" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">16</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬† end for
</div>
<div id="alg3.8.22" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">17</span>¬†¬†<span class="ltx_rule" style="width:1px;height:100%;background:black;display:inline-block;">¬†</span>¬†¬†¬†
</div>
<div id="alg3.8.23" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">18</span> end while
</div>
<div id="alg3.8.24" class="ltx_listingline">
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span id="alg3.10.1.1" class="ltx_text ltx_font_bold">Algorithm¬†3</span> </span>The Payment Scheme in FedCoin</figcaption>
</figure>
<div id="S4.SS3.p3" class="ltx_para">
<p id="S4.SS3.p3.3" class="ltx_p">In Algorithm <a href="#alg3" title="In 4.3 The Payment Scheme ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, a model training task is successfully accepted by the FL server whenever the server receives payment <math id="S4.SS3.p3.1.m1.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p3.1.m1.1a"><mi id="S4.SS3.p3.1.m1.1.1" xref="S4.SS3.p3.1.m1.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p3.1.m1.1b"><ci id="S4.SS3.p3.1.m1.1.1.cmml" xref="S4.SS3.p3.1.m1.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p3.1.m1.1c">V</annotation></semantics></math> from the FL model requester. The payment of <math id="S4.SS3.p3.2.m2.1" class="ltx_Math" alttext="V" display="inline"><semantics id="S4.SS3.p3.2.m2.1a"><mi id="S4.SS3.p3.2.m2.1.1" xref="S4.SS3.p3.2.m2.1.1.cmml">V</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p3.2.m2.1b"><ci id="S4.SS3.p3.2.m2.1.1.cmml" xref="S4.SS3.p3.2.m2.1.1">ùëâ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p3.2.m2.1c">V</annotation></semantics></math> is confirmed when the transfer transaction (requester<math id="S4.SS3.p3.3.m3.1" class="ltx_Math" alttext="\xrightarrow{V}" display="inline"><semantics id="S4.SS3.p3.3.m3.1a"><mover accent="true" id="S4.SS3.p3.3.m3.1.1" xref="S4.SS3.p3.3.m3.1.1.cmml"><mo stretchy="false" id="S4.SS3.p3.3.m3.1.1.2" xref="S4.SS3.p3.3.m3.1.1.2.cmml">‚Üí</mo><mo id="S4.SS3.p3.3.m3.1.1.1" xref="S4.SS3.p3.3.m3.1.1.1.cmml">ùëâ</mo></mover><annotation-xml encoding="MathML-Content" id="S4.SS3.p3.3.m3.1b"><apply id="S4.SS3.p3.3.m3.1.1.cmml" xref="S4.SS3.p3.3.m3.1.1"><ci id="S4.SS3.p3.3.m3.1.1.1.cmml" xref="S4.SS3.p3.3.m3.1.1.1">ùëâ</ci><ci id="S4.SS3.p3.3.m3.1.1.2.cmml" xref="S4.SS3.p3.3.m3.1.1.2">‚Üí</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p3.3.m3.1c">\xrightarrow{V}</annotation></semantics></math>server) is recorded in the blockchain. The server then calculates TrainPrice and SapPrice and leaving ComPrice=V-TrainPrice-SapPrice as its own payment for processing the task (Line 2). The training task is then published to FL clients with price TrainPrice (Line 3). When the training task is completed, the server then publishes a SV calculation task to the blockchain network with price SapPrice (Line 4-6). As the blockchain network completes the task by successfully mining a new block, the server creates a transaction to transfer TrainPrice+SapPrice to the block winner. The block winner creates the transactions in dividing TrainPrice to the FL clients with positive Shapley value. All the transactions as well as submitted unconfirmed transactions are stored in the new block.</p>
</div>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Analysis</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">Under FedCoin, the decentralized payment scheme is reliable based on the security of proposed PoSap consensus protocol. Each miner who successfully calculated the sufficiently converging SV is allowed to record a set of transactions and receive payment from the FL server. The more mining power (i.e. resources) a miner applies, the higher its chances to become a block winner. PoSap provides incentives for miners to contribute their resources to the system, and is essential to the decentralized nature of the proposed payment system.</p>
</div>
<div id="S5.p2" class="ltx_para">
<p id="S5.p2.1" class="ltx_p">The security of PoSap is also similar to that of the BitCoin system. Empirical evidence shows that Bitcoin miners may form pools in order to decrease the variance among their incomes. Within such pools, all members contribute to the solution of each cryptopuzzle, and share the rewards proportionally to their contributions. Ideally, a feasible payment system should be designed to resist the formation of large mining pools. Bitcoin system has been shown to be vulnerable when a mining pool attracts more than 50% of the miners. Similarly, the proposed system can also only resist upto 50% of the miners colluding.</p>
</div>
<div id="S5.p3" class="ltx_para">
<p id="S5.p3.1" class="ltx_p">Next we discuss how our system fares against the selfish mining strategy <cite class="ltx_cite ltx_citemacro_cite">Eyal and Sirer (<a href="#bib.bib6" title="" class="ltx_ref">2018</a>)</cite>.</p>
</div>
<div id="Thmobservation1" class="ltx_theorem ltx_theorem_observation">
<h6 class="ltx_title ltx_runin ltx_title_theorem"><span class="ltx_tag ltx_tag_theorem"><span id="Thmobservation1.1.1.1" class="ltx_text ltx_font_bold">Observation 1</span></span></h6>
<div id="Thmobservation1.p1" class="ltx_para">
<p id="Thmobservation1.p1.1" class="ltx_p"><span id="Thmobservation1.p1.1.1" class="ltx_text ltx_font_italic">When the FL server processes FL training model requests sequentially, it is not rational for colluders to follow the selfish mining strategy.</span></p>
</div>
</div>
<div id="S5.p4" class="ltx_para">
<p id="S5.p4.1" class="ltx_p">According to Algorithm <a href="#alg3" title="In 4.3 The Payment Scheme ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, each public block winner is paid by the FL server before creating a new block containing the block reward payment transactions. When the training task is processed one by one, if a selfish miner becomes the winner but does not publish this result immedietely, it cannot receive the block rewards. Meanwhile, the selfish miner cannot mine the next block without publishing its private block since the next SV task must wait for the completion of payment in the current block in the setting of sequentially training models.</p>
</div>
<div id="Thmobservation2" class="ltx_theorem ltx_theorem_observation">
<h6 class="ltx_title ltx_runin ltx_title_theorem"><span class="ltx_tag ltx_tag_theorem"><span id="Thmobservation2.1.1.1" class="ltx_text ltx_font_bold">Observation 2</span></span></h6>
<div id="Thmobservation2.p1" class="ltx_para">
<p id="Thmobservation2.p1.1" class="ltx_p"><span id="Thmobservation2.p1.1.1" class="ltx_text ltx_font_italic">When the FL server processes FL training model requests in parallel, and all the miners have the same block propogation delay to the FL server, the expected revenue for selfish miner is greater than that for honest miners when the selfish pool attracts more then 25% of the total mining power in the blockchain network.</span></p>
</div>
</div>
<div id="S5.p5" class="ltx_para">
<p id="S5.p5.1" class="ltx_p">If the tasks are published in parallel, a selfish miner can reserve a block and continue to mine the next block. The state transation and revene analysis is same as that in <cite class="ltx_cite ltx_citemacro_cite">Eyal and Sirer (<a href="#bib.bib6" title="" class="ltx_ref">2018</a>)</cite>, resulting the condition of the threshold of selfish pool‚Äôs mining power to be 1/4 under the condition of the same propogation delay to the FL server. Thus, processing FL training model requests in parallel under the proposed scheme is not recommended.</p>
</div>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Experimental Evaluation</h2>

<div id="S6.p1" class="ltx_para">
<p id="S6.p1.1" class="ltx_p">To evaluate the proposed FedCoin, we set up a blockchain environment and design a federated learning task based on a real-world dataset. The objective of the experiments is to verify whether FedCoin can promote high quality data from distributed clients and whether the computational cost of PoSap is feasible.</p>
</div>
<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.1 </span>Experiment Settings</h3>

<div id="S6.SS1.p1" class="ltx_para">
<p id="S6.SS1.p1.1" class="ltx_p">We design our experiment based on a well-known digit classification dataset - MNIST with 70,000 images and a widely used software environment - TensorFlow - to perform federated digit classification tasks.</p>
</div>
<div id="S6.SS1.p2" class="ltx_para">
<p id="S6.SS1.p2.3" class="ltx_p">We set up a FL server and 100 FL clients. The MNIST dataset is divided among the clients such that their data quality vary. We set there are 10 groups of 10 clients each. Clients from each group own datasets which belong to one of the 10 preset quality levels. We refer to this quality level as a client‚Äôs <span id="S6.SS1.p2.3.1" class="ltx_text ltx_font_italic">type</span>. Each client of type <math id="S6.SS1.p2.1.m1.1" class="ltx_Math" alttext="T_{j}" display="inline"><semantics id="S6.SS1.p2.1.m1.1a"><msub id="S6.SS1.p2.1.m1.1.1" xref="S6.SS1.p2.1.m1.1.1.cmml"><mi id="S6.SS1.p2.1.m1.1.1.2" xref="S6.SS1.p2.1.m1.1.1.2.cmml">T</mi><mi id="S6.SS1.p2.1.m1.1.1.3" xref="S6.SS1.p2.1.m1.1.1.3.cmml">j</mi></msub><annotation-xml encoding="MathML-Content" id="S6.SS1.p2.1.m1.1b"><apply id="S6.SS1.p2.1.m1.1.1.cmml" xref="S6.SS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S6.SS1.p2.1.m1.1.1.1.cmml" xref="S6.SS1.p2.1.m1.1.1">subscript</csymbol><ci id="S6.SS1.p2.1.m1.1.1.2.cmml" xref="S6.SS1.p2.1.m1.1.1.2">ùëá</ci><ci id="S6.SS1.p2.1.m1.1.1.3.cmml" xref="S6.SS1.p2.1.m1.1.1.3">ùëó</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p2.1.m1.1c">T_{j}</annotation></semantics></math> is randomly assigned a training set following a uniform distribution over the <math id="S6.SS1.p2.2.m2.1" class="ltx_Math" alttext="10-j" display="inline"><semantics id="S6.SS1.p2.2.m2.1a"><mrow id="S6.SS1.p2.2.m2.1.1" xref="S6.SS1.p2.2.m2.1.1.cmml"><mn id="S6.SS1.p2.2.m2.1.1.2" xref="S6.SS1.p2.2.m2.1.1.2.cmml">10</mn><mo id="S6.SS1.p2.2.m2.1.1.1" xref="S6.SS1.p2.2.m2.1.1.1.cmml">‚àí</mo><mi id="S6.SS1.p2.2.m2.1.1.3" xref="S6.SS1.p2.2.m2.1.1.3.cmml">j</mi></mrow><annotation-xml encoding="MathML-Content" id="S6.SS1.p2.2.m2.1b"><apply id="S6.SS1.p2.2.m2.1.1.cmml" xref="S6.SS1.p2.2.m2.1.1"><minus id="S6.SS1.p2.2.m2.1.1.1.cmml" xref="S6.SS1.p2.2.m2.1.1.1"></minus><cn type="integer" id="S6.SS1.p2.2.m2.1.1.2.cmml" xref="S6.SS1.p2.2.m2.1.1.2">10</cn><ci id="S6.SS1.p2.2.m2.1.1.3.cmml" xref="S6.SS1.p2.2.m2.1.1.3">ùëó</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p2.2.m2.1c">10-j</annotation></semantics></math> class labels (<math id="S6.SS1.p2.3.m3.4" class="ltx_Math" alttext="j=0,1,\cdots,9" display="inline"><semantics id="S6.SS1.p2.3.m3.4a"><mrow id="S6.SS1.p2.3.m3.4.5" xref="S6.SS1.p2.3.m3.4.5.cmml"><mi id="S6.SS1.p2.3.m3.4.5.2" xref="S6.SS1.p2.3.m3.4.5.2.cmml">j</mi><mo id="S6.SS1.p2.3.m3.4.5.1" xref="S6.SS1.p2.3.m3.4.5.1.cmml">=</mo><mrow id="S6.SS1.p2.3.m3.4.5.3.2" xref="S6.SS1.p2.3.m3.4.5.3.1.cmml"><mn id="S6.SS1.p2.3.m3.1.1" xref="S6.SS1.p2.3.m3.1.1.cmml">0</mn><mo id="S6.SS1.p2.3.m3.4.5.3.2.1" xref="S6.SS1.p2.3.m3.4.5.3.1.cmml">,</mo><mn id="S6.SS1.p2.3.m3.2.2" xref="S6.SS1.p2.3.m3.2.2.cmml">1</mn><mo id="S6.SS1.p2.3.m3.4.5.3.2.2" xref="S6.SS1.p2.3.m3.4.5.3.1.cmml">,</mo><mi mathvariant="normal" id="S6.SS1.p2.3.m3.3.3" xref="S6.SS1.p2.3.m3.3.3.cmml">‚ãØ</mi><mo id="S6.SS1.p2.3.m3.4.5.3.2.3" xref="S6.SS1.p2.3.m3.4.5.3.1.cmml">,</mo><mn id="S6.SS1.p2.3.m3.4.4" xref="S6.SS1.p2.3.m3.4.4.cmml">9</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.SS1.p2.3.m3.4b"><apply id="S6.SS1.p2.3.m3.4.5.cmml" xref="S6.SS1.p2.3.m3.4.5"><eq id="S6.SS1.p2.3.m3.4.5.1.cmml" xref="S6.SS1.p2.3.m3.4.5.1"></eq><ci id="S6.SS1.p2.3.m3.4.5.2.cmml" xref="S6.SS1.p2.3.m3.4.5.2">ùëó</ci><list id="S6.SS1.p2.3.m3.4.5.3.1.cmml" xref="S6.SS1.p2.3.m3.4.5.3.2"><cn type="integer" id="S6.SS1.p2.3.m3.1.1.cmml" xref="S6.SS1.p2.3.m3.1.1">0</cn><cn type="integer" id="S6.SS1.p2.3.m3.2.2.cmml" xref="S6.SS1.p2.3.m3.2.2">1</cn><ci id="S6.SS1.p2.3.m3.3.3.cmml" xref="S6.SS1.p2.3.m3.3.3">‚ãØ</ci><cn type="integer" id="S6.SS1.p2.3.m3.4.4.cmml" xref="S6.SS1.p2.3.m3.4.4">9</cn></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p2.3.m3.4c">j=0,1,\cdots,9</annotation></semantics></math>) as its local dataset. The FL training model in our experiments is classical neural network. We adopt the popular <span id="S6.SS1.p2.3.2" class="ltx_text ltx_font_typewriter">FedAvg</span> as the FL aggragtion function, which averages the collected local model parameters to derive the global FL model parameters. Each local client trains the model for 20 iterations.</p>
</div>
<figure id="S6.F6" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F6.1" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_top" style="width:134.4pt;"><img src="/html/2002.11711/assets/x4.jpg" id="S6.F6.1.g1" class="ltx_graphics ltx_img_landscape" width="664" height="466" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>The Shapley Values Calculated in FedCoin for Clients in Different Types</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F6.2" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_top" style="width:134.4pt;"><img src="/html/2002.11711/assets/x5.jpg" id="S6.F6.2.g1" class="ltx_graphics ltx_img_landscape" width="664" height="466" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>The Shapley Values Calculated in FedCoin for Clients in Different Types</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S6.F6.3" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_top" style="width:151.8pt;"><img src="/html/2002.11711/assets/x6.jpg" id="S6.F6.3.g1" class="ltx_graphics ltx_img_landscape" width="664" height="349" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>The Block Generation Time With Mining Varied Difficulty</figcaption>
</figure>
</div>
</div>
</figure>
<div id="S6.SS1.p3" class="ltx_para">
<p id="S6.SS1.p3.1" class="ltx_p">The consensus nodes are generated based on Docker. Each consensus node can independantly communicate with each other by sending messages, performing Shapley value calculation tasks following PoSap, and verifying blocks. The total computational power is equal to that of our simulation platform (CPU Interl i7-7700, GPU 2G, RAM 8g, ROM 1t, SSD 256M). We set <math id="S6.SS1.p3.1.m1.1" class="ltx_Math" alttext="p=2" display="inline"><semantics id="S6.SS1.p3.1.m1.1a"><mrow id="S6.SS1.p3.1.m1.1.1" xref="S6.SS1.p3.1.m1.1.1.cmml"><mi id="S6.SS1.p3.1.m1.1.1.2" xref="S6.SS1.p3.1.m1.1.1.2.cmml">p</mi><mo id="S6.SS1.p3.1.m1.1.1.1" xref="S6.SS1.p3.1.m1.1.1.1.cmml">=</mo><mn id="S6.SS1.p3.1.m1.1.1.3" xref="S6.SS1.p3.1.m1.1.1.3.cmml">2</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.SS1.p3.1.m1.1b"><apply id="S6.SS1.p3.1.m1.1.1.cmml" xref="S6.SS1.p3.1.m1.1.1"><eq id="S6.SS1.p3.1.m1.1.1.1.cmml" xref="S6.SS1.p3.1.m1.1.1.1"></eq><ci id="S6.SS1.p3.1.m1.1.1.2.cmml" xref="S6.SS1.p3.1.m1.1.1.2">ùëù</ci><cn type="integer" id="S6.SS1.p3.1.m1.1.1.3.cmml" xref="S6.SS1.p3.1.m1.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p3.1.m1.1c">p=2</annotation></semantics></math> (Euler distance) in PoSap for comparing mining difficulty.</p>
</div>
</section>
<section id="S6.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.2 </span>Data Quality Evaluation</h3>

<div id="S6.SS2.p1" class="ltx_para">
<p id="S6.SS2.p1.2" class="ltx_p">We adopt Earth Mover‚Äôs Distance (EMD) as a metric to measure the data quality from the perspective of data reliability in this experiment <cite class="ltx_cite ltx_citemacro_cite">Zhao <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib21" title="" class="ltx_ref">2018</a>)</cite>. EMD captures the distance for a client‚Äôs training data distribution compared to a given distribution. Here, we use the distribution of the whole MINIST dataset as the comparison benchmark. A high EMD value for a given dataset indicates that the datast is of low quality. The data quality measured by EMD for each client type is shown in Table <a href="#S6.T2" title="Table 2 ‚Ä£ 6.2 Data Quality Evaluation ‚Ä£ 6 Experimental Evaluation ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. We can observe that the data quality linearly decreases from
<math id="S6.SS2.p1.1.m1.1" class="ltx_Math" alttext="T_{0}" display="inline"><semantics id="S6.SS2.p1.1.m1.1a"><msub id="S6.SS2.p1.1.m1.1.1" xref="S6.SS2.p1.1.m1.1.1.cmml"><mi id="S6.SS2.p1.1.m1.1.1.2" xref="S6.SS2.p1.1.m1.1.1.2.cmml">T</mi><mn id="S6.SS2.p1.1.m1.1.1.3" xref="S6.SS2.p1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS2.p1.1.m1.1b"><apply id="S6.SS2.p1.1.m1.1.1.cmml" xref="S6.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S6.SS2.p1.1.m1.1.1.1.cmml" xref="S6.SS2.p1.1.m1.1.1">subscript</csymbol><ci id="S6.SS2.p1.1.m1.1.1.2.cmml" xref="S6.SS2.p1.1.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.SS2.p1.1.m1.1.1.3.cmml" xref="S6.SS2.p1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS2.p1.1.m1.1c">T_{0}</annotation></semantics></math> to <math id="S6.SS2.p1.2.m2.1" class="ltx_Math" alttext="T_{9}" display="inline"><semantics id="S6.SS2.p1.2.m2.1a"><msub id="S6.SS2.p1.2.m2.1.1" xref="S6.SS2.p1.2.m2.1.1.cmml"><mi id="S6.SS2.p1.2.m2.1.1.2" xref="S6.SS2.p1.2.m2.1.1.2.cmml">T</mi><mn id="S6.SS2.p1.2.m2.1.1.3" xref="S6.SS2.p1.2.m2.1.1.3.cmml">9</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS2.p1.2.m2.1b"><apply id="S6.SS2.p1.2.m2.1.1.cmml" xref="S6.SS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S6.SS2.p1.2.m2.1.1.1.cmml" xref="S6.SS2.p1.2.m2.1.1">subscript</csymbol><ci id="S6.SS2.p1.2.m2.1.1.2.cmml" xref="S6.SS2.p1.2.m2.1.1.2">ùëá</ci><cn type="integer" id="S6.SS2.p1.2.m2.1.1.3.cmml" xref="S6.SS2.p1.2.m2.1.1.3">9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS2.p1.2.m2.1c">T_{9}</annotation></semantics></math></p>
</div>
<figure id="S6.T2" class="ltx_table">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 2: </span>Data quality of each client type.</figcaption>
<table id="S6.T2.10" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S6.T2.5.5" class="ltx_tr">
<th id="S6.T2.5.5.6" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Data Type</th>
<td id="S6.T2.1.1.1" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.1.1.1.m1.1" class="ltx_Math" alttext="T_{0}" display="inline"><semantics id="S6.T2.1.1.1.m1.1a"><msub id="S6.T2.1.1.1.m1.1.1" xref="S6.T2.1.1.1.m1.1.1.cmml"><mi id="S6.T2.1.1.1.m1.1.1.2" xref="S6.T2.1.1.1.m1.1.1.2.cmml">T</mi><mn id="S6.T2.1.1.1.m1.1.1.3" xref="S6.T2.1.1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.1.1.1.m1.1b"><apply id="S6.T2.1.1.1.m1.1.1.cmml" xref="S6.T2.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.1.1.1.m1.1.1.1.cmml" xref="S6.T2.1.1.1.m1.1.1">subscript</csymbol><ci id="S6.T2.1.1.1.m1.1.1.2.cmml" xref="S6.T2.1.1.1.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.1.1.1.m1.1.1.3.cmml" xref="S6.T2.1.1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.1.1.1.m1.1c">T_{0}</annotation></semantics></math></td>
<td id="S6.T2.2.2.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.2.2.2.m1.1" class="ltx_Math" alttext="T_{1}" display="inline"><semantics id="S6.T2.2.2.2.m1.1a"><msub id="S6.T2.2.2.2.m1.1.1" xref="S6.T2.2.2.2.m1.1.1.cmml"><mi id="S6.T2.2.2.2.m1.1.1.2" xref="S6.T2.2.2.2.m1.1.1.2.cmml">T</mi><mn id="S6.T2.2.2.2.m1.1.1.3" xref="S6.T2.2.2.2.m1.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.2.2.2.m1.1b"><apply id="S6.T2.2.2.2.m1.1.1.cmml" xref="S6.T2.2.2.2.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.2.2.2.m1.1.1.1.cmml" xref="S6.T2.2.2.2.m1.1.1">subscript</csymbol><ci id="S6.T2.2.2.2.m1.1.1.2.cmml" xref="S6.T2.2.2.2.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.2.2.2.m1.1.1.3.cmml" xref="S6.T2.2.2.2.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.2.2.2.m1.1c">T_{1}</annotation></semantics></math></td>
<td id="S6.T2.3.3.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.3.3.3.m1.1" class="ltx_Math" alttext="T_{2}" display="inline"><semantics id="S6.T2.3.3.3.m1.1a"><msub id="S6.T2.3.3.3.m1.1.1" xref="S6.T2.3.3.3.m1.1.1.cmml"><mi id="S6.T2.3.3.3.m1.1.1.2" xref="S6.T2.3.3.3.m1.1.1.2.cmml">T</mi><mn id="S6.T2.3.3.3.m1.1.1.3" xref="S6.T2.3.3.3.m1.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.3.3.3.m1.1b"><apply id="S6.T2.3.3.3.m1.1.1.cmml" xref="S6.T2.3.3.3.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.3.3.3.m1.1.1.1.cmml" xref="S6.T2.3.3.3.m1.1.1">subscript</csymbol><ci id="S6.T2.3.3.3.m1.1.1.2.cmml" xref="S6.T2.3.3.3.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.3.3.3.m1.1.1.3.cmml" xref="S6.T2.3.3.3.m1.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.3.3.3.m1.1c">T_{2}</annotation></semantics></math></td>
<td id="S6.T2.4.4.4" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.4.4.4.m1.1" class="ltx_Math" alttext="T_{3}" display="inline"><semantics id="S6.T2.4.4.4.m1.1a"><msub id="S6.T2.4.4.4.m1.1.1" xref="S6.T2.4.4.4.m1.1.1.cmml"><mi id="S6.T2.4.4.4.m1.1.1.2" xref="S6.T2.4.4.4.m1.1.1.2.cmml">T</mi><mn id="S6.T2.4.4.4.m1.1.1.3" xref="S6.T2.4.4.4.m1.1.1.3.cmml">3</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.4.4.4.m1.1b"><apply id="S6.T2.4.4.4.m1.1.1.cmml" xref="S6.T2.4.4.4.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.4.4.4.m1.1.1.1.cmml" xref="S6.T2.4.4.4.m1.1.1">subscript</csymbol><ci id="S6.T2.4.4.4.m1.1.1.2.cmml" xref="S6.T2.4.4.4.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.4.4.4.m1.1.1.3.cmml" xref="S6.T2.4.4.4.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.4.4.4.m1.1c">T_{3}</annotation></semantics></math></td>
<td id="S6.T2.5.5.5" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.5.5.5.m1.1" class="ltx_Math" alttext="T_{4}" display="inline"><semantics id="S6.T2.5.5.5.m1.1a"><msub id="S6.T2.5.5.5.m1.1.1" xref="S6.T2.5.5.5.m1.1.1.cmml"><mi id="S6.T2.5.5.5.m1.1.1.2" xref="S6.T2.5.5.5.m1.1.1.2.cmml">T</mi><mn id="S6.T2.5.5.5.m1.1.1.3" xref="S6.T2.5.5.5.m1.1.1.3.cmml">4</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.5.5.5.m1.1b"><apply id="S6.T2.5.5.5.m1.1.1.cmml" xref="S6.T2.5.5.5.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.5.5.5.m1.1.1.1.cmml" xref="S6.T2.5.5.5.m1.1.1">subscript</csymbol><ci id="S6.T2.5.5.5.m1.1.1.2.cmml" xref="S6.T2.5.5.5.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.5.5.5.m1.1.1.3.cmml" xref="S6.T2.5.5.5.m1.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.5.5.5.m1.1c">T_{4}</annotation></semantics></math></td>
</tr>
<tr id="S6.T2.10.11.1" class="ltx_tr">
<th id="S6.T2.10.11.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Quality (EMD)</th>
<td id="S6.T2.10.11.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0</td>
<td id="S6.T2.10.11.1.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.02</td>
<td id="S6.T2.10.11.1.4" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.04</td>
<td id="S6.T2.10.11.1.5" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.06</td>
<td id="S6.T2.10.11.1.6" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.08</td>
</tr>
<tr id="S6.T2.10.10" class="ltx_tr">
<th id="S6.T2.10.10.6" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Data Type</th>
<td id="S6.T2.6.6.1" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.6.6.1.m1.1" class="ltx_Math" alttext="T_{5}" display="inline"><semantics id="S6.T2.6.6.1.m1.1a"><msub id="S6.T2.6.6.1.m1.1.1" xref="S6.T2.6.6.1.m1.1.1.cmml"><mi id="S6.T2.6.6.1.m1.1.1.2" xref="S6.T2.6.6.1.m1.1.1.2.cmml">T</mi><mn id="S6.T2.6.6.1.m1.1.1.3" xref="S6.T2.6.6.1.m1.1.1.3.cmml">5</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.6.6.1.m1.1b"><apply id="S6.T2.6.6.1.m1.1.1.cmml" xref="S6.T2.6.6.1.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.6.6.1.m1.1.1.1.cmml" xref="S6.T2.6.6.1.m1.1.1">subscript</csymbol><ci id="S6.T2.6.6.1.m1.1.1.2.cmml" xref="S6.T2.6.6.1.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.6.6.1.m1.1.1.3.cmml" xref="S6.T2.6.6.1.m1.1.1.3">5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.6.6.1.m1.1c">T_{5}</annotation></semantics></math></td>
<td id="S6.T2.7.7.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.7.7.2.m1.1" class="ltx_Math" alttext="T_{6}" display="inline"><semantics id="S6.T2.7.7.2.m1.1a"><msub id="S6.T2.7.7.2.m1.1.1" xref="S6.T2.7.7.2.m1.1.1.cmml"><mi id="S6.T2.7.7.2.m1.1.1.2" xref="S6.T2.7.7.2.m1.1.1.2.cmml">T</mi><mn id="S6.T2.7.7.2.m1.1.1.3" xref="S6.T2.7.7.2.m1.1.1.3.cmml">6</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.7.7.2.m1.1b"><apply id="S6.T2.7.7.2.m1.1.1.cmml" xref="S6.T2.7.7.2.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.7.7.2.m1.1.1.1.cmml" xref="S6.T2.7.7.2.m1.1.1">subscript</csymbol><ci id="S6.T2.7.7.2.m1.1.1.2.cmml" xref="S6.T2.7.7.2.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.7.7.2.m1.1.1.3.cmml" xref="S6.T2.7.7.2.m1.1.1.3">6</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.7.7.2.m1.1c">T_{6}</annotation></semantics></math></td>
<td id="S6.T2.8.8.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.8.8.3.m1.1" class="ltx_Math" alttext="T_{7}" display="inline"><semantics id="S6.T2.8.8.3.m1.1a"><msub id="S6.T2.8.8.3.m1.1.1" xref="S6.T2.8.8.3.m1.1.1.cmml"><mi id="S6.T2.8.8.3.m1.1.1.2" xref="S6.T2.8.8.3.m1.1.1.2.cmml">T</mi><mn id="S6.T2.8.8.3.m1.1.1.3" xref="S6.T2.8.8.3.m1.1.1.3.cmml">7</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.8.8.3.m1.1b"><apply id="S6.T2.8.8.3.m1.1.1.cmml" xref="S6.T2.8.8.3.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.8.8.3.m1.1.1.1.cmml" xref="S6.T2.8.8.3.m1.1.1">subscript</csymbol><ci id="S6.T2.8.8.3.m1.1.1.2.cmml" xref="S6.T2.8.8.3.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.8.8.3.m1.1.1.3.cmml" xref="S6.T2.8.8.3.m1.1.1.3">7</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.8.8.3.m1.1c">T_{7}</annotation></semantics></math></td>
<td id="S6.T2.9.9.4" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.9.9.4.m1.1" class="ltx_Math" alttext="T_{8}" display="inline"><semantics id="S6.T2.9.9.4.m1.1a"><msub id="S6.T2.9.9.4.m1.1.1" xref="S6.T2.9.9.4.m1.1.1.cmml"><mi id="S6.T2.9.9.4.m1.1.1.2" xref="S6.T2.9.9.4.m1.1.1.2.cmml">T</mi><mn id="S6.T2.9.9.4.m1.1.1.3" xref="S6.T2.9.9.4.m1.1.1.3.cmml">8</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.9.9.4.m1.1b"><apply id="S6.T2.9.9.4.m1.1.1.cmml" xref="S6.T2.9.9.4.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.9.9.4.m1.1.1.1.cmml" xref="S6.T2.9.9.4.m1.1.1">subscript</csymbol><ci id="S6.T2.9.9.4.m1.1.1.2.cmml" xref="S6.T2.9.9.4.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.9.9.4.m1.1.1.3.cmml" xref="S6.T2.9.9.4.m1.1.1.3">8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.9.9.4.m1.1c">T_{8}</annotation></semantics></math></td>
<td id="S6.T2.10.10.5" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><math id="S6.T2.10.10.5.m1.1" class="ltx_Math" alttext="T_{9}" display="inline"><semantics id="S6.T2.10.10.5.m1.1a"><msub id="S6.T2.10.10.5.m1.1.1" xref="S6.T2.10.10.5.m1.1.1.cmml"><mi id="S6.T2.10.10.5.m1.1.1.2" xref="S6.T2.10.10.5.m1.1.1.2.cmml">T</mi><mn id="S6.T2.10.10.5.m1.1.1.3" xref="S6.T2.10.10.5.m1.1.1.3.cmml">9</mn></msub><annotation-xml encoding="MathML-Content" id="S6.T2.10.10.5.m1.1b"><apply id="S6.T2.10.10.5.m1.1.1.cmml" xref="S6.T2.10.10.5.m1.1.1"><csymbol cd="ambiguous" id="S6.T2.10.10.5.m1.1.1.1.cmml" xref="S6.T2.10.10.5.m1.1.1">subscript</csymbol><ci id="S6.T2.10.10.5.m1.1.1.2.cmml" xref="S6.T2.10.10.5.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.T2.10.10.5.m1.1.1.3.cmml" xref="S6.T2.10.10.5.m1.1.1.3">9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.T2.10.10.5.m1.1c">T_{9}</annotation></semantics></math></td>
</tr>
<tr id="S6.T2.10.12.2" class="ltx_tr">
<th id="S6.T2.10.12.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_r ltx_border_t">Quality (EMD)</th>
<td id="S6.T2.10.12.2.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">0.10</td>
<td id="S6.T2.10.12.2.3" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">0.12</td>
<td id="S6.T2.10.12.2.4" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">0.14</td>
<td id="S6.T2.10.12.2.5" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">0.16</td>
<td id="S6.T2.10.12.2.6" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">0.18</td>
</tr>
</tbody>
</table>
</figure>
</section>
<section id="S6.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.3 </span>Results and Discussion</h3>

<div id="S6.SS3.p1" class="ltx_para">
<p id="S6.SS3.p1.7" class="ltx_p">The average Shapley values calculated by FedCoin for the clients belonging to each type are shown in Figure <a href="#S6.F6" title="Figure 6 ‚Ä£ 6.1 Experiment Settings ‚Ä£ 6 Experimental Evaluation ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>. The results in Figure <a href="#S6.F6" title="Figure 6 ‚Ä£ 6.1 Experiment Settings ‚Ä£ 6 Experimental Evaluation ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> show that the proposed FedCoin approach can accurately compute clients‚Äô Shaply Values which are critical to incentive mechanisms designed for federated learning. We can also observe that the computed Shapley values of client type <math id="S6.SS3.p1.1.m1.1" class="ltx_Math" alttext="T_{0}" display="inline"><semantics id="S6.SS3.p1.1.m1.1a"><msub id="S6.SS3.p1.1.m1.1.1" xref="S6.SS3.p1.1.m1.1.1.cmml"><mi id="S6.SS3.p1.1.m1.1.1.2" xref="S6.SS3.p1.1.m1.1.1.2.cmml">T</mi><mn id="S6.SS3.p1.1.m1.1.1.3" xref="S6.SS3.p1.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.1.m1.1b"><apply id="S6.SS3.p1.1.m1.1.1.cmml" xref="S6.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S6.SS3.p1.1.m1.1.1.1.cmml" xref="S6.SS3.p1.1.m1.1.1">subscript</csymbol><ci id="S6.SS3.p1.1.m1.1.1.2.cmml" xref="S6.SS3.p1.1.m1.1.1.2">ùëá</ci><cn type="integer" id="S6.SS3.p1.1.m1.1.1.3.cmml" xref="S6.SS3.p1.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.1.m1.1c">T_{0}</annotation></semantics></math> is higher than all the other clients with lower data quality. The Shapley values decrease with the quality level decays from <math id="S6.SS3.p1.2.m2.1" class="ltx_Math" alttext="T_{1}" display="inline"><semantics id="S6.SS3.p1.2.m2.1a"><msub id="S6.SS3.p1.2.m2.1.1" xref="S6.SS3.p1.2.m2.1.1.cmml"><mi id="S6.SS3.p1.2.m2.1.1.2" xref="S6.SS3.p1.2.m2.1.1.2.cmml">T</mi><mn id="S6.SS3.p1.2.m2.1.1.3" xref="S6.SS3.p1.2.m2.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.2.m2.1b"><apply id="S6.SS3.p1.2.m2.1.1.cmml" xref="S6.SS3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S6.SS3.p1.2.m2.1.1.1.cmml" xref="S6.SS3.p1.2.m2.1.1">subscript</csymbol><ci id="S6.SS3.p1.2.m2.1.1.2.cmml" xref="S6.SS3.p1.2.m2.1.1.2">ùëá</ci><cn type="integer" id="S6.SS3.p1.2.m2.1.1.3.cmml" xref="S6.SS3.p1.2.m2.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.2.m2.1c">T_{1}</annotation></semantics></math> to <math id="S6.SS3.p1.3.m3.1" class="ltx_Math" alttext="T_{9}" display="inline"><semantics id="S6.SS3.p1.3.m3.1a"><msub id="S6.SS3.p1.3.m3.1.1" xref="S6.SS3.p1.3.m3.1.1.cmml"><mi id="S6.SS3.p1.3.m3.1.1.2" xref="S6.SS3.p1.3.m3.1.1.2.cmml">T</mi><mn id="S6.SS3.p1.3.m3.1.1.3" xref="S6.SS3.p1.3.m3.1.1.3.cmml">9</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.3.m3.1b"><apply id="S6.SS3.p1.3.m3.1.1.cmml" xref="S6.SS3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S6.SS3.p1.3.m3.1.1.1.cmml" xref="S6.SS3.p1.3.m3.1.1">subscript</csymbol><ci id="S6.SS3.p1.3.m3.1.1.2.cmml" xref="S6.SS3.p1.3.m3.1.1.2">ùëá</ci><cn type="integer" id="S6.SS3.p1.3.m3.1.1.3.cmml" xref="S6.SS3.p1.3.m3.1.1.3">9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.3.m3.1c">T_{9}</annotation></semantics></math>. Moreover, only the values for type <math id="S6.SS3.p1.4.m4.1" class="ltx_Math" alttext="T_{0}" display="inline"><semantics id="S6.SS3.p1.4.m4.1a"><msub id="S6.SS3.p1.4.m4.1.1" xref="S6.SS3.p1.4.m4.1.1.cmml"><mi id="S6.SS3.p1.4.m4.1.1.2" xref="S6.SS3.p1.4.m4.1.1.2.cmml">T</mi><mn id="S6.SS3.p1.4.m4.1.1.3" xref="S6.SS3.p1.4.m4.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.4.m4.1b"><apply id="S6.SS3.p1.4.m4.1.1.cmml" xref="S6.SS3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S6.SS3.p1.4.m4.1.1.1.cmml" xref="S6.SS3.p1.4.m4.1.1">subscript</csymbol><ci id="S6.SS3.p1.4.m4.1.1.2.cmml" xref="S6.SS3.p1.4.m4.1.1.2">ùëá</ci><cn type="integer" id="S6.SS3.p1.4.m4.1.1.3.cmml" xref="S6.SS3.p1.4.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.4.m4.1c">T_{0}</annotation></semantics></math> to <math id="S6.SS3.p1.5.m5.1" class="ltx_Math" alttext="T_{4}" display="inline"><semantics id="S6.SS3.p1.5.m5.1a"><msub id="S6.SS3.p1.5.m5.1.1" xref="S6.SS3.p1.5.m5.1.1.cmml"><mi id="S6.SS3.p1.5.m5.1.1.2" xref="S6.SS3.p1.5.m5.1.1.2.cmml">T</mi><mn id="S6.SS3.p1.5.m5.1.1.3" xref="S6.SS3.p1.5.m5.1.1.3.cmml">4</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.5.m5.1b"><apply id="S6.SS3.p1.5.m5.1.1.cmml" xref="S6.SS3.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S6.SS3.p1.5.m5.1.1.1.cmml" xref="S6.SS3.p1.5.m5.1.1">subscript</csymbol><ci id="S6.SS3.p1.5.m5.1.1.2.cmml" xref="S6.SS3.p1.5.m5.1.1.2">ùëá</ci><cn type="integer" id="S6.SS3.p1.5.m5.1.1.3.cmml" xref="S6.SS3.p1.5.m5.1.1.3">4</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.5.m5.1c">T_{4}</annotation></semantics></math> are positive, indicating that only half of the clients can positively contribute model accuracy improvement. It also shows that our PoSap can effectively promote high quality data in collabratively FL application scenrio. The negative Shapley values for type <math id="S6.SS3.p1.6.m6.1" class="ltx_Math" alttext="T_{5}" display="inline"><semantics id="S6.SS3.p1.6.m6.1a"><msub id="S6.SS3.p1.6.m6.1.1" xref="S6.SS3.p1.6.m6.1.1.cmml"><mi id="S6.SS3.p1.6.m6.1.1.2" xref="S6.SS3.p1.6.m6.1.1.2.cmml">T</mi><mn id="S6.SS3.p1.6.m6.1.1.3" xref="S6.SS3.p1.6.m6.1.1.3.cmml">5</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.6.m6.1b"><apply id="S6.SS3.p1.6.m6.1.1.cmml" xref="S6.SS3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S6.SS3.p1.6.m6.1.1.1.cmml" xref="S6.SS3.p1.6.m6.1.1">subscript</csymbol><ci id="S6.SS3.p1.6.m6.1.1.2.cmml" xref="S6.SS3.p1.6.m6.1.1.2">ùëá</ci><cn type="integer" id="S6.SS3.p1.6.m6.1.1.3.cmml" xref="S6.SS3.p1.6.m6.1.1.3">5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.6.m6.1c">T_{5}</annotation></semantics></math> to <math id="S6.SS3.p1.7.m7.1" class="ltx_Math" alttext="T_{9}" display="inline"><semantics id="S6.SS3.p1.7.m7.1a"><msub id="S6.SS3.p1.7.m7.1.1" xref="S6.SS3.p1.7.m7.1.1.cmml"><mi id="S6.SS3.p1.7.m7.1.1.2" xref="S6.SS3.p1.7.m7.1.1.2.cmml">T</mi><mn id="S6.SS3.p1.7.m7.1.1.3" xref="S6.SS3.p1.7.m7.1.1.3.cmml">9</mn></msub><annotation-xml encoding="MathML-Content" id="S6.SS3.p1.7.m7.1b"><apply id="S6.SS3.p1.7.m7.1.1.cmml" xref="S6.SS3.p1.7.m7.1.1"><csymbol cd="ambiguous" id="S6.SS3.p1.7.m7.1.1.1.cmml" xref="S6.SS3.p1.7.m7.1.1">subscript</csymbol><ci id="S6.SS3.p1.7.m7.1.1.2.cmml" xref="S6.SS3.p1.7.m7.1.1.2">ùëá</ci><cn type="integer" id="S6.SS3.p1.7.m7.1.1.3.cmml" xref="S6.SS3.p1.7.m7.1.1.3">9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p1.7.m7.1c">T_{9}</annotation></semantics></math> means the clients can mislead the model training.</p>
</div>
<div id="S6.SS3.p2" class="ltx_para">
<p id="S6.SS3.p2.1" class="ltx_p">To empirically explain why there is negative Shapley values, we train the same model with clients from each type separately. The testing accuracy of the model trained by 10 clients in each type is presented in Figure <a href="#S6.F6" title="Figure 6 ‚Ä£ 6.1 Experiment Settings ‚Ä£ 6 Experimental Evaluation ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>. It has been found that the model accuracy based data from clients with negative Shapley values is indeed lower than the accuracy achieved in the FL model based on the 100 clients. In our system, we will not reward the clients with negative Shapley values, discouraging these clients in misleading the model training.</p>
</div>
<div id="S6.SS3.p3" class="ltx_para">
<p id="S6.SS3.p3.5" class="ltx_p">The block generation time with different mining difficulty values is shown in Figure <a href="#S6.F6" title="Figure 6 ‚Ä£ 6.1 Experiment Settings ‚Ä£ 6 Experimental Evaluation ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>.
It is measured in the unit of Shapley calculation iterations, each of which executing Lines 3 to 14 in Algorithm <a href="#alg1" title="In 4.1 Shapley Value Based Blockchain Consensus ‚Ä£ 4 FedCoin ‚Ä£ FedCoin: A Peer-to-Peer Payment System for Federated Learning" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> once. The x-axis contains the difficulty value in the form of <math id="S6.SS3.p3.1.m1.1" class="ltx_Math" alttext="-log(D)" display="inline"><semantics id="S6.SS3.p3.1.m1.1a"><mrow id="S6.SS3.p3.1.m1.1.2" xref="S6.SS3.p3.1.m1.1.2.cmml"><mo id="S6.SS3.p3.1.m1.1.2a" xref="S6.SS3.p3.1.m1.1.2.cmml">‚àí</mo><mrow id="S6.SS3.p3.1.m1.1.2.2" xref="S6.SS3.p3.1.m1.1.2.2.cmml"><mi id="S6.SS3.p3.1.m1.1.2.2.2" xref="S6.SS3.p3.1.m1.1.2.2.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="S6.SS3.p3.1.m1.1.2.2.1" xref="S6.SS3.p3.1.m1.1.2.2.1.cmml">‚Äã</mo><mi id="S6.SS3.p3.1.m1.1.2.2.3" xref="S6.SS3.p3.1.m1.1.2.2.3.cmml">o</mi><mo lspace="0em" rspace="0em" id="S6.SS3.p3.1.m1.1.2.2.1a" xref="S6.SS3.p3.1.m1.1.2.2.1.cmml">‚Äã</mo><mi id="S6.SS3.p3.1.m1.1.2.2.4" xref="S6.SS3.p3.1.m1.1.2.2.4.cmml">g</mi><mo lspace="0em" rspace="0em" id="S6.SS3.p3.1.m1.1.2.2.1b" xref="S6.SS3.p3.1.m1.1.2.2.1.cmml">‚Äã</mo><mrow id="S6.SS3.p3.1.m1.1.2.2.5.2" xref="S6.SS3.p3.1.m1.1.2.2.cmml"><mo stretchy="false" id="S6.SS3.p3.1.m1.1.2.2.5.2.1" xref="S6.SS3.p3.1.m1.1.2.2.cmml">(</mo><mi id="S6.SS3.p3.1.m1.1.1" xref="S6.SS3.p3.1.m1.1.1.cmml">D</mi><mo stretchy="false" id="S6.SS3.p3.1.m1.1.2.2.5.2.2" xref="S6.SS3.p3.1.m1.1.2.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.1.m1.1b"><apply id="S6.SS3.p3.1.m1.1.2.cmml" xref="S6.SS3.p3.1.m1.1.2"><minus id="S6.SS3.p3.1.m1.1.2.1.cmml" xref="S6.SS3.p3.1.m1.1.2"></minus><apply id="S6.SS3.p3.1.m1.1.2.2.cmml" xref="S6.SS3.p3.1.m1.1.2.2"><times id="S6.SS3.p3.1.m1.1.2.2.1.cmml" xref="S6.SS3.p3.1.m1.1.2.2.1"></times><ci id="S6.SS3.p3.1.m1.1.2.2.2.cmml" xref="S6.SS3.p3.1.m1.1.2.2.2">ùëô</ci><ci id="S6.SS3.p3.1.m1.1.2.2.3.cmml" xref="S6.SS3.p3.1.m1.1.2.2.3">ùëú</ci><ci id="S6.SS3.p3.1.m1.1.2.2.4.cmml" xref="S6.SS3.p3.1.m1.1.2.2.4">ùëî</ci><ci id="S6.SS3.p3.1.m1.1.1.cmml" xref="S6.SS3.p3.1.m1.1.1">ùê∑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.1.m1.1c">-log(D)</annotation></semantics></math> (e.g., <math id="S6.SS3.p3.2.m2.1" class="ltx_Math" alttext="x=2" display="inline"><semantics id="S6.SS3.p3.2.m2.1a"><mrow id="S6.SS3.p3.2.m2.1.1" xref="S6.SS3.p3.2.m2.1.1.cmml"><mi id="S6.SS3.p3.2.m2.1.1.2" xref="S6.SS3.p3.2.m2.1.1.2.cmml">x</mi><mo id="S6.SS3.p3.2.m2.1.1.1" xref="S6.SS3.p3.2.m2.1.1.1.cmml">=</mo><mn id="S6.SS3.p3.2.m2.1.1.3" xref="S6.SS3.p3.2.m2.1.1.3.cmml">2</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.2.m2.1b"><apply id="S6.SS3.p3.2.m2.1.1.cmml" xref="S6.SS3.p3.2.m2.1.1"><eq id="S6.SS3.p3.2.m2.1.1.1.cmml" xref="S6.SS3.p3.2.m2.1.1.1"></eq><ci id="S6.SS3.p3.2.m2.1.1.2.cmml" xref="S6.SS3.p3.2.m2.1.1.2">ùë•</ci><cn type="integer" id="S6.SS3.p3.2.m2.1.1.3.cmml" xref="S6.SS3.p3.2.m2.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.2.m2.1c">x=2</annotation></semantics></math> means <math id="S6.SS3.p3.3.m3.1" class="ltx_Math" alttext="D=1e-2" display="inline"><semantics id="S6.SS3.p3.3.m3.1a"><mrow id="S6.SS3.p3.3.m3.1.1" xref="S6.SS3.p3.3.m3.1.1.cmml"><mi id="S6.SS3.p3.3.m3.1.1.2" xref="S6.SS3.p3.3.m3.1.1.2.cmml">D</mi><mo id="S6.SS3.p3.3.m3.1.1.1" xref="S6.SS3.p3.3.m3.1.1.1.cmml">=</mo><mrow id="S6.SS3.p3.3.m3.1.1.3" xref="S6.SS3.p3.3.m3.1.1.3.cmml"><mrow id="S6.SS3.p3.3.m3.1.1.3.2" xref="S6.SS3.p3.3.m3.1.1.3.2.cmml"><mn id="S6.SS3.p3.3.m3.1.1.3.2.2" xref="S6.SS3.p3.3.m3.1.1.3.2.2.cmml">1</mn><mo lspace="0em" rspace="0em" id="S6.SS3.p3.3.m3.1.1.3.2.1" xref="S6.SS3.p3.3.m3.1.1.3.2.1.cmml">‚Äã</mo><mi id="S6.SS3.p3.3.m3.1.1.3.2.3" xref="S6.SS3.p3.3.m3.1.1.3.2.3.cmml">e</mi></mrow><mo id="S6.SS3.p3.3.m3.1.1.3.1" xref="S6.SS3.p3.3.m3.1.1.3.1.cmml">‚àí</mo><mn id="S6.SS3.p3.3.m3.1.1.3.3" xref="S6.SS3.p3.3.m3.1.1.3.3.cmml">2</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.3.m3.1b"><apply id="S6.SS3.p3.3.m3.1.1.cmml" xref="S6.SS3.p3.3.m3.1.1"><eq id="S6.SS3.p3.3.m3.1.1.1.cmml" xref="S6.SS3.p3.3.m3.1.1.1"></eq><ci id="S6.SS3.p3.3.m3.1.1.2.cmml" xref="S6.SS3.p3.3.m3.1.1.2">ùê∑</ci><apply id="S6.SS3.p3.3.m3.1.1.3.cmml" xref="S6.SS3.p3.3.m3.1.1.3"><minus id="S6.SS3.p3.3.m3.1.1.3.1.cmml" xref="S6.SS3.p3.3.m3.1.1.3.1"></minus><apply id="S6.SS3.p3.3.m3.1.1.3.2.cmml" xref="S6.SS3.p3.3.m3.1.1.3.2"><times id="S6.SS3.p3.3.m3.1.1.3.2.1.cmml" xref="S6.SS3.p3.3.m3.1.1.3.2.1"></times><cn type="integer" id="S6.SS3.p3.3.m3.1.1.3.2.2.cmml" xref="S6.SS3.p3.3.m3.1.1.3.2.2">1</cn><ci id="S6.SS3.p3.3.m3.1.1.3.2.3.cmml" xref="S6.SS3.p3.3.m3.1.1.3.2.3">ùëí</ci></apply><cn type="integer" id="S6.SS3.p3.3.m3.1.1.3.3.cmml" xref="S6.SS3.p3.3.m3.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.3.m3.1c">D=1e-2</annotation></semantics></math>). The y-axis contains the corresponding time required to generate a new block measured in Shapley calculation iterations executed by the block winner. It can be observed that the block generation time increases as the mining difficulty increases. As the mining difficulty increases beyond <math id="S6.SS3.p3.4.m4.1" class="ltx_Math" alttext="1e-3" display="inline"><semantics id="S6.SS3.p3.4.m4.1a"><mrow id="S6.SS3.p3.4.m4.1.1" xref="S6.SS3.p3.4.m4.1.1.cmml"><mrow id="S6.SS3.p3.4.m4.1.1.2" xref="S6.SS3.p3.4.m4.1.1.2.cmml"><mn id="S6.SS3.p3.4.m4.1.1.2.2" xref="S6.SS3.p3.4.m4.1.1.2.2.cmml">1</mn><mo lspace="0em" rspace="0em" id="S6.SS3.p3.4.m4.1.1.2.1" xref="S6.SS3.p3.4.m4.1.1.2.1.cmml">‚Äã</mo><mi id="S6.SS3.p3.4.m4.1.1.2.3" xref="S6.SS3.p3.4.m4.1.1.2.3.cmml">e</mi></mrow><mo id="S6.SS3.p3.4.m4.1.1.1" xref="S6.SS3.p3.4.m4.1.1.1.cmml">‚àí</mo><mn id="S6.SS3.p3.4.m4.1.1.3" xref="S6.SS3.p3.4.m4.1.1.3.cmml">3</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.4.m4.1b"><apply id="S6.SS3.p3.4.m4.1.1.cmml" xref="S6.SS3.p3.4.m4.1.1"><minus id="S6.SS3.p3.4.m4.1.1.1.cmml" xref="S6.SS3.p3.4.m4.1.1.1"></minus><apply id="S6.SS3.p3.4.m4.1.1.2.cmml" xref="S6.SS3.p3.4.m4.1.1.2"><times id="S6.SS3.p3.4.m4.1.1.2.1.cmml" xref="S6.SS3.p3.4.m4.1.1.2.1"></times><cn type="integer" id="S6.SS3.p3.4.m4.1.1.2.2.cmml" xref="S6.SS3.p3.4.m4.1.1.2.2">1</cn><ci id="S6.SS3.p3.4.m4.1.1.2.3.cmml" xref="S6.SS3.p3.4.m4.1.1.2.3">ùëí</ci></apply><cn type="integer" id="S6.SS3.p3.4.m4.1.1.3.cmml" xref="S6.SS3.p3.4.m4.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.4.m4.1c">1e-3</annotation></semantics></math> (<math id="S6.SS3.p3.5.m5.1" class="ltx_Math" alttext="D&lt;1e-3" display="inline"><semantics id="S6.SS3.p3.5.m5.1a"><mrow id="S6.SS3.p3.5.m5.1.1" xref="S6.SS3.p3.5.m5.1.1.cmml"><mi id="S6.SS3.p3.5.m5.1.1.2" xref="S6.SS3.p3.5.m5.1.1.2.cmml">D</mi><mo id="S6.SS3.p3.5.m5.1.1.1" xref="S6.SS3.p3.5.m5.1.1.1.cmml">&lt;</mo><mrow id="S6.SS3.p3.5.m5.1.1.3" xref="S6.SS3.p3.5.m5.1.1.3.cmml"><mrow id="S6.SS3.p3.5.m5.1.1.3.2" xref="S6.SS3.p3.5.m5.1.1.3.2.cmml"><mn id="S6.SS3.p3.5.m5.1.1.3.2.2" xref="S6.SS3.p3.5.m5.1.1.3.2.2.cmml">1</mn><mo lspace="0em" rspace="0em" id="S6.SS3.p3.5.m5.1.1.3.2.1" xref="S6.SS3.p3.5.m5.1.1.3.2.1.cmml">‚Äã</mo><mi id="S6.SS3.p3.5.m5.1.1.3.2.3" xref="S6.SS3.p3.5.m5.1.1.3.2.3.cmml">e</mi></mrow><mo id="S6.SS3.p3.5.m5.1.1.3.1" xref="S6.SS3.p3.5.m5.1.1.3.1.cmml">‚àí</mo><mn id="S6.SS3.p3.5.m5.1.1.3.3" xref="S6.SS3.p3.5.m5.1.1.3.3.cmml">3</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S6.SS3.p3.5.m5.1b"><apply id="S6.SS3.p3.5.m5.1.1.cmml" xref="S6.SS3.p3.5.m5.1.1"><lt id="S6.SS3.p3.5.m5.1.1.1.cmml" xref="S6.SS3.p3.5.m5.1.1.1"></lt><ci id="S6.SS3.p3.5.m5.1.1.2.cmml" xref="S6.SS3.p3.5.m5.1.1.2">ùê∑</ci><apply id="S6.SS3.p3.5.m5.1.1.3.cmml" xref="S6.SS3.p3.5.m5.1.1.3"><minus id="S6.SS3.p3.5.m5.1.1.3.1.cmml" xref="S6.SS3.p3.5.m5.1.1.3.1"></minus><apply id="S6.SS3.p3.5.m5.1.1.3.2.cmml" xref="S6.SS3.p3.5.m5.1.1.3.2"><times id="S6.SS3.p3.5.m5.1.1.3.2.1.cmml" xref="S6.SS3.p3.5.m5.1.1.3.2.1"></times><cn type="integer" id="S6.SS3.p3.5.m5.1.1.3.2.2.cmml" xref="S6.SS3.p3.5.m5.1.1.3.2.2">1</cn><ci id="S6.SS3.p3.5.m5.1.1.3.2.3.cmml" xref="S6.SS3.p3.5.m5.1.1.3.2.3">ùëí</ci></apply><cn type="integer" id="S6.SS3.p3.5.m5.1.1.3.3.cmml" xref="S6.SS3.p3.5.m5.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.SS3.p3.5.m5.1c">D&lt;1e-3</annotation></semantics></math>), the block generation time converges at about 2,500 Shapley calculation iterations. This shows that the computational cost for the consensus nodes is upper-bounded. In other words, the computational cost of PoSap is feasible.</p>
</div>
</section>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Conclusions</h2>

<div id="S7.p1" class="ltx_para">
<p id="S7.p1.1" class="ltx_p">In this paper, we propose FedCoin - a blockchain-based payment system to enable a federated learning system. It can mobilize free computational resources in the community to perform costly computing tasks required by FL incentive schemes. The Shapley value of each FL client, reflecting its contribution to the global FL model in a fair way, is calculated by the proof of Shapley (PoSap) consensus protocol. The proposed PoSap which replaces the traditional hash-based protocol in existing Bitcoin based blockchain systems. All the payments are recorded in the block in an immutable manner. Under FedCoin, paying out incentives to FL clients does not need to rely on a central FL server.</p>
</div>
<div id="S7.p2" class="ltx_para">
<p id="S7.p2.1" class="ltx_p">Experimental results show that FedCoin is able to properly determine FL clients‚Äô Shapley Value-based contribution to the global FL model with an upper bound on the computational resource required for reaching consensus. To the best of our knowledge, FedCoin is the first attempt to leverage blockchain technology in federated learning incentive scheme research. Thereby, it opens up new opportunities for non-data owners to contribute to the development of the FL ecosystem <cite class="ltx_cite ltx_citemacro_cite">Yang <span class="ltx_text ltx_font_italic">et al.</span> (<a href="#bib.bib19" title="" class="ltx_ref">2019b</a>)</cite>.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ancona <span id="bib.bib1.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Marco Ancona, Cengiz √ñztireli, and Markus¬†H. Gross.

</span>
<span class="ltx_bibblock">Explaining deep neural networks with a polynomial time algorithm for
shapley value approximation.

</span>
<span class="ltx_bibblock">In <span id="bib.bib1.3.1" class="ltx_text ltx_font_italic">Proceedings of the 36th International Conference on Machine
Learning, ICML 2019, 9-15 June 2019, Long Beach, California, USA</span>, pages
272‚Äì281, 2019.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bao <span id="bib.bib2.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Xianglin Bao, Cheng Su, Yan Xiong, Wenchao Huang, and Yifei Hu.

</span>
<span class="ltx_bibblock">Flchain: A blockchain for auditable federated learning with trust
and incentive.

</span>
<span class="ltx_bibblock">In <span id="bib.bib2.3.1" class="ltx_text ltx_font_italic">Proceedings of 5th International Conference on Big Data
Computing and Communications, BIGCOM</span>, pages 151‚Äì159, 2019.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bonawitz <span id="bib.bib3.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2017]</span>
<span class="ltx_bibblock">
Keith Bonawitz, Vladimir Ivanov, Ben Kreuter, Antonio Marcedone, H.¬†Brendan
McMahan, Sarvar Patel, Daniel Ramage, Aaron Segal, and Karn Seth.

</span>
<span class="ltx_bibblock">Practical secure aggregation for privacy-preserving machine learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib3.3.1" class="ltx_text ltx_font_italic">Proceedings of ACM SIGSAC Conference on Computer and
Communications Security CCS</span>, pages 1175‚Äì1191, 2017.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bonawitz <span id="bib.bib4.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Keith Bonawitz, Hubert Eichner, Wolfgang Grieskamp, Dzmitry Huba, Alex
Ingerman, Vladimir Ivanov, Chlo√© Kiddon, Jakub Konecn√Ω, Stefano
Mazzocchi, H.¬†Brendan McMahan, Timon¬†Van Overveldt, David Petrou, Daniel
Ramage, and Jason Roselander.

</span>
<span class="ltx_bibblock">Towards federated learning at scale: System design.

</span>
<span class="ltx_bibblock"><span id="bib.bib4.3.1" class="ltx_text ltx_font_italic">CoRR</span>, abs/1902.01046, 2019.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dillenberger <span id="bib.bib5.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Donna Dillenberger, Petr Novotny, Qi¬†Zhang, Praveen Jayachandran, Himanshu
Gupta, Sameep Mehta, Sandeep Hans, Supriyo Chakraborty, Matthew Walli, John
Thomas, et¬†al.

</span>
<span class="ltx_bibblock">Blockchain analytics and artificial intelligence.

</span>
<span class="ltx_bibblock"><span id="bib.bib5.3.1" class="ltx_text ltx_font_italic">IBM Journal of Research and Development</span>, 2019.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Eyal and Sirer [2018]</span>
<span class="ltx_bibblock">
Ittay Eyal and Emin¬†G√ºn Sirer.

</span>
<span class="ltx_bibblock">Majority is not enough: bitcoin mining is vulnerable.

</span>
<span class="ltx_bibblock"><span id="bib.bib6.1.1" class="ltx_text ltx_font_italic">Communications of the ACM</span>, 61(7):95‚Äì102, 2018.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Goodfellow <span id="bib.bib7.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2016]</span>
<span class="ltx_bibblock">
Ian Goodfellow, Yoshua Bengio, and Aaron Courville.

</span>
<span class="ltx_bibblock"><span id="bib.bib7.3.1" class="ltx_text ltx_font_italic">Deep learning</span>.

</span>
<span class="ltx_bibblock">MIT press, 2016.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jia <span id="bib.bib8.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Ruoxi Jia, David Dao, Boxin Wang, Frances¬†Ann Hubis, Nick Hynes, Nezihe¬†Merve
G√ºrel, Bo¬†Li, Ce¬†Zhang, Dawn Song, and Costas¬†J. Spanos.

</span>
<span class="ltx_bibblock">Towards efficient data valuation based on the shapley value.

</span>
<span class="ltx_bibblock">In <span id="bib.bib8.3.1" class="ltx_text ltx_font_italic">Proceedings of the 22nd International Conference on
Artificial Intelligence and Statistics AISTATS 2019</span>, pages 1167‚Äì1176,
2019.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kairouz <span id="bib.bib9.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Peter Kairouz, H.¬†Brendan McMahan, Brendan Avent, et¬†al.

</span>
<span class="ltx_bibblock">Advances and open problems in federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib9.3.1" class="ltx_text ltx_font_italic">CoRR</span>, abs/1912.04977, 2019.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kang <span id="bib.bib10.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Jiawen Kang, Zehui Xiong, Dusit Niyato, Shengli Xie, and Junshan Zhang.

</span>
<span class="ltx_bibblock">Incentive mechanism for reliable federated learning: A joint
optimization approach to combining reputation and contract theory.

</span>
<span class="ltx_bibblock"><span id="bib.bib10.3.1" class="ltx_text ltx_font_italic">IEEE Internet of Things Journal</span>, 6(6):10700‚Äì10714, 2019.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Khan <span id="bib.bib11.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Latif¬†U. Khan, Nguyen¬†H. Tran, Shashi¬†Raj Pandey, Walid Saad, Zhu Han, Minh
N.¬†H. Nguyen, and Choong¬†Seon Hong.

</span>
<span class="ltx_bibblock">Federated learning for edge networks: Resource optimization and
incentive mechanism.

</span>
<span class="ltx_bibblock"><span id="bib.bib11.3.1" class="ltx_text ltx_font_italic">CoRR</span>, abs/1911.05642, 2019.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kim <span id="bib.bib12.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Hyesung Kim, Jihong Park, Mehdi Bennis, and Seong-Lyun Kim.

</span>
<span class="ltx_bibblock">Blockchained on-device federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib12.3.1" class="ltx_text ltx_font_italic">IEEE Communications Letters</span>, 2019.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li and
Cui [2019]</span>
<span class="ltx_bibblock">
Yadong Li and Xin Cui.

</span>
<span class="ltx_bibblock">Shapley interpretation and activation in neural networks.

</span>
<span class="ltx_bibblock"><span id="bib.bib13.1.1" class="ltx_text ltx_font_italic">CoRR</span>, abs/1909.06143, 2019.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">McMahan <span id="bib.bib14.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2017]</span>
<span class="ltx_bibblock">
Brendan McMahan, Eider Moore, Daniel Ramage, Seth Hampson, and
Blaise¬†Ag√ºera y¬†Arcas.

</span>
<span class="ltx_bibblock">Communication-efficient learning of deep networks from decentralized
data.

</span>
<span class="ltx_bibblock">In <span id="bib.bib14.3.1" class="ltx_text ltx_font_italic">Proceedings of the 20th International Conference on
Artificial Intelligence and Statistics AISTATS</span>, pages 1273‚Äì1282, 2017.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nakamoto and
others [2008]</span>
<span class="ltx_bibblock">
Satoshi Nakamoto et¬†al.

</span>
<span class="ltx_bibblock">Bitcoin: A peer-to-peer electronic cash system.

</span>
<span class="ltx_bibblock"><span id="bib.bib15.1.1" class="ltx_text ltx_font_italic">Working Paper</span>, 2008.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ramanan <span id="bib.bib16.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Paritosh Ramanan, Kiyoshi Nakayama, and Ratnesh Sharma.

</span>
<span class="ltx_bibblock">Baffle: Blockchain based aggregator free federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib16.3.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1909.07452</span>, 2019.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Song <span id="bib.bib17.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019]</span>
<span class="ltx_bibblock">
Tianshu Song, Yongxin Tong, and Shuyue Wei.

</span>
<span class="ltx_bibblock">Profit allocation for federated learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib17.3.1" class="ltx_text ltx_font_italic">Proceedings of the 2019 IEEE International Conference on Big
Data (IEEE BigData‚Äô19)</span>, 2019.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang <span id="bib.bib18.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019a]</span>
<span class="ltx_bibblock">
Qiang Yang, Yang Liu, Tianjian Chen, and Yongxin Tong.

</span>
<span class="ltx_bibblock">Federated machine learning: Concept and applications.

</span>
<span class="ltx_bibblock"><span id="bib.bib18.3.1" class="ltx_text ltx_font_italic">ACM Transactions on Intelligent Systems and Technology (TIST)</span>,
10(2):12, 2019.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang <span id="bib.bib19.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2019b]</span>
<span class="ltx_bibblock">
Qiang Yang, Yang Liu, Yong Cheng, Yan Kang, Tianjian Chen, and Han Yu.

</span>
<span class="ltx_bibblock"><span id="bib.bib19.3.1" class="ltx_text ltx_font_italic">Federated Learning</span>.

</span>
<span class="ltx_bibblock">Morgan &amp; Claypool Publishers, 2019.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yu <span id="bib.bib20.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2020]</span>
<span class="ltx_bibblock">
Han Yu, Zelei Liu, Yang Liu, Tianjian Chen, Mingshu Cong, Dusit Niyato, and
Yang Qiang.

</span>
<span class="ltx_bibblock">A fairness-aware incentive scheme for federated learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib20.3.1" class="ltx_text ltx_font_italic">Proceedings of the 3rd AAAI/ACM Conference on Artificial
Intelligence, Ethics, and Society (AIES-20)</span>, 2020.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhao <span id="bib.bib21.2.2.1" class="ltx_text ltx_font_italic">et al.</span> [2018]</span>
<span class="ltx_bibblock">
Yue Zhao, Meng Li, Liangzhen Lai, Naveen Suda, Damon Civin, and Vikas Chandra.

</span>
<span class="ltx_bibblock">Federated learning with non-iid data.

</span>
<span class="ltx_bibblock"><span id="bib.bib21.3.1" class="ltx_text ltx_font_italic">CoRR</span>, abs/1806.00582, 2018.

</span>
</li>
</ul>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2002.11710" class="ar5iv-nav-button ar5iv-nav-button-prev">‚óÑ</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2002.11711" class="ar5iv-text-button ar5iv-severity-warning">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2002.11711">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2002.11711" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2002.11713" class="ar5iv-nav-button ar5iv-nav-button-next">‚ñ∫</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Tue Mar 19 18:29:29 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "√ó";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
