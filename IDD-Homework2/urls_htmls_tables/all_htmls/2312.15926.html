<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2312.15926] FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models</title><meta property="og:description" content="Foundation models have shown great success in natural language processing, computer vision, and multimodal tasks. FMs have a large number of model parameters, thus requiring a substantial amount of data to help optimiz…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2312.15926">

<!--Generated on Tue Feb 27 11:52:23 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="
Federated Learning,  Foundation Model,  Edge Computing
">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Panlong Wu, 
Kangshuo Li, 
Ting Wang, 
and Fangxin Wang
</span><span class="ltx_author_notes">Panlong Wu is with the Future Network of Intelligence Institute and the School of Science and Engineering, The Chinese
University of Hong Kong, Shenzhen, Shenzhen 518172, China. E-mail: panlongwu@link.cuhk.edu.cn.
Kangshuo Li is with the School of Data Science, The Chinese
University of Hong Kong, Shenzhen, Shenzhen 518172, China. E-mail: 24ganbatte@gmail.com.
Ting Wang is with the School of Science and Engineering, The Chinese
University of Hong Kong, Shenzhen, Shenzhen 518172, China. E-mail: 011tingwang@gmail.com.
Fangxin Wang is with the School of Science and Engineering and the
Future Network of Intelligence Institute, The Chinese University of Hong
Kong, Shenzhen and Guangdong Provincial Key Laboratory of Future
Networks of Intelligence. Email: wangfangxin@cuhk.edu.cn.Manuscript received xxx; revised xxx.</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id1.1" class="ltx_p">Foundation models have shown great success in natural language processing, computer vision, and multimodal tasks. FMs have a large number of model parameters, thus requiring a substantial amount of data to help optimize the model during the training. Federated learning has revolutionized machine learning by enabling collaborative learning from decentralized data while still preserving the data privacy of clients. Despite the great benefits foundation models can have empowered by federated learning, they face severe computation, communication, and statistical challenges. In this paper, we propose a novel two-stage federated learning algorithm called FedMS. A global expert is trained in the first stage and a local expert is trained in the second stage to provide better personalization. We construct a Mixture of Foundation Models (<span id="id1.1.1" class="ltx_text ltx_font_typewriter">MoFM</span>) with these two experts and design a gate neural network with an inserted gate adapter that joins the aggregation every communication round in the second stage. To further adapt to edge computing scenarios with limited computational resources, we design a novel Sparsely Activated LoRA (<span id="id1.1.2" class="ltx_text ltx_font_typewriter">SAL</span>) algorithm that freezes the pre-trained foundation model parameters inserts low-rank adaptation matrices into transformer blocks and activates them progressively during the training. We employ extensive experiments to verify the effectiveness of FedMS, results show that FedMS outperforms other SOTA baselines by up to <math id="id1.1.m1.1" class="ltx_Math" alttext="55.25\%" display="inline"><semantics id="id1.1.m1.1a"><mrow id="id1.1.m1.1.1" xref="id1.1.m1.1.1.cmml"><mn id="id1.1.m1.1.1.2" xref="id1.1.m1.1.1.2.cmml">55.25</mn><mo id="id1.1.m1.1.1.1" xref="id1.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="id1.1.m1.1b"><apply id="id1.1.m1.1.1.cmml" xref="id1.1.m1.1.1"><csymbol cd="latexml" id="id1.1.m1.1.1.1.cmml" xref="id1.1.m1.1.1.1">percent</csymbol><cn type="float" id="id1.1.m1.1.1.2.cmml" xref="id1.1.m1.1.1.2">55.25</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="id1.1.m1.1c">55.25\%</annotation></semantics></math> in default settings.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Index Terms: </h6>
Federated Learning, Foundation Model, Edge Computing

</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span><span id="S1.1.1" class="ltx_text ltx_font_smallcaps">Introduction</span>
</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Foundation Model (FM) has emerged as a potent solution to address the growing demand for machine learning services. It presents several advantages over its predecessors, the traditional smaller models. FM stands out primarily due to its extensive number of parameters, surpassing the capacity of earlier models. This massive increased parameter space allows FM to capture intricate patterns and relationships in the data, resulting in improved performance across various machine learning tasks.
</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">FM follows a distinct training methodology compared to smaller models. While smaller models often rely on task-specific training, FM employs a pre-training and fine-tuning strategy. Pre-training with large datasets allows FM to acquire a broad data understanding and representation learning capabilities. This pre-training phase acts as a stepping stone, equipping FM with substantial knowledge and context from diverse data sources.
Consequently, when fine-tuning FM for specific tasks, they derive significant advantages from the initial pre-training, leading to enhanced performance across a diverse set of tasks.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">Federated learning (FL) has revolutionized the landscape of machine learning by enabling the collaborative training of a shared model across multiple edge devices without the need to share raw data. By adopting FL, we can utilize the distributed edge data while preserving data privacy and overcoming the limitations of centralized training approaches. This collaboration allows for collective learning from diverse datasets while respecting user privacy and local data ownership.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">FMs with a tremendous number of parameters are data-hungry for the reason that they have a large parameter space to be optimized during the training. By combining the power of FM with the decentralized approach of FL, we can leverage FL by allowing decentralized data from different sources to be used, thus enabling the enhanced generalization ability of FM. Each device in the federation contributes its local knowledge and data patterns to the training process, resulting in a more comprehensive and diverse understanding of the data.
This combination allows us to harness the benefits of both FL’s collaborative training across edge devices while preserving data privacy and FM’s large parameter capacity and pre-training strategy.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p"><span id="S1.p5.1.1" class="ltx_text ltx_font_bold">Several challenges arise in the domain of FL with FM which make FL with FM hard to employ in real-world applications.</span></p>
</div>
<div id="S1.p6" class="ltx_para">
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p">The first challenge lies within the substantial number of parameters possessed by FMs, which distinguishes them from traditional FL models that possess much fewer parameters. This differentiation introduces impediments in the areas of communication and networking, as the transmission of parameters of these FMs is significantly time-consuming for modern mobile networks.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p">The second challenge arises from the huge computational resource requirements posed by FMs, particularly for edge devices with limited computing resources. The considerable computational costs associated with these FMs create difficulties in implementing FL on resource-constrained edge devices.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p">The third challenge is that FL encounters statistical challenges due to non-IID decentralized data, potentially resulting in issues such as parameter divergence and data distribution biases which can significantly harm the performance.</p>
</div>
</li>
</ul>
</div>
<div id="S1.p7" class="ltx_para">
<p id="S1.p7.1" class="ltx_p">To fill the gap, this paper addresses the challenges associated with FL with FM by introducing FedMS algorithm, an FL algorithm with a Mixture of Foundations Models that have Sparsely Activated Parameters. The proposed FedMS algorithm consists of two training stages.</p>
</div>
<div id="S1.p8" class="ltx_para">
<p id="S1.p8.1" class="ltx_p">In the first training stage, each client owns a foundation model, and low-rank adaption matrices are inserted into every transformer block of the foundation model. During the training, the pre-trained weights of the foundation are frozen, and all the parameters of inserted matrices are activated to better extract global information. In each communication round only the inserted matrices join the weight aggregation to reduce bandwidths consumption. The trained foundation model in the first stage will be frozen in the second stage and act as the global expert.</p>
</div>
<div id="S1.p9" class="ltx_para">
<p id="S1.p9.1" class="ltx_p">In the second training stage, we for the first time form a Mixture of Foundation Models (<span id="S1.p9.1.1" class="ltx_text ltx_font_typewriter">MoFM</span>) system in FL which specifically addresses the statistical challenges encountered in FL. We leverage the foundation model trained in the first stage as a global expert and introduce another local expert which is a foundation model initialized from the weights of the global model to provide better personalization. We design a gate model with a specially designed gate adapter inserted into it so that it can quickly adapt to the change of relationship between two experts and intelligently assign weights to the final decision of two experts. In each communication round, only the gate adapter’s activated parameters join the aggregation to save communication resources.
To further tackle the computation challenges, we propose a Sparsely Activated LoRA (<span id="S1.p9.1.2" class="ltx_text ltx_font_typewriter">SAL</span>) algorithm to activate inserted low-rank adaptation matrices in a progressive way through a controller to suit different edge resource conditions.</p>
</div>
<div id="S1.p10" class="ltx_para">
<p id="S1.p10.1" class="ltx_p"><span id="S1.p10.1.1" class="ltx_text ltx_font_bold">In summary, the main contributions of this paper can be summarized as follows:</span></p>
<ul id="S1.I2" class="ltx_itemize">
<li id="S1.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I2.i1.p1" class="ltx_para">
<p id="S1.I2.i1.p1.1" class="ltx_p">We propose a communication and computation friendly two-stage personalized FL algorithm FedMS, which can capture the global feature information through collaborative learning and capture the local feature information through personalized learning.</p>
</div>
</li>
<li id="S1.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I2.i2.p1" class="ltx_para">
<p id="S1.I2.i2.p1.1" class="ltx_p">We propose a Sparsely Activated LoRA (<span id="S1.I2.i2.p1.1.1" class="ltx_text ltx_font_typewriter">SAL</span>) algorithm that sparsely activates the trainable low-rank decomposition matrices injected into foundation models in a progressive way through a self-defined controller
to adapt to scarce computation and communication resources in edge computing scenarios.</p>
</div>
</li>
<li id="S1.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I2.i3.p1" class="ltx_para">
<p id="S1.I2.i3.p1.1" class="ltx_p">We propose a Mixture of Foundation Models (<span id="S1.I2.i3.p1.1.1" class="ltx_text ltx_font_typewriter">MoFM</span>) algorithm which is, to our best knowledge the first work to construct a mixture of vision language foundation models in personalized federated learning to tackle the data heterogeneous in federated learning and we further prove the effectiveness of FedMS through extensive experiments.</p>
</div>
</li>
</ul>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span><span id="S2.1.1" class="ltx_text ltx_font_smallcaps">Background and Related Work</span>
</h2>

<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span><span id="S2.SS1.1.1" class="ltx_text ltx_font_italic">Foundation Model</span>
</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">Recently, FMs have achieved remarkable success in various domains such as natural language processing, computer vision, and multimodal tasks. By utilizing deep learning techniques like self-supervised Learning and contrastive learning, FMs with a massive number of model parameters are trained on large datasets. Consequently, these models exhibit strong generalization, feature extraction, and comprehension abilities.</p>
</div>
<div id="S2.SS1.p2" class="ltx_para">
<p id="S2.SS1.p2.1" class="ltx_p"><span id="S2.SS1.p2.1.1" class="ltx_text ltx_font_bold">Various works have been done related to FMs in natural language processing.</span>
Bert<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>, referred to as Bidirectional Encoder Representation from Transformers, is an advanced natural language processing model introduced by Devlin et al. (2018). This model employs a transformer architecture and is pre-trained on extensive text data, using a masked language model pre-training objective. GPT-3<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite> is trained using a language modeling pre-training objective. By making the model do the next token prediction, it can utilize the massive unlabeled data from the internet and have a powerful few-shots learning ability.</p>
</div>
<div id="S2.SS1.p3" class="ltx_para">
<p id="S2.SS1.p3.1" class="ltx_p"><span id="S2.SS1.p3.1.1" class="ltx_text ltx_font_bold">There are also various works that have been done related to visual language FMs.</span>
Contrastive Language Image Pre-training (CLIP)<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>, as a famous FM proposed by OpenAI. This model a visual encoder and a text encoder to extract the semantic meaning and encode images and texts into image features and text features. Throughout the training process, contrastive learning is employed to maximize the similarity between related images and texts while minimizing the similarity between unrelated ones.
DALL-E 3<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite> is a modern text-to-image system that has extraordinary prompt-following capability. It addresses the noisy and inaccurate image captions issue by training another specially designed image captioner.</p>
</div>
<figure id="S2.F1" class="ltx_figure"><img src="/html/2312.15926/assets/x1.png" id="S2.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="261" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S2.F1.2.1.1" class="ltx_text" style="font-size:90%;">Figure 1</span>: </span><span id="S2.F1.3.2" class="ltx_text" style="font-size:90%;">FedMS Workflow</span></figcaption>
</figure>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span><span id="S2.SS2.1.1" class="ltx_text ltx_font_italic">Federated Learning</span>
</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">Federated learning <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite> is a machine learning technique that enables the training of decentralized data while preserving the privacy of clients participating in the training. Typically, every client doesn’t share their data but their private model after local training in each communication round. Despite that FL has shown great potential in the Internet of Things, financial field, and smart healthcare, it still faces lots of challenges.</p>
</div>
<div id="S2.SS2.p2" class="ltx_para">
<p id="S2.SS2.p2.1" class="ltx_p"><span id="S2.SS2.p2.1.1" class="ltx_text ltx_font_bold">Many studies focus on solving the statistical challenges.</span>
FL faces serious statistical challenges because the data distribution of the datasets is often non-iid which can lead to weight divergence after model aggregation.
Li et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite> propose FedProx that handles the system heterogeneity by introducing an additional proximal term to prevent the local model updates from being far from the global model and thus can safely aggregate the local updates in statistical heterogeneity conditions.
Li et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite> introduce MOON which uses the idea of contrastive learning to compare the representation learned by local models and the global model. Inspired by the philosophy of the global model has better feature extraction ability than local models that are trained on skewed local datasets.
Zhang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>]</cite> design FedLC that introduces a fine-grained calibrated cross-entropy loss to mitigate the local gradient deviation and gives theoretical proof of the deviation bound after calibration.
Zec et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite> propose a personalized federated learning algorithm with a mixture of experts with a training pipeline of global expert training, local expert training, and mixer training.</p>
</div>
<div id="S2.SS2.p3" class="ltx_para">
<p id="S2.SS2.p3.1" class="ltx_p"><span id="S2.SS2.p3.1.1" class="ltx_text ltx_font_bold">The communication efficiency issue is also an important issue that many researchers focus on.</span> MAO et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>]</cite> propose an Adaptive Quantized Gradient (AQG) algorithm to decide the level of quantization according to the gradient update of heterogeneous clients.
Huang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite> propose a Residual Pooling Network
(RPN) based on the approximation of parameters and selection of parameters, and apply it to a CNN-based model FL training. Haddadpour et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite> introduce an algorithm with periodical compressed communication. Specifically, they introduce the FedCOM algorithm to tackle the homogeneous client situation and the FedCOMGATE algorithm to tackle heterogeneous client situations. Chen et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite> propose a federated learning algorithm that considers the weight quantization in wireless transmission and formulate the federated learning problem into a mixed-integer programming problem. Zhang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite> introduce a CFEL algorithm that jointly considers cloud-based federated learning and edge-based federated learning. Qu et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite> design a partially Synchronized federated learning algorithm to accelerate the federated learning training.</p>
</div>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span><span id="S2.SS3.1.1" class="ltx_text ltx_font_italic">FL with FM</span>
</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.1" class="ltx_p">Not many works have been done related to FL with FM. Zhang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite> propose a federated generative learning framework to utilize FM on the server to generate synthesized images given the transmitted prompt from the clients to improve the training performance of the model. Tao et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite> propose a PromptFL algorithm to replace the model aggregation in traditional FL to prompt aggregation to reduce communication and computation costs. Cai et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite> design a AdaFL algorithm to fine-tune FMs for modern natural language processing tasks by inserting adapters into models, dividing clients into three groups, and observing each group’s training accuracy to decide the best configuration for adapters. Lu et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite> propose a FedCLIP algorithm to insert adapters in the visual encoder of FM CLIP and test it on datasets in different domains. Zhang et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite> introduce a Federated Instruction Tuning (FedIT) algorithm to leverage federated learning in induction tuning of FM to enhance their performance.
However, none of these works consider the cooperation of FMs and thus cannot achieve good performance in data heterogeneous conditions on challenging datasets.</p>
</div>
<figure id="S2.F2" class="ltx_figure"><img src="/html/2312.15926/assets/x2.png" id="S2.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="368" height="168" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S2.F2.3.1.1" class="ltx_text" style="font-size:90%;">Figure 2</span>: </span><span id="S2.F2.4.2" class="ltx_text" style="font-size:90%;">Iteration process of <span id="S2.F2.4.2.1" class="ltx_text ltx_font_typewriter">SAL</span> </span></figcaption>
</figure>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span><span id="S3.1.1" class="ltx_text ltx_font_smallcaps">Design of FedMS</span>
</h2>

<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span><span id="S3.SS1.1.1" class="ltx_text ltx_font_italic">Overview of FedMS</span>
</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.2" class="ltx_p">We consider a typical FL scenario with a total number of <math id="S3.SS1.p1.1.m1.1" class="ltx_Math" alttext="N" display="inline"><semantics id="S3.SS1.p1.1.m1.1a"><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">N</annotation></semantics></math> clients with non-iid dataset <math id="S3.SS1.p1.2.m2.3" class="ltx_Math" alttext="\{D_{1},...,D_{N}\}" display="inline"><semantics id="S3.SS1.p1.2.m2.3a"><mrow id="S3.SS1.p1.2.m2.3.3.2" xref="S3.SS1.p1.2.m2.3.3.3.cmml"><mo stretchy="false" id="S3.SS1.p1.2.m2.3.3.2.3" xref="S3.SS1.p1.2.m2.3.3.3.cmml">{</mo><msub id="S3.SS1.p1.2.m2.2.2.1.1" xref="S3.SS1.p1.2.m2.2.2.1.1.cmml"><mi id="S3.SS1.p1.2.m2.2.2.1.1.2" xref="S3.SS1.p1.2.m2.2.2.1.1.2.cmml">D</mi><mn id="S3.SS1.p1.2.m2.2.2.1.1.3" xref="S3.SS1.p1.2.m2.2.2.1.1.3.cmml">1</mn></msub><mo id="S3.SS1.p1.2.m2.3.3.2.4" xref="S3.SS1.p1.2.m2.3.3.3.cmml">,</mo><mi mathvariant="normal" id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml">…</mi><mo id="S3.SS1.p1.2.m2.3.3.2.5" xref="S3.SS1.p1.2.m2.3.3.3.cmml">,</mo><msub id="S3.SS1.p1.2.m2.3.3.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.cmml"><mi id="S3.SS1.p1.2.m2.3.3.2.2.2" xref="S3.SS1.p1.2.m2.3.3.2.2.2.cmml">D</mi><mi id="S3.SS1.p1.2.m2.3.3.2.2.3" xref="S3.SS1.p1.2.m2.3.3.2.2.3.cmml">N</mi></msub><mo stretchy="false" id="S3.SS1.p1.2.m2.3.3.2.6" xref="S3.SS1.p1.2.m2.3.3.3.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.3b"><set id="S3.SS1.p1.2.m2.3.3.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2"><apply id="S3.SS1.p1.2.m2.2.2.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.2.2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1">subscript</csymbol><ci id="S3.SS1.p1.2.m2.2.2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.2">𝐷</ci><cn type="integer" id="S3.SS1.p1.2.m2.2.2.1.1.3.cmml" xref="S3.SS1.p1.2.m2.2.2.1.1.3">1</cn></apply><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">…</ci><apply id="S3.SS1.p1.2.m2.3.3.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.3.3.2.2.1.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2">subscript</csymbol><ci id="S3.SS1.p1.2.m2.3.3.2.2.2.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.2">𝐷</ci><ci id="S3.SS1.p1.2.m2.3.3.2.2.3.cmml" xref="S3.SS1.p1.2.m2.3.3.2.2.3">𝑁</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.3c">\{D_{1},...,D_{N}\}</annotation></semantics></math>.
Our method FedMS consists of two stages of training as depicted in Fig.<a href="#S2.F1" title="Figure 1 ‣ 2.1 Foundation Model ‣ 2 Background and Related Work ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">In the first stage, low-rank adaptation matrices are inserted into every transformer block of the foundation model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>. All the clients freeze the pre-trained foundation model weights and only update and upload the weights of the inserted matrices in every communication round.
In this stage, every client collaboratively trains a global model <math id="S3.SS1.p2.1.m1.1" class="ltx_Math" alttext="W_{g}" display="inline"><semantics id="S3.SS1.p2.1.m1.1a"><msub id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml"><mi id="S3.SS1.p2.1.m1.1.1.2" xref="S3.SS1.p2.1.m1.1.1.2.cmml">W</mi><mi id="S3.SS1.p2.1.m1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><apply id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p2.1.m1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.2">𝑊</ci><ci id="S3.SS1.p2.1.m1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">W_{g}</annotation></semantics></math>, which will be the global expert in stage two. The objective function of stage one can be expressed as</p>
<table id="S3.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E1.m1.5" class="ltx_Math" alttext="\mathcal{F}=\frac{1}{N}\sum_{i=1}^{N}\mathbb{E}_{(\boldsymbol{x}_{i},y_{i})\sim{d}_{i}}\mathcal{L}_{i}(\boldsymbol{x}_{i},y_{i};W_{g})" display="block"><semantics id="S3.E1.m1.5a"><mrow id="S3.E1.m1.5.5" xref="S3.E1.m1.5.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.5.5.5" xref="S3.E1.m1.5.5.5.cmml">ℱ</mi><mo id="S3.E1.m1.5.5.4" xref="S3.E1.m1.5.5.4.cmml">=</mo><mrow id="S3.E1.m1.5.5.3" xref="S3.E1.m1.5.5.3.cmml"><mfrac id="S3.E1.m1.5.5.3.5" xref="S3.E1.m1.5.5.3.5.cmml"><mn id="S3.E1.m1.5.5.3.5.2" xref="S3.E1.m1.5.5.3.5.2.cmml">1</mn><mi id="S3.E1.m1.5.5.3.5.3" xref="S3.E1.m1.5.5.3.5.3.cmml">N</mi></mfrac><mo lspace="0em" rspace="0em" id="S3.E1.m1.5.5.3.4" xref="S3.E1.m1.5.5.3.4.cmml">​</mo><mrow id="S3.E1.m1.5.5.3.3" xref="S3.E1.m1.5.5.3.3.cmml"><munderover id="S3.E1.m1.5.5.3.3.4" xref="S3.E1.m1.5.5.3.3.4.cmml"><mo movablelimits="false" id="S3.E1.m1.5.5.3.3.4.2.2" xref="S3.E1.m1.5.5.3.3.4.2.2.cmml">∑</mo><mrow id="S3.E1.m1.5.5.3.3.4.2.3" xref="S3.E1.m1.5.5.3.3.4.2.3.cmml"><mi id="S3.E1.m1.5.5.3.3.4.2.3.2" xref="S3.E1.m1.5.5.3.3.4.2.3.2.cmml">i</mi><mo id="S3.E1.m1.5.5.3.3.4.2.3.1" xref="S3.E1.m1.5.5.3.3.4.2.3.1.cmml">=</mo><mn id="S3.E1.m1.5.5.3.3.4.2.3.3" xref="S3.E1.m1.5.5.3.3.4.2.3.3.cmml">1</mn></mrow><mi id="S3.E1.m1.5.5.3.3.4.3" xref="S3.E1.m1.5.5.3.3.4.3.cmml">N</mi></munderover><mrow id="S3.E1.m1.5.5.3.3.3" xref="S3.E1.m1.5.5.3.3.3.cmml"><msub id="S3.E1.m1.5.5.3.3.3.5" xref="S3.E1.m1.5.5.3.3.3.5.cmml"><mi id="S3.E1.m1.5.5.3.3.3.5.2" xref="S3.E1.m1.5.5.3.3.3.5.2.cmml">𝔼</mi><mrow id="S3.E1.m1.2.2.2" xref="S3.E1.m1.2.2.2.cmml"><mrow id="S3.E1.m1.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E1.m1.2.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.3.cmml">(</mo><msub id="S3.E1.m1.1.1.1.1.1.1" xref="S3.E1.m1.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.1.1.1.1.1.1.2" xref="S3.E1.m1.1.1.1.1.1.1.2.cmml">𝒙</mi><mi id="S3.E1.m1.1.1.1.1.1.1.3" xref="S3.E1.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E1.m1.2.2.2.2.2.4" xref="S3.E1.m1.2.2.2.2.3.cmml">,</mo><msub id="S3.E1.m1.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.cmml"><mi id="S3.E1.m1.2.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E1.m1.2.2.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.2.2.3.cmml">i</mi></msub><mo stretchy="false" id="S3.E1.m1.2.2.2.2.2.5" xref="S3.E1.m1.2.2.2.2.3.cmml">)</mo></mrow><mo id="S3.E1.m1.2.2.2.3" xref="S3.E1.m1.2.2.2.3.cmml">∼</mo><msub id="S3.E1.m1.2.2.2.4" xref="S3.E1.m1.2.2.2.4.cmml"><mi id="S3.E1.m1.2.2.2.4.2" xref="S3.E1.m1.2.2.2.4.2.cmml">d</mi><mi id="S3.E1.m1.2.2.2.4.3" xref="S3.E1.m1.2.2.2.4.3.cmml">i</mi></msub></mrow></msub><mo lspace="0em" rspace="0em" id="S3.E1.m1.5.5.3.3.3.4" xref="S3.E1.m1.5.5.3.3.3.4.cmml">​</mo><msub id="S3.E1.m1.5.5.3.3.3.6" xref="S3.E1.m1.5.5.3.3.3.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.5.5.3.3.3.6.2" xref="S3.E1.m1.5.5.3.3.3.6.2.cmml">ℒ</mi><mi id="S3.E1.m1.5.5.3.3.3.6.3" xref="S3.E1.m1.5.5.3.3.3.6.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="S3.E1.m1.5.5.3.3.3.4a" xref="S3.E1.m1.5.5.3.3.3.4.cmml">​</mo><mrow id="S3.E1.m1.5.5.3.3.3.3.3" xref="S3.E1.m1.5.5.3.3.3.3.4.cmml"><mo stretchy="false" id="S3.E1.m1.5.5.3.3.3.3.3.4" xref="S3.E1.m1.5.5.3.3.3.3.4.cmml">(</mo><msub id="S3.E1.m1.3.3.1.1.1.1.1.1" xref="S3.E1.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.3.3.1.1.1.1.1.1.2" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2.cmml">𝒙</mi><mi id="S3.E1.m1.3.3.1.1.1.1.1.1.3" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E1.m1.5.5.3.3.3.3.3.5" xref="S3.E1.m1.5.5.3.3.3.3.4.cmml">,</mo><msub id="S3.E1.m1.4.4.2.2.2.2.2.2" xref="S3.E1.m1.4.4.2.2.2.2.2.2.cmml"><mi id="S3.E1.m1.4.4.2.2.2.2.2.2.2" xref="S3.E1.m1.4.4.2.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E1.m1.4.4.2.2.2.2.2.2.3" xref="S3.E1.m1.4.4.2.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.E1.m1.5.5.3.3.3.3.3.6" xref="S3.E1.m1.5.5.3.3.3.3.4.cmml">;</mo><msub id="S3.E1.m1.5.5.3.3.3.3.3.3" xref="S3.E1.m1.5.5.3.3.3.3.3.3.cmml"><mi id="S3.E1.m1.5.5.3.3.3.3.3.3.2" xref="S3.E1.m1.5.5.3.3.3.3.3.3.2.cmml">W</mi><mi id="S3.E1.m1.5.5.3.3.3.3.3.3.3" xref="S3.E1.m1.5.5.3.3.3.3.3.3.3.cmml">g</mi></msub><mo stretchy="false" id="S3.E1.m1.5.5.3.3.3.3.3.7" xref="S3.E1.m1.5.5.3.3.3.3.4.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.5b"><apply id="S3.E1.m1.5.5.cmml" xref="S3.E1.m1.5.5"><eq id="S3.E1.m1.5.5.4.cmml" xref="S3.E1.m1.5.5.4"></eq><ci id="S3.E1.m1.5.5.5.cmml" xref="S3.E1.m1.5.5.5">ℱ</ci><apply id="S3.E1.m1.5.5.3.cmml" xref="S3.E1.m1.5.5.3"><times id="S3.E1.m1.5.5.3.4.cmml" xref="S3.E1.m1.5.5.3.4"></times><apply id="S3.E1.m1.5.5.3.5.cmml" xref="S3.E1.m1.5.5.3.5"><divide id="S3.E1.m1.5.5.3.5.1.cmml" xref="S3.E1.m1.5.5.3.5"></divide><cn type="integer" id="S3.E1.m1.5.5.3.5.2.cmml" xref="S3.E1.m1.5.5.3.5.2">1</cn><ci id="S3.E1.m1.5.5.3.5.3.cmml" xref="S3.E1.m1.5.5.3.5.3">𝑁</ci></apply><apply id="S3.E1.m1.5.5.3.3.cmml" xref="S3.E1.m1.5.5.3.3"><apply id="S3.E1.m1.5.5.3.3.4.cmml" xref="S3.E1.m1.5.5.3.3.4"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.3.3.4.1.cmml" xref="S3.E1.m1.5.5.3.3.4">superscript</csymbol><apply id="S3.E1.m1.5.5.3.3.4.2.cmml" xref="S3.E1.m1.5.5.3.3.4"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.3.3.4.2.1.cmml" xref="S3.E1.m1.5.5.3.3.4">subscript</csymbol><sum id="S3.E1.m1.5.5.3.3.4.2.2.cmml" xref="S3.E1.m1.5.5.3.3.4.2.2"></sum><apply id="S3.E1.m1.5.5.3.3.4.2.3.cmml" xref="S3.E1.m1.5.5.3.3.4.2.3"><eq id="S3.E1.m1.5.5.3.3.4.2.3.1.cmml" xref="S3.E1.m1.5.5.3.3.4.2.3.1"></eq><ci id="S3.E1.m1.5.5.3.3.4.2.3.2.cmml" xref="S3.E1.m1.5.5.3.3.4.2.3.2">𝑖</ci><cn type="integer" id="S3.E1.m1.5.5.3.3.4.2.3.3.cmml" xref="S3.E1.m1.5.5.3.3.4.2.3.3">1</cn></apply></apply><ci id="S3.E1.m1.5.5.3.3.4.3.cmml" xref="S3.E1.m1.5.5.3.3.4.3">𝑁</ci></apply><apply id="S3.E1.m1.5.5.3.3.3.cmml" xref="S3.E1.m1.5.5.3.3.3"><times id="S3.E1.m1.5.5.3.3.3.4.cmml" xref="S3.E1.m1.5.5.3.3.3.4"></times><apply id="S3.E1.m1.5.5.3.3.3.5.cmml" xref="S3.E1.m1.5.5.3.3.3.5"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.3.3.3.5.1.cmml" xref="S3.E1.m1.5.5.3.3.3.5">subscript</csymbol><ci id="S3.E1.m1.5.5.3.3.3.5.2.cmml" xref="S3.E1.m1.5.5.3.3.3.5.2">𝔼</ci><apply id="S3.E1.m1.2.2.2.cmml" xref="S3.E1.m1.2.2.2"><csymbol cd="latexml" id="S3.E1.m1.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.3">similar-to</csymbol><interval closure="open" id="S3.E1.m1.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2"><apply id="S3.E1.m1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.1.1.1.1.1.1.2">𝒙</ci><ci id="S3.E1.m1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E1.m1.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.2.2.1.cmml" xref="S3.E1.m1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E1.m1.2.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2">𝑦</ci><ci id="S3.E1.m1.2.2.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.3">𝑖</ci></apply></interval><apply id="S3.E1.m1.2.2.2.4.cmml" xref="S3.E1.m1.2.2.2.4"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.4.1.cmml" xref="S3.E1.m1.2.2.2.4">subscript</csymbol><ci id="S3.E1.m1.2.2.2.4.2.cmml" xref="S3.E1.m1.2.2.2.4.2">𝑑</ci><ci id="S3.E1.m1.2.2.2.4.3.cmml" xref="S3.E1.m1.2.2.2.4.3">𝑖</ci></apply></apply></apply><apply id="S3.E1.m1.5.5.3.3.3.6.cmml" xref="S3.E1.m1.5.5.3.3.3.6"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.3.3.3.6.1.cmml" xref="S3.E1.m1.5.5.3.3.3.6">subscript</csymbol><ci id="S3.E1.m1.5.5.3.3.3.6.2.cmml" xref="S3.E1.m1.5.5.3.3.3.6.2">ℒ</ci><ci id="S3.E1.m1.5.5.3.3.3.6.3.cmml" xref="S3.E1.m1.5.5.3.3.3.6.3">𝑖</ci></apply><vector id="S3.E1.m1.5.5.3.3.3.3.4.cmml" xref="S3.E1.m1.5.5.3.3.3.3.3"><apply id="S3.E1.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E1.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.2">𝒙</ci><ci id="S3.E1.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.3.3.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E1.m1.4.4.2.2.2.2.2.2.cmml" xref="S3.E1.m1.4.4.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.2.2.2.2.2.2.1.cmml" xref="S3.E1.m1.4.4.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E1.m1.4.4.2.2.2.2.2.2.2.cmml" xref="S3.E1.m1.4.4.2.2.2.2.2.2.2">𝑦</ci><ci id="S3.E1.m1.4.4.2.2.2.2.2.2.3.cmml" xref="S3.E1.m1.4.4.2.2.2.2.2.2.3">𝑖</ci></apply><apply id="S3.E1.m1.5.5.3.3.3.3.3.3.cmml" xref="S3.E1.m1.5.5.3.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.E1.m1.5.5.3.3.3.3.3.3.1.cmml" xref="S3.E1.m1.5.5.3.3.3.3.3.3">subscript</csymbol><ci id="S3.E1.m1.5.5.3.3.3.3.3.3.2.cmml" xref="S3.E1.m1.5.5.3.3.3.3.3.3.2">𝑊</ci><ci id="S3.E1.m1.5.5.3.3.3.3.3.3.3.cmml" xref="S3.E1.m1.5.5.3.3.3.3.3.3.3">𝑔</ci></apply></vector></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.5c">\mathcal{F}=\frac{1}{N}\sum_{i=1}^{N}\mathbb{E}_{(\boldsymbol{x}_{i},y_{i})\sim{d}_{i}}\mathcal{L}_{i}(\boldsymbol{x}_{i},y_{i};W_{g})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p id="S3.SS1.p2.7" class="ltx_p">where <math id="S3.SS1.p2.2.m1.1" class="ltx_Math" alttext="\mathcal{L}_{i}" display="inline"><semantics id="S3.SS1.p2.2.m1.1a"><msub id="S3.SS1.p2.2.m1.1.1" xref="S3.SS1.p2.2.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p2.2.m1.1.1.2" xref="S3.SS1.p2.2.m1.1.1.2.cmml">ℒ</mi><mi id="S3.SS1.p2.2.m1.1.1.3" xref="S3.SS1.p2.2.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m1.1b"><apply id="S3.SS1.p2.2.m1.1.1.cmml" xref="S3.SS1.p2.2.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.2.m1.1.1.1.cmml" xref="S3.SS1.p2.2.m1.1.1">subscript</csymbol><ci id="S3.SS1.p2.2.m1.1.1.2.cmml" xref="S3.SS1.p2.2.m1.1.1.2">ℒ</ci><ci id="S3.SS1.p2.2.m1.1.1.3.cmml" xref="S3.SS1.p2.2.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m1.1c">\mathcal{L}_{i}</annotation></semantics></math> is the loss function of client <math id="S3.SS1.p2.3.m2.1" class="ltx_Math" alttext="i\in[N]" display="inline"><semantics id="S3.SS1.p2.3.m2.1a"><mrow id="S3.SS1.p2.3.m2.1.2" xref="S3.SS1.p2.3.m2.1.2.cmml"><mi id="S3.SS1.p2.3.m2.1.2.2" xref="S3.SS1.p2.3.m2.1.2.2.cmml">i</mi><mo id="S3.SS1.p2.3.m2.1.2.1" xref="S3.SS1.p2.3.m2.1.2.1.cmml">∈</mo><mrow id="S3.SS1.p2.3.m2.1.2.3.2" xref="S3.SS1.p2.3.m2.1.2.3.1.cmml"><mo stretchy="false" id="S3.SS1.p2.3.m2.1.2.3.2.1" xref="S3.SS1.p2.3.m2.1.2.3.1.1.cmml">[</mo><mi id="S3.SS1.p2.3.m2.1.1" xref="S3.SS1.p2.3.m2.1.1.cmml">N</mi><mo stretchy="false" id="S3.SS1.p2.3.m2.1.2.3.2.2" xref="S3.SS1.p2.3.m2.1.2.3.1.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m2.1b"><apply id="S3.SS1.p2.3.m2.1.2.cmml" xref="S3.SS1.p2.3.m2.1.2"><in id="S3.SS1.p2.3.m2.1.2.1.cmml" xref="S3.SS1.p2.3.m2.1.2.1"></in><ci id="S3.SS1.p2.3.m2.1.2.2.cmml" xref="S3.SS1.p2.3.m2.1.2.2">𝑖</ci><apply id="S3.SS1.p2.3.m2.1.2.3.1.cmml" xref="S3.SS1.p2.3.m2.1.2.3.2"><csymbol cd="latexml" id="S3.SS1.p2.3.m2.1.2.3.1.1.cmml" xref="S3.SS1.p2.3.m2.1.2.3.2.1">delimited-[]</csymbol><ci id="S3.SS1.p2.3.m2.1.1.cmml" xref="S3.SS1.p2.3.m2.1.1">𝑁</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m2.1c">i\in[N]</annotation></semantics></math>, <math id="S3.SS1.p2.4.m3.1" class="ltx_Math" alttext="\boldsymbol{x}_{i}" display="inline"><semantics id="S3.SS1.p2.4.m3.1a"><msub id="S3.SS1.p2.4.m3.1.1" xref="S3.SS1.p2.4.m3.1.1.cmml"><mi id="S3.SS1.p2.4.m3.1.1.2" xref="S3.SS1.p2.4.m3.1.1.2.cmml">𝒙</mi><mi id="S3.SS1.p2.4.m3.1.1.3" xref="S3.SS1.p2.4.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.4.m3.1b"><apply id="S3.SS1.p2.4.m3.1.1.cmml" xref="S3.SS1.p2.4.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m3.1.1.1.cmml" xref="S3.SS1.p2.4.m3.1.1">subscript</csymbol><ci id="S3.SS1.p2.4.m3.1.1.2.cmml" xref="S3.SS1.p2.4.m3.1.1.2">𝒙</ci><ci id="S3.SS1.p2.4.m3.1.1.3.cmml" xref="S3.SS1.p2.4.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.4.m3.1c">\boldsymbol{x}_{i}</annotation></semantics></math> is its private data and <math id="S3.SS1.p2.5.m4.1" class="ltx_Math" alttext="{y}_{i}" display="inline"><semantics id="S3.SS1.p2.5.m4.1a"><msub id="S3.SS1.p2.5.m4.1.1" xref="S3.SS1.p2.5.m4.1.1.cmml"><mi id="S3.SS1.p2.5.m4.1.1.2" xref="S3.SS1.p2.5.m4.1.1.2.cmml">y</mi><mi id="S3.SS1.p2.5.m4.1.1.3" xref="S3.SS1.p2.5.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.5.m4.1b"><apply id="S3.SS1.p2.5.m4.1.1.cmml" xref="S3.SS1.p2.5.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.5.m4.1.1.1.cmml" xref="S3.SS1.p2.5.m4.1.1">subscript</csymbol><ci id="S3.SS1.p2.5.m4.1.1.2.cmml" xref="S3.SS1.p2.5.m4.1.1.2">𝑦</ci><ci id="S3.SS1.p2.5.m4.1.1.3.cmml" xref="S3.SS1.p2.5.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.5.m4.1c">{y}_{i}</annotation></semantics></math> is the corresponding label. <math id="S3.SS1.p2.6.m5.1" class="ltx_Math" alttext="d_{i}" display="inline"><semantics id="S3.SS1.p2.6.m5.1a"><msub id="S3.SS1.p2.6.m5.1.1" xref="S3.SS1.p2.6.m5.1.1.cmml"><mi id="S3.SS1.p2.6.m5.1.1.2" xref="S3.SS1.p2.6.m5.1.1.2.cmml">d</mi><mi id="S3.SS1.p2.6.m5.1.1.3" xref="S3.SS1.p2.6.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.6.m5.1b"><apply id="S3.SS1.p2.6.m5.1.1.cmml" xref="S3.SS1.p2.6.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.6.m5.1.1.1.cmml" xref="S3.SS1.p2.6.m5.1.1">subscript</csymbol><ci id="S3.SS1.p2.6.m5.1.1.2.cmml" xref="S3.SS1.p2.6.m5.1.1.2">𝑑</ci><ci id="S3.SS1.p2.6.m5.1.1.3.cmml" xref="S3.SS1.p2.6.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.6.m5.1c">d_{i}</annotation></semantics></math> denotes the data distribution of client <math id="S3.SS1.p2.7.m6.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS1.p2.7.m6.1a"><mi id="S3.SS1.p2.7.m6.1.1" xref="S3.SS1.p2.7.m6.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.7.m6.1b"><ci id="S3.SS1.p2.7.m6.1.1.cmml" xref="S3.SS1.p2.7.m6.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.7.m6.1c">i</annotation></semantics></math>.</p>
</div>
<div id="S3.SS1.p3" class="ltx_para">
<p id="S3.SS1.p3.3" class="ltx_p">In the second stage, each client utilizes the trained global expert in the first stage and trains its personalized model. This model consists of a global expert, a local expert, and a gate model together constitute a Mixture of Foundation Models. During the second stage, local experts are only trained on clients’ local datasets using a novel Sparsely Activated LoRA algorithm and do not engage the global aggregation. We optimize</p>
<table id="S3.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E2.m1.5" class="ltx_Math" alttext="\mathcal{F}_{i}=\mathbb{E}_{(\boldsymbol{x}_{i},y_{i})\sim{d}_{i}}\mathcal{L}_{i}(\boldsymbol{x}_{i},y_{i};W_{i})" display="block"><semantics id="S3.E2.m1.5a"><mrow id="S3.E2.m1.5.5" xref="S3.E2.m1.5.5.cmml"><msub id="S3.E2.m1.5.5.5" xref="S3.E2.m1.5.5.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.5.5.5.2" xref="S3.E2.m1.5.5.5.2.cmml">ℱ</mi><mi id="S3.E2.m1.5.5.5.3" xref="S3.E2.m1.5.5.5.3.cmml">i</mi></msub><mo id="S3.E2.m1.5.5.4" xref="S3.E2.m1.5.5.4.cmml">=</mo><mrow id="S3.E2.m1.5.5.3" xref="S3.E2.m1.5.5.3.cmml"><msub id="S3.E2.m1.5.5.3.5" xref="S3.E2.m1.5.5.3.5.cmml"><mi id="S3.E2.m1.5.5.3.5.2" xref="S3.E2.m1.5.5.3.5.2.cmml">𝔼</mi><mrow id="S3.E2.m1.2.2.2" xref="S3.E2.m1.2.2.2.cmml"><mrow id="S3.E2.m1.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E2.m1.2.2.2.2.2.3" xref="S3.E2.m1.2.2.2.2.3.cmml">(</mo><msub id="S3.E2.m1.1.1.1.1.1.1" xref="S3.E2.m1.1.1.1.1.1.1.cmml"><mi id="S3.E2.m1.1.1.1.1.1.1.2" xref="S3.E2.m1.1.1.1.1.1.1.2.cmml">𝒙</mi><mi id="S3.E2.m1.1.1.1.1.1.1.3" xref="S3.E2.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E2.m1.2.2.2.2.2.4" xref="S3.E2.m1.2.2.2.2.3.cmml">,</mo><msub id="S3.E2.m1.2.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.2.2.cmml"><mi id="S3.E2.m1.2.2.2.2.2.2.2" xref="S3.E2.m1.2.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E2.m1.2.2.2.2.2.2.3" xref="S3.E2.m1.2.2.2.2.2.2.3.cmml">i</mi></msub><mo stretchy="false" id="S3.E2.m1.2.2.2.2.2.5" xref="S3.E2.m1.2.2.2.2.3.cmml">)</mo></mrow><mo id="S3.E2.m1.2.2.2.3" xref="S3.E2.m1.2.2.2.3.cmml">∼</mo><msub id="S3.E2.m1.2.2.2.4" xref="S3.E2.m1.2.2.2.4.cmml"><mi id="S3.E2.m1.2.2.2.4.2" xref="S3.E2.m1.2.2.2.4.2.cmml">d</mi><mi id="S3.E2.m1.2.2.2.4.3" xref="S3.E2.m1.2.2.2.4.3.cmml">i</mi></msub></mrow></msub><mo lspace="0em" rspace="0em" id="S3.E2.m1.5.5.3.4" xref="S3.E2.m1.5.5.3.4.cmml">​</mo><msub id="S3.E2.m1.5.5.3.6" xref="S3.E2.m1.5.5.3.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.5.5.3.6.2" xref="S3.E2.m1.5.5.3.6.2.cmml">ℒ</mi><mi id="S3.E2.m1.5.5.3.6.3" xref="S3.E2.m1.5.5.3.6.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="S3.E2.m1.5.5.3.4a" xref="S3.E2.m1.5.5.3.4.cmml">​</mo><mrow id="S3.E2.m1.5.5.3.3.3" xref="S3.E2.m1.5.5.3.3.4.cmml"><mo stretchy="false" id="S3.E2.m1.5.5.3.3.3.4" xref="S3.E2.m1.5.5.3.3.4.cmml">(</mo><msub id="S3.E2.m1.3.3.1.1.1.1" xref="S3.E2.m1.3.3.1.1.1.1.cmml"><mi id="S3.E2.m1.3.3.1.1.1.1.2" xref="S3.E2.m1.3.3.1.1.1.1.2.cmml">𝒙</mi><mi id="S3.E2.m1.3.3.1.1.1.1.3" xref="S3.E2.m1.3.3.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E2.m1.5.5.3.3.3.5" xref="S3.E2.m1.5.5.3.3.4.cmml">,</mo><msub id="S3.E2.m1.4.4.2.2.2.2" xref="S3.E2.m1.4.4.2.2.2.2.cmml"><mi id="S3.E2.m1.4.4.2.2.2.2.2" xref="S3.E2.m1.4.4.2.2.2.2.2.cmml">y</mi><mi id="S3.E2.m1.4.4.2.2.2.2.3" xref="S3.E2.m1.4.4.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.E2.m1.5.5.3.3.3.6" xref="S3.E2.m1.5.5.3.3.4.cmml">;</mo><msub id="S3.E2.m1.5.5.3.3.3.3" xref="S3.E2.m1.5.5.3.3.3.3.cmml"><mi id="S3.E2.m1.5.5.3.3.3.3.2" xref="S3.E2.m1.5.5.3.3.3.3.2.cmml">W</mi><mi id="S3.E2.m1.5.5.3.3.3.3.3" xref="S3.E2.m1.5.5.3.3.3.3.3.cmml">i</mi></msub><mo stretchy="false" id="S3.E2.m1.5.5.3.3.3.7" xref="S3.E2.m1.5.5.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E2.m1.5b"><apply id="S3.E2.m1.5.5.cmml" xref="S3.E2.m1.5.5"><eq id="S3.E2.m1.5.5.4.cmml" xref="S3.E2.m1.5.5.4"></eq><apply id="S3.E2.m1.5.5.5.cmml" xref="S3.E2.m1.5.5.5"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.5.1.cmml" xref="S3.E2.m1.5.5.5">subscript</csymbol><ci id="S3.E2.m1.5.5.5.2.cmml" xref="S3.E2.m1.5.5.5.2">ℱ</ci><ci id="S3.E2.m1.5.5.5.3.cmml" xref="S3.E2.m1.5.5.5.3">𝑖</ci></apply><apply id="S3.E2.m1.5.5.3.cmml" xref="S3.E2.m1.5.5.3"><times id="S3.E2.m1.5.5.3.4.cmml" xref="S3.E2.m1.5.5.3.4"></times><apply id="S3.E2.m1.5.5.3.5.cmml" xref="S3.E2.m1.5.5.3.5"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.3.5.1.cmml" xref="S3.E2.m1.5.5.3.5">subscript</csymbol><ci id="S3.E2.m1.5.5.3.5.2.cmml" xref="S3.E2.m1.5.5.3.5.2">𝔼</ci><apply id="S3.E2.m1.2.2.2.cmml" xref="S3.E2.m1.2.2.2"><csymbol cd="latexml" id="S3.E2.m1.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.3">similar-to</csymbol><interval closure="open" id="S3.E2.m1.2.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.2.2"><apply id="S3.E2.m1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.1.1.1.1.1.1.2">𝒙</ci><ci id="S3.E2.m1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E2.m1.2.2.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E2.m1.2.2.2.2.2.2.1.cmml" xref="S3.E2.m1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E2.m1.2.2.2.2.2.2.2.cmml" xref="S3.E2.m1.2.2.2.2.2.2.2">𝑦</ci><ci id="S3.E2.m1.2.2.2.2.2.2.3.cmml" xref="S3.E2.m1.2.2.2.2.2.2.3">𝑖</ci></apply></interval><apply id="S3.E2.m1.2.2.2.4.cmml" xref="S3.E2.m1.2.2.2.4"><csymbol cd="ambiguous" id="S3.E2.m1.2.2.2.4.1.cmml" xref="S3.E2.m1.2.2.2.4">subscript</csymbol><ci id="S3.E2.m1.2.2.2.4.2.cmml" xref="S3.E2.m1.2.2.2.4.2">𝑑</ci><ci id="S3.E2.m1.2.2.2.4.3.cmml" xref="S3.E2.m1.2.2.2.4.3">𝑖</ci></apply></apply></apply><apply id="S3.E2.m1.5.5.3.6.cmml" xref="S3.E2.m1.5.5.3.6"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.3.6.1.cmml" xref="S3.E2.m1.5.5.3.6">subscript</csymbol><ci id="S3.E2.m1.5.5.3.6.2.cmml" xref="S3.E2.m1.5.5.3.6.2">ℒ</ci><ci id="S3.E2.m1.5.5.3.6.3.cmml" xref="S3.E2.m1.5.5.3.6.3">𝑖</ci></apply><vector id="S3.E2.m1.5.5.3.3.4.cmml" xref="S3.E2.m1.5.5.3.3.3"><apply id="S3.E2.m1.3.3.1.1.1.1.cmml" xref="S3.E2.m1.3.3.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2.m1.3.3.1.1.1.1.1.cmml" xref="S3.E2.m1.3.3.1.1.1.1">subscript</csymbol><ci id="S3.E2.m1.3.3.1.1.1.1.2.cmml" xref="S3.E2.m1.3.3.1.1.1.1.2">𝒙</ci><ci id="S3.E2.m1.3.3.1.1.1.1.3.cmml" xref="S3.E2.m1.3.3.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E2.m1.4.4.2.2.2.2.cmml" xref="S3.E2.m1.4.4.2.2.2.2"><csymbol cd="ambiguous" id="S3.E2.m1.4.4.2.2.2.2.1.cmml" xref="S3.E2.m1.4.4.2.2.2.2">subscript</csymbol><ci id="S3.E2.m1.4.4.2.2.2.2.2.cmml" xref="S3.E2.m1.4.4.2.2.2.2.2">𝑦</ci><ci id="S3.E2.m1.4.4.2.2.2.2.3.cmml" xref="S3.E2.m1.4.4.2.2.2.2.3">𝑖</ci></apply><apply id="S3.E2.m1.5.5.3.3.3.3.cmml" xref="S3.E2.m1.5.5.3.3.3.3"><csymbol cd="ambiguous" id="S3.E2.m1.5.5.3.3.3.3.1.cmml" xref="S3.E2.m1.5.5.3.3.3.3">subscript</csymbol><ci id="S3.E2.m1.5.5.3.3.3.3.2.cmml" xref="S3.E2.m1.5.5.3.3.3.3.2">𝑊</ci><ci id="S3.E2.m1.5.5.3.3.3.3.3.cmml" xref="S3.E2.m1.5.5.3.3.3.3.3">𝑖</ci></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2.m1.5c">\mathcal{F}_{i}=\mathbb{E}_{(\boldsymbol{x}_{i},y_{i})\sim{d}_{i}}\mathcal{L}_{i}(\boldsymbol{x}_{i},y_{i};W_{i})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
<p id="S3.SS1.p3.2" class="ltx_p">where <math id="S3.SS1.p3.1.m1.1" class="ltx_Math" alttext="W_{i}" display="inline"><semantics id="S3.SS1.p3.1.m1.1a"><msub id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml"><mi id="S3.SS1.p3.1.m1.1.1.2" xref="S3.SS1.p3.1.m1.1.1.2.cmml">W</mi><mi id="S3.SS1.p3.1.m1.1.1.3" xref="S3.SS1.p3.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.1b"><apply id="S3.SS1.p3.1.m1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.1.m1.1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p3.1.m1.1.1.2.cmml" xref="S3.SS1.p3.1.m1.1.1.2">𝑊</ci><ci id="S3.SS1.p3.1.m1.1.1.3.cmml" xref="S3.SS1.p3.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.1c">W_{i}</annotation></semantics></math> is the parameters of the local expert of client <math id="S3.SS1.p3.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS1.p3.2.m2.1a"><mi id="S3.SS1.p3.2.m2.1.1" xref="S3.SS1.p3.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.2.m2.1b"><ci id="S3.SS1.p3.2.m2.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.2.m2.1c">i</annotation></semantics></math>.</p>
</div>
<div id="S3.SS1.p4" class="ltx_para">
<p id="S3.SS1.p4.3" class="ltx_p">We design and insert a gate adapter into the gate model and aggregate all the parameters of gate adapters in each communication round. We optimize the gate adapter parameters by</p>
<table id="S3.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E3.m1.5" class="ltx_Math" alttext="\mathcal{F}_{gate}=\frac{1}{N}\sum_{i=1}^{N}\mathbb{E}_{(\boldsymbol{x}_{i},y_{i})\sim{d}_{i}}\mathcal{L}_{i}(\boldsymbol{x}_{i},y_{i};G_{i})" display="block"><semantics id="S3.E3.m1.5a"><mrow id="S3.E3.m1.5.5" xref="S3.E3.m1.5.5.cmml"><msub id="S3.E3.m1.5.5.5" xref="S3.E3.m1.5.5.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.5.5.5.2" xref="S3.E3.m1.5.5.5.2.cmml">ℱ</mi><mrow id="S3.E3.m1.5.5.5.3" xref="S3.E3.m1.5.5.5.3.cmml"><mi id="S3.E3.m1.5.5.5.3.2" xref="S3.E3.m1.5.5.5.3.2.cmml">g</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.5.5.5.3.1" xref="S3.E3.m1.5.5.5.3.1.cmml">​</mo><mi id="S3.E3.m1.5.5.5.3.3" xref="S3.E3.m1.5.5.5.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.5.5.5.3.1a" xref="S3.E3.m1.5.5.5.3.1.cmml">​</mo><mi id="S3.E3.m1.5.5.5.3.4" xref="S3.E3.m1.5.5.5.3.4.cmml">t</mi><mo lspace="0em" rspace="0em" id="S3.E3.m1.5.5.5.3.1b" xref="S3.E3.m1.5.5.5.3.1.cmml">​</mo><mi id="S3.E3.m1.5.5.5.3.5" xref="S3.E3.m1.5.5.5.3.5.cmml">e</mi></mrow></msub><mo id="S3.E3.m1.5.5.4" xref="S3.E3.m1.5.5.4.cmml">=</mo><mrow id="S3.E3.m1.5.5.3" xref="S3.E3.m1.5.5.3.cmml"><mfrac id="S3.E3.m1.5.5.3.5" xref="S3.E3.m1.5.5.3.5.cmml"><mn id="S3.E3.m1.5.5.3.5.2" xref="S3.E3.m1.5.5.3.5.2.cmml">1</mn><mi id="S3.E3.m1.5.5.3.5.3" xref="S3.E3.m1.5.5.3.5.3.cmml">N</mi></mfrac><mo lspace="0em" rspace="0em" id="S3.E3.m1.5.5.3.4" xref="S3.E3.m1.5.5.3.4.cmml">​</mo><mrow id="S3.E3.m1.5.5.3.3" xref="S3.E3.m1.5.5.3.3.cmml"><munderover id="S3.E3.m1.5.5.3.3.4" xref="S3.E3.m1.5.5.3.3.4.cmml"><mo movablelimits="false" id="S3.E3.m1.5.5.3.3.4.2.2" xref="S3.E3.m1.5.5.3.3.4.2.2.cmml">∑</mo><mrow id="S3.E3.m1.5.5.3.3.4.2.3" xref="S3.E3.m1.5.5.3.3.4.2.3.cmml"><mi id="S3.E3.m1.5.5.3.3.4.2.3.2" xref="S3.E3.m1.5.5.3.3.4.2.3.2.cmml">i</mi><mo id="S3.E3.m1.5.5.3.3.4.2.3.1" xref="S3.E3.m1.5.5.3.3.4.2.3.1.cmml">=</mo><mn id="S3.E3.m1.5.5.3.3.4.2.3.3" xref="S3.E3.m1.5.5.3.3.4.2.3.3.cmml">1</mn></mrow><mi id="S3.E3.m1.5.5.3.3.4.3" xref="S3.E3.m1.5.5.3.3.4.3.cmml">N</mi></munderover><mrow id="S3.E3.m1.5.5.3.3.3" xref="S3.E3.m1.5.5.3.3.3.cmml"><msub id="S3.E3.m1.5.5.3.3.3.5" xref="S3.E3.m1.5.5.3.3.3.5.cmml"><mi id="S3.E3.m1.5.5.3.3.3.5.2" xref="S3.E3.m1.5.5.3.3.3.5.2.cmml">𝔼</mi><mrow id="S3.E3.m1.2.2.2" xref="S3.E3.m1.2.2.2.cmml"><mrow id="S3.E3.m1.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E3.m1.2.2.2.2.2.3" xref="S3.E3.m1.2.2.2.2.3.cmml">(</mo><msub id="S3.E3.m1.1.1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.1.1.cmml"><mi id="S3.E3.m1.1.1.1.1.1.1.2" xref="S3.E3.m1.1.1.1.1.1.1.2.cmml">𝒙</mi><mi id="S3.E3.m1.1.1.1.1.1.1.3" xref="S3.E3.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E3.m1.2.2.2.2.2.4" xref="S3.E3.m1.2.2.2.2.3.cmml">,</mo><msub id="S3.E3.m1.2.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.2.2.cmml"><mi id="S3.E3.m1.2.2.2.2.2.2.2" xref="S3.E3.m1.2.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E3.m1.2.2.2.2.2.2.3" xref="S3.E3.m1.2.2.2.2.2.2.3.cmml">i</mi></msub><mo stretchy="false" id="S3.E3.m1.2.2.2.2.2.5" xref="S3.E3.m1.2.2.2.2.3.cmml">)</mo></mrow><mo id="S3.E3.m1.2.2.2.3" xref="S3.E3.m1.2.2.2.3.cmml">∼</mo><msub id="S3.E3.m1.2.2.2.4" xref="S3.E3.m1.2.2.2.4.cmml"><mi id="S3.E3.m1.2.2.2.4.2" xref="S3.E3.m1.2.2.2.4.2.cmml">d</mi><mi id="S3.E3.m1.2.2.2.4.3" xref="S3.E3.m1.2.2.2.4.3.cmml">i</mi></msub></mrow></msub><mo lspace="0em" rspace="0em" id="S3.E3.m1.5.5.3.3.3.4" xref="S3.E3.m1.5.5.3.3.3.4.cmml">​</mo><msub id="S3.E3.m1.5.5.3.3.3.6" xref="S3.E3.m1.5.5.3.3.3.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E3.m1.5.5.3.3.3.6.2" xref="S3.E3.m1.5.5.3.3.3.6.2.cmml">ℒ</mi><mi id="S3.E3.m1.5.5.3.3.3.6.3" xref="S3.E3.m1.5.5.3.3.3.6.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="S3.E3.m1.5.5.3.3.3.4a" xref="S3.E3.m1.5.5.3.3.3.4.cmml">​</mo><mrow id="S3.E3.m1.5.5.3.3.3.3.3" xref="S3.E3.m1.5.5.3.3.3.3.4.cmml"><mo stretchy="false" id="S3.E3.m1.5.5.3.3.3.3.3.4" xref="S3.E3.m1.5.5.3.3.3.3.4.cmml">(</mo><msub id="S3.E3.m1.3.3.1.1.1.1.1.1" xref="S3.E3.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S3.E3.m1.3.3.1.1.1.1.1.1.2" xref="S3.E3.m1.3.3.1.1.1.1.1.1.2.cmml">𝒙</mi><mi id="S3.E3.m1.3.3.1.1.1.1.1.1.3" xref="S3.E3.m1.3.3.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E3.m1.5.5.3.3.3.3.3.5" xref="S3.E3.m1.5.5.3.3.3.3.4.cmml">,</mo><msub id="S3.E3.m1.4.4.2.2.2.2.2.2" xref="S3.E3.m1.4.4.2.2.2.2.2.2.cmml"><mi id="S3.E3.m1.4.4.2.2.2.2.2.2.2" xref="S3.E3.m1.4.4.2.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E3.m1.4.4.2.2.2.2.2.2.3" xref="S3.E3.m1.4.4.2.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.E3.m1.5.5.3.3.3.3.3.6" xref="S3.E3.m1.5.5.3.3.3.3.4.cmml">;</mo><msub id="S3.E3.m1.5.5.3.3.3.3.3.3" xref="S3.E3.m1.5.5.3.3.3.3.3.3.cmml"><mi id="S3.E3.m1.5.5.3.3.3.3.3.3.2" xref="S3.E3.m1.5.5.3.3.3.3.3.3.2.cmml">G</mi><mi id="S3.E3.m1.5.5.3.3.3.3.3.3.3" xref="S3.E3.m1.5.5.3.3.3.3.3.3.3.cmml">i</mi></msub><mo stretchy="false" id="S3.E3.m1.5.5.3.3.3.3.3.7" xref="S3.E3.m1.5.5.3.3.3.3.4.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.5b"><apply id="S3.E3.m1.5.5.cmml" xref="S3.E3.m1.5.5"><eq id="S3.E3.m1.5.5.4.cmml" xref="S3.E3.m1.5.5.4"></eq><apply id="S3.E3.m1.5.5.5.cmml" xref="S3.E3.m1.5.5.5"><csymbol cd="ambiguous" id="S3.E3.m1.5.5.5.1.cmml" xref="S3.E3.m1.5.5.5">subscript</csymbol><ci id="S3.E3.m1.5.5.5.2.cmml" xref="S3.E3.m1.5.5.5.2">ℱ</ci><apply id="S3.E3.m1.5.5.5.3.cmml" xref="S3.E3.m1.5.5.5.3"><times id="S3.E3.m1.5.5.5.3.1.cmml" xref="S3.E3.m1.5.5.5.3.1"></times><ci id="S3.E3.m1.5.5.5.3.2.cmml" xref="S3.E3.m1.5.5.5.3.2">𝑔</ci><ci id="S3.E3.m1.5.5.5.3.3.cmml" xref="S3.E3.m1.5.5.5.3.3">𝑎</ci><ci id="S3.E3.m1.5.5.5.3.4.cmml" xref="S3.E3.m1.5.5.5.3.4">𝑡</ci><ci id="S3.E3.m1.5.5.5.3.5.cmml" xref="S3.E3.m1.5.5.5.3.5">𝑒</ci></apply></apply><apply id="S3.E3.m1.5.5.3.cmml" xref="S3.E3.m1.5.5.3"><times id="S3.E3.m1.5.5.3.4.cmml" xref="S3.E3.m1.5.5.3.4"></times><apply id="S3.E3.m1.5.5.3.5.cmml" xref="S3.E3.m1.5.5.3.5"><divide id="S3.E3.m1.5.5.3.5.1.cmml" xref="S3.E3.m1.5.5.3.5"></divide><cn type="integer" id="S3.E3.m1.5.5.3.5.2.cmml" xref="S3.E3.m1.5.5.3.5.2">1</cn><ci id="S3.E3.m1.5.5.3.5.3.cmml" xref="S3.E3.m1.5.5.3.5.3">𝑁</ci></apply><apply id="S3.E3.m1.5.5.3.3.cmml" xref="S3.E3.m1.5.5.3.3"><apply id="S3.E3.m1.5.5.3.3.4.cmml" xref="S3.E3.m1.5.5.3.3.4"><csymbol cd="ambiguous" id="S3.E3.m1.5.5.3.3.4.1.cmml" xref="S3.E3.m1.5.5.3.3.4">superscript</csymbol><apply id="S3.E3.m1.5.5.3.3.4.2.cmml" xref="S3.E3.m1.5.5.3.3.4"><csymbol cd="ambiguous" id="S3.E3.m1.5.5.3.3.4.2.1.cmml" xref="S3.E3.m1.5.5.3.3.4">subscript</csymbol><sum id="S3.E3.m1.5.5.3.3.4.2.2.cmml" xref="S3.E3.m1.5.5.3.3.4.2.2"></sum><apply id="S3.E3.m1.5.5.3.3.4.2.3.cmml" xref="S3.E3.m1.5.5.3.3.4.2.3"><eq id="S3.E3.m1.5.5.3.3.4.2.3.1.cmml" xref="S3.E3.m1.5.5.3.3.4.2.3.1"></eq><ci id="S3.E3.m1.5.5.3.3.4.2.3.2.cmml" xref="S3.E3.m1.5.5.3.3.4.2.3.2">𝑖</ci><cn type="integer" id="S3.E3.m1.5.5.3.3.4.2.3.3.cmml" xref="S3.E3.m1.5.5.3.3.4.2.3.3">1</cn></apply></apply><ci id="S3.E3.m1.5.5.3.3.4.3.cmml" xref="S3.E3.m1.5.5.3.3.4.3">𝑁</ci></apply><apply id="S3.E3.m1.5.5.3.3.3.cmml" xref="S3.E3.m1.5.5.3.3.3"><times id="S3.E3.m1.5.5.3.3.3.4.cmml" xref="S3.E3.m1.5.5.3.3.3.4"></times><apply id="S3.E3.m1.5.5.3.3.3.5.cmml" xref="S3.E3.m1.5.5.3.3.3.5"><csymbol cd="ambiguous" id="S3.E3.m1.5.5.3.3.3.5.1.cmml" xref="S3.E3.m1.5.5.3.3.3.5">subscript</csymbol><ci id="S3.E3.m1.5.5.3.3.3.5.2.cmml" xref="S3.E3.m1.5.5.3.3.3.5.2">𝔼</ci><apply id="S3.E3.m1.2.2.2.cmml" xref="S3.E3.m1.2.2.2"><csymbol cd="latexml" id="S3.E3.m1.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2.3">similar-to</csymbol><interval closure="open" id="S3.E3.m1.2.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2.2.2"><apply id="S3.E3.m1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.1.1.1.1.1.1.2">𝒙</ci><ci id="S3.E3.m1.1.1.1.1.1.1.3.cmml" xref="S3.E3.m1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E3.m1.2.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.2.2.2.1.cmml" xref="S3.E3.m1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E3.m1.2.2.2.2.2.2.2.cmml" xref="S3.E3.m1.2.2.2.2.2.2.2">𝑦</ci><ci id="S3.E3.m1.2.2.2.2.2.2.3.cmml" xref="S3.E3.m1.2.2.2.2.2.2.3">𝑖</ci></apply></interval><apply id="S3.E3.m1.2.2.2.4.cmml" xref="S3.E3.m1.2.2.2.4"><csymbol cd="ambiguous" id="S3.E3.m1.2.2.2.4.1.cmml" xref="S3.E3.m1.2.2.2.4">subscript</csymbol><ci id="S3.E3.m1.2.2.2.4.2.cmml" xref="S3.E3.m1.2.2.2.4.2">𝑑</ci><ci id="S3.E3.m1.2.2.2.4.3.cmml" xref="S3.E3.m1.2.2.2.4.3">𝑖</ci></apply></apply></apply><apply id="S3.E3.m1.5.5.3.3.3.6.cmml" xref="S3.E3.m1.5.5.3.3.3.6"><csymbol cd="ambiguous" id="S3.E3.m1.5.5.3.3.3.6.1.cmml" xref="S3.E3.m1.5.5.3.3.3.6">subscript</csymbol><ci id="S3.E3.m1.5.5.3.3.3.6.2.cmml" xref="S3.E3.m1.5.5.3.3.3.6.2">ℒ</ci><ci id="S3.E3.m1.5.5.3.3.3.6.3.cmml" xref="S3.E3.m1.5.5.3.3.3.6.3">𝑖</ci></apply><vector id="S3.E3.m1.5.5.3.3.3.3.4.cmml" xref="S3.E3.m1.5.5.3.3.3.3.3"><apply id="S3.E3.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E3.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E3.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1.2">𝒙</ci><ci id="S3.E3.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E3.m1.3.3.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E3.m1.4.4.2.2.2.2.2.2.cmml" xref="S3.E3.m1.4.4.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E3.m1.4.4.2.2.2.2.2.2.1.cmml" xref="S3.E3.m1.4.4.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E3.m1.4.4.2.2.2.2.2.2.2.cmml" xref="S3.E3.m1.4.4.2.2.2.2.2.2.2">𝑦</ci><ci id="S3.E3.m1.4.4.2.2.2.2.2.2.3.cmml" xref="S3.E3.m1.4.4.2.2.2.2.2.2.3">𝑖</ci></apply><apply id="S3.E3.m1.5.5.3.3.3.3.3.3.cmml" xref="S3.E3.m1.5.5.3.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.E3.m1.5.5.3.3.3.3.3.3.1.cmml" xref="S3.E3.m1.5.5.3.3.3.3.3.3">subscript</csymbol><ci id="S3.E3.m1.5.5.3.3.3.3.3.3.2.cmml" xref="S3.E3.m1.5.5.3.3.3.3.3.3.2">𝐺</ci><ci id="S3.E3.m1.5.5.3.3.3.3.3.3.3.cmml" xref="S3.E3.m1.5.5.3.3.3.3.3.3.3">𝑖</ci></apply></vector></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.5c">\mathcal{F}_{gate}=\frac{1}{N}\sum_{i=1}^{N}\mathbb{E}_{(\boldsymbol{x}_{i},y_{i})\sim{d}_{i}}\mathcal{L}_{i}(\boldsymbol{x}_{i},y_{i};G_{i})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p id="S3.SS1.p4.2" class="ltx_p">where <math id="S3.SS1.p4.1.m1.1" class="ltx_Math" alttext="G_{i}" display="inline"><semantics id="S3.SS1.p4.1.m1.1a"><msub id="S3.SS1.p4.1.m1.1.1" xref="S3.SS1.p4.1.m1.1.1.cmml"><mi id="S3.SS1.p4.1.m1.1.1.2" xref="S3.SS1.p4.1.m1.1.1.2.cmml">G</mi><mi id="S3.SS1.p4.1.m1.1.1.3" xref="S3.SS1.p4.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.1.m1.1b"><apply id="S3.SS1.p4.1.m1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.1.m1.1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p4.1.m1.1.1.2.cmml" xref="S3.SS1.p4.1.m1.1.1.2">𝐺</ci><ci id="S3.SS1.p4.1.m1.1.1.3.cmml" xref="S3.SS1.p4.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.1.m1.1c">G_{i}</annotation></semantics></math> is the parameters of the gate model of client <math id="S3.SS1.p4.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS1.p4.2.m2.1a"><mi id="S3.SS1.p4.2.m2.1.1" xref="S3.SS1.p4.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.2.m2.1b"><ci id="S3.SS1.p4.2.m2.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.2.m2.1c">i</annotation></semantics></math>.</p>
</div>
<div id="S3.SS1.p5" class="ltx_para">
<p id="S3.SS1.p5.1" class="ltx_p">We propose two novel algorithms to tackle challenges raised by FL with FM.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span><span id="S3.SS2.1.1" class="ltx_text ltx_font_italic">Sparsely Activated LoRA</span>
</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">According to <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite>, the capability of the deep neural network tends to improve with the increase of the number of parameters of the model. FL with FM presents substantial challenges to the communication and computation of the distributed system.</p>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<p id="S3.SS2.p2.4" class="ltx_p">In traditional FL <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>, <a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite>, model parameters after local training are usually transmitted to the server for model weights aggregation in each communication round.
This paradigm faces great challenges when FMs are trained in a FL procedure.
Suppose we have a FM whose parameters are represented by <math id="S3.SS2.p2.1.m1.1" class="ltx_Math" alttext="\mathbf{W_{f}}" display="inline"><semantics id="S3.SS2.p2.1.m1.1a"><msub id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml"><mi id="S3.SS2.p2.1.m1.1.1.2" xref="S3.SS2.p2.1.m1.1.1.2.cmml">𝐖</mi><mi id="S3.SS2.p2.1.m1.1.1.3" xref="S3.SS2.p2.1.m1.1.1.3.cmml">𝐟</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><apply id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p2.1.m1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1.2">𝐖</ci><ci id="S3.SS2.p2.1.m1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.3">𝐟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">\mathbf{W_{f}}</annotation></semantics></math>. For full parameters fine-tuning, we need to calculate and store another model <math id="S3.SS2.p2.2.m2.1" class="ltx_Math" alttext="\mathbf{W_{k}}" display="inline"><semantics id="S3.SS2.p2.2.m2.1a"><msub id="S3.SS2.p2.2.m2.1.1" xref="S3.SS2.p2.2.m2.1.1.cmml"><mi id="S3.SS2.p2.2.m2.1.1.2" xref="S3.SS2.p2.2.m2.1.1.2.cmml">𝐖</mi><mi id="S3.SS2.p2.2.m2.1.1.3" xref="S3.SS2.p2.2.m2.1.1.3.cmml">𝐤</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.2.m2.1b"><apply id="S3.SS2.p2.2.m2.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.1.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS2.p2.2.m2.1.1.2.cmml" xref="S3.SS2.p2.2.m2.1.1.2">𝐖</ci><ci id="S3.SS2.p2.2.m2.1.1.3.cmml" xref="S3.SS2.p2.2.m2.1.1.3">𝐤</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.2.m2.1c">\mathbf{W_{k}}</annotation></semantics></math> which has the same parameter size of <math id="S3.SS2.p2.3.m3.1" class="ltx_Math" alttext="\mathbf{W_{f}}" display="inline"><semantics id="S3.SS2.p2.3.m3.1a"><msub id="S3.SS2.p2.3.m3.1.1" xref="S3.SS2.p2.3.m3.1.1.cmml"><mi id="S3.SS2.p2.3.m3.1.1.2" xref="S3.SS2.p2.3.m3.1.1.2.cmml">𝐖</mi><mi id="S3.SS2.p2.3.m3.1.1.3" xref="S3.SS2.p2.3.m3.1.1.3.cmml">𝐟</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.3.m3.1b"><apply id="S3.SS2.p2.3.m3.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.3.m3.1.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1">subscript</csymbol><ci id="S3.SS2.p2.3.m3.1.1.2.cmml" xref="S3.SS2.p2.3.m3.1.1.2">𝐖</ci><ci id="S3.SS2.p2.3.m3.1.1.3.cmml" xref="S3.SS2.p2.3.m3.1.1.3">𝐟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.3.m3.1c">\mathbf{W_{f}}</annotation></semantics></math> for each task <math id="S3.SS2.p2.4.m4.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS2.p2.4.m4.1a"><mi id="S3.SS2.p2.4.m4.1.1" xref="S3.SS2.p2.4.m4.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.4.m4.1b"><ci id="S3.SS2.p2.4.m4.1.1.cmml" xref="S3.SS2.p2.4.m4.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.4.m4.1c">k</annotation></semantics></math>.
FM typically consists of over 10 million model parameters, resulting in significant transmission time requirements for modern mobile communication networks. Moreover, the training of FM necessitates substantial computation power and storage capacity, whereas edge devices typically possess limited computational capabilities and storage space. Therefore, it is imperative to develop an algorithm that mitigates the communication and computation costs associated with FL using FM.</p>
</div>
<div id="S3.SS2.p3" class="ltx_para">
<p id="S3.SS2.p3.1" class="ltx_p">To tackle these challenges, we design a novel Sparsely Activated LoRA (<span id="S3.SS2.p3.1.1" class="ltx_text ltx_font_typewriter">SAL</span>) algorithm that can achieve the SOTA performance while only tuning less than <math id="S3.SS2.p3.1.m1.1" class="ltx_Math" alttext="1\%" display="inline"><semantics id="S3.SS2.p3.1.m1.1a"><mrow id="S3.SS2.p3.1.m1.1.1" xref="S3.SS2.p3.1.m1.1.1.cmml"><mn id="S3.SS2.p3.1.m1.1.1.2" xref="S3.SS2.p3.1.m1.1.1.2.cmml">1</mn><mo id="S3.SS2.p3.1.m1.1.1.1" xref="S3.SS2.p3.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.1.m1.1b"><apply id="S3.SS2.p3.1.m1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1"><csymbol cd="latexml" id="S3.SS2.p3.1.m1.1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1.1">percent</csymbol><cn type="integer" id="S3.SS2.p3.1.m1.1.1.2.cmml" xref="S3.SS2.p3.1.m1.1.1.2">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.1.m1.1c">1\%</annotation></semantics></math> of the total parameters of FM.
Common pre-trained language models are capable of efficient learning even when randomly projected into a smaller subspace because they have a very low intrinsic dimension<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>. Edward J. Hu et al.<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite> propose Low-rank adaptation (LoRA) to insert trainable low-rank decomposition matrices in FMs, enabling model optimization with minimal parameter tuning.</p>
</div>
<div id="S3.SS2.p4" class="ltx_para">
<p id="S3.SS2.p4.11" class="ltx_p">Inspired by this, we insert trainable low-rank decomposition matrices in every layer of the visual encoder and the text encoder of the CLIP model. We denote the weight parameter matrix as <math id="S3.SS2.p4.1.m1.1" class="ltx_Math" alttext="W_{0}\in R^{E\times F}" display="inline"><semantics id="S3.SS2.p4.1.m1.1a"><mrow id="S3.SS2.p4.1.m1.1.1" xref="S3.SS2.p4.1.m1.1.1.cmml"><msub id="S3.SS2.p4.1.m1.1.1.2" xref="S3.SS2.p4.1.m1.1.1.2.cmml"><mi id="S3.SS2.p4.1.m1.1.1.2.2" xref="S3.SS2.p4.1.m1.1.1.2.2.cmml">W</mi><mn id="S3.SS2.p4.1.m1.1.1.2.3" xref="S3.SS2.p4.1.m1.1.1.2.3.cmml">0</mn></msub><mo id="S3.SS2.p4.1.m1.1.1.1" xref="S3.SS2.p4.1.m1.1.1.1.cmml">∈</mo><msup id="S3.SS2.p4.1.m1.1.1.3" xref="S3.SS2.p4.1.m1.1.1.3.cmml"><mi id="S3.SS2.p4.1.m1.1.1.3.2" xref="S3.SS2.p4.1.m1.1.1.3.2.cmml">R</mi><mrow id="S3.SS2.p4.1.m1.1.1.3.3" xref="S3.SS2.p4.1.m1.1.1.3.3.cmml"><mi id="S3.SS2.p4.1.m1.1.1.3.3.2" xref="S3.SS2.p4.1.m1.1.1.3.3.2.cmml">E</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS2.p4.1.m1.1.1.3.3.1" xref="S3.SS2.p4.1.m1.1.1.3.3.1.cmml">×</mo><mi id="S3.SS2.p4.1.m1.1.1.3.3.3" xref="S3.SS2.p4.1.m1.1.1.3.3.3.cmml">F</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.1.m1.1b"><apply id="S3.SS2.p4.1.m1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1"><in id="S3.SS2.p4.1.m1.1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1.1"></in><apply id="S3.SS2.p4.1.m1.1.1.2.cmml" xref="S3.SS2.p4.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p4.1.m1.1.1.2.1.cmml" xref="S3.SS2.p4.1.m1.1.1.2">subscript</csymbol><ci id="S3.SS2.p4.1.m1.1.1.2.2.cmml" xref="S3.SS2.p4.1.m1.1.1.2.2">𝑊</ci><cn type="integer" id="S3.SS2.p4.1.m1.1.1.2.3.cmml" xref="S3.SS2.p4.1.m1.1.1.2.3">0</cn></apply><apply id="S3.SS2.p4.1.m1.1.1.3.cmml" xref="S3.SS2.p4.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p4.1.m1.1.1.3.1.cmml" xref="S3.SS2.p4.1.m1.1.1.3">superscript</csymbol><ci id="S3.SS2.p4.1.m1.1.1.3.2.cmml" xref="S3.SS2.p4.1.m1.1.1.3.2">𝑅</ci><apply id="S3.SS2.p4.1.m1.1.1.3.3.cmml" xref="S3.SS2.p4.1.m1.1.1.3.3"><times id="S3.SS2.p4.1.m1.1.1.3.3.1.cmml" xref="S3.SS2.p4.1.m1.1.1.3.3.1"></times><ci id="S3.SS2.p4.1.m1.1.1.3.3.2.cmml" xref="S3.SS2.p4.1.m1.1.1.3.3.2">𝐸</ci><ci id="S3.SS2.p4.1.m1.1.1.3.3.3.cmml" xref="S3.SS2.p4.1.m1.1.1.3.3.3">𝐹</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.1.m1.1c">W_{0}\in R^{E\times F}</annotation></semantics></math> and the inserted low-rank decomposition matrices as <math id="S3.SS2.p4.2.m2.1" class="ltx_Math" alttext="\Delta W" display="inline"><semantics id="S3.SS2.p4.2.m2.1a"><mrow id="S3.SS2.p4.2.m2.1.1" xref="S3.SS2.p4.2.m2.1.1.cmml"><mi mathvariant="normal" id="S3.SS2.p4.2.m2.1.1.2" xref="S3.SS2.p4.2.m2.1.1.2.cmml">Δ</mi><mo lspace="0em" rspace="0em" id="S3.SS2.p4.2.m2.1.1.1" xref="S3.SS2.p4.2.m2.1.1.1.cmml">​</mo><mi id="S3.SS2.p4.2.m2.1.1.3" xref="S3.SS2.p4.2.m2.1.1.3.cmml">W</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.2.m2.1b"><apply id="S3.SS2.p4.2.m2.1.1.cmml" xref="S3.SS2.p4.2.m2.1.1"><times id="S3.SS2.p4.2.m2.1.1.1.cmml" xref="S3.SS2.p4.2.m2.1.1.1"></times><ci id="S3.SS2.p4.2.m2.1.1.2.cmml" xref="S3.SS2.p4.2.m2.1.1.2">Δ</ci><ci id="S3.SS2.p4.2.m2.1.1.3.cmml" xref="S3.SS2.p4.2.m2.1.1.3">𝑊</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.2.m2.1c">\Delta W</annotation></semantics></math>, which can be calculated by two low-rank matrices <math id="S3.SS2.p4.3.m3.1" class="ltx_Math" alttext="\Delta W=W_{A}W_{B}" display="inline"><semantics id="S3.SS2.p4.3.m3.1a"><mrow id="S3.SS2.p4.3.m3.1.1" xref="S3.SS2.p4.3.m3.1.1.cmml"><mrow id="S3.SS2.p4.3.m3.1.1.2" xref="S3.SS2.p4.3.m3.1.1.2.cmml"><mi mathvariant="normal" id="S3.SS2.p4.3.m3.1.1.2.2" xref="S3.SS2.p4.3.m3.1.1.2.2.cmml">Δ</mi><mo lspace="0em" rspace="0em" id="S3.SS2.p4.3.m3.1.1.2.1" xref="S3.SS2.p4.3.m3.1.1.2.1.cmml">​</mo><mi id="S3.SS2.p4.3.m3.1.1.2.3" xref="S3.SS2.p4.3.m3.1.1.2.3.cmml">W</mi></mrow><mo id="S3.SS2.p4.3.m3.1.1.1" xref="S3.SS2.p4.3.m3.1.1.1.cmml">=</mo><mrow id="S3.SS2.p4.3.m3.1.1.3" xref="S3.SS2.p4.3.m3.1.1.3.cmml"><msub id="S3.SS2.p4.3.m3.1.1.3.2" xref="S3.SS2.p4.3.m3.1.1.3.2.cmml"><mi id="S3.SS2.p4.3.m3.1.1.3.2.2" xref="S3.SS2.p4.3.m3.1.1.3.2.2.cmml">W</mi><mi id="S3.SS2.p4.3.m3.1.1.3.2.3" xref="S3.SS2.p4.3.m3.1.1.3.2.3.cmml">A</mi></msub><mo lspace="0em" rspace="0em" id="S3.SS2.p4.3.m3.1.1.3.1" xref="S3.SS2.p4.3.m3.1.1.3.1.cmml">​</mo><msub id="S3.SS2.p4.3.m3.1.1.3.3" xref="S3.SS2.p4.3.m3.1.1.3.3.cmml"><mi id="S3.SS2.p4.3.m3.1.1.3.3.2" xref="S3.SS2.p4.3.m3.1.1.3.3.2.cmml">W</mi><mi id="S3.SS2.p4.3.m3.1.1.3.3.3" xref="S3.SS2.p4.3.m3.1.1.3.3.3.cmml">B</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.3.m3.1b"><apply id="S3.SS2.p4.3.m3.1.1.cmml" xref="S3.SS2.p4.3.m3.1.1"><eq id="S3.SS2.p4.3.m3.1.1.1.cmml" xref="S3.SS2.p4.3.m3.1.1.1"></eq><apply id="S3.SS2.p4.3.m3.1.1.2.cmml" xref="S3.SS2.p4.3.m3.1.1.2"><times id="S3.SS2.p4.3.m3.1.1.2.1.cmml" xref="S3.SS2.p4.3.m3.1.1.2.1"></times><ci id="S3.SS2.p4.3.m3.1.1.2.2.cmml" xref="S3.SS2.p4.3.m3.1.1.2.2">Δ</ci><ci id="S3.SS2.p4.3.m3.1.1.2.3.cmml" xref="S3.SS2.p4.3.m3.1.1.2.3">𝑊</ci></apply><apply id="S3.SS2.p4.3.m3.1.1.3.cmml" xref="S3.SS2.p4.3.m3.1.1.3"><times id="S3.SS2.p4.3.m3.1.1.3.1.cmml" xref="S3.SS2.p4.3.m3.1.1.3.1"></times><apply id="S3.SS2.p4.3.m3.1.1.3.2.cmml" xref="S3.SS2.p4.3.m3.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS2.p4.3.m3.1.1.3.2.1.cmml" xref="S3.SS2.p4.3.m3.1.1.3.2">subscript</csymbol><ci id="S3.SS2.p4.3.m3.1.1.3.2.2.cmml" xref="S3.SS2.p4.3.m3.1.1.3.2.2">𝑊</ci><ci id="S3.SS2.p4.3.m3.1.1.3.2.3.cmml" xref="S3.SS2.p4.3.m3.1.1.3.2.3">𝐴</ci></apply><apply id="S3.SS2.p4.3.m3.1.1.3.3.cmml" xref="S3.SS2.p4.3.m3.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS2.p4.3.m3.1.1.3.3.1.cmml" xref="S3.SS2.p4.3.m3.1.1.3.3">subscript</csymbol><ci id="S3.SS2.p4.3.m3.1.1.3.3.2.cmml" xref="S3.SS2.p4.3.m3.1.1.3.3.2">𝑊</ci><ci id="S3.SS2.p4.3.m3.1.1.3.3.3.cmml" xref="S3.SS2.p4.3.m3.1.1.3.3.3">𝐵</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.3.m3.1c">\Delta W=W_{A}W_{B}</annotation></semantics></math>, <math id="S3.SS2.p4.4.m4.1" class="ltx_Math" alttext="W_{A}\in R^{E\times H}" display="inline"><semantics id="S3.SS2.p4.4.m4.1a"><mrow id="S3.SS2.p4.4.m4.1.1" xref="S3.SS2.p4.4.m4.1.1.cmml"><msub id="S3.SS2.p4.4.m4.1.1.2" xref="S3.SS2.p4.4.m4.1.1.2.cmml"><mi id="S3.SS2.p4.4.m4.1.1.2.2" xref="S3.SS2.p4.4.m4.1.1.2.2.cmml">W</mi><mi id="S3.SS2.p4.4.m4.1.1.2.3" xref="S3.SS2.p4.4.m4.1.1.2.3.cmml">A</mi></msub><mo id="S3.SS2.p4.4.m4.1.1.1" xref="S3.SS2.p4.4.m4.1.1.1.cmml">∈</mo><msup id="S3.SS2.p4.4.m4.1.1.3" xref="S3.SS2.p4.4.m4.1.1.3.cmml"><mi id="S3.SS2.p4.4.m4.1.1.3.2" xref="S3.SS2.p4.4.m4.1.1.3.2.cmml">R</mi><mrow id="S3.SS2.p4.4.m4.1.1.3.3" xref="S3.SS2.p4.4.m4.1.1.3.3.cmml"><mi id="S3.SS2.p4.4.m4.1.1.3.3.2" xref="S3.SS2.p4.4.m4.1.1.3.3.2.cmml">E</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS2.p4.4.m4.1.1.3.3.1" xref="S3.SS2.p4.4.m4.1.1.3.3.1.cmml">×</mo><mi id="S3.SS2.p4.4.m4.1.1.3.3.3" xref="S3.SS2.p4.4.m4.1.1.3.3.3.cmml">H</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.4.m4.1b"><apply id="S3.SS2.p4.4.m4.1.1.cmml" xref="S3.SS2.p4.4.m4.1.1"><in id="S3.SS2.p4.4.m4.1.1.1.cmml" xref="S3.SS2.p4.4.m4.1.1.1"></in><apply id="S3.SS2.p4.4.m4.1.1.2.cmml" xref="S3.SS2.p4.4.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p4.4.m4.1.1.2.1.cmml" xref="S3.SS2.p4.4.m4.1.1.2">subscript</csymbol><ci id="S3.SS2.p4.4.m4.1.1.2.2.cmml" xref="S3.SS2.p4.4.m4.1.1.2.2">𝑊</ci><ci id="S3.SS2.p4.4.m4.1.1.2.3.cmml" xref="S3.SS2.p4.4.m4.1.1.2.3">𝐴</ci></apply><apply id="S3.SS2.p4.4.m4.1.1.3.cmml" xref="S3.SS2.p4.4.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p4.4.m4.1.1.3.1.cmml" xref="S3.SS2.p4.4.m4.1.1.3">superscript</csymbol><ci id="S3.SS2.p4.4.m4.1.1.3.2.cmml" xref="S3.SS2.p4.4.m4.1.1.3.2">𝑅</ci><apply id="S3.SS2.p4.4.m4.1.1.3.3.cmml" xref="S3.SS2.p4.4.m4.1.1.3.3"><times id="S3.SS2.p4.4.m4.1.1.3.3.1.cmml" xref="S3.SS2.p4.4.m4.1.1.3.3.1"></times><ci id="S3.SS2.p4.4.m4.1.1.3.3.2.cmml" xref="S3.SS2.p4.4.m4.1.1.3.3.2">𝐸</ci><ci id="S3.SS2.p4.4.m4.1.1.3.3.3.cmml" xref="S3.SS2.p4.4.m4.1.1.3.3.3">𝐻</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.4.m4.1c">W_{A}\in R^{E\times H}</annotation></semantics></math> and <math id="S3.SS2.p4.5.m5.1" class="ltx_Math" alttext="W_{B}\in R^{H\times F}" display="inline"><semantics id="S3.SS2.p4.5.m5.1a"><mrow id="S3.SS2.p4.5.m5.1.1" xref="S3.SS2.p4.5.m5.1.1.cmml"><msub id="S3.SS2.p4.5.m5.1.1.2" xref="S3.SS2.p4.5.m5.1.1.2.cmml"><mi id="S3.SS2.p4.5.m5.1.1.2.2" xref="S3.SS2.p4.5.m5.1.1.2.2.cmml">W</mi><mi id="S3.SS2.p4.5.m5.1.1.2.3" xref="S3.SS2.p4.5.m5.1.1.2.3.cmml">B</mi></msub><mo id="S3.SS2.p4.5.m5.1.1.1" xref="S3.SS2.p4.5.m5.1.1.1.cmml">∈</mo><msup id="S3.SS2.p4.5.m5.1.1.3" xref="S3.SS2.p4.5.m5.1.1.3.cmml"><mi id="S3.SS2.p4.5.m5.1.1.3.2" xref="S3.SS2.p4.5.m5.1.1.3.2.cmml">R</mi><mrow id="S3.SS2.p4.5.m5.1.1.3.3" xref="S3.SS2.p4.5.m5.1.1.3.3.cmml"><mi id="S3.SS2.p4.5.m5.1.1.3.3.2" xref="S3.SS2.p4.5.m5.1.1.3.3.2.cmml">H</mi><mo lspace="0.222em" rspace="0.222em" id="S3.SS2.p4.5.m5.1.1.3.3.1" xref="S3.SS2.p4.5.m5.1.1.3.3.1.cmml">×</mo><mi id="S3.SS2.p4.5.m5.1.1.3.3.3" xref="S3.SS2.p4.5.m5.1.1.3.3.3.cmml">F</mi></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.5.m5.1b"><apply id="S3.SS2.p4.5.m5.1.1.cmml" xref="S3.SS2.p4.5.m5.1.1"><in id="S3.SS2.p4.5.m5.1.1.1.cmml" xref="S3.SS2.p4.5.m5.1.1.1"></in><apply id="S3.SS2.p4.5.m5.1.1.2.cmml" xref="S3.SS2.p4.5.m5.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p4.5.m5.1.1.2.1.cmml" xref="S3.SS2.p4.5.m5.1.1.2">subscript</csymbol><ci id="S3.SS2.p4.5.m5.1.1.2.2.cmml" xref="S3.SS2.p4.5.m5.1.1.2.2">𝑊</ci><ci id="S3.SS2.p4.5.m5.1.1.2.3.cmml" xref="S3.SS2.p4.5.m5.1.1.2.3">𝐵</ci></apply><apply id="S3.SS2.p4.5.m5.1.1.3.cmml" xref="S3.SS2.p4.5.m5.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p4.5.m5.1.1.3.1.cmml" xref="S3.SS2.p4.5.m5.1.1.3">superscript</csymbol><ci id="S3.SS2.p4.5.m5.1.1.3.2.cmml" xref="S3.SS2.p4.5.m5.1.1.3.2">𝑅</ci><apply id="S3.SS2.p4.5.m5.1.1.3.3.cmml" xref="S3.SS2.p4.5.m5.1.1.3.3"><times id="S3.SS2.p4.5.m5.1.1.3.3.1.cmml" xref="S3.SS2.p4.5.m5.1.1.3.3.1"></times><ci id="S3.SS2.p4.5.m5.1.1.3.3.2.cmml" xref="S3.SS2.p4.5.m5.1.1.3.3.2">𝐻</ci><ci id="S3.SS2.p4.5.m5.1.1.3.3.3.cmml" xref="S3.SS2.p4.5.m5.1.1.3.3.3">𝐹</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.5.m5.1c">W_{B}\in R^{H\times F}</annotation></semantics></math> (<math id="S3.SS2.p4.6.m6.2" class="ltx_Math" alttext="H&lt;&lt;min(E,F)" display="inline"><semantics id="S3.SS2.p4.6.m6.2a"><mrow id="S3.SS2.p4.6.m6.2.3" xref="S3.SS2.p4.6.m6.2.3.cmml"><mi id="S3.SS2.p4.6.m6.2.3.2" xref="S3.SS2.p4.6.m6.2.3.2.cmml">H</mi><mo id="S3.SS2.p4.6.m6.2.3.1" xref="S3.SS2.p4.6.m6.2.3.1.cmml">&lt;&lt;</mo><mrow id="S3.SS2.p4.6.m6.2.3.3" xref="S3.SS2.p4.6.m6.2.3.3.cmml"><mi id="S3.SS2.p4.6.m6.2.3.3.2" xref="S3.SS2.p4.6.m6.2.3.3.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="S3.SS2.p4.6.m6.2.3.3.1" xref="S3.SS2.p4.6.m6.2.3.3.1.cmml">​</mo><mi id="S3.SS2.p4.6.m6.2.3.3.3" xref="S3.SS2.p4.6.m6.2.3.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S3.SS2.p4.6.m6.2.3.3.1a" xref="S3.SS2.p4.6.m6.2.3.3.1.cmml">​</mo><mi id="S3.SS2.p4.6.m6.2.3.3.4" xref="S3.SS2.p4.6.m6.2.3.3.4.cmml">n</mi><mo lspace="0em" rspace="0em" id="S3.SS2.p4.6.m6.2.3.3.1b" xref="S3.SS2.p4.6.m6.2.3.3.1.cmml">​</mo><mrow id="S3.SS2.p4.6.m6.2.3.3.5.2" xref="S3.SS2.p4.6.m6.2.3.3.5.1.cmml"><mo stretchy="false" id="S3.SS2.p4.6.m6.2.3.3.5.2.1" xref="S3.SS2.p4.6.m6.2.3.3.5.1.cmml">(</mo><mi id="S3.SS2.p4.6.m6.1.1" xref="S3.SS2.p4.6.m6.1.1.cmml">E</mi><mo id="S3.SS2.p4.6.m6.2.3.3.5.2.2" xref="S3.SS2.p4.6.m6.2.3.3.5.1.cmml">,</mo><mi id="S3.SS2.p4.6.m6.2.2" xref="S3.SS2.p4.6.m6.2.2.cmml">F</mi><mo stretchy="false" id="S3.SS2.p4.6.m6.2.3.3.5.2.3" xref="S3.SS2.p4.6.m6.2.3.3.5.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.6.m6.2b"><apply id="S3.SS2.p4.6.m6.2.3.cmml" xref="S3.SS2.p4.6.m6.2.3"><csymbol cd="latexml" id="S3.SS2.p4.6.m6.2.3.1.cmml" xref="S3.SS2.p4.6.m6.2.3.1">much-less-than</csymbol><ci id="S3.SS2.p4.6.m6.2.3.2.cmml" xref="S3.SS2.p4.6.m6.2.3.2">𝐻</ci><apply id="S3.SS2.p4.6.m6.2.3.3.cmml" xref="S3.SS2.p4.6.m6.2.3.3"><times id="S3.SS2.p4.6.m6.2.3.3.1.cmml" xref="S3.SS2.p4.6.m6.2.3.3.1"></times><ci id="S3.SS2.p4.6.m6.2.3.3.2.cmml" xref="S3.SS2.p4.6.m6.2.3.3.2">𝑚</ci><ci id="S3.SS2.p4.6.m6.2.3.3.3.cmml" xref="S3.SS2.p4.6.m6.2.3.3.3">𝑖</ci><ci id="S3.SS2.p4.6.m6.2.3.3.4.cmml" xref="S3.SS2.p4.6.m6.2.3.3.4">𝑛</ci><interval closure="open" id="S3.SS2.p4.6.m6.2.3.3.5.1.cmml" xref="S3.SS2.p4.6.m6.2.3.3.5.2"><ci id="S3.SS2.p4.6.m6.1.1.cmml" xref="S3.SS2.p4.6.m6.1.1">𝐸</ci><ci id="S3.SS2.p4.6.m6.2.2.cmml" xref="S3.SS2.p4.6.m6.2.2">𝐹</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.6.m6.2c">H&lt;&lt;min(E,F)</annotation></semantics></math>). For <math id="S3.SS2.p4.7.m7.1" class="ltx_Math" alttext="W_{A}" display="inline"><semantics id="S3.SS2.p4.7.m7.1a"><msub id="S3.SS2.p4.7.m7.1.1" xref="S3.SS2.p4.7.m7.1.1.cmml"><mi id="S3.SS2.p4.7.m7.1.1.2" xref="S3.SS2.p4.7.m7.1.1.2.cmml">W</mi><mi id="S3.SS2.p4.7.m7.1.1.3" xref="S3.SS2.p4.7.m7.1.1.3.cmml">A</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.7.m7.1b"><apply id="S3.SS2.p4.7.m7.1.1.cmml" xref="S3.SS2.p4.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.7.m7.1.1.1.cmml" xref="S3.SS2.p4.7.m7.1.1">subscript</csymbol><ci id="S3.SS2.p4.7.m7.1.1.2.cmml" xref="S3.SS2.p4.7.m7.1.1.2">𝑊</ci><ci id="S3.SS2.p4.7.m7.1.1.3.cmml" xref="S3.SS2.p4.7.m7.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.7.m7.1c">W_{A}</annotation></semantics></math>, we employ a random Gaussian initialization, while <math id="S3.SS2.p4.8.m8.1" class="ltx_Math" alttext="W_{B}" display="inline"><semantics id="S3.SS2.p4.8.m8.1a"><msub id="S3.SS2.p4.8.m8.1.1" xref="S3.SS2.p4.8.m8.1.1.cmml"><mi id="S3.SS2.p4.8.m8.1.1.2" xref="S3.SS2.p4.8.m8.1.1.2.cmml">W</mi><mi id="S3.SS2.p4.8.m8.1.1.3" xref="S3.SS2.p4.8.m8.1.1.3.cmml">B</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.8.m8.1b"><apply id="S3.SS2.p4.8.m8.1.1.cmml" xref="S3.SS2.p4.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.8.m8.1.1.1.cmml" xref="S3.SS2.p4.8.m8.1.1">subscript</csymbol><ci id="S3.SS2.p4.8.m8.1.1.2.cmml" xref="S3.SS2.p4.8.m8.1.1.2">𝑊</ci><ci id="S3.SS2.p4.8.m8.1.1.3.cmml" xref="S3.SS2.p4.8.m8.1.1.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.8.m8.1c">W_{B}</annotation></semantics></math> is initialized with zero. During training, <math id="S3.SS2.p4.9.m9.1" class="ltx_Math" alttext="W_{0}" display="inline"><semantics id="S3.SS2.p4.9.m9.1a"><msub id="S3.SS2.p4.9.m9.1.1" xref="S3.SS2.p4.9.m9.1.1.cmml"><mi id="S3.SS2.p4.9.m9.1.1.2" xref="S3.SS2.p4.9.m9.1.1.2.cmml">W</mi><mn id="S3.SS2.p4.9.m9.1.1.3" xref="S3.SS2.p4.9.m9.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.9.m9.1b"><apply id="S3.SS2.p4.9.m9.1.1.cmml" xref="S3.SS2.p4.9.m9.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.9.m9.1.1.1.cmml" xref="S3.SS2.p4.9.m9.1.1">subscript</csymbol><ci id="S3.SS2.p4.9.m9.1.1.2.cmml" xref="S3.SS2.p4.9.m9.1.1.2">𝑊</ci><cn type="integer" id="S3.SS2.p4.9.m9.1.1.3.cmml" xref="S3.SS2.p4.9.m9.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.9.m9.1c">W_{0}</annotation></semantics></math> is frozen and only <math id="S3.SS2.p4.10.m10.1" class="ltx_Math" alttext="W_{A}" display="inline"><semantics id="S3.SS2.p4.10.m10.1a"><msub id="S3.SS2.p4.10.m10.1.1" xref="S3.SS2.p4.10.m10.1.1.cmml"><mi id="S3.SS2.p4.10.m10.1.1.2" xref="S3.SS2.p4.10.m10.1.1.2.cmml">W</mi><mi id="S3.SS2.p4.10.m10.1.1.3" xref="S3.SS2.p4.10.m10.1.1.3.cmml">A</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.10.m10.1b"><apply id="S3.SS2.p4.10.m10.1.1.cmml" xref="S3.SS2.p4.10.m10.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.10.m10.1.1.1.cmml" xref="S3.SS2.p4.10.m10.1.1">subscript</csymbol><ci id="S3.SS2.p4.10.m10.1.1.2.cmml" xref="S3.SS2.p4.10.m10.1.1.2">𝑊</ci><ci id="S3.SS2.p4.10.m10.1.1.3.cmml" xref="S3.SS2.p4.10.m10.1.1.3">𝐴</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.10.m10.1c">W_{A}</annotation></semantics></math> and <math id="S3.SS2.p4.11.m11.1" class="ltx_Math" alttext="W_{B}" display="inline"><semantics id="S3.SS2.p4.11.m11.1a"><msub id="S3.SS2.p4.11.m11.1.1" xref="S3.SS2.p4.11.m11.1.1.cmml"><mi id="S3.SS2.p4.11.m11.1.1.2" xref="S3.SS2.p4.11.m11.1.1.2.cmml">W</mi><mi id="S3.SS2.p4.11.m11.1.1.3" xref="S3.SS2.p4.11.m11.1.1.3.cmml">B</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.11.m11.1b"><apply id="S3.SS2.p4.11.m11.1.1.cmml" xref="S3.SS2.p4.11.m11.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.11.m11.1.1.1.cmml" xref="S3.SS2.p4.11.m11.1.1">subscript</csymbol><ci id="S3.SS2.p4.11.m11.1.1.2.cmml" xref="S3.SS2.p4.11.m11.1.1.2">𝑊</ci><ci id="S3.SS2.p4.11.m11.1.1.3.cmml" xref="S3.SS2.p4.11.m11.1.1.3">𝐵</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.11.m11.1c">W_{B}</annotation></semantics></math> are optimized to save computation and storage costs.</p>
</div>
<div id="S3.SS2.p5" class="ltx_para">
<p id="S3.SS2.p5.1" class="ltx_p">Suppose the input of the weight matrices and the inserted low-rank decomposition matrices is <math id="S3.SS2.p5.1.m1.1" class="ltx_Math" alttext="x" display="inline"><semantics id="S3.SS2.p5.1.m1.1a"><mi id="S3.SS2.p5.1.m1.1.1" xref="S3.SS2.p5.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p5.1.m1.1b"><ci id="S3.SS2.p5.1.m1.1.1.cmml" xref="S3.SS2.p5.1.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p5.1.m1.1c">x</annotation></semantics></math>. The output can be calculated by</p>
<table id="S3.E4" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E4.m1.1" class="ltx_Math" alttext="y=(W_{0}+W_{A}W_{B})x." display="block"><semantics id="S3.E4.m1.1a"><mrow id="S3.E4.m1.1.1.1" xref="S3.E4.m1.1.1.1.1.cmml"><mrow id="S3.E4.m1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.cmml"><mi id="S3.E4.m1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.1.3.cmml">y</mi><mo id="S3.E4.m1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.2.cmml">=</mo><mrow id="S3.E4.m1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.cmml"><mrow id="S3.E4.m1.1.1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E4.m1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E4.m1.1.1.1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.E4.m1.1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.E4.m1.1.1.1.1.1.1.1.1.2.2" xref="S3.E4.m1.1.1.1.1.1.1.1.1.2.2.cmml">W</mi><mn id="S3.E4.m1.1.1.1.1.1.1.1.1.2.3" xref="S3.E4.m1.1.1.1.1.1.1.1.1.2.3.cmml">0</mn></msub><mo id="S3.E4.m1.1.1.1.1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.1.1.1.1.cmml">+</mo><mrow id="S3.E4.m1.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.cmml"><msub id="S3.E4.m1.1.1.1.1.1.1.1.1.3.2" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.cmml"><mi id="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.2" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.2.cmml">W</mi><mi id="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.3" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.3.cmml">A</mi></msub><mo lspace="0em" rspace="0em" id="S3.E4.m1.1.1.1.1.1.1.1.1.3.1" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.1.cmml">​</mo><msub id="S3.E4.m1.1.1.1.1.1.1.1.1.3.3" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.cmml"><mi id="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.2" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.2.cmml">W</mi><mi id="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.3" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.3.cmml">B</mi></msub></mrow></mrow><mo stretchy="false" id="S3.E4.m1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S3.E4.m1.1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.1.2.cmml">​</mo><mi id="S3.E4.m1.1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.1.1.3.cmml">x</mi></mrow></mrow><mo lspace="0em" id="S3.E4.m1.1.1.1.2" xref="S3.E4.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E4.m1.1b"><apply id="S3.E4.m1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1"><eq id="S3.E4.m1.1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1.2"></eq><ci id="S3.E4.m1.1.1.1.1.3.cmml" xref="S3.E4.m1.1.1.1.1.3">𝑦</ci><apply id="S3.E4.m1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1"><times id="S3.E4.m1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1.1.2"></times><apply id="S3.E4.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1"><plus id="S3.E4.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.1"></plus><apply id="S3.E4.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.2.2">𝑊</ci><cn type="integer" id="S3.E4.m1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.2.3">0</cn></apply><apply id="S3.E4.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3"><times id="S3.E4.m1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.1"></times><apply id="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.1.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.2">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.2.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.2">𝑊</ci><ci id="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.3.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.2.3">𝐴</ci></apply><apply id="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.3">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.2.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.2">𝑊</ci><ci id="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S3.E4.m1.1.1.1.1.1.1.1.1.3.3.3">𝐵</ci></apply></apply></apply><ci id="S3.E4.m1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.1.1.1.1.1.3">𝑥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4.m1.1c">y=(W_{0}+W_{A}W_{B})x.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
</div>
<div id="S3.SS2.p6" class="ltx_para">
<p id="S3.SS2.p6.1" class="ltx_p">The procedure of the proposed <span id="S3.SS2.p6.1.1" class="ltx_text ltx_font_typewriter">SAL</span> algorithm is depicted in Fig.<a href="#S2.F2" title="Figure 2 ‣ 2.3 FL with FM ‣ 2 Background and Related Work ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. We activate the low-rank decomposition matrices sparsely instead of activating them all during the training. At the beginning of the training stage, every layer of the visual encoder and the text encoder are inserted with frozen low-rank decomposition matrices. In deep neural networks, lower layers can better extract general information than higher layers<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite>. During the first training stage, low-rank decomposition matrices in all layers are activated to better extract general information to form a global expert while in the second stage, we unfreeze the low-rank decomposition matrices from higher layers to lower layers during the training.</p>
</div>
<div id="S3.SS2.p7" class="ltx_para">
<p id="S3.SS2.p7.5" class="ltx_p">More specifically, we introduce a Capability Queue with a maximum queue length of <math id="S3.SS2.p7.1.m1.1" class="ltx_Math" alttext="Q" display="inline"><semantics id="S3.SS2.p7.1.m1.1a"><mi id="S3.SS2.p7.1.m1.1.1" xref="S3.SS2.p7.1.m1.1.1.cmml">Q</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.1.m1.1b"><ci id="S3.SS2.p7.1.m1.1.1.cmml" xref="S3.SS2.p7.1.m1.1.1">𝑄</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.1.m1.1c">Q</annotation></semantics></math>. Image classification accuracies of clients are forwarded to the Capability Queue after every communication round. Once the Capability Queue is full, the previously added accuracies will be popped out. We set an accuracy threshold <math id="S3.SS2.p7.2.m2.1" class="ltx_Math" alttext="\delta" display="inline"><semantics id="S3.SS2.p7.2.m2.1a"><mi id="S3.SS2.p7.2.m2.1.1" xref="S3.SS2.p7.2.m2.1.1.cmml">δ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.2.m2.1b"><ci id="S3.SS2.p7.2.m2.1.1.cmml" xref="S3.SS2.p7.2.m2.1.1">𝛿</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.2.m2.1c">\delta</annotation></semantics></math> to help decide whether the training comes into a bottleneck. The incremental factor <math id="S3.SS2.p7.3.m3.1" class="ltx_Math" alttext="\Delta" display="inline"><semantics id="S3.SS2.p7.3.m3.1a"><mi mathvariant="normal" id="S3.SS2.p7.3.m3.1.1" xref="S3.SS2.p7.3.m3.1.1.cmml">Δ</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.3.m3.1b"><ci id="S3.SS2.p7.3.m3.1.1.cmml" xref="S3.SS2.p7.3.m3.1.1">Δ</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.3.m3.1c">\Delta</annotation></semantics></math> of client <math id="S3.SS2.p7.4.m4.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS2.p7.4.m4.1a"><mi id="S3.SS2.p7.4.m4.1.1" xref="S3.SS2.p7.4.m4.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.4.m4.1b"><ci id="S3.SS2.p7.4.m4.1.1.cmml" xref="S3.SS2.p7.4.m4.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.4.m4.1c">j</annotation></semantics></math> in communication round <math id="S3.SS2.p7.5.m5.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS2.p7.5.m5.1a"><mi id="S3.SS2.p7.5.m5.1.1" xref="S3.SS2.p7.5.m5.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.5.m5.1b"><ci id="S3.SS2.p7.5.m5.1.1.cmml" xref="S3.SS2.p7.5.m5.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.5.m5.1c">i</annotation></semantics></math> is</p>
<table id="S3.E5" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E5.m1.6" class="ltx_Math" alttext="\Delta_{i,j}=Acc_{i,j}-\frac{1}{Q}\sum_{t=i-Q}^{i-1}Acc_{t,j}" display="block"><semantics id="S3.E5.m1.6a"><mrow id="S3.E5.m1.6.7" xref="S3.E5.m1.6.7.cmml"><msub id="S3.E5.m1.6.7.2" xref="S3.E5.m1.6.7.2.cmml"><mi mathvariant="normal" id="S3.E5.m1.6.7.2.2" xref="S3.E5.m1.6.7.2.2.cmml">Δ</mi><mrow id="S3.E5.m1.2.2.2.4" xref="S3.E5.m1.2.2.2.3.cmml"><mi id="S3.E5.m1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.cmml">i</mi><mo id="S3.E5.m1.2.2.2.4.1" xref="S3.E5.m1.2.2.2.3.cmml">,</mo><mi id="S3.E5.m1.2.2.2.2" xref="S3.E5.m1.2.2.2.2.cmml">j</mi></mrow></msub><mo id="S3.E5.m1.6.7.1" xref="S3.E5.m1.6.7.1.cmml">=</mo><mrow id="S3.E5.m1.6.7.3" xref="S3.E5.m1.6.7.3.cmml"><mrow id="S3.E5.m1.6.7.3.2" xref="S3.E5.m1.6.7.3.2.cmml"><mi id="S3.E5.m1.6.7.3.2.2" xref="S3.E5.m1.6.7.3.2.2.cmml">A</mi><mo lspace="0em" rspace="0em" id="S3.E5.m1.6.7.3.2.1" xref="S3.E5.m1.6.7.3.2.1.cmml">​</mo><mi id="S3.E5.m1.6.7.3.2.3" xref="S3.E5.m1.6.7.3.2.3.cmml">c</mi><mo lspace="0em" rspace="0em" id="S3.E5.m1.6.7.3.2.1a" xref="S3.E5.m1.6.7.3.2.1.cmml">​</mo><msub id="S3.E5.m1.6.7.3.2.4" xref="S3.E5.m1.6.7.3.2.4.cmml"><mi id="S3.E5.m1.6.7.3.2.4.2" xref="S3.E5.m1.6.7.3.2.4.2.cmml">c</mi><mrow id="S3.E5.m1.4.4.2.4" xref="S3.E5.m1.4.4.2.3.cmml"><mi id="S3.E5.m1.3.3.1.1" xref="S3.E5.m1.3.3.1.1.cmml">i</mi><mo id="S3.E5.m1.4.4.2.4.1" xref="S3.E5.m1.4.4.2.3.cmml">,</mo><mi id="S3.E5.m1.4.4.2.2" xref="S3.E5.m1.4.4.2.2.cmml">j</mi></mrow></msub></mrow><mo id="S3.E5.m1.6.7.3.1" xref="S3.E5.m1.6.7.3.1.cmml">−</mo><mrow id="S3.E5.m1.6.7.3.3" xref="S3.E5.m1.6.7.3.3.cmml"><mfrac id="S3.E5.m1.6.7.3.3.2" xref="S3.E5.m1.6.7.3.3.2.cmml"><mn id="S3.E5.m1.6.7.3.3.2.2" xref="S3.E5.m1.6.7.3.3.2.2.cmml">1</mn><mi id="S3.E5.m1.6.7.3.3.2.3" xref="S3.E5.m1.6.7.3.3.2.3.cmml">Q</mi></mfrac><mo lspace="0em" rspace="0em" id="S3.E5.m1.6.7.3.3.1" xref="S3.E5.m1.6.7.3.3.1.cmml">​</mo><mrow id="S3.E5.m1.6.7.3.3.3" xref="S3.E5.m1.6.7.3.3.3.cmml"><munderover id="S3.E5.m1.6.7.3.3.3.1" xref="S3.E5.m1.6.7.3.3.3.1.cmml"><mo movablelimits="false" id="S3.E5.m1.6.7.3.3.3.1.2.2" xref="S3.E5.m1.6.7.3.3.3.1.2.2.cmml">∑</mo><mrow id="S3.E5.m1.6.7.3.3.3.1.2.3" xref="S3.E5.m1.6.7.3.3.3.1.2.3.cmml"><mi id="S3.E5.m1.6.7.3.3.3.1.2.3.2" xref="S3.E5.m1.6.7.3.3.3.1.2.3.2.cmml">t</mi><mo id="S3.E5.m1.6.7.3.3.3.1.2.3.1" xref="S3.E5.m1.6.7.3.3.3.1.2.3.1.cmml">=</mo><mrow id="S3.E5.m1.6.7.3.3.3.1.2.3.3" xref="S3.E5.m1.6.7.3.3.3.1.2.3.3.cmml"><mi id="S3.E5.m1.6.7.3.3.3.1.2.3.3.2" xref="S3.E5.m1.6.7.3.3.3.1.2.3.3.2.cmml">i</mi><mo id="S3.E5.m1.6.7.3.3.3.1.2.3.3.1" xref="S3.E5.m1.6.7.3.3.3.1.2.3.3.1.cmml">−</mo><mi id="S3.E5.m1.6.7.3.3.3.1.2.3.3.3" xref="S3.E5.m1.6.7.3.3.3.1.2.3.3.3.cmml">Q</mi></mrow></mrow><mrow id="S3.E5.m1.6.7.3.3.3.1.3" xref="S3.E5.m1.6.7.3.3.3.1.3.cmml"><mi id="S3.E5.m1.6.7.3.3.3.1.3.2" xref="S3.E5.m1.6.7.3.3.3.1.3.2.cmml">i</mi><mo id="S3.E5.m1.6.7.3.3.3.1.3.1" xref="S3.E5.m1.6.7.3.3.3.1.3.1.cmml">−</mo><mn id="S3.E5.m1.6.7.3.3.3.1.3.3" xref="S3.E5.m1.6.7.3.3.3.1.3.3.cmml">1</mn></mrow></munderover><mrow id="S3.E5.m1.6.7.3.3.3.2" xref="S3.E5.m1.6.7.3.3.3.2.cmml"><mi id="S3.E5.m1.6.7.3.3.3.2.2" xref="S3.E5.m1.6.7.3.3.3.2.2.cmml">A</mi><mo lspace="0em" rspace="0em" id="S3.E5.m1.6.7.3.3.3.2.1" xref="S3.E5.m1.6.7.3.3.3.2.1.cmml">​</mo><mi id="S3.E5.m1.6.7.3.3.3.2.3" xref="S3.E5.m1.6.7.3.3.3.2.3.cmml">c</mi><mo lspace="0em" rspace="0em" id="S3.E5.m1.6.7.3.3.3.2.1a" xref="S3.E5.m1.6.7.3.3.3.2.1.cmml">​</mo><msub id="S3.E5.m1.6.7.3.3.3.2.4" xref="S3.E5.m1.6.7.3.3.3.2.4.cmml"><mi id="S3.E5.m1.6.7.3.3.3.2.4.2" xref="S3.E5.m1.6.7.3.3.3.2.4.2.cmml">c</mi><mrow id="S3.E5.m1.6.6.2.4" xref="S3.E5.m1.6.6.2.3.cmml"><mi id="S3.E5.m1.5.5.1.1" xref="S3.E5.m1.5.5.1.1.cmml">t</mi><mo id="S3.E5.m1.6.6.2.4.1" xref="S3.E5.m1.6.6.2.3.cmml">,</mo><mi id="S3.E5.m1.6.6.2.2" xref="S3.E5.m1.6.6.2.2.cmml">j</mi></mrow></msub></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E5.m1.6b"><apply id="S3.E5.m1.6.7.cmml" xref="S3.E5.m1.6.7"><eq id="S3.E5.m1.6.7.1.cmml" xref="S3.E5.m1.6.7.1"></eq><apply id="S3.E5.m1.6.7.2.cmml" xref="S3.E5.m1.6.7.2"><csymbol cd="ambiguous" id="S3.E5.m1.6.7.2.1.cmml" xref="S3.E5.m1.6.7.2">subscript</csymbol><ci id="S3.E5.m1.6.7.2.2.cmml" xref="S3.E5.m1.6.7.2.2">Δ</ci><list id="S3.E5.m1.2.2.2.3.cmml" xref="S3.E5.m1.2.2.2.4"><ci id="S3.E5.m1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1">𝑖</ci><ci id="S3.E5.m1.2.2.2.2.cmml" xref="S3.E5.m1.2.2.2.2">𝑗</ci></list></apply><apply id="S3.E5.m1.6.7.3.cmml" xref="S3.E5.m1.6.7.3"><minus id="S3.E5.m1.6.7.3.1.cmml" xref="S3.E5.m1.6.7.3.1"></minus><apply id="S3.E5.m1.6.7.3.2.cmml" xref="S3.E5.m1.6.7.3.2"><times id="S3.E5.m1.6.7.3.2.1.cmml" xref="S3.E5.m1.6.7.3.2.1"></times><ci id="S3.E5.m1.6.7.3.2.2.cmml" xref="S3.E5.m1.6.7.3.2.2">𝐴</ci><ci id="S3.E5.m1.6.7.3.2.3.cmml" xref="S3.E5.m1.6.7.3.2.3">𝑐</ci><apply id="S3.E5.m1.6.7.3.2.4.cmml" xref="S3.E5.m1.6.7.3.2.4"><csymbol cd="ambiguous" id="S3.E5.m1.6.7.3.2.4.1.cmml" xref="S3.E5.m1.6.7.3.2.4">subscript</csymbol><ci id="S3.E5.m1.6.7.3.2.4.2.cmml" xref="S3.E5.m1.6.7.3.2.4.2">𝑐</ci><list id="S3.E5.m1.4.4.2.3.cmml" xref="S3.E5.m1.4.4.2.4"><ci id="S3.E5.m1.3.3.1.1.cmml" xref="S3.E5.m1.3.3.1.1">𝑖</ci><ci id="S3.E5.m1.4.4.2.2.cmml" xref="S3.E5.m1.4.4.2.2">𝑗</ci></list></apply></apply><apply id="S3.E5.m1.6.7.3.3.cmml" xref="S3.E5.m1.6.7.3.3"><times id="S3.E5.m1.6.7.3.3.1.cmml" xref="S3.E5.m1.6.7.3.3.1"></times><apply id="S3.E5.m1.6.7.3.3.2.cmml" xref="S3.E5.m1.6.7.3.3.2"><divide id="S3.E5.m1.6.7.3.3.2.1.cmml" xref="S3.E5.m1.6.7.3.3.2"></divide><cn type="integer" id="S3.E5.m1.6.7.3.3.2.2.cmml" xref="S3.E5.m1.6.7.3.3.2.2">1</cn><ci id="S3.E5.m1.6.7.3.3.2.3.cmml" xref="S3.E5.m1.6.7.3.3.2.3">𝑄</ci></apply><apply id="S3.E5.m1.6.7.3.3.3.cmml" xref="S3.E5.m1.6.7.3.3.3"><apply id="S3.E5.m1.6.7.3.3.3.1.cmml" xref="S3.E5.m1.6.7.3.3.3.1"><csymbol cd="ambiguous" id="S3.E5.m1.6.7.3.3.3.1.1.cmml" xref="S3.E5.m1.6.7.3.3.3.1">superscript</csymbol><apply id="S3.E5.m1.6.7.3.3.3.1.2.cmml" xref="S3.E5.m1.6.7.3.3.3.1"><csymbol cd="ambiguous" id="S3.E5.m1.6.7.3.3.3.1.2.1.cmml" xref="S3.E5.m1.6.7.3.3.3.1">subscript</csymbol><sum id="S3.E5.m1.6.7.3.3.3.1.2.2.cmml" xref="S3.E5.m1.6.7.3.3.3.1.2.2"></sum><apply id="S3.E5.m1.6.7.3.3.3.1.2.3.cmml" xref="S3.E5.m1.6.7.3.3.3.1.2.3"><eq id="S3.E5.m1.6.7.3.3.3.1.2.3.1.cmml" xref="S3.E5.m1.6.7.3.3.3.1.2.3.1"></eq><ci id="S3.E5.m1.6.7.3.3.3.1.2.3.2.cmml" xref="S3.E5.m1.6.7.3.3.3.1.2.3.2">𝑡</ci><apply id="S3.E5.m1.6.7.3.3.3.1.2.3.3.cmml" xref="S3.E5.m1.6.7.3.3.3.1.2.3.3"><minus id="S3.E5.m1.6.7.3.3.3.1.2.3.3.1.cmml" xref="S3.E5.m1.6.7.3.3.3.1.2.3.3.1"></minus><ci id="S3.E5.m1.6.7.3.3.3.1.2.3.3.2.cmml" xref="S3.E5.m1.6.7.3.3.3.1.2.3.3.2">𝑖</ci><ci id="S3.E5.m1.6.7.3.3.3.1.2.3.3.3.cmml" xref="S3.E5.m1.6.7.3.3.3.1.2.3.3.3">𝑄</ci></apply></apply></apply><apply id="S3.E5.m1.6.7.3.3.3.1.3.cmml" xref="S3.E5.m1.6.7.3.3.3.1.3"><minus id="S3.E5.m1.6.7.3.3.3.1.3.1.cmml" xref="S3.E5.m1.6.7.3.3.3.1.3.1"></minus><ci id="S3.E5.m1.6.7.3.3.3.1.3.2.cmml" xref="S3.E5.m1.6.7.3.3.3.1.3.2">𝑖</ci><cn type="integer" id="S3.E5.m1.6.7.3.3.3.1.3.3.cmml" xref="S3.E5.m1.6.7.3.3.3.1.3.3">1</cn></apply></apply><apply id="S3.E5.m1.6.7.3.3.3.2.cmml" xref="S3.E5.m1.6.7.3.3.3.2"><times id="S3.E5.m1.6.7.3.3.3.2.1.cmml" xref="S3.E5.m1.6.7.3.3.3.2.1"></times><ci id="S3.E5.m1.6.7.3.3.3.2.2.cmml" xref="S3.E5.m1.6.7.3.3.3.2.2">𝐴</ci><ci id="S3.E5.m1.6.7.3.3.3.2.3.cmml" xref="S3.E5.m1.6.7.3.3.3.2.3">𝑐</ci><apply id="S3.E5.m1.6.7.3.3.3.2.4.cmml" xref="S3.E5.m1.6.7.3.3.3.2.4"><csymbol cd="ambiguous" id="S3.E5.m1.6.7.3.3.3.2.4.1.cmml" xref="S3.E5.m1.6.7.3.3.3.2.4">subscript</csymbol><ci id="S3.E5.m1.6.7.3.3.3.2.4.2.cmml" xref="S3.E5.m1.6.7.3.3.3.2.4.2">𝑐</ci><list id="S3.E5.m1.6.6.2.3.cmml" xref="S3.E5.m1.6.6.2.4"><ci id="S3.E5.m1.5.5.1.1.cmml" xref="S3.E5.m1.5.5.1.1">𝑡</ci><ci id="S3.E5.m1.6.6.2.2.cmml" xref="S3.E5.m1.6.6.2.2">𝑗</ci></list></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m1.6c">\Delta_{i,j}=Acc_{i,j}-\frac{1}{Q}\sum_{t=i-Q}^{i-1}Acc_{t,j}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
<p id="S3.SS2.p7.9" class="ltx_p">Where <math id="S3.SS2.p7.6.m1.2" class="ltx_Math" alttext="Acc_{i,j}" display="inline"><semantics id="S3.SS2.p7.6.m1.2a"><mrow id="S3.SS2.p7.6.m1.2.3" xref="S3.SS2.p7.6.m1.2.3.cmml"><mi id="S3.SS2.p7.6.m1.2.3.2" xref="S3.SS2.p7.6.m1.2.3.2.cmml">A</mi><mo lspace="0em" rspace="0em" id="S3.SS2.p7.6.m1.2.3.1" xref="S3.SS2.p7.6.m1.2.3.1.cmml">​</mo><mi id="S3.SS2.p7.6.m1.2.3.3" xref="S3.SS2.p7.6.m1.2.3.3.cmml">c</mi><mo lspace="0em" rspace="0em" id="S3.SS2.p7.6.m1.2.3.1a" xref="S3.SS2.p7.6.m1.2.3.1.cmml">​</mo><msub id="S3.SS2.p7.6.m1.2.3.4" xref="S3.SS2.p7.6.m1.2.3.4.cmml"><mi id="S3.SS2.p7.6.m1.2.3.4.2" xref="S3.SS2.p7.6.m1.2.3.4.2.cmml">c</mi><mrow id="S3.SS2.p7.6.m1.2.2.2.4" xref="S3.SS2.p7.6.m1.2.2.2.3.cmml"><mi id="S3.SS2.p7.6.m1.1.1.1.1" xref="S3.SS2.p7.6.m1.1.1.1.1.cmml">i</mi><mo id="S3.SS2.p7.6.m1.2.2.2.4.1" xref="S3.SS2.p7.6.m1.2.2.2.3.cmml">,</mo><mi id="S3.SS2.p7.6.m1.2.2.2.2" xref="S3.SS2.p7.6.m1.2.2.2.2.cmml">j</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.6.m1.2b"><apply id="S3.SS2.p7.6.m1.2.3.cmml" xref="S3.SS2.p7.6.m1.2.3"><times id="S3.SS2.p7.6.m1.2.3.1.cmml" xref="S3.SS2.p7.6.m1.2.3.1"></times><ci id="S3.SS2.p7.6.m1.2.3.2.cmml" xref="S3.SS2.p7.6.m1.2.3.2">𝐴</ci><ci id="S3.SS2.p7.6.m1.2.3.3.cmml" xref="S3.SS2.p7.6.m1.2.3.3">𝑐</ci><apply id="S3.SS2.p7.6.m1.2.3.4.cmml" xref="S3.SS2.p7.6.m1.2.3.4"><csymbol cd="ambiguous" id="S3.SS2.p7.6.m1.2.3.4.1.cmml" xref="S3.SS2.p7.6.m1.2.3.4">subscript</csymbol><ci id="S3.SS2.p7.6.m1.2.3.4.2.cmml" xref="S3.SS2.p7.6.m1.2.3.4.2">𝑐</ci><list id="S3.SS2.p7.6.m1.2.2.2.3.cmml" xref="S3.SS2.p7.6.m1.2.2.2.4"><ci id="S3.SS2.p7.6.m1.1.1.1.1.cmml" xref="S3.SS2.p7.6.m1.1.1.1.1">𝑖</ci><ci id="S3.SS2.p7.6.m1.2.2.2.2.cmml" xref="S3.SS2.p7.6.m1.2.2.2.2">𝑗</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.6.m1.2c">Acc_{i,j}</annotation></semantics></math> denotes the image classification accuracy of the model of client <math id="S3.SS2.p7.7.m2.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS2.p7.7.m2.1a"><mi id="S3.SS2.p7.7.m2.1.1" xref="S3.SS2.p7.7.m2.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.7.m2.1b"><ci id="S3.SS2.p7.7.m2.1.1.cmml" xref="S3.SS2.p7.7.m2.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.7.m2.1c">j</annotation></semantics></math> in communication round <math id="S3.SS2.p7.8.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS2.p7.8.m3.1a"><mi id="S3.SS2.p7.8.m3.1.1" xref="S3.SS2.p7.8.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.8.m3.1b"><ci id="S3.SS2.p7.8.m3.1.1.cmml" xref="S3.SS2.p7.8.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.8.m3.1c">i</annotation></semantics></math>.
If <math id="S3.SS2.p7.9.m4.2" class="ltx_Math" alttext="\Delta_{i,j}&lt;\delta" display="inline"><semantics id="S3.SS2.p7.9.m4.2a"><mrow id="S3.SS2.p7.9.m4.2.3" xref="S3.SS2.p7.9.m4.2.3.cmml"><msub id="S3.SS2.p7.9.m4.2.3.2" xref="S3.SS2.p7.9.m4.2.3.2.cmml"><mi mathvariant="normal" id="S3.SS2.p7.9.m4.2.3.2.2" xref="S3.SS2.p7.9.m4.2.3.2.2.cmml">Δ</mi><mrow id="S3.SS2.p7.9.m4.2.2.2.4" xref="S3.SS2.p7.9.m4.2.2.2.3.cmml"><mi id="S3.SS2.p7.9.m4.1.1.1.1" xref="S3.SS2.p7.9.m4.1.1.1.1.cmml">i</mi><mo id="S3.SS2.p7.9.m4.2.2.2.4.1" xref="S3.SS2.p7.9.m4.2.2.2.3.cmml">,</mo><mi id="S3.SS2.p7.9.m4.2.2.2.2" xref="S3.SS2.p7.9.m4.2.2.2.2.cmml">j</mi></mrow></msub><mo id="S3.SS2.p7.9.m4.2.3.1" xref="S3.SS2.p7.9.m4.2.3.1.cmml">&lt;</mo><mi id="S3.SS2.p7.9.m4.2.3.3" xref="S3.SS2.p7.9.m4.2.3.3.cmml">δ</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p7.9.m4.2b"><apply id="S3.SS2.p7.9.m4.2.3.cmml" xref="S3.SS2.p7.9.m4.2.3"><lt id="S3.SS2.p7.9.m4.2.3.1.cmml" xref="S3.SS2.p7.9.m4.2.3.1"></lt><apply id="S3.SS2.p7.9.m4.2.3.2.cmml" xref="S3.SS2.p7.9.m4.2.3.2"><csymbol cd="ambiguous" id="S3.SS2.p7.9.m4.2.3.2.1.cmml" xref="S3.SS2.p7.9.m4.2.3.2">subscript</csymbol><ci id="S3.SS2.p7.9.m4.2.3.2.2.cmml" xref="S3.SS2.p7.9.m4.2.3.2.2">Δ</ci><list id="S3.SS2.p7.9.m4.2.2.2.3.cmml" xref="S3.SS2.p7.9.m4.2.2.2.4"><ci id="S3.SS2.p7.9.m4.1.1.1.1.cmml" xref="S3.SS2.p7.9.m4.1.1.1.1">𝑖</ci><ci id="S3.SS2.p7.9.m4.2.2.2.2.cmml" xref="S3.SS2.p7.9.m4.2.2.2.2">𝑗</ci></list></apply><ci id="S3.SS2.p7.9.m4.2.3.3.cmml" xref="S3.SS2.p7.9.m4.2.3.3">𝛿</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p7.9.m4.2c">\Delta_{i,j}&lt;\delta</annotation></semantics></math>, the training is considered to come into a bottleneck. Then low-rank decomposition matrices in the next lower layer will be activated.</p>
</div>
<div id="S3.SS2.p8" class="ltx_para">
<p id="S3.SS2.p8.1" class="ltx_p">The design of the <span id="S3.SS2.p8.1.1" class="ltx_text ltx_font_typewriter">SAL</span> algorithm is inspired by the fact that the performance of FM is usually affected by the model size, dataset size, and the quality of the dataset. Challenging datasets require more model parameters to be optimized to better extract the semantic meaning of the data. However, there is no silver bullet configuration in the training of FL with FM. So we introduce a Capability Queue to intelligently decide the number of tuning parameters and enable the training on computation resource-limited devices.</p>
</div>
<figure id="S3.F3" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F3.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x3.png" id="S3.F3.sf1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F3.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S3.F3.sf1.3.2" class="ltx_text" style="font-size:90%;">Food101</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F3.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x4.png" id="S3.F3.sf2.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F3.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S3.F3.sf2.3.2" class="ltx_text" style="font-size:90%;">UCF101</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F3.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x5.png" id="S3.F3.sf3.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F3.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="S3.F3.sf3.3.2" class="ltx_text" style="font-size:90%;">EuroSAT</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S3.F3.2.1.1" class="ltx_text" style="font-size:90%;">Figure 3</span>: </span><span id="S3.F3.3.2" class="ltx_text" style="font-size:90%;">Average accuracy on different datasets when under different visual encoders</span></figcaption>
</figure>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span><span id="S3.SS3.1.1" class="ltx_text ltx_font_italic">Mixture of Foundation Models</span>
</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.1" class="ltx_p">In traditional FL, a global model is trained using the decentralized data of clients. Only model weights are aggregated in the central server while the local data of clients are kept private to ensure clients’ data privacy. This paradigm faces statistical challenges especially when the data distribution of clients is non-iid. Such non-iid data distribution could cause the weight divergence during the training<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref">25</a>]</cite> and cause significant performance drops. Moreover, training a single global model and applying it to all clients can not suit different clients’ needs when their data have different data distributions. Training personalized models while benefiting from utilizing a global model is essential to providing better performance for different clients.</p>
</div>
<div id="S3.SS3.p2" class="ltx_para">
<p id="S3.SS3.p2.1" class="ltx_p">To tackle this challenge, we design a novel Mixture of Foundation Models (<span id="S3.SS3.p2.1.1" class="ltx_text ltx_font_typewriter">MoFM</span>) algorithm to utilize an FM as the global expert and another FM as the local expert thus creating a mixture of Foundation Models to simultaneously learn personalized feature information as well as global feature information on each client.</p>
</div>
<div id="S3.SS3.p3" class="ltx_para">
<p id="S3.SS3.p3.5" class="ltx_p">As shown in Fig.<a href="#S2.F1" title="Figure 1 ‣ 2.1 Foundation Model ‣ 2 Background and Related Work ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, in the first stage of training, every client collaboratively trains a global FM <math id="S3.SS3.p3.1.m1.1" class="ltx_Math" alttext="\zeta_{g}" display="inline"><semantics id="S3.SS3.p3.1.m1.1a"><msub id="S3.SS3.p3.1.m1.1.1" xref="S3.SS3.p3.1.m1.1.1.cmml"><mi id="S3.SS3.p3.1.m1.1.1.2" xref="S3.SS3.p3.1.m1.1.1.2.cmml">ζ</mi><mi id="S3.SS3.p3.1.m1.1.1.3" xref="S3.SS3.p3.1.m1.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.1.m1.1b"><apply id="S3.SS3.p3.1.m1.1.1.cmml" xref="S3.SS3.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.1.m1.1.1.1.cmml" xref="S3.SS3.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.p3.1.m1.1.1.2.cmml" xref="S3.SS3.p3.1.m1.1.1.2">𝜁</ci><ci id="S3.SS3.p3.1.m1.1.1.3.cmml" xref="S3.SS3.p3.1.m1.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.1.m1.1c">\zeta_{g}</annotation></semantics></math> with weight <math id="S3.SS3.p3.2.m2.1" class="ltx_Math" alttext="W_{g}" display="inline"><semantics id="S3.SS3.p3.2.m2.1a"><msub id="S3.SS3.p3.2.m2.1.1" xref="S3.SS3.p3.2.m2.1.1.cmml"><mi id="S3.SS3.p3.2.m2.1.1.2" xref="S3.SS3.p3.2.m2.1.1.2.cmml">W</mi><mi id="S3.SS3.p3.2.m2.1.1.3" xref="S3.SS3.p3.2.m2.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.2.m2.1b"><apply id="S3.SS3.p3.2.m2.1.1.cmml" xref="S3.SS3.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.2.m2.1.1.1.cmml" xref="S3.SS3.p3.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.p3.2.m2.1.1.2.cmml" xref="S3.SS3.p3.2.m2.1.1.2">𝑊</ci><ci id="S3.SS3.p3.2.m2.1.1.3.cmml" xref="S3.SS3.p3.2.m2.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.2.m2.1c">W_{g}</annotation></semantics></math>. Low-rank decomposition matrices are inserted in every layer of the visual encoder and the text encoder. This global FM acts as a global expert. In the second stage, a local expert <math id="S3.SS3.p3.3.m3.1" class="ltx_Math" alttext="\zeta_{i}" display="inline"><semantics id="S3.SS3.p3.3.m3.1a"><msub id="S3.SS3.p3.3.m3.1.1" xref="S3.SS3.p3.3.m3.1.1.cmml"><mi id="S3.SS3.p3.3.m3.1.1.2" xref="S3.SS3.p3.3.m3.1.1.2.cmml">ζ</mi><mi id="S3.SS3.p3.3.m3.1.1.3" xref="S3.SS3.p3.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.3.m3.1b"><apply id="S3.SS3.p3.3.m3.1.1.cmml" xref="S3.SS3.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.3.m3.1.1.1.cmml" xref="S3.SS3.p3.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.p3.3.m3.1.1.2.cmml" xref="S3.SS3.p3.3.m3.1.1.2">𝜁</ci><ci id="S3.SS3.p3.3.m3.1.1.3.cmml" xref="S3.SS3.p3.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.3.m3.1c">\zeta_{i}</annotation></semantics></math> with weight <math id="S3.SS3.p3.4.m4.1" class="ltx_Math" alttext="W_{i}" display="inline"><semantics id="S3.SS3.p3.4.m4.1a"><msub id="S3.SS3.p3.4.m4.1.1" xref="S3.SS3.p3.4.m4.1.1.cmml"><mi id="S3.SS3.p3.4.m4.1.1.2" xref="S3.SS3.p3.4.m4.1.1.2.cmml">W</mi><mi id="S3.SS3.p3.4.m4.1.1.3" xref="S3.SS3.p3.4.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.4.m4.1b"><apply id="S3.SS3.p3.4.m4.1.1.cmml" xref="S3.SS3.p3.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p3.4.m4.1.1.1.cmml" xref="S3.SS3.p3.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.p3.4.m4.1.1.2.cmml" xref="S3.SS3.p3.4.m4.1.1.2">𝑊</ci><ci id="S3.SS3.p3.4.m4.1.1.3.cmml" xref="S3.SS3.p3.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.4.m4.1c">W_{i}</annotation></semantics></math> is created for each client <math id="S3.SS3.p3.5.m5.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p3.5.m5.1a"><mi id="S3.SS3.p3.5.m5.1.1" xref="S3.SS3.p3.5.m5.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p3.5.m5.1b"><ci id="S3.SS3.p3.5.m5.1.1.cmml" xref="S3.SS3.p3.5.m5.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p3.5.m5.1c">i</annotation></semantics></math> to cooperate with the global expert.</p>
</div>
<div id="S3.SS3.p4" class="ltx_para">
<p id="S3.SS3.p4.9" class="ltx_p">More specifically, the local experts have the same neural network architecture as the global expert and are initialized with the weights of the global expert. A gate function <math id="S3.SS3.p4.1.m1.1" class="ltx_Math" alttext="G_{i}" display="inline"><semantics id="S3.SS3.p4.1.m1.1a"><msub id="S3.SS3.p4.1.m1.1.1" xref="S3.SS3.p4.1.m1.1.1.cmml"><mi id="S3.SS3.p4.1.m1.1.1.2" xref="S3.SS3.p4.1.m1.1.1.2.cmml">G</mi><mi id="S3.SS3.p4.1.m1.1.1.3" xref="S3.SS3.p4.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.1.m1.1b"><apply id="S3.SS3.p4.1.m1.1.1.cmml" xref="S3.SS3.p4.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p4.1.m1.1.1.1.cmml" xref="S3.SS3.p4.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.p4.1.m1.1.1.2.cmml" xref="S3.SS3.p4.1.m1.1.1.2">𝐺</ci><ci id="S3.SS3.p4.1.m1.1.1.3.cmml" xref="S3.SS3.p4.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.1.m1.1c">G_{i}</annotation></semantics></math> with weight <math id="S3.SS3.p4.2.m2.1" class="ltx_Math" alttext="\xi_{i}" display="inline"><semantics id="S3.SS3.p4.2.m2.1a"><msub id="S3.SS3.p4.2.m2.1.1" xref="S3.SS3.p4.2.m2.1.1.cmml"><mi id="S3.SS3.p4.2.m2.1.1.2" xref="S3.SS3.p4.2.m2.1.1.2.cmml">ξ</mi><mi id="S3.SS3.p4.2.m2.1.1.3" xref="S3.SS3.p4.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.2.m2.1b"><apply id="S3.SS3.p4.2.m2.1.1.cmml" xref="S3.SS3.p4.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p4.2.m2.1.1.1.cmml" xref="S3.SS3.p4.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.p4.2.m2.1.1.2.cmml" xref="S3.SS3.p4.2.m2.1.1.2">𝜉</ci><ci id="S3.SS3.p4.2.m2.1.1.3.cmml" xref="S3.SS3.p4.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.2.m2.1c">\xi_{i}</annotation></semantics></math> for each client <math id="S3.SS3.p4.3.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p4.3.m3.1a"><mi id="S3.SS3.p4.3.m3.1.1" xref="S3.SS3.p4.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.3.m3.1b"><ci id="S3.SS3.p4.3.m3.1.1.cmml" xref="S3.SS3.p4.3.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.3.m3.1c">i</annotation></semantics></math> is a neural network introduced to control the relative contribution of the global expert and the local expert to the final image classification decision given different images. We denote the extracted image features and text features by the global expert as <math id="S3.SS3.p4.4.m4.1" class="ltx_Math" alttext="V_{g}" display="inline"><semantics id="S3.SS3.p4.4.m4.1a"><msub id="S3.SS3.p4.4.m4.1.1" xref="S3.SS3.p4.4.m4.1.1.cmml"><mi id="S3.SS3.p4.4.m4.1.1.2" xref="S3.SS3.p4.4.m4.1.1.2.cmml">V</mi><mi id="S3.SS3.p4.4.m4.1.1.3" xref="S3.SS3.p4.4.m4.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.4.m4.1b"><apply id="S3.SS3.p4.4.m4.1.1.cmml" xref="S3.SS3.p4.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p4.4.m4.1.1.1.cmml" xref="S3.SS3.p4.4.m4.1.1">subscript</csymbol><ci id="S3.SS3.p4.4.m4.1.1.2.cmml" xref="S3.SS3.p4.4.m4.1.1.2">𝑉</ci><ci id="S3.SS3.p4.4.m4.1.1.3.cmml" xref="S3.SS3.p4.4.m4.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.4.m4.1c">V_{g}</annotation></semantics></math> and <math id="S3.SS3.p4.5.m5.1" class="ltx_Math" alttext="T_{g}" display="inline"><semantics id="S3.SS3.p4.5.m5.1a"><msub id="S3.SS3.p4.5.m5.1.1" xref="S3.SS3.p4.5.m5.1.1.cmml"><mi id="S3.SS3.p4.5.m5.1.1.2" xref="S3.SS3.p4.5.m5.1.1.2.cmml">T</mi><mi id="S3.SS3.p4.5.m5.1.1.3" xref="S3.SS3.p4.5.m5.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.5.m5.1b"><apply id="S3.SS3.p4.5.m5.1.1.cmml" xref="S3.SS3.p4.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS3.p4.5.m5.1.1.1.cmml" xref="S3.SS3.p4.5.m5.1.1">subscript</csymbol><ci id="S3.SS3.p4.5.m5.1.1.2.cmml" xref="S3.SS3.p4.5.m5.1.1.2">𝑇</ci><ci id="S3.SS3.p4.5.m5.1.1.3.cmml" xref="S3.SS3.p4.5.m5.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.5.m5.1c">T_{g}</annotation></semantics></math> and the extracted image features and text features by the local expert <math id="S3.SS3.p4.6.m6.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p4.6.m6.1a"><mi id="S3.SS3.p4.6.m6.1.1" xref="S3.SS3.p4.6.m6.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.6.m6.1b"><ci id="S3.SS3.p4.6.m6.1.1.cmml" xref="S3.SS3.p4.6.m6.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.6.m6.1c">i</annotation></semantics></math> as <math id="S3.SS3.p4.7.m7.1" class="ltx_Math" alttext="V_{i}" display="inline"><semantics id="S3.SS3.p4.7.m7.1a"><msub id="S3.SS3.p4.7.m7.1.1" xref="S3.SS3.p4.7.m7.1.1.cmml"><mi id="S3.SS3.p4.7.m7.1.1.2" xref="S3.SS3.p4.7.m7.1.1.2.cmml">V</mi><mi id="S3.SS3.p4.7.m7.1.1.3" xref="S3.SS3.p4.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.7.m7.1b"><apply id="S3.SS3.p4.7.m7.1.1.cmml" xref="S3.SS3.p4.7.m7.1.1"><csymbol cd="ambiguous" id="S3.SS3.p4.7.m7.1.1.1.cmml" xref="S3.SS3.p4.7.m7.1.1">subscript</csymbol><ci id="S3.SS3.p4.7.m7.1.1.2.cmml" xref="S3.SS3.p4.7.m7.1.1.2">𝑉</ci><ci id="S3.SS3.p4.7.m7.1.1.3.cmml" xref="S3.SS3.p4.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.7.m7.1c">V_{i}</annotation></semantics></math> and <math id="S3.SS3.p4.8.m8.1" class="ltx_Math" alttext="T_{i}" display="inline"><semantics id="S3.SS3.p4.8.m8.1a"><msub id="S3.SS3.p4.8.m8.1.1" xref="S3.SS3.p4.8.m8.1.1.cmml"><mi id="S3.SS3.p4.8.m8.1.1.2" xref="S3.SS3.p4.8.m8.1.1.2.cmml">T</mi><mi id="S3.SS3.p4.8.m8.1.1.3" xref="S3.SS3.p4.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.8.m8.1b"><apply id="S3.SS3.p4.8.m8.1.1.cmml" xref="S3.SS3.p4.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS3.p4.8.m8.1.1.1.cmml" xref="S3.SS3.p4.8.m8.1.1">subscript</csymbol><ci id="S3.SS3.p4.8.m8.1.1.2.cmml" xref="S3.SS3.p4.8.m8.1.1.2">𝑇</ci><ci id="S3.SS3.p4.8.m8.1.1.3.cmml" xref="S3.SS3.p4.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.8.m8.1c">T_{i}</annotation></semantics></math>. The final cosine similarity of image features and text features extracted from the dataset of client <math id="S3.SS3.p4.9.m9.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p4.9.m9.1a"><mi id="S3.SS3.p4.9.m9.1.1" xref="S3.SS3.p4.9.m9.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.9.m9.1b"><ci id="S3.SS3.p4.9.m9.1.1.cmml" xref="S3.SS3.p4.9.m9.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.9.m9.1c">i</annotation></semantics></math> can be denoted by</p>
<table id="S3.E6" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E6.m1.3" class="ltx_Math" alttext="\tilde{O_{i}}=\lambda_{i}&lt;V_{g},T_{g}&gt;+(1-\lambda_{i})&lt;V_{i},T_{i}&gt;" display="block"><semantics id="S3.E6.m1.3a"><mrow id="S3.E6.m1.3.3.3" xref="S3.E6.m1.3.3.4.cmml"><mrow id="S3.E6.m1.1.1.1.1" xref="S3.E6.m1.1.1.1.1.cmml"><mover accent="true" id="S3.E6.m1.1.1.1.1.2" xref="S3.E6.m1.1.1.1.1.2.cmml"><msub id="S3.E6.m1.1.1.1.1.2.2" xref="S3.E6.m1.1.1.1.1.2.2.cmml"><mi id="S3.E6.m1.1.1.1.1.2.2.2" xref="S3.E6.m1.1.1.1.1.2.2.2.cmml">O</mi><mi id="S3.E6.m1.1.1.1.1.2.2.3" xref="S3.E6.m1.1.1.1.1.2.2.3.cmml">i</mi></msub><mo id="S3.E6.m1.1.1.1.1.2.1" xref="S3.E6.m1.1.1.1.1.2.1.cmml">~</mo></mover><mo id="S3.E6.m1.1.1.1.1.3" xref="S3.E6.m1.1.1.1.1.3.cmml">=</mo><msub id="S3.E6.m1.1.1.1.1.4" xref="S3.E6.m1.1.1.1.1.4.cmml"><mi id="S3.E6.m1.1.1.1.1.4.2" xref="S3.E6.m1.1.1.1.1.4.2.cmml">λ</mi><mi id="S3.E6.m1.1.1.1.1.4.3" xref="S3.E6.m1.1.1.1.1.4.3.cmml">i</mi></msub><mo id="S3.E6.m1.1.1.1.1.5" xref="S3.E6.m1.1.1.1.1.5.cmml">&lt;</mo><msub id="S3.E6.m1.1.1.1.1.6" xref="S3.E6.m1.1.1.1.1.6.cmml"><mi id="S3.E6.m1.1.1.1.1.6.2" xref="S3.E6.m1.1.1.1.1.6.2.cmml">V</mi><mi id="S3.E6.m1.1.1.1.1.6.3" xref="S3.E6.m1.1.1.1.1.6.3.cmml">g</mi></msub></mrow><mo id="S3.E6.m1.3.3.3.4" xref="S3.E6.m1.3.3.4a.cmml">,</mo><mrow id="S3.E6.m1.2.2.2.2" xref="S3.E6.m1.2.2.2.2.cmml"><msub id="S3.E6.m1.2.2.2.2.3" xref="S3.E6.m1.2.2.2.2.3.cmml"><mi id="S3.E6.m1.2.2.2.2.3.2" xref="S3.E6.m1.2.2.2.2.3.2.cmml">T</mi><mi id="S3.E6.m1.2.2.2.2.3.3" xref="S3.E6.m1.2.2.2.2.3.3.cmml">g</mi></msub><mo id="S3.E6.m1.2.2.2.2.4" xref="S3.E6.m1.2.2.2.2.4.cmml">&gt;</mo><mrow id="S3.E6.m1.2.2.2.2.1" xref="S3.E6.m1.2.2.2.2.1.cmml"><mo id="S3.E6.m1.2.2.2.2.1a" xref="S3.E6.m1.2.2.2.2.1.cmml">+</mo><mrow id="S3.E6.m1.2.2.2.2.1.1.1" xref="S3.E6.m1.2.2.2.2.1.1.1.1.cmml"><mo stretchy="false" id="S3.E6.m1.2.2.2.2.1.1.1.2" xref="S3.E6.m1.2.2.2.2.1.1.1.1.cmml">(</mo><mrow id="S3.E6.m1.2.2.2.2.1.1.1.1" xref="S3.E6.m1.2.2.2.2.1.1.1.1.cmml"><mn id="S3.E6.m1.2.2.2.2.1.1.1.1.2" xref="S3.E6.m1.2.2.2.2.1.1.1.1.2.cmml">1</mn><mo id="S3.E6.m1.2.2.2.2.1.1.1.1.1" xref="S3.E6.m1.2.2.2.2.1.1.1.1.1.cmml">−</mo><msub id="S3.E6.m1.2.2.2.2.1.1.1.1.3" xref="S3.E6.m1.2.2.2.2.1.1.1.1.3.cmml"><mi id="S3.E6.m1.2.2.2.2.1.1.1.1.3.2" xref="S3.E6.m1.2.2.2.2.1.1.1.1.3.2.cmml">λ</mi><mi id="S3.E6.m1.2.2.2.2.1.1.1.1.3.3" xref="S3.E6.m1.2.2.2.2.1.1.1.1.3.3.cmml">i</mi></msub></mrow><mo stretchy="false" id="S3.E6.m1.2.2.2.2.1.1.1.3" xref="S3.E6.m1.2.2.2.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E6.m1.2.2.2.2.5" xref="S3.E6.m1.2.2.2.2.5.cmml">&lt;</mo><msub id="S3.E6.m1.2.2.2.2.6" xref="S3.E6.m1.2.2.2.2.6.cmml"><mi id="S3.E6.m1.2.2.2.2.6.2" xref="S3.E6.m1.2.2.2.2.6.2.cmml">V</mi><mi id="S3.E6.m1.2.2.2.2.6.3" xref="S3.E6.m1.2.2.2.2.6.3.cmml">i</mi></msub></mrow><mo id="S3.E6.m1.3.3.3.5" xref="S3.E6.m1.3.3.4a.cmml">,</mo><mrow id="S3.E6.m1.3.3.3.3" xref="S3.E6.m1.3.3.3.3.cmml"><msub id="S3.E6.m1.3.3.3.3.2" xref="S3.E6.m1.3.3.3.3.2.cmml"><mi id="S3.E6.m1.3.3.3.3.2.2" xref="S3.E6.m1.3.3.3.3.2.2.cmml">T</mi><mi id="S3.E6.m1.3.3.3.3.2.3" xref="S3.E6.m1.3.3.3.3.2.3.cmml">i</mi></msub><mo id="S3.E6.m1.3.3.3.3.1" xref="S3.E6.m1.3.3.3.3.1.cmml">&gt;</mo><mi id="S3.E6.m1.3.3.3.3.3" xref="S3.E6.m1.3.3.3.3.3.cmml"></mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E6.m1.3b"><apply id="S3.E6.m1.3.3.4.cmml" xref="S3.E6.m1.3.3.3"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.4a.cmml" xref="S3.E6.m1.3.3.3.4">formulae-sequence</csymbol><apply id="S3.E6.m1.1.1.1.1.cmml" xref="S3.E6.m1.1.1.1.1"><and id="S3.E6.m1.1.1.1.1a.cmml" xref="S3.E6.m1.1.1.1.1"></and><apply id="S3.E6.m1.1.1.1.1b.cmml" xref="S3.E6.m1.1.1.1.1"><eq id="S3.E6.m1.1.1.1.1.3.cmml" xref="S3.E6.m1.1.1.1.1.3"></eq><apply id="S3.E6.m1.1.1.1.1.2.cmml" xref="S3.E6.m1.1.1.1.1.2"><ci id="S3.E6.m1.1.1.1.1.2.1.cmml" xref="S3.E6.m1.1.1.1.1.2.1">~</ci><apply id="S3.E6.m1.1.1.1.1.2.2.cmml" xref="S3.E6.m1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.1.2.2.1.cmml" xref="S3.E6.m1.1.1.1.1.2.2">subscript</csymbol><ci id="S3.E6.m1.1.1.1.1.2.2.2.cmml" xref="S3.E6.m1.1.1.1.1.2.2.2">𝑂</ci><ci id="S3.E6.m1.1.1.1.1.2.2.3.cmml" xref="S3.E6.m1.1.1.1.1.2.2.3">𝑖</ci></apply></apply><apply id="S3.E6.m1.1.1.1.1.4.cmml" xref="S3.E6.m1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.1.4.1.cmml" xref="S3.E6.m1.1.1.1.1.4">subscript</csymbol><ci id="S3.E6.m1.1.1.1.1.4.2.cmml" xref="S3.E6.m1.1.1.1.1.4.2">𝜆</ci><ci id="S3.E6.m1.1.1.1.1.4.3.cmml" xref="S3.E6.m1.1.1.1.1.4.3">𝑖</ci></apply></apply><apply id="S3.E6.m1.1.1.1.1c.cmml" xref="S3.E6.m1.1.1.1.1"><lt id="S3.E6.m1.1.1.1.1.5.cmml" xref="S3.E6.m1.1.1.1.1.5"></lt><share href="#S3.E6.m1.1.1.1.1.4.cmml" id="S3.E6.m1.1.1.1.1d.cmml" xref="S3.E6.m1.1.1.1.1"></share><apply id="S3.E6.m1.1.1.1.1.6.cmml" xref="S3.E6.m1.1.1.1.1.6"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.1.6.1.cmml" xref="S3.E6.m1.1.1.1.1.6">subscript</csymbol><ci id="S3.E6.m1.1.1.1.1.6.2.cmml" xref="S3.E6.m1.1.1.1.1.6.2">𝑉</ci><ci id="S3.E6.m1.1.1.1.1.6.3.cmml" xref="S3.E6.m1.1.1.1.1.6.3">𝑔</ci></apply></apply></apply><apply id="S3.E6.m1.2.2.2.2.cmml" xref="S3.E6.m1.2.2.2.2"><and id="S3.E6.m1.2.2.2.2a.cmml" xref="S3.E6.m1.2.2.2.2"></and><apply id="S3.E6.m1.2.2.2.2b.cmml" xref="S3.E6.m1.2.2.2.2"><gt id="S3.E6.m1.2.2.2.2.4.cmml" xref="S3.E6.m1.2.2.2.2.4"></gt><apply id="S3.E6.m1.2.2.2.2.3.cmml" xref="S3.E6.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.3.1.cmml" xref="S3.E6.m1.2.2.2.2.3">subscript</csymbol><ci id="S3.E6.m1.2.2.2.2.3.2.cmml" xref="S3.E6.m1.2.2.2.2.3.2">𝑇</ci><ci id="S3.E6.m1.2.2.2.2.3.3.cmml" xref="S3.E6.m1.2.2.2.2.3.3">𝑔</ci></apply><apply id="S3.E6.m1.2.2.2.2.1.cmml" xref="S3.E6.m1.2.2.2.2.1"><plus id="S3.E6.m1.2.2.2.2.1.2.cmml" xref="S3.E6.m1.2.2.2.2.1"></plus><apply id="S3.E6.m1.2.2.2.2.1.1.1.1.cmml" xref="S3.E6.m1.2.2.2.2.1.1.1"><minus id="S3.E6.m1.2.2.2.2.1.1.1.1.1.cmml" xref="S3.E6.m1.2.2.2.2.1.1.1.1.1"></minus><cn type="integer" id="S3.E6.m1.2.2.2.2.1.1.1.1.2.cmml" xref="S3.E6.m1.2.2.2.2.1.1.1.1.2">1</cn><apply id="S3.E6.m1.2.2.2.2.1.1.1.1.3.cmml" xref="S3.E6.m1.2.2.2.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.1.1.1.1.3.1.cmml" xref="S3.E6.m1.2.2.2.2.1.1.1.1.3">subscript</csymbol><ci id="S3.E6.m1.2.2.2.2.1.1.1.1.3.2.cmml" xref="S3.E6.m1.2.2.2.2.1.1.1.1.3.2">𝜆</ci><ci id="S3.E6.m1.2.2.2.2.1.1.1.1.3.3.cmml" xref="S3.E6.m1.2.2.2.2.1.1.1.1.3.3">𝑖</ci></apply></apply></apply></apply><apply id="S3.E6.m1.2.2.2.2c.cmml" xref="S3.E6.m1.2.2.2.2"><lt id="S3.E6.m1.2.2.2.2.5.cmml" xref="S3.E6.m1.2.2.2.2.5"></lt><share href="#S3.E6.m1.2.2.2.2.1.cmml" id="S3.E6.m1.2.2.2.2d.cmml" xref="S3.E6.m1.2.2.2.2"></share><apply id="S3.E6.m1.2.2.2.2.6.cmml" xref="S3.E6.m1.2.2.2.2.6"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.6.1.cmml" xref="S3.E6.m1.2.2.2.2.6">subscript</csymbol><ci id="S3.E6.m1.2.2.2.2.6.2.cmml" xref="S3.E6.m1.2.2.2.2.6.2">𝑉</ci><ci id="S3.E6.m1.2.2.2.2.6.3.cmml" xref="S3.E6.m1.2.2.2.2.6.3">𝑖</ci></apply></apply></apply><apply id="S3.E6.m1.3.3.3.3.cmml" xref="S3.E6.m1.3.3.3.3"><gt id="S3.E6.m1.3.3.3.3.1.cmml" xref="S3.E6.m1.3.3.3.3.1"></gt><apply id="S3.E6.m1.3.3.3.3.2.cmml" xref="S3.E6.m1.3.3.3.3.2"><csymbol cd="ambiguous" id="S3.E6.m1.3.3.3.3.2.1.cmml" xref="S3.E6.m1.3.3.3.3.2">subscript</csymbol><ci id="S3.E6.m1.3.3.3.3.2.2.cmml" xref="S3.E6.m1.3.3.3.3.2.2">𝑇</ci><ci id="S3.E6.m1.3.3.3.3.2.3.cmml" xref="S3.E6.m1.3.3.3.3.2.3">𝑖</ci></apply><csymbol cd="latexml" id="S3.E6.m1.3.3.3.3.3.cmml" xref="S3.E6.m1.3.3.3.3.3">absent</csymbol></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E6.m1.3c">\tilde{O_{i}}=\lambda_{i}&lt;V_{g},T_{g}&gt;+(1-\lambda_{i})&lt;V_{i},T_{i}&gt;</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
<p id="S3.SS3.p4.13" class="ltx_p">where <math id="S3.SS3.p4.10.m1.2" class="ltx_Math" alttext="\lambda_{i}\in(0,1)" display="inline"><semantics id="S3.SS3.p4.10.m1.2a"><mrow id="S3.SS3.p4.10.m1.2.3" xref="S3.SS3.p4.10.m1.2.3.cmml"><msub id="S3.SS3.p4.10.m1.2.3.2" xref="S3.SS3.p4.10.m1.2.3.2.cmml"><mi id="S3.SS3.p4.10.m1.2.3.2.2" xref="S3.SS3.p4.10.m1.2.3.2.2.cmml">λ</mi><mi id="S3.SS3.p4.10.m1.2.3.2.3" xref="S3.SS3.p4.10.m1.2.3.2.3.cmml">i</mi></msub><mo id="S3.SS3.p4.10.m1.2.3.1" xref="S3.SS3.p4.10.m1.2.3.1.cmml">∈</mo><mrow id="S3.SS3.p4.10.m1.2.3.3.2" xref="S3.SS3.p4.10.m1.2.3.3.1.cmml"><mo stretchy="false" id="S3.SS3.p4.10.m1.2.3.3.2.1" xref="S3.SS3.p4.10.m1.2.3.3.1.cmml">(</mo><mn id="S3.SS3.p4.10.m1.1.1" xref="S3.SS3.p4.10.m1.1.1.cmml">0</mn><mo id="S3.SS3.p4.10.m1.2.3.3.2.2" xref="S3.SS3.p4.10.m1.2.3.3.1.cmml">,</mo><mn id="S3.SS3.p4.10.m1.2.2" xref="S3.SS3.p4.10.m1.2.2.cmml">1</mn><mo stretchy="false" id="S3.SS3.p4.10.m1.2.3.3.2.3" xref="S3.SS3.p4.10.m1.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.10.m1.2b"><apply id="S3.SS3.p4.10.m1.2.3.cmml" xref="S3.SS3.p4.10.m1.2.3"><in id="S3.SS3.p4.10.m1.2.3.1.cmml" xref="S3.SS3.p4.10.m1.2.3.1"></in><apply id="S3.SS3.p4.10.m1.2.3.2.cmml" xref="S3.SS3.p4.10.m1.2.3.2"><csymbol cd="ambiguous" id="S3.SS3.p4.10.m1.2.3.2.1.cmml" xref="S3.SS3.p4.10.m1.2.3.2">subscript</csymbol><ci id="S3.SS3.p4.10.m1.2.3.2.2.cmml" xref="S3.SS3.p4.10.m1.2.3.2.2">𝜆</ci><ci id="S3.SS3.p4.10.m1.2.3.2.3.cmml" xref="S3.SS3.p4.10.m1.2.3.2.3">𝑖</ci></apply><interval closure="open" id="S3.SS3.p4.10.m1.2.3.3.1.cmml" xref="S3.SS3.p4.10.m1.2.3.3.2"><cn type="integer" id="S3.SS3.p4.10.m1.1.1.cmml" xref="S3.SS3.p4.10.m1.1.1">0</cn><cn type="integer" id="S3.SS3.p4.10.m1.2.2.cmml" xref="S3.SS3.p4.10.m1.2.2">1</cn></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.10.m1.2c">\lambda_{i}\in(0,1)</annotation></semantics></math> is a weight factor representing the mixing ratio of the global expert and the local expert of client <math id="S3.SS3.p4.11.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p4.11.m2.1a"><mi id="S3.SS3.p4.11.m2.1.1" xref="S3.SS3.p4.11.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.11.m2.1b"><ci id="S3.SS3.p4.11.m2.1.1.cmml" xref="S3.SS3.p4.11.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.11.m2.1c">i</annotation></semantics></math>. Larger <math id="S3.SS3.p4.12.m3.1" class="ltx_Math" alttext="\lambda_{i}" display="inline"><semantics id="S3.SS3.p4.12.m3.1a"><msub id="S3.SS3.p4.12.m3.1.1" xref="S3.SS3.p4.12.m3.1.1.cmml"><mi id="S3.SS3.p4.12.m3.1.1.2" xref="S3.SS3.p4.12.m3.1.1.2.cmml">λ</mi><mi id="S3.SS3.p4.12.m3.1.1.3" xref="S3.SS3.p4.12.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.12.m3.1b"><apply id="S3.SS3.p4.12.m3.1.1.cmml" xref="S3.SS3.p4.12.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.p4.12.m3.1.1.1.cmml" xref="S3.SS3.p4.12.m3.1.1">subscript</csymbol><ci id="S3.SS3.p4.12.m3.1.1.2.cmml" xref="S3.SS3.p4.12.m3.1.1.2">𝜆</ci><ci id="S3.SS3.p4.12.m3.1.1.3.cmml" xref="S3.SS3.p4.12.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.12.m3.1c">\lambda_{i}</annotation></semantics></math> indicates more global knowledge is used while smaller <math id="S3.SS3.p4.13.m4.1" class="ltx_Math" alttext="\lambda_{i}" display="inline"><semantics id="S3.SS3.p4.13.m4.1a"><msub id="S3.SS3.p4.13.m4.1.1" xref="S3.SS3.p4.13.m4.1.1.cmml"><mi id="S3.SS3.p4.13.m4.1.1.2" xref="S3.SS3.p4.13.m4.1.1.2.cmml">λ</mi><mi id="S3.SS3.p4.13.m4.1.1.3" xref="S3.SS3.p4.13.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p4.13.m4.1b"><apply id="S3.SS3.p4.13.m4.1.1.cmml" xref="S3.SS3.p4.13.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p4.13.m4.1.1.1.cmml" xref="S3.SS3.p4.13.m4.1.1">subscript</csymbol><ci id="S3.SS3.p4.13.m4.1.1.2.cmml" xref="S3.SS3.p4.13.m4.1.1.2">𝜆</ci><ci id="S3.SS3.p4.13.m4.1.1.3.cmml" xref="S3.SS3.p4.13.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p4.13.m4.1c">\lambda_{i}</annotation></semantics></math> indicates more personal knowledge is used.</p>
</div>
<div id="S3.SS3.p5" class="ltx_para">
<p id="S3.SS3.p5.2" class="ltx_p">During the second training stage of FedMS, the weights of the global expert are frozen, and the local expert <math id="S3.SS3.p5.1.m1.1" class="ltx_Math" alttext="\zeta_{i}" display="inline"><semantics id="S3.SS3.p5.1.m1.1a"><msub id="S3.SS3.p5.1.m1.1.1" xref="S3.SS3.p5.1.m1.1.1.cmml"><mi id="S3.SS3.p5.1.m1.1.1.2" xref="S3.SS3.p5.1.m1.1.1.2.cmml">ζ</mi><mi id="S3.SS3.p5.1.m1.1.1.3" xref="S3.SS3.p5.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p5.1.m1.1b"><apply id="S3.SS3.p5.1.m1.1.1.cmml" xref="S3.SS3.p5.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p5.1.m1.1.1.1.cmml" xref="S3.SS3.p5.1.m1.1.1">subscript</csymbol><ci id="S3.SS3.p5.1.m1.1.1.2.cmml" xref="S3.SS3.p5.1.m1.1.1.2">𝜁</ci><ci id="S3.SS3.p5.1.m1.1.1.3.cmml" xref="S3.SS3.p5.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p5.1.m1.1c">\zeta_{i}</annotation></semantics></math> and the gate model are optimized only using the local data of client <math id="S3.SS3.p5.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p5.2.m2.1a"><mi id="S3.SS3.p5.2.m2.1.1" xref="S3.SS3.p5.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p5.2.m2.1b"><ci id="S3.SS3.p5.2.m2.1.1.cmml" xref="S3.SS3.p5.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p5.2.m2.1c">i</annotation></semantics></math>.
The adapter<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite> has been a popular parameter-efficient tuning method in FMs. It works by inserting very few layers into FMs and optimizing FM by only tuning the inserted very few parameters.</p>
</div>
<div id="S3.SS3.p6" class="ltx_para">
<p id="S3.SS3.p6.1" class="ltx_p">We design a gate adapter to adapt to the local datasets while maintaining a low computation and communication cost.
In each communication round, clients’ activated gate adapter parameters are aggregated to learn global feature information, thus maintaining a low computation and communication cost.</p>
</div>
<div id="S3.SS3.p7" class="ltx_para">
<p id="S3.SS3.p7.4" class="ltx_p">We denote the gate adapter of gate <math id="S3.SS3.p7.1.m1.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p7.1.m1.1a"><mi id="S3.SS3.p7.1.m1.1.1" xref="S3.SS3.p7.1.m1.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p7.1.m1.1b"><ci id="S3.SS3.p7.1.m1.1.1.cmml" xref="S3.SS3.p7.1.m1.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p7.1.m1.1c">i</annotation></semantics></math> as <math id="S3.SS3.p7.2.m2.1" class="ltx_Math" alttext="Z_{i}" display="inline"><semantics id="S3.SS3.p7.2.m2.1a"><msub id="S3.SS3.p7.2.m2.1.1" xref="S3.SS3.p7.2.m2.1.1.cmml"><mi id="S3.SS3.p7.2.m2.1.1.2" xref="S3.SS3.p7.2.m2.1.1.2.cmml">Z</mi><mi id="S3.SS3.p7.2.m2.1.1.3" xref="S3.SS3.p7.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p7.2.m2.1b"><apply id="S3.SS3.p7.2.m2.1.1.cmml" xref="S3.SS3.p7.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS3.p7.2.m2.1.1.1.cmml" xref="S3.SS3.p7.2.m2.1.1">subscript</csymbol><ci id="S3.SS3.p7.2.m2.1.1.2.cmml" xref="S3.SS3.p7.2.m2.1.1.2">𝑍</ci><ci id="S3.SS3.p7.2.m2.1.1.3.cmml" xref="S3.SS3.p7.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p7.2.m2.1c">Z_{i}</annotation></semantics></math> and the gate adapter after aggregation as <math id="S3.SS3.p7.3.m3.1" class="ltx_Math" alttext="Z_{g}" display="inline"><semantics id="S3.SS3.p7.3.m3.1a"><msub id="S3.SS3.p7.3.m3.1.1" xref="S3.SS3.p7.3.m3.1.1.cmml"><mi id="S3.SS3.p7.3.m3.1.1.2" xref="S3.SS3.p7.3.m3.1.1.2.cmml">Z</mi><mi id="S3.SS3.p7.3.m3.1.1.3" xref="S3.SS3.p7.3.m3.1.1.3.cmml">g</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p7.3.m3.1b"><apply id="S3.SS3.p7.3.m3.1.1.cmml" xref="S3.SS3.p7.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS3.p7.3.m3.1.1.1.cmml" xref="S3.SS3.p7.3.m3.1.1">subscript</csymbol><ci id="S3.SS3.p7.3.m3.1.1.2.cmml" xref="S3.SS3.p7.3.m3.1.1.2">𝑍</ci><ci id="S3.SS3.p7.3.m3.1.1.3.cmml" xref="S3.SS3.p7.3.m3.1.1.3">𝑔</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p7.3.m3.1c">Z_{g}</annotation></semantics></math>. Specifically, we construct the gate adapter with a Multi-Layer Perceptron (MLP), a batch norm layer, an MLP, a batch norm layer, and finally a Softmax function to ensure the output is between <math id="S3.SS3.p7.4.m4.2" class="ltx_Math" alttext="(0,1)" display="inline"><semantics id="S3.SS3.p7.4.m4.2a"><mrow id="S3.SS3.p7.4.m4.2.3.2" xref="S3.SS3.p7.4.m4.2.3.1.cmml"><mo stretchy="false" id="S3.SS3.p7.4.m4.2.3.2.1" xref="S3.SS3.p7.4.m4.2.3.1.cmml">(</mo><mn id="S3.SS3.p7.4.m4.1.1" xref="S3.SS3.p7.4.m4.1.1.cmml">0</mn><mo id="S3.SS3.p7.4.m4.2.3.2.2" xref="S3.SS3.p7.4.m4.2.3.1.cmml">,</mo><mn id="S3.SS3.p7.4.m4.2.2" xref="S3.SS3.p7.4.m4.2.2.cmml">1</mn><mo stretchy="false" id="S3.SS3.p7.4.m4.2.3.2.3" xref="S3.SS3.p7.4.m4.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p7.4.m4.2b"><interval closure="open" id="S3.SS3.p7.4.m4.2.3.1.cmml" xref="S3.SS3.p7.4.m4.2.3.2"><cn type="integer" id="S3.SS3.p7.4.m4.1.1.cmml" xref="S3.SS3.p7.4.m4.1.1">0</cn><cn type="integer" id="S3.SS3.p7.4.m4.2.2.cmml" xref="S3.SS3.p7.4.m4.2.2">1</cn></interval></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p7.4.m4.2c">(0,1)</annotation></semantics></math>. The gate adapter aggregation procedure is denoted as:</p>
</div>
<div id="S3.SS3.p8" class="ltx_para">
<table id="S3.E7" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E7.m1.4" class="ltx_Math" alttext="Z_{g}=\frac{\mathcal{L}_{i,j}}{\sum_{j=0}^{N}\mathcal{L}_{i,j}}\sum_{i=1}^{N}Z_{i}" display="block"><semantics id="S3.E7.m1.4a"><mrow id="S3.E7.m1.4.5" xref="S3.E7.m1.4.5.cmml"><msub id="S3.E7.m1.4.5.2" xref="S3.E7.m1.4.5.2.cmml"><mi id="S3.E7.m1.4.5.2.2" xref="S3.E7.m1.4.5.2.2.cmml">Z</mi><mi id="S3.E7.m1.4.5.2.3" xref="S3.E7.m1.4.5.2.3.cmml">g</mi></msub><mo id="S3.E7.m1.4.5.1" xref="S3.E7.m1.4.5.1.cmml">=</mo><mrow id="S3.E7.m1.4.5.3" xref="S3.E7.m1.4.5.3.cmml"><mfrac id="S3.E7.m1.4.4" xref="S3.E7.m1.4.4.cmml"><msub id="S3.E7.m1.2.2.2" xref="S3.E7.m1.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E7.m1.2.2.2.4" xref="S3.E7.m1.2.2.2.4.cmml">ℒ</mi><mrow id="S3.E7.m1.2.2.2.2.2.4" xref="S3.E7.m1.2.2.2.2.2.3.cmml"><mi id="S3.E7.m1.1.1.1.1.1.1" xref="S3.E7.m1.1.1.1.1.1.1.cmml">i</mi><mo id="S3.E7.m1.2.2.2.2.2.4.1" xref="S3.E7.m1.2.2.2.2.2.3.cmml">,</mo><mi id="S3.E7.m1.2.2.2.2.2.2" xref="S3.E7.m1.2.2.2.2.2.2.cmml">j</mi></mrow></msub><mrow id="S3.E7.m1.4.4.4" xref="S3.E7.m1.4.4.4.cmml"><msubsup id="S3.E7.m1.4.4.4.3" xref="S3.E7.m1.4.4.4.3.cmml"><mo id="S3.E7.m1.4.4.4.3.2.2" xref="S3.E7.m1.4.4.4.3.2.2.cmml">∑</mo><mrow id="S3.E7.m1.4.4.4.3.2.3" xref="S3.E7.m1.4.4.4.3.2.3.cmml"><mi id="S3.E7.m1.4.4.4.3.2.3.2" xref="S3.E7.m1.4.4.4.3.2.3.2.cmml">j</mi><mo id="S3.E7.m1.4.4.4.3.2.3.1" xref="S3.E7.m1.4.4.4.3.2.3.1.cmml">=</mo><mn id="S3.E7.m1.4.4.4.3.2.3.3" xref="S3.E7.m1.4.4.4.3.2.3.3.cmml">0</mn></mrow><mi id="S3.E7.m1.4.4.4.3.3" xref="S3.E7.m1.4.4.4.3.3.cmml">N</mi></msubsup><msub id="S3.E7.m1.4.4.4.4" xref="S3.E7.m1.4.4.4.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E7.m1.4.4.4.4.2" xref="S3.E7.m1.4.4.4.4.2.cmml">ℒ</mi><mrow id="S3.E7.m1.4.4.4.2.2.4" xref="S3.E7.m1.4.4.4.2.2.3.cmml"><mi id="S3.E7.m1.3.3.3.1.1.1" xref="S3.E7.m1.3.3.3.1.1.1.cmml">i</mi><mo id="S3.E7.m1.4.4.4.2.2.4.1" xref="S3.E7.m1.4.4.4.2.2.3.cmml">,</mo><mi id="S3.E7.m1.4.4.4.2.2.2" xref="S3.E7.m1.4.4.4.2.2.2.cmml">j</mi></mrow></msub></mrow></mfrac><mo lspace="0em" rspace="0em" id="S3.E7.m1.4.5.3.1" xref="S3.E7.m1.4.5.3.1.cmml">​</mo><mrow id="S3.E7.m1.4.5.3.2" xref="S3.E7.m1.4.5.3.2.cmml"><munderover id="S3.E7.m1.4.5.3.2.1" xref="S3.E7.m1.4.5.3.2.1.cmml"><mo movablelimits="false" id="S3.E7.m1.4.5.3.2.1.2.2" xref="S3.E7.m1.4.5.3.2.1.2.2.cmml">∑</mo><mrow id="S3.E7.m1.4.5.3.2.1.2.3" xref="S3.E7.m1.4.5.3.2.1.2.3.cmml"><mi id="S3.E7.m1.4.5.3.2.1.2.3.2" xref="S3.E7.m1.4.5.3.2.1.2.3.2.cmml">i</mi><mo id="S3.E7.m1.4.5.3.2.1.2.3.1" xref="S3.E7.m1.4.5.3.2.1.2.3.1.cmml">=</mo><mn id="S3.E7.m1.4.5.3.2.1.2.3.3" xref="S3.E7.m1.4.5.3.2.1.2.3.3.cmml">1</mn></mrow><mi id="S3.E7.m1.4.5.3.2.1.3" xref="S3.E7.m1.4.5.3.2.1.3.cmml">N</mi></munderover><msub id="S3.E7.m1.4.5.3.2.2" xref="S3.E7.m1.4.5.3.2.2.cmml"><mi id="S3.E7.m1.4.5.3.2.2.2" xref="S3.E7.m1.4.5.3.2.2.2.cmml">Z</mi><mi id="S3.E7.m1.4.5.3.2.2.3" xref="S3.E7.m1.4.5.3.2.2.3.cmml">i</mi></msub></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E7.m1.4b"><apply id="S3.E7.m1.4.5.cmml" xref="S3.E7.m1.4.5"><eq id="S3.E7.m1.4.5.1.cmml" xref="S3.E7.m1.4.5.1"></eq><apply id="S3.E7.m1.4.5.2.cmml" xref="S3.E7.m1.4.5.2"><csymbol cd="ambiguous" id="S3.E7.m1.4.5.2.1.cmml" xref="S3.E7.m1.4.5.2">subscript</csymbol><ci id="S3.E7.m1.4.5.2.2.cmml" xref="S3.E7.m1.4.5.2.2">𝑍</ci><ci id="S3.E7.m1.4.5.2.3.cmml" xref="S3.E7.m1.4.5.2.3">𝑔</ci></apply><apply id="S3.E7.m1.4.5.3.cmml" xref="S3.E7.m1.4.5.3"><times id="S3.E7.m1.4.5.3.1.cmml" xref="S3.E7.m1.4.5.3.1"></times><apply id="S3.E7.m1.4.4.cmml" xref="S3.E7.m1.4.4"><divide id="S3.E7.m1.4.4.5.cmml" xref="S3.E7.m1.4.4"></divide><apply id="S3.E7.m1.2.2.2.cmml" xref="S3.E7.m1.2.2.2"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.2.3.cmml" xref="S3.E7.m1.2.2.2">subscript</csymbol><ci id="S3.E7.m1.2.2.2.4.cmml" xref="S3.E7.m1.2.2.2.4">ℒ</ci><list id="S3.E7.m1.2.2.2.2.2.3.cmml" xref="S3.E7.m1.2.2.2.2.2.4"><ci id="S3.E7.m1.1.1.1.1.1.1.cmml" xref="S3.E7.m1.1.1.1.1.1.1">𝑖</ci><ci id="S3.E7.m1.2.2.2.2.2.2.cmml" xref="S3.E7.m1.2.2.2.2.2.2">𝑗</ci></list></apply><apply id="S3.E7.m1.4.4.4.cmml" xref="S3.E7.m1.4.4.4"><apply id="S3.E7.m1.4.4.4.3.cmml" xref="S3.E7.m1.4.4.4.3"><csymbol cd="ambiguous" id="S3.E7.m1.4.4.4.3.1.cmml" xref="S3.E7.m1.4.4.4.3">superscript</csymbol><apply id="S3.E7.m1.4.4.4.3.2.cmml" xref="S3.E7.m1.4.4.4.3"><csymbol cd="ambiguous" id="S3.E7.m1.4.4.4.3.2.1.cmml" xref="S3.E7.m1.4.4.4.3">subscript</csymbol><sum id="S3.E7.m1.4.4.4.3.2.2.cmml" xref="S3.E7.m1.4.4.4.3.2.2"></sum><apply id="S3.E7.m1.4.4.4.3.2.3.cmml" xref="S3.E7.m1.4.4.4.3.2.3"><eq id="S3.E7.m1.4.4.4.3.2.3.1.cmml" xref="S3.E7.m1.4.4.4.3.2.3.1"></eq><ci id="S3.E7.m1.4.4.4.3.2.3.2.cmml" xref="S3.E7.m1.4.4.4.3.2.3.2">𝑗</ci><cn type="integer" id="S3.E7.m1.4.4.4.3.2.3.3.cmml" xref="S3.E7.m1.4.4.4.3.2.3.3">0</cn></apply></apply><ci id="S3.E7.m1.4.4.4.3.3.cmml" xref="S3.E7.m1.4.4.4.3.3">𝑁</ci></apply><apply id="S3.E7.m1.4.4.4.4.cmml" xref="S3.E7.m1.4.4.4.4"><csymbol cd="ambiguous" id="S3.E7.m1.4.4.4.4.1.cmml" xref="S3.E7.m1.4.4.4.4">subscript</csymbol><ci id="S3.E7.m1.4.4.4.4.2.cmml" xref="S3.E7.m1.4.4.4.4.2">ℒ</ci><list id="S3.E7.m1.4.4.4.2.2.3.cmml" xref="S3.E7.m1.4.4.4.2.2.4"><ci id="S3.E7.m1.3.3.3.1.1.1.cmml" xref="S3.E7.m1.3.3.3.1.1.1">𝑖</ci><ci id="S3.E7.m1.4.4.4.2.2.2.cmml" xref="S3.E7.m1.4.4.4.2.2.2">𝑗</ci></list></apply></apply></apply><apply id="S3.E7.m1.4.5.3.2.cmml" xref="S3.E7.m1.4.5.3.2"><apply id="S3.E7.m1.4.5.3.2.1.cmml" xref="S3.E7.m1.4.5.3.2.1"><csymbol cd="ambiguous" id="S3.E7.m1.4.5.3.2.1.1.cmml" xref="S3.E7.m1.4.5.3.2.1">superscript</csymbol><apply id="S3.E7.m1.4.5.3.2.1.2.cmml" xref="S3.E7.m1.4.5.3.2.1"><csymbol cd="ambiguous" id="S3.E7.m1.4.5.3.2.1.2.1.cmml" xref="S3.E7.m1.4.5.3.2.1">subscript</csymbol><sum id="S3.E7.m1.4.5.3.2.1.2.2.cmml" xref="S3.E7.m1.4.5.3.2.1.2.2"></sum><apply id="S3.E7.m1.4.5.3.2.1.2.3.cmml" xref="S3.E7.m1.4.5.3.2.1.2.3"><eq id="S3.E7.m1.4.5.3.2.1.2.3.1.cmml" xref="S3.E7.m1.4.5.3.2.1.2.3.1"></eq><ci id="S3.E7.m1.4.5.3.2.1.2.3.2.cmml" xref="S3.E7.m1.4.5.3.2.1.2.3.2">𝑖</ci><cn type="integer" id="S3.E7.m1.4.5.3.2.1.2.3.3.cmml" xref="S3.E7.m1.4.5.3.2.1.2.3.3">1</cn></apply></apply><ci id="S3.E7.m1.4.5.3.2.1.3.cmml" xref="S3.E7.m1.4.5.3.2.1.3">𝑁</ci></apply><apply id="S3.E7.m1.4.5.3.2.2.cmml" xref="S3.E7.m1.4.5.3.2.2"><csymbol cd="ambiguous" id="S3.E7.m1.4.5.3.2.2.1.cmml" xref="S3.E7.m1.4.5.3.2.2">subscript</csymbol><ci id="S3.E7.m1.4.5.3.2.2.2.cmml" xref="S3.E7.m1.4.5.3.2.2.2">𝑍</ci><ci id="S3.E7.m1.4.5.3.2.2.3.cmml" xref="S3.E7.m1.4.5.3.2.2.3">𝑖</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E7.m1.4c">Z_{g}=\frac{\mathcal{L}_{i,j}}{\sum_{j=0}^{N}\mathcal{L}_{i,j}}\sum_{i=1}^{N}Z_{i}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
<p id="S3.SS3.p8.3" class="ltx_p">where <math id="S3.SS3.p8.1.m1.2" class="ltx_Math" alttext="\mathcal{L}_{i,j}" display="inline"><semantics id="S3.SS3.p8.1.m1.2a"><msub id="S3.SS3.p8.1.m1.2.3" xref="S3.SS3.p8.1.m1.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS3.p8.1.m1.2.3.2" xref="S3.SS3.p8.1.m1.2.3.2.cmml">ℒ</mi><mrow id="S3.SS3.p8.1.m1.2.2.2.4" xref="S3.SS3.p8.1.m1.2.2.2.3.cmml"><mi id="S3.SS3.p8.1.m1.1.1.1.1" xref="S3.SS3.p8.1.m1.1.1.1.1.cmml">i</mi><mo id="S3.SS3.p8.1.m1.2.2.2.4.1" xref="S3.SS3.p8.1.m1.2.2.2.3.cmml">,</mo><mi id="S3.SS3.p8.1.m1.2.2.2.2" xref="S3.SS3.p8.1.m1.2.2.2.2.cmml">j</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.SS3.p8.1.m1.2b"><apply id="S3.SS3.p8.1.m1.2.3.cmml" xref="S3.SS3.p8.1.m1.2.3"><csymbol cd="ambiguous" id="S3.SS3.p8.1.m1.2.3.1.cmml" xref="S3.SS3.p8.1.m1.2.3">subscript</csymbol><ci id="S3.SS3.p8.1.m1.2.3.2.cmml" xref="S3.SS3.p8.1.m1.2.3.2">ℒ</ci><list id="S3.SS3.p8.1.m1.2.2.2.3.cmml" xref="S3.SS3.p8.1.m1.2.2.2.4"><ci id="S3.SS3.p8.1.m1.1.1.1.1.cmml" xref="S3.SS3.p8.1.m1.1.1.1.1">𝑖</ci><ci id="S3.SS3.p8.1.m1.2.2.2.2.cmml" xref="S3.SS3.p8.1.m1.2.2.2.2">𝑗</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p8.1.m1.2c">\mathcal{L}_{i,j}</annotation></semantics></math> denotes the loss on the dataset of client <math id="S3.SS3.p8.2.m2.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS3.p8.2.m2.1a"><mi id="S3.SS3.p8.2.m2.1.1" xref="S3.SS3.p8.2.m2.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p8.2.m2.1b"><ci id="S3.SS3.p8.2.m2.1.1.cmml" xref="S3.SS3.p8.2.m2.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p8.2.m2.1c">j</annotation></semantics></math> in communication round <math id="S3.SS3.p8.3.m3.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p8.3.m3.1a"><mi id="S3.SS3.p8.3.m3.1.1" xref="S3.SS3.p8.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p8.3.m3.1b"><ci id="S3.SS3.p8.3.m3.1.1.cmml" xref="S3.SS3.p8.3.m3.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p8.3.m3.1c">i</annotation></semantics></math>.</p>
</div>
<figure id="S3.F4" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F4.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x6.png" id="S3.F4.sf1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F4.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S3.F4.sf1.3.2" class="ltx_text" style="font-size:90%;">Food101</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F4.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x7.png" id="S3.F4.sf2.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F4.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S3.F4.sf2.3.2" class="ltx_text" style="font-size:90%;">UCF101</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F4.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x8.png" id="S3.F4.sf3.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F4.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="S3.F4.sf3.3.2" class="ltx_text" style="font-size:90%;">EuroSAT</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S3.F4.4.2.1" class="ltx_text" style="font-size:90%;">Figure 4</span>: </span><span id="S3.F4.2.1" class="ltx_text" style="font-size:90%;">Average accuracy on different datasets at different non-iid <math id="S3.F4.2.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S3.F4.2.1.m1.1b"><mi id="S3.F4.2.1.m1.1.1" xref="S3.F4.2.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S3.F4.2.1.m1.1c"><ci id="S3.F4.2.1.m1.1.1.cmml" xref="S3.F4.2.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.F4.2.1.m1.1d">\alpha</annotation></semantics></math></span></figcaption>
</figure>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span><span id="S4.1.1" class="ltx_text ltx_font_smallcaps">Experiments</span>
</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">In this section, we conduct comprehensive experiments compared to SOTA baselines to verify the effectiveness of FedMS under different settings.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span><span id="S4.SS1.1.1" class="ltx_text ltx_font_italic">Experiments set up</span>
</h3>

<section id="S4.SS1.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.1.1 </span>Datasets</h4>

<div id="S4.SS1.SSS1.p1" class="ltx_para">
<p id="S4.SS1.SSS1.p1.1" class="ltx_p">We select some representative datasets that are widely used in the image classification task of the CLIP model. Specifically, we select Food101<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite> which is a food classification dataset containing 101 classes, EuroSAT<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite> which is a dataset for land use and land cover classification containing 10 classes, and UCF101<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite> which is a dataset for human actions classification in the wild containing 101 classes.</p>
</div>
</section>
<section id="S4.SS1.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.1.2 </span>Baselines</h4>

<div id="S4.SS1.SSS2.p1" class="ltx_para">
<p id="S4.SS1.SSS2.p1.1" class="ltx_p">To verify the effectiveness of the proposed FedMS algorithm, we compare image classification accuracy with the following state-of-the-art baselines.</p>
</div>
<div id="S4.SS1.SSS2.p2" class="ltx_para">
<ul id="S4.I1" class="ltx_itemize">
<li id="S4.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S4.I1.i1.p1" class="ltx_para">
<p id="S4.I1.i1.p1.1" class="ltx_p"><span id="S4.I1.i1.p1.1.1" class="ltx_text ltx_font_italic">Vanilla Fine-Tuning (FT)</span>: This is one of the most representative fin-tuning algorithms used in natural language processing and computer vision areas<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>.</p>
</div>
</li>
<li id="S4.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S4.I1.i2.p1" class="ltx_para">
<p id="S4.I1.i2.p1.1" class="ltx_p"><span id="S4.I1.i2.p1.1.1" class="ltx_text ltx_font_italic">PromptFL<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite></span>: This algorithm does prompt tuning instead of tuning the parameters of FM. prompts from different clients are aggregated in every communication round.</p>
</div>
</li>
<li id="S4.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S4.I1.i3.p1" class="ltx_para">
<p id="S4.I1.i3.p1.1" class="ltx_p"><span id="S4.I1.i3.p1.1.1" class="ltx_text ltx_font_italic">LayerFreeze Fine-Tuning (LFFT)</span>: This algorithm freezes several layers in FMs, and only the activated layers will be aggregated in every communication round to save communication and computation resources.</p>
</div>
</li>
</ul>
</div>
<figure id="S4.F5" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F5.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x9.png" id="S4.F5.sf1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F5.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S4.F5.sf1.3.2" class="ltx_text" style="font-size:90%;">Food101</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F5.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x10.png" id="S4.F5.sf2.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F5.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S4.F5.sf2.3.2" class="ltx_text" style="font-size:90%;">UCF101</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F5.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x11.png" id="S4.F5.sf3.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F5.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="S4.F5.sf3.3.2" class="ltx_text" style="font-size:90%;">EuroSAT</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F5.2.1.1" class="ltx_text" style="font-size:90%;">Figure 5</span>: </span><span id="S4.F5.3.2" class="ltx_text" style="font-size:90%;">Average accuracy on different datasets under different number of clients</span></figcaption>
</figure>
<figure id="S4.F8" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F8.1" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" style="width:138.8pt;"><img src="/html/2312.15926/assets/x12.png" id="S4.F8.1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F8.1.1.1.1" class="ltx_text" style="font-size:90%;">Figure 6</span>: </span><span id="S4.F8.1.2.2" class="ltx_text" style="font-size:90%;">Accuracy under different accuracy thresholds in capability queue</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F8.2" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" style="width:138.8pt;"><img src="/html/2312.15926/assets/x13.png" id="S4.F8.2.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F8.2.1.1.1" class="ltx_text" style="font-size:90%;">Figure 7</span>: </span><span id="S4.F8.2.2.2" class="ltx_text" style="font-size:90%;">Total communication time at different bandwidths</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F8.3" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" style="width:138.8pt;"><img src="/html/2312.15926/assets/x14.png" id="S4.F8.3.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F8.3.1.1.1" class="ltx_text" style="font-size:90%;">Figure 8</span>: </span><span id="S4.F8.3.2.2" class="ltx_text" style="font-size:90%;">Accuracy under backdoor attacks</span></figcaption>
</figure>
</div>
</div>
</figure>
</section>
<section id="S4.SS1.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.1.3 </span>Default training settings</h4>

<div id="S4.SS1.SSS3.p1" class="ltx_para">
<p id="S4.SS1.SSS3.p1.4" class="ltx_p">We set the backbone of the visual encoder of CLIP to be ViT-B/16. The batch size is set to be 512. The learning rate is set to be <math id="S4.SS1.SSS3.p1.1.m1.1" class="ltx_Math" alttext="2e^{-4}" display="inline"><semantics id="S4.SS1.SSS3.p1.1.m1.1a"><mrow id="S4.SS1.SSS3.p1.1.m1.1.1" xref="S4.SS1.SSS3.p1.1.m1.1.1.cmml"><mn id="S4.SS1.SSS3.p1.1.m1.1.1.2" xref="S4.SS1.SSS3.p1.1.m1.1.1.2.cmml">2</mn><mo lspace="0em" rspace="0em" id="S4.SS1.SSS3.p1.1.m1.1.1.1" xref="S4.SS1.SSS3.p1.1.m1.1.1.1.cmml">​</mo><msup id="S4.SS1.SSS3.p1.1.m1.1.1.3" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.cmml"><mi id="S4.SS1.SSS3.p1.1.m1.1.1.3.2" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.2.cmml">e</mi><mrow id="S4.SS1.SSS3.p1.1.m1.1.1.3.3" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.3.cmml"><mo id="S4.SS1.SSS3.p1.1.m1.1.1.3.3a" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.3.cmml">−</mo><mn id="S4.SS1.SSS3.p1.1.m1.1.1.3.3.2" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.3.2.cmml">4</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS3.p1.1.m1.1b"><apply id="S4.SS1.SSS3.p1.1.m1.1.1.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1"><times id="S4.SS1.SSS3.p1.1.m1.1.1.1.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1.1"></times><cn type="integer" id="S4.SS1.SSS3.p1.1.m1.1.1.2.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1.2">2</cn><apply id="S4.SS1.SSS3.p1.1.m1.1.1.3.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.SS1.SSS3.p1.1.m1.1.1.3.1.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1.3">superscript</csymbol><ci id="S4.SS1.SSS3.p1.1.m1.1.1.3.2.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.2">𝑒</ci><apply id="S4.SS1.SSS3.p1.1.m1.1.1.3.3.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.3"><minus id="S4.SS1.SSS3.p1.1.m1.1.1.3.3.1.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.3"></minus><cn type="integer" id="S4.SS1.SSS3.p1.1.m1.1.1.3.3.2.cmml" xref="S4.SS1.SSS3.p1.1.m1.1.1.3.3.2">4</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS3.p1.1.m1.1c">2e^{-4}</annotation></semantics></math>. The optimizer is set to be Adam, with <math id="S4.SS1.SSS3.p1.2.m2.1" class="ltx_Math" alttext="\beta_{1}=0.9" display="inline"><semantics id="S4.SS1.SSS3.p1.2.m2.1a"><mrow id="S4.SS1.SSS3.p1.2.m2.1.1" xref="S4.SS1.SSS3.p1.2.m2.1.1.cmml"><msub id="S4.SS1.SSS3.p1.2.m2.1.1.2" xref="S4.SS1.SSS3.p1.2.m2.1.1.2.cmml"><mi id="S4.SS1.SSS3.p1.2.m2.1.1.2.2" xref="S4.SS1.SSS3.p1.2.m2.1.1.2.2.cmml">β</mi><mn id="S4.SS1.SSS3.p1.2.m2.1.1.2.3" xref="S4.SS1.SSS3.p1.2.m2.1.1.2.3.cmml">1</mn></msub><mo id="S4.SS1.SSS3.p1.2.m2.1.1.1" xref="S4.SS1.SSS3.p1.2.m2.1.1.1.cmml">=</mo><mn id="S4.SS1.SSS3.p1.2.m2.1.1.3" xref="S4.SS1.SSS3.p1.2.m2.1.1.3.cmml">0.9</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS3.p1.2.m2.1b"><apply id="S4.SS1.SSS3.p1.2.m2.1.1.cmml" xref="S4.SS1.SSS3.p1.2.m2.1.1"><eq id="S4.SS1.SSS3.p1.2.m2.1.1.1.cmml" xref="S4.SS1.SSS3.p1.2.m2.1.1.1"></eq><apply id="S4.SS1.SSS3.p1.2.m2.1.1.2.cmml" xref="S4.SS1.SSS3.p1.2.m2.1.1.2"><csymbol cd="ambiguous" id="S4.SS1.SSS3.p1.2.m2.1.1.2.1.cmml" xref="S4.SS1.SSS3.p1.2.m2.1.1.2">subscript</csymbol><ci id="S4.SS1.SSS3.p1.2.m2.1.1.2.2.cmml" xref="S4.SS1.SSS3.p1.2.m2.1.1.2.2">𝛽</ci><cn type="integer" id="S4.SS1.SSS3.p1.2.m2.1.1.2.3.cmml" xref="S4.SS1.SSS3.p1.2.m2.1.1.2.3">1</cn></apply><cn type="float" id="S4.SS1.SSS3.p1.2.m2.1.1.3.cmml" xref="S4.SS1.SSS3.p1.2.m2.1.1.3">0.9</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS3.p1.2.m2.1c">\beta_{1}=0.9</annotation></semantics></math>, <math id="S4.SS1.SSS3.p1.3.m3.1" class="ltx_Math" alttext="\beta_{2}=0.98" display="inline"><semantics id="S4.SS1.SSS3.p1.3.m3.1a"><mrow id="S4.SS1.SSS3.p1.3.m3.1.1" xref="S4.SS1.SSS3.p1.3.m3.1.1.cmml"><msub id="S4.SS1.SSS3.p1.3.m3.1.1.2" xref="S4.SS1.SSS3.p1.3.m3.1.1.2.cmml"><mi id="S4.SS1.SSS3.p1.3.m3.1.1.2.2" xref="S4.SS1.SSS3.p1.3.m3.1.1.2.2.cmml">β</mi><mn id="S4.SS1.SSS3.p1.3.m3.1.1.2.3" xref="S4.SS1.SSS3.p1.3.m3.1.1.2.3.cmml">2</mn></msub><mo id="S4.SS1.SSS3.p1.3.m3.1.1.1" xref="S4.SS1.SSS3.p1.3.m3.1.1.1.cmml">=</mo><mn id="S4.SS1.SSS3.p1.3.m3.1.1.3" xref="S4.SS1.SSS3.p1.3.m3.1.1.3.cmml">0.98</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS3.p1.3.m3.1b"><apply id="S4.SS1.SSS3.p1.3.m3.1.1.cmml" xref="S4.SS1.SSS3.p1.3.m3.1.1"><eq id="S4.SS1.SSS3.p1.3.m3.1.1.1.cmml" xref="S4.SS1.SSS3.p1.3.m3.1.1.1"></eq><apply id="S4.SS1.SSS3.p1.3.m3.1.1.2.cmml" xref="S4.SS1.SSS3.p1.3.m3.1.1.2"><csymbol cd="ambiguous" id="S4.SS1.SSS3.p1.3.m3.1.1.2.1.cmml" xref="S4.SS1.SSS3.p1.3.m3.1.1.2">subscript</csymbol><ci id="S4.SS1.SSS3.p1.3.m3.1.1.2.2.cmml" xref="S4.SS1.SSS3.p1.3.m3.1.1.2.2">𝛽</ci><cn type="integer" id="S4.SS1.SSS3.p1.3.m3.1.1.2.3.cmml" xref="S4.SS1.SSS3.p1.3.m3.1.1.2.3">2</cn></apply><cn type="float" id="S4.SS1.SSS3.p1.3.m3.1.1.3.cmml" xref="S4.SS1.SSS3.p1.3.m3.1.1.3">0.98</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS3.p1.3.m3.1c">\beta_{2}=0.98</annotation></semantics></math>, <math id="S4.SS1.SSS3.p1.4.m4.1" class="ltx_Math" alttext="\epsilon=1e^{-6}" display="inline"><semantics id="S4.SS1.SSS3.p1.4.m4.1a"><mrow id="S4.SS1.SSS3.p1.4.m4.1.1" xref="S4.SS1.SSS3.p1.4.m4.1.1.cmml"><mi id="S4.SS1.SSS3.p1.4.m4.1.1.2" xref="S4.SS1.SSS3.p1.4.m4.1.1.2.cmml">ϵ</mi><mo id="S4.SS1.SSS3.p1.4.m4.1.1.1" xref="S4.SS1.SSS3.p1.4.m4.1.1.1.cmml">=</mo><mrow id="S4.SS1.SSS3.p1.4.m4.1.1.3" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.cmml"><mn id="S4.SS1.SSS3.p1.4.m4.1.1.3.2" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.2.cmml">1</mn><mo lspace="0em" rspace="0em" id="S4.SS1.SSS3.p1.4.m4.1.1.3.1" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.1.cmml">​</mo><msup id="S4.SS1.SSS3.p1.4.m4.1.1.3.3" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.cmml"><mi id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.2" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.2.cmml">e</mi><mrow id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3.cmml"><mo id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3a" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3.cmml">−</mo><mn id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3.2" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3.2.cmml">6</mn></mrow></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS1.SSS3.p1.4.m4.1b"><apply id="S4.SS1.SSS3.p1.4.m4.1.1.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1"><eq id="S4.SS1.SSS3.p1.4.m4.1.1.1.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.1"></eq><ci id="S4.SS1.SSS3.p1.4.m4.1.1.2.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.2">italic-ϵ</ci><apply id="S4.SS1.SSS3.p1.4.m4.1.1.3.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3"><times id="S4.SS1.SSS3.p1.4.m4.1.1.3.1.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.1"></times><cn type="integer" id="S4.SS1.SSS3.p1.4.m4.1.1.3.2.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.2">1</cn><apply id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3"><csymbol cd="ambiguous" id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.1.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3">superscript</csymbol><ci id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.2.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.2">𝑒</ci><apply id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3"><minus id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3.1.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3"></minus><cn type="integer" id="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3.2.cmml" xref="S4.SS1.SSS3.p1.4.m4.1.1.3.3.3.2">6</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.SSS3.p1.4.m4.1c">\epsilon=1e^{-6}</annotation></semantics></math>, and weight decay to be 0.05. The number of clients is set to be 10. The rank of the inserted low-rank decomposition matrices is set to 1,
The dropout probability of the inserted low-rank decomposition matrices is set to 0.1. The number of communication rounds of training stage one is set to 25 and the number of communication rounds of training stage two is set to 25.</p>
</div>
</section>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span><span id="S4.SS2.1.1" class="ltx_text ltx_font_italic">Results Comparisons</span>
</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.2" class="ltx_p">We assume the non-iid data partition in FL to follow the Dirichlet distribution <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib30" title="" class="ltx_ref">30</a>]</cite>. The <math id="S4.SS2.p1.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p1.1.m1.1a"><mi id="S4.SS2.p1.1.m1.1.1" xref="S4.SS2.p1.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1b"><ci id="S4.SS2.p1.1.m1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1c">\alpha</annotation></semantics></math> parameter in Dirichlet distribution represents the degree of heterogeneity. The smaller the <math id="S4.SS2.p1.2.m2.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p1.2.m2.1a"><mi id="S4.SS2.p1.2.m2.1.1" xref="S4.SS2.p1.2.m2.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p1.2.m2.1b"><ci id="S4.SS2.p1.2.m2.1.1.cmml" xref="S4.SS2.p1.2.m2.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p1.2.m2.1c">\alpha</annotation></semantics></math>, the more non-iid the data distributed in the clients will be.
We test the image classification accuracy of various datasets in different non-iid levels.</p>
</div>
<section id="S4.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.2.1 </span>Impact of different system settings</h4>

<div id="S4.SS2.SSS1.p1" class="ltx_para">
<p id="S4.SS2.SSS1.p1.8" class="ltx_p"><span id="S4.SS2.SSS1.p1.8.1" class="ltx_text ltx_font_bold">Impact of degrees of data heterogeneity.</span>
Fig. <a href="#S3.F4" title="Figure 4 ‣ 3.3 Mixture of Foundation Models ‣ 3 Design of FedMS ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> shows the image classification accuracy of Food101, UCF101, and EuroSAT datasets respectively, assuming different degrees of data heterogeneity. Specifically, we set the <math id="S4.SS2.SSS1.p1.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.SSS1.p1.1.m1.1a"><mi id="S4.SS2.SSS1.p1.1.m1.1.1" xref="S4.SS2.SSS1.p1.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.1.m1.1b"><ci id="S4.SS2.SSS1.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS1.p1.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.1.m1.1c">\alpha</annotation></semantics></math> to be 0.1, 1, and 10. From the results, we can find that FedMS achieves the highest accuracy among the four algorithms in all cases. FedMS has surpassed the average accuracy of FT, PromptFL, and LFFT in all datasets by <math id="S4.SS2.SSS1.p1.2.m2.2" class="ltx_Math" alttext="20.57\%,30.06\%" display="inline"><semantics id="S4.SS2.SSS1.p1.2.m2.2a"><mrow id="S4.SS2.SSS1.p1.2.m2.2.2.2" xref="S4.SS2.SSS1.p1.2.m2.2.2.3.cmml"><mrow id="S4.SS2.SSS1.p1.2.m2.1.1.1.1" xref="S4.SS2.SSS1.p1.2.m2.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p1.2.m2.1.1.1.1.2" xref="S4.SS2.SSS1.p1.2.m2.1.1.1.1.2.cmml">20.57</mn><mo id="S4.SS2.SSS1.p1.2.m2.1.1.1.1.1" xref="S4.SS2.SSS1.p1.2.m2.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p1.2.m2.2.2.2.3" xref="S4.SS2.SSS1.p1.2.m2.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p1.2.m2.2.2.2.2" xref="S4.SS2.SSS1.p1.2.m2.2.2.2.2.cmml"><mn id="S4.SS2.SSS1.p1.2.m2.2.2.2.2.2" xref="S4.SS2.SSS1.p1.2.m2.2.2.2.2.2.cmml">30.06</mn><mo id="S4.SS2.SSS1.p1.2.m2.2.2.2.2.1" xref="S4.SS2.SSS1.p1.2.m2.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.2.m2.2b"><list id="S4.SS2.SSS1.p1.2.m2.2.2.3.cmml" xref="S4.SS2.SSS1.p1.2.m2.2.2.2"><apply id="S4.SS2.SSS1.p1.2.m2.1.1.1.1.cmml" xref="S4.SS2.SSS1.p1.2.m2.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.2.m2.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p1.2.m2.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.2.m2.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p1.2.m2.1.1.1.1.2">20.57</cn></apply><apply id="S4.SS2.SSS1.p1.2.m2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p1.2.m2.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.2.m2.2.2.2.2.1.cmml" xref="S4.SS2.SSS1.p1.2.m2.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.2.m2.2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p1.2.m2.2.2.2.2.2">30.06</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.2.m2.2c">20.57\%,30.06\%</annotation></semantics></math>, and <math id="S4.SS2.SSS1.p1.3.m3.1" class="ltx_Math" alttext="11.17\%" display="inline"><semantics id="S4.SS2.SSS1.p1.3.m3.1a"><mrow id="S4.SS2.SSS1.p1.3.m3.1.1" xref="S4.SS2.SSS1.p1.3.m3.1.1.cmml"><mn id="S4.SS2.SSS1.p1.3.m3.1.1.2" xref="S4.SS2.SSS1.p1.3.m3.1.1.2.cmml">11.17</mn><mo id="S4.SS2.SSS1.p1.3.m3.1.1.1" xref="S4.SS2.SSS1.p1.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.3.m3.1b"><apply id="S4.SS2.SSS1.p1.3.m3.1.1.cmml" xref="S4.SS2.SSS1.p1.3.m3.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.3.m3.1.1.1.cmml" xref="S4.SS2.SSS1.p1.3.m3.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.3.m3.1.1.2.cmml" xref="S4.SS2.SSS1.p1.3.m3.1.1.2">11.17</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.3.m3.1c">11.17\%</annotation></semantics></math> respectively. Our method has a minimum accuracy gain of <math id="S4.SS2.SSS1.p1.4.m4.2" class="ltx_Math" alttext="6.36\%,14.43\%" display="inline"><semantics id="S4.SS2.SSS1.p1.4.m4.2a"><mrow id="S4.SS2.SSS1.p1.4.m4.2.2.2" xref="S4.SS2.SSS1.p1.4.m4.2.2.3.cmml"><mrow id="S4.SS2.SSS1.p1.4.m4.1.1.1.1" xref="S4.SS2.SSS1.p1.4.m4.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p1.4.m4.1.1.1.1.2" xref="S4.SS2.SSS1.p1.4.m4.1.1.1.1.2.cmml">6.36</mn><mo id="S4.SS2.SSS1.p1.4.m4.1.1.1.1.1" xref="S4.SS2.SSS1.p1.4.m4.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p1.4.m4.2.2.2.3" xref="S4.SS2.SSS1.p1.4.m4.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p1.4.m4.2.2.2.2" xref="S4.SS2.SSS1.p1.4.m4.2.2.2.2.cmml"><mn id="S4.SS2.SSS1.p1.4.m4.2.2.2.2.2" xref="S4.SS2.SSS1.p1.4.m4.2.2.2.2.2.cmml">14.43</mn><mo id="S4.SS2.SSS1.p1.4.m4.2.2.2.2.1" xref="S4.SS2.SSS1.p1.4.m4.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.4.m4.2b"><list id="S4.SS2.SSS1.p1.4.m4.2.2.3.cmml" xref="S4.SS2.SSS1.p1.4.m4.2.2.2"><apply id="S4.SS2.SSS1.p1.4.m4.1.1.1.1.cmml" xref="S4.SS2.SSS1.p1.4.m4.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.4.m4.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p1.4.m4.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.4.m4.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p1.4.m4.1.1.1.1.2">6.36</cn></apply><apply id="S4.SS2.SSS1.p1.4.m4.2.2.2.2.cmml" xref="S4.SS2.SSS1.p1.4.m4.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.4.m4.2.2.2.2.1.cmml" xref="S4.SS2.SSS1.p1.4.m4.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.4.m4.2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p1.4.m4.2.2.2.2.2">14.43</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.4.m4.2c">6.36\%,14.43\%</annotation></semantics></math>, and <math id="S4.SS2.SSS1.p1.5.m5.1" class="ltx_Math" alttext="12.71\%" display="inline"><semantics id="S4.SS2.SSS1.p1.5.m5.1a"><mrow id="S4.SS2.SSS1.p1.5.m5.1.1" xref="S4.SS2.SSS1.p1.5.m5.1.1.cmml"><mn id="S4.SS2.SSS1.p1.5.m5.1.1.2" xref="S4.SS2.SSS1.p1.5.m5.1.1.2.cmml">12.71</mn><mo id="S4.SS2.SSS1.p1.5.m5.1.1.1" xref="S4.SS2.SSS1.p1.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.5.m5.1b"><apply id="S4.SS2.SSS1.p1.5.m5.1.1.cmml" xref="S4.SS2.SSS1.p1.5.m5.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.5.m5.1.1.1.cmml" xref="S4.SS2.SSS1.p1.5.m5.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.5.m5.1.1.2.cmml" xref="S4.SS2.SSS1.p1.5.m5.1.1.2">12.71</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.5.m5.1c">12.71\%</annotation></semantics></math> and a maximum accuracy gain of <math id="S4.SS2.SSS1.p1.6.m6.2" class="ltx_Math" alttext="9.62\%,23.82\%" display="inline"><semantics id="S4.SS2.SSS1.p1.6.m6.2a"><mrow id="S4.SS2.SSS1.p1.6.m6.2.2.2" xref="S4.SS2.SSS1.p1.6.m6.2.2.3.cmml"><mrow id="S4.SS2.SSS1.p1.6.m6.1.1.1.1" xref="S4.SS2.SSS1.p1.6.m6.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p1.6.m6.1.1.1.1.2" xref="S4.SS2.SSS1.p1.6.m6.1.1.1.1.2.cmml">9.62</mn><mo id="S4.SS2.SSS1.p1.6.m6.1.1.1.1.1" xref="S4.SS2.SSS1.p1.6.m6.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p1.6.m6.2.2.2.3" xref="S4.SS2.SSS1.p1.6.m6.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p1.6.m6.2.2.2.2" xref="S4.SS2.SSS1.p1.6.m6.2.2.2.2.cmml"><mn id="S4.SS2.SSS1.p1.6.m6.2.2.2.2.2" xref="S4.SS2.SSS1.p1.6.m6.2.2.2.2.2.cmml">23.82</mn><mo id="S4.SS2.SSS1.p1.6.m6.2.2.2.2.1" xref="S4.SS2.SSS1.p1.6.m6.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.6.m6.2b"><list id="S4.SS2.SSS1.p1.6.m6.2.2.3.cmml" xref="S4.SS2.SSS1.p1.6.m6.2.2.2"><apply id="S4.SS2.SSS1.p1.6.m6.1.1.1.1.cmml" xref="S4.SS2.SSS1.p1.6.m6.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.6.m6.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p1.6.m6.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.6.m6.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p1.6.m6.1.1.1.1.2">9.62</cn></apply><apply id="S4.SS2.SSS1.p1.6.m6.2.2.2.2.cmml" xref="S4.SS2.SSS1.p1.6.m6.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.6.m6.2.2.2.2.1.cmml" xref="S4.SS2.SSS1.p1.6.m6.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.6.m6.2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p1.6.m6.2.2.2.2.2">23.82</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.6.m6.2c">9.62\%,23.82\%</annotation></semantics></math>, and <math id="S4.SS2.SSS1.p1.7.m7.1" class="ltx_Math" alttext="59.21\%" display="inline"><semantics id="S4.SS2.SSS1.p1.7.m7.1a"><mrow id="S4.SS2.SSS1.p1.7.m7.1.1" xref="S4.SS2.SSS1.p1.7.m7.1.1.cmml"><mn id="S4.SS2.SSS1.p1.7.m7.1.1.2" xref="S4.SS2.SSS1.p1.7.m7.1.1.2.cmml">59.21</mn><mo id="S4.SS2.SSS1.p1.7.m7.1.1.1" xref="S4.SS2.SSS1.p1.7.m7.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.7.m7.1b"><apply id="S4.SS2.SSS1.p1.7.m7.1.1.cmml" xref="S4.SS2.SSS1.p1.7.m7.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p1.7.m7.1.1.1.cmml" xref="S4.SS2.SSS1.p1.7.m7.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p1.7.m7.1.1.2.cmml" xref="S4.SS2.SSS1.p1.7.m7.1.1.2">59.21</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.7.m7.1c">59.21\%</annotation></semantics></math> on Food101, UCF101, and EuroSAT datasets respectively compared to other baselines when <math id="S4.SS2.SSS1.p1.8.m8.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.SSS1.p1.8.m8.1a"><mi id="S4.SS2.SSS1.p1.8.m8.1.1" xref="S4.SS2.SSS1.p1.8.m8.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p1.8.m8.1b"><ci id="S4.SS2.SSS1.p1.8.m8.1.1.cmml" xref="S4.SS2.SSS1.p1.8.m8.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p1.8.m8.1c">\alpha</annotation></semantics></math> is set to 1.</p>
</div>
<div id="S4.SS2.SSS1.p2" class="ltx_para">
<p id="S4.SS2.SSS1.p2.8" class="ltx_p">By observing the accuracy at different data heterogeneity levels, we can find that the performance of these algorithms does not always follow a positive correlation relationship with the data heterogeneity level. On Food101 and UCF101 datasets, the accuracy of FedMS when <math id="S4.SS2.SSS1.p2.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.SSS1.p2.1.m1.1a"><mi id="S4.SS2.SSS1.p2.1.m1.1.1" xref="S4.SS2.SSS1.p2.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p2.1.m1.1b"><ci id="S4.SS2.SSS1.p2.1.m1.1.1.cmml" xref="S4.SS2.SSS1.p2.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p2.1.m1.1c">\alpha</annotation></semantics></math> is 10 has an increase of <math id="S4.SS2.SSS1.p2.2.m2.1" class="ltx_Math" alttext="0.24\%" display="inline"><semantics id="S4.SS2.SSS1.p2.2.m2.1a"><mrow id="S4.SS2.SSS1.p2.2.m2.1.1" xref="S4.SS2.SSS1.p2.2.m2.1.1.cmml"><mn id="S4.SS2.SSS1.p2.2.m2.1.1.2" xref="S4.SS2.SSS1.p2.2.m2.1.1.2.cmml">0.24</mn><mo id="S4.SS2.SSS1.p2.2.m2.1.1.1" xref="S4.SS2.SSS1.p2.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p2.2.m2.1b"><apply id="S4.SS2.SSS1.p2.2.m2.1.1.cmml" xref="S4.SS2.SSS1.p2.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p2.2.m2.1.1.1.cmml" xref="S4.SS2.SSS1.p2.2.m2.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p2.2.m2.1.1.2.cmml" xref="S4.SS2.SSS1.p2.2.m2.1.1.2">0.24</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p2.2.m2.1c">0.24\%</annotation></semantics></math> and <math id="S4.SS2.SSS1.p2.3.m3.1" class="ltx_Math" alttext="0.15\%" display="inline"><semantics id="S4.SS2.SSS1.p2.3.m3.1a"><mrow id="S4.SS2.SSS1.p2.3.m3.1.1" xref="S4.SS2.SSS1.p2.3.m3.1.1.cmml"><mn id="S4.SS2.SSS1.p2.3.m3.1.1.2" xref="S4.SS2.SSS1.p2.3.m3.1.1.2.cmml">0.15</mn><mo id="S4.SS2.SSS1.p2.3.m3.1.1.1" xref="S4.SS2.SSS1.p2.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p2.3.m3.1b"><apply id="S4.SS2.SSS1.p2.3.m3.1.1.cmml" xref="S4.SS2.SSS1.p2.3.m3.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p2.3.m3.1.1.1.cmml" xref="S4.SS2.SSS1.p2.3.m3.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p2.3.m3.1.1.2.cmml" xref="S4.SS2.SSS1.p2.3.m3.1.1.2">0.15</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p2.3.m3.1c">0.15\%</annotation></semantics></math> compared to the case when <math id="S4.SS2.SSS1.p2.4.m4.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.SSS1.p2.4.m4.1a"><mi id="S4.SS2.SSS1.p2.4.m4.1.1" xref="S4.SS2.SSS1.p2.4.m4.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p2.4.m4.1b"><ci id="S4.SS2.SSS1.p2.4.m4.1.1.cmml" xref="S4.SS2.SSS1.p2.4.m4.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p2.4.m4.1c">\alpha</annotation></semantics></math> is 0.1. On the EuroSAT dataset, FedMS has an accuracy of <math id="S4.SS2.SSS1.p2.5.m5.1" class="ltx_Math" alttext="99.46\%" display="inline"><semantics id="S4.SS2.SSS1.p2.5.m5.1a"><mrow id="S4.SS2.SSS1.p2.5.m5.1.1" xref="S4.SS2.SSS1.p2.5.m5.1.1.cmml"><mn id="S4.SS2.SSS1.p2.5.m5.1.1.2" xref="S4.SS2.SSS1.p2.5.m5.1.1.2.cmml">99.46</mn><mo id="S4.SS2.SSS1.p2.5.m5.1.1.1" xref="S4.SS2.SSS1.p2.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p2.5.m5.1b"><apply id="S4.SS2.SSS1.p2.5.m5.1.1.cmml" xref="S4.SS2.SSS1.p2.5.m5.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p2.5.m5.1.1.1.cmml" xref="S4.SS2.SSS1.p2.5.m5.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p2.5.m5.1.1.2.cmml" xref="S4.SS2.SSS1.p2.5.m5.1.1.2">99.46</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p2.5.m5.1c">99.46\%</annotation></semantics></math> when <math id="S4.SS2.SSS1.p2.6.m6.1" class="ltx_Math" alttext="\alpha=1" display="inline"><semantics id="S4.SS2.SSS1.p2.6.m6.1a"><mrow id="S4.SS2.SSS1.p2.6.m6.1.1" xref="S4.SS2.SSS1.p2.6.m6.1.1.cmml"><mi id="S4.SS2.SSS1.p2.6.m6.1.1.2" xref="S4.SS2.SSS1.p2.6.m6.1.1.2.cmml">α</mi><mo id="S4.SS2.SSS1.p2.6.m6.1.1.1" xref="S4.SS2.SSS1.p2.6.m6.1.1.1.cmml">=</mo><mn id="S4.SS2.SSS1.p2.6.m6.1.1.3" xref="S4.SS2.SSS1.p2.6.m6.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p2.6.m6.1b"><apply id="S4.SS2.SSS1.p2.6.m6.1.1.cmml" xref="S4.SS2.SSS1.p2.6.m6.1.1"><eq id="S4.SS2.SSS1.p2.6.m6.1.1.1.cmml" xref="S4.SS2.SSS1.p2.6.m6.1.1.1"></eq><ci id="S4.SS2.SSS1.p2.6.m6.1.1.2.cmml" xref="S4.SS2.SSS1.p2.6.m6.1.1.2">𝛼</ci><cn type="integer" id="S4.SS2.SSS1.p2.6.m6.1.1.3.cmml" xref="S4.SS2.SSS1.p2.6.m6.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p2.6.m6.1c">\alpha=1</annotation></semantics></math>, but has an accuracy of <math id="S4.SS2.SSS1.p2.7.m7.1" class="ltx_Math" alttext="97.67\%" display="inline"><semantics id="S4.SS2.SSS1.p2.7.m7.1a"><mrow id="S4.SS2.SSS1.p2.7.m7.1.1" xref="S4.SS2.SSS1.p2.7.m7.1.1.cmml"><mn id="S4.SS2.SSS1.p2.7.m7.1.1.2" xref="S4.SS2.SSS1.p2.7.m7.1.1.2.cmml">97.67</mn><mo id="S4.SS2.SSS1.p2.7.m7.1.1.1" xref="S4.SS2.SSS1.p2.7.m7.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p2.7.m7.1b"><apply id="S4.SS2.SSS1.p2.7.m7.1.1.cmml" xref="S4.SS2.SSS1.p2.7.m7.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p2.7.m7.1.1.1.cmml" xref="S4.SS2.SSS1.p2.7.m7.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p2.7.m7.1.1.2.cmml" xref="S4.SS2.SSS1.p2.7.m7.1.1.2">97.67</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p2.7.m7.1c">97.67\%</annotation></semantics></math> when <math id="S4.SS2.SSS1.p2.8.m8.1" class="ltx_Math" alttext="\alpha=10" display="inline"><semantics id="S4.SS2.SSS1.p2.8.m8.1a"><mrow id="S4.SS2.SSS1.p2.8.m8.1.1" xref="S4.SS2.SSS1.p2.8.m8.1.1.cmml"><mi id="S4.SS2.SSS1.p2.8.m8.1.1.2" xref="S4.SS2.SSS1.p2.8.m8.1.1.2.cmml">α</mi><mo id="S4.SS2.SSS1.p2.8.m8.1.1.1" xref="S4.SS2.SSS1.p2.8.m8.1.1.1.cmml">=</mo><mn id="S4.SS2.SSS1.p2.8.m8.1.1.3" xref="S4.SS2.SSS1.p2.8.m8.1.1.3.cmml">10</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p2.8.m8.1b"><apply id="S4.SS2.SSS1.p2.8.m8.1.1.cmml" xref="S4.SS2.SSS1.p2.8.m8.1.1"><eq id="S4.SS2.SSS1.p2.8.m8.1.1.1.cmml" xref="S4.SS2.SSS1.p2.8.m8.1.1.1"></eq><ci id="S4.SS2.SSS1.p2.8.m8.1.1.2.cmml" xref="S4.SS2.SSS1.p2.8.m8.1.1.2">𝛼</ci><cn type="integer" id="S4.SS2.SSS1.p2.8.m8.1.1.3.cmml" xref="S4.SS2.SSS1.p2.8.m8.1.1.3">10</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p2.8.m8.1c">\alpha=10</annotation></semantics></math>.</p>
</div>
<div id="S4.SS2.SSS1.p3" class="ltx_para">
<p id="S4.SS2.SSS1.p3.1" class="ltx_p">This is because higher data heterogeneity may lead to a smaller number of classes in clients’ local datasets. For example, a client’s local dataset may contain data from 10 classes at a low data heterogeneity level but may contain 3 classes at a high data heterogeneity level, which can lower the difficulty of identifying the right class given an image.</p>
</div>
<div id="S4.SS2.SSS1.p4" class="ltx_para">
<p id="S4.SS2.SSS1.p4.1" class="ltx_p"><span id="S4.SS2.SSS1.p4.1.1" class="ltx_text ltx_font_bold">Impact of number of clients.</span>
We test the performance of FedMS and other baselines under different number of clients. Specifically, we set the number of clients to 5, 10, and 15.</p>
</div>
<div id="S4.SS2.SSS1.p5" class="ltx_para">
<p id="S4.SS2.SSS1.p5.12" class="ltx_p">From Fig. <a href="#S4.F5" title="Figure 5 ‣ 4.1.2 Baselines ‣ 4.1 Experiments set up ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a> we can conclude that FedMS has the highest accuracy in different client number cases.
When the number of clients is 5, FedMS achieves the accuracy of <math id="S4.SS2.SSS1.p5.1.m1.2" class="ltx_Math" alttext="91.67\%,85.18\%" display="inline"><semantics id="S4.SS2.SSS1.p5.1.m1.2a"><mrow id="S4.SS2.SSS1.p5.1.m1.2.2.2" xref="S4.SS2.SSS1.p5.1.m1.2.2.3.cmml"><mrow id="S4.SS2.SSS1.p5.1.m1.1.1.1.1" xref="S4.SS2.SSS1.p5.1.m1.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p5.1.m1.1.1.1.1.2" xref="S4.SS2.SSS1.p5.1.m1.1.1.1.1.2.cmml">91.67</mn><mo id="S4.SS2.SSS1.p5.1.m1.1.1.1.1.1" xref="S4.SS2.SSS1.p5.1.m1.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p5.1.m1.2.2.2.3" xref="S4.SS2.SSS1.p5.1.m1.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p5.1.m1.2.2.2.2" xref="S4.SS2.SSS1.p5.1.m1.2.2.2.2.cmml"><mn id="S4.SS2.SSS1.p5.1.m1.2.2.2.2.2" xref="S4.SS2.SSS1.p5.1.m1.2.2.2.2.2.cmml">85.18</mn><mo id="S4.SS2.SSS1.p5.1.m1.2.2.2.2.1" xref="S4.SS2.SSS1.p5.1.m1.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.1.m1.2b"><list id="S4.SS2.SSS1.p5.1.m1.2.2.3.cmml" xref="S4.SS2.SSS1.p5.1.m1.2.2.2"><apply id="S4.SS2.SSS1.p5.1.m1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.1.m1.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.1.m1.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.1.m1.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.1.m1.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p5.1.m1.1.1.1.1.2">91.67</cn></apply><apply id="S4.SS2.SSS1.p5.1.m1.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.1.m1.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.1.m1.2.2.2.2.1.cmml" xref="S4.SS2.SSS1.p5.1.m1.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.1.m1.2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.1.m1.2.2.2.2.2">85.18</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.1.m1.2c">91.67\%,85.18\%</annotation></semantics></math>, and <math id="S4.SS2.SSS1.p5.2.m2.1" class="ltx_Math" alttext="98.51\%" display="inline"><semantics id="S4.SS2.SSS1.p5.2.m2.1a"><mrow id="S4.SS2.SSS1.p5.2.m2.1.1" xref="S4.SS2.SSS1.p5.2.m2.1.1.cmml"><mn id="S4.SS2.SSS1.p5.2.m2.1.1.2" xref="S4.SS2.SSS1.p5.2.m2.1.1.2.cmml">98.51</mn><mo id="S4.SS2.SSS1.p5.2.m2.1.1.1" xref="S4.SS2.SSS1.p5.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.2.m2.1b"><apply id="S4.SS2.SSS1.p5.2.m2.1.1.cmml" xref="S4.SS2.SSS1.p5.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.2.m2.1.1.1.cmml" xref="S4.SS2.SSS1.p5.2.m2.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.2.m2.1.1.2.cmml" xref="S4.SS2.SSS1.p5.2.m2.1.1.2">98.51</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.2.m2.1c">98.51\%</annotation></semantics></math> in Food101, UCF101, and EuroSAT datasets respectively while the best accuracy of the other three baselines in these three datasets are <math id="S4.SS2.SSS1.p5.3.m3.1" class="ltx_Math" alttext="87.56\%,77.15\%," display="inline"><semantics id="S4.SS2.SSS1.p5.3.m3.1a"><mrow id="S4.SS2.SSS1.p5.3.m3.1.1.1"><mrow id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.3.cmml"><mrow id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.2" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.2.cmml">87.56</mn><mo id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.1" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.3" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.cmml"><mn id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.2" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.2.cmml">77.15</mn><mo id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.1" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.1.cmml">%</mo></mrow></mrow><mo id="S4.SS2.SSS1.p5.3.m3.1.1.1.2">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.3.m3.1b"><list id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.3.cmml" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2"><apply id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.1.1.2">87.56</cn></apply><apply id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.cmml" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.1.cmml" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.2.cmml" xref="S4.SS2.SSS1.p5.3.m3.1.1.1.1.2.2.2">77.15</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.3.m3.1c">87.56\%,77.15\%,</annotation></semantics></math> and <math id="S4.SS2.SSS1.p5.4.m4.1" class="ltx_Math" alttext="90.40\%" display="inline"><semantics id="S4.SS2.SSS1.p5.4.m4.1a"><mrow id="S4.SS2.SSS1.p5.4.m4.1.1" xref="S4.SS2.SSS1.p5.4.m4.1.1.cmml"><mn id="S4.SS2.SSS1.p5.4.m4.1.1.2" xref="S4.SS2.SSS1.p5.4.m4.1.1.2.cmml">90.40</mn><mo id="S4.SS2.SSS1.p5.4.m4.1.1.1" xref="S4.SS2.SSS1.p5.4.m4.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.4.m4.1b"><apply id="S4.SS2.SSS1.p5.4.m4.1.1.cmml" xref="S4.SS2.SSS1.p5.4.m4.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.4.m4.1.1.1.cmml" xref="S4.SS2.SSS1.p5.4.m4.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.4.m4.1.1.2.cmml" xref="S4.SS2.SSS1.p5.4.m4.1.1.2">90.40</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.4.m4.1c">90.40\%</annotation></semantics></math>. FedMS suppresses the best performance of other baselines by <math id="S4.SS2.SSS1.p5.5.m5.2" class="ltx_Math" alttext="4.11\%,8.03\%" display="inline"><semantics id="S4.SS2.SSS1.p5.5.m5.2a"><mrow id="S4.SS2.SSS1.p5.5.m5.2.2.2" xref="S4.SS2.SSS1.p5.5.m5.2.2.3.cmml"><mrow id="S4.SS2.SSS1.p5.5.m5.1.1.1.1" xref="S4.SS2.SSS1.p5.5.m5.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p5.5.m5.1.1.1.1.2" xref="S4.SS2.SSS1.p5.5.m5.1.1.1.1.2.cmml">4.11</mn><mo id="S4.SS2.SSS1.p5.5.m5.1.1.1.1.1" xref="S4.SS2.SSS1.p5.5.m5.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p5.5.m5.2.2.2.3" xref="S4.SS2.SSS1.p5.5.m5.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p5.5.m5.2.2.2.2" xref="S4.SS2.SSS1.p5.5.m5.2.2.2.2.cmml"><mn id="S4.SS2.SSS1.p5.5.m5.2.2.2.2.2" xref="S4.SS2.SSS1.p5.5.m5.2.2.2.2.2.cmml">8.03</mn><mo id="S4.SS2.SSS1.p5.5.m5.2.2.2.2.1" xref="S4.SS2.SSS1.p5.5.m5.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.5.m5.2b"><list id="S4.SS2.SSS1.p5.5.m5.2.2.3.cmml" xref="S4.SS2.SSS1.p5.5.m5.2.2.2"><apply id="S4.SS2.SSS1.p5.5.m5.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.5.m5.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.5.m5.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.5.m5.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.5.m5.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p5.5.m5.1.1.1.1.2">4.11</cn></apply><apply id="S4.SS2.SSS1.p5.5.m5.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.5.m5.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.5.m5.2.2.2.2.1.cmml" xref="S4.SS2.SSS1.p5.5.m5.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.5.m5.2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.5.m5.2.2.2.2.2">8.03</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.5.m5.2c">4.11\%,8.03\%</annotation></semantics></math>, and <math id="S4.SS2.SSS1.p5.6.m6.1" class="ltx_Math" alttext="8.11\%" display="inline"><semantics id="S4.SS2.SSS1.p5.6.m6.1a"><mrow id="S4.SS2.SSS1.p5.6.m6.1.1" xref="S4.SS2.SSS1.p5.6.m6.1.1.cmml"><mn id="S4.SS2.SSS1.p5.6.m6.1.1.2" xref="S4.SS2.SSS1.p5.6.m6.1.1.2.cmml">8.11</mn><mo id="S4.SS2.SSS1.p5.6.m6.1.1.1" xref="S4.SS2.SSS1.p5.6.m6.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.6.m6.1b"><apply id="S4.SS2.SSS1.p5.6.m6.1.1.cmml" xref="S4.SS2.SSS1.p5.6.m6.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.6.m6.1.1.1.cmml" xref="S4.SS2.SSS1.p5.6.m6.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.6.m6.1.1.2.cmml" xref="S4.SS2.SSS1.p5.6.m6.1.1.2">8.11</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.6.m6.1c">8.11\%</annotation></semantics></math>.
In the case when there are 10 clients, FedMS has a maximum accuracy increase of <math id="S4.SS2.SSS1.p5.7.m7.2" class="ltx_Math" alttext="9.67\%,22.2\%" display="inline"><semantics id="S4.SS2.SSS1.p5.7.m7.2a"><mrow id="S4.SS2.SSS1.p5.7.m7.2.2.2" xref="S4.SS2.SSS1.p5.7.m7.2.2.3.cmml"><mrow id="S4.SS2.SSS1.p5.7.m7.1.1.1.1" xref="S4.SS2.SSS1.p5.7.m7.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p5.7.m7.1.1.1.1.2" xref="S4.SS2.SSS1.p5.7.m7.1.1.1.1.2.cmml">9.67</mn><mo id="S4.SS2.SSS1.p5.7.m7.1.1.1.1.1" xref="S4.SS2.SSS1.p5.7.m7.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p5.7.m7.2.2.2.3" xref="S4.SS2.SSS1.p5.7.m7.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p5.7.m7.2.2.2.2" xref="S4.SS2.SSS1.p5.7.m7.2.2.2.2.cmml"><mn id="S4.SS2.SSS1.p5.7.m7.2.2.2.2.2" xref="S4.SS2.SSS1.p5.7.m7.2.2.2.2.2.cmml">22.2</mn><mo id="S4.SS2.SSS1.p5.7.m7.2.2.2.2.1" xref="S4.SS2.SSS1.p5.7.m7.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.7.m7.2b"><list id="S4.SS2.SSS1.p5.7.m7.2.2.3.cmml" xref="S4.SS2.SSS1.p5.7.m7.2.2.2"><apply id="S4.SS2.SSS1.p5.7.m7.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.7.m7.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.7.m7.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.7.m7.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.7.m7.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p5.7.m7.1.1.1.1.2">9.67</cn></apply><apply id="S4.SS2.SSS1.p5.7.m7.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.7.m7.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.7.m7.2.2.2.2.1.cmml" xref="S4.SS2.SSS1.p5.7.m7.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.7.m7.2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.7.m7.2.2.2.2.2">22.2</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.7.m7.2c">9.67\%,22.2\%</annotation></semantics></math>, and <math id="S4.SS2.SSS1.p5.8.m8.1" class="ltx_Math" alttext="55.24\%" display="inline"><semantics id="S4.SS2.SSS1.p5.8.m8.1a"><mrow id="S4.SS2.SSS1.p5.8.m8.1.1" xref="S4.SS2.SSS1.p5.8.m8.1.1.cmml"><mn id="S4.SS2.SSS1.p5.8.m8.1.1.2" xref="S4.SS2.SSS1.p5.8.m8.1.1.2.cmml">55.24</mn><mo id="S4.SS2.SSS1.p5.8.m8.1.1.1" xref="S4.SS2.SSS1.p5.8.m8.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.8.m8.1b"><apply id="S4.SS2.SSS1.p5.8.m8.1.1.cmml" xref="S4.SS2.SSS1.p5.8.m8.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.8.m8.1.1.1.cmml" xref="S4.SS2.SSS1.p5.8.m8.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.8.m8.1.1.2.cmml" xref="S4.SS2.SSS1.p5.8.m8.1.1.2">55.24</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.8.m8.1c">55.24\%</annotation></semantics></math> compared to the three baselines.
When the number of clients reaches 15, the accuracy of FedMS is <math id="S4.SS2.SSS1.p5.9.m9.2" class="ltx_Math" alttext="89.31\%,77.31\%" display="inline"><semantics id="S4.SS2.SSS1.p5.9.m9.2a"><mrow id="S4.SS2.SSS1.p5.9.m9.2.2.2" xref="S4.SS2.SSS1.p5.9.m9.2.2.3.cmml"><mrow id="S4.SS2.SSS1.p5.9.m9.1.1.1.1" xref="S4.SS2.SSS1.p5.9.m9.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p5.9.m9.1.1.1.1.2" xref="S4.SS2.SSS1.p5.9.m9.1.1.1.1.2.cmml">89.31</mn><mo id="S4.SS2.SSS1.p5.9.m9.1.1.1.1.1" xref="S4.SS2.SSS1.p5.9.m9.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p5.9.m9.2.2.2.3" xref="S4.SS2.SSS1.p5.9.m9.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p5.9.m9.2.2.2.2" xref="S4.SS2.SSS1.p5.9.m9.2.2.2.2.cmml"><mn id="S4.SS2.SSS1.p5.9.m9.2.2.2.2.2" xref="S4.SS2.SSS1.p5.9.m9.2.2.2.2.2.cmml">77.31</mn><mo id="S4.SS2.SSS1.p5.9.m9.2.2.2.2.1" xref="S4.SS2.SSS1.p5.9.m9.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.9.m9.2b"><list id="S4.SS2.SSS1.p5.9.m9.2.2.3.cmml" xref="S4.SS2.SSS1.p5.9.m9.2.2.2"><apply id="S4.SS2.SSS1.p5.9.m9.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.9.m9.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.9.m9.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.9.m9.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.9.m9.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p5.9.m9.1.1.1.1.2">89.31</cn></apply><apply id="S4.SS2.SSS1.p5.9.m9.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.9.m9.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.9.m9.2.2.2.2.1.cmml" xref="S4.SS2.SSS1.p5.9.m9.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.9.m9.2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.9.m9.2.2.2.2.2">77.31</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.9.m9.2c">89.31\%,77.31\%</annotation></semantics></math>, and <math id="S4.SS2.SSS1.p5.10.m10.1" class="ltx_Math" alttext="97.03\%" display="inline"><semantics id="S4.SS2.SSS1.p5.10.m10.1a"><mrow id="S4.SS2.SSS1.p5.10.m10.1.1" xref="S4.SS2.SSS1.p5.10.m10.1.1.cmml"><mn id="S4.SS2.SSS1.p5.10.m10.1.1.2" xref="S4.SS2.SSS1.p5.10.m10.1.1.2.cmml">97.03</mn><mo id="S4.SS2.SSS1.p5.10.m10.1.1.1" xref="S4.SS2.SSS1.p5.10.m10.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.10.m10.1b"><apply id="S4.SS2.SSS1.p5.10.m10.1.1.cmml" xref="S4.SS2.SSS1.p5.10.m10.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.10.m10.1.1.1.cmml" xref="S4.SS2.SSS1.p5.10.m10.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.10.m10.1.1.2.cmml" xref="S4.SS2.SSS1.p5.10.m10.1.1.2">97.03</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.10.m10.1c">97.03\%</annotation></semantics></math> while the highest accuracy of the other three baselines are
<math id="S4.SS2.SSS1.p5.11.m11.2" class="ltx_Math" alttext="87.44\%,62.86\%" display="inline"><semantics id="S4.SS2.SSS1.p5.11.m11.2a"><mrow id="S4.SS2.SSS1.p5.11.m11.2.2.2" xref="S4.SS2.SSS1.p5.11.m11.2.2.3.cmml"><mrow id="S4.SS2.SSS1.p5.11.m11.1.1.1.1" xref="S4.SS2.SSS1.p5.11.m11.1.1.1.1.cmml"><mn id="S4.SS2.SSS1.p5.11.m11.1.1.1.1.2" xref="S4.SS2.SSS1.p5.11.m11.1.1.1.1.2.cmml">87.44</mn><mo id="S4.SS2.SSS1.p5.11.m11.1.1.1.1.1" xref="S4.SS2.SSS1.p5.11.m11.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS1.p5.11.m11.2.2.2.3" xref="S4.SS2.SSS1.p5.11.m11.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS1.p5.11.m11.2.2.2.2" xref="S4.SS2.SSS1.p5.11.m11.2.2.2.2.cmml"><mn id="S4.SS2.SSS1.p5.11.m11.2.2.2.2.2" xref="S4.SS2.SSS1.p5.11.m11.2.2.2.2.2.cmml">62.86</mn><mo id="S4.SS2.SSS1.p5.11.m11.2.2.2.2.1" xref="S4.SS2.SSS1.p5.11.m11.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.11.m11.2b"><list id="S4.SS2.SSS1.p5.11.m11.2.2.3.cmml" xref="S4.SS2.SSS1.p5.11.m11.2.2.2"><apply id="S4.SS2.SSS1.p5.11.m11.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.11.m11.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.11.m11.1.1.1.1.1.cmml" xref="S4.SS2.SSS1.p5.11.m11.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.11.m11.1.1.1.1.2.cmml" xref="S4.SS2.SSS1.p5.11.m11.1.1.1.1.2">87.44</cn></apply><apply id="S4.SS2.SSS1.p5.11.m11.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.11.m11.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.11.m11.2.2.2.2.1.cmml" xref="S4.SS2.SSS1.p5.11.m11.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.11.m11.2.2.2.2.2.cmml" xref="S4.SS2.SSS1.p5.11.m11.2.2.2.2.2">62.86</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.11.m11.2c">87.44\%,62.86\%</annotation></semantics></math>, and <math id="S4.SS2.SSS1.p5.12.m12.1" class="ltx_Math" alttext="83.44\%" display="inline"><semantics id="S4.SS2.SSS1.p5.12.m12.1a"><mrow id="S4.SS2.SSS1.p5.12.m12.1.1" xref="S4.SS2.SSS1.p5.12.m12.1.1.cmml"><mn id="S4.SS2.SSS1.p5.12.m12.1.1.2" xref="S4.SS2.SSS1.p5.12.m12.1.1.2.cmml">83.44</mn><mo id="S4.SS2.SSS1.p5.12.m12.1.1.1" xref="S4.SS2.SSS1.p5.12.m12.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS1.p5.12.m12.1b"><apply id="S4.SS2.SSS1.p5.12.m12.1.1.cmml" xref="S4.SS2.SSS1.p5.12.m12.1.1"><csymbol cd="latexml" id="S4.SS2.SSS1.p5.12.m12.1.1.1.cmml" xref="S4.SS2.SSS1.p5.12.m12.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS1.p5.12.m12.1.1.2.cmml" xref="S4.SS2.SSS1.p5.12.m12.1.1.2">83.44</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS1.p5.12.m12.1c">83.44\%</annotation></semantics></math>. Results show that FedMS works well under different scales.</p>
</div>
<figure id="S4.F11" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F11.1" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" style="width:138.8pt;"><img src="/html/2312.15926/assets/x15.png" id="S4.F11.1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F11.1.1.1.1" class="ltx_text" style="font-size:90%;">Figure 9</span>: </span><span id="S4.F11.1.2.2" class="ltx_text" style="font-size:90%;">Accuracy with different LoRA ranks</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F11.2" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" style="width:138.8pt;"><img src="/html/2312.15926/assets/x16.png" id="S4.F11.2.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F11.2.1.1.1" class="ltx_text" style="font-size:90%;">Figure 10</span>: </span><span id="S4.F11.2.2.2" class="ltx_text" style="font-size:90%;">Accuracy with different LoRA dropout rates</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F11.3" class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" style="width:138.8pt;"><img src="/html/2312.15926/assets/x17.png" id="S4.F11.3.g1" class="ltx_graphics ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F11.3.1.1.1" class="ltx_text" style="font-size:90%;">Figure 11</span>: </span><span id="S4.F11.3.2.2" class="ltx_text" style="font-size:90%;">Accuracy with different LoRA weight decays</span></figcaption>
</figure>
</div>
</div>
</figure>
<figure id="S4.F12" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S4.F12.1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x18.png" id="S4.F12.1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="184" alt="Refer to caption">
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S4.F12.2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x19.png" id="S4.F12.2.g1" class="ltx_graphics ltx_img_landscape" width="461" height="184" alt="Refer to caption">
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S4.F12.3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x20.png" id="S4.F12.3.g1" class="ltx_graphics ltx_img_landscape" width="461" height="184" alt="Refer to caption">
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F12.5.1.1" class="ltx_text" style="font-size:90%;">Figure 12</span>: </span><span id="S4.F12.6.2" class="ltx_text" style="font-size:90%;">Comparison of accuracy of FedMS under different learning rates</span></figcaption>
</figure>
</section>
<section id="S4.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.2.2 </span>Impact of training settings</h4>

<div id="S4.SS2.SSS2.p1" class="ltx_para">
<p id="S4.SS2.SSS2.p1.1" class="ltx_p"><span id="S4.SS2.SSS2.p1.1.1" class="ltx_text ltx_font_bold">Impact of visual encoders.</span>
We test the performance of FedMS under visual encoders ViT-B/16 and ViT-B/32 to further verify the effectiveness of FedMS under various visual encoders.</p>
</div>
<div id="S4.SS2.SSS2.p2" class="ltx_para">
<p id="S4.SS2.SSS2.p2.2" class="ltx_p">We can observe from Fig. <a href="#S3.F3" title="Figure 3 ‣ 3.2 Sparsely Activated LoRA ‣ 3 Design of FedMS ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> that FedMS achieves the highest image classification accuracy on all datasets using the visual backbone Vit-B/16 or Vit-B/32. Results show that visual encoders with a larger number of parameters can achieve better performance than those with smaller visual encoders. The accuracy of the four algorithms increased by <math id="S4.SS2.SSS2.p2.1.m1.3" class="ltx_Math" alttext="1.01\%,11.85\%,4.57\%" display="inline"><semantics id="S4.SS2.SSS2.p2.1.m1.3a"><mrow id="S4.SS2.SSS2.p2.1.m1.3.3.3" xref="S4.SS2.SSS2.p2.1.m1.3.3.4.cmml"><mrow id="S4.SS2.SSS2.p2.1.m1.1.1.1.1" xref="S4.SS2.SSS2.p2.1.m1.1.1.1.1.cmml"><mn id="S4.SS2.SSS2.p2.1.m1.1.1.1.1.2" xref="S4.SS2.SSS2.p2.1.m1.1.1.1.1.2.cmml">1.01</mn><mo id="S4.SS2.SSS2.p2.1.m1.1.1.1.1.1" xref="S4.SS2.SSS2.p2.1.m1.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS2.p2.1.m1.3.3.3.4" xref="S4.SS2.SSS2.p2.1.m1.3.3.4.cmml">,</mo><mrow id="S4.SS2.SSS2.p2.1.m1.2.2.2.2" xref="S4.SS2.SSS2.p2.1.m1.2.2.2.2.cmml"><mn id="S4.SS2.SSS2.p2.1.m1.2.2.2.2.2" xref="S4.SS2.SSS2.p2.1.m1.2.2.2.2.2.cmml">11.85</mn><mo id="S4.SS2.SSS2.p2.1.m1.2.2.2.2.1" xref="S4.SS2.SSS2.p2.1.m1.2.2.2.2.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS2.p2.1.m1.3.3.3.5" xref="S4.SS2.SSS2.p2.1.m1.3.3.4.cmml">,</mo><mrow id="S4.SS2.SSS2.p2.1.m1.3.3.3.3" xref="S4.SS2.SSS2.p2.1.m1.3.3.3.3.cmml"><mn id="S4.SS2.SSS2.p2.1.m1.3.3.3.3.2" xref="S4.SS2.SSS2.p2.1.m1.3.3.3.3.2.cmml">4.57</mn><mo id="S4.SS2.SSS2.p2.1.m1.3.3.3.3.1" xref="S4.SS2.SSS2.p2.1.m1.3.3.3.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p2.1.m1.3b"><list id="S4.SS2.SSS2.p2.1.m1.3.3.4.cmml" xref="S4.SS2.SSS2.p2.1.m1.3.3.3"><apply id="S4.SS2.SSS2.p2.1.m1.1.1.1.1.cmml" xref="S4.SS2.SSS2.p2.1.m1.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p2.1.m1.1.1.1.1.1.cmml" xref="S4.SS2.SSS2.p2.1.m1.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p2.1.m1.1.1.1.1.2.cmml" xref="S4.SS2.SSS2.p2.1.m1.1.1.1.1.2">1.01</cn></apply><apply id="S4.SS2.SSS2.p2.1.m1.2.2.2.2.cmml" xref="S4.SS2.SSS2.p2.1.m1.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS2.p2.1.m1.2.2.2.2.1.cmml" xref="S4.SS2.SSS2.p2.1.m1.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p2.1.m1.2.2.2.2.2.cmml" xref="S4.SS2.SSS2.p2.1.m1.2.2.2.2.2">11.85</cn></apply><apply id="S4.SS2.SSS2.p2.1.m1.3.3.3.3.cmml" xref="S4.SS2.SSS2.p2.1.m1.3.3.3.3"><csymbol cd="latexml" id="S4.SS2.SSS2.p2.1.m1.3.3.3.3.1.cmml" xref="S4.SS2.SSS2.p2.1.m1.3.3.3.3.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p2.1.m1.3.3.3.3.2.cmml" xref="S4.SS2.SSS2.p2.1.m1.3.3.3.3.2">4.57</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p2.1.m1.3c">1.01\%,11.85\%,4.57\%</annotation></semantics></math>, and <math id="S4.SS2.SSS2.p2.2.m2.1" class="ltx_Math" alttext="4.25\%" display="inline"><semantics id="S4.SS2.SSS2.p2.2.m2.1a"><mrow id="S4.SS2.SSS2.p2.2.m2.1.1" xref="S4.SS2.SSS2.p2.2.m2.1.1.cmml"><mn id="S4.SS2.SSS2.p2.2.m2.1.1.2" xref="S4.SS2.SSS2.p2.2.m2.1.1.2.cmml">4.25</mn><mo id="S4.SS2.SSS2.p2.2.m2.1.1.1" xref="S4.SS2.SSS2.p2.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p2.2.m2.1b"><apply id="S4.SS2.SSS2.p2.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p2.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p2.2.m2.1.1.1.cmml" xref="S4.SS2.SSS2.p2.2.m2.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p2.2.m2.1.1.2.cmml" xref="S4.SS2.SSS2.p2.2.m2.1.1.2">4.25</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p2.2.m2.1c">4.25\%</annotation></semantics></math> when using ViT-B/16 as the visual encoder on the UCF101 dataset which confirms the theoretical analysis that larger models have better feature extraction ability.</p>
</div>
<div id="S4.SS2.SSS2.p3" class="ltx_para">
<p id="S4.SS2.SSS2.p3.4" class="ltx_p">Our method suppresses other baselines by a maximum of <math id="S4.SS2.SSS2.p3.1.m1.1" class="ltx_Math" alttext="55.25\%" display="inline"><semantics id="S4.SS2.SSS2.p3.1.m1.1a"><mrow id="S4.SS2.SSS2.p3.1.m1.1.1" xref="S4.SS2.SSS2.p3.1.m1.1.1.cmml"><mn id="S4.SS2.SSS2.p3.1.m1.1.1.2" xref="S4.SS2.SSS2.p3.1.m1.1.1.2.cmml">55.25</mn><mo id="S4.SS2.SSS2.p3.1.m1.1.1.1" xref="S4.SS2.SSS2.p3.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p3.1.m1.1b"><apply id="S4.SS2.SSS2.p3.1.m1.1.1.cmml" xref="S4.SS2.SSS2.p3.1.m1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p3.1.m1.1.1.1.cmml" xref="S4.SS2.SSS2.p3.1.m1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p3.1.m1.1.1.2.cmml" xref="S4.SS2.SSS2.p3.1.m1.1.1.2">55.25</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p3.1.m1.1c">55.25\%</annotation></semantics></math> and a minimum of <math id="S4.SS2.SSS2.p3.2.m2.1" class="ltx_Math" alttext="8.55\%" display="inline"><semantics id="S4.SS2.SSS2.p3.2.m2.1a"><mrow id="S4.SS2.SSS2.p3.2.m2.1.1" xref="S4.SS2.SSS2.p3.2.m2.1.1.cmml"><mn id="S4.SS2.SSS2.p3.2.m2.1.1.2" xref="S4.SS2.SSS2.p3.2.m2.1.1.2.cmml">8.55</mn><mo id="S4.SS2.SSS2.p3.2.m2.1.1.1" xref="S4.SS2.SSS2.p3.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p3.2.m2.1b"><apply id="S4.SS2.SSS2.p3.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p3.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p3.2.m2.1.1.1.cmml" xref="S4.SS2.SSS2.p3.2.m2.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p3.2.m2.1.1.2.cmml" xref="S4.SS2.SSS2.p3.2.m2.1.1.2">8.55</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p3.2.m2.1c">8.55\%</annotation></semantics></math> when using Vit-B/16 and suppresses other baselines by a maximum of <math id="S4.SS2.SSS2.p3.3.m3.1" class="ltx_Math" alttext="60.09\%" display="inline"><semantics id="S4.SS2.SSS2.p3.3.m3.1a"><mrow id="S4.SS2.SSS2.p3.3.m3.1.1" xref="S4.SS2.SSS2.p3.3.m3.1.1.cmml"><mn id="S4.SS2.SSS2.p3.3.m3.1.1.2" xref="S4.SS2.SSS2.p3.3.m3.1.1.2.cmml">60.09</mn><mo id="S4.SS2.SSS2.p3.3.m3.1.1.1" xref="S4.SS2.SSS2.p3.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p3.3.m3.1b"><apply id="S4.SS2.SSS2.p3.3.m3.1.1.cmml" xref="S4.SS2.SSS2.p3.3.m3.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p3.3.m3.1.1.1.cmml" xref="S4.SS2.SSS2.p3.3.m3.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p3.3.m3.1.1.2.cmml" xref="S4.SS2.SSS2.p3.3.m3.1.1.2">60.09</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p3.3.m3.1c">60.09\%</annotation></semantics></math> and a minimum of <math id="S4.SS2.SSS2.p3.4.m4.1" class="ltx_Math" alttext="6.01\%" display="inline"><semantics id="S4.SS2.SSS2.p3.4.m4.1a"><mrow id="S4.SS2.SSS2.p3.4.m4.1.1" xref="S4.SS2.SSS2.p3.4.m4.1.1.cmml"><mn id="S4.SS2.SSS2.p3.4.m4.1.1.2" xref="S4.SS2.SSS2.p3.4.m4.1.1.2.cmml">6.01</mn><mo id="S4.SS2.SSS2.p3.4.m4.1.1.1" xref="S4.SS2.SSS2.p3.4.m4.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p3.4.m4.1b"><apply id="S4.SS2.SSS2.p3.4.m4.1.1.cmml" xref="S4.SS2.SSS2.p3.4.m4.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p3.4.m4.1.1.1.cmml" xref="S4.SS2.SSS2.p3.4.m4.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p3.4.m4.1.1.2.cmml" xref="S4.SS2.SSS2.p3.4.m4.1.1.2">6.01</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p3.4.m4.1c">6.01\%</annotation></semantics></math> when using Vit-B/32. Results show that FedMS can adapt to visual encoders with different scales.</p>
</div>
<div id="S4.SS2.SSS2.p4" class="ltx_para">
<p id="S4.SS2.SSS2.p4.3" class="ltx_p"><span id="S4.SS2.SSS2.p4.3.1" class="ltx_text ltx_font_bold">Impact of accuracy thresholds.</span>
We further discuss the performance of FedMS when the value of the accuracy threshold <math id="S4.SS2.SSS2.p4.1.m1.1" class="ltx_Math" alttext="\delta" display="inline"><semantics id="S4.SS2.SSS2.p4.1.m1.1a"><mi id="S4.SS2.SSS2.p4.1.m1.1.1" xref="S4.SS2.SSS2.p4.1.m1.1.1.cmml">δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p4.1.m1.1b"><ci id="S4.SS2.SSS2.p4.1.m1.1.1.cmml" xref="S4.SS2.SSS2.p4.1.m1.1.1">𝛿</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p4.1.m1.1c">\delta</annotation></semantics></math> is different. Typically, if the clients have more computation resources, they can have a higher <math id="S4.SS2.SSS2.p4.2.m2.1" class="ltx_Math" alttext="\delta" display="inline"><semantics id="S4.SS2.SSS2.p4.2.m2.1a"><mi id="S4.SS2.SSS2.p4.2.m2.1.1" xref="S4.SS2.SSS2.p4.2.m2.1.1.cmml">δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p4.2.m2.1b"><ci id="S4.SS2.SSS2.p4.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p4.2.m2.1.1">𝛿</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p4.2.m2.1c">\delta</annotation></semantics></math> to encourage more inserted low-rank decomposition matrices to be activated, and if their computing resources are scarce they can set a small <math id="S4.SS2.SSS2.p4.3.m3.1" class="ltx_Math" alttext="\delta" display="inline"><semantics id="S4.SS2.SSS2.p4.3.m3.1a"><mi id="S4.SS2.SSS2.p4.3.m3.1.1" xref="S4.SS2.SSS2.p4.3.m3.1.1.cmml">δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p4.3.m3.1b"><ci id="S4.SS2.SSS2.p4.3.m3.1.1.cmml" xref="S4.SS2.SSS2.p4.3.m3.1.1">𝛿</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p4.3.m3.1c">\delta</annotation></semantics></math> to save more computation resources.</p>
</div>
<div id="S4.SS2.SSS2.p5" class="ltx_para">
<p id="S4.SS2.SSS2.p5.13" class="ltx_p">We set the accuracy threshold to 0.001, 0.005, 0.01, and 0.02 to see its effect on the model performance.
From Fig. <a href="#S4.F8" title="Figure 8 ‣ 4.1.2 Baselines ‣ 4.1 Experiments set up ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a> we can find that the accuracy does not always increase with <math id="S4.SS2.SSS2.p5.1.m1.1" class="ltx_Math" alttext="\delta" display="inline"><semantics id="S4.SS2.SSS2.p5.1.m1.1a"><mi id="S4.SS2.SSS2.p5.1.m1.1.1" xref="S4.SS2.SSS2.p5.1.m1.1.1.cmml">δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.1.m1.1b"><ci id="S4.SS2.SSS2.p5.1.m1.1.1.cmml" xref="S4.SS2.SSS2.p5.1.m1.1.1">𝛿</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.1.m1.1c">\delta</annotation></semantics></math>. On the Food101 dataset, the accuracy is <math id="S4.SS2.SSS2.p5.2.m2.1" class="ltx_Math" alttext="94.05\%" display="inline"><semantics id="S4.SS2.SSS2.p5.2.m2.1a"><mrow id="S4.SS2.SSS2.p5.2.m2.1.1" xref="S4.SS2.SSS2.p5.2.m2.1.1.cmml"><mn id="S4.SS2.SSS2.p5.2.m2.1.1.2" xref="S4.SS2.SSS2.p5.2.m2.1.1.2.cmml">94.05</mn><mo id="S4.SS2.SSS2.p5.2.m2.1.1.1" xref="S4.SS2.SSS2.p5.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.2.m2.1b"><apply id="S4.SS2.SSS2.p5.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p5.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.2.m2.1.1.1.cmml" xref="S4.SS2.SSS2.p5.2.m2.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.2.m2.1.1.2.cmml" xref="S4.SS2.SSS2.p5.2.m2.1.1.2">94.05</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.2.m2.1c">94.05\%</annotation></semantics></math> when <math id="S4.SS2.SSS2.p5.3.m3.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.SSS2.p5.3.m3.1a"><mi id="S4.SS2.SSS2.p5.3.m3.1.1" xref="S4.SS2.SSS2.p5.3.m3.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.3.m3.1b"><ci id="S4.SS2.SSS2.p5.3.m3.1.1.cmml" xref="S4.SS2.SSS2.p5.3.m3.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.3.m3.1c">\alpha</annotation></semantics></math> is 0.02 and is <math id="S4.SS2.SSS2.p5.4.m4.1" class="ltx_Math" alttext="92.96\%" display="inline"><semantics id="S4.SS2.SSS2.p5.4.m4.1a"><mrow id="S4.SS2.SSS2.p5.4.m4.1.1" xref="S4.SS2.SSS2.p5.4.m4.1.1.cmml"><mn id="S4.SS2.SSS2.p5.4.m4.1.1.2" xref="S4.SS2.SSS2.p5.4.m4.1.1.2.cmml">92.96</mn><mo id="S4.SS2.SSS2.p5.4.m4.1.1.1" xref="S4.SS2.SSS2.p5.4.m4.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.4.m4.1b"><apply id="S4.SS2.SSS2.p5.4.m4.1.1.cmml" xref="S4.SS2.SSS2.p5.4.m4.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.4.m4.1.1.1.cmml" xref="S4.SS2.SSS2.p5.4.m4.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.4.m4.1.1.2.cmml" xref="S4.SS2.SSS2.p5.4.m4.1.1.2">92.96</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.4.m4.1c">92.96\%</annotation></semantics></math> when <math id="S4.SS2.SSS2.p5.5.m5.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.SSS2.p5.5.m5.1a"><mi id="S4.SS2.SSS2.p5.5.m5.1.1" xref="S4.SS2.SSS2.p5.5.m5.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.5.m5.1b"><ci id="S4.SS2.SSS2.p5.5.m5.1.1.cmml" xref="S4.SS2.SSS2.p5.5.m5.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.5.m5.1c">\alpha</annotation></semantics></math> is 0.001, which has an increase of <math id="S4.SS2.SSS2.p5.6.m6.1" class="ltx_Math" alttext="1.09\%" display="inline"><semantics id="S4.SS2.SSS2.p5.6.m6.1a"><mrow id="S4.SS2.SSS2.p5.6.m6.1.1" xref="S4.SS2.SSS2.p5.6.m6.1.1.cmml"><mn id="S4.SS2.SSS2.p5.6.m6.1.1.2" xref="S4.SS2.SSS2.p5.6.m6.1.1.2.cmml">1.09</mn><mo id="S4.SS2.SSS2.p5.6.m6.1.1.1" xref="S4.SS2.SSS2.p5.6.m6.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.6.m6.1b"><apply id="S4.SS2.SSS2.p5.6.m6.1.1.cmml" xref="S4.SS2.SSS2.p5.6.m6.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.6.m6.1.1.1.cmml" xref="S4.SS2.SSS2.p5.6.m6.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.6.m6.1.1.2.cmml" xref="S4.SS2.SSS2.p5.6.m6.1.1.2">1.09</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.6.m6.1c">1.09\%</annotation></semantics></math> and on the EuroSAT dataset, the accuracy increase from <math id="S4.SS2.SSS2.p5.7.m7.1" class="ltx_Math" alttext="99.23\%" display="inline"><semantics id="S4.SS2.SSS2.p5.7.m7.1a"><mrow id="S4.SS2.SSS2.p5.7.m7.1.1" xref="S4.SS2.SSS2.p5.7.m7.1.1.cmml"><mn id="S4.SS2.SSS2.p5.7.m7.1.1.2" xref="S4.SS2.SSS2.p5.7.m7.1.1.2.cmml">99.23</mn><mo id="S4.SS2.SSS2.p5.7.m7.1.1.1" xref="S4.SS2.SSS2.p5.7.m7.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.7.m7.1b"><apply id="S4.SS2.SSS2.p5.7.m7.1.1.cmml" xref="S4.SS2.SSS2.p5.7.m7.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.7.m7.1.1.1.cmml" xref="S4.SS2.SSS2.p5.7.m7.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.7.m7.1.1.2.cmml" xref="S4.SS2.SSS2.p5.7.m7.1.1.2">99.23</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.7.m7.1c">99.23\%</annotation></semantics></math> to <math id="S4.SS2.SSS2.p5.8.m8.1" class="ltx_Math" alttext="99.39\%" display="inline"><semantics id="S4.SS2.SSS2.p5.8.m8.1a"><mrow id="S4.SS2.SSS2.p5.8.m8.1.1" xref="S4.SS2.SSS2.p5.8.m8.1.1.cmml"><mn id="S4.SS2.SSS2.p5.8.m8.1.1.2" xref="S4.SS2.SSS2.p5.8.m8.1.1.2.cmml">99.39</mn><mo id="S4.SS2.SSS2.p5.8.m8.1.1.1" xref="S4.SS2.SSS2.p5.8.m8.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.8.m8.1b"><apply id="S4.SS2.SSS2.p5.8.m8.1.1.cmml" xref="S4.SS2.SSS2.p5.8.m8.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.8.m8.1.1.1.cmml" xref="S4.SS2.SSS2.p5.8.m8.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.8.m8.1.1.2.cmml" xref="S4.SS2.SSS2.p5.8.m8.1.1.2">99.39</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.8.m8.1c">99.39\%</annotation></semantics></math>. But on the UCF101 dataset, the accuracy decreased from <math id="S4.SS2.SSS2.p5.9.m9.1" class="ltx_Math" alttext="88.48\%" display="inline"><semantics id="S4.SS2.SSS2.p5.9.m9.1a"><mrow id="S4.SS2.SSS2.p5.9.m9.1.1" xref="S4.SS2.SSS2.p5.9.m9.1.1.cmml"><mn id="S4.SS2.SSS2.p5.9.m9.1.1.2" xref="S4.SS2.SSS2.p5.9.m9.1.1.2.cmml">88.48</mn><mo id="S4.SS2.SSS2.p5.9.m9.1.1.1" xref="S4.SS2.SSS2.p5.9.m9.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.9.m9.1b"><apply id="S4.SS2.SSS2.p5.9.m9.1.1.cmml" xref="S4.SS2.SSS2.p5.9.m9.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.9.m9.1.1.1.cmml" xref="S4.SS2.SSS2.p5.9.m9.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.9.m9.1.1.2.cmml" xref="S4.SS2.SSS2.p5.9.m9.1.1.2">88.48</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.9.m9.1c">88.48\%</annotation></semantics></math> to <math id="S4.SS2.SSS2.p5.10.m10.1" class="ltx_Math" alttext="88.24\%" display="inline"><semantics id="S4.SS2.SSS2.p5.10.m10.1a"><mrow id="S4.SS2.SSS2.p5.10.m10.1.1" xref="S4.SS2.SSS2.p5.10.m10.1.1.cmml"><mn id="S4.SS2.SSS2.p5.10.m10.1.1.2" xref="S4.SS2.SSS2.p5.10.m10.1.1.2.cmml">88.24</mn><mo id="S4.SS2.SSS2.p5.10.m10.1.1.1" xref="S4.SS2.SSS2.p5.10.m10.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.10.m10.1b"><apply id="S4.SS2.SSS2.p5.10.m10.1.1.cmml" xref="S4.SS2.SSS2.p5.10.m10.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.10.m10.1.1.1.cmml" xref="S4.SS2.SSS2.p5.10.m10.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.10.m10.1.1.2.cmml" xref="S4.SS2.SSS2.p5.10.m10.1.1.2">88.24</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.10.m10.1c">88.24\%</annotation></semantics></math> when <math id="S4.SS2.SSS2.p5.11.m11.1" class="ltx_Math" alttext="\delta" display="inline"><semantics id="S4.SS2.SSS2.p5.11.m11.1a"><mi id="S4.SS2.SSS2.p5.11.m11.1.1" xref="S4.SS2.SSS2.p5.11.m11.1.1.cmml">δ</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.11.m11.1b"><ci id="S4.SS2.SSS2.p5.11.m11.1.1.cmml" xref="S4.SS2.SSS2.p5.11.m11.1.1">𝛿</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.11.m11.1c">\delta</annotation></semantics></math> increased from 0.001 to 0.02. The largest accuracy difference in the three datasets is <math id="S4.SS2.SSS2.p5.12.m12.2" class="ltx_Math" alttext="1.09\%,0.0024\%" display="inline"><semantics id="S4.SS2.SSS2.p5.12.m12.2a"><mrow id="S4.SS2.SSS2.p5.12.m12.2.2.2" xref="S4.SS2.SSS2.p5.12.m12.2.2.3.cmml"><mrow id="S4.SS2.SSS2.p5.12.m12.1.1.1.1" xref="S4.SS2.SSS2.p5.12.m12.1.1.1.1.cmml"><mn id="S4.SS2.SSS2.p5.12.m12.1.1.1.1.2" xref="S4.SS2.SSS2.p5.12.m12.1.1.1.1.2.cmml">1.09</mn><mo id="S4.SS2.SSS2.p5.12.m12.1.1.1.1.1" xref="S4.SS2.SSS2.p5.12.m12.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS2.p5.12.m12.2.2.2.3" xref="S4.SS2.SSS2.p5.12.m12.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS2.p5.12.m12.2.2.2.2" xref="S4.SS2.SSS2.p5.12.m12.2.2.2.2.cmml"><mn id="S4.SS2.SSS2.p5.12.m12.2.2.2.2.2" xref="S4.SS2.SSS2.p5.12.m12.2.2.2.2.2.cmml">0.0024</mn><mo id="S4.SS2.SSS2.p5.12.m12.2.2.2.2.1" xref="S4.SS2.SSS2.p5.12.m12.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.12.m12.2b"><list id="S4.SS2.SSS2.p5.12.m12.2.2.3.cmml" xref="S4.SS2.SSS2.p5.12.m12.2.2.2"><apply id="S4.SS2.SSS2.p5.12.m12.1.1.1.1.cmml" xref="S4.SS2.SSS2.p5.12.m12.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.12.m12.1.1.1.1.1.cmml" xref="S4.SS2.SSS2.p5.12.m12.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.12.m12.1.1.1.1.2.cmml" xref="S4.SS2.SSS2.p5.12.m12.1.1.1.1.2">1.09</cn></apply><apply id="S4.SS2.SSS2.p5.12.m12.2.2.2.2.cmml" xref="S4.SS2.SSS2.p5.12.m12.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.12.m12.2.2.2.2.1.cmml" xref="S4.SS2.SSS2.p5.12.m12.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.12.m12.2.2.2.2.2.cmml" xref="S4.SS2.SSS2.p5.12.m12.2.2.2.2.2">0.0024</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.12.m12.2c">1.09\%,0.0024\%</annotation></semantics></math>, and <math id="S4.SS2.SSS2.p5.13.m13.1" class="ltx_Math" alttext="0.0016\%" display="inline"><semantics id="S4.SS2.SSS2.p5.13.m13.1a"><mrow id="S4.SS2.SSS2.p5.13.m13.1.1" xref="S4.SS2.SSS2.p5.13.m13.1.1.cmml"><mn id="S4.SS2.SSS2.p5.13.m13.1.1.2" xref="S4.SS2.SSS2.p5.13.m13.1.1.2.cmml">0.0016</mn><mo id="S4.SS2.SSS2.p5.13.m13.1.1.1" xref="S4.SS2.SSS2.p5.13.m13.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p5.13.m13.1b"><apply id="S4.SS2.SSS2.p5.13.m13.1.1.cmml" xref="S4.SS2.SSS2.p5.13.m13.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p5.13.m13.1.1.1.cmml" xref="S4.SS2.SSS2.p5.13.m13.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p5.13.m13.1.1.2.cmml" xref="S4.SS2.SSS2.p5.13.m13.1.1.2">0.0016</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p5.13.m13.1c">0.0016\%</annotation></semantics></math>.</p>
</div>
<div id="S4.SS2.SSS2.p6" class="ltx_para">
<p id="S4.SS2.SSS2.p6.1" class="ltx_p">Results imply the effectiveness of the design of <span id="S4.SS2.SSS2.p6.1.1" class="ltx_text ltx_font_typewriter">SAL</span> because of leveraging the idea of curriculum learning that progressively increases the number of activates low-rank adaptation matrices in the visual encoder and the text encoder.
In the optimization process of FM, it is often easier at the beginning, while the optimization of parameters becomes more difficult as it progresses, making it harder to improve accuracy. We increase the number of activated parameters through a controller during the training to tackle the increasing difficulty of optimizing the FM during training.</p>
</div>
<div id="S4.SS2.SSS2.p7" class="ltx_para">
<p id="S4.SS2.SSS2.p7.2" class="ltx_p"><span id="S4.SS2.SSS2.p7.2.1" class="ltx_text ltx_font_bold">Imapct of learning rates.</span>
We show the accuracy of FedMS in three datasets under different learning rates. We set the learning rate to <math id="S4.SS2.SSS2.p7.1.m1.2" class="ltx_Math" alttext="2e^{-3},2e^{-4}" display="inline"><semantics id="S4.SS2.SSS2.p7.1.m1.2a"><mrow id="S4.SS2.SSS2.p7.1.m1.2.2.2" xref="S4.SS2.SSS2.p7.1.m1.2.2.3.cmml"><mrow id="S4.SS2.SSS2.p7.1.m1.1.1.1.1" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.cmml"><mn id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.2" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.2.cmml">2</mn><mo lspace="0em" rspace="0em" id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.1" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.1.cmml">​</mo><msup id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.cmml"><mi id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.2" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.2.cmml">e</mi><mrow id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3.cmml"><mo id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3a" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3.cmml">−</mo><mn id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3.2" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3.2.cmml">3</mn></mrow></msup></mrow><mo id="S4.SS2.SSS2.p7.1.m1.2.2.2.3" xref="S4.SS2.SSS2.p7.1.m1.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS2.p7.1.m1.2.2.2.2" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.cmml"><mn id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.2" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.2.cmml">2</mn><mo lspace="0em" rspace="0em" id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.1" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.1.cmml">​</mo><msup id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.cmml"><mi id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.2" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.2.cmml">e</mi><mrow id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3.cmml"><mo id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3a" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3.cmml">−</mo><mn id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3.2" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3.2.cmml">4</mn></mrow></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p7.1.m1.2b"><list id="S4.SS2.SSS2.p7.1.m1.2.2.3.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2"><apply id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1"><times id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.1.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.1"></times><cn type="integer" id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.2.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.2">2</cn><apply id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3"><csymbol cd="ambiguous" id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.1.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3">superscript</csymbol><ci id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.2.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.2">𝑒</ci><apply id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3"><minus id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3.1.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3"></minus><cn type="integer" id="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3.2.cmml" xref="S4.SS2.SSS2.p7.1.m1.1.1.1.1.3.3.2">3</cn></apply></apply></apply><apply id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2"><times id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.1.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.1"></times><cn type="integer" id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.2.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.2">2</cn><apply id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.1.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3">superscript</csymbol><ci id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.2.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.2">𝑒</ci><apply id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3"><minus id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3.1.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3"></minus><cn type="integer" id="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3.2.cmml" xref="S4.SS2.SSS2.p7.1.m1.2.2.2.2.3.3.2">4</cn></apply></apply></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p7.1.m1.2c">2e^{-3},2e^{-4}</annotation></semantics></math>, and <math id="S4.SS2.SSS2.p7.2.m2.1" class="ltx_Math" alttext="2e^{-5}" display="inline"><semantics id="S4.SS2.SSS2.p7.2.m2.1a"><mrow id="S4.SS2.SSS2.p7.2.m2.1.1" xref="S4.SS2.SSS2.p7.2.m2.1.1.cmml"><mn id="S4.SS2.SSS2.p7.2.m2.1.1.2" xref="S4.SS2.SSS2.p7.2.m2.1.1.2.cmml">2</mn><mo lspace="0em" rspace="0em" id="S4.SS2.SSS2.p7.2.m2.1.1.1" xref="S4.SS2.SSS2.p7.2.m2.1.1.1.cmml">​</mo><msup id="S4.SS2.SSS2.p7.2.m2.1.1.3" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.cmml"><mi id="S4.SS2.SSS2.p7.2.m2.1.1.3.2" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.2.cmml">e</mi><mrow id="S4.SS2.SSS2.p7.2.m2.1.1.3.3" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.3.cmml"><mo id="S4.SS2.SSS2.p7.2.m2.1.1.3.3a" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.3.cmml">−</mo><mn id="S4.SS2.SSS2.p7.2.m2.1.1.3.3.2" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.3.2.cmml">5</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p7.2.m2.1b"><apply id="S4.SS2.SSS2.p7.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1"><times id="S4.SS2.SSS2.p7.2.m2.1.1.1.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1.1"></times><cn type="integer" id="S4.SS2.SSS2.p7.2.m2.1.1.2.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1.2">2</cn><apply id="S4.SS2.SSS2.p7.2.m2.1.1.3.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1.3"><csymbol cd="ambiguous" id="S4.SS2.SSS2.p7.2.m2.1.1.3.1.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1.3">superscript</csymbol><ci id="S4.SS2.SSS2.p7.2.m2.1.1.3.2.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.2">𝑒</ci><apply id="S4.SS2.SSS2.p7.2.m2.1.1.3.3.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.3"><minus id="S4.SS2.SSS2.p7.2.m2.1.1.3.3.1.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.3"></minus><cn type="integer" id="S4.SS2.SSS2.p7.2.m2.1.1.3.3.2.cmml" xref="S4.SS2.SSS2.p7.2.m2.1.1.3.3.2">5</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p7.2.m2.1c">2e^{-5}</annotation></semantics></math>.</p>
</div>
<div id="S4.SS2.SSS2.p8" class="ltx_para">
<p id="S4.SS2.SSS2.p8.5" class="ltx_p">From Fig. <a href="#S4.F12" title="Figure 12 ‣ 4.2.1 Impact of different system settings ‣ 4.2 Results Comparisons ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">12</span></a> we can observe that when the learning rate is <math id="S4.SS2.SSS2.p8.1.m1.1" class="ltx_Math" alttext="2e^{-5}" display="inline"><semantics id="S4.SS2.SSS2.p8.1.m1.1a"><mrow id="S4.SS2.SSS2.p8.1.m1.1.1" xref="S4.SS2.SSS2.p8.1.m1.1.1.cmml"><mn id="S4.SS2.SSS2.p8.1.m1.1.1.2" xref="S4.SS2.SSS2.p8.1.m1.1.1.2.cmml">2</mn><mo lspace="0em" rspace="0em" id="S4.SS2.SSS2.p8.1.m1.1.1.1" xref="S4.SS2.SSS2.p8.1.m1.1.1.1.cmml">​</mo><msup id="S4.SS2.SSS2.p8.1.m1.1.1.3" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.cmml"><mi id="S4.SS2.SSS2.p8.1.m1.1.1.3.2" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.2.cmml">e</mi><mrow id="S4.SS2.SSS2.p8.1.m1.1.1.3.3" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.3.cmml"><mo id="S4.SS2.SSS2.p8.1.m1.1.1.3.3a" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.3.cmml">−</mo><mn id="S4.SS2.SSS2.p8.1.m1.1.1.3.3.2" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.3.2.cmml">5</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p8.1.m1.1b"><apply id="S4.SS2.SSS2.p8.1.m1.1.1.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1"><times id="S4.SS2.SSS2.p8.1.m1.1.1.1.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1.1"></times><cn type="integer" id="S4.SS2.SSS2.p8.1.m1.1.1.2.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1.2">2</cn><apply id="S4.SS2.SSS2.p8.1.m1.1.1.3.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.SS2.SSS2.p8.1.m1.1.1.3.1.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1.3">superscript</csymbol><ci id="S4.SS2.SSS2.p8.1.m1.1.1.3.2.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.2">𝑒</ci><apply id="S4.SS2.SSS2.p8.1.m1.1.1.3.3.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.3"><minus id="S4.SS2.SSS2.p8.1.m1.1.1.3.3.1.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.3"></minus><cn type="integer" id="S4.SS2.SSS2.p8.1.m1.1.1.3.3.2.cmml" xref="S4.SS2.SSS2.p8.1.m1.1.1.3.3.2">5</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p8.1.m1.1c">2e^{-5}</annotation></semantics></math> the model shows a slow convergence rate, especially in UCF101 datasets, the accuracy is <math id="S4.SS2.SSS2.p8.2.m2.1" class="ltx_Math" alttext="70.61\%" display="inline"><semantics id="S4.SS2.SSS2.p8.2.m2.1a"><mrow id="S4.SS2.SSS2.p8.2.m2.1.1" xref="S4.SS2.SSS2.p8.2.m2.1.1.cmml"><mn id="S4.SS2.SSS2.p8.2.m2.1.1.2" xref="S4.SS2.SSS2.p8.2.m2.1.1.2.cmml">70.61</mn><mo id="S4.SS2.SSS2.p8.2.m2.1.1.1" xref="S4.SS2.SSS2.p8.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p8.2.m2.1b"><apply id="S4.SS2.SSS2.p8.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p8.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p8.2.m2.1.1.1.cmml" xref="S4.SS2.SSS2.p8.2.m2.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p8.2.m2.1.1.2.cmml" xref="S4.SS2.SSS2.p8.2.m2.1.1.2">70.61</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p8.2.m2.1c">70.61\%</annotation></semantics></math> which has an accuracy loss of <math id="S4.SS2.SSS2.p8.3.m3.1" class="ltx_Math" alttext="16.72\%" display="inline"><semantics id="S4.SS2.SSS2.p8.3.m3.1a"><mrow id="S4.SS2.SSS2.p8.3.m3.1.1" xref="S4.SS2.SSS2.p8.3.m3.1.1.cmml"><mn id="S4.SS2.SSS2.p8.3.m3.1.1.2" xref="S4.SS2.SSS2.p8.3.m3.1.1.2.cmml">16.72</mn><mo id="S4.SS2.SSS2.p8.3.m3.1.1.1" xref="S4.SS2.SSS2.p8.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p8.3.m3.1b"><apply id="S4.SS2.SSS2.p8.3.m3.1.1.cmml" xref="S4.SS2.SSS2.p8.3.m3.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p8.3.m3.1.1.1.cmml" xref="S4.SS2.SSS2.p8.3.m3.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p8.3.m3.1.1.2.cmml" xref="S4.SS2.SSS2.p8.3.m3.1.1.2">16.72</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p8.3.m3.1c">16.72\%</annotation></semantics></math> compared to the accuracy when the learning rate is <math id="S4.SS2.SSS2.p8.4.m4.1" class="ltx_Math" alttext="2e^{-4}" display="inline"><semantics id="S4.SS2.SSS2.p8.4.m4.1a"><mrow id="S4.SS2.SSS2.p8.4.m4.1.1" xref="S4.SS2.SSS2.p8.4.m4.1.1.cmml"><mn id="S4.SS2.SSS2.p8.4.m4.1.1.2" xref="S4.SS2.SSS2.p8.4.m4.1.1.2.cmml">2</mn><mo lspace="0em" rspace="0em" id="S4.SS2.SSS2.p8.4.m4.1.1.1" xref="S4.SS2.SSS2.p8.4.m4.1.1.1.cmml">​</mo><msup id="S4.SS2.SSS2.p8.4.m4.1.1.3" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.cmml"><mi id="S4.SS2.SSS2.p8.4.m4.1.1.3.2" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.2.cmml">e</mi><mrow id="S4.SS2.SSS2.p8.4.m4.1.1.3.3" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.3.cmml"><mo id="S4.SS2.SSS2.p8.4.m4.1.1.3.3a" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.3.cmml">−</mo><mn id="S4.SS2.SSS2.p8.4.m4.1.1.3.3.2" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.3.2.cmml">4</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p8.4.m4.1b"><apply id="S4.SS2.SSS2.p8.4.m4.1.1.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1"><times id="S4.SS2.SSS2.p8.4.m4.1.1.1.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1.1"></times><cn type="integer" id="S4.SS2.SSS2.p8.4.m4.1.1.2.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1.2">2</cn><apply id="S4.SS2.SSS2.p8.4.m4.1.1.3.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1.3"><csymbol cd="ambiguous" id="S4.SS2.SSS2.p8.4.m4.1.1.3.1.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1.3">superscript</csymbol><ci id="S4.SS2.SSS2.p8.4.m4.1.1.3.2.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.2">𝑒</ci><apply id="S4.SS2.SSS2.p8.4.m4.1.1.3.3.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.3"><minus id="S4.SS2.SSS2.p8.4.m4.1.1.3.3.1.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.3"></minus><cn type="integer" id="S4.SS2.SSS2.p8.4.m4.1.1.3.3.2.cmml" xref="S4.SS2.SSS2.p8.4.m4.1.1.3.3.2">4</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p8.4.m4.1c">2e^{-4}</annotation></semantics></math>. When the learning rate is <math id="S4.SS2.SSS2.p8.5.m5.1" class="ltx_Math" alttext="2e^{-3}" display="inline"><semantics id="S4.SS2.SSS2.p8.5.m5.1a"><mrow id="S4.SS2.SSS2.p8.5.m5.1.1" xref="S4.SS2.SSS2.p8.5.m5.1.1.cmml"><mn id="S4.SS2.SSS2.p8.5.m5.1.1.2" xref="S4.SS2.SSS2.p8.5.m5.1.1.2.cmml">2</mn><mo lspace="0em" rspace="0em" id="S4.SS2.SSS2.p8.5.m5.1.1.1" xref="S4.SS2.SSS2.p8.5.m5.1.1.1.cmml">​</mo><msup id="S4.SS2.SSS2.p8.5.m5.1.1.3" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.cmml"><mi id="S4.SS2.SSS2.p8.5.m5.1.1.3.2" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.2.cmml">e</mi><mrow id="S4.SS2.SSS2.p8.5.m5.1.1.3.3" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.3.cmml"><mo id="S4.SS2.SSS2.p8.5.m5.1.1.3.3a" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.3.cmml">−</mo><mn id="S4.SS2.SSS2.p8.5.m5.1.1.3.3.2" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.3.2.cmml">3</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p8.5.m5.1b"><apply id="S4.SS2.SSS2.p8.5.m5.1.1.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1"><times id="S4.SS2.SSS2.p8.5.m5.1.1.1.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1.1"></times><cn type="integer" id="S4.SS2.SSS2.p8.5.m5.1.1.2.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1.2">2</cn><apply id="S4.SS2.SSS2.p8.5.m5.1.1.3.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1.3"><csymbol cd="ambiguous" id="S4.SS2.SSS2.p8.5.m5.1.1.3.1.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1.3">superscript</csymbol><ci id="S4.SS2.SSS2.p8.5.m5.1.1.3.2.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.2">𝑒</ci><apply id="S4.SS2.SSS2.p8.5.m5.1.1.3.3.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.3"><minus id="S4.SS2.SSS2.p8.5.m5.1.1.3.3.1.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.3"></minus><cn type="integer" id="S4.SS2.SSS2.p8.5.m5.1.1.3.3.2.cmml" xref="S4.SS2.SSS2.p8.5.m5.1.1.3.3.2">3</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p8.5.m5.1c">2e^{-3}</annotation></semantics></math>, the accuracy has a sharp increase in the first few epochs in all datasets but may encounter severe oscillation in the following epochs which is because of the large learning rate can cause instability in model training. This phenomenon is especially usual in the training of FMs for the reason that they usually have a large number of parameters and the scale of gradient calculations will increase which may cause the gradient explosion. Moreover, models with large parameters tend to have more complex optimization spaces, resulting in the training process being more easily affected by noise and instability.</p>
</div>
<div id="S4.SS2.SSS2.p9" class="ltx_para">
<p id="S4.SS2.SSS2.p9.1" class="ltx_p"><span id="S4.SS2.SSS2.p9.1.1" class="ltx_text ltx_font_bold">Impact of LoRA ranks.</span>
In FedMS, we incorporate LoRA for model training and optimization. The rank in LoRA refers to the degree of model compression or pruning, and different rank settings can have an impact on the model training performance. We examine the training accuracy performance of FedMS under different LoRA ranks, specifically rank is set to 1, 4, 8, and 16.</p>
</div>
<div id="S4.SS2.SSS2.p10" class="ltx_para">
<p id="S4.SS2.SSS2.p10.1" class="ltx_p">From Fig. <a href="#S4.F11" title="Figure 11 ‣ 4.2.1 Impact of different system settings ‣ 4.2 Results Comparisons ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">11</span></a>, we can observe that as the LoRA rank increases, FedMS shows a certain trend in accuracy performance across different datasets: it performs the best at LoRA rank=4, but the model accuracy decreases as the LoRA rank further increases. This trend is particularly evident on the UCF101 dataset, where changes in LoRA rank can cause the performance of the final model to fluctuate within a 5% range.
One possible reason is that the semantic information that the UCF101 dataset contains is difficult for the model to capture and thus requires more training to optimize the model. A high LoRA rank can lead to a large optimization space which raises challenges for the training. On the other hand, the information patterns in the Food101 and EuroSAT datasets are relatively simpler and easy for the inserted low-rank matrices with different ranks to capture, so the model’s learning performance is not affected significantly.</p>
</div>
<div id="S4.SS2.SSS2.p11" class="ltx_para">
<p id="S4.SS2.SSS2.p11.1" class="ltx_p"><span id="S4.SS2.SSS2.p11.1.1" class="ltx_text ltx_font_bold">Impact of LoRA dropout rates.</span>
The dropout coefficient in LoRA affects the probability of applying dropout regularization during the model training process. In FedMS, we apply dropout to prevent neural networks from overfitting and enhance the model’s generalization ability. In our experiment, the group with a dropout rate of 0 will serve as the control group to represent the accuracy of the model without using dropout techniques. The groups with dropout rates of 0.1, 0.3, and 0.5 will serve as the experimental groups to investigate the impact of different dropout coefficients.</p>
</div>
<div id="S4.SS2.SSS2.p12" class="ltx_para">
<p id="S4.SS2.SSS2.p12.1" class="ltx_p">From Fig. <a href="#S4.F11" title="Figure 11 ‣ 4.2.1 Impact of different system settings ‣ 4.2 Results Comparisons ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">11</span></a>, we can clearly see that dropout has a significant effect on the final model accuracy when set to 0.1. It results in a noticeable improvement of 0.5%, 2%, and 0.6% respectively on the Food101, UFC101, and EuroSAT datasets. This improvement is quite significant, especially when the model itself already has a high accuracy on the dataset. Similar to the LoRA rank experiment, FedMS shows a decrease in accuracy on the UFC101 dataset with higher dropout rates. This is expected due to the more complex information patterns in the UFC101 dataset. Setting dropout too high increases the number of discarded neurons during model training, leading to a decrease in the model’s learning and expressive capacity. Similarly, due to the simpler information patterns in the Food101 and EuroSAT datasets, the higher dropout rates contribute to the improved accuracy of the FedMS model on these two datasets.</p>
</div>
<div id="S4.SS2.SSS2.p13" class="ltx_para">
<p id="S4.SS2.SSS2.p13.1" class="ltx_p"><span id="S4.SS2.SSS2.p13.1.1" class="ltx_text ltx_font_bold">Impact of weight decays.</span>
Weight decay is used to solve the overfitting problem. By adding a regularization term to the loss function, it can encourage the model to have small weight values during the training. In our experiment, we set up five different experimental groups with varying degrees of weight decay. The group with a weight decay value of 0 represents the training performance of FedMS without using weight decay.</p>
</div>
<div id="S4.SS2.SSS2.p14" class="ltx_para">
<p id="S4.SS2.SSS2.p14.2" class="ltx_p">From Fig. <a href="#S4.F11" title="Figure 11 ‣ 4.2.1 Impact of different system settings ‣ 4.2 Results Comparisons ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">11</span></a> we can conclude that weight decay has a different impact on different datasets. On the UCF101 dataset, it has a significant impact on the accuracy. When the weight decay is 0.5 it has an accuracy loss of <math id="S4.SS2.SSS2.p14.1.m1.1" class="ltx_Math" alttext="4.53\%" display="inline"><semantics id="S4.SS2.SSS2.p14.1.m1.1a"><mrow id="S4.SS2.SSS2.p14.1.m1.1.1" xref="S4.SS2.SSS2.p14.1.m1.1.1.cmml"><mn id="S4.SS2.SSS2.p14.1.m1.1.1.2" xref="S4.SS2.SSS2.p14.1.m1.1.1.2.cmml">4.53</mn><mo id="S4.SS2.SSS2.p14.1.m1.1.1.1" xref="S4.SS2.SSS2.p14.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p14.1.m1.1b"><apply id="S4.SS2.SSS2.p14.1.m1.1.1.cmml" xref="S4.SS2.SSS2.p14.1.m1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p14.1.m1.1.1.1.cmml" xref="S4.SS2.SSS2.p14.1.m1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p14.1.m1.1.1.2.cmml" xref="S4.SS2.SSS2.p14.1.m1.1.1.2">4.53</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p14.1.m1.1c">4.53\%</annotation></semantics></math> compared to the case when weight decay is 0.1. Weight decay has less impact on Food101 and UCF101 datasets, the accuracy under different weight decay varies less than <math id="S4.SS2.SSS2.p14.2.m2.1" class="ltx_Math" alttext="1\%" display="inline"><semantics id="S4.SS2.SSS2.p14.2.m2.1a"><mrow id="S4.SS2.SSS2.p14.2.m2.1.1" xref="S4.SS2.SSS2.p14.2.m2.1.1.cmml"><mn id="S4.SS2.SSS2.p14.2.m2.1.1.2" xref="S4.SS2.SSS2.p14.2.m2.1.1.2.cmml">1</mn><mo id="S4.SS2.SSS2.p14.2.m2.1.1.1" xref="S4.SS2.SSS2.p14.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p14.2.m2.1b"><apply id="S4.SS2.SSS2.p14.2.m2.1.1.cmml" xref="S4.SS2.SSS2.p14.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p14.2.m2.1.1.1.cmml" xref="S4.SS2.SSS2.p14.2.m2.1.1.1">percent</csymbol><cn type="integer" id="S4.SS2.SSS2.p14.2.m2.1.1.2.cmml" xref="S4.SS2.SSS2.p14.2.m2.1.1.2">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p14.2.m2.1c">1\%</annotation></semantics></math> on these two datasets. Overall, the performance of FedMS improves with the use of weight decay but decreases when the weight decay value is set too high. This is because large weight decay can lead to excessive constraints on parameters, limiting the effective information learned by the model.</p>
</div>
<div id="S4.SS2.SSS2.p15" class="ltx_para">
<p id="S4.SS2.SSS2.p15.1" class="ltx_p"><span id="S4.SS2.SSS2.p15.1.1" class="ltx_text ltx_font_bold">Impact of backdoor attacks.</span>
To further verify the robustness of FedMS we test the performance of FedMS and the three baselines under backdoor attack. We suppose that there is a certain ratio of malicious clients controlled by the attacker. The controlled malicious clients update the reverse weight of their local model in the weight aggregation every communication round to attack the FL system.</p>
</div>
<div id="S4.SS2.SSS2.p16" class="ltx_para">
<p id="S4.SS2.SSS2.p16.7" class="ltx_p">We set the ratio of malicious clients to the total number of clients to <math id="S4.SS2.SSS2.p16.1.m1.1" class="ltx_Math" alttext="20\%" display="inline"><semantics id="S4.SS2.SSS2.p16.1.m1.1a"><mrow id="S4.SS2.SSS2.p16.1.m1.1.1" xref="S4.SS2.SSS2.p16.1.m1.1.1.cmml"><mn id="S4.SS2.SSS2.p16.1.m1.1.1.2" xref="S4.SS2.SSS2.p16.1.m1.1.1.2.cmml">20</mn><mo id="S4.SS2.SSS2.p16.1.m1.1.1.1" xref="S4.SS2.SSS2.p16.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p16.1.m1.1b"><apply id="S4.SS2.SSS2.p16.1.m1.1.1.cmml" xref="S4.SS2.SSS2.p16.1.m1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.1.m1.1.1.1.cmml" xref="S4.SS2.SSS2.p16.1.m1.1.1.1">percent</csymbol><cn type="integer" id="S4.SS2.SSS2.p16.1.m1.1.1.2.cmml" xref="S4.SS2.SSS2.p16.1.m1.1.1.2">20</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p16.1.m1.1c">20\%</annotation></semantics></math> and compare the accuracies. From Fig. <a href="#S4.F8" title="Figure 8 ‣ 4.1.2 Baselines ‣ 4.1 Experiments set up ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a> we can observe that the backdoor attack can severely harm the performance of the algorithm. FedMS has the highest accuracy in all datasets. It has an accuracy gain of <math id="S4.SS2.SSS2.p16.2.m2.2" class="ltx_Math" alttext="6.97\%,14.94\%" display="inline"><semantics id="S4.SS2.SSS2.p16.2.m2.2a"><mrow id="S4.SS2.SSS2.p16.2.m2.2.2.2" xref="S4.SS2.SSS2.p16.2.m2.2.2.3.cmml"><mrow id="S4.SS2.SSS2.p16.2.m2.1.1.1.1" xref="S4.SS2.SSS2.p16.2.m2.1.1.1.1.cmml"><mn id="S4.SS2.SSS2.p16.2.m2.1.1.1.1.2" xref="S4.SS2.SSS2.p16.2.m2.1.1.1.1.2.cmml">6.97</mn><mo id="S4.SS2.SSS2.p16.2.m2.1.1.1.1.1" xref="S4.SS2.SSS2.p16.2.m2.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS2.p16.2.m2.2.2.2.3" xref="S4.SS2.SSS2.p16.2.m2.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS2.p16.2.m2.2.2.2.2" xref="S4.SS2.SSS2.p16.2.m2.2.2.2.2.cmml"><mn id="S4.SS2.SSS2.p16.2.m2.2.2.2.2.2" xref="S4.SS2.SSS2.p16.2.m2.2.2.2.2.2.cmml">14.94</mn><mo id="S4.SS2.SSS2.p16.2.m2.2.2.2.2.1" xref="S4.SS2.SSS2.p16.2.m2.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p16.2.m2.2b"><list id="S4.SS2.SSS2.p16.2.m2.2.2.3.cmml" xref="S4.SS2.SSS2.p16.2.m2.2.2.2"><apply id="S4.SS2.SSS2.p16.2.m2.1.1.1.1.cmml" xref="S4.SS2.SSS2.p16.2.m2.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.2.m2.1.1.1.1.1.cmml" xref="S4.SS2.SSS2.p16.2.m2.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p16.2.m2.1.1.1.1.2.cmml" xref="S4.SS2.SSS2.p16.2.m2.1.1.1.1.2">6.97</cn></apply><apply id="S4.SS2.SSS2.p16.2.m2.2.2.2.2.cmml" xref="S4.SS2.SSS2.p16.2.m2.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.2.m2.2.2.2.2.1.cmml" xref="S4.SS2.SSS2.p16.2.m2.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p16.2.m2.2.2.2.2.2.cmml" xref="S4.SS2.SSS2.p16.2.m2.2.2.2.2.2">14.94</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p16.2.m2.2c">6.97\%,14.94\%</annotation></semantics></math>, and <math id="S4.SS2.SSS2.p16.3.m3.1" class="ltx_Math" alttext="14.23\%" display="inline"><semantics id="S4.SS2.SSS2.p16.3.m3.1a"><mrow id="S4.SS2.SSS2.p16.3.m3.1.1" xref="S4.SS2.SSS2.p16.3.m3.1.1.cmml"><mn id="S4.SS2.SSS2.p16.3.m3.1.1.2" xref="S4.SS2.SSS2.p16.3.m3.1.1.2.cmml">14.23</mn><mo id="S4.SS2.SSS2.p16.3.m3.1.1.1" xref="S4.SS2.SSS2.p16.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p16.3.m3.1b"><apply id="S4.SS2.SSS2.p16.3.m3.1.1.cmml" xref="S4.SS2.SSS2.p16.3.m3.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.3.m3.1.1.1.cmml" xref="S4.SS2.SSS2.p16.3.m3.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p16.3.m3.1.1.2.cmml" xref="S4.SS2.SSS2.p16.3.m3.1.1.2">14.23</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p16.3.m3.1c">14.23\%</annotation></semantics></math> on three datasets compared to the highest accuracy of the three baselines. On the UCF101 dataset, the accuracy of the FT, LFFT, and, PromptFL have an accuracy of <math id="S4.SS2.SSS2.p16.4.m4.2" class="ltx_Math" alttext="1.20\%,65.09\%" display="inline"><semantics id="S4.SS2.SSS2.p16.4.m4.2a"><mrow id="S4.SS2.SSS2.p16.4.m4.2.2.2" xref="S4.SS2.SSS2.p16.4.m4.2.2.3.cmml"><mrow id="S4.SS2.SSS2.p16.4.m4.1.1.1.1" xref="S4.SS2.SSS2.p16.4.m4.1.1.1.1.cmml"><mn id="S4.SS2.SSS2.p16.4.m4.1.1.1.1.2" xref="S4.SS2.SSS2.p16.4.m4.1.1.1.1.2.cmml">1.20</mn><mo id="S4.SS2.SSS2.p16.4.m4.1.1.1.1.1" xref="S4.SS2.SSS2.p16.4.m4.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS2.p16.4.m4.2.2.2.3" xref="S4.SS2.SSS2.p16.4.m4.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS2.p16.4.m4.2.2.2.2" xref="S4.SS2.SSS2.p16.4.m4.2.2.2.2.cmml"><mn id="S4.SS2.SSS2.p16.4.m4.2.2.2.2.2" xref="S4.SS2.SSS2.p16.4.m4.2.2.2.2.2.cmml">65.09</mn><mo id="S4.SS2.SSS2.p16.4.m4.2.2.2.2.1" xref="S4.SS2.SSS2.p16.4.m4.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p16.4.m4.2b"><list id="S4.SS2.SSS2.p16.4.m4.2.2.3.cmml" xref="S4.SS2.SSS2.p16.4.m4.2.2.2"><apply id="S4.SS2.SSS2.p16.4.m4.1.1.1.1.cmml" xref="S4.SS2.SSS2.p16.4.m4.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.4.m4.1.1.1.1.1.cmml" xref="S4.SS2.SSS2.p16.4.m4.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p16.4.m4.1.1.1.1.2.cmml" xref="S4.SS2.SSS2.p16.4.m4.1.1.1.1.2">1.20</cn></apply><apply id="S4.SS2.SSS2.p16.4.m4.2.2.2.2.cmml" xref="S4.SS2.SSS2.p16.4.m4.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.4.m4.2.2.2.2.1.cmml" xref="S4.SS2.SSS2.p16.4.m4.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p16.4.m4.2.2.2.2.2.cmml" xref="S4.SS2.SSS2.p16.4.m4.2.2.2.2.2">65.09</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p16.4.m4.2c">1.20\%,65.09\%</annotation></semantics></math>, and <math id="S4.SS2.SSS2.p16.5.m5.1" class="ltx_Math" alttext="57.90\%" display="inline"><semantics id="S4.SS2.SSS2.p16.5.m5.1a"><mrow id="S4.SS2.SSS2.p16.5.m5.1.1" xref="S4.SS2.SSS2.p16.5.m5.1.1.cmml"><mn id="S4.SS2.SSS2.p16.5.m5.1.1.2" xref="S4.SS2.SSS2.p16.5.m5.1.1.2.cmml">57.90</mn><mo id="S4.SS2.SSS2.p16.5.m5.1.1.1" xref="S4.SS2.SSS2.p16.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p16.5.m5.1b"><apply id="S4.SS2.SSS2.p16.5.m5.1.1.cmml" xref="S4.SS2.SSS2.p16.5.m5.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.5.m5.1.1.1.cmml" xref="S4.SS2.SSS2.p16.5.m5.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p16.5.m5.1.1.2.cmml" xref="S4.SS2.SSS2.p16.5.m5.1.1.2">57.90</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p16.5.m5.1c">57.90\%</annotation></semantics></math> respectively. Three baselines have the lowest average on the EuroSAT dataset which is <math id="S4.SS2.SSS2.p16.6.m6.1" class="ltx_Math" alttext="36.11\%" display="inline"><semantics id="S4.SS2.SSS2.p16.6.m6.1a"><mrow id="S4.SS2.SSS2.p16.6.m6.1.1" xref="S4.SS2.SSS2.p16.6.m6.1.1.cmml"><mn id="S4.SS2.SSS2.p16.6.m6.1.1.2" xref="S4.SS2.SSS2.p16.6.m6.1.1.2.cmml">36.11</mn><mo id="S4.SS2.SSS2.p16.6.m6.1.1.1" xref="S4.SS2.SSS2.p16.6.m6.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p16.6.m6.1b"><apply id="S4.SS2.SSS2.p16.6.m6.1.1.cmml" xref="S4.SS2.SSS2.p16.6.m6.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.6.m6.1.1.1.cmml" xref="S4.SS2.SSS2.p16.6.m6.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p16.6.m6.1.1.2.cmml" xref="S4.SS2.SSS2.p16.6.m6.1.1.2">36.11</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p16.6.m6.1c">36.11\%</annotation></semantics></math>, and they achieve the highest average accuracy of <math id="S4.SS2.SSS2.p16.7.m7.1" class="ltx_Math" alttext="86.88\%" display="inline"><semantics id="S4.SS2.SSS2.p16.7.m7.1a"><mrow id="S4.SS2.SSS2.p16.7.m7.1.1" xref="S4.SS2.SSS2.p16.7.m7.1.1.cmml"><mn id="S4.SS2.SSS2.p16.7.m7.1.1.2" xref="S4.SS2.SSS2.p16.7.m7.1.1.2.cmml">86.88</mn><mo id="S4.SS2.SSS2.p16.7.m7.1.1.1" xref="S4.SS2.SSS2.p16.7.m7.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS2.p16.7.m7.1b"><apply id="S4.SS2.SSS2.p16.7.m7.1.1.cmml" xref="S4.SS2.SSS2.p16.7.m7.1.1"><csymbol cd="latexml" id="S4.SS2.SSS2.p16.7.m7.1.1.1.cmml" xref="S4.SS2.SSS2.p16.7.m7.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS2.p16.7.m7.1.1.2.cmml" xref="S4.SS2.SSS2.p16.7.m7.1.1.2">86.88</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS2.p16.7.m7.1c">86.88\%</annotation></semantics></math> on the Food101 dataset. FMs are pre-trained on large-scale datasets which enables them to have strong zero-shot ability. The FM we use has the highest zero-shot accuracy on the Food101 dataset among the three datasets which makes it more resistant to backdoor attacks when it is trained on the Food101 dataset. The FT algorithm is the most easily poisoned because it exposes all parameters to the attack. Although the LFFT algorithm performs inferior to FT when there are no attacks, it outperforms FT under backdoor attacks due to the reason that the frozen transformer layers can help maintain the feature extraction ability of FM.</p>
</div>
<figure id="S4.T1" class="ltx_table">
<table id="S4.T1.2" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T1.2.1.1" class="ltx_tr">
<th id="S4.T1.2.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t">Methods</th>
<th id="S4.T1.2.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">Proportion</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T1.2.2.1" class="ltx_tr">
<td id="S4.T1.2.2.1.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">FedMS (Stage 1)</td>
<td id="S4.T1.2.2.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.1%</td>
</tr>
<tr id="S4.T1.2.3.2" class="ltx_tr">
<td id="S4.T1.2.3.2.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">FedMS (Stage 2)</td>
<td id="S4.T1.2.3.2.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">0.27 %</td>
</tr>
<tr id="S4.T1.2.4.3" class="ltx_tr">
<td id="S4.T1.2.4.3.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">FT</td>
<td id="S4.T1.2.4.3.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">100%</td>
</tr>
<tr id="S4.T1.2.5.4" class="ltx_tr">
<td id="S4.T1.2.5.4.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">LFFT</td>
<td id="S4.T1.2.5.4.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">50%</td>
</tr>
<tr id="S4.T1.2.6.5" class="ltx_tr">
<td id="S4.T1.2.6.5.1" class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t">PromptFL</td>
<td id="S4.T1.2.6.5.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">0.005%</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T1.3.1.1" class="ltx_text" style="font-size:90%;">TABLE I</span>: </span><span id="S4.T1.4.2" class="ltx_text" style="font-size:90%;">Proportion of training parameters of different methods</span></figcaption>
</figure>
<figure id="S4.F13" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F13.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x21.png" id="S4.F13.sf1.g1" class="ltx_graphics ltx_img_landscape" width="461" height="368" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F13.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S4.F13.sf1.3.2" class="ltx_text" style="font-size:90%;">Food101</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F13.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x22.png" id="S4.F13.sf2.g1" class="ltx_graphics ltx_img_landscape" width="461" height="368" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F13.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S4.F13.sf2.3.2" class="ltx_text" style="font-size:90%;">UCF101</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F13.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2312.15926/assets/x23.png" id="S4.F13.sf3.g1" class="ltx_graphics ltx_img_landscape" width="461" height="368" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S4.F13.sf3.2.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="S4.F13.sf3.3.2" class="ltx_text" style="font-size:90%;">EuroSAT</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F13.4.1.1" class="ltx_text" style="font-size:90%;">Figure 13</span>: </span><span id="S4.F13.5.2" class="ltx_text" style="font-size:90%;">Comparison of the accuracy on different datasets using model with <span id="S4.F13.5.2.1" class="ltx_text ltx_font_typewriter">MoFM</span> (ViT-B/16) and model without <span id="S4.F13.5.2.2" class="ltx_text ltx_font_typewriter">MoFM</span> (ViT-L/14)</span></figcaption>
</figure>
</section>
<section id="S4.SS2.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.2.3 </span>Comparison of resource consumption</h4>

<div id="S4.SS2.SSS3.p1" class="ltx_para">
<p id="S4.SS2.SSS3.p1.6" class="ltx_p"><span id="S4.SS2.SSS3.p1.6.1" class="ltx_text ltx_font_bold">Comparison of the number of training parameters.</span>
Tab. <a href="#S4.T1" title="TABLE I ‣ 4.2.2 Impact of training settings ‣ 4.2 Results Comparisons ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">I</span></a> illustrates the proportion of the number of training parameters of FedMS and other baselines to the total parameters of the FM. Results show that FedMS only tunes <math id="S4.SS2.SSS3.p1.1.m1.1" class="ltx_Math" alttext="0.1\%" display="inline"><semantics id="S4.SS2.SSS3.p1.1.m1.1a"><mrow id="S4.SS2.SSS3.p1.1.m1.1.1" xref="S4.SS2.SSS3.p1.1.m1.1.1.cmml"><mn id="S4.SS2.SSS3.p1.1.m1.1.1.2" xref="S4.SS2.SSS3.p1.1.m1.1.1.2.cmml">0.1</mn><mo id="S4.SS2.SSS3.p1.1.m1.1.1.1" xref="S4.SS2.SSS3.p1.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS3.p1.1.m1.1b"><apply id="S4.SS2.SSS3.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS3.p1.1.m1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS3.p1.1.m1.1.1.1.cmml" xref="S4.SS2.SSS3.p1.1.m1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS3.p1.1.m1.1.1.2.cmml" xref="S4.SS2.SSS3.p1.1.m1.1.1.2">0.1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS3.p1.1.m1.1c">0.1\%</annotation></semantics></math> and <math id="S4.SS2.SSS3.p1.2.m2.1" class="ltx_Math" alttext="0.108\%" display="inline"><semantics id="S4.SS2.SSS3.p1.2.m2.1a"><mrow id="S4.SS2.SSS3.p1.2.m2.1.1" xref="S4.SS2.SSS3.p1.2.m2.1.1.cmml"><mn id="S4.SS2.SSS3.p1.2.m2.1.1.2" xref="S4.SS2.SSS3.p1.2.m2.1.1.2.cmml">0.108</mn><mo id="S4.SS2.SSS3.p1.2.m2.1.1.1" xref="S4.SS2.SSS3.p1.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS3.p1.2.m2.1b"><apply id="S4.SS2.SSS3.p1.2.m2.1.1.cmml" xref="S4.SS2.SSS3.p1.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS3.p1.2.m2.1.1.1.cmml" xref="S4.SS2.SSS3.p1.2.m2.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS3.p1.2.m2.1.1.2.cmml" xref="S4.SS2.SSS3.p1.2.m2.1.1.2">0.108</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS3.p1.2.m2.1c">0.108\%</annotation></semantics></math> of parameters on training stage one and training stage two. FT and LFFT tune <math id="S4.SS2.SSS3.p1.3.m3.1" class="ltx_Math" alttext="100\%" display="inline"><semantics id="S4.SS2.SSS3.p1.3.m3.1a"><mrow id="S4.SS2.SSS3.p1.3.m3.1.1" xref="S4.SS2.SSS3.p1.3.m3.1.1.cmml"><mn id="S4.SS2.SSS3.p1.3.m3.1.1.2" xref="S4.SS2.SSS3.p1.3.m3.1.1.2.cmml">100</mn><mo id="S4.SS2.SSS3.p1.3.m3.1.1.1" xref="S4.SS2.SSS3.p1.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS3.p1.3.m3.1b"><apply id="S4.SS2.SSS3.p1.3.m3.1.1.cmml" xref="S4.SS2.SSS3.p1.3.m3.1.1"><csymbol cd="latexml" id="S4.SS2.SSS3.p1.3.m3.1.1.1.cmml" xref="S4.SS2.SSS3.p1.3.m3.1.1.1">percent</csymbol><cn type="integer" id="S4.SS2.SSS3.p1.3.m3.1.1.2.cmml" xref="S4.SS2.SSS3.p1.3.m3.1.1.2">100</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS3.p1.3.m3.1c">100\%</annotation></semantics></math> and <math id="S4.SS2.SSS3.p1.4.m4.1" class="ltx_Math" alttext="50\%" display="inline"><semantics id="S4.SS2.SSS3.p1.4.m4.1a"><mrow id="S4.SS2.SSS3.p1.4.m4.1.1" xref="S4.SS2.SSS3.p1.4.m4.1.1.cmml"><mn id="S4.SS2.SSS3.p1.4.m4.1.1.2" xref="S4.SS2.SSS3.p1.4.m4.1.1.2.cmml">50</mn><mo id="S4.SS2.SSS3.p1.4.m4.1.1.1" xref="S4.SS2.SSS3.p1.4.m4.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS3.p1.4.m4.1b"><apply id="S4.SS2.SSS3.p1.4.m4.1.1.cmml" xref="S4.SS2.SSS3.p1.4.m4.1.1"><csymbol cd="latexml" id="S4.SS2.SSS3.p1.4.m4.1.1.1.cmml" xref="S4.SS2.SSS3.p1.4.m4.1.1.1">percent</csymbol><cn type="integer" id="S4.SS2.SSS3.p1.4.m4.1.1.2.cmml" xref="S4.SS2.SSS3.p1.4.m4.1.1.2">50</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS3.p1.4.m4.1c">50\%</annotation></semantics></math> of parameters. Notice that although PromptFL can save <math id="S4.SS2.SSS3.p1.5.m5.1" class="ltx_Math" alttext="0.095\%" display="inline"><semantics id="S4.SS2.SSS3.p1.5.m5.1a"><mrow id="S4.SS2.SSS3.p1.5.m5.1.1" xref="S4.SS2.SSS3.p1.5.m5.1.1.cmml"><mn id="S4.SS2.SSS3.p1.5.m5.1.1.2" xref="S4.SS2.SSS3.p1.5.m5.1.1.2.cmml">0.095</mn><mo id="S4.SS2.SSS3.p1.5.m5.1.1.1" xref="S4.SS2.SSS3.p1.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS3.p1.5.m5.1b"><apply id="S4.SS2.SSS3.p1.5.m5.1.1.cmml" xref="S4.SS2.SSS3.p1.5.m5.1.1"><csymbol cd="latexml" id="S4.SS2.SSS3.p1.5.m5.1.1.1.cmml" xref="S4.SS2.SSS3.p1.5.m5.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS3.p1.5.m5.1.1.2.cmml" xref="S4.SS2.SSS3.p1.5.m5.1.1.2">0.095</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS3.p1.5.m5.1c">0.095\%</annotation></semantics></math> to <math id="S4.SS2.SSS3.p1.6.m6.1" class="ltx_Math" alttext="0.103\%" display="inline"><semantics id="S4.SS2.SSS3.p1.6.m6.1a"><mrow id="S4.SS2.SSS3.p1.6.m6.1.1" xref="S4.SS2.SSS3.p1.6.m6.1.1.cmml"><mn id="S4.SS2.SSS3.p1.6.m6.1.1.2" xref="S4.SS2.SSS3.p1.6.m6.1.1.2.cmml">0.103</mn><mo id="S4.SS2.SSS3.p1.6.m6.1.1.1" xref="S4.SS2.SSS3.p1.6.m6.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS3.p1.6.m6.1b"><apply id="S4.SS2.SSS3.p1.6.m6.1.1.cmml" xref="S4.SS2.SSS3.p1.6.m6.1.1"><csymbol cd="latexml" id="S4.SS2.SSS3.p1.6.m6.1.1.1.cmml" xref="S4.SS2.SSS3.p1.6.m6.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS3.p1.6.m6.1.1.2.cmml" xref="S4.SS2.SSS3.p1.6.m6.1.1.2">0.103</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS3.p1.6.m6.1c">0.103\%</annotation></semantics></math> trainable parameters compared to FedMS, it has a cost of severe performance drop. FedMS achieves the best trade-off between training parameter saving and model performance.</p>
</div>
<div id="S4.SS2.SSS3.p2" class="ltx_para">
<p id="S4.SS2.SSS3.p2.1" class="ltx_p"><span id="S4.SS2.SSS3.p2.1.1" class="ltx_text ltx_font_bold">Comparison of transmission time.</span>
Considering the scenario in mobile computing and the Internet of Things, we test the proposed FedMS in different bandwidth conditions. Specifically, we set the bandwidth to be 0.1 MB/s, 1 MB/s, and 10 MB/s which are typical bandwidths in modern mobile communication networks.</p>
</div>
<div id="S4.SS2.SSS3.p3" class="ltx_para">
<p id="S4.SS2.SSS3.p3.1" class="ltx_p">Fig. <a href="#S4.F8" title="Figure 8 ‣ 4.1.2 Baselines ‣ 4.1 Experiments set up ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a> illustrates the communication time of the proposed FedMS and other baselines on different datasets per communication round under different network bandwidths. Low bandwidth results in long data transmission time for parameter aggregation in each communication round thus impairs the training efficiency of FL.</p>
</div>
<div id="S4.SS2.SSS3.p4" class="ltx_para">
<p id="S4.SS2.SSS3.p4.1" class="ltx_p">From the results, we can observe that when the bandwidth is 0.1 MB/s, the time for FedMS to finish a communication round is 3.08 seconds while the communication time for FT, LFFT, and PromptFL per communication round is 5,984 seconds, 2,992 seconds, and 0.32 seconds. FedMS save <math id="S4.SS2.SSS3.p4.1.m1.1" class="ltx_Math" alttext="99.95\%" display="inline"><semantics id="S4.SS2.SSS3.p4.1.m1.1a"><mrow id="S4.SS2.SSS3.p4.1.m1.1.1" xref="S4.SS2.SSS3.p4.1.m1.1.1.cmml"><mn id="S4.SS2.SSS3.p4.1.m1.1.1.2" xref="S4.SS2.SSS3.p4.1.m1.1.1.2.cmml">99.95</mn><mo id="S4.SS2.SSS3.p4.1.m1.1.1.1" xref="S4.SS2.SSS3.p4.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS3.p4.1.m1.1b"><apply id="S4.SS2.SSS3.p4.1.m1.1.1.cmml" xref="S4.SS2.SSS3.p4.1.m1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS3.p4.1.m1.1.1.1.cmml" xref="S4.SS2.SSS3.p4.1.m1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS3.p4.1.m1.1.1.2.cmml" xref="S4.SS2.SSS3.p4.1.m1.1.1.2">99.95</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS3.p4.1.m1.1c">99.95\%</annotation></semantics></math> communication time compared to the FT algorithm. When the bandwidth is 1 MB/s and 10 MB/s, the difference in training time between different algorithms is reduced. FedMS and PromptFL have communication times of fewer than 5 seconds per communication round in all network bandwidth conditions. Although PromptFL has the minimum communication resource consumption, both FedMS and PromptFL are communication efficient in real-world scenarios and FedMS has much higher accuracy on all datasets compared with PromptFL.</p>
</div>
</section>
<section id="S4.SS2.SSS4" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.2.4 </span>Ablation study</h4>

<figure id="S4.T2" class="ltx_table">
<table id="S4.T2.2" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T2.2.1.1" class="ltx_tr">
<th id="S4.T2.2.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Model type</th>
<th id="S4.T2.2.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">Number of parameters</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T2.2.2.1" class="ltx_tr">
<th id="S4.T2.2.2.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t">Model with <span id="S4.T2.2.2.1.1.1" class="ltx_text ltx_font_typewriter">MoFM</span> (Vit-B/16)</th>
<td id="S4.T2.2.2.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">311M</td>
</tr>
<tr id="S4.T2.2.3.2" class="ltx_tr">
<th id="S4.T2.2.3.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_r ltx_border_t">Model without <span id="S4.T2.2.3.2.1.1" class="ltx_text ltx_font_typewriter">MoFM</span> (Vit-L/14)</th>
<td id="S4.T2.2.3.2.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">428M</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T2.3.1.1" class="ltx_text" style="font-size:90%;">TABLE II</span>: </span><span id="S4.T2.4.2" class="ltx_text" style="font-size:90%;">Comparison of the number of parameters of the model</span></figcaption>
</figure>
<div id="S4.SS2.SSS4.p1" class="ltx_para">
<p id="S4.SS2.SSS4.p1.1" class="ltx_p"><span id="S4.SS2.SSS4.p1.1.1" class="ltx_text ltx_font_bold">Impact of Mixture of Foundation Models architecture.</span>
We compare the image classification accuracy of the model with the <span id="S4.SS2.SSS4.p1.1.2" class="ltx_text ltx_font_typewriter">MoFM</span> architecture using the visual encoder ViT-B/16 and the model without the <span id="S4.SS2.SSS4.p1.1.3" class="ltx_text ltx_font_typewriter">MoFM</span> architecture but with a visual encoder ViT-L/14, which has a much larger number of parameters. The first model is trained through all two stages of FedMS and the second model is trained through the first stage of FedMS. The total number of epochs of both models is set to 50 to ensure fair comparison. The comparison of the total number of parameters is shown in Tab. <a href="#S4.T2" title="TABLE II ‣ 4.2.4 Ablation study ‣ 4.2 Results Comparisons ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">II</span></a>. The model with <span id="S4.SS2.SSS4.p1.1.4" class="ltx_text ltx_font_typewriter">MoFM</span> architecture but with a smaller visual encoder has <math id="S4.SS2.SSS4.p1.1.m1.1" class="ltx_Math" alttext="27.33\%" display="inline"><semantics id="S4.SS2.SSS4.p1.1.m1.1a"><mrow id="S4.SS2.SSS4.p1.1.m1.1.1" xref="S4.SS2.SSS4.p1.1.m1.1.1.cmml"><mn id="S4.SS2.SSS4.p1.1.m1.1.1.2" xref="S4.SS2.SSS4.p1.1.m1.1.1.2.cmml">27.33</mn><mo id="S4.SS2.SSS4.p1.1.m1.1.1.1" xref="S4.SS2.SSS4.p1.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p1.1.m1.1b"><apply id="S4.SS2.SSS4.p1.1.m1.1.1.cmml" xref="S4.SS2.SSS4.p1.1.m1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p1.1.m1.1.1.1.cmml" xref="S4.SS2.SSS4.p1.1.m1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p1.1.m1.1.1.2.cmml" xref="S4.SS2.SSS4.p1.1.m1.1.1.2">27.33</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p1.1.m1.1c">27.33\%</annotation></semantics></math> parameter less than another model.</p>
</div>
<div id="S4.SS2.SSS4.p2" class="ltx_para">
<p id="S4.SS2.SSS4.p2.3" class="ltx_p">We can observe from Fig. <a href="#S4.F13" title="Figure 13 ‣ 4.2.2 Impact of training settings ‣ 4.2 Results Comparisons ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">13</span></a> that although with much fewer parameters, the model with the <span id="S4.SS2.SSS4.p2.3.1" class="ltx_text ltx_font_typewriter">MoFM</span> architecture and trained through complete two stages achieves a higher accuracy on all datasets. It has an average accuracy increase of <math id="S4.SS2.SSS4.p2.1.m1.1" class="ltx_Math" alttext="2.36\%" display="inline"><semantics id="S4.SS2.SSS4.p2.1.m1.1a"><mrow id="S4.SS2.SSS4.p2.1.m1.1.1" xref="S4.SS2.SSS4.p2.1.m1.1.1.cmml"><mn id="S4.SS2.SSS4.p2.1.m1.1.1.2" xref="S4.SS2.SSS4.p2.1.m1.1.1.2.cmml">2.36</mn><mo id="S4.SS2.SSS4.p2.1.m1.1.1.1" xref="S4.SS2.SSS4.p2.1.m1.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p2.1.m1.1b"><apply id="S4.SS2.SSS4.p2.1.m1.1.1.cmml" xref="S4.SS2.SSS4.p2.1.m1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p2.1.m1.1.1.1.cmml" xref="S4.SS2.SSS4.p2.1.m1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p2.1.m1.1.1.2.cmml" xref="S4.SS2.SSS4.p2.1.m1.1.1.2">2.36</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p2.1.m1.1c">2.36\%</annotation></semantics></math> on all datasets. More specifically, with an increase of <math id="S4.SS2.SSS4.p2.2.m2.2" class="ltx_Math" alttext="2.03\%,3.24\%" display="inline"><semantics id="S4.SS2.SSS4.p2.2.m2.2a"><mrow id="S4.SS2.SSS4.p2.2.m2.2.2.2" xref="S4.SS2.SSS4.p2.2.m2.2.2.3.cmml"><mrow id="S4.SS2.SSS4.p2.2.m2.1.1.1.1" xref="S4.SS2.SSS4.p2.2.m2.1.1.1.1.cmml"><mn id="S4.SS2.SSS4.p2.2.m2.1.1.1.1.2" xref="S4.SS2.SSS4.p2.2.m2.1.1.1.1.2.cmml">2.03</mn><mo id="S4.SS2.SSS4.p2.2.m2.1.1.1.1.1" xref="S4.SS2.SSS4.p2.2.m2.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS4.p2.2.m2.2.2.2.3" xref="S4.SS2.SSS4.p2.2.m2.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS4.p2.2.m2.2.2.2.2" xref="S4.SS2.SSS4.p2.2.m2.2.2.2.2.cmml"><mn id="S4.SS2.SSS4.p2.2.m2.2.2.2.2.2" xref="S4.SS2.SSS4.p2.2.m2.2.2.2.2.2.cmml">3.24</mn><mo id="S4.SS2.SSS4.p2.2.m2.2.2.2.2.1" xref="S4.SS2.SSS4.p2.2.m2.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p2.2.m2.2b"><list id="S4.SS2.SSS4.p2.2.m2.2.2.3.cmml" xref="S4.SS2.SSS4.p2.2.m2.2.2.2"><apply id="S4.SS2.SSS4.p2.2.m2.1.1.1.1.cmml" xref="S4.SS2.SSS4.p2.2.m2.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p2.2.m2.1.1.1.1.1.cmml" xref="S4.SS2.SSS4.p2.2.m2.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p2.2.m2.1.1.1.1.2.cmml" xref="S4.SS2.SSS4.p2.2.m2.1.1.1.1.2">2.03</cn></apply><apply id="S4.SS2.SSS4.p2.2.m2.2.2.2.2.cmml" xref="S4.SS2.SSS4.p2.2.m2.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS4.p2.2.m2.2.2.2.2.1.cmml" xref="S4.SS2.SSS4.p2.2.m2.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p2.2.m2.2.2.2.2.2.cmml" xref="S4.SS2.SSS4.p2.2.m2.2.2.2.2.2">3.24</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p2.2.m2.2c">2.03\%,3.24\%</annotation></semantics></math>, and <math id="S4.SS2.SSS4.p2.3.m3.1" class="ltx_Math" alttext="1.82\%" display="inline"><semantics id="S4.SS2.SSS4.p2.3.m3.1a"><mrow id="S4.SS2.SSS4.p2.3.m3.1.1" xref="S4.SS2.SSS4.p2.3.m3.1.1.cmml"><mn id="S4.SS2.SSS4.p2.3.m3.1.1.2" xref="S4.SS2.SSS4.p2.3.m3.1.1.2.cmml">1.82</mn><mo id="S4.SS2.SSS4.p2.3.m3.1.1.1" xref="S4.SS2.SSS4.p2.3.m3.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p2.3.m3.1b"><apply id="S4.SS2.SSS4.p2.3.m3.1.1.cmml" xref="S4.SS2.SSS4.p2.3.m3.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p2.3.m3.1.1.1.cmml" xref="S4.SS2.SSS4.p2.3.m3.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p2.3.m3.1.1.2.cmml" xref="S4.SS2.SSS4.p2.3.m3.1.1.2">1.82</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p2.3.m3.1c">1.82\%</annotation></semantics></math> on Food101, UCF101, and EuroSAT datasets.</p>
</div>
<div id="S4.SS2.SSS4.p3" class="ltx_para">
<p id="S4.SS2.SSS4.p3.1" class="ltx_p">This surprising result demonstrates the superiority of the <span id="S4.SS2.SSS4.p3.1.1" class="ltx_text ltx_font_typewriter">MoFM</span> architecture as it can intelligently assign different weights to different experts according to the characteristics of the images to be classified. This enables better generalization ability to data that is out of the distribution of clients’ local datasets and enables better personalization ability to data that follow the local distribution of the local clients’ local datasets.</p>
</div>
<div id="S4.SS2.SSS4.p4" class="ltx_para">
<p id="S4.SS2.SSS4.p4.5" class="ltx_p"><span id="S4.SS2.SSS4.p4.5.1" class="ltx_text ltx_font_bold">Impact of aggregation of gate parameters.</span>
We compare the image classification accuracy of FedMS and FedMS with all gate parameters activated in the second training stage. We can observe from Tab. <a href="#S4.T4" title="TABLE IV ‣ 4.2.4 Ablation study ‣ 4.2 Results Comparisons ‣ 4 Experiments ‣ FedMS: Federated Learning with Mixture of Sparsely Activated Foundations Models" class="ltx_ref"><span class="ltx_text ltx_ref_tag">IV</span></a> that by only fine-tuning the last layer of the gate adapter, we can achieve an accuracy of <math id="S4.SS2.SSS4.p4.1.m1.2" class="ltx_Math" alttext="93.73\%,87.33\%" display="inline"><semantics id="S4.SS2.SSS4.p4.1.m1.2a"><mrow id="S4.SS2.SSS4.p4.1.m1.2.2.2" xref="S4.SS2.SSS4.p4.1.m1.2.2.3.cmml"><mrow id="S4.SS2.SSS4.p4.1.m1.1.1.1.1" xref="S4.SS2.SSS4.p4.1.m1.1.1.1.1.cmml"><mn id="S4.SS2.SSS4.p4.1.m1.1.1.1.1.2" xref="S4.SS2.SSS4.p4.1.m1.1.1.1.1.2.cmml">93.73</mn><mo id="S4.SS2.SSS4.p4.1.m1.1.1.1.1.1" xref="S4.SS2.SSS4.p4.1.m1.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS4.p4.1.m1.2.2.2.3" xref="S4.SS2.SSS4.p4.1.m1.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS4.p4.1.m1.2.2.2.2" xref="S4.SS2.SSS4.p4.1.m1.2.2.2.2.cmml"><mn id="S4.SS2.SSS4.p4.1.m1.2.2.2.2.2" xref="S4.SS2.SSS4.p4.1.m1.2.2.2.2.2.cmml">87.33</mn><mo id="S4.SS2.SSS4.p4.1.m1.2.2.2.2.1" xref="S4.SS2.SSS4.p4.1.m1.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p4.1.m1.2b"><list id="S4.SS2.SSS4.p4.1.m1.2.2.3.cmml" xref="S4.SS2.SSS4.p4.1.m1.2.2.2"><apply id="S4.SS2.SSS4.p4.1.m1.1.1.1.1.cmml" xref="S4.SS2.SSS4.p4.1.m1.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p4.1.m1.1.1.1.1.1.cmml" xref="S4.SS2.SSS4.p4.1.m1.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p4.1.m1.1.1.1.1.2.cmml" xref="S4.SS2.SSS4.p4.1.m1.1.1.1.1.2">93.73</cn></apply><apply id="S4.SS2.SSS4.p4.1.m1.2.2.2.2.cmml" xref="S4.SS2.SSS4.p4.1.m1.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS4.p4.1.m1.2.2.2.2.1.cmml" xref="S4.SS2.SSS4.p4.1.m1.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p4.1.m1.2.2.2.2.2.cmml" xref="S4.SS2.SSS4.p4.1.m1.2.2.2.2.2">87.33</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p4.1.m1.2c">93.73\%,87.33\%</annotation></semantics></math>, and <math id="S4.SS2.SSS4.p4.2.m2.1" class="ltx_Math" alttext="99.46\%" display="inline"><semantics id="S4.SS2.SSS4.p4.2.m2.1a"><mrow id="S4.SS2.SSS4.p4.2.m2.1.1" xref="S4.SS2.SSS4.p4.2.m2.1.1.cmml"><mn id="S4.SS2.SSS4.p4.2.m2.1.1.2" xref="S4.SS2.SSS4.p4.2.m2.1.1.2.cmml">99.46</mn><mo id="S4.SS2.SSS4.p4.2.m2.1.1.1" xref="S4.SS2.SSS4.p4.2.m2.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p4.2.m2.1b"><apply id="S4.SS2.SSS4.p4.2.m2.1.1.cmml" xref="S4.SS2.SSS4.p4.2.m2.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p4.2.m2.1.1.1.cmml" xref="S4.SS2.SSS4.p4.2.m2.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p4.2.m2.1.1.2.cmml" xref="S4.SS2.SSS4.p4.2.m2.1.1.2">99.46</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p4.2.m2.1c">99.46\%</annotation></semantics></math> in Food101, UCF101, and EuroSAT datasets which is <math id="S4.SS2.SSS4.p4.3.m3.2" class="ltx_Math" alttext="0.09\%,0.66\%" display="inline"><semantics id="S4.SS2.SSS4.p4.3.m3.2a"><mrow id="S4.SS2.SSS4.p4.3.m3.2.2.2" xref="S4.SS2.SSS4.p4.3.m3.2.2.3.cmml"><mrow id="S4.SS2.SSS4.p4.3.m3.1.1.1.1" xref="S4.SS2.SSS4.p4.3.m3.1.1.1.1.cmml"><mn id="S4.SS2.SSS4.p4.3.m3.1.1.1.1.2" xref="S4.SS2.SSS4.p4.3.m3.1.1.1.1.2.cmml">0.09</mn><mo id="S4.SS2.SSS4.p4.3.m3.1.1.1.1.1" xref="S4.SS2.SSS4.p4.3.m3.1.1.1.1.1.cmml">%</mo></mrow><mo id="S4.SS2.SSS4.p4.3.m3.2.2.2.3" xref="S4.SS2.SSS4.p4.3.m3.2.2.3.cmml">,</mo><mrow id="S4.SS2.SSS4.p4.3.m3.2.2.2.2" xref="S4.SS2.SSS4.p4.3.m3.2.2.2.2.cmml"><mn id="S4.SS2.SSS4.p4.3.m3.2.2.2.2.2" xref="S4.SS2.SSS4.p4.3.m3.2.2.2.2.2.cmml">0.66</mn><mo id="S4.SS2.SSS4.p4.3.m3.2.2.2.2.1" xref="S4.SS2.SSS4.p4.3.m3.2.2.2.2.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p4.3.m3.2b"><list id="S4.SS2.SSS4.p4.3.m3.2.2.3.cmml" xref="S4.SS2.SSS4.p4.3.m3.2.2.2"><apply id="S4.SS2.SSS4.p4.3.m3.1.1.1.1.cmml" xref="S4.SS2.SSS4.p4.3.m3.1.1.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p4.3.m3.1.1.1.1.1.cmml" xref="S4.SS2.SSS4.p4.3.m3.1.1.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p4.3.m3.1.1.1.1.2.cmml" xref="S4.SS2.SSS4.p4.3.m3.1.1.1.1.2">0.09</cn></apply><apply id="S4.SS2.SSS4.p4.3.m3.2.2.2.2.cmml" xref="S4.SS2.SSS4.p4.3.m3.2.2.2.2"><csymbol cd="latexml" id="S4.SS2.SSS4.p4.3.m3.2.2.2.2.1.cmml" xref="S4.SS2.SSS4.p4.3.m3.2.2.2.2.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p4.3.m3.2.2.2.2.2.cmml" xref="S4.SS2.SSS4.p4.3.m3.2.2.2.2.2">0.66</cn></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p4.3.m3.2c">0.09\%,0.66\%</annotation></semantics></math>, and <math id="S4.SS2.SSS4.p4.4.m4.1" class="ltx_Math" alttext="0.35\%" display="inline"><semantics id="S4.SS2.SSS4.p4.4.m4.1a"><mrow id="S4.SS2.SSS4.p4.4.m4.1.1" xref="S4.SS2.SSS4.p4.4.m4.1.1.cmml"><mn id="S4.SS2.SSS4.p4.4.m4.1.1.2" xref="S4.SS2.SSS4.p4.4.m4.1.1.2.cmml">0.35</mn><mo id="S4.SS2.SSS4.p4.4.m4.1.1.1" xref="S4.SS2.SSS4.p4.4.m4.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p4.4.m4.1b"><apply id="S4.SS2.SSS4.p4.4.m4.1.1.cmml" xref="S4.SS2.SSS4.p4.4.m4.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p4.4.m4.1.1.1.cmml" xref="S4.SS2.SSS4.p4.4.m4.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p4.4.m4.1.1.2.cmml" xref="S4.SS2.SSS4.p4.4.m4.1.1.2">0.35</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p4.4.m4.1c">0.35\%</annotation></semantics></math> higher than tuning full parameters of the gate model. Moreover, we save the communication resource consumption by <math id="S4.SS2.SSS4.p4.5.m5.1" class="ltx_Math" alttext="97.69\%" display="inline"><semantics id="S4.SS2.SSS4.p4.5.m5.1a"><mrow id="S4.SS2.SSS4.p4.5.m5.1.1" xref="S4.SS2.SSS4.p4.5.m5.1.1.cmml"><mn id="S4.SS2.SSS4.p4.5.m5.1.1.2" xref="S4.SS2.SSS4.p4.5.m5.1.1.2.cmml">97.69</mn><mo id="S4.SS2.SSS4.p4.5.m5.1.1.1" xref="S4.SS2.SSS4.p4.5.m5.1.1.1.cmml">%</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.SSS4.p4.5.m5.1b"><apply id="S4.SS2.SSS4.p4.5.m5.1.1.cmml" xref="S4.SS2.SSS4.p4.5.m5.1.1"><csymbol cd="latexml" id="S4.SS2.SSS4.p4.5.m5.1.1.1.cmml" xref="S4.SS2.SSS4.p4.5.m5.1.1.1">percent</csymbol><cn type="float" id="S4.SS2.SSS4.p4.5.m5.1.1.2.cmml" xref="S4.SS2.SSS4.p4.5.m5.1.1.2">97.69</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.SSS4.p4.5.m5.1c">97.69\%</annotation></semantics></math>.</p>
</div>
<div id="S4.SS2.SSS4.p5" class="ltx_para">
<p id="S4.SS2.SSS4.p5.1" class="ltx_p">This is because the parameters changing of the local expert during training can cause the relationship between the global expert and the local expert to keep changing which makes it hard for the gate model to decide the decision weight it assigns to the two FMs and can cause unstableness in training which harm the performance. By freezing the gate parameters and inserting a lightweight gate adapter, the gate model can quickly adapt to the newly optimized parameters of the local expert while maintaining the feature extraction ability.</p>
</div>
<figure id="S4.T3" class="ltx_table">
<table id="S4.T3.2" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T3.2.1.1" class="ltx_tr">
<th id="S4.T3.2.1.1.1" class="ltx_td ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t"></th>
<th id="S4.T3.2.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" colspan="2">Accuracy</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T3.2.2.1" class="ltx_tr">
<td id="S4.T3.2.2.1.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r">Datasets</td>
<td id="S4.T3.2.2.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">Gate adapter only</td>
<td id="S4.T3.2.2.1.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">All gate parameters</td>
</tr>
<tr id="S4.T3.2.3.2" class="ltx_tr">
<td id="S4.T3.2.3.2.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">Food101</td>
<td id="S4.T3.2.3.2.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">93.73%</td>
<td id="S4.T3.2.3.2.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">93.64%</td>
</tr>
<tr id="S4.T3.2.4.3" class="ltx_tr">
<td id="S4.T3.2.4.3.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">UCF101</td>
<td id="S4.T3.2.4.3.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">87.33%</td>
<td id="S4.T3.2.4.3.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">86.67%</td>
</tr>
<tr id="S4.T3.2.5.4" class="ltx_tr">
<td id="S4.T3.2.5.4.1" class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t">EuroSAT</td>
<td id="S4.T3.2.5.4.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">99.46%</td>
<td id="S4.T3.2.5.4.3" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">99.11%</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T3.3.1.1" class="ltx_text" style="font-size:90%;">TABLE III</span>: </span><span id="S4.T3.4.2" class="ltx_text" style="font-size:90%;">Comparison of accuracy on different datasets</span></figcaption>
</figure>
<figure id="S4.T4" class="ltx_table">
<table id="S4.T4.2" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T4.2.1.1" class="ltx_tr">
<th id="S4.T4.2.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t">Model types</th>
<th id="S4.T4.2.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t">Number of parameters</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T4.2.2.1" class="ltx_tr">
<td id="S4.T4.2.2.1.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">Gate adapter</td>
<td id="S4.T4.2.2.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">264.19k</td>
</tr>
<tr id="S4.T4.2.3.2" class="ltx_tr">
<td id="S4.T4.2.3.2.1" class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t">Gate model</td>
<td id="S4.T4.2.3.2.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">11.44M</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T4.3.1.1" class="ltx_text" style="font-size:90%;">TABLE IV</span>: </span><span id="S4.T4.4.2" class="ltx_text" style="font-size:90%;">Comparison of the number of parameters of the gate adapter and the gate model</span></figcaption>
</figure>
</section>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span><span id="S5.1.1" class="ltx_text ltx_font_smallcaps">Conclusions</span>
</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">In this paper, we propose a novel FedMS algorithm that contains two training stages
to address the computation, communication, and statistical heterogeneous challenges in federated learning with foundation models. In the first stage, we freeze the pre-trained FM weight and insert low-rank decomposition matrices in every transformer block. We activate all the inserted matrices to better extract global feature information. In every communication round only the parameters of low-rank decomposition matrices join the weight aggregation. In the second stage, we take FM trained in the first stage as the global expert and construct another local expert to provide personalization for individual clients. We are the first to form the global expert and the local expert as a Mixture of Foundation Models (<span id="S5.p1.1.1" class="ltx_text ltx_font_typewriter">MoFM</span>) in federated learning. We specially design and insert a gate adapter into the gate model to help assign the decision weight of the two experts. Moreover, to enable efficient training in computation-scarce scenarios, we propose a Sparsely
Activated LoRA (<span id="S5.p1.1.2" class="ltx_text ltx_font_typewriter">SAL</span>) algorithm to activate the low-rank adaptation matrices progressively according to past accuracies in the Capability Queue.</p>
</div>
<div id="S5.p2" class="ltx_para">
<p id="S5.p2.1" class="ltx_p">We test the performance of FedMS through extensive experiments in various settings, and results show that FedMS outperforms other SOTA baselines.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
J. D. M.-W. C. Kenton and L. K. Toutanova, “Bert: Pre-training of deep bidirectional transformers for language understanding,” in <em id="bib.bib1.1.1" class="ltx_emph ltx_font_italic">Proceedings of NAACL-HLT</em>, 2019, pp. 4171–4186.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
T. Brown, B. Mann, N. Ryder, M. Subbiah, J. D. Kaplan, P. Dhariwal, A. Neelakantan, P. Shyam, G. Sastry, A. Askell <em id="bib.bib2.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Language models are few-shot learners,” <em id="bib.bib2.2.2" class="ltx_emph ltx_font_italic">Advances in neural information processing systems</em>, vol. 33, pp. 1877–1901, 2020.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
A. Radford, J. W. Kim, C. Hallacy, A. Ramesh, G. Goh, S. Agarwal, G. Sastry, A. Askell, P. Mishkin, J. Clark <em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Learning transferable visual models from natural language supervision,” in <em id="bib.bib3.2.2" class="ltx_emph ltx_font_italic">International conference on machine learning</em>.   PMLR, 2021, pp. 8748–8763.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
J. Betker, G. Goh, L. Jing, T. Brooks, J. Wang, L. Li, L. Ouyang, J. Zhuang, J. Lee, Y. Guo <em id="bib.bib4.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Improving image generation with better captions,” 2023.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
B. McMahan, E. Moore, D. Ramage, S. Hampson, and B. A. y Arcas, “Communication-efficient learning of deep networks from decentralized data,” in <em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">Artificial intelligence and statistics</em>.   PMLR, 2017, pp. 1273–1282.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
T. Li, A. K. Sahu, M. Zaheer, M. Sanjabi, A. Talwalkar, and V. Smith, “Federated optimization in heterogeneous networks,” <em id="bib.bib6.1.1" class="ltx_emph ltx_font_italic">Proceedings of Machine learning and systems</em>, vol. 2, pp. 429–450, 2020.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Q. Li, B. He, and D. Song, “Model-contrastive federated learning,” in <em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">Proceedings of the IEEE/CVF conference on computer vision and pattern recognition</em>, 2021, pp. 10 713–10 722.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
J. Zhang, Z. Li, B. Li, J. Xu, S. Wu, S. Ding, and C. Wu, “Federated learning with label distribution skew via logits calibration,” in <em id="bib.bib8.1.1" class="ltx_emph ltx_font_italic">International Conference on Machine Learning</em>.   PMLR, 2022, pp. 26 311–26 329.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
E. L. Zec, O. Mogren, J. Martinsson, L. R. Sütfeld, and D. Gillblad, “Specialized federated learning using a mixture of experts,” <em id="bib.bib9.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2010.02056</em>, 2020.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Y. Mao, Z. Zhao, G. Yan, Y. Liu, T. Lan, L. Song, and W. Ding, “Communication-efficient federated learning with adaptive quantization,” <em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">ACM Transactions on Intelligent Systems and Technology (TIST)</em>, vol. 13, no. 4, pp. 1–26, 2022.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
A. Huang, Y. Chen, Y. Liu, T. Chen, and Q. Yang, “Rpn: A residual pooling network for efficient federated learning,” <em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2001.08600</em>, 2020.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
F. Haddadpour, M. M. Kamani, A. Mokhtari, and M. Mahdavi, “Federated learning with compression: Unified analysis and sharp guarantees,” in <em id="bib.bib12.1.1" class="ltx_emph ltx_font_italic">International Conference on Artificial Intelligence and Statistics</em>.   PMLR, 2021, pp. 2350–2358.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
R. Chen, L. Li, K. Xue, C. Zhang, M. Pan, and Y. Fang, “Energy efficient federated learning over heterogeneous mobile devices via joint design of weight quantization and wireless transmission,” <em id="bib.bib13.1.1" class="ltx_emph ltx_font_italic">IEEE Transactions on Mobile Computing</em>, vol. 22, no. 12, pp. 7451–7465, 2023.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Z. Zhang, Z. Gao, Y. Guo, and Y. Gong, “Scalable and low-latency federated learning with cooperative mobile edge networking,” <em id="bib.bib14.1.1" class="ltx_emph ltx_font_italic">IEEE Transactions on Mobile Computing</em>, vol. 23, no. 1, pp. 812–822, 2024.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Z. Qu, S. Guo, H. Wang, B. Ye, Y. Wang, A. Y. Zomaya, and B. Tang, “Partial synchronization to accelerate federated learning over relay-assisted edge networks,” <em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">IEEE Transactions on Mobile Computing</em>, vol. 21, no. 12, pp. 4502–4516, 2022.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
J. Zhang, X. Qi, and B. Zhao, “Federated generative learning with foundation models,” <em id="bib.bib16.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2306.16064</em>, 2023.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
T. Guo, S. Guo, J. Wang, X. Tang, and W. Xu, “Promptfl: Let federated participants cooperatively learn prompts instead of models-federated learning in age of foundation model,” <em id="bib.bib17.1.1" class="ltx_emph ltx_font_italic">IEEE Transactions on Mobile Computing</em>, 2023.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
D. Cai, Y. Wu, S. Wang, F. X. Lin, and M. Xu, “Efficient federated learning for modern nlp,” in <em id="bib.bib18.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 29th Annual International Conference on Mobile Computing and Networking</em>, 2023, pp. 1–16.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
W. Lu, H. Xixu, J. Wang, and X. Xie, “Fedclip: Fast generalization and personalization for clip in federated learning,” in <em id="bib.bib19.1.1" class="ltx_emph ltx_font_italic">ICLR 2023 Workshop on Trustworthy and Reliable Large-Scale Machine Learning Models</em>, 2023.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
J. Zhang, S. Vahidian, M. Kuo, C. Li, R. Zhang, G. Wang, and Y. Chen, “Towards building the federated gpt: Federated instruction tuning,” <em id="bib.bib20.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2305.05644</em>, 2023.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
E. J. Hu, P. Wallis, Z. Allen-Zhu, Y. Li, S. Wang, L. Wang, W. Chen <em id="bib.bib21.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Lora: Low-rank adaptation of large language models,” in <em id="bib.bib21.2.2" class="ltx_emph ltx_font_italic">International Conference on Learning Representations</em>, 2021.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
J. Kaplan, S. McCandlish, T. Henighan, T. B. Brown, B. Chess, R. Child, S. Gray, A. Radford, J. Wu, and D. Amodei, “Scaling laws for neural language models,” <em id="bib.bib22.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2001.08361</em>, 2020.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
A. Aghajanyan, S. Gupta, and L. Zettlemoyer, “Intrinsic dimensionality explains the effectiveness of language model fine-tuning,” in <em id="bib.bib23.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 59th Annual Meeting of the Association for Computational Linguistics and the 11th International Joint Conference on Natural Language Processing (Volume 1: Long Papers)</em>, 2021, pp. 7319–7328.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
J. Yosinski, J. Clune, Y. Bengio, and H. Lipson, “How transferable are features in deep neural networks?” <em id="bib.bib24.1.1" class="ltx_emph ltx_font_italic">Advances in neural information processing systems</em>, vol. 27, 2014.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Y. Zhao, M. Li, L. Lai, N. Suda, D. Civin, and V. Chandra, “Federated learning with non-iid data,” <em id="bib.bib25.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1806.00582</em>, 2018.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
N. Houlsby, A. Giurgiu, S. Jastrzebski, B. Morrone, Q. De Laroussilhe, A. Gesmundo, M. Attariyan, and S. Gelly, “Parameter-efficient transfer learning for nlp,” in <em id="bib.bib26.1.1" class="ltx_emph ltx_font_italic">International Conference on Machine Learning</em>.   PMLR, 2019, pp. 2790–2799.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
L. Bossard, M. Guillaumin, and L. Van Gool, “Food-101–mining discriminative components with random forests,” in <em id="bib.bib27.1.1" class="ltx_emph ltx_font_italic">Computer Vision–ECCV 2014: 13th European Conference, Zurich, Switzerland, September 6-12, 2014, Proceedings, Part VI 13</em>.   Springer, 2014, pp. 446–461.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
P. Helber, B. Bischke, A. Dengel, and D. Borth, “Eurosat: A novel dataset and deep learning benchmark for land use and land cover classification,” <em id="bib.bib28.1.1" class="ltx_emph ltx_font_italic">IEEE Journal of Selected Topics in Applied Earth Observations and Remote Sensing</em>, vol. 12, no. 7, pp. 2217–2226, 2019.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
K. Soomro, A. R. Zamir, and M. Shah, “Ucf101: A dataset of 101 human actions classes from videos in the wild,” <em id="bib.bib29.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:1212.0402</em>, 2012.

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
M. Yurochkin, M. Agarwal, S. Ghosh, K. Greenewald, N. Hoang, and Y. Khazaeni, “Bayesian nonparametric federated learning of neural networks,” in <em id="bib.bib30.1.1" class="ltx_emph ltx_font_italic">International conference on machine learning</em>.   PMLR, 2019, pp. 7252–7261.

</span>
</li>
</ul>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2312.15925" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2312.15926" class="ar5iv-text-button ar5iv-severity-ok">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2312.15926">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2312.15926" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2312.15927" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Tue Feb 27 11:52:23 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
