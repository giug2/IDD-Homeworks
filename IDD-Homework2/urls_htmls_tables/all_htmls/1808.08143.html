<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[1808.08143] Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10.</title><meta property="og:description" content="The functional programming language Erlang is well-suited for concurrent and distributed applications, but numerical computing is not seen as one of its strengths. Yet, the recent introduction of Federated Learning, wh…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10.">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10.">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/1808.08143">

<!--Generated on Sun Mar 17 20:09:45 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="
Machine learning
Federated learning
Distributed computing
Functional programming
Erlang">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line"><span id="id1" class="ltx_note ltx_role_institutetext"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">institutetext: </span>Fraunhofer-Chalmers Research Centre for Industrial Mathematics,
<br class="ltx_break">Chalmers Science
Park, 412 88 Gothenburg, Sweden
<br class="ltx_break"></span></span></span><span id="id2" class="ltx_note ltx_role_institutetext"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_note_type">institutetext: </span>Fraunhofer Center for Machine Learning,

<br class="ltx_break">Chalmers Science
Park, 412 88 Gothenburg, Sweden
<br class="ltx_break"><span id="id2.1" class="ltx_note ltx_role_email"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_note_type">email: </span>{gregor.ulm,emil.gustavsson, mats.jirstrand}@fcc.chalmers.se</span></span></span>
<a target="_blank" href="http://www.fcc.chalmers.se/" title="" class="ltx_ref ltx_url" style="color:#0000FF;">http://www.fcc.chalmers.se/</a>
</span></span></span>
<h1 class="ltx_title ltx_title_document">Functional Federated Learning
<br class="ltx_break">in Erlang (<span id="id2.id1" class="ltx_text ltx_font_typewriter">ffl-erl</span>)<span id="id3.id2" class="ltx_note ltx_role_thanks"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">thanks: </span>The final authenticated version is available online at <a target="_blank" href="https://doi.org/10.1007/978-3-030-16202-3_10" title="" class="ltx_ref ltx_url" style="color:#0000FF;">https://doi.org/10.1007/978-3-030-16202-3˙10</a>.</span></span></span>
</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Gregor Ulm<math id="id1.1.m1.1" class="ltx_Math" alttext="{}^{(\textrm{{\char 0\relax}})}" display="inline"><semantics id="id1.1.m1.1a"><msup id="id1.1.m1.1.1" xref="id1.1.m1.1.1.cmml"><mi id="id1.1.m1.1.1a" xref="id1.1.m1.1.1.cmml"></mi><mrow id="id1.1.m1.1.1.1.3" xref="id1.1.m1.1.1.1.1a.cmml"><mo stretchy="false" id="id1.1.m1.1.1.1.3.1" xref="id1.1.m1.1.1.1.1a.cmml">(</mo><mtext id="id1.1.m1.1.1.1.1" xref="id1.1.m1.1.1.1.1.cmml">✉</mtext><mo stretchy="false" id="id1.1.m1.1.1.1.3.2" xref="id1.1.m1.1.1.1.1a.cmml">)</mo></mrow></msup><annotation-xml encoding="MathML-Content" id="id1.1.m1.1b"><apply id="id1.1.m1.1.1.cmml" xref="id1.1.m1.1.1"><ci id="id1.1.m1.1.1.1.1a.cmml" xref="id1.1.m1.1.1.1.3"><mtext mathsize="70%" id="id1.1.m1.1.1.1.1.cmml" xref="id1.1.m1.1.1.1.1">✉</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="id1.1.m1.1c">{}^{(\textrm{{\char 0\relax}})}</annotation></semantics></math>
</span><span class="ltx_author_notes">11 2 2
<span class="ltx_contact ltx_role_orcid"><a target="_blank" href="https://orcid.org/0000-0001-7848-4883" title="ORCID identifier" class="ltx_ref">0000-0001-7848-4883</a></span>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Emil Gustavsson
</span><span class="ltx_author_notes">11 2 2
<span class="ltx_contact ltx_role_orcid"><a target="_blank" href="https://orcid.org/0000-0002-1290-9989" title="ORCID identifier" class="ltx_ref">0000-0002-1290-9989</a></span>
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Mats Jirstrand
</span><span class="ltx_author_notes">11 2 2
<span class="ltx_contact ltx_role_orcid"><a target="_blank" href="https://orcid.org/0000-0002-6612-8037" title="ORCID identifier" class="ltx_ref">0000-0002-6612-8037</a></span>
</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id4.id1" class="ltx_p">The functional programming language Erlang is well-suited for concurrent and distributed applications, but numerical computing is not seen as one of its strengths. Yet, the recent introduction of Federated Learning, which leverages client devices for decentralized machine learning tasks, while a central server updates and distributes a global model, motivated us to explore how well Erlang is suited to that problem. We present the Federated Learning framework <span id="id4.id1.1" class="ltx_text ltx_font_typewriter">ffl-erl</span> and evaluate it in two scenarios: one in which the entire system has been written in Erlang, and another in which Erlang is relegated to coordinating client processes that rely on performing numerical computations in the programming language C. There is a concurrent as well as a distributed implementation of each case. We show that Erlang incurs a performance penalty, but for certain use cases this may not be detrimental, considering the trade-off between speed of development (Erlang) versus performance (C). Thus, Erlang may be a viable alternative to C for some practical machine learning tasks.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Keywords: </h6>
Machine learning
Federated learning
Distributed computing
Functional programming
Erlang
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">With the explosion of the amount of data gathered by networked devices, more efficient approaches to distributed data processing are needed. The reason is that it would be infeasible to transfer all data gathered from edge devices to a central data center, process it, and afterwards transfer results back to edge devices via the network. There are several approaches to taming the amount of data received, such as filtering on edge devices, transferring only a representative sample, or performing data processing tasks decentrally. A recently introduced example of distributed data analytics is Federated Learning <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite>. Its key idea is the distribution of machine learning tasks to a subset of available devices, followed by performing machine learning tasks locally on data that is available on edge devices, and iteratively updating a global model.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">In this paper, we present <span id="S1.p2.1.1" class="ltx_text ltx_font_typewriter">ffl-erl</span>, a Federated Learning framework implemented in the functional programming language Erlang.<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>Source code artifacts accompanying this paper are available at <a target="_blank" href="https://gitlab.com/fraunhofer_chalmers_centre/functional_federated_learning" title="" class="ltx_ref ltx_url" style="color:#0000FF;">https://gitlab.com/fraunhofer˙chalmers˙centre/functional˙federated˙learning</a>.</span></span></span> This work was produced in the context of an industrial research project with the goal of exploring and evaluating various approaches to distributed data analytics in the automotive domain. Our contribution consists of the following:</p>
</div>
<div id="S1.p3" class="ltx_para">
<ul id="S1.I1" class="ltx_itemize">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p">Creating <span id="S1.I1.i1.p1.1.1" class="ltx_text ltx_font_typewriter">ffl-erl</span>, the first open-source implementation of a framework for Federated Learning in Erlang</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p">Highlighting the feasibility of functional programming for the aforementioned framework</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.1" class="ltx_p">Creating a purely functional implementation of an artificial neural network in Erlang</p>
</div>
</li>
<li id="S1.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i4.p1" class="ltx_para">
<p id="S1.I1.i4.p1.1" class="ltx_p">Comparing the performance of a Federated Learning implementation fully in Erlang with one in which client processes are implemented in C</p>
</div>
</li>
<li id="S1.I1.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S1.I1.i5.p1" class="ltx_para">
<p id="S1.I1.i5.p1.1" class="ltx_p">Exploring two approaches of integrating C with Erlang: NIFs and C nodes</p>
</div>
</li>
</ul>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">The remainder of our paper is organized as follows: Section <a href="#S2" title="2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> contains background information and describes the motivating use case. Section <a href="#S3" title="3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> covers our implementation in detail and presents experimental results. Section <a href="#S4" title="4 Related Work ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> gives a brief overview of related work, while Section <a href="#S5" title="5 Future Work ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a> describes future work. Appendix <a href="#Pt0.A1" title="Appendix 0.A Mathematical Derivation of Federated Stochastic Gradient Descent ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">0.A</span></a> contains a mathematical derivation of Federated Stochastic Gradient Descent.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Background</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">This section gives an overview of Federated Learning (<a href="#S2.SS1" title="2.1 Federated Learning ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.1</span></a>) and presents the mathematical foundation of Federated Stochastic Gradient Descent (<a href="#S2.SS2" title="2.2 Federated Stochastic Gradient Descent ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2</span></a>). It furthermore describes our motivating use case (<a href="#S2.SS3" title="2.3 Motivating Use Case ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.3</span></a>).</p>
</div>
<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Federated Learning</h3>

<div id="S2.SS1.p1" class="ltx_para">
<p id="S2.SS1.p1.1" class="ltx_p">Federated Learning is a decentralized approach to machine learning. The general idea is to perform machine learning tasks on a potentially very large number of edge devices, which process data that is only accessible locally. A central server is relegated to assigning tasks and updating the global model based on the local models it receives from edge devices. One iteration of Federated Learning consists of the following steps, following McMahan et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite>:</p>
</div>
<div id="S2.SS1.p2" class="ltx_para">
<ol id="S2.I1" class="ltx_enumerate">
<li id="S2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S2.I1.i1.p1" class="ltx_para">
<p id="S2.I1.i1.p1.2" class="ltx_p">Select a subset <math id="S2.I1.i1.p1.1.m1.1" class="ltx_Math" alttext="c" display="inline"><semantics id="S2.I1.i1.p1.1.m1.1a"><mi id="S2.I1.i1.p1.1.m1.1.1" xref="S2.I1.i1.p1.1.m1.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.1.m1.1b"><ci id="S2.I1.i1.p1.1.m1.1.1.cmml" xref="S2.I1.i1.p1.1.m1.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.1.m1.1c">c</annotation></semantics></math> of the set of clients <math id="S2.I1.i1.p1.2.m2.1" class="ltx_Math" alttext="C" display="inline"><semantics id="S2.I1.i1.p1.2.m2.1a"><mi id="S2.I1.i1.p1.2.m2.1.1" xref="S2.I1.i1.p1.2.m2.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i1.p1.2.m2.1b"><ci id="S2.I1.i1.p1.2.m2.1.1.cmml" xref="S2.I1.i1.p1.2.m2.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i1.p1.2.m2.1c">C</annotation></semantics></math></p>
</div>
</li>
<li id="S2.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S2.I1.i2.p1" class="ltx_para">
<p id="S2.I1.i2.p1.1" class="ltx_p">Send the current model from the server to each client <math id="S2.I1.i2.p1.1.m1.1" class="ltx_Math" alttext="x\in c" display="inline"><semantics id="S2.I1.i2.p1.1.m1.1a"><mrow id="S2.I1.i2.p1.1.m1.1.1" xref="S2.I1.i2.p1.1.m1.1.1.cmml"><mi id="S2.I1.i2.p1.1.m1.1.1.2" xref="S2.I1.i2.p1.1.m1.1.1.2.cmml">x</mi><mo id="S2.I1.i2.p1.1.m1.1.1.1" xref="S2.I1.i2.p1.1.m1.1.1.1.cmml">∈</mo><mi id="S2.I1.i2.p1.1.m1.1.1.3" xref="S2.I1.i2.p1.1.m1.1.1.3.cmml">c</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.I1.i2.p1.1.m1.1b"><apply id="S2.I1.i2.p1.1.m1.1.1.cmml" xref="S2.I1.i2.p1.1.m1.1.1"><in id="S2.I1.i2.p1.1.m1.1.1.1.cmml" xref="S2.I1.i2.p1.1.m1.1.1.1"></in><ci id="S2.I1.i2.p1.1.m1.1.1.2.cmml" xref="S2.I1.i2.p1.1.m1.1.1.2">𝑥</ci><ci id="S2.I1.i2.p1.1.m1.1.1.3.cmml" xref="S2.I1.i2.p1.1.m1.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i2.p1.1.m1.1c">x\in c</annotation></semantics></math></p>
</div>
</li>
<li id="S2.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S2.I1.i3.p1" class="ltx_para">
<p id="S2.I1.i3.p1.1" class="ltx_p">For each <math id="S2.I1.i3.p1.1.m1.1" class="ltx_Math" alttext="x" display="inline"><semantics id="S2.I1.i3.p1.1.m1.1a"><mi id="S2.I1.i3.p1.1.m1.1.1" xref="S2.I1.i3.p1.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i3.p1.1.m1.1b"><ci id="S2.I1.i3.p1.1.m1.1.1.cmml" xref="S2.I1.i3.p1.1.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i3.p1.1.m1.1c">x</annotation></semantics></math>, update the provided model based on local data by performing iterations of a machine learning algorithm</p>
</div>
</li>
<li id="S2.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="S2.I1.i4.p1" class="ltx_para">
<p id="S2.I1.i4.p1.1" class="ltx_p">For each <math id="S2.I1.i4.p1.1.m1.1" class="ltx_Math" alttext="x" display="inline"><semantics id="S2.I1.i4.p1.1.m1.1a"><mi id="S2.I1.i4.p1.1.m1.1.1" xref="S2.I1.i4.p1.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.I1.i4.p1.1.m1.1b"><ci id="S2.I1.i4.p1.1.m1.1.1.cmml" xref="S2.I1.i4.p1.1.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.I1.i4.p1.1.m1.1c">x</annotation></semantics></math>, send the updated model to the server</p>
</div>
</li>
<li id="S2.I1.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">5.</span> 
<div id="S2.I1.i5.p1" class="ltx_para">
<p id="S2.I1.i5.p1.1" class="ltx_p">Aggregate all received local models and construct a new global model</p>
</div>
</li>
</ol>
</div>
<div id="S2.SS1.p3" class="ltx_para">
<p id="S2.SS1.p3.1" class="ltx_p">There are several motivations behind Federated Learning. First, there is the bandwidth problem in a big data setting. The amount of data generated by local devices is too large to be transferred via the network to a central server for processing. Second, edge devices are getting more and more powerful. Modern smartphones, for instance, have been compared to (old-generation) supercomputers in our pockets in terms of raw computational power <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>. Therefore, it seems prudent to more efficiently use these resources. Third, there are data privacy issues, as some jurisdictions have strict privacy laws. Thus, transmitting data via the network in order to perform central machine learning tasks is frayed with data privacy issues. This is summarized by Chen et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>, while Tene et al. point out legal issues <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>. Federated Learning sidesteps potential legal quagmires surrounding data privacy laws and regulations as data is not centrally collected.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Federated Stochastic Gradient Descent</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">Federated Stochastic Gradient Descent (Federated SGD) is based on Stochastic Gradient Descent (SGD), which is a well-established method in the field of statistical optimization. We first describe SGD, followed by a presentation of Federated SGD. The latter is based on McMahan et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite>.</p>
</div>
<section id="S2.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.1 </span>Stochastic Gradient Descent.</h4>

<div id="S2.SS2.SSS1.p1" class="ltx_para">
<p id="S2.SS2.SSS1.p1.1" class="ltx_p">The aim of SGD is to minimize an objective function <math id="S2.SS2.SSS1.p1.1.m1.1" class="ltx_Math" alttext="F" display="inline"><semantics id="S2.SS2.SSS1.p1.1.m1.1a"><mi id="S2.SS2.SSS1.p1.1.m1.1.1" xref="S2.SS2.SSS1.p1.1.m1.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p1.1.m1.1b"><ci id="S2.SS2.SSS1.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS1.p1.1.m1.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p1.1.m1.1c">F</annotation></semantics></math> that is defined as the following sum:</p>
</div>
<div id="S2.SS2.SSS1.p2" class="ltx_para">
<table id="S2.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E1.m1.3" class="ltx_Math" alttext="F(w)=\frac{1}{n}\displaystyle\sum_{i=1}^{n}F_{i}(w)." display="block"><semantics id="S2.E1.m1.3a"><mrow id="S2.E1.m1.3.3.1" xref="S2.E1.m1.3.3.1.1.cmml"><mrow id="S2.E1.m1.3.3.1.1" xref="S2.E1.m1.3.3.1.1.cmml"><mrow id="S2.E1.m1.3.3.1.1.2" xref="S2.E1.m1.3.3.1.1.2.cmml"><mi id="S2.E1.m1.3.3.1.1.2.2" xref="S2.E1.m1.3.3.1.1.2.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.3.3.1.1.2.1" xref="S2.E1.m1.3.3.1.1.2.1.cmml">​</mo><mrow id="S2.E1.m1.3.3.1.1.2.3.2" xref="S2.E1.m1.3.3.1.1.2.cmml"><mo stretchy="false" id="S2.E1.m1.3.3.1.1.2.3.2.1" xref="S2.E1.m1.3.3.1.1.2.cmml">(</mo><mi id="S2.E1.m1.1.1" xref="S2.E1.m1.1.1.cmml">w</mi><mo stretchy="false" id="S2.E1.m1.3.3.1.1.2.3.2.2" xref="S2.E1.m1.3.3.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.3.3.1.1.1" xref="S2.E1.m1.3.3.1.1.1.cmml">=</mo><mrow id="S2.E1.m1.3.3.1.1.3" xref="S2.E1.m1.3.3.1.1.3.cmml"><mfrac id="S2.E1.m1.3.3.1.1.3.2" xref="S2.E1.m1.3.3.1.1.3.2.cmml"><mn id="S2.E1.m1.3.3.1.1.3.2.2" xref="S2.E1.m1.3.3.1.1.3.2.2.cmml">1</mn><mi id="S2.E1.m1.3.3.1.1.3.2.3" xref="S2.E1.m1.3.3.1.1.3.2.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="S2.E1.m1.3.3.1.1.3.1" xref="S2.E1.m1.3.3.1.1.3.1.cmml">​</mo><mrow id="S2.E1.m1.3.3.1.1.3.3" xref="S2.E1.m1.3.3.1.1.3.3.cmml"><munderover id="S2.E1.m1.3.3.1.1.3.3.1" xref="S2.E1.m1.3.3.1.1.3.3.1.cmml"><mo movablelimits="false" id="S2.E1.m1.3.3.1.1.3.3.1.2.2" xref="S2.E1.m1.3.3.1.1.3.3.1.2.2.cmml">∑</mo><mrow id="S2.E1.m1.3.3.1.1.3.3.1.2.3" xref="S2.E1.m1.3.3.1.1.3.3.1.2.3.cmml"><mi id="S2.E1.m1.3.3.1.1.3.3.1.2.3.2" xref="S2.E1.m1.3.3.1.1.3.3.1.2.3.2.cmml">i</mi><mo id="S2.E1.m1.3.3.1.1.3.3.1.2.3.1" xref="S2.E1.m1.3.3.1.1.3.3.1.2.3.1.cmml">=</mo><mn id="S2.E1.m1.3.3.1.1.3.3.1.2.3.3" xref="S2.E1.m1.3.3.1.1.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="S2.E1.m1.3.3.1.1.3.3.1.3" xref="S2.E1.m1.3.3.1.1.3.3.1.3.cmml">n</mi></munderover><mrow id="S2.E1.m1.3.3.1.1.3.3.2" xref="S2.E1.m1.3.3.1.1.3.3.2.cmml"><msub id="S2.E1.m1.3.3.1.1.3.3.2.2" xref="S2.E1.m1.3.3.1.1.3.3.2.2.cmml"><mi id="S2.E1.m1.3.3.1.1.3.3.2.2.2" xref="S2.E1.m1.3.3.1.1.3.3.2.2.2.cmml">F</mi><mi id="S2.E1.m1.3.3.1.1.3.3.2.2.3" xref="S2.E1.m1.3.3.1.1.3.3.2.2.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="S2.E1.m1.3.3.1.1.3.3.2.1" xref="S2.E1.m1.3.3.1.1.3.3.2.1.cmml">​</mo><mrow id="S2.E1.m1.3.3.1.1.3.3.2.3.2" xref="S2.E1.m1.3.3.1.1.3.3.2.cmml"><mo stretchy="false" id="S2.E1.m1.3.3.1.1.3.3.2.3.2.1" xref="S2.E1.m1.3.3.1.1.3.3.2.cmml">(</mo><mi id="S2.E1.m1.2.2" xref="S2.E1.m1.2.2.cmml">w</mi><mo stretchy="false" id="S2.E1.m1.3.3.1.1.3.3.2.3.2.2" xref="S2.E1.m1.3.3.1.1.3.3.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo lspace="0em" id="S2.E1.m1.3.3.1.2" xref="S2.E1.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.3b"><apply id="S2.E1.m1.3.3.1.1.cmml" xref="S2.E1.m1.3.3.1"><eq id="S2.E1.m1.3.3.1.1.1.cmml" xref="S2.E1.m1.3.3.1.1.1"></eq><apply id="S2.E1.m1.3.3.1.1.2.cmml" xref="S2.E1.m1.3.3.1.1.2"><times id="S2.E1.m1.3.3.1.1.2.1.cmml" xref="S2.E1.m1.3.3.1.1.2.1"></times><ci id="S2.E1.m1.3.3.1.1.2.2.cmml" xref="S2.E1.m1.3.3.1.1.2.2">𝐹</ci><ci id="S2.E1.m1.1.1.cmml" xref="S2.E1.m1.1.1">𝑤</ci></apply><apply id="S2.E1.m1.3.3.1.1.3.cmml" xref="S2.E1.m1.3.3.1.1.3"><times id="S2.E1.m1.3.3.1.1.3.1.cmml" xref="S2.E1.m1.3.3.1.1.3.1"></times><apply id="S2.E1.m1.3.3.1.1.3.2.cmml" xref="S2.E1.m1.3.3.1.1.3.2"><divide id="S2.E1.m1.3.3.1.1.3.2.1.cmml" xref="S2.E1.m1.3.3.1.1.3.2"></divide><cn type="integer" id="S2.E1.m1.3.3.1.1.3.2.2.cmml" xref="S2.E1.m1.3.3.1.1.3.2.2">1</cn><ci id="S2.E1.m1.3.3.1.1.3.2.3.cmml" xref="S2.E1.m1.3.3.1.1.3.2.3">𝑛</ci></apply><apply id="S2.E1.m1.3.3.1.1.3.3.cmml" xref="S2.E1.m1.3.3.1.1.3.3"><apply id="S2.E1.m1.3.3.1.1.3.3.1.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1"><csymbol cd="ambiguous" id="S2.E1.m1.3.3.1.1.3.3.1.1.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1">superscript</csymbol><apply id="S2.E1.m1.3.3.1.1.3.3.1.2.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1"><csymbol cd="ambiguous" id="S2.E1.m1.3.3.1.1.3.3.1.2.1.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1">subscript</csymbol><sum id="S2.E1.m1.3.3.1.1.3.3.1.2.2.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1.2.2"></sum><apply id="S2.E1.m1.3.3.1.1.3.3.1.2.3.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1.2.3"><eq id="S2.E1.m1.3.3.1.1.3.3.1.2.3.1.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1.2.3.1"></eq><ci id="S2.E1.m1.3.3.1.1.3.3.1.2.3.2.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1.2.3.2">𝑖</ci><cn type="integer" id="S2.E1.m1.3.3.1.1.3.3.1.2.3.3.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1.2.3.3">1</cn></apply></apply><ci id="S2.E1.m1.3.3.1.1.3.3.1.3.cmml" xref="S2.E1.m1.3.3.1.1.3.3.1.3">𝑛</ci></apply><apply id="S2.E1.m1.3.3.1.1.3.3.2.cmml" xref="S2.E1.m1.3.3.1.1.3.3.2"><times id="S2.E1.m1.3.3.1.1.3.3.2.1.cmml" xref="S2.E1.m1.3.3.1.1.3.3.2.1"></times><apply id="S2.E1.m1.3.3.1.1.3.3.2.2.cmml" xref="S2.E1.m1.3.3.1.1.3.3.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.3.3.1.1.3.3.2.2.1.cmml" xref="S2.E1.m1.3.3.1.1.3.3.2.2">subscript</csymbol><ci id="S2.E1.m1.3.3.1.1.3.3.2.2.2.cmml" xref="S2.E1.m1.3.3.1.1.3.3.2.2.2">𝐹</ci><ci id="S2.E1.m1.3.3.1.1.3.3.2.2.3.cmml" xref="S2.E1.m1.3.3.1.1.3.3.2.2.3">𝑖</ci></apply><ci id="S2.E1.m1.2.2.cmml" xref="S2.E1.m1.2.2">𝑤</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.3c">F(w)=\frac{1}{n}\displaystyle\sum_{i=1}^{n}F_{i}(w).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<div id="S2.SS2.SSS1.p3" class="ltx_para">
<p id="S2.SS2.SSS1.p3.9" class="ltx_p">The goal is to find a value for the parameter vector <math id="S2.SS2.SSS1.p3.1.m1.1" class="ltx_Math" alttext="w" display="inline"><semantics id="S2.SS2.SSS1.p3.1.m1.1a"><mi id="S2.SS2.SSS1.p3.1.m1.1.1" xref="S2.SS2.SSS1.p3.1.m1.1.1.cmml">w</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.1.m1.1b"><ci id="S2.SS2.SSS1.p3.1.m1.1.1.cmml" xref="S2.SS2.SSS1.p3.1.m1.1.1">𝑤</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.1.m1.1c">w</annotation></semantics></math> that minimizes <math id="S2.SS2.SSS1.p3.2.m2.1" class="ltx_Math" alttext="F" display="inline"><semantics id="S2.SS2.SSS1.p3.2.m2.1a"><mi id="S2.SS2.SSS1.p3.2.m2.1.1" xref="S2.SS2.SSS1.p3.2.m2.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.2.m2.1b"><ci id="S2.SS2.SSS1.p3.2.m2.1.1.cmml" xref="S2.SS2.SSS1.p3.2.m2.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.2.m2.1c">F</annotation></semantics></math>. The value <math id="S2.SS2.SSS1.p3.3.m3.1" class="ltx_Math" alttext="F_{i}" display="inline"><semantics id="S2.SS2.SSS1.p3.3.m3.1a"><msub id="S2.SS2.SSS1.p3.3.m3.1.1" xref="S2.SS2.SSS1.p3.3.m3.1.1.cmml"><mi id="S2.SS2.SSS1.p3.3.m3.1.1.2" xref="S2.SS2.SSS1.p3.3.m3.1.1.2.cmml">F</mi><mi id="S2.SS2.SSS1.p3.3.m3.1.1.3" xref="S2.SS2.SSS1.p3.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.3.m3.1b"><apply id="S2.SS2.SSS1.p3.3.m3.1.1.cmml" xref="S2.SS2.SSS1.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS1.p3.3.m3.1.1.1.cmml" xref="S2.SS2.SSS1.p3.3.m3.1.1">subscript</csymbol><ci id="S2.SS2.SSS1.p3.3.m3.1.1.2.cmml" xref="S2.SS2.SSS1.p3.3.m3.1.1.2">𝐹</ci><ci id="S2.SS2.SSS1.p3.3.m3.1.1.3.cmml" xref="S2.SS2.SSS1.p3.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.3.m3.1c">F_{i}</annotation></semantics></math> represents the contribution of element <math id="S2.SS2.SSS1.p3.4.m4.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S2.SS2.SSS1.p3.4.m4.1a"><mi id="S2.SS2.SSS1.p3.4.m4.1.1" xref="S2.SS2.SSS1.p3.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.4.m4.1b"><ci id="S2.SS2.SSS1.p3.4.m4.1.1.cmml" xref="S2.SS2.SSS1.p3.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.4.m4.1c">i</annotation></semantics></math> of the input data to the objective function. In order to minimize <math id="S2.SS2.SSS1.p3.5.m5.1" class="ltx_Math" alttext="F" display="inline"><semantics id="S2.SS2.SSS1.p3.5.m5.1a"><mi id="S2.SS2.SSS1.p3.5.m5.1.1" xref="S2.SS2.SSS1.p3.5.m5.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.5.m5.1b"><ci id="S2.SS2.SSS1.p3.5.m5.1.1.cmml" xref="S2.SS2.SSS1.p3.5.m5.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.5.m5.1c">F</annotation></semantics></math>, the gradient <math id="S2.SS2.SSS1.p3.6.m6.1" class="ltx_Math" alttext="\nabla" display="inline"><semantics id="S2.SS2.SSS1.p3.6.m6.1a"><mo id="S2.SS2.SSS1.p3.6.m6.1.1" xref="S2.SS2.SSS1.p3.6.m6.1.1.cmml">∇</mo><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.6.m6.1b"><ci id="S2.SS2.SSS1.p3.6.m6.1.1.cmml" xref="S2.SS2.SSS1.p3.6.m6.1.1">∇</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.6.m6.1c">\nabla</annotation></semantics></math> is computed. The learning rate <math id="S2.SS2.SSS1.p3.7.m7.1" class="ltx_Math" alttext="\eta" display="inline"><semantics id="S2.SS2.SSS1.p3.7.m7.1a"><mi id="S2.SS2.SSS1.p3.7.m7.1.1" xref="S2.SS2.SSS1.p3.7.m7.1.1.cmml">η</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.7.m7.1b"><ci id="S2.SS2.SSS1.p3.7.m7.1.1.cmml" xref="S2.SS2.SSS1.p3.7.m7.1.1">𝜂</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.7.m7.1c">\eta</annotation></semantics></math> is a factor that adjusts how far along the gradient the parameter update step is taken. It modifies the magnitude of change of <math id="S2.SS2.SSS1.p3.8.m8.1" class="ltx_Math" alttext="w" display="inline"><semantics id="S2.SS2.SSS1.p3.8.m8.1a"><mi id="S2.SS2.SSS1.p3.8.m8.1.1" xref="S2.SS2.SSS1.p3.8.m8.1.1.cmml">w</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.8.m8.1b"><ci id="S2.SS2.SSS1.p3.8.m8.1.1.cmml" xref="S2.SS2.SSS1.p3.8.m8.1.1">𝑤</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.8.m8.1c">w</annotation></semantics></math> between iterations. The parameter <math id="S2.SS2.SSS1.p3.9.m9.1" class="ltx_Math" alttext="w" display="inline"><semantics id="S2.SS2.SSS1.p3.9.m9.1a"><mi id="S2.SS2.SSS1.p3.9.m9.1.1" xref="S2.SS2.SSS1.p3.9.m9.1.1.cmml">w</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p3.9.m9.1b"><ci id="S2.SS2.SSS1.p3.9.m9.1.1.cmml" xref="S2.SS2.SSS1.p3.9.m9.1.1">𝑤</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p3.9.m9.1c">w</annotation></semantics></math> is updated in the following way:</p>
</div>
<div id="S2.SS2.SSS1.p4" class="ltx_para">
<table id="S2.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E2.m1.2" class="ltx_Math" alttext="w:=w-\eta\nabla F(w)." display="block"><semantics id="S2.E2.m1.2a"><mrow id="S2.E2.m1.2.2.1" xref="S2.E2.m1.2.2.1.1.cmml"><mrow id="S2.E2.m1.2.2.1.1" xref="S2.E2.m1.2.2.1.1.cmml"><mi id="S2.E2.m1.2.2.1.1.2" xref="S2.E2.m1.2.2.1.1.2.cmml">w</mi><mo lspace="0.278em" rspace="0.278em" id="S2.E2.m1.2.2.1.1.1" xref="S2.E2.m1.2.2.1.1.1.cmml">:=</mo><mrow id="S2.E2.m1.2.2.1.1.3" xref="S2.E2.m1.2.2.1.1.3.cmml"><mi id="S2.E2.m1.2.2.1.1.3.2" xref="S2.E2.m1.2.2.1.1.3.2.cmml">w</mi><mo id="S2.E2.m1.2.2.1.1.3.1" xref="S2.E2.m1.2.2.1.1.3.1.cmml">−</mo><mrow id="S2.E2.m1.2.2.1.1.3.3" xref="S2.E2.m1.2.2.1.1.3.3.cmml"><mi id="S2.E2.m1.2.2.1.1.3.3.2" xref="S2.E2.m1.2.2.1.1.3.3.2.cmml">η</mi><mo lspace="0.167em" rspace="0em" id="S2.E2.m1.2.2.1.1.3.3.1" xref="S2.E2.m1.2.2.1.1.3.3.1.cmml">​</mo><mrow id="S2.E2.m1.2.2.1.1.3.3.3" xref="S2.E2.m1.2.2.1.1.3.3.3.cmml"><mo rspace="0.167em" id="S2.E2.m1.2.2.1.1.3.3.3.1" xref="S2.E2.m1.2.2.1.1.3.3.3.1.cmml">∇</mo><mi id="S2.E2.m1.2.2.1.1.3.3.3.2" xref="S2.E2.m1.2.2.1.1.3.3.3.2.cmml">F</mi></mrow><mo lspace="0em" rspace="0em" id="S2.E2.m1.2.2.1.1.3.3.1a" xref="S2.E2.m1.2.2.1.1.3.3.1.cmml">​</mo><mrow id="S2.E2.m1.2.2.1.1.3.3.4.2" xref="S2.E2.m1.2.2.1.1.3.3.cmml"><mo stretchy="false" id="S2.E2.m1.2.2.1.1.3.3.4.2.1" xref="S2.E2.m1.2.2.1.1.3.3.cmml">(</mo><mi id="S2.E2.m1.1.1" xref="S2.E2.m1.1.1.cmml">w</mi><mo stretchy="false" id="S2.E2.m1.2.2.1.1.3.3.4.2.2" xref="S2.E2.m1.2.2.1.1.3.3.cmml">)</mo></mrow></mrow></mrow></mrow><mo lspace="0em" id="S2.E2.m1.2.2.1.2" xref="S2.E2.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.2b"><apply id="S2.E2.m1.2.2.1.1.cmml" xref="S2.E2.m1.2.2.1"><csymbol cd="latexml" id="S2.E2.m1.2.2.1.1.1.cmml" xref="S2.E2.m1.2.2.1.1.1">assign</csymbol><ci id="S2.E2.m1.2.2.1.1.2.cmml" xref="S2.E2.m1.2.2.1.1.2">𝑤</ci><apply id="S2.E2.m1.2.2.1.1.3.cmml" xref="S2.E2.m1.2.2.1.1.3"><minus id="S2.E2.m1.2.2.1.1.3.1.cmml" xref="S2.E2.m1.2.2.1.1.3.1"></minus><ci id="S2.E2.m1.2.2.1.1.3.2.cmml" xref="S2.E2.m1.2.2.1.1.3.2">𝑤</ci><apply id="S2.E2.m1.2.2.1.1.3.3.cmml" xref="S2.E2.m1.2.2.1.1.3.3"><times id="S2.E2.m1.2.2.1.1.3.3.1.cmml" xref="S2.E2.m1.2.2.1.1.3.3.1"></times><ci id="S2.E2.m1.2.2.1.1.3.3.2.cmml" xref="S2.E2.m1.2.2.1.1.3.3.2">𝜂</ci><apply id="S2.E2.m1.2.2.1.1.3.3.3.cmml" xref="S2.E2.m1.2.2.1.1.3.3.3"><ci id="S2.E2.m1.2.2.1.1.3.3.3.1.cmml" xref="S2.E2.m1.2.2.1.1.3.3.3.1">∇</ci><ci id="S2.E2.m1.2.2.1.1.3.3.3.2.cmml" xref="S2.E2.m1.2.2.1.1.3.3.3.2">𝐹</ci></apply><ci id="S2.E2.m1.1.1.cmml" xref="S2.E2.m1.1.1">𝑤</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.2c">w:=w-\eta\nabla F(w).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
<div id="S2.SS2.SSS1.p5" class="ltx_para">
<p id="S2.SS2.SSS1.p5.3" class="ltx_p">This means that the parameter <math id="S2.SS2.SSS1.p5.1.m1.1" class="ltx_Math" alttext="w" display="inline"><semantics id="S2.SS2.SSS1.p5.1.m1.1a"><mi id="S2.SS2.SSS1.p5.1.m1.1.1" xref="S2.SS2.SSS1.p5.1.m1.1.1.cmml">w</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p5.1.m1.1b"><ci id="S2.SS2.SSS1.p5.1.m1.1.1.cmml" xref="S2.SS2.SSS1.p5.1.m1.1.1">𝑤</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p5.1.m1.1c">w</annotation></semantics></math> is updated by computing the gradient of the objective function, evaluated for the previous parameter value, which is subtracted from the previous parameter value <math id="S2.SS2.SSS1.p5.2.m2.1" class="ltx_Math" alttext="w" display="inline"><semantics id="S2.SS2.SSS1.p5.2.m2.1a"><mi id="S2.SS2.SSS1.p5.2.m2.1.1" xref="S2.SS2.SSS1.p5.2.m2.1.1.cmml">w</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p5.2.m2.1b"><ci id="S2.SS2.SSS1.p5.2.m2.1.1.cmml" xref="S2.SS2.SSS1.p5.2.m2.1.1">𝑤</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p5.2.m2.1c">w</annotation></semantics></math>. Since <math id="S2.SS2.SSS1.p5.3.m3.1" class="ltx_Math" alttext="F" display="inline"><semantics id="S2.SS2.SSS1.p5.3.m3.1a"><mi id="S2.SS2.SSS1.p5.3.m3.1.1" xref="S2.SS2.SSS1.p5.3.m3.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p5.3.m3.1b"><ci id="S2.SS2.SSS1.p5.3.m3.1.1.cmml" xref="S2.SS2.SSS1.p5.3.m3.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p5.3.m3.1c">F</annotation></semantics></math> is a separable function, Eq. <a href="#S2.E2" title="In 2.2.1 Stochastic Gradient Descent. ‣ 2.2 Federated Stochastic Gradient Descent ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> can be reformulated as</p>
</div>
<div id="S2.SS2.SSS1.p6" class="ltx_para">
<table id="S2.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E3.m1.2" class="ltx_Math" alttext="w:=w-\frac{\eta}{n}\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w)." display="block"><semantics id="S2.E3.m1.2a"><mrow id="S2.E3.m1.2.2.1" xref="S2.E3.m1.2.2.1.1.cmml"><mrow id="S2.E3.m1.2.2.1.1" xref="S2.E3.m1.2.2.1.1.cmml"><mi id="S2.E3.m1.2.2.1.1.2" xref="S2.E3.m1.2.2.1.1.2.cmml">w</mi><mo lspace="0.278em" rspace="0.278em" id="S2.E3.m1.2.2.1.1.1" xref="S2.E3.m1.2.2.1.1.1.cmml">:=</mo><mrow id="S2.E3.m1.2.2.1.1.3" xref="S2.E3.m1.2.2.1.1.3.cmml"><mi id="S2.E3.m1.2.2.1.1.3.2" xref="S2.E3.m1.2.2.1.1.3.2.cmml">w</mi><mo id="S2.E3.m1.2.2.1.1.3.1" xref="S2.E3.m1.2.2.1.1.3.1.cmml">−</mo><mrow id="S2.E3.m1.2.2.1.1.3.3" xref="S2.E3.m1.2.2.1.1.3.3.cmml"><mfrac id="S2.E3.m1.2.2.1.1.3.3.2" xref="S2.E3.m1.2.2.1.1.3.3.2.cmml"><mi id="S2.E3.m1.2.2.1.1.3.3.2.2" xref="S2.E3.m1.2.2.1.1.3.3.2.2.cmml">η</mi><mi id="S2.E3.m1.2.2.1.1.3.3.2.3" xref="S2.E3.m1.2.2.1.1.3.3.2.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="S2.E3.m1.2.2.1.1.3.3.1" xref="S2.E3.m1.2.2.1.1.3.3.1.cmml">​</mo><mrow id="S2.E3.m1.2.2.1.1.3.3.3" xref="S2.E3.m1.2.2.1.1.3.3.3.cmml"><munderover id="S2.E3.m1.2.2.1.1.3.3.3.1" xref="S2.E3.m1.2.2.1.1.3.3.3.1.cmml"><mo movablelimits="false" id="S2.E3.m1.2.2.1.1.3.3.3.1.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.2.cmml">∑</mo><mrow id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.cmml"><mi id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.2" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.2.cmml">i</mi><mo id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.1" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.1.cmml">=</mo><mn id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.3" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="S2.E3.m1.2.2.1.1.3.3.3.1.3" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3.cmml">n</mi></munderover><mrow id="S2.E3.m1.2.2.1.1.3.3.3.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.cmml"><mrow id="S2.E3.m1.2.2.1.1.3.3.3.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.cmml"><mo rspace="0.167em" id="S2.E3.m1.2.2.1.1.3.3.3.2.2.1" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.1.cmml">∇</mo><msub id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.cmml"><mi id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.2.cmml">F</mi><mi id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.3" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="S2.E3.m1.2.2.1.1.3.3.3.2.1" xref="S2.E3.m1.2.2.1.1.3.3.3.2.1.cmml">​</mo><mrow id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.cmml"><mo stretchy="false" id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.1" xref="S2.E3.m1.2.2.1.1.3.3.3.2.cmml">(</mo><mi id="S2.E3.m1.1.1" xref="S2.E3.m1.1.1.cmml">w</mi><mo stretchy="false" id="S2.E3.m1.2.2.1.1.3.3.3.2.3.2.2" xref="S2.E3.m1.2.2.1.1.3.3.3.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><mo lspace="0em" id="S2.E3.m1.2.2.1.2" xref="S2.E3.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E3.m1.2b"><apply id="S2.E3.m1.2.2.1.1.cmml" xref="S2.E3.m1.2.2.1"><csymbol cd="latexml" id="S2.E3.m1.2.2.1.1.1.cmml" xref="S2.E3.m1.2.2.1.1.1">assign</csymbol><ci id="S2.E3.m1.2.2.1.1.2.cmml" xref="S2.E3.m1.2.2.1.1.2">𝑤</ci><apply id="S2.E3.m1.2.2.1.1.3.cmml" xref="S2.E3.m1.2.2.1.1.3"><minus id="S2.E3.m1.2.2.1.1.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.1"></minus><ci id="S2.E3.m1.2.2.1.1.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.2">𝑤</ci><apply id="S2.E3.m1.2.2.1.1.3.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3"><times id="S2.E3.m1.2.2.1.1.3.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.1"></times><apply id="S2.E3.m1.2.2.1.1.3.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.2"><divide id="S2.E3.m1.2.2.1.1.3.3.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.2"></divide><ci id="S2.E3.m1.2.2.1.1.3.3.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.2.2">𝜂</ci><ci id="S2.E3.m1.2.2.1.1.3.3.2.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.2.3">𝑛</ci></apply><apply id="S2.E3.m1.2.2.1.1.3.3.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3"><apply id="S2.E3.m1.2.2.1.1.3.3.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.1.1.3.3.3.1.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1">superscript</csymbol><apply id="S2.E3.m1.2.2.1.1.3.3.3.1.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.1.1.3.3.3.1.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1">subscript</csymbol><sum id="S2.E3.m1.2.2.1.1.3.3.3.1.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.2"></sum><apply id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3"><eq id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.1"></eq><ci id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.2">𝑖</ci><cn type="integer" id="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.2.3.3">1</cn></apply></apply><ci id="S2.E3.m1.2.2.1.1.3.3.3.1.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.1.3">𝑛</ci></apply><apply id="S2.E3.m1.2.2.1.1.3.3.3.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2"><times id="S2.E3.m1.2.2.1.1.3.3.3.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.1"></times><apply id="S2.E3.m1.2.2.1.1.3.3.3.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2"><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.1">∇</ci><apply id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.1.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2">subscript</csymbol><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.2.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.2">𝐹</ci><ci id="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.3.cmml" xref="S2.E3.m1.2.2.1.1.3.3.3.2.2.2.3">𝑖</ci></apply></apply><ci id="S2.E3.m1.1.1.cmml" xref="S2.E3.m1.1.1">𝑤</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m1.2c">w:=w-\frac{\eta}{n}\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
</div>
<div id="S2.SS2.SSS1.p7" class="ltx_para">
<p id="S2.SS2.SSS1.p7.3" class="ltx_p">As indicated before, the learning rate <math id="S2.SS2.SSS1.p7.1.m1.1" class="ltx_Math" alttext="\eta" display="inline"><semantics id="S2.SS2.SSS1.p7.1.m1.1a"><mi id="S2.SS2.SSS1.p7.1.m1.1.1" xref="S2.SS2.SSS1.p7.1.m1.1.1.cmml">η</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p7.1.m1.1b"><ci id="S2.SS2.SSS1.p7.1.m1.1.1.cmml" xref="S2.SS2.SSS1.p7.1.m1.1.1">𝜂</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p7.1.m1.1c">\eta</annotation></semantics></math> is a modifier for slowing down or speeding up the training process. In practice, small positive values in the half-closed interval <math id="S2.SS2.SSS1.p7.2.m2.2" class="ltx_Math" alttext="(0,1]" display="inline"><semantics id="S2.SS2.SSS1.p7.2.m2.2a"><mrow id="S2.SS2.SSS1.p7.2.m2.2.3.2" xref="S2.SS2.SSS1.p7.2.m2.2.3.1.cmml"><mo stretchy="false" id="S2.SS2.SSS1.p7.2.m2.2.3.2.1" xref="S2.SS2.SSS1.p7.2.m2.2.3.1.cmml">(</mo><mn id="S2.SS2.SSS1.p7.2.m2.1.1" xref="S2.SS2.SSS1.p7.2.m2.1.1.cmml">0</mn><mo id="S2.SS2.SSS1.p7.2.m2.2.3.2.2" xref="S2.SS2.SSS1.p7.2.m2.2.3.1.cmml">,</mo><mn id="S2.SS2.SSS1.p7.2.m2.2.2" xref="S2.SS2.SSS1.p7.2.m2.2.2.cmml">1</mn><mo stretchy="false" id="S2.SS2.SSS1.p7.2.m2.2.3.2.3" xref="S2.SS2.SSS1.p7.2.m2.2.3.1.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p7.2.m2.2b"><interval closure="open-closed" id="S2.SS2.SSS1.p7.2.m2.2.3.1.cmml" xref="S2.SS2.SSS1.p7.2.m2.2.3.2"><cn type="integer" id="S2.SS2.SSS1.p7.2.m2.1.1.cmml" xref="S2.SS2.SSS1.p7.2.m2.1.1">0</cn><cn type="integer" id="S2.SS2.SSS1.p7.2.m2.2.2.cmml" xref="S2.SS2.SSS1.p7.2.m2.2.2">1</cn></interval></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p7.2.m2.2c">(0,1]</annotation></semantics></math> are used. A common starting value is <math id="S2.SS2.SSS1.p7.3.m3.1" class="ltx_Math" alttext="0.01" display="inline"><semantics id="S2.SS2.SSS1.p7.3.m3.1a"><mn id="S2.SS2.SSS1.p7.3.m3.1.1" xref="S2.SS2.SSS1.p7.3.m3.1.1.cmml">0.01</mn><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS1.p7.3.m3.1b"><cn type="float" id="S2.SS2.SSS1.p7.3.m3.1.1.cmml" xref="S2.SS2.SSS1.p7.3.m3.1.1">0.01</cn></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS1.p7.3.m3.1c">0.01</annotation></semantics></math>. A learning rate that is too high may overshoot a global optimum. A learning rate that is too low, on the other hand, may severely impact the performance of the algorithm.</p>
</div>
</section>
<section id="S2.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.2 </span>Federated Stochastic Gradient Descent.</h4>

<div id="S2.SS2.SSS2.p1" class="ltx_para">
<p id="S2.SS2.SSS2.p1.11" class="ltx_p">Federated SGD is an extension of SGD. It takes into account that there are <math id="S2.SS2.SSS2.p1.1.m1.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S2.SS2.SSS2.p1.1.m1.1a"><mi id="S2.SS2.SSS2.p1.1.m1.1.1" xref="S2.SS2.SSS2.p1.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.1.m1.1b"><ci id="S2.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS2.p1.1.m1.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.1.m1.1c">k</annotation></semantics></math> partitions <math id="S2.SS2.SSS2.p1.2.m2.1" class="ltx_Math" alttext="P_{j}" display="inline"><semantics id="S2.SS2.SSS2.p1.2.m2.1a"><msub id="S2.SS2.SSS2.p1.2.m2.1.1" xref="S2.SS2.SSS2.p1.2.m2.1.1.cmml"><mi id="S2.SS2.SSS2.p1.2.m2.1.1.2" xref="S2.SS2.SSS2.p1.2.m2.1.1.2.cmml">P</mi><mi id="S2.SS2.SSS2.p1.2.m2.1.1.3" xref="S2.SS2.SSS2.p1.2.m2.1.1.3.cmml">j</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.2.m2.1b"><apply id="S2.SS2.SSS2.p1.2.m2.1.1.cmml" xref="S2.SS2.SSS2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS2.p1.2.m2.1.1.1.cmml" xref="S2.SS2.SSS2.p1.2.m2.1.1">subscript</csymbol><ci id="S2.SS2.SSS2.p1.2.m2.1.1.2.cmml" xref="S2.SS2.SSS2.p1.2.m2.1.1.2">𝑃</ci><ci id="S2.SS2.SSS2.p1.2.m2.1.1.3.cmml" xref="S2.SS2.SSS2.p1.2.m2.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.2.m2.1c">P_{j}</annotation></semantics></math> of the training data, with <math id="S2.SS2.SSS2.p1.3.m3.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S2.SS2.SSS2.p1.3.m3.1a"><mi id="S2.SS2.SSS2.p1.3.m3.1.1" xref="S2.SS2.SSS2.p1.3.m3.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.3.m3.1b"><ci id="S2.SS2.SSS2.p1.3.m3.1.1.cmml" xref="S2.SS2.SSS2.p1.3.m3.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.3.m3.1c">j</annotation></semantics></math> ranging from <math id="S2.SS2.SSS2.p1.4.m4.1" class="ltx_Math" alttext="1" display="inline"><semantics id="S2.SS2.SSS2.p1.4.m4.1a"><mn id="S2.SS2.SSS2.p1.4.m4.1.1" xref="S2.SS2.SSS2.p1.4.m4.1.1.cmml">1</mn><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.4.m4.1b"><cn type="integer" id="S2.SS2.SSS2.p1.4.m4.1.1.cmml" xref="S2.SS2.SSS2.p1.4.m4.1.1">1</cn></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.4.m4.1c">1</annotation></semantics></math> to <math id="S2.SS2.SSS2.p1.5.m5.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S2.SS2.SSS2.p1.5.m5.1a"><mi id="S2.SS2.SSS2.p1.5.m5.1.1" xref="S2.SS2.SSS2.p1.5.m5.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.5.m5.1b"><ci id="S2.SS2.SSS2.p1.5.m5.1.1.cmml" xref="S2.SS2.SSS2.p1.5.m5.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.5.m5.1c">k</annotation></semantics></math>, i.e. there is a bijection between partitions and clients. Consequently, Eq. <a href="#S2.E3" title="In 2.2.1 Stochastic Gradient Descent. ‣ 2.2 Federated Stochastic Gradient Descent ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> has to be modified as we need to consider the work performed on each client <math id="S2.SS2.SSS2.p1.6.m6.1" class="ltx_Math" alttext="\in c" display="inline"><semantics id="S2.SS2.SSS2.p1.6.m6.1a"><mrow id="S2.SS2.SSS2.p1.6.m6.1.1" xref="S2.SS2.SSS2.p1.6.m6.1.1.cmml"><mi id="S2.SS2.SSS2.p1.6.m6.1.1.2" xref="S2.SS2.SSS2.p1.6.m6.1.1.2.cmml"></mi><mo id="S2.SS2.SSS2.p1.6.m6.1.1.1" xref="S2.SS2.SSS2.p1.6.m6.1.1.1.cmml">∈</mo><mi id="S2.SS2.SSS2.p1.6.m6.1.1.3" xref="S2.SS2.SSS2.p1.6.m6.1.1.3.cmml">c</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.6.m6.1b"><apply id="S2.SS2.SSS2.p1.6.m6.1.1.cmml" xref="S2.SS2.SSS2.p1.6.m6.1.1"><in id="S2.SS2.SSS2.p1.6.m6.1.1.1.cmml" xref="S2.SS2.SSS2.p1.6.m6.1.1.1"></in><csymbol cd="latexml" id="S2.SS2.SSS2.p1.6.m6.1.1.2.cmml" xref="S2.SS2.SSS2.p1.6.m6.1.1.2">absent</csymbol><ci id="S2.SS2.SSS2.p1.6.m6.1.1.3.cmml" xref="S2.SS2.SSS2.p1.6.m6.1.1.3">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.6.m6.1c">\in c</annotation></semantics></math>, where <math id="S2.SS2.SSS2.p1.7.m7.1" class="ltx_Math" alttext="c" display="inline"><semantics id="S2.SS2.SSS2.p1.7.m7.1a"><mi id="S2.SS2.SSS2.p1.7.m7.1.1" xref="S2.SS2.SSS2.p1.7.m7.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.7.m7.1b"><ci id="S2.SS2.SSS2.p1.7.m7.1.1.cmml" xref="S2.SS2.SSS2.p1.7.m7.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.7.m7.1c">c</annotation></semantics></math> is the chosen subset of all clients <math id="S2.SS2.SSS2.p1.8.m8.1" class="ltx_Math" alttext="C" display="inline"><semantics id="S2.SS2.SSS2.p1.8.m8.1a"><mi id="S2.SS2.SSS2.p1.8.m8.1.1" xref="S2.SS2.SSS2.p1.8.m8.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.8.m8.1b"><ci id="S2.SS2.SSS2.p1.8.m8.1.1.cmml" xref="S2.SS2.SSS2.p1.8.m8.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.8.m8.1c">C</annotation></semantics></math>. The objective function is attempted to be minimized for each of the <math id="S2.SS2.SSS2.p1.9.m9.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S2.SS2.SSS2.p1.9.m9.1a"><mi id="S2.SS2.SSS2.p1.9.m9.1.1" xref="S2.SS2.SSS2.p1.9.m9.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.9.m9.1b"><ci id="S2.SS2.SSS2.p1.9.m9.1.1.cmml" xref="S2.SS2.SSS2.p1.9.m9.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.9.m9.1c">k</annotation></semantics></math> clients. However, the goal is to optimize the global model, not any of the local models. For Eq. <a href="#S2.E4" title="In 2.2.2 Federated Stochastic Gradient Descent. ‣ 2.2 Federated Stochastic Gradient Descent ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>, keep in mind that there are <math id="S2.SS2.SSS2.p1.10.m10.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S2.SS2.SSS2.p1.10.m10.1a"><mi id="S2.SS2.SSS2.p1.10.m10.1.1" xref="S2.SS2.SSS2.p1.10.m10.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.10.m10.1b"><ci id="S2.SS2.SSS2.p1.10.m10.1.1.cmml" xref="S2.SS2.SSS2.p1.10.m10.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.10.m10.1c">n</annotation></semantics></math> elements in the input data, thus <math id="S2.SS2.SSS2.p1.11.m11.1" class="ltx_Math" alttext="n=\sum\nolimits_{j}|P_{j}|" display="inline"><semantics id="S2.SS2.SSS2.p1.11.m11.1a"><mrow id="S2.SS2.SSS2.p1.11.m11.1.1" xref="S2.SS2.SSS2.p1.11.m11.1.1.cmml"><mi id="S2.SS2.SSS2.p1.11.m11.1.1.3" xref="S2.SS2.SSS2.p1.11.m11.1.1.3.cmml">n</mi><mo rspace="0.111em" id="S2.SS2.SSS2.p1.11.m11.1.1.2" xref="S2.SS2.SSS2.p1.11.m11.1.1.2.cmml">=</mo><mrow id="S2.SS2.SSS2.p1.11.m11.1.1.1" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.cmml"><msub id="S2.SS2.SSS2.p1.11.m11.1.1.1.2" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.2.cmml"><mo rspace="0em" id="S2.SS2.SSS2.p1.11.m11.1.1.1.2.2" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.2.2.cmml">∑</mo><mi id="S2.SS2.SSS2.p1.11.m11.1.1.1.2.3" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.2.3.cmml">j</mi></msub><mrow id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.2.cmml"><mo stretchy="false" id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.2" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.2.1.cmml">|</mo><msub id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.cmml"><mi id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.2" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.2.cmml">P</mi><mi id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.3" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.3" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.2.1.cmml">|</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS2.p1.11.m11.1b"><apply id="S2.SS2.SSS2.p1.11.m11.1.1.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1"><eq id="S2.SS2.SSS2.p1.11.m11.1.1.2.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.2"></eq><ci id="S2.SS2.SSS2.p1.11.m11.1.1.3.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.3">𝑛</ci><apply id="S2.SS2.SSS2.p1.11.m11.1.1.1.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1"><apply id="S2.SS2.SSS2.p1.11.m11.1.1.1.2.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.2"><csymbol cd="ambiguous" id="S2.SS2.SSS2.p1.11.m11.1.1.1.2.1.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.2">subscript</csymbol><sum id="S2.SS2.SSS2.p1.11.m11.1.1.1.2.2.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.2.2"></sum><ci id="S2.SS2.SSS2.p1.11.m11.1.1.1.2.3.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.2.3">𝑗</ci></apply><apply id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.2.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1"><abs id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.2.1.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.2"></abs><apply id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.1.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.2.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.2">𝑃</ci><ci id="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.3.cmml" xref="S2.SS2.SSS2.p1.11.m11.1.1.1.1.1.1.3">𝑗</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS2.p1.11.m11.1c">n=\sum\nolimits_{j}|P_{j}|</annotation></semantics></math>.</p>
</div>
<div id="S2.SS2.SSS2.p2" class="ltx_para">
<table id="S2.E4" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E4.m1.7" class="ltx_Math" alttext="F^{j}(w)=\frac{1}{|P_{j}|}\displaystyle\sum_{i\in P_{j}}F_{i}(w)\mathit{~{}for~{}}j=1,\dotsc,k" display="block"><semantics id="S2.E4.m1.7a"><mrow id="S2.E4.m1.7.7.2" xref="S2.E4.m1.7.7.3.cmml"><mrow id="S2.E4.m1.6.6.1.1" xref="S2.E4.m1.6.6.1.1.cmml"><mrow id="S2.E4.m1.6.6.1.1.2" xref="S2.E4.m1.6.6.1.1.2.cmml"><msup id="S2.E4.m1.6.6.1.1.2.2" xref="S2.E4.m1.6.6.1.1.2.2.cmml"><mi id="S2.E4.m1.6.6.1.1.2.2.2" xref="S2.E4.m1.6.6.1.1.2.2.2.cmml">F</mi><mi id="S2.E4.m1.6.6.1.1.2.2.3" xref="S2.E4.m1.6.6.1.1.2.2.3.cmml">j</mi></msup><mo lspace="0em" rspace="0em" id="S2.E4.m1.6.6.1.1.2.1" xref="S2.E4.m1.6.6.1.1.2.1.cmml">​</mo><mrow id="S2.E4.m1.6.6.1.1.2.3.2" xref="S2.E4.m1.6.6.1.1.2.cmml"><mo stretchy="false" id="S2.E4.m1.6.6.1.1.2.3.2.1" xref="S2.E4.m1.6.6.1.1.2.cmml">(</mo><mi id="S2.E4.m1.2.2" xref="S2.E4.m1.2.2.cmml">w</mi><mo stretchy="false" id="S2.E4.m1.6.6.1.1.2.3.2.2" xref="S2.E4.m1.6.6.1.1.2.cmml">)</mo></mrow></mrow><mo id="S2.E4.m1.6.6.1.1.3" xref="S2.E4.m1.6.6.1.1.3.cmml">=</mo><mrow id="S2.E4.m1.6.6.1.1.4" xref="S2.E4.m1.6.6.1.1.4.cmml"><mfrac id="S2.E4.m1.1.1" xref="S2.E4.m1.1.1.cmml"><mn id="S2.E4.m1.1.1.3" xref="S2.E4.m1.1.1.3.cmml">1</mn><mrow id="S2.E4.m1.1.1.1.1" xref="S2.E4.m1.1.1.1.2.cmml"><mo stretchy="false" id="S2.E4.m1.1.1.1.1.2" xref="S2.E4.m1.1.1.1.2.1.cmml">|</mo><msub id="S2.E4.m1.1.1.1.1.1" xref="S2.E4.m1.1.1.1.1.1.cmml"><mi id="S2.E4.m1.1.1.1.1.1.2" xref="S2.E4.m1.1.1.1.1.1.2.cmml">P</mi><mi id="S2.E4.m1.1.1.1.1.1.3" xref="S2.E4.m1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="S2.E4.m1.1.1.1.1.3" xref="S2.E4.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo lspace="0em" rspace="0em" id="S2.E4.m1.6.6.1.1.4.1" xref="S2.E4.m1.6.6.1.1.4.1.cmml">​</mo><mrow id="S2.E4.m1.6.6.1.1.4.2" xref="S2.E4.m1.6.6.1.1.4.2.cmml"><munder id="S2.E4.m1.6.6.1.1.4.2.1" xref="S2.E4.m1.6.6.1.1.4.2.1.cmml"><mo movablelimits="false" id="S2.E4.m1.6.6.1.1.4.2.1.2" xref="S2.E4.m1.6.6.1.1.4.2.1.2.cmml">∑</mo><mrow id="S2.E4.m1.6.6.1.1.4.2.1.3" xref="S2.E4.m1.6.6.1.1.4.2.1.3.cmml"><mi id="S2.E4.m1.6.6.1.1.4.2.1.3.2" xref="S2.E4.m1.6.6.1.1.4.2.1.3.2.cmml">i</mi><mo id="S2.E4.m1.6.6.1.1.4.2.1.3.1" xref="S2.E4.m1.6.6.1.1.4.2.1.3.1.cmml">∈</mo><msub id="S2.E4.m1.6.6.1.1.4.2.1.3.3" xref="S2.E4.m1.6.6.1.1.4.2.1.3.3.cmml"><mi id="S2.E4.m1.6.6.1.1.4.2.1.3.3.2" xref="S2.E4.m1.6.6.1.1.4.2.1.3.3.2.cmml">P</mi><mi id="S2.E4.m1.6.6.1.1.4.2.1.3.3.3" xref="S2.E4.m1.6.6.1.1.4.2.1.3.3.3.cmml">j</mi></msub></mrow></munder><mrow id="S2.E4.m1.6.6.1.1.4.2.2" xref="S2.E4.m1.6.6.1.1.4.2.2.cmml"><msub id="S2.E4.m1.6.6.1.1.4.2.2.2" xref="S2.E4.m1.6.6.1.1.4.2.2.2.cmml"><mi id="S2.E4.m1.6.6.1.1.4.2.2.2.2" xref="S2.E4.m1.6.6.1.1.4.2.2.2.2.cmml">F</mi><mi id="S2.E4.m1.6.6.1.1.4.2.2.2.3" xref="S2.E4.m1.6.6.1.1.4.2.2.2.3.cmml">i</mi></msub><mo lspace="0em" rspace="0em" id="S2.E4.m1.6.6.1.1.4.2.2.1" xref="S2.E4.m1.6.6.1.1.4.2.2.1.cmml">​</mo><mrow id="S2.E4.m1.6.6.1.1.4.2.2.3.2" xref="S2.E4.m1.6.6.1.1.4.2.2.cmml"><mo stretchy="false" id="S2.E4.m1.6.6.1.1.4.2.2.3.2.1" xref="S2.E4.m1.6.6.1.1.4.2.2.cmml">(</mo><mi id="S2.E4.m1.3.3" xref="S2.E4.m1.3.3.cmml">w</mi><mo stretchy="false" id="S2.E4.m1.6.6.1.1.4.2.2.3.2.2" xref="S2.E4.m1.6.6.1.1.4.2.2.cmml">)</mo></mrow><mo lspace="0.330em" rspace="0em" id="S2.E4.m1.6.6.1.1.4.2.2.1a" xref="S2.E4.m1.6.6.1.1.4.2.2.1.cmml">​</mo><mi id="S2.E4.m1.6.6.1.1.4.2.2.4" xref="S2.E4.m1.6.6.1.1.4.2.2.4.cmml">𝑓𝑜𝑟</mi><mo lspace="0.330em" rspace="0em" id="S2.E4.m1.6.6.1.1.4.2.2.1b" xref="S2.E4.m1.6.6.1.1.4.2.2.1.cmml">​</mo><mi id="S2.E4.m1.6.6.1.1.4.2.2.5" xref="S2.E4.m1.6.6.1.1.4.2.2.5.cmml">j</mi></mrow></mrow></mrow><mo id="S2.E4.m1.6.6.1.1.5" xref="S2.E4.m1.6.6.1.1.5.cmml">=</mo><mn id="S2.E4.m1.6.6.1.1.6" xref="S2.E4.m1.6.6.1.1.6.cmml">1</mn></mrow><mo id="S2.E4.m1.7.7.2.3" xref="S2.E4.m1.7.7.3a.cmml">,</mo><mrow id="S2.E4.m1.7.7.2.2.2" xref="S2.E4.m1.7.7.2.2.1.cmml"><mi mathvariant="normal" id="S2.E4.m1.4.4" xref="S2.E4.m1.4.4.cmml">…</mi><mo id="S2.E4.m1.7.7.2.2.2.1" xref="S2.E4.m1.7.7.2.2.1.cmml">,</mo><mi id="S2.E4.m1.5.5" xref="S2.E4.m1.5.5.cmml">k</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E4.m1.7b"><apply id="S2.E4.m1.7.7.3.cmml" xref="S2.E4.m1.7.7.2"><csymbol cd="ambiguous" id="S2.E4.m1.7.7.3a.cmml" xref="S2.E4.m1.7.7.2.3">formulae-sequence</csymbol><apply id="S2.E4.m1.6.6.1.1.cmml" xref="S2.E4.m1.6.6.1.1"><and id="S2.E4.m1.6.6.1.1a.cmml" xref="S2.E4.m1.6.6.1.1"></and><apply id="S2.E4.m1.6.6.1.1b.cmml" xref="S2.E4.m1.6.6.1.1"><eq id="S2.E4.m1.6.6.1.1.3.cmml" xref="S2.E4.m1.6.6.1.1.3"></eq><apply id="S2.E4.m1.6.6.1.1.2.cmml" xref="S2.E4.m1.6.6.1.1.2"><times id="S2.E4.m1.6.6.1.1.2.1.cmml" xref="S2.E4.m1.6.6.1.1.2.1"></times><apply id="S2.E4.m1.6.6.1.1.2.2.cmml" xref="S2.E4.m1.6.6.1.1.2.2"><csymbol cd="ambiguous" id="S2.E4.m1.6.6.1.1.2.2.1.cmml" xref="S2.E4.m1.6.6.1.1.2.2">superscript</csymbol><ci id="S2.E4.m1.6.6.1.1.2.2.2.cmml" xref="S2.E4.m1.6.6.1.1.2.2.2">𝐹</ci><ci id="S2.E4.m1.6.6.1.1.2.2.3.cmml" xref="S2.E4.m1.6.6.1.1.2.2.3">𝑗</ci></apply><ci id="S2.E4.m1.2.2.cmml" xref="S2.E4.m1.2.2">𝑤</ci></apply><apply id="S2.E4.m1.6.6.1.1.4.cmml" xref="S2.E4.m1.6.6.1.1.4"><times id="S2.E4.m1.6.6.1.1.4.1.cmml" xref="S2.E4.m1.6.6.1.1.4.1"></times><apply id="S2.E4.m1.1.1.cmml" xref="S2.E4.m1.1.1"><divide id="S2.E4.m1.1.1.2.cmml" xref="S2.E4.m1.1.1"></divide><cn type="integer" id="S2.E4.m1.1.1.3.cmml" xref="S2.E4.m1.1.1.3">1</cn><apply id="S2.E4.m1.1.1.1.2.cmml" xref="S2.E4.m1.1.1.1.1"><abs id="S2.E4.m1.1.1.1.2.1.cmml" xref="S2.E4.m1.1.1.1.1.2"></abs><apply id="S2.E4.m1.1.1.1.1.1.cmml" xref="S2.E4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E4.m1.1.1.1.1.1.1.cmml" xref="S2.E4.m1.1.1.1.1.1">subscript</csymbol><ci id="S2.E4.m1.1.1.1.1.1.2.cmml" xref="S2.E4.m1.1.1.1.1.1.2">𝑃</ci><ci id="S2.E4.m1.1.1.1.1.1.3.cmml" xref="S2.E4.m1.1.1.1.1.1.3">𝑗</ci></apply></apply></apply><apply id="S2.E4.m1.6.6.1.1.4.2.cmml" xref="S2.E4.m1.6.6.1.1.4.2"><apply id="S2.E4.m1.6.6.1.1.4.2.1.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1"><csymbol cd="ambiguous" id="S2.E4.m1.6.6.1.1.4.2.1.1.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1">subscript</csymbol><sum id="S2.E4.m1.6.6.1.1.4.2.1.2.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1.2"></sum><apply id="S2.E4.m1.6.6.1.1.4.2.1.3.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1.3"><in id="S2.E4.m1.6.6.1.1.4.2.1.3.1.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1.3.1"></in><ci id="S2.E4.m1.6.6.1.1.4.2.1.3.2.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1.3.2">𝑖</ci><apply id="S2.E4.m1.6.6.1.1.4.2.1.3.3.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1.3.3"><csymbol cd="ambiguous" id="S2.E4.m1.6.6.1.1.4.2.1.3.3.1.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1.3.3">subscript</csymbol><ci id="S2.E4.m1.6.6.1.1.4.2.1.3.3.2.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1.3.3.2">𝑃</ci><ci id="S2.E4.m1.6.6.1.1.4.2.1.3.3.3.cmml" xref="S2.E4.m1.6.6.1.1.4.2.1.3.3.3">𝑗</ci></apply></apply></apply><apply id="S2.E4.m1.6.6.1.1.4.2.2.cmml" xref="S2.E4.m1.6.6.1.1.4.2.2"><times id="S2.E4.m1.6.6.1.1.4.2.2.1.cmml" xref="S2.E4.m1.6.6.1.1.4.2.2.1"></times><apply id="S2.E4.m1.6.6.1.1.4.2.2.2.cmml" xref="S2.E4.m1.6.6.1.1.4.2.2.2"><csymbol cd="ambiguous" id="S2.E4.m1.6.6.1.1.4.2.2.2.1.cmml" xref="S2.E4.m1.6.6.1.1.4.2.2.2">subscript</csymbol><ci id="S2.E4.m1.6.6.1.1.4.2.2.2.2.cmml" xref="S2.E4.m1.6.6.1.1.4.2.2.2.2">𝐹</ci><ci id="S2.E4.m1.6.6.1.1.4.2.2.2.3.cmml" xref="S2.E4.m1.6.6.1.1.4.2.2.2.3">𝑖</ci></apply><ci id="S2.E4.m1.3.3.cmml" xref="S2.E4.m1.3.3">𝑤</ci><ci id="S2.E4.m1.6.6.1.1.4.2.2.4.cmml" xref="S2.E4.m1.6.6.1.1.4.2.2.4">𝑓𝑜𝑟</ci><ci id="S2.E4.m1.6.6.1.1.4.2.2.5.cmml" xref="S2.E4.m1.6.6.1.1.4.2.2.5">𝑗</ci></apply></apply></apply></apply><apply id="S2.E4.m1.6.6.1.1c.cmml" xref="S2.E4.m1.6.6.1.1"><eq id="S2.E4.m1.6.6.1.1.5.cmml" xref="S2.E4.m1.6.6.1.1.5"></eq><share href="#S2.E4.m1.6.6.1.1.4.cmml" id="S2.E4.m1.6.6.1.1d.cmml" xref="S2.E4.m1.6.6.1.1"></share><cn type="integer" id="S2.E4.m1.6.6.1.1.6.cmml" xref="S2.E4.m1.6.6.1.1.6">1</cn></apply></apply><list id="S2.E4.m1.7.7.2.2.1.cmml" xref="S2.E4.m1.7.7.2.2.2"><ci id="S2.E4.m1.4.4.cmml" xref="S2.E4.m1.4.4">…</ci><ci id="S2.E4.m1.5.5.cmml" xref="S2.E4.m1.5.5">𝑘</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E4.m1.7c">F^{j}(w)=\frac{1}{|P_{j}|}\displaystyle\sum_{i\in P_{j}}F_{i}(w)\mathit{~{}for~{}}j=1,\dotsc,k</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p id="S2.SS2.SSS2.p2.1" class="ltx_p">The global objective function is shown in Eq. <a href="#S2.E5" title="In 2.2.2 Federated Stochastic Gradient Descent. ‣ 2.2 Federated Stochastic Gradient Descent ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a>. Its full derivation is provided in Appendix <a href="#Pt0.A1" title="Appendix 0.A Mathematical Derivation of Federated Stochastic Gradient Descent ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">0.A</span></a>.</p>
<table id="S2.E5" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E5.m1.3" class="ltx_Math" alttext="F(w)=\frac{1}{n}\displaystyle\sum_{j=1}^{k}|P_{j}|F^{j}(w)" display="block"><semantics id="S2.E5.m1.3a"><mrow id="S2.E5.m1.3.3" xref="S2.E5.m1.3.3.cmml"><mrow id="S2.E5.m1.3.3.3" xref="S2.E5.m1.3.3.3.cmml"><mi id="S2.E5.m1.3.3.3.2" xref="S2.E5.m1.3.3.3.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="S2.E5.m1.3.3.3.1" xref="S2.E5.m1.3.3.3.1.cmml">​</mo><mrow id="S2.E5.m1.3.3.3.3.2" xref="S2.E5.m1.3.3.3.cmml"><mo stretchy="false" id="S2.E5.m1.3.3.3.3.2.1" xref="S2.E5.m1.3.3.3.cmml">(</mo><mi id="S2.E5.m1.1.1" xref="S2.E5.m1.1.1.cmml">w</mi><mo stretchy="false" id="S2.E5.m1.3.3.3.3.2.2" xref="S2.E5.m1.3.3.3.cmml">)</mo></mrow></mrow><mo id="S2.E5.m1.3.3.2" xref="S2.E5.m1.3.3.2.cmml">=</mo><mrow id="S2.E5.m1.3.3.1" xref="S2.E5.m1.3.3.1.cmml"><mfrac id="S2.E5.m1.3.3.1.3" xref="S2.E5.m1.3.3.1.3.cmml"><mn id="S2.E5.m1.3.3.1.3.2" xref="S2.E5.m1.3.3.1.3.2.cmml">1</mn><mi id="S2.E5.m1.3.3.1.3.3" xref="S2.E5.m1.3.3.1.3.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="S2.E5.m1.3.3.1.2" xref="S2.E5.m1.3.3.1.2.cmml">​</mo><mrow id="S2.E5.m1.3.3.1.1" xref="S2.E5.m1.3.3.1.1.cmml"><munderover id="S2.E5.m1.3.3.1.1.2" xref="S2.E5.m1.3.3.1.1.2.cmml"><mo movablelimits="false" rspace="0em" id="S2.E5.m1.3.3.1.1.2.2.2" xref="S2.E5.m1.3.3.1.1.2.2.2.cmml">∑</mo><mrow id="S2.E5.m1.3.3.1.1.2.2.3" xref="S2.E5.m1.3.3.1.1.2.2.3.cmml"><mi id="S2.E5.m1.3.3.1.1.2.2.3.2" xref="S2.E5.m1.3.3.1.1.2.2.3.2.cmml">j</mi><mo id="S2.E5.m1.3.3.1.1.2.2.3.1" xref="S2.E5.m1.3.3.1.1.2.2.3.1.cmml">=</mo><mn id="S2.E5.m1.3.3.1.1.2.2.3.3" xref="S2.E5.m1.3.3.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S2.E5.m1.3.3.1.1.2.3" xref="S2.E5.m1.3.3.1.1.2.3.cmml">k</mi></munderover><mrow id="S2.E5.m1.3.3.1.1.1" xref="S2.E5.m1.3.3.1.1.1.cmml"><mrow id="S2.E5.m1.3.3.1.1.1.1.1" xref="S2.E5.m1.3.3.1.1.1.1.2.cmml"><mo stretchy="false" id="S2.E5.m1.3.3.1.1.1.1.1.2" xref="S2.E5.m1.3.3.1.1.1.1.2.1.cmml">|</mo><msub id="S2.E5.m1.3.3.1.1.1.1.1.1" xref="S2.E5.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S2.E5.m1.3.3.1.1.1.1.1.1.2" xref="S2.E5.m1.3.3.1.1.1.1.1.1.2.cmml">P</mi><mi id="S2.E5.m1.3.3.1.1.1.1.1.1.3" xref="S2.E5.m1.3.3.1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="S2.E5.m1.3.3.1.1.1.1.1.3" xref="S2.E5.m1.3.3.1.1.1.1.2.1.cmml">|</mo></mrow><mo lspace="0em" rspace="0em" id="S2.E5.m1.3.3.1.1.1.2" xref="S2.E5.m1.3.3.1.1.1.2.cmml">​</mo><msup id="S2.E5.m1.3.3.1.1.1.3" xref="S2.E5.m1.3.3.1.1.1.3.cmml"><mi id="S2.E5.m1.3.3.1.1.1.3.2" xref="S2.E5.m1.3.3.1.1.1.3.2.cmml">F</mi><mi id="S2.E5.m1.3.3.1.1.1.3.3" xref="S2.E5.m1.3.3.1.1.1.3.3.cmml">j</mi></msup><mo lspace="0em" rspace="0em" id="S2.E5.m1.3.3.1.1.1.2a" xref="S2.E5.m1.3.3.1.1.1.2.cmml">​</mo><mrow id="S2.E5.m1.3.3.1.1.1.4.2" xref="S2.E5.m1.3.3.1.1.1.cmml"><mo stretchy="false" id="S2.E5.m1.3.3.1.1.1.4.2.1" xref="S2.E5.m1.3.3.1.1.1.cmml">(</mo><mi id="S2.E5.m1.2.2" xref="S2.E5.m1.2.2.cmml">w</mi><mo stretchy="false" id="S2.E5.m1.3.3.1.1.1.4.2.2" xref="S2.E5.m1.3.3.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.E5.m1.3b"><apply id="S2.E5.m1.3.3.cmml" xref="S2.E5.m1.3.3"><eq id="S2.E5.m1.3.3.2.cmml" xref="S2.E5.m1.3.3.2"></eq><apply id="S2.E5.m1.3.3.3.cmml" xref="S2.E5.m1.3.3.3"><times id="S2.E5.m1.3.3.3.1.cmml" xref="S2.E5.m1.3.3.3.1"></times><ci id="S2.E5.m1.3.3.3.2.cmml" xref="S2.E5.m1.3.3.3.2">𝐹</ci><ci id="S2.E5.m1.1.1.cmml" xref="S2.E5.m1.1.1">𝑤</ci></apply><apply id="S2.E5.m1.3.3.1.cmml" xref="S2.E5.m1.3.3.1"><times id="S2.E5.m1.3.3.1.2.cmml" xref="S2.E5.m1.3.3.1.2"></times><apply id="S2.E5.m1.3.3.1.3.cmml" xref="S2.E5.m1.3.3.1.3"><divide id="S2.E5.m1.3.3.1.3.1.cmml" xref="S2.E5.m1.3.3.1.3"></divide><cn type="integer" id="S2.E5.m1.3.3.1.3.2.cmml" xref="S2.E5.m1.3.3.1.3.2">1</cn><ci id="S2.E5.m1.3.3.1.3.3.cmml" xref="S2.E5.m1.3.3.1.3.3">𝑛</ci></apply><apply id="S2.E5.m1.3.3.1.1.cmml" xref="S2.E5.m1.3.3.1.1"><apply id="S2.E5.m1.3.3.1.1.2.cmml" xref="S2.E5.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S2.E5.m1.3.3.1.1.2.1.cmml" xref="S2.E5.m1.3.3.1.1.2">superscript</csymbol><apply id="S2.E5.m1.3.3.1.1.2.2.cmml" xref="S2.E5.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S2.E5.m1.3.3.1.1.2.2.1.cmml" xref="S2.E5.m1.3.3.1.1.2">subscript</csymbol><sum id="S2.E5.m1.3.3.1.1.2.2.2.cmml" xref="S2.E5.m1.3.3.1.1.2.2.2"></sum><apply id="S2.E5.m1.3.3.1.1.2.2.3.cmml" xref="S2.E5.m1.3.3.1.1.2.2.3"><eq id="S2.E5.m1.3.3.1.1.2.2.3.1.cmml" xref="S2.E5.m1.3.3.1.1.2.2.3.1"></eq><ci id="S2.E5.m1.3.3.1.1.2.2.3.2.cmml" xref="S2.E5.m1.3.3.1.1.2.2.3.2">𝑗</ci><cn type="integer" id="S2.E5.m1.3.3.1.1.2.2.3.3.cmml" xref="S2.E5.m1.3.3.1.1.2.2.3.3">1</cn></apply></apply><ci id="S2.E5.m1.3.3.1.1.2.3.cmml" xref="S2.E5.m1.3.3.1.1.2.3">𝑘</ci></apply><apply id="S2.E5.m1.3.3.1.1.1.cmml" xref="S2.E5.m1.3.3.1.1.1"><times id="S2.E5.m1.3.3.1.1.1.2.cmml" xref="S2.E5.m1.3.3.1.1.1.2"></times><apply id="S2.E5.m1.3.3.1.1.1.1.2.cmml" xref="S2.E5.m1.3.3.1.1.1.1.1"><abs id="S2.E5.m1.3.3.1.1.1.1.2.1.cmml" xref="S2.E5.m1.3.3.1.1.1.1.1.2"></abs><apply id="S2.E5.m1.3.3.1.1.1.1.1.1.cmml" xref="S2.E5.m1.3.3.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E5.m1.3.3.1.1.1.1.1.1.1.cmml" xref="S2.E5.m1.3.3.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E5.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S2.E5.m1.3.3.1.1.1.1.1.1.2">𝑃</ci><ci id="S2.E5.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S2.E5.m1.3.3.1.1.1.1.1.1.3">𝑗</ci></apply></apply><apply id="S2.E5.m1.3.3.1.1.1.3.cmml" xref="S2.E5.m1.3.3.1.1.1.3"><csymbol cd="ambiguous" id="S2.E5.m1.3.3.1.1.1.3.1.cmml" xref="S2.E5.m1.3.3.1.1.1.3">superscript</csymbol><ci id="S2.E5.m1.3.3.1.1.1.3.2.cmml" xref="S2.E5.m1.3.3.1.1.1.3.2">𝐹</ci><ci id="S2.E5.m1.3.3.1.1.1.3.3.cmml" xref="S2.E5.m1.3.3.1.1.1.3.3">𝑗</ci></apply><ci id="S2.E5.m1.2.2.cmml" xref="S2.E5.m1.2.2">𝑤</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E5.m1.3c">F(w)=\frac{1}{n}\displaystyle\sum_{j=1}^{k}|P_{j}|F^{j}(w)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
</div>
</section>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>Motivating Use Case</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.1" class="ltx_p">Intelligent vehicles generate vast amounts of data. According to recent industry figures, they can generate dozens of gigabytes of data per hour <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>. Considering even a moderately sized fleet of just a few hundred cars, collecting data, transferring data to a central server, processing data on a central server and afterwards sending results to each car is infeasible as we are already in the region of terabytes of data per hour. Yet, even simple tasks like filtering on the client can provide valuable insights. This is an example of a relatively straightforward way of reducing input data to a small fraction of its original volume, which highlights the importance of decentralized data processing.</p>
</div>
<div id="S2.SS3.p2" class="ltx_para">
<p id="S2.SS3.p2.1" class="ltx_p">However, our focus is on a more complex use case in the context of distributed data analytics. We explore training a machine learning model on client devices with local data, while a central server performs supplementary tasks. This relates to a real-world setting in which connected cars <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite> are equipped with on-board units that continuously gather data. These on-board units are general-purpose computers with performance metrics comparable to smartphones. For instance, our hardware uses an ARM-based multi-core CPU, similar to those found in a typical mid-range smartphone. On-board units are connected via wireless or 4G broadband networking to a central server, possibly via intermediaries, so-called road-side units. This is by no means a merely theoretical scenario. For instance, a recent large-scale experiment with road-side units was carried out by Lee and Kim <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite> in South Korea in 2010.</p>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Solution</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">Our research prototype simulates a distributed system in which a central server interacts with a large number of clients. We first describe the main components of the framework itself (<a href="#S3.SS1" title="3.1 The Skeleton of the Framework ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.1</span></a>). This is followed by a discussion of a purely functional implementation of an artificial neural network (ANN) in Erlang (<a href="#S3.SS2" title="3.2 A Neural Network with Backpropagation in Erlang ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>). Subsequently, we describe how the skeleton and the ANN can be combined (<a href="#S3.SS3" title="3.3 The Combined Framework ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.3</span></a>). Finally, we discuss experimental results (<a href="#S3.SS4" title="3.4 Evaluation ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.4</span></a>).</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>The Skeleton of the Framework</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.3" class="ltx_p">This section illustrates the main ideas behind implementing a distributed machine learning framework. Consequently, we present the main parts of our skeleton, i.e. the client and server processes. The source code in this section leaves some details unspecified, but these can be filled in easily or referenced in the accompanying code repository. It seems appropriate to preface the discussion of our source code by briefly explaining the communication model of Erlang. In Erlang, processes communicate asynchronously by sending messages to each other. Each process has its own mailbox for incoming messages, which are processed in the order they arrive. However, the order in which they arrive is non-deterministic. If process <math id="S3.SS1.p1.1.m1.1" class="ltx_Math" alttext="C" display="inline"><semantics id="S3.SS1.p1.1.m1.1a"><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">C</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝐶</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">C</annotation></semantics></math> receives one message each from processes <math id="S3.SS1.p1.2.m2.1" class="ltx_Math" alttext="A" display="inline"><semantics id="S3.SS1.p1.2.m2.1a"><mi id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><ci id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">𝐴</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">A</annotation></semantics></math> and <math id="S3.SS1.p1.3.m3.1" class="ltx_Math" alttext="B" display="inline"><semantics id="S3.SS1.p1.3.m3.1a"><mi id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml">B</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><ci id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">𝐵</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">B</annotation></semantics></math>, in this order, there is no guarantee that they were also sent in this order.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">The skeleton consists of a client process, which may be instantiated an arbitrary number of times, and a server process. Both are shown in Code Listing <a href="#LST1" title="Listing 1 ‣ 3.1 The Skeleton of the Framework ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>. In the client process, the <span id="S3.SS1.p2.1.1" class="ltx_text ltx_font_typewriter">receive</span> clause awaits a tuple tagged with the atom <span id="S3.SS1.p2.1.2" class="ltx_text ltx_font_typewriter">assignment</span>. The received model is trained with local data via the function <span id="S3.SS1.p2.1.3" class="ltx_text ltx_font_typewriter">train</span>. Examples of such a model are the weights of an ANN or parameters of a linear regression equation. After training has concluded, the updated model is sent to the server process. A tuple that is tagged with the atom <span id="S3.SS1.p2.1.4" class="ltx_text ltx_font_typewriter">update</span> is sent to the server, using the operator ’<span id="S3.SS1.p2.1.5" class="ltx_text ltx_font_typewriter">!</span>’, which is pronounced as <em id="S3.SS1.p2.1.6" class="ltx_emph ltx_font_italic">send</em>. The server is addressed via the process identifier <span id="S3.SS1.p2.1.7" class="ltx_text ltx_font_typewriter">Server_Pid</span>. Thus, line 5 has to be read from right to left to trace the execution, i.e. we take a tuple tagged as <span id="S3.SS1.p2.1.8" class="ltx_text ltx_font_typewriter">update</span>, containing the process identifier of the current process that is returned when calling the function <span id="S3.SS1.p2.1.9" class="ltx_text ltx_font_typewriter">self</span> as well as the new local model, and send it to the server identified by <span id="S3.SS1.p2.1.10" class="ltx_text ltx_font_typewriter">Server_Pid</span>. Afterwards, the client function is called recursively, awaiting an updated model.</p>
</div>
<figure id="S3.SS1.fig1" class="ltx_figure">
<figure id="LST1" class="ltx_float ltx_lstlisting">
<div id="LST1.1" class="ltx_listing ltx_lst_language_Erlang ltx_lst_numbers_left ltx_lstlisting ltx_listing">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Y2xpZW50KCkgLT4KICByZWNlaXZlCiAgeyBhc3NpZ25tZW50LCBNb2RlbCwgU2VydmVyX1BpZCB9IC0+CiAgICBWYWwgPSB0cmFpbihNb2RlbCksICUgY29tcHV0ZXMgJ3dfaicKICAgIFNlcnZlcl9QaWQgISB7IHVwZGF0ZSwgc2VsZigpLCBWYWwgfSwKICAgIGNsaWVudCgpCiAgZW5kLgoKc2VydmVyKENsaWVudF9QaWRzLCBNb2RlbCkgLT4KICBTdWJzZXQgPSBzZWxlY3Rfc3Vic2V0KENsaWVudF9QaWRzKSwKICAlIFNlbmQgYXNzaWdubWVudDoKICBbIFggISB7IGFzc2lnbm1lbnQsIE1vZGVsLCBzZWxmKCkgfSB8fCBYIDwtIFN1YnNldCBdLAogICUgUmVjZWl2ZSB2YWx1ZXM6CiAgVmFscyA9IFsgcmVjZWl2ZSB7IHVwZGF0ZSwgUGlkLCBWYWwgfSAtPiBWYWwgZW5kIHx8IFBpZCA8LSBTdWJzZXQgXSwKICAlIFVwZGF0ZSBtb2RlbCwgaS5lLiBjb21wdXRlIGdsb2JhbCAndyc6CiAgTW9kZWxfID0gdXBkYXRlX21vZGVsKE1vZGVsLCBWYWxzLCBsZW5ndGgoQ2xpZW50X1BpZHMpKSwKICAlIE5vdGU6IGl0IGlzIGEgc2ltcGxpZmljYXRpb24gdG8gdXNlIHRoZSBudW1iZXIgb2YgY2xpZW50czsgaW4gdGhpcwogICUgY2FzZSwgZWFjaCBjbGllbnQgaGFzIHRoZSBzYW1lIG51bWJlciBvZiBkYXRhIHBvaW50cyB0byB3b3JrIHdpdGgKICBzZXJ2ZXIoQ2xpZW50X1BpZHMsIE1vZGVsXyku" download="">⬇</a></div>
<div id="lstnumberx1" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span><span id="lstnumberx1.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">client</span><span id="lstnumberx1.2" class="ltx_text" style="font-size:70%;">()</span><span id="lstnumberx1.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx1.4" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx2" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span><span id="lstnumberx2.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx2.2" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">receive</span>
</div>
<div id="lstnumberx3" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span><span id="lstnumberx3.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx3.2" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx3.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">assignment</span><span id="lstnumberx3.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx3.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Model</span><span id="lstnumberx3.8" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx3.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Server_Pid</span><span id="lstnumberx3.11" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.12" class="ltx_text" style="font-size:70%;">}</span><span id="lstnumberx3.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.14" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx4" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span><span id="lstnumberx4.1" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx4.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Val</span><span id="lstnumberx4.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx4.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx4.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx4.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">train</span><span id="lstnumberx4.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx4.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Model</span><span id="lstnumberx4.9" class="ltx_text" style="font-size:70%;">),</span><span id="lstnumberx4.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx4.11" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx4.11.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx4.11.1.1" class="ltx_text ltx_lst_space"> </span>computes<span id="lstnumberx4.11.1.2" class="ltx_text ltx_lst_space"> </span>’w_j’</span></span>
</div>
<div id="lstnumberx5" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span><span id="lstnumberx5.1" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx5.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Server_Pid</span><span id="lstnumberx5.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.4" class="ltx_text" style="font-size:70%;">!</span><span id="lstnumberx5.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.6" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx5.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">update</span><span id="lstnumberx5.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx5.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.11" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">self</span><span id="lstnumberx5.12" class="ltx_text" style="font-size:70%;">(),</span><span id="lstnumberx5.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Val</span><span id="lstnumberx5.15" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.16" class="ltx_text" style="font-size:70%;">},</span>
</div>
<div id="lstnumberx6" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span><span id="lstnumberx6.1" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx6.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">client</span><span id="lstnumberx6.3" class="ltx_text" style="font-size:70%;">()</span>
</div>
<div id="lstnumberx7" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span><span id="lstnumberx7.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx7.2" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">end</span><span id="lstnumberx7.3" class="ltx_text" style="font-size:70%;">.</span>
</div>
<div id="lstnumberx8" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span>
</div>
<div id="lstnumberx9" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span><span id="lstnumberx9.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">server</span><span id="lstnumberx9.2" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx9.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Client_Pids</span><span id="lstnumberx9.4" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx9.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx9.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Model</span><span id="lstnumberx9.7" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx9.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx9.9" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx10" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span><span id="lstnumberx10.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx10.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Subset</span><span id="lstnumberx10.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx10.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx10.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx10.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">select_subset</span><span id="lstnumberx10.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx10.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Client_Pids</span><span id="lstnumberx10.9" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span><span id="lstnumberx11.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx11.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx11.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx11.2.1.1" class="ltx_text ltx_lst_space"> </span>Send<span id="lstnumberx11.2.1.2" class="ltx_text ltx_lst_space"> </span>assignment:</span></span>
</div>
<div id="lstnumberx12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span><span id="lstnumberx12.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx12.2" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx12.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx12.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.6" class="ltx_text" style="font-size:70%;">!</span><span id="lstnumberx12.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.8" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx12.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">assignment</span><span id="lstnumberx12.11" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx12.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.13" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Model</span><span id="lstnumberx12.14" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx12.15" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.16" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">self</span><span id="lstnumberx12.17" class="ltx_text" style="font-size:70%;">()</span><span id="lstnumberx12.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.19" class="ltx_text" style="font-size:70%;">}</span><span id="lstnumberx12.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.21" class="ltx_text" style="font-size:70%;">||</span><span id="lstnumberx12.22" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.23" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx12.24" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.25" class="ltx_text" style="font-size:70%;">&lt;-</span><span id="lstnumberx12.26" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.27" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Subset</span><span id="lstnumberx12.28" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx12.29" class="ltx_text" style="font-size:70%;">],</span>
</div>
<div id="lstnumberx13" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span><span id="lstnumberx13.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx13.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx13.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx13.2.1.1" class="ltx_text ltx_lst_space"> </span>Receive<span id="lstnumberx13.2.1.2" class="ltx_text ltx_lst_space"> </span>values:</span></span>
</div>
<div id="lstnumberx14" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span><span id="lstnumberx14.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx14.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Vals</span><span id="lstnumberx14.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx14.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.6" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx14.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.8" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">receive</span><span id="lstnumberx14.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.10" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx14.11" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.12" class="ltx_text ltx_lst_identifier" style="font-size:70%;">update</span><span id="lstnumberx14.13" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx14.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.15" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">Pid</span><span id="lstnumberx14.16" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx14.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.18" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Val</span><span id="lstnumberx14.19" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.20" class="ltx_text" style="font-size:70%;">}</span><span id="lstnumberx14.21" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.22" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx14.23" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.24" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Val</span><span id="lstnumberx14.25" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.26" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">end</span><span id="lstnumberx14.27" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.28" class="ltx_text" style="font-size:70%;">||</span><span id="lstnumberx14.29" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.30" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">Pid</span><span id="lstnumberx14.31" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.32" class="ltx_text" style="font-size:70%;">&lt;-</span><span id="lstnumberx14.33" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.34" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Subset</span><span id="lstnumberx14.35" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx14.36" class="ltx_text" style="font-size:70%;">],</span>
</div>
<div id="lstnumberx15" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span><span id="lstnumberx15.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx15.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx15.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx15.2.1.1" class="ltx_text ltx_lst_space"> </span>Update<span id="lstnumberx15.2.1.2" class="ltx_text ltx_lst_space"> </span>model,<span id="lstnumberx15.2.1.3" class="ltx_text ltx_lst_space"> </span>i.e.<span id="lstnumberx15.2.1.4" class="ltx_text ltx_lst_space"> </span>compute<span id="lstnumberx15.2.1.5" class="ltx_text ltx_lst_space"> </span>global<span id="lstnumberx15.2.1.6" class="ltx_text ltx_lst_space"> </span>’w’:</span></span>
</div>
<div id="lstnumberx16" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">16</span><span id="lstnumberx16.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx16.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Model_</span><span id="lstnumberx16.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx16.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx16.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx16.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">update_model</span><span id="lstnumberx16.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx16.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Model</span><span id="lstnumberx16.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx16.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx16.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Vals</span><span id="lstnumberx16.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx16.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx16.14" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">length</span><span id="lstnumberx16.15" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx16.16" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Client_Pids</span><span id="lstnumberx16.17" class="ltx_text" style="font-size:70%;">)),</span>
</div>
<div id="lstnumberx17" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">17</span><span id="lstnumberx17.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx17.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx17.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx17.2.1.1" class="ltx_text ltx_lst_space"> </span>Note:<span id="lstnumberx17.2.1.2" class="ltx_text ltx_lst_space"> </span>it<span id="lstnumberx17.2.1.3" class="ltx_text ltx_lst_space"> </span>is<span id="lstnumberx17.2.1.4" class="ltx_text ltx_lst_space"> </span>a<span id="lstnumberx17.2.1.5" class="ltx_text ltx_lst_space"> </span>simplification<span id="lstnumberx17.2.1.6" class="ltx_text ltx_lst_space"> </span>to<span id="lstnumberx17.2.1.7" class="ltx_text ltx_lst_space"> </span>use<span id="lstnumberx17.2.1.8" class="ltx_text ltx_lst_space"> </span>the<span id="lstnumberx17.2.1.9" class="ltx_text ltx_lst_space"> </span>number<span id="lstnumberx17.2.1.10" class="ltx_text ltx_lst_space"> </span>of<span id="lstnumberx17.2.1.11" class="ltx_text ltx_lst_space"> </span>clients;<span id="lstnumberx17.2.1.12" class="ltx_text ltx_lst_space"> </span>in<span id="lstnumberx17.2.1.13" class="ltx_text ltx_lst_space"> </span>this</span></span>
</div>
<div id="lstnumberx18" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">18</span><span id="lstnumberx18.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx18.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx18.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx18.2.1.1" class="ltx_text ltx_lst_space"> </span>case,<span id="lstnumberx18.2.1.2" class="ltx_text ltx_lst_space"> </span>each<span id="lstnumberx18.2.1.3" class="ltx_text ltx_lst_space"> </span>client<span id="lstnumberx18.2.1.4" class="ltx_text ltx_lst_space"> </span>has<span id="lstnumberx18.2.1.5" class="ltx_text ltx_lst_space"> </span>the<span id="lstnumberx18.2.1.6" class="ltx_text ltx_lst_space"> </span>same<span id="lstnumberx18.2.1.7" class="ltx_text ltx_lst_space"> </span>number<span id="lstnumberx18.2.1.8" class="ltx_text ltx_lst_space"> </span>of<span id="lstnumberx18.2.1.9" class="ltx_text ltx_lst_space"> </span>data<span id="lstnumberx18.2.1.10" class="ltx_text ltx_lst_space"> </span>points<span id="lstnumberx18.2.1.11" class="ltx_text ltx_lst_space"> </span>to<span id="lstnumberx18.2.1.12" class="ltx_text ltx_lst_space"> </span>work<span id="lstnumberx18.2.1.13" class="ltx_text ltx_lst_space"> </span>with</span></span>
</div>
<div id="lstnumberx19" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">19</span><span id="lstnumberx19.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx19.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">server</span><span id="lstnumberx19.3" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx19.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Client_Pids</span><span id="lstnumberx19.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx19.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx19.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Model_</span><span id="lstnumberx19.8" class="ltx_text" style="font-size:70%;">).</span>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float">Listing 1: </span>Client and Server processes</figcaption>
</figure>
</figure>
<div id="S3.SS1.p3" class="ltx_para">
<p id="S3.SS1.p3.1" class="ltx_p">The server process shown in Code Listing <a href="#LST1" title="Listing 1 ‣ 3.1 The Skeleton of the Framework ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> does not perform computationally intensive tasks. Instead, its role is to maintain a global model, based on updates received from client processes. Our system selects a random subset of all available devices. Sending the current model to the selected subset of client processes can be concisely expressed via mapping over a list or a list comprehension. It is assumed that all devices complete their assignments. This is reflected in the list comprehension in line 14, which blocks until the results of all assignments have been received. The resulting list of values <span id="S3.SS1.p3.1.1" class="ltx_text ltx_font_typewriter">Vals</span> contains the updated local models of all client processes, with which a new global model will be constructed. The corresponding function <span id="S3.SS1.p3.1.2" class="ltx_text ltx_font_typewriter">update_model</span> is unspecified, however. After updating the model, the server process calls itself recursively. Overall, the preceding code is a textbook case of message passing in Erlang.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>A Neural Network with Backpropagation in Erlang</h3>

<section id="S3.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.1 </span>Artificial Neural Networks.</h4>

<div id="S3.SS2.SSS1.p1" class="ltx_para">
<p id="S3.SS2.SSS1.p1.1" class="ltx_p">Artificial Neural Networks (ANNs) are a standard method in machine learning for a variety of learning tasks. A prime example is classification based on pattern recognition, for instance tagging images with keywords. The general principle is to minimize an objective function that computes the magnitude of an error. There are normally three steps to deploying an ANN: training, validation, and use in production. First, a labeled data set is used to train an ANN, which has the goal of minimizing the objective function. There is the risk that the ANN has been over-trained, i.e. it has memorized its input. Therefore, a labeled validation set is used to ensure that a data set that is similar to the test set is also correctly classified. If those two steps have been performed satisfactorily, the ANN is ready to be used for real-world data classification tasks.</p>
</div>
<div id="S3.SS2.SSS1.p2" class="ltx_para">
<p id="S3.SS2.SSS1.p2.1" class="ltx_p">Figure <a href="#S3.F1" title="Figure 1 ‣ 3.2.1 Artificial Neural Networks. ‣ 3.2 A Neural Network with Backpropagation in Erlang ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> shows a typical ANN. It consists of two input neurons, three hidden neurons, and two output neurons. The two input neurons on the left are shaded in order to indicate that an ANN is normally not applied to fixed input values but instead applied sequentially to each element of a larger data set. The layer of neurons in the middle is the hidden layer; the layer on the right is the output layer. The edges labeled with their weights represent connections between neurons. The edges leaving the output layer transmit the final output. There are two sets of labeled edges, one set connecting the input layer to the hidden layer and the other connecting the hidden layer to the output layer. Edge weights are initialized to a small random value and updated via training. The goal is to minimize the output error, which is based on the difference between the target values and the values the output layer neurons emit. After a forward pass we can determine how close the values emitted by the output neurons are to the target values. This is followed by adjusting the weights of the ANN with the backpropagation algorithm. Together, these two steps amount to one <em id="S3.SS2.SSS1.p2.1.1" class="ltx_emph ltx_font_italic">epoch</em>. In the end, the output error is minimized via iterative adjustments of the weights of the ANN.</p>
</div>
<figure id="S3.F1" class="ltx_figure"><img src="" id="S3.F1.g1" class="ltx_graphics ltx_centering ltx_missing ltx_missing_image" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S3.F1.2.1.1" class="ltx_text" style="font-size:90%;">Figure 1</span>: </span><span id="S3.F1.3.2" class="ltx_text" style="font-size:90%;">Artificial neural network</span></figcaption>
</figure>
<div id="S3.SS2.SSS1.p3" class="ltx_para">
<p id="S3.SS2.SSS1.p3.1" class="ltx_p">Using the ANN in Fig. <a href="#S3.F1" title="Figure 1 ‣ 3.2.1 Artificial Neural Networks. ‣ 3.2 A Neural Network with Backpropagation in Erlang ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> as an example, we first perform a forward pass, which consists of computing the input of each hidden layer neuron by calculating the dot product of the input weights and all edges connecting the input nodes with that hidden layer neuron. For instance, the input of the topmost hidden layer neuron is <math id="S3.SS2.SSS1.p3.1.m1.1" class="ltx_Math" alttext="0.25\times 0.05+0.70\times 0.09=0.0755" display="inline"><semantics id="S3.SS2.SSS1.p3.1.m1.1a"><mrow id="S3.SS2.SSS1.p3.1.m1.1.1" xref="S3.SS2.SSS1.p3.1.m1.1.1.cmml"><mrow id="S3.SS2.SSS1.p3.1.m1.1.1.2" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.cmml"><mrow id="S3.SS2.SSS1.p3.1.m1.1.1.2.2" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.2.cmml"><mn id="S3.SS2.SSS1.p3.1.m1.1.1.2.2.2" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.2.2.cmml">0.25</mn><mo lspace="0.222em" rspace="0.222em" id="S3.SS2.SSS1.p3.1.m1.1.1.2.2.1" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.2.1.cmml">×</mo><mn id="S3.SS2.SSS1.p3.1.m1.1.1.2.2.3" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.2.3.cmml">0.05</mn></mrow><mo id="S3.SS2.SSS1.p3.1.m1.1.1.2.1" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.1.cmml">+</mo><mrow id="S3.SS2.SSS1.p3.1.m1.1.1.2.3" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.3.cmml"><mn id="S3.SS2.SSS1.p3.1.m1.1.1.2.3.2" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.3.2.cmml">0.70</mn><mo lspace="0.222em" rspace="0.222em" id="S3.SS2.SSS1.p3.1.m1.1.1.2.3.1" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.3.1.cmml">×</mo><mn id="S3.SS2.SSS1.p3.1.m1.1.1.2.3.3" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.3.3.cmml">0.09</mn></mrow></mrow><mo id="S3.SS2.SSS1.p3.1.m1.1.1.1" xref="S3.SS2.SSS1.p3.1.m1.1.1.1.cmml">=</mo><mn id="S3.SS2.SSS1.p3.1.m1.1.1.3" xref="S3.SS2.SSS1.p3.1.m1.1.1.3.cmml">0.0755</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p3.1.m1.1b"><apply id="S3.SS2.SSS1.p3.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1"><eq id="S3.SS2.SSS1.p3.1.m1.1.1.1.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.1"></eq><apply id="S3.SS2.SSS1.p3.1.m1.1.1.2.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2"><plus id="S3.SS2.SSS1.p3.1.m1.1.1.2.1.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.1"></plus><apply id="S3.SS2.SSS1.p3.1.m1.1.1.2.2.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.2"><times id="S3.SS2.SSS1.p3.1.m1.1.1.2.2.1.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.2.1"></times><cn type="float" id="S3.SS2.SSS1.p3.1.m1.1.1.2.2.2.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.2.2">0.25</cn><cn type="float" id="S3.SS2.SSS1.p3.1.m1.1.1.2.2.3.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.2.3">0.05</cn></apply><apply id="S3.SS2.SSS1.p3.1.m1.1.1.2.3.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.3"><times id="S3.SS2.SSS1.p3.1.m1.1.1.2.3.1.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.3.1"></times><cn type="float" id="S3.SS2.SSS1.p3.1.m1.1.1.2.3.2.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.3.2">0.70</cn><cn type="float" id="S3.SS2.SSS1.p3.1.m1.1.1.2.3.3.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.2.3.3">0.09</cn></apply></apply><cn type="float" id="S3.SS2.SSS1.p3.1.m1.1.1.3.cmml" xref="S3.SS2.SSS1.p3.1.m1.1.1.3">0.0755</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS1.p3.1.m1.1c">0.25\times 0.05+0.70\times 0.09=0.0755</annotation></semantics></math>. After applying the <em id="S3.SS2.SSS1.p3.1.1" class="ltx_emph ltx_font_italic">activation function</em> to that value, the input and output values of the output layer neurons are computed similarly. The activation function computes the output of a node, taking its input as the argument. Afterwards, the difference between target and actual output values can be calculated. This is followed by a backpropagation pass, in which the weights of the ANN are updated: first the weights of the edges from the output layer to the hidden layer, then the weights of the edges from the hidden layer to the input layer. These calculations are similar to the forward pass, except that the gradient, i.e. the derivative of the objective function we want to minimize, is used when calculating the respective dot products. Training an ANN with a batch of input data is done by processing all elements of the provided data, using them one by one as input for the input layer and performing one epoch. After each iteration, the weights are retained as the goal is to train on the entire set of input data.</p>
</div>
<div id="S3.SS2.SSS1.p4" class="ltx_para">
<p id="S3.SS2.SSS1.p4.1" class="ltx_p">For the sake of brevity, our description of an ANN does not consider common modifications such as setting a specific learning rate or using adaptive behavior based on previous results. We furthermore use a standard activation function, the <em id="S3.SS2.SSS1.p4.1.1" class="ltx_emph ltx_font_italic">sigmoid function</em>. Practitioners may use different activation functions or resort to various engineering techniques for improving the performance of ANNs as described, for instance, by Orr et al. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>. As a final note, we would like to highlight that ANNs can approximate any function <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>, <a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite>, which is commonly referred to as the universal approximation theorem. Consequently, ANNs are widely used in practice. The example described above, consisting of three layers, is a shallow ANN. Those are versatile, but they are not efficient for large and very complex problems. A particularly noteworthy early breakthrough of shallow ANNs was the successful classification of handwritten digits, which is used by postal services <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite>. More recent developments include deep neural networks, often referred to as deep learning. Those are ANNs with multiple hidden neuron layers, consisting of large numbers of neurons.</p>
</div>
</section>
<section id="S3.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.2.2 </span>Implementation.</h4>

<div id="S3.SS2.SSS2.p1" class="ltx_para">
<p id="S3.SS2.SSS2.p1.1" class="ltx_p">In the following, we cover some aspects of an exemplary implementation of a basic ANN in Erlang. We will again leave out some implementation details, and instead focus on the big picture.<span id="footnote2" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span>For illustrative purposes, we chose clear code over computationally more efficient code at some points. For instance, the function <span id="footnote2.1" class="ltx_text ltx_font_typewriter">forward</span> in Code Listing <a href="#LST3" title="Listing 3 ‣ 3.2.2 Implementation. ‣ 3.2 A Neural Network with Backpropagation in Erlang ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> constructs a temporary list, which could be avoided by computing the dot product with an accumulator. However, for benchmarking purposes we used more efficient code.</span></span></span> Code Listing <a href="#LST2" title="Listing 2 ‣ 3.2.2 Implementation. ‣ 3.2 A Neural Network with Backpropagation in Erlang ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> shows the function <span id="S3.SS2.SSS2.p1.1.1" class="ltx_text ltx_font_typewriter">ann</span>, which models an artificial neural network. The various helper functions it calls are shown in Code Listing <a href="#LST3" title="Listing 3 ‣ 3.2.2 Implementation. ‣ 3.2 A Neural Network with Backpropagation in Erlang ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>. The input of the function <span id="S3.SS2.SSS2.p1.1.2" class="ltx_text ltx_font_typewriter">ann</span> consists of the values of the input neurons <span id="S3.SS2.SSS2.p1.1.3" class="ltx_text ltx_font_typewriter">Input</span>, the weights of both layers <span id="S3.SS2.SSS2.p1.1.4" class="ltx_text ltx_font_typewriter">Weights</span>, and the target values of the output layer <span id="S3.SS2.SSS2.p1.1.5" class="ltx_text ltx_font_typewriter">Targets</span>.</p>
</div>
<figure id="S3.SS2.SSS2.fig1" class="ltx_figure">
<figure id="LST2" class="ltx_float ltx_lstlisting">
<div id="LST2.1" class="ltx_listing ltx_lst_language_Erlang ltx_lst_numbers_left ltx_lstlisting ltx_listing">
<div class="ltx_listing_data"><a href="data:text/plain;base64,YW5uKElucHV0LCBXZWlnaHRzLCBUYXJnZXRzKSAtPgogIHsgV19JbnB1dCwgV19IaWRkZW4gfSA9IFdlaWdodHMsCiAgJSBGb3J3YXJkIFBhc3M6CiAgSGlkZGVuX0luICA9IGZvcndhcmQoSW5wdXQsIFdfSW5wdXQsIFtdKSwKICBIaWRkZW5fT3V0ID0gWyBhY3RpdmF0aW9uX2Z1bihYKSB8fCBYIDwtIEhpZGRlbl9JbiBdLAogIE91dHB1dF9JbiAgPSBmb3J3YXJkKEhpZGRlbl9PdXQsIFdfSGlkZGVuLCBbXSksCiAgT3V0cHV0X091dCA9IFsgYWN0aXZhdGlvbl9mdW4oWCkgfHwgWCA8LSBPdXRwdXRfSW4gXSwKICAlIFRhcmdldCB2cy4gb3V0cHV0OgogIERlbHRhID0gbGlzdHM6emlwd2l0aChmdW4oWCwgWSkgLT4gWCAtIFkgZW5kLCBUYXJnZXRzLCBPdXRwdXRfT3V0KSwKICAlIFJldmVyc2UgcGFzczoKICBPdXRwdXRfRXJyb3JzID0gb3V0cHV0X2Vycm9yKE91dHB1dF9PdXQsIFRhcmdldHMpLAogICUgVXBkYXRlIHdlaWdodHMgZm9yIG91dHB1dCBsYXllcjoKICBXX0hpZGRlbl8gID0gYmFja3Byb3BhZ2F0ZShIaWRkZW5fT3V0LCBPdXRwdXRfRXJyb3JzLCBXX0hpZGRlbiwgIFtdKSwKICBIaWRkZW5fRXJyID0gZXJyb3JzX2hpZGRlbihIaWRkZW5fT3V0LCBPdXRwdXRfRXJyb3JzLCBXX0hpZGRlbl8sIFtdKSwKICBXX0lucHV0XyAgID0gYmFja3Byb3BhZ2F0ZShJbnB1dCwgSGlkZGVuX0VyciwgV19JbnB1dCwgW10pLAogIHsgT3V0cHV0X0Vycm9ycywgeyBJbnB1dCwgeyBXX0lucHV0XywgV19IaWRkZW5fIH0sIFRhcmdldHMgfSB9Lg==" download="">⬇</a></div>
<div id="lstnumberx20" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span><span id="lstnumberx20.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ann</span><span id="lstnumberx20.2" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx20.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Input</span><span id="lstnumberx20.4" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx20.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx20.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx20.7" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx20.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx20.9" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Targets</span><span id="lstnumberx20.10" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx20.11" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx20.12" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx21" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span><span id="lstnumberx21.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx21.2" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx21.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx21.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Input</span><span id="lstnumberx21.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx21.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx21.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Hidden</span><span id="lstnumberx21.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx21.9" class="ltx_text" style="font-size:70%;">}</span><span id="lstnumberx21.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx21.11" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx21.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx21.13" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx21.14" class="ltx_text" style="font-size:70%;">,</span>
</div>
<div id="lstnumberx22" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span><span id="lstnumberx22.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx22.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx22.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx22.2.1.1" class="ltx_text ltx_lst_space"> </span>Forward<span id="lstnumberx22.2.1.2" class="ltx_text ltx_lst_space"> </span>Pass:</span></span>
</div>
<div id="lstnumberx23" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span><span id="lstnumberx23.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx23.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hidden_In</span><span id="lstnumberx23.3" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx23.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx23.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx23.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">forward</span><span id="lstnumberx23.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx23.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Input</span><span id="lstnumberx23.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx23.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx23.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Input</span><span id="lstnumberx23.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx23.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx23.14" class="ltx_text" style="font-size:70%;">[]),</span>
</div>
<div id="lstnumberx24" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span><span id="lstnumberx24.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx24.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hidden_Out</span><span id="lstnumberx24.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx24.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx24.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx24.6" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx24.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx24.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">activation_fun</span><span id="lstnumberx24.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx24.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx24.11" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx24.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx24.13" class="ltx_text" style="font-size:70%;">||</span><span id="lstnumberx24.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx24.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx24.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx24.17" class="ltx_text" style="font-size:70%;">&lt;-</span><span id="lstnumberx24.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx24.19" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hidden_In</span><span id="lstnumberx24.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx24.21" class="ltx_text" style="font-size:70%;">],</span>
</div>
<div id="lstnumberx25" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span><span id="lstnumberx25.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx25.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_In</span><span id="lstnumberx25.3" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx25.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx25.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx25.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">forward</span><span id="lstnumberx25.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx25.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hidden_Out</span><span id="lstnumberx25.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx25.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx25.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Hidden</span><span id="lstnumberx25.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx25.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx25.14" class="ltx_text" style="font-size:70%;">[]),</span>
</div>
<div id="lstnumberx26" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span><span id="lstnumberx26.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx26.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Out</span><span id="lstnumberx26.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx26.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx26.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx26.6" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx26.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx26.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">activation_fun</span><span id="lstnumberx26.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx26.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx26.11" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx26.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx26.13" class="ltx_text" style="font-size:70%;">||</span><span id="lstnumberx26.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx26.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx26.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx26.17" class="ltx_text" style="font-size:70%;">&lt;-</span><span id="lstnumberx26.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx26.19" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_In</span><span id="lstnumberx26.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx26.21" class="ltx_text" style="font-size:70%;">],</span>
</div>
<div id="lstnumberx27" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span><span id="lstnumberx27.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx27.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx27.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx27.2.1.1" class="ltx_text ltx_lst_space"> </span>Target<span id="lstnumberx27.2.1.2" class="ltx_text ltx_lst_space"> </span>vs.<span id="lstnumberx27.2.1.3" class="ltx_text ltx_lst_space"> </span>output:</span></span>
</div>
<div id="lstnumberx28" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span><span id="lstnumberx28.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx28.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Delta</span><span id="lstnumberx28.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx28.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx28.7" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx28.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">zipwith</span><span id="lstnumberx28.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx28.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">fun</span><span id="lstnumberx28.11" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx28.12" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx28.13" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx28.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Y</span><span id="lstnumberx28.16" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx28.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.18" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx28.19" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.20" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx28.21" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.22" class="ltx_text" style="font-size:70%;">-</span><span id="lstnumberx28.23" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.24" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Y</span><span id="lstnumberx28.25" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.26" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">end</span><span id="lstnumberx28.27" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx28.28" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.29" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Targets</span><span id="lstnumberx28.30" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx28.31" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx28.32" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Out</span><span id="lstnumberx28.33" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx29" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span><span id="lstnumberx29.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx29.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx29.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx29.2.1.1" class="ltx_text ltx_lst_space"> </span>Reverse<span id="lstnumberx29.2.1.2" class="ltx_text ltx_lst_space"> </span>pass:</span></span>
</div>
<div id="lstnumberx30" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span><span id="lstnumberx30.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx30.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Errors</span><span id="lstnumberx30.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx30.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx30.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx30.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">output_error</span><span id="lstnumberx30.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx30.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Out</span><span id="lstnumberx30.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx30.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx30.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Targets</span><span id="lstnumberx30.12" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx31" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span><span id="lstnumberx31.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx31.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx31.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx31.2.1.1" class="ltx_text ltx_lst_space"> </span>Update<span id="lstnumberx31.2.1.2" class="ltx_text ltx_lst_space"> </span>weights<span id="lstnumberx31.2.1.3" class="ltx_text ltx_lst_space"> </span>for<span id="lstnumberx31.2.1.4" class="ltx_text ltx_lst_space"> </span>output<span id="lstnumberx31.2.1.5" class="ltx_text ltx_lst_space"> </span>layer:</span></span>
</div>
<div id="lstnumberx32" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span><span id="lstnumberx32.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx32.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Hidden_</span><span id="lstnumberx32.3" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx32.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx32.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx32.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">backpropagate</span><span id="lstnumberx32.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx32.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hidden_Out</span><span id="lstnumberx32.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx32.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx32.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Errors</span><span id="lstnumberx32.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx32.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx32.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Hidden</span><span id="lstnumberx32.15" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx32.16" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx32.17" class="ltx_text" style="font-size:70%;">[]),</span>
</div>
<div id="lstnumberx33" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span><span id="lstnumberx33.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx33.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hidden_Err</span><span id="lstnumberx33.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx33.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx33.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx33.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">errors_hidden</span><span id="lstnumberx33.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx33.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hidden_Out</span><span id="lstnumberx33.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx33.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx33.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Errors</span><span id="lstnumberx33.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx33.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx33.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Hidden_</span><span id="lstnumberx33.15" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx33.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx33.17" class="ltx_text" style="font-size:70%;">[]),</span>
</div>
<div id="lstnumberx34" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span><span id="lstnumberx34.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx34.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Input_</span><span id="lstnumberx34.3" class="ltx_text ltx_lst_space" style="font-size:70%;">   </span><span id="lstnumberx34.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx34.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx34.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">backpropagate</span><span id="lstnumberx34.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx34.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Input</span><span id="lstnumberx34.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx34.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx34.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hidden_Err</span><span id="lstnumberx34.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx34.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx34.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Input</span><span id="lstnumberx34.15" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx34.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx34.17" class="ltx_text" style="font-size:70%;">[]),</span>
</div>
<div id="lstnumberx35" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">16</span><span id="lstnumberx35.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx35.2" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx35.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Errors</span><span id="lstnumberx35.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx35.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.7" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx35.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.9" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Input</span><span id="lstnumberx35.10" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx35.11" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.12" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx35.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Input_</span><span id="lstnumberx35.15" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx35.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.17" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W_Hidden_</span><span id="lstnumberx35.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.19" class="ltx_text" style="font-size:70%;">},</span><span id="lstnumberx35.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.21" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Targets</span><span id="lstnumberx35.22" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.23" class="ltx_text" style="font-size:70%;">}</span><span id="lstnumberx35.24" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx35.25" class="ltx_text" style="font-size:70%;">}.</span>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float">Listing 2: </span>The core ANN function</figcaption>
</figure>
</figure>
<div id="S3.SS2.SSS2.p2" class="ltx_para">
<p id="S3.SS2.SSS2.p2.2" class="ltx_p">As described earlier, as a first step the ANN computes the input of the hidden layer. The output of the hidden layer is the result of mapping the activation function over the list <span id="S3.SS2.SSS2.p2.2.1" class="ltx_text ltx_font_typewriter">Hidden_In</span>; the corresponding values of the output layer are computed in the exact same way. The list <span id="S3.SS2.SSS2.p2.2.2" class="ltx_text ltx_font_typewriter">Delta</span> contains the differences between the target values and the actual values.<span id="footnote3" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span>Training normally ends after a given number of iterations or once a predefined error threshold has been met. The latter would make use of the computed error, based on the list <span id="footnote3.1" class="ltx_text ltx_font_typewriter">Delta</span>, but the corresponding code is omitted as it is not conceptually interesting.</span></span></span> The function <span id="S3.SS2.SSS2.p2.2.3" class="ltx_text ltx_font_typewriter">forward</span> computes the dot product of the input values and the weights of the outgoing edges. It is called twice by the function <span id="S3.SS2.SSS2.p2.2.4" class="ltx_text ltx_font_typewriter">ann</span> because there are two transitions between layers, first from the input layer to the hidden layer, and afterwards from the hidden layer to the output layer. Computing the dot product maps nicely to a functional programming style, as the required computation is the element-wise multiplication of two lists, followed by the summation of the results of that computation. The backpropagation pass starts with computing the output error, zipped with a <em id="S3.SS2.SSS2.p2.2.5" class="ltx_emph ltx_font_italic">squashing factor</em>. In our case, the activation function used for that purpose is a standard sigmoid function, the logistic function <math id="S3.SS2.SSS2.p2.1.m1.1" class="ltx_Math" alttext="f(x)=\frac{1}{1+e^{-x}}" display="inline"><semantics id="S3.SS2.SSS2.p2.1.m1.1a"><mrow id="S3.SS2.SSS2.p2.1.m1.1.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.cmml"><mrow id="S3.SS2.SSS2.p2.1.m1.1.2.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.2.cmml"><mi id="S3.SS2.SSS2.p2.1.m1.1.2.2.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.2.2.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.SS2.SSS2.p2.1.m1.1.2.2.1" xref="S3.SS2.SSS2.p2.1.m1.1.2.2.1.cmml">​</mo><mrow id="S3.SS2.SSS2.p2.1.m1.1.2.2.3.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.2.cmml"><mo stretchy="false" id="S3.SS2.SSS2.p2.1.m1.1.2.2.3.2.1" xref="S3.SS2.SSS2.p2.1.m1.1.2.2.cmml">(</mo><mi id="S3.SS2.SSS2.p2.1.m1.1.1" xref="S3.SS2.SSS2.p2.1.m1.1.1.cmml">x</mi><mo stretchy="false" id="S3.SS2.SSS2.p2.1.m1.1.2.2.3.2.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.2.cmml">)</mo></mrow></mrow><mo id="S3.SS2.SSS2.p2.1.m1.1.2.1" xref="S3.SS2.SSS2.p2.1.m1.1.2.1.cmml">=</mo><mfrac id="S3.SS2.SSS2.p2.1.m1.1.2.3" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.cmml"><mn id="S3.SS2.SSS2.p2.1.m1.1.2.3.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.2.cmml">1</mn><mrow id="S3.SS2.SSS2.p2.1.m1.1.2.3.3" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.cmml"><mn id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.2.cmml">1</mn><mo id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.1" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.1.cmml">+</mo><msup id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.cmml"><mi id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.2.cmml">e</mi><mrow id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3.cmml"><mo id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3a" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3.cmml">−</mo><mi id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3.2" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3.2.cmml">x</mi></mrow></msup></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.1.m1.1b"><apply id="S3.SS2.SSS2.p2.1.m1.1.2.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2"><eq id="S3.SS2.SSS2.p2.1.m1.1.2.1.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.1"></eq><apply id="S3.SS2.SSS2.p2.1.m1.1.2.2.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.2"><times id="S3.SS2.SSS2.p2.1.m1.1.2.2.1.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.2.1"></times><ci id="S3.SS2.SSS2.p2.1.m1.1.2.2.2.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.2.2">𝑓</ci><ci id="S3.SS2.SSS2.p2.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.1">𝑥</ci></apply><apply id="S3.SS2.SSS2.p2.1.m1.1.2.3.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3"><divide id="S3.SS2.SSS2.p2.1.m1.1.2.3.1.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3"></divide><cn type="integer" id="S3.SS2.SSS2.p2.1.m1.1.2.3.2.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.2">1</cn><apply id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3"><plus id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.1.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.1"></plus><cn type="integer" id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.2.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.2">1</cn><apply id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.1.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3">superscript</csymbol><ci id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.2.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.2">𝑒</ci><apply id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3"><minus id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3.1.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3"></minus><ci id="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3.2.cmml" xref="S3.SS2.SSS2.p2.1.m1.1.2.3.3.3.3.2">𝑥</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.1.m1.1c">f(x)=\frac{1}{1+e^{-x}}</annotation></semantics></math>. The derivative of the logistic function is <math id="S3.SS2.SSS2.p2.2.m2.4" class="ltx_Math" alttext="f^{\prime}(x)=f(x)(1-f(x))" display="inline"><semantics id="S3.SS2.SSS2.p2.2.m2.4a"><mrow id="S3.SS2.SSS2.p2.2.m2.4.4" xref="S3.SS2.SSS2.p2.2.m2.4.4.cmml"><mrow id="S3.SS2.SSS2.p2.2.m2.4.4.3" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.cmml"><msup id="S3.SS2.SSS2.p2.2.m2.4.4.3.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.2.cmml"><mi id="S3.SS2.SSS2.p2.2.m2.4.4.3.2.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.2.2.cmml">f</mi><mo id="S3.SS2.SSS2.p2.2.m2.4.4.3.2.3" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.2.3.cmml">′</mo></msup><mo lspace="0em" rspace="0em" id="S3.SS2.SSS2.p2.2.m2.4.4.3.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.1.cmml">​</mo><mrow id="S3.SS2.SSS2.p2.2.m2.4.4.3.3.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.cmml"><mo stretchy="false" id="S3.SS2.SSS2.p2.2.m2.4.4.3.3.2.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.cmml">(</mo><mi id="S3.SS2.SSS2.p2.2.m2.1.1" xref="S3.SS2.SSS2.p2.2.m2.1.1.cmml">x</mi><mo stretchy="false" id="S3.SS2.SSS2.p2.2.m2.4.4.3.3.2.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.cmml">)</mo></mrow></mrow><mo id="S3.SS2.SSS2.p2.2.m2.4.4.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.2.cmml">=</mo><mrow id="S3.SS2.SSS2.p2.2.m2.4.4.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.cmml"><mi id="S3.SS2.SSS2.p2.2.m2.4.4.1.3" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.3.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.SS2.SSS2.p2.2.m2.4.4.1.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.2.cmml">​</mo><mrow id="S3.SS2.SSS2.p2.2.m2.4.4.1.4.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.cmml"><mo stretchy="false" id="S3.SS2.SSS2.p2.2.m2.4.4.1.4.2.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.cmml">(</mo><mi id="S3.SS2.SSS2.p2.2.m2.2.2" xref="S3.SS2.SSS2.p2.2.m2.2.2.cmml">x</mi><mo stretchy="false" id="S3.SS2.SSS2.p2.2.m2.4.4.1.4.2.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="S3.SS2.SSS2.p2.2.m2.4.4.1.2a" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.2.cmml">​</mo><mrow id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.cmml"><mo stretchy="false" id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.cmml">(</mo><mrow id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.cmml"><mn id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.2.cmml">1</mn><mo id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.1.cmml">−</mo><mrow id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.cmml"><mi id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.2.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.1.cmml">​</mo><mrow id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.3.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.cmml"><mo stretchy="false" id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.3.2.1" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.cmml">(</mo><mi id="S3.SS2.SSS2.p2.2.m2.3.3" xref="S3.SS2.SSS2.p2.2.m2.3.3.cmml">x</mi><mo stretchy="false" id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.3.2.2" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.cmml">)</mo></mrow></mrow></mrow><mo stretchy="false" id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.3" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p2.2.m2.4b"><apply id="S3.SS2.SSS2.p2.2.m2.4.4.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4"><eq id="S3.SS2.SSS2.p2.2.m2.4.4.2.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.2"></eq><apply id="S3.SS2.SSS2.p2.2.m2.4.4.3.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.3"><times id="S3.SS2.SSS2.p2.2.m2.4.4.3.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.1"></times><apply id="S3.SS2.SSS2.p2.2.m2.4.4.3.2.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.2"><csymbol cd="ambiguous" id="S3.SS2.SSS2.p2.2.m2.4.4.3.2.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.2">superscript</csymbol><ci id="S3.SS2.SSS2.p2.2.m2.4.4.3.2.2.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.2.2">𝑓</ci><ci id="S3.SS2.SSS2.p2.2.m2.4.4.3.2.3.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.3.2.3">′</ci></apply><ci id="S3.SS2.SSS2.p2.2.m2.1.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.1.1">𝑥</ci></apply><apply id="S3.SS2.SSS2.p2.2.m2.4.4.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1"><times id="S3.SS2.SSS2.p2.2.m2.4.4.1.2.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.2"></times><ci id="S3.SS2.SSS2.p2.2.m2.4.4.1.3.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.3">𝑓</ci><ci id="S3.SS2.SSS2.p2.2.m2.2.2.cmml" xref="S3.SS2.SSS2.p2.2.m2.2.2">𝑥</ci><apply id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1"><minus id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.1"></minus><cn type="integer" id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.2.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.2">1</cn><apply id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3"><times id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.1.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.1"></times><ci id="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.2.cmml" xref="S3.SS2.SSS2.p2.2.m2.4.4.1.1.1.1.3.2">𝑓</ci><ci id="S3.SS2.SSS2.p2.2.m2.3.3.cmml" xref="S3.SS2.SSS2.p2.2.m2.3.3">𝑥</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS2.p2.2.m2.4c">f^{\prime}(x)=f(x)(1-f(x))</annotation></semantics></math>. This makes it possible to efficiently compute gradients as we can use the activations of the hidden layer for computing the total error in the output layer. Computationally, the operations involved, multiplication and subtraction, are less costly than re-evaluating the activation function, which is an exponential function.</p>
</div>
<figure id="S3.SS2.SSS2.fig2" class="ltx_figure">
<figure id="LST3" class="ltx_float ltx_lstlisting">
<div id="LST3.1" class="ltx_listing ltx_lst_language_Erlang ltx_lst_numbers_left ltx_lstlisting ltx_listing">
<div class="ltx_listing_data"><a href="data:text/plain;base64,Zm9yd2FyZChfICAgICwgW10gICAgICAsIEFjYykgLT4gbGlzdHM6cmV2ZXJzZShBY2MpOwpmb3J3YXJkKElucHV0LCBbVyB8IFdzXSwgQWNjKSAtPgogIFZhbCA9IGxpc3RzOnN1bShsaXN0czp6aXB3aXRoKGZ1bihYLCBZKSAtPiBYICogWSBlbmQsIElucHV0LCBXKSksCiAgZm9yd2FyZChJbnB1dCwgV3MsIFtWYWwgfCBBY2NdKS4KCm91dHB1dF9lcnJvcihWYWxzLCBUYXJnZXQpIC0+CiAgbGlzdHM6emlwd2l0aChmdW4oWCwgWSkgLT4gWCAqICgxLjAgLSBYKSAqIChYIC0gWSkgZW5kLCBWYWxzLCBUYXJnZXQpLgoKYmFja3Byb3BhZ2F0ZShfICwgW10gICAgLCBbXSAgICAgICwgQWNjKSAtPiBsaXN0czpyZXZlcnNlKEFjYyk7CmJhY2twcm9wYWdhdGUoSW4sIFtFfEVzXSwgW1dzfFdzc10sIEFjYykgLT4KICBBID0gbGlzdHM6emlwd2l0aChmdW4oVywgSSkgLT4gVyAtIChFICogSSkgZW5kLCBXcywgSW4pLAogIGJhY2twcm9wYWdhdGUoSW4sIEVzLCBXc3MsIFtBfEFjY10pLgoKZXJyb3JzX2hpZGRlbihbXSAgICAsIF8gICAgICAgICAsIF8gICAgICAsIEFjYykgLT4gbGlzdHM6cmV2ZXJzZShBY2MpOwplcnJvcnNfaGlkZGVuKFtIfEhzXSwgT3V0cHV0X0VyciwgV2VpZ2h0cywgQWNjKSAtPgogIE91dGdvaW5nID0gWyBoZChYKSB8fCBYIDwtIFdlaWdodHMgXSwKICAlIFJlbWFpbmluZyB3ZWlnaHRzIGZvciBuZXh0IGl0ZXJhdGlvbjoKICBSZXN0ID0gWyB0bChYKSB8fCBYIDwtIFdlaWdodHMgXSwKICAlIEVycm9yIG9mIGN1cnJlbnQgaGlkZGVuIGxheWVyIG5ldXJvbjoKICBUTVAgID0gbGlzdHM6emlwd2l0aChmdW4oWCwgRSkgLT4gRSAqIFggZW5kLCBPdXRnb2luZywgT3V0cHV0X0VyciksCiAgQSAgICA9IGxpc3RzOnN1bShUTVApICogSCAqICgxLjAgLSBIKSwKICBlcnJvcnNfaGlkZGVuKEhzLCBPdXRwdXRfRXJyLCBSZXN0LCBbQXxBY2NdKS4KCndyYXBfYW5uKFtdICAgICwgV2VpZ2h0cywgW10gICAgLCBFcnJvcnMpIC0+CiAge2xpc3RzOnJldmVyc2UoRXJyb3JzKSwgV2VpZ2h0c307CndyYXBfYW5uKFtJfElzXSwgV2VpZ2h0cywgW1R8VHNdLCBFcnJvcnMpIC0+CiAgeyBFcnJvciwgV2VpZ2h0c18gfSA9IGFubihJLCBXZWlnaHRzLCBUKSwKICB3cmFwX2FubihJcywgV2VpZ2h0c18sIFRzLCBbRXJyb3IgfCBFcnJvcnNdKS4=" download="">⬇</a></div>
<div id="lstnumberx36" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span><span id="lstnumberx36.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">forward</span><span id="lstnumberx36.2" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx36.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">_</span><span id="lstnumberx36.4" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx36.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx36.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx36.7" class="ltx_text" style="font-size:70%;">[]</span><span id="lstnumberx36.8" class="ltx_text ltx_lst_space" style="font-size:70%;">      </span><span id="lstnumberx36.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx36.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx36.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx36.12" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx36.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx36.14" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx36.15" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx36.16" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx36.17" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx36.18" class="ltx_text ltx_lst_identifier" style="font-size:70%;">reverse</span><span id="lstnumberx36.19" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx36.20" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx36.21" class="ltx_text" style="font-size:70%;">);</span>
</div>
<div id="lstnumberx37" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span><span id="lstnumberx37.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">forward</span><span id="lstnumberx37.2" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx37.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Input</span><span id="lstnumberx37.4" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx37.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx37.6" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx37.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W</span><span id="lstnumberx37.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx37.9" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx37.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx37.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Ws</span><span id="lstnumberx37.12" class="ltx_text" style="font-size:70%;">],</span><span id="lstnumberx37.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx37.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx37.15" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx37.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx37.17" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx38" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span><span id="lstnumberx38.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx38.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Val</span><span id="lstnumberx38.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx38.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx38.7" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx38.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">sum</span><span id="lstnumberx38.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx38.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx38.11" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx38.12" class="ltx_text ltx_lst_identifier" style="font-size:70%;">zipwith</span><span id="lstnumberx38.13" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx38.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">fun</span><span id="lstnumberx38.15" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx38.16" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx38.17" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx38.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.19" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Y</span><span id="lstnumberx38.20" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx38.21" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.22" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx38.23" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.24" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx38.25" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.26" class="ltx_text" style="font-size:70%;">*</span><span id="lstnumberx38.27" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.28" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Y</span><span id="lstnumberx38.29" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.30" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">end</span><span id="lstnumberx38.31" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx38.32" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.33" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Input</span><span id="lstnumberx38.34" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx38.35" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx38.36" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W</span><span id="lstnumberx38.37" class="ltx_text" style="font-size:70%;">)),</span>
</div>
<div id="lstnumberx39" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span><span id="lstnumberx39.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx39.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">forward</span><span id="lstnumberx39.3" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx39.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Input</span><span id="lstnumberx39.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx39.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx39.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Ws</span><span id="lstnumberx39.8" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx39.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx39.10" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx39.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Val</span><span id="lstnumberx39.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx39.13" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx39.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx39.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx39.16" class="ltx_text" style="font-size:70%;">]).</span>
</div>
<div id="lstnumberx40" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span>
</div>
<div id="lstnumberx41" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span><span id="lstnumberx41.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">output_error</span><span id="lstnumberx41.2" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx41.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Vals</span><span id="lstnumberx41.4" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx41.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx41.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Target</span><span id="lstnumberx41.7" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx41.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx41.9" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx42" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span><span id="lstnumberx42.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx42.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx42.3" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx42.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">zipwith</span><span id="lstnumberx42.5" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx42.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">fun</span><span id="lstnumberx42.7" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx42.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx42.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx42.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Y</span><span id="lstnumberx42.12" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx42.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.14" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx42.15" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.16" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx42.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.18" class="ltx_text" style="font-size:70%;">*</span><span id="lstnumberx42.19" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.20" class="ltx_text" style="font-size:70%;">(1.0</span><span id="lstnumberx42.21" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.22" class="ltx_text" style="font-size:70%;">-</span><span id="lstnumberx42.23" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.24" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx42.25" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx42.26" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.27" class="ltx_text" style="font-size:70%;">*</span><span id="lstnumberx42.28" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.29" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx42.30" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx42.31" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.32" class="ltx_text" style="font-size:70%;">-</span><span id="lstnumberx42.33" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.34" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Y</span><span id="lstnumberx42.35" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx42.36" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.37" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">end</span><span id="lstnumberx42.38" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx42.39" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.40" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Vals</span><span id="lstnumberx42.41" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx42.42" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx42.43" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Target</span><span id="lstnumberx42.44" class="ltx_text" style="font-size:70%;">).</span>
</div>
<div id="lstnumberx43" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span>
</div>
<div id="lstnumberx44" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span><span id="lstnumberx44.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">backpropagate</span><span id="lstnumberx44.2" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx44.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">_</span><span id="lstnumberx44.4" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx44.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx44.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx44.7" class="ltx_text" style="font-size:70%;">[]</span><span id="lstnumberx44.8" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx44.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx44.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx44.11" class="ltx_text" style="font-size:70%;">[]</span><span id="lstnumberx44.12" class="ltx_text ltx_lst_space" style="font-size:70%;">      </span><span id="lstnumberx44.13" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx44.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx44.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx44.16" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx44.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx44.18" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx44.19" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx44.20" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx44.21" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx44.22" class="ltx_text ltx_lst_identifier" style="font-size:70%;">reverse</span><span id="lstnumberx44.23" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx44.24" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx44.25" class="ltx_text" style="font-size:70%;">);</span>
</div>
<div id="lstnumberx45" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span><span id="lstnumberx45.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">backpropagate</span><span id="lstnumberx45.2" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx45.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">In</span><span id="lstnumberx45.4" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx45.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx45.6" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx45.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">E</span><span id="lstnumberx45.8" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx45.9" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Es</span><span id="lstnumberx45.10" class="ltx_text" style="font-size:70%;">],</span><span id="lstnumberx45.11" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx45.12" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx45.13" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Ws</span><span id="lstnumberx45.14" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx45.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Wss</span><span id="lstnumberx45.16" class="ltx_text" style="font-size:70%;">],</span><span id="lstnumberx45.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx45.18" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx45.19" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx45.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx45.21" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx46" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span><span id="lstnumberx46.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx46.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">A</span><span id="lstnumberx46.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx46.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx46.7" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx46.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">zipwith</span><span id="lstnumberx46.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx46.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">fun</span><span id="lstnumberx46.11" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx46.12" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W</span><span id="lstnumberx46.13" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx46.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">I</span><span id="lstnumberx46.16" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx46.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.18" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx46.19" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.20" class="ltx_text ltx_lst_identifier" style="font-size:70%;">W</span><span id="lstnumberx46.21" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.22" class="ltx_text" style="font-size:70%;">-</span><span id="lstnumberx46.23" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.24" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx46.25" class="ltx_text ltx_lst_identifier" style="font-size:70%;">E</span><span id="lstnumberx46.26" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.27" class="ltx_text" style="font-size:70%;">*</span><span id="lstnumberx46.28" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.29" class="ltx_text ltx_lst_identifier" style="font-size:70%;">I</span><span id="lstnumberx46.30" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx46.31" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.32" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">end</span><span id="lstnumberx46.33" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx46.34" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.35" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Ws</span><span id="lstnumberx46.36" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx46.37" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx46.38" class="ltx_text ltx_lst_identifier" style="font-size:70%;">In</span><span id="lstnumberx46.39" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx47" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span><span id="lstnumberx47.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx47.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">backpropagate</span><span id="lstnumberx47.3" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx47.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">In</span><span id="lstnumberx47.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx47.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx47.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Es</span><span id="lstnumberx47.8" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx47.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx47.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Wss</span><span id="lstnumberx47.11" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx47.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx47.13" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx47.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">A</span><span id="lstnumberx47.15" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx47.16" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx47.17" class="ltx_text" style="font-size:70%;">]).</span>
</div>
<div id="lstnumberx48" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span>
</div>
<div id="lstnumberx49" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span><span id="lstnumberx49.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">errors_hidden</span><span id="lstnumberx49.2" class="ltx_text" style="font-size:70%;">([]</span><span id="lstnumberx49.3" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx49.4" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx49.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx49.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">_</span><span id="lstnumberx49.7" class="ltx_text ltx_lst_space" style="font-size:70%;">         </span><span id="lstnumberx49.8" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx49.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx49.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">_</span><span id="lstnumberx49.11" class="ltx_text ltx_lst_space" style="font-size:70%;">      </span><span id="lstnumberx49.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx49.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx49.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx49.15" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx49.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx49.17" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx49.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx49.19" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx49.20" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx49.21" class="ltx_text ltx_lst_identifier" style="font-size:70%;">reverse</span><span id="lstnumberx49.22" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx49.23" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx49.24" class="ltx_text" style="font-size:70%;">);</span>
</div>
<div id="lstnumberx50" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span><span id="lstnumberx50.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">errors_hidden</span><span id="lstnumberx50.2" class="ltx_text" style="font-size:70%;">([</span><span id="lstnumberx50.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">H</span><span id="lstnumberx50.4" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx50.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hs</span><span id="lstnumberx50.6" class="ltx_text" style="font-size:70%;">],</span><span id="lstnumberx50.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx50.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Err</span><span id="lstnumberx50.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx50.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx50.11" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx50.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx50.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx50.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx50.15" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx50.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx50.17" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx51" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">16</span><span id="lstnumberx51.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx51.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Outgoing</span><span id="lstnumberx51.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx51.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx51.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx51.6" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx51.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx51.8" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">hd</span><span id="lstnumberx51.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx51.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx51.11" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx51.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx51.13" class="ltx_text" style="font-size:70%;">||</span><span id="lstnumberx51.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx51.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx51.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx51.17" class="ltx_text" style="font-size:70%;">&lt;-</span><span id="lstnumberx51.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx51.19" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx51.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx51.21" class="ltx_text" style="font-size:70%;">],</span>
</div>
<div id="lstnumberx52" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">17</span><span id="lstnumberx52.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx52.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx52.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx52.2.1.1" class="ltx_text ltx_lst_space"> </span>Remaining<span id="lstnumberx52.2.1.2" class="ltx_text ltx_lst_space"> </span>weights<span id="lstnumberx52.2.1.3" class="ltx_text ltx_lst_space"> </span>for<span id="lstnumberx52.2.1.4" class="ltx_text ltx_lst_space"> </span>next<span id="lstnumberx52.2.1.5" class="ltx_text ltx_lst_space"> </span>iteration:</span></span>
</div>
<div id="lstnumberx53" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">18</span><span id="lstnumberx53.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx53.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Rest</span><span id="lstnumberx53.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx53.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx53.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx53.6" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx53.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx53.8" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">tl</span><span id="lstnumberx53.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx53.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx53.11" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx53.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx53.13" class="ltx_text" style="font-size:70%;">||</span><span id="lstnumberx53.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx53.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx53.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx53.17" class="ltx_text" style="font-size:70%;">&lt;-</span><span id="lstnumberx53.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx53.19" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx53.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx53.21" class="ltx_text" style="font-size:70%;">],</span>
</div>
<div id="lstnumberx54" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">19</span><span id="lstnumberx54.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx54.2" class="ltx_text ltx_lst_comment" style="font-size:70%;"><span id="lstnumberx54.2.1" class="ltx_text" style="color:#009900;">%<span id="lstnumberx54.2.1.1" class="ltx_text ltx_lst_space"> </span>Error<span id="lstnumberx54.2.1.2" class="ltx_text ltx_lst_space"> </span>of<span id="lstnumberx54.2.1.3" class="ltx_text ltx_lst_space"> </span>current<span id="lstnumberx54.2.1.4" class="ltx_text ltx_lst_space"> </span>hidden<span id="lstnumberx54.2.1.5" class="ltx_text ltx_lst_space"> </span>layer<span id="lstnumberx54.2.1.6" class="ltx_text ltx_lst_space"> </span>neuron:</span></span>
</div>
<div id="lstnumberx55" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">20</span><span id="lstnumberx55.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx55.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">TMP</span><span id="lstnumberx55.3" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx55.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx55.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx55.7" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx55.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">zipwith</span><span id="lstnumberx55.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx55.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">fun</span><span id="lstnumberx55.11" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx55.12" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx55.13" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx55.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">E</span><span id="lstnumberx55.16" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx55.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.18" class="ltx_text" style="font-size:70%;">-&gt;</span><span id="lstnumberx55.19" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.20" class="ltx_text ltx_lst_identifier" style="font-size:70%;">E</span><span id="lstnumberx55.21" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.22" class="ltx_text" style="font-size:70%;">*</span><span id="lstnumberx55.23" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.24" class="ltx_text ltx_lst_identifier" style="font-size:70%;">X</span><span id="lstnumberx55.25" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.26" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">end</span><span id="lstnumberx55.27" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx55.28" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.29" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Outgoing</span><span id="lstnumberx55.30" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx55.31" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx55.32" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Err</span><span id="lstnumberx55.33" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx56" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">21</span><span id="lstnumberx56.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx56.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">A</span><span id="lstnumberx56.3" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx56.4" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx56.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx56.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx56.7" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx56.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">sum</span><span id="lstnumberx56.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx56.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">TMP</span><span id="lstnumberx56.11" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx56.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx56.13" class="ltx_text" style="font-size:70%;">*</span><span id="lstnumberx56.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx56.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">H</span><span id="lstnumberx56.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx56.17" class="ltx_text" style="font-size:70%;">*</span><span id="lstnumberx56.18" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx56.19" class="ltx_text" style="font-size:70%;">(1.0</span><span id="lstnumberx56.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx56.21" class="ltx_text" style="font-size:70%;">-</span><span id="lstnumberx56.22" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx56.23" class="ltx_text ltx_lst_identifier" style="font-size:70%;">H</span><span id="lstnumberx56.24" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx57" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">22</span><span id="lstnumberx57.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx57.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">errors_hidden</span><span id="lstnumberx57.3" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx57.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Hs</span><span id="lstnumberx57.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx57.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx57.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Output_Err</span><span id="lstnumberx57.8" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx57.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx57.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Rest</span><span id="lstnumberx57.11" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx57.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx57.13" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx57.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">A</span><span id="lstnumberx57.15" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx57.16" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Acc</span><span id="lstnumberx57.17" class="ltx_text" style="font-size:70%;">]).</span>
</div>
<div id="lstnumberx58" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">23</span>
</div>
<div id="lstnumberx59" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">24</span><span id="lstnumberx59.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">wrap_ann</span><span id="lstnumberx59.2" class="ltx_text" style="font-size:70%;">([]</span><span id="lstnumberx59.3" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx59.4" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx59.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx59.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx59.7" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx59.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx59.9" class="ltx_text" style="font-size:70%;">[]</span><span id="lstnumberx59.10" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx59.11" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx59.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx59.13" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Errors</span><span id="lstnumberx59.14" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx59.15" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx59.16" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx60" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">25</span><span id="lstnumberx60.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx60.2" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx60.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">lists</span><span id="lstnumberx60.4" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx60.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">reverse</span><span id="lstnumberx60.6" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx60.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Errors</span><span id="lstnumberx60.8" class="ltx_text" style="font-size:70%;">),</span><span id="lstnumberx60.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx60.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx60.11" class="ltx_text" style="font-size:70%;">};</span>
</div>
<div id="lstnumberx61" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">26</span><span id="lstnumberx61.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">wrap_ann</span><span id="lstnumberx61.2" class="ltx_text" style="font-size:70%;">([</span><span id="lstnumberx61.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">I</span><span id="lstnumberx61.4" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx61.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Is</span><span id="lstnumberx61.6" class="ltx_text" style="font-size:70%;">],</span><span id="lstnumberx61.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx61.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx61.9" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx61.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx61.11" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx61.12" class="ltx_text ltx_lst_identifier" style="font-size:70%;">T</span><span id="lstnumberx61.13" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx61.14" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Ts</span><span id="lstnumberx61.15" class="ltx_text" style="font-size:70%;">],</span><span id="lstnumberx61.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx61.17" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Errors</span><span id="lstnumberx61.18" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx61.19" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx61.20" class="ltx_text" style="font-size:70%;">-&gt;</span>
</div>
<div id="lstnumberx62" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">27</span><span id="lstnumberx62.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx62.2" class="ltx_text" style="font-size:70%;">{</span><span id="lstnumberx62.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx62.4" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">Error</span><span id="lstnumberx62.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx62.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx62.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights_</span><span id="lstnumberx62.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx62.9" class="ltx_text" style="font-size:70%;">}</span><span id="lstnumberx62.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx62.11" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx62.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx62.13" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ann</span><span id="lstnumberx62.14" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx62.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">I</span><span id="lstnumberx62.16" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx62.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx62.18" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights</span><span id="lstnumberx62.19" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx62.20" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx62.21" class="ltx_text ltx_lst_identifier" style="font-size:70%;">T</span><span id="lstnumberx62.22" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx63" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">28</span><span id="lstnumberx63.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx63.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">wrap_ann</span><span id="lstnumberx63.3" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx63.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Is</span><span id="lstnumberx63.5" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx63.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx63.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Weights_</span><span id="lstnumberx63.8" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx63.9" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx63.10" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Ts</span><span id="lstnumberx63.11" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx63.12" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx63.13" class="ltx_text" style="font-size:70%;">[</span><span id="lstnumberx63.14" class="ltx_text ltx_lst_keyword" style="font-size:70%;color:#FF00FF;">Error</span><span id="lstnumberx63.15" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx63.16" class="ltx_text" style="font-size:70%;">|</span><span id="lstnumberx63.17" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx63.18" class="ltx_text ltx_lst_identifier" style="font-size:70%;">Errors</span><span id="lstnumberx63.19" class="ltx_text" style="font-size:70%;">]).</span>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float">Listing 3: </span>ANN helper functions</figcaption>
</figure>
</figure>
<div id="S3.SS2.SSS2.p3" class="ltx_para">
<p id="S3.SS2.SSS2.p3.1" class="ltx_p">The function <span id="S3.SS2.SSS2.p3.1.1" class="ltx_text ltx_font_typewriter">backpropagate</span> performs backpropagation, which computes the adjusted weights of the edges connecting the output layer to the hidden layer, and the adjusted weights of the edges connecting the hidden layer to the input layer. The new weights are computed by adding the product of the error and the input to each weight. The computation of the errors of the hidden layer is slightly trickier, due to using the list data structure. The weights assigned to the edges connecting the hidden layer with the output layer are specified as a list of lists in which each list contains the incoming weights of one of the output neurons. In the backpropagation pass, however, we need to traverse the ANN the opposite way, so the edges connecting the hidden layer to the output layer need a representation that considers all edges that point from the output layer to each node in the hidden layer. This is achieved by recursively taking the heads of the list of lists of the weights before performing the error calculation. Lastly, performing training on the entire input, so-called batch training, can be elegantly expressed in a functional style, shown by the function <span id="S3.SS2.SSS2.p3.1.2" class="ltx_text ltx_font_typewriter">wrap_ann</span>. Its arguments are, in order, the list of inputs that constitute the training set, the weights, the target values associated with the input data, and an accumulator <span id="S3.SS2.SSS2.p3.1.3" class="ltx_text ltx_font_typewriter">Errors</span> that collects the output error for each element of the input set. The weights are continually updated so that every invocation of the function <span id="S3.SS2.SSS2.p3.1.4" class="ltx_text ltx_font_typewriter">ann</span> uses the weights of the preceding invocation.</p>
</div>
</section>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>The Combined Framework</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.1" class="ltx_p">The parts introduced earlier can be combined to build a distributed system for Federated Learning. It boils down to using the skeleton introduced in Section <a href="#S3.SS1" title="3.1 The Skeleton of the Framework ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.1</span></a> and adding code for an artificial network to the client process, similar to what we have shown in Section <a href="#S3.SS2" title="3.2 A Neural Network with Backpropagation in Erlang ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>, as well as further program logic. What has not been covered is, for instance, code for input/output handling. Our assumption is that each client process operates on data that is only locally available. The client process needs to be adjusted correspondingly, so that the available data is processed for batch-training with the ANN. Likewise, the server process needs to process the incoming models from the clients to update the centrally maintained global model, for instance via averaging.</p>
</div>
<div id="S3.SS3.p2" class="ltx_para">
<p id="S3.SS3.p2.1" class="ltx_p">While the description of our implementation is exclusively in Erlang, an alternative approach consists of a C implementation of the ANN. From a user perspective, there is no difference with regards to the output. Of course, internally the client trains an ANN in C instead of Erlang. However, in order to fairly compare how well an implementation solely in Erlang compares against one in which the computationally heavy lifting is performed by C, it is necessary to take the respective idiosyncrasies of two common approaches to interoperability with C into account. The older and more established way of calling C from Erlang is via so-called Natively Implemented Functions (NIFs), which are an improvement over using ports to communicate with C. A more recent addition to Erlang are C nodes, which have the advantage that they can be interfaced with the same way as regular Erlang nodes. Overall, for the purposes of simulating the framework, concurrent execution is adequate. However, distributed execution, in which messages are sent back and forth between nodes, more closely relates to real-world use cases (cf. Section <a href="#S2.SS3" title="2.3 Motivating Use Case ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.3</span></a>).</p>
</div>
</section>
<section id="S3.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Evaluation</h3>

<section id="S3.SS4.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.1 </span>Setup.</h4>

<div id="S3.SS4.SSS1.p1" class="ltx_para">
<p id="S3.SS4.SSS1.p1.1" class="ltx_p">We created four versions of our combined Federated Learning framework: (1) a concurrent implementation, fully in Erlang, as well as (2) one in which the clients are implemented in C as NIFs. Furthermore, we implemented (3) a distributed version fully in Erlang as well as (4) a variant of it in which the clients are C nodes. By default, all Erlang nodes in a distributed system are fully connected. As this is neither practical nor desirable for our use case, this behavior was disabled with the flag <span id="S3.SS4.SSS1.p1.1.1" class="ltx_text ltx_font_typewriter">-hidden</span>. Erlang source code has also been compiled to native code, which has been made possible due to the HiPE project <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>, <a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite>.</p>
</div>
<div id="S3.SS4.SSS1.p2" class="ltx_para">
<p id="S3.SS4.SSS1.p2.3" class="ltx_p">The motivation behind benchmarking a distributed system, as opposed to the simpler case of a concurrent system, is that this mirrors the real-world scenario of performing distributed data analytics tasks on a network with many edge devices and a central server. On the other hand, a concurrent system is more straightforward to design and execute. In both the distributed and the concurrent use case, we did not create our own implementation of a neural network in C. Instead, we chose Nissen’s widely used Fast Artificial Neural Network (FANN) library <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite> with the option <span id="S3.SS4.SSS1.p2.3.1" class="ltx_text ltx_font_typewriter">FANN_TRAIN_BATCH</span>, which uses gradient descent with backpropagation. This corresponds to our Erlang code. Our ANN implementation in Erlang mirrors the chosen architecture of the ANN in FANN, i.e. there are two input nodes, three hidden nodes, and two output nodes. Furthermore, there is one bias node each, connecting to the hidden and the output layer, respectively. Error computation is done via computing the mean squared error (MSE) in both implementations. The Erlang code does not use a learning rate <math id="S3.SS4.SSS1.p2.1.m1.1" class="ltx_Math" alttext="\eta" display="inline"><semantics id="S3.SS4.SSS1.p2.1.m1.1a"><mi id="S3.SS4.SSS1.p2.1.m1.1.1" xref="S3.SS4.SSS1.p2.1.m1.1.1.cmml">η</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.1.m1.1b"><ci id="S3.SS4.SSS1.p2.1.m1.1.1.cmml" xref="S3.SS4.SSS1.p2.1.m1.1.1">𝜂</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.1.m1.1c">\eta</annotation></semantics></math>, which implies that <math id="S3.SS4.SSS1.p2.2.m2.1" class="ltx_Math" alttext="\eta=1" display="inline"><semantics id="S3.SS4.SSS1.p2.2.m2.1a"><mrow id="S3.SS4.SSS1.p2.2.m2.1.1" xref="S3.SS4.SSS1.p2.2.m2.1.1.cmml"><mi id="S3.SS4.SSS1.p2.2.m2.1.1.2" xref="S3.SS4.SSS1.p2.2.m2.1.1.2.cmml">η</mi><mo id="S3.SS4.SSS1.p2.2.m2.1.1.1" xref="S3.SS4.SSS1.p2.2.m2.1.1.1.cmml">=</mo><mn id="S3.SS4.SSS1.p2.2.m2.1.1.3" xref="S3.SS4.SSS1.p2.2.m2.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.2.m2.1b"><apply id="S3.SS4.SSS1.p2.2.m2.1.1.cmml" xref="S3.SS4.SSS1.p2.2.m2.1.1"><eq id="S3.SS4.SSS1.p2.2.m2.1.1.1.cmml" xref="S3.SS4.SSS1.p2.2.m2.1.1.1"></eq><ci id="S3.SS4.SSS1.p2.2.m2.1.1.2.cmml" xref="S3.SS4.SSS1.p2.2.m2.1.1.2">𝜂</ci><cn type="integer" id="S3.SS4.SSS1.p2.2.m2.1.1.3.cmml" xref="S3.SS4.SSS1.p2.2.m2.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.2.m2.1c">\eta=1</annotation></semantics></math>. In FANN, <math id="S3.SS4.SSS1.p2.3.m3.1" class="ltx_Math" alttext="\eta" display="inline"><semantics id="S3.SS4.SSS1.p2.3.m3.1a"><mi id="S3.SS4.SSS1.p2.3.m3.1.1" xref="S3.SS4.SSS1.p2.3.m3.1.1.cmml">η</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS1.p2.3.m3.1b"><ci id="S3.SS4.SSS1.p2.3.m3.1.1.cmml" xref="S3.SS4.SSS1.p2.3.m3.1.1">𝜂</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS1.p2.3.m3.1c">\eta</annotation></semantics></math> was explicitly set to 1 in order to override the default value of 0.7. Both implementations use the sigmoid activation function (cf. Section <a href="#S3.SS2" title="3.2 A Neural Network with Backpropagation in Erlang ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>). The corresponding setting in FANN is <span id="S3.SS4.SSS1.p2.3.2" class="ltx_text ltx_font_typewriter">FANN_SIGMOID</span>.</p>
</div>
</section>
<section id="S3.SS4.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.2 </span>Hardware and Software.</h4>

<div id="S3.SS4.SSS2.p1" class="ltx_para">
<p id="S3.SS4.SSS2.p1.1" class="ltx_p">We used a PC with an Intel Core i7-7700K CPU clocked at 4.2 GHz. This is a quad-core CPU that supports hyper-threading with 8 threads. Our code was executed in Ubuntu Linux 16.04 LTS on a VirtualBox 5.1.22 virtual machine hosted by Windows 10 Pro (build 1703). The total amount of RAM available on the host machine was 32 GB, of which 12 GB were dedicated to VirtualBox. We used Erlang/OTP 20.2.2 and, for C, GCC 5.4.0.</p>
</div>
</section>
<section id="S3.SS4.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.3 </span>Experiment.</h4>

<div id="S3.SS4.SSS3.p1" class="ltx_para">
<p id="S3.SS4.SSS3.p1.3" class="ltx_p">For benchmarking novel machine learning methods, standard data sets are often used. These include the Iris data set <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>, which contains observational data of the petal length of various iris species. A more ambitious data set is the MNIST handwritten digits database <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite>. However, our goal was to directly compare the performance of two pairs of systems, so it seemed more appropriate to generate an artificial data set. Our data set is based on the mathematical function <math id="S3.SS4.SSS3.p1.1.m1.4" class="ltx_Math" alttext="f(x,y)=(\sqrt{xy},\sqrt[4]{xy})" display="inline"><semantics id="S3.SS4.SSS3.p1.1.m1.4a"><mrow id="S3.SS4.SSS3.p1.1.m1.4.5" xref="S3.SS4.SSS3.p1.1.m1.4.5.cmml"><mrow id="S3.SS4.SSS3.p1.1.m1.4.5.2" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.cmml"><mi id="S3.SS4.SSS3.p1.1.m1.4.5.2.2" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.2.cmml">f</mi><mo lspace="0em" rspace="0em" id="S3.SS4.SSS3.p1.1.m1.4.5.2.1" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.1.cmml">​</mo><mrow id="S3.SS4.SSS3.p1.1.m1.4.5.2.3.2" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.3.1.cmml"><mo stretchy="false" id="S3.SS4.SSS3.p1.1.m1.4.5.2.3.2.1" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.3.1.cmml">(</mo><mi id="S3.SS4.SSS3.p1.1.m1.1.1" xref="S3.SS4.SSS3.p1.1.m1.1.1.cmml">x</mi><mo id="S3.SS4.SSS3.p1.1.m1.4.5.2.3.2.2" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.3.1.cmml">,</mo><mi id="S3.SS4.SSS3.p1.1.m1.2.2" xref="S3.SS4.SSS3.p1.1.m1.2.2.cmml">y</mi><mo stretchy="false" id="S3.SS4.SSS3.p1.1.m1.4.5.2.3.2.3" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.3.1.cmml">)</mo></mrow></mrow><mo id="S3.SS4.SSS3.p1.1.m1.4.5.1" xref="S3.SS4.SSS3.p1.1.m1.4.5.1.cmml">=</mo><mrow id="S3.SS4.SSS3.p1.1.m1.4.5.3.2" xref="S3.SS4.SSS3.p1.1.m1.4.5.3.1.cmml"><mo stretchy="false" id="S3.SS4.SSS3.p1.1.m1.4.5.3.2.1" xref="S3.SS4.SSS3.p1.1.m1.4.5.3.1.cmml">(</mo><msqrt id="S3.SS4.SSS3.p1.1.m1.3.3" xref="S3.SS4.SSS3.p1.1.m1.3.3.cmml"><mrow id="S3.SS4.SSS3.p1.1.m1.3.3.2" xref="S3.SS4.SSS3.p1.1.m1.3.3.2.cmml"><mi id="S3.SS4.SSS3.p1.1.m1.3.3.2.2" xref="S3.SS4.SSS3.p1.1.m1.3.3.2.2.cmml">x</mi><mo lspace="0em" rspace="0em" id="S3.SS4.SSS3.p1.1.m1.3.3.2.1" xref="S3.SS4.SSS3.p1.1.m1.3.3.2.1.cmml">​</mo><mi id="S3.SS4.SSS3.p1.1.m1.3.3.2.3" xref="S3.SS4.SSS3.p1.1.m1.3.3.2.3.cmml">y</mi></mrow></msqrt><mo id="S3.SS4.SSS3.p1.1.m1.4.5.3.2.2" xref="S3.SS4.SSS3.p1.1.m1.4.5.3.1.cmml">,</mo><mroot id="S3.SS4.SSS3.p1.1.m1.4.4" xref="S3.SS4.SSS3.p1.1.m1.4.4.cmml"><mrow id="S3.SS4.SSS3.p1.1.m1.4.4.3" xref="S3.SS4.SSS3.p1.1.m1.4.4.3.cmml"><mi id="S3.SS4.SSS3.p1.1.m1.4.4.3.2" xref="S3.SS4.SSS3.p1.1.m1.4.4.3.2.cmml">x</mi><mo lspace="0em" rspace="0em" id="S3.SS4.SSS3.p1.1.m1.4.4.3.1" xref="S3.SS4.SSS3.p1.1.m1.4.4.3.1.cmml">​</mo><mi id="S3.SS4.SSS3.p1.1.m1.4.4.3.3" xref="S3.SS4.SSS3.p1.1.m1.4.4.3.3.cmml">y</mi></mrow><mn id="S3.SS4.SSS3.p1.1.m1.4.4.2" xref="S3.SS4.SSS3.p1.1.m1.4.4.2.cmml">4</mn></mroot><mo stretchy="false" id="S3.SS4.SSS3.p1.1.m1.4.5.3.2.3" xref="S3.SS4.SSS3.p1.1.m1.4.5.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p1.1.m1.4b"><apply id="S3.SS4.SSS3.p1.1.m1.4.5.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.5"><eq id="S3.SS4.SSS3.p1.1.m1.4.5.1.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.5.1"></eq><apply id="S3.SS4.SSS3.p1.1.m1.4.5.2.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.5.2"><times id="S3.SS4.SSS3.p1.1.m1.4.5.2.1.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.1"></times><ci id="S3.SS4.SSS3.p1.1.m1.4.5.2.2.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.2">𝑓</ci><interval closure="open" id="S3.SS4.SSS3.p1.1.m1.4.5.2.3.1.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.5.2.3.2"><ci id="S3.SS4.SSS3.p1.1.m1.1.1.cmml" xref="S3.SS4.SSS3.p1.1.m1.1.1">𝑥</ci><ci id="S3.SS4.SSS3.p1.1.m1.2.2.cmml" xref="S3.SS4.SSS3.p1.1.m1.2.2">𝑦</ci></interval></apply><interval closure="open" id="S3.SS4.SSS3.p1.1.m1.4.5.3.1.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.5.3.2"><apply id="S3.SS4.SSS3.p1.1.m1.3.3.cmml" xref="S3.SS4.SSS3.p1.1.m1.3.3"><root id="S3.SS4.SSS3.p1.1.m1.3.3a.cmml" xref="S3.SS4.SSS3.p1.1.m1.3.3"></root><apply id="S3.SS4.SSS3.p1.1.m1.3.3.2.cmml" xref="S3.SS4.SSS3.p1.1.m1.3.3.2"><times id="S3.SS4.SSS3.p1.1.m1.3.3.2.1.cmml" xref="S3.SS4.SSS3.p1.1.m1.3.3.2.1"></times><ci id="S3.SS4.SSS3.p1.1.m1.3.3.2.2.cmml" xref="S3.SS4.SSS3.p1.1.m1.3.3.2.2">𝑥</ci><ci id="S3.SS4.SSS3.p1.1.m1.3.3.2.3.cmml" xref="S3.SS4.SSS3.p1.1.m1.3.3.2.3">𝑦</ci></apply></apply><apply id="S3.SS4.SSS3.p1.1.m1.4.4.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.4"><root id="S3.SS4.SSS3.p1.1.m1.4.4a.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.4"></root><degree id="S3.SS4.SSS3.p1.1.m1.4.4b.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.4"><cn type="integer" id="S3.SS4.SSS3.p1.1.m1.4.4.2.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.4.2">4</cn></degree><apply id="S3.SS4.SSS3.p1.1.m1.4.4.3.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.4.3"><times id="S3.SS4.SSS3.p1.1.m1.4.4.3.1.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.4.3.1"></times><ci id="S3.SS4.SSS3.p1.1.m1.4.4.3.2.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.4.3.2">𝑥</ci><ci id="S3.SS4.SSS3.p1.1.m1.4.4.3.3.cmml" xref="S3.SS4.SSS3.p1.1.m1.4.4.3.3">𝑦</ci></apply></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p1.1.m1.4c">f(x,y)=(\sqrt{xy},\sqrt[4]{xy})</annotation></semantics></math>, where <math id="S3.SS4.SSS3.p1.2.m2.8" class="ltx_Math" alttext="\{x,y\in\mathbb{R}\mid x,y\in[0,1)\}" display="inline"><semantics id="S3.SS4.SSS3.p1.2.m2.8a"><mrow id="S3.SS4.SSS3.p1.2.m2.8.8.2" xref="S3.SS4.SSS3.p1.2.m2.8.8.3.cmml"><mo stretchy="false" id="S3.SS4.SSS3.p1.2.m2.8.8.2.3" xref="S3.SS4.SSS3.p1.2.m2.8.8.3.1.cmml">{</mo><mrow id="S3.SS4.SSS3.p1.2.m2.7.7.1.1" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1.cmml"><mrow id="S3.SS4.SSS3.p1.2.m2.7.7.1.1.2.2" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1.2.1.cmml"><mi id="S3.SS4.SSS3.p1.2.m2.1.1" xref="S3.SS4.SSS3.p1.2.m2.1.1.cmml">x</mi><mo id="S3.SS4.SSS3.p1.2.m2.7.7.1.1.2.2.1" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1.2.1.cmml">,</mo><mi id="S3.SS4.SSS3.p1.2.m2.2.2" xref="S3.SS4.SSS3.p1.2.m2.2.2.cmml">y</mi></mrow><mo id="S3.SS4.SSS3.p1.2.m2.7.7.1.1.1" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1.1.cmml">∈</mo><mi id="S3.SS4.SSS3.p1.2.m2.7.7.1.1.3" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1.3.cmml">ℝ</mi></mrow><mo fence="true" lspace="0em" rspace="0em" id="S3.SS4.SSS3.p1.2.m2.8.8.2.4" xref="S3.SS4.SSS3.p1.2.m2.8.8.3.1.cmml">∣</mo><mrow id="S3.SS4.SSS3.p1.2.m2.8.8.2.2" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.cmml"><mrow id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.2.2" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.2.1.cmml"><mi id="S3.SS4.SSS3.p1.2.m2.5.5" xref="S3.SS4.SSS3.p1.2.m2.5.5.cmml">x</mi><mo id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.2.2.1" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.2.1.cmml">,</mo><mi id="S3.SS4.SSS3.p1.2.m2.6.6" xref="S3.SS4.SSS3.p1.2.m2.6.6.cmml">y</mi></mrow><mo id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.1" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.1.cmml">∈</mo><mrow id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.2" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.1.cmml"><mo stretchy="false" id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.2.1" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.1.cmml">[</mo><mn id="S3.SS4.SSS3.p1.2.m2.3.3" xref="S3.SS4.SSS3.p1.2.m2.3.3.cmml">0</mn><mo id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.2.2" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.1.cmml">,</mo><mn id="S3.SS4.SSS3.p1.2.m2.4.4" xref="S3.SS4.SSS3.p1.2.m2.4.4.cmml">1</mn><mo stretchy="false" id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.2.3" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="S3.SS4.SSS3.p1.2.m2.8.8.2.5" xref="S3.SS4.SSS3.p1.2.m2.8.8.3.1.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p1.2.m2.8b"><apply id="S3.SS4.SSS3.p1.2.m2.8.8.3.cmml" xref="S3.SS4.SSS3.p1.2.m2.8.8.2"><csymbol cd="latexml" id="S3.SS4.SSS3.p1.2.m2.8.8.3.1.cmml" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.3">conditional-set</csymbol><apply id="S3.SS4.SSS3.p1.2.m2.7.7.1.1.cmml" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1"><in id="S3.SS4.SSS3.p1.2.m2.7.7.1.1.1.cmml" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1.1"></in><list id="S3.SS4.SSS3.p1.2.m2.7.7.1.1.2.1.cmml" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1.2.2"><ci id="S3.SS4.SSS3.p1.2.m2.1.1.cmml" xref="S3.SS4.SSS3.p1.2.m2.1.1">𝑥</ci><ci id="S3.SS4.SSS3.p1.2.m2.2.2.cmml" xref="S3.SS4.SSS3.p1.2.m2.2.2">𝑦</ci></list><ci id="S3.SS4.SSS3.p1.2.m2.7.7.1.1.3.cmml" xref="S3.SS4.SSS3.p1.2.m2.7.7.1.1.3">ℝ</ci></apply><apply id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.cmml" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2"><in id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.1.cmml" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.1"></in><list id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.2.1.cmml" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.2.2"><ci id="S3.SS4.SSS3.p1.2.m2.5.5.cmml" xref="S3.SS4.SSS3.p1.2.m2.5.5">𝑥</ci><ci id="S3.SS4.SSS3.p1.2.m2.6.6.cmml" xref="S3.SS4.SSS3.p1.2.m2.6.6">𝑦</ci></list><interval closure="closed-open" id="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.1.cmml" xref="S3.SS4.SSS3.p1.2.m2.8.8.2.2.3.2"><cn type="integer" id="S3.SS4.SSS3.p1.2.m2.3.3.cmml" xref="S3.SS4.SSS3.p1.2.m2.3.3">0</cn><cn type="integer" id="S3.SS4.SSS3.p1.2.m2.4.4.cmml" xref="S3.SS4.SSS3.p1.2.m2.4.4">1</cn></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p1.2.m2.8c">\{x,y\in\mathbb{R}\mid x,y\in[0,1)\}</annotation></semantics></math>. The ANN consists of two input nodes, three hidden nodes, and two output nodes. The training data consists of tuples <math id="S3.SS4.SSS3.p1.3.m3.2" class="ltx_Math" alttext="(x,y)" display="inline"><semantics id="S3.SS4.SSS3.p1.3.m3.2a"><mrow id="S3.SS4.SSS3.p1.3.m3.2.3.2" xref="S3.SS4.SSS3.p1.3.m3.2.3.1.cmml"><mo stretchy="false" id="S3.SS4.SSS3.p1.3.m3.2.3.2.1" xref="S3.SS4.SSS3.p1.3.m3.2.3.1.cmml">(</mo><mi id="S3.SS4.SSS3.p1.3.m3.1.1" xref="S3.SS4.SSS3.p1.3.m3.1.1.cmml">x</mi><mo id="S3.SS4.SSS3.p1.3.m3.2.3.2.2" xref="S3.SS4.SSS3.p1.3.m3.2.3.1.cmml">,</mo><mi id="S3.SS4.SSS3.p1.3.m3.2.2" xref="S3.SS4.SSS3.p1.3.m3.2.2.cmml">y</mi><mo stretchy="false" id="S3.SS4.SSS3.p1.3.m3.2.3.2.3" xref="S3.SS4.SSS3.p1.3.m3.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS3.p1.3.m3.2b"><interval closure="open" id="S3.SS4.SSS3.p1.3.m3.2.3.1.cmml" xref="S3.SS4.SSS3.p1.3.m3.2.3.2"><ci id="S3.SS4.SSS3.p1.3.m3.1.1.cmml" xref="S3.SS4.SSS3.p1.3.m3.1.1">𝑥</ci><ci id="S3.SS4.SSS3.p1.3.m3.2.2.cmml" xref="S3.SS4.SSS3.p1.3.m3.2.2">𝑦</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS3.p1.3.m3.2c">(x,y)</annotation></semantics></math>. Each client randomly generated 250 such tuples prior to each round of training. As the relationship between input and output is known, it is trivial to generate an arbitrary amount of data. We performed five 500-second test runs with each of the four combined frameworks, recording time, number of executed iterations of the ANN on each client node, and total error. We used 10 client processes and hard-coded the initial weights for the sake of easy reproducibility. An alternative approach would have been to create the initial weights with the same random seed. In practice, the difference is insignificant.</p>
</div>
<div id="S3.SS4.SSS3.p2" class="ltx_para">
<p id="S3.SS4.SSS3.p2.1" class="ltx_p">The number of clients may seem small. However, the client part of our system will eventually be executed on separate hardware, such as the aforementioned on-board units in connected vehicles, which would each represent one single client node. Consequently, the focus is not on how the performance of <span id="S3.SS4.SSS3.p2.1.1" class="ltx_text ltx_font_typewriter">ffl-erl</span> scales when adding increasing numbers of client nodes to one machine. Given the recent interest in deep learning, one may also question the choice of using a shallow ANN. Shallow ANNs are still viable, however. In our case, the specified function is approximated successfully. On a related note, an interesting recent example of using a shallow ANN for computationally challenging work was presented by Cuccu et. al <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>. They show that a shallow ANN can, in some tasks, compete with deep neural networks.</p>
</div>
</section>
<section id="S3.SS4.SSS4" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.4 </span>Results.</h4>

<div id="S3.SS4.SSS4.p1" class="ltx_para">
<p id="S3.SS4.SSS4.p1.2" class="ltx_p">Experimental results are shown in Fig. <a href="#S3.F2" title="Figure 2 ‣ 3.4.4 Results. ‣ 3.4 Evaluation ‣ 3 Solution ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> below. The <math id="S3.SS4.SSS4.p1.1.m1.1" class="ltx_Math" alttext="x" display="inline"><semantics id="S3.SS4.SSS4.p1.1.m1.1a"><mi id="S3.SS4.SSS4.p1.1.m1.1.1" xref="S3.SS4.SSS4.p1.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p1.1.m1.1b"><ci id="S3.SS4.SSS4.p1.1.m1.1.1.cmml" xref="S3.SS4.SSS4.p1.1.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p1.1.m1.1c">x</annotation></semantics></math>-axis indicates the running time in seconds, while the <math id="S3.SS4.SSS4.p1.2.m2.1" class="ltx_Math" alttext="y" display="inline"><semantics id="S3.SS4.SSS4.p1.2.m2.1a"><mi id="S3.SS4.SSS4.p1.2.m2.1.1" xref="S3.SS4.SSS4.p1.2.m2.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p1.2.m2.1b"><ci id="S3.SS4.SSS4.p1.2.m2.1.1.cmml" xref="S3.SS4.SSS4.p1.2.m2.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p1.2.m2.1c">y</annotation></semantics></math>-axis shows the number of epochs, i.e. the number of iterations of the server-side ANN. Clients perform batch training on 250 data points per epoch. Each training pass consists of a constant amount of work, so the expectation was that the final result would be linear. The plotted data is the average of five test runs, which yielded virtually identical results.</p>
</div>
<div id="S3.SS4.SSS4.p2" class="ltx_para">
<p id="S3.SS4.SSS4.p2.3" class="ltx_p">In the concurrent use case, the Erlang-only implementation, compiled to the BEAM virtual machine, executes <math id="S3.SS4.SSS4.p2.1.m1.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS4.SSS4.p2.1.m1.1a"><mo id="S3.SS4.SSS4.p2.1.m1.1.1" xref="S3.SS4.SSS4.p2.1.m1.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p2.1.m1.1b"><csymbol cd="latexml" id="S3.SS4.SSS4.p2.1.m1.1.1.cmml" xref="S3.SS4.SSS4.p2.1.m1.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p2.1.m1.1c">\sim</annotation></semantics></math>192,000 epochs in 500 seconds. This value increases to <math id="S3.SS4.SSS4.p2.2.m2.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS4.SSS4.p2.2.m2.1a"><mo id="S3.SS4.SSS4.p2.2.m2.1.1" xref="S3.SS4.SSS4.p2.2.m2.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p2.2.m2.1b"><csymbol cd="latexml" id="S3.SS4.SSS4.p2.2.m2.1.1.cmml" xref="S3.SS4.SSS4.p2.2.m2.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p2.2.m2.1c">\sim</annotation></semantics></math>286,000 epochs when compiling Erlang to native code. In comparison, the result with NIFs is <math id="S3.SS4.SSS4.p2.3.m3.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS4.SSS4.p2.3.m3.1a"><mo id="S3.SS4.SSS4.p2.3.m3.1.1" xref="S3.SS4.SSS4.p2.3.m3.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p2.3.m3.1b"><csymbol cd="latexml" id="S3.SS4.SSS4.p2.3.m3.1.1.cmml" xref="S3.SS4.SSS4.p2.3.m3.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p2.3.m3.1c">\sim</annotation></semantics></math>386,000 epochs. NIFs cannot be used together with natively compiled Erlang code, which is why a corresponding plot is missing. The performance difference between using NIFs and Erlang code compiled to BEAM amounts to a constant factor of 2.01. With native execution, the speedup compared to execution on the BEAM virtual machine amounts to 49.0%. Comparing that performance to NIFs, the resulting difference shrinks to a factor of 1.35.</p>
</div>
<div id="S3.SS4.SSS4.p3" class="ltx_para">
<p id="S3.SS4.SSS4.p3.4" class="ltx_p">An Erlang-only distributed implementation running on the BEAM virtual machine is able to compute <math id="S3.SS4.SSS4.p3.1.m1.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS4.SSS4.p3.1.m1.1a"><mo id="S3.SS4.SSS4.p3.1.m1.1.1" xref="S3.SS4.SSS4.p3.1.m1.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p3.1.m1.1b"><csymbol cd="latexml" id="S3.SS4.SSS4.p3.1.m1.1.1.cmml" xref="S3.SS4.SSS4.p3.1.m1.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p3.1.m1.1c">\sim</annotation></semantics></math>128,000 epochs in 500 seconds, which increases to <math id="S3.SS4.SSS4.p3.2.m2.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS4.SSS4.p3.2.m2.1a"><mo id="S3.SS4.SSS4.p3.2.m2.1.1" xref="S3.SS4.SSS4.p3.2.m2.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p3.2.m2.1b"><csymbol cd="latexml" id="S3.SS4.SSS4.p3.2.m2.1.1.cmml" xref="S3.SS4.SSS4.p3.2.m2.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p3.2.m2.1c">\sim</annotation></semantics></math>250,000 epochs (+95.3%) with native code. On the other hand, with C nodes, the resulting performance is <math id="S3.SS4.SSS4.p3.3.m3.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS4.SSS4.p3.3.m3.1a"><mo id="S3.SS4.SSS4.p3.3.m3.1.1" xref="S3.SS4.SSS4.p3.3.m3.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p3.3.m3.1b"><csymbol cd="latexml" id="S3.SS4.SSS4.p3.3.m3.1.1.cmml" xref="S3.SS4.SSS4.p3.3.m3.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p3.3.m3.1c">\sim</annotation></semantics></math>522,000 epochs on the BEAM virtual machine as opposed to <math id="S3.SS4.SSS4.p3.4.m4.1" class="ltx_Math" alttext="\sim" display="inline"><semantics id="S3.SS4.SSS4.p3.4.m4.1a"><mo id="S3.SS4.SSS4.p3.4.m4.1.1" xref="S3.SS4.SSS4.p3.4.m4.1.1.cmml">∼</mo><annotation-xml encoding="MathML-Content" id="S3.SS4.SSS4.p3.4.m4.1b"><csymbol cd="latexml" id="S3.SS4.SSS4.p3.4.m4.1.1.cmml" xref="S3.SS4.SSS4.p3.4.m4.1.1">similar-to</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.SSS4.p3.4.m4.1c">\sim</annotation></semantics></math>643,000 epochs (+23.4%) per client when compiling Erlang to native code. The performance difference between a pure Erlang implementation and one that uses C nodes amounts to a constant factor of 4.1 on the BEAM virtual machine, which shrinks to 2.6 with HiPE.</p>
</div>
<figure id="S3.F2" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S3.F2.sf1" class="ltx_figure ltx_figure_panel"><img src="/html/1808.08143/assets/x2.png" id="S3.F2.sf1.g1" class="ltx_graphics ltx_img_landscape" width="132" height="101" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S3.F2.sf1.3.2" class="ltx_text" style="font-size:90%;">Concurrent execution</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S3.F2.sf2" class="ltx_figure ltx_figure_panel"><img src="/html/1808.08143/assets/x3.png" id="S3.F2.sf2.g1" class="ltx_graphics ltx_img_landscape" width="132" height="101" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S3.F2.sf2.3.2" class="ltx_text" style="font-size:90%;">Distributed execution</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.2.1.1" class="ltx_text" style="font-size:90%;">Figure 2</span>: </span><span id="S3.F2.3.2" class="ltx_text" style="font-size:90%;">In (a), Erlang (HiPE) reaches 74.1% of the performance of Erlang code that uses NIFs. In (b), Erlang (BEAM) reaches 24.5% of the performance of Erlang with C nodes; Erlang (HiPE) reaches 38.9% of the corresponding performance.</span></figcaption>
</figure>
</section>
<section id="S3.SS4.SSS5" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.4.5 </span>Discussion.</h4>

<div id="S3.SS4.SSS5.p1" class="ltx_para">
<p id="S3.SS4.SSS5.p1.1" class="ltx_p">It is perhaps surprising that an implementation that relies on Erlang for numerical computations is fairly competitive with C, with the observed difference amounting to a modest constant factor. In particular, the performance of natively compiled Erlang code is commendable. In the concurrent use case in particular, HiPE performs remarkably well. These are significant results for a number of reasons. From the perspective of programmer productivity, the relative conciseness of Erlang code, compared to C, is worth pointing out. For instance, the line count of our C code that merely interfaces with the FANN library slightly exceeds the line count of the Erlang implementation of our entire ANN. Writing the former was more time-consuming than the latter. That being said, the tool Nifty <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>, which automates the generation of NIF libraries based on C header files, may have simplified this task. However, as we wanted to limit external dependencies, this was not a viable option.</p>
</div>
<div id="S3.SS4.SSS5.p2" class="ltx_para">
<p id="S3.SS4.SSS5.p2.1" class="ltx_p">The main argument for using C is its high performance. Yet, a downside is that it is a low-level programming language. In particular, manual memory allocation and garbage collection are an abundant source of programming errors. In terms of programmer productivity, C therefore does not compare favorably with Erlang. As there are use cases where performance is not of the topmost priority, Erlang may be a viable alternative as it leads to a much shorter turnaround time between design, implementation, and execution.</p>
</div>
<div id="S3.SS4.SSS5.p3" class="ltx_para">
<p id="S3.SS4.SSS5.p3.1" class="ltx_p">The performance comparison between Erlang and C is arguably lopsided, due to using the open-source C library FANN. It originally appeared in 2003 and has been actively maintained for over a decade, even though development activity seems to have slowed down recently. On the other hand, we developed our Erlang implementation of an ANN relatively quickly and without the benefit of extensively using it in real-world situations. Because FANN has been much more optimized than our code, the true performance difference between the competing programming languages may be less than what our numbers indicate.</p>
</div>
<div id="S3.SS4.SSS5.p4" class="ltx_para">
<p id="S3.SS4.SSS5.p4.1" class="ltx_p">C nodes work very well as they can essentially be addressed like Erlang nodes. NIFs, on the other hand, have serious drawbacks.<span id="footnote4" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>Refer to the section on Natively Implemented Functions (NIFs) in the official Erlang documentation for further details: <a target="_blank" href="http://erlang.org/doc/man/erl_nif.html" title="" class="ltx_ref ltx_url" style="color:#0000FF;">http://erlang.org/doc/man/erl_nif.html</a> (accessed on June 28, 2018).</span></span></span> They are executed as native extensions of the Erlang VM. Thus, a NIF that crashes will crash the Erlang VM. Furthermore, NIFs can cause state inefficiencies, which may lead to crashes or unexpected behaviors. Lastly, there is the issue of <em id="S3.SS4.SSS5.p4.1.1" class="ltx_emph ltx_font_italic">lengthy work</em>: a NIF that takes too long to return may negatively affect the responsiveness of the Erlang VM. In the Erlang version we were using, a well-behaving NIF has to return within one millisecond. In exploratory benchmarking with data sets not much larger than the one we eventually used, we measured calls to NIFs that took longer than that. Consequently, we think it is too risky to use NIFs in a more taxing environment.</p>
</div>
</section>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Related Work</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">There has been some preceding work in academia related to using functional programming languages for tackling machine learning tasks. About a decade ago, Allison explored using Haskell for defining various machine learning and statistical learning models <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>. Yet, that work was of a theoretical nature. Going back even further, Yu and Clack presented a system for polymorphic genetic programming in Haskell <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite>. Likewise, this was from a theoretical perspective. More recently, Sher <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite> did extensive work on modeling evolutionary computations. A central part of his contribution is an ANN implemented in Erlang. However, his fairly complex system could only have been used as the starting point of our work with substantial modifications. One key difference is that individual nodes of the ANN are modeled as independent processes, and so are sensors and actuators. A related ANN implementation in Erlang is <span id="S4.p1.1.1" class="ltx_text ltx_font_typewriter">yanni</span>,<span id="footnote5" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_tag ltx_tag_note">5</span>The corresponding code repository is located at <a target="_blank" href="https://bitbucket.org/nato/yanni" title="" class="ltx_ref ltx_url" style="color:#0000FF;">https://bitbucket.org/nato/yanni</a> (accessed on August 6, 2018).</span></span></span> which follows Sher’s approach of using message passing, albeit only between layers.</p>
</div>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Future Work</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">The <span id="S5.p1.1.1" class="ltx_text ltx_font_typewriter">ffl-erl</span> project has influenced ongoing work in our research lab on a real-world system for distributed data analytics for the automotive industry <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>. In that system, Erlang is used for distributing assignments to clients, which operate on local data. Those clients can execute code written in an arbitrary programming language. Federated Learning is one of its use cases.</p>
</div>
<section id="S5.SS0.SSSx1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">Acknowledgements.</h4>

<div id="S5.SS0.SSSx1.p1" class="ltx_para">
<p id="S5.SS0.SSSx1.p1.1" class="ltx_p">Our research was financially supported by the project On-board/Off-board Distributed Data Analytics (OODIDA) in the funding program FFI: Strategic Vehicle Research and Innovation (DNR 2016-04260), which is administered by VINNOVA, the Swedish Government Agency for Innovation Systems. It was carried out in the Fraunhofer Cluster of Excellence ”Cognitive Internet Technologies.” Adrian Nilsson and Simon Smith assisted with the implementation. Melinda Tóth pointed us to Sher’s work. We also thank our anonymous reviewers for their helpful feedback.</p>
</div>
</section>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Allison, L.: Models for Machine Learning and Data Mining in
Functional Programming. Journal of Functional Programming
<span id="bib.bib1.1.1" class="ltx_text ltx_font_bold">15</span>(1), 15–32 (2005)

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Bauer, H., Goh, Y., Schlink, S., Thomas, C.: The Supercomputer in Your
Pocket. McKinsey on Semiconductors pp. 14–27 (2012)

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Chen, D., Zhao, H.: Data Security and Privacy Protection Issues in
Cloud Computing. In: Proceedings of the 2012 International Conference on
Computer Science and Electronics Engineering (ICCSEE). vol. 1, pp. 647–651.
IEEE (2012)

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Coppola, R., Morisio, M.: Connected Car: Technologies, Issues, Future
Trends. ACM Computing Surveys (CSUR) <span id="bib.bib4.1.1" class="ltx_text ltx_font_bold">49</span>(3), 1 – 36 (2016)

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Cuccu, G., Togelius, J., Cudre-Mauroux, P.: Playing Atari with Six
Neurons. arXiv preprint arXiv:1806.01363 (2018)

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Evans-Pughe, C.: The Connected Car. IEE Review <span id="bib.bib6.1.1" class="ltx_text ltx_font_bold">51</span>(1), 42–46
(2005)

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Fisher, R., Marshall, M.: Iris Data Set. UC Irvine Machine Learning
Repository (1936)

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Gybenko, G.: Approximation by Superposition of Sigmoidal Functions.
Mathematics of Control, Signals and Systems <span id="bib.bib8.1.1" class="ltx_text ltx_font_bold">2</span>(4), 303–314 (1989)

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Hornik, K.: Approximation Capabilities of Multilayer Feedforward
Networks. Neural networks <span id="bib.bib9.1.1" class="ltx_text ltx_font_bold">4</span>(2), 251–257 (1991)

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Johansson, E., Pettersson, M., Sagonas, K.: A High Performance Erlang
System. In: Proceedings of the 2nd ACM SIGPLAN international conference on
Principles and practice of declarative programming. pp. 32–43. ACM (2000)

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
LeCun, Y., Cortes, C., Burges, C.J.: Mnist Handwritten Digit Database.
AT&amp;T Labs [Online]. Available: http://yann.lecun.com/exdb/mnist (2010)

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Lee, J., Kim, C.: A Roadside Unit Placement Scheme for Vehicular
Telematics Networks. In: Advances in Computer Science and Information
Technology. pp. 196–202. Springer (2010)

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Löscher, A., Sagonas, K.: The Nifty Way to Call Hell from Heaven.
In: Proceedings of the 15th International Workshop on Erlang. pp. 1–11. ACM
(2016)

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
McMahan, H.B., Moore, E., Ramage, D., Hampson, S., et al.:
Communication-efficient Learning of Deep Networks from
Decentralized Data. arXiv preprint arXiv:1602.05629 (2016)

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Nissen, S.: Implementation of a Fast Artificial Neural Network
Library (FANN). Report, Department of Computer Science University of
Copenhagen (DIKU) <span id="bib.bib15.1.1" class="ltx_text ltx_font_bold">31</span>,  29 (2003)

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Orr, G.B., Müller, K.R.: Neural Networks: Tricks of the Trade.
Springer (2003)

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Sagonas, K., Pettersson, M., Carlsson, R., Gustafsson, P., Lindahl, T.: All
You Wanted to Know About the HiPE Compiler (But Might Have
Been Afraid to Ask). In: Proceedings of the 2003 ACM SIGPLAN workshop
on Erlang. pp. 36–42. ACM (2003)

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Sher, G.I.: Handbook of Neuroevolution Through Erlang. Springer Science
&amp; Business Media (2012)

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Srihari, S.N., Kuebert, E.J.: Integration of Hand-Written Address
Interpretation Technology into the United States Postal Service
Remote Computer Reader System. In: Proceedings of the Fourth
International Conference on Document Analysis and Recognition. vol. 2, pp.
892–896. IEEE (1997)

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Tene, O., Polonetsky, J.: Privacy in the Age of Big Data: A Time
for Big Decisions. Stan. L. Rev. Online <span id="bib.bib20.1.1" class="ltx_text ltx_font_bold">64</span>, 63–69 (2011)

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Ulm, G., Gustavsson, E., Jirstrand, M.: OODIDA: On-board/Off-board
Distributed Data Analytics for Connected Vehicles. arXiv preprint
arXiv:1902.00319 (2019)

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Yu, T., Clack, C.: Polygp: A Polymorphic Genetic Programming System in
Haskell. Genetic Programming <span id="bib.bib22.1.1" class="ltx_text ltx_font_bold">98</span> (1998)

</span>
</li>
</ul>
</section>
<section id="Pt0.A1" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix 0.A </span>Mathematical Derivation of Federated Stochastic Gradient Descent</h2>

<div id="Pt0.A1.p1" class="ltx_para">
<p id="Pt0.A1.p1.1" class="ltx_p">In Section <a href="#S2.SS2.SSS2" title="2.2.2 Federated Stochastic Gradient Descent. ‣ 2.2 Federated Stochastic Gradient Descent ‣ 2 Background ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2.2</span></a> we briefly describe Federated Stochastic Gradient Descent. In the current section, we present the complete derivation. As a reminder, we stated that in Stochastic Gradient Descent, weights are updated this way:</p>
</div>
<div id="Pt0.A1.p2" class="ltx_para">
<table id="Pt0.A1.E6" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Pt0.A1.E6.m1.2" class="ltx_Math" alttext="w:=w-\frac{\eta}{n}\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w)." display="block"><semantics id="Pt0.A1.E6.m1.2a"><mrow id="Pt0.A1.E6.m1.2.2.1" xref="Pt0.A1.E6.m1.2.2.1.1.cmml"><mrow id="Pt0.A1.E6.m1.2.2.1.1" xref="Pt0.A1.E6.m1.2.2.1.1.cmml"><mi id="Pt0.A1.E6.m1.2.2.1.1.2" xref="Pt0.A1.E6.m1.2.2.1.1.2.cmml">w</mi><mo lspace="0.278em" rspace="0.278em" id="Pt0.A1.E6.m1.2.2.1.1.1" xref="Pt0.A1.E6.m1.2.2.1.1.1.cmml">:=</mo><mrow id="Pt0.A1.E6.m1.2.2.1.1.3" xref="Pt0.A1.E6.m1.2.2.1.1.3.cmml"><mi id="Pt0.A1.E6.m1.2.2.1.1.3.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.2.cmml">w</mi><mo id="Pt0.A1.E6.m1.2.2.1.1.3.1" xref="Pt0.A1.E6.m1.2.2.1.1.3.1.cmml">−</mo><mrow id="Pt0.A1.E6.m1.2.2.1.1.3.3" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.cmml"><mfrac id="Pt0.A1.E6.m1.2.2.1.1.3.3.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.2.cmml"><mi id="Pt0.A1.E6.m1.2.2.1.1.3.3.2.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.2.2.cmml">η</mi><mi id="Pt0.A1.E6.m1.2.2.1.1.3.3.2.3" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.2.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E6.m1.2.2.1.1.3.3.1" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.1.cmml">​</mo><mrow id="Pt0.A1.E6.m1.2.2.1.1.3.3.3" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.cmml"><munderover id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.cmml"><mo movablelimits="false" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.2.cmml">∑</mo><mrow id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.cmml"><mi id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.2.cmml">i</mi><mo id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.1" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.1.cmml">=</mo><mn id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.3" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.3" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.3.cmml">n</mi></munderover><mrow id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.cmml"><mrow id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.cmml"><mo rspace="0.167em" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.1" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.cmml"><mi id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.3" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.1" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.1.cmml">​</mo><mrow id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.3.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.cmml"><mo stretchy="false" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.3.2.1" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.cmml">(</mo><mi id="Pt0.A1.E6.m1.1.1" xref="Pt0.A1.E6.m1.1.1.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.3.2.2" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><mo lspace="0em" id="Pt0.A1.E6.m1.2.2.1.2" xref="Pt0.A1.E6.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E6.m1.2b"><apply id="Pt0.A1.E6.m1.2.2.1.1.cmml" xref="Pt0.A1.E6.m1.2.2.1"><csymbol cd="latexml" id="Pt0.A1.E6.m1.2.2.1.1.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.1">assign</csymbol><ci id="Pt0.A1.E6.m1.2.2.1.1.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.2">𝑤</ci><apply id="Pt0.A1.E6.m1.2.2.1.1.3.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3"><minus id="Pt0.A1.E6.m1.2.2.1.1.3.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.1"></minus><ci id="Pt0.A1.E6.m1.2.2.1.1.3.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.2">𝑤</ci><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3"><times id="Pt0.A1.E6.m1.2.2.1.1.3.3.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.1"></times><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.2"><divide id="Pt0.A1.E6.m1.2.2.1.1.3.3.2.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.2"></divide><ci id="Pt0.A1.E6.m1.2.2.1.1.3.3.2.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.2.2">𝜂</ci><ci id="Pt0.A1.E6.m1.2.2.1.1.3.3.2.3.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.2.3">𝑛</ci></apply><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3"><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1"><csymbol cd="ambiguous" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1">superscript</csymbol><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1"><csymbol cd="ambiguous" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1">subscript</csymbol><sum id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.2"></sum><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3"><eq id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.1"></eq><ci id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.2">𝑖</ci><cn type="integer" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.3.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.3.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.1.3">𝑛</ci></apply><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2"><times id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.1"></times><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2"><ci id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.1">∇</ci><apply id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.1.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2">subscript</csymbol><ci id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.2.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.3.cmml" xref="Pt0.A1.E6.m1.2.2.1.1.3.3.3.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E6.m1.1.1.cmml" xref="Pt0.A1.E6.m1.1.1">𝑤</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E6.m1.2c">w:=w-\frac{\eta}{n}\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
</div>
<div id="Pt0.A1.p3" class="ltx_para">
<p id="Pt0.A1.p3.1" class="ltx_p">Furthermore, we started with the following equation, which is the objective function we would like to minimize:</p>
</div>
<div id="Pt0.A1.p4" class="ltx_para">
<table id="Pt0.A1.E7" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Pt0.A1.E7.m1.3" class="ltx_Math" alttext="F(w)=\frac{1}{n}\displaystyle\sum_{j=1}^{k}|P_{j}|F^{j}(w)." display="block"><semantics id="Pt0.A1.E7.m1.3a"><mrow id="Pt0.A1.E7.m1.3.3.1" xref="Pt0.A1.E7.m1.3.3.1.1.cmml"><mrow id="Pt0.A1.E7.m1.3.3.1.1" xref="Pt0.A1.E7.m1.3.3.1.1.cmml"><mrow id="Pt0.A1.E7.m1.3.3.1.1.3" xref="Pt0.A1.E7.m1.3.3.1.1.3.cmml"><mi id="Pt0.A1.E7.m1.3.3.1.1.3.2" xref="Pt0.A1.E7.m1.3.3.1.1.3.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="Pt0.A1.E7.m1.3.3.1.1.3.1" xref="Pt0.A1.E7.m1.3.3.1.1.3.1.cmml">​</mo><mrow id="Pt0.A1.E7.m1.3.3.1.1.3.3.2" xref="Pt0.A1.E7.m1.3.3.1.1.3.cmml"><mo stretchy="false" id="Pt0.A1.E7.m1.3.3.1.1.3.3.2.1" xref="Pt0.A1.E7.m1.3.3.1.1.3.cmml">(</mo><mi id="Pt0.A1.E7.m1.1.1" xref="Pt0.A1.E7.m1.1.1.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E7.m1.3.3.1.1.3.3.2.2" xref="Pt0.A1.E7.m1.3.3.1.1.3.cmml">)</mo></mrow></mrow><mo id="Pt0.A1.E7.m1.3.3.1.1.2" xref="Pt0.A1.E7.m1.3.3.1.1.2.cmml">=</mo><mrow id="Pt0.A1.E7.m1.3.3.1.1.1" xref="Pt0.A1.E7.m1.3.3.1.1.1.cmml"><mfrac id="Pt0.A1.E7.m1.3.3.1.1.1.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.3.cmml"><mn id="Pt0.A1.E7.m1.3.3.1.1.1.3.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.3.2.cmml">1</mn><mi id="Pt0.A1.E7.m1.3.3.1.1.1.3.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.3.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E7.m1.3.3.1.1.1.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.2.cmml">​</mo><mrow id="Pt0.A1.E7.m1.3.3.1.1.1.1" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.cmml"><munderover id="Pt0.A1.E7.m1.3.3.1.1.1.1.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.cmml"><mo movablelimits="false" rspace="0em" id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.cmml"><mi id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.2.cmml">j</mi><mo id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.1" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.3.cmml">k</mi></munderover><mrow id="Pt0.A1.E7.m1.3.3.1.1.1.1.1" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.cmml"><mrow id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.2.1.cmml">|</mo><msub id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.cmml"><mi id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.2.cmml">P</mi><mi id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.2.1.cmml">|</mo></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.2.cmml">​</mo><msup id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.cmml"><mi id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.2.cmml">F</mi><mi id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.3" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.3.cmml">j</mi></msup><mo lspace="0em" rspace="0em" id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.2a" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.2.cmml">​</mo><mrow id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.4.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.cmml"><mo stretchy="false" id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.4.2.1" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.cmml">(</mo><mi id="Pt0.A1.E7.m1.2.2" xref="Pt0.A1.E7.m1.2.2.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.4.2.2" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo lspace="0em" id="Pt0.A1.E7.m1.3.3.1.2" xref="Pt0.A1.E7.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E7.m1.3b"><apply id="Pt0.A1.E7.m1.3.3.1.1.cmml" xref="Pt0.A1.E7.m1.3.3.1"><eq id="Pt0.A1.E7.m1.3.3.1.1.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.2"></eq><apply id="Pt0.A1.E7.m1.3.3.1.1.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.3"><times id="Pt0.A1.E7.m1.3.3.1.1.3.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.3.1"></times><ci id="Pt0.A1.E7.m1.3.3.1.1.3.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.3.2">𝐹</ci><ci id="Pt0.A1.E7.m1.1.1.cmml" xref="Pt0.A1.E7.m1.1.1">𝑤</ci></apply><apply id="Pt0.A1.E7.m1.3.3.1.1.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1"><times id="Pt0.A1.E7.m1.3.3.1.1.1.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.2"></times><apply id="Pt0.A1.E7.m1.3.3.1.1.1.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.3"><divide id="Pt0.A1.E7.m1.3.3.1.1.1.3.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.3"></divide><cn type="integer" id="Pt0.A1.E7.m1.3.3.1.1.1.3.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.3.2">1</cn><ci id="Pt0.A1.E7.m1.3.3.1.1.1.3.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.3.3">𝑛</ci></apply><apply id="Pt0.A1.E7.m1.3.3.1.1.1.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1"><apply id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2">superscript</csymbol><apply id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2">subscript</csymbol><sum id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.2"></sum><apply id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3"><eq id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.1"></eq><ci id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.2">𝑗</ci><cn type="integer" id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E7.m1.3.3.1.1.1.1.2.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.2.3">𝑘</ci></apply><apply id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1"><times id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.2"></times><apply id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1"><abs id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.2.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.2"></abs><apply id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.2">𝑃</ci><ci id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.1.1.1.3">𝑗</ci></apply></apply><apply id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3"><csymbol cd="ambiguous" id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.1.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3">superscript</csymbol><ci id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.2.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.2">𝐹</ci><ci id="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.3.cmml" xref="Pt0.A1.E7.m1.3.3.1.1.1.1.1.3.3">𝑗</ci></apply><ci id="Pt0.A1.E7.m1.2.2.cmml" xref="Pt0.A1.E7.m1.2.2">𝑤</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E7.m1.3c">F(w)=\frac{1}{n}\displaystyle\sum_{j=1}^{k}|P_{j}|F^{j}(w).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
</div>
<div id="Pt0.A1.p5" class="ltx_para">
<p id="Pt0.A1.p5.1" class="ltx_p">The gradient of <math id="Pt0.A1.p5.1.m1.1" class="ltx_Math" alttext="F^{j}" display="inline"><semantics id="Pt0.A1.p5.1.m1.1a"><msup id="Pt0.A1.p5.1.m1.1.1" xref="Pt0.A1.p5.1.m1.1.1.cmml"><mi id="Pt0.A1.p5.1.m1.1.1.2" xref="Pt0.A1.p5.1.m1.1.1.2.cmml">F</mi><mi id="Pt0.A1.p5.1.m1.1.1.3" xref="Pt0.A1.p5.1.m1.1.1.3.cmml">j</mi></msup><annotation-xml encoding="MathML-Content" id="Pt0.A1.p5.1.m1.1b"><apply id="Pt0.A1.p5.1.m1.1.1.cmml" xref="Pt0.A1.p5.1.m1.1.1"><csymbol cd="ambiguous" id="Pt0.A1.p5.1.m1.1.1.1.cmml" xref="Pt0.A1.p5.1.m1.1.1">superscript</csymbol><ci id="Pt0.A1.p5.1.m1.1.1.2.cmml" xref="Pt0.A1.p5.1.m1.1.1.2">𝐹</ci><ci id="Pt0.A1.p5.1.m1.1.1.3.cmml" xref="Pt0.A1.p5.1.m1.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.p5.1.m1.1c">F^{j}</annotation></semantics></math> is expressed in the following formula:</p>
</div>
<div id="Pt0.A1.p6" class="ltx_para">
<table id="Pt0.A1.E8" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Pt0.A1.E8.m1.7" class="ltx_Math" alttext="\nabla F^{j}(w)=\frac{1}{|P_{j}|}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w),j=1,\dotsc,k." display="block"><semantics id="Pt0.A1.E8.m1.7a"><mrow id="Pt0.A1.E8.m1.7.7.1"><mrow id="Pt0.A1.E8.m1.7.7.1.1.2" xref="Pt0.A1.E8.m1.7.7.1.1.3.cmml"><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.cmml"><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.cmml"><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.cmml"><mo rspace="0.167em" id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.1.cmml">∇</mo><msup id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.cmml"><mi id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.3" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.3.cmml">j</mi></msup></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.1.cmml">​</mo><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.3.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.cmml"><mo stretchy="false" id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.3.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.cmml">(</mo><mi id="Pt0.A1.E8.m1.2.2" xref="Pt0.A1.E8.m1.2.2.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.3.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="Pt0.A1.E8.m1.7.7.1.1.1.1.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.1.cmml">=</mo><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.3" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.cmml"><mfrac id="Pt0.A1.E8.m1.1.1" xref="Pt0.A1.E8.m1.1.1.cmml"><mn id="Pt0.A1.E8.m1.1.1.3" xref="Pt0.A1.E8.m1.1.1.3.cmml">1</mn><mrow id="Pt0.A1.E8.m1.1.1.1.1" xref="Pt0.A1.E8.m1.1.1.1.2.cmml"><mo stretchy="false" id="Pt0.A1.E8.m1.1.1.1.1.2" xref="Pt0.A1.E8.m1.1.1.1.2.1.cmml">|</mo><msub id="Pt0.A1.E8.m1.1.1.1.1.1" xref="Pt0.A1.E8.m1.1.1.1.1.1.cmml"><mi id="Pt0.A1.E8.m1.1.1.1.1.1.2" xref="Pt0.A1.E8.m1.1.1.1.1.1.2.cmml">P</mi><mi id="Pt0.A1.E8.m1.1.1.1.1.1.3" xref="Pt0.A1.E8.m1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="Pt0.A1.E8.m1.1.1.1.1.3" xref="Pt0.A1.E8.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.1.cmml">​</mo><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.cmml"><munder id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.cmml"><mo movablelimits="false" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.2.cmml">∑</mo><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.cmml"><mi id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.2.cmml">i</mi><mo id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.1.cmml">∈</mo><msub id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.cmml"><mi id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.2.cmml">P</mi><mi id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.3" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.3.cmml">j</mi></msub></mrow></munder><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.cmml"><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.cmml"><mo rspace="0.167em" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.cmml"><mi id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.3" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.1.cmml">​</mo><mrow id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.3.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.cmml"><mo stretchy="false" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.3.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.cmml">(</mo><mi id="Pt0.A1.E8.m1.3.3" xref="Pt0.A1.E8.m1.3.3.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.3.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="Pt0.A1.E8.m1.7.7.1.1.2.3" xref="Pt0.A1.E8.m1.7.7.1.1.3a.cmml">,</mo><mrow id="Pt0.A1.E8.m1.7.7.1.1.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.cmml"><mi id="Pt0.A1.E8.m1.7.7.1.1.2.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.2.cmml">j</mi><mo id="Pt0.A1.E8.m1.7.7.1.1.2.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.1.cmml">=</mo><mrow id="Pt0.A1.E8.m1.7.7.1.1.2.2.3.2" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.3.1.cmml"><mn id="Pt0.A1.E8.m1.4.4" xref="Pt0.A1.E8.m1.4.4.cmml">1</mn><mo id="Pt0.A1.E8.m1.7.7.1.1.2.2.3.2.1" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.3.1.cmml">,</mo><mi mathvariant="normal" id="Pt0.A1.E8.m1.5.5" xref="Pt0.A1.E8.m1.5.5.cmml">…</mi><mo id="Pt0.A1.E8.m1.7.7.1.1.2.2.3.2.2" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.3.1.cmml">,</mo><mi id="Pt0.A1.E8.m1.6.6" xref="Pt0.A1.E8.m1.6.6.cmml">k</mi></mrow></mrow></mrow><mo lspace="0em" id="Pt0.A1.E8.m1.7.7.1.2">.</mo></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E8.m1.7b"><apply id="Pt0.A1.E8.m1.7.7.1.1.3.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E8.m1.7.7.1.1.3a.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.2.3">formulae-sequence</csymbol><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1"><eq id="Pt0.A1.E8.m1.7.7.1.1.1.1.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.1"></eq><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2"><times id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.1"></times><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2"><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.1">∇</ci><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2">superscript</csymbol><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.3.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.2.2.2.3">𝑗</ci></apply></apply><ci id="Pt0.A1.E8.m1.2.2.cmml" xref="Pt0.A1.E8.m1.2.2">𝑤</ci></apply><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3"><times id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.1"></times><apply id="Pt0.A1.E8.m1.1.1.cmml" xref="Pt0.A1.E8.m1.1.1"><divide id="Pt0.A1.E8.m1.1.1.2.cmml" xref="Pt0.A1.E8.m1.1.1"></divide><cn type="integer" id="Pt0.A1.E8.m1.1.1.3.cmml" xref="Pt0.A1.E8.m1.1.1.3">1</cn><apply id="Pt0.A1.E8.m1.1.1.1.2.cmml" xref="Pt0.A1.E8.m1.1.1.1.1"><abs id="Pt0.A1.E8.m1.1.1.1.2.1.cmml" xref="Pt0.A1.E8.m1.1.1.1.1.2"></abs><apply id="Pt0.A1.E8.m1.1.1.1.1.1.cmml" xref="Pt0.A1.E8.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Pt0.A1.E8.m1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E8.m1.1.1.1.1.1">subscript</csymbol><ci id="Pt0.A1.E8.m1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E8.m1.1.1.1.1.1.2">𝑃</ci><ci id="Pt0.A1.E8.m1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E8.m1.1.1.1.1.1.3">𝑗</ci></apply></apply></apply><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2"><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1"><csymbol cd="ambiguous" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1">subscript</csymbol><sum id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.2"></sum><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3"><in id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.1"></in><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.2">𝑖</ci><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3"><csymbol cd="ambiguous" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3">subscript</csymbol><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.2">𝑃</ci><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.3.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.1.3.3.3">𝑗</ci></apply></apply></apply><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2"><times id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.1"></times><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2"><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.1">∇</ci><apply id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2">subscript</csymbol><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.3.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.1.1.3.2.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E8.m1.3.3.cmml" xref="Pt0.A1.E8.m1.3.3">𝑤</ci></apply></apply></apply></apply><apply id="Pt0.A1.E8.m1.7.7.1.1.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.2.2"><eq id="Pt0.A1.E8.m1.7.7.1.1.2.2.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.1"></eq><ci id="Pt0.A1.E8.m1.7.7.1.1.2.2.2.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.2">𝑗</ci><list id="Pt0.A1.E8.m1.7.7.1.1.2.2.3.1.cmml" xref="Pt0.A1.E8.m1.7.7.1.1.2.2.3.2"><cn type="integer" id="Pt0.A1.E8.m1.4.4.cmml" xref="Pt0.A1.E8.m1.4.4">1</cn><ci id="Pt0.A1.E8.m1.5.5.cmml" xref="Pt0.A1.E8.m1.5.5">…</ci><ci id="Pt0.A1.E8.m1.6.6.cmml" xref="Pt0.A1.E8.m1.6.6">𝑘</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E8.m1.7c">\nabla F^{j}(w)=\frac{1}{|P_{j}|}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w),j=1,\dotsc,k.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr></tbody>
</table>
</div>
<div id="Pt0.A1.p7" class="ltx_para">
<p id="Pt0.A1.p7.1" class="ltx_p">To continue from here, each client updates the weights of the machine learning model the following way:</p>
</div>
<div id="Pt0.A1.p8" class="ltx_para">
<table id="Pt0.A1.E9" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Pt0.A1.E9.m1.3" class="ltx_Math" alttext="w_{j}=w-\frac{\eta}{|P_{j}|}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w)." display="block"><semantics id="Pt0.A1.E9.m1.3a"><mrow id="Pt0.A1.E9.m1.3.3.1" xref="Pt0.A1.E9.m1.3.3.1.1.cmml"><mrow id="Pt0.A1.E9.m1.3.3.1.1" xref="Pt0.A1.E9.m1.3.3.1.1.cmml"><msub id="Pt0.A1.E9.m1.3.3.1.1.2" xref="Pt0.A1.E9.m1.3.3.1.1.2.cmml"><mi id="Pt0.A1.E9.m1.3.3.1.1.2.2" xref="Pt0.A1.E9.m1.3.3.1.1.2.2.cmml">w</mi><mi id="Pt0.A1.E9.m1.3.3.1.1.2.3" xref="Pt0.A1.E9.m1.3.3.1.1.2.3.cmml">j</mi></msub><mo id="Pt0.A1.E9.m1.3.3.1.1.1" xref="Pt0.A1.E9.m1.3.3.1.1.1.cmml">=</mo><mrow id="Pt0.A1.E9.m1.3.3.1.1.3" xref="Pt0.A1.E9.m1.3.3.1.1.3.cmml"><mi id="Pt0.A1.E9.m1.3.3.1.1.3.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.2.cmml">w</mi><mo id="Pt0.A1.E9.m1.3.3.1.1.3.1" xref="Pt0.A1.E9.m1.3.3.1.1.3.1.cmml">−</mo><mrow id="Pt0.A1.E9.m1.3.3.1.1.3.3" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.cmml"><mfrac id="Pt0.A1.E9.m1.1.1" xref="Pt0.A1.E9.m1.1.1.cmml"><mi id="Pt0.A1.E9.m1.1.1.3" xref="Pt0.A1.E9.m1.1.1.3.cmml">η</mi><mrow id="Pt0.A1.E9.m1.1.1.1.1" xref="Pt0.A1.E9.m1.1.1.1.2.cmml"><mo stretchy="false" id="Pt0.A1.E9.m1.1.1.1.1.2" xref="Pt0.A1.E9.m1.1.1.1.2.1.cmml">|</mo><msub id="Pt0.A1.E9.m1.1.1.1.1.1" xref="Pt0.A1.E9.m1.1.1.1.1.1.cmml"><mi id="Pt0.A1.E9.m1.1.1.1.1.1.2" xref="Pt0.A1.E9.m1.1.1.1.1.1.2.cmml">P</mi><mi id="Pt0.A1.E9.m1.1.1.1.1.1.3" xref="Pt0.A1.E9.m1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="Pt0.A1.E9.m1.1.1.1.1.3" xref="Pt0.A1.E9.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E9.m1.3.3.1.1.3.3.1" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.1.cmml">​</mo><mrow id="Pt0.A1.E9.m1.3.3.1.1.3.3.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.cmml"><munder id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.cmml"><mo movablelimits="false" id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.2.cmml">∑</mo><mrow id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.cmml"><mi id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.2.cmml">i</mi><mo id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.1" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.1.cmml">∈</mo><msub id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.cmml"><mi id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.2.cmml">P</mi><mi id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.3" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.3.cmml">j</mi></msub></mrow></munder><mrow id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.cmml"><mrow id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.cmml"><mo rspace="0.167em" id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.1" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.cmml"><mi id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.3" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.1" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.1.cmml">​</mo><mrow id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.3.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.cmml"><mo stretchy="false" id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.3.2.1" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.cmml">(</mo><mi id="Pt0.A1.E9.m1.2.2" xref="Pt0.A1.E9.m1.2.2.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.3.2.2" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><mo lspace="0em" id="Pt0.A1.E9.m1.3.3.1.2" xref="Pt0.A1.E9.m1.3.3.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E9.m1.3b"><apply id="Pt0.A1.E9.m1.3.3.1.1.cmml" xref="Pt0.A1.E9.m1.3.3.1"><eq id="Pt0.A1.E9.m1.3.3.1.1.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.1"></eq><apply id="Pt0.A1.E9.m1.3.3.1.1.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E9.m1.3.3.1.1.2.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.2">subscript</csymbol><ci id="Pt0.A1.E9.m1.3.3.1.1.2.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.2.2">𝑤</ci><ci id="Pt0.A1.E9.m1.3.3.1.1.2.3.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.2.3">𝑗</ci></apply><apply id="Pt0.A1.E9.m1.3.3.1.1.3.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3"><minus id="Pt0.A1.E9.m1.3.3.1.1.3.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.1"></minus><ci id="Pt0.A1.E9.m1.3.3.1.1.3.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.2">𝑤</ci><apply id="Pt0.A1.E9.m1.3.3.1.1.3.3.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3"><times id="Pt0.A1.E9.m1.3.3.1.1.3.3.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.1"></times><apply id="Pt0.A1.E9.m1.1.1.cmml" xref="Pt0.A1.E9.m1.1.1"><divide id="Pt0.A1.E9.m1.1.1.2.cmml" xref="Pt0.A1.E9.m1.1.1"></divide><ci id="Pt0.A1.E9.m1.1.1.3.cmml" xref="Pt0.A1.E9.m1.1.1.3">𝜂</ci><apply id="Pt0.A1.E9.m1.1.1.1.2.cmml" xref="Pt0.A1.E9.m1.1.1.1.1"><abs id="Pt0.A1.E9.m1.1.1.1.2.1.cmml" xref="Pt0.A1.E9.m1.1.1.1.1.2"></abs><apply id="Pt0.A1.E9.m1.1.1.1.1.1.cmml" xref="Pt0.A1.E9.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Pt0.A1.E9.m1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E9.m1.1.1.1.1.1">subscript</csymbol><ci id="Pt0.A1.E9.m1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E9.m1.1.1.1.1.1.2">𝑃</ci><ci id="Pt0.A1.E9.m1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E9.m1.1.1.1.1.1.3">𝑗</ci></apply></apply></apply><apply id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2"><apply id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1"><csymbol cd="ambiguous" id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1">subscript</csymbol><sum id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.2"></sum><apply id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3"><in id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.1"></in><ci id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.2">𝑖</ci><apply id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3"><csymbol cd="ambiguous" id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3">subscript</csymbol><ci id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.2">𝑃</ci><ci id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.3.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.1.3.3.3">𝑗</ci></apply></apply></apply><apply id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2"><times id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.1"></times><apply id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2"><ci id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.1">∇</ci><apply id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.1.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2">subscript</csymbol><ci id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.2.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.3.cmml" xref="Pt0.A1.E9.m1.3.3.1.1.3.3.2.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E9.m1.2.2.cmml" xref="Pt0.A1.E9.m1.2.2">𝑤</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E9.m1.3c">w_{j}=w-\frac{\eta}{|P_{j}|}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(9)</span></td>
</tr></tbody>
</table>
</div>
<div id="Pt0.A1.p9" class="ltx_para">
<p id="Pt0.A1.p9.1" class="ltx_p">On the server, the weights of the global model are updated. The original equation can be reformulated in a few steps:</p>
</div>
<div id="Pt0.A1.p10" class="ltx_para">
<table id="Pt0.A1.EGx1" class="ltx_equationgroup ltx_eqn_align ltx_eqn_table">

<tbody id="Pt0.A1.E10"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="Pt0.A1.E10.m1.1" class="ltx_Math" alttext="\displaystyle w:=" display="inline"><semantics id="Pt0.A1.E10.m1.1a"><mrow id="Pt0.A1.E10.m1.1.1" xref="Pt0.A1.E10.m1.1.1.cmml"><mi id="Pt0.A1.E10.m1.1.1.2" xref="Pt0.A1.E10.m1.1.1.2.cmml">w</mi><mo lspace="0.278em" rspace="0.278em" id="Pt0.A1.E10.m1.1.1.1" xref="Pt0.A1.E10.m1.1.1.1.cmml">:=</mo><mi id="Pt0.A1.E10.m1.1.1.3" xref="Pt0.A1.E10.m1.1.1.3.cmml"></mi></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E10.m1.1b"><apply id="Pt0.A1.E10.m1.1.1.cmml" xref="Pt0.A1.E10.m1.1.1"><csymbol cd="latexml" id="Pt0.A1.E10.m1.1.1.1.cmml" xref="Pt0.A1.E10.m1.1.1.1">assign</csymbol><ci id="Pt0.A1.E10.m1.1.1.2.cmml" xref="Pt0.A1.E10.m1.1.1.2">𝑤</ci><csymbol cd="latexml" id="Pt0.A1.E10.m1.1.1.3.cmml" xref="Pt0.A1.E10.m1.1.1.3">absent</csymbol></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E10.m1.1c">\displaystyle w:=</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="Pt0.A1.E10.m2.1" class="ltx_Math" alttext="\displaystyle\frac{1}{n}\left(\displaystyle\sum_{j=1}^{k}w_{j}|P_{j}|\right)" display="inline"><semantics id="Pt0.A1.E10.m2.1a"><mrow id="Pt0.A1.E10.m2.1.1" xref="Pt0.A1.E10.m2.1.1.cmml"><mstyle displaystyle="true" id="Pt0.A1.E10.m2.1.1.3" xref="Pt0.A1.E10.m2.1.1.3.cmml"><mfrac id="Pt0.A1.E10.m2.1.1.3a" xref="Pt0.A1.E10.m2.1.1.3.cmml"><mn id="Pt0.A1.E10.m2.1.1.3.2" xref="Pt0.A1.E10.m2.1.1.3.2.cmml">1</mn><mi id="Pt0.A1.E10.m2.1.1.3.3" xref="Pt0.A1.E10.m2.1.1.3.3.cmml">n</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="Pt0.A1.E10.m2.1.1.2" xref="Pt0.A1.E10.m2.1.1.2.cmml">​</mo><mrow id="Pt0.A1.E10.m2.1.1.1.1" xref="Pt0.A1.E10.m2.1.1.1.1.1.cmml"><mo id="Pt0.A1.E10.m2.1.1.1.1.2" xref="Pt0.A1.E10.m2.1.1.1.1.1.cmml">(</mo><mrow id="Pt0.A1.E10.m2.1.1.1.1.1" xref="Pt0.A1.E10.m2.1.1.1.1.1.cmml"><mstyle displaystyle="true" id="Pt0.A1.E10.m2.1.1.1.1.1.2" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.cmml"><munderover id="Pt0.A1.E10.m2.1.1.1.1.1.2a" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.cmml"><mo movablelimits="false" id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.2" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.cmml"><mi id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.2" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.2.cmml">j</mi><mo id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.1" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.3" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E10.m2.1.1.1.1.1.2.3" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.3.cmml">k</mi></munderover></mstyle><mrow id="Pt0.A1.E10.m2.1.1.1.1.1.1" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.cmml"><msub id="Pt0.A1.E10.m2.1.1.1.1.1.1.3" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.3.cmml"><mi id="Pt0.A1.E10.m2.1.1.1.1.1.1.3.2" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.3.2.cmml">w</mi><mi id="Pt0.A1.E10.m2.1.1.1.1.1.1.3.3" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.3.3.cmml">j</mi></msub><mo lspace="0em" rspace="0em" id="Pt0.A1.E10.m2.1.1.1.1.1.1.2" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.2.cmml">​</mo><mrow id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.2" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.2.1.cmml">|</mo><msub id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.cmml"><mi id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.2" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.2.cmml">P</mi><mi id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.3" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.3" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.2.1.cmml">|</mo></mrow></mrow></mrow><mo id="Pt0.A1.E10.m2.1.1.1.1.3" xref="Pt0.A1.E10.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E10.m2.1b"><apply id="Pt0.A1.E10.m2.1.1.cmml" xref="Pt0.A1.E10.m2.1.1"><times id="Pt0.A1.E10.m2.1.1.2.cmml" xref="Pt0.A1.E10.m2.1.1.2"></times><apply id="Pt0.A1.E10.m2.1.1.3.cmml" xref="Pt0.A1.E10.m2.1.1.3"><divide id="Pt0.A1.E10.m2.1.1.3.1.cmml" xref="Pt0.A1.E10.m2.1.1.3"></divide><cn type="integer" id="Pt0.A1.E10.m2.1.1.3.2.cmml" xref="Pt0.A1.E10.m2.1.1.3.2">1</cn><ci id="Pt0.A1.E10.m2.1.1.3.3.cmml" xref="Pt0.A1.E10.m2.1.1.3.3">𝑛</ci></apply><apply id="Pt0.A1.E10.m2.1.1.1.1.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1"><apply id="Pt0.A1.E10.m2.1.1.1.1.1.2.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E10.m2.1.1.1.1.1.2.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2">superscript</csymbol><apply id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2">subscript</csymbol><sum id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.2.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.2"></sum><apply id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3"><eq id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.1"></eq><ci id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.2.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.2">𝑗</ci><cn type="integer" id="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.3.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E10.m2.1.1.1.1.1.2.3.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.2.3">𝑘</ci></apply><apply id="Pt0.A1.E10.m2.1.1.1.1.1.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1"><times id="Pt0.A1.E10.m2.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.2"></times><apply id="Pt0.A1.E10.m2.1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="Pt0.A1.E10.m2.1.1.1.1.1.1.3.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.3">subscript</csymbol><ci id="Pt0.A1.E10.m2.1.1.1.1.1.1.3.2.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.3.2">𝑤</ci><ci id="Pt0.A1.E10.m2.1.1.1.1.1.1.3.3.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.3.3">𝑗</ci></apply><apply id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1"><abs id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.2.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.2"></abs><apply id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.2">𝑃</ci><ci id="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E10.m2.1.1.1.1.1.1.1.1.1.3">𝑗</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E10.m2.1c">\displaystyle\frac{1}{n}\left(\displaystyle\sum_{j=1}^{k}w_{j}|P_{j}|\right)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(10)</span></td>
</tr></tbody>
<tbody id="Pt0.A1.E11"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="Pt0.A1.E11.m1.1" class="ltx_Math" alttext="\displaystyle=" display="inline"><semantics id="Pt0.A1.E11.m1.1a"><mo id="Pt0.A1.E11.m1.1.1" xref="Pt0.A1.E11.m1.1.1.cmml">=</mo><annotation-xml encoding="MathML-Content" id="Pt0.A1.E11.m1.1b"><eq id="Pt0.A1.E11.m1.1.1.cmml" xref="Pt0.A1.E11.m1.1.1"></eq></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E11.m1.1c">\displaystyle=</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="Pt0.A1.E11.m2.4" class="ltx_Math" alttext="\displaystyle\frac{1}{n}\displaystyle\sum_{j=1}^{k}\left(w-\frac{\eta}{|P_{j}|}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w)\right)|P_{j}|" display="inline"><semantics id="Pt0.A1.E11.m2.4a"><mrow id="Pt0.A1.E11.m2.4.4" xref="Pt0.A1.E11.m2.4.4.cmml"><mstyle displaystyle="true" id="Pt0.A1.E11.m2.4.4.4" xref="Pt0.A1.E11.m2.4.4.4.cmml"><mfrac id="Pt0.A1.E11.m2.4.4.4a" xref="Pt0.A1.E11.m2.4.4.4.cmml"><mn id="Pt0.A1.E11.m2.4.4.4.2" xref="Pt0.A1.E11.m2.4.4.4.2.cmml">1</mn><mi id="Pt0.A1.E11.m2.4.4.4.3" xref="Pt0.A1.E11.m2.4.4.4.3.cmml">n</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="Pt0.A1.E11.m2.4.4.3" xref="Pt0.A1.E11.m2.4.4.3.cmml">​</mo><mrow id="Pt0.A1.E11.m2.4.4.2" xref="Pt0.A1.E11.m2.4.4.2.cmml"><mstyle displaystyle="true" id="Pt0.A1.E11.m2.4.4.2.3" xref="Pt0.A1.E11.m2.4.4.2.3.cmml"><munderover id="Pt0.A1.E11.m2.4.4.2.3a" xref="Pt0.A1.E11.m2.4.4.2.3.cmml"><mo movablelimits="false" id="Pt0.A1.E11.m2.4.4.2.3.2.2" xref="Pt0.A1.E11.m2.4.4.2.3.2.2.cmml">∑</mo><mrow id="Pt0.A1.E11.m2.4.4.2.3.2.3" xref="Pt0.A1.E11.m2.4.4.2.3.2.3.cmml"><mi id="Pt0.A1.E11.m2.4.4.2.3.2.3.2" xref="Pt0.A1.E11.m2.4.4.2.3.2.3.2.cmml">j</mi><mo id="Pt0.A1.E11.m2.4.4.2.3.2.3.1" xref="Pt0.A1.E11.m2.4.4.2.3.2.3.1.cmml">=</mo><mn id="Pt0.A1.E11.m2.4.4.2.3.2.3.3" xref="Pt0.A1.E11.m2.4.4.2.3.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E11.m2.4.4.2.3.3" xref="Pt0.A1.E11.m2.4.4.2.3.3.cmml">k</mi></munderover></mstyle><mrow id="Pt0.A1.E11.m2.4.4.2.2" xref="Pt0.A1.E11.m2.4.4.2.2.cmml"><mrow id="Pt0.A1.E11.m2.3.3.1.1.1.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.cmml"><mo id="Pt0.A1.E11.m2.3.3.1.1.1.1.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.cmml">(</mo><mrow id="Pt0.A1.E11.m2.3.3.1.1.1.1.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.cmml"><mi id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.2.cmml">w</mi><mo id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.1.cmml">−</mo><mrow id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.cmml"><mstyle displaystyle="true" id="Pt0.A1.E11.m2.1.1" xref="Pt0.A1.E11.m2.1.1.cmml"><mfrac id="Pt0.A1.E11.m2.1.1a" xref="Pt0.A1.E11.m2.1.1.cmml"><mi id="Pt0.A1.E11.m2.1.1.3" xref="Pt0.A1.E11.m2.1.1.3.cmml">η</mi><mrow id="Pt0.A1.E11.m2.1.1.1.1" xref="Pt0.A1.E11.m2.1.1.1.2.cmml"><mo stretchy="false" id="Pt0.A1.E11.m2.1.1.1.1.2" xref="Pt0.A1.E11.m2.1.1.1.2.1.cmml">|</mo><msub id="Pt0.A1.E11.m2.1.1.1.1.1" xref="Pt0.A1.E11.m2.1.1.1.1.1.cmml"><mi id="Pt0.A1.E11.m2.1.1.1.1.1.2" xref="Pt0.A1.E11.m2.1.1.1.1.1.2.cmml">P</mi><mi id="Pt0.A1.E11.m2.1.1.1.1.1.3" xref="Pt0.A1.E11.m2.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="Pt0.A1.E11.m2.1.1.1.1.3" xref="Pt0.A1.E11.m2.1.1.1.2.1.cmml">|</mo></mrow></mfrac></mstyle><mo lspace="0em" rspace="0em" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.1.cmml">​</mo><mrow id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.cmml"><mstyle displaystyle="true" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.cmml"><munder id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1a" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.cmml"><mo movablelimits="false" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.2.cmml">∑</mo><mrow id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.cmml"><mi id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.2.cmml">i</mi><mo id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.1.cmml">∈</mo><msub id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.cmml"><mi id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.2.cmml">P</mi><mi id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.3" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.3.cmml">j</mi></msub></mrow></munder></mstyle><mrow id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.cmml"><mrow id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.cmml"><mo lspace="0.167em" rspace="0.167em" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.cmml"><mi id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.3" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.1.cmml">​</mo><mrow id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.3.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.cmml"><mo stretchy="false" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.3.2.1" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.cmml">(</mo><mi id="Pt0.A1.E11.m2.2.2" xref="Pt0.A1.E11.m2.2.2.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.3.2.2" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="Pt0.A1.E11.m2.3.3.1.1.1.1.3" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.cmml">)</mo></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E11.m2.4.4.2.2.3" xref="Pt0.A1.E11.m2.4.4.2.2.3.cmml">​</mo><mrow id="Pt0.A1.E11.m2.4.4.2.2.2.1" xref="Pt0.A1.E11.m2.4.4.2.2.2.2.cmml"><mo stretchy="false" id="Pt0.A1.E11.m2.4.4.2.2.2.1.2" xref="Pt0.A1.E11.m2.4.4.2.2.2.2.1.cmml">|</mo><msub id="Pt0.A1.E11.m2.4.4.2.2.2.1.1" xref="Pt0.A1.E11.m2.4.4.2.2.2.1.1.cmml"><mi id="Pt0.A1.E11.m2.4.4.2.2.2.1.1.2" xref="Pt0.A1.E11.m2.4.4.2.2.2.1.1.2.cmml">P</mi><mi id="Pt0.A1.E11.m2.4.4.2.2.2.1.1.3" xref="Pt0.A1.E11.m2.4.4.2.2.2.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="Pt0.A1.E11.m2.4.4.2.2.2.1.3" xref="Pt0.A1.E11.m2.4.4.2.2.2.2.1.cmml">|</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E11.m2.4b"><apply id="Pt0.A1.E11.m2.4.4.cmml" xref="Pt0.A1.E11.m2.4.4"><times id="Pt0.A1.E11.m2.4.4.3.cmml" xref="Pt0.A1.E11.m2.4.4.3"></times><apply id="Pt0.A1.E11.m2.4.4.4.cmml" xref="Pt0.A1.E11.m2.4.4.4"><divide id="Pt0.A1.E11.m2.4.4.4.1.cmml" xref="Pt0.A1.E11.m2.4.4.4"></divide><cn type="integer" id="Pt0.A1.E11.m2.4.4.4.2.cmml" xref="Pt0.A1.E11.m2.4.4.4.2">1</cn><ci id="Pt0.A1.E11.m2.4.4.4.3.cmml" xref="Pt0.A1.E11.m2.4.4.4.3">𝑛</ci></apply><apply id="Pt0.A1.E11.m2.4.4.2.cmml" xref="Pt0.A1.E11.m2.4.4.2"><apply id="Pt0.A1.E11.m2.4.4.2.3.cmml" xref="Pt0.A1.E11.m2.4.4.2.3"><csymbol cd="ambiguous" id="Pt0.A1.E11.m2.4.4.2.3.1.cmml" xref="Pt0.A1.E11.m2.4.4.2.3">superscript</csymbol><apply id="Pt0.A1.E11.m2.4.4.2.3.2.cmml" xref="Pt0.A1.E11.m2.4.4.2.3"><csymbol cd="ambiguous" id="Pt0.A1.E11.m2.4.4.2.3.2.1.cmml" xref="Pt0.A1.E11.m2.4.4.2.3">subscript</csymbol><sum id="Pt0.A1.E11.m2.4.4.2.3.2.2.cmml" xref="Pt0.A1.E11.m2.4.4.2.3.2.2"></sum><apply id="Pt0.A1.E11.m2.4.4.2.3.2.3.cmml" xref="Pt0.A1.E11.m2.4.4.2.3.2.3"><eq id="Pt0.A1.E11.m2.4.4.2.3.2.3.1.cmml" xref="Pt0.A1.E11.m2.4.4.2.3.2.3.1"></eq><ci id="Pt0.A1.E11.m2.4.4.2.3.2.3.2.cmml" xref="Pt0.A1.E11.m2.4.4.2.3.2.3.2">𝑗</ci><cn type="integer" id="Pt0.A1.E11.m2.4.4.2.3.2.3.3.cmml" xref="Pt0.A1.E11.m2.4.4.2.3.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E11.m2.4.4.2.3.3.cmml" xref="Pt0.A1.E11.m2.4.4.2.3.3">𝑘</ci></apply><apply id="Pt0.A1.E11.m2.4.4.2.2.cmml" xref="Pt0.A1.E11.m2.4.4.2.2"><times id="Pt0.A1.E11.m2.4.4.2.2.3.cmml" xref="Pt0.A1.E11.m2.4.4.2.2.3"></times><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1"><minus id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.1"></minus><ci id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.2">𝑤</ci><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3"><times id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.1"></times><apply id="Pt0.A1.E11.m2.1.1.cmml" xref="Pt0.A1.E11.m2.1.1"><divide id="Pt0.A1.E11.m2.1.1.2.cmml" xref="Pt0.A1.E11.m2.1.1"></divide><ci id="Pt0.A1.E11.m2.1.1.3.cmml" xref="Pt0.A1.E11.m2.1.1.3">𝜂</ci><apply id="Pt0.A1.E11.m2.1.1.1.2.cmml" xref="Pt0.A1.E11.m2.1.1.1.1"><abs id="Pt0.A1.E11.m2.1.1.1.2.1.cmml" xref="Pt0.A1.E11.m2.1.1.1.1.2"></abs><apply id="Pt0.A1.E11.m2.1.1.1.1.1.cmml" xref="Pt0.A1.E11.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="Pt0.A1.E11.m2.1.1.1.1.1.1.cmml" xref="Pt0.A1.E11.m2.1.1.1.1.1">subscript</csymbol><ci id="Pt0.A1.E11.m2.1.1.1.1.1.2.cmml" xref="Pt0.A1.E11.m2.1.1.1.1.1.2">𝑃</ci><ci id="Pt0.A1.E11.m2.1.1.1.1.1.3.cmml" xref="Pt0.A1.E11.m2.1.1.1.1.1.3">𝑗</ci></apply></apply></apply><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2"><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1"><csymbol cd="ambiguous" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1">subscript</csymbol><sum id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.2"></sum><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3"><in id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.1"></in><ci id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.2">𝑖</ci><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3"><csymbol cd="ambiguous" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3">subscript</csymbol><ci id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.2">𝑃</ci><ci id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.3.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.1.3.3.3">𝑗</ci></apply></apply></apply><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2"><times id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.1"></times><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2"><ci id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.1">∇</ci><apply id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.1.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2">subscript</csymbol><ci id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.2.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.3.cmml" xref="Pt0.A1.E11.m2.3.3.1.1.1.1.1.3.2.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E11.m2.2.2.cmml" xref="Pt0.A1.E11.m2.2.2">𝑤</ci></apply></apply></apply></apply><apply id="Pt0.A1.E11.m2.4.4.2.2.2.2.cmml" xref="Pt0.A1.E11.m2.4.4.2.2.2.1"><abs id="Pt0.A1.E11.m2.4.4.2.2.2.2.1.cmml" xref="Pt0.A1.E11.m2.4.4.2.2.2.1.2"></abs><apply id="Pt0.A1.E11.m2.4.4.2.2.2.1.1.cmml" xref="Pt0.A1.E11.m2.4.4.2.2.2.1.1"><csymbol cd="ambiguous" id="Pt0.A1.E11.m2.4.4.2.2.2.1.1.1.cmml" xref="Pt0.A1.E11.m2.4.4.2.2.2.1.1">subscript</csymbol><ci id="Pt0.A1.E11.m2.4.4.2.2.2.1.1.2.cmml" xref="Pt0.A1.E11.m2.4.4.2.2.2.1.1.2">𝑃</ci><ci id="Pt0.A1.E11.m2.4.4.2.2.2.1.1.3.cmml" xref="Pt0.A1.E11.m2.4.4.2.2.2.1.1.3">𝑗</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E11.m2.4c">\displaystyle\frac{1}{n}\displaystyle\sum_{j=1}^{k}\left(w-\frac{\eta}{|P_{j}|}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w)\right)|P_{j}|</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(11)</span></td>
</tr></tbody>
<tbody id="Pt0.A1.E12"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="Pt0.A1.E12.m1.1" class="ltx_Math" alttext="\displaystyle=" display="inline"><semantics id="Pt0.A1.E12.m1.1a"><mo id="Pt0.A1.E12.m1.1.1" xref="Pt0.A1.E12.m1.1.1.cmml">=</mo><annotation-xml encoding="MathML-Content" id="Pt0.A1.E12.m1.1b"><eq id="Pt0.A1.E12.m1.1.1.cmml" xref="Pt0.A1.E12.m1.1.1"></eq></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E12.m1.1c">\displaystyle=</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="Pt0.A1.E12.m2.2" class="ltx_Math" alttext="\displaystyle\frac{1}{n}\displaystyle\sum_{j=1}^{k}|P_{j}|w-\frac{1}{n}\eta\displaystyle\sum_{j=1}^{k}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w)" display="inline"><semantics id="Pt0.A1.E12.m2.2a"><mrow id="Pt0.A1.E12.m2.2.2" xref="Pt0.A1.E12.m2.2.2.cmml"><mrow id="Pt0.A1.E12.m2.2.2.1" xref="Pt0.A1.E12.m2.2.2.1.cmml"><mstyle displaystyle="true" id="Pt0.A1.E12.m2.2.2.1.3" xref="Pt0.A1.E12.m2.2.2.1.3.cmml"><mfrac id="Pt0.A1.E12.m2.2.2.1.3a" xref="Pt0.A1.E12.m2.2.2.1.3.cmml"><mn id="Pt0.A1.E12.m2.2.2.1.3.2" xref="Pt0.A1.E12.m2.2.2.1.3.2.cmml">1</mn><mi id="Pt0.A1.E12.m2.2.2.1.3.3" xref="Pt0.A1.E12.m2.2.2.1.3.3.cmml">n</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="Pt0.A1.E12.m2.2.2.1.2" xref="Pt0.A1.E12.m2.2.2.1.2.cmml">​</mo><mrow id="Pt0.A1.E12.m2.2.2.1.1" xref="Pt0.A1.E12.m2.2.2.1.1.cmml"><mstyle displaystyle="true" id="Pt0.A1.E12.m2.2.2.1.1.2" xref="Pt0.A1.E12.m2.2.2.1.1.2.cmml"><munderover id="Pt0.A1.E12.m2.2.2.1.1.2a" xref="Pt0.A1.E12.m2.2.2.1.1.2.cmml"><mo movablelimits="false" id="Pt0.A1.E12.m2.2.2.1.1.2.2.2" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.2.cmml">∑</mo><mrow id="Pt0.A1.E12.m2.2.2.1.1.2.2.3" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.3.cmml"><mi id="Pt0.A1.E12.m2.2.2.1.1.2.2.3.2" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.3.2.cmml">j</mi><mo id="Pt0.A1.E12.m2.2.2.1.1.2.2.3.1" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.3.1.cmml">=</mo><mn id="Pt0.A1.E12.m2.2.2.1.1.2.2.3.3" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E12.m2.2.2.1.1.2.3" xref="Pt0.A1.E12.m2.2.2.1.1.2.3.cmml">k</mi></munderover></mstyle><mrow id="Pt0.A1.E12.m2.2.2.1.1.1" xref="Pt0.A1.E12.m2.2.2.1.1.1.cmml"><mrow id="Pt0.A1.E12.m2.2.2.1.1.1.1.1" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.2.cmml"><mo stretchy="false" id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.2" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.2.1.cmml">|</mo><msub id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.cmml"><mi id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.2" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.2.cmml">P</mi><mi id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.3" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.3" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.2.1.cmml">|</mo></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E12.m2.2.2.1.1.1.2" xref="Pt0.A1.E12.m2.2.2.1.1.1.2.cmml">​</mo><mi id="Pt0.A1.E12.m2.2.2.1.1.1.3" xref="Pt0.A1.E12.m2.2.2.1.1.1.3.cmml">w</mi></mrow></mrow></mrow><mo id="Pt0.A1.E12.m2.2.2.2" xref="Pt0.A1.E12.m2.2.2.2.cmml">−</mo><mrow id="Pt0.A1.E12.m2.2.2.3" xref="Pt0.A1.E12.m2.2.2.3.cmml"><mstyle displaystyle="true" id="Pt0.A1.E12.m2.2.2.3.2" xref="Pt0.A1.E12.m2.2.2.3.2.cmml"><mfrac id="Pt0.A1.E12.m2.2.2.3.2a" xref="Pt0.A1.E12.m2.2.2.3.2.cmml"><mn id="Pt0.A1.E12.m2.2.2.3.2.2" xref="Pt0.A1.E12.m2.2.2.3.2.2.cmml">1</mn><mi id="Pt0.A1.E12.m2.2.2.3.2.3" xref="Pt0.A1.E12.m2.2.2.3.2.3.cmml">n</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="Pt0.A1.E12.m2.2.2.3.1" xref="Pt0.A1.E12.m2.2.2.3.1.cmml">​</mo><mi id="Pt0.A1.E12.m2.2.2.3.3" xref="Pt0.A1.E12.m2.2.2.3.3.cmml">η</mi><mo lspace="0em" rspace="0em" id="Pt0.A1.E12.m2.2.2.3.1a" xref="Pt0.A1.E12.m2.2.2.3.1.cmml">​</mo><mrow id="Pt0.A1.E12.m2.2.2.3.4" xref="Pt0.A1.E12.m2.2.2.3.4.cmml"><mstyle displaystyle="true" id="Pt0.A1.E12.m2.2.2.3.4.1" xref="Pt0.A1.E12.m2.2.2.3.4.1.cmml"><munderover id="Pt0.A1.E12.m2.2.2.3.4.1a" xref="Pt0.A1.E12.m2.2.2.3.4.1.cmml"><mo movablelimits="false" id="Pt0.A1.E12.m2.2.2.3.4.1.2.2" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.2.cmml">∑</mo><mrow id="Pt0.A1.E12.m2.2.2.3.4.1.2.3" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.3.cmml"><mi id="Pt0.A1.E12.m2.2.2.3.4.1.2.3.2" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.3.2.cmml">j</mi><mo id="Pt0.A1.E12.m2.2.2.3.4.1.2.3.1" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.3.1.cmml">=</mo><mn id="Pt0.A1.E12.m2.2.2.3.4.1.2.3.3" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E12.m2.2.2.3.4.1.3" xref="Pt0.A1.E12.m2.2.2.3.4.1.3.cmml">k</mi></munderover></mstyle><mrow id="Pt0.A1.E12.m2.2.2.3.4.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.cmml"><mstyle displaystyle="true" id="Pt0.A1.E12.m2.2.2.3.4.2.1" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.cmml"><munder id="Pt0.A1.E12.m2.2.2.3.4.2.1a" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.cmml"><mo movablelimits="false" id="Pt0.A1.E12.m2.2.2.3.4.2.1.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.2.cmml">∑</mo><mrow id="Pt0.A1.E12.m2.2.2.3.4.2.1.3" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.cmml"><mi id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.2.cmml">i</mi><mo id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.1" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.1.cmml">∈</mo><msub id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.cmml"><mi id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.2.cmml">P</mi><mi id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.3" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.3.cmml">j</mi></msub></mrow></munder></mstyle><mrow id="Pt0.A1.E12.m2.2.2.3.4.2.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.cmml"><mrow id="Pt0.A1.E12.m2.2.2.3.4.2.2.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.cmml"><mo lspace="0.167em" rspace="0.167em" id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.1" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.cmml"><mi id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.3" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E12.m2.2.2.3.4.2.2.1" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.1.cmml">​</mo><mrow id="Pt0.A1.E12.m2.2.2.3.4.2.2.3.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.cmml"><mo stretchy="false" id="Pt0.A1.E12.m2.2.2.3.4.2.2.3.2.1" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.cmml">(</mo><mi id="Pt0.A1.E12.m2.1.1" xref="Pt0.A1.E12.m2.1.1.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E12.m2.2.2.3.4.2.2.3.2.2" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E12.m2.2b"><apply id="Pt0.A1.E12.m2.2.2.cmml" xref="Pt0.A1.E12.m2.2.2"><minus id="Pt0.A1.E12.m2.2.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.2"></minus><apply id="Pt0.A1.E12.m2.2.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.1"><times id="Pt0.A1.E12.m2.2.2.1.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.2"></times><apply id="Pt0.A1.E12.m2.2.2.1.3.cmml" xref="Pt0.A1.E12.m2.2.2.1.3"><divide id="Pt0.A1.E12.m2.2.2.1.3.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.3"></divide><cn type="integer" id="Pt0.A1.E12.m2.2.2.1.3.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.3.2">1</cn><ci id="Pt0.A1.E12.m2.2.2.1.3.3.cmml" xref="Pt0.A1.E12.m2.2.2.1.3.3">𝑛</ci></apply><apply id="Pt0.A1.E12.m2.2.2.1.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.1"><apply id="Pt0.A1.E12.m2.2.2.1.1.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E12.m2.2.2.1.1.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2">superscript</csymbol><apply id="Pt0.A1.E12.m2.2.2.1.1.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E12.m2.2.2.1.1.2.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2">subscript</csymbol><sum id="Pt0.A1.E12.m2.2.2.1.1.2.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.2"></sum><apply id="Pt0.A1.E12.m2.2.2.1.1.2.2.3.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.3"><eq id="Pt0.A1.E12.m2.2.2.1.1.2.2.3.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.3.1"></eq><ci id="Pt0.A1.E12.m2.2.2.1.1.2.2.3.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.3.2">𝑗</ci><cn type="integer" id="Pt0.A1.E12.m2.2.2.1.1.2.2.3.3.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E12.m2.2.2.1.1.2.3.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.2.3">𝑘</ci></apply><apply id="Pt0.A1.E12.m2.2.2.1.1.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1"><times id="Pt0.A1.E12.m2.2.2.1.1.1.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1.2"></times><apply id="Pt0.A1.E12.m2.2.2.1.1.1.1.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1"><abs id="Pt0.A1.E12.m2.2.2.1.1.1.1.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1.2"></abs><apply id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.2">𝑃</ci><ci id="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1.1.1.1.3">𝑗</ci></apply></apply><ci id="Pt0.A1.E12.m2.2.2.1.1.1.3.cmml" xref="Pt0.A1.E12.m2.2.2.1.1.1.3">𝑤</ci></apply></apply></apply><apply id="Pt0.A1.E12.m2.2.2.3.cmml" xref="Pt0.A1.E12.m2.2.2.3"><times id="Pt0.A1.E12.m2.2.2.3.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.1"></times><apply id="Pt0.A1.E12.m2.2.2.3.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.2"><divide id="Pt0.A1.E12.m2.2.2.3.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.2"></divide><cn type="integer" id="Pt0.A1.E12.m2.2.2.3.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.2.2">1</cn><ci id="Pt0.A1.E12.m2.2.2.3.2.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.2.3">𝑛</ci></apply><ci id="Pt0.A1.E12.m2.2.2.3.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.3">𝜂</ci><apply id="Pt0.A1.E12.m2.2.2.3.4.cmml" xref="Pt0.A1.E12.m2.2.2.3.4"><apply id="Pt0.A1.E12.m2.2.2.3.4.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1"><csymbol cd="ambiguous" id="Pt0.A1.E12.m2.2.2.3.4.1.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1">superscript</csymbol><apply id="Pt0.A1.E12.m2.2.2.3.4.1.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1"><csymbol cd="ambiguous" id="Pt0.A1.E12.m2.2.2.3.4.1.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1">subscript</csymbol><sum id="Pt0.A1.E12.m2.2.2.3.4.1.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.2"></sum><apply id="Pt0.A1.E12.m2.2.2.3.4.1.2.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.3"><eq id="Pt0.A1.E12.m2.2.2.3.4.1.2.3.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.3.1"></eq><ci id="Pt0.A1.E12.m2.2.2.3.4.1.2.3.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.3.2">𝑗</ci><cn type="integer" id="Pt0.A1.E12.m2.2.2.3.4.1.2.3.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E12.m2.2.2.3.4.1.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.1.3">𝑘</ci></apply><apply id="Pt0.A1.E12.m2.2.2.3.4.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2"><apply id="Pt0.A1.E12.m2.2.2.3.4.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1"><csymbol cd="ambiguous" id="Pt0.A1.E12.m2.2.2.3.4.2.1.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1">subscript</csymbol><sum id="Pt0.A1.E12.m2.2.2.3.4.2.1.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.2"></sum><apply id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3"><in id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.1"></in><ci id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.2">𝑖</ci><apply id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3"><csymbol cd="ambiguous" id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3">subscript</csymbol><ci id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.2">𝑃</ci><ci id="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.1.3.3.3">𝑗</ci></apply></apply></apply><apply id="Pt0.A1.E12.m2.2.2.3.4.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.2"><times id="Pt0.A1.E12.m2.2.2.3.4.2.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.1"></times><apply id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2"><ci id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.1">∇</ci><apply id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.1.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2">subscript</csymbol><ci id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.2.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.3.cmml" xref="Pt0.A1.E12.m2.2.2.3.4.2.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E12.m2.1.1.cmml" xref="Pt0.A1.E12.m2.1.1">𝑤</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E12.m2.2c">\displaystyle\frac{1}{n}\displaystyle\sum_{j=1}^{k}|P_{j}|w-\frac{1}{n}\eta\displaystyle\sum_{j=1}^{k}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w)</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(12)</span></td>
</tr></tbody>
<tbody id="Pt0.A1.E13"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="Pt0.A1.E13.m1.1" class="ltx_Math" alttext="\displaystyle=" display="inline"><semantics id="Pt0.A1.E13.m1.1a"><mo id="Pt0.A1.E13.m1.1.1" xref="Pt0.A1.E13.m1.1.1.cmml">=</mo><annotation-xml encoding="MathML-Content" id="Pt0.A1.E13.m1.1b"><eq id="Pt0.A1.E13.m1.1.1.cmml" xref="Pt0.A1.E13.m1.1.1"></eq></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E13.m1.1c">\displaystyle=</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math id="Pt0.A1.E13.m2.2" class="ltx_Math" alttext="\displaystyle w-\frac{\eta}{n}\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w)." display="inline"><semantics id="Pt0.A1.E13.m2.2a"><mrow id="Pt0.A1.E13.m2.2.2.1" xref="Pt0.A1.E13.m2.2.2.1.1.cmml"><mrow id="Pt0.A1.E13.m2.2.2.1.1" xref="Pt0.A1.E13.m2.2.2.1.1.cmml"><mi id="Pt0.A1.E13.m2.2.2.1.1.2" xref="Pt0.A1.E13.m2.2.2.1.1.2.cmml">w</mi><mo id="Pt0.A1.E13.m2.2.2.1.1.1" xref="Pt0.A1.E13.m2.2.2.1.1.1.cmml">−</mo><mrow id="Pt0.A1.E13.m2.2.2.1.1.3" xref="Pt0.A1.E13.m2.2.2.1.1.3.cmml"><mstyle displaystyle="true" id="Pt0.A1.E13.m2.2.2.1.1.3.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.2.cmml"><mfrac id="Pt0.A1.E13.m2.2.2.1.1.3.2a" xref="Pt0.A1.E13.m2.2.2.1.1.3.2.cmml"><mi id="Pt0.A1.E13.m2.2.2.1.1.3.2.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.2.2.cmml">η</mi><mi id="Pt0.A1.E13.m2.2.2.1.1.3.2.3" xref="Pt0.A1.E13.m2.2.2.1.1.3.2.3.cmml">n</mi></mfrac></mstyle><mo lspace="0em" rspace="0em" id="Pt0.A1.E13.m2.2.2.1.1.3.1" xref="Pt0.A1.E13.m2.2.2.1.1.3.1.cmml">​</mo><mrow id="Pt0.A1.E13.m2.2.2.1.1.3.3" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.cmml"><mstyle displaystyle="true" id="Pt0.A1.E13.m2.2.2.1.1.3.3.1" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.cmml"><munderover id="Pt0.A1.E13.m2.2.2.1.1.3.3.1a" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.cmml"><mo movablelimits="false" id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.2.cmml">∑</mo><mrow id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.cmml"><mi id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.2.cmml">i</mi><mo id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.1" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.1.cmml">=</mo><mn id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.3" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.3" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.3.cmml">n</mi></munderover></mstyle><mrow id="Pt0.A1.E13.m2.2.2.1.1.3.3.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.cmml"><mrow id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.cmml"><mo lspace="0.167em" rspace="0.167em" id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.1" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.cmml"><mi id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.3" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.1" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.1.cmml">​</mo><mrow id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.3.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.cmml"><mo stretchy="false" id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.3.2.1" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.cmml">(</mo><mi id="Pt0.A1.E13.m2.1.1" xref="Pt0.A1.E13.m2.1.1.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.3.2.2" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo lspace="0em" id="Pt0.A1.E13.m2.2.2.1.2" xref="Pt0.A1.E13.m2.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E13.m2.2b"><apply id="Pt0.A1.E13.m2.2.2.1.1.cmml" xref="Pt0.A1.E13.m2.2.2.1"><minus id="Pt0.A1.E13.m2.2.2.1.1.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.1"></minus><ci id="Pt0.A1.E13.m2.2.2.1.1.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.2">𝑤</ci><apply id="Pt0.A1.E13.m2.2.2.1.1.3.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3"><times id="Pt0.A1.E13.m2.2.2.1.1.3.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.1"></times><apply id="Pt0.A1.E13.m2.2.2.1.1.3.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.2"><divide id="Pt0.A1.E13.m2.2.2.1.1.3.2.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.2"></divide><ci id="Pt0.A1.E13.m2.2.2.1.1.3.2.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.2.2">𝜂</ci><ci id="Pt0.A1.E13.m2.2.2.1.1.3.2.3.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.2.3">𝑛</ci></apply><apply id="Pt0.A1.E13.m2.2.2.1.1.3.3.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3"><apply id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1"><csymbol cd="ambiguous" id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1">superscript</csymbol><apply id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1"><csymbol cd="ambiguous" id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1">subscript</csymbol><sum id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.2"></sum><apply id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3"><eq id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.1"></eq><ci id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.2">𝑖</ci><cn type="integer" id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.3.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E13.m2.2.2.1.1.3.3.1.3.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.1.3">𝑛</ci></apply><apply id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2"><times id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.1"></times><apply id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2"><ci id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.1">∇</ci><apply id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.1.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2">subscript</csymbol><ci id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.2.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.3.cmml" xref="Pt0.A1.E13.m2.2.2.1.1.3.3.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E13.m2.1.1.cmml" xref="Pt0.A1.E13.m2.1.1">𝑤</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E13.m2.2c">\displaystyle w-\frac{\eta}{n}\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(13)</span></td>
</tr></tbody>
</table>
</div>
<div id="Pt0.A1.p11" class="ltx_para">
<p id="Pt0.A1.p11.1" class="ltx_p">The reformulation in the last line is equivalent to Equation <a href="#Pt0.A1.E6" title="In Appendix 0.A Mathematical Derivation of Federated Stochastic Gradient Descent ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> above. In case the transformation between Eq. <a href="#Pt0.A1.E12" title="In Appendix 0.A Mathematical Derivation of Federated Stochastic Gradient Descent ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">12</span></a> and Eq. <a href="#Pt0.A1.E13" title="In Appendix 0.A Mathematical Derivation of Federated Stochastic Gradient Descent ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">13</span></a> is unclear, consider that the summand simplifies to</p>
</div>
<div id="Pt0.A1.p12" class="ltx_para">
<table id="Pt0.A1.E14" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Pt0.A1.E14.m1.1" class="ltx_Math" alttext="\frac{1}{n}\displaystyle\sum_{j=1}^{k}|P_{j}|w=\frac{1}{n}nw=w." display="block"><semantics id="Pt0.A1.E14.m1.1a"><mrow id="Pt0.A1.E14.m1.1.1.1" xref="Pt0.A1.E14.m1.1.1.1.1.cmml"><mrow id="Pt0.A1.E14.m1.1.1.1.1" xref="Pt0.A1.E14.m1.1.1.1.1.cmml"><mrow id="Pt0.A1.E14.m1.1.1.1.1.1" xref="Pt0.A1.E14.m1.1.1.1.1.1.cmml"><mfrac id="Pt0.A1.E14.m1.1.1.1.1.1.3" xref="Pt0.A1.E14.m1.1.1.1.1.1.3.cmml"><mn id="Pt0.A1.E14.m1.1.1.1.1.1.3.2" xref="Pt0.A1.E14.m1.1.1.1.1.1.3.2.cmml">1</mn><mi id="Pt0.A1.E14.m1.1.1.1.1.1.3.3" xref="Pt0.A1.E14.m1.1.1.1.1.1.3.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E14.m1.1.1.1.1.1.2" xref="Pt0.A1.E14.m1.1.1.1.1.1.2.cmml">​</mo><mrow id="Pt0.A1.E14.m1.1.1.1.1.1.1" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.cmml"><munderover id="Pt0.A1.E14.m1.1.1.1.1.1.1.2" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.cmml"><mo movablelimits="false" rspace="0em" id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.2" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.2.cmml">∑</mo><mrow id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.cmml"><mi id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.2" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.2.cmml">j</mi><mo id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.1" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.1.cmml">=</mo><mn id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.3" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.3" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.3.cmml">k</mi></munderover><mrow id="Pt0.A1.E14.m1.1.1.1.1.1.1.1" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.cmml"><mrow id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.2" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.2.1.cmml">|</mo><msub id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.2" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.2.cmml">P</mi><mi id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.3" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.3.cmml">j</mi></msub><mo stretchy="false" id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.3" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.2.1.cmml">|</mo></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.2" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.2.cmml">​</mo><mi id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.3" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.3.cmml">w</mi></mrow></mrow></mrow><mo id="Pt0.A1.E14.m1.1.1.1.1.3" xref="Pt0.A1.E14.m1.1.1.1.1.3.cmml">=</mo><mrow id="Pt0.A1.E14.m1.1.1.1.1.4" xref="Pt0.A1.E14.m1.1.1.1.1.4.cmml"><mfrac id="Pt0.A1.E14.m1.1.1.1.1.4.2" xref="Pt0.A1.E14.m1.1.1.1.1.4.2.cmml"><mn id="Pt0.A1.E14.m1.1.1.1.1.4.2.2" xref="Pt0.A1.E14.m1.1.1.1.1.4.2.2.cmml">1</mn><mi id="Pt0.A1.E14.m1.1.1.1.1.4.2.3" xref="Pt0.A1.E14.m1.1.1.1.1.4.2.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E14.m1.1.1.1.1.4.1" xref="Pt0.A1.E14.m1.1.1.1.1.4.1.cmml">​</mo><mi id="Pt0.A1.E14.m1.1.1.1.1.4.3" xref="Pt0.A1.E14.m1.1.1.1.1.4.3.cmml">n</mi><mo lspace="0em" rspace="0em" id="Pt0.A1.E14.m1.1.1.1.1.4.1a" xref="Pt0.A1.E14.m1.1.1.1.1.4.1.cmml">​</mo><mi id="Pt0.A1.E14.m1.1.1.1.1.4.4" xref="Pt0.A1.E14.m1.1.1.1.1.4.4.cmml">w</mi></mrow><mo id="Pt0.A1.E14.m1.1.1.1.1.5" xref="Pt0.A1.E14.m1.1.1.1.1.5.cmml">=</mo><mi id="Pt0.A1.E14.m1.1.1.1.1.6" xref="Pt0.A1.E14.m1.1.1.1.1.6.cmml">w</mi></mrow><mo lspace="0em" id="Pt0.A1.E14.m1.1.1.1.2" xref="Pt0.A1.E14.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E14.m1.1b"><apply id="Pt0.A1.E14.m1.1.1.1.1.cmml" xref="Pt0.A1.E14.m1.1.1.1"><and id="Pt0.A1.E14.m1.1.1.1.1a.cmml" xref="Pt0.A1.E14.m1.1.1.1"></and><apply id="Pt0.A1.E14.m1.1.1.1.1b.cmml" xref="Pt0.A1.E14.m1.1.1.1"><eq id="Pt0.A1.E14.m1.1.1.1.1.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.3"></eq><apply id="Pt0.A1.E14.m1.1.1.1.1.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1"><times id="Pt0.A1.E14.m1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.2"></times><apply id="Pt0.A1.E14.m1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.3"><divide id="Pt0.A1.E14.m1.1.1.1.1.1.3.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.3"></divide><cn type="integer" id="Pt0.A1.E14.m1.1.1.1.1.1.3.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.3.2">1</cn><ci id="Pt0.A1.E14.m1.1.1.1.1.1.3.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.3.3">𝑛</ci></apply><apply id="Pt0.A1.E14.m1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1"><apply id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2">superscript</csymbol><apply id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2">subscript</csymbol><sum id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.2"></sum><apply id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3"><eq id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.1"></eq><ci id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.2">𝑗</ci><cn type="integer" id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E14.m1.1.1.1.1.1.1.2.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.2.3">𝑘</ci></apply><apply id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1"><times id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.2"></times><apply id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1"><abs id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.2"></abs><apply id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.2">𝑃</ci><ci id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.1.1.1.3">𝑗</ci></apply></apply><ci id="Pt0.A1.E14.m1.1.1.1.1.1.1.1.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.1.1.1.3">𝑤</ci></apply></apply></apply><apply id="Pt0.A1.E14.m1.1.1.1.1.4.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.4"><times id="Pt0.A1.E14.m1.1.1.1.1.4.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.4.1"></times><apply id="Pt0.A1.E14.m1.1.1.1.1.4.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.4.2"><divide id="Pt0.A1.E14.m1.1.1.1.1.4.2.1.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.4.2"></divide><cn type="integer" id="Pt0.A1.E14.m1.1.1.1.1.4.2.2.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.4.2.2">1</cn><ci id="Pt0.A1.E14.m1.1.1.1.1.4.2.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.4.2.3">𝑛</ci></apply><ci id="Pt0.A1.E14.m1.1.1.1.1.4.3.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.4.3">𝑛</ci><ci id="Pt0.A1.E14.m1.1.1.1.1.4.4.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.4.4">𝑤</ci></apply></apply><apply id="Pt0.A1.E14.m1.1.1.1.1c.cmml" xref="Pt0.A1.E14.m1.1.1.1"><eq id="Pt0.A1.E14.m1.1.1.1.1.5.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.5"></eq><share href="#Pt0.A1.E14.m1.1.1.1.1.4.cmml" id="Pt0.A1.E14.m1.1.1.1.1d.cmml" xref="Pt0.A1.E14.m1.1.1.1"></share><ci id="Pt0.A1.E14.m1.1.1.1.1.6.cmml" xref="Pt0.A1.E14.m1.1.1.1.1.6">𝑤</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E14.m1.1c">\frac{1}{n}\displaystyle\sum_{j=1}^{k}|P_{j}|w=\frac{1}{n}nw=w.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(14)</span></td>
</tr></tbody>
</table>
</div>
<div id="Pt0.A1.p13" class="ltx_para">
<p id="Pt0.A1.p13.1" class="ltx_p">The second summand in Eq. <a href="#Pt0.A1.E12" title="In Appendix 0.A Mathematical Derivation of Federated Stochastic Gradient Descent ‣ Functional Federated Learning in Erlang (ffl-erl)The final authenticated version is available online at https://doi.org/10.1007/978-3-030-16202-3˙10." class="ltx_ref"><span class="ltx_text ltx_ref_tag">12</span></a> can be simplified as follows:</p>
</div>
<div id="Pt0.A1.p14" class="ltx_para">
<table id="Pt0.A1.E15" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="Pt0.A1.E15.m1.4" class="ltx_Math" alttext="\frac{1}{n}\eta\displaystyle\sum_{j=1}^{k}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w)=\frac{1}{n}\eta\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w)=\frac{\eta}{n}\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w)." display="block"><semantics id="Pt0.A1.E15.m1.4a"><mrow id="Pt0.A1.E15.m1.4.4.1" xref="Pt0.A1.E15.m1.4.4.1.1.cmml"><mrow id="Pt0.A1.E15.m1.4.4.1.1" xref="Pt0.A1.E15.m1.4.4.1.1.cmml"><mrow id="Pt0.A1.E15.m1.4.4.1.1.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.cmml"><mfrac id="Pt0.A1.E15.m1.4.4.1.1.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.2.cmml"><mn id="Pt0.A1.E15.m1.4.4.1.1.2.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.2.2.cmml">1</mn><mi id="Pt0.A1.E15.m1.4.4.1.1.2.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.2.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.2.1.cmml">​</mo><mi id="Pt0.A1.E15.m1.4.4.1.1.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.3.cmml">η</mi><mo lspace="0em" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.2.1a" xref="Pt0.A1.E15.m1.4.4.1.1.2.1.cmml">​</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.2.4" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.cmml"><munderover id="Pt0.A1.E15.m1.4.4.1.1.2.4.1" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.cmml"><mo movablelimits="false" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.2.cmml">∑</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.2.cmml">j</mi><mo id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.1" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.1.cmml">=</mo><mn id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.3.cmml">k</mi></munderover><mrow id="Pt0.A1.E15.m1.4.4.1.1.2.4.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.cmml"><munder id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.cmml"><mo movablelimits="false" id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.2.cmml">∑</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.2.cmml">i</mi><mo id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.1" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.1.cmml">∈</mo><msub id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.2.cmml">P</mi><mi id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.3.cmml">j</mi></msub></mrow></munder><mrow id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.cmml"><mrow id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.cmml"><mo rspace="0.167em" id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.1.cmml">​</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.cmml"><mo stretchy="false" id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.3.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.cmml">(</mo><mi id="Pt0.A1.E15.m1.1.1" xref="Pt0.A1.E15.m1.1.1.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.3.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="Pt0.A1.E15.m1.4.4.1.1.3" xref="Pt0.A1.E15.m1.4.4.1.1.3.cmml">=</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.4" xref="Pt0.A1.E15.m1.4.4.1.1.4.cmml"><mfrac id="Pt0.A1.E15.m1.4.4.1.1.4.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.2.cmml"><mn id="Pt0.A1.E15.m1.4.4.1.1.4.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.2.2.cmml">1</mn><mi id="Pt0.A1.E15.m1.4.4.1.1.4.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.4.2.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.4.1" xref="Pt0.A1.E15.m1.4.4.1.1.4.1.cmml">​</mo><mi id="Pt0.A1.E15.m1.4.4.1.1.4.3" xref="Pt0.A1.E15.m1.4.4.1.1.4.3.cmml">η</mi><mo lspace="0em" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.4.1a" xref="Pt0.A1.E15.m1.4.4.1.1.4.1.cmml">​</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.4.4" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.cmml"><munderover id="Pt0.A1.E15.m1.4.4.1.1.4.4.1" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.cmml"><mo movablelimits="false" id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.2.cmml">∑</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.2.cmml">i</mi><mo id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.1" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.1.cmml">=</mo><mn id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.3" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.3" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.3.cmml">n</mi></munderover><mrow id="Pt0.A1.E15.m1.4.4.1.1.4.4.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.cmml"><mrow id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.cmml"><mo rspace="0.167em" id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.1.cmml">​</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.cmml"><mo stretchy="false" id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.3.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.cmml">(</mo><mi id="Pt0.A1.E15.m1.2.2" xref="Pt0.A1.E15.m1.2.2.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.3.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="Pt0.A1.E15.m1.4.4.1.1.5" xref="Pt0.A1.E15.m1.4.4.1.1.5.cmml">=</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.6" xref="Pt0.A1.E15.m1.4.4.1.1.6.cmml"><mfrac id="Pt0.A1.E15.m1.4.4.1.1.6.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.2.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.6.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.2.2.cmml">η</mi><mi id="Pt0.A1.E15.m1.4.4.1.1.6.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.6.2.3.cmml">n</mi></mfrac><mo lspace="0em" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.6.1" xref="Pt0.A1.E15.m1.4.4.1.1.6.1.cmml">​</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.6.3" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.cmml"><munderover id="Pt0.A1.E15.m1.4.4.1.1.6.3.1" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.cmml"><mo movablelimits="false" id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.2.cmml">∑</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.2.cmml">i</mi><mo id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.1" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.1.cmml">=</mo><mn id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.3" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.3.cmml">1</mn></mrow><mi id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.3" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.3.cmml">n</mi></munderover><mrow id="Pt0.A1.E15.m1.4.4.1.1.6.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.cmml"><mrow id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.cmml"><mo rspace="0.167em" id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.1.cmml">∇</mo><msub id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.cmml"><mi id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.2.cmml">F</mi><mi id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.3" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.3.cmml">i</mi></msub></mrow><mo lspace="0em" rspace="0em" id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.1.cmml">​</mo><mrow id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.3.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.cmml"><mo stretchy="false" id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.3.2.1" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.cmml">(</mo><mi id="Pt0.A1.E15.m1.3.3" xref="Pt0.A1.E15.m1.3.3.cmml">w</mi><mo stretchy="false" id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.3.2.2" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo lspace="0em" id="Pt0.A1.E15.m1.4.4.1.2" xref="Pt0.A1.E15.m1.4.4.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="Pt0.A1.E15.m1.4b"><apply id="Pt0.A1.E15.m1.4.4.1.1.cmml" xref="Pt0.A1.E15.m1.4.4.1"><and id="Pt0.A1.E15.m1.4.4.1.1a.cmml" xref="Pt0.A1.E15.m1.4.4.1"></and><apply id="Pt0.A1.E15.m1.4.4.1.1b.cmml" xref="Pt0.A1.E15.m1.4.4.1"><eq id="Pt0.A1.E15.m1.4.4.1.1.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.3"></eq><apply id="Pt0.A1.E15.m1.4.4.1.1.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2"><times id="Pt0.A1.E15.m1.4.4.1.1.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.1"></times><apply id="Pt0.A1.E15.m1.4.4.1.1.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.2"><divide id="Pt0.A1.E15.m1.4.4.1.1.2.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.2"></divide><cn type="integer" id="Pt0.A1.E15.m1.4.4.1.1.2.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.2.2">1</cn><ci id="Pt0.A1.E15.m1.4.4.1.1.2.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.2.3">𝑛</ci></apply><ci id="Pt0.A1.E15.m1.4.4.1.1.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.3">𝜂</ci><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4"><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1">superscript</csymbol><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1">subscript</csymbol><sum id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.2"></sum><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3"><eq id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.1"></eq><ci id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.2">𝑗</ci><cn type="integer" id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E15.m1.4.4.1.1.2.4.1.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.1.3">𝑘</ci></apply><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2"><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1">subscript</csymbol><sum id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.2"></sum><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3"><in id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.1"></in><ci id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.2">𝑖</ci><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3">subscript</csymbol><ci id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.2">𝑃</ci><ci id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.1.3.3.3">𝑗</ci></apply></apply></apply><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2"><times id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.1"></times><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2"><ci id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.1">∇</ci><apply id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2">subscript</csymbol><ci id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.2.4.2.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E15.m1.1.1.cmml" xref="Pt0.A1.E15.m1.1.1">𝑤</ci></apply></apply></apply></apply><apply id="Pt0.A1.E15.m1.4.4.1.1.4.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4"><times id="Pt0.A1.E15.m1.4.4.1.1.4.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.1"></times><apply id="Pt0.A1.E15.m1.4.4.1.1.4.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.2"><divide id="Pt0.A1.E15.m1.4.4.1.1.4.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.2"></divide><cn type="integer" id="Pt0.A1.E15.m1.4.4.1.1.4.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.2.2">1</cn><ci id="Pt0.A1.E15.m1.4.4.1.1.4.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.2.3">𝑛</ci></apply><ci id="Pt0.A1.E15.m1.4.4.1.1.4.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.3">𝜂</ci><apply id="Pt0.A1.E15.m1.4.4.1.1.4.4.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4"><apply id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1">superscript</csymbol><apply id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1">subscript</csymbol><sum id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.2"></sum><apply id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3"><eq id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.1"></eq><ci id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.2">𝑖</ci><cn type="integer" id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E15.m1.4.4.1.1.4.4.1.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.1.3">𝑛</ci></apply><apply id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2"><times id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.1"></times><apply id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2"><ci id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.1">∇</ci><apply id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2">subscript</csymbol><ci id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.4.4.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E15.m1.2.2.cmml" xref="Pt0.A1.E15.m1.2.2">𝑤</ci></apply></apply></apply></apply><apply id="Pt0.A1.E15.m1.4.4.1.1c.cmml" xref="Pt0.A1.E15.m1.4.4.1"><eq id="Pt0.A1.E15.m1.4.4.1.1.5.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.5"></eq><share href="#Pt0.A1.E15.m1.4.4.1.1.4.cmml" id="Pt0.A1.E15.m1.4.4.1.1d.cmml" xref="Pt0.A1.E15.m1.4.4.1"></share><apply id="Pt0.A1.E15.m1.4.4.1.1.6.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6"><times id="Pt0.A1.E15.m1.4.4.1.1.6.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.1"></times><apply id="Pt0.A1.E15.m1.4.4.1.1.6.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.2"><divide id="Pt0.A1.E15.m1.4.4.1.1.6.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.2"></divide><ci id="Pt0.A1.E15.m1.4.4.1.1.6.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.2.2">𝜂</ci><ci id="Pt0.A1.E15.m1.4.4.1.1.6.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.2.3">𝑛</ci></apply><apply id="Pt0.A1.E15.m1.4.4.1.1.6.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3"><apply id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1">superscript</csymbol><apply id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1">subscript</csymbol><sum id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.2"></sum><apply id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3"><eq id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.1"></eq><ci id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.2">𝑖</ci><cn type="integer" id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.2.3.3">1</cn></apply></apply><ci id="Pt0.A1.E15.m1.4.4.1.1.6.3.1.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.1.3">𝑛</ci></apply><apply id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2"><times id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.1"></times><apply id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2"><ci id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.1">∇</ci><apply id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2"><csymbol cd="ambiguous" id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.1.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2">subscript</csymbol><ci id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.2.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.2">𝐹</ci><ci id="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.3.cmml" xref="Pt0.A1.E15.m1.4.4.1.1.6.3.2.2.2.3">𝑖</ci></apply></apply><ci id="Pt0.A1.E15.m1.3.3.cmml" xref="Pt0.A1.E15.m1.3.3">𝑤</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Pt0.A1.E15.m1.4c">\frac{1}{n}\eta\displaystyle\sum_{j=1}^{k}\displaystyle\sum_{i\in P_{j}}\nabla F_{i}(w)=\frac{1}{n}\eta\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w)=\frac{\eta}{n}\displaystyle\sum_{i=1}^{n}\nabla F_{i}(w).</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(15)</span></td>
</tr></tbody>
</table>
</div>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/1808.08142" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/1808.08143" class="ar5iv-text-button ar5iv-severity-warning">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+1808.08143">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/1808.08143" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/1808.08144" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Sun Mar 17 20:09:45 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
