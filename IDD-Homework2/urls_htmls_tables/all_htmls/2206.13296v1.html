<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2206.13296] Consistency-preserving Visual Question Answering in Medical Imaging</title><meta property="og:description" content="Visual Question Answering (VQA) models take an image and a natural-language question as input and infer the answer to the question. Recently, VQA systems in medical imaging have gained popularity thanks to potential ad…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Consistency-preserving Visual Question Answering in Medical Imaging">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Consistency-preserving Visual Question Answering in Medical Imaging">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2206.13296">

<!--Generated on Mon Mar 11 17:42:31 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="VQA Consistency Attention Diabetic Macular Edema">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line"><span id="id1" class="ltx_note ltx_role_institutetext"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">institutetext: </span>University of Bern, Bern, Switzerland
<br class="ltx_break"><span id="id1.1" class="ltx_note ltx_role_email"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_note_type">email: </span>{sergio.tasconmorales, pablo.marquez, raphael.sznitman}@unibe.ch</span></span></span></span></span></span>
<h1 class="ltx_title ltx_title_document">Consistency-preserving Visual Question Answering in Medical Imaging</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Sergio Tascon-Morales
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Pablo Márquez-Neila
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname"> Raphael Sznitman
</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id1.id1" class="ltx_p">Visual Question Answering (VQA) models take an image and a natural-language question as input and infer the answer to the question. Recently, VQA systems in medical imaging have gained popularity thanks to potential advantages such as patient engagement and second opinions for clinicians. While most research efforts have been focused on improving architectures and overcoming data-related limitations, answer consistency has been overlooked even though it plays a critical role in establishing trustworthy models. In this work, we propose a novel loss function and corresponding training procedure that allows the inclusion of relations between questions into the training process. Specifically, we consider the case where implications between perception and reasoning questions are known a-priori. To show the benefits of our approach, we evaluate it on the clinically relevant task of Diabetic Macular Edema (DME) staging from fundus imaging. Our experiments show that our method outperforms state-of-the-art baselines, not only by improving model consistency, but also in terms of overall model accuracy. Our code and data are available at <a target="_blank" href="https://github.com/sergiotasconmorales/consistency_vqa" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/sergiotasconmorales/consistency_vqa</a>.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Keywords: </h6>VQA Consistency Attention Diabetic Macular Edema
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Visual Question Answering (VQA) models are neural networks that answer natural language questions about an image by interpreting the question and the image provided <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>, <a href="#bib.bib7" title="" class="ltx_ref">7</a>, <a href="#bib.bib11" title="" class="ltx_ref">11</a>, <a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite>. Specifying questions using natural language gives VQA models great appeal, as the set of possible questions one can ask is enormous and does not need to be identical to the set of questions used to train the models. Due to these advantages, VQA models for medical applications have also been proposed <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>, <a href="#bib.bib8" title="" class="ltx_ref">8</a>, <a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib13" title="" class="ltx_ref">13</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>, <a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite>, whereby allowing clinicians to probe the model with subtle differentiating questions and contributing to build trust in predictions.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">To date, much of the work in medical VQA has focused on building more effective model architectures <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>, <a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite> or overcoming limitations in medical VQA datasets <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>, <a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib19" title="" class="ltx_ref">19</a>, <a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite>. Yet a critical component of VQA is the notion of <span id="S1.p2.1.1" class="ltx_text ltx_font_italic">consistency</span> in the answers produced by a model. Here, consistency refers to a model’s capacity to produce answers that are not self-contradictory. For instance, the task of staging diabetic macular edema (DME) from color fundus photograph illustrated in Fig. <a href="#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> involves identifying <span id="S1.p2.1.2" class="ltx_text ltx_font_italic">perception</span> elements in the image (<em id="S1.p2.1.3" class="ltx_emph ltx_font_italic">e.g.</em>, “are there hard exudates visible near the macula?”) to infer a disease stage, which can be expressed as a <span id="S1.p2.1.4" class="ltx_text ltx_font_italic">reasoning</span> question (<em id="S1.p2.1.5" class="ltx_emph ltx_font_italic">e.g.</em>, “what is the stage of disease?”). Ultimately, for any VQA model to be trustworthy, it should be able to answer these without contradicting itself (<em id="S1.p2.1.6" class="ltx_emph ltx_font_italic">i.e.</em>, answer that the image is healthy, but also identify hard exudates in the periphery of the eye).</p>
</div>
<figure id="S1.F1" class="ltx_figure"><img src="/html/2206.13296/assets/x1.png" id="S1.F1.1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="346" height="130" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>VQA inconsistency in Diabetic Macular Edema staging from fundus photograph. While the VQA model correctly answers “Is the image healthy?” (left), it incorrectly answers yes to“Are there hard exudates here?” for a specified retinal region.</figcaption>
</figure>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">Consistency in VQA has been been studied in the broader computer vision context <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>, <a href="#bib.bib5" title="" class="ltx_ref">5</a>, <a href="#bib.bib16" title="" class="ltx_ref">16</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>, where the relation between perception and reasoning questions is unconstrained. That is, the answers to perception questions do not necessarily imply any information with respect to the reasoning question and vice-versa. In these broad cases, some methods have modeled question implications <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite> or rephrased questions <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite> by generating tailored question-answer pairs (<em id="S1.p3.1.1" class="ltx_emph ltx_font_italic">e.g.</em>, consistent data-augmentation). Alternatively, <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>, <a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite> used relations between questions to impose constraints in the VQA’s embedding space. To avoid needing to know the relation between questions, <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite> proposed to enforce consistency by making attention maps of reasoning and perception questions similar to one another.
However, even though these approaches tackle unconstrained question relations, the ensuring of VQA models’ consistency remains limited and often reduces the overall performance <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">Instead, we propose a novel approach to enforce VQA consistency that is focused on cases where answers to the perception questions have explicit implications on reasoning question answers and vice-versa (<em id="S1.p4.1.1" class="ltx_emph ltx_font_italic">e.g.</em>, cancerous cells and severity of cancer found in H&amp;E staining, or presence of hard exudates and DME staging). By focusing on this subset of question relations, our aim is to improve both the accuracy of our model and its consistency, without needing external data as in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib14" title="" class="ltx_ref">14</a>, <a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>. To do this, we allow questions to probe arbitrary image regions by masking irrelevant parts of the image and passing the masked image to the VQA model (see Fig. <a href="#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>). To then enforce consistency, we propose a new loss function that penalizes incorrect perceptual predictions when reasoning ones are correct for a given image. To validate the impact of our approach, we test it in the context of DME staging and show that it outperforms state-of-the-art methods for consistency, without compromising overall performance accuracy.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Method</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">We present here our approach which consists of using a simple VQA model with a training protocol that encourages consistency among pairs of perception and reasoning questions. Fig. <a href="#S2.F2" title="Figure 2 ‣ 2.0.1 VQA model. ‣ 2 Method ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> illustrates this VQA model and our training approach.</p>
</div>
<section id="S2.SS0.SSS1" class="ltx_subsubsection">
<h3 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.0.1 </span>VQA model.</h3>

<div id="S2.SS0.SSS1.p1" class="ltx_para">
<p id="S2.SS0.SSS1.p1.9" class="ltx_p">Following <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>, our VQA model, <math id="S2.SS0.SSS1.p1.1.m1.1" class="ltx_Math" alttext="f:\mathcal{I}\times\mathcal{Q}\to\mathcal{P}(\mathcal{A})" display="inline"><semantics id="S2.SS0.SSS1.p1.1.m1.1a"><mrow id="S2.SS0.SSS1.p1.1.m1.1.2" xref="S2.SS0.SSS1.p1.1.m1.1.2.cmml"><mi id="S2.SS0.SSS1.p1.1.m1.1.2.2" xref="S2.SS0.SSS1.p1.1.m1.1.2.2.cmml">f</mi><mo lspace="0.278em" rspace="0.278em" id="S2.SS0.SSS1.p1.1.m1.1.2.1" xref="S2.SS0.SSS1.p1.1.m1.1.2.1.cmml">:</mo><mrow id="S2.SS0.SSS1.p1.1.m1.1.2.3" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.cmml"><mrow id="S2.SS0.SSS1.p1.1.m1.1.2.3.2" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p1.1.m1.1.2.3.2.2" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.2.2.cmml">ℐ</mi><mo lspace="0.222em" rspace="0.222em" id="S2.SS0.SSS1.p1.1.m1.1.2.3.2.1" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.2.1.cmml">×</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p1.1.m1.1.2.3.2.3" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.2.3.cmml">𝒬</mi></mrow><mo stretchy="false" id="S2.SS0.SSS1.p1.1.m1.1.2.3.1" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.1.cmml">→</mo><mrow id="S2.SS0.SSS1.p1.1.m1.1.2.3.3" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p1.1.m1.1.2.3.3.2" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3.2.cmml">𝒫</mi><mo lspace="0em" rspace="0em" id="S2.SS0.SSS1.p1.1.m1.1.2.3.3.1" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3.1.cmml">​</mo><mrow id="S2.SS0.SSS1.p1.1.m1.1.2.3.3.3.2" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3.cmml"><mo stretchy="false" id="S2.SS0.SSS1.p1.1.m1.1.2.3.3.3.2.1" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3.cmml">(</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p1.1.m1.1.1" xref="S2.SS0.SSS1.p1.1.m1.1.1.cmml">𝒜</mi><mo stretchy="false" id="S2.SS0.SSS1.p1.1.m1.1.2.3.3.3.2.2" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.1.m1.1b"><apply id="S2.SS0.SSS1.p1.1.m1.1.2.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2"><ci id="S2.SS0.SSS1.p1.1.m1.1.2.1.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.1">:</ci><ci id="S2.SS0.SSS1.p1.1.m1.1.2.2.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.2">𝑓</ci><apply id="S2.SS0.SSS1.p1.1.m1.1.2.3.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3"><ci id="S2.SS0.SSS1.p1.1.m1.1.2.3.1.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.1">→</ci><apply id="S2.SS0.SSS1.p1.1.m1.1.2.3.2.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.2"><times id="S2.SS0.SSS1.p1.1.m1.1.2.3.2.1.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.2.1"></times><ci id="S2.SS0.SSS1.p1.1.m1.1.2.3.2.2.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.2.2">ℐ</ci><ci id="S2.SS0.SSS1.p1.1.m1.1.2.3.2.3.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.2.3">𝒬</ci></apply><apply id="S2.SS0.SSS1.p1.1.m1.1.2.3.3.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3"><times id="S2.SS0.SSS1.p1.1.m1.1.2.3.3.1.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3.1"></times><ci id="S2.SS0.SSS1.p1.1.m1.1.2.3.3.2.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.2.3.3.2">𝒫</ci><ci id="S2.SS0.SSS1.p1.1.m1.1.1.cmml" xref="S2.SS0.SSS1.p1.1.m1.1.1">𝒜</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.1.m1.1c">f:\mathcal{I}\times\mathcal{Q}\to\mathcal{P}(\mathcal{A})</annotation></semantics></math>, takes a tuple containing an image, <math id="S2.SS0.SSS1.p1.2.m2.1" class="ltx_Math" alttext="\mathbf{x}" display="inline"><semantics id="S2.SS0.SSS1.p1.2.m2.1a"><mi id="S2.SS0.SSS1.p1.2.m2.1.1" xref="S2.SS0.SSS1.p1.2.m2.1.1.cmml">𝐱</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.2.m2.1b"><ci id="S2.SS0.SSS1.p1.2.m2.1.1.cmml" xref="S2.SS0.SSS1.p1.2.m2.1.1">𝐱</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.2.m2.1c">\mathbf{x}</annotation></semantics></math>, and a question, <math id="S2.SS0.SSS1.p1.3.m3.1" class="ltx_Math" alttext="\mathbf{q}" display="inline"><semantics id="S2.SS0.SSS1.p1.3.m3.1a"><mi id="S2.SS0.SSS1.p1.3.m3.1.1" xref="S2.SS0.SSS1.p1.3.m3.1.1.cmml">𝐪</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.3.m3.1b"><ci id="S2.SS0.SSS1.p1.3.m3.1.1.cmml" xref="S2.SS0.SSS1.p1.3.m3.1.1">𝐪</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.3.m3.1c">\mathbf{q}</annotation></semantics></math>, to produce a distribution, <math id="S2.SS0.SSS1.p1.4.m4.2" class="ltx_Math" alttext="\mathbf{p}=f(\mathbf{x},\mathbf{q})" display="inline"><semantics id="S2.SS0.SSS1.p1.4.m4.2a"><mrow id="S2.SS0.SSS1.p1.4.m4.2.3" xref="S2.SS0.SSS1.p1.4.m4.2.3.cmml"><mi id="S2.SS0.SSS1.p1.4.m4.2.3.2" xref="S2.SS0.SSS1.p1.4.m4.2.3.2.cmml">𝐩</mi><mo id="S2.SS0.SSS1.p1.4.m4.2.3.1" xref="S2.SS0.SSS1.p1.4.m4.2.3.1.cmml">=</mo><mrow id="S2.SS0.SSS1.p1.4.m4.2.3.3" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.cmml"><mi id="S2.SS0.SSS1.p1.4.m4.2.3.3.2" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.2.cmml">f</mi><mo lspace="0em" rspace="0em" id="S2.SS0.SSS1.p1.4.m4.2.3.3.1" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.1.cmml">​</mo><mrow id="S2.SS0.SSS1.p1.4.m4.2.3.3.3.2" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.3.1.cmml"><mo stretchy="false" id="S2.SS0.SSS1.p1.4.m4.2.3.3.3.2.1" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.3.1.cmml">(</mo><mi id="S2.SS0.SSS1.p1.4.m4.1.1" xref="S2.SS0.SSS1.p1.4.m4.1.1.cmml">𝐱</mi><mo id="S2.SS0.SSS1.p1.4.m4.2.3.3.3.2.2" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.3.1.cmml">,</mo><mi id="S2.SS0.SSS1.p1.4.m4.2.2" xref="S2.SS0.SSS1.p1.4.m4.2.2.cmml">𝐪</mi><mo stretchy="false" id="S2.SS0.SSS1.p1.4.m4.2.3.3.3.2.3" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.4.m4.2b"><apply id="S2.SS0.SSS1.p1.4.m4.2.3.cmml" xref="S2.SS0.SSS1.p1.4.m4.2.3"><eq id="S2.SS0.SSS1.p1.4.m4.2.3.1.cmml" xref="S2.SS0.SSS1.p1.4.m4.2.3.1"></eq><ci id="S2.SS0.SSS1.p1.4.m4.2.3.2.cmml" xref="S2.SS0.SSS1.p1.4.m4.2.3.2">𝐩</ci><apply id="S2.SS0.SSS1.p1.4.m4.2.3.3.cmml" xref="S2.SS0.SSS1.p1.4.m4.2.3.3"><times id="S2.SS0.SSS1.p1.4.m4.2.3.3.1.cmml" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.1"></times><ci id="S2.SS0.SSS1.p1.4.m4.2.3.3.2.cmml" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.2">𝑓</ci><interval closure="open" id="S2.SS0.SSS1.p1.4.m4.2.3.3.3.1.cmml" xref="S2.SS0.SSS1.p1.4.m4.2.3.3.3.2"><ci id="S2.SS0.SSS1.p1.4.m4.1.1.cmml" xref="S2.SS0.SSS1.p1.4.m4.1.1">𝐱</ci><ci id="S2.SS0.SSS1.p1.4.m4.2.2.cmml" xref="S2.SS0.SSS1.p1.4.m4.2.2">𝐪</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.4.m4.2c">\mathbf{p}=f(\mathbf{x},\mathbf{q})</annotation></semantics></math>, over a finite set of possible answers <math id="S2.SS0.SSS1.p1.5.m5.1" class="ltx_Math" alttext="\mathcal{A}" display="inline"><semantics id="S2.SS0.SSS1.p1.5.m5.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p1.5.m5.1.1" xref="S2.SS0.SSS1.p1.5.m5.1.1.cmml">𝒜</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.5.m5.1b"><ci id="S2.SS0.SSS1.p1.5.m5.1.1.cmml" xref="S2.SS0.SSS1.p1.5.m5.1.1">𝒜</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.5.m5.1c">\mathcal{A}</annotation></semantics></math> (see Fig. <a href="#S2.F2" title="Figure 2 ‣ 2.0.1 VQA model. ‣ 2 Method ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>(Top)). After encoding the inputs, the VQA model combines visual (<math id="S2.SS0.SSS1.p1.6.m6.1" class="ltx_Math" alttext="v" display="inline"><semantics id="S2.SS0.SSS1.p1.6.m6.1a"><mi id="S2.SS0.SSS1.p1.6.m6.1.1" xref="S2.SS0.SSS1.p1.6.m6.1.1.cmml">v</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.6.m6.1b"><ci id="S2.SS0.SSS1.p1.6.m6.1.1.cmml" xref="S2.SS0.SSS1.p1.6.m6.1.1">𝑣</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.6.m6.1c">v</annotation></semantics></math>) and textual (<math id="S2.SS0.SSS1.p1.7.m7.1" class="ltx_Math" alttext="q" display="inline"><semantics id="S2.SS0.SSS1.p1.7.m7.1a"><mi id="S2.SS0.SSS1.p1.7.m7.1.1" xref="S2.SS0.SSS1.p1.7.m7.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.7.m7.1b"><ci id="S2.SS0.SSS1.p1.7.m7.1.1.cmml" xref="S2.SS0.SSS1.p1.7.m7.1.1">𝑞</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.7.m7.1c">q</annotation></semantics></math>) features through an attention module (<math id="S2.SS0.SSS1.p1.8.m8.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S2.SS0.SSS1.p1.8.m8.1a"><mi id="S2.SS0.SSS1.p1.8.m8.1.1" xref="S2.SS0.SSS1.p1.8.m8.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.8.m8.1b"><ci id="S2.SS0.SSS1.p1.8.m8.1.1.cmml" xref="S2.SS0.SSS1.p1.8.m8.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.8.m8.1c">k</annotation></semantics></math>) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite> that selects the visual features relevant to the question (<math id="S2.SS0.SSS1.p1.9.m9.1" class="ltx_Math" alttext="v^{\prime}" display="inline"><semantics id="S2.SS0.SSS1.p1.9.m9.1a"><msup id="S2.SS0.SSS1.p1.9.m9.1.1" xref="S2.SS0.SSS1.p1.9.m9.1.1.cmml"><mi id="S2.SS0.SSS1.p1.9.m9.1.1.2" xref="S2.SS0.SSS1.p1.9.m9.1.1.2.cmml">v</mi><mo id="S2.SS0.SSS1.p1.9.m9.1.1.3" xref="S2.SS0.SSS1.p1.9.m9.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p1.9.m9.1b"><apply id="S2.SS0.SSS1.p1.9.m9.1.1.cmml" xref="S2.SS0.SSS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S2.SS0.SSS1.p1.9.m9.1.1.1.cmml" xref="S2.SS0.SSS1.p1.9.m9.1.1">superscript</csymbol><ci id="S2.SS0.SSS1.p1.9.m9.1.1.2.cmml" xref="S2.SS0.SSS1.p1.9.m9.1.1.2">𝑣</ci><ci id="S2.SS0.SSS1.p1.9.m9.1.1.3.cmml" xref="S2.SS0.SSS1.p1.9.m9.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p1.9.m9.1c">v^{\prime}</annotation></semantics></math>). The final classifier receives a combination of the relevant features and the text features through a fusion module to predict the final distribution.</p>
</div>
<div id="S2.SS0.SSS1.p2" class="ltx_para">
<p id="S2.SS0.SSS1.p2.1" class="ltx_p">In some cases, questions may consider asking about content related to specific regions of the image (<em id="S2.SS0.SSS1.p2.1.1" class="ltx_emph ltx_font_italic">e.g.</em>, “are there hard exudates in this region?”). To process these cases, the input image is masked so that the visible area corresponds to the region mentioned in the question while the rest of the image is set to zero.</p>
</div>
<div id="S2.SS0.SSS1.p3" class="ltx_para">
<p id="S2.SS0.SSS1.p3.1" class="ltx_p">Training this model requires a dataset <math id="S2.SS0.SSS1.p3.1.m1.5" class="ltx_Math" alttext="\mathcal{T}=\{t^{(i)}=(\mathbf{x}^{(i)},\mathbf{q}^{(i)},a^{(i)})\}_{i=1}^{N}\subseteq\mathcal{I}\times\mathcal{Q}\times\mathcal{A}" display="inline"><semantics id="S2.SS0.SSS1.p3.1.m1.5a"><mrow id="S2.SS0.SSS1.p3.1.m1.5.5" xref="S2.SS0.SSS1.p3.1.m1.5.5.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p3.1.m1.5.5.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.3.cmml">𝒯</mi><mo id="S2.SS0.SSS1.p3.1.m1.5.5.4" xref="S2.SS0.SSS1.p3.1.m1.5.5.4.cmml">=</mo><msubsup id="S2.SS0.SSS1.p3.1.m1.5.5.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.cmml"><mrow id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.2.cmml"><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.2.cmml">{</mo><mrow id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.cmml"><msup id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.cmml"><mi id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.2.cmml">t</mi><mrow id="S2.SS0.SSS1.p3.1.m1.1.1.1.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.cmml"><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.1.1.1.3.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.cmml">(</mo><mi id="S2.SS0.SSS1.p3.1.m1.1.1.1.1" xref="S2.SS0.SSS1.p3.1.m1.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.1.1.1.3.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.4" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.4.cmml">=</mo><mrow id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.4.cmml"><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.4" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.4.cmml">(</mo><msup id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.cmml"><mi id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.2.cmml">𝐱</mi><mrow id="S2.SS0.SSS1.p3.1.m1.2.2.1.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.2.2.1.3.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.cmml">(</mo><mi id="S2.SS0.SSS1.p3.1.m1.2.2.1.1" xref="S2.SS0.SSS1.p3.1.m1.2.2.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.2.2.1.3.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.5" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.4.cmml">,</mo><msup id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.cmml"><mi id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.2.cmml">𝐪</mi><mrow id="S2.SS0.SSS1.p3.1.m1.3.3.1.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.cmml"><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.3.3.1.3.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.cmml">(</mo><mi id="S2.SS0.SSS1.p3.1.m1.3.3.1.1" xref="S2.SS0.SSS1.p3.1.m1.3.3.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.3.3.1.3.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.6" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.4.cmml">,</mo><msup id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.cmml"><mi id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.2.cmml">a</mi><mrow id="S2.SS0.SSS1.p3.1.m1.4.4.1.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.cmml"><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.4.4.1.3.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.cmml">(</mo><mi id="S2.SS0.SSS1.p3.1.m1.4.4.1.1" xref="S2.SS0.SSS1.p3.1.m1.4.4.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.4.4.1.3.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.cmml">)</mo></mrow></msup><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.7" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.4.cmml">)</mo></mrow></mrow><mo stretchy="false" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.2.cmml">}</mo></mrow><mrow id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.cmml"><mi id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.2.cmml">i</mi><mo id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.1.cmml">=</mo><mn id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.3.cmml">1</mn></mrow><mi id="S2.SS0.SSS1.p3.1.m1.5.5.1.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.3.cmml">N</mi></msubsup><mo id="S2.SS0.SSS1.p3.1.m1.5.5.5" xref="S2.SS0.SSS1.p3.1.m1.5.5.5.cmml">⊆</mo><mrow id="S2.SS0.SSS1.p3.1.m1.5.5.6" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p3.1.m1.5.5.6.2" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.2.cmml">ℐ</mi><mo lspace="0.222em" rspace="0.222em" id="S2.SS0.SSS1.p3.1.m1.5.5.6.1" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.1.cmml">×</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p3.1.m1.5.5.6.3" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.3.cmml">𝒬</mi><mo lspace="0.222em" rspace="0.222em" id="S2.SS0.SSS1.p3.1.m1.5.5.6.1a" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.1.cmml">×</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS1.p3.1.m1.5.5.6.4" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.4.cmml">𝒜</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS1.p3.1.m1.5b"><apply id="S2.SS0.SSS1.p3.1.m1.5.5.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5"><and id="S2.SS0.SSS1.p3.1.m1.5.5a.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5"></and><apply id="S2.SS0.SSS1.p3.1.m1.5.5b.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5"><eq id="S2.SS0.SSS1.p3.1.m1.5.5.4.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.4"></eq><ci id="S2.SS0.SSS1.p3.1.m1.5.5.3.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.3">𝒯</ci><apply id="S2.SS0.SSS1.p3.1.m1.5.5.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1"><csymbol cd="ambiguous" id="S2.SS0.SSS1.p3.1.m1.5.5.1.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1">superscript</csymbol><apply id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1"><csymbol cd="ambiguous" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1">subscript</csymbol><set id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1"><apply id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1"><eq id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.4.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.4"></eq><apply id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5"><csymbol cd="ambiguous" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5">superscript</csymbol><ci id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.5.2">𝑡</ci><ci id="S2.SS0.SSS1.p3.1.m1.1.1.1.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.1.1.1.1">𝑖</ci></apply><vector id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.4.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3"><apply id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.1.1.1.2">𝐱</ci><ci id="S2.SS0.SSS1.p3.1.m1.2.2.1.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.2.2.1.1">𝑖</ci></apply><apply id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2">superscript</csymbol><ci id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.2.2.2.2">𝐪</ci><ci id="S2.SS0.SSS1.p3.1.m1.3.3.1.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.3.3.1.1">𝑖</ci></apply><apply id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3">superscript</csymbol><ci id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.1.1.1.3.3.3.2">𝑎</ci><ci id="S2.SS0.SSS1.p3.1.m1.4.4.1.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.4.4.1.1">𝑖</ci></apply></vector></apply></set><apply id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3"><eq id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.1"></eq><ci id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.2">𝑖</ci><cn type="integer" id="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.3.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.1.3.3">1</cn></apply></apply><ci id="S2.SS0.SSS1.p3.1.m1.5.5.1.3.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.1.3">𝑁</ci></apply></apply><apply id="S2.SS0.SSS1.p3.1.m1.5.5c.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5"><subset id="S2.SS0.SSS1.p3.1.m1.5.5.5.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.5"></subset><share href="#S2.SS0.SSS1.p3.1.m1.5.5.1.cmml" id="S2.SS0.SSS1.p3.1.m1.5.5d.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5"></share><apply id="S2.SS0.SSS1.p3.1.m1.5.5.6.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.6"><times id="S2.SS0.SSS1.p3.1.m1.5.5.6.1.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.1"></times><ci id="S2.SS0.SSS1.p3.1.m1.5.5.6.2.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.2">ℐ</ci><ci id="S2.SS0.SSS1.p3.1.m1.5.5.6.3.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.3">𝒬</ci><ci id="S2.SS0.SSS1.p3.1.m1.5.5.6.4.cmml" xref="S2.SS0.SSS1.p3.1.m1.5.5.6.4">𝒜</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS1.p3.1.m1.5c">\mathcal{T}=\{t^{(i)}=(\mathbf{x}^{(i)},\mathbf{q}^{(i)},a^{(i)})\}_{i=1}^{N}\subseteq\mathcal{I}\times\mathcal{Q}\times\mathcal{A}</annotation></semantics></math> of images and questions annotated with their answers. The VQA loss is simply the cross-entropy between the predicted distribution and the real answer,</p>
<table id="S2.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E1.m1.5" class="ltx_Math" alttext="\ell_{\textrm{VQA}}(\mathbf{p},a)=H(\mathbf{p},a)=-\log\mathbf{p}_{a}." display="block"><semantics id="S2.E1.m1.5a"><mrow id="S2.E1.m1.5.5.1" xref="S2.E1.m1.5.5.1.1.cmml"><mrow id="S2.E1.m1.5.5.1.1" xref="S2.E1.m1.5.5.1.1.cmml"><mrow id="S2.E1.m1.5.5.1.1.2" xref="S2.E1.m1.5.5.1.1.2.cmml"><msub id="S2.E1.m1.5.5.1.1.2.2" xref="S2.E1.m1.5.5.1.1.2.2.cmml"><mi mathvariant="normal" id="S2.E1.m1.5.5.1.1.2.2.2" xref="S2.E1.m1.5.5.1.1.2.2.2.cmml">ℓ</mi><mtext id="S2.E1.m1.5.5.1.1.2.2.3" xref="S2.E1.m1.5.5.1.1.2.2.3a.cmml">VQA</mtext></msub><mo lspace="0em" rspace="0em" id="S2.E1.m1.5.5.1.1.2.1" xref="S2.E1.m1.5.5.1.1.2.1.cmml">​</mo><mrow id="S2.E1.m1.5.5.1.1.2.3.2" xref="S2.E1.m1.5.5.1.1.2.3.1.cmml"><mo stretchy="false" id="S2.E1.m1.5.5.1.1.2.3.2.1" xref="S2.E1.m1.5.5.1.1.2.3.1.cmml">(</mo><mi id="S2.E1.m1.1.1" xref="S2.E1.m1.1.1.cmml">𝐩</mi><mo id="S2.E1.m1.5.5.1.1.2.3.2.2" xref="S2.E1.m1.5.5.1.1.2.3.1.cmml">,</mo><mi id="S2.E1.m1.2.2" xref="S2.E1.m1.2.2.cmml">a</mi><mo stretchy="false" id="S2.E1.m1.5.5.1.1.2.3.2.3" xref="S2.E1.m1.5.5.1.1.2.3.1.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.5.5.1.1.3" xref="S2.E1.m1.5.5.1.1.3.cmml">=</mo><mrow id="S2.E1.m1.5.5.1.1.4" xref="S2.E1.m1.5.5.1.1.4.cmml"><mi id="S2.E1.m1.5.5.1.1.4.2" xref="S2.E1.m1.5.5.1.1.4.2.cmml">H</mi><mo lspace="0em" rspace="0em" id="S2.E1.m1.5.5.1.1.4.1" xref="S2.E1.m1.5.5.1.1.4.1.cmml">​</mo><mrow id="S2.E1.m1.5.5.1.1.4.3.2" xref="S2.E1.m1.5.5.1.1.4.3.1.cmml"><mo stretchy="false" id="S2.E1.m1.5.5.1.1.4.3.2.1" xref="S2.E1.m1.5.5.1.1.4.3.1.cmml">(</mo><mi id="S2.E1.m1.3.3" xref="S2.E1.m1.3.3.cmml">𝐩</mi><mo id="S2.E1.m1.5.5.1.1.4.3.2.2" xref="S2.E1.m1.5.5.1.1.4.3.1.cmml">,</mo><mi id="S2.E1.m1.4.4" xref="S2.E1.m1.4.4.cmml">a</mi><mo stretchy="false" id="S2.E1.m1.5.5.1.1.4.3.2.3" xref="S2.E1.m1.5.5.1.1.4.3.1.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.5.5.1.1.5" xref="S2.E1.m1.5.5.1.1.5.cmml">=</mo><mrow id="S2.E1.m1.5.5.1.1.6" xref="S2.E1.m1.5.5.1.1.6.cmml"><mo rspace="0.167em" id="S2.E1.m1.5.5.1.1.6a" xref="S2.E1.m1.5.5.1.1.6.cmml">−</mo><mrow id="S2.E1.m1.5.5.1.1.6.2" xref="S2.E1.m1.5.5.1.1.6.2.cmml"><mi id="S2.E1.m1.5.5.1.1.6.2.1" xref="S2.E1.m1.5.5.1.1.6.2.1.cmml">log</mi><mo lspace="0.167em" id="S2.E1.m1.5.5.1.1.6.2a" xref="S2.E1.m1.5.5.1.1.6.2.cmml">⁡</mo><msub id="S2.E1.m1.5.5.1.1.6.2.2" xref="S2.E1.m1.5.5.1.1.6.2.2.cmml"><mi id="S2.E1.m1.5.5.1.1.6.2.2.2" xref="S2.E1.m1.5.5.1.1.6.2.2.2.cmml">𝐩</mi><mi id="S2.E1.m1.5.5.1.1.6.2.2.3" xref="S2.E1.m1.5.5.1.1.6.2.2.3.cmml">a</mi></msub></mrow></mrow></mrow><mo lspace="0em" id="S2.E1.m1.5.5.1.2" xref="S2.E1.m1.5.5.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.5b"><apply id="S2.E1.m1.5.5.1.1.cmml" xref="S2.E1.m1.5.5.1"><and id="S2.E1.m1.5.5.1.1a.cmml" xref="S2.E1.m1.5.5.1"></and><apply id="S2.E1.m1.5.5.1.1b.cmml" xref="S2.E1.m1.5.5.1"><eq id="S2.E1.m1.5.5.1.1.3.cmml" xref="S2.E1.m1.5.5.1.1.3"></eq><apply id="S2.E1.m1.5.5.1.1.2.cmml" xref="S2.E1.m1.5.5.1.1.2"><times id="S2.E1.m1.5.5.1.1.2.1.cmml" xref="S2.E1.m1.5.5.1.1.2.1"></times><apply id="S2.E1.m1.5.5.1.1.2.2.cmml" xref="S2.E1.m1.5.5.1.1.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.1.1.2.2.1.cmml" xref="S2.E1.m1.5.5.1.1.2.2">subscript</csymbol><ci id="S2.E1.m1.5.5.1.1.2.2.2.cmml" xref="S2.E1.m1.5.5.1.1.2.2.2">ℓ</ci><ci id="S2.E1.m1.5.5.1.1.2.2.3a.cmml" xref="S2.E1.m1.5.5.1.1.2.2.3"><mtext mathsize="70%" id="S2.E1.m1.5.5.1.1.2.2.3.cmml" xref="S2.E1.m1.5.5.1.1.2.2.3">VQA</mtext></ci></apply><interval closure="open" id="S2.E1.m1.5.5.1.1.2.3.1.cmml" xref="S2.E1.m1.5.5.1.1.2.3.2"><ci id="S2.E1.m1.1.1.cmml" xref="S2.E1.m1.1.1">𝐩</ci><ci id="S2.E1.m1.2.2.cmml" xref="S2.E1.m1.2.2">𝑎</ci></interval></apply><apply id="S2.E1.m1.5.5.1.1.4.cmml" xref="S2.E1.m1.5.5.1.1.4"><times id="S2.E1.m1.5.5.1.1.4.1.cmml" xref="S2.E1.m1.5.5.1.1.4.1"></times><ci id="S2.E1.m1.5.5.1.1.4.2.cmml" xref="S2.E1.m1.5.5.1.1.4.2">𝐻</ci><interval closure="open" id="S2.E1.m1.5.5.1.1.4.3.1.cmml" xref="S2.E1.m1.5.5.1.1.4.3.2"><ci id="S2.E1.m1.3.3.cmml" xref="S2.E1.m1.3.3">𝐩</ci><ci id="S2.E1.m1.4.4.cmml" xref="S2.E1.m1.4.4">𝑎</ci></interval></apply></apply><apply id="S2.E1.m1.5.5.1.1c.cmml" xref="S2.E1.m1.5.5.1"><eq id="S2.E1.m1.5.5.1.1.5.cmml" xref="S2.E1.m1.5.5.1.1.5"></eq><share href="#S2.E1.m1.5.5.1.1.4.cmml" id="S2.E1.m1.5.5.1.1d.cmml" xref="S2.E1.m1.5.5.1"></share><apply id="S2.E1.m1.5.5.1.1.6.cmml" xref="S2.E1.m1.5.5.1.1.6"><minus id="S2.E1.m1.5.5.1.1.6.1.cmml" xref="S2.E1.m1.5.5.1.1.6"></minus><apply id="S2.E1.m1.5.5.1.1.6.2.cmml" xref="S2.E1.m1.5.5.1.1.6.2"><log id="S2.E1.m1.5.5.1.1.6.2.1.cmml" xref="S2.E1.m1.5.5.1.1.6.2.1"></log><apply id="S2.E1.m1.5.5.1.1.6.2.2.cmml" xref="S2.E1.m1.5.5.1.1.6.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.5.5.1.1.6.2.2.1.cmml" xref="S2.E1.m1.5.5.1.1.6.2.2">subscript</csymbol><ci id="S2.E1.m1.5.5.1.1.6.2.2.2.cmml" xref="S2.E1.m1.5.5.1.1.6.2.2.2">𝐩</ci><ci id="S2.E1.m1.5.5.1.1.6.2.2.3.cmml" xref="S2.E1.m1.5.5.1.1.6.2.2.3">𝑎</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.5c">\ell_{\textrm{VQA}}(\mathbf{p},a)=H(\mathbf{p},a)=-\log\mathbf{p}_{a}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p id="S2.SS0.SSS1.p3.2" class="ltx_p">While this loss alone is sufficient to reach a reasonable performance, it ignores the potentially useful interactions that may exist among training questions.</p>
</div>
<figure id="S2.F2" class="ltx_figure"><img src="/html/2206.13296/assets/x2.png" id="S2.F2.1.g1" class="ltx_graphics ltx_centering ltx_img_square" width="322" height="352" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span><span id="S2.F2.12.1" class="ltx_text ltx_font_italic">Top:</span> VQA model architecture. <span id="S2.F2.13.2" class="ltx_text ltx_font_italic">Bottom:</span> Visualization of the training process with the proposed loss. The total loss, <math id="S2.F2.6.5.m1.1" class="ltx_Math" alttext="\ell_{\textrm{tot}}" display="inline"><semantics id="S2.F2.6.5.m1.1b"><msub id="S2.F2.6.5.m1.1.1" xref="S2.F2.6.5.m1.1.1.cmml"><mi mathvariant="normal" id="S2.F2.6.5.m1.1.1.2" xref="S2.F2.6.5.m1.1.1.2.cmml">ℓ</mi><mtext id="S2.F2.6.5.m1.1.1.3" xref="S2.F2.6.5.m1.1.1.3a.cmml">tot</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.F2.6.5.m1.1c"><apply id="S2.F2.6.5.m1.1.1.cmml" xref="S2.F2.6.5.m1.1.1"><csymbol cd="ambiguous" id="S2.F2.6.5.m1.1.1.1.cmml" xref="S2.F2.6.5.m1.1.1">subscript</csymbol><ci id="S2.F2.6.5.m1.1.1.2.cmml" xref="S2.F2.6.5.m1.1.1.2">ℓ</ci><ci id="S2.F2.6.5.m1.1.1.3a.cmml" xref="S2.F2.6.5.m1.1.1.3"><mtext mathsize="70%" id="S2.F2.6.5.m1.1.1.3.cmml" xref="S2.F2.6.5.m1.1.1.3">tot</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.6.5.m1.1d">\ell_{\textrm{tot}}</annotation></semantics></math>, is based on two terms: the conventional VQA loss, <math id="S2.F2.7.6.m2.1" class="ltx_Math" alttext="\ell_{\textrm{VQA}}" display="inline"><semantics id="S2.F2.7.6.m2.1b"><msub id="S2.F2.7.6.m2.1.1" xref="S2.F2.7.6.m2.1.1.cmml"><mi mathvariant="normal" id="S2.F2.7.6.m2.1.1.2" xref="S2.F2.7.6.m2.1.1.2.cmml">ℓ</mi><mtext id="S2.F2.7.6.m2.1.1.3" xref="S2.F2.7.6.m2.1.1.3a.cmml">VQA</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.F2.7.6.m2.1c"><apply id="S2.F2.7.6.m2.1.1.cmml" xref="S2.F2.7.6.m2.1.1"><csymbol cd="ambiguous" id="S2.F2.7.6.m2.1.1.1.cmml" xref="S2.F2.7.6.m2.1.1">subscript</csymbol><ci id="S2.F2.7.6.m2.1.1.2.cmml" xref="S2.F2.7.6.m2.1.1.2">ℓ</ci><ci id="S2.F2.7.6.m2.1.1.3a.cmml" xref="S2.F2.7.6.m2.1.1.3"><mtext mathsize="70%" id="S2.F2.7.6.m2.1.1.3.cmml" xref="S2.F2.7.6.m2.1.1.3">VQA</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.7.6.m2.1d">\ell_{\textrm{VQA}}</annotation></semantics></math> and our proposed consistency loss term, <math id="S2.F2.8.7.m3.1" class="ltx_Math" alttext="\ell_{\textrm{cons}}" display="inline"><semantics id="S2.F2.8.7.m3.1b"><msub id="S2.F2.8.7.m3.1.1" xref="S2.F2.8.7.m3.1.1.cmml"><mi mathvariant="normal" id="S2.F2.8.7.m3.1.1.2" xref="S2.F2.8.7.m3.1.1.2.cmml">ℓ</mi><mtext id="S2.F2.8.7.m3.1.1.3" xref="S2.F2.8.7.m3.1.1.3a.cmml">cons</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.F2.8.7.m3.1c"><apply id="S2.F2.8.7.m3.1.1.cmml" xref="S2.F2.8.7.m3.1.1"><csymbol cd="ambiguous" id="S2.F2.8.7.m3.1.1.1.cmml" xref="S2.F2.8.7.m3.1.1">subscript</csymbol><ci id="S2.F2.8.7.m3.1.1.2.cmml" xref="S2.F2.8.7.m3.1.1.2">ℓ</ci><ci id="S2.F2.8.7.m3.1.1.3a.cmml" xref="S2.F2.8.7.m3.1.1.3"><mtext mathsize="70%" id="S2.F2.8.7.m3.1.1.3.cmml" xref="S2.F2.8.7.m3.1.1.3">cons</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.8.7.m3.1d">\ell_{\textrm{cons}}</annotation></semantics></math>. The latter is computed only for pairs of main (reasoning) and sub (perception) questions. Training mini-batches consist of main and sub questions at the same time, whereby sub-questions can consider specific regions of the image. Unrelated questions (denoted with “ind”) can also be included in training batches, but do not contribute to <math id="S2.F2.9.8.m4.1" class="ltx_Math" alttext="\ell_{\textrm{cons}}" display="inline"><semantics id="S2.F2.9.8.m4.1b"><msub id="S2.F2.9.8.m4.1.1" xref="S2.F2.9.8.m4.1.1.cmml"><mi mathvariant="normal" id="S2.F2.9.8.m4.1.1.2" xref="S2.F2.9.8.m4.1.1.2.cmml">ℓ</mi><mtext id="S2.F2.9.8.m4.1.1.3" xref="S2.F2.9.8.m4.1.1.3a.cmml">cons</mtext></msub><annotation-xml encoding="MathML-Content" id="S2.F2.9.8.m4.1c"><apply id="S2.F2.9.8.m4.1.1.cmml" xref="S2.F2.9.8.m4.1.1"><csymbol cd="ambiguous" id="S2.F2.9.8.m4.1.1.1.cmml" xref="S2.F2.9.8.m4.1.1">subscript</csymbol><ci id="S2.F2.9.8.m4.1.1.2.cmml" xref="S2.F2.9.8.m4.1.1.2">ℓ</ci><ci id="S2.F2.9.8.m4.1.1.3a.cmml" xref="S2.F2.9.8.m4.1.1.3"><mtext mathsize="70%" id="S2.F2.9.8.m4.1.1.3.cmml" xref="S2.F2.9.8.m4.1.1.3">cons</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.9.8.m4.1d">\ell_{\textrm{cons}}</annotation></semantics></math>.</figcaption>
</figure>
</section>
<section id="S2.SS0.SSS2" class="ltx_subsubsection">
<h3 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.0.2 </span>Consistency loss.</h3>

<div id="S2.SS0.SSS2.p1" class="ltx_para">
<p id="S2.SS0.SSS2.p1.5" class="ltx_p">We aim to improve the quality of our VQA model by exploiting the relationships between reasoning and perception questions at training time. To this end, we augment the training dataset with an additional binary relation <math id="S2.SS0.SSS2.p1.1.m1.1" class="ltx_Math" alttext="\prec" display="inline"><semantics id="S2.SS0.SSS2.p1.1.m1.1a"><mo id="S2.SS0.SSS2.p1.1.m1.1.1" xref="S2.SS0.SSS2.p1.1.m1.1.1.cmml">≺</mo><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p1.1.m1.1b"><csymbol cd="latexml" id="S2.SS0.SSS2.p1.1.m1.1.1.cmml" xref="S2.SS0.SSS2.p1.1.m1.1.1">precedes</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p1.1.m1.1c">\prec</annotation></semantics></math> over the set of questions <math id="S2.SS0.SSS2.p1.2.m2.1" class="ltx_Math" alttext="\mathcal{Q}" display="inline"><semantics id="S2.SS0.SSS2.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS2.p1.2.m2.1.1" xref="S2.SS0.SSS2.p1.2.m2.1.1.cmml">𝒬</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p1.2.m2.1b"><ci id="S2.SS0.SSS2.p1.2.m2.1.1.cmml" xref="S2.SS0.SSS2.p1.2.m2.1.1">𝒬</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p1.2.m2.1c">\mathcal{Q}</annotation></semantics></math>. Two questions are related, <math id="S2.SS0.SSS2.p1.3.m3.2" class="ltx_Math" alttext="\mathbf{q}^{(i)}\prec\mathbf{q}^{(j)}" display="inline"><semantics id="S2.SS0.SSS2.p1.3.m3.2a"><mrow id="S2.SS0.SSS2.p1.3.m3.2.3" xref="S2.SS0.SSS2.p1.3.m3.2.3.cmml"><msup id="S2.SS0.SSS2.p1.3.m3.2.3.2" xref="S2.SS0.SSS2.p1.3.m3.2.3.2.cmml"><mi id="S2.SS0.SSS2.p1.3.m3.2.3.2.2" xref="S2.SS0.SSS2.p1.3.m3.2.3.2.2.cmml">𝐪</mi><mrow id="S2.SS0.SSS2.p1.3.m3.1.1.1.3" xref="S2.SS0.SSS2.p1.3.m3.2.3.2.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p1.3.m3.1.1.1.3.1" xref="S2.SS0.SSS2.p1.3.m3.2.3.2.cmml">(</mo><mi id="S2.SS0.SSS2.p1.3.m3.1.1.1.1" xref="S2.SS0.SSS2.p1.3.m3.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS2.p1.3.m3.1.1.1.3.2" xref="S2.SS0.SSS2.p1.3.m3.2.3.2.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS2.p1.3.m3.2.3.1" xref="S2.SS0.SSS2.p1.3.m3.2.3.1.cmml">≺</mo><msup id="S2.SS0.SSS2.p1.3.m3.2.3.3" xref="S2.SS0.SSS2.p1.3.m3.2.3.3.cmml"><mi id="S2.SS0.SSS2.p1.3.m3.2.3.3.2" xref="S2.SS0.SSS2.p1.3.m3.2.3.3.2.cmml">𝐪</mi><mrow id="S2.SS0.SSS2.p1.3.m3.2.2.1.3" xref="S2.SS0.SSS2.p1.3.m3.2.3.3.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p1.3.m3.2.2.1.3.1" xref="S2.SS0.SSS2.p1.3.m3.2.3.3.cmml">(</mo><mi id="S2.SS0.SSS2.p1.3.m3.2.2.1.1" xref="S2.SS0.SSS2.p1.3.m3.2.2.1.1.cmml">j</mi><mo stretchy="false" id="S2.SS0.SSS2.p1.3.m3.2.2.1.3.2" xref="S2.SS0.SSS2.p1.3.m3.2.3.3.cmml">)</mo></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p1.3.m3.2b"><apply id="S2.SS0.SSS2.p1.3.m3.2.3.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.3"><csymbol cd="latexml" id="S2.SS0.SSS2.p1.3.m3.2.3.1.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.3.1">precedes</csymbol><apply id="S2.SS0.SSS2.p1.3.m3.2.3.2.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.3.2"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p1.3.m3.2.3.2.1.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.3.2">superscript</csymbol><ci id="S2.SS0.SSS2.p1.3.m3.2.3.2.2.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.3.2.2">𝐪</ci><ci id="S2.SS0.SSS2.p1.3.m3.1.1.1.1.cmml" xref="S2.SS0.SSS2.p1.3.m3.1.1.1.1">𝑖</ci></apply><apply id="S2.SS0.SSS2.p1.3.m3.2.3.3.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.3.3"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p1.3.m3.2.3.3.1.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.3.3">superscript</csymbol><ci id="S2.SS0.SSS2.p1.3.m3.2.3.3.2.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.3.3.2">𝐪</ci><ci id="S2.SS0.SSS2.p1.3.m3.2.2.1.1.cmml" xref="S2.SS0.SSS2.p1.3.m3.2.2.1.1">𝑗</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p1.3.m3.2c">\mathbf{q}^{(i)}\prec\mathbf{q}^{(j)}</annotation></semantics></math>, if <math id="S2.SS0.SSS2.p1.4.m4.1" class="ltx_Math" alttext="\mathbf{q}^{(i)}" display="inline"><semantics id="S2.SS0.SSS2.p1.4.m4.1a"><msup id="S2.SS0.SSS2.p1.4.m4.1.2" xref="S2.SS0.SSS2.p1.4.m4.1.2.cmml"><mi id="S2.SS0.SSS2.p1.4.m4.1.2.2" xref="S2.SS0.SSS2.p1.4.m4.1.2.2.cmml">𝐪</mi><mrow id="S2.SS0.SSS2.p1.4.m4.1.1.1.3" xref="S2.SS0.SSS2.p1.4.m4.1.2.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p1.4.m4.1.1.1.3.1" xref="S2.SS0.SSS2.p1.4.m4.1.2.cmml">(</mo><mi id="S2.SS0.SSS2.p1.4.m4.1.1.1.1" xref="S2.SS0.SSS2.p1.4.m4.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS2.p1.4.m4.1.1.1.3.2" xref="S2.SS0.SSS2.p1.4.m4.1.2.cmml">)</mo></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p1.4.m4.1b"><apply id="S2.SS0.SSS2.p1.4.m4.1.2.cmml" xref="S2.SS0.SSS2.p1.4.m4.1.2"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p1.4.m4.1.2.1.cmml" xref="S2.SS0.SSS2.p1.4.m4.1.2">superscript</csymbol><ci id="S2.SS0.SSS2.p1.4.m4.1.2.2.cmml" xref="S2.SS0.SSS2.p1.4.m4.1.2.2">𝐪</ci><ci id="S2.SS0.SSS2.p1.4.m4.1.1.1.1.cmml" xref="S2.SS0.SSS2.p1.4.m4.1.1.1.1">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p1.4.m4.1c">\mathbf{q}^{(i)}</annotation></semantics></math> is a perception question associated to the reasoning question <math id="S2.SS0.SSS2.p1.5.m5.1" class="ltx_Math" alttext="\mathbf{q}^{(j)}" display="inline"><semantics id="S2.SS0.SSS2.p1.5.m5.1a"><msup id="S2.SS0.SSS2.p1.5.m5.1.2" xref="S2.SS0.SSS2.p1.5.m5.1.2.cmml"><mi id="S2.SS0.SSS2.p1.5.m5.1.2.2" xref="S2.SS0.SSS2.p1.5.m5.1.2.2.cmml">𝐪</mi><mrow id="S2.SS0.SSS2.p1.5.m5.1.1.1.3" xref="S2.SS0.SSS2.p1.5.m5.1.2.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p1.5.m5.1.1.1.3.1" xref="S2.SS0.SSS2.p1.5.m5.1.2.cmml">(</mo><mi id="S2.SS0.SSS2.p1.5.m5.1.1.1.1" xref="S2.SS0.SSS2.p1.5.m5.1.1.1.1.cmml">j</mi><mo stretchy="false" id="S2.SS0.SSS2.p1.5.m5.1.1.1.3.2" xref="S2.SS0.SSS2.p1.5.m5.1.2.cmml">)</mo></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p1.5.m5.1b"><apply id="S2.SS0.SSS2.p1.5.m5.1.2.cmml" xref="S2.SS0.SSS2.p1.5.m5.1.2"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p1.5.m5.1.2.1.cmml" xref="S2.SS0.SSS2.p1.5.m5.1.2">superscript</csymbol><ci id="S2.SS0.SSS2.p1.5.m5.1.2.2.cmml" xref="S2.SS0.SSS2.p1.5.m5.1.2.2">𝐪</ci><ci id="S2.SS0.SSS2.p1.5.m5.1.1.1.1.cmml" xref="S2.SS0.SSS2.p1.5.m5.1.1.1.1">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p1.5.m5.1c">\mathbf{q}^{(j)}</annotation></semantics></math>. From hence on, we refer to perception questions as <em id="S2.SS0.SSS2.p1.5.1" class="ltx_emph ltx_font_italic">sub-questions</em> and reasoning questions as <em id="S2.SS0.SSS2.p1.5.2" class="ltx_emph ltx_font_italic">main questions</em>.</p>
</div>
<div id="S2.SS0.SSS2.p2" class="ltx_para ltx_noindent">
<p id="S2.SS0.SSS2.p2.6" class="ltx_p">Following the terminology in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>, an inconsistency occurs when the VQA model infers the main question correctly but the sub-question incorrectly. Using the entropy as a measurement of incorrectness, we propose to impose the consistency at training time by penalizing the cases with high <math id="S2.SS0.SSS2.p2.1.m1.5" class="ltx_Math" alttext="H^{(i)}=H(\mathbf{p}^{(i)},a^{(i)})" display="inline"><semantics id="S2.SS0.SSS2.p2.1.m1.5a"><mrow id="S2.SS0.SSS2.p2.1.m1.5.5" xref="S2.SS0.SSS2.p2.1.m1.5.5.cmml"><msup id="S2.SS0.SSS2.p2.1.m1.5.5.4" xref="S2.SS0.SSS2.p2.1.m1.5.5.4.cmml"><mi id="S2.SS0.SSS2.p2.1.m1.5.5.4.2" xref="S2.SS0.SSS2.p2.1.m1.5.5.4.2.cmml">H</mi><mrow id="S2.SS0.SSS2.p2.1.m1.1.1.1.3" xref="S2.SS0.SSS2.p2.1.m1.5.5.4.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.1.m1.1.1.1.3.1" xref="S2.SS0.SSS2.p2.1.m1.5.5.4.cmml">(</mo><mi id="S2.SS0.SSS2.p2.1.m1.1.1.1.1" xref="S2.SS0.SSS2.p2.1.m1.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.1.m1.1.1.1.3.2" xref="S2.SS0.SSS2.p2.1.m1.5.5.4.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS2.p2.1.m1.5.5.3" xref="S2.SS0.SSS2.p2.1.m1.5.5.3.cmml">=</mo><mrow id="S2.SS0.SSS2.p2.1.m1.5.5.2" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.cmml"><mi id="S2.SS0.SSS2.p2.1.m1.5.5.2.4" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.4.cmml">H</mi><mo lspace="0em" rspace="0em" id="S2.SS0.SSS2.p2.1.m1.5.5.2.3" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.3.cmml">​</mo><mrow id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.3.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.3" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.3.cmml">(</mo><msup id="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1" xref="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.cmml"><mi id="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.2" xref="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.2.cmml">𝐩</mi><mrow id="S2.SS0.SSS2.p2.1.m1.2.2.1.3" xref="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.1.m1.2.2.1.3.1" xref="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.cmml">(</mo><mi id="S2.SS0.SSS2.p2.1.m1.2.2.1.1" xref="S2.SS0.SSS2.p2.1.m1.2.2.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.1.m1.2.2.1.3.2" xref="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.4" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.3.cmml">,</mo><msup id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.cmml"><mi id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.2" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.2.cmml">a</mi><mrow id="S2.SS0.SSS2.p2.1.m1.3.3.1.3" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.1.m1.3.3.1.3.1" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.cmml">(</mo><mi id="S2.SS0.SSS2.p2.1.m1.3.3.1.1" xref="S2.SS0.SSS2.p2.1.m1.3.3.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.1.m1.3.3.1.3.2" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.cmml">)</mo></mrow></msup><mo stretchy="false" id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.5" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p2.1.m1.5b"><apply id="S2.SS0.SSS2.p2.1.m1.5.5.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5"><eq id="S2.SS0.SSS2.p2.1.m1.5.5.3.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.3"></eq><apply id="S2.SS0.SSS2.p2.1.m1.5.5.4.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.4"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.1.m1.5.5.4.1.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.4">superscript</csymbol><ci id="S2.SS0.SSS2.p2.1.m1.5.5.4.2.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.4.2">𝐻</ci><ci id="S2.SS0.SSS2.p2.1.m1.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.1.m1.1.1.1.1">𝑖</ci></apply><apply id="S2.SS0.SSS2.p2.1.m1.5.5.2.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.2"><times id="S2.SS0.SSS2.p2.1.m1.5.5.2.3.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.3"></times><ci id="S2.SS0.SSS2.p2.1.m1.5.5.2.4.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.4">𝐻</ci><interval closure="open" id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.3.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2"><apply id="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1">superscript</csymbol><ci id="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.2.cmml" xref="S2.SS0.SSS2.p2.1.m1.4.4.1.1.1.1.2">𝐩</ci><ci id="S2.SS0.SSS2.p2.1.m1.2.2.1.1.cmml" xref="S2.SS0.SSS2.p2.1.m1.2.2.1.1">𝑖</ci></apply><apply id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.1.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2">superscript</csymbol><ci id="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.2.cmml" xref="S2.SS0.SSS2.p2.1.m1.5.5.2.2.2.2.2">𝑎</ci><ci id="S2.SS0.SSS2.p2.1.m1.3.3.1.1.cmml" xref="S2.SS0.SSS2.p2.1.m1.3.3.1.1">𝑖</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p2.1.m1.5c">H^{(i)}=H(\mathbf{p}^{(i)},a^{(i)})</annotation></semantics></math> and low <math id="S2.SS0.SSS2.p2.2.m2.5" class="ltx_Math" alttext="H^{(j)}=H(\mathbf{p}^{(j)},a^{(j)})" display="inline"><semantics id="S2.SS0.SSS2.p2.2.m2.5a"><mrow id="S2.SS0.SSS2.p2.2.m2.5.5" xref="S2.SS0.SSS2.p2.2.m2.5.5.cmml"><msup id="S2.SS0.SSS2.p2.2.m2.5.5.4" xref="S2.SS0.SSS2.p2.2.m2.5.5.4.cmml"><mi id="S2.SS0.SSS2.p2.2.m2.5.5.4.2" xref="S2.SS0.SSS2.p2.2.m2.5.5.4.2.cmml">H</mi><mrow id="S2.SS0.SSS2.p2.2.m2.1.1.1.3" xref="S2.SS0.SSS2.p2.2.m2.5.5.4.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.2.m2.1.1.1.3.1" xref="S2.SS0.SSS2.p2.2.m2.5.5.4.cmml">(</mo><mi id="S2.SS0.SSS2.p2.2.m2.1.1.1.1" xref="S2.SS0.SSS2.p2.2.m2.1.1.1.1.cmml">j</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.2.m2.1.1.1.3.2" xref="S2.SS0.SSS2.p2.2.m2.5.5.4.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS2.p2.2.m2.5.5.3" xref="S2.SS0.SSS2.p2.2.m2.5.5.3.cmml">=</mo><mrow id="S2.SS0.SSS2.p2.2.m2.5.5.2" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.cmml"><mi id="S2.SS0.SSS2.p2.2.m2.5.5.2.4" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.4.cmml">H</mi><mo lspace="0em" rspace="0em" id="S2.SS0.SSS2.p2.2.m2.5.5.2.3" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.3.cmml">​</mo><mrow id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.3.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.3" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.3.cmml">(</mo><msup id="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1" xref="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.cmml"><mi id="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.2" xref="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.2.cmml">𝐩</mi><mrow id="S2.SS0.SSS2.p2.2.m2.2.2.1.3" xref="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.2.m2.2.2.1.3.1" xref="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.cmml">(</mo><mi id="S2.SS0.SSS2.p2.2.m2.2.2.1.1" xref="S2.SS0.SSS2.p2.2.m2.2.2.1.1.cmml">j</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.2.m2.2.2.1.3.2" xref="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.4" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.3.cmml">,</mo><msup id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.cmml"><mi id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.2" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.2.cmml">a</mi><mrow id="S2.SS0.SSS2.p2.2.m2.3.3.1.3" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.2.m2.3.3.1.3.1" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.cmml">(</mo><mi id="S2.SS0.SSS2.p2.2.m2.3.3.1.1" xref="S2.SS0.SSS2.p2.2.m2.3.3.1.1.cmml">j</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.2.m2.3.3.1.3.2" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.cmml">)</mo></mrow></msup><mo stretchy="false" id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.5" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p2.2.m2.5b"><apply id="S2.SS0.SSS2.p2.2.m2.5.5.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5"><eq id="S2.SS0.SSS2.p2.2.m2.5.5.3.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.3"></eq><apply id="S2.SS0.SSS2.p2.2.m2.5.5.4.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.4"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.2.m2.5.5.4.1.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.4">superscript</csymbol><ci id="S2.SS0.SSS2.p2.2.m2.5.5.4.2.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.4.2">𝐻</ci><ci id="S2.SS0.SSS2.p2.2.m2.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.2.m2.1.1.1.1">𝑗</ci></apply><apply id="S2.SS0.SSS2.p2.2.m2.5.5.2.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.2"><times id="S2.SS0.SSS2.p2.2.m2.5.5.2.3.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.3"></times><ci id="S2.SS0.SSS2.p2.2.m2.5.5.2.4.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.4">𝐻</ci><interval closure="open" id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.3.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2"><apply id="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1">superscript</csymbol><ci id="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.2.cmml" xref="S2.SS0.SSS2.p2.2.m2.4.4.1.1.1.1.2">𝐩</ci><ci id="S2.SS0.SSS2.p2.2.m2.2.2.1.1.cmml" xref="S2.SS0.SSS2.p2.2.m2.2.2.1.1">𝑗</ci></apply><apply id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.1.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2">superscript</csymbol><ci id="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.2.cmml" xref="S2.SS0.SSS2.p2.2.m2.5.5.2.2.2.2.2">𝑎</ci><ci id="S2.SS0.SSS2.p2.2.m2.3.3.1.1.cmml" xref="S2.SS0.SSS2.p2.2.m2.3.3.1.1">𝑗</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p2.2.m2.5c">H^{(j)}=H(\mathbf{p}^{(j)},a^{(j)})</annotation></semantics></math> when <math id="S2.SS0.SSS2.p2.3.m3.2" class="ltx_Math" alttext="\mathbf{q}^{(i)}\prec\mathbf{q}^{(j)}" display="inline"><semantics id="S2.SS0.SSS2.p2.3.m3.2a"><mrow id="S2.SS0.SSS2.p2.3.m3.2.3" xref="S2.SS0.SSS2.p2.3.m3.2.3.cmml"><msup id="S2.SS0.SSS2.p2.3.m3.2.3.2" xref="S2.SS0.SSS2.p2.3.m3.2.3.2.cmml"><mi id="S2.SS0.SSS2.p2.3.m3.2.3.2.2" xref="S2.SS0.SSS2.p2.3.m3.2.3.2.2.cmml">𝐪</mi><mrow id="S2.SS0.SSS2.p2.3.m3.1.1.1.3" xref="S2.SS0.SSS2.p2.3.m3.2.3.2.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.3.m3.1.1.1.3.1" xref="S2.SS0.SSS2.p2.3.m3.2.3.2.cmml">(</mo><mi id="S2.SS0.SSS2.p2.3.m3.1.1.1.1" xref="S2.SS0.SSS2.p2.3.m3.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.3.m3.1.1.1.3.2" xref="S2.SS0.SSS2.p2.3.m3.2.3.2.cmml">)</mo></mrow></msup><mo id="S2.SS0.SSS2.p2.3.m3.2.3.1" xref="S2.SS0.SSS2.p2.3.m3.2.3.1.cmml">≺</mo><msup id="S2.SS0.SSS2.p2.3.m3.2.3.3" xref="S2.SS0.SSS2.p2.3.m3.2.3.3.cmml"><mi id="S2.SS0.SSS2.p2.3.m3.2.3.3.2" xref="S2.SS0.SSS2.p2.3.m3.2.3.3.2.cmml">𝐪</mi><mrow id="S2.SS0.SSS2.p2.3.m3.2.2.1.3" xref="S2.SS0.SSS2.p2.3.m3.2.3.3.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.3.m3.2.2.1.3.1" xref="S2.SS0.SSS2.p2.3.m3.2.3.3.cmml">(</mo><mi id="S2.SS0.SSS2.p2.3.m3.2.2.1.1" xref="S2.SS0.SSS2.p2.3.m3.2.2.1.1.cmml">j</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.3.m3.2.2.1.3.2" xref="S2.SS0.SSS2.p2.3.m3.2.3.3.cmml">)</mo></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p2.3.m3.2b"><apply id="S2.SS0.SSS2.p2.3.m3.2.3.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.3"><csymbol cd="latexml" id="S2.SS0.SSS2.p2.3.m3.2.3.1.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.3.1">precedes</csymbol><apply id="S2.SS0.SSS2.p2.3.m3.2.3.2.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.3.2"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.3.m3.2.3.2.1.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.3.2">superscript</csymbol><ci id="S2.SS0.SSS2.p2.3.m3.2.3.2.2.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.3.2.2">𝐪</ci><ci id="S2.SS0.SSS2.p2.3.m3.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.3.m3.1.1.1.1">𝑖</ci></apply><apply id="S2.SS0.SSS2.p2.3.m3.2.3.3.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.3.3"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.3.m3.2.3.3.1.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.3.3">superscript</csymbol><ci id="S2.SS0.SSS2.p2.3.m3.2.3.3.2.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.3.3.2">𝐪</ci><ci id="S2.SS0.SSS2.p2.3.m3.2.2.1.1.cmml" xref="S2.SS0.SSS2.p2.3.m3.2.2.1.1">𝑗</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p2.3.m3.2c">\mathbf{q}^{(i)}\prec\mathbf{q}^{(j)}</annotation></semantics></math>. To do this, we use an adapted hinge loss that disables the penalty when <math id="S2.SS0.SSS2.p2.4.m4.1" class="ltx_Math" alttext="H^{(j)}" display="inline"><semantics id="S2.SS0.SSS2.p2.4.m4.1a"><msup id="S2.SS0.SSS2.p2.4.m4.1.2" xref="S2.SS0.SSS2.p2.4.m4.1.2.cmml"><mi id="S2.SS0.SSS2.p2.4.m4.1.2.2" xref="S2.SS0.SSS2.p2.4.m4.1.2.2.cmml">H</mi><mrow id="S2.SS0.SSS2.p2.4.m4.1.1.1.3" xref="S2.SS0.SSS2.p2.4.m4.1.2.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.4.m4.1.1.1.3.1" xref="S2.SS0.SSS2.p2.4.m4.1.2.cmml">(</mo><mi id="S2.SS0.SSS2.p2.4.m4.1.1.1.1" xref="S2.SS0.SSS2.p2.4.m4.1.1.1.1.cmml">j</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.4.m4.1.1.1.3.2" xref="S2.SS0.SSS2.p2.4.m4.1.2.cmml">)</mo></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p2.4.m4.1b"><apply id="S2.SS0.SSS2.p2.4.m4.1.2.cmml" xref="S2.SS0.SSS2.p2.4.m4.1.2"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.4.m4.1.2.1.cmml" xref="S2.SS0.SSS2.p2.4.m4.1.2">superscript</csymbol><ci id="S2.SS0.SSS2.p2.4.m4.1.2.2.cmml" xref="S2.SS0.SSS2.p2.4.m4.1.2.2">𝐻</ci><ci id="S2.SS0.SSS2.p2.4.m4.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.4.m4.1.1.1.1">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p2.4.m4.1c">H^{(j)}</annotation></semantics></math> is larger than a threshold <math id="S2.SS0.SSS2.p2.5.m5.1" class="ltx_Math" alttext="\gamma&gt;0" display="inline"><semantics id="S2.SS0.SSS2.p2.5.m5.1a"><mrow id="S2.SS0.SSS2.p2.5.m5.1.1" xref="S2.SS0.SSS2.p2.5.m5.1.1.cmml"><mi id="S2.SS0.SSS2.p2.5.m5.1.1.2" xref="S2.SS0.SSS2.p2.5.m5.1.1.2.cmml">γ</mi><mo id="S2.SS0.SSS2.p2.5.m5.1.1.1" xref="S2.SS0.SSS2.p2.5.m5.1.1.1.cmml">&gt;</mo><mn id="S2.SS0.SSS2.p2.5.m5.1.1.3" xref="S2.SS0.SSS2.p2.5.m5.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p2.5.m5.1b"><apply id="S2.SS0.SSS2.p2.5.m5.1.1.cmml" xref="S2.SS0.SSS2.p2.5.m5.1.1"><gt id="S2.SS0.SSS2.p2.5.m5.1.1.1.cmml" xref="S2.SS0.SSS2.p2.5.m5.1.1.1"></gt><ci id="S2.SS0.SSS2.p2.5.m5.1.1.2.cmml" xref="S2.SS0.SSS2.p2.5.m5.1.1.2">𝛾</ci><cn type="integer" id="S2.SS0.SSS2.p2.5.m5.1.1.3.cmml" xref="S2.SS0.SSS2.p2.5.m5.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p2.5.m5.1c">\gamma&gt;0</annotation></semantics></math>, but otherwise penalizes large values of <math id="S2.SS0.SSS2.p2.6.m6.1" class="ltx_Math" alttext="H^{(i)}" display="inline"><semantics id="S2.SS0.SSS2.p2.6.m6.1a"><msup id="S2.SS0.SSS2.p2.6.m6.1.2" xref="S2.SS0.SSS2.p2.6.m6.1.2.cmml"><mi id="S2.SS0.SSS2.p2.6.m6.1.2.2" xref="S2.SS0.SSS2.p2.6.m6.1.2.2.cmml">H</mi><mrow id="S2.SS0.SSS2.p2.6.m6.1.1.1.3" xref="S2.SS0.SSS2.p2.6.m6.1.2.cmml"><mo stretchy="false" id="S2.SS0.SSS2.p2.6.m6.1.1.1.3.1" xref="S2.SS0.SSS2.p2.6.m6.1.2.cmml">(</mo><mi id="S2.SS0.SSS2.p2.6.m6.1.1.1.1" xref="S2.SS0.SSS2.p2.6.m6.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S2.SS0.SSS2.p2.6.m6.1.1.1.3.2" xref="S2.SS0.SSS2.p2.6.m6.1.2.cmml">)</mo></mrow></msup><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p2.6.m6.1b"><apply id="S2.SS0.SSS2.p2.6.m6.1.2.cmml" xref="S2.SS0.SSS2.p2.6.m6.1.2"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p2.6.m6.1.2.1.cmml" xref="S2.SS0.SSS2.p2.6.m6.1.2">superscript</csymbol><ci id="S2.SS0.SSS2.p2.6.m6.1.2.2.cmml" xref="S2.SS0.SSS2.p2.6.m6.1.2.2">𝐻</ci><ci id="S2.SS0.SSS2.p2.6.m6.1.1.1.1.cmml" xref="S2.SS0.SSS2.p2.6.m6.1.1.1.1">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p2.6.m6.1c">H^{(i)}</annotation></semantics></math>,</p>
<table id="S2.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E2.m1.7" class="ltx_Math" alttext="\ell_{\textrm{cons}}(H^{(i)},H^{(j)})=H^{(i)}\max\{0,\gamma-H^{(j)}\}." display="block"><semantics id="S2.E2.m1.7a"><mrow id="S2.E2.m1.7.7.1" xref="S2.E2.m1.7.7.1.1.cmml"><mrow id="S2.E2.m1.7.7.1.1" xref="S2.E2.m1.7.7.1.1.cmml"><mrow id="S2.E2.m1.7.7.1.1.2" xref="S2.E2.m1.7.7.1.1.2.cmml"><msub id="S2.E2.m1.7.7.1.1.2.4" xref="S2.E2.m1.7.7.1.1.2.4.cmml"><mi mathvariant="normal" id="S2.E2.m1.7.7.1.1.2.4.2" xref="S2.E2.m1.7.7.1.1.2.4.2.cmml">ℓ</mi><mtext id="S2.E2.m1.7.7.1.1.2.4.3" xref="S2.E2.m1.7.7.1.1.2.4.3a.cmml">cons</mtext></msub><mo lspace="0em" rspace="0em" id="S2.E2.m1.7.7.1.1.2.3" xref="S2.E2.m1.7.7.1.1.2.3.cmml">​</mo><mrow id="S2.E2.m1.7.7.1.1.2.2.2" xref="S2.E2.m1.7.7.1.1.2.2.3.cmml"><mo stretchy="false" id="S2.E2.m1.7.7.1.1.2.2.2.3" xref="S2.E2.m1.7.7.1.1.2.2.3.cmml">(</mo><msup id="S2.E2.m1.7.7.1.1.1.1.1.1" xref="S2.E2.m1.7.7.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.7.7.1.1.1.1.1.1.2" xref="S2.E2.m1.7.7.1.1.1.1.1.1.2.cmml">H</mi><mrow id="S2.E2.m1.1.1.1.3" xref="S2.E2.m1.7.7.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E2.m1.1.1.1.3.1" xref="S2.E2.m1.7.7.1.1.1.1.1.1.cmml">(</mo><mi id="S2.E2.m1.1.1.1.1" xref="S2.E2.m1.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S2.E2.m1.1.1.1.3.2" xref="S2.E2.m1.7.7.1.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S2.E2.m1.7.7.1.1.2.2.2.4" xref="S2.E2.m1.7.7.1.1.2.2.3.cmml">,</mo><msup id="S2.E2.m1.7.7.1.1.2.2.2.2" xref="S2.E2.m1.7.7.1.1.2.2.2.2.cmml"><mi id="S2.E2.m1.7.7.1.1.2.2.2.2.2" xref="S2.E2.m1.7.7.1.1.2.2.2.2.2.cmml">H</mi><mrow id="S2.E2.m1.2.2.1.3" xref="S2.E2.m1.7.7.1.1.2.2.2.2.cmml"><mo stretchy="false" id="S2.E2.m1.2.2.1.3.1" xref="S2.E2.m1.7.7.1.1.2.2.2.2.cmml">(</mo><mi id="S2.E2.m1.2.2.1.1" xref="S2.E2.m1.2.2.1.1.cmml">j</mi><mo stretchy="false" id="S2.E2.m1.2.2.1.3.2" xref="S2.E2.m1.7.7.1.1.2.2.2.2.cmml">)</mo></mrow></msup><mo stretchy="false" id="S2.E2.m1.7.7.1.1.2.2.2.5" xref="S2.E2.m1.7.7.1.1.2.2.3.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.7.7.1.1.4" xref="S2.E2.m1.7.7.1.1.4.cmml">=</mo><mrow id="S2.E2.m1.7.7.1.1.3" xref="S2.E2.m1.7.7.1.1.3.cmml"><msup id="S2.E2.m1.7.7.1.1.3.3" xref="S2.E2.m1.7.7.1.1.3.3.cmml"><mi id="S2.E2.m1.7.7.1.1.3.3.2" xref="S2.E2.m1.7.7.1.1.3.3.2.cmml">H</mi><mrow id="S2.E2.m1.3.3.1.3" xref="S2.E2.m1.7.7.1.1.3.3.cmml"><mo stretchy="false" id="S2.E2.m1.3.3.1.3.1" xref="S2.E2.m1.7.7.1.1.3.3.cmml">(</mo><mi id="S2.E2.m1.3.3.1.1" xref="S2.E2.m1.3.3.1.1.cmml">i</mi><mo stretchy="false" id="S2.E2.m1.3.3.1.3.2" xref="S2.E2.m1.7.7.1.1.3.3.cmml">)</mo></mrow></msup><mo lspace="0.167em" rspace="0em" id="S2.E2.m1.7.7.1.1.3.2" xref="S2.E2.m1.7.7.1.1.3.2.cmml">​</mo><mrow id="S2.E2.m1.7.7.1.1.3.1.1" xref="S2.E2.m1.7.7.1.1.3.1.2.cmml"><mi id="S2.E2.m1.5.5" xref="S2.E2.m1.5.5.cmml">max</mi><mo id="S2.E2.m1.7.7.1.1.3.1.1a" xref="S2.E2.m1.7.7.1.1.3.1.2.cmml">⁡</mo><mrow id="S2.E2.m1.7.7.1.1.3.1.1.1" xref="S2.E2.m1.7.7.1.1.3.1.2.cmml"><mo stretchy="false" id="S2.E2.m1.7.7.1.1.3.1.1.1.2" xref="S2.E2.m1.7.7.1.1.3.1.2.cmml">{</mo><mn id="S2.E2.m1.6.6" xref="S2.E2.m1.6.6.cmml">0</mn><mo id="S2.E2.m1.7.7.1.1.3.1.1.1.3" xref="S2.E2.m1.7.7.1.1.3.1.2.cmml">,</mo><mrow id="S2.E2.m1.7.7.1.1.3.1.1.1.1" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.cmml"><mi id="S2.E2.m1.7.7.1.1.3.1.1.1.1.2" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.2.cmml">γ</mi><mo id="S2.E2.m1.7.7.1.1.3.1.1.1.1.1" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.1.cmml">−</mo><msup id="S2.E2.m1.7.7.1.1.3.1.1.1.1.3" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.cmml"><mi id="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.2" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.2.cmml">H</mi><mrow id="S2.E2.m1.4.4.1.3" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.cmml"><mo stretchy="false" id="S2.E2.m1.4.4.1.3.1" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.cmml">(</mo><mi id="S2.E2.m1.4.4.1.1" xref="S2.E2.m1.4.4.1.1.cmml">j</mi><mo stretchy="false" id="S2.E2.m1.4.4.1.3.2" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.cmml">)</mo></mrow></msup></mrow><mo stretchy="false" id="S2.E2.m1.7.7.1.1.3.1.1.1.4" xref="S2.E2.m1.7.7.1.1.3.1.2.cmml">}</mo></mrow></mrow></mrow></mrow><mo lspace="0em" id="S2.E2.m1.7.7.1.2" xref="S2.E2.m1.7.7.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.7b"><apply id="S2.E2.m1.7.7.1.1.cmml" xref="S2.E2.m1.7.7.1"><eq id="S2.E2.m1.7.7.1.1.4.cmml" xref="S2.E2.m1.7.7.1.1.4"></eq><apply id="S2.E2.m1.7.7.1.1.2.cmml" xref="S2.E2.m1.7.7.1.1.2"><times id="S2.E2.m1.7.7.1.1.2.3.cmml" xref="S2.E2.m1.7.7.1.1.2.3"></times><apply id="S2.E2.m1.7.7.1.1.2.4.cmml" xref="S2.E2.m1.7.7.1.1.2.4"><csymbol cd="ambiguous" id="S2.E2.m1.7.7.1.1.2.4.1.cmml" xref="S2.E2.m1.7.7.1.1.2.4">subscript</csymbol><ci id="S2.E2.m1.7.7.1.1.2.4.2.cmml" xref="S2.E2.m1.7.7.1.1.2.4.2">ℓ</ci><ci id="S2.E2.m1.7.7.1.1.2.4.3a.cmml" xref="S2.E2.m1.7.7.1.1.2.4.3"><mtext mathsize="70%" id="S2.E2.m1.7.7.1.1.2.4.3.cmml" xref="S2.E2.m1.7.7.1.1.2.4.3">cons</mtext></ci></apply><interval closure="open" id="S2.E2.m1.7.7.1.1.2.2.3.cmml" xref="S2.E2.m1.7.7.1.1.2.2.2"><apply id="S2.E2.m1.7.7.1.1.1.1.1.1.cmml" xref="S2.E2.m1.7.7.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.7.7.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.7.7.1.1.1.1.1.1">superscript</csymbol><ci id="S2.E2.m1.7.7.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.7.7.1.1.1.1.1.1.2">𝐻</ci><ci id="S2.E2.m1.1.1.1.1.cmml" xref="S2.E2.m1.1.1.1.1">𝑖</ci></apply><apply id="S2.E2.m1.7.7.1.1.2.2.2.2.cmml" xref="S2.E2.m1.7.7.1.1.2.2.2.2"><csymbol cd="ambiguous" id="S2.E2.m1.7.7.1.1.2.2.2.2.1.cmml" xref="S2.E2.m1.7.7.1.1.2.2.2.2">superscript</csymbol><ci id="S2.E2.m1.7.7.1.1.2.2.2.2.2.cmml" xref="S2.E2.m1.7.7.1.1.2.2.2.2.2">𝐻</ci><ci id="S2.E2.m1.2.2.1.1.cmml" xref="S2.E2.m1.2.2.1.1">𝑗</ci></apply></interval></apply><apply id="S2.E2.m1.7.7.1.1.3.cmml" xref="S2.E2.m1.7.7.1.1.3"><times id="S2.E2.m1.7.7.1.1.3.2.cmml" xref="S2.E2.m1.7.7.1.1.3.2"></times><apply id="S2.E2.m1.7.7.1.1.3.3.cmml" xref="S2.E2.m1.7.7.1.1.3.3"><csymbol cd="ambiguous" id="S2.E2.m1.7.7.1.1.3.3.1.cmml" xref="S2.E2.m1.7.7.1.1.3.3">superscript</csymbol><ci id="S2.E2.m1.7.7.1.1.3.3.2.cmml" xref="S2.E2.m1.7.7.1.1.3.3.2">𝐻</ci><ci id="S2.E2.m1.3.3.1.1.cmml" xref="S2.E2.m1.3.3.1.1">𝑖</ci></apply><apply id="S2.E2.m1.7.7.1.1.3.1.2.cmml" xref="S2.E2.m1.7.7.1.1.3.1.1"><max id="S2.E2.m1.5.5.cmml" xref="S2.E2.m1.5.5"></max><cn type="integer" id="S2.E2.m1.6.6.cmml" xref="S2.E2.m1.6.6">0</cn><apply id="S2.E2.m1.7.7.1.1.3.1.1.1.1.cmml" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1"><minus id="S2.E2.m1.7.7.1.1.3.1.1.1.1.1.cmml" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.1"></minus><ci id="S2.E2.m1.7.7.1.1.3.1.1.1.1.2.cmml" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.2">𝛾</ci><apply id="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.cmml" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.1.cmml" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.3">superscript</csymbol><ci id="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.2.cmml" xref="S2.E2.m1.7.7.1.1.3.1.1.1.1.3.2">𝐻</ci><ci id="S2.E2.m1.4.4.1.1.cmml" xref="S2.E2.m1.4.4.1.1">𝑗</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.7c">\ell_{\textrm{cons}}(H^{(i)},H^{(j)})=H^{(i)}\max\{0,\gamma-H^{(j)}\}.</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
<div id="S2.SS0.SSS2.p3" class="ltx_para">
<p id="S2.SS0.SSS2.p3.1" class="ltx_p">The final cost function then minimizes the expected value of the VQA loss (<a href="#S2.E1" title="In 2.0.1 VQA model. ‣ 2 Method ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>) for the elements of the training dataset and the consistency loss (<a href="#S2.E2" title="In 2.0.2 Consistency loss. ‣ 2 Method ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>) for the pairs of training samples with <math id="S2.SS0.SSS2.p3.1.m1.1" class="ltx_Math" alttext="\prec" display="inline"><semantics id="S2.SS0.SSS2.p3.1.m1.1a"><mo id="S2.SS0.SSS2.p3.1.m1.1.1" xref="S2.SS0.SSS2.p3.1.m1.1.1.cmml">≺</mo><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p3.1.m1.1b"><csymbol cd="latexml" id="S2.SS0.SSS2.p3.1.m1.1.1.cmml" xref="S2.SS0.SSS2.p3.1.m1.1.1">precedes</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p3.1.m1.1c">\prec</annotation></semantics></math>-related questions,</p>
<table id="S2.E3" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S2.E3.m1.13" class="ltx_Math" alttext="\mathbb{E}_{t\sim\mathcal{T}}[\ell_{\textrm{VQA}}(\mathbf{p},a)]+\lambda\mathbb{E}_{(t^{(i)},t^{(j)})\sim\mathcal{T}^{2}}[\ell_{\textrm{cons}}(H^{(i)},H^{(j)})\mid\mathbf{x}^{(i)}=\mathbf{x}^{(j)},\mathbf{q}^{(i)}\prec\mathbf{q}^{(j)}]," display="block"><semantics id="S2.E3.m1.13a"><mrow id="S2.E3.m1.13.13.1" xref="S2.E3.m1.13.13.1.1.cmml"><mrow id="S2.E3.m1.13.13.1.1" xref="S2.E3.m1.13.13.1.1.cmml"><mrow id="S2.E3.m1.13.13.1.1.1" xref="S2.E3.m1.13.13.1.1.1.cmml"><msub id="S2.E3.m1.13.13.1.1.1.3" xref="S2.E3.m1.13.13.1.1.1.3.cmml"><mi id="S2.E3.m1.13.13.1.1.1.3.2" xref="S2.E3.m1.13.13.1.1.1.3.2.cmml">𝔼</mi><mrow id="S2.E3.m1.13.13.1.1.1.3.3" xref="S2.E3.m1.13.13.1.1.1.3.3.cmml"><mi id="S2.E3.m1.13.13.1.1.1.3.3.2" xref="S2.E3.m1.13.13.1.1.1.3.3.2.cmml">t</mi><mo id="S2.E3.m1.13.13.1.1.1.3.3.1" xref="S2.E3.m1.13.13.1.1.1.3.3.1.cmml">∼</mo><mi class="ltx_font_mathcaligraphic" id="S2.E3.m1.13.13.1.1.1.3.3.3" xref="S2.E3.m1.13.13.1.1.1.3.3.3.cmml">𝒯</mi></mrow></msub><mo lspace="0em" rspace="0em" id="S2.E3.m1.13.13.1.1.1.2" xref="S2.E3.m1.13.13.1.1.1.2.cmml">​</mo><mrow id="S2.E3.m1.13.13.1.1.1.1.1" xref="S2.E3.m1.13.13.1.1.1.1.2.cmml"><mo stretchy="false" id="S2.E3.m1.13.13.1.1.1.1.1.2" xref="S2.E3.m1.13.13.1.1.1.1.2.1.cmml">[</mo><mrow id="S2.E3.m1.13.13.1.1.1.1.1.1" xref="S2.E3.m1.13.13.1.1.1.1.1.1.cmml"><msub id="S2.E3.m1.13.13.1.1.1.1.1.1.2" xref="S2.E3.m1.13.13.1.1.1.1.1.1.2.cmml"><mi mathvariant="normal" id="S2.E3.m1.13.13.1.1.1.1.1.1.2.2" xref="S2.E3.m1.13.13.1.1.1.1.1.1.2.2.cmml">ℓ</mi><mtext id="S2.E3.m1.13.13.1.1.1.1.1.1.2.3" xref="S2.E3.m1.13.13.1.1.1.1.1.1.2.3a.cmml">VQA</mtext></msub><mo lspace="0em" rspace="0em" id="S2.E3.m1.13.13.1.1.1.1.1.1.1" xref="S2.E3.m1.13.13.1.1.1.1.1.1.1.cmml">​</mo><mrow id="S2.E3.m1.13.13.1.1.1.1.1.1.3.2" xref="S2.E3.m1.13.13.1.1.1.1.1.1.3.1.cmml"><mo stretchy="false" id="S2.E3.m1.13.13.1.1.1.1.1.1.3.2.1" xref="S2.E3.m1.13.13.1.1.1.1.1.1.3.1.cmml">(</mo><mi id="S2.E3.m1.11.11" xref="S2.E3.m1.11.11.cmml">𝐩</mi><mo id="S2.E3.m1.13.13.1.1.1.1.1.1.3.2.2" xref="S2.E3.m1.13.13.1.1.1.1.1.1.3.1.cmml">,</mo><mi id="S2.E3.m1.12.12" xref="S2.E3.m1.12.12.cmml">a</mi><mo stretchy="false" id="S2.E3.m1.13.13.1.1.1.1.1.1.3.2.3" xref="S2.E3.m1.13.13.1.1.1.1.1.1.3.1.cmml">)</mo></mrow></mrow><mo stretchy="false" id="S2.E3.m1.13.13.1.1.1.1.1.3" xref="S2.E3.m1.13.13.1.1.1.1.2.1.cmml">]</mo></mrow></mrow><mo id="S2.E3.m1.13.13.1.1.3" xref="S2.E3.m1.13.13.1.1.3.cmml">+</mo><mrow id="S2.E3.m1.13.13.1.1.2" xref="S2.E3.m1.13.13.1.1.2.cmml"><mi id="S2.E3.m1.13.13.1.1.2.3" xref="S2.E3.m1.13.13.1.1.2.3.cmml">λ</mi><mo lspace="0em" rspace="0em" id="S2.E3.m1.13.13.1.1.2.2" xref="S2.E3.m1.13.13.1.1.2.2.cmml">​</mo><msub id="S2.E3.m1.13.13.1.1.2.4" xref="S2.E3.m1.13.13.1.1.2.4.cmml"><mi id="S2.E3.m1.13.13.1.1.2.4.2" xref="S2.E3.m1.13.13.1.1.2.4.2.cmml">𝔼</mi><mrow id="S2.E3.m1.4.4.4" xref="S2.E3.m1.4.4.4.cmml"><mrow id="S2.E3.m1.4.4.4.4.2" xref="S2.E3.m1.4.4.4.4.3.cmml"><mo stretchy="false" id="S2.E3.m1.4.4.4.4.2.3" xref="S2.E3.m1.4.4.4.4.3.cmml">(</mo><msup id="S2.E3.m1.3.3.3.3.1.1" xref="S2.E3.m1.3.3.3.3.1.1.cmml"><mi id="S2.E3.m1.3.3.3.3.1.1.2" xref="S2.E3.m1.3.3.3.3.1.1.2.cmml">t</mi><mrow id="S2.E3.m1.1.1.1.1.1.3" xref="S2.E3.m1.3.3.3.3.1.1.cmml"><mo stretchy="false" id="S2.E3.m1.1.1.1.1.1.3.1" xref="S2.E3.m1.3.3.3.3.1.1.cmml">(</mo><mi id="S2.E3.m1.1.1.1.1.1.1" xref="S2.E3.m1.1.1.1.1.1.1.cmml">i</mi><mo stretchy="false" id="S2.E3.m1.1.1.1.1.1.3.2" xref="S2.E3.m1.3.3.3.3.1.1.cmml">)</mo></mrow></msup><mo id="S2.E3.m1.4.4.4.4.2.4" xref="S2.E3.m1.4.4.4.4.3.cmml">,</mo><msup id="S2.E3.m1.4.4.4.4.2.2" xref="S2.E3.m1.4.4.4.4.2.2.cmml"><mi id="S2.E3.m1.4.4.4.4.2.2.2" xref="S2.E3.m1.4.4.4.4.2.2.2.cmml">t</mi><mrow id="S2.E3.m1.2.2.2.2.1.3" xref="S2.E3.m1.4.4.4.4.2.2.cmml"><mo stretchy="false" id="S2.E3.m1.2.2.2.2.1.3.1" xref="S2.E3.m1.4.4.4.4.2.2.cmml">(</mo><mi id="S2.E3.m1.2.2.2.2.1.1" xref="S2.E3.m1.2.2.2.2.1.1.cmml">j</mi><mo stretchy="false" id="S2.E3.m1.2.2.2.2.1.3.2" xref="S2.E3.m1.4.4.4.4.2.2.cmml">)</mo></mrow></msup><mo stretchy="false" id="S2.E3.m1.4.4.4.4.2.5" xref="S2.E3.m1.4.4.4.4.3.cmml">)</mo></mrow><mo id="S2.E3.m1.4.4.4.5" xref="S2.E3.m1.4.4.4.5.cmml">∼</mo><msup id="S2.E3.m1.4.4.4.6" xref="S2.E3.m1.4.4.4.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.E3.m1.4.4.4.6.2" xref="S2.E3.m1.4.4.4.6.2.cmml">𝒯</mi><mn id="S2.E3.m1.4.4.4.6.3" xref="S2.E3.m1.4.4.4.6.3.cmml">2</mn></msup></mrow></msub><mo lspace="0em" rspace="0em" id="S2.E3.m1.13.13.1.1.2.2a" xref="S2.E3.m1.13.13.1.1.2.2.cmml">​</mo><mrow id="S2.E3.m1.13.13.1.1.2.1.1" xref="S2.E3.m1.13.13.1.1.2.1.2.cmml"><mo stretchy="false" id="S2.E3.m1.13.13.1.1.2.1.1.2" xref="S2.E3.m1.13.13.1.1.2.1.2.1.cmml">[</mo><mrow id="S2.E3.m1.13.13.1.1.2.1.1.1.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.3.cmml"><mrow id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.cmml"><mrow id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.cmml"><mrow id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.cmml"><msub id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.cmml"><mi mathvariant="normal" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.2.cmml">ℓ</mi><mtext id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.3a.cmml">cons</mtext></msub><mo lspace="0em" rspace="0em" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.3.cmml">​</mo><mrow id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.3.cmml"><mo stretchy="false" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.3.cmml">(</mo><msup id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.2.cmml">H</mi><mrow id="S2.E3.m1.5.5.1.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S2.E3.m1.5.5.1.3.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><mi id="S2.E3.m1.5.5.1.1" xref="S2.E3.m1.5.5.1.1.cmml">i</mi><mo stretchy="false" id="S2.E3.m1.5.5.1.3.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></msup><mo id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.4" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.3.cmml">,</mo><msup id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.cmml"><mi id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.2.cmml">H</mi><mrow id="S2.E3.m1.6.6.1.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.cmml"><mo stretchy="false" id="S2.E3.m1.6.6.1.3.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.cmml">(</mo><mi id="S2.E3.m1.6.6.1.1" xref="S2.E3.m1.6.6.1.1.cmml">j</mi><mo stretchy="false" id="S2.E3.m1.6.6.1.3.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.cmml">)</mo></mrow></msup><mo stretchy="false" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.5" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.3.cmml">)</mo></mrow></mrow><mo id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.3.cmml">∣</mo><msup id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.cmml"><mi id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.2.cmml">𝐱</mi><mrow id="S2.E3.m1.7.7.1.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.cmml"><mo stretchy="false" id="S2.E3.m1.7.7.1.3.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.cmml">(</mo><mi id="S2.E3.m1.7.7.1.1" xref="S2.E3.m1.7.7.1.1.cmml">i</mi><mo stretchy="false" id="S2.E3.m1.7.7.1.3.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.cmml">)</mo></mrow></msup></mrow><mo id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.3.cmml">=</mo><msup id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.cmml"><mi id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.2.cmml">𝐱</mi><mrow id="S2.E3.m1.8.8.1.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.cmml"><mo stretchy="false" id="S2.E3.m1.8.8.1.3.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.cmml">(</mo><mi id="S2.E3.m1.8.8.1.1" xref="S2.E3.m1.8.8.1.1.cmml">j</mi><mo stretchy="false" id="S2.E3.m1.8.8.1.3.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.cmml">)</mo></mrow></msup></mrow><mo id="S2.E3.m1.13.13.1.1.2.1.1.1.2.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.3a.cmml">,</mo><mrow id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.cmml"><msup id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.cmml"><mi id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.2.cmml">𝐪</mi><mrow id="S2.E3.m1.9.9.1.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.cmml"><mo stretchy="false" id="S2.E3.m1.9.9.1.3.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.cmml">(</mo><mi id="S2.E3.m1.9.9.1.1" xref="S2.E3.m1.9.9.1.1.cmml">i</mi><mo stretchy="false" id="S2.E3.m1.9.9.1.3.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.cmml">)</mo></mrow></msup><mo id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.1.cmml">≺</mo><msup id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.cmml"><mi id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.2.cmml">𝐪</mi><mrow id="S2.E3.m1.10.10.1.3" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.cmml"><mo stretchy="false" id="S2.E3.m1.10.10.1.3.1" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.cmml">(</mo><mi id="S2.E3.m1.10.10.1.1" xref="S2.E3.m1.10.10.1.1.cmml">j</mi><mo stretchy="false" id="S2.E3.m1.10.10.1.3.2" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.cmml">)</mo></mrow></msup></mrow></mrow><mo stretchy="false" id="S2.E3.m1.13.13.1.1.2.1.1.3" xref="S2.E3.m1.13.13.1.1.2.1.2.1.cmml">]</mo></mrow></mrow></mrow><mo id="S2.E3.m1.13.13.1.2" xref="S2.E3.m1.13.13.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E3.m1.13b"><apply id="S2.E3.m1.13.13.1.1.cmml" xref="S2.E3.m1.13.13.1"><plus id="S2.E3.m1.13.13.1.1.3.cmml" xref="S2.E3.m1.13.13.1.1.3"></plus><apply id="S2.E3.m1.13.13.1.1.1.cmml" xref="S2.E3.m1.13.13.1.1.1"><times id="S2.E3.m1.13.13.1.1.1.2.cmml" xref="S2.E3.m1.13.13.1.1.1.2"></times><apply id="S2.E3.m1.13.13.1.1.1.3.cmml" xref="S2.E3.m1.13.13.1.1.1.3"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.1.3.1.cmml" xref="S2.E3.m1.13.13.1.1.1.3">subscript</csymbol><ci id="S2.E3.m1.13.13.1.1.1.3.2.cmml" xref="S2.E3.m1.13.13.1.1.1.3.2">𝔼</ci><apply id="S2.E3.m1.13.13.1.1.1.3.3.cmml" xref="S2.E3.m1.13.13.1.1.1.3.3"><csymbol cd="latexml" id="S2.E3.m1.13.13.1.1.1.3.3.1.cmml" xref="S2.E3.m1.13.13.1.1.1.3.3.1">similar-to</csymbol><ci id="S2.E3.m1.13.13.1.1.1.3.3.2.cmml" xref="S2.E3.m1.13.13.1.1.1.3.3.2">𝑡</ci><ci id="S2.E3.m1.13.13.1.1.1.3.3.3.cmml" xref="S2.E3.m1.13.13.1.1.1.3.3.3">𝒯</ci></apply></apply><apply id="S2.E3.m1.13.13.1.1.1.1.2.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1"><csymbol cd="latexml" id="S2.E3.m1.13.13.1.1.1.1.2.1.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.2">delimited-[]</csymbol><apply id="S2.E3.m1.13.13.1.1.1.1.1.1.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.1"><times id="S2.E3.m1.13.13.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.1.1"></times><apply id="S2.E3.m1.13.13.1.1.1.1.1.1.2.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.1.1.1.1.2.1.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.1.2">subscript</csymbol><ci id="S2.E3.m1.13.13.1.1.1.1.1.1.2.2.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.1.2.2">ℓ</ci><ci id="S2.E3.m1.13.13.1.1.1.1.1.1.2.3a.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.1.2.3"><mtext mathsize="70%" id="S2.E3.m1.13.13.1.1.1.1.1.1.2.3.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.1.2.3">VQA</mtext></ci></apply><interval closure="open" id="S2.E3.m1.13.13.1.1.1.1.1.1.3.1.cmml" xref="S2.E3.m1.13.13.1.1.1.1.1.1.3.2"><ci id="S2.E3.m1.11.11.cmml" xref="S2.E3.m1.11.11">𝐩</ci><ci id="S2.E3.m1.12.12.cmml" xref="S2.E3.m1.12.12">𝑎</ci></interval></apply></apply></apply><apply id="S2.E3.m1.13.13.1.1.2.cmml" xref="S2.E3.m1.13.13.1.1.2"><times id="S2.E3.m1.13.13.1.1.2.2.cmml" xref="S2.E3.m1.13.13.1.1.2.2"></times><ci id="S2.E3.m1.13.13.1.1.2.3.cmml" xref="S2.E3.m1.13.13.1.1.2.3">𝜆</ci><apply id="S2.E3.m1.13.13.1.1.2.4.cmml" xref="S2.E3.m1.13.13.1.1.2.4"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.4.1.cmml" xref="S2.E3.m1.13.13.1.1.2.4">subscript</csymbol><ci id="S2.E3.m1.13.13.1.1.2.4.2.cmml" xref="S2.E3.m1.13.13.1.1.2.4.2">𝔼</ci><apply id="S2.E3.m1.4.4.4.cmml" xref="S2.E3.m1.4.4.4"><csymbol cd="latexml" id="S2.E3.m1.4.4.4.5.cmml" xref="S2.E3.m1.4.4.4.5">similar-to</csymbol><interval closure="open" id="S2.E3.m1.4.4.4.4.3.cmml" xref="S2.E3.m1.4.4.4.4.2"><apply id="S2.E3.m1.3.3.3.3.1.1.cmml" xref="S2.E3.m1.3.3.3.3.1.1"><csymbol cd="ambiguous" id="S2.E3.m1.3.3.3.3.1.1.1.cmml" xref="S2.E3.m1.3.3.3.3.1.1">superscript</csymbol><ci id="S2.E3.m1.3.3.3.3.1.1.2.cmml" xref="S2.E3.m1.3.3.3.3.1.1.2">𝑡</ci><ci id="S2.E3.m1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.1.1.1.1.1.1">𝑖</ci></apply><apply id="S2.E3.m1.4.4.4.4.2.2.cmml" xref="S2.E3.m1.4.4.4.4.2.2"><csymbol cd="ambiguous" id="S2.E3.m1.4.4.4.4.2.2.1.cmml" xref="S2.E3.m1.4.4.4.4.2.2">superscript</csymbol><ci id="S2.E3.m1.4.4.4.4.2.2.2.cmml" xref="S2.E3.m1.4.4.4.4.2.2.2">𝑡</ci><ci id="S2.E3.m1.2.2.2.2.1.1.cmml" xref="S2.E3.m1.2.2.2.2.1.1">𝑗</ci></apply></interval><apply id="S2.E3.m1.4.4.4.6.cmml" xref="S2.E3.m1.4.4.4.6"><csymbol cd="ambiguous" id="S2.E3.m1.4.4.4.6.1.cmml" xref="S2.E3.m1.4.4.4.6">superscript</csymbol><ci id="S2.E3.m1.4.4.4.6.2.cmml" xref="S2.E3.m1.4.4.4.6.2">𝒯</ci><cn type="integer" id="S2.E3.m1.4.4.4.6.3.cmml" xref="S2.E3.m1.4.4.4.6.3">2</cn></apply></apply></apply><apply id="S2.E3.m1.13.13.1.1.2.1.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1"><csymbol cd="latexml" id="S2.E3.m1.13.13.1.1.2.1.2.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.2">delimited-[]</csymbol><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.3.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.1.1.1.3a.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.3">formulae-sequence</csymbol><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1"><eq id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.3.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.3"></eq><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2"><csymbol cd="latexml" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.3.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.3">conditional</csymbol><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2"><times id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.3.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.3"></times><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4">subscript</csymbol><ci id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.2">ℓ</ci><ci id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.3a.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.3"><mtext mathsize="70%" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.3.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.4.3">cons</mtext></ci></apply><interval closure="open" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.3.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2"><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.1.1.1.1.1.2">𝐻</ci><ci id="S2.E3.m1.5.5.1.1.cmml" xref="S2.E3.m1.5.5.1.1">𝑖</ci></apply><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2">superscript</csymbol><ci id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.2.2.2.2.2">𝐻</ci><ci id="S2.E3.m1.6.6.1.1.cmml" xref="S2.E3.m1.6.6.1.1">𝑗</ci></apply></interval></apply><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4">superscript</csymbol><ci id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.2.4.2">𝐱</ci><ci id="S2.E3.m1.7.7.1.1.cmml" xref="S2.E3.m1.7.7.1.1">𝑖</ci></apply></apply><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4">superscript</csymbol><ci id="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.1.1.4.2">𝐱</ci><ci id="S2.E3.m1.8.8.1.1.cmml" xref="S2.E3.m1.8.8.1.1">𝑗</ci></apply></apply><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2"><csymbol cd="latexml" id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.1">precedes</csymbol><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2">superscript</csymbol><ci id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.2.2">𝐪</ci><ci id="S2.E3.m1.9.9.1.1.cmml" xref="S2.E3.m1.9.9.1.1">𝑖</ci></apply><apply id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3"><csymbol cd="ambiguous" id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.1.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3">superscript</csymbol><ci id="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.2.cmml" xref="S2.E3.m1.13.13.1.1.2.1.1.1.2.2.3.2">𝐪</ci><ci id="S2.E3.m1.10.10.1.1.cmml" xref="S2.E3.m1.10.10.1.1">𝑗</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E3.m1.13c">\mathbb{E}_{t\sim\mathcal{T}}[\ell_{\textrm{VQA}}(\mathbf{p},a)]+\lambda\mathbb{E}_{(t^{(i)},t^{(j)})\sim\mathcal{T}^{2}}[\ell_{\textrm{cons}}(H^{(i)},H^{(j)})\mid\mathbf{x}^{(i)}=\mathbf{x}^{(j)},\mathbf{q}^{(i)}\prec\mathbf{q}^{(j)}],</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p id="S2.SS0.SSS2.p3.4" class="ltx_p">where <math id="S2.SS0.SSS2.p3.2.m1.1" class="ltx_Math" alttext="\lambda&gt;0" display="inline"><semantics id="S2.SS0.SSS2.p3.2.m1.1a"><mrow id="S2.SS0.SSS2.p3.2.m1.1.1" xref="S2.SS0.SSS2.p3.2.m1.1.1.cmml"><mi id="S2.SS0.SSS2.p3.2.m1.1.1.2" xref="S2.SS0.SSS2.p3.2.m1.1.1.2.cmml">λ</mi><mo id="S2.SS0.SSS2.p3.2.m1.1.1.1" xref="S2.SS0.SSS2.p3.2.m1.1.1.1.cmml">&gt;</mo><mn id="S2.SS0.SSS2.p3.2.m1.1.1.3" xref="S2.SS0.SSS2.p3.2.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p3.2.m1.1b"><apply id="S2.SS0.SSS2.p3.2.m1.1.1.cmml" xref="S2.SS0.SSS2.p3.2.m1.1.1"><gt id="S2.SS0.SSS2.p3.2.m1.1.1.1.cmml" xref="S2.SS0.SSS2.p3.2.m1.1.1.1"></gt><ci id="S2.SS0.SSS2.p3.2.m1.1.1.2.cmml" xref="S2.SS0.SSS2.p3.2.m1.1.1.2">𝜆</ci><cn type="integer" id="S2.SS0.SSS2.p3.2.m1.1.1.3.cmml" xref="S2.SS0.SSS2.p3.2.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p3.2.m1.1c">\lambda&gt;0</annotation></semantics></math> controls the relative strength of both losses and <math id="S2.SS0.SSS2.p3.3.m2.1" class="ltx_Math" alttext="\mathcal{T}^{2}" display="inline"><semantics id="S2.SS0.SSS2.p3.3.m2.1a"><msup id="S2.SS0.SSS2.p3.3.m2.1.1" xref="S2.SS0.SSS2.p3.3.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS2.p3.3.m2.1.1.2" xref="S2.SS0.SSS2.p3.3.m2.1.1.2.cmml">𝒯</mi><mn id="S2.SS0.SSS2.p3.3.m2.1.1.3" xref="S2.SS0.SSS2.p3.3.m2.1.1.3.cmml">2</mn></msup><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p3.3.m2.1b"><apply id="S2.SS0.SSS2.p3.3.m2.1.1.cmml" xref="S2.SS0.SSS2.p3.3.m2.1.1"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p3.3.m2.1.1.1.cmml" xref="S2.SS0.SSS2.p3.3.m2.1.1">superscript</csymbol><ci id="S2.SS0.SSS2.p3.3.m2.1.1.2.cmml" xref="S2.SS0.SSS2.p3.3.m2.1.1.2">𝒯</ci><cn type="integer" id="S2.SS0.SSS2.p3.3.m2.1.1.3.cmml" xref="S2.SS0.SSS2.p3.3.m2.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p3.3.m2.1c">\mathcal{T}^{2}</annotation></semantics></math> is the Cartesian product of <math id="S2.SS0.SSS2.p3.4.m3.1" class="ltx_Math" alttext="\mathcal{T}" display="inline"><semantics id="S2.SS0.SSS2.p3.4.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS2.p3.4.m3.1.1" xref="S2.SS0.SSS2.p3.4.m3.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p3.4.m3.1b"><ci id="S2.SS0.SSS2.p3.4.m3.1.1.cmml" xref="S2.SS0.SSS2.p3.4.m3.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p3.4.m3.1c">\mathcal{T}</annotation></semantics></math> with itself, that is, all pairs of training samples.</p>
</div>
<div id="S2.SS0.SSS2.p4" class="ltx_para">
<p id="S2.SS0.SSS2.p4.4" class="ltx_p">To train, this cost is iteratively minimized approximating the expectations with mini-batches. The two expectations of Eq. (<a href="#S2.E3" title="In 2.0.2 Consistency loss. ‣ 2 Method ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>) suggest that two mini-batches are necessary at each iteration: one mini-batch sampled from <math id="S2.SS0.SSS2.p4.1.m1.1" class="ltx_Math" alttext="\mathcal{T}" display="inline"><semantics id="S2.SS0.SSS2.p4.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS2.p4.1.m1.1.1" xref="S2.SS0.SSS2.p4.1.m1.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p4.1.m1.1b"><ci id="S2.SS0.SSS2.p4.1.m1.1.1.cmml" xref="S2.SS0.SSS2.p4.1.m1.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p4.1.m1.1c">\mathcal{T}</annotation></semantics></math> and a second mini-batch of <math id="S2.SS0.SSS2.p4.2.m2.1" class="ltx_Math" alttext="\prec" display="inline"><semantics id="S2.SS0.SSS2.p4.2.m2.1a"><mo id="S2.SS0.SSS2.p4.2.m2.1.1" xref="S2.SS0.SSS2.p4.2.m2.1.1.cmml">≺</mo><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p4.2.m2.1b"><csymbol cd="latexml" id="S2.SS0.SSS2.p4.2.m2.1.1.cmml" xref="S2.SS0.SSS2.p4.2.m2.1.1">precedes</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p4.2.m2.1c">\prec</annotation></semantics></math>-related pairs sampled from <math id="S2.SS0.SSS2.p4.3.m3.1" class="ltx_Math" alttext="\mathcal{T}^{2}" display="inline"><semantics id="S2.SS0.SSS2.p4.3.m3.1a"><msup id="S2.SS0.SSS2.p4.3.m3.1.1" xref="S2.SS0.SSS2.p4.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS0.SSS2.p4.3.m3.1.1.2" xref="S2.SS0.SSS2.p4.3.m3.1.1.2.cmml">𝒯</mi><mn id="S2.SS0.SSS2.p4.3.m3.1.1.3" xref="S2.SS0.SSS2.p4.3.m3.1.1.3.cmml">2</mn></msup><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p4.3.m3.1b"><apply id="S2.SS0.SSS2.p4.3.m3.1.1.cmml" xref="S2.SS0.SSS2.p4.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS0.SSS2.p4.3.m3.1.1.1.cmml" xref="S2.SS0.SSS2.p4.3.m3.1.1">superscript</csymbol><ci id="S2.SS0.SSS2.p4.3.m3.1.1.2.cmml" xref="S2.SS0.SSS2.p4.3.m3.1.1.2">𝒯</ci><cn type="integer" id="S2.SS0.SSS2.p4.3.m3.1.1.3.cmml" xref="S2.SS0.SSS2.p4.3.m3.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p4.3.m3.1c">\mathcal{T}^{2}</annotation></semantics></math>. However, in practice a single mini-batch is sufficient as long as we ensure that it contains pairs of <math id="S2.SS0.SSS2.p4.4.m4.1" class="ltx_Math" alttext="\prec" display="inline"><semantics id="S2.SS0.SSS2.p4.4.m4.1a"><mo id="S2.SS0.SSS2.p4.4.m4.1.1" xref="S2.SS0.SSS2.p4.4.m4.1.1.cmml">≺</mo><annotation-xml encoding="MathML-Content" id="S2.SS0.SSS2.p4.4.m4.1b"><csymbol cd="latexml" id="S2.SS0.SSS2.p4.4.m4.1.1.cmml" xref="S2.SS0.SSS2.p4.4.m4.1.1">precedes</csymbol></annotation-xml><annotation encoding="application/x-tex" id="S2.SS0.SSS2.p4.4.m4.1c">\prec</annotation></semantics></math>-related questions. While this biased sampling could in turn bias the estimation of the first expectation, we did not observe a noticeable impact in our experiments. Fig. <a href="#S2.F2" title="Figure 2 ‣ 2.0.1 VQA model. ‣ 2 Method ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>(Bottom) illustrates this training procedure.</p>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Experiments and results</h2>

<section id="S3.SS0.SSS1" class="ltx_subsubsection">
<h3 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.0.1 </span>DME staging.</h3>

<div id="S3.SS0.SSS1.p1" class="ltx_para">
<p id="S3.SS0.SSS1.p1.1" class="ltx_p">Diabetic Macular Edema (DME) staging from color fundus images involves grading images on a scale from 0 to 2, with 0 being healthy and 2 being severe (see Fig. <a href="#S3.F3" title="Figure 3 ‣ 3.0.1 DME staging. ‣ 3 Experiments and results ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>). Differentiation between the grades relies on the presence of hard exudates present in different locations of the retina. Specifically, a grade of 0 implies that no hard exudates are present at all, a grade of 1 implies that hard exudates are located in the retina periphery (<em id="S3.SS0.SSS1.p1.1.1" class="ltx_emph ltx_font_italic">i.e.</em>, outside a circular region centered at the fovea center with radius of one optic disc diameter), and a grade of 2 when hard exudates are in the macular region <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite>.</p>
</div>
<figure id="S3.F3" class="ltx_figure"><img src="/html/2206.13296/assets/x3.png" id="S3.F3.1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="415" height="194" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>DME risk grading Grade 0 is assigned if there are no hard exudates present in the whole image. Grade 1 is assigned if there are hard exudates, but only located outside a circle centered at the fovea with radius of one optic disc diameter. Grade 2 is assigned if there are hard exudates located within the circle. Examples of main and sub-questions are provided for each grade.</figcaption>
</figure>
</section>
<section id="S3.SS0.SSS2" class="ltx_subsubsection">
<h3 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.0.2 </span>Dataset and questions.</h3>

<div id="S3.SS0.SSS2.p1" class="ltx_para">
<p id="S3.SS0.SSS2.p1.1" class="ltx_p">To validate our method, we make use of two publicly available datasets: the Indian Diabetic Retinopathy Image Dataset (IDRiD) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite> and the e-Ophta dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>. From the IDRiD dataset, we use images from the segmentation and grading tasks, which consist of 81 and 516 images, respectively. Images from the segmentation task include segmentation masks for hard exudates and images from the grading task only have the DME grade. On the other hand, the e-Ophta dataset comprises 47 images with segmentation of hard exudates and 35 images without lesions. Combining both datasets yields a dataset of 128 images with segmentation masks for hard exudates and 128 images without any lesions, plus 423 images for which only the DME risk grade is available.</p>
</div>
<div id="S3.SS0.SSS2.p2" class="ltx_para">
<p id="S3.SS0.SSS2.p2.1" class="ltx_p">In this context, we consider main questions to be those asking “What is the DME risk grade?” when considering the entire image. Sub-questions were then defined as questions asking about the presence of the hard exudates. For instance, as shown in Fig. <a href="#S3.F3" title="Figure 3 ‣ 3.0.1 DME staging. ‣ 3 Experiments and results ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>(Right), “Are there hard exudates in this region?” where the region designated contains the macula. In practice, we set three types of sub-questions: “are there hard exudates in this image?”, “are there hard exudates in the macula?” and “are there hard exudates in this region?”. We refer to these three questions as <span id="S3.SS0.SSS2.p2.1.1" class="ltx_text ltx_font_italic">whole</span>, <span id="S3.SS0.SSS2.p2.1.2" class="ltx_text ltx_font_italic">macula</span> and <span id="S3.SS0.SSS2.p2.1.3" class="ltx_text ltx_font_italic">region</span> questions, respectively. For the region sub-questions, we consider circular regions that can be centered anywhere, or centered on the fovea, depending on availability of fovea center location annotations. As mentioned in Sec. <a href="#S1" title="1 Introduction ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, to answer questions about regions, images are masked so that only the region is visible.</p>
</div>
<div id="S3.SS0.SSS2.p3" class="ltx_para">
<p id="S3.SS0.SSS2.p3.1" class="ltx_p">The total number of question-answer pairs in our dataset consist of 9779 for training (4.4% main, 21.4% sub, 74.2% ind), 2380 for validation (4.5% main, 19.2% sub, 76.3% ind) and 1311 for testing (10% main, 46.1% sub, 43.9% ind), with images in the train, validation and test sets being mutually exclusive.</p>
</div>
</section>
<section id="S3.SS0.SSS3" class="ltx_subsubsection">
<h3 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.0.3 </span>Baselines, implementation details and evaluation metrics:</h3>

<div id="S3.SS0.SSS3.p1" class="ltx_para">
<p id="S3.SS0.SSS3.p1.2" class="ltx_p">We compare our approach to a baseline model that does not use the proposed <math id="S3.SS0.SSS3.p1.1.m1.1" class="ltx_Math" alttext="\ell_{\textrm{cons}}" display="inline"><semantics id="S3.SS0.SSS3.p1.1.m1.1a"><msub id="S3.SS0.SSS3.p1.1.m1.1.1" xref="S3.SS0.SSS3.p1.1.m1.1.1.cmml"><mi mathvariant="normal" id="S3.SS0.SSS3.p1.1.m1.1.1.2" xref="S3.SS0.SSS3.p1.1.m1.1.1.2.cmml">ℓ</mi><mtext id="S3.SS0.SSS3.p1.1.m1.1.1.3" xref="S3.SS0.SSS3.p1.1.m1.1.1.3a.cmml">cons</mtext></msub><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS3.p1.1.m1.1b"><apply id="S3.SS0.SSS3.p1.1.m1.1.1.cmml" xref="S3.SS0.SSS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS3.p1.1.m1.1.1.1.cmml" xref="S3.SS0.SSS3.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS0.SSS3.p1.1.m1.1.1.2.cmml" xref="S3.SS0.SSS3.p1.1.m1.1.1.2">ℓ</ci><ci id="S3.SS0.SSS3.p1.1.m1.1.1.3a.cmml" xref="S3.SS0.SSS3.p1.1.m1.1.1.3"><mtext mathsize="70%" id="S3.SS0.SSS3.p1.1.m1.1.1.3.cmml" xref="S3.SS0.SSS3.p1.1.m1.1.1.3">cons</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS3.p1.1.m1.1c">\ell_{\textrm{cons}}</annotation></semantics></math> loss, equivalent to setting <math id="S3.SS0.SSS3.p1.2.m2.1" class="ltx_Math" alttext="\lambda=0" display="inline"><semantics id="S3.SS0.SSS3.p1.2.m2.1a"><mrow id="S3.SS0.SSS3.p1.2.m2.1.1" xref="S3.SS0.SSS3.p1.2.m2.1.1.cmml"><mi id="S3.SS0.SSS3.p1.2.m2.1.1.2" xref="S3.SS0.SSS3.p1.2.m2.1.1.2.cmml">λ</mi><mo id="S3.SS0.SSS3.p1.2.m2.1.1.1" xref="S3.SS0.SSS3.p1.2.m2.1.1.1.cmml">=</mo><mn id="S3.SS0.SSS3.p1.2.m2.1.1.3" xref="S3.SS0.SSS3.p1.2.m2.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS3.p1.2.m2.1b"><apply id="S3.SS0.SSS3.p1.2.m2.1.1.cmml" xref="S3.SS0.SSS3.p1.2.m2.1.1"><eq id="S3.SS0.SSS3.p1.2.m2.1.1.1.cmml" xref="S3.SS0.SSS3.p1.2.m2.1.1.1"></eq><ci id="S3.SS0.SSS3.p1.2.m2.1.1.2.cmml" xref="S3.SS0.SSS3.p1.2.m2.1.1.2">𝜆</ci><cn type="integer" id="S3.SS0.SSS3.p1.2.m2.1.1.3.cmml" xref="S3.SS0.SSS3.p1.2.m2.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS3.p1.2.m2.1c">\lambda=0</annotation></semantics></math>. In addition, we compare our method against the attention-matching method, SQuINT <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>, as it is a state-of-the-art alternative to our approach that can be used with the same VQA model architecture.</p>
</div>
<div id="S3.SS0.SSS3.p2" class="ltx_para">
<p id="S3.SS0.SSS3.p2.4" class="ltx_p">Our VQA model uses an ImageNet-pretrained ResNet101 <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite> with input image of <math id="S3.SS0.SSS3.p2.1.m1.1" class="ltx_Math" alttext="448\times 448" display="inline"><semantics id="S3.SS0.SSS3.p2.1.m1.1a"><mrow id="S3.SS0.SSS3.p2.1.m1.1.1" xref="S3.SS0.SSS3.p2.1.m1.1.1.cmml"><mn id="S3.SS0.SSS3.p2.1.m1.1.1.2" xref="S3.SS0.SSS3.p2.1.m1.1.1.2.cmml">448</mn><mo lspace="0.222em" rspace="0.222em" id="S3.SS0.SSS3.p2.1.m1.1.1.1" xref="S3.SS0.SSS3.p2.1.m1.1.1.1.cmml">×</mo><mn id="S3.SS0.SSS3.p2.1.m1.1.1.3" xref="S3.SS0.SSS3.p2.1.m1.1.1.3.cmml">448</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS3.p2.1.m1.1b"><apply id="S3.SS0.SSS3.p2.1.m1.1.1.cmml" xref="S3.SS0.SSS3.p2.1.m1.1.1"><times id="S3.SS0.SSS3.p2.1.m1.1.1.1.cmml" xref="S3.SS0.SSS3.p2.1.m1.1.1.1"></times><cn type="integer" id="S3.SS0.SSS3.p2.1.m1.1.1.2.cmml" xref="S3.SS0.SSS3.p2.1.m1.1.1.2">448</cn><cn type="integer" id="S3.SS0.SSS3.p2.1.m1.1.1.3.cmml" xref="S3.SS0.SSS3.p2.1.m1.1.1.3">448</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS3.p2.1.m1.1c">448\times 448</annotation></semantics></math> pixels and an embedding of 2048 dimensions for the image encoding. For text encoding, a single-layer LSTM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>]</cite> network processes the input question with word encoding of length 300 and produces a single question embedding of 1024 dimensions. The multi-glimpse attention mechanism <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite> uses 2 glimpses and dropout rate <math id="S3.SS0.SSS3.p2.2.m2.1" class="ltx_Math" alttext="0.25" display="inline"><semantics id="S3.SS0.SSS3.p2.2.m2.1a"><mn id="S3.SS0.SSS3.p2.2.m2.1.1" xref="S3.SS0.SSS3.p2.2.m2.1.1.cmml">0.25</mn><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS3.p2.2.m2.1b"><cn type="float" id="S3.SS0.SSS3.p2.2.m2.1.1.cmml" xref="S3.SS0.SSS3.p2.2.m2.1.1">0.25</cn></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS3.p2.2.m2.1c">0.25</annotation></semantics></math>, and the multimodal fusion stage uses standard concatenation. The final classifier is a multi-layer perceptron with hidden layer of 1024 dimensions and dropout rate of 0.25. Hyperparameters <math id="S3.SS0.SSS3.p2.3.m3.1" class="ltx_Math" alttext="\lambda" display="inline"><semantics id="S3.SS0.SSS3.p2.3.m3.1a"><mi id="S3.SS0.SSS3.p2.3.m3.1.1" xref="S3.SS0.SSS3.p2.3.m3.1.1.cmml">λ</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS3.p2.3.m3.1b"><ci id="S3.SS0.SSS3.p2.3.m3.1.1.cmml" xref="S3.SS0.SSS3.p2.3.m3.1.1">𝜆</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS3.p2.3.m3.1c">\lambda</annotation></semantics></math> and <math id="S3.SS0.SSS3.p2.4.m4.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S3.SS0.SSS3.p2.4.m4.1a"><mi id="S3.SS0.SSS3.p2.4.m4.1.1" xref="S3.SS0.SSS3.p2.4.m4.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS3.p2.4.m4.1b"><ci id="S3.SS0.SSS3.p2.4.m4.1.1.cmml" xref="S3.SS0.SSS3.p2.4.m4.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS3.p2.4.m4.1c">\gamma</annotation></semantics></math> were empirically adjusted to 0.5 and 1.0, respectively.</p>
</div>
<div id="S3.SS0.SSS3.p3" class="ltx_para">
<p id="S3.SS0.SSS3.p3.1" class="ltx_p">All experiments were implemented using PyTorch 1.10.1 and run on a Linux machine with an NVIDIA RTX 3090 graphic card using 16 GB of memory and 4 CPU cores. All methods use the weighted cross-entropy as the base VQA loss function. Batch size was set to 64, and we used Adam for optimization with a learning rate of <math id="S3.SS0.SSS3.p3.1.m1.1" class="ltx_Math" alttext="10^{-4}" display="inline"><semantics id="S3.SS0.SSS3.p3.1.m1.1a"><msup id="S3.SS0.SSS3.p3.1.m1.1.1" xref="S3.SS0.SSS3.p3.1.m1.1.1.cmml"><mn id="S3.SS0.SSS3.p3.1.m1.1.1.2" xref="S3.SS0.SSS3.p3.1.m1.1.1.2.cmml">10</mn><mrow id="S3.SS0.SSS3.p3.1.m1.1.1.3" xref="S3.SS0.SSS3.p3.1.m1.1.1.3.cmml"><mo id="S3.SS0.SSS3.p3.1.m1.1.1.3a" xref="S3.SS0.SSS3.p3.1.m1.1.1.3.cmml">−</mo><mn id="S3.SS0.SSS3.p3.1.m1.1.1.3.2" xref="S3.SS0.SSS3.p3.1.m1.1.1.3.2.cmml">4</mn></mrow></msup><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS3.p3.1.m1.1b"><apply id="S3.SS0.SSS3.p3.1.m1.1.1.cmml" xref="S3.SS0.SSS3.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS0.SSS3.p3.1.m1.1.1.1.cmml" xref="S3.SS0.SSS3.p3.1.m1.1.1">superscript</csymbol><cn type="integer" id="S3.SS0.SSS3.p3.1.m1.1.1.2.cmml" xref="S3.SS0.SSS3.p3.1.m1.1.1.2">10</cn><apply id="S3.SS0.SSS3.p3.1.m1.1.1.3.cmml" xref="S3.SS0.SSS3.p3.1.m1.1.1.3"><minus id="S3.SS0.SSS3.p3.1.m1.1.1.3.1.cmml" xref="S3.SS0.SSS3.p3.1.m1.1.1.3"></minus><cn type="integer" id="S3.SS0.SSS3.p3.1.m1.1.1.3.2.cmml" xref="S3.SS0.SSS3.p3.1.m1.1.1.3.2">4</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS3.p3.1.m1.1c">10^{-4}</annotation></semantics></math>. Maximum epoch number was 100 and we use early stopping policy to prevent overfitting, with a patience of 20 epochs.</p>
</div>
<div id="S3.SS0.SSS3.p4" class="ltx_para">
<p id="S3.SS0.SSS3.p4.1" class="ltx_p">We report accuracy and consistency <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite> performances, using two different definitions of consistency for comparison. Consistency, C1, is the percentage of sub-questions that are answered correctly when the main question was answered correctly. Consistency, C2, is the percentage of main questions that are answered correctly when all corresponding sub-questions were answered correctly.</p>
</div>
</section>
<section id="S3.SS0.SSS4" class="ltx_subsubsection">
<h3 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">3.0.4 </span>Results:</h3>

<div id="S3.SS0.SSS4.p1" class="ltx_para">
<p id="S3.SS0.SSS4.p1.1" class="ltx_p">Table <a href="#S3.T1" title="Table 1 ‣ 3.0.4 Results: ‣ 3 Experiments and results ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> shows the results.
We compare these results to the case in which the value of <math id="S3.SS0.SSS4.p1.1.m1.1" class="ltx_Math" alttext="\lambda" display="inline"><semantics id="S3.SS0.SSS4.p1.1.m1.1a"><mi id="S3.SS0.SSS4.p1.1.m1.1.1" xref="S3.SS0.SSS4.p1.1.m1.1.1.cmml">λ</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS4.p1.1.m1.1b"><ci id="S3.SS0.SSS4.p1.1.m1.1.1.cmml" xref="S3.SS0.SSS4.p1.1.m1.1.1">𝜆</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS4.p1.1.m1.1c">\lambda</annotation></semantics></math> is 0, which corresponds to the baseline in which no additional loss term is used. For each case, we present the overall accuracy and the accuracy for each type of question, as well as the consistency values. Fig. <a href="#S3.F4" title="Figure 4 ‣ 3.0.4 Results: ‣ 3 Experiments and results ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> illustrates the performance of each method with representative qualitative examples.</p>
</div>
<figure id="S3.T1" class="ltx_table">
<div id="S3.T1.1.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:433.6pt;height:91.2pt;vertical-align:-0.8pt;"><span class="ltx_transformed_inner" style="transform:translate(-42.2pt,8.8pt) scale(0.836973567066989,0.836973567066989) ;">
<table id="S3.T1.1.1.1" class="ltx_tabular ltx_align_middle">
<tr id="S3.T1.1.1.1.2" class="ltx_tr">
<td id="S3.T1.1.1.1.2.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t" rowspan="2"><span id="S3.T1.1.1.1.2.1.1" class="ltx_text">Case</span></td>
<td id="S3.T1.1.1.1.2.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" colspan="5">Accuracy</td>
<td id="S3.T1.1.1.1.2.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" colspan="2">Consistency</td>
</tr>
<tr id="S3.T1.1.1.1.3" class="ltx_tr">
<td id="S3.T1.1.1.1.3.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">overall</td>
<td id="S3.T1.1.1.1.3.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">grade</td>
<td id="S3.T1.1.1.1.3.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">whole</td>
<td id="S3.T1.1.1.1.3.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">macula</td>
<td id="S3.T1.1.1.1.3.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">region</td>
<td id="S3.T1.1.1.1.3.6" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">C1</td>
<td id="S3.T1.1.1.1.3.7" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">C2</td>
</tr>
<tr id="S3.T1.1.1.1.4" class="ltx_tr">
<td id="S3.T1.1.1.1.4.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">Baseline (no att.)</td>
<td id="S3.T1.1.1.1.4.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">77.54</td>
<td id="S3.T1.1.1.1.4.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">73.59</td>
<td id="S3.T1.1.1.1.4.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">81.37</td>
<td id="S3.T1.1.1.1.4.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.37</td>
<td id="S3.T1.1.1.1.4.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">76.66</td>
<td id="S3.T1.1.1.1.4.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">81.70</td>
<td id="S3.T1.1.1.1.4.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">91.86</td>
</tr>
<tr id="S3.T1.1.1.1.5" class="ltx_tr">
<td id="S3.T1.1.1.1.5.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">Baseline (att.)</td>
<td id="S3.T1.1.1.1.5.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">81.46</td>
<td id="S3.T1.1.1.1.5.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.23</td>
<td id="S3.T1.1.1.1.5.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.13</td>
<td id="S3.T1.1.1.1.5.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t"><span id="S3.T1.1.1.1.5.5.1" class="ltx_text ltx_font_bold">87.18</span></td>
<td id="S3.T1.1.1.1.5.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.58</td>
<td id="S3.T1.1.1.1.5.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">89.21</td>
<td id="S3.T1.1.1.1.5.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">96.92</td>
</tr>
<tr id="S3.T1.1.1.1.6" class="ltx_tr">
<td id="S3.T1.1.1.1.6.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">Baseline (att.) + SQuINT <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>
</td>
<td id="S3.T1.1.1.1.6.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.58</td>
<td id="S3.T1.1.1.1.6.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">77.48</td>
<td id="S3.T1.1.1.1.6.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">82.82</td>
<td id="S3.T1.1.1.1.6.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">85.34</td>
<td id="S3.T1.1.1.1.6.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.02</td>
<td id="S3.T1.1.1.1.6.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">88.17</td>
<td id="S3.T1.1.1.1.6.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">94.62</td>
</tr>
<tr id="S3.T1.1.1.1.1" class="ltx_tr">
<td id="S3.T1.1.1.1.1.1" class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t">Baseline (att.) + Ours (<math id="S3.T1.1.1.1.1.1.m1.2" class="ltx_Math" alttext="\lambda=0.5,\gamma=1" display="inline"><semantics id="S3.T1.1.1.1.1.1.m1.2a"><mrow id="S3.T1.1.1.1.1.1.m1.2.2.2" xref="S3.T1.1.1.1.1.1.m1.2.2.3.cmml"><mrow id="S3.T1.1.1.1.1.1.m1.1.1.1.1" xref="S3.T1.1.1.1.1.1.m1.1.1.1.1.cmml"><mi id="S3.T1.1.1.1.1.1.m1.1.1.1.1.2" xref="S3.T1.1.1.1.1.1.m1.1.1.1.1.2.cmml">λ</mi><mo id="S3.T1.1.1.1.1.1.m1.1.1.1.1.1" xref="S3.T1.1.1.1.1.1.m1.1.1.1.1.1.cmml">=</mo><mn id="S3.T1.1.1.1.1.1.m1.1.1.1.1.3" xref="S3.T1.1.1.1.1.1.m1.1.1.1.1.3.cmml">0.5</mn></mrow><mo id="S3.T1.1.1.1.1.1.m1.2.2.2.3" xref="S3.T1.1.1.1.1.1.m1.2.2.3a.cmml">,</mo><mrow id="S3.T1.1.1.1.1.1.m1.2.2.2.2" xref="S3.T1.1.1.1.1.1.m1.2.2.2.2.cmml"><mi id="S3.T1.1.1.1.1.1.m1.2.2.2.2.2" xref="S3.T1.1.1.1.1.1.m1.2.2.2.2.2.cmml">γ</mi><mo id="S3.T1.1.1.1.1.1.m1.2.2.2.2.1" xref="S3.T1.1.1.1.1.1.m1.2.2.2.2.1.cmml">=</mo><mn id="S3.T1.1.1.1.1.1.m1.2.2.2.2.3" xref="S3.T1.1.1.1.1.1.m1.2.2.2.2.3.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.T1.1.1.1.1.1.m1.2b"><apply id="S3.T1.1.1.1.1.1.m1.2.2.3.cmml" xref="S3.T1.1.1.1.1.1.m1.2.2.2"><csymbol cd="ambiguous" id="S3.T1.1.1.1.1.1.m1.2.2.3a.cmml" xref="S3.T1.1.1.1.1.1.m1.2.2.2.3">formulae-sequence</csymbol><apply id="S3.T1.1.1.1.1.1.m1.1.1.1.1.cmml" xref="S3.T1.1.1.1.1.1.m1.1.1.1.1"><eq id="S3.T1.1.1.1.1.1.m1.1.1.1.1.1.cmml" xref="S3.T1.1.1.1.1.1.m1.1.1.1.1.1"></eq><ci id="S3.T1.1.1.1.1.1.m1.1.1.1.1.2.cmml" xref="S3.T1.1.1.1.1.1.m1.1.1.1.1.2">𝜆</ci><cn type="float" id="S3.T1.1.1.1.1.1.m1.1.1.1.1.3.cmml" xref="S3.T1.1.1.1.1.1.m1.1.1.1.1.3">0.5</cn></apply><apply id="S3.T1.1.1.1.1.1.m1.2.2.2.2.cmml" xref="S3.T1.1.1.1.1.1.m1.2.2.2.2"><eq id="S3.T1.1.1.1.1.1.m1.2.2.2.2.1.cmml" xref="S3.T1.1.1.1.1.1.m1.2.2.2.2.1"></eq><ci id="S3.T1.1.1.1.1.1.m1.2.2.2.2.2.cmml" xref="S3.T1.1.1.1.1.1.m1.2.2.2.2.2">𝛾</ci><cn type="integer" id="S3.T1.1.1.1.1.1.m1.2.2.2.2.3.cmml" xref="S3.T1.1.1.1.1.1.m1.2.2.2.2.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T1.1.1.1.1.1.m1.2c">\lambda=0.5,\gamma=1</annotation></semantics></math>)</td>
<td id="S3.T1.1.1.1.1.2" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t"><span id="S3.T1.1.1.1.1.2.1" class="ltx_text ltx_font_bold">83.49</span></td>
<td id="S3.T1.1.1.1.1.3" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t"><span id="S3.T1.1.1.1.1.3.1" class="ltx_text ltx_font_bold">80.69</span></td>
<td id="S3.T1.1.1.1.1.4" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t"><span id="S3.T1.1.1.1.1.4.1" class="ltx_text ltx_font_bold">84.96</span></td>
<td id="S3.T1.1.1.1.1.5" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t"><span id="S3.T1.1.1.1.1.5.1" class="ltx_text ltx_font_bold">87.18</span></td>
<td id="S3.T1.1.1.1.1.6" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t"><span id="S3.T1.1.1.1.1.6.1" class="ltx_text ltx_font_bold">83.16</span></td>
<td id="S3.T1.1.1.1.1.7" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t"><span id="S3.T1.1.1.1.1.7.1" class="ltx_text ltx_font_bold">94.20</span></td>
<td id="S3.T1.1.1.1.1.8" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t"><span id="S3.T1.1.1.1.1.8.1" class="ltx_text ltx_font_bold">98.12</span></td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 1: </span>Average test accuracy and consistency values for the different models. Results shown are averaged over 10 models trained with different seeds. Accuracy values are presented for all questions (overall), for main questions (grade) and for sub-questions (whole, macula and region). Both measures of consistency are shown as well.</figcaption>
</figure>
<figure id="S3.F4" class="ltx_figure"><img src="/html/2206.13296/assets/x4.png" id="S3.F4.1.g1" class="ltx_graphics ltx_centering ltx_img_square" width="456" height="395" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Qualitative examples from the test set. Inconsistent sub-answers are highlighted in red. Additional examples are shown in the supplementary material.
</figcaption>
</figure>
<figure id="S3.T2" class="ltx_table">
<table id="S3.T2.2.2" class="ltx_tabular ltx_centering ltx_align_middle">
<tr id="S3.T2.2.2.2" class="ltx_tr">
<td id="S3.T2.1.1.1.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" rowspan="2"><span id="S3.T2.1.1.1.1.1" class="ltx_text"><math id="S3.T2.1.1.1.1.1.m1.1" class="ltx_Math" alttext="\lambda" display="inline"><semantics id="S3.T2.1.1.1.1.1.m1.1a"><mi id="S3.T2.1.1.1.1.1.m1.1.1" xref="S3.T2.1.1.1.1.1.m1.1.1.cmml">λ</mi><annotation-xml encoding="MathML-Content" id="S3.T2.1.1.1.1.1.m1.1b"><ci id="S3.T2.1.1.1.1.1.m1.1.1.cmml" xref="S3.T2.1.1.1.1.1.m1.1.1">𝜆</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.1.1.1.1.1.m1.1c">\lambda</annotation></semantics></math></span></td>
<td id="S3.T2.2.2.2.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" rowspan="2"><span id="S3.T2.2.2.2.2.1" class="ltx_text"><math id="S3.T2.2.2.2.2.1.m1.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S3.T2.2.2.2.2.1.m1.1a"><mi id="S3.T2.2.2.2.2.1.m1.1.1" xref="S3.T2.2.2.2.2.1.m1.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S3.T2.2.2.2.2.1.m1.1b"><ci id="S3.T2.2.2.2.2.1.m1.1.1.cmml" xref="S3.T2.2.2.2.2.1.m1.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.2.2.2.2.1.m1.1c">\gamma</annotation></semantics></math></span></td>
<td id="S3.T2.2.2.2.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" colspan="5">Accuracy</td>
<td id="S3.T2.2.2.2.4" class="ltx_td ltx_align_center ltx_border_r ltx_border_t" colspan="2">Consistency</td>
</tr>
<tr id="S3.T2.2.2.3" class="ltx_tr">
<td id="S3.T2.2.2.3.1" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">overall</td>
<td id="S3.T2.2.2.3.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">grade</td>
<td id="S3.T2.2.2.3.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">whole</td>
<td id="S3.T2.2.2.3.4" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">macula</td>
<td id="S3.T2.2.2.3.5" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">region</td>
<td id="S3.T2.2.2.3.6" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">C1</td>
<td id="S3.T2.2.2.3.7" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">C2</td>
</tr>
<tr id="S3.T2.2.2.4" class="ltx_tr">
<td id="S3.T2.2.2.4.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">0</td>
<td id="S3.T2.2.2.4.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">-</td>
<td id="S3.T2.2.2.4.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">81.46</td>
<td id="S3.T2.2.2.4.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.23</td>
<td id="S3.T2.2.2.4.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.13</td>
<td id="S3.T2.2.2.4.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">87.18</td>
<td id="S3.T2.2.2.4.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.58</td>
<td id="S3.T2.2.2.4.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">89.21</td>
<td id="S3.T2.2.2.4.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">96.92</td>
</tr>
<tr id="S3.T2.2.2.5" class="ltx_tr">
<td id="S3.T2.2.2.5.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_tt">0.2</td>
<td id="S3.T2.2.2.5.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">0.5</td>
<td id="S3.T2.2.2.5.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">82.01</td>
<td id="S3.T2.2.2.5.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">80.38</td>
<td id="S3.T2.2.2.5.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">83.59</td>
<td id="S3.T2.2.2.5.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">86.56</td>
<td id="S3.T2.2.2.5.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">81.36</td>
<td id="S3.T2.2.2.5.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">90.93</td>
<td id="S3.T2.2.2.5.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">97.38</td>
</tr>
<tr id="S3.T2.2.2.6" class="ltx_tr">
<td id="S3.T2.2.2.6.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">0.2</td>
<td id="S3.T2.2.2.6.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1</td>
<td id="S3.T2.2.2.6.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">82.65</td>
<td id="S3.T2.2.2.6.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">79.77</td>
<td id="S3.T2.2.2.6.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.97</td>
<td id="S3.T2.2.2.6.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">86.64</td>
<td id="S3.T2.2.2.6.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">82.30</td>
<td id="S3.T2.2.2.6.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">93.22</td>
<td id="S3.T2.2.2.6.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">97.51</td>
</tr>
<tr id="S3.T2.2.2.7" class="ltx_tr">
<td id="S3.T2.2.2.7.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">0.2</td>
<td id="S3.T2.2.2.7.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1.5</td>
<td id="S3.T2.2.2.7.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.05</td>
<td id="S3.T2.2.2.7.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">81.22</td>
<td id="S3.T2.2.2.7.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">84.27</td>
<td id="S3.T2.2.2.7.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">87.33</td>
<td id="S3.T2.2.2.7.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">82.53</td>
<td id="S3.T2.2.2.7.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">93.23</td>
<td id="S3.T2.2.2.7.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">97.56</td>
</tr>
<tr id="S3.T2.2.2.8" class="ltx_tr">
<td id="S3.T2.2.2.8.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_tt">0.3</td>
<td id="S3.T2.2.2.8.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">0.5</td>
<td id="S3.T2.2.2.8.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">82.34</td>
<td id="S3.T2.2.2.8.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">79.92</td>
<td id="S3.T2.2.2.8.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">83.59</td>
<td id="S3.T2.2.2.8.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">87.71</td>
<td id="S3.T2.2.2.8.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">81.74</td>
<td id="S3.T2.2.2.8.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">92.32</td>
<td id="S3.T2.2.2.8.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">97.31</td>
</tr>
<tr id="S3.T2.2.2.9" class="ltx_tr">
<td id="S3.T2.2.2.9.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">0.3</td>
<td id="S3.T2.2.2.9.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1</td>
<td id="S3.T2.2.2.9.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.27</td>
<td id="S3.T2.2.2.9.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.53</td>
<td id="S3.T2.2.2.9.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">84.58</td>
<td id="S3.T2.2.2.9.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">87.25</td>
<td id="S3.T2.2.2.9.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">82.91</td>
<td id="S3.T2.2.2.9.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">94.01</td>
<td id="S3.T2.2.2.9.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">98.10</td>
</tr>
<tr id="S3.T2.2.2.10" class="ltx_tr">
<td id="S3.T2.2.2.10.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">0.3</td>
<td id="S3.T2.2.2.10.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1.5</td>
<td id="S3.T2.2.2.10.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.28</td>
<td id="S3.T2.2.2.10.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.84</td>
<td id="S3.T2.2.2.10.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">84.43</td>
<td id="S3.T2.2.2.10.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">87.48</td>
<td id="S3.T2.2.2.10.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">82.86</td>
<td id="S3.T2.2.2.10.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">93.28</td>
<td id="S3.T2.2.2.10.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">98.29</td>
</tr>
<tr id="S3.T2.2.2.11" class="ltx_tr">
<td id="S3.T2.2.2.11.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_tt">0.4</td>
<td id="S3.T2.2.2.11.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">0.5</td>
<td id="S3.T2.2.2.11.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">82.87</td>
<td id="S3.T2.2.2.11.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">80.69</td>
<td id="S3.T2.2.2.11.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">84.89</td>
<td id="S3.T2.2.2.11.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">87.02</td>
<td id="S3.T2.2.2.11.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">82.30</td>
<td id="S3.T2.2.2.11.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">92.66</td>
<td id="S3.T2.2.2.11.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">96.66</td>
</tr>
<tr id="S3.T2.2.2.12" class="ltx_tr">
<td id="S3.T2.2.2.12.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">0.4</td>
<td id="S3.T2.2.2.12.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1</td>
<td id="S3.T2.2.2.12.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">82.97</td>
<td id="S3.T2.2.2.12.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.15</td>
<td id="S3.T2.2.2.12.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.97</td>
<td id="S3.T2.2.2.12.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">86.72</td>
<td id="S3.T2.2.2.12.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">82.69</td>
<td id="S3.T2.2.2.12.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">93.91</td>
<td id="S3.T2.2.2.12.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">98.23</td>
</tr>
<tr id="S3.T2.2.2.13" class="ltx_tr">
<td id="S3.T2.2.2.13.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">0.4</td>
<td id="S3.T2.2.2.13.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1.5</td>
<td id="S3.T2.2.2.13.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.33</td>
<td id="S3.T2.2.2.13.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.08</td>
<td id="S3.T2.2.2.13.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">84.20</td>
<td id="S3.T2.2.2.13.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">86.87</td>
<td id="S3.T2.2.2.13.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.17</td>
<td id="S3.T2.2.2.13.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">93.96</td>
<td id="S3.T2.2.2.13.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">97.77</td>
</tr>
<tr id="S3.T2.2.2.14" class="ltx_tr">
<td id="S3.T2.2.2.14.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_tt">0.5</td>
<td id="S3.T2.2.2.14.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">0.5</td>
<td id="S3.T2.2.2.14.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">82.54</td>
<td id="S3.T2.2.2.14.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">81.07</td>
<td id="S3.T2.2.2.14.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">83.66</td>
<td id="S3.T2.2.2.14.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">88.02</td>
<td id="S3.T2.2.2.14.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">81.81</td>
<td id="S3.T2.2.2.14.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">91.87</td>
<td id="S3.T2.2.2.14.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">97.73</td>
</tr>
<tr id="S3.T2.2.2.15" class="ltx_tr">
<td id="S3.T2.2.2.15.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">0.5</td>
<td id="S3.T2.2.2.15.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">1</td>
<td id="S3.T2.2.2.15.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.49</td>
<td id="S3.T2.2.2.15.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">80.69</td>
<td id="S3.T2.2.2.15.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">84.96</td>
<td id="S3.T2.2.2.15.6" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">87.18</td>
<td id="S3.T2.2.2.15.7" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">83.16</td>
<td id="S3.T2.2.2.15.8" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">94.20</td>
<td id="S3.T2.2.2.15.9" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">98.12</td>
</tr>
<tr id="S3.T2.2.2.16" class="ltx_tr">
<td id="S3.T2.2.2.16.1" class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t">0.5</td>
<td id="S3.T2.2.2.16.2" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">1.5</td>
<td id="S3.T2.2.2.16.3" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">83.25</td>
<td id="S3.T2.2.2.16.4" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">79.92</td>
<td id="S3.T2.2.2.16.5" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">84.58</td>
<td id="S3.T2.2.2.16.6" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">86.95</td>
<td id="S3.T2.2.2.16.7" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">83.01</td>
<td id="S3.T2.2.2.16.8" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">94.20</td>
<td id="S3.T2.2.2.16.9" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">98.12</td>
</tr>
</table>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 2: </span>Average test accuracy and consistency values for different values of the parameters <math id="S3.T2.6.m1.1" class="ltx_Math" alttext="\lambda" display="inline"><semantics id="S3.T2.6.m1.1b"><mi id="S3.T2.6.m1.1.1" xref="S3.T2.6.m1.1.1.cmml">λ</mi><annotation-xml encoding="MathML-Content" id="S3.T2.6.m1.1c"><ci id="S3.T2.6.m1.1.1.cmml" xref="S3.T2.6.m1.1.1">𝜆</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.6.m1.1d">\lambda</annotation></semantics></math> and <math id="S3.T2.7.m2.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S3.T2.7.m2.1b"><mi id="S3.T2.7.m2.1.1" xref="S3.T2.7.m2.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S3.T2.7.m2.1c"><ci id="S3.T2.7.m2.1.1.cmml" xref="S3.T2.7.m2.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.7.m2.1d">\gamma</annotation></semantics></math>. The first row (<math id="S3.T2.8.m3.1" class="ltx_Math" alttext="\lambda\,=\,0" display="inline"><semantics id="S3.T2.8.m3.1b"><mrow id="S3.T2.8.m3.1.1" xref="S3.T2.8.m3.1.1.cmml"><mi id="S3.T2.8.m3.1.1.2" xref="S3.T2.8.m3.1.1.2.cmml">λ</mi><mo lspace="0.448em" id="S3.T2.8.m3.1.1.1" xref="S3.T2.8.m3.1.1.1.cmml">=</mo><mn id="S3.T2.8.m3.1.1.3" xref="S3.T2.8.m3.1.1.3.cmml"> 0</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.T2.8.m3.1c"><apply id="S3.T2.8.m3.1.1.cmml" xref="S3.T2.8.m3.1.1"><eq id="S3.T2.8.m3.1.1.1.cmml" xref="S3.T2.8.m3.1.1.1"></eq><ci id="S3.T2.8.m3.1.1.2.cmml" xref="S3.T2.8.m3.1.1.2">𝜆</ci><cn type="float" id="S3.T2.8.m3.1.1.3.cmml" xref="S3.T2.8.m3.1.1.3"> 0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.T2.8.m3.1d">\lambda\,=\,0</annotation></semantics></math>) corresponds to the baseline.</figcaption>
</figure>
<div id="S3.SS0.SSS4.p2" class="ltx_para">
<p id="S3.SS0.SSS4.p2.1" class="ltx_p">In general, we observe that our proposed approach yields increases in accuracy and consistency when compared to both the baseline and SQuINT. Importantly, this increase in consistency is not at the expense of overall accuracy. Specifically, this indicates that our loss term causes the model to be correct about sub-questions when it is correct about main questions. The observed increase in accuracy also indicates that our approach is not synthetically increasing consistency by reducing the number of correct answers on main questions <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>. We note that SQuINT results in a reduction in accuracy and consistency, which can be partially explained by the presence of region questions that are not associated to any main question. These questions, which exceed the number of main questions, may affect the constraint in the learned attention maps.</p>
</div>
<div id="S3.SS0.SSS4.p3" class="ltx_para">
<p id="S3.SS0.SSS4.p3.4" class="ltx_p">Table <a href="#S3.T2" title="Table 2 ‣ 3.0.4 Results: ‣ 3 Experiments and results ‣ Consistency-preserving Visual Question Answering in Medical Imaging" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> shows the effect of <math id="S3.SS0.SSS4.p3.1.m1.1" class="ltx_Math" alttext="\lambda" display="inline"><semantics id="S3.SS0.SSS4.p3.1.m1.1a"><mi id="S3.SS0.SSS4.p3.1.m1.1.1" xref="S3.SS0.SSS4.p3.1.m1.1.1.cmml">λ</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS4.p3.1.m1.1b"><ci id="S3.SS0.SSS4.p3.1.m1.1.1.cmml" xref="S3.SS0.SSS4.p3.1.m1.1.1">𝜆</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS4.p3.1.m1.1c">\lambda</annotation></semantics></math> and <math id="S3.SS0.SSS4.p3.2.m2.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S3.SS0.SSS4.p3.2.m2.1a"><mi id="S3.SS0.SSS4.p3.2.m2.1.1" xref="S3.SS0.SSS4.p3.2.m2.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS4.p3.2.m2.1b"><ci id="S3.SS0.SSS4.p3.2.m2.1.1.cmml" xref="S3.SS0.SSS4.p3.2.m2.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS4.p3.2.m2.1c">\gamma</annotation></semantics></math> on the performance metrics. As expected, we notice that when <math id="S3.SS0.SSS4.p3.3.m3.1" class="ltx_Math" alttext="\lambda" display="inline"><semantics id="S3.SS0.SSS4.p3.3.m3.1a"><mi id="S3.SS0.SSS4.p3.3.m3.1.1" xref="S3.SS0.SSS4.p3.3.m3.1.1.cmml">λ</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS4.p3.3.m3.1b"><ci id="S3.SS0.SSS4.p3.3.m3.1.1.cmml" xref="S3.SS0.SSS4.p3.3.m3.1.1">𝜆</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS4.p3.3.m3.1c">\lambda</annotation></semantics></math> increases, the consistency of our approach increases as well and will occasionally deteriorate overall accuracy. The impact of <math id="S3.SS0.SSS4.p3.4.m4.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S3.SS0.SSS4.p3.4.m4.1a"><mi id="S3.SS0.SSS4.p3.4.m4.1.1" xref="S3.SS0.SSS4.p3.4.m4.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS0.SSS4.p3.4.m4.1b"><ci id="S3.SS0.SSS4.p3.4.m4.1.1.cmml" xref="S3.SS0.SSS4.p3.4.m4.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS0.SSS4.p3.4.m4.1c">\gamma</annotation></semantics></math> however is less evident, as no clear trend is visible. This would imply that the exact parameter value used is moderately critical to performances.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Conclusions</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">In this work, we presented a novel method for improving consistency in VQA models in cases where answers to sub-questions imply those of main questions and vice-versa. By using a tailored training procedure and loss function that measures the level of inconsistency, we show on the application of DME staging, that our approach provides important improvements in both VQA accuracy and consistency. In addition, we show that our method’s hyperparameters are relatively insensitive to model performance. In the future, we plan to investigate how this approach can be extended to the broader case of unconstrained question relations.</p>
</div>
<section id="S4.SS0.SSS1" class="ltx_subsubsection">
<h3 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">4.0.1 </span>Acknowledgments.</h3>

<div id="S4.SS0.SSS1.p1" class="ltx_para">
<p id="S4.SS0.SSS1.p1.1" class="ltx_p">This work was partially funded by the Swiss National Science Foundation through the grant # 191983.</p>
</div>
</section>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Antol, S., Agrawal, A., Lu, J., Mitchell, M., Batra, D., Zitnick, C.L., Parikh,
D.: Vqa: Visual question answering. In: Proceedings of the IEEE international
conference on computer vision. pp. 2425–2433 (2015)

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Cadene, R., Dancette, C., Cord, M., Parikh, D., et al.: Rubi: Reducing unimodal
biases for visual question answering. Advances in neural information
processing systems <span id="bib.bib2.1.1" class="ltx_text ltx_font_bold">32</span>, 841–852 (2019)

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Decenciere, E., Cazuguel, G., Zhang, X., Thibault, G., Klein, J.C., Meyer, F.,
Marcotegui, B., Quellec, G., Lamard, M., Danno, R., et al.: Teleophta:
Machine learning and image processing methods for teleophthalmology. Irbm
<span id="bib.bib3.1.1" class="ltx_text ltx_font_bold">34</span>(2), 196–203 (2013)

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Goel, V., Chandak, M., Anand, A., Guha, P.: IQ-VQA: Intelligent visual
question answering. In: International Conference on Pattern Recognition. pp.
357–370. Springer (2021)

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Gokhale, T., Banerjee, P., Baral, C., Yang, Y.: VQA-LOL: Visual question
answering under the lens of logic. In: European conference on computer
vision. pp. 379–396. Springer (2020)

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Gong, H., Chen, G., Liu, S., Yu, Y., Li, G.: Cross-modal self-attention with
multi-task pre-training for medical visual question answering. In:
Proceedings of the 2021 International Conference on Multimedia Retrieval. pp.
456–460 (2021)

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Goyal, Y., Khot, T., Summers-Stay, D., Batra, D., Parikh, D.: Making the v in
vqa matter: Elevating the role of image understanding in visual question
answering. In: Proceedings of the IEEE Conference on Computer Vision and
Pattern Recognition. pp. 6904–6913 (2017)

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
Hasan, S.A., Ling, Y., Farri, O., Liu, J., Lungren, M., Müller, H.: Overview
of the ImageCLEF 2018 medical domain visual question answering task. In:
CLEF2018 Working Notes. CEUR Workshop Proceedings, CEUR-WS.org
<math id="bib.bib8.1.m1.1" class="ltx_Math" alttext="&lt;" display="inline"><semantics id="bib.bib8.1.m1.1a"><mo id="bib.bib8.1.m1.1.1" xref="bib.bib8.1.m1.1.1.cmml">&lt;</mo><annotation-xml encoding="MathML-Content" id="bib.bib8.1.m1.1b"><lt id="bib.bib8.1.m1.1.1.cmml" xref="bib.bib8.1.m1.1.1"></lt></annotation-xml><annotation encoding="application/x-tex" id="bib.bib8.1.m1.1c">&lt;</annotation></semantics></math>http://ceur-ws.org<math id="bib.bib8.2.m2.1" class="ltx_Math" alttext="&gt;" display="inline"><semantics id="bib.bib8.2.m2.1a"><mo id="bib.bib8.2.m2.1.1" xref="bib.bib8.2.m2.1.1.cmml">&gt;</mo><annotation-xml encoding="MathML-Content" id="bib.bib8.2.m2.1b"><gt id="bib.bib8.2.m2.1.1.cmml" xref="bib.bib8.2.m2.1.1"></gt></annotation-xml><annotation encoding="application/x-tex" id="bib.bib8.2.m2.1c">&gt;</annotation></semantics></math>, Avignon, France (September 10-14 2018)

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
He, K., Zhang, X., Ren, S., Sun, J.: Deep residual learning for image
recognition. In: Proceedings of the IEEE conference on computer vision and
pattern recognition. pp. 770–778 (2016)

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Hochreiter, S., Schmidhuber, J.: Long short-term memory. Neural computation
<span id="bib.bib10.1.1" class="ltx_text ltx_font_bold">9</span>(8), 1735–1780 (1997)

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Hudson, D.A., Manning, C.D.: Gqa: a new dataset for compositional question
answering over real-world images. arXiv preprint arXiv:1902.09506
<span id="bib.bib11.1.1" class="ltx_text ltx_font_bold">3</span>(8) (2019)

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Liao, Z., Wu, Q., Shen, C., Van Den Hengel, A., Verjans, J.: Aiml at vqa-med
2020: Knowledge inference via a skeleton-based sentence mapping approach for
medical domain visual question answering (2020)

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Liu, F., Peng, Y., Rosen, M.P.: An effective deep transfer learning and
information fusion framework for medical visual question answering. In:
International Conference of the Cross-Language Evaluation Forum for European
Languages. pp. 238–247. Springer (2019)

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Nguyen, B.D., Do, T.T., Nguyen, B.X., Do, T., Tjiputra, E., Tran, Q.D.:
Overcoming data limitation in medical visual question answering. In: Shen,
D., Liu, T., Peters, T.M., Staib, L.H., Essert, C., Zhou, S., Yap, P.T.,
Khan, A. (eds.) Medical Image Computing and Computer Assisted Intervention –
MICCAI 2019. pp. 522–530. Springer International Publishing, Cham (2019)

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Porwal, P., Pachade, S., Kamble, R., Kokare, M., Deshmukh, G., Sahasrabuddhe,
V., Meriaudeau, F.: Indian diabetic retinopathy image dataset (idrid) (2018).
https://doi.org/10.21227/H25W98, <a target="_blank" href="https://dx.doi.org/10.21227/H25W98" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://dx.doi.org/10.21227/H25W98</a>

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Ray, A., Sikka, K., Divakaran, A., Lee, S., Burachas, G.: Sunny and dark
outside?! improving answer consistency in vqa through entailed question
generation. arXiv preprint arXiv:1909.04696 (2019)

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Ren, F., Cao, P., Zhao, D., Wan, C.: Diabetic macular edema grading in retinal
images using vector quantization and semi-supervised learning. Technology and
Health Care <span id="bib.bib17.1.1" class="ltx_text ltx_font_bold">26</span>(S1), 389–397 (2018)

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Ribeiro, M.T., Guestrin, C., Singh, S.: Are red roses red? evaluating
consistency of question-answering models. In: Proceedings of the 57th Annual
Meeting of the Association for Computational Linguistics. pp. 6174–6184
(2019)

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Sarrouti, M.: Nlm at vqa-med 2020: Visual question answering and generation in
the medical domain. In: CLEF (Working Notes) (2020)

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Selvaraju, R.R., Tendulkar, P., Parikh, D., Horvitz, E., Ribeiro, M.T., Nushi,
B., Kamar, E.: Squinting at vqa models: Introspecting vqa models with
sub-questions. In: Proceedings of the IEEE/CVF Conference on Computer Vision
and Pattern Recognition. pp. 10003–10011 (2020)

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Shah, M., Chen, X., Rohrbach, M., Parikh, D.: Cycle-consistency for robust
visual question answering. In: Proceedings of the IEEE/CVF Conference on
Computer Vision and Pattern Recognition. pp. 6649–6658 (2019)

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Tan, H., Bansal, M.: Lxmert: Learning cross-modality encoder representations
from transformers. arXiv preprint arXiv:1908.07490 (2019)

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Teney, D., Abbasnejad, E., Hengel, A.v.d.: On incorporating semantic prior
knowledge in deep learning through embedding-space constraints. arXiv
preprint arXiv:1909.13471 (2019)

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Vu, M.H., Löfstedt, T., Nyholm, T., Sznitman, R.: A question-centric model
for visual question answering in medical imaging. IEEE transactions on
medical imaging <span id="bib.bib24.1.1" class="ltx_text ltx_font_bold">39</span>(9), 2856–2868 (2020)

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Wang, P., Liao, R., Moyer, D., Berkowitz, S., Horng, S., Golland, P.: Image
classification with consistent supporting evidence. In: Machine Learning for
Health. pp. 168–180. PMLR (2021)

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Xu, K., Ba, J., Kiros, R., Cho, K., Courville, A., Salakhudinov, R., Zemel, R.,
Bengio, Y.: Show, attend and tell: Neural image caption generation with
visual attention. In: International conference on machine learning. pp.
2048–2057. PMLR (2015)

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Yuan, Y., Wang, S., Jiang, M., Chen, T.Y.: Perception matters: Detecting
perception failures of vqa models using metamorphic testing. In: Proceedings
of the IEEE/CVF Conference on Computer Vision and Pattern Recognition. pp.
16908–16917 (2021)

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Zhan, L.M., Liu, B., Fan, L., Chen, J., Wu, X.M.: Medical visual question
answering via conditional reasoning. In: Proceedings of the 28th ACM
International Conference on Multimedia. pp. 2345–2354 (2020)

</span>
</li>
</ul>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2206.13295" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2206.13296" class="ar5iv-text-button ar5iv-severity-ok">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2206.13296">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2206.13296" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2206.13298" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Mon Mar 11 17:42:31 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
