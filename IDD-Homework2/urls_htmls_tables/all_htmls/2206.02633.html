<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2206.02633] Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity</title><meta property="og:description" content="Federated learning (FL) is an effective mechanism for data privacy in recommender systems by running machine learning model training on-device.
While prior FL optimizations tackled the data and system heterogeneity cha…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2206.02633">

<!--Generated on Mon Mar 11 19:32:42 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Kiwan Maeng 
<br class="ltx_break">Meta AI 
<br class="ltx_break"><span id="id5.1.id1" class="ltx_ERROR undefined">\And</span>Haiyu Lu 
<br class="ltx_break">Meta 
<br class="ltx_break"><span id="id6.2.id2" class="ltx_ERROR undefined">\And</span>Luca Melis 
<br class="ltx_break">Meta 
<br class="ltx_break"><span id="id7.3.id3" class="ltx_ERROR undefined">\And</span>John Nguyen 
<br class="ltx_break">Meta 
<br class="ltx_break"><span id="id8.4.id4" class="ltx_ERROR undefined">\And</span>Mike Rabbat 
<br class="ltx_break">Meta AI 
<br class="ltx_break"><span id="id9.5.id5" class="ltx_ERROR undefined">\And</span>Carole-Jean Wu 
<br class="ltx_break">Meta AI
</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id4.4" class="ltx_p">Federated learning (FL) is an effective mechanism for data privacy in recommender systems by running machine learning model training on-device.
While prior FL optimizations tackled the data and system heterogeneity challenges faced by FL, they assume the two are independent of each other. This fundamental assumption is <em id="id4.4.1" class="ltx_emph ltx_font_italic">not</em> reflective of real-world, large-scale recommender systems — <em id="id4.4.2" class="ltx_emph ltx_font_italic">data and system heterogeneity are tightly intertwined</em>. This paper takes a data-driven approach to show the inter-dependence of data and system heterogeneity in real-world data and quantifies its impact on the overall model quality and fairness. We design a framework, RF<sup id="id4.4.3" class="ltx_sup">2</sup>, to model the inter-dependence and evaluate its impact on state-of-the-art model optimization techniques for federated recommendation tasks. We demonstrate that the impact on fairness can be severe under realistic heterogeneity scenarios, by up to 15.8–41<math id="id2.2.m2.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="id2.2.m2.1a"><mo id="id2.2.m2.1.1" xref="id2.2.m2.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="id2.2.m2.1b"><times id="id2.2.m2.1.1.cmml" xref="id2.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="id2.2.m2.1c">\times</annotation></semantics></math> compared to a simple setup assumed in most (if not all) prior work. It means when realistic system-induced data heterogeneity is not properly modeled, the fairness impact of an optimization can be downplayed by up to 41<math id="id3.3.m3.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="id3.3.m3.1a"><mo id="id3.3.m3.1.1" xref="id3.3.m3.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="id3.3.m3.1b"><times id="id3.3.m3.1.1.cmml" xref="id3.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="id3.3.m3.1c">\times</annotation></semantics></math>.
The result shows that modeling realistic system-induced data heterogeneity is essential to achieving fair federated recommendation learning.
We plan to open-source RF<sup id="id4.4.4" class="ltx_sup">2</sup> to enable future design and evaluation of FL innovations.</p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para ltx_noindent">
<p id="S1.p1.1" class="ltx_p">Recommender systems are a fundamental building block of modern internet services, empowering day-to-day applications. Recommender systems suggest videos on Netflix <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite> and Youtube <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>, music on Spotify <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>, apps on the Google Play Store <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>, and stories on Instagram <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>.
A recent study showed that 60% of YouTube’s and 75% of Netflix’s videos watched were selected based on recommender systems <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>, <a href="#bib.bib7" title="" class="ltx_ref">7</a>, <a href="#bib.bib8" title="" class="ltx_ref">8</a>]</cite>. They are one of the important machine learning workloads, comprising 50% of the training <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite> and 80% of inference cycles <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>]</cite> at Meta in 2019.</p>
</div>
<div id="S1.p2" class="ltx_para ltx_noindent">
<p id="S1.p2.1" class="ltx_p">While recommender systems were traditionally trained inside datacenters, recent studies are increasingly exploring training them on each client device, using <em id="S1.p2.1.1" class="ltx_emph ltx_font_italic">federated learning</em> (FL) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref">11</a>, <a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite>.
FL is a privacy-enhancing training method that is already well-adopted in many commercial products for non-recommendation use-cases, including Google’s Gboard <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>, <a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite> and Meta’s Oculus keyboard <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>.
FL trains a model locally on each client device using its local data and later aggregates only the model updates. FL does not require raw user data to leave the client device.</p>
</div>
<div id="S1.p3" class="ltx_para ltx_noindent">
<p id="S1.p3.1" class="ltx_p">Training models with FL faces several unique challenges due to the data and system heterogeneity of participating client devices.
<em id="S1.p3.1.1" class="ltx_emph ltx_font_italic">Data heterogeneity</em> refers to the fact that data in each user device is not <em id="S1.p3.1.2" class="ltx_emph ltx_font_italic">independent and identically distributed</em> (IID), which makes convergence more challenging <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>. <em id="S1.p3.1.3" class="ltx_emph ltx_font_italic">System heterogeneity</em> refers to the fact that client devices (e.g., smartphones) have different system capabilities from each other, which generally limits the model capacity and training efficiency <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>. Both challenges have been extensively tackled by prior literature <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>, <a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib19" title="" class="ltx_ref">19</a>, <a href="#bib.bib20" title="" class="ltx_ref">20</a>, <a href="#bib.bib21" title="" class="ltx_ref">21</a>, <a href="#bib.bib22" title="" class="ltx_ref">22</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>.</p>
</div>
<div id="S1.p4" class="ltx_para ltx_noindent">
<p id="S1.p4.1" class="ltx_p">However, no prior work looked at the <em id="S1.p4.1.1" class="ltx_emph ltx_font_italic">inter-dependence</em> of data and system heterogeneity, assuming the two are independent of each other.
Prior work used a random mapping approach to model data and system heterogeneity simultaneously <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib19" title="" class="ltx_ref">19</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>, which we show to always produce zero correlation between the two heterogeneity (Section <a href="#S3.SS2" title="3.2 Does the Real World Experience System-induced Data Heterogeneity? ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>).
By analyzing data from a large-scale recommender system deployment, we show that the simplistic assumption is not representative of the real world – in real systems, data and system heterogeneity are tightly intertwined (Section <a href="#S3.SS2" title="3.2 Does the Real World Experience System-induced Data Heterogeneity? ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a>).
We refer to the tight correlation as <em id="S1.p4.1.2" class="ltx_emph ltx_font_bold ltx_font_italic">system-induced data heterogeneity</em>.
We show that the system-induced data heterogeneity in real data can cause optimizations to experience fairness issues, which is a phenomenon not observed in prior work.
To the best of our knowledge, this is the first time system-induced data heterogeneity and its effects are reported and demonstrated with real-world data.</p>
</div>
<div id="S1.p5" class="ltx_para ltx_noindent">
<p id="S1.p5.6" class="ltx_p">Based on this important observation, we developed RF<sup id="S1.p5.6.1" class="ltx_sup">2</sup> (Realistic Federated Recommendation for Fairness), an FL framework for recommender systems that simulates various degrees of system-induced data heterogeneity. RF<sup id="S1.p5.6.2" class="ltx_sup">2</sup> includes: (1) code to simulate FL using popular recommendation models and datasets, (2) a statistical method to model and control system-induced data heterogeneity, and (3) implementations of various popular FL optimizations for system heterogeneity <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>, <a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib13" title="" class="ltx_ref">13</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite>.
Our evaluation with RF<sup id="S1.p5.6.3" class="ltx_sup">2</sup> reveals that several popular FL optimizations can hurt the model fairness severely in a realistic setup with system-induced data heterogeneity, sometimes by more than 40<math id="S1.p5.4.m4.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S1.p5.4.m4.1a"><mo id="S1.p5.4.m4.1.1" xref="S1.p5.4.m4.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S1.p5.4.m4.1b"><times id="S1.p5.4.m4.1.1.cmml" xref="S1.p5.4.m4.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.p5.4.m4.1c">\times</annotation></semantics></math> compared to a simplistic case with no system-induced data heterogeneity.
Our evaluation also lists several interesting observations. For example, we show that methods that showed similar fairness implications with no system-induced data heterogeneity can show significantly different fairness impacts with realistic system-induced data heterogeneity. We also show optimizations that achieve the best accuracy are not always the fairest (e.g., two similar-accuracy optimizations can differ in their fairness by 4.88<math id="S1.p5.5.m5.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S1.p5.5.m5.1a"><mo id="S1.p5.5.m5.1.1" xref="S1.p5.5.m5.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S1.p5.5.m5.1b"><times id="S1.p5.5.m5.1.1.cmml" xref="S1.p5.5.m5.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S1.p5.5.m5.1c">\times</annotation></semantics></math>).
We hope our evaluation motivates the need to simulate more realistic system-induced data heterogeneity. RF<sup id="S1.p5.6.4" class="ltx_sup">2</sup> can aid future researchers in systematically studying the realistic fairness impact of their systems.
Our key contributions are:
</p>
<ol id="S1.I1" class="ltx_enumerate">
<li id="S1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S1.I1.i1.p1" class="ltx_para">
<p id="S1.I1.i1.p1.1" class="ltx_p">We identify the existence of system-induced data heterogeneity and its potential effects in real-world data. To the best of our knowledge, this work is the first to explicitly reveal such effects in the real world.</p>
</div>
</li>
<li id="S1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S1.I1.i2.p1" class="ltx_para">
<p id="S1.I1.i2.p1.1" class="ltx_p">We propose a method to synthesize system-induced data heterogeneity onto existing datasets. Datasets generated with our method can simulate interesting fairness effects of the real world, while prior approaches cannot.</p>
</div>
</li>
<li id="S1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S1.I1.i3.p1" class="ltx_para">
<p id="S1.I1.i3.p1.2" class="ltx_p">We present RF<sup id="S1.I1.i3.p1.2.1" class="ltx_sup">2</sup>, an FL simulation framework for recommendation models that can simulate system-induced data heterogeneity and various FL optimizations from prior work. RF<sup id="S1.I1.i3.p1.2.2" class="ltx_sup">2</sup> will be open-sourced upon publication, which will allow future researchers to assess their optimizations in a more realistic setup.</p>
</div>
</li>
<li id="S1.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="S1.I1.i4.p1" class="ltx_para ltx_noindent">
<p id="S1.I1.i4.p1.1" class="ltx_p">Our evaluation lists several effects of system-induced data heterogeneity on existing optimizations. We hope the findings will inspire future researchers to design and evaluate fair FL systems on a more realistic setup.</p>
</div>
</li>
</ol>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Background and Motivation</h2>

<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Deep Learning Recommender Systems</h3>

<div id="S2.SS1.p1" class="ltx_para ltx_noindent">
<p id="S2.SS1.p1.1" class="ltx_p">Recommender systems suggest items to users by predicting the likelihood of interaction (e.g., click or purchase) between a user and items.
We broadly use the term <em id="S2.SS1.p1.1.1" class="ltx_emph ltx_font_italic">click</em> to refer to any positive user-item interaction.
Various techniques have been explored to deliver high-quality recommendations, ranging from classical techniques, e.g., matrix factorization <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref">25</a>]</cite>, to emerging new deep learning-based techniques <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib27" title="" class="ltx_ref">27</a>, <a href="#bib.bib28" title="" class="ltx_ref">28</a>, <a href="#bib.bib29" title="" class="ltx_ref">29</a>, <a href="#bib.bib30" title="" class="ltx_ref">30</a>, <a href="#bib.bib31" title="" class="ltx_ref">31</a>]</cite>, just to name a few.
In this paper, we will focus on deep learning-based approaches and refer to them as recommender systems.</p>
</div>
<div id="S2.SS1.p2" class="ltx_para ltx_noindent">
<p id="S2.SS1.p2.1" class="ltx_p">Deep learning-based recommender systems use features of users and items as inputs to predict whether a user will click a particular item.
Two commonly-used feature types are dense features and sparse features. Dense features represent features of continuous values, such as a user’s age or the price of an item. Sparse features represent categorical features of discrete values, such as a user’s gender, the collection of items a user liked in the past, or the genre of a movie.
Sparse features are usually encoded as an extremely sparse one- or multi-hot vector.</p>
</div>
<div id="S2.SS1.p3" class="ltx_para ltx_noindent">
<p id="S2.SS1.p3.1" class="ltx_p">To predict the click probability, recommender systems first translate sparse features into dense embedding vectors using embedding tables <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref">28</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>. The embedding vectors are merged with dense features and go through a multi-layer perception (MLP), producing a prediction at the end.
Different model architectures explore variations in how the features are merged, including simple concatenation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib32" title="" class="ltx_ref">32</a>]</cite>, element-wise multiplication <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib32" title="" class="ltx_ref">32</a>]</cite>, pairwise dot product <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref">28</a>, <a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>, attention-based weighted averaging <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>, or using another deep model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib30" title="" class="ltx_ref">30</a>, <a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Federated Learning</h3>

<div id="S2.SS2.p1" class="ltx_para ltx_noindent">
<p id="S2.SS2.p1.1" class="ltx_p">Federated learning (FL) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite> trains a model using a pool of client devices without each client having to send its data to the server. In this section, we discuss the workflow of FL and how prior literature handles data and system heterogeneity.</p>
</div>
<section id="S2.SS2.SSS1" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.1 </span>Workflow of Federated Learning</h4>

<div id="S2.SS2.SSS1.p1" class="ltx_para ltx_noindent">
<p id="S2.SS2.SSS1.p1.1" class="ltx_p">To train a model using FL, a centralized server first selects clients to participate from the client pool. The selected clients download the model from the server and train it locally using their data.
After training, the clients upload their trained models (or equivalently, the gradients) back to the server. When all the participating clients upload their gradients, the server aggregates the gradients and updates the server-side model. The process repeats until the model converges.
In the most commonly-used FedAvg algorithm <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>, the server aggregates client gradients using weighted averaging, where the number of samples in each client corresponds to a weight value. Then, the aggregated gradient is simply added to the server model or applied using a separate server-side optimizer <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite>.</p>
</div>
</section>
<section id="S2.SS2.SSS2" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.2 </span>Data Heterogeneity</h4>

<div id="S2.SS2.SSS2.p1" class="ltx_para ltx_noindent">
<p id="S2.SS2.SSS2.p1.1" class="ltx_p">FL is a form of distributed ML training. However, unlike distributed training in datacenters where data can be shuffled so that each trainer node has an independent and identically distributed (IID) subsample <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib34" title="" class="ltx_ref">34</a>]</cite>, the data of each FL client is non-IID — the number of samples and the feature/label distributions on each client are different from each other <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>.
Data heterogeneity makes it challenging to reach high model quality <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>]</cite>. Many algorithms <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>, <a href="#bib.bib36" title="" class="ltx_ref">36</a>, <a href="#bib.bib37" title="" class="ltx_ref">37</a>]</cite> have been proposed to improve the model quality in the presence of data heterogeneity.</p>
</div>
<figure id="S2.F1" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S2.F1.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x1.png" id="S2.F1.sf1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(a) </span>A case without system-induced data heterogeneity</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S2.F1.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x2.png" id="S2.F1.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="346" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(b) </span>A case with system-induced data heterogeneity</figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Tier-aware optimizations can hurt fairness when system-induced data heterogeneity is present. The figure shows an optimization that makes low-end devices train only a subset of the model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>. The optimization produces a fair model if the data distribution between low- and high-end devices are similar (a), but may become unfair if the data distribution differ significantly (b).
</figcaption>
</figure>
</section>
<section id="S2.SS2.SSS3" class="ltx_subsubsection">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">2.2.3 </span>System Heterogeneity and Tier-Aware Optimizations</h4>

<div id="S2.SS2.SSS3.p1" class="ltx_para ltx_noindent">
<p id="S2.SS2.SSS3.p1.1" class="ltx_p">Client devices (e.g., smartphones) vary significantly in their system capabilities, including computing power, memory, storage, and network speed <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>, <a href="#bib.bib39" title="" class="ltx_ref">39</a>]</cite>. For example, low-end and high-end smartphones may experience a 2–6<math id="S2.SS2.SSS3.p1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S2.SS2.SSS3.p1.1.m1.1a"><mo id="S2.SS2.SSS3.p1.1.m1.1.1" xref="S2.SS2.SSS3.p1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS3.p1.1.m1.1b"><times id="S2.SS2.SSS3.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS3.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS3.p1.1.m1.1c">\times</annotation></semantics></math> latency difference when training the same model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite> and two orders of magnitude difference in their network bandwidth <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib40" title="" class="ltx_ref">40</a>]</cite>.
The <em id="S2.SS2.SSS3.p1.1.1" class="ltx_emph ltx_font_italic">system heterogeneity</em> degrades the efficiency of FL because each round in FL proceeds only after all the participating clients finish training and send back updates.
The synchronous nature makes slow clients become <em id="S2.SS2.SSS3.p1.1.2" class="ltx_emph ltx_font_italic">stragglers</em> that bottleneck the entire training process.</p>
</div>
<div id="S2.SS2.SSS3.p2" class="ltx_para ltx_noindent">
<p id="S2.SS2.SSS3.p2.1" class="ltx_p">To mitigate the straggler effect, recent studies proposed <em id="S2.SS2.SSS3.p2.1.1" class="ltx_emph ltx_font_italic">tier-aware optimizations</em>.
The core idea is to group devices with similar system capabilities into <em id="S2.SS2.SSS3.p2.1.2" class="ltx_emph ltx_font_italic">tiers</em> and apply distinct optimizations to different device tiers, so that lower-tier devices bear lighter computation/communication burdens. Below, we describe some of the commonly proposed forms:</p>
</div>
<section id="S2.SS2.SSS3.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_font_bold ltx_title_paragraph">Excluding low-end devices</h5>

<div id="S2.SS2.SSS3.Px1.p1" class="ltx_para ltx_noindent">
<p id="S2.SS2.SSS3.Px1.p1.1" class="ltx_p">The simplest optimization is to prevent low-end devices from participating in FL entirely to minimize the presence of stragglers. This simple solution can either be implemented by explicitly leaving out low-end devices <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite> or by implicitly setting a training time deadline that low-end devices cannot meet <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite>. Many real products have adopted this strategy. For example, Google’s Gboard’s next-word prediction disallows devices with less than 2GB RAM from participating in their FL process <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>).</p>
</div>
</section>
<section id="S2.SS2.SSS3.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_font_bold ltx_title_paragraph">Over-selection and dropping</h5>

<div id="S2.SS2.SSS3.Px2.p1" class="ltx_para ltx_noindent">
<p id="S2.SS2.SSS3.Px2.p1.3" class="ltx_p">Another well-adopted optimization is to select <math id="S2.SS2.SSS3.Px2.p1.1.m1.1" class="ltx_Math" alttext="N" display="inline"><semantics id="S2.SS2.SSS3.Px2.p1.1.m1.1a"><mi id="S2.SS2.SSS3.Px2.p1.1.m1.1.1" xref="S2.SS2.SSS3.Px2.p1.1.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS3.Px2.p1.1.m1.1b"><ci id="S2.SS2.SSS3.Px2.p1.1.m1.1.1.cmml" xref="S2.SS2.SSS3.Px2.p1.1.m1.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS3.Px2.p1.1.m1.1c">N</annotation></semantics></math>% more clients than needed during selection and drop the slowest <math id="S2.SS2.SSS3.Px2.p1.2.m2.1" class="ltx_Math" alttext="N" display="inline"><semantics id="S2.SS2.SSS3.Px2.p1.2.m2.1a"><mi id="S2.SS2.SSS3.Px2.p1.2.m2.1.1" xref="S2.SS2.SSS3.Px2.p1.2.m2.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS3.Px2.p1.2.m2.1b"><ci id="S2.SS2.SSS3.Px2.p1.2.m2.1.1.cmml" xref="S2.SS2.SSS3.Px2.p1.2.m2.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS3.Px2.p1.2.m2.1c">N</annotation></semantics></math>% during aggregation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>. Low-end devices are more likely to be dropped by this optimization because they are more likely to end up being the slowest <math id="S2.SS2.SSS3.Px2.p1.3.m3.1" class="ltx_Math" alttext="N" display="inline"><semantics id="S2.SS2.SSS3.Px2.p1.3.m3.1a"><mi id="S2.SS2.SSS3.Px2.p1.3.m3.1.1" xref="S2.SS2.SSS3.Px2.p1.3.m3.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.SSS3.Px2.p1.3.m3.1b"><ci id="S2.SS2.SSS3.Px2.p1.3.m3.1.1.cmml" xref="S2.SS2.SSS3.Px2.p1.3.m3.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.SSS3.Px2.p1.3.m3.1c">N</annotation></semantics></math>%.</p>
</div>
</section>
<section id="S2.SS2.SSS3.Px3" class="ltx_paragraph">
<h5 class="ltx_title ltx_font_bold ltx_title_paragraph">Tiered gradient compression</h5>

<div id="S2.SS2.SSS3.Px3.p1" class="ltx_para ltx_noindent">
<p id="S2.SS2.SSS3.Px3.p1.1" class="ltx_p">When there is a network bandwidth imbalance between tiers, applying gradient compression (e.g., gradient pruning <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>, <a href="#bib.bib42" title="" class="ltx_ref">42</a>, <a href="#bib.bib43" title="" class="ltx_ref">43</a>, <a href="#bib.bib44" title="" class="ltx_ref">44</a>]</cite> or quantization <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>, <a href="#bib.bib45" title="" class="ltx_ref">45</a>]</cite>) more aggressively to devices with a slower network can balance the communication speed.
Not all techniques from other use-cases are applicable to FL, however. For example, the popular Top-K pruning <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib46" title="" class="ltx_ref">46</a>]</cite> may leak which entries of the embedding tables were accessed in FL <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite>.</p>
</div>
</section>
<section id="S2.SS2.SSS3.Px4" class="ltx_paragraph">
<h5 class="ltx_title ltx_font_bold ltx_title_paragraph">Tiered model sizes</h5>

<div id="S2.SS2.SSS3.Px4.p1" class="ltx_para ltx_noindent">
<p id="S2.SS2.SSS3.Px4.p1.1" class="ltx_p">When model computation time imbalance is severe, using smaller models for devices with less computing capabilities can relieve the imbalance.
Several prior work proposed using a smaller number of channels for low-tier devices to reduce computation time and memory usage <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>.
Upon model aggregation, channels are only averaged across tiers that use the channels <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>, and knowledge distillation can be additionally used to further improve model accuracy <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>.
Others allowed each device tier to use an entirely different model from each other and relied on knowledge distillation to aggregate the knowledge <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib47" title="" class="ltx_ref">47</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib48" title="" class="ltx_ref">48</a>, <a href="#bib.bib49" title="" class="ltx_ref">49</a>, <a href="#bib.bib50" title="" class="ltx_ref">50</a>, <a href="#bib.bib51" title="" class="ltx_ref">51</a>, <a href="#bib.bib52" title="" class="ltx_ref">52</a>]</cite>.
Figure <a href="#S2.F1.sf1" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(a)</span></a> illustrates an example of a tier-aware optimization, where low-end devices train a smaller model with fewer channels in its hidden layers.</p>
</div>
</section>
</section>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Real-world Observations: Data and System Heterogeneity are Intertwined</h2>

<figure id="S3.F2" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F2.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x3.png" id="S3.F2.sf1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="261" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(a) </span>Real-world statistics</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F2.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x4.png" id="S3.F2.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="261" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(b) </span>Random-mapping statistics</figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S3.F2.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x5.png" id="S3.F2.sf3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="253" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(c) </span>Fairness implications</figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Real world experiences system induced data heterogeneity that can impact fairness. (a) plots the distribution of feature values across tiers in the real world, and (b) plots what the distribution would look like instead with random tier mapping. Comparing the two clearly shows that the real world experiences system-induced data heterogeneity.
(c) shows the accuracy change for each tier when excluding low-end devices from training, in the presence of system-induced data heterogeneity in (a). Low-end devices are disproportionately penalized compared to the overall population.
</figcaption>
</figure>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Inter-dependence Between Data and System Heterogeneity</h3>

<div id="S3.SS1.p1" class="ltx_para ltx_noindent">
<p id="S3.SS1.p1.1" class="ltx_p">Section <a href="#S2.SS2.SSS2" title="2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2.2</span></a>–<a href="#S2.SS2.SSS3" title="2.2.3 System Heterogeneity and Tier-Aware Optimizations ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2.3</span></a> discussed a stream of prior research that tackled the data heterogeneity and system heterogeneity of FL.
However, most (if not all) prior studies tackled data and system heterogeneity separately, assuming <em id="S3.SS1.p1.1.1" class="ltx_emph ltx_font_italic">no inter-dependence exists between the two</em>. This assumption, however, is not reflective of the real world.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para ltx_noindent">
<p id="S3.SS1.p2.1" class="ltx_p">As a motivating example, assume that there are clients who like apples and clients who like bananas in the world, and their fruit preferences are an important feature of a recommender system (e.g., the system recommends apple juice to apple-liking clients). If the probability of liking apples or bananas is the same regardless of the client’s device tier as in Figure <a href="#S2.F1.sf1" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(a)</span></a>, we say there exists no inter-dependence between data and system heterogeneity.</p>
</div>
<div id="S3.SS1.p3" class="ltx_para ltx_noindent">
<p id="S3.SS1.p3.1" class="ltx_p">Alternatively, there can be cases where the probability of liking apples is higher for low-end devices, while the probability of liking bananas is higher for high-end devices (Figure <a href="#S2.F1.sf2" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(b)</span></a>). When there is such data distribution difference <em id="S3.SS1.p3.1.1" class="ltx_emph ltx_font_italic">between device tiers</em>, inter-dependence exists between data and system heterogeneity. We term such an inter-dependence as <em id="S3.SS1.p3.1.2" class="ltx_emph ltx_font_bold ltx_font_italic">system-induced data heterogeneity</em> in this work.
When system-induced data heterogeneity exists, applying tier-aware optimizations may cause fairness issues. For example, if we use fewer channels for low-end devices, and low-end devices mostly hold apple-liking features, the final trained model may not work as well for apple-liking clients as for banana-liking clients, because most of the apple-liking data were trained through a model with fewer channels (Figure <a href="#S2.F1.sf2" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(b)</span></a>).
We show in Section <a href="#S3.SS2" title="3.2 Does the Real World Experience System-induced Data Heterogeneity? ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3.2</span></a> that real-world recommender systems experience system-induced data heterogeneity, and the fairness of the model can be impacted when tier-aware optimizations are applied without careful considerations. Thus, it is important to simulate realistic system-induced data heterogeneity when evaluating FL optimizations.</p>
</div>
<div id="S3.SS1.p4" class="ltx_para ltx_noindent">
<p id="S3.SS1.p4.1" class="ltx_p">Unfortunately, no prior FL literature assumed the existence of system-induced data heterogeneity to the best of our knowledge, and hence no prior optimizations were evaluated in the presence of realistic system-induced data heterogeneity. When simulating data and system heterogeneity, even the advanced FL simulators with real-world system traces <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>, synthesized or collected client data that show data heterogeneity and <em id="S3.SS1.p4.1.1" class="ltx_emph ltx_font_italic">randomly assigned</em> synthesized or collected system heterogeneity characteristics (i.e., device tiers) to each client <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>.
Such a random tier-client mapping always produces a dataset with no system-induced data heterogeneity, as in Figure <a href="#S2.F1.sf1" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(a)</span></a>.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Does the Real World Experience System-induced Data Heterogeneity?</h3>

<div id="S3.SS2.p1" class="ltx_para ltx_noindent">
<p id="S3.SS2.p1.1" class="ltx_p">To understand whether system-induced data heterogeneity exists in the real world, we analyzed important sparse features of a recommender system that serves billions of users worldwide.
Figure <a href="#S3.F2.sf1" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(a)</span></a> presents the statistics of a sparse feature that is known to be important in delivering high-quality recommendations (e.g., fruit preferences in Figure <a href="#S2.F1" title="Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>).
We group the user devices into three tiers (low-, mid-, and high-) based on their system capabilities and observe how frequently each value in the feature (e.g., apple, banana, orange, …) occurs within each tier.
Figure <a href="#S3.F2.sf1" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(a)</span></a> plots the result for the top-10 most frequently observed values. In Figure <a href="#S3.F2.sf2" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(b)</span></a>, we plot the statistics again, but this time, by mapping users to tiers randomly as was done by the prior work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib19" title="" class="ltx_ref">19</a>, <a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite> instead of using the actual tiers.</p>
</div>
<div id="S3.SS2.p2" class="ltx_para ltx_noindent">
<p id="S3.SS2.p2.1" class="ltx_p">Comparing Figure <a href="#S3.F2.sf1" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(a)</span></a> and Figure <a href="#S3.F2.sf2" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(b)</span></a>, it is clear that <span id="S3.SS2.p2.1.1" class="ltx_text ltx_font_italic">real-world deployment environment experiences notable system-induced data heterogeneity</span>.
When using random tier mapping (Figure <a href="#S3.F2.sf2" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(b)</span></a>), the probability of each sparse feature value occurring is the same across tiers. In other words, the affinity to apples/bananas is the same across device tiers (Figure <a href="#S2.F1.sf1" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(a)</span></a>).
However, real-world data (Figure <a href="#S3.F2.sf1" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(a)</span></a>) exhibits high data heterogeneity across tiers, closely resembling the scenario depicted in Figure <a href="#S2.F1.sf2" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(b)</span></a>. For example, sparse feature value 3 is mostly observed only in the low-end device tier, resembling the preferences for apple in Figure <a href="#S2.F1.sf2" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(b)</span></a>. Value 9, on the other hand, is mostly observed in the mid/high-end device tiers but very scarcely in the low-end device tier, resembling the preferences for bananas in Figure <a href="#S2.F1.sf2" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(b)</span></a>.</p>
</div>
<div id="S3.SS2.p3" class="ltx_para ltx_noindent">
<p id="S3.SS2.p3.1" class="ltx_p">We also demonstrate with that popular tier-aware optimizations can introduce fairness degradation in the presence of system-induced data heterogeneity. We trained a recommendation model using data similar to Figure <a href="#S3.F2.sf1" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(a)</span></a> while prohibiting low-end devices from participating, following Google’s Gboard FL setup <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>.
Figure <a href="#S3.F2.sf3" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(c)</span></a> shows the resulting model accuracy change for each tier, normalized by the overall average.
Low-end devices get disproportionately affected by the optimization, suffering from 17.6<math id="S3.SS2.p3.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S3.SS2.p3.1.m1.1a"><mo id="S3.SS2.p3.1.m1.1.1" xref="S3.SS2.p3.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.1.m1.1b"><times id="S3.SS2.p3.1.m1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.1.m1.1c">\times</annotation></semantics></math> more accuracy degradation than the average population.
Figure <a href="#S3.F2.sf3" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(c)</span></a> motivates the need to study tier-aware optimizations in a realistic system-induced data heterogeneity setup. If not, model prediction quality for certain populations can be significantly degraded unintentionally.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Studying System-induced Data Heterogeneity for Recommender Systems</h2>

<figure id="S4.F3" class="ltx_figure"><img src="/html/2206.02633/assets/x6.png" id="S4.F3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="438" height="133" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Overview of RF<sup id="S4.F3.4.1" class="ltx_sup">2</sup>.</figcaption>
</figure>
<div id="S4.p1" class="ltx_para ltx_noindent">
<p id="S4.p1.3" class="ltx_p"><span id="S4.p1.1.1" class="ltx_text ltx_font_bold">RF<sup id="S4.p1.1.1.1" class="ltx_sup"><span id="S4.p1.1.1.1.1" class="ltx_text ltx_font_medium">2</span></sup></span> is an FL simulation framework for recommender models that enables agile modeling of system-induced data heterogeneity. RF<sup id="S4.p1.3.2" class="ltx_sup">2</sup> supports (1) efficient FL training for popular recommender models and datasets (Section <a href="#S4.SS1" title="4.1 Simulating FL for Recommender Systems ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.1</span></a>), (2) synthesizing varying degrees of system-induced data heterogeneity onto existing datasets (Section <a href="#S4.SS2" title="4.2 Simulating System-aware Data Heterogeneity ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.2</span></a>), (3) a family of tier-aware optimization strategies from prior work (Section <a href="#S4.SS3" title="4.3 Supporting Popular Tier-Aware Optimizations in FL ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.3</span></a>), and (4) fairness evaluation (Section <a href="#S4.SS4" title="4.4 Quantifying Fairness ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.4</span></a>) that can guide programmers to refine and test their optimizations.
Figure <a href="#S4.F3" title="Figure 3 ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> illustrates the design overview of RF<sup id="S4.p1.3.3" class="ltx_sup">2</sup>.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Simulating FL for Recommender Systems</h3>

<div id="S4.SS1.p1" class="ltx_para ltx_noindent">
<p id="S4.SS1.p1.3" class="ltx_p">RF<sup id="S4.SS1.p1.3.1" class="ltx_sup">2</sup> supports FL simulation for state-of-the-art, commonly-used recommender models and datasets.
While FL for deep recommender models has been studied in previous literature <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib53" title="" class="ltx_ref">53</a>]</cite>, prior frameworks were either confined to simplistic models that take only user ID and item ID as inputs <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib53" title="" class="ltx_ref">53</a>]</cite> or were built on proprietary datasets <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite>.
RF<sup id="S4.SS1.p1.3.2" class="ltx_sup">2</sup>, on the other hand, is compatible with a large body of popular recommender models, by being built on top of DeepCTR-Torch <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib54" title="" class="ltx_ref">54</a>]</cite>, an open-source codebase that implements 19 recommender models (in a non-FL context) and is easily extensible to more.
RF<sup id="S4.SS1.p1.3.3" class="ltx_sup">2</sup> also currently supports two commonly-used open-source datasets, Taobao Ad Display/Click Data <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib55" title="" class="ltx_ref">55</a>]</cite> and MovieLens-20M <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib56" title="" class="ltx_ref">56</a>]</cite> (Section <a href="#S5.SS1" title="5.1 Deep Learning Recommendation Models and Datasets ‣ 5 Evaluation Methodology ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.1</span></a>), and can be extended to support additional datasets.</p>
</div>
<div id="S4.SS1.p2" class="ltx_para ltx_noindent">
<p id="S4.SS1.p2.3" class="ltx_p">RF<sup id="S4.SS1.p2.3.1" class="ltx_sup">2</sup> makes some unique design decisions to improve convergence and model a more realistic setup.
Instead of using minibatch SGD on the client <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib53" title="" class="ltx_ref">53</a>]</cite>, RF<sup id="S4.SS1.p2.3.2" class="ltx_sup">2</sup> implements an option to use a full-batch SGD.
Full-batch SGD is practical because recommender systems tolerate a large batch size, <span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>https://github.com/mlcommons/training_results_v1.1/blob/main/NVIDIA/benchmarks/dlrm/implementations/hugectr uses a batch size of 70k</span></span></span> and clients usually do not have many datapoints as user-item interaction is rare. For example, the Taobao dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib55" title="" class="ltx_ref">55</a>]</cite> has only 26 datapoints on average per client.
Using full-batch SGD on the clients and advanced optimizers, e.g., AdaGrad, on the server <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> improves the learning stability significantly.
RF<sup id="S4.SS1.p2.3.3" class="ltx_sup">2</sup> does not select a client again before every client is selected exactly once, unlike prior work that models duplicated selection <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib57" title="" class="ltx_ref">57</a>, <a href="#bib.bib53" title="" class="ltx_ref">53</a>]</cite>.
The non-duplicate selection is to simulate a more realistic large-scale FL, where billions of clients participate <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib58" title="" class="ltx_ref">58</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite> and duplicated selection is extremely rare.</p>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Simulating System-aware Data Heterogeneity</h3>

<div id="S4.SS2.p1" class="ltx_para ltx_noindent">
<p id="S4.SS2.p1.1" class="ltx_p">One of RF<sup id="S4.SS2.p1.1.1" class="ltx_sup">2</sup>’s main goals is to simulate realistic system-induced data heterogeneity. There are many potentially viable ways to simulate system-induced data heterogeneity. Across tiers, one can vary the distribution of user features, click rates, number of samples, or affinity to different items.
We concentrate on making the <em id="S4.SS2.p1.1.2" class="ltx_emph ltx_font_italic">affinity to different items</em> heterogeneous across tiers (e.g., make certain tiers like certain items more, as in Figure <a href="#S2.F1.sf2" title="In Figure 1 ‣ 2.2.2 Data Heterogeneity ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1(b)</span></a>).
Our approach is applicable to any recommender datasets as they always have click information that represents the user-item affinity.</p>
</div>
<figure id="alg1" class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top">
<div id="alg1.2" class="ltx_listing ltx_listing">
<div id="alg0.l1" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1:</span><math id="alg0.l1.m1.5" class="ltx_Math" alttext="seenUsers,tier_{0},tier_{1},tier_{2}\leftarrow\emptyset,\emptyset,\emptyset,\emptyset" display="inline"><semantics id="alg0.l1.m1.5a"><mrow id="alg0.l1.m1.5.5.2" xref="alg0.l1.m1.5.5.3.cmml"><mrow id="alg0.l1.m1.4.4.1.1" xref="alg0.l1.m1.4.4.1.1.cmml"><mrow id="alg0.l1.m1.4.4.1.1.4.4" xref="alg0.l1.m1.4.4.1.1.4.5.cmml"><mrow id="alg0.l1.m1.4.4.1.1.1.1.1" xref="alg0.l1.m1.4.4.1.1.1.1.1.cmml"><mi id="alg0.l1.m1.4.4.1.1.1.1.1.2" xref="alg0.l1.m1.4.4.1.1.1.1.1.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.1.1.1.1" xref="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.1.1.1.3" xref="alg0.l1.m1.4.4.1.1.1.1.1.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.1.1.1.1a" xref="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.1.1.1.4" xref="alg0.l1.m1.4.4.1.1.1.1.1.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.1.1.1.1b" xref="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.1.1.1.5" xref="alg0.l1.m1.4.4.1.1.1.1.1.5.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.1.1.1.1c" xref="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.1.1.1.6" xref="alg0.l1.m1.4.4.1.1.1.1.1.6.cmml">U</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.1.1.1.1d" xref="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.1.1.1.7" xref="alg0.l1.m1.4.4.1.1.1.1.1.7.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.1.1.1.1e" xref="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.1.1.1.8" xref="alg0.l1.m1.4.4.1.1.1.1.1.8.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.1.1.1.1f" xref="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.1.1.1.9" xref="alg0.l1.m1.4.4.1.1.1.1.1.9.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.1.1.1.1g" xref="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.1.1.1.10" xref="alg0.l1.m1.4.4.1.1.1.1.1.10.cmml">s</mi></mrow><mo id="alg0.l1.m1.4.4.1.1.4.4.5" xref="alg0.l1.m1.4.4.1.1.4.5.cmml">,</mo><mrow id="alg0.l1.m1.4.4.1.1.2.2.2" xref="alg0.l1.m1.4.4.1.1.2.2.2.cmml"><mi id="alg0.l1.m1.4.4.1.1.2.2.2.2" xref="alg0.l1.m1.4.4.1.1.2.2.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.2.2.2.1" xref="alg0.l1.m1.4.4.1.1.2.2.2.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.2.2.2.3" xref="alg0.l1.m1.4.4.1.1.2.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.2.2.2.1a" xref="alg0.l1.m1.4.4.1.1.2.2.2.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.2.2.2.4" xref="alg0.l1.m1.4.4.1.1.2.2.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.2.2.2.1b" xref="alg0.l1.m1.4.4.1.1.2.2.2.1.cmml">​</mo><msub id="alg0.l1.m1.4.4.1.1.2.2.2.5" xref="alg0.l1.m1.4.4.1.1.2.2.2.5.cmml"><mi id="alg0.l1.m1.4.4.1.1.2.2.2.5.2" xref="alg0.l1.m1.4.4.1.1.2.2.2.5.2.cmml">r</mi><mn id="alg0.l1.m1.4.4.1.1.2.2.2.5.3" xref="alg0.l1.m1.4.4.1.1.2.2.2.5.3.cmml">0</mn></msub></mrow><mo id="alg0.l1.m1.4.4.1.1.4.4.6" xref="alg0.l1.m1.4.4.1.1.4.5.cmml">,</mo><mrow id="alg0.l1.m1.4.4.1.1.3.3.3" xref="alg0.l1.m1.4.4.1.1.3.3.3.cmml"><mi id="alg0.l1.m1.4.4.1.1.3.3.3.2" xref="alg0.l1.m1.4.4.1.1.3.3.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.3.3.3.1" xref="alg0.l1.m1.4.4.1.1.3.3.3.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.3.3.3.3" xref="alg0.l1.m1.4.4.1.1.3.3.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.3.3.3.1a" xref="alg0.l1.m1.4.4.1.1.3.3.3.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.3.3.3.4" xref="alg0.l1.m1.4.4.1.1.3.3.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.3.3.3.1b" xref="alg0.l1.m1.4.4.1.1.3.3.3.1.cmml">​</mo><msub id="alg0.l1.m1.4.4.1.1.3.3.3.5" xref="alg0.l1.m1.4.4.1.1.3.3.3.5.cmml"><mi id="alg0.l1.m1.4.4.1.1.3.3.3.5.2" xref="alg0.l1.m1.4.4.1.1.3.3.3.5.2.cmml">r</mi><mn id="alg0.l1.m1.4.4.1.1.3.3.3.5.3" xref="alg0.l1.m1.4.4.1.1.3.3.3.5.3.cmml">1</mn></msub></mrow><mo id="alg0.l1.m1.4.4.1.1.4.4.7" xref="alg0.l1.m1.4.4.1.1.4.5.cmml">,</mo><mrow id="alg0.l1.m1.4.4.1.1.4.4.4" xref="alg0.l1.m1.4.4.1.1.4.4.4.cmml"><mi id="alg0.l1.m1.4.4.1.1.4.4.4.2" xref="alg0.l1.m1.4.4.1.1.4.4.4.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.4.4.4.1" xref="alg0.l1.m1.4.4.1.1.4.4.4.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.4.4.4.3" xref="alg0.l1.m1.4.4.1.1.4.4.4.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.4.4.4.1a" xref="alg0.l1.m1.4.4.1.1.4.4.4.1.cmml">​</mo><mi id="alg0.l1.m1.4.4.1.1.4.4.4.4" xref="alg0.l1.m1.4.4.1.1.4.4.4.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l1.m1.4.4.1.1.4.4.4.1b" xref="alg0.l1.m1.4.4.1.1.4.4.4.1.cmml">​</mo><msub id="alg0.l1.m1.4.4.1.1.4.4.4.5" xref="alg0.l1.m1.4.4.1.1.4.4.4.5.cmml"><mi id="alg0.l1.m1.4.4.1.1.4.4.4.5.2" xref="alg0.l1.m1.4.4.1.1.4.4.4.5.2.cmml">r</mi><mn id="alg0.l1.m1.4.4.1.1.4.4.4.5.3" xref="alg0.l1.m1.4.4.1.1.4.4.4.5.3.cmml">2</mn></msub></mrow></mrow><mo stretchy="false" id="alg0.l1.m1.4.4.1.1.5" xref="alg0.l1.m1.4.4.1.1.5.cmml">←</mo><mi mathvariant="normal" id="alg0.l1.m1.4.4.1.1.6" xref="alg0.l1.m1.4.4.1.1.6.cmml">∅</mi></mrow><mo id="alg0.l1.m1.5.5.2.3" xref="alg0.l1.m1.5.5.3a.cmml">,</mo><mrow id="alg0.l1.m1.5.5.2.2.2" xref="alg0.l1.m1.5.5.2.2.1.cmml"><mi mathvariant="normal" id="alg0.l1.m1.1.1" xref="alg0.l1.m1.1.1.cmml">∅</mi><mo id="alg0.l1.m1.5.5.2.2.2.1" xref="alg0.l1.m1.5.5.2.2.1.cmml">,</mo><mi mathvariant="normal" id="alg0.l1.m1.2.2" xref="alg0.l1.m1.2.2.cmml">∅</mi><mo id="alg0.l1.m1.5.5.2.2.2.2" xref="alg0.l1.m1.5.5.2.2.1.cmml">,</mo><mi mathvariant="normal" id="alg0.l1.m1.3.3" xref="alg0.l1.m1.3.3.cmml">∅</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l1.m1.5b"><apply id="alg0.l1.m1.5.5.3.cmml" xref="alg0.l1.m1.5.5.2"><csymbol cd="ambiguous" id="alg0.l1.m1.5.5.3a.cmml" xref="alg0.l1.m1.5.5.2.3">formulae-sequence</csymbol><apply id="alg0.l1.m1.4.4.1.1.cmml" xref="alg0.l1.m1.4.4.1.1"><ci id="alg0.l1.m1.4.4.1.1.5.cmml" xref="alg0.l1.m1.4.4.1.1.5">←</ci><list id="alg0.l1.m1.4.4.1.1.4.5.cmml" xref="alg0.l1.m1.4.4.1.1.4.4"><apply id="alg0.l1.m1.4.4.1.1.1.1.1.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1"><times id="alg0.l1.m1.4.4.1.1.1.1.1.1.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.1"></times><ci id="alg0.l1.m1.4.4.1.1.1.1.1.2.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.2">𝑠</ci><ci id="alg0.l1.m1.4.4.1.1.1.1.1.3.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.3">𝑒</ci><ci id="alg0.l1.m1.4.4.1.1.1.1.1.4.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.4">𝑒</ci><ci id="alg0.l1.m1.4.4.1.1.1.1.1.5.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.5">𝑛</ci><ci id="alg0.l1.m1.4.4.1.1.1.1.1.6.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.6">𝑈</ci><ci id="alg0.l1.m1.4.4.1.1.1.1.1.7.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.7">𝑠</ci><ci id="alg0.l1.m1.4.4.1.1.1.1.1.8.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.8">𝑒</ci><ci id="alg0.l1.m1.4.4.1.1.1.1.1.9.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.9">𝑟</ci><ci id="alg0.l1.m1.4.4.1.1.1.1.1.10.cmml" xref="alg0.l1.m1.4.4.1.1.1.1.1.10">𝑠</ci></apply><apply id="alg0.l1.m1.4.4.1.1.2.2.2.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2"><times id="alg0.l1.m1.4.4.1.1.2.2.2.1.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2.1"></times><ci id="alg0.l1.m1.4.4.1.1.2.2.2.2.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2.2">𝑡</ci><ci id="alg0.l1.m1.4.4.1.1.2.2.2.3.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2.3">𝑖</ci><ci id="alg0.l1.m1.4.4.1.1.2.2.2.4.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2.4">𝑒</ci><apply id="alg0.l1.m1.4.4.1.1.2.2.2.5.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2.5"><csymbol cd="ambiguous" id="alg0.l1.m1.4.4.1.1.2.2.2.5.1.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2.5">subscript</csymbol><ci id="alg0.l1.m1.4.4.1.1.2.2.2.5.2.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2.5.2">𝑟</ci><cn type="integer" id="alg0.l1.m1.4.4.1.1.2.2.2.5.3.cmml" xref="alg0.l1.m1.4.4.1.1.2.2.2.5.3">0</cn></apply></apply><apply id="alg0.l1.m1.4.4.1.1.3.3.3.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3"><times id="alg0.l1.m1.4.4.1.1.3.3.3.1.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3.1"></times><ci id="alg0.l1.m1.4.4.1.1.3.3.3.2.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3.2">𝑡</ci><ci id="alg0.l1.m1.4.4.1.1.3.3.3.3.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3.3">𝑖</ci><ci id="alg0.l1.m1.4.4.1.1.3.3.3.4.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3.4">𝑒</ci><apply id="alg0.l1.m1.4.4.1.1.3.3.3.5.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3.5"><csymbol cd="ambiguous" id="alg0.l1.m1.4.4.1.1.3.3.3.5.1.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3.5">subscript</csymbol><ci id="alg0.l1.m1.4.4.1.1.3.3.3.5.2.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3.5.2">𝑟</ci><cn type="integer" id="alg0.l1.m1.4.4.1.1.3.3.3.5.3.cmml" xref="alg0.l1.m1.4.4.1.1.3.3.3.5.3">1</cn></apply></apply><apply id="alg0.l1.m1.4.4.1.1.4.4.4.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4"><times id="alg0.l1.m1.4.4.1.1.4.4.4.1.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4.1"></times><ci id="alg0.l1.m1.4.4.1.1.4.4.4.2.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4.2">𝑡</ci><ci id="alg0.l1.m1.4.4.1.1.4.4.4.3.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4.3">𝑖</ci><ci id="alg0.l1.m1.4.4.1.1.4.4.4.4.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4.4">𝑒</ci><apply id="alg0.l1.m1.4.4.1.1.4.4.4.5.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4.5"><csymbol cd="ambiguous" id="alg0.l1.m1.4.4.1.1.4.4.4.5.1.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4.5">subscript</csymbol><ci id="alg0.l1.m1.4.4.1.1.4.4.4.5.2.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4.5.2">𝑟</ci><cn type="integer" id="alg0.l1.m1.4.4.1.1.4.4.4.5.3.cmml" xref="alg0.l1.m1.4.4.1.1.4.4.4.5.3">2</cn></apply></apply></list><emptyset id="alg0.l1.m1.4.4.1.1.6.cmml" xref="alg0.l1.m1.4.4.1.1.6"></emptyset></apply><list id="alg0.l1.m1.5.5.2.2.1.cmml" xref="alg0.l1.m1.5.5.2.2.2"><emptyset id="alg0.l1.m1.1.1.cmml" xref="alg0.l1.m1.1.1"></emptyset><emptyset id="alg0.l1.m1.2.2.cmml" xref="alg0.l1.m1.2.2"></emptyset><emptyset id="alg0.l1.m1.3.3.cmml" xref="alg0.l1.m1.3.3"></emptyset></list></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l1.m1.5c">seenUsers,tier_{0},tier_{1},tier_{2}\leftarrow\emptyset,\emptyset,\emptyset,\emptyset</annotation></semantics></math>

</div>
<div id="alg0.l2" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2:</span><span id="alg0.l2.1" class="ltx_text ltx_font_bold">for</span> <math id="alg0.l2.m1.2" class="ltx_Math" alttext="item\in items.sortedByDescendingPopularity()" display="inline"><semantics id="alg0.l2.m1.2a"><mrow id="alg0.l2.m1.2.2.2" xref="alg0.l2.m1.2.2.3.cmml"><mrow id="alg0.l2.m1.1.1.1.1" xref="alg0.l2.m1.1.1.1.1.cmml"><mrow id="alg0.l2.m1.1.1.1.1.2" xref="alg0.l2.m1.1.1.1.1.2.cmml"><mi id="alg0.l2.m1.1.1.1.1.2.2" xref="alg0.l2.m1.1.1.1.1.2.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.1.1.1.1.2.1" xref="alg0.l2.m1.1.1.1.1.2.1.cmml">​</mo><mi id="alg0.l2.m1.1.1.1.1.2.3" xref="alg0.l2.m1.1.1.1.1.2.3.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.1.1.1.1.2.1a" xref="alg0.l2.m1.1.1.1.1.2.1.cmml">​</mo><mi id="alg0.l2.m1.1.1.1.1.2.4" xref="alg0.l2.m1.1.1.1.1.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.1.1.1.1.2.1b" xref="alg0.l2.m1.1.1.1.1.2.1.cmml">​</mo><mi id="alg0.l2.m1.1.1.1.1.2.5" xref="alg0.l2.m1.1.1.1.1.2.5.cmml">m</mi></mrow><mo id="alg0.l2.m1.1.1.1.1.1" xref="alg0.l2.m1.1.1.1.1.1.cmml">∈</mo><mrow id="alg0.l2.m1.1.1.1.1.3" xref="alg0.l2.m1.1.1.1.1.3.cmml"><mi id="alg0.l2.m1.1.1.1.1.3.2" xref="alg0.l2.m1.1.1.1.1.3.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.1.1.1.1.3.1" xref="alg0.l2.m1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l2.m1.1.1.1.1.3.3" xref="alg0.l2.m1.1.1.1.1.3.3.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.1.1.1.1.3.1a" xref="alg0.l2.m1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l2.m1.1.1.1.1.3.4" xref="alg0.l2.m1.1.1.1.1.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.1.1.1.1.3.1b" xref="alg0.l2.m1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l2.m1.1.1.1.1.3.5" xref="alg0.l2.m1.1.1.1.1.3.5.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.1.1.1.1.3.1c" xref="alg0.l2.m1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l2.m1.1.1.1.1.3.6" xref="alg0.l2.m1.1.1.1.1.3.6.cmml">s</mi></mrow></mrow><mo lspace="0em" rspace="0.167em" id="alg0.l2.m1.2.2.2.3" xref="alg0.l2.m1.2.2.3a.cmml">.</mo><mrow id="alg0.l2.m1.2.2.2.2" xref="alg0.l2.m1.2.2.2.2.cmml"><mi id="alg0.l2.m1.2.2.2.2.2" xref="alg0.l2.m1.2.2.2.2.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.3" xref="alg0.l2.m1.2.2.2.2.3.cmml">o</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1a" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.4" xref="alg0.l2.m1.2.2.2.2.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1b" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.5" xref="alg0.l2.m1.2.2.2.2.5.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1c" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.6" xref="alg0.l2.m1.2.2.2.2.6.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1d" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.7" xref="alg0.l2.m1.2.2.2.2.7.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1e" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.8" xref="alg0.l2.m1.2.2.2.2.8.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1f" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.9" xref="alg0.l2.m1.2.2.2.2.9.cmml">y</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1g" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.10" xref="alg0.l2.m1.2.2.2.2.10.cmml">D</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1h" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.11" xref="alg0.l2.m1.2.2.2.2.11.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1i" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.12" xref="alg0.l2.m1.2.2.2.2.12.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1j" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.13" xref="alg0.l2.m1.2.2.2.2.13.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1k" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.14" xref="alg0.l2.m1.2.2.2.2.14.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1l" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.15" xref="alg0.l2.m1.2.2.2.2.15.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1m" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.16" xref="alg0.l2.m1.2.2.2.2.16.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1n" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.17" xref="alg0.l2.m1.2.2.2.2.17.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1o" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.18" xref="alg0.l2.m1.2.2.2.2.18.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1p" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.19" xref="alg0.l2.m1.2.2.2.2.19.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1q" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.20" xref="alg0.l2.m1.2.2.2.2.20.cmml">P</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1r" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.21" xref="alg0.l2.m1.2.2.2.2.21.cmml">o</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1s" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.22" xref="alg0.l2.m1.2.2.2.2.22.cmml">p</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1t" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.23" xref="alg0.l2.m1.2.2.2.2.23.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1u" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.24" xref="alg0.l2.m1.2.2.2.2.24.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1v" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.25" xref="alg0.l2.m1.2.2.2.2.25.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1w" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.26" xref="alg0.l2.m1.2.2.2.2.26.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1x" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.27" xref="alg0.l2.m1.2.2.2.2.27.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1y" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.28" xref="alg0.l2.m1.2.2.2.2.28.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1z" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l2.m1.2.2.2.2.29" xref="alg0.l2.m1.2.2.2.2.29.cmml">y</mi><mo lspace="0em" rspace="0em" id="alg0.l2.m1.2.2.2.2.1aa" xref="alg0.l2.m1.2.2.2.2.1.cmml">​</mo><mrow id="alg0.l2.m1.2.2.2.2.30.2" xref="alg0.l2.m1.2.2.2.2.cmml"><mo stretchy="false" id="alg0.l2.m1.2.2.2.2.30.2.1" xref="alg0.l2.m1.2.2.2.2.30.1.cmml">(</mo><mo stretchy="false" id="alg0.l2.m1.2.2.2.2.30.2.2" xref="alg0.l2.m1.2.2.2.2.30.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l2.m1.2b"><apply id="alg0.l2.m1.2.2.3.cmml" xref="alg0.l2.m1.2.2.2"><csymbol cd="ambiguous" id="alg0.l2.m1.2.2.3a.cmml" xref="alg0.l2.m1.2.2.2.3">formulae-sequence</csymbol><apply id="alg0.l2.m1.1.1.1.1.cmml" xref="alg0.l2.m1.1.1.1.1"><in id="alg0.l2.m1.1.1.1.1.1.cmml" xref="alg0.l2.m1.1.1.1.1.1"></in><apply id="alg0.l2.m1.1.1.1.1.2.cmml" xref="alg0.l2.m1.1.1.1.1.2"><times id="alg0.l2.m1.1.1.1.1.2.1.cmml" xref="alg0.l2.m1.1.1.1.1.2.1"></times><ci id="alg0.l2.m1.1.1.1.1.2.2.cmml" xref="alg0.l2.m1.1.1.1.1.2.2">𝑖</ci><ci id="alg0.l2.m1.1.1.1.1.2.3.cmml" xref="alg0.l2.m1.1.1.1.1.2.3">𝑡</ci><ci id="alg0.l2.m1.1.1.1.1.2.4.cmml" xref="alg0.l2.m1.1.1.1.1.2.4">𝑒</ci><ci id="alg0.l2.m1.1.1.1.1.2.5.cmml" xref="alg0.l2.m1.1.1.1.1.2.5">𝑚</ci></apply><apply id="alg0.l2.m1.1.1.1.1.3.cmml" xref="alg0.l2.m1.1.1.1.1.3"><times id="alg0.l2.m1.1.1.1.1.3.1.cmml" xref="alg0.l2.m1.1.1.1.1.3.1"></times><ci id="alg0.l2.m1.1.1.1.1.3.2.cmml" xref="alg0.l2.m1.1.1.1.1.3.2">𝑖</ci><ci id="alg0.l2.m1.1.1.1.1.3.3.cmml" xref="alg0.l2.m1.1.1.1.1.3.3">𝑡</ci><ci id="alg0.l2.m1.1.1.1.1.3.4.cmml" xref="alg0.l2.m1.1.1.1.1.3.4">𝑒</ci><ci id="alg0.l2.m1.1.1.1.1.3.5.cmml" xref="alg0.l2.m1.1.1.1.1.3.5">𝑚</ci><ci id="alg0.l2.m1.1.1.1.1.3.6.cmml" xref="alg0.l2.m1.1.1.1.1.3.6">𝑠</ci></apply></apply><apply id="alg0.l2.m1.2.2.2.2.cmml" xref="alg0.l2.m1.2.2.2.2"><times id="alg0.l2.m1.2.2.2.2.1.cmml" xref="alg0.l2.m1.2.2.2.2.1"></times><ci id="alg0.l2.m1.2.2.2.2.2.cmml" xref="alg0.l2.m1.2.2.2.2.2">𝑠</ci><ci id="alg0.l2.m1.2.2.2.2.3.cmml" xref="alg0.l2.m1.2.2.2.2.3">𝑜</ci><ci id="alg0.l2.m1.2.2.2.2.4.cmml" xref="alg0.l2.m1.2.2.2.2.4">𝑟</ci><ci id="alg0.l2.m1.2.2.2.2.5.cmml" xref="alg0.l2.m1.2.2.2.2.5">𝑡</ci><ci id="alg0.l2.m1.2.2.2.2.6.cmml" xref="alg0.l2.m1.2.2.2.2.6">𝑒</ci><ci id="alg0.l2.m1.2.2.2.2.7.cmml" xref="alg0.l2.m1.2.2.2.2.7">𝑑</ci><ci id="alg0.l2.m1.2.2.2.2.8.cmml" xref="alg0.l2.m1.2.2.2.2.8">𝐵</ci><ci id="alg0.l2.m1.2.2.2.2.9.cmml" xref="alg0.l2.m1.2.2.2.2.9">𝑦</ci><ci id="alg0.l2.m1.2.2.2.2.10.cmml" xref="alg0.l2.m1.2.2.2.2.10">𝐷</ci><ci id="alg0.l2.m1.2.2.2.2.11.cmml" xref="alg0.l2.m1.2.2.2.2.11">𝑒</ci><ci id="alg0.l2.m1.2.2.2.2.12.cmml" xref="alg0.l2.m1.2.2.2.2.12">𝑠</ci><ci id="alg0.l2.m1.2.2.2.2.13.cmml" xref="alg0.l2.m1.2.2.2.2.13">𝑐</ci><ci id="alg0.l2.m1.2.2.2.2.14.cmml" xref="alg0.l2.m1.2.2.2.2.14">𝑒</ci><ci id="alg0.l2.m1.2.2.2.2.15.cmml" xref="alg0.l2.m1.2.2.2.2.15">𝑛</ci><ci id="alg0.l2.m1.2.2.2.2.16.cmml" xref="alg0.l2.m1.2.2.2.2.16">𝑑</ci><ci id="alg0.l2.m1.2.2.2.2.17.cmml" xref="alg0.l2.m1.2.2.2.2.17">𝑖</ci><ci id="alg0.l2.m1.2.2.2.2.18.cmml" xref="alg0.l2.m1.2.2.2.2.18">𝑛</ci><ci id="alg0.l2.m1.2.2.2.2.19.cmml" xref="alg0.l2.m1.2.2.2.2.19">𝑔</ci><ci id="alg0.l2.m1.2.2.2.2.20.cmml" xref="alg0.l2.m1.2.2.2.2.20">𝑃</ci><ci id="alg0.l2.m1.2.2.2.2.21.cmml" xref="alg0.l2.m1.2.2.2.2.21">𝑜</ci><ci id="alg0.l2.m1.2.2.2.2.22.cmml" xref="alg0.l2.m1.2.2.2.2.22">𝑝</ci><ci id="alg0.l2.m1.2.2.2.2.23.cmml" xref="alg0.l2.m1.2.2.2.2.23">𝑢</ci><ci id="alg0.l2.m1.2.2.2.2.24.cmml" xref="alg0.l2.m1.2.2.2.2.24">𝑙</ci><ci id="alg0.l2.m1.2.2.2.2.25.cmml" xref="alg0.l2.m1.2.2.2.2.25">𝑎</ci><ci id="alg0.l2.m1.2.2.2.2.26.cmml" xref="alg0.l2.m1.2.2.2.2.26">𝑟</ci><ci id="alg0.l2.m1.2.2.2.2.27.cmml" xref="alg0.l2.m1.2.2.2.2.27">𝑖</ci><ci id="alg0.l2.m1.2.2.2.2.28.cmml" xref="alg0.l2.m1.2.2.2.2.28">𝑡</ci><ci id="alg0.l2.m1.2.2.2.2.29.cmml" xref="alg0.l2.m1.2.2.2.2.29">𝑦</ci><list id="alg0.l2.m1.2.2.2.2.30.1.cmml" xref="alg0.l2.m1.2.2.2.2.30.2.1"></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l2.m1.2c">item\in items.sortedByDescendingPopularity()</annotation></semantics></math> <span id="alg0.l2.2" class="ltx_text ltx_font_bold">do</span> 
</div>
<div id="alg0.l3" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3:</span>     <math id="alg0.l3.m1.5" class="ltx_Math" alttext="p_{0},p_{1},p_{2}\leftarrow Dirichlet(\alpha,3)" display="inline"><semantics id="alg0.l3.m1.5a"><mrow id="alg0.l3.m1.5.5" xref="alg0.l3.m1.5.5.cmml"><mrow id="alg0.l3.m1.5.5.3.3" xref="alg0.l3.m1.5.5.3.4.cmml"><msub id="alg0.l3.m1.3.3.1.1.1" xref="alg0.l3.m1.3.3.1.1.1.cmml"><mi id="alg0.l3.m1.3.3.1.1.1.2" xref="alg0.l3.m1.3.3.1.1.1.2.cmml">p</mi><mn id="alg0.l3.m1.3.3.1.1.1.3" xref="alg0.l3.m1.3.3.1.1.1.3.cmml">0</mn></msub><mo id="alg0.l3.m1.5.5.3.3.4" xref="alg0.l3.m1.5.5.3.4.cmml">,</mo><msub id="alg0.l3.m1.4.4.2.2.2" xref="alg0.l3.m1.4.4.2.2.2.cmml"><mi id="alg0.l3.m1.4.4.2.2.2.2" xref="alg0.l3.m1.4.4.2.2.2.2.cmml">p</mi><mn id="alg0.l3.m1.4.4.2.2.2.3" xref="alg0.l3.m1.4.4.2.2.2.3.cmml">1</mn></msub><mo id="alg0.l3.m1.5.5.3.3.5" xref="alg0.l3.m1.5.5.3.4.cmml">,</mo><msub id="alg0.l3.m1.5.5.3.3.3" xref="alg0.l3.m1.5.5.3.3.3.cmml"><mi id="alg0.l3.m1.5.5.3.3.3.2" xref="alg0.l3.m1.5.5.3.3.3.2.cmml">p</mi><mn id="alg0.l3.m1.5.5.3.3.3.3" xref="alg0.l3.m1.5.5.3.3.3.3.cmml">2</mn></msub></mrow><mo stretchy="false" id="alg0.l3.m1.5.5.4" xref="alg0.l3.m1.5.5.4.cmml">←</mo><mrow id="alg0.l3.m1.5.5.5" xref="alg0.l3.m1.5.5.5.cmml"><mi id="alg0.l3.m1.5.5.5.2" xref="alg0.l3.m1.5.5.5.2.cmml">D</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mi id="alg0.l3.m1.5.5.5.3" xref="alg0.l3.m1.5.5.5.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1a" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mi id="alg0.l3.m1.5.5.5.4" xref="alg0.l3.m1.5.5.5.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1b" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mi id="alg0.l3.m1.5.5.5.5" xref="alg0.l3.m1.5.5.5.5.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1c" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mi id="alg0.l3.m1.5.5.5.6" xref="alg0.l3.m1.5.5.5.6.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1d" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mi id="alg0.l3.m1.5.5.5.7" xref="alg0.l3.m1.5.5.5.7.cmml">h</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1e" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mi id="alg0.l3.m1.5.5.5.8" xref="alg0.l3.m1.5.5.5.8.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1f" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mi id="alg0.l3.m1.5.5.5.9" xref="alg0.l3.m1.5.5.5.9.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1g" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mi id="alg0.l3.m1.5.5.5.10" xref="alg0.l3.m1.5.5.5.10.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l3.m1.5.5.5.1h" xref="alg0.l3.m1.5.5.5.1.cmml">​</mo><mrow id="alg0.l3.m1.5.5.5.11.2" xref="alg0.l3.m1.5.5.5.11.1.cmml"><mo stretchy="false" id="alg0.l3.m1.5.5.5.11.2.1" xref="alg0.l3.m1.5.5.5.11.1.cmml">(</mo><mi id="alg0.l3.m1.1.1" xref="alg0.l3.m1.1.1.cmml">α</mi><mo id="alg0.l3.m1.5.5.5.11.2.2" xref="alg0.l3.m1.5.5.5.11.1.cmml">,</mo><mn id="alg0.l3.m1.2.2" xref="alg0.l3.m1.2.2.cmml">3</mn><mo stretchy="false" id="alg0.l3.m1.5.5.5.11.2.3" xref="alg0.l3.m1.5.5.5.11.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l3.m1.5b"><apply id="alg0.l3.m1.5.5.cmml" xref="alg0.l3.m1.5.5"><ci id="alg0.l3.m1.5.5.4.cmml" xref="alg0.l3.m1.5.5.4">←</ci><list id="alg0.l3.m1.5.5.3.4.cmml" xref="alg0.l3.m1.5.5.3.3"><apply id="alg0.l3.m1.3.3.1.1.1.cmml" xref="alg0.l3.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="alg0.l3.m1.3.3.1.1.1.1.cmml" xref="alg0.l3.m1.3.3.1.1.1">subscript</csymbol><ci id="alg0.l3.m1.3.3.1.1.1.2.cmml" xref="alg0.l3.m1.3.3.1.1.1.2">𝑝</ci><cn type="integer" id="alg0.l3.m1.3.3.1.1.1.3.cmml" xref="alg0.l3.m1.3.3.1.1.1.3">0</cn></apply><apply id="alg0.l3.m1.4.4.2.2.2.cmml" xref="alg0.l3.m1.4.4.2.2.2"><csymbol cd="ambiguous" id="alg0.l3.m1.4.4.2.2.2.1.cmml" xref="alg0.l3.m1.4.4.2.2.2">subscript</csymbol><ci id="alg0.l3.m1.4.4.2.2.2.2.cmml" xref="alg0.l3.m1.4.4.2.2.2.2">𝑝</ci><cn type="integer" id="alg0.l3.m1.4.4.2.2.2.3.cmml" xref="alg0.l3.m1.4.4.2.2.2.3">1</cn></apply><apply id="alg0.l3.m1.5.5.3.3.3.cmml" xref="alg0.l3.m1.5.5.3.3.3"><csymbol cd="ambiguous" id="alg0.l3.m1.5.5.3.3.3.1.cmml" xref="alg0.l3.m1.5.5.3.3.3">subscript</csymbol><ci id="alg0.l3.m1.5.5.3.3.3.2.cmml" xref="alg0.l3.m1.5.5.3.3.3.2">𝑝</ci><cn type="integer" id="alg0.l3.m1.5.5.3.3.3.3.cmml" xref="alg0.l3.m1.5.5.3.3.3.3">2</cn></apply></list><apply id="alg0.l3.m1.5.5.5.cmml" xref="alg0.l3.m1.5.5.5"><times id="alg0.l3.m1.5.5.5.1.cmml" xref="alg0.l3.m1.5.5.5.1"></times><ci id="alg0.l3.m1.5.5.5.2.cmml" xref="alg0.l3.m1.5.5.5.2">𝐷</ci><ci id="alg0.l3.m1.5.5.5.3.cmml" xref="alg0.l3.m1.5.5.5.3">𝑖</ci><ci id="alg0.l3.m1.5.5.5.4.cmml" xref="alg0.l3.m1.5.5.5.4">𝑟</ci><ci id="alg0.l3.m1.5.5.5.5.cmml" xref="alg0.l3.m1.5.5.5.5">𝑖</ci><ci id="alg0.l3.m1.5.5.5.6.cmml" xref="alg0.l3.m1.5.5.5.6">𝑐</ci><ci id="alg0.l3.m1.5.5.5.7.cmml" xref="alg0.l3.m1.5.5.5.7">ℎ</ci><ci id="alg0.l3.m1.5.5.5.8.cmml" xref="alg0.l3.m1.5.5.5.8">𝑙</ci><ci id="alg0.l3.m1.5.5.5.9.cmml" xref="alg0.l3.m1.5.5.5.9">𝑒</ci><ci id="alg0.l3.m1.5.5.5.10.cmml" xref="alg0.l3.m1.5.5.5.10">𝑡</ci><interval closure="open" id="alg0.l3.m1.5.5.5.11.1.cmml" xref="alg0.l3.m1.5.5.5.11.2"><ci id="alg0.l3.m1.1.1.cmml" xref="alg0.l3.m1.1.1">𝛼</ci><cn type="integer" id="alg0.l3.m1.2.2.cmml" xref="alg0.l3.m1.2.2">3</cn></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l3.m1.5c">p_{0},p_{1},p_{2}\leftarrow Dirichlet(\alpha,3)</annotation></semantics></math>

</div>
<div id="alg0.l4" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4:</span>     <math id="alg0.l4.m1.6" class="ltx_Math" alttext="p_{large},p_{mid},p_{small}\leftarrow sortDescending(p_{0},p_{1},p_{2})" display="inline"><semantics id="alg0.l4.m1.6a"><mrow id="alg0.l4.m1.6.6" xref="alg0.l4.m1.6.6.cmml"><mrow id="alg0.l4.m1.3.3.3.3" xref="alg0.l4.m1.3.3.3.4.cmml"><msub id="alg0.l4.m1.1.1.1.1.1" xref="alg0.l4.m1.1.1.1.1.1.cmml"><mi id="alg0.l4.m1.1.1.1.1.1.2" xref="alg0.l4.m1.1.1.1.1.1.2.cmml">p</mi><mrow id="alg0.l4.m1.1.1.1.1.1.3" xref="alg0.l4.m1.1.1.1.1.1.3.cmml"><mi id="alg0.l4.m1.1.1.1.1.1.3.2" xref="alg0.l4.m1.1.1.1.1.1.3.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.1.1.1.1.1.3.1" xref="alg0.l4.m1.1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l4.m1.1.1.1.1.1.3.3" xref="alg0.l4.m1.1.1.1.1.1.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.1.1.1.1.1.3.1a" xref="alg0.l4.m1.1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l4.m1.1.1.1.1.1.3.4" xref="alg0.l4.m1.1.1.1.1.1.3.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.1.1.1.1.1.3.1b" xref="alg0.l4.m1.1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l4.m1.1.1.1.1.1.3.5" xref="alg0.l4.m1.1.1.1.1.1.3.5.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.1.1.1.1.1.3.1c" xref="alg0.l4.m1.1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l4.m1.1.1.1.1.1.3.6" xref="alg0.l4.m1.1.1.1.1.1.3.6.cmml">e</mi></mrow></msub><mo id="alg0.l4.m1.3.3.3.3.4" xref="alg0.l4.m1.3.3.3.4.cmml">,</mo><msub id="alg0.l4.m1.2.2.2.2.2" xref="alg0.l4.m1.2.2.2.2.2.cmml"><mi id="alg0.l4.m1.2.2.2.2.2.2" xref="alg0.l4.m1.2.2.2.2.2.2.cmml">p</mi><mrow id="alg0.l4.m1.2.2.2.2.2.3" xref="alg0.l4.m1.2.2.2.2.2.3.cmml"><mi id="alg0.l4.m1.2.2.2.2.2.3.2" xref="alg0.l4.m1.2.2.2.2.2.3.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.2.2.2.2.2.3.1" xref="alg0.l4.m1.2.2.2.2.2.3.1.cmml">​</mo><mi id="alg0.l4.m1.2.2.2.2.2.3.3" xref="alg0.l4.m1.2.2.2.2.2.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.2.2.2.2.2.3.1a" xref="alg0.l4.m1.2.2.2.2.2.3.1.cmml">​</mo><mi id="alg0.l4.m1.2.2.2.2.2.3.4" xref="alg0.l4.m1.2.2.2.2.2.3.4.cmml">d</mi></mrow></msub><mo id="alg0.l4.m1.3.3.3.3.5" xref="alg0.l4.m1.3.3.3.4.cmml">,</mo><msub id="alg0.l4.m1.3.3.3.3.3" xref="alg0.l4.m1.3.3.3.3.3.cmml"><mi id="alg0.l4.m1.3.3.3.3.3.2" xref="alg0.l4.m1.3.3.3.3.3.2.cmml">p</mi><mrow id="alg0.l4.m1.3.3.3.3.3.3" xref="alg0.l4.m1.3.3.3.3.3.3.cmml"><mi id="alg0.l4.m1.3.3.3.3.3.3.2" xref="alg0.l4.m1.3.3.3.3.3.3.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.3.3.3.3.3.3.1" xref="alg0.l4.m1.3.3.3.3.3.3.1.cmml">​</mo><mi id="alg0.l4.m1.3.3.3.3.3.3.3" xref="alg0.l4.m1.3.3.3.3.3.3.3.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.3.3.3.3.3.3.1a" xref="alg0.l4.m1.3.3.3.3.3.3.1.cmml">​</mo><mi id="alg0.l4.m1.3.3.3.3.3.3.4" xref="alg0.l4.m1.3.3.3.3.3.3.4.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.3.3.3.3.3.3.1b" xref="alg0.l4.m1.3.3.3.3.3.3.1.cmml">​</mo><mi id="alg0.l4.m1.3.3.3.3.3.3.5" xref="alg0.l4.m1.3.3.3.3.3.3.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.3.3.3.3.3.3.1c" xref="alg0.l4.m1.3.3.3.3.3.3.1.cmml">​</mo><mi id="alg0.l4.m1.3.3.3.3.3.3.6" xref="alg0.l4.m1.3.3.3.3.3.3.6.cmml">l</mi></mrow></msub></mrow><mo stretchy="false" id="alg0.l4.m1.6.6.7" xref="alg0.l4.m1.6.6.7.cmml">←</mo><mrow id="alg0.l4.m1.6.6.6" xref="alg0.l4.m1.6.6.6.cmml"><mi id="alg0.l4.m1.6.6.6.5" xref="alg0.l4.m1.6.6.6.5.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.6" xref="alg0.l4.m1.6.6.6.6.cmml">o</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4a" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.7" xref="alg0.l4.m1.6.6.6.7.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4b" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.8" xref="alg0.l4.m1.6.6.6.8.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4c" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.9" xref="alg0.l4.m1.6.6.6.9.cmml">D</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4d" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.10" xref="alg0.l4.m1.6.6.6.10.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4e" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.11" xref="alg0.l4.m1.6.6.6.11.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4f" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.12" xref="alg0.l4.m1.6.6.6.12.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4g" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.13" xref="alg0.l4.m1.6.6.6.13.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4h" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.14" xref="alg0.l4.m1.6.6.6.14.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4i" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.15" xref="alg0.l4.m1.6.6.6.15.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4j" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.16" xref="alg0.l4.m1.6.6.6.16.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4k" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.17" xref="alg0.l4.m1.6.6.6.17.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4l" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l4.m1.6.6.6.18" xref="alg0.l4.m1.6.6.6.18.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l4.m1.6.6.6.4m" xref="alg0.l4.m1.6.6.6.4.cmml">​</mo><mrow id="alg0.l4.m1.6.6.6.3.3" xref="alg0.l4.m1.6.6.6.3.4.cmml"><mo stretchy="false" id="alg0.l4.m1.6.6.6.3.3.4" xref="alg0.l4.m1.6.6.6.3.4.cmml">(</mo><msub id="alg0.l4.m1.4.4.4.1.1.1" xref="alg0.l4.m1.4.4.4.1.1.1.cmml"><mi id="alg0.l4.m1.4.4.4.1.1.1.2" xref="alg0.l4.m1.4.4.4.1.1.1.2.cmml">p</mi><mn id="alg0.l4.m1.4.4.4.1.1.1.3" xref="alg0.l4.m1.4.4.4.1.1.1.3.cmml">0</mn></msub><mo id="alg0.l4.m1.6.6.6.3.3.5" xref="alg0.l4.m1.6.6.6.3.4.cmml">,</mo><msub id="alg0.l4.m1.5.5.5.2.2.2" xref="alg0.l4.m1.5.5.5.2.2.2.cmml"><mi id="alg0.l4.m1.5.5.5.2.2.2.2" xref="alg0.l4.m1.5.5.5.2.2.2.2.cmml">p</mi><mn id="alg0.l4.m1.5.5.5.2.2.2.3" xref="alg0.l4.m1.5.5.5.2.2.2.3.cmml">1</mn></msub><mo id="alg0.l4.m1.6.6.6.3.3.6" xref="alg0.l4.m1.6.6.6.3.4.cmml">,</mo><msub id="alg0.l4.m1.6.6.6.3.3.3" xref="alg0.l4.m1.6.6.6.3.3.3.cmml"><mi id="alg0.l4.m1.6.6.6.3.3.3.2" xref="alg0.l4.m1.6.6.6.3.3.3.2.cmml">p</mi><mn id="alg0.l4.m1.6.6.6.3.3.3.3" xref="alg0.l4.m1.6.6.6.3.3.3.3.cmml">2</mn></msub><mo stretchy="false" id="alg0.l4.m1.6.6.6.3.3.7" xref="alg0.l4.m1.6.6.6.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l4.m1.6b"><apply id="alg0.l4.m1.6.6.cmml" xref="alg0.l4.m1.6.6"><ci id="alg0.l4.m1.6.6.7.cmml" xref="alg0.l4.m1.6.6.7">←</ci><list id="alg0.l4.m1.3.3.3.4.cmml" xref="alg0.l4.m1.3.3.3.3"><apply id="alg0.l4.m1.1.1.1.1.1.cmml" xref="alg0.l4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg0.l4.m1.1.1.1.1.1.1.cmml" xref="alg0.l4.m1.1.1.1.1.1">subscript</csymbol><ci id="alg0.l4.m1.1.1.1.1.1.2.cmml" xref="alg0.l4.m1.1.1.1.1.1.2">𝑝</ci><apply id="alg0.l4.m1.1.1.1.1.1.3.cmml" xref="alg0.l4.m1.1.1.1.1.1.3"><times id="alg0.l4.m1.1.1.1.1.1.3.1.cmml" xref="alg0.l4.m1.1.1.1.1.1.3.1"></times><ci id="alg0.l4.m1.1.1.1.1.1.3.2.cmml" xref="alg0.l4.m1.1.1.1.1.1.3.2">𝑙</ci><ci id="alg0.l4.m1.1.1.1.1.1.3.3.cmml" xref="alg0.l4.m1.1.1.1.1.1.3.3">𝑎</ci><ci id="alg0.l4.m1.1.1.1.1.1.3.4.cmml" xref="alg0.l4.m1.1.1.1.1.1.3.4">𝑟</ci><ci id="alg0.l4.m1.1.1.1.1.1.3.5.cmml" xref="alg0.l4.m1.1.1.1.1.1.3.5">𝑔</ci><ci id="alg0.l4.m1.1.1.1.1.1.3.6.cmml" xref="alg0.l4.m1.1.1.1.1.1.3.6">𝑒</ci></apply></apply><apply id="alg0.l4.m1.2.2.2.2.2.cmml" xref="alg0.l4.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="alg0.l4.m1.2.2.2.2.2.1.cmml" xref="alg0.l4.m1.2.2.2.2.2">subscript</csymbol><ci id="alg0.l4.m1.2.2.2.2.2.2.cmml" xref="alg0.l4.m1.2.2.2.2.2.2">𝑝</ci><apply id="alg0.l4.m1.2.2.2.2.2.3.cmml" xref="alg0.l4.m1.2.2.2.2.2.3"><times id="alg0.l4.m1.2.2.2.2.2.3.1.cmml" xref="alg0.l4.m1.2.2.2.2.2.3.1"></times><ci id="alg0.l4.m1.2.2.2.2.2.3.2.cmml" xref="alg0.l4.m1.2.2.2.2.2.3.2">𝑚</ci><ci id="alg0.l4.m1.2.2.2.2.2.3.3.cmml" xref="alg0.l4.m1.2.2.2.2.2.3.3">𝑖</ci><ci id="alg0.l4.m1.2.2.2.2.2.3.4.cmml" xref="alg0.l4.m1.2.2.2.2.2.3.4">𝑑</ci></apply></apply><apply id="alg0.l4.m1.3.3.3.3.3.cmml" xref="alg0.l4.m1.3.3.3.3.3"><csymbol cd="ambiguous" id="alg0.l4.m1.3.3.3.3.3.1.cmml" xref="alg0.l4.m1.3.3.3.3.3">subscript</csymbol><ci id="alg0.l4.m1.3.3.3.3.3.2.cmml" xref="alg0.l4.m1.3.3.3.3.3.2">𝑝</ci><apply id="alg0.l4.m1.3.3.3.3.3.3.cmml" xref="alg0.l4.m1.3.3.3.3.3.3"><times id="alg0.l4.m1.3.3.3.3.3.3.1.cmml" xref="alg0.l4.m1.3.3.3.3.3.3.1"></times><ci id="alg0.l4.m1.3.3.3.3.3.3.2.cmml" xref="alg0.l4.m1.3.3.3.3.3.3.2">𝑠</ci><ci id="alg0.l4.m1.3.3.3.3.3.3.3.cmml" xref="alg0.l4.m1.3.3.3.3.3.3.3">𝑚</ci><ci id="alg0.l4.m1.3.3.3.3.3.3.4.cmml" xref="alg0.l4.m1.3.3.3.3.3.3.4">𝑎</ci><ci id="alg0.l4.m1.3.3.3.3.3.3.5.cmml" xref="alg0.l4.m1.3.3.3.3.3.3.5">𝑙</ci><ci id="alg0.l4.m1.3.3.3.3.3.3.6.cmml" xref="alg0.l4.m1.3.3.3.3.3.3.6">𝑙</ci></apply></apply></list><apply id="alg0.l4.m1.6.6.6.cmml" xref="alg0.l4.m1.6.6.6"><times id="alg0.l4.m1.6.6.6.4.cmml" xref="alg0.l4.m1.6.6.6.4"></times><ci id="alg0.l4.m1.6.6.6.5.cmml" xref="alg0.l4.m1.6.6.6.5">𝑠</ci><ci id="alg0.l4.m1.6.6.6.6.cmml" xref="alg0.l4.m1.6.6.6.6">𝑜</ci><ci id="alg0.l4.m1.6.6.6.7.cmml" xref="alg0.l4.m1.6.6.6.7">𝑟</ci><ci id="alg0.l4.m1.6.6.6.8.cmml" xref="alg0.l4.m1.6.6.6.8">𝑡</ci><ci id="alg0.l4.m1.6.6.6.9.cmml" xref="alg0.l4.m1.6.6.6.9">𝐷</ci><ci id="alg0.l4.m1.6.6.6.10.cmml" xref="alg0.l4.m1.6.6.6.10">𝑒</ci><ci id="alg0.l4.m1.6.6.6.11.cmml" xref="alg0.l4.m1.6.6.6.11">𝑠</ci><ci id="alg0.l4.m1.6.6.6.12.cmml" xref="alg0.l4.m1.6.6.6.12">𝑐</ci><ci id="alg0.l4.m1.6.6.6.13.cmml" xref="alg0.l4.m1.6.6.6.13">𝑒</ci><ci id="alg0.l4.m1.6.6.6.14.cmml" xref="alg0.l4.m1.6.6.6.14">𝑛</ci><ci id="alg0.l4.m1.6.6.6.15.cmml" xref="alg0.l4.m1.6.6.6.15">𝑑</ci><ci id="alg0.l4.m1.6.6.6.16.cmml" xref="alg0.l4.m1.6.6.6.16">𝑖</ci><ci id="alg0.l4.m1.6.6.6.17.cmml" xref="alg0.l4.m1.6.6.6.17">𝑛</ci><ci id="alg0.l4.m1.6.6.6.18.cmml" xref="alg0.l4.m1.6.6.6.18">𝑔</ci><vector id="alg0.l4.m1.6.6.6.3.4.cmml" xref="alg0.l4.m1.6.6.6.3.3"><apply id="alg0.l4.m1.4.4.4.1.1.1.cmml" xref="alg0.l4.m1.4.4.4.1.1.1"><csymbol cd="ambiguous" id="alg0.l4.m1.4.4.4.1.1.1.1.cmml" xref="alg0.l4.m1.4.4.4.1.1.1">subscript</csymbol><ci id="alg0.l4.m1.4.4.4.1.1.1.2.cmml" xref="alg0.l4.m1.4.4.4.1.1.1.2">𝑝</ci><cn type="integer" id="alg0.l4.m1.4.4.4.1.1.1.3.cmml" xref="alg0.l4.m1.4.4.4.1.1.1.3">0</cn></apply><apply id="alg0.l4.m1.5.5.5.2.2.2.cmml" xref="alg0.l4.m1.5.5.5.2.2.2"><csymbol cd="ambiguous" id="alg0.l4.m1.5.5.5.2.2.2.1.cmml" xref="alg0.l4.m1.5.5.5.2.2.2">subscript</csymbol><ci id="alg0.l4.m1.5.5.5.2.2.2.2.cmml" xref="alg0.l4.m1.5.5.5.2.2.2.2">𝑝</ci><cn type="integer" id="alg0.l4.m1.5.5.5.2.2.2.3.cmml" xref="alg0.l4.m1.5.5.5.2.2.2.3">1</cn></apply><apply id="alg0.l4.m1.6.6.6.3.3.3.cmml" xref="alg0.l4.m1.6.6.6.3.3.3"><csymbol cd="ambiguous" id="alg0.l4.m1.6.6.6.3.3.3.1.cmml" xref="alg0.l4.m1.6.6.6.3.3.3">subscript</csymbol><ci id="alg0.l4.m1.6.6.6.3.3.3.2.cmml" xref="alg0.l4.m1.6.6.6.3.3.3.2">𝑝</ci><cn type="integer" id="alg0.l4.m1.6.6.6.3.3.3.3.cmml" xref="alg0.l4.m1.6.6.6.3.3.3.3">2</cn></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l4.m1.6c">p_{large},p_{mid},p_{small}\leftarrow sortDescending(p_{0},p_{1},p_{2})</annotation></semantics></math>

</div>
<div id="alg0.l5" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5:</span>     <math id="alg0.l5.m1.6" class="ltx_Math" alttext="tier_{large},tier_{mid},tier_{small}\leftarrow sortByDescendingSize(tier_{0},tier_{1},tier_{2})" display="inline"><semantics id="alg0.l5.m1.6a"><mrow id="alg0.l5.m1.6.6" xref="alg0.l5.m1.6.6.cmml"><mrow id="alg0.l5.m1.3.3.3.3" xref="alg0.l5.m1.3.3.3.4.cmml"><mrow id="alg0.l5.m1.1.1.1.1.1" xref="alg0.l5.m1.1.1.1.1.1.cmml"><mi id="alg0.l5.m1.1.1.1.1.1.2" xref="alg0.l5.m1.1.1.1.1.1.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.1.1.1.1.1.1" xref="alg0.l5.m1.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l5.m1.1.1.1.1.1.3" xref="alg0.l5.m1.1.1.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.1.1.1.1.1.1a" xref="alg0.l5.m1.1.1.1.1.1.1.cmml">​</mo><mi id="alg0.l5.m1.1.1.1.1.1.4" xref="alg0.l5.m1.1.1.1.1.1.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.1.1.1.1.1.1b" xref="alg0.l5.m1.1.1.1.1.1.1.cmml">​</mo><msub id="alg0.l5.m1.1.1.1.1.1.5" xref="alg0.l5.m1.1.1.1.1.1.5.cmml"><mi id="alg0.l5.m1.1.1.1.1.1.5.2" xref="alg0.l5.m1.1.1.1.1.1.5.2.cmml">r</mi><mrow id="alg0.l5.m1.1.1.1.1.1.5.3" xref="alg0.l5.m1.1.1.1.1.1.5.3.cmml"><mi id="alg0.l5.m1.1.1.1.1.1.5.3.2" xref="alg0.l5.m1.1.1.1.1.1.5.3.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.1.1.1.1.1.5.3.1" xref="alg0.l5.m1.1.1.1.1.1.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.1.1.1.1.1.5.3.3" xref="alg0.l5.m1.1.1.1.1.1.5.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.1.1.1.1.1.5.3.1a" xref="alg0.l5.m1.1.1.1.1.1.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.1.1.1.1.1.5.3.4" xref="alg0.l5.m1.1.1.1.1.1.5.3.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.1.1.1.1.1.5.3.1b" xref="alg0.l5.m1.1.1.1.1.1.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.1.1.1.1.1.5.3.5" xref="alg0.l5.m1.1.1.1.1.1.5.3.5.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.1.1.1.1.1.5.3.1c" xref="alg0.l5.m1.1.1.1.1.1.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.1.1.1.1.1.5.3.6" xref="alg0.l5.m1.1.1.1.1.1.5.3.6.cmml">e</mi></mrow></msub></mrow><mo id="alg0.l5.m1.3.3.3.3.4" xref="alg0.l5.m1.3.3.3.4.cmml">,</mo><mrow id="alg0.l5.m1.2.2.2.2.2" xref="alg0.l5.m1.2.2.2.2.2.cmml"><mi id="alg0.l5.m1.2.2.2.2.2.2" xref="alg0.l5.m1.2.2.2.2.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.2.2.2.2.2.1" xref="alg0.l5.m1.2.2.2.2.2.1.cmml">​</mo><mi id="alg0.l5.m1.2.2.2.2.2.3" xref="alg0.l5.m1.2.2.2.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.2.2.2.2.2.1a" xref="alg0.l5.m1.2.2.2.2.2.1.cmml">​</mo><mi id="alg0.l5.m1.2.2.2.2.2.4" xref="alg0.l5.m1.2.2.2.2.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.2.2.2.2.2.1b" xref="alg0.l5.m1.2.2.2.2.2.1.cmml">​</mo><msub id="alg0.l5.m1.2.2.2.2.2.5" xref="alg0.l5.m1.2.2.2.2.2.5.cmml"><mi id="alg0.l5.m1.2.2.2.2.2.5.2" xref="alg0.l5.m1.2.2.2.2.2.5.2.cmml">r</mi><mrow id="alg0.l5.m1.2.2.2.2.2.5.3" xref="alg0.l5.m1.2.2.2.2.2.5.3.cmml"><mi id="alg0.l5.m1.2.2.2.2.2.5.3.2" xref="alg0.l5.m1.2.2.2.2.2.5.3.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.2.2.2.2.2.5.3.1" xref="alg0.l5.m1.2.2.2.2.2.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.2.2.2.2.2.5.3.3" xref="alg0.l5.m1.2.2.2.2.2.5.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.2.2.2.2.2.5.3.1a" xref="alg0.l5.m1.2.2.2.2.2.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.2.2.2.2.2.5.3.4" xref="alg0.l5.m1.2.2.2.2.2.5.3.4.cmml">d</mi></mrow></msub></mrow><mo id="alg0.l5.m1.3.3.3.3.5" xref="alg0.l5.m1.3.3.3.4.cmml">,</mo><mrow id="alg0.l5.m1.3.3.3.3.3" xref="alg0.l5.m1.3.3.3.3.3.cmml"><mi id="alg0.l5.m1.3.3.3.3.3.2" xref="alg0.l5.m1.3.3.3.3.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.3.3.3.3.3.1" xref="alg0.l5.m1.3.3.3.3.3.1.cmml">​</mo><mi id="alg0.l5.m1.3.3.3.3.3.3" xref="alg0.l5.m1.3.3.3.3.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.3.3.3.3.3.1a" xref="alg0.l5.m1.3.3.3.3.3.1.cmml">​</mo><mi id="alg0.l5.m1.3.3.3.3.3.4" xref="alg0.l5.m1.3.3.3.3.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.3.3.3.3.3.1b" xref="alg0.l5.m1.3.3.3.3.3.1.cmml">​</mo><msub id="alg0.l5.m1.3.3.3.3.3.5" xref="alg0.l5.m1.3.3.3.3.3.5.cmml"><mi id="alg0.l5.m1.3.3.3.3.3.5.2" xref="alg0.l5.m1.3.3.3.3.3.5.2.cmml">r</mi><mrow id="alg0.l5.m1.3.3.3.3.3.5.3" xref="alg0.l5.m1.3.3.3.3.3.5.3.cmml"><mi id="alg0.l5.m1.3.3.3.3.3.5.3.2" xref="alg0.l5.m1.3.3.3.3.3.5.3.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.3.3.3.3.3.5.3.1" xref="alg0.l5.m1.3.3.3.3.3.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.3.3.3.3.3.5.3.3" xref="alg0.l5.m1.3.3.3.3.3.5.3.3.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.3.3.3.3.3.5.3.1a" xref="alg0.l5.m1.3.3.3.3.3.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.3.3.3.3.3.5.3.4" xref="alg0.l5.m1.3.3.3.3.3.5.3.4.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.3.3.3.3.3.5.3.1b" xref="alg0.l5.m1.3.3.3.3.3.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.3.3.3.3.3.5.3.5" xref="alg0.l5.m1.3.3.3.3.3.5.3.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.3.3.3.3.3.5.3.1c" xref="alg0.l5.m1.3.3.3.3.3.5.3.1.cmml">​</mo><mi id="alg0.l5.m1.3.3.3.3.3.5.3.6" xref="alg0.l5.m1.3.3.3.3.3.5.3.6.cmml">l</mi></mrow></msub></mrow></mrow><mo stretchy="false" id="alg0.l5.m1.6.6.7" xref="alg0.l5.m1.6.6.7.cmml">←</mo><mrow id="alg0.l5.m1.6.6.6" xref="alg0.l5.m1.6.6.6.cmml"><mi id="alg0.l5.m1.6.6.6.5" xref="alg0.l5.m1.6.6.6.5.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.6" xref="alg0.l5.m1.6.6.6.6.cmml">o</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4a" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.7" xref="alg0.l5.m1.6.6.6.7.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4b" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.8" xref="alg0.l5.m1.6.6.6.8.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4c" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.9" xref="alg0.l5.m1.6.6.6.9.cmml">B</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4d" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.10" xref="alg0.l5.m1.6.6.6.10.cmml">y</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4e" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.11" xref="alg0.l5.m1.6.6.6.11.cmml">D</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4f" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.12" xref="alg0.l5.m1.6.6.6.12.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4g" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.13" xref="alg0.l5.m1.6.6.6.13.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4h" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.14" xref="alg0.l5.m1.6.6.6.14.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4i" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.15" xref="alg0.l5.m1.6.6.6.15.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4j" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.16" xref="alg0.l5.m1.6.6.6.16.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4k" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.17" xref="alg0.l5.m1.6.6.6.17.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4l" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.18" xref="alg0.l5.m1.6.6.6.18.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4m" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.19" xref="alg0.l5.m1.6.6.6.19.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4n" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.20" xref="alg0.l5.m1.6.6.6.20.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4o" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.21" xref="alg0.l5.m1.6.6.6.21.cmml">S</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4p" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.22" xref="alg0.l5.m1.6.6.6.22.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4q" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.23" xref="alg0.l5.m1.6.6.6.23.cmml">z</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4r" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.24" xref="alg0.l5.m1.6.6.6.24.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.4s" xref="alg0.l5.m1.6.6.6.4.cmml">​</mo><mrow id="alg0.l5.m1.6.6.6.3.3" xref="alg0.l5.m1.6.6.6.3.4.cmml"><mo stretchy="false" id="alg0.l5.m1.6.6.6.3.3.4" xref="alg0.l5.m1.6.6.6.3.4.cmml">(</mo><mrow id="alg0.l5.m1.4.4.4.1.1.1" xref="alg0.l5.m1.4.4.4.1.1.1.cmml"><mi id="alg0.l5.m1.4.4.4.1.1.1.2" xref="alg0.l5.m1.4.4.4.1.1.1.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.4.4.4.1.1.1.1" xref="alg0.l5.m1.4.4.4.1.1.1.1.cmml">​</mo><mi id="alg0.l5.m1.4.4.4.1.1.1.3" xref="alg0.l5.m1.4.4.4.1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.4.4.4.1.1.1.1a" xref="alg0.l5.m1.4.4.4.1.1.1.1.cmml">​</mo><mi id="alg0.l5.m1.4.4.4.1.1.1.4" xref="alg0.l5.m1.4.4.4.1.1.1.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.4.4.4.1.1.1.1b" xref="alg0.l5.m1.4.4.4.1.1.1.1.cmml">​</mo><msub id="alg0.l5.m1.4.4.4.1.1.1.5" xref="alg0.l5.m1.4.4.4.1.1.1.5.cmml"><mi id="alg0.l5.m1.4.4.4.1.1.1.5.2" xref="alg0.l5.m1.4.4.4.1.1.1.5.2.cmml">r</mi><mn id="alg0.l5.m1.4.4.4.1.1.1.5.3" xref="alg0.l5.m1.4.4.4.1.1.1.5.3.cmml">0</mn></msub></mrow><mo id="alg0.l5.m1.6.6.6.3.3.5" xref="alg0.l5.m1.6.6.6.3.4.cmml">,</mo><mrow id="alg0.l5.m1.5.5.5.2.2.2" xref="alg0.l5.m1.5.5.5.2.2.2.cmml"><mi id="alg0.l5.m1.5.5.5.2.2.2.2" xref="alg0.l5.m1.5.5.5.2.2.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.5.5.5.2.2.2.1" xref="alg0.l5.m1.5.5.5.2.2.2.1.cmml">​</mo><mi id="alg0.l5.m1.5.5.5.2.2.2.3" xref="alg0.l5.m1.5.5.5.2.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.5.5.5.2.2.2.1a" xref="alg0.l5.m1.5.5.5.2.2.2.1.cmml">​</mo><mi id="alg0.l5.m1.5.5.5.2.2.2.4" xref="alg0.l5.m1.5.5.5.2.2.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.5.5.5.2.2.2.1b" xref="alg0.l5.m1.5.5.5.2.2.2.1.cmml">​</mo><msub id="alg0.l5.m1.5.5.5.2.2.2.5" xref="alg0.l5.m1.5.5.5.2.2.2.5.cmml"><mi id="alg0.l5.m1.5.5.5.2.2.2.5.2" xref="alg0.l5.m1.5.5.5.2.2.2.5.2.cmml">r</mi><mn id="alg0.l5.m1.5.5.5.2.2.2.5.3" xref="alg0.l5.m1.5.5.5.2.2.2.5.3.cmml">1</mn></msub></mrow><mo id="alg0.l5.m1.6.6.6.3.3.6" xref="alg0.l5.m1.6.6.6.3.4.cmml">,</mo><mrow id="alg0.l5.m1.6.6.6.3.3.3" xref="alg0.l5.m1.6.6.6.3.3.3.cmml"><mi id="alg0.l5.m1.6.6.6.3.3.3.2" xref="alg0.l5.m1.6.6.6.3.3.3.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.3.3.3.1" xref="alg0.l5.m1.6.6.6.3.3.3.1.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.3.3.3.3" xref="alg0.l5.m1.6.6.6.3.3.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.3.3.3.1a" xref="alg0.l5.m1.6.6.6.3.3.3.1.cmml">​</mo><mi id="alg0.l5.m1.6.6.6.3.3.3.4" xref="alg0.l5.m1.6.6.6.3.3.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l5.m1.6.6.6.3.3.3.1b" xref="alg0.l5.m1.6.6.6.3.3.3.1.cmml">​</mo><msub id="alg0.l5.m1.6.6.6.3.3.3.5" xref="alg0.l5.m1.6.6.6.3.3.3.5.cmml"><mi id="alg0.l5.m1.6.6.6.3.3.3.5.2" xref="alg0.l5.m1.6.6.6.3.3.3.5.2.cmml">r</mi><mn id="alg0.l5.m1.6.6.6.3.3.3.5.3" xref="alg0.l5.m1.6.6.6.3.3.3.5.3.cmml">2</mn></msub></mrow><mo stretchy="false" id="alg0.l5.m1.6.6.6.3.3.7" xref="alg0.l5.m1.6.6.6.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l5.m1.6b"><apply id="alg0.l5.m1.6.6.cmml" xref="alg0.l5.m1.6.6"><ci id="alg0.l5.m1.6.6.7.cmml" xref="alg0.l5.m1.6.6.7">←</ci><list id="alg0.l5.m1.3.3.3.4.cmml" xref="alg0.l5.m1.3.3.3.3"><apply id="alg0.l5.m1.1.1.1.1.1.cmml" xref="alg0.l5.m1.1.1.1.1.1"><times id="alg0.l5.m1.1.1.1.1.1.1.cmml" xref="alg0.l5.m1.1.1.1.1.1.1"></times><ci id="alg0.l5.m1.1.1.1.1.1.2.cmml" xref="alg0.l5.m1.1.1.1.1.1.2">𝑡</ci><ci id="alg0.l5.m1.1.1.1.1.1.3.cmml" xref="alg0.l5.m1.1.1.1.1.1.3">𝑖</ci><ci id="alg0.l5.m1.1.1.1.1.1.4.cmml" xref="alg0.l5.m1.1.1.1.1.1.4">𝑒</ci><apply id="alg0.l5.m1.1.1.1.1.1.5.cmml" xref="alg0.l5.m1.1.1.1.1.1.5"><csymbol cd="ambiguous" id="alg0.l5.m1.1.1.1.1.1.5.1.cmml" xref="alg0.l5.m1.1.1.1.1.1.5">subscript</csymbol><ci id="alg0.l5.m1.1.1.1.1.1.5.2.cmml" xref="alg0.l5.m1.1.1.1.1.1.5.2">𝑟</ci><apply id="alg0.l5.m1.1.1.1.1.1.5.3.cmml" xref="alg0.l5.m1.1.1.1.1.1.5.3"><times id="alg0.l5.m1.1.1.1.1.1.5.3.1.cmml" xref="alg0.l5.m1.1.1.1.1.1.5.3.1"></times><ci id="alg0.l5.m1.1.1.1.1.1.5.3.2.cmml" xref="alg0.l5.m1.1.1.1.1.1.5.3.2">𝑙</ci><ci id="alg0.l5.m1.1.1.1.1.1.5.3.3.cmml" xref="alg0.l5.m1.1.1.1.1.1.5.3.3">𝑎</ci><ci id="alg0.l5.m1.1.1.1.1.1.5.3.4.cmml" xref="alg0.l5.m1.1.1.1.1.1.5.3.4">𝑟</ci><ci id="alg0.l5.m1.1.1.1.1.1.5.3.5.cmml" xref="alg0.l5.m1.1.1.1.1.1.5.3.5">𝑔</ci><ci id="alg0.l5.m1.1.1.1.1.1.5.3.6.cmml" xref="alg0.l5.m1.1.1.1.1.1.5.3.6">𝑒</ci></apply></apply></apply><apply id="alg0.l5.m1.2.2.2.2.2.cmml" xref="alg0.l5.m1.2.2.2.2.2"><times id="alg0.l5.m1.2.2.2.2.2.1.cmml" xref="alg0.l5.m1.2.2.2.2.2.1"></times><ci id="alg0.l5.m1.2.2.2.2.2.2.cmml" xref="alg0.l5.m1.2.2.2.2.2.2">𝑡</ci><ci id="alg0.l5.m1.2.2.2.2.2.3.cmml" xref="alg0.l5.m1.2.2.2.2.2.3">𝑖</ci><ci id="alg0.l5.m1.2.2.2.2.2.4.cmml" xref="alg0.l5.m1.2.2.2.2.2.4">𝑒</ci><apply id="alg0.l5.m1.2.2.2.2.2.5.cmml" xref="alg0.l5.m1.2.2.2.2.2.5"><csymbol cd="ambiguous" id="alg0.l5.m1.2.2.2.2.2.5.1.cmml" xref="alg0.l5.m1.2.2.2.2.2.5">subscript</csymbol><ci id="alg0.l5.m1.2.2.2.2.2.5.2.cmml" xref="alg0.l5.m1.2.2.2.2.2.5.2">𝑟</ci><apply id="alg0.l5.m1.2.2.2.2.2.5.3.cmml" xref="alg0.l5.m1.2.2.2.2.2.5.3"><times id="alg0.l5.m1.2.2.2.2.2.5.3.1.cmml" xref="alg0.l5.m1.2.2.2.2.2.5.3.1"></times><ci id="alg0.l5.m1.2.2.2.2.2.5.3.2.cmml" xref="alg0.l5.m1.2.2.2.2.2.5.3.2">𝑚</ci><ci id="alg0.l5.m1.2.2.2.2.2.5.3.3.cmml" xref="alg0.l5.m1.2.2.2.2.2.5.3.3">𝑖</ci><ci id="alg0.l5.m1.2.2.2.2.2.5.3.4.cmml" xref="alg0.l5.m1.2.2.2.2.2.5.3.4">𝑑</ci></apply></apply></apply><apply id="alg0.l5.m1.3.3.3.3.3.cmml" xref="alg0.l5.m1.3.3.3.3.3"><times id="alg0.l5.m1.3.3.3.3.3.1.cmml" xref="alg0.l5.m1.3.3.3.3.3.1"></times><ci id="alg0.l5.m1.3.3.3.3.3.2.cmml" xref="alg0.l5.m1.3.3.3.3.3.2">𝑡</ci><ci id="alg0.l5.m1.3.3.3.3.3.3.cmml" xref="alg0.l5.m1.3.3.3.3.3.3">𝑖</ci><ci id="alg0.l5.m1.3.3.3.3.3.4.cmml" xref="alg0.l5.m1.3.3.3.3.3.4">𝑒</ci><apply id="alg0.l5.m1.3.3.3.3.3.5.cmml" xref="alg0.l5.m1.3.3.3.3.3.5"><csymbol cd="ambiguous" id="alg0.l5.m1.3.3.3.3.3.5.1.cmml" xref="alg0.l5.m1.3.3.3.3.3.5">subscript</csymbol><ci id="alg0.l5.m1.3.3.3.3.3.5.2.cmml" xref="alg0.l5.m1.3.3.3.3.3.5.2">𝑟</ci><apply id="alg0.l5.m1.3.3.3.3.3.5.3.cmml" xref="alg0.l5.m1.3.3.3.3.3.5.3"><times id="alg0.l5.m1.3.3.3.3.3.5.3.1.cmml" xref="alg0.l5.m1.3.3.3.3.3.5.3.1"></times><ci id="alg0.l5.m1.3.3.3.3.3.5.3.2.cmml" xref="alg0.l5.m1.3.3.3.3.3.5.3.2">𝑠</ci><ci id="alg0.l5.m1.3.3.3.3.3.5.3.3.cmml" xref="alg0.l5.m1.3.3.3.3.3.5.3.3">𝑚</ci><ci id="alg0.l5.m1.3.3.3.3.3.5.3.4.cmml" xref="alg0.l5.m1.3.3.3.3.3.5.3.4">𝑎</ci><ci id="alg0.l5.m1.3.3.3.3.3.5.3.5.cmml" xref="alg0.l5.m1.3.3.3.3.3.5.3.5">𝑙</ci><ci id="alg0.l5.m1.3.3.3.3.3.5.3.6.cmml" xref="alg0.l5.m1.3.3.3.3.3.5.3.6">𝑙</ci></apply></apply></apply></list><apply id="alg0.l5.m1.6.6.6.cmml" xref="alg0.l5.m1.6.6.6"><times id="alg0.l5.m1.6.6.6.4.cmml" xref="alg0.l5.m1.6.6.6.4"></times><ci id="alg0.l5.m1.6.6.6.5.cmml" xref="alg0.l5.m1.6.6.6.5">𝑠</ci><ci id="alg0.l5.m1.6.6.6.6.cmml" xref="alg0.l5.m1.6.6.6.6">𝑜</ci><ci id="alg0.l5.m1.6.6.6.7.cmml" xref="alg0.l5.m1.6.6.6.7">𝑟</ci><ci id="alg0.l5.m1.6.6.6.8.cmml" xref="alg0.l5.m1.6.6.6.8">𝑡</ci><ci id="alg0.l5.m1.6.6.6.9.cmml" xref="alg0.l5.m1.6.6.6.9">𝐵</ci><ci id="alg0.l5.m1.6.6.6.10.cmml" xref="alg0.l5.m1.6.6.6.10">𝑦</ci><ci id="alg0.l5.m1.6.6.6.11.cmml" xref="alg0.l5.m1.6.6.6.11">𝐷</ci><ci id="alg0.l5.m1.6.6.6.12.cmml" xref="alg0.l5.m1.6.6.6.12">𝑒</ci><ci id="alg0.l5.m1.6.6.6.13.cmml" xref="alg0.l5.m1.6.6.6.13">𝑠</ci><ci id="alg0.l5.m1.6.6.6.14.cmml" xref="alg0.l5.m1.6.6.6.14">𝑐</ci><ci id="alg0.l5.m1.6.6.6.15.cmml" xref="alg0.l5.m1.6.6.6.15">𝑒</ci><ci id="alg0.l5.m1.6.6.6.16.cmml" xref="alg0.l5.m1.6.6.6.16">𝑛</ci><ci id="alg0.l5.m1.6.6.6.17.cmml" xref="alg0.l5.m1.6.6.6.17">𝑑</ci><ci id="alg0.l5.m1.6.6.6.18.cmml" xref="alg0.l5.m1.6.6.6.18">𝑖</ci><ci id="alg0.l5.m1.6.6.6.19.cmml" xref="alg0.l5.m1.6.6.6.19">𝑛</ci><ci id="alg0.l5.m1.6.6.6.20.cmml" xref="alg0.l5.m1.6.6.6.20">𝑔</ci><ci id="alg0.l5.m1.6.6.6.21.cmml" xref="alg0.l5.m1.6.6.6.21">𝑆</ci><ci id="alg0.l5.m1.6.6.6.22.cmml" xref="alg0.l5.m1.6.6.6.22">𝑖</ci><ci id="alg0.l5.m1.6.6.6.23.cmml" xref="alg0.l5.m1.6.6.6.23">𝑧</ci><ci id="alg0.l5.m1.6.6.6.24.cmml" xref="alg0.l5.m1.6.6.6.24">𝑒</ci><vector id="alg0.l5.m1.6.6.6.3.4.cmml" xref="alg0.l5.m1.6.6.6.3.3"><apply id="alg0.l5.m1.4.4.4.1.1.1.cmml" xref="alg0.l5.m1.4.4.4.1.1.1"><times id="alg0.l5.m1.4.4.4.1.1.1.1.cmml" xref="alg0.l5.m1.4.4.4.1.1.1.1"></times><ci id="alg0.l5.m1.4.4.4.1.1.1.2.cmml" xref="alg0.l5.m1.4.4.4.1.1.1.2">𝑡</ci><ci id="alg0.l5.m1.4.4.4.1.1.1.3.cmml" xref="alg0.l5.m1.4.4.4.1.1.1.3">𝑖</ci><ci id="alg0.l5.m1.4.4.4.1.1.1.4.cmml" xref="alg0.l5.m1.4.4.4.1.1.1.4">𝑒</ci><apply id="alg0.l5.m1.4.4.4.1.1.1.5.cmml" xref="alg0.l5.m1.4.4.4.1.1.1.5"><csymbol cd="ambiguous" id="alg0.l5.m1.4.4.4.1.1.1.5.1.cmml" xref="alg0.l5.m1.4.4.4.1.1.1.5">subscript</csymbol><ci id="alg0.l5.m1.4.4.4.1.1.1.5.2.cmml" xref="alg0.l5.m1.4.4.4.1.1.1.5.2">𝑟</ci><cn type="integer" id="alg0.l5.m1.4.4.4.1.1.1.5.3.cmml" xref="alg0.l5.m1.4.4.4.1.1.1.5.3">0</cn></apply></apply><apply id="alg0.l5.m1.5.5.5.2.2.2.cmml" xref="alg0.l5.m1.5.5.5.2.2.2"><times id="alg0.l5.m1.5.5.5.2.2.2.1.cmml" xref="alg0.l5.m1.5.5.5.2.2.2.1"></times><ci id="alg0.l5.m1.5.5.5.2.2.2.2.cmml" xref="alg0.l5.m1.5.5.5.2.2.2.2">𝑡</ci><ci id="alg0.l5.m1.5.5.5.2.2.2.3.cmml" xref="alg0.l5.m1.5.5.5.2.2.2.3">𝑖</ci><ci id="alg0.l5.m1.5.5.5.2.2.2.4.cmml" xref="alg0.l5.m1.5.5.5.2.2.2.4">𝑒</ci><apply id="alg0.l5.m1.5.5.5.2.2.2.5.cmml" xref="alg0.l5.m1.5.5.5.2.2.2.5"><csymbol cd="ambiguous" id="alg0.l5.m1.5.5.5.2.2.2.5.1.cmml" xref="alg0.l5.m1.5.5.5.2.2.2.5">subscript</csymbol><ci id="alg0.l5.m1.5.5.5.2.2.2.5.2.cmml" xref="alg0.l5.m1.5.5.5.2.2.2.5.2">𝑟</ci><cn type="integer" id="alg0.l5.m1.5.5.5.2.2.2.5.3.cmml" xref="alg0.l5.m1.5.5.5.2.2.2.5.3">1</cn></apply></apply><apply id="alg0.l5.m1.6.6.6.3.3.3.cmml" xref="alg0.l5.m1.6.6.6.3.3.3"><times id="alg0.l5.m1.6.6.6.3.3.3.1.cmml" xref="alg0.l5.m1.6.6.6.3.3.3.1"></times><ci id="alg0.l5.m1.6.6.6.3.3.3.2.cmml" xref="alg0.l5.m1.6.6.6.3.3.3.2">𝑡</ci><ci id="alg0.l5.m1.6.6.6.3.3.3.3.cmml" xref="alg0.l5.m1.6.6.6.3.3.3.3">𝑖</ci><ci id="alg0.l5.m1.6.6.6.3.3.3.4.cmml" xref="alg0.l5.m1.6.6.6.3.3.3.4">𝑒</ci><apply id="alg0.l5.m1.6.6.6.3.3.3.5.cmml" xref="alg0.l5.m1.6.6.6.3.3.3.5"><csymbol cd="ambiguous" id="alg0.l5.m1.6.6.6.3.3.3.5.1.cmml" xref="alg0.l5.m1.6.6.6.3.3.3.5">subscript</csymbol><ci id="alg0.l5.m1.6.6.6.3.3.3.5.2.cmml" xref="alg0.l5.m1.6.6.6.3.3.3.5.2">𝑟</ci><cn type="integer" id="alg0.l5.m1.6.6.6.3.3.3.5.3.cmml" xref="alg0.l5.m1.6.6.6.3.3.3.5.3">2</cn></apply></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l5.m1.6c">tier_{large},tier_{mid},tier_{small}\leftarrow sortByDescendingSize(tier_{0},tier_{1},tier_{2})</annotation></semantics></math>

</div>
<div id="alg0.l6" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6:</span>     <span id="alg0.l6.1" class="ltx_text ltx_font_bold">for</span> <math id="alg0.l6.m1.2" class="ltx_Math" alttext="user\in item.clickedUsers()" display="inline"><semantics id="alg0.l6.m1.2a"><mrow id="alg0.l6.m1.2.2.2" xref="alg0.l6.m1.2.2.3.cmml"><mrow id="alg0.l6.m1.1.1.1.1" xref="alg0.l6.m1.1.1.1.1.cmml"><mrow id="alg0.l6.m1.1.1.1.1.2" xref="alg0.l6.m1.1.1.1.1.2.cmml"><mi id="alg0.l6.m1.1.1.1.1.2.2" xref="alg0.l6.m1.1.1.1.1.2.2.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.1.1.1.1.2.1" xref="alg0.l6.m1.1.1.1.1.2.1.cmml">​</mo><mi id="alg0.l6.m1.1.1.1.1.2.3" xref="alg0.l6.m1.1.1.1.1.2.3.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.1.1.1.1.2.1a" xref="alg0.l6.m1.1.1.1.1.2.1.cmml">​</mo><mi id="alg0.l6.m1.1.1.1.1.2.4" xref="alg0.l6.m1.1.1.1.1.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.1.1.1.1.2.1b" xref="alg0.l6.m1.1.1.1.1.2.1.cmml">​</mo><mi id="alg0.l6.m1.1.1.1.1.2.5" xref="alg0.l6.m1.1.1.1.1.2.5.cmml">r</mi></mrow><mo id="alg0.l6.m1.1.1.1.1.1" xref="alg0.l6.m1.1.1.1.1.1.cmml">∈</mo><mrow id="alg0.l6.m1.1.1.1.1.3" xref="alg0.l6.m1.1.1.1.1.3.cmml"><mi id="alg0.l6.m1.1.1.1.1.3.2" xref="alg0.l6.m1.1.1.1.1.3.2.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.1.1.1.1.3.1" xref="alg0.l6.m1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l6.m1.1.1.1.1.3.3" xref="alg0.l6.m1.1.1.1.1.3.3.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.1.1.1.1.3.1a" xref="alg0.l6.m1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l6.m1.1.1.1.1.3.4" xref="alg0.l6.m1.1.1.1.1.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.1.1.1.1.3.1b" xref="alg0.l6.m1.1.1.1.1.3.1.cmml">​</mo><mi id="alg0.l6.m1.1.1.1.1.3.5" xref="alg0.l6.m1.1.1.1.1.3.5.cmml">m</mi></mrow></mrow><mo lspace="0em" rspace="0.167em" id="alg0.l6.m1.2.2.2.3" xref="alg0.l6.m1.2.2.3a.cmml">.</mo><mrow id="alg0.l6.m1.2.2.2.2" xref="alg0.l6.m1.2.2.2.2.cmml"><mi id="alg0.l6.m1.2.2.2.2.2" xref="alg0.l6.m1.2.2.2.2.2.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.3" xref="alg0.l6.m1.2.2.2.2.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1a" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.4" xref="alg0.l6.m1.2.2.2.2.4.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1b" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.5" xref="alg0.l6.m1.2.2.2.2.5.cmml">c</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1c" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.6" xref="alg0.l6.m1.2.2.2.2.6.cmml">k</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1d" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.7" xref="alg0.l6.m1.2.2.2.2.7.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1e" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.8" xref="alg0.l6.m1.2.2.2.2.8.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1f" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.9" xref="alg0.l6.m1.2.2.2.2.9.cmml">U</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1g" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.10" xref="alg0.l6.m1.2.2.2.2.10.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1h" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.11" xref="alg0.l6.m1.2.2.2.2.11.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1i" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.12" xref="alg0.l6.m1.2.2.2.2.12.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1j" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mi id="alg0.l6.m1.2.2.2.2.13" xref="alg0.l6.m1.2.2.2.2.13.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l6.m1.2.2.2.2.1k" xref="alg0.l6.m1.2.2.2.2.1.cmml">​</mo><mrow id="alg0.l6.m1.2.2.2.2.14.2" xref="alg0.l6.m1.2.2.2.2.cmml"><mo stretchy="false" id="alg0.l6.m1.2.2.2.2.14.2.1" xref="alg0.l6.m1.2.2.2.2.14.1.cmml">(</mo><mo stretchy="false" id="alg0.l6.m1.2.2.2.2.14.2.2" xref="alg0.l6.m1.2.2.2.2.14.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l6.m1.2b"><apply id="alg0.l6.m1.2.2.3.cmml" xref="alg0.l6.m1.2.2.2"><csymbol cd="ambiguous" id="alg0.l6.m1.2.2.3a.cmml" xref="alg0.l6.m1.2.2.2.3">formulae-sequence</csymbol><apply id="alg0.l6.m1.1.1.1.1.cmml" xref="alg0.l6.m1.1.1.1.1"><in id="alg0.l6.m1.1.1.1.1.1.cmml" xref="alg0.l6.m1.1.1.1.1.1"></in><apply id="alg0.l6.m1.1.1.1.1.2.cmml" xref="alg0.l6.m1.1.1.1.1.2"><times id="alg0.l6.m1.1.1.1.1.2.1.cmml" xref="alg0.l6.m1.1.1.1.1.2.1"></times><ci id="alg0.l6.m1.1.1.1.1.2.2.cmml" xref="alg0.l6.m1.1.1.1.1.2.2">𝑢</ci><ci id="alg0.l6.m1.1.1.1.1.2.3.cmml" xref="alg0.l6.m1.1.1.1.1.2.3">𝑠</ci><ci id="alg0.l6.m1.1.1.1.1.2.4.cmml" xref="alg0.l6.m1.1.1.1.1.2.4">𝑒</ci><ci id="alg0.l6.m1.1.1.1.1.2.5.cmml" xref="alg0.l6.m1.1.1.1.1.2.5">𝑟</ci></apply><apply id="alg0.l6.m1.1.1.1.1.3.cmml" xref="alg0.l6.m1.1.1.1.1.3"><times id="alg0.l6.m1.1.1.1.1.3.1.cmml" xref="alg0.l6.m1.1.1.1.1.3.1"></times><ci id="alg0.l6.m1.1.1.1.1.3.2.cmml" xref="alg0.l6.m1.1.1.1.1.3.2">𝑖</ci><ci id="alg0.l6.m1.1.1.1.1.3.3.cmml" xref="alg0.l6.m1.1.1.1.1.3.3">𝑡</ci><ci id="alg0.l6.m1.1.1.1.1.3.4.cmml" xref="alg0.l6.m1.1.1.1.1.3.4">𝑒</ci><ci id="alg0.l6.m1.1.1.1.1.3.5.cmml" xref="alg0.l6.m1.1.1.1.1.3.5">𝑚</ci></apply></apply><apply id="alg0.l6.m1.2.2.2.2.cmml" xref="alg0.l6.m1.2.2.2.2"><times id="alg0.l6.m1.2.2.2.2.1.cmml" xref="alg0.l6.m1.2.2.2.2.1"></times><ci id="alg0.l6.m1.2.2.2.2.2.cmml" xref="alg0.l6.m1.2.2.2.2.2">𝑐</ci><ci id="alg0.l6.m1.2.2.2.2.3.cmml" xref="alg0.l6.m1.2.2.2.2.3">𝑙</ci><ci id="alg0.l6.m1.2.2.2.2.4.cmml" xref="alg0.l6.m1.2.2.2.2.4">𝑖</ci><ci id="alg0.l6.m1.2.2.2.2.5.cmml" xref="alg0.l6.m1.2.2.2.2.5">𝑐</ci><ci id="alg0.l6.m1.2.2.2.2.6.cmml" xref="alg0.l6.m1.2.2.2.2.6">𝑘</ci><ci id="alg0.l6.m1.2.2.2.2.7.cmml" xref="alg0.l6.m1.2.2.2.2.7">𝑒</ci><ci id="alg0.l6.m1.2.2.2.2.8.cmml" xref="alg0.l6.m1.2.2.2.2.8">𝑑</ci><ci id="alg0.l6.m1.2.2.2.2.9.cmml" xref="alg0.l6.m1.2.2.2.2.9">𝑈</ci><ci id="alg0.l6.m1.2.2.2.2.10.cmml" xref="alg0.l6.m1.2.2.2.2.10">𝑠</ci><ci id="alg0.l6.m1.2.2.2.2.11.cmml" xref="alg0.l6.m1.2.2.2.2.11">𝑒</ci><ci id="alg0.l6.m1.2.2.2.2.12.cmml" xref="alg0.l6.m1.2.2.2.2.12">𝑟</ci><ci id="alg0.l6.m1.2.2.2.2.13.cmml" xref="alg0.l6.m1.2.2.2.2.13">𝑠</ci><list id="alg0.l6.m1.2.2.2.2.14.1.cmml" xref="alg0.l6.m1.2.2.2.2.14.2.1"></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l6.m1.2c">user\in item.clickedUsers()</annotation></semantics></math> <span id="alg0.l6.2" class="ltx_text ltx_font_bold">do</span>

</div>
<div id="alg0.l7" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7:</span>         <span id="alg0.l7.1" class="ltx_text ltx_font_bold">if</span> <math id="alg0.l7.m1.1" class="ltx_Math" alttext="user\notin seenUsers" display="inline"><semantics id="alg0.l7.m1.1a"><mrow id="alg0.l7.m1.1.1" xref="alg0.l7.m1.1.1.cmml"><mrow id="alg0.l7.m1.1.1.2" xref="alg0.l7.m1.1.1.2.cmml"><mi id="alg0.l7.m1.1.1.2.2" xref="alg0.l7.m1.1.1.2.2.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.2.1" xref="alg0.l7.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.2.3" xref="alg0.l7.m1.1.1.2.3.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.2.1a" xref="alg0.l7.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.2.4" xref="alg0.l7.m1.1.1.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.2.1b" xref="alg0.l7.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.2.5" xref="alg0.l7.m1.1.1.2.5.cmml">r</mi></mrow><mo id="alg0.l7.m1.1.1.1" xref="alg0.l7.m1.1.1.1.cmml">∉</mo><mrow id="alg0.l7.m1.1.1.3" xref="alg0.l7.m1.1.1.3.cmml"><mi id="alg0.l7.m1.1.1.3.2" xref="alg0.l7.m1.1.1.3.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.3.1" xref="alg0.l7.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.3.3" xref="alg0.l7.m1.1.1.3.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.3.1a" xref="alg0.l7.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.3.4" xref="alg0.l7.m1.1.1.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.3.1b" xref="alg0.l7.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.3.5" xref="alg0.l7.m1.1.1.3.5.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.3.1c" xref="alg0.l7.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.3.6" xref="alg0.l7.m1.1.1.3.6.cmml">U</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.3.1d" xref="alg0.l7.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.3.7" xref="alg0.l7.m1.1.1.3.7.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.3.1e" xref="alg0.l7.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.3.8" xref="alg0.l7.m1.1.1.3.8.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.3.1f" xref="alg0.l7.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.3.9" xref="alg0.l7.m1.1.1.3.9.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l7.m1.1.1.3.1g" xref="alg0.l7.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l7.m1.1.1.3.10" xref="alg0.l7.m1.1.1.3.10.cmml">s</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l7.m1.1b"><apply id="alg0.l7.m1.1.1.cmml" xref="alg0.l7.m1.1.1"><notin id="alg0.l7.m1.1.1.1.cmml" xref="alg0.l7.m1.1.1.1"></notin><apply id="alg0.l7.m1.1.1.2.cmml" xref="alg0.l7.m1.1.1.2"><times id="alg0.l7.m1.1.1.2.1.cmml" xref="alg0.l7.m1.1.1.2.1"></times><ci id="alg0.l7.m1.1.1.2.2.cmml" xref="alg0.l7.m1.1.1.2.2">𝑢</ci><ci id="alg0.l7.m1.1.1.2.3.cmml" xref="alg0.l7.m1.1.1.2.3">𝑠</ci><ci id="alg0.l7.m1.1.1.2.4.cmml" xref="alg0.l7.m1.1.1.2.4">𝑒</ci><ci id="alg0.l7.m1.1.1.2.5.cmml" xref="alg0.l7.m1.1.1.2.5">𝑟</ci></apply><apply id="alg0.l7.m1.1.1.3.cmml" xref="alg0.l7.m1.1.1.3"><times id="alg0.l7.m1.1.1.3.1.cmml" xref="alg0.l7.m1.1.1.3.1"></times><ci id="alg0.l7.m1.1.1.3.2.cmml" xref="alg0.l7.m1.1.1.3.2">𝑠</ci><ci id="alg0.l7.m1.1.1.3.3.cmml" xref="alg0.l7.m1.1.1.3.3">𝑒</ci><ci id="alg0.l7.m1.1.1.3.4.cmml" xref="alg0.l7.m1.1.1.3.4">𝑒</ci><ci id="alg0.l7.m1.1.1.3.5.cmml" xref="alg0.l7.m1.1.1.3.5">𝑛</ci><ci id="alg0.l7.m1.1.1.3.6.cmml" xref="alg0.l7.m1.1.1.3.6">𝑈</ci><ci id="alg0.l7.m1.1.1.3.7.cmml" xref="alg0.l7.m1.1.1.3.7">𝑠</ci><ci id="alg0.l7.m1.1.1.3.8.cmml" xref="alg0.l7.m1.1.1.3.8">𝑒</ci><ci id="alg0.l7.m1.1.1.3.9.cmml" xref="alg0.l7.m1.1.1.3.9">𝑟</ci><ci id="alg0.l7.m1.1.1.3.10.cmml" xref="alg0.l7.m1.1.1.3.10">𝑠</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l7.m1.1c">user\notin seenUsers</annotation></semantics></math> <span id="alg0.l7.2" class="ltx_text ltx_font_bold">then</span>

</div>
<div id="alg0.l8" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8:</span>              <math id="alg0.l8.m1.1" class="ltx_Math" alttext="r\leftarrow random()" display="inline"><semantics id="alg0.l8.m1.1a"><mrow id="alg0.l8.m1.1.1" xref="alg0.l8.m1.1.1.cmml"><mi id="alg0.l8.m1.1.1.2" xref="alg0.l8.m1.1.1.2.cmml">r</mi><mo stretchy="false" id="alg0.l8.m1.1.1.1" xref="alg0.l8.m1.1.1.1.cmml">←</mo><mrow id="alg0.l8.m1.1.1.3" xref="alg0.l8.m1.1.1.3.cmml"><mi id="alg0.l8.m1.1.1.3.2" xref="alg0.l8.m1.1.1.3.2.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l8.m1.1.1.3.1" xref="alg0.l8.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l8.m1.1.1.3.3" xref="alg0.l8.m1.1.1.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l8.m1.1.1.3.1a" xref="alg0.l8.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l8.m1.1.1.3.4" xref="alg0.l8.m1.1.1.3.4.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l8.m1.1.1.3.1b" xref="alg0.l8.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l8.m1.1.1.3.5" xref="alg0.l8.m1.1.1.3.5.cmml">d</mi><mo lspace="0em" rspace="0em" id="alg0.l8.m1.1.1.3.1c" xref="alg0.l8.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l8.m1.1.1.3.6" xref="alg0.l8.m1.1.1.3.6.cmml">o</mi><mo lspace="0em" rspace="0em" id="alg0.l8.m1.1.1.3.1d" xref="alg0.l8.m1.1.1.3.1.cmml">​</mo><mi id="alg0.l8.m1.1.1.3.7" xref="alg0.l8.m1.1.1.3.7.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l8.m1.1.1.3.1e" xref="alg0.l8.m1.1.1.3.1.cmml">​</mo><mrow id="alg0.l8.m1.1.1.3.8.2" xref="alg0.l8.m1.1.1.3.cmml"><mo stretchy="false" id="alg0.l8.m1.1.1.3.8.2.1" xref="alg0.l8.m1.1.1.3.8.1.cmml">(</mo><mo stretchy="false" id="alg0.l8.m1.1.1.3.8.2.2" xref="alg0.l8.m1.1.1.3.8.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l8.m1.1b"><apply id="alg0.l8.m1.1.1.cmml" xref="alg0.l8.m1.1.1"><ci id="alg0.l8.m1.1.1.1.cmml" xref="alg0.l8.m1.1.1.1">←</ci><ci id="alg0.l8.m1.1.1.2.cmml" xref="alg0.l8.m1.1.1.2">𝑟</ci><apply id="alg0.l8.m1.1.1.3.cmml" xref="alg0.l8.m1.1.1.3"><times id="alg0.l8.m1.1.1.3.1.cmml" xref="alg0.l8.m1.1.1.3.1"></times><ci id="alg0.l8.m1.1.1.3.2.cmml" xref="alg0.l8.m1.1.1.3.2">𝑟</ci><ci id="alg0.l8.m1.1.1.3.3.cmml" xref="alg0.l8.m1.1.1.3.3">𝑎</ci><ci id="alg0.l8.m1.1.1.3.4.cmml" xref="alg0.l8.m1.1.1.3.4">𝑛</ci><ci id="alg0.l8.m1.1.1.3.5.cmml" xref="alg0.l8.m1.1.1.3.5">𝑑</ci><ci id="alg0.l8.m1.1.1.3.6.cmml" xref="alg0.l8.m1.1.1.3.6">𝑜</ci><ci id="alg0.l8.m1.1.1.3.7.cmml" xref="alg0.l8.m1.1.1.3.7">𝑚</ci><list id="alg0.l8.m1.1.1.3.8.1.cmml" xref="alg0.l8.m1.1.1.3.8.2.1"></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l8.m1.1c">r\leftarrow random()</annotation></semantics></math>

</div>
<div id="alg0.l9" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9:</span>              <span id="alg0.l9.1" class="ltx_text ltx_font_bold">if</span> <math id="alg0.l9.m1.1" class="ltx_Math" alttext="r&lt;p_{large}" display="inline"><semantics id="alg0.l9.m1.1a"><mrow id="alg0.l9.m1.1.1" xref="alg0.l9.m1.1.1.cmml"><mi id="alg0.l9.m1.1.1.2" xref="alg0.l9.m1.1.1.2.cmml">r</mi><mo id="alg0.l9.m1.1.1.1" xref="alg0.l9.m1.1.1.1.cmml">&lt;</mo><msub id="alg0.l9.m1.1.1.3" xref="alg0.l9.m1.1.1.3.cmml"><mi id="alg0.l9.m1.1.1.3.2" xref="alg0.l9.m1.1.1.3.2.cmml">p</mi><mrow id="alg0.l9.m1.1.1.3.3" xref="alg0.l9.m1.1.1.3.3.cmml"><mi id="alg0.l9.m1.1.1.3.3.2" xref="alg0.l9.m1.1.1.3.3.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m1.1.1.3.3.1" xref="alg0.l9.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l9.m1.1.1.3.3.3" xref="alg0.l9.m1.1.1.3.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m1.1.1.3.3.1a" xref="alg0.l9.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l9.m1.1.1.3.3.4" xref="alg0.l9.m1.1.1.3.3.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m1.1.1.3.3.1b" xref="alg0.l9.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l9.m1.1.1.3.3.5" xref="alg0.l9.m1.1.1.3.3.5.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m1.1.1.3.3.1c" xref="alg0.l9.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l9.m1.1.1.3.3.6" xref="alg0.l9.m1.1.1.3.3.6.cmml">e</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="alg0.l9.m1.1b"><apply id="alg0.l9.m1.1.1.cmml" xref="alg0.l9.m1.1.1"><lt id="alg0.l9.m1.1.1.1.cmml" xref="alg0.l9.m1.1.1.1"></lt><ci id="alg0.l9.m1.1.1.2.cmml" xref="alg0.l9.m1.1.1.2">𝑟</ci><apply id="alg0.l9.m1.1.1.3.cmml" xref="alg0.l9.m1.1.1.3"><csymbol cd="ambiguous" id="alg0.l9.m1.1.1.3.1.cmml" xref="alg0.l9.m1.1.1.3">subscript</csymbol><ci id="alg0.l9.m1.1.1.3.2.cmml" xref="alg0.l9.m1.1.1.3.2">𝑝</ci><apply id="alg0.l9.m1.1.1.3.3.cmml" xref="alg0.l9.m1.1.1.3.3"><times id="alg0.l9.m1.1.1.3.3.1.cmml" xref="alg0.l9.m1.1.1.3.3.1"></times><ci id="alg0.l9.m1.1.1.3.3.2.cmml" xref="alg0.l9.m1.1.1.3.3.2">𝑙</ci><ci id="alg0.l9.m1.1.1.3.3.3.cmml" xref="alg0.l9.m1.1.1.3.3.3">𝑎</ci><ci id="alg0.l9.m1.1.1.3.3.4.cmml" xref="alg0.l9.m1.1.1.3.3.4">𝑟</ci><ci id="alg0.l9.m1.1.1.3.3.5.cmml" xref="alg0.l9.m1.1.1.3.3.5">𝑔</ci><ci id="alg0.l9.m1.1.1.3.3.6.cmml" xref="alg0.l9.m1.1.1.3.3.6">𝑒</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l9.m1.1c">r&lt;p_{large}</annotation></semantics></math> <span id="alg0.l9.2" class="ltx_text ltx_font_bold">then</span> <math id="alg0.l9.m2.1" class="ltx_Math" alttext="tier_{small}\leftarrow tier_{small}\cup user" display="inline"><semantics id="alg0.l9.m2.1a"><mrow id="alg0.l9.m2.1.1" xref="alg0.l9.m2.1.1.cmml"><mrow id="alg0.l9.m2.1.1.2" xref="alg0.l9.m2.1.1.2.cmml"><mi id="alg0.l9.m2.1.1.2.2" xref="alg0.l9.m2.1.1.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.2.1" xref="alg0.l9.m2.1.1.2.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.2.3" xref="alg0.l9.m2.1.1.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.2.1a" xref="alg0.l9.m2.1.1.2.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.2.4" xref="alg0.l9.m2.1.1.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.2.1b" xref="alg0.l9.m2.1.1.2.1.cmml">​</mo><msub id="alg0.l9.m2.1.1.2.5" xref="alg0.l9.m2.1.1.2.5.cmml"><mi id="alg0.l9.m2.1.1.2.5.2" xref="alg0.l9.m2.1.1.2.5.2.cmml">r</mi><mrow id="alg0.l9.m2.1.1.2.5.3" xref="alg0.l9.m2.1.1.2.5.3.cmml"><mi id="alg0.l9.m2.1.1.2.5.3.2" xref="alg0.l9.m2.1.1.2.5.3.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.2.5.3.1" xref="alg0.l9.m2.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.2.5.3.3" xref="alg0.l9.m2.1.1.2.5.3.3.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.2.5.3.1a" xref="alg0.l9.m2.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.2.5.3.4" xref="alg0.l9.m2.1.1.2.5.3.4.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.2.5.3.1b" xref="alg0.l9.m2.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.2.5.3.5" xref="alg0.l9.m2.1.1.2.5.3.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.2.5.3.1c" xref="alg0.l9.m2.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.2.5.3.6" xref="alg0.l9.m2.1.1.2.5.3.6.cmml">l</mi></mrow></msub></mrow><mo stretchy="false" id="alg0.l9.m2.1.1.1" xref="alg0.l9.m2.1.1.1.cmml">←</mo><mrow id="alg0.l9.m2.1.1.3" xref="alg0.l9.m2.1.1.3.cmml"><mrow id="alg0.l9.m2.1.1.3.2" xref="alg0.l9.m2.1.1.3.2.cmml"><mi id="alg0.l9.m2.1.1.3.2.2" xref="alg0.l9.m2.1.1.3.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.2.1" xref="alg0.l9.m2.1.1.3.2.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.2.3" xref="alg0.l9.m2.1.1.3.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.2.1a" xref="alg0.l9.m2.1.1.3.2.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.2.4" xref="alg0.l9.m2.1.1.3.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.2.1b" xref="alg0.l9.m2.1.1.3.2.1.cmml">​</mo><msub id="alg0.l9.m2.1.1.3.2.5" xref="alg0.l9.m2.1.1.3.2.5.cmml"><mi id="alg0.l9.m2.1.1.3.2.5.2" xref="alg0.l9.m2.1.1.3.2.5.2.cmml">r</mi><mrow id="alg0.l9.m2.1.1.3.2.5.3" xref="alg0.l9.m2.1.1.3.2.5.3.cmml"><mi id="alg0.l9.m2.1.1.3.2.5.3.2" xref="alg0.l9.m2.1.1.3.2.5.3.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.2.5.3.1" xref="alg0.l9.m2.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.2.5.3.3" xref="alg0.l9.m2.1.1.3.2.5.3.3.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.2.5.3.1a" xref="alg0.l9.m2.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.2.5.3.4" xref="alg0.l9.m2.1.1.3.2.5.3.4.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.2.5.3.1b" xref="alg0.l9.m2.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.2.5.3.5" xref="alg0.l9.m2.1.1.3.2.5.3.5.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.2.5.3.1c" xref="alg0.l9.m2.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.2.5.3.6" xref="alg0.l9.m2.1.1.3.2.5.3.6.cmml">l</mi></mrow></msub></mrow><mo id="alg0.l9.m2.1.1.3.1" xref="alg0.l9.m2.1.1.3.1.cmml">∪</mo><mrow id="alg0.l9.m2.1.1.3.3" xref="alg0.l9.m2.1.1.3.3.cmml"><mi id="alg0.l9.m2.1.1.3.3.2" xref="alg0.l9.m2.1.1.3.3.2.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.3.1" xref="alg0.l9.m2.1.1.3.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.3.3" xref="alg0.l9.m2.1.1.3.3.3.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.3.1a" xref="alg0.l9.m2.1.1.3.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.3.4" xref="alg0.l9.m2.1.1.3.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l9.m2.1.1.3.3.1b" xref="alg0.l9.m2.1.1.3.3.1.cmml">​</mo><mi id="alg0.l9.m2.1.1.3.3.5" xref="alg0.l9.m2.1.1.3.3.5.cmml">r</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l9.m2.1b"><apply id="alg0.l9.m2.1.1.cmml" xref="alg0.l9.m2.1.1"><ci id="alg0.l9.m2.1.1.1.cmml" xref="alg0.l9.m2.1.1.1">←</ci><apply id="alg0.l9.m2.1.1.2.cmml" xref="alg0.l9.m2.1.1.2"><times id="alg0.l9.m2.1.1.2.1.cmml" xref="alg0.l9.m2.1.1.2.1"></times><ci id="alg0.l9.m2.1.1.2.2.cmml" xref="alg0.l9.m2.1.1.2.2">𝑡</ci><ci id="alg0.l9.m2.1.1.2.3.cmml" xref="alg0.l9.m2.1.1.2.3">𝑖</ci><ci id="alg0.l9.m2.1.1.2.4.cmml" xref="alg0.l9.m2.1.1.2.4">𝑒</ci><apply id="alg0.l9.m2.1.1.2.5.cmml" xref="alg0.l9.m2.1.1.2.5"><csymbol cd="ambiguous" id="alg0.l9.m2.1.1.2.5.1.cmml" xref="alg0.l9.m2.1.1.2.5">subscript</csymbol><ci id="alg0.l9.m2.1.1.2.5.2.cmml" xref="alg0.l9.m2.1.1.2.5.2">𝑟</ci><apply id="alg0.l9.m2.1.1.2.5.3.cmml" xref="alg0.l9.m2.1.1.2.5.3"><times id="alg0.l9.m2.1.1.2.5.3.1.cmml" xref="alg0.l9.m2.1.1.2.5.3.1"></times><ci id="alg0.l9.m2.1.1.2.5.3.2.cmml" xref="alg0.l9.m2.1.1.2.5.3.2">𝑠</ci><ci id="alg0.l9.m2.1.1.2.5.3.3.cmml" xref="alg0.l9.m2.1.1.2.5.3.3">𝑚</ci><ci id="alg0.l9.m2.1.1.2.5.3.4.cmml" xref="alg0.l9.m2.1.1.2.5.3.4">𝑎</ci><ci id="alg0.l9.m2.1.1.2.5.3.5.cmml" xref="alg0.l9.m2.1.1.2.5.3.5">𝑙</ci><ci id="alg0.l9.m2.1.1.2.5.3.6.cmml" xref="alg0.l9.m2.1.1.2.5.3.6">𝑙</ci></apply></apply></apply><apply id="alg0.l9.m2.1.1.3.cmml" xref="alg0.l9.m2.1.1.3"><union id="alg0.l9.m2.1.1.3.1.cmml" xref="alg0.l9.m2.1.1.3.1"></union><apply id="alg0.l9.m2.1.1.3.2.cmml" xref="alg0.l9.m2.1.1.3.2"><times id="alg0.l9.m2.1.1.3.2.1.cmml" xref="alg0.l9.m2.1.1.3.2.1"></times><ci id="alg0.l9.m2.1.1.3.2.2.cmml" xref="alg0.l9.m2.1.1.3.2.2">𝑡</ci><ci id="alg0.l9.m2.1.1.3.2.3.cmml" xref="alg0.l9.m2.1.1.3.2.3">𝑖</ci><ci id="alg0.l9.m2.1.1.3.2.4.cmml" xref="alg0.l9.m2.1.1.3.2.4">𝑒</ci><apply id="alg0.l9.m2.1.1.3.2.5.cmml" xref="alg0.l9.m2.1.1.3.2.5"><csymbol cd="ambiguous" id="alg0.l9.m2.1.1.3.2.5.1.cmml" xref="alg0.l9.m2.1.1.3.2.5">subscript</csymbol><ci id="alg0.l9.m2.1.1.3.2.5.2.cmml" xref="alg0.l9.m2.1.1.3.2.5.2">𝑟</ci><apply id="alg0.l9.m2.1.1.3.2.5.3.cmml" xref="alg0.l9.m2.1.1.3.2.5.3"><times id="alg0.l9.m2.1.1.3.2.5.3.1.cmml" xref="alg0.l9.m2.1.1.3.2.5.3.1"></times><ci id="alg0.l9.m2.1.1.3.2.5.3.2.cmml" xref="alg0.l9.m2.1.1.3.2.5.3.2">𝑠</ci><ci id="alg0.l9.m2.1.1.3.2.5.3.3.cmml" xref="alg0.l9.m2.1.1.3.2.5.3.3">𝑚</ci><ci id="alg0.l9.m2.1.1.3.2.5.3.4.cmml" xref="alg0.l9.m2.1.1.3.2.5.3.4">𝑎</ci><ci id="alg0.l9.m2.1.1.3.2.5.3.5.cmml" xref="alg0.l9.m2.1.1.3.2.5.3.5">𝑙</ci><ci id="alg0.l9.m2.1.1.3.2.5.3.6.cmml" xref="alg0.l9.m2.1.1.3.2.5.3.6">𝑙</ci></apply></apply></apply><apply id="alg0.l9.m2.1.1.3.3.cmml" xref="alg0.l9.m2.1.1.3.3"><times id="alg0.l9.m2.1.1.3.3.1.cmml" xref="alg0.l9.m2.1.1.3.3.1"></times><ci id="alg0.l9.m2.1.1.3.3.2.cmml" xref="alg0.l9.m2.1.1.3.3.2">𝑢</ci><ci id="alg0.l9.m2.1.1.3.3.3.cmml" xref="alg0.l9.m2.1.1.3.3.3">𝑠</ci><ci id="alg0.l9.m2.1.1.3.3.4.cmml" xref="alg0.l9.m2.1.1.3.3.4">𝑒</ci><ci id="alg0.l9.m2.1.1.3.3.5.cmml" xref="alg0.l9.m2.1.1.3.3.5">𝑟</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l9.m2.1c">tier_{small}\leftarrow tier_{small}\cup user</annotation></semantics></math>

</div>
<div id="alg0.l10" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10:</span>              <span id="alg0.l10.1" class="ltx_text ltx_font_bold">else</span> <span id="alg0.l10.2" class="ltx_text ltx_font_bold">if</span> <math id="alg0.l10.m1.1" class="ltx_Math" alttext="p_{large}\leq r&lt;p_{large}+p_{mid}" display="inline"><semantics id="alg0.l10.m1.1a"><mrow id="alg0.l10.m1.1.1" xref="alg0.l10.m1.1.1.cmml"><msub id="alg0.l10.m1.1.1.2" xref="alg0.l10.m1.1.1.2.cmml"><mi id="alg0.l10.m1.1.1.2.2" xref="alg0.l10.m1.1.1.2.2.cmml">p</mi><mrow id="alg0.l10.m1.1.1.2.3" xref="alg0.l10.m1.1.1.2.3.cmml"><mi id="alg0.l10.m1.1.1.2.3.2" xref="alg0.l10.m1.1.1.2.3.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.2.3.1" xref="alg0.l10.m1.1.1.2.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.2.3.3" xref="alg0.l10.m1.1.1.2.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.2.3.1a" xref="alg0.l10.m1.1.1.2.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.2.3.4" xref="alg0.l10.m1.1.1.2.3.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.2.3.1b" xref="alg0.l10.m1.1.1.2.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.2.3.5" xref="alg0.l10.m1.1.1.2.3.5.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.2.3.1c" xref="alg0.l10.m1.1.1.2.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.2.3.6" xref="alg0.l10.m1.1.1.2.3.6.cmml">e</mi></mrow></msub><mo id="alg0.l10.m1.1.1.3" xref="alg0.l10.m1.1.1.3.cmml">≤</mo><mi id="alg0.l10.m1.1.1.4" xref="alg0.l10.m1.1.1.4.cmml">r</mi><mo id="alg0.l10.m1.1.1.5" xref="alg0.l10.m1.1.1.5.cmml">&lt;</mo><mrow id="alg0.l10.m1.1.1.6" xref="alg0.l10.m1.1.1.6.cmml"><msub id="alg0.l10.m1.1.1.6.2" xref="alg0.l10.m1.1.1.6.2.cmml"><mi id="alg0.l10.m1.1.1.6.2.2" xref="alg0.l10.m1.1.1.6.2.2.cmml">p</mi><mrow id="alg0.l10.m1.1.1.6.2.3" xref="alg0.l10.m1.1.1.6.2.3.cmml"><mi id="alg0.l10.m1.1.1.6.2.3.2" xref="alg0.l10.m1.1.1.6.2.3.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.6.2.3.1" xref="alg0.l10.m1.1.1.6.2.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.6.2.3.3" xref="alg0.l10.m1.1.1.6.2.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.6.2.3.1a" xref="alg0.l10.m1.1.1.6.2.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.6.2.3.4" xref="alg0.l10.m1.1.1.6.2.3.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.6.2.3.1b" xref="alg0.l10.m1.1.1.6.2.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.6.2.3.5" xref="alg0.l10.m1.1.1.6.2.3.5.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.6.2.3.1c" xref="alg0.l10.m1.1.1.6.2.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.6.2.3.6" xref="alg0.l10.m1.1.1.6.2.3.6.cmml">e</mi></mrow></msub><mo id="alg0.l10.m1.1.1.6.1" xref="alg0.l10.m1.1.1.6.1.cmml">+</mo><msub id="alg0.l10.m1.1.1.6.3" xref="alg0.l10.m1.1.1.6.3.cmml"><mi id="alg0.l10.m1.1.1.6.3.2" xref="alg0.l10.m1.1.1.6.3.2.cmml">p</mi><mrow id="alg0.l10.m1.1.1.6.3.3" xref="alg0.l10.m1.1.1.6.3.3.cmml"><mi id="alg0.l10.m1.1.1.6.3.3.2" xref="alg0.l10.m1.1.1.6.3.3.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.6.3.3.1" xref="alg0.l10.m1.1.1.6.3.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.6.3.3.3" xref="alg0.l10.m1.1.1.6.3.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m1.1.1.6.3.3.1a" xref="alg0.l10.m1.1.1.6.3.3.1.cmml">​</mo><mi id="alg0.l10.m1.1.1.6.3.3.4" xref="alg0.l10.m1.1.1.6.3.3.4.cmml">d</mi></mrow></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l10.m1.1b"><apply id="alg0.l10.m1.1.1.cmml" xref="alg0.l10.m1.1.1"><and id="alg0.l10.m1.1.1a.cmml" xref="alg0.l10.m1.1.1"></and><apply id="alg0.l10.m1.1.1b.cmml" xref="alg0.l10.m1.1.1"><leq id="alg0.l10.m1.1.1.3.cmml" xref="alg0.l10.m1.1.1.3"></leq><apply id="alg0.l10.m1.1.1.2.cmml" xref="alg0.l10.m1.1.1.2"><csymbol cd="ambiguous" id="alg0.l10.m1.1.1.2.1.cmml" xref="alg0.l10.m1.1.1.2">subscript</csymbol><ci id="alg0.l10.m1.1.1.2.2.cmml" xref="alg0.l10.m1.1.1.2.2">𝑝</ci><apply id="alg0.l10.m1.1.1.2.3.cmml" xref="alg0.l10.m1.1.1.2.3"><times id="alg0.l10.m1.1.1.2.3.1.cmml" xref="alg0.l10.m1.1.1.2.3.1"></times><ci id="alg0.l10.m1.1.1.2.3.2.cmml" xref="alg0.l10.m1.1.1.2.3.2">𝑙</ci><ci id="alg0.l10.m1.1.1.2.3.3.cmml" xref="alg0.l10.m1.1.1.2.3.3">𝑎</ci><ci id="alg0.l10.m1.1.1.2.3.4.cmml" xref="alg0.l10.m1.1.1.2.3.4">𝑟</ci><ci id="alg0.l10.m1.1.1.2.3.5.cmml" xref="alg0.l10.m1.1.1.2.3.5">𝑔</ci><ci id="alg0.l10.m1.1.1.2.3.6.cmml" xref="alg0.l10.m1.1.1.2.3.6">𝑒</ci></apply></apply><ci id="alg0.l10.m1.1.1.4.cmml" xref="alg0.l10.m1.1.1.4">𝑟</ci></apply><apply id="alg0.l10.m1.1.1c.cmml" xref="alg0.l10.m1.1.1"><lt id="alg0.l10.m1.1.1.5.cmml" xref="alg0.l10.m1.1.1.5"></lt><share href="#alg0.l10.m1.1.1.4.cmml" id="alg0.l10.m1.1.1d.cmml" xref="alg0.l10.m1.1.1"></share><apply id="alg0.l10.m1.1.1.6.cmml" xref="alg0.l10.m1.1.1.6"><plus id="alg0.l10.m1.1.1.6.1.cmml" xref="alg0.l10.m1.1.1.6.1"></plus><apply id="alg0.l10.m1.1.1.6.2.cmml" xref="alg0.l10.m1.1.1.6.2"><csymbol cd="ambiguous" id="alg0.l10.m1.1.1.6.2.1.cmml" xref="alg0.l10.m1.1.1.6.2">subscript</csymbol><ci id="alg0.l10.m1.1.1.6.2.2.cmml" xref="alg0.l10.m1.1.1.6.2.2">𝑝</ci><apply id="alg0.l10.m1.1.1.6.2.3.cmml" xref="alg0.l10.m1.1.1.6.2.3"><times id="alg0.l10.m1.1.1.6.2.3.1.cmml" xref="alg0.l10.m1.1.1.6.2.3.1"></times><ci id="alg0.l10.m1.1.1.6.2.3.2.cmml" xref="alg0.l10.m1.1.1.6.2.3.2">𝑙</ci><ci id="alg0.l10.m1.1.1.6.2.3.3.cmml" xref="alg0.l10.m1.1.1.6.2.3.3">𝑎</ci><ci id="alg0.l10.m1.1.1.6.2.3.4.cmml" xref="alg0.l10.m1.1.1.6.2.3.4">𝑟</ci><ci id="alg0.l10.m1.1.1.6.2.3.5.cmml" xref="alg0.l10.m1.1.1.6.2.3.5">𝑔</ci><ci id="alg0.l10.m1.1.1.6.2.3.6.cmml" xref="alg0.l10.m1.1.1.6.2.3.6">𝑒</ci></apply></apply><apply id="alg0.l10.m1.1.1.6.3.cmml" xref="alg0.l10.m1.1.1.6.3"><csymbol cd="ambiguous" id="alg0.l10.m1.1.1.6.3.1.cmml" xref="alg0.l10.m1.1.1.6.3">subscript</csymbol><ci id="alg0.l10.m1.1.1.6.3.2.cmml" xref="alg0.l10.m1.1.1.6.3.2">𝑝</ci><apply id="alg0.l10.m1.1.1.6.3.3.cmml" xref="alg0.l10.m1.1.1.6.3.3"><times id="alg0.l10.m1.1.1.6.3.3.1.cmml" xref="alg0.l10.m1.1.1.6.3.3.1"></times><ci id="alg0.l10.m1.1.1.6.3.3.2.cmml" xref="alg0.l10.m1.1.1.6.3.3.2">𝑚</ci><ci id="alg0.l10.m1.1.1.6.3.3.3.cmml" xref="alg0.l10.m1.1.1.6.3.3.3">𝑖</ci><ci id="alg0.l10.m1.1.1.6.3.3.4.cmml" xref="alg0.l10.m1.1.1.6.3.3.4">𝑑</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l10.m1.1c">p_{large}\leq r&lt;p_{large}+p_{mid}</annotation></semantics></math>
<span id="alg0.l10.3" class="ltx_text ltx_font_bold">then</span> <math id="alg0.l10.m2.1" class="ltx_Math" alttext="tier_{mid}\leftarrow tier_{mid}\cup user" display="inline"><semantics id="alg0.l10.m2.1a"><mrow id="alg0.l10.m2.1.1" xref="alg0.l10.m2.1.1.cmml"><mrow id="alg0.l10.m2.1.1.2" xref="alg0.l10.m2.1.1.2.cmml"><mi id="alg0.l10.m2.1.1.2.2" xref="alg0.l10.m2.1.1.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.2.1" xref="alg0.l10.m2.1.1.2.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.2.3" xref="alg0.l10.m2.1.1.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.2.1a" xref="alg0.l10.m2.1.1.2.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.2.4" xref="alg0.l10.m2.1.1.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.2.1b" xref="alg0.l10.m2.1.1.2.1.cmml">​</mo><msub id="alg0.l10.m2.1.1.2.5" xref="alg0.l10.m2.1.1.2.5.cmml"><mi id="alg0.l10.m2.1.1.2.5.2" xref="alg0.l10.m2.1.1.2.5.2.cmml">r</mi><mrow id="alg0.l10.m2.1.1.2.5.3" xref="alg0.l10.m2.1.1.2.5.3.cmml"><mi id="alg0.l10.m2.1.1.2.5.3.2" xref="alg0.l10.m2.1.1.2.5.3.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.2.5.3.1" xref="alg0.l10.m2.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.2.5.3.3" xref="alg0.l10.m2.1.1.2.5.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.2.5.3.1a" xref="alg0.l10.m2.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.2.5.3.4" xref="alg0.l10.m2.1.1.2.5.3.4.cmml">d</mi></mrow></msub></mrow><mo stretchy="false" id="alg0.l10.m2.1.1.1" xref="alg0.l10.m2.1.1.1.cmml">←</mo><mrow id="alg0.l10.m2.1.1.3" xref="alg0.l10.m2.1.1.3.cmml"><mrow id="alg0.l10.m2.1.1.3.2" xref="alg0.l10.m2.1.1.3.2.cmml"><mi id="alg0.l10.m2.1.1.3.2.2" xref="alg0.l10.m2.1.1.3.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.3.2.1" xref="alg0.l10.m2.1.1.3.2.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.3.2.3" xref="alg0.l10.m2.1.1.3.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.3.2.1a" xref="alg0.l10.m2.1.1.3.2.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.3.2.4" xref="alg0.l10.m2.1.1.3.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.3.2.1b" xref="alg0.l10.m2.1.1.3.2.1.cmml">​</mo><msub id="alg0.l10.m2.1.1.3.2.5" xref="alg0.l10.m2.1.1.3.2.5.cmml"><mi id="alg0.l10.m2.1.1.3.2.5.2" xref="alg0.l10.m2.1.1.3.2.5.2.cmml">r</mi><mrow id="alg0.l10.m2.1.1.3.2.5.3" xref="alg0.l10.m2.1.1.3.2.5.3.cmml"><mi id="alg0.l10.m2.1.1.3.2.5.3.2" xref="alg0.l10.m2.1.1.3.2.5.3.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.3.2.5.3.1" xref="alg0.l10.m2.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.3.2.5.3.3" xref="alg0.l10.m2.1.1.3.2.5.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.3.2.5.3.1a" xref="alg0.l10.m2.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.3.2.5.3.4" xref="alg0.l10.m2.1.1.3.2.5.3.4.cmml">d</mi></mrow></msub></mrow><mo id="alg0.l10.m2.1.1.3.1" xref="alg0.l10.m2.1.1.3.1.cmml">∪</mo><mrow id="alg0.l10.m2.1.1.3.3" xref="alg0.l10.m2.1.1.3.3.cmml"><mi id="alg0.l10.m2.1.1.3.3.2" xref="alg0.l10.m2.1.1.3.3.2.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.3.3.1" xref="alg0.l10.m2.1.1.3.3.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.3.3.3" xref="alg0.l10.m2.1.1.3.3.3.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.3.3.1a" xref="alg0.l10.m2.1.1.3.3.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.3.3.4" xref="alg0.l10.m2.1.1.3.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l10.m2.1.1.3.3.1b" xref="alg0.l10.m2.1.1.3.3.1.cmml">​</mo><mi id="alg0.l10.m2.1.1.3.3.5" xref="alg0.l10.m2.1.1.3.3.5.cmml">r</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l10.m2.1b"><apply id="alg0.l10.m2.1.1.cmml" xref="alg0.l10.m2.1.1"><ci id="alg0.l10.m2.1.1.1.cmml" xref="alg0.l10.m2.1.1.1">←</ci><apply id="alg0.l10.m2.1.1.2.cmml" xref="alg0.l10.m2.1.1.2"><times id="alg0.l10.m2.1.1.2.1.cmml" xref="alg0.l10.m2.1.1.2.1"></times><ci id="alg0.l10.m2.1.1.2.2.cmml" xref="alg0.l10.m2.1.1.2.2">𝑡</ci><ci id="alg0.l10.m2.1.1.2.3.cmml" xref="alg0.l10.m2.1.1.2.3">𝑖</ci><ci id="alg0.l10.m2.1.1.2.4.cmml" xref="alg0.l10.m2.1.1.2.4">𝑒</ci><apply id="alg0.l10.m2.1.1.2.5.cmml" xref="alg0.l10.m2.1.1.2.5"><csymbol cd="ambiguous" id="alg0.l10.m2.1.1.2.5.1.cmml" xref="alg0.l10.m2.1.1.2.5">subscript</csymbol><ci id="alg0.l10.m2.1.1.2.5.2.cmml" xref="alg0.l10.m2.1.1.2.5.2">𝑟</ci><apply id="alg0.l10.m2.1.1.2.5.3.cmml" xref="alg0.l10.m2.1.1.2.5.3"><times id="alg0.l10.m2.1.1.2.5.3.1.cmml" xref="alg0.l10.m2.1.1.2.5.3.1"></times><ci id="alg0.l10.m2.1.1.2.5.3.2.cmml" xref="alg0.l10.m2.1.1.2.5.3.2">𝑚</ci><ci id="alg0.l10.m2.1.1.2.5.3.3.cmml" xref="alg0.l10.m2.1.1.2.5.3.3">𝑖</ci><ci id="alg0.l10.m2.1.1.2.5.3.4.cmml" xref="alg0.l10.m2.1.1.2.5.3.4">𝑑</ci></apply></apply></apply><apply id="alg0.l10.m2.1.1.3.cmml" xref="alg0.l10.m2.1.1.3"><union id="alg0.l10.m2.1.1.3.1.cmml" xref="alg0.l10.m2.1.1.3.1"></union><apply id="alg0.l10.m2.1.1.3.2.cmml" xref="alg0.l10.m2.1.1.3.2"><times id="alg0.l10.m2.1.1.3.2.1.cmml" xref="alg0.l10.m2.1.1.3.2.1"></times><ci id="alg0.l10.m2.1.1.3.2.2.cmml" xref="alg0.l10.m2.1.1.3.2.2">𝑡</ci><ci id="alg0.l10.m2.1.1.3.2.3.cmml" xref="alg0.l10.m2.1.1.3.2.3">𝑖</ci><ci id="alg0.l10.m2.1.1.3.2.4.cmml" xref="alg0.l10.m2.1.1.3.2.4">𝑒</ci><apply id="alg0.l10.m2.1.1.3.2.5.cmml" xref="alg0.l10.m2.1.1.3.2.5"><csymbol cd="ambiguous" id="alg0.l10.m2.1.1.3.2.5.1.cmml" xref="alg0.l10.m2.1.1.3.2.5">subscript</csymbol><ci id="alg0.l10.m2.1.1.3.2.5.2.cmml" xref="alg0.l10.m2.1.1.3.2.5.2">𝑟</ci><apply id="alg0.l10.m2.1.1.3.2.5.3.cmml" xref="alg0.l10.m2.1.1.3.2.5.3"><times id="alg0.l10.m2.1.1.3.2.5.3.1.cmml" xref="alg0.l10.m2.1.1.3.2.5.3.1"></times><ci id="alg0.l10.m2.1.1.3.2.5.3.2.cmml" xref="alg0.l10.m2.1.1.3.2.5.3.2">𝑚</ci><ci id="alg0.l10.m2.1.1.3.2.5.3.3.cmml" xref="alg0.l10.m2.1.1.3.2.5.3.3">𝑖</ci><ci id="alg0.l10.m2.1.1.3.2.5.3.4.cmml" xref="alg0.l10.m2.1.1.3.2.5.3.4">𝑑</ci></apply></apply></apply><apply id="alg0.l10.m2.1.1.3.3.cmml" xref="alg0.l10.m2.1.1.3.3"><times id="alg0.l10.m2.1.1.3.3.1.cmml" xref="alg0.l10.m2.1.1.3.3.1"></times><ci id="alg0.l10.m2.1.1.3.3.2.cmml" xref="alg0.l10.m2.1.1.3.3.2">𝑢</ci><ci id="alg0.l10.m2.1.1.3.3.3.cmml" xref="alg0.l10.m2.1.1.3.3.3">𝑠</ci><ci id="alg0.l10.m2.1.1.3.3.4.cmml" xref="alg0.l10.m2.1.1.3.3.4">𝑒</ci><ci id="alg0.l10.m2.1.1.3.3.5.cmml" xref="alg0.l10.m2.1.1.3.3.5">𝑟</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l10.m2.1c">tier_{mid}\leftarrow tier_{mid}\cup user</annotation></semantics></math>

</div>
<div id="alg0.l11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11:</span>              <span id="alg0.l11.1" class="ltx_text ltx_font_bold">else</span> <span id="alg0.l11.2" class="ltx_text ltx_font_bold">then</span> <math id="alg0.l11.m1.1" class="ltx_Math" alttext="tier_{large}\leftarrow tier_{large}\cup user" display="inline"><semantics id="alg0.l11.m1.1a"><mrow id="alg0.l11.m1.1.1" xref="alg0.l11.m1.1.1.cmml"><mrow id="alg0.l11.m1.1.1.2" xref="alg0.l11.m1.1.1.2.cmml"><mi id="alg0.l11.m1.1.1.2.2" xref="alg0.l11.m1.1.1.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.2.1" xref="alg0.l11.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.2.3" xref="alg0.l11.m1.1.1.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.2.1a" xref="alg0.l11.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.2.4" xref="alg0.l11.m1.1.1.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.2.1b" xref="alg0.l11.m1.1.1.2.1.cmml">​</mo><msub id="alg0.l11.m1.1.1.2.5" xref="alg0.l11.m1.1.1.2.5.cmml"><mi id="alg0.l11.m1.1.1.2.5.2" xref="alg0.l11.m1.1.1.2.5.2.cmml">r</mi><mrow id="alg0.l11.m1.1.1.2.5.3" xref="alg0.l11.m1.1.1.2.5.3.cmml"><mi id="alg0.l11.m1.1.1.2.5.3.2" xref="alg0.l11.m1.1.1.2.5.3.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.2.5.3.1" xref="alg0.l11.m1.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.2.5.3.3" xref="alg0.l11.m1.1.1.2.5.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.2.5.3.1a" xref="alg0.l11.m1.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.2.5.3.4" xref="alg0.l11.m1.1.1.2.5.3.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.2.5.3.1b" xref="alg0.l11.m1.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.2.5.3.5" xref="alg0.l11.m1.1.1.2.5.3.5.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.2.5.3.1c" xref="alg0.l11.m1.1.1.2.5.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.2.5.3.6" xref="alg0.l11.m1.1.1.2.5.3.6.cmml">e</mi></mrow></msub></mrow><mo stretchy="false" id="alg0.l11.m1.1.1.1" xref="alg0.l11.m1.1.1.1.cmml">←</mo><mrow id="alg0.l11.m1.1.1.3" xref="alg0.l11.m1.1.1.3.cmml"><mrow id="alg0.l11.m1.1.1.3.2" xref="alg0.l11.m1.1.1.3.2.cmml"><mi id="alg0.l11.m1.1.1.3.2.2" xref="alg0.l11.m1.1.1.3.2.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.2.1" xref="alg0.l11.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.2.3" xref="alg0.l11.m1.1.1.3.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.2.1a" xref="alg0.l11.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.2.4" xref="alg0.l11.m1.1.1.3.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.2.1b" xref="alg0.l11.m1.1.1.3.2.1.cmml">​</mo><msub id="alg0.l11.m1.1.1.3.2.5" xref="alg0.l11.m1.1.1.3.2.5.cmml"><mi id="alg0.l11.m1.1.1.3.2.5.2" xref="alg0.l11.m1.1.1.3.2.5.2.cmml">r</mi><mrow id="alg0.l11.m1.1.1.3.2.5.3" xref="alg0.l11.m1.1.1.3.2.5.3.cmml"><mi id="alg0.l11.m1.1.1.3.2.5.3.2" xref="alg0.l11.m1.1.1.3.2.5.3.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.2.5.3.1" xref="alg0.l11.m1.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.2.5.3.3" xref="alg0.l11.m1.1.1.3.2.5.3.3.cmml">a</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.2.5.3.1a" xref="alg0.l11.m1.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.2.5.3.4" xref="alg0.l11.m1.1.1.3.2.5.3.4.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.2.5.3.1b" xref="alg0.l11.m1.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.2.5.3.5" xref="alg0.l11.m1.1.1.3.2.5.3.5.cmml">g</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.2.5.3.1c" xref="alg0.l11.m1.1.1.3.2.5.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.2.5.3.6" xref="alg0.l11.m1.1.1.3.2.5.3.6.cmml">e</mi></mrow></msub></mrow><mo id="alg0.l11.m1.1.1.3.1" xref="alg0.l11.m1.1.1.3.1.cmml">∪</mo><mrow id="alg0.l11.m1.1.1.3.3" xref="alg0.l11.m1.1.1.3.3.cmml"><mi id="alg0.l11.m1.1.1.3.3.2" xref="alg0.l11.m1.1.1.3.3.2.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.3.1" xref="alg0.l11.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.3.3" xref="alg0.l11.m1.1.1.3.3.3.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.3.1a" xref="alg0.l11.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.3.4" xref="alg0.l11.m1.1.1.3.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l11.m1.1.1.3.3.1b" xref="alg0.l11.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l11.m1.1.1.3.3.5" xref="alg0.l11.m1.1.1.3.3.5.cmml">r</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l11.m1.1b"><apply id="alg0.l11.m1.1.1.cmml" xref="alg0.l11.m1.1.1"><ci id="alg0.l11.m1.1.1.1.cmml" xref="alg0.l11.m1.1.1.1">←</ci><apply id="alg0.l11.m1.1.1.2.cmml" xref="alg0.l11.m1.1.1.2"><times id="alg0.l11.m1.1.1.2.1.cmml" xref="alg0.l11.m1.1.1.2.1"></times><ci id="alg0.l11.m1.1.1.2.2.cmml" xref="alg0.l11.m1.1.1.2.2">𝑡</ci><ci id="alg0.l11.m1.1.1.2.3.cmml" xref="alg0.l11.m1.1.1.2.3">𝑖</ci><ci id="alg0.l11.m1.1.1.2.4.cmml" xref="alg0.l11.m1.1.1.2.4">𝑒</ci><apply id="alg0.l11.m1.1.1.2.5.cmml" xref="alg0.l11.m1.1.1.2.5"><csymbol cd="ambiguous" id="alg0.l11.m1.1.1.2.5.1.cmml" xref="alg0.l11.m1.1.1.2.5">subscript</csymbol><ci id="alg0.l11.m1.1.1.2.5.2.cmml" xref="alg0.l11.m1.1.1.2.5.2">𝑟</ci><apply id="alg0.l11.m1.1.1.2.5.3.cmml" xref="alg0.l11.m1.1.1.2.5.3"><times id="alg0.l11.m1.1.1.2.5.3.1.cmml" xref="alg0.l11.m1.1.1.2.5.3.1"></times><ci id="alg0.l11.m1.1.1.2.5.3.2.cmml" xref="alg0.l11.m1.1.1.2.5.3.2">𝑙</ci><ci id="alg0.l11.m1.1.1.2.5.3.3.cmml" xref="alg0.l11.m1.1.1.2.5.3.3">𝑎</ci><ci id="alg0.l11.m1.1.1.2.5.3.4.cmml" xref="alg0.l11.m1.1.1.2.5.3.4">𝑟</ci><ci id="alg0.l11.m1.1.1.2.5.3.5.cmml" xref="alg0.l11.m1.1.1.2.5.3.5">𝑔</ci><ci id="alg0.l11.m1.1.1.2.5.3.6.cmml" xref="alg0.l11.m1.1.1.2.5.3.6">𝑒</ci></apply></apply></apply><apply id="alg0.l11.m1.1.1.3.cmml" xref="alg0.l11.m1.1.1.3"><union id="alg0.l11.m1.1.1.3.1.cmml" xref="alg0.l11.m1.1.1.3.1"></union><apply id="alg0.l11.m1.1.1.3.2.cmml" xref="alg0.l11.m1.1.1.3.2"><times id="alg0.l11.m1.1.1.3.2.1.cmml" xref="alg0.l11.m1.1.1.3.2.1"></times><ci id="alg0.l11.m1.1.1.3.2.2.cmml" xref="alg0.l11.m1.1.1.3.2.2">𝑡</ci><ci id="alg0.l11.m1.1.1.3.2.3.cmml" xref="alg0.l11.m1.1.1.3.2.3">𝑖</ci><ci id="alg0.l11.m1.1.1.3.2.4.cmml" xref="alg0.l11.m1.1.1.3.2.4">𝑒</ci><apply id="alg0.l11.m1.1.1.3.2.5.cmml" xref="alg0.l11.m1.1.1.3.2.5"><csymbol cd="ambiguous" id="alg0.l11.m1.1.1.3.2.5.1.cmml" xref="alg0.l11.m1.1.1.3.2.5">subscript</csymbol><ci id="alg0.l11.m1.1.1.3.2.5.2.cmml" xref="alg0.l11.m1.1.1.3.2.5.2">𝑟</ci><apply id="alg0.l11.m1.1.1.3.2.5.3.cmml" xref="alg0.l11.m1.1.1.3.2.5.3"><times id="alg0.l11.m1.1.1.3.2.5.3.1.cmml" xref="alg0.l11.m1.1.1.3.2.5.3.1"></times><ci id="alg0.l11.m1.1.1.3.2.5.3.2.cmml" xref="alg0.l11.m1.1.1.3.2.5.3.2">𝑙</ci><ci id="alg0.l11.m1.1.1.3.2.5.3.3.cmml" xref="alg0.l11.m1.1.1.3.2.5.3.3">𝑎</ci><ci id="alg0.l11.m1.1.1.3.2.5.3.4.cmml" xref="alg0.l11.m1.1.1.3.2.5.3.4">𝑟</ci><ci id="alg0.l11.m1.1.1.3.2.5.3.5.cmml" xref="alg0.l11.m1.1.1.3.2.5.3.5">𝑔</ci><ci id="alg0.l11.m1.1.1.3.2.5.3.6.cmml" xref="alg0.l11.m1.1.1.3.2.5.3.6">𝑒</ci></apply></apply></apply><apply id="alg0.l11.m1.1.1.3.3.cmml" xref="alg0.l11.m1.1.1.3.3"><times id="alg0.l11.m1.1.1.3.3.1.cmml" xref="alg0.l11.m1.1.1.3.3.1"></times><ci id="alg0.l11.m1.1.1.3.3.2.cmml" xref="alg0.l11.m1.1.1.3.3.2">𝑢</ci><ci id="alg0.l11.m1.1.1.3.3.3.cmml" xref="alg0.l11.m1.1.1.3.3.3">𝑠</ci><ci id="alg0.l11.m1.1.1.3.3.4.cmml" xref="alg0.l11.m1.1.1.3.3.4">𝑒</ci><ci id="alg0.l11.m1.1.1.3.3.5.cmml" xref="alg0.l11.m1.1.1.3.3.5">𝑟</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l11.m1.1c">tier_{large}\leftarrow tier_{large}\cup user</annotation></semantics></math>

</div>
<div id="alg0.l12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12:</span>              <math id="alg0.l12.m1.1" class="ltx_Math" alttext="seenUsers\leftarrow seenUsers\cup user" display="inline"><semantics id="alg0.l12.m1.1a"><mrow id="alg0.l12.m1.1.1" xref="alg0.l12.m1.1.1.cmml"><mrow id="alg0.l12.m1.1.1.2" xref="alg0.l12.m1.1.1.2.cmml"><mi id="alg0.l12.m1.1.1.2.2" xref="alg0.l12.m1.1.1.2.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.2.1" xref="alg0.l12.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.2.3" xref="alg0.l12.m1.1.1.2.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.2.1a" xref="alg0.l12.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.2.4" xref="alg0.l12.m1.1.1.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.2.1b" xref="alg0.l12.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.2.5" xref="alg0.l12.m1.1.1.2.5.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.2.1c" xref="alg0.l12.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.2.6" xref="alg0.l12.m1.1.1.2.6.cmml">U</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.2.1d" xref="alg0.l12.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.2.7" xref="alg0.l12.m1.1.1.2.7.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.2.1e" xref="alg0.l12.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.2.8" xref="alg0.l12.m1.1.1.2.8.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.2.1f" xref="alg0.l12.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.2.9" xref="alg0.l12.m1.1.1.2.9.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.2.1g" xref="alg0.l12.m1.1.1.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.2.10" xref="alg0.l12.m1.1.1.2.10.cmml">s</mi></mrow><mo stretchy="false" id="alg0.l12.m1.1.1.1" xref="alg0.l12.m1.1.1.1.cmml">←</mo><mrow id="alg0.l12.m1.1.1.3" xref="alg0.l12.m1.1.1.3.cmml"><mrow id="alg0.l12.m1.1.1.3.2" xref="alg0.l12.m1.1.1.3.2.cmml"><mi id="alg0.l12.m1.1.1.3.2.2" xref="alg0.l12.m1.1.1.3.2.2.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.2.1" xref="alg0.l12.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.2.3" xref="alg0.l12.m1.1.1.3.2.3.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.2.1a" xref="alg0.l12.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.2.4" xref="alg0.l12.m1.1.1.3.2.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.2.1b" xref="alg0.l12.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.2.5" xref="alg0.l12.m1.1.1.3.2.5.cmml">n</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.2.1c" xref="alg0.l12.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.2.6" xref="alg0.l12.m1.1.1.3.2.6.cmml">U</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.2.1d" xref="alg0.l12.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.2.7" xref="alg0.l12.m1.1.1.3.2.7.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.2.1e" xref="alg0.l12.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.2.8" xref="alg0.l12.m1.1.1.3.2.8.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.2.1f" xref="alg0.l12.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.2.9" xref="alg0.l12.m1.1.1.3.2.9.cmml">r</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.2.1g" xref="alg0.l12.m1.1.1.3.2.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.2.10" xref="alg0.l12.m1.1.1.3.2.10.cmml">s</mi></mrow><mo id="alg0.l12.m1.1.1.3.1" xref="alg0.l12.m1.1.1.3.1.cmml">∪</mo><mrow id="alg0.l12.m1.1.1.3.3" xref="alg0.l12.m1.1.1.3.3.cmml"><mi id="alg0.l12.m1.1.1.3.3.2" xref="alg0.l12.m1.1.1.3.3.2.cmml">u</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.3.1" xref="alg0.l12.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.3.3" xref="alg0.l12.m1.1.1.3.3.3.cmml">s</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.3.1a" xref="alg0.l12.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.3.4" xref="alg0.l12.m1.1.1.3.3.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="alg0.l12.m1.1.1.3.3.1b" xref="alg0.l12.m1.1.1.3.3.1.cmml">​</mo><mi id="alg0.l12.m1.1.1.3.3.5" xref="alg0.l12.m1.1.1.3.3.5.cmml">r</mi></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg0.l12.m1.1b"><apply id="alg0.l12.m1.1.1.cmml" xref="alg0.l12.m1.1.1"><ci id="alg0.l12.m1.1.1.1.cmml" xref="alg0.l12.m1.1.1.1">←</ci><apply id="alg0.l12.m1.1.1.2.cmml" xref="alg0.l12.m1.1.1.2"><times id="alg0.l12.m1.1.1.2.1.cmml" xref="alg0.l12.m1.1.1.2.1"></times><ci id="alg0.l12.m1.1.1.2.2.cmml" xref="alg0.l12.m1.1.1.2.2">𝑠</ci><ci id="alg0.l12.m1.1.1.2.3.cmml" xref="alg0.l12.m1.1.1.2.3">𝑒</ci><ci id="alg0.l12.m1.1.1.2.4.cmml" xref="alg0.l12.m1.1.1.2.4">𝑒</ci><ci id="alg0.l12.m1.1.1.2.5.cmml" xref="alg0.l12.m1.1.1.2.5">𝑛</ci><ci id="alg0.l12.m1.1.1.2.6.cmml" xref="alg0.l12.m1.1.1.2.6">𝑈</ci><ci id="alg0.l12.m1.1.1.2.7.cmml" xref="alg0.l12.m1.1.1.2.7">𝑠</ci><ci id="alg0.l12.m1.1.1.2.8.cmml" xref="alg0.l12.m1.1.1.2.8">𝑒</ci><ci id="alg0.l12.m1.1.1.2.9.cmml" xref="alg0.l12.m1.1.1.2.9">𝑟</ci><ci id="alg0.l12.m1.1.1.2.10.cmml" xref="alg0.l12.m1.1.1.2.10">𝑠</ci></apply><apply id="alg0.l12.m1.1.1.3.cmml" xref="alg0.l12.m1.1.1.3"><union id="alg0.l12.m1.1.1.3.1.cmml" xref="alg0.l12.m1.1.1.3.1"></union><apply id="alg0.l12.m1.1.1.3.2.cmml" xref="alg0.l12.m1.1.1.3.2"><times id="alg0.l12.m1.1.1.3.2.1.cmml" xref="alg0.l12.m1.1.1.3.2.1"></times><ci id="alg0.l12.m1.1.1.3.2.2.cmml" xref="alg0.l12.m1.1.1.3.2.2">𝑠</ci><ci id="alg0.l12.m1.1.1.3.2.3.cmml" xref="alg0.l12.m1.1.1.3.2.3">𝑒</ci><ci id="alg0.l12.m1.1.1.3.2.4.cmml" xref="alg0.l12.m1.1.1.3.2.4">𝑒</ci><ci id="alg0.l12.m1.1.1.3.2.5.cmml" xref="alg0.l12.m1.1.1.3.2.5">𝑛</ci><ci id="alg0.l12.m1.1.1.3.2.6.cmml" xref="alg0.l12.m1.1.1.3.2.6">𝑈</ci><ci id="alg0.l12.m1.1.1.3.2.7.cmml" xref="alg0.l12.m1.1.1.3.2.7">𝑠</ci><ci id="alg0.l12.m1.1.1.3.2.8.cmml" xref="alg0.l12.m1.1.1.3.2.8">𝑒</ci><ci id="alg0.l12.m1.1.1.3.2.9.cmml" xref="alg0.l12.m1.1.1.3.2.9">𝑟</ci><ci id="alg0.l12.m1.1.1.3.2.10.cmml" xref="alg0.l12.m1.1.1.3.2.10">𝑠</ci></apply><apply id="alg0.l12.m1.1.1.3.3.cmml" xref="alg0.l12.m1.1.1.3.3"><times id="alg0.l12.m1.1.1.3.3.1.cmml" xref="alg0.l12.m1.1.1.3.3.1"></times><ci id="alg0.l12.m1.1.1.3.3.2.cmml" xref="alg0.l12.m1.1.1.3.3.2">𝑢</ci><ci id="alg0.l12.m1.1.1.3.3.3.cmml" xref="alg0.l12.m1.1.1.3.3.3">𝑠</ci><ci id="alg0.l12.m1.1.1.3.3.4.cmml" xref="alg0.l12.m1.1.1.3.3.4">𝑒</ci><ci id="alg0.l12.m1.1.1.3.3.5.cmml" xref="alg0.l12.m1.1.1.3.3.5">𝑟</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg0.l12.m1.1c">seenUsers\leftarrow seenUsers\cup user</annotation></semantics></math>
              
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span id="alg1.3.1.1" class="ltx_text ltx_font_bold">Algorithm 1</span> </span> Dirichlet-based tier mapping.</figcaption>
</figure>
<div id="S4.SS2.p2" class="ltx_para ltx_noindent">
<p id="S4.SS2.p2.9" class="ltx_p">Algorithm <a href="#alg1" title="Algorithm 1 ‣ 4.2 Simulating System-aware Data Heterogeneity ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> shows how we assign tiers to each client to simulate system-induced data heterogeneity. Here, we assume three tier groups, <math id="S4.SS2.p2.1.m1.1" class="ltx_Math" alttext="tier_{0}" display="inline"><semantics id="S4.SS2.p2.1.m1.1a"><mrow id="S4.SS2.p2.1.m1.1.1" xref="S4.SS2.p2.1.m1.1.1.cmml"><mi id="S4.SS2.p2.1.m1.1.1.2" xref="S4.SS2.p2.1.m1.1.1.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.1.m1.1.1.1" xref="S4.SS2.p2.1.m1.1.1.1.cmml">​</mo><mi id="S4.SS2.p2.1.m1.1.1.3" xref="S4.SS2.p2.1.m1.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.1.m1.1.1.1a" xref="S4.SS2.p2.1.m1.1.1.1.cmml">​</mo><mi id="S4.SS2.p2.1.m1.1.1.4" xref="S4.SS2.p2.1.m1.1.1.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.1.m1.1.1.1b" xref="S4.SS2.p2.1.m1.1.1.1.cmml">​</mo><msub id="S4.SS2.p2.1.m1.1.1.5" xref="S4.SS2.p2.1.m1.1.1.5.cmml"><mi id="S4.SS2.p2.1.m1.1.1.5.2" xref="S4.SS2.p2.1.m1.1.1.5.2.cmml">r</mi><mn id="S4.SS2.p2.1.m1.1.1.5.3" xref="S4.SS2.p2.1.m1.1.1.5.3.cmml">0</mn></msub></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.1.m1.1b"><apply id="S4.SS2.p2.1.m1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1"><times id="S4.SS2.p2.1.m1.1.1.1.cmml" xref="S4.SS2.p2.1.m1.1.1.1"></times><ci id="S4.SS2.p2.1.m1.1.1.2.cmml" xref="S4.SS2.p2.1.m1.1.1.2">𝑡</ci><ci id="S4.SS2.p2.1.m1.1.1.3.cmml" xref="S4.SS2.p2.1.m1.1.1.3">𝑖</ci><ci id="S4.SS2.p2.1.m1.1.1.4.cmml" xref="S4.SS2.p2.1.m1.1.1.4">𝑒</ci><apply id="S4.SS2.p2.1.m1.1.1.5.cmml" xref="S4.SS2.p2.1.m1.1.1.5"><csymbol cd="ambiguous" id="S4.SS2.p2.1.m1.1.1.5.1.cmml" xref="S4.SS2.p2.1.m1.1.1.5">subscript</csymbol><ci id="S4.SS2.p2.1.m1.1.1.5.2.cmml" xref="S4.SS2.p2.1.m1.1.1.5.2">𝑟</ci><cn type="integer" id="S4.SS2.p2.1.m1.1.1.5.3.cmml" xref="S4.SS2.p2.1.m1.1.1.5.3">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.1.m1.1c">tier_{0}</annotation></semantics></math>, <math id="S4.SS2.p2.2.m2.1" class="ltx_Math" alttext="tier_{1}" display="inline"><semantics id="S4.SS2.p2.2.m2.1a"><mrow id="S4.SS2.p2.2.m2.1.1" xref="S4.SS2.p2.2.m2.1.1.cmml"><mi id="S4.SS2.p2.2.m2.1.1.2" xref="S4.SS2.p2.2.m2.1.1.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.2.m2.1.1.1" xref="S4.SS2.p2.2.m2.1.1.1.cmml">​</mo><mi id="S4.SS2.p2.2.m2.1.1.3" xref="S4.SS2.p2.2.m2.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.2.m2.1.1.1a" xref="S4.SS2.p2.2.m2.1.1.1.cmml">​</mo><mi id="S4.SS2.p2.2.m2.1.1.4" xref="S4.SS2.p2.2.m2.1.1.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.2.m2.1.1.1b" xref="S4.SS2.p2.2.m2.1.1.1.cmml">​</mo><msub id="S4.SS2.p2.2.m2.1.1.5" xref="S4.SS2.p2.2.m2.1.1.5.cmml"><mi id="S4.SS2.p2.2.m2.1.1.5.2" xref="S4.SS2.p2.2.m2.1.1.5.2.cmml">r</mi><mn id="S4.SS2.p2.2.m2.1.1.5.3" xref="S4.SS2.p2.2.m2.1.1.5.3.cmml">1</mn></msub></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.2.m2.1b"><apply id="S4.SS2.p2.2.m2.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1"><times id="S4.SS2.p2.2.m2.1.1.1.cmml" xref="S4.SS2.p2.2.m2.1.1.1"></times><ci id="S4.SS2.p2.2.m2.1.1.2.cmml" xref="S4.SS2.p2.2.m2.1.1.2">𝑡</ci><ci id="S4.SS2.p2.2.m2.1.1.3.cmml" xref="S4.SS2.p2.2.m2.1.1.3">𝑖</ci><ci id="S4.SS2.p2.2.m2.1.1.4.cmml" xref="S4.SS2.p2.2.m2.1.1.4">𝑒</ci><apply id="S4.SS2.p2.2.m2.1.1.5.cmml" xref="S4.SS2.p2.2.m2.1.1.5"><csymbol cd="ambiguous" id="S4.SS2.p2.2.m2.1.1.5.1.cmml" xref="S4.SS2.p2.2.m2.1.1.5">subscript</csymbol><ci id="S4.SS2.p2.2.m2.1.1.5.2.cmml" xref="S4.SS2.p2.2.m2.1.1.5.2">𝑟</ci><cn type="integer" id="S4.SS2.p2.2.m2.1.1.5.3.cmml" xref="S4.SS2.p2.2.m2.1.1.5.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.2.m2.1c">tier_{1}</annotation></semantics></math>, and <math id="S4.SS2.p2.3.m3.1" class="ltx_Math" alttext="tier_{2}" display="inline"><semantics id="S4.SS2.p2.3.m3.1a"><mrow id="S4.SS2.p2.3.m3.1.1" xref="S4.SS2.p2.3.m3.1.1.cmml"><mi id="S4.SS2.p2.3.m3.1.1.2" xref="S4.SS2.p2.3.m3.1.1.2.cmml">t</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.3.m3.1.1.1" xref="S4.SS2.p2.3.m3.1.1.1.cmml">​</mo><mi id="S4.SS2.p2.3.m3.1.1.3" xref="S4.SS2.p2.3.m3.1.1.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.3.m3.1.1.1a" xref="S4.SS2.p2.3.m3.1.1.1.cmml">​</mo><mi id="S4.SS2.p2.3.m3.1.1.4" xref="S4.SS2.p2.3.m3.1.1.4.cmml">e</mi><mo lspace="0em" rspace="0em" id="S4.SS2.p2.3.m3.1.1.1b" xref="S4.SS2.p2.3.m3.1.1.1.cmml">​</mo><msub id="S4.SS2.p2.3.m3.1.1.5" xref="S4.SS2.p2.3.m3.1.1.5.cmml"><mi id="S4.SS2.p2.3.m3.1.1.5.2" xref="S4.SS2.p2.3.m3.1.1.5.2.cmml">r</mi><mn id="S4.SS2.p2.3.m3.1.1.5.3" xref="S4.SS2.p2.3.m3.1.1.5.3.cmml">2</mn></msub></mrow><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.3.m3.1b"><apply id="S4.SS2.p2.3.m3.1.1.cmml" xref="S4.SS2.p2.3.m3.1.1"><times id="S4.SS2.p2.3.m3.1.1.1.cmml" xref="S4.SS2.p2.3.m3.1.1.1"></times><ci id="S4.SS2.p2.3.m3.1.1.2.cmml" xref="S4.SS2.p2.3.m3.1.1.2">𝑡</ci><ci id="S4.SS2.p2.3.m3.1.1.3.cmml" xref="S4.SS2.p2.3.m3.1.1.3">𝑖</ci><ci id="S4.SS2.p2.3.m3.1.1.4.cmml" xref="S4.SS2.p2.3.m3.1.1.4">𝑒</ci><apply id="S4.SS2.p2.3.m3.1.1.5.cmml" xref="S4.SS2.p2.3.m3.1.1.5"><csymbol cd="ambiguous" id="S4.SS2.p2.3.m3.1.1.5.1.cmml" xref="S4.SS2.p2.3.m3.1.1.5">subscript</csymbol><ci id="S4.SS2.p2.3.m3.1.1.5.2.cmml" xref="S4.SS2.p2.3.m3.1.1.5.2">𝑟</ci><cn type="integer" id="S4.SS2.p2.3.m3.1.1.5.3.cmml" xref="S4.SS2.p2.3.m3.1.1.5.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.3.m3.1c">tier_{2}</annotation></semantics></math>. Starting from the most popular item (Line 2), we draw three samples for the three tiers from a Dirichlet distribution <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>]</cite> with a given <math id="S4.SS2.p2.4.m4.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p2.4.m4.1a"><mi id="S4.SS2.p2.4.m4.1.1" xref="S4.SS2.p2.4.m4.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.4.m4.1b"><ci id="S4.SS2.p2.4.m4.1.1.cmml" xref="S4.SS2.p2.4.m4.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.4.m4.1c">\alpha</annotation></semantics></math> (Line 3).
<math id="S4.SS2.p2.5.m5.1" class="ltx_Math" alttext="p_{0}" display="inline"><semantics id="S4.SS2.p2.5.m5.1a"><msub id="S4.SS2.p2.5.m5.1.1" xref="S4.SS2.p2.5.m5.1.1.cmml"><mi id="S4.SS2.p2.5.m5.1.1.2" xref="S4.SS2.p2.5.m5.1.1.2.cmml">p</mi><mn id="S4.SS2.p2.5.m5.1.1.3" xref="S4.SS2.p2.5.m5.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.5.m5.1b"><apply id="S4.SS2.p2.5.m5.1.1.cmml" xref="S4.SS2.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S4.SS2.p2.5.m5.1.1.1.cmml" xref="S4.SS2.p2.5.m5.1.1">subscript</csymbol><ci id="S4.SS2.p2.5.m5.1.1.2.cmml" xref="S4.SS2.p2.5.m5.1.1.2">𝑝</ci><cn type="integer" id="S4.SS2.p2.5.m5.1.1.3.cmml" xref="S4.SS2.p2.5.m5.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.5.m5.1c">p_{0}</annotation></semantics></math>, <math id="S4.SS2.p2.6.m6.1" class="ltx_Math" alttext="p_{1}" display="inline"><semantics id="S4.SS2.p2.6.m6.1a"><msub id="S4.SS2.p2.6.m6.1.1" xref="S4.SS2.p2.6.m6.1.1.cmml"><mi id="S4.SS2.p2.6.m6.1.1.2" xref="S4.SS2.p2.6.m6.1.1.2.cmml">p</mi><mn id="S4.SS2.p2.6.m6.1.1.3" xref="S4.SS2.p2.6.m6.1.1.3.cmml">1</mn></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.6.m6.1b"><apply id="S4.SS2.p2.6.m6.1.1.cmml" xref="S4.SS2.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS2.p2.6.m6.1.1.1.cmml" xref="S4.SS2.p2.6.m6.1.1">subscript</csymbol><ci id="S4.SS2.p2.6.m6.1.1.2.cmml" xref="S4.SS2.p2.6.m6.1.1.2">𝑝</ci><cn type="integer" id="S4.SS2.p2.6.m6.1.1.3.cmml" xref="S4.SS2.p2.6.m6.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.6.m6.1c">p_{1}</annotation></semantics></math>, and <math id="S4.SS2.p2.7.m7.1" class="ltx_Math" alttext="p_{2}" display="inline"><semantics id="S4.SS2.p2.7.m7.1a"><msub id="S4.SS2.p2.7.m7.1.1" xref="S4.SS2.p2.7.m7.1.1.cmml"><mi id="S4.SS2.p2.7.m7.1.1.2" xref="S4.SS2.p2.7.m7.1.1.2.cmml">p</mi><mn id="S4.SS2.p2.7.m7.1.1.3" xref="S4.SS2.p2.7.m7.1.1.3.cmml">2</mn></msub><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.7.m7.1b"><apply id="S4.SS2.p2.7.m7.1.1.cmml" xref="S4.SS2.p2.7.m7.1.1"><csymbol cd="ambiguous" id="S4.SS2.p2.7.m7.1.1.1.cmml" xref="S4.SS2.p2.7.m7.1.1">subscript</csymbol><ci id="S4.SS2.p2.7.m7.1.1.2.cmml" xref="S4.SS2.p2.7.m7.1.1.2">𝑝</ci><cn type="integer" id="S4.SS2.p2.7.m7.1.1.3.cmml" xref="S4.SS2.p2.7.m7.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.7.m7.1c">p_{2}</annotation></semantics></math> represent the probability for each user who clicked this item to be in each tier. If <math id="S4.SS2.p2.8.m8.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p2.8.m8.1a"><mi id="S4.SS2.p2.8.m8.1.1" xref="S4.SS2.p2.8.m8.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.8.m8.1b"><ci id="S4.SS2.p2.8.m8.1.1.cmml" xref="S4.SS2.p2.8.m8.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.8.m8.1c">\alpha</annotation></semantics></math> is small, the values are more skewed, leading to higher system-induced data heterogeneity. If <math id="S4.SS2.p2.9.m9.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p2.9.m9.1a"><mi id="S4.SS2.p2.9.m9.1.1" xref="S4.SS2.p2.9.m9.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p2.9.m9.1b"><ci id="S4.SS2.p2.9.m9.1.1.cmml" xref="S4.SS2.p2.9.m9.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p2.9.m9.1c">\alpha</annotation></semantics></math> is high, system-induced data heterogeneity is reduced.
We sort the three probabilities (Line 4) and also the number of already assigned users for each tier (Line 5), so that the tier with currently the least users gets the highest probability of the user being assigned. Lines 4–5 ensure that the final number of users is similar across tiers, and can be omitted if balancing the number of users is undesired.
With the given probability, each user that clicked the item (Line 6) gets assigned to one of the three tiers (Line 9–11), unless it is already assigned to a certain tier (Line 7). For users that never clicked any items, we treat them as clicking a null item and apply the same procedure.
Our tier assignment procedure is inspired by the approach used to simulate data heterogeneity in FL across clients <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>]</cite>. Our algorithm has a different goal, which is to simulate system-induced data heterogeneity (data heterogeneity <em id="S4.SS2.p2.9.1" class="ltx_emph ltx_font_italic">across tiers</em>).</p>
</div>
<div id="S4.SS2.p3" class="ltx_para ltx_noindent">
<p id="S4.SS2.p3.3" class="ltx_p">Figure <a href="#S4.F4" title="Figure 4 ‣ 4.2 Simulating System-aware Data Heterogeneity ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> shows the generated system-induced data heterogeneity using different <math id="S4.SS2.p3.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p3.1.m1.1a"><mi id="S4.SS2.p3.1.m1.1.1" xref="S4.SS2.p3.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.1.m1.1b"><ci id="S4.SS2.p3.1.m1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.1.m1.1c">\alpha</annotation></semantics></math> for the MovieLens-20M dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib56" title="" class="ltx_ref">56</a>]</cite> (see Section <a href="#S5.SS1" title="5.1 Deep Learning Recommendation Models and Datasets ‣ 5 Evaluation Methodology ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.1</span></a> for more details on the dataset).
In the figure, the top-10 most clicked items and their occurrence on each (synthesized) tier are plotted.
We can see that for low <math id="S4.SS2.p3.2.m2.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p3.2.m2.1a"><mi id="S4.SS2.p3.2.m2.1.1" xref="S4.SS2.p3.2.m2.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.2.m2.1b"><ci id="S4.SS2.p3.2.m2.1.1.cmml" xref="S4.SS2.p3.2.m2.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.2.m2.1c">\alpha</annotation></semantics></math> (Figure <a href="#S4.F4.sf1" title="In Figure 4 ‣ 4.2 Simulating System-aware Data Heterogeneity ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4(a)</span></a>), the dataset experiences a severe system-induced data heterogeneity similar to that of the real world (Figure <a href="#S3.F2.sf1" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(a)</span></a>). As we increase <math id="S4.SS2.p3.3.m3.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS2.p3.3.m3.1a"><mi id="S4.SS2.p3.3.m3.1.1" xref="S4.SS2.p3.3.m3.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.3.m3.1b"><ci id="S4.SS2.p3.3.m3.1.1.cmml" xref="S4.SS2.p3.3.m3.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.3.m3.1c">\alpha</annotation></semantics></math> (Figure <a href="#S4.F4.sf2" title="In Figure 4 ‣ 4.2 Simulating System-aware Data Heterogeneity ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4(b)</span></a>– <a href="#S4.F4.sf3" title="In Figure 4 ‣ 4.2 Simulating System-aware Data Heterogeneity ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4(c)</span></a>), the distribution becomes increasingly more similar to random mapping (Figure <a href="#S3.F2.sf2" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(b)</span></a>).
The simulated system-induced data heterogeneity also leads to different fairness implications.
Figure <a href="#S4.F5" title="Figure 5 ‣ 4.3 Supporting Popular Tier-Aware Optimizations in FL ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a> shows an accuracy degradation of each tier when excluding low-end devices from FL under different system-induced data heterogeneity (see Sections <a href="#S5" title="5 Evaluation Methodology ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a> and <a href="#S6" title="6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> for details on the evaluation setup and results).
Figure <a href="#S4.F5.sf1" title="In Figure 5 ‣ 4.3 Supporting Popular Tier-Aware Optimizations in FL ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5(a)</span></a> shows that low-end devices experience disproportionate accuracy loss when there is high system-induced data heterogeneity, similar to what was observed in the real world (Figure <a href="#S3.F2.sf3" title="In Figure 2 ‣ 3 Real-world Observations: Data and System Heterogeneity are Intertwined ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2(c)</span></a>). The same level of fairness issue cannot be observed with low system-induced data heterogeneity (Figure <a href="#S4.F5.sf2" title="In Figure 5 ‣ 4.3 Supporting Popular Tier-Aware Optimizations in FL ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5(b)</span></a>).</p>
</div>
<figure id="S4.F4" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F4.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x7.png" id="S4.F4.sf1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="262" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(a) </span><math id="S4.F4.sf1.2.m1.1" class="ltx_Math" alttext="\alpha=0.5" display="inline"><semantics id="S4.F4.sf1.2.m1.1b"><mrow id="S4.F4.sf1.2.m1.1.1" xref="S4.F4.sf1.2.m1.1.1.cmml"><mi id="S4.F4.sf1.2.m1.1.1.2" xref="S4.F4.sf1.2.m1.1.1.2.cmml">α</mi><mo id="S4.F4.sf1.2.m1.1.1.1" xref="S4.F4.sf1.2.m1.1.1.1.cmml">=</mo><mn id="S4.F4.sf1.2.m1.1.1.3" xref="S4.F4.sf1.2.m1.1.1.3.cmml">0.5</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.F4.sf1.2.m1.1c"><apply id="S4.F4.sf1.2.m1.1.1.cmml" xref="S4.F4.sf1.2.m1.1.1"><eq id="S4.F4.sf1.2.m1.1.1.1.cmml" xref="S4.F4.sf1.2.m1.1.1.1"></eq><ci id="S4.F4.sf1.2.m1.1.1.2.cmml" xref="S4.F4.sf1.2.m1.1.1.2">𝛼</ci><cn type="float" id="S4.F4.sf1.2.m1.1.1.3.cmml" xref="S4.F4.sf1.2.m1.1.1.3">0.5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.F4.sf1.2.m1.1d">\alpha=0.5</annotation></semantics></math></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F4.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x8.png" id="S4.F4.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="262" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(b) </span><math id="S4.F4.sf2.2.m1.1" class="ltx_Math" alttext="\alpha=5" display="inline"><semantics id="S4.F4.sf2.2.m1.1b"><mrow id="S4.F4.sf2.2.m1.1.1" xref="S4.F4.sf2.2.m1.1.1.cmml"><mi id="S4.F4.sf2.2.m1.1.1.2" xref="S4.F4.sf2.2.m1.1.1.2.cmml">α</mi><mo id="S4.F4.sf2.2.m1.1.1.1" xref="S4.F4.sf2.2.m1.1.1.1.cmml">=</mo><mn id="S4.F4.sf2.2.m1.1.1.3" xref="S4.F4.sf2.2.m1.1.1.3.cmml">5</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.F4.sf2.2.m1.1c"><apply id="S4.F4.sf2.2.m1.1.1.cmml" xref="S4.F4.sf2.2.m1.1.1"><eq id="S4.F4.sf2.2.m1.1.1.1.cmml" xref="S4.F4.sf2.2.m1.1.1.1"></eq><ci id="S4.F4.sf2.2.m1.1.1.2.cmml" xref="S4.F4.sf2.2.m1.1.1.2">𝛼</ci><cn type="integer" id="S4.F4.sf2.2.m1.1.1.3.cmml" xref="S4.F4.sf2.2.m1.1.1.3">5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.F4.sf2.2.m1.1d">\alpha=5</annotation></semantics></math></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure id="S4.F4.sf3" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x9.png" id="S4.F4.sf3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="262" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(c) </span><math id="S4.F4.sf3.2.m1.1" class="ltx_Math" alttext="\alpha=5000" display="inline"><semantics id="S4.F4.sf3.2.m1.1b"><mrow id="S4.F4.sf3.2.m1.1.1" xref="S4.F4.sf3.2.m1.1.1.cmml"><mi id="S4.F4.sf3.2.m1.1.1.2" xref="S4.F4.sf3.2.m1.1.1.2.cmml">α</mi><mo id="S4.F4.sf3.2.m1.1.1.1" xref="S4.F4.sf3.2.m1.1.1.1.cmml">=</mo><mn id="S4.F4.sf3.2.m1.1.1.3" xref="S4.F4.sf3.2.m1.1.1.3.cmml">5000</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.F4.sf3.2.m1.1c"><apply id="S4.F4.sf3.2.m1.1.1.cmml" xref="S4.F4.sf3.2.m1.1.1"><eq id="S4.F4.sf3.2.m1.1.1.1.cmml" xref="S4.F4.sf3.2.m1.1.1.1"></eq><ci id="S4.F4.sf3.2.m1.1.1.2.cmml" xref="S4.F4.sf3.2.m1.1.1.2">𝛼</ci><cn type="integer" id="S4.F4.sf3.2.m1.1.1.3.cmml" xref="S4.F4.sf3.2.m1.1.1.3">5000</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.F4.sf3.2.m1.1d">\alpha=5000</annotation></semantics></math></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Dirichlet distribution with different <math id="S4.F4.2.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.F4.2.m1.1b"><mi id="S4.F4.2.m1.1.1" xref="S4.F4.2.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.F4.2.m1.1c"><ci id="S4.F4.2.m1.1.1.cmml" xref="S4.F4.2.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.F4.2.m1.1d">\alpha</annotation></semantics></math> can simulate different degrees of system-induced data heterogeneity.
</figcaption>
</figure>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Supporting Popular Tier-Aware Optimizations in FL</h3>

<div id="S4.SS3.p1" class="ltx_para ltx_noindent">
<p id="S4.SS3.p1.14" class="ltx_p">RF<sup id="S4.SS3.p1.14.1" class="ltx_sup">2</sup> implements several commonly-used tier-aware optimizations discussed in Section <a href="#S2.SS2.SSS3" title="2.2.3 System Heterogeneity and Tier-Aware Optimizations ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2.3</span></a>. Specifically, the current version implements (1) excluding low-end devices (<span id="S4.SS3.p1.14.2" class="ltx_text ltx_font_bold">Exclude Lo</span>), (2) overselection and drop (<span id="S4.SS3.p1.14.3" class="ltx_text ltx_font_bold">Overselect</span>), (3) tier-aware gradient pruning (<span id="S4.SS3.p1.14.4" class="ltx_text ltx_font_bold">Prune</span>), (4) tier-aware gradient compression (<span id="S4.SS3.p1.14.5" class="ltx_text ltx_font_bold">Quant</span>), and (5) tier-aware channel width reduction (<span id="S4.SS3.p1.14.6" class="ltx_text ltx_font_bold">Channel</span>).
For simulation, a performance model for each tier was obtained from <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>, which models the performance as a Gaussian distribution using real-world measurements.
For pruning (<span id="S4.SS3.p1.14.7" class="ltx_text ltx_font_bold">Prune</span>), we explored random pruning that is widely used in FL <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite> and do not consider Top-K pruning <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib46" title="" class="ltx_ref">46</a>]</cite> due to privacy concerns (Section <a href="#S2.SS2.SSS3" title="2.2.3 System Heterogeneity and Tier-Aware Optimizations ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2.3</span></a>).
For quantization (<span id="S4.SS3.p1.14.8" class="ltx_text ltx_font_bold">Quant</span>), we studied stochastic rounding <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>, <a href="#bib.bib45" title="" class="ltx_ref">45</a>]</cite>. Given <math id="S4.SS3.p1.2.m2.1" class="ltx_Math" alttext="n" display="inline"><semantics id="S4.SS3.p1.2.m2.1a"><mi id="S4.SS3.p1.2.m2.1.1" xref="S4.SS3.p1.2.m2.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.2.m2.1b"><ci id="S4.SS3.p1.2.m2.1.1.cmml" xref="S4.SS3.p1.2.m2.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.2.m2.1c">n</annotation></semantics></math> bits, stochastic rounding uniformly splits the value range between the minimum and the maximum with <math id="S4.SS3.p1.3.m3.1" class="ltx_Math" alttext="2^{n}" display="inline"><semantics id="S4.SS3.p1.3.m3.1a"><msup id="S4.SS3.p1.3.m3.1.1" xref="S4.SS3.p1.3.m3.1.1.cmml"><mn id="S4.SS3.p1.3.m3.1.1.2" xref="S4.SS3.p1.3.m3.1.1.2.cmml">2</mn><mi id="S4.SS3.p1.3.m3.1.1.3" xref="S4.SS3.p1.3.m3.1.1.3.cmml">n</mi></msup><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.3.m3.1b"><apply id="S4.SS3.p1.3.m3.1.1.cmml" xref="S4.SS3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.3.m3.1.1.1.cmml" xref="S4.SS3.p1.3.m3.1.1">superscript</csymbol><cn type="integer" id="S4.SS3.p1.3.m3.1.1.2.cmml" xref="S4.SS3.p1.3.m3.1.1.2">2</cn><ci id="S4.SS3.p1.3.m3.1.1.3.cmml" xref="S4.SS3.p1.3.m3.1.1.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.3.m3.1c">2^{n}</annotation></semantics></math> uniformly separated points <math id="S4.SS3.p1.4.m4.1" class="ltx_Math" alttext="p_{0}" display="inline"><semantics id="S4.SS3.p1.4.m4.1a"><msub id="S4.SS3.p1.4.m4.1.1" xref="S4.SS3.p1.4.m4.1.1.cmml"><mi id="S4.SS3.p1.4.m4.1.1.2" xref="S4.SS3.p1.4.m4.1.1.2.cmml">p</mi><mn id="S4.SS3.p1.4.m4.1.1.3" xref="S4.SS3.p1.4.m4.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.4.m4.1b"><apply id="S4.SS3.p1.4.m4.1.1.cmml" xref="S4.SS3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.4.m4.1.1.1.cmml" xref="S4.SS3.p1.4.m4.1.1">subscript</csymbol><ci id="S4.SS3.p1.4.m4.1.1.2.cmml" xref="S4.SS3.p1.4.m4.1.1.2">𝑝</ci><cn type="integer" id="S4.SS3.p1.4.m4.1.1.3.cmml" xref="S4.SS3.p1.4.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.4.m4.1c">p_{0}</annotation></semantics></math>, … <math id="S4.SS3.p1.5.m5.1" class="ltx_Math" alttext="p_{2^{n}-1}" display="inline"><semantics id="S4.SS3.p1.5.m5.1a"><msub id="S4.SS3.p1.5.m5.1.1" xref="S4.SS3.p1.5.m5.1.1.cmml"><mi id="S4.SS3.p1.5.m5.1.1.2" xref="S4.SS3.p1.5.m5.1.1.2.cmml">p</mi><mrow id="S4.SS3.p1.5.m5.1.1.3" xref="S4.SS3.p1.5.m5.1.1.3.cmml"><msup id="S4.SS3.p1.5.m5.1.1.3.2" xref="S4.SS3.p1.5.m5.1.1.3.2.cmml"><mn id="S4.SS3.p1.5.m5.1.1.3.2.2" xref="S4.SS3.p1.5.m5.1.1.3.2.2.cmml">2</mn><mi id="S4.SS3.p1.5.m5.1.1.3.2.3" xref="S4.SS3.p1.5.m5.1.1.3.2.3.cmml">n</mi></msup><mo id="S4.SS3.p1.5.m5.1.1.3.1" xref="S4.SS3.p1.5.m5.1.1.3.1.cmml">−</mo><mn id="S4.SS3.p1.5.m5.1.1.3.3" xref="S4.SS3.p1.5.m5.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.5.m5.1b"><apply id="S4.SS3.p1.5.m5.1.1.cmml" xref="S4.SS3.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.5.m5.1.1.1.cmml" xref="S4.SS3.p1.5.m5.1.1">subscript</csymbol><ci id="S4.SS3.p1.5.m5.1.1.2.cmml" xref="S4.SS3.p1.5.m5.1.1.2">𝑝</ci><apply id="S4.SS3.p1.5.m5.1.1.3.cmml" xref="S4.SS3.p1.5.m5.1.1.3"><minus id="S4.SS3.p1.5.m5.1.1.3.1.cmml" xref="S4.SS3.p1.5.m5.1.1.3.1"></minus><apply id="S4.SS3.p1.5.m5.1.1.3.2.cmml" xref="S4.SS3.p1.5.m5.1.1.3.2"><csymbol cd="ambiguous" id="S4.SS3.p1.5.m5.1.1.3.2.1.cmml" xref="S4.SS3.p1.5.m5.1.1.3.2">superscript</csymbol><cn type="integer" id="S4.SS3.p1.5.m5.1.1.3.2.2.cmml" xref="S4.SS3.p1.5.m5.1.1.3.2.2">2</cn><ci id="S4.SS3.p1.5.m5.1.1.3.2.3.cmml" xref="S4.SS3.p1.5.m5.1.1.3.2.3">𝑛</ci></apply><cn type="integer" id="S4.SS3.p1.5.m5.1.1.3.3.cmml" xref="S4.SS3.p1.5.m5.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.5.m5.1c">p_{2^{n}-1}</annotation></semantics></math>. If <math id="S4.SS3.p1.6.m6.1" class="ltx_Math" alttext="p_{k}" display="inline"><semantics id="S4.SS3.p1.6.m6.1a"><msub id="S4.SS3.p1.6.m6.1.1" xref="S4.SS3.p1.6.m6.1.1.cmml"><mi id="S4.SS3.p1.6.m6.1.1.2" xref="S4.SS3.p1.6.m6.1.1.2.cmml">p</mi><mi id="S4.SS3.p1.6.m6.1.1.3" xref="S4.SS3.p1.6.m6.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.6.m6.1b"><apply id="S4.SS3.p1.6.m6.1.1.cmml" xref="S4.SS3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.6.m6.1.1.1.cmml" xref="S4.SS3.p1.6.m6.1.1">subscript</csymbol><ci id="S4.SS3.p1.6.m6.1.1.2.cmml" xref="S4.SS3.p1.6.m6.1.1.2">𝑝</ci><ci id="S4.SS3.p1.6.m6.1.1.3.cmml" xref="S4.SS3.p1.6.m6.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.6.m6.1c">p_{k}</annotation></semantics></math> ¡ <math id="S4.SS3.p1.7.m7.1" class="ltx_Math" alttext="x" display="inline"><semantics id="S4.SS3.p1.7.m7.1a"><mi id="S4.SS3.p1.7.m7.1.1" xref="S4.SS3.p1.7.m7.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.7.m7.1b"><ci id="S4.SS3.p1.7.m7.1.1.cmml" xref="S4.SS3.p1.7.m7.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.7.m7.1c">x</annotation></semantics></math> ¡ <math id="S4.SS3.p1.8.m8.1" class="ltx_Math" alttext="p_{k+1}" display="inline"><semantics id="S4.SS3.p1.8.m8.1a"><msub id="S4.SS3.p1.8.m8.1.1" xref="S4.SS3.p1.8.m8.1.1.cmml"><mi id="S4.SS3.p1.8.m8.1.1.2" xref="S4.SS3.p1.8.m8.1.1.2.cmml">p</mi><mrow id="S4.SS3.p1.8.m8.1.1.3" xref="S4.SS3.p1.8.m8.1.1.3.cmml"><mi id="S4.SS3.p1.8.m8.1.1.3.2" xref="S4.SS3.p1.8.m8.1.1.3.2.cmml">k</mi><mo id="S4.SS3.p1.8.m8.1.1.3.1" xref="S4.SS3.p1.8.m8.1.1.3.1.cmml">+</mo><mn id="S4.SS3.p1.8.m8.1.1.3.3" xref="S4.SS3.p1.8.m8.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.8.m8.1b"><apply id="S4.SS3.p1.8.m8.1.1.cmml" xref="S4.SS3.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.8.m8.1.1.1.cmml" xref="S4.SS3.p1.8.m8.1.1">subscript</csymbol><ci id="S4.SS3.p1.8.m8.1.1.2.cmml" xref="S4.SS3.p1.8.m8.1.1.2">𝑝</ci><apply id="S4.SS3.p1.8.m8.1.1.3.cmml" xref="S4.SS3.p1.8.m8.1.1.3"><plus id="S4.SS3.p1.8.m8.1.1.3.1.cmml" xref="S4.SS3.p1.8.m8.1.1.3.1"></plus><ci id="S4.SS3.p1.8.m8.1.1.3.2.cmml" xref="S4.SS3.p1.8.m8.1.1.3.2">𝑘</ci><cn type="integer" id="S4.SS3.p1.8.m8.1.1.3.3.cmml" xref="S4.SS3.p1.8.m8.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.8.m8.1c">p_{k+1}</annotation></semantics></math>, then we round <math id="S4.SS3.p1.9.m9.1" class="ltx_Math" alttext="x" display="inline"><semantics id="S4.SS3.p1.9.m9.1a"><mi id="S4.SS3.p1.9.m9.1.1" xref="S4.SS3.p1.9.m9.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.9.m9.1b"><ci id="S4.SS3.p1.9.m9.1.1.cmml" xref="S4.SS3.p1.9.m9.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.9.m9.1c">x</annotation></semantics></math> into <math id="S4.SS3.p1.10.m10.1" class="ltx_Math" alttext="p_{k}" display="inline"><semantics id="S4.SS3.p1.10.m10.1a"><msub id="S4.SS3.p1.10.m10.1.1" xref="S4.SS3.p1.10.m10.1.1.cmml"><mi id="S4.SS3.p1.10.m10.1.1.2" xref="S4.SS3.p1.10.m10.1.1.2.cmml">p</mi><mi id="S4.SS3.p1.10.m10.1.1.3" xref="S4.SS3.p1.10.m10.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.10.m10.1b"><apply id="S4.SS3.p1.10.m10.1.1.cmml" xref="S4.SS3.p1.10.m10.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.10.m10.1.1.1.cmml" xref="S4.SS3.p1.10.m10.1.1">subscript</csymbol><ci id="S4.SS3.p1.10.m10.1.1.2.cmml" xref="S4.SS3.p1.10.m10.1.1.2">𝑝</ci><ci id="S4.SS3.p1.10.m10.1.1.3.cmml" xref="S4.SS3.p1.10.m10.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.10.m10.1c">p_{k}</annotation></semantics></math> with a probability of <math id="S4.SS3.p1.11.m11.1" class="ltx_Math" alttext="\frac{x-p_{k}}{p_{k+1}-p_{k}}" display="inline"><semantics id="S4.SS3.p1.11.m11.1a"><mfrac id="S4.SS3.p1.11.m11.1.1" xref="S4.SS3.p1.11.m11.1.1.cmml"><mrow id="S4.SS3.p1.11.m11.1.1.2" xref="S4.SS3.p1.11.m11.1.1.2.cmml"><mi id="S4.SS3.p1.11.m11.1.1.2.2" xref="S4.SS3.p1.11.m11.1.1.2.2.cmml">x</mi><mo id="S4.SS3.p1.11.m11.1.1.2.1" xref="S4.SS3.p1.11.m11.1.1.2.1.cmml">−</mo><msub id="S4.SS3.p1.11.m11.1.1.2.3" xref="S4.SS3.p1.11.m11.1.1.2.3.cmml"><mi id="S4.SS3.p1.11.m11.1.1.2.3.2" xref="S4.SS3.p1.11.m11.1.1.2.3.2.cmml">p</mi><mi id="S4.SS3.p1.11.m11.1.1.2.3.3" xref="S4.SS3.p1.11.m11.1.1.2.3.3.cmml">k</mi></msub></mrow><mrow id="S4.SS3.p1.11.m11.1.1.3" xref="S4.SS3.p1.11.m11.1.1.3.cmml"><msub id="S4.SS3.p1.11.m11.1.1.3.2" xref="S4.SS3.p1.11.m11.1.1.3.2.cmml"><mi id="S4.SS3.p1.11.m11.1.1.3.2.2" xref="S4.SS3.p1.11.m11.1.1.3.2.2.cmml">p</mi><mrow id="S4.SS3.p1.11.m11.1.1.3.2.3" xref="S4.SS3.p1.11.m11.1.1.3.2.3.cmml"><mi id="S4.SS3.p1.11.m11.1.1.3.2.3.2" xref="S4.SS3.p1.11.m11.1.1.3.2.3.2.cmml">k</mi><mo id="S4.SS3.p1.11.m11.1.1.3.2.3.1" xref="S4.SS3.p1.11.m11.1.1.3.2.3.1.cmml">+</mo><mn id="S4.SS3.p1.11.m11.1.1.3.2.3.3" xref="S4.SS3.p1.11.m11.1.1.3.2.3.3.cmml">1</mn></mrow></msub><mo id="S4.SS3.p1.11.m11.1.1.3.1" xref="S4.SS3.p1.11.m11.1.1.3.1.cmml">−</mo><msub id="S4.SS3.p1.11.m11.1.1.3.3" xref="S4.SS3.p1.11.m11.1.1.3.3.cmml"><mi id="S4.SS3.p1.11.m11.1.1.3.3.2" xref="S4.SS3.p1.11.m11.1.1.3.3.2.cmml">p</mi><mi id="S4.SS3.p1.11.m11.1.1.3.3.3" xref="S4.SS3.p1.11.m11.1.1.3.3.3.cmml">k</mi></msub></mrow></mfrac><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.11.m11.1b"><apply id="S4.SS3.p1.11.m11.1.1.cmml" xref="S4.SS3.p1.11.m11.1.1"><divide id="S4.SS3.p1.11.m11.1.1.1.cmml" xref="S4.SS3.p1.11.m11.1.1"></divide><apply id="S4.SS3.p1.11.m11.1.1.2.cmml" xref="S4.SS3.p1.11.m11.1.1.2"><minus id="S4.SS3.p1.11.m11.1.1.2.1.cmml" xref="S4.SS3.p1.11.m11.1.1.2.1"></minus><ci id="S4.SS3.p1.11.m11.1.1.2.2.cmml" xref="S4.SS3.p1.11.m11.1.1.2.2">𝑥</ci><apply id="S4.SS3.p1.11.m11.1.1.2.3.cmml" xref="S4.SS3.p1.11.m11.1.1.2.3"><csymbol cd="ambiguous" id="S4.SS3.p1.11.m11.1.1.2.3.1.cmml" xref="S4.SS3.p1.11.m11.1.1.2.3">subscript</csymbol><ci id="S4.SS3.p1.11.m11.1.1.2.3.2.cmml" xref="S4.SS3.p1.11.m11.1.1.2.3.2">𝑝</ci><ci id="S4.SS3.p1.11.m11.1.1.2.3.3.cmml" xref="S4.SS3.p1.11.m11.1.1.2.3.3">𝑘</ci></apply></apply><apply id="S4.SS3.p1.11.m11.1.1.3.cmml" xref="S4.SS3.p1.11.m11.1.1.3"><minus id="S4.SS3.p1.11.m11.1.1.3.1.cmml" xref="S4.SS3.p1.11.m11.1.1.3.1"></minus><apply id="S4.SS3.p1.11.m11.1.1.3.2.cmml" xref="S4.SS3.p1.11.m11.1.1.3.2"><csymbol cd="ambiguous" id="S4.SS3.p1.11.m11.1.1.3.2.1.cmml" xref="S4.SS3.p1.11.m11.1.1.3.2">subscript</csymbol><ci id="S4.SS3.p1.11.m11.1.1.3.2.2.cmml" xref="S4.SS3.p1.11.m11.1.1.3.2.2">𝑝</ci><apply id="S4.SS3.p1.11.m11.1.1.3.2.3.cmml" xref="S4.SS3.p1.11.m11.1.1.3.2.3"><plus id="S4.SS3.p1.11.m11.1.1.3.2.3.1.cmml" xref="S4.SS3.p1.11.m11.1.1.3.2.3.1"></plus><ci id="S4.SS3.p1.11.m11.1.1.3.2.3.2.cmml" xref="S4.SS3.p1.11.m11.1.1.3.2.3.2">𝑘</ci><cn type="integer" id="S4.SS3.p1.11.m11.1.1.3.2.3.3.cmml" xref="S4.SS3.p1.11.m11.1.1.3.2.3.3">1</cn></apply></apply><apply id="S4.SS3.p1.11.m11.1.1.3.3.cmml" xref="S4.SS3.p1.11.m11.1.1.3.3"><csymbol cd="ambiguous" id="S4.SS3.p1.11.m11.1.1.3.3.1.cmml" xref="S4.SS3.p1.11.m11.1.1.3.3">subscript</csymbol><ci id="S4.SS3.p1.11.m11.1.1.3.3.2.cmml" xref="S4.SS3.p1.11.m11.1.1.3.3.2">𝑝</ci><ci id="S4.SS3.p1.11.m11.1.1.3.3.3.cmml" xref="S4.SS3.p1.11.m11.1.1.3.3.3">𝑘</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.11.m11.1c">\frac{x-p_{k}}{p_{k+1}-p_{k}}</annotation></semantics></math> and <math id="S4.SS3.p1.12.m12.1" class="ltx_Math" alttext="p_{k+1}" display="inline"><semantics id="S4.SS3.p1.12.m12.1a"><msub id="S4.SS3.p1.12.m12.1.1" xref="S4.SS3.p1.12.m12.1.1.cmml"><mi id="S4.SS3.p1.12.m12.1.1.2" xref="S4.SS3.p1.12.m12.1.1.2.cmml">p</mi><mrow id="S4.SS3.p1.12.m12.1.1.3" xref="S4.SS3.p1.12.m12.1.1.3.cmml"><mi id="S4.SS3.p1.12.m12.1.1.3.2" xref="S4.SS3.p1.12.m12.1.1.3.2.cmml">k</mi><mo id="S4.SS3.p1.12.m12.1.1.3.1" xref="S4.SS3.p1.12.m12.1.1.3.1.cmml">+</mo><mn id="S4.SS3.p1.12.m12.1.1.3.3" xref="S4.SS3.p1.12.m12.1.1.3.3.cmml">1</mn></mrow></msub><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.12.m12.1b"><apply id="S4.SS3.p1.12.m12.1.1.cmml" xref="S4.SS3.p1.12.m12.1.1"><csymbol cd="ambiguous" id="S4.SS3.p1.12.m12.1.1.1.cmml" xref="S4.SS3.p1.12.m12.1.1">subscript</csymbol><ci id="S4.SS3.p1.12.m12.1.1.2.cmml" xref="S4.SS3.p1.12.m12.1.1.2">𝑝</ci><apply id="S4.SS3.p1.12.m12.1.1.3.cmml" xref="S4.SS3.p1.12.m12.1.1.3"><plus id="S4.SS3.p1.12.m12.1.1.3.1.cmml" xref="S4.SS3.p1.12.m12.1.1.3.1"></plus><ci id="S4.SS3.p1.12.m12.1.1.3.2.cmml" xref="S4.SS3.p1.12.m12.1.1.3.2">𝑘</ci><cn type="integer" id="S4.SS3.p1.12.m12.1.1.3.3.cmml" xref="S4.SS3.p1.12.m12.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.12.m12.1c">p_{k+1}</annotation></semantics></math> otherwise.
We also explore a variant that uses 1 bit to encode the sign and <math id="S4.SS3.p1.13.m13.1" class="ltx_Math" alttext="n-1" display="inline"><semantics id="S4.SS3.p1.13.m13.1a"><mrow id="S4.SS3.p1.13.m13.1.1" xref="S4.SS3.p1.13.m13.1.1.cmml"><mi id="S4.SS3.p1.13.m13.1.1.2" xref="S4.SS3.p1.13.m13.1.1.2.cmml">n</mi><mo id="S4.SS3.p1.13.m13.1.1.1" xref="S4.SS3.p1.13.m13.1.1.1.cmml">−</mo><mn id="S4.SS3.p1.13.m13.1.1.3" xref="S4.SS3.p1.13.m13.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS3.p1.13.m13.1b"><apply id="S4.SS3.p1.13.m13.1.1.cmml" xref="S4.SS3.p1.13.m13.1.1"><minus id="S4.SS3.p1.13.m13.1.1.1.cmml" xref="S4.SS3.p1.13.m13.1.1.1"></minus><ci id="S4.SS3.p1.13.m13.1.1.2.cmml" xref="S4.SS3.p1.13.m13.1.1.2">𝑛</ci><cn type="integer" id="S4.SS3.p1.13.m13.1.1.3.cmml" xref="S4.SS3.p1.13.m13.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS3.p1.13.m13.1c">n-1</annotation></semantics></math> bits to encode the absolute value (<span id="S4.SS3.p1.14.9" class="ltx_text ltx_font_bold">QuantS</span>). The variant gives us a better representation of zero, which we will show to have fairness improvement in Section <a href="#S6" title="6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>.
To reduce computation, we focus on varying the channel dimensions (<span id="S4.SS3.p1.14.10" class="ltx_text ltx_font_bold">Channel</span>) without additionally using knowledge distillation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>. Knowledge distillation-based approaches <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib47" title="" class="ltx_ref">47</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib48" title="" class="ltx_ref">48</a>, <a href="#bib.bib49" title="" class="ltx_ref">49</a>, <a href="#bib.bib50" title="" class="ltx_ref">50</a>, <a href="#bib.bib51" title="" class="ltx_ref">51</a>, <a href="#bib.bib52" title="" class="ltx_ref">52</a>]</cite> require a representative public dataset which we do not assume.
We reduced channels for all but the first hidden layer, as reducing channels for the first hidden layer effectively ignores some input features.
RF<sup id="S4.SS3.p1.14.11" class="ltx_sup">2</sup> can be extended to support more optimizations.</p>
</div>
<figure id="S4.F5" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S4.F5.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x10.png" id="S4.F5.sf1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="327" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(a) </span><math id="S4.F5.sf1.2.m1.1" class="ltx_Math" alttext="\alpha=0.5" display="inline"><semantics id="S4.F5.sf1.2.m1.1b"><mrow id="S4.F5.sf1.2.m1.1.1" xref="S4.F5.sf1.2.m1.1.1.cmml"><mi id="S4.F5.sf1.2.m1.1.1.2" xref="S4.F5.sf1.2.m1.1.1.2.cmml">α</mi><mo id="S4.F5.sf1.2.m1.1.1.1" xref="S4.F5.sf1.2.m1.1.1.1.cmml">=</mo><mn id="S4.F5.sf1.2.m1.1.1.3" xref="S4.F5.sf1.2.m1.1.1.3.cmml">0.5</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.F5.sf1.2.m1.1c"><apply id="S4.F5.sf1.2.m1.1.1.cmml" xref="S4.F5.sf1.2.m1.1.1"><eq id="S4.F5.sf1.2.m1.1.1.1.cmml" xref="S4.F5.sf1.2.m1.1.1.1"></eq><ci id="S4.F5.sf1.2.m1.1.1.2.cmml" xref="S4.F5.sf1.2.m1.1.1.2">𝛼</ci><cn type="float" id="S4.F5.sf1.2.m1.1.1.3.cmml" xref="S4.F5.sf1.2.m1.1.1.3">0.5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.F5.sf1.2.m1.1d">\alpha=0.5</annotation></semantics></math></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S4.F5.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x11.png" id="S4.F5.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="327" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(b) </span><math id="S4.F5.sf2.2.m1.1" class="ltx_Math" alttext="\alpha=5000" display="inline"><semantics id="S4.F5.sf2.2.m1.1b"><mrow id="S4.F5.sf2.2.m1.1.1" xref="S4.F5.sf2.2.m1.1.1.cmml"><mi id="S4.F5.sf2.2.m1.1.1.2" xref="S4.F5.sf2.2.m1.1.1.2.cmml">α</mi><mo id="S4.F5.sf2.2.m1.1.1.1" xref="S4.F5.sf2.2.m1.1.1.1.cmml">=</mo><mn id="S4.F5.sf2.2.m1.1.1.3" xref="S4.F5.sf2.2.m1.1.1.3.cmml">5000</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.F5.sf2.2.m1.1c"><apply id="S4.F5.sf2.2.m1.1.1.cmml" xref="S4.F5.sf2.2.m1.1.1"><eq id="S4.F5.sf2.2.m1.1.1.1.cmml" xref="S4.F5.sf2.2.m1.1.1.1"></eq><ci id="S4.F5.sf2.2.m1.1.1.2.cmml" xref="S4.F5.sf2.2.m1.1.1.2">𝛼</ci><cn type="integer" id="S4.F5.sf2.2.m1.1.1.3.cmml" xref="S4.F5.sf2.2.m1.1.1.3">5000</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.F5.sf2.2.m1.1d">\alpha=5000</annotation></semantics></math></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>Tier-aware optimizations have a higher fairness impact when there is higher system-induced data heterogeneity, if we exclude low-end devices from training for the Taobao dataset.</figcaption>
</figure>
</section>
<section id="S4.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Quantifying Fairness</h3>

<div id="S4.SS4.p1" class="ltx_para ltx_noindent">
<p id="S4.SS4.p1.5" class="ltx_p">To study whether an optimization strategy impacts each tier equally, we use the <em id="S4.SS4.p1.5.1" class="ltx_emph ltx_font_italic">relative accuracy change</em> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib59" title="" class="ltx_ref">59</a>, <a href="#bib.bib60" title="" class="ltx_ref">60</a>]</cite> for each tier before and after applying an optimization.
Mathematically, if model accuracy is <math id="S4.SS4.p1.1.m1.1" class="ltx_Math" alttext="\beta^{t}_{p}" display="inline"><semantics id="S4.SS4.p1.1.m1.1a"><msubsup id="S4.SS4.p1.1.m1.1.1" xref="S4.SS4.p1.1.m1.1.1.cmml"><mi id="S4.SS4.p1.1.m1.1.1.2.2" xref="S4.SS4.p1.1.m1.1.1.2.2.cmml">β</mi><mi id="S4.SS4.p1.1.m1.1.1.3" xref="S4.SS4.p1.1.m1.1.1.3.cmml">p</mi><mi id="S4.SS4.p1.1.m1.1.1.2.3" xref="S4.SS4.p1.1.m1.1.1.2.3.cmml">t</mi></msubsup><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.1.m1.1b"><apply id="S4.SS4.p1.1.m1.1.1.cmml" xref="S4.SS4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS4.p1.1.m1.1.1.1.cmml" xref="S4.SS4.p1.1.m1.1.1">subscript</csymbol><apply id="S4.SS4.p1.1.m1.1.1.2.cmml" xref="S4.SS4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS4.p1.1.m1.1.1.2.1.cmml" xref="S4.SS4.p1.1.m1.1.1">superscript</csymbol><ci id="S4.SS4.p1.1.m1.1.1.2.2.cmml" xref="S4.SS4.p1.1.m1.1.1.2.2">𝛽</ci><ci id="S4.SS4.p1.1.m1.1.1.2.3.cmml" xref="S4.SS4.p1.1.m1.1.1.2.3">𝑡</ci></apply><ci id="S4.SS4.p1.1.m1.1.1.3.cmml" xref="S4.SS4.p1.1.m1.1.1.3">𝑝</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.1.m1.1c">\beta^{t}_{p}</annotation></semantics></math> for tier <math id="S4.SS4.p1.2.m2.3" class="ltx_Math" alttext="t\in\{low,mid,high\}" display="inline"><semantics id="S4.SS4.p1.2.m2.3a"><mrow id="S4.SS4.p1.2.m2.3.3" xref="S4.SS4.p1.2.m2.3.3.cmml"><mi id="S4.SS4.p1.2.m2.3.3.5" xref="S4.SS4.p1.2.m2.3.3.5.cmml">t</mi><mo id="S4.SS4.p1.2.m2.3.3.4" xref="S4.SS4.p1.2.m2.3.3.4.cmml">∈</mo><mrow id="S4.SS4.p1.2.m2.3.3.3.3" xref="S4.SS4.p1.2.m2.3.3.3.4.cmml"><mo stretchy="false" id="S4.SS4.p1.2.m2.3.3.3.3.4" xref="S4.SS4.p1.2.m2.3.3.3.4.cmml">{</mo><mrow id="S4.SS4.p1.2.m2.1.1.1.1.1" xref="S4.SS4.p1.2.m2.1.1.1.1.1.cmml"><mi id="S4.SS4.p1.2.m2.1.1.1.1.1.2" xref="S4.SS4.p1.2.m2.1.1.1.1.1.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.SS4.p1.2.m2.1.1.1.1.1.1" xref="S4.SS4.p1.2.m2.1.1.1.1.1.1.cmml">​</mo><mi id="S4.SS4.p1.2.m2.1.1.1.1.1.3" xref="S4.SS4.p1.2.m2.1.1.1.1.1.3.cmml">o</mi><mo lspace="0em" rspace="0em" id="S4.SS4.p1.2.m2.1.1.1.1.1.1a" xref="S4.SS4.p1.2.m2.1.1.1.1.1.1.cmml">​</mo><mi id="S4.SS4.p1.2.m2.1.1.1.1.1.4" xref="S4.SS4.p1.2.m2.1.1.1.1.1.4.cmml">w</mi></mrow><mo id="S4.SS4.p1.2.m2.3.3.3.3.5" xref="S4.SS4.p1.2.m2.3.3.3.4.cmml">,</mo><mrow id="S4.SS4.p1.2.m2.2.2.2.2.2" xref="S4.SS4.p1.2.m2.2.2.2.2.2.cmml"><mi id="S4.SS4.p1.2.m2.2.2.2.2.2.2" xref="S4.SS4.p1.2.m2.2.2.2.2.2.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="S4.SS4.p1.2.m2.2.2.2.2.2.1" xref="S4.SS4.p1.2.m2.2.2.2.2.2.1.cmml">​</mo><mi id="S4.SS4.p1.2.m2.2.2.2.2.2.3" xref="S4.SS4.p1.2.m2.2.2.2.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.SS4.p1.2.m2.2.2.2.2.2.1a" xref="S4.SS4.p1.2.m2.2.2.2.2.2.1.cmml">​</mo><mi id="S4.SS4.p1.2.m2.2.2.2.2.2.4" xref="S4.SS4.p1.2.m2.2.2.2.2.2.4.cmml">d</mi></mrow><mo id="S4.SS4.p1.2.m2.3.3.3.3.6" xref="S4.SS4.p1.2.m2.3.3.3.4.cmml">,</mo><mrow id="S4.SS4.p1.2.m2.3.3.3.3.3" xref="S4.SS4.p1.2.m2.3.3.3.3.3.cmml"><mi id="S4.SS4.p1.2.m2.3.3.3.3.3.2" xref="S4.SS4.p1.2.m2.3.3.3.3.3.2.cmml">h</mi><mo lspace="0em" rspace="0em" id="S4.SS4.p1.2.m2.3.3.3.3.3.1" xref="S4.SS4.p1.2.m2.3.3.3.3.3.1.cmml">​</mo><mi id="S4.SS4.p1.2.m2.3.3.3.3.3.3" xref="S4.SS4.p1.2.m2.3.3.3.3.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.SS4.p1.2.m2.3.3.3.3.3.1a" xref="S4.SS4.p1.2.m2.3.3.3.3.3.1.cmml">​</mo><mi id="S4.SS4.p1.2.m2.3.3.3.3.3.4" xref="S4.SS4.p1.2.m2.3.3.3.3.3.4.cmml">g</mi><mo lspace="0em" rspace="0em" id="S4.SS4.p1.2.m2.3.3.3.3.3.1b" xref="S4.SS4.p1.2.m2.3.3.3.3.3.1.cmml">​</mo><mi id="S4.SS4.p1.2.m2.3.3.3.3.3.5" xref="S4.SS4.p1.2.m2.3.3.3.3.3.5.cmml">h</mi></mrow><mo stretchy="false" id="S4.SS4.p1.2.m2.3.3.3.3.7" xref="S4.SS4.p1.2.m2.3.3.3.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.2.m2.3b"><apply id="S4.SS4.p1.2.m2.3.3.cmml" xref="S4.SS4.p1.2.m2.3.3"><in id="S4.SS4.p1.2.m2.3.3.4.cmml" xref="S4.SS4.p1.2.m2.3.3.4"></in><ci id="S4.SS4.p1.2.m2.3.3.5.cmml" xref="S4.SS4.p1.2.m2.3.3.5">𝑡</ci><set id="S4.SS4.p1.2.m2.3.3.3.4.cmml" xref="S4.SS4.p1.2.m2.3.3.3.3"><apply id="S4.SS4.p1.2.m2.1.1.1.1.1.cmml" xref="S4.SS4.p1.2.m2.1.1.1.1.1"><times id="S4.SS4.p1.2.m2.1.1.1.1.1.1.cmml" xref="S4.SS4.p1.2.m2.1.1.1.1.1.1"></times><ci id="S4.SS4.p1.2.m2.1.1.1.1.1.2.cmml" xref="S4.SS4.p1.2.m2.1.1.1.1.1.2">𝑙</ci><ci id="S4.SS4.p1.2.m2.1.1.1.1.1.3.cmml" xref="S4.SS4.p1.2.m2.1.1.1.1.1.3">𝑜</ci><ci id="S4.SS4.p1.2.m2.1.1.1.1.1.4.cmml" xref="S4.SS4.p1.2.m2.1.1.1.1.1.4">𝑤</ci></apply><apply id="S4.SS4.p1.2.m2.2.2.2.2.2.cmml" xref="S4.SS4.p1.2.m2.2.2.2.2.2"><times id="S4.SS4.p1.2.m2.2.2.2.2.2.1.cmml" xref="S4.SS4.p1.2.m2.2.2.2.2.2.1"></times><ci id="S4.SS4.p1.2.m2.2.2.2.2.2.2.cmml" xref="S4.SS4.p1.2.m2.2.2.2.2.2.2">𝑚</ci><ci id="S4.SS4.p1.2.m2.2.2.2.2.2.3.cmml" xref="S4.SS4.p1.2.m2.2.2.2.2.2.3">𝑖</ci><ci id="S4.SS4.p1.2.m2.2.2.2.2.2.4.cmml" xref="S4.SS4.p1.2.m2.2.2.2.2.2.4">𝑑</ci></apply><apply id="S4.SS4.p1.2.m2.3.3.3.3.3.cmml" xref="S4.SS4.p1.2.m2.3.3.3.3.3"><times id="S4.SS4.p1.2.m2.3.3.3.3.3.1.cmml" xref="S4.SS4.p1.2.m2.3.3.3.3.3.1"></times><ci id="S4.SS4.p1.2.m2.3.3.3.3.3.2.cmml" xref="S4.SS4.p1.2.m2.3.3.3.3.3.2">ℎ</ci><ci id="S4.SS4.p1.2.m2.3.3.3.3.3.3.cmml" xref="S4.SS4.p1.2.m2.3.3.3.3.3.3">𝑖</ci><ci id="S4.SS4.p1.2.m2.3.3.3.3.3.4.cmml" xref="S4.SS4.p1.2.m2.3.3.3.3.3.4">𝑔</ci><ci id="S4.SS4.p1.2.m2.3.3.3.3.3.5.cmml" xref="S4.SS4.p1.2.m2.3.3.3.3.3.5">ℎ</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.2.m2.3c">t\in\{low,mid,high\}</annotation></semantics></math> and an optimization <math id="S4.SS4.p1.3.m3.1" class="ltx_Math" alttext="p" display="inline"><semantics id="S4.SS4.p1.3.m3.1a"><mi id="S4.SS4.p1.3.m3.1.1" xref="S4.SS4.p1.3.m3.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.3.m3.1b"><ci id="S4.SS4.p1.3.m3.1.1.cmml" xref="S4.SS4.p1.3.m3.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.3.m3.1c">p</annotation></semantics></math> (<math id="S4.SS4.p1.4.m4.1" class="ltx_Math" alttext="p=0" display="inline"><semantics id="S4.SS4.p1.4.m4.1a"><mrow id="S4.SS4.p1.4.m4.1.1" xref="S4.SS4.p1.4.m4.1.1.cmml"><mi id="S4.SS4.p1.4.m4.1.1.2" xref="S4.SS4.p1.4.m4.1.1.2.cmml">p</mi><mo id="S4.SS4.p1.4.m4.1.1.1" xref="S4.SS4.p1.4.m4.1.1.1.cmml">=</mo><mn id="S4.SS4.p1.4.m4.1.1.3" xref="S4.SS4.p1.4.m4.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.4.m4.1b"><apply id="S4.SS4.p1.4.m4.1.1.cmml" xref="S4.SS4.p1.4.m4.1.1"><eq id="S4.SS4.p1.4.m4.1.1.1.cmml" xref="S4.SS4.p1.4.m4.1.1.1"></eq><ci id="S4.SS4.p1.4.m4.1.1.2.cmml" xref="S4.SS4.p1.4.m4.1.1.2">𝑝</ci><cn type="integer" id="S4.SS4.p1.4.m4.1.1.3.cmml" xref="S4.SS4.p1.4.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.4.m4.1c">p=0</annotation></semantics></math> is no-optimization) is applied, the relative accuracy change for tier <math id="S4.SS4.p1.5.m5.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S4.SS4.p1.5.m5.1a"><mi id="S4.SS4.p1.5.m5.1.1" xref="S4.SS4.p1.5.m5.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p1.5.m5.1b"><ci id="S4.SS4.p1.5.m5.1.1.cmml" xref="S4.SS4.p1.5.m5.1.1">𝑡</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p1.5.m5.1c">t</annotation></semantics></math> is defined as:</p>
</div>
<div id="S4.SS4.p2" class="ltx_para ltx_noindent">
<table id="S4.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S4.E1.m1.1" class="ltx_Math" alttext="\frac{\beta^{t}_{p}-\beta^{t}_{0}}{\beta^{t}_{0}}" display="block"><semantics id="S4.E1.m1.1a"><mfrac id="S4.E1.m1.1.1" xref="S4.E1.m1.1.1.cmml"><mrow id="S4.E1.m1.1.1.2" xref="S4.E1.m1.1.1.2.cmml"><msubsup id="S4.E1.m1.1.1.2.2" xref="S4.E1.m1.1.1.2.2.cmml"><mi id="S4.E1.m1.1.1.2.2.2.2" xref="S4.E1.m1.1.1.2.2.2.2.cmml">β</mi><mi id="S4.E1.m1.1.1.2.2.3" xref="S4.E1.m1.1.1.2.2.3.cmml">p</mi><mi id="S4.E1.m1.1.1.2.2.2.3" xref="S4.E1.m1.1.1.2.2.2.3.cmml">t</mi></msubsup><mo id="S4.E1.m1.1.1.2.1" xref="S4.E1.m1.1.1.2.1.cmml">−</mo><msubsup id="S4.E1.m1.1.1.2.3" xref="S4.E1.m1.1.1.2.3.cmml"><mi id="S4.E1.m1.1.1.2.3.2.2" xref="S4.E1.m1.1.1.2.3.2.2.cmml">β</mi><mn id="S4.E1.m1.1.1.2.3.3" xref="S4.E1.m1.1.1.2.3.3.cmml">0</mn><mi id="S4.E1.m1.1.1.2.3.2.3" xref="S4.E1.m1.1.1.2.3.2.3.cmml">t</mi></msubsup></mrow><msubsup id="S4.E1.m1.1.1.3" xref="S4.E1.m1.1.1.3.cmml"><mi id="S4.E1.m1.1.1.3.2.2" xref="S4.E1.m1.1.1.3.2.2.cmml">β</mi><mn id="S4.E1.m1.1.1.3.3" xref="S4.E1.m1.1.1.3.3.cmml">0</mn><mi id="S4.E1.m1.1.1.3.2.3" xref="S4.E1.m1.1.1.3.2.3.cmml">t</mi></msubsup></mfrac><annotation-xml encoding="MathML-Content" id="S4.E1.m1.1b"><apply id="S4.E1.m1.1.1.cmml" xref="S4.E1.m1.1.1"><divide id="S4.E1.m1.1.1.1.cmml" xref="S4.E1.m1.1.1"></divide><apply id="S4.E1.m1.1.1.2.cmml" xref="S4.E1.m1.1.1.2"><minus id="S4.E1.m1.1.1.2.1.cmml" xref="S4.E1.m1.1.1.2.1"></minus><apply id="S4.E1.m1.1.1.2.2.cmml" xref="S4.E1.m1.1.1.2.2"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.2.2.1.cmml" xref="S4.E1.m1.1.1.2.2">subscript</csymbol><apply id="S4.E1.m1.1.1.2.2.2.cmml" xref="S4.E1.m1.1.1.2.2"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.2.2.2.1.cmml" xref="S4.E1.m1.1.1.2.2">superscript</csymbol><ci id="S4.E1.m1.1.1.2.2.2.2.cmml" xref="S4.E1.m1.1.1.2.2.2.2">𝛽</ci><ci id="S4.E1.m1.1.1.2.2.2.3.cmml" xref="S4.E1.m1.1.1.2.2.2.3">𝑡</ci></apply><ci id="S4.E1.m1.1.1.2.2.3.cmml" xref="S4.E1.m1.1.1.2.2.3">𝑝</ci></apply><apply id="S4.E1.m1.1.1.2.3.cmml" xref="S4.E1.m1.1.1.2.3"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.2.3.1.cmml" xref="S4.E1.m1.1.1.2.3">subscript</csymbol><apply id="S4.E1.m1.1.1.2.3.2.cmml" xref="S4.E1.m1.1.1.2.3"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.2.3.2.1.cmml" xref="S4.E1.m1.1.1.2.3">superscript</csymbol><ci id="S4.E1.m1.1.1.2.3.2.2.cmml" xref="S4.E1.m1.1.1.2.3.2.2">𝛽</ci><ci id="S4.E1.m1.1.1.2.3.2.3.cmml" xref="S4.E1.m1.1.1.2.3.2.3">𝑡</ci></apply><cn type="integer" id="S4.E1.m1.1.1.2.3.3.cmml" xref="S4.E1.m1.1.1.2.3.3">0</cn></apply></apply><apply id="S4.E1.m1.1.1.3.cmml" xref="S4.E1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.3.1.cmml" xref="S4.E1.m1.1.1.3">subscript</csymbol><apply id="S4.E1.m1.1.1.3.2.cmml" xref="S4.E1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.E1.m1.1.1.3.2.1.cmml" xref="S4.E1.m1.1.1.3">superscript</csymbol><ci id="S4.E1.m1.1.1.3.2.2.cmml" xref="S4.E1.m1.1.1.3.2.2">𝛽</ci><ci id="S4.E1.m1.1.1.3.2.3.cmml" xref="S4.E1.m1.1.1.3.2.3">𝑡</ci></apply><cn type="integer" id="S4.E1.m1.1.1.3.3.cmml" xref="S4.E1.m1.1.1.3.3">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E1.m1.1c">\frac{\beta^{t}_{p}-\beta^{t}_{0}}{\beta^{t}_{0}}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
</div>
<div id="S4.SS4.p3" class="ltx_para ltx_noindent">
<p id="S4.SS4.p3.1" class="ltx_p">To quantify the fairness impact of an optimization <math id="S4.SS4.p3.1.m1.1" class="ltx_Math" alttext="p" display="inline"><semantics id="S4.SS4.p3.1.m1.1a"><mi id="S4.SS4.p3.1.m1.1.1" xref="S4.SS4.p3.1.m1.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="S4.SS4.p3.1.m1.1b"><ci id="S4.SS4.p3.1.m1.1.1.cmml" xref="S4.SS4.p3.1.m1.1.1">𝑝</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS4.p3.1.m1.1c">p</annotation></semantics></math> across tiers, we report the <em id="S4.SS4.p3.1.1" class="ltx_emph ltx_font_italic">maximum difference in the accuracy change (<span id="S4.SS4.p3.1.1.1" class="ltx_text ltx_font_bold">MDAC</span>)</em> between tiers. MDAC is higher if an optimization is more unfair, and 0 if perfectly fair. It is defined as:</p>
</div>
<div id="S4.SS4.p4" class="ltx_para ltx_noindent">
<table id="S4.E2" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S4.E2.m1.6" class="ltx_Math" alttext="max(|\frac{\beta^{t_{i}}_{p}-\beta^{t_{i}}_{0}}{\beta^{t_{i}}_{0}}-\frac{\beta^{t_{j}}_{p}-\beta^{t_{j}}_{0}}{\beta^{t_{j}}_{0}}|),t_{i},t_{j}\in\{low,mid,high\}" display="block"><semantics id="S4.E2.m1.6a"><mrow id="S4.E2.m1.6.6" xref="S4.E2.m1.6.6.cmml"><mrow id="S4.E2.m1.3.3.3.3" xref="S4.E2.m1.3.3.3.4.cmml"><mrow id="S4.E2.m1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.cmml"><mi id="S4.E2.m1.1.1.1.1.1.3" xref="S4.E2.m1.1.1.1.1.1.3.cmml">m</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.1.1.1.1.1.2" xref="S4.E2.m1.1.1.1.1.1.2.cmml">​</mo><mi id="S4.E2.m1.1.1.1.1.1.4" xref="S4.E2.m1.1.1.1.1.1.4.cmml">a</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.1.1.1.1.1.2a" xref="S4.E2.m1.1.1.1.1.1.2.cmml">​</mo><mi id="S4.E2.m1.1.1.1.1.1.5" xref="S4.E2.m1.1.1.1.1.1.5.cmml">x</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.1.1.1.1.1.2b" xref="S4.E2.m1.1.1.1.1.1.2.cmml">​</mo><mrow id="S4.E2.m1.1.1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.cmml"><mo stretchy="false" id="S4.E2.m1.1.1.1.1.1.1.1.2" xref="S4.E2.m1.1.1.1.1.1.cmml">(</mo><mrow id="S4.E2.m1.1.1.1.1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.2.1.cmml">|</mo><mrow id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.cmml"><mfrac id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.cmml"><mrow id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.cmml"><msubsup id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.2.cmml">β</mi><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml">p</mi><msub id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.2.cmml">t</mi><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.3.cmml">i</mi></msub></msubsup><mo id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.1" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.1.cmml">−</mo><msubsup id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.2.cmml">β</mi><mn id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.3.cmml">0</mn><msub id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.2.cmml">t</mi><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.3.cmml">i</mi></msub></msubsup></mrow><msubsup id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.2.cmml">β</mi><mn id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.3.cmml">0</mn><msub id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.2.cmml">t</mi><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.3.cmml">i</mi></msub></msubsup></mfrac><mo id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.1" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.1.cmml">−</mo><mfrac id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.cmml"><mrow id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.cmml"><msubsup id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.2.cmml">β</mi><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.3.cmml">p</mi><msub id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.2.cmml">t</mi><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.3.cmml">j</mi></msub></msubsup><mo id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.1" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.1.cmml">−</mo><msubsup id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.2.cmml">β</mi><mn id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.3.cmml">0</mn><msub id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.2.cmml">t</mi><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.3.cmml">j</mi></msub></msubsup></mrow><msubsup id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.2.cmml">β</mi><mn id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.3.cmml">0</mn><msub id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.cmml"><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.2" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.2.cmml">t</mi><mi id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.3.cmml">j</mi></msub></msubsup></mfrac></mrow><mo stretchy="false" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.3" xref="S4.E2.m1.1.1.1.1.1.1.1.1.2.1.cmml">|</mo></mrow><mo stretchy="false" id="S4.E2.m1.1.1.1.1.1.1.1.3" xref="S4.E2.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S4.E2.m1.3.3.3.3.4" xref="S4.E2.m1.3.3.3.4.cmml">,</mo><msub id="S4.E2.m1.2.2.2.2.2" xref="S4.E2.m1.2.2.2.2.2.cmml"><mi id="S4.E2.m1.2.2.2.2.2.2" xref="S4.E2.m1.2.2.2.2.2.2.cmml">t</mi><mi id="S4.E2.m1.2.2.2.2.2.3" xref="S4.E2.m1.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S4.E2.m1.3.3.3.3.5" xref="S4.E2.m1.3.3.3.4.cmml">,</mo><msub id="S4.E2.m1.3.3.3.3.3" xref="S4.E2.m1.3.3.3.3.3.cmml"><mi id="S4.E2.m1.3.3.3.3.3.2" xref="S4.E2.m1.3.3.3.3.3.2.cmml">t</mi><mi id="S4.E2.m1.3.3.3.3.3.3" xref="S4.E2.m1.3.3.3.3.3.3.cmml">j</mi></msub></mrow><mo id="S4.E2.m1.6.6.7" xref="S4.E2.m1.6.6.7.cmml">∈</mo><mrow id="S4.E2.m1.6.6.6.3" xref="S4.E2.m1.6.6.6.4.cmml"><mo stretchy="false" id="S4.E2.m1.6.6.6.3.4" xref="S4.E2.m1.6.6.6.4.cmml">{</mo><mrow id="S4.E2.m1.4.4.4.1.1" xref="S4.E2.m1.4.4.4.1.1.cmml"><mi id="S4.E2.m1.4.4.4.1.1.2" xref="S4.E2.m1.4.4.4.1.1.2.cmml">l</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.4.4.4.1.1.1" xref="S4.E2.m1.4.4.4.1.1.1.cmml">​</mo><mi id="S4.E2.m1.4.4.4.1.1.3" xref="S4.E2.m1.4.4.4.1.1.3.cmml">o</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.4.4.4.1.1.1a" xref="S4.E2.m1.4.4.4.1.1.1.cmml">​</mo><mi id="S4.E2.m1.4.4.4.1.1.4" xref="S4.E2.m1.4.4.4.1.1.4.cmml">w</mi></mrow><mo id="S4.E2.m1.6.6.6.3.5" xref="S4.E2.m1.6.6.6.4.cmml">,</mo><mrow id="S4.E2.m1.5.5.5.2.2" xref="S4.E2.m1.5.5.5.2.2.cmml"><mi id="S4.E2.m1.5.5.5.2.2.2" xref="S4.E2.m1.5.5.5.2.2.2.cmml">m</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.5.5.5.2.2.1" xref="S4.E2.m1.5.5.5.2.2.1.cmml">​</mo><mi id="S4.E2.m1.5.5.5.2.2.3" xref="S4.E2.m1.5.5.5.2.2.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.5.5.5.2.2.1a" xref="S4.E2.m1.5.5.5.2.2.1.cmml">​</mo><mi id="S4.E2.m1.5.5.5.2.2.4" xref="S4.E2.m1.5.5.5.2.2.4.cmml">d</mi></mrow><mo id="S4.E2.m1.6.6.6.3.6" xref="S4.E2.m1.6.6.6.4.cmml">,</mo><mrow id="S4.E2.m1.6.6.6.3.3" xref="S4.E2.m1.6.6.6.3.3.cmml"><mi id="S4.E2.m1.6.6.6.3.3.2" xref="S4.E2.m1.6.6.6.3.3.2.cmml">h</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.6.6.6.3.3.1" xref="S4.E2.m1.6.6.6.3.3.1.cmml">​</mo><mi id="S4.E2.m1.6.6.6.3.3.3" xref="S4.E2.m1.6.6.6.3.3.3.cmml">i</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.6.6.6.3.3.1a" xref="S4.E2.m1.6.6.6.3.3.1.cmml">​</mo><mi id="S4.E2.m1.6.6.6.3.3.4" xref="S4.E2.m1.6.6.6.3.3.4.cmml">g</mi><mo lspace="0em" rspace="0em" id="S4.E2.m1.6.6.6.3.3.1b" xref="S4.E2.m1.6.6.6.3.3.1.cmml">​</mo><mi id="S4.E2.m1.6.6.6.3.3.5" xref="S4.E2.m1.6.6.6.3.3.5.cmml">h</mi></mrow><mo stretchy="false" id="S4.E2.m1.6.6.6.3.7" xref="S4.E2.m1.6.6.6.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.E2.m1.6b"><apply id="S4.E2.m1.6.6.cmml" xref="S4.E2.m1.6.6"><in id="S4.E2.m1.6.6.7.cmml" xref="S4.E2.m1.6.6.7"></in><list id="S4.E2.m1.3.3.3.4.cmml" xref="S4.E2.m1.3.3.3.3"><apply id="S4.E2.m1.1.1.1.1.1.cmml" xref="S4.E2.m1.1.1.1.1.1"><times id="S4.E2.m1.1.1.1.1.1.2.cmml" xref="S4.E2.m1.1.1.1.1.1.2"></times><ci id="S4.E2.m1.1.1.1.1.1.3.cmml" xref="S4.E2.m1.1.1.1.1.1.3">𝑚</ci><ci id="S4.E2.m1.1.1.1.1.1.4.cmml" xref="S4.E2.m1.1.1.1.1.1.4">𝑎</ci><ci id="S4.E2.m1.1.1.1.1.1.5.cmml" xref="S4.E2.m1.1.1.1.1.1.5">𝑥</ci><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1"><abs id="S4.E2.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.2"></abs><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1"><minus id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.1"></minus><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2"><divide id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2"></divide><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2"><minus id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.1"></minus><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2">subscript</csymbol><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2">superscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.2">𝛽</ci><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3">subscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.2">𝑡</ci><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.2.3.3">𝑖</ci></apply></apply><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.2.3">𝑝</ci></apply><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3">subscript</csymbol><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3">superscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.2">𝛽</ci><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3">subscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.2">𝑡</ci><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.2.3.3">𝑖</ci></apply></apply><cn type="integer" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.2.3.3">0</cn></apply></apply><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3">subscript</csymbol><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3">superscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.2">𝛽</ci><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3">subscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.2">𝑡</ci><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.2.3.3">𝑖</ci></apply></apply><cn type="integer" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.2.3.3">0</cn></apply></apply><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3"><divide id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3"></divide><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2"><minus id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.1"></minus><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2">subscript</csymbol><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2">superscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.2">𝛽</ci><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3">subscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.2">𝑡</ci><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.2.3.3">𝑗</ci></apply></apply><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.2.3">𝑝</ci></apply><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3">subscript</csymbol><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3">superscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.2">𝛽</ci><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3">subscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.2">𝑡</ci><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.2.3.3">𝑗</ci></apply></apply><cn type="integer" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.2.3.3">0</cn></apply></apply><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3">subscript</csymbol><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3">superscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.2">𝛽</ci><apply id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3"><csymbol cd="ambiguous" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.1.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3">subscript</csymbol><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.2.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.2">𝑡</ci><ci id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.2.3.3">𝑗</ci></apply></apply><cn type="integer" id="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S4.E2.m1.1.1.1.1.1.1.1.1.1.1.3.3.3">0</cn></apply></apply></apply></apply></apply><apply id="S4.E2.m1.2.2.2.2.2.cmml" xref="S4.E2.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S4.E2.m1.2.2.2.2.2.1.cmml" xref="S4.E2.m1.2.2.2.2.2">subscript</csymbol><ci id="S4.E2.m1.2.2.2.2.2.2.cmml" xref="S4.E2.m1.2.2.2.2.2.2">𝑡</ci><ci id="S4.E2.m1.2.2.2.2.2.3.cmml" xref="S4.E2.m1.2.2.2.2.2.3">𝑖</ci></apply><apply id="S4.E2.m1.3.3.3.3.3.cmml" xref="S4.E2.m1.3.3.3.3.3"><csymbol cd="ambiguous" id="S4.E2.m1.3.3.3.3.3.1.cmml" xref="S4.E2.m1.3.3.3.3.3">subscript</csymbol><ci id="S4.E2.m1.3.3.3.3.3.2.cmml" xref="S4.E2.m1.3.3.3.3.3.2">𝑡</ci><ci id="S4.E2.m1.3.3.3.3.3.3.cmml" xref="S4.E2.m1.3.3.3.3.3.3">𝑗</ci></apply></list><set id="S4.E2.m1.6.6.6.4.cmml" xref="S4.E2.m1.6.6.6.3"><apply id="S4.E2.m1.4.4.4.1.1.cmml" xref="S4.E2.m1.4.4.4.1.1"><times id="S4.E2.m1.4.4.4.1.1.1.cmml" xref="S4.E2.m1.4.4.4.1.1.1"></times><ci id="S4.E2.m1.4.4.4.1.1.2.cmml" xref="S4.E2.m1.4.4.4.1.1.2">𝑙</ci><ci id="S4.E2.m1.4.4.4.1.1.3.cmml" xref="S4.E2.m1.4.4.4.1.1.3">𝑜</ci><ci id="S4.E2.m1.4.4.4.1.1.4.cmml" xref="S4.E2.m1.4.4.4.1.1.4">𝑤</ci></apply><apply id="S4.E2.m1.5.5.5.2.2.cmml" xref="S4.E2.m1.5.5.5.2.2"><times id="S4.E2.m1.5.5.5.2.2.1.cmml" xref="S4.E2.m1.5.5.5.2.2.1"></times><ci id="S4.E2.m1.5.5.5.2.2.2.cmml" xref="S4.E2.m1.5.5.5.2.2.2">𝑚</ci><ci id="S4.E2.m1.5.5.5.2.2.3.cmml" xref="S4.E2.m1.5.5.5.2.2.3">𝑖</ci><ci id="S4.E2.m1.5.5.5.2.2.4.cmml" xref="S4.E2.m1.5.5.5.2.2.4">𝑑</ci></apply><apply id="S4.E2.m1.6.6.6.3.3.cmml" xref="S4.E2.m1.6.6.6.3.3"><times id="S4.E2.m1.6.6.6.3.3.1.cmml" xref="S4.E2.m1.6.6.6.3.3.1"></times><ci id="S4.E2.m1.6.6.6.3.3.2.cmml" xref="S4.E2.m1.6.6.6.3.3.2">ℎ</ci><ci id="S4.E2.m1.6.6.6.3.3.3.cmml" xref="S4.E2.m1.6.6.6.3.3.3">𝑖</ci><ci id="S4.E2.m1.6.6.6.3.3.4.cmml" xref="S4.E2.m1.6.6.6.3.3.4">𝑔</ci><ci id="S4.E2.m1.6.6.6.3.3.5.cmml" xref="S4.E2.m1.6.6.6.3.3.5">ℎ</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.E2.m1.6c">max(|\frac{\beta^{t_{i}}_{p}-\beta^{t_{i}}_{0}}{\beta^{t_{i}}_{0}}-\frac{\beta^{t_{j}}_{p}-\beta^{t_{j}}_{0}}{\beta^{t_{j}}_{0}}|),t_{i},t_{j}\in\{low,mid,high\}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Evaluation Methodology</h2>

<section id="S5.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Deep Learning Recommendation Models and Datasets</h3>

<section id="S5.SS1.SSS0.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Datasets</h5>

<div id="S5.SS1.SSS0.Px1.p1" class="ltx_para ltx_noindent">
<p id="S5.SS1.SSS0.Px1.p1.1" class="ltx_p">We study two commonly-used open-source recommendation datasets, Taobao Ad Display/Click Data <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib55" title="" class="ltx_ref">55</a>]</cite> (i.e., Taobao dataset) and MovieLens-20M <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib56" title="" class="ltx_ref">56</a>]</cite> (i.e., MovieLens dataset).
The Taobao dataset shows 26 million interactions (click/non-click) between 1.14 million users and 847 thousand item ads across an 8-day period. Each user has 9 sparse features (e.g., gender or occupation), each ad has one dense (price) and 5 sparse (e.g., category or brand) features, and each event has one sparse feature that encodes the ”scenario” <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib55" title="" class="ltx_ref">55</a>]</cite>.
The MovieLens dataset provides 20 million movie ratings for 27 thousand movies from 138 thousand users, along with the genre information for each movie. To convert it into a click/non-click dataset, we considered a 5-star rating as click and others as non-click <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>.
Following prior work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>, we did not use user ID as a user feature for privacy. Instead, we augmented the user features with the user history of previously clicked items (ads, categories, and brands for Taobao, movies for MovieLens).
For Taobao, we additionally used the day of the week information <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>.
We applied logarithm to Taobao’s item price feature because the range of the value is very large, from 0.01 to 100 million.</p>
</div>
</section>
<section id="S5.SS1.SSS0.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Models</h5>

<div id="S5.SS1.SSS0.Px2.p1" class="ltx_para ltx_noindent">
<p id="S5.SS1.SSS0.Px2.p1.1" class="ltx_p">We evaluated two state-of-the-art deep recommender models, DLRM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref">28</a>, <a href="#bib.bib61" title="" class="ltx_ref">61</a>]</cite> and DIN <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>. We did not study models that directly use user IDs, e.g., NeuMF <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib32" title="" class="ltx_ref">32</a>]</cite>, for enhanced privacy.
DLRM <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite> is a model developed by Meta.
In DLRM, dense features go through a bottom MLP and are mixed with the output of the embedding tables through a pairwise dot product. The output goes through a top MLP to produce the final prediction.
DIN <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite> is a model proposed by Alibaba.
In DIN, the user history features go through an <em id="S5.SS1.SSS0.Px2.p1.1.1" class="ltx_emph ltx_font_italic">attention layer</em> after the embedding tables, which predicts the importance of each history and gives a larger weight to the history that is more relevant to the current item. After being re-weighted, the features are concatenated with the dense features and go through an MLP for prediction.
For both models, we used the top MLP with a single hidden layer of size 256, and embedding tables with a dimension of 16. For DLRM, we used a bottom MLP with a hidden layer size 16. For DIN’s attention layer, we used two hidden layers of sizes 64 and 16 and used Dice activation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite> without batch normalization. For clients, we used full-batch SGD with lr=1.0 for both datasets. For the server, we used AdaGrad with lr=0.01 for Taobao and lr=0.1 for MovieLens.</p>
</div>
<div id="S5.SS1.SSS0.Px2.p2" class="ltx_para ltx_noindent">
<p id="S5.SS1.SSS0.Px2.p2.1" class="ltx_p">We used ROC-AUC <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib62" title="" class="ltx_ref">62</a>]</cite>, or AUC for short, as the accuracy metric. AUC measures the model quality well when the labels are extremely biased (e.g., when most of the ads are not clicked) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>, <a href="#bib.bib27" title="" class="ltx_ref">27</a>, <a href="#bib.bib63" title="" class="ltx_ref">63</a>, <a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite>.
As a reference, the achieved test AUC after 1 epoch of non-FL training was 0.6096/0.6049 for the Taobao dataset with DLRM/DIN and 0.7995/0.7666 for the MovieLens dataset with DLRM/DIN, being similar to prior work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>.
The achieved test AUC after FL training with all clients exactly once was 0.5966/0.5941 (Taobao, DLRM/DIN) and 0.7954/0.7538 (MovieLens, DLRM/DIN), which are the values used as a baseline AUC for our fairness metric (MDAC) calculation. It is hard to compare our FL results with prior work directly because no prior work trained the exact same datasets and models in an FL setup; however, the achieved AUC falls into a similar range as prior work that used similar datasets <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>.</p>
</div>
</section>
</section>
<section id="S5.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Tier-Aware Optimizations</h3>

<div id="S5.SS2.p1" class="ltx_para ltx_noindent">
<p id="S5.SS2.p1.1" class="ltx_p">We explored six classes of tier-aware optimization techniques explained in Section <a href="#S4.SS3" title="4.3 Supporting Popular Tier-Aware Optimizations in FL ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.3</span></a> (Exclude Lo, Overselect, Prune, Quant, QuantS, Channel). For Prune, Quant, QuantS, and Channel, we explore three different configurations each, which impose roughly 1:2:4, 1:2:8, or 1:4:16 communication/computation overheads to low-, mid-, and high-end devices. Table <a href="#S5.T1" title="Table 1 ‣ 5.2 Tier-Aware Optimizations ‣ 5 Evaluation Methodology ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> summarizes the 14 configurations we studied.</p>
</div>
<figure id="S5.T1" class="ltx_table">
<table id="S5.T1.3" class="ltx_tabular ltx_centering ltx_align_middle">
<tr id="S5.T1.3.1" class="ltx_tr">
<td id="S5.T1.3.1.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">name</td>
<td id="S5.T1.3.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">overhead ratio</td>
<td id="S5.T1.3.1.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">optimization for each tier</td>
</tr>
<tr id="S5.T1.3.2" class="ltx_tr">
<td id="S5.T1.3.2.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">Exclude Lo</td>
<td id="S5.T1.3.2.2" class="ltx_td ltx_border_r ltx_border_t"></td>
<td id="S5.T1.3.2.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<span id="S5.T1.3.2.3.1" class="ltx_text"></span><span id="S5.T1.3.2.3.2" class="ltx_text">
<span id="S5.T1.3.2.3.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.2.3.2.1.1" class="ltx_tr">
<span id="S5.T1.3.2.3.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Prohibits low-end devices from FL training.</span></span>
</span></span><span id="S5.T1.3.2.3.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.3" class="ltx_tr">
<td id="S5.T1.3.3.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">Overselect</td>
<td id="S5.T1.3.3.2" class="ltx_td ltx_border_r ltx_border_t"></td>
<td id="S5.T1.3.3.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<span id="S5.T1.3.3.3.1" class="ltx_text"></span><span id="S5.T1.3.3.3.2" class="ltx_text">
<span id="S5.T1.3.3.3.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.3.3.2.1.1" class="ltx_tr">
<span id="S5.T1.3.3.3.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Selects and drops 20% extra clients.</span></span>
</span></span><span id="S5.T1.3.3.3.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.4" class="ltx_tr">
<td id="S5.T1.3.4.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" rowspan="3"><span id="S5.T1.3.4.1.1" class="ltx_text">Prune</span></td>
<td id="S5.T1.3.4.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1:2:4</td>
<td id="S5.T1.3.4.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<span id="S5.T1.3.4.3.1" class="ltx_text"></span><span id="S5.T1.3.4.3.2" class="ltx_text">
<span id="S5.T1.3.4.3.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.4.3.2.1.1" class="ltx_tr">
<span id="S5.T1.3.4.3.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Prunes 75% (low), 50% (mid), and 0% (high) of the gradients.</span></span>
</span></span><span id="S5.T1.3.4.3.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.5" class="ltx_tr">
<td id="S5.T1.3.5.1" class="ltx_td ltx_align_center ltx_border_r">1:2:8</td>
<td id="S5.T1.3.5.2" class="ltx_td ltx_align_center ltx_border_r">
<span id="S5.T1.3.5.2.1" class="ltx_text"></span><span id="S5.T1.3.5.2.2" class="ltx_text">
<span id="S5.T1.3.5.2.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.5.2.2.1.1" class="ltx_tr">
<span id="S5.T1.3.5.2.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Prunes 87.5% (low), 75% (mid), and 0% (high) of the gradients.</span></span>
</span></span><span id="S5.T1.3.5.2.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.6" class="ltx_tr">
<td id="S5.T1.3.6.1" class="ltx_td ltx_align_center ltx_border_r">1:4:16</td>
<td id="S5.T1.3.6.2" class="ltx_td ltx_align_center ltx_border_r">
<span id="S5.T1.3.6.2.1" class="ltx_text"></span><span id="S5.T1.3.6.2.2" class="ltx_text">
<span id="S5.T1.3.6.2.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.6.2.2.1.1" class="ltx_tr">
<span id="S5.T1.3.6.2.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Prunes 93.75% (low), 75% (mid), and 0% (high) of the gradients.</span></span>
</span></span><span id="S5.T1.3.6.2.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.7" class="ltx_tr">
<td id="S5.T1.3.7.1" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" rowspan="3"><span id="S5.T1.3.7.1.1" class="ltx_text"><span id="S5.T1.3.7.1.1.1" class="ltx_text"></span> <span id="S5.T1.3.7.1.1.2" class="ltx_text">
<span id="S5.T1.3.7.1.1.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.7.1.1.2.1.1" class="ltx_tr">
<span id="S5.T1.3.7.1.1.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_center">Quant</span></span>
<span id="S5.T1.3.7.1.1.2.1.2" class="ltx_tr">
<span id="S5.T1.3.7.1.1.2.1.2.1" class="ltx_td ltx_nopad_r ltx_align_center">QuantS</span></span>
</span></span> <span id="S5.T1.3.7.1.1.3" class="ltx_text"></span></span></td>
<td id="S5.T1.3.7.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1:2:4</td>
<td id="S5.T1.3.7.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<span id="S5.T1.3.7.3.1" class="ltx_text"></span><span id="S5.T1.3.7.3.2" class="ltx_text">
<span id="S5.T1.3.7.3.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.7.3.2.1.1" class="ltx_tr">
<span id="S5.T1.3.7.3.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Quantize the gradients using 8 (low), 16 (mid), and 32bits (high).</span></span>
</span></span><span id="S5.T1.3.7.3.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.8" class="ltx_tr">
<td id="S5.T1.3.8.1" class="ltx_td ltx_align_center ltx_border_r">1:2:8</td>
<td id="S5.T1.3.8.2" class="ltx_td ltx_align_center ltx_border_r">
<span id="S5.T1.3.8.2.1" class="ltx_text"></span><span id="S5.T1.3.8.2.2" class="ltx_text">
<span id="S5.T1.3.8.2.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.8.2.2.1.1" class="ltx_tr">
<span id="S5.T1.3.8.2.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Quantize the gradients using 4 (low), 8 (mid), and 32bits (high).</span></span>
</span></span><span id="S5.T1.3.8.2.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.9" class="ltx_tr">
<td id="S5.T1.3.9.1" class="ltx_td ltx_align_center ltx_border_r">1:4:16</td>
<td id="S5.T1.3.9.2" class="ltx_td ltx_align_center ltx_border_r">
<span id="S5.T1.3.9.2.1" class="ltx_text"></span><span id="S5.T1.3.9.2.2" class="ltx_text">
<span id="S5.T1.3.9.2.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.9.2.2.1.1" class="ltx_tr">
<span id="S5.T1.3.9.2.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Quantize the gradients using 2 (low), 4 (mid), and 32bits (high).</span></span>
</span></span><span id="S5.T1.3.9.2.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.10" class="ltx_tr">
<td id="S5.T1.3.10.1" class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t" rowspan="3"><span id="S5.T1.3.10.1.1" class="ltx_text"><span id="S5.T1.3.10.1.1.1" class="ltx_text"></span> <span id="S5.T1.3.10.1.1.2" class="ltx_text">
<span id="S5.T1.3.10.1.1.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.10.1.1.2.1.1" class="ltx_tr">
<span id="S5.T1.3.10.1.1.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_center">Channel</span></span>
</span></span> <span id="S5.T1.3.10.1.1.3" class="ltx_text"></span></span></td>
<td id="S5.T1.3.10.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">1:2:4</td>
<td id="S5.T1.3.10.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<span id="S5.T1.3.10.3.1" class="ltx_text"></span><span id="S5.T1.3.10.3.2" class="ltx_text">
<span id="S5.T1.3.10.3.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.10.3.2.1.1" class="ltx_tr">
<span id="S5.T1.3.10.3.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Use 25% (low), 50% (mid), and 100% (high) of the original channel size.</span></span>
</span></span><span id="S5.T1.3.10.3.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.11" class="ltx_tr">
<td id="S5.T1.3.11.1" class="ltx_td ltx_align_center ltx_border_r">1:2:8</td>
<td id="S5.T1.3.11.2" class="ltx_td ltx_align_center ltx_border_r">
<span id="S5.T1.3.11.2.1" class="ltx_text"></span><span id="S5.T1.3.11.2.2" class="ltx_text">
<span id="S5.T1.3.11.2.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.11.2.2.1.1" class="ltx_tr">
<span id="S5.T1.3.11.2.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Use 12.5% (low), 25% (mid), and 100% (high) of the original channel size.</span></span>
</span></span><span id="S5.T1.3.11.2.3" class="ltx_text"></span></td>
</tr>
<tr id="S5.T1.3.12" class="ltx_tr">
<td id="S5.T1.3.12.1" class="ltx_td ltx_align_center ltx_border_b ltx_border_r">1:4:16</td>
<td id="S5.T1.3.12.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_r">
<span id="S5.T1.3.12.2.1" class="ltx_text"></span><span id="S5.T1.3.12.2.2" class="ltx_text">
<span id="S5.T1.3.12.2.2.1" class="ltx_tabular ltx_align_middle">
<span id="S5.T1.3.12.2.2.1.1" class="ltx_tr">
<span id="S5.T1.3.12.2.2.1.1.1" class="ltx_td ltx_nopad_r ltx_align_left">Use 6.25% (low), 25% (mid), and 100% (high) of the original channel size.</span></span>
</span></span><span id="S5.T1.3.12.2.3" class="ltx_text"></span></td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Optimizations tested with RF<sup id="S5.T1.5.1" class="ltx_sup">2</sup>.</figcaption>
</figure>
</section>
<section id="S5.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.3 </span>System-Induced Data Heterogeneity</h3>

<div id="S5.SS3.p1" class="ltx_para ltx_noindent">
<p id="S5.SS3.p1.6" class="ltx_p">We evaluated the effect of varying levels of system-induced data heterogeneity by evaluating all the configurations on (1) random tier mapping (<span id="S5.SS3.p1.6.1" class="ltx_text ltx_font_bold">Random</span>, no system-induced data heterogeneity), and (2) Dirichlet-based tier mapping using five different <math id="S5.SS3.p1.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S5.SS3.p1.1.m1.1a"><mi id="S5.SS3.p1.1.m1.1.1" xref="S5.SS3.p1.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S5.SS3.p1.1.m1.1b"><ci id="S5.SS3.p1.1.m1.1.1.cmml" xref="S5.SS3.p1.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS3.p1.1.m1.1c">\alpha</annotation></semantics></math>: <span id="S5.SS3.p1.6.2" class="ltx_text ltx_font_bold">Hetero-vlow</span> (<math id="S5.SS3.p1.2.m2.1" class="ltx_Math" alttext="\alpha=5000" display="inline"><semantics id="S5.SS3.p1.2.m2.1a"><mrow id="S5.SS3.p1.2.m2.1.1" xref="S5.SS3.p1.2.m2.1.1.cmml"><mi id="S5.SS3.p1.2.m2.1.1.2" xref="S5.SS3.p1.2.m2.1.1.2.cmml">α</mi><mo id="S5.SS3.p1.2.m2.1.1.1" xref="S5.SS3.p1.2.m2.1.1.1.cmml">=</mo><mn id="S5.SS3.p1.2.m2.1.1.3" xref="S5.SS3.p1.2.m2.1.1.3.cmml">5000</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS3.p1.2.m2.1b"><apply id="S5.SS3.p1.2.m2.1.1.cmml" xref="S5.SS3.p1.2.m2.1.1"><eq id="S5.SS3.p1.2.m2.1.1.1.cmml" xref="S5.SS3.p1.2.m2.1.1.1"></eq><ci id="S5.SS3.p1.2.m2.1.1.2.cmml" xref="S5.SS3.p1.2.m2.1.1.2">𝛼</ci><cn type="integer" id="S5.SS3.p1.2.m2.1.1.3.cmml" xref="S5.SS3.p1.2.m2.1.1.3">5000</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS3.p1.2.m2.1c">\alpha=5000</annotation></semantics></math>), <span id="S5.SS3.p1.6.3" class="ltx_text ltx_font_bold">Hetero-low</span> (<math id="S5.SS3.p1.3.m3.1" class="ltx_Math" alttext="\alpha=5" display="inline"><semantics id="S5.SS3.p1.3.m3.1a"><mrow id="S5.SS3.p1.3.m3.1.1" xref="S5.SS3.p1.3.m3.1.1.cmml"><mi id="S5.SS3.p1.3.m3.1.1.2" xref="S5.SS3.p1.3.m3.1.1.2.cmml">α</mi><mo id="S5.SS3.p1.3.m3.1.1.1" xref="S5.SS3.p1.3.m3.1.1.1.cmml">=</mo><mn id="S5.SS3.p1.3.m3.1.1.3" xref="S5.SS3.p1.3.m3.1.1.3.cmml">5</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS3.p1.3.m3.1b"><apply id="S5.SS3.p1.3.m3.1.1.cmml" xref="S5.SS3.p1.3.m3.1.1"><eq id="S5.SS3.p1.3.m3.1.1.1.cmml" xref="S5.SS3.p1.3.m3.1.1.1"></eq><ci id="S5.SS3.p1.3.m3.1.1.2.cmml" xref="S5.SS3.p1.3.m3.1.1.2">𝛼</ci><cn type="integer" id="S5.SS3.p1.3.m3.1.1.3.cmml" xref="S5.SS3.p1.3.m3.1.1.3">5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS3.p1.3.m3.1c">\alpha=5</annotation></semantics></math>), <span id="S5.SS3.p1.6.4" class="ltx_text ltx_font_bold">Hetero-mid</span> (<math id="S5.SS3.p1.4.m4.1" class="ltx_Math" alttext="\alpha=0.5" display="inline"><semantics id="S5.SS3.p1.4.m4.1a"><mrow id="S5.SS3.p1.4.m4.1.1" xref="S5.SS3.p1.4.m4.1.1.cmml"><mi id="S5.SS3.p1.4.m4.1.1.2" xref="S5.SS3.p1.4.m4.1.1.2.cmml">α</mi><mo id="S5.SS3.p1.4.m4.1.1.1" xref="S5.SS3.p1.4.m4.1.1.1.cmml">=</mo><mn id="S5.SS3.p1.4.m4.1.1.3" xref="S5.SS3.p1.4.m4.1.1.3.cmml">0.5</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS3.p1.4.m4.1b"><apply id="S5.SS3.p1.4.m4.1.1.cmml" xref="S5.SS3.p1.4.m4.1.1"><eq id="S5.SS3.p1.4.m4.1.1.1.cmml" xref="S5.SS3.p1.4.m4.1.1.1"></eq><ci id="S5.SS3.p1.4.m4.1.1.2.cmml" xref="S5.SS3.p1.4.m4.1.1.2">𝛼</ci><cn type="float" id="S5.SS3.p1.4.m4.1.1.3.cmml" xref="S5.SS3.p1.4.m4.1.1.3">0.5</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS3.p1.4.m4.1c">\alpha=0.5</annotation></semantics></math>), <span id="S5.SS3.p1.6.5" class="ltx_text ltx_font_bold">Hetero-high</span> (<math id="S5.SS3.p1.5.m5.1" class="ltx_Math" alttext="\alpha=0.05" display="inline"><semantics id="S5.SS3.p1.5.m5.1a"><mrow id="S5.SS3.p1.5.m5.1.1" xref="S5.SS3.p1.5.m5.1.1.cmml"><mi id="S5.SS3.p1.5.m5.1.1.2" xref="S5.SS3.p1.5.m5.1.1.2.cmml">α</mi><mo id="S5.SS3.p1.5.m5.1.1.1" xref="S5.SS3.p1.5.m5.1.1.1.cmml">=</mo><mn id="S5.SS3.p1.5.m5.1.1.3" xref="S5.SS3.p1.5.m5.1.1.3.cmml">0.05</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS3.p1.5.m5.1b"><apply id="S5.SS3.p1.5.m5.1.1.cmml" xref="S5.SS3.p1.5.m5.1.1"><eq id="S5.SS3.p1.5.m5.1.1.1.cmml" xref="S5.SS3.p1.5.m5.1.1.1"></eq><ci id="S5.SS3.p1.5.m5.1.1.2.cmml" xref="S5.SS3.p1.5.m5.1.1.2">𝛼</ci><cn type="float" id="S5.SS3.p1.5.m5.1.1.3.cmml" xref="S5.SS3.p1.5.m5.1.1.3">0.05</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS3.p1.5.m5.1c">\alpha=0.05</annotation></semantics></math>), and <span id="S5.SS3.p1.6.6" class="ltx_text ltx_font_bold">Hetero-vhigh</span> (<math id="S5.SS3.p1.6.m6.1" class="ltx_Math" alttext="\alpha=0.005" display="inline"><semantics id="S5.SS3.p1.6.m6.1a"><mrow id="S5.SS3.p1.6.m6.1.1" xref="S5.SS3.p1.6.m6.1.1.cmml"><mi id="S5.SS3.p1.6.m6.1.1.2" xref="S5.SS3.p1.6.m6.1.1.2.cmml">α</mi><mo id="S5.SS3.p1.6.m6.1.1.1" xref="S5.SS3.p1.6.m6.1.1.1.cmml">=</mo><mn id="S5.SS3.p1.6.m6.1.1.3" xref="S5.SS3.p1.6.m6.1.1.3.cmml">0.005</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS3.p1.6.m6.1b"><apply id="S5.SS3.p1.6.m6.1.1.cmml" xref="S5.SS3.p1.6.m6.1.1"><eq id="S5.SS3.p1.6.m6.1.1.1.cmml" xref="S5.SS3.p1.6.m6.1.1.1"></eq><ci id="S5.SS3.p1.6.m6.1.1.2.cmml" xref="S5.SS3.p1.6.m6.1.1.2">𝛼</ci><cn type="float" id="S5.SS3.p1.6.m6.1.1.3.cmml" xref="S5.SS3.p1.6.m6.1.1.3">0.005</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS3.p1.6.m6.1c">\alpha=0.005</annotation></semantics></math>). The configurations represent very low to very high system-induced data heterogeneity.</p>
</div>
</section>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Evaluation Results</h2>

<div id="S6.p1" class="ltx_para ltx_noindent">
<p id="S6.p1.1" class="ltx_p">Our evaluation aims to answer the following questions in the presence of realistic system-induced data heterogeneity:</p>
<ul id="S6.I1" class="ltx_itemize">
<li id="S6.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i1.p1" class="ltx_para">
<p id="S6.I1.i1.p1.1" class="ltx_p">How do tier-aware optimization strategies from prior literature affect fairness?</p>
</div>
</li>
<li id="S6.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i2.p1" class="ltx_para">
<p id="S6.I1.i2.p1.1" class="ltx_p">How does the degree of system-induced data heterogeneity affect fairness?</p>
</div>
</li>
<li id="S6.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i3.p1" class="ltx_para">
<p id="S6.I1.i3.p1.1" class="ltx_p">How do different models and datasets affect fairness?</p>
</div>
</li>
<li id="S6.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span> 
<div id="S6.I1.i4.p1" class="ltx_para ltx_noindent">
<p id="S6.I1.i4.p1.1" class="ltx_p">Is the best-performing optimization in terms of prediction accuracy also the best in terms of fairness?</p>
</div>
</li>
</ul>
</div>
<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.1 </span>Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity</h3>

<figure id="S6.F6" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S6.F6.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x12.png" id="S6.F6.sf1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="88" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(a) </span>Taobao dataset w/ DLRM</figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S6.F6.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x13.png" id="S6.F6.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="88" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(b) </span>Taobao dataset w/ DIN</figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>Different optimizations and different system-induced data heterogeneity have different fairness impacts. The figure plots the fairness implications of 14 different optimizations on 6 different heterogeneity levels on the Taobao dataset.</figcaption>
</figure>
<div id="S6.SS1.p1" class="ltx_para ltx_noindent">
<p id="S6.SS1.p1.1" class="ltx_p">Figure <a href="#S6.F6" title="Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>–<a href="#S6.F7" title="Figure 7 ‣ Takeaway 4: Fairness impacts depend on the dataset/model architecture ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> shows the results of training each model and dataset under the 14 optimization configurations and the 6 different system-induced data heterogeneity settings. The y-axis shows the fairness degradation (MDAC, defined in Section <a href="#S4.SS4" title="4.4 Quantifying Fairness ‣ 4 Studying System-induced Data Heterogeneity for Recommender Systems ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.4</span></a>). A larger MDAC means the optimization strategy is more unfair.</p>
</div>
<section id="S6.SS1.SSS0.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Takeaway 1: Optimizations cause fairness degradation</h5>

<div id="S6.SS1.SSS0.Px1.p1" class="ltx_para ltx_noindent">
<p id="S6.SS1.SSS0.Px1.p1.1" class="ltx_p">In the presence of system-induced data heterogeneity (e.g., Hetero-vhigh/high), tier-aware optimizations may introduce significant fairness degradation.
For example, Exclude Lo, which is an optimization used by Google <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>, caused 29–44% MDAC with DLRM/DIN and Taobao dataset (Figure <a href="#S6.F6" title="Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>). The result means that low-end devices can suffer 29–44% more accuracy degradation than high-end devices in the presence of high system-induced data heterogeneity.
Figure <a href="#S6.F6" title="Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>–<a href="#S6.F7" title="Figure 7 ‣ Takeaway 4: Fairness impacts depend on the dataset/model architecture ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> also shows that more skewed tier-aware optimizations generally lead to a higher fairness degradation. For each optimization, the bar heights generally increase as we move from a less skewed optimization (1:2:4) to a more skewed optimization (1:4:16) in each optimization group.</p>
</div>
</section>
<section id="S6.SS1.SSS0.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Takeaway 2: Fairness impacts change depending on the degree of system-induced data heterogeneity</h5>

<div id="S6.SS1.SSS0.Px2.p1" class="ltx_para ltx_noindent">
<p id="S6.SS1.SSS0.Px2.p1.3" class="ltx_p">Figure <a href="#S6.F6" title="Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>–<a href="#S6.F7" title="Figure 7 ‣ Takeaway 4: Fairness impacts depend on the dataset/model architecture ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> shows that compared to no or very low heterogeneity cases (Random/Hetero-vlow), more fairness is hampered when the degree of system-induced data heterogeneity is higher (Hetero-vhigh/high).
Exclude Lo, for example, see more than 15.8<math id="S6.SS1.SSS0.Px2.p1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S6.SS1.SSS0.Px2.p1.1.m1.1a"><mo id="S6.SS1.SSS0.Px2.p1.1.m1.1.1" xref="S6.SS1.SSS0.Px2.p1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.SSS0.Px2.p1.1.m1.1b"><times id="S6.SS1.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S6.SS1.SSS0.Px2.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.SSS0.Px2.p1.1.m1.1c">\times</annotation></semantics></math> fairness degradation for DLRM/Taobao (MDAC 1.84% vs. 29%, Figure <a href="#S6.F6.sf1" title="In Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6(a)</span></a>), and 41<math id="S6.SS1.SSS0.Px2.p1.2.m2.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S6.SS1.SSS0.Px2.p1.2.m2.1a"><mo id="S6.SS1.SSS0.Px2.p1.2.m2.1.1" xref="S6.SS1.SSS0.Px2.p1.2.m2.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.SSS0.Px2.p1.2.m2.1b"><times id="S6.SS1.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S6.SS1.SSS0.Px2.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.SSS0.Px2.p1.2.m2.1c">\times</annotation></semantics></math> for DIN/Taobao (MDAC 1.06% vs. 43.7%, Figure <a href="#S6.F6.sf2" title="In Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6(b)</span></a>).
The results clearly imply that when studying tier-aware optimizations for FL, simulating realistic system-induced data heterogeneity is crucial; otherwise, one might downplay the fairness implication of an optimization by as much as 41<math id="S6.SS1.SSS0.Px2.p1.3.m3.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S6.SS1.SSS0.Px2.p1.3.m3.1a"><mo id="S6.SS1.SSS0.Px2.p1.3.m3.1.1" xref="S6.SS1.SSS0.Px2.p1.3.m3.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.SSS0.Px2.p1.3.m3.1b"><times id="S6.SS1.SSS0.Px2.p1.3.m3.1.1.cmml" xref="S6.SS1.SSS0.Px2.p1.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.SSS0.Px2.p1.3.m3.1c">\times</annotation></semantics></math>.</p>
</div>
</section>
<section id="S6.SS1.SSS0.Px3" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Takeaway 3: Different optimizations have different fairness impacts</h5>

<div id="S6.SS1.SSS0.Px3.p1" class="ltx_para ltx_noindent">
<p id="S6.SS1.SSS0.Px3.p1.1" class="ltx_p">Figure <a href="#S6.F6" title="Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>–<a href="#S6.F7" title="Figure 7 ‣ Takeaway 4: Fairness impacts depend on the dataset/model architecture ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> also shows that some optimizations are fairer than the others in the presence of system-induced data heterogeneity.
Take a look at Figure <a href="#S6.F6.sf1" title="In Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6(a)</span></a>, for example. By only looking at random mapping (Random), it may seem like Channel 1:2:4 brings similar fairness concerns with QuantS 1:2:8 (MDAC 0.045% vs. 0.044%).
However, in the presence of system-induced data heterogeneity, QuantS 1:2:8 is much more fair than Channel 1:2:4 (MDAC 0.78% versus 24.62% for Hetero-vhigh, 1.41% versus 8.13% for Hetero-high, 0.73% versus 5.63% for Hetero-mid).
This result again warns that only looking at random or low system-induced data heterogeneity cases might send a misguided message when assessing the fairness of different optimizations.
Among the methods we studied, we saw Exclude Lo had the most unfair impact, while Quant/QuantS was the fairest.</p>
</div>
</section>
<section id="S6.SS1.SSS0.Px4" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Takeaway 4: Fairness impacts depend on the dataset/model architecture</h5>

<div id="S6.SS1.SSS0.Px4.p1" class="ltx_para ltx_noindent">
<p id="S6.SS1.SSS0.Px4.p1.1" class="ltx_p">Comparing Figure <a href="#S6.F6" title="Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> and Figure <a href="#S6.F7" title="Figure 7 ‣ Takeaway 4: Fairness impacts depend on the dataset/model architecture ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a>, we can see that fairness also depends significantly on the characteristics of the dataset itself. The fairness impact of the optimizations is an order of magnitude larger for Taobao, compared to MovieLens (average MDAC 6.67% vs. 0.64% for DLRM + Hetero-vhigh, 6.45% vs. 0.55% for DLRM + Hetero-high). One hypothesis is that the rating of a movie is universal and easier to predict (i.e., a good movie is considered good by everybody) compared to Ads-clicks and, therefore, can be learned better even under a high degree of system-induced data heterogeneity.
Similarly, comparing Figure <a href="#S6.F6" title="Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> and Figure <a href="#S6.F7" title="Figure 7 ‣ Takeaway 4: Fairness impacts depend on the dataset/model architecture ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> reveals that DIN experiences slightly higher fairness degradation compared to DLRM (e.g., average MDAC 6.67% vs. 8.96% for DLRM + Hetero-vhigh). We can conclude that the fairness impact of different tier-aware optimizations heavily depends on both datasets and model architectures.</p>
</div>
<figure id="S6.F7" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S6.F7.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x14.png" id="S6.F7.sf1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="89" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(a) </span>MovieLens-20 dataset w/ DLRM</figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure id="S6.F7.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2206.02633/assets/x15.png" id="S6.F7.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="89" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">(b) </span>MovieLens-20 dataset w/ DIN</figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>Different optimizations and different system-induced data heterogeneity have different fairness impacts. The figure plots the fairness implications of 14 different optimizations on 6 different heterogeneity levels on the MovieLens dataset.</figcaption>
</figure>
</section>
<section id="S6.SS1.SSS0.Px5" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Takeaway 5: Quantization with separate sign encoding improves fairness</h5>

<div id="S6.SS1.SSS0.Px5.p1" class="ltx_para ltx_noindent">
<p id="S6.SS1.SSS0.Px5.p1.4" class="ltx_p">Comparing Quant with QuantS shows that QuantS impacts fairness much less. When comparing across all the configurations for high system-induced data heterogeneity scenarios (Hetero-vhigh/high/mid), QuantS 1:2:4 improves the fairness by 1.4 – 1.7<math id="S6.SS1.SSS0.Px5.p1.1.m1.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S6.SS1.SSS0.Px5.p1.1.m1.1a"><mo id="S6.SS1.SSS0.Px5.p1.1.m1.1.1" xref="S6.SS1.SSS0.Px5.p1.1.m1.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.SSS0.Px5.p1.1.m1.1b"><times id="S6.SS1.SSS0.Px5.p1.1.m1.1.1.cmml" xref="S6.SS1.SSS0.Px5.p1.1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.SSS0.Px5.p1.1.m1.1c">\times</annotation></semantics></math> compared to Quant 1:2:4, QuantS 1:2:8 by 2.8–4<math id="S6.SS1.SSS0.Px5.p1.2.m2.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S6.SS1.SSS0.Px5.p1.2.m2.1a"><mo id="S6.SS1.SSS0.Px5.p1.2.m2.1.1" xref="S6.SS1.SSS0.Px5.p1.2.m2.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.SSS0.Px5.p1.2.m2.1b"><times id="S6.SS1.SSS0.Px5.p1.2.m2.1.1.cmml" xref="S6.SS1.SSS0.Px5.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.SSS0.Px5.p1.2.m2.1c">\times</annotation></semantics></math> compared to Quant 1:2:8, and QuantS 1:4:16 by 4.9–5.9<math id="S6.SS1.SSS0.Px5.p1.3.m3.1" class="ltx_Math" alttext="\times" display="inline"><semantics id="S6.SS1.SSS0.Px5.p1.3.m3.1a"><mo id="S6.SS1.SSS0.Px5.p1.3.m3.1.1" xref="S6.SS1.SSS0.Px5.p1.3.m3.1.1.cmml">×</mo><annotation-xml encoding="MathML-Content" id="S6.SS1.SSS0.Px5.p1.3.m3.1b"><times id="S6.SS1.SSS0.Px5.p1.3.m3.1.1.cmml" xref="S6.SS1.SSS0.Px5.p1.3.m3.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.SSS0.Px5.p1.3.m3.1c">\times</annotation></semantics></math> compared to Quant 1:4:16.
The reason is that while optimizations like pruning only lose gradient information within the tier if applied to a certain tier, quantization actually introduces <em id="S6.SS1.SSS0.Px5.p1.4.1" class="ltx_emph ltx_font_italic">noise</em> in the gradient that can affect the model quality of other tiers. Particularly for embedding tables, gradients for the table entries that were not accessed by a certain client must be close to zero for that client. However, quantization may make these gradients non-zero as it will round zero into a nearby quantized value, introducing noise to un-accessed embedding entries.
Because quantization with a separate sign encoding can better encode zero, it shows significantly better fairness results.
The finding demonstrates a scenario where researchers can evaluate the fairness implications of their optimization proposals and modify their optimizations using the proposed RF<sup id="S6.SS1.SSS0.Px5.p1.4.2" class="ltx_sup">2</sup> framework.</p>
</div>
</section>
</section>
<section id="S6.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.2 </span>Zooming into Each Optimization’s Impact on Each Tiers</h3>

<figure id="S6.F8" class="ltx_figure"><img src="/html/2206.02633/assets/x16.png" id="S6.F8.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="461" height="170" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8: </span>Different tiers are impacted differently for each optimization. The figure shows the case of training the Taobao dataset with DLRM with Hetero-high (<math id="S6.F8.2.m1.1" class="ltx_Math" alttext="alpha=0.05" display="inline"><semantics id="S6.F8.2.m1.1b"><mrow id="S6.F8.2.m1.1.1" xref="S6.F8.2.m1.1.1.cmml"><mrow id="S6.F8.2.m1.1.1.2" xref="S6.F8.2.m1.1.1.2.cmml"><mi id="S6.F8.2.m1.1.1.2.2" xref="S6.F8.2.m1.1.1.2.2.cmml">a</mi><mo lspace="0em" rspace="0em" id="S6.F8.2.m1.1.1.2.1" xref="S6.F8.2.m1.1.1.2.1.cmml">​</mo><mi id="S6.F8.2.m1.1.1.2.3" xref="S6.F8.2.m1.1.1.2.3.cmml">l</mi><mo lspace="0em" rspace="0em" id="S6.F8.2.m1.1.1.2.1b" xref="S6.F8.2.m1.1.1.2.1.cmml">​</mo><mi id="S6.F8.2.m1.1.1.2.4" xref="S6.F8.2.m1.1.1.2.4.cmml">p</mi><mo lspace="0em" rspace="0em" id="S6.F8.2.m1.1.1.2.1c" xref="S6.F8.2.m1.1.1.2.1.cmml">​</mo><mi id="S6.F8.2.m1.1.1.2.5" xref="S6.F8.2.m1.1.1.2.5.cmml">h</mi><mo lspace="0em" rspace="0em" id="S6.F8.2.m1.1.1.2.1d" xref="S6.F8.2.m1.1.1.2.1.cmml">​</mo><mi id="S6.F8.2.m1.1.1.2.6" xref="S6.F8.2.m1.1.1.2.6.cmml">a</mi></mrow><mo id="S6.F8.2.m1.1.1.1" xref="S6.F8.2.m1.1.1.1.cmml">=</mo><mn id="S6.F8.2.m1.1.1.3" xref="S6.F8.2.m1.1.1.3.cmml">0.05</mn></mrow><annotation-xml encoding="MathML-Content" id="S6.F8.2.m1.1c"><apply id="S6.F8.2.m1.1.1.cmml" xref="S6.F8.2.m1.1.1"><eq id="S6.F8.2.m1.1.1.1.cmml" xref="S6.F8.2.m1.1.1.1"></eq><apply id="S6.F8.2.m1.1.1.2.cmml" xref="S6.F8.2.m1.1.1.2"><times id="S6.F8.2.m1.1.1.2.1.cmml" xref="S6.F8.2.m1.1.1.2.1"></times><ci id="S6.F8.2.m1.1.1.2.2.cmml" xref="S6.F8.2.m1.1.1.2.2">𝑎</ci><ci id="S6.F8.2.m1.1.1.2.3.cmml" xref="S6.F8.2.m1.1.1.2.3">𝑙</ci><ci id="S6.F8.2.m1.1.1.2.4.cmml" xref="S6.F8.2.m1.1.1.2.4">𝑝</ci><ci id="S6.F8.2.m1.1.1.2.5.cmml" xref="S6.F8.2.m1.1.1.2.5">ℎ</ci><ci id="S6.F8.2.m1.1.1.2.6.cmml" xref="S6.F8.2.m1.1.1.2.6">𝑎</ci></apply><cn type="float" id="S6.F8.2.m1.1.1.3.cmml" xref="S6.F8.2.m1.1.1.3">0.05</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S6.F8.2.m1.1d">alpha=0.05</annotation></semantics></math>) in more detail, plotting the AUC change for each tier separately. The plot shows that while most of the studied optimizations degrade low-end devices’ AUC more severely, quantization degrades mid/high-end devices’ AUC more due to low-end devices’ quantized gradient corrupting the updates from other tiers.</figcaption>
</figure>
<div id="S6.SS2.p1" class="ltx_para ltx_noindent">
<p id="S6.SS2.p1.1" class="ltx_p">Figure <a href="#S6.F8" title="Figure 8 ‣ 6.2 Zooming into Each Optimization’s Impact on Each Tiers ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a> illustrates the AUC change for each tier separately for one representative configuration — training DLRM with the Taobao dataset under Hetero-high. The results for the other setups showed similar trends and were omitted for space reasons. Zooming into the effect on each tier separately highlights additional interesting observations.</p>
</div>
<section id="S6.SS2.SSS0.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Takeaway 6: Quantization benefits low-end devices, while all other optimizations punish low-end devices.</h5>

<div id="S6.SS2.SSS0.Px1.p1" class="ltx_para ltx_noindent">
<p id="S6.SS2.SSS0.Px1.p1.1" class="ltx_p">As expected, most of the tier-aware optimization strategies degrade the model accuracy of the low-end devices disproportionately, because optimizations are more aggressively applied to resource-constrained, low-end devices.
However, quantization degrades the model accuracy of mid/high-end devices more.
The reason for the unexpected suffering of mid/high-end devices using quantization is again because quantized gradients of the low-end devices pollute the model updates of mid/high-end devices, especially from the embedding tables.</p>
</div>
</section>
<section id="S6.SS2.SSS0.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Takeaway 7: The best-accuracy optimization is not always the best-fairness optimization</h5>

<div id="S6.SS2.SSS0.Px2.p1" class="ltx_para ltx_noindent">
<p id="S6.SS2.SSS0.Px2.p1.1" class="ltx_p">When comparing the overall AUC degradation (the <span id="S6.SS2.SSS0.Px2.p1.1.1" class="ltx_text ltx_font_bold">total</span> bar group in Figure <a href="#S6.F8" title="Figure 8 ‣ 6.2 Zooming into Each Optimization’s Impact on Each Tiers ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8</span></a>) with the fairness impact of each optimization (Figure <a href="#S6.F6" title="Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>), we can see that the optimizations that lead to minimal overall AUC degradation do not always coincide with optimizations that are the fairest.
For example, Exclude Lo, which is one of the most unfair optimizations, shows reasonable AUC degradation (-1.26%) that is better than Quant 1:2:8 (-2.64%) and Quant 1:4:16 (-5.79%). However, Quant 1:2:8 and Quant 1:4:16 are much fairer (MDAC 4.59% and 9.3%, Figure <a href="#S6.F6.sf1" title="In Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6(a)</span></a>) than Exclude Lo (MDAC 22.4%, Figure <a href="#S6.F6.sf1" title="In Figure 6 ‣ 6.1 Fairness Impacts of Different Optimizations Under System-Induced Data Heterogeneity ‣ 6 Evaluation Results ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6(a)</span></a>).
This result indicates that only evaluating the overall accuracy after applying an optimization, as in the prior work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>, may present an incomplete picture. Both the final model accuracy and per-tier fairness (MDAC) must be considered to understand the overall design and optimization space better.</p>
</div>
</section>
</section>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Additional Related Work</h2>

<section id="S7.SS0.SSS0.Px1" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Fairness in ML</h5>

<div id="S7.SS0.SSS0.Px1.p1" class="ltx_para ltx_noindent">
<p id="S7.SS0.SSS0.Px1.p1.1" class="ltx_p">Remotely related, many studies showed that applying optimizations on a trained model can disproportionately harm minorities in the dataset <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib59" title="" class="ltx_ref">59</a>, <a href="#bib.bib60" title="" class="ltx_ref">60</a>]</cite>.
A recent public study also showed that using smartphone data to train ML models can produce a model unfair towards groups without smartphones <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib64" title="" class="ltx_ref">64</a>]</cite>.
Our work shows how applying tier-aware optimizations during FL can impact groups with low-tier devices, studying distinguished aspects from these studies.
Whether prior debiasing solutions <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib65" title="" class="ltx_ref">65</a>, <a href="#bib.bib66" title="" class="ltx_ref">66</a>, <a href="#bib.bib67" title="" class="ltx_ref">67</a>]</cite> can be applied to our setup is an interesting future work.</p>
</div>
</section>
<section id="S7.SS0.SSS0.Px2" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">FL simulation frameworks</h5>

<div id="S7.SS0.SSS0.Px2.p1" class="ltx_para ltx_noindent">
<p id="S7.SS0.SSS0.Px2.p1.2" class="ltx_p">Several simulation frameworks exist for FL <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib57" title="" class="ltx_ref">57</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>, <a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib68" title="" class="ltx_ref">68</a>, <a href="#bib.bib69" title="" class="ltx_ref">69</a>, <a href="#bib.bib70" title="" class="ltx_ref">70</a>, <a href="#bib.bib71" title="" class="ltx_ref">71</a>, <a href="#bib.bib72" title="" class="ltx_ref">72</a>, <a href="#bib.bib73" title="" class="ltx_ref">73</a>]</cite>. Unlike RF<sup id="S7.SS0.SSS0.Px2.p1.2.1" class="ltx_sup">2</sup>, none of the prior simulators that we are aware of support simulating system-induced data heterogeneity, even the frameworks that focus on realistic system-heterogeneity simulation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>.
These other simulators can adopt the core idea of RF<sup id="S7.SS0.SSS0.Px2.p1.2.2" class="ltx_sup">2</sup>’s system-induced data heterogeneity simulation and implement it in their framework.</p>
</div>
</section>
<section id="S7.SS0.SSS0.Px3" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Other FL optimizations for system heterogeneity</h5>

<div id="S7.SS0.SSS0.Px3.p1" class="ltx_para ltx_noindent">
<p id="S7.SS0.SSS0.Px3.p1.1" class="ltx_p">In addition to the tier-aware optimizations we discuss in Section <a href="#S2.SS2.SSS3" title="2.2.3 System Heterogeneity and Tier-Aware Optimizations ‣ 2.2 Federated Learning ‣ 2 Background and Motivation ‣ Towards Fair Federated Recommendation Learning: Characterizing the Inter-Dependence of System and Data Heterogeneity" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2.2.3</span></a>, other work proposed complementary solutions to tackle the system heterogeneity problem in FL.
AutoFL <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib74" title="" class="ltx_ref">74</a>]</cite> and OORT <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite> use ML-based client selection taking into account clients’ system heterogeneity.
FedBuff <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite> and Papaya <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib58" title="" class="ltx_ref">58</a>]</cite> implement asynchronous FL to mitigate the stragglers’ effect. FedBuff still down-weighs slower clients’ updates <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib41" title="" class="ltx_ref">41</a>]</cite>.
These systems were evaluated assuming no data-system inter-dependence, and studying the effect of system-induced data heterogeneity for these proposals will be interesting future work.</p>
</div>
</section>
<section id="S7.SS0.SSS0.Px4" class="ltx_paragraph">
<h5 class="ltx_title ltx_title_paragraph">Memory-efficient recommender systems</h5>

<div id="S7.SS0.SSS0.Px4.p1" class="ltx_para ltx_noindent">
<p id="S7.SS0.SSS0.Px4.p1.1" class="ltx_p">Training recommender systems on-device requires the models to be memory-efficient. Reducing MLP layers can be done by reducing the channel dimension <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>, <a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>, which was studied in this paper. Additionally, a set of techniques were proposed to reduce memory usage of embedding tables on the server-side <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib75" title="" class="ltx_ref">75</a>, <a href="#bib.bib76" title="" class="ltx_ref">76</a>, <a href="#bib.bib77" title="" class="ltx_ref">77</a>, <a href="#bib.bib63" title="" class="ltx_ref">63</a>]</cite>. Recent work <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib78" title="" class="ltx_ref">78</a>]</cite> also proposed reconstructing embedding layers on-device during FL to reduce the memory footprint of a large table.
These techniques have not been evaluated in the presence of system-induced data heterogeneity in FL.</p>
</div>
</section>
</section>
<section id="S8" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8 </span>Conclusion</h2>

<div id="S8.p1" class="ltx_para ltx_noindent">
<p id="S8.p1.1" class="ltx_p">To enhance data privacy in recommender systems, federated learning has emerged as an effective mechanism. Despite a plethora of prior works on FL, an important characteristic of the real-world environment has not yet been considered. In this work, we shed light on the under-explored aspect of the inter-dependence between system and data heterogeneity — that has been considered individually but not in conjunction by most (if not all) prior work in the FL space.
Based on the statistical observations from the real-world environment, we design a new statistical framework to model and evaluate the impact of system-induced data heterogeneity for federated recommendation learning. Our evaluation results demonstrate that fairness can be severely affected under realistic system-induced data heterogeneity, and modeling the inter-dependence is essential to understanding the true fairness impact of model optimization strategies.</p>
</div>
</section>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">Acknowledgement</h2>

<div id="Sx1.p1" class="ltx_para ltx_noindent">
<p id="Sx1.p1.1" class="ltx_p">We would like to thank Kamalika Chaudhuri and Edward Suh for the invaluable discussion regarding the paper’s direction. We thank Ilias Leontiadis, Shripad Gade, Mani Malek, Fangzhou Xu, Vlad Grytsun, and Shuaiwen Wang for their help in conducting the experiments with the production data. We also thank Ashkan Yousefpour, Sayan Ghosh, Hongyuan Zhan, Kaikai Wang, Dzmitry Huba, and Meisam Hejazi nia, who helped us understand the operation of open-source and production federated learning system. We thank Pegah T. Afshar, Milan Shen, and Kim Hazelwood for supporting the work.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
Carlos A Gomez-Uribe and Neil Hunt.

</span>
<span class="ltx_bibblock">The netflix recommender system: Algorithms, business value, and
innovation.

</span>
<span class="ltx_bibblock"><span id="bib.bib1.1.1" class="ltx_text ltx_font_italic">ACM Transactions on Management Information Systems (TMIS)</span>,
6(4):1–19, 2015.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
Paul Covington, Jay Adams, and Emre Sargin.

</span>
<span class="ltx_bibblock">Deep neural networks for youtube recommendations.

</span>
<span class="ltx_bibblock">In <span id="bib.bib2.1.1" class="ltx_text ltx_font_italic">Proceedings of the 10th ACM conference on recommender
systems</span>, pages 191–198, 2016.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
Kurt Jacobson, Vidhya Murali, Edward Newett, Brian Whitman, and Romain Yon.

</span>
<span class="ltx_bibblock">Music personalization at spotify.

</span>
<span class="ltx_bibblock">In <span id="bib.bib3.1.1" class="ltx_text ltx_font_italic">Proceedings of the 10th ACM Conference on Recommender
Systems</span>, pages 373–373, 2016.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Heng-Tze Cheng, Levent Koc, Jeremiah Harmsen, Tal Shaked, Tushar Chandra,
Hrishi Aradhye, Glen Anderson, Greg Corrado, Wei Chai, Mustafa Ispir, et al.

</span>
<span class="ltx_bibblock">Wide &amp; deep learning for recommender systems.

</span>
<span class="ltx_bibblock">In <span id="bib.bib4.1.1" class="ltx_text ltx_font_italic">Proceedings of the 1st workshop on deep learning for
recommender systems</span>, pages 7–10, 2016.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
Medvedev, Ivan and Wu, Haotian and Gordon, Taylor.

</span>
<span class="ltx_bibblock">Powered by AI: Instagram’s Explore recommender system.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://ai.facebook.com/blog/powered-by-ai-instagrams-explore-recommender-system/</span>,
2019.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
Michael Chui, James Manyika, Mehdi Miremadi, N Henke, R Chung, P Nel, and
S Malhotra.

</span>
<span class="ltx_bibblock">Notes from the ai frontier: Insights from hundreds of use cases.

</span>
<span class="ltx_bibblock"><span id="bib.bib6.1.1" class="ltx_text ltx_font_italic">McKinsey Global Institute</span>, 2018.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
C Underwood.

</span>
<span class="ltx_bibblock">Use cases of recommendation systems in business–current applications
and methods, 2019.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
X Xie, J Lian, Z Liu, X Wang, F Wu, H Wang, and Z Chen.

</span>
<span class="ltx_bibblock">Personalized recommendation systems: Five hot research topics you
must know.

</span>
<span class="ltx_bibblock"><span id="bib.bib8.1.1" class="ltx_text ltx_font_italic">Microsoft Research Lab-Asia</span>, 2018.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
Bilge Acun, Matthew Murphy, Xiaodong Wang, Jade Nie, Carole-Jean Wu, and Kim
Hazelwood.

</span>
<span class="ltx_bibblock">Understanding training efficiency of deep learning recommendation
models at scale.

</span>
<span class="ltx_bibblock">In <span id="bib.bib9.1.1" class="ltx_text ltx_font_italic">Proceedings of the IEEE International Symposium on High
Performance Computer Architecture</span>, 2021.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
Udit Gupta, Carole-Jean Wu, Xiaodong Wang, Maxim Naumov, Brandon Reagen, David
Brooks, Bradford Cottel, Kim Hazelwood, Mark Hempstead, Bill Jia, et al.

</span>
<span class="ltx_bibblock">The architectural implications of facebook’s dnn-based personalized
recommendation.

</span>
<span class="ltx_bibblock">In <span id="bib.bib10.1.1" class="ltx_text ltx_font_italic">2020 IEEE International Symposium on High Performance
Computer Architecture (HPCA)</span>, pages 488–501. IEEE, 2020.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
Matthias Paulik, Matt Seigel, Henry Mason, Dominic Telaar, Joris Kluivers,
Rogier van Dalen, Chi Wai Lau, Luke Carlson, Filip Granqvist, Chris
Vandevelde, et al.

</span>
<span class="ltx_bibblock">Federated evaluation and tuning for on-device personalization: System
design &amp; applications.

</span>
<span class="ltx_bibblock"><span id="bib.bib11.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2102.08503</span>, 2021.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Chaoyue Niu, Fan Wu, Shaojie Tang, Lifeng Hua, Rongfei Jia, Chengfei Lv, Zhihua
Wu, and Guihai Chen.

</span>
<span class="ltx_bibblock">Billion-scale federated learning on mobile clients: A submodel design
with tunable privacy.

</span>
<span class="ltx_bibblock">In <span id="bib.bib12.1.1" class="ltx_text ltx_font_italic">Proceedings of the 26th Annual International Conference on
Mobile Computing and Networking</span>, pages 1–14, 2020.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
Andrew Hard, Kanishka Rao, Rajiv Mathews, Swaroop Ramaswamy, Françoise
Beaufays, Sean Augenstein, Hubert Eichner, Chloé Kiddon, and Daniel
Ramage.

</span>
<span class="ltx_bibblock">Federated learning for mobile keyboard prediction.

</span>
<span class="ltx_bibblock"><span id="bib.bib13.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1811.03604</span>, 2018.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
Timothy Yang, Galen Andrew, Hubert Eichner, Haicheng Sun, Wei Li, Nicholas
Kong, Daniel Ramage, and Françoise Beaufays.

</span>
<span class="ltx_bibblock">Applied federated learning: Improving google keyboard query
suggestions.

</span>
<span class="ltx_bibblock"><span id="bib.bib14.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1812.02903</span>, 2018.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
Ian Hamilton.

</span>
<span class="ltx_bibblock">Oculus quest keyboard option sends ‘aggregate modeling data’ to
facebook, 2021.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
Peter Kairouz, H Brendan McMahan, Brendan Avent, Aurélien Bellet, Mehdi
Bennis, Arjun Nitin Bhagoji, Kallista Bonawitz, Zachary Charles, Graham
Cormode, Rachel Cummings, et al.

</span>
<span class="ltx_bibblock">Advances and open problems in federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib16.1.1" class="ltx_text ltx_font_italic">Foundations and Trends® in Machine Learning</span>,
14(1–2):1–210, 2021.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
Enmao Diao, Jie Ding, and Vahid Tarokh.

</span>
<span class="ltx_bibblock">Heterofl: Computation and communication efficient federated learning
for heterogeneous clients.

</span>
<span class="ltx_bibblock">In <span id="bib.bib17.1.1" class="ltx_text ltx_font_italic">9th International Conference on Learning Representations,
ICLR 2021, Virtual Event, Austria, May 3-7, 2021</span>. OpenReview.net, 2021.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
Samuel Horvath, Stefanos Laskaridis, Mario Almeida, Ilias Leontiadis, Stylianos
Venieris, and Nicholas Lane.

</span>
<span class="ltx_bibblock">Fjord: Fair and accurate federated learning under heterogeneous
targets with ordered dropout.

</span>
<span class="ltx_bibblock"><span id="bib.bib18.1.1" class="ltx_text ltx_font_italic">Advances in Neural Information Processing Systems</span>, 34, 2021.

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock">
Fan Lai, Xiangfeng Zhu, Harsha V Madhyastha, and Mosharaf Chowdhury.

</span>
<span class="ltx_bibblock">Oort: Efficient federated learning via guided participant selection.

</span>
<span class="ltx_bibblock">In <span id="bib.bib19.4.4" class="ltx_text ltx_font_italic">15th <math id="bib.bib19.1.1.m1.1" class="ltx_Math" alttext="\{" display="inline"><semantics id="bib.bib19.1.1.m1.1a"><mo stretchy="false" id="bib.bib19.1.1.m1.1.1" xref="bib.bib19.1.1.m1.1.1.cmml">{</mo><annotation-xml encoding="MathML-Content" id="bib.bib19.1.1.m1.1b"><ci id="bib.bib19.1.1.m1.1.1.cmml" xref="bib.bib19.1.1.m1.1.1">{</ci></annotation-xml><annotation encoding="application/x-tex" id="bib.bib19.1.1.m1.1c">\{</annotation></semantics></math>USENIX<math id="bib.bib19.2.2.m2.1" class="ltx_Math" alttext="\}" display="inline"><semantics id="bib.bib19.2.2.m2.1a"><mo stretchy="false" id="bib.bib19.2.2.m2.1.1" xref="bib.bib19.2.2.m2.1.1.cmml">}</mo><annotation-xml encoding="MathML-Content" id="bib.bib19.2.2.m2.1b"><ci id="bib.bib19.2.2.m2.1.1.cmml" xref="bib.bib19.2.2.m2.1.1">}</ci></annotation-xml><annotation encoding="application/x-tex" id="bib.bib19.2.2.m2.1c">\}</annotation></semantics></math> Symposium on Operating Systems Design and
Implementation (<math id="bib.bib19.3.3.m3.1" class="ltx_Math" alttext="\{" display="inline"><semantics id="bib.bib19.3.3.m3.1a"><mo stretchy="false" id="bib.bib19.3.3.m3.1.1" xref="bib.bib19.3.3.m3.1.1.cmml">{</mo><annotation-xml encoding="MathML-Content" id="bib.bib19.3.3.m3.1b"><ci id="bib.bib19.3.3.m3.1.1.cmml" xref="bib.bib19.3.3.m3.1.1">{</ci></annotation-xml><annotation encoding="application/x-tex" id="bib.bib19.3.3.m3.1c">\{</annotation></semantics></math>OSDI<math id="bib.bib19.4.4.m4.1" class="ltx_Math" alttext="\}" display="inline"><semantics id="bib.bib19.4.4.m4.1a"><mo stretchy="false" id="bib.bib19.4.4.m4.1.1" xref="bib.bib19.4.4.m4.1.1.cmml">}</mo><annotation-xml encoding="MathML-Content" id="bib.bib19.4.4.m4.1b"><ci id="bib.bib19.4.4.m4.1.1.cmml" xref="bib.bib19.4.4.m4.1.1">}</ci></annotation-xml><annotation encoding="application/x-tex" id="bib.bib19.4.4.m4.1c">\}</annotation></semantics></math> 21)</span>, pages 19–35, 2021.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock">
Sebastian Caldas, Jakub Konečny, H Brendan McMahan, and Ameet Talwalkar.

</span>
<span class="ltx_bibblock">Expanding the reach of federated learning by reducing client resource
requirements.

</span>
<span class="ltx_bibblock"><span id="bib.bib20.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1812.07210</span>, 2018.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock">
Jakub Konečnỳ, H Brendan McMahan, Felix X Yu, Peter Richtárik,
Ananda Theertha Suresh, and Dave Bacon.

</span>
<span class="ltx_bibblock">Federated learning: Strategies for improving communication
efficiency.

</span>
<span class="ltx_bibblock"><span id="bib.bib21.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1610.05492</span>, 2016.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock">
Ilai Bistritz, Ariana Mann, and Nicholas Bambos.

</span>
<span class="ltx_bibblock">Distributed distillation for on-device learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib22.1.1" class="ltx_text ltx_font_italic">Advances in Neural Information Processing Systems</span>,
33:22593–22604, 2020.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock">
Chengxu Yang, Qipeng Wang, Mengwei Xu, Zhenpeng Chen, Kaigui Bian, Yunxin Liu,
and Xuanzhe Liu.

</span>
<span class="ltx_bibblock">Characterizing impacts of heterogeneity in federated learning upon
large-scale smartphone data.

</span>
<span class="ltx_bibblock">In <span id="bib.bib23.1.1" class="ltx_text ltx_font_italic">Proceedings of the Web Conference 2021</span>, pages 935–946,
2021.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock">
Keith Bonawitz, Hubert Eichner, Wolfgang Grieskamp, Dzmitry Huba, Alex
Ingerman, Vladimir Ivanov, Chloe Kiddon, Jakub Konečnỳ, Stefano
Mazzocchi, Brendan McMahan, et al.

</span>
<span class="ltx_bibblock">Towards federated learning at scale: System design.

</span>
<span class="ltx_bibblock"><span id="bib.bib24.1.1" class="ltx_text ltx_font_italic">Proceedings of Machine Learning and Systems</span>, 1:374–388, 2019.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock">
Yehuda Koren, Robert Bell, and Chris Volinsky.

</span>
<span class="ltx_bibblock">Matrix factorization techniques for recommender systems.

</span>
<span class="ltx_bibblock"><span id="bib.bib25.1.1" class="ltx_text ltx_font_italic">Computer</span>, 42(8):30–37, 2009.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock">
Guorui Zhou, Xiaoqiang Zhu, Chenru Song, Ying Fan, Han Zhu, Xiao Ma, Yanghui
Yan, Junqi Jin, Han Li, and Kun Gai.

</span>
<span class="ltx_bibblock">Deep interest network for click-through rate prediction.

</span>
<span class="ltx_bibblock">In <span id="bib.bib26.1.1" class="ltx_text ltx_font_italic">Proceedings of the 24th ACM SIGKDD International Conference
on Knowledge Discovery &amp; Data Mining</span>, pages 1059–1068, 2018.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock">
Wei Zhang, Wei Wei, Lingjie Xu, Lingling Jin, and Cheng Li.

</span>
<span class="ltx_bibblock">Ai matrix: A deep learning benchmark for alibaba data centers.

</span>
<span class="ltx_bibblock"><span id="bib.bib27.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1909.10562</span>, 2019.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock">
Maxim Naumov, Dheevatsa Mudigere, Hao-Jun Michael Shi, Jianyu Huang, Narayanan
Sundaraman, Jongsoo Park, Xiaodong Wang, Udit Gupta, Carole-Jean Wu,
Alisson G Azzolini, et al.

</span>
<span class="ltx_bibblock">Deep learning recommendation model for personalization and
recommendation systems.

</span>
<span class="ltx_bibblock"><span id="bib.bib28.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1906.00091</span>, 2019.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock">
Ruoxi Wang, Bin Fu, Gang Fu, and Mingliang Wang.

</span>
<span class="ltx_bibblock">Deep &amp; cross network for ad click predictions.

</span>
<span class="ltx_bibblock">In <span id="bib.bib29.1.1" class="ltx_text ltx_font_italic">Proceedings of the ADKDD’17</span>, pages 1–7. 2017.

</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock">
Ruoxi Wang, Rakesh Shivanna, Derek Cheng, Sagar Jain, Dong Lin, Lichan Hong,
and Ed Chi.

</span>
<span class="ltx_bibblock">Dcn v2: Improved deep &amp; cross network and practical lessons for
web-scale learning to rank systems.

</span>
<span class="ltx_bibblock">In <span id="bib.bib30.1.1" class="ltx_text ltx_font_italic">Proceedings of the Web Conference 2021</span>, pages 1785–1797,
2021.

</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock">
Huifeng Guo, Ruiming Tang, Yunming Ye, Zhenguo Li, and Xiuqiang He.

</span>
<span class="ltx_bibblock">Deepfm: a factorization-machine based neural network for ctr
prediction.

</span>
<span class="ltx_bibblock"><span id="bib.bib31.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1703.04247</span>, 2017.

</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock">
Xiangnan He, Lizi Liao, Hanwang Zhang, Liqiang Nie, Xia Hu, and Tat-Seng Chua.

</span>
<span class="ltx_bibblock">Neural collaborative filtering.

</span>
<span class="ltx_bibblock">In <span id="bib.bib32.1.1" class="ltx_text ltx_font_italic">Proceedings of the 26th international conference on world
wide web</span>, pages 173–182, 2017.

</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock">
Jianyu Wang, Zachary Charles, Zheng Xu, Gauri Joshi, H Brendan McMahan, Maruan
Al-Shedivat, Galen Andrew, Salman Avestimehr, Katharine Daly, Deepesh Data,
et al.

</span>
<span class="ltx_bibblock">A field guide to federated optimization.

</span>
<span class="ltx_bibblock"><span id="bib.bib33.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2107.06917</span>, 2021.

</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock">
Mu Li, David G Andersen, Jun Woo Park, Alexander J Smola, Amr Ahmed, Vanja
Josifovski, James Long, Eugene J Shekita, and Bor-Yiing Su.

</span>
<span class="ltx_bibblock">Scaling distributed machine learning with the parameter server.

</span>
<span class="ltx_bibblock">In <span id="bib.bib34.1.1" class="ltx_text ltx_font_italic">11th USENIX Symposium on Operating Systems Design and
Implementation (OSDI 14)</span>, pages 583–598, 2014.

</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock">
Tzu-Ming Harry Hsu, Hang Qi, and Matthew Brown.

</span>
<span class="ltx_bibblock">Measuring the effects of non-identical data distribution for
federated visual classification.

</span>
<span class="ltx_bibblock"><span id="bib.bib35.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1909.06335</span>, 2019.

</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock">
Jianyu Wang, Qinghua Liu, Hao Liang, Gauri Joshi, and H Vincent Poor.

</span>
<span class="ltx_bibblock">Tackling the objective inconsistency problem in heterogeneous
federated optimization.

</span>
<span class="ltx_bibblock"><span id="bib.bib36.1.1" class="ltx_text ltx_font_italic">Advances in neural information processing systems</span>,
33:7611–7623, 2020.

</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock">
Anit Kumar Sahu, Tian Li, Maziar Sanjabi, Manzil Zaheer, Ameet Talwalkar, and
Virginia Smith.

</span>
<span class="ltx_bibblock">On the convergence of federated optimization in heterogeneous
networks.

</span>
<span class="ltx_bibblock"><span id="bib.bib37.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1812.06127</span>, 3:3, 2018.

</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock">
Fan Lai, Yinwei Dai, Xiangfeng Zhu, Harsha V Madhyastha, and Mosharaf
Chowdhury.

</span>
<span class="ltx_bibblock">Fedscale: Benchmarking model and system performance of federated
learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib38.1.1" class="ltx_text ltx_font_italic">Proceedings of the First Workshop on Systems Challenges in
Reliable and Secure Federated Learning</span>, pages 1–3, 2021.

</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock">
Carole-Jean Wu, David Brooks, Kevin Chen, Douglas Chen, Sy Choudhury, Marat
Dukhan, Kim Hazelwood, Eldad Isaac, Yangqing Jia, Bill Jia, Tommer Leyvand,
Hao Lu, Yang Lu, Lin Qiao, Brandon Reagen, Joe Spisak, Fei Sun, Andrew
Tulloch, Peter Vajda, Xiaodong Wang, Yanghan Wang, Bram Wasti, Yiming Wu, Ran
Xian, Sungjoo Yoo, and Peizhao Zhang.

</span>
<span class="ltx_bibblock">Machine learning at facebook: Understanding inference at the edge.

</span>
<span class="ltx_bibblock">In <span id="bib.bib39.1.1" class="ltx_text ltx_font_italic">2019 IEEE International Symposium on High Performance
Computer Architecture (HPCA)</span>, 2019.

</span>
</li>
<li id="bib.bib40" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[40]</span>
<span class="ltx_bibblock">
SpeedTest.

</span>
<span class="ltx_bibblock">Global Median Speeds March 2022.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://www.speedtest.net/global-index</span>, 2022.

</span>
</li>
<li id="bib.bib41" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[41]</span>
<span class="ltx_bibblock">
John Nguyen, Kshitiz Malik, Hongyuan Zhan, Ashkan Yousefpour, Michael Rabbat,
Mani Malek, and Dzmitry Huba.

</span>
<span class="ltx_bibblock">Federated learning with buffered asynchronous aggregation.

</span>
<span class="ltx_bibblock"><span id="bib.bib41.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2106.06639</span>, 2021.

</span>
</li>
<li id="bib.bib42" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[42]</span>
<span class="ltx_bibblock">
Nader Bouacida, Jiahui Hou, Hui Zang, and Xin Liu.

</span>
<span class="ltx_bibblock">Adaptive federated dropout: Improving communication efficiency and
generalization for federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib42.1.1" class="ltx_text ltx_font_italic">CoRR</span>, abs/2011.04050, 2020.

</span>
</li>
<li id="bib.bib43" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[43]</span>
<span class="ltx_bibblock">
Sixing Yu, Phuong Nguyen, Ali Anwar, and Ali Jannesari.

</span>
<span class="ltx_bibblock">Adaptive dynamic pruning for non-iid federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib43.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2106.06921</span>, 2021.

</span>
</li>
<li id="bib.bib44" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[44]</span>
<span class="ltx_bibblock">
Liang Li, Dian Shi, Ronghui Hou, Hui Li, Miao Pan, and Zhu Han.

</span>
<span class="ltx_bibblock">To talk or to work: Flexible communication compression for energy
efficient federated learning over heterogeneous mobile edge devices.

</span>
<span class="ltx_bibblock">In <span id="bib.bib44.1.1" class="ltx_text ltx_font_italic">IEEE INFOCOM 2021-IEEE Conference on Computer
Communications</span>, pages 1–10. IEEE, 2021.

</span>
</li>
<li id="bib.bib45" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[45]</span>
<span class="ltx_bibblock">
Dan Alistarh, Demjan Grubic, Jerry Li, Ryota Tomioka, and Milan Vojnovic.

</span>
<span class="ltx_bibblock">Qsgd: Communication-efficient sgd via gradient quantization and
encoding.

</span>
<span class="ltx_bibblock"><span id="bib.bib45.1.1" class="ltx_text ltx_font_italic">Advances in Neural Information Processing Systems</span>, 30, 2017.

</span>
</li>
<li id="bib.bib46" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[46]</span>
<span class="ltx_bibblock">
Yujun Lin, Song Han, Huizi Mao, Yu Wang, and William J Dally.

</span>
<span class="ltx_bibblock">Deep gradient compression: Reducing the communication bandwidth for
distributed training.

</span>
<span class="ltx_bibblock"><span id="bib.bib46.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1712.01887</span>, 2017.

</span>
</li>
<li id="bib.bib47" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[47]</span>
<span class="ltx_bibblock">
Tao Lin, Lingjing Kong, Sebastian U Stich, and Martin Jaggi.

</span>
<span class="ltx_bibblock">Ensemble distillation for robust model fusion in federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib47.1.1" class="ltx_text ltx_font_italic">Advances in Neural Information Processing Systems</span>,
33:2351–2363, 2020.

</span>
</li>
<li id="bib.bib48" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[48]</span>
<span class="ltx_bibblock">
Chaoyang He, Murali Annavaram, and Salman Avestimehr.

</span>
<span class="ltx_bibblock">Group knowledge transfer: Federated learning of large cnns at the
edge.

</span>
<span class="ltx_bibblock"><span id="bib.bib48.1.1" class="ltx_text ltx_font_italic">Advances in Neural Information Processing Systems</span>,
33:14068–14080, 2020.

</span>
</li>
<li id="bib.bib49" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[49]</span>
<span class="ltx_bibblock">
Hongyan Chang, Virat Shejwalkar, Reza Shokri, and Amir Houmansadr.

</span>
<span class="ltx_bibblock">Cronus: Robust and heterogeneous collaborative learning with
black-box knowledge transfer.

</span>
<span class="ltx_bibblock"><span id="bib.bib49.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1912.11279</span>, 2019.

</span>
</li>
<li id="bib.bib50" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[50]</span>
<span class="ltx_bibblock">
Daliang Li and Junpu Wang.

</span>
<span class="ltx_bibblock">Fedmd: Heterogenous federated learning via model distillation.

</span>
<span class="ltx_bibblock"><span id="bib.bib50.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1910.03581</span>, 2019.

</span>
</li>
<li id="bib.bib51" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[51]</span>
<span class="ltx_bibblock">
Eunjeong Jeong, Seungeun Oh, Hyesung Kim, Jihong Park, Mehdi Bennis, and
Seong-Lyun Kim.

</span>
<span class="ltx_bibblock">Communication-efficient on-device machine learning: Federated
distillation and augmentation under non-iid private data.

</span>
<span class="ltx_bibblock"><span id="bib.bib51.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1811.11479</span>, 2018.

</span>
</li>
<li id="bib.bib52" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[52]</span>
<span class="ltx_bibblock">
Yae Jee Cho, Jianyu Wang, Tarun Chiruvolu, and Gauri Joshi.

</span>
<span class="ltx_bibblock">Personalized federated learning for heterogeneous clients with
clustered knowledge transfer.

</span>
<span class="ltx_bibblock"><span id="bib.bib52.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2109.08119</span>, 2021.

</span>
</li>
<li id="bib.bib53" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[53]</span>
<span class="ltx_bibblock">
Vasileios Perifanis and Pavlos S Efraimidis.

</span>
<span class="ltx_bibblock">Federated neural collaborative filtering.

</span>
<span class="ltx_bibblock"><span id="bib.bib53.1.1" class="ltx_text ltx_font_italic">Knowledge-Based Systems</span>, 242:108441, 2022.

</span>
</li>
<li id="bib.bib54" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[54]</span>
<span class="ltx_bibblock">
shenweichen.

</span>
<span class="ltx_bibblock">Deepctr-torch, 2022.

</span>
</li>
<li id="bib.bib55" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[55]</span>
<span class="ltx_bibblock">
Pavan Sabnagapati.

</span>
<span class="ltx_bibblock">Ad display/click data on taobao.com, 2020.

</span>
</li>
<li id="bib.bib56" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[56]</span>
<span class="ltx_bibblock">
Grouplens.

</span>
<span class="ltx_bibblock">Movielens 20m dataset, 2016.

</span>
</li>
<li id="bib.bib57" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[57]</span>
<span class="ltx_bibblock">
Sebastian Caldas, Sai Meher Karthik Duddu, Peter Wu, Tian Li, Jakub
Konečnỳ, H Brendan McMahan, Virginia Smith, and Ameet Talwalkar.

</span>
<span class="ltx_bibblock">Leaf: A benchmark for federated settings.

</span>
<span class="ltx_bibblock"><span id="bib.bib57.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1812.01097</span>, 2018.

</span>
</li>
<li id="bib.bib58" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[58]</span>
<span class="ltx_bibblock">
Dzmitry Huba, John Nguyen, Kshitiz Malik, Ruiyu Zhu, Mike Rabbat, Ashkan
Yousefpour, Carole-Jean Wu, Hongyuan Zhan, Pavel Ustinov, Harish Srinivas,
et al.

</span>
<span class="ltx_bibblock">Papaya: Practical, private, and scalable federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib58.1.1" class="ltx_text ltx_font_italic">Proceedings of Machine Learning and Systems</span>, 4, 2022.

</span>
</li>
<li id="bib.bib59" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[59]</span>
<span class="ltx_bibblock">
Sara Hooker, Aaron Courville, Gregory Clark, Yann Dauphin, and Andrea Frome.

</span>
<span class="ltx_bibblock">What do compressed deep neural networks forget?

</span>
<span class="ltx_bibblock"><span id="bib.bib59.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:1911.05248</span>, 2019.

</span>
</li>
<li id="bib.bib60" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[60]</span>
<span class="ltx_bibblock">
Sara Hooker, Nyalleng Moorosi, Gregory Clark, Samy Bengio, and Emily Denton.

</span>
<span class="ltx_bibblock">Characterising bias in compressed models.

</span>
<span class="ltx_bibblock"><span id="bib.bib60.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2010.03058</span>, 2020.

</span>
</li>
<li id="bib.bib61" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[61]</span>
<span class="ltx_bibblock">
Carole-Jean Wu, Robin Burke, Ed H. Chi, Joseph Konstan, Julian McAuley, Yves
Raimond, and Hao Zhang.

</span>
<span class="ltx_bibblock">Developing a recommendation benchmark for mlperf training and
inference, 2020.

</span>
</li>
<li id="bib.bib62" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[62]</span>
<span class="ltx_bibblock">
Jin Huang and Charles X Ling.

</span>
<span class="ltx_bibblock">Using auc and accuracy in evaluating learning algorithms.

</span>
<span class="ltx_bibblock"><span id="bib.bib62.1.1" class="ltx_text ltx_font_italic">IEEE Transactions on knowledge and Data Engineering</span>,
17(3):299–310, 2005.

</span>
</li>
<li id="bib.bib63" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[63]</span>
<span class="ltx_bibblock">
Wang-Cheng Kang, Derek Zhiyuan Cheng, Tiansheng Yao, Xinyang Yi, Ting Chen,
Lichan Hong, and Ed H Chi.

</span>
<span class="ltx_bibblock">Learning to embed categorical features without embedding tables for
recommendation.

</span>
<span class="ltx_bibblock"><span id="bib.bib63.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2010.10784</span>, 2020.

</span>
</li>
<li id="bib.bib64" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[64]</span>
<span class="ltx_bibblock">
Alexis Stephens.

</span>
<span class="ltx_bibblock">Big Data Has Potential to Both Hurt and Help Disadvantaged
Communities.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://nextcity.org/urbanist-news/big-data-good-bad-help-disadvantaged-communities</span>,
2014.

</span>
</li>
<li id="bib.bib65" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[65]</span>
<span class="ltx_bibblock">
Dugang Liu, Pengxiang Cheng, Hong Zhu, Zhenhua Dong, Xiuqiang He, Weike Pan,
and Zhong Ming.

</span>
<span class="ltx_bibblock">Mitigating confounding bias in recommendation via information
bottleneck.

</span>
<span class="ltx_bibblock">In <span id="bib.bib65.1.1" class="ltx_text ltx_font_italic">Fifteenth ACM Conference on Recommender Systems</span>, pages
351–360, 2021.

</span>
</li>
<li id="bib.bib66" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[66]</span>
<span class="ltx_bibblock">
Tianxin Wei, Fuli Feng, Jiawei Chen, Ziwei Wu, Jinfeng Yi, and Xiangnan He.

</span>
<span class="ltx_bibblock">Model-agnostic counterfactual reasoning for eliminating popularity
bias in recommender system.

</span>
<span class="ltx_bibblock">In <span id="bib.bib66.1.1" class="ltx_text ltx_font_italic">Proceedings of the 27th ACM SIGKDD Conference on Knowledge
Discovery &amp; Data Mining</span>, pages 1791–1800, 2021.

</span>
</li>
<li id="bib.bib67" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[67]</span>
<span class="ltx_bibblock">
Yuta Saito, Suguru Yaginuma, Yuta Nishino, Hayato Sakata, and Kazuhide Nakata.

</span>
<span class="ltx_bibblock">Unbiased recommender learning from missing-not-at-random implicit
feedback.

</span>
<span class="ltx_bibblock">In <span id="bib.bib67.1.1" class="ltx_text ltx_font_italic">Proceedings of the 13th International Conference on Web
Search and Data Mining</span>, pages 501–509, 2020.

</span>
</li>
<li id="bib.bib68" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[68]</span>
<span class="ltx_bibblock">
Daniel J Beutel, Taner Topal, Akhil Mathur, Xinchi Qiu, Titouan Parcollet,
Pedro PB de Gusmão, and Nicholas D Lane.

</span>
<span class="ltx_bibblock">Flower: A friendly federated learning research framework.

</span>
<span class="ltx_bibblock"><span id="bib.bib68.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2007.14390</span>, 2020.

</span>
</li>
<li id="bib.bib69" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[69]</span>
<span class="ltx_bibblock">
Facebook Research.

</span>
<span class="ltx_bibblock">Federated learning simulator (flsim).

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://github.com/facebookresearch/FLSim</span>, 2022.

</span>
</li>
<li id="bib.bib70" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[70]</span>
<span class="ltx_bibblock">
Google.

</span>
<span class="ltx_bibblock">Tensorflow federated: Machine learning on decentralized data.

</span>
<span class="ltx_bibblock"><span class="ltx_ref ltx_nolink ltx_url ltx_font_typewriter ltx_ref_self">https://www.tensorflow.org/federated</span>, 2022.

</span>
</li>
<li id="bib.bib71" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[71]</span>
<span class="ltx_bibblock">
Alexander Ziller, Andrew Trask, Antonio Lopardo, Benjamin Szymkow, Bobby
Wagner, Emma Bluemke, Jean-Mickael Nounahon, Jonathan Passerat-Palmbach,
Kritika Prakash, Nick Rose, et al.

</span>
<span class="ltx_bibblock">Pysyft: A library for easy federated learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib71.1.1" class="ltx_text ltx_font_italic">Federated Learning Systems</span>, pages 111–139. Springer, 2021.

</span>
</li>
<li id="bib.bib72" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[72]</span>
<span class="ltx_bibblock">
Heiko Ludwig, Nathalie Baracaldo, Gegi Thomas, Yi Zhou, Ali Anwar, Shashank
Rajamoni, Yuya Ong, Jayaram Radhakrishnan, Ashish Verma, Mathieu Sinn, et al.

</span>
<span class="ltx_bibblock">Ibm federated learning: an enterprise framework white paper v0. 1.

</span>
<span class="ltx_bibblock"><span id="bib.bib72.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2007.10987</span>, 2020.

</span>
</li>
<li id="bib.bib73" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[73]</span>
<span class="ltx_bibblock">
Jae Hun Ro, Ananda Theertha Suresh, and Ke Wu.

</span>
<span class="ltx_bibblock">Fedjax: Federated learning simulation with jax.

</span>
<span class="ltx_bibblock"><span id="bib.bib73.1.1" class="ltx_text ltx_font_italic">arXiv preprint arXiv:2108.02117</span>, 2021.

</span>
</li>
<li id="bib.bib74" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[74]</span>
<span class="ltx_bibblock">
Young Geun Kim and Carole-Jean Wu.

</span>
<span class="ltx_bibblock">Autofl: Enabling heterogeneity-aware energy efficient federated
learning.

</span>
<span class="ltx_bibblock">In <span id="bib.bib74.1.1" class="ltx_text ltx_font_italic">MICRO-54: 54th Annual IEEE/ACM International Symposium on
Microarchitecture</span>, pages 183–198, 2021.

</span>
</li>
<li id="bib.bib75" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[75]</span>
<span class="ltx_bibblock">
Hao-Jun Michael Shi, Dheevatsa Mudigere, Maxim Naumov, and Jiyan Yang.

</span>
<span class="ltx_bibblock">Compositional embeddings using complementary partitions for
memory-efficient recommendation systems.

</span>
<span class="ltx_bibblock">In <span id="bib.bib75.1.1" class="ltx_text ltx_font_italic">Proceedings of the 26th ACM SIGKDD International Conference
on Knowledge Discovery &amp; Data Mining</span>, pages 165–175, 2020.

</span>
</li>
<li id="bib.bib76" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[76]</span>
<span class="ltx_bibblock">
Oleksii Hrinchuk, Valentin Khrulkov, Leyla Mirvakhabova, Elena Orlova, and Ivan
Oseledets.

</span>
<span class="ltx_bibblock">Tensorized embedding layers.

</span>
<span class="ltx_bibblock">In <span id="bib.bib76.1.1" class="ltx_text ltx_font_italic">Findings of the Association for Computational Linguistics:
EMNLP 2020</span>, pages 4847–4860, 2020.

</span>
</li>
<li id="bib.bib77" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[77]</span>
<span class="ltx_bibblock">
Chunxing Yin, Bilge Acun, Carole-Jean Wu, and Xing Liu.

</span>
<span class="ltx_bibblock">Tt-rec: Tensor train compression for deep learning recommendation
models.

</span>
<span class="ltx_bibblock"><span id="bib.bib77.1.1" class="ltx_text ltx_font_italic">Proceedings of Machine Learning and Systems</span>, 3:448–462, 2021.

</span>
</li>
<li id="bib.bib78" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[78]</span>
<span class="ltx_bibblock">
Karan Singhal, Hakim Sidahmed, Zachary Garrett, Shanshan Wu, John Rush, and
Sushant Prakash.

</span>
<span class="ltx_bibblock">Federated reconstruction: Partially local federated learning.

</span>
<span class="ltx_bibblock"><span id="bib.bib78.1.1" class="ltx_text ltx_font_italic">Advances in Neural Information Processing Systems</span>, 34, 2021.

</span>
</li>
</ul>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2206.02632" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2206.02633" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2206.02633">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2206.02633" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2206.02634" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Mon Mar 11 19:32:42 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
