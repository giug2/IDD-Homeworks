<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation</title>
<!--Generated on Tue May 28 17:33:53 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2406.00049v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S1" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S2" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Background</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S2.SS1" title="In 2 Background â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Large Language Models for Machine Translation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S2.SS2" title="In 2 Background â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Automatic Metrics for Machine Translation</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>An MCMC-based Decoding Approach for Text Generation</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.SS1" title="In 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Metropolis-Hastings</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.SS2" title="In 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>Proposal distribution</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.SS3" title="In 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.3 </span>Connections to Reinforcement Learning with Human Feedback</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S4" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experimental Settings</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S4.SS0.SSS0.Px1" title="In 4 Experimental Settings â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Data and Evaluation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S4.SS0.SSS0.Px2" title="In 4 Experimental Settings â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S4.SS0.SSS0.Px3" title="In 4 Experimental Settings â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Automatic Metrics for <span class="ltx_text ltx_font_smallcaps">Quest</span></span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S4.SS0.SSS0.Px4" title="In 4 Experimental Settings â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Decoding Configurations</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S4.SS0.SSS0.Px5" title="In 4 Experimental Settings â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Compute Comparison: Ancestral Vs <span class="ltx_text ltx_font_smallcaps">Quest</span></span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Results</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.SS1" title="In 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.1 </span>Main Findings</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.SS2" title="In 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5.2 </span>Ablation Analysis</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.SS2.SSS0.Px1" title="In 5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_text ltx_font_smallcaps">Quest</span> generates less-likely high-quality samples.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.SS2.SSS0.Px2" title="In 5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Average reward improves over decoding steps.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.SS2.SSS0.Px3" title="In 5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">High <math alttext="\beta" class="ltx_Math" display="inline"><semantics><mi>Î²</mi><annotation-xml encoding="MathML-Content"><ci>ğ›½</ci></annotation-xml><annotation encoding="application/x-tex">\beta</annotation><annotation encoding="application/x-llamapun">italic_Î²</annotation></semantics></math> value results in higher acceptance rates.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.SS2.SSS0.Px4" title="In 5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Our sentence-level proposal generates better candidates.</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S6" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S6.SS0.SSS0.Px1" title="In 6 Related Work â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Sampling from Intractable Gibbs distributions.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S6.SS0.SSS0.Px2" title="In 6 Related Work â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title">Diverse Decoding for Machine Translation.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S7" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">7 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S8" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">8 </span>Limitations and Broad Impact</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A1" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Connection to RLHF derivation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A2" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Prompts used for MT</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Additional Results</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.SS1" title="In Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.1 </span>Toy problem: Validating the Approach</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.SS2" title="In Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.2 </span>QE Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.SS3" title="In Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.3 </span>MCMC results in better outputs for shorter segments.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.SS4" title="In Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C.4 </span>Accepted proposals are skewed towards the end of the sentence.</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A4" title="In Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Comparing RLHF-QUEST vs QUEST</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">
<span class="ltx_text ltx_font_smallcaps" id="id12.id1">Quest</span>: Quality-Aware Metropolis-Hastings Sampling for Machine Translation</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">GonÃ§alo R. A. Faria<sup class="ltx_sup" id="id13.11.id1"><span class="ltx_text ltx_font_italic" id="id13.11.id1.1">1</span></sup>, Sweta Agrawal<sup class="ltx_sup" id="id14.12.id2"><span class="ltx_text ltx_font_italic" id="id14.12.id2.1">1</span></sup>, AntÃ³nio Farinhas<sup class="ltx_sup" id="id15.13.id3"><span class="ltx_text ltx_font_italic" id="id15.13.id3.1">1,2</span></sup>, 
<br class="ltx_break"/><span class="ltx_text ltx_font_bold" id="id4.4.1">Ricardo Rei<sup class="ltx_sup" id="id4.4.1.1"><span class="ltx_text ltx_font_medium ltx_font_italic" id="id4.4.1.1.1">3</span></sup></span>, <span class="ltx_text ltx_font_bold" id="id5.5.2">JosÃ© G. C. de Souza<sup class="ltx_sup" id="id5.5.2.1"><span class="ltx_text ltx_font_medium ltx_font_italic" id="id5.5.2.1.1">3</span></sup></span>, <span class="ltx_text ltx_font_bold" id="id6.6.3">AndrÃ© F.T. Martins<sup class="ltx_sup" id="id6.6.3.1"><span class="ltx_text ltx_font_medium ltx_font_italic" id="id6.6.3.1.1">1,2,3,4</span></sup></span>
<br class="ltx_break"/><sup class="ltx_sup" id="id16.14.id4">1</sup>Instituto de TelecomunicaÃ§Ãµes, <sup class="ltx_sup" id="id17.15.id5">2</sup>Instituto Superior TÃ©cnico, Universidade de Lisboa

<br class="ltx_break"/><sup class="ltx_sup" id="id18.16.id6">3</sup>Unbabel, <sup class="ltx_sup" id="id19.17.id7">4</sup>ELLIS Unit Lisbon
<br class="ltx_break"/><span class="ltx_text ltx_font_typewriter" id="id20.18.id8">goncalofaria.research@gmail.com</span>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id11.1">An important challenge in machine translation is to generate high-quality and diverse translations. Prior work has shown that the estimated likelihood from the MT model correlates poorly with translation quality. In contrast, quality evaluation metrics (such as COMET or BLEURT) exhibit high correlations with human judgments, which has motivated their use as rerankers (such as quality-aware and minimum Bayes risk decoding). However, relying on a single translation with high estimated quality increases the chances of â€œgaming the metricâ€. In this paper, we address the problem of sampling a <span class="ltx_text ltx_font_italic" id="id11.1.2">set</span> of high-quality and diverse translations. We provide a simple and effective way to avoid over-reliance on noisy quality estimates by using them as the energy function of a Gibbs distribution. Instead of looking for a mode in the distribution, we generate multiple samples from high-density areas through the Metropolis-Hastings algorithm, a simple Markov chain Monte Carlo approach. The results show that our proposed method leads to high-quality and diverse outputs across multiple language pairs (<span class="ltx_text ltx_font_smallcaps" id="id11.1.1">English<math alttext="\leftrightarrow" class="ltx_Math" display="inline" id="id11.1.1.m1.1"><semantics id="id11.1.1.m1.1a"><mo id="id11.1.1.m1.1.1" stretchy="false" xref="id11.1.1.m1.1.1.cmml">â†”</mo><annotation-xml encoding="MathML-Content" id="id11.1.1.m1.1b"><ci id="id11.1.1.m1.1.1.cmml" xref="id11.1.1.m1.1.1">â†”</ci></annotation-xml><annotation encoding="application/x-tex" id="id11.1.1.m1.1c">\leftrightarrow</annotation><annotation encoding="application/x-llamapun" id="id11.1.1.m1.1d">â†”</annotation></semantics></math></span>{<span class="ltx_text ltx_font_smallcaps" id="id11.1.3">German, Russian</span>}) with two strong decoder-only LLMs (<span class="ltx_text ltx_font_smallcaps" id="id11.1.4">Alma-7b, Tower-7b</span>).</p>
</div>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Machine translation (MT) is becoming increasingly more accurate and powerful, as it benefits from the many capabilities and acquired knowledge of large language models (LLMs) <cite class="ltx_cite ltx_citemacro_citep">(Freitag etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib20" title="">2023b</a>; Hendy etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib30" title="">2023</a>)</cite>.
However, for many domains and languages the quality of translation is still not satisfactoryâ€”for example, hallucinations or critical errors are a serious issue when translating high-risk content, as in medical and legal domains <cite class="ltx_cite ltx_citemacro_citep">(Khoong etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib34" title="">2019</a>; Taira etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib71" title="">2021</a>; Shen etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib65" title="">2023</a>; Guerreiro etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib28" title="">2023b</a>; Sanz-Valdivieso and LÃ³pez-Arroyo, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib61" title="">2023</a>; Grimm etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib26" title="">2024</a>)</cite>.
Developing procedures for sampling higher-quality translations is therefore in high demand.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">It is known that the output quality of the translations generated by maximizing the model likelihood is limited because of the <span class="ltx_text ltx_font_italic" id="S1.p2.1.1">inadequacy of the mode</span>â€”models tend to produce distributions over outputs that are highly peaked, favoring a single hypothesis <cite class="ltx_cite ltx_citemacro_citep">(Eikema and Aziz, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib12" title="">2020</a>; Peters and Martins, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib54" title="">2021</a>; Eikema, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib11" title="">2024</a>)</cite>; and improving search often makes things worse <cite class="ltx_cite ltx_citemacro_citep">(Koehn and Knowles, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib37" title="">2017</a>; Stahlberg and Byrne, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib67" title="">2019</a>)</cite>.
In general, maximizing model likelihood tends to overlook hypotheses that could be equally valid and more appropriate in certain contexts. To address this limitation, a string of work has been initiated towards â€œquality-aware decodingâ€, which leverages powerful quality estimation (QE) and evaluation metrics, such as COMET <cite class="ltx_cite ltx_citemacro_citep">(Rei etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib59" title="">2022</a>)</cite> or BLEURT <cite class="ltx_cite ltx_citemacro_citep">(Yan etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib81" title="">2023</a>)</cite>, to explore and rerank a broader range of candidate hypotheses generated via sampling from the modelâ€™s distribution, selecting the best-1 <cite class="ltx_cite ltx_citemacro_citep">(Freitag etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib19" title="">2022a</a>; Fernandes etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib15" title="">2022b</a>; Farinhas etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib13" title="">2023</a>)</cite> or the best-<math alttext="k" class="ltx_Math" display="inline" id="S1.p2.1.m1.1"><semantics id="S1.p2.1.m1.1a"><mi id="S1.p2.1.m1.1.1" xref="S1.p2.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S1.p2.1.m1.1b"><ci id="S1.p2.1.m1.1.1.cmml" xref="S1.p2.1.m1.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.1.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="S1.p2.1.m1.1d">italic_k</annotation></semantics></math> <cite class="ltx_cite ltx_citemacro_citep">(Jinnai etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib32" title="">2024</a>; Singhal etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib66" title="">2023</a>)</cite> according to these learned metrics.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Despite the benefits, reranking-based methods have their own drawbacks. There is a risk of these approaches overfitting to the metrics used, potentially leading to illusory gains in quality, as the translations obtained via optimizing these metrics may not always be preferred by humans when compared to other alternatives <cite class="ltx_cite ltx_citemacro_citep">(Fernandes etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib15" title="">2022b</a>)</cite>. Secondly, their effectiveness is limited by the quality of the initial candidate set. For instance, <cite class="ltx_cite ltx_citemacro_cite">Vernikos and Popescu-Belis (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib74" title="">2024</a>)</cite> show that many high-quality translations, generated by combining translation hypotheses, are less likely to be sampled from the modelâ€™s distribution even with a very large pool size.</p>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">One potential way to remedy these issues, which we explore in this paper, is to use these automatic metric proxies as the <span class="ltx_text ltx_font_bold" id="S1.p4.1.1">energy function of a Gibbs distribution</span>. However, sampling hypotheses from this distribution presents a difficult challenge: unlike likelihood-based sampling, â€œquality-based samplingâ€ from a Gibbs distribution cannot be performed autoregressively, and it is intractable to enumerate and score all possible hypotheses.
We address this challenge by proposing a simple and effective Markov chain Monte Carlo approach (MCMC) method, combining the Metropolis-Hastings algorithm with a suitable proposal distribution. Our method,
<span class="ltx_text ltx_font_bold ltx_framed ltx_framed_underline" id="S1.p4.1.2">Qu</span><span class="ltx_text ltx_font_bold" id="S1.p4.1.3">ality-Aware M<span class="ltx_text ltx_framed ltx_framed_underline" id="S1.p4.1.3.1">e</span>tropolis-Ha<span class="ltx_text ltx_framed ltx_framed_underline" id="S1.p4.1.3.2">st</span>ings
(<span class="ltx_text ltx_font_smallcaps" id="S1.p4.1.3.3">Quest</span>) Sampling</span>, uses a novel proposal distribution that is compatible with sentence-level evaluation metrics, common in text generation tasks like MT. We further note that while we focus on MT, where automatic QE metrics are more developed and robust, our proposed method is general and can be applied to other natural language processing (NLP)
tasks. Furthermore, as our method is agnostic to the specific quality metric used in the Gibbs distribution, it can directly benefit from any future improvements in the metrics.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">We show that <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.1">Quest</span> sampling results in high-quality and diverse samples on multiple test beds (WMT23 <span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.2">English</span> <math alttext="\leftrightarrow" class="ltx_Math" display="inline" id="S1.p5.1.m1.1"><semantics id="S1.p5.1.m1.1a"><mo id="S1.p5.1.m1.1.1" stretchy="false" xref="S1.p5.1.m1.1.1.cmml">â†”</mo><annotation-xml encoding="MathML-Content" id="S1.p5.1.m1.1b"><ci id="S1.p5.1.m1.1.1.cmml" xref="S1.p5.1.m1.1.1">â†”</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p5.1.m1.1c">\leftrightarrow</annotation><annotation encoding="application/x-llamapun" id="S1.p5.1.m1.1d">â†”</annotation></semantics></math> {<span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.3">German, Russian</span>}) and with multiple decoder-only LLMs (<span class="ltx_text ltx_font_smallcaps" id="S1.p5.1.4">Tower-7b, Alma-7b</span>). Our method generates many novel hypotheses from the high-density regions unlikely to be generated via ancestral sampling. Furthermore, with increasing chain size, average quality as measured by automatic metrics continues to improve, unlike ancestral sampling, where the candidate set quality remains unchanged even with a larger pool size.<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>We release the code to replicate our experiments at <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/deep-spin/quest-decoding" title="">https://github.com/deep-spin/quest-decoding</a>.</span></span></span></p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Background </h2>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Large Language Models for Machine Translation</h3>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.10">Generating translations from autoregressive LLMs (either encoder-decoder or decoder-only) involves conditioning the language model on a prompt <math alttext="x" class="ltx_Math" display="inline" id="S2.SS1.p1.1.m1.1"><semantics id="S2.SS1.p1.1.m1.1a"><mi id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.1b"><ci id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.1.m1.1d">italic_x</annotation></semantics></math>, which is a sequence of tokens <math alttext="(x_{1},x_{2},\ldots,x_{L})\in\mathcal{X}" class="ltx_Math" display="inline" id="S2.SS1.p1.2.m2.4"><semantics id="S2.SS1.p1.2.m2.4a"><mrow id="S2.SS1.p1.2.m2.4.4" xref="S2.SS1.p1.2.m2.4.4.cmml"><mrow id="S2.SS1.p1.2.m2.4.4.3.3" xref="S2.SS1.p1.2.m2.4.4.3.4.cmml"><mo id="S2.SS1.p1.2.m2.4.4.3.3.4" stretchy="false" xref="S2.SS1.p1.2.m2.4.4.3.4.cmml">(</mo><msub id="S2.SS1.p1.2.m2.2.2.1.1.1" xref="S2.SS1.p1.2.m2.2.2.1.1.1.cmml"><mi id="S2.SS1.p1.2.m2.2.2.1.1.1.2" xref="S2.SS1.p1.2.m2.2.2.1.1.1.2.cmml">x</mi><mn id="S2.SS1.p1.2.m2.2.2.1.1.1.3" xref="S2.SS1.p1.2.m2.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S2.SS1.p1.2.m2.4.4.3.3.5" xref="S2.SS1.p1.2.m2.4.4.3.4.cmml">,</mo><msub id="S2.SS1.p1.2.m2.3.3.2.2.2" xref="S2.SS1.p1.2.m2.3.3.2.2.2.cmml"><mi id="S2.SS1.p1.2.m2.3.3.2.2.2.2" xref="S2.SS1.p1.2.m2.3.3.2.2.2.2.cmml">x</mi><mn id="S2.SS1.p1.2.m2.3.3.2.2.2.3" xref="S2.SS1.p1.2.m2.3.3.2.2.2.3.cmml">2</mn></msub><mo id="S2.SS1.p1.2.m2.4.4.3.3.6" xref="S2.SS1.p1.2.m2.4.4.3.4.cmml">,</mo><mi id="S2.SS1.p1.2.m2.1.1" mathvariant="normal" xref="S2.SS1.p1.2.m2.1.1.cmml">â€¦</mi><mo id="S2.SS1.p1.2.m2.4.4.3.3.7" xref="S2.SS1.p1.2.m2.4.4.3.4.cmml">,</mo><msub id="S2.SS1.p1.2.m2.4.4.3.3.3" xref="S2.SS1.p1.2.m2.4.4.3.3.3.cmml"><mi id="S2.SS1.p1.2.m2.4.4.3.3.3.2" xref="S2.SS1.p1.2.m2.4.4.3.3.3.2.cmml">x</mi><mi id="S2.SS1.p1.2.m2.4.4.3.3.3.3" xref="S2.SS1.p1.2.m2.4.4.3.3.3.3.cmml">L</mi></msub><mo id="S2.SS1.p1.2.m2.4.4.3.3.8" stretchy="false" xref="S2.SS1.p1.2.m2.4.4.3.4.cmml">)</mo></mrow><mo id="S2.SS1.p1.2.m2.4.4.4" xref="S2.SS1.p1.2.m2.4.4.4.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.2.m2.4.4.5" xref="S2.SS1.p1.2.m2.4.4.5.cmml">ğ’³</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.2.m2.4b"><apply id="S2.SS1.p1.2.m2.4.4.cmml" xref="S2.SS1.p1.2.m2.4.4"><in id="S2.SS1.p1.2.m2.4.4.4.cmml" xref="S2.SS1.p1.2.m2.4.4.4"></in><vector id="S2.SS1.p1.2.m2.4.4.3.4.cmml" xref="S2.SS1.p1.2.m2.4.4.3.3"><apply id="S2.SS1.p1.2.m2.2.2.1.1.1.cmml" xref="S2.SS1.p1.2.m2.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.2.m2.2.2.1.1.1.1.cmml" xref="S2.SS1.p1.2.m2.2.2.1.1.1">subscript</csymbol><ci id="S2.SS1.p1.2.m2.2.2.1.1.1.2.cmml" xref="S2.SS1.p1.2.m2.2.2.1.1.1.2">ğ‘¥</ci><cn id="S2.SS1.p1.2.m2.2.2.1.1.1.3.cmml" type="integer" xref="S2.SS1.p1.2.m2.2.2.1.1.1.3">1</cn></apply><apply id="S2.SS1.p1.2.m2.3.3.2.2.2.cmml" xref="S2.SS1.p1.2.m2.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.p1.2.m2.3.3.2.2.2.1.cmml" xref="S2.SS1.p1.2.m2.3.3.2.2.2">subscript</csymbol><ci id="S2.SS1.p1.2.m2.3.3.2.2.2.2.cmml" xref="S2.SS1.p1.2.m2.3.3.2.2.2.2">ğ‘¥</ci><cn id="S2.SS1.p1.2.m2.3.3.2.2.2.3.cmml" type="integer" xref="S2.SS1.p1.2.m2.3.3.2.2.2.3">2</cn></apply><ci id="S2.SS1.p1.2.m2.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1">â€¦</ci><apply id="S2.SS1.p1.2.m2.4.4.3.3.3.cmml" xref="S2.SS1.p1.2.m2.4.4.3.3.3"><csymbol cd="ambiguous" id="S2.SS1.p1.2.m2.4.4.3.3.3.1.cmml" xref="S2.SS1.p1.2.m2.4.4.3.3.3">subscript</csymbol><ci id="S2.SS1.p1.2.m2.4.4.3.3.3.2.cmml" xref="S2.SS1.p1.2.m2.4.4.3.3.3.2">ğ‘¥</ci><ci id="S2.SS1.p1.2.m2.4.4.3.3.3.3.cmml" xref="S2.SS1.p1.2.m2.4.4.3.3.3.3">ğ¿</ci></apply></vector><ci id="S2.SS1.p1.2.m2.4.4.5.cmml" xref="S2.SS1.p1.2.m2.4.4.5">ğ’³</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.2.m2.4c">(x_{1},x_{2},\ldots,x_{L})\in\mathcal{X}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.2.m2.4d">( italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_x start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , â€¦ , italic_x start_POSTSUBSCRIPT italic_L end_POSTSUBSCRIPT ) âˆˆ caligraphic_X</annotation></semantics></math> encoding the text to be translated coupled with a translation instruction <cite class="ltx_cite ltx_citemacro_citep">(Raffel etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib58" title="">2020</a>; Hendy etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib30" title="">2023</a>)</cite>.
Let <math alttext="\mathcal{V}" class="ltx_Math" display="inline" id="S2.SS1.p1.3.m3.1"><semantics id="S2.SS1.p1.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.3.m3.1.1" xref="S2.SS1.p1.3.m3.1.1.cmml">ğ’±</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.3.m3.1b"><ci id="S2.SS1.p1.3.m3.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1">ğ’±</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.3.m3.1c">\mathcal{V}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.3.m3.1d">caligraphic_V</annotation></semantics></math> be a fixed vocabulary and <math alttext="\mathcal{Y}=\mathcal{V}^{*}" class="ltx_Math" display="inline" id="S2.SS1.p1.4.m4.1"><semantics id="S2.SS1.p1.4.m4.1a"><mrow id="S2.SS1.p1.4.m4.1.1" xref="S2.SS1.p1.4.m4.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.4.m4.1.1.2" xref="S2.SS1.p1.4.m4.1.1.2.cmml">ğ’´</mi><mo id="S2.SS1.p1.4.m4.1.1.1" xref="S2.SS1.p1.4.m4.1.1.1.cmml">=</mo><msup id="S2.SS1.p1.4.m4.1.1.3" xref="S2.SS1.p1.4.m4.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.4.m4.1.1.3.2" xref="S2.SS1.p1.4.m4.1.1.3.2.cmml">ğ’±</mi><mo id="S2.SS1.p1.4.m4.1.1.3.3" xref="S2.SS1.p1.4.m4.1.1.3.3.cmml">âˆ—</mo></msup></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.4.m4.1b"><apply id="S2.SS1.p1.4.m4.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1"><eq id="S2.SS1.p1.4.m4.1.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1.1"></eq><ci id="S2.SS1.p1.4.m4.1.1.2.cmml" xref="S2.SS1.p1.4.m4.1.1.2">ğ’´</ci><apply id="S2.SS1.p1.4.m4.1.1.3.cmml" xref="S2.SS1.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="S2.SS1.p1.4.m4.1.1.3.1.cmml" xref="S2.SS1.p1.4.m4.1.1.3">superscript</csymbol><ci id="S2.SS1.p1.4.m4.1.1.3.2.cmml" xref="S2.SS1.p1.4.m4.1.1.3.2">ğ’±</ci><times id="S2.SS1.p1.4.m4.1.1.3.3.cmml" xref="S2.SS1.p1.4.m4.1.1.3.3"></times></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.4.m4.1c">\mathcal{Y}=\mathcal{V}^{*}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.4.m4.1d">caligraphic_Y = caligraphic_V start_POSTSUPERSCRIPT âˆ— end_POSTSUPERSCRIPT</annotation></semantics></math> its Kleene closure.
The joint distribution over the output translations, <math alttext="y\in\mathcal{Y}" class="ltx_Math" display="inline" id="S2.SS1.p1.5.m5.1"><semantics id="S2.SS1.p1.5.m5.1a"><mrow id="S2.SS1.p1.5.m5.1.1" xref="S2.SS1.p1.5.m5.1.1.cmml"><mi id="S2.SS1.p1.5.m5.1.1.2" xref="S2.SS1.p1.5.m5.1.1.2.cmml">y</mi><mo id="S2.SS1.p1.5.m5.1.1.1" xref="S2.SS1.p1.5.m5.1.1.1.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.5.m5.1.1.3" xref="S2.SS1.p1.5.m5.1.1.3.cmml">ğ’´</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.5.m5.1b"><apply id="S2.SS1.p1.5.m5.1.1.cmml" xref="S2.SS1.p1.5.m5.1.1"><in id="S2.SS1.p1.5.m5.1.1.1.cmml" xref="S2.SS1.p1.5.m5.1.1.1"></in><ci id="S2.SS1.p1.5.m5.1.1.2.cmml" xref="S2.SS1.p1.5.m5.1.1.2">ğ‘¦</ci><ci id="S2.SS1.p1.5.m5.1.1.3.cmml" xref="S2.SS1.p1.5.m5.1.1.3">ğ’´</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.5.m5.1c">y\in\mathcal{Y}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.5.m5.1d">italic_y âˆˆ caligraphic_Y</annotation></semantics></math>, given the prompt <math alttext="x" class="ltx_Math" display="inline" id="S2.SS1.p1.6.m6.1"><semantics id="S2.SS1.p1.6.m6.1a"><mi id="S2.SS1.p1.6.m6.1.1" xref="S2.SS1.p1.6.m6.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.6.m6.1b"><ci id="S2.SS1.p1.6.m6.1.1.cmml" xref="S2.SS1.p1.6.m6.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.6.m6.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.6.m6.1d">italic_x</annotation></semantics></math>, can be factorized as the product of conditional probabilities over individual tokens <math alttext="(y_{1},y_{2},\ldots,y_{N})" class="ltx_Math" display="inline" id="S2.SS1.p1.7.m7.4"><semantics id="S2.SS1.p1.7.m7.4a"><mrow id="S2.SS1.p1.7.m7.4.4.3" xref="S2.SS1.p1.7.m7.4.4.4.cmml"><mo id="S2.SS1.p1.7.m7.4.4.3.4" stretchy="false" xref="S2.SS1.p1.7.m7.4.4.4.cmml">(</mo><msub id="S2.SS1.p1.7.m7.2.2.1.1" xref="S2.SS1.p1.7.m7.2.2.1.1.cmml"><mi id="S2.SS1.p1.7.m7.2.2.1.1.2" xref="S2.SS1.p1.7.m7.2.2.1.1.2.cmml">y</mi><mn id="S2.SS1.p1.7.m7.2.2.1.1.3" xref="S2.SS1.p1.7.m7.2.2.1.1.3.cmml">1</mn></msub><mo id="S2.SS1.p1.7.m7.4.4.3.5" xref="S2.SS1.p1.7.m7.4.4.4.cmml">,</mo><msub id="S2.SS1.p1.7.m7.3.3.2.2" xref="S2.SS1.p1.7.m7.3.3.2.2.cmml"><mi id="S2.SS1.p1.7.m7.3.3.2.2.2" xref="S2.SS1.p1.7.m7.3.3.2.2.2.cmml">y</mi><mn id="S2.SS1.p1.7.m7.3.3.2.2.3" xref="S2.SS1.p1.7.m7.3.3.2.2.3.cmml">2</mn></msub><mo id="S2.SS1.p1.7.m7.4.4.3.6" xref="S2.SS1.p1.7.m7.4.4.4.cmml">,</mo><mi id="S2.SS1.p1.7.m7.1.1" mathvariant="normal" xref="S2.SS1.p1.7.m7.1.1.cmml">â€¦</mi><mo id="S2.SS1.p1.7.m7.4.4.3.7" xref="S2.SS1.p1.7.m7.4.4.4.cmml">,</mo><msub id="S2.SS1.p1.7.m7.4.4.3.3" xref="S2.SS1.p1.7.m7.4.4.3.3.cmml"><mi id="S2.SS1.p1.7.m7.4.4.3.3.2" xref="S2.SS1.p1.7.m7.4.4.3.3.2.cmml">y</mi><mi id="S2.SS1.p1.7.m7.4.4.3.3.3" xref="S2.SS1.p1.7.m7.4.4.3.3.3.cmml">N</mi></msub><mo id="S2.SS1.p1.7.m7.4.4.3.8" stretchy="false" xref="S2.SS1.p1.7.m7.4.4.4.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.7.m7.4b"><vector id="S2.SS1.p1.7.m7.4.4.4.cmml" xref="S2.SS1.p1.7.m7.4.4.3"><apply id="S2.SS1.p1.7.m7.2.2.1.1.cmml" xref="S2.SS1.p1.7.m7.2.2.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.7.m7.2.2.1.1.1.cmml" xref="S2.SS1.p1.7.m7.2.2.1.1">subscript</csymbol><ci id="S2.SS1.p1.7.m7.2.2.1.1.2.cmml" xref="S2.SS1.p1.7.m7.2.2.1.1.2">ğ‘¦</ci><cn id="S2.SS1.p1.7.m7.2.2.1.1.3.cmml" type="integer" xref="S2.SS1.p1.7.m7.2.2.1.1.3">1</cn></apply><apply id="S2.SS1.p1.7.m7.3.3.2.2.cmml" xref="S2.SS1.p1.7.m7.3.3.2.2"><csymbol cd="ambiguous" id="S2.SS1.p1.7.m7.3.3.2.2.1.cmml" xref="S2.SS1.p1.7.m7.3.3.2.2">subscript</csymbol><ci id="S2.SS1.p1.7.m7.3.3.2.2.2.cmml" xref="S2.SS1.p1.7.m7.3.3.2.2.2">ğ‘¦</ci><cn id="S2.SS1.p1.7.m7.3.3.2.2.3.cmml" type="integer" xref="S2.SS1.p1.7.m7.3.3.2.2.3">2</cn></apply><ci id="S2.SS1.p1.7.m7.1.1.cmml" xref="S2.SS1.p1.7.m7.1.1">â€¦</ci><apply id="S2.SS1.p1.7.m7.4.4.3.3.cmml" xref="S2.SS1.p1.7.m7.4.4.3.3"><csymbol cd="ambiguous" id="S2.SS1.p1.7.m7.4.4.3.3.1.cmml" xref="S2.SS1.p1.7.m7.4.4.3.3">subscript</csymbol><ci id="S2.SS1.p1.7.m7.4.4.3.3.2.cmml" xref="S2.SS1.p1.7.m7.4.4.3.3.2">ğ‘¦</ci><ci id="S2.SS1.p1.7.m7.4.4.3.3.3.cmml" xref="S2.SS1.p1.7.m7.4.4.3.3.3">ğ‘</ci></apply></vector></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.7.m7.4c">(y_{1},y_{2},\ldots,y_{N})</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.7.m7.4d">( italic_y start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_y start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , â€¦ , italic_y start_POSTSUBSCRIPT italic_N end_POSTSUBSCRIPT )</annotation></semantics></math>, where each <math alttext="y_{i}\in\mathcal{V}" class="ltx_Math" display="inline" id="S2.SS1.p1.8.m8.1"><semantics id="S2.SS1.p1.8.m8.1a"><mrow id="S2.SS1.p1.8.m8.1.1" xref="S2.SS1.p1.8.m8.1.1.cmml"><msub id="S2.SS1.p1.8.m8.1.1.2" xref="S2.SS1.p1.8.m8.1.1.2.cmml"><mi id="S2.SS1.p1.8.m8.1.1.2.2" xref="S2.SS1.p1.8.m8.1.1.2.2.cmml">y</mi><mi id="S2.SS1.p1.8.m8.1.1.2.3" xref="S2.SS1.p1.8.m8.1.1.2.3.cmml">i</mi></msub><mo id="S2.SS1.p1.8.m8.1.1.1" xref="S2.SS1.p1.8.m8.1.1.1.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S2.SS1.p1.8.m8.1.1.3" xref="S2.SS1.p1.8.m8.1.1.3.cmml">ğ’±</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.8.m8.1b"><apply id="S2.SS1.p1.8.m8.1.1.cmml" xref="S2.SS1.p1.8.m8.1.1"><in id="S2.SS1.p1.8.m8.1.1.1.cmml" xref="S2.SS1.p1.8.m8.1.1.1"></in><apply id="S2.SS1.p1.8.m8.1.1.2.cmml" xref="S2.SS1.p1.8.m8.1.1.2"><csymbol cd="ambiguous" id="S2.SS1.p1.8.m8.1.1.2.1.cmml" xref="S2.SS1.p1.8.m8.1.1.2">subscript</csymbol><ci id="S2.SS1.p1.8.m8.1.1.2.2.cmml" xref="S2.SS1.p1.8.m8.1.1.2.2">ğ‘¦</ci><ci id="S2.SS1.p1.8.m8.1.1.2.3.cmml" xref="S2.SS1.p1.8.m8.1.1.2.3">ğ‘–</ci></apply><ci id="S2.SS1.p1.8.m8.1.1.3.cmml" xref="S2.SS1.p1.8.m8.1.1.3">ğ’±</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.8.m8.1c">y_{i}\in\mathcal{V}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.8.m8.1d">italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT âˆˆ caligraphic_V</annotation></semantics></math>. The probability of a particular translation <math alttext="y" class="ltx_Math" display="inline" id="S2.SS1.p1.9.m9.1"><semantics id="S2.SS1.p1.9.m9.1a"><mi id="S2.SS1.p1.9.m9.1.1" xref="S2.SS1.p1.9.m9.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.9.m9.1b"><ci id="S2.SS1.p1.9.m9.1.1.cmml" xref="S2.SS1.p1.9.m9.1.1">ğ‘¦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.9.m9.1c">y</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.9.m9.1d">italic_y</annotation></semantics></math> for a given input <math alttext="x" class="ltx_Math" display="inline" id="S2.SS1.p1.10.m10.1"><semantics id="S2.SS1.p1.10.m10.1a"><mi id="S2.SS1.p1.10.m10.1.1" xref="S2.SS1.p1.10.m10.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.10.m10.1b"><ci id="S2.SS1.p1.10.m10.1.1.cmml" xref="S2.SS1.p1.10.m10.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.10.m10.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.10.m10.1d">italic_x</annotation></semantics></math> can be written as</p>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A4.EGx1">
<tbody id="S2.E1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle p_{\text{LM}}(y|x)=\prod_{i=1}^{N}p_{\text{LM}}(y_{i}|y_{&lt;i},x)." class="ltx_Math" display="inline" id="S2.E1.m1.2"><semantics id="S2.E1.m1.2a"><mrow id="S2.E1.m1.2.2.1" xref="S2.E1.m1.2.2.1.1.cmml"><mrow id="S2.E1.m1.2.2.1.1" xref="S2.E1.m1.2.2.1.1.cmml"><mrow id="S2.E1.m1.2.2.1.1.1" xref="S2.E1.m1.2.2.1.1.1.cmml"><msub id="S2.E1.m1.2.2.1.1.1.3" xref="S2.E1.m1.2.2.1.1.1.3.cmml"><mi id="S2.E1.m1.2.2.1.1.1.3.2" xref="S2.E1.m1.2.2.1.1.1.3.2.cmml">p</mi><mtext id="S2.E1.m1.2.2.1.1.1.3.3" xref="S2.E1.m1.2.2.1.1.1.3.3a.cmml">LM</mtext></msub><mo id="S2.E1.m1.2.2.1.1.1.2" xref="S2.E1.m1.2.2.1.1.1.2.cmml">â¢</mo><mrow id="S2.E1.m1.2.2.1.1.1.1.1" xref="S2.E1.m1.2.2.1.1.1.1.1.1.cmml"><mo id="S2.E1.m1.2.2.1.1.1.1.1.2" stretchy="false" xref="S2.E1.m1.2.2.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E1.m1.2.2.1.1.1.1.1.1" xref="S2.E1.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S2.E1.m1.2.2.1.1.1.1.1.1.2" xref="S2.E1.m1.2.2.1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S2.E1.m1.2.2.1.1.1.1.1.1.1" xref="S2.E1.m1.2.2.1.1.1.1.1.1.1.cmml">|</mo><mi id="S2.E1.m1.2.2.1.1.1.1.1.1.3" xref="S2.E1.m1.2.2.1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S2.E1.m1.2.2.1.1.1.1.1.3" stretchy="false" xref="S2.E1.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E1.m1.2.2.1.1.3" xref="S2.E1.m1.2.2.1.1.3.cmml">=</mo><mrow id="S2.E1.m1.2.2.1.1.2" xref="S2.E1.m1.2.2.1.1.2.cmml"><mstyle displaystyle="true" id="S2.E1.m1.2.2.1.1.2.2" xref="S2.E1.m1.2.2.1.1.2.2.cmml"><munderover id="S2.E1.m1.2.2.1.1.2.2a" xref="S2.E1.m1.2.2.1.1.2.2.cmml"><mo id="S2.E1.m1.2.2.1.1.2.2.2.2" movablelimits="false" xref="S2.E1.m1.2.2.1.1.2.2.2.2.cmml">âˆ</mo><mrow id="S2.E1.m1.2.2.1.1.2.2.2.3" xref="S2.E1.m1.2.2.1.1.2.2.2.3.cmml"><mi id="S2.E1.m1.2.2.1.1.2.2.2.3.2" xref="S2.E1.m1.2.2.1.1.2.2.2.3.2.cmml">i</mi><mo id="S2.E1.m1.2.2.1.1.2.2.2.3.1" xref="S2.E1.m1.2.2.1.1.2.2.2.3.1.cmml">=</mo><mn id="S2.E1.m1.2.2.1.1.2.2.2.3.3" xref="S2.E1.m1.2.2.1.1.2.2.2.3.3.cmml">1</mn></mrow><mi id="S2.E1.m1.2.2.1.1.2.2.3" xref="S2.E1.m1.2.2.1.1.2.2.3.cmml">N</mi></munderover></mstyle><mrow id="S2.E1.m1.2.2.1.1.2.1" xref="S2.E1.m1.2.2.1.1.2.1.cmml"><msub id="S2.E1.m1.2.2.1.1.2.1.3" xref="S2.E1.m1.2.2.1.1.2.1.3.cmml"><mi id="S2.E1.m1.2.2.1.1.2.1.3.2" xref="S2.E1.m1.2.2.1.1.2.1.3.2.cmml">p</mi><mtext id="S2.E1.m1.2.2.1.1.2.1.3.3" xref="S2.E1.m1.2.2.1.1.2.1.3.3a.cmml">LM</mtext></msub><mo id="S2.E1.m1.2.2.1.1.2.1.2" xref="S2.E1.m1.2.2.1.1.2.1.2.cmml">â¢</mo><mrow id="S2.E1.m1.2.2.1.1.2.1.1.1" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.cmml"><mo id="S2.E1.m1.2.2.1.1.2.1.1.1.2" stretchy="false" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.cmml">(</mo><mrow id="S2.E1.m1.2.2.1.1.2.1.1.1.1" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.cmml"><msub id="S2.E1.m1.2.2.1.1.2.1.1.1.1.3" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.cmml"><mi id="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.2" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.2.cmml">y</mi><mi id="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.3" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.3.cmml">i</mi></msub><mo fence="false" id="S2.E1.m1.2.2.1.1.2.1.1.1.1.2" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.2.cmml">|</mo><mrow id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.2.cmml"><msub id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.cmml"><mi id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.2" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.cmml"><mi id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.2" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.1" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.3" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.3.cmml">i</mi></mrow></msub><mo id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.2" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.2.cmml">,</mo><mi id="S2.E1.m1.1.1" xref="S2.E1.m1.1.1.cmml">x</mi></mrow></mrow><mo id="S2.E1.m1.2.2.1.1.2.1.1.1.3" stretchy="false" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S2.E1.m1.2.2.1.2" lspace="0em" xref="S2.E1.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E1.m1.2b"><apply id="S2.E1.m1.2.2.1.1.cmml" xref="S2.E1.m1.2.2.1"><eq id="S2.E1.m1.2.2.1.1.3.cmml" xref="S2.E1.m1.2.2.1.1.3"></eq><apply id="S2.E1.m1.2.2.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.1"><times id="S2.E1.m1.2.2.1.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.1.2"></times><apply id="S2.E1.m1.2.2.1.1.1.3.cmml" xref="S2.E1.m1.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.1.3.1.cmml" xref="S2.E1.m1.2.2.1.1.1.3">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.1.3.2.cmml" xref="S2.E1.m1.2.2.1.1.1.3.2">ğ‘</ci><ci id="S2.E1.m1.2.2.1.1.1.3.3a.cmml" xref="S2.E1.m1.2.2.1.1.1.3.3"><mtext id="S2.E1.m1.2.2.1.1.1.3.3.cmml" mathsize="70%" xref="S2.E1.m1.2.2.1.1.1.3.3">LM</mtext></ci></apply><apply id="S2.E1.m1.2.2.1.1.1.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.1.1.1"><csymbol cd="latexml" id="S2.E1.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.1.1.1.1.1">conditional</csymbol><ci id="S2.E1.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S2.E1.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.2.2.1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="S2.E1.m1.2.2.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2"><apply id="S2.E1.m1.2.2.1.1.2.2.cmml" xref="S2.E1.m1.2.2.1.1.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.2.1.cmml" xref="S2.E1.m1.2.2.1.1.2.2">superscript</csymbol><apply id="S2.E1.m1.2.2.1.1.2.2.2.cmml" xref="S2.E1.m1.2.2.1.1.2.2"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.2.2.1.cmml" xref="S2.E1.m1.2.2.1.1.2.2">subscript</csymbol><csymbol cd="latexml" id="S2.E1.m1.2.2.1.1.2.2.2.2.cmml" xref="S2.E1.m1.2.2.1.1.2.2.2.2">product</csymbol><apply id="S2.E1.m1.2.2.1.1.2.2.2.3.cmml" xref="S2.E1.m1.2.2.1.1.2.2.2.3"><eq id="S2.E1.m1.2.2.1.1.2.2.2.3.1.cmml" xref="S2.E1.m1.2.2.1.1.2.2.2.3.1"></eq><ci id="S2.E1.m1.2.2.1.1.2.2.2.3.2.cmml" xref="S2.E1.m1.2.2.1.1.2.2.2.3.2">ğ‘–</ci><cn id="S2.E1.m1.2.2.1.1.2.2.2.3.3.cmml" type="integer" xref="S2.E1.m1.2.2.1.1.2.2.2.3.3">1</cn></apply></apply><ci id="S2.E1.m1.2.2.1.1.2.2.3.cmml" xref="S2.E1.m1.2.2.1.1.2.2.3">ğ‘</ci></apply><apply id="S2.E1.m1.2.2.1.1.2.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1"><times id="S2.E1.m1.2.2.1.1.2.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.2"></times><apply id="S2.E1.m1.2.2.1.1.2.1.3.cmml" xref="S2.E1.m1.2.2.1.1.2.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.1.3.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1.3">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.2.1.3.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.3.2">ğ‘</ci><ci id="S2.E1.m1.2.2.1.1.2.1.3.3a.cmml" xref="S2.E1.m1.2.2.1.1.2.1.3.3"><mtext id="S2.E1.m1.2.2.1.1.2.1.3.3.cmml" mathsize="70%" xref="S2.E1.m1.2.2.1.1.2.1.3.3">LM</mtext></ci></apply><apply id="S2.E1.m1.2.2.1.1.2.1.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1"><csymbol cd="latexml" id="S2.E1.m1.2.2.1.1.2.1.1.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.2">conditional</csymbol><apply id="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.3">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.2">ğ‘¦</ci><ci id="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.3.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.3.3">ğ‘–</ci></apply><list id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1"><apply id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3"><lt id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.3.cmml" xref="S2.E1.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="S2.E1.m1.1.1.cmml" xref="S2.E1.m1.1.1">ğ‘¥</ci></list></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E1.m1.2c">\displaystyle p_{\text{LM}}(y|x)=\prod_{i=1}^{N}p_{\text{LM}}(y_{i}|y_{&lt;i},x).</annotation><annotation encoding="application/x-llamapun" id="S2.E1.m1.2d">italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y | italic_x ) = âˆ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S2.SS1.p1.16">Here, <math alttext="y_{&lt;i}:=(y_{1},y_{2},\ldots,y_{i-1})" class="ltx_Math" display="inline" id="S2.SS1.p1.11.m1.4"><semantics id="S2.SS1.p1.11.m1.4a"><mrow id="S2.SS1.p1.11.m1.4.4" xref="S2.SS1.p1.11.m1.4.4.cmml"><msub id="S2.SS1.p1.11.m1.4.4.5" xref="S2.SS1.p1.11.m1.4.4.5.cmml"><mi id="S2.SS1.p1.11.m1.4.4.5.2" xref="S2.SS1.p1.11.m1.4.4.5.2.cmml">y</mi><mrow id="S2.SS1.p1.11.m1.4.4.5.3" xref="S2.SS1.p1.11.m1.4.4.5.3.cmml"><mi id="S2.SS1.p1.11.m1.4.4.5.3.2" xref="S2.SS1.p1.11.m1.4.4.5.3.2.cmml"></mi><mo id="S2.SS1.p1.11.m1.4.4.5.3.1" xref="S2.SS1.p1.11.m1.4.4.5.3.1.cmml">&lt;</mo><mi id="S2.SS1.p1.11.m1.4.4.5.3.3" xref="S2.SS1.p1.11.m1.4.4.5.3.3.cmml">i</mi></mrow></msub><mo id="S2.SS1.p1.11.m1.4.4.4" lspace="0.278em" rspace="0.278em" xref="S2.SS1.p1.11.m1.4.4.4.cmml">:=</mo><mrow id="S2.SS1.p1.11.m1.4.4.3.3" xref="S2.SS1.p1.11.m1.4.4.3.4.cmml"><mo id="S2.SS1.p1.11.m1.4.4.3.3.4" stretchy="false" xref="S2.SS1.p1.11.m1.4.4.3.4.cmml">(</mo><msub id="S2.SS1.p1.11.m1.2.2.1.1.1" xref="S2.SS1.p1.11.m1.2.2.1.1.1.cmml"><mi id="S2.SS1.p1.11.m1.2.2.1.1.1.2" xref="S2.SS1.p1.11.m1.2.2.1.1.1.2.cmml">y</mi><mn id="S2.SS1.p1.11.m1.2.2.1.1.1.3" xref="S2.SS1.p1.11.m1.2.2.1.1.1.3.cmml">1</mn></msub><mo id="S2.SS1.p1.11.m1.4.4.3.3.5" xref="S2.SS1.p1.11.m1.4.4.3.4.cmml">,</mo><msub id="S2.SS1.p1.11.m1.3.3.2.2.2" xref="S2.SS1.p1.11.m1.3.3.2.2.2.cmml"><mi id="S2.SS1.p1.11.m1.3.3.2.2.2.2" xref="S2.SS1.p1.11.m1.3.3.2.2.2.2.cmml">y</mi><mn id="S2.SS1.p1.11.m1.3.3.2.2.2.3" xref="S2.SS1.p1.11.m1.3.3.2.2.2.3.cmml">2</mn></msub><mo id="S2.SS1.p1.11.m1.4.4.3.3.6" xref="S2.SS1.p1.11.m1.4.4.3.4.cmml">,</mo><mi id="S2.SS1.p1.11.m1.1.1" mathvariant="normal" xref="S2.SS1.p1.11.m1.1.1.cmml">â€¦</mi><mo id="S2.SS1.p1.11.m1.4.4.3.3.7" xref="S2.SS1.p1.11.m1.4.4.3.4.cmml">,</mo><msub id="S2.SS1.p1.11.m1.4.4.3.3.3" xref="S2.SS1.p1.11.m1.4.4.3.3.3.cmml"><mi id="S2.SS1.p1.11.m1.4.4.3.3.3.2" xref="S2.SS1.p1.11.m1.4.4.3.3.3.2.cmml">y</mi><mrow id="S2.SS1.p1.11.m1.4.4.3.3.3.3" xref="S2.SS1.p1.11.m1.4.4.3.3.3.3.cmml"><mi id="S2.SS1.p1.11.m1.4.4.3.3.3.3.2" xref="S2.SS1.p1.11.m1.4.4.3.3.3.3.2.cmml">i</mi><mo id="S2.SS1.p1.11.m1.4.4.3.3.3.3.1" xref="S2.SS1.p1.11.m1.4.4.3.3.3.3.1.cmml">âˆ’</mo><mn id="S2.SS1.p1.11.m1.4.4.3.3.3.3.3" xref="S2.SS1.p1.11.m1.4.4.3.3.3.3.3.cmml">1</mn></mrow></msub><mo id="S2.SS1.p1.11.m1.4.4.3.3.8" stretchy="false" xref="S2.SS1.p1.11.m1.4.4.3.4.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.11.m1.4b"><apply id="S2.SS1.p1.11.m1.4.4.cmml" xref="S2.SS1.p1.11.m1.4.4"><csymbol cd="latexml" id="S2.SS1.p1.11.m1.4.4.4.cmml" xref="S2.SS1.p1.11.m1.4.4.4">assign</csymbol><apply id="S2.SS1.p1.11.m1.4.4.5.cmml" xref="S2.SS1.p1.11.m1.4.4.5"><csymbol cd="ambiguous" id="S2.SS1.p1.11.m1.4.4.5.1.cmml" xref="S2.SS1.p1.11.m1.4.4.5">subscript</csymbol><ci id="S2.SS1.p1.11.m1.4.4.5.2.cmml" xref="S2.SS1.p1.11.m1.4.4.5.2">ğ‘¦</ci><apply id="S2.SS1.p1.11.m1.4.4.5.3.cmml" xref="S2.SS1.p1.11.m1.4.4.5.3"><lt id="S2.SS1.p1.11.m1.4.4.5.3.1.cmml" xref="S2.SS1.p1.11.m1.4.4.5.3.1"></lt><csymbol cd="latexml" id="S2.SS1.p1.11.m1.4.4.5.3.2.cmml" xref="S2.SS1.p1.11.m1.4.4.5.3.2">absent</csymbol><ci id="S2.SS1.p1.11.m1.4.4.5.3.3.cmml" xref="S2.SS1.p1.11.m1.4.4.5.3.3">ğ‘–</ci></apply></apply><vector id="S2.SS1.p1.11.m1.4.4.3.4.cmml" xref="S2.SS1.p1.11.m1.4.4.3.3"><apply id="S2.SS1.p1.11.m1.2.2.1.1.1.cmml" xref="S2.SS1.p1.11.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.11.m1.2.2.1.1.1.1.cmml" xref="S2.SS1.p1.11.m1.2.2.1.1.1">subscript</csymbol><ci id="S2.SS1.p1.11.m1.2.2.1.1.1.2.cmml" xref="S2.SS1.p1.11.m1.2.2.1.1.1.2">ğ‘¦</ci><cn id="S2.SS1.p1.11.m1.2.2.1.1.1.3.cmml" type="integer" xref="S2.SS1.p1.11.m1.2.2.1.1.1.3">1</cn></apply><apply id="S2.SS1.p1.11.m1.3.3.2.2.2.cmml" xref="S2.SS1.p1.11.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="S2.SS1.p1.11.m1.3.3.2.2.2.1.cmml" xref="S2.SS1.p1.11.m1.3.3.2.2.2">subscript</csymbol><ci id="S2.SS1.p1.11.m1.3.3.2.2.2.2.cmml" xref="S2.SS1.p1.11.m1.3.3.2.2.2.2">ğ‘¦</ci><cn id="S2.SS1.p1.11.m1.3.3.2.2.2.3.cmml" type="integer" xref="S2.SS1.p1.11.m1.3.3.2.2.2.3">2</cn></apply><ci id="S2.SS1.p1.11.m1.1.1.cmml" xref="S2.SS1.p1.11.m1.1.1">â€¦</ci><apply id="S2.SS1.p1.11.m1.4.4.3.3.3.cmml" xref="S2.SS1.p1.11.m1.4.4.3.3.3"><csymbol cd="ambiguous" id="S2.SS1.p1.11.m1.4.4.3.3.3.1.cmml" xref="S2.SS1.p1.11.m1.4.4.3.3.3">subscript</csymbol><ci id="S2.SS1.p1.11.m1.4.4.3.3.3.2.cmml" xref="S2.SS1.p1.11.m1.4.4.3.3.3.2">ğ‘¦</ci><apply id="S2.SS1.p1.11.m1.4.4.3.3.3.3.cmml" xref="S2.SS1.p1.11.m1.4.4.3.3.3.3"><minus id="S2.SS1.p1.11.m1.4.4.3.3.3.3.1.cmml" xref="S2.SS1.p1.11.m1.4.4.3.3.3.3.1"></minus><ci id="S2.SS1.p1.11.m1.4.4.3.3.3.3.2.cmml" xref="S2.SS1.p1.11.m1.4.4.3.3.3.3.2">ğ‘–</ci><cn id="S2.SS1.p1.11.m1.4.4.3.3.3.3.3.cmml" type="integer" xref="S2.SS1.p1.11.m1.4.4.3.3.3.3.3">1</cn></apply></apply></vector></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.11.m1.4c">y_{&lt;i}:=(y_{1},y_{2},\ldots,y_{i-1})</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.11.m1.4d">italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT := ( italic_y start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , italic_y start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT , â€¦ , italic_y start_POSTSUBSCRIPT italic_i - 1 end_POSTSUBSCRIPT )</annotation></semantics></math>. During inference, a translation is generated by sampling one token at a time from the distribution <math alttext="p_{\text{LM}}(y_{i}|y_{&lt;i},x)" class="ltx_Math" display="inline" id="S2.SS1.p1.12.m2.2"><semantics id="S2.SS1.p1.12.m2.2a"><mrow id="S2.SS1.p1.12.m2.2.2" xref="S2.SS1.p1.12.m2.2.2.cmml"><msub id="S2.SS1.p1.12.m2.2.2.3" xref="S2.SS1.p1.12.m2.2.2.3.cmml"><mi id="S2.SS1.p1.12.m2.2.2.3.2" xref="S2.SS1.p1.12.m2.2.2.3.2.cmml">p</mi><mtext id="S2.SS1.p1.12.m2.2.2.3.3" xref="S2.SS1.p1.12.m2.2.2.3.3a.cmml">LM</mtext></msub><mo id="S2.SS1.p1.12.m2.2.2.2" xref="S2.SS1.p1.12.m2.2.2.2.cmml">â¢</mo><mrow id="S2.SS1.p1.12.m2.2.2.1.1" xref="S2.SS1.p1.12.m2.2.2.1.1.1.cmml"><mo id="S2.SS1.p1.12.m2.2.2.1.1.2" stretchy="false" xref="S2.SS1.p1.12.m2.2.2.1.1.1.cmml">(</mo><mrow id="S2.SS1.p1.12.m2.2.2.1.1.1" xref="S2.SS1.p1.12.m2.2.2.1.1.1.cmml"><msub id="S2.SS1.p1.12.m2.2.2.1.1.1.3" xref="S2.SS1.p1.12.m2.2.2.1.1.1.3.cmml"><mi id="S2.SS1.p1.12.m2.2.2.1.1.1.3.2" xref="S2.SS1.p1.12.m2.2.2.1.1.1.3.2.cmml">y</mi><mi id="S2.SS1.p1.12.m2.2.2.1.1.1.3.3" xref="S2.SS1.p1.12.m2.2.2.1.1.1.3.3.cmml">i</mi></msub><mo fence="false" id="S2.SS1.p1.12.m2.2.2.1.1.1.2" xref="S2.SS1.p1.12.m2.2.2.1.1.1.2.cmml">|</mo><mrow id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.2.cmml"><msub id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.cmml"><mi id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.2" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.cmml"><mi id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.2" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.1" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.3" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.3.cmml">i</mi></mrow></msub><mo id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.2" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.2.cmml">,</mo><mi id="S2.SS1.p1.12.m2.1.1" xref="S2.SS1.p1.12.m2.1.1.cmml">x</mi></mrow></mrow><mo id="S2.SS1.p1.12.m2.2.2.1.1.3" stretchy="false" xref="S2.SS1.p1.12.m2.2.2.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.12.m2.2b"><apply id="S2.SS1.p1.12.m2.2.2.cmml" xref="S2.SS1.p1.12.m2.2.2"><times id="S2.SS1.p1.12.m2.2.2.2.cmml" xref="S2.SS1.p1.12.m2.2.2.2"></times><apply id="S2.SS1.p1.12.m2.2.2.3.cmml" xref="S2.SS1.p1.12.m2.2.2.3"><csymbol cd="ambiguous" id="S2.SS1.p1.12.m2.2.2.3.1.cmml" xref="S2.SS1.p1.12.m2.2.2.3">subscript</csymbol><ci id="S2.SS1.p1.12.m2.2.2.3.2.cmml" xref="S2.SS1.p1.12.m2.2.2.3.2">ğ‘</ci><ci id="S2.SS1.p1.12.m2.2.2.3.3a.cmml" xref="S2.SS1.p1.12.m2.2.2.3.3"><mtext id="S2.SS1.p1.12.m2.2.2.3.3.cmml" mathsize="70%" xref="S2.SS1.p1.12.m2.2.2.3.3">LM</mtext></ci></apply><apply id="S2.SS1.p1.12.m2.2.2.1.1.1.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1"><csymbol cd="latexml" id="S2.SS1.p1.12.m2.2.2.1.1.1.2.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.2">conditional</csymbol><apply id="S2.SS1.p1.12.m2.2.2.1.1.1.3.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S2.SS1.p1.12.m2.2.2.1.1.1.3.1.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.3">subscript</csymbol><ci id="S2.SS1.p1.12.m2.2.2.1.1.1.3.2.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.3.2">ğ‘¦</ci><ci id="S2.SS1.p1.12.m2.2.2.1.1.1.3.3.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.3.3">ğ‘–</ci></apply><list id="S2.SS1.p1.12.m2.2.2.1.1.1.1.2.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1"><apply id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.1.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.2.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3"><lt id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.1.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.2.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.3.cmml" xref="S2.SS1.p1.12.m2.2.2.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="S2.SS1.p1.12.m2.1.1.cmml" xref="S2.SS1.p1.12.m2.1.1">ğ‘¥</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.12.m2.2c">p_{\text{LM}}(y_{i}|y_{&lt;i},x)</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.12.m2.2d">italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x )</annotation></semantics></math>, adjusted by a temperature, <math alttext="\tau" class="ltx_Math" display="inline" id="S2.SS1.p1.13.m3.1"><semantics id="S2.SS1.p1.13.m3.1a"><mi id="S2.SS1.p1.13.m3.1.1" xref="S2.SS1.p1.13.m3.1.1.cmml">Ï„</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.13.m3.1b"><ci id="S2.SS1.p1.13.m3.1.1.cmml" xref="S2.SS1.p1.13.m3.1.1">ğœ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.13.m3.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.13.m3.1d">italic_Ï„</annotation></semantics></math>. The (adjusted) probability of generating a particular token <math alttext="y_{i}" class="ltx_Math" display="inline" id="S2.SS1.p1.14.m4.1"><semantics id="S2.SS1.p1.14.m4.1a"><msub id="S2.SS1.p1.14.m4.1.1" xref="S2.SS1.p1.14.m4.1.1.cmml"><mi id="S2.SS1.p1.14.m4.1.1.2" xref="S2.SS1.p1.14.m4.1.1.2.cmml">y</mi><mi id="S2.SS1.p1.14.m4.1.1.3" xref="S2.SS1.p1.14.m4.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.14.m4.1b"><apply id="S2.SS1.p1.14.m4.1.1.cmml" xref="S2.SS1.p1.14.m4.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.14.m4.1.1.1.cmml" xref="S2.SS1.p1.14.m4.1.1">subscript</csymbol><ci id="S2.SS1.p1.14.m4.1.1.2.cmml" xref="S2.SS1.p1.14.m4.1.1.2">ğ‘¦</ci><ci id="S2.SS1.p1.14.m4.1.1.3.cmml" xref="S2.SS1.p1.14.m4.1.1.3">ğ‘–</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.14.m4.1c">y_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.14.m4.1d">italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, given the preceding tokens <math alttext="y_{&lt;i}" class="ltx_Math" display="inline" id="S2.SS1.p1.15.m5.1"><semantics id="S2.SS1.p1.15.m5.1a"><msub id="S2.SS1.p1.15.m5.1.1" xref="S2.SS1.p1.15.m5.1.1.cmml"><mi id="S2.SS1.p1.15.m5.1.1.2" xref="S2.SS1.p1.15.m5.1.1.2.cmml">y</mi><mrow id="S2.SS1.p1.15.m5.1.1.3" xref="S2.SS1.p1.15.m5.1.1.3.cmml"><mi id="S2.SS1.p1.15.m5.1.1.3.2" xref="S2.SS1.p1.15.m5.1.1.3.2.cmml"></mi><mo id="S2.SS1.p1.15.m5.1.1.3.1" xref="S2.SS1.p1.15.m5.1.1.3.1.cmml">&lt;</mo><mi id="S2.SS1.p1.15.m5.1.1.3.3" xref="S2.SS1.p1.15.m5.1.1.3.3.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.15.m5.1b"><apply id="S2.SS1.p1.15.m5.1.1.cmml" xref="S2.SS1.p1.15.m5.1.1"><csymbol cd="ambiguous" id="S2.SS1.p1.15.m5.1.1.1.cmml" xref="S2.SS1.p1.15.m5.1.1">subscript</csymbol><ci id="S2.SS1.p1.15.m5.1.1.2.cmml" xref="S2.SS1.p1.15.m5.1.1.2">ğ‘¦</ci><apply id="S2.SS1.p1.15.m5.1.1.3.cmml" xref="S2.SS1.p1.15.m5.1.1.3"><lt id="S2.SS1.p1.15.m5.1.1.3.1.cmml" xref="S2.SS1.p1.15.m5.1.1.3.1"></lt><csymbol cd="latexml" id="S2.SS1.p1.15.m5.1.1.3.2.cmml" xref="S2.SS1.p1.15.m5.1.1.3.2">absent</csymbol><ci id="S2.SS1.p1.15.m5.1.1.3.3.cmml" xref="S2.SS1.p1.15.m5.1.1.3.3">ğ‘–</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.15.m5.1c">y_{&lt;i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.15.m5.1d">italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and the input <math alttext="x" class="ltx_Math" display="inline" id="S2.SS1.p1.16.m6.1"><semantics id="S2.SS1.p1.16.m6.1a"><mi id="S2.SS1.p1.16.m6.1.1" xref="S2.SS1.p1.16.m6.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.16.m6.1b"><ci id="S2.SS1.p1.16.m6.1.1.cmml" xref="S2.SS1.p1.16.m6.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.16.m6.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.16.m6.1d">italic_x</annotation></semantics></math>, is defined as:</p>
<table class="ltx_equation ltx_eqn_table" id="S2.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="p_{\text{LM},\tau}(y_{i}=v|y_{&lt;i},x)=\frac{p_{\text{LM}}(y_{i}=v|y_{&lt;i},x)^{1/%
\tau}}{\sum_{v^{\prime}\in\mathcal{V}}p_{\text{LM}}(y_{i}=v^{\prime}|y_{&lt;i},x)%
^{1/\tau}}." class="ltx_Math" display="block" id="S2.E2.m1.8"><semantics id="S2.E2.m1.8a"><mrow id="S2.E2.m1.8.8.1" xref="S2.E2.m1.8.8.1.1.cmml"><mrow id="S2.E2.m1.8.8.1.1" xref="S2.E2.m1.8.8.1.1.cmml"><mrow id="S2.E2.m1.8.8.1.1.1" xref="S2.E2.m1.8.8.1.1.1.cmml"><msub id="S2.E2.m1.8.8.1.1.1.3" xref="S2.E2.m1.8.8.1.1.1.3.cmml"><mi id="S2.E2.m1.8.8.1.1.1.3.2" xref="S2.E2.m1.8.8.1.1.1.3.2.cmml">p</mi><mrow id="S2.E2.m1.2.2.2.4" xref="S2.E2.m1.2.2.2.3.cmml"><mtext id="S2.E2.m1.1.1.1.1" xref="S2.E2.m1.1.1.1.1a.cmml">LM</mtext><mo id="S2.E2.m1.2.2.2.4.1" xref="S2.E2.m1.2.2.2.3.cmml">,</mo><mi id="S2.E2.m1.2.2.2.2" xref="S2.E2.m1.2.2.2.2.cmml">Ï„</mi></mrow></msub><mo id="S2.E2.m1.8.8.1.1.1.2" xref="S2.E2.m1.8.8.1.1.1.2.cmml">â¢</mo><mrow id="S2.E2.m1.8.8.1.1.1.1.1" xref="S2.E2.m1.8.8.1.1.1.1.1.1.cmml"><mo id="S2.E2.m1.8.8.1.1.1.1.1.2" stretchy="false" xref="S2.E2.m1.8.8.1.1.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.8.8.1.1.1.1.1.1" xref="S2.E2.m1.8.8.1.1.1.1.1.1.cmml"><msub id="S2.E2.m1.8.8.1.1.1.1.1.1.3" xref="S2.E2.m1.8.8.1.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.8.8.1.1.1.1.1.1.3.2" xref="S2.E2.m1.8.8.1.1.1.1.1.1.3.2.cmml">y</mi><mi id="S2.E2.m1.8.8.1.1.1.1.1.1.3.3" xref="S2.E2.m1.8.8.1.1.1.1.1.1.3.3.cmml">i</mi></msub><mo id="S2.E2.m1.8.8.1.1.1.1.1.1.2" xref="S2.E2.m1.8.8.1.1.1.1.1.1.2.cmml">=</mo><mrow id="S2.E2.m1.8.8.1.1.1.1.1.1.1" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.8.8.1.1.1.1.1.1.1.3" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.3.cmml">v</mi><mo fence="false" id="S2.E2.m1.8.8.1.1.1.1.1.1.1.2" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.2.cmml">|</mo><mrow id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.2.cmml"><msub id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.2" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.2" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.1" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.3" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.3.cmml">i</mi></mrow></msub><mo id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.2" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.2.cmml">,</mo><mi id="S2.E2.m1.7.7" xref="S2.E2.m1.7.7.cmml">x</mi></mrow></mrow></mrow><mo id="S2.E2.m1.8.8.1.1.1.1.1.3" stretchy="false" xref="S2.E2.m1.8.8.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S2.E2.m1.8.8.1.1.2" xref="S2.E2.m1.8.8.1.1.2.cmml">=</mo><mfrac id="S2.E2.m1.6.6" xref="S2.E2.m1.6.6.cmml"><mrow id="S2.E2.m1.4.4.2" xref="S2.E2.m1.4.4.2.cmml"><msub id="S2.E2.m1.4.4.2.4" xref="S2.E2.m1.4.4.2.4.cmml"><mi id="S2.E2.m1.4.4.2.4.2" xref="S2.E2.m1.4.4.2.4.2.cmml">p</mi><mtext id="S2.E2.m1.4.4.2.4.3" xref="S2.E2.m1.4.4.2.4.3a.cmml">LM</mtext></msub><mo id="S2.E2.m1.4.4.2.3" xref="S2.E2.m1.4.4.2.3.cmml">â¢</mo><msup id="S2.E2.m1.4.4.2.2" xref="S2.E2.m1.4.4.2.2.cmml"><mrow id="S2.E2.m1.4.4.2.2.1.1" xref="S2.E2.m1.4.4.2.2.1.1.1.cmml"><mo id="S2.E2.m1.4.4.2.2.1.1.2" stretchy="false" xref="S2.E2.m1.4.4.2.2.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.4.4.2.2.1.1.1" xref="S2.E2.m1.4.4.2.2.1.1.1.cmml"><msub id="S2.E2.m1.4.4.2.2.1.1.1.3" xref="S2.E2.m1.4.4.2.2.1.1.1.3.cmml"><mi id="S2.E2.m1.4.4.2.2.1.1.1.3.2" xref="S2.E2.m1.4.4.2.2.1.1.1.3.2.cmml">y</mi><mi id="S2.E2.m1.4.4.2.2.1.1.1.3.3" xref="S2.E2.m1.4.4.2.2.1.1.1.3.3.cmml">i</mi></msub><mo id="S2.E2.m1.4.4.2.2.1.1.1.2" xref="S2.E2.m1.4.4.2.2.1.1.1.2.cmml">=</mo><mrow id="S2.E2.m1.4.4.2.2.1.1.1.1" xref="S2.E2.m1.4.4.2.2.1.1.1.1.cmml"><mi id="S2.E2.m1.4.4.2.2.1.1.1.1.3" xref="S2.E2.m1.4.4.2.2.1.1.1.1.3.cmml">v</mi><mo fence="false" id="S2.E2.m1.4.4.2.2.1.1.1.1.2" xref="S2.E2.m1.4.4.2.2.1.1.1.1.2.cmml">|</mo><mrow id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.2.cmml"><msub id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.2" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.2" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.1" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.3" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.3.cmml">i</mi></mrow></msub><mo id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.2" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.2.cmml">,</mo><mi id="S2.E2.m1.3.3.1.1" xref="S2.E2.m1.3.3.1.1.cmml">x</mi></mrow></mrow></mrow><mo id="S2.E2.m1.4.4.2.2.1.1.3" stretchy="false" xref="S2.E2.m1.4.4.2.2.1.1.1.cmml">)</mo></mrow><mrow id="S2.E2.m1.4.4.2.2.3" xref="S2.E2.m1.4.4.2.2.3.cmml"><mn id="S2.E2.m1.4.4.2.2.3.2" xref="S2.E2.m1.4.4.2.2.3.2.cmml">1</mn><mo id="S2.E2.m1.4.4.2.2.3.1" xref="S2.E2.m1.4.4.2.2.3.1.cmml">/</mo><mi id="S2.E2.m1.4.4.2.2.3.3" xref="S2.E2.m1.4.4.2.2.3.3.cmml">Ï„</mi></mrow></msup></mrow><mrow id="S2.E2.m1.6.6.4" xref="S2.E2.m1.6.6.4.cmml"><msub id="S2.E2.m1.6.6.4.3" xref="S2.E2.m1.6.6.4.3.cmml"><mo id="S2.E2.m1.6.6.4.3.2" xref="S2.E2.m1.6.6.4.3.2.cmml">âˆ‘</mo><mrow id="S2.E2.m1.6.6.4.3.3" xref="S2.E2.m1.6.6.4.3.3.cmml"><msup id="S2.E2.m1.6.6.4.3.3.2" xref="S2.E2.m1.6.6.4.3.3.2.cmml"><mi id="S2.E2.m1.6.6.4.3.3.2.2" xref="S2.E2.m1.6.6.4.3.3.2.2.cmml">v</mi><mo id="S2.E2.m1.6.6.4.3.3.2.3" xref="S2.E2.m1.6.6.4.3.3.2.3.cmml">â€²</mo></msup><mo id="S2.E2.m1.6.6.4.3.3.1" xref="S2.E2.m1.6.6.4.3.3.1.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S2.E2.m1.6.6.4.3.3.3" xref="S2.E2.m1.6.6.4.3.3.3.cmml">ğ’±</mi></mrow></msub><mrow id="S2.E2.m1.6.6.4.2" xref="S2.E2.m1.6.6.4.2.cmml"><msub id="S2.E2.m1.6.6.4.2.3" xref="S2.E2.m1.6.6.4.2.3.cmml"><mi id="S2.E2.m1.6.6.4.2.3.2" xref="S2.E2.m1.6.6.4.2.3.2.cmml">p</mi><mtext id="S2.E2.m1.6.6.4.2.3.3" xref="S2.E2.m1.6.6.4.2.3.3a.cmml">LM</mtext></msub><mo id="S2.E2.m1.6.6.4.2.2" xref="S2.E2.m1.6.6.4.2.2.cmml">â¢</mo><msup id="S2.E2.m1.6.6.4.2.1" xref="S2.E2.m1.6.6.4.2.1.cmml"><mrow id="S2.E2.m1.6.6.4.2.1.1.1" xref="S2.E2.m1.6.6.4.2.1.1.1.1.cmml"><mo id="S2.E2.m1.6.6.4.2.1.1.1.2" stretchy="false" xref="S2.E2.m1.6.6.4.2.1.1.1.1.cmml">(</mo><mrow id="S2.E2.m1.6.6.4.2.1.1.1.1" xref="S2.E2.m1.6.6.4.2.1.1.1.1.cmml"><msub id="S2.E2.m1.6.6.4.2.1.1.1.1.3" xref="S2.E2.m1.6.6.4.2.1.1.1.1.3.cmml"><mi id="S2.E2.m1.6.6.4.2.1.1.1.1.3.2" xref="S2.E2.m1.6.6.4.2.1.1.1.1.3.2.cmml">y</mi><mi id="S2.E2.m1.6.6.4.2.1.1.1.1.3.3" xref="S2.E2.m1.6.6.4.2.1.1.1.1.3.3.cmml">i</mi></msub><mo id="S2.E2.m1.6.6.4.2.1.1.1.1.2" xref="S2.E2.m1.6.6.4.2.1.1.1.1.2.cmml">=</mo><mrow id="S2.E2.m1.6.6.4.2.1.1.1.1.1" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.cmml"><msup id="S2.E2.m1.6.6.4.2.1.1.1.1.1.3" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.2" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.2.cmml">v</mi><mo id="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.3" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.3.cmml">â€²</mo></msup><mo fence="false" id="S2.E2.m1.6.6.4.2.1.1.1.1.1.2" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.2.cmml">|</mo><mrow id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.2.cmml"><msub id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.cmml"><mi id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.2" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.cmml"><mi id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.2" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.1" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.3" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.3.cmml">i</mi></mrow></msub><mo id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.2" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.2.cmml">,</mo><mi id="S2.E2.m1.5.5.3.1" xref="S2.E2.m1.5.5.3.1.cmml">x</mi></mrow></mrow></mrow><mo id="S2.E2.m1.6.6.4.2.1.1.1.3" stretchy="false" xref="S2.E2.m1.6.6.4.2.1.1.1.1.cmml">)</mo></mrow><mrow id="S2.E2.m1.6.6.4.2.1.3" xref="S2.E2.m1.6.6.4.2.1.3.cmml"><mn id="S2.E2.m1.6.6.4.2.1.3.2" xref="S2.E2.m1.6.6.4.2.1.3.2.cmml">1</mn><mo id="S2.E2.m1.6.6.4.2.1.3.1" xref="S2.E2.m1.6.6.4.2.1.3.1.cmml">/</mo><mi id="S2.E2.m1.6.6.4.2.1.3.3" xref="S2.E2.m1.6.6.4.2.1.3.3.cmml">Ï„</mi></mrow></msup></mrow></mrow></mfrac></mrow><mo id="S2.E2.m1.8.8.1.2" lspace="0em" xref="S2.E2.m1.8.8.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.E2.m1.8b"><apply id="S2.E2.m1.8.8.1.1.cmml" xref="S2.E2.m1.8.8.1"><eq id="S2.E2.m1.8.8.1.1.2.cmml" xref="S2.E2.m1.8.8.1.1.2"></eq><apply id="S2.E2.m1.8.8.1.1.1.cmml" xref="S2.E2.m1.8.8.1.1.1"><times id="S2.E2.m1.8.8.1.1.1.2.cmml" xref="S2.E2.m1.8.8.1.1.1.2"></times><apply id="S2.E2.m1.8.8.1.1.1.3.cmml" xref="S2.E2.m1.8.8.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.8.8.1.1.1.3.1.cmml" xref="S2.E2.m1.8.8.1.1.1.3">subscript</csymbol><ci id="S2.E2.m1.8.8.1.1.1.3.2.cmml" xref="S2.E2.m1.8.8.1.1.1.3.2">ğ‘</ci><list id="S2.E2.m1.2.2.2.3.cmml" xref="S2.E2.m1.2.2.2.4"><ci id="S2.E2.m1.1.1.1.1a.cmml" xref="S2.E2.m1.1.1.1.1"><mtext id="S2.E2.m1.1.1.1.1.cmml" mathsize="70%" xref="S2.E2.m1.1.1.1.1">LM</mtext></ci><ci id="S2.E2.m1.2.2.2.2.cmml" xref="S2.E2.m1.2.2.2.2">ğœ</ci></list></apply><apply id="S2.E2.m1.8.8.1.1.1.1.1.1.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1"><eq id="S2.E2.m1.8.8.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.2"></eq><apply id="S2.E2.m1.8.8.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.8.8.1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.3">subscript</csymbol><ci id="S2.E2.m1.8.8.1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.3.2">ğ‘¦</ci><ci id="S2.E2.m1.8.8.1.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.3.3">ğ‘–</ci></apply><apply id="S2.E2.m1.8.8.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S2.E2.m1.8.8.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.2">conditional</csymbol><ci id="S2.E2.m1.8.8.1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.3">ğ‘£</ci><list id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1"><apply id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3"><lt id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.8.8.1.1.1.1.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="S2.E2.m1.7.7.cmml" xref="S2.E2.m1.7.7">ğ‘¥</ci></list></apply></apply></apply><apply id="S2.E2.m1.6.6.cmml" xref="S2.E2.m1.6.6"><divide id="S2.E2.m1.6.6.5.cmml" xref="S2.E2.m1.6.6"></divide><apply id="S2.E2.m1.4.4.2.cmml" xref="S2.E2.m1.4.4.2"><times id="S2.E2.m1.4.4.2.3.cmml" xref="S2.E2.m1.4.4.2.3"></times><apply id="S2.E2.m1.4.4.2.4.cmml" xref="S2.E2.m1.4.4.2.4"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.2.4.1.cmml" xref="S2.E2.m1.4.4.2.4">subscript</csymbol><ci id="S2.E2.m1.4.4.2.4.2.cmml" xref="S2.E2.m1.4.4.2.4.2">ğ‘</ci><ci id="S2.E2.m1.4.4.2.4.3a.cmml" xref="S2.E2.m1.4.4.2.4.3"><mtext id="S2.E2.m1.4.4.2.4.3.cmml" mathsize="70%" xref="S2.E2.m1.4.4.2.4.3">LM</mtext></ci></apply><apply id="S2.E2.m1.4.4.2.2.cmml" xref="S2.E2.m1.4.4.2.2"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.2.2.2.cmml" xref="S2.E2.m1.4.4.2.2">superscript</csymbol><apply id="S2.E2.m1.4.4.2.2.1.1.1.cmml" xref="S2.E2.m1.4.4.2.2.1.1"><eq id="S2.E2.m1.4.4.2.2.1.1.1.2.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.2"></eq><apply id="S2.E2.m1.4.4.2.2.1.1.1.3.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.2.2.1.1.1.3.1.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.3">subscript</csymbol><ci id="S2.E2.m1.4.4.2.2.1.1.1.3.2.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.3.2">ğ‘¦</ci><ci id="S2.E2.m1.4.4.2.2.1.1.1.3.3.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.3.3">ğ‘–</ci></apply><apply id="S2.E2.m1.4.4.2.2.1.1.1.1.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1"><csymbol cd="latexml" id="S2.E2.m1.4.4.2.2.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.2">conditional</csymbol><ci id="S2.E2.m1.4.4.2.2.1.1.1.1.3.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.3">ğ‘£</ci><list id="S2.E2.m1.4.4.2.2.1.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1"><apply id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3"><lt id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.4.4.2.2.1.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="S2.E2.m1.3.3.1.1.cmml" xref="S2.E2.m1.3.3.1.1">ğ‘¥</ci></list></apply></apply><apply id="S2.E2.m1.4.4.2.2.3.cmml" xref="S2.E2.m1.4.4.2.2.3"><divide id="S2.E2.m1.4.4.2.2.3.1.cmml" xref="S2.E2.m1.4.4.2.2.3.1"></divide><cn id="S2.E2.m1.4.4.2.2.3.2.cmml" type="integer" xref="S2.E2.m1.4.4.2.2.3.2">1</cn><ci id="S2.E2.m1.4.4.2.2.3.3.cmml" xref="S2.E2.m1.4.4.2.2.3.3">ğœ</ci></apply></apply></apply><apply id="S2.E2.m1.6.6.4.cmml" xref="S2.E2.m1.6.6.4"><apply id="S2.E2.m1.6.6.4.3.cmml" xref="S2.E2.m1.6.6.4.3"><csymbol cd="ambiguous" id="S2.E2.m1.6.6.4.3.1.cmml" xref="S2.E2.m1.6.6.4.3">subscript</csymbol><sum id="S2.E2.m1.6.6.4.3.2.cmml" xref="S2.E2.m1.6.6.4.3.2"></sum><apply id="S2.E2.m1.6.6.4.3.3.cmml" xref="S2.E2.m1.6.6.4.3.3"><in id="S2.E2.m1.6.6.4.3.3.1.cmml" xref="S2.E2.m1.6.6.4.3.3.1"></in><apply id="S2.E2.m1.6.6.4.3.3.2.cmml" xref="S2.E2.m1.6.6.4.3.3.2"><csymbol cd="ambiguous" id="S2.E2.m1.6.6.4.3.3.2.1.cmml" xref="S2.E2.m1.6.6.4.3.3.2">superscript</csymbol><ci id="S2.E2.m1.6.6.4.3.3.2.2.cmml" xref="S2.E2.m1.6.6.4.3.3.2.2">ğ‘£</ci><ci id="S2.E2.m1.6.6.4.3.3.2.3.cmml" xref="S2.E2.m1.6.6.4.3.3.2.3">â€²</ci></apply><ci id="S2.E2.m1.6.6.4.3.3.3.cmml" xref="S2.E2.m1.6.6.4.3.3.3">ğ’±</ci></apply></apply><apply id="S2.E2.m1.6.6.4.2.cmml" xref="S2.E2.m1.6.6.4.2"><times id="S2.E2.m1.6.6.4.2.2.cmml" xref="S2.E2.m1.6.6.4.2.2"></times><apply id="S2.E2.m1.6.6.4.2.3.cmml" xref="S2.E2.m1.6.6.4.2.3"><csymbol cd="ambiguous" id="S2.E2.m1.6.6.4.2.3.1.cmml" xref="S2.E2.m1.6.6.4.2.3">subscript</csymbol><ci id="S2.E2.m1.6.6.4.2.3.2.cmml" xref="S2.E2.m1.6.6.4.2.3.2">ğ‘</ci><ci id="S2.E2.m1.6.6.4.2.3.3a.cmml" xref="S2.E2.m1.6.6.4.2.3.3"><mtext id="S2.E2.m1.6.6.4.2.3.3.cmml" mathsize="70%" xref="S2.E2.m1.6.6.4.2.3.3">LM</mtext></ci></apply><apply id="S2.E2.m1.6.6.4.2.1.cmml" xref="S2.E2.m1.6.6.4.2.1"><csymbol cd="ambiguous" id="S2.E2.m1.6.6.4.2.1.2.cmml" xref="S2.E2.m1.6.6.4.2.1">superscript</csymbol><apply id="S2.E2.m1.6.6.4.2.1.1.1.1.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1"><eq id="S2.E2.m1.6.6.4.2.1.1.1.1.2.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.2"></eq><apply id="S2.E2.m1.6.6.4.2.1.1.1.1.3.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.6.6.4.2.1.1.1.1.3.1.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.3">subscript</csymbol><ci id="S2.E2.m1.6.6.4.2.1.1.1.1.3.2.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.3.2">ğ‘¦</ci><ci id="S2.E2.m1.6.6.4.2.1.1.1.1.3.3.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.3.3">ğ‘–</ci></apply><apply id="S2.E2.m1.6.6.4.2.1.1.1.1.1.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1"><csymbol cd="latexml" id="S2.E2.m1.6.6.4.2.1.1.1.1.1.2.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.2">conditional</csymbol><apply id="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.3">superscript</csymbol><ci id="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.2">ğ‘£</ci><ci id="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.3.3">â€²</ci></apply><list id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1"><apply id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.1.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.2.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3"><lt id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.1.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.2.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.3.cmml" xref="S2.E2.m1.6.6.4.2.1.1.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="S2.E2.m1.5.5.3.1.cmml" xref="S2.E2.m1.5.5.3.1">ğ‘¥</ci></list></apply></apply><apply id="S2.E2.m1.6.6.4.2.1.3.cmml" xref="S2.E2.m1.6.6.4.2.1.3"><divide id="S2.E2.m1.6.6.4.2.1.3.1.cmml" xref="S2.E2.m1.6.6.4.2.1.3.1"></divide><cn id="S2.E2.m1.6.6.4.2.1.3.2.cmml" type="integer" xref="S2.E2.m1.6.6.4.2.1.3.2">1</cn><ci id="S2.E2.m1.6.6.4.2.1.3.3.cmml" xref="S2.E2.m1.6.6.4.2.1.3.3">ğœ</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.E2.m1.8c">p_{\text{LM},\tau}(y_{i}=v|y_{&lt;i},x)=\frac{p_{\text{LM}}(y_{i}=v|y_{&lt;i},x)^{1/%
\tau}}{\sum_{v^{\prime}\in\mathcal{V}}p_{\text{LM}}(y_{i}=v^{\prime}|y_{&lt;i},x)%
^{1/\tau}}.</annotation><annotation encoding="application/x-llamapun" id="S2.E2.m1.8d">italic_p start_POSTSUBSCRIPT LM , italic_Ï„ end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = italic_v | italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) = divide start_ARG italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = italic_v | italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) start_POSTSUPERSCRIPT 1 / italic_Ï„ end_POSTSUPERSCRIPT end_ARG start_ARG âˆ‘ start_POSTSUBSCRIPT italic_v start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT âˆˆ caligraphic_V end_POSTSUBSCRIPT italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = italic_v start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT | italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) start_POSTSUPERSCRIPT 1 / italic_Ï„ end_POSTSUPERSCRIPT end_ARG .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S2.SS1.p2">
<p class="ltx_p" id="S2.SS1.p2.1">Lower temperature values <math alttext="\tau" class="ltx_Math" display="inline" id="S2.SS1.p2.1.m1.1"><semantics id="S2.SS1.p2.1.m1.1a"><mi id="S2.SS1.p2.1.m1.1.1" xref="S2.SS1.p2.1.m1.1.1.cmml">Ï„</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p2.1.m1.1b"><ci id="S2.SS1.p2.1.m1.1.1.cmml" xref="S2.SS1.p2.1.m1.1.1">ğœ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p2.1.m1.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p2.1.m1.1d">italic_Ï„</annotation></semantics></math> make the distribution more deterministic, favoring the most probable tokens, whereas higher values make the distribution flatter, approximating a uniform distribution.</p>
</div>
<div class="ltx_para" id="S2.SS1.p3">
<p class="ltx_p" id="S2.SS1.p3.1">However, multiple works have scrutinized the reliability of model likelihood as a measure for translation quality <cite class="ltx_cite ltx_citemacro_citep">(Ott etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib49" title="">2018</a>; Stahlberg and Byrne, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib67" title="">2019</a>; Eikema and Aziz, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib12" title="">2020</a>; Freitag etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib19" title="">2022a</a>; Eikema, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib11" title="">2024</a>)</cite>. Instead of solely relying on the likelihood, these works advocate using an automatic translation quality metric as a utility function for minimum Bayes risk (MBR) decoding or reranking based on QE metrics.
This shift not only improves the selection of translations but also facilitates the exploration of the underlying distribution learned by the models. However, it is crucial to acknowledge that the overall translation quality is still contingent on the quality of the candidate pool. We next discuss common automatic metrics used for assessing translation quality.</p>
</div>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Automatic Metrics for Machine Translation</h3>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.1">Automatic quality assessment of machine-generated translations has received considerable attention recently, resulting in metrics that attain high correlations with human judgment of translation quality <cite class="ltx_cite ltx_citemacro_citep">(Freitag etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib21" title="">2022b</a>, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib20" title="">2023b</a>)</cite>. These automatic metrics are meant to assess the quality of a translation across multiple dimensions (<span class="ltx_text ltx_font_italic" id="S2.SS2.p1.1.1">e.g.</span> fluency, adequacy) and can provide reliable feedback when human judgments are unavailable. Among these metrics, neural learned
metrics that are trained on human translation quality assessment scores or error span annotations have gained significant traction <cite class="ltx_cite ltx_citemacro_citep">(Rei etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib59" title="">2022</a>; Yan etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib81" title="">2023</a>; Guerreiro etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib27" title="">2023a</a>; Perrella etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib53" title="">2022</a>)</cite>.</p>
</div>
<div class="ltx_para" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.1">For aligning automatically generated translations with human quality preferences, many works have proposed to use automatic metrics as an alternative to human feedback during MT training <cite class="ltx_cite ltx_citemacro_citep">(Shen etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib63" title="">2016</a>; Wieting etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib77" title="">2019</a>; He etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib29" title="">2024</a>; Xu etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib79" title="">2024b</a>)</cite> or decoding <cite class="ltx_cite ltx_citemacro_cite">Shen etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib62" title="">2004</a>); Fernandes etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib15" title="">2022b</a>); Freitag etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib19" title="">2022a</a>, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib18" title="">2023a</a>)</cite>. <cite class="ltx_cite ltx_citemacro_cite">Freitag etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib19" title="">2022a</a>)</cite> show the efficacy of using reference-based neural metrics as utility functions for MBR decoding over lexical alternatives. Further, <cite class="ltx_cite ltx_citemacro_cite">Fernandes etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib14" title="">2022a</a>)</cite> use QE metrics like <span class="ltx_text ltx_font_smallcaps" id="S2.SS2.p2.1.1">Comet-QE</span> to select 1-best or <span class="ltx_text ltx_font_italic" id="S2.SS2.p2.1.2">N</span>-best translations from a pool of candidate hypotheses. Their analysis shows that while these automatic metrics can be useful, they might not always reflect human preferences accurately. Additionally, extra care has to be taken when optimizing systems for these metrics, as the improvements might be attributable to overfitting or â€œgaming the metricâ€, rather than being genuine improvements in translation quality.
Nevertheless, these metrics encode useful information about the quality of translations and can still be useful to obtain high-quality translations.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>An MCMC-based Decoding Approach for Text Generation</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.1">Given that we have access to an automatic metric that quantifies how desirable a particular translation is, we aim to address the following questions:</p>
</div>
<div class="ltx_para" id="S3.p2">
<p class="ltx_p" id="S3.p2.1"><span class="ltx_text ltx_font_italic" id="S3.p2.1.1">Can we sample directly in proportion to their corresponding quality values?
Can we use automatic metrics that already give us a reliable estimate of human-perceived quality to achieve that? Finally, can we use this process to obtain diverse high-quality samples? </span></p>
</div>
<div class="ltx_para" id="S3.p3">
<p class="ltx_p" id="S3.p3.1">To answer these questions and to address the limitations of quality-aware decoders, we propose to take an alternative approach, quality-aware <span class="ltx_text ltx_font_italic" id="S3.p3.1.1">sampling</span>, which ensures high quality and diversity.
Recognizing that naturally occurring texts can have numerous valid translations <cite class="ltx_cite ltx_citemacro_citep">(Nida, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib48" title="">1964</a>; Dreyer and Marcu, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib8" title="">2012</a>; Ott etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib49" title="">2018</a>; Mayhew etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib43" title="">2020</a>)</cite>, the ability to generate diverse translation hypotheses is paramount.</p>
</div>
<div class="ltx_para" id="S3.p4">
<p class="ltx_p" id="S3.p4.1">To this end, we first present background on Metropolis-Hastings in Section Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.SS1" title="3.1 Metropolis-Hastings â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">3.1</span></a>. SectionÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.SS2" title="3.2 Proposal distribution â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">3.2</span></a> discusses our proposal distribution. Finally, we connect our approach to reinforcement learning with human feedback (RLHF) in Section <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.SS3" title="3.3 Connections to Reinforcement Learning with Human Feedback â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">3.3</span></a>.</p>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Metropolis-Hastings</h3>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.1">The problem of sampling translation hypotheses in proportion to a metric, <math alttext="r(x,y)" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.2"><semantics id="S3.SS1.p1.1.m1.2a"><mrow id="S3.SS1.p1.1.m1.2.3" xref="S3.SS1.p1.1.m1.2.3.cmml"><mi id="S3.SS1.p1.1.m1.2.3.2" xref="S3.SS1.p1.1.m1.2.3.2.cmml">r</mi><mo id="S3.SS1.p1.1.m1.2.3.1" xref="S3.SS1.p1.1.m1.2.3.1.cmml">â¢</mo><mrow id="S3.SS1.p1.1.m1.2.3.3.2" xref="S3.SS1.p1.1.m1.2.3.3.1.cmml"><mo id="S3.SS1.p1.1.m1.2.3.3.2.1" stretchy="false" xref="S3.SS1.p1.1.m1.2.3.3.1.cmml">(</mo><mi id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">x</mi><mo id="S3.SS1.p1.1.m1.2.3.3.2.2" xref="S3.SS1.p1.1.m1.2.3.3.1.cmml">,</mo><mi id="S3.SS1.p1.1.m1.2.2" xref="S3.SS1.p1.1.m1.2.2.cmml">y</mi><mo id="S3.SS1.p1.1.m1.2.3.3.2.3" stretchy="false" xref="S3.SS1.p1.1.m1.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.2b"><apply id="S3.SS1.p1.1.m1.2.3.cmml" xref="S3.SS1.p1.1.m1.2.3"><times id="S3.SS1.p1.1.m1.2.3.1.cmml" xref="S3.SS1.p1.1.m1.2.3.1"></times><ci id="S3.SS1.p1.1.m1.2.3.2.cmml" xref="S3.SS1.p1.1.m1.2.3.2">ğ‘Ÿ</ci><interval closure="open" id="S3.SS1.p1.1.m1.2.3.3.1.cmml" xref="S3.SS1.p1.1.m1.2.3.3.2"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">ğ‘¥</ci><ci id="S3.SS1.p1.1.m1.2.2.cmml" xref="S3.SS1.p1.1.m1.2.2">ğ‘¦</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.2c">r(x,y)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.2d">italic_r ( italic_x , italic_y )</annotation></semantics></math>,
can be framed as sampling from the following Gibbs distribution:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\pi_{\beta}(y|x)=\frac{1}{Z_{\beta}(x)}\exp\left(\frac{r\left(y,x\right)}{%
\beta}\right)," class="ltx_Math" display="block" id="S3.E3.m1.5"><semantics id="S3.E3.m1.5a"><mrow id="S3.E3.m1.5.5.1" xref="S3.E3.m1.5.5.1.1.cmml"><mrow id="S3.E3.m1.5.5.1.1" xref="S3.E3.m1.5.5.1.1.cmml"><mrow id="S3.E3.m1.5.5.1.1.1" xref="S3.E3.m1.5.5.1.1.1.cmml"><msub id="S3.E3.m1.5.5.1.1.1.3" xref="S3.E3.m1.5.5.1.1.1.3.cmml"><mi id="S3.E3.m1.5.5.1.1.1.3.2" xref="S3.E3.m1.5.5.1.1.1.3.2.cmml">Ï€</mi><mi id="S3.E3.m1.5.5.1.1.1.3.3" xref="S3.E3.m1.5.5.1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.E3.m1.5.5.1.1.1.2" xref="S3.E3.m1.5.5.1.1.1.2.cmml">â¢</mo><mrow id="S3.E3.m1.5.5.1.1.1.1.1" xref="S3.E3.m1.5.5.1.1.1.1.1.1.cmml"><mo id="S3.E3.m1.5.5.1.1.1.1.1.2" stretchy="false" xref="S3.E3.m1.5.5.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E3.m1.5.5.1.1.1.1.1.1" xref="S3.E3.m1.5.5.1.1.1.1.1.1.cmml"><mi id="S3.E3.m1.5.5.1.1.1.1.1.1.2" xref="S3.E3.m1.5.5.1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E3.m1.5.5.1.1.1.1.1.1.1" xref="S3.E3.m1.5.5.1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.E3.m1.5.5.1.1.1.1.1.1.3" xref="S3.E3.m1.5.5.1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E3.m1.5.5.1.1.1.1.1.3" stretchy="false" xref="S3.E3.m1.5.5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E3.m1.5.5.1.1.2" xref="S3.E3.m1.5.5.1.1.2.cmml">=</mo><mrow id="S3.E3.m1.5.5.1.1.3" xref="S3.E3.m1.5.5.1.1.3.cmml"><mfrac id="S3.E3.m1.1.1" xref="S3.E3.m1.1.1.cmml"><mn id="S3.E3.m1.1.1.3" xref="S3.E3.m1.1.1.3.cmml">1</mn><mrow id="S3.E3.m1.1.1.1" xref="S3.E3.m1.1.1.1.cmml"><msub id="S3.E3.m1.1.1.1.3" xref="S3.E3.m1.1.1.1.3.cmml"><mi id="S3.E3.m1.1.1.1.3.2" xref="S3.E3.m1.1.1.1.3.2.cmml">Z</mi><mi id="S3.E3.m1.1.1.1.3.3" xref="S3.E3.m1.1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.E3.m1.1.1.1.2" xref="S3.E3.m1.1.1.1.2.cmml">â¢</mo><mrow id="S3.E3.m1.1.1.1.4.2" xref="S3.E3.m1.1.1.1.cmml"><mo id="S3.E3.m1.1.1.1.4.2.1" stretchy="false" xref="S3.E3.m1.1.1.1.cmml">(</mo><mi id="S3.E3.m1.1.1.1.1" xref="S3.E3.m1.1.1.1.1.cmml">x</mi><mo id="S3.E3.m1.1.1.1.4.2.2" stretchy="false" xref="S3.E3.m1.1.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="S3.E3.m1.5.5.1.1.3.1" lspace="0.167em" xref="S3.E3.m1.5.5.1.1.3.1.cmml">â¢</mo><mrow id="S3.E3.m1.5.5.1.1.3.2.2" xref="S3.E3.m1.5.5.1.1.3.2.1.cmml"><mi id="S3.E3.m1.4.4" xref="S3.E3.m1.4.4.cmml">exp</mi><mo id="S3.E3.m1.5.5.1.1.3.2.2a" xref="S3.E3.m1.5.5.1.1.3.2.1.cmml">â¡</mo><mrow id="S3.E3.m1.5.5.1.1.3.2.2.1" xref="S3.E3.m1.5.5.1.1.3.2.1.cmml"><mo id="S3.E3.m1.5.5.1.1.3.2.2.1.1" xref="S3.E3.m1.5.5.1.1.3.2.1.cmml">(</mo><mfrac id="S3.E3.m1.3.3" xref="S3.E3.m1.3.3.cmml"><mrow id="S3.E3.m1.3.3.2" xref="S3.E3.m1.3.3.2.cmml"><mi id="S3.E3.m1.3.3.2.4" xref="S3.E3.m1.3.3.2.4.cmml">r</mi><mo id="S3.E3.m1.3.3.2.3" xref="S3.E3.m1.3.3.2.3.cmml">â¢</mo><mrow id="S3.E3.m1.3.3.2.5.2" xref="S3.E3.m1.3.3.2.5.1.cmml"><mo id="S3.E3.m1.3.3.2.5.2.1" xref="S3.E3.m1.3.3.2.5.1.cmml">(</mo><mi id="S3.E3.m1.2.2.1.1" xref="S3.E3.m1.2.2.1.1.cmml">y</mi><mo id="S3.E3.m1.3.3.2.5.2.2" xref="S3.E3.m1.3.3.2.5.1.cmml">,</mo><mi id="S3.E3.m1.3.3.2.2" xref="S3.E3.m1.3.3.2.2.cmml">x</mi><mo id="S3.E3.m1.3.3.2.5.2.3" xref="S3.E3.m1.3.3.2.5.1.cmml">)</mo></mrow></mrow><mi id="S3.E3.m1.3.3.4" xref="S3.E3.m1.3.3.4.cmml">Î²</mi></mfrac><mo id="S3.E3.m1.5.5.1.1.3.2.2.1.2" xref="S3.E3.m1.5.5.1.1.3.2.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S3.E3.m1.5.5.1.2" xref="S3.E3.m1.5.5.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E3.m1.5b"><apply id="S3.E3.m1.5.5.1.1.cmml" xref="S3.E3.m1.5.5.1"><eq id="S3.E3.m1.5.5.1.1.2.cmml" xref="S3.E3.m1.5.5.1.1.2"></eq><apply id="S3.E3.m1.5.5.1.1.1.cmml" xref="S3.E3.m1.5.5.1.1.1"><times id="S3.E3.m1.5.5.1.1.1.2.cmml" xref="S3.E3.m1.5.5.1.1.1.2"></times><apply id="S3.E3.m1.5.5.1.1.1.3.cmml" xref="S3.E3.m1.5.5.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.5.5.1.1.1.3.1.cmml" xref="S3.E3.m1.5.5.1.1.1.3">subscript</csymbol><ci id="S3.E3.m1.5.5.1.1.1.3.2.cmml" xref="S3.E3.m1.5.5.1.1.1.3.2">ğœ‹</ci><ci id="S3.E3.m1.5.5.1.1.1.3.3.cmml" xref="S3.E3.m1.5.5.1.1.1.3.3">ğ›½</ci></apply><apply id="S3.E3.m1.5.5.1.1.1.1.1.1.cmml" xref="S3.E3.m1.5.5.1.1.1.1.1"><csymbol cd="latexml" id="S3.E3.m1.5.5.1.1.1.1.1.1.1.cmml" xref="S3.E3.m1.5.5.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E3.m1.5.5.1.1.1.1.1.1.2.cmml" xref="S3.E3.m1.5.5.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E3.m1.5.5.1.1.1.1.1.1.3.cmml" xref="S3.E3.m1.5.5.1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="S3.E3.m1.5.5.1.1.3.cmml" xref="S3.E3.m1.5.5.1.1.3"><times id="S3.E3.m1.5.5.1.1.3.1.cmml" xref="S3.E3.m1.5.5.1.1.3.1"></times><apply id="S3.E3.m1.1.1.cmml" xref="S3.E3.m1.1.1"><divide id="S3.E3.m1.1.1.2.cmml" xref="S3.E3.m1.1.1"></divide><cn id="S3.E3.m1.1.1.3.cmml" type="integer" xref="S3.E3.m1.1.1.3">1</cn><apply id="S3.E3.m1.1.1.1.cmml" xref="S3.E3.m1.1.1.1"><times id="S3.E3.m1.1.1.1.2.cmml" xref="S3.E3.m1.1.1.1.2"></times><apply id="S3.E3.m1.1.1.1.3.cmml" xref="S3.E3.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E3.m1.1.1.1.3.1.cmml" xref="S3.E3.m1.1.1.1.3">subscript</csymbol><ci id="S3.E3.m1.1.1.1.3.2.cmml" xref="S3.E3.m1.1.1.1.3.2">ğ‘</ci><ci id="S3.E3.m1.1.1.1.3.3.cmml" xref="S3.E3.m1.1.1.1.3.3">ğ›½</ci></apply><ci id="S3.E3.m1.1.1.1.1.cmml" xref="S3.E3.m1.1.1.1.1">ğ‘¥</ci></apply></apply><apply id="S3.E3.m1.5.5.1.1.3.2.1.cmml" xref="S3.E3.m1.5.5.1.1.3.2.2"><exp id="S3.E3.m1.4.4.cmml" xref="S3.E3.m1.4.4"></exp><apply id="S3.E3.m1.3.3.cmml" xref="S3.E3.m1.3.3"><divide id="S3.E3.m1.3.3.3.cmml" xref="S3.E3.m1.3.3"></divide><apply id="S3.E3.m1.3.3.2.cmml" xref="S3.E3.m1.3.3.2"><times id="S3.E3.m1.3.3.2.3.cmml" xref="S3.E3.m1.3.3.2.3"></times><ci id="S3.E3.m1.3.3.2.4.cmml" xref="S3.E3.m1.3.3.2.4">ğ‘Ÿ</ci><interval closure="open" id="S3.E3.m1.3.3.2.5.1.cmml" xref="S3.E3.m1.3.3.2.5.2"><ci id="S3.E3.m1.2.2.1.1.cmml" xref="S3.E3.m1.2.2.1.1">ğ‘¦</ci><ci id="S3.E3.m1.3.3.2.2.cmml" xref="S3.E3.m1.3.3.2.2">ğ‘¥</ci></interval></apply><ci id="S3.E3.m1.3.3.4.cmml" xref="S3.E3.m1.3.3.4">ğ›½</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E3.m1.5c">\pi_{\beta}(y|x)=\frac{1}{Z_{\beta}(x)}\exp\left(\frac{r\left(y,x\right)}{%
\beta}\right),</annotation><annotation encoding="application/x-llamapun" id="S3.E3.m1.5d">italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x ) = divide start_ARG 1 end_ARG start_ARG italic_Z start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_x ) end_ARG roman_exp ( divide start_ARG italic_r ( italic_y , italic_x ) end_ARG start_ARG italic_Î² end_ARG ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p1.6">where <math alttext="Z_{\beta}(x)=\sum_{y}\exp\left(\frac{r\left(y,x\right)}{\beta}\right)" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m1.4"><semantics id="S3.SS1.p1.2.m1.4a"><mrow id="S3.SS1.p1.2.m1.4.5" xref="S3.SS1.p1.2.m1.4.5.cmml"><mrow id="S3.SS1.p1.2.m1.4.5.2" xref="S3.SS1.p1.2.m1.4.5.2.cmml"><msub id="S3.SS1.p1.2.m1.4.5.2.2" xref="S3.SS1.p1.2.m1.4.5.2.2.cmml"><mi id="S3.SS1.p1.2.m1.4.5.2.2.2" xref="S3.SS1.p1.2.m1.4.5.2.2.2.cmml">Z</mi><mi id="S3.SS1.p1.2.m1.4.5.2.2.3" xref="S3.SS1.p1.2.m1.4.5.2.2.3.cmml">Î²</mi></msub><mo id="S3.SS1.p1.2.m1.4.5.2.1" xref="S3.SS1.p1.2.m1.4.5.2.1.cmml">â¢</mo><mrow id="S3.SS1.p1.2.m1.4.5.2.3.2" xref="S3.SS1.p1.2.m1.4.5.2.cmml"><mo id="S3.SS1.p1.2.m1.4.5.2.3.2.1" stretchy="false" xref="S3.SS1.p1.2.m1.4.5.2.cmml">(</mo><mi id="S3.SS1.p1.2.m1.3.3" xref="S3.SS1.p1.2.m1.3.3.cmml">x</mi><mo id="S3.SS1.p1.2.m1.4.5.2.3.2.2" stretchy="false" xref="S3.SS1.p1.2.m1.4.5.2.cmml">)</mo></mrow></mrow><mo id="S3.SS1.p1.2.m1.4.5.1" rspace="0.111em" xref="S3.SS1.p1.2.m1.4.5.1.cmml">=</mo><mrow id="S3.SS1.p1.2.m1.4.5.3" xref="S3.SS1.p1.2.m1.4.5.3.cmml"><msub id="S3.SS1.p1.2.m1.4.5.3.1" xref="S3.SS1.p1.2.m1.4.5.3.1.cmml"><mo id="S3.SS1.p1.2.m1.4.5.3.1.2" xref="S3.SS1.p1.2.m1.4.5.3.1.2.cmml">âˆ‘</mo><mi id="S3.SS1.p1.2.m1.4.5.3.1.3" xref="S3.SS1.p1.2.m1.4.5.3.1.3.cmml">y</mi></msub><mrow id="S3.SS1.p1.2.m1.4.5.3.2.2" xref="S3.SS1.p1.2.m1.4.5.3.2.1.cmml"><mi id="S3.SS1.p1.2.m1.4.4" xref="S3.SS1.p1.2.m1.4.4.cmml">exp</mi><mo id="S3.SS1.p1.2.m1.4.5.3.2.2a" xref="S3.SS1.p1.2.m1.4.5.3.2.1.cmml">â¡</mo><mrow id="S3.SS1.p1.2.m1.4.5.3.2.2.1" xref="S3.SS1.p1.2.m1.4.5.3.2.1.cmml"><mo id="S3.SS1.p1.2.m1.4.5.3.2.2.1.1" xref="S3.SS1.p1.2.m1.4.5.3.2.1.cmml">(</mo><mfrac id="S3.SS1.p1.2.m1.2.2" xref="S3.SS1.p1.2.m1.2.2.cmml"><mrow id="S3.SS1.p1.2.m1.2.2.2" xref="S3.SS1.p1.2.m1.2.2.2.cmml"><mi id="S3.SS1.p1.2.m1.2.2.2.4" xref="S3.SS1.p1.2.m1.2.2.2.4.cmml">r</mi><mo id="S3.SS1.p1.2.m1.2.2.2.3" xref="S3.SS1.p1.2.m1.2.2.2.3.cmml">â¢</mo><mrow id="S3.SS1.p1.2.m1.2.2.2.5.2" xref="S3.SS1.p1.2.m1.2.2.2.5.1.cmml"><mo id="S3.SS1.p1.2.m1.2.2.2.5.2.1" xref="S3.SS1.p1.2.m1.2.2.2.5.1.cmml">(</mo><mi id="S3.SS1.p1.2.m1.1.1.1.1" xref="S3.SS1.p1.2.m1.1.1.1.1.cmml">y</mi><mo id="S3.SS1.p1.2.m1.2.2.2.5.2.2" xref="S3.SS1.p1.2.m1.2.2.2.5.1.cmml">,</mo><mi id="S3.SS1.p1.2.m1.2.2.2.2" xref="S3.SS1.p1.2.m1.2.2.2.2.cmml">x</mi><mo id="S3.SS1.p1.2.m1.2.2.2.5.2.3" xref="S3.SS1.p1.2.m1.2.2.2.5.1.cmml">)</mo></mrow></mrow><mi id="S3.SS1.p1.2.m1.2.2.4" xref="S3.SS1.p1.2.m1.2.2.4.cmml">Î²</mi></mfrac><mo id="S3.SS1.p1.2.m1.4.5.3.2.2.1.2" xref="S3.SS1.p1.2.m1.4.5.3.2.1.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m1.4b"><apply id="S3.SS1.p1.2.m1.4.5.cmml" xref="S3.SS1.p1.2.m1.4.5"><eq id="S3.SS1.p1.2.m1.4.5.1.cmml" xref="S3.SS1.p1.2.m1.4.5.1"></eq><apply id="S3.SS1.p1.2.m1.4.5.2.cmml" xref="S3.SS1.p1.2.m1.4.5.2"><times id="S3.SS1.p1.2.m1.4.5.2.1.cmml" xref="S3.SS1.p1.2.m1.4.5.2.1"></times><apply id="S3.SS1.p1.2.m1.4.5.2.2.cmml" xref="S3.SS1.p1.2.m1.4.5.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m1.4.5.2.2.1.cmml" xref="S3.SS1.p1.2.m1.4.5.2.2">subscript</csymbol><ci id="S3.SS1.p1.2.m1.4.5.2.2.2.cmml" xref="S3.SS1.p1.2.m1.4.5.2.2.2">ğ‘</ci><ci id="S3.SS1.p1.2.m1.4.5.2.2.3.cmml" xref="S3.SS1.p1.2.m1.4.5.2.2.3">ğ›½</ci></apply><ci id="S3.SS1.p1.2.m1.3.3.cmml" xref="S3.SS1.p1.2.m1.3.3">ğ‘¥</ci></apply><apply id="S3.SS1.p1.2.m1.4.5.3.cmml" xref="S3.SS1.p1.2.m1.4.5.3"><apply id="S3.SS1.p1.2.m1.4.5.3.1.cmml" xref="S3.SS1.p1.2.m1.4.5.3.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m1.4.5.3.1.1.cmml" xref="S3.SS1.p1.2.m1.4.5.3.1">subscript</csymbol><sum id="S3.SS1.p1.2.m1.4.5.3.1.2.cmml" xref="S3.SS1.p1.2.m1.4.5.3.1.2"></sum><ci id="S3.SS1.p1.2.m1.4.5.3.1.3.cmml" xref="S3.SS1.p1.2.m1.4.5.3.1.3">ğ‘¦</ci></apply><apply id="S3.SS1.p1.2.m1.4.5.3.2.1.cmml" xref="S3.SS1.p1.2.m1.4.5.3.2.2"><exp id="S3.SS1.p1.2.m1.4.4.cmml" xref="S3.SS1.p1.2.m1.4.4"></exp><apply id="S3.SS1.p1.2.m1.2.2.cmml" xref="S3.SS1.p1.2.m1.2.2"><divide id="S3.SS1.p1.2.m1.2.2.3.cmml" xref="S3.SS1.p1.2.m1.2.2"></divide><apply id="S3.SS1.p1.2.m1.2.2.2.cmml" xref="S3.SS1.p1.2.m1.2.2.2"><times id="S3.SS1.p1.2.m1.2.2.2.3.cmml" xref="S3.SS1.p1.2.m1.2.2.2.3"></times><ci id="S3.SS1.p1.2.m1.2.2.2.4.cmml" xref="S3.SS1.p1.2.m1.2.2.2.4">ğ‘Ÿ</ci><interval closure="open" id="S3.SS1.p1.2.m1.2.2.2.5.1.cmml" xref="S3.SS1.p1.2.m1.2.2.2.5.2"><ci id="S3.SS1.p1.2.m1.1.1.1.1.cmml" xref="S3.SS1.p1.2.m1.1.1.1.1">ğ‘¦</ci><ci id="S3.SS1.p1.2.m1.2.2.2.2.cmml" xref="S3.SS1.p1.2.m1.2.2.2.2">ğ‘¥</ci></interval></apply><ci id="S3.SS1.p1.2.m1.2.2.4.cmml" xref="S3.SS1.p1.2.m1.2.2.4">ğ›½</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m1.4c">Z_{\beta}(x)=\sum_{y}\exp\left(\frac{r\left(y,x\right)}{\beta}\right)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m1.4d">italic_Z start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_x ) = âˆ‘ start_POSTSUBSCRIPT italic_y end_POSTSUBSCRIPT roman_exp ( divide start_ARG italic_r ( italic_y , italic_x ) end_ARG start_ARG italic_Î² end_ARG )</annotation></semantics></math> and <math alttext="\beta" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m2.1"><semantics id="S3.SS1.p1.3.m2.1a"><mi id="S3.SS1.p1.3.m2.1.1" xref="S3.SS1.p1.3.m2.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m2.1b"><ci id="S3.SS1.p1.3.m2.1.1.cmml" xref="S3.SS1.p1.3.m2.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m2.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m2.1d">italic_Î²</annotation></semantics></math> is the temperature of the Gibbs distribution.
We denote the corresponding unnormalized density by <math alttext="\tilde{\pi}_{\beta}(y|x)" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m3.1"><semantics id="S3.SS1.p1.4.m3.1a"><mrow id="S3.SS1.p1.4.m3.1.1" xref="S3.SS1.p1.4.m3.1.1.cmml"><msub id="S3.SS1.p1.4.m3.1.1.3" xref="S3.SS1.p1.4.m3.1.1.3.cmml"><mover accent="true" id="S3.SS1.p1.4.m3.1.1.3.2" xref="S3.SS1.p1.4.m3.1.1.3.2.cmml"><mi id="S3.SS1.p1.4.m3.1.1.3.2.2" xref="S3.SS1.p1.4.m3.1.1.3.2.2.cmml">Ï€</mi><mo id="S3.SS1.p1.4.m3.1.1.3.2.1" xref="S3.SS1.p1.4.m3.1.1.3.2.1.cmml">~</mo></mover><mi id="S3.SS1.p1.4.m3.1.1.3.3" xref="S3.SS1.p1.4.m3.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.SS1.p1.4.m3.1.1.2" xref="S3.SS1.p1.4.m3.1.1.2.cmml">â¢</mo><mrow id="S3.SS1.p1.4.m3.1.1.1.1" xref="S3.SS1.p1.4.m3.1.1.1.1.1.cmml"><mo id="S3.SS1.p1.4.m3.1.1.1.1.2" stretchy="false" xref="S3.SS1.p1.4.m3.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS1.p1.4.m3.1.1.1.1.1" xref="S3.SS1.p1.4.m3.1.1.1.1.1.cmml"><mi id="S3.SS1.p1.4.m3.1.1.1.1.1.2" xref="S3.SS1.p1.4.m3.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS1.p1.4.m3.1.1.1.1.1.1" xref="S3.SS1.p1.4.m3.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS1.p1.4.m3.1.1.1.1.1.3" xref="S3.SS1.p1.4.m3.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.SS1.p1.4.m3.1.1.1.1.3" stretchy="false" xref="S3.SS1.p1.4.m3.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m3.1b"><apply id="S3.SS1.p1.4.m3.1.1.cmml" xref="S3.SS1.p1.4.m3.1.1"><times id="S3.SS1.p1.4.m3.1.1.2.cmml" xref="S3.SS1.p1.4.m3.1.1.2"></times><apply id="S3.SS1.p1.4.m3.1.1.3.cmml" xref="S3.SS1.p1.4.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m3.1.1.3.1.cmml" xref="S3.SS1.p1.4.m3.1.1.3">subscript</csymbol><apply id="S3.SS1.p1.4.m3.1.1.3.2.cmml" xref="S3.SS1.p1.4.m3.1.1.3.2"><ci id="S3.SS1.p1.4.m3.1.1.3.2.1.cmml" xref="S3.SS1.p1.4.m3.1.1.3.2.1">~</ci><ci id="S3.SS1.p1.4.m3.1.1.3.2.2.cmml" xref="S3.SS1.p1.4.m3.1.1.3.2.2">ğœ‹</ci></apply><ci id="S3.SS1.p1.4.m3.1.1.3.3.cmml" xref="S3.SS1.p1.4.m3.1.1.3.3">ğ›½</ci></apply><apply id="S3.SS1.p1.4.m3.1.1.1.1.1.cmml" xref="S3.SS1.p1.4.m3.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p1.4.m3.1.1.1.1.1.1.cmml" xref="S3.SS1.p1.4.m3.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS1.p1.4.m3.1.1.1.1.1.2.cmml" xref="S3.SS1.p1.4.m3.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p1.4.m3.1.1.1.1.1.3.cmml" xref="S3.SS1.p1.4.m3.1.1.1.1.1.3">ğ‘¥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m3.1c">\tilde{\pi}_{\beta}(y|x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.4.m3.1d">over~ start_ARG italic_Ï€ end_ARG start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x )</annotation></semantics></math>, which unlike <math alttext="Z_{\beta}(x)" class="ltx_Math" display="inline" id="S3.SS1.p1.5.m4.1"><semantics id="S3.SS1.p1.5.m4.1a"><mrow id="S3.SS1.p1.5.m4.1.2" xref="S3.SS1.p1.5.m4.1.2.cmml"><msub id="S3.SS1.p1.5.m4.1.2.2" xref="S3.SS1.p1.5.m4.1.2.2.cmml"><mi id="S3.SS1.p1.5.m4.1.2.2.2" xref="S3.SS1.p1.5.m4.1.2.2.2.cmml">Z</mi><mi id="S3.SS1.p1.5.m4.1.2.2.3" xref="S3.SS1.p1.5.m4.1.2.2.3.cmml">Î²</mi></msub><mo id="S3.SS1.p1.5.m4.1.2.1" xref="S3.SS1.p1.5.m4.1.2.1.cmml">â¢</mo><mrow id="S3.SS1.p1.5.m4.1.2.3.2" xref="S3.SS1.p1.5.m4.1.2.cmml"><mo id="S3.SS1.p1.5.m4.1.2.3.2.1" stretchy="false" xref="S3.SS1.p1.5.m4.1.2.cmml">(</mo><mi id="S3.SS1.p1.5.m4.1.1" xref="S3.SS1.p1.5.m4.1.1.cmml">x</mi><mo id="S3.SS1.p1.5.m4.1.2.3.2.2" stretchy="false" xref="S3.SS1.p1.5.m4.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m4.1b"><apply id="S3.SS1.p1.5.m4.1.2.cmml" xref="S3.SS1.p1.5.m4.1.2"><times id="S3.SS1.p1.5.m4.1.2.1.cmml" xref="S3.SS1.p1.5.m4.1.2.1"></times><apply id="S3.SS1.p1.5.m4.1.2.2.cmml" xref="S3.SS1.p1.5.m4.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m4.1.2.2.1.cmml" xref="S3.SS1.p1.5.m4.1.2.2">subscript</csymbol><ci id="S3.SS1.p1.5.m4.1.2.2.2.cmml" xref="S3.SS1.p1.5.m4.1.2.2.2">ğ‘</ci><ci id="S3.SS1.p1.5.m4.1.2.2.3.cmml" xref="S3.SS1.p1.5.m4.1.2.2.3">ğ›½</ci></apply><ci id="S3.SS1.p1.5.m4.1.1.cmml" xref="S3.SS1.p1.5.m4.1.1">ğ‘¥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m4.1c">Z_{\beta}(x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.5.m4.1d">italic_Z start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_x )</annotation></semantics></math> can be evaluated for any <math alttext="(x,y)" class="ltx_Math" display="inline" id="S3.SS1.p1.6.m5.2"><semantics id="S3.SS1.p1.6.m5.2a"><mrow id="S3.SS1.p1.6.m5.2.3.2" xref="S3.SS1.p1.6.m5.2.3.1.cmml"><mo id="S3.SS1.p1.6.m5.2.3.2.1" stretchy="false" xref="S3.SS1.p1.6.m5.2.3.1.cmml">(</mo><mi id="S3.SS1.p1.6.m5.1.1" xref="S3.SS1.p1.6.m5.1.1.cmml">x</mi><mo id="S3.SS1.p1.6.m5.2.3.2.2" xref="S3.SS1.p1.6.m5.2.3.1.cmml">,</mo><mi id="S3.SS1.p1.6.m5.2.2" xref="S3.SS1.p1.6.m5.2.2.cmml">y</mi><mo id="S3.SS1.p1.6.m5.2.3.2.3" stretchy="false" xref="S3.SS1.p1.6.m5.2.3.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m5.2b"><interval closure="open" id="S3.SS1.p1.6.m5.2.3.1.cmml" xref="S3.SS1.p1.6.m5.2.3.2"><ci id="S3.SS1.p1.6.m5.1.1.cmml" xref="S3.SS1.p1.6.m5.1.1">ğ‘¥</ci><ci id="S3.SS1.p1.6.m5.2.2.cmml" xref="S3.SS1.p1.6.m5.2.2">ğ‘¦</ci></interval></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m5.2c">(x,y)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.6.m5.2d">( italic_x , italic_y )</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p2">
<p class="ltx_p" id="S3.SS1.p2.8">While several algorithms have been proposed to sample approximately from such intractable distributions <cite class="ltx_cite ltx_citemacro_citep">(Miao etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib45" title="">2018</a>; Berglund etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib5" title="">2015</a>; Amini etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib2" title="">2023</a>)</cite>, we resort to Metropolis-Hastings <cite class="ltx_cite ltx_citemacro_citep">(Metropolis etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib44" title="">1953</a>, MH)</cite> due to its simplicity and flexibility in handling a wide range of proposal distributions. The MH algorithm generates a sequence of samples from a <span class="ltx_text ltx_font_bold" id="S3.SS1.p2.8.1">target distribution</span>, here <math alttext="\pi_{\beta}(y|x)" class="ltx_Math" display="inline" id="S3.SS1.p2.1.m1.1"><semantics id="S3.SS1.p2.1.m1.1a"><mrow id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml"><msub id="S3.SS1.p2.1.m1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.3.cmml"><mi id="S3.SS1.p2.1.m1.1.1.3.2" xref="S3.SS1.p2.1.m1.1.1.3.2.cmml">Ï€</mi><mi id="S3.SS1.p2.1.m1.1.1.3.3" xref="S3.SS1.p2.1.m1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.SS1.p2.1.m1.1.1.2" xref="S3.SS1.p2.1.m1.1.1.2.cmml">â¢</mo><mrow id="S3.SS1.p2.1.m1.1.1.1.1" xref="S3.SS1.p2.1.m1.1.1.1.1.1.cmml"><mo id="S3.SS1.p2.1.m1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p2.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS1.p2.1.m1.1.1.1.1.1" xref="S3.SS1.p2.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.1.m1.1.1.1.1.1.2" xref="S3.SS1.p2.1.m1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS1.p2.1.m1.1.1.1.1.1.1" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS1.p2.1.m1.1.1.1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.SS1.p2.1.m1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p2.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><apply id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1"><times id="S3.SS1.p2.1.m1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.2"></times><apply id="S3.SS1.p2.1.m1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.3.1.cmml" xref="S3.SS1.p2.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS1.p2.1.m1.1.1.3.2.cmml" xref="S3.SS1.p2.1.m1.1.1.3.2">ğœ‹</ci><ci id="S3.SS1.p2.1.m1.1.1.3.3.cmml" xref="S3.SS1.p2.1.m1.1.1.3.3">ğ›½</ci></apply><apply id="S3.SS1.p2.1.m1.1.1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p2.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS1.p2.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p2.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">\pi_{\beta}(y|x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.1.m1.1d">italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x )</annotation></semantics></math>, by constructing a Markov chain <math alttext="(y^{0},y^{1},\ldots,y^{T})" class="ltx_Math" display="inline" id="S3.SS1.p2.2.m2.4"><semantics id="S3.SS1.p2.2.m2.4a"><mrow id="S3.SS1.p2.2.m2.4.4.3" xref="S3.SS1.p2.2.m2.4.4.4.cmml"><mo id="S3.SS1.p2.2.m2.4.4.3.4" stretchy="false" xref="S3.SS1.p2.2.m2.4.4.4.cmml">(</mo><msup id="S3.SS1.p2.2.m2.2.2.1.1" xref="S3.SS1.p2.2.m2.2.2.1.1.cmml"><mi id="S3.SS1.p2.2.m2.2.2.1.1.2" xref="S3.SS1.p2.2.m2.2.2.1.1.2.cmml">y</mi><mn id="S3.SS1.p2.2.m2.2.2.1.1.3" xref="S3.SS1.p2.2.m2.2.2.1.1.3.cmml">0</mn></msup><mo id="S3.SS1.p2.2.m2.4.4.3.5" xref="S3.SS1.p2.2.m2.4.4.4.cmml">,</mo><msup id="S3.SS1.p2.2.m2.3.3.2.2" xref="S3.SS1.p2.2.m2.3.3.2.2.cmml"><mi id="S3.SS1.p2.2.m2.3.3.2.2.2" xref="S3.SS1.p2.2.m2.3.3.2.2.2.cmml">y</mi><mn id="S3.SS1.p2.2.m2.3.3.2.2.3" xref="S3.SS1.p2.2.m2.3.3.2.2.3.cmml">1</mn></msup><mo id="S3.SS1.p2.2.m2.4.4.3.6" xref="S3.SS1.p2.2.m2.4.4.4.cmml">,</mo><mi id="S3.SS1.p2.2.m2.1.1" mathvariant="normal" xref="S3.SS1.p2.2.m2.1.1.cmml">â€¦</mi><mo id="S3.SS1.p2.2.m2.4.4.3.7" xref="S3.SS1.p2.2.m2.4.4.4.cmml">,</mo><msup id="S3.SS1.p2.2.m2.4.4.3.3" xref="S3.SS1.p2.2.m2.4.4.3.3.cmml"><mi id="S3.SS1.p2.2.m2.4.4.3.3.2" xref="S3.SS1.p2.2.m2.4.4.3.3.2.cmml">y</mi><mi id="S3.SS1.p2.2.m2.4.4.3.3.3" xref="S3.SS1.p2.2.m2.4.4.3.3.3.cmml">T</mi></msup><mo id="S3.SS1.p2.2.m2.4.4.3.8" stretchy="false" xref="S3.SS1.p2.2.m2.4.4.4.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.2.m2.4b"><vector id="S3.SS1.p2.2.m2.4.4.4.cmml" xref="S3.SS1.p2.2.m2.4.4.3"><apply id="S3.SS1.p2.2.m2.2.2.1.1.cmml" xref="S3.SS1.p2.2.m2.2.2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.2.m2.2.2.1.1.1.cmml" xref="S3.SS1.p2.2.m2.2.2.1.1">superscript</csymbol><ci id="S3.SS1.p2.2.m2.2.2.1.1.2.cmml" xref="S3.SS1.p2.2.m2.2.2.1.1.2">ğ‘¦</ci><cn id="S3.SS1.p2.2.m2.2.2.1.1.3.cmml" type="integer" xref="S3.SS1.p2.2.m2.2.2.1.1.3">0</cn></apply><apply id="S3.SS1.p2.2.m2.3.3.2.2.cmml" xref="S3.SS1.p2.2.m2.3.3.2.2"><csymbol cd="ambiguous" id="S3.SS1.p2.2.m2.3.3.2.2.1.cmml" xref="S3.SS1.p2.2.m2.3.3.2.2">superscript</csymbol><ci id="S3.SS1.p2.2.m2.3.3.2.2.2.cmml" xref="S3.SS1.p2.2.m2.3.3.2.2.2">ğ‘¦</ci><cn id="S3.SS1.p2.2.m2.3.3.2.2.3.cmml" type="integer" xref="S3.SS1.p2.2.m2.3.3.2.2.3">1</cn></apply><ci id="S3.SS1.p2.2.m2.1.1.cmml" xref="S3.SS1.p2.2.m2.1.1">â€¦</ci><apply id="S3.SS1.p2.2.m2.4.4.3.3.cmml" xref="S3.SS1.p2.2.m2.4.4.3.3"><csymbol cd="ambiguous" id="S3.SS1.p2.2.m2.4.4.3.3.1.cmml" xref="S3.SS1.p2.2.m2.4.4.3.3">superscript</csymbol><ci id="S3.SS1.p2.2.m2.4.4.3.3.2.cmml" xref="S3.SS1.p2.2.m2.4.4.3.3.2">ğ‘¦</ci><ci id="S3.SS1.p2.2.m2.4.4.3.3.3.cmml" xref="S3.SS1.p2.2.m2.4.4.3.3.3">ğ‘‡</ci></apply></vector></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.2.m2.4c">(y^{0},y^{1},\ldots,y^{T})</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.2.m2.4d">( italic_y start_POSTSUPERSCRIPT 0 end_POSTSUPERSCRIPT , italic_y start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT , â€¦ , italic_y start_POSTSUPERSCRIPT italic_T end_POSTSUPERSCRIPT )</annotation></semantics></math> that has <math alttext="\pi_{\beta}(y|x)" class="ltx_Math" display="inline" id="S3.SS1.p2.3.m3.1"><semantics id="S3.SS1.p2.3.m3.1a"><mrow id="S3.SS1.p2.3.m3.1.1" xref="S3.SS1.p2.3.m3.1.1.cmml"><msub id="S3.SS1.p2.3.m3.1.1.3" xref="S3.SS1.p2.3.m3.1.1.3.cmml"><mi id="S3.SS1.p2.3.m3.1.1.3.2" xref="S3.SS1.p2.3.m3.1.1.3.2.cmml">Ï€</mi><mi id="S3.SS1.p2.3.m3.1.1.3.3" xref="S3.SS1.p2.3.m3.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.SS1.p2.3.m3.1.1.2" xref="S3.SS1.p2.3.m3.1.1.2.cmml">â¢</mo><mrow id="S3.SS1.p2.3.m3.1.1.1.1" xref="S3.SS1.p2.3.m3.1.1.1.1.1.cmml"><mo id="S3.SS1.p2.3.m3.1.1.1.1.2" stretchy="false" xref="S3.SS1.p2.3.m3.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS1.p2.3.m3.1.1.1.1.1" xref="S3.SS1.p2.3.m3.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.3.m3.1.1.1.1.1.2" xref="S3.SS1.p2.3.m3.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS1.p2.3.m3.1.1.1.1.1.1" xref="S3.SS1.p2.3.m3.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS1.p2.3.m3.1.1.1.1.1.3" xref="S3.SS1.p2.3.m3.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.SS1.p2.3.m3.1.1.1.1.3" stretchy="false" xref="S3.SS1.p2.3.m3.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.3.m3.1b"><apply id="S3.SS1.p2.3.m3.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1"><times id="S3.SS1.p2.3.m3.1.1.2.cmml" xref="S3.SS1.p2.3.m3.1.1.2"></times><apply id="S3.SS1.p2.3.m3.1.1.3.cmml" xref="S3.SS1.p2.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p2.3.m3.1.1.3.1.cmml" xref="S3.SS1.p2.3.m3.1.1.3">subscript</csymbol><ci id="S3.SS1.p2.3.m3.1.1.3.2.cmml" xref="S3.SS1.p2.3.m3.1.1.3.2">ğœ‹</ci><ci id="S3.SS1.p2.3.m3.1.1.3.3.cmml" xref="S3.SS1.p2.3.m3.1.1.3.3">ğ›½</ci></apply><apply id="S3.SS1.p2.3.m3.1.1.1.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p2.3.m3.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.3.m3.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS1.p2.3.m3.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.3.m3.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p2.3.m3.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.3.m3.1.1.1.1.1.3">ğ‘¥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.3.m3.1c">\pi_{\beta}(y|x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.3.m3.1d">italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x )</annotation></semantics></math> as its equilibrium distribution. It starts from an arbitrary hypothesis <math alttext="y^{0}" class="ltx_Math" display="inline" id="S3.SS1.p2.4.m4.1"><semantics id="S3.SS1.p2.4.m4.1a"><msup id="S3.SS1.p2.4.m4.1.1" xref="S3.SS1.p2.4.m4.1.1.cmml"><mi id="S3.SS1.p2.4.m4.1.1.2" xref="S3.SS1.p2.4.m4.1.1.2.cmml">y</mi><mn id="S3.SS1.p2.4.m4.1.1.3" xref="S3.SS1.p2.4.m4.1.1.3.cmml">0</mn></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.4.m4.1b"><apply id="S3.SS1.p2.4.m4.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.4.m4.1.1.1.cmml" xref="S3.SS1.p2.4.m4.1.1">superscript</csymbol><ci id="S3.SS1.p2.4.m4.1.1.2.cmml" xref="S3.SS1.p2.4.m4.1.1.2">ğ‘¦</ci><cn id="S3.SS1.p2.4.m4.1.1.3.cmml" type="integer" xref="S3.SS1.p2.4.m4.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.4.m4.1c">y^{0}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.4.m4.1d">italic_y start_POSTSUPERSCRIPT 0 end_POSTSUPERSCRIPT</annotation></semantics></math>. In the <math alttext="t\textsuperscript{th}" class="ltx_Math" display="inline" id="S3.SS1.p2.5.m5.1"><semantics id="S3.SS1.p2.5.m5.1a"><mrow id="S3.SS1.p2.5.m5.1.1" xref="S3.SS1.p2.5.m5.1.1.cmml"><mi id="S3.SS1.p2.5.m5.1.1.2" xref="S3.SS1.p2.5.m5.1.1.2.cmml">t</mi><mo id="S3.SS1.p2.5.m5.1.1.1" xref="S3.SS1.p2.5.m5.1.1.1.cmml">â¢</mo><mtext id="S3.SS1.p2.5.m5.1.1.3" xref="S3.SS1.p2.5.m5.1.1.3b.cmml"><sup class="ltx_sup" id="S3.SS1.p2.5.m5.1.1.3.1nest">th</sup></mtext></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.5.m5.1b"><apply id="S3.SS1.p2.5.m5.1.1.cmml" xref="S3.SS1.p2.5.m5.1.1"><times id="S3.SS1.p2.5.m5.1.1.1.cmml" xref="S3.SS1.p2.5.m5.1.1.1"></times><ci id="S3.SS1.p2.5.m5.1.1.2.cmml" xref="S3.SS1.p2.5.m5.1.1.2">ğ‘¡</ci><ci id="S3.SS1.p2.5.m5.1.1.3b.cmml" xref="S3.SS1.p2.5.m5.1.1.3"><mtext id="S3.SS1.p2.5.m5.1.1.3.cmml" xref="S3.SS1.p2.5.m5.1.1.3"><sup class="ltx_sup" id="S3.SS1.p2.5.m5.1.1.3.1anest">th</sup></mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.5.m5.1c">t\textsuperscript{th}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.5.m5.1d">italic_t</annotation></semantics></math> iteration, it draws a new hypothesis <math alttext="y" class="ltx_Math" display="inline" id="S3.SS1.p2.6.m6.1"><semantics id="S3.SS1.p2.6.m6.1a"><mi id="S3.SS1.p2.6.m6.1.1" xref="S3.SS1.p2.6.m6.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.6.m6.1b"><ci id="S3.SS1.p2.6.m6.1.1.cmml" xref="S3.SS1.p2.6.m6.1.1">ğ‘¦</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.6.m6.1c">y</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.6.m6.1d">italic_y</annotation></semantics></math> from a <span class="ltx_text ltx_font_bold" id="S3.SS1.p2.8.2">proposal distribution</span> <math alttext="q(y|y^{t},x)" class="ltx_Math" display="inline" id="S3.SS1.p2.7.m7.2"><semantics id="S3.SS1.p2.7.m7.2a"><mrow id="S3.SS1.p2.7.m7.2.2" xref="S3.SS1.p2.7.m7.2.2.cmml"><mi id="S3.SS1.p2.7.m7.2.2.3" xref="S3.SS1.p2.7.m7.2.2.3.cmml">q</mi><mo id="S3.SS1.p2.7.m7.2.2.2" xref="S3.SS1.p2.7.m7.2.2.2.cmml">â¢</mo><mrow id="S3.SS1.p2.7.m7.2.2.1.1" xref="S3.SS1.p2.7.m7.2.2.1.1.1.cmml"><mo id="S3.SS1.p2.7.m7.2.2.1.1.2" stretchy="false" xref="S3.SS1.p2.7.m7.2.2.1.1.1.cmml">(</mo><mrow id="S3.SS1.p2.7.m7.2.2.1.1.1" xref="S3.SS1.p2.7.m7.2.2.1.1.1.cmml"><mi id="S3.SS1.p2.7.m7.2.2.1.1.1.3" xref="S3.SS1.p2.7.m7.2.2.1.1.1.3.cmml">y</mi><mo fence="false" id="S3.SS1.p2.7.m7.2.2.1.1.1.2" xref="S3.SS1.p2.7.m7.2.2.1.1.1.2.cmml">|</mo><mrow id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.2.cmml"><msup id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.2" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.2.cmml">y</mi><mi id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.3" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.2" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.2.cmml">,</mo><mi id="S3.SS1.p2.7.m7.1.1" xref="S3.SS1.p2.7.m7.1.1.cmml">x</mi></mrow></mrow><mo id="S3.SS1.p2.7.m7.2.2.1.1.3" stretchy="false" xref="S3.SS1.p2.7.m7.2.2.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.7.m7.2b"><apply id="S3.SS1.p2.7.m7.2.2.cmml" xref="S3.SS1.p2.7.m7.2.2"><times id="S3.SS1.p2.7.m7.2.2.2.cmml" xref="S3.SS1.p2.7.m7.2.2.2"></times><ci id="S3.SS1.p2.7.m7.2.2.3.cmml" xref="S3.SS1.p2.7.m7.2.2.3">ğ‘</ci><apply id="S3.SS1.p2.7.m7.2.2.1.1.1.cmml" xref="S3.SS1.p2.7.m7.2.2.1.1"><csymbol cd="latexml" id="S3.SS1.p2.7.m7.2.2.1.1.1.2.cmml" xref="S3.SS1.p2.7.m7.2.2.1.1.1.2">conditional</csymbol><ci id="S3.SS1.p2.7.m7.2.2.1.1.1.3.cmml" xref="S3.SS1.p2.7.m7.2.2.1.1.1.3">ğ‘¦</ci><list id="S3.SS1.p2.7.m7.2.2.1.1.1.1.2.cmml" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.1"><apply id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p2.7.m7.2.2.1.1.1.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.SS1.p2.7.m7.1.1.cmml" xref="S3.SS1.p2.7.m7.1.1">ğ‘¥</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.7.m7.2c">q(y|y^{t},x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.7.m7.2d">italic_q ( italic_y | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x )</annotation></semantics></math>. This hypothesis is accepted with an acceptance probability <math alttext="\alpha_{\beta}(y,y^{t})\in[0,1]" class="ltx_Math" display="inline" id="S3.SS1.p2.8.m8.4"><semantics id="S3.SS1.p2.8.m8.4a"><mrow id="S3.SS1.p2.8.m8.4.4" xref="S3.SS1.p2.8.m8.4.4.cmml"><mrow id="S3.SS1.p2.8.m8.4.4.1" xref="S3.SS1.p2.8.m8.4.4.1.cmml"><msub id="S3.SS1.p2.8.m8.4.4.1.3" xref="S3.SS1.p2.8.m8.4.4.1.3.cmml"><mi id="S3.SS1.p2.8.m8.4.4.1.3.2" xref="S3.SS1.p2.8.m8.4.4.1.3.2.cmml">Î±</mi><mi id="S3.SS1.p2.8.m8.4.4.1.3.3" xref="S3.SS1.p2.8.m8.4.4.1.3.3.cmml">Î²</mi></msub><mo id="S3.SS1.p2.8.m8.4.4.1.2" xref="S3.SS1.p2.8.m8.4.4.1.2.cmml">â¢</mo><mrow id="S3.SS1.p2.8.m8.4.4.1.1.1" xref="S3.SS1.p2.8.m8.4.4.1.1.2.cmml"><mo id="S3.SS1.p2.8.m8.4.4.1.1.1.2" stretchy="false" xref="S3.SS1.p2.8.m8.4.4.1.1.2.cmml">(</mo><mi id="S3.SS1.p2.8.m8.1.1" xref="S3.SS1.p2.8.m8.1.1.cmml">y</mi><mo id="S3.SS1.p2.8.m8.4.4.1.1.1.3" xref="S3.SS1.p2.8.m8.4.4.1.1.2.cmml">,</mo><msup id="S3.SS1.p2.8.m8.4.4.1.1.1.1" xref="S3.SS1.p2.8.m8.4.4.1.1.1.1.cmml"><mi id="S3.SS1.p2.8.m8.4.4.1.1.1.1.2" xref="S3.SS1.p2.8.m8.4.4.1.1.1.1.2.cmml">y</mi><mi id="S3.SS1.p2.8.m8.4.4.1.1.1.1.3" xref="S3.SS1.p2.8.m8.4.4.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.SS1.p2.8.m8.4.4.1.1.1.4" stretchy="false" xref="S3.SS1.p2.8.m8.4.4.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.SS1.p2.8.m8.4.4.2" xref="S3.SS1.p2.8.m8.4.4.2.cmml">âˆˆ</mo><mrow id="S3.SS1.p2.8.m8.4.4.3.2" xref="S3.SS1.p2.8.m8.4.4.3.1.cmml"><mo id="S3.SS1.p2.8.m8.4.4.3.2.1" stretchy="false" xref="S3.SS1.p2.8.m8.4.4.3.1.cmml">[</mo><mn id="S3.SS1.p2.8.m8.2.2" xref="S3.SS1.p2.8.m8.2.2.cmml">0</mn><mo id="S3.SS1.p2.8.m8.4.4.3.2.2" xref="S3.SS1.p2.8.m8.4.4.3.1.cmml">,</mo><mn id="S3.SS1.p2.8.m8.3.3" xref="S3.SS1.p2.8.m8.3.3.cmml">1</mn><mo id="S3.SS1.p2.8.m8.4.4.3.2.3" stretchy="false" xref="S3.SS1.p2.8.m8.4.4.3.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.8.m8.4b"><apply id="S3.SS1.p2.8.m8.4.4.cmml" xref="S3.SS1.p2.8.m8.4.4"><in id="S3.SS1.p2.8.m8.4.4.2.cmml" xref="S3.SS1.p2.8.m8.4.4.2"></in><apply id="S3.SS1.p2.8.m8.4.4.1.cmml" xref="S3.SS1.p2.8.m8.4.4.1"><times id="S3.SS1.p2.8.m8.4.4.1.2.cmml" xref="S3.SS1.p2.8.m8.4.4.1.2"></times><apply id="S3.SS1.p2.8.m8.4.4.1.3.cmml" xref="S3.SS1.p2.8.m8.4.4.1.3"><csymbol cd="ambiguous" id="S3.SS1.p2.8.m8.4.4.1.3.1.cmml" xref="S3.SS1.p2.8.m8.4.4.1.3">subscript</csymbol><ci id="S3.SS1.p2.8.m8.4.4.1.3.2.cmml" xref="S3.SS1.p2.8.m8.4.4.1.3.2">ğ›¼</ci><ci id="S3.SS1.p2.8.m8.4.4.1.3.3.cmml" xref="S3.SS1.p2.8.m8.4.4.1.3.3">ğ›½</ci></apply><interval closure="open" id="S3.SS1.p2.8.m8.4.4.1.1.2.cmml" xref="S3.SS1.p2.8.m8.4.4.1.1.1"><ci id="S3.SS1.p2.8.m8.1.1.cmml" xref="S3.SS1.p2.8.m8.1.1">ğ‘¦</ci><apply id="S3.SS1.p2.8.m8.4.4.1.1.1.1.cmml" xref="S3.SS1.p2.8.m8.4.4.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.8.m8.4.4.1.1.1.1.1.cmml" xref="S3.SS1.p2.8.m8.4.4.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p2.8.m8.4.4.1.1.1.1.2.cmml" xref="S3.SS1.p2.8.m8.4.4.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p2.8.m8.4.4.1.1.1.1.3.cmml" xref="S3.SS1.p2.8.m8.4.4.1.1.1.1.3">ğ‘¡</ci></apply></interval></apply><interval closure="closed" id="S3.SS1.p2.8.m8.4.4.3.1.cmml" xref="S3.SS1.p2.8.m8.4.4.3.2"><cn id="S3.SS1.p2.8.m8.2.2.cmml" type="integer" xref="S3.SS1.p2.8.m8.2.2">0</cn><cn id="S3.SS1.p2.8.m8.3.3.cmml" type="integer" xref="S3.SS1.p2.8.m8.3.3">1</cn></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.8.m8.4c">\alpha_{\beta}(y,y^{t})\in[0,1]</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p2.8.m8.4d">italic_Î± start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) âˆˆ [ 0 , 1 ]</annotation></semantics></math> given by:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\alpha_{\beta}(y,y^{t})=\min\left\{1,\,\,\frac{{\pi}_{\beta}\left(y|x\right)q%
\left(y^{t}|y,x\right)}{{\pi}_{\beta}\left(y^{t}|x\right)q\left(y|y^{t},x%
\right)}\right\}." class="ltx_Math" display="block" id="S3.E4.m1.11"><semantics id="S3.E4.m1.11a"><mrow id="S3.E4.m1.11.11.1" xref="S3.E4.m1.11.11.1.1.cmml"><mrow id="S3.E4.m1.11.11.1.1" xref="S3.E4.m1.11.11.1.1.cmml"><mrow id="S3.E4.m1.11.11.1.1.1" xref="S3.E4.m1.11.11.1.1.1.cmml"><msub id="S3.E4.m1.11.11.1.1.1.3" xref="S3.E4.m1.11.11.1.1.1.3.cmml"><mi id="S3.E4.m1.11.11.1.1.1.3.2" xref="S3.E4.m1.11.11.1.1.1.3.2.cmml">Î±</mi><mi id="S3.E4.m1.11.11.1.1.1.3.3" xref="S3.E4.m1.11.11.1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.E4.m1.11.11.1.1.1.2" xref="S3.E4.m1.11.11.1.1.1.2.cmml">â¢</mo><mrow id="S3.E4.m1.11.11.1.1.1.1.1" xref="S3.E4.m1.11.11.1.1.1.1.2.cmml"><mo id="S3.E4.m1.11.11.1.1.1.1.1.2" stretchy="false" xref="S3.E4.m1.11.11.1.1.1.1.2.cmml">(</mo><mi id="S3.E4.m1.8.8" xref="S3.E4.m1.8.8.cmml">y</mi><mo id="S3.E4.m1.11.11.1.1.1.1.1.3" xref="S3.E4.m1.11.11.1.1.1.1.2.cmml">,</mo><msup id="S3.E4.m1.11.11.1.1.1.1.1.1" xref="S3.E4.m1.11.11.1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.11.11.1.1.1.1.1.1.2" xref="S3.E4.m1.11.11.1.1.1.1.1.1.2.cmml">y</mi><mi id="S3.E4.m1.11.11.1.1.1.1.1.1.3" xref="S3.E4.m1.11.11.1.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.E4.m1.11.11.1.1.1.1.1.4" stretchy="false" xref="S3.E4.m1.11.11.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.E4.m1.11.11.1.1.2" xref="S3.E4.m1.11.11.1.1.2.cmml">=</mo><mrow id="S3.E4.m1.11.11.1.1.3.2" xref="S3.E4.m1.11.11.1.1.3.1.cmml"><mi id="S3.E4.m1.9.9" xref="S3.E4.m1.9.9.cmml">min</mi><mo id="S3.E4.m1.11.11.1.1.3.2a" xref="S3.E4.m1.11.11.1.1.3.1.cmml">â¡</mo><mrow id="S3.E4.m1.11.11.1.1.3.2.1" xref="S3.E4.m1.11.11.1.1.3.1.cmml"><mo id="S3.E4.m1.11.11.1.1.3.2.1.1" xref="S3.E4.m1.11.11.1.1.3.1.cmml">{</mo><mn id="S3.E4.m1.10.10" xref="S3.E4.m1.10.10.cmml">1</mn><mo id="S3.E4.m1.11.11.1.1.3.2.1.2" rspace="0.497em" xref="S3.E4.m1.11.11.1.1.3.1.cmml">,</mo><mfrac id="S3.E4.m1.7.7" xref="S3.E4.m1.7.7.cmml"><mrow id="S3.E4.m1.4.4.4" xref="S3.E4.m1.4.4.4.cmml"><msub id="S3.E4.m1.4.4.4.6" xref="S3.E4.m1.4.4.4.6.cmml"><mi id="S3.E4.m1.4.4.4.6.2" xref="S3.E4.m1.4.4.4.6.2.cmml">Ï€</mi><mi id="S3.E4.m1.4.4.4.6.3" xref="S3.E4.m1.4.4.4.6.3.cmml">Î²</mi></msub><mo id="S3.E4.m1.4.4.4.5" xref="S3.E4.m1.4.4.4.5.cmml">â¢</mo><mrow id="S3.E4.m1.3.3.3.3.1" xref="S3.E4.m1.3.3.3.3.1.1.cmml"><mo id="S3.E4.m1.3.3.3.3.1.2" xref="S3.E4.m1.3.3.3.3.1.1.cmml">(</mo><mrow id="S3.E4.m1.3.3.3.3.1.1" xref="S3.E4.m1.3.3.3.3.1.1.cmml"><mi id="S3.E4.m1.3.3.3.3.1.1.2" xref="S3.E4.m1.3.3.3.3.1.1.2.cmml">y</mi><mo fence="false" id="S3.E4.m1.3.3.3.3.1.1.1" xref="S3.E4.m1.3.3.3.3.1.1.1.cmml">|</mo><mi id="S3.E4.m1.3.3.3.3.1.1.3" xref="S3.E4.m1.3.3.3.3.1.1.3.cmml">x</mi></mrow><mo id="S3.E4.m1.3.3.3.3.1.3" xref="S3.E4.m1.3.3.3.3.1.1.cmml">)</mo></mrow><mo id="S3.E4.m1.4.4.4.5a" xref="S3.E4.m1.4.4.4.5.cmml">â¢</mo><mi id="S3.E4.m1.4.4.4.7" xref="S3.E4.m1.4.4.4.7.cmml">q</mi><mo id="S3.E4.m1.4.4.4.5b" xref="S3.E4.m1.4.4.4.5.cmml">â¢</mo><mrow id="S3.E4.m1.4.4.4.4.1" xref="S3.E4.m1.4.4.4.4.1.1.cmml"><mo id="S3.E4.m1.4.4.4.4.1.2" xref="S3.E4.m1.4.4.4.4.1.1.cmml">(</mo><mrow id="S3.E4.m1.4.4.4.4.1.1" xref="S3.E4.m1.4.4.4.4.1.1.cmml"><msup id="S3.E4.m1.4.4.4.4.1.1.2" xref="S3.E4.m1.4.4.4.4.1.1.2.cmml"><mi id="S3.E4.m1.4.4.4.4.1.1.2.2" xref="S3.E4.m1.4.4.4.4.1.1.2.2.cmml">y</mi><mi id="S3.E4.m1.4.4.4.4.1.1.2.3" xref="S3.E4.m1.4.4.4.4.1.1.2.3.cmml">t</mi></msup><mo fence="false" id="S3.E4.m1.4.4.4.4.1.1.1" xref="S3.E4.m1.4.4.4.4.1.1.1.cmml">|</mo><mrow id="S3.E4.m1.4.4.4.4.1.1.3.2" xref="S3.E4.m1.4.4.4.4.1.1.3.1.cmml"><mi id="S3.E4.m1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.cmml">y</mi><mo id="S3.E4.m1.4.4.4.4.1.1.3.2.1" xref="S3.E4.m1.4.4.4.4.1.1.3.1.cmml">,</mo><mi id="S3.E4.m1.2.2.2.2" xref="S3.E4.m1.2.2.2.2.cmml">x</mi></mrow></mrow><mo id="S3.E4.m1.4.4.4.4.1.3" xref="S3.E4.m1.4.4.4.4.1.1.cmml">)</mo></mrow></mrow><mrow id="S3.E4.m1.7.7.7" xref="S3.E4.m1.7.7.7.cmml"><msub id="S3.E4.m1.7.7.7.5" xref="S3.E4.m1.7.7.7.5.cmml"><mi id="S3.E4.m1.7.7.7.5.2" xref="S3.E4.m1.7.7.7.5.2.cmml">Ï€</mi><mi id="S3.E4.m1.7.7.7.5.3" xref="S3.E4.m1.7.7.7.5.3.cmml">Î²</mi></msub><mo id="S3.E4.m1.7.7.7.4" xref="S3.E4.m1.7.7.7.4.cmml">â¢</mo><mrow id="S3.E4.m1.6.6.6.2.1" xref="S3.E4.m1.6.6.6.2.1.1.cmml"><mo id="S3.E4.m1.6.6.6.2.1.2" xref="S3.E4.m1.6.6.6.2.1.1.cmml">(</mo><mrow id="S3.E4.m1.6.6.6.2.1.1" xref="S3.E4.m1.6.6.6.2.1.1.cmml"><msup id="S3.E4.m1.6.6.6.2.1.1.2" xref="S3.E4.m1.6.6.6.2.1.1.2.cmml"><mi id="S3.E4.m1.6.6.6.2.1.1.2.2" xref="S3.E4.m1.6.6.6.2.1.1.2.2.cmml">y</mi><mi id="S3.E4.m1.6.6.6.2.1.1.2.3" xref="S3.E4.m1.6.6.6.2.1.1.2.3.cmml">t</mi></msup><mo fence="false" id="S3.E4.m1.6.6.6.2.1.1.1" xref="S3.E4.m1.6.6.6.2.1.1.1.cmml">|</mo><mi id="S3.E4.m1.6.6.6.2.1.1.3" xref="S3.E4.m1.6.6.6.2.1.1.3.cmml">x</mi></mrow><mo id="S3.E4.m1.6.6.6.2.1.3" xref="S3.E4.m1.6.6.6.2.1.1.cmml">)</mo></mrow><mo id="S3.E4.m1.7.7.7.4a" xref="S3.E4.m1.7.7.7.4.cmml">â¢</mo><mi id="S3.E4.m1.7.7.7.6" xref="S3.E4.m1.7.7.7.6.cmml">q</mi><mo id="S3.E4.m1.7.7.7.4b" xref="S3.E4.m1.7.7.7.4.cmml">â¢</mo><mrow id="S3.E4.m1.7.7.7.3.1" xref="S3.E4.m1.7.7.7.3.1.1.cmml"><mo id="S3.E4.m1.7.7.7.3.1.2" xref="S3.E4.m1.7.7.7.3.1.1.cmml">(</mo><mrow id="S3.E4.m1.7.7.7.3.1.1" xref="S3.E4.m1.7.7.7.3.1.1.cmml"><mi id="S3.E4.m1.7.7.7.3.1.1.3" xref="S3.E4.m1.7.7.7.3.1.1.3.cmml">y</mi><mo fence="false" id="S3.E4.m1.7.7.7.3.1.1.2" xref="S3.E4.m1.7.7.7.3.1.1.2.cmml">|</mo><mrow id="S3.E4.m1.7.7.7.3.1.1.1.1" xref="S3.E4.m1.7.7.7.3.1.1.1.2.cmml"><msup id="S3.E4.m1.7.7.7.3.1.1.1.1.1" xref="S3.E4.m1.7.7.7.3.1.1.1.1.1.cmml"><mi id="S3.E4.m1.7.7.7.3.1.1.1.1.1.2" xref="S3.E4.m1.7.7.7.3.1.1.1.1.1.2.cmml">y</mi><mi id="S3.E4.m1.7.7.7.3.1.1.1.1.1.3" xref="S3.E4.m1.7.7.7.3.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.E4.m1.7.7.7.3.1.1.1.1.2" xref="S3.E4.m1.7.7.7.3.1.1.1.2.cmml">,</mo><mi id="S3.E4.m1.5.5.5.1" xref="S3.E4.m1.5.5.5.1.cmml">x</mi></mrow></mrow><mo id="S3.E4.m1.7.7.7.3.1.3" xref="S3.E4.m1.7.7.7.3.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="S3.E4.m1.11.11.1.1.3.2.1.3" xref="S3.E4.m1.11.11.1.1.3.1.cmml">}</mo></mrow></mrow></mrow><mo id="S3.E4.m1.11.11.1.2" lspace="0em" xref="S3.E4.m1.11.11.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E4.m1.11b"><apply id="S3.E4.m1.11.11.1.1.cmml" xref="S3.E4.m1.11.11.1"><eq id="S3.E4.m1.11.11.1.1.2.cmml" xref="S3.E4.m1.11.11.1.1.2"></eq><apply id="S3.E4.m1.11.11.1.1.1.cmml" xref="S3.E4.m1.11.11.1.1.1"><times id="S3.E4.m1.11.11.1.1.1.2.cmml" xref="S3.E4.m1.11.11.1.1.1.2"></times><apply id="S3.E4.m1.11.11.1.1.1.3.cmml" xref="S3.E4.m1.11.11.1.1.1.3"><csymbol cd="ambiguous" id="S3.E4.m1.11.11.1.1.1.3.1.cmml" xref="S3.E4.m1.11.11.1.1.1.3">subscript</csymbol><ci id="S3.E4.m1.11.11.1.1.1.3.2.cmml" xref="S3.E4.m1.11.11.1.1.1.3.2">ğ›¼</ci><ci id="S3.E4.m1.11.11.1.1.1.3.3.cmml" xref="S3.E4.m1.11.11.1.1.1.3.3">ğ›½</ci></apply><interval closure="open" id="S3.E4.m1.11.11.1.1.1.1.2.cmml" xref="S3.E4.m1.11.11.1.1.1.1.1"><ci id="S3.E4.m1.8.8.cmml" xref="S3.E4.m1.8.8">ğ‘¦</ci><apply id="S3.E4.m1.11.11.1.1.1.1.1.1.cmml" xref="S3.E4.m1.11.11.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.11.11.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.11.11.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E4.m1.11.11.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.11.11.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E4.m1.11.11.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.11.11.1.1.1.1.1.1.3">ğ‘¡</ci></apply></interval></apply><apply id="S3.E4.m1.11.11.1.1.3.1.cmml" xref="S3.E4.m1.11.11.1.1.3.2"><min id="S3.E4.m1.9.9.cmml" xref="S3.E4.m1.9.9"></min><cn id="S3.E4.m1.10.10.cmml" type="integer" xref="S3.E4.m1.10.10">1</cn><apply id="S3.E4.m1.7.7.cmml" xref="S3.E4.m1.7.7"><divide id="S3.E4.m1.7.7.8.cmml" xref="S3.E4.m1.7.7"></divide><apply id="S3.E4.m1.4.4.4.cmml" xref="S3.E4.m1.4.4.4"><times id="S3.E4.m1.4.4.4.5.cmml" xref="S3.E4.m1.4.4.4.5"></times><apply id="S3.E4.m1.4.4.4.6.cmml" xref="S3.E4.m1.4.4.4.6"><csymbol cd="ambiguous" id="S3.E4.m1.4.4.4.6.1.cmml" xref="S3.E4.m1.4.4.4.6">subscript</csymbol><ci id="S3.E4.m1.4.4.4.6.2.cmml" xref="S3.E4.m1.4.4.4.6.2">ğœ‹</ci><ci id="S3.E4.m1.4.4.4.6.3.cmml" xref="S3.E4.m1.4.4.4.6.3">ğ›½</ci></apply><apply id="S3.E4.m1.3.3.3.3.1.1.cmml" xref="S3.E4.m1.3.3.3.3.1"><csymbol cd="latexml" id="S3.E4.m1.3.3.3.3.1.1.1.cmml" xref="S3.E4.m1.3.3.3.3.1.1.1">conditional</csymbol><ci id="S3.E4.m1.3.3.3.3.1.1.2.cmml" xref="S3.E4.m1.3.3.3.3.1.1.2">ğ‘¦</ci><ci id="S3.E4.m1.3.3.3.3.1.1.3.cmml" xref="S3.E4.m1.3.3.3.3.1.1.3">ğ‘¥</ci></apply><ci id="S3.E4.m1.4.4.4.7.cmml" xref="S3.E4.m1.4.4.4.7">ğ‘</ci><apply id="S3.E4.m1.4.4.4.4.1.1.cmml" xref="S3.E4.m1.4.4.4.4.1"><csymbol cd="latexml" id="S3.E4.m1.4.4.4.4.1.1.1.cmml" xref="S3.E4.m1.4.4.4.4.1.1.1">conditional</csymbol><apply id="S3.E4.m1.4.4.4.4.1.1.2.cmml" xref="S3.E4.m1.4.4.4.4.1.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.4.4.4.4.1.1.2.1.cmml" xref="S3.E4.m1.4.4.4.4.1.1.2">superscript</csymbol><ci id="S3.E4.m1.4.4.4.4.1.1.2.2.cmml" xref="S3.E4.m1.4.4.4.4.1.1.2.2">ğ‘¦</ci><ci id="S3.E4.m1.4.4.4.4.1.1.2.3.cmml" xref="S3.E4.m1.4.4.4.4.1.1.2.3">ğ‘¡</ci></apply><list id="S3.E4.m1.4.4.4.4.1.1.3.1.cmml" xref="S3.E4.m1.4.4.4.4.1.1.3.2"><ci id="S3.E4.m1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1">ğ‘¦</ci><ci id="S3.E4.m1.2.2.2.2.cmml" xref="S3.E4.m1.2.2.2.2">ğ‘¥</ci></list></apply></apply><apply id="S3.E4.m1.7.7.7.cmml" xref="S3.E4.m1.7.7.7"><times id="S3.E4.m1.7.7.7.4.cmml" xref="S3.E4.m1.7.7.7.4"></times><apply id="S3.E4.m1.7.7.7.5.cmml" xref="S3.E4.m1.7.7.7.5"><csymbol cd="ambiguous" id="S3.E4.m1.7.7.7.5.1.cmml" xref="S3.E4.m1.7.7.7.5">subscript</csymbol><ci id="S3.E4.m1.7.7.7.5.2.cmml" xref="S3.E4.m1.7.7.7.5.2">ğœ‹</ci><ci id="S3.E4.m1.7.7.7.5.3.cmml" xref="S3.E4.m1.7.7.7.5.3">ğ›½</ci></apply><apply id="S3.E4.m1.6.6.6.2.1.1.cmml" xref="S3.E4.m1.6.6.6.2.1"><csymbol cd="latexml" id="S3.E4.m1.6.6.6.2.1.1.1.cmml" xref="S3.E4.m1.6.6.6.2.1.1.1">conditional</csymbol><apply id="S3.E4.m1.6.6.6.2.1.1.2.cmml" xref="S3.E4.m1.6.6.6.2.1.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.6.6.6.2.1.1.2.1.cmml" xref="S3.E4.m1.6.6.6.2.1.1.2">superscript</csymbol><ci id="S3.E4.m1.6.6.6.2.1.1.2.2.cmml" xref="S3.E4.m1.6.6.6.2.1.1.2.2">ğ‘¦</ci><ci id="S3.E4.m1.6.6.6.2.1.1.2.3.cmml" xref="S3.E4.m1.6.6.6.2.1.1.2.3">ğ‘¡</ci></apply><ci id="S3.E4.m1.6.6.6.2.1.1.3.cmml" xref="S3.E4.m1.6.6.6.2.1.1.3">ğ‘¥</ci></apply><ci id="S3.E4.m1.7.7.7.6.cmml" xref="S3.E4.m1.7.7.7.6">ğ‘</ci><apply id="S3.E4.m1.7.7.7.3.1.1.cmml" xref="S3.E4.m1.7.7.7.3.1"><csymbol cd="latexml" id="S3.E4.m1.7.7.7.3.1.1.2.cmml" xref="S3.E4.m1.7.7.7.3.1.1.2">conditional</csymbol><ci id="S3.E4.m1.7.7.7.3.1.1.3.cmml" xref="S3.E4.m1.7.7.7.3.1.1.3">ğ‘¦</ci><list id="S3.E4.m1.7.7.7.3.1.1.1.2.cmml" xref="S3.E4.m1.7.7.7.3.1.1.1.1"><apply id="S3.E4.m1.7.7.7.3.1.1.1.1.1.cmml" xref="S3.E4.m1.7.7.7.3.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.7.7.7.3.1.1.1.1.1.1.cmml" xref="S3.E4.m1.7.7.7.3.1.1.1.1.1">superscript</csymbol><ci id="S3.E4.m1.7.7.7.3.1.1.1.1.1.2.cmml" xref="S3.E4.m1.7.7.7.3.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E4.m1.7.7.7.3.1.1.1.1.1.3.cmml" xref="S3.E4.m1.7.7.7.3.1.1.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.E4.m1.5.5.5.1.cmml" xref="S3.E4.m1.5.5.5.1">ğ‘¥</ci></list></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4.m1.11c">\alpha_{\beta}(y,y^{t})=\min\left\{1,\,\,\frac{{\pi}_{\beta}\left(y|x\right)q%
\left(y^{t}|y,x\right)}{{\pi}_{\beta}\left(y^{t}|x\right)q\left(y|y^{t},x%
\right)}\right\}.</annotation><annotation encoding="application/x-llamapun" id="S3.E4.m1.11d">italic_Î± start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) = roman_min { 1 , divide start_ARG italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x ) italic_q ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_y , italic_x ) end_ARG start_ARG italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_x ) italic_q ( italic_y | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x ) end_ARG } .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS1.p3">
<p class="ltx_p" id="S3.SS1.p3.9">If the candidate <math alttext="y" class="ltx_Math" display="inline" id="S3.SS1.p3.1.m1.1"><semantics id="S3.SS1.p3.1.m1.1a"><mi id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.1b"><ci id="S3.SS1.p3.1.m1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1">ğ‘¦</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.1c">y</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.1.m1.1d">italic_y</annotation></semantics></math> is accepted, the next state in the chain becomes <math alttext="y^{t+1}=y" class="ltx_Math" display="inline" id="S3.SS1.p3.2.m2.1"><semantics id="S3.SS1.p3.2.m2.1a"><mrow id="S3.SS1.p3.2.m2.1.1" xref="S3.SS1.p3.2.m2.1.1.cmml"><msup id="S3.SS1.p3.2.m2.1.1.2" xref="S3.SS1.p3.2.m2.1.1.2.cmml"><mi id="S3.SS1.p3.2.m2.1.1.2.2" xref="S3.SS1.p3.2.m2.1.1.2.2.cmml">y</mi><mrow id="S3.SS1.p3.2.m2.1.1.2.3" xref="S3.SS1.p3.2.m2.1.1.2.3.cmml"><mi id="S3.SS1.p3.2.m2.1.1.2.3.2" xref="S3.SS1.p3.2.m2.1.1.2.3.2.cmml">t</mi><mo id="S3.SS1.p3.2.m2.1.1.2.3.1" xref="S3.SS1.p3.2.m2.1.1.2.3.1.cmml">+</mo><mn id="S3.SS1.p3.2.m2.1.1.2.3.3" xref="S3.SS1.p3.2.m2.1.1.2.3.3.cmml">1</mn></mrow></msup><mo id="S3.SS1.p3.2.m2.1.1.1" xref="S3.SS1.p3.2.m2.1.1.1.cmml">=</mo><mi id="S3.SS1.p3.2.m2.1.1.3" xref="S3.SS1.p3.2.m2.1.1.3.cmml">y</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.2.m2.1b"><apply id="S3.SS1.p3.2.m2.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1"><eq id="S3.SS1.p3.2.m2.1.1.1.cmml" xref="S3.SS1.p3.2.m2.1.1.1"></eq><apply id="S3.SS1.p3.2.m2.1.1.2.cmml" xref="S3.SS1.p3.2.m2.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p3.2.m2.1.1.2.1.cmml" xref="S3.SS1.p3.2.m2.1.1.2">superscript</csymbol><ci id="S3.SS1.p3.2.m2.1.1.2.2.cmml" xref="S3.SS1.p3.2.m2.1.1.2.2">ğ‘¦</ci><apply id="S3.SS1.p3.2.m2.1.1.2.3.cmml" xref="S3.SS1.p3.2.m2.1.1.2.3"><plus id="S3.SS1.p3.2.m2.1.1.2.3.1.cmml" xref="S3.SS1.p3.2.m2.1.1.2.3.1"></plus><ci id="S3.SS1.p3.2.m2.1.1.2.3.2.cmml" xref="S3.SS1.p3.2.m2.1.1.2.3.2">ğ‘¡</ci><cn id="S3.SS1.p3.2.m2.1.1.2.3.3.cmml" type="integer" xref="S3.SS1.p3.2.m2.1.1.2.3.3">1</cn></apply></apply><ci id="S3.SS1.p3.2.m2.1.1.3.cmml" xref="S3.SS1.p3.2.m2.1.1.3">ğ‘¦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.2.m2.1c">y^{t+1}=y</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.2.m2.1d">italic_y start_POSTSUPERSCRIPT italic_t + 1 end_POSTSUPERSCRIPT = italic_y</annotation></semantics></math>; if rejected, the chain stays at <math alttext="y^{t+1}=y^{t}" class="ltx_Math" display="inline" id="S3.SS1.p3.3.m3.1"><semantics id="S3.SS1.p3.3.m3.1a"><mrow id="S3.SS1.p3.3.m3.1.1" xref="S3.SS1.p3.3.m3.1.1.cmml"><msup id="S3.SS1.p3.3.m3.1.1.2" xref="S3.SS1.p3.3.m3.1.1.2.cmml"><mi id="S3.SS1.p3.3.m3.1.1.2.2" xref="S3.SS1.p3.3.m3.1.1.2.2.cmml">y</mi><mrow id="S3.SS1.p3.3.m3.1.1.2.3" xref="S3.SS1.p3.3.m3.1.1.2.3.cmml"><mi id="S3.SS1.p3.3.m3.1.1.2.3.2" xref="S3.SS1.p3.3.m3.1.1.2.3.2.cmml">t</mi><mo id="S3.SS1.p3.3.m3.1.1.2.3.1" xref="S3.SS1.p3.3.m3.1.1.2.3.1.cmml">+</mo><mn id="S3.SS1.p3.3.m3.1.1.2.3.3" xref="S3.SS1.p3.3.m3.1.1.2.3.3.cmml">1</mn></mrow></msup><mo id="S3.SS1.p3.3.m3.1.1.1" xref="S3.SS1.p3.3.m3.1.1.1.cmml">=</mo><msup id="S3.SS1.p3.3.m3.1.1.3" xref="S3.SS1.p3.3.m3.1.1.3.cmml"><mi id="S3.SS1.p3.3.m3.1.1.3.2" xref="S3.SS1.p3.3.m3.1.1.3.2.cmml">y</mi><mi id="S3.SS1.p3.3.m3.1.1.3.3" xref="S3.SS1.p3.3.m3.1.1.3.3.cmml">t</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.3.m3.1b"><apply id="S3.SS1.p3.3.m3.1.1.cmml" xref="S3.SS1.p3.3.m3.1.1"><eq id="S3.SS1.p3.3.m3.1.1.1.cmml" xref="S3.SS1.p3.3.m3.1.1.1"></eq><apply id="S3.SS1.p3.3.m3.1.1.2.cmml" xref="S3.SS1.p3.3.m3.1.1.2"><csymbol cd="ambiguous" id="S3.SS1.p3.3.m3.1.1.2.1.cmml" xref="S3.SS1.p3.3.m3.1.1.2">superscript</csymbol><ci id="S3.SS1.p3.3.m3.1.1.2.2.cmml" xref="S3.SS1.p3.3.m3.1.1.2.2">ğ‘¦</ci><apply id="S3.SS1.p3.3.m3.1.1.2.3.cmml" xref="S3.SS1.p3.3.m3.1.1.2.3"><plus id="S3.SS1.p3.3.m3.1.1.2.3.1.cmml" xref="S3.SS1.p3.3.m3.1.1.2.3.1"></plus><ci id="S3.SS1.p3.3.m3.1.1.2.3.2.cmml" xref="S3.SS1.p3.3.m3.1.1.2.3.2">ğ‘¡</ci><cn id="S3.SS1.p3.3.m3.1.1.2.3.3.cmml" type="integer" xref="S3.SS1.p3.3.m3.1.1.2.3.3">1</cn></apply></apply><apply id="S3.SS1.p3.3.m3.1.1.3.cmml" xref="S3.SS1.p3.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p3.3.m3.1.1.3.1.cmml" xref="S3.SS1.p3.3.m3.1.1.3">superscript</csymbol><ci id="S3.SS1.p3.3.m3.1.1.3.2.cmml" xref="S3.SS1.p3.3.m3.1.1.3.2">ğ‘¦</ci><ci id="S3.SS1.p3.3.m3.1.1.3.3.cmml" xref="S3.SS1.p3.3.m3.1.1.3.3">ğ‘¡</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.3.m3.1c">y^{t+1}=y^{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.3.m3.1d">italic_y start_POSTSUPERSCRIPT italic_t + 1 end_POSTSUPERSCRIPT = italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT</annotation></semantics></math>. The process repeats for some number of steps <math alttext="T" class="ltx_Math" display="inline" id="S3.SS1.p3.4.m4.1"><semantics id="S3.SS1.p3.4.m4.1a"><mi id="S3.SS1.p3.4.m4.1.1" xref="S3.SS1.p3.4.m4.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.4.m4.1b"><ci id="S3.SS1.p3.4.m4.1.1.cmml" xref="S3.SS1.p3.4.m4.1.1">ğ‘‡</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.4.m4.1c">T</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.4.m4.1d">italic_T</annotation></semantics></math> and in the end it returns the hypothesis <math alttext="y^{T}" class="ltx_Math" display="inline" id="S3.SS1.p3.5.m5.1"><semantics id="S3.SS1.p3.5.m5.1a"><msup id="S3.SS1.p3.5.m5.1.1" xref="S3.SS1.p3.5.m5.1.1.cmml"><mi id="S3.SS1.p3.5.m5.1.1.2" xref="S3.SS1.p3.5.m5.1.1.2.cmml">y</mi><mi id="S3.SS1.p3.5.m5.1.1.3" xref="S3.SS1.p3.5.m5.1.1.3.cmml">T</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.5.m5.1b"><apply id="S3.SS1.p3.5.m5.1.1.cmml" xref="S3.SS1.p3.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.5.m5.1.1.1.cmml" xref="S3.SS1.p3.5.m5.1.1">superscript</csymbol><ci id="S3.SS1.p3.5.m5.1.1.2.cmml" xref="S3.SS1.p3.5.m5.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p3.5.m5.1.1.3.cmml" xref="S3.SS1.p3.5.m5.1.1.3">ğ‘‡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.5.m5.1c">y^{T}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.5.m5.1d">italic_y start_POSTSUPERSCRIPT italic_T end_POSTSUPERSCRIPT</annotation></semantics></math>. Note that, while computing the likelihood <math alttext="\pi_{\beta}(y|x)" class="ltx_Math" display="inline" id="S3.SS1.p3.6.m6.1"><semantics id="S3.SS1.p3.6.m6.1a"><mrow id="S3.SS1.p3.6.m6.1.1" xref="S3.SS1.p3.6.m6.1.1.cmml"><msub id="S3.SS1.p3.6.m6.1.1.3" xref="S3.SS1.p3.6.m6.1.1.3.cmml"><mi id="S3.SS1.p3.6.m6.1.1.3.2" xref="S3.SS1.p3.6.m6.1.1.3.2.cmml">Ï€</mi><mi id="S3.SS1.p3.6.m6.1.1.3.3" xref="S3.SS1.p3.6.m6.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.SS1.p3.6.m6.1.1.2" xref="S3.SS1.p3.6.m6.1.1.2.cmml">â¢</mo><mrow id="S3.SS1.p3.6.m6.1.1.1.1" xref="S3.SS1.p3.6.m6.1.1.1.1.1.cmml"><mo id="S3.SS1.p3.6.m6.1.1.1.1.2" stretchy="false" xref="S3.SS1.p3.6.m6.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS1.p3.6.m6.1.1.1.1.1" xref="S3.SS1.p3.6.m6.1.1.1.1.1.cmml"><mi id="S3.SS1.p3.6.m6.1.1.1.1.1.2" xref="S3.SS1.p3.6.m6.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS1.p3.6.m6.1.1.1.1.1.1" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS1.p3.6.m6.1.1.1.1.1.3" xref="S3.SS1.p3.6.m6.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.SS1.p3.6.m6.1.1.1.1.3" stretchy="false" xref="S3.SS1.p3.6.m6.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.6.m6.1b"><apply id="S3.SS1.p3.6.m6.1.1.cmml" xref="S3.SS1.p3.6.m6.1.1"><times id="S3.SS1.p3.6.m6.1.1.2.cmml" xref="S3.SS1.p3.6.m6.1.1.2"></times><apply id="S3.SS1.p3.6.m6.1.1.3.cmml" xref="S3.SS1.p3.6.m6.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p3.6.m6.1.1.3.1.cmml" xref="S3.SS1.p3.6.m6.1.1.3">subscript</csymbol><ci id="S3.SS1.p3.6.m6.1.1.3.2.cmml" xref="S3.SS1.p3.6.m6.1.1.3.2">ğœ‹</ci><ci id="S3.SS1.p3.6.m6.1.1.3.3.cmml" xref="S3.SS1.p3.6.m6.1.1.3.3">ğ›½</ci></apply><apply id="S3.SS1.p3.6.m6.1.1.1.1.1.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p3.6.m6.1.1.1.1.1.1.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS1.p3.6.m6.1.1.1.1.1.2.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p3.6.m6.1.1.1.1.1.3.cmml" xref="S3.SS1.p3.6.m6.1.1.1.1.1.3">ğ‘¥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.6.m6.1c">\pi_{\beta}(y|x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.6.m6.1d">italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x )</annotation></semantics></math> of a particular hypothesis <math alttext="y" class="ltx_Math" display="inline" id="S3.SS1.p3.7.m7.1"><semantics id="S3.SS1.p3.7.m7.1a"><mi id="S3.SS1.p3.7.m7.1.1" xref="S3.SS1.p3.7.m7.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.7.m7.1b"><ci id="S3.SS1.p3.7.m7.1.1.cmml" xref="S3.SS1.p3.7.m7.1.1">ğ‘¦</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.7.m7.1c">y</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.7.m7.1d">italic_y</annotation></semantics></math> under the Gibbs distribution is intractable (due to the intractable partition function <math alttext="Z_{\beta}(x)" class="ltx_Math" display="inline" id="S3.SS1.p3.8.m8.1"><semantics id="S3.SS1.p3.8.m8.1a"><mrow id="S3.SS1.p3.8.m8.1.2" xref="S3.SS1.p3.8.m8.1.2.cmml"><msub id="S3.SS1.p3.8.m8.1.2.2" xref="S3.SS1.p3.8.m8.1.2.2.cmml"><mi id="S3.SS1.p3.8.m8.1.2.2.2" xref="S3.SS1.p3.8.m8.1.2.2.2.cmml">Z</mi><mi id="S3.SS1.p3.8.m8.1.2.2.3" xref="S3.SS1.p3.8.m8.1.2.2.3.cmml">Î²</mi></msub><mo id="S3.SS1.p3.8.m8.1.2.1" xref="S3.SS1.p3.8.m8.1.2.1.cmml">â¢</mo><mrow id="S3.SS1.p3.8.m8.1.2.3.2" xref="S3.SS1.p3.8.m8.1.2.cmml"><mo id="S3.SS1.p3.8.m8.1.2.3.2.1" stretchy="false" xref="S3.SS1.p3.8.m8.1.2.cmml">(</mo><mi id="S3.SS1.p3.8.m8.1.1" xref="S3.SS1.p3.8.m8.1.1.cmml">x</mi><mo id="S3.SS1.p3.8.m8.1.2.3.2.2" stretchy="false" xref="S3.SS1.p3.8.m8.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.8.m8.1b"><apply id="S3.SS1.p3.8.m8.1.2.cmml" xref="S3.SS1.p3.8.m8.1.2"><times id="S3.SS1.p3.8.m8.1.2.1.cmml" xref="S3.SS1.p3.8.m8.1.2.1"></times><apply id="S3.SS1.p3.8.m8.1.2.2.cmml" xref="S3.SS1.p3.8.m8.1.2.2"><csymbol cd="ambiguous" id="S3.SS1.p3.8.m8.1.2.2.1.cmml" xref="S3.SS1.p3.8.m8.1.2.2">subscript</csymbol><ci id="S3.SS1.p3.8.m8.1.2.2.2.cmml" xref="S3.SS1.p3.8.m8.1.2.2.2">ğ‘</ci><ci id="S3.SS1.p3.8.m8.1.2.2.3.cmml" xref="S3.SS1.p3.8.m8.1.2.2.3">ğ›½</ci></apply><ci id="S3.SS1.p3.8.m8.1.1.cmml" xref="S3.SS1.p3.8.m8.1.1">ğ‘¥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.8.m8.1c">Z_{\beta}(x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.8.m8.1d">italic_Z start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_x )</annotation></semantics></math>), evaluating the acceptance criterion <math alttext="\alpha_{\beta}(y,y^{t})" class="ltx_Math" display="inline" id="S3.SS1.p3.9.m9.2"><semantics id="S3.SS1.p3.9.m9.2a"><mrow id="S3.SS1.p3.9.m9.2.2" xref="S3.SS1.p3.9.m9.2.2.cmml"><msub id="S3.SS1.p3.9.m9.2.2.3" xref="S3.SS1.p3.9.m9.2.2.3.cmml"><mi id="S3.SS1.p3.9.m9.2.2.3.2" xref="S3.SS1.p3.9.m9.2.2.3.2.cmml">Î±</mi><mi id="S3.SS1.p3.9.m9.2.2.3.3" xref="S3.SS1.p3.9.m9.2.2.3.3.cmml">Î²</mi></msub><mo id="S3.SS1.p3.9.m9.2.2.2" xref="S3.SS1.p3.9.m9.2.2.2.cmml">â¢</mo><mrow id="S3.SS1.p3.9.m9.2.2.1.1" xref="S3.SS1.p3.9.m9.2.2.1.2.cmml"><mo id="S3.SS1.p3.9.m9.2.2.1.1.2" stretchy="false" xref="S3.SS1.p3.9.m9.2.2.1.2.cmml">(</mo><mi id="S3.SS1.p3.9.m9.1.1" xref="S3.SS1.p3.9.m9.1.1.cmml">y</mi><mo id="S3.SS1.p3.9.m9.2.2.1.1.3" xref="S3.SS1.p3.9.m9.2.2.1.2.cmml">,</mo><msup id="S3.SS1.p3.9.m9.2.2.1.1.1" xref="S3.SS1.p3.9.m9.2.2.1.1.1.cmml"><mi id="S3.SS1.p3.9.m9.2.2.1.1.1.2" xref="S3.SS1.p3.9.m9.2.2.1.1.1.2.cmml">y</mi><mi id="S3.SS1.p3.9.m9.2.2.1.1.1.3" xref="S3.SS1.p3.9.m9.2.2.1.1.1.3.cmml">t</mi></msup><mo id="S3.SS1.p3.9.m9.2.2.1.1.4" stretchy="false" xref="S3.SS1.p3.9.m9.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.9.m9.2b"><apply id="S3.SS1.p3.9.m9.2.2.cmml" xref="S3.SS1.p3.9.m9.2.2"><times id="S3.SS1.p3.9.m9.2.2.2.cmml" xref="S3.SS1.p3.9.m9.2.2.2"></times><apply id="S3.SS1.p3.9.m9.2.2.3.cmml" xref="S3.SS1.p3.9.m9.2.2.3"><csymbol cd="ambiguous" id="S3.SS1.p3.9.m9.2.2.3.1.cmml" xref="S3.SS1.p3.9.m9.2.2.3">subscript</csymbol><ci id="S3.SS1.p3.9.m9.2.2.3.2.cmml" xref="S3.SS1.p3.9.m9.2.2.3.2">ğ›¼</ci><ci id="S3.SS1.p3.9.m9.2.2.3.3.cmml" xref="S3.SS1.p3.9.m9.2.2.3.3">ğ›½</ci></apply><interval closure="open" id="S3.SS1.p3.9.m9.2.2.1.2.cmml" xref="S3.SS1.p3.9.m9.2.2.1.1"><ci id="S3.SS1.p3.9.m9.1.1.cmml" xref="S3.SS1.p3.9.m9.1.1">ğ‘¦</ci><apply id="S3.SS1.p3.9.m9.2.2.1.1.1.cmml" xref="S3.SS1.p3.9.m9.2.2.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.9.m9.2.2.1.1.1.1.cmml" xref="S3.SS1.p3.9.m9.2.2.1.1.1">superscript</csymbol><ci id="S3.SS1.p3.9.m9.2.2.1.1.1.2.cmml" xref="S3.SS1.p3.9.m9.2.2.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p3.9.m9.2.2.1.1.1.3.cmml" xref="S3.SS1.p3.9.m9.2.2.1.1.1.3">ğ‘¡</ci></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.9.m9.2c">\alpha_{\beta}(y,y^{t})</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p3.9.m9.2d">italic_Î± start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT )</annotation></semantics></math> is easy, because it depends only on the likelihood ratio, in which the normalization constants cancel out, <span class="ltx_text ltx_font_italic" id="S3.SS1.p3.9.1">i.e.</span>:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E5">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\frac{{\pi}_{\beta}(y|x)}{{\pi}_{\beta}(y^{t}|x)}=\frac{\tilde{\pi}_{\beta}(y|%
x)}{\tilde{\pi}_{\beta}(y^{t}|x)}=\exp\left(\frac{r\left(y,x\right)-r\left(y^{%
t},x\right)}{\beta}\right)." class="ltx_Math" display="block" id="S3.E5.m1.10"><semantics id="S3.E5.m1.10a"><mrow id="S3.E5.m1.10.10.1" xref="S3.E5.m1.10.10.1.1.cmml"><mrow id="S3.E5.m1.10.10.1.1" xref="S3.E5.m1.10.10.1.1.cmml"><mfrac id="S3.E5.m1.2.2" xref="S3.E5.m1.2.2.cmml"><mrow id="S3.E5.m1.1.1.1" xref="S3.E5.m1.1.1.1.cmml"><msub id="S3.E5.m1.1.1.1.3" xref="S3.E5.m1.1.1.1.3.cmml"><mi id="S3.E5.m1.1.1.1.3.2" xref="S3.E5.m1.1.1.1.3.2.cmml">Ï€</mi><mi id="S3.E5.m1.1.1.1.3.3" xref="S3.E5.m1.1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.E5.m1.1.1.1.2" xref="S3.E5.m1.1.1.1.2.cmml">â¢</mo><mrow id="S3.E5.m1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.cmml"><mo id="S3.E5.m1.1.1.1.1.1.2" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E5.m1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.cmml"><mi id="S3.E5.m1.1.1.1.1.1.1.2" xref="S3.E5.m1.1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E5.m1.1.1.1.1.1.1.1" xref="S3.E5.m1.1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.E5.m1.1.1.1.1.1.1.3" xref="S3.E5.m1.1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E5.m1.1.1.1.1.1.3" stretchy="false" xref="S3.E5.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S3.E5.m1.2.2.2" xref="S3.E5.m1.2.2.2.cmml"><msub id="S3.E5.m1.2.2.2.3" xref="S3.E5.m1.2.2.2.3.cmml"><mi id="S3.E5.m1.2.2.2.3.2" xref="S3.E5.m1.2.2.2.3.2.cmml">Ï€</mi><mi id="S3.E5.m1.2.2.2.3.3" xref="S3.E5.m1.2.2.2.3.3.cmml">Î²</mi></msub><mo id="S3.E5.m1.2.2.2.2" xref="S3.E5.m1.2.2.2.2.cmml">â¢</mo><mrow id="S3.E5.m1.2.2.2.1.1" xref="S3.E5.m1.2.2.2.1.1.1.cmml"><mo id="S3.E5.m1.2.2.2.1.1.2" stretchy="false" xref="S3.E5.m1.2.2.2.1.1.1.cmml">(</mo><mrow id="S3.E5.m1.2.2.2.1.1.1" xref="S3.E5.m1.2.2.2.1.1.1.cmml"><msup id="S3.E5.m1.2.2.2.1.1.1.2" xref="S3.E5.m1.2.2.2.1.1.1.2.cmml"><mi id="S3.E5.m1.2.2.2.1.1.1.2.2" xref="S3.E5.m1.2.2.2.1.1.1.2.2.cmml">y</mi><mi id="S3.E5.m1.2.2.2.1.1.1.2.3" xref="S3.E5.m1.2.2.2.1.1.1.2.3.cmml">t</mi></msup><mo fence="false" id="S3.E5.m1.2.2.2.1.1.1.1" xref="S3.E5.m1.2.2.2.1.1.1.1.cmml">|</mo><mi id="S3.E5.m1.2.2.2.1.1.1.3" xref="S3.E5.m1.2.2.2.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E5.m1.2.2.2.1.1.3" stretchy="false" xref="S3.E5.m1.2.2.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="S3.E5.m1.10.10.1.1.2" xref="S3.E5.m1.10.10.1.1.2.cmml">=</mo><mfrac id="S3.E5.m1.4.4" xref="S3.E5.m1.4.4.cmml"><mrow id="S3.E5.m1.3.3.1" xref="S3.E5.m1.3.3.1.cmml"><msub id="S3.E5.m1.3.3.1.3" xref="S3.E5.m1.3.3.1.3.cmml"><mover accent="true" id="S3.E5.m1.3.3.1.3.2" xref="S3.E5.m1.3.3.1.3.2.cmml"><mi id="S3.E5.m1.3.3.1.3.2.2" xref="S3.E5.m1.3.3.1.3.2.2.cmml">Ï€</mi><mo id="S3.E5.m1.3.3.1.3.2.1" xref="S3.E5.m1.3.3.1.3.2.1.cmml">~</mo></mover><mi id="S3.E5.m1.3.3.1.3.3" xref="S3.E5.m1.3.3.1.3.3.cmml">Î²</mi></msub><mo id="S3.E5.m1.3.3.1.2" xref="S3.E5.m1.3.3.1.2.cmml">â¢</mo><mrow id="S3.E5.m1.3.3.1.1.1" xref="S3.E5.m1.3.3.1.1.1.1.cmml"><mo id="S3.E5.m1.3.3.1.1.1.2" stretchy="false" xref="S3.E5.m1.3.3.1.1.1.1.cmml">(</mo><mrow id="S3.E5.m1.3.3.1.1.1.1" xref="S3.E5.m1.3.3.1.1.1.1.cmml"><mi id="S3.E5.m1.3.3.1.1.1.1.2" xref="S3.E5.m1.3.3.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E5.m1.3.3.1.1.1.1.1" xref="S3.E5.m1.3.3.1.1.1.1.1.cmml">|</mo><mi id="S3.E5.m1.3.3.1.1.1.1.3" xref="S3.E5.m1.3.3.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E5.m1.3.3.1.1.1.3" stretchy="false" xref="S3.E5.m1.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S3.E5.m1.4.4.2" xref="S3.E5.m1.4.4.2.cmml"><msub id="S3.E5.m1.4.4.2.3" xref="S3.E5.m1.4.4.2.3.cmml"><mover accent="true" id="S3.E5.m1.4.4.2.3.2" xref="S3.E5.m1.4.4.2.3.2.cmml"><mi id="S3.E5.m1.4.4.2.3.2.2" xref="S3.E5.m1.4.4.2.3.2.2.cmml">Ï€</mi><mo id="S3.E5.m1.4.4.2.3.2.1" xref="S3.E5.m1.4.4.2.3.2.1.cmml">~</mo></mover><mi id="S3.E5.m1.4.4.2.3.3" xref="S3.E5.m1.4.4.2.3.3.cmml">Î²</mi></msub><mo id="S3.E5.m1.4.4.2.2" xref="S3.E5.m1.4.4.2.2.cmml">â¢</mo><mrow id="S3.E5.m1.4.4.2.1.1" xref="S3.E5.m1.4.4.2.1.1.1.cmml"><mo id="S3.E5.m1.4.4.2.1.1.2" stretchy="false" xref="S3.E5.m1.4.4.2.1.1.1.cmml">(</mo><mrow id="S3.E5.m1.4.4.2.1.1.1" xref="S3.E5.m1.4.4.2.1.1.1.cmml"><msup id="S3.E5.m1.4.4.2.1.1.1.2" xref="S3.E5.m1.4.4.2.1.1.1.2.cmml"><mi id="S3.E5.m1.4.4.2.1.1.1.2.2" xref="S3.E5.m1.4.4.2.1.1.1.2.2.cmml">y</mi><mi id="S3.E5.m1.4.4.2.1.1.1.2.3" xref="S3.E5.m1.4.4.2.1.1.1.2.3.cmml">t</mi></msup><mo fence="false" id="S3.E5.m1.4.4.2.1.1.1.1" xref="S3.E5.m1.4.4.2.1.1.1.1.cmml">|</mo><mi id="S3.E5.m1.4.4.2.1.1.1.3" xref="S3.E5.m1.4.4.2.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E5.m1.4.4.2.1.1.3" stretchy="false" xref="S3.E5.m1.4.4.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="S3.E5.m1.10.10.1.1.3" xref="S3.E5.m1.10.10.1.1.3.cmml">=</mo><mrow id="S3.E5.m1.10.10.1.1.4.2" xref="S3.E5.m1.10.10.1.1.4.1.cmml"><mi id="S3.E5.m1.9.9" xref="S3.E5.m1.9.9.cmml">exp</mi><mo id="S3.E5.m1.10.10.1.1.4.2a" xref="S3.E5.m1.10.10.1.1.4.1.cmml">â¡</mo><mrow id="S3.E5.m1.10.10.1.1.4.2.1" xref="S3.E5.m1.10.10.1.1.4.1.cmml"><mo id="S3.E5.m1.10.10.1.1.4.2.1.1" xref="S3.E5.m1.10.10.1.1.4.1.cmml">(</mo><mfrac id="S3.E5.m1.8.8" xref="S3.E5.m1.8.8.cmml"><mrow id="S3.E5.m1.8.8.4" xref="S3.E5.m1.8.8.4.cmml"><mrow id="S3.E5.m1.8.8.4.6" xref="S3.E5.m1.8.8.4.6.cmml"><mi id="S3.E5.m1.8.8.4.6.2" xref="S3.E5.m1.8.8.4.6.2.cmml">r</mi><mo id="S3.E5.m1.8.8.4.6.1" xref="S3.E5.m1.8.8.4.6.1.cmml">â¢</mo><mrow id="S3.E5.m1.8.8.4.6.3.2" xref="S3.E5.m1.8.8.4.6.3.1.cmml"><mo id="S3.E5.m1.8.8.4.6.3.2.1" xref="S3.E5.m1.8.8.4.6.3.1.cmml">(</mo><mi id="S3.E5.m1.5.5.1.1" xref="S3.E5.m1.5.5.1.1.cmml">y</mi><mo id="S3.E5.m1.8.8.4.6.3.2.2" xref="S3.E5.m1.8.8.4.6.3.1.cmml">,</mo><mi id="S3.E5.m1.6.6.2.2" xref="S3.E5.m1.6.6.2.2.cmml">x</mi><mo id="S3.E5.m1.8.8.4.6.3.2.3" xref="S3.E5.m1.8.8.4.6.3.1.cmml">)</mo></mrow></mrow><mo id="S3.E5.m1.8.8.4.5" xref="S3.E5.m1.8.8.4.5.cmml">âˆ’</mo><mrow id="S3.E5.m1.8.8.4.4" xref="S3.E5.m1.8.8.4.4.cmml"><mi id="S3.E5.m1.8.8.4.4.3" xref="S3.E5.m1.8.8.4.4.3.cmml">r</mi><mo id="S3.E5.m1.8.8.4.4.2" xref="S3.E5.m1.8.8.4.4.2.cmml">â¢</mo><mrow id="S3.E5.m1.8.8.4.4.1.1" xref="S3.E5.m1.8.8.4.4.1.2.cmml"><mo id="S3.E5.m1.8.8.4.4.1.1.2" xref="S3.E5.m1.8.8.4.4.1.2.cmml">(</mo><msup id="S3.E5.m1.8.8.4.4.1.1.1" xref="S3.E5.m1.8.8.4.4.1.1.1.cmml"><mi id="S3.E5.m1.8.8.4.4.1.1.1.2" xref="S3.E5.m1.8.8.4.4.1.1.1.2.cmml">y</mi><mi id="S3.E5.m1.8.8.4.4.1.1.1.3" xref="S3.E5.m1.8.8.4.4.1.1.1.3.cmml">t</mi></msup><mo id="S3.E5.m1.8.8.4.4.1.1.3" xref="S3.E5.m1.8.8.4.4.1.2.cmml">,</mo><mi id="S3.E5.m1.7.7.3.3" xref="S3.E5.m1.7.7.3.3.cmml">x</mi><mo id="S3.E5.m1.8.8.4.4.1.1.4" xref="S3.E5.m1.8.8.4.4.1.2.cmml">)</mo></mrow></mrow></mrow><mi id="S3.E5.m1.8.8.6" xref="S3.E5.m1.8.8.6.cmml">Î²</mi></mfrac><mo id="S3.E5.m1.10.10.1.1.4.2.1.2" xref="S3.E5.m1.10.10.1.1.4.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E5.m1.10.10.1.2" lspace="0em" xref="S3.E5.m1.10.10.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E5.m1.10b"><apply id="S3.E5.m1.10.10.1.1.cmml" xref="S3.E5.m1.10.10.1"><and id="S3.E5.m1.10.10.1.1a.cmml" xref="S3.E5.m1.10.10.1"></and><apply id="S3.E5.m1.10.10.1.1b.cmml" xref="S3.E5.m1.10.10.1"><eq id="S3.E5.m1.10.10.1.1.2.cmml" xref="S3.E5.m1.10.10.1.1.2"></eq><apply id="S3.E5.m1.2.2.cmml" xref="S3.E5.m1.2.2"><divide id="S3.E5.m1.2.2.3.cmml" xref="S3.E5.m1.2.2"></divide><apply id="S3.E5.m1.1.1.1.cmml" xref="S3.E5.m1.1.1.1"><times id="S3.E5.m1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.2"></times><apply id="S3.E5.m1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.1.3.1.cmml" xref="S3.E5.m1.1.1.1.3">subscript</csymbol><ci id="S3.E5.m1.1.1.1.3.2.cmml" xref="S3.E5.m1.1.1.1.3.2">ğœ‹</ci><ci id="S3.E5.m1.1.1.1.3.3.cmml" xref="S3.E5.m1.1.1.1.3.3">ğ›½</ci></apply><apply id="S3.E5.m1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E5.m1.1.1.1.1.1.1.1.cmml" xref="S3.E5.m1.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E5.m1.1.1.1.1.1.1.2.cmml" xref="S3.E5.m1.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E5.m1.1.1.1.1.1.1.3.cmml" xref="S3.E5.m1.1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="S3.E5.m1.2.2.2.cmml" xref="S3.E5.m1.2.2.2"><times id="S3.E5.m1.2.2.2.2.cmml" xref="S3.E5.m1.2.2.2.2"></times><apply id="S3.E5.m1.2.2.2.3.cmml" xref="S3.E5.m1.2.2.2.3"><csymbol cd="ambiguous" id="S3.E5.m1.2.2.2.3.1.cmml" xref="S3.E5.m1.2.2.2.3">subscript</csymbol><ci id="S3.E5.m1.2.2.2.3.2.cmml" xref="S3.E5.m1.2.2.2.3.2">ğœ‹</ci><ci id="S3.E5.m1.2.2.2.3.3.cmml" xref="S3.E5.m1.2.2.2.3.3">ğ›½</ci></apply><apply id="S3.E5.m1.2.2.2.1.1.1.cmml" xref="S3.E5.m1.2.2.2.1.1"><csymbol cd="latexml" id="S3.E5.m1.2.2.2.1.1.1.1.cmml" xref="S3.E5.m1.2.2.2.1.1.1.1">conditional</csymbol><apply id="S3.E5.m1.2.2.2.1.1.1.2.cmml" xref="S3.E5.m1.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.E5.m1.2.2.2.1.1.1.2.1.cmml" xref="S3.E5.m1.2.2.2.1.1.1.2">superscript</csymbol><ci id="S3.E5.m1.2.2.2.1.1.1.2.2.cmml" xref="S3.E5.m1.2.2.2.1.1.1.2.2">ğ‘¦</ci><ci id="S3.E5.m1.2.2.2.1.1.1.2.3.cmml" xref="S3.E5.m1.2.2.2.1.1.1.2.3">ğ‘¡</ci></apply><ci id="S3.E5.m1.2.2.2.1.1.1.3.cmml" xref="S3.E5.m1.2.2.2.1.1.1.3">ğ‘¥</ci></apply></apply></apply><apply id="S3.E5.m1.4.4.cmml" xref="S3.E5.m1.4.4"><divide id="S3.E5.m1.4.4.3.cmml" xref="S3.E5.m1.4.4"></divide><apply id="S3.E5.m1.3.3.1.cmml" xref="S3.E5.m1.3.3.1"><times id="S3.E5.m1.3.3.1.2.cmml" xref="S3.E5.m1.3.3.1.2"></times><apply id="S3.E5.m1.3.3.1.3.cmml" xref="S3.E5.m1.3.3.1.3"><csymbol cd="ambiguous" id="S3.E5.m1.3.3.1.3.1.cmml" xref="S3.E5.m1.3.3.1.3">subscript</csymbol><apply id="S3.E5.m1.3.3.1.3.2.cmml" xref="S3.E5.m1.3.3.1.3.2"><ci id="S3.E5.m1.3.3.1.3.2.1.cmml" xref="S3.E5.m1.3.3.1.3.2.1">~</ci><ci id="S3.E5.m1.3.3.1.3.2.2.cmml" xref="S3.E5.m1.3.3.1.3.2.2">ğœ‹</ci></apply><ci id="S3.E5.m1.3.3.1.3.3.cmml" xref="S3.E5.m1.3.3.1.3.3">ğ›½</ci></apply><apply id="S3.E5.m1.3.3.1.1.1.1.cmml" xref="S3.E5.m1.3.3.1.1.1"><csymbol cd="latexml" id="S3.E5.m1.3.3.1.1.1.1.1.cmml" xref="S3.E5.m1.3.3.1.1.1.1.1">conditional</csymbol><ci id="S3.E5.m1.3.3.1.1.1.1.2.cmml" xref="S3.E5.m1.3.3.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E5.m1.3.3.1.1.1.1.3.cmml" xref="S3.E5.m1.3.3.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="S3.E5.m1.4.4.2.cmml" xref="S3.E5.m1.4.4.2"><times id="S3.E5.m1.4.4.2.2.cmml" xref="S3.E5.m1.4.4.2.2"></times><apply id="S3.E5.m1.4.4.2.3.cmml" xref="S3.E5.m1.4.4.2.3"><csymbol cd="ambiguous" id="S3.E5.m1.4.4.2.3.1.cmml" xref="S3.E5.m1.4.4.2.3">subscript</csymbol><apply id="S3.E5.m1.4.4.2.3.2.cmml" xref="S3.E5.m1.4.4.2.3.2"><ci id="S3.E5.m1.4.4.2.3.2.1.cmml" xref="S3.E5.m1.4.4.2.3.2.1">~</ci><ci id="S3.E5.m1.4.4.2.3.2.2.cmml" xref="S3.E5.m1.4.4.2.3.2.2">ğœ‹</ci></apply><ci id="S3.E5.m1.4.4.2.3.3.cmml" xref="S3.E5.m1.4.4.2.3.3">ğ›½</ci></apply><apply id="S3.E5.m1.4.4.2.1.1.1.cmml" xref="S3.E5.m1.4.4.2.1.1"><csymbol cd="latexml" id="S3.E5.m1.4.4.2.1.1.1.1.cmml" xref="S3.E5.m1.4.4.2.1.1.1.1">conditional</csymbol><apply id="S3.E5.m1.4.4.2.1.1.1.2.cmml" xref="S3.E5.m1.4.4.2.1.1.1.2"><csymbol cd="ambiguous" id="S3.E5.m1.4.4.2.1.1.1.2.1.cmml" xref="S3.E5.m1.4.4.2.1.1.1.2">superscript</csymbol><ci id="S3.E5.m1.4.4.2.1.1.1.2.2.cmml" xref="S3.E5.m1.4.4.2.1.1.1.2.2">ğ‘¦</ci><ci id="S3.E5.m1.4.4.2.1.1.1.2.3.cmml" xref="S3.E5.m1.4.4.2.1.1.1.2.3">ğ‘¡</ci></apply><ci id="S3.E5.m1.4.4.2.1.1.1.3.cmml" xref="S3.E5.m1.4.4.2.1.1.1.3">ğ‘¥</ci></apply></apply></apply></apply><apply id="S3.E5.m1.10.10.1.1c.cmml" xref="S3.E5.m1.10.10.1"><eq id="S3.E5.m1.10.10.1.1.3.cmml" xref="S3.E5.m1.10.10.1.1.3"></eq><share href="https://arxiv.org/html/2406.00049v1#S3.E5.m1.4.4.cmml" id="S3.E5.m1.10.10.1.1d.cmml" xref="S3.E5.m1.10.10.1"></share><apply id="S3.E5.m1.10.10.1.1.4.1.cmml" xref="S3.E5.m1.10.10.1.1.4.2"><exp id="S3.E5.m1.9.9.cmml" xref="S3.E5.m1.9.9"></exp><apply id="S3.E5.m1.8.8.cmml" xref="S3.E5.m1.8.8"><divide id="S3.E5.m1.8.8.5.cmml" xref="S3.E5.m1.8.8"></divide><apply id="S3.E5.m1.8.8.4.cmml" xref="S3.E5.m1.8.8.4"><minus id="S3.E5.m1.8.8.4.5.cmml" xref="S3.E5.m1.8.8.4.5"></minus><apply id="S3.E5.m1.8.8.4.6.cmml" xref="S3.E5.m1.8.8.4.6"><times id="S3.E5.m1.8.8.4.6.1.cmml" xref="S3.E5.m1.8.8.4.6.1"></times><ci id="S3.E5.m1.8.8.4.6.2.cmml" xref="S3.E5.m1.8.8.4.6.2">ğ‘Ÿ</ci><interval closure="open" id="S3.E5.m1.8.8.4.6.3.1.cmml" xref="S3.E5.m1.8.8.4.6.3.2"><ci id="S3.E5.m1.5.5.1.1.cmml" xref="S3.E5.m1.5.5.1.1">ğ‘¦</ci><ci id="S3.E5.m1.6.6.2.2.cmml" xref="S3.E5.m1.6.6.2.2">ğ‘¥</ci></interval></apply><apply id="S3.E5.m1.8.8.4.4.cmml" xref="S3.E5.m1.8.8.4.4"><times id="S3.E5.m1.8.8.4.4.2.cmml" xref="S3.E5.m1.8.8.4.4.2"></times><ci id="S3.E5.m1.8.8.4.4.3.cmml" xref="S3.E5.m1.8.8.4.4.3">ğ‘Ÿ</ci><interval closure="open" id="S3.E5.m1.8.8.4.4.1.2.cmml" xref="S3.E5.m1.8.8.4.4.1.1"><apply id="S3.E5.m1.8.8.4.4.1.1.1.cmml" xref="S3.E5.m1.8.8.4.4.1.1.1"><csymbol cd="ambiguous" id="S3.E5.m1.8.8.4.4.1.1.1.1.cmml" xref="S3.E5.m1.8.8.4.4.1.1.1">superscript</csymbol><ci id="S3.E5.m1.8.8.4.4.1.1.1.2.cmml" xref="S3.E5.m1.8.8.4.4.1.1.1.2">ğ‘¦</ci><ci id="S3.E5.m1.8.8.4.4.1.1.1.3.cmml" xref="S3.E5.m1.8.8.4.4.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.E5.m1.7.7.3.3.cmml" xref="S3.E5.m1.7.7.3.3">ğ‘¥</ci></interval></apply></apply><ci id="S3.E5.m1.8.8.6.cmml" xref="S3.E5.m1.8.8.6">ğ›½</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m1.10c">\frac{{\pi}_{\beta}(y|x)}{{\pi}_{\beta}(y^{t}|x)}=\frac{\tilde{\pi}_{\beta}(y|%
x)}{\tilde{\pi}_{\beta}(y^{t}|x)}=\exp\left(\frac{r\left(y,x\right)-r\left(y^{%
t},x\right)}{\beta}\right).</annotation><annotation encoding="application/x-llamapun" id="S3.E5.m1.10d">divide start_ARG italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x ) end_ARG start_ARG italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_x ) end_ARG = divide start_ARG over~ start_ARG italic_Ï€ end_ARG start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x ) end_ARG start_ARG over~ start_ARG italic_Ï€ end_ARG start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_x ) end_ARG = roman_exp ( divide start_ARG italic_r ( italic_y , italic_x ) - italic_r ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x ) end_ARG start_ARG italic_Î² end_ARG ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS1.p4">
<p class="ltx_p" id="S3.SS1.p4.2">MH converges to the unique stationary distribution <math alttext="\pi_{\beta}(y|x)" class="ltx_Math" display="inline" id="S3.SS1.p4.1.m1.1"><semantics id="S3.SS1.p4.1.m1.1a"><mrow id="S3.SS1.p4.1.m1.1.1" xref="S3.SS1.p4.1.m1.1.1.cmml"><msub id="S3.SS1.p4.1.m1.1.1.3" xref="S3.SS1.p4.1.m1.1.1.3.cmml"><mi id="S3.SS1.p4.1.m1.1.1.3.2" xref="S3.SS1.p4.1.m1.1.1.3.2.cmml">Ï€</mi><mi id="S3.SS1.p4.1.m1.1.1.3.3" xref="S3.SS1.p4.1.m1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.SS1.p4.1.m1.1.1.2" xref="S3.SS1.p4.1.m1.1.1.2.cmml">â¢</mo><mrow id="S3.SS1.p4.1.m1.1.1.1.1" xref="S3.SS1.p4.1.m1.1.1.1.1.1.cmml"><mo id="S3.SS1.p4.1.m1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p4.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS1.p4.1.m1.1.1.1.1.1" xref="S3.SS1.p4.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS1.p4.1.m1.1.1.1.1.1.2" xref="S3.SS1.p4.1.m1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS1.p4.1.m1.1.1.1.1.1.1" xref="S3.SS1.p4.1.m1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS1.p4.1.m1.1.1.1.1.1.3" xref="S3.SS1.p4.1.m1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.SS1.p4.1.m1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p4.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.1.m1.1b"><apply id="S3.SS1.p4.1.m1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1"><times id="S3.SS1.p4.1.m1.1.1.2.cmml" xref="S3.SS1.p4.1.m1.1.1.2"></times><apply id="S3.SS1.p4.1.m1.1.1.3.cmml" xref="S3.SS1.p4.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p4.1.m1.1.1.3.1.cmml" xref="S3.SS1.p4.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS1.p4.1.m1.1.1.3.2.cmml" xref="S3.SS1.p4.1.m1.1.1.3.2">ğœ‹</ci><ci id="S3.SS1.p4.1.m1.1.1.3.3.cmml" xref="S3.SS1.p4.1.m1.1.1.3.3">ğ›½</ci></apply><apply id="S3.SS1.p4.1.m1.1.1.1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p4.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS1.p4.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS1.p4.1.m1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p4.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS1.p4.1.m1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.1.m1.1c">\pi_{\beta}(y|x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.1.m1.1d">italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x )</annotation></semantics></math>, regardless of the initial distribution we start with, if the transition distribution of the Markov chain, <span class="ltx_text ltx_font_italic" id="S3.SS1.p4.2.1">i.e.</span>, <math alttext="p(y^{t}|y^{t-1},x)=q(y^{t}|y^{t-1},x)\alpha(y^{t},y^{t-1})" class="ltx_Math" display="inline" id="S3.SS1.p4.2.m2.6"><semantics id="S3.SS1.p4.2.m2.6a"><mrow id="S3.SS1.p4.2.m2.6.6" xref="S3.SS1.p4.2.m2.6.6.cmml"><mrow id="S3.SS1.p4.2.m2.3.3.1" xref="S3.SS1.p4.2.m2.3.3.1.cmml"><mi id="S3.SS1.p4.2.m2.3.3.1.3" xref="S3.SS1.p4.2.m2.3.3.1.3.cmml">p</mi><mo id="S3.SS1.p4.2.m2.3.3.1.2" xref="S3.SS1.p4.2.m2.3.3.1.2.cmml">â¢</mo><mrow id="S3.SS1.p4.2.m2.3.3.1.1.1" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.cmml"><mo id="S3.SS1.p4.2.m2.3.3.1.1.1.2" stretchy="false" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.cmml">(</mo><mrow id="S3.SS1.p4.2.m2.3.3.1.1.1.1" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.cmml"><msup id="S3.SS1.p4.2.m2.3.3.1.1.1.1.3" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.cmml"><mi id="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.2" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.2.cmml">y</mi><mi id="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.3" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.3.cmml">t</mi></msup><mo fence="false" id="S3.SS1.p4.2.m2.3.3.1.1.1.1.2" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.2.cmml">|</mo><mrow id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.2.cmml"><msup id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.2" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.cmml"><mi id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.2" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.2.cmml">t</mi><mo id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.1" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.1.cmml">âˆ’</mo><mn id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.3" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.3.cmml">1</mn></mrow></msup><mo id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.2" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.2.cmml">,</mo><mi id="S3.SS1.p4.2.m2.1.1" xref="S3.SS1.p4.2.m2.1.1.cmml">x</mi></mrow></mrow><mo id="S3.SS1.p4.2.m2.3.3.1.1.1.3" stretchy="false" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS1.p4.2.m2.6.6.5" xref="S3.SS1.p4.2.m2.6.6.5.cmml">=</mo><mrow id="S3.SS1.p4.2.m2.6.6.4" xref="S3.SS1.p4.2.m2.6.6.4.cmml"><mi id="S3.SS1.p4.2.m2.6.6.4.5" xref="S3.SS1.p4.2.m2.6.6.4.5.cmml">q</mi><mo id="S3.SS1.p4.2.m2.6.6.4.4" xref="S3.SS1.p4.2.m2.6.6.4.4.cmml">â¢</mo><mrow id="S3.SS1.p4.2.m2.4.4.2.1.1" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.cmml"><mo id="S3.SS1.p4.2.m2.4.4.2.1.1.2" stretchy="false" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.cmml">(</mo><mrow id="S3.SS1.p4.2.m2.4.4.2.1.1.1" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.cmml"><msup id="S3.SS1.p4.2.m2.4.4.2.1.1.1.3" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.cmml"><mi id="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.2" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.2.cmml">y</mi><mi id="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.3" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.3.cmml">t</mi></msup><mo fence="false" id="S3.SS1.p4.2.m2.4.4.2.1.1.1.2" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.2.cmml">|</mo><mrow id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.2.cmml"><msup id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.2" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.cmml"><mi id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.2" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.2.cmml">t</mi><mo id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.1" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.1.cmml">âˆ’</mo><mn id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.3" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.3.cmml">1</mn></mrow></msup><mo id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.2" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.2.cmml">,</mo><mi id="S3.SS1.p4.2.m2.2.2" xref="S3.SS1.p4.2.m2.2.2.cmml">x</mi></mrow></mrow><mo id="S3.SS1.p4.2.m2.4.4.2.1.1.3" stretchy="false" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.cmml">)</mo></mrow><mo id="S3.SS1.p4.2.m2.6.6.4.4a" xref="S3.SS1.p4.2.m2.6.6.4.4.cmml">â¢</mo><mi id="S3.SS1.p4.2.m2.6.6.4.6" xref="S3.SS1.p4.2.m2.6.6.4.6.cmml">Î±</mi><mo id="S3.SS1.p4.2.m2.6.6.4.4b" xref="S3.SS1.p4.2.m2.6.6.4.4.cmml">â¢</mo><mrow id="S3.SS1.p4.2.m2.6.6.4.3.2" xref="S3.SS1.p4.2.m2.6.6.4.3.3.cmml"><mo id="S3.SS1.p4.2.m2.6.6.4.3.2.3" stretchy="false" xref="S3.SS1.p4.2.m2.6.6.4.3.3.cmml">(</mo><msup id="S3.SS1.p4.2.m2.5.5.3.2.1.1" xref="S3.SS1.p4.2.m2.5.5.3.2.1.1.cmml"><mi id="S3.SS1.p4.2.m2.5.5.3.2.1.1.2" xref="S3.SS1.p4.2.m2.5.5.3.2.1.1.2.cmml">y</mi><mi id="S3.SS1.p4.2.m2.5.5.3.2.1.1.3" xref="S3.SS1.p4.2.m2.5.5.3.2.1.1.3.cmml">t</mi></msup><mo id="S3.SS1.p4.2.m2.6.6.4.3.2.4" xref="S3.SS1.p4.2.m2.6.6.4.3.3.cmml">,</mo><msup id="S3.SS1.p4.2.m2.6.6.4.3.2.2" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.cmml"><mi id="S3.SS1.p4.2.m2.6.6.4.3.2.2.2" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.2.cmml">y</mi><mrow id="S3.SS1.p4.2.m2.6.6.4.3.2.2.3" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.cmml"><mi id="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.2" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.2.cmml">t</mi><mo id="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.1" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.1.cmml">âˆ’</mo><mn id="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.3" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.3.cmml">1</mn></mrow></msup><mo id="S3.SS1.p4.2.m2.6.6.4.3.2.5" stretchy="false" xref="S3.SS1.p4.2.m2.6.6.4.3.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.2.m2.6b"><apply id="S3.SS1.p4.2.m2.6.6.cmml" xref="S3.SS1.p4.2.m2.6.6"><eq id="S3.SS1.p4.2.m2.6.6.5.cmml" xref="S3.SS1.p4.2.m2.6.6.5"></eq><apply id="S3.SS1.p4.2.m2.3.3.1.cmml" xref="S3.SS1.p4.2.m2.3.3.1"><times id="S3.SS1.p4.2.m2.3.3.1.2.cmml" xref="S3.SS1.p4.2.m2.3.3.1.2"></times><ci id="S3.SS1.p4.2.m2.3.3.1.3.cmml" xref="S3.SS1.p4.2.m2.3.3.1.3">ğ‘</ci><apply id="S3.SS1.p4.2.m2.3.3.1.1.1.1.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1"><csymbol cd="latexml" id="S3.SS1.p4.2.m2.3.3.1.1.1.1.2.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.2">conditional</csymbol><apply id="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.1.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.3">superscript</csymbol><ci id="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.2.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.2">ğ‘¦</ci><ci id="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.3.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.3.3">ğ‘¡</ci></apply><list id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.2.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1"><apply id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3"><minus id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.1.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.1"></minus><ci id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.2.cmml" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.2">ğ‘¡</ci><cn id="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.SS1.p4.2.m2.3.3.1.1.1.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.SS1.p4.2.m2.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1">ğ‘¥</ci></list></apply></apply><apply id="S3.SS1.p4.2.m2.6.6.4.cmml" xref="S3.SS1.p4.2.m2.6.6.4"><times id="S3.SS1.p4.2.m2.6.6.4.4.cmml" xref="S3.SS1.p4.2.m2.6.6.4.4"></times><ci id="S3.SS1.p4.2.m2.6.6.4.5.cmml" xref="S3.SS1.p4.2.m2.6.6.4.5">ğ‘</ci><apply id="S3.SS1.p4.2.m2.4.4.2.1.1.1.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1"><csymbol cd="latexml" id="S3.SS1.p4.2.m2.4.4.2.1.1.1.2.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.2">conditional</csymbol><apply id="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.1.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.3">superscript</csymbol><ci id="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.2.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.2">ğ‘¦</ci><ci id="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.3.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.3.3">ğ‘¡</ci></apply><list id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.2.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1"><apply id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3"><minus id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.1.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.1"></minus><ci id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.2.cmml" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.2">ğ‘¡</ci><cn id="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.SS1.p4.2.m2.4.4.2.1.1.1.1.1.1.3.3">1</cn></apply></apply><ci id="S3.SS1.p4.2.m2.2.2.cmml" xref="S3.SS1.p4.2.m2.2.2">ğ‘¥</ci></list></apply><ci id="S3.SS1.p4.2.m2.6.6.4.6.cmml" xref="S3.SS1.p4.2.m2.6.6.4.6">ğ›¼</ci><interval closure="open" id="S3.SS1.p4.2.m2.6.6.4.3.3.cmml" xref="S3.SS1.p4.2.m2.6.6.4.3.2"><apply id="S3.SS1.p4.2.m2.5.5.3.2.1.1.cmml" xref="S3.SS1.p4.2.m2.5.5.3.2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.5.5.3.2.1.1.1.cmml" xref="S3.SS1.p4.2.m2.5.5.3.2.1.1">superscript</csymbol><ci id="S3.SS1.p4.2.m2.5.5.3.2.1.1.2.cmml" xref="S3.SS1.p4.2.m2.5.5.3.2.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p4.2.m2.5.5.3.2.1.1.3.cmml" xref="S3.SS1.p4.2.m2.5.5.3.2.1.1.3">ğ‘¡</ci></apply><apply id="S3.SS1.p4.2.m2.6.6.4.3.2.2.cmml" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2"><csymbol cd="ambiguous" id="S3.SS1.p4.2.m2.6.6.4.3.2.2.1.cmml" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2">superscript</csymbol><ci id="S3.SS1.p4.2.m2.6.6.4.3.2.2.2.cmml" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.2">ğ‘¦</ci><apply id="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.cmml" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.3"><minus id="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.1.cmml" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.1"></minus><ci id="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.2.cmml" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.2">ğ‘¡</ci><cn id="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.3.cmml" type="integer" xref="S3.SS1.p4.2.m2.6.6.4.3.2.2.3.3">1</cn></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.2.m2.6c">p(y^{t}|y^{t-1},x)=q(y^{t}|y^{t-1},x)\alpha(y^{t},y^{t-1})</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p4.2.m2.6d">italic_p ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT , italic_x ) = italic_q ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT , italic_x ) italic_Î± ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_y start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT )</annotation></semantics></math> satisfies the <span class="ltx_text ltx_font_italic" id="S3.SS1.p4.2.2">Markov chain ergodic theorem</span> <cite class="ltx_cite ltx_citemacro_citep">(Neal, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib47" title="">2011</a>)</cite>.</p>
</div>
<div class="ltx_para" id="S3.SS1.p5">
<p class="ltx_p" id="S3.SS1.p5.1">This requires a suitable proposal distribution <math alttext="q(y|y^{t},x)" class="ltx_Math" display="inline" id="S3.SS1.p5.1.m1.2"><semantics id="S3.SS1.p5.1.m1.2a"><mrow id="S3.SS1.p5.1.m1.2.2" xref="S3.SS1.p5.1.m1.2.2.cmml"><mi id="S3.SS1.p5.1.m1.2.2.3" xref="S3.SS1.p5.1.m1.2.2.3.cmml">q</mi><mo id="S3.SS1.p5.1.m1.2.2.2" xref="S3.SS1.p5.1.m1.2.2.2.cmml">â¢</mo><mrow id="S3.SS1.p5.1.m1.2.2.1.1" xref="S3.SS1.p5.1.m1.2.2.1.1.1.cmml"><mo id="S3.SS1.p5.1.m1.2.2.1.1.2" stretchy="false" xref="S3.SS1.p5.1.m1.2.2.1.1.1.cmml">(</mo><mrow id="S3.SS1.p5.1.m1.2.2.1.1.1" xref="S3.SS1.p5.1.m1.2.2.1.1.1.cmml"><mi id="S3.SS1.p5.1.m1.2.2.1.1.1.3" xref="S3.SS1.p5.1.m1.2.2.1.1.1.3.cmml">y</mi><mo fence="false" id="S3.SS1.p5.1.m1.2.2.1.1.1.2" xref="S3.SS1.p5.1.m1.2.2.1.1.1.2.cmml">|</mo><mrow id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.2.cmml"><msup id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.2" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.2.cmml">y</mi><mi id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.3" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.2" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.2.cmml">,</mo><mi id="S3.SS1.p5.1.m1.1.1" xref="S3.SS1.p5.1.m1.1.1.cmml">x</mi></mrow></mrow><mo id="S3.SS1.p5.1.m1.2.2.1.1.3" stretchy="false" xref="S3.SS1.p5.1.m1.2.2.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.1.m1.2b"><apply id="S3.SS1.p5.1.m1.2.2.cmml" xref="S3.SS1.p5.1.m1.2.2"><times id="S3.SS1.p5.1.m1.2.2.2.cmml" xref="S3.SS1.p5.1.m1.2.2.2"></times><ci id="S3.SS1.p5.1.m1.2.2.3.cmml" xref="S3.SS1.p5.1.m1.2.2.3">ğ‘</ci><apply id="S3.SS1.p5.1.m1.2.2.1.1.1.cmml" xref="S3.SS1.p5.1.m1.2.2.1.1"><csymbol cd="latexml" id="S3.SS1.p5.1.m1.2.2.1.1.1.2.cmml" xref="S3.SS1.p5.1.m1.2.2.1.1.1.2">conditional</csymbol><ci id="S3.SS1.p5.1.m1.2.2.1.1.1.3.cmml" xref="S3.SS1.p5.1.m1.2.2.1.1.1.3">ğ‘¦</ci><list id="S3.SS1.p5.1.m1.2.2.1.1.1.1.2.cmml" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.1"><apply id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p5.1.m1.2.2.1.1.1.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.SS1.p5.1.m1.1.1.cmml" xref="S3.SS1.p5.1.m1.1.1">ğ‘¥</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.1.m1.2c">q(y|y^{t},x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.1.m1.2d">italic_q ( italic_y | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x )</annotation></semantics></math> which must be <span class="ltx_text ltx_font_bold" id="S3.SS1.p5.1.1">irreducible</span> and <span class="ltx_text ltx_font_bold" id="S3.SS1.p5.1.2">aperiodic</span>. To ensure irreducibility, the proposal distribution should have sufficient support, such that it is possible to transition from any state to any other state with a nonzero probability in a finite number of steps. Aperiodicity ensures that the Markov chain does not get stuck in a cyclic behavior, where it keeps returning to the same states in a fixed pattern.
Additionally, due to the acceptance criterion defined in Eq. <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E4" title="In 3.1 Metropolis-Hastings â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">4</span></a>, the transition distribution satisfies the detailed balance condition:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E6">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="{\pi}_{\beta}\left(y|x\right)p\left(y^{t}|y,x\right)={{\pi}_{\beta}\left(y^{t}%
|x\right)p\left(y|y^{t},x\right)}." class="ltx_Math" display="block" id="S3.E6.m1.4"><semantics id="S3.E6.m1.4a"><mrow id="S3.E6.m1.4.4.1" xref="S3.E6.m1.4.4.1.1.cmml"><mrow id="S3.E6.m1.4.4.1.1" xref="S3.E6.m1.4.4.1.1.cmml"><mrow id="S3.E6.m1.4.4.1.1.2" xref="S3.E6.m1.4.4.1.1.2.cmml"><msub id="S3.E6.m1.4.4.1.1.2.4" xref="S3.E6.m1.4.4.1.1.2.4.cmml"><mi id="S3.E6.m1.4.4.1.1.2.4.2" xref="S3.E6.m1.4.4.1.1.2.4.2.cmml">Ï€</mi><mi id="S3.E6.m1.4.4.1.1.2.4.3" xref="S3.E6.m1.4.4.1.1.2.4.3.cmml">Î²</mi></msub><mo id="S3.E6.m1.4.4.1.1.2.3" xref="S3.E6.m1.4.4.1.1.2.3.cmml">â¢</mo><mrow id="S3.E6.m1.4.4.1.1.1.1.1" xref="S3.E6.m1.4.4.1.1.1.1.1.1.cmml"><mo id="S3.E6.m1.4.4.1.1.1.1.1.2" xref="S3.E6.m1.4.4.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E6.m1.4.4.1.1.1.1.1.1" xref="S3.E6.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S3.E6.m1.4.4.1.1.1.1.1.1.2" xref="S3.E6.m1.4.4.1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E6.m1.4.4.1.1.1.1.1.1.1" xref="S3.E6.m1.4.4.1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.E6.m1.4.4.1.1.1.1.1.1.3" xref="S3.E6.m1.4.4.1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E6.m1.4.4.1.1.1.1.1.3" xref="S3.E6.m1.4.4.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="S3.E6.m1.4.4.1.1.2.3a" xref="S3.E6.m1.4.4.1.1.2.3.cmml">â¢</mo><mi id="S3.E6.m1.4.4.1.1.2.5" xref="S3.E6.m1.4.4.1.1.2.5.cmml">p</mi><mo id="S3.E6.m1.4.4.1.1.2.3b" xref="S3.E6.m1.4.4.1.1.2.3.cmml">â¢</mo><mrow id="S3.E6.m1.4.4.1.1.2.2.1" xref="S3.E6.m1.4.4.1.1.2.2.1.1.cmml"><mo id="S3.E6.m1.4.4.1.1.2.2.1.2" xref="S3.E6.m1.4.4.1.1.2.2.1.1.cmml">(</mo><mrow id="S3.E6.m1.4.4.1.1.2.2.1.1" xref="S3.E6.m1.4.4.1.1.2.2.1.1.cmml"><msup id="S3.E6.m1.4.4.1.1.2.2.1.1.2" xref="S3.E6.m1.4.4.1.1.2.2.1.1.2.cmml"><mi id="S3.E6.m1.4.4.1.1.2.2.1.1.2.2" xref="S3.E6.m1.4.4.1.1.2.2.1.1.2.2.cmml">y</mi><mi id="S3.E6.m1.4.4.1.1.2.2.1.1.2.3" xref="S3.E6.m1.4.4.1.1.2.2.1.1.2.3.cmml">t</mi></msup><mo fence="false" id="S3.E6.m1.4.4.1.1.2.2.1.1.1" xref="S3.E6.m1.4.4.1.1.2.2.1.1.1.cmml">|</mo><mrow id="S3.E6.m1.4.4.1.1.2.2.1.1.3.2" xref="S3.E6.m1.4.4.1.1.2.2.1.1.3.1.cmml"><mi id="S3.E6.m1.1.1" xref="S3.E6.m1.1.1.cmml">y</mi><mo id="S3.E6.m1.4.4.1.1.2.2.1.1.3.2.1" xref="S3.E6.m1.4.4.1.1.2.2.1.1.3.1.cmml">,</mo><mi id="S3.E6.m1.2.2" xref="S3.E6.m1.2.2.cmml">x</mi></mrow></mrow><mo id="S3.E6.m1.4.4.1.1.2.2.1.3" xref="S3.E6.m1.4.4.1.1.2.2.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E6.m1.4.4.1.1.5" xref="S3.E6.m1.4.4.1.1.5.cmml">=</mo><mrow id="S3.E6.m1.4.4.1.1.4" xref="S3.E6.m1.4.4.1.1.4.cmml"><msub id="S3.E6.m1.4.4.1.1.4.4" xref="S3.E6.m1.4.4.1.1.4.4.cmml"><mi id="S3.E6.m1.4.4.1.1.4.4.2" xref="S3.E6.m1.4.4.1.1.4.4.2.cmml">Ï€</mi><mi id="S3.E6.m1.4.4.1.1.4.4.3" xref="S3.E6.m1.4.4.1.1.4.4.3.cmml">Î²</mi></msub><mo id="S3.E6.m1.4.4.1.1.4.3" xref="S3.E6.m1.4.4.1.1.4.3.cmml">â¢</mo><mrow id="S3.E6.m1.4.4.1.1.3.1.1" xref="S3.E6.m1.4.4.1.1.3.1.1.1.cmml"><mo id="S3.E6.m1.4.4.1.1.3.1.1.2" xref="S3.E6.m1.4.4.1.1.3.1.1.1.cmml">(</mo><mrow id="S3.E6.m1.4.4.1.1.3.1.1.1" xref="S3.E6.m1.4.4.1.1.3.1.1.1.cmml"><msup id="S3.E6.m1.4.4.1.1.3.1.1.1.2" xref="S3.E6.m1.4.4.1.1.3.1.1.1.2.cmml"><mi id="S3.E6.m1.4.4.1.1.3.1.1.1.2.2" xref="S3.E6.m1.4.4.1.1.3.1.1.1.2.2.cmml">y</mi><mi id="S3.E6.m1.4.4.1.1.3.1.1.1.2.3" xref="S3.E6.m1.4.4.1.1.3.1.1.1.2.3.cmml">t</mi></msup><mo fence="false" id="S3.E6.m1.4.4.1.1.3.1.1.1.1" xref="S3.E6.m1.4.4.1.1.3.1.1.1.1.cmml">|</mo><mi id="S3.E6.m1.4.4.1.1.3.1.1.1.3" xref="S3.E6.m1.4.4.1.1.3.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E6.m1.4.4.1.1.3.1.1.3" xref="S3.E6.m1.4.4.1.1.3.1.1.1.cmml">)</mo></mrow><mo id="S3.E6.m1.4.4.1.1.4.3a" xref="S3.E6.m1.4.4.1.1.4.3.cmml">â¢</mo><mi id="S3.E6.m1.4.4.1.1.4.5" xref="S3.E6.m1.4.4.1.1.4.5.cmml">p</mi><mo id="S3.E6.m1.4.4.1.1.4.3b" xref="S3.E6.m1.4.4.1.1.4.3.cmml">â¢</mo><mrow id="S3.E6.m1.4.4.1.1.4.2.1" xref="S3.E6.m1.4.4.1.1.4.2.1.1.cmml"><mo id="S3.E6.m1.4.4.1.1.4.2.1.2" xref="S3.E6.m1.4.4.1.1.4.2.1.1.cmml">(</mo><mrow id="S3.E6.m1.4.4.1.1.4.2.1.1" xref="S3.E6.m1.4.4.1.1.4.2.1.1.cmml"><mi id="S3.E6.m1.4.4.1.1.4.2.1.1.3" xref="S3.E6.m1.4.4.1.1.4.2.1.1.3.cmml">y</mi><mo fence="false" id="S3.E6.m1.4.4.1.1.4.2.1.1.2" xref="S3.E6.m1.4.4.1.1.4.2.1.1.2.cmml">|</mo><mrow id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.2.cmml"><msup id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.cmml"><mi id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.2" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.2.cmml">y</mi><mi id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.3" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.2" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.2.cmml">,</mo><mi id="S3.E6.m1.3.3" xref="S3.E6.m1.3.3.cmml">x</mi></mrow></mrow><mo id="S3.E6.m1.4.4.1.1.4.2.1.3" xref="S3.E6.m1.4.4.1.1.4.2.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E6.m1.4.4.1.2" lspace="0em" xref="S3.E6.m1.4.4.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E6.m1.4b"><apply id="S3.E6.m1.4.4.1.1.cmml" xref="S3.E6.m1.4.4.1"><eq id="S3.E6.m1.4.4.1.1.5.cmml" xref="S3.E6.m1.4.4.1.1.5"></eq><apply id="S3.E6.m1.4.4.1.1.2.cmml" xref="S3.E6.m1.4.4.1.1.2"><times id="S3.E6.m1.4.4.1.1.2.3.cmml" xref="S3.E6.m1.4.4.1.1.2.3"></times><apply id="S3.E6.m1.4.4.1.1.2.4.cmml" xref="S3.E6.m1.4.4.1.1.2.4"><csymbol cd="ambiguous" id="S3.E6.m1.4.4.1.1.2.4.1.cmml" xref="S3.E6.m1.4.4.1.1.2.4">subscript</csymbol><ci id="S3.E6.m1.4.4.1.1.2.4.2.cmml" xref="S3.E6.m1.4.4.1.1.2.4.2">ğœ‹</ci><ci id="S3.E6.m1.4.4.1.1.2.4.3.cmml" xref="S3.E6.m1.4.4.1.1.2.4.3">ğ›½</ci></apply><apply id="S3.E6.m1.4.4.1.1.1.1.1.1.cmml" xref="S3.E6.m1.4.4.1.1.1.1.1"><csymbol cd="latexml" id="S3.E6.m1.4.4.1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.4.4.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E6.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S3.E6.m1.4.4.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E6.m1.4.4.1.1.1.1.1.1.3.cmml" xref="S3.E6.m1.4.4.1.1.1.1.1.1.3">ğ‘¥</ci></apply><ci id="S3.E6.m1.4.4.1.1.2.5.cmml" xref="S3.E6.m1.4.4.1.1.2.5">ğ‘</ci><apply id="S3.E6.m1.4.4.1.1.2.2.1.1.cmml" xref="S3.E6.m1.4.4.1.1.2.2.1"><csymbol cd="latexml" id="S3.E6.m1.4.4.1.1.2.2.1.1.1.cmml" xref="S3.E6.m1.4.4.1.1.2.2.1.1.1">conditional</csymbol><apply id="S3.E6.m1.4.4.1.1.2.2.1.1.2.cmml" xref="S3.E6.m1.4.4.1.1.2.2.1.1.2"><csymbol cd="ambiguous" id="S3.E6.m1.4.4.1.1.2.2.1.1.2.1.cmml" xref="S3.E6.m1.4.4.1.1.2.2.1.1.2">superscript</csymbol><ci id="S3.E6.m1.4.4.1.1.2.2.1.1.2.2.cmml" xref="S3.E6.m1.4.4.1.1.2.2.1.1.2.2">ğ‘¦</ci><ci id="S3.E6.m1.4.4.1.1.2.2.1.1.2.3.cmml" xref="S3.E6.m1.4.4.1.1.2.2.1.1.2.3">ğ‘¡</ci></apply><list id="S3.E6.m1.4.4.1.1.2.2.1.1.3.1.cmml" xref="S3.E6.m1.4.4.1.1.2.2.1.1.3.2"><ci id="S3.E6.m1.1.1.cmml" xref="S3.E6.m1.1.1">ğ‘¦</ci><ci id="S3.E6.m1.2.2.cmml" xref="S3.E6.m1.2.2">ğ‘¥</ci></list></apply></apply><apply id="S3.E6.m1.4.4.1.1.4.cmml" xref="S3.E6.m1.4.4.1.1.4"><times id="S3.E6.m1.4.4.1.1.4.3.cmml" xref="S3.E6.m1.4.4.1.1.4.3"></times><apply id="S3.E6.m1.4.4.1.1.4.4.cmml" xref="S3.E6.m1.4.4.1.1.4.4"><csymbol cd="ambiguous" id="S3.E6.m1.4.4.1.1.4.4.1.cmml" xref="S3.E6.m1.4.4.1.1.4.4">subscript</csymbol><ci id="S3.E6.m1.4.4.1.1.4.4.2.cmml" xref="S3.E6.m1.4.4.1.1.4.4.2">ğœ‹</ci><ci id="S3.E6.m1.4.4.1.1.4.4.3.cmml" xref="S3.E6.m1.4.4.1.1.4.4.3">ğ›½</ci></apply><apply id="S3.E6.m1.4.4.1.1.3.1.1.1.cmml" xref="S3.E6.m1.4.4.1.1.3.1.1"><csymbol cd="latexml" id="S3.E6.m1.4.4.1.1.3.1.1.1.1.cmml" xref="S3.E6.m1.4.4.1.1.3.1.1.1.1">conditional</csymbol><apply id="S3.E6.m1.4.4.1.1.3.1.1.1.2.cmml" xref="S3.E6.m1.4.4.1.1.3.1.1.1.2"><csymbol cd="ambiguous" id="S3.E6.m1.4.4.1.1.3.1.1.1.2.1.cmml" xref="S3.E6.m1.4.4.1.1.3.1.1.1.2">superscript</csymbol><ci id="S3.E6.m1.4.4.1.1.3.1.1.1.2.2.cmml" xref="S3.E6.m1.4.4.1.1.3.1.1.1.2.2">ğ‘¦</ci><ci id="S3.E6.m1.4.4.1.1.3.1.1.1.2.3.cmml" xref="S3.E6.m1.4.4.1.1.3.1.1.1.2.3">ğ‘¡</ci></apply><ci id="S3.E6.m1.4.4.1.1.3.1.1.1.3.cmml" xref="S3.E6.m1.4.4.1.1.3.1.1.1.3">ğ‘¥</ci></apply><ci id="S3.E6.m1.4.4.1.1.4.5.cmml" xref="S3.E6.m1.4.4.1.1.4.5">ğ‘</ci><apply id="S3.E6.m1.4.4.1.1.4.2.1.1.cmml" xref="S3.E6.m1.4.4.1.1.4.2.1"><csymbol cd="latexml" id="S3.E6.m1.4.4.1.1.4.2.1.1.2.cmml" xref="S3.E6.m1.4.4.1.1.4.2.1.1.2">conditional</csymbol><ci id="S3.E6.m1.4.4.1.1.4.2.1.1.3.cmml" xref="S3.E6.m1.4.4.1.1.4.2.1.1.3">ğ‘¦</ci><list id="S3.E6.m1.4.4.1.1.4.2.1.1.1.2.cmml" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.1"><apply id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.cmml" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.1.cmml" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1">superscript</csymbol><ci id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.2.cmml" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.3.cmml" xref="S3.E6.m1.4.4.1.1.4.2.1.1.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.E6.m1.3.3.cmml" xref="S3.E6.m1.3.3">ğ‘¥</ci></list></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E6.m1.4c">{\pi}_{\beta}\left(y|x\right)p\left(y^{t}|y,x\right)={{\pi}_{\beta}\left(y^{t}%
|x\right)p\left(y|y^{t},x\right)}.</annotation><annotation encoding="application/x-llamapun" id="S3.E6.m1.4d">italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x ) italic_p ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_y , italic_x ) = italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_x ) italic_p ( italic_y | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p5.2">It is trivial to show that the chain has the target distribution, <math alttext="\pi_{\beta}(y|x)" class="ltx_Math" display="inline" id="S3.SS1.p5.2.m1.1"><semantics id="S3.SS1.p5.2.m1.1a"><mrow id="S3.SS1.p5.2.m1.1.1" xref="S3.SS1.p5.2.m1.1.1.cmml"><msub id="S3.SS1.p5.2.m1.1.1.3" xref="S3.SS1.p5.2.m1.1.1.3.cmml"><mi id="S3.SS1.p5.2.m1.1.1.3.2" xref="S3.SS1.p5.2.m1.1.1.3.2.cmml">Ï€</mi><mi id="S3.SS1.p5.2.m1.1.1.3.3" xref="S3.SS1.p5.2.m1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.SS1.p5.2.m1.1.1.2" xref="S3.SS1.p5.2.m1.1.1.2.cmml">â¢</mo><mrow id="S3.SS1.p5.2.m1.1.1.1.1" xref="S3.SS1.p5.2.m1.1.1.1.1.1.cmml"><mo id="S3.SS1.p5.2.m1.1.1.1.1.2" stretchy="false" xref="S3.SS1.p5.2.m1.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS1.p5.2.m1.1.1.1.1.1" xref="S3.SS1.p5.2.m1.1.1.1.1.1.cmml"><mi id="S3.SS1.p5.2.m1.1.1.1.1.1.2" xref="S3.SS1.p5.2.m1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS1.p5.2.m1.1.1.1.1.1.1" xref="S3.SS1.p5.2.m1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS1.p5.2.m1.1.1.1.1.1.3" xref="S3.SS1.p5.2.m1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.SS1.p5.2.m1.1.1.1.1.3" stretchy="false" xref="S3.SS1.p5.2.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.2.m1.1b"><apply id="S3.SS1.p5.2.m1.1.1.cmml" xref="S3.SS1.p5.2.m1.1.1"><times id="S3.SS1.p5.2.m1.1.1.2.cmml" xref="S3.SS1.p5.2.m1.1.1.2"></times><apply id="S3.SS1.p5.2.m1.1.1.3.cmml" xref="S3.SS1.p5.2.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p5.2.m1.1.1.3.1.cmml" xref="S3.SS1.p5.2.m1.1.1.3">subscript</csymbol><ci id="S3.SS1.p5.2.m1.1.1.3.2.cmml" xref="S3.SS1.p5.2.m1.1.1.3.2">ğœ‹</ci><ci id="S3.SS1.p5.2.m1.1.1.3.3.cmml" xref="S3.SS1.p5.2.m1.1.1.3.3">ğ›½</ci></apply><apply id="S3.SS1.p5.2.m1.1.1.1.1.1.cmml" xref="S3.SS1.p5.2.m1.1.1.1.1"><csymbol cd="latexml" id="S3.SS1.p5.2.m1.1.1.1.1.1.1.cmml" xref="S3.SS1.p5.2.m1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS1.p5.2.m1.1.1.1.1.1.2.cmml" xref="S3.SS1.p5.2.m1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p5.2.m1.1.1.1.1.1.3.cmml" xref="S3.SS1.p5.2.m1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.2.m1.1c">\pi_{\beta}(y|x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.2.m1.1d">italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x )</annotation></semantics></math> as its stationary distribution:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E7">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\pi_{\beta}(y|x)=\sum_{y^{\prime}\in\mathcal{Y}}p(y|y^{\prime},x)\pi_{\beta}(y%
^{\prime}|x)." class="ltx_Math" display="block" id="S3.E7.m1.2"><semantics id="S3.E7.m1.2a"><mrow id="S3.E7.m1.2.2.1" xref="S3.E7.m1.2.2.1.1.cmml"><mrow id="S3.E7.m1.2.2.1.1" xref="S3.E7.m1.2.2.1.1.cmml"><mrow id="S3.E7.m1.2.2.1.1.1" xref="S3.E7.m1.2.2.1.1.1.cmml"><msub id="S3.E7.m1.2.2.1.1.1.3" xref="S3.E7.m1.2.2.1.1.1.3.cmml"><mi id="S3.E7.m1.2.2.1.1.1.3.2" xref="S3.E7.m1.2.2.1.1.1.3.2.cmml">Ï€</mi><mi id="S3.E7.m1.2.2.1.1.1.3.3" xref="S3.E7.m1.2.2.1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.E7.m1.2.2.1.1.1.2" xref="S3.E7.m1.2.2.1.1.1.2.cmml">â¢</mo><mrow id="S3.E7.m1.2.2.1.1.1.1.1" xref="S3.E7.m1.2.2.1.1.1.1.1.1.cmml"><mo id="S3.E7.m1.2.2.1.1.1.1.1.2" stretchy="false" xref="S3.E7.m1.2.2.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E7.m1.2.2.1.1.1.1.1.1" xref="S3.E7.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S3.E7.m1.2.2.1.1.1.1.1.1.2" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E7.m1.2.2.1.1.1.1.1.1.1" xref="S3.E7.m1.2.2.1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.E7.m1.2.2.1.1.1.1.1.1.3" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E7.m1.2.2.1.1.1.1.1.3" stretchy="false" xref="S3.E7.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E7.m1.2.2.1.1.4" rspace="0.111em" xref="S3.E7.m1.2.2.1.1.4.cmml">=</mo><mrow id="S3.E7.m1.2.2.1.1.3" xref="S3.E7.m1.2.2.1.1.3.cmml"><munder id="S3.E7.m1.2.2.1.1.3.3" xref="S3.E7.m1.2.2.1.1.3.3.cmml"><mo id="S3.E7.m1.2.2.1.1.3.3.2" movablelimits="false" xref="S3.E7.m1.2.2.1.1.3.3.2.cmml">âˆ‘</mo><mrow id="S3.E7.m1.2.2.1.1.3.3.3" xref="S3.E7.m1.2.2.1.1.3.3.3.cmml"><msup id="S3.E7.m1.2.2.1.1.3.3.3.2" xref="S3.E7.m1.2.2.1.1.3.3.3.2.cmml"><mi id="S3.E7.m1.2.2.1.1.3.3.3.2.2" xref="S3.E7.m1.2.2.1.1.3.3.3.2.2.cmml">y</mi><mo id="S3.E7.m1.2.2.1.1.3.3.3.2.3" xref="S3.E7.m1.2.2.1.1.3.3.3.2.3.cmml">â€²</mo></msup><mo id="S3.E7.m1.2.2.1.1.3.3.3.1" xref="S3.E7.m1.2.2.1.1.3.3.3.1.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S3.E7.m1.2.2.1.1.3.3.3.3" xref="S3.E7.m1.2.2.1.1.3.3.3.3.cmml">ğ’´</mi></mrow></munder><mrow id="S3.E7.m1.2.2.1.1.3.2" xref="S3.E7.m1.2.2.1.1.3.2.cmml"><mi id="S3.E7.m1.2.2.1.1.3.2.4" xref="S3.E7.m1.2.2.1.1.3.2.4.cmml">p</mi><mo id="S3.E7.m1.2.2.1.1.3.2.3" xref="S3.E7.m1.2.2.1.1.3.2.3.cmml">â¢</mo><mrow id="S3.E7.m1.2.2.1.1.2.1.1.1" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.cmml"><mo id="S3.E7.m1.2.2.1.1.2.1.1.1.2" stretchy="false" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.cmml">(</mo><mrow id="S3.E7.m1.2.2.1.1.2.1.1.1.1" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.cmml"><mi id="S3.E7.m1.2.2.1.1.2.1.1.1.1.3" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.3.cmml">y</mi><mo fence="false" id="S3.E7.m1.2.2.1.1.2.1.1.1.1.2" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.2.cmml">|</mo><mrow id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.2.cmml"><msup id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.cmml"><mi id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.2" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.2.cmml">y</mi><mo id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.3" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.cmml">â€²</mo></msup><mo id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.2" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.2.cmml">,</mo><mi id="S3.E7.m1.1.1" xref="S3.E7.m1.1.1.cmml">x</mi></mrow></mrow><mo id="S3.E7.m1.2.2.1.1.2.1.1.1.3" stretchy="false" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.cmml">)</mo></mrow><mo id="S3.E7.m1.2.2.1.1.3.2.3a" xref="S3.E7.m1.2.2.1.1.3.2.3.cmml">â¢</mo><msub id="S3.E7.m1.2.2.1.1.3.2.5" xref="S3.E7.m1.2.2.1.1.3.2.5.cmml"><mi id="S3.E7.m1.2.2.1.1.3.2.5.2" xref="S3.E7.m1.2.2.1.1.3.2.5.2.cmml">Ï€</mi><mi id="S3.E7.m1.2.2.1.1.3.2.5.3" xref="S3.E7.m1.2.2.1.1.3.2.5.3.cmml">Î²</mi></msub><mo id="S3.E7.m1.2.2.1.1.3.2.3b" xref="S3.E7.m1.2.2.1.1.3.2.3.cmml">â¢</mo><mrow id="S3.E7.m1.2.2.1.1.3.2.2.1" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.cmml"><mo id="S3.E7.m1.2.2.1.1.3.2.2.1.2" stretchy="false" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.cmml">(</mo><mrow id="S3.E7.m1.2.2.1.1.3.2.2.1.1" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.cmml"><msup id="S3.E7.m1.2.2.1.1.3.2.2.1.1.2" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.cmml"><mi id="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.2" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.2.cmml">y</mi><mo id="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.3" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.3.cmml">â€²</mo></msup><mo fence="false" id="S3.E7.m1.2.2.1.1.3.2.2.1.1.1" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.1.cmml">|</mo><mi id="S3.E7.m1.2.2.1.1.3.2.2.1.1.3" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.3.cmml">x</mi></mrow><mo id="S3.E7.m1.2.2.1.1.3.2.2.1.3" stretchy="false" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S3.E7.m1.2.2.1.2" lspace="0em" xref="S3.E7.m1.2.2.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E7.m1.2b"><apply id="S3.E7.m1.2.2.1.1.cmml" xref="S3.E7.m1.2.2.1"><eq id="S3.E7.m1.2.2.1.1.4.cmml" xref="S3.E7.m1.2.2.1.1.4"></eq><apply id="S3.E7.m1.2.2.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.1"><times id="S3.E7.m1.2.2.1.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.1.2"></times><apply id="S3.E7.m1.2.2.1.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.1.3.1.cmml" xref="S3.E7.m1.2.2.1.1.1.3">subscript</csymbol><ci id="S3.E7.m1.2.2.1.1.1.3.2.cmml" xref="S3.E7.m1.2.2.1.1.1.3.2">ğœ‹</ci><ci id="S3.E7.m1.2.2.1.1.1.3.3.cmml" xref="S3.E7.m1.2.2.1.1.1.3.3">ğ›½</ci></apply><apply id="S3.E7.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1"><csymbol cd="latexml" id="S3.E7.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E7.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E7.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="S3.E7.m1.2.2.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.3"><apply id="S3.E7.m1.2.2.1.1.3.3.cmml" xref="S3.E7.m1.2.2.1.1.3.3"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.3.3.1.cmml" xref="S3.E7.m1.2.2.1.1.3.3">subscript</csymbol><sum id="S3.E7.m1.2.2.1.1.3.3.2.cmml" xref="S3.E7.m1.2.2.1.1.3.3.2"></sum><apply id="S3.E7.m1.2.2.1.1.3.3.3.cmml" xref="S3.E7.m1.2.2.1.1.3.3.3"><in id="S3.E7.m1.2.2.1.1.3.3.3.1.cmml" xref="S3.E7.m1.2.2.1.1.3.3.3.1"></in><apply id="S3.E7.m1.2.2.1.1.3.3.3.2.cmml" xref="S3.E7.m1.2.2.1.1.3.3.3.2"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.3.3.3.2.1.cmml" xref="S3.E7.m1.2.2.1.1.3.3.3.2">superscript</csymbol><ci id="S3.E7.m1.2.2.1.1.3.3.3.2.2.cmml" xref="S3.E7.m1.2.2.1.1.3.3.3.2.2">ğ‘¦</ci><ci id="S3.E7.m1.2.2.1.1.3.3.3.2.3.cmml" xref="S3.E7.m1.2.2.1.1.3.3.3.2.3">â€²</ci></apply><ci id="S3.E7.m1.2.2.1.1.3.3.3.3.cmml" xref="S3.E7.m1.2.2.1.1.3.3.3.3">ğ’´</ci></apply></apply><apply id="S3.E7.m1.2.2.1.1.3.2.cmml" xref="S3.E7.m1.2.2.1.1.3.2"><times id="S3.E7.m1.2.2.1.1.3.2.3.cmml" xref="S3.E7.m1.2.2.1.1.3.2.3"></times><ci id="S3.E7.m1.2.2.1.1.3.2.4.cmml" xref="S3.E7.m1.2.2.1.1.3.2.4">ğ‘</ci><apply id="S3.E7.m1.2.2.1.1.2.1.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1"><csymbol cd="latexml" id="S3.E7.m1.2.2.1.1.2.1.1.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.2">conditional</csymbol><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.3">ğ‘¦</ci><list id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1"><apply id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.2.1.1.1.1.1.1.1.3">â€²</ci></apply><ci id="S3.E7.m1.1.1.cmml" xref="S3.E7.m1.1.1">ğ‘¥</ci></list></apply><apply id="S3.E7.m1.2.2.1.1.3.2.5.cmml" xref="S3.E7.m1.2.2.1.1.3.2.5"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.3.2.5.1.cmml" xref="S3.E7.m1.2.2.1.1.3.2.5">subscript</csymbol><ci id="S3.E7.m1.2.2.1.1.3.2.5.2.cmml" xref="S3.E7.m1.2.2.1.1.3.2.5.2">ğœ‹</ci><ci id="S3.E7.m1.2.2.1.1.3.2.5.3.cmml" xref="S3.E7.m1.2.2.1.1.3.2.5.3">ğ›½</ci></apply><apply id="S3.E7.m1.2.2.1.1.3.2.2.1.1.cmml" xref="S3.E7.m1.2.2.1.1.3.2.2.1"><csymbol cd="latexml" id="S3.E7.m1.2.2.1.1.3.2.2.1.1.1.cmml" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.1">conditional</csymbol><apply id="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.cmml" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.2"><csymbol cd="ambiguous" id="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.1.cmml" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.2">superscript</csymbol><ci id="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.2.cmml" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.2">ğ‘¦</ci><ci id="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.3.cmml" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.2.3">â€²</ci></apply><ci id="S3.E7.m1.2.2.1.1.3.2.2.1.1.3.cmml" xref="S3.E7.m1.2.2.1.1.3.2.2.1.1.3">ğ‘¥</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E7.m1.2c">\pi_{\beta}(y|x)=\sum_{y^{\prime}\in\mathcal{Y}}p(y|y^{\prime},x)\pi_{\beta}(y%
^{\prime}|x).</annotation><annotation encoding="application/x-llamapun" id="S3.E7.m1.2d">italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y | italic_x ) = âˆ‘ start_POSTSUBSCRIPT italic_y start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT âˆˆ caligraphic_Y end_POSTSUBSCRIPT italic_p ( italic_y | italic_y start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT , italic_x ) italic_Ï€ start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT | italic_x ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS1.p5.3">Note that MH can work with almost any proposal distribution. However, if the detailed balance conditions are far from holding, the acceptance probability will be low for transitions, making the convergence to the target distribution very slow and the approach impractical.
Hence, choosing a suitable proposal distribution for the task is essential.
We next describe our proposal distribution, <math alttext="q(y|y^{t},x)" class="ltx_Math" display="inline" id="S3.SS1.p5.3.m1.2"><semantics id="S3.SS1.p5.3.m1.2a"><mrow id="S3.SS1.p5.3.m1.2.2" xref="S3.SS1.p5.3.m1.2.2.cmml"><mi id="S3.SS1.p5.3.m1.2.2.3" xref="S3.SS1.p5.3.m1.2.2.3.cmml">q</mi><mo id="S3.SS1.p5.3.m1.2.2.2" xref="S3.SS1.p5.3.m1.2.2.2.cmml">â¢</mo><mrow id="S3.SS1.p5.3.m1.2.2.1.1" xref="S3.SS1.p5.3.m1.2.2.1.1.1.cmml"><mo id="S3.SS1.p5.3.m1.2.2.1.1.2" stretchy="false" xref="S3.SS1.p5.3.m1.2.2.1.1.1.cmml">(</mo><mrow id="S3.SS1.p5.3.m1.2.2.1.1.1" xref="S3.SS1.p5.3.m1.2.2.1.1.1.cmml"><mi id="S3.SS1.p5.3.m1.2.2.1.1.1.3" xref="S3.SS1.p5.3.m1.2.2.1.1.1.3.cmml">y</mi><mo fence="false" id="S3.SS1.p5.3.m1.2.2.1.1.1.2" xref="S3.SS1.p5.3.m1.2.2.1.1.1.2.cmml">|</mo><mrow id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.2.cmml"><msup id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.2" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.2.cmml">y</mi><mi id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.3" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.2" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.2.cmml">,</mo><mi id="S3.SS1.p5.3.m1.1.1" xref="S3.SS1.p5.3.m1.1.1.cmml">x</mi></mrow></mrow><mo id="S3.SS1.p5.3.m1.2.2.1.1.3" stretchy="false" xref="S3.SS1.p5.3.m1.2.2.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p5.3.m1.2b"><apply id="S3.SS1.p5.3.m1.2.2.cmml" xref="S3.SS1.p5.3.m1.2.2"><times id="S3.SS1.p5.3.m1.2.2.2.cmml" xref="S3.SS1.p5.3.m1.2.2.2"></times><ci id="S3.SS1.p5.3.m1.2.2.3.cmml" xref="S3.SS1.p5.3.m1.2.2.3">ğ‘</ci><apply id="S3.SS1.p5.3.m1.2.2.1.1.1.cmml" xref="S3.SS1.p5.3.m1.2.2.1.1"><csymbol cd="latexml" id="S3.SS1.p5.3.m1.2.2.1.1.1.2.cmml" xref="S3.SS1.p5.3.m1.2.2.1.1.1.2">conditional</csymbol><ci id="S3.SS1.p5.3.m1.2.2.1.1.1.3.cmml" xref="S3.SS1.p5.3.m1.2.2.1.1.1.3">ğ‘¦</ci><list id="S3.SS1.p5.3.m1.2.2.1.1.1.1.2.cmml" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.1"><apply id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.cmml" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1">superscript</csymbol><ci id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S3.SS1.p5.3.m1.2.2.1.1.1.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.SS1.p5.3.m1.1.1.cmml" xref="S3.SS1.p5.3.m1.1.1">ğ‘¥</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p5.3.m1.2c">q(y|y^{t},x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p5.3.m1.2d">italic_q ( italic_y | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x )</annotation></semantics></math>, which overcomes these limitations and satisfies the required constraints.</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Proposal distribution</h3>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.2">Previous works <cite class="ltx_cite ltx_citemacro_citep">(Berglund etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib5" title="">2015</a>; Miao etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib45" title="">2018</a>; Su etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib70" title="">2018</a>)</cite> use proposal distributions that generate hypotheses with one-word or token-level modifications. The different formulations in their most basic form propose a Markov chain in which the state comprises the sentence <math alttext="y^{t}\in\mathcal{Y}" class="ltx_Math" display="inline" id="S3.SS2.p1.1.m1.1"><semantics id="S3.SS2.p1.1.m1.1a"><mrow id="S3.SS2.p1.1.m1.1.1" xref="S3.SS2.p1.1.m1.1.1.cmml"><msup id="S3.SS2.p1.1.m1.1.1.2" xref="S3.SS2.p1.1.m1.1.1.2.cmml"><mi id="S3.SS2.p1.1.m1.1.1.2.2" xref="S3.SS2.p1.1.m1.1.1.2.2.cmml">y</mi><mi id="S3.SS2.p1.1.m1.1.1.2.3" xref="S3.SS2.p1.1.m1.1.1.2.3.cmml">t</mi></msup><mo id="S3.SS2.p1.1.m1.1.1.1" xref="S3.SS2.p1.1.m1.1.1.1.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p1.1.m1.1.1.3" xref="S3.SS2.p1.1.m1.1.1.3.cmml">ğ’´</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.1.m1.1b"><apply id="S3.SS2.p1.1.m1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1"><in id="S3.SS2.p1.1.m1.1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1.1"></in><apply id="S3.SS2.p1.1.m1.1.1.2.cmml" xref="S3.SS2.p1.1.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p1.1.m1.1.1.2.1.cmml" xref="S3.SS2.p1.1.m1.1.1.2">superscript</csymbol><ci id="S3.SS2.p1.1.m1.1.1.2.2.cmml" xref="S3.SS2.p1.1.m1.1.1.2.2">ğ‘¦</ci><ci id="S3.SS2.p1.1.m1.1.1.2.3.cmml" xref="S3.SS2.p1.1.m1.1.1.2.3">ğ‘¡</ci></apply><ci id="S3.SS2.p1.1.m1.1.1.3.cmml" xref="S3.SS2.p1.1.m1.1.1.3">ğ’´</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.1.m1.1c">y^{t}\in\mathcal{Y}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.1.m1.1d">italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT âˆˆ caligraphic_Y</annotation></semantics></math> and an index variable <math alttext="i^{t}\in\{0,\ldots,|y^{t-1}|\}" class="ltx_Math" display="inline" id="S3.SS2.p1.2.m2.3"><semantics id="S3.SS2.p1.2.m2.3a"><mrow id="S3.SS2.p1.2.m2.3.3" xref="S3.SS2.p1.2.m2.3.3.cmml"><msup id="S3.SS2.p1.2.m2.3.3.3" xref="S3.SS2.p1.2.m2.3.3.3.cmml"><mi id="S3.SS2.p1.2.m2.3.3.3.2" xref="S3.SS2.p1.2.m2.3.3.3.2.cmml">i</mi><mi id="S3.SS2.p1.2.m2.3.3.3.3" xref="S3.SS2.p1.2.m2.3.3.3.3.cmml">t</mi></msup><mo id="S3.SS2.p1.2.m2.3.3.2" xref="S3.SS2.p1.2.m2.3.3.2.cmml">âˆˆ</mo><mrow id="S3.SS2.p1.2.m2.3.3.1.1" xref="S3.SS2.p1.2.m2.3.3.1.2.cmml"><mo id="S3.SS2.p1.2.m2.3.3.1.1.2" stretchy="false" xref="S3.SS2.p1.2.m2.3.3.1.2.cmml">{</mo><mn id="S3.SS2.p1.2.m2.1.1" xref="S3.SS2.p1.2.m2.1.1.cmml">0</mn><mo id="S3.SS2.p1.2.m2.3.3.1.1.3" xref="S3.SS2.p1.2.m2.3.3.1.2.cmml">,</mo><mi id="S3.SS2.p1.2.m2.2.2" mathvariant="normal" xref="S3.SS2.p1.2.m2.2.2.cmml">â€¦</mi><mo id="S3.SS2.p1.2.m2.3.3.1.1.4" xref="S3.SS2.p1.2.m2.3.3.1.2.cmml">,</mo><mrow id="S3.SS2.p1.2.m2.3.3.1.1.1.1" xref="S3.SS2.p1.2.m2.3.3.1.1.1.2.cmml"><mo id="S3.SS2.p1.2.m2.3.3.1.1.1.1.2" stretchy="false" xref="S3.SS2.p1.2.m2.3.3.1.1.1.2.1.cmml">|</mo><msup id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.cmml"><mi id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.2" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.2.cmml">y</mi><mrow id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.cmml"><mi id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.2" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.2.cmml">t</mi><mo id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.1" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.1.cmml">âˆ’</mo><mn id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.3" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.3.cmml">1</mn></mrow></msup><mo id="S3.SS2.p1.2.m2.3.3.1.1.1.1.3" stretchy="false" xref="S3.SS2.p1.2.m2.3.3.1.1.1.2.1.cmml">|</mo></mrow><mo id="S3.SS2.p1.2.m2.3.3.1.1.5" stretchy="false" xref="S3.SS2.p1.2.m2.3.3.1.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.2.m2.3b"><apply id="S3.SS2.p1.2.m2.3.3.cmml" xref="S3.SS2.p1.2.m2.3.3"><in id="S3.SS2.p1.2.m2.3.3.2.cmml" xref="S3.SS2.p1.2.m2.3.3.2"></in><apply id="S3.SS2.p1.2.m2.3.3.3.cmml" xref="S3.SS2.p1.2.m2.3.3.3"><csymbol cd="ambiguous" id="S3.SS2.p1.2.m2.3.3.3.1.cmml" xref="S3.SS2.p1.2.m2.3.3.3">superscript</csymbol><ci id="S3.SS2.p1.2.m2.3.3.3.2.cmml" xref="S3.SS2.p1.2.m2.3.3.3.2">ğ‘–</ci><ci id="S3.SS2.p1.2.m2.3.3.3.3.cmml" xref="S3.SS2.p1.2.m2.3.3.3.3">ğ‘¡</ci></apply><set id="S3.SS2.p1.2.m2.3.3.1.2.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1"><cn id="S3.SS2.p1.2.m2.1.1.cmml" type="integer" xref="S3.SS2.p1.2.m2.1.1">0</cn><ci id="S3.SS2.p1.2.m2.2.2.cmml" xref="S3.SS2.p1.2.m2.2.2">â€¦</ci><apply id="S3.SS2.p1.2.m2.3.3.1.1.1.2.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1"><abs id="S3.SS2.p1.2.m2.3.3.1.1.1.2.1.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.2"></abs><apply id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.1.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1">superscript</csymbol><ci id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.2.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.2">ğ‘¦</ci><apply id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3"><minus id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.1.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.1"></minus><ci id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.2.cmml" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.2">ğ‘¡</ci><cn id="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.3.cmml" type="integer" xref="S3.SS2.p1.2.m2.3.3.1.1.1.1.1.3.3">1</cn></apply></apply></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.2.m2.3c">i^{t}\in\{0,\ldots,|y^{t-1}|\}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.2.m2.3d">italic_i start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT âˆˆ { 0 , â€¦ , | italic_y start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT | }</annotation></semantics></math>. At every step, an index is sampled that determines the token to be changed, and a new token is then sampled based on the following full conditional distribution:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E8">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="q(y_{i}|y_{&lt;i},y_{&gt;i})=\frac{\tilde{\pi}(y_{&lt;i},y_{i},y_{&gt;i})}{\sum_{{y_{i}^{%
\prime}}\in\mathcal{V}}\tilde{\pi}(y_{&lt;i},{y_{i}^{\prime}},y_{&gt;i})}," class="ltx_Math" display="block" id="S3.E8.m1.7"><semantics id="S3.E8.m1.7a"><mrow id="S3.E8.m1.7.7.1" xref="S3.E8.m1.7.7.1.1.cmml"><mrow id="S3.E8.m1.7.7.1.1" xref="S3.E8.m1.7.7.1.1.cmml"><mrow id="S3.E8.m1.7.7.1.1.1" xref="S3.E8.m1.7.7.1.1.1.cmml"><mi id="S3.E8.m1.7.7.1.1.1.3" xref="S3.E8.m1.7.7.1.1.1.3.cmml">q</mi><mo id="S3.E8.m1.7.7.1.1.1.2" xref="S3.E8.m1.7.7.1.1.1.2.cmml">â¢</mo><mrow id="S3.E8.m1.7.7.1.1.1.1.1" xref="S3.E8.m1.7.7.1.1.1.1.1.1.cmml"><mo id="S3.E8.m1.7.7.1.1.1.1.1.2" stretchy="false" xref="S3.E8.m1.7.7.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E8.m1.7.7.1.1.1.1.1.1" xref="S3.E8.m1.7.7.1.1.1.1.1.1.cmml"><msub id="S3.E8.m1.7.7.1.1.1.1.1.1.4" xref="S3.E8.m1.7.7.1.1.1.1.1.1.4.cmml"><mi id="S3.E8.m1.7.7.1.1.1.1.1.1.4.2" xref="S3.E8.m1.7.7.1.1.1.1.1.1.4.2.cmml">y</mi><mi id="S3.E8.m1.7.7.1.1.1.1.1.1.4.3" xref="S3.E8.m1.7.7.1.1.1.1.1.1.4.3.cmml">i</mi></msub><mo fence="false" id="S3.E8.m1.7.7.1.1.1.1.1.1.3" xref="S3.E8.m1.7.7.1.1.1.1.1.1.3.cmml">|</mo><mrow id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.3.cmml"><msub id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.2" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.2" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.1" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.3" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.3.cmml">i</mi></mrow></msub><mo id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.3" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.3.cmml">,</mo><msub id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.cmml"><mi id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.2" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.2.cmml">y</mi><mrow id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.cmml"><mi id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.2" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.2.cmml"></mi><mo id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.1" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.1.cmml">&gt;</mo><mi id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.3" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.3.cmml">i</mi></mrow></msub></mrow></mrow><mo id="S3.E8.m1.7.7.1.1.1.1.1.3" stretchy="false" xref="S3.E8.m1.7.7.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E8.m1.7.7.1.1.2" xref="S3.E8.m1.7.7.1.1.2.cmml">=</mo><mfrac id="S3.E8.m1.6.6" xref="S3.E8.m1.6.6.cmml"><mrow id="S3.E8.m1.3.3.3" xref="S3.E8.m1.3.3.3.cmml"><mover accent="true" id="S3.E8.m1.3.3.3.5" xref="S3.E8.m1.3.3.3.5.cmml"><mi id="S3.E8.m1.3.3.3.5.2" xref="S3.E8.m1.3.3.3.5.2.cmml">Ï€</mi><mo id="S3.E8.m1.3.3.3.5.1" xref="S3.E8.m1.3.3.3.5.1.cmml">~</mo></mover><mo id="S3.E8.m1.3.3.3.4" xref="S3.E8.m1.3.3.3.4.cmml">â¢</mo><mrow id="S3.E8.m1.3.3.3.3.3" xref="S3.E8.m1.3.3.3.3.4.cmml"><mo id="S3.E8.m1.3.3.3.3.3.4" stretchy="false" xref="S3.E8.m1.3.3.3.3.4.cmml">(</mo><msub id="S3.E8.m1.1.1.1.1.1.1" xref="S3.E8.m1.1.1.1.1.1.1.cmml"><mi id="S3.E8.m1.1.1.1.1.1.1.2" xref="S3.E8.m1.1.1.1.1.1.1.2.cmml">y</mi><mrow id="S3.E8.m1.1.1.1.1.1.1.3" xref="S3.E8.m1.1.1.1.1.1.1.3.cmml"><mi id="S3.E8.m1.1.1.1.1.1.1.3.2" xref="S3.E8.m1.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S3.E8.m1.1.1.1.1.1.1.3.1" xref="S3.E8.m1.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S3.E8.m1.1.1.1.1.1.1.3.3" xref="S3.E8.m1.1.1.1.1.1.1.3.3.cmml">i</mi></mrow></msub><mo id="S3.E8.m1.3.3.3.3.3.5" xref="S3.E8.m1.3.3.3.3.4.cmml">,</mo><msub id="S3.E8.m1.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.2.cmml"><mi id="S3.E8.m1.2.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E8.m1.2.2.2.2.2.2.3" xref="S3.E8.m1.2.2.2.2.2.2.3.cmml">i</mi></msub><mo id="S3.E8.m1.3.3.3.3.3.6" xref="S3.E8.m1.3.3.3.3.4.cmml">,</mo><msub id="S3.E8.m1.3.3.3.3.3.3" xref="S3.E8.m1.3.3.3.3.3.3.cmml"><mi id="S3.E8.m1.3.3.3.3.3.3.2" xref="S3.E8.m1.3.3.3.3.3.3.2.cmml">y</mi><mrow id="S3.E8.m1.3.3.3.3.3.3.3" xref="S3.E8.m1.3.3.3.3.3.3.3.cmml"><mi id="S3.E8.m1.3.3.3.3.3.3.3.2" xref="S3.E8.m1.3.3.3.3.3.3.3.2.cmml"></mi><mo id="S3.E8.m1.3.3.3.3.3.3.3.1" xref="S3.E8.m1.3.3.3.3.3.3.3.1.cmml">&gt;</mo><mi id="S3.E8.m1.3.3.3.3.3.3.3.3" xref="S3.E8.m1.3.3.3.3.3.3.3.3.cmml">i</mi></mrow></msub><mo id="S3.E8.m1.3.3.3.3.3.7" stretchy="false" xref="S3.E8.m1.3.3.3.3.4.cmml">)</mo></mrow></mrow><mrow id="S3.E8.m1.6.6.6" xref="S3.E8.m1.6.6.6.cmml"><msub id="S3.E8.m1.6.6.6.4" xref="S3.E8.m1.6.6.6.4.cmml"><mo id="S3.E8.m1.6.6.6.4.2" xref="S3.E8.m1.6.6.6.4.2.cmml">âˆ‘</mo><mrow id="S3.E8.m1.6.6.6.4.3" xref="S3.E8.m1.6.6.6.4.3.cmml"><msubsup id="S3.E8.m1.6.6.6.4.3.2" xref="S3.E8.m1.6.6.6.4.3.2.cmml"><mi id="S3.E8.m1.6.6.6.4.3.2.2.2" xref="S3.E8.m1.6.6.6.4.3.2.2.2.cmml">y</mi><mi id="S3.E8.m1.6.6.6.4.3.2.2.3" xref="S3.E8.m1.6.6.6.4.3.2.2.3.cmml">i</mi><mo id="S3.E8.m1.6.6.6.4.3.2.3" xref="S3.E8.m1.6.6.6.4.3.2.3.cmml">â€²</mo></msubsup><mo id="S3.E8.m1.6.6.6.4.3.1" xref="S3.E8.m1.6.6.6.4.3.1.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S3.E8.m1.6.6.6.4.3.3" xref="S3.E8.m1.6.6.6.4.3.3.cmml">ğ’±</mi></mrow></msub><mrow id="S3.E8.m1.6.6.6.3" xref="S3.E8.m1.6.6.6.3.cmml"><mover accent="true" id="S3.E8.m1.6.6.6.3.5" xref="S3.E8.m1.6.6.6.3.5.cmml"><mi id="S3.E8.m1.6.6.6.3.5.2" xref="S3.E8.m1.6.6.6.3.5.2.cmml">Ï€</mi><mo id="S3.E8.m1.6.6.6.3.5.1" xref="S3.E8.m1.6.6.6.3.5.1.cmml">~</mo></mover><mo id="S3.E8.m1.6.6.6.3.4" xref="S3.E8.m1.6.6.6.3.4.cmml">â¢</mo><mrow id="S3.E8.m1.6.6.6.3.3.3" xref="S3.E8.m1.6.6.6.3.3.4.cmml"><mo id="S3.E8.m1.6.6.6.3.3.3.4" stretchy="false" xref="S3.E8.m1.6.6.6.3.3.4.cmml">(</mo><msub id="S3.E8.m1.4.4.4.1.1.1.1" xref="S3.E8.m1.4.4.4.1.1.1.1.cmml"><mi id="S3.E8.m1.4.4.4.1.1.1.1.2" xref="S3.E8.m1.4.4.4.1.1.1.1.2.cmml">y</mi><mrow id="S3.E8.m1.4.4.4.1.1.1.1.3" xref="S3.E8.m1.4.4.4.1.1.1.1.3.cmml"><mi id="S3.E8.m1.4.4.4.1.1.1.1.3.2" xref="S3.E8.m1.4.4.4.1.1.1.1.3.2.cmml"></mi><mo id="S3.E8.m1.4.4.4.1.1.1.1.3.1" xref="S3.E8.m1.4.4.4.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S3.E8.m1.4.4.4.1.1.1.1.3.3" xref="S3.E8.m1.4.4.4.1.1.1.1.3.3.cmml">i</mi></mrow></msub><mo id="S3.E8.m1.6.6.6.3.3.3.5" xref="S3.E8.m1.6.6.6.3.3.4.cmml">,</mo><msubsup id="S3.E8.m1.5.5.5.2.2.2.2" xref="S3.E8.m1.5.5.5.2.2.2.2.cmml"><mi id="S3.E8.m1.5.5.5.2.2.2.2.2.2" xref="S3.E8.m1.5.5.5.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E8.m1.5.5.5.2.2.2.2.2.3" xref="S3.E8.m1.5.5.5.2.2.2.2.2.3.cmml">i</mi><mo id="S3.E8.m1.5.5.5.2.2.2.2.3" xref="S3.E8.m1.5.5.5.2.2.2.2.3.cmml">â€²</mo></msubsup><mo id="S3.E8.m1.6.6.6.3.3.3.6" xref="S3.E8.m1.6.6.6.3.3.4.cmml">,</mo><msub id="S3.E8.m1.6.6.6.3.3.3.3" xref="S3.E8.m1.6.6.6.3.3.3.3.cmml"><mi id="S3.E8.m1.6.6.6.3.3.3.3.2" xref="S3.E8.m1.6.6.6.3.3.3.3.2.cmml">y</mi><mrow id="S3.E8.m1.6.6.6.3.3.3.3.3" xref="S3.E8.m1.6.6.6.3.3.3.3.3.cmml"><mi id="S3.E8.m1.6.6.6.3.3.3.3.3.2" xref="S3.E8.m1.6.6.6.3.3.3.3.3.2.cmml"></mi><mo id="S3.E8.m1.6.6.6.3.3.3.3.3.1" xref="S3.E8.m1.6.6.6.3.3.3.3.3.1.cmml">&gt;</mo><mi id="S3.E8.m1.6.6.6.3.3.3.3.3.3" xref="S3.E8.m1.6.6.6.3.3.3.3.3.3.cmml">i</mi></mrow></msub><mo id="S3.E8.m1.6.6.6.3.3.3.7" stretchy="false" xref="S3.E8.m1.6.6.6.3.3.4.cmml">)</mo></mrow></mrow></mrow></mfrac></mrow><mo id="S3.E8.m1.7.7.1.2" xref="S3.E8.m1.7.7.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E8.m1.7b"><apply id="S3.E8.m1.7.7.1.1.cmml" xref="S3.E8.m1.7.7.1"><eq id="S3.E8.m1.7.7.1.1.2.cmml" xref="S3.E8.m1.7.7.1.1.2"></eq><apply id="S3.E8.m1.7.7.1.1.1.cmml" xref="S3.E8.m1.7.7.1.1.1"><times id="S3.E8.m1.7.7.1.1.1.2.cmml" xref="S3.E8.m1.7.7.1.1.1.2"></times><ci id="S3.E8.m1.7.7.1.1.1.3.cmml" xref="S3.E8.m1.7.7.1.1.1.3">ğ‘</ci><apply id="S3.E8.m1.7.7.1.1.1.1.1.1.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1"><csymbol cd="latexml" id="S3.E8.m1.7.7.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.3">conditional</csymbol><apply id="S3.E8.m1.7.7.1.1.1.1.1.1.4.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.E8.m1.7.7.1.1.1.1.1.1.4.1.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.4">subscript</csymbol><ci id="S3.E8.m1.7.7.1.1.1.1.1.1.4.2.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.4.2">ğ‘¦</ci><ci id="S3.E8.m1.7.7.1.1.1.1.1.1.4.3.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.4.3">ğ‘–</ci></apply><list id="S3.E8.m1.7.7.1.1.1.1.1.1.2.3.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2"><apply id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3"><lt id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><apply id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.1.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.2.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.2">ğ‘¦</ci><apply id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3"><gt id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.1.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.1"></gt><csymbol cd="latexml" id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.2.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.2">absent</csymbol><ci id="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.3.cmml" xref="S3.E8.m1.7.7.1.1.1.1.1.1.2.2.2.3.3">ğ‘–</ci></apply></apply></list></apply></apply><apply id="S3.E8.m1.6.6.cmml" xref="S3.E8.m1.6.6"><divide id="S3.E8.m1.6.6.7.cmml" xref="S3.E8.m1.6.6"></divide><apply id="S3.E8.m1.3.3.3.cmml" xref="S3.E8.m1.3.3.3"><times id="S3.E8.m1.3.3.3.4.cmml" xref="S3.E8.m1.3.3.3.4"></times><apply id="S3.E8.m1.3.3.3.5.cmml" xref="S3.E8.m1.3.3.3.5"><ci id="S3.E8.m1.3.3.3.5.1.cmml" xref="S3.E8.m1.3.3.3.5.1">~</ci><ci id="S3.E8.m1.3.3.3.5.2.cmml" xref="S3.E8.m1.3.3.3.5.2">ğœ‹</ci></apply><vector id="S3.E8.m1.3.3.3.3.4.cmml" xref="S3.E8.m1.3.3.3.3.3"><apply id="S3.E8.m1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E8.m1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E8.m1.1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.1.1.1.1.1.1.2">ğ‘¦</ci><apply id="S3.E8.m1.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.1.1.1.1.1.1.3"><lt id="S3.E8.m1.1.1.1.1.1.1.3.1.cmml" xref="S3.E8.m1.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S3.E8.m1.1.1.1.1.1.1.3.2.cmml" xref="S3.E8.m1.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S3.E8.m1.1.1.1.1.1.1.3.3.cmml" xref="S3.E8.m1.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><apply id="S3.E8.m1.2.2.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.2.2.2.2.1.cmml" xref="S3.E8.m1.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E8.m1.2.2.2.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2">ğ‘¦</ci><ci id="S3.E8.m1.2.2.2.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.2.2.2.3">ğ‘–</ci></apply><apply id="S3.E8.m1.3.3.3.3.3.3.cmml" xref="S3.E8.m1.3.3.3.3.3.3"><csymbol cd="ambiguous" id="S3.E8.m1.3.3.3.3.3.3.1.cmml" xref="S3.E8.m1.3.3.3.3.3.3">subscript</csymbol><ci id="S3.E8.m1.3.3.3.3.3.3.2.cmml" xref="S3.E8.m1.3.3.3.3.3.3.2">ğ‘¦</ci><apply id="S3.E8.m1.3.3.3.3.3.3.3.cmml" xref="S3.E8.m1.3.3.3.3.3.3.3"><gt id="S3.E8.m1.3.3.3.3.3.3.3.1.cmml" xref="S3.E8.m1.3.3.3.3.3.3.3.1"></gt><csymbol cd="latexml" id="S3.E8.m1.3.3.3.3.3.3.3.2.cmml" xref="S3.E8.m1.3.3.3.3.3.3.3.2">absent</csymbol><ci id="S3.E8.m1.3.3.3.3.3.3.3.3.cmml" xref="S3.E8.m1.3.3.3.3.3.3.3.3">ğ‘–</ci></apply></apply></vector></apply><apply id="S3.E8.m1.6.6.6.cmml" xref="S3.E8.m1.6.6.6"><apply id="S3.E8.m1.6.6.6.4.cmml" xref="S3.E8.m1.6.6.6.4"><csymbol cd="ambiguous" id="S3.E8.m1.6.6.6.4.1.cmml" xref="S3.E8.m1.6.6.6.4">subscript</csymbol><sum id="S3.E8.m1.6.6.6.4.2.cmml" xref="S3.E8.m1.6.6.6.4.2"></sum><apply id="S3.E8.m1.6.6.6.4.3.cmml" xref="S3.E8.m1.6.6.6.4.3"><in id="S3.E8.m1.6.6.6.4.3.1.cmml" xref="S3.E8.m1.6.6.6.4.3.1"></in><apply id="S3.E8.m1.6.6.6.4.3.2.cmml" xref="S3.E8.m1.6.6.6.4.3.2"><csymbol cd="ambiguous" id="S3.E8.m1.6.6.6.4.3.2.1.cmml" xref="S3.E8.m1.6.6.6.4.3.2">superscript</csymbol><apply id="S3.E8.m1.6.6.6.4.3.2.2.cmml" xref="S3.E8.m1.6.6.6.4.3.2"><csymbol cd="ambiguous" id="S3.E8.m1.6.6.6.4.3.2.2.1.cmml" xref="S3.E8.m1.6.6.6.4.3.2">subscript</csymbol><ci id="S3.E8.m1.6.6.6.4.3.2.2.2.cmml" xref="S3.E8.m1.6.6.6.4.3.2.2.2">ğ‘¦</ci><ci id="S3.E8.m1.6.6.6.4.3.2.2.3.cmml" xref="S3.E8.m1.6.6.6.4.3.2.2.3">ğ‘–</ci></apply><ci id="S3.E8.m1.6.6.6.4.3.2.3.cmml" xref="S3.E8.m1.6.6.6.4.3.2.3">â€²</ci></apply><ci id="S3.E8.m1.6.6.6.4.3.3.cmml" xref="S3.E8.m1.6.6.6.4.3.3">ğ’±</ci></apply></apply><apply id="S3.E8.m1.6.6.6.3.cmml" xref="S3.E8.m1.6.6.6.3"><times id="S3.E8.m1.6.6.6.3.4.cmml" xref="S3.E8.m1.6.6.6.3.4"></times><apply id="S3.E8.m1.6.6.6.3.5.cmml" xref="S3.E8.m1.6.6.6.3.5"><ci id="S3.E8.m1.6.6.6.3.5.1.cmml" xref="S3.E8.m1.6.6.6.3.5.1">~</ci><ci id="S3.E8.m1.6.6.6.3.5.2.cmml" xref="S3.E8.m1.6.6.6.3.5.2">ğœ‹</ci></apply><vector id="S3.E8.m1.6.6.6.3.3.4.cmml" xref="S3.E8.m1.6.6.6.3.3.3"><apply id="S3.E8.m1.4.4.4.1.1.1.1.cmml" xref="S3.E8.m1.4.4.4.1.1.1.1"><csymbol cd="ambiguous" id="S3.E8.m1.4.4.4.1.1.1.1.1.cmml" xref="S3.E8.m1.4.4.4.1.1.1.1">subscript</csymbol><ci id="S3.E8.m1.4.4.4.1.1.1.1.2.cmml" xref="S3.E8.m1.4.4.4.1.1.1.1.2">ğ‘¦</ci><apply id="S3.E8.m1.4.4.4.1.1.1.1.3.cmml" xref="S3.E8.m1.4.4.4.1.1.1.1.3"><lt id="S3.E8.m1.4.4.4.1.1.1.1.3.1.cmml" xref="S3.E8.m1.4.4.4.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S3.E8.m1.4.4.4.1.1.1.1.3.2.cmml" xref="S3.E8.m1.4.4.4.1.1.1.1.3.2">absent</csymbol><ci id="S3.E8.m1.4.4.4.1.1.1.1.3.3.cmml" xref="S3.E8.m1.4.4.4.1.1.1.1.3.3">ğ‘–</ci></apply></apply><apply id="S3.E8.m1.5.5.5.2.2.2.2.cmml" xref="S3.E8.m1.5.5.5.2.2.2.2"><csymbol cd="ambiguous" id="S3.E8.m1.5.5.5.2.2.2.2.1.cmml" xref="S3.E8.m1.5.5.5.2.2.2.2">superscript</csymbol><apply id="S3.E8.m1.5.5.5.2.2.2.2.2.cmml" xref="S3.E8.m1.5.5.5.2.2.2.2"><csymbol cd="ambiguous" id="S3.E8.m1.5.5.5.2.2.2.2.2.1.cmml" xref="S3.E8.m1.5.5.5.2.2.2.2">subscript</csymbol><ci id="S3.E8.m1.5.5.5.2.2.2.2.2.2.cmml" xref="S3.E8.m1.5.5.5.2.2.2.2.2.2">ğ‘¦</ci><ci id="S3.E8.m1.5.5.5.2.2.2.2.2.3.cmml" xref="S3.E8.m1.5.5.5.2.2.2.2.2.3">ğ‘–</ci></apply><ci id="S3.E8.m1.5.5.5.2.2.2.2.3.cmml" xref="S3.E8.m1.5.5.5.2.2.2.2.3">â€²</ci></apply><apply id="S3.E8.m1.6.6.6.3.3.3.3.cmml" xref="S3.E8.m1.6.6.6.3.3.3.3"><csymbol cd="ambiguous" id="S3.E8.m1.6.6.6.3.3.3.3.1.cmml" xref="S3.E8.m1.6.6.6.3.3.3.3">subscript</csymbol><ci id="S3.E8.m1.6.6.6.3.3.3.3.2.cmml" xref="S3.E8.m1.6.6.6.3.3.3.3.2">ğ‘¦</ci><apply id="S3.E8.m1.6.6.6.3.3.3.3.3.cmml" xref="S3.E8.m1.6.6.6.3.3.3.3.3"><gt id="S3.E8.m1.6.6.6.3.3.3.3.3.1.cmml" xref="S3.E8.m1.6.6.6.3.3.3.3.3.1"></gt><csymbol cd="latexml" id="S3.E8.m1.6.6.6.3.3.3.3.3.2.cmml" xref="S3.E8.m1.6.6.6.3.3.3.3.3.2">absent</csymbol><ci id="S3.E8.m1.6.6.6.3.3.3.3.3.3.cmml" xref="S3.E8.m1.6.6.6.3.3.3.3.3.3">ğ‘–</ci></apply></apply></vector></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E8.m1.7c">q(y_{i}|y_{&lt;i},y_{&gt;i})=\frac{\tilde{\pi}(y_{&lt;i},y_{i},y_{&gt;i})}{\sum_{{y_{i}^{%
\prime}}\in\mathcal{V}}\tilde{\pi}(y_{&lt;i},{y_{i}^{\prime}},y_{&gt;i})},</annotation><annotation encoding="application/x-llamapun" id="S3.E8.m1.7d">italic_q ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_y start_POSTSUBSCRIPT &gt; italic_i end_POSTSUBSCRIPT ) = divide start_ARG over~ start_ARG italic_Ï€ end_ARG ( italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_y start_POSTSUBSCRIPT &gt; italic_i end_POSTSUBSCRIPT ) end_ARG start_ARG âˆ‘ start_POSTSUBSCRIPT italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT âˆˆ caligraphic_V end_POSTSUBSCRIPT over~ start_ARG italic_Ï€ end_ARG ( italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT , italic_y start_POSTSUBSCRIPT &gt; italic_i end_POSTSUBSCRIPT ) end_ARG ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS2.p1.6">where <math alttext="\mathcal{V}" class="ltx_Math" display="inline" id="S3.SS2.p1.3.m1.1"><semantics id="S3.SS2.p1.3.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p1.3.m1.1.1" xref="S3.SS2.p1.3.m1.1.1.cmml">ğ’±</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.3.m1.1b"><ci id="S3.SS2.p1.3.m1.1.1.cmml" xref="S3.SS2.p1.3.m1.1.1">ğ’±</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.3.m1.1c">\mathcal{V}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.3.m1.1d">caligraphic_V</annotation></semantics></math> is created by considering the <math alttext="k" class="ltx_Math" display="inline" id="S3.SS2.p1.4.m2.1"><semantics id="S3.SS2.p1.4.m2.1a"><mi id="S3.SS2.p1.4.m2.1.1" xref="S3.SS2.p1.4.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.4.m2.1b"><ci id="S3.SS2.p1.4.m2.1.1.cmml" xref="S3.SS2.p1.4.m2.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.4.m2.1c">k</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.4.m2.1d">italic_k</annotation></semantics></math> most likely tokens (<math alttext="k" class="ltx_Math" display="inline" id="S3.SS2.p1.5.m3.1"><semantics id="S3.SS2.p1.5.m3.1a"><mi id="S3.SS2.p1.5.m3.1.1" xref="S3.SS2.p1.5.m3.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.5.m3.1b"><ci id="S3.SS2.p1.5.m3.1.1.cmml" xref="S3.SS2.p1.5.m3.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.5.m3.1c">k</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.5.m3.1d">italic_k</annotation></semantics></math> is generally large) under <math alttext="p_{\text{LM}}(y_{i}|y_{&lt;i})" class="ltx_Math" display="inline" id="S3.SS2.p1.6.m4.1"><semantics id="S3.SS2.p1.6.m4.1a"><mrow id="S3.SS2.p1.6.m4.1.1" xref="S3.SS2.p1.6.m4.1.1.cmml"><msub id="S3.SS2.p1.6.m4.1.1.3" xref="S3.SS2.p1.6.m4.1.1.3.cmml"><mi id="S3.SS2.p1.6.m4.1.1.3.2" xref="S3.SS2.p1.6.m4.1.1.3.2.cmml">p</mi><mtext id="S3.SS2.p1.6.m4.1.1.3.3" xref="S3.SS2.p1.6.m4.1.1.3.3a.cmml">LM</mtext></msub><mo id="S3.SS2.p1.6.m4.1.1.2" xref="S3.SS2.p1.6.m4.1.1.2.cmml">â¢</mo><mrow id="S3.SS2.p1.6.m4.1.1.1.1" xref="S3.SS2.p1.6.m4.1.1.1.1.1.cmml"><mo id="S3.SS2.p1.6.m4.1.1.1.1.2" stretchy="false" xref="S3.SS2.p1.6.m4.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS2.p1.6.m4.1.1.1.1.1" xref="S3.SS2.p1.6.m4.1.1.1.1.1.cmml"><msub id="S3.SS2.p1.6.m4.1.1.1.1.1.2" xref="S3.SS2.p1.6.m4.1.1.1.1.1.2.cmml"><mi id="S3.SS2.p1.6.m4.1.1.1.1.1.2.2" xref="S3.SS2.p1.6.m4.1.1.1.1.1.2.2.cmml">y</mi><mi id="S3.SS2.p1.6.m4.1.1.1.1.1.2.3" xref="S3.SS2.p1.6.m4.1.1.1.1.1.2.3.cmml">i</mi></msub><mo fence="false" id="S3.SS2.p1.6.m4.1.1.1.1.1.1" xref="S3.SS2.p1.6.m4.1.1.1.1.1.1.cmml">|</mo><msub id="S3.SS2.p1.6.m4.1.1.1.1.1.3" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.cmml"><mi id="S3.SS2.p1.6.m4.1.1.1.1.1.3.2" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.2.cmml">y</mi><mrow id="S3.SS2.p1.6.m4.1.1.1.1.1.3.3" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.cmml"><mi id="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.2" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.2.cmml"></mi><mo id="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.1" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.1.cmml">&lt;</mo><mi id="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.3" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.3.cmml">i</mi></mrow></msub></mrow><mo id="S3.SS2.p1.6.m4.1.1.1.1.3" stretchy="false" xref="S3.SS2.p1.6.m4.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.6.m4.1b"><apply id="S3.SS2.p1.6.m4.1.1.cmml" xref="S3.SS2.p1.6.m4.1.1"><times id="S3.SS2.p1.6.m4.1.1.2.cmml" xref="S3.SS2.p1.6.m4.1.1.2"></times><apply id="S3.SS2.p1.6.m4.1.1.3.cmml" xref="S3.SS2.p1.6.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p1.6.m4.1.1.3.1.cmml" xref="S3.SS2.p1.6.m4.1.1.3">subscript</csymbol><ci id="S3.SS2.p1.6.m4.1.1.3.2.cmml" xref="S3.SS2.p1.6.m4.1.1.3.2">ğ‘</ci><ci id="S3.SS2.p1.6.m4.1.1.3.3a.cmml" xref="S3.SS2.p1.6.m4.1.1.3.3"><mtext id="S3.SS2.p1.6.m4.1.1.3.3.cmml" mathsize="70%" xref="S3.SS2.p1.6.m4.1.1.3.3">LM</mtext></ci></apply><apply id="S3.SS2.p1.6.m4.1.1.1.1.1.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1"><csymbol cd="latexml" id="S3.SS2.p1.6.m4.1.1.1.1.1.1.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.1">conditional</csymbol><apply id="S3.SS2.p1.6.m4.1.1.1.1.1.2.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p1.6.m4.1.1.1.1.1.2.1.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.2">subscript</csymbol><ci id="S3.SS2.p1.6.m4.1.1.1.1.1.2.2.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.2.2">ğ‘¦</ci><ci id="S3.SS2.p1.6.m4.1.1.1.1.1.2.3.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.2.3">ğ‘–</ci></apply><apply id="S3.SS2.p1.6.m4.1.1.1.1.1.3.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p1.6.m4.1.1.1.1.1.3.1.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3">subscript</csymbol><ci id="S3.SS2.p1.6.m4.1.1.1.1.1.3.2.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.2">ğ‘¦</ci><apply id="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.3"><lt id="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.1.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.1"></lt><csymbol cd="latexml" id="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.2.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.2">absent</csymbol><ci id="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.3.cmml" xref="S3.SS2.p1.6.m4.1.1.1.1.1.3.3.3">ğ‘–</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.6.m4.1c">p_{\text{LM}}(y_{i}|y_{&lt;i})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p1.6.m4.1d">italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.1">This procedure, however, has several limitations: first, it makes it difficult to handle more general combinatorial constraints, in our case more sophisticated metrics. As we only explore adjacent positions in the sentence space due to small local changes, the Markov chain risks becoming trapped in infeasible states,
necessitating a very large number of steps <math alttext="T" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><mi id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><ci id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">ğ‘‡</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">T</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">italic_T</annotation></semantics></math> to converge. Second, relying solely on token-level modifications makes it exceedingly difficult to generate plausible text, making it impractical to align generations with QE metrics or general reward models. We show that this is indeed the case in SectionÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.SS2" title="5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">5.2</span></a>.</p>
</div>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.2">We instead propose a simple and effective procedure that only requires generating a single hypothesis from the model <math alttext="p_{\text{LM}}" class="ltx_Math" display="inline" id="S3.SS2.p3.1.m1.1"><semantics id="S3.SS2.p3.1.m1.1a"><msub id="S3.SS2.p3.1.m1.1.1" xref="S3.SS2.p3.1.m1.1.1.cmml"><mi id="S3.SS2.p3.1.m1.1.1.2" xref="S3.SS2.p3.1.m1.1.1.2.cmml">p</mi><mtext id="S3.SS2.p3.1.m1.1.1.3" xref="S3.SS2.p3.1.m1.1.1.3a.cmml">LM</mtext></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.1.m1.1b"><apply id="S3.SS2.p3.1.m1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.1.m1.1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p3.1.m1.1.1.2.cmml" xref="S3.SS2.p3.1.m1.1.1.2">ğ‘</ci><ci id="S3.SS2.p3.1.m1.1.1.3a.cmml" xref="S3.SS2.p3.1.m1.1.1.3"><mtext id="S3.SS2.p3.1.m1.1.1.3.cmml" mathsize="70%" xref="S3.SS2.p3.1.m1.1.1.3">LM</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.1.m1.1c">p_{\text{LM}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.1.m1.1d">italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT</annotation></semantics></math> and a single evaluation from the metric, <math alttext="r(y,x)" class="ltx_Math" display="inline" id="S3.SS2.p3.2.m2.2"><semantics id="S3.SS2.p3.2.m2.2a"><mrow id="S3.SS2.p3.2.m2.2.3" xref="S3.SS2.p3.2.m2.2.3.cmml"><mi id="S3.SS2.p3.2.m2.2.3.2" xref="S3.SS2.p3.2.m2.2.3.2.cmml">r</mi><mo id="S3.SS2.p3.2.m2.2.3.1" xref="S3.SS2.p3.2.m2.2.3.1.cmml">â¢</mo><mrow id="S3.SS2.p3.2.m2.2.3.3.2" xref="S3.SS2.p3.2.m2.2.3.3.1.cmml"><mo id="S3.SS2.p3.2.m2.2.3.3.2.1" stretchy="false" xref="S3.SS2.p3.2.m2.2.3.3.1.cmml">(</mo><mi id="S3.SS2.p3.2.m2.1.1" xref="S3.SS2.p3.2.m2.1.1.cmml">y</mi><mo id="S3.SS2.p3.2.m2.2.3.3.2.2" xref="S3.SS2.p3.2.m2.2.3.3.1.cmml">,</mo><mi id="S3.SS2.p3.2.m2.2.2" xref="S3.SS2.p3.2.m2.2.2.cmml">x</mi><mo id="S3.SS2.p3.2.m2.2.3.3.2.3" stretchy="false" xref="S3.SS2.p3.2.m2.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.2.m2.2b"><apply id="S3.SS2.p3.2.m2.2.3.cmml" xref="S3.SS2.p3.2.m2.2.3"><times id="S3.SS2.p3.2.m2.2.3.1.cmml" xref="S3.SS2.p3.2.m2.2.3.1"></times><ci id="S3.SS2.p3.2.m2.2.3.2.cmml" xref="S3.SS2.p3.2.m2.2.3.2">ğ‘Ÿ</ci><interval closure="open" id="S3.SS2.p3.2.m2.2.3.3.1.cmml" xref="S3.SS2.p3.2.m2.2.3.3.2"><ci id="S3.SS2.p3.2.m2.1.1.cmml" xref="S3.SS2.p3.2.m2.1.1">ğ‘¦</ci><ci id="S3.SS2.p3.2.m2.2.2.cmml" xref="S3.SS2.p3.2.m2.2.2">ğ‘¥</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.2.m2.2c">r(y,x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.2.m2.2d">italic_r ( italic_y , italic_x )</annotation></semantics></math>,
and still allows the Markov chain to converge to the target distribution. We characterize the proposal by the following procedure:</p>
<ol class="ltx_enumerate" id="S3.I1">
<li class="ltx_item" id="S3.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span>
<div class="ltx_para" id="S3.I1.i1.p1">
<p class="ltx_p" id="S3.I1.i1.p1.4">Given an instance <math alttext="y^{t}" class="ltx_Math" display="inline" id="S3.I1.i1.p1.1.m1.1"><semantics id="S3.I1.i1.p1.1.m1.1a"><msup id="S3.I1.i1.p1.1.m1.1.1" xref="S3.I1.i1.p1.1.m1.1.1.cmml"><mi id="S3.I1.i1.p1.1.m1.1.1.2" xref="S3.I1.i1.p1.1.m1.1.1.2.cmml">y</mi><mi id="S3.I1.i1.p1.1.m1.1.1.3" xref="S3.I1.i1.p1.1.m1.1.1.3.cmml">t</mi></msup><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.1.m1.1b"><apply id="S3.I1.i1.p1.1.m1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.I1.i1.p1.1.m1.1.1.1.cmml" xref="S3.I1.i1.p1.1.m1.1.1">superscript</csymbol><ci id="S3.I1.i1.p1.1.m1.1.1.2.cmml" xref="S3.I1.i1.p1.1.m1.1.1.2">ğ‘¦</ci><ci id="S3.I1.i1.p1.1.m1.1.1.3.cmml" xref="S3.I1.i1.p1.1.m1.1.1.3">ğ‘¡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.1.m1.1c">y^{t}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.1.m1.1d">italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT</annotation></semantics></math> with length <math alttext="n^{t}:=|y^{t}|" class="ltx_Math" display="inline" id="S3.I1.i1.p1.2.m2.1"><semantics id="S3.I1.i1.p1.2.m2.1a"><mrow id="S3.I1.i1.p1.2.m2.1.1" xref="S3.I1.i1.p1.2.m2.1.1.cmml"><msup id="S3.I1.i1.p1.2.m2.1.1.3" xref="S3.I1.i1.p1.2.m2.1.1.3.cmml"><mi id="S3.I1.i1.p1.2.m2.1.1.3.2" xref="S3.I1.i1.p1.2.m2.1.1.3.2.cmml">n</mi><mi id="S3.I1.i1.p1.2.m2.1.1.3.3" xref="S3.I1.i1.p1.2.m2.1.1.3.3.cmml">t</mi></msup><mo id="S3.I1.i1.p1.2.m2.1.1.2" lspace="0.278em" rspace="0.278em" xref="S3.I1.i1.p1.2.m2.1.1.2.cmml">:=</mo><mrow id="S3.I1.i1.p1.2.m2.1.1.1.1" xref="S3.I1.i1.p1.2.m2.1.1.1.2.cmml"><mo id="S3.I1.i1.p1.2.m2.1.1.1.1.2" stretchy="false" xref="S3.I1.i1.p1.2.m2.1.1.1.2.1.cmml">|</mo><msup id="S3.I1.i1.p1.2.m2.1.1.1.1.1" xref="S3.I1.i1.p1.2.m2.1.1.1.1.1.cmml"><mi id="S3.I1.i1.p1.2.m2.1.1.1.1.1.2" xref="S3.I1.i1.p1.2.m2.1.1.1.1.1.2.cmml">y</mi><mi id="S3.I1.i1.p1.2.m2.1.1.1.1.1.3" xref="S3.I1.i1.p1.2.m2.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.I1.i1.p1.2.m2.1.1.1.1.3" stretchy="false" xref="S3.I1.i1.p1.2.m2.1.1.1.2.1.cmml">|</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.2.m2.1b"><apply id="S3.I1.i1.p1.2.m2.1.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1"><csymbol cd="latexml" id="S3.I1.i1.p1.2.m2.1.1.2.cmml" xref="S3.I1.i1.p1.2.m2.1.1.2">assign</csymbol><apply id="S3.I1.i1.p1.2.m2.1.1.3.cmml" xref="S3.I1.i1.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.I1.i1.p1.2.m2.1.1.3.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1.3">superscript</csymbol><ci id="S3.I1.i1.p1.2.m2.1.1.3.2.cmml" xref="S3.I1.i1.p1.2.m2.1.1.3.2">ğ‘›</ci><ci id="S3.I1.i1.p1.2.m2.1.1.3.3.cmml" xref="S3.I1.i1.p1.2.m2.1.1.3.3">ğ‘¡</ci></apply><apply id="S3.I1.i1.p1.2.m2.1.1.1.2.cmml" xref="S3.I1.i1.p1.2.m2.1.1.1.1"><abs id="S3.I1.i1.p1.2.m2.1.1.1.2.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1.1.1.2"></abs><apply id="S3.I1.i1.p1.2.m2.1.1.1.1.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i1.p1.2.m2.1.1.1.1.1.1.cmml" xref="S3.I1.i1.p1.2.m2.1.1.1.1.1">superscript</csymbol><ci id="S3.I1.i1.p1.2.m2.1.1.1.1.1.2.cmml" xref="S3.I1.i1.p1.2.m2.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.I1.i1.p1.2.m2.1.1.1.1.1.3.cmml" xref="S3.I1.i1.p1.2.m2.1.1.1.1.1.3">ğ‘¡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.2.m2.1c">n^{t}:=|y^{t}|</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.2.m2.1d">italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT := | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT |</annotation></semantics></math>, sample an index <math alttext="i" class="ltx_Math" display="inline" id="S3.I1.i1.p1.3.m3.1"><semantics id="S3.I1.i1.p1.3.m3.1a"><mi id="S3.I1.i1.p1.3.m3.1.1" xref="S3.I1.i1.p1.3.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.3.m3.1b"><ci id="S3.I1.i1.p1.3.m3.1.1.cmml" xref="S3.I1.i1.p1.3.m3.1.1">ğ‘–</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.3.m3.1c">i</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.3.m3.1d">italic_i</annotation></semantics></math>, <math alttext="i\sim q(i|n^{t})" class="ltx_Math" display="inline" id="S3.I1.i1.p1.4.m4.1"><semantics id="S3.I1.i1.p1.4.m4.1a"><mrow id="S3.I1.i1.p1.4.m4.1.1" xref="S3.I1.i1.p1.4.m4.1.1.cmml"><mi id="S3.I1.i1.p1.4.m4.1.1.3" xref="S3.I1.i1.p1.4.m4.1.1.3.cmml">i</mi><mo id="S3.I1.i1.p1.4.m4.1.1.2" xref="S3.I1.i1.p1.4.m4.1.1.2.cmml">âˆ¼</mo><mrow id="S3.I1.i1.p1.4.m4.1.1.1" xref="S3.I1.i1.p1.4.m4.1.1.1.cmml"><mi id="S3.I1.i1.p1.4.m4.1.1.1.3" xref="S3.I1.i1.p1.4.m4.1.1.1.3.cmml">q</mi><mo id="S3.I1.i1.p1.4.m4.1.1.1.2" xref="S3.I1.i1.p1.4.m4.1.1.1.2.cmml">â¢</mo><mrow id="S3.I1.i1.p1.4.m4.1.1.1.1.1" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.cmml"><mo id="S3.I1.i1.p1.4.m4.1.1.1.1.1.2" stretchy="false" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.cmml"><mi id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.2" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.2.cmml">i</mi><mo fence="false" id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.1" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.1.cmml">|</mo><msup id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.cmml"><mi id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.2" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.2.cmml">n</mi><mi id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.3" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.3.cmml">t</mi></msup></mrow><mo id="S3.I1.i1.p1.4.m4.1.1.1.1.1.3" stretchy="false" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i1.p1.4.m4.1b"><apply id="S3.I1.i1.p1.4.m4.1.1.cmml" xref="S3.I1.i1.p1.4.m4.1.1"><csymbol cd="latexml" id="S3.I1.i1.p1.4.m4.1.1.2.cmml" xref="S3.I1.i1.p1.4.m4.1.1.2">similar-to</csymbol><ci id="S3.I1.i1.p1.4.m4.1.1.3.cmml" xref="S3.I1.i1.p1.4.m4.1.1.3">ğ‘–</ci><apply id="S3.I1.i1.p1.4.m4.1.1.1.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1"><times id="S3.I1.i1.p1.4.m4.1.1.1.2.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.2"></times><ci id="S3.I1.i1.p1.4.m4.1.1.1.3.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.3">ğ‘</ci><apply id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1"><csymbol cd="latexml" id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.1.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.2.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.2">ğ‘–</ci><apply id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.1.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3">superscript</csymbol><ci id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.2.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.2">ğ‘›</ci><ci id="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.3.cmml" xref="S3.I1.i1.p1.4.m4.1.1.1.1.1.1.3.3">ğ‘¡</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i1.p1.4.m4.1c">i\sim q(i|n^{t})</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i1.p1.4.m4.1d">italic_i âˆ¼ italic_q ( italic_i | italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT )</annotation></semantics></math>.</p>
</div>
</li>
<li class="ltx_item" id="S3.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span>
<div class="ltx_para" id="S3.I1.i2.p1">
<p class="ltx_p" id="S3.I1.i2.p1.2">Generate a completion <math alttext="y_{\geq i}" class="ltx_Math" display="inline" id="S3.I1.i2.p1.1.m1.1"><semantics id="S3.I1.i2.p1.1.m1.1a"><msub id="S3.I1.i2.p1.1.m1.1.1" xref="S3.I1.i2.p1.1.m1.1.1.cmml"><mi id="S3.I1.i2.p1.1.m1.1.1.2" xref="S3.I1.i2.p1.1.m1.1.1.2.cmml">y</mi><mrow id="S3.I1.i2.p1.1.m1.1.1.3" xref="S3.I1.i2.p1.1.m1.1.1.3.cmml"><mi id="S3.I1.i2.p1.1.m1.1.1.3.2" xref="S3.I1.i2.p1.1.m1.1.1.3.2.cmml"></mi><mo id="S3.I1.i2.p1.1.m1.1.1.3.1" xref="S3.I1.i2.p1.1.m1.1.1.3.1.cmml">â‰¥</mo><mi id="S3.I1.i2.p1.1.m1.1.1.3.3" xref="S3.I1.i2.p1.1.m1.1.1.3.3.cmml">i</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.1.m1.1b"><apply id="S3.I1.i2.p1.1.m1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.1.m1.1.1.1.cmml" xref="S3.I1.i2.p1.1.m1.1.1">subscript</csymbol><ci id="S3.I1.i2.p1.1.m1.1.1.2.cmml" xref="S3.I1.i2.p1.1.m1.1.1.2">ğ‘¦</ci><apply id="S3.I1.i2.p1.1.m1.1.1.3.cmml" xref="S3.I1.i2.p1.1.m1.1.1.3"><geq id="S3.I1.i2.p1.1.m1.1.1.3.1.cmml" xref="S3.I1.i2.p1.1.m1.1.1.3.1"></geq><csymbol cd="latexml" id="S3.I1.i2.p1.1.m1.1.1.3.2.cmml" xref="S3.I1.i2.p1.1.m1.1.1.3.2">absent</csymbol><ci id="S3.I1.i2.p1.1.m1.1.1.3.3.cmml" xref="S3.I1.i2.p1.1.m1.1.1.3.3">ğ‘–</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.1.m1.1c">y_{\geq i}</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.1.m1.1d">italic_y start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT</annotation></semantics></math> from <math alttext="p_{\text{LM}}(y_{\geq i}|y^{t}_{&lt;i},x)" class="ltx_Math" display="inline" id="S3.I1.i2.p1.2.m2.2"><semantics id="S3.I1.i2.p1.2.m2.2a"><mrow id="S3.I1.i2.p1.2.m2.2.2" xref="S3.I1.i2.p1.2.m2.2.2.cmml"><msub id="S3.I1.i2.p1.2.m2.2.2.3" xref="S3.I1.i2.p1.2.m2.2.2.3.cmml"><mi id="S3.I1.i2.p1.2.m2.2.2.3.2" xref="S3.I1.i2.p1.2.m2.2.2.3.2.cmml">p</mi><mtext id="S3.I1.i2.p1.2.m2.2.2.3.3" xref="S3.I1.i2.p1.2.m2.2.2.3.3a.cmml">LM</mtext></msub><mo id="S3.I1.i2.p1.2.m2.2.2.2" xref="S3.I1.i2.p1.2.m2.2.2.2.cmml">â¢</mo><mrow id="S3.I1.i2.p1.2.m2.2.2.1.1" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.cmml"><mo id="S3.I1.i2.p1.2.m2.2.2.1.1.2" stretchy="false" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.cmml">(</mo><mrow id="S3.I1.i2.p1.2.m2.2.2.1.1.1" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.cmml"><msub id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.cmml"><mi id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.2" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.2.cmml">y</mi><mrow id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.cmml"><mi id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.2" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.2.cmml"></mi><mo id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.1" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.1.cmml">â‰¥</mo><mi id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.3" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.3.cmml">i</mi></mrow></msub><mo fence="false" id="S3.I1.i2.p1.2.m2.2.2.1.1.1.2" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.2.cmml">|</mo><mrow id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.2.cmml"><msubsup id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.cmml"><mi id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.2" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.2.cmml">y</mi><mrow id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.cmml"><mi id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.2" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.1" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.3" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.3.cmml">i</mi></mrow><mi id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.3" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.3.cmml">t</mi></msubsup><mo id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.2" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.2.cmml">,</mo><mi id="S3.I1.i2.p1.2.m2.1.1" xref="S3.I1.i2.p1.2.m2.1.1.cmml">x</mi></mrow></mrow><mo id="S3.I1.i2.p1.2.m2.2.2.1.1.3" stretchy="false" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.I1.i2.p1.2.m2.2b"><apply id="S3.I1.i2.p1.2.m2.2.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2"><times id="S3.I1.i2.p1.2.m2.2.2.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.2"></times><apply id="S3.I1.i2.p1.2.m2.2.2.3.cmml" xref="S3.I1.i2.p1.2.m2.2.2.3"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.2.2.3.1.cmml" xref="S3.I1.i2.p1.2.m2.2.2.3">subscript</csymbol><ci id="S3.I1.i2.p1.2.m2.2.2.3.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.3.2">ğ‘</ci><ci id="S3.I1.i2.p1.2.m2.2.2.3.3a.cmml" xref="S3.I1.i2.p1.2.m2.2.2.3.3"><mtext id="S3.I1.i2.p1.2.m2.2.2.3.3.cmml" mathsize="70%" xref="S3.I1.i2.p1.2.m2.2.2.3.3">LM</mtext></ci></apply><apply id="S3.I1.i2.p1.2.m2.2.2.1.1.1.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1"><csymbol cd="latexml" id="S3.I1.i2.p1.2.m2.2.2.1.1.1.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.2">conditional</csymbol><apply id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.1.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3">subscript</csymbol><ci id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.2">ğ‘¦</ci><apply id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3"><geq id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.1.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.1"></geq><csymbol cd="latexml" id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.2">absent</csymbol><ci id="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.3.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.3.3.3">ğ‘–</ci></apply></apply><list id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1"><apply id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.1.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1">subscript</csymbol><apply id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.1.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1">superscript</csymbol><ci id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.2">ğ‘¦</ci><ci id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.3.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.2.3">ğ‘¡</ci></apply><apply id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3"><lt id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.1.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.2.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.3.cmml" xref="S3.I1.i2.p1.2.m2.2.2.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="S3.I1.i2.p1.2.m2.1.1.cmml" xref="S3.I1.i2.p1.2.m2.1.1">ğ‘¥</ci></list></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.I1.i2.p1.2.m2.2c">p_{\text{LM}}(y_{\geq i}|y^{t}_{&lt;i},x)</annotation><annotation encoding="application/x-llamapun" id="S3.I1.i2.p1.2.m2.2d">italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x )</annotation></semantics></math>.</p>
</div>
</li>
</ol>
<p class="ltx_p" id="S3.SS2.p3.6">Note that, due to the nature of our proposal distribution, <math alttext="y^{t}" class="ltx_Math" display="inline" id="S3.SS2.p3.3.m1.1"><semantics id="S3.SS2.p3.3.m1.1a"><msup id="S3.SS2.p3.3.m1.1.1" xref="S3.SS2.p3.3.m1.1.1.cmml"><mi id="S3.SS2.p3.3.m1.1.1.2" xref="S3.SS2.p3.3.m1.1.1.2.cmml">y</mi><mi id="S3.SS2.p3.3.m1.1.1.3" xref="S3.SS2.p3.3.m1.1.1.3.cmml">t</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.3.m1.1b"><apply id="S3.SS2.p3.3.m1.1.1.cmml" xref="S3.SS2.p3.3.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.3.m1.1.1.1.cmml" xref="S3.SS2.p3.3.m1.1.1">superscript</csymbol><ci id="S3.SS2.p3.3.m1.1.1.2.cmml" xref="S3.SS2.p3.3.m1.1.1.2">ğ‘¦</ci><ci id="S3.SS2.p3.3.m1.1.1.3.cmml" xref="S3.SS2.p3.3.m1.1.1.3">ğ‘¡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.3.m1.1c">y^{t}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.3.m1.1d">italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="y" class="ltx_Math" display="inline" id="S3.SS2.p3.4.m2.1"><semantics id="S3.SS2.p3.4.m2.1a"><mi id="S3.SS2.p3.4.m2.1.1" xref="S3.SS2.p3.4.m2.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.4.m2.1b"><ci id="S3.SS2.p3.4.m2.1.1.cmml" xref="S3.SS2.p3.4.m2.1.1">ğ‘¦</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.4.m2.1c">y</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.4.m2.1d">italic_y</annotation></semantics></math> share a common substructure (prefix) before the index <math alttext="i" class="ltx_Math" display="inline" id="S3.SS2.p3.5.m3.1"><semantics id="S3.SS2.p3.5.m3.1a"><mi id="S3.SS2.p3.5.m3.1.1" xref="S3.SS2.p3.5.m3.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.5.m3.1b"><ci id="S3.SS2.p3.5.m3.1.1.cmml" xref="S3.SS2.p3.5.m3.1.1">ğ‘–</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.5.m3.1c">i</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.5.m3.1d">italic_i</annotation></semantics></math>, i.e., <math alttext="y^{t}_{&lt;i}=y_{&lt;i}" class="ltx_Math" display="inline" id="S3.SS2.p3.6.m4.1"><semantics id="S3.SS2.p3.6.m4.1a"><mrow id="S3.SS2.p3.6.m4.1.1" xref="S3.SS2.p3.6.m4.1.1.cmml"><msubsup id="S3.SS2.p3.6.m4.1.1.2" xref="S3.SS2.p3.6.m4.1.1.2.cmml"><mi id="S3.SS2.p3.6.m4.1.1.2.2.2" xref="S3.SS2.p3.6.m4.1.1.2.2.2.cmml">y</mi><mrow id="S3.SS2.p3.6.m4.1.1.2.3" xref="S3.SS2.p3.6.m4.1.1.2.3.cmml"><mi id="S3.SS2.p3.6.m4.1.1.2.3.2" xref="S3.SS2.p3.6.m4.1.1.2.3.2.cmml"></mi><mo id="S3.SS2.p3.6.m4.1.1.2.3.1" xref="S3.SS2.p3.6.m4.1.1.2.3.1.cmml">&lt;</mo><mi id="S3.SS2.p3.6.m4.1.1.2.3.3" xref="S3.SS2.p3.6.m4.1.1.2.3.3.cmml">i</mi></mrow><mi id="S3.SS2.p3.6.m4.1.1.2.2.3" xref="S3.SS2.p3.6.m4.1.1.2.2.3.cmml">t</mi></msubsup><mo id="S3.SS2.p3.6.m4.1.1.1" xref="S3.SS2.p3.6.m4.1.1.1.cmml">=</mo><msub id="S3.SS2.p3.6.m4.1.1.3" xref="S3.SS2.p3.6.m4.1.1.3.cmml"><mi id="S3.SS2.p3.6.m4.1.1.3.2" xref="S3.SS2.p3.6.m4.1.1.3.2.cmml">y</mi><mrow id="S3.SS2.p3.6.m4.1.1.3.3" xref="S3.SS2.p3.6.m4.1.1.3.3.cmml"><mi id="S3.SS2.p3.6.m4.1.1.3.3.2" xref="S3.SS2.p3.6.m4.1.1.3.3.2.cmml"></mi><mo id="S3.SS2.p3.6.m4.1.1.3.3.1" xref="S3.SS2.p3.6.m4.1.1.3.3.1.cmml">&lt;</mo><mi id="S3.SS2.p3.6.m4.1.1.3.3.3" xref="S3.SS2.p3.6.m4.1.1.3.3.3.cmml">i</mi></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.6.m4.1b"><apply id="S3.SS2.p3.6.m4.1.1.cmml" xref="S3.SS2.p3.6.m4.1.1"><eq id="S3.SS2.p3.6.m4.1.1.1.cmml" xref="S3.SS2.p3.6.m4.1.1.1"></eq><apply id="S3.SS2.p3.6.m4.1.1.2.cmml" xref="S3.SS2.p3.6.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p3.6.m4.1.1.2.1.cmml" xref="S3.SS2.p3.6.m4.1.1.2">subscript</csymbol><apply id="S3.SS2.p3.6.m4.1.1.2.2.cmml" xref="S3.SS2.p3.6.m4.1.1.2"><csymbol cd="ambiguous" id="S3.SS2.p3.6.m4.1.1.2.2.1.cmml" xref="S3.SS2.p3.6.m4.1.1.2">superscript</csymbol><ci id="S3.SS2.p3.6.m4.1.1.2.2.2.cmml" xref="S3.SS2.p3.6.m4.1.1.2.2.2">ğ‘¦</ci><ci id="S3.SS2.p3.6.m4.1.1.2.2.3.cmml" xref="S3.SS2.p3.6.m4.1.1.2.2.3">ğ‘¡</ci></apply><apply id="S3.SS2.p3.6.m4.1.1.2.3.cmml" xref="S3.SS2.p3.6.m4.1.1.2.3"><lt id="S3.SS2.p3.6.m4.1.1.2.3.1.cmml" xref="S3.SS2.p3.6.m4.1.1.2.3.1"></lt><csymbol cd="latexml" id="S3.SS2.p3.6.m4.1.1.2.3.2.cmml" xref="S3.SS2.p3.6.m4.1.1.2.3.2">absent</csymbol><ci id="S3.SS2.p3.6.m4.1.1.2.3.3.cmml" xref="S3.SS2.p3.6.m4.1.1.2.3.3">ğ‘–</ci></apply></apply><apply id="S3.SS2.p3.6.m4.1.1.3.cmml" xref="S3.SS2.p3.6.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p3.6.m4.1.1.3.1.cmml" xref="S3.SS2.p3.6.m4.1.1.3">subscript</csymbol><ci id="S3.SS2.p3.6.m4.1.1.3.2.cmml" xref="S3.SS2.p3.6.m4.1.1.3.2">ğ‘¦</ci><apply id="S3.SS2.p3.6.m4.1.1.3.3.cmml" xref="S3.SS2.p3.6.m4.1.1.3.3"><lt id="S3.SS2.p3.6.m4.1.1.3.3.1.cmml" xref="S3.SS2.p3.6.m4.1.1.3.3.1"></lt><csymbol cd="latexml" id="S3.SS2.p3.6.m4.1.1.3.3.2.cmml" xref="S3.SS2.p3.6.m4.1.1.3.3.2">absent</csymbol><ci id="S3.SS2.p3.6.m4.1.1.3.3.3.cmml" xref="S3.SS2.p3.6.m4.1.1.3.3.3">ğ‘–</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.6.m4.1c">y^{t}_{&lt;i}=y_{&lt;i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.6.m4.1d">italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT = italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, which implies that</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E9">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="q(y|y^{t},x,i)=p_{\text{LM}}(y_{\geq i}|y^{t}_{&lt;i},x)\prod_{j&lt;i}\delta(y_{j},y%
^{t}_{j})," class="ltx_Math" display="block" id="S3.E9.m1.4"><semantics id="S3.E9.m1.4a"><mrow id="S3.E9.m1.4.4.1" xref="S3.E9.m1.4.4.1.1.cmml"><mrow id="S3.E9.m1.4.4.1.1" xref="S3.E9.m1.4.4.1.1.cmml"><mrow id="S3.E9.m1.4.4.1.1.1" xref="S3.E9.m1.4.4.1.1.1.cmml"><mi id="S3.E9.m1.4.4.1.1.1.3" xref="S3.E9.m1.4.4.1.1.1.3.cmml">q</mi><mo id="S3.E9.m1.4.4.1.1.1.2" xref="S3.E9.m1.4.4.1.1.1.2.cmml">â¢</mo><mrow id="S3.E9.m1.4.4.1.1.1.1.1" xref="S3.E9.m1.4.4.1.1.1.1.1.1.cmml"><mo id="S3.E9.m1.4.4.1.1.1.1.1.2" stretchy="false" xref="S3.E9.m1.4.4.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E9.m1.4.4.1.1.1.1.1.1" xref="S3.E9.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S3.E9.m1.4.4.1.1.1.1.1.1.3" xref="S3.E9.m1.4.4.1.1.1.1.1.1.3.cmml">y</mi><mo fence="false" id="S3.E9.m1.4.4.1.1.1.1.1.1.2" xref="S3.E9.m1.4.4.1.1.1.1.1.1.2.cmml">|</mo><mrow id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.2.cmml"><msup id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.2" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml">y</mi><mi id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.3" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.2" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.2.cmml">,</mo><mi id="S3.E9.m1.1.1" xref="S3.E9.m1.1.1.cmml">x</mi><mo id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.3" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.2.cmml">,</mo><mi id="S3.E9.m1.2.2" xref="S3.E9.m1.2.2.cmml">i</mi></mrow></mrow><mo id="S3.E9.m1.4.4.1.1.1.1.1.3" stretchy="false" xref="S3.E9.m1.4.4.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E9.m1.4.4.1.1.5" xref="S3.E9.m1.4.4.1.1.5.cmml">=</mo><mrow id="S3.E9.m1.4.4.1.1.4" xref="S3.E9.m1.4.4.1.1.4.cmml"><msub id="S3.E9.m1.4.4.1.1.4.5" xref="S3.E9.m1.4.4.1.1.4.5.cmml"><mi id="S3.E9.m1.4.4.1.1.4.5.2" xref="S3.E9.m1.4.4.1.1.4.5.2.cmml">p</mi><mtext id="S3.E9.m1.4.4.1.1.4.5.3" xref="S3.E9.m1.4.4.1.1.4.5.3a.cmml">LM</mtext></msub><mo id="S3.E9.m1.4.4.1.1.4.4" xref="S3.E9.m1.4.4.1.1.4.4.cmml">â¢</mo><mrow id="S3.E9.m1.4.4.1.1.2.1.1" xref="S3.E9.m1.4.4.1.1.2.1.1.1.cmml"><mo id="S3.E9.m1.4.4.1.1.2.1.1.2" stretchy="false" xref="S3.E9.m1.4.4.1.1.2.1.1.1.cmml">(</mo><mrow id="S3.E9.m1.4.4.1.1.2.1.1.1" xref="S3.E9.m1.4.4.1.1.2.1.1.1.cmml"><msub id="S3.E9.m1.4.4.1.1.2.1.1.1.3" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.cmml"><mi id="S3.E9.m1.4.4.1.1.2.1.1.1.3.2" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.2.cmml">y</mi><mrow id="S3.E9.m1.4.4.1.1.2.1.1.1.3.3" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.cmml"><mi id="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.2" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.2.cmml"></mi><mo id="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.1" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.1.cmml">â‰¥</mo><mi id="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.3" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.3.cmml">i</mi></mrow></msub><mo fence="false" id="S3.E9.m1.4.4.1.1.2.1.1.1.2" xref="S3.E9.m1.4.4.1.1.2.1.1.1.2.cmml">|</mo><mrow id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.2.cmml"><msubsup id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.cmml"><mi id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.2" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.2.cmml">y</mi><mrow id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.cmml"><mi id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.2" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.2.cmml"></mi><mo id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.1" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.3" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.3.cmml">i</mi></mrow><mi id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.3" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.3.cmml">t</mi></msubsup><mo id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.2" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.2.cmml">,</mo><mi id="S3.E9.m1.3.3" xref="S3.E9.m1.3.3.cmml">x</mi></mrow></mrow><mo id="S3.E9.m1.4.4.1.1.2.1.1.3" stretchy="false" xref="S3.E9.m1.4.4.1.1.2.1.1.1.cmml">)</mo></mrow><mo id="S3.E9.m1.4.4.1.1.4.4a" xref="S3.E9.m1.4.4.1.1.4.4.cmml">â¢</mo><mrow id="S3.E9.m1.4.4.1.1.4.3" xref="S3.E9.m1.4.4.1.1.4.3.cmml"><munder id="S3.E9.m1.4.4.1.1.4.3.3" xref="S3.E9.m1.4.4.1.1.4.3.3.cmml"><mo id="S3.E9.m1.4.4.1.1.4.3.3.2" movablelimits="false" xref="S3.E9.m1.4.4.1.1.4.3.3.2.cmml">âˆ</mo><mrow id="S3.E9.m1.4.4.1.1.4.3.3.3" xref="S3.E9.m1.4.4.1.1.4.3.3.3.cmml"><mi id="S3.E9.m1.4.4.1.1.4.3.3.3.2" xref="S3.E9.m1.4.4.1.1.4.3.3.3.2.cmml">j</mi><mo id="S3.E9.m1.4.4.1.1.4.3.3.3.1" xref="S3.E9.m1.4.4.1.1.4.3.3.3.1.cmml">&lt;</mo><mi id="S3.E9.m1.4.4.1.1.4.3.3.3.3" xref="S3.E9.m1.4.4.1.1.4.3.3.3.3.cmml">i</mi></mrow></munder><mrow id="S3.E9.m1.4.4.1.1.4.3.2" xref="S3.E9.m1.4.4.1.1.4.3.2.cmml"><mi id="S3.E9.m1.4.4.1.1.4.3.2.4" xref="S3.E9.m1.4.4.1.1.4.3.2.4.cmml">Î´</mi><mo id="S3.E9.m1.4.4.1.1.4.3.2.3" xref="S3.E9.m1.4.4.1.1.4.3.2.3.cmml">â¢</mo><mrow id="S3.E9.m1.4.4.1.1.4.3.2.2.2" xref="S3.E9.m1.4.4.1.1.4.3.2.2.3.cmml"><mo id="S3.E9.m1.4.4.1.1.4.3.2.2.2.3" stretchy="false" xref="S3.E9.m1.4.4.1.1.4.3.2.2.3.cmml">(</mo><msub id="S3.E9.m1.4.4.1.1.3.2.1.1.1.1" xref="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.cmml"><mi id="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.2" xref="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.2.cmml">y</mi><mi id="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.3" xref="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.3.cmml">j</mi></msub><mo id="S3.E9.m1.4.4.1.1.4.3.2.2.2.4" xref="S3.E9.m1.4.4.1.1.4.3.2.2.3.cmml">,</mo><msubsup id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.cmml"><mi id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.2" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.3" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.3.cmml">j</mi><mi id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.3" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.3.cmml">t</mi></msubsup><mo id="S3.E9.m1.4.4.1.1.4.3.2.2.2.5" stretchy="false" xref="S3.E9.m1.4.4.1.1.4.3.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S3.E9.m1.4.4.1.2" xref="S3.E9.m1.4.4.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E9.m1.4b"><apply id="S3.E9.m1.4.4.1.1.cmml" xref="S3.E9.m1.4.4.1"><eq id="S3.E9.m1.4.4.1.1.5.cmml" xref="S3.E9.m1.4.4.1.1.5"></eq><apply id="S3.E9.m1.4.4.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.1"><times id="S3.E9.m1.4.4.1.1.1.2.cmml" xref="S3.E9.m1.4.4.1.1.1.2"></times><ci id="S3.E9.m1.4.4.1.1.1.3.cmml" xref="S3.E9.m1.4.4.1.1.1.3">ğ‘</ci><apply id="S3.E9.m1.4.4.1.1.1.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.1.1.1"><csymbol cd="latexml" id="S3.E9.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S3.E9.m1.4.4.1.1.1.1.1.1.2">conditional</csymbol><ci id="S3.E9.m1.4.4.1.1.1.1.1.1.3.cmml" xref="S3.E9.m1.4.4.1.1.1.1.1.1.3">ğ‘¦</ci><list id="S3.E9.m1.4.4.1.1.1.1.1.1.1.2.cmml" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.1"><apply id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E9.m1.4.4.1.1.1.1.1.1.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.E9.m1.1.1.cmml" xref="S3.E9.m1.1.1">ğ‘¥</ci><ci id="S3.E9.m1.2.2.cmml" xref="S3.E9.m1.2.2">ğ‘–</ci></list></apply></apply><apply id="S3.E9.m1.4.4.1.1.4.cmml" xref="S3.E9.m1.4.4.1.1.4"><times id="S3.E9.m1.4.4.1.1.4.4.cmml" xref="S3.E9.m1.4.4.1.1.4.4"></times><apply id="S3.E9.m1.4.4.1.1.4.5.cmml" xref="S3.E9.m1.4.4.1.1.4.5"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.4.5.1.cmml" xref="S3.E9.m1.4.4.1.1.4.5">subscript</csymbol><ci id="S3.E9.m1.4.4.1.1.4.5.2.cmml" xref="S3.E9.m1.4.4.1.1.4.5.2">ğ‘</ci><ci id="S3.E9.m1.4.4.1.1.4.5.3a.cmml" xref="S3.E9.m1.4.4.1.1.4.5.3"><mtext id="S3.E9.m1.4.4.1.1.4.5.3.cmml" mathsize="70%" xref="S3.E9.m1.4.4.1.1.4.5.3">LM</mtext></ci></apply><apply id="S3.E9.m1.4.4.1.1.2.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1"><csymbol cd="latexml" id="S3.E9.m1.4.4.1.1.2.1.1.1.2.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.2">conditional</csymbol><apply id="S3.E9.m1.4.4.1.1.2.1.1.1.3.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.2.1.1.1.3.1.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3">subscript</csymbol><ci id="S3.E9.m1.4.4.1.1.2.1.1.1.3.2.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.2">ğ‘¦</ci><apply id="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.3"><geq id="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.1.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.1"></geq><csymbol cd="latexml" id="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.2.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.2">absent</csymbol><ci id="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.3.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.3.3.3">ğ‘–</ci></apply></apply><list id="S3.E9.m1.4.4.1.1.2.1.1.1.1.2.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1"><apply id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1">subscript</csymbol><apply id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.1.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.2.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.2">ğ‘¦</ci><ci id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.3.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.2.3">ğ‘¡</ci></apply><apply id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3"><lt id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.1.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.2.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.2">absent</csymbol><ci id="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.3.cmml" xref="S3.E9.m1.4.4.1.1.2.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="S3.E9.m1.3.3.cmml" xref="S3.E9.m1.3.3">ğ‘¥</ci></list></apply><apply id="S3.E9.m1.4.4.1.1.4.3.cmml" xref="S3.E9.m1.4.4.1.1.4.3"><apply id="S3.E9.m1.4.4.1.1.4.3.3.cmml" xref="S3.E9.m1.4.4.1.1.4.3.3"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.4.3.3.1.cmml" xref="S3.E9.m1.4.4.1.1.4.3.3">subscript</csymbol><csymbol cd="latexml" id="S3.E9.m1.4.4.1.1.4.3.3.2.cmml" xref="S3.E9.m1.4.4.1.1.4.3.3.2">product</csymbol><apply id="S3.E9.m1.4.4.1.1.4.3.3.3.cmml" xref="S3.E9.m1.4.4.1.1.4.3.3.3"><lt id="S3.E9.m1.4.4.1.1.4.3.3.3.1.cmml" xref="S3.E9.m1.4.4.1.1.4.3.3.3.1"></lt><ci id="S3.E9.m1.4.4.1.1.4.3.3.3.2.cmml" xref="S3.E9.m1.4.4.1.1.4.3.3.3.2">ğ‘—</ci><ci id="S3.E9.m1.4.4.1.1.4.3.3.3.3.cmml" xref="S3.E9.m1.4.4.1.1.4.3.3.3.3">ğ‘–</ci></apply></apply><apply id="S3.E9.m1.4.4.1.1.4.3.2.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2"><times id="S3.E9.m1.4.4.1.1.4.3.2.3.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.3"></times><ci id="S3.E9.m1.4.4.1.1.4.3.2.4.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.4">ğ›¿</ci><interval closure="open" id="S3.E9.m1.4.4.1.1.4.3.2.2.3.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2"><apply id="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.3.2.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.1.cmml" xref="S3.E9.m1.4.4.1.1.3.2.1.1.1.1">subscript</csymbol><ci id="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.2.cmml" xref="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.3.cmml" xref="S3.E9.m1.4.4.1.1.3.2.1.1.1.1.3">ğ‘—</ci></apply><apply id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.1.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2">subscript</csymbol><apply id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2"><csymbol cd="ambiguous" id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.1.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2">superscript</csymbol><ci id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.2.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.2">ğ‘¦</ci><ci id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.3.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.2.3">ğ‘¡</ci></apply><ci id="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.3.cmml" xref="S3.E9.m1.4.4.1.1.4.3.2.2.2.2.3">ğ‘—</ci></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E9.m1.4c">q(y|y^{t},x,i)=p_{\text{LM}}(y_{\geq i}|y^{t}_{&lt;i},x)\prod_{j&lt;i}\delta(y_{j},y%
^{t}_{j}),</annotation><annotation encoding="application/x-llamapun" id="S3.E9.m1.4d">italic_q ( italic_y | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x , italic_i ) = italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) âˆ start_POSTSUBSCRIPT italic_j &lt; italic_i end_POSTSUBSCRIPT italic_Î´ ( italic_y start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(9)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS2.p3.8">where <math alttext="\delta(y_{j},y^{t}_{j})" class="ltx_Math" display="inline" id="S3.SS2.p3.7.m1.2"><semantics id="S3.SS2.p3.7.m1.2a"><mrow id="S3.SS2.p3.7.m1.2.2" xref="S3.SS2.p3.7.m1.2.2.cmml"><mi id="S3.SS2.p3.7.m1.2.2.4" xref="S3.SS2.p3.7.m1.2.2.4.cmml">Î´</mi><mo id="S3.SS2.p3.7.m1.2.2.3" xref="S3.SS2.p3.7.m1.2.2.3.cmml">â¢</mo><mrow id="S3.SS2.p3.7.m1.2.2.2.2" xref="S3.SS2.p3.7.m1.2.2.2.3.cmml"><mo id="S3.SS2.p3.7.m1.2.2.2.2.3" stretchy="false" xref="S3.SS2.p3.7.m1.2.2.2.3.cmml">(</mo><msub id="S3.SS2.p3.7.m1.1.1.1.1.1" xref="S3.SS2.p3.7.m1.1.1.1.1.1.cmml"><mi id="S3.SS2.p3.7.m1.1.1.1.1.1.2" xref="S3.SS2.p3.7.m1.1.1.1.1.1.2.cmml">y</mi><mi id="S3.SS2.p3.7.m1.1.1.1.1.1.3" xref="S3.SS2.p3.7.m1.1.1.1.1.1.3.cmml">j</mi></msub><mo id="S3.SS2.p3.7.m1.2.2.2.2.4" xref="S3.SS2.p3.7.m1.2.2.2.3.cmml">,</mo><msubsup id="S3.SS2.p3.7.m1.2.2.2.2.2" xref="S3.SS2.p3.7.m1.2.2.2.2.2.cmml"><mi id="S3.SS2.p3.7.m1.2.2.2.2.2.2.2" xref="S3.SS2.p3.7.m1.2.2.2.2.2.2.2.cmml">y</mi><mi id="S3.SS2.p3.7.m1.2.2.2.2.2.3" xref="S3.SS2.p3.7.m1.2.2.2.2.2.3.cmml">j</mi><mi id="S3.SS2.p3.7.m1.2.2.2.2.2.2.3" xref="S3.SS2.p3.7.m1.2.2.2.2.2.2.3.cmml">t</mi></msubsup><mo id="S3.SS2.p3.7.m1.2.2.2.2.5" stretchy="false" xref="S3.SS2.p3.7.m1.2.2.2.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.7.m1.2b"><apply id="S3.SS2.p3.7.m1.2.2.cmml" xref="S3.SS2.p3.7.m1.2.2"><times id="S3.SS2.p3.7.m1.2.2.3.cmml" xref="S3.SS2.p3.7.m1.2.2.3"></times><ci id="S3.SS2.p3.7.m1.2.2.4.cmml" xref="S3.SS2.p3.7.m1.2.2.4">ğ›¿</ci><interval closure="open" id="S3.SS2.p3.7.m1.2.2.2.3.cmml" xref="S3.SS2.p3.7.m1.2.2.2.2"><apply id="S3.SS2.p3.7.m1.1.1.1.1.1.cmml" xref="S3.SS2.p3.7.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.7.m1.1.1.1.1.1.1.cmml" xref="S3.SS2.p3.7.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.SS2.p3.7.m1.1.1.1.1.1.2.cmml" xref="S3.SS2.p3.7.m1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS2.p3.7.m1.1.1.1.1.1.3.cmml" xref="S3.SS2.p3.7.m1.1.1.1.1.1.3">ğ‘—</ci></apply><apply id="S3.SS2.p3.7.m1.2.2.2.2.2.cmml" xref="S3.SS2.p3.7.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.p3.7.m1.2.2.2.2.2.1.cmml" xref="S3.SS2.p3.7.m1.2.2.2.2.2">subscript</csymbol><apply id="S3.SS2.p3.7.m1.2.2.2.2.2.2.cmml" xref="S3.SS2.p3.7.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.p3.7.m1.2.2.2.2.2.2.1.cmml" xref="S3.SS2.p3.7.m1.2.2.2.2.2">superscript</csymbol><ci id="S3.SS2.p3.7.m1.2.2.2.2.2.2.2.cmml" xref="S3.SS2.p3.7.m1.2.2.2.2.2.2.2">ğ‘¦</ci><ci id="S3.SS2.p3.7.m1.2.2.2.2.2.2.3.cmml" xref="S3.SS2.p3.7.m1.2.2.2.2.2.2.3">ğ‘¡</ci></apply><ci id="S3.SS2.p3.7.m1.2.2.2.2.2.3.cmml" xref="S3.SS2.p3.7.m1.2.2.2.2.2.3">ğ‘—</ci></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.7.m1.2c">\delta(y_{j},y^{t}_{j})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.7.m1.2d">italic_Î´ ( italic_y start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT )</annotation></semantics></math> is the Kronecker delta function, which assigns zero probability to prefix tokens which are different from <math alttext="y^{t}_{&lt;i}" class="ltx_Math" display="inline" id="S3.SS2.p3.8.m2.1"><semantics id="S3.SS2.p3.8.m2.1a"><msubsup id="S3.SS2.p3.8.m2.1.1" xref="S3.SS2.p3.8.m2.1.1.cmml"><mi id="S3.SS2.p3.8.m2.1.1.2.2" xref="S3.SS2.p3.8.m2.1.1.2.2.cmml">y</mi><mrow id="S3.SS2.p3.8.m2.1.1.3" xref="S3.SS2.p3.8.m2.1.1.3.cmml"><mi id="S3.SS2.p3.8.m2.1.1.3.2" xref="S3.SS2.p3.8.m2.1.1.3.2.cmml"></mi><mo id="S3.SS2.p3.8.m2.1.1.3.1" xref="S3.SS2.p3.8.m2.1.1.3.1.cmml">&lt;</mo><mi id="S3.SS2.p3.8.m2.1.1.3.3" xref="S3.SS2.p3.8.m2.1.1.3.3.cmml">i</mi></mrow><mi id="S3.SS2.p3.8.m2.1.1.2.3" xref="S3.SS2.p3.8.m2.1.1.2.3.cmml">t</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.8.m2.1b"><apply id="S3.SS2.p3.8.m2.1.1.cmml" xref="S3.SS2.p3.8.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.8.m2.1.1.1.cmml" xref="S3.SS2.p3.8.m2.1.1">subscript</csymbol><apply id="S3.SS2.p3.8.m2.1.1.2.cmml" xref="S3.SS2.p3.8.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.8.m2.1.1.2.1.cmml" xref="S3.SS2.p3.8.m2.1.1">superscript</csymbol><ci id="S3.SS2.p3.8.m2.1.1.2.2.cmml" xref="S3.SS2.p3.8.m2.1.1.2.2">ğ‘¦</ci><ci id="S3.SS2.p3.8.m2.1.1.2.3.cmml" xref="S3.SS2.p3.8.m2.1.1.2.3">ğ‘¡</ci></apply><apply id="S3.SS2.p3.8.m2.1.1.3.cmml" xref="S3.SS2.p3.8.m2.1.1.3"><lt id="S3.SS2.p3.8.m2.1.1.3.1.cmml" xref="S3.SS2.p3.8.m2.1.1.3.1"></lt><csymbol cd="latexml" id="S3.SS2.p3.8.m2.1.1.3.2.cmml" xref="S3.SS2.p3.8.m2.1.1.3.2">absent</csymbol><ci id="S3.SS2.p3.8.m2.1.1.3.3.cmml" xref="S3.SS2.p3.8.m2.1.1.3.3">ğ‘–</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.8.m2.1c">y^{t}_{&lt;i}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.8.m2.1d">italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and probability one to tokens matching the prefix.</p>
</div>
<div class="ltx_para" id="S3.SS2.p4">
<p class="ltx_p" id="S3.SS2.p4.2">The complete proposal when we include the index distribution <math alttext="q({i}|n^{t})" class="ltx_Math" display="inline" id="S3.SS2.p4.1.m1.1"><semantics id="S3.SS2.p4.1.m1.1a"><mrow id="S3.SS2.p4.1.m1.1.1" xref="S3.SS2.p4.1.m1.1.1.cmml"><mi id="S3.SS2.p4.1.m1.1.1.3" xref="S3.SS2.p4.1.m1.1.1.3.cmml">q</mi><mo id="S3.SS2.p4.1.m1.1.1.2" xref="S3.SS2.p4.1.m1.1.1.2.cmml">â¢</mo><mrow id="S3.SS2.p4.1.m1.1.1.1.1" xref="S3.SS2.p4.1.m1.1.1.1.1.1.cmml"><mo id="S3.SS2.p4.1.m1.1.1.1.1.2" stretchy="false" xref="S3.SS2.p4.1.m1.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS2.p4.1.m1.1.1.1.1.1" xref="S3.SS2.p4.1.m1.1.1.1.1.1.cmml"><mi id="S3.SS2.p4.1.m1.1.1.1.1.1.2" xref="S3.SS2.p4.1.m1.1.1.1.1.1.2.cmml">i</mi><mo fence="false" id="S3.SS2.p4.1.m1.1.1.1.1.1.1" xref="S3.SS2.p4.1.m1.1.1.1.1.1.1.cmml">|</mo><msup id="S3.SS2.p4.1.m1.1.1.1.1.1.3" xref="S3.SS2.p4.1.m1.1.1.1.1.1.3.cmml"><mi id="S3.SS2.p4.1.m1.1.1.1.1.1.3.2" xref="S3.SS2.p4.1.m1.1.1.1.1.1.3.2.cmml">n</mi><mi id="S3.SS2.p4.1.m1.1.1.1.1.1.3.3" xref="S3.SS2.p4.1.m1.1.1.1.1.1.3.3.cmml">t</mi></msup></mrow><mo id="S3.SS2.p4.1.m1.1.1.1.1.3" stretchy="false" xref="S3.SS2.p4.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.1.m1.1b"><apply id="S3.SS2.p4.1.m1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1"><times id="S3.SS2.p4.1.m1.1.1.2.cmml" xref="S3.SS2.p4.1.m1.1.1.2"></times><ci id="S3.SS2.p4.1.m1.1.1.3.cmml" xref="S3.SS2.p4.1.m1.1.1.3">ğ‘</ci><apply id="S3.SS2.p4.1.m1.1.1.1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1.1.1"><csymbol cd="latexml" id="S3.SS2.p4.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS2.p4.1.m1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS2.p4.1.m1.1.1.1.1.1.2.cmml" xref="S3.SS2.p4.1.m1.1.1.1.1.1.2">ğ‘–</ci><apply id="S3.SS2.p4.1.m1.1.1.1.1.1.3.cmml" xref="S3.SS2.p4.1.m1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p4.1.m1.1.1.1.1.1.3.1.cmml" xref="S3.SS2.p4.1.m1.1.1.1.1.1.3">superscript</csymbol><ci id="S3.SS2.p4.1.m1.1.1.1.1.1.3.2.cmml" xref="S3.SS2.p4.1.m1.1.1.1.1.1.3.2">ğ‘›</ci><ci id="S3.SS2.p4.1.m1.1.1.1.1.1.3.3.cmml" xref="S3.SS2.p4.1.m1.1.1.1.1.1.3.3">ğ‘¡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.1.m1.1c">q({i}|n^{t})</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.1.m1.1d">italic_q ( italic_i | italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT )</annotation></semantics></math>, which depends on the previous sentence lengths <math alttext="n^{t}:=|y^{t}|" class="ltx_Math" display="inline" id="S3.SS2.p4.2.m2.1"><semantics id="S3.SS2.p4.2.m2.1a"><mrow id="S3.SS2.p4.2.m2.1.1" xref="S3.SS2.p4.2.m2.1.1.cmml"><msup id="S3.SS2.p4.2.m2.1.1.3" xref="S3.SS2.p4.2.m2.1.1.3.cmml"><mi id="S3.SS2.p4.2.m2.1.1.3.2" xref="S3.SS2.p4.2.m2.1.1.3.2.cmml">n</mi><mi id="S3.SS2.p4.2.m2.1.1.3.3" xref="S3.SS2.p4.2.m2.1.1.3.3.cmml">t</mi></msup><mo id="S3.SS2.p4.2.m2.1.1.2" lspace="0.278em" rspace="0.278em" xref="S3.SS2.p4.2.m2.1.1.2.cmml">:=</mo><mrow id="S3.SS2.p4.2.m2.1.1.1.1" xref="S3.SS2.p4.2.m2.1.1.1.2.cmml"><mo id="S3.SS2.p4.2.m2.1.1.1.1.2" stretchy="false" xref="S3.SS2.p4.2.m2.1.1.1.2.1.cmml">|</mo><msup id="S3.SS2.p4.2.m2.1.1.1.1.1" xref="S3.SS2.p4.2.m2.1.1.1.1.1.cmml"><mi id="S3.SS2.p4.2.m2.1.1.1.1.1.2" xref="S3.SS2.p4.2.m2.1.1.1.1.1.2.cmml">y</mi><mi id="S3.SS2.p4.2.m2.1.1.1.1.1.3" xref="S3.SS2.p4.2.m2.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.SS2.p4.2.m2.1.1.1.1.3" stretchy="false" xref="S3.SS2.p4.2.m2.1.1.1.2.1.cmml">|</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p4.2.m2.1b"><apply id="S3.SS2.p4.2.m2.1.1.cmml" xref="S3.SS2.p4.2.m2.1.1"><csymbol cd="latexml" id="S3.SS2.p4.2.m2.1.1.2.cmml" xref="S3.SS2.p4.2.m2.1.1.2">assign</csymbol><apply id="S3.SS2.p4.2.m2.1.1.3.cmml" xref="S3.SS2.p4.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p4.2.m2.1.1.3.1.cmml" xref="S3.SS2.p4.2.m2.1.1.3">superscript</csymbol><ci id="S3.SS2.p4.2.m2.1.1.3.2.cmml" xref="S3.SS2.p4.2.m2.1.1.3.2">ğ‘›</ci><ci id="S3.SS2.p4.2.m2.1.1.3.3.cmml" xref="S3.SS2.p4.2.m2.1.1.3.3">ğ‘¡</ci></apply><apply id="S3.SS2.p4.2.m2.1.1.1.2.cmml" xref="S3.SS2.p4.2.m2.1.1.1.1"><abs id="S3.SS2.p4.2.m2.1.1.1.2.1.cmml" xref="S3.SS2.p4.2.m2.1.1.1.1.2"></abs><apply id="S3.SS2.p4.2.m2.1.1.1.1.1.cmml" xref="S3.SS2.p4.2.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p4.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS2.p4.2.m2.1.1.1.1.1">superscript</csymbol><ci id="S3.SS2.p4.2.m2.1.1.1.1.1.2.cmml" xref="S3.SS2.p4.2.m2.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS2.p4.2.m2.1.1.1.1.1.3.cmml" xref="S3.SS2.p4.2.m2.1.1.1.1.1.3">ğ‘¡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p4.2.m2.1c">n^{t}:=|y^{t}|</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p4.2.m2.1d">italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT := | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT |</annotation></semantics></math>, is given as</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E10">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="q(y,{i}|y^{t},x)=q(i|n^{t})p_{\text{LM}}(y_{i\geq}|y^{t}_{&lt;i},x)\prod_{j&lt;i}%
\delta(y_{j},y^{t}_{j})." class="ltx_Math" display="block" id="S3.E10.m1.4"><semantics id="S3.E10.m1.4a"><mrow id="S3.E10.m1.4.4.1" xref="S3.E10.m1.4.4.1.1.cmml"><mrow id="S3.E10.m1.4.4.1.1" xref="S3.E10.m1.4.4.1.1.cmml"><mrow id="S3.E10.m1.4.4.1.1.1" xref="S3.E10.m1.4.4.1.1.1.cmml"><mi id="S3.E10.m1.4.4.1.1.1.3" xref="S3.E10.m1.4.4.1.1.1.3.cmml">q</mi><mo id="S3.E10.m1.4.4.1.1.1.2" xref="S3.E10.m1.4.4.1.1.1.2.cmml">â¢</mo><mrow id="S3.E10.m1.4.4.1.1.1.1.1" xref="S3.E10.m1.4.4.1.1.1.1.2.cmml"><mo id="S3.E10.m1.4.4.1.1.1.1.1.2" stretchy="false" xref="S3.E10.m1.4.4.1.1.1.1.2.cmml">(</mo><mi id="S3.E10.m1.2.2" xref="S3.E10.m1.2.2.cmml">y</mi><mo id="S3.E10.m1.4.4.1.1.1.1.1.3" xref="S3.E10.m1.4.4.1.1.1.1.2.cmml">,</mo><mrow id="S3.E10.m1.4.4.1.1.1.1.1.1" xref="S3.E10.m1.4.4.1.1.1.1.1.1.cmml"><mi id="S3.E10.m1.4.4.1.1.1.1.1.1.3" xref="S3.E10.m1.4.4.1.1.1.1.1.1.3.cmml">i</mi><mo fence="false" id="S3.E10.m1.4.4.1.1.1.1.1.1.2" xref="S3.E10.m1.4.4.1.1.1.1.1.1.2.cmml">|</mo><mrow id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.2.cmml"><msup id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.2" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml">y</mi><mi id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.3" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.2" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.2.cmml">,</mo><mi id="S3.E10.m1.1.1" xref="S3.E10.m1.1.1.cmml">x</mi></mrow></mrow><mo id="S3.E10.m1.4.4.1.1.1.1.1.4" stretchy="false" xref="S3.E10.m1.4.4.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.E10.m1.4.4.1.1.6" xref="S3.E10.m1.4.4.1.1.6.cmml">=</mo><mrow id="S3.E10.m1.4.4.1.1.5" xref="S3.E10.m1.4.4.1.1.5.cmml"><mi id="S3.E10.m1.4.4.1.1.5.6" xref="S3.E10.m1.4.4.1.1.5.6.cmml">q</mi><mo id="S3.E10.m1.4.4.1.1.5.5" xref="S3.E10.m1.4.4.1.1.5.5.cmml">â¢</mo><mrow id="S3.E10.m1.4.4.1.1.2.1.1" xref="S3.E10.m1.4.4.1.1.2.1.1.1.cmml"><mo id="S3.E10.m1.4.4.1.1.2.1.1.2" stretchy="false" xref="S3.E10.m1.4.4.1.1.2.1.1.1.cmml">(</mo><mrow id="S3.E10.m1.4.4.1.1.2.1.1.1" xref="S3.E10.m1.4.4.1.1.2.1.1.1.cmml"><mi id="S3.E10.m1.4.4.1.1.2.1.1.1.2" xref="S3.E10.m1.4.4.1.1.2.1.1.1.2.cmml">i</mi><mo fence="false" id="S3.E10.m1.4.4.1.1.2.1.1.1.1" xref="S3.E10.m1.4.4.1.1.2.1.1.1.1.cmml">|</mo><msup id="S3.E10.m1.4.4.1.1.2.1.1.1.3" xref="S3.E10.m1.4.4.1.1.2.1.1.1.3.cmml"><mi id="S3.E10.m1.4.4.1.1.2.1.1.1.3.2" xref="S3.E10.m1.4.4.1.1.2.1.1.1.3.2.cmml">n</mi><mi id="S3.E10.m1.4.4.1.1.2.1.1.1.3.3" xref="S3.E10.m1.4.4.1.1.2.1.1.1.3.3.cmml">t</mi></msup></mrow><mo id="S3.E10.m1.4.4.1.1.2.1.1.3" stretchy="false" xref="S3.E10.m1.4.4.1.1.2.1.1.1.cmml">)</mo></mrow><mo id="S3.E10.m1.4.4.1.1.5.5a" xref="S3.E10.m1.4.4.1.1.5.5.cmml">â¢</mo><msub id="S3.E10.m1.4.4.1.1.5.7" xref="S3.E10.m1.4.4.1.1.5.7.cmml"><mi id="S3.E10.m1.4.4.1.1.5.7.2" xref="S3.E10.m1.4.4.1.1.5.7.2.cmml">p</mi><mtext id="S3.E10.m1.4.4.1.1.5.7.3" xref="S3.E10.m1.4.4.1.1.5.7.3a.cmml">LM</mtext></msub><mo id="S3.E10.m1.4.4.1.1.5.5b" xref="S3.E10.m1.4.4.1.1.5.5.cmml">â¢</mo><mrow id="S3.E10.m1.4.4.1.1.3.2.1" xref="S3.E10.m1.4.4.1.1.3.2.1.1.cmml"><mo id="S3.E10.m1.4.4.1.1.3.2.1.2" stretchy="false" xref="S3.E10.m1.4.4.1.1.3.2.1.1.cmml">(</mo><mrow id="S3.E10.m1.4.4.1.1.3.2.1.1" xref="S3.E10.m1.4.4.1.1.3.2.1.1.cmml"><msub id="S3.E10.m1.4.4.1.1.3.2.1.1.3" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.cmml"><mi id="S3.E10.m1.4.4.1.1.3.2.1.1.3.2" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.2.cmml">y</mi><mrow id="S3.E10.m1.4.4.1.1.3.2.1.1.3.3" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.cmml"><mi id="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.2" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.2.cmml">i</mi><mo id="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.1" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.1.cmml">â‰¥</mo><mi id="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.3" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.3.cmml"></mi></mrow></msub><mo fence="false" id="S3.E10.m1.4.4.1.1.3.2.1.1.2" xref="S3.E10.m1.4.4.1.1.3.2.1.1.2.cmml">|</mo><mrow id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.2.cmml"><msubsup id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.cmml"><mi id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.2" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.2.cmml">y</mi><mrow id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.cmml"><mi id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.2" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.2.cmml"></mi><mo id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.1" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.3" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.3.cmml">i</mi></mrow><mi id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.3" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.3.cmml">t</mi></msubsup><mo id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.2" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.2.cmml">,</mo><mi id="S3.E10.m1.3.3" xref="S3.E10.m1.3.3.cmml">x</mi></mrow></mrow><mo id="S3.E10.m1.4.4.1.1.3.2.1.3" stretchy="false" xref="S3.E10.m1.4.4.1.1.3.2.1.1.cmml">)</mo></mrow><mo id="S3.E10.m1.4.4.1.1.5.5c" xref="S3.E10.m1.4.4.1.1.5.5.cmml">â¢</mo><mrow id="S3.E10.m1.4.4.1.1.5.4" xref="S3.E10.m1.4.4.1.1.5.4.cmml"><munder id="S3.E10.m1.4.4.1.1.5.4.3" xref="S3.E10.m1.4.4.1.1.5.4.3.cmml"><mo id="S3.E10.m1.4.4.1.1.5.4.3.2" movablelimits="false" xref="S3.E10.m1.4.4.1.1.5.4.3.2.cmml">âˆ</mo><mrow id="S3.E10.m1.4.4.1.1.5.4.3.3" xref="S3.E10.m1.4.4.1.1.5.4.3.3.cmml"><mi id="S3.E10.m1.4.4.1.1.5.4.3.3.2" xref="S3.E10.m1.4.4.1.1.5.4.3.3.2.cmml">j</mi><mo id="S3.E10.m1.4.4.1.1.5.4.3.3.1" xref="S3.E10.m1.4.4.1.1.5.4.3.3.1.cmml">&lt;</mo><mi id="S3.E10.m1.4.4.1.1.5.4.3.3.3" xref="S3.E10.m1.4.4.1.1.5.4.3.3.3.cmml">i</mi></mrow></munder><mrow id="S3.E10.m1.4.4.1.1.5.4.2" xref="S3.E10.m1.4.4.1.1.5.4.2.cmml"><mi id="S3.E10.m1.4.4.1.1.5.4.2.4" xref="S3.E10.m1.4.4.1.1.5.4.2.4.cmml">Î´</mi><mo id="S3.E10.m1.4.4.1.1.5.4.2.3" xref="S3.E10.m1.4.4.1.1.5.4.2.3.cmml">â¢</mo><mrow id="S3.E10.m1.4.4.1.1.5.4.2.2.2" xref="S3.E10.m1.4.4.1.1.5.4.2.2.3.cmml"><mo id="S3.E10.m1.4.4.1.1.5.4.2.2.2.3" stretchy="false" xref="S3.E10.m1.4.4.1.1.5.4.2.2.3.cmml">(</mo><msub id="S3.E10.m1.4.4.1.1.4.3.1.1.1.1" xref="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.cmml"><mi id="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.2" xref="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.2.cmml">y</mi><mi id="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.3" xref="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.3.cmml">j</mi></msub><mo id="S3.E10.m1.4.4.1.1.5.4.2.2.2.4" xref="S3.E10.m1.4.4.1.1.5.4.2.2.3.cmml">,</mo><msubsup id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.cmml"><mi id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.2" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.3" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.3.cmml">j</mi><mi id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.3" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.3.cmml">t</mi></msubsup><mo id="S3.E10.m1.4.4.1.1.5.4.2.2.2.5" stretchy="false" xref="S3.E10.m1.4.4.1.1.5.4.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><mo id="S3.E10.m1.4.4.1.2" lspace="0em" xref="S3.E10.m1.4.4.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E10.m1.4b"><apply id="S3.E10.m1.4.4.1.1.cmml" xref="S3.E10.m1.4.4.1"><eq id="S3.E10.m1.4.4.1.1.6.cmml" xref="S3.E10.m1.4.4.1.1.6"></eq><apply id="S3.E10.m1.4.4.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.1"><times id="S3.E10.m1.4.4.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.1.2"></times><ci id="S3.E10.m1.4.4.1.1.1.3.cmml" xref="S3.E10.m1.4.4.1.1.1.3">ğ‘</ci><interval closure="open" id="S3.E10.m1.4.4.1.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1"><ci id="S3.E10.m1.2.2.cmml" xref="S3.E10.m1.2.2">ğ‘¦</ci><apply id="S3.E10.m1.4.4.1.1.1.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.E10.m1.4.4.1.1.1.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1.1.2">conditional</csymbol><ci id="S3.E10.m1.4.4.1.1.1.1.1.1.3.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1.1.3">ğ‘–</ci><list id="S3.E10.m1.4.4.1.1.1.1.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.1"><apply id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E10.m1.4.4.1.1.1.1.1.1.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.E10.m1.1.1.cmml" xref="S3.E10.m1.1.1">ğ‘¥</ci></list></apply></interval></apply><apply id="S3.E10.m1.4.4.1.1.5.cmml" xref="S3.E10.m1.4.4.1.1.5"><times id="S3.E10.m1.4.4.1.1.5.5.cmml" xref="S3.E10.m1.4.4.1.1.5.5"></times><ci id="S3.E10.m1.4.4.1.1.5.6.cmml" xref="S3.E10.m1.4.4.1.1.5.6">ğ‘</ci><apply id="S3.E10.m1.4.4.1.1.2.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.2.1.1"><csymbol cd="latexml" id="S3.E10.m1.4.4.1.1.2.1.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.2.1.1.1.1">conditional</csymbol><ci id="S3.E10.m1.4.4.1.1.2.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.2.1.1.1.2">ğ‘–</ci><apply id="S3.E10.m1.4.4.1.1.2.1.1.1.3.cmml" xref="S3.E10.m1.4.4.1.1.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.2.1.1.1.3.1.cmml" xref="S3.E10.m1.4.4.1.1.2.1.1.1.3">superscript</csymbol><ci id="S3.E10.m1.4.4.1.1.2.1.1.1.3.2.cmml" xref="S3.E10.m1.4.4.1.1.2.1.1.1.3.2">ğ‘›</ci><ci id="S3.E10.m1.4.4.1.1.2.1.1.1.3.3.cmml" xref="S3.E10.m1.4.4.1.1.2.1.1.1.3.3">ğ‘¡</ci></apply></apply><apply id="S3.E10.m1.4.4.1.1.5.7.cmml" xref="S3.E10.m1.4.4.1.1.5.7"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.5.7.1.cmml" xref="S3.E10.m1.4.4.1.1.5.7">subscript</csymbol><ci id="S3.E10.m1.4.4.1.1.5.7.2.cmml" xref="S3.E10.m1.4.4.1.1.5.7.2">ğ‘</ci><ci id="S3.E10.m1.4.4.1.1.5.7.3a.cmml" xref="S3.E10.m1.4.4.1.1.5.7.3"><mtext id="S3.E10.m1.4.4.1.1.5.7.3.cmml" mathsize="70%" xref="S3.E10.m1.4.4.1.1.5.7.3">LM</mtext></ci></apply><apply id="S3.E10.m1.4.4.1.1.3.2.1.1.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1"><csymbol cd="latexml" id="S3.E10.m1.4.4.1.1.3.2.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.2">conditional</csymbol><apply id="S3.E10.m1.4.4.1.1.3.2.1.1.3.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.3.2.1.1.3.1.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3">subscript</csymbol><ci id="S3.E10.m1.4.4.1.1.3.2.1.1.3.2.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.2">ğ‘¦</ci><apply id="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.3"><geq id="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.1.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.1"></geq><ci id="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.2.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.2">ğ‘–</ci><csymbol cd="latexml" id="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.3.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.3.3.3">absent</csymbol></apply></apply><list id="S3.E10.m1.4.4.1.1.3.2.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1"><apply id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1">subscript</csymbol><apply id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.1.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1">superscript</csymbol><ci id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.2.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.2">ğ‘¦</ci><ci id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.3.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.2.3">ğ‘¡</ci></apply><apply id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3"><lt id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.1.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.2.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.2">absent</csymbol><ci id="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.3.cmml" xref="S3.E10.m1.4.4.1.1.3.2.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="S3.E10.m1.3.3.cmml" xref="S3.E10.m1.3.3">ğ‘¥</ci></list></apply><apply id="S3.E10.m1.4.4.1.1.5.4.cmml" xref="S3.E10.m1.4.4.1.1.5.4"><apply id="S3.E10.m1.4.4.1.1.5.4.3.cmml" xref="S3.E10.m1.4.4.1.1.5.4.3"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.5.4.3.1.cmml" xref="S3.E10.m1.4.4.1.1.5.4.3">subscript</csymbol><csymbol cd="latexml" id="S3.E10.m1.4.4.1.1.5.4.3.2.cmml" xref="S3.E10.m1.4.4.1.1.5.4.3.2">product</csymbol><apply id="S3.E10.m1.4.4.1.1.5.4.3.3.cmml" xref="S3.E10.m1.4.4.1.1.5.4.3.3"><lt id="S3.E10.m1.4.4.1.1.5.4.3.3.1.cmml" xref="S3.E10.m1.4.4.1.1.5.4.3.3.1"></lt><ci id="S3.E10.m1.4.4.1.1.5.4.3.3.2.cmml" xref="S3.E10.m1.4.4.1.1.5.4.3.3.2">ğ‘—</ci><ci id="S3.E10.m1.4.4.1.1.5.4.3.3.3.cmml" xref="S3.E10.m1.4.4.1.1.5.4.3.3.3">ğ‘–</ci></apply></apply><apply id="S3.E10.m1.4.4.1.1.5.4.2.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2"><times id="S3.E10.m1.4.4.1.1.5.4.2.3.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.3"></times><ci id="S3.E10.m1.4.4.1.1.5.4.2.4.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.4">ğ›¿</ci><interval closure="open" id="S3.E10.m1.4.4.1.1.5.4.2.2.3.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2"><apply id="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.4.3.1.1.1.1"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.1.cmml" xref="S3.E10.m1.4.4.1.1.4.3.1.1.1.1">subscript</csymbol><ci id="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.2.cmml" xref="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.3.cmml" xref="S3.E10.m1.4.4.1.1.4.3.1.1.1.1.3">ğ‘—</ci></apply><apply id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.1.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2">subscript</csymbol><apply id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2"><csymbol cd="ambiguous" id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.1.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2">superscript</csymbol><ci id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.2.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.2">ğ‘¦</ci><ci id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.3.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.2.3">ğ‘¡</ci></apply><ci id="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.3.cmml" xref="S3.E10.m1.4.4.1.1.5.4.2.2.2.2.3">ğ‘—</ci></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E10.m1.4c">q(y,{i}|y^{t},x)=q(i|n^{t})p_{\text{LM}}(y_{i\geq}|y^{t}_{&lt;i},x)\prod_{j&lt;i}%
\delta(y_{j},y^{t}_{j}).</annotation><annotation encoding="application/x-llamapun" id="S3.E10.m1.4d">italic_q ( italic_y , italic_i | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x ) = italic_q ( italic_i | italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT italic_i â‰¥ end_POSTSUBSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) âˆ start_POSTSUBSCRIPT italic_j &lt; italic_i end_POSTSUBSCRIPT italic_Î´ ( italic_y start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_j end_POSTSUBSCRIPT ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(10)</span></td>
</tr></tbody>
</table>
</div>
<figure class="ltx_figure ltx_align_floatright" id="S3.SS2.fig1">
<figure class="ltx_float ltx_minipage ltx_align_middle ltx_framed ltx_framed_top" id="alg1" style="width:195.1pt;">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.6.1.1">Algorithm 1</span> </span> <span class="ltx_text ltx_font_smallcaps" id="alg1.7.2">QU</span>ality-Aware m<span class="ltx_text ltx_font_smallcaps" id="alg1.8.3">E</span>tropolis-Ha<span class="ltx_text ltx_font_smallcaps" id="alg1.9.4">ST</span>ings (<span class="ltx_text ltx_font_smallcaps" id="alg1.10.5">Quest</span>) Sampling </figcaption>
<div class="ltx_listing ltx_listing" id="alg1.11">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l1.1.1.1" style="font-size:80%;">1:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l1.2">Input:</span> <math alttext="x" class="ltx_Math" display="inline" id="alg1.l1.m1.1"><semantics id="alg1.l1.m1.1a"><mi id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b"><ci id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m1.1d">italic_x</annotation></semantics></math>, <math alttext="p_{\text{LM}}" class="ltx_Math" display="inline" id="alg1.l1.m2.1"><semantics id="alg1.l1.m2.1a"><msub id="alg1.l1.m2.1.1" xref="alg1.l1.m2.1.1.cmml"><mi id="alg1.l1.m2.1.1.2" xref="alg1.l1.m2.1.1.2.cmml">p</mi><mtext id="alg1.l1.m2.1.1.3" xref="alg1.l1.m2.1.1.3a.cmml">LM</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l1.m2.1b"><apply id="alg1.l1.m2.1.1.cmml" xref="alg1.l1.m2.1.1"><csymbol cd="ambiguous" id="alg1.l1.m2.1.1.1.cmml" xref="alg1.l1.m2.1.1">subscript</csymbol><ci id="alg1.l1.m2.1.1.2.cmml" xref="alg1.l1.m2.1.1.2">ğ‘</ci><ci id="alg1.l1.m2.1.1.3a.cmml" xref="alg1.l1.m2.1.1.3"><mtext id="alg1.l1.m2.1.1.3.cmml" mathsize="70%" xref="alg1.l1.m2.1.1.3">LM</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m2.1c">p_{\text{LM}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m2.1d">italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="r" class="ltx_Math" display="inline" id="alg1.l1.m3.1"><semantics id="alg1.l1.m3.1a"><mi id="alg1.l1.m3.1.1" xref="alg1.l1.m3.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m3.1b"><ci id="alg1.l1.m3.1.1.cmml" xref="alg1.l1.m3.1.1">ğ‘Ÿ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m3.1c">r</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m3.1d">italic_r</annotation></semantics></math>, <math alttext="T" class="ltx_Math" display="inline" id="alg1.l1.m4.1"><semantics id="alg1.l1.m4.1a"><mi id="alg1.l1.m4.1.1" xref="alg1.l1.m4.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m4.1b"><ci id="alg1.l1.m4.1.1.cmml" xref="alg1.l1.m4.1.1">ğ‘‡</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m4.1c">T</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m4.1d">italic_T</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l2.1.1.1" style="font-size:80%;">2:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l2.2">Hyperparameters:</span> <math alttext="\tau" class="ltx_Math" display="inline" id="alg1.l2.m1.1"><semantics id="alg1.l2.m1.1a"><mi id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml">Ï„</mi><annotation-xml encoding="MathML-Content" id="alg1.l2.m1.1b"><ci id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1">ğœ</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m1.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m1.1d">italic_Ï„</annotation></semantics></math>, <math alttext="t_{\text{burning}}" class="ltx_Math" display="inline" id="alg1.l2.m2.1"><semantics id="alg1.l2.m2.1a"><msub id="alg1.l2.m2.1.1" xref="alg1.l2.m2.1.1.cmml"><mi id="alg1.l2.m2.1.1.2" xref="alg1.l2.m2.1.1.2.cmml">t</mi><mtext id="alg1.l2.m2.1.1.3" xref="alg1.l2.m2.1.1.3a.cmml">burning</mtext></msub><annotation-xml encoding="MathML-Content" id="alg1.l2.m2.1b"><apply id="alg1.l2.m2.1.1.cmml" xref="alg1.l2.m2.1.1"><csymbol cd="ambiguous" id="alg1.l2.m2.1.1.1.cmml" xref="alg1.l2.m2.1.1">subscript</csymbol><ci id="alg1.l2.m2.1.1.2.cmml" xref="alg1.l2.m2.1.1.2">ğ‘¡</ci><ci id="alg1.l2.m2.1.1.3a.cmml" xref="alg1.l2.m2.1.1.3"><mtext id="alg1.l2.m2.1.1.3.cmml" mathsize="70%" xref="alg1.l2.m2.1.1.3">burning</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m2.1c">t_{\text{burning}}</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m2.1d">italic_t start_POSTSUBSCRIPT burning end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="\beta" class="ltx_Math" display="inline" id="alg1.l2.m3.1"><semantics id="alg1.l2.m3.1a"><mi id="alg1.l2.m3.1.1" xref="alg1.l2.m3.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="alg1.l2.m3.1b"><ci id="alg1.l2.m3.1.1.cmml" xref="alg1.l2.m3.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l2.m3.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="alg1.l2.m3.1d">italic_Î²</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l3.1.1.1" style="font-size:80%;">3:</span></span>Sample initial response <math alttext="y_{0}\sim p_{\text{LM}}(\cdot\mid x)" class="ltx_math_unparsed" display="inline" id="alg1.l3.m1.1"><semantics id="alg1.l3.m1.1a"><mrow id="alg1.l3.m1.1b"><msub id="alg1.l3.m1.1.1"><mi id="alg1.l3.m1.1.1.2">y</mi><mn id="alg1.l3.m1.1.1.3">0</mn></msub><mo id="alg1.l3.m1.1.2">âˆ¼</mo><msub id="alg1.l3.m1.1.3"><mi id="alg1.l3.m1.1.3.2">p</mi><mtext id="alg1.l3.m1.1.3.3">LM</mtext></msub><mrow id="alg1.l3.m1.1.4"><mo id="alg1.l3.m1.1.4.1" stretchy="false">(</mo><mo id="alg1.l3.m1.1.4.2" lspace="0em" rspace="0em">â‹…</mo><mo id="alg1.l3.m1.1.4.3" lspace="0em" rspace="0.167em">âˆ£</mo><mi id="alg1.l3.m1.1.4.4">x</mi><mo id="alg1.l3.m1.1.4.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l3.m1.1c">y_{0}\sim p_{\text{LM}}(\cdot\mid x)</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.1d">italic_y start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT âˆ¼ italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( â‹… âˆ£ italic_x )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l4.1.1.1" style="font-size:80%;">4:</span></span><math alttext="t\leftarrow 1" class="ltx_Math" display="inline" id="alg1.l4.m1.1"><semantics id="alg1.l4.m1.1a"><mrow id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml"><mi id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml">t</mi><mo id="alg1.l4.m1.1.1.1" stretchy="false" xref="alg1.l4.m1.1.1.1.cmml">â†</mo><mn id="alg1.l4.m1.1.1.3" xref="alg1.l4.m1.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1"><ci id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1">â†</ci><ci id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2">ğ‘¡</ci><cn id="alg1.l4.m1.1.1.3.cmml" type="integer" xref="alg1.l4.m1.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">t\leftarrow 1</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.1d">italic_t â† 1</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l5.1.1.1" style="font-size:80%;">5:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l5.2">for</span>Â <math alttext="1\text{ to }T" class="ltx_Math" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><mrow id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml"><mn id="alg1.l5.m1.1.1.2" xref="alg1.l5.m1.1.1.2.cmml">1</mn><mo id="alg1.l5.m1.1.1.1" xref="alg1.l5.m1.1.1.1.cmml">â¢</mo><mtext id="alg1.l5.m1.1.1.3" xref="alg1.l5.m1.1.1.3a.cmml">Â toÂ </mtext><mo id="alg1.l5.m1.1.1.1a" xref="alg1.l5.m1.1.1.1.cmml">â¢</mo><mi id="alg1.l5.m1.1.1.4" xref="alg1.l5.m1.1.1.4.cmml">T</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><apply id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1"><times id="alg1.l5.m1.1.1.1.cmml" xref="alg1.l5.m1.1.1.1"></times><cn id="alg1.l5.m1.1.1.2.cmml" type="integer" xref="alg1.l5.m1.1.1.2">1</cn><ci id="alg1.l5.m1.1.1.3a.cmml" xref="alg1.l5.m1.1.1.3"><mtext id="alg1.l5.m1.1.1.3.cmml" xref="alg1.l5.m1.1.1.3">Â toÂ </mtext></ci><ci id="alg1.l5.m1.1.1.4.cmml" xref="alg1.l5.m1.1.1.4">ğ‘‡</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">1\text{ to }T</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">1 to italic_T</annotation></semantics></math>Â <span class="ltx_text ltx_font_bold" id="alg1.l5.3">do</span>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l6.1.1.1" style="font-size:80%;">6:</span></span>Â Â Â Â Â Sample index <math alttext="i\sim q(i|n^{t-1})" class="ltx_Math" display="inline" id="alg1.l6.m1.1"><semantics id="alg1.l6.m1.1a"><mrow id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml"><mi id="alg1.l6.m1.1.1.3" xref="alg1.l6.m1.1.1.3.cmml">i</mi><mo id="alg1.l6.m1.1.1.2" xref="alg1.l6.m1.1.1.2.cmml">âˆ¼</mo><mrow id="alg1.l6.m1.1.1.1" xref="alg1.l6.m1.1.1.1.cmml"><mi id="alg1.l6.m1.1.1.1.3" xref="alg1.l6.m1.1.1.1.3.cmml">q</mi><mo id="alg1.l6.m1.1.1.1.2" xref="alg1.l6.m1.1.1.1.2.cmml">â¢</mo><mrow id="alg1.l6.m1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.cmml"><mo id="alg1.l6.m1.1.1.1.1.1.2" stretchy="false" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="alg1.l6.m1.1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.cmml"><mi id="alg1.l6.m1.1.1.1.1.1.1.2" xref="alg1.l6.m1.1.1.1.1.1.1.2.cmml">i</mi><mo fence="false" id="alg1.l6.m1.1.1.1.1.1.1.1" xref="alg1.l6.m1.1.1.1.1.1.1.1.cmml">|</mo><msup id="alg1.l6.m1.1.1.1.1.1.1.3" xref="alg1.l6.m1.1.1.1.1.1.1.3.cmml"><mi id="alg1.l6.m1.1.1.1.1.1.1.3.2" xref="alg1.l6.m1.1.1.1.1.1.1.3.2.cmml">n</mi><mrow id="alg1.l6.m1.1.1.1.1.1.1.3.3" xref="alg1.l6.m1.1.1.1.1.1.1.3.3.cmml"><mi id="alg1.l6.m1.1.1.1.1.1.1.3.3.2" xref="alg1.l6.m1.1.1.1.1.1.1.3.3.2.cmml">t</mi><mo id="alg1.l6.m1.1.1.1.1.1.1.3.3.1" xref="alg1.l6.m1.1.1.1.1.1.1.3.3.1.cmml">âˆ’</mo><mn id="alg1.l6.m1.1.1.1.1.1.1.3.3.3" xref="alg1.l6.m1.1.1.1.1.1.1.3.3.3.cmml">1</mn></mrow></msup></mrow><mo id="alg1.l6.m1.1.1.1.1.1.3" stretchy="false" xref="alg1.l6.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.1b"><apply id="alg1.l6.m1.1.1.cmml" xref="alg1.l6.m1.1.1"><csymbol cd="latexml" id="alg1.l6.m1.1.1.2.cmml" xref="alg1.l6.m1.1.1.2">similar-to</csymbol><ci id="alg1.l6.m1.1.1.3.cmml" xref="alg1.l6.m1.1.1.3">ğ‘–</ci><apply id="alg1.l6.m1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1"><times id="alg1.l6.m1.1.1.1.2.cmml" xref="alg1.l6.m1.1.1.1.2"></times><ci id="alg1.l6.m1.1.1.1.3.cmml" xref="alg1.l6.m1.1.1.1.3">ğ‘</ci><apply id="alg1.l6.m1.1.1.1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1.1.1"><csymbol cd="latexml" id="alg1.l6.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.1">conditional</csymbol><ci id="alg1.l6.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.2">ğ‘–</ci><apply id="alg1.l6.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="alg1.l6.m1.1.1.1.1.1.1.3.1.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.3">superscript</csymbol><ci id="alg1.l6.m1.1.1.1.1.1.1.3.2.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.3.2">ğ‘›</ci><apply id="alg1.l6.m1.1.1.1.1.1.1.3.3.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.3.3"><minus id="alg1.l6.m1.1.1.1.1.1.1.3.3.1.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.3.3.1"></minus><ci id="alg1.l6.m1.1.1.1.1.1.1.3.3.2.cmml" xref="alg1.l6.m1.1.1.1.1.1.1.3.3.2">ğ‘¡</ci><cn id="alg1.l6.m1.1.1.1.1.1.1.3.3.3.cmml" type="integer" xref="alg1.l6.m1.1.1.1.1.1.1.3.3.3">1</cn></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.1c">i\sim q(i|n^{t-1})</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.1d">italic_i âˆ¼ italic_q ( italic_i | italic_n start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l7.1.1.1" style="font-size:80%;">7:</span></span>Â Â Â Â Â Sample <math alttext="{y}_{\geq i}\sim p_{\text{LM}}(\cdot|y_{&lt;i}^{t-1},x)" class="ltx_math_unparsed" display="inline" id="alg1.l7.m1.1"><semantics id="alg1.l7.m1.1a"><mrow id="alg1.l7.m1.1b"><msub id="alg1.l7.m1.1.1"><mi id="alg1.l7.m1.1.1.2">y</mi><mrow id="alg1.l7.m1.1.1.3"><mi id="alg1.l7.m1.1.1.3.2"></mi><mo id="alg1.l7.m1.1.1.3.1">â‰¥</mo><mi id="alg1.l7.m1.1.1.3.3">i</mi></mrow></msub><mo id="alg1.l7.m1.1.2">âˆ¼</mo><msub id="alg1.l7.m1.1.3"><mi id="alg1.l7.m1.1.3.2">p</mi><mtext id="alg1.l7.m1.1.3.3">LM</mtext></msub><mrow id="alg1.l7.m1.1.4"><mo id="alg1.l7.m1.1.4.1" stretchy="false">(</mo><mo id="alg1.l7.m1.1.4.2" lspace="0em" rspace="0em">â‹…</mo><mo fence="false" id="alg1.l7.m1.1.4.3" rspace="0.167em" stretchy="false">|</mo><msubsup id="alg1.l7.m1.1.4.4"><mi id="alg1.l7.m1.1.4.4.2.2">y</mi><mrow id="alg1.l7.m1.1.4.4.2.3"><mi id="alg1.l7.m1.1.4.4.2.3.2"></mi><mo id="alg1.l7.m1.1.4.4.2.3.1">&lt;</mo><mi id="alg1.l7.m1.1.4.4.2.3.3">i</mi></mrow><mrow id="alg1.l7.m1.1.4.4.3"><mi id="alg1.l7.m1.1.4.4.3.2">t</mi><mo id="alg1.l7.m1.1.4.4.3.1">âˆ’</mo><mn id="alg1.l7.m1.1.4.4.3.3">1</mn></mrow></msubsup><mo id="alg1.l7.m1.1.4.5">,</mo><mi id="alg1.l7.m1.1.4.6">x</mi><mo id="alg1.l7.m1.1.4.7" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="alg1.l7.m1.1c">{y}_{\geq i}\sim p_{\text{LM}}(\cdot|y_{&lt;i}^{t-1},x)</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m1.1d">italic_y start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT âˆ¼ italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( â‹… | italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT , italic_x )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l8.1.1.1" style="font-size:80%;">8:</span></span>Â Â Â Â Â <math alttext="y\leftarrow(y_{&lt;i}^{t-1},{y}_{\geq i})" class="ltx_Math" display="inline" id="alg1.l8.m1.2"><semantics id="alg1.l8.m1.2a"><mrow id="alg1.l8.m1.2.2" xref="alg1.l8.m1.2.2.cmml"><mi id="alg1.l8.m1.2.2.4" xref="alg1.l8.m1.2.2.4.cmml">y</mi><mo id="alg1.l8.m1.2.2.3" stretchy="false" xref="alg1.l8.m1.2.2.3.cmml">â†</mo><mrow id="alg1.l8.m1.2.2.2.2" xref="alg1.l8.m1.2.2.2.3.cmml"><mo id="alg1.l8.m1.2.2.2.2.3" stretchy="false" xref="alg1.l8.m1.2.2.2.3.cmml">(</mo><msubsup id="alg1.l8.m1.1.1.1.1.1" xref="alg1.l8.m1.1.1.1.1.1.cmml"><mi id="alg1.l8.m1.1.1.1.1.1.2.2" xref="alg1.l8.m1.1.1.1.1.1.2.2.cmml">y</mi><mrow id="alg1.l8.m1.1.1.1.1.1.2.3" xref="alg1.l8.m1.1.1.1.1.1.2.3.cmml"><mi id="alg1.l8.m1.1.1.1.1.1.2.3.2" xref="alg1.l8.m1.1.1.1.1.1.2.3.2.cmml"></mi><mo id="alg1.l8.m1.1.1.1.1.1.2.3.1" xref="alg1.l8.m1.1.1.1.1.1.2.3.1.cmml">&lt;</mo><mi id="alg1.l8.m1.1.1.1.1.1.2.3.3" xref="alg1.l8.m1.1.1.1.1.1.2.3.3.cmml">i</mi></mrow><mrow id="alg1.l8.m1.1.1.1.1.1.3" xref="alg1.l8.m1.1.1.1.1.1.3.cmml"><mi id="alg1.l8.m1.1.1.1.1.1.3.2" xref="alg1.l8.m1.1.1.1.1.1.3.2.cmml">t</mi><mo id="alg1.l8.m1.1.1.1.1.1.3.1" xref="alg1.l8.m1.1.1.1.1.1.3.1.cmml">âˆ’</mo><mn id="alg1.l8.m1.1.1.1.1.1.3.3" xref="alg1.l8.m1.1.1.1.1.1.3.3.cmml">1</mn></mrow></msubsup><mo id="alg1.l8.m1.2.2.2.2.4" xref="alg1.l8.m1.2.2.2.3.cmml">,</mo><msub id="alg1.l8.m1.2.2.2.2.2" xref="alg1.l8.m1.2.2.2.2.2.cmml"><mi id="alg1.l8.m1.2.2.2.2.2.2" xref="alg1.l8.m1.2.2.2.2.2.2.cmml">y</mi><mrow id="alg1.l8.m1.2.2.2.2.2.3" xref="alg1.l8.m1.2.2.2.2.2.3.cmml"><mi id="alg1.l8.m1.2.2.2.2.2.3.2" xref="alg1.l8.m1.2.2.2.2.2.3.2.cmml"></mi><mo id="alg1.l8.m1.2.2.2.2.2.3.1" xref="alg1.l8.m1.2.2.2.2.2.3.1.cmml">â‰¥</mo><mi id="alg1.l8.m1.2.2.2.2.2.3.3" xref="alg1.l8.m1.2.2.2.2.2.3.3.cmml">i</mi></mrow></msub><mo id="alg1.l8.m1.2.2.2.2.5" stretchy="false" xref="alg1.l8.m1.2.2.2.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l8.m1.2b"><apply id="alg1.l8.m1.2.2.cmml" xref="alg1.l8.m1.2.2"><ci id="alg1.l8.m1.2.2.3.cmml" xref="alg1.l8.m1.2.2.3">â†</ci><ci id="alg1.l8.m1.2.2.4.cmml" xref="alg1.l8.m1.2.2.4">ğ‘¦</ci><interval closure="open" id="alg1.l8.m1.2.2.2.3.cmml" xref="alg1.l8.m1.2.2.2.2"><apply id="alg1.l8.m1.1.1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l8.m1.1.1.1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1.1.1">superscript</csymbol><apply id="alg1.l8.m1.1.1.1.1.1.2.cmml" xref="alg1.l8.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l8.m1.1.1.1.1.1.2.1.cmml" xref="alg1.l8.m1.1.1.1.1.1">subscript</csymbol><ci id="alg1.l8.m1.1.1.1.1.1.2.2.cmml" xref="alg1.l8.m1.1.1.1.1.1.2.2">ğ‘¦</ci><apply id="alg1.l8.m1.1.1.1.1.1.2.3.cmml" xref="alg1.l8.m1.1.1.1.1.1.2.3"><lt id="alg1.l8.m1.1.1.1.1.1.2.3.1.cmml" xref="alg1.l8.m1.1.1.1.1.1.2.3.1"></lt><csymbol cd="latexml" id="alg1.l8.m1.1.1.1.1.1.2.3.2.cmml" xref="alg1.l8.m1.1.1.1.1.1.2.3.2">absent</csymbol><ci id="alg1.l8.m1.1.1.1.1.1.2.3.3.cmml" xref="alg1.l8.m1.1.1.1.1.1.2.3.3">ğ‘–</ci></apply></apply><apply id="alg1.l8.m1.1.1.1.1.1.3.cmml" xref="alg1.l8.m1.1.1.1.1.1.3"><minus id="alg1.l8.m1.1.1.1.1.1.3.1.cmml" xref="alg1.l8.m1.1.1.1.1.1.3.1"></minus><ci id="alg1.l8.m1.1.1.1.1.1.3.2.cmml" xref="alg1.l8.m1.1.1.1.1.1.3.2">ğ‘¡</ci><cn id="alg1.l8.m1.1.1.1.1.1.3.3.cmml" type="integer" xref="alg1.l8.m1.1.1.1.1.1.3.3">1</cn></apply></apply><apply id="alg1.l8.m1.2.2.2.2.2.cmml" xref="alg1.l8.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="alg1.l8.m1.2.2.2.2.2.1.cmml" xref="alg1.l8.m1.2.2.2.2.2">subscript</csymbol><ci id="alg1.l8.m1.2.2.2.2.2.2.cmml" xref="alg1.l8.m1.2.2.2.2.2.2">ğ‘¦</ci><apply id="alg1.l8.m1.2.2.2.2.2.3.cmml" xref="alg1.l8.m1.2.2.2.2.2.3"><geq id="alg1.l8.m1.2.2.2.2.2.3.1.cmml" xref="alg1.l8.m1.2.2.2.2.2.3.1"></geq><csymbol cd="latexml" id="alg1.l8.m1.2.2.2.2.2.3.2.cmml" xref="alg1.l8.m1.2.2.2.2.2.3.2">absent</csymbol><ci id="alg1.l8.m1.2.2.2.2.2.3.3.cmml" xref="alg1.l8.m1.2.2.2.2.2.3.3">ğ‘–</ci></apply></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.m1.2c">y\leftarrow(y_{&lt;i}^{t-1},{y}_{\geq i})</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.m1.2d">italic_y â† ( italic_y start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT , italic_y start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l9">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l9.1.1.1" style="font-size:80%;">9:</span></span>Â Â Â Â Â Compute <math alttext="\alpha_{\beta}(y,y^{t-1})" class="ltx_Math" display="inline" id="alg1.l9.m1.2"><semantics id="alg1.l9.m1.2a"><mrow id="alg1.l9.m1.2.2" xref="alg1.l9.m1.2.2.cmml"><msub id="alg1.l9.m1.2.2.3" xref="alg1.l9.m1.2.2.3.cmml"><mi id="alg1.l9.m1.2.2.3.2" xref="alg1.l9.m1.2.2.3.2.cmml">Î±</mi><mi id="alg1.l9.m1.2.2.3.3" xref="alg1.l9.m1.2.2.3.3.cmml">Î²</mi></msub><mo id="alg1.l9.m1.2.2.2" xref="alg1.l9.m1.2.2.2.cmml">â¢</mo><mrow id="alg1.l9.m1.2.2.1.1" xref="alg1.l9.m1.2.2.1.2.cmml"><mo id="alg1.l9.m1.2.2.1.1.2" stretchy="false" xref="alg1.l9.m1.2.2.1.2.cmml">(</mo><mi id="alg1.l9.m1.1.1" xref="alg1.l9.m1.1.1.cmml">y</mi><mo id="alg1.l9.m1.2.2.1.1.3" xref="alg1.l9.m1.2.2.1.2.cmml">,</mo><msup id="alg1.l9.m1.2.2.1.1.1" xref="alg1.l9.m1.2.2.1.1.1.cmml"><mi id="alg1.l9.m1.2.2.1.1.1.2" xref="alg1.l9.m1.2.2.1.1.1.2.cmml">y</mi><mrow id="alg1.l9.m1.2.2.1.1.1.3" xref="alg1.l9.m1.2.2.1.1.1.3.cmml"><mi id="alg1.l9.m1.2.2.1.1.1.3.2" xref="alg1.l9.m1.2.2.1.1.1.3.2.cmml">t</mi><mo id="alg1.l9.m1.2.2.1.1.1.3.1" xref="alg1.l9.m1.2.2.1.1.1.3.1.cmml">âˆ’</mo><mn id="alg1.l9.m1.2.2.1.1.1.3.3" xref="alg1.l9.m1.2.2.1.1.1.3.3.cmml">1</mn></mrow></msup><mo id="alg1.l9.m1.2.2.1.1.4" stretchy="false" xref="alg1.l9.m1.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l9.m1.2b"><apply id="alg1.l9.m1.2.2.cmml" xref="alg1.l9.m1.2.2"><times id="alg1.l9.m1.2.2.2.cmml" xref="alg1.l9.m1.2.2.2"></times><apply id="alg1.l9.m1.2.2.3.cmml" xref="alg1.l9.m1.2.2.3"><csymbol cd="ambiguous" id="alg1.l9.m1.2.2.3.1.cmml" xref="alg1.l9.m1.2.2.3">subscript</csymbol><ci id="alg1.l9.m1.2.2.3.2.cmml" xref="alg1.l9.m1.2.2.3.2">ğ›¼</ci><ci id="alg1.l9.m1.2.2.3.3.cmml" xref="alg1.l9.m1.2.2.3.3">ğ›½</ci></apply><interval closure="open" id="alg1.l9.m1.2.2.1.2.cmml" xref="alg1.l9.m1.2.2.1.1"><ci id="alg1.l9.m1.1.1.cmml" xref="alg1.l9.m1.1.1">ğ‘¦</ci><apply id="alg1.l9.m1.2.2.1.1.1.cmml" xref="alg1.l9.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="alg1.l9.m1.2.2.1.1.1.1.cmml" xref="alg1.l9.m1.2.2.1.1.1">superscript</csymbol><ci id="alg1.l9.m1.2.2.1.1.1.2.cmml" xref="alg1.l9.m1.2.2.1.1.1.2">ğ‘¦</ci><apply id="alg1.l9.m1.2.2.1.1.1.3.cmml" xref="alg1.l9.m1.2.2.1.1.1.3"><minus id="alg1.l9.m1.2.2.1.1.1.3.1.cmml" xref="alg1.l9.m1.2.2.1.1.1.3.1"></minus><ci id="alg1.l9.m1.2.2.1.1.1.3.2.cmml" xref="alg1.l9.m1.2.2.1.1.1.3.2">ğ‘¡</ci><cn id="alg1.l9.m1.2.2.1.1.1.3.3.cmml" type="integer" xref="alg1.l9.m1.2.2.1.1.1.3.3">1</cn></apply></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l9.m1.2c">\alpha_{\beta}(y,y^{t-1})</annotation><annotation encoding="application/x-llamapun" id="alg1.l9.m1.2d">italic_Î± start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y , italic_y start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT )</annotation></semantics></math> through Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E4" title="In 3.1 Metropolis-Hastings â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">4</span></a>
</div>
<div class="ltx_listingline" id="alg1.l10">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l10.1.1.1" style="font-size:80%;">10:</span></span>Â Â Â Â Â Sample <math alttext="\alpha" class="ltx_Math" display="inline" id="alg1.l10.m1.1"><semantics id="alg1.l10.m1.1a"><mi id="alg1.l10.m1.1.1" xref="alg1.l10.m1.1.1.cmml">Î±</mi><annotation-xml encoding="MathML-Content" id="alg1.l10.m1.1b"><ci id="alg1.l10.m1.1.1.cmml" xref="alg1.l10.m1.1.1">ğ›¼</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l10.m1.1c">\alpha</annotation><annotation encoding="application/x-llamapun" id="alg1.l10.m1.1d">italic_Î±</annotation></semantics></math> uniformly in <math alttext="[0,1]" class="ltx_Math" display="inline" id="alg1.l10.m2.2"><semantics id="alg1.l10.m2.2a"><mrow id="alg1.l10.m2.2.3.2" xref="alg1.l10.m2.2.3.1.cmml"><mo id="alg1.l10.m2.2.3.2.1" stretchy="false" xref="alg1.l10.m2.2.3.1.cmml">[</mo><mn id="alg1.l10.m2.1.1" xref="alg1.l10.m2.1.1.cmml">0</mn><mo id="alg1.l10.m2.2.3.2.2" xref="alg1.l10.m2.2.3.1.cmml">,</mo><mn id="alg1.l10.m2.2.2" xref="alg1.l10.m2.2.2.cmml">1</mn><mo id="alg1.l10.m2.2.3.2.3" stretchy="false" xref="alg1.l10.m2.2.3.1.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="alg1.l10.m2.2b"><interval closure="closed" id="alg1.l10.m2.2.3.1.cmml" xref="alg1.l10.m2.2.3.2"><cn id="alg1.l10.m2.1.1.cmml" type="integer" xref="alg1.l10.m2.1.1">0</cn><cn id="alg1.l10.m2.2.2.cmml" type="integer" xref="alg1.l10.m2.2.2">1</cn></interval></annotation-xml><annotation encoding="application/x-tex" id="alg1.l10.m2.2c">[0,1]</annotation><annotation encoding="application/x-llamapun" id="alg1.l10.m2.2d">[ 0 , 1 ]</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l11">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l11.1.1.1" style="font-size:80%;">11:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l11.2">if</span>Â  <math alttext="\alpha\leq\alpha_{\beta}(y,y^{t-1})" class="ltx_Math" display="inline" id="alg1.l11.m1.2"><semantics id="alg1.l11.m1.2a"><mrow id="alg1.l11.m1.2.2" xref="alg1.l11.m1.2.2.cmml"><mi id="alg1.l11.m1.2.2.3" xref="alg1.l11.m1.2.2.3.cmml">Î±</mi><mo id="alg1.l11.m1.2.2.2" xref="alg1.l11.m1.2.2.2.cmml">â‰¤</mo><mrow id="alg1.l11.m1.2.2.1" xref="alg1.l11.m1.2.2.1.cmml"><msub id="alg1.l11.m1.2.2.1.3" xref="alg1.l11.m1.2.2.1.3.cmml"><mi id="alg1.l11.m1.2.2.1.3.2" xref="alg1.l11.m1.2.2.1.3.2.cmml">Î±</mi><mi id="alg1.l11.m1.2.2.1.3.3" xref="alg1.l11.m1.2.2.1.3.3.cmml">Î²</mi></msub><mo id="alg1.l11.m1.2.2.1.2" xref="alg1.l11.m1.2.2.1.2.cmml">â¢</mo><mrow id="alg1.l11.m1.2.2.1.1.1" xref="alg1.l11.m1.2.2.1.1.2.cmml"><mo id="alg1.l11.m1.2.2.1.1.1.2" stretchy="false" xref="alg1.l11.m1.2.2.1.1.2.cmml">(</mo><mi id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml">y</mi><mo id="alg1.l11.m1.2.2.1.1.1.3" xref="alg1.l11.m1.2.2.1.1.2.cmml">,</mo><msup id="alg1.l11.m1.2.2.1.1.1.1" xref="alg1.l11.m1.2.2.1.1.1.1.cmml"><mi id="alg1.l11.m1.2.2.1.1.1.1.2" xref="alg1.l11.m1.2.2.1.1.1.1.2.cmml">y</mi><mrow id="alg1.l11.m1.2.2.1.1.1.1.3" xref="alg1.l11.m1.2.2.1.1.1.1.3.cmml"><mi id="alg1.l11.m1.2.2.1.1.1.1.3.2" xref="alg1.l11.m1.2.2.1.1.1.1.3.2.cmml">t</mi><mo id="alg1.l11.m1.2.2.1.1.1.1.3.1" xref="alg1.l11.m1.2.2.1.1.1.1.3.1.cmml">âˆ’</mo><mn id="alg1.l11.m1.2.2.1.1.1.1.3.3" xref="alg1.l11.m1.2.2.1.1.1.1.3.3.cmml">1</mn></mrow></msup><mo id="alg1.l11.m1.2.2.1.1.1.4" stretchy="false" xref="alg1.l11.m1.2.2.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l11.m1.2b"><apply id="alg1.l11.m1.2.2.cmml" xref="alg1.l11.m1.2.2"><leq id="alg1.l11.m1.2.2.2.cmml" xref="alg1.l11.m1.2.2.2"></leq><ci id="alg1.l11.m1.2.2.3.cmml" xref="alg1.l11.m1.2.2.3">ğ›¼</ci><apply id="alg1.l11.m1.2.2.1.cmml" xref="alg1.l11.m1.2.2.1"><times id="alg1.l11.m1.2.2.1.2.cmml" xref="alg1.l11.m1.2.2.1.2"></times><apply id="alg1.l11.m1.2.2.1.3.cmml" xref="alg1.l11.m1.2.2.1.3"><csymbol cd="ambiguous" id="alg1.l11.m1.2.2.1.3.1.cmml" xref="alg1.l11.m1.2.2.1.3">subscript</csymbol><ci id="alg1.l11.m1.2.2.1.3.2.cmml" xref="alg1.l11.m1.2.2.1.3.2">ğ›¼</ci><ci id="alg1.l11.m1.2.2.1.3.3.cmml" xref="alg1.l11.m1.2.2.1.3.3">ğ›½</ci></apply><interval closure="open" id="alg1.l11.m1.2.2.1.1.2.cmml" xref="alg1.l11.m1.2.2.1.1.1"><ci id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1">ğ‘¦</ci><apply id="alg1.l11.m1.2.2.1.1.1.1.cmml" xref="alg1.l11.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l11.m1.2.2.1.1.1.1.1.cmml" xref="alg1.l11.m1.2.2.1.1.1.1">superscript</csymbol><ci id="alg1.l11.m1.2.2.1.1.1.1.2.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.2">ğ‘¦</ci><apply id="alg1.l11.m1.2.2.1.1.1.1.3.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3"><minus id="alg1.l11.m1.2.2.1.1.1.1.3.1.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3.1"></minus><ci id="alg1.l11.m1.2.2.1.1.1.1.3.2.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3.2">ğ‘¡</ci><cn id="alg1.l11.m1.2.2.1.1.1.1.3.3.cmml" type="integer" xref="alg1.l11.m1.2.2.1.1.1.1.3.3">1</cn></apply></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m1.2c">\alpha\leq\alpha_{\beta}(y,y^{t-1})</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m1.2d">italic_Î± â‰¤ italic_Î± start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y , italic_y start_POSTSUPERSCRIPT italic_t - 1 end_POSTSUPERSCRIPT )</annotation></semantics></math>Â <span class="ltx_text ltx_font_bold" id="alg1.l11.3">then</span>
</div>
<div class="ltx_listingline" id="alg1.l12">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l12.1.1.1" style="font-size:80%;">12:</span></span>Â Â Â Â Â Â Â Â Â <math alttext="y^{t}\leftarrow y" class="ltx_Math" display="inline" id="alg1.l12.m1.1"><semantics id="alg1.l12.m1.1a"><mrow id="alg1.l12.m1.1.1" xref="alg1.l12.m1.1.1.cmml"><msup id="alg1.l12.m1.1.1.2" xref="alg1.l12.m1.1.1.2.cmml"><mi id="alg1.l12.m1.1.1.2.2" xref="alg1.l12.m1.1.1.2.2.cmml">y</mi><mi id="alg1.l12.m1.1.1.2.3" xref="alg1.l12.m1.1.1.2.3.cmml">t</mi></msup><mo id="alg1.l12.m1.1.1.1" stretchy="false" xref="alg1.l12.m1.1.1.1.cmml">â†</mo><mi id="alg1.l12.m1.1.1.3" xref="alg1.l12.m1.1.1.3.cmml">y</mi></mrow><annotation-xml encoding="MathML-Content" id="alg1.l12.m1.1b"><apply id="alg1.l12.m1.1.1.cmml" xref="alg1.l12.m1.1.1"><ci id="alg1.l12.m1.1.1.1.cmml" xref="alg1.l12.m1.1.1.1">â†</ci><apply id="alg1.l12.m1.1.1.2.cmml" xref="alg1.l12.m1.1.1.2"><csymbol cd="ambiguous" id="alg1.l12.m1.1.1.2.1.cmml" xref="alg1.l12.m1.1.1.2">superscript</csymbol><ci id="alg1.l12.m1.1.1.2.2.cmml" xref="alg1.l12.m1.1.1.2.2">ğ‘¦</ci><ci id="alg1.l12.m1.1.1.2.3.cmml" xref="alg1.l12.m1.1.1.2.3">ğ‘¡</ci></apply><ci id="alg1.l12.m1.1.1.3.cmml" xref="alg1.l12.m1.1.1.3">ğ‘¦</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l12.m1.1c">y^{t}\leftarrow y</annotation><annotation encoding="application/x-llamapun" id="alg1.l12.m1.1d">italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT â† italic_y</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l13">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l13.1.1.1" style="font-size:80%;">13:</span></span>Â Â Â Â Â Â Â Â Â <math alttext="t\leftarrow t+1" class="ltx_Math" display="inline" id="alg1.l13.m1.1"><semantics id="alg1.l13.m1.1a"><mrow id="alg1.l13.m1.1.1" xref="alg1.l13.m1.1.1.cmml"><mi id="alg1.l13.m1.1.1.2" xref="alg1.l13.m1.1.1.2.cmml">t</mi><mo id="alg1.l13.m1.1.1.1" stretchy="false" xref="alg1.l13.m1.1.1.1.cmml">â†</mo><mrow id="alg1.l13.m1.1.1.3" xref="alg1.l13.m1.1.1.3.cmml"><mi id="alg1.l13.m1.1.1.3.2" xref="alg1.l13.m1.1.1.3.2.cmml">t</mi><mo id="alg1.l13.m1.1.1.3.1" xref="alg1.l13.m1.1.1.3.1.cmml">+</mo><mn id="alg1.l13.m1.1.1.3.3" xref="alg1.l13.m1.1.1.3.3.cmml">1</mn></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l13.m1.1b"><apply id="alg1.l13.m1.1.1.cmml" xref="alg1.l13.m1.1.1"><ci id="alg1.l13.m1.1.1.1.cmml" xref="alg1.l13.m1.1.1.1">â†</ci><ci id="alg1.l13.m1.1.1.2.cmml" xref="alg1.l13.m1.1.1.2">ğ‘¡</ci><apply id="alg1.l13.m1.1.1.3.cmml" xref="alg1.l13.m1.1.1.3"><plus id="alg1.l13.m1.1.1.3.1.cmml" xref="alg1.l13.m1.1.1.3.1"></plus><ci id="alg1.l13.m1.1.1.3.2.cmml" xref="alg1.l13.m1.1.1.3.2">ğ‘¡</ci><cn id="alg1.l13.m1.1.1.3.3.cmml" type="integer" xref="alg1.l13.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l13.m1.1c">t\leftarrow t+1</annotation><annotation encoding="application/x-llamapun" id="alg1.l13.m1.1d">italic_t â† italic_t + 1</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l14">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l14.1.1.1" style="font-size:80%;">14:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l14.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg1.l14.3">if</span>
</div>
<div class="ltx_listingline" id="alg1.l15">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l15.1.1.1" style="font-size:80%;">15:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l15.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg1.l15.3">for</span>
</div>
<div class="ltx_listingline" id="alg1.l16">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l16.1.1.1" style="font-size:80%;">16:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l16.2">return</span> <math alttext="y^{t_{\text{burning}}},\ldots,y^{t}" class="ltx_Math" display="inline" id="alg1.l16.m1.3"><semantics id="alg1.l16.m1.3a"><mrow id="alg1.l16.m1.3.3.2" xref="alg1.l16.m1.3.3.3.cmml"><msup id="alg1.l16.m1.2.2.1.1" xref="alg1.l16.m1.2.2.1.1.cmml"><mi id="alg1.l16.m1.2.2.1.1.2" xref="alg1.l16.m1.2.2.1.1.2.cmml">y</mi><msub id="alg1.l16.m1.2.2.1.1.3" xref="alg1.l16.m1.2.2.1.1.3.cmml"><mi id="alg1.l16.m1.2.2.1.1.3.2" xref="alg1.l16.m1.2.2.1.1.3.2.cmml">t</mi><mtext id="alg1.l16.m1.2.2.1.1.3.3" xref="alg1.l16.m1.2.2.1.1.3.3a.cmml">burning</mtext></msub></msup><mo id="alg1.l16.m1.3.3.2.3" xref="alg1.l16.m1.3.3.3.cmml">,</mo><mi id="alg1.l16.m1.1.1" mathvariant="normal" xref="alg1.l16.m1.1.1.cmml">â€¦</mi><mo id="alg1.l16.m1.3.3.2.4" xref="alg1.l16.m1.3.3.3.cmml">,</mo><msup id="alg1.l16.m1.3.3.2.2" xref="alg1.l16.m1.3.3.2.2.cmml"><mi id="alg1.l16.m1.3.3.2.2.2" xref="alg1.l16.m1.3.3.2.2.2.cmml">y</mi><mi id="alg1.l16.m1.3.3.2.2.3" xref="alg1.l16.m1.3.3.2.2.3.cmml">t</mi></msup></mrow><annotation-xml encoding="MathML-Content" id="alg1.l16.m1.3b"><list id="alg1.l16.m1.3.3.3.cmml" xref="alg1.l16.m1.3.3.2"><apply id="alg1.l16.m1.2.2.1.1.cmml" xref="alg1.l16.m1.2.2.1.1"><csymbol cd="ambiguous" id="alg1.l16.m1.2.2.1.1.1.cmml" xref="alg1.l16.m1.2.2.1.1">superscript</csymbol><ci id="alg1.l16.m1.2.2.1.1.2.cmml" xref="alg1.l16.m1.2.2.1.1.2">ğ‘¦</ci><apply id="alg1.l16.m1.2.2.1.1.3.cmml" xref="alg1.l16.m1.2.2.1.1.3"><csymbol cd="ambiguous" id="alg1.l16.m1.2.2.1.1.3.1.cmml" xref="alg1.l16.m1.2.2.1.1.3">subscript</csymbol><ci id="alg1.l16.m1.2.2.1.1.3.2.cmml" xref="alg1.l16.m1.2.2.1.1.3.2">ğ‘¡</ci><ci id="alg1.l16.m1.2.2.1.1.3.3a.cmml" xref="alg1.l16.m1.2.2.1.1.3.3"><mtext id="alg1.l16.m1.2.2.1.1.3.3.cmml" mathsize="50%" xref="alg1.l16.m1.2.2.1.1.3.3">burning</mtext></ci></apply></apply><ci id="alg1.l16.m1.1.1.cmml" xref="alg1.l16.m1.1.1">â€¦</ci><apply id="alg1.l16.m1.3.3.2.2.cmml" xref="alg1.l16.m1.3.3.2.2"><csymbol cd="ambiguous" id="alg1.l16.m1.3.3.2.2.1.cmml" xref="alg1.l16.m1.3.3.2.2">superscript</csymbol><ci id="alg1.l16.m1.3.3.2.2.2.cmml" xref="alg1.l16.m1.3.3.2.2.2">ğ‘¦</ci><ci id="alg1.l16.m1.3.3.2.2.3.cmml" xref="alg1.l16.m1.3.3.2.2.3">ğ‘¡</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="alg1.l16.m1.3c">y^{t_{\text{burning}}},\ldots,y^{t}</annotation><annotation encoding="application/x-llamapun" id="alg1.l16.m1.3d">italic_y start_POSTSUPERSCRIPT italic_t start_POSTSUBSCRIPT burning end_POSTSUBSCRIPT end_POSTSUPERSCRIPT , â€¦ , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT</annotation></semantics></math>
</div>
</div>
</figure>
</figure>
<div class="ltx_para" id="S3.SS2.p5">
<p class="ltx_p" id="S3.SS2.p5.2">We will use the uniform distribution as the index distribution, <span class="ltx_text ltx_font_italic" id="S3.SS2.p5.2.1">i.e.</span>, <math alttext="q(i|n^{t})={1}/{n^{t}}" class="ltx_Math" display="inline" id="S3.SS2.p5.1.m1.1"><semantics id="S3.SS2.p5.1.m1.1a"><mrow id="S3.SS2.p5.1.m1.1.1" xref="S3.SS2.p5.1.m1.1.1.cmml"><mrow id="S3.SS2.p5.1.m1.1.1.1" xref="S3.SS2.p5.1.m1.1.1.1.cmml"><mi id="S3.SS2.p5.1.m1.1.1.1.3" xref="S3.SS2.p5.1.m1.1.1.1.3.cmml">q</mi><mo id="S3.SS2.p5.1.m1.1.1.1.2" xref="S3.SS2.p5.1.m1.1.1.1.2.cmml">â¢</mo><mrow id="S3.SS2.p5.1.m1.1.1.1.1.1" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.cmml"><mo id="S3.SS2.p5.1.m1.1.1.1.1.1.2" stretchy="false" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS2.p5.1.m1.1.1.1.1.1.1" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.cmml"><mi id="S3.SS2.p5.1.m1.1.1.1.1.1.1.2" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.2.cmml">i</mi><mo fence="false" id="S3.SS2.p5.1.m1.1.1.1.1.1.1.1" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.1.cmml">|</mo><msup id="S3.SS2.p5.1.m1.1.1.1.1.1.1.3" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.cmml"><mi id="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.2" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.2.cmml">n</mi><mi id="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.3" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.3.cmml">t</mi></msup></mrow><mo id="S3.SS2.p5.1.m1.1.1.1.1.1.3" stretchy="false" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS2.p5.1.m1.1.1.2" xref="S3.SS2.p5.1.m1.1.1.2.cmml">=</mo><mrow id="S3.SS2.p5.1.m1.1.1.3" xref="S3.SS2.p5.1.m1.1.1.3.cmml"><mn id="S3.SS2.p5.1.m1.1.1.3.2" xref="S3.SS2.p5.1.m1.1.1.3.2.cmml">1</mn><mo id="S3.SS2.p5.1.m1.1.1.3.1" xref="S3.SS2.p5.1.m1.1.1.3.1.cmml">/</mo><msup id="S3.SS2.p5.1.m1.1.1.3.3" xref="S3.SS2.p5.1.m1.1.1.3.3.cmml"><mi id="S3.SS2.p5.1.m1.1.1.3.3.2" xref="S3.SS2.p5.1.m1.1.1.3.3.2.cmml">n</mi><mi id="S3.SS2.p5.1.m1.1.1.3.3.3" xref="S3.SS2.p5.1.m1.1.1.3.3.3.cmml">t</mi></msup></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p5.1.m1.1b"><apply id="S3.SS2.p5.1.m1.1.1.cmml" xref="S3.SS2.p5.1.m1.1.1"><eq id="S3.SS2.p5.1.m1.1.1.2.cmml" xref="S3.SS2.p5.1.m1.1.1.2"></eq><apply id="S3.SS2.p5.1.m1.1.1.1.cmml" xref="S3.SS2.p5.1.m1.1.1.1"><times id="S3.SS2.p5.1.m1.1.1.1.2.cmml" xref="S3.SS2.p5.1.m1.1.1.1.2"></times><ci id="S3.SS2.p5.1.m1.1.1.1.3.cmml" xref="S3.SS2.p5.1.m1.1.1.1.3">ğ‘</ci><apply id="S3.SS2.p5.1.m1.1.1.1.1.1.1.cmml" xref="S3.SS2.p5.1.m1.1.1.1.1.1"><csymbol cd="latexml" id="S3.SS2.p5.1.m1.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS2.p5.1.m1.1.1.1.1.1.1.2.cmml" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.2">ğ‘–</ci><apply id="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.1.cmml" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.3">superscript</csymbol><ci id="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.2.cmml" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.2">ğ‘›</ci><ci id="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.3.cmml" xref="S3.SS2.p5.1.m1.1.1.1.1.1.1.3.3">ğ‘¡</ci></apply></apply></apply><apply id="S3.SS2.p5.1.m1.1.1.3.cmml" xref="S3.SS2.p5.1.m1.1.1.3"><divide id="S3.SS2.p5.1.m1.1.1.3.1.cmml" xref="S3.SS2.p5.1.m1.1.1.3.1"></divide><cn id="S3.SS2.p5.1.m1.1.1.3.2.cmml" type="integer" xref="S3.SS2.p5.1.m1.1.1.3.2">1</cn><apply id="S3.SS2.p5.1.m1.1.1.3.3.cmml" xref="S3.SS2.p5.1.m1.1.1.3.3"><csymbol cd="ambiguous" id="S3.SS2.p5.1.m1.1.1.3.3.1.cmml" xref="S3.SS2.p5.1.m1.1.1.3.3">superscript</csymbol><ci id="S3.SS2.p5.1.m1.1.1.3.3.2.cmml" xref="S3.SS2.p5.1.m1.1.1.3.3.2">ğ‘›</ci><ci id="S3.SS2.p5.1.m1.1.1.3.3.3.cmml" xref="S3.SS2.p5.1.m1.1.1.3.3.3">ğ‘¡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p5.1.m1.1c">q(i|n^{t})={1}/{n^{t}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p5.1.m1.1d">italic_q ( italic_i | italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) = 1 / italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT</annotation></semantics></math> for each <math alttext="i\in[n^{t}]" class="ltx_Math" display="inline" id="S3.SS2.p5.2.m2.1"><semantics id="S3.SS2.p5.2.m2.1a"><mrow id="S3.SS2.p5.2.m2.1.1" xref="S3.SS2.p5.2.m2.1.1.cmml"><mi id="S3.SS2.p5.2.m2.1.1.3" xref="S3.SS2.p5.2.m2.1.1.3.cmml">i</mi><mo id="S3.SS2.p5.2.m2.1.1.2" xref="S3.SS2.p5.2.m2.1.1.2.cmml">âˆˆ</mo><mrow id="S3.SS2.p5.2.m2.1.1.1.1" xref="S3.SS2.p5.2.m2.1.1.1.2.cmml"><mo id="S3.SS2.p5.2.m2.1.1.1.1.2" stretchy="false" xref="S3.SS2.p5.2.m2.1.1.1.2.1.cmml">[</mo><msup id="S3.SS2.p5.2.m2.1.1.1.1.1" xref="S3.SS2.p5.2.m2.1.1.1.1.1.cmml"><mi id="S3.SS2.p5.2.m2.1.1.1.1.1.2" xref="S3.SS2.p5.2.m2.1.1.1.1.1.2.cmml">n</mi><mi id="S3.SS2.p5.2.m2.1.1.1.1.1.3" xref="S3.SS2.p5.2.m2.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.SS2.p5.2.m2.1.1.1.1.3" stretchy="false" xref="S3.SS2.p5.2.m2.1.1.1.2.1.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p5.2.m2.1b"><apply id="S3.SS2.p5.2.m2.1.1.cmml" xref="S3.SS2.p5.2.m2.1.1"><in id="S3.SS2.p5.2.m2.1.1.2.cmml" xref="S3.SS2.p5.2.m2.1.1.2"></in><ci id="S3.SS2.p5.2.m2.1.1.3.cmml" xref="S3.SS2.p5.2.m2.1.1.3">ğ‘–</ci><apply id="S3.SS2.p5.2.m2.1.1.1.2.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1"><csymbol cd="latexml" id="S3.SS2.p5.2.m2.1.1.1.2.1.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1.2">delimited-[]</csymbol><apply id="S3.SS2.p5.2.m2.1.1.1.1.1.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p5.2.m2.1.1.1.1.1.1.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1.1">superscript</csymbol><ci id="S3.SS2.p5.2.m2.1.1.1.1.1.2.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1.1.2">ğ‘›</ci><ci id="S3.SS2.p5.2.m2.1.1.1.1.1.3.cmml" xref="S3.SS2.p5.2.m2.1.1.1.1.1.3">ğ‘¡</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p5.2.m2.1c">i\in[n^{t}]</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p5.2.m2.1d">italic_i âˆˆ [ italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ]</annotation></semantics></math>, unless otherwise stated. Algorithm <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#alg1" title="Algorithm 1 â€£ 3.2 Proposal distribution â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">1</span></a> describes the complete sampling process.</p>
</div>
<div class="ltx_para" id="S3.SS2.p6">
<p class="ltx_p" id="S3.SS2.p6.1">This proposal is both <span class="ltx_text ltx_font_bold" id="S3.SS2.p6.1.1">irreducible</span> and <span class="ltx_text ltx_font_bold" id="S3.SS2.p6.1.2">aperiodic</span> as there is a non-zero probability of going from a particular sentence to any other sentence and back. When <math alttext="i=0" class="ltx_Math" display="inline" id="S3.SS2.p6.1.m1.1"><semantics id="S3.SS2.p6.1.m1.1a"><mrow id="S3.SS2.p6.1.m1.1.1" xref="S3.SS2.p6.1.m1.1.1.cmml"><mi id="S3.SS2.p6.1.m1.1.1.2" xref="S3.SS2.p6.1.m1.1.1.2.cmml">i</mi><mo id="S3.SS2.p6.1.m1.1.1.1" xref="S3.SS2.p6.1.m1.1.1.1.cmml">=</mo><mn id="S3.SS2.p6.1.m1.1.1.3" xref="S3.SS2.p6.1.m1.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p6.1.m1.1b"><apply id="S3.SS2.p6.1.m1.1.1.cmml" xref="S3.SS2.p6.1.m1.1.1"><eq id="S3.SS2.p6.1.m1.1.1.1.cmml" xref="S3.SS2.p6.1.m1.1.1.1"></eq><ci id="S3.SS2.p6.1.m1.1.1.2.cmml" xref="S3.SS2.p6.1.m1.1.1.2">ğ‘–</ci><cn id="S3.SS2.p6.1.m1.1.1.3.cmml" type="integer" xref="S3.SS2.p6.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p6.1.m1.1c">i=0</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p6.1.m1.1d">italic_i = 0</annotation></semantics></math>, we can generate any text from the language model, which, when using ancestral sampling, implies that we can sample any possible sequence. As our approach only requires access to the token-level log probabilities and the ability to generate <span class="ltx_text ltx_font_italic" id="S3.SS2.p6.1.3">good</span> continuations given a prefix, it can also be used with closed LLMs through an API as long as the it provides access to the sample likelihoods. However, we limit our experiments to open-source models due to the incurred cost and lack of training details about these black-box models.
</p>
</div>
</section>
<section class="ltx_subsection" id="S3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Connections to Reinforcement Learning with Human Feedback</h3>
<div class="ltx_para" id="S3.SS3.p1">
<p class="ltx_p" id="S3.SS3.p1.3">Reinforcement Learning with Human Feedback (RLHF) leverages human feedback to guide the learning process of complex NLP tasks <cite class="ltx_cite ltx_citemacro_citep">(Stiennon etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib69" title="">2022</a>; Fernandes etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib16" title="">2023</a>; Kaufmann etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib33" title="">2023</a>)</cite>.
The process is as follows. Given a language model, one generates hypotheses <math alttext="y\in\mathcal{Y}" class="ltx_Math" display="inline" id="S3.SS3.p1.1.m1.1"><semantics id="S3.SS3.p1.1.m1.1a"><mrow id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml"><mi id="S3.SS3.p1.1.m1.1.1.2" xref="S3.SS3.p1.1.m1.1.1.2.cmml">y</mi><mo id="S3.SS3.p1.1.m1.1.1.1" xref="S3.SS3.p1.1.m1.1.1.1.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS3.p1.1.m1.1.1.3" xref="S3.SS3.p1.1.m1.1.1.3.cmml">ğ’´</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><apply id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1"><in id="S3.SS3.p1.1.m1.1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1.1"></in><ci id="S3.SS3.p1.1.m1.1.1.2.cmml" xref="S3.SS3.p1.1.m1.1.1.2">ğ‘¦</ci><ci id="S3.SS3.p1.1.m1.1.1.3.cmml" xref="S3.SS3.p1.1.m1.1.1.3">ğ’´</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">y\in\mathcal{Y}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.1.m1.1d">italic_y âˆˆ caligraphic_Y</annotation></semantics></math> given an input prompt <math alttext="x" class="ltx_Math" display="inline" id="S3.SS3.p1.2.m2.1"><semantics id="S3.SS3.p1.2.m2.1a"><mi id="S3.SS3.p1.2.m2.1.1" xref="S3.SS3.p1.2.m2.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.2.m2.1b"><ci id="S3.SS3.p1.2.m2.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.2.m2.1c">x</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.2.m2.1d">italic_x</annotation></semantics></math> and gathers human feedback about which outputs are preferable. This preference data is then used to train a proxy reward model <math alttext="r_{\phi}(y,x)" class="ltx_Math" display="inline" id="S3.SS3.p1.3.m3.2"><semantics id="S3.SS3.p1.3.m3.2a"><mrow id="S3.SS3.p1.3.m3.2.3" xref="S3.SS3.p1.3.m3.2.3.cmml"><msub id="S3.SS3.p1.3.m3.2.3.2" xref="S3.SS3.p1.3.m3.2.3.2.cmml"><mi id="S3.SS3.p1.3.m3.2.3.2.2" xref="S3.SS3.p1.3.m3.2.3.2.2.cmml">r</mi><mi id="S3.SS3.p1.3.m3.2.3.2.3" xref="S3.SS3.p1.3.m3.2.3.2.3.cmml">Ï•</mi></msub><mo id="S3.SS3.p1.3.m3.2.3.1" xref="S3.SS3.p1.3.m3.2.3.1.cmml">â¢</mo><mrow id="S3.SS3.p1.3.m3.2.3.3.2" xref="S3.SS3.p1.3.m3.2.3.3.1.cmml"><mo id="S3.SS3.p1.3.m3.2.3.3.2.1" stretchy="false" xref="S3.SS3.p1.3.m3.2.3.3.1.cmml">(</mo><mi id="S3.SS3.p1.3.m3.1.1" xref="S3.SS3.p1.3.m3.1.1.cmml">y</mi><mo id="S3.SS3.p1.3.m3.2.3.3.2.2" xref="S3.SS3.p1.3.m3.2.3.3.1.cmml">,</mo><mi id="S3.SS3.p1.3.m3.2.2" xref="S3.SS3.p1.3.m3.2.2.cmml">x</mi><mo id="S3.SS3.p1.3.m3.2.3.3.2.3" stretchy="false" xref="S3.SS3.p1.3.m3.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.3.m3.2b"><apply id="S3.SS3.p1.3.m3.2.3.cmml" xref="S3.SS3.p1.3.m3.2.3"><times id="S3.SS3.p1.3.m3.2.3.1.cmml" xref="S3.SS3.p1.3.m3.2.3.1"></times><apply id="S3.SS3.p1.3.m3.2.3.2.cmml" xref="S3.SS3.p1.3.m3.2.3.2"><csymbol cd="ambiguous" id="S3.SS3.p1.3.m3.2.3.2.1.cmml" xref="S3.SS3.p1.3.m3.2.3.2">subscript</csymbol><ci id="S3.SS3.p1.3.m3.2.3.2.2.cmml" xref="S3.SS3.p1.3.m3.2.3.2.2">ğ‘Ÿ</ci><ci id="S3.SS3.p1.3.m3.2.3.2.3.cmml" xref="S3.SS3.p1.3.m3.2.3.2.3">italic-Ï•</ci></apply><interval closure="open" id="S3.SS3.p1.3.m3.2.3.3.1.cmml" xref="S3.SS3.p1.3.m3.2.3.3.2"><ci id="S3.SS3.p1.3.m3.1.1.cmml" xref="S3.SS3.p1.3.m3.1.1">ğ‘¦</ci><ci id="S3.SS3.p1.3.m3.2.2.cmml" xref="S3.SS3.p1.3.m3.2.2">ğ‘¥</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.3.m3.2c">r_{\phi}(y,x)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.3.m3.2d">italic_r start_POSTSUBSCRIPT italic_Ï• end_POSTSUBSCRIPT ( italic_y , italic_x )</annotation></semantics></math>. Finally, reinforcement learning (RL) methods are used to optimize the original LM with respect to the reward model, following</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E11">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\max_{\pi}\mathbb{E}_{x\sim\mathcal{D},y\sim\pi(y|x)}\left[\frac{r_{\phi}(x,y)%
}{\beta}\right]-D_{\text{KL}}\left[\pi(y|x)\parallel p_{\text{LM}}(y|x)\right]." class="ltx_math_unparsed" display="block" id="S3.E11.m1.4"><semantics id="S3.E11.m1.4a"><mrow id="S3.E11.m1.4b"><munder id="S3.E11.m1.4.5"><mi id="S3.E11.m1.4.5.2">max</mi><mi id="S3.E11.m1.4.5.3">Ï€</mi></munder><msub id="S3.E11.m1.4.6"><mi id="S3.E11.m1.4.6.2">ğ”¼</mi><mrow id="S3.E11.m1.2.2.2.2"><mrow id="S3.E11.m1.1.1.1.1.1"><mi id="S3.E11.m1.1.1.1.1.1.2">x</mi><mo id="S3.E11.m1.1.1.1.1.1.1">âˆ¼</mo><mi class="ltx_font_mathcaligraphic" id="S3.E11.m1.1.1.1.1.1.3">ğ’Ÿ</mi></mrow><mo id="S3.E11.m1.2.2.2.2.3">,</mo><mrow id="S3.E11.m1.2.2.2.2.2"><mi id="S3.E11.m1.2.2.2.2.2.3">y</mi><mo id="S3.E11.m1.2.2.2.2.2.2">âˆ¼</mo><mrow id="S3.E11.m1.2.2.2.2.2.1"><mi id="S3.E11.m1.2.2.2.2.2.1.3">Ï€</mi><mo id="S3.E11.m1.2.2.2.2.2.1.2">â¢</mo><mrow id="S3.E11.m1.2.2.2.2.2.1.1.1"><mo id="S3.E11.m1.2.2.2.2.2.1.1.1.2" stretchy="false">(</mo><mrow id="S3.E11.m1.2.2.2.2.2.1.1.1.1"><mi id="S3.E11.m1.2.2.2.2.2.1.1.1.1.2">y</mi><mo fence="false" id="S3.E11.m1.2.2.2.2.2.1.1.1.1.1">|</mo><mi id="S3.E11.m1.2.2.2.2.2.1.1.1.1.3">x</mi></mrow><mo id="S3.E11.m1.2.2.2.2.2.1.1.1.3" stretchy="false">)</mo></mrow></mrow></mrow></mrow></msub><mrow id="S3.E11.m1.4.7"><mo id="S3.E11.m1.4.7.1">[</mo><mfrac id="S3.E11.m1.4.4"><mrow id="S3.E11.m1.4.4.2"><msub id="S3.E11.m1.4.4.2.4"><mi id="S3.E11.m1.4.4.2.4.2">r</mi><mi id="S3.E11.m1.4.4.2.4.3">Ï•</mi></msub><mo id="S3.E11.m1.4.4.2.3">â¢</mo><mrow id="S3.E11.m1.4.4.2.5.2"><mo id="S3.E11.m1.4.4.2.5.2.1" stretchy="false">(</mo><mi id="S3.E11.m1.3.3.1.1">x</mi><mo id="S3.E11.m1.4.4.2.5.2.2">,</mo><mi id="S3.E11.m1.4.4.2.2">y</mi><mo id="S3.E11.m1.4.4.2.5.2.3" stretchy="false">)</mo></mrow></mrow><mi id="S3.E11.m1.4.4.4">Î²</mi></mfrac><mo id="S3.E11.m1.4.7.2">]</mo></mrow><mo id="S3.E11.m1.4.8">âˆ’</mo><msub id="S3.E11.m1.4.9"><mi id="S3.E11.m1.4.9.2">D</mi><mtext id="S3.E11.m1.4.9.3">KL</mtext></msub><mrow id="S3.E11.m1.4.10"><mo id="S3.E11.m1.4.10.1">[</mo><mi id="S3.E11.m1.4.10.2">Ï€</mi><mrow id="S3.E11.m1.4.10.3"><mo id="S3.E11.m1.4.10.3.1" stretchy="false">(</mo><mi id="S3.E11.m1.4.10.3.2">y</mi><mo fence="false" id="S3.E11.m1.4.10.3.3" rspace="0.167em" stretchy="false">|</mo><mi id="S3.E11.m1.4.10.3.4">x</mi><mo id="S3.E11.m1.4.10.3.5" stretchy="false">)</mo></mrow><mo id="S3.E11.m1.4.10.4" lspace="0em" rspace="0.167em">âˆ¥</mo><msub id="S3.E11.m1.4.10.5"><mi id="S3.E11.m1.4.10.5.2">p</mi><mtext id="S3.E11.m1.4.10.5.3">LM</mtext></msub><mrow id="S3.E11.m1.4.10.6"><mo id="S3.E11.m1.4.10.6.1" stretchy="false">(</mo><mi id="S3.E11.m1.4.10.6.2">y</mi><mo fence="false" id="S3.E11.m1.4.10.6.3" rspace="0.167em" stretchy="false">|</mo><mi id="S3.E11.m1.4.10.6.4">x</mi><mo id="S3.E11.m1.4.10.6.5" stretchy="false">)</mo></mrow><mo id="S3.E11.m1.4.10.7">]</mo></mrow><mo id="S3.E11.m1.4.11" lspace="0em">.</mo></mrow><annotation encoding="application/x-tex" id="S3.E11.m1.4c">\max_{\pi}\mathbb{E}_{x\sim\mathcal{D},y\sim\pi(y|x)}\left[\frac{r_{\phi}(x,y)%
}{\beta}\right]-D_{\text{KL}}\left[\pi(y|x)\parallel p_{\text{LM}}(y|x)\right].</annotation><annotation encoding="application/x-llamapun" id="S3.E11.m1.4d">roman_max start_POSTSUBSCRIPT italic_Ï€ end_POSTSUBSCRIPT blackboard_E start_POSTSUBSCRIPT italic_x âˆ¼ caligraphic_D , italic_y âˆ¼ italic_Ï€ ( italic_y | italic_x ) end_POSTSUBSCRIPT [ divide start_ARG italic_r start_POSTSUBSCRIPT italic_Ï• end_POSTSUBSCRIPT ( italic_x , italic_y ) end_ARG start_ARG italic_Î² end_ARG ] - italic_D start_POSTSUBSCRIPT KL end_POSTSUBSCRIPT [ italic_Ï€ ( italic_y | italic_x ) âˆ¥ italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y | italic_x ) ] .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(11)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.p1.6">Many works show that the optimal solution to the KL-constrained reward maximization objective takes the form <cite class="ltx_cite ltx_citemacro_citep">(Peters and Schaal, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib55" title="">2007</a>; Peng etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib52" title="">2019</a>; Korbak etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib39" title="">2022b</a>, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib38" title="">a</a>; Go etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib22" title="">2023</a>)</cite>:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E12">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\pi(y|x)=\frac{1}{Z_{\beta}(x)}p_{\text{LM}}(y|x)\exp\Bigg{(}\frac{r(y,x)}{%
\beta}\Bigg{)}," class="ltx_Math" display="block" id="S3.E12.m1.5"><semantics id="S3.E12.m1.5a"><mrow id="S3.E12.m1.5.5.1" xref="S3.E12.m1.5.5.1.1.cmml"><mrow id="S3.E12.m1.5.5.1.1" xref="S3.E12.m1.5.5.1.1.cmml"><mrow id="S3.E12.m1.5.5.1.1.1" xref="S3.E12.m1.5.5.1.1.1.cmml"><mi id="S3.E12.m1.5.5.1.1.1.3" xref="S3.E12.m1.5.5.1.1.1.3.cmml">Ï€</mi><mo id="S3.E12.m1.5.5.1.1.1.2" xref="S3.E12.m1.5.5.1.1.1.2.cmml">â¢</mo><mrow id="S3.E12.m1.5.5.1.1.1.1.1" xref="S3.E12.m1.5.5.1.1.1.1.1.1.cmml"><mo id="S3.E12.m1.5.5.1.1.1.1.1.2" stretchy="false" xref="S3.E12.m1.5.5.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E12.m1.5.5.1.1.1.1.1.1" xref="S3.E12.m1.5.5.1.1.1.1.1.1.cmml"><mi id="S3.E12.m1.5.5.1.1.1.1.1.1.2" xref="S3.E12.m1.5.5.1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E12.m1.5.5.1.1.1.1.1.1.1" xref="S3.E12.m1.5.5.1.1.1.1.1.1.1.cmml">|</mo><mi id="S3.E12.m1.5.5.1.1.1.1.1.1.3" xref="S3.E12.m1.5.5.1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E12.m1.5.5.1.1.1.1.1.3" stretchy="false" xref="S3.E12.m1.5.5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E12.m1.5.5.1.1.3" xref="S3.E12.m1.5.5.1.1.3.cmml">=</mo><mrow id="S3.E12.m1.5.5.1.1.2" xref="S3.E12.m1.5.5.1.1.2.cmml"><mfrac id="S3.E12.m1.1.1" xref="S3.E12.m1.1.1.cmml"><mn id="S3.E12.m1.1.1.3" xref="S3.E12.m1.1.1.3.cmml">1</mn><mrow id="S3.E12.m1.1.1.1" xref="S3.E12.m1.1.1.1.cmml"><msub id="S3.E12.m1.1.1.1.3" xref="S3.E12.m1.1.1.1.3.cmml"><mi id="S3.E12.m1.1.1.1.3.2" xref="S3.E12.m1.1.1.1.3.2.cmml">Z</mi><mi id="S3.E12.m1.1.1.1.3.3" xref="S3.E12.m1.1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.E12.m1.1.1.1.2" xref="S3.E12.m1.1.1.1.2.cmml">â¢</mo><mrow id="S3.E12.m1.1.1.1.4.2" xref="S3.E12.m1.1.1.1.cmml"><mo id="S3.E12.m1.1.1.1.4.2.1" stretchy="false" xref="S3.E12.m1.1.1.1.cmml">(</mo><mi id="S3.E12.m1.1.1.1.1" xref="S3.E12.m1.1.1.1.1.cmml">x</mi><mo id="S3.E12.m1.1.1.1.4.2.2" stretchy="false" xref="S3.E12.m1.1.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="S3.E12.m1.5.5.1.1.2.2" xref="S3.E12.m1.5.5.1.1.2.2.cmml">â¢</mo><msub id="S3.E12.m1.5.5.1.1.2.3" xref="S3.E12.m1.5.5.1.1.2.3.cmml"><mi id="S3.E12.m1.5.5.1.1.2.3.2" xref="S3.E12.m1.5.5.1.1.2.3.2.cmml">p</mi><mtext id="S3.E12.m1.5.5.1.1.2.3.3" xref="S3.E12.m1.5.5.1.1.2.3.3a.cmml">LM</mtext></msub><mo id="S3.E12.m1.5.5.1.1.2.2a" xref="S3.E12.m1.5.5.1.1.2.2.cmml">â¢</mo><mrow id="S3.E12.m1.5.5.1.1.2.1.1" xref="S3.E12.m1.5.5.1.1.2.1.1.1.cmml"><mo id="S3.E12.m1.5.5.1.1.2.1.1.2" stretchy="false" xref="S3.E12.m1.5.5.1.1.2.1.1.1.cmml">(</mo><mrow id="S3.E12.m1.5.5.1.1.2.1.1.1" xref="S3.E12.m1.5.5.1.1.2.1.1.1.cmml"><mi id="S3.E12.m1.5.5.1.1.2.1.1.1.2" xref="S3.E12.m1.5.5.1.1.2.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.E12.m1.5.5.1.1.2.1.1.1.1" xref="S3.E12.m1.5.5.1.1.2.1.1.1.1.cmml">|</mo><mi id="S3.E12.m1.5.5.1.1.2.1.1.1.3" xref="S3.E12.m1.5.5.1.1.2.1.1.1.3.cmml">x</mi></mrow><mo id="S3.E12.m1.5.5.1.1.2.1.1.3" stretchy="false" xref="S3.E12.m1.5.5.1.1.2.1.1.1.cmml">)</mo></mrow><mo id="S3.E12.m1.5.5.1.1.2.2b" lspace="0.167em" xref="S3.E12.m1.5.5.1.1.2.2.cmml">â¢</mo><mrow id="S3.E12.m1.5.5.1.1.2.4.2" xref="S3.E12.m1.5.5.1.1.2.4.1.cmml"><mi id="S3.E12.m1.4.4" xref="S3.E12.m1.4.4.cmml">exp</mi><mo id="S3.E12.m1.5.5.1.1.2.4.2a" xref="S3.E12.m1.5.5.1.1.2.4.1.cmml">â¡</mo><mrow id="S3.E12.m1.5.5.1.1.2.4.2.1" xref="S3.E12.m1.5.5.1.1.2.4.1.cmml"><mo id="S3.E12.m1.5.5.1.1.2.4.2.1.1" maxsize="260%" minsize="260%" xref="S3.E12.m1.5.5.1.1.2.4.1.cmml">(</mo><mfrac id="S3.E12.m1.3.3" xref="S3.E12.m1.3.3.cmml"><mrow id="S3.E12.m1.3.3.2" xref="S3.E12.m1.3.3.2.cmml"><mi id="S3.E12.m1.3.3.2.4" xref="S3.E12.m1.3.3.2.4.cmml">r</mi><mo id="S3.E12.m1.3.3.2.3" xref="S3.E12.m1.3.3.2.3.cmml">â¢</mo><mrow id="S3.E12.m1.3.3.2.5.2" xref="S3.E12.m1.3.3.2.5.1.cmml"><mo id="S3.E12.m1.3.3.2.5.2.1" stretchy="false" xref="S3.E12.m1.3.3.2.5.1.cmml">(</mo><mi id="S3.E12.m1.2.2.1.1" xref="S3.E12.m1.2.2.1.1.cmml">y</mi><mo id="S3.E12.m1.3.3.2.5.2.2" xref="S3.E12.m1.3.3.2.5.1.cmml">,</mo><mi id="S3.E12.m1.3.3.2.2" xref="S3.E12.m1.3.3.2.2.cmml">x</mi><mo id="S3.E12.m1.3.3.2.5.2.3" stretchy="false" xref="S3.E12.m1.3.3.2.5.1.cmml">)</mo></mrow></mrow><mi id="S3.E12.m1.3.3.4" xref="S3.E12.m1.3.3.4.cmml">Î²</mi></mfrac><mo id="S3.E12.m1.5.5.1.1.2.4.2.1.2" maxsize="260%" minsize="260%" xref="S3.E12.m1.5.5.1.1.2.4.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S3.E12.m1.5.5.1.2" xref="S3.E12.m1.5.5.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E12.m1.5b"><apply id="S3.E12.m1.5.5.1.1.cmml" xref="S3.E12.m1.5.5.1"><eq id="S3.E12.m1.5.5.1.1.3.cmml" xref="S3.E12.m1.5.5.1.1.3"></eq><apply id="S3.E12.m1.5.5.1.1.1.cmml" xref="S3.E12.m1.5.5.1.1.1"><times id="S3.E12.m1.5.5.1.1.1.2.cmml" xref="S3.E12.m1.5.5.1.1.1.2"></times><ci id="S3.E12.m1.5.5.1.1.1.3.cmml" xref="S3.E12.m1.5.5.1.1.1.3">ğœ‹</ci><apply id="S3.E12.m1.5.5.1.1.1.1.1.1.cmml" xref="S3.E12.m1.5.5.1.1.1.1.1"><csymbol cd="latexml" id="S3.E12.m1.5.5.1.1.1.1.1.1.1.cmml" xref="S3.E12.m1.5.5.1.1.1.1.1.1.1">conditional</csymbol><ci id="S3.E12.m1.5.5.1.1.1.1.1.1.2.cmml" xref="S3.E12.m1.5.5.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E12.m1.5.5.1.1.1.1.1.1.3.cmml" xref="S3.E12.m1.5.5.1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="S3.E12.m1.5.5.1.1.2.cmml" xref="S3.E12.m1.5.5.1.1.2"><times id="S3.E12.m1.5.5.1.1.2.2.cmml" xref="S3.E12.m1.5.5.1.1.2.2"></times><apply id="S3.E12.m1.1.1.cmml" xref="S3.E12.m1.1.1"><divide id="S3.E12.m1.1.1.2.cmml" xref="S3.E12.m1.1.1"></divide><cn id="S3.E12.m1.1.1.3.cmml" type="integer" xref="S3.E12.m1.1.1.3">1</cn><apply id="S3.E12.m1.1.1.1.cmml" xref="S3.E12.m1.1.1.1"><times id="S3.E12.m1.1.1.1.2.cmml" xref="S3.E12.m1.1.1.1.2"></times><apply id="S3.E12.m1.1.1.1.3.cmml" xref="S3.E12.m1.1.1.1.3"><csymbol cd="ambiguous" id="S3.E12.m1.1.1.1.3.1.cmml" xref="S3.E12.m1.1.1.1.3">subscript</csymbol><ci id="S3.E12.m1.1.1.1.3.2.cmml" xref="S3.E12.m1.1.1.1.3.2">ğ‘</ci><ci id="S3.E12.m1.1.1.1.3.3.cmml" xref="S3.E12.m1.1.1.1.3.3">ğ›½</ci></apply><ci id="S3.E12.m1.1.1.1.1.cmml" xref="S3.E12.m1.1.1.1.1">ğ‘¥</ci></apply></apply><apply id="S3.E12.m1.5.5.1.1.2.3.cmml" xref="S3.E12.m1.5.5.1.1.2.3"><csymbol cd="ambiguous" id="S3.E12.m1.5.5.1.1.2.3.1.cmml" xref="S3.E12.m1.5.5.1.1.2.3">subscript</csymbol><ci id="S3.E12.m1.5.5.1.1.2.3.2.cmml" xref="S3.E12.m1.5.5.1.1.2.3.2">ğ‘</ci><ci id="S3.E12.m1.5.5.1.1.2.3.3a.cmml" xref="S3.E12.m1.5.5.1.1.2.3.3"><mtext id="S3.E12.m1.5.5.1.1.2.3.3.cmml" mathsize="70%" xref="S3.E12.m1.5.5.1.1.2.3.3">LM</mtext></ci></apply><apply id="S3.E12.m1.5.5.1.1.2.1.1.1.cmml" xref="S3.E12.m1.5.5.1.1.2.1.1"><csymbol cd="latexml" id="S3.E12.m1.5.5.1.1.2.1.1.1.1.cmml" xref="S3.E12.m1.5.5.1.1.2.1.1.1.1">conditional</csymbol><ci id="S3.E12.m1.5.5.1.1.2.1.1.1.2.cmml" xref="S3.E12.m1.5.5.1.1.2.1.1.1.2">ğ‘¦</ci><ci id="S3.E12.m1.5.5.1.1.2.1.1.1.3.cmml" xref="S3.E12.m1.5.5.1.1.2.1.1.1.3">ğ‘¥</ci></apply><apply id="S3.E12.m1.5.5.1.1.2.4.1.cmml" xref="S3.E12.m1.5.5.1.1.2.4.2"><exp id="S3.E12.m1.4.4.cmml" xref="S3.E12.m1.4.4"></exp><apply id="S3.E12.m1.3.3.cmml" xref="S3.E12.m1.3.3"><divide id="S3.E12.m1.3.3.3.cmml" xref="S3.E12.m1.3.3"></divide><apply id="S3.E12.m1.3.3.2.cmml" xref="S3.E12.m1.3.3.2"><times id="S3.E12.m1.3.3.2.3.cmml" xref="S3.E12.m1.3.3.2.3"></times><ci id="S3.E12.m1.3.3.2.4.cmml" xref="S3.E12.m1.3.3.2.4">ğ‘Ÿ</ci><interval closure="open" id="S3.E12.m1.3.3.2.5.1.cmml" xref="S3.E12.m1.3.3.2.5.2"><ci id="S3.E12.m1.2.2.1.1.cmml" xref="S3.E12.m1.2.2.1.1">ğ‘¦</ci><ci id="S3.E12.m1.3.3.2.2.cmml" xref="S3.E12.m1.3.3.2.2">ğ‘¥</ci></interval></apply><ci id="S3.E12.m1.3.3.4.cmml" xref="S3.E12.m1.3.3.4">ğ›½</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E12.m1.5c">\pi(y|x)=\frac{1}{Z_{\beta}(x)}p_{\text{LM}}(y|x)\exp\Bigg{(}\frac{r(y,x)}{%
\beta}\Bigg{)},</annotation><annotation encoding="application/x-llamapun" id="S3.E12.m1.5d">italic_Ï€ ( italic_y | italic_x ) = divide start_ARG 1 end_ARG start_ARG italic_Z start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_x ) end_ARG italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y | italic_x ) roman_exp ( divide start_ARG italic_r ( italic_y , italic_x ) end_ARG start_ARG italic_Î² end_ARG ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(12)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.p1.5">where <math alttext="Z_{\beta}(x)=\sum_{y\in\mathcal{Y}}p_{\text{LM}}(y|x)\exp\left(\frac{r\left(x,%
y\right)}{\beta}\right)" class="ltx_Math" display="inline" id="S3.SS3.p1.4.m1.5"><semantics id="S3.SS3.p1.4.m1.5a"><mrow id="S3.SS3.p1.4.m1.5.5" xref="S3.SS3.p1.4.m1.5.5.cmml"><mrow id="S3.SS3.p1.4.m1.5.5.3" xref="S3.SS3.p1.4.m1.5.5.3.cmml"><msub id="S3.SS3.p1.4.m1.5.5.3.2" xref="S3.SS3.p1.4.m1.5.5.3.2.cmml"><mi id="S3.SS3.p1.4.m1.5.5.3.2.2" xref="S3.SS3.p1.4.m1.5.5.3.2.2.cmml">Z</mi><mi id="S3.SS3.p1.4.m1.5.5.3.2.3" xref="S3.SS3.p1.4.m1.5.5.3.2.3.cmml">Î²</mi></msub><mo id="S3.SS3.p1.4.m1.5.5.3.1" xref="S3.SS3.p1.4.m1.5.5.3.1.cmml">â¢</mo><mrow id="S3.SS3.p1.4.m1.5.5.3.3.2" xref="S3.SS3.p1.4.m1.5.5.3.cmml"><mo id="S3.SS3.p1.4.m1.5.5.3.3.2.1" stretchy="false" xref="S3.SS3.p1.4.m1.5.5.3.cmml">(</mo><mi id="S3.SS3.p1.4.m1.3.3" xref="S3.SS3.p1.4.m1.3.3.cmml">x</mi><mo id="S3.SS3.p1.4.m1.5.5.3.3.2.2" stretchy="false" xref="S3.SS3.p1.4.m1.5.5.3.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p1.4.m1.5.5.2" rspace="0.111em" xref="S3.SS3.p1.4.m1.5.5.2.cmml">=</mo><mrow id="S3.SS3.p1.4.m1.5.5.1" xref="S3.SS3.p1.4.m1.5.5.1.cmml"><msub id="S3.SS3.p1.4.m1.5.5.1.2" xref="S3.SS3.p1.4.m1.5.5.1.2.cmml"><mo id="S3.SS3.p1.4.m1.5.5.1.2.2" xref="S3.SS3.p1.4.m1.5.5.1.2.2.cmml">âˆ‘</mo><mrow id="S3.SS3.p1.4.m1.5.5.1.2.3" xref="S3.SS3.p1.4.m1.5.5.1.2.3.cmml"><mi id="S3.SS3.p1.4.m1.5.5.1.2.3.2" xref="S3.SS3.p1.4.m1.5.5.1.2.3.2.cmml">y</mi><mo id="S3.SS3.p1.4.m1.5.5.1.2.3.1" xref="S3.SS3.p1.4.m1.5.5.1.2.3.1.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S3.SS3.p1.4.m1.5.5.1.2.3.3" xref="S3.SS3.p1.4.m1.5.5.1.2.3.3.cmml">ğ’´</mi></mrow></msub><mrow id="S3.SS3.p1.4.m1.5.5.1.1" xref="S3.SS3.p1.4.m1.5.5.1.1.cmml"><msub id="S3.SS3.p1.4.m1.5.5.1.1.3" xref="S3.SS3.p1.4.m1.5.5.1.1.3.cmml"><mi id="S3.SS3.p1.4.m1.5.5.1.1.3.2" xref="S3.SS3.p1.4.m1.5.5.1.1.3.2.cmml">p</mi><mtext id="S3.SS3.p1.4.m1.5.5.1.1.3.3" xref="S3.SS3.p1.4.m1.5.5.1.1.3.3a.cmml">LM</mtext></msub><mo id="S3.SS3.p1.4.m1.5.5.1.1.2" xref="S3.SS3.p1.4.m1.5.5.1.1.2.cmml">â¢</mo><mrow id="S3.SS3.p1.4.m1.5.5.1.1.1.1" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.cmml"><mo id="S3.SS3.p1.4.m1.5.5.1.1.1.1.2" stretchy="false" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS3.p1.4.m1.5.5.1.1.1.1.1" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.cmml"><mi id="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.2" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.1" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.3" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.SS3.p1.4.m1.5.5.1.1.1.1.3" stretchy="false" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.cmml">)</mo></mrow><mo id="S3.SS3.p1.4.m1.5.5.1.1.2a" lspace="0.167em" xref="S3.SS3.p1.4.m1.5.5.1.1.2.cmml">â¢</mo><mrow id="S3.SS3.p1.4.m1.5.5.1.1.4.2" xref="S3.SS3.p1.4.m1.5.5.1.1.4.1.cmml"><mi id="S3.SS3.p1.4.m1.4.4" xref="S3.SS3.p1.4.m1.4.4.cmml">exp</mi><mo id="S3.SS3.p1.4.m1.5.5.1.1.4.2a" xref="S3.SS3.p1.4.m1.5.5.1.1.4.1.cmml">â¡</mo><mrow id="S3.SS3.p1.4.m1.5.5.1.1.4.2.1" xref="S3.SS3.p1.4.m1.5.5.1.1.4.1.cmml"><mo id="S3.SS3.p1.4.m1.5.5.1.1.4.2.1.1" xref="S3.SS3.p1.4.m1.5.5.1.1.4.1.cmml">(</mo><mfrac id="S3.SS3.p1.4.m1.2.2" xref="S3.SS3.p1.4.m1.2.2.cmml"><mrow id="S3.SS3.p1.4.m1.2.2.2" xref="S3.SS3.p1.4.m1.2.2.2.cmml"><mi id="S3.SS3.p1.4.m1.2.2.2.4" xref="S3.SS3.p1.4.m1.2.2.2.4.cmml">r</mi><mo id="S3.SS3.p1.4.m1.2.2.2.3" xref="S3.SS3.p1.4.m1.2.2.2.3.cmml">â¢</mo><mrow id="S3.SS3.p1.4.m1.2.2.2.5.2" xref="S3.SS3.p1.4.m1.2.2.2.5.1.cmml"><mo id="S3.SS3.p1.4.m1.2.2.2.5.2.1" xref="S3.SS3.p1.4.m1.2.2.2.5.1.cmml">(</mo><mi id="S3.SS3.p1.4.m1.1.1.1.1" xref="S3.SS3.p1.4.m1.1.1.1.1.cmml">x</mi><mo id="S3.SS3.p1.4.m1.2.2.2.5.2.2" xref="S3.SS3.p1.4.m1.2.2.2.5.1.cmml">,</mo><mi id="S3.SS3.p1.4.m1.2.2.2.2" xref="S3.SS3.p1.4.m1.2.2.2.2.cmml">y</mi><mo id="S3.SS3.p1.4.m1.2.2.2.5.2.3" xref="S3.SS3.p1.4.m1.2.2.2.5.1.cmml">)</mo></mrow></mrow><mi id="S3.SS3.p1.4.m1.2.2.4" xref="S3.SS3.p1.4.m1.2.2.4.cmml">Î²</mi></mfrac><mo id="S3.SS3.p1.4.m1.5.5.1.1.4.2.1.2" xref="S3.SS3.p1.4.m1.5.5.1.1.4.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.4.m1.5b"><apply id="S3.SS3.p1.4.m1.5.5.cmml" xref="S3.SS3.p1.4.m1.5.5"><eq id="S3.SS3.p1.4.m1.5.5.2.cmml" xref="S3.SS3.p1.4.m1.5.5.2"></eq><apply id="S3.SS3.p1.4.m1.5.5.3.cmml" xref="S3.SS3.p1.4.m1.5.5.3"><times id="S3.SS3.p1.4.m1.5.5.3.1.cmml" xref="S3.SS3.p1.4.m1.5.5.3.1"></times><apply id="S3.SS3.p1.4.m1.5.5.3.2.cmml" xref="S3.SS3.p1.4.m1.5.5.3.2"><csymbol cd="ambiguous" id="S3.SS3.p1.4.m1.5.5.3.2.1.cmml" xref="S3.SS3.p1.4.m1.5.5.3.2">subscript</csymbol><ci id="S3.SS3.p1.4.m1.5.5.3.2.2.cmml" xref="S3.SS3.p1.4.m1.5.5.3.2.2">ğ‘</ci><ci id="S3.SS3.p1.4.m1.5.5.3.2.3.cmml" xref="S3.SS3.p1.4.m1.5.5.3.2.3">ğ›½</ci></apply><ci id="S3.SS3.p1.4.m1.3.3.cmml" xref="S3.SS3.p1.4.m1.3.3">ğ‘¥</ci></apply><apply id="S3.SS3.p1.4.m1.5.5.1.cmml" xref="S3.SS3.p1.4.m1.5.5.1"><apply id="S3.SS3.p1.4.m1.5.5.1.2.cmml" xref="S3.SS3.p1.4.m1.5.5.1.2"><csymbol cd="ambiguous" id="S3.SS3.p1.4.m1.5.5.1.2.1.cmml" xref="S3.SS3.p1.4.m1.5.5.1.2">subscript</csymbol><sum id="S3.SS3.p1.4.m1.5.5.1.2.2.cmml" xref="S3.SS3.p1.4.m1.5.5.1.2.2"></sum><apply id="S3.SS3.p1.4.m1.5.5.1.2.3.cmml" xref="S3.SS3.p1.4.m1.5.5.1.2.3"><in id="S3.SS3.p1.4.m1.5.5.1.2.3.1.cmml" xref="S3.SS3.p1.4.m1.5.5.1.2.3.1"></in><ci id="S3.SS3.p1.4.m1.5.5.1.2.3.2.cmml" xref="S3.SS3.p1.4.m1.5.5.1.2.3.2">ğ‘¦</ci><ci id="S3.SS3.p1.4.m1.5.5.1.2.3.3.cmml" xref="S3.SS3.p1.4.m1.5.5.1.2.3.3">ğ’´</ci></apply></apply><apply id="S3.SS3.p1.4.m1.5.5.1.1.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1"><times id="S3.SS3.p1.4.m1.5.5.1.1.2.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.2"></times><apply id="S3.SS3.p1.4.m1.5.5.1.1.3.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.3"><csymbol cd="ambiguous" id="S3.SS3.p1.4.m1.5.5.1.1.3.1.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.3">subscript</csymbol><ci id="S3.SS3.p1.4.m1.5.5.1.1.3.2.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.3.2">ğ‘</ci><ci id="S3.SS3.p1.4.m1.5.5.1.1.3.3a.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.3.3"><mtext id="S3.SS3.p1.4.m1.5.5.1.1.3.3.cmml" mathsize="70%" xref="S3.SS3.p1.4.m1.5.5.1.1.3.3">LM</mtext></ci></apply><apply id="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1"><csymbol cd="latexml" id="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.1.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.2.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.3.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.1.1.1.3">ğ‘¥</ci></apply><apply id="S3.SS3.p1.4.m1.5.5.1.1.4.1.cmml" xref="S3.SS3.p1.4.m1.5.5.1.1.4.2"><exp id="S3.SS3.p1.4.m1.4.4.cmml" xref="S3.SS3.p1.4.m1.4.4"></exp><apply id="S3.SS3.p1.4.m1.2.2.cmml" xref="S3.SS3.p1.4.m1.2.2"><divide id="S3.SS3.p1.4.m1.2.2.3.cmml" xref="S3.SS3.p1.4.m1.2.2"></divide><apply id="S3.SS3.p1.4.m1.2.2.2.cmml" xref="S3.SS3.p1.4.m1.2.2.2"><times id="S3.SS3.p1.4.m1.2.2.2.3.cmml" xref="S3.SS3.p1.4.m1.2.2.2.3"></times><ci id="S3.SS3.p1.4.m1.2.2.2.4.cmml" xref="S3.SS3.p1.4.m1.2.2.2.4">ğ‘Ÿ</ci><interval closure="open" id="S3.SS3.p1.4.m1.2.2.2.5.1.cmml" xref="S3.SS3.p1.4.m1.2.2.2.5.2"><ci id="S3.SS3.p1.4.m1.1.1.1.1.cmml" xref="S3.SS3.p1.4.m1.1.1.1.1">ğ‘¥</ci><ci id="S3.SS3.p1.4.m1.2.2.2.2.cmml" xref="S3.SS3.p1.4.m1.2.2.2.2">ğ‘¦</ci></interval></apply><ci id="S3.SS3.p1.4.m1.2.2.4.cmml" xref="S3.SS3.p1.4.m1.2.2.4">ğ›½</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.4.m1.5c">Z_{\beta}(x)=\sum_{y\in\mathcal{Y}}p_{\text{LM}}(y|x)\exp\left(\frac{r\left(x,%
y\right)}{\beta}\right)</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.4.m1.5d">italic_Z start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_x ) = âˆ‘ start_POSTSUBSCRIPT italic_y âˆˆ caligraphic_Y end_POSTSUBSCRIPT italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y | italic_x ) roman_exp ( divide start_ARG italic_r ( italic_x , italic_y ) end_ARG start_ARG italic_Î² end_ARG )</annotation></semantics></math>.
While we cannot sample autoregressively from this distribution, this density can be represented as a Gibbs distribution with the corresponding reward function <math alttext="\tilde{r}(x,y)=\log p_{\text{LM}}(y|x)+\frac{r(x,y)}{\beta}" class="ltx_Math" display="inline" id="S3.SS3.p1.5.m2.5"><semantics id="S3.SS3.p1.5.m2.5a"><mrow id="S3.SS3.p1.5.m2.5.5" xref="S3.SS3.p1.5.m2.5.5.cmml"><mrow id="S3.SS3.p1.5.m2.5.5.3" xref="S3.SS3.p1.5.m2.5.5.3.cmml"><mover accent="true" id="S3.SS3.p1.5.m2.5.5.3.2" xref="S3.SS3.p1.5.m2.5.5.3.2.cmml"><mi id="S3.SS3.p1.5.m2.5.5.3.2.2" xref="S3.SS3.p1.5.m2.5.5.3.2.2.cmml">r</mi><mo id="S3.SS3.p1.5.m2.5.5.3.2.1" xref="S3.SS3.p1.5.m2.5.5.3.2.1.cmml">~</mo></mover><mo id="S3.SS3.p1.5.m2.5.5.3.1" xref="S3.SS3.p1.5.m2.5.5.3.1.cmml">â¢</mo><mrow id="S3.SS3.p1.5.m2.5.5.3.3.2" xref="S3.SS3.p1.5.m2.5.5.3.3.1.cmml"><mo id="S3.SS3.p1.5.m2.5.5.3.3.2.1" stretchy="false" xref="S3.SS3.p1.5.m2.5.5.3.3.1.cmml">(</mo><mi id="S3.SS3.p1.5.m2.3.3" xref="S3.SS3.p1.5.m2.3.3.cmml">x</mi><mo id="S3.SS3.p1.5.m2.5.5.3.3.2.2" xref="S3.SS3.p1.5.m2.5.5.3.3.1.cmml">,</mo><mi id="S3.SS3.p1.5.m2.4.4" xref="S3.SS3.p1.5.m2.4.4.cmml">y</mi><mo id="S3.SS3.p1.5.m2.5.5.3.3.2.3" stretchy="false" xref="S3.SS3.p1.5.m2.5.5.3.3.1.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p1.5.m2.5.5.2" xref="S3.SS3.p1.5.m2.5.5.2.cmml">=</mo><mrow id="S3.SS3.p1.5.m2.5.5.1" xref="S3.SS3.p1.5.m2.5.5.1.cmml"><mrow id="S3.SS3.p1.5.m2.5.5.1.1" xref="S3.SS3.p1.5.m2.5.5.1.1.cmml"><mrow id="S3.SS3.p1.5.m2.5.5.1.1.3" xref="S3.SS3.p1.5.m2.5.5.1.1.3.cmml"><mi id="S3.SS3.p1.5.m2.5.5.1.1.3.1" xref="S3.SS3.p1.5.m2.5.5.1.1.3.1.cmml">log</mi><mo id="S3.SS3.p1.5.m2.5.5.1.1.3a" lspace="0.167em" xref="S3.SS3.p1.5.m2.5.5.1.1.3.cmml">â¡</mo><msub id="S3.SS3.p1.5.m2.5.5.1.1.3.2" xref="S3.SS3.p1.5.m2.5.5.1.1.3.2.cmml"><mi id="S3.SS3.p1.5.m2.5.5.1.1.3.2.2" xref="S3.SS3.p1.5.m2.5.5.1.1.3.2.2.cmml">p</mi><mtext id="S3.SS3.p1.5.m2.5.5.1.1.3.2.3" xref="S3.SS3.p1.5.m2.5.5.1.1.3.2.3a.cmml">LM</mtext></msub></mrow><mo id="S3.SS3.p1.5.m2.5.5.1.1.2" xref="S3.SS3.p1.5.m2.5.5.1.1.2.cmml">â¢</mo><mrow id="S3.SS3.p1.5.m2.5.5.1.1.1.1" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.cmml"><mo id="S3.SS3.p1.5.m2.5.5.1.1.1.1.2" stretchy="false" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.cmml">(</mo><mrow id="S3.SS3.p1.5.m2.5.5.1.1.1.1.1" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.cmml"><mi id="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.2" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.1" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.1.cmml">|</mo><mi id="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.3" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="S3.SS3.p1.5.m2.5.5.1.1.1.1.3" stretchy="false" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS3.p1.5.m2.5.5.1.2" xref="S3.SS3.p1.5.m2.5.5.1.2.cmml">+</mo><mfrac id="S3.SS3.p1.5.m2.2.2" xref="S3.SS3.p1.5.m2.2.2.cmml"><mrow id="S3.SS3.p1.5.m2.2.2.2" xref="S3.SS3.p1.5.m2.2.2.2.cmml"><mi id="S3.SS3.p1.5.m2.2.2.2.4" xref="S3.SS3.p1.5.m2.2.2.2.4.cmml">r</mi><mo id="S3.SS3.p1.5.m2.2.2.2.3" xref="S3.SS3.p1.5.m2.2.2.2.3.cmml">â¢</mo><mrow id="S3.SS3.p1.5.m2.2.2.2.5.2" xref="S3.SS3.p1.5.m2.2.2.2.5.1.cmml"><mo id="S3.SS3.p1.5.m2.2.2.2.5.2.1" stretchy="false" xref="S3.SS3.p1.5.m2.2.2.2.5.1.cmml">(</mo><mi id="S3.SS3.p1.5.m2.1.1.1.1" xref="S3.SS3.p1.5.m2.1.1.1.1.cmml">x</mi><mo id="S3.SS3.p1.5.m2.2.2.2.5.2.2" xref="S3.SS3.p1.5.m2.2.2.2.5.1.cmml">,</mo><mi id="S3.SS3.p1.5.m2.2.2.2.2" xref="S3.SS3.p1.5.m2.2.2.2.2.cmml">y</mi><mo id="S3.SS3.p1.5.m2.2.2.2.5.2.3" stretchy="false" xref="S3.SS3.p1.5.m2.2.2.2.5.1.cmml">)</mo></mrow></mrow><mi id="S3.SS3.p1.5.m2.2.2.4" xref="S3.SS3.p1.5.m2.2.2.4.cmml">Î²</mi></mfrac></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.5.m2.5b"><apply id="S3.SS3.p1.5.m2.5.5.cmml" xref="S3.SS3.p1.5.m2.5.5"><eq id="S3.SS3.p1.5.m2.5.5.2.cmml" xref="S3.SS3.p1.5.m2.5.5.2"></eq><apply id="S3.SS3.p1.5.m2.5.5.3.cmml" xref="S3.SS3.p1.5.m2.5.5.3"><times id="S3.SS3.p1.5.m2.5.5.3.1.cmml" xref="S3.SS3.p1.5.m2.5.5.3.1"></times><apply id="S3.SS3.p1.5.m2.5.5.3.2.cmml" xref="S3.SS3.p1.5.m2.5.5.3.2"><ci id="S3.SS3.p1.5.m2.5.5.3.2.1.cmml" xref="S3.SS3.p1.5.m2.5.5.3.2.1">~</ci><ci id="S3.SS3.p1.5.m2.5.5.3.2.2.cmml" xref="S3.SS3.p1.5.m2.5.5.3.2.2">ğ‘Ÿ</ci></apply><interval closure="open" id="S3.SS3.p1.5.m2.5.5.3.3.1.cmml" xref="S3.SS3.p1.5.m2.5.5.3.3.2"><ci id="S3.SS3.p1.5.m2.3.3.cmml" xref="S3.SS3.p1.5.m2.3.3">ğ‘¥</ci><ci id="S3.SS3.p1.5.m2.4.4.cmml" xref="S3.SS3.p1.5.m2.4.4">ğ‘¦</ci></interval></apply><apply id="S3.SS3.p1.5.m2.5.5.1.cmml" xref="S3.SS3.p1.5.m2.5.5.1"><plus id="S3.SS3.p1.5.m2.5.5.1.2.cmml" xref="S3.SS3.p1.5.m2.5.5.1.2"></plus><apply id="S3.SS3.p1.5.m2.5.5.1.1.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1"><times id="S3.SS3.p1.5.m2.5.5.1.1.2.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.2"></times><apply id="S3.SS3.p1.5.m2.5.5.1.1.3.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.3"><log id="S3.SS3.p1.5.m2.5.5.1.1.3.1.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.3.1"></log><apply id="S3.SS3.p1.5.m2.5.5.1.1.3.2.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS3.p1.5.m2.5.5.1.1.3.2.1.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.3.2">subscript</csymbol><ci id="S3.SS3.p1.5.m2.5.5.1.1.3.2.2.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.3.2.2">ğ‘</ci><ci id="S3.SS3.p1.5.m2.5.5.1.1.3.2.3a.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.3.2.3"><mtext id="S3.SS3.p1.5.m2.5.5.1.1.3.2.3.cmml" mathsize="70%" xref="S3.SS3.p1.5.m2.5.5.1.1.3.2.3">LM</mtext></ci></apply></apply><apply id="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1"><csymbol cd="latexml" id="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.1.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.1">conditional</csymbol><ci id="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.2.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.3.cmml" xref="S3.SS3.p1.5.m2.5.5.1.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="S3.SS3.p1.5.m2.2.2.cmml" xref="S3.SS3.p1.5.m2.2.2"><divide id="S3.SS3.p1.5.m2.2.2.3.cmml" xref="S3.SS3.p1.5.m2.2.2"></divide><apply id="S3.SS3.p1.5.m2.2.2.2.cmml" xref="S3.SS3.p1.5.m2.2.2.2"><times id="S3.SS3.p1.5.m2.2.2.2.3.cmml" xref="S3.SS3.p1.5.m2.2.2.2.3"></times><ci id="S3.SS3.p1.5.m2.2.2.2.4.cmml" xref="S3.SS3.p1.5.m2.2.2.2.4">ğ‘Ÿ</ci><interval closure="open" id="S3.SS3.p1.5.m2.2.2.2.5.1.cmml" xref="S3.SS3.p1.5.m2.2.2.2.5.2"><ci id="S3.SS3.p1.5.m2.1.1.1.1.cmml" xref="S3.SS3.p1.5.m2.1.1.1.1">ğ‘¥</ci><ci id="S3.SS3.p1.5.m2.2.2.2.2.cmml" xref="S3.SS3.p1.5.m2.2.2.2.2">ğ‘¦</ci></interval></apply><ci id="S3.SS3.p1.5.m2.2.2.4.cmml" xref="S3.SS3.p1.5.m2.2.2.4">ğ›½</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.5.m2.5c">\tilde{r}(x,y)=\log p_{\text{LM}}(y|x)+\frac{r(x,y)}{\beta}</annotation><annotation encoding="application/x-llamapun" id="S3.SS3.p1.5.m2.5d">over~ start_ARG italic_r end_ARG ( italic_x , italic_y ) = roman_log italic_p start_POSTSUBSCRIPT LM end_POSTSUBSCRIPT ( italic_y | italic_x ) + divide start_ARG italic_r ( italic_x , italic_y ) end_ARG start_ARG italic_Î² end_ARG</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S3.SS3.p2">
<p class="ltx_p" id="S3.SS3.p2.1">Instead of the target distribution expressed in Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E3" title="In 3.1 Metropolis-Hastings â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">3</span></a>, we could define the above distribution as our target when using <span class="ltx_text ltx_font_smallcaps" id="S3.SS3.p2.1.1">Quest</span> to sample from it, avoiding optimizing the objective in Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E11" title="In 3.3 Connections to Reinforcement Learning with Human Feedback â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">11</span></a> directly. If we formulate the acceptance criterion using this target density and our proposal distribution introduced in Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E10" title="In 3.2 Proposal distribution â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">10</span></a>, we obtain the following:</p>
<table class="ltx_equation ltx_eqn_table" id="S3.E13">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\alpha_{\beta}(y,y^{t})=\max\left\{1,\exp\left(\frac{r\left(y,x\right)-r\left(%
y^{t},x\right)}{\beta}\right)\frac{q(i|n)}{q(i|n^{t})}\right\}." class="ltx_Math" display="block" id="S3.E13.m1.11"><semantics id="S3.E13.m1.11a"><mrow id="S3.E13.m1.11.11.1" xref="S3.E13.m1.11.11.1.1.cmml"><mrow id="S3.E13.m1.11.11.1.1" xref="S3.E13.m1.11.11.1.1.cmml"><mrow id="S3.E13.m1.11.11.1.1.1" xref="S3.E13.m1.11.11.1.1.1.cmml"><msub id="S3.E13.m1.11.11.1.1.1.3" xref="S3.E13.m1.11.11.1.1.1.3.cmml"><mi id="S3.E13.m1.11.11.1.1.1.3.2" xref="S3.E13.m1.11.11.1.1.1.3.2.cmml">Î±</mi><mi id="S3.E13.m1.11.11.1.1.1.3.3" xref="S3.E13.m1.11.11.1.1.1.3.3.cmml">Î²</mi></msub><mo id="S3.E13.m1.11.11.1.1.1.2" xref="S3.E13.m1.11.11.1.1.1.2.cmml">â¢</mo><mrow id="S3.E13.m1.11.11.1.1.1.1.1" xref="S3.E13.m1.11.11.1.1.1.1.2.cmml"><mo id="S3.E13.m1.11.11.1.1.1.1.1.2" stretchy="false" xref="S3.E13.m1.11.11.1.1.1.1.2.cmml">(</mo><mi id="S3.E13.m1.7.7" xref="S3.E13.m1.7.7.cmml">y</mi><mo id="S3.E13.m1.11.11.1.1.1.1.1.3" xref="S3.E13.m1.11.11.1.1.1.1.2.cmml">,</mo><msup id="S3.E13.m1.11.11.1.1.1.1.1.1" xref="S3.E13.m1.11.11.1.1.1.1.1.1.cmml"><mi id="S3.E13.m1.11.11.1.1.1.1.1.1.2" xref="S3.E13.m1.11.11.1.1.1.1.1.1.2.cmml">y</mi><mi id="S3.E13.m1.11.11.1.1.1.1.1.1.3" xref="S3.E13.m1.11.11.1.1.1.1.1.1.3.cmml">t</mi></msup><mo id="S3.E13.m1.11.11.1.1.1.1.1.4" stretchy="false" xref="S3.E13.m1.11.11.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="S3.E13.m1.11.11.1.1.3" xref="S3.E13.m1.11.11.1.1.3.cmml">=</mo><mrow id="S3.E13.m1.11.11.1.1.2.1" xref="S3.E13.m1.11.11.1.1.2.2.cmml"><mi id="S3.E13.m1.9.9" xref="S3.E13.m1.9.9.cmml">max</mi><mo id="S3.E13.m1.11.11.1.1.2.1a" xref="S3.E13.m1.11.11.1.1.2.2.cmml">â¡</mo><mrow id="S3.E13.m1.11.11.1.1.2.1.1" xref="S3.E13.m1.11.11.1.1.2.2.cmml"><mo id="S3.E13.m1.11.11.1.1.2.1.1.2" xref="S3.E13.m1.11.11.1.1.2.2.cmml">{</mo><mn id="S3.E13.m1.10.10" xref="S3.E13.m1.10.10.cmml">1</mn><mo id="S3.E13.m1.11.11.1.1.2.1.1.3" xref="S3.E13.m1.11.11.1.1.2.2.cmml">,</mo><mrow id="S3.E13.m1.11.11.1.1.2.1.1.1" xref="S3.E13.m1.11.11.1.1.2.1.1.1.cmml"><mrow id="S3.E13.m1.11.11.1.1.2.1.1.1.2.2" xref="S3.E13.m1.11.11.1.1.2.1.1.1.2.1.cmml"><mi id="S3.E13.m1.8.8" xref="S3.E13.m1.8.8.cmml">exp</mi><mo id="S3.E13.m1.11.11.1.1.2.1.1.1.2.2a" xref="S3.E13.m1.11.11.1.1.2.1.1.1.2.1.cmml">â¡</mo><mrow id="S3.E13.m1.11.11.1.1.2.1.1.1.2.2.1" xref="S3.E13.m1.11.11.1.1.2.1.1.1.2.1.cmml"><mo id="S3.E13.m1.11.11.1.1.2.1.1.1.2.2.1.1" xref="S3.E13.m1.11.11.1.1.2.1.1.1.2.1.cmml">(</mo><mfrac id="S3.E13.m1.4.4" xref="S3.E13.m1.4.4.cmml"><mrow id="S3.E13.m1.4.4.4" xref="S3.E13.m1.4.4.4.cmml"><mrow id="S3.E13.m1.4.4.4.6" xref="S3.E13.m1.4.4.4.6.cmml"><mi id="S3.E13.m1.4.4.4.6.2" xref="S3.E13.m1.4.4.4.6.2.cmml">r</mi><mo id="S3.E13.m1.4.4.4.6.1" xref="S3.E13.m1.4.4.4.6.1.cmml">â¢</mo><mrow id="S3.E13.m1.4.4.4.6.3.2" xref="S3.E13.m1.4.4.4.6.3.1.cmml"><mo id="S3.E13.m1.4.4.4.6.3.2.1" xref="S3.E13.m1.4.4.4.6.3.1.cmml">(</mo><mi id="S3.E13.m1.1.1.1.1" xref="S3.E13.m1.1.1.1.1.cmml">y</mi><mo id="S3.E13.m1.4.4.4.6.3.2.2" xref="S3.E13.m1.4.4.4.6.3.1.cmml">,</mo><mi id="S3.E13.m1.2.2.2.2" xref="S3.E13.m1.2.2.2.2.cmml">x</mi><mo id="S3.E13.m1.4.4.4.6.3.2.3" xref="S3.E13.m1.4.4.4.6.3.1.cmml">)</mo></mrow></mrow><mo id="S3.E13.m1.4.4.4.5" xref="S3.E13.m1.4.4.4.5.cmml">âˆ’</mo><mrow id="S3.E13.m1.4.4.4.4" xref="S3.E13.m1.4.4.4.4.cmml"><mi id="S3.E13.m1.4.4.4.4.3" xref="S3.E13.m1.4.4.4.4.3.cmml">r</mi><mo id="S3.E13.m1.4.4.4.4.2" xref="S3.E13.m1.4.4.4.4.2.cmml">â¢</mo><mrow id="S3.E13.m1.4.4.4.4.1.1" xref="S3.E13.m1.4.4.4.4.1.2.cmml"><mo id="S3.E13.m1.4.4.4.4.1.1.2" xref="S3.E13.m1.4.4.4.4.1.2.cmml">(</mo><msup id="S3.E13.m1.4.4.4.4.1.1.1" xref="S3.E13.m1.4.4.4.4.1.1.1.cmml"><mi id="S3.E13.m1.4.4.4.4.1.1.1.2" xref="S3.E13.m1.4.4.4.4.1.1.1.2.cmml">y</mi><mi id="S3.E13.m1.4.4.4.4.1.1.1.3" xref="S3.E13.m1.4.4.4.4.1.1.1.3.cmml">t</mi></msup><mo id="S3.E13.m1.4.4.4.4.1.1.3" xref="S3.E13.m1.4.4.4.4.1.2.cmml">,</mo><mi id="S3.E13.m1.3.3.3.3" xref="S3.E13.m1.3.3.3.3.cmml">x</mi><mo id="S3.E13.m1.4.4.4.4.1.1.4" xref="S3.E13.m1.4.4.4.4.1.2.cmml">)</mo></mrow></mrow></mrow><mi id="S3.E13.m1.4.4.6" xref="S3.E13.m1.4.4.6.cmml">Î²</mi></mfrac><mo id="S3.E13.m1.11.11.1.1.2.1.1.1.2.2.1.2" xref="S3.E13.m1.11.11.1.1.2.1.1.1.2.1.cmml">)</mo></mrow></mrow><mo id="S3.E13.m1.11.11.1.1.2.1.1.1.1" xref="S3.E13.m1.11.11.1.1.2.1.1.1.1.cmml">â¢</mo><mfrac id="S3.E13.m1.6.6" xref="S3.E13.m1.6.6.cmml"><mrow id="S3.E13.m1.5.5.1" xref="S3.E13.m1.5.5.1.cmml"><mi id="S3.E13.m1.5.5.1.3" xref="S3.E13.m1.5.5.1.3.cmml">q</mi><mo id="S3.E13.m1.5.5.1.2" xref="S3.E13.m1.5.5.1.2.cmml">â¢</mo><mrow id="S3.E13.m1.5.5.1.1.1" xref="S3.E13.m1.5.5.1.1.1.1.cmml"><mo id="S3.E13.m1.5.5.1.1.1.2" stretchy="false" xref="S3.E13.m1.5.5.1.1.1.1.cmml">(</mo><mrow id="S3.E13.m1.5.5.1.1.1.1" xref="S3.E13.m1.5.5.1.1.1.1.cmml"><mi id="S3.E13.m1.5.5.1.1.1.1.2" xref="S3.E13.m1.5.5.1.1.1.1.2.cmml">i</mi><mo fence="false" id="S3.E13.m1.5.5.1.1.1.1.1" xref="S3.E13.m1.5.5.1.1.1.1.1.cmml">|</mo><mi id="S3.E13.m1.5.5.1.1.1.1.3" xref="S3.E13.m1.5.5.1.1.1.1.3.cmml">n</mi></mrow><mo id="S3.E13.m1.5.5.1.1.1.3" stretchy="false" xref="S3.E13.m1.5.5.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S3.E13.m1.6.6.2" xref="S3.E13.m1.6.6.2.cmml"><mi id="S3.E13.m1.6.6.2.3" xref="S3.E13.m1.6.6.2.3.cmml">q</mi><mo id="S3.E13.m1.6.6.2.2" xref="S3.E13.m1.6.6.2.2.cmml">â¢</mo><mrow id="S3.E13.m1.6.6.2.1.1" xref="S3.E13.m1.6.6.2.1.1.1.cmml"><mo id="S3.E13.m1.6.6.2.1.1.2" stretchy="false" xref="S3.E13.m1.6.6.2.1.1.1.cmml">(</mo><mrow id="S3.E13.m1.6.6.2.1.1.1" xref="S3.E13.m1.6.6.2.1.1.1.cmml"><mi id="S3.E13.m1.6.6.2.1.1.1.2" xref="S3.E13.m1.6.6.2.1.1.1.2.cmml">i</mi><mo fence="false" id="S3.E13.m1.6.6.2.1.1.1.1" xref="S3.E13.m1.6.6.2.1.1.1.1.cmml">|</mo><msup id="S3.E13.m1.6.6.2.1.1.1.3" xref="S3.E13.m1.6.6.2.1.1.1.3.cmml"><mi id="S3.E13.m1.6.6.2.1.1.1.3.2" xref="S3.E13.m1.6.6.2.1.1.1.3.2.cmml">n</mi><mi id="S3.E13.m1.6.6.2.1.1.1.3.3" xref="S3.E13.m1.6.6.2.1.1.1.3.3.cmml">t</mi></msup></mrow><mo id="S3.E13.m1.6.6.2.1.1.3" stretchy="false" xref="S3.E13.m1.6.6.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac></mrow><mo id="S3.E13.m1.11.11.1.1.2.1.1.4" xref="S3.E13.m1.11.11.1.1.2.2.cmml">}</mo></mrow></mrow></mrow><mo id="S3.E13.m1.11.11.1.2" lspace="0em" xref="S3.E13.m1.11.11.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.E13.m1.11b"><apply id="S3.E13.m1.11.11.1.1.cmml" xref="S3.E13.m1.11.11.1"><eq id="S3.E13.m1.11.11.1.1.3.cmml" xref="S3.E13.m1.11.11.1.1.3"></eq><apply id="S3.E13.m1.11.11.1.1.1.cmml" xref="S3.E13.m1.11.11.1.1.1"><times id="S3.E13.m1.11.11.1.1.1.2.cmml" xref="S3.E13.m1.11.11.1.1.1.2"></times><apply id="S3.E13.m1.11.11.1.1.1.3.cmml" xref="S3.E13.m1.11.11.1.1.1.3"><csymbol cd="ambiguous" id="S3.E13.m1.11.11.1.1.1.3.1.cmml" xref="S3.E13.m1.11.11.1.1.1.3">subscript</csymbol><ci id="S3.E13.m1.11.11.1.1.1.3.2.cmml" xref="S3.E13.m1.11.11.1.1.1.3.2">ğ›¼</ci><ci id="S3.E13.m1.11.11.1.1.1.3.3.cmml" xref="S3.E13.m1.11.11.1.1.1.3.3">ğ›½</ci></apply><interval closure="open" id="S3.E13.m1.11.11.1.1.1.1.2.cmml" xref="S3.E13.m1.11.11.1.1.1.1.1"><ci id="S3.E13.m1.7.7.cmml" xref="S3.E13.m1.7.7">ğ‘¦</ci><apply id="S3.E13.m1.11.11.1.1.1.1.1.1.cmml" xref="S3.E13.m1.11.11.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E13.m1.11.11.1.1.1.1.1.1.1.cmml" xref="S3.E13.m1.11.11.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E13.m1.11.11.1.1.1.1.1.1.2.cmml" xref="S3.E13.m1.11.11.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S3.E13.m1.11.11.1.1.1.1.1.1.3.cmml" xref="S3.E13.m1.11.11.1.1.1.1.1.1.3">ğ‘¡</ci></apply></interval></apply><apply id="S3.E13.m1.11.11.1.1.2.2.cmml" xref="S3.E13.m1.11.11.1.1.2.1"><max id="S3.E13.m1.9.9.cmml" xref="S3.E13.m1.9.9"></max><cn id="S3.E13.m1.10.10.cmml" type="integer" xref="S3.E13.m1.10.10">1</cn><apply id="S3.E13.m1.11.11.1.1.2.1.1.1.cmml" xref="S3.E13.m1.11.11.1.1.2.1.1.1"><times id="S3.E13.m1.11.11.1.1.2.1.1.1.1.cmml" xref="S3.E13.m1.11.11.1.1.2.1.1.1.1"></times><apply id="S3.E13.m1.11.11.1.1.2.1.1.1.2.1.cmml" xref="S3.E13.m1.11.11.1.1.2.1.1.1.2.2"><exp id="S3.E13.m1.8.8.cmml" xref="S3.E13.m1.8.8"></exp><apply id="S3.E13.m1.4.4.cmml" xref="S3.E13.m1.4.4"><divide id="S3.E13.m1.4.4.5.cmml" xref="S3.E13.m1.4.4"></divide><apply id="S3.E13.m1.4.4.4.cmml" xref="S3.E13.m1.4.4.4"><minus id="S3.E13.m1.4.4.4.5.cmml" xref="S3.E13.m1.4.4.4.5"></minus><apply id="S3.E13.m1.4.4.4.6.cmml" xref="S3.E13.m1.4.4.4.6"><times id="S3.E13.m1.4.4.4.6.1.cmml" xref="S3.E13.m1.4.4.4.6.1"></times><ci id="S3.E13.m1.4.4.4.6.2.cmml" xref="S3.E13.m1.4.4.4.6.2">ğ‘Ÿ</ci><interval closure="open" id="S3.E13.m1.4.4.4.6.3.1.cmml" xref="S3.E13.m1.4.4.4.6.3.2"><ci id="S3.E13.m1.1.1.1.1.cmml" xref="S3.E13.m1.1.1.1.1">ğ‘¦</ci><ci id="S3.E13.m1.2.2.2.2.cmml" xref="S3.E13.m1.2.2.2.2">ğ‘¥</ci></interval></apply><apply id="S3.E13.m1.4.4.4.4.cmml" xref="S3.E13.m1.4.4.4.4"><times id="S3.E13.m1.4.4.4.4.2.cmml" xref="S3.E13.m1.4.4.4.4.2"></times><ci id="S3.E13.m1.4.4.4.4.3.cmml" xref="S3.E13.m1.4.4.4.4.3">ğ‘Ÿ</ci><interval closure="open" id="S3.E13.m1.4.4.4.4.1.2.cmml" xref="S3.E13.m1.4.4.4.4.1.1"><apply id="S3.E13.m1.4.4.4.4.1.1.1.cmml" xref="S3.E13.m1.4.4.4.4.1.1.1"><csymbol cd="ambiguous" id="S3.E13.m1.4.4.4.4.1.1.1.1.cmml" xref="S3.E13.m1.4.4.4.4.1.1.1">superscript</csymbol><ci id="S3.E13.m1.4.4.4.4.1.1.1.2.cmml" xref="S3.E13.m1.4.4.4.4.1.1.1.2">ğ‘¦</ci><ci id="S3.E13.m1.4.4.4.4.1.1.1.3.cmml" xref="S3.E13.m1.4.4.4.4.1.1.1.3">ğ‘¡</ci></apply><ci id="S3.E13.m1.3.3.3.3.cmml" xref="S3.E13.m1.3.3.3.3">ğ‘¥</ci></interval></apply></apply><ci id="S3.E13.m1.4.4.6.cmml" xref="S3.E13.m1.4.4.6">ğ›½</ci></apply></apply><apply id="S3.E13.m1.6.6.cmml" xref="S3.E13.m1.6.6"><divide id="S3.E13.m1.6.6.3.cmml" xref="S3.E13.m1.6.6"></divide><apply id="S3.E13.m1.5.5.1.cmml" xref="S3.E13.m1.5.5.1"><times id="S3.E13.m1.5.5.1.2.cmml" xref="S3.E13.m1.5.5.1.2"></times><ci id="S3.E13.m1.5.5.1.3.cmml" xref="S3.E13.m1.5.5.1.3">ğ‘</ci><apply id="S3.E13.m1.5.5.1.1.1.1.cmml" xref="S3.E13.m1.5.5.1.1.1"><csymbol cd="latexml" id="S3.E13.m1.5.5.1.1.1.1.1.cmml" xref="S3.E13.m1.5.5.1.1.1.1.1">conditional</csymbol><ci id="S3.E13.m1.5.5.1.1.1.1.2.cmml" xref="S3.E13.m1.5.5.1.1.1.1.2">ğ‘–</ci><ci id="S3.E13.m1.5.5.1.1.1.1.3.cmml" xref="S3.E13.m1.5.5.1.1.1.1.3">ğ‘›</ci></apply></apply><apply id="S3.E13.m1.6.6.2.cmml" xref="S3.E13.m1.6.6.2"><times id="S3.E13.m1.6.6.2.2.cmml" xref="S3.E13.m1.6.6.2.2"></times><ci id="S3.E13.m1.6.6.2.3.cmml" xref="S3.E13.m1.6.6.2.3">ğ‘</ci><apply id="S3.E13.m1.6.6.2.1.1.1.cmml" xref="S3.E13.m1.6.6.2.1.1"><csymbol cd="latexml" id="S3.E13.m1.6.6.2.1.1.1.1.cmml" xref="S3.E13.m1.6.6.2.1.1.1.1">conditional</csymbol><ci id="S3.E13.m1.6.6.2.1.1.1.2.cmml" xref="S3.E13.m1.6.6.2.1.1.1.2">ğ‘–</ci><apply id="S3.E13.m1.6.6.2.1.1.1.3.cmml" xref="S3.E13.m1.6.6.2.1.1.1.3"><csymbol cd="ambiguous" id="S3.E13.m1.6.6.2.1.1.1.3.1.cmml" xref="S3.E13.m1.6.6.2.1.1.1.3">superscript</csymbol><ci id="S3.E13.m1.6.6.2.1.1.1.3.2.cmml" xref="S3.E13.m1.6.6.2.1.1.1.3.2">ğ‘›</ci><ci id="S3.E13.m1.6.6.2.1.1.1.3.3.cmml" xref="S3.E13.m1.6.6.2.1.1.1.3.3">ğ‘¡</ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E13.m1.11c">\alpha_{\beta}(y,y^{t})=\max\left\{1,\exp\left(\frac{r\left(y,x\right)-r\left(%
y^{t},x\right)}{\beta}\right)\frac{q(i|n)}{q(i|n^{t})}\right\}.</annotation><annotation encoding="application/x-llamapun" id="S3.E13.m1.11d">italic_Î± start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) = roman_max { 1 , roman_exp ( divide start_ARG italic_r ( italic_y , italic_x ) - italic_r ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x ) end_ARG start_ARG italic_Î² end_ARG ) divide start_ARG italic_q ( italic_i | italic_n ) end_ARG start_ARG italic_q ( italic_i | italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) end_ARG } .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(13)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S3.SS3.p2.2">The full derivation is in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A1" title="Appendix A Connection to RLHF derivation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">A</span></a>. Using this approach, we can align language model generations without access to the model weights, log probabilities, or RL. We provide a preliminary experimental comparison using the two target distributions (Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E3" title="In 3.1 Metropolis-Hastings â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">3</span></a> and Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E12" title="In 3.3 Connections to Reinforcement Learning with Human Feedback â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">12</span></a>) using <span class="ltx_text ltx_font_smallcaps" id="S3.SS3.p2.2.1">Quest</span> in AppendixÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A4" title="Appendix D Comparing RLHF-QUEST vs QUEST â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">D</span></a>.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experimental Settings</h2>
<section class="ltx_paragraph" id="S4.SS0.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Data and Evaluation</h4>
<div class="ltx_para" id="S4.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S4.SS0.SSS0.Px1.p1.1">We test our approach on the WMT23 test sets <cite class="ltx_cite ltx_citemacro_citep">(Kocmi etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib35" title="">2023</a>)</cite> covering four language pairs, <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px1.p1.1.1">English</span> <math alttext="\leftrightarrow" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px1.p1.1.m1.1"><semantics id="S4.SS0.SSS0.Px1.p1.1.m1.1a"><mo id="S4.SS0.SSS0.Px1.p1.1.m1.1.1" stretchy="false" xref="S4.SS0.SSS0.Px1.p1.1.m1.1.1.cmml">â†”</mo><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px1.p1.1.m1.1b"><ci id="S4.SS0.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p1.1.m1.1.1">â†”</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px1.p1.1.m1.1c">\leftrightarrow</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px1.p1.1.m1.1d">â†”</annotation></semantics></math> {<span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px1.p1.1.2">German, Russian</span>}.</p>
</div>
<div class="ltx_para" id="S4.SS0.SSS0.Px1.p2">
<p class="ltx_p" id="S4.SS0.SSS0.Px1.p2.6">We evaluate the quality and the diversity of the generated texts as follows. Suppose <math alttext="\bar{\mathcal{Y}}" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px1.p2.1.m1.1"><semantics id="S4.SS0.SSS0.Px1.p2.1.m1.1a"><mover accent="true" id="S4.SS0.SSS0.Px1.p2.1.m1.1.1" xref="S4.SS0.SSS0.Px1.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.1.m1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.1.m1.1.1.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.1.m1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.1.m1.1.1.1.cmml">Â¯</mo></mover><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px1.p2.1.m1.1b"><apply id="S4.SS0.SSS0.Px1.p2.1.m1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.1.m1.1.1"><ci id="S4.SS0.SSS0.Px1.p2.1.m1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.1.m1.1.1.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.1.m1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.1.m1.1.1.2">ğ’´</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px1.p2.1.m1.1c">\bar{\mathcal{Y}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px1.p2.1.m1.1d">overÂ¯ start_ARG caligraphic_Y end_ARG</annotation></semantics></math> is the set of hypotheses generated for the source text <math alttext="x" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px1.p2.2.m2.1"><semantics id="S4.SS0.SSS0.Px1.p2.2.m2.1a"><mi id="S4.SS0.SSS0.Px1.p2.2.m2.1.1" xref="S4.SS0.SSS0.Px1.p2.2.m2.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px1.p2.2.m2.1b"><ci id="S4.SS0.SSS0.Px1.p2.2.m2.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.2.m2.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px1.p2.2.m2.1c">x</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px1.p2.2.m2.1d">italic_x</annotation></semantics></math> with reference hypothesis <math alttext="y^{\star}" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px1.p2.3.m3.1"><semantics id="S4.SS0.SSS0.Px1.p2.3.m3.1a"><msup id="S4.SS0.SSS0.Px1.p2.3.m3.1.1" xref="S4.SS0.SSS0.Px1.p2.3.m3.1.1.cmml"><mi id="S4.SS0.SSS0.Px1.p2.3.m3.1.1.2" xref="S4.SS0.SSS0.Px1.p2.3.m3.1.1.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.3.m3.1.1.3" xref="S4.SS0.SSS0.Px1.p2.3.m3.1.1.3.cmml">â‹†</mo></msup><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px1.p2.3.m3.1b"><apply id="S4.SS0.SSS0.Px1.p2.3.m3.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.3.m3.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.3.m3.1.1">superscript</csymbol><ci id="S4.SS0.SSS0.Px1.p2.3.m3.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.3.m3.1.1.2">ğ‘¦</ci><ci id="S4.SS0.SSS0.Px1.p2.3.m3.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.3.m3.1.1.3">â‹†</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px1.p2.3.m3.1c">y^{\star}</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px1.p2.3.m3.1d">italic_y start_POSTSUPERSCRIPT â‹† end_POSTSUPERSCRIPT</annotation></semantics></math> and <math alttext="\mathcal{D}=\{(x,y^{\star},\bar{\mathcal{Y}})\}" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px1.p2.4.m4.3"><semantics id="S4.SS0.SSS0.Px1.p2.4.m4.3a"><mrow id="S4.SS0.SSS0.Px1.p2.4.m4.3.3" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.3" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.3.cmml">ğ’Ÿ</mi><mo id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.2" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.2.cmml">=</mo><mrow id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.2.cmml">{</mo><mrow id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.2.cmml">(</mo><mi id="S4.SS0.SSS0.Px1.p2.4.m4.1.1" xref="S4.SS0.SSS0.Px1.p2.4.m4.1.1.cmml">x</mi><mo id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.2.cmml">,</mo><msup id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.cmml"><mi id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.3.cmml">â‹†</mo></msup><mo id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.4" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.2.cmml">,</mo><mover accent="true" id="S4.SS0.SSS0.Px1.p2.4.m4.2.2" xref="S4.SS0.SSS0.Px1.p2.4.m4.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.4.m4.2.2.2" xref="S4.SS0.SSS0.Px1.p2.4.m4.2.2.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.4.m4.2.2.1" xref="S4.SS0.SSS0.Px1.p2.4.m4.2.2.1.cmml">Â¯</mo></mover><mo id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.5" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.2.cmml">)</mo></mrow><mo id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.3" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px1.p2.4.m4.3b"><apply id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3"><eq id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.2.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.2"></eq><ci id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.3.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.3">ğ’Ÿ</ci><set id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1"><vector id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1"><ci id="S4.SS0.SSS0.Px1.p2.4.m4.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.1.1">ğ‘¥</ci><apply id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1">superscript</csymbol><ci id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.2">ğ‘¦</ci><ci id="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.3.3.1.1.1.1.1.3">â‹†</ci></apply><apply id="S4.SS0.SSS0.Px1.p2.4.m4.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.2.2"><ci id="S4.SS0.SSS0.Px1.p2.4.m4.2.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.2.2.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.4.m4.2.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.4.m4.2.2.2">ğ’´</ci></apply></vector></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px1.p2.4.m4.3c">\mathcal{D}=\{(x,y^{\star},\bar{\mathcal{Y}})\}</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px1.p2.4.m4.3d">caligraphic_D = { ( italic_x , italic_y start_POSTSUPERSCRIPT â‹† end_POSTSUPERSCRIPT , overÂ¯ start_ARG caligraphic_Y end_ARG ) }</annotation></semantics></math> represents the evaluation set.
We compute the mean quality over each set of hypotheses using <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px1.p2.6.1">xComet-XL</span> <cite class="ltx_cite ltx_citemacro_citep">(Guerreiro etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib27" title="">2023a</a>)</cite> as
<math alttext="\frac{1}{|\mathcal{D}|}\sum_{(x,y^{\star},\bar{\mathcal{Y}})\in\mathcal{D}}%
\frac{1}{|\bar{\mathcal{Y}}|}\sum_{y\in\bar{\mathcal{Y}}}\text{{xComet-XL}}(x,%
y,y^{\star})" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px1.p2.5.m5.8"><semantics id="S4.SS0.SSS0.Px1.p2.5.m5.8a"><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.8.8" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.cmml"><mfrac id="S4.SS0.SSS0.Px1.p2.5.m5.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.cmml"><mn id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.3.cmml">1</mn><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.3.1" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.2.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.1.cmml">ğ’Ÿ</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.3.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.2.cmml">â¢</mo><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.cmml"><msub id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2.2.cmml">âˆ‘</mo><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.cmml"><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.2.cmml">(</mo><mi id="S4.SS0.SSS0.Px1.p2.5.m5.2.2.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.2.2.1.1.cmml">x</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.2.cmml">,</mo><msup id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.cmml"><mi id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.3.cmml">â‹†</mo></msup><mo id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.4" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.2.cmml">,</mo><mover accent="true" id="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.1.cmml">Â¯</mo></mover><mo id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.5" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.2.cmml">)</mo></mrow><mo id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.4" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.4.cmml">âˆˆ</mo><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.5" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.5.cmml">ğ’Ÿ</mi></mrow></msub><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.cmml"><mfrac id="S4.SS0.SSS0.Px1.p2.5.m5.5.5" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.cmml"><mn id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.3.cmml">1</mn><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.3.1" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.2.1.cmml">|</mo><mover accent="true" id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.1.cmml">Â¯</mo></mover><mo id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.3.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.2.1.cmml">|</mo></mrow></mfrac><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.2.cmml">â¢</mo><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.cmml"><msub id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.2.cmml">âˆ‘</mo><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.cmml"><mi id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.1.cmml">âˆˆ</mo><mover accent="true" id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.1.cmml">Â¯</mo></mover></mrow></msub><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.cmml"><mtext class="ltx_font_smallcaps" id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.3a.cmml">xComet-XL</mtext><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.2.cmml">â¢</mo><mrow id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.2.cmml">(</mo><mi id="S4.SS0.SSS0.Px1.p2.5.m5.6.6" xref="S4.SS0.SSS0.Px1.p2.5.m5.6.6.cmml">x</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.2.cmml">,</mo><mi id="S4.SS0.SSS0.Px1.p2.5.m5.7.7" xref="S4.SS0.SSS0.Px1.p2.5.m5.7.7.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.4" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.2.cmml">,</mo><msup id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.cmml"><mi id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.3.cmml">â‹†</mo></msup><mo id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.5" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px1.p2.5.m5.8b"><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8"><times id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.2"></times><apply id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1"><divide id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1"></divide><cn id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.3">1</cn><apply id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.3"><abs id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.3.1"></abs><ci id="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.1.1.1.1">ğ’Ÿ</ci></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1"><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2">subscript</csymbol><sum id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.2.2"></sum><apply id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3"><in id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.4.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.4"></in><vector id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1"><ci id="S4.SS0.SSS0.Px1.p2.5.m5.2.2.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.2.2.1.1">ğ‘¥</ci><apply id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1">superscript</csymbol><ci id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.2">ğ‘¦</ci><ci id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.3.1.1.3">â‹†</ci></apply><apply id="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2"><ci id="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.3.3.2.2.2">ğ’´</ci></apply></vector><ci id="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.5.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.4.4.3.5">ğ’Ÿ</ci></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1"><times id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.2"></times><apply id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5"><divide id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5"></divide><cn id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.3.cmml" type="integer" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.3">1</cn><apply id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.3"><abs id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.3.1"></abs><apply id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1"><ci id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.5.5.1.1.2">ğ’´</ci></apply></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1"><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2">subscript</csymbol><sum id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.2"></sum><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3"><in id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.1"></in><ci id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.2">ğ‘¦</ci><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3"><ci id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.2.3.3.2">ğ’´</ci></apply></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1"><times id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.2"></times><ci id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.3a.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.3"><mtext class="ltx_font_smallcaps" id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.3">xComet-XL</mtext></ci><vector id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1"><ci id="S4.SS0.SSS0.Px1.p2.5.m5.6.6.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.6.6">ğ‘¥</ci><ci id="S4.SS0.SSS0.Px1.p2.5.m5.7.7.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.7.7">ğ‘¦</ci><apply id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1">superscript</csymbol><ci id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.5.m5.8.8.1.1.1.1.1.1.1.3">â‹†</ci></apply></vector></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px1.p2.5.m5.8c">\frac{1}{|\mathcal{D}|}\sum_{(x,y^{\star},\bar{\mathcal{Y}})\in\mathcal{D}}%
\frac{1}{|\bar{\mathcal{Y}}|}\sum_{y\in\bar{\mathcal{Y}}}\text{{xComet-XL}}(x,%
y,y^{\star})</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px1.p2.5.m5.8d">divide start_ARG 1 end_ARG start_ARG | caligraphic_D | end_ARG âˆ‘ start_POSTSUBSCRIPT ( italic_x , italic_y start_POSTSUPERSCRIPT â‹† end_POSTSUPERSCRIPT , overÂ¯ start_ARG caligraphic_Y end_ARG ) âˆˆ caligraphic_D end_POSTSUBSCRIPT divide start_ARG 1 end_ARG start_ARG | overÂ¯ start_ARG caligraphic_Y end_ARG | end_ARG âˆ‘ start_POSTSUBSCRIPT italic_y âˆˆ overÂ¯ start_ARG caligraphic_Y end_ARG end_POSTSUBSCRIPT xComet-XL ( italic_x , italic_y , italic_y start_POSTSUPERSCRIPT â‹† end_POSTSUPERSCRIPT )</annotation></semantics></math>.
Similarly, we measure the mean diversity using the average pairwise BLEU <cite class="ltx_cite ltx_citemacro_citep">(Papineni etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib51" title="">2002</a>; Shen etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib64" title="">2019</a>)</cite> as <math alttext="1-\frac{1}{|\mathcal{D}|}\sum_{(x,y^{\star},\bar{\mathcal{Y}})\in D}\frac{1}{|%
\bar{\mathcal{Y}}|(|\bar{\mathcal{Y}}|-1)}\sum_{(y,y^{\prime})\in\bar{\mathcal%
{Y}}^{2}\,\,\text{s.t.}\,\,y\neq y^{\prime}}\text{{BLEU}}(y,y^{\prime})" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px1.p2.6.m6.11"><semantics id="S4.SS0.SSS0.Px1.p2.6.m6.11a"><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.11.11" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.cmml"><mn id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.3.cmml">1</mn><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.2.cmml">âˆ’</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.cmml"><mfrac id="S4.SS0.SSS0.Px1.p2.6.m6.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.cmml"><mn id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.3.cmml">1</mn><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.3.1" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.2.1.cmml">|</mo><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.1.cmml">ğ’Ÿ</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.3.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.2.cmml">â¢</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.cmml"><msub id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2.2.cmml">âˆ‘</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.cmml"><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.2.cmml">(</mo><mi id="S4.SS0.SSS0.Px1.p2.6.m6.2.2.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.2.2.1.1.cmml">x</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.2.cmml">,</mo><msup id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.cmml"><mi id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.3.cmml">â‹†</mo></msup><mo id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.4" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.2.cmml">,</mo><mover accent="true" id="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.1.cmml">Â¯</mo></mover><mo id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.5" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.2.cmml">)</mo></mrow><mo id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.4" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.4.cmml">âˆˆ</mo><mi id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.5" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.5.cmml">D</mi></mrow></msub><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.cmml"><mfrac id="S4.SS0.SSS0.Px1.p2.6.m6.7.7" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.cmml"><mn id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.5" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.5.cmml">1</mn><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.cmml"><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.1.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.2.1" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.1.1.cmml">|</mo><mover accent="true" id="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.1.cmml">Â¯</mo></mover><mo id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.2.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.1.1.cmml">|</mo></mrow><mo id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.4" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.4.cmml">â¢</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.cmml">(</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.cmml"><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.1.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.2.1" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.1.1.cmml">|</mo><mover accent="true" id="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.1.cmml">Â¯</mo></mover><mo id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.2.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.1.1.cmml">|</mo></mrow><mo id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.1.cmml">âˆ’</mo><mn id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.3.cmml">1</mn></mrow><mo id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.3" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.2.cmml">â¢</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.cmml"><msub id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2.2.cmml">âˆ‘</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.cmml"><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.2.cmml">(</mo><mi id="S4.SS0.SSS0.Px1.p2.6.m6.8.8.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.8.8.1.1.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.2.cmml">,</mo><msup id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.cmml"><mi id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.3.cmml">â€²</mo></msup><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.4" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.2.cmml">)</mo></mrow><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.4" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.4.cmml">âˆˆ</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.cmml"><msup id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.cmml"><mover accent="true" id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.2.cmml">ğ’´</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.1.cmml">Â¯</mo></mover><mn id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.3.cmml">2</mn></msup><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.1.cmml">â¢</mo><mtext id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.3a.cmml">s.t.</mtext><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.1a" lspace="0.330em" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.1.cmml">â¢</mo><mi id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.4" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.4.cmml">y</mi></mrow><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.6" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.6.cmml">â‰ </mo><msup id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.cmml"><mi id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.3.cmml">â€²</mo></msup></mrow></msub><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.cmml"><mtext class="ltx_font_smallcaps" id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.3a.cmml">BLEU</mtext><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.2.cmml">â¢</mo><mrow id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.2.cmml"><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.2" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.2.cmml">(</mo><mi id="S4.SS0.SSS0.Px1.p2.6.m6.10.10" xref="S4.SS0.SSS0.Px1.p2.6.m6.10.10.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.2.cmml">,</mo><msup id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.cmml"><mi id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.2" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.2.cmml">y</mi><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.3" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.3.cmml">â€²</mo></msup><mo id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.4" stretchy="false" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px1.p2.6.m6.11b"><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11"><minus id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.2"></minus><cn id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.3.cmml" type="integer" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.3">1</cn><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1"><times id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.2"></times><apply id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1"><divide id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1"></divide><cn id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.3">1</cn><apply id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.3"><abs id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.3.1"></abs><ci id="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.1.1.1.1">ğ’Ÿ</ci></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1"><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2">subscript</csymbol><sum id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.2.2"></sum><apply id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3"><in id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.4.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.4"></in><vector id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1"><ci id="S4.SS0.SSS0.Px1.p2.6.m6.2.2.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.2.2.1.1">ğ‘¥</ci><apply id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1">superscript</csymbol><ci id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.2">ğ‘¦</ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.3.1.1.3">â‹†</ci></apply><apply id="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2"><ci id="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.3.3.2.2.2">ğ’´</ci></apply></vector><ci id="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.5.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.4.4.3.5">ğ·</ci></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1"><times id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.2"></times><apply id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7"><divide id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.4.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7"></divide><cn id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.5.cmml" type="integer" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.5">1</cn><apply id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3"><times id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.4.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.4"></times><apply id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.2"><abs id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.5.2.1"></abs><apply id="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1"><ci id="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.5.5.1.1.2">ğ’´</ci></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1"><minus id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.1"></minus><apply id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.2"><abs id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.2.2.1"></abs><apply id="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2"><ci id="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.6.6.2.2.2">ğ’´</ci></apply></apply><cn id="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px1.p2.6.m6.7.7.3.3.1.1.3">1</cn></apply></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1"><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2">subscript</csymbol><sum id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.2.2"></sum><apply id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2"><and id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2a.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2"></and><apply id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2b.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2"><in id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.4.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.4"></in><interval closure="open" id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1"><ci id="S4.SS0.SSS0.Px1.p2.6.m6.8.8.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.8.8.1.1">ğ‘¦</ci><apply id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1">superscript</csymbol><ci id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.2">ğ‘¦</ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.2.1.1.3">â€²</ci></apply></interval><apply id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5"><times id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.1"></times><apply id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2">superscript</csymbol><apply id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2"><ci id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.1">Â¯</ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.2.2">ğ’´</ci></apply><cn id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.3.cmml" type="integer" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.2.3">2</cn></apply><ci id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.3a.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.3"><mtext id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.3.cmml" mathsize="70%" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.3">s.t.</mtext></ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.4.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.4">ğ‘¦</ci></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2c.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2"><neq id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.6.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.6"></neq><share href="https://arxiv.org/html/2406.00049v1#S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.5.cmml" id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2d.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2"></share><apply id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7">superscript</csymbol><ci id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.2">ğ‘¦</ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.3.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.9.9.2.7.3">â€²</ci></apply></apply></apply></apply><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1"><times id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.2"></times><ci id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.3a.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.3"><mtext class="ltx_font_smallcaps" id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.3">BLEU</mtext></ci><interval closure="open" id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1"><ci id="S4.SS0.SSS0.Px1.p2.6.m6.10.10.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.10.10">ğ‘¦</ci><apply id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.3.cmml" xref="S4.SS0.SSS0.Px1.p2.6.m6.11.11.1.1.1.1.1.1.1.1.3">â€²</ci></apply></interval></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px1.p2.6.m6.11c">1-\frac{1}{|\mathcal{D}|}\sum_{(x,y^{\star},\bar{\mathcal{Y}})\in D}\frac{1}{|%
\bar{\mathcal{Y}}|(|\bar{\mathcal{Y}}|-1)}\sum_{(y,y^{\prime})\in\bar{\mathcal%
{Y}}^{2}\,\,\text{s.t.}\,\,y\neq y^{\prime}}\text{{BLEU}}(y,y^{\prime})</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px1.p2.6.m6.11d">1 - divide start_ARG 1 end_ARG start_ARG | caligraphic_D | end_ARG âˆ‘ start_POSTSUBSCRIPT ( italic_x , italic_y start_POSTSUPERSCRIPT â‹† end_POSTSUPERSCRIPT , overÂ¯ start_ARG caligraphic_Y end_ARG ) âˆˆ italic_D end_POSTSUBSCRIPT divide start_ARG 1 end_ARG start_ARG | overÂ¯ start_ARG caligraphic_Y end_ARG | ( | overÂ¯ start_ARG caligraphic_Y end_ARG | - 1 ) end_ARG âˆ‘ start_POSTSUBSCRIPT ( italic_y , italic_y start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT ) âˆˆ overÂ¯ start_ARG caligraphic_Y end_ARG start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT s.t. italic_y â‰  italic_y start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT end_POSTSUBSCRIPT BLEU ( italic_y , italic_y start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT )</annotation></semantics></math>.<span class="ltx_note ltx_role_footnote" id="footnote2"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note">2</span><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/mjpost/sacrebleu/tree/master" title="">https://github.com/mjpost/sacrebleu/tree/master</a></span></span></span></p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS0.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Models</h4>
<div class="ltx_para" id="S4.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S4.SS0.SSS0.Px2.p1.1">We use <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px2.p1.1.1">Tower-7b</span> <cite class="ltx_cite ltx_citemacro_citep">(Alves etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib1" title="">2024</a>, <span class="ltx_text ltx_font_typewriter" id="S4.SS0.SSS0.Px2.p1.1.2.1">Unbabel/TowerInstruct-7B-v0.2</span>)</cite> and <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px2.p1.1.3">Alma-7b</span> <cite class="ltx_cite ltx_citemacro_citep">(Xu etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib78" title="">2024a</a>, <span class="ltx_text ltx_font_typewriter" id="S4.SS0.SSS0.Px2.p1.1.4.1">haoranxu/ALMA-7B</span>)</cite>, two strong decoder-only MT models based on <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px2.p1.1.5">Llama2-7b</span> <cite class="ltx_cite ltx_citemacro_citep">(Touvron etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib73" title="">2023</a>)</cite> as these models achieve competitive translation quality with GPT-4 and productized models like Google Translate. Unlike <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px2.p1.1.6">Alma-7b</span>, <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px2.p1.1.7">Tower-7b</span> uses bilingual MT data as well as datasets from MT-related tasks during training. Prompts are shown in AppendixÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A2" title="Appendix B Prompts used for MT â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">B</span></a>.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS0.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">Automatic Metrics for <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px3.1.1">Quest</span> </h4>
<div class="ltx_para" id="S4.SS0.SSS0.Px3.p1">
<p class="ltx_p" id="S4.SS0.SSS0.Px3.p1.1">We use <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px3.p1.1.1">CometKiwi-XL</span> <cite class="ltx_cite ltx_citemacro_citep">(Rei etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib60" title="">2023</a>)</cite>, a reference-free QE model built on top of <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px3.p1.1.2">XLM-R XL</span>Â <cite class="ltx_cite ltx_citemacro_citep">(Goyal etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib24" title="">2021</a>)</cite> and trained to predict human-rated direct assessmentsÂ <cite class="ltx_cite ltx_citemacro_citep">(Graham etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib25" title="">2013</a>)</cite>. This metric showed the highest correlations with human judgments on the QE Shared Task
organized by the eighth conference on Machine Translation (WMT 2023) <cite class="ltx_cite ltx_citemacro_cite">Blain etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib6" title="">2023</a>)</cite>. We transform the normalized scores from the QE model into <math alttext="z" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px3.p1.1.m1.1"><semantics id="S4.SS0.SSS0.Px3.p1.1.m1.1a"><mi id="S4.SS0.SSS0.Px3.p1.1.m1.1.1" xref="S4.SS0.SSS0.Px3.p1.1.m1.1.1.cmml">z</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px3.p1.1.m1.1b"><ci id="S4.SS0.SSS0.Px3.p1.1.m1.1.1.cmml" xref="S4.SS0.SSS0.Px3.p1.1.m1.1.1">ğ‘§</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px3.p1.1.m1.1c">z</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px3.p1.1.m1.1d">italic_z</annotation></semantics></math>-scores using a logit transformation with clamping applied to mitigate overflow.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS0.SSS0.Px4">
<h4 class="ltx_title ltx_title_paragraph">Decoding Configurations</h4>
<div class="ltx_para" id="S4.SS0.SSS0.Px4.p1">
<p class="ltx_p" id="S4.SS0.SSS0.Px4.p1.7">For ancestral sampling, we consider temperature values <math alttext="\tau" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px4.p1.1.m1.1"><semantics id="S4.SS0.SSS0.Px4.p1.1.m1.1a"><mi id="S4.SS0.SSS0.Px4.p1.1.m1.1.1" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.cmml">Ï„</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.1.m1.1b"><ci id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1">ğœ</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.1.m1.1c">\tau</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px4.p1.1.m1.1d">italic_Ï„</annotation></semantics></math> between <math alttext="0.2" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px4.p1.2.m2.1"><semantics id="S4.SS0.SSS0.Px4.p1.2.m2.1a"><mn id="S4.SS0.SSS0.Px4.p1.2.m2.1.1" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.cmml">0.2</mn><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.2.m2.1b"><cn id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1">0.2</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.2.m2.1c">0.2</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px4.p1.2.m2.1d">0.2</annotation></semantics></math> and <math alttext="1.0" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px4.p1.3.m3.1"><semantics id="S4.SS0.SSS0.Px4.p1.3.m3.1a"><mn id="S4.SS0.SSS0.Px4.p1.3.m3.1.1" xref="S4.SS0.SSS0.Px4.p1.3.m3.1.1.cmml">1.0</mn><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.3.m3.1b"><cn id="S4.SS0.SSS0.Px4.p1.3.m3.1.1.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.3.m3.1.1">1.0</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.3.m3.1c">1.0</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px4.p1.3.m3.1d">1.0</annotation></semantics></math>, with an equally spaced interval of <math alttext="0.1" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px4.p1.4.m4.1"><semantics id="S4.SS0.SSS0.Px4.p1.4.m4.1a"><mn id="S4.SS0.SSS0.Px4.p1.4.m4.1.1" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1.cmml">0.1</mn><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.4.m4.1b"><cn id="S4.SS0.SSS0.Px4.p1.4.m4.1.1.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1">0.1</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.4.m4.1c">0.1</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px4.p1.4.m4.1d">0.1</annotation></semantics></math>. For generations with <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px4.p1.7.1">Quest</span>, we sample from the proposal distribution using <math alttext="\tau=0.8" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px4.p1.5.m5.1"><semantics id="S4.SS0.SSS0.Px4.p1.5.m5.1a"><mrow id="S4.SS0.SSS0.Px4.p1.5.m5.1.1" xref="S4.SS0.SSS0.Px4.p1.5.m5.1.1.cmml"><mi id="S4.SS0.SSS0.Px4.p1.5.m5.1.1.2" xref="S4.SS0.SSS0.Px4.p1.5.m5.1.1.2.cmml">Ï„</mi><mo id="S4.SS0.SSS0.Px4.p1.5.m5.1.1.1" xref="S4.SS0.SSS0.Px4.p1.5.m5.1.1.1.cmml">=</mo><mn id="S4.SS0.SSS0.Px4.p1.5.m5.1.1.3" xref="S4.SS0.SSS0.Px4.p1.5.m5.1.1.3.cmml">0.8</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.5.m5.1b"><apply id="S4.SS0.SSS0.Px4.p1.5.m5.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.5.m5.1.1"><eq id="S4.SS0.SSS0.Px4.p1.5.m5.1.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.5.m5.1.1.1"></eq><ci id="S4.SS0.SSS0.Px4.p1.5.m5.1.1.2.cmml" xref="S4.SS0.SSS0.Px4.p1.5.m5.1.1.2">ğœ</ci><cn id="S4.SS0.SSS0.Px4.p1.5.m5.1.1.3.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.5.m5.1.1.3">0.8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.5.m5.1c">\tau=0.8</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px4.p1.5.m5.1d">italic_Ï„ = 0.8</annotation></semantics></math> and vary the parameter <math alttext="\beta" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px4.p1.6.m6.1"><semantics id="S4.SS0.SSS0.Px4.p1.6.m6.1a"><mi id="S4.SS0.SSS0.Px4.p1.6.m6.1.1" xref="S4.SS0.SSS0.Px4.p1.6.m6.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.6.m6.1b"><ci id="S4.SS0.SSS0.Px4.p1.6.m6.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.6.m6.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.6.m6.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px4.p1.6.m6.1d">italic_Î²</annotation></semantics></math> of the target Gibbs distribution from the following range of values <math alttext="\{0.01,0.02,0.05,0.1,0.2,0.5,1.0\}" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px4.p1.7.m7.7"><semantics id="S4.SS0.SSS0.Px4.p1.7.m7.7a"><mrow id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml"><mo id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2.1" stretchy="false" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml">{</mo><mn id="S4.SS0.SSS0.Px4.p1.7.m7.1.1" xref="S4.SS0.SSS0.Px4.p1.7.m7.1.1.cmml">0.01</mn><mo id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2.2" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml">,</mo><mn id="S4.SS0.SSS0.Px4.p1.7.m7.2.2" xref="S4.SS0.SSS0.Px4.p1.7.m7.2.2.cmml">0.02</mn><mo id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2.3" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml">,</mo><mn id="S4.SS0.SSS0.Px4.p1.7.m7.3.3" xref="S4.SS0.SSS0.Px4.p1.7.m7.3.3.cmml">0.05</mn><mo id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2.4" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml">,</mo><mn id="S4.SS0.SSS0.Px4.p1.7.m7.4.4" xref="S4.SS0.SSS0.Px4.p1.7.m7.4.4.cmml">0.1</mn><mo id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2.5" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml">,</mo><mn id="S4.SS0.SSS0.Px4.p1.7.m7.5.5" xref="S4.SS0.SSS0.Px4.p1.7.m7.5.5.cmml">0.2</mn><mo id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2.6" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml">,</mo><mn id="S4.SS0.SSS0.Px4.p1.7.m7.6.6" xref="S4.SS0.SSS0.Px4.p1.7.m7.6.6.cmml">0.5</mn><mo id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2.7" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml">,</mo><mn id="S4.SS0.SSS0.Px4.p1.7.m7.7.7" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.7.cmml">1.0</mn><mo id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2.8" stretchy="false" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.7.m7.7b"><set id="S4.SS0.SSS0.Px4.p1.7.m7.7.8.1.cmml" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.8.2"><cn id="S4.SS0.SSS0.Px4.p1.7.m7.1.1.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.7.m7.1.1">0.01</cn><cn id="S4.SS0.SSS0.Px4.p1.7.m7.2.2.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.7.m7.2.2">0.02</cn><cn id="S4.SS0.SSS0.Px4.p1.7.m7.3.3.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.7.m7.3.3">0.05</cn><cn id="S4.SS0.SSS0.Px4.p1.7.m7.4.4.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.7.m7.4.4">0.1</cn><cn id="S4.SS0.SSS0.Px4.p1.7.m7.5.5.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.7.m7.5.5">0.2</cn><cn id="S4.SS0.SSS0.Px4.p1.7.m7.6.6.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.7.m7.6.6">0.5</cn><cn id="S4.SS0.SSS0.Px4.p1.7.m7.7.7.cmml" type="float" xref="S4.SS0.SSS0.Px4.p1.7.m7.7.7">1.0</cn></set></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.7.m7.7c">\{0.01,0.02,0.05,0.1,0.2,0.5,1.0\}</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px4.p1.7.m7.7d">{ 0.01 , 0.02 , 0.05 , 0.1 , 0.2 , 0.5 , 1.0 }</annotation></semantics></math>. The number of ancestral samples and decoding steps are both set to 128.
We use VLLM <cite class="ltx_cite ltx_citemacro_citep">(Kwon etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib42" title="">2023</a>)</cite>, a high-throughput and memory-efficient inference engine for generating outputs.</p>
</div>
</section>
<section class="ltx_paragraph" id="S4.SS0.SSS0.Px5">
<h4 class="ltx_title ltx_title_paragraph">Compute Comparison: Ancestral Vs <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px5.1.1">Quest</span> </h4>
<div class="ltx_para" id="S4.SS0.SSS0.Px5.p1">
<p class="ltx_p" id="S4.SS0.SSS0.Px5.p1.10">We use the number of output tokens as a metric to compare the different approaches.
For the sake of simplicity, let us assume that the output sentence has a fixed size of <math alttext="N" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.1.m1.1"><semantics id="S4.SS0.SSS0.Px5.p1.1.m1.1a"><mi id="S4.SS0.SSS0.Px5.p1.1.m1.1.1" xref="S4.SS0.SSS0.Px5.p1.1.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.1.m1.1b"><ci id="S4.SS0.SSS0.Px5.p1.1.m1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.1.m1.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.1.m1.1c">N</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.1.m1.1d">italic_N</annotation></semantics></math>. On average, <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px5.p1.10.1">Quest</span> in <math alttext="T" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.2.m2.1"><semantics id="S4.SS0.SSS0.Px5.p1.2.m2.1a"><mi id="S4.SS0.SSS0.Px5.p1.2.m2.1.1" xref="S4.SS0.SSS0.Px5.p1.2.m2.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.2.m2.1b"><ci id="S4.SS0.SSS0.Px5.p1.2.m2.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.2.m2.1.1">ğ‘‡</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.2.m2.1c">T</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.2.m2.1d">italic_T</annotation></semantics></math> steps generates <math alttext="\big{(}\frac{T-1}{2}+1\big{)}N=\frac{(T+1)N}{2}" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.3.m3.2"><semantics id="S4.SS0.SSS0.Px5.p1.3.m3.2a"><mrow id="S4.SS0.SSS0.Px5.p1.3.m3.2.2" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.cmml"><mrow id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.cmml"><mrow id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.cmml"><mo id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.2" maxsize="120%" minsize="120%" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.cmml">(</mo><mrow id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.cmml"><mfrac id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.cmml"><mrow id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.cmml"><mi id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.2" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.2.cmml">T</mi><mo id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.1.cmml">âˆ’</mo><mn id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.3" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.3.cmml">1</mn></mrow><mn id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.3" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.3.cmml">2</mn></mfrac><mo id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.1.cmml">+</mo><mn id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.3" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.3.cmml">1</mn></mrow><mo id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.3" maxsize="120%" minsize="120%" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.cmml">)</mo></mrow><mo id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.2" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.2.cmml">â¢</mo><mi id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.3" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.3.cmml">N</mi></mrow><mo id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.2" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.2.cmml">=</mo><mfrac id="S4.SS0.SSS0.Px5.p1.3.m3.1.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.cmml"><mrow id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.cmml"><mrow id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.cmml"><mo id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.2" stretchy="false" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.cmml">(</mo><mrow id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.cmml"><mi id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.2" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.2.cmml">T</mi><mo id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.1" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.1.cmml">+</mo><mn id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.3" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.3" stretchy="false" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.cmml">)</mo></mrow><mo id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.2" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.2.cmml">â¢</mo><mi id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.3" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.3.cmml">N</mi></mrow><mn id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.3" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.3.cmml">2</mn></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.3.m3.2b"><apply id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2"><eq id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.2"></eq><apply id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1"><times id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.2"></times><apply id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1"><plus id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.1"></plus><apply id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2"><divide id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2"></divide><apply id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2"><minus id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.1"></minus><ci id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.2">ğ‘‡</ci><cn id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.2.3">1</cn></apply><cn id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.2.3">2</cn></apply><cn id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.1.1.1.3">1</cn></apply><ci id="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.3.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.2.2.1.3">ğ‘</ci></apply><apply id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1"><divide id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1"></divide><apply id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1"><times id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.2"></times><apply id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1"><plus id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.1"></plus><ci id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.2">ğ‘‡</ci><cn id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.1.1.1.3">1</cn></apply><ci id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.3.cmml" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.1.3">ğ‘</ci></apply><cn id="S4.SS0.SSS0.Px5.p1.3.m3.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.3.m3.1.1.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.3.m3.2c">\big{(}\frac{T-1}{2}+1\big{)}N=\frac{(T+1)N}{2}</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.3.m3.2d">( divide start_ARG italic_T - 1 end_ARG start_ARG 2 end_ARG + 1 ) italic_N = divide start_ARG ( italic_T + 1 ) italic_N end_ARG start_ARG 2 end_ARG</annotation></semantics></math> tokens, <math alttext="N" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.4.m4.1"><semantics id="S4.SS0.SSS0.Px5.p1.4.m4.1a"><mi id="S4.SS0.SSS0.Px5.p1.4.m4.1.1" xref="S4.SS0.SSS0.Px5.p1.4.m4.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.4.m4.1b"><ci id="S4.SS0.SSS0.Px5.p1.4.m4.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.4.m4.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.4.m4.1c">N</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.4.m4.1d">italic_N</annotation></semantics></math> tokens for the initial hypothesis, and then on average <math alttext="\frac{N}{2}" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.5.m5.1"><semantics id="S4.SS0.SSS0.Px5.p1.5.m5.1a"><mfrac id="S4.SS0.SSS0.Px5.p1.5.m5.1.1" xref="S4.SS0.SSS0.Px5.p1.5.m5.1.1.cmml"><mi id="S4.SS0.SSS0.Px5.p1.5.m5.1.1.2" xref="S4.SS0.SSS0.Px5.p1.5.m5.1.1.2.cmml">N</mi><mn id="S4.SS0.SSS0.Px5.p1.5.m5.1.1.3" xref="S4.SS0.SSS0.Px5.p1.5.m5.1.1.3.cmml">2</mn></mfrac><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.5.m5.1b"><apply id="S4.SS0.SSS0.Px5.p1.5.m5.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.5.m5.1.1"><divide id="S4.SS0.SSS0.Px5.p1.5.m5.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.5.m5.1.1"></divide><ci id="S4.SS0.SSS0.Px5.p1.5.m5.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.5.m5.1.1.2">ğ‘</ci><cn id="S4.SS0.SSS0.Px5.p1.5.m5.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.5.m5.1.1.3">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.5.m5.1c">\frac{N}{2}</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.5.m5.1d">divide start_ARG italic_N end_ARG start_ARG 2 end_ARG</annotation></semantics></math> tokens for the remaining <math alttext="T-1" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.6.m6.1"><semantics id="S4.SS0.SSS0.Px5.p1.6.m6.1a"><mrow id="S4.SS0.SSS0.Px5.p1.6.m6.1.1" xref="S4.SS0.SSS0.Px5.p1.6.m6.1.1.cmml"><mi id="S4.SS0.SSS0.Px5.p1.6.m6.1.1.2" xref="S4.SS0.SSS0.Px5.p1.6.m6.1.1.2.cmml">T</mi><mo id="S4.SS0.SSS0.Px5.p1.6.m6.1.1.1" xref="S4.SS0.SSS0.Px5.p1.6.m6.1.1.1.cmml">âˆ’</mo><mn id="S4.SS0.SSS0.Px5.p1.6.m6.1.1.3" xref="S4.SS0.SSS0.Px5.p1.6.m6.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.6.m6.1b"><apply id="S4.SS0.SSS0.Px5.p1.6.m6.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.6.m6.1.1"><minus id="S4.SS0.SSS0.Px5.p1.6.m6.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.6.m6.1.1.1"></minus><ci id="S4.SS0.SSS0.Px5.p1.6.m6.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.6.m6.1.1.2">ğ‘‡</ci><cn id="S4.SS0.SSS0.Px5.p1.6.m6.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.6.m6.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.6.m6.1c">T-1</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.6.m6.1d">italic_T - 1</annotation></semantics></math> steps in the chain.
If we contrast against sampling <math alttext="T" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.7.m7.1"><semantics id="S4.SS0.SSS0.Px5.p1.7.m7.1a"><mi id="S4.SS0.SSS0.Px5.p1.7.m7.1.1" xref="S4.SS0.SSS0.Px5.p1.7.m7.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.7.m7.1b"><ci id="S4.SS0.SSS0.Px5.p1.7.m7.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.7.m7.1.1">ğ‘‡</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.7.m7.1c">T</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.7.m7.1d">italic_T</annotation></semantics></math> sentences using ancestral sampling, we decode <math alttext="T\times N" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.8.m8.1"><semantics id="S4.SS0.SSS0.Px5.p1.8.m8.1a"><mrow id="S4.SS0.SSS0.Px5.p1.8.m8.1.1" xref="S4.SS0.SSS0.Px5.p1.8.m8.1.1.cmml"><mi id="S4.SS0.SSS0.Px5.p1.8.m8.1.1.2" xref="S4.SS0.SSS0.Px5.p1.8.m8.1.1.2.cmml">T</mi><mo id="S4.SS0.SSS0.Px5.p1.8.m8.1.1.1" lspace="0.222em" rspace="0.222em" xref="S4.SS0.SSS0.Px5.p1.8.m8.1.1.1.cmml">Ã—</mo><mi id="S4.SS0.SSS0.Px5.p1.8.m8.1.1.3" xref="S4.SS0.SSS0.Px5.p1.8.m8.1.1.3.cmml">N</mi></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.8.m8.1b"><apply id="S4.SS0.SSS0.Px5.p1.8.m8.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.8.m8.1.1"><times id="S4.SS0.SSS0.Px5.p1.8.m8.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.8.m8.1.1.1"></times><ci id="S4.SS0.SSS0.Px5.p1.8.m8.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.8.m8.1.1.2">ğ‘‡</ci><ci id="S4.SS0.SSS0.Px5.p1.8.m8.1.1.3.cmml" xref="S4.SS0.SSS0.Px5.p1.8.m8.1.1.3">ğ‘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.8.m8.1c">T\times N</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.8.m8.1d">italic_T Ã— italic_N</annotation></semantics></math> tokens. This suggests that for an equal number of samples generated using ancestral sampling and <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px5.p1.10.2">Quest</span>, the latter results in about <math alttext="\frac{2T}{(T+1)}\approx 2" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.9.m9.1"><semantics id="S4.SS0.SSS0.Px5.p1.9.m9.1a"><mrow id="S4.SS0.SSS0.Px5.p1.9.m9.1.2" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.2.cmml"><mfrac id="S4.SS0.SSS0.Px5.p1.9.m9.1.1" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.cmml"><mrow id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.cmml"><mn id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.2" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.2.cmml">2</mn><mo id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.1" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.1.cmml">â¢</mo><mi id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.3" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.3.cmml">T</mi></mrow><mrow id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.cmml"><mo id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.2" stretchy="false" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.cmml">(</mo><mrow id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.cmml"><mi id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.2" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.2.cmml">T</mi><mo id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.1" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.1.cmml">+</mo><mn id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.3" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.3.cmml">1</mn></mrow><mo id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.3" stretchy="false" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.cmml">)</mo></mrow></mfrac><mo id="S4.SS0.SSS0.Px5.p1.9.m9.1.2.1" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.2.1.cmml">â‰ˆ</mo><mn id="S4.SS0.SSS0.Px5.p1.9.m9.1.2.2" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.2.2.cmml">2</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.9.m9.1b"><apply id="S4.SS0.SSS0.Px5.p1.9.m9.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.2"><approx id="S4.SS0.SSS0.Px5.p1.9.m9.1.2.1.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.2.1"></approx><apply id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1"><divide id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1"></divide><apply id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3"><times id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.1.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.1"></times><cn id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.2.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.2">2</cn><ci id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.3.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.3.3">ğ‘‡</ci></apply><apply id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1"><plus id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.1"></plus><ci id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.2">ğ‘‡</ci><cn id="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.1.1.1.1.3">1</cn></apply></apply><cn id="S4.SS0.SSS0.Px5.p1.9.m9.1.2.2.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.9.m9.1.2.2">2</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.9.m9.1c">\frac{2T}{(T+1)}\approx 2</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.9.m9.1d">divide start_ARG 2 italic_T end_ARG start_ARG ( italic_T + 1 ) end_ARG â‰ˆ 2</annotation></semantics></math> times as many tokens, on average.
Note, however, that the computational cost of <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px5.p1.10.3">Quest</span> is higher than ancestral sampling, as the hypotheses are generated sequentially and evaluated at every step.
We run our experiments on NVIDIA RTX A6000 GPUs. Each ancestral sampling and <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px5.p1.10.4">Quest</span> for run with <math alttext="T=128" class="ltx_Math" display="inline" id="S4.SS0.SSS0.Px5.p1.10.m10.1"><semantics id="S4.SS0.SSS0.Px5.p1.10.m10.1a"><mrow id="S4.SS0.SSS0.Px5.p1.10.m10.1.1" xref="S4.SS0.SSS0.Px5.p1.10.m10.1.1.cmml"><mi id="S4.SS0.SSS0.Px5.p1.10.m10.1.1.2" xref="S4.SS0.SSS0.Px5.p1.10.m10.1.1.2.cmml">T</mi><mo id="S4.SS0.SSS0.Px5.p1.10.m10.1.1.1" xref="S4.SS0.SSS0.Px5.p1.10.m10.1.1.1.cmml">=</mo><mn id="S4.SS0.SSS0.Px5.p1.10.m10.1.1.3" xref="S4.SS0.SSS0.Px5.p1.10.m10.1.1.3.cmml">128</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px5.p1.10.m10.1b"><apply id="S4.SS0.SSS0.Px5.p1.10.m10.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.10.m10.1.1"><eq id="S4.SS0.SSS0.Px5.p1.10.m10.1.1.1.cmml" xref="S4.SS0.SSS0.Px5.p1.10.m10.1.1.1"></eq><ci id="S4.SS0.SSS0.Px5.p1.10.m10.1.1.2.cmml" xref="S4.SS0.SSS0.Px5.p1.10.m10.1.1.2">ğ‘‡</ci><cn id="S4.SS0.SSS0.Px5.p1.10.m10.1.1.3.cmml" type="integer" xref="S4.SS0.SSS0.Px5.p1.10.m10.1.1.3">128</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px5.p1.10.m10.1c">T=128</annotation><annotation encoding="application/x-llamapun" id="S4.SS0.SSS0.Px5.p1.10.m10.1d">italic_T = 128</annotation></semantics></math> takes, on average, 1 hour and 6 hours, respectively, for 2000 unique source texts on a single GPU. The compute bottleneck for <span class="ltx_text ltx_font_smallcaps" id="S4.SS0.SSS0.Px5.p1.10.5">Quest</span> also arises from using a large QE metric, potentially distilling this metric into smaller models could help reduce the compute time. We leave this to future work.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Results</h2>
<section class="ltx_subsection" id="S5.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Main Findings</h3>
<div class="ltx_para" id="S5.SS1.p1">
<p class="ltx_p" id="S5.SS1.p1.1">The main results of our experiments are presented in FigureÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.F1" title="Figure 1 â€£ 5.1 Main Findings â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<figure class="ltx_figure" id="S5.F1">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" id="S5.F1.4" style="width:433.6pt;">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S5.F1.1.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="S5.F1.1.1.g1" src="extracted/5627197/figures/main/tower_wmt23_enru_xcomet_mean_lex_baselines.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F1.2.2"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="515" id="S5.F1.2.2.g1" src="extracted/5627197/figures/main/tower_wmt23_ruen_xcomet_mean_lex_baselines.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F1.3.3"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="521" id="S5.F1.3.3.g1" src="extracted/5627197/figures/main/tower_wmt23_ende_xcomet_mean_lex_baselines.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F1.4.4"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="515" id="S5.F1.4.4.g1" src="extracted/5627197/figures/main/tower_wmt23_deen_xcomet_mean_lex_baselines.png" width="598"/>
</figure>
</div>
</div>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" id="S5.F1.8" style="width:433.6pt;">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="S5.F1.5.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="S5.F1.5.1.g1" src="extracted/5627197/figures/main/alma_wmt23_enru_xcomet_mean_lex_baselines.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F1.6.2"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="S5.F1.6.2.g1" src="extracted/5627197/figures/main/alma_wmt23_ruen_xcomet_mean_lex_baselines.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F1.7.3"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="S5.F1.7.3.g1" src="extracted/5627197/figures/main/alma_wmt23_ende_xcomet_mean_lex_baselines.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F1.8.4"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="S5.F1.8.4.g1" src="extracted/5627197/figures/main/alma_wmt23_deen_xcomet_mean_lex_baselines.png" width="598"/>
</figure>
</div>
</div>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F1.11.1.1" style="font-size:90%;">Figure 1</span>: </span><span class="ltx_text" id="S5.F1.12.2" style="font-size:90%;">Average quality vs. diversity on WMT23 datasets. Different points represent different hyperparameter values. <span class="ltx_text ltx_font_smallcaps" id="S5.F1.12.2.1">Quest</span> outperforms ancestral sampling in six out of eight settings. </span></figcaption>
</figure>
<div class="ltx_para" id="S5.SS1.p2">
<p class="ltx_p" id="S5.SS1.p2.2"><span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.1">Quest</span> results in better translation quality-diversity trade-offs. Across language directions and models, the samples generated by <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.2">Quest</span> tend to have better or similar quality than ancestral sampling as measured by <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.3">xComet-XL</span>.
As <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.4">Quest</span> does not directly use the reference metric, <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.5">xComet-XL</span>, we reduce the chance of overfitting to the metric and thus the gains represent the ability of <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.6">Quest</span> to improve translation quality more realistically.
The benefits of the proposed approach are more noticeable when translating from English (<span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.7">en</span> <math alttext="\rightarrow" class="ltx_Math" display="inline" id="S5.SS1.p2.1.m1.1"><semantics id="S5.SS1.p2.1.m1.1a"><mo id="S5.SS1.p2.1.m1.1.1" stretchy="false" xref="S5.SS1.p2.1.m1.1.1.cmml">â†’</mo><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.1.m1.1b"><ci id="S5.SS1.p2.1.m1.1.1.cmml" xref="S5.SS1.p2.1.m1.1.1">â†’</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.1.m1.1c">\rightarrow</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p2.1.m1.1d">â†’</annotation></semantics></math> {<span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.8">de, ru</span>}). Specifically, for <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.9">En</span> <math alttext="\leftrightarrow" class="ltx_Math" display="inline" id="S5.SS1.p2.2.m2.1"><semantics id="S5.SS1.p2.2.m2.1a"><mo id="S5.SS1.p2.2.m2.1.1" stretchy="false" xref="S5.SS1.p2.2.m2.1.1.cmml">â†”</mo><annotation-xml encoding="MathML-Content" id="S5.SS1.p2.2.m2.1b"><ci id="S5.SS1.p2.2.m2.1.1.cmml" xref="S5.SS1.p2.2.m2.1.1">â†”</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS1.p2.2.m2.1c">\leftrightarrow</annotation><annotation encoding="application/x-llamapun" id="S5.SS1.p2.2.m2.1d">â†”</annotation></semantics></math> <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.10">Ru</span>, our model improves <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.11">xComet-XL</span> by up to 2 points for both language models, showing the efficacy of <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p2.2.12">Quest</span> over ancestral sampling.</p>
</div>
<div class="ltx_para" id="S5.SS1.p3">
<p class="ltx_p" id="S5.SS1.p3.1">Although ancestral exhibits better quality than <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.1.1">Quest</span> for <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.1.2">De-En</span>, further analysis suggests that this discrepancy may stem from the constraints of the QE metric used to model the translation preferences. Notably, <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.1.3">Quest</span> demonstrates significantly higher <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.1.4">CometKiwi-XL</span> scores across the board (see Appendix FigureÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.F4" title="Figure 4 â€£ C.2 QE Results â€£ Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">4</span></a>), suggesting that better and more robust QE models can result in improved translation quality.<span class="ltx_note ltx_role_footnote" id="footnote3"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note">3</span><cite class="ltx_cite ltx_citemacro_cite">Kocmi etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib36" title="">2024</a>)</cite> report that a difference of <math alttext="2.7" class="ltx_Math" display="inline" id="footnote3.m1.1"><semantics id="footnote3.m1.1b"><mn id="footnote3.m1.1.1" xref="footnote3.m1.1.1.cmml">2.7</mn><annotation-xml encoding="MathML-Content" id="footnote3.m1.1c"><cn id="footnote3.m1.1.1.cmml" type="float" xref="footnote3.m1.1.1">2.7</cn></annotation-xml><annotation encoding="application/x-tex" id="footnote3.m1.1d">2.7</annotation><annotation encoding="application/x-llamapun" id="footnote3.m1.1e">2.7</annotation></semantics></math> <span class="ltx_text ltx_font_smallcaps" id="footnote3.1">CometKiwi-XL</span> on average is statistically significant with a 98.9% accuracy. <span class="ltx_text ltx_font_smallcaps" id="footnote3.2">Quest</span> improvements are always greater than this value across the board.</span></span></span> Furthermore, WMT23 <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.1.5">De-En</span> includes short passages that might require additional steps to reach the high-density regions. Based on a length analysis (See AppendixÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.SS3" title="C.3 MCMC results in better outputs for shorter segments. â€£ Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">C.3</span></a>), we observe that the quality of <span class="ltx_text ltx_font_smallcaps" id="S5.SS1.p3.1.6">Quest</span> lags behind ancestral sampling, specifically for longer sentences. We leave the exploration of finding optimal steps for convergence and adapting the proposal distribution for document-level MT to future work.</p>
</div>
</section>
<section class="ltx_subsection" id="S5.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>Ablation Analysis</h3>
<div class="ltx_para" id="S5.SS2.p1">
<p class="ltx_p" id="S5.SS2.p1.1">We present further analysis on some properties of our proposed approach using WMT23 <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.p1.1.1">En<math alttext="\rightarrow" class="ltx_Math" display="inline" id="S5.SS2.p1.1.1.m1.1"><semantics id="S5.SS2.p1.1.1.m1.1a"><mo id="S5.SS2.p1.1.1.m1.1.1" stretchy="false" xref="S5.SS2.p1.1.1.m1.1.1.cmml">â†’</mo><annotation-xml encoding="MathML-Content" id="S5.SS2.p1.1.1.m1.1b"><ci id="S5.SS2.p1.1.1.m1.1.1.cmml" xref="S5.SS2.p1.1.1.m1.1.1">â†’</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p1.1.1.m1.1c">\rightarrow</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.p1.1.1.m1.1d">â†’</annotation></semantics></math>Ru</span> datasets with translations generated using <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.p1.1.2">Alma-7b</span>.</p>
</div>
<figure class="ltx_figure" id="S5.SS2.2">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_middle" id="S5.SS2.1.fig1" style="width:195.1pt;">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel" id="S5.F2.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="442" id="S5.F2.sf1.g1" src="extracted/5627197/figures/ablation/overlap.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F2.sf1.3.1.1" style="font-size:90%;">(a)</span> </span><span class="ltx_text" id="S5.F2.sf1.4.2" style="font-size:90%;">Sample Overlap between ancestral and <span class="ltx_text ltx_font_smallcaps" id="S5.F2.sf1.4.2.1">Quest</span>. </span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F2.sf2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="331" id="S5.F2.sf2.g1" src="extracted/5627197/figures/ablation/reward_path.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F2.sf2.4.2.1" style="font-size:90%;">(b)</span> </span><span class="ltx_text" id="S5.F2.sf2.2.1" style="font-size:90%;">Average quality over MCMC steps and number of ancestral samples <math alttext="t" class="ltx_Math" display="inline" id="S5.F2.sf2.2.1.m1.1"><semantics id="S5.F2.sf2.2.1.m1.1b"><mi id="S5.F2.sf2.2.1.m1.1.1" xref="S5.F2.sf2.2.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S5.F2.sf2.2.1.m1.1c"><ci id="S5.F2.sf2.2.1.m1.1.1.cmml" xref="S5.F2.sf2.2.1.m1.1.1">ğ‘¡</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.F2.sf2.2.1.m1.1d">t</annotation><annotation encoding="application/x-llamapun" id="S5.F2.sf2.2.1.m1.1e">italic_t</annotation></semantics></math>.</span></figcaption>
</figure>
</div>
</div>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" id="S5.SS2.2.fig2" style="width:195.1pt;">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel" id="S5.F2.sf3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="298" id="S5.F2.sf3.g1" src="extracted/5627197/figures/ablation/distribution_counts.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F2.sf3.4.2.1" style="font-size:90%;">(c)</span> </span><span class="ltx_text" id="S5.F2.sf3.2.1" style="font-size:90%;">Distribution of # of accepted samples: high <math alttext="\beta" class="ltx_Math" display="inline" id="S5.F2.sf3.2.1.m1.1"><semantics id="S5.F2.sf3.2.1.m1.1b"><mi id="S5.F2.sf3.2.1.m1.1.1" xref="S5.F2.sf3.2.1.m1.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="S5.F2.sf3.2.1.m1.1c"><ci id="S5.F2.sf3.2.1.m1.1.1.cmml" xref="S5.F2.sf3.2.1.m1.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.F2.sf3.2.1.m1.1d">\beta</annotation><annotation encoding="application/x-llamapun" id="S5.F2.sf3.2.1.m1.1e">italic_Î²</annotation></semantics></math> results in higher acceptance rates.</span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="S5.F2.sf4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="430" id="S5.F2.sf4.g1" src="extracted/5627197/figures/ablation/SAVE_P25000.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="S5.F2.sf4.2.1.1" style="font-size:90%;">(d)</span> </span><span class="ltx_text" id="S5.F2.sf4.3.2" style="font-size:90%;">Reward differences between an initial hypothesis and proposal hypotheses given the initial hypothesis.
</span></figcaption>
</figure>
</div>
</div>
</figure>
</div>
</div>
</figure>
<section class="ltx_paragraph" id="S5.SS2.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">
<span class="ltx_text ltx_font_smallcaps" id="S5.SS2.SSS0.Px1.1.1">Quest</span> generates less-likely high-quality samples.</h4>
<div class="ltx_para" id="S5.SS2.SSS0.Px1.p1">
<p class="ltx_p" id="S5.SS2.SSS0.Px1.p1.2">We compute the set overlap for <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.SSS0.Px1.p1.2.1">Quest</span> and ancestral samples (<math alttext="T=128" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px1.p1.1.m1.1"><semantics id="S5.SS2.SSS0.Px1.p1.1.m1.1a"><mrow id="S5.SS2.SSS0.Px1.p1.1.m1.1.1" xref="S5.SS2.SSS0.Px1.p1.1.m1.1.1.cmml"><mi id="S5.SS2.SSS0.Px1.p1.1.m1.1.1.2" xref="S5.SS2.SSS0.Px1.p1.1.m1.1.1.2.cmml">T</mi><mo id="S5.SS2.SSS0.Px1.p1.1.m1.1.1.1" xref="S5.SS2.SSS0.Px1.p1.1.m1.1.1.1.cmml">=</mo><mn id="S5.SS2.SSS0.Px1.p1.1.m1.1.1.3" xref="S5.SS2.SSS0.Px1.p1.1.m1.1.1.3.cmml">128</mn></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px1.p1.1.m1.1b"><apply id="S5.SS2.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S5.SS2.SSS0.Px1.p1.1.m1.1.1"><eq id="S5.SS2.SSS0.Px1.p1.1.m1.1.1.1.cmml" xref="S5.SS2.SSS0.Px1.p1.1.m1.1.1.1"></eq><ci id="S5.SS2.SSS0.Px1.p1.1.m1.1.1.2.cmml" xref="S5.SS2.SSS0.Px1.p1.1.m1.1.1.2">ğ‘‡</ci><cn id="S5.SS2.SSS0.Px1.p1.1.m1.1.1.3.cmml" type="integer" xref="S5.SS2.SSS0.Px1.p1.1.m1.1.1.3">128</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px1.p1.1.m1.1c">T=128</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px1.p1.1.m1.1d">italic_T = 128</annotation></semantics></math>) with an independent draw of 512 ancestral samples to investigate whether our approach results in hypotheses from unexplored regions (Fig.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.F2.sf1" title="In 5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">2(a)</span></a>). Compared to ancestral, <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.SSS0.Px1.p1.2.2">Quest</span> results in hypotheses that are not found in the larger pool (4<math alttext="\times" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px1.p1.2.m2.1"><semantics id="S5.SS2.SSS0.Px1.p1.2.m2.1a"><mo id="S5.SS2.SSS0.Px1.p1.2.m2.1.1" xref="S5.SS2.SSS0.Px1.p1.2.m2.1.1.cmml">Ã—</mo><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px1.p1.2.m2.1b"><times id="S5.SS2.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S5.SS2.SSS0.Px1.p1.2.m2.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px1.p1.2.m2.1c">\times</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px1.p1.2.m2.1d">Ã—</annotation></semantics></math>) of ancestral samples as illustrated by a higher mass at the overlap value of 0.
This demonstrates that <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.SSS0.Px1.p1.2.3">Quest</span> effectively gets to regions of the output manifold that would be less likely sampled by the LM and still attain, on average, better quality and diversity.</p>
</div>
</section>
<section class="ltx_paragraph" id="S5.SS2.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Average reward improves over decoding steps.</h4>
<div class="ltx_para" id="S5.SS2.SSS0.Px2.p1">
<p class="ltx_p" id="S5.SS2.SSS0.Px2.p1.1">FigureÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.F2.sf2" title="In 5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">2(b)</span></a> shows the average reward with increasing decoding steps and the sample size for <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.SSS0.Px2.p1.1.1">Quest</span> and ancestral respectively. As ancestral results in independent samples, the mean reward estimate remains unchanged for different sample sizes. However, for <span class="ltx_text ltx_font_smallcaps" id="S5.SS2.SSS0.Px2.p1.1.2">Quest</span>, hypotheses are gradually sampled in the direction of higher-quality regions, closer to the target density, resulting in increased average reward with more steps. We can also observe that the standard deviation of the reward over all samples decreases with the increasing number of steps, suggesting that the model eventually reaches a better target distribution.</p>
</div>
</section>
<section class="ltx_paragraph" id="S5.SS2.SSS0.Px3">
<h4 class="ltx_title ltx_title_paragraph">High <math alttext="\beta" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px3.1.m1.1"><semantics id="S5.SS2.SSS0.Px3.1.m1.1b"><mi id="S5.SS2.SSS0.Px3.1.m1.1.1" xref="S5.SS2.SSS0.Px3.1.m1.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px3.1.m1.1c"><ci id="S5.SS2.SSS0.Px3.1.m1.1.1.cmml" xref="S5.SS2.SSS0.Px3.1.m1.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px3.1.m1.1d">\beta</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px3.1.m1.1e">italic_Î²</annotation></semantics></math> value results in higher acceptance rates.</h4>
<div class="ltx_para" id="S5.SS2.SSS0.Px3.p1">
<p class="ltx_p" id="S5.SS2.SSS0.Px3.p1.3">Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.F2.sf3" title="In 5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">2(c)</span></a> shows the distribution of accepted samples when varying <math alttext="\beta" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px3.p1.1.m1.1"><semantics id="S5.SS2.SSS0.Px3.p1.1.m1.1a"><mi id="S5.SS2.SSS0.Px3.p1.1.m1.1.1" xref="S5.SS2.SSS0.Px3.p1.1.m1.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px3.p1.1.m1.1b"><ci id="S5.SS2.SSS0.Px3.p1.1.m1.1.1.cmml" xref="S5.SS2.SSS0.Px3.p1.1.m1.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px3.p1.1.m1.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px3.p1.1.m1.1d">italic_Î²</annotation></semantics></math>, considering all (blue) versus unique (red) accepted samples. As expected, on average, the number of accepted samples is smaller than the number of steps <math alttext="T" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px3.p1.2.m2.1"><semantics id="S5.SS2.SSS0.Px3.p1.2.m2.1a"><mi id="S5.SS2.SSS0.Px3.p1.2.m2.1.1" xref="S5.SS2.SSS0.Px3.p1.2.m2.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px3.p1.2.m2.1b"><ci id="S5.SS2.SSS0.Px3.p1.2.m2.1.1.cmml" xref="S5.SS2.SSS0.Px3.p1.2.m2.1.1">ğ‘‡</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px3.p1.2.m2.1c">T</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px3.p1.2.m2.1d">italic_T</annotation></semantics></math> depending upon the rejection rateâ€”low <math alttext="\beta" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px3.p1.3.m3.1"><semantics id="S5.SS2.SSS0.Px3.p1.3.m3.1a"><mi id="S5.SS2.SSS0.Px3.p1.3.m3.1.1" xref="S5.SS2.SSS0.Px3.p1.3.m3.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px3.p1.3.m3.1b"><ci id="S5.SS2.SSS0.Px3.p1.3.m3.1.1.cmml" xref="S5.SS2.SSS0.Px3.p1.3.m3.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px3.p1.3.m3.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px3.p1.3.m3.1d">italic_Î²</annotation></semantics></math> values lead to higher rejection rates. Furthermore, within the accepted samples, we also observe many repeats. This can be attributed to the observation that the language model has a low entropy distribution for continuations when the sample indices lie at the end of sentences. Moreover, for probable sentences, only a few have a high reward, which could result in the Markov chain getting stuck in a particular state. Increasing the temperature of the LM or adjusting the index distribution to have less density in the last few tokens could potentially reduce the number of repeats. We leave this exploration to future work.</p>
</div>
</section>
<section class="ltx_paragraph" id="S5.SS2.SSS0.Px4">
<h4 class="ltx_title ltx_title_paragraph">Our sentence-level proposal generates better candidates.</h4>
<div class="ltx_para" id="S5.SS2.SSS0.Px4.p1">
<p class="ltx_p" id="S5.SS2.SSS0.Px4.p1.5">For a random example sampled from the WMT23 dataset, we generate <math alttext="25" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px4.p1.1.m1.1"><semantics id="S5.SS2.SSS0.Px4.p1.1.m1.1a"><mn id="S5.SS2.SSS0.Px4.p1.1.m1.1.1" xref="S5.SS2.SSS0.Px4.p1.1.m1.1.1.cmml">25</mn><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px4.p1.1.m1.1b"><cn id="S5.SS2.SSS0.Px4.p1.1.m1.1.1.cmml" type="integer" xref="S5.SS2.SSS0.Px4.p1.1.m1.1.1">25</cn></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px4.p1.1.m1.1c">25</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px4.p1.1.m1.1d">25</annotation></semantics></math>k hypotheses using three proposal distributions: a) token-level modification with uniform probability b) token-level modification with full posterior presented in Eq. <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E8" title="In 3.2 Proposal distribution â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">8</span></a>, and c) our sentence-level proposal (Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E10" title="In 3.2 Proposal distribution â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">10</span></a>) and calculate the reward differences between the original (<math alttext="y" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px4.p1.2.m2.1"><semantics id="S5.SS2.SSS0.Px4.p1.2.m2.1a"><mi id="S5.SS2.SSS0.Px4.p1.2.m2.1.1" xref="S5.SS2.SSS0.Px4.p1.2.m2.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px4.p1.2.m2.1b"><ci id="S5.SS2.SSS0.Px4.p1.2.m2.1.1.cmml" xref="S5.SS2.SSS0.Px4.p1.2.m2.1.1">ğ‘¦</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px4.p1.2.m2.1c">y</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px4.p1.2.m2.1d">italic_y</annotation></semantics></math>) and the generated hypothesis (<math alttext="y^{\prime}" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px4.p1.3.m3.1"><semantics id="S5.SS2.SSS0.Px4.p1.3.m3.1a"><msup id="S5.SS2.SSS0.Px4.p1.3.m3.1.1" xref="S5.SS2.SSS0.Px4.p1.3.m3.1.1.cmml"><mi id="S5.SS2.SSS0.Px4.p1.3.m3.1.1.2" xref="S5.SS2.SSS0.Px4.p1.3.m3.1.1.2.cmml">y</mi><mo id="S5.SS2.SSS0.Px4.p1.3.m3.1.1.3" xref="S5.SS2.SSS0.Px4.p1.3.m3.1.1.3.cmml">â€²</mo></msup><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px4.p1.3.m3.1b"><apply id="S5.SS2.SSS0.Px4.p1.3.m3.1.1.cmml" xref="S5.SS2.SSS0.Px4.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S5.SS2.SSS0.Px4.p1.3.m3.1.1.1.cmml" xref="S5.SS2.SSS0.Px4.p1.3.m3.1.1">superscript</csymbol><ci id="S5.SS2.SSS0.Px4.p1.3.m3.1.1.2.cmml" xref="S5.SS2.SSS0.Px4.p1.3.m3.1.1.2">ğ‘¦</ci><ci id="S5.SS2.SSS0.Px4.p1.3.m3.1.1.3.cmml" xref="S5.SS2.SSS0.Px4.p1.3.m3.1.1.3">â€²</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px4.p1.3.m3.1c">y^{\prime}</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px4.p1.3.m3.1d">italic_y start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT</annotation></semantics></math>): <math alttext="r(y^{\prime},x)-r(y,x)" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px4.p1.4.m4.4"><semantics id="S5.SS2.SSS0.Px4.p1.4.m4.4a"><mrow id="S5.SS2.SSS0.Px4.p1.4.m4.4.4" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.cmml"><mrow id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.cmml"><mi id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.3" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.3.cmml">r</mi><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.2" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.2.cmml">â¢</mo><mrow id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.2.cmml"><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.2" stretchy="false" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.2.cmml">(</mo><msup id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.cmml"><mi id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.2" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.2.cmml">y</mi><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.3" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.3.cmml">â€²</mo></msup><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.3" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.2.cmml">,</mo><mi id="S5.SS2.SSS0.Px4.p1.4.m4.1.1" xref="S5.SS2.SSS0.Px4.p1.4.m4.1.1.cmml">x</mi><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.4" stretchy="false" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.2.cmml">)</mo></mrow></mrow><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.2" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.2.cmml">âˆ’</mo><mrow id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.cmml"><mi id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.2" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.2.cmml">r</mi><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.1" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.1.cmml">â¢</mo><mrow id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.2" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.1.cmml"><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.2.1" stretchy="false" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.1.cmml">(</mo><mi id="S5.SS2.SSS0.Px4.p1.4.m4.2.2" xref="S5.SS2.SSS0.Px4.p1.4.m4.2.2.cmml">y</mi><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.2.2" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.1.cmml">,</mo><mi id="S5.SS2.SSS0.Px4.p1.4.m4.3.3" xref="S5.SS2.SSS0.Px4.p1.4.m4.3.3.cmml">x</mi><mo id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.2.3" stretchy="false" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px4.p1.4.m4.4b"><apply id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4"><minus id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.2.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.2"></minus><apply id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1"><times id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.2.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.2"></times><ci id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.3.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.3">ğ‘Ÿ</ci><interval closure="open" id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.2.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1"><apply id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1"><csymbol cd="ambiguous" id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.1.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1">superscript</csymbol><ci id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.2.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.2">ğ‘¦</ci><ci id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.3.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.1.1.1.1.3">â€²</ci></apply><ci id="S5.SS2.SSS0.Px4.p1.4.m4.1.1.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.1.1">ğ‘¥</ci></interval></apply><apply id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3"><times id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.1.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.1"></times><ci id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.2.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.2">ğ‘Ÿ</ci><interval closure="open" id="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.1.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.4.4.3.3.2"><ci id="S5.SS2.SSS0.Px4.p1.4.m4.2.2.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.2.2">ğ‘¦</ci><ci id="S5.SS2.SSS0.Px4.p1.4.m4.3.3.cmml" xref="S5.SS2.SSS0.Px4.p1.4.m4.3.3">ğ‘¥</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px4.p1.4.m4.4c">r(y^{\prime},x)-r(y,x)</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px4.p1.4.m4.4d">italic_r ( italic_y start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT , italic_x ) - italic_r ( italic_y , italic_x )</annotation></semantics></math>.
FigureÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S5.F2.sf4" title="In 5.2 Ablation Analysis â€£ 5 Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">2(d)</span></a> shows its distribution: for proposals (a) and (b), the reward for the generated hypotheses is almost always lower than the initial translation. On the other hand, our proposal results in assigning half of the probability mass to hypotheses that improve over <math alttext="y" class="ltx_Math" display="inline" id="S5.SS2.SSS0.Px4.p1.5.m5.1"><semantics id="S5.SS2.SSS0.Px4.p1.5.m5.1a"><mi id="S5.SS2.SSS0.Px4.p1.5.m5.1.1" xref="S5.SS2.SSS0.Px4.p1.5.m5.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.SSS0.Px4.p1.5.m5.1b"><ci id="S5.SS2.SSS0.Px4.p1.5.m5.1.1.cmml" xref="S5.SS2.SSS0.Px4.p1.5.m5.1.1">ğ‘¦</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.SSS0.Px4.p1.5.m5.1c">y</annotation><annotation encoding="application/x-llamapun" id="S5.SS2.SSS0.Px4.p1.5.m5.1d">italic_y</annotation></semantics></math>, leading to faster convergence over token-level alternatives.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Related Work</h2>
<section class="ltx_paragraph" id="S6.SS0.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Sampling from Intractable Gibbs distributions.</h4>
<div class="ltx_para" id="S6.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="S6.SS0.SSS0.Px1.p1.1">Several methods have been proposed to sample approximately from Gibbs distributions in text generation using autoregressive and masked-language models. Prior works <cite class="ltx_cite ltx_citemacro_citep">(Miao etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib45" title="">2018</a>; Zhang etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib82" title="">2020</a>)</cite> use MH with a proposal distribution that makes token-level modifications for constrained generation tasks.
Since masked language models (MLM) do not have a straightforward mechanism for sampling text, MCMC has been widely explored using variations of Gibbs sampling <cite class="ltx_cite ltx_citemacro_citep">(Berglund etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib5" title="">2015</a>; Su etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib70" title="">2018</a>; Wang and Cho, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib76" title="">2019</a>; Yamakoshi etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib80" title="">2022</a>)</cite>.
However, <cite class="ltx_cite ltx_citemacro_citet">Goyal etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib23" title="">2022</a>)</cite> shows that the masked conditional distributions from MLMs result in invalid Gibbs samplers and, therefore, proposes to use MH on the masked conditionals, resulting in higher-quality text. <cite class="ltx_cite ltx_citemacro_citet">Mireshghallah etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib46" title="">2022</a>); Forristal etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib17" title="">2023</a>)</cite> build on this work and use MLMs for sampling from Gibbs distributions.
Some works <cite class="ltx_cite ltx_citemacro_citep">(Kumar etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib41" title="">2022</a>; Qin etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib56" title="">2022</a>; Amini etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib2" title="">2023</a>; Du etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib9" title="">2023</a>)</cite> also adapt the Hamiltonian MCMC algorithms originally designed for high-dimensional continuous distributions for the discrete scenario <cite class="ltx_cite ltx_citemacro_citep">(Duane etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib10" title="">1987</a>; Neal, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib47" title="">2011</a>)</cite>. Furthermore, <cite class="ltx_cite ltx_citemacro_citet">Hu etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib31" title="">2024</a>)</cite> apply GFlowNets <cite class="ltx_cite ltx_citemacro_citep">(Bengio etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib4" title="">2021</a>)</cite> to fine-tune language models for solving posterior inference problems, which can be considered as sampling in proportion to an intractable Gibbs distribution. In our work, we instead aim to use MCMC for MT to sample translations in proportion to a sentence-level evaluation metric.</p>
</div>
</section>
<section class="ltx_paragraph" id="S6.SS0.SSS0.Px2">
<h4 class="ltx_title ltx_title_paragraph">Diverse Decoding for Machine Translation.</h4>
<div class="ltx_para" id="S6.SS0.SSS0.Px2.p1">
<p class="ltx_p" id="S6.SS0.SSS0.Px2.p1.1">Variants of beam search <cite class="ltx_cite ltx_citemacro_citep">(Cho, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib7" title="">2016</a>; Vijayakumar etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib75" title="">2017</a>; Kulikov etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib40" title="">2019</a>; Tam, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib72" title="">2020</a>)</cite> have been proposed to produce a diverse set of translations using diversity-promoting objectives. However, the increased computation cost with the model size and beam width makes it infeasible and impractical to use with LLMs and it fails to yield consistent improvement over ancestral with an increase in beam width <cite class="ltx_cite ltx_citemacro_citep">(Stahlberg and Byrne, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib67" title="">2019</a>; Eikema and Aziz, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib12" title="">2020</a>; Pang etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib50" title="">2024</a>)</cite>. Quality-aware decoding approaches on the other hand are almost always used to generate a single best hypothesis. Concurrently, <cite class="ltx_cite ltx_citemacro_cite">Jinnai etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib32" title="">2024</a>)</cite> add diversity promoting objective to MBR decoding to generate a set of high-quality diverse candidates. However, their approach only allows for the selection of hypotheses from a predefined set. We further note that we do not <span class="ltx_text ltx_font_italic" id="S6.SS0.SSS0.Px2.p1.1.1">directly</span> promote diversityâ€”rather, diverse translations are a side product of efficiently exploring multiple high-quality regions from the modelâ€™s distribution.</p>
</div>
</section>
</section>
<section class="ltx_section" id="S7">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Conclusion</h2>
<div class="ltx_para" id="S7.p1">
<p class="ltx_p" id="S7.p1.1">We propose a new decoding approach for MT, <span class="ltx_text ltx_font_smallcaps" id="S7.p1.1.1">QU<span class="ltx_text ltx_font_italic" id="S7.p1.1.1.1">ality-Aware m</span>E<span class="ltx_text ltx_font_italic" id="S7.p1.1.1.2">tropolis-Ha</span>ST<span class="ltx_text ltx_font_italic" id="S7.p1.1.1.3">ings</span></span> (<span class="ltx_text ltx_font_smallcaps" id="S7.p1.1.2">Quest</span>) sampling based on MCMC that enables the generation of hypotheses in proportion to an automatic QE metric. We present a simple and novel proposal distribution that satisfies the constraints imposed by the Metropolis-Hastings algorithm. Our experiments on four language directions and two strong decoder-only language models show the efficacy of our approach over baselines. We further show that our approach results in samples from underexplored high-density regions and that the average quality continues to improve as the Markov chain size increases.</p>
</div>
</section>
<section class="ltx_section" id="S8">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">8 </span>Limitations and Broad Impact</h2>
<div class="ltx_para" id="S8.p1">
<p class="ltx_p" id="S8.p1.1"><span class="ltx_text ltx_font_smallcaps" id="S8.p1.1.1">Quest</span> requires generating many samples to reach high-density regions sequentially from an LLM for each input prompt, which can be computationally expensive for time-critical applications. Additionally, the required number of steps may vary depending on the input and the quality of the initial hypothesis. Furthermore, our proposal distribution only modifies the sentence suffix, which becomes restrictive once the chain reaches a high-quality region. As at this point, only minor changes to the hypothesis are accepted, slowing the mixing process. Addressing these limitations and extending this approach to other NLP tasks are avenues for future work.</p>
</div>
<div class="ltx_para" id="S8.p2">
<p class="ltx_p" id="S8.p2.1">Furthermore, we leverage recent advances in QE methods for MT and integrate them directly in the generation process of LLMs, which can potentially reduce the errors generated by these systems. However, despite the high correlations of evaluation metrics with human judgments, they are sometimes hard to interpret and occasionally fail to detect simple mistakes such as incorrect translations of numbers or entities <cite class="ltx_cite ltx_citemacro_citep">(Amrhein and Sennrich, <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib3" title="">2022</a>)</cite>. In such cases, sampling from the Gibbs distributions induced by these metrics might increase the chances of sampling those erroneous translations. We believe these risks will be mitigated as better metrics are constantly being developedâ€”our method, being agnostic to the specific quality metric, will directly benefit from it. In addition, since <span class="ltx_text ltx_font_smallcaps" id="S8.p2.1.1">Quest</span> supports any Gibbs distribution, it can also incorporate multiple QE models or additional checks which can rule out problematic samples by assigning them a very low QE score.</p>
</div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Acknowledgments</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">We thank Ben Peters, Marcos Treviso, and Sergey Troshin for their helpful and constructive feedback on the initial versions of the paper. Part of this work was supported by the EUâ€™s Horizon Europe Research and Innovation Actions (UTTER, contract 101070631), by the project DECOLLAGE (ERC-2022-CoG
101088763), by the Portuguese Recovery and Resilience Plan through project C645008882-
00000055 (Center for Responsible AI), and by FundaÃ§Ã£o para a CiÃªncia e Tecnologia through
contract UIDB/50008/2020.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Alves etÂ al. (2024)</span>
<span class="ltx_bibblock">
DuarteÂ M. Alves, JosÃ© Pombal, NunoÂ M. Guerreiro, PedroÂ H. Martins, JoÃ£o Alves, Amin Farajian, Ben Peters, Ricardo Rei, Patrick Fernandes, Sweta Agrawal, Pierre Colombo, JosÃ© G.Â C. deÂ Souza, and AndrÃ© F.Â T. Martins. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2402.17733" title="">Tower: An open multilingual large language model for translation-related tasks</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Amini etÂ al. (2023)</span>
<span class="ltx_bibblock">
Afra Amini, LiÂ Du, and Ryan Cotterell. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2306.03061" title="">Structured voronoi sampling</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Amrhein and Sennrich (2022)</span>
<span class="ltx_bibblock">
Chantal Amrhein and Rico Sennrich. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2022.aacl-main.83" title="">Identifying weaknesses in machine translation metrics through minimum Bayes risk decoding: A case study for COMET</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Proceedings of the 2nd Conference of the Asia-Pacific Chapter of the Association for Computational Linguistics and the 12th International Joint Conference on Natural Language Processing (Volume 1: Long Papers)</em>, pages 1125â€“1141, Online only. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bengio etÂ al. (2021)</span>
<span class="ltx_bibblock">
Emmanuel Bengio, Moksh Jain, Maksym Korablyov, Doina Precup, and Yoshua Bengio. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2106.04399" title="">Flow network based generative models for non-iterative diverse candidate generation</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Berglund etÂ al. (2015)</span>
<span class="ltx_bibblock">
Mathias Berglund, Tapani Raiko, Mikko Honkala, Leo KÃ¤rkkÃ¤inen, Akos Vetek, and Juha Karhunen. 2015.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/1504.01575" title="">Bidirectional recurrent neural networks as generative models - reconstructing gaps in time series</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Blain etÂ al. (2023)</span>
<span class="ltx_bibblock">
Frederic Blain, Chrysoula Zerva, Ricardo Rei, NunoÂ M. Guerreiro, Diptesh Kanojia, JosÃ©Â G. C.Â de Souza, Beatriz Silva, TÃ¢nia Vaz, Yan Jingxuan, Fatemeh Azadi, Constantin Orasan, and AndrÃ© Martins. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.wmt-1.52" title="">Findings of the WMT 2023 shared task on quality estimation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">Proceedings of the Eighth Conference on Machine Translation</em>, pages 629â€“653, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Cho (2016)</span>
<span class="ltx_bibblock">
Kyunghyun Cho. 2016.

</span>
<span class="ltx_bibblock">Noisy parallel approximate decoding for conditional recurrent language model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">arXiv preprint arXiv:1605.03835</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dreyer and Marcu (2012)</span>
<span class="ltx_bibblock">
Markus Dreyer and Daniel Marcu. 2012.

</span>
<span class="ltx_bibblock">Hyter: Meaning-equivalent semantics for translation evaluation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">Proceedings of the 2012 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies</em>, pages 162â€“171.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Du etÂ al. (2023)</span>
<span class="ltx_bibblock">
LiÂ Du, Afra Amini, LucasÂ Torroba Hennigen, XinyanÂ Velocity Yu, Jason Eisner, Holden Lee, and Ryan Cotterell. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2312.17710" title="">Principled gradient-based markov chain monte carlo for text generation</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Duane etÂ al. (1987)</span>
<span class="ltx_bibblock">
Simon Duane, A.D. Kennedy, BrianÂ J. Pendleton, and Duncan Roweth. 1987.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/https://doi.org/10.1016/0370-2693(87)91197-X" title="">Hybrid monte carlo</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Physics Letters B</em>, 195(2):216â€“222.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Eikema (2024)</span>
<span class="ltx_bibblock">
Bryan Eikema. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2024.uncertainlp-1.9" title="">The effect of generalisation on the inadequacy of the mode</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Proceedings of the 1st Workshop on Uncertainty-Aware NLP (UncertaiNLP 2024)</em>, pages 87â€“92, St Julians, Malta. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Eikema and Aziz (2020)</span>
<span class="ltx_bibblock">
Bryan Eikema and Wilker Aziz. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2020.coling-main.398" title="">Is MAP decoding all you need? the inadequacy of the mode in neural machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Proceedings of the 28th International Conference on Computational Linguistics</em>, pages 4506â€“4520, Barcelona, Spain (Online). International Committee on Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Farinhas etÂ al. (2023)</span>
<span class="ltx_bibblock">
AntÃ³nio Farinhas, JosÃ© deÂ Souza, and Andre Martins. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.emnlp-main.733" title="">An empirical study of translation hypothesis ensembling with large language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 11956â€“11970, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fernandes etÂ al. (2022a)</span>
<span class="ltx_bibblock">
Patrick Fernandes, AntÃ³nio Farinhas, Ricardo Rei, JosÃ©Â G. C.Â de Souza, Perez Ogayo, Graham Neubig, and Andre Martins. 2022a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.naacl-main.100" title="">Quality-aware decoding for neural machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Proceedings of the 2022 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies</em>, pages 1396â€“1412, Seattle, United States. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fernandes etÂ al. (2022b)</span>
<span class="ltx_bibblock">
Patrick Fernandes, AntÃ³nio Farinhas, Ricardo Rei, JosÃ© G.Â C. deÂ Souza, Perez Ogayo, Graham Neubig, and AndrÃ© F.Â T. Martins. 2022b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2205.00978" title="">Quality-aware decoding for neural machine translation</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fernandes etÂ al. (2023)</span>
<span class="ltx_bibblock">
Patrick Fernandes, Aman Madaan, Emmy Liu, AntÃ³nio Farinhas, PedroÂ Henrique Martins, Amanda Bertsch, JosÃ© G.Â C. deÂ Souza, Shuyan Zhou, Tongshuang Wu, Graham Neubig, and AndrÃ© F.Â T. Martins. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1162/tacl_a_00626" title="">Bridging the Gap: A Survey on Integrating (Human) Feedback for Natural Language Generation</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Transactions of the Association for Computational Linguistics</em>, 11:1643â€“1668.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Forristal etÂ al. (2023)</span>
<span class="ltx_bibblock">
Jarad Forristal, Niloofar Mireshghallah, Greg Durrett, and Taylor Berg-Kirkpatrick. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2312.04510" title="">A block metropolis-hastings sampler for controllable energy-based text generation</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Freitag etÂ al. (2023a)</span>
<span class="ltx_bibblock">
Markus Freitag, Behrooz Ghorbani, and Patrick Fernandes. 2023a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.findings-emnlp.617" title="">Epsilon sampling rocks: Investigating sampling strategies for minimum Bayes risk decoding for machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">Findings of the Association for Computational Linguistics: EMNLP 2023</em>, pages 9198â€“9209, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Freitag etÂ al. (2022a)</span>
<span class="ltx_bibblock">
Markus Freitag, David Grangier, Qijun Tan, and Bowen Liang. 2022a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1162/tacl_a_00491" title="">High quality rather than high model probability: Minimum Bayes risk decoding with neural metrics</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Transactions of the Association for Computational Linguistics</em>, 10:811â€“825.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Freitag etÂ al. (2023b)</span>
<span class="ltx_bibblock">
Markus Freitag, Nitika Mathur, Chi-kiu Lo, Eleftherios Avramidis, Ricardo Rei, Brian Thompson, Tom Kocmi, Frederic Blain, Daniel Deutsch, Craig Stewart, Chrysoula Zerva, Sheila Castilho, Alon Lavie, and George Foster. 2023b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.wmt-1.51" title="">Results of WMT23 metrics shared task: Metrics might be guilty but references are not innocent</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Proceedings of the Eighth Conference on Machine Translation</em>, pages 578â€“628, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Freitag etÂ al. (2022b)</span>
<span class="ltx_bibblock">
Markus Freitag, Ricardo Rei, Nitika Mathur, Chi-kiu Lo, Craig Stewart, Eleftherios Avramidis, Tom Kocmi, George Foster, Alon Lavie, and AndrÃ© F.Â T. Martins. 2022b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2022.wmt-1.2" title="">Results of WMT22 metrics shared task: Stop using BLEU â€“ neural metrics are better and more robust</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">Proceedings of the Seventh Conference on Machine Translation (WMT)</em>, pages 46â€“68, Abu Dhabi, United Arab Emirates (Hybrid). Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Go etÂ al. (2023)</span>
<span class="ltx_bibblock">
Dongyoung Go, Tomasz Korbak, GermÃ¡n Kruszewski, Jos Rozen, Nahyeon Ryu, and Marc Dymetman. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2302.08215" title="">Aligning language models with preferences through f-divergence minimization</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Goyal etÂ al. (2022)</span>
<span class="ltx_bibblock">
Kartik Goyal, Chris Dyer, and Taylor Berg-Kirkpatrick. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2106.02736" title="">Exposing the implicit energy networks behind masked language models via metropolisâ€“hastings</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Goyal etÂ al. (2021)</span>
<span class="ltx_bibblock">
Naman Goyal, Jingfei Du, Myle Ott, Giri Anantharaman, and Alexis Conneau. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2021.repl4nlp-1.4" title="">Larger-scale transformers for multilingual masked language modeling</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">Proceedings of the 6th Workshop on Representation Learning for NLP (RepL4NLP-2021)</em>, pages 29â€“33, Online. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Graham etÂ al. (2013)</span>
<span class="ltx_bibblock">
Yvette Graham, Timothy Baldwin, Alistair Moffat, and Justin Zobel. 2013.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/W13-2305" title="">Continuous measurement scales in human evaluation of machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">Proceedings of the 7th Linguistic Annotation Workshop and Interoperability with Discourse</em>, pages 33â€“41, Sofia, Bulgaria. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Grimm etÂ al. (2024)</span>
<span class="ltx_bibblock">
DavidÂ R Grimm, Yu-Jin Lee, Katherine Hu, Longsha Liu, Omar Garcia, Karthik Balakrishnan, and NoelÂ F Ayoub. 2024.

</span>
<span class="ltx_bibblock">The utility of chatgpt as a generative medical translator.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">European Archives of Oto-Rhino-Laryngology</em>, pages 1â€“5.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guerreiro etÂ al. (2023a)</span>
<span class="ltx_bibblock">
NunoÂ M. Guerreiro, Ricardo Rei, Daan van Stigt, Luisa Coheur, Pierre Colombo, and AndrÃ© F.Â T. Martins. 2023a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2310.10482" title="">xcomet: Transparent machine translation evaluation through fine-grained error detection</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Guerreiro etÂ al. (2023b)</span>
<span class="ltx_bibblock">
NunoÂ Miguel Guerreiro, DuarteÂ M Alves, Jonas Waldendorf, Barry Haddow, Alexandra Birch, Pierre Colombo, and AndrÃ©Â FT Martins. 2023b.

</span>
<span class="ltx_bibblock">Hallucinations in large multilingual translation models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">Transactions of the Association for Computational Linguistics</em>, 11.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">He etÂ al. (2024)</span>
<span class="ltx_bibblock">
Zhiwei He, Xing Wang, Wenxiang Jiao, Zhuosheng Zhang, Rui Wang, Shuming Shi, and Zhaopeng Tu. 2024.

</span>
<span class="ltx_bibblock">Improving machine translation with human feedback: An exploration of quality estimation as a reward model.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">arXiv preprint arXiv:2401.12873</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hendy etÂ al. (2023)</span>
<span class="ltx_bibblock">
Amr Hendy, Mohamed Abdelrehim, Amr Sharaf, Vikas Raunak, Mohamed Gabr, Hitokazu Matsushita, YoungÂ Jin Kim, Mohamed Afify, and HanyÂ Hassan Awadalla. 2023.

</span>
<span class="ltx_bibblock">How good are gpt models at machine translation? a comprehensive evaluation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">arXiv preprint arXiv:2302.09210</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu etÂ al. (2024)</span>
<span class="ltx_bibblock">
EdwardÂ J. Hu, Moksh Jain, Eric Elmoznino, Younesse Kaddar, Guillaume Lajoie, Yoshua Bengio, and Nikolay Malkin. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2310.04363" title="">Amortizing intractable inference in large language models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jinnai etÂ al. (2024)</span>
<span class="ltx_bibblock">
Yuu Jinnai, Ukyo Honda, Tetsuro Morimura, and Peinan Zhang. 2024.

</span>
<span class="ltx_bibblock">Generating diverse and high-quality texts by minimum bayes risk decoding.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">arXiv preprint arXiv:2401.05054</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kaufmann etÂ al. (2023)</span>
<span class="ltx_bibblock">
Timo Kaufmann, Paul Weng, Viktor Bengs, and Eyke HÃ¼llermeier. 2023.

</span>
<span class="ltx_bibblock">A survey of reinforcement learning from human feedback.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">arXiv preprint arXiv:2312.14925</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Khoong etÂ al. (2019)</span>
<span class="ltx_bibblock">
ElaineÂ C Khoong, Eric Steinbrook, Cortlyn Brown, and Alicia Fernandez. 2019.

</span>
<span class="ltx_bibblock">Assessing the use of google translate for spanish and chinese translations of emergency department discharge instructions.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">JAMA internal medicine</em>, 179(4):580â€“582.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kocmi etÂ al. (2023)</span>
<span class="ltx_bibblock">
Tom Kocmi, Eleftherios Avramidis, Rachel Bawden, OndÅ™ej Bojar, Anton Dvorkovich, Christian Federmann, Mark Fishel, Markus Freitag, Thamme Gowda, Roman Grundkiewicz, Barry Haddow, Philipp Koehn, Benjamin Marie, Christof Monz, Makoto Morishita, Kenton Murray, Makoto Nagata, Toshiaki Nakazawa, Martin Popel, Maja PopoviÄ‡, and Mariya Shmatova. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.wmt-1.1" title="">Findings of the 2023 conference on machine translation (WMT23): LLMs are here but not quite there yet</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">Proceedings of the Eighth Conference on Machine Translation</em>, pages 1â€“42, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kocmi etÂ al. (2024)</span>
<span class="ltx_bibblock">
Tom Kocmi, VilÃ©m Zouhar, Christian Federmann, and Matt Post. 2024.

</span>
<span class="ltx_bibblock">Navigating the metrics maze: Reconciling score magnitudes and accuracies.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">arXiv preprint arXiv:2401.06760</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Koehn and Knowles (2017)</span>
<span class="ltx_bibblock">
Philipp Koehn and Rebecca Knowles. 2017.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/W17-3204" title="">Six challenges for neural machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">Proceedings of the First Workshop on Neural Machine Translation</em>, pages 28â€“39, Vancouver. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Korbak etÂ al. (2022a)</span>
<span class="ltx_bibblock">
Tomasz Korbak, Hady Elsahar, GermÃ¡n Kruszewski, and Marc Dymetman. 2022a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2206.00761" title="">On reinforcement learning and distribution matching for fine-tuning language models with no catastrophic forgetting</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Korbak etÂ al. (2022b)</span>
<span class="ltx_bibblock">
Tomasz Korbak, Ethan Perez, and ChristopherÂ L Buckley. 2022b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2205.11275" title="">Rl with kl penalties is better viewed as bayesian inference</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kulikov etÂ al. (2019)</span>
<span class="ltx_bibblock">
Ilia Kulikov, Alexander Miller, Kyunghyun Cho, and Jason Weston. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/W19-8609" title="">Importance of search and evaluation strategies in neural dialogue modeling</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib40.1.1">Proceedings of the 12th International Conference on Natural Language Generation</em>, pages 76â€“87, Tokyo, Japan. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kumar etÂ al. (2022)</span>
<span class="ltx_bibblock">
Sachin Kumar, Biswajit Paria, and Yulia Tsvetkov. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2205.12558" title="">Gradient-based constrained sampling from language models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kwon etÂ al. (2023)</span>
<span class="ltx_bibblock">
Woosuk Kwon, Zhuohan Li, Siyuan Zhuang, Ying Sheng, Lianmin Zheng, CodyÂ Hao Yu, JosephÂ E. Gonzalez, Hao Zhang, and Ion Stoica. 2023.

</span>
<span class="ltx_bibblock">Efficient memory management for large language model serving with pagedattention.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib42.1.1">Proceedings of the ACM SIGOPS 29th Symposium on Operating Systems Principles</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mayhew etÂ al. (2020)</span>
<span class="ltx_bibblock">
Stephen Mayhew, Klinton Bicknell, Chris Brust, Bill McDowell, Will Monroe, and Burr Settles. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2020.ngt-1.28" title="">Simultaneous translation and paraphrase for language education</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib43.1.1">Proceedings of the Fourth Workshop on Neural Generation and Translation</em>, pages 232â€“243, Online. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Metropolis etÂ al. (1953)</span>
<span class="ltx_bibblock">
NicholasÂ C. Metropolis, AriannaÂ W. Rosenbluth, MarshallÂ N. Rosenbluth, and A.Â H. Teller. 1953.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://api.semanticscholar.org/CorpusID:1046577" title="">Equation of state calculations by fast computing machines</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib44.1.1">Journal of Chemical Physics</em>, 21:1087â€“1092.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Miao etÂ al. (2018)</span>
<span class="ltx_bibblock">
Ning Miao, Hao Zhou, Lili Mou, Rui Yan, and Lei Li. 2018.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/1811.10996" title="">CGMH: constrained sentence generation by metropolis-hastings sampling</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib45.1.1">CoRR</em>, abs/1811.10996.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib46">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mireshghallah etÂ al. (2022)</span>
<span class="ltx_bibblock">
Fatemehsadat Mireshghallah, Kartik Goyal, and Taylor Berg-Kirkpatrick. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.acl-long.31" title="">Mix and match: Learning-free controllable text generationusing energy language models</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib46.1.1">Proceedings of the 60th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 401â€“415, Dublin, Ireland. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib47">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Neal (2011)</span>
<span class="ltx_bibblock">
RadfordÂ M. Neal. 2011.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://api.semanticscholar.org/CorpusID:9690330" title="">Probabilistic inference using markov chain monte carlo methods</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib48">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nida (1964)</span>
<span class="ltx_bibblock">
EugeneÂ Albert Nida. 1964.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib48.1.1">Toward a science of translating: with special reference to principles and procedures involved in Bible translating</em>.

</span>
<span class="ltx_bibblock">Brill Archive.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib49">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ott etÂ al. (2018)</span>
<span class="ltx_bibblock">
Myle Ott, Michael Auli, David Grangier, and Marcâ€™Aurelio Ranzato. 2018.

</span>
<span class="ltx_bibblock">Analyzing uncertainty in neural machine translation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib49.1.1">International Conference on Machine Learning</em>, pages 3956â€“3965. PMLR.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib50">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pang etÂ al. (2024)</span>
<span class="ltx_bibblock">
Jianhui Pang, Fanghua Ye, Longyue Wang, Dian Yu, DerekÂ F Wong, Shuming Shi, and Zhaopeng Tu. 2024.

</span>
<span class="ltx_bibblock">Salute the classic: Revisiting challenges of machine translation in the age of large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib50.1.1">arXiv preprint arXiv:2401.08350</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib51">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Papineni etÂ al. (2002)</span>
<span class="ltx_bibblock">
Kishore Papineni, Salim Roukos, Todd Ward, and Wei-Jing Zhu. 2002.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.3115/1073083.1073135" title="">Bleu: a method for automatic evaluation of machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib51.1.1">Proceedings of the 40th Annual Meeting of the Association for Computational Linguistics</em>, pages 311â€“318, Philadelphia, Pennsylvania, USA. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib52">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Peng etÂ al. (2019)</span>
<span class="ltx_bibblock">
XueÂ Bin Peng, Aviral Kumar, Grace Zhang, and Sergey Levine. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/1910.00177" title="">Advantage-weighted regression: Simple and scalable off-policy reinforcement learning</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib53">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Perrella etÂ al. (2022)</span>
<span class="ltx_bibblock">
Stefano Perrella, Lorenzo Proietti, Alessandro ScirÃ¨, NiccolÃ² Campolungo, and Roberto Navigli. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2022.wmt-1.51" title="">MaTESe: Machine translation evaluation as a sequence tagging problem</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib53.1.1">Proceedings of the Seventh Conference on Machine Translation (WMT)</em>, pages 569â€“577, Abu Dhabi, United Arab Emirates (Hybrid). Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib54">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Peters and Martins (2021)</span>
<span class="ltx_bibblock">
Ben Peters and AndrÃ© F.Â T. Martins. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2021.naacl-main.210" title="">Smoothing and shrinking the sparse Seq2Seq search space</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib54.1.1">Proceedings of the 2021 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies</em>, pages 2642â€“2654, Online. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib55">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Peters and Schaal (2007)</span>
<span class="ltx_bibblock">
Jan Peters and Stefan Schaal. 2007.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1145/1273496.1273590" title="">Reinforcement learning by reward-weighted regression for operational space control</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib55.1.1">Proceedings of the 24th International Conference on Machine Learning</em>, ICML â€™07, page 745â€“750, New York, NY, USA. Association for Computing Machinery.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib56">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Qin etÂ al. (2022)</span>
<span class="ltx_bibblock">
Lianhui Qin, Sean Welleck, Daniel Khashabi, and Yejin Choi. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2202.11705" title="">Cold decoding: Energy-based constrained text generation with langevin dynamics</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib57">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Radford etÂ al. (2019)</span>
<span class="ltx_bibblock">
Alec Radford, Jeff Wu, Rewon Child, David Luan, Dario Amodei, and Ilya Sutskever. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://api.semanticscholar.org/CorpusID:160025533" title="">Language models are unsupervised multitask learners</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib58">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Raffel etÂ al. (2020)</span>
<span class="ltx_bibblock">
Colin Raffel, Noam Shazeer, Adam Roberts, Katherine Lee, Sharan Narang, Michael Matena, Yanqi Zhou, Wei Li, and PeterÂ J Liu. 2020.

</span>
<span class="ltx_bibblock">Exploring the limits of transfer learning with a unified text-to-text transformer.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib58.1.1">Journal of Machine Learning Research</em>, 21:1â€“67.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib59">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rei etÂ al. (2022)</span>
<span class="ltx_bibblock">
Ricardo Rei, JosÃ©Â G. C.Â de Souza, Duarte Alves, Chrysoula Zerva, AnaÂ C Farinha, Taisiya Glushkova, Alon Lavie, Luisa Coheur, and AndrÃ© F.Â T. Martins. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/2022.wmt-1.52" title="">COMET-22: Unbabel-IST 2022 submission for the metrics shared task</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib59.1.1">Proceedings of the Seventh Conference on Machine Translation (WMT)</em>, pages 578â€“585, Abu Dhabi, United Arab Emirates (Hybrid). Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib60">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rei etÂ al. (2023)</span>
<span class="ltx_bibblock">
Ricardo Rei, NunoÂ M. Guerreiro, JosÃƒÂ© Pombal, Daan van Stigt, Marcos Treviso, Luisa Coheur, JosÃ©Â G. C.Â de Souza, and AndrÃ© Martins. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.wmt-1.73" title="">Scaling up CometKiwi: Unbabel-IST 2023 submission for the quality estimation shared task</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib60.1.1">Proceedings of the Eighth Conference on Machine Translation</em>, pages 841â€“848, Singapore. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib61">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sanz-Valdivieso and LÃ³pez-Arroyo (2023)</span>
<span class="ltx_bibblock">
LucÃ­a Sanz-Valdivieso and BelÃ©n LÃ³pez-Arroyo. 2023.

</span>
<span class="ltx_bibblock">Google translate vs. chatgpt: Can non-language professionals trust them for specialized translation?

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib61.1.1">International Conference Human-informed Translation and Interpreting Technology (HiT-IT 2023)</em>, pages 97â€“107.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib62">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shen etÂ al. (2004)</span>
<span class="ltx_bibblock">
Libin Shen, Anoop Sarkar, and FranzÂ Josef Och. 2004.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/N04-1023" title="">Discriminative reranking for machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib62.1.1">Proceedings of the Human Language Technology Conference of the North American Chapter of the Association for Computational Linguistics: HLT-NAACL 2004</em>, pages 177â€“184, Boston, Massachusetts, USA. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib63">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shen etÂ al. (2016)</span>
<span class="ltx_bibblock">
Shiqi Shen, Yong Cheng, Zhongjun He, Wei He, Hua Wu, Maosong Sun, and Yang Liu. 2016.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/P16-1159" title="">Minimum risk training for neural machine translation</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib63.1.1">Proceedings of the 54th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 1683â€“1692, Berlin, Germany. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib64">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shen etÂ al. (2019)</span>
<span class="ltx_bibblock">
Tianxiao Shen, Myle Ott, Michael Auli, and Marcâ€™Aurelio Ranzato. 2019.

</span>
<span class="ltx_bibblock">Mixture models for diverse machine translation: Tricks of the trade.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib64.1.1">International conference on machine learning</em>, pages 5719â€“5728. PMLR.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib65">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shen etÂ al. (2023)</span>
<span class="ltx_bibblock">
Yiqiu Shen, Laura Heacock, Jonathan Elias, KeithÂ D Hentel, Beatriu Reig, George Shih, and Linda Moy. 2023.

</span>
<span class="ltx_bibblock">Chatgpt and other large language models are double-edged swords.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib66">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Singhal etÂ al. (2023)</span>
<span class="ltx_bibblock">
Prasann Singhal, Jiacheng Xu, XiÂ Ye, and Greg Durrett. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2306.00947" title="">Eel: Efficiently encoding lattices for reranking</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib67">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Stahlberg and Byrne (2019)</span>
<span class="ltx_bibblock">
Felix Stahlberg and Bill Byrne. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/D19-1331" title="">On NMT search errors and model errors: Cat got your tongue?</a>
</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib67.1.1">Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing and the 9th International Joint Conference on Natural Language Processing (EMNLP-IJCNLP)</em>, pages 3356â€“3362, Hong Kong, China. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib68">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Stiennon etÂ al. (2020)</span>
<span class="ltx_bibblock">
Nisan Stiennon, Long Ouyang, Jeff Wu, DanielÂ M. Ziegler, Ryan Lowe, Chelsea Voss, Alec Radford, Dario Amodei, and Paul Christiano. 2020.

</span>
<span class="ltx_bibblock">Learning to summarize from human feedback.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib68.1.1">NeurIPS</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib69">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Stiennon etÂ al. (2022)</span>
<span class="ltx_bibblock">
Nisan Stiennon, Long Ouyang, Jeff Wu, DanielÂ M. Ziegler, Ryan Lowe, Chelsea Voss, Alec Radford, Dario Amodei, and Paul Christiano. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2009.01325" title="">Learning to summarize from human feedback</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib70">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Su etÂ al. (2018)</span>
<span class="ltx_bibblock">
Jinyue Su, Jiacheng Xu, Xipeng Qiu, and Xuanjing Huang. 2018.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/1802.08970" title="">Incorporating discriminator in sentence generation: a gibbs sampling method</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib71">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Taira etÂ al. (2021)</span>
<span class="ltx_bibblock">
BreenaÂ R Taira, Vanessa Kreger, Aristides Orue, and LisaÂ C Diamond. 2021.

</span>
<span class="ltx_bibblock">A pragmatic assessment of google translate for emergency department instructions.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib71.1.1">Journal of General Internal Medicine</em>, 36(11):3361â€“3365.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib72">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tam (2020)</span>
<span class="ltx_bibblock">
Yik-Cheung Tam. 2020.

</span>
<span class="ltx_bibblock">Cluster-based beam search for pointer-generator chatbot grounded by knowledge.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib72.1.1">Computer Speech &amp; Language</em>, 64:101094.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib73">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron etÂ al. (2023)</span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, Dan Bikel, Lukas Blecher, CristianÂ Canton Ferrer, Moya Chen, Guillem Cucurull, David Esiobu, Jude Fernandes, Jeremy Fu, Wenyin Fu, Brian Fuller, Cynthia Gao, Vedanuj Goswami, Naman Goyal, Anthony Hartshorn, Saghar Hosseini, Rui Hou, Hakan Inan, Marcin Kardas, Viktor Kerkez, Madian Khabsa, Isabel Kloumann, Artem Korenev, PunitÂ Singh Koura, Marie-Anne Lachaux, Thibaut Lavril, Jenya Lee, Diana Liskovich, Yinghai Lu, Yuning Mao, Xavier Martinet, Todor Mihaylov, Pushkar Mishra, Igor Molybog, Yixin Nie, Andrew Poulton, Jeremy Reizenstein, Rashi Rungta, Kalyan Saladi, Alan Schelten, Ruan Silva, EricÂ Michael Smith, Ranjan Subramanian, XiaoqingÂ Ellen Tan, Binh Tang, Ross Taylor, Adina Williams, JianÂ Xiang Kuan, Puxin Xu, Zheng Yan, Iliyan Zarov, Yuchen Zhang, Angela Fan, Melanie Kambadur, Sharan Narang, Aurelien Rodriguez, Robert Stojnic, Sergey Edunov, and Thomas
Scialom. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2307.09288" title="">Llama 2: Open foundation and fine-tuned chat models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib74">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Vernikos and Popescu-Belis (2024)</span>
<span class="ltx_bibblock">
Giorgos Vernikos and Andrei Popescu-Belis. 2024.

</span>
<span class="ltx_bibblock">Donâ€™t rank, combine! combining machine translation hypotheses using quality estimation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib74.1.1">arXiv preprint arXiv:2401.06688</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib75">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Vijayakumar etÂ al. (2017)</span>
<span class="ltx_bibblock">
AshwinÂ K Vijayakumar, Michael Cogswell, RamprasaathÂ R. Selvaraju, Qing Sun, Stefan Lee, David Crandall, and Dhruv Batra. 2017.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openreview.net/forum?id=HJV1zP5xg" title="">Diverse beam search: Decoding diverse solutions from neural sequence models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib76">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang and Cho (2019)</span>
<span class="ltx_bibblock">
Alex Wang and Kyunghyun Cho. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/1902.04094" title="">BERT has a mouth, and it must speak: BERT as a markov random field language model</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib76.1.1">CoRR</em>, abs/1902.04094.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib77">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wieting etÂ al. (2019)</span>
<span class="ltx_bibblock">
John Wieting, Taylor Berg-Kirkpatrick, Kevin Gimpel, and Graham Neubig. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/P19-1427" title="">Beyond BLEU:training neural machine translation with semantic similarity</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib77.1.1">Proceedings of the 57th Annual Meeting of the Association for Computational Linguistics</em>, pages 4344â€“4355, Florence, Italy. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib78">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu etÂ al. (2024a)</span>
<span class="ltx_bibblock">
Haoran Xu, YoungÂ Jin Kim, Amr Sharaf, and HanyÂ Hassan Awadalla. 2024a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2309.11674" title="">A paradigm shift in machine translation: Boosting translation performance of large language models</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib79">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu etÂ al. (2024b)</span>
<span class="ltx_bibblock">
Haoran Xu, Amr Sharaf, Yunmo Chen, Weiting Tan, Lingfeng Shen, Benjamin VanÂ Durme, Kenton Murray, and YoungÂ Jin Kim. 2024b.

</span>
<span class="ltx_bibblock">Contrastive preference optimization: Pushing the boundaries of llm performance in machine translation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib79.1.1">arXiv preprint arXiv:2401.08417</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib80">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yamakoshi etÂ al. (2022)</span>
<span class="ltx_bibblock">
Takateru Yamakoshi, Thomas Griffiths, and Robert Hawkins. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.findings-acl.314" title="">Probing BERTâ€™s priors with serial reproduction chains</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib80.1.1">Findings of the Association for Computational Linguistics: ACL 2022</em>, pages 3977â€“3992, Dublin, Ireland. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib81">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yan etÂ al. (2023)</span>
<span class="ltx_bibblock">
Yiming Yan, Tao Wang, Chengqi Zhao, Shujian Huang, Jiajun Chen, and Mingxuan Wang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.acl-long.297" title="">BLEURT has universal translations: An analysis of automatic metrics by minimum risk training</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib81.1.1">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 5428â€“5443, Toronto, Canada. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib82">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang etÂ al. (2020)</span>
<span class="ltx_bibblock">
Maosen Zhang, Nan Jiang, Lei Li, and Yexiang Xue. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2020.findings-emnlp.115" title="">Language generation via combinatorial constraint satisfaction: A tree search enhanced Monte-Carlo approach</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib82.1.1">Findings of the Association for Computational Linguistics: EMNLP 2020</em>, pages 1286â€“1298, Online. Association for Computational Linguistics.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Connection to RLHF derivation</h2>
<div class="ltx_para" id="A1.p1">
<p class="ltx_p" id="A1.p1.1">If we take the target distribution to have the following form:</p>
</div>
<div class="ltx_para" id="A1.p2">
<table class="ltx_equation ltx_eqn_table" id="A1.E14">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\pi(y|x)=\frac{1}{Z(x)}p_{LM}(y|x)\exp\Bigg{(}\frac{r(x,y)}{\beta}\Bigg{)}," class="ltx_Math" display="block" id="A1.E14.m1.5"><semantics id="A1.E14.m1.5a"><mrow id="A1.E14.m1.5.5.1" xref="A1.E14.m1.5.5.1.1.cmml"><mrow id="A1.E14.m1.5.5.1.1" xref="A1.E14.m1.5.5.1.1.cmml"><mrow id="A1.E14.m1.5.5.1.1.1" xref="A1.E14.m1.5.5.1.1.1.cmml"><mi id="A1.E14.m1.5.5.1.1.1.3" xref="A1.E14.m1.5.5.1.1.1.3.cmml">Ï€</mi><mo id="A1.E14.m1.5.5.1.1.1.2" xref="A1.E14.m1.5.5.1.1.1.2.cmml">â¢</mo><mrow id="A1.E14.m1.5.5.1.1.1.1.1" xref="A1.E14.m1.5.5.1.1.1.1.1.1.cmml"><mo id="A1.E14.m1.5.5.1.1.1.1.1.2" stretchy="false" xref="A1.E14.m1.5.5.1.1.1.1.1.1.cmml">(</mo><mrow id="A1.E14.m1.5.5.1.1.1.1.1.1" xref="A1.E14.m1.5.5.1.1.1.1.1.1.cmml"><mi id="A1.E14.m1.5.5.1.1.1.1.1.1.2" xref="A1.E14.m1.5.5.1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="A1.E14.m1.5.5.1.1.1.1.1.1.1" xref="A1.E14.m1.5.5.1.1.1.1.1.1.1.cmml">|</mo><mi id="A1.E14.m1.5.5.1.1.1.1.1.1.3" xref="A1.E14.m1.5.5.1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="A1.E14.m1.5.5.1.1.1.1.1.3" stretchy="false" xref="A1.E14.m1.5.5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="A1.E14.m1.5.5.1.1.3" xref="A1.E14.m1.5.5.1.1.3.cmml">=</mo><mrow id="A1.E14.m1.5.5.1.1.2" xref="A1.E14.m1.5.5.1.1.2.cmml"><mfrac id="A1.E14.m1.1.1" xref="A1.E14.m1.1.1.cmml"><mn id="A1.E14.m1.1.1.3" xref="A1.E14.m1.1.1.3.cmml">1</mn><mrow id="A1.E14.m1.1.1.1" xref="A1.E14.m1.1.1.1.cmml"><mi id="A1.E14.m1.1.1.1.3" xref="A1.E14.m1.1.1.1.3.cmml">Z</mi><mo id="A1.E14.m1.1.1.1.2" xref="A1.E14.m1.1.1.1.2.cmml">â¢</mo><mrow id="A1.E14.m1.1.1.1.4.2" xref="A1.E14.m1.1.1.1.cmml"><mo id="A1.E14.m1.1.1.1.4.2.1" stretchy="false" xref="A1.E14.m1.1.1.1.cmml">(</mo><mi id="A1.E14.m1.1.1.1.1" xref="A1.E14.m1.1.1.1.1.cmml">x</mi><mo id="A1.E14.m1.1.1.1.4.2.2" stretchy="false" xref="A1.E14.m1.1.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="A1.E14.m1.5.5.1.1.2.2" xref="A1.E14.m1.5.5.1.1.2.2.cmml">â¢</mo><msub id="A1.E14.m1.5.5.1.1.2.3" xref="A1.E14.m1.5.5.1.1.2.3.cmml"><mi id="A1.E14.m1.5.5.1.1.2.3.2" xref="A1.E14.m1.5.5.1.1.2.3.2.cmml">p</mi><mrow id="A1.E14.m1.5.5.1.1.2.3.3" xref="A1.E14.m1.5.5.1.1.2.3.3.cmml"><mi id="A1.E14.m1.5.5.1.1.2.3.3.2" xref="A1.E14.m1.5.5.1.1.2.3.3.2.cmml">L</mi><mo id="A1.E14.m1.5.5.1.1.2.3.3.1" xref="A1.E14.m1.5.5.1.1.2.3.3.1.cmml">â¢</mo><mi id="A1.E14.m1.5.5.1.1.2.3.3.3" xref="A1.E14.m1.5.5.1.1.2.3.3.3.cmml">M</mi></mrow></msub><mo id="A1.E14.m1.5.5.1.1.2.2a" xref="A1.E14.m1.5.5.1.1.2.2.cmml">â¢</mo><mrow id="A1.E14.m1.5.5.1.1.2.1.1" xref="A1.E14.m1.5.5.1.1.2.1.1.1.cmml"><mo id="A1.E14.m1.5.5.1.1.2.1.1.2" stretchy="false" xref="A1.E14.m1.5.5.1.1.2.1.1.1.cmml">(</mo><mrow id="A1.E14.m1.5.5.1.1.2.1.1.1" xref="A1.E14.m1.5.5.1.1.2.1.1.1.cmml"><mi id="A1.E14.m1.5.5.1.1.2.1.1.1.2" xref="A1.E14.m1.5.5.1.1.2.1.1.1.2.cmml">y</mi><mo fence="false" id="A1.E14.m1.5.5.1.1.2.1.1.1.1" xref="A1.E14.m1.5.5.1.1.2.1.1.1.1.cmml">|</mo><mi id="A1.E14.m1.5.5.1.1.2.1.1.1.3" xref="A1.E14.m1.5.5.1.1.2.1.1.1.3.cmml">x</mi></mrow><mo id="A1.E14.m1.5.5.1.1.2.1.1.3" stretchy="false" xref="A1.E14.m1.5.5.1.1.2.1.1.1.cmml">)</mo></mrow><mo id="A1.E14.m1.5.5.1.1.2.2b" lspace="0.167em" xref="A1.E14.m1.5.5.1.1.2.2.cmml">â¢</mo><mrow id="A1.E14.m1.5.5.1.1.2.4.2" xref="A1.E14.m1.5.5.1.1.2.4.1.cmml"><mi id="A1.E14.m1.4.4" xref="A1.E14.m1.4.4.cmml">exp</mi><mo id="A1.E14.m1.5.5.1.1.2.4.2a" xref="A1.E14.m1.5.5.1.1.2.4.1.cmml">â¡</mo><mrow id="A1.E14.m1.5.5.1.1.2.4.2.1" xref="A1.E14.m1.5.5.1.1.2.4.1.cmml"><mo id="A1.E14.m1.5.5.1.1.2.4.2.1.1" maxsize="260%" minsize="260%" xref="A1.E14.m1.5.5.1.1.2.4.1.cmml">(</mo><mfrac id="A1.E14.m1.3.3" xref="A1.E14.m1.3.3.cmml"><mrow id="A1.E14.m1.3.3.2" xref="A1.E14.m1.3.3.2.cmml"><mi id="A1.E14.m1.3.3.2.4" xref="A1.E14.m1.3.3.2.4.cmml">r</mi><mo id="A1.E14.m1.3.3.2.3" xref="A1.E14.m1.3.3.2.3.cmml">â¢</mo><mrow id="A1.E14.m1.3.3.2.5.2" xref="A1.E14.m1.3.3.2.5.1.cmml"><mo id="A1.E14.m1.3.3.2.5.2.1" stretchy="false" xref="A1.E14.m1.3.3.2.5.1.cmml">(</mo><mi id="A1.E14.m1.2.2.1.1" xref="A1.E14.m1.2.2.1.1.cmml">x</mi><mo id="A1.E14.m1.3.3.2.5.2.2" xref="A1.E14.m1.3.3.2.5.1.cmml">,</mo><mi id="A1.E14.m1.3.3.2.2" xref="A1.E14.m1.3.3.2.2.cmml">y</mi><mo id="A1.E14.m1.3.3.2.5.2.3" stretchy="false" xref="A1.E14.m1.3.3.2.5.1.cmml">)</mo></mrow></mrow><mi id="A1.E14.m1.3.3.4" xref="A1.E14.m1.3.3.4.cmml">Î²</mi></mfrac><mo id="A1.E14.m1.5.5.1.1.2.4.2.1.2" maxsize="260%" minsize="260%" xref="A1.E14.m1.5.5.1.1.2.4.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="A1.E14.m1.5.5.1.2" xref="A1.E14.m1.5.5.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="A1.E14.m1.5b"><apply id="A1.E14.m1.5.5.1.1.cmml" xref="A1.E14.m1.5.5.1"><eq id="A1.E14.m1.5.5.1.1.3.cmml" xref="A1.E14.m1.5.5.1.1.3"></eq><apply id="A1.E14.m1.5.5.1.1.1.cmml" xref="A1.E14.m1.5.5.1.1.1"><times id="A1.E14.m1.5.5.1.1.1.2.cmml" xref="A1.E14.m1.5.5.1.1.1.2"></times><ci id="A1.E14.m1.5.5.1.1.1.3.cmml" xref="A1.E14.m1.5.5.1.1.1.3">ğœ‹</ci><apply id="A1.E14.m1.5.5.1.1.1.1.1.1.cmml" xref="A1.E14.m1.5.5.1.1.1.1.1"><csymbol cd="latexml" id="A1.E14.m1.5.5.1.1.1.1.1.1.1.cmml" xref="A1.E14.m1.5.5.1.1.1.1.1.1.1">conditional</csymbol><ci id="A1.E14.m1.5.5.1.1.1.1.1.1.2.cmml" xref="A1.E14.m1.5.5.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="A1.E14.m1.5.5.1.1.1.1.1.1.3.cmml" xref="A1.E14.m1.5.5.1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="A1.E14.m1.5.5.1.1.2.cmml" xref="A1.E14.m1.5.5.1.1.2"><times id="A1.E14.m1.5.5.1.1.2.2.cmml" xref="A1.E14.m1.5.5.1.1.2.2"></times><apply id="A1.E14.m1.1.1.cmml" xref="A1.E14.m1.1.1"><divide id="A1.E14.m1.1.1.2.cmml" xref="A1.E14.m1.1.1"></divide><cn id="A1.E14.m1.1.1.3.cmml" type="integer" xref="A1.E14.m1.1.1.3">1</cn><apply id="A1.E14.m1.1.1.1.cmml" xref="A1.E14.m1.1.1.1"><times id="A1.E14.m1.1.1.1.2.cmml" xref="A1.E14.m1.1.1.1.2"></times><ci id="A1.E14.m1.1.1.1.3.cmml" xref="A1.E14.m1.1.1.1.3">ğ‘</ci><ci id="A1.E14.m1.1.1.1.1.cmml" xref="A1.E14.m1.1.1.1.1">ğ‘¥</ci></apply></apply><apply id="A1.E14.m1.5.5.1.1.2.3.cmml" xref="A1.E14.m1.5.5.1.1.2.3"><csymbol cd="ambiguous" id="A1.E14.m1.5.5.1.1.2.3.1.cmml" xref="A1.E14.m1.5.5.1.1.2.3">subscript</csymbol><ci id="A1.E14.m1.5.5.1.1.2.3.2.cmml" xref="A1.E14.m1.5.5.1.1.2.3.2">ğ‘</ci><apply id="A1.E14.m1.5.5.1.1.2.3.3.cmml" xref="A1.E14.m1.5.5.1.1.2.3.3"><times id="A1.E14.m1.5.5.1.1.2.3.3.1.cmml" xref="A1.E14.m1.5.5.1.1.2.3.3.1"></times><ci id="A1.E14.m1.5.5.1.1.2.3.3.2.cmml" xref="A1.E14.m1.5.5.1.1.2.3.3.2">ğ¿</ci><ci id="A1.E14.m1.5.5.1.1.2.3.3.3.cmml" xref="A1.E14.m1.5.5.1.1.2.3.3.3">ğ‘€</ci></apply></apply><apply id="A1.E14.m1.5.5.1.1.2.1.1.1.cmml" xref="A1.E14.m1.5.5.1.1.2.1.1"><csymbol cd="latexml" id="A1.E14.m1.5.5.1.1.2.1.1.1.1.cmml" xref="A1.E14.m1.5.5.1.1.2.1.1.1.1">conditional</csymbol><ci id="A1.E14.m1.5.5.1.1.2.1.1.1.2.cmml" xref="A1.E14.m1.5.5.1.1.2.1.1.1.2">ğ‘¦</ci><ci id="A1.E14.m1.5.5.1.1.2.1.1.1.3.cmml" xref="A1.E14.m1.5.5.1.1.2.1.1.1.3">ğ‘¥</ci></apply><apply id="A1.E14.m1.5.5.1.1.2.4.1.cmml" xref="A1.E14.m1.5.5.1.1.2.4.2"><exp id="A1.E14.m1.4.4.cmml" xref="A1.E14.m1.4.4"></exp><apply id="A1.E14.m1.3.3.cmml" xref="A1.E14.m1.3.3"><divide id="A1.E14.m1.3.3.3.cmml" xref="A1.E14.m1.3.3"></divide><apply id="A1.E14.m1.3.3.2.cmml" xref="A1.E14.m1.3.3.2"><times id="A1.E14.m1.3.3.2.3.cmml" xref="A1.E14.m1.3.3.2.3"></times><ci id="A1.E14.m1.3.3.2.4.cmml" xref="A1.E14.m1.3.3.2.4">ğ‘Ÿ</ci><interval closure="open" id="A1.E14.m1.3.3.2.5.1.cmml" xref="A1.E14.m1.3.3.2.5.2"><ci id="A1.E14.m1.2.2.1.1.cmml" xref="A1.E14.m1.2.2.1.1">ğ‘¥</ci><ci id="A1.E14.m1.3.3.2.2.cmml" xref="A1.E14.m1.3.3.2.2">ğ‘¦</ci></interval></apply><ci id="A1.E14.m1.3.3.4.cmml" xref="A1.E14.m1.3.3.4">ğ›½</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.E14.m1.5c">\pi(y|x)=\frac{1}{Z(x)}p_{LM}(y|x)\exp\Bigg{(}\frac{r(x,y)}{\beta}\Bigg{)},</annotation><annotation encoding="application/x-llamapun" id="A1.E14.m1.5d">italic_Ï€ ( italic_y | italic_x ) = divide start_ARG 1 end_ARG start_ARG italic_Z ( italic_x ) end_ARG italic_p start_POSTSUBSCRIPT italic_L italic_M end_POSTSUBSCRIPT ( italic_y | italic_x ) roman_exp ( divide start_ARG italic_r ( italic_x , italic_y ) end_ARG start_ARG italic_Î² end_ARG ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(14)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="A1.p2.1">then the likelihood ratio becomes :</p>
<table class="ltx_equation ltx_eqn_table" id="A1.E15">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\frac{\pi(y|x)}{\pi(y^{t}|x)}=\exp\Big{(}\frac{r(x,y)-r(x,y^{t})}{\beta}\Big{)%
}\frac{p_{LM}(y_{\geq i}|y^{t}_{&lt;i},x)}{p_{LM}(y^{t}_{\geq i}|y^{t}_{&lt;i},x)}." class="ltx_Math" display="block" id="A1.E15.m1.12"><semantics id="A1.E15.m1.12a"><mrow id="A1.E15.m1.12.12.1" xref="A1.E15.m1.12.12.1.1.cmml"><mrow id="A1.E15.m1.12.12.1.1" xref="A1.E15.m1.12.12.1.1.cmml"><mfrac id="A1.E15.m1.2.2" xref="A1.E15.m1.2.2.cmml"><mrow id="A1.E15.m1.1.1.1" xref="A1.E15.m1.1.1.1.cmml"><mi id="A1.E15.m1.1.1.1.3" xref="A1.E15.m1.1.1.1.3.cmml">Ï€</mi><mo id="A1.E15.m1.1.1.1.2" xref="A1.E15.m1.1.1.1.2.cmml">â¢</mo><mrow id="A1.E15.m1.1.1.1.1.1" xref="A1.E15.m1.1.1.1.1.1.1.cmml"><mo id="A1.E15.m1.1.1.1.1.1.2" stretchy="false" xref="A1.E15.m1.1.1.1.1.1.1.cmml">(</mo><mrow id="A1.E15.m1.1.1.1.1.1.1" xref="A1.E15.m1.1.1.1.1.1.1.cmml"><mi id="A1.E15.m1.1.1.1.1.1.1.2" xref="A1.E15.m1.1.1.1.1.1.1.2.cmml">y</mi><mo fence="false" id="A1.E15.m1.1.1.1.1.1.1.1" xref="A1.E15.m1.1.1.1.1.1.1.1.cmml">|</mo><mi id="A1.E15.m1.1.1.1.1.1.1.3" xref="A1.E15.m1.1.1.1.1.1.1.3.cmml">x</mi></mrow><mo id="A1.E15.m1.1.1.1.1.1.3" stretchy="false" xref="A1.E15.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="A1.E15.m1.2.2.2" xref="A1.E15.m1.2.2.2.cmml"><mi id="A1.E15.m1.2.2.2.3" xref="A1.E15.m1.2.2.2.3.cmml">Ï€</mi><mo id="A1.E15.m1.2.2.2.2" xref="A1.E15.m1.2.2.2.2.cmml">â¢</mo><mrow id="A1.E15.m1.2.2.2.1.1" xref="A1.E15.m1.2.2.2.1.1.1.cmml"><mo id="A1.E15.m1.2.2.2.1.1.2" stretchy="false" xref="A1.E15.m1.2.2.2.1.1.1.cmml">(</mo><mrow id="A1.E15.m1.2.2.2.1.1.1" xref="A1.E15.m1.2.2.2.1.1.1.cmml"><msup id="A1.E15.m1.2.2.2.1.1.1.2" xref="A1.E15.m1.2.2.2.1.1.1.2.cmml"><mi id="A1.E15.m1.2.2.2.1.1.1.2.2" xref="A1.E15.m1.2.2.2.1.1.1.2.2.cmml">y</mi><mi id="A1.E15.m1.2.2.2.1.1.1.2.3" xref="A1.E15.m1.2.2.2.1.1.1.2.3.cmml">t</mi></msup><mo fence="false" id="A1.E15.m1.2.2.2.1.1.1.1" xref="A1.E15.m1.2.2.2.1.1.1.1.cmml">|</mo><mi id="A1.E15.m1.2.2.2.1.1.1.3" xref="A1.E15.m1.2.2.2.1.1.1.3.cmml">x</mi></mrow><mo id="A1.E15.m1.2.2.2.1.1.3" stretchy="false" xref="A1.E15.m1.2.2.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="A1.E15.m1.12.12.1.1.1" xref="A1.E15.m1.12.12.1.1.1.cmml">=</mo><mrow id="A1.E15.m1.12.12.1.1.2" xref="A1.E15.m1.12.12.1.1.2.cmml"><mrow id="A1.E15.m1.12.12.1.1.2.2.2" xref="A1.E15.m1.12.12.1.1.2.2.1.cmml"><mi id="A1.E15.m1.11.11" xref="A1.E15.m1.11.11.cmml">exp</mi><mo id="A1.E15.m1.12.12.1.1.2.2.2a" xref="A1.E15.m1.12.12.1.1.2.2.1.cmml">â¡</mo><mrow id="A1.E15.m1.12.12.1.1.2.2.2.1" xref="A1.E15.m1.12.12.1.1.2.2.1.cmml"><mo id="A1.E15.m1.12.12.1.1.2.2.2.1.1" maxsize="160%" minsize="160%" xref="A1.E15.m1.12.12.1.1.2.2.1.cmml">(</mo><mfrac id="A1.E15.m1.6.6" xref="A1.E15.m1.6.6.cmml"><mrow id="A1.E15.m1.6.6.4" xref="A1.E15.m1.6.6.4.cmml"><mrow id="A1.E15.m1.6.6.4.6" xref="A1.E15.m1.6.6.4.6.cmml"><mi id="A1.E15.m1.6.6.4.6.2" xref="A1.E15.m1.6.6.4.6.2.cmml">r</mi><mo id="A1.E15.m1.6.6.4.6.1" xref="A1.E15.m1.6.6.4.6.1.cmml">â¢</mo><mrow id="A1.E15.m1.6.6.4.6.3.2" xref="A1.E15.m1.6.6.4.6.3.1.cmml"><mo id="A1.E15.m1.6.6.4.6.3.2.1" stretchy="false" xref="A1.E15.m1.6.6.4.6.3.1.cmml">(</mo><mi id="A1.E15.m1.3.3.1.1" xref="A1.E15.m1.3.3.1.1.cmml">x</mi><mo id="A1.E15.m1.6.6.4.6.3.2.2" xref="A1.E15.m1.6.6.4.6.3.1.cmml">,</mo><mi id="A1.E15.m1.4.4.2.2" xref="A1.E15.m1.4.4.2.2.cmml">y</mi><mo id="A1.E15.m1.6.6.4.6.3.2.3" stretchy="false" xref="A1.E15.m1.6.6.4.6.3.1.cmml">)</mo></mrow></mrow><mo id="A1.E15.m1.6.6.4.5" xref="A1.E15.m1.6.6.4.5.cmml">âˆ’</mo><mrow id="A1.E15.m1.6.6.4.4" xref="A1.E15.m1.6.6.4.4.cmml"><mi id="A1.E15.m1.6.6.4.4.3" xref="A1.E15.m1.6.6.4.4.3.cmml">r</mi><mo id="A1.E15.m1.6.6.4.4.2" xref="A1.E15.m1.6.6.4.4.2.cmml">â¢</mo><mrow id="A1.E15.m1.6.6.4.4.1.1" xref="A1.E15.m1.6.6.4.4.1.2.cmml"><mo id="A1.E15.m1.6.6.4.4.1.1.2" stretchy="false" xref="A1.E15.m1.6.6.4.4.1.2.cmml">(</mo><mi id="A1.E15.m1.5.5.3.3" xref="A1.E15.m1.5.5.3.3.cmml">x</mi><mo id="A1.E15.m1.6.6.4.4.1.1.3" xref="A1.E15.m1.6.6.4.4.1.2.cmml">,</mo><msup id="A1.E15.m1.6.6.4.4.1.1.1" xref="A1.E15.m1.6.6.4.4.1.1.1.cmml"><mi id="A1.E15.m1.6.6.4.4.1.1.1.2" xref="A1.E15.m1.6.6.4.4.1.1.1.2.cmml">y</mi><mi id="A1.E15.m1.6.6.4.4.1.1.1.3" xref="A1.E15.m1.6.6.4.4.1.1.1.3.cmml">t</mi></msup><mo id="A1.E15.m1.6.6.4.4.1.1.4" stretchy="false" xref="A1.E15.m1.6.6.4.4.1.2.cmml">)</mo></mrow></mrow></mrow><mi id="A1.E15.m1.6.6.6" xref="A1.E15.m1.6.6.6.cmml">Î²</mi></mfrac><mo id="A1.E15.m1.12.12.1.1.2.2.2.1.2" maxsize="160%" minsize="160%" xref="A1.E15.m1.12.12.1.1.2.2.1.cmml">)</mo></mrow></mrow><mo id="A1.E15.m1.12.12.1.1.2.1" xref="A1.E15.m1.12.12.1.1.2.1.cmml">â¢</mo><mfrac id="A1.E15.m1.10.10" xref="A1.E15.m1.10.10.cmml"><mrow id="A1.E15.m1.8.8.2" xref="A1.E15.m1.8.8.2.cmml"><msub id="A1.E15.m1.8.8.2.4" xref="A1.E15.m1.8.8.2.4.cmml"><mi id="A1.E15.m1.8.8.2.4.2" xref="A1.E15.m1.8.8.2.4.2.cmml">p</mi><mrow id="A1.E15.m1.8.8.2.4.3" xref="A1.E15.m1.8.8.2.4.3.cmml"><mi id="A1.E15.m1.8.8.2.4.3.2" xref="A1.E15.m1.8.8.2.4.3.2.cmml">L</mi><mo id="A1.E15.m1.8.8.2.4.3.1" xref="A1.E15.m1.8.8.2.4.3.1.cmml">â¢</mo><mi id="A1.E15.m1.8.8.2.4.3.3" xref="A1.E15.m1.8.8.2.4.3.3.cmml">M</mi></mrow></msub><mo id="A1.E15.m1.8.8.2.3" xref="A1.E15.m1.8.8.2.3.cmml">â¢</mo><mrow id="A1.E15.m1.8.8.2.2.1" xref="A1.E15.m1.8.8.2.2.1.1.cmml"><mo id="A1.E15.m1.8.8.2.2.1.2" stretchy="false" xref="A1.E15.m1.8.8.2.2.1.1.cmml">(</mo><mrow id="A1.E15.m1.8.8.2.2.1.1" xref="A1.E15.m1.8.8.2.2.1.1.cmml"><msub id="A1.E15.m1.8.8.2.2.1.1.3" xref="A1.E15.m1.8.8.2.2.1.1.3.cmml"><mi id="A1.E15.m1.8.8.2.2.1.1.3.2" xref="A1.E15.m1.8.8.2.2.1.1.3.2.cmml">y</mi><mrow id="A1.E15.m1.8.8.2.2.1.1.3.3" xref="A1.E15.m1.8.8.2.2.1.1.3.3.cmml"><mi id="A1.E15.m1.8.8.2.2.1.1.3.3.2" xref="A1.E15.m1.8.8.2.2.1.1.3.3.2.cmml"></mi><mo id="A1.E15.m1.8.8.2.2.1.1.3.3.1" xref="A1.E15.m1.8.8.2.2.1.1.3.3.1.cmml">â‰¥</mo><mi id="A1.E15.m1.8.8.2.2.1.1.3.3.3" xref="A1.E15.m1.8.8.2.2.1.1.3.3.3.cmml">i</mi></mrow></msub><mo fence="false" id="A1.E15.m1.8.8.2.2.1.1.2" xref="A1.E15.m1.8.8.2.2.1.1.2.cmml">|</mo><mrow id="A1.E15.m1.8.8.2.2.1.1.1.1" xref="A1.E15.m1.8.8.2.2.1.1.1.2.cmml"><msubsup id="A1.E15.m1.8.8.2.2.1.1.1.1.1" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.cmml"><mi id="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.2" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.2.cmml">y</mi><mrow id="A1.E15.m1.8.8.2.2.1.1.1.1.1.3" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.cmml"><mi id="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.2" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.2.cmml"></mi><mo id="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.1" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.3" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.3.cmml">i</mi></mrow><mi id="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.3" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.3.cmml">t</mi></msubsup><mo id="A1.E15.m1.8.8.2.2.1.1.1.1.2" xref="A1.E15.m1.8.8.2.2.1.1.1.2.cmml">,</mo><mi id="A1.E15.m1.7.7.1.1" xref="A1.E15.m1.7.7.1.1.cmml">x</mi></mrow></mrow><mo id="A1.E15.m1.8.8.2.2.1.3" stretchy="false" xref="A1.E15.m1.8.8.2.2.1.1.cmml">)</mo></mrow></mrow><mrow id="A1.E15.m1.10.10.4" xref="A1.E15.m1.10.10.4.cmml"><msub id="A1.E15.m1.10.10.4.4" xref="A1.E15.m1.10.10.4.4.cmml"><mi id="A1.E15.m1.10.10.4.4.2" xref="A1.E15.m1.10.10.4.4.2.cmml">p</mi><mrow id="A1.E15.m1.10.10.4.4.3" xref="A1.E15.m1.10.10.4.4.3.cmml"><mi id="A1.E15.m1.10.10.4.4.3.2" xref="A1.E15.m1.10.10.4.4.3.2.cmml">L</mi><mo id="A1.E15.m1.10.10.4.4.3.1" xref="A1.E15.m1.10.10.4.4.3.1.cmml">â¢</mo><mi id="A1.E15.m1.10.10.4.4.3.3" xref="A1.E15.m1.10.10.4.4.3.3.cmml">M</mi></mrow></msub><mo id="A1.E15.m1.10.10.4.3" xref="A1.E15.m1.10.10.4.3.cmml">â¢</mo><mrow id="A1.E15.m1.10.10.4.2.1" xref="A1.E15.m1.10.10.4.2.1.1.cmml"><mo id="A1.E15.m1.10.10.4.2.1.2" stretchy="false" xref="A1.E15.m1.10.10.4.2.1.1.cmml">(</mo><mrow id="A1.E15.m1.10.10.4.2.1.1" xref="A1.E15.m1.10.10.4.2.1.1.cmml"><msubsup id="A1.E15.m1.10.10.4.2.1.1.3" xref="A1.E15.m1.10.10.4.2.1.1.3.cmml"><mi id="A1.E15.m1.10.10.4.2.1.1.3.2.2" xref="A1.E15.m1.10.10.4.2.1.1.3.2.2.cmml">y</mi><mrow id="A1.E15.m1.10.10.4.2.1.1.3.3" xref="A1.E15.m1.10.10.4.2.1.1.3.3.cmml"><mi id="A1.E15.m1.10.10.4.2.1.1.3.3.2" xref="A1.E15.m1.10.10.4.2.1.1.3.3.2.cmml"></mi><mo id="A1.E15.m1.10.10.4.2.1.1.3.3.1" xref="A1.E15.m1.10.10.4.2.1.1.3.3.1.cmml">â‰¥</mo><mi id="A1.E15.m1.10.10.4.2.1.1.3.3.3" xref="A1.E15.m1.10.10.4.2.1.1.3.3.3.cmml">i</mi></mrow><mi id="A1.E15.m1.10.10.4.2.1.1.3.2.3" xref="A1.E15.m1.10.10.4.2.1.1.3.2.3.cmml">t</mi></msubsup><mo fence="false" id="A1.E15.m1.10.10.4.2.1.1.2" xref="A1.E15.m1.10.10.4.2.1.1.2.cmml">|</mo><mrow id="A1.E15.m1.10.10.4.2.1.1.1.1" xref="A1.E15.m1.10.10.4.2.1.1.1.2.cmml"><msubsup id="A1.E15.m1.10.10.4.2.1.1.1.1.1" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.cmml"><mi id="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.2" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.2.cmml">y</mi><mrow id="A1.E15.m1.10.10.4.2.1.1.1.1.1.3" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.cmml"><mi id="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.2" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.2.cmml"></mi><mo id="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.1" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.3" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.3.cmml">i</mi></mrow><mi id="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.3" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.3.cmml">t</mi></msubsup><mo id="A1.E15.m1.10.10.4.2.1.1.1.1.2" xref="A1.E15.m1.10.10.4.2.1.1.1.2.cmml">,</mo><mi id="A1.E15.m1.9.9.3.1" xref="A1.E15.m1.9.9.3.1.cmml">x</mi></mrow></mrow><mo id="A1.E15.m1.10.10.4.2.1.3" stretchy="false" xref="A1.E15.m1.10.10.4.2.1.1.cmml">)</mo></mrow></mrow></mfrac></mrow></mrow><mo id="A1.E15.m1.12.12.1.2" lspace="0em" xref="A1.E15.m1.12.12.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="A1.E15.m1.12b"><apply id="A1.E15.m1.12.12.1.1.cmml" xref="A1.E15.m1.12.12.1"><eq id="A1.E15.m1.12.12.1.1.1.cmml" xref="A1.E15.m1.12.12.1.1.1"></eq><apply id="A1.E15.m1.2.2.cmml" xref="A1.E15.m1.2.2"><divide id="A1.E15.m1.2.2.3.cmml" xref="A1.E15.m1.2.2"></divide><apply id="A1.E15.m1.1.1.1.cmml" xref="A1.E15.m1.1.1.1"><times id="A1.E15.m1.1.1.1.2.cmml" xref="A1.E15.m1.1.1.1.2"></times><ci id="A1.E15.m1.1.1.1.3.cmml" xref="A1.E15.m1.1.1.1.3">ğœ‹</ci><apply id="A1.E15.m1.1.1.1.1.1.1.cmml" xref="A1.E15.m1.1.1.1.1.1"><csymbol cd="latexml" id="A1.E15.m1.1.1.1.1.1.1.1.cmml" xref="A1.E15.m1.1.1.1.1.1.1.1">conditional</csymbol><ci id="A1.E15.m1.1.1.1.1.1.1.2.cmml" xref="A1.E15.m1.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="A1.E15.m1.1.1.1.1.1.1.3.cmml" xref="A1.E15.m1.1.1.1.1.1.1.3">ğ‘¥</ci></apply></apply><apply id="A1.E15.m1.2.2.2.cmml" xref="A1.E15.m1.2.2.2"><times id="A1.E15.m1.2.2.2.2.cmml" xref="A1.E15.m1.2.2.2.2"></times><ci id="A1.E15.m1.2.2.2.3.cmml" xref="A1.E15.m1.2.2.2.3">ğœ‹</ci><apply id="A1.E15.m1.2.2.2.1.1.1.cmml" xref="A1.E15.m1.2.2.2.1.1"><csymbol cd="latexml" id="A1.E15.m1.2.2.2.1.1.1.1.cmml" xref="A1.E15.m1.2.2.2.1.1.1.1">conditional</csymbol><apply id="A1.E15.m1.2.2.2.1.1.1.2.cmml" xref="A1.E15.m1.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="A1.E15.m1.2.2.2.1.1.1.2.1.cmml" xref="A1.E15.m1.2.2.2.1.1.1.2">superscript</csymbol><ci id="A1.E15.m1.2.2.2.1.1.1.2.2.cmml" xref="A1.E15.m1.2.2.2.1.1.1.2.2">ğ‘¦</ci><ci id="A1.E15.m1.2.2.2.1.1.1.2.3.cmml" xref="A1.E15.m1.2.2.2.1.1.1.2.3">ğ‘¡</ci></apply><ci id="A1.E15.m1.2.2.2.1.1.1.3.cmml" xref="A1.E15.m1.2.2.2.1.1.1.3">ğ‘¥</ci></apply></apply></apply><apply id="A1.E15.m1.12.12.1.1.2.cmml" xref="A1.E15.m1.12.12.1.1.2"><times id="A1.E15.m1.12.12.1.1.2.1.cmml" xref="A1.E15.m1.12.12.1.1.2.1"></times><apply id="A1.E15.m1.12.12.1.1.2.2.1.cmml" xref="A1.E15.m1.12.12.1.1.2.2.2"><exp id="A1.E15.m1.11.11.cmml" xref="A1.E15.m1.11.11"></exp><apply id="A1.E15.m1.6.6.cmml" xref="A1.E15.m1.6.6"><divide id="A1.E15.m1.6.6.5.cmml" xref="A1.E15.m1.6.6"></divide><apply id="A1.E15.m1.6.6.4.cmml" xref="A1.E15.m1.6.6.4"><minus id="A1.E15.m1.6.6.4.5.cmml" xref="A1.E15.m1.6.6.4.5"></minus><apply id="A1.E15.m1.6.6.4.6.cmml" xref="A1.E15.m1.6.6.4.6"><times id="A1.E15.m1.6.6.4.6.1.cmml" xref="A1.E15.m1.6.6.4.6.1"></times><ci id="A1.E15.m1.6.6.4.6.2.cmml" xref="A1.E15.m1.6.6.4.6.2">ğ‘Ÿ</ci><interval closure="open" id="A1.E15.m1.6.6.4.6.3.1.cmml" xref="A1.E15.m1.6.6.4.6.3.2"><ci id="A1.E15.m1.3.3.1.1.cmml" xref="A1.E15.m1.3.3.1.1">ğ‘¥</ci><ci id="A1.E15.m1.4.4.2.2.cmml" xref="A1.E15.m1.4.4.2.2">ğ‘¦</ci></interval></apply><apply id="A1.E15.m1.6.6.4.4.cmml" xref="A1.E15.m1.6.6.4.4"><times id="A1.E15.m1.6.6.4.4.2.cmml" xref="A1.E15.m1.6.6.4.4.2"></times><ci id="A1.E15.m1.6.6.4.4.3.cmml" xref="A1.E15.m1.6.6.4.4.3">ğ‘Ÿ</ci><interval closure="open" id="A1.E15.m1.6.6.4.4.1.2.cmml" xref="A1.E15.m1.6.6.4.4.1.1"><ci id="A1.E15.m1.5.5.3.3.cmml" xref="A1.E15.m1.5.5.3.3">ğ‘¥</ci><apply id="A1.E15.m1.6.6.4.4.1.1.1.cmml" xref="A1.E15.m1.6.6.4.4.1.1.1"><csymbol cd="ambiguous" id="A1.E15.m1.6.6.4.4.1.1.1.1.cmml" xref="A1.E15.m1.6.6.4.4.1.1.1">superscript</csymbol><ci id="A1.E15.m1.6.6.4.4.1.1.1.2.cmml" xref="A1.E15.m1.6.6.4.4.1.1.1.2">ğ‘¦</ci><ci id="A1.E15.m1.6.6.4.4.1.1.1.3.cmml" xref="A1.E15.m1.6.6.4.4.1.1.1.3">ğ‘¡</ci></apply></interval></apply></apply><ci id="A1.E15.m1.6.6.6.cmml" xref="A1.E15.m1.6.6.6">ğ›½</ci></apply></apply><apply id="A1.E15.m1.10.10.cmml" xref="A1.E15.m1.10.10"><divide id="A1.E15.m1.10.10.5.cmml" xref="A1.E15.m1.10.10"></divide><apply id="A1.E15.m1.8.8.2.cmml" xref="A1.E15.m1.8.8.2"><times id="A1.E15.m1.8.8.2.3.cmml" xref="A1.E15.m1.8.8.2.3"></times><apply id="A1.E15.m1.8.8.2.4.cmml" xref="A1.E15.m1.8.8.2.4"><csymbol cd="ambiguous" id="A1.E15.m1.8.8.2.4.1.cmml" xref="A1.E15.m1.8.8.2.4">subscript</csymbol><ci id="A1.E15.m1.8.8.2.4.2.cmml" xref="A1.E15.m1.8.8.2.4.2">ğ‘</ci><apply id="A1.E15.m1.8.8.2.4.3.cmml" xref="A1.E15.m1.8.8.2.4.3"><times id="A1.E15.m1.8.8.2.4.3.1.cmml" xref="A1.E15.m1.8.8.2.4.3.1"></times><ci id="A1.E15.m1.8.8.2.4.3.2.cmml" xref="A1.E15.m1.8.8.2.4.3.2">ğ¿</ci><ci id="A1.E15.m1.8.8.2.4.3.3.cmml" xref="A1.E15.m1.8.8.2.4.3.3">ğ‘€</ci></apply></apply><apply id="A1.E15.m1.8.8.2.2.1.1.cmml" xref="A1.E15.m1.8.8.2.2.1"><csymbol cd="latexml" id="A1.E15.m1.8.8.2.2.1.1.2.cmml" xref="A1.E15.m1.8.8.2.2.1.1.2">conditional</csymbol><apply id="A1.E15.m1.8.8.2.2.1.1.3.cmml" xref="A1.E15.m1.8.8.2.2.1.1.3"><csymbol cd="ambiguous" id="A1.E15.m1.8.8.2.2.1.1.3.1.cmml" xref="A1.E15.m1.8.8.2.2.1.1.3">subscript</csymbol><ci id="A1.E15.m1.8.8.2.2.1.1.3.2.cmml" xref="A1.E15.m1.8.8.2.2.1.1.3.2">ğ‘¦</ci><apply id="A1.E15.m1.8.8.2.2.1.1.3.3.cmml" xref="A1.E15.m1.8.8.2.2.1.1.3.3"><geq id="A1.E15.m1.8.8.2.2.1.1.3.3.1.cmml" xref="A1.E15.m1.8.8.2.2.1.1.3.3.1"></geq><csymbol cd="latexml" id="A1.E15.m1.8.8.2.2.1.1.3.3.2.cmml" xref="A1.E15.m1.8.8.2.2.1.1.3.3.2">absent</csymbol><ci id="A1.E15.m1.8.8.2.2.1.1.3.3.3.cmml" xref="A1.E15.m1.8.8.2.2.1.1.3.3.3">ğ‘–</ci></apply></apply><list id="A1.E15.m1.8.8.2.2.1.1.1.2.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1"><apply id="A1.E15.m1.8.8.2.2.1.1.1.1.1.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E15.m1.8.8.2.2.1.1.1.1.1.1.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1">subscript</csymbol><apply id="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.1.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1">superscript</csymbol><ci id="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.2.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.2">ğ‘¦</ci><ci id="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.3.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.2.3">ğ‘¡</ci></apply><apply id="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.3"><lt id="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.1.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.2.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.2">absent</csymbol><ci id="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.3.cmml" xref="A1.E15.m1.8.8.2.2.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="A1.E15.m1.7.7.1.1.cmml" xref="A1.E15.m1.7.7.1.1">ğ‘¥</ci></list></apply></apply><apply id="A1.E15.m1.10.10.4.cmml" xref="A1.E15.m1.10.10.4"><times id="A1.E15.m1.10.10.4.3.cmml" xref="A1.E15.m1.10.10.4.3"></times><apply id="A1.E15.m1.10.10.4.4.cmml" xref="A1.E15.m1.10.10.4.4"><csymbol cd="ambiguous" id="A1.E15.m1.10.10.4.4.1.cmml" xref="A1.E15.m1.10.10.4.4">subscript</csymbol><ci id="A1.E15.m1.10.10.4.4.2.cmml" xref="A1.E15.m1.10.10.4.4.2">ğ‘</ci><apply id="A1.E15.m1.10.10.4.4.3.cmml" xref="A1.E15.m1.10.10.4.4.3"><times id="A1.E15.m1.10.10.4.4.3.1.cmml" xref="A1.E15.m1.10.10.4.4.3.1"></times><ci id="A1.E15.m1.10.10.4.4.3.2.cmml" xref="A1.E15.m1.10.10.4.4.3.2">ğ¿</ci><ci id="A1.E15.m1.10.10.4.4.3.3.cmml" xref="A1.E15.m1.10.10.4.4.3.3">ğ‘€</ci></apply></apply><apply id="A1.E15.m1.10.10.4.2.1.1.cmml" xref="A1.E15.m1.10.10.4.2.1"><csymbol cd="latexml" id="A1.E15.m1.10.10.4.2.1.1.2.cmml" xref="A1.E15.m1.10.10.4.2.1.1.2">conditional</csymbol><apply id="A1.E15.m1.10.10.4.2.1.1.3.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3"><csymbol cd="ambiguous" id="A1.E15.m1.10.10.4.2.1.1.3.1.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3">subscript</csymbol><apply id="A1.E15.m1.10.10.4.2.1.1.3.2.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3"><csymbol cd="ambiguous" id="A1.E15.m1.10.10.4.2.1.1.3.2.1.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3">superscript</csymbol><ci id="A1.E15.m1.10.10.4.2.1.1.3.2.2.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3.2.2">ğ‘¦</ci><ci id="A1.E15.m1.10.10.4.2.1.1.3.2.3.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3.2.3">ğ‘¡</ci></apply><apply id="A1.E15.m1.10.10.4.2.1.1.3.3.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3.3"><geq id="A1.E15.m1.10.10.4.2.1.1.3.3.1.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3.3.1"></geq><csymbol cd="latexml" id="A1.E15.m1.10.10.4.2.1.1.3.3.2.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3.3.2">absent</csymbol><ci id="A1.E15.m1.10.10.4.2.1.1.3.3.3.cmml" xref="A1.E15.m1.10.10.4.2.1.1.3.3.3">ğ‘–</ci></apply></apply><list id="A1.E15.m1.10.10.4.2.1.1.1.2.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1"><apply id="A1.E15.m1.10.10.4.2.1.1.1.1.1.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E15.m1.10.10.4.2.1.1.1.1.1.1.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1">subscript</csymbol><apply id="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.1.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1">superscript</csymbol><ci id="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.2.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.2">ğ‘¦</ci><ci id="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.3.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.2.3">ğ‘¡</ci></apply><apply id="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.3"><lt id="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.1.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.2.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.2">absent</csymbol><ci id="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.3.cmml" xref="A1.E15.m1.10.10.4.2.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="A1.E15.m1.9.9.3.1.cmml" xref="A1.E15.m1.9.9.3.1">ğ‘¥</ci></list></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.E15.m1.12c">\frac{\pi(y|x)}{\pi(y^{t}|x)}=\exp\Big{(}\frac{r(x,y)-r(x,y^{t})}{\beta}\Big{)%
}\frac{p_{LM}(y_{\geq i}|y^{t}_{&lt;i},x)}{p_{LM}(y^{t}_{\geq i}|y^{t}_{&lt;i},x)}.</annotation><annotation encoding="application/x-llamapun" id="A1.E15.m1.12d">divide start_ARG italic_Ï€ ( italic_y | italic_x ) end_ARG start_ARG italic_Ï€ ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_x ) end_ARG = roman_exp ( divide start_ARG italic_r ( italic_x , italic_y ) - italic_r ( italic_x , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) end_ARG start_ARG italic_Î² end_ARG ) divide start_ARG italic_p start_POSTSUBSCRIPT italic_L italic_M end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) end_ARG start_ARG italic_p start_POSTSUBSCRIPT italic_L italic_M end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) end_ARG .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(15)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="A1.p3">
<p class="ltx_p" id="A1.p3.1">Note that the target log ratio contains the inverse of the probability of returning, <span class="ltx_text ltx_font_italic" id="A1.p3.1.1">i.e.</span>:</p>
<table class="ltx_equation ltx_eqn_table" id="A1.E16">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\frac{q(y^{t}|y,x,i)}{q(y|y^{t},x,i)}=\frac{p_{LM}(y^{t}_{\geq i}|y^{t}_{&lt;i},x%
)}{p_{LM}(y_{\geq i}|y^{t}_{&lt;i},x)}," class="ltx_Math" display="block" id="A1.E16.m1.12"><semantics id="A1.E16.m1.12a"><mrow id="A1.E16.m1.12.12.1" xref="A1.E16.m1.12.12.1.1.cmml"><mrow id="A1.E16.m1.12.12.1.1" xref="A1.E16.m1.12.12.1.1.cmml"><mfrac id="A1.E16.m1.7.7" xref="A1.E16.m1.7.7.cmml"><mrow id="A1.E16.m1.4.4.4" xref="A1.E16.m1.4.4.4.cmml"><mi id="A1.E16.m1.4.4.4.6" xref="A1.E16.m1.4.4.4.6.cmml">q</mi><mo id="A1.E16.m1.4.4.4.5" xref="A1.E16.m1.4.4.4.5.cmml">â¢</mo><mrow id="A1.E16.m1.4.4.4.4.1" xref="A1.E16.m1.4.4.4.4.1.1.cmml"><mo id="A1.E16.m1.4.4.4.4.1.2" stretchy="false" xref="A1.E16.m1.4.4.4.4.1.1.cmml">(</mo><mrow id="A1.E16.m1.4.4.4.4.1.1" xref="A1.E16.m1.4.4.4.4.1.1.cmml"><msup id="A1.E16.m1.4.4.4.4.1.1.2" xref="A1.E16.m1.4.4.4.4.1.1.2.cmml"><mi id="A1.E16.m1.4.4.4.4.1.1.2.2" xref="A1.E16.m1.4.4.4.4.1.1.2.2.cmml">y</mi><mi id="A1.E16.m1.4.4.4.4.1.1.2.3" xref="A1.E16.m1.4.4.4.4.1.1.2.3.cmml">t</mi></msup><mo fence="false" id="A1.E16.m1.4.4.4.4.1.1.1" xref="A1.E16.m1.4.4.4.4.1.1.1.cmml">|</mo><mrow id="A1.E16.m1.4.4.4.4.1.1.3.2" xref="A1.E16.m1.4.4.4.4.1.1.3.1.cmml"><mi id="A1.E16.m1.1.1.1.1" xref="A1.E16.m1.1.1.1.1.cmml">y</mi><mo id="A1.E16.m1.4.4.4.4.1.1.3.2.1" xref="A1.E16.m1.4.4.4.4.1.1.3.1.cmml">,</mo><mi id="A1.E16.m1.2.2.2.2" xref="A1.E16.m1.2.2.2.2.cmml">x</mi><mo id="A1.E16.m1.4.4.4.4.1.1.3.2.2" xref="A1.E16.m1.4.4.4.4.1.1.3.1.cmml">,</mo><mi id="A1.E16.m1.3.3.3.3" xref="A1.E16.m1.3.3.3.3.cmml">i</mi></mrow></mrow><mo id="A1.E16.m1.4.4.4.4.1.3" stretchy="false" xref="A1.E16.m1.4.4.4.4.1.1.cmml">)</mo></mrow></mrow><mrow id="A1.E16.m1.7.7.7" xref="A1.E16.m1.7.7.7.cmml"><mi id="A1.E16.m1.7.7.7.5" xref="A1.E16.m1.7.7.7.5.cmml">q</mi><mo id="A1.E16.m1.7.7.7.4" xref="A1.E16.m1.7.7.7.4.cmml">â¢</mo><mrow id="A1.E16.m1.7.7.7.3.1" xref="A1.E16.m1.7.7.7.3.1.1.cmml"><mo id="A1.E16.m1.7.7.7.3.1.2" stretchy="false" xref="A1.E16.m1.7.7.7.3.1.1.cmml">(</mo><mrow id="A1.E16.m1.7.7.7.3.1.1" xref="A1.E16.m1.7.7.7.3.1.1.cmml"><mi id="A1.E16.m1.7.7.7.3.1.1.3" xref="A1.E16.m1.7.7.7.3.1.1.3.cmml">y</mi><mo fence="false" id="A1.E16.m1.7.7.7.3.1.1.2" xref="A1.E16.m1.7.7.7.3.1.1.2.cmml">|</mo><mrow id="A1.E16.m1.7.7.7.3.1.1.1.1" xref="A1.E16.m1.7.7.7.3.1.1.1.2.cmml"><msup id="A1.E16.m1.7.7.7.3.1.1.1.1.1" xref="A1.E16.m1.7.7.7.3.1.1.1.1.1.cmml"><mi id="A1.E16.m1.7.7.7.3.1.1.1.1.1.2" xref="A1.E16.m1.7.7.7.3.1.1.1.1.1.2.cmml">y</mi><mi id="A1.E16.m1.7.7.7.3.1.1.1.1.1.3" xref="A1.E16.m1.7.7.7.3.1.1.1.1.1.3.cmml">t</mi></msup><mo id="A1.E16.m1.7.7.7.3.1.1.1.1.2" xref="A1.E16.m1.7.7.7.3.1.1.1.2.cmml">,</mo><mi id="A1.E16.m1.5.5.5.1" xref="A1.E16.m1.5.5.5.1.cmml">x</mi><mo id="A1.E16.m1.7.7.7.3.1.1.1.1.3" xref="A1.E16.m1.7.7.7.3.1.1.1.2.cmml">,</mo><mi id="A1.E16.m1.6.6.6.2" xref="A1.E16.m1.6.6.6.2.cmml">i</mi></mrow></mrow><mo id="A1.E16.m1.7.7.7.3.1.3" stretchy="false" xref="A1.E16.m1.7.7.7.3.1.1.cmml">)</mo></mrow></mrow></mfrac><mo id="A1.E16.m1.12.12.1.1.1" xref="A1.E16.m1.12.12.1.1.1.cmml">=</mo><mfrac id="A1.E16.m1.11.11" xref="A1.E16.m1.11.11.cmml"><mrow id="A1.E16.m1.9.9.2" xref="A1.E16.m1.9.9.2.cmml"><msub id="A1.E16.m1.9.9.2.4" xref="A1.E16.m1.9.9.2.4.cmml"><mi id="A1.E16.m1.9.9.2.4.2" xref="A1.E16.m1.9.9.2.4.2.cmml">p</mi><mrow id="A1.E16.m1.9.9.2.4.3" xref="A1.E16.m1.9.9.2.4.3.cmml"><mi id="A1.E16.m1.9.9.2.4.3.2" xref="A1.E16.m1.9.9.2.4.3.2.cmml">L</mi><mo id="A1.E16.m1.9.9.2.4.3.1" xref="A1.E16.m1.9.9.2.4.3.1.cmml">â¢</mo><mi id="A1.E16.m1.9.9.2.4.3.3" xref="A1.E16.m1.9.9.2.4.3.3.cmml">M</mi></mrow></msub><mo id="A1.E16.m1.9.9.2.3" xref="A1.E16.m1.9.9.2.3.cmml">â¢</mo><mrow id="A1.E16.m1.9.9.2.2.1" xref="A1.E16.m1.9.9.2.2.1.1.cmml"><mo id="A1.E16.m1.9.9.2.2.1.2" stretchy="false" xref="A1.E16.m1.9.9.2.2.1.1.cmml">(</mo><mrow id="A1.E16.m1.9.9.2.2.1.1" xref="A1.E16.m1.9.9.2.2.1.1.cmml"><msubsup id="A1.E16.m1.9.9.2.2.1.1.3" xref="A1.E16.m1.9.9.2.2.1.1.3.cmml"><mi id="A1.E16.m1.9.9.2.2.1.1.3.2.2" xref="A1.E16.m1.9.9.2.2.1.1.3.2.2.cmml">y</mi><mrow id="A1.E16.m1.9.9.2.2.1.1.3.3" xref="A1.E16.m1.9.9.2.2.1.1.3.3.cmml"><mi id="A1.E16.m1.9.9.2.2.1.1.3.3.2" xref="A1.E16.m1.9.9.2.2.1.1.3.3.2.cmml"></mi><mo id="A1.E16.m1.9.9.2.2.1.1.3.3.1" xref="A1.E16.m1.9.9.2.2.1.1.3.3.1.cmml">â‰¥</mo><mi id="A1.E16.m1.9.9.2.2.1.1.3.3.3" xref="A1.E16.m1.9.9.2.2.1.1.3.3.3.cmml">i</mi></mrow><mi id="A1.E16.m1.9.9.2.2.1.1.3.2.3" xref="A1.E16.m1.9.9.2.2.1.1.3.2.3.cmml">t</mi></msubsup><mo fence="false" id="A1.E16.m1.9.9.2.2.1.1.2" xref="A1.E16.m1.9.9.2.2.1.1.2.cmml">|</mo><mrow id="A1.E16.m1.9.9.2.2.1.1.1.1" xref="A1.E16.m1.9.9.2.2.1.1.1.2.cmml"><msubsup id="A1.E16.m1.9.9.2.2.1.1.1.1.1" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.cmml"><mi id="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.2" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.2.cmml">y</mi><mrow id="A1.E16.m1.9.9.2.2.1.1.1.1.1.3" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.cmml"><mi id="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.2" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.2.cmml"></mi><mo id="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.1" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.3" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.3.cmml">i</mi></mrow><mi id="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.3" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.3.cmml">t</mi></msubsup><mo id="A1.E16.m1.9.9.2.2.1.1.1.1.2" xref="A1.E16.m1.9.9.2.2.1.1.1.2.cmml">,</mo><mi id="A1.E16.m1.8.8.1.1" xref="A1.E16.m1.8.8.1.1.cmml">x</mi></mrow></mrow><mo id="A1.E16.m1.9.9.2.2.1.3" stretchy="false" xref="A1.E16.m1.9.9.2.2.1.1.cmml">)</mo></mrow></mrow><mrow id="A1.E16.m1.11.11.4" xref="A1.E16.m1.11.11.4.cmml"><msub id="A1.E16.m1.11.11.4.4" xref="A1.E16.m1.11.11.4.4.cmml"><mi id="A1.E16.m1.11.11.4.4.2" xref="A1.E16.m1.11.11.4.4.2.cmml">p</mi><mrow id="A1.E16.m1.11.11.4.4.3" xref="A1.E16.m1.11.11.4.4.3.cmml"><mi id="A1.E16.m1.11.11.4.4.3.2" xref="A1.E16.m1.11.11.4.4.3.2.cmml">L</mi><mo id="A1.E16.m1.11.11.4.4.3.1" xref="A1.E16.m1.11.11.4.4.3.1.cmml">â¢</mo><mi id="A1.E16.m1.11.11.4.4.3.3" xref="A1.E16.m1.11.11.4.4.3.3.cmml">M</mi></mrow></msub><mo id="A1.E16.m1.11.11.4.3" xref="A1.E16.m1.11.11.4.3.cmml">â¢</mo><mrow id="A1.E16.m1.11.11.4.2.1" xref="A1.E16.m1.11.11.4.2.1.1.cmml"><mo id="A1.E16.m1.11.11.4.2.1.2" stretchy="false" xref="A1.E16.m1.11.11.4.2.1.1.cmml">(</mo><mrow id="A1.E16.m1.11.11.4.2.1.1" xref="A1.E16.m1.11.11.4.2.1.1.cmml"><msub id="A1.E16.m1.11.11.4.2.1.1.3" xref="A1.E16.m1.11.11.4.2.1.1.3.cmml"><mi id="A1.E16.m1.11.11.4.2.1.1.3.2" xref="A1.E16.m1.11.11.4.2.1.1.3.2.cmml">y</mi><mrow id="A1.E16.m1.11.11.4.2.1.1.3.3" xref="A1.E16.m1.11.11.4.2.1.1.3.3.cmml"><mi id="A1.E16.m1.11.11.4.2.1.1.3.3.2" xref="A1.E16.m1.11.11.4.2.1.1.3.3.2.cmml"></mi><mo id="A1.E16.m1.11.11.4.2.1.1.3.3.1" xref="A1.E16.m1.11.11.4.2.1.1.3.3.1.cmml">â‰¥</mo><mi id="A1.E16.m1.11.11.4.2.1.1.3.3.3" xref="A1.E16.m1.11.11.4.2.1.1.3.3.3.cmml">i</mi></mrow></msub><mo fence="false" id="A1.E16.m1.11.11.4.2.1.1.2" xref="A1.E16.m1.11.11.4.2.1.1.2.cmml">|</mo><mrow id="A1.E16.m1.11.11.4.2.1.1.1.1" xref="A1.E16.m1.11.11.4.2.1.1.1.2.cmml"><msubsup id="A1.E16.m1.11.11.4.2.1.1.1.1.1" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.cmml"><mi id="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.2" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.2.cmml">y</mi><mrow id="A1.E16.m1.11.11.4.2.1.1.1.1.1.3" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.cmml"><mi id="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.2" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.2.cmml"></mi><mo id="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.1" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.1.cmml">&lt;</mo><mi id="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.3" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.3.cmml">i</mi></mrow><mi id="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.3" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.3.cmml">t</mi></msubsup><mo id="A1.E16.m1.11.11.4.2.1.1.1.1.2" xref="A1.E16.m1.11.11.4.2.1.1.1.2.cmml">,</mo><mi id="A1.E16.m1.10.10.3.1" xref="A1.E16.m1.10.10.3.1.cmml">x</mi></mrow></mrow><mo id="A1.E16.m1.11.11.4.2.1.3" stretchy="false" xref="A1.E16.m1.11.11.4.2.1.1.cmml">)</mo></mrow></mrow></mfrac></mrow><mo id="A1.E16.m1.12.12.1.2" xref="A1.E16.m1.12.12.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="A1.E16.m1.12b"><apply id="A1.E16.m1.12.12.1.1.cmml" xref="A1.E16.m1.12.12.1"><eq id="A1.E16.m1.12.12.1.1.1.cmml" xref="A1.E16.m1.12.12.1.1.1"></eq><apply id="A1.E16.m1.7.7.cmml" xref="A1.E16.m1.7.7"><divide id="A1.E16.m1.7.7.8.cmml" xref="A1.E16.m1.7.7"></divide><apply id="A1.E16.m1.4.4.4.cmml" xref="A1.E16.m1.4.4.4"><times id="A1.E16.m1.4.4.4.5.cmml" xref="A1.E16.m1.4.4.4.5"></times><ci id="A1.E16.m1.4.4.4.6.cmml" xref="A1.E16.m1.4.4.4.6">ğ‘</ci><apply id="A1.E16.m1.4.4.4.4.1.1.cmml" xref="A1.E16.m1.4.4.4.4.1"><csymbol cd="latexml" id="A1.E16.m1.4.4.4.4.1.1.1.cmml" xref="A1.E16.m1.4.4.4.4.1.1.1">conditional</csymbol><apply id="A1.E16.m1.4.4.4.4.1.1.2.cmml" xref="A1.E16.m1.4.4.4.4.1.1.2"><csymbol cd="ambiguous" id="A1.E16.m1.4.4.4.4.1.1.2.1.cmml" xref="A1.E16.m1.4.4.4.4.1.1.2">superscript</csymbol><ci id="A1.E16.m1.4.4.4.4.1.1.2.2.cmml" xref="A1.E16.m1.4.4.4.4.1.1.2.2">ğ‘¦</ci><ci id="A1.E16.m1.4.4.4.4.1.1.2.3.cmml" xref="A1.E16.m1.4.4.4.4.1.1.2.3">ğ‘¡</ci></apply><list id="A1.E16.m1.4.4.4.4.1.1.3.1.cmml" xref="A1.E16.m1.4.4.4.4.1.1.3.2"><ci id="A1.E16.m1.1.1.1.1.cmml" xref="A1.E16.m1.1.1.1.1">ğ‘¦</ci><ci id="A1.E16.m1.2.2.2.2.cmml" xref="A1.E16.m1.2.2.2.2">ğ‘¥</ci><ci id="A1.E16.m1.3.3.3.3.cmml" xref="A1.E16.m1.3.3.3.3">ğ‘–</ci></list></apply></apply><apply id="A1.E16.m1.7.7.7.cmml" xref="A1.E16.m1.7.7.7"><times id="A1.E16.m1.7.7.7.4.cmml" xref="A1.E16.m1.7.7.7.4"></times><ci id="A1.E16.m1.7.7.7.5.cmml" xref="A1.E16.m1.7.7.7.5">ğ‘</ci><apply id="A1.E16.m1.7.7.7.3.1.1.cmml" xref="A1.E16.m1.7.7.7.3.1"><csymbol cd="latexml" id="A1.E16.m1.7.7.7.3.1.1.2.cmml" xref="A1.E16.m1.7.7.7.3.1.1.2">conditional</csymbol><ci id="A1.E16.m1.7.7.7.3.1.1.3.cmml" xref="A1.E16.m1.7.7.7.3.1.1.3">ğ‘¦</ci><list id="A1.E16.m1.7.7.7.3.1.1.1.2.cmml" xref="A1.E16.m1.7.7.7.3.1.1.1.1"><apply id="A1.E16.m1.7.7.7.3.1.1.1.1.1.cmml" xref="A1.E16.m1.7.7.7.3.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E16.m1.7.7.7.3.1.1.1.1.1.1.cmml" xref="A1.E16.m1.7.7.7.3.1.1.1.1.1">superscript</csymbol><ci id="A1.E16.m1.7.7.7.3.1.1.1.1.1.2.cmml" xref="A1.E16.m1.7.7.7.3.1.1.1.1.1.2">ğ‘¦</ci><ci id="A1.E16.m1.7.7.7.3.1.1.1.1.1.3.cmml" xref="A1.E16.m1.7.7.7.3.1.1.1.1.1.3">ğ‘¡</ci></apply><ci id="A1.E16.m1.5.5.5.1.cmml" xref="A1.E16.m1.5.5.5.1">ğ‘¥</ci><ci id="A1.E16.m1.6.6.6.2.cmml" xref="A1.E16.m1.6.6.6.2">ğ‘–</ci></list></apply></apply></apply><apply id="A1.E16.m1.11.11.cmml" xref="A1.E16.m1.11.11"><divide id="A1.E16.m1.11.11.5.cmml" xref="A1.E16.m1.11.11"></divide><apply id="A1.E16.m1.9.9.2.cmml" xref="A1.E16.m1.9.9.2"><times id="A1.E16.m1.9.9.2.3.cmml" xref="A1.E16.m1.9.9.2.3"></times><apply id="A1.E16.m1.9.9.2.4.cmml" xref="A1.E16.m1.9.9.2.4"><csymbol cd="ambiguous" id="A1.E16.m1.9.9.2.4.1.cmml" xref="A1.E16.m1.9.9.2.4">subscript</csymbol><ci id="A1.E16.m1.9.9.2.4.2.cmml" xref="A1.E16.m1.9.9.2.4.2">ğ‘</ci><apply id="A1.E16.m1.9.9.2.4.3.cmml" xref="A1.E16.m1.9.9.2.4.3"><times id="A1.E16.m1.9.9.2.4.3.1.cmml" xref="A1.E16.m1.9.9.2.4.3.1"></times><ci id="A1.E16.m1.9.9.2.4.3.2.cmml" xref="A1.E16.m1.9.9.2.4.3.2">ğ¿</ci><ci id="A1.E16.m1.9.9.2.4.3.3.cmml" xref="A1.E16.m1.9.9.2.4.3.3">ğ‘€</ci></apply></apply><apply id="A1.E16.m1.9.9.2.2.1.1.cmml" xref="A1.E16.m1.9.9.2.2.1"><csymbol cd="latexml" id="A1.E16.m1.9.9.2.2.1.1.2.cmml" xref="A1.E16.m1.9.9.2.2.1.1.2">conditional</csymbol><apply id="A1.E16.m1.9.9.2.2.1.1.3.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3"><csymbol cd="ambiguous" id="A1.E16.m1.9.9.2.2.1.1.3.1.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3">subscript</csymbol><apply id="A1.E16.m1.9.9.2.2.1.1.3.2.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3"><csymbol cd="ambiguous" id="A1.E16.m1.9.9.2.2.1.1.3.2.1.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3">superscript</csymbol><ci id="A1.E16.m1.9.9.2.2.1.1.3.2.2.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3.2.2">ğ‘¦</ci><ci id="A1.E16.m1.9.9.2.2.1.1.3.2.3.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3.2.3">ğ‘¡</ci></apply><apply id="A1.E16.m1.9.9.2.2.1.1.3.3.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3.3"><geq id="A1.E16.m1.9.9.2.2.1.1.3.3.1.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3.3.1"></geq><csymbol cd="latexml" id="A1.E16.m1.9.9.2.2.1.1.3.3.2.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3.3.2">absent</csymbol><ci id="A1.E16.m1.9.9.2.2.1.1.3.3.3.cmml" xref="A1.E16.m1.9.9.2.2.1.1.3.3.3">ğ‘–</ci></apply></apply><list id="A1.E16.m1.9.9.2.2.1.1.1.2.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1"><apply id="A1.E16.m1.9.9.2.2.1.1.1.1.1.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E16.m1.9.9.2.2.1.1.1.1.1.1.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1">subscript</csymbol><apply id="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.1.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1">superscript</csymbol><ci id="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.2.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.2">ğ‘¦</ci><ci id="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.3.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.2.3">ğ‘¡</ci></apply><apply id="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.3"><lt id="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.1.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.2.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.2">absent</csymbol><ci id="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.3.cmml" xref="A1.E16.m1.9.9.2.2.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="A1.E16.m1.8.8.1.1.cmml" xref="A1.E16.m1.8.8.1.1">ğ‘¥</ci></list></apply></apply><apply id="A1.E16.m1.11.11.4.cmml" xref="A1.E16.m1.11.11.4"><times id="A1.E16.m1.11.11.4.3.cmml" xref="A1.E16.m1.11.11.4.3"></times><apply id="A1.E16.m1.11.11.4.4.cmml" xref="A1.E16.m1.11.11.4.4"><csymbol cd="ambiguous" id="A1.E16.m1.11.11.4.4.1.cmml" xref="A1.E16.m1.11.11.4.4">subscript</csymbol><ci id="A1.E16.m1.11.11.4.4.2.cmml" xref="A1.E16.m1.11.11.4.4.2">ğ‘</ci><apply id="A1.E16.m1.11.11.4.4.3.cmml" xref="A1.E16.m1.11.11.4.4.3"><times id="A1.E16.m1.11.11.4.4.3.1.cmml" xref="A1.E16.m1.11.11.4.4.3.1"></times><ci id="A1.E16.m1.11.11.4.4.3.2.cmml" xref="A1.E16.m1.11.11.4.4.3.2">ğ¿</ci><ci id="A1.E16.m1.11.11.4.4.3.3.cmml" xref="A1.E16.m1.11.11.4.4.3.3">ğ‘€</ci></apply></apply><apply id="A1.E16.m1.11.11.4.2.1.1.cmml" xref="A1.E16.m1.11.11.4.2.1"><csymbol cd="latexml" id="A1.E16.m1.11.11.4.2.1.1.2.cmml" xref="A1.E16.m1.11.11.4.2.1.1.2">conditional</csymbol><apply id="A1.E16.m1.11.11.4.2.1.1.3.cmml" xref="A1.E16.m1.11.11.4.2.1.1.3"><csymbol cd="ambiguous" id="A1.E16.m1.11.11.4.2.1.1.3.1.cmml" xref="A1.E16.m1.11.11.4.2.1.1.3">subscript</csymbol><ci id="A1.E16.m1.11.11.4.2.1.1.3.2.cmml" xref="A1.E16.m1.11.11.4.2.1.1.3.2">ğ‘¦</ci><apply id="A1.E16.m1.11.11.4.2.1.1.3.3.cmml" xref="A1.E16.m1.11.11.4.2.1.1.3.3"><geq id="A1.E16.m1.11.11.4.2.1.1.3.3.1.cmml" xref="A1.E16.m1.11.11.4.2.1.1.3.3.1"></geq><csymbol cd="latexml" id="A1.E16.m1.11.11.4.2.1.1.3.3.2.cmml" xref="A1.E16.m1.11.11.4.2.1.1.3.3.2">absent</csymbol><ci id="A1.E16.m1.11.11.4.2.1.1.3.3.3.cmml" xref="A1.E16.m1.11.11.4.2.1.1.3.3.3">ğ‘–</ci></apply></apply><list id="A1.E16.m1.11.11.4.2.1.1.1.2.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1"><apply id="A1.E16.m1.11.11.4.2.1.1.1.1.1.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E16.m1.11.11.4.2.1.1.1.1.1.1.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1">subscript</csymbol><apply id="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.1.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1">superscript</csymbol><ci id="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.2.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.2">ğ‘¦</ci><ci id="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.3.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.2.3">ğ‘¡</ci></apply><apply id="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.3"><lt id="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.1.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.1"></lt><csymbol cd="latexml" id="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.2.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.2">absent</csymbol><ci id="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.3.cmml" xref="A1.E16.m1.11.11.4.2.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><ci id="A1.E16.m1.10.10.3.1.cmml" xref="A1.E16.m1.10.10.3.1">ğ‘¥</ci></list></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.E16.m1.12c">\frac{q(y^{t}|y,x,i)}{q(y|y^{t},x,i)}=\frac{p_{LM}(y^{t}_{\geq i}|y^{t}_{&lt;i},x%
)}{p_{LM}(y_{\geq i}|y^{t}_{&lt;i},x)},</annotation><annotation encoding="application/x-llamapun" id="A1.E16.m1.12d">divide start_ARG italic_q ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT | italic_y , italic_x , italic_i ) end_ARG start_ARG italic_q ( italic_y | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT , italic_x , italic_i ) end_ARG = divide start_ARG italic_p start_POSTSUBSCRIPT italic_L italic_M end_POSTSUBSCRIPT ( italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) end_ARG start_ARG italic_p start_POSTSUBSCRIPT italic_L italic_M end_POSTSUBSCRIPT ( italic_y start_POSTSUBSCRIPT â‰¥ italic_i end_POSTSUBSCRIPT | italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT start_POSTSUBSCRIPT &lt; italic_i end_POSTSUBSCRIPT , italic_x ) end_ARG ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(16)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="A1.p3.2">this allows simplifying the criterion as follows:</p>
</div>
<div class="ltx_para" id="A1.p4">
<table class="ltx_equation ltx_eqn_table" id="A1.E17">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\alpha_{\beta}(y,y^{t})=\max\left\{1,\exp\left(\frac{r\left(x,y\right)-r\left(%
x,y^{t}\right)}{\beta}\right)\frac{q(i|n)}{q(i|n^{t})}\right\}." class="ltx_Math" display="block" id="A1.E17.m1.11"><semantics id="A1.E17.m1.11a"><mrow id="A1.E17.m1.11.11.1" xref="A1.E17.m1.11.11.1.1.cmml"><mrow id="A1.E17.m1.11.11.1.1" xref="A1.E17.m1.11.11.1.1.cmml"><mrow id="A1.E17.m1.11.11.1.1.1" xref="A1.E17.m1.11.11.1.1.1.cmml"><msub id="A1.E17.m1.11.11.1.1.1.3" xref="A1.E17.m1.11.11.1.1.1.3.cmml"><mi id="A1.E17.m1.11.11.1.1.1.3.2" xref="A1.E17.m1.11.11.1.1.1.3.2.cmml">Î±</mi><mi id="A1.E17.m1.11.11.1.1.1.3.3" xref="A1.E17.m1.11.11.1.1.1.3.3.cmml">Î²</mi></msub><mo id="A1.E17.m1.11.11.1.1.1.2" xref="A1.E17.m1.11.11.1.1.1.2.cmml">â¢</mo><mrow id="A1.E17.m1.11.11.1.1.1.1.1" xref="A1.E17.m1.11.11.1.1.1.1.2.cmml"><mo id="A1.E17.m1.11.11.1.1.1.1.1.2" stretchy="false" xref="A1.E17.m1.11.11.1.1.1.1.2.cmml">(</mo><mi id="A1.E17.m1.7.7" xref="A1.E17.m1.7.7.cmml">y</mi><mo id="A1.E17.m1.11.11.1.1.1.1.1.3" xref="A1.E17.m1.11.11.1.1.1.1.2.cmml">,</mo><msup id="A1.E17.m1.11.11.1.1.1.1.1.1" xref="A1.E17.m1.11.11.1.1.1.1.1.1.cmml"><mi id="A1.E17.m1.11.11.1.1.1.1.1.1.2" xref="A1.E17.m1.11.11.1.1.1.1.1.1.2.cmml">y</mi><mi id="A1.E17.m1.11.11.1.1.1.1.1.1.3" xref="A1.E17.m1.11.11.1.1.1.1.1.1.3.cmml">t</mi></msup><mo id="A1.E17.m1.11.11.1.1.1.1.1.4" stretchy="false" xref="A1.E17.m1.11.11.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo id="A1.E17.m1.11.11.1.1.3" xref="A1.E17.m1.11.11.1.1.3.cmml">=</mo><mrow id="A1.E17.m1.11.11.1.1.2.1" xref="A1.E17.m1.11.11.1.1.2.2.cmml"><mi id="A1.E17.m1.9.9" xref="A1.E17.m1.9.9.cmml">max</mi><mo id="A1.E17.m1.11.11.1.1.2.1a" xref="A1.E17.m1.11.11.1.1.2.2.cmml">â¡</mo><mrow id="A1.E17.m1.11.11.1.1.2.1.1" xref="A1.E17.m1.11.11.1.1.2.2.cmml"><mo id="A1.E17.m1.11.11.1.1.2.1.1.2" xref="A1.E17.m1.11.11.1.1.2.2.cmml">{</mo><mn id="A1.E17.m1.10.10" xref="A1.E17.m1.10.10.cmml">1</mn><mo id="A1.E17.m1.11.11.1.1.2.1.1.3" xref="A1.E17.m1.11.11.1.1.2.2.cmml">,</mo><mrow id="A1.E17.m1.11.11.1.1.2.1.1.1" xref="A1.E17.m1.11.11.1.1.2.1.1.1.cmml"><mrow id="A1.E17.m1.11.11.1.1.2.1.1.1.2.2" xref="A1.E17.m1.11.11.1.1.2.1.1.1.2.1.cmml"><mi id="A1.E17.m1.8.8" xref="A1.E17.m1.8.8.cmml">exp</mi><mo id="A1.E17.m1.11.11.1.1.2.1.1.1.2.2a" xref="A1.E17.m1.11.11.1.1.2.1.1.1.2.1.cmml">â¡</mo><mrow id="A1.E17.m1.11.11.1.1.2.1.1.1.2.2.1" xref="A1.E17.m1.11.11.1.1.2.1.1.1.2.1.cmml"><mo id="A1.E17.m1.11.11.1.1.2.1.1.1.2.2.1.1" xref="A1.E17.m1.11.11.1.1.2.1.1.1.2.1.cmml">(</mo><mfrac id="A1.E17.m1.4.4" xref="A1.E17.m1.4.4.cmml"><mrow id="A1.E17.m1.4.4.4" xref="A1.E17.m1.4.4.4.cmml"><mrow id="A1.E17.m1.4.4.4.6" xref="A1.E17.m1.4.4.4.6.cmml"><mi id="A1.E17.m1.4.4.4.6.2" xref="A1.E17.m1.4.4.4.6.2.cmml">r</mi><mo id="A1.E17.m1.4.4.4.6.1" xref="A1.E17.m1.4.4.4.6.1.cmml">â¢</mo><mrow id="A1.E17.m1.4.4.4.6.3.2" xref="A1.E17.m1.4.4.4.6.3.1.cmml"><mo id="A1.E17.m1.4.4.4.6.3.2.1" xref="A1.E17.m1.4.4.4.6.3.1.cmml">(</mo><mi id="A1.E17.m1.1.1.1.1" xref="A1.E17.m1.1.1.1.1.cmml">x</mi><mo id="A1.E17.m1.4.4.4.6.3.2.2" xref="A1.E17.m1.4.4.4.6.3.1.cmml">,</mo><mi id="A1.E17.m1.2.2.2.2" xref="A1.E17.m1.2.2.2.2.cmml">y</mi><mo id="A1.E17.m1.4.4.4.6.3.2.3" xref="A1.E17.m1.4.4.4.6.3.1.cmml">)</mo></mrow></mrow><mo id="A1.E17.m1.4.4.4.5" xref="A1.E17.m1.4.4.4.5.cmml">âˆ’</mo><mrow id="A1.E17.m1.4.4.4.4" xref="A1.E17.m1.4.4.4.4.cmml"><mi id="A1.E17.m1.4.4.4.4.3" xref="A1.E17.m1.4.4.4.4.3.cmml">r</mi><mo id="A1.E17.m1.4.4.4.4.2" xref="A1.E17.m1.4.4.4.4.2.cmml">â¢</mo><mrow id="A1.E17.m1.4.4.4.4.1.1" xref="A1.E17.m1.4.4.4.4.1.2.cmml"><mo id="A1.E17.m1.4.4.4.4.1.1.2" xref="A1.E17.m1.4.4.4.4.1.2.cmml">(</mo><mi id="A1.E17.m1.3.3.3.3" xref="A1.E17.m1.3.3.3.3.cmml">x</mi><mo id="A1.E17.m1.4.4.4.4.1.1.3" xref="A1.E17.m1.4.4.4.4.1.2.cmml">,</mo><msup id="A1.E17.m1.4.4.4.4.1.1.1" xref="A1.E17.m1.4.4.4.4.1.1.1.cmml"><mi id="A1.E17.m1.4.4.4.4.1.1.1.2" xref="A1.E17.m1.4.4.4.4.1.1.1.2.cmml">y</mi><mi id="A1.E17.m1.4.4.4.4.1.1.1.3" xref="A1.E17.m1.4.4.4.4.1.1.1.3.cmml">t</mi></msup><mo id="A1.E17.m1.4.4.4.4.1.1.4" xref="A1.E17.m1.4.4.4.4.1.2.cmml">)</mo></mrow></mrow></mrow><mi id="A1.E17.m1.4.4.6" xref="A1.E17.m1.4.4.6.cmml">Î²</mi></mfrac><mo id="A1.E17.m1.11.11.1.1.2.1.1.1.2.2.1.2" xref="A1.E17.m1.11.11.1.1.2.1.1.1.2.1.cmml">)</mo></mrow></mrow><mo id="A1.E17.m1.11.11.1.1.2.1.1.1.1" xref="A1.E17.m1.11.11.1.1.2.1.1.1.1.cmml">â¢</mo><mfrac id="A1.E17.m1.6.6" xref="A1.E17.m1.6.6.cmml"><mrow id="A1.E17.m1.5.5.1" xref="A1.E17.m1.5.5.1.cmml"><mi id="A1.E17.m1.5.5.1.3" xref="A1.E17.m1.5.5.1.3.cmml">q</mi><mo id="A1.E17.m1.5.5.1.2" xref="A1.E17.m1.5.5.1.2.cmml">â¢</mo><mrow id="A1.E17.m1.5.5.1.1.1" xref="A1.E17.m1.5.5.1.1.1.1.cmml"><mo id="A1.E17.m1.5.5.1.1.1.2" stretchy="false" xref="A1.E17.m1.5.5.1.1.1.1.cmml">(</mo><mrow id="A1.E17.m1.5.5.1.1.1.1" xref="A1.E17.m1.5.5.1.1.1.1.cmml"><mi id="A1.E17.m1.5.5.1.1.1.1.2" xref="A1.E17.m1.5.5.1.1.1.1.2.cmml">i</mi><mo fence="false" id="A1.E17.m1.5.5.1.1.1.1.1" xref="A1.E17.m1.5.5.1.1.1.1.1.cmml">|</mo><mi id="A1.E17.m1.5.5.1.1.1.1.3" xref="A1.E17.m1.5.5.1.1.1.1.3.cmml">n</mi></mrow><mo id="A1.E17.m1.5.5.1.1.1.3" stretchy="false" xref="A1.E17.m1.5.5.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="A1.E17.m1.6.6.2" xref="A1.E17.m1.6.6.2.cmml"><mi id="A1.E17.m1.6.6.2.3" xref="A1.E17.m1.6.6.2.3.cmml">q</mi><mo id="A1.E17.m1.6.6.2.2" xref="A1.E17.m1.6.6.2.2.cmml">â¢</mo><mrow id="A1.E17.m1.6.6.2.1.1" xref="A1.E17.m1.6.6.2.1.1.1.cmml"><mo id="A1.E17.m1.6.6.2.1.1.2" stretchy="false" xref="A1.E17.m1.6.6.2.1.1.1.cmml">(</mo><mrow id="A1.E17.m1.6.6.2.1.1.1" xref="A1.E17.m1.6.6.2.1.1.1.cmml"><mi id="A1.E17.m1.6.6.2.1.1.1.2" xref="A1.E17.m1.6.6.2.1.1.1.2.cmml">i</mi><mo fence="false" id="A1.E17.m1.6.6.2.1.1.1.1" xref="A1.E17.m1.6.6.2.1.1.1.1.cmml">|</mo><msup id="A1.E17.m1.6.6.2.1.1.1.3" xref="A1.E17.m1.6.6.2.1.1.1.3.cmml"><mi id="A1.E17.m1.6.6.2.1.1.1.3.2" xref="A1.E17.m1.6.6.2.1.1.1.3.2.cmml">n</mi><mi id="A1.E17.m1.6.6.2.1.1.1.3.3" xref="A1.E17.m1.6.6.2.1.1.1.3.3.cmml">t</mi></msup></mrow><mo id="A1.E17.m1.6.6.2.1.1.3" stretchy="false" xref="A1.E17.m1.6.6.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac></mrow><mo id="A1.E17.m1.11.11.1.1.2.1.1.4" xref="A1.E17.m1.11.11.1.1.2.2.cmml">}</mo></mrow></mrow></mrow><mo id="A1.E17.m1.11.11.1.2" lspace="0em" xref="A1.E17.m1.11.11.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="A1.E17.m1.11b"><apply id="A1.E17.m1.11.11.1.1.cmml" xref="A1.E17.m1.11.11.1"><eq id="A1.E17.m1.11.11.1.1.3.cmml" xref="A1.E17.m1.11.11.1.1.3"></eq><apply id="A1.E17.m1.11.11.1.1.1.cmml" xref="A1.E17.m1.11.11.1.1.1"><times id="A1.E17.m1.11.11.1.1.1.2.cmml" xref="A1.E17.m1.11.11.1.1.1.2"></times><apply id="A1.E17.m1.11.11.1.1.1.3.cmml" xref="A1.E17.m1.11.11.1.1.1.3"><csymbol cd="ambiguous" id="A1.E17.m1.11.11.1.1.1.3.1.cmml" xref="A1.E17.m1.11.11.1.1.1.3">subscript</csymbol><ci id="A1.E17.m1.11.11.1.1.1.3.2.cmml" xref="A1.E17.m1.11.11.1.1.1.3.2">ğ›¼</ci><ci id="A1.E17.m1.11.11.1.1.1.3.3.cmml" xref="A1.E17.m1.11.11.1.1.1.3.3">ğ›½</ci></apply><interval closure="open" id="A1.E17.m1.11.11.1.1.1.1.2.cmml" xref="A1.E17.m1.11.11.1.1.1.1.1"><ci id="A1.E17.m1.7.7.cmml" xref="A1.E17.m1.7.7">ğ‘¦</ci><apply id="A1.E17.m1.11.11.1.1.1.1.1.1.cmml" xref="A1.E17.m1.11.11.1.1.1.1.1.1"><csymbol cd="ambiguous" id="A1.E17.m1.11.11.1.1.1.1.1.1.1.cmml" xref="A1.E17.m1.11.11.1.1.1.1.1.1">superscript</csymbol><ci id="A1.E17.m1.11.11.1.1.1.1.1.1.2.cmml" xref="A1.E17.m1.11.11.1.1.1.1.1.1.2">ğ‘¦</ci><ci id="A1.E17.m1.11.11.1.1.1.1.1.1.3.cmml" xref="A1.E17.m1.11.11.1.1.1.1.1.1.3">ğ‘¡</ci></apply></interval></apply><apply id="A1.E17.m1.11.11.1.1.2.2.cmml" xref="A1.E17.m1.11.11.1.1.2.1"><max id="A1.E17.m1.9.9.cmml" xref="A1.E17.m1.9.9"></max><cn id="A1.E17.m1.10.10.cmml" type="integer" xref="A1.E17.m1.10.10">1</cn><apply id="A1.E17.m1.11.11.1.1.2.1.1.1.cmml" xref="A1.E17.m1.11.11.1.1.2.1.1.1"><times id="A1.E17.m1.11.11.1.1.2.1.1.1.1.cmml" xref="A1.E17.m1.11.11.1.1.2.1.1.1.1"></times><apply id="A1.E17.m1.11.11.1.1.2.1.1.1.2.1.cmml" xref="A1.E17.m1.11.11.1.1.2.1.1.1.2.2"><exp id="A1.E17.m1.8.8.cmml" xref="A1.E17.m1.8.8"></exp><apply id="A1.E17.m1.4.4.cmml" xref="A1.E17.m1.4.4"><divide id="A1.E17.m1.4.4.5.cmml" xref="A1.E17.m1.4.4"></divide><apply id="A1.E17.m1.4.4.4.cmml" xref="A1.E17.m1.4.4.4"><minus id="A1.E17.m1.4.4.4.5.cmml" xref="A1.E17.m1.4.4.4.5"></minus><apply id="A1.E17.m1.4.4.4.6.cmml" xref="A1.E17.m1.4.4.4.6"><times id="A1.E17.m1.4.4.4.6.1.cmml" xref="A1.E17.m1.4.4.4.6.1"></times><ci id="A1.E17.m1.4.4.4.6.2.cmml" xref="A1.E17.m1.4.4.4.6.2">ğ‘Ÿ</ci><interval closure="open" id="A1.E17.m1.4.4.4.6.3.1.cmml" xref="A1.E17.m1.4.4.4.6.3.2"><ci id="A1.E17.m1.1.1.1.1.cmml" xref="A1.E17.m1.1.1.1.1">ğ‘¥</ci><ci id="A1.E17.m1.2.2.2.2.cmml" xref="A1.E17.m1.2.2.2.2">ğ‘¦</ci></interval></apply><apply id="A1.E17.m1.4.4.4.4.cmml" xref="A1.E17.m1.4.4.4.4"><times id="A1.E17.m1.4.4.4.4.2.cmml" xref="A1.E17.m1.4.4.4.4.2"></times><ci id="A1.E17.m1.4.4.4.4.3.cmml" xref="A1.E17.m1.4.4.4.4.3">ğ‘Ÿ</ci><interval closure="open" id="A1.E17.m1.4.4.4.4.1.2.cmml" xref="A1.E17.m1.4.4.4.4.1.1"><ci id="A1.E17.m1.3.3.3.3.cmml" xref="A1.E17.m1.3.3.3.3">ğ‘¥</ci><apply id="A1.E17.m1.4.4.4.4.1.1.1.cmml" xref="A1.E17.m1.4.4.4.4.1.1.1"><csymbol cd="ambiguous" id="A1.E17.m1.4.4.4.4.1.1.1.1.cmml" xref="A1.E17.m1.4.4.4.4.1.1.1">superscript</csymbol><ci id="A1.E17.m1.4.4.4.4.1.1.1.2.cmml" xref="A1.E17.m1.4.4.4.4.1.1.1.2">ğ‘¦</ci><ci id="A1.E17.m1.4.4.4.4.1.1.1.3.cmml" xref="A1.E17.m1.4.4.4.4.1.1.1.3">ğ‘¡</ci></apply></interval></apply></apply><ci id="A1.E17.m1.4.4.6.cmml" xref="A1.E17.m1.4.4.6">ğ›½</ci></apply></apply><apply id="A1.E17.m1.6.6.cmml" xref="A1.E17.m1.6.6"><divide id="A1.E17.m1.6.6.3.cmml" xref="A1.E17.m1.6.6"></divide><apply id="A1.E17.m1.5.5.1.cmml" xref="A1.E17.m1.5.5.1"><times id="A1.E17.m1.5.5.1.2.cmml" xref="A1.E17.m1.5.5.1.2"></times><ci id="A1.E17.m1.5.5.1.3.cmml" xref="A1.E17.m1.5.5.1.3">ğ‘</ci><apply id="A1.E17.m1.5.5.1.1.1.1.cmml" xref="A1.E17.m1.5.5.1.1.1"><csymbol cd="latexml" id="A1.E17.m1.5.5.1.1.1.1.1.cmml" xref="A1.E17.m1.5.5.1.1.1.1.1">conditional</csymbol><ci id="A1.E17.m1.5.5.1.1.1.1.2.cmml" xref="A1.E17.m1.5.5.1.1.1.1.2">ğ‘–</ci><ci id="A1.E17.m1.5.5.1.1.1.1.3.cmml" xref="A1.E17.m1.5.5.1.1.1.1.3">ğ‘›</ci></apply></apply><apply id="A1.E17.m1.6.6.2.cmml" xref="A1.E17.m1.6.6.2"><times id="A1.E17.m1.6.6.2.2.cmml" xref="A1.E17.m1.6.6.2.2"></times><ci id="A1.E17.m1.6.6.2.3.cmml" xref="A1.E17.m1.6.6.2.3">ğ‘</ci><apply id="A1.E17.m1.6.6.2.1.1.1.cmml" xref="A1.E17.m1.6.6.2.1.1"><csymbol cd="latexml" id="A1.E17.m1.6.6.2.1.1.1.1.cmml" xref="A1.E17.m1.6.6.2.1.1.1.1">conditional</csymbol><ci id="A1.E17.m1.6.6.2.1.1.1.2.cmml" xref="A1.E17.m1.6.6.2.1.1.1.2">ğ‘–</ci><apply id="A1.E17.m1.6.6.2.1.1.1.3.cmml" xref="A1.E17.m1.6.6.2.1.1.1.3"><csymbol cd="ambiguous" id="A1.E17.m1.6.6.2.1.1.1.3.1.cmml" xref="A1.E17.m1.6.6.2.1.1.1.3">superscript</csymbol><ci id="A1.E17.m1.6.6.2.1.1.1.3.2.cmml" xref="A1.E17.m1.6.6.2.1.1.1.3.2">ğ‘›</ci><ci id="A1.E17.m1.6.6.2.1.1.1.3.3.cmml" xref="A1.E17.m1.6.6.2.1.1.1.3.3">ğ‘¡</ci></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.E17.m1.11c">\alpha_{\beta}(y,y^{t})=\max\left\{1,\exp\left(\frac{r\left(x,y\right)-r\left(%
x,y^{t}\right)}{\beta}\right)\frac{q(i|n)}{q(i|n^{t})}\right\}.</annotation><annotation encoding="application/x-llamapun" id="A1.E17.m1.11d">italic_Î± start_POSTSUBSCRIPT italic_Î² end_POSTSUBSCRIPT ( italic_y , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) = roman_max { 1 , roman_exp ( divide start_ARG italic_r ( italic_x , italic_y ) - italic_r ( italic_x , italic_y start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) end_ARG start_ARG italic_Î² end_ARG ) divide start_ARG italic_q ( italic_i | italic_n ) end_ARG start_ARG italic_q ( italic_i | italic_n start_POSTSUPERSCRIPT italic_t end_POSTSUPERSCRIPT ) end_ARG } .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(17)</span></td>
</tr></tbody>
</table>
</div>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Prompts used for MT</h2>
<div class="ltx_para" id="A2.p1">
<p class="ltx_p" id="A2.p1.1">For both the <span class="ltx_text ltx_font_smallcaps" id="A2.p1.1.1">ALMA-7B</span> and <span class="ltx_text ltx_font_smallcaps" id="A2.p1.1.2">Tower-7B</span> we adhere to the prompt format recommended for translation in the original papers as shown below:</p>
</div>
<div class="ltx_para" id="A2.p2">
<blockquote class="ltx_quote" id="A2.p2.1">
<p class="ltx_p" id="A2.p2.1.1"><span class="ltx_text ltx_font_smallcaps ltx_framed ltx_framed_underline" id="A2.p2.1.1.1" style="font-size:90%;">Alma-7b</span><span class="ltx_text" id="A2.p2.1.1.2" style="font-size:90%;">:</span></p>
<pre class="ltx_verbatim ltx_font_typewriter" id="A2.p2.1.2" style="font-size:90%;">
Translate this sentence from {source language} to {target language}.
{source language} Source: {source sentence}.
{target language} Translation:
</pre>
<p class="ltx_p" id="A2.p2.1.3"><span class="ltx_text ltx_font_smallcaps ltx_framed ltx_framed_underline" id="A2.p2.1.3.1" style="font-size:90%;">Tower-7b</span><span class="ltx_text" id="A2.p2.1.3.2" style="font-size:90%;"></span></p>
<pre class="ltx_verbatim ltx_font_typewriter" id="A2.p2.1.4" style="font-size:90%;">
&lt;|im_start|&gt;user
Translate the following {source_language} source text to {target_language}:
{source_language}: {source_sentence}
{target_language}: &lt;|im_end|&gt;
&lt;|im_start|&gt;assistant
</pre>
</blockquote>
</div>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Additional Results</h2>
<figure class="ltx_figure" id="A3.F3.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="582" id="A3.F3.sf1.g1" src="extracted/5627197/figures/toy/hist_sum_feedback_hist.png" width="598"/>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="A3.F3.sf1.2.1.1" style="font-size:90%;">(a)</span> </span><span class="ltx_text" id="A3.F3.sf1.3.2" style="font-size:90%;">Distribution of rewards for sampled hypotheses for the toy summarization problem.</span></figcaption>
</figure>
<section class="ltx_subsection" id="A3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.1 </span>Toy problem: Validating the Approach</h3>
<div class="ltx_para" id="A3.SS1.p1">
<p class="ltx_p" id="A3.SS1.p1.1">To validate that our approach works, we test <span class="ltx_text ltx_font_smallcaps" id="A3.SS1.p1.1.1">Quest</span> on a controlled setting, a toy summarization problem, where the ground truth reward is known. We consider the following reward function:</p>
</div>
<div class="ltx_para" id="A3.SS1.p2">
<table class="ltx_equation ltx_eqn_table" id="A3.E18">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="r(x,y):=\text{logit}\left(\text{clamp}\left(\mathcal{N}\left(|y|;\mu=7.5,%
\sigma^{2}=3.75^{2}\right)\right)\right)," class="ltx_math_unparsed" display="block" id="A3.E18.m1.4"><semantics id="A3.E18.m1.4a"><mrow id="A3.E18.m1.4b"><mi id="A3.E18.m1.4.5">r</mi><mrow id="A3.E18.m1.4.6"><mo id="A3.E18.m1.4.6.1" stretchy="false">(</mo><mi id="A3.E18.m1.1.1">x</mi><mo id="A3.E18.m1.4.6.2">,</mo><mi id="A3.E18.m1.2.2">y</mi><mo id="A3.E18.m1.4.6.3" rspace="0.278em" stretchy="false">)</mo></mrow><mo id="A3.E18.m1.4.7" rspace="0.278em">:=</mo><mtext id="A3.E18.m1.4.8">logit</mtext><mrow id="A3.E18.m1.4.9"><mo id="A3.E18.m1.4.9.1">(</mo><mtext id="A3.E18.m1.4.9.2">clamp</mtext><mrow id="A3.E18.m1.4.9.3"><mo id="A3.E18.m1.4.9.3.1">(</mo><mi class="ltx_font_mathcaligraphic" id="A3.E18.m1.4.9.3.2">ğ’©</mi><mrow id="A3.E18.m1.4.9.3.3"><mo id="A3.E18.m1.4.9.3.3.1">(</mo><mo fence="false" id="A3.E18.m1.4.9.3.3.2" rspace="0.167em" stretchy="false">|</mo><mi id="A3.E18.m1.3.3">y</mi><mo fence="false" id="A3.E18.m1.4.9.3.3.3" rspace="0.167em" stretchy="false">|</mo><mo id="A3.E18.m1.4.9.3.3.4">;</mo><mi id="A3.E18.m1.4.4">Î¼</mi><mo id="A3.E18.m1.4.9.3.3.5">=</mo><mn id="A3.E18.m1.4.9.3.3.6">7.5</mn><mo id="A3.E18.m1.4.9.3.3.7">,</mo><msup id="A3.E18.m1.4.9.3.3.8"><mi id="A3.E18.m1.4.9.3.3.8.2">Ïƒ</mi><mn id="A3.E18.m1.4.9.3.3.8.3">2</mn></msup><mo id="A3.E18.m1.4.9.3.3.9">=</mo><msup id="A3.E18.m1.4.9.3.3.10"><mn id="A3.E18.m1.4.9.3.3.10.2">3.75</mn><mn id="A3.E18.m1.4.9.3.3.10.3">2</mn></msup><mo id="A3.E18.m1.4.9.3.3.11">)</mo></mrow><mo id="A3.E18.m1.4.9.3.4">)</mo></mrow><mo id="A3.E18.m1.4.9.4">)</mo></mrow><mo id="A3.E18.m1.4.10">,</mo></mrow><annotation encoding="application/x-tex" id="A3.E18.m1.4c">r(x,y):=\text{logit}\left(\text{clamp}\left(\mathcal{N}\left(|y|;\mu=7.5,%
\sigma^{2}=3.75^{2}\right)\right)\right),</annotation><annotation encoding="application/x-llamapun" id="A3.E18.m1.4d">italic_r ( italic_x , italic_y ) := logit ( clamp ( caligraphic_N ( | italic_y | ; italic_Î¼ = 7.5 , italic_Ïƒ start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT = 3.75 start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT ) ) ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(18)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="A3.SS1.p2.1">where <math alttext="\text{clamp}(x)=\max({10}^{-2},\min(x,1-{10}^{-2}))" class="ltx_Math" display="inline" id="A3.SS1.p2.1.m1.6"><semantics id="A3.SS1.p2.1.m1.6a"><mrow id="A3.SS1.p2.1.m1.6.6" xref="A3.SS1.p2.1.m1.6.6.cmml"><mrow id="A3.SS1.p2.1.m1.6.6.4" xref="A3.SS1.p2.1.m1.6.6.4.cmml"><mtext id="A3.SS1.p2.1.m1.6.6.4.2" xref="A3.SS1.p2.1.m1.6.6.4.2a.cmml">clamp</mtext><mo id="A3.SS1.p2.1.m1.6.6.4.1" xref="A3.SS1.p2.1.m1.6.6.4.1.cmml">â¢</mo><mrow id="A3.SS1.p2.1.m1.6.6.4.3.2" xref="A3.SS1.p2.1.m1.6.6.4.cmml"><mo id="A3.SS1.p2.1.m1.6.6.4.3.2.1" stretchy="false" xref="A3.SS1.p2.1.m1.6.6.4.cmml">(</mo><mi id="A3.SS1.p2.1.m1.1.1" xref="A3.SS1.p2.1.m1.1.1.cmml">x</mi><mo id="A3.SS1.p2.1.m1.6.6.4.3.2.2" stretchy="false" xref="A3.SS1.p2.1.m1.6.6.4.cmml">)</mo></mrow></mrow><mo id="A3.SS1.p2.1.m1.6.6.3" xref="A3.SS1.p2.1.m1.6.6.3.cmml">=</mo><mrow id="A3.SS1.p2.1.m1.6.6.2.2" xref="A3.SS1.p2.1.m1.6.6.2.3.cmml"><mi id="A3.SS1.p2.1.m1.4.4" xref="A3.SS1.p2.1.m1.4.4.cmml">max</mi><mo id="A3.SS1.p2.1.m1.6.6.2.2a" xref="A3.SS1.p2.1.m1.6.6.2.3.cmml">â¡</mo><mrow id="A3.SS1.p2.1.m1.6.6.2.2.2" xref="A3.SS1.p2.1.m1.6.6.2.3.cmml"><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.3" stretchy="false" xref="A3.SS1.p2.1.m1.6.6.2.3.cmml">(</mo><msup id="A3.SS1.p2.1.m1.5.5.1.1.1.1" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.cmml"><mn id="A3.SS1.p2.1.m1.5.5.1.1.1.1.2" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.2.cmml">10</mn><mrow id="A3.SS1.p2.1.m1.5.5.1.1.1.1.3" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.3.cmml"><mo id="A3.SS1.p2.1.m1.5.5.1.1.1.1.3a" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.3.cmml">âˆ’</mo><mn id="A3.SS1.p2.1.m1.5.5.1.1.1.1.3.2" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.3.2.cmml">2</mn></mrow></msup><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.4" xref="A3.SS1.p2.1.m1.6.6.2.3.cmml">,</mo><mrow id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.2.cmml"><mi id="A3.SS1.p2.1.m1.2.2" xref="A3.SS1.p2.1.m1.2.2.cmml">min</mi><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1a" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.2.cmml">â¡</mo><mrow id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.2.cmml"><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.2" stretchy="false" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.2.cmml">(</mo><mi id="A3.SS1.p2.1.m1.3.3" xref="A3.SS1.p2.1.m1.3.3.cmml">x</mi><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.3" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.2.cmml">,</mo><mrow id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.cmml"><mn id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.2" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.2.cmml">1</mn><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.1" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.1.cmml">âˆ’</mo><msup id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.cmml"><mn id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.2" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.2.cmml">10</mn><mrow id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3.cmml"><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3a" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3.cmml">âˆ’</mo><mn id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3.2" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3.2.cmml">2</mn></mrow></msup></mrow><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.4" stretchy="false" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.2.cmml">)</mo></mrow></mrow><mo id="A3.SS1.p2.1.m1.6.6.2.2.2.5" stretchy="false" xref="A3.SS1.p2.1.m1.6.6.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A3.SS1.p2.1.m1.6b"><apply id="A3.SS1.p2.1.m1.6.6.cmml" xref="A3.SS1.p2.1.m1.6.6"><eq id="A3.SS1.p2.1.m1.6.6.3.cmml" xref="A3.SS1.p2.1.m1.6.6.3"></eq><apply id="A3.SS1.p2.1.m1.6.6.4.cmml" xref="A3.SS1.p2.1.m1.6.6.4"><times id="A3.SS1.p2.1.m1.6.6.4.1.cmml" xref="A3.SS1.p2.1.m1.6.6.4.1"></times><ci id="A3.SS1.p2.1.m1.6.6.4.2a.cmml" xref="A3.SS1.p2.1.m1.6.6.4.2"><mtext id="A3.SS1.p2.1.m1.6.6.4.2.cmml" xref="A3.SS1.p2.1.m1.6.6.4.2">clamp</mtext></ci><ci id="A3.SS1.p2.1.m1.1.1.cmml" xref="A3.SS1.p2.1.m1.1.1">ğ‘¥</ci></apply><apply id="A3.SS1.p2.1.m1.6.6.2.3.cmml" xref="A3.SS1.p2.1.m1.6.6.2.2"><max id="A3.SS1.p2.1.m1.4.4.cmml" xref="A3.SS1.p2.1.m1.4.4"></max><apply id="A3.SS1.p2.1.m1.5.5.1.1.1.1.cmml" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1"><csymbol cd="ambiguous" id="A3.SS1.p2.1.m1.5.5.1.1.1.1.1.cmml" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1">superscript</csymbol><cn id="A3.SS1.p2.1.m1.5.5.1.1.1.1.2.cmml" type="integer" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.2">10</cn><apply id="A3.SS1.p2.1.m1.5.5.1.1.1.1.3.cmml" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.3"><minus id="A3.SS1.p2.1.m1.5.5.1.1.1.1.3.1.cmml" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.3"></minus><cn id="A3.SS1.p2.1.m1.5.5.1.1.1.1.3.2.cmml" type="integer" xref="A3.SS1.p2.1.m1.5.5.1.1.1.1.3.2">2</cn></apply></apply><apply id="A3.SS1.p2.1.m1.6.6.2.2.2.2.2.cmml" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1"><min id="A3.SS1.p2.1.m1.2.2.cmml" xref="A3.SS1.p2.1.m1.2.2"></min><ci id="A3.SS1.p2.1.m1.3.3.cmml" xref="A3.SS1.p2.1.m1.3.3">ğ‘¥</ci><apply id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.cmml" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1"><minus id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.1.cmml" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.1"></minus><cn id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.2.cmml" type="integer" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.2">1</cn><apply id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.cmml" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.1.cmml" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3">superscript</csymbol><cn id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.2.cmml" type="integer" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.2">10</cn><apply id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3.cmml" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3"><minus id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3.1.cmml" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3"></minus><cn id="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3.2.cmml" type="integer" xref="A3.SS1.p2.1.m1.6.6.2.2.2.2.1.1.1.3.3.2">2</cn></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A3.SS1.p2.1.m1.6c">\text{clamp}(x)=\max({10}^{-2},\min(x,1-{10}^{-2}))</annotation><annotation encoding="application/x-llamapun" id="A3.SS1.p2.1.m1.6d">clamp ( italic_x ) = roman_max ( 10 start_POSTSUPERSCRIPT - 2 end_POSTSUPERSCRIPT , roman_min ( italic_x , 1 - 10 start_POSTSUPERSCRIPT - 2 end_POSTSUPERSCRIPT ) )</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="A3.SS1.p3">
<p class="ltx_p" id="A3.SS1.p3.1">We use GPT2 <cite class="ltx_cite ltx_citemacro_citep">(Radford etÂ al., <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib57" title="">2019</a>)</cite> fine-tuned on the Reddit dataset <cite class="ltx_cite ltx_citemacro_cite">Stiennon etÂ al. (<a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#bib.bib68" title="">2020</a>)</cite> to generate summaries for 128 examples randomly sampled from the test split. We compare the distribution of rewards obtained by different sampling techniques (Ancestral, <span class="ltx_text ltx_font_smallcaps" id="A3.SS1.p3.1.1">Quest</span> and Truncated-Gibbs) to the ground truth reward in FigureÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.F3.sf1" title="In Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">3(a)</span></a>. For Truncated-Gibbs sampling, we estimate the partition function using the ancestral samples and resample them based on the probability distribution induced by the rewards. Unlike ancestral sampling which results in samples that are far from the high-reward regions, our sampling strategy, <span class="ltx_text ltx_font_smallcaps" id="A3.SS1.p3.1.2">Quest</span>, results in the best approximation of the ground truth distribution. This simplified reward task serves as an useful example to show the efficacy of our approach over alternatives.</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.2 </span>QE Results</h3>
<div class="ltx_para" id="A3.SS2.p1">
<p class="ltx_p" id="A3.SS2.p1.1">We report the quality as measured by the metric optimized for, <span class="ltx_text ltx_font_italic" id="A3.SS2.p1.1.1">i.e.</span>, <span class="ltx_text ltx_font_smallcaps" id="A3.SS2.p1.1.2">CometKiwi-XL</span> in FigureÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.F4" title="Figure 4 â€£ C.2 QE Results â€£ Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">4</span></a>. <span class="ltx_text ltx_font_smallcaps" id="A3.SS2.p1.1.3">Quest</span> results in higher quality across the board compared to ancestral sampling.</p>
</div>
<figure class="ltx_figure" id="A3.F4">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" id="A3.F4.4" style="width:433.6pt;">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="A3.F4.1.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="A3.F4.1.1.g1" src="extracted/5627197/figures/main/tower_wmt23_enru_qe_mean_lex.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A3.F4.2.2"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="A3.F4.2.2.g1" src="extracted/5627197/figures/main/tower_wmt23_ruen_qe_mean_lex.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A3.F4.3.3"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="521" id="A3.F4.3.3.g1" src="extracted/5627197/figures/main/tower_wmt23_ende_qe_mean_lex.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A3.F4.4.4"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="A3.F4.4.4.g1" src="extracted/5627197/figures/main/tower_wmt23_deen_qe_mean_lex.png" width="598"/>
</figure>
</div>
</div>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_minipage ltx_align_center ltx_align_middle" id="A3.F4.8" style="width:433.6pt;">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel" id="A3.F4.5.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="A3.F4.5.1.g1" src="extracted/5627197/figures/main/alma_wmt23_enru_qe_mean_lex.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A3.F4.6.2"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="A3.F4.6.2.g1" src="extracted/5627197/figures/main/alma_wmt23_ruen_qe_mean_lex.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A3.F4.7.3"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="A3.F4.7.3.g1" src="extracted/5627197/figures/main/alma_wmt23_ende_qe_mean_lex.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_1">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A3.F4.8.4"><img alt="Refer to caption" class="ltx_graphics ltx_img_square" height="531" id="A3.F4.8.4.g1" src="extracted/5627197/figures/main/alma_wmt23_deen_qe_mean_lex.png" width="598"/>
</figure>
</div>
</div>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="A3.F4.12.1.1" style="font-size:90%;">Figure 4</span>: </span><span class="ltx_text" id="A3.F4.13.2" style="font-size:90%;">Average quality (<span class="ltx_text ltx_font_smallcaps" id="A3.F4.13.2.1">CometKiwi-XL</span>) vs. diversity (<span class="ltx_text ltx_font_smallcaps" id="A3.F4.13.2.2">Pairwise-BLEU</span>) on WMT23 datasets. Different points represent different hyperparameter values. </span></figcaption>
</figure>
<figure class="ltx_figure" id="A3.SS2.fig1">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel" id="A3.F5.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="426" id="A3.F5.sf1.g1" src="extracted/5627197/figures/ablation/lenseg_alma_ende_inner_legend.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="A3.F5.sf1.3.1.1" style="font-size:90%;">(a)</span> </span><span class="ltx_text ltx_font_smallcaps" id="A3.F5.sf1.4.2" style="font-size:90%;">xComet-XL<span class="ltx_text ltx_font_upright" id="A3.F5.sf1.4.2.1"> by source length. </span></span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A3.F5.sf2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="338" id="A3.F5.sf2.g1" src="extracted/5627197/figures/ablation/dist_accepted_inds.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="A3.F5.sf2.2.1.1" style="font-size:90%;">(b)</span> </span><span class="ltx_text" id="A3.F5.sf2.3.2" style="font-size:90%;">Distribution over Accepted indices. </span></figcaption>
</figure>
</div>
</div>
</figure>
</section>
<section class="ltx_subsection" id="A3.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.3 </span>MCMC results in better outputs for shorter segments.</h3>
<div class="ltx_para" id="A3.SS3.p1">
<p class="ltx_p" id="A3.SS3.p1.1">We show the <span class="ltx_text ltx_font_smallcaps" id="A3.SS3.p1.1.1">xComet-XL</span> scores on WMT23 English-German pairs bucketed by the length of the source text. In general, the quality of samples degrades with increased source length when decoding via MCMC as shown in Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.F5.sf1" title="In C.2 QE Results â€£ Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">5(a)</span></a>. One possible factor could be the uniform index-selection exploration strategy where the proposal might require more steps as the sentence length increases. Another factor could be the limitations of the reward function itself for selecting high-quality translations for longer sequences. As these quality estimation metrics have not been trained on longer sequences, due to a distribution shift, they might not be representative of true quality for these output lengths. We believe the latter option could be the more significant factor as the reward optimized still improves regardless of the sentence length (see FigureÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.F4" title="Figure 4 â€£ C.2 QE Results â€£ Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">4</span></a>).</p>
</div>
</section>
<section class="ltx_subsection" id="A3.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">C.4 </span>Accepted proposals are skewed towards the end of the sentence. </h3>
<div class="ltx_para" id="A3.SS4.p1">
<p class="ltx_p" id="A3.SS4.p1.2">Figure <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A3.F5.sf2" title="In C.2 QE Results â€£ Appendix C Additional Results â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">5(b)</span></a> illustrates how the distribution of accepted indices changes with decreasing <math alttext="\beta" class="ltx_Math" display="inline" id="A3.SS4.p1.1.m1.1"><semantics id="A3.SS4.p1.1.m1.1a"><mi id="A3.SS4.p1.1.m1.1.1" xref="A3.SS4.p1.1.m1.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="A3.SS4.p1.1.m1.1b"><ci id="A3.SS4.p1.1.m1.1.1.cmml" xref="A3.SS4.p1.1.m1.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS4.p1.1.m1.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="A3.SS4.p1.1.m1.1d">italic_Î²</annotation></semantics></math>: lower <math alttext="\beta" class="ltx_Math" display="inline" id="A3.SS4.p1.2.m2.1"><semantics id="A3.SS4.p1.2.m2.1a"><mi id="A3.SS4.p1.2.m2.1.1" xref="A3.SS4.p1.2.m2.1.1.cmml">Î²</mi><annotation-xml encoding="MathML-Content" id="A3.SS4.p1.2.m2.1b"><ci id="A3.SS4.p1.2.m2.1.1.cmml" xref="A3.SS4.p1.2.m2.1.1">ğ›½</ci></annotation-xml><annotation encoding="application/x-tex" id="A3.SS4.p1.2.m2.1c">\beta</annotation><annotation encoding="application/x-llamapun" id="A3.SS4.p1.2.m2.1d">italic_Î²</annotation></semantics></math> values tighten acceptance criteria, favoring states with higher rewards and a greater likelihood of returning to the previous state. Consequently, transitions tend to yield minor alterations, typically at the end of the sentence. Altering the beginning necessitates sampling small indices values, risking a complete sentence change. This plot highlights the current limitations of our proposal, especially the downstream implications on the diversity of prefixes we get for a particular motivating the use of parallel chains and potential avenues for improvement for future work.</p>
</div>
</section>
</section>
<section class="ltx_appendix" id="A4">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix D </span>Comparing RLHF-QUEST vs QUEST</h2>
<div class="ltx_para" id="A4.p1">
<p class="ltx_p" id="A4.p1.1">We compare <span class="ltx_text ltx_font_smallcaps" id="A4.p1.1.1">Quest</span> with the alternative discussed in SectionÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.SS3" title="3.3 Connections to Reinforcement Learning with Human Feedback â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">3.3</span></a> where the target distribution in Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E3" title="In 3.1 Metropolis-Hastings â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">3</span></a> is replaced with Eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#S3.E12" title="In 3.3 Connections to Reinforcement Learning with Human Feedback â€£ 3 An MCMC-based Decoding Approach for Text Generation â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">12</span></a>, referred to as â€œRLHF-<span class="ltx_text ltx_font_smallcaps" id="A4.p1.1.2">Quest</span>â€. We compare sampling using the two target distributions in FigureÂ <a class="ltx_ref" href="https://arxiv.org/html/2406.00049v1#A4.F6" title="Figure 6 â€£ Appendix D Comparing RLHF-QUEST vs QUEST â€£ Quest: Quality-Aware Metropolis-Hastings Sampling for Machine Translation"><span class="ltx_text ltx_ref_tag">6</span></a>. Our results indicate that both approaches result in comparable translation quality, with <span class="ltx_text ltx_font_smallcaps" id="A4.p1.1.3">Quest</span> resulting in slightly higher diversity on average than RLHF-<span class="ltx_text ltx_font_smallcaps" id="A4.p1.1.4">Quest</span>. We leave the detailed exploration of these two methods to future work.</p>
</div>
<figure class="ltx_figure" id="A4.F6">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A4.F6.1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="427" id="A4.F6.1.g1" src="extracted/5627197/figures/ablation/rlhfquestx.png" width="598"/>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A4.F6.2"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="427" id="A4.F6.2.g1" src="extracted/5627197/figures/ablation/rlhfquestqe.png" width="598"/>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span class="ltx_text" id="A4.F6.7.1.1" style="font-size:90%;">Figure 6</span>: </span><span class="ltx_text" id="A4.F6.8.2" style="font-size:90%;">Average Quality by <span class="ltx_text ltx_font_smallcaps" id="A4.F6.8.2.1">xComet-XL</span> (left) and <span class="ltx_text ltx_font_smallcaps" id="A4.F6.8.2.2">CometKiwi-XL</span> on English-Russian dataset using <span class="ltx_text ltx_font_smallcaps" id="A4.F6.8.2.3">Tower-7b</span> </span></figcaption>
</figure>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Tue May 28 17:33:53 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
