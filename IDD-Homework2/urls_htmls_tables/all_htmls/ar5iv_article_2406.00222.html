<article class="ltx_document ltx_authors_1line">
 <h1 class="ltx_title ltx_title_document">
  Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training
 </h1>
 <div class="ltx_authors">
  <span class="ltx_creator ltx_role_author">
   <span class="ltx_personname">
    Maximillian Chen
    <sup class="ltx_sup" id="id7.7.id1">
     <span class="ltx_text ltx_font_italic" id="id7.7.id1.1">
      ∗1,2
     </span>
    </sup>
    , Ruoxi Sun
    <sup class="ltx_sup" id="id8.8.id2">
     <span class="ltx_text ltx_font_italic" id="id8.8.id2.1">
      1
     </span>
    </sup>
    , Sercan Ö. Arık
    <sup class="ltx_sup" id="id9.9.id3">
     <span class="ltx_text ltx_font_italic" id="id9.9.id3.1">
      1
     </span>
    </sup>
    , Tomas Pfister
    <sup class="ltx_sup" id="id10.10.id4">
     <span class="ltx_text ltx_font_italic" id="id10.10.id4.1">
      1
     </span>
    </sup>
    <br class="ltx_break"/>
    <sup class="ltx_sup" id="id11.11.id5">
     1
    </sup>
    Google
    <sup class="ltx_sup" id="id12.12.id6">
     2
    </sup>
    Columbia University
    <br class="ltx_break"/>
    <span class="ltx_text ltx_font_typewriter" id="id13.13.id7" style="font-size:90%;">
     maxchen@cs.columbia.edu, {ruoxis,soarik,tpfister}@google.com
     <span class="ltx_text ltx_font_serif" id="id13.13.id7.1">
      <br class="ltx_break"/>
     </span>
    </span>
   </span>
   <span class="ltx_author_notes">
    * Work done during an internship at Google.
   </span>
  </span>
 </div>
 <div class="ltx_abstract">
  <h6 class="ltx_title ltx_title_abstract">
   Abstract
  </h6>
  <p class="ltx_p" id="id14.id1">
   Large language models (LLMs) aligned through reinforcement learning from human feedback (RLHF) have quickly become one of the dominant paradigms for building intelligent conversational assistant agents. However, despite their strong performance across many benchmarks, LLM-based agents still lack conversational skills such as disambiguation: when generalized assistants are faced with ambiguity, they often overhedge or implicitly guess users’ ground-truth intents rather than asking clarification questions, and under task-specific settings, high-quality conversation samples are often limited, affecting models’ ability to learn optimal dialogue action policies. We propose Action-Based Contrastive Self-Training (henceforth
   <span class="ltx_text ltx_font_italic" id="id14.id1.1">
    ACT
   </span>
   ), a quasi-online preference optimization algorithm based on Direct Preference Optimization (DPO) which allows for sample-efficient dialogue policy learning in multi-turn conversation. We demonstrate
   <span class="ltx_text ltx_font_italic" id="id14.id1.2">
    ACT
   </span>
   ’s efficacy under sample-efficient conditions in three difficult conversational tasks: tabular-grounded question-answering, machine reading comprehension, and AmbigSQL, a novel task for disambiguating information-seeking requests for text-to-SQL generation. Additionally, we propose evaluating LLMs’ ability to function as conversational agents by examining whether they can implicitly recognize and reason about ambiguity in conversation.
   <span class="ltx_text ltx_font_italic" id="id14.id1.3">
    ACT
   </span>
   demonstrates substantial conversation modeling improvements over standard approaches to supervised fine-tuning and DPO.
  </p>
 </div>
 <section class="ltx_section" id="S1">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    1
   </span>
   Introduction
  </h2>
  <div class="ltx_para" id="S1.p1">
   <p class="ltx_p" id="S1.p1.1">
    Conversations offer a natural and effective way for humans and intelligent systems to collaborate
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib1" title="">
      1
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib2" title="">
      2
     </a>
     ]
    </cite>
    .
The impressive capabilities of large language models (LLMs) have powered the rapid development of many generalist conversational assistants such as ChatGPT
    <span class="ltx_note ltx_role_footnote" id="footnote1">
     <sup class="ltx_note_mark">
      1
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        1
       </sup>
       <span class="ltx_tag ltx_tag_note">
        1
       </span>
       https://openai.com/blog/chatgpt
      </span>
     </span>
    </span>
    and Gemini
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib3" title="">
      3
     </a>
     ]
    </cite>
    , which present an opportunity for users to verbalize their need for assistance on complex tasks. However, the promises of a conversational interfaces also come with the complexities of language. Human conversation is riddled with ambiguity, whether it be due to humans’ tendency to prefer underspecification
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib4" title="">
      4
     </a>
     ]
    </cite>
    or even due to syntactic errors
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib5" title="">
      5
     </a>
     ]
    </cite>
    . Moreover, disambiguation becomes even more important in complex domains where it can be a difficult multi-turn process to achieve common ground
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib6" title="">
      6
     </a>
     ]
    </cite>
    . As it stands, existing LLM-powered conversational agents continue to struggle with modeling ambiguity
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib7" title="">
      7
     </a>
     ]
    </cite>
    , and tend to exhibit unwanted behavior such as overhedging
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib8" title="">
      8
     </a>
     ]
    </cite>
    or generating responses which represent a “guess” of the user’s intent
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib9" title="">
      9
     </a>
     ]
    </cite>
    (see Figure
    <a class="ltx_ref" href="#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      1
     </span>
    </a>
    ).
   </p>
  </div>
  <div class="ltx_para" id="S1.p2">
   <p class="ltx_p" id="S1.p2.1">
    One of the primary reasons that LLMs may exhibit unwanted conversational behaviors is that their language modeling objective during pre-training or supervised fine-tuning (SFT) is not directly aligned with this goal
    <cite class="ltx_cite ltx_citemacro_citep">
     [
     <a class="ltx_ref" href="#bib.bib8" title="">
      8
     </a>
     ]
    </cite>
    . While approaches like
    <cite class="ltx_cite ltx_citemacro_citep">
     [
     <a class="ltx_ref" href="#bib.bib8" title="">
      8
     </a>
     ]
    </cite>
    propose LLM “alignment” using reinforcement learning from human feedback
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib10" title="">
      10
     </a>
     ]
    </cite>
    , existing models still struggle with conversational tasks spanning multiple turns
    <cite class="ltx_cite ltx_citemacro_citep">
     [
     <a class="ltx_ref" href="#bib.bib11" title="">
      11
     </a>
     ]
    </cite>
    . This is partly due to the fact that existing RLHF approaches do not directly optimize for pragmatic skills (e.g.
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib12" title="">
      12
     </a>
     ]
    </cite>
    ). Moreover, there is often high variance in the target distribution of a particular use case, so it is imperative that downstream adaptation approaches are able to teach an LLM generalizable policies. Given sufficient in-distribution training data, this may be feasible with standard tuning approaches. But, policy learning can be particularly challenging given limited data
    <cite class="ltx_cite ltx_citemacro_citep">
     [
     <a class="ltx_ref" href="#bib.bib13" title="">
      13
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib14" title="">
      14
     </a>
     ]
    </cite>
    , and high-quality conversation collection can be difficult for reasons
such as privacy concerns
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib15" title="">
      15
     </a>
     ]
    </cite>
    .
   </p>
  </div>
  <div class="ltx_para" id="S1.p3">
   <p class="ltx_p" id="S1.p3.1">
    This motivates the design of a conversational adaptation approach for LLMs which is more closely aligned with the goal of modeling actions in multi-turn conversation. We focus on improving LLMs’ abilities to implicitly select conversational strategies in ambiguous contexts, and propose an approach called
    <span class="ltx_text ltx_framed ltx_framed_underline" id="S1.p3.1.1">
     A
    </span>
    ction-Based
    <span class="ltx_text ltx_framed ltx_framed_underline" id="S1.p3.1.2">
     C
    </span>
    ontrastive Self-
    <span class="ltx_text ltx_framed ltx_framed_underline" id="S1.p3.1.3">
     T
    </span>
    raining (
    <span class="ltx_text ltx_font_italic" id="S1.p3.1.4">
     ACT
    </span>
    ).
    <span class="ltx_text ltx_font_italic" id="S1.p3.1.5">
     ACT
    </span>
    is a sample-efficient, quasi-online Direct Preference Optimization algorithm
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib16" title="">
      16
     </a>
     ]
    </cite>
    which focuses on learning by highlighting the differences between an agent’s possible pragmatic conversational actions. We demonstrate
    <span class="ltx_text ltx_font_italic" id="S1.p3.1.6">
     ACT
    </span>
    ’s sample-efficient performance on a diverse range of mixed-initiative conversational tasks: (i) tabular-grounded question answering, (ii) machine reading comprehension, and (iii) text-to-SQL generation. Our work demonstrates the necessity of considering action-based preferences for conversational tasks, and we propose a workflow for evaluating LLMs’ ability to recognize and reason about ambiguity in conversation.
   </p>
  </div>
  <figure class="ltx_figure" id="S1.F1">
   <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="115" id="S1.F1.g1" src="/html/2406.00222/assets/x1.png" width="438"/>
   <figcaption class="ltx_caption ltx_centering">
    <span class="ltx_tag ltx_tag_figure">
     Figure 1:
    </span>
    Simplified example of ambiguity present at tabular-grounded conversational question answering based on
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib17" title="">
      17
     </a>
     ]
    </cite>
    .
A conversational agent should recognize when there is ambiguity and ask a clarifying question towards a more accurate final answer.
   </figcaption>
  </figure>
 </section>
 <section class="ltx_section" id="S2">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    2
   </span>
   Related Work
  </h2>
  <section class="ltx_subsection" id="S2.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     2.1
    </span>
    Mixed-Initiative Conversational Agents
   </h3>
   <div class="ltx_para" id="S2.SS1.p1">
    <p class="ltx_p" id="S2.SS1.p1.1">
     Neural approaches to building mixed-initiative conversational agents typically consist of two core components: an understanding and planning module (e.g., a binary prediction task to determine whether to ask a clarifying question or provide an answer), and a generation module which can be controlled at a pragmatic level using the output of the planning module
     <cite class="ltx_cite ltx_citemacro_citep">
      [
      <a class="ltx_ref" href="#bib.bib18" title="">
       18
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib19" title="">
       19
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib20" title="">
       20
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib21" title="">
       21
      </a>
      ]
     </cite>
     (e.g., forming an utterance which follows the action prescribed by the aforementioned prediction task).
     <br class="ltx_break"/>
     <span class="ltx_text ltx_font_bold" id="S2.SS1.p1.1.1">
      Generation:
     </span>
     Many existing works focus on novel training methodologies to improve conditional generation as a complement to planning, with approaches such as multi-objective SFT
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib18" title="">
       18
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib22" title="">
       22
      </a>
      ]
     </cite>
     or introducing specialized embeddings for control codes
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib23" title="">
       23
      </a>
      ]
     </cite>
     .
In recent years, LLMs have vastly improved performance in pragmatically-controlled generation
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib24" title="">
       24
      </a>
      ]
     </cite>
     , but all of these approaches still depend on conversational planning. Planning remains a difficult task – natural interaction is not deterministic and often requires long-horizon planning.
     <br class="ltx_break"/>
     <span class="ltx_text ltx_font_bold" id="S2.SS1.p1.1.2">
      Planning:
     </span>
     The planning task can be viewed as a stochastic Markov Decision Process
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib25" title="">
       25
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib26" title="">
       26
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib27" title="">
       27
      </a>
      ]
     </cite>
     in which some dialogue state is drawn from a potentially unknown distribution, given the previous dialogue state and an imposed action. However, the action itself is not literally presented to the interacting parties; rather, an action is a low-dimensional representation of the pragmatic intent behind a given dialogue utterance (i.e., a dialogue act
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib28" title="">
       28
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib29" title="">
       29
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib30" title="">
       30
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib31" title="">
       31
      </a>
      ]
     </cite>
     ). As such, training planning modules often requires complex long-horizon reasoning and simulation to estimate the responses and intents of each interacting party. Many such efforts have examined combining neural models with search algorithms
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib32" title="">
       32
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib33" title="">
       33
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib27" title="">
       27
      </a>
      ]
     </cite>
     and simulation
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib34" title="">
       34
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib35" title="">
       35
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib27" title="">
       27
      </a>
      ]
     </cite>
     . However, not only do such modular approaches often incur high computational overhead
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib27" title="">
       27
      </a>
      ]
     </cite>
     , but they result in error propagation while not directly optimizing for response quality itself. In hopes of mitigating these concerns, we propose directly optimizing dialogue action planning as an implicit subtask of response generation in mixed-initiative conversation contexts, as we discuss in Section
     <a class="ltx_ref" href="#S3.SS2" title="3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       3.2
      </span>
     </a>
     .
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S2.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     2.2
    </span>
    Reinforcement Learning for LLM Alignment
   </h3>
   <div class="ltx_para" id="S2.SS2.p1">
    <p class="ltx_p" id="S2.SS2.p1.1">
     The current paradigm of LLM training for downstream use cases consists of three phases: pre-training, supervised fine-tuning (SFT) for instruction-following, and RL tuning for alignment with human preferences
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib36" title="">
       36
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib16" title="">
       16
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib37" title="">
       37
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib8" title="">
       8
      </a>
      ]
     </cite>
     . In our work, we primarily focus on the RL tuning phase. These approaches typically start with an initial policy model obtained by conducting SFT on a target task (
     <math alttext="\pi_{SFT}" class="ltx_Math" display="inline" id="S2.SS2.p1.1.m1.1">
      <semantics id="S2.SS2.p1.1.m1.1a">
       <msub id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml">
        <mi id="S2.SS2.p1.1.m1.1.1.2" xref="S2.SS2.p1.1.m1.1.1.2.cmml">
         π
        </mi>
        <mrow id="S2.SS2.p1.1.m1.1.1.3" xref="S2.SS2.p1.1.m1.1.1.3.cmml">
         <mi id="S2.SS2.p1.1.m1.1.1.3.2" xref="S2.SS2.p1.1.m1.1.1.3.2.cmml">
          S
         </mi>
         <mo id="S2.SS2.p1.1.m1.1.1.3.1" lspace="0em" rspace="0em" xref="S2.SS2.p1.1.m1.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S2.SS2.p1.1.m1.1.1.3.3" xref="S2.SS2.p1.1.m1.1.1.3.3.cmml">
          F
         </mi>
         <mo id="S2.SS2.p1.1.m1.1.1.3.1a" lspace="0em" rspace="0em" xref="S2.SS2.p1.1.m1.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S2.SS2.p1.1.m1.1.1.3.4" xref="S2.SS2.p1.1.m1.1.1.3.4.cmml">
          T
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b">
        <apply id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">
         <csymbol cd="ambiguous" id="S2.SS2.p1.1.m1.1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">
          subscript
         </csymbol>
         <ci id="S2.SS2.p1.1.m1.1.1.2.cmml" xref="S2.SS2.p1.1.m1.1.1.2">
          𝜋
         </ci>
         <apply id="S2.SS2.p1.1.m1.1.1.3.cmml" xref="S2.SS2.p1.1.m1.1.1.3">
          <times id="S2.SS2.p1.1.m1.1.1.3.1.cmml" xref="S2.SS2.p1.1.m1.1.1.3.1">
          </times>
          <ci id="S2.SS2.p1.1.m1.1.1.3.2.cmml" xref="S2.SS2.p1.1.m1.1.1.3.2">
           𝑆
          </ci>
          <ci id="S2.SS2.p1.1.m1.1.1.3.3.cmml" xref="S2.SS2.p1.1.m1.1.1.3.3">
           𝐹
          </ci>
          <ci id="S2.SS2.p1.1.m1.1.1.3.4.cmml" xref="S2.SS2.p1.1.m1.1.1.3.4">
           𝑇
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">
        \pi_{SFT}
       </annotation>
      </semantics>
     </math>
     ), before performing RL tuning using contrastive preference examples (most commonly collected through human feedback
     <cite class="ltx_cite ltx_citemacro_citep">
      [
      <a class="ltx_ref" href="#bib.bib8" title="">
       8
      </a>
      ]
     </cite>
     or a similar proxy like LLM-generated feedback
     <cite class="ltx_cite ltx_citemacro_citep">
      [
      <a class="ltx_ref" href="#bib.bib37" title="">
       37
      </a>
      ]
     </cite>
     ).
     <br class="ltx_break"/>
     <span class="ltx_text ltx_font_bold" id="S2.SS2.p1.1.1">
      Online versus Offline RL Algorithms:
     </span>
     In the case of online algorithms like PPO, a reward model is first fit over the preference examples so that it could be used for RL optimization
     <cite class="ltx_cite ltx_citemacro_citep">
      [
      <a class="ltx_ref" href="#bib.bib8" title="">
       8
      </a>
      ]
     </cite>
     .
Such algorithms have certain advantages which may benefit the Markov Decision Process-like nature of conversations — namely, a diverse search space as opposed to a fixed dataset, flexible reward functions, and broader policy exploration.
However, PPO is notoriously difficult to tune, and offline algorithms such as DPO
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib16" title="">
       16
      </a>
      ]
     </cite>
     , SLiC
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib38" title="">
       38
      </a>
      ]
     </cite>
     , and IPO
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib39" title="">
       39
      </a>
      ]
     </cite>
     have become widely adopted as an LLM adaptation approach because they bypasses explicit reward modeling and thus only require one set of hyperparameters to optimize
     <cite class="ltx_cite ltx_citemacro_citep">
      [
      <a class="ltx_ref" href="#bib.bib40" title="">
       40
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib16" title="">
       16
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib38" title="">
       38
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib41" title="">
       41
      </a>
      ]
     </cite>
     while still achieving similar empirical results
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib16" title="">
       16
      </a>
      ]
     </cite>
     given a fixed preference dataset.
Despite these findings, many of our contemporaries also question the promises of fully offline preference learning and have examined “online” variants of these offline algorithms
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib42" title="">
       42
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib43" title="">
       43
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib44" title="">
       44
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib45" title="">
       45
      </a>
      ]
     </cite>
     .
    </p>
   </div>
  </section>
 </section>
 <section class="ltx_section" id="S3">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    3
   </span>
   Methods
  </h2>
  <section class="ltx_subsection" id="S3.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     3.1
    </span>
    Problem Setup
   </h3>
   <div class="ltx_para" id="S3.SS1.p1">
    <p class="ltx_p" id="S3.SS1.p1.1">
     We consider the formulation of tuning an LLM to function as a
     <span class="ltx_text ltx_font_italic" id="S3.SS1.p1.1.1">
      mixed-initiative conversational agent
     </span>
     — through a series of dialogue interactions with a user, the LLM is expected to assist the user by correctly providing an output to the given query. Unlike the common agent interaction setting in which users completely control the flow of interaction with the expectation that agents may autonomously complete tasks such as using tools or online shopping
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib46" title="">
       46
      </a>
      ]
     </cite>
     , mixed-initiative conversational agents should understand how to redirect the flow of the interaction
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib47" title="">
       47
      </a>
      ]
     </cite>
     through the execution of various actions or conversational strategies
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib24" title="">
       24
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib48" title="">
       48
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib49" title="">
       49
      </a>
      ]
     </cite>
     , such as clarifying questions.
    </p>
   </div>
   <section class="ltx_paragraph" id="S3.SS1.SSS0.Px1">
    <h5 class="ltx_title ltx_title_paragraph">
     Notation
    </h5>
    <div class="ltx_para" id="S3.SS1.SSS0.Px1.p1">
     <p class="ltx_p" id="S3.SS1.SSS0.Px1.p1.33">
      Consider a conversational environment in which an LLM is RL-tuned for response optimization. Let
      <math alttext="\pi_{\theta_{i}}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.1.m1.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.1.m1.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.1.m1.1.1" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.2" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.2.cmml">
          π
         </mi>
         <msub id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.2" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.2.cmml">
           θ
          </mi>
          <mi id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.3" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.3.cmml">
           i
          </mi>
         </msub>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.1.m1.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.2">
           𝜋
          </ci>
          <apply id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.2">
            𝜃
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.1.m1.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.1.m1.1c">
         \pi_{\theta_{i}}
        </annotation>
       </semantics>
      </math>
      be an LLM’s policy parameterized by
      <math alttext="\theta" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.2.m2.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.2.m2.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.2.m2.1.1" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1.cmml">
         θ
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.2.m2.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.2.m2.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.2.m2.1.1">
          𝜃
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.2.m2.1c">
         \theta
        </annotation>
       </semantics>
      </math>
      at timestep
      <math alttext="i\geq 0" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.3.m3.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.3.m3.1a">
        <mrow id="S3.SS1.SSS0.Px1.p1.3.m3.1.1" xref="S3.SS1.SSS0.Px1.p1.3.m3.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.3.m3.1.1.2" xref="S3.SS1.SSS0.Px1.p1.3.m3.1.1.2.cmml">
          i
         </mi>
         <mo id="S3.SS1.SSS0.Px1.p1.3.m3.1.1.1" xref="S3.SS1.SSS0.Px1.p1.3.m3.1.1.1.cmml">
          ≥
         </mo>
         <mn id="S3.SS1.SSS0.Px1.p1.3.m3.1.1.3" xref="S3.SS1.SSS0.Px1.p1.3.m3.1.1.3.cmml">
          0
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.3.m3.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.3.m3.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.3.m3.1.1">
          <geq id="S3.SS1.SSS0.Px1.p1.3.m3.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.3.m3.1.1.1">
          </geq>
          <ci id="S3.SS1.SSS0.Px1.p1.3.m3.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.3.m3.1.1.2">
           𝑖
          </ci>
          <cn id="S3.SS1.SSS0.Px1.p1.3.m3.1.1.3.cmml" type="integer" xref="S3.SS1.SSS0.Px1.p1.3.m3.1.1.3">
           0
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.3.m3.1c">
         i\geq 0
        </annotation>
       </semantics>
      </math>
      , with
      <math alttext="\pi_{ref}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.4.m4.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.4.m4.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.4.m4.1.1" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.2" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.2.cmml">
          π
         </mi>
         <mrow id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.2" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.2.cmml">
           r
          </mi>
          <mo id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.3" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.3.cmml">
           e
          </mi>
          <mo id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.4" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.4.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.4.m4.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.2">
           𝜋
          </ci>
          <apply id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3">
           <times id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.1">
           </times>
           <ci id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.2">
            𝑟
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.3">
            𝑒
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.4.cmml" xref="S3.SS1.SSS0.Px1.p1.4.m4.1.1.3.4">
            𝑓
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.4.m4.1c">
         \pi_{ref}
        </annotation>
       </semantics>
      </math>
      being the reference policy model (i.e.,
      <math alttext="\pi_{ref}\leftarrow\pi_{\theta_{0}}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.5.m5.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.5.m5.1a">
        <mrow id="S3.SS1.SSS0.Px1.p1.5.m5.1.1" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.cmml">
         <msub id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.2" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.2.cmml">
           π
          </mi>
          <mrow id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.cmml">
           <mi id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.2" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.2.cmml">
            r
           </mi>
           <mo id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.1" lspace="0em" rspace="0em" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.1.cmml">
            ​
           </mo>
           <mi id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.3" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.3.cmml">
            e
           </mi>
           <mo id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.1a" lspace="0em" rspace="0em" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.1.cmml">
            ​
           </mo>
           <mi id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.4" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.4.cmml">
            f
           </mi>
          </mrow>
         </msub>
         <mo id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.1" stretchy="false" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.1.cmml">
          ←
         </mo>
         <msub id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.2" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.2.cmml">
           π
          </mi>
          <msub id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.cmml">
           <mi id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.2" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.2.cmml">
            θ
           </mi>
           <mn id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.3" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.3.cmml">
            0
           </mn>
          </msub>
         </msub>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.5.m5.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1">
          <ci id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.1">
           ←
          </ci>
          <apply id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.1.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.2.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.2">
            𝜋
           </ci>
           <apply id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3">
            <times id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.1">
            </times>
            <ci id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.2">
             𝑟
            </ci>
            <ci id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.3">
             𝑒
            </ci>
            <ci id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.4.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.2.3.4">
             𝑓
            </ci>
           </apply>
          </apply>
          <apply id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.2">
            𝜋
           </ci>
           <apply id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3">
            <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3">
             subscript
            </csymbol>
            <ci id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.2">
             𝜃
            </ci>
            <cn id="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.3.cmml" type="integer" xref="S3.SS1.SSS0.Px1.p1.5.m5.1.1.3.3.3">
             0
            </cn>
           </apply>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.5.m5.1c">
         \pi_{ref}\leftarrow\pi_{\theta_{0}}
        </annotation>
       </semantics>
      </math>
      ). Let
      <math alttext="D" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.6.m6.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.6.m6.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.6.m6.1.1" xref="S3.SS1.SSS0.Px1.p1.6.m6.1.1.cmml">
         D
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.6.m6.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.6.m6.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.6.m6.1.1">
          𝐷
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.6.m6.1c">
         D
        </annotation>
       </semantics>
      </math>
      be a dataset consisting of conversations. Let each conversation
      <math alttext="c" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.7.m7.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.7.m7.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.7.m7.1.1" xref="S3.SS1.SSS0.Px1.p1.7.m7.1.1.cmml">
         c
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.7.m7.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.7.m7.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.7.m7.1.1">
          𝑐
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.7.m7.1c">
         c
        </annotation>
       </semantics>
      </math>
      in
      <math alttext="D" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.8.m8.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.8.m8.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.8.m8.1.1" xref="S3.SS1.SSS0.Px1.p1.8.m8.1.1.cmml">
         D
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.8.m8.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.8.m8.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.8.m8.1.1">
          𝐷
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.8.m8.1c">
         D
        </annotation>
       </semantics>
      </math>
      contain
      <math alttext="n" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.9.m9.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.9.m9.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.9.m9.1.1" xref="S3.SS1.SSS0.Px1.p1.9.m9.1.1.cmml">
         n
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.9.m9.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.9.m9.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.9.m9.1.1">
          𝑛
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.9.m9.1c">
         n
        </annotation>
       </semantics>
      </math>
      dialogue turns, through which a user is requesting one or more pieces of information from an agent. The state of a conversation (the observed utterances and actions given by each interacting party) at timestep
      <math alttext="i" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.10.m10.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.10.m10.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.10.m10.1.1" xref="S3.SS1.SSS0.Px1.p1.10.m10.1.1.cmml">
         i
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.10.m10.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.10.m10.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.10.m10.1.1">
          𝑖
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.10.m10.1c">
         i
        </annotation>
       </semantics>
      </math>
      can be represented by
      <math alttext="t_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.11.m11.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.11.m11.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.11.m11.1.1" xref="S3.SS1.SSS0.Px1.p1.11.m11.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.11.m11.1.1.2" xref="S3.SS1.SSS0.Px1.p1.11.m11.1.1.2.cmml">
          t
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.11.m11.1.1.3" xref="S3.SS1.SSS0.Px1.p1.11.m11.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.11.m11.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.11.m11.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.11.m11.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.11.m11.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.11.m11.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.11.m11.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.11.m11.1.1.2">
           𝑡
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.11.m11.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.11.m11.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.11.m11.1c">
         t_{i}
        </annotation>
       </semantics>
      </math>
      . Implicitly, each
      <math alttext="t_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.12.m12.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.12.m12.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.12.m12.1.1" xref="S3.SS1.SSS0.Px1.p1.12.m12.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.12.m12.1.1.2" xref="S3.SS1.SSS0.Px1.p1.12.m12.1.1.2.cmml">
          t
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.12.m12.1.1.3" xref="S3.SS1.SSS0.Px1.p1.12.m12.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.12.m12.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.12.m12.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.12.m12.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.12.m12.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.12.m12.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.12.m12.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.12.m12.1.1.2">
           𝑡
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.12.m12.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.12.m12.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.12.m12.1c">
         t_{i}
        </annotation>
       </semantics>
      </math>
      is part of a trajectory which ends when the user’s question expressed at an earlier timestep
      <math alttext="j\leq i" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.13.m13.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.13.m13.1a">
        <mrow id="S3.SS1.SSS0.Px1.p1.13.m13.1.1" xref="S3.SS1.SSS0.Px1.p1.13.m13.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.13.m13.1.1.2" xref="S3.SS1.SSS0.Px1.p1.13.m13.1.1.2.cmml">
          j
         </mi>
         <mo id="S3.SS1.SSS0.Px1.p1.13.m13.1.1.1" xref="S3.SS1.SSS0.Px1.p1.13.m13.1.1.1.cmml">
          ≤
         </mo>
         <mi id="S3.SS1.SSS0.Px1.p1.13.m13.1.1.3" xref="S3.SS1.SSS0.Px1.p1.13.m13.1.1.3.cmml">
          i
         </mi>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.13.m13.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.13.m13.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.13.m13.1.1">
          <leq id="S3.SS1.SSS0.Px1.p1.13.m13.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.13.m13.1.1.1">
          </leq>
          <ci id="S3.SS1.SSS0.Px1.p1.13.m13.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.13.m13.1.1.2">
           𝑗
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.13.m13.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.13.m13.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.13.m13.1c">
         j\leq i
        </annotation>
       </semantics>
      </math>
      is answered
      <span class="ltx_note ltx_role_footnote" id="footnote2">
       <sup class="ltx_note_mark">
        2
       </sup>
       <span class="ltx_note_outer">
        <span class="ltx_note_content">
         <sup class="ltx_note_mark">
          2
         </sup>
         <span class="ltx_tag ltx_tag_note">
          2
         </span>
         The case where
         <math alttext="t_{i}" class="ltx_Math" display="inline" id="footnote2.m1.1">
          <semantics id="footnote2.m1.1b">
           <msub id="footnote2.m1.1.1" xref="footnote2.m1.1.1.cmml">
            <mi id="footnote2.m1.1.1.2" xref="footnote2.m1.1.1.2.cmml">
             t
            </mi>
            <mi id="footnote2.m1.1.1.3" xref="footnote2.m1.1.1.3.cmml">
             i
            </mi>
           </msub>
           <annotation-xml encoding="MathML-Content" id="footnote2.m1.1c">
            <apply id="footnote2.m1.1.1.cmml" xref="footnote2.m1.1.1">
             <csymbol cd="ambiguous" id="footnote2.m1.1.1.1.cmml" xref="footnote2.m1.1.1">
              subscript
             </csymbol>
             <ci id="footnote2.m1.1.1.2.cmml" xref="footnote2.m1.1.1.2">
              𝑡
             </ci>
             <ci id="footnote2.m1.1.1.3.cmml" xref="footnote2.m1.1.1.3">
              𝑖
             </ci>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="footnote2.m1.1d">
            t_{i}
           </annotation>
          </semantics>
         </math>
         contains the answer to a question while
         <math alttext="j=i" class="ltx_Math" display="inline" id="footnote2.m2.1">
          <semantics id="footnote2.m2.1b">
           <mrow id="footnote2.m2.1.1" xref="footnote2.m2.1.1.cmml">
            <mi id="footnote2.m2.1.1.2" xref="footnote2.m2.1.1.2.cmml">
             j
            </mi>
            <mo id="footnote2.m2.1.1.1" xref="footnote2.m2.1.1.1.cmml">
             =
            </mo>
            <mi id="footnote2.m2.1.1.3" xref="footnote2.m2.1.1.3.cmml">
             i
            </mi>
           </mrow>
           <annotation-xml encoding="MathML-Content" id="footnote2.m2.1c">
            <apply id="footnote2.m2.1.1.cmml" xref="footnote2.m2.1.1">
             <eq id="footnote2.m2.1.1.1.cmml" xref="footnote2.m2.1.1.1">
             </eq>
             <ci id="footnote2.m2.1.1.2.cmml" xref="footnote2.m2.1.1.2">
              𝑗
             </ci>
             <ci id="footnote2.m2.1.1.3.cmml" xref="footnote2.m2.1.1.3">
              𝑖
             </ci>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="footnote2.m2.1d">
            j=i
           </annotation>
          </semantics>
         </math>
         represents single-turn trajectories (those where a question is answered immediately, without any clarification turns).
        </span>
       </span>
      </span>
      . Each state
      <math alttext="t_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.14.m14.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.14.m14.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.14.m14.1.1" xref="S3.SS1.SSS0.Px1.p1.14.m14.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.14.m14.1.1.2" xref="S3.SS1.SSS0.Px1.p1.14.m14.1.1.2.cmml">
          t
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.14.m14.1.1.3" xref="S3.SS1.SSS0.Px1.p1.14.m14.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.14.m14.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.14.m14.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.14.m14.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.14.m14.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.14.m14.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.14.m14.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.14.m14.1.1.2">
           𝑡
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.14.m14.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.14.m14.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.14.m14.1c">
         t_{i}
        </annotation>
       </semantics>
      </math>
      is represented by the following tuple:
      <math alttext="(p_{i},r_{i},g_{i},a_{i})" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.15.m15.4">
       <semantics id="S3.SS1.SSS0.Px1.p1.15.m15.4a">
        <mrow id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.5.cmml">
         <mo id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.5" stretchy="false" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.5.cmml">
          (
         </mo>
         <msub id="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1" xref="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.2" xref="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.2.cmml">
           p
          </mi>
          <mi id="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.3" xref="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.3.cmml">
           i
          </mi>
         </msub>
         <mo id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.6" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.5.cmml">
          ,
         </mo>
         <msub id="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2" xref="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.2" xref="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.2.cmml">
           r
          </mi>
          <mi id="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.3" xref="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.3.cmml">
           i
          </mi>
         </msub>
         <mo id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.7" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.5.cmml">
          ,
         </mo>
         <msub id="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3" xref="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.2" xref="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.2.cmml">
           g
          </mi>
          <mi id="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.3" xref="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.3.cmml">
           i
          </mi>
         </msub>
         <mo id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.8" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.5.cmml">
          ,
         </mo>
         <msub id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.2" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.2.cmml">
           a
          </mi>
          <mi id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.3" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.3.cmml">
           i
          </mi>
         </msub>
         <mo id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.9" stretchy="false" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.5.cmml">
          )
         </mo>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.15.m15.4b">
         <vector id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.5.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4">
          <apply id="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.2">
            𝑝
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.1.1.1.1.3">
            𝑖
           </ci>
          </apply>
          <apply id="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.1.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.2.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.2">
            𝑟
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.3.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.2.2.2.2.3">
            𝑖
           </ci>
          </apply>
          <apply id="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.2">
            𝑔
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.3.3.3.3.3">
            𝑖
           </ci>
          </apply>
          <apply id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.1.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.2.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.2">
            𝑎
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.3.cmml" xref="S3.SS1.SSS0.Px1.p1.15.m15.4.4.4.4.3">
            𝑖
           </ci>
          </apply>
         </vector>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.15.m15.4c">
         (p_{i},r_{i},g_{i},a_{i})
        </annotation>
       </semantics>
      </math>
      .
      <math alttext="p_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.16.m16.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.16.m16.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.16.m16.1.1" xref="S3.SS1.SSS0.Px1.p1.16.m16.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.16.m16.1.1.2" xref="S3.SS1.SSS0.Px1.p1.16.m16.1.1.2.cmml">
          p
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.16.m16.1.1.3" xref="S3.SS1.SSS0.Px1.p1.16.m16.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.16.m16.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.16.m16.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.16.m16.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.16.m16.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.16.m16.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.16.m16.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.16.m16.1.1.2">
           𝑝
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.16.m16.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.16.m16.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.16.m16.1c">
         p_{i}
        </annotation>
       </semantics>
      </math>
      is the prompt at
      <math alttext="i" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.17.m17.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.17.m17.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.17.m17.1.1" xref="S3.SS1.SSS0.Px1.p1.17.m17.1.1.cmml">
         i
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.17.m17.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.17.m17.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.17.m17.1.1">
          𝑖
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.17.m17.1c">
         i
        </annotation>
       </semantics>
      </math>
      , consisting of any task-specific information (e.g. a SQL database schema, tabular data or retrieved passages) combined with any existing dialogue context.
      <math alttext="r_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.18.m18.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.18.m18.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.18.m18.1.1" xref="S3.SS1.SSS0.Px1.p1.18.m18.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.18.m18.1.1.2" xref="S3.SS1.SSS0.Px1.p1.18.m18.1.1.2.cmml">
          r
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.18.m18.1.1.3" xref="S3.SS1.SSS0.Px1.p1.18.m18.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.18.m18.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.18.m18.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.18.m18.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.18.m18.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.18.m18.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.18.m18.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.18.m18.1.1.2">
           𝑟
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.18.m18.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.18.m18.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.18.m18.1c">
         r_{i}
        </annotation>
       </semantics>
      </math>
      is the ground truth system-side response at
      <math alttext="i" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.19.m19.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.19.m19.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.19.m19.1.1" xref="S3.SS1.SSS0.Px1.p1.19.m19.1.1.cmml">
         i
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.19.m19.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.19.m19.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.19.m19.1.1">
          𝑖
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.19.m19.1c">
         i
        </annotation>
       </semantics>
      </math>
      .
      <math alttext="g_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.20.m20.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.20.m20.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.20.m20.1.1" xref="S3.SS1.SSS0.Px1.p1.20.m20.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.20.m20.1.1.2" xref="S3.SS1.SSS0.Px1.p1.20.m20.1.1.2.cmml">
          g
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.20.m20.1.1.3" xref="S3.SS1.SSS0.Px1.p1.20.m20.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.20.m20.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.20.m20.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.20.m20.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.20.m20.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.20.m20.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.20.m20.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.20.m20.1.1.2">
           𝑔
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.20.m20.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.20.m20.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.20.m20.1c">
         g_{i}
        </annotation>
       </semantics>
      </math>
      is the response at the end of
      <math alttext="t_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.21.m21.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.21.m21.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.21.m21.1.1" xref="S3.SS1.SSS0.Px1.p1.21.m21.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.21.m21.1.1.2" xref="S3.SS1.SSS0.Px1.p1.21.m21.1.1.2.cmml">
          t
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.21.m21.1.1.3" xref="S3.SS1.SSS0.Px1.p1.21.m21.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.21.m21.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.21.m21.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.21.m21.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.21.m21.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.21.m21.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.21.m21.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.21.m21.1.1.2">
           𝑡
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.21.m21.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.21.m21.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.21.m21.1c">
         t_{i}
        </annotation>
       </semantics>
      </math>
      ’s ground truth trajectory, i.e., the answer to the user’s original question after any possible clarification turns. In the single-turn trajectory case,
      <math alttext="g_{i}\leftarrow r_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.22.m22.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.22.m22.1a">
        <mrow id="S3.SS1.SSS0.Px1.p1.22.m22.1.1" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.cmml">
         <msub id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.2" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.2.cmml">
           g
          </mi>
          <mi id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.3" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.3.cmml">
           i
          </mi>
         </msub>
         <mo id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.1" stretchy="false" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.1.cmml">
          ←
         </mo>
         <msub id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.cmml">
          <mi id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.2" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.2.cmml">
           r
          </mi>
          <mi id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.3" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.3.cmml">
           i
          </mi>
         </msub>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.22.m22.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1">
          <ci id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.1">
           ←
          </ci>
          <apply id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.1.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.2.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.2">
            𝑔
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.3.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.2.3">
            𝑖
           </ci>
          </apply>
          <apply id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.2">
            𝑟
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.3.cmml" xref="S3.SS1.SSS0.Px1.p1.22.m22.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.22.m22.1c">
         g_{i}\leftarrow r_{i}
        </annotation>
       </semantics>
      </math>
      .
      <math alttext="a_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.23.m23.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.23.m23.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.23.m23.1.1" xref="S3.SS1.SSS0.Px1.p1.23.m23.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.23.m23.1.1.2" xref="S3.SS1.SSS0.Px1.p1.23.m23.1.1.2.cmml">
          a
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.23.m23.1.1.3" xref="S3.SS1.SSS0.Px1.p1.23.m23.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.23.m23.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.23.m23.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.23.m23.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.23.m23.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.23.m23.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.23.m23.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.23.m23.1.1.2">
           𝑎
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.23.m23.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.23.m23.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.23.m23.1c">
         a_{i}
        </annotation>
       </semantics>
      </math>
      is the action implicitly expressed by
      <math alttext="r_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.24.m24.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.24.m24.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.24.m24.1.1" xref="S3.SS1.SSS0.Px1.p1.24.m24.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.24.m24.1.1.2" xref="S3.SS1.SSS0.Px1.p1.24.m24.1.1.2.cmml">
          r
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.24.m24.1.1.3" xref="S3.SS1.SSS0.Px1.p1.24.m24.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.24.m24.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.24.m24.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.24.m24.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.24.m24.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.24.m24.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.24.m24.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.24.m24.1.1.2">
           𝑟
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.24.m24.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.24.m24.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.24.m24.1c">
         r_{i}
        </annotation>
       </semantics>
      </math>
      , where
      <math alttext="a_{i}" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.25.m25.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.25.m25.1a">
        <msub id="S3.SS1.SSS0.Px1.p1.25.m25.1.1" xref="S3.SS1.SSS0.Px1.p1.25.m25.1.1.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.25.m25.1.1.2" xref="S3.SS1.SSS0.Px1.p1.25.m25.1.1.2.cmml">
          a
         </mi>
         <mi id="S3.SS1.SSS0.Px1.p1.25.m25.1.1.3" xref="S3.SS1.SSS0.Px1.p1.25.m25.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.25.m25.1b">
         <apply id="S3.SS1.SSS0.Px1.p1.25.m25.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.25.m25.1.1">
          <csymbol cd="ambiguous" id="S3.SS1.SSS0.Px1.p1.25.m25.1.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.25.m25.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS1.SSS0.Px1.p1.25.m25.1.1.2.cmml" xref="S3.SS1.SSS0.Px1.p1.25.m25.1.1.2">
           𝑎
          </ci>
          <ci id="S3.SS1.SSS0.Px1.p1.25.m25.1.1.3.cmml" xref="S3.SS1.SSS0.Px1.p1.25.m25.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.25.m25.1c">
         a_{i}
        </annotation>
       </semantics>
      </math>
      exists in the Action Space
      <math alttext="S" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.26.m26.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.26.m26.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.26.m26.1.1" xref="S3.SS1.SSS0.Px1.p1.26.m26.1.1.cmml">
         S
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.26.m26.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.26.m26.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.26.m26.1.1">
          𝑆
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.26.m26.1c">
         S
        </annotation>
       </semantics>
      </math>
      of a particular task
      <span class="ltx_note ltx_role_footnote" id="footnote3">
       <sup class="ltx_note_mark">
        3
       </sup>
       <span class="ltx_note_outer">
        <span class="ltx_note_content">
         <sup class="ltx_note_mark">
          3
         </sup>
         <span class="ltx_tag ltx_tag_note">
          3
         </span>
         In the context of a fixed dataset,
         <math alttext="a_{i}" class="ltx_Math" display="inline" id="footnote3.m1.1">
          <semantics id="footnote3.m1.1b">
           <msub id="footnote3.m1.1.1" xref="footnote3.m1.1.1.cmml">
            <mi id="footnote3.m1.1.1.2" xref="footnote3.m1.1.1.2.cmml">
             a
            </mi>
            <mi id="footnote3.m1.1.1.3" xref="footnote3.m1.1.1.3.cmml">
             i
            </mi>
           </msub>
           <annotation-xml encoding="MathML-Content" id="footnote3.m1.1c">
            <apply id="footnote3.m1.1.1.cmml" xref="footnote3.m1.1.1">
             <csymbol cd="ambiguous" id="footnote3.m1.1.1.1.cmml" xref="footnote3.m1.1.1">
              subscript
             </csymbol>
             <ci id="footnote3.m1.1.1.2.cmml" xref="footnote3.m1.1.1.2">
              𝑎
             </ci>
             <ci id="footnote3.m1.1.1.3.cmml" xref="footnote3.m1.1.1.3">
              𝑖
             </ci>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="footnote3.m1.1d">
            a_{i}
           </annotation>
          </semantics>
         </math>
         may be a fixed annotation. However, in online contexts like training or inference, the implicit action must be inferred by other means such as classification.
        </span>
       </span>
      </span>
      . For the conversational datasets considered in our experiments, we set
      <math alttext="S=[\text{CLARIFY},\text{ANSWER}]" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.27.m27.2">
       <semantics id="S3.SS1.SSS0.Px1.p1.27.m27.2a">
        <mrow id="S3.SS1.SSS0.Px1.p1.27.m27.2.3" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.cmml">
         <mi id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.2" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.2.cmml">
          S
         </mi>
         <mo id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.1" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.1.cmml">
          =
         </mo>
         <mrow id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.2" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.1.cmml">
          <mo id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.2.1" stretchy="false" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.1.cmml">
           [
          </mo>
          <mtext id="S3.SS1.SSS0.Px1.p1.27.m27.1.1" xref="S3.SS1.SSS0.Px1.p1.27.m27.1.1a.cmml">
           CLARIFY
          </mtext>
          <mo id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.2.2" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.1.cmml">
           ,
          </mo>
          <mtext id="S3.SS1.SSS0.Px1.p1.27.m27.2.2" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.2a.cmml">
           ANSWER
          </mtext>
          <mo id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.2.3" stretchy="false" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.1.cmml">
           ]
          </mo>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.27.m27.2b">
         <apply id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.cmml" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3">
          <eq id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.1">
          </eq>
          <ci id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.2.cmml" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.2">
           𝑆
          </ci>
          <interval closure="closed" id="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.1.cmml" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.3.3.2">
           <ci id="S3.SS1.SSS0.Px1.p1.27.m27.1.1a.cmml" xref="S3.SS1.SSS0.Px1.p1.27.m27.1.1">
            <mtext id="S3.SS1.SSS0.Px1.p1.27.m27.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.27.m27.1.1">
             CLARIFY
            </mtext>
           </ci>
           <ci id="S3.SS1.SSS0.Px1.p1.27.m27.2.2a.cmml" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.2">
            <mtext id="S3.SS1.SSS0.Px1.p1.27.m27.2.2.cmml" xref="S3.SS1.SSS0.Px1.p1.27.m27.2.2">
             ANSWER
            </mtext>
           </ci>
          </interval>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.27.m27.2c">
         S=[\text{CLARIFY},\text{ANSWER}]
        </annotation>
       </semantics>
      </math>
      (but we note that the method can be extended to a broader action space). We also assume access to a capable controllable generation model (
      <math alttext="M" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.28.m28.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.28.m28.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.28.m28.1.1" xref="S3.SS1.SSS0.Px1.p1.28.m28.1.1.cmml">
         M
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.28.m28.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.28.m28.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.28.m28.1.1">
          𝑀
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.28.m28.1c">
         M
        </annotation>
       </semantics>
      </math>
      ), Action Classifier (
      <math alttext="A" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.29.m29.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.29.m29.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.29.m29.1.1" xref="S3.SS1.SSS0.Px1.p1.29.m29.1.1.cmml">
         A
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.29.m29.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.29.m29.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.29.m29.1.1">
          𝐴
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.29.m29.1c">
         A
        </annotation>
       </semantics>
      </math>
      ) and model which can be controlled to function as a coherent User Simulator (
      <math alttext="U" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.30.m30.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.30.m30.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.30.m30.1.1" xref="S3.SS1.SSS0.Px1.p1.30.m30.1.1.cmml">
         U
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.30.m30.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.30.m30.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.30.m30.1.1">
          𝑈
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.30.m30.1c">
         U
        </annotation>
       </semantics>
      </math>
      ). As discussed in Section
      <a class="ltx_ref" href="#S3.SS2" title="3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        3.2
       </span>
      </a>
      ,
      <math alttext="M" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.31.m31.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.31.m31.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.31.m31.1.1" xref="S3.SS1.SSS0.Px1.p1.31.m31.1.1.cmml">
         M
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.31.m31.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.31.m31.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.31.m31.1.1">
          𝑀
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.31.m31.1c">
         M
        </annotation>
       </semantics>
      </math>
      is used for preference data creation whereas
      <math alttext="A" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.32.m32.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.32.m32.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.32.m32.1.1" xref="S3.SS1.SSS0.Px1.p1.32.m32.1.1.cmml">
         A
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.32.m32.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.32.m32.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.32.m32.1.1">
          𝐴
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.32.m32.1c">
         A
        </annotation>
       </semantics>
      </math>
      and
      <math alttext="U" class="ltx_Math" display="inline" id="S3.SS1.SSS0.Px1.p1.33.m33.1">
       <semantics id="S3.SS1.SSS0.Px1.p1.33.m33.1a">
        <mi id="S3.SS1.SSS0.Px1.p1.33.m33.1.1" xref="S3.SS1.SSS0.Px1.p1.33.m33.1.1.cmml">
         U
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS1.SSS0.Px1.p1.33.m33.1b">
         <ci id="S3.SS1.SSS0.Px1.p1.33.m33.1.1.cmml" xref="S3.SS1.SSS0.Px1.p1.33.m33.1.1">
          𝑈
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS1.SSS0.Px1.p1.33.m33.1c">
         U
        </annotation>
       </semantics>
      </math>
      are both used during tuning and evaluation. We illustrate this notation in Figure
      <a class="ltx_ref" href="#A0.F3" title="Figure A3 ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        A3
       </span>
      </a>
      .
     </p>
    </div>
   </section>
  </section>
  <section class="ltx_subsection" id="S3.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     3.2
    </span>
    <span class="ltx_text ltx_font_italic" id="S3.SS2.1.1">
     ACT
    </span>
    : Action-Based Contrastive Self-training
   </h3>
   <figure class="ltx_figure" id="S3.F2">
    <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="181" id="S3.F2.g1" src="/html/2406.00222/assets/x2.png" width="456"/>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_figure">
      Figure 2:
     </span>
     <span class="ltx_text ltx_font_bold" id="S3.F2.4.1">
      Overview of the tuning phase of
      <span class="ltx_text ltx_font_italic" id="S3.F2.4.1.1">
       ACT
      </span>
     </span>
     .
For each initial contrastive pairing from
     <math alttext="D_{pref}" class="ltx_Math" display="inline" id="S3.F2.2.m1.1">
      <semantics id="S3.F2.2.m1.1b">
       <msub id="S3.F2.2.m1.1.1" xref="S3.F2.2.m1.1.1.cmml">
        <mi id="S3.F2.2.m1.1.1.2" xref="S3.F2.2.m1.1.1.2.cmml">
         D
        </mi>
        <mrow id="S3.F2.2.m1.1.1.3" xref="S3.F2.2.m1.1.1.3.cmml">
         <mi id="S3.F2.2.m1.1.1.3.2" xref="S3.F2.2.m1.1.1.3.2.cmml">
          p
         </mi>
         <mo id="S3.F2.2.m1.1.1.3.1" lspace="0em" rspace="0em" xref="S3.F2.2.m1.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.F2.2.m1.1.1.3.3" xref="S3.F2.2.m1.1.1.3.3.cmml">
          r
         </mi>
         <mo id="S3.F2.2.m1.1.1.3.1b" lspace="0em" rspace="0em" xref="S3.F2.2.m1.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.F2.2.m1.1.1.3.4" xref="S3.F2.2.m1.1.1.3.4.cmml">
          e
         </mi>
         <mo id="S3.F2.2.m1.1.1.3.1c" lspace="0em" rspace="0em" xref="S3.F2.2.m1.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S3.F2.2.m1.1.1.3.5" xref="S3.F2.2.m1.1.1.3.5.cmml">
          f
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S3.F2.2.m1.1c">
        <apply id="S3.F2.2.m1.1.1.cmml" xref="S3.F2.2.m1.1.1">
         <csymbol cd="ambiguous" id="S3.F2.2.m1.1.1.1.cmml" xref="S3.F2.2.m1.1.1">
          subscript
         </csymbol>
         <ci id="S3.F2.2.m1.1.1.2.cmml" xref="S3.F2.2.m1.1.1.2">
          𝐷
         </ci>
         <apply id="S3.F2.2.m1.1.1.3.cmml" xref="S3.F2.2.m1.1.1.3">
          <times id="S3.F2.2.m1.1.1.3.1.cmml" xref="S3.F2.2.m1.1.1.3.1">
          </times>
          <ci id="S3.F2.2.m1.1.1.3.2.cmml" xref="S3.F2.2.m1.1.1.3.2">
           𝑝
          </ci>
          <ci id="S3.F2.2.m1.1.1.3.3.cmml" xref="S3.F2.2.m1.1.1.3.3">
           𝑟
          </ci>
          <ci id="S3.F2.2.m1.1.1.3.4.cmml" xref="S3.F2.2.m1.1.1.3.4">
           𝑒
          </ci>
          <ci id="S3.F2.2.m1.1.1.3.5.cmml" xref="S3.F2.2.m1.1.1.3.5">
           𝑓
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S3.F2.2.m1.1d">
        D_{pref}
       </annotation>
      </semantics>
     </math>
     (constructed as in Section
     <a class="ltx_ref" href="#S3.SS2.SSS1" title="3.2.1 Construction of Preference Data ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       3.2.1
      </span>
     </a>
     ), we sample an on-policy response from the model being tuned. After evaluating the sampled response’s trajectory, we update the contrastive pairing by either replacing the existing winning or losing response. The model policy is updated using the objective in Eqn
     <a class="ltx_ref" href="#S3.E1" title="In 3.2.3 Contrastive RL Tuning for Alignment ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     .
    </figcaption>
   </figure>
   <div class="ltx_para" id="S3.SS2.p1">
    <p class="ltx_p" id="S3.SS2.p1.1">
     One of the north stars in developing intelligent conversational models is the ability to automatically produce responses which take actions which lead to the highest probability of conversational success
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib30" title="">
       30
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib50" title="">
       50
      </a>
      ]
     </cite>
     . We propose
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p1.1.1">
      ACT
     </span>
     , an approach that adapts generic LLMs for dialogue generation which considers dialogue planning as an implicit subtask.
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p1.1.2">
      ACT
     </span>
     is a quasi-online extension of the DPO algorithm which maintains its ease of use while incorporating more of the flexible exploration found during online learning.
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p1.1.3">
      ACT
     </span>
     relies on a few core intuitions.
1) Contrastive preferences are an intuitive medium for demonstrating the
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p1.1.4">
      pragmatic differences
     </span>
     between the implicit actions of “winning” and “losing” dialogue responses.
2) Conversational improvements require multi-turn optimization, which are difficult to express using only single-turn contrast pairings.
3) The gradient of the objective of algorithms such as DPO (see Eq.
     <a class="ltx_ref" href="#S3.E2" title="In 3.2.3 Contrastive RL Tuning for Alignment ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     ) is weighted based on the log probabilities assigned to the winning and losing responses.
4) By construction, on-policy response sampling represents a high-probability token sequence for an iteration of a policy model.
5) Knowledge of whether a policy model will assign high token probabilities to a given sequence can be used to form high-quality contrast pairings which effectively reward or penalize a model’s own responses due to DPO’s contrastive learning objective.
The overall
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p1.1.5">
      ACT
     </span>
     framework is summarized in Fig.
     <a class="ltx_ref" href="#S3.F2" title="Figure 2 ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     .
     <span class="ltx_text ltx_font_italic" id="S3.SS2.p1.1.6">
      ACT
     </span>
     consists of two phases: action-based contrast dataset construction (Algorithm
     <a class="ltx_ref" href="#alg1" title="Algorithm 1 ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     ) and contrastive self-training (Algorithm
     <a class="ltx_ref" href="#alg2" title="Algorithm 2 ‣ 3.2.3 Contrastive RL Tuning for Alignment ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     ).
    </p>
   </div>
   <figure class="ltx_figure" id="S3.SS2.fig1">
    <figure class="ltx_float ltx_minipage ltx_align_middle ltx_framed ltx_framed_top" id="alg1" style="width:195.1pt;">
     <div class="ltx_listing ltx_listing" id="alg1.2">
      <div class="ltx_listingline" id="alg0.l0">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l0.1.1.1" style="font-size:80%;">
         0:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l0.2" style="font-size:90%;">
        Dataset
       </span>
       <math alttext="D" class="ltx_Math" display="inline" id="alg0.l0.m1.1">
        <semantics id="alg0.l0.m1.1a">
         <mi id="alg0.l0.m1.1.1" mathsize="90%" xref="alg0.l0.m1.1.1.cmml">
          D
         </mi>
         <annotation-xml encoding="MathML-Content" id="alg0.l0.m1.1b">
          <ci id="alg0.l0.m1.1.1.cmml" xref="alg0.l0.m1.1.1">
           𝐷
          </ci>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l0.m1.1c">
          D
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l0.3" style="font-size:90%;">
        , Conditional generation model
       </span>
       <math alttext="M" class="ltx_Math" display="inline" id="alg0.l0.m2.1">
        <semantics id="alg0.l0.m2.1a">
         <mi id="alg0.l0.m2.1.1" mathsize="90%" xref="alg0.l0.m2.1.1.cmml">
          M
         </mi>
         <annotation-xml encoding="MathML-Content" id="alg0.l0.m2.1b">
          <ci id="alg0.l0.m2.1.1.cmml" xref="alg0.l0.m2.1.1">
           𝑀
          </ci>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l0.m2.1c">
          M
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l0.4" style="font-size:90%;">
        , Action Space
       </span>
       <math alttext="S" class="ltx_Math" display="inline" id="alg0.l0.m3.1">
        <semantics id="alg0.l0.m3.1a">
         <mi id="alg0.l0.m3.1.1" mathsize="90%" xref="alg0.l0.m3.1.1.cmml">
          S
         </mi>
         <annotation-xml encoding="MathML-Content" id="alg0.l0.m3.1b">
          <ci id="alg0.l0.m3.1.1.cmml" xref="alg0.l0.m3.1.1">
           𝑆
          </ci>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l0.m3.1c">
          S
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l0.5" style="font-size:90%;">
       </span>
      </div>
      <div class="ltx_listingline" id="alg0.l1">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l1.1.1.1" style="font-size:80%;">
         1:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l1.2" style="font-size:90%;">
        Initialize empty dataset
       </span>
       <math alttext="D_{pref}" class="ltx_Math" display="inline" id="alg0.l1.m1.1">
        <semantics id="alg0.l1.m1.1a">
         <msub id="alg0.l1.m1.1.1" xref="alg0.l1.m1.1.1.cmml">
          <mi id="alg0.l1.m1.1.1.2" mathsize="90%" xref="alg0.l1.m1.1.1.2.cmml">
           D
          </mi>
          <mrow id="alg0.l1.m1.1.1.3" xref="alg0.l1.m1.1.1.3.cmml">
           <mi id="alg0.l1.m1.1.1.3.2" mathsize="90%" xref="alg0.l1.m1.1.1.3.2.cmml">
            p
           </mi>
           <mo id="alg0.l1.m1.1.1.3.1" lspace="0em" rspace="0em" xref="alg0.l1.m1.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l1.m1.1.1.3.3" mathsize="90%" xref="alg0.l1.m1.1.1.3.3.cmml">
            r
           </mi>
           <mo id="alg0.l1.m1.1.1.3.1a" lspace="0em" rspace="0em" xref="alg0.l1.m1.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l1.m1.1.1.3.4" mathsize="90%" xref="alg0.l1.m1.1.1.3.4.cmml">
            e
           </mi>
           <mo id="alg0.l1.m1.1.1.3.1b" lspace="0em" rspace="0em" xref="alg0.l1.m1.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l1.m1.1.1.3.5" mathsize="90%" xref="alg0.l1.m1.1.1.3.5.cmml">
            f
           </mi>
          </mrow>
         </msub>
         <annotation-xml encoding="MathML-Content" id="alg0.l1.m1.1b">
          <apply id="alg0.l1.m1.1.1.cmml" xref="alg0.l1.m1.1.1">
           <csymbol cd="ambiguous" id="alg0.l1.m1.1.1.1.cmml" xref="alg0.l1.m1.1.1">
            subscript
           </csymbol>
           <ci id="alg0.l1.m1.1.1.2.cmml" xref="alg0.l1.m1.1.1.2">
            𝐷
           </ci>
           <apply id="alg0.l1.m1.1.1.3.cmml" xref="alg0.l1.m1.1.1.3">
            <times id="alg0.l1.m1.1.1.3.1.cmml" xref="alg0.l1.m1.1.1.3.1">
            </times>
            <ci id="alg0.l1.m1.1.1.3.2.cmml" xref="alg0.l1.m1.1.1.3.2">
             𝑝
            </ci>
            <ci id="alg0.l1.m1.1.1.3.3.cmml" xref="alg0.l1.m1.1.1.3.3">
             𝑟
            </ci>
            <ci id="alg0.l1.m1.1.1.3.4.cmml" xref="alg0.l1.m1.1.1.3.4">
             𝑒
            </ci>
            <ci id="alg0.l1.m1.1.1.3.5.cmml" xref="alg0.l1.m1.1.1.3.5">
             𝑓
            </ci>
           </apply>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l1.m1.1c">
          D_{pref}
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l1.3" style="font-size:90%;">
        .
       </span>
      </div>
      <div class="ltx_listingline" id="alg0.l2">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l2.1.1.1" style="font-size:80%;">
         2:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l2.2" style="font-size:90%;">
       </span>
       <span class="ltx_text ltx_font_bold" id="alg0.l2.3" style="font-size:90%;">
        for
       </span>
       <span class="ltx_text" id="alg0.l2.4" style="font-size:90%;">
        conversation turn
       </span>
       <math alttext="t_{i}\in D" class="ltx_Math" display="inline" id="alg0.l2.m1.1">
        <semantics id="alg0.l2.m1.1a">
         <mrow id="alg0.l2.m1.1.1" xref="alg0.l2.m1.1.1.cmml">
          <msub id="alg0.l2.m1.1.1.2" xref="alg0.l2.m1.1.1.2.cmml">
           <mi id="alg0.l2.m1.1.1.2.2" mathsize="90%" xref="alg0.l2.m1.1.1.2.2.cmml">
            t
           </mi>
           <mi id="alg0.l2.m1.1.1.2.3" mathsize="90%" xref="alg0.l2.m1.1.1.2.3.cmml">
            i
           </mi>
          </msub>
          <mo id="alg0.l2.m1.1.1.1" mathsize="90%" xref="alg0.l2.m1.1.1.1.cmml">
           ∈
          </mo>
          <mi id="alg0.l2.m1.1.1.3" mathsize="90%" xref="alg0.l2.m1.1.1.3.cmml">
           D
          </mi>
         </mrow>
         <annotation-xml encoding="MathML-Content" id="alg0.l2.m1.1b">
          <apply id="alg0.l2.m1.1.1.cmml" xref="alg0.l2.m1.1.1">
           <in id="alg0.l2.m1.1.1.1.cmml" xref="alg0.l2.m1.1.1.1">
           </in>
           <apply id="alg0.l2.m1.1.1.2.cmml" xref="alg0.l2.m1.1.1.2">
            <csymbol cd="ambiguous" id="alg0.l2.m1.1.1.2.1.cmml" xref="alg0.l2.m1.1.1.2">
             subscript
            </csymbol>
            <ci id="alg0.l2.m1.1.1.2.2.cmml" xref="alg0.l2.m1.1.1.2.2">
             𝑡
            </ci>
            <ci id="alg0.l2.m1.1.1.2.3.cmml" xref="alg0.l2.m1.1.1.2.3">
             𝑖
            </ci>
           </apply>
           <ci id="alg0.l2.m1.1.1.3.cmml" xref="alg0.l2.m1.1.1.3">
            𝐷
           </ci>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l2.m1.1c">
          t_{i}\in D
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l2.5" style="font-size:90%;">
       </span>
       <span class="ltx_text ltx_font_bold" id="alg0.l2.6" style="font-size:90%;">
        do
       </span>
       <span class="ltx_text" id="alg0.l2.7" style="font-size:90%;">
       </span>
      </div>
      <div class="ltx_listingline" id="alg0.l3">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l3.2.1.1" style="font-size:80%;">
         3:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l3.3" style="font-size:90%;">
        Let
       </span>
       <math alttext="a_{i}^{\prime}=S\setminus a_{i}" class="ltx_Math" display="inline" id="alg0.l3.m1.1">
        <semantics id="alg0.l3.m1.1a">
         <mrow id="alg0.l3.m1.1.1" xref="alg0.l3.m1.1.1.cmml">
          <msubsup id="alg0.l3.m1.1.1.2" xref="alg0.l3.m1.1.1.2.cmml">
           <mi id="alg0.l3.m1.1.1.2.2.2" mathsize="90%" xref="alg0.l3.m1.1.1.2.2.2.cmml">
            a
           </mi>
           <mi id="alg0.l3.m1.1.1.2.2.3" mathsize="90%" xref="alg0.l3.m1.1.1.2.2.3.cmml">
            i
           </mi>
           <mo id="alg0.l3.m1.1.1.2.3" mathsize="90%" xref="alg0.l3.m1.1.1.2.3.cmml">
            ′
           </mo>
          </msubsup>
          <mo id="alg0.l3.m1.1.1.1" mathsize="90%" xref="alg0.l3.m1.1.1.1.cmml">
           =
          </mo>
          <mrow id="alg0.l3.m1.1.1.3" xref="alg0.l3.m1.1.1.3.cmml">
           <mi id="alg0.l3.m1.1.1.3.2" mathsize="90%" xref="alg0.l3.m1.1.1.3.2.cmml">
            S
           </mi>
           <mo id="alg0.l3.m1.1.1.3.1" mathsize="90%" xref="alg0.l3.m1.1.1.3.1.cmml">
            ∖
           </mo>
           <msub id="alg0.l3.m1.1.1.3.3" xref="alg0.l3.m1.1.1.3.3.cmml">
            <mi id="alg0.l3.m1.1.1.3.3.2" mathsize="90%" xref="alg0.l3.m1.1.1.3.3.2.cmml">
             a
            </mi>
            <mi id="alg0.l3.m1.1.1.3.3.3" mathsize="90%" xref="alg0.l3.m1.1.1.3.3.3.cmml">
             i
            </mi>
           </msub>
          </mrow>
         </mrow>
         <annotation-xml encoding="MathML-Content" id="alg0.l3.m1.1b">
          <apply id="alg0.l3.m1.1.1.cmml" xref="alg0.l3.m1.1.1">
           <eq id="alg0.l3.m1.1.1.1.cmml" xref="alg0.l3.m1.1.1.1">
           </eq>
           <apply id="alg0.l3.m1.1.1.2.cmml" xref="alg0.l3.m1.1.1.2">
            <csymbol cd="ambiguous" id="alg0.l3.m1.1.1.2.1.cmml" xref="alg0.l3.m1.1.1.2">
             superscript
            </csymbol>
            <apply id="alg0.l3.m1.1.1.2.2.cmml" xref="alg0.l3.m1.1.1.2">
             <csymbol cd="ambiguous" id="alg0.l3.m1.1.1.2.2.1.cmml" xref="alg0.l3.m1.1.1.2">
              subscript
             </csymbol>
             <ci id="alg0.l3.m1.1.1.2.2.2.cmml" xref="alg0.l3.m1.1.1.2.2.2">
              𝑎
             </ci>
             <ci id="alg0.l3.m1.1.1.2.2.3.cmml" xref="alg0.l3.m1.1.1.2.2.3">
              𝑖
             </ci>
            </apply>
            <ci id="alg0.l3.m1.1.1.2.3.cmml" xref="alg0.l3.m1.1.1.2.3">
             ′
            </ci>
           </apply>
           <apply id="alg0.l3.m1.1.1.3.cmml" xref="alg0.l3.m1.1.1.3">
            <setdiff id="alg0.l3.m1.1.1.3.1.cmml" xref="alg0.l3.m1.1.1.3.1">
            </setdiff>
            <ci id="alg0.l3.m1.1.1.3.2.cmml" xref="alg0.l3.m1.1.1.3.2">
             𝑆
            </ci>
            <apply id="alg0.l3.m1.1.1.3.3.cmml" xref="alg0.l3.m1.1.1.3.3">
             <csymbol cd="ambiguous" id="alg0.l3.m1.1.1.3.3.1.cmml" xref="alg0.l3.m1.1.1.3.3">
              subscript
             </csymbol>
             <ci id="alg0.l3.m1.1.1.3.3.2.cmml" xref="alg0.l3.m1.1.1.3.3.2">
              𝑎
             </ci>
             <ci id="alg0.l3.m1.1.1.3.3.3.cmml" xref="alg0.l3.m1.1.1.3.3.3">
              𝑖
             </ci>
            </apply>
           </apply>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l3.m1.1c">
          a_{i}^{\prime}=S\setminus a_{i}
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l3.4" style="font-size:90%;">
       </span>
       <span class="ltx_text" id="alg0.l3.1" style="font-size:90%;float:right;">
        <math alttext="\triangleright" class="ltx_Math" display="inline" id="alg0.l3.1.m1.1">
         <semantics id="alg0.l3.1.m1.1a">
          <mo id="alg0.l3.1.m1.1.1" xref="alg0.l3.1.m1.1.1.cmml">
           ▷
          </mo>
          <annotation-xml encoding="MathML-Content" id="alg0.l3.1.m1.1b">
           <ci id="alg0.l3.1.m1.1.1.cmml" xref="alg0.l3.1.m1.1.1">
            ▷
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg0.l3.1.m1.1c">
           \triangleright
          </annotation>
         </semantics>
        </math>
        Get Rejected Action
       </span>
      </div>
      <div class="ltx_listingline" id="alg0.l4">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l4.1.1.1" style="font-size:80%;">
         4:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l4.2" style="font-size:90%;">
        Let
       </span>
       <math alttext="y_{wi}=r_{i}" class="ltx_Math" display="inline" id="alg0.l4.m1.1">
        <semantics id="alg0.l4.m1.1a">
         <mrow id="alg0.l4.m1.1.1" xref="alg0.l4.m1.1.1.cmml">
          <msub id="alg0.l4.m1.1.1.2" xref="alg0.l4.m1.1.1.2.cmml">
           <mi id="alg0.l4.m1.1.1.2.2" mathsize="90%" xref="alg0.l4.m1.1.1.2.2.cmml">
            y
           </mi>
           <mrow id="alg0.l4.m1.1.1.2.3" xref="alg0.l4.m1.1.1.2.3.cmml">
            <mi id="alg0.l4.m1.1.1.2.3.2" mathsize="90%" xref="alg0.l4.m1.1.1.2.3.2.cmml">
             w
            </mi>
            <mo id="alg0.l4.m1.1.1.2.3.1" lspace="0em" rspace="0em" xref="alg0.l4.m1.1.1.2.3.1.cmml">
             ​
            </mo>
            <mi id="alg0.l4.m1.1.1.2.3.3" mathsize="90%" xref="alg0.l4.m1.1.1.2.3.3.cmml">
             i
            </mi>
           </mrow>
          </msub>
          <mo id="alg0.l4.m1.1.1.1" mathsize="90%" xref="alg0.l4.m1.1.1.1.cmml">
           =
          </mo>
          <msub id="alg0.l4.m1.1.1.3" xref="alg0.l4.m1.1.1.3.cmml">
           <mi id="alg0.l4.m1.1.1.3.2" mathsize="90%" xref="alg0.l4.m1.1.1.3.2.cmml">
            r
           </mi>
           <mi id="alg0.l4.m1.1.1.3.3" mathsize="90%" xref="alg0.l4.m1.1.1.3.3.cmml">
            i
           </mi>
          </msub>
         </mrow>
         <annotation-xml encoding="MathML-Content" id="alg0.l4.m1.1b">
          <apply id="alg0.l4.m1.1.1.cmml" xref="alg0.l4.m1.1.1">
           <eq id="alg0.l4.m1.1.1.1.cmml" xref="alg0.l4.m1.1.1.1">
           </eq>
           <apply id="alg0.l4.m1.1.1.2.cmml" xref="alg0.l4.m1.1.1.2">
            <csymbol cd="ambiguous" id="alg0.l4.m1.1.1.2.1.cmml" xref="alg0.l4.m1.1.1.2">
             subscript
            </csymbol>
            <ci id="alg0.l4.m1.1.1.2.2.cmml" xref="alg0.l4.m1.1.1.2.2">
             𝑦
            </ci>
            <apply id="alg0.l4.m1.1.1.2.3.cmml" xref="alg0.l4.m1.1.1.2.3">
             <times id="alg0.l4.m1.1.1.2.3.1.cmml" xref="alg0.l4.m1.1.1.2.3.1">
             </times>
             <ci id="alg0.l4.m1.1.1.2.3.2.cmml" xref="alg0.l4.m1.1.1.2.3.2">
              𝑤
             </ci>
             <ci id="alg0.l4.m1.1.1.2.3.3.cmml" xref="alg0.l4.m1.1.1.2.3.3">
              𝑖
             </ci>
            </apply>
           </apply>
           <apply id="alg0.l4.m1.1.1.3.cmml" xref="alg0.l4.m1.1.1.3">
            <csymbol cd="ambiguous" id="alg0.l4.m1.1.1.3.1.cmml" xref="alg0.l4.m1.1.1.3">
             subscript
            </csymbol>
            <ci id="alg0.l4.m1.1.1.3.2.cmml" xref="alg0.l4.m1.1.1.3.2">
             𝑟
            </ci>
            <ci id="alg0.l4.m1.1.1.3.3.cmml" xref="alg0.l4.m1.1.1.3.3">
             𝑖
            </ci>
           </apply>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l4.m1.1c">
          y_{wi}=r_{i}
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l4.3" style="font-size:90%;">
        .
       </span>
      </div>
      <div class="ltx_listingline" id="alg0.l5">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l5.2.1.1" style="font-size:80%;">
         5:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l5.3" style="font-size:90%;">
       </span>
       <span class="ltx_text" id="alg0.l5.1" style="font-size:90%;">
        Sample
        <math alttext="y_{li}\sim P_{M}(\cdot|p_{i},a_{i}^{\prime})" class="ltx_math_unparsed" display="inline" id="alg0.l5.1.m1.1">
         <semantics id="alg0.l5.1.m1.1a">
          <mrow id="alg0.l5.1.m1.1b">
           <msub id="alg0.l5.1.m1.1.1">
            <mi id="alg0.l5.1.m1.1.1.2">
             y
            </mi>
            <mrow id="alg0.l5.1.m1.1.1.3">
             <mi id="alg0.l5.1.m1.1.1.3.2">
              l
             </mi>
             <mo id="alg0.l5.1.m1.1.1.3.1" lspace="0em" rspace="0em">
              ​
             </mo>
             <mi id="alg0.l5.1.m1.1.1.3.3">
              i
             </mi>
            </mrow>
           </msub>
           <mo id="alg0.l5.1.m1.1.2">
            ∼
           </mo>
           <msub id="alg0.l5.1.m1.1.3">
            <mi id="alg0.l5.1.m1.1.3.2">
             P
            </mi>
            <mi id="alg0.l5.1.m1.1.3.3">
             M
            </mi>
           </msub>
           <mrow id="alg0.l5.1.m1.1.4">
            <mo id="alg0.l5.1.m1.1.4.1" stretchy="false">
             (
            </mo>
            <mo id="alg0.l5.1.m1.1.4.2" lspace="0em" rspace="0em">
             ⋅
            </mo>
            <mo fence="false" id="alg0.l5.1.m1.1.4.3" rspace="0.167em" stretchy="false">
             |
            </mo>
            <msub id="alg0.l5.1.m1.1.4.4">
             <mi id="alg0.l5.1.m1.1.4.4.2">
              p
             </mi>
             <mi id="alg0.l5.1.m1.1.4.4.3">
              i
             </mi>
            </msub>
            <mo id="alg0.l5.1.m1.1.4.5">
             ,
            </mo>
            <msubsup id="alg0.l5.1.m1.1.4.6">
             <mi id="alg0.l5.1.m1.1.4.6.2.2">
              a
             </mi>
             <mi id="alg0.l5.1.m1.1.4.6.2.3">
              i
             </mi>
             <mo id="alg0.l5.1.m1.1.4.6.3">
              ′
             </mo>
            </msubsup>
            <mo id="alg0.l5.1.m1.1.4.7" stretchy="false">
             )
            </mo>
           </mrow>
          </mrow>
          <annotation encoding="application/x-tex" id="alg0.l5.1.m1.1c">
           y_{li}\sim P_{M}(\cdot|p_{i},a_{i}^{\prime})
          </annotation>
         </semantics>
        </math>
       </span>
       <span class="ltx_text" id="alg0.l5.4" style="font-size:90%;">
        .
       </span>
      </div>
      <div class="ltx_listingline" id="alg0.l6">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l6.1.1.1" style="font-size:80%;">
         6:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l6.2" style="font-size:90%;">
        Let
       </span>
       <math alttext="t_{i}^{\prime}=(p_{i},r_{i},g_{i},a_{i},a_{i}^{\prime},y_{wi},y_{li})" class="ltx_Math" display="inline" id="alg0.l6.m1.7">
        <semantics id="alg0.l6.m1.7a">
         <mrow id="alg0.l6.m1.7.7" xref="alg0.l6.m1.7.7.cmml">
          <msubsup id="alg0.l6.m1.7.7.9" xref="alg0.l6.m1.7.7.9.cmml">
           <mi id="alg0.l6.m1.7.7.9.2.2" mathsize="90%" xref="alg0.l6.m1.7.7.9.2.2.cmml">
            t
           </mi>
           <mi id="alg0.l6.m1.7.7.9.2.3" mathsize="90%" xref="alg0.l6.m1.7.7.9.2.3.cmml">
            i
           </mi>
           <mo id="alg0.l6.m1.7.7.9.3" mathsize="90%" xref="alg0.l6.m1.7.7.9.3.cmml">
            ′
           </mo>
          </msubsup>
          <mo id="alg0.l6.m1.7.7.8" mathsize="90%" xref="alg0.l6.m1.7.7.8.cmml">
           =
          </mo>
          <mrow id="alg0.l6.m1.7.7.7.7" xref="alg0.l6.m1.7.7.7.8.cmml">
           <mo id="alg0.l6.m1.7.7.7.7.8" maxsize="90%" minsize="90%" xref="alg0.l6.m1.7.7.7.8.cmml">
            (
           </mo>
           <msub id="alg0.l6.m1.1.1.1.1.1" xref="alg0.l6.m1.1.1.1.1.1.cmml">
            <mi id="alg0.l6.m1.1.1.1.1.1.2" mathsize="90%" xref="alg0.l6.m1.1.1.1.1.1.2.cmml">
             p
            </mi>
            <mi id="alg0.l6.m1.1.1.1.1.1.3" mathsize="90%" xref="alg0.l6.m1.1.1.1.1.1.3.cmml">
             i
            </mi>
           </msub>
           <mo id="alg0.l6.m1.7.7.7.7.9" mathsize="90%" xref="alg0.l6.m1.7.7.7.8.cmml">
            ,
           </mo>
           <msub id="alg0.l6.m1.2.2.2.2.2" xref="alg0.l6.m1.2.2.2.2.2.cmml">
            <mi id="alg0.l6.m1.2.2.2.2.2.2" mathsize="90%" xref="alg0.l6.m1.2.2.2.2.2.2.cmml">
             r
            </mi>
            <mi id="alg0.l6.m1.2.2.2.2.2.3" mathsize="90%" xref="alg0.l6.m1.2.2.2.2.2.3.cmml">
             i
            </mi>
           </msub>
           <mo id="alg0.l6.m1.7.7.7.7.10" mathsize="90%" xref="alg0.l6.m1.7.7.7.8.cmml">
            ,
           </mo>
           <msub id="alg0.l6.m1.3.3.3.3.3" xref="alg0.l6.m1.3.3.3.3.3.cmml">
            <mi id="alg0.l6.m1.3.3.3.3.3.2" mathsize="90%" xref="alg0.l6.m1.3.3.3.3.3.2.cmml">
             g
            </mi>
            <mi id="alg0.l6.m1.3.3.3.3.3.3" mathsize="90%" xref="alg0.l6.m1.3.3.3.3.3.3.cmml">
             i
            </mi>
           </msub>
           <mo id="alg0.l6.m1.7.7.7.7.11" mathsize="90%" xref="alg0.l6.m1.7.7.7.8.cmml">
            ,
           </mo>
           <msub id="alg0.l6.m1.4.4.4.4.4" xref="alg0.l6.m1.4.4.4.4.4.cmml">
            <mi id="alg0.l6.m1.4.4.4.4.4.2" mathsize="90%" xref="alg0.l6.m1.4.4.4.4.4.2.cmml">
             a
            </mi>
            <mi id="alg0.l6.m1.4.4.4.4.4.3" mathsize="90%" xref="alg0.l6.m1.4.4.4.4.4.3.cmml">
             i
            </mi>
           </msub>
           <mo id="alg0.l6.m1.7.7.7.7.12" mathsize="90%" xref="alg0.l6.m1.7.7.7.8.cmml">
            ,
           </mo>
           <msubsup id="alg0.l6.m1.5.5.5.5.5" xref="alg0.l6.m1.5.5.5.5.5.cmml">
            <mi id="alg0.l6.m1.5.5.5.5.5.2.2" mathsize="90%" xref="alg0.l6.m1.5.5.5.5.5.2.2.cmml">
             a
            </mi>
            <mi id="alg0.l6.m1.5.5.5.5.5.2.3" mathsize="90%" xref="alg0.l6.m1.5.5.5.5.5.2.3.cmml">
             i
            </mi>
            <mo id="alg0.l6.m1.5.5.5.5.5.3" mathsize="90%" xref="alg0.l6.m1.5.5.5.5.5.3.cmml">
             ′
            </mo>
           </msubsup>
           <mo id="alg0.l6.m1.7.7.7.7.13" mathsize="90%" xref="alg0.l6.m1.7.7.7.8.cmml">
            ,
           </mo>
           <msub id="alg0.l6.m1.6.6.6.6.6" xref="alg0.l6.m1.6.6.6.6.6.cmml">
            <mi id="alg0.l6.m1.6.6.6.6.6.2" mathsize="90%" xref="alg0.l6.m1.6.6.6.6.6.2.cmml">
             y
            </mi>
            <mrow id="alg0.l6.m1.6.6.6.6.6.3" xref="alg0.l6.m1.6.6.6.6.6.3.cmml">
             <mi id="alg0.l6.m1.6.6.6.6.6.3.2" mathsize="90%" xref="alg0.l6.m1.6.6.6.6.6.3.2.cmml">
              w
             </mi>
             <mo id="alg0.l6.m1.6.6.6.6.6.3.1" lspace="0em" rspace="0em" xref="alg0.l6.m1.6.6.6.6.6.3.1.cmml">
              ​
             </mo>
             <mi id="alg0.l6.m1.6.6.6.6.6.3.3" mathsize="90%" xref="alg0.l6.m1.6.6.6.6.6.3.3.cmml">
              i
             </mi>
            </mrow>
           </msub>
           <mo id="alg0.l6.m1.7.7.7.7.14" mathsize="90%" xref="alg0.l6.m1.7.7.7.8.cmml">
            ,
           </mo>
           <msub id="alg0.l6.m1.7.7.7.7.7" xref="alg0.l6.m1.7.7.7.7.7.cmml">
            <mi id="alg0.l6.m1.7.7.7.7.7.2" mathsize="90%" xref="alg0.l6.m1.7.7.7.7.7.2.cmml">
             y
            </mi>
            <mrow id="alg0.l6.m1.7.7.7.7.7.3" xref="alg0.l6.m1.7.7.7.7.7.3.cmml">
             <mi id="alg0.l6.m1.7.7.7.7.7.3.2" mathsize="90%" xref="alg0.l6.m1.7.7.7.7.7.3.2.cmml">
              l
             </mi>
             <mo id="alg0.l6.m1.7.7.7.7.7.3.1" lspace="0em" rspace="0em" xref="alg0.l6.m1.7.7.7.7.7.3.1.cmml">
              ​
             </mo>
             <mi id="alg0.l6.m1.7.7.7.7.7.3.3" mathsize="90%" xref="alg0.l6.m1.7.7.7.7.7.3.3.cmml">
              i
             </mi>
            </mrow>
           </msub>
           <mo id="alg0.l6.m1.7.7.7.7.15" maxsize="90%" minsize="90%" xref="alg0.l6.m1.7.7.7.8.cmml">
            )
           </mo>
          </mrow>
         </mrow>
         <annotation-xml encoding="MathML-Content" id="alg0.l6.m1.7b">
          <apply id="alg0.l6.m1.7.7.cmml" xref="alg0.l6.m1.7.7">
           <eq id="alg0.l6.m1.7.7.8.cmml" xref="alg0.l6.m1.7.7.8">
           </eq>
           <apply id="alg0.l6.m1.7.7.9.cmml" xref="alg0.l6.m1.7.7.9">
            <csymbol cd="ambiguous" id="alg0.l6.m1.7.7.9.1.cmml" xref="alg0.l6.m1.7.7.9">
             superscript
            </csymbol>
            <apply id="alg0.l6.m1.7.7.9.2.cmml" xref="alg0.l6.m1.7.7.9">
             <csymbol cd="ambiguous" id="alg0.l6.m1.7.7.9.2.1.cmml" xref="alg0.l6.m1.7.7.9">
              subscript
             </csymbol>
             <ci id="alg0.l6.m1.7.7.9.2.2.cmml" xref="alg0.l6.m1.7.7.9.2.2">
              𝑡
             </ci>
             <ci id="alg0.l6.m1.7.7.9.2.3.cmml" xref="alg0.l6.m1.7.7.9.2.3">
              𝑖
             </ci>
            </apply>
            <ci id="alg0.l6.m1.7.7.9.3.cmml" xref="alg0.l6.m1.7.7.9.3">
             ′
            </ci>
           </apply>
           <vector id="alg0.l6.m1.7.7.7.8.cmml" xref="alg0.l6.m1.7.7.7.7">
            <apply id="alg0.l6.m1.1.1.1.1.1.cmml" xref="alg0.l6.m1.1.1.1.1.1">
             <csymbol cd="ambiguous" id="alg0.l6.m1.1.1.1.1.1.1.cmml" xref="alg0.l6.m1.1.1.1.1.1">
              subscript
             </csymbol>
             <ci id="alg0.l6.m1.1.1.1.1.1.2.cmml" xref="alg0.l6.m1.1.1.1.1.1.2">
              𝑝
             </ci>
             <ci id="alg0.l6.m1.1.1.1.1.1.3.cmml" xref="alg0.l6.m1.1.1.1.1.1.3">
              𝑖
             </ci>
            </apply>
            <apply id="alg0.l6.m1.2.2.2.2.2.cmml" xref="alg0.l6.m1.2.2.2.2.2">
             <csymbol cd="ambiguous" id="alg0.l6.m1.2.2.2.2.2.1.cmml" xref="alg0.l6.m1.2.2.2.2.2">
              subscript
             </csymbol>
             <ci id="alg0.l6.m1.2.2.2.2.2.2.cmml" xref="alg0.l6.m1.2.2.2.2.2.2">
              𝑟
             </ci>
             <ci id="alg0.l6.m1.2.2.2.2.2.3.cmml" xref="alg0.l6.m1.2.2.2.2.2.3">
              𝑖
             </ci>
            </apply>
            <apply id="alg0.l6.m1.3.3.3.3.3.cmml" xref="alg0.l6.m1.3.3.3.3.3">
             <csymbol cd="ambiguous" id="alg0.l6.m1.3.3.3.3.3.1.cmml" xref="alg0.l6.m1.3.3.3.3.3">
              subscript
             </csymbol>
             <ci id="alg0.l6.m1.3.3.3.3.3.2.cmml" xref="alg0.l6.m1.3.3.3.3.3.2">
              𝑔
             </ci>
             <ci id="alg0.l6.m1.3.3.3.3.3.3.cmml" xref="alg0.l6.m1.3.3.3.3.3.3">
              𝑖
             </ci>
            </apply>
            <apply id="alg0.l6.m1.4.4.4.4.4.cmml" xref="alg0.l6.m1.4.4.4.4.4">
             <csymbol cd="ambiguous" id="alg0.l6.m1.4.4.4.4.4.1.cmml" xref="alg0.l6.m1.4.4.4.4.4">
              subscript
             </csymbol>
             <ci id="alg0.l6.m1.4.4.4.4.4.2.cmml" xref="alg0.l6.m1.4.4.4.4.4.2">
              𝑎
             </ci>
             <ci id="alg0.l6.m1.4.4.4.4.4.3.cmml" xref="alg0.l6.m1.4.4.4.4.4.3">
              𝑖
             </ci>
            </apply>
            <apply id="alg0.l6.m1.5.5.5.5.5.cmml" xref="alg0.l6.m1.5.5.5.5.5">
             <csymbol cd="ambiguous" id="alg0.l6.m1.5.5.5.5.5.1.cmml" xref="alg0.l6.m1.5.5.5.5.5">
              superscript
             </csymbol>
             <apply id="alg0.l6.m1.5.5.5.5.5.2.cmml" xref="alg0.l6.m1.5.5.5.5.5">
              <csymbol cd="ambiguous" id="alg0.l6.m1.5.5.5.5.5.2.1.cmml" xref="alg0.l6.m1.5.5.5.5.5">
               subscript
              </csymbol>
              <ci id="alg0.l6.m1.5.5.5.5.5.2.2.cmml" xref="alg0.l6.m1.5.5.5.5.5.2.2">
               𝑎
              </ci>
              <ci id="alg0.l6.m1.5.5.5.5.5.2.3.cmml" xref="alg0.l6.m1.5.5.5.5.5.2.3">
               𝑖
              </ci>
             </apply>
             <ci id="alg0.l6.m1.5.5.5.5.5.3.cmml" xref="alg0.l6.m1.5.5.5.5.5.3">
              ′
             </ci>
            </apply>
            <apply id="alg0.l6.m1.6.6.6.6.6.cmml" xref="alg0.l6.m1.6.6.6.6.6">
             <csymbol cd="ambiguous" id="alg0.l6.m1.6.6.6.6.6.1.cmml" xref="alg0.l6.m1.6.6.6.6.6">
              subscript
             </csymbol>
             <ci id="alg0.l6.m1.6.6.6.6.6.2.cmml" xref="alg0.l6.m1.6.6.6.6.6.2">
              𝑦
             </ci>
             <apply id="alg0.l6.m1.6.6.6.6.6.3.cmml" xref="alg0.l6.m1.6.6.6.6.6.3">
              <times id="alg0.l6.m1.6.6.6.6.6.3.1.cmml" xref="alg0.l6.m1.6.6.6.6.6.3.1">
              </times>
              <ci id="alg0.l6.m1.6.6.6.6.6.3.2.cmml" xref="alg0.l6.m1.6.6.6.6.6.3.2">
               𝑤
              </ci>
              <ci id="alg0.l6.m1.6.6.6.6.6.3.3.cmml" xref="alg0.l6.m1.6.6.6.6.6.3.3">
               𝑖
              </ci>
             </apply>
            </apply>
            <apply id="alg0.l6.m1.7.7.7.7.7.cmml" xref="alg0.l6.m1.7.7.7.7.7">
             <csymbol cd="ambiguous" id="alg0.l6.m1.7.7.7.7.7.1.cmml" xref="alg0.l6.m1.7.7.7.7.7">
              subscript
             </csymbol>
             <ci id="alg0.l6.m1.7.7.7.7.7.2.cmml" xref="alg0.l6.m1.7.7.7.7.7.2">
              𝑦
             </ci>
             <apply id="alg0.l6.m1.7.7.7.7.7.3.cmml" xref="alg0.l6.m1.7.7.7.7.7.3">
              <times id="alg0.l6.m1.7.7.7.7.7.3.1.cmml" xref="alg0.l6.m1.7.7.7.7.7.3.1">
              </times>
              <ci id="alg0.l6.m1.7.7.7.7.7.3.2.cmml" xref="alg0.l6.m1.7.7.7.7.7.3.2">
               𝑙
              </ci>
              <ci id="alg0.l6.m1.7.7.7.7.7.3.3.cmml" xref="alg0.l6.m1.7.7.7.7.7.3.3">
               𝑖
              </ci>
             </apply>
            </apply>
           </vector>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l6.m1.7c">
          t_{i}^{\prime}=(p_{i},r_{i},g_{i},a_{i},a_{i}^{\prime},y_{wi},y_{li})
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l6.3" style="font-size:90%;">
        .
       </span>
      </div>
      <div class="ltx_listingline" id="alg0.l7">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l7.1.1.1" style="font-size:80%;">
         7:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l7.2" style="font-size:90%;">
        Add
       </span>
       <math alttext="t_{i}^{\prime}" class="ltx_Math" display="inline" id="alg0.l7.m1.1">
        <semantics id="alg0.l7.m1.1a">
         <msubsup id="alg0.l7.m1.1.1" xref="alg0.l7.m1.1.1.cmml">
          <mi id="alg0.l7.m1.1.1.2.2" mathsize="90%" xref="alg0.l7.m1.1.1.2.2.cmml">
           t
          </mi>
          <mi id="alg0.l7.m1.1.1.2.3" mathsize="90%" xref="alg0.l7.m1.1.1.2.3.cmml">
           i
          </mi>
          <mo id="alg0.l7.m1.1.1.3" mathsize="90%" xref="alg0.l7.m1.1.1.3.cmml">
           ′
          </mo>
         </msubsup>
         <annotation-xml encoding="MathML-Content" id="alg0.l7.m1.1b">
          <apply id="alg0.l7.m1.1.1.cmml" xref="alg0.l7.m1.1.1">
           <csymbol cd="ambiguous" id="alg0.l7.m1.1.1.1.cmml" xref="alg0.l7.m1.1.1">
            superscript
           </csymbol>
           <apply id="alg0.l7.m1.1.1.2.cmml" xref="alg0.l7.m1.1.1">
            <csymbol cd="ambiguous" id="alg0.l7.m1.1.1.2.1.cmml" xref="alg0.l7.m1.1.1">
             subscript
            </csymbol>
            <ci id="alg0.l7.m1.1.1.2.2.cmml" xref="alg0.l7.m1.1.1.2.2">
             𝑡
            </ci>
            <ci id="alg0.l7.m1.1.1.2.3.cmml" xref="alg0.l7.m1.1.1.2.3">
             𝑖
            </ci>
           </apply>
           <ci id="alg0.l7.m1.1.1.3.cmml" xref="alg0.l7.m1.1.1.3">
            ′
           </ci>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l7.m1.1c">
          t_{i}^{\prime}
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l7.3" style="font-size:90%;">
        to
       </span>
       <math alttext="D_{pref}" class="ltx_Math" display="inline" id="alg0.l7.m2.1">
        <semantics id="alg0.l7.m2.1a">
         <msub id="alg0.l7.m2.1.1" xref="alg0.l7.m2.1.1.cmml">
          <mi id="alg0.l7.m2.1.1.2" mathsize="90%" xref="alg0.l7.m2.1.1.2.cmml">
           D
          </mi>
          <mrow id="alg0.l7.m2.1.1.3" xref="alg0.l7.m2.1.1.3.cmml">
           <mi id="alg0.l7.m2.1.1.3.2" mathsize="90%" xref="alg0.l7.m2.1.1.3.2.cmml">
            p
           </mi>
           <mo id="alg0.l7.m2.1.1.3.1" lspace="0em" rspace="0em" xref="alg0.l7.m2.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l7.m2.1.1.3.3" mathsize="90%" xref="alg0.l7.m2.1.1.3.3.cmml">
            r
           </mi>
           <mo id="alg0.l7.m2.1.1.3.1a" lspace="0em" rspace="0em" xref="alg0.l7.m2.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l7.m2.1.1.3.4" mathsize="90%" xref="alg0.l7.m2.1.1.3.4.cmml">
            e
           </mi>
           <mo id="alg0.l7.m2.1.1.3.1b" lspace="0em" rspace="0em" xref="alg0.l7.m2.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l7.m2.1.1.3.5" mathsize="90%" xref="alg0.l7.m2.1.1.3.5.cmml">
            f
           </mi>
          </mrow>
         </msub>
         <annotation-xml encoding="MathML-Content" id="alg0.l7.m2.1b">
          <apply id="alg0.l7.m2.1.1.cmml" xref="alg0.l7.m2.1.1">
           <csymbol cd="ambiguous" id="alg0.l7.m2.1.1.1.cmml" xref="alg0.l7.m2.1.1">
            subscript
           </csymbol>
           <ci id="alg0.l7.m2.1.1.2.cmml" xref="alg0.l7.m2.1.1.2">
            𝐷
           </ci>
           <apply id="alg0.l7.m2.1.1.3.cmml" xref="alg0.l7.m2.1.1.3">
            <times id="alg0.l7.m2.1.1.3.1.cmml" xref="alg0.l7.m2.1.1.3.1">
            </times>
            <ci id="alg0.l7.m2.1.1.3.2.cmml" xref="alg0.l7.m2.1.1.3.2">
             𝑝
            </ci>
            <ci id="alg0.l7.m2.1.1.3.3.cmml" xref="alg0.l7.m2.1.1.3.3">
             𝑟
            </ci>
            <ci id="alg0.l7.m2.1.1.3.4.cmml" xref="alg0.l7.m2.1.1.3.4">
             𝑒
            </ci>
            <ci id="alg0.l7.m2.1.1.3.5.cmml" xref="alg0.l7.m2.1.1.3.5">
             𝑓
            </ci>
           </apply>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l7.m2.1c">
          D_{pref}
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l7.4" style="font-size:90%;">
       </span>
      </div>
      <div class="ltx_listingline" id="alg0.l7a">
       <span class="ltx_tag ltx_tag_listingline">
        <span class="ltx_text" id="alg0.l7a.1.1.1" style="font-size:80%;">
         7:
        </span>
       </span>
       <span class="ltx_text" id="alg0.l7a.2" style="font-size:90%;">
       </span>
       <math alttext="D_{pref}" class="ltx_Math" display="inline" id="alg0.l7a.m1.1">
        <semantics id="alg0.l7a.m1.1a">
         <msub id="alg0.l7a.m1.1.1" xref="alg0.l7a.m1.1.1.cmml">
          <mi id="alg0.l7a.m1.1.1.2" mathsize="90%" xref="alg0.l7a.m1.1.1.2.cmml">
           D
          </mi>
          <mrow id="alg0.l7a.m1.1.1.3" xref="alg0.l7a.m1.1.1.3.cmml">
           <mi id="alg0.l7a.m1.1.1.3.2" mathsize="90%" xref="alg0.l7a.m1.1.1.3.2.cmml">
            p
           </mi>
           <mo id="alg0.l7a.m1.1.1.3.1" lspace="0em" rspace="0em" xref="alg0.l7a.m1.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l7a.m1.1.1.3.3" mathsize="90%" xref="alg0.l7a.m1.1.1.3.3.cmml">
            r
           </mi>
           <mo id="alg0.l7a.m1.1.1.3.1a" lspace="0em" rspace="0em" xref="alg0.l7a.m1.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l7a.m1.1.1.3.4" mathsize="90%" xref="alg0.l7a.m1.1.1.3.4.cmml">
            e
           </mi>
           <mo id="alg0.l7a.m1.1.1.3.1b" lspace="0em" rspace="0em" xref="alg0.l7a.m1.1.1.3.1.cmml">
            ​
           </mo>
           <mi id="alg0.l7a.m1.1.1.3.5" mathsize="90%" xref="alg0.l7a.m1.1.1.3.5.cmml">
            f
           </mi>
          </mrow>
         </msub>
         <annotation-xml encoding="MathML-Content" id="alg0.l7a.m1.1b">
          <apply id="alg0.l7a.m1.1.1.cmml" xref="alg0.l7a.m1.1.1">
           <csymbol cd="ambiguous" id="alg0.l7a.m1.1.1.1.cmml" xref="alg0.l7a.m1.1.1">
            subscript
           </csymbol>
           <ci id="alg0.l7a.m1.1.1.2.cmml" xref="alg0.l7a.m1.1.1.2">
            𝐷
           </ci>
           <apply id="alg0.l7a.m1.1.1.3.cmml" xref="alg0.l7a.m1.1.1.3">
            <times id="alg0.l7a.m1.1.1.3.1.cmml" xref="alg0.l7a.m1.1.1.3.1">
            </times>
            <ci id="alg0.l7a.m1.1.1.3.2.cmml" xref="alg0.l7a.m1.1.1.3.2">
             𝑝
            </ci>
            <ci id="alg0.l7a.m1.1.1.3.3.cmml" xref="alg0.l7a.m1.1.1.3.3">
             𝑟
            </ci>
            <ci id="alg0.l7a.m1.1.1.3.4.cmml" xref="alg0.l7a.m1.1.1.3.4">
             𝑒
            </ci>
            <ci id="alg0.l7a.m1.1.1.3.5.cmml" xref="alg0.l7a.m1.1.1.3.5">
             𝑓
            </ci>
           </apply>
          </apply>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="alg0.l7a.m1.1c">
          D_{pref}
         </annotation>
        </semantics>
       </math>
       <span class="ltx_text" id="alg0.l7a.3" style="font-size:90%;">
       </span>
      </div>
     </div>
     <figcaption class="ltx_caption" style="font-size:90%;">
      <span class="ltx_tag ltx_tag_float">
       <span class="ltx_text ltx_font_bold" id="alg1.5.1.1">
        Algorithm 1
       </span>
      </span>
      Action-Based Contrast Dataset Construction
     </figcaption>
    </figure>
   </figure>
   <section class="ltx_subsubsection" id="S3.SS2.SSS1">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.2.1
     </span>
     Construction of Preference Data
    </h4>
    <div class="ltx_para" id="S3.SS2.SSS1.p1">
     <p class="ltx_p" id="S3.SS2.SSS1.p1.12">
      The preference dataset primarily consists of contrastive
      <span class="ltx_text ltx_font_italic" id="S3.SS2.SSS1.p1.12.1">
       winning-losing
      </span>
      action pairs. That is, for each conversation turn
      <math alttext="t_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.1.m1.1">
       <semantics id="S3.SS2.SSS1.p1.1.m1.1a">
        <msub id="S3.SS2.SSS1.p1.1.m1.1.1" xref="S3.SS2.SSS1.p1.1.m1.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.1.m1.1.1.2" xref="S3.SS2.SSS1.p1.1.m1.1.1.2.cmml">
          t
         </mi>
         <mi id="S3.SS2.SSS1.p1.1.m1.1.1.3" xref="S3.SS2.SSS1.p1.1.m1.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.1.m1.1b">
         <apply id="S3.SS2.SSS1.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.1.m1.1.1.1.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1.2">
           𝑡
          </ci>
          <ci id="S3.SS2.SSS1.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS1.p1.1.m1.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.1.m1.1c">
         t_{i}
        </annotation>
       </semantics>
      </math>
      in a dataset
      <math alttext="D" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.2.m2.1">
       <semantics id="S3.SS2.SSS1.p1.2.m2.1a">
        <mi id="S3.SS2.SSS1.p1.2.m2.1.1" xref="S3.SS2.SSS1.p1.2.m2.1.1.cmml">
         D
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.2.m2.1b">
         <ci id="S3.SS2.SSS1.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS1.p1.2.m2.1.1">
          𝐷
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.2.m2.1c">
         D
        </annotation>
       </semantics>
      </math>
      , we can construct
      <math alttext="D_{pref}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.3.m3.1">
       <semantics id="S3.SS2.SSS1.p1.3.m3.1a">
        <msub id="S3.SS2.SSS1.p1.3.m3.1.1" xref="S3.SS2.SSS1.p1.3.m3.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.3.m3.1.1.2" xref="S3.SS2.SSS1.p1.3.m3.1.1.2.cmml">
          D
         </mi>
         <mrow id="S3.SS2.SSS1.p1.3.m3.1.1.3" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.cmml">
          <mi id="S3.SS2.SSS1.p1.3.m3.1.1.3.2" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.2.cmml">
           p
          </mi>
          <mo id="S3.SS2.SSS1.p1.3.m3.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS1.p1.3.m3.1.1.3.3" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.3.cmml">
           r
          </mi>
          <mo id="S3.SS2.SSS1.p1.3.m3.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS1.p1.3.m3.1.1.3.4" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.4.cmml">
           e
          </mi>
          <mo id="S3.SS2.SSS1.p1.3.m3.1.1.3.1b" lspace="0em" rspace="0em" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS1.p1.3.m3.1.1.3.5" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.5.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.3.m3.1b">
         <apply id="S3.SS2.SSS1.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.3.m3.1.1.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p1.3.m3.1.1.2.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.2">
           𝐷
          </ci>
          <apply id="S3.SS2.SSS1.p1.3.m3.1.1.3.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3">
           <times id="S3.SS2.SSS1.p1.3.m3.1.1.3.1.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS1.p1.3.m3.1.1.3.2.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.2">
            𝑝
           </ci>
           <ci id="S3.SS2.SSS1.p1.3.m3.1.1.3.3.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.3">
            𝑟
           </ci>
           <ci id="S3.SS2.SSS1.p1.3.m3.1.1.3.4.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.4">
            𝑒
           </ci>
           <ci id="S3.SS2.SSS1.p1.3.m3.1.1.3.5.cmml" xref="S3.SS2.SSS1.p1.3.m3.1.1.3.5">
            𝑓
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.3.m3.1c">
         D_{pref}
        </annotation>
       </semantics>
      </math>
      consisting of augmented
      <math alttext="t_{i}^{\prime}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.4.m4.1">
       <semantics id="S3.SS2.SSS1.p1.4.m4.1a">
        <msubsup id="S3.SS2.SSS1.p1.4.m4.1.1" xref="S3.SS2.SSS1.p1.4.m4.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.4.m4.1.1.2.2" xref="S3.SS2.SSS1.p1.4.m4.1.1.2.2.cmml">
          t
         </mi>
         <mi id="S3.SS2.SSS1.p1.4.m4.1.1.2.3" xref="S3.SS2.SSS1.p1.4.m4.1.1.2.3.cmml">
          i
         </mi>
         <mo id="S3.SS2.SSS1.p1.4.m4.1.1.3" xref="S3.SS2.SSS1.p1.4.m4.1.1.3.cmml">
          ′
         </mo>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.4.m4.1b">
         <apply id="S3.SS2.SSS1.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS2.SSS1.p1.4.m4.1.1.2.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1">
           <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.4.m4.1.1.2.1.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS1.p1.4.m4.1.1.2.2.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1.2.2">
            𝑡
           </ci>
           <ci id="S3.SS2.SSS1.p1.4.m4.1.1.2.3.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1.2.3">
            𝑖
           </ci>
          </apply>
          <ci id="S3.SS2.SSS1.p1.4.m4.1.1.3.cmml" xref="S3.SS2.SSS1.p1.4.m4.1.1.3">
           ′
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.4.m4.1c">
         t_{i}^{\prime}
        </annotation>
       </semantics>
      </math>
      tuples. We add rejected action
      <math alttext="a_{i}^{\prime}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.5.m5.1">
       <semantics id="S3.SS2.SSS1.p1.5.m5.1a">
        <msubsup id="S3.SS2.SSS1.p1.5.m5.1.1" xref="S3.SS2.SSS1.p1.5.m5.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.5.m5.1.1.2.2" xref="S3.SS2.SSS1.p1.5.m5.1.1.2.2.cmml">
          a
         </mi>
         <mi id="S3.SS2.SSS1.p1.5.m5.1.1.2.3" xref="S3.SS2.SSS1.p1.5.m5.1.1.2.3.cmml">
          i
         </mi>
         <mo id="S3.SS2.SSS1.p1.5.m5.1.1.3" xref="S3.SS2.SSS1.p1.5.m5.1.1.3.cmml">
          ′
         </mo>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.5.m5.1b">
         <apply id="S3.SS2.SSS1.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.5.m5.1.1.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS2.SSS1.p1.5.m5.1.1.2.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1">
           <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.5.m5.1.1.2.1.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS1.p1.5.m5.1.1.2.2.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1.2.2">
            𝑎
           </ci>
           <ci id="S3.SS2.SSS1.p1.5.m5.1.1.2.3.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1.2.3">
            𝑖
           </ci>
          </apply>
          <ci id="S3.SS2.SSS1.p1.5.m5.1.1.3.cmml" xref="S3.SS2.SSS1.p1.5.m5.1.1.3">
           ′
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.5.m5.1c">
         a_{i}^{\prime}
        </annotation>
       </semantics>
      </math>
      which is sampled from
      <math alttext="S\setminus a_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.6.m6.1">
       <semantics id="S3.SS2.SSS1.p1.6.m6.1a">
        <mrow id="S3.SS2.SSS1.p1.6.m6.1.1" xref="S3.SS2.SSS1.p1.6.m6.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.6.m6.1.1.2" xref="S3.SS2.SSS1.p1.6.m6.1.1.2.cmml">
          S
         </mi>
         <mo id="S3.SS2.SSS1.p1.6.m6.1.1.1" xref="S3.SS2.SSS1.p1.6.m6.1.1.1.cmml">
          ∖
         </mo>
         <msub id="S3.SS2.SSS1.p1.6.m6.1.1.3" xref="S3.SS2.SSS1.p1.6.m6.1.1.3.cmml">
          <mi id="S3.SS2.SSS1.p1.6.m6.1.1.3.2" xref="S3.SS2.SSS1.p1.6.m6.1.1.3.2.cmml">
           a
          </mi>
          <mi id="S3.SS2.SSS1.p1.6.m6.1.1.3.3" xref="S3.SS2.SSS1.p1.6.m6.1.1.3.3.cmml">
           i
          </mi>
         </msub>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.6.m6.1b">
         <apply id="S3.SS2.SSS1.p1.6.m6.1.1.cmml" xref="S3.SS2.SSS1.p1.6.m6.1.1">
          <setdiff id="S3.SS2.SSS1.p1.6.m6.1.1.1.cmml" xref="S3.SS2.SSS1.p1.6.m6.1.1.1">
          </setdiff>
          <ci id="S3.SS2.SSS1.p1.6.m6.1.1.2.cmml" xref="S3.SS2.SSS1.p1.6.m6.1.1.2">
           𝑆
          </ci>
          <apply id="S3.SS2.SSS1.p1.6.m6.1.1.3.cmml" xref="S3.SS2.SSS1.p1.6.m6.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.6.m6.1.1.3.1.cmml" xref="S3.SS2.SSS1.p1.6.m6.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS1.p1.6.m6.1.1.3.2.cmml" xref="S3.SS2.SSS1.p1.6.m6.1.1.3.2">
            𝑎
           </ci>
           <ci id="S3.SS2.SSS1.p1.6.m6.1.1.3.3.cmml" xref="S3.SS2.SSS1.p1.6.m6.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.6.m6.1c">
         S\setminus a_{i}
        </annotation>
       </semantics>
      </math>
      (note that in settings with a binary action space, such as ambiguous question answering, this is deterministic), winning response
      <math alttext="y_{w_{i}}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.7.m7.1">
       <semantics id="S3.SS2.SSS1.p1.7.m7.1a">
        <msub id="S3.SS2.SSS1.p1.7.m7.1.1" xref="S3.SS2.SSS1.p1.7.m7.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.7.m7.1.1.2" xref="S3.SS2.SSS1.p1.7.m7.1.1.2.cmml">
          y
         </mi>
         <msub id="S3.SS2.SSS1.p1.7.m7.1.1.3" xref="S3.SS2.SSS1.p1.7.m7.1.1.3.cmml">
          <mi id="S3.SS2.SSS1.p1.7.m7.1.1.3.2" xref="S3.SS2.SSS1.p1.7.m7.1.1.3.2.cmml">
           w
          </mi>
          <mi id="S3.SS2.SSS1.p1.7.m7.1.1.3.3" xref="S3.SS2.SSS1.p1.7.m7.1.1.3.3.cmml">
           i
          </mi>
         </msub>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.7.m7.1b">
         <apply id="S3.SS2.SSS1.p1.7.m7.1.1.cmml" xref="S3.SS2.SSS1.p1.7.m7.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.7.m7.1.1.1.cmml" xref="S3.SS2.SSS1.p1.7.m7.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p1.7.m7.1.1.2.cmml" xref="S3.SS2.SSS1.p1.7.m7.1.1.2">
           𝑦
          </ci>
          <apply id="S3.SS2.SSS1.p1.7.m7.1.1.3.cmml" xref="S3.SS2.SSS1.p1.7.m7.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.7.m7.1.1.3.1.cmml" xref="S3.SS2.SSS1.p1.7.m7.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS1.p1.7.m7.1.1.3.2.cmml" xref="S3.SS2.SSS1.p1.7.m7.1.1.3.2">
            𝑤
           </ci>
           <ci id="S3.SS2.SSS1.p1.7.m7.1.1.3.3.cmml" xref="S3.SS2.SSS1.p1.7.m7.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.7.m7.1c">
         y_{w_{i}}
        </annotation>
       </semantics>
      </math>
      which is equal to
      <math alttext="r_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.8.m8.1">
       <semantics id="S3.SS2.SSS1.p1.8.m8.1a">
        <msub id="S3.SS2.SSS1.p1.8.m8.1.1" xref="S3.SS2.SSS1.p1.8.m8.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.8.m8.1.1.2" xref="S3.SS2.SSS1.p1.8.m8.1.1.2.cmml">
          r
         </mi>
         <mi id="S3.SS2.SSS1.p1.8.m8.1.1.3" xref="S3.SS2.SSS1.p1.8.m8.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.8.m8.1b">
         <apply id="S3.SS2.SSS1.p1.8.m8.1.1.cmml" xref="S3.SS2.SSS1.p1.8.m8.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.8.m8.1.1.1.cmml" xref="S3.SS2.SSS1.p1.8.m8.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p1.8.m8.1.1.2.cmml" xref="S3.SS2.SSS1.p1.8.m8.1.1.2">
           𝑟
          </ci>
          <ci id="S3.SS2.SSS1.p1.8.m8.1.1.3.cmml" xref="S3.SS2.SSS1.p1.8.m8.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.8.m8.1c">
         r_{i}
        </annotation>
       </semantics>
      </math>
      , and
      <math alttext="y_{l_{i}}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.9.m9.1">
       <semantics id="S3.SS2.SSS1.p1.9.m9.1a">
        <msub id="S3.SS2.SSS1.p1.9.m9.1.1" xref="S3.SS2.SSS1.p1.9.m9.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.9.m9.1.1.2" xref="S3.SS2.SSS1.p1.9.m9.1.1.2.cmml">
          y
         </mi>
         <msub id="S3.SS2.SSS1.p1.9.m9.1.1.3" xref="S3.SS2.SSS1.p1.9.m9.1.1.3.cmml">
          <mi id="S3.SS2.SSS1.p1.9.m9.1.1.3.2" xref="S3.SS2.SSS1.p1.9.m9.1.1.3.2.cmml">
           l
          </mi>
          <mi id="S3.SS2.SSS1.p1.9.m9.1.1.3.3" xref="S3.SS2.SSS1.p1.9.m9.1.1.3.3.cmml">
           i
          </mi>
         </msub>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.9.m9.1b">
         <apply id="S3.SS2.SSS1.p1.9.m9.1.1.cmml" xref="S3.SS2.SSS1.p1.9.m9.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.9.m9.1.1.1.cmml" xref="S3.SS2.SSS1.p1.9.m9.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p1.9.m9.1.1.2.cmml" xref="S3.SS2.SSS1.p1.9.m9.1.1.2">
           𝑦
          </ci>
          <apply id="S3.SS2.SSS1.p1.9.m9.1.1.3.cmml" xref="S3.SS2.SSS1.p1.9.m9.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.9.m9.1.1.3.1.cmml" xref="S3.SS2.SSS1.p1.9.m9.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS1.p1.9.m9.1.1.3.2.cmml" xref="S3.SS2.SSS1.p1.9.m9.1.1.3.2">
            𝑙
           </ci>
           <ci id="S3.SS2.SSS1.p1.9.m9.1.1.3.3.cmml" xref="S3.SS2.SSS1.p1.9.m9.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.9.m9.1c">
         y_{l_{i}}
        </annotation>
       </semantics>
      </math>
      which is a losing response sampled using
      <math alttext="M" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.10.m10.1">
       <semantics id="S3.SS2.SSS1.p1.10.m10.1a">
        <mi id="S3.SS2.SSS1.p1.10.m10.1.1" xref="S3.SS2.SSS1.p1.10.m10.1.1.cmml">
         M
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.10.m10.1b">
         <ci id="S3.SS2.SSS1.p1.10.m10.1.1.cmml" xref="S3.SS2.SSS1.p1.10.m10.1.1">
          𝑀
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.10.m10.1c">
         M
        </annotation>
       </semantics>
      </math>
      <span class="ltx_note ltx_role_footnote" id="footnote4">
       <sup class="ltx_note_mark">
        4
       </sup>
       <span class="ltx_note_outer">
        <span class="ltx_note_content">
         <sup class="ltx_note_mark">
          4
         </sup>
         <span class="ltx_tag ltx_tag_note">
          4
         </span>
         The losing response is sampled as
         <math alttext="y_{li}\sim P_{M}(\cdot|p_{i},a_{i}^{\prime})" class="ltx_math_unparsed" display="inline" id="footnote4.m1.1">
          <semantics id="footnote4.m1.1b">
           <mrow id="footnote4.m1.1c">
            <msub id="footnote4.m1.1.1">
             <mi id="footnote4.m1.1.1.2">
              y
             </mi>
             <mrow id="footnote4.m1.1.1.3">
              <mi id="footnote4.m1.1.1.3.2">
               l
              </mi>
              <mo id="footnote4.m1.1.1.3.1" lspace="0em" rspace="0em">
               ​
              </mo>
              <mi id="footnote4.m1.1.1.3.3">
               i
              </mi>
             </mrow>
            </msub>
            <mo id="footnote4.m1.1.2">
             ∼
            </mo>
            <msub id="footnote4.m1.1.3">
             <mi id="footnote4.m1.1.3.2">
              P
             </mi>
             <mi id="footnote4.m1.1.3.3">
              M
             </mi>
            </msub>
            <mrow id="footnote4.m1.1.4">
             <mo id="footnote4.m1.1.4.1" stretchy="false">
              (
             </mo>
             <mo id="footnote4.m1.1.4.2" lspace="0em" rspace="0em">
              ⋅
             </mo>
             <mo fence="false" id="footnote4.m1.1.4.3" rspace="0.167em" stretchy="false">
              |
             </mo>
             <msub id="footnote4.m1.1.4.4">
              <mi id="footnote4.m1.1.4.4.2">
               p
              </mi>
              <mi id="footnote4.m1.1.4.4.3">
               i
              </mi>
             </msub>
             <mo id="footnote4.m1.1.4.5">
              ,
             </mo>
             <msubsup id="footnote4.m1.1.4.6">
              <mi id="footnote4.m1.1.4.6.2.2">
               a
              </mi>
              <mi id="footnote4.m1.1.4.6.2.3">
               i
              </mi>
              <mo id="footnote4.m1.1.4.6.3">
               ′
              </mo>
             </msubsup>
             <mo id="footnote4.m1.1.4.7" stretchy="false">
              )
             </mo>
            </mrow>
           </mrow>
           <annotation encoding="application/x-tex" id="footnote4.m1.1d">
            y_{li}\sim P_{M}(\cdot|p_{i},a_{i}^{\prime})
           </annotation>
          </semantics>
         </math>
         after converting actions into instructions as in
         <cite class="ltx_cite ltx_citemacro_citep">
          [
          <a class="ltx_ref" href="#bib.bib24" title="">
           24
          </a>
          ]
         </cite>
         .
        </span>
       </span>
      </span>
      . See Algorithm
      <a class="ltx_ref" href="#alg1" title="Algorithm 1 ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        1
       </span>
      </a>
      .
LLM-generated responses can be more likely to be faithful to some prescribed dialogue act than the supposed ground-truth dialogue act annotations of utterances in many crowd-sourced dialogue datasets
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib24" title="">
        24
       </a>
       ]
      </cite>
      . As such, given that each
      <math alttext="a_{i}^{\prime}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.11.m11.1">
       <semantics id="S3.SS2.SSS1.p1.11.m11.1a">
        <msubsup id="S3.SS2.SSS1.p1.11.m11.1.1" xref="S3.SS2.SSS1.p1.11.m11.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.11.m11.1.1.2.2" xref="S3.SS2.SSS1.p1.11.m11.1.1.2.2.cmml">
          a
         </mi>
         <mi id="S3.SS2.SSS1.p1.11.m11.1.1.2.3" xref="S3.SS2.SSS1.p1.11.m11.1.1.2.3.cmml">
          i
         </mi>
         <mo id="S3.SS2.SSS1.p1.11.m11.1.1.3" xref="S3.SS2.SSS1.p1.11.m11.1.1.3.cmml">
          ′
         </mo>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.11.m11.1b">
         <apply id="S3.SS2.SSS1.p1.11.m11.1.1.cmml" xref="S3.SS2.SSS1.p1.11.m11.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.11.m11.1.1.1.cmml" xref="S3.SS2.SSS1.p1.11.m11.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS2.SSS1.p1.11.m11.1.1.2.cmml" xref="S3.SS2.SSS1.p1.11.m11.1.1">
           <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.11.m11.1.1.2.1.cmml" xref="S3.SS2.SSS1.p1.11.m11.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS1.p1.11.m11.1.1.2.2.cmml" xref="S3.SS2.SSS1.p1.11.m11.1.1.2.2">
            𝑎
           </ci>
           <ci id="S3.SS2.SSS1.p1.11.m11.1.1.2.3.cmml" xref="S3.SS2.SSS1.p1.11.m11.1.1.2.3">
            𝑖
           </ci>
          </apply>
          <ci id="S3.SS2.SSS1.p1.11.m11.1.1.3.cmml" xref="S3.SS2.SSS1.p1.11.m11.1.1.3">
           ′
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.11.m11.1c">
         a_{i}^{\prime}
        </annotation>
       </semantics>
      </math>
      is pre-defined when constructing
      <math alttext="D_{pref}" class="ltx_Math" display="inline" id="S3.SS2.SSS1.p1.12.m12.1">
       <semantics id="S3.SS2.SSS1.p1.12.m12.1a">
        <msub id="S3.SS2.SSS1.p1.12.m12.1.1" xref="S3.SS2.SSS1.p1.12.m12.1.1.cmml">
         <mi id="S3.SS2.SSS1.p1.12.m12.1.1.2" xref="S3.SS2.SSS1.p1.12.m12.1.1.2.cmml">
          D
         </mi>
         <mrow id="S3.SS2.SSS1.p1.12.m12.1.1.3" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.cmml">
          <mi id="S3.SS2.SSS1.p1.12.m12.1.1.3.2" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.2.cmml">
           p
          </mi>
          <mo id="S3.SS2.SSS1.p1.12.m12.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS1.p1.12.m12.1.1.3.3" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.3.cmml">
           r
          </mi>
          <mo id="S3.SS2.SSS1.p1.12.m12.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS1.p1.12.m12.1.1.3.4" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.4.cmml">
           e
          </mi>
          <mo id="S3.SS2.SSS1.p1.12.m12.1.1.3.1b" lspace="0em" rspace="0em" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS1.p1.12.m12.1.1.3.5" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.5.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS1.p1.12.m12.1b">
         <apply id="S3.SS2.SSS1.p1.12.m12.1.1.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS1.p1.12.m12.1.1.1.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS1.p1.12.m12.1.1.2.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1.2">
           𝐷
          </ci>
          <apply id="S3.SS2.SSS1.p1.12.m12.1.1.3.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1.3">
           <times id="S3.SS2.SSS1.p1.12.m12.1.1.3.1.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS1.p1.12.m12.1.1.3.2.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.2">
            𝑝
           </ci>
           <ci id="S3.SS2.SSS1.p1.12.m12.1.1.3.3.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.3">
            𝑟
           </ci>
           <ci id="S3.SS2.SSS1.p1.12.m12.1.1.3.4.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.4">
            𝑒
           </ci>
           <ci id="S3.SS2.SSS1.p1.12.m12.1.1.3.5.cmml" xref="S3.SS2.SSS1.p1.12.m12.1.1.3.5">
            𝑓
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS1.p1.12.m12.1c">
         D_{pref}
        </annotation>
       </semantics>
      </math>
      , we use a high capacity LLM rather than tuning a smaller one or asking crowdworkers for losing response construction (more details in Appendix
      <a class="ltx_ref" href="#A5" title="Appendix E Conditional Generation Model Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        E
       </span>
      </a>
      ).
     </p>
    </div>
   </section>
   <section class="ltx_subsubsection" id="S3.SS2.SSS2">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.2.2
     </span>
     Self-Training Using On-policy Conversation Trajectory Simulation
    </h4>
    <div class="ltx_para" id="S3.SS2.SSS2.p1">
     <p class="ltx_p" id="S3.SS2.SSS2.p1.20">
      As in DPO training, we continuously sample batches from
      <math alttext="D_{pref}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.1.m1.1">
       <semantics id="S3.SS2.SSS2.p1.1.m1.1a">
        <msub id="S3.SS2.SSS2.p1.1.m1.1.1" xref="S3.SS2.SSS2.p1.1.m1.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.1.m1.1.1.2" xref="S3.SS2.SSS2.p1.1.m1.1.1.2.cmml">
          D
         </mi>
         <mrow id="S3.SS2.SSS2.p1.1.m1.1.1.3" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.cmml">
          <mi id="S3.SS2.SSS2.p1.1.m1.1.1.3.2" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.2.cmml">
           p
          </mi>
          <mo id="S3.SS2.SSS2.p1.1.m1.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS2.p1.1.m1.1.1.3.3" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.3.cmml">
           r
          </mi>
          <mo id="S3.SS2.SSS2.p1.1.m1.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS2.p1.1.m1.1.1.3.4" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.4.cmml">
           e
          </mi>
          <mo id="S3.SS2.SSS2.p1.1.m1.1.1.3.1b" lspace="0em" rspace="0em" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS2.p1.1.m1.1.1.3.5" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.5.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.1.m1.1b">
         <apply id="S3.SS2.SSS2.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.1.m1.1.1.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.2">
           𝐷
          </ci>
          <apply id="S3.SS2.SSS2.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.3">
           <times id="S3.SS2.SSS2.p1.1.m1.1.1.3.1.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS2.p1.1.m1.1.1.3.2.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.2">
            𝑝
           </ci>
           <ci id="S3.SS2.SSS2.p1.1.m1.1.1.3.3.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.3">
            𝑟
           </ci>
           <ci id="S3.SS2.SSS2.p1.1.m1.1.1.3.4.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.4">
            𝑒
           </ci>
           <ci id="S3.SS2.SSS2.p1.1.m1.1.1.3.5.cmml" xref="S3.SS2.SSS2.p1.1.m1.1.1.3.5">
            𝑓
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.1.m1.1c">
         D_{pref}
        </annotation>
       </semantics>
      </math>
      . Although each conversation turn
      <math alttext="t_{j}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.2.m2.1">
       <semantics id="S3.SS2.SSS2.p1.2.m2.1a">
        <msub id="S3.SS2.SSS2.p1.2.m2.1.1" xref="S3.SS2.SSS2.p1.2.m2.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.2.m2.1.1.2" xref="S3.SS2.SSS2.p1.2.m2.1.1.2.cmml">
          t
         </mi>
         <mi id="S3.SS2.SSS2.p1.2.m2.1.1.3" xref="S3.SS2.SSS2.p1.2.m2.1.1.3.cmml">
          j
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.2.m2.1b">
         <apply id="S3.SS2.SSS2.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.2.m2.1.1.2.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1.2">
           𝑡
          </ci>
          <ci id="S3.SS2.SSS2.p1.2.m2.1.1.3.cmml" xref="S3.SS2.SSS2.p1.2.m2.1.1.3">
           𝑗
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.2.m2.1c">
         t_{j}
        </annotation>
       </semantics>
      </math>
      in each batch
      <math alttext="i" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.3.m3.1">
       <semantics id="S3.SS2.SSS2.p1.3.m3.1a">
        <mi id="S3.SS2.SSS2.p1.3.m3.1.1" xref="S3.SS2.SSS2.p1.3.m3.1.1.cmml">
         i
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.3.m3.1b">
         <ci id="S3.SS2.SSS2.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS2.p1.3.m3.1.1">
          𝑖
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.3.m3.1c">
         i
        </annotation>
       </semantics>
      </math>
      has a default winning (
      <math alttext="y_{wi}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.4.m4.1">
       <semantics id="S3.SS2.SSS2.p1.4.m4.1a">
        <msub id="S3.SS2.SSS2.p1.4.m4.1.1" xref="S3.SS2.SSS2.p1.4.m4.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.4.m4.1.1.2" xref="S3.SS2.SSS2.p1.4.m4.1.1.2.cmml">
          y
         </mi>
         <mrow id="S3.SS2.SSS2.p1.4.m4.1.1.3" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.cmml">
          <mi id="S3.SS2.SSS2.p1.4.m4.1.1.3.2" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2.cmml">
           w
          </mi>
          <mo id="S3.SS2.SSS2.p1.4.m4.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS2.p1.4.m4.1.1.3.3" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3.cmml">
           i
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.4.m4.1b">
         <apply id="S3.SS2.SSS2.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.4.m4.1.1.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.2">
           𝑦
          </ci>
          <apply id="S3.SS2.SSS2.p1.4.m4.1.1.3.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3">
           <times id="S3.SS2.SSS2.p1.4.m4.1.1.3.1.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS2.p1.4.m4.1.1.3.2.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.2">
            𝑤
           </ci>
           <ci id="S3.SS2.SSS2.p1.4.m4.1.1.3.3.cmml" xref="S3.SS2.SSS2.p1.4.m4.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.4.m4.1c">
         y_{wi}
        </annotation>
       </semantics>
      </math>
      ) and losing (
      <math alttext="y_{li}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.5.m5.1">
       <semantics id="S3.SS2.SSS2.p1.5.m5.1a">
        <msub id="S3.SS2.SSS2.p1.5.m5.1.1" xref="S3.SS2.SSS2.p1.5.m5.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.5.m5.1.1.2" xref="S3.SS2.SSS2.p1.5.m5.1.1.2.cmml">
          y
         </mi>
         <mrow id="S3.SS2.SSS2.p1.5.m5.1.1.3" xref="S3.SS2.SSS2.p1.5.m5.1.1.3.cmml">
          <mi id="S3.SS2.SSS2.p1.5.m5.1.1.3.2" xref="S3.SS2.SSS2.p1.5.m5.1.1.3.2.cmml">
           l
          </mi>
          <mo id="S3.SS2.SSS2.p1.5.m5.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS2.p1.5.m5.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS2.p1.5.m5.1.1.3.3" xref="S3.SS2.SSS2.p1.5.m5.1.1.3.3.cmml">
           i
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.5.m5.1b">
         <apply id="S3.SS2.SSS2.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.5.m5.1.1.1.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.5.m5.1.1.2.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1.2">
           𝑦
          </ci>
          <apply id="S3.SS2.SSS2.p1.5.m5.1.1.3.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1.3">
           <times id="S3.SS2.SSS2.p1.5.m5.1.1.3.1.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS2.p1.5.m5.1.1.3.2.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1.3.2">
            𝑙
           </ci>
           <ci id="S3.SS2.SSS2.p1.5.m5.1.1.3.3.cmml" xref="S3.SS2.SSS2.p1.5.m5.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.5.m5.1c">
         y_{li}
        </annotation>
       </semantics>
      </math>
      ) response, we also sample an on-policy response
      <math alttext="y_{j}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.6.m6.1">
       <semantics id="S3.SS2.SSS2.p1.6.m6.1a">
        <msub id="S3.SS2.SSS2.p1.6.m6.1.1" xref="S3.SS2.SSS2.p1.6.m6.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.6.m6.1.1.2" xref="S3.SS2.SSS2.p1.6.m6.1.1.2.cmml">
          y
         </mi>
         <mi id="S3.SS2.SSS2.p1.6.m6.1.1.3" xref="S3.SS2.SSS2.p1.6.m6.1.1.3.cmml">
          j
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.6.m6.1b">
         <apply id="S3.SS2.SSS2.p1.6.m6.1.1.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.6.m6.1.1.1.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.6.m6.1.1.2.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1.2">
           𝑦
          </ci>
          <ci id="S3.SS2.SSS2.p1.6.m6.1.1.3.cmml" xref="S3.SS2.SSS2.p1.6.m6.1.1.3">
           𝑗
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.6.m6.1c">
         y_{j}
        </annotation>
       </semantics>
      </math>
      from
      <math alttext="\pi_{\theta_{i}}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.7.m7.1">
       <semantics id="S3.SS2.SSS2.p1.7.m7.1a">
        <msub id="S3.SS2.SSS2.p1.7.m7.1.1" xref="S3.SS2.SSS2.p1.7.m7.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.7.m7.1.1.2" xref="S3.SS2.SSS2.p1.7.m7.1.1.2.cmml">
          π
         </mi>
         <msub id="S3.SS2.SSS2.p1.7.m7.1.1.3" xref="S3.SS2.SSS2.p1.7.m7.1.1.3.cmml">
          <mi id="S3.SS2.SSS2.p1.7.m7.1.1.3.2" xref="S3.SS2.SSS2.p1.7.m7.1.1.3.2.cmml">
           θ
          </mi>
          <mi id="S3.SS2.SSS2.p1.7.m7.1.1.3.3" xref="S3.SS2.SSS2.p1.7.m7.1.1.3.3.cmml">
           i
          </mi>
         </msub>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.7.m7.1b">
         <apply id="S3.SS2.SSS2.p1.7.m7.1.1.cmml" xref="S3.SS2.SSS2.p1.7.m7.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.7.m7.1.1.1.cmml" xref="S3.SS2.SSS2.p1.7.m7.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.7.m7.1.1.2.cmml" xref="S3.SS2.SSS2.p1.7.m7.1.1.2">
           𝜋
          </ci>
          <apply id="S3.SS2.SSS2.p1.7.m7.1.1.3.cmml" xref="S3.SS2.SSS2.p1.7.m7.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.7.m7.1.1.3.1.cmml" xref="S3.SS2.SSS2.p1.7.m7.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS2.p1.7.m7.1.1.3.2.cmml" xref="S3.SS2.SSS2.p1.7.m7.1.1.3.2">
            𝜃
           </ci>
           <ci id="S3.SS2.SSS2.p1.7.m7.1.1.3.3.cmml" xref="S3.SS2.SSS2.p1.7.m7.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.7.m7.1c">
         \pi_{\theta_{i}}
        </annotation>
       </semantics>
      </math>
      . We use
      <math alttext="A" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.8.m8.1">
       <semantics id="S3.SS2.SSS2.p1.8.m8.1a">
        <mi id="S3.SS2.SSS2.p1.8.m8.1.1" xref="S3.SS2.SSS2.p1.8.m8.1.1.cmml">
         A
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.8.m8.1b">
         <ci id="S3.SS2.SSS2.p1.8.m8.1.1.cmml" xref="S3.SS2.SSS2.p1.8.m8.1.1">
          𝐴
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.8.m8.1c">
         A
        </annotation>
       </semantics>
      </math>
      to determine whether the implicit action of
      <math alttext="y_{j}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.9.m9.1">
       <semantics id="S3.SS2.SSS2.p1.9.m9.1a">
        <msub id="S3.SS2.SSS2.p1.9.m9.1.1" xref="S3.SS2.SSS2.p1.9.m9.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.9.m9.1.1.2" xref="S3.SS2.SSS2.p1.9.m9.1.1.2.cmml">
          y
         </mi>
         <mi id="S3.SS2.SSS2.p1.9.m9.1.1.3" xref="S3.SS2.SSS2.p1.9.m9.1.1.3.cmml">
          j
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.9.m9.1b">
         <apply id="S3.SS2.SSS2.p1.9.m9.1.1.cmml" xref="S3.SS2.SSS2.p1.9.m9.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.9.m9.1.1.1.cmml" xref="S3.SS2.SSS2.p1.9.m9.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.9.m9.1.1.2.cmml" xref="S3.SS2.SSS2.p1.9.m9.1.1.2">
           𝑦
          </ci>
          <ci id="S3.SS2.SSS2.p1.9.m9.1.1.3.cmml" xref="S3.SS2.SSS2.p1.9.m9.1.1.3">
           𝑗
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.9.m9.1c">
         y_{j}
        </annotation>
       </semantics>
      </math>
      <span class="ltx_note ltx_role_footnote" id="footnote5">
       <sup class="ltx_note_mark">
        5
       </sup>
       <span class="ltx_note_outer">
        <span class="ltx_note_content">
         <sup class="ltx_note_mark">
          5
         </sup>
         <span class="ltx_tag ltx_tag_note">
          5
         </span>
         Classifying
         <math alttext="y_{j}" class="ltx_Math" display="inline" id="footnote5.m1.1">
          <semantics id="footnote5.m1.1b">
           <msub id="footnote5.m1.1.1" xref="footnote5.m1.1.1.cmml">
            <mi id="footnote5.m1.1.1.2" xref="footnote5.m1.1.1.2.cmml">
             y
            </mi>
            <mi id="footnote5.m1.1.1.3" xref="footnote5.m1.1.1.3.cmml">
             j
            </mi>
           </msub>
           <annotation-xml encoding="MathML-Content" id="footnote5.m1.1c">
            <apply id="footnote5.m1.1.1.cmml" xref="footnote5.m1.1.1">
             <csymbol cd="ambiguous" id="footnote5.m1.1.1.1.cmml" xref="footnote5.m1.1.1">
              subscript
             </csymbol>
             <ci id="footnote5.m1.1.1.2.cmml" xref="footnote5.m1.1.1.2">
              𝑦
             </ci>
             <ci id="footnote5.m1.1.1.3.cmml" xref="footnote5.m1.1.1.3">
              𝑗
             </ci>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="footnote5.m1.1d">
            y_{j}
           </annotation>
          </semantics>
         </math>
         ’s action optimizes the following:
         <math alttext="\operatorname*{argmax}_{a_{k}\in S}P_{A}(a_{k}|p_{j},y_{j})" class="ltx_Math" display="inline" id="footnote5.m2.1">
          <semantics id="footnote5.m2.1b">
           <mrow id="footnote5.m2.1.1" xref="footnote5.m2.1.1.cmml">
            <mrow id="footnote5.m2.1.1.3" xref="footnote5.m2.1.1.3.cmml">
             <munder id="footnote5.m2.1.1.3.1" xref="footnote5.m2.1.1.3.1.cmml">
              <mo id="footnote5.m2.1.1.3.1.2" xref="footnote5.m2.1.1.3.1.2.cmml">
               argmax
              </mo>
              <mrow id="footnote5.m2.1.1.3.1.3" xref="footnote5.m2.1.1.3.1.3.cmml">
               <msub id="footnote5.m2.1.1.3.1.3.2" xref="footnote5.m2.1.1.3.1.3.2.cmml">
                <mi id="footnote5.m2.1.1.3.1.3.2.2" xref="footnote5.m2.1.1.3.1.3.2.2.cmml">
                 a
                </mi>
                <mi id="footnote5.m2.1.1.3.1.3.2.3" xref="footnote5.m2.1.1.3.1.3.2.3.cmml">
                 k
                </mi>
               </msub>
               <mo id="footnote5.m2.1.1.3.1.3.1" xref="footnote5.m2.1.1.3.1.3.1.cmml">
                ∈
               </mo>
               <mi id="footnote5.m2.1.1.3.1.3.3" xref="footnote5.m2.1.1.3.1.3.3.cmml">
                S
               </mi>
              </mrow>
             </munder>
             <msub id="footnote5.m2.1.1.3.2" xref="footnote5.m2.1.1.3.2.cmml">
              <mi id="footnote5.m2.1.1.3.2.2" xref="footnote5.m2.1.1.3.2.2.cmml">
               P
              </mi>
              <mi id="footnote5.m2.1.1.3.2.3" xref="footnote5.m2.1.1.3.2.3.cmml">
               A
              </mi>
             </msub>
            </mrow>
            <mo id="footnote5.m2.1.1.2" lspace="0em" rspace="0em" xref="footnote5.m2.1.1.2.cmml">
             ​
            </mo>
            <mrow id="footnote5.m2.1.1.1.1" xref="footnote5.m2.1.1.1.1.1.cmml">
             <mo id="footnote5.m2.1.1.1.1.2" stretchy="false" xref="footnote5.m2.1.1.1.1.1.cmml">
              (
             </mo>
             <mrow id="footnote5.m2.1.1.1.1.1" xref="footnote5.m2.1.1.1.1.1.cmml">
              <msub id="footnote5.m2.1.1.1.1.1.4" xref="footnote5.m2.1.1.1.1.1.4.cmml">
               <mi id="footnote5.m2.1.1.1.1.1.4.2" xref="footnote5.m2.1.1.1.1.1.4.2.cmml">
                a
               </mi>
               <mi id="footnote5.m2.1.1.1.1.1.4.3" xref="footnote5.m2.1.1.1.1.1.4.3.cmml">
                k
               </mi>
              </msub>
              <mo fence="false" id="footnote5.m2.1.1.1.1.1.3" xref="footnote5.m2.1.1.1.1.1.3.cmml">
               |
              </mo>
              <mrow id="footnote5.m2.1.1.1.1.1.2.2" xref="footnote5.m2.1.1.1.1.1.2.3.cmml">
               <msub id="footnote5.m2.1.1.1.1.1.1.1.1" xref="footnote5.m2.1.1.1.1.1.1.1.1.cmml">
                <mi id="footnote5.m2.1.1.1.1.1.1.1.1.2" xref="footnote5.m2.1.1.1.1.1.1.1.1.2.cmml">
                 p
                </mi>
                <mi id="footnote5.m2.1.1.1.1.1.1.1.1.3" xref="footnote5.m2.1.1.1.1.1.1.1.1.3.cmml">
                 j
                </mi>
               </msub>
               <mo id="footnote5.m2.1.1.1.1.1.2.2.3" xref="footnote5.m2.1.1.1.1.1.2.3.cmml">
                ,
               </mo>
               <msub id="footnote5.m2.1.1.1.1.1.2.2.2" xref="footnote5.m2.1.1.1.1.1.2.2.2.cmml">
                <mi id="footnote5.m2.1.1.1.1.1.2.2.2.2" xref="footnote5.m2.1.1.1.1.1.2.2.2.2.cmml">
                 y
                </mi>
                <mi id="footnote5.m2.1.1.1.1.1.2.2.2.3" xref="footnote5.m2.1.1.1.1.1.2.2.2.3.cmml">
                 j
                </mi>
               </msub>
              </mrow>
             </mrow>
             <mo id="footnote5.m2.1.1.1.1.3" stretchy="false" xref="footnote5.m2.1.1.1.1.1.cmml">
              )
             </mo>
            </mrow>
           </mrow>
           <annotation-xml encoding="MathML-Content" id="footnote5.m2.1c">
            <apply id="footnote5.m2.1.1.cmml" xref="footnote5.m2.1.1">
             <times id="footnote5.m2.1.1.2.cmml" xref="footnote5.m2.1.1.2">
             </times>
             <apply id="footnote5.m2.1.1.3.cmml" xref="footnote5.m2.1.1.3">
              <apply id="footnote5.m2.1.1.3.1.cmml" xref="footnote5.m2.1.1.3.1">
               <csymbol cd="ambiguous" id="footnote5.m2.1.1.3.1.1.cmml" xref="footnote5.m2.1.1.3.1">
                subscript
               </csymbol>
               <ci id="footnote5.m2.1.1.3.1.2.cmml" xref="footnote5.m2.1.1.3.1.2">
                argmax
               </ci>
               <apply id="footnote5.m2.1.1.3.1.3.cmml" xref="footnote5.m2.1.1.3.1.3">
                <in id="footnote5.m2.1.1.3.1.3.1.cmml" xref="footnote5.m2.1.1.3.1.3.1">
                </in>
                <apply id="footnote5.m2.1.1.3.1.3.2.cmml" xref="footnote5.m2.1.1.3.1.3.2">
                 <csymbol cd="ambiguous" id="footnote5.m2.1.1.3.1.3.2.1.cmml" xref="footnote5.m2.1.1.3.1.3.2">
                  subscript
                 </csymbol>
                 <ci id="footnote5.m2.1.1.3.1.3.2.2.cmml" xref="footnote5.m2.1.1.3.1.3.2.2">
                  𝑎
                 </ci>
                 <ci id="footnote5.m2.1.1.3.1.3.2.3.cmml" xref="footnote5.m2.1.1.3.1.3.2.3">
                  𝑘
                 </ci>
                </apply>
                <ci id="footnote5.m2.1.1.3.1.3.3.cmml" xref="footnote5.m2.1.1.3.1.3.3">
                 𝑆
                </ci>
               </apply>
              </apply>
              <apply id="footnote5.m2.1.1.3.2.cmml" xref="footnote5.m2.1.1.3.2">
               <csymbol cd="ambiguous" id="footnote5.m2.1.1.3.2.1.cmml" xref="footnote5.m2.1.1.3.2">
                subscript
               </csymbol>
               <ci id="footnote5.m2.1.1.3.2.2.cmml" xref="footnote5.m2.1.1.3.2.2">
                𝑃
               </ci>
               <ci id="footnote5.m2.1.1.3.2.3.cmml" xref="footnote5.m2.1.1.3.2.3">
                𝐴
               </ci>
              </apply>
             </apply>
             <apply id="footnote5.m2.1.1.1.1.1.cmml" xref="footnote5.m2.1.1.1.1">
              <csymbol cd="latexml" id="footnote5.m2.1.1.1.1.1.3.cmml" xref="footnote5.m2.1.1.1.1.1.3">
               conditional
              </csymbol>
              <apply id="footnote5.m2.1.1.1.1.1.4.cmml" xref="footnote5.m2.1.1.1.1.1.4">
               <csymbol cd="ambiguous" id="footnote5.m2.1.1.1.1.1.4.1.cmml" xref="footnote5.m2.1.1.1.1.1.4">
                subscript
               </csymbol>
               <ci id="footnote5.m2.1.1.1.1.1.4.2.cmml" xref="footnote5.m2.1.1.1.1.1.4.2">
                𝑎
               </ci>
               <ci id="footnote5.m2.1.1.1.1.1.4.3.cmml" xref="footnote5.m2.1.1.1.1.1.4.3">
                𝑘
               </ci>
              </apply>
              <list id="footnote5.m2.1.1.1.1.1.2.3.cmml" xref="footnote5.m2.1.1.1.1.1.2.2">
               <apply id="footnote5.m2.1.1.1.1.1.1.1.1.cmml" xref="footnote5.m2.1.1.1.1.1.1.1.1">
                <csymbol cd="ambiguous" id="footnote5.m2.1.1.1.1.1.1.1.1.1.cmml" xref="footnote5.m2.1.1.1.1.1.1.1.1">
                 subscript
                </csymbol>
                <ci id="footnote5.m2.1.1.1.1.1.1.1.1.2.cmml" xref="footnote5.m2.1.1.1.1.1.1.1.1.2">
                 𝑝
                </ci>
                <ci id="footnote5.m2.1.1.1.1.1.1.1.1.3.cmml" xref="footnote5.m2.1.1.1.1.1.1.1.1.3">
                 𝑗
                </ci>
               </apply>
               <apply id="footnote5.m2.1.1.1.1.1.2.2.2.cmml" xref="footnote5.m2.1.1.1.1.1.2.2.2">
                <csymbol cd="ambiguous" id="footnote5.m2.1.1.1.1.1.2.2.2.1.cmml" xref="footnote5.m2.1.1.1.1.1.2.2.2">
                 subscript
                </csymbol>
                <ci id="footnote5.m2.1.1.1.1.1.2.2.2.2.cmml" xref="footnote5.m2.1.1.1.1.1.2.2.2.2">
                 𝑦
                </ci>
                <ci id="footnote5.m2.1.1.1.1.1.2.2.2.3.cmml" xref="footnote5.m2.1.1.1.1.1.2.2.2.3">
                 𝑗
                </ci>
               </apply>
              </list>
             </apply>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="footnote5.m2.1d">
            \operatorname*{argmax}_{a_{k}\in S}P_{A}(a_{k}|p_{j},y_{j})
           </annotation>
          </semantics>
         </math>
        </span>
       </span>
      </span>
      matches the ground truth action
      <math alttext="a_{j}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.10.m10.1">
       <semantics id="S3.SS2.SSS2.p1.10.m10.1a">
        <msub id="S3.SS2.SSS2.p1.10.m10.1.1" xref="S3.SS2.SSS2.p1.10.m10.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.10.m10.1.1.2" xref="S3.SS2.SSS2.p1.10.m10.1.1.2.cmml">
          a
         </mi>
         <mi id="S3.SS2.SSS2.p1.10.m10.1.1.3" xref="S3.SS2.SSS2.p1.10.m10.1.1.3.cmml">
          j
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.10.m10.1b">
         <apply id="S3.SS2.SSS2.p1.10.m10.1.1.cmml" xref="S3.SS2.SSS2.p1.10.m10.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.10.m10.1.1.1.cmml" xref="S3.SS2.SSS2.p1.10.m10.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.10.m10.1.1.2.cmml" xref="S3.SS2.SSS2.p1.10.m10.1.1.2">
           𝑎
          </ci>
          <ci id="S3.SS2.SSS2.p1.10.m10.1.1.3.cmml" xref="S3.SS2.SSS2.p1.10.m10.1.1.3">
           𝑗
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.10.m10.1c">
         a_{j}
        </annotation>
       </semantics>
      </math>
      . If it does match
      <math alttext="a_{j}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.11.m11.1">
       <semantics id="S3.SS2.SSS2.p1.11.m11.1a">
        <msub id="S3.SS2.SSS2.p1.11.m11.1.1" xref="S3.SS2.SSS2.p1.11.m11.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.11.m11.1.1.2" xref="S3.SS2.SSS2.p1.11.m11.1.1.2.cmml">
          a
         </mi>
         <mi id="S3.SS2.SSS2.p1.11.m11.1.1.3" xref="S3.SS2.SSS2.p1.11.m11.1.1.3.cmml">
          j
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.11.m11.1b">
         <apply id="S3.SS2.SSS2.p1.11.m11.1.1.cmml" xref="S3.SS2.SSS2.p1.11.m11.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.11.m11.1.1.1.cmml" xref="S3.SS2.SSS2.p1.11.m11.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.11.m11.1.1.2.cmml" xref="S3.SS2.SSS2.p1.11.m11.1.1.2">
           𝑎
          </ci>
          <ci id="S3.SS2.SSS2.p1.11.m11.1.1.3.cmml" xref="S3.SS2.SSS2.p1.11.m11.1.1.3">
           𝑗
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.11.m11.1c">
         a_{j}
        </annotation>
       </semantics>
      </math>
      , then we simulate the outcome
      <math alttext="g_{j}^{\prime}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.12.m12.1">
       <semantics id="S3.SS2.SSS2.p1.12.m12.1a">
        <msubsup id="S3.SS2.SSS2.p1.12.m12.1.1" xref="S3.SS2.SSS2.p1.12.m12.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.12.m12.1.1.2.2" xref="S3.SS2.SSS2.p1.12.m12.1.1.2.2.cmml">
          g
         </mi>
         <mi id="S3.SS2.SSS2.p1.12.m12.1.1.2.3" xref="S3.SS2.SSS2.p1.12.m12.1.1.2.3.cmml">
          j
         </mi>
         <mo id="S3.SS2.SSS2.p1.12.m12.1.1.3" xref="S3.SS2.SSS2.p1.12.m12.1.1.3.cmml">
          ′
         </mo>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.12.m12.1b">
         <apply id="S3.SS2.SSS2.p1.12.m12.1.1.cmml" xref="S3.SS2.SSS2.p1.12.m12.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.12.m12.1.1.1.cmml" xref="S3.SS2.SSS2.p1.12.m12.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS2.SSS2.p1.12.m12.1.1.2.cmml" xref="S3.SS2.SSS2.p1.12.m12.1.1">
           <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.12.m12.1.1.2.1.cmml" xref="S3.SS2.SSS2.p1.12.m12.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS2.p1.12.m12.1.1.2.2.cmml" xref="S3.SS2.SSS2.p1.12.m12.1.1.2.2">
            𝑔
           </ci>
           <ci id="S3.SS2.SSS2.p1.12.m12.1.1.2.3.cmml" xref="S3.SS2.SSS2.p1.12.m12.1.1.2.3">
            𝑗
           </ci>
          </apply>
          <ci id="S3.SS2.SSS2.p1.12.m12.1.1.3.cmml" xref="S3.SS2.SSS2.p1.12.m12.1.1.3">
           ′
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.12.m12.1c">
         g_{j}^{\prime}
        </annotation>
       </semantics>
      </math>
      of the trajectory resulting from
      <math alttext="y_{j}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.13.m13.1">
       <semantics id="S3.SS2.SSS2.p1.13.m13.1a">
        <msub id="S3.SS2.SSS2.p1.13.m13.1.1" xref="S3.SS2.SSS2.p1.13.m13.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.13.m13.1.1.2" xref="S3.SS2.SSS2.p1.13.m13.1.1.2.cmml">
          y
         </mi>
         <mi id="S3.SS2.SSS2.p1.13.m13.1.1.3" xref="S3.SS2.SSS2.p1.13.m13.1.1.3.cmml">
          j
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.13.m13.1b">
         <apply id="S3.SS2.SSS2.p1.13.m13.1.1.cmml" xref="S3.SS2.SSS2.p1.13.m13.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.13.m13.1.1.1.cmml" xref="S3.SS2.SSS2.p1.13.m13.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.13.m13.1.1.2.cmml" xref="S3.SS2.SSS2.p1.13.m13.1.1.2">
           𝑦
          </ci>
          <ci id="S3.SS2.SSS2.p1.13.m13.1.1.3.cmml" xref="S3.SS2.SSS2.p1.13.m13.1.1.3">
           𝑗
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.13.m13.1c">
         y_{j}
        </annotation>
       </semantics>
      </math>
      using
      <math alttext="U" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.14.m14.1">
       <semantics id="S3.SS2.SSS2.p1.14.m14.1a">
        <mi id="S3.SS2.SSS2.p1.14.m14.1.1" xref="S3.SS2.SSS2.p1.14.m14.1.1.cmml">
         U
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.14.m14.1b">
         <ci id="S3.SS2.SSS2.p1.14.m14.1.1.cmml" xref="S3.SS2.SSS2.p1.14.m14.1.1">
          𝑈
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.14.m14.1c">
         U
        </annotation>
       </semantics>
      </math>
      <span class="ltx_note ltx_role_footnote" id="footnote6">
       <sup class="ltx_note_mark">
        6
       </sup>
       <span class="ltx_note_outer">
        <span class="ltx_note_content">
         <sup class="ltx_note_mark">
          6
         </sup>
         <span class="ltx_tag ltx_tag_note">
          6
         </span>
         The next user turn (denoted
         <math alttext="u_{j+1}" class="ltx_Math" display="inline" id="footnote6.m1.1">
          <semantics id="footnote6.m1.1b">
           <msub id="footnote6.m1.1.1" xref="footnote6.m1.1.1.cmml">
            <mi id="footnote6.m1.1.1.2" xref="footnote6.m1.1.1.2.cmml">
             u
            </mi>
            <mrow id="footnote6.m1.1.1.3" xref="footnote6.m1.1.1.3.cmml">
             <mi id="footnote6.m1.1.1.3.2" xref="footnote6.m1.1.1.3.2.cmml">
              j
             </mi>
             <mo id="footnote6.m1.1.1.3.1" xref="footnote6.m1.1.1.3.1.cmml">
              +
             </mo>
             <mn id="footnote6.m1.1.1.3.3" xref="footnote6.m1.1.1.3.3.cmml">
              1
             </mn>
            </mrow>
           </msub>
           <annotation-xml encoding="MathML-Content" id="footnote6.m1.1c">
            <apply id="footnote6.m1.1.1.cmml" xref="footnote6.m1.1.1">
             <csymbol cd="ambiguous" id="footnote6.m1.1.1.1.cmml" xref="footnote6.m1.1.1">
              subscript
             </csymbol>
             <ci id="footnote6.m1.1.1.2.cmml" xref="footnote6.m1.1.1.2">
              𝑢
             </ci>
             <apply id="footnote6.m1.1.1.3.cmml" xref="footnote6.m1.1.1.3">
              <plus id="footnote6.m1.1.1.3.1.cmml" xref="footnote6.m1.1.1.3.1">
              </plus>
              <ci id="footnote6.m1.1.1.3.2.cmml" xref="footnote6.m1.1.1.3.2">
               𝑗
              </ci>
              <cn id="footnote6.m1.1.1.3.3.cmml" type="integer" xref="footnote6.m1.1.1.3.3">
               1
              </cn>
             </apply>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="footnote6.m1.1d">
            u_{j+1}
           </annotation>
          </semantics>
         </math>
         ) is sampled according to
         <math alttext="u_{j+1}\sim P_{U}(\cdot|p_{j},y_{j}" class="ltx_math_unparsed" display="inline" id="footnote6.m2.1">
          <semantics id="footnote6.m2.1b">
           <mrow id="footnote6.m2.1c">
            <msub id="footnote6.m2.1.1">
             <mi id="footnote6.m2.1.1.2">
              u
             </mi>
             <mrow id="footnote6.m2.1.1.3">
              <mi id="footnote6.m2.1.1.3.2">
               j
              </mi>
              <mo id="footnote6.m2.1.1.3.1">
               +
              </mo>
              <mn id="footnote6.m2.1.1.3.3">
               1
              </mn>
             </mrow>
            </msub>
            <mo id="footnote6.m2.1.2">
             ∼
            </mo>
            <msub id="footnote6.m2.1.3">
             <mi id="footnote6.m2.1.3.2">
              P
             </mi>
             <mi id="footnote6.m2.1.3.3">
              U
             </mi>
            </msub>
            <mrow id="footnote6.m2.1.4">
             <mo id="footnote6.m2.1.4.1" stretchy="false">
              (
             </mo>
             <mo id="footnote6.m2.1.4.2" lspace="0em" rspace="0em">
              ⋅
             </mo>
             <mo fence="false" id="footnote6.m2.1.4.3" rspace="0.167em" stretchy="false">
              |
             </mo>
             <msub id="footnote6.m2.1.4.4">
              <mi id="footnote6.m2.1.4.4.2">
               p
              </mi>
              <mi id="footnote6.m2.1.4.4.3">
               j
              </mi>
             </msub>
             <mo id="footnote6.m2.1.4.5">
              ,
             </mo>
             <msub id="footnote6.m2.1.4.6">
              <mi id="footnote6.m2.1.4.6.2">
               y
              </mi>
              <mi id="footnote6.m2.1.4.6.3">
               j
              </mi>
             </msub>
            </mrow>
           </mrow>
           <annotation encoding="application/x-tex" id="footnote6.m2.1d">
            u_{j+1}\sim P_{U}(\cdot|p_{j},y_{j}
           </annotation>
          </semantics>
         </math>
         )
        </span>
       </span>
      </span>
      and
      <math alttext="\pi_{\theta_{i}}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.15.m15.1">
       <semantics id="S3.SS2.SSS2.p1.15.m15.1a">
        <msub id="S3.SS2.SSS2.p1.15.m15.1.1" xref="S3.SS2.SSS2.p1.15.m15.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.15.m15.1.1.2" xref="S3.SS2.SSS2.p1.15.m15.1.1.2.cmml">
          π
         </mi>
         <msub id="S3.SS2.SSS2.p1.15.m15.1.1.3" xref="S3.SS2.SSS2.p1.15.m15.1.1.3.cmml">
          <mi id="S3.SS2.SSS2.p1.15.m15.1.1.3.2" xref="S3.SS2.SSS2.p1.15.m15.1.1.3.2.cmml">
           θ
          </mi>
          <mi id="S3.SS2.SSS2.p1.15.m15.1.1.3.3" xref="S3.SS2.SSS2.p1.15.m15.1.1.3.3.cmml">
           i
          </mi>
         </msub>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.15.m15.1b">
         <apply id="S3.SS2.SSS2.p1.15.m15.1.1.cmml" xref="S3.SS2.SSS2.p1.15.m15.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.15.m15.1.1.1.cmml" xref="S3.SS2.SSS2.p1.15.m15.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.15.m15.1.1.2.cmml" xref="S3.SS2.SSS2.p1.15.m15.1.1.2">
           𝜋
          </ci>
          <apply id="S3.SS2.SSS2.p1.15.m15.1.1.3.cmml" xref="S3.SS2.SSS2.p1.15.m15.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.15.m15.1.1.3.1.cmml" xref="S3.SS2.SSS2.p1.15.m15.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS2.p1.15.m15.1.1.3.2.cmml" xref="S3.SS2.SSS2.p1.15.m15.1.1.3.2">
            𝜃
           </ci>
           <ci id="S3.SS2.SSS2.p1.15.m15.1.1.3.3.cmml" xref="S3.SS2.SSS2.p1.15.m15.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.15.m15.1c">
         \pi_{\theta_{i}}
        </annotation>
       </semantics>
      </math>
      . If either the implicit action of
      <math alttext="y_{j}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.16.m16.1">
       <semantics id="S3.SS2.SSS2.p1.16.m16.1a">
        <msub id="S3.SS2.SSS2.p1.16.m16.1.1" xref="S3.SS2.SSS2.p1.16.m16.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.16.m16.1.1.2" xref="S3.SS2.SSS2.p1.16.m16.1.1.2.cmml">
          y
         </mi>
         <mi id="S3.SS2.SSS2.p1.16.m16.1.1.3" xref="S3.SS2.SSS2.p1.16.m16.1.1.3.cmml">
          j
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.16.m16.1b">
         <apply id="S3.SS2.SSS2.p1.16.m16.1.1.cmml" xref="S3.SS2.SSS2.p1.16.m16.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.16.m16.1.1.1.cmml" xref="S3.SS2.SSS2.p1.16.m16.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS2.p1.16.m16.1.1.2.cmml" xref="S3.SS2.SSS2.p1.16.m16.1.1.2">
           𝑦
          </ci>
          <ci id="S3.SS2.SSS2.p1.16.m16.1.1.3.cmml" xref="S3.SS2.SSS2.p1.16.m16.1.1.3">
           𝑗
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.16.m16.1c">
         y_{j}
        </annotation>
       </semantics>
      </math>
      is incorrect, or the trajectory outcome
      <math alttext="g_{j}^{\prime}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.17.m17.1">
       <semantics id="S3.SS2.SSS2.p1.17.m17.1a">
        <msubsup id="S3.SS2.SSS2.p1.17.m17.1.1" xref="S3.SS2.SSS2.p1.17.m17.1.1.cmml">
         <mi id="S3.SS2.SSS2.p1.17.m17.1.1.2.2" xref="S3.SS2.SSS2.p1.17.m17.1.1.2.2.cmml">
          g
         </mi>
         <mi id="S3.SS2.SSS2.p1.17.m17.1.1.2.3" xref="S3.SS2.SSS2.p1.17.m17.1.1.2.3.cmml">
          j
         </mi>
         <mo id="S3.SS2.SSS2.p1.17.m17.1.1.3" xref="S3.SS2.SSS2.p1.17.m17.1.1.3.cmml">
          ′
         </mo>
        </msubsup>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.17.m17.1b">
         <apply id="S3.SS2.SSS2.p1.17.m17.1.1.cmml" xref="S3.SS2.SSS2.p1.17.m17.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.17.m17.1.1.1.cmml" xref="S3.SS2.SSS2.p1.17.m17.1.1">
           superscript
          </csymbol>
          <apply id="S3.SS2.SSS2.p1.17.m17.1.1.2.cmml" xref="S3.SS2.SSS2.p1.17.m17.1.1">
           <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.17.m17.1.1.2.1.cmml" xref="S3.SS2.SSS2.p1.17.m17.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS2.p1.17.m17.1.1.2.2.cmml" xref="S3.SS2.SSS2.p1.17.m17.1.1.2.2">
            𝑔
           </ci>
           <ci id="S3.SS2.SSS2.p1.17.m17.1.1.2.3.cmml" xref="S3.SS2.SSS2.p1.17.m17.1.1.2.3">
            𝑗
           </ci>
          </apply>
          <ci id="S3.SS2.SSS2.p1.17.m17.1.1.3.cmml" xref="S3.SS2.SSS2.p1.17.m17.1.1.3">
           ′
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.17.m17.1c">
         g_{j}^{\prime}
        </annotation>
       </semantics>
      </math>
      fails to meet task-specific heuristics (e.g., low semantic similarity or an incorrect arithmetic expression), we set
      <math alttext="y_{lj}=y_{j}" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.18.m18.1">
       <semantics id="S3.SS2.SSS2.p1.18.m18.1a">
        <mrow id="S3.SS2.SSS2.p1.18.m18.1.1" xref="S3.SS2.SSS2.p1.18.m18.1.1.cmml">
         <msub id="S3.SS2.SSS2.p1.18.m18.1.1.2" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.cmml">
          <mi id="S3.SS2.SSS2.p1.18.m18.1.1.2.2" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.2.cmml">
           y
          </mi>
          <mrow id="S3.SS2.SSS2.p1.18.m18.1.1.2.3" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.3.cmml">
           <mi id="S3.SS2.SSS2.p1.18.m18.1.1.2.3.2" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.3.2.cmml">
            l
           </mi>
           <mo id="S3.SS2.SSS2.p1.18.m18.1.1.2.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.3.1.cmml">
            ​
           </mo>
           <mi id="S3.SS2.SSS2.p1.18.m18.1.1.2.3.3" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.3.3.cmml">
            j
           </mi>
          </mrow>
         </msub>
         <mo id="S3.SS2.SSS2.p1.18.m18.1.1.1" xref="S3.SS2.SSS2.p1.18.m18.1.1.1.cmml">
          =
         </mo>
         <msub id="S3.SS2.SSS2.p1.18.m18.1.1.3" xref="S3.SS2.SSS2.p1.18.m18.1.1.3.cmml">
          <mi id="S3.SS2.SSS2.p1.18.m18.1.1.3.2" xref="S3.SS2.SSS2.p1.18.m18.1.1.3.2.cmml">
           y
          </mi>
          <mi id="S3.SS2.SSS2.p1.18.m18.1.1.3.3" xref="S3.SS2.SSS2.p1.18.m18.1.1.3.3.cmml">
           j
          </mi>
         </msub>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.18.m18.1b">
         <apply id="S3.SS2.SSS2.p1.18.m18.1.1.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1">
          <eq id="S3.SS2.SSS2.p1.18.m18.1.1.1.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.1">
          </eq>
          <apply id="S3.SS2.SSS2.p1.18.m18.1.1.2.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.2">
           <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.18.m18.1.1.2.1.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.2">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS2.p1.18.m18.1.1.2.2.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.2">
            𝑦
           </ci>
           <apply id="S3.SS2.SSS2.p1.18.m18.1.1.2.3.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.3">
            <times id="S3.SS2.SSS2.p1.18.m18.1.1.2.3.1.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.3.1">
            </times>
            <ci id="S3.SS2.SSS2.p1.18.m18.1.1.2.3.2.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.3.2">
             𝑙
            </ci>
            <ci id="S3.SS2.SSS2.p1.18.m18.1.1.2.3.3.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.2.3.3">
             𝑗
            </ci>
           </apply>
          </apply>
          <apply id="S3.SS2.SSS2.p1.18.m18.1.1.3.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS2.p1.18.m18.1.1.3.1.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS2.p1.18.m18.1.1.3.2.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.3.2">
            𝑦
           </ci>
           <ci id="S3.SS2.SSS2.p1.18.m18.1.1.3.3.cmml" xref="S3.SS2.SSS2.p1.18.m18.1.1.3.3">
            𝑗
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.18.m18.1c">
         y_{lj}=y_{j}
        </annotation>
       </semantics>
      </math>
      . We provide details on the usage of
      <math alttext="A" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.19.m19.1">
       <semantics id="S3.SS2.SSS2.p1.19.m19.1a">
        <mi id="S3.SS2.SSS2.p1.19.m19.1.1" xref="S3.SS2.SSS2.p1.19.m19.1.1.cmml">
         A
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.19.m19.1b">
         <ci id="S3.SS2.SSS2.p1.19.m19.1.1.cmml" xref="S3.SS2.SSS2.p1.19.m19.1.1">
          𝐴
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.19.m19.1c">
         A
        </annotation>
       </semantics>
      </math>
      and
      <math alttext="U" class="ltx_Math" display="inline" id="S3.SS2.SSS2.p1.20.m20.1">
       <semantics id="S3.SS2.SSS2.p1.20.m20.1a">
        <mi id="S3.SS2.SSS2.p1.20.m20.1.1" xref="S3.SS2.SSS2.p1.20.m20.1.1.cmml">
         U
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS2.p1.20.m20.1b">
         <ci id="S3.SS2.SSS2.p1.20.m20.1.1.cmml" xref="S3.SS2.SSS2.p1.20.m20.1.1">
          𝑈
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS2.p1.20.m20.1c">
         U
        </annotation>
       </semantics>
      </math>
      in Appendices
      <a class="ltx_ref" href="#A6" title="Appendix F Action Classifier Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        F
       </span>
      </a>
      and
      <a class="ltx_ref" href="#A7" title="Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        G
       </span>
      </a>
      , respectively.
     </p>
    </div>
   </section>
   <section class="ltx_subsubsection" id="S3.SS2.SSS3">
    <h4 class="ltx_title ltx_title_subsubsection">
     <span class="ltx_tag ltx_tag_subsubsection">
      3.2.3
     </span>
     Contrastive RL Tuning for Alignment
    </h4>
    <div class="ltx_para" id="S3.SS2.SSS3.p1">
     <p class="ltx_p" id="S3.SS2.SSS3.p1.5">
      After constructing the up-to-date winning
      <math alttext="y_{wi}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.1.m1.1">
       <semantics id="S3.SS2.SSS3.p1.1.m1.1a">
        <msub id="S3.SS2.SSS3.p1.1.m1.1.1" xref="S3.SS2.SSS3.p1.1.m1.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.1.m1.1.1.2" xref="S3.SS2.SSS3.p1.1.m1.1.1.2.cmml">
          y
         </mi>
         <mrow id="S3.SS2.SSS3.p1.1.m1.1.1.3" xref="S3.SS2.SSS3.p1.1.m1.1.1.3.cmml">
          <mi id="S3.SS2.SSS3.p1.1.m1.1.1.3.2" xref="S3.SS2.SSS3.p1.1.m1.1.1.3.2.cmml">
           w
          </mi>
          <mo id="S3.SS2.SSS3.p1.1.m1.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.1.m1.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS3.p1.1.m1.1.1.3.3" xref="S3.SS2.SSS3.p1.1.m1.1.1.3.3.cmml">
           i
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.1.m1.1b">
         <apply id="S3.SS2.SSS3.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.1.m1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.2">
           𝑦
          </ci>
          <apply id="S3.SS2.SSS3.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.3">
           <times id="S3.SS2.SSS3.p1.1.m1.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS3.p1.1.m1.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.3.2">
            𝑤
           </ci>
           <ci id="S3.SS2.SSS3.p1.1.m1.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.1.m1.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.1.m1.1c">
         y_{wi}
        </annotation>
       </semantics>
      </math>
      and losing
      <math alttext="y_{li}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.2.m2.1">
       <semantics id="S3.SS2.SSS3.p1.2.m2.1a">
        <msub id="S3.SS2.SSS3.p1.2.m2.1.1" xref="S3.SS2.SSS3.p1.2.m2.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.2.m2.1.1.2" xref="S3.SS2.SSS3.p1.2.m2.1.1.2.cmml">
          y
         </mi>
         <mrow id="S3.SS2.SSS3.p1.2.m2.1.1.3" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.cmml">
          <mi id="S3.SS2.SSS3.p1.2.m2.1.1.3.2" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.2.cmml">
           l
          </mi>
          <mo id="S3.SS2.SSS3.p1.2.m2.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS3.p1.2.m2.1.1.3.3" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.3.cmml">
           i
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.2.m2.1b">
         <apply id="S3.SS2.SSS3.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.2.m2.1.1.2.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.2">
           𝑦
          </ci>
          <apply id="S3.SS2.SSS3.p1.2.m2.1.1.3.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.3">
           <times id="S3.SS2.SSS3.p1.2.m2.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS3.p1.2.m2.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.2">
            𝑙
           </ci>
           <ci id="S3.SS2.SSS3.p1.2.m2.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.2.m2.1.1.3.3">
            𝑖
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.2.m2.1c">
         y_{li}
        </annotation>
       </semantics>
      </math>
      pairing at turn
      <math alttext="i" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.3.m3.1">
       <semantics id="S3.SS2.SSS3.p1.3.m3.1a">
        <mi id="S3.SS2.SSS3.p1.3.m3.1.1" xref="S3.SS2.SSS3.p1.3.m3.1.1.cmml">
         i
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.3.m3.1b">
         <ci id="S3.SS2.SSS3.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS3.p1.3.m3.1.1">
          𝑖
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.3.m3.1c">
         i
        </annotation>
       </semantics>
      </math>
      through simulation (Section
      <a class="ltx_ref" href="#S3.SS2.SSS2" title="3.2.2 Self-Training Using On-policy Conversation Trajectory Simulation ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        3.2.2
       </span>
      </a>
      ), we update the policy model (
      <math alttext="\pi_{\theta}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.4.m4.1">
       <semantics id="S3.SS2.SSS3.p1.4.m4.1a">
        <msub id="S3.SS2.SSS3.p1.4.m4.1.1" xref="S3.SS2.SSS3.p1.4.m4.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.4.m4.1.1.2" xref="S3.SS2.SSS3.p1.4.m4.1.1.2.cmml">
          π
         </mi>
         <mi id="S3.SS2.SSS3.p1.4.m4.1.1.3" xref="S3.SS2.SSS3.p1.4.m4.1.1.3.cmml">
          θ
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.4.m4.1b">
         <apply id="S3.SS2.SSS3.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS3.p1.4.m4.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS3.p1.4.m4.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.4.m4.1.1.2.cmml" xref="S3.SS2.SSS3.p1.4.m4.1.1.2">
           𝜋
          </ci>
          <ci id="S3.SS2.SSS3.p1.4.m4.1.1.3.cmml" xref="S3.SS2.SSS3.p1.4.m4.1.1.3">
           𝜃
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.4.m4.1c">
         \pi_{\theta}
        </annotation>
       </semantics>
      </math>
      ) using the DPO training objective
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib16" title="">
        16
       </a>
       ]
      </cite>
      , which is as follows (we ignore the
      <math alttext="i" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.5.m5.1">
       <semantics id="S3.SS2.SSS3.p1.5.m5.1a">
        <mi id="S3.SS2.SSS3.p1.5.m5.1.1" xref="S3.SS2.SSS3.p1.5.m5.1.1.cmml">
         i
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.5.m5.1b">
         <ci id="S3.SS2.SSS3.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS3.p1.5.m5.1.1">
          𝑖
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.5.m5.1c">
         i
        </annotation>
       </semantics>
      </math>
      iterator for simplicity):
     </p>
     <table class="ltx_equation ltx_eqn_table" id="S3.E1">
      <tbody>
       <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
        <td class="ltx_eqn_cell ltx_eqn_center_padleft">
        </td>
        <td class="ltx_eqn_cell ltx_align_center">
         <math alttext="\mathcal{L}_{\text{DPO}}(\pi_{\theta};\pi_{ref})=-\mathbb{E}_{(p,y_{w},y_{l})\sim\mathcal{D}}\left[\log\sigma\left(\beta\log\frac{\pi_{\theta}(y_{w}\mid p)}{\pi_{ref}(y_{w}\mid p)}-\beta\log\frac{\pi_{\theta}(y_{l}\mid p)}{\pi_{ref}(y_{l}\mid p)}\right)\right]," class="ltx_Math" display="block" id="S3.E1.m1.8">
          <semantics id="S3.E1.m1.8a">
           <mrow id="S3.E1.m1.8.8.1" xref="S3.E1.m1.8.8.1.1.cmml">
            <mrow id="S3.E1.m1.8.8.1.1" xref="S3.E1.m1.8.8.1.1.cmml">
             <mrow id="S3.E1.m1.8.8.1.1.2" xref="S3.E1.m1.8.8.1.1.2.cmml">
              <msub id="S3.E1.m1.8.8.1.1.2.4" xref="S3.E1.m1.8.8.1.1.2.4.cmml">
               <mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.8.8.1.1.2.4.2" xref="S3.E1.m1.8.8.1.1.2.4.2.cmml">
                ℒ
               </mi>
               <mtext id="S3.E1.m1.8.8.1.1.2.4.3" xref="S3.E1.m1.8.8.1.1.2.4.3a.cmml">
                DPO
               </mtext>
              </msub>
              <mo id="S3.E1.m1.8.8.1.1.2.3" lspace="0em" rspace="0em" xref="S3.E1.m1.8.8.1.1.2.3.cmml">
               ​
              </mo>
              <mrow id="S3.E1.m1.8.8.1.1.2.2.2" xref="S3.E1.m1.8.8.1.1.2.2.3.cmml">
               <mo id="S3.E1.m1.8.8.1.1.2.2.2.3" stretchy="false" xref="S3.E1.m1.8.8.1.1.2.2.3.cmml">
                (
               </mo>
               <msub id="S3.E1.m1.8.8.1.1.1.1.1.1" xref="S3.E1.m1.8.8.1.1.1.1.1.1.cmml">
                <mi id="S3.E1.m1.8.8.1.1.1.1.1.1.2" xref="S3.E1.m1.8.8.1.1.1.1.1.1.2.cmml">
                 π
                </mi>
                <mi id="S3.E1.m1.8.8.1.1.1.1.1.1.3" xref="S3.E1.m1.8.8.1.1.1.1.1.1.3.cmml">
                 θ
                </mi>
               </msub>
               <mo id="S3.E1.m1.8.8.1.1.2.2.2.4" xref="S3.E1.m1.8.8.1.1.2.2.3.cmml">
                ;
               </mo>
               <msub id="S3.E1.m1.8.8.1.1.2.2.2.2" xref="S3.E1.m1.8.8.1.1.2.2.2.2.cmml">
                <mi id="S3.E1.m1.8.8.1.1.2.2.2.2.2" xref="S3.E1.m1.8.8.1.1.2.2.2.2.2.cmml">
                 π
                </mi>
                <mrow id="S3.E1.m1.8.8.1.1.2.2.2.2.3" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.cmml">
                 <mi id="S3.E1.m1.8.8.1.1.2.2.2.2.3.2" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.2.cmml">
                  r
                 </mi>
                 <mo id="S3.E1.m1.8.8.1.1.2.2.2.2.3.1" lspace="0em" rspace="0em" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.1.cmml">
                  ​
                 </mo>
                 <mi id="S3.E1.m1.8.8.1.1.2.2.2.2.3.3" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.3.cmml">
                  e
                 </mi>
                 <mo id="S3.E1.m1.8.8.1.1.2.2.2.2.3.1a" lspace="0em" rspace="0em" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.1.cmml">
                  ​
                 </mo>
                 <mi id="S3.E1.m1.8.8.1.1.2.2.2.2.3.4" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.4.cmml">
                  f
                 </mi>
                </mrow>
               </msub>
               <mo id="S3.E1.m1.8.8.1.1.2.2.2.5" stretchy="false" xref="S3.E1.m1.8.8.1.1.2.2.3.cmml">
                )
               </mo>
              </mrow>
             </mrow>
             <mo id="S3.E1.m1.8.8.1.1.4" xref="S3.E1.m1.8.8.1.1.4.cmml">
              =
             </mo>
             <mrow id="S3.E1.m1.8.8.1.1.3" xref="S3.E1.m1.8.8.1.1.3.cmml">
              <mo id="S3.E1.m1.8.8.1.1.3a" xref="S3.E1.m1.8.8.1.1.3.cmml">
               −
              </mo>
              <mrow id="S3.E1.m1.8.8.1.1.3.1" xref="S3.E1.m1.8.8.1.1.3.1.cmml">
               <msub id="S3.E1.m1.8.8.1.1.3.1.3" xref="S3.E1.m1.8.8.1.1.3.1.3.cmml">
                <mi id="S3.E1.m1.8.8.1.1.3.1.3.2" xref="S3.E1.m1.8.8.1.1.3.1.3.2.cmml">
                 𝔼
                </mi>
                <mrow id="S3.E1.m1.3.3.3" xref="S3.E1.m1.3.3.3.cmml">
                 <mrow id="S3.E1.m1.3.3.3.3.2" xref="S3.E1.m1.3.3.3.3.3.cmml">
                  <mo id="S3.E1.m1.3.3.3.3.2.3" stretchy="false" xref="S3.E1.m1.3.3.3.3.3.cmml">
                   (
                  </mo>
                  <mi id="S3.E1.m1.1.1.1.1" xref="S3.E1.m1.1.1.1.1.cmml">
                   p
                  </mi>
                  <mo id="S3.E1.m1.3.3.3.3.2.4" xref="S3.E1.m1.3.3.3.3.3.cmml">
                   ,
                  </mo>
                  <msub id="S3.E1.m1.2.2.2.2.1.1" xref="S3.E1.m1.2.2.2.2.1.1.cmml">
                   <mi id="S3.E1.m1.2.2.2.2.1.1.2" xref="S3.E1.m1.2.2.2.2.1.1.2.cmml">
                    y
                   </mi>
                   <mi id="S3.E1.m1.2.2.2.2.1.1.3" xref="S3.E1.m1.2.2.2.2.1.1.3.cmml">
                    w
                   </mi>
                  </msub>
                  <mo id="S3.E1.m1.3.3.3.3.2.5" xref="S3.E1.m1.3.3.3.3.3.cmml">
                   ,
                  </mo>
                  <msub id="S3.E1.m1.3.3.3.3.2.2" xref="S3.E1.m1.3.3.3.3.2.2.cmml">
                   <mi id="S3.E1.m1.3.3.3.3.2.2.2" xref="S3.E1.m1.3.3.3.3.2.2.2.cmml">
                    y
                   </mi>
                   <mi id="S3.E1.m1.3.3.3.3.2.2.3" xref="S3.E1.m1.3.3.3.3.2.2.3.cmml">
                    l
                   </mi>
                  </msub>
                  <mo id="S3.E1.m1.3.3.3.3.2.6" stretchy="false" xref="S3.E1.m1.3.3.3.3.3.cmml">
                   )
                  </mo>
                 </mrow>
                 <mo id="S3.E1.m1.3.3.3.4" xref="S3.E1.m1.3.3.3.4.cmml">
                  ∼
                 </mo>
                 <mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.3.3.3.5" xref="S3.E1.m1.3.3.3.5.cmml">
                  𝒟
                 </mi>
                </mrow>
               </msub>
               <mo id="S3.E1.m1.8.8.1.1.3.1.2" lspace="0em" rspace="0em" xref="S3.E1.m1.8.8.1.1.3.1.2.cmml">
                ​
               </mo>
               <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1" xref="S3.E1.m1.8.8.1.1.3.1.1.2.cmml">
                <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.2" xref="S3.E1.m1.8.8.1.1.3.1.1.2.1.cmml">
                 [
                </mo>
                <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1.1" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.cmml">
                 <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1.1.3" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.cmml">
                  <mi id="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.1" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.1.cmml">
                   log
                  </mi>
                  <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.3a" lspace="0.167em" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.cmml">
                   ⁡
                  </mo>
                  <mi id="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.2" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.2.cmml">
                   σ
                  </mi>
                 </mrow>
                 <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.2" lspace="0em" rspace="0em" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.2.cmml">
                  ​
                 </mo>
                 <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.cmml">
                  <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.2" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.cmml">
                   (
                  </mo>
                  <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.cmml">
                   <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.cmml">
                    <mi id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.2" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.2.cmml">
                     β
                    </mi>
                    <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.1" lspace="0.167em" rspace="0em" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.1.cmml">
                     ​
                    </mo>
                    <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3.cmml">
                     <mi id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3.1" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3.1.cmml">
                      log
                     </mi>
                     <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3a" lspace="0.167em" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3.cmml">
                      ⁡
                     </mo>
                     <mfrac id="S3.E1.m1.5.5" xref="S3.E1.m1.5.5.cmml">
                      <mrow id="S3.E1.m1.4.4.1" xref="S3.E1.m1.4.4.1.cmml">
                       <msub id="S3.E1.m1.4.4.1.3" xref="S3.E1.m1.4.4.1.3.cmml">
                        <mi id="S3.E1.m1.4.4.1.3.2" xref="S3.E1.m1.4.4.1.3.2.cmml">
                         π
                        </mi>
                        <mi id="S3.E1.m1.4.4.1.3.3" xref="S3.E1.m1.4.4.1.3.3.cmml">
                         θ
                        </mi>
                       </msub>
                       <mo id="S3.E1.m1.4.4.1.2" lspace="0em" rspace="0em" xref="S3.E1.m1.4.4.1.2.cmml">
                        ​
                       </mo>
                       <mrow id="S3.E1.m1.4.4.1.1.1" xref="S3.E1.m1.4.4.1.1.1.1.cmml">
                        <mo id="S3.E1.m1.4.4.1.1.1.2" stretchy="false" xref="S3.E1.m1.4.4.1.1.1.1.cmml">
                         (
                        </mo>
                        <mrow id="S3.E1.m1.4.4.1.1.1.1" xref="S3.E1.m1.4.4.1.1.1.1.cmml">
                         <msub id="S3.E1.m1.4.4.1.1.1.1.2" xref="S3.E1.m1.4.4.1.1.1.1.2.cmml">
                          <mi id="S3.E1.m1.4.4.1.1.1.1.2.2" xref="S3.E1.m1.4.4.1.1.1.1.2.2.cmml">
                           y
                          </mi>
                          <mi id="S3.E1.m1.4.4.1.1.1.1.2.3" xref="S3.E1.m1.4.4.1.1.1.1.2.3.cmml">
                           w
                          </mi>
                         </msub>
                         <mo id="S3.E1.m1.4.4.1.1.1.1.1" xref="S3.E1.m1.4.4.1.1.1.1.1.cmml">
                          ∣
                         </mo>
                         <mi id="S3.E1.m1.4.4.1.1.1.1.3" xref="S3.E1.m1.4.4.1.1.1.1.3.cmml">
                          p
                         </mi>
                        </mrow>
                        <mo id="S3.E1.m1.4.4.1.1.1.3" stretchy="false" xref="S3.E1.m1.4.4.1.1.1.1.cmml">
                         )
                        </mo>
                       </mrow>
                      </mrow>
                      <mrow id="S3.E1.m1.5.5.2" xref="S3.E1.m1.5.5.2.cmml">
                       <msub id="S3.E1.m1.5.5.2.3" xref="S3.E1.m1.5.5.2.3.cmml">
                        <mi id="S3.E1.m1.5.5.2.3.2" xref="S3.E1.m1.5.5.2.3.2.cmml">
                         π
                        </mi>
                        <mrow id="S3.E1.m1.5.5.2.3.3" xref="S3.E1.m1.5.5.2.3.3.cmml">
                         <mi id="S3.E1.m1.5.5.2.3.3.2" xref="S3.E1.m1.5.5.2.3.3.2.cmml">
                          r
                         </mi>
                         <mo id="S3.E1.m1.5.5.2.3.3.1" lspace="0em" rspace="0em" xref="S3.E1.m1.5.5.2.3.3.1.cmml">
                          ​
                         </mo>
                         <mi id="S3.E1.m1.5.5.2.3.3.3" xref="S3.E1.m1.5.5.2.3.3.3.cmml">
                          e
                         </mi>
                         <mo id="S3.E1.m1.5.5.2.3.3.1a" lspace="0em" rspace="0em" xref="S3.E1.m1.5.5.2.3.3.1.cmml">
                          ​
                         </mo>
                         <mi id="S3.E1.m1.5.5.2.3.3.4" xref="S3.E1.m1.5.5.2.3.3.4.cmml">
                          f
                         </mi>
                        </mrow>
                       </msub>
                       <mo id="S3.E1.m1.5.5.2.2" lspace="0em" rspace="0em" xref="S3.E1.m1.5.5.2.2.cmml">
                        ​
                       </mo>
                       <mrow id="S3.E1.m1.5.5.2.1.1" xref="S3.E1.m1.5.5.2.1.1.1.cmml">
                        <mo id="S3.E1.m1.5.5.2.1.1.2" stretchy="false" xref="S3.E1.m1.5.5.2.1.1.1.cmml">
                         (
                        </mo>
                        <mrow id="S3.E1.m1.5.5.2.1.1.1" xref="S3.E1.m1.5.5.2.1.1.1.cmml">
                         <msub id="S3.E1.m1.5.5.2.1.1.1.2" xref="S3.E1.m1.5.5.2.1.1.1.2.cmml">
                          <mi id="S3.E1.m1.5.5.2.1.1.1.2.2" xref="S3.E1.m1.5.5.2.1.1.1.2.2.cmml">
                           y
                          </mi>
                          <mi id="S3.E1.m1.5.5.2.1.1.1.2.3" xref="S3.E1.m1.5.5.2.1.1.1.2.3.cmml">
                           w
                          </mi>
                         </msub>
                         <mo id="S3.E1.m1.5.5.2.1.1.1.1" xref="S3.E1.m1.5.5.2.1.1.1.1.cmml">
                          ∣
                         </mo>
                         <mi id="S3.E1.m1.5.5.2.1.1.1.3" xref="S3.E1.m1.5.5.2.1.1.1.3.cmml">
                          p
                         </mi>
                        </mrow>
                        <mo id="S3.E1.m1.5.5.2.1.1.3" stretchy="false" xref="S3.E1.m1.5.5.2.1.1.1.cmml">
                         )
                        </mo>
                       </mrow>
                      </mrow>
                     </mfrac>
                    </mrow>
                   </mrow>
                   <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.1" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.1.cmml">
                    −
                   </mo>
                   <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.cmml">
                    <mi id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.2" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.2.cmml">
                     β
                    </mi>
                    <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.1" lspace="0.167em" rspace="0em" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.1.cmml">
                     ​
                    </mo>
                    <mrow id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3.cmml">
                     <mi id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3.1" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3.1.cmml">
                      log
                     </mi>
                     <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3a" lspace="0.167em" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3.cmml">
                      ⁡
                     </mo>
                     <mfrac id="S3.E1.m1.7.7" xref="S3.E1.m1.7.7.cmml">
                      <mrow id="S3.E1.m1.6.6.1" xref="S3.E1.m1.6.6.1.cmml">
                       <msub id="S3.E1.m1.6.6.1.3" xref="S3.E1.m1.6.6.1.3.cmml">
                        <mi id="S3.E1.m1.6.6.1.3.2" xref="S3.E1.m1.6.6.1.3.2.cmml">
                         π
                        </mi>
                        <mi id="S3.E1.m1.6.6.1.3.3" xref="S3.E1.m1.6.6.1.3.3.cmml">
                         θ
                        </mi>
                       </msub>
                       <mo id="S3.E1.m1.6.6.1.2" lspace="0em" rspace="0em" xref="S3.E1.m1.6.6.1.2.cmml">
                        ​
                       </mo>
                       <mrow id="S3.E1.m1.6.6.1.1.1" xref="S3.E1.m1.6.6.1.1.1.1.cmml">
                        <mo id="S3.E1.m1.6.6.1.1.1.2" stretchy="false" xref="S3.E1.m1.6.6.1.1.1.1.cmml">
                         (
                        </mo>
                        <mrow id="S3.E1.m1.6.6.1.1.1.1" xref="S3.E1.m1.6.6.1.1.1.1.cmml">
                         <msub id="S3.E1.m1.6.6.1.1.1.1.2" xref="S3.E1.m1.6.6.1.1.1.1.2.cmml">
                          <mi id="S3.E1.m1.6.6.1.1.1.1.2.2" xref="S3.E1.m1.6.6.1.1.1.1.2.2.cmml">
                           y
                          </mi>
                          <mi id="S3.E1.m1.6.6.1.1.1.1.2.3" xref="S3.E1.m1.6.6.1.1.1.1.2.3.cmml">
                           l
                          </mi>
                         </msub>
                         <mo id="S3.E1.m1.6.6.1.1.1.1.1" xref="S3.E1.m1.6.6.1.1.1.1.1.cmml">
                          ∣
                         </mo>
                         <mi id="S3.E1.m1.6.6.1.1.1.1.3" xref="S3.E1.m1.6.6.1.1.1.1.3.cmml">
                          p
                         </mi>
                        </mrow>
                        <mo id="S3.E1.m1.6.6.1.1.1.3" stretchy="false" xref="S3.E1.m1.6.6.1.1.1.1.cmml">
                         )
                        </mo>
                       </mrow>
                      </mrow>
                      <mrow id="S3.E1.m1.7.7.2" xref="S3.E1.m1.7.7.2.cmml">
                       <msub id="S3.E1.m1.7.7.2.3" xref="S3.E1.m1.7.7.2.3.cmml">
                        <mi id="S3.E1.m1.7.7.2.3.2" xref="S3.E1.m1.7.7.2.3.2.cmml">
                         π
                        </mi>
                        <mrow id="S3.E1.m1.7.7.2.3.3" xref="S3.E1.m1.7.7.2.3.3.cmml">
                         <mi id="S3.E1.m1.7.7.2.3.3.2" xref="S3.E1.m1.7.7.2.3.3.2.cmml">
                          r
                         </mi>
                         <mo id="S3.E1.m1.7.7.2.3.3.1" lspace="0em" rspace="0em" xref="S3.E1.m1.7.7.2.3.3.1.cmml">
                          ​
                         </mo>
                         <mi id="S3.E1.m1.7.7.2.3.3.3" xref="S3.E1.m1.7.7.2.3.3.3.cmml">
                          e
                         </mi>
                         <mo id="S3.E1.m1.7.7.2.3.3.1a" lspace="0em" rspace="0em" xref="S3.E1.m1.7.7.2.3.3.1.cmml">
                          ​
                         </mo>
                         <mi id="S3.E1.m1.7.7.2.3.3.4" xref="S3.E1.m1.7.7.2.3.3.4.cmml">
                          f
                         </mi>
                        </mrow>
                       </msub>
                       <mo id="S3.E1.m1.7.7.2.2" lspace="0em" rspace="0em" xref="S3.E1.m1.7.7.2.2.cmml">
                        ​
                       </mo>
                       <mrow id="S3.E1.m1.7.7.2.1.1" xref="S3.E1.m1.7.7.2.1.1.1.cmml">
                        <mo id="S3.E1.m1.7.7.2.1.1.2" stretchy="false" xref="S3.E1.m1.7.7.2.1.1.1.cmml">
                         (
                        </mo>
                        <mrow id="S3.E1.m1.7.7.2.1.1.1" xref="S3.E1.m1.7.7.2.1.1.1.cmml">
                         <msub id="S3.E1.m1.7.7.2.1.1.1.2" xref="S3.E1.m1.7.7.2.1.1.1.2.cmml">
                          <mi id="S3.E1.m1.7.7.2.1.1.1.2.2" xref="S3.E1.m1.7.7.2.1.1.1.2.2.cmml">
                           y
                          </mi>
                          <mi id="S3.E1.m1.7.7.2.1.1.1.2.3" xref="S3.E1.m1.7.7.2.1.1.1.2.3.cmml">
                           l
                          </mi>
                         </msub>
                         <mo id="S3.E1.m1.7.7.2.1.1.1.1" xref="S3.E1.m1.7.7.2.1.1.1.1.cmml">
                          ∣
                         </mo>
                         <mi id="S3.E1.m1.7.7.2.1.1.1.3" xref="S3.E1.m1.7.7.2.1.1.1.3.cmml">
                          p
                         </mi>
                        </mrow>
                        <mo id="S3.E1.m1.7.7.2.1.1.3" stretchy="false" xref="S3.E1.m1.7.7.2.1.1.1.cmml">
                         )
                        </mo>
                       </mrow>
                      </mrow>
                     </mfrac>
                    </mrow>
                   </mrow>
                  </mrow>
                  <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.3" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.cmml">
                   )
                  </mo>
                 </mrow>
                </mrow>
                <mo id="S3.E1.m1.8.8.1.1.3.1.1.1.3" xref="S3.E1.m1.8.8.1.1.3.1.1.2.1.cmml">
                 ]
                </mo>
               </mrow>
              </mrow>
             </mrow>
            </mrow>
            <mo id="S3.E1.m1.8.8.1.2" xref="S3.E1.m1.8.8.1.1.cmml">
             ,
            </mo>
           </mrow>
           <annotation-xml encoding="MathML-Content" id="S3.E1.m1.8b">
            <apply id="S3.E1.m1.8.8.1.1.cmml" xref="S3.E1.m1.8.8.1">
             <eq id="S3.E1.m1.8.8.1.1.4.cmml" xref="S3.E1.m1.8.8.1.1.4">
             </eq>
             <apply id="S3.E1.m1.8.8.1.1.2.cmml" xref="S3.E1.m1.8.8.1.1.2">
              <times id="S3.E1.m1.8.8.1.1.2.3.cmml" xref="S3.E1.m1.8.8.1.1.2.3">
              </times>
              <apply id="S3.E1.m1.8.8.1.1.2.4.cmml" xref="S3.E1.m1.8.8.1.1.2.4">
               <csymbol cd="ambiguous" id="S3.E1.m1.8.8.1.1.2.4.1.cmml" xref="S3.E1.m1.8.8.1.1.2.4">
                subscript
               </csymbol>
               <ci id="S3.E1.m1.8.8.1.1.2.4.2.cmml" xref="S3.E1.m1.8.8.1.1.2.4.2">
                ℒ
               </ci>
               <ci id="S3.E1.m1.8.8.1.1.2.4.3a.cmml" xref="S3.E1.m1.8.8.1.1.2.4.3">
                <mtext id="S3.E1.m1.8.8.1.1.2.4.3.cmml" mathsize="70%" xref="S3.E1.m1.8.8.1.1.2.4.3">
                 DPO
                </mtext>
               </ci>
              </apply>
              <list id="S3.E1.m1.8.8.1.1.2.2.3.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2">
               <apply id="S3.E1.m1.8.8.1.1.1.1.1.1.cmml" xref="S3.E1.m1.8.8.1.1.1.1.1.1">
                <csymbol cd="ambiguous" id="S3.E1.m1.8.8.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.8.8.1.1.1.1.1.1">
                 subscript
                </csymbol>
                <ci id="S3.E1.m1.8.8.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.8.8.1.1.1.1.1.1.2">
                 𝜋
                </ci>
                <ci id="S3.E1.m1.8.8.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.8.8.1.1.1.1.1.1.3">
                 𝜃
                </ci>
               </apply>
               <apply id="S3.E1.m1.8.8.1.1.2.2.2.2.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2.2">
                <csymbol cd="ambiguous" id="S3.E1.m1.8.8.1.1.2.2.2.2.1.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2.2">
                 subscript
                </csymbol>
                <ci id="S3.E1.m1.8.8.1.1.2.2.2.2.2.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2.2.2">
                 𝜋
                </ci>
                <apply id="S3.E1.m1.8.8.1.1.2.2.2.2.3.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3">
                 <times id="S3.E1.m1.8.8.1.1.2.2.2.2.3.1.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.1">
                 </times>
                 <ci id="S3.E1.m1.8.8.1.1.2.2.2.2.3.2.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.2">
                  𝑟
                 </ci>
                 <ci id="S3.E1.m1.8.8.1.1.2.2.2.2.3.3.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.3">
                  𝑒
                 </ci>
                 <ci id="S3.E1.m1.8.8.1.1.2.2.2.2.3.4.cmml" xref="S3.E1.m1.8.8.1.1.2.2.2.2.3.4">
                  𝑓
                 </ci>
                </apply>
               </apply>
              </list>
             </apply>
             <apply id="S3.E1.m1.8.8.1.1.3.cmml" xref="S3.E1.m1.8.8.1.1.3">
              <minus id="S3.E1.m1.8.8.1.1.3.2.cmml" xref="S3.E1.m1.8.8.1.1.3">
              </minus>
              <apply id="S3.E1.m1.8.8.1.1.3.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1">
               <times id="S3.E1.m1.8.8.1.1.3.1.2.cmml" xref="S3.E1.m1.8.8.1.1.3.1.2">
               </times>
               <apply id="S3.E1.m1.8.8.1.1.3.1.3.cmml" xref="S3.E1.m1.8.8.1.1.3.1.3">
                <csymbol cd="ambiguous" id="S3.E1.m1.8.8.1.1.3.1.3.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.3">
                 subscript
                </csymbol>
                <ci id="S3.E1.m1.8.8.1.1.3.1.3.2.cmml" xref="S3.E1.m1.8.8.1.1.3.1.3.2">
                 𝔼
                </ci>
                <apply id="S3.E1.m1.3.3.3.cmml" xref="S3.E1.m1.3.3.3">
                 <csymbol cd="latexml" id="S3.E1.m1.3.3.3.4.cmml" xref="S3.E1.m1.3.3.3.4">
                  similar-to
                 </csymbol>
                 <vector id="S3.E1.m1.3.3.3.3.3.cmml" xref="S3.E1.m1.3.3.3.3.2">
                  <ci id="S3.E1.m1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1">
                   𝑝
                  </ci>
                  <apply id="S3.E1.m1.2.2.2.2.1.1.cmml" xref="S3.E1.m1.2.2.2.2.1.1">
                   <csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.1.1.1.cmml" xref="S3.E1.m1.2.2.2.2.1.1">
                    subscript
                   </csymbol>
                   <ci id="S3.E1.m1.2.2.2.2.1.1.2.cmml" xref="S3.E1.m1.2.2.2.2.1.1.2">
                    𝑦
                   </ci>
                   <ci id="S3.E1.m1.2.2.2.2.1.1.3.cmml" xref="S3.E1.m1.2.2.2.2.1.1.3">
                    𝑤
                   </ci>
                  </apply>
                  <apply id="S3.E1.m1.3.3.3.3.2.2.cmml" xref="S3.E1.m1.3.3.3.3.2.2">
                   <csymbol cd="ambiguous" id="S3.E1.m1.3.3.3.3.2.2.1.cmml" xref="S3.E1.m1.3.3.3.3.2.2">
                    subscript
                   </csymbol>
                   <ci id="S3.E1.m1.3.3.3.3.2.2.2.cmml" xref="S3.E1.m1.3.3.3.3.2.2.2">
                    𝑦
                   </ci>
                   <ci id="S3.E1.m1.3.3.3.3.2.2.3.cmml" xref="S3.E1.m1.3.3.3.3.2.2.3">
                    𝑙
                   </ci>
                  </apply>
                 </vector>
                 <ci id="S3.E1.m1.3.3.3.5.cmml" xref="S3.E1.m1.3.3.3.5">
                  𝒟
                 </ci>
                </apply>
               </apply>
               <apply id="S3.E1.m1.8.8.1.1.3.1.1.2.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1">
                <csymbol cd="latexml" id="S3.E1.m1.8.8.1.1.3.1.1.2.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.2">
                 delimited-[]
                </csymbol>
                <apply id="S3.E1.m1.8.8.1.1.3.1.1.1.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1">
                 <times id="S3.E1.m1.8.8.1.1.3.1.1.1.1.2.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.2">
                 </times>
                 <apply id="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.3">
                  <log id="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.1">
                  </log>
                  <ci id="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.2.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.3.2">
                   𝜎
                  </ci>
                 </apply>
                 <apply id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1">
                  <minus id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.1">
                  </minus>
                  <apply id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2">
                   <times id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.1">
                   </times>
                   <ci id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.2">
                    𝛽
                   </ci>
                   <apply id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3">
                    <log id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.2.3.1">
                    </log>
                    <apply id="S3.E1.m1.5.5.cmml" xref="S3.E1.m1.5.5">
                     <divide id="S3.E1.m1.5.5.3.cmml" xref="S3.E1.m1.5.5">
                     </divide>
                     <apply id="S3.E1.m1.4.4.1.cmml" xref="S3.E1.m1.4.4.1">
                      <times id="S3.E1.m1.4.4.1.2.cmml" xref="S3.E1.m1.4.4.1.2">
                      </times>
                      <apply id="S3.E1.m1.4.4.1.3.cmml" xref="S3.E1.m1.4.4.1.3">
                       <csymbol cd="ambiguous" id="S3.E1.m1.4.4.1.3.1.cmml" xref="S3.E1.m1.4.4.1.3">
                        subscript
                       </csymbol>
                       <ci id="S3.E1.m1.4.4.1.3.2.cmml" xref="S3.E1.m1.4.4.1.3.2">
                        𝜋
                       </ci>
                       <ci id="S3.E1.m1.4.4.1.3.3.cmml" xref="S3.E1.m1.4.4.1.3.3">
                        𝜃
                       </ci>
                      </apply>
                      <apply id="S3.E1.m1.4.4.1.1.1.1.cmml" xref="S3.E1.m1.4.4.1.1.1">
                       <csymbol cd="latexml" id="S3.E1.m1.4.4.1.1.1.1.1.cmml" xref="S3.E1.m1.4.4.1.1.1.1.1">
                        conditional
                       </csymbol>
                       <apply id="S3.E1.m1.4.4.1.1.1.1.2.cmml" xref="S3.E1.m1.4.4.1.1.1.1.2">
                        <csymbol cd="ambiguous" id="S3.E1.m1.4.4.1.1.1.1.2.1.cmml" xref="S3.E1.m1.4.4.1.1.1.1.2">
                         subscript
                        </csymbol>
                        <ci id="S3.E1.m1.4.4.1.1.1.1.2.2.cmml" xref="S3.E1.m1.4.4.1.1.1.1.2.2">
                         𝑦
                        </ci>
                        <ci id="S3.E1.m1.4.4.1.1.1.1.2.3.cmml" xref="S3.E1.m1.4.4.1.1.1.1.2.3">
                         𝑤
                        </ci>
                       </apply>
                       <ci id="S3.E1.m1.4.4.1.1.1.1.3.cmml" xref="S3.E1.m1.4.4.1.1.1.1.3">
                        𝑝
                       </ci>
                      </apply>
                     </apply>
                     <apply id="S3.E1.m1.5.5.2.cmml" xref="S3.E1.m1.5.5.2">
                      <times id="S3.E1.m1.5.5.2.2.cmml" xref="S3.E1.m1.5.5.2.2">
                      </times>
                      <apply id="S3.E1.m1.5.5.2.3.cmml" xref="S3.E1.m1.5.5.2.3">
                       <csymbol cd="ambiguous" id="S3.E1.m1.5.5.2.3.1.cmml" xref="S3.E1.m1.5.5.2.3">
                        subscript
                       </csymbol>
                       <ci id="S3.E1.m1.5.5.2.3.2.cmml" xref="S3.E1.m1.5.5.2.3.2">
                        𝜋
                       </ci>
                       <apply id="S3.E1.m1.5.5.2.3.3.cmml" xref="S3.E1.m1.5.5.2.3.3">
                        <times id="S3.E1.m1.5.5.2.3.3.1.cmml" xref="S3.E1.m1.5.5.2.3.3.1">
                        </times>
                        <ci id="S3.E1.m1.5.5.2.3.3.2.cmml" xref="S3.E1.m1.5.5.2.3.3.2">
                         𝑟
                        </ci>
                        <ci id="S3.E1.m1.5.5.2.3.3.3.cmml" xref="S3.E1.m1.5.5.2.3.3.3">
                         𝑒
                        </ci>
                        <ci id="S3.E1.m1.5.5.2.3.3.4.cmml" xref="S3.E1.m1.5.5.2.3.3.4">
                         𝑓
                        </ci>
                       </apply>
                      </apply>
                      <apply id="S3.E1.m1.5.5.2.1.1.1.cmml" xref="S3.E1.m1.5.5.2.1.1">
                       <csymbol cd="latexml" id="S3.E1.m1.5.5.2.1.1.1.1.cmml" xref="S3.E1.m1.5.5.2.1.1.1.1">
                        conditional
                       </csymbol>
                       <apply id="S3.E1.m1.5.5.2.1.1.1.2.cmml" xref="S3.E1.m1.5.5.2.1.1.1.2">
                        <csymbol cd="ambiguous" id="S3.E1.m1.5.5.2.1.1.1.2.1.cmml" xref="S3.E1.m1.5.5.2.1.1.1.2">
                         subscript
                        </csymbol>
                        <ci id="S3.E1.m1.5.5.2.1.1.1.2.2.cmml" xref="S3.E1.m1.5.5.2.1.1.1.2.2">
                         𝑦
                        </ci>
                        <ci id="S3.E1.m1.5.5.2.1.1.1.2.3.cmml" xref="S3.E1.m1.5.5.2.1.1.1.2.3">
                         𝑤
                        </ci>
                       </apply>
                       <ci id="S3.E1.m1.5.5.2.1.1.1.3.cmml" xref="S3.E1.m1.5.5.2.1.1.1.3">
                        𝑝
                       </ci>
                      </apply>
                     </apply>
                    </apply>
                   </apply>
                  </apply>
                  <apply id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3">
                   <times id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.1">
                   </times>
                   <ci id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.2.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.2">
                    𝛽
                   </ci>
                   <apply id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3">
                    <log id="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3.1.cmml" xref="S3.E1.m1.8.8.1.1.3.1.1.1.1.1.1.1.3.3.1">
                    </log>
                    <apply id="S3.E1.m1.7.7.cmml" xref="S3.E1.m1.7.7">
                     <divide id="S3.E1.m1.7.7.3.cmml" xref="S3.E1.m1.7.7">
                     </divide>
                     <apply id="S3.E1.m1.6.6.1.cmml" xref="S3.E1.m1.6.6.1">
                      <times id="S3.E1.m1.6.6.1.2.cmml" xref="S3.E1.m1.6.6.1.2">
                      </times>
                      <apply id="S3.E1.m1.6.6.1.3.cmml" xref="S3.E1.m1.6.6.1.3">
                       <csymbol cd="ambiguous" id="S3.E1.m1.6.6.1.3.1.cmml" xref="S3.E1.m1.6.6.1.3">
                        subscript
                       </csymbol>
                       <ci id="S3.E1.m1.6.6.1.3.2.cmml" xref="S3.E1.m1.6.6.1.3.2">
                        𝜋
                       </ci>
                       <ci id="S3.E1.m1.6.6.1.3.3.cmml" xref="S3.E1.m1.6.6.1.3.3">
                        𝜃
                       </ci>
                      </apply>
                      <apply id="S3.E1.m1.6.6.1.1.1.1.cmml" xref="S3.E1.m1.6.6.1.1.1">
                       <csymbol cd="latexml" id="S3.E1.m1.6.6.1.1.1.1.1.cmml" xref="S3.E1.m1.6.6.1.1.1.1.1">
                        conditional
                       </csymbol>
                       <apply id="S3.E1.m1.6.6.1.1.1.1.2.cmml" xref="S3.E1.m1.6.6.1.1.1.1.2">
                        <csymbol cd="ambiguous" id="S3.E1.m1.6.6.1.1.1.1.2.1.cmml" xref="S3.E1.m1.6.6.1.1.1.1.2">
                         subscript
                        </csymbol>
                        <ci id="S3.E1.m1.6.6.1.1.1.1.2.2.cmml" xref="S3.E1.m1.6.6.1.1.1.1.2.2">
                         𝑦
                        </ci>
                        <ci id="S3.E1.m1.6.6.1.1.1.1.2.3.cmml" xref="S3.E1.m1.6.6.1.1.1.1.2.3">
                         𝑙
                        </ci>
                       </apply>
                       <ci id="S3.E1.m1.6.6.1.1.1.1.3.cmml" xref="S3.E1.m1.6.6.1.1.1.1.3">
                        𝑝
                       </ci>
                      </apply>
                     </apply>
                     <apply id="S3.E1.m1.7.7.2.cmml" xref="S3.E1.m1.7.7.2">
                      <times id="S3.E1.m1.7.7.2.2.cmml" xref="S3.E1.m1.7.7.2.2">
                      </times>
                      <apply id="S3.E1.m1.7.7.2.3.cmml" xref="S3.E1.m1.7.7.2.3">
                       <csymbol cd="ambiguous" id="S3.E1.m1.7.7.2.3.1.cmml" xref="S3.E1.m1.7.7.2.3">
                        subscript
                       </csymbol>
                       <ci id="S3.E1.m1.7.7.2.3.2.cmml" xref="S3.E1.m1.7.7.2.3.2">
                        𝜋
                       </ci>
                       <apply id="S3.E1.m1.7.7.2.3.3.cmml" xref="S3.E1.m1.7.7.2.3.3">
                        <times id="S3.E1.m1.7.7.2.3.3.1.cmml" xref="S3.E1.m1.7.7.2.3.3.1">
                        </times>
                        <ci id="S3.E1.m1.7.7.2.3.3.2.cmml" xref="S3.E1.m1.7.7.2.3.3.2">
                         𝑟
                        </ci>
                        <ci id="S3.E1.m1.7.7.2.3.3.3.cmml" xref="S3.E1.m1.7.7.2.3.3.3">
                         𝑒
                        </ci>
                        <ci id="S3.E1.m1.7.7.2.3.3.4.cmml" xref="S3.E1.m1.7.7.2.3.3.4">
                         𝑓
                        </ci>
                       </apply>
                      </apply>
                      <apply id="S3.E1.m1.7.7.2.1.1.1.cmml" xref="S3.E1.m1.7.7.2.1.1">
                       <csymbol cd="latexml" id="S3.E1.m1.7.7.2.1.1.1.1.cmml" xref="S3.E1.m1.7.7.2.1.1.1.1">
                        conditional
                       </csymbol>
                       <apply id="S3.E1.m1.7.7.2.1.1.1.2.cmml" xref="S3.E1.m1.7.7.2.1.1.1.2">
                        <csymbol cd="ambiguous" id="S3.E1.m1.7.7.2.1.1.1.2.1.cmml" xref="S3.E1.m1.7.7.2.1.1.1.2">
                         subscript
                        </csymbol>
                        <ci id="S3.E1.m1.7.7.2.1.1.1.2.2.cmml" xref="S3.E1.m1.7.7.2.1.1.1.2.2">
                         𝑦
                        </ci>
                        <ci id="S3.E1.m1.7.7.2.1.1.1.2.3.cmml" xref="S3.E1.m1.7.7.2.1.1.1.2.3">
                         𝑙
                        </ci>
                       </apply>
                       <ci id="S3.E1.m1.7.7.2.1.1.1.3.cmml" xref="S3.E1.m1.7.7.2.1.1.1.3">
                        𝑝
                       </ci>
                      </apply>
                     </apply>
                    </apply>
                   </apply>
                  </apply>
                 </apply>
                </apply>
               </apply>
              </apply>
             </apply>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="S3.E1.m1.8c">
            \mathcal{L}_{\text{DPO}}(\pi_{\theta};\pi_{ref})=-\mathbb{E}_{(p,y_{w},y_{l})\sim\mathcal{D}}\left[\log\sigma\left(\beta\log\frac{\pi_{\theta}(y_{w}\mid p)}{\pi_{ref}(y_{w}\mid p)}-\beta\log\frac{\pi_{\theta}(y_{l}\mid p)}{\pi_{ref}(y_{l}\mid p)}\right)\right],
           </annotation>
          </semantics>
         </math>
        </td>
        <td class="ltx_eqn_cell ltx_eqn_center_padright">
        </td>
        <td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1">
         <span class="ltx_tag ltx_tag_equation ltx_align_right">
          (1)
         </span>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="ltx_p" id="S3.SS2.SSS3.p1.16">
      where
      <math alttext="p" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.6.m1.1">
       <semantics id="S3.SS2.SSS3.p1.6.m1.1a">
        <mi id="S3.SS2.SSS3.p1.6.m1.1.1" xref="S3.SS2.SSS3.p1.6.m1.1.1.cmml">
         p
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.6.m1.1b">
         <ci id="S3.SS2.SSS3.p1.6.m1.1.1.cmml" xref="S3.SS2.SSS3.p1.6.m1.1.1">
          𝑝
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.6.m1.1c">
         p
        </annotation>
       </semantics>
      </math>
      is a prompt consisting of a concatenation between
      <span class="ltx_text" id="S3.SS2.SSS3.p1.16.1">
       task info
      </span>
      and conversation history = {
      <math alttext="x_{1},y_{1},...,x_{i-1},y_{i-1},x_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.7.m2.6">
       <semantics id="S3.SS2.SSS3.p1.7.m2.6a">
        <mrow id="S3.SS2.SSS3.p1.7.m2.6.6.5" xref="S3.SS2.SSS3.p1.7.m2.6.6.6.cmml">
         <msub id="S3.SS2.SSS3.p1.7.m2.2.2.1.1" xref="S3.SS2.SSS3.p1.7.m2.2.2.1.1.cmml">
          <mi id="S3.SS2.SSS3.p1.7.m2.2.2.1.1.2" xref="S3.SS2.SSS3.p1.7.m2.2.2.1.1.2.cmml">
           x
          </mi>
          <mn id="S3.SS2.SSS3.p1.7.m2.2.2.1.1.3" xref="S3.SS2.SSS3.p1.7.m2.2.2.1.1.3.cmml">
           1
          </mn>
         </msub>
         <mo id="S3.SS2.SSS3.p1.7.m2.6.6.5.6" xref="S3.SS2.SSS3.p1.7.m2.6.6.6.cmml">
          ,
         </mo>
         <msub id="S3.SS2.SSS3.p1.7.m2.3.3.2.2" xref="S3.SS2.SSS3.p1.7.m2.3.3.2.2.cmml">
          <mi id="S3.SS2.SSS3.p1.7.m2.3.3.2.2.2" xref="S3.SS2.SSS3.p1.7.m2.3.3.2.2.2.cmml">
           y
          </mi>
          <mn id="S3.SS2.SSS3.p1.7.m2.3.3.2.2.3" xref="S3.SS2.SSS3.p1.7.m2.3.3.2.2.3.cmml">
           1
          </mn>
         </msub>
         <mo id="S3.SS2.SSS3.p1.7.m2.6.6.5.7" xref="S3.SS2.SSS3.p1.7.m2.6.6.6.cmml">
          ,
         </mo>
         <mi id="S3.SS2.SSS3.p1.7.m2.1.1" mathvariant="normal" xref="S3.SS2.SSS3.p1.7.m2.1.1.cmml">
          …
         </mi>
         <mo id="S3.SS2.SSS3.p1.7.m2.6.6.5.8" xref="S3.SS2.SSS3.p1.7.m2.6.6.6.cmml">
          ,
         </mo>
         <msub id="S3.SS2.SSS3.p1.7.m2.4.4.3.3" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.cmml">
          <mi id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.2" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.2.cmml">
           x
          </mi>
          <mrow id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.cmml">
           <mi id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.2" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.2.cmml">
            i
           </mi>
           <mo id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.1" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.1.cmml">
            −
           </mo>
           <mn id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.3" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.3.cmml">
            1
           </mn>
          </mrow>
         </msub>
         <mo id="S3.SS2.SSS3.p1.7.m2.6.6.5.9" xref="S3.SS2.SSS3.p1.7.m2.6.6.6.cmml">
          ,
         </mo>
         <msub id="S3.SS2.SSS3.p1.7.m2.5.5.4.4" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.cmml">
          <mi id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.2" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.2.cmml">
           y
          </mi>
          <mrow id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.cmml">
           <mi id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.2" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.2.cmml">
            i
           </mi>
           <mo id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.1" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.1.cmml">
            −
           </mo>
           <mn id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.3" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.3.cmml">
            1
           </mn>
          </mrow>
         </msub>
         <mo id="S3.SS2.SSS3.p1.7.m2.6.6.5.10" xref="S3.SS2.SSS3.p1.7.m2.6.6.6.cmml">
          ,
         </mo>
         <msub id="S3.SS2.SSS3.p1.7.m2.6.6.5.5" xref="S3.SS2.SSS3.p1.7.m2.6.6.5.5.cmml">
          <mi id="S3.SS2.SSS3.p1.7.m2.6.6.5.5.2" xref="S3.SS2.SSS3.p1.7.m2.6.6.5.5.2.cmml">
           x
          </mi>
          <mi id="S3.SS2.SSS3.p1.7.m2.6.6.5.5.3" xref="S3.SS2.SSS3.p1.7.m2.6.6.5.5.3.cmml">
           i
          </mi>
         </msub>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.7.m2.6b">
         <list id="S3.SS2.SSS3.p1.7.m2.6.6.6.cmml" xref="S3.SS2.SSS3.p1.7.m2.6.6.5">
          <apply id="S3.SS2.SSS3.p1.7.m2.2.2.1.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.2.2.1.1">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.7.m2.2.2.1.1.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.2.2.1.1">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.7.m2.2.2.1.1.2.cmml" xref="S3.SS2.SSS3.p1.7.m2.2.2.1.1.2">
            𝑥
           </ci>
           <cn id="S3.SS2.SSS3.p1.7.m2.2.2.1.1.3.cmml" type="integer" xref="S3.SS2.SSS3.p1.7.m2.2.2.1.1.3">
            1
           </cn>
          </apply>
          <apply id="S3.SS2.SSS3.p1.7.m2.3.3.2.2.cmml" xref="S3.SS2.SSS3.p1.7.m2.3.3.2.2">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.7.m2.3.3.2.2.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.3.3.2.2">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.7.m2.3.3.2.2.2.cmml" xref="S3.SS2.SSS3.p1.7.m2.3.3.2.2.2">
            𝑦
           </ci>
           <cn id="S3.SS2.SSS3.p1.7.m2.3.3.2.2.3.cmml" type="integer" xref="S3.SS2.SSS3.p1.7.m2.3.3.2.2.3">
            1
           </cn>
          </apply>
          <ci id="S3.SS2.SSS3.p1.7.m2.1.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.1.1">
           …
          </ci>
          <apply id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.cmml" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.2.cmml" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.2">
            𝑥
           </ci>
           <apply id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.cmml" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3">
            <minus id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.1">
            </minus>
            <ci id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.2.cmml" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.2">
             𝑖
            </ci>
            <cn id="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.3.cmml" type="integer" xref="S3.SS2.SSS3.p1.7.m2.4.4.3.3.3.3">
             1
            </cn>
           </apply>
          </apply>
          <apply id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.cmml" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.2.cmml" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.2">
            𝑦
           </ci>
           <apply id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.cmml" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3">
            <minus id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.1">
            </minus>
            <ci id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.2.cmml" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.2">
             𝑖
            </ci>
            <cn id="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.3.cmml" type="integer" xref="S3.SS2.SSS3.p1.7.m2.5.5.4.4.3.3">
             1
            </cn>
           </apply>
          </apply>
          <apply id="S3.SS2.SSS3.p1.7.m2.6.6.5.5.cmml" xref="S3.SS2.SSS3.p1.7.m2.6.6.5.5">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.7.m2.6.6.5.5.1.cmml" xref="S3.SS2.SSS3.p1.7.m2.6.6.5.5">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.7.m2.6.6.5.5.2.cmml" xref="S3.SS2.SSS3.p1.7.m2.6.6.5.5.2">
            𝑥
           </ci>
           <ci id="S3.SS2.SSS3.p1.7.m2.6.6.5.5.3.cmml" xref="S3.SS2.SSS3.p1.7.m2.6.6.5.5.3">
            𝑖
           </ci>
          </apply>
         </list>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.7.m2.6c">
         x_{1},y_{1},...,x_{i-1},y_{i-1},x_{i}
        </annotation>
       </semantics>
      </math>
      } with each
      <math alttext="x_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.8.m3.1">
       <semantics id="S3.SS2.SSS3.p1.8.m3.1a">
        <msub id="S3.SS2.SSS3.p1.8.m3.1.1" xref="S3.SS2.SSS3.p1.8.m3.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.8.m3.1.1.2" xref="S3.SS2.SSS3.p1.8.m3.1.1.2.cmml">
          x
         </mi>
         <mi id="S3.SS2.SSS3.p1.8.m3.1.1.3" xref="S3.SS2.SSS3.p1.8.m3.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.8.m3.1b">
         <apply id="S3.SS2.SSS3.p1.8.m3.1.1.cmml" xref="S3.SS2.SSS3.p1.8.m3.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.8.m3.1.1.1.cmml" xref="S3.SS2.SSS3.p1.8.m3.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.8.m3.1.1.2.cmml" xref="S3.SS2.SSS3.p1.8.m3.1.1.2">
           𝑥
          </ci>
          <ci id="S3.SS2.SSS3.p1.8.m3.1.1.3.cmml" xref="S3.SS2.SSS3.p1.8.m3.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.8.m3.1c">
         x_{i}
        </annotation>
       </semantics>
      </math>
      and
      <math alttext="y_{i}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.9.m4.1">
       <semantics id="S3.SS2.SSS3.p1.9.m4.1a">
        <msub id="S3.SS2.SSS3.p1.9.m4.1.1" xref="S3.SS2.SSS3.p1.9.m4.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.9.m4.1.1.2" xref="S3.SS2.SSS3.p1.9.m4.1.1.2.cmml">
          y
         </mi>
         <mi id="S3.SS2.SSS3.p1.9.m4.1.1.3" xref="S3.SS2.SSS3.p1.9.m4.1.1.3.cmml">
          i
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.9.m4.1b">
         <apply id="S3.SS2.SSS3.p1.9.m4.1.1.cmml" xref="S3.SS2.SSS3.p1.9.m4.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.9.m4.1.1.1.cmml" xref="S3.SS2.SSS3.p1.9.m4.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.9.m4.1.1.2.cmml" xref="S3.SS2.SSS3.p1.9.m4.1.1.2">
           𝑦
          </ci>
          <ci id="S3.SS2.SSS3.p1.9.m4.1.1.3.cmml" xref="S3.SS2.SSS3.p1.9.m4.1.1.3">
           𝑖
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.9.m4.1c">
         y_{i}
        </annotation>
       </semantics>
      </math>
      representing observed user-side and system-side utterances at turn
      <math alttext="i" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.10.m5.1">
       <semantics id="S3.SS2.SSS3.p1.10.m5.1a">
        <mi id="S3.SS2.SSS3.p1.10.m5.1.1" xref="S3.SS2.SSS3.p1.10.m5.1.1.cmml">
         i
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.10.m5.1b">
         <ci id="S3.SS2.SSS3.p1.10.m5.1.1.cmml" xref="S3.SS2.SSS3.p1.10.m5.1.1">
          𝑖
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.10.m5.1c">
         i
        </annotation>
       </semantics>
      </math>
      ;
      <math alttext="y_{w}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.11.m6.1">
       <semantics id="S3.SS2.SSS3.p1.11.m6.1a">
        <msub id="S3.SS2.SSS3.p1.11.m6.1.1" xref="S3.SS2.SSS3.p1.11.m6.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.11.m6.1.1.2" xref="S3.SS2.SSS3.p1.11.m6.1.1.2.cmml">
          y
         </mi>
         <mi id="S3.SS2.SSS3.p1.11.m6.1.1.3" xref="S3.SS2.SSS3.p1.11.m6.1.1.3.cmml">
          w
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.11.m6.1b">
         <apply id="S3.SS2.SSS3.p1.11.m6.1.1.cmml" xref="S3.SS2.SSS3.p1.11.m6.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.11.m6.1.1.1.cmml" xref="S3.SS2.SSS3.p1.11.m6.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.11.m6.1.1.2.cmml" xref="S3.SS2.SSS3.p1.11.m6.1.1.2">
           𝑦
          </ci>
          <ci id="S3.SS2.SSS3.p1.11.m6.1.1.3.cmml" xref="S3.SS2.SSS3.p1.11.m6.1.1.3">
           𝑤
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.11.m6.1c">
         y_{w}
        </annotation>
       </semantics>
      </math>
      and
      <math alttext="y_{l}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.12.m7.1">
       <semantics id="S3.SS2.SSS3.p1.12.m7.1a">
        <msub id="S3.SS2.SSS3.p1.12.m7.1.1" xref="S3.SS2.SSS3.p1.12.m7.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.12.m7.1.1.2" xref="S3.SS2.SSS3.p1.12.m7.1.1.2.cmml">
          y
         </mi>
         <mi id="S3.SS2.SSS3.p1.12.m7.1.1.3" xref="S3.SS2.SSS3.p1.12.m7.1.1.3.cmml">
          l
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.12.m7.1b">
         <apply id="S3.SS2.SSS3.p1.12.m7.1.1.cmml" xref="S3.SS2.SSS3.p1.12.m7.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.12.m7.1.1.1.cmml" xref="S3.SS2.SSS3.p1.12.m7.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.12.m7.1.1.2.cmml" xref="S3.SS2.SSS3.p1.12.m7.1.1.2">
           𝑦
          </ci>
          <ci id="S3.SS2.SSS3.p1.12.m7.1.1.3.cmml" xref="S3.SS2.SSS3.p1.12.m7.1.1.3">
           𝑙
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.12.m7.1c">
         y_{l}
        </annotation>
       </semantics>
      </math>
      are the designated “winning” and “losing” responses or trajectories as set in Section
      <a class="ltx_ref" href="#S3.SS2.SSS2" title="3.2.2 Self-Training Using On-policy Conversation Trajectory Simulation ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        3.2.2
       </span>
      </a>
      ;
      <math alttext="\pi_{ref}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.13.m8.1">
       <semantics id="S3.SS2.SSS3.p1.13.m8.1a">
        <msub id="S3.SS2.SSS3.p1.13.m8.1.1" xref="S3.SS2.SSS3.p1.13.m8.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.13.m8.1.1.2" xref="S3.SS2.SSS3.p1.13.m8.1.1.2.cmml">
          π
         </mi>
         <mrow id="S3.SS2.SSS3.p1.13.m8.1.1.3" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.cmml">
          <mi id="S3.SS2.SSS3.p1.13.m8.1.1.3.2" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.2.cmml">
           r
          </mi>
          <mo id="S3.SS2.SSS3.p1.13.m8.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS3.p1.13.m8.1.1.3.3" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.3.cmml">
           e
          </mi>
          <mo id="S3.SS2.SSS3.p1.13.m8.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS3.p1.13.m8.1.1.3.4" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.4.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.13.m8.1b">
         <apply id="S3.SS2.SSS3.p1.13.m8.1.1.cmml" xref="S3.SS2.SSS3.p1.13.m8.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.13.m8.1.1.1.cmml" xref="S3.SS2.SSS3.p1.13.m8.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.13.m8.1.1.2.cmml" xref="S3.SS2.SSS3.p1.13.m8.1.1.2">
           𝜋
          </ci>
          <apply id="S3.SS2.SSS3.p1.13.m8.1.1.3.cmml" xref="S3.SS2.SSS3.p1.13.m8.1.1.3">
           <times id="S3.SS2.SSS3.p1.13.m8.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS3.p1.13.m8.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.2">
            𝑟
           </ci>
           <ci id="S3.SS2.SSS3.p1.13.m8.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.3">
            𝑒
           </ci>
           <ci id="S3.SS2.SSS3.p1.13.m8.1.1.3.4.cmml" xref="S3.SS2.SSS3.p1.13.m8.1.1.3.4">
            𝑓
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.13.m8.1c">
         \pi_{ref}
        </annotation>
       </semantics>
      </math>
      is the initial reference policy model; and
      <math alttext="\beta" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.14.m9.1">
       <semantics id="S3.SS2.SSS3.p1.14.m9.1a">
        <mi id="S3.SS2.SSS3.p1.14.m9.1.1" xref="S3.SS2.SSS3.p1.14.m9.1.1.cmml">
         β
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.14.m9.1b">
         <ci id="S3.SS2.SSS3.p1.14.m9.1.1.cmml" xref="S3.SS2.SSS3.p1.14.m9.1.1">
          𝛽
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.14.m9.1c">
         \beta
        </annotation>
       </semantics>
      </math>
      is a hyperparameter that regularizes the ratio between
      <math alttext="\pi_{\theta}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.15.m10.1">
       <semantics id="S3.SS2.SSS3.p1.15.m10.1a">
        <msub id="S3.SS2.SSS3.p1.15.m10.1.1" xref="S3.SS2.SSS3.p1.15.m10.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.15.m10.1.1.2" xref="S3.SS2.SSS3.p1.15.m10.1.1.2.cmml">
          π
         </mi>
         <mi id="S3.SS2.SSS3.p1.15.m10.1.1.3" xref="S3.SS2.SSS3.p1.15.m10.1.1.3.cmml">
          θ
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.15.m10.1b">
         <apply id="S3.SS2.SSS3.p1.15.m10.1.1.cmml" xref="S3.SS2.SSS3.p1.15.m10.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.15.m10.1.1.1.cmml" xref="S3.SS2.SSS3.p1.15.m10.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.15.m10.1.1.2.cmml" xref="S3.SS2.SSS3.p1.15.m10.1.1.2">
           𝜋
          </ci>
          <ci id="S3.SS2.SSS3.p1.15.m10.1.1.3.cmml" xref="S3.SS2.SSS3.p1.15.m10.1.1.3">
           𝜃
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.15.m10.1c">
         \pi_{\theta}
        </annotation>
       </semantics>
      </math>
      and
      <math alttext="\pi_{ref}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.16.m11.1">
       <semantics id="S3.SS2.SSS3.p1.16.m11.1a">
        <msub id="S3.SS2.SSS3.p1.16.m11.1.1" xref="S3.SS2.SSS3.p1.16.m11.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.16.m11.1.1.2" xref="S3.SS2.SSS3.p1.16.m11.1.1.2.cmml">
          π
         </mi>
         <mrow id="S3.SS2.SSS3.p1.16.m11.1.1.3" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.cmml">
          <mi id="S3.SS2.SSS3.p1.16.m11.1.1.3.2" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.2.cmml">
           r
          </mi>
          <mo id="S3.SS2.SSS3.p1.16.m11.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS3.p1.16.m11.1.1.3.3" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.3.cmml">
           e
          </mi>
          <mo id="S3.SS2.SSS3.p1.16.m11.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS3.p1.16.m11.1.1.3.4" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.4.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.16.m11.1b">
         <apply id="S3.SS2.SSS3.p1.16.m11.1.1.cmml" xref="S3.SS2.SSS3.p1.16.m11.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.16.m11.1.1.1.cmml" xref="S3.SS2.SSS3.p1.16.m11.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.16.m11.1.1.2.cmml" xref="S3.SS2.SSS3.p1.16.m11.1.1.2">
           𝜋
          </ci>
          <apply id="S3.SS2.SSS3.p1.16.m11.1.1.3.cmml" xref="S3.SS2.SSS3.p1.16.m11.1.1.3">
           <times id="S3.SS2.SSS3.p1.16.m11.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS3.p1.16.m11.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.2">
            𝑟
           </ci>
           <ci id="S3.SS2.SSS3.p1.16.m11.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.3">
            𝑒
           </ci>
           <ci id="S3.SS2.SSS3.p1.16.m11.1.1.3.4.cmml" xref="S3.SS2.SSS3.p1.16.m11.1.1.3.4">
            𝑓
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.16.m11.1c">
         \pi_{ref}
        </annotation>
       </semantics>
      </math>
      . The gradient of this objective is given in
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib16" title="">
        16
       </a>
       ]
      </cite>
      as follows:
     </p>
     <table class="ltx_equation ltx_eqn_table" id="S3.E2">
      <tbody>
       <tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
        <td class="ltx_eqn_cell ltx_eqn_center_padleft">
        </td>
        <td class="ltx_eqn_cell ltx_align_center">
         <math alttext="\nabla_{\theta}\mathcal{L}_{\text{DPO}}(\pi_{\theta};\pi_{ref})=\\
-\beta\mathbb{E}_{(p,y_{w},y_{l})\sim\mathcal{D}}\bigg{[}\sigma(\hat{R}_{\theta}(p,y_{l})-\hat{R}_{\theta}(p,y_{w}))\bigg{[}\nabla_{\theta}\log\pi(y_{w}\mid p)-\nabla_{\theta}\log\pi(y_{l}\mid p)\bigg{]}\bigg{]}," class="ltx_Math" display="block" id="S3.E2.m1.66">
          <semantics id="S3.E2.m1.66a">
           <mtable displaystyle="true" id="S3.E2.m1.66.66.4" rowspacing="0pt">
            <mtr id="S3.E2.m1.66.66.4a">
             <mtd class="ltx_align_left" columnalign="left" id="S3.E2.m1.66.66.4b">
              <mrow id="S3.E2.m1.65.65.3.64.14.14">
               <mrow id="S3.E2.m1.65.65.3.64.14.14.14">
                <mrow id="S3.E2.m1.65.65.3.64.14.14.14.4">
                 <msub id="S3.E2.m1.65.65.3.64.14.14.14.4.1">
                  <mo id="S3.E2.m1.1.1.1.1.1.1" xref="S3.E2.m1.1.1.1.1.1.1.cmml">
                   ∇
                  </mo>
                  <mi id="S3.E2.m1.2.2.2.2.2.2.1" xref="S3.E2.m1.2.2.2.2.2.2.1.cmml">
                   θ
                  </mi>
                 </msub>
                 <msub id="S3.E2.m1.65.65.3.64.14.14.14.4.2">
                  <mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.3.3.3.3.3.3" xref="S3.E2.m1.3.3.3.3.3.3.cmml">
                   ℒ
                  </mi>
                  <mtext id="S3.E2.m1.4.4.4.4.4.4.1" xref="S3.E2.m1.4.4.4.4.4.4.1a.cmml">
                   DPO
                  </mtext>
                 </msub>
                </mrow>
                <mo id="S3.E2.m1.65.65.3.64.14.14.14.3" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                 ​
                </mo>
                <mrow id="S3.E2.m1.65.65.3.64.14.14.14.2.2">
                 <mo id="S3.E2.m1.5.5.5.5.5.5" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                  (
                 </mo>
                 <msub id="S3.E2.m1.64.64.2.63.13.13.13.1.1.1">
                  <mi id="S3.E2.m1.6.6.6.6.6.6" xref="S3.E2.m1.6.6.6.6.6.6.cmml">
                   π
                  </mi>
                  <mi id="S3.E2.m1.7.7.7.7.7.7.1" xref="S3.E2.m1.7.7.7.7.7.7.1.cmml">
                   θ
                  </mi>
                 </msub>
                 <mo id="S3.E2.m1.8.8.8.8.8.8" xref="S3.E2.m1.63.63.1.1.1.cmml">
                  ;
                 </mo>
                 <msub id="S3.E2.m1.65.65.3.64.14.14.14.2.2.2">
                  <mi id="S3.E2.m1.9.9.9.9.9.9" xref="S3.E2.m1.9.9.9.9.9.9.cmml">
                   π
                  </mi>
                  <mrow id="S3.E2.m1.10.10.10.10.10.10.1" xref="S3.E2.m1.10.10.10.10.10.10.1.cmml">
                   <mi id="S3.E2.m1.10.10.10.10.10.10.1.2" xref="S3.E2.m1.10.10.10.10.10.10.1.2.cmml">
                    r
                   </mi>
                   <mo id="S3.E2.m1.10.10.10.10.10.10.1.1" lspace="0em" rspace="0em" xref="S3.E2.m1.10.10.10.10.10.10.1.1.cmml">
                    ​
                   </mo>
                   <mi id="S3.E2.m1.10.10.10.10.10.10.1.3" xref="S3.E2.m1.10.10.10.10.10.10.1.3.cmml">
                    e
                   </mi>
                   <mo id="S3.E2.m1.10.10.10.10.10.10.1.1a" lspace="0em" rspace="0em" xref="S3.E2.m1.10.10.10.10.10.10.1.1.cmml">
                    ​
                   </mo>
                   <mi id="S3.E2.m1.10.10.10.10.10.10.1.4" xref="S3.E2.m1.10.10.10.10.10.10.1.4.cmml">
                    f
                   </mi>
                  </mrow>
                 </msub>
                 <mo id="S3.E2.m1.11.11.11.11.11.11" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                  )
                 </mo>
                </mrow>
               </mrow>
               <mo id="S3.E2.m1.12.12.12.12.12.12" xref="S3.E2.m1.12.12.12.12.12.12.cmml">
                =
               </mo>
               <mi id="S3.E2.m1.65.65.3.64.14.14.15" xref="S3.E2.m1.63.63.1.1.1.cmml">
               </mi>
              </mrow>
             </mtd>
            </mtr>
            <mtr id="S3.E2.m1.66.66.4c">
             <mtd class="ltx_align_right" columnalign="right" id="S3.E2.m1.66.66.4d">
              <mrow id="S3.E2.m1.66.66.4.65.51.51.51">
               <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1">
                <mo id="S3.E2.m1.66.66.4.65.51.51.51.1a" xref="S3.E2.m1.63.63.1.1.1.cmml">
                 −
                </mo>
                <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1">
                 <mi id="S3.E2.m1.14.14.14.2.2.2" xref="S3.E2.m1.14.14.14.2.2.2.cmml">
                  β
                 </mi>
                 <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.2" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                  ​
                 </mo>
                 <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.3">
                  <mi id="S3.E2.m1.15.15.15.3.3.3" xref="S3.E2.m1.15.15.15.3.3.3.cmml">
                   𝔼
                  </mi>
                  <mrow id="S3.E2.m1.16.16.16.4.4.4.1" xref="S3.E2.m1.16.16.16.4.4.4.1.cmml">
                   <mrow id="S3.E2.m1.16.16.16.4.4.4.1.3.2" xref="S3.E2.m1.16.16.16.4.4.4.1.3.3.cmml">
                    <mo id="S3.E2.m1.16.16.16.4.4.4.1.3.2.3" stretchy="false" xref="S3.E2.m1.16.16.16.4.4.4.1.3.3.cmml">
                     (
                    </mo>
                    <mi id="S3.E2.m1.16.16.16.4.4.4.1.1" xref="S3.E2.m1.16.16.16.4.4.4.1.1.cmml">
                     p
                    </mi>
                    <mo id="S3.E2.m1.16.16.16.4.4.4.1.3.2.4" xref="S3.E2.m1.16.16.16.4.4.4.1.3.3.cmml">
                     ,
                    </mo>
                    <msub id="S3.E2.m1.16.16.16.4.4.4.1.2.1.1" xref="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.cmml">
                     <mi id="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.2" xref="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.2.cmml">
                      y
                     </mi>
                     <mi id="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.3" xref="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.3.cmml">
                      w
                     </mi>
                    </msub>
                    <mo id="S3.E2.m1.16.16.16.4.4.4.1.3.2.5" xref="S3.E2.m1.16.16.16.4.4.4.1.3.3.cmml">
                     ,
                    </mo>
                    <msub id="S3.E2.m1.16.16.16.4.4.4.1.3.2.2" xref="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.cmml">
                     <mi id="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.2" xref="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.2.cmml">
                      y
                     </mi>
                     <mi id="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.3" xref="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.3.cmml">
                      l
                     </mi>
                    </msub>
                    <mo id="S3.E2.m1.16.16.16.4.4.4.1.3.2.6" stretchy="false" xref="S3.E2.m1.16.16.16.4.4.4.1.3.3.cmml">
                     )
                    </mo>
                   </mrow>
                   <mo id="S3.E2.m1.16.16.16.4.4.4.1.4" xref="S3.E2.m1.16.16.16.4.4.4.1.4.cmml">
                    ∼
                   </mo>
                   <mi class="ltx_font_mathcaligraphic" id="S3.E2.m1.16.16.16.4.4.4.1.5" xref="S3.E2.m1.16.16.16.4.4.4.1.5.cmml">
                    𝒟
                   </mi>
                  </mrow>
                 </msub>
                 <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.2a" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                  ​
                 </mo>
                 <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1">
                  <mo id="S3.E2.m1.17.17.17.5.5.5" maxsize="210%" minsize="210%" xref="S3.E2.m1.63.63.1.1.1.cmml">
                   [
                  </mo>
                  <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1">
                   <mi id="S3.E2.m1.18.18.18.6.6.6" xref="S3.E2.m1.18.18.18.6.6.6.cmml">
                    σ
                   </mi>
                   <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.3" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                    ​
                   </mo>
                   <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1">
                    <mo id="S3.E2.m1.19.19.19.7.7.7" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                     (
                    </mo>
                    <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1">
                     <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.1">
                      <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.1.3">
                       <mover accent="true" id="S3.E2.m1.20.20.20.8.8.8" xref="S3.E2.m1.20.20.20.8.8.8.cmml">
                        <mi id="S3.E2.m1.20.20.20.8.8.8.2" xref="S3.E2.m1.20.20.20.8.8.8.2.cmml">
                         R
                        </mi>
                        <mo id="S3.E2.m1.20.20.20.8.8.8.1" xref="S3.E2.m1.20.20.20.8.8.8.1.cmml">
                         ^
                        </mo>
                       </mover>
                       <mi id="S3.E2.m1.21.21.21.9.9.9.1" xref="S3.E2.m1.21.21.21.9.9.9.1.cmml">
                        θ
                       </mi>
                      </msub>
                      <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.1.2" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                       ​
                      </mo>
                      <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.1.1.1">
                       <mo id="S3.E2.m1.22.22.22.10.10.10" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        (
                       </mo>
                       <mi id="S3.E2.m1.23.23.23.11.11.11" xref="S3.E2.m1.23.23.23.11.11.11.cmml">
                        p
                       </mi>
                       <mo id="S3.E2.m1.24.24.24.12.12.12" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        ,
                       </mo>
                       <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.1.1.1.1">
                        <mi id="S3.E2.m1.25.25.25.13.13.13" xref="S3.E2.m1.25.25.25.13.13.13.cmml">
                         y
                        </mi>
                        <mi id="S3.E2.m1.26.26.26.14.14.14.1" xref="S3.E2.m1.26.26.26.14.14.14.1.cmml">
                         l
                        </mi>
                       </msub>
                       <mo id="S3.E2.m1.27.27.27.15.15.15" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        )
                       </mo>
                      </mrow>
                     </mrow>
                     <mo id="S3.E2.m1.28.28.28.16.16.16" xref="S3.E2.m1.28.28.28.16.16.16.cmml">
                      −
                     </mo>
                     <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.2">
                      <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.2.3">
                       <mover accent="true" id="S3.E2.m1.29.29.29.17.17.17" xref="S3.E2.m1.29.29.29.17.17.17.cmml">
                        <mi id="S3.E2.m1.29.29.29.17.17.17.2" xref="S3.E2.m1.29.29.29.17.17.17.2.cmml">
                         R
                        </mi>
                        <mo id="S3.E2.m1.29.29.29.17.17.17.1" xref="S3.E2.m1.29.29.29.17.17.17.1.cmml">
                         ^
                        </mo>
                       </mover>
                       <mi id="S3.E2.m1.30.30.30.18.18.18.1" xref="S3.E2.m1.30.30.30.18.18.18.1.cmml">
                        θ
                       </mi>
                      </msub>
                      <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.2.2" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                       ​
                      </mo>
                      <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.2.1.1">
                       <mo id="S3.E2.m1.31.31.31.19.19.19" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        (
                       </mo>
                       <mi id="S3.E2.m1.32.32.32.20.20.20" xref="S3.E2.m1.32.32.32.20.20.20.cmml">
                        p
                       </mi>
                       <mo id="S3.E2.m1.33.33.33.21.21.21" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        ,
                       </mo>
                       <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.1.1.1.2.1.1.1">
                        <mi id="S3.E2.m1.34.34.34.22.22.22" xref="S3.E2.m1.34.34.34.22.22.22.cmml">
                         y
                        </mi>
                        <mi id="S3.E2.m1.35.35.35.23.23.23.1" xref="S3.E2.m1.35.35.35.23.23.23.1.cmml">
                         w
                        </mi>
                       </msub>
                       <mo id="S3.E2.m1.36.36.36.24.24.24" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        )
                       </mo>
                      </mrow>
                     </mrow>
                    </mrow>
                    <mo id="S3.E2.m1.37.37.37.25.25.25" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                     )
                    </mo>
                   </mrow>
                   <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.3a" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                    ​
                   </mo>
                   <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1">
                    <mo id="S3.E2.m1.38.38.38.26.26.26" maxsize="210%" minsize="210%" xref="S3.E2.m1.63.63.1.1.1.cmml">
                     [
                    </mo>
                    <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1">
                     <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1">
                      <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1.3">
                       <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1.3.1">
                        <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1.3.1.1">
                         <mo id="S3.E2.m1.39.39.39.27.27.27" rspace="0.167em" xref="S3.E2.m1.39.39.39.27.27.27.cmml">
                          ∇
                         </mo>
                         <mi id="S3.E2.m1.40.40.40.28.28.28.1" xref="S3.E2.m1.40.40.40.28.28.28.1.cmml">
                          θ
                         </mi>
                        </msub>
                        <mi id="S3.E2.m1.41.41.41.29.29.29" xref="S3.E2.m1.41.41.41.29.29.29.cmml">
                         log
                        </mi>
                       </mrow>
                       <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1.3a" lspace="0.167em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        ⁡
                       </mo>
                       <mi id="S3.E2.m1.42.42.42.30.30.30" xref="S3.E2.m1.42.42.42.30.30.30.cmml">
                        π
                       </mi>
                      </mrow>
                      <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1.2" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                       ​
                      </mo>
                      <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1.1.1">
                       <mo id="S3.E2.m1.43.43.43.31.31.31" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        (
                       </mo>
                       <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1.1.1.1">
                        <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.1.1.1.1.1">
                         <mi id="S3.E2.m1.44.44.44.32.32.32" xref="S3.E2.m1.44.44.44.32.32.32.cmml">
                          y
                         </mi>
                         <mi id="S3.E2.m1.45.45.45.33.33.33.1" xref="S3.E2.m1.45.45.45.33.33.33.1.cmml">
                          w
                         </mi>
                        </msub>
                        <mo id="S3.E2.m1.46.46.46.34.34.34" xref="S3.E2.m1.46.46.46.34.34.34.cmml">
                         ∣
                        </mo>
                        <mi id="S3.E2.m1.47.47.47.35.35.35" xref="S3.E2.m1.47.47.47.35.35.35.cmml">
                         p
                        </mi>
                       </mrow>
                       <mo id="S3.E2.m1.48.48.48.36.36.36" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        )
                       </mo>
                      </mrow>
                     </mrow>
                     <mo id="S3.E2.m1.49.49.49.37.37.37" xref="S3.E2.m1.49.49.49.37.37.37.cmml">
                      −
                     </mo>
                     <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2">
                      <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2.3">
                       <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2.3.1">
                        <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2.3.1.1">
                         <mo id="S3.E2.m1.50.50.50.38.38.38" rspace="0.167em" xref="S3.E2.m1.50.50.50.38.38.38.cmml">
                          ∇
                         </mo>
                         <mi id="S3.E2.m1.51.51.51.39.39.39.1" xref="S3.E2.m1.51.51.51.39.39.39.1.cmml">
                          θ
                         </mi>
                        </msub>
                        <mi id="S3.E2.m1.52.52.52.40.40.40" xref="S3.E2.m1.52.52.52.40.40.40.cmml">
                         log
                        </mi>
                       </mrow>
                       <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2.3a" lspace="0.167em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        ⁡
                       </mo>
                       <mi id="S3.E2.m1.53.53.53.41.41.41" xref="S3.E2.m1.53.53.53.41.41.41.cmml">
                        π
                       </mi>
                      </mrow>
                      <mo id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2.2" lspace="0em" rspace="0em" xref="S3.E2.m1.63.63.1.1.1.cmml">
                       ​
                      </mo>
                      <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2.1.1">
                       <mo id="S3.E2.m1.54.54.54.42.42.42" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        (
                       </mo>
                       <mrow id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2.1.1.1">
                        <msub id="S3.E2.m1.66.66.4.65.51.51.51.1.1.1.1.1.2.1.1.2.1.1.1.1">
                         <mi id="S3.E2.m1.55.55.55.43.43.43" xref="S3.E2.m1.55.55.55.43.43.43.cmml">
                          y
                         </mi>
                         <mi id="S3.E2.m1.56.56.56.44.44.44.1" xref="S3.E2.m1.56.56.56.44.44.44.1.cmml">
                          l
                         </mi>
                        </msub>
                        <mo id="S3.E2.m1.57.57.57.45.45.45" xref="S3.E2.m1.57.57.57.45.45.45.cmml">
                         ∣
                        </mo>
                        <mi id="S3.E2.m1.58.58.58.46.46.46" xref="S3.E2.m1.58.58.58.46.46.46.cmml">
                         p
                        </mi>
                       </mrow>
                       <mo id="S3.E2.m1.59.59.59.47.47.47" stretchy="false" xref="S3.E2.m1.63.63.1.1.1.cmml">
                        )
                       </mo>
                      </mrow>
                     </mrow>
                    </mrow>
                    <mo id="S3.E2.m1.60.60.60.48.48.48" maxsize="210%" minsize="210%" xref="S3.E2.m1.63.63.1.1.1.cmml">
                     ]
                    </mo>
                   </mrow>
                  </mrow>
                  <mo id="S3.E2.m1.61.61.61.49.49.49" maxsize="210%" minsize="210%" xref="S3.E2.m1.63.63.1.1.1.cmml">
                   ]
                  </mo>
                 </mrow>
                </mrow>
               </mrow>
               <mo id="S3.E2.m1.62.62.62.50.50.50" xref="S3.E2.m1.63.63.1.1.1.cmml">
                ,
               </mo>
              </mrow>
             </mtd>
            </mtr>
           </mtable>
           <annotation-xml encoding="MathML-Content" id="S3.E2.m1.66b">
            <apply id="S3.E2.m1.63.63.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
             <eq id="S3.E2.m1.12.12.12.12.12.12.cmml" xref="S3.E2.m1.12.12.12.12.12.12">
             </eq>
             <apply id="S3.E2.m1.63.63.1.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
              <times id="S3.E2.m1.63.63.1.1.1.2.3.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
              </times>
              <apply id="S3.E2.m1.63.63.1.1.1.2.4.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
               <apply id="S3.E2.m1.63.63.1.1.1.2.4.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.2.4.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                 subscript
                </csymbol>
                <ci id="S3.E2.m1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.1.1.1.1.1.1">
                 ∇
                </ci>
                <ci id="S3.E2.m1.2.2.2.2.2.2.1.cmml" xref="S3.E2.m1.2.2.2.2.2.2.1">
                 𝜃
                </ci>
               </apply>
               <apply id="S3.E2.m1.63.63.1.1.1.2.4.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.2.4.2.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                 subscript
                </csymbol>
                <ci id="S3.E2.m1.3.3.3.3.3.3.cmml" xref="S3.E2.m1.3.3.3.3.3.3">
                 ℒ
                </ci>
                <ci id="S3.E2.m1.4.4.4.4.4.4.1a.cmml" xref="S3.E2.m1.4.4.4.4.4.4.1">
                 <mtext id="S3.E2.m1.4.4.4.4.4.4.1.cmml" mathsize="70%" xref="S3.E2.m1.4.4.4.4.4.4.1">
                  DPO
                 </mtext>
                </ci>
               </apply>
              </apply>
              <list id="S3.E2.m1.63.63.1.1.1.2.2.3.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
               <apply id="S3.E2.m1.63.63.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                 subscript
                </csymbol>
                <ci id="S3.E2.m1.6.6.6.6.6.6.cmml" xref="S3.E2.m1.6.6.6.6.6.6">
                 𝜋
                </ci>
                <ci id="S3.E2.m1.7.7.7.7.7.7.1.cmml" xref="S3.E2.m1.7.7.7.7.7.7.1">
                 𝜃
                </ci>
               </apply>
               <apply id="S3.E2.m1.63.63.1.1.1.2.2.2.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.2.2.2.2.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                 subscript
                </csymbol>
                <ci id="S3.E2.m1.9.9.9.9.9.9.cmml" xref="S3.E2.m1.9.9.9.9.9.9">
                 𝜋
                </ci>
                <apply id="S3.E2.m1.10.10.10.10.10.10.1.cmml" xref="S3.E2.m1.10.10.10.10.10.10.1">
                 <times id="S3.E2.m1.10.10.10.10.10.10.1.1.cmml" xref="S3.E2.m1.10.10.10.10.10.10.1.1">
                 </times>
                 <ci id="S3.E2.m1.10.10.10.10.10.10.1.2.cmml" xref="S3.E2.m1.10.10.10.10.10.10.1.2">
                  𝑟
                 </ci>
                 <ci id="S3.E2.m1.10.10.10.10.10.10.1.3.cmml" xref="S3.E2.m1.10.10.10.10.10.10.1.3">
                  𝑒
                 </ci>
                 <ci id="S3.E2.m1.10.10.10.10.10.10.1.4.cmml" xref="S3.E2.m1.10.10.10.10.10.10.1.4">
                  𝑓
                 </ci>
                </apply>
               </apply>
              </list>
             </apply>
             <apply id="S3.E2.m1.63.63.1.1.1.3.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
              <minus id="S3.E2.m1.13.13.13.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
              </minus>
              <apply id="S3.E2.m1.63.63.1.1.1.3.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
               <times id="S3.E2.m1.63.63.1.1.1.3.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
               </times>
               <ci id="S3.E2.m1.14.14.14.2.2.2.cmml" xref="S3.E2.m1.14.14.14.2.2.2">
                𝛽
               </ci>
               <apply id="S3.E2.m1.63.63.1.1.1.3.1.4.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.4.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                 subscript
                </csymbol>
                <ci id="S3.E2.m1.15.15.15.3.3.3.cmml" xref="S3.E2.m1.15.15.15.3.3.3">
                 𝔼
                </ci>
                <apply id="S3.E2.m1.16.16.16.4.4.4.1.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1">
                 <csymbol cd="latexml" id="S3.E2.m1.16.16.16.4.4.4.1.4.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.4">
                  similar-to
                 </csymbol>
                 <vector id="S3.E2.m1.16.16.16.4.4.4.1.3.3.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.3.2">
                  <ci id="S3.E2.m1.16.16.16.4.4.4.1.1.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.1">
                   𝑝
                  </ci>
                  <apply id="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.2.1.1">
                   <csymbol cd="ambiguous" id="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.1.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.2.1.1">
                    subscript
                   </csymbol>
                   <ci id="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.2.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.2">
                    𝑦
                   </ci>
                   <ci id="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.3.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.2.1.1.3">
                    𝑤
                   </ci>
                  </apply>
                  <apply id="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.3.2.2">
                   <csymbol cd="ambiguous" id="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.1.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.3.2.2">
                    subscript
                   </csymbol>
                   <ci id="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.2.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.2">
                    𝑦
                   </ci>
                   <ci id="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.3.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.3.2.2.3">
                    𝑙
                   </ci>
                  </apply>
                 </vector>
                 <ci id="S3.E2.m1.16.16.16.4.4.4.1.5.cmml" xref="S3.E2.m1.16.16.16.4.4.4.1.5">
                  𝒟
                 </ci>
                </apply>
               </apply>
               <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                <csymbol cd="latexml" id="S3.E2.m1.63.63.1.1.1.3.1.1.2.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                 delimited-[]
                </csymbol>
                <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                 <times id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.3.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                 </times>
                 <ci id="S3.E2.m1.18.18.18.6.6.6.cmml" xref="S3.E2.m1.18.18.18.6.6.6">
                  𝜎
                 </ci>
                 <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                  <minus id="S3.E2.m1.28.28.28.16.16.16.cmml" xref="S3.E2.m1.28.28.28.16.16.16">
                  </minus>
                  <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                   <times id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                   </times>
                   <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                    <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                     subscript
                    </csymbol>
                    <apply id="S3.E2.m1.20.20.20.8.8.8.cmml" xref="S3.E2.m1.20.20.20.8.8.8">
                     <ci id="S3.E2.m1.20.20.20.8.8.8.1.cmml" xref="S3.E2.m1.20.20.20.8.8.8.1">
                      ^
                     </ci>
                     <ci id="S3.E2.m1.20.20.20.8.8.8.2.cmml" xref="S3.E2.m1.20.20.20.8.8.8.2">
                      𝑅
                     </ci>
                    </apply>
                    <ci id="S3.E2.m1.21.21.21.9.9.9.1.cmml" xref="S3.E2.m1.21.21.21.9.9.9.1">
                     𝜃
                    </ci>
                   </apply>
                   <interval closure="open" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                    <ci id="S3.E2.m1.23.23.23.11.11.11.cmml" xref="S3.E2.m1.23.23.23.11.11.11">
                     𝑝
                    </ci>
                    <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                     <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                      subscript
                     </csymbol>
                     <ci id="S3.E2.m1.25.25.25.13.13.13.cmml" xref="S3.E2.m1.25.25.25.13.13.13">
                      𝑦
                     </ci>
                     <ci id="S3.E2.m1.26.26.26.14.14.14.1.cmml" xref="S3.E2.m1.26.26.26.14.14.14.1">
                      𝑙
                     </ci>
                    </apply>
                   </interval>
                  </apply>
                  <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                   <times id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                   </times>
                   <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                    <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.2.3.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                     subscript
                    </csymbol>
                    <apply id="S3.E2.m1.29.29.29.17.17.17.cmml" xref="S3.E2.m1.29.29.29.17.17.17">
                     <ci id="S3.E2.m1.29.29.29.17.17.17.1.cmml" xref="S3.E2.m1.29.29.29.17.17.17.1">
                      ^
                     </ci>
                     <ci id="S3.E2.m1.29.29.29.17.17.17.2.cmml" xref="S3.E2.m1.29.29.29.17.17.17.2">
                      𝑅
                     </ci>
                    </apply>
                    <ci id="S3.E2.m1.30.30.30.18.18.18.1.cmml" xref="S3.E2.m1.30.30.30.18.18.18.1">
                     𝜃
                    </ci>
                   </apply>
                   <interval closure="open" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.2.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                    <ci id="S3.E2.m1.32.32.32.20.20.20.cmml" xref="S3.E2.m1.32.32.32.20.20.20">
                     𝑝
                    </ci>
                    <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.2.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                     <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.1.1.1.2.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                      subscript
                     </csymbol>
                     <ci id="S3.E2.m1.34.34.34.22.22.22.cmml" xref="S3.E2.m1.34.34.34.22.22.22">
                      𝑦
                     </ci>
                     <ci id="S3.E2.m1.35.35.35.23.23.23.1.cmml" xref="S3.E2.m1.35.35.35.23.23.23.1">
                      𝑤
                     </ci>
                    </apply>
                   </interval>
                  </apply>
                 </apply>
                 <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                  <csymbol cd="latexml" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.2.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                   delimited-[]
                  </csymbol>
                  <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                   <minus id="S3.E2.m1.49.49.49.37.37.37.cmml" xref="S3.E2.m1.49.49.49.37.37.37">
                   </minus>
                   <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                    <times id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                    </times>
                    <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.3.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                     <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.3.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                      <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.3.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                       <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.3.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                        subscript
                       </csymbol>
                       <ci id="S3.E2.m1.39.39.39.27.27.27.cmml" xref="S3.E2.m1.39.39.39.27.27.27">
                        ∇
                       </ci>
                       <ci id="S3.E2.m1.40.40.40.28.28.28.1.cmml" xref="S3.E2.m1.40.40.40.28.28.28.1">
                        𝜃
                       </ci>
                      </apply>
                      <log id="S3.E2.m1.41.41.41.29.29.29.cmml" xref="S3.E2.m1.41.41.41.29.29.29">
                      </log>
                     </apply>
                     <ci id="S3.E2.m1.42.42.42.30.30.30.cmml" xref="S3.E2.m1.42.42.42.30.30.30">
                      𝜋
                     </ci>
                    </apply>
                    <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                     <csymbol cd="latexml" id="S3.E2.m1.46.46.46.34.34.34.cmml" xref="S3.E2.m1.46.46.46.34.34.34">
                      conditional
                     </csymbol>
                     <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.1.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                      <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.1.1.1.1.2.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                       subscript
                      </csymbol>
                      <ci id="S3.E2.m1.44.44.44.32.32.32.cmml" xref="S3.E2.m1.44.44.44.32.32.32">
                       𝑦
                      </ci>
                      <ci id="S3.E2.m1.45.45.45.33.33.33.1.cmml" xref="S3.E2.m1.45.45.45.33.33.33.1">
                       𝑤
                      </ci>
                     </apply>
                     <ci id="S3.E2.m1.47.47.47.35.35.35.cmml" xref="S3.E2.m1.47.47.47.35.35.35">
                      𝑝
                     </ci>
                    </apply>
                   </apply>
                   <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                    <times id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                    </times>
                    <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.3.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                     <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.3.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                      <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.3.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                       <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.3.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                        subscript
                       </csymbol>
                       <ci id="S3.E2.m1.50.50.50.38.38.38.cmml" xref="S3.E2.m1.50.50.50.38.38.38">
                        ∇
                       </ci>
                       <ci id="S3.E2.m1.51.51.51.39.39.39.1.cmml" xref="S3.E2.m1.51.51.51.39.39.39.1">
                        𝜃
                       </ci>
                      </apply>
                      <log id="S3.E2.m1.52.52.52.40.40.40.cmml" xref="S3.E2.m1.52.52.52.40.40.40">
                      </log>
                     </apply>
                     <ci id="S3.E2.m1.53.53.53.41.41.41.cmml" xref="S3.E2.m1.53.53.53.41.41.41">
                      𝜋
                     </ci>
                    </apply>
                    <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.1.1.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                     <csymbol cd="latexml" id="S3.E2.m1.57.57.57.45.45.45.cmml" xref="S3.E2.m1.57.57.57.45.45.45">
                      conditional
                     </csymbol>
                     <apply id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.1.1.1.2.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                      <csymbol cd="ambiguous" id="S3.E2.m1.63.63.1.1.1.3.1.1.1.1.2.1.1.2.1.1.1.2.1.cmml" xref="S3.E2.m1.65.65.3.64.14.14.14.3">
                       subscript
                      </csymbol>
                      <ci id="S3.E2.m1.55.55.55.43.43.43.cmml" xref="S3.E2.m1.55.55.55.43.43.43">
                       𝑦
                      </ci>
                      <ci id="S3.E2.m1.56.56.56.44.44.44.1.cmml" xref="S3.E2.m1.56.56.56.44.44.44.1">
                       𝑙
                      </ci>
                     </apply>
                     <ci id="S3.E2.m1.58.58.58.46.46.46.cmml" xref="S3.E2.m1.58.58.58.46.46.46">
                      𝑝
                     </ci>
                    </apply>
                   </apply>
                  </apply>
                 </apply>
                </apply>
               </apply>
              </apply>
             </apply>
            </apply>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="S3.E2.m1.66c">
            \nabla_{\theta}\mathcal{L}_{\text{DPO}}(\pi_{\theta};\pi_{ref})=\\
-\beta\mathbb{E}_{(p,y_{w},y_{l})\sim\mathcal{D}}\bigg{[}\sigma(\hat{R}_{\theta}(p,y_{l})-\hat{R}_{\theta}(p,y_{w}))\bigg{[}\nabla_{\theta}\log\pi(y_{w}\mid p)-\nabla_{\theta}\log\pi(y_{l}\mid p)\bigg{]}\bigg{]},
           </annotation>
          </semantics>
         </math>
        </td>
        <td class="ltx_eqn_cell ltx_eqn_center_padright">
        </td>
        <td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1">
         <span class="ltx_tag ltx_tag_equation ltx_align_right">
          (2)
         </span>
        </td>
       </tr>
      </tbody>
     </table>
     <p class="ltx_p" id="S3.SS2.SSS3.p1.21">
      where
      <math alttext="R(p,y)=\beta\log\frac{\pi(y|p)}{\pi_{ref}(y|p)}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.17.m1.4">
       <semantics id="S3.SS2.SSS3.p1.17.m1.4a">
        <mrow id="S3.SS2.SSS3.p1.17.m1.4.5" xref="S3.SS2.SSS3.p1.17.m1.4.5.cmml">
         <mrow id="S3.SS2.SSS3.p1.17.m1.4.5.2" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.cmml">
          <mi id="S3.SS2.SSS3.p1.17.m1.4.5.2.2" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.2.cmml">
           R
          </mi>
          <mo id="S3.SS2.SSS3.p1.17.m1.4.5.2.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.1.cmml">
           ​
          </mo>
          <mrow id="S3.SS2.SSS3.p1.17.m1.4.5.2.3.2" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.3.1.cmml">
           <mo id="S3.SS2.SSS3.p1.17.m1.4.5.2.3.2.1" stretchy="false" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.3.1.cmml">
            (
           </mo>
           <mi id="S3.SS2.SSS3.p1.17.m1.3.3" xref="S3.SS2.SSS3.p1.17.m1.3.3.cmml">
            p
           </mi>
           <mo id="S3.SS2.SSS3.p1.17.m1.4.5.2.3.2.2" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.3.1.cmml">
            ,
           </mo>
           <mi id="S3.SS2.SSS3.p1.17.m1.4.4" xref="S3.SS2.SSS3.p1.17.m1.4.4.cmml">
            y
           </mi>
           <mo id="S3.SS2.SSS3.p1.17.m1.4.5.2.3.2.3" stretchy="false" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.3.1.cmml">
            )
           </mo>
          </mrow>
         </mrow>
         <mo id="S3.SS2.SSS3.p1.17.m1.4.5.1" xref="S3.SS2.SSS3.p1.17.m1.4.5.1.cmml">
          =
         </mo>
         <mrow id="S3.SS2.SSS3.p1.17.m1.4.5.3" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.cmml">
          <mi id="S3.SS2.SSS3.p1.17.m1.4.5.3.2" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.2.cmml">
           β
          </mi>
          <mo id="S3.SS2.SSS3.p1.17.m1.4.5.3.1" lspace="0.167em" rspace="0em" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.1.cmml">
           ​
          </mo>
          <mrow id="S3.SS2.SSS3.p1.17.m1.4.5.3.3" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.3.cmml">
           <mi id="S3.SS2.SSS3.p1.17.m1.4.5.3.3.1" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.3.1.cmml">
            log
           </mi>
           <mo id="S3.SS2.SSS3.p1.17.m1.4.5.3.3a" lspace="0.167em" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.3.cmml">
            ⁡
           </mo>
           <mfrac id="S3.SS2.SSS3.p1.17.m1.2.2" xref="S3.SS2.SSS3.p1.17.m1.2.2.cmml">
            <mrow id="S3.SS2.SSS3.p1.17.m1.1.1.1" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.cmml">
             <mi id="S3.SS2.SSS3.p1.17.m1.1.1.1.3" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.3.cmml">
              π
             </mi>
             <mo id="S3.SS2.SSS3.p1.17.m1.1.1.1.2" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.2.cmml">
              ​
             </mo>
             <mrow id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.cmml">
              <mo id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.2" stretchy="false" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.cmml">
               (
              </mo>
              <mrow id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.cmml">
               <mi id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.2" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.2.cmml">
                y
               </mi>
               <mo fence="false" id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.1" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.1.cmml">
                |
               </mo>
               <mi id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.3" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.3.cmml">
                p
               </mi>
              </mrow>
              <mo id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.3" stretchy="false" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.cmml">
               )
              </mo>
             </mrow>
            </mrow>
            <mrow id="S3.SS2.SSS3.p1.17.m1.2.2.2" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.cmml">
             <msub id="S3.SS2.SSS3.p1.17.m1.2.2.2.3" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.cmml">
              <mi id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.2" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.2.cmml">
               π
              </mi>
              <mrow id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.cmml">
               <mi id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.2" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.2.cmml">
                r
               </mi>
               <mo id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.1.cmml">
                ​
               </mo>
               <mi id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.3" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.3.cmml">
                e
               </mi>
               <mo id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.1.cmml">
                ​
               </mo>
               <mi id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.4" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.4.cmml">
                f
               </mi>
              </mrow>
             </msub>
             <mo id="S3.SS2.SSS3.p1.17.m1.2.2.2.2" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.2.cmml">
              ​
             </mo>
             <mrow id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.cmml">
              <mo id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.2" stretchy="false" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.cmml">
               (
              </mo>
              <mrow id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.cmml">
               <mi id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.2" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.2.cmml">
                y
               </mi>
               <mo fence="false" id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.1" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.1.cmml">
                |
               </mo>
               <mi id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.3" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.3.cmml">
                p
               </mi>
              </mrow>
              <mo id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.3" stretchy="false" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.cmml">
               )
              </mo>
             </mrow>
            </mrow>
           </mfrac>
          </mrow>
         </mrow>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.17.m1.4b">
         <apply id="S3.SS2.SSS3.p1.17.m1.4.5.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5">
          <eq id="S3.SS2.SSS3.p1.17.m1.4.5.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.1">
          </eq>
          <apply id="S3.SS2.SSS3.p1.17.m1.4.5.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.2">
           <times id="S3.SS2.SSS3.p1.17.m1.4.5.2.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.1">
           </times>
           <ci id="S3.SS2.SSS3.p1.17.m1.4.5.2.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.2">
            𝑅
           </ci>
           <interval closure="open" id="S3.SS2.SSS3.p1.17.m1.4.5.2.3.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.2.3.2">
            <ci id="S3.SS2.SSS3.p1.17.m1.3.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.3.3">
             𝑝
            </ci>
            <ci id="S3.SS2.SSS3.p1.17.m1.4.4.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.4">
             𝑦
            </ci>
           </interval>
          </apply>
          <apply id="S3.SS2.SSS3.p1.17.m1.4.5.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.3">
           <times id="S3.SS2.SSS3.p1.17.m1.4.5.3.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.1">
           </times>
           <ci id="S3.SS2.SSS3.p1.17.m1.4.5.3.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.2">
            𝛽
           </ci>
           <apply id="S3.SS2.SSS3.p1.17.m1.4.5.3.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.3">
            <log id="S3.SS2.SSS3.p1.17.m1.4.5.3.3.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.4.5.3.3.1">
            </log>
            <apply id="S3.SS2.SSS3.p1.17.m1.2.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2">
             <divide id="S3.SS2.SSS3.p1.17.m1.2.2.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2">
             </divide>
             <apply id="S3.SS2.SSS3.p1.17.m1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.1.1.1">
              <times id="S3.SS2.SSS3.p1.17.m1.1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.2">
              </times>
              <ci id="S3.SS2.SSS3.p1.17.m1.1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.3">
               𝜋
              </ci>
              <apply id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1">
               <csymbol cd="latexml" id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.1">
                conditional
               </csymbol>
               <ci id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.2">
                𝑦
               </ci>
               <ci id="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.1.1.1.1.1.1.3">
                𝑝
               </ci>
              </apply>
             </apply>
             <apply id="S3.SS2.SSS3.p1.17.m1.2.2.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2">
              <times id="S3.SS2.SSS3.p1.17.m1.2.2.2.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.2">
              </times>
              <apply id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3">
               <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3">
                subscript
               </csymbol>
               <ci id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.2">
                𝜋
               </ci>
               <apply id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3">
                <times id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.1">
                </times>
                <ci id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.2">
                 𝑟
                </ci>
                <ci id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.3">
                 𝑒
                </ci>
                <ci id="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.4.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.3.3.4">
                 𝑓
                </ci>
               </apply>
              </apply>
              <apply id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1">
               <csymbol cd="latexml" id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.1.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.1">
                conditional
               </csymbol>
               <ci id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.2.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.2">
                𝑦
               </ci>
               <ci id="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.3.cmml" xref="S3.SS2.SSS3.p1.17.m1.2.2.2.1.1.1.3">
                𝑝
               </ci>
              </apply>
             </apply>
            </apply>
           </apply>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.17.m1.4c">
         R(p,y)=\beta\log\frac{\pi(y|p)}{\pi_{ref}(y|p)}
        </annotation>
       </semantics>
      </math>
      for a given policy model
      <math alttext="\pi" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.18.m2.1">
       <semantics id="S3.SS2.SSS3.p1.18.m2.1a">
        <mi id="S3.SS2.SSS3.p1.18.m2.1.1" xref="S3.SS2.SSS3.p1.18.m2.1.1.cmml">
         π
        </mi>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.18.m2.1b">
         <ci id="S3.SS2.SSS3.p1.18.m2.1.1.cmml" xref="S3.SS2.SSS3.p1.18.m2.1.1">
          𝜋
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.18.m2.1c">
         \pi
        </annotation>
       </semantics>
      </math>
      and reference model
      <math alttext="\pi_{ref}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.19.m3.1">
       <semantics id="S3.SS2.SSS3.p1.19.m3.1a">
        <msub id="S3.SS2.SSS3.p1.19.m3.1.1" xref="S3.SS2.SSS3.p1.19.m3.1.1.cmml">
         <mi id="S3.SS2.SSS3.p1.19.m3.1.1.2" xref="S3.SS2.SSS3.p1.19.m3.1.1.2.cmml">
          π
         </mi>
         <mrow id="S3.SS2.SSS3.p1.19.m3.1.1.3" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.cmml">
          <mi id="S3.SS2.SSS3.p1.19.m3.1.1.3.2" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.2.cmml">
           r
          </mi>
          <mo id="S3.SS2.SSS3.p1.19.m3.1.1.3.1" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS3.p1.19.m3.1.1.3.3" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.3.cmml">
           e
          </mi>
          <mo id="S3.SS2.SSS3.p1.19.m3.1.1.3.1a" lspace="0em" rspace="0em" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.1.cmml">
           ​
          </mo>
          <mi id="S3.SS2.SSS3.p1.19.m3.1.1.3.4" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.4.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.19.m3.1b">
         <apply id="S3.SS2.SSS3.p1.19.m3.1.1.cmml" xref="S3.SS2.SSS3.p1.19.m3.1.1">
          <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.19.m3.1.1.1.cmml" xref="S3.SS2.SSS3.p1.19.m3.1.1">
           subscript
          </csymbol>
          <ci id="S3.SS2.SSS3.p1.19.m3.1.1.2.cmml" xref="S3.SS2.SSS3.p1.19.m3.1.1.2">
           𝜋
          </ci>
          <apply id="S3.SS2.SSS3.p1.19.m3.1.1.3.cmml" xref="S3.SS2.SSS3.p1.19.m3.1.1.3">
           <times id="S3.SS2.SSS3.p1.19.m3.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.1">
           </times>
           <ci id="S3.SS2.SSS3.p1.19.m3.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.2">
            𝑟
           </ci>
           <ci id="S3.SS2.SSS3.p1.19.m3.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.3">
            𝑒
           </ci>
           <ci id="S3.SS2.SSS3.p1.19.m3.1.1.3.4.cmml" xref="S3.SS2.SSS3.p1.19.m3.1.1.3.4">
            𝑓
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.19.m3.1c">
         \pi_{ref}
        </annotation>
       </semantics>
      </math>
      , as proven under the assumptions in
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib16" title="">
        16
       </a>
       ]
      </cite>
      . The intuition behind the objective is that the gradient of the loss function would increase the likelihood of winning responses
      <math alttext="y_{w}\in Y_{w}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.20.m4.1">
       <semantics id="S3.SS2.SSS3.p1.20.m4.1a">
        <mrow id="S3.SS2.SSS3.p1.20.m4.1.1" xref="S3.SS2.SSS3.p1.20.m4.1.1.cmml">
         <msub id="S3.SS2.SSS3.p1.20.m4.1.1.2" xref="S3.SS2.SSS3.p1.20.m4.1.1.2.cmml">
          <mi id="S3.SS2.SSS3.p1.20.m4.1.1.2.2" xref="S3.SS2.SSS3.p1.20.m4.1.1.2.2.cmml">
           y
          </mi>
          <mi id="S3.SS2.SSS3.p1.20.m4.1.1.2.3" xref="S3.SS2.SSS3.p1.20.m4.1.1.2.3.cmml">
           w
          </mi>
         </msub>
         <mo id="S3.SS2.SSS3.p1.20.m4.1.1.1" xref="S3.SS2.SSS3.p1.20.m4.1.1.1.cmml">
          ∈
         </mo>
         <msub id="S3.SS2.SSS3.p1.20.m4.1.1.3" xref="S3.SS2.SSS3.p1.20.m4.1.1.3.cmml">
          <mi id="S3.SS2.SSS3.p1.20.m4.1.1.3.2" xref="S3.SS2.SSS3.p1.20.m4.1.1.3.2.cmml">
           Y
          </mi>
          <mi id="S3.SS2.SSS3.p1.20.m4.1.1.3.3" xref="S3.SS2.SSS3.p1.20.m4.1.1.3.3.cmml">
           w
          </mi>
         </msub>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.20.m4.1b">
         <apply id="S3.SS2.SSS3.p1.20.m4.1.1.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1">
          <in id="S3.SS2.SSS3.p1.20.m4.1.1.1.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.1">
          </in>
          <apply id="S3.SS2.SSS3.p1.20.m4.1.1.2.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.2">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.20.m4.1.1.2.1.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.2">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.20.m4.1.1.2.2.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.2.2">
            𝑦
           </ci>
           <ci id="S3.SS2.SSS3.p1.20.m4.1.1.2.3.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.2.3">
            𝑤
           </ci>
          </apply>
          <apply id="S3.SS2.SSS3.p1.20.m4.1.1.3.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.20.m4.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.20.m4.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.3.2">
            𝑌
           </ci>
           <ci id="S3.SS2.SSS3.p1.20.m4.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.20.m4.1.1.3.3">
            𝑤
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.20.m4.1c">
         y_{w}\in Y_{w}
        </annotation>
       </semantics>
      </math>
      and would decrease the likelihood of losing responses
      <math alttext="y_{l}\in Y_{l}" class="ltx_Math" display="inline" id="S3.SS2.SSS3.p1.21.m5.1">
       <semantics id="S3.SS2.SSS3.p1.21.m5.1a">
        <mrow id="S3.SS2.SSS3.p1.21.m5.1.1" xref="S3.SS2.SSS3.p1.21.m5.1.1.cmml">
         <msub id="S3.SS2.SSS3.p1.21.m5.1.1.2" xref="S3.SS2.SSS3.p1.21.m5.1.1.2.cmml">
          <mi id="S3.SS2.SSS3.p1.21.m5.1.1.2.2" xref="S3.SS2.SSS3.p1.21.m5.1.1.2.2.cmml">
           y
          </mi>
          <mi id="S3.SS2.SSS3.p1.21.m5.1.1.2.3" xref="S3.SS2.SSS3.p1.21.m5.1.1.2.3.cmml">
           l
          </mi>
         </msub>
         <mo id="S3.SS2.SSS3.p1.21.m5.1.1.1" xref="S3.SS2.SSS3.p1.21.m5.1.1.1.cmml">
          ∈
         </mo>
         <msub id="S3.SS2.SSS3.p1.21.m5.1.1.3" xref="S3.SS2.SSS3.p1.21.m5.1.1.3.cmml">
          <mi id="S3.SS2.SSS3.p1.21.m5.1.1.3.2" xref="S3.SS2.SSS3.p1.21.m5.1.1.3.2.cmml">
           Y
          </mi>
          <mi id="S3.SS2.SSS3.p1.21.m5.1.1.3.3" xref="S3.SS2.SSS3.p1.21.m5.1.1.3.3.cmml">
           l
          </mi>
         </msub>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="S3.SS2.SSS3.p1.21.m5.1b">
         <apply id="S3.SS2.SSS3.p1.21.m5.1.1.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1">
          <in id="S3.SS2.SSS3.p1.21.m5.1.1.1.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.1">
          </in>
          <apply id="S3.SS2.SSS3.p1.21.m5.1.1.2.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.2">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.21.m5.1.1.2.1.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.2">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.21.m5.1.1.2.2.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.2.2">
            𝑦
           </ci>
           <ci id="S3.SS2.SSS3.p1.21.m5.1.1.2.3.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.2.3">
            𝑙
           </ci>
          </apply>
          <apply id="S3.SS2.SSS3.p1.21.m5.1.1.3.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.3">
           <csymbol cd="ambiguous" id="S3.SS2.SSS3.p1.21.m5.1.1.3.1.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.3">
            subscript
           </csymbol>
           <ci id="S3.SS2.SSS3.p1.21.m5.1.1.3.2.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.3.2">
            𝑌
           </ci>
           <ci id="S3.SS2.SSS3.p1.21.m5.1.1.3.3.cmml" xref="S3.SS2.SSS3.p1.21.m5.1.1.3.3">
            𝑙
           </ci>
          </apply>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S3.SS2.SSS3.p1.21.m5.1c">
         y_{l}\in Y_{l}
        </annotation>
       </semantics>
      </math>
      , with each example being weighed by the magnitude of how incorrectly the implicitly defined reward model ranks the paired responses.
     </p>
    </div>
    <figure class="ltx_figure" id="S3.SS2.SSS3.fig1">
     <figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg2">
      <div class="ltx_listing ltx_listing" id="alg2.2">
       <div class="ltx_listingline" id="alg1.l0">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l0.1.1.1" style="font-size:80%;">
          0:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l0.2" style="font-size:90%;">
         Initial Policy Model
        </span>
        <math alttext="\pi_{\theta_{0}}" class="ltx_Math" display="inline" id="alg1.l0.m1.1">
         <semantics id="alg1.l0.m1.1a">
          <msub id="alg1.l0.m1.1.1" xref="alg1.l0.m1.1.1.cmml">
           <mi id="alg1.l0.m1.1.1.2" mathsize="90%" xref="alg1.l0.m1.1.1.2.cmml">
            π
           </mi>
           <msub id="alg1.l0.m1.1.1.3" xref="alg1.l0.m1.1.1.3.cmml">
            <mi id="alg1.l0.m1.1.1.3.2" mathsize="90%" xref="alg1.l0.m1.1.1.3.2.cmml">
             θ
            </mi>
            <mn id="alg1.l0.m1.1.1.3.3" mathsize="90%" xref="alg1.l0.m1.1.1.3.3.cmml">
             0
            </mn>
           </msub>
          </msub>
          <annotation-xml encoding="MathML-Content" id="alg1.l0.m1.1b">
           <apply id="alg1.l0.m1.1.1.cmml" xref="alg1.l0.m1.1.1">
            <csymbol cd="ambiguous" id="alg1.l0.m1.1.1.1.cmml" xref="alg1.l0.m1.1.1">
             subscript
            </csymbol>
            <ci id="alg1.l0.m1.1.1.2.cmml" xref="alg1.l0.m1.1.1.2">
             𝜋
            </ci>
            <apply id="alg1.l0.m1.1.1.3.cmml" xref="alg1.l0.m1.1.1.3">
             <csymbol cd="ambiguous" id="alg1.l0.m1.1.1.3.1.cmml" xref="alg1.l0.m1.1.1.3">
              subscript
             </csymbol>
             <ci id="alg1.l0.m1.1.1.3.2.cmml" xref="alg1.l0.m1.1.1.3.2">
              𝜃
             </ci>
             <cn id="alg1.l0.m1.1.1.3.3.cmml" type="integer" xref="alg1.l0.m1.1.1.3.3">
              0
             </cn>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l0.m1.1c">
           \pi_{\theta_{0}}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l0.3" style="font-size:90%;">
         ,
Action Contrast Dataset
        </span>
        <math alttext="D_{pref}" class="ltx_Math" display="inline" id="alg1.l0.m2.1">
         <semantics id="alg1.l0.m2.1a">
          <msub id="alg1.l0.m2.1.1" xref="alg1.l0.m2.1.1.cmml">
           <mi id="alg1.l0.m2.1.1.2" mathsize="90%" xref="alg1.l0.m2.1.1.2.cmml">
            D
           </mi>
           <mrow id="alg1.l0.m2.1.1.3" xref="alg1.l0.m2.1.1.3.cmml">
            <mi id="alg1.l0.m2.1.1.3.2" mathsize="90%" xref="alg1.l0.m2.1.1.3.2.cmml">
             p
            </mi>
            <mo id="alg1.l0.m2.1.1.3.1" lspace="0em" rspace="0em" xref="alg1.l0.m2.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l0.m2.1.1.3.3" mathsize="90%" xref="alg1.l0.m2.1.1.3.3.cmml">
             r
            </mi>
            <mo id="alg1.l0.m2.1.1.3.1a" lspace="0em" rspace="0em" xref="alg1.l0.m2.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l0.m2.1.1.3.4" mathsize="90%" xref="alg1.l0.m2.1.1.3.4.cmml">
             e
            </mi>
            <mo id="alg1.l0.m2.1.1.3.1b" lspace="0em" rspace="0em" xref="alg1.l0.m2.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l0.m2.1.1.3.5" mathsize="90%" xref="alg1.l0.m2.1.1.3.5.cmml">
             f
            </mi>
           </mrow>
          </msub>
          <annotation-xml encoding="MathML-Content" id="alg1.l0.m2.1b">
           <apply id="alg1.l0.m2.1.1.cmml" xref="alg1.l0.m2.1.1">
            <csymbol cd="ambiguous" id="alg1.l0.m2.1.1.1.cmml" xref="alg1.l0.m2.1.1">
             subscript
            </csymbol>
            <ci id="alg1.l0.m2.1.1.2.cmml" xref="alg1.l0.m2.1.1.2">
             𝐷
            </ci>
            <apply id="alg1.l0.m2.1.1.3.cmml" xref="alg1.l0.m2.1.1.3">
             <times id="alg1.l0.m2.1.1.3.1.cmml" xref="alg1.l0.m2.1.1.3.1">
             </times>
             <ci id="alg1.l0.m2.1.1.3.2.cmml" xref="alg1.l0.m2.1.1.3.2">
              𝑝
             </ci>
             <ci id="alg1.l0.m2.1.1.3.3.cmml" xref="alg1.l0.m2.1.1.3.3">
              𝑟
             </ci>
             <ci id="alg1.l0.m2.1.1.3.4.cmml" xref="alg1.l0.m2.1.1.3.4">
              𝑒
             </ci>
             <ci id="alg1.l0.m2.1.1.3.5.cmml" xref="alg1.l0.m2.1.1.3.5">
              𝑓
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l0.m2.1c">
           D_{pref}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l0.4" style="font-size:90%;">
         ,
Action Classifier
        </span>
        <math alttext="A" class="ltx_Math" display="inline" id="alg1.l0.m3.1">
         <semantics id="alg1.l0.m3.1a">
          <mi id="alg1.l0.m3.1.1" mathsize="90%" xref="alg1.l0.m3.1.1.cmml">
           A
          </mi>
          <annotation-xml encoding="MathML-Content" id="alg1.l0.m3.1b">
           <ci id="alg1.l0.m3.1.1.cmml" xref="alg1.l0.m3.1.1">
            𝐴
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l0.m3.1c">
           A
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l0.5" style="font-size:90%;">
         ,
Number of Training Batches
        </span>
        <math alttext="B" class="ltx_Math" display="inline" id="alg1.l0.m4.1">
         <semantics id="alg1.l0.m4.1a">
          <mi id="alg1.l0.m4.1.1" mathsize="90%" xref="alg1.l0.m4.1.1.cmml">
           B
          </mi>
          <annotation-xml encoding="MathML-Content" id="alg1.l0.m4.1b">
           <ci id="alg1.l0.m4.1.1.cmml" xref="alg1.l0.m4.1.1">
            𝐵
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l0.m4.1c">
           B
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l0.6" style="font-size:90%;">
         ,
User Simulator
        </span>
        <math alttext="U" class="ltx_Math" display="inline" id="alg1.l0.m5.1">
         <semantics id="alg1.l0.m5.1a">
          <mi id="alg1.l0.m5.1.1" mathsize="90%" xref="alg1.l0.m5.1.1.cmml">
           U
          </mi>
          <annotation-xml encoding="MathML-Content" id="alg1.l0.m5.1b">
           <ci id="alg1.l0.m5.1.1.cmml" xref="alg1.l0.m5.1.1">
            𝑈
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l0.m5.1c">
           U
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l0.7" style="font-size:90%;">
         ,
Downstream Task Heuristic
        </span>
        <math alttext="H" class="ltx_Math" display="inline" id="alg1.l0.m6.1">
         <semantics id="alg1.l0.m6.1a">
          <mi id="alg1.l0.m6.1.1" mathsize="90%" xref="alg1.l0.m6.1.1.cmml">
           H
          </mi>
          <annotation-xml encoding="MathML-Content" id="alg1.l0.m6.1b">
           <ci id="alg1.l0.m6.1.1.cmml" xref="alg1.l0.m6.1.1">
            𝐻
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l0.m6.1c">
           H
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l0.8" style="font-size:90%;">
         ,
Heuristic Tolerance
        </span>
        <math alttext="\epsilon" class="ltx_Math" display="inline" id="alg1.l0.m7.1">
         <semantics id="alg1.l0.m7.1a">
          <mi id="alg1.l0.m7.1.1" mathsize="90%" xref="alg1.l0.m7.1.1.cmml">
           ϵ
          </mi>
          <annotation-xml encoding="MathML-Content" id="alg1.l0.m7.1b">
           <ci id="alg1.l0.m7.1.1.cmml" xref="alg1.l0.m7.1.1">
            italic-ϵ
           </ci>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l0.m7.1c">
           \epsilon
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l0.9" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l1">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l1.1.1.1" style="font-size:80%;">
          1:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l1.2" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l1.3" style="font-size:90%;">
         for
        </span>
        <span class="ltx_text" id="alg1.l1.4" style="font-size:90%;">
         conversation turn
        </span>
        <math alttext="t_{j}" class="ltx_Math" display="inline" id="alg1.l1.m1.1">
         <semantics id="alg1.l1.m1.1a">
          <msub id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml">
           <mi id="alg1.l1.m1.1.1.2" mathsize="90%" xref="alg1.l1.m1.1.1.2.cmml">
            t
           </mi>
           <mi id="alg1.l1.m1.1.1.3" mathsize="90%" xref="alg1.l1.m1.1.1.3.cmml">
            j
           </mi>
          </msub>
          <annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b">
           <apply id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1">
            <csymbol cd="ambiguous" id="alg1.l1.m1.1.1.1.cmml" xref="alg1.l1.m1.1.1">
             subscript
            </csymbol>
            <ci id="alg1.l1.m1.1.1.2.cmml" xref="alg1.l1.m1.1.1.2">
             𝑡
            </ci>
            <ci id="alg1.l1.m1.1.1.3.cmml" xref="alg1.l1.m1.1.1.3">
             𝑗
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l1.m1.1c">
           t_{j}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l1.5" style="font-size:90%;">
         in batch
        </span>
        <math alttext="b_{i}" class="ltx_Math" display="inline" id="alg1.l1.m2.1">
         <semantics id="alg1.l1.m2.1a">
          <msub id="alg1.l1.m2.1.1" xref="alg1.l1.m2.1.1.cmml">
           <mi id="alg1.l1.m2.1.1.2" mathsize="90%" xref="alg1.l1.m2.1.1.2.cmml">
            b
           </mi>
           <mi id="alg1.l1.m2.1.1.3" mathsize="90%" xref="alg1.l1.m2.1.1.3.cmml">
            i
           </mi>
          </msub>
          <annotation-xml encoding="MathML-Content" id="alg1.l1.m2.1b">
           <apply id="alg1.l1.m2.1.1.cmml" xref="alg1.l1.m2.1.1">
            <csymbol cd="ambiguous" id="alg1.l1.m2.1.1.1.cmml" xref="alg1.l1.m2.1.1">
             subscript
            </csymbol>
            <ci id="alg1.l1.m2.1.1.2.cmml" xref="alg1.l1.m2.1.1.2">
             𝑏
            </ci>
            <ci id="alg1.l1.m2.1.1.3.cmml" xref="alg1.l1.m2.1.1.3">
             𝑖
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l1.m2.1c">
           b_{i}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l1.6" style="font-size:90%;">
         sampled from
        </span>
        <math alttext="D_{pref}" class="ltx_Math" display="inline" id="alg1.l1.m3.1">
         <semantics id="alg1.l1.m3.1a">
          <msub id="alg1.l1.m3.1.1" xref="alg1.l1.m3.1.1.cmml">
           <mi id="alg1.l1.m3.1.1.2" mathsize="90%" xref="alg1.l1.m3.1.1.2.cmml">
            D
           </mi>
           <mrow id="alg1.l1.m3.1.1.3" xref="alg1.l1.m3.1.1.3.cmml">
            <mi id="alg1.l1.m3.1.1.3.2" mathsize="90%" xref="alg1.l1.m3.1.1.3.2.cmml">
             p
            </mi>
            <mo id="alg1.l1.m3.1.1.3.1" lspace="0em" rspace="0em" xref="alg1.l1.m3.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l1.m3.1.1.3.3" mathsize="90%" xref="alg1.l1.m3.1.1.3.3.cmml">
             r
            </mi>
            <mo id="alg1.l1.m3.1.1.3.1a" lspace="0em" rspace="0em" xref="alg1.l1.m3.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l1.m3.1.1.3.4" mathsize="90%" xref="alg1.l1.m3.1.1.3.4.cmml">
             e
            </mi>
            <mo id="alg1.l1.m3.1.1.3.1b" lspace="0em" rspace="0em" xref="alg1.l1.m3.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l1.m3.1.1.3.5" mathsize="90%" xref="alg1.l1.m3.1.1.3.5.cmml">
             f
            </mi>
           </mrow>
          </msub>
          <annotation-xml encoding="MathML-Content" id="alg1.l1.m3.1b">
           <apply id="alg1.l1.m3.1.1.cmml" xref="alg1.l1.m3.1.1">
            <csymbol cd="ambiguous" id="alg1.l1.m3.1.1.1.cmml" xref="alg1.l1.m3.1.1">
             subscript
            </csymbol>
            <ci id="alg1.l1.m3.1.1.2.cmml" xref="alg1.l1.m3.1.1.2">
             𝐷
            </ci>
            <apply id="alg1.l1.m3.1.1.3.cmml" xref="alg1.l1.m3.1.1.3">
             <times id="alg1.l1.m3.1.1.3.1.cmml" xref="alg1.l1.m3.1.1.3.1">
             </times>
             <ci id="alg1.l1.m3.1.1.3.2.cmml" xref="alg1.l1.m3.1.1.3.2">
              𝑝
             </ci>
             <ci id="alg1.l1.m3.1.1.3.3.cmml" xref="alg1.l1.m3.1.1.3.3">
              𝑟
             </ci>
             <ci id="alg1.l1.m3.1.1.3.4.cmml" xref="alg1.l1.m3.1.1.3.4">
              𝑒
             </ci>
             <ci id="alg1.l1.m3.1.1.3.5.cmml" xref="alg1.l1.m3.1.1.3.5">
              𝑓
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l1.m3.1c">
           D_{pref}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l1.7" style="font-size:90%;">
         where
        </span>
        <math alttext="0\leq i\leq B" class="ltx_Math" display="inline" id="alg1.l1.m4.1">
         <semantics id="alg1.l1.m4.1a">
          <mrow id="alg1.l1.m4.1.1" xref="alg1.l1.m4.1.1.cmml">
           <mn id="alg1.l1.m4.1.1.2" mathsize="90%" xref="alg1.l1.m4.1.1.2.cmml">
            0
           </mn>
           <mo id="alg1.l1.m4.1.1.3" mathsize="90%" xref="alg1.l1.m4.1.1.3.cmml">
            ≤
           </mo>
           <mi id="alg1.l1.m4.1.1.4" mathsize="90%" xref="alg1.l1.m4.1.1.4.cmml">
            i
           </mi>
           <mo id="alg1.l1.m4.1.1.5" mathsize="90%" xref="alg1.l1.m4.1.1.5.cmml">
            ≤
           </mo>
           <mi id="alg1.l1.m4.1.1.6" mathsize="90%" xref="alg1.l1.m4.1.1.6.cmml">
            B
           </mi>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l1.m4.1b">
           <apply id="alg1.l1.m4.1.1.cmml" xref="alg1.l1.m4.1.1">
            <and id="alg1.l1.m4.1.1a.cmml" xref="alg1.l1.m4.1.1">
            </and>
            <apply id="alg1.l1.m4.1.1b.cmml" xref="alg1.l1.m4.1.1">
             <leq id="alg1.l1.m4.1.1.3.cmml" xref="alg1.l1.m4.1.1.3">
             </leq>
             <cn id="alg1.l1.m4.1.1.2.cmml" type="integer" xref="alg1.l1.m4.1.1.2">
              0
             </cn>
             <ci id="alg1.l1.m4.1.1.4.cmml" xref="alg1.l1.m4.1.1.4">
              𝑖
             </ci>
            </apply>
            <apply id="alg1.l1.m4.1.1c.cmml" xref="alg1.l1.m4.1.1">
             <leq id="alg1.l1.m4.1.1.5.cmml" xref="alg1.l1.m4.1.1.5">
             </leq>
             <share href="#alg1.l1.m4.1.1.4.cmml" id="alg1.l1.m4.1.1d.cmml" xref="alg1.l1.m4.1.1">
             </share>
             <ci id="alg1.l1.m4.1.1.6.cmml" xref="alg1.l1.m4.1.1.6">
              𝐵
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l1.m4.1c">
           0\leq i\leq B
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l1.8" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l1.9" style="font-size:90%;">
         do
        </span>
        <span class="ltx_text" id="alg1.l1.10" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l2">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l2.2.1.1" style="font-size:80%;">
          2:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l2.3" style="font-size:90%;">
         Sample
        </span>
        <math alttext="y_{j}\sim P_{\theta_{i}}(\cdot|p_{j})" class="ltx_math_unparsed" display="inline" id="alg1.l2.m1.1">
         <semantics id="alg1.l2.m1.1a">
          <mrow id="alg1.l2.m1.1b">
           <msub id="alg1.l2.m1.1.1">
            <mi id="alg1.l2.m1.1.1.2" mathsize="90%">
             y
            </mi>
            <mi id="alg1.l2.m1.1.1.3" mathsize="90%">
             j
            </mi>
           </msub>
           <mo id="alg1.l2.m1.1.2" mathsize="90%">
            ∼
           </mo>
           <msub id="alg1.l2.m1.1.3">
            <mi id="alg1.l2.m1.1.3.2" mathsize="90%">
             P
            </mi>
            <msub id="alg1.l2.m1.1.3.3">
             <mi id="alg1.l2.m1.1.3.3.2" mathsize="90%">
              θ
             </mi>
             <mi id="alg1.l2.m1.1.3.3.3" mathsize="90%">
              i
             </mi>
            </msub>
           </msub>
           <mrow id="alg1.l2.m1.1.4">
            <mo id="alg1.l2.m1.1.4.1" maxsize="90%" minsize="90%">
             (
            </mo>
            <mo id="alg1.l2.m1.1.4.2" lspace="0em" mathsize="90%" rspace="0em">
             ⋅
            </mo>
            <mo fence="false" id="alg1.l2.m1.1.4.3" maxsize="90%" minsize="90%" rspace="0.167em">
             |
            </mo>
            <msub id="alg1.l2.m1.1.4.4">
             <mi id="alg1.l2.m1.1.4.4.2" mathsize="90%">
              p
             </mi>
             <mi id="alg1.l2.m1.1.4.4.3" mathsize="90%">
              j
             </mi>
            </msub>
            <mo id="alg1.l2.m1.1.4.5" maxsize="90%" minsize="90%">
             )
            </mo>
           </mrow>
          </mrow>
          <annotation encoding="application/x-tex" id="alg1.l2.m1.1c">
           y_{j}\sim P_{\theta_{i}}(\cdot|p_{j})
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l2.4" style="font-size:90%;">
        </span>
        <span class="ltx_text" id="alg1.l2.1" style="font-size:90%;float:right;">
         <math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l2.1.m1.1">
          <semantics id="alg1.l2.1.m1.1a">
           <mo id="alg1.l2.1.m1.1.1" xref="alg1.l2.1.m1.1.1.cmml">
            ▷
           </mo>
           <annotation-xml encoding="MathML-Content" id="alg1.l2.1.m1.1b">
            <ci id="alg1.l2.1.m1.1.1.cmml" xref="alg1.l2.1.m1.1.1">
             ▷
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="alg1.l2.1.m1.1c">
            \triangleright
           </annotation>
          </semantics>
         </math>
         Sample a response from the current model policy
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l3">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l3.1.1.1" style="font-size:80%;">
          3:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l3.2" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l3.3" style="font-size:90%;">
         if
        </span>
        <span class="ltx_text" id="alg1.l3.4" style="font-size:90%;">
         Action
        </span>
        <math alttext="A(y_{j})\neq" class="ltx_Math" display="inline" id="alg1.l3.m1.1">
         <semantics id="alg1.l3.m1.1a">
          <mrow id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml">
           <mrow id="alg1.l3.m1.1.1.1" xref="alg1.l3.m1.1.1.1.cmml">
            <mi id="alg1.l3.m1.1.1.1.3" mathsize="90%" xref="alg1.l3.m1.1.1.1.3.cmml">
             A
            </mi>
            <mo id="alg1.l3.m1.1.1.1.2" lspace="0em" rspace="0em" xref="alg1.l3.m1.1.1.1.2.cmml">
             ​
            </mo>
            <mrow id="alg1.l3.m1.1.1.1.1.1" xref="alg1.l3.m1.1.1.1.1.1.1.cmml">
             <mo id="alg1.l3.m1.1.1.1.1.1.2" maxsize="90%" minsize="90%" xref="alg1.l3.m1.1.1.1.1.1.1.cmml">
              (
             </mo>
             <msub id="alg1.l3.m1.1.1.1.1.1.1" xref="alg1.l3.m1.1.1.1.1.1.1.cmml">
              <mi id="alg1.l3.m1.1.1.1.1.1.1.2" mathsize="90%" xref="alg1.l3.m1.1.1.1.1.1.1.2.cmml">
               y
              </mi>
              <mi id="alg1.l3.m1.1.1.1.1.1.1.3" mathsize="90%" xref="alg1.l3.m1.1.1.1.1.1.1.3.cmml">
               j
              </mi>
             </msub>
             <mo id="alg1.l3.m1.1.1.1.1.1.3" maxsize="90%" minsize="90%" xref="alg1.l3.m1.1.1.1.1.1.1.cmml">
              )
             </mo>
            </mrow>
           </mrow>
           <mo id="alg1.l3.m1.1.1.2" mathsize="90%" xref="alg1.l3.m1.1.1.2.cmml">
            ≠
           </mo>
           <mi id="alg1.l3.m1.1.1.3" xref="alg1.l3.m1.1.1.3.cmml">
           </mi>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l3.m1.1b">
           <apply id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1">
            <neq id="alg1.l3.m1.1.1.2.cmml" xref="alg1.l3.m1.1.1.2">
            </neq>
            <apply id="alg1.l3.m1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1">
             <times id="alg1.l3.m1.1.1.1.2.cmml" xref="alg1.l3.m1.1.1.1.2">
             </times>
             <ci id="alg1.l3.m1.1.1.1.3.cmml" xref="alg1.l3.m1.1.1.1.3">
              𝐴
             </ci>
             <apply id="alg1.l3.m1.1.1.1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1.1.1">
              <csymbol cd="ambiguous" id="alg1.l3.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l3.m1.1.1.1.1.1">
               subscript
              </csymbol>
              <ci id="alg1.l3.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.2">
               𝑦
              </ci>
              <ci id="alg1.l3.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l3.m1.1.1.1.1.1.1.3">
               𝑗
              </ci>
             </apply>
            </apply>
            <csymbol cd="latexml" id="alg1.l3.m1.1.1.3.cmml" xref="alg1.l3.m1.1.1.3">
             absent
            </csymbol>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l3.m1.1c">
           A(y_{j})\neq
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l3.5" style="font-size:90%;">
         Action
        </span>
        <math alttext="a_{j}" class="ltx_Math" display="inline" id="alg1.l3.m2.1">
         <semantics id="alg1.l3.m2.1a">
          <msub id="alg1.l3.m2.1.1" xref="alg1.l3.m2.1.1.cmml">
           <mi id="alg1.l3.m2.1.1.2" mathsize="90%" xref="alg1.l3.m2.1.1.2.cmml">
            a
           </mi>
           <mi id="alg1.l3.m2.1.1.3" mathsize="90%" xref="alg1.l3.m2.1.1.3.cmml">
            j
           </mi>
          </msub>
          <annotation-xml encoding="MathML-Content" id="alg1.l3.m2.1b">
           <apply id="alg1.l3.m2.1.1.cmml" xref="alg1.l3.m2.1.1">
            <csymbol cd="ambiguous" id="alg1.l3.m2.1.1.1.cmml" xref="alg1.l3.m2.1.1">
             subscript
            </csymbol>
            <ci id="alg1.l3.m2.1.1.2.cmml" xref="alg1.l3.m2.1.1.2">
             𝑎
            </ci>
            <ci id="alg1.l3.m2.1.1.3.cmml" xref="alg1.l3.m2.1.1.3">
             𝑗
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l3.m2.1c">
           a_{j}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l3.6" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l3.7" style="font-size:90%;">
         then
        </span>
        <span class="ltx_text" id="alg1.l3.8" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l4">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l4.2.1.1" style="font-size:80%;">
          4:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l4.3" style="font-size:90%;">
         Set
        </span>
        <math alttext="y_{lj}=y_{j}" class="ltx_Math" display="inline" id="alg1.l4.m1.1">
         <semantics id="alg1.l4.m1.1a">
          <mrow id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml">
           <msub id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml">
            <mi id="alg1.l4.m1.1.1.2.2" mathsize="90%" xref="alg1.l4.m1.1.1.2.2.cmml">
             y
            </mi>
            <mrow id="alg1.l4.m1.1.1.2.3" xref="alg1.l4.m1.1.1.2.3.cmml">
             <mi id="alg1.l4.m1.1.1.2.3.2" mathsize="90%" xref="alg1.l4.m1.1.1.2.3.2.cmml">
              l
             </mi>
             <mo id="alg1.l4.m1.1.1.2.3.1" lspace="0em" rspace="0em" xref="alg1.l4.m1.1.1.2.3.1.cmml">
              ​
             </mo>
             <mi id="alg1.l4.m1.1.1.2.3.3" mathsize="90%" xref="alg1.l4.m1.1.1.2.3.3.cmml">
              j
             </mi>
            </mrow>
           </msub>
           <mo id="alg1.l4.m1.1.1.1" mathsize="90%" xref="alg1.l4.m1.1.1.1.cmml">
            =
           </mo>
           <msub id="alg1.l4.m1.1.1.3" xref="alg1.l4.m1.1.1.3.cmml">
            <mi id="alg1.l4.m1.1.1.3.2" mathsize="90%" xref="alg1.l4.m1.1.1.3.2.cmml">
             y
            </mi>
            <mi id="alg1.l4.m1.1.1.3.3" mathsize="90%" xref="alg1.l4.m1.1.1.3.3.cmml">
             j
            </mi>
           </msub>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b">
           <apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1">
            <eq id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1">
            </eq>
            <apply id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2">
             <csymbol cd="ambiguous" id="alg1.l4.m1.1.1.2.1.cmml" xref="alg1.l4.m1.1.1.2">
              subscript
             </csymbol>
             <ci id="alg1.l4.m1.1.1.2.2.cmml" xref="alg1.l4.m1.1.1.2.2">
              𝑦
             </ci>
             <apply id="alg1.l4.m1.1.1.2.3.cmml" xref="alg1.l4.m1.1.1.2.3">
              <times id="alg1.l4.m1.1.1.2.3.1.cmml" xref="alg1.l4.m1.1.1.2.3.1">
              </times>
              <ci id="alg1.l4.m1.1.1.2.3.2.cmml" xref="alg1.l4.m1.1.1.2.3.2">
               𝑙
              </ci>
              <ci id="alg1.l4.m1.1.1.2.3.3.cmml" xref="alg1.l4.m1.1.1.2.3.3">
               𝑗
              </ci>
             </apply>
            </apply>
            <apply id="alg1.l4.m1.1.1.3.cmml" xref="alg1.l4.m1.1.1.3">
             <csymbol cd="ambiguous" id="alg1.l4.m1.1.1.3.1.cmml" xref="alg1.l4.m1.1.1.3">
              subscript
             </csymbol>
             <ci id="alg1.l4.m1.1.1.3.2.cmml" xref="alg1.l4.m1.1.1.3.2">
              𝑦
             </ci>
             <ci id="alg1.l4.m1.1.1.3.3.cmml" xref="alg1.l4.m1.1.1.3.3">
              𝑗
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l4.m1.1c">
           y_{lj}=y_{j}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l4.4" style="font-size:90%;">
        </span>
        <span class="ltx_text" id="alg1.l4.1" style="font-size:90%;float:right;">
         <math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l4.1.m1.1">
          <semantics id="alg1.l4.1.m1.1a">
           <mo id="alg1.l4.1.m1.1.1" xref="alg1.l4.1.m1.1.1.cmml">
            ▷
           </mo>
           <annotation-xml encoding="MathML-Content" id="alg1.l4.1.m1.1b">
            <ci id="alg1.l4.1.m1.1.1.cmml" xref="alg1.l4.1.m1.1.1">
             ▷
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="alg1.l4.1.m1.1c">
            \triangleright
           </annotation>
          </semantics>
         </math>
         Implicit pragmatic action does not match ground truth
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l5">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l5.1.1.1" style="font-size:80%;">
          5:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l5.2" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l5.3" style="font-size:90%;">
         else
        </span>
        <span class="ltx_text" id="alg1.l5.4" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l6">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l6.1.1.1" style="font-size:80%;">
          6:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l6.2" style="font-size:90%;">
         Initialize
        </span>
        <math alttext="Trajectory" class="ltx_Math" display="inline" id="alg1.l6.m1.1">
         <semantics id="alg1.l6.m1.1a">
          <mrow id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml">
           <mi id="alg1.l6.m1.1.1.2" mathsize="90%" xref="alg1.l6.m1.1.1.2.cmml">
            T
           </mi>
           <mo id="alg1.l6.m1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.3" mathsize="90%" xref="alg1.l6.m1.1.1.3.cmml">
            r
           </mi>
           <mo id="alg1.l6.m1.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.4" mathsize="90%" xref="alg1.l6.m1.1.1.4.cmml">
            a
           </mi>
           <mo id="alg1.l6.m1.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.5" mathsize="90%" xref="alg1.l6.m1.1.1.5.cmml">
            j
           </mi>
           <mo id="alg1.l6.m1.1.1.1c" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.6" mathsize="90%" xref="alg1.l6.m1.1.1.6.cmml">
            e
           </mi>
           <mo id="alg1.l6.m1.1.1.1d" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.7" mathsize="90%" xref="alg1.l6.m1.1.1.7.cmml">
            c
           </mi>
           <mo id="alg1.l6.m1.1.1.1e" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.8" mathsize="90%" xref="alg1.l6.m1.1.1.8.cmml">
            t
           </mi>
           <mo id="alg1.l6.m1.1.1.1f" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.9" mathsize="90%" xref="alg1.l6.m1.1.1.9.cmml">
            o
           </mi>
           <mo id="alg1.l6.m1.1.1.1g" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.10" mathsize="90%" xref="alg1.l6.m1.1.1.10.cmml">
            r
           </mi>
           <mo id="alg1.l6.m1.1.1.1h" lspace="0em" rspace="0em" xref="alg1.l6.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l6.m1.1.1.11" mathsize="90%" xref="alg1.l6.m1.1.1.11.cmml">
            y
           </mi>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l6.m1.1b">
           <apply id="alg1.l6.m1.1.1.cmml" xref="alg1.l6.m1.1.1">
            <times id="alg1.l6.m1.1.1.1.cmml" xref="alg1.l6.m1.1.1.1">
            </times>
            <ci id="alg1.l6.m1.1.1.2.cmml" xref="alg1.l6.m1.1.1.2">
             𝑇
            </ci>
            <ci id="alg1.l6.m1.1.1.3.cmml" xref="alg1.l6.m1.1.1.3">
             𝑟
            </ci>
            <ci id="alg1.l6.m1.1.1.4.cmml" xref="alg1.l6.m1.1.1.4">
             𝑎
            </ci>
            <ci id="alg1.l6.m1.1.1.5.cmml" xref="alg1.l6.m1.1.1.5">
             𝑗
            </ci>
            <ci id="alg1.l6.m1.1.1.6.cmml" xref="alg1.l6.m1.1.1.6">
             𝑒
            </ci>
            <ci id="alg1.l6.m1.1.1.7.cmml" xref="alg1.l6.m1.1.1.7">
             𝑐
            </ci>
            <ci id="alg1.l6.m1.1.1.8.cmml" xref="alg1.l6.m1.1.1.8">
             𝑡
            </ci>
            <ci id="alg1.l6.m1.1.1.9.cmml" xref="alg1.l6.m1.1.1.9">
             𝑜
            </ci>
            <ci id="alg1.l6.m1.1.1.10.cmml" xref="alg1.l6.m1.1.1.10">
             𝑟
            </ci>
            <ci id="alg1.l6.m1.1.1.11.cmml" xref="alg1.l6.m1.1.1.11">
             𝑦
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l6.m1.1c">
           Trajectory
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l6.3" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l7">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l7.1.1.1" style="font-size:80%;">
          7:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l7.2" style="font-size:90%;">
         Add
        </span>
        <math alttext="y_{j}" class="ltx_Math" display="inline" id="alg1.l7.m1.1">
         <semantics id="alg1.l7.m1.1a">
          <msub id="alg1.l7.m1.1.1" xref="alg1.l7.m1.1.1.cmml">
           <mi id="alg1.l7.m1.1.1.2" mathsize="90%" xref="alg1.l7.m1.1.1.2.cmml">
            y
           </mi>
           <mi id="alg1.l7.m1.1.1.3" mathsize="90%" xref="alg1.l7.m1.1.1.3.cmml">
            j
           </mi>
          </msub>
          <annotation-xml encoding="MathML-Content" id="alg1.l7.m1.1b">
           <apply id="alg1.l7.m1.1.1.cmml" xref="alg1.l7.m1.1.1">
            <csymbol cd="ambiguous" id="alg1.l7.m1.1.1.1.cmml" xref="alg1.l7.m1.1.1">
             subscript
            </csymbol>
            <ci id="alg1.l7.m1.1.1.2.cmml" xref="alg1.l7.m1.1.1.2">
             𝑦
            </ci>
            <ci id="alg1.l7.m1.1.1.3.cmml" xref="alg1.l7.m1.1.1.3">
             𝑗
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l7.m1.1c">
           y_{j}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l7.3" style="font-size:90%;">
         to
        </span>
        <math alttext="Trajectory" class="ltx_Math" display="inline" id="alg1.l7.m2.1">
         <semantics id="alg1.l7.m2.1a">
          <mrow id="alg1.l7.m2.1.1" xref="alg1.l7.m2.1.1.cmml">
           <mi id="alg1.l7.m2.1.1.2" mathsize="90%" xref="alg1.l7.m2.1.1.2.cmml">
            T
           </mi>
           <mo id="alg1.l7.m2.1.1.1" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.3" mathsize="90%" xref="alg1.l7.m2.1.1.3.cmml">
            r
           </mi>
           <mo id="alg1.l7.m2.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.4" mathsize="90%" xref="alg1.l7.m2.1.1.4.cmml">
            a
           </mi>
           <mo id="alg1.l7.m2.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.5" mathsize="90%" xref="alg1.l7.m2.1.1.5.cmml">
            j
           </mi>
           <mo id="alg1.l7.m2.1.1.1c" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.6" mathsize="90%" xref="alg1.l7.m2.1.1.6.cmml">
            e
           </mi>
           <mo id="alg1.l7.m2.1.1.1d" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.7" mathsize="90%" xref="alg1.l7.m2.1.1.7.cmml">
            c
           </mi>
           <mo id="alg1.l7.m2.1.1.1e" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.8" mathsize="90%" xref="alg1.l7.m2.1.1.8.cmml">
            t
           </mi>
           <mo id="alg1.l7.m2.1.1.1f" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.9" mathsize="90%" xref="alg1.l7.m2.1.1.9.cmml">
            o
           </mi>
           <mo id="alg1.l7.m2.1.1.1g" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.10" mathsize="90%" xref="alg1.l7.m2.1.1.10.cmml">
            r
           </mi>
           <mo id="alg1.l7.m2.1.1.1h" lspace="0em" rspace="0em" xref="alg1.l7.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l7.m2.1.1.11" mathsize="90%" xref="alg1.l7.m2.1.1.11.cmml">
            y
           </mi>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l7.m2.1b">
           <apply id="alg1.l7.m2.1.1.cmml" xref="alg1.l7.m2.1.1">
            <times id="alg1.l7.m2.1.1.1.cmml" xref="alg1.l7.m2.1.1.1">
            </times>
            <ci id="alg1.l7.m2.1.1.2.cmml" xref="alg1.l7.m2.1.1.2">
             𝑇
            </ci>
            <ci id="alg1.l7.m2.1.1.3.cmml" xref="alg1.l7.m2.1.1.3">
             𝑟
            </ci>
            <ci id="alg1.l7.m2.1.1.4.cmml" xref="alg1.l7.m2.1.1.4">
             𝑎
            </ci>
            <ci id="alg1.l7.m2.1.1.5.cmml" xref="alg1.l7.m2.1.1.5">
             𝑗
            </ci>
            <ci id="alg1.l7.m2.1.1.6.cmml" xref="alg1.l7.m2.1.1.6">
             𝑒
            </ci>
            <ci id="alg1.l7.m2.1.1.7.cmml" xref="alg1.l7.m2.1.1.7">
             𝑐
            </ci>
            <ci id="alg1.l7.m2.1.1.8.cmml" xref="alg1.l7.m2.1.1.8">
             𝑡
            </ci>
            <ci id="alg1.l7.m2.1.1.9.cmml" xref="alg1.l7.m2.1.1.9">
             𝑜
            </ci>
            <ci id="alg1.l7.m2.1.1.10.cmml" xref="alg1.l7.m2.1.1.10">
             𝑟
            </ci>
            <ci id="alg1.l7.m2.1.1.11.cmml" xref="alg1.l7.m2.1.1.11">
             𝑦
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l7.m2.1c">
           Trajectory
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l7.4" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l8">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l8.1.1.1" style="font-size:80%;">
          8:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l8.2" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l8.3" style="font-size:90%;">
         while
        </span>
        <span class="ltx_text" id="alg1.l8.4" style="font-size:90%;">
        </span>
        <math alttext="A(y_{j})\neq ANSWER" class="ltx_Math" display="inline" id="alg1.l8.m1.1">
         <semantics id="alg1.l8.m1.1a">
          <mrow id="alg1.l8.m1.1.1" xref="alg1.l8.m1.1.1.cmml">
           <mrow id="alg1.l8.m1.1.1.1" xref="alg1.l8.m1.1.1.1.cmml">
            <mi id="alg1.l8.m1.1.1.1.3" mathsize="90%" xref="alg1.l8.m1.1.1.1.3.cmml">
             A
            </mi>
            <mo id="alg1.l8.m1.1.1.1.2" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.1.2.cmml">
             ​
            </mo>
            <mrow id="alg1.l8.m1.1.1.1.1.1" xref="alg1.l8.m1.1.1.1.1.1.1.cmml">
             <mo id="alg1.l8.m1.1.1.1.1.1.2" maxsize="90%" minsize="90%" xref="alg1.l8.m1.1.1.1.1.1.1.cmml">
              (
             </mo>
             <msub id="alg1.l8.m1.1.1.1.1.1.1" xref="alg1.l8.m1.1.1.1.1.1.1.cmml">
              <mi id="alg1.l8.m1.1.1.1.1.1.1.2" mathsize="90%" xref="alg1.l8.m1.1.1.1.1.1.1.2.cmml">
               y
              </mi>
              <mi id="alg1.l8.m1.1.1.1.1.1.1.3" mathsize="90%" xref="alg1.l8.m1.1.1.1.1.1.1.3.cmml">
               j
              </mi>
             </msub>
             <mo id="alg1.l8.m1.1.1.1.1.1.3" maxsize="90%" minsize="90%" xref="alg1.l8.m1.1.1.1.1.1.1.cmml">
              )
             </mo>
            </mrow>
           </mrow>
           <mo id="alg1.l8.m1.1.1.2" mathsize="90%" xref="alg1.l8.m1.1.1.2.cmml">
            ≠
           </mo>
           <mrow id="alg1.l8.m1.1.1.3" xref="alg1.l8.m1.1.1.3.cmml">
            <mi id="alg1.l8.m1.1.1.3.2" mathsize="90%" xref="alg1.l8.m1.1.1.3.2.cmml">
             A
            </mi>
            <mo id="alg1.l8.m1.1.1.3.1" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l8.m1.1.1.3.3" mathsize="90%" xref="alg1.l8.m1.1.1.3.3.cmml">
             N
            </mi>
            <mo id="alg1.l8.m1.1.1.3.1a" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l8.m1.1.1.3.4" mathsize="90%" xref="alg1.l8.m1.1.1.3.4.cmml">
             S
            </mi>
            <mo id="alg1.l8.m1.1.1.3.1b" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l8.m1.1.1.3.5" mathsize="90%" xref="alg1.l8.m1.1.1.3.5.cmml">
             W
            </mi>
            <mo id="alg1.l8.m1.1.1.3.1c" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l8.m1.1.1.3.6" mathsize="90%" xref="alg1.l8.m1.1.1.3.6.cmml">
             E
            </mi>
            <mo id="alg1.l8.m1.1.1.3.1d" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l8.m1.1.1.3.7" mathsize="90%" xref="alg1.l8.m1.1.1.3.7.cmml">
             R
            </mi>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l8.m1.1b">
           <apply id="alg1.l8.m1.1.1.cmml" xref="alg1.l8.m1.1.1">
            <neq id="alg1.l8.m1.1.1.2.cmml" xref="alg1.l8.m1.1.1.2">
            </neq>
            <apply id="alg1.l8.m1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1">
             <times id="alg1.l8.m1.1.1.1.2.cmml" xref="alg1.l8.m1.1.1.1.2">
             </times>
             <ci id="alg1.l8.m1.1.1.1.3.cmml" xref="alg1.l8.m1.1.1.1.3">
              𝐴
             </ci>
             <apply id="alg1.l8.m1.1.1.1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1.1.1">
              <csymbol cd="ambiguous" id="alg1.l8.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1.1.1">
               subscript
              </csymbol>
              <ci id="alg1.l8.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l8.m1.1.1.1.1.1.1.2">
               𝑦
              </ci>
              <ci id="alg1.l8.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l8.m1.1.1.1.1.1.1.3">
               𝑗
              </ci>
             </apply>
            </apply>
            <apply id="alg1.l8.m1.1.1.3.cmml" xref="alg1.l8.m1.1.1.3">
             <times id="alg1.l8.m1.1.1.3.1.cmml" xref="alg1.l8.m1.1.1.3.1">
             </times>
             <ci id="alg1.l8.m1.1.1.3.2.cmml" xref="alg1.l8.m1.1.1.3.2">
              𝐴
             </ci>
             <ci id="alg1.l8.m1.1.1.3.3.cmml" xref="alg1.l8.m1.1.1.3.3">
              𝑁
             </ci>
             <ci id="alg1.l8.m1.1.1.3.4.cmml" xref="alg1.l8.m1.1.1.3.4">
              𝑆
             </ci>
             <ci id="alg1.l8.m1.1.1.3.5.cmml" xref="alg1.l8.m1.1.1.3.5">
              𝑊
             </ci>
             <ci id="alg1.l8.m1.1.1.3.6.cmml" xref="alg1.l8.m1.1.1.3.6">
              𝐸
             </ci>
             <ci id="alg1.l8.m1.1.1.3.7.cmml" xref="alg1.l8.m1.1.1.3.7">
              𝑅
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l8.m1.1c">
           A(y_{j})\neq ANSWER
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l8.5" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l8.6" style="font-size:90%;">
         do
        </span>
        <span class="ltx_text" id="alg1.l8.7" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l9">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l9.2.1.1" style="font-size:80%;">
          9:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l9.3" style="font-size:90%;">
         Clarification Answer
        </span>
        <math alttext="=P_{U}(p;y_{j})" class="ltx_Math" display="inline" id="alg1.l9.m1.2">
         <semantics id="alg1.l9.m1.2a">
          <mrow id="alg1.l9.m1.2.2" xref="alg1.l9.m1.2.2.cmml">
           <mi id="alg1.l9.m1.2.2.3" xref="alg1.l9.m1.2.2.3.cmml">
           </mi>
           <mo id="alg1.l9.m1.2.2.2" mathsize="90%" xref="alg1.l9.m1.2.2.2.cmml">
            =
           </mo>
           <mrow id="alg1.l9.m1.2.2.1" xref="alg1.l9.m1.2.2.1.cmml">
            <msub id="alg1.l9.m1.2.2.1.3" xref="alg1.l9.m1.2.2.1.3.cmml">
             <mi id="alg1.l9.m1.2.2.1.3.2" mathsize="90%" xref="alg1.l9.m1.2.2.1.3.2.cmml">
              P
             </mi>
             <mi id="alg1.l9.m1.2.2.1.3.3" mathsize="90%" xref="alg1.l9.m1.2.2.1.3.3.cmml">
              U
             </mi>
            </msub>
            <mo id="alg1.l9.m1.2.2.1.2" lspace="0em" rspace="0em" xref="alg1.l9.m1.2.2.1.2.cmml">
             ​
            </mo>
            <mrow id="alg1.l9.m1.2.2.1.1.1" xref="alg1.l9.m1.2.2.1.1.2.cmml">
             <mo id="alg1.l9.m1.2.2.1.1.1.2" maxsize="90%" minsize="90%" xref="alg1.l9.m1.2.2.1.1.2.cmml">
              (
             </mo>
             <mi id="alg1.l9.m1.1.1" mathsize="90%" xref="alg1.l9.m1.1.1.cmml">
              p
             </mi>
             <mo id="alg1.l9.m1.2.2.1.1.1.3" mathsize="90%" xref="alg1.l9.m1.2.2.1.1.2.cmml">
              ;
             </mo>
             <msub id="alg1.l9.m1.2.2.1.1.1.1" xref="alg1.l9.m1.2.2.1.1.1.1.cmml">
              <mi id="alg1.l9.m1.2.2.1.1.1.1.2" mathsize="90%" xref="alg1.l9.m1.2.2.1.1.1.1.2.cmml">
               y
              </mi>
              <mi id="alg1.l9.m1.2.2.1.1.1.1.3" mathsize="90%" xref="alg1.l9.m1.2.2.1.1.1.1.3.cmml">
               j
              </mi>
             </msub>
             <mo id="alg1.l9.m1.2.2.1.1.1.4" maxsize="90%" minsize="90%" xref="alg1.l9.m1.2.2.1.1.2.cmml">
              )
             </mo>
            </mrow>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l9.m1.2b">
           <apply id="alg1.l9.m1.2.2.cmml" xref="alg1.l9.m1.2.2">
            <eq id="alg1.l9.m1.2.2.2.cmml" xref="alg1.l9.m1.2.2.2">
            </eq>
            <csymbol cd="latexml" id="alg1.l9.m1.2.2.3.cmml" xref="alg1.l9.m1.2.2.3">
             absent
            </csymbol>
            <apply id="alg1.l9.m1.2.2.1.cmml" xref="alg1.l9.m1.2.2.1">
             <times id="alg1.l9.m1.2.2.1.2.cmml" xref="alg1.l9.m1.2.2.1.2">
             </times>
             <apply id="alg1.l9.m1.2.2.1.3.cmml" xref="alg1.l9.m1.2.2.1.3">
              <csymbol cd="ambiguous" id="alg1.l9.m1.2.2.1.3.1.cmml" xref="alg1.l9.m1.2.2.1.3">
               subscript
              </csymbol>
              <ci id="alg1.l9.m1.2.2.1.3.2.cmml" xref="alg1.l9.m1.2.2.1.3.2">
               𝑃
              </ci>
              <ci id="alg1.l9.m1.2.2.1.3.3.cmml" xref="alg1.l9.m1.2.2.1.3.3">
               𝑈
              </ci>
             </apply>
             <list id="alg1.l9.m1.2.2.1.1.2.cmml" xref="alg1.l9.m1.2.2.1.1.1">
              <ci id="alg1.l9.m1.1.1.cmml" xref="alg1.l9.m1.1.1">
               𝑝
              </ci>
              <apply id="alg1.l9.m1.2.2.1.1.1.1.cmml" xref="alg1.l9.m1.2.2.1.1.1.1">
               <csymbol cd="ambiguous" id="alg1.l9.m1.2.2.1.1.1.1.1.cmml" xref="alg1.l9.m1.2.2.1.1.1.1">
                subscript
               </csymbol>
               <ci id="alg1.l9.m1.2.2.1.1.1.1.2.cmml" xref="alg1.l9.m1.2.2.1.1.1.1.2">
                𝑦
               </ci>
               <ci id="alg1.l9.m1.2.2.1.1.1.1.3.cmml" xref="alg1.l9.m1.2.2.1.1.1.1.3">
                𝑗
               </ci>
              </apply>
             </list>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l9.m1.2c">
           =P_{U}(p;y_{j})
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l9.4" style="font-size:90%;">
        </span>
        <span class="ltx_text" id="alg1.l9.1" style="font-size:90%;float:right;">
         <math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l9.1.m1.1">
          <semantics id="alg1.l9.1.m1.1a">
           <mo id="alg1.l9.1.m1.1.1" xref="alg1.l9.1.m1.1.1.cmml">
            ▷
           </mo>
           <annotation-xml encoding="MathML-Content" id="alg1.l9.1.m1.1b">
            <ci id="alg1.l9.1.m1.1.1.cmml" xref="alg1.l9.1.m1.1.1">
             ▷
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="alg1.l9.1.m1.1c">
            \triangleright
           </annotation>
          </semantics>
         </math>
         Simulate User Clarification
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l10">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l10.1.1.1" style="font-size:80%;">
          10:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l10.2" style="font-size:90%;">
         Add Clarification Answer to
        </span>
        <math alttext="Trajectory" class="ltx_Math" display="inline" id="alg1.l10.m1.1">
         <semantics id="alg1.l10.m1.1a">
          <mrow id="alg1.l10.m1.1.1" xref="alg1.l10.m1.1.1.cmml">
           <mi id="alg1.l10.m1.1.1.2" mathsize="90%" xref="alg1.l10.m1.1.1.2.cmml">
            T
           </mi>
           <mo id="alg1.l10.m1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.3" mathsize="90%" xref="alg1.l10.m1.1.1.3.cmml">
            r
           </mi>
           <mo id="alg1.l10.m1.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.4" mathsize="90%" xref="alg1.l10.m1.1.1.4.cmml">
            a
           </mi>
           <mo id="alg1.l10.m1.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.5" mathsize="90%" xref="alg1.l10.m1.1.1.5.cmml">
            j
           </mi>
           <mo id="alg1.l10.m1.1.1.1c" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.6" mathsize="90%" xref="alg1.l10.m1.1.1.6.cmml">
            e
           </mi>
           <mo id="alg1.l10.m1.1.1.1d" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.7" mathsize="90%" xref="alg1.l10.m1.1.1.7.cmml">
            c
           </mi>
           <mo id="alg1.l10.m1.1.1.1e" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.8" mathsize="90%" xref="alg1.l10.m1.1.1.8.cmml">
            t
           </mi>
           <mo id="alg1.l10.m1.1.1.1f" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.9" mathsize="90%" xref="alg1.l10.m1.1.1.9.cmml">
            o
           </mi>
           <mo id="alg1.l10.m1.1.1.1g" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.10" mathsize="90%" xref="alg1.l10.m1.1.1.10.cmml">
            r
           </mi>
           <mo id="alg1.l10.m1.1.1.1h" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l10.m1.1.1.11" mathsize="90%" xref="alg1.l10.m1.1.1.11.cmml">
            y
           </mi>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l10.m1.1b">
           <apply id="alg1.l10.m1.1.1.cmml" xref="alg1.l10.m1.1.1">
            <times id="alg1.l10.m1.1.1.1.cmml" xref="alg1.l10.m1.1.1.1">
            </times>
            <ci id="alg1.l10.m1.1.1.2.cmml" xref="alg1.l10.m1.1.1.2">
             𝑇
            </ci>
            <ci id="alg1.l10.m1.1.1.3.cmml" xref="alg1.l10.m1.1.1.3">
             𝑟
            </ci>
            <ci id="alg1.l10.m1.1.1.4.cmml" xref="alg1.l10.m1.1.1.4">
             𝑎
            </ci>
            <ci id="alg1.l10.m1.1.1.5.cmml" xref="alg1.l10.m1.1.1.5">
             𝑗
            </ci>
            <ci id="alg1.l10.m1.1.1.6.cmml" xref="alg1.l10.m1.1.1.6">
             𝑒
            </ci>
            <ci id="alg1.l10.m1.1.1.7.cmml" xref="alg1.l10.m1.1.1.7">
             𝑐
            </ci>
            <ci id="alg1.l10.m1.1.1.8.cmml" xref="alg1.l10.m1.1.1.8">
             𝑡
            </ci>
            <ci id="alg1.l10.m1.1.1.9.cmml" xref="alg1.l10.m1.1.1.9">
             𝑜
            </ci>
            <ci id="alg1.l10.m1.1.1.10.cmml" xref="alg1.l10.m1.1.1.10">
             𝑟
            </ci>
            <ci id="alg1.l10.m1.1.1.11.cmml" xref="alg1.l10.m1.1.1.11">
             𝑦
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l10.m1.1c">
           Trajectory
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l10.3" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l11">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l11.2.1.1" style="font-size:80%;">
          11:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l11.3" style="font-size:90%;">
        </span>
        <math alttext="y_{j+1}^{\prime}=P_{\pi_{\theta}}(P;y_{j})" class="ltx_Math" display="inline" id="alg1.l11.m1.2">
         <semantics id="alg1.l11.m1.2a">
          <mrow id="alg1.l11.m1.2.2" xref="alg1.l11.m1.2.2.cmml">
           <msubsup id="alg1.l11.m1.2.2.3" xref="alg1.l11.m1.2.2.3.cmml">
            <mi id="alg1.l11.m1.2.2.3.2.2" mathsize="90%" xref="alg1.l11.m1.2.2.3.2.2.cmml">
             y
            </mi>
            <mrow id="alg1.l11.m1.2.2.3.2.3" xref="alg1.l11.m1.2.2.3.2.3.cmml">
             <mi id="alg1.l11.m1.2.2.3.2.3.2" mathsize="90%" xref="alg1.l11.m1.2.2.3.2.3.2.cmml">
              j
             </mi>
             <mo id="alg1.l11.m1.2.2.3.2.3.1" mathsize="90%" xref="alg1.l11.m1.2.2.3.2.3.1.cmml">
              +
             </mo>
             <mn id="alg1.l11.m1.2.2.3.2.3.3" mathsize="90%" xref="alg1.l11.m1.2.2.3.2.3.3.cmml">
              1
             </mn>
            </mrow>
            <mo id="alg1.l11.m1.2.2.3.3" mathsize="90%" xref="alg1.l11.m1.2.2.3.3.cmml">
             ′
            </mo>
           </msubsup>
           <mo id="alg1.l11.m1.2.2.2" mathsize="90%" xref="alg1.l11.m1.2.2.2.cmml">
            =
           </mo>
           <mrow id="alg1.l11.m1.2.2.1" xref="alg1.l11.m1.2.2.1.cmml">
            <msub id="alg1.l11.m1.2.2.1.3" xref="alg1.l11.m1.2.2.1.3.cmml">
             <mi id="alg1.l11.m1.2.2.1.3.2" mathsize="90%" xref="alg1.l11.m1.2.2.1.3.2.cmml">
              P
             </mi>
             <msub id="alg1.l11.m1.2.2.1.3.3" xref="alg1.l11.m1.2.2.1.3.3.cmml">
              <mi id="alg1.l11.m1.2.2.1.3.3.2" mathsize="90%" xref="alg1.l11.m1.2.2.1.3.3.2.cmml">
               π
              </mi>
              <mi id="alg1.l11.m1.2.2.1.3.3.3" mathsize="90%" xref="alg1.l11.m1.2.2.1.3.3.3.cmml">
               θ
              </mi>
             </msub>
            </msub>
            <mo id="alg1.l11.m1.2.2.1.2" lspace="0em" rspace="0em" xref="alg1.l11.m1.2.2.1.2.cmml">
             ​
            </mo>
            <mrow id="alg1.l11.m1.2.2.1.1.1" xref="alg1.l11.m1.2.2.1.1.2.cmml">
             <mo id="alg1.l11.m1.2.2.1.1.1.2" maxsize="90%" minsize="90%" xref="alg1.l11.m1.2.2.1.1.2.cmml">
              (
             </mo>
             <mi id="alg1.l11.m1.1.1" mathsize="90%" xref="alg1.l11.m1.1.1.cmml">
              P
             </mi>
             <mo id="alg1.l11.m1.2.2.1.1.1.3" mathsize="90%" xref="alg1.l11.m1.2.2.1.1.2.cmml">
              ;
             </mo>
             <msub id="alg1.l11.m1.2.2.1.1.1.1" xref="alg1.l11.m1.2.2.1.1.1.1.cmml">
              <mi id="alg1.l11.m1.2.2.1.1.1.1.2" mathsize="90%" xref="alg1.l11.m1.2.2.1.1.1.1.2.cmml">
               y
              </mi>
              <mi id="alg1.l11.m1.2.2.1.1.1.1.3" mathsize="90%" xref="alg1.l11.m1.2.2.1.1.1.1.3.cmml">
               j
              </mi>
             </msub>
             <mo id="alg1.l11.m1.2.2.1.1.1.4" maxsize="90%" minsize="90%" xref="alg1.l11.m1.2.2.1.1.2.cmml">
              )
             </mo>
            </mrow>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l11.m1.2b">
           <apply id="alg1.l11.m1.2.2.cmml" xref="alg1.l11.m1.2.2">
            <eq id="alg1.l11.m1.2.2.2.cmml" xref="alg1.l11.m1.2.2.2">
            </eq>
            <apply id="alg1.l11.m1.2.2.3.cmml" xref="alg1.l11.m1.2.2.3">
             <csymbol cd="ambiguous" id="alg1.l11.m1.2.2.3.1.cmml" xref="alg1.l11.m1.2.2.3">
              superscript
             </csymbol>
             <apply id="alg1.l11.m1.2.2.3.2.cmml" xref="alg1.l11.m1.2.2.3">
              <csymbol cd="ambiguous" id="alg1.l11.m1.2.2.3.2.1.cmml" xref="alg1.l11.m1.2.2.3">
               subscript
              </csymbol>
              <ci id="alg1.l11.m1.2.2.3.2.2.cmml" xref="alg1.l11.m1.2.2.3.2.2">
               𝑦
              </ci>
              <apply id="alg1.l11.m1.2.2.3.2.3.cmml" xref="alg1.l11.m1.2.2.3.2.3">
               <plus id="alg1.l11.m1.2.2.3.2.3.1.cmml" xref="alg1.l11.m1.2.2.3.2.3.1">
               </plus>
               <ci id="alg1.l11.m1.2.2.3.2.3.2.cmml" xref="alg1.l11.m1.2.2.3.2.3.2">
                𝑗
               </ci>
               <cn id="alg1.l11.m1.2.2.3.2.3.3.cmml" type="integer" xref="alg1.l11.m1.2.2.3.2.3.3">
                1
               </cn>
              </apply>
             </apply>
             <ci id="alg1.l11.m1.2.2.3.3.cmml" xref="alg1.l11.m1.2.2.3.3">
              ′
             </ci>
            </apply>
            <apply id="alg1.l11.m1.2.2.1.cmml" xref="alg1.l11.m1.2.2.1">
             <times id="alg1.l11.m1.2.2.1.2.cmml" xref="alg1.l11.m1.2.2.1.2">
             </times>
             <apply id="alg1.l11.m1.2.2.1.3.cmml" xref="alg1.l11.m1.2.2.1.3">
              <csymbol cd="ambiguous" id="alg1.l11.m1.2.2.1.3.1.cmml" xref="alg1.l11.m1.2.2.1.3">
               subscript
              </csymbol>
              <ci id="alg1.l11.m1.2.2.1.3.2.cmml" xref="alg1.l11.m1.2.2.1.3.2">
               𝑃
              </ci>
              <apply id="alg1.l11.m1.2.2.1.3.3.cmml" xref="alg1.l11.m1.2.2.1.3.3">
               <csymbol cd="ambiguous" id="alg1.l11.m1.2.2.1.3.3.1.cmml" xref="alg1.l11.m1.2.2.1.3.3">
                subscript
               </csymbol>
               <ci id="alg1.l11.m1.2.2.1.3.3.2.cmml" xref="alg1.l11.m1.2.2.1.3.3.2">
                𝜋
               </ci>
               <ci id="alg1.l11.m1.2.2.1.3.3.3.cmml" xref="alg1.l11.m1.2.2.1.3.3.3">
                𝜃
               </ci>
              </apply>
             </apply>
             <list id="alg1.l11.m1.2.2.1.1.2.cmml" xref="alg1.l11.m1.2.2.1.1.1">
              <ci id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1">
               𝑃
              </ci>
              <apply id="alg1.l11.m1.2.2.1.1.1.1.cmml" xref="alg1.l11.m1.2.2.1.1.1.1">
               <csymbol cd="ambiguous" id="alg1.l11.m1.2.2.1.1.1.1.1.cmml" xref="alg1.l11.m1.2.2.1.1.1.1">
                subscript
               </csymbol>
               <ci id="alg1.l11.m1.2.2.1.1.1.1.2.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.2">
                𝑦
               </ci>
               <ci id="alg1.l11.m1.2.2.1.1.1.1.3.cmml" xref="alg1.l11.m1.2.2.1.1.1.1.3">
                𝑗
               </ci>
              </apply>
             </list>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l11.m1.2c">
           y_{j+1}^{\prime}=P_{\pi_{\theta}}(P;y_{j})
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l11.4" style="font-size:90%;">
        </span>
        <span class="ltx_text" id="alg1.l11.1" style="font-size:90%;float:right;">
         <math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l11.1.m1.1">
          <semantics id="alg1.l11.1.m1.1a">
           <mo id="alg1.l11.1.m1.1.1" xref="alg1.l11.1.m1.1.1.cmml">
            ▷
           </mo>
           <annotation-xml encoding="MathML-Content" id="alg1.l11.1.m1.1b">
            <ci id="alg1.l11.1.m1.1.1.cmml" xref="alg1.l11.1.m1.1.1">
             ▷
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="alg1.l11.1.m1.1c">
            \triangleright
           </annotation>
          </semantics>
         </math>
         Simulate next policy response
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l12">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l12.1.1.1" style="font-size:80%;">
          12:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l12.2" style="font-size:90%;">
         Add
        </span>
        <math alttext="y_{j+1}^{\prime}" class="ltx_Math" display="inline" id="alg1.l12.m1.1">
         <semantics id="alg1.l12.m1.1a">
          <msubsup id="alg1.l12.m1.1.1" xref="alg1.l12.m1.1.1.cmml">
           <mi id="alg1.l12.m1.1.1.2.2" mathsize="90%" xref="alg1.l12.m1.1.1.2.2.cmml">
            y
           </mi>
           <mrow id="alg1.l12.m1.1.1.2.3" xref="alg1.l12.m1.1.1.2.3.cmml">
            <mi id="alg1.l12.m1.1.1.2.3.2" mathsize="90%" xref="alg1.l12.m1.1.1.2.3.2.cmml">
             j
            </mi>
            <mo id="alg1.l12.m1.1.1.2.3.1" mathsize="90%" xref="alg1.l12.m1.1.1.2.3.1.cmml">
             +
            </mo>
            <mn id="alg1.l12.m1.1.1.2.3.3" mathsize="90%" xref="alg1.l12.m1.1.1.2.3.3.cmml">
             1
            </mn>
           </mrow>
           <mo id="alg1.l12.m1.1.1.3" mathsize="90%" xref="alg1.l12.m1.1.1.3.cmml">
            ′
           </mo>
          </msubsup>
          <annotation-xml encoding="MathML-Content" id="alg1.l12.m1.1b">
           <apply id="alg1.l12.m1.1.1.cmml" xref="alg1.l12.m1.1.1">
            <csymbol cd="ambiguous" id="alg1.l12.m1.1.1.1.cmml" xref="alg1.l12.m1.1.1">
             superscript
            </csymbol>
            <apply id="alg1.l12.m1.1.1.2.cmml" xref="alg1.l12.m1.1.1">
             <csymbol cd="ambiguous" id="alg1.l12.m1.1.1.2.1.cmml" xref="alg1.l12.m1.1.1">
              subscript
             </csymbol>
             <ci id="alg1.l12.m1.1.1.2.2.cmml" xref="alg1.l12.m1.1.1.2.2">
              𝑦
             </ci>
             <apply id="alg1.l12.m1.1.1.2.3.cmml" xref="alg1.l12.m1.1.1.2.3">
              <plus id="alg1.l12.m1.1.1.2.3.1.cmml" xref="alg1.l12.m1.1.1.2.3.1">
              </plus>
              <ci id="alg1.l12.m1.1.1.2.3.2.cmml" xref="alg1.l12.m1.1.1.2.3.2">
               𝑗
              </ci>
              <cn id="alg1.l12.m1.1.1.2.3.3.cmml" type="integer" xref="alg1.l12.m1.1.1.2.3.3">
               1
              </cn>
             </apply>
            </apply>
            <ci id="alg1.l12.m1.1.1.3.cmml" xref="alg1.l12.m1.1.1.3">
             ′
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l12.m1.1c">
           y_{j+1}^{\prime}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l12.3" style="font-size:90%;">
         to
        </span>
        <math alttext="Trajectory" class="ltx_Math" display="inline" id="alg1.l12.m2.1">
         <semantics id="alg1.l12.m2.1a">
          <mrow id="alg1.l12.m2.1.1" xref="alg1.l12.m2.1.1.cmml">
           <mi id="alg1.l12.m2.1.1.2" mathsize="90%" xref="alg1.l12.m2.1.1.2.cmml">
            T
           </mi>
           <mo id="alg1.l12.m2.1.1.1" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.3" mathsize="90%" xref="alg1.l12.m2.1.1.3.cmml">
            r
           </mi>
           <mo id="alg1.l12.m2.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.4" mathsize="90%" xref="alg1.l12.m2.1.1.4.cmml">
            a
           </mi>
           <mo id="alg1.l12.m2.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.5" mathsize="90%" xref="alg1.l12.m2.1.1.5.cmml">
            j
           </mi>
           <mo id="alg1.l12.m2.1.1.1c" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.6" mathsize="90%" xref="alg1.l12.m2.1.1.6.cmml">
            e
           </mi>
           <mo id="alg1.l12.m2.1.1.1d" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.7" mathsize="90%" xref="alg1.l12.m2.1.1.7.cmml">
            c
           </mi>
           <mo id="alg1.l12.m2.1.1.1e" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.8" mathsize="90%" xref="alg1.l12.m2.1.1.8.cmml">
            t
           </mi>
           <mo id="alg1.l12.m2.1.1.1f" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.9" mathsize="90%" xref="alg1.l12.m2.1.1.9.cmml">
            o
           </mi>
           <mo id="alg1.l12.m2.1.1.1g" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.10" mathsize="90%" xref="alg1.l12.m2.1.1.10.cmml">
            r
           </mi>
           <mo id="alg1.l12.m2.1.1.1h" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.cmml">
            ​
           </mo>
           <mi id="alg1.l12.m2.1.1.11" mathsize="90%" xref="alg1.l12.m2.1.1.11.cmml">
            y
           </mi>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l12.m2.1b">
           <apply id="alg1.l12.m2.1.1.cmml" xref="alg1.l12.m2.1.1">
            <times id="alg1.l12.m2.1.1.1.cmml" xref="alg1.l12.m2.1.1.1">
            </times>
            <ci id="alg1.l12.m2.1.1.2.cmml" xref="alg1.l12.m2.1.1.2">
             𝑇
            </ci>
            <ci id="alg1.l12.m2.1.1.3.cmml" xref="alg1.l12.m2.1.1.3">
             𝑟
            </ci>
            <ci id="alg1.l12.m2.1.1.4.cmml" xref="alg1.l12.m2.1.1.4">
             𝑎
            </ci>
            <ci id="alg1.l12.m2.1.1.5.cmml" xref="alg1.l12.m2.1.1.5">
             𝑗
            </ci>
            <ci id="alg1.l12.m2.1.1.6.cmml" xref="alg1.l12.m2.1.1.6">
             𝑒
            </ci>
            <ci id="alg1.l12.m2.1.1.7.cmml" xref="alg1.l12.m2.1.1.7">
             𝑐
            </ci>
            <ci id="alg1.l12.m2.1.1.8.cmml" xref="alg1.l12.m2.1.1.8">
             𝑡
            </ci>
            <ci id="alg1.l12.m2.1.1.9.cmml" xref="alg1.l12.m2.1.1.9">
             𝑜
            </ci>
            <ci id="alg1.l12.m2.1.1.10.cmml" xref="alg1.l12.m2.1.1.10">
             𝑟
            </ci>
            <ci id="alg1.l12.m2.1.1.11.cmml" xref="alg1.l12.m2.1.1.11">
             𝑦
            </ci>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l12.m2.1c">
           Trajectory
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l12.4" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l13">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l13.1.1.1" style="font-size:80%;">
          13:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l13.2" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l13.3" style="font-size:90%;">
         if
        </span>
        <span class="ltx_text" id="alg1.l13.4" style="font-size:90%;">
        </span>
        <math alttext="H(Trajectory" class="ltx_math_unparsed" display="inline" id="alg1.l13.m1.1">
         <semantics id="alg1.l13.m1.1a">
          <mrow id="alg1.l13.m1.1b">
           <mi id="alg1.l13.m1.1.1" mathsize="90%">
            H
           </mi>
           <mrow id="alg1.l13.m1.1.2">
            <mo id="alg1.l13.m1.1.2.1" maxsize="90%" minsize="90%">
             (
            </mo>
            <mi id="alg1.l13.m1.1.2.2" mathsize="90%">
             T
            </mi>
            <mi id="alg1.l13.m1.1.2.3" mathsize="90%">
             r
            </mi>
            <mi id="alg1.l13.m1.1.2.4" mathsize="90%">
             a
            </mi>
            <mi id="alg1.l13.m1.1.2.5" mathsize="90%">
             j
            </mi>
            <mi id="alg1.l13.m1.1.2.6" mathsize="90%">
             e
            </mi>
            <mi id="alg1.l13.m1.1.2.7" mathsize="90%">
             c
            </mi>
            <mi id="alg1.l13.m1.1.2.8" mathsize="90%">
             t
            </mi>
            <mi id="alg1.l13.m1.1.2.9" mathsize="90%">
             o
            </mi>
            <mi id="alg1.l13.m1.1.2.10" mathsize="90%">
             r
            </mi>
            <mi id="alg1.l13.m1.1.2.11" mathsize="90%">
             y
            </mi>
           </mrow>
          </mrow>
          <annotation encoding="application/x-tex" id="alg1.l13.m1.1c">
           H(Trajectory
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l13.5" style="font-size:90%;">
         outcome, Ground Truth Outcome
        </span>
        <math alttext="g_{j})&gt;\epsilon" class="ltx_math_unparsed" display="inline" id="alg1.l13.m2.1">
         <semantics id="alg1.l13.m2.1a">
          <mrow id="alg1.l13.m2.1b">
           <msub id="alg1.l13.m2.1.1">
            <mi id="alg1.l13.m2.1.1.2" mathsize="90%">
             g
            </mi>
            <mi id="alg1.l13.m2.1.1.3" mathsize="90%">
             j
            </mi>
           </msub>
           <mo id="alg1.l13.m2.1.2" maxsize="90%" minsize="90%">
            )
           </mo>
           <mo id="alg1.l13.m2.1.3" mathsize="90%">
            &gt;
           </mo>
           <mi id="alg1.l13.m2.1.4" mathsize="90%">
            ϵ
           </mi>
          </mrow>
          <annotation encoding="application/x-tex" id="alg1.l13.m2.1c">
           g_{j})&gt;\epsilon
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l13.6" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l13.7" style="font-size:90%;">
         then
        </span>
        <span class="ltx_text" id="alg1.l13.8" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l14">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l14.2.1.1" style="font-size:80%;">
          14:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l14.3" style="font-size:90%;">
         Let
        </span>
        <math alttext="y_{wj}=Trajectory" class="ltx_Math" display="inline" id="alg1.l14.m1.1">
         <semantics id="alg1.l14.m1.1a">
          <mrow id="alg1.l14.m1.1.1" xref="alg1.l14.m1.1.1.cmml">
           <msub id="alg1.l14.m1.1.1.2" xref="alg1.l14.m1.1.1.2.cmml">
            <mi id="alg1.l14.m1.1.1.2.2" mathsize="90%" xref="alg1.l14.m1.1.1.2.2.cmml">
             y
            </mi>
            <mrow id="alg1.l14.m1.1.1.2.3" xref="alg1.l14.m1.1.1.2.3.cmml">
             <mi id="alg1.l14.m1.1.1.2.3.2" mathsize="90%" xref="alg1.l14.m1.1.1.2.3.2.cmml">
              w
             </mi>
             <mo id="alg1.l14.m1.1.1.2.3.1" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.2.3.1.cmml">
              ​
             </mo>
             <mi id="alg1.l14.m1.1.1.2.3.3" mathsize="90%" xref="alg1.l14.m1.1.1.2.3.3.cmml">
              j
             </mi>
            </mrow>
           </msub>
           <mo id="alg1.l14.m1.1.1.1" mathsize="90%" xref="alg1.l14.m1.1.1.1.cmml">
            =
           </mo>
           <mrow id="alg1.l14.m1.1.1.3" xref="alg1.l14.m1.1.1.3.cmml">
            <mi id="alg1.l14.m1.1.1.3.2" mathsize="90%" xref="alg1.l14.m1.1.1.3.2.cmml">
             T
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.3" mathsize="90%" xref="alg1.l14.m1.1.1.3.3.cmml">
             r
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1a" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.4" mathsize="90%" xref="alg1.l14.m1.1.1.3.4.cmml">
             a
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1b" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.5" mathsize="90%" xref="alg1.l14.m1.1.1.3.5.cmml">
             j
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1c" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.6" mathsize="90%" xref="alg1.l14.m1.1.1.3.6.cmml">
             e
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1d" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.7" mathsize="90%" xref="alg1.l14.m1.1.1.3.7.cmml">
             c
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1e" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.8" mathsize="90%" xref="alg1.l14.m1.1.1.3.8.cmml">
             t
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1f" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.9" mathsize="90%" xref="alg1.l14.m1.1.1.3.9.cmml">
             o
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1g" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.10" mathsize="90%" xref="alg1.l14.m1.1.1.3.10.cmml">
             r
            </mi>
            <mo id="alg1.l14.m1.1.1.3.1h" lspace="0em" rspace="0em" xref="alg1.l14.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l14.m1.1.1.3.11" mathsize="90%" xref="alg1.l14.m1.1.1.3.11.cmml">
             y
            </mi>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l14.m1.1b">
           <apply id="alg1.l14.m1.1.1.cmml" xref="alg1.l14.m1.1.1">
            <eq id="alg1.l14.m1.1.1.1.cmml" xref="alg1.l14.m1.1.1.1">
            </eq>
            <apply id="alg1.l14.m1.1.1.2.cmml" xref="alg1.l14.m1.1.1.2">
             <csymbol cd="ambiguous" id="alg1.l14.m1.1.1.2.1.cmml" xref="alg1.l14.m1.1.1.2">
              subscript
             </csymbol>
             <ci id="alg1.l14.m1.1.1.2.2.cmml" xref="alg1.l14.m1.1.1.2.2">
              𝑦
             </ci>
             <apply id="alg1.l14.m1.1.1.2.3.cmml" xref="alg1.l14.m1.1.1.2.3">
              <times id="alg1.l14.m1.1.1.2.3.1.cmml" xref="alg1.l14.m1.1.1.2.3.1">
              </times>
              <ci id="alg1.l14.m1.1.1.2.3.2.cmml" xref="alg1.l14.m1.1.1.2.3.2">
               𝑤
              </ci>
              <ci id="alg1.l14.m1.1.1.2.3.3.cmml" xref="alg1.l14.m1.1.1.2.3.3">
               𝑗
              </ci>
             </apply>
            </apply>
            <apply id="alg1.l14.m1.1.1.3.cmml" xref="alg1.l14.m1.1.1.3">
             <times id="alg1.l14.m1.1.1.3.1.cmml" xref="alg1.l14.m1.1.1.3.1">
             </times>
             <ci id="alg1.l14.m1.1.1.3.2.cmml" xref="alg1.l14.m1.1.1.3.2">
              𝑇
             </ci>
             <ci id="alg1.l14.m1.1.1.3.3.cmml" xref="alg1.l14.m1.1.1.3.3">
              𝑟
             </ci>
             <ci id="alg1.l14.m1.1.1.3.4.cmml" xref="alg1.l14.m1.1.1.3.4">
              𝑎
             </ci>
             <ci id="alg1.l14.m1.1.1.3.5.cmml" xref="alg1.l14.m1.1.1.3.5">
              𝑗
             </ci>
             <ci id="alg1.l14.m1.1.1.3.6.cmml" xref="alg1.l14.m1.1.1.3.6">
              𝑒
             </ci>
             <ci id="alg1.l14.m1.1.1.3.7.cmml" xref="alg1.l14.m1.1.1.3.7">
              𝑐
             </ci>
             <ci id="alg1.l14.m1.1.1.3.8.cmml" xref="alg1.l14.m1.1.1.3.8">
              𝑡
             </ci>
             <ci id="alg1.l14.m1.1.1.3.9.cmml" xref="alg1.l14.m1.1.1.3.9">
              𝑜
             </ci>
             <ci id="alg1.l14.m1.1.1.3.10.cmml" xref="alg1.l14.m1.1.1.3.10">
              𝑟
             </ci>
             <ci id="alg1.l14.m1.1.1.3.11.cmml" xref="alg1.l14.m1.1.1.3.11">
              𝑦
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l14.m1.1c">
           y_{wj}=Trajectory
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l14.4" style="font-size:90%;">
        </span>
        <span class="ltx_text" id="alg1.l14.1" style="font-size:90%;float:right;">
         <math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l14.1.m1.1">
          <semantics id="alg1.l14.1.m1.1a">
           <mo id="alg1.l14.1.m1.1.1" xref="alg1.l14.1.m1.1.1.cmml">
            ▷
           </mo>
           <annotation-xml encoding="MathML-Content" id="alg1.l14.1.m1.1b">
            <ci id="alg1.l14.1.m1.1.1.cmml" xref="alg1.l14.1.m1.1.1">
             ▷
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="alg1.l14.1.m1.1c">
            \triangleright
           </annotation>
          </semantics>
         </math>
         Reward acceptable trajectory outcome
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l15">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l15.1.1.1" style="font-size:80%;">
          15:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l15.2" style="font-size:90%;">
        </span>
        <span class="ltx_text ltx_font_bold" id="alg1.l15.3" style="font-size:90%;">
         else
        </span>
        <span class="ltx_text" id="alg1.l15.4" style="font-size:90%;">
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l16">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l16.2.1.1" style="font-size:80%;">
          16:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l16.3" style="font-size:90%;">
         Let
        </span>
        <math alttext="y_{lj}=Trajectory" class="ltx_Math" display="inline" id="alg1.l16.m1.1">
         <semantics id="alg1.l16.m1.1a">
          <mrow id="alg1.l16.m1.1.1" xref="alg1.l16.m1.1.1.cmml">
           <msub id="alg1.l16.m1.1.1.2" xref="alg1.l16.m1.1.1.2.cmml">
            <mi id="alg1.l16.m1.1.1.2.2" mathsize="90%" xref="alg1.l16.m1.1.1.2.2.cmml">
             y
            </mi>
            <mrow id="alg1.l16.m1.1.1.2.3" xref="alg1.l16.m1.1.1.2.3.cmml">
             <mi id="alg1.l16.m1.1.1.2.3.2" mathsize="90%" xref="alg1.l16.m1.1.1.2.3.2.cmml">
              l
             </mi>
             <mo id="alg1.l16.m1.1.1.2.3.1" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.2.3.1.cmml">
              ​
             </mo>
             <mi id="alg1.l16.m1.1.1.2.3.3" mathsize="90%" xref="alg1.l16.m1.1.1.2.3.3.cmml">
              j
             </mi>
            </mrow>
           </msub>
           <mo id="alg1.l16.m1.1.1.1" mathsize="90%" xref="alg1.l16.m1.1.1.1.cmml">
            =
           </mo>
           <mrow id="alg1.l16.m1.1.1.3" xref="alg1.l16.m1.1.1.3.cmml">
            <mi id="alg1.l16.m1.1.1.3.2" mathsize="90%" xref="alg1.l16.m1.1.1.3.2.cmml">
             T
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.3" mathsize="90%" xref="alg1.l16.m1.1.1.3.3.cmml">
             r
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1a" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.4" mathsize="90%" xref="alg1.l16.m1.1.1.3.4.cmml">
             a
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1b" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.5" mathsize="90%" xref="alg1.l16.m1.1.1.3.5.cmml">
             j
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1c" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.6" mathsize="90%" xref="alg1.l16.m1.1.1.3.6.cmml">
             e
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1d" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.7" mathsize="90%" xref="alg1.l16.m1.1.1.3.7.cmml">
             c
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1e" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.8" mathsize="90%" xref="alg1.l16.m1.1.1.3.8.cmml">
             t
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1f" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.9" mathsize="90%" xref="alg1.l16.m1.1.1.3.9.cmml">
             o
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1g" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.10" mathsize="90%" xref="alg1.l16.m1.1.1.3.10.cmml">
             r
            </mi>
            <mo id="alg1.l16.m1.1.1.3.1h" lspace="0em" rspace="0em" xref="alg1.l16.m1.1.1.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l16.m1.1.1.3.11" mathsize="90%" xref="alg1.l16.m1.1.1.3.11.cmml">
             y
            </mi>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l16.m1.1b">
           <apply id="alg1.l16.m1.1.1.cmml" xref="alg1.l16.m1.1.1">
            <eq id="alg1.l16.m1.1.1.1.cmml" xref="alg1.l16.m1.1.1.1">
            </eq>
            <apply id="alg1.l16.m1.1.1.2.cmml" xref="alg1.l16.m1.1.1.2">
             <csymbol cd="ambiguous" id="alg1.l16.m1.1.1.2.1.cmml" xref="alg1.l16.m1.1.1.2">
              subscript
             </csymbol>
             <ci id="alg1.l16.m1.1.1.2.2.cmml" xref="alg1.l16.m1.1.1.2.2">
              𝑦
             </ci>
             <apply id="alg1.l16.m1.1.1.2.3.cmml" xref="alg1.l16.m1.1.1.2.3">
              <times id="alg1.l16.m1.1.1.2.3.1.cmml" xref="alg1.l16.m1.1.1.2.3.1">
              </times>
              <ci id="alg1.l16.m1.1.1.2.3.2.cmml" xref="alg1.l16.m1.1.1.2.3.2">
               𝑙
              </ci>
              <ci id="alg1.l16.m1.1.1.2.3.3.cmml" xref="alg1.l16.m1.1.1.2.3.3">
               𝑗
              </ci>
             </apply>
            </apply>
            <apply id="alg1.l16.m1.1.1.3.cmml" xref="alg1.l16.m1.1.1.3">
             <times id="alg1.l16.m1.1.1.3.1.cmml" xref="alg1.l16.m1.1.1.3.1">
             </times>
             <ci id="alg1.l16.m1.1.1.3.2.cmml" xref="alg1.l16.m1.1.1.3.2">
              𝑇
             </ci>
             <ci id="alg1.l16.m1.1.1.3.3.cmml" xref="alg1.l16.m1.1.1.3.3">
              𝑟
             </ci>
             <ci id="alg1.l16.m1.1.1.3.4.cmml" xref="alg1.l16.m1.1.1.3.4">
              𝑎
             </ci>
             <ci id="alg1.l16.m1.1.1.3.5.cmml" xref="alg1.l16.m1.1.1.3.5">
              𝑗
             </ci>
             <ci id="alg1.l16.m1.1.1.3.6.cmml" xref="alg1.l16.m1.1.1.3.6">
              𝑒
             </ci>
             <ci id="alg1.l16.m1.1.1.3.7.cmml" xref="alg1.l16.m1.1.1.3.7">
              𝑐
             </ci>
             <ci id="alg1.l16.m1.1.1.3.8.cmml" xref="alg1.l16.m1.1.1.3.8">
              𝑡
             </ci>
             <ci id="alg1.l16.m1.1.1.3.9.cmml" xref="alg1.l16.m1.1.1.3.9">
              𝑜
             </ci>
             <ci id="alg1.l16.m1.1.1.3.10.cmml" xref="alg1.l16.m1.1.1.3.10">
              𝑟
             </ci>
             <ci id="alg1.l16.m1.1.1.3.11.cmml" xref="alg1.l16.m1.1.1.3.11">
              𝑦
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l16.m1.1c">
           y_{lj}=Trajectory
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l16.4" style="font-size:90%;">
        </span>
        <span class="ltx_text" id="alg1.l16.1" style="font-size:90%;float:right;">
         <math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l16.1.m1.1">
          <semantics id="alg1.l16.1.m1.1a">
           <mo id="alg1.l16.1.m1.1.1" xref="alg1.l16.1.m1.1.1.cmml">
            ▷
           </mo>
           <annotation-xml encoding="MathML-Content" id="alg1.l16.1.m1.1b">
            <ci id="alg1.l16.1.m1.1.1.cmml" xref="alg1.l16.1.m1.1.1">
             ▷
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="alg1.l16.1.m1.1c">
            \triangleright
           </annotation>
          </semantics>
         </math>
         Penalize bad trajectory outcome
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l17">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l17.1.1.1" style="font-size:80%;">
          17:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l17.2" style="font-size:90%;">
        </span>
        <math alttext="\theta\leftarrow Update(\theta)" class="ltx_Math" display="inline" id="alg1.l17.m1.1">
         <semantics id="alg1.l17.m1.1a">
          <mrow id="alg1.l17.m1.1.2" xref="alg1.l17.m1.1.2.cmml">
           <mi id="alg1.l17.m1.1.2.2" mathsize="90%" xref="alg1.l17.m1.1.2.2.cmml">
            θ
           </mi>
           <mo id="alg1.l17.m1.1.2.1" mathsize="90%" stretchy="false" xref="alg1.l17.m1.1.2.1.cmml">
            ←
           </mo>
           <mrow id="alg1.l17.m1.1.2.3" xref="alg1.l17.m1.1.2.3.cmml">
            <mi id="alg1.l17.m1.1.2.3.2" mathsize="90%" xref="alg1.l17.m1.1.2.3.2.cmml">
             U
            </mi>
            <mo id="alg1.l17.m1.1.2.3.1" lspace="0em" rspace="0em" xref="alg1.l17.m1.1.2.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l17.m1.1.2.3.3" mathsize="90%" xref="alg1.l17.m1.1.2.3.3.cmml">
             p
            </mi>
            <mo id="alg1.l17.m1.1.2.3.1a" lspace="0em" rspace="0em" xref="alg1.l17.m1.1.2.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l17.m1.1.2.3.4" mathsize="90%" xref="alg1.l17.m1.1.2.3.4.cmml">
             d
            </mi>
            <mo id="alg1.l17.m1.1.2.3.1b" lspace="0em" rspace="0em" xref="alg1.l17.m1.1.2.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l17.m1.1.2.3.5" mathsize="90%" xref="alg1.l17.m1.1.2.3.5.cmml">
             a
            </mi>
            <mo id="alg1.l17.m1.1.2.3.1c" lspace="0em" rspace="0em" xref="alg1.l17.m1.1.2.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l17.m1.1.2.3.6" mathsize="90%" xref="alg1.l17.m1.1.2.3.6.cmml">
             t
            </mi>
            <mo id="alg1.l17.m1.1.2.3.1d" lspace="0em" rspace="0em" xref="alg1.l17.m1.1.2.3.1.cmml">
             ​
            </mo>
            <mi id="alg1.l17.m1.1.2.3.7" mathsize="90%" xref="alg1.l17.m1.1.2.3.7.cmml">
             e
            </mi>
            <mo id="alg1.l17.m1.1.2.3.1e" lspace="0em" rspace="0em" xref="alg1.l17.m1.1.2.3.1.cmml">
             ​
            </mo>
            <mrow id="alg1.l17.m1.1.2.3.8.2" xref="alg1.l17.m1.1.2.3.cmml">
             <mo id="alg1.l17.m1.1.2.3.8.2.1" maxsize="90%" minsize="90%" xref="alg1.l17.m1.1.2.3.cmml">
              (
             </mo>
             <mi id="alg1.l17.m1.1.1" mathsize="90%" xref="alg1.l17.m1.1.1.cmml">
              θ
             </mi>
             <mo id="alg1.l17.m1.1.2.3.8.2.2" maxsize="90%" minsize="90%" xref="alg1.l17.m1.1.2.3.cmml">
              )
             </mo>
            </mrow>
           </mrow>
          </mrow>
          <annotation-xml encoding="MathML-Content" id="alg1.l17.m1.1b">
           <apply id="alg1.l17.m1.1.2.cmml" xref="alg1.l17.m1.1.2">
            <ci id="alg1.l17.m1.1.2.1.cmml" xref="alg1.l17.m1.1.2.1">
             ←
            </ci>
            <ci id="alg1.l17.m1.1.2.2.cmml" xref="alg1.l17.m1.1.2.2">
             𝜃
            </ci>
            <apply id="alg1.l17.m1.1.2.3.cmml" xref="alg1.l17.m1.1.2.3">
             <times id="alg1.l17.m1.1.2.3.1.cmml" xref="alg1.l17.m1.1.2.3.1">
             </times>
             <ci id="alg1.l17.m1.1.2.3.2.cmml" xref="alg1.l17.m1.1.2.3.2">
              𝑈
             </ci>
             <ci id="alg1.l17.m1.1.2.3.3.cmml" xref="alg1.l17.m1.1.2.3.3">
              𝑝
             </ci>
             <ci id="alg1.l17.m1.1.2.3.4.cmml" xref="alg1.l17.m1.1.2.3.4">
              𝑑
             </ci>
             <ci id="alg1.l17.m1.1.2.3.5.cmml" xref="alg1.l17.m1.1.2.3.5">
              𝑎
             </ci>
             <ci id="alg1.l17.m1.1.2.3.6.cmml" xref="alg1.l17.m1.1.2.3.6">
              𝑡
             </ci>
             <ci id="alg1.l17.m1.1.2.3.7.cmml" xref="alg1.l17.m1.1.2.3.7">
              𝑒
             </ci>
             <ci id="alg1.l17.m1.1.1.cmml" xref="alg1.l17.m1.1.1">
              𝜃
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l17.m1.1c">
           \theta\leftarrow Update(\theta)
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l17.3" style="font-size:90%;">
         until convergence (eq
        </span>
        <a class="ltx_ref" href="#S3.E2" style="font-size:90%;" title="In 3.2.3 Contrastive RL Tuning for Alignment ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
         <span class="ltx_text ltx_ref_tag">
          2
         </span>
        </a>
        <span class="ltx_text" id="alg1.l17.4" style="font-size:90%;">
         )
        </span>
       </div>
       <div class="ltx_listingline" id="alg1.l17a">
        <span class="ltx_tag ltx_tag_listingline">
         <span class="ltx_text" id="alg1.l17a.1.1.1" style="font-size:80%;">
          17:
         </span>
        </span>
        <span class="ltx_text" id="alg1.l17a.2" style="font-size:90%;">
        </span>
        <math alttext="\pi_{\theta_{B}}" class="ltx_Math" display="inline" id="alg1.l17a.m1.1">
         <semantics id="alg1.l17a.m1.1a">
          <msub id="alg1.l17a.m1.1.1" xref="alg1.l17a.m1.1.1.cmml">
           <mi id="alg1.l17a.m1.1.1.2" mathsize="90%" xref="alg1.l17a.m1.1.1.2.cmml">
            π
           </mi>
           <msub id="alg1.l17a.m1.1.1.3" xref="alg1.l17a.m1.1.1.3.cmml">
            <mi id="alg1.l17a.m1.1.1.3.2" mathsize="90%" xref="alg1.l17a.m1.1.1.3.2.cmml">
             θ
            </mi>
            <mi id="alg1.l17a.m1.1.1.3.3" mathsize="90%" xref="alg1.l17a.m1.1.1.3.3.cmml">
             B
            </mi>
           </msub>
          </msub>
          <annotation-xml encoding="MathML-Content" id="alg1.l17a.m1.1b">
           <apply id="alg1.l17a.m1.1.1.cmml" xref="alg1.l17a.m1.1.1">
            <csymbol cd="ambiguous" id="alg1.l17a.m1.1.1.1.cmml" xref="alg1.l17a.m1.1.1">
             subscript
            </csymbol>
            <ci id="alg1.l17a.m1.1.1.2.cmml" xref="alg1.l17a.m1.1.1.2">
             𝜋
            </ci>
            <apply id="alg1.l17a.m1.1.1.3.cmml" xref="alg1.l17a.m1.1.1.3">
             <csymbol cd="ambiguous" id="alg1.l17a.m1.1.1.3.1.cmml" xref="alg1.l17a.m1.1.1.3">
              subscript
             </csymbol>
             <ci id="alg1.l17a.m1.1.1.3.2.cmml" xref="alg1.l17a.m1.1.1.3.2">
              𝜃
             </ci>
             <ci id="alg1.l17a.m1.1.1.3.3.cmml" xref="alg1.l17a.m1.1.1.3.3">
              𝐵
             </ci>
            </apply>
           </apply>
          </annotation-xml>
          <annotation encoding="application/x-tex" id="alg1.l17a.m1.1c">
           \pi_{\theta_{B}}
          </annotation>
         </semantics>
        </math>
        <span class="ltx_text" id="alg1.l17a.3" style="font-size:90%;">
        </span>
       </div>
      </div>
      <figcaption class="ltx_caption" style="font-size:90%;">
       <span class="ltx_tag ltx_tag_float">
        <span class="ltx_text ltx_font_bold" id="alg2.6.1.1">
         Algorithm 2
        </span>
       </span>
       <span class="ltx_text ltx_font_italic" id="alg2.7.2">
        ACT
       </span>
       : Action-Based Contrastive Self-Training
      </figcaption>
     </figure>
    </figure>
   </section>
  </section>
 </section>
 <section class="ltx_section" id="S4">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    4
   </span>
   Experimental Setup
  </h2>
  <figure class="ltx_table" id="S4.T1">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table 1:
    </span>
    <span class="ltx_text ltx_font_bold" id="S4.T1.19.1">
     Experimental results on PACIFIC’s public validation set
    </span>
    .
    <span class="ltx_text ltx_font_italic" id="S4.T1.20.2">
     ACT
    </span>
    achieves the strongest performance compared to all tuning approaches across every condition in every metric.
    <span class="ltx_text ltx_font_italic" id="S4.T1.21.3">
     ACT
    </span>
    with zero-shot inference also matches or outperforms 10-shot Gemini in most conditions.
   </figcaption>
   <p class="ltx_p ltx_align_center" id="S4.T1.15">
    <span class="ltx_text ltx_inline-block" id="S4.T1.15.15" style="width:433.6pt;">
     <span class="ltx_inline-block ltx_transformed_outer" id="S4.T1.15.15.15.15" style="width:660.0pt;height:271pt;vertical-align:-1.0pt;">
      <span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
       <span class="ltx_p" id="S4.T1.15.15.15.15.15">
        <span class="ltx_text" id="S4.T1.15.15.15.15.15.15">
         <span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T1.15.15.15.15.15.15.15">
          <span class="ltx_thead">
           <span class="ltx_tr" id="S4.T1.15.15.15.15.15.15.15.16.1">
            <span class="ltx_td ltx_th ltx_th_row ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.16.1.1">
            </span>
            <span class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.16.1.2">
            </span>
            <span class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.16.1.3">
            </span>
            <span class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T1.15.15.15.15.15.15.15.16.1.4">
             <span class="ltx_text ltx_font_bold" id="S4.T1.15.15.15.15.15.15.15.16.1.4.1">
              Action-level
             </span>
            </span>
            <span class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T1.15.15.15.15.15.15.15.16.1.5">
             <span class="ltx_text ltx_font_bold" id="S4.T1.15.15.15.15.15.15.15.16.1.5.1">
              Content-level
             </span>
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.6.6.6.6.6.6.6.6">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T1.6.6.6.6.6.6.6.6.7">
             Base Model
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T1.6.6.6.6.6.6.6.6.8">
             Adaptation Setting
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="S4.T1.6.6.6.6.6.6.6.6.9">
             Examples
            </span>
            <span class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.1.1.1.1.1.1.1.1.1">
             Accuracy
             <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T1.1.1.1.1.1.1.1.1.1.m1.1">
              <semantics id="S4.T1.1.1.1.1.1.1.1.1.1.m1.1a">
               <mo id="S4.T1.1.1.1.1.1.1.1.1.1.m1.1.1" stretchy="false" xref="S4.T1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml">
                ↑
               </mo>
               <annotation-xml encoding="MathML-Content" id="S4.T1.1.1.1.1.1.1.1.1.1.m1.1b">
                <ci id="S4.T1.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S4.T1.1.1.1.1.1.1.1.1.1.m1.1.1">
                 ↑
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.1.1.1.1.1.1.1.1.1.m1.1c">
                \uparrow
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.2.2.2.2.2.2.2.2.2">
             Weighted F1
             <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T1.2.2.2.2.2.2.2.2.2.m1.1">
              <semantics id="S4.T1.2.2.2.2.2.2.2.2.2.m1.1a">
               <mo id="S4.T1.2.2.2.2.2.2.2.2.2.m1.1.1" stretchy="false" xref="S4.T1.2.2.2.2.2.2.2.2.2.m1.1.1.cmml">
                ↑
               </mo>
               <annotation-xml encoding="MathML-Content" id="S4.T1.2.2.2.2.2.2.2.2.2.m1.1b">
                <ci id="S4.T1.2.2.2.2.2.2.2.2.2.m1.1.1.cmml" xref="S4.T1.2.2.2.2.2.2.2.2.2.m1.1.1">
                 ↑
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.2.2.2.2.2.2.2.2.2.m1.1c">
                \uparrow
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.3.3.3.3.3.3.3.3.3">
             Macro F1
             <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T1.3.3.3.3.3.3.3.3.3.m1.1">
              <semantics id="S4.T1.3.3.3.3.3.3.3.3.3.m1.1a">
               <mo id="S4.T1.3.3.3.3.3.3.3.3.3.m1.1.1" stretchy="false" xref="S4.T1.3.3.3.3.3.3.3.3.3.m1.1.1.cmml">
                ↑
               </mo>
               <annotation-xml encoding="MathML-Content" id="S4.T1.3.3.3.3.3.3.3.3.3.m1.1b">
                <ci id="S4.T1.3.3.3.3.3.3.3.3.3.m1.1.1.cmml" xref="S4.T1.3.3.3.3.3.3.3.3.3.m1.1.1">
                 ↑
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.3.3.3.3.3.3.3.3.3.m1.1c">
                \uparrow
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.4.4.4.4.4.4.4.4.4">
             Turn F1
             <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T1.4.4.4.4.4.4.4.4.4.m1.1">
              <semantics id="S4.T1.4.4.4.4.4.4.4.4.4.m1.1a">
               <mo id="S4.T1.4.4.4.4.4.4.4.4.4.m1.1.1" stretchy="false" xref="S4.T1.4.4.4.4.4.4.4.4.4.m1.1.1.cmml">
                ↑
               </mo>
               <annotation-xml encoding="MathML-Content" id="S4.T1.4.4.4.4.4.4.4.4.4.m1.1b">
                <ci id="S4.T1.4.4.4.4.4.4.4.4.4.m1.1.1.cmml" xref="S4.T1.4.4.4.4.4.4.4.4.4.m1.1.1">
                 ↑
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.4.4.4.4.4.4.4.4.4.m1.1c">
                \uparrow
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.5.5.5.5.5.5.5.5.5">
             Traj. F1
             <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T1.5.5.5.5.5.5.5.5.5.m1.1">
              <semantics id="S4.T1.5.5.5.5.5.5.5.5.5.m1.1a">
               <mo id="S4.T1.5.5.5.5.5.5.5.5.5.m1.1.1" stretchy="false" xref="S4.T1.5.5.5.5.5.5.5.5.5.m1.1.1.cmml">
                ↑
               </mo>
               <annotation-xml encoding="MathML-Content" id="S4.T1.5.5.5.5.5.5.5.5.5.m1.1b">
                <ci id="S4.T1.5.5.5.5.5.5.5.5.5.m1.1.1.cmml" xref="S4.T1.5.5.5.5.5.5.5.5.5.m1.1.1">
                 ↑
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.5.5.5.5.5.5.5.5.5.m1.1c">
                \uparrow
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="S4.T1.6.6.6.6.6.6.6.6.6">
             Post-Clarify F1
             <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T1.6.6.6.6.6.6.6.6.6.m1.1">
              <semantics id="S4.T1.6.6.6.6.6.6.6.6.6.m1.1a">
               <mo id="S4.T1.6.6.6.6.6.6.6.6.6.m1.1.1" stretchy="false" xref="S4.T1.6.6.6.6.6.6.6.6.6.m1.1.1.cmml">
                ↑
               </mo>
               <annotation-xml encoding="MathML-Content" id="S4.T1.6.6.6.6.6.6.6.6.6.m1.1b">
                <ci id="S4.T1.6.6.6.6.6.6.6.6.6.m1.1.1.cmml" xref="S4.T1.6.6.6.6.6.6.6.6.6.m1.1.1">
                 ↑
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.6.6.6.6.6.6.6.6.6.m1.1c">
                \uparrow
               </annotation>
              </semantics>
             </math>
            </span>
           </span>
          </span>
          <span class="ltx_tbody">
           <span class="ltx_tr" id="S4.T1.15.15.15.15.15.15.15.17.1">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.1">
             Gemini Ultra
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.2">
             ICL - Standard
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.3">
             10
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.4">
             84.5
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.5">
             77.9
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.6">
             49.4
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.7">
             41.4
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.8">
             42.1
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T1.15.15.15.15.15.15.15.17.1.9">
             —
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.15.15.15.15.15.15.15.18.2">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.18.2.1">
             Gemini Pro 1.5
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.18.2.2">
             ICL - Standard
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.18.2.3">
             10
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.18.2.4">
             91.9
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.18.2.5">
             90.8
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.18.2.6">
             81.4
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.18.2.7">
             59.7
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.18.2.8">
             58.7
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.18.2.9">
             49.7
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.15.15.15.15.15.15.15.19.3">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.19.3.1">
             Gemini Pro 1.5
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.19.3.2">
             ICL - Chain-of-Thought
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.19.3.3">
             10
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.19.3.4">
             92.1
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.19.3.5">
             92.0
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.19.3.6">
             85.1
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.19.3.7">
             55.7
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.19.3.8">
             52.8
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.19.3.9">
             32.8
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.15.15.15.15.15.15.15.20.4">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.20.4.1">
             Gemini Pro 1.5
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.20.4.2">
             ICL - Proactive MIPrompt
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.15.15.15.15.15.15.15.20.4.3">
             10
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.20.4.4">
             91.8
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.20.4.5">
             92.0
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.20.4.6">
             85.7
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.20.4.7">
             65.6
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.20.4.8">
             61.4
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T1.15.15.15.15.15.15.15.20.4.9">
             29.5
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.7.7.7.7.7.7.7.7">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.7.7.7.7.7.7.7.7.1.m1.1">
              <semantics id="S4.T1.7.7.7.7.7.7.7.7.1.m1.1a">
               <mi id="S4.T1.7.7.7.7.7.7.7.7.1.m1.1.1" xref="S4.T1.7.7.7.7.7.7.7.7.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.7.7.7.7.7.7.7.7.1.m1.1b">
                <ci id="S4.T1.7.7.7.7.7.7.7.7.1.m1.1.1.cmml" xref="S4.T1.7.7.7.7.7.7.7.7.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.7.7.7.7.7.7.7.7.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.2">
             SFT
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.3">
             50
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.4">
             86.7
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.5">
             84.9
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.6">
             69.0
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.7">
             57.8
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.8">
             61.3
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T1.7.7.7.7.7.7.7.7.9">
             43.5
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.8.8.8.8.8.8.8.8">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.8.8.8.8.8.8.8.8.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.8.8.8.8.8.8.8.8.1.m1.1">
              <semantics id="S4.T1.8.8.8.8.8.8.8.8.1.m1.1a">
               <mi id="S4.T1.8.8.8.8.8.8.8.8.1.m1.1.1" xref="S4.T1.8.8.8.8.8.8.8.8.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.8.8.8.8.8.8.8.8.1.m1.1b">
                <ci id="S4.T1.8.8.8.8.8.8.8.8.1.m1.1.1.cmml" xref="S4.T1.8.8.8.8.8.8.8.8.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.8.8.8.8.8.8.8.8.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.8.8.8.8.8.8.8.8.2">
             Naive DPO
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.8.8.8.8.8.8.8.8.3">
             50
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.8.8.8.8.8.8.8.8.4">
             84.3
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.8.8.8.8.8.8.8.8.5">
             80.5
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.8.8.8.8.8.8.8.8.6">
             59.4
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.8.8.8.8.8.8.8.8.7">
             41.6
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.8.8.8.8.8.8.8.8.8">
             45.2
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T1.8.8.8.8.8.8.8.8.9">
             35.6
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.9.9.9.9.9.9.9.9">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.9.9.9.9.9.9.9.9.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.9.9.9.9.9.9.9.9.1.m1.1">
              <semantics id="S4.T1.9.9.9.9.9.9.9.9.1.m1.1a">
               <mi id="S4.T1.9.9.9.9.9.9.9.9.1.m1.1.1" xref="S4.T1.9.9.9.9.9.9.9.9.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.9.9.9.9.9.9.9.9.1.m1.1b">
                <ci id="S4.T1.9.9.9.9.9.9.9.9.1.m1.1.1.cmml" xref="S4.T1.9.9.9.9.9.9.9.9.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.9.9.9.9.9.9.9.9.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.9.9.9.9.9.9.9.9.2">
             <span class="ltx_text ltx_font_italic" id="S4.T1.9.9.9.9.9.9.9.9.2.1">
              ACT
             </span>
             (ours)
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.9.9.9.9.9.9.9.9.3">
             50
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.9.9.9.9.9.9.9.9.4">
             <span class="ltx_text ltx_font_bold" id="S4.T1.9.9.9.9.9.9.9.9.4.1">
              91.8
             </span>
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.9.9.9.9.9.9.9.9.5">
             <span class="ltx_text ltx_font_bold" id="S4.T1.9.9.9.9.9.9.9.9.5.1">
              91.1
             </span>
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.9.9.9.9.9.9.9.9.6">
             <span class="ltx_text ltx_font_bold" id="S4.T1.9.9.9.9.9.9.9.9.6.1">
              82.2
             </span>
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.9.9.9.9.9.9.9.9.7">
             <span class="ltx_text ltx_font_bold" id="S4.T1.9.9.9.9.9.9.9.9.7.1">
              62.8
             </span>
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.9.9.9.9.9.9.9.9.8">
             <span class="ltx_text ltx_font_bold" id="S4.T1.9.9.9.9.9.9.9.9.8.1">
              61.9
             </span>
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T1.9.9.9.9.9.9.9.9.9">
             <span class="ltx_text ltx_font_bold" id="S4.T1.9.9.9.9.9.9.9.9.9.1">
              57.2
             </span>
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.10.10.10.10.10.10.10.10">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.10.10.10.10.10.10.10.10.1.m1.1">
              <semantics id="S4.T1.10.10.10.10.10.10.10.10.1.m1.1a">
               <mi id="S4.T1.10.10.10.10.10.10.10.10.1.m1.1.1" xref="S4.T1.10.10.10.10.10.10.10.10.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.10.10.10.10.10.10.10.10.1.m1.1b">
                <ci id="S4.T1.10.10.10.10.10.10.10.10.1.m1.1.1.cmml" xref="S4.T1.10.10.10.10.10.10.10.10.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.10.10.10.10.10.10.10.10.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.2">
             SFT
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.3">
             100
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.4">
             90.6
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.5">
             90.5
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.6">
             82.3
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.7">
             58.6
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.8">
             60.3
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T1.10.10.10.10.10.10.10.10.9">
             49.9
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.11.11.11.11.11.11.11.11">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.11.11.11.11.11.11.11.11.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.11.11.11.11.11.11.11.11.1.m1.1">
              <semantics id="S4.T1.11.11.11.11.11.11.11.11.1.m1.1a">
               <mi id="S4.T1.11.11.11.11.11.11.11.11.1.m1.1.1" xref="S4.T1.11.11.11.11.11.11.11.11.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.11.11.11.11.11.11.11.11.1.m1.1b">
                <ci id="S4.T1.11.11.11.11.11.11.11.11.1.m1.1.1.cmml" xref="S4.T1.11.11.11.11.11.11.11.11.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.11.11.11.11.11.11.11.11.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.11.11.11.11.11.11.11.11.2">
             Naive DPO
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.11.11.11.11.11.11.11.11.3">
             100
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.11.11.11.11.11.11.11.11.4">
             85.6
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.11.11.11.11.11.11.11.11.5">
             82.0
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.11.11.11.11.11.11.11.11.6">
             61.3
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.11.11.11.11.11.11.11.11.7">
             35.4
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.11.11.11.11.11.11.11.11.8">
             31.5
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T1.11.11.11.11.11.11.11.11.9">
             39.7
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.12.12.12.12.12.12.12.12">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.12.12.12.12.12.12.12.12.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.12.12.12.12.12.12.12.12.1.m1.1">
              <semantics id="S4.T1.12.12.12.12.12.12.12.12.1.m1.1a">
               <mi id="S4.T1.12.12.12.12.12.12.12.12.1.m1.1.1" xref="S4.T1.12.12.12.12.12.12.12.12.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.12.12.12.12.12.12.12.12.1.m1.1b">
                <ci id="S4.T1.12.12.12.12.12.12.12.12.1.m1.1.1.cmml" xref="S4.T1.12.12.12.12.12.12.12.12.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.12.12.12.12.12.12.12.12.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.12.12.12.12.12.12.12.12.2">
             <span class="ltx_text ltx_font_italic" id="S4.T1.12.12.12.12.12.12.12.12.2.1">
              ACT
             </span>
             (ours)
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.12.12.12.12.12.12.12.12.3">
             100
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.12.12.12.12.12.12.12.12.4">
             <span class="ltx_text ltx_font_bold" id="S4.T1.12.12.12.12.12.12.12.12.4.1">
              92.2
             </span>
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.12.12.12.12.12.12.12.12.5">
             <span class="ltx_text ltx_font_bold" id="S4.T1.12.12.12.12.12.12.12.12.5.1">
              92.0
             </span>
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.12.12.12.12.12.12.12.12.6">
             <span class="ltx_text ltx_font_bold" id="S4.T1.12.12.12.12.12.12.12.12.6.1">
              86.0
             </span>
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.12.12.12.12.12.12.12.12.7">
             <span class="ltx_text ltx_font_bold" id="S4.T1.12.12.12.12.12.12.12.12.7.1">
              65.0
             </span>
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.12.12.12.12.12.12.12.12.8">
             <span class="ltx_text ltx_font_bold" id="S4.T1.12.12.12.12.12.12.12.12.8.1">
              62.0
             </span>
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T1.12.12.12.12.12.12.12.12.9">
             <span class="ltx_text ltx_font_bold" id="S4.T1.12.12.12.12.12.12.12.12.9.1">
              57.4
             </span>
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.13.13.13.13.13.13.13.13">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.13.13.13.13.13.13.13.13.1.m1.1">
              <semantics id="S4.T1.13.13.13.13.13.13.13.13.1.m1.1a">
               <mi id="S4.T1.13.13.13.13.13.13.13.13.1.m1.1.1" xref="S4.T1.13.13.13.13.13.13.13.13.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.13.13.13.13.13.13.13.13.1.m1.1b">
                <ci id="S4.T1.13.13.13.13.13.13.13.13.1.m1.1.1.cmml" xref="S4.T1.13.13.13.13.13.13.13.13.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.13.13.13.13.13.13.13.13.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.2">
             SFT
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.3">
             250
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.4">
             93.1
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.5">
             93.0
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.6">
             86.9
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.7">
             65.1
            </span>
            <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.8">
             63.3
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T1.13.13.13.13.13.13.13.13.9">
             56.7
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.14.14.14.14.14.14.14.14">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.14.14.14.14.14.14.14.14.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.14.14.14.14.14.14.14.14.1.m1.1">
              <semantics id="S4.T1.14.14.14.14.14.14.14.14.1.m1.1a">
               <mi id="S4.T1.14.14.14.14.14.14.14.14.1.m1.1.1" xref="S4.T1.14.14.14.14.14.14.14.14.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.14.14.14.14.14.14.14.14.1.m1.1b">
                <ci id="S4.T1.14.14.14.14.14.14.14.14.1.m1.1.1.cmml" xref="S4.T1.14.14.14.14.14.14.14.14.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.14.14.14.14.14.14.14.14.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.14.14.14.14.14.14.14.14.2">
             Naive DPO
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.14.14.14.14.14.14.14.14.3">
             250
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.14.14.14.14.14.14.14.14.4">
             93.5
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.14.14.14.14.14.14.14.14.5">
             93.4
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.14.14.14.14.14.14.14.14.6">
             87.7
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.14.14.14.14.14.14.14.14.7">
             64.5
            </span>
            <span class="ltx_td ltx_align_center" id="S4.T1.14.14.14.14.14.14.14.14.8">
             62.5
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T1.14.14.14.14.14.14.14.14.9">
             57.4
            </span>
           </span>
           <span class="ltx_tr" id="S4.T1.15.15.15.15.15.15.15.15">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.1">
             Zephyr 7B-
             <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T1.15.15.15.15.15.15.15.15.1.m1.1">
              <semantics id="S4.T1.15.15.15.15.15.15.15.15.1.m1.1a">
               <mi id="S4.T1.15.15.15.15.15.15.15.15.1.m1.1.1" xref="S4.T1.15.15.15.15.15.15.15.15.1.m1.1.1.cmml">
                β
               </mi>
               <annotation-xml encoding="MathML-Content" id="S4.T1.15.15.15.15.15.15.15.15.1.m1.1b">
                <ci id="S4.T1.15.15.15.15.15.15.15.15.1.m1.1.1.cmml" xref="S4.T1.15.15.15.15.15.15.15.15.1.m1.1.1">
                 𝛽
                </ci>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="S4.T1.15.15.15.15.15.15.15.15.1.m1.1c">
                \beta
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.2">
             <span class="ltx_text ltx_font_italic" id="S4.T1.15.15.15.15.15.15.15.15.2.1">
              ACT
             </span>
             (ours)
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.3">
             250
            </span>
            <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.4">
             <span class="ltx_text ltx_font_bold" id="S4.T1.15.15.15.15.15.15.15.15.4.1">
              94.8
             </span>
            </span>
            <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.5">
             <span class="ltx_text ltx_font_bold" id="S4.T1.15.15.15.15.15.15.15.15.5.1">
              94.6
             </span>
            </span>
            <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.6">
             <span class="ltx_text ltx_font_bold" id="S4.T1.15.15.15.15.15.15.15.15.6.1">
              89.6
             </span>
            </span>
            <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.7">
             <span class="ltx_text ltx_font_bold" id="S4.T1.15.15.15.15.15.15.15.15.7.1">
              68.1
             </span>
            </span>
            <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.8">
             <span class="ltx_text ltx_font_bold" id="S4.T1.15.15.15.15.15.15.15.15.8.1">
              65.7
             </span>
            </span>
            <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_bb" id="S4.T1.15.15.15.15.15.15.15.15.9">
             <span class="ltx_text ltx_font_bold" id="S4.T1.15.15.15.15.15.15.15.15.9.1">
              62.0
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </p>
  </figure>
  <div class="ltx_para" id="S4.p1">
   <p class="ltx_p" id="S4.p1.1">
    <span class="ltx_text ltx_font_italic" id="S4.p1.1.1">
     ACT
    </span>
    is a sample-efficient approach to adapt an LLM to a conversational action policy.
We are primarily concerned with learning improved timing for agent-side clarification question asking, and we thus evaluate
    <span class="ltx_text ltx_font_italic" id="S4.p1.1.2">
     ACT
    </span>
    as a tuning approach for three complex conversational information-seeking tasks. As a base model for our tuning experiments, we use Zephyr
    <math alttext="\beta" class="ltx_Math" display="inline" id="S4.p1.1.m1.1">
     <semantics id="S4.p1.1.m1.1a">
      <mi id="S4.p1.1.m1.1.1" xref="S4.p1.1.m1.1.1.cmml">
       β
      </mi>
      <annotation-xml encoding="MathML-Content" id="S4.p1.1.m1.1b">
       <ci id="S4.p1.1.m1.1.1.cmml" xref="S4.p1.1.m1.1.1">
        𝛽
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S4.p1.1.m1.1c">
       \beta
      </annotation>
     </semantics>
    </math>
    , a version of Mistral 7B
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib51" title="">
      51
     </a>
     ]
    </cite>
    which has been instruction tuned on UltraChat and aligned to human preferences on UltraFeedback
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib52" title="">
      52
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib53" title="">
      53
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib36" title="">
      36
     </a>
     ]
    </cite>
    .
   </p>
  </div>
  <section class="ltx_subsection" id="S4.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.1
    </span>
    Datasets
   </h3>
   <div class="ltx_para" id="S4.SS1.p1">
    <p class="ltx_p" id="S4.SS1.p1.1">
     We investigate three mixed-initiative conversation tasks in which a user interacts with an assistant to retrieve some information. In our setup of each task, a user asks a query which may or may not be underspecified. The assistant is tasked with providing a response which may either be a clarifying question or an attempt to directly answer the user’s query. For each task, we synthesize the initial rejected responses by prompting Gemini Ultra 1.0
     <span class="ltx_note ltx_role_footnote" id="footnote7">
      <sup class="ltx_note_mark">
       7
      </sup>
      <span class="ltx_note_outer">
       <span class="ltx_note_content">
        <sup class="ltx_note_mark">
         7
        </sup>
        <span class="ltx_tag ltx_tag_note">
         7
        </span>
        Gemini is accessed through the Vertex AI API:
        <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://cloud.google.com/vertex-ai/docs/" target="_blank" title="">
         https://cloud.google.com/vertex-ai/docs/
        </a>
       </span>
      </span>
     </span>
     as the conditional generation model,
     <math alttext="M" class="ltx_Math" display="inline" id="S4.SS1.p1.1.m1.1">
      <semantics id="S4.SS1.p1.1.m1.1a">
       <mi id="S4.SS1.p1.1.m1.1.1" xref="S4.SS1.p1.1.m1.1.1.cmml">
        M
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.1b">
        <ci id="S4.SS1.p1.1.m1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1">
         𝑀
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.1c">
        M
       </annotation>
      </semantics>
     </math>
     .
    </p>
   </div>
   <section class="ltx_paragraph" id="S4.SS1.SSS0.Px1">
    <h5 class="ltx_title ltx_title_paragraph">
     PACIFIC
    </h5>
    <div class="ltx_para" id="S4.SS1.SSS0.Px1.p1">
     <p class="ltx_p" id="S4.SS1.SSS0.Px1.p1.1">
      is a task for proactive conversational question answering grounded on a mixture of tabular and textual financial data
      <cite class="ltx_cite ltx_citemacro_citep">
       [
       <a class="ltx_ref" href="#bib.bib17" title="">
        17
       </a>
       ]
      </cite>
      .
This may involve generating the correct words from a given span, from multiple spans, or providing a correct arithmetic expression.
The official evaluation for PACIFIC uses a numeracy-focused token overlap metric called DROP F1.
     </p>
    </div>
   </section>
   <section class="ltx_paragraph" id="S4.SS1.SSS0.Px2">
    <h5 class="ltx_title ltx_title_paragraph">
     Abg-CoQA
    </h5>
    <div class="ltx_para" id="S4.SS1.SSS0.Px2.p1">
     <p class="ltx_p" id="S4.SS1.SSS0.Px2.p1.1">
      is a conversational question answering dataset for disambiguation in machine reading comprehension
      <cite class="ltx_cite ltx_citemacro_citep">
       [
       <a class="ltx_ref" href="#bib.bib54" title="">
        54
       </a>
       ]
      </cite>
      .
As there are no arithmetic expressions, we use embedding-based semantic distance with SentenceBERT
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib55" title="">
        55
       </a>
       ]
      </cite>
      as an evaluation metric, which has been proposed as a more flexible and realistic measure of question-answering performance
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib56" title="">
        56
       </a>
       ]
      </cite>
      .
     </p>
    </div>
   </section>
   <section class="ltx_paragraph" id="S4.SS1.SSS0.Px3">
    <h5 class="ltx_title ltx_title_paragraph">
     AmbigSQL
    </h5>
    <div class="ltx_para" id="S4.SS1.SSS0.Px3.p1">
     <p class="ltx_p" id="S4.SS1.SSS0.Px3.p1.1">
      is our new task for SQL-grounded conversational disambiguation.
We systematically perturbed unambiguous queries from Spider, a popular text-to-SQL benchmark
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib57" title="">
        57
       </a>
       ]
      </cite>
      ,
resulting in paired training examples which can be easily incorporated into contrastive RL tuning. Each trajectory is evaluated by whether the final proposed SQL query matches the ground truth query’s execution result.
We provide a detailed description of AmbigSQL and its construction in Appendix
      <a class="ltx_ref" href="#A2" title="Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        B
       </span>
      </a>
      .
Our motivation in constructing AmbigSQL stems from the idea that disambiguation can lead to improved task performance. We found that constructing a SQL query for an underspecified request with and without clarification turns can result in a gap in execution match of up to 45.8% (see Table
      <a class="ltx_ref" href="#A2.T10" title="Table A10 ‣ B.1 AmbigSQL Construction ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        A10
       </span>
      </a>
      ).
     </p>
    </div>
   </section>
  </section>
  <section class="ltx_subsection" id="S4.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.2
    </span>
    Evaluation
   </h3>
   <div class="ltx_para" id="S4.SS2.p1">
    <p class="ltx_p" id="S4.SS2.p1.1">
     We conduct evaluations of
     <span class="ltx_text ltx_font_italic" id="S4.SS2.p1.1.1">
      ACT
     </span>
     ’s ability to improve reasoning about ambiguity in conversation along two dimensions: 1) Implicit Ambiguity Recognition, an action-level evaluation of whether an agent correctly chooses to ask a clarifying question or provide an answer, and 2) Agent Task Performance, a content-level of the downstream task in terms of metrics such as execution match.
    </p>
   </div>
   <section class="ltx_paragraph" id="S4.SS2.SSS0.Px1">
    <h5 class="ltx_title ltx_title_paragraph">
     Implicit Ambiguity Recognition
    </h5>
    <div class="ltx_para" id="S4.SS2.SSS0.Px1.p1">
     <p class="ltx_p" id="S4.SS2.SSS0.Px1.p1.1">
      follows the notion of “dialogue act accuracy” used to evaluate generation controllability in
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib24" title="">
        24
       </a>
       ]
      </cite>
      . We evaluate whether each model can implicitly select the correct conversational action. Given a contextually-ambiguous user request, a model should generate a clarifying question, otherwise, it should attempt to provide the requested information.
Since PACIFIC and Abg-CoQA have highly imbalanced classes, we perform evaluation in terms of Accuracy, Weighted F1, and Macro F1. AmbigSQL is balanced, so we only evaluate Accuracy.
     </p>
    </div>
    <div class="ltx_para" id="S4.SS2.SSS0.Px1.p2">
     <p class="ltx_p" id="S4.SS2.SSS0.Px1.p2.1">
      <span class="ltx_text ltx_font_bold" id="S4.SS2.SSS0.Px1.p2.1.1">
       Agent Task Performance
      </span>
      We also evaluate on downstream task performance to verify that 1)
      <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.p2.1.2">
       ACT
      </span>
      does not unlearn task knowledge when optimizing for implicit actions, and 2)
      <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.p2.1.3">
       ACT
      </span>
      improves multi-turn task capabilities.
     </p>
    </div>
    <figure class="ltx_table" id="S4.T2">
     <figcaption class="ltx_caption">
      <span class="ltx_tag ltx_tag_table">
       Table 2:
      </span>
      <span class="ltx_text ltx_font_bold" id="S4.T2.17.1">
       Abg-CoQA test set evaluation results.
      </span>
      <span class="ltx_text ltx_font_italic" id="S4.T2.18.2">
       ACT
      </span>
      outperforms SFT across all evaluations in all three data settings. However, Gemini Ultra achieves the strongest downstream task performance when prompted with in-distribution in-context conversation examples.
     </figcaption>
     <p class="ltx_p ltx_align_center" id="S4.T2.14">
      <span class="ltx_text ltx_inline-block" id="S4.T2.14.14" style="width:433.6pt;">
       <span class="ltx_inline-block ltx_transformed_outer" id="S4.T2.14.14.14.14" style="width:635.0pt;height:271pt;vertical-align:-1.0pt;">
        <span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
         <span class="ltx_p" id="S4.T2.14.14.14.14.14">
          <span class="ltx_text" id="S4.T2.14.14.14.14.14.14">
           <span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T2.14.14.14.14.14.14.14">
            <span class="ltx_tbody">
             <span class="ltx_tr" id="S4.T2.14.14.14.14.14.14.14.15.1">
              <span class="ltx_td ltx_th ltx_th_row ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.15.1.1">
              </span>
              <span class="ltx_td ltx_th ltx_th_row ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.15.1.2">
              </span>
              <span class="ltx_td ltx_th ltx_th_row ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.15.1.3">
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T2.14.14.14.14.14.14.14.15.1.4">
               <span class="ltx_text ltx_font_bold" id="S4.T2.14.14.14.14.14.14.14.15.1.4.1">
                Action-level
               </span>
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t ltx_colspan ltx_colspan_2" id="S4.T2.14.14.14.14.14.14.14.15.1.5">
               <span class="ltx_text ltx_font_bold" id="S4.T2.14.14.14.14.14.14.14.15.1.5.1">
                Content-level
               </span>
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.5.5.5.5.5.5.5.5">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.5.5.5.5.5.5.5.5.6">
               Base Model
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.5.5.5.5.5.5.5.5.7">
               Adaptation Setting
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.5.5.5.5.5.5.5.5.8">
               Examples
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.1.1.1.1.1.1.1.1.1">
               Accuracy
               <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T2.1.1.1.1.1.1.1.1.1.m1.1">
                <semantics id="S4.T2.1.1.1.1.1.1.1.1.1.m1.1a">
                 <mo id="S4.T2.1.1.1.1.1.1.1.1.1.m1.1.1" stretchy="false" xref="S4.T2.1.1.1.1.1.1.1.1.1.m1.1.1.cmml">
                  ↑
                 </mo>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.1.1.1.1.1.1.1.1.1.m1.1b">
                  <ci id="S4.T2.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S4.T2.1.1.1.1.1.1.1.1.1.m1.1.1">
                   ↑
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.1.1.1.1.1.1.1.1.1.m1.1c">
                  \uparrow
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.2.2.2.2.2.2.2.2.2">
               Weighted F1
               <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T2.2.2.2.2.2.2.2.2.2.m1.1">
                <semantics id="S4.T2.2.2.2.2.2.2.2.2.2.m1.1a">
                 <mo id="S4.T2.2.2.2.2.2.2.2.2.2.m1.1.1" stretchy="false" xref="S4.T2.2.2.2.2.2.2.2.2.2.m1.1.1.cmml">
                  ↑
                 </mo>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.2.2.2.2.2.2.2.2.2.m1.1b">
                  <ci id="S4.T2.2.2.2.2.2.2.2.2.2.m1.1.1.cmml" xref="S4.T2.2.2.2.2.2.2.2.2.2.m1.1.1">
                   ↑
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.2.2.2.2.2.2.2.2.2.m1.1c">
                  \uparrow
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.3.3.3.3.3.3.3.3.3">
               Macro F1
               <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T2.3.3.3.3.3.3.3.3.3.m1.1">
                <semantics id="S4.T2.3.3.3.3.3.3.3.3.3.m1.1a">
                 <mo id="S4.T2.3.3.3.3.3.3.3.3.3.m1.1.1" stretchy="false" xref="S4.T2.3.3.3.3.3.3.3.3.3.m1.1.1.cmml">
                  ↑
                 </mo>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.3.3.3.3.3.3.3.3.3.m1.1b">
                  <ci id="S4.T2.3.3.3.3.3.3.3.3.3.m1.1.1.cmml" xref="S4.T2.3.3.3.3.3.3.3.3.3.m1.1.1">
                   ↑
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.3.3.3.3.3.3.3.3.3.m1.1c">
                  \uparrow
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.4.4.4">
               Turn Similarity
               <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T2.4.4.4.4.4.4.4.4.4.m1.1">
                <semantics id="S4.T2.4.4.4.4.4.4.4.4.4.m1.1a">
                 <mo id="S4.T2.4.4.4.4.4.4.4.4.4.m1.1.1" stretchy="false" xref="S4.T2.4.4.4.4.4.4.4.4.4.m1.1.1.cmml">
                  ↑
                 </mo>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.4.4.4.4.4.4.4.4.4.m1.1b">
                  <ci id="S4.T2.4.4.4.4.4.4.4.4.4.m1.1.1.cmml" xref="S4.T2.4.4.4.4.4.4.4.4.4.m1.1.1">
                   ↑
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.4.4.4.4.4.4.4.4.4.m1.1c">
                  \uparrow
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T2.5.5.5.5.5.5.5.5.5">
               Traj. Similarity
               <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T2.5.5.5.5.5.5.5.5.5.m1.1">
                <semantics id="S4.T2.5.5.5.5.5.5.5.5.5.m1.1a">
                 <mo id="S4.T2.5.5.5.5.5.5.5.5.5.m1.1.1" stretchy="false" xref="S4.T2.5.5.5.5.5.5.5.5.5.m1.1.1.cmml">
                  ↑
                 </mo>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.5.5.5.5.5.5.5.5.5.m1.1b">
                  <ci id="S4.T2.5.5.5.5.5.5.5.5.5.m1.1.1.cmml" xref="S4.T2.5.5.5.5.5.5.5.5.5.m1.1.1">
                   ↑
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.5.5.5.5.5.5.5.5.5.m1.1c">
                  \uparrow
                 </annotation>
                </semantics>
               </math>
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.14.14.14.14.14.14.14.16.2">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.16.2.1">
               Gemini Ultra
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.16.2.2">
               ICL - Standard
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.16.2.3">
               10
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.16.2.4">
               87.5
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.16.2.5">
               84.2
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.16.2.6">
               54.3
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.16.2.7">
               77.2
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T2.14.14.14.14.14.14.14.16.2.8">
               77.5
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.14.14.14.14.14.14.14.17.3">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.17.3.1">
               Gemini Pro 1.5
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.17.3.2">
               ICL - Standard
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.17.3.3">
               10
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.17.3.4">
               51.8
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.17.3.5">
               59.5
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.17.3.6">
               46.5
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.17.3.7">
               64.5
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.17.3.8">
               65.7
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.14.14.14.14.14.14.14.18.4">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.18.4.1">
               Gemini Pro 1.5
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.18.4.2">
               ICL - Chain-of-Thought
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.18.4.3">
               10
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.18.4.4">
               84.4
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.18.4.5">
               84.4
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.18.4.6">
               62.4
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.18.4.7">
               65.2
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.18.4.8">
               62.0
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.14.14.14.14.14.14.14.19.5">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.19.5.1">
               Gemini Pro 1.5
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.19.5.2">
               ICL - Proactive MIPrompt
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.14.14.14.14.14.14.14.19.5.3">
               10
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.19.5.4">
               60.9
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.19.5.5">
               67.9
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.19.5.6">
               52.2
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.19.5.7">
               61.6
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.14.14.14.14.14.14.14.19.5.8">
               63.7
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.6.6.6.6.6.6.6.6">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.6.6.6.6.6.6.6.6.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.6.6.6.6.6.6.6.6.1.m1.1">
                <semantics id="S4.T2.6.6.6.6.6.6.6.6.1.m1.1a">
                 <mi id="S4.T2.6.6.6.6.6.6.6.6.1.m1.1.1" xref="S4.T2.6.6.6.6.6.6.6.6.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.6.6.6.6.6.6.6.6.1.m1.1b">
                  <ci id="S4.T2.6.6.6.6.6.6.6.6.1.m1.1.1.cmml" xref="S4.T2.6.6.6.6.6.6.6.6.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.6.6.6.6.6.6.6.6.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.6.6.6.6.6.6.6.6.2">
               SFT
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.6.6.6.6.6.6.6.6.3">
               50
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.6.6.6.6.6.6.6.6.4">
               55.3
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.6.6.6.6.6.6.6.6.5">
               63.2
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.6.6.6.6.6.6.6.6.6">
               44.6
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.6.6.6.6.6.6.6.6.7">
               53.3
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T2.6.6.6.6.6.6.6.6.8">
               64.2
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.7.7.7.7.7.7.7.7">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.7.7.7.7.7.7.7.7.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.7.7.7.7.7.7.7.7.1.m1.1">
                <semantics id="S4.T2.7.7.7.7.7.7.7.7.1.m1.1a">
                 <mi id="S4.T2.7.7.7.7.7.7.7.7.1.m1.1.1" xref="S4.T2.7.7.7.7.7.7.7.7.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.7.7.7.7.7.7.7.7.1.m1.1b">
                  <ci id="S4.T2.7.7.7.7.7.7.7.7.1.m1.1.1.cmml" xref="S4.T2.7.7.7.7.7.7.7.7.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.7.7.7.7.7.7.7.7.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.7.7.7.7.7.7.7.7.2">
               Naive DPO
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.7.7.7.7.7.7.7.7.3">
               50
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.7.7.7.7.7.7.7.7.4">
               <span class="ltx_text ltx_font_bold" id="S4.T2.7.7.7.7.7.7.7.7.4.1">
                88.0
               </span>
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.7.7.7.7.7.7.7.7.5">
               83.2
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.7.7.7.7.7.7.7.7.6">
               49.0
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.7.7.7.7.7.7.7.7.7">
               61.1
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.7.7.7.7.7.7.7.7.8">
               62.7
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.8.8.8.8.8.8.8.8">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.8.8.8.8.8.8.8.8.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.8.8.8.8.8.8.8.8.1.m1.1">
                <semantics id="S4.T2.8.8.8.8.8.8.8.8.1.m1.1a">
                 <mi id="S4.T2.8.8.8.8.8.8.8.8.1.m1.1.1" xref="S4.T2.8.8.8.8.8.8.8.8.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.8.8.8.8.8.8.8.8.1.m1.1b">
                  <ci id="S4.T2.8.8.8.8.8.8.8.8.1.m1.1.1.cmml" xref="S4.T2.8.8.8.8.8.8.8.8.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.8.8.8.8.8.8.8.8.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.8.8.8.8.8.8.8.8.2">
               <span class="ltx_text ltx_font_italic" id="S4.T2.8.8.8.8.8.8.8.8.2.1">
                ACT
               </span>
               (ours)
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.8.8.8.8.8.8.8.8.3">
               50
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.8.8.8.8.8.8.8.8.4">
               84.7
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.8.8.8.8.8.8.8.8.5">
               <span class="ltx_text ltx_font_bold" id="S4.T2.8.8.8.8.8.8.8.8.5.1">
                84.3
               </span>
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.8.8.8.8.8.8.8.8.6">
               <span class="ltx_text ltx_font_bold" id="S4.T2.8.8.8.8.8.8.8.8.6.1">
                52.3
               </span>
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.8.8.8.8.8.8.8.8.7">
               <span class="ltx_text ltx_font_bold" id="S4.T2.8.8.8.8.8.8.8.8.7.1">
                66.2
               </span>
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.8.8.8.8.8.8.8.8.8">
               <span class="ltx_text ltx_font_bold" id="S4.T2.8.8.8.8.8.8.8.8.8.1">
                68.8
               </span>
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.9.9.9.9.9.9.9.9">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.9.9.9.9.9.9.9.9.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.9.9.9.9.9.9.9.9.1.m1.1">
                <semantics id="S4.T2.9.9.9.9.9.9.9.9.1.m1.1a">
                 <mi id="S4.T2.9.9.9.9.9.9.9.9.1.m1.1.1" xref="S4.T2.9.9.9.9.9.9.9.9.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.9.9.9.9.9.9.9.9.1.m1.1b">
                  <ci id="S4.T2.9.9.9.9.9.9.9.9.1.m1.1.1.cmml" xref="S4.T2.9.9.9.9.9.9.9.9.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.9.9.9.9.9.9.9.9.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.9.9.9.9.9.9.9.9.2">
               SFT
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.9.9.9.9.9.9.9.9.3">
               100
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.9.9.9.9.9.9.9.9.4">
               70.7
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.9.9.9.9.9.9.9.9.5">
               75.1
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.9.9.9.9.9.9.9.9.6">
               <span class="ltx_text ltx_font_bold" id="S4.T2.9.9.9.9.9.9.9.9.6.1">
                52.6
               </span>
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.9.9.9.9.9.9.9.9.7">
               63.1
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T2.9.9.9.9.9.9.9.9.8">
               69.4
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.10.10.10.10.10.10.10.10">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.10.10.10.10.10.10.10.10.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.10.10.10.10.10.10.10.10.1.m1.1">
                <semantics id="S4.T2.10.10.10.10.10.10.10.10.1.m1.1a">
                 <mi id="S4.T2.10.10.10.10.10.10.10.10.1.m1.1.1" xref="S4.T2.10.10.10.10.10.10.10.10.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.10.10.10.10.10.10.10.10.1.m1.1b">
                  <ci id="S4.T2.10.10.10.10.10.10.10.10.1.m1.1.1.cmml" xref="S4.T2.10.10.10.10.10.10.10.10.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.10.10.10.10.10.10.10.10.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.10.10.10.10.10.10.10.10.2">
               Naive DPO
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.10.10.10.10.10.10.10.10.3">
               100
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.10.10.10.10.10.10.10.10.4">
               84.9
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.10.10.10.10.10.10.10.10.5">
               82.0
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.10.10.10.10.10.10.10.10.6">
               49.9
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.10.10.10.10.10.10.10.10.7">
               63.4
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.10.10.10.10.10.10.10.10.8">
               64.5
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.11.11.11.11.11.11.11.11">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.11.11.11.11.11.11.11.11.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.11.11.11.11.11.11.11.11.1.m1.1">
                <semantics id="S4.T2.11.11.11.11.11.11.11.11.1.m1.1a">
                 <mi id="S4.T2.11.11.11.11.11.11.11.11.1.m1.1.1" xref="S4.T2.11.11.11.11.11.11.11.11.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.11.11.11.11.11.11.11.11.1.m1.1b">
                  <ci id="S4.T2.11.11.11.11.11.11.11.11.1.m1.1.1.cmml" xref="S4.T2.11.11.11.11.11.11.11.11.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.11.11.11.11.11.11.11.11.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.11.11.11.11.11.11.11.11.2">
               <span class="ltx_text ltx_font_italic" id="S4.T2.11.11.11.11.11.11.11.11.2.1">
                ACT
               </span>
               (ours)
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.11.11.11.11.11.11.11.11.3">
               100
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.11.11.11.11.11.11.11.11.4">
               <span class="ltx_text ltx_font_bold" id="S4.T2.11.11.11.11.11.11.11.11.4.1">
                88.0
               </span>
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.11.11.11.11.11.11.11.11.5">
               <span class="ltx_text ltx_font_bold" id="S4.T2.11.11.11.11.11.11.11.11.5.1">
                83.7
               </span>
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.11.11.11.11.11.11.11.11.6">
               51.1
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.11.11.11.11.11.11.11.11.7">
               <span class="ltx_text ltx_font_bold" id="S4.T2.11.11.11.11.11.11.11.11.7.1">
                69.5
               </span>
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.11.11.11.11.11.11.11.11.8">
               <span class="ltx_text ltx_font_bold" id="S4.T2.11.11.11.11.11.11.11.11.8.1">
                71.4
               </span>
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.12.12.12.12.12.12.12.12">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.12.12.12.12.12.12.12.12.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.12.12.12.12.12.12.12.12.1.m1.1">
                <semantics id="S4.T2.12.12.12.12.12.12.12.12.1.m1.1a">
                 <mi id="S4.T2.12.12.12.12.12.12.12.12.1.m1.1.1" xref="S4.T2.12.12.12.12.12.12.12.12.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.12.12.12.12.12.12.12.12.1.m1.1b">
                  <ci id="S4.T2.12.12.12.12.12.12.12.12.1.m1.1.1.cmml" xref="S4.T2.12.12.12.12.12.12.12.12.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.12.12.12.12.12.12.12.12.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.12.12.12.12.12.12.12.12.2">
               SFT
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.12.12.12.12.12.12.12.12.3">
               250
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.12.12.12.12.12.12.12.12.4">
               56.3
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.12.12.12.12.12.12.12.12.5">
               64.1
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.12.12.12.12.12.12.12.12.6">
               45.1
              </span>
              <span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.12.12.12.12.12.12.12.12.7">
               61.0
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S4.T2.12.12.12.12.12.12.12.12.8">
               59.8
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.13.13.13.13.13.13.13.13">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.13.13.13.13.13.13.13.13.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.13.13.13.13.13.13.13.13.1.m1.1">
                <semantics id="S4.T2.13.13.13.13.13.13.13.13.1.m1.1a">
                 <mi id="S4.T2.13.13.13.13.13.13.13.13.1.m1.1.1" xref="S4.T2.13.13.13.13.13.13.13.13.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.13.13.13.13.13.13.13.13.1.m1.1b">
                  <ci id="S4.T2.13.13.13.13.13.13.13.13.1.m1.1.1.cmml" xref="S4.T2.13.13.13.13.13.13.13.13.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.13.13.13.13.13.13.13.13.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.13.13.13.13.13.13.13.13.2">
               Naive DPO
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.13.13.13.13.13.13.13.13.3">
               250
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.13.13.13.13.13.13.13.13.4">
               <span class="ltx_text ltx_font_bold" id="S4.T2.13.13.13.13.13.13.13.13.4.1">
                88.0
               </span>
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.13.13.13.13.13.13.13.13.5">
               82.7
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.13.13.13.13.13.13.13.13.6">
               46.8
              </span>
              <span class="ltx_td ltx_align_center" id="S4.T2.13.13.13.13.13.13.13.13.7">
               68.7
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center" id="S4.T2.13.13.13.13.13.13.13.13.8">
               70.9
              </span>
             </span>
             <span class="ltx_tr" id="S4.T2.14.14.14.14.14.14.14.14">
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T2.14.14.14.14.14.14.14.14.1">
               Zephyr 7B-
               <math alttext="\beta" class="ltx_Math" display="inline" id="S4.T2.14.14.14.14.14.14.14.14.1.m1.1">
                <semantics id="S4.T2.14.14.14.14.14.14.14.14.1.m1.1a">
                 <mi id="S4.T2.14.14.14.14.14.14.14.14.1.m1.1.1" xref="S4.T2.14.14.14.14.14.14.14.14.1.m1.1.1.cmml">
                  β
                 </mi>
                 <annotation-xml encoding="MathML-Content" id="S4.T2.14.14.14.14.14.14.14.14.1.m1.1b">
                  <ci id="S4.T2.14.14.14.14.14.14.14.14.1.m1.1.1.cmml" xref="S4.T2.14.14.14.14.14.14.14.14.1.m1.1.1">
                   𝛽
                  </ci>
                 </annotation-xml>
                 <annotation encoding="application/x-tex" id="S4.T2.14.14.14.14.14.14.14.14.1.m1.1c">
                  \beta
                 </annotation>
                </semantics>
               </math>
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T2.14.14.14.14.14.14.14.14.2">
               <span class="ltx_text ltx_font_italic" id="S4.T2.14.14.14.14.14.14.14.14.2.1">
                ACT
               </span>
               (ours)
              </span>
              <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T2.14.14.14.14.14.14.14.14.3">
               250
              </span>
              <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.14.14.14.14.14.14.14.14.4">
               86.2
              </span>
              <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.14.14.14.14.14.14.14.14.5">
               <span class="ltx_text ltx_font_bold" id="S4.T2.14.14.14.14.14.14.14.14.5.1">
                83.3
               </span>
              </span>
              <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.14.14.14.14.14.14.14.14.6">
               <span class="ltx_text ltx_font_bold" id="S4.T2.14.14.14.14.14.14.14.14.6.1">
                53.3
               </span>
              </span>
              <span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.14.14.14.14.14.14.14.14.7">
               <span class="ltx_text ltx_font_bold" id="S4.T2.14.14.14.14.14.14.14.14.7.1">
                72.5
               </span>
              </span>
              <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_bb" id="S4.T2.14.14.14.14.14.14.14.14.8">
               <span class="ltx_text ltx_font_bold" id="S4.T2.14.14.14.14.14.14.14.14.8.1">
                75.1
               </span>
              </span>
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </p>
    </figure>
    <div class="ltx_para" id="S4.SS2.SSS0.Px1.p3">
     <p class="ltx_p" id="S4.SS2.SSS0.Px1.p3.1">
      PACIFIC and Abg-CoQA are both initially proposed only with static task performance evaluations. The official PACIFIC evaluation only consists of system-side DROP F1 score (i.e., the system does not have to provide the eventual correct answer after asking a clarifying question), and Abg-CoQA only requires the system to provide answers (i.e., the system is never asked to produce a clarifying question). To mirror the static evaluation settings originally designed for these two tasks, we first conduct turn-level evaluation by comparing the model’s response to the ground truth utterance given in response to the user’s query, using the task-specific heuristics given in Section
      <a class="ltx_ref" href="#S4.SS1" title="4.1 Datasets ‣ 4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        4.1
       </span>
      </a>
      .
     </p>
    </div>
    <div class="ltx_para" id="S4.SS2.SSS0.Px1.p4">
     <p class="ltx_p" id="S4.SS2.SSS0.Px1.p4.2">
      However, because we are specifically concerned with improving LLMs’ multi-turn capabilities, we additionally propose a multi-turn evaluation scheme for all three tasks considered. We consider each user query to be a different information-seeking goal. For a given goal, the initial user-side query can be considered the beginning of a ground truth trajectory, and any possible clarification turns that are in response to a query can be considered to be a part of the same ground-truth trajectory of that query’s goal. We sample a response for each user-side query and simulate the trajectory outcome each time the sampled response is a clarifying question. We use
      <math alttext="A" class="ltx_Math" display="inline" id="S4.SS2.SSS0.Px1.p4.1.m1.1">
       <semantics id="S4.SS2.SSS0.Px1.p4.1.m1.1a">
        <mi id="S4.SS2.SSS0.Px1.p4.1.m1.1.1" xref="S4.SS2.SSS0.Px1.p4.1.m1.1.1.cmml">
         A
        </mi>
        <annotation-xml encoding="MathML-Content" id="S4.SS2.SSS0.Px1.p4.1.m1.1b">
         <ci id="S4.SS2.SSS0.Px1.p4.1.m1.1.1.cmml" xref="S4.SS2.SSS0.Px1.p4.1.m1.1.1">
          𝐴
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S4.SS2.SSS0.Px1.p4.1.m1.1c">
         A
        </annotation>
       </semantics>
      </math>
      and
      <math alttext="U" class="ltx_Math" display="inline" id="S4.SS2.SSS0.Px1.p4.2.m2.1">
       <semantics id="S4.SS2.SSS0.Px1.p4.2.m2.1a">
        <mi id="S4.SS2.SSS0.Px1.p4.2.m2.1.1" xref="S4.SS2.SSS0.Px1.p4.2.m2.1.1.cmml">
         U
        </mi>
        <annotation-xml encoding="MathML-Content" id="S4.SS2.SSS0.Px1.p4.2.m2.1b">
         <ci id="S4.SS2.SSS0.Px1.p4.2.m2.1.1.cmml" xref="S4.SS2.SSS0.Px1.p4.2.m2.1.1">
          𝑈
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S4.SS2.SSS0.Px1.p4.2.m2.1c">
         U
        </annotation>
       </semantics>
      </math>
      for simulation as described in Section
      <a class="ltx_ref" href="#S3.SS2.SSS2" title="3.2.2 Self-Training Using On-policy Conversation Trajectory Simulation ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        3.2.2
       </span>
      </a>
      for
      <span class="ltx_text ltx_font_italic" id="S4.SS2.SSS0.Px1.p4.2.1">
       ACT
      </span>
      , and use the heuristics defined in Section
      <a class="ltx_ref" href="#S4.SS1" title="4.1 Datasets ‣ 4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        4.1
       </span>
      </a>
      . We also compute task performance on the simulated responses in which the model has previously asked any clarifying questions, in order to get a more fine-grained measure of the model’s ability to reason about its own clarification questions.
Details of each evaluation metric for each task are provided in Appendix
      <a class="ltx_ref" href="#A3" title="Appendix C Additional Details on Evaluation ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        C
       </span>
      </a>
      .
     </p>
    </div>
   </section>
  </section>
  <section class="ltx_subsection" id="S4.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.3
    </span>
    Baselines
   </h3>
   <section class="ltx_paragraph" id="S4.SS3.SSS0.Px1">
    <h5 class="ltx_title ltx_title_paragraph">
     Prompting Baselines
    </h5>
    <div class="ltx_para" id="S4.SS3.SSS0.Px1.p1">
     <p class="ltx_p" id="S4.SS3.SSS0.Px1.p1.1">
      We also compare downstream task performance against end-to-end prompt-based approaches paired with frontier LLMs: Gemini Ultra 1.0 and Gemini Pro 1.5. We use 10 conversations as in-context examples, with three different prompting frameworks: i.) “Standard” which uses the same instruction formatting used for tuning; ii.) chain-of-thought reasoning
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib58" title="">
        58
       </a>
       ]
      </cite>
      ; and iii.) the mixed-initiative prompting style as used in
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib24" title="">
        24
       </a>
       ]
      </cite>
      combined with Proactive Prompting
      <cite class="ltx_cite ltx_citemacro_citep">
       [
       <a class="ltx_ref" href="#bib.bib59" title="">
        59
       </a>
       ]
      </cite>
      , which is the strongest prompting baseline in
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib34" title="">
        34
       </a>
       ]
      </cite>
      (henceforth Proactive MIPrompt, following the convention in
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib34" title="">
        34
       </a>
       ]
      </cite>
      ). We provide a detailed description of each style with examples in Appendix
      <a class="ltx_ref" href="#A4" title="Appendix D Description of In-Context Learning Baselines ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        D
       </span>
      </a>
      .
     </p>
    </div>
   </section>
   <section class="ltx_paragraph" id="S4.SS3.SSS0.Px2">
    <h5 class="ltx_title ltx_title_paragraph">
     Tuning Baselines
    </h5>
    <div class="ltx_para" id="S4.SS3.SSS0.Px2.p1">
     <p class="ltx_p" id="S4.SS3.SSS0.Px2.p1.1">
      We compare
      <span class="ltx_text ltx_font_italic" id="S4.SS3.SSS0.Px2.p1.1.1">
       ACT
      </span>
      with supervised fine-tuning (SFT) as well as a common approach to DPO-based alignment. For SFT, we use the ground truth responses for each dataset’s training split.
As for DPO-based alignment, in the absence of human annotators, a widely accepted approaches has been naively sampling responses from two high capacity models, with
      <math alttext="Y_{w}" class="ltx_Math" display="inline" id="S4.SS3.SSS0.Px2.p1.1.m1.1">
       <semantics id="S4.SS3.SSS0.Px2.p1.1.m1.1a">
        <msub id="S4.SS3.SSS0.Px2.p1.1.m1.1.1" xref="S4.SS3.SSS0.Px2.p1.1.m1.1.1.cmml">
         <mi id="S4.SS3.SSS0.Px2.p1.1.m1.1.1.2" xref="S4.SS3.SSS0.Px2.p1.1.m1.1.1.2.cmml">
          Y
         </mi>
         <mi id="S4.SS3.SSS0.Px2.p1.1.m1.1.1.3" xref="S4.SS3.SSS0.Px2.p1.1.m1.1.1.3.cmml">
          w
         </mi>
        </msub>
        <annotation-xml encoding="MathML-Content" id="S4.SS3.SSS0.Px2.p1.1.m1.1b">
         <apply id="S4.SS3.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S4.SS3.SSS0.Px2.p1.1.m1.1.1">
          <csymbol cd="ambiguous" id="S4.SS3.SSS0.Px2.p1.1.m1.1.1.1.cmml" xref="S4.SS3.SSS0.Px2.p1.1.m1.1.1">
           subscript
          </csymbol>
          <ci id="S4.SS3.SSS0.Px2.p1.1.m1.1.1.2.cmml" xref="S4.SS3.SSS0.Px2.p1.1.m1.1.1.2">
           𝑌
          </ci>
          <ci id="S4.SS3.SSS0.Px2.p1.1.m1.1.1.3.cmml" xref="S4.SS3.SSS0.Px2.p1.1.m1.1.1.3">
           𝑤
          </ci>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S4.SS3.SSS0.Px2.p1.1.m1.1c">
         Y_{w}
        </annotation>
       </semantics>
      </math>
      coming from whichever model is of higher capacity (e.g., GPT-4 versus GPT-3.5)
      <cite class="ltx_cite ltx_citemacro_citep">
       [
       <a class="ltx_ref" href="#bib.bib60" title="">
        60
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib61" title="">
        61
       </a>
       ,
       <a class="ltx_ref" href="#bib.bib62" title="">
        62
       </a>
       ]
      </cite>
      , effectively performing distillation from the larger model. We thus construct a preference dataset by sampling responses from Gemini Ultra 1.0 and its smaller counterpart, Gemini Pro 1.0. We use “Standard” in-context learning with ten examples for domain adaptation.
     </p>
    </div>
   </section>
  </section>
 </section>
 <section class="ltx_section" id="S5">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    5
   </span>
   Experimental Results
  </h2>
  <div class="ltx_para" id="S5.p1">
   <p class="ltx_p" id="S5.p1.1">
    To emulate real-world scenarios with limited data, we evaluate
    <span class="ltx_text ltx_font_italic" id="S5.p1.1.1">
     ACT
    </span>
    as a tuning approach in a few different conditions with limited conversation samples across a set of diverse tasks.
   </p>
  </div>
  <section class="ltx_subsection" id="S5.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     5.1
    </span>
    Conversational QA with Tabular Grounding
   </h3>
   <div class="ltx_para" id="S5.SS1.p1">
    <p class="ltx_p" id="S5.SS1.p1.1">
     In Table
     <a class="ltx_ref" href="#S4.T1" title="Table 1 ‣ 4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     , we see that across all three data settings considered,
     <span class="ltx_text ltx_font_italic" id="S5.SS1.p1.1.1">
      ACT
     </span>
     achieves the strongest performance across all metrics compared to the other tuning approaches. Additionally, tuning with
     <span class="ltx_text ltx_font_italic" id="S5.SS1.p1.1.2">
      ACT
     </span>
     in these limited data settings grants the model the ability to match our outperform frontier language models despite having zero in-context examples during inference.
Overall,
     <span class="ltx_text ltx_font_italic" id="S5.SS1.p1.1.3">
      ACT
     </span>
     appears to be helping to improve the recognition of ambiguity, as well as the ability to reason about clarifying questions. Additionally, the task-specific heuristics do appear to improve performance at the turn-level.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S5.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     5.2
    </span>
    Conversational QA for Machine Reading Comprehension
   </h3>
   <div class="ltx_para" id="S5.SS2.p1">
    <p class="ltx_p" id="S5.SS2.p1.1">
     Our results for Abg-CoQA are presented in Table
     <a class="ltx_ref" href="#S4.T2" title="Table 2 ‣ Implicit Ambiguity Recognition ‣ 4.2 Evaluation ‣ 4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     . In all three data settings, we observe that
     <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.1">
      ACT
     </span>
     achieved the strongest performance in terms of task-specific metrics (notably, in terms of trajectory-level embedding similarity). However, in the 50 and 250 conversation condition, Naive DPO outperforms
     <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.2">
      ACT
     </span>
     in terms of Action Accuracy, and in the 100 conversation condition, SFT outperforms
     <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.3">
      ACT
     </span>
     in terms of Macro F1. Additionally, Gemini Ultra with Standard prompting outperforms all baselines in terms of Macro F1, Turn Similarity, and Trajectory-level similarity, although
     <span class="ltx_text ltx_font_italic" id="S5.SS2.p1.1.4">
      ACT
     </span>
     with 250 conversations achieves comparable performance in terms of Trajectory-level similarity. This is likely because existing frontier LLMs can already achieve strong QA performance.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S5.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     5.3
    </span>
    Conversational Text-to-SQL Generation
   </h3>
   <div class="ltx_para" id="S5.SS3.p1">
    <p class="ltx_p" id="S5.SS3.p1.1">
     We find that although the prompting baselines do not achieve very high Action Accuracy, it is possible to achieve rather high Accuracy with SFT in each data condition. However, it appears that SFT alone is not sufficient for maximizing conversational reasoning performance. In each of the limited data scenarios, we observe considerable improvements in terms of Execution Match and Post-Clarification Execution Match with
     <span class="ltx_text ltx_font_italic" id="S5.SS3.p1.1.1">
      ACT
     </span>
     compared to both SFT and Naive DPO.
We note that prompting Gemini achieves the highest downstream task performance. This is likely due to the stronger capabilities of these LLMs in complex tasks such as text-to-SQL generation.
    </p>
   </div>
   <figure class="ltx_table" id="S5.T3">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table 3:
     </span>
     <span class="ltx_text ltx_font_bold" id="S5.T3.16.1">
      AmbigSQL test set evaluation
     </span>
     . Zephyr tuned with
     <span class="ltx_text ltx_font_italic" id="S5.T3.17.2">
      ACT
     </span>
     is able to achieve the strongest task performance within each data setting. There are especially large performance improvements in post-clarification SQL execution match when data resources are more scarce.
    </figcaption>
    <p class="ltx_p ltx_align_center" id="S5.T3.13">
     <span class="ltx_text ltx_inline-block" id="S5.T3.13.13" style="width:433.6pt;">
      <span class="ltx_inline-block ltx_transformed_outer" id="S5.T3.13.13.13.13" style="width:623.6pt;height:289pt;vertical-align:-1.0pt;">
       <span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
        <span class="ltx_p" id="S5.T3.13.13.13.13.13">
         <span class="ltx_text" id="S5.T3.13.13.13.13.13.13">
          <span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S5.T3.13.13.13.13.13.13.13">
           <span class="ltx_tbody">
            <span class="ltx_tr" id="S5.T3.13.13.13.13.13.13.13.14.1">
             <span class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="S5.T3.13.13.13.13.13.13.13.14.1.1">
             </span>
             <span class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="S5.T3.13.13.13.13.13.13.13.14.1.2">
             </span>
             <span class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="S5.T3.13.13.13.13.13.13.13.14.1.3">
             </span>
             <span class="ltx_td ltx_align_center ltx_border_tt" id="S5.T3.13.13.13.13.13.13.13.14.1.4">
              <span class="ltx_text ltx_font_bold" id="S5.T3.13.13.13.13.13.13.13.14.1.4.1">
               Action-level
              </span>
             </span>
             <span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S5.T3.13.13.13.13.13.13.13.14.1.5">
              <span class="ltx_text ltx_font_bold" id="S5.T3.13.13.13.13.13.13.13.14.1.5.1">
               Content-level
              </span>
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.3.3.3.3.3.3.3.3">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.3.3.3.3.3.3.3.3.4">
              Base Model
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.3.3.3.3.3.3.3.3.5">
              Adaptation Setting
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.3.3.3.3.3.3.3.3.6">
              Examples
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.1.1.1.1.1.1.1.1.1">
              Action Accuracy
              <math alttext="\uparrow" class="ltx_Math" display="inline" id="S5.T3.1.1.1.1.1.1.1.1.1.m1.1">
               <semantics id="S5.T3.1.1.1.1.1.1.1.1.1.m1.1a">
                <mo id="S5.T3.1.1.1.1.1.1.1.1.1.m1.1.1" stretchy="false" xref="S5.T3.1.1.1.1.1.1.1.1.1.m1.1.1.cmml">
                 ↑
                </mo>
                <annotation-xml encoding="MathML-Content" id="S5.T3.1.1.1.1.1.1.1.1.1.m1.1b">
                 <ci id="S5.T3.1.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S5.T3.1.1.1.1.1.1.1.1.1.m1.1.1">
                  ↑
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.1.1.1.1.1.1.1.1.1.m1.1c">
                 \uparrow
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.2.2.2.2.2.2.2.2.2">
              Execution Match
              <math alttext="\uparrow" class="ltx_Math" display="inline" id="S5.T3.2.2.2.2.2.2.2.2.2.m1.1">
               <semantics id="S5.T3.2.2.2.2.2.2.2.2.2.m1.1a">
                <mo id="S5.T3.2.2.2.2.2.2.2.2.2.m1.1.1" stretchy="false" xref="S5.T3.2.2.2.2.2.2.2.2.2.m1.1.1.cmml">
                 ↑
                </mo>
                <annotation-xml encoding="MathML-Content" id="S5.T3.2.2.2.2.2.2.2.2.2.m1.1b">
                 <ci id="S5.T3.2.2.2.2.2.2.2.2.2.m1.1.1.cmml" xref="S5.T3.2.2.2.2.2.2.2.2.2.m1.1.1">
                  ↑
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.2.2.2.2.2.2.2.2.2.m1.1c">
                 \uparrow
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T3.3.3.3.3.3.3.3.3.3">
              PC Execution Match
              <math alttext="\uparrow" class="ltx_Math" display="inline" id="S5.T3.3.3.3.3.3.3.3.3.3.m1.1">
               <semantics id="S5.T3.3.3.3.3.3.3.3.3.3.m1.1a">
                <mo id="S5.T3.3.3.3.3.3.3.3.3.3.m1.1.1" stretchy="false" xref="S5.T3.3.3.3.3.3.3.3.3.3.m1.1.1.cmml">
                 ↑
                </mo>
                <annotation-xml encoding="MathML-Content" id="S5.T3.3.3.3.3.3.3.3.3.3.m1.1b">
                 <ci id="S5.T3.3.3.3.3.3.3.3.3.3.m1.1.1.cmml" xref="S5.T3.3.3.3.3.3.3.3.3.3.m1.1.1">
                  ↑
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.3.3.3.3.3.3.3.3.3.m1.1c">
                 \uparrow
                </annotation>
               </semantics>
              </math>
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.13.13.13.13.13.13.13.15.2">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.15.2.1">
              Gemini Ultra
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.15.2.2">
              ICL - Standard
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.15.2.3">
              10
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.15.2.4">
              60.7
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.15.2.5">
              54.7
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.15.2.6">
              71.0
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.13.13.13.13.13.13.13.16.3">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.16.3.1">
              Gemini Pro 1.0
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.16.3.2">
              ICL - Standard
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.16.3.3">
              10
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.16.3.4">
              81.8
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.16.3.5">
              51.4
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.16.3.6">
              55.3
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.13.13.13.13.13.13.13.17.4">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.17.4.1">
              Gemini Pro 1.5
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.17.4.2">
              ICL - Standard
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.17.4.3">
              10
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.17.4.4">
              72.1
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.17.4.5">
              63.5
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.17.4.6">
              75.2
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.13.13.13.13.13.13.13.18.5">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.18.5.1">
              Gemini Pro 1.5
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.18.5.2">
              ICL - Chain-of-Thought
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.13.13.13.13.13.13.13.18.5.3">
              10
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.18.5.4">
              79.4
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.18.5.5">
              70.3
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.13.13.13.13.13.13.13.18.5.6">
              72.2
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.4.4.4.4.4.4.4.4">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.4.4.4.4.4.4.4.4.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.4.4.4.4.4.4.4.4.1.m1.1">
               <semantics id="S5.T3.4.4.4.4.4.4.4.4.1.m1.1a">
                <mi id="S5.T3.4.4.4.4.4.4.4.4.1.m1.1.1" xref="S5.T3.4.4.4.4.4.4.4.4.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.4.4.4.4.4.4.4.4.1.m1.1b">
                 <ci id="S5.T3.4.4.4.4.4.4.4.4.1.m1.1.1.cmml" xref="S5.T3.4.4.4.4.4.4.4.4.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.4.4.4.4.4.4.4.4.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.4.4.4.4.4.4.4.4.2">
              SFT
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.4.4.4.4.4.4.4.4.3">
              50
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.4.4.4.4.4.4.4.4">
              77.4
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.4.4.4.4.4.4.4.4.5">
              21.9
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T3.4.4.4.4.4.4.4.4.6">
              13.9
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.5.5.5.5.5.5.5.5">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.5.5.5.5.5.5.5.5.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.5.5.5.5.5.5.5.5.1.m1.1">
               <semantics id="S5.T3.5.5.5.5.5.5.5.5.1.m1.1a">
                <mi id="S5.T3.5.5.5.5.5.5.5.5.1.m1.1.1" xref="S5.T3.5.5.5.5.5.5.5.5.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.5.5.5.5.5.5.5.5.1.m1.1b">
                 <ci id="S5.T3.5.5.5.5.5.5.5.5.1.m1.1.1.cmml" xref="S5.T3.5.5.5.5.5.5.5.5.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.5.5.5.5.5.5.5.5.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.5.5.5.5.5.5.5.5.2">
              Naive DPO
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.5.5.5.5.5.5.5.5.3">
              50
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.5.5.5.5.5.5.5.5.4">
              72.1
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.5.5.5.5.5.5.5.5.5">
              35.9
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.5.5.5.5.5.5.5.5.6">
              31.3
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.6.6.6.6.6.6.6.6">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.6.6.6.6.6.6.6.6.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.6.6.6.6.6.6.6.6.1.m1.1">
               <semantics id="S5.T3.6.6.6.6.6.6.6.6.1.m1.1a">
                <mi id="S5.T3.6.6.6.6.6.6.6.6.1.m1.1.1" xref="S5.T3.6.6.6.6.6.6.6.6.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.6.6.6.6.6.6.6.6.1.m1.1b">
                 <ci id="S5.T3.6.6.6.6.6.6.6.6.1.m1.1.1.cmml" xref="S5.T3.6.6.6.6.6.6.6.6.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.6.6.6.6.6.6.6.6.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.6.6.6.6.6.6.6.6.2">
              <span class="ltx_text ltx_font_italic" id="S5.T3.6.6.6.6.6.6.6.6.2.1">
               ACT
              </span>
              (ours)
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.6.6.6.6.6.6.6.6.3">
              50
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.6.6.6.6.6.6.6.6.4">
              <span class="ltx_text ltx_font_bold" id="S5.T3.6.6.6.6.6.6.6.6.4.1">
               80.8
              </span>
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.6.6.6.6.6.6.6.6.5">
              <span class="ltx_text ltx_font_bold" id="S5.T3.6.6.6.6.6.6.6.6.5.1">
               43.6
              </span>
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.6.6.6.6.6.6.6.6.6">
              <span class="ltx_text ltx_font_bold" id="S5.T3.6.6.6.6.6.6.6.6.6.1">
               38.1
              </span>
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.7.7.7.7.7.7.7.7">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.7.7.7.7.7.7.7.7.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.7.7.7.7.7.7.7.7.1.m1.1">
               <semantics id="S5.T3.7.7.7.7.7.7.7.7.1.m1.1a">
                <mi id="S5.T3.7.7.7.7.7.7.7.7.1.m1.1.1" xref="S5.T3.7.7.7.7.7.7.7.7.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.7.7.7.7.7.7.7.7.1.m1.1b">
                 <ci id="S5.T3.7.7.7.7.7.7.7.7.1.m1.1.1.cmml" xref="S5.T3.7.7.7.7.7.7.7.7.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.7.7.7.7.7.7.7.7.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.7.7.7.7.7.7.7.7.2">
              SFT
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.7.7.7.7.7.7.7.7.3">
              100
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.7.7.7.7.7.7.7.7.4">
              97.2
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.7.7.7.7.7.7.7.7.5">
              43.3
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T3.7.7.7.7.7.7.7.7.6">
              34.3
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.8.8.8.8.8.8.8.8">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.8.8.8.8.8.8.8.8.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.8.8.8.8.8.8.8.8.1.m1.1">
               <semantics id="S5.T3.8.8.8.8.8.8.8.8.1.m1.1a">
                <mi id="S5.T3.8.8.8.8.8.8.8.8.1.m1.1.1" xref="S5.T3.8.8.8.8.8.8.8.8.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.8.8.8.8.8.8.8.8.1.m1.1b">
                 <ci id="S5.T3.8.8.8.8.8.8.8.8.1.m1.1.1.cmml" xref="S5.T3.8.8.8.8.8.8.8.8.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.8.8.8.8.8.8.8.8.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.8.8.8.8.8.8.8.8.2">
              Naive DPO
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.8.8.8.8.8.8.8.8.3">
              100
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.8.8.8.8.8.8.8.8.4">
              97.0
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.8.8.8.8.8.8.8.8.5">
              45.3
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.8.8.8.8.8.8.8.8.6">
              37.7
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.9.9.9.9.9.9.9.9">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.9.9.9.9.9.9.9.9.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.9.9.9.9.9.9.9.9.1.m1.1">
               <semantics id="S5.T3.9.9.9.9.9.9.9.9.1.m1.1a">
                <mi id="S5.T3.9.9.9.9.9.9.9.9.1.m1.1.1" xref="S5.T3.9.9.9.9.9.9.9.9.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.9.9.9.9.9.9.9.9.1.m1.1b">
                 <ci id="S5.T3.9.9.9.9.9.9.9.9.1.m1.1.1.cmml" xref="S5.T3.9.9.9.9.9.9.9.9.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.9.9.9.9.9.9.9.9.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.9.9.9.9.9.9.9.9.2">
              <span class="ltx_text ltx_font_italic" id="S5.T3.9.9.9.9.9.9.9.9.2.1">
               ACT
              </span>
              (ours)
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.9.9.9.9.9.9.9.9.3">
              100
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.9.9.9.9.9.9.9.9.4">
              <span class="ltx_text ltx_font_bold" id="S5.T3.9.9.9.9.9.9.9.9.4.1">
               99.2
              </span>
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.9.9.9.9.9.9.9.9.5">
              <span class="ltx_text ltx_font_bold" id="S5.T3.9.9.9.9.9.9.9.9.5.1">
               48.0
              </span>
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.9.9.9.9.9.9.9.9.6">
              <span class="ltx_text ltx_font_bold" id="S5.T3.9.9.9.9.9.9.9.9.6.1">
               49.6
              </span>
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.10.10.10.10.10.10.10.10">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.10.10.10.10.10.10.10.10.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.10.10.10.10.10.10.10.10.1.m1.1">
               <semantics id="S5.T3.10.10.10.10.10.10.10.10.1.m1.1a">
                <mi id="S5.T3.10.10.10.10.10.10.10.10.1.m1.1.1" xref="S5.T3.10.10.10.10.10.10.10.10.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.10.10.10.10.10.10.10.10.1.m1.1b">
                 <ci id="S5.T3.10.10.10.10.10.10.10.10.1.m1.1.1.cmml" xref="S5.T3.10.10.10.10.10.10.10.10.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.10.10.10.10.10.10.10.10.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.10.10.10.10.10.10.10.10.2">
              SFT
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T3.10.10.10.10.10.10.10.10.3">
              250
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.10.10.10.10.10.10.4">
              99.8
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="S5.T3.10.10.10.10.10.10.10.10.5">
              51.0
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="S5.T3.10.10.10.10.10.10.10.10.6">
              50.7
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.11.11.11.11.11.11.11.11">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.11.11.11.11.11.11.11.11.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.11.11.11.11.11.11.11.11.1.m1.1">
               <semantics id="S5.T3.11.11.11.11.11.11.11.11.1.m1.1a">
                <mi id="S5.T3.11.11.11.11.11.11.11.11.1.m1.1.1" xref="S5.T3.11.11.11.11.11.11.11.11.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.11.11.11.11.11.11.11.11.1.m1.1b">
                 <ci id="S5.T3.11.11.11.11.11.11.11.11.1.m1.1.1.cmml" xref="S5.T3.11.11.11.11.11.11.11.11.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.11.11.11.11.11.11.11.11.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.11.11.11.11.11.11.11.11.2">
              Naive DPO
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.11.11.11.11.11.11.11.11.3">
              250
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.11.11.11.11.11.11.11.11.4">
              99.9
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.11.11.11.11.11.11.11.11.5">
              47.0
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.11.11.11.11.11.11.11.11.6">
              47.6
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.12.12.12.12.12.12.12.12">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.12.12.12.12.12.12.12.12.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.12.12.12.12.12.12.12.12.1.m1.1">
               <semantics id="S5.T3.12.12.12.12.12.12.12.12.1.m1.1a">
                <mi id="S5.T3.12.12.12.12.12.12.12.12.1.m1.1.1" xref="S5.T3.12.12.12.12.12.12.12.12.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.12.12.12.12.12.12.12.12.1.m1.1b">
                 <ci id="S5.T3.12.12.12.12.12.12.12.12.1.m1.1.1.cmml" xref="S5.T3.12.12.12.12.12.12.12.12.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.12.12.12.12.12.12.12.12.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.12.12.12.12.12.12.12.12.2">
              <span class="ltx_text ltx_font_italic" id="S5.T3.12.12.12.12.12.12.12.12.2.1">
               ACT
              </span>
              (ours)
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T3.12.12.12.12.12.12.12.12.3">
              250
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.12.12.12.12.12.12.12.12.4">
              <span class="ltx_text ltx_font_bold" id="S5.T3.12.12.12.12.12.12.12.12.4.1">
               99.9
              </span>
             </span>
             <span class="ltx_td ltx_align_center" id="S5.T3.12.12.12.12.12.12.12.12.5">
              <span class="ltx_text ltx_font_bold" id="S5.T3.12.12.12.12.12.12.12.12.5.1">
               52.3
              </span>
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center" id="S5.T3.12.12.12.12.12.12.12.12.6">
              <span class="ltx_text ltx_font_bold" id="S5.T3.12.12.12.12.12.12.12.12.6.1">
               53.0
              </span>
             </span>
            </span>
            <span class="ltx_tr" id="S5.T3.13.13.13.13.13.13.13.13">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.13.1">
              Zephyr 7B-
              <math alttext="\beta" class="ltx_Math" display="inline" id="S5.T3.13.13.13.13.13.13.13.13.1.m1.1">
               <semantics id="S5.T3.13.13.13.13.13.13.13.13.1.m1.1a">
                <mi id="S5.T3.13.13.13.13.13.13.13.13.1.m1.1.1" xref="S5.T3.13.13.13.13.13.13.13.13.1.m1.1.1.cmml">
                 β
                </mi>
                <annotation-xml encoding="MathML-Content" id="S5.T3.13.13.13.13.13.13.13.13.1.m1.1b">
                 <ci id="S5.T3.13.13.13.13.13.13.13.13.1.m1.1.1.cmml" xref="S5.T3.13.13.13.13.13.13.13.13.1.m1.1.1">
                  𝛽
                 </ci>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T3.13.13.13.13.13.13.13.13.1.m1.1c">
                 \beta
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.13.2">
              SFT
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.13.3">
              14,000 (All Conversations)
             </span>
             <span class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.13.4">
              99.8
             </span>
             <span class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.13.5">
              63.1
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_bb ltx_border_t" id="S5.T3.13.13.13.13.13.13.13.13.6">
              60.4
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
   </figure>
  </section>
  <section class="ltx_subsection" id="S5.SS4">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     5.4
    </span>
    Qualitative Examples
   </h3>
   <div class="ltx_para" id="S5.SS4.p1">
    <p class="ltx_p" id="S5.SS4.p1.1">
     In Table
     <a class="ltx_ref" href="#S5.T4" title="Table 4 ‣ 5.4 Qualitative Examples ‣ 5 Experimental Results ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       4
      </span>
     </a>
     we compare two trajectories produced by Zephyr 7B tuned on 50 conversations from PACIFIC using SFT and
     <span class="ltx_text ltx_font_italic" id="S5.SS4.p1.1.1">
      ACT
     </span>
     , respectively, given the same conversation context and tabular information. The SFT model provided an incorrect answer to the user request, matching the “Incorrect Assumption” case in Figure
     <a class="ltx_ref" href="#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     . In contrast, the model tuned using
     <span class="ltx_text ltx_font_italic" id="S5.SS4.p1.1.2">
      ACT
     </span>
     asked a clarifying question before eventually producing the correct answer. We provide additional qualitative examples in Appendix
     <a class="ltx_ref" href="#A8" title="Appendix H Additional Qualitative Examples ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       H
      </span>
     </a>
     .
    </p>
   </div>
   <figure class="ltx_table" id="S5.T4">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table 4:
     </span>
     <span class="ltx_text ltx_font_bold" id="S5.T4.6.1">
      Comparison of trajectories using different tuning approaches
     </span>
     . Left: snippet of tabular data from the PACIFIC test set. Middle: trajectory resulting from the SFT model in response to the user query. Right: trajectory resulting from the
     <span class="ltx_text ltx_font_italic" id="S5.T4.7.2">
      ACT
     </span>
     model. Red text: sampled from
     <math alttext="U" class="ltx_Math" display="inline" id="S5.T4.2.m1.1">
      <semantics id="S5.T4.2.m1.1b">
       <mi id="S5.T4.2.m1.1.1" xref="S5.T4.2.m1.1.1.cmml">
        U
       </mi>
       <annotation-xml encoding="MathML-Content" id="S5.T4.2.m1.1c">
        <ci id="S5.T4.2.m1.1.1.cmml" xref="S5.T4.2.m1.1.1">
         𝑈
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S5.T4.2.m1.1d">
        U
       </annotation>
      </semantics>
     </math>
     .
    </figcaption>
    <p class="ltx_p" id="S5.T4.3">
     <span class="ltx_text ltx_inline-block" id="S5.T4.3.1" style="width:433.6pt;">
      <span class="ltx_inline-block ltx_transformed_outer" id="S5.T4.3.1.1.1" style="width:608.6pt;height:91pt;vertical-align:-1.0pt;">
       <span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
        <span class="ltx_p" id="S5.T4.3.1.1.1.1">
         <span class="ltx_text" id="S5.T4.3.1.1.1.1.1">
          <span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S5.T4.3.1.1.1.1.1.1">
           <span class="ltx_tbody">
            <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.2.1">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_bb ltx_border_tt ltx_rowspan ltx_rowspan_5" id="S5.T4.3.1.1.1.1.1.1.2.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              <span class="ltx_text" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1">
               <span class="ltx_tabular ltx_align_middle" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1">
                <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.1">
                 <span class="ltx_td ltx_nopad_r ltx_align_left" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                  <span class="ltx_text ltx_font_bold" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.1.1.1">
                   Relevant Table Data
                  </span>
                 </span>
                </span>
                <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.2">
                 <span class="ltx_td ltx_nopad_r ltx_align_left" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                  Year: 2019 || 2018
                 </span>
                </span>
                <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.3">
                 <span class="ltx_td ltx_nopad_r ltx_align_left" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.3.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                  Total current liabilities : 851 || 167
                 </span>
                </span>
                <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.4">
                 <span class="ltx_td ltx_nopad_r ltx_align_left" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.4.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                  Other noncurrent liabilities : 5 || 74
                 </span>
                </span>
                <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.5">
                 <span class="ltx_td ltx_nopad_r ltx_align_left" id="S5.T4.3.1.1.1.1.1.1.2.1.1.1.1.5.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                  Total Liabilities: $909 || $1,305
                 </span>
                </span>
               </span>
              </span>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="S5.T4.3.1.1.1.1.1.1.2.1.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              <span class="ltx_text ltx_font_bold" id="S5.T4.3.1.1.1.1.1.1.2.1.2.1">
               SFT
              </span>
             </span>
             <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="S5.T4.3.1.1.1.1.1.1.2.1.3" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              <span class="ltx_text ltx_font_bold" id="S5.T4.3.1.1.1.1.1.1.2.1.3.1">
               ACT
              </span>
             </span>
            </span>
            <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.3.2">
             <span class="ltx_td ltx_align_left ltx_border_t" id="S5.T4.3.1.1.1.1.1.1.3.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              User: What were the total liabilities of IMFT?
             </span>
             <span class="ltx_td ltx_align_left ltx_border_t" id="S5.T4.3.1.1.1.1.1.1.3.2.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              User: What were the total liabilities of IMFT?
             </span>
            </span>
            <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.1">
             <span class="ltx_td ltx_align_left" id="S5.T4.3.1.1.1.1.1.1.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              Assistant:
              <span class="ltx_text ltx_font_italic" id="S5.T4.3.1.1.1.1.1.1.1.1.1">
               $909
              </span>
              <math alttext="\times" class="ltx_Math" display="inline" id="S5.T4.3.1.1.1.1.1.1.1.1.m1.1">
               <semantics id="S5.T4.3.1.1.1.1.1.1.1.1.m1.1a">
                <mo id="S5.T4.3.1.1.1.1.1.1.1.1.m1.1.1" xref="S5.T4.3.1.1.1.1.1.1.1.1.m1.1.1.cmml">
                 ×
                </mo>
                <annotation-xml encoding="MathML-Content" id="S5.T4.3.1.1.1.1.1.1.1.1.m1.1b">
                 <times id="S5.T4.3.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S5.T4.3.1.1.1.1.1.1.1.1.m1.1.1">
                 </times>
                </annotation-xml>
                <annotation encoding="application/x-tex" id="S5.T4.3.1.1.1.1.1.1.1.1.m1.1c">
                 \times
                </annotation>
               </semantics>
              </math>
             </span>
             <span class="ltx_td ltx_align_left" id="S5.T4.3.1.1.1.1.1.1.1.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              Assistant: Which year are you asking about?
             </span>
            </span>
            <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.4.3">
             <span class="ltx_td" id="S5.T4.3.1.1.1.1.1.1.4.3.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             </span>
             <span class="ltx_td ltx_align_left" id="S5.T4.3.1.1.1.1.1.1.4.3.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              <span class="ltx_text" id="S5.T4.3.1.1.1.1.1.1.4.3.2.1" style="color:#FF0000;">
               User: 2018
              </span>
             </span>
            </span>
            <span class="ltx_tr" id="S5.T4.3.1.1.1.1.1.1.5.4">
             <span class="ltx_td ltx_border_bb" id="S5.T4.3.1.1.1.1.1.1.5.4.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             </span>
             <span class="ltx_td ltx_align_left ltx_border_bb" id="S5.T4.3.1.1.1.1.1.1.5.4.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
              Assistant:
              <span class="ltx_text ltx_font_italic" id="S5.T4.3.1.1.1.1.1.1.5.4.2.1">
               $1,305
              </span>
              ✓
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
   </figure>
  </section>
  <section class="ltx_subsection" id="S5.SS5">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     5.5
    </span>
    Ablation Studies
   </h3>
   <figure class="ltx_table" id="S5.T5">
    <figcaption class="ltx_caption" style="font-size:90%;">
     <span class="ltx_tag ltx_tag_table">
      Table 5:
     </span>
     <span class="ltx_text ltx_font_bold" id="S5.T5.8.1">
      Ablation study of various conditions
     </span>
     using PACIFIC’s 50 conversation setting.
    </figcaption>
    <div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="S5.T5.4" style="width:313.7pt;height:216pt;vertical-align:-0.0pt;">
     <span class="ltx_transformed_inner" style="transform:translate(-39.2pt,27.0pt) scale(0.8,0.8) ;">
      <table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S5.T5.4.4">
       <tbody class="ltx_tbody">
        <tr class="ltx_tr" id="S5.T5.4.4.4">
         <th class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="S5.T5.4.4.4.5">
         </th>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T5.1.1.1.1">
          <span class="ltx_text" id="S5.T5.1.1.1.1.1" style="font-size:90%;">
           Macro F1
          </span>
          <math alttext="\uparrow" class="ltx_Math" display="inline" id="S5.T5.1.1.1.1.m1.1">
           <semantics id="S5.T5.1.1.1.1.m1.1a">
            <mo id="S5.T5.1.1.1.1.m1.1.1" mathsize="90%" stretchy="false" xref="S5.T5.1.1.1.1.m1.1.1.cmml">
             ↑
            </mo>
            <annotation-xml encoding="MathML-Content" id="S5.T5.1.1.1.1.m1.1b">
             <ci id="S5.T5.1.1.1.1.m1.1.1.cmml" xref="S5.T5.1.1.1.1.m1.1.1">
              ↑
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="S5.T5.1.1.1.1.m1.1c">
             \uparrow
            </annotation>
           </semantics>
          </math>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T5.2.2.2.2">
          <span class="ltx_text" id="S5.T5.2.2.2.2.1" style="font-size:90%;">
           Turn F1
          </span>
          <math alttext="\uparrow" class="ltx_Math" display="inline" id="S5.T5.2.2.2.2.m1.1">
           <semantics id="S5.T5.2.2.2.2.m1.1a">
            <mo id="S5.T5.2.2.2.2.m1.1.1" mathsize="90%" stretchy="false" xref="S5.T5.2.2.2.2.m1.1.1.cmml">
             ↑
            </mo>
            <annotation-xml encoding="MathML-Content" id="S5.T5.2.2.2.2.m1.1b">
             <ci id="S5.T5.2.2.2.2.m1.1.1.cmml" xref="S5.T5.2.2.2.2.m1.1.1">
              ↑
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="S5.T5.2.2.2.2.m1.1c">
             \uparrow
            </annotation>
           </semantics>
          </math>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T5.3.3.3.3">
          <span class="ltx_text" id="S5.T5.3.3.3.3.1" style="font-size:90%;">
           Traj. F1
          </span>
          <math alttext="\uparrow" class="ltx_Math" display="inline" id="S5.T5.3.3.3.3.m1.1">
           <semantics id="S5.T5.3.3.3.3.m1.1a">
            <mo id="S5.T5.3.3.3.3.m1.1.1" mathsize="90%" stretchy="false" xref="S5.T5.3.3.3.3.m1.1.1.cmml">
             ↑
            </mo>
            <annotation-xml encoding="MathML-Content" id="S5.T5.3.3.3.3.m1.1b">
             <ci id="S5.T5.3.3.3.3.m1.1.1.cmml" xref="S5.T5.3.3.3.3.m1.1.1">
              ↑
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="S5.T5.3.3.3.3.m1.1c">
             \uparrow
            </annotation>
           </semantics>
          </math>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_tt" id="S5.T5.4.4.4.4">
          <span class="ltx_text" id="S5.T5.4.4.4.4.1" style="font-size:90%;">
           Post-Clarify F1
          </span>
          <math alttext="\uparrow" class="ltx_Math" display="inline" id="S5.T5.4.4.4.4.m1.1">
           <semantics id="S5.T5.4.4.4.4.m1.1a">
            <mo id="S5.T5.4.4.4.4.m1.1.1" mathsize="90%" stretchy="false" xref="S5.T5.4.4.4.4.m1.1.1.cmml">
             ↑
            </mo>
            <annotation-xml encoding="MathML-Content" id="S5.T5.4.4.4.4.m1.1b">
             <ci id="S5.T5.4.4.4.4.m1.1.1.cmml" xref="S5.T5.4.4.4.4.m1.1.1">
              ↑
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="S5.T5.4.4.4.4.m1.1c">
             \uparrow
            </annotation>
           </semantics>
          </math>
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.5.1">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="5" id="S5.T5.4.4.5.1.1">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.5.1.1.1" style="font-size:90%;">
           Action Importance
          </span>
         </th>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.6.2">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T5.4.4.6.2.1">
          <span class="ltx_text ltx_font_italic" id="S5.T5.4.4.6.2.1.1" style="font-size:90%;">
           ACT
          </span>
         </th>
         <td class="ltx_td ltx_border_t" id="S5.T5.4.4.6.2.2">
         </td>
         <td class="ltx_td ltx_border_t" id="S5.T5.4.4.6.2.3">
         </td>
         <td class="ltx_td ltx_border_t" id="S5.T5.4.4.6.2.4">
         </td>
         <td class="ltx_td ltx_border_t" id="S5.T5.4.4.6.2.5">
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.7.3">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.4.4.7.3.1">
          <span class="ltx_text" id="S5.T5.4.4.7.3.1.1" style="font-size:90%;">
           w/ Random Actions
          </span>
         </th>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.7.3.2">
          <span class="ltx_text" id="S5.T5.4.4.7.3.2.1" style="font-size:90%;">
           63.2
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.7.3.3">
          <span class="ltx_text" id="S5.T5.4.4.7.3.3.1" style="font-size:90%;">
           55.3
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.7.3.4">
          <span class="ltx_text" id="S5.T5.4.4.7.3.4.1" style="font-size:90%;">
           58.7
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.7.3.5">
          <span class="ltx_text" id="S5.T5.4.4.7.3.5.1" style="font-size:90%;">
           32.8
          </span>
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.8.4">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="5" id="S5.T5.4.4.8.4.1">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.8.4.1.1" style="font-size:90%;">
           Ablation of
           <span class="ltx_text ltx_font_italic" id="S5.T5.4.4.8.4.1.1.1">
            ACT
           </span>
           subcomponents
          </span>
         </th>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.9.5">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T5.4.4.9.5.1">
          <span class="ltx_text ltx_font_italic" id="S5.T5.4.4.9.5.1.1" style="font-size:90%;">
           ACT
          </span>
         </th>
         <td class="ltx_td ltx_border_t" id="S5.T5.4.4.9.5.2">
         </td>
         <td class="ltx_td ltx_border_t" id="S5.T5.4.4.9.5.3">
         </td>
         <td class="ltx_td ltx_border_t" id="S5.T5.4.4.9.5.4">
         </td>
         <td class="ltx_td ltx_border_t" id="S5.T5.4.4.9.5.5">
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.10.6">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.4.4.10.6.1">
          <span class="ltx_text" id="S5.T5.4.4.10.6.1.1" style="font-size:90%;">
           w/o on-policy sampling
          </span>
         </th>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.10.6.2">
          <span class="ltx_text" id="S5.T5.4.4.10.6.2.1" style="font-size:90%;">
           74.8
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.10.6.3">
          <span class="ltx_text" id="S5.T5.4.4.10.6.3.1" style="font-size:90%;">
           61.5
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.10.6.4">
          <span class="ltx_text" id="S5.T5.4.4.10.6.4.1" style="font-size:90%;">
           59.1
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.10.6.5">
          <span class="ltx_text" id="S5.T5.4.4.10.6.5.1" style="font-size:90%;">
           40.5
          </span>
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.11.7">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.4.4.11.7.1">
          <span class="ltx_text ltx_font_italic" id="S5.T5.4.4.11.7.1.1" style="font-size:90%;">
           ACT
          </span>
         </th>
         <td class="ltx_td" id="S5.T5.4.4.11.7.2">
         </td>
         <td class="ltx_td" id="S5.T5.4.4.11.7.3">
         </td>
         <td class="ltx_td" id="S5.T5.4.4.11.7.4">
         </td>
         <td class="ltx_td" id="S5.T5.4.4.11.7.5">
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.12.8">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.4.4.12.8.1">
          <span class="ltx_text" id="S5.T5.4.4.12.8.1.1" style="font-size:90%;">
           w/ sampling but w/o simulation
          </span>
         </th>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.12.8.2">
          <span class="ltx_text" id="S5.T5.4.4.12.8.2.1" style="font-size:90%;">
           81.4
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.12.8.3">
          <span class="ltx_text" id="S5.T5.4.4.12.8.3.1" style="font-size:90%;">
           60.8
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.12.8.4">
          <span class="ltx_text" id="S5.T5.4.4.12.8.4.1" style="font-size:90%;">
           60.2
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.12.8.5">
          <span class="ltx_text" id="S5.T5.4.4.12.8.5.1" style="font-size:90%;">
           50.1
          </span>
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.13.9">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.4.4.13.9.1">
          <span class="ltx_text ltx_font_italic" id="S5.T5.4.4.13.9.1.1" style="font-size:90%;">
           ACT
          </span>
          <span class="ltx_text" id="S5.T5.4.4.13.9.1.2" style="font-size:90%;">
           (full)
          </span>
         </th>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.13.9.2">
          <span class="ltx_text" id="S5.T5.4.4.13.9.2.1" style="font-size:90%;">
           82.2
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.13.9.3">
          <span class="ltx_text" id="S5.T5.4.4.13.9.3.1" style="font-size:90%;">
           62.8
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.13.9.4">
          <span class="ltx_text" id="S5.T5.4.4.13.9.4.1" style="font-size:90%;">
           61.9
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.13.9.5">
          <span class="ltx_text" id="S5.T5.4.4.13.9.5.1" style="font-size:90%;">
           57.2
          </span>
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.14.10">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" colspan="5" id="S5.T5.4.4.14.10.1">
          <span class="ltx_text ltx_font_bold ltx_font_italic" id="S5.T5.4.4.14.10.1.1" style="font-size:90%;">
           ACT
           <span class="ltx_text ltx_font_upright" id="S5.T5.4.4.14.10.1.1.1">
            with unaligned foundation models
           </span>
          </span>
         </th>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.15.11">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T5.4.4.15.11.1">
          <span class="ltx_text" id="S5.T5.4.4.15.11.1.1" style="font-size:90%;">
           Gemma 2B SFT
          </span>
         </th>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.4.15.11.2">
          <span class="ltx_text" id="S5.T5.4.4.15.11.2.1" style="font-size:90%;">
           57.7
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.4.15.11.3">
          <span class="ltx_text" id="S5.T5.4.4.15.11.3.1" style="font-size:90%;">
           38.0
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.4.15.11.4">
          <span class="ltx_text" id="S5.T5.4.4.15.11.4.1" style="font-size:90%;">
           40.5
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.4.15.11.5">
          <span class="ltx_text" id="S5.T5.4.4.15.11.5.1" style="font-size:90%;">
           17.0
          </span>
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.16.12">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S5.T5.4.4.16.12.1">
          <span class="ltx_text" id="S5.T5.4.4.16.12.1.1" style="font-size:90%;">
           Gemma 2B ACT
          </span>
         </th>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.16.12.2">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.16.12.2.1" style="font-size:90%;">
           62.7
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.16.12.3">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.16.12.3.1" style="font-size:90%;">
           42.6
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.16.12.4">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.16.12.4.1" style="font-size:90%;">
           44.0
          </span>
         </td>
         <td class="ltx_td ltx_align_center" id="S5.T5.4.4.16.12.5">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.16.12.5.1" style="font-size:90%;">
           24.8
          </span>
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.17.13">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S5.T5.4.4.17.13.1">
          <span class="ltx_text" id="S5.T5.4.4.17.13.1.1" style="font-size:90%;">
           Mistral 7B SFT
          </span>
         </th>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.4.17.13.2">
          <span class="ltx_text" id="S5.T5.4.4.17.13.2.1" style="font-size:90%;">
           57.7
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.4.17.13.3">
          <span class="ltx_text" id="S5.T5.4.4.17.13.3.1" style="font-size:90%;">
           53.8
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.4.17.13.4">
          <span class="ltx_text" id="S5.T5.4.4.17.13.4.1" style="font-size:90%;">
           51.4
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_t" id="S5.T5.4.4.17.13.5">
          <span class="ltx_text" id="S5.T5.4.4.17.13.5.1" style="font-size:90%;">
           27.7
          </span>
         </td>
        </tr>
        <tr class="ltx_tr" id="S5.T5.4.4.18.14">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S5.T5.4.4.18.14.1">
          <span class="ltx_text" id="S5.T5.4.4.18.14.1.1" style="font-size:90%;">
           Mistral 7B ACT
          </span>
         </th>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T5.4.4.18.14.2">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.18.14.2.1" style="font-size:90%;">
           75.7
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T5.4.4.18.14.3">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.18.14.3.1" style="font-size:90%;">
           58.1
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T5.4.4.18.14.4">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.18.14.4.1" style="font-size:90%;">
           57.6
          </span>
         </td>
         <td class="ltx_td ltx_align_center ltx_border_bb" id="S5.T5.4.4.18.14.5">
          <span class="ltx_text ltx_font_bold" id="S5.T5.4.4.18.14.5.1" style="font-size:90%;">
           31.9
          </span>
         </td>
        </tr>
       </tbody>
      </table>
     </span>
    </div>
   </figure>
   <section class="ltx_paragraph" id="S5.SS5.SSS0.Px1">
    <h5 class="ltx_title ltx_title_paragraph">
     Are action-based preferences necessary?
    </h5>
    <div class="ltx_para" id="S5.SS5.SSS0.Px1.p1">
     <p class="ltx_p" id="S5.SS5.SSS0.Px1.p1.1">
      One of the key factors of
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px1.p1.1.1">
       ACT
      </span>
      is that all of the contrastive pairs highlight differences between pragmatic actions (e.g. asking a question versus providing an answer). As indicated in the main results (Tables
      <a class="ltx_ref" href="#S4.T1" title="Table 1 ‣ 4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        1
       </span>
      </a>
      ,
      <a class="ltx_ref" href="#S4.T2" title="Table 2 ‣ Implicit Ambiguity Recognition ‣ 4.2 Evaluation ‣ 4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        2
       </span>
      </a>
      ,
      <a class="ltx_ref" href="#S5.T3" title="Table 3 ‣ 5.3 Conversational Text-to-SQL Generation ‣ 5 Experimental Results ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        3
       </span>
      </a>
      ), we see that Naive DPO (i.e., when we sample preference pairings from LLMs without action specification) underperforms
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px1.p1.1.2">
       ACT
      </span>
      . In Table
      <a class="ltx_ref" href="#S5.T5" title="Table 5 ‣ 5.5 Ablation Studies ‣ 5 Experimental Results ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        5
       </span>
      </a>
      , we additionally examine the importance of action selection by randomly sampling
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px1.p1.1.3">
       both the winning and losing action
      </span>
      when constructing the preference pair, and observe this underperforms normal
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px1.p1.1.4">
       ACT
      </span>
      .
     </p>
    </div>
   </section>
   <section class="ltx_paragraph" id="S5.SS5.SSS0.Px2">
    <h5 class="ltx_title ltx_title_paragraph">
     Do we need on-policy sampling?
    </h5>
    <div class="ltx_para" id="S5.SS5.SSS0.Px2.p1">
     <p class="ltx_p" id="S5.SS5.SSS0.Px2.p1.1">
      In Table
      <a class="ltx_ref" href="#S5.T5" title="Table 5 ‣ 5.5 Ablation Studies ‣ 5 Experimental Results ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        5
       </span>
      </a>
      , we also consider whether it is sufficient to remove sampling altogether, i.e. using the normal DPO algorithm on the action-based preference dataset as constructed in Section
      <a class="ltx_ref" href="#S3.SS2.SSS1" title="3.2.1 Construction of Preference Data ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        3.2.1
       </span>
      </a>
      . While we do observe some improvements over SFT (e.g., from 69.0 to 74.8 in terms of Macro F1 and from 57.8 to 61.5 in terms of turn-level DROP F1), the overall improvements are much larger when using on-policy sampling as with full
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px2.p1.1.1">
       ACT
      </span>
      . This may be due to the fact that the LLM-sampled negative responses are not guaranteed to lie within the language manifold of the tuned policy model, making the training example too “easy.” Similarly, distribution shift is the key motivating factor the proposed online variant of DPO in
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib42" title="">
        42
       </a>
       ]
      </cite>
      .
     </p>
    </div>
   </section>
   <section class="ltx_paragraph" id="S5.SS5.SSS0.Px3">
    <h5 class="ltx_title ltx_title_paragraph">
     Is trajectory simulation necessary?
    </h5>
    <div class="ltx_para" id="S5.SS5.SSS0.Px3.p1">
     <p class="ltx_p" id="S5.SS5.SSS0.Px3.p1.1">
      We propose
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px3.p1.1.1">
       ACT
      </span>
      as an approach which is better-aligned with multi-turn conversations due to its trajectory-level simulation from the policy model. In Table
      <a class="ltx_ref" href="#S5.T5" title="Table 5 ‣ 5.5 Ablation Studies ‣ 5 Experimental Results ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        5
       </span>
      </a>
      , we find that removing trajectory-level simulation (while including on-policy response sampling for the purpose of determining pragmatic-level actions) results in degraded performance in terms of post-clarification DROP F1. This indicates that the model is better able to reason about its own clarification questions when tuned with trajectory-level simulation. We do note that this condition does outperform both SFT and
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px3.p1.1.2">
       ACT
      </span>
      without any sampling (particularly in terms of Macro F1).
     </p>
    </div>
   </section>
   <section class="ltx_paragraph" id="S5.SS5.SSS0.Px4">
    <h5 class="ltx_title ltx_title_paragraph">
     How much does pre-aligning the initial policy model help?
    </h5>
    <div class="ltx_para" id="S5.SS5.SSS0.Px4.p1">
     <p class="ltx_p" id="S5.SS5.SSS0.Px4.p1.1">
      In all of our experiments with
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px4.p1.1.1">
       ACT
      </span>
      , we used Zephyr 7B-
      <math alttext="\beta" class="ltx_Math" display="inline" id="S5.SS5.SSS0.Px4.p1.1.m1.1">
       <semantics id="S5.SS5.SSS0.Px4.p1.1.m1.1a">
        <mi id="S5.SS5.SSS0.Px4.p1.1.m1.1.1" xref="S5.SS5.SSS0.Px4.p1.1.m1.1.1.cmml">
         β
        </mi>
        <annotation-xml encoding="MathML-Content" id="S5.SS5.SSS0.Px4.p1.1.m1.1b">
         <ci id="S5.SS5.SSS0.Px4.p1.1.m1.1.1.cmml" xref="S5.SS5.SSS0.Px4.p1.1.m1.1.1">
          𝛽
         </ci>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="S5.SS5.SSS0.Px4.p1.1.m1.1c">
         \beta
        </annotation>
       </semantics>
      </math>
      , a version of Mistral 7B which has already been aligned with DPO. In Table
      <a class="ltx_ref" href="#S5.T5" title="Table 5 ‣ 5.5 Ablation Studies ‣ 5 Experimental Results ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        5
       </span>
      </a>
      we also examine the impact of directly tuning two base foundation models, Mistral 7B and Gemma 2B. Directly comparing the baseline SFT performance with Mistral 7B against Zephyr 7B (see Table
      <a class="ltx_ref" href="#S4.T1" title="Table 1 ‣ 4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
       <span class="ltx_text ltx_ref_tag">
        1
       </span>
      </a>
      ), we can see there is already a noticeable gap in all metrics. After applying
      <span class="ltx_text ltx_font_italic" id="S5.SS5.SSS0.Px4.p1.1.2">
       ACT
      </span>
      , while Mistral 7B’s performance does improve, it does not achieve the same performance as Zephyr.
     </p>
    </div>
   </section>
  </section>
  <section class="ltx_subsection" id="S5.SS6">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     5.6
    </span>
    Limitations
   </h3>
   <div class="ltx_para" id="S5.SS6.p1">
    <p class="ltx_p" id="S5.SS6.p1.1">
     The biggest limitation of our work is that we assume: i) the labeled clarification need of each dataset is objective; ii) the clarification questions are appropriate; and iii) the eventual answers are the ground truth. However, depending on the dataset, this can be a faulty assumption. Crowdsourced conversation datasets are often noisy
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib24" title="">
       24
      </a>
      ]
     </cite>
     , and relying on noisy annotations or token sequences can result in suboptimal learned policies (from the perspective of asking unnecessary clarifying questions, as well as generating disfluent language). We discuss further limitations in Appendix
     <a class="ltx_ref" href="#A1.SS1" title="A.1 Additional Discussion of Limitations ‣ Appendix A Additional Limitations, Ethical Considerations, and Broader Impacts ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A.1
      </span>
     </a>
     .
    </p>
   </div>
  </section>
 </section>
 <section class="ltx_section" id="S6">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    6
   </span>
   Conclusion
  </h2>
  <div class="ltx_para" id="S6.p1">
   <p class="ltx_p" id="S6.p1.1">
    In this work, we proposed
    <span class="ltx_text ltx_font_italic" id="S6.p1.1.1">
     ACT
    </span>
    , a quasi-online contrastive RL-tuning approach for sample-efficient conversational task adaptation, along with a workflow for evaluation of conversational agents.
How
    <span class="ltx_text ltx_font_italic" id="S6.p1.1.2">
     ACT
    </span>
    will generalize to large-scale data and multi-task environments warrants further study, but in this work we see encouraging evidence that it is highly effective for task adaptation in the limited data regime. Future work may also consider combining
    <span class="ltx_text ltx_font_italic" id="S6.p1.1.3">
     ACT
    </span>
    with existing sophisticated tuning approaches and task heuristics such as execution feedback for complex tasks like text-to-SQL generation.
   </p>
  </div>
 </section>
 <section class="ltx_bibliography" id="bib">
  <h2 class="ltx_title ltx_title_bibliography">
   References
  </h2>
  <ul class="ltx_biblist">
   <li class="ltx_bibitem" id="bib.bib1">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [1]
    </span>
    <span class="ltx_bibblock">
     Saleema Amershi, Dan Weld, Mihaela Vorvoreanu, Adam Fourney, Besmira Nushi, Penny Collisson, Jina Suh, Shamsi Iqbal, Paul N Bennett, Kori Inkpen, et al.
    </span>
    <span class="ltx_bibblock">
     Guidelines for human-ai interaction.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib1.1.1">
      Proceedings of the 2019 chi conference on human factors in computing systems
     </span>
     , pages 1–13, 2019.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib2">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [2]
    </span>
    <span class="ltx_bibblock">
     Oliver Lemon.
    </span>
    <span class="ltx_bibblock">
     Conversational interfaces.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib2.1.1">
      Data-Driven Methods for Adaptive Spoken Dialogue Systems: Computational Learning for Conversational Interfaces
     </span>
     , pages 1–4. Springer, 2012.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib3">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [3]
    </span>
    <span class="ltx_bibblock">
     Gemini Team, Rohan Anil, Sebastian Borgeaud, Yonghui Wu, Jean-Baptiste Alayrac, Jiahui Yu, Radu Soricut, Johan Schalkwyk, Andrew M Dai, Anja Hauth, et al.
    </span>
    <span class="ltx_bibblock">
     Gemini: a family of highly capable multimodal models.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib3.1.1">
      arXiv preprint arXiv:2312.11805
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib4">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [4]
    </span>
    <span class="ltx_bibblock">
     George Kingsley Zipf.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib4.1.1">
      Human behavior and the principle of least effort
     </span>
     .
    </span>
    <span class="ltx_bibblock">
     1949.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib5">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [5]
    </span>
    <span class="ltx_bibblock">
     Donald K Messer.
    </span>
    <span class="ltx_bibblock">
     Six common causes of ambiguity.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib5.1.1">
      Technical Writing Teacher
     </span>
     , 7(2):50–52, 1980.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib6">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [6]
    </span>
    <span class="ltx_bibblock">
     Pieter J Beers, Henny PA Boshuizen, Paul A Kirschner, and Wim H Gijselaers.
    </span>
    <span class="ltx_bibblock">
     Common ground, complex problems and decision making.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib6.1.1">
      Group decision and negotiation
     </span>
     , 15:529–556, 2006.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib7">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [7]
    </span>
    <span class="ltx_bibblock">
     Alisa Liu, Zhaofeng Wu, Julian Michael, Alane Suhr, Peter West, Alexander Koller, Swabha Swayamdipta, Noah A Smith, and Yejin Choi.
    </span>
    <span class="ltx_bibblock">
     We’re afraid language models aren’t modeling ambiguity.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib7.1.1">
      The 2023 Conference on Empirical Methods in Natural Language Processing
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib8">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [8]
    </span>
    <span class="ltx_bibblock">
     Long Ouyang, Jeffrey Wu, Xu Jiang, Diogo Almeida, Carroll Wainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, et al.
    </span>
    <span class="ltx_bibblock">
     Training language models to follow instructions with human feedback.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib8.1.1">
      Advances in neural information processing systems
     </span>
     , 35:27730–27744, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib9">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [9]
    </span>
    <span class="ltx_bibblock">
     Yang Deng, Wenqiang Lei, Minlie Huang, and Tat-Seng Chua.
    </span>
    <span class="ltx_bibblock">
     Goal awareness for conversational ai: proactivity, non-collaborativity, and beyond.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib9.1.1">
      Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 6: Tutorial Abstracts)
     </span>
     , pages 1–10, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib10">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [10]
    </span>
    <span class="ltx_bibblock">
     Paul F Christiano, Jan Leike, Tom Brown, Miljan Martic, Shane Legg, and Dario Amodei.
    </span>
    <span class="ltx_bibblock">
     Deep reinforcement learning from human preferences.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib10.1.1">
      Advances in neural information processing systems
     </span>
     , 30, 2017.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib11">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [11]
    </span>
    <span class="ltx_bibblock">
     Xingyao Wang, Zihan Wang, Jiateng Liu, Yangyi Chen, Lifan Yuan, Hao Peng, and Heng Ji.
    </span>
    <span class="ltx_bibblock">
     Mint: Evaluating llms in multi-turn interaction with tools and language feedback.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib11.1.1">
      The Twelfth International Conference on Learning Representations
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib12">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [12]
    </span>
    <span class="ltx_bibblock">
     Yuntao Bai, Andy Jones, Kamal Ndousse, Amanda Askell, Anna Chen, Nova DasSarma, Dawn Drain, Stanislav Fort, Deep Ganguli, Tom Henighan, et al.
    </span>
    <span class="ltx_bibblock">
     Training a helpful and harmless assistant with reinforcement learning from human feedback.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib12.1.1">
      arXiv preprint arXiv:2204.05862
     </span>
     , 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib13">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [13]
    </span>
    <span class="ltx_bibblock">
     Maximillian Chen, Alexandros Papangelis, Chenyang Tao, Andy Rosenbaum, Seokhwan Kim, Yang Liu, Zhou Yu, and Dilek Hakkani-Tur.
    </span>
    <span class="ltx_bibblock">
     Weakly supervised data augmentation through prompting for dialogue understanding.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib13.1.1">
      NeurIPS 2022 Workshop on Synthetic Data for Empowering ML Research
     </span>
     , 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib14">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [14]
    </span>
    <span class="ltx_bibblock">
     Guanting Dong, Hongyi Yuan, Keming Lu, Chengpeng Li, Mingfeng Xue, Dayiheng Liu, Wei Wang, Zheng Yuan, Chang Zhou, and Jingren Zhou.
    </span>
    <span class="ltx_bibblock">
     How abilities in large language models are affected by supervised fine-tuning data composition.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib14.1.1">
      arXiv preprint arXiv:2310.05492
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib15">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [15]
    </span>
    <span class="ltx_bibblock">
     Maximillian Chen, Alexandros Papangelis, Chenyang Tao, Seokhwan Kim, Andy Rosenbaum, Yang Liu, Zhou Yu, and Dilek Hakkani-Tur.
    </span>
    <span class="ltx_bibblock">
     Places: Prompting language models for social conversation synthesis.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib15.1.1">
      Findings of the Association for Computational Linguistics: EACL 2023
     </span>
     , pages 844–868, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib16">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [16]
    </span>
    <span class="ltx_bibblock">
     Rafael Rafailov, Archit Sharma, Eric Mitchell, Christopher D Manning, Stefano Ermon, and Chelsea Finn.
    </span>
    <span class="ltx_bibblock">
     Direct preference optimization: Your language model is secretly a reward model.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib16.1.1">
      Advances in Neural Information Processing Systems
     </span>
     , 36, 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib17">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [17]
    </span>
    <span class="ltx_bibblock">
     Yang Deng, Wenqiang Lei, Wenxuan Zhang, Wai Lam, and Tat-Seng Chua.
    </span>
    <span class="ltx_bibblock">
     PACIFIC: towards proactive conversational question answering over tabular and textual data in finance.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib17.1.1">
      Proceedings of the 2022 Conference on Empirical Methods in Natural Language Processing, EMNLP 2022
     </span>
     , 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib18">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [18]
    </span>
    <span class="ltx_bibblock">
     Maximillian Chen, Weiyan Shi, Feifan Yan, Ryan Hou, Jingwen Zhang, Saurav Sahay, and Zhou Yu.
    </span>
    <span class="ltx_bibblock">
     Seamlessly integrating factual information and social content with persuasive dialogue.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib18.1.1">
      Proceedings of the 2nd Conference of the Asia-Pacific Chapter of the Association for Computational Linguistics and the 12th International Joint Conference on Natural Language Processing (Volume 1: Long Papers)
     </span>
     , pages 399–413, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib19">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [19]
    </span>
    <span class="ltx_bibblock">
     Yun-Nung Chen, Asli Celikyilmaz, and Dilek Hakkani-Tur.
    </span>
    <span class="ltx_bibblock">
     Deep learning for dialogue systems.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib19.1.1">
      Proceedings of the 55th Annual Meeting of the Association for Computational Linguistics: Tutorial Abstracts
     </span>
     , pages 8–14, 2017.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib20">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [20]
    </span>
    <span class="ltx_bibblock">
     Kun Qian, Satwik Kottur, Ahmad Beirami, Shahin Shayandeh, Paul A Crook, Alborz Geramifard, Zhou Yu, and Chinnadhurai Sankar.
    </span>
    <span class="ltx_bibblock">
     Database search results disambiguation for task-oriented dialog systems.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib20.1.1">
      Proceedings of the 2022 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies
     </span>
     , pages 1158–1173, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib21">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [21]
    </span>
    <span class="ltx_bibblock">
     Zhou Yu.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib21.1.1">
      Situated intelligent interactive systems
     </span>
     .
    </span>
    <span class="ltx_bibblock">
     PhD thesis, Carnegie Mellon University, 2017.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib22">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [22]
    </span>
    <span class="ltx_bibblock">
     Tsung-Hsien Wen, Milica Gasic, Nikola Mrksic, Lina M Rojas-Barahona, Pei-Hao Su, Stefan Ultes, David Vandyke, and Steve Young.
    </span>
    <span class="ltx_bibblock">
     Conditional generation and snapshot learning in neural dialogue systems.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib22.1.1">
      arXiv preprint arXiv:1606.03352
     </span>
     , 2016.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib23">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [23]
    </span>
    <span class="ltx_bibblock">
     Nitish Shirish Keskar, Bryan McCann, Lav R Varshney, Caiming Xiong, and Richard Socher.
    </span>
    <span class="ltx_bibblock">
     Ctrl: A conditional transformer language model for controllable generation.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib23.1.1">
      arXiv preprint arXiv:1909.05858
     </span>
     , 2019.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib24">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [24]
    </span>
    <span class="ltx_bibblock">
     Maximillian Chen, Xiao Yu, Weiyan Shi, Urvi Awasthi, and Zhou Yu.
    </span>
    <span class="ltx_bibblock">
     Controllable mixed-initiative dialogue generation through prompting.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib24.1.1">
      Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 2: Short Papers)
     </span>
     , pages 951–966, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib25">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [25]
    </span>
    <span class="ltx_bibblock">
     Sihan Wang, Kaijie Zhou, Kunfeng Lai, and Jianping Shen.
    </span>
    <span class="ltx_bibblock">
     Task-completion dialogue policy learning via monte carlo tree search with dueling network.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib25.1.1">
      Proceedings of the 2020 conference on empirical methods in natural language processing (EMNLP)
     </span>
     , pages 3461–3471, 2020.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib26">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [26]
    </span>
    <span class="ltx_bibblock">
     Jingxuan Yang, Si Li, and Jun Guo.
    </span>
    <span class="ltx_bibblock">
     Multi-turn target-guided topic prediction with monte carlo tree search.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib26.1.1">
      Proceedings of the 18th International Conference on Natural Language Processing (ICON)
     </span>
     , pages 324–334, 2021.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib27">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [27]
    </span>
    <span class="ltx_bibblock">
     Xiao Yu, Maximillian Chen, and Zhou Yu.
    </span>
    <span class="ltx_bibblock">
     Prompt-based monte-carlo tree search for goal-oriented dialogue policy planning.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib27.1.1">
      Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing
     </span>
     , pages 7101–7125, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib28">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [28]
    </span>
    <span class="ltx_bibblock">
     M David Sadek.
    </span>
    <span class="ltx_bibblock">
     Dialogue acts are rational plans.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib28.1.1">
      The Structure of Multimodal Dialogue; Second VENACO Workshop
     </span>
     , 1991.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib29">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [29]
    </span>
    <span class="ltx_bibblock">
     Andreas Stolcke, Klaus Ries, Noah Coccaro, Elizabeth Shriberg, Rebecca Bates, Daniel Jurafsky, Paul Taylor, Rachel Martin, Carol Van Ess-Dykema, and Marie Meteer.
    </span>
    <span class="ltx_bibblock">
     Dialogue act modeling for automatic tagging and recognition of conversational speech.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib29.1.1">
      Computational linguistics
     </span>
     , 26(3):339–373, 2000.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib30">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [30]
    </span>
    <span class="ltx_bibblock">
     Qingyang Wu, James Gung, Raphael Shu, and Yi Zhang.
    </span>
    <span class="ltx_bibblock">
     Diacttod: Learning generalizable latent dialogue acts for controllable task-oriented dialogue systems.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib30.1.1">
      Proceedings of the 24th Annual Meeting of the Special Interest Group on Discourse and Dialogue
     </span>
     , pages 255–267, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib31">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [31]
    </span>
    <span class="ltx_bibblock">
     Dian Yu and Zhou Yu.
    </span>
    <span class="ltx_bibblock">
     Midas: A dialog act annotation scheme for open domain humanmachine spoken conversations.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib31.1.1">
      Proceedings of the 16th Conference of the European Chapter of the Association for Computational Linguistics: Main Volume
     </span>
     . Association for Computational Linguistics, 2021.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib32">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [32]
    </span>
    <span class="ltx_bibblock">
     Yi Cheng, Wenge Liu, Wenjie Li, Jiashuo Wang, Ruihui Zhao, Bang Liu, Xiaodan Liang, and Yefeng Zheng.
    </span>
    <span class="ltx_bibblock">
     Improving multi-turn emotional support dialogue generation with lookahead strategy planning.
    </span>
    <span class="ltx_bibblock">
     In Yoav Goldberg, Zornitsa Kozareva, and Yue Zhang, editors,
     <span class="ltx_text ltx_font_italic" id="bib.bib32.1.1">
      Proceedings of the 2022 Conference on Empirical Methods in Natural Language Processing
     </span>
     , pages 3014–3026, Abu Dhabi, United Arab Emirates, December 2022. Association for Computational Linguistics.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib33">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [33]
    </span>
    <span class="ltx_bibblock">
     Dirk Väth, Lindsey Vanderlyn, and Ngoc Thang Vu.
    </span>
    <span class="ltx_bibblock">
     Conversational tree search: A new hybrid dialog task.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib33.1.1">
      Proceedings of the 17th Conference of the European Chapter of the Association for Computational Linguistics
     </span>
     , pages 1264–1280, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib34">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [34]
    </span>
    <span class="ltx_bibblock">
     Yang Deng, Wenxuan Zhang, Wai Lam, See-Kiong Ng, and Tat-Seng Chua.
    </span>
    <span class="ltx_bibblock">
     Plug-and-play policy planner for large language model powered dialogue agents.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib34.1.1">
      The Twelfth International Conference on Learning Representations
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib35">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [35]
    </span>
    <span class="ltx_bibblock">
     Sihan Wang, Kaijie Zhou, Kunfeng Lai, and Jianping Shen.
    </span>
    <span class="ltx_bibblock">
     Task-completion dialogue policy learning via Monte Carlo tree search with dueling network.
    </span>
    <span class="ltx_bibblock">
     In Bonnie Webber, Trevor Cohn, Yulan He, and Yang Liu, editors,
     <span class="ltx_text ltx_font_italic" id="bib.bib35.1.1">
      Proceedings of the 2020 Conference on Empirical Methods in Natural Language Processing (EMNLP)
     </span>
     , pages 3461–3471, Online, November 2020. Association for Computational Linguistics.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib36">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [36]
    </span>
    <span class="ltx_bibblock">
     Lewis Tunstall, Edward Beeching, Nathan Lambert, Nazneen Rajani, Kashif Rasul, Younes Belkada, Shengyi Huang, Leandro von Werra, Clémentine Fourrier, Nathan Habib, et al.
    </span>
    <span class="ltx_bibblock">
     Zephyr: Direct distillation of lm alignment.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib36.1.1">
      arXiv preprint arXiv:2310.16944
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib37">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [37]
    </span>
    <span class="ltx_bibblock">
     Harrison Lee, Samrat Phatale, Hassan Mansoor, Kellie Lu, Thomas Mesnard, Colton Bishop, Victor Carbune, and Abhinav Rastogi.
    </span>
    <span class="ltx_bibblock">
     Rlaif: Scaling reinforcement learning from human feedback with ai feedback.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib37.1.1">
      arXiv preprint arXiv:2309.00267
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib38">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [38]
    </span>
    <span class="ltx_bibblock">
     Yao Zhao, Rishabh Joshi, Tianqi Liu, Misha Khalman, Mohammad Saleh, and Peter J Liu.
    </span>
    <span class="ltx_bibblock">
     Slic-hf: Sequence likelihood calibration with human feedback.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib38.1.1">
      arXiv preprint arXiv:2305.10425
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib39">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [39]
    </span>
    <span class="ltx_bibblock">
     Mohammad Gheshlaghi Azar, Zhaohan Daniel Guo, Bilal Piot, Remi Munos, Mark Rowland, Michal Valko, and Daniele Calandriello.
    </span>
    <span class="ltx_bibblock">
     A general theoretical paradigm to understand learning from human preferences.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib39.1.1">
      International Conference on Artificial Intelligence and Statistics
     </span>
     , pages 4447–4455. PMLR, 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib40">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [40]
    </span>
    <span class="ltx_bibblock">
     Shengyi Huang, Michael Noukhovitch, Arian Hosseini, Kashif Rasul, Weixun Wang, and Lewis Tunstall.
    </span>
    <span class="ltx_bibblock">
     The n+ implementation details of rlhf with ppo: A case study on tl; dr summarization.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib40.1.1">
      arXiv preprint arXiv:2403.17031
     </span>
     , 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib41">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [41]
    </span>
    <span class="ltx_bibblock">
     Rui Zheng, Shihan Dou, Songyang Gao, Yuan Hua, Wei Shen, Binghai Wang, Yan Liu, Senjie Jin, Qin Liu, Yuhao Zhou, et al.
    </span>
    <span class="ltx_bibblock">
     Secrets of rlhf in large language models part i: Ppo.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib41.1.1">
      arXiv preprint arXiv:2307.04964
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib42">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [42]
    </span>
    <span class="ltx_bibblock">
     Shangmin Guo, Biao Zhang, Tianlin Liu, Tianqi Liu, Misha Khalman, Felipe Llinares, Alexandre Rame, Thomas Mesnard, Yao Zhao, Bilal Piot, et al.
    </span>
    <span class="ltx_bibblock">
     Direct language model alignment from online ai feedback.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib42.1.1">
      arXiv preprint arXiv:2402.04792
     </span>
     , 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib43">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [43]
    </span>
    <span class="ltx_bibblock">
     Jing Xu, Andrew Lee, Sainbayar Sukhbaatar, and Jason Weston.
    </span>
    <span class="ltx_bibblock">
     Some things are more cringe than others: Preference optimization with the pairwise cringe loss.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib43.1.1">
      arXiv preprint arXiv:2312.16682
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib44">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [44]
    </span>
    <span class="ltx_bibblock">
     Shusheng Xu, Wei Fu, Jiaxuan Gao, Wenjie Ye, Weilin Liu, Zhiyu Mei, Guangju Wang, Chao Yu, and Yi Wu.
    </span>
    <span class="ltx_bibblock">
     Is dpo superior to ppo for llm alignment? a comprehensive study.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib44.1.1">
      arXiv preprint arXiv:2404.10719
     </span>
     , 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib45">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [45]
    </span>
    <span class="ltx_bibblock">
     Weizhe Yuan, Richard Yuanzhe Pang, Kyunghyun Cho, Sainbayar Sukhbaatar, Jing Xu, and Jason Weston.
    </span>
    <span class="ltx_bibblock">
     Self-rewarding language models.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib45.1.1">
      arXiv preprint arXiv:2401.10020
     </span>
     , 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib46">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [46]
    </span>
    <span class="ltx_bibblock">
     Xiao Liu, Hao Yu, Hanchen Zhang, Yifan Xu, Xuanyu Lei, Hanyu Lai, Yu Gu, Hangliang Ding, Kaiwen Men, Kejuan Yang, et al.
    </span>
    <span class="ltx_bibblock">
     Agentbench: Evaluating llms as agents.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib46.1.1">
      The Twelfth International Conference on Learning Representations
     </span>
     , 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib47">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [47]
    </span>
    <span class="ltx_bibblock">
     James E Allen, Curry I Guinn, and Eric Horvitz.
    </span>
    <span class="ltx_bibblock">
     Mixed-initiative interaction.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib47.1.1">
      IEEE Intelligent Systems and their Applications
     </span>
     , 14(5):14–23, 1999.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib48">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [48]
    </span>
    <span class="ltx_bibblock">
     Jennifer Chu-Carroll.
    </span>
    <span class="ltx_bibblock">
     Mimic: An adaptive mixed initiative spoken dialogue system for information queries.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib48.1.1">
      Sixth Applied Natural Language Processing Conference
     </span>
     , pages 97–104, 2000.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib49">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [49]
    </span>
    <span class="ltx_bibblock">
     Baolin Peng, Xiujun Li, Jianfeng Gao, Jingjing Liu, and Kam-Fai Wong.
    </span>
    <span class="ltx_bibblock">
     Deep dyna-q: Integrating planning for task-completion dialogue policy learning.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib49.1.1">
      Proceedings of the 56th Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)
     </span>
     , pages 2182–2192, 2018.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib50">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [50]
    </span>
    <span class="ltx_bibblock">
     Tiancheng Zhao, Kaige Xie, and Maxine Eskenazi.
    </span>
    <span class="ltx_bibblock">
     Rethinking action spaces for reinforcement learning in end-to-end dialog agents with latent variable models.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib50.1.1">
      Proceedings of NAACL-HLT
     </span>
     , pages 1208–1218, 2019.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib51">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [51]
    </span>
    <span class="ltx_bibblock">
     Albert Q Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel, Guillaume Lample, Lucile Saulnier, et al.
    </span>
    <span class="ltx_bibblock">
     Mistral 7b.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib51.1.1">
      arXiv preprint arXiv:2310.06825
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib52">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [52]
    </span>
    <span class="ltx_bibblock">
     Ganqu Cui, Lifan Yuan, Ning Ding, Guanming Yao, Wei Zhu, Yuan Ni, Guotong Xie, Zhiyuan Liu, and Maosong Sun.
    </span>
    <span class="ltx_bibblock">
     Ultrafeedback: Boosting language models with high-quality feedback.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib52.1.1">
      arXiv preprint arXiv:2310.01377
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib53">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [53]
    </span>
    <span class="ltx_bibblock">
     Ning Ding, Yulin Chen, Bokai Xu, Yujia Qin, Shengding Hu, Zhiyuan Liu, Maosong Sun, and Bowen Zhou.
    </span>
    <span class="ltx_bibblock">
     Enhancing chat language models by scaling high-quality instructional conversations.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib53.1.1">
      The 2023 Conference on Empirical Methods in Natural Language Processing
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib54">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [54]
    </span>
    <span class="ltx_bibblock">
     Meiqi Guo, Mingda Zhang, Siva Reddy, and Malihe Alikhani.
    </span>
    <span class="ltx_bibblock">
     Abg-coqa: Clarifying ambiguity in conversational question answering.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib54.1.1">
      3rd Conference on Automated Knowledge Base Construction
     </span>
     , 2021.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib55">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [55]
    </span>
    <span class="ltx_bibblock">
     Nils Reimers and Iryna Gurevych.
    </span>
    <span class="ltx_bibblock">
     Sentence-bert: Sentence embeddings using siamese bert-networks.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib55.1.1">
      Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing and the 9th International Joint Conference on Natural Language Processing (EMNLP-IJCNLP)
     </span>
     , pages 3982–3992, 2019.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib56">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [56]
    </span>
    <span class="ltx_bibblock">
     Julian Risch, Timo Möller, Julian Gutsch, and Malte Pietsch.
    </span>
    <span class="ltx_bibblock">
     Semantic answer similarity for evaluating question answering models.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib56.1.1">
      Proceedings of the 3rd Workshop on Machine Reading for Question Answering
     </span>
     , pages 149–157, 2021.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib57">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [57]
    </span>
    <span class="ltx_bibblock">
     Tao Yu, Rui Zhang, Kai Yang, Michihiro Yasunaga, Dongxu Wang, Zifan Li, James Ma, Irene Li, Qingning Yao, Shanelle Roman, et al.
    </span>
    <span class="ltx_bibblock">
     Spider: A large-scale human-labeled dataset for complex and cross-domain semantic parsing and text-to-sql task.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib57.1.1">
      Proceedings of the 2018 Conference on Empirical Methods in Natural Language Processing
     </span>
     , pages 3911–3921, 2018.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib58">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [58]
    </span>
    <span class="ltx_bibblock">
     Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Fei Xia, Ed Chi, Quoc V Le, Denny Zhou, et al.
    </span>
    <span class="ltx_bibblock">
     Chain-of-thought prompting elicits reasoning in large language models.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib58.1.1">
      Advances in neural information processing systems
     </span>
     , 35:24824–24837, 2022.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib59">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [59]
    </span>
    <span class="ltx_bibblock">
     Yang Deng, Lizi Liao, Liang Chen, Hongru Wang, Wenqiang Lei, and Tat-Seng Chua.
    </span>
    <span class="ltx_bibblock">
     Prompting and evaluating large language models for proactive dialogues: Clarification, target-guided, and non-collaboration.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib59.1.1">
      Findings of the Association for Computational Linguistics: EMNLP 2023
     </span>
     , pages 10602–10621, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib60">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [60]
    </span>
    <span class="ltx_bibblock">
     Arindam Mitra, Luciano Del Corro, Shweti Mahajan, Andres Codas, Clarisse Simoes, Sahaj Agarwal, Xuxi Chen, Anastasia Razdaibiedina, Erik Jones, Kriti Aggarwal, et al.
    </span>
    <span class="ltx_bibblock">
     Orca 2: Teaching small language models how to reason.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib60.1.1">
      arXiv preprint arXiv:2311.11045
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib61">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [61]
    </span>
    <span class="ltx_bibblock">
     Subhabrata Mukherjee, Arindam Mitra, Ganesh Jawahar, Sahaj Agarwal, Hamid Palangi, and Ahmed Awadallah.
    </span>
    <span class="ltx_bibblock">
     Orca: Progressive learning from complex explanation traces of gpt-4.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib61.1.1">
      arXiv preprint arXiv:2306.02707
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib62">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [62]
    </span>
    <span class="ltx_bibblock">
     Canwen Xu, Corby Rosset, Luciano Del Corro, Shweti Mahajan, Julian McAuley, Jennifer Neville, Ahmed Hassan Awadallah, and Nikhil Rao.
    </span>
    <span class="ltx_bibblock">
     Contrastive post-training large language models on data curriculum.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib62.1.1">
      Findings of the Association for Computational Linguistics: NAACL 2024
     </span>
     , 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib63">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [63]
    </span>
    <span class="ltx_bibblock">
     Sergey Levine, Aviral Kumar, George Tucker, and Justin Fu.
    </span>
    <span class="ltx_bibblock">
     Offline reinforcement learning: Tutorial, review, and perspectives on open problems.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib63.1.1">
      arXiv preprint arXiv:2005.01643
     </span>
     , 2020.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib64">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [64]
    </span>
    <span class="ltx_bibblock">
     Erik Nijkamp, Bo Pang, Hiroaki Hayashi, Lifu Tu, Huan Wang, Yingbo Zhou, Silvio Savarese, and Caiming Xiong.
    </span>
    <span class="ltx_bibblock">
     Codegen: An open large language model for code with multi-turn program synthesis.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib64.1.1">
      The Eleventh International Conference on Learning Representations
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib65">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [65]
    </span>
    <span class="ltx_bibblock">
     Tao Yu, Rui Zhang, He Yang Er, Suyi Li, Eric Xue, Bo Pang, Xi Victoria Lin, Yi Chern Tan, Tianze Shi, Zihan Li, et al.
    </span>
    <span class="ltx_bibblock">
     Cosql: A conversational text-to-sql challenge towards cross-domain natural language interfaces to databases.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib65.1.1">
      Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing and the 9th International Joint Conference on Natural Language Processing (EMNLP-IJCNLP)
     </span>
     , 2019.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib66">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [66]
    </span>
    <span class="ltx_bibblock">
     Ruoxi Sun, Sercan Arik, Rajarishi Sinha, Hootan Nakhost, Hanjun Dai, Pengcheng Yin, and Tomas Pfister.
    </span>
    <span class="ltx_bibblock">
     Sqlprompt: In-context text-to-sql with minimal labeled data.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib66.1.1">
      Findings of the Association for Computational Linguistics: EMNLP 2023
     </span>
     , pages 542–550, 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib67">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [67]
    </span>
    <span class="ltx_bibblock">
     Ruoxi Sun, Sercan O Arik, Hootan Nakhost, Hanjun Dai, Rajarishi Sinha, Pengcheng Yin, and Tomas Pfister.
    </span>
    <span class="ltx_bibblock">
     Sql-palm: Improved large language modeladaptation for text-to-sql.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib67.1.1">
      arXiv preprint arXiv:2306.00739
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib68">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [68]
    </span>
    <span class="ltx_bibblock">
     Matthew Toles, Yukun Huang, Zhou Yu, and Luis Gravano.
    </span>
    <span class="ltx_bibblock">
     Pragmatic evaluation of clarifying questions with fact-level masking.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib68.1.1">
      arXiv preprint arXiv:2310.11571
     </span>
     , 2023.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib69">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [69]
    </span>
    <span class="ltx_bibblock">
     Dheeru Dua, Yizhong Wang, Pradeep Dasigi, Gabriel Stanovsky, Sameer Singh, and Matt Gardner.
    </span>
    <span class="ltx_bibblock">
     Drop: A reading comprehension benchmark requiring discrete reasoning over paragraphs.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib69.1.1">
      Proceedings of the 2019 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies, Volume 1 (Long and Short Papers)
     </span>
     , pages 2368–2378, 2019.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib70">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [70]
    </span>
    <span class="ltx_bibblock">
     Senthilkumar Chandramohan, Matthieu Geist, Fabrice Lefevre, and Olivier Pietquin.
    </span>
    <span class="ltx_bibblock">
     User simulation in dialogue systems using inverse reinforcement learning.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib70.1.1">
      Interspeech 2011
     </span>
     , pages 1025–1028, 2011.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib71">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [71]
    </span>
    <span class="ltx_bibblock">
     Florian Kreyssig, Iñigo Casanueva, Paweł Budzianowski, and Milica Gasic.
    </span>
    <span class="ltx_bibblock">
     Neural user simulation for corpus-based policy optimisation of spoken dialogue systems.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib71.1.1">
      Proceedings of the 19th Annual SIGdial Meeting on Discourse and Dialogue
     </span>
     , pages 60–69, 2018.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib72">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [72]
    </span>
    <span class="ltx_bibblock">
     Pararth Shah, Dilek Hakkani-Tur, Bing Liu, and Gökhan Tür.
    </span>
    <span class="ltx_bibblock">
     Bootstrapping a neural conversational agent with dialogue self-play, crowdsourcing and on-line reinforcement learning.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib72.1.1">
      Proceedings of the 2018 Conference of the North American Chapter of the Association for Computational Linguistics: Human Language Technologies, Volume 3 (Industry Papers)
     </span>
     , pages 41–51, 2018.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib73">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [73]
    </span>
    <span class="ltx_bibblock">
     Gemma Team, Thomas Mesnard, Cassidy Hardin, Robert Dadashi, Surya Bhupatiraju, Shreya Pathak, Laurent Sifre, Morgane Rivière, Mihir Sanjay Kale, Juliette Love, et al.
    </span>
    <span class="ltx_bibblock">
     Gemma: Open models based on gemini research and technology.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib73.1.1">
      arXiv preprint arXiv:2403.08295
     </span>
     , 2024.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib74">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [74]
    </span>
    <span class="ltx_bibblock">
     Thomas Wolf, Lysandre Debut, Victor Sanh, Julien Chaumond, Clement Delangue, Anthony Moi, Pierric Cistac, Tim Rault, Rémi Louf, Morgan Funtowicz, Joe Davison, Sam Shleifer, Patrick von Platen, Clara Ma, Yacine Jernite, Julien Plu, Canwen Xu, Teven Le Scao, Sylvain Gugger, Mariama Drame, Quentin Lhoest, and Alexander M. Rush.
    </span>
    <span class="ltx_bibblock">
     Transformers: State-of-the-art natural language processing.
    </span>
    <span class="ltx_bibblock">
     In
     <span class="ltx_text ltx_font_italic" id="bib.bib74.1.1">
      Proceedings of the 2020 Conference on Empirical Methods in Natural Language Processing: System Demonstrations
     </span>
     , pages 38–45, Online, October 2020. Association for Computational Linguistics.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib75">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     [75]
    </span>
    <span class="ltx_bibblock">
     Adam Paszke, Sam Gross, Francisco Massa, Adam Lerer, James Bradbury, Gregory Chanan, Trevor Killeen, Zeming Lin, Natalia Gimelshein, Luca Antiga, et al.
    </span>
    <span class="ltx_bibblock">
     Pytorch: An imperative style, high-performance deep learning library.
    </span>
    <span class="ltx_bibblock">
     <span class="ltx_text ltx_font_italic" id="bib.bib75.1.1">
      Advances in neural information processing systems
     </span>
     , 32, 2019.
    </span>
   </li>
  </ul>
 </section>
 <div class="ltx_pagination ltx_role_newpage">
 </div>
 <figure class="ltx_figure" id="A0.F3">
  <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="450" id="A0.F3.g1" src="/html/2406.00222/assets/x3.png" width="438"/>
  <figcaption class="ltx_caption ltx_centering">
   <span class="ltx_tag ltx_tag_figure">
    Figure A3:
   </span>
   <span class="ltx_text ltx_font_bold" id="A0.F3.2.1">
    Example of a contrastive pairing constructed for RL tuning with Abg-CoQA
   </span>
   <cite class="ltx_cite ltx_citemacro_cite">
    [
    <a class="ltx_ref" href="#bib.bib54" title="">
     54
    </a>
    ]
   </cite>
   . The notation used is as described in Section
   <a class="ltx_ref" href="#S3.SS1" title="3.1 Problem Setup ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
    <span class="ltx_text ltx_ref_tag">
     3.1
    </span>
   </a>
   .
  </figcaption>
 </figure>
 <section class="ltx_appendix" id="A1">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix A
   </span>
   Additional Limitations, Ethical Considerations, and Broader Impacts
  </h2>
  <section class="ltx_subsection" id="A1.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     A.1
    </span>
    Additional Discussion of Limitations
   </h3>
   <div class="ltx_para" id="A1.SS1.p1">
    <p class="ltx_p" id="A1.SS1.p1.1">
     <span class="ltx_text ltx_font_italic" id="A1.SS1.p1.1.1">
      ACT
     </span>
     also makes use of task-specific heuristics. While this was intentional since success criteria can vary greatly across domains, it can be considered a limitation from the perspective that
     <span class="ltx_text ltx_font_italic" id="A1.SS1.p1.1.2">
      ACT
     </span>
     ’s implementation details may vary, requiring more customization and engineering expertise/effort. Additionally, our overall approach to tuning and evaluation makes heavy use of existing LLMs. We prompt Gemini for purposes such as Action Classification or User Simulation, but such approaches are not perfect and will occasionally result in unwanted behavior. These prompting approaches similarly require substantial customization efforts. We also realize that not all researchers may have access to commercial LLMs due to researchers for financial or privacy reasons.
    </p>
   </div>
   <div class="ltx_para" id="A1.SS1.p2">
    <p class="ltx_p" id="A1.SS1.p2.1">
     Our study also focuses specifically on the limited data regime. We believe that such contexts (e.g., when the target user population is unknown; when conversational data cannot be collected due to privacy concerns; when a conversational system is in its early stages and collecting abundant data for development iteration is not feasible; etc.) would benefit the most from focused adaptation designed to fundamentally teach conversational skills approaches such as
     <span class="ltx_text ltx_font_italic" id="A1.SS1.p2.1.1">
      ACT
     </span>
     . As such, in our paper, this was the focus of all of our experiments. It is not clear how much our findings would generalize in settings in which there is an abundance of training data whose distribution closely matches the target distribution. Intuitively, if much more in-distribution data is made available, even the performance of unaligned objectives like SFT would start to catch up to the performance of focused approaches.
    </p>
   </div>
   <section class="ltx_paragraph" id="A1.SS1.SSS0.Px1">
    <h5 class="ltx_title ltx_title_paragraph">
     Is
     <span class="ltx_text ltx_font_italic" id="A1.SS1.SSS0.Px1.1.1">
      ACT
     </span>
     online learning?
    </h5>
    <div class="ltx_para" id="A1.SS1.SSS0.Px1.p1">
     <p class="ltx_p" id="A1.SS1.SSS0.Px1.p1.1">
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib63" title="">
        63
       </a>
       ]
      </cite>
      defines offline reinforcement learning as using a fixed dataset of experiences, whereas online reinforcement learning relies on interacting with an environment in real-time. Additionally,
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib42" title="">
        42
       </a>
       ]
      </cite>
      defines on-policy sampling in contrastive RL tuning as settings where both the winning and losing responses are sampled from the policy model.
In our case, during tuning, we sample a single response from the policy model.
     </p>
    </div>
    <div class="ltx_para" id="A1.SS1.SSS0.Px1.p2">
     <p class="ltx_p" id="A1.SS1.SSS0.Px1.p2.1">
      As such, we define
      <span class="ltx_text ltx_font_italic" id="A1.SS1.SSS0.Px1.p2.1.1">
       ACT
      </span>
      as a
      <span class="ltx_text ltx_font_italic" id="A1.SS1.SSS0.Px1.p2.1.2">
       quasi-online
      </span>
      contrastive RL tuning approach.
      <span class="ltx_text ltx_font_italic" id="A1.SS1.SSS0.Px1.p2.1.3">
       ACT
      </span>
      does rely on action-based preference dataset, as is common in fully-offline reinforcement learning. However,
      <span class="ltx_text ltx_font_italic" id="A1.SS1.SSS0.Px1.p2.1.4">
       ACT
      </span>
      continuously samples responses form the policy model in order to update the contrast pairing with good or bad trajectories. Overall, it has both dynamic and static components, so we refer to it as quasi-online.
      <span class="ltx_text ltx_font_italic" id="A1.SS1.SSS0.Px1.p2.1.5">
       ACT
      </span>
      also specifically is different from fully online DPO where both the winning and losing responses are sampled (i.e. in
      <cite class="ltx_cite ltx_citemacro_cite">
       [
       <a class="ltx_ref" href="#bib.bib42" title="">
        42
       </a>
       ]
      </cite>
      ) because our focus is on conversational actions. There is no guarantee that sampling a response from the policy model twice will result in differing actions, unless you change the prompt. However, in that case, you would no longer be computing the DPO objective.
     </p>
    </div>
    <div class="ltx_para" id="A1.SS1.SSS0.Px1.p3">
     <p class="ltx_p" id="A1.SS1.SSS0.Px1.p3.1">
      By nature of the domains considered, the extent to which
      <span class="ltx_text ltx_font_italic" id="A1.SS1.SSS0.Px1.p3.1.1">
       ACT
      </span>
      allows for online exploration is also limited. As previously mentioned, our experiments are constrained by the fact that there is an objective right/wrong target answer. For instance, if the target answer is an arithmetic expression as is common in PACIFIC, there are a fairly limited number of unique trajectories (when inspected in terms of the number of tokens) that will arrive at that particular expression. In such cases, the trajectory sampled from the policy model during
      <span class="ltx_text ltx_font_italic" id="A1.SS1.SSS0.Px1.p3.1.2">
       ACT
      </span>
      tuning may not be any different from the offline trajectory found in the training data.
     </p>
    </div>
   </section>
  </section>
  <section class="ltx_subsection" id="A1.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     A.2
    </span>
    Ethical Considerations
   </h3>
   <section class="ltx_paragraph" id="A1.SS2.SSS0.Px1">
    <h5 class="ltx_title ltx_title_paragraph">
     Usage and Safety
    </h5>
    <div class="ltx_para" id="A1.SS2.SSS0.Px1.p1">
     <p class="ltx_p" id="A1.SS2.SSS0.Px1.p1.1">
      We do not condone the use of our work for any unethical, unlawful, and/or harmful applications. In our work, we do not release any new model artifacts or web-scraped data, but we do not specifically introduce any model guardrails as a part of
      <span class="ltx_text ltx_font_italic" id="A1.SS2.SSS0.Px1.p1.1.1">
       ACT
      </span>
      . However, our implementation of
      <span class="ltx_text ltx_font_italic" id="A1.SS2.SSS0.Px1.p1.1.2">
       ACT
      </span>
      relies on other LLMs such as Gemini to produce an initial preference dataset, and to perform user simulation. Gemini is released with safety guardrails in place, but these inference-time guardrails may not be available when using open-source LLMs instead. We advise that any deployments of models tuned with
      <span class="ltx_text ltx_font_italic" id="A1.SS2.SSS0.Px1.p1.1.3">
       ACT
      </span>
      should consider adding safety guardrails at inference-time.
     </p>
    </div>
   </section>
   <section class="ltx_paragraph" id="A1.SS2.SSS0.Px2">
    <h5 class="ltx_title ltx_title_paragraph">
     Hallucinations
    </h5>
    <div class="ltx_para" id="A1.SS2.SSS0.Px2.p1">
     <p class="ltx_p" id="A1.SS2.SSS0.Px2.p1.1">
      One commonly documented concern with using LLMs is their tendency to hallucinate answers in Assistant QA contexts. A solution is to provide an LLM with information from a retriever (i.e., retrieval-augmented generation). Two of the datasets we use, PACIFIC and Abg-CoQA, mirror this setting by performing grounded QA using a mixture of long-context textual passages and tabular data. It follows that
      <span class="ltx_text ltx_font_italic" id="A1.SS2.SSS0.Px2.p1.1.1">
       ACT
      </span>
      could be further studied in combination with approaches for improved retrieval-augmented generation.
     </p>
    </div>
    <div class="ltx_para" id="A1.SS2.SSS0.Px2.p2">
     <p class="ltx_p" id="A1.SS2.SSS0.Px2.p2.1">
      Our evaluation criteria in this paper are also rather restrictive towards hallucinations. In PACIFIC, we use a token-level metric (DROP F1); in Abg-CoQA, we evaluate a candidate response’s semantic similarity with a ground truth answer; in AmbigSQL we use execution match, which is a fully objective metric. As such, it is difficult to perform well on PACIFIC and Abg-CoQA if a model consistently hallucinates answers, and in AmbigSQL, a “hallucinated” response would not consist of the appropriate SQL code.
     </p>
    </div>
   </section>
  </section>
  <section class="ltx_subsection" id="A1.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     A.3
    </span>
    Broader Impacts
   </h3>
   <div class="ltx_para" id="A1.SS3.p1">
    <p class="ltx_p" id="A1.SS3.p1.1">
     There is an abundance of modern conversational assistants.
     <span class="ltx_text ltx_font_italic" id="A1.SS3.p1.1.1">
      ACT
     </span>
     seeks to improve multi-turn conversational experiences, and thus, it can be used to improve many applications used by potentially millions of users around the world. However, the popularity of conversational assistants also creates an increased risk of misuse. Some people may develop conversational for unethical applications such as misinformation generation, or gray areas such as optimizing dialogue generation for content which is not suitable for the workplace. As discussed above, we do not condone the use of
     <span class="ltx_text ltx_font_italic" id="A1.SS3.p1.1.2">
      ACT
     </span>
     for any unethical, harmful, or unlawful applications, and we suggest the usage of safety guardrails for any deployments.
    </p>
   </div>
  </section>
 </section>
 <section class="ltx_appendix" id="A2">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix B
   </span>
   <span class="ltx_text ltx_font_italic" id="A2.1.1">
    AmbigSQL
   </span>
   : Modeling
   <span class="ltx_text ltx_font_italic" id="A2.2.2">
    Ambig
   </span>
   uity in Conversational Text-to-
   <span class="ltx_text ltx_font_italic" id="A2.3.3">
    SQL
   </span>
  </h2>
  <figure class="ltx_table" id="A2.T6">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A6:
    </span>
    <span class="ltx_text ltx_font_bold" id="A2.T6.2.1">
     Overview of AmbigSQL
    </span>
    , an ambiguous Text-to-SQL dataset synthesized from Spider.
   </figcaption>
   <table class="ltx_tabular ltx_centering ltx_align_middle" id="A2.T6.3">
    <tbody class="ltx_tbody">
     <tr class="ltx_tr" id="A2.T6.3.1.1">
      <td class="ltx_td ltx_border_tt" id="A2.T6.3.1.1.1">
      </td>
      <td class="ltx_td ltx_align_center ltx_border_tt" id="A2.T6.3.1.1.2">
       Train
      </td>
      <td class="ltx_td ltx_align_center ltx_border_tt" id="A2.T6.3.1.1.3">
       Dev
      </td>
      <td class="ltx_td ltx_align_center ltx_border_tt" id="A2.T6.3.1.1.4">
       Test
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T6.3.2.2">
      <td class="ltx_td ltx_align_left" id="A2.T6.3.2.2.1">
       Num. Unambiguous Requests
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.2.2.2">
       7,000
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.2.2.3">
       1,034
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.2.2.4">
       1,034
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T6.3.3.3">
      <td class="ltx_td ltx_align_left" id="A2.T6.3.3.3.1">
       Num. Ambiguous Requests
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.3.3.2">
       7,000
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.3.3.3">
       1,034
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.3.3.4">
       1,034
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T6.3.4.4">
      <td class="ltx_td ltx_align_left" id="A2.T6.3.4.4.1">
       Num. Unique Schemas
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.4.4.2">
       1,056
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.4.4.3">
       145
      </td>
      <td class="ltx_td ltx_align_center" id="A2.T6.3.4.4.4">
       145
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T6.3.5.5">
      <td class="ltx_td ltx_align_left ltx_border_bb" id="A2.T6.3.5.5.1">
       Types of Ambiguity
      </td>
      <td class="ltx_td ltx_align_center ltx_border_bb" id="A2.T6.3.5.5.2">
       3
      </td>
      <td class="ltx_td ltx_align_center ltx_border_bb" id="A2.T6.3.5.5.3">
       3
      </td>
      <td class="ltx_td ltx_align_center ltx_border_bb" id="A2.T6.3.5.5.4">
       3
      </td>
     </tr>
    </tbody>
   </table>
  </figure>
  <div class="ltx_para" id="A2.p1">
   <p class="ltx_p" id="A2.p1.1">
    There is growing interest in using LLM-based agents for coding tasks
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib46" title="">
      46
     </a>
     ]
    </cite>
    . Particularly, due to the complexity of such tasks, multi-turn interactions in which an agent is able to clarify assumptions and user intents should intuitively help with goal completion
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib64" title="">
      64
     </a>
     ]
    </cite>
    . Despite this, there are few existing resources for multi-turn code generation tasks. One example is CoSQL, a conversational text-to-SQL task which also includes linguistic ambiguities
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib65" title="">
      65
     </a>
     ]
    </cite>
    , but the proposed task does not include agent-style interaction in which a model must learn to ask clarifying questions. Upon our inspection of the dataset, there are also various inconsistencies related to the “system-side” clarification questions given in the dataset’s conversational contexts, which we highlight in Table
    <a class="ltx_ref" href="#A2.T7" title="Table A7 ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      A7
     </span>
    </a>
    . As a result, we propose AmbigSQL, our own synthetically constructed resource for ambiguous conversational text-to-SQL.
   </p>
  </div>
  <figure class="ltx_table" id="A2.T7">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A7:
    </span>
    <span class="ltx_text ltx_font_bold" id="A2.T7.3.1">
     Conversations in CoSQL with noisy “clarification questions”
    </span>
    (highlighted in
    <span class="ltx_text" id="A2.T7.4.2" style="color:#FF0000;">
     red
    </span>
    ). Example 1) is a remnant of crowdsourcing in which the system-side party makes mention of the task guideline. Example 2) demonstrates a system-side clarification question being asked prior to the user making any information requests. Example 3) The system-side clarification question makes reference to some prior database search result, but the execution feedback is not made accessible to the system during inference.
   </figcaption>
   <table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A2.T7.5">
    <thead class="ltx_thead">
     <tr class="ltx_tr" id="A2.T7.5.1.1">
      <th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A2.T7.5.1.1.1">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.1.1.1.1">
        <span class="ltx_p" id="A2.T7.5.1.1.1.1.1" style="width:4.3pt;">
         <span class="ltx_text" id="A2.T7.5.1.1.1.1.1.1" style="font-size:90%;">
          No.
         </span>
        </span>
       </span>
      </th>
      <th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A2.T7.5.1.1.2">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.1.1.2.1">
        <span class="ltx_p" id="A2.T7.5.1.1.2.1.1" style="width:43.4pt;">
         <span class="ltx_text" id="A2.T7.5.1.1.2.1.1.1" style="font-size:90%;">
          Interacting Party
         </span>
        </span>
       </span>
      </th>
      <th class="ltx_td ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A2.T7.5.1.1.3">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.1.1.3.1">
        <span class="ltx_p" id="A2.T7.5.1.1.3.1.1" style="width:346.9pt;">
         <span class="ltx_text" id="A2.T7.5.1.1.3.1.1.1" style="font-size:90%;">
          Utterance
         </span>
        </span>
       </span>
      </th>
     </tr>
    </thead>
    <tbody class="ltx_tbody">
     <tr class="ltx_tr" id="A2.T7.5.2.1">
      <td class="ltx_td ltx_align_top ltx_border_t" id="A2.T7.5.2.1.1">
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.5.2.1.2">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.2.1.2.1">
        <span class="ltx_p" id="A2.T7.5.2.1.2.1.1" style="width:43.4pt;">
         <span class="ltx_text" id="A2.T7.5.2.1.2.1.1.1" style="font-size:90%;color:#0000FF;">
          User
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.5.2.1.3">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.2.1.3.1">
        <span class="ltx_p" id="A2.T7.5.2.1.3.1.1" style="width:346.9pt;">
         <span class="ltx_text" id="A2.T7.5.2.1.3.1.1.1" style="font-size:90%;">
          Can you list all the singer ids that aren’t present in the song table?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T7.5.3.2">
      <td class="ltx_td ltx_align_top" id="A2.T7.5.3.2.1">
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T7.5.3.2.2">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.3.2.2.1">
        <span class="ltx_p" id="A2.T7.5.3.2.2.1.1" style="width:43.4pt;">
         <span class="ltx_text" id="A2.T7.5.3.2.2.1.1.1" style="font-size:90%;color:#FF8000;">
          Assistant
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T7.5.3.2.3">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.3.2.3.1">
        <span class="ltx_p" id="A2.T7.5.3.2.3.1.1" style="width:346.9pt;">
         <code class="ltx_verbatim ltx_font_typewriter" id="A2.T7.5.3.2.3.1.1.1" style="font-size:90%;">
          SELECT Name FROM singer WHERE Singer_ID NOT IN ...
         </code>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T7.5.4.3">
      <td class="ltx_td ltx_align_top" id="A2.T7.5.4.3.1">
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T7.5.4.3.2">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.4.3.2.1">
        <span class="ltx_p" id="A2.T7.5.4.3.2.1.1" style="width:43.4pt;">
         <span class="ltx_text" id="A2.T7.5.4.3.2.1.1.1" style="font-size:90%;color:#0000FF;">
          User
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T7.5.4.3.3">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.4.3.3.1">
        <span class="ltx_p" id="A2.T7.5.4.3.3.1.1" style="width:346.9pt;">
         <span class="ltx_text" id="A2.T7.5.4.3.3.1.1.1" style="font-size:90%;">
          Thanks!
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T7.5.5.4">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T7.5.5.4.1">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.5.4.1.1">
        <span class="ltx_p" id="A2.T7.5.5.4.1.1.1" style="width:4.3pt;">
         <span class="ltx_text" id="A2.T7.5.5.4.1.1.1.1" style="font-size:90%;">
          1
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T7.5.5.4.2">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.5.4.2.1">
        <span class="ltx_p" id="A2.T7.5.5.4.2.1.1" style="width:43.4pt;">
         <span class="ltx_text" id="A2.T7.5.5.4.2.1.1.1" style="font-size:90%;color:#FF8000;">
          Assistant
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T7.5.5.4.3">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.5.4.3.1">
        <span class="ltx_p" id="A2.T7.5.5.4.3.1.1" style="width:346.9pt;">
         <span class="ltx_text" id="A2.T7.5.5.4.3.1.1.1" style="font-size:90%;color:#FF0000;">
          You should ask at least 3 questions
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T7.5.6.5">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.5.6.5.1">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.6.5.1.1">
        <span class="ltx_p" id="A2.T7.5.6.5.1.1.1" style="width:4.3pt;">
         <span class="ltx_text" id="A2.T7.5.6.5.1.1.1.1" style="font-size:90%;">
          2
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.5.6.5.2">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.6.5.2.1">
        <span class="ltx_p" id="A2.T7.5.6.5.2.1.1" style="width:43.4pt;">
         <span class="ltx_text" id="A2.T7.5.6.5.2.1.1.1" style="font-size:90%;color:#FF8000;">
          Assistant
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T7.5.6.5.3">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.6.5.3.1">
        <span class="ltx_p" id="A2.T7.5.6.5.3.1.1" style="width:346.9pt;">
         <span class="ltx_text" id="A2.T7.5.6.5.3.1.1.1" style="font-size:90%;color:#FF0000;">
          Did you want the full name of makers and the number?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A2.T7.5.7.6">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A2.T7.5.7.6.1">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.7.6.1.1">
        <span class="ltx_p" id="A2.T7.5.7.6.1.1.1" style="width:4.3pt;">
         <span class="ltx_text" id="A2.T7.5.7.6.1.1.1.1" style="font-size:90%;">
          3
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A2.T7.5.7.6.2">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.7.6.2.1">
        <span class="ltx_p" id="A2.T7.5.7.6.2.1.1" style="width:43.4pt;">
         <span class="ltx_text" id="A2.T7.5.7.6.2.1.1.1" style="font-size:90%;color:#FF8000;">
          Assistant
         </span>
        </span>
       </span>
      </td>
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb ltx_border_t" id="A2.T7.5.7.6.3">
       <span class="ltx_inline-block ltx_align_top" id="A2.T7.5.7.6.3.1">
        <span class="ltx_p" id="A2.T7.5.7.6.3.1.1" style="width:346.9pt;">
         <span class="ltx_text" id="A2.T7.5.7.6.3.1.1.1" style="font-size:90%;color:#FF0000;">
          Do you mean the address of the customer with first name Luis?
         </span>
        </span>
       </span>
      </td>
     </tr>
    </tbody>
   </table>
  </figure>
  <section class="ltx_subsection" id="A2.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     B.1
    </span>
    AmbigSQL Construction
   </h3>
   <figure class="ltx_table" id="A2.T8">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A8:
     </span>
     <span class="ltx_text ltx_font_bold" id="A2.T8.4.1">
      In-context example given as part of a prompt for creating information requests in which the target population is ambiguous.
     </span>
     The format of the black text represents how a ground-truth request would be used to form the prompt for a target example. The blue text represents the content that would be synthesized from an LLM. We omit the database schema from the paper.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A2.T8.2">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A2.T8.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A2.T8.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T8.2.2.2.2">
         <span class="ltx_p" id="A2.T8.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T8.1.1.1.1.1.m1.1">
           <semantics id="A2.T8.1.1.1.1.1.m1.1a">
            <mo id="A2.T8.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T8.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T8.1.1.1.1.1.m1.1b">
             <ci id="A2.T8.1.1.1.1.1.m1.1.1.cmml" xref="A2.T8.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T8.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T8.2.2.2.2.2.1" style="font-size:90%;">
           Database Schema Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T8.2.2.2.2.2.m2.1">
           <semantics id="A2.T8.2.2.2.2.2.m2.1a">
            <mo id="A2.T8.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T8.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T8.2.2.2.2.2.m2.1b">
             <ci id="A2.T8.2.2.2.2.2.m2.1.1.cmml" xref="A2.T8.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T8.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T8.2.3.1">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T8.2.3.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T8.2.3.1.1.1">
         <span class="ltx_p" id="A2.T8.2.3.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T8.2.3.1.1.1.1.1" style="font-size:90%;">
           The target SQL query is the following:
          </span>
         </span>
         <pre class="ltx_verbatim ltx_font_typewriter" id="A2.T8.2.3.1.1.1.2" style="font-size:90%;">
SELECT professional_id ,  last_name ,  cell_number FROM Professionals
WHERE state  =  ’Indiana’ UNION SELECT T1.professional_id ,  T1.last_name ,
T1.cell_number FROM Professionals AS T1 JOIN Treatments AS T2 ON
T1.professional_id  =  T2.professional_id
GROUP BY T1.professional_id HAVING count(*)  &gt;  2
</pre>
         <span class="ltx_p" id="A2.T8.2.3.1.1.1.3">
          <span class="ltx_text" id="A2.T8.2.3.1.1.1.3.1" style="font-size:90%;">
           Here is a clear request that would correspond to this SQL query:
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T8.2.4.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T8.2.4.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T8.2.4.2.1.1">
         <span class="ltx_p" id="A2.T8.2.4.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T8.2.4.2.1.1.1.1" style="font-size:90%;">
           “Which professionals live in the state of Indiana or have done treatment on more than 2 treatments? List his or her id, last name and cell phone.”
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T8.2.5.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T8.2.5.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T8.2.5.3.1.1">
         <span class="ltx_p" id="A2.T8.2.5.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T8.2.5.3.1.1.1.1" style="font-size:90%;">
           Here is the same request converted into an ambiguous format by underspecifying the target columns:
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T8.2.6.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T8.2.6.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T8.2.6.4.1.1">
         <span class="ltx_p" id="A2.T8.2.6.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T8.2.6.4.1.1.1.1" style="font-size:90%;color:#0000FF;">
           “Which ones live in the state of Indiana or have done treatment on more than 2 treatments?”
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T8.2.7.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T8.2.7.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T8.2.7.5.1.1">
         <span class="ltx_p" id="A2.T8.2.7.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T8.2.7.5.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Here is an appropriate clarifying question to recover the clear request from the ambiguous request:
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T8.2.8.6">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A2.T8.2.8.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T8.2.8.6.1.1">
         <span class="ltx_p" id="A2.T8.2.8.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T8.2.8.6.1.1.1.1" style="font-size:90%;color:#0000FF;">
           “Are you asking about the Professionals?”
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
   <div class="ltx_para" id="A2.SS1.p1">
    <p class="ltx_p" id="A2.SS1.p1.6">
     We start from Spider, a popular single-turn text-to-SQL dataset and benchmark. An overview of AmbigSQL is given in Table
     <a class="ltx_ref" href="#A2.T6" title="Table A6 ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A6
      </span>
     </a>
     . Due to the nature of the single-turn requests in Spider, each instance can be viewed as a conversation consisting of a single state
     <math alttext="t_{1}" class="ltx_Math" display="inline" id="A2.SS1.p1.1.m1.1">
      <semantics id="A2.SS1.p1.1.m1.1a">
       <msub id="A2.SS1.p1.1.m1.1.1" xref="A2.SS1.p1.1.m1.1.1.cmml">
        <mi id="A2.SS1.p1.1.m1.1.1.2" xref="A2.SS1.p1.1.m1.1.1.2.cmml">
         t
        </mi>
        <mn id="A2.SS1.p1.1.m1.1.1.3" xref="A2.SS1.p1.1.m1.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p1.1.m1.1b">
        <apply id="A2.SS1.p1.1.m1.1.1.cmml" xref="A2.SS1.p1.1.m1.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p1.1.m1.1.1.1.cmml" xref="A2.SS1.p1.1.m1.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p1.1.m1.1.1.2.cmml" xref="A2.SS1.p1.1.m1.1.1.2">
          𝑡
         </ci>
         <cn id="A2.SS1.p1.1.m1.1.1.3.cmml" type="integer" xref="A2.SS1.p1.1.m1.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p1.1.m1.1c">
        t_{1}
       </annotation>
      </semantics>
     </math>
     (see notation defined in Section
     <a class="ltx_ref" href="#S3" title="3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       3
      </span>
     </a>
     ). In
     <math alttext="t_{1}" class="ltx_Math" display="inline" id="A2.SS1.p1.2.m2.1">
      <semantics id="A2.SS1.p1.2.m2.1a">
       <msub id="A2.SS1.p1.2.m2.1.1" xref="A2.SS1.p1.2.m2.1.1.cmml">
        <mi id="A2.SS1.p1.2.m2.1.1.2" xref="A2.SS1.p1.2.m2.1.1.2.cmml">
         t
        </mi>
        <mn id="A2.SS1.p1.2.m2.1.1.3" xref="A2.SS1.p1.2.m2.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p1.2.m2.1b">
        <apply id="A2.SS1.p1.2.m2.1.1.cmml" xref="A2.SS1.p1.2.m2.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p1.2.m2.1.1.1.cmml" xref="A2.SS1.p1.2.m2.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p1.2.m2.1.1.2.cmml" xref="A2.SS1.p1.2.m2.1.1.2">
          𝑡
         </ci>
         <cn id="A2.SS1.p1.2.m2.1.1.3.cmml" type="integer" xref="A2.SS1.p1.2.m2.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p1.2.m2.1c">
        t_{1}
       </annotation>
      </semantics>
     </math>
     ,
     <math alttext="p_{1}" class="ltx_Math" display="inline" id="A2.SS1.p1.3.m3.1">
      <semantics id="A2.SS1.p1.3.m3.1a">
       <msub id="A2.SS1.p1.3.m3.1.1" xref="A2.SS1.p1.3.m3.1.1.cmml">
        <mi id="A2.SS1.p1.3.m3.1.1.2" xref="A2.SS1.p1.3.m3.1.1.2.cmml">
         p
        </mi>
        <mn id="A2.SS1.p1.3.m3.1.1.3" xref="A2.SS1.p1.3.m3.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p1.3.m3.1b">
        <apply id="A2.SS1.p1.3.m3.1.1.cmml" xref="A2.SS1.p1.3.m3.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p1.3.m3.1.1.1.cmml" xref="A2.SS1.p1.3.m3.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p1.3.m3.1.1.2.cmml" xref="A2.SS1.p1.3.m3.1.1.2">
          𝑝
         </ci>
         <cn id="A2.SS1.p1.3.m3.1.1.3.cmml" type="integer" xref="A2.SS1.p1.3.m3.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p1.3.m3.1c">
        p_{1}
       </annotation>
      </semantics>
     </math>
     contains any instructions, the database schema, and the user’s request.
     <math alttext="r_{1}" class="ltx_Math" display="inline" id="A2.SS1.p1.4.m4.1">
      <semantics id="A2.SS1.p1.4.m4.1a">
       <msub id="A2.SS1.p1.4.m4.1.1" xref="A2.SS1.p1.4.m4.1.1.cmml">
        <mi id="A2.SS1.p1.4.m4.1.1.2" xref="A2.SS1.p1.4.m4.1.1.2.cmml">
         r
        </mi>
        <mn id="A2.SS1.p1.4.m4.1.1.3" xref="A2.SS1.p1.4.m4.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p1.4.m4.1b">
        <apply id="A2.SS1.p1.4.m4.1.1.cmml" xref="A2.SS1.p1.4.m4.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p1.4.m4.1.1.1.cmml" xref="A2.SS1.p1.4.m4.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p1.4.m4.1.1.2.cmml" xref="A2.SS1.p1.4.m4.1.1.2">
          𝑟
         </ci>
         <cn id="A2.SS1.p1.4.m4.1.1.3.cmml" type="integer" xref="A2.SS1.p1.4.m4.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p1.4.m4.1c">
        r_{1}
       </annotation>
      </semantics>
     </math>
     is the correct SQL query which yields the information requested by the user.
     <math alttext="g_{1}=r_{1}" class="ltx_Math" display="inline" id="A2.SS1.p1.5.m5.1">
      <semantics id="A2.SS1.p1.5.m5.1a">
       <mrow id="A2.SS1.p1.5.m5.1.1" xref="A2.SS1.p1.5.m5.1.1.cmml">
        <msub id="A2.SS1.p1.5.m5.1.1.2" xref="A2.SS1.p1.5.m5.1.1.2.cmml">
         <mi id="A2.SS1.p1.5.m5.1.1.2.2" xref="A2.SS1.p1.5.m5.1.1.2.2.cmml">
          g
         </mi>
         <mn id="A2.SS1.p1.5.m5.1.1.2.3" xref="A2.SS1.p1.5.m5.1.1.2.3.cmml">
          1
         </mn>
        </msub>
        <mo id="A2.SS1.p1.5.m5.1.1.1" xref="A2.SS1.p1.5.m5.1.1.1.cmml">
         =
        </mo>
        <msub id="A2.SS1.p1.5.m5.1.1.3" xref="A2.SS1.p1.5.m5.1.1.3.cmml">
         <mi id="A2.SS1.p1.5.m5.1.1.3.2" xref="A2.SS1.p1.5.m5.1.1.3.2.cmml">
          r
         </mi>
         <mn id="A2.SS1.p1.5.m5.1.1.3.3" xref="A2.SS1.p1.5.m5.1.1.3.3.cmml">
          1
         </mn>
        </msub>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p1.5.m5.1b">
        <apply id="A2.SS1.p1.5.m5.1.1.cmml" xref="A2.SS1.p1.5.m5.1.1">
         <eq id="A2.SS1.p1.5.m5.1.1.1.cmml" xref="A2.SS1.p1.5.m5.1.1.1">
         </eq>
         <apply id="A2.SS1.p1.5.m5.1.1.2.cmml" xref="A2.SS1.p1.5.m5.1.1.2">
          <csymbol cd="ambiguous" id="A2.SS1.p1.5.m5.1.1.2.1.cmml" xref="A2.SS1.p1.5.m5.1.1.2">
           subscript
          </csymbol>
          <ci id="A2.SS1.p1.5.m5.1.1.2.2.cmml" xref="A2.SS1.p1.5.m5.1.1.2.2">
           𝑔
          </ci>
          <cn id="A2.SS1.p1.5.m5.1.1.2.3.cmml" type="integer" xref="A2.SS1.p1.5.m5.1.1.2.3">
           1
          </cn>
         </apply>
         <apply id="A2.SS1.p1.5.m5.1.1.3.cmml" xref="A2.SS1.p1.5.m5.1.1.3">
          <csymbol cd="ambiguous" id="A2.SS1.p1.5.m5.1.1.3.1.cmml" xref="A2.SS1.p1.5.m5.1.1.3">
           subscript
          </csymbol>
          <ci id="A2.SS1.p1.5.m5.1.1.3.2.cmml" xref="A2.SS1.p1.5.m5.1.1.3.2">
           𝑟
          </ci>
          <cn id="A2.SS1.p1.5.m5.1.1.3.3.cmml" type="integer" xref="A2.SS1.p1.5.m5.1.1.3.3">
           1
          </cn>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p1.5.m5.1c">
        g_{1}=r_{1}
       </annotation>
      </semantics>
     </math>
     because the trajectory ends on the same turn due to the system yielding the correct query.
     <math alttext="a_{1}=ANSWER" class="ltx_Math" display="inline" id="A2.SS1.p1.6.m6.1">
      <semantics id="A2.SS1.p1.6.m6.1a">
       <mrow id="A2.SS1.p1.6.m6.1.1" xref="A2.SS1.p1.6.m6.1.1.cmml">
        <msub id="A2.SS1.p1.6.m6.1.1.2" xref="A2.SS1.p1.6.m6.1.1.2.cmml">
         <mi id="A2.SS1.p1.6.m6.1.1.2.2" xref="A2.SS1.p1.6.m6.1.1.2.2.cmml">
          a
         </mi>
         <mn id="A2.SS1.p1.6.m6.1.1.2.3" xref="A2.SS1.p1.6.m6.1.1.2.3.cmml">
          1
         </mn>
        </msub>
        <mo id="A2.SS1.p1.6.m6.1.1.1" xref="A2.SS1.p1.6.m6.1.1.1.cmml">
         =
        </mo>
        <mrow id="A2.SS1.p1.6.m6.1.1.3" xref="A2.SS1.p1.6.m6.1.1.3.cmml">
         <mi id="A2.SS1.p1.6.m6.1.1.3.2" xref="A2.SS1.p1.6.m6.1.1.3.2.cmml">
          A
         </mi>
         <mo id="A2.SS1.p1.6.m6.1.1.3.1" lspace="0em" rspace="0em" xref="A2.SS1.p1.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p1.6.m6.1.1.3.3" xref="A2.SS1.p1.6.m6.1.1.3.3.cmml">
          N
         </mi>
         <mo id="A2.SS1.p1.6.m6.1.1.3.1a" lspace="0em" rspace="0em" xref="A2.SS1.p1.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p1.6.m6.1.1.3.4" xref="A2.SS1.p1.6.m6.1.1.3.4.cmml">
          S
         </mi>
         <mo id="A2.SS1.p1.6.m6.1.1.3.1b" lspace="0em" rspace="0em" xref="A2.SS1.p1.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p1.6.m6.1.1.3.5" xref="A2.SS1.p1.6.m6.1.1.3.5.cmml">
          W
         </mi>
         <mo id="A2.SS1.p1.6.m6.1.1.3.1c" lspace="0em" rspace="0em" xref="A2.SS1.p1.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p1.6.m6.1.1.3.6" xref="A2.SS1.p1.6.m6.1.1.3.6.cmml">
          E
         </mi>
         <mo id="A2.SS1.p1.6.m6.1.1.3.1d" lspace="0em" rspace="0em" xref="A2.SS1.p1.6.m6.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p1.6.m6.1.1.3.7" xref="A2.SS1.p1.6.m6.1.1.3.7.cmml">
          R
         </mi>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p1.6.m6.1b">
        <apply id="A2.SS1.p1.6.m6.1.1.cmml" xref="A2.SS1.p1.6.m6.1.1">
         <eq id="A2.SS1.p1.6.m6.1.1.1.cmml" xref="A2.SS1.p1.6.m6.1.1.1">
         </eq>
         <apply id="A2.SS1.p1.6.m6.1.1.2.cmml" xref="A2.SS1.p1.6.m6.1.1.2">
          <csymbol cd="ambiguous" id="A2.SS1.p1.6.m6.1.1.2.1.cmml" xref="A2.SS1.p1.6.m6.1.1.2">
           subscript
          </csymbol>
          <ci id="A2.SS1.p1.6.m6.1.1.2.2.cmml" xref="A2.SS1.p1.6.m6.1.1.2.2">
           𝑎
          </ci>
          <cn id="A2.SS1.p1.6.m6.1.1.2.3.cmml" type="integer" xref="A2.SS1.p1.6.m6.1.1.2.3">
           1
          </cn>
         </apply>
         <apply id="A2.SS1.p1.6.m6.1.1.3.cmml" xref="A2.SS1.p1.6.m6.1.1.3">
          <times id="A2.SS1.p1.6.m6.1.1.3.1.cmml" xref="A2.SS1.p1.6.m6.1.1.3.1">
          </times>
          <ci id="A2.SS1.p1.6.m6.1.1.3.2.cmml" xref="A2.SS1.p1.6.m6.1.1.3.2">
           𝐴
          </ci>
          <ci id="A2.SS1.p1.6.m6.1.1.3.3.cmml" xref="A2.SS1.p1.6.m6.1.1.3.3">
           𝑁
          </ci>
          <ci id="A2.SS1.p1.6.m6.1.1.3.4.cmml" xref="A2.SS1.p1.6.m6.1.1.3.4">
           𝑆
          </ci>
          <ci id="A2.SS1.p1.6.m6.1.1.3.5.cmml" xref="A2.SS1.p1.6.m6.1.1.3.5">
           𝑊
          </ci>
          <ci id="A2.SS1.p1.6.m6.1.1.3.6.cmml" xref="A2.SS1.p1.6.m6.1.1.3.6">
           𝐸
          </ci>
          <ci id="A2.SS1.p1.6.m6.1.1.3.7.cmml" xref="A2.SS1.p1.6.m6.1.1.3.7">
           𝑅
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p1.6.m6.1c">
        a_{1}=ANSWER
       </annotation>
      </semantics>
     </math>
     because the only action possible is to provide a SQL query.
    </p>
   </div>
   <div class="ltx_para" id="A2.SS1.p2">
    <p class="ltx_p" id="A2.SS1.p2.1">
     Our desired result in constructing AmbigSQL is to have a corpus which can be used to demonstrate to an LLM the linguistic differences between ambiguous and clear user requests. That is, given a fixed database schema and a target SQL query, we want a pair of requests such that one requires asking a clarification question and one does not. This would also result in a balanced dataset in which half of the requests require asking clarification questions, and half do not.
    </p>
   </div>
   <div class="ltx_para" id="A2.SS1.p3">
    <p class="ltx_p" id="A2.SS1.p3.1">
     We focus on three fundamental types of ambiguous information requests. Those in which the requested information is ambiguous (e.g., “Show details about singers ordered by age from the oldest to the youngest”), those in which the requested population is ambiguous (e.g., “Which ones who live in the state of Indiana?”; see Table
     <a class="ltx_ref" href="#A2.T8" title="Table A8 ‣ B.1 AmbigSQL Construction ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A8
      </span>
     </a>
     ), and finally, those in which the requested presentation of results is ambiguous (e.g. “Show name, country, age for all singers ordered by age”; see Table
     <a class="ltx_ref" href="#A2.T9" title="Table A9 ‣ B.1 AmbigSQL Construction ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A9
      </span>
     </a>
     ).
    </p>
   </div>
   <div class="ltx_para" id="A2.SS1.p4">
    <p class="ltx_p" id="A2.SS1.p4.8">
     We iterate through each of the examples in Spider, and use an LLM (Gemini Ultra 1.0) to synthesize a perturbed version of each unambiguous query, along with an appropriate clarifying question. For queries which require some manipulation of results presentation, we prompt an LLM to perturb the query such that the requested presentation style becomes ambiguous. Otherwise, we randomly select a perturbation strategy: either masking the requested information (Table
     <a class="ltx_ref" href="#A2.T9" title="Table A9 ‣ B.1 AmbigSQL Construction ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A9
      </span>
     </a>
     ) or masking the requested population (Table
     <a class="ltx_ref" href="#A2.T8" title="Table A8 ‣ B.1 AmbigSQL Construction ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A8
      </span>
     </a>
     ). For each of these three strategies, we use five in-context examples demonstrating the appropriate masking process. The exact in-context examples are given in the attached code. Each of these ambiguous queries are thus associated with conversations containing “ground truth” states at two timesteps,
     <math alttext="t_{1}" class="ltx_Math" display="inline" id="A2.SS1.p4.1.m1.1">
      <semantics id="A2.SS1.p4.1.m1.1a">
       <msub id="A2.SS1.p4.1.m1.1.1" xref="A2.SS1.p4.1.m1.1.1.cmml">
        <mi id="A2.SS1.p4.1.m1.1.1.2" xref="A2.SS1.p4.1.m1.1.1.2.cmml">
         t
        </mi>
        <mn id="A2.SS1.p4.1.m1.1.1.3" xref="A2.SS1.p4.1.m1.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p4.1.m1.1b">
        <apply id="A2.SS1.p4.1.m1.1.1.cmml" xref="A2.SS1.p4.1.m1.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p4.1.m1.1.1.1.cmml" xref="A2.SS1.p4.1.m1.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p4.1.m1.1.1.2.cmml" xref="A2.SS1.p4.1.m1.1.1.2">
          𝑡
         </ci>
         <cn id="A2.SS1.p4.1.m1.1.1.3.cmml" type="integer" xref="A2.SS1.p4.1.m1.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p4.1.m1.1c">
        t_{1}
       </annotation>
      </semantics>
     </math>
     and
     <math alttext="t_{2}" class="ltx_Math" display="inline" id="A2.SS1.p4.2.m2.1">
      <semantics id="A2.SS1.p4.2.m2.1a">
       <msub id="A2.SS1.p4.2.m2.1.1" xref="A2.SS1.p4.2.m2.1.1.cmml">
        <mi id="A2.SS1.p4.2.m2.1.1.2" xref="A2.SS1.p4.2.m2.1.1.2.cmml">
         t
        </mi>
        <mn id="A2.SS1.p4.2.m2.1.1.3" xref="A2.SS1.p4.2.m2.1.1.3.cmml">
         2
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p4.2.m2.1b">
        <apply id="A2.SS1.p4.2.m2.1.1.cmml" xref="A2.SS1.p4.2.m2.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p4.2.m2.1.1.1.cmml" xref="A2.SS1.p4.2.m2.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p4.2.m2.1.1.2.cmml" xref="A2.SS1.p4.2.m2.1.1.2">
          𝑡
         </ci>
         <cn id="A2.SS1.p4.2.m2.1.1.3.cmml" type="integer" xref="A2.SS1.p4.2.m2.1.1.3">
          2
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p4.2.m2.1c">
        t_{2}
       </annotation>
      </semantics>
     </math>
     .
     <math alttext="p_{1}" class="ltx_Math" display="inline" id="A2.SS1.p4.3.m3.1">
      <semantics id="A2.SS1.p4.3.m3.1a">
       <msub id="A2.SS1.p4.3.m3.1.1" xref="A2.SS1.p4.3.m3.1.1.cmml">
        <mi id="A2.SS1.p4.3.m3.1.1.2" xref="A2.SS1.p4.3.m3.1.1.2.cmml">
         p
        </mi>
        <mn id="A2.SS1.p4.3.m3.1.1.3" xref="A2.SS1.p4.3.m3.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p4.3.m3.1b">
        <apply id="A2.SS1.p4.3.m3.1.1.cmml" xref="A2.SS1.p4.3.m3.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p4.3.m3.1.1.1.cmml" xref="A2.SS1.p4.3.m3.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p4.3.m3.1.1.2.cmml" xref="A2.SS1.p4.3.m3.1.1.2">
          𝑝
         </ci>
         <cn id="A2.SS1.p4.3.m3.1.1.3.cmml" type="integer" xref="A2.SS1.p4.3.m3.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p4.3.m3.1c">
        p_{1}
       </annotation>
      </semantics>
     </math>
     contains an ambiguous user request,
     <math alttext="r_{1}" class="ltx_Math" display="inline" id="A2.SS1.p4.4.m4.1">
      <semantics id="A2.SS1.p4.4.m4.1a">
       <msub id="A2.SS1.p4.4.m4.1.1" xref="A2.SS1.p4.4.m4.1.1.cmml">
        <mi id="A2.SS1.p4.4.m4.1.1.2" xref="A2.SS1.p4.4.m4.1.1.2.cmml">
         r
        </mi>
        <mn id="A2.SS1.p4.4.m4.1.1.3" xref="A2.SS1.p4.4.m4.1.1.3.cmml">
         1
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p4.4.m4.1b">
        <apply id="A2.SS1.p4.4.m4.1.1.cmml" xref="A2.SS1.p4.4.m4.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p4.4.m4.1.1.1.cmml" xref="A2.SS1.p4.4.m4.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p4.4.m4.1.1.2.cmml" xref="A2.SS1.p4.4.m4.1.1.2">
          𝑟
         </ci>
         <cn id="A2.SS1.p4.4.m4.1.1.3.cmml" type="integer" xref="A2.SS1.p4.4.m4.1.1.3">
          1
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p4.4.m4.1c">
        r_{1}
       </annotation>
      </semantics>
     </math>
     is the synthesized clarification question, and accordingly,
     <math alttext="a_{1}=CLARIFY" class="ltx_Math" display="inline" id="A2.SS1.p4.5.m5.1">
      <semantics id="A2.SS1.p4.5.m5.1a">
       <mrow id="A2.SS1.p4.5.m5.1.1" xref="A2.SS1.p4.5.m5.1.1.cmml">
        <msub id="A2.SS1.p4.5.m5.1.1.2" xref="A2.SS1.p4.5.m5.1.1.2.cmml">
         <mi id="A2.SS1.p4.5.m5.1.1.2.2" xref="A2.SS1.p4.5.m5.1.1.2.2.cmml">
          a
         </mi>
         <mn id="A2.SS1.p4.5.m5.1.1.2.3" xref="A2.SS1.p4.5.m5.1.1.2.3.cmml">
          1
         </mn>
        </msub>
        <mo id="A2.SS1.p4.5.m5.1.1.1" xref="A2.SS1.p4.5.m5.1.1.1.cmml">
         =
        </mo>
        <mrow id="A2.SS1.p4.5.m5.1.1.3" xref="A2.SS1.p4.5.m5.1.1.3.cmml">
         <mi id="A2.SS1.p4.5.m5.1.1.3.2" xref="A2.SS1.p4.5.m5.1.1.3.2.cmml">
          C
         </mi>
         <mo id="A2.SS1.p4.5.m5.1.1.3.1" lspace="0em" rspace="0em" xref="A2.SS1.p4.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.5.m5.1.1.3.3" xref="A2.SS1.p4.5.m5.1.1.3.3.cmml">
          L
         </mi>
         <mo id="A2.SS1.p4.5.m5.1.1.3.1a" lspace="0em" rspace="0em" xref="A2.SS1.p4.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.5.m5.1.1.3.4" xref="A2.SS1.p4.5.m5.1.1.3.4.cmml">
          A
         </mi>
         <mo id="A2.SS1.p4.5.m5.1.1.3.1b" lspace="0em" rspace="0em" xref="A2.SS1.p4.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.5.m5.1.1.3.5" xref="A2.SS1.p4.5.m5.1.1.3.5.cmml">
          R
         </mi>
         <mo id="A2.SS1.p4.5.m5.1.1.3.1c" lspace="0em" rspace="0em" xref="A2.SS1.p4.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.5.m5.1.1.3.6" xref="A2.SS1.p4.5.m5.1.1.3.6.cmml">
          I
         </mi>
         <mo id="A2.SS1.p4.5.m5.1.1.3.1d" lspace="0em" rspace="0em" xref="A2.SS1.p4.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.5.m5.1.1.3.7" xref="A2.SS1.p4.5.m5.1.1.3.7.cmml">
          F
         </mi>
         <mo id="A2.SS1.p4.5.m5.1.1.3.1e" lspace="0em" rspace="0em" xref="A2.SS1.p4.5.m5.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.5.m5.1.1.3.8" xref="A2.SS1.p4.5.m5.1.1.3.8.cmml">
          Y
         </mi>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p4.5.m5.1b">
        <apply id="A2.SS1.p4.5.m5.1.1.cmml" xref="A2.SS1.p4.5.m5.1.1">
         <eq id="A2.SS1.p4.5.m5.1.1.1.cmml" xref="A2.SS1.p4.5.m5.1.1.1">
         </eq>
         <apply id="A2.SS1.p4.5.m5.1.1.2.cmml" xref="A2.SS1.p4.5.m5.1.1.2">
          <csymbol cd="ambiguous" id="A2.SS1.p4.5.m5.1.1.2.1.cmml" xref="A2.SS1.p4.5.m5.1.1.2">
           subscript
          </csymbol>
          <ci id="A2.SS1.p4.5.m5.1.1.2.2.cmml" xref="A2.SS1.p4.5.m5.1.1.2.2">
           𝑎
          </ci>
          <cn id="A2.SS1.p4.5.m5.1.1.2.3.cmml" type="integer" xref="A2.SS1.p4.5.m5.1.1.2.3">
           1
          </cn>
         </apply>
         <apply id="A2.SS1.p4.5.m5.1.1.3.cmml" xref="A2.SS1.p4.5.m5.1.1.3">
          <times id="A2.SS1.p4.5.m5.1.1.3.1.cmml" xref="A2.SS1.p4.5.m5.1.1.3.1">
          </times>
          <ci id="A2.SS1.p4.5.m5.1.1.3.2.cmml" xref="A2.SS1.p4.5.m5.1.1.3.2">
           𝐶
          </ci>
          <ci id="A2.SS1.p4.5.m5.1.1.3.3.cmml" xref="A2.SS1.p4.5.m5.1.1.3.3">
           𝐿
          </ci>
          <ci id="A2.SS1.p4.5.m5.1.1.3.4.cmml" xref="A2.SS1.p4.5.m5.1.1.3.4">
           𝐴
          </ci>
          <ci id="A2.SS1.p4.5.m5.1.1.3.5.cmml" xref="A2.SS1.p4.5.m5.1.1.3.5">
           𝑅
          </ci>
          <ci id="A2.SS1.p4.5.m5.1.1.3.6.cmml" xref="A2.SS1.p4.5.m5.1.1.3.6">
           𝐼
          </ci>
          <ci id="A2.SS1.p4.5.m5.1.1.3.7.cmml" xref="A2.SS1.p4.5.m5.1.1.3.7">
           𝐹
          </ci>
          <ci id="A2.SS1.p4.5.m5.1.1.3.8.cmml" xref="A2.SS1.p4.5.m5.1.1.3.8">
           𝑌
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p4.5.m5.1c">
        a_{1}=CLARIFY
       </annotation>
      </semantics>
     </math>
     .
     <math alttext="p_{2}" class="ltx_Math" display="inline" id="A2.SS1.p4.6.m6.1">
      <semantics id="A2.SS1.p4.6.m6.1a">
       <msub id="A2.SS1.p4.6.m6.1.1" xref="A2.SS1.p4.6.m6.1.1.cmml">
        <mi id="A2.SS1.p4.6.m6.1.1.2" xref="A2.SS1.p4.6.m6.1.1.2.cmml">
         p
        </mi>
        <mn id="A2.SS1.p4.6.m6.1.1.3" xref="A2.SS1.p4.6.m6.1.1.3.cmml">
         2
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p4.6.m6.1b">
        <apply id="A2.SS1.p4.6.m6.1.1.cmml" xref="A2.SS1.p4.6.m6.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p4.6.m6.1.1.1.cmml" xref="A2.SS1.p4.6.m6.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p4.6.m6.1.1.2.cmml" xref="A2.SS1.p4.6.m6.1.1.2">
          𝑝
         </ci>
         <cn id="A2.SS1.p4.6.m6.1.1.3.cmml" type="integer" xref="A2.SS1.p4.6.m6.1.1.3">
          2
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p4.6.m6.1c">
        p_{2}
       </annotation>
      </semantics>
     </math>
     contains the disambiguated user request,
     <math alttext="r_{2}" class="ltx_Math" display="inline" id="A2.SS1.p4.7.m7.1">
      <semantics id="A2.SS1.p4.7.m7.1a">
       <msub id="A2.SS1.p4.7.m7.1.1" xref="A2.SS1.p4.7.m7.1.1.cmml">
        <mi id="A2.SS1.p4.7.m7.1.1.2" xref="A2.SS1.p4.7.m7.1.1.2.cmml">
         r
        </mi>
        <mn id="A2.SS1.p4.7.m7.1.1.3" xref="A2.SS1.p4.7.m7.1.1.3.cmml">
         2
        </mn>
       </msub>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p4.7.m7.1b">
        <apply id="A2.SS1.p4.7.m7.1.1.cmml" xref="A2.SS1.p4.7.m7.1.1">
         <csymbol cd="ambiguous" id="A2.SS1.p4.7.m7.1.1.1.cmml" xref="A2.SS1.p4.7.m7.1.1">
          subscript
         </csymbol>
         <ci id="A2.SS1.p4.7.m7.1.1.2.cmml" xref="A2.SS1.p4.7.m7.1.1.2">
          𝑟
         </ci>
         <cn id="A2.SS1.p4.7.m7.1.1.3.cmml" type="integer" xref="A2.SS1.p4.7.m7.1.1.3">
          2
         </cn>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p4.7.m7.1c">
        r_{2}
       </annotation>
      </semantics>
     </math>
     is the correct ground truth SQL query, and accordingly,
     <math alttext="a_{2}=ANSWER" class="ltx_Math" display="inline" id="A2.SS1.p4.8.m8.1">
      <semantics id="A2.SS1.p4.8.m8.1a">
       <mrow id="A2.SS1.p4.8.m8.1.1" xref="A2.SS1.p4.8.m8.1.1.cmml">
        <msub id="A2.SS1.p4.8.m8.1.1.2" xref="A2.SS1.p4.8.m8.1.1.2.cmml">
         <mi id="A2.SS1.p4.8.m8.1.1.2.2" xref="A2.SS1.p4.8.m8.1.1.2.2.cmml">
          a
         </mi>
         <mn id="A2.SS1.p4.8.m8.1.1.2.3" xref="A2.SS1.p4.8.m8.1.1.2.3.cmml">
          2
         </mn>
        </msub>
        <mo id="A2.SS1.p4.8.m8.1.1.1" xref="A2.SS1.p4.8.m8.1.1.1.cmml">
         =
        </mo>
        <mrow id="A2.SS1.p4.8.m8.1.1.3" xref="A2.SS1.p4.8.m8.1.1.3.cmml">
         <mi id="A2.SS1.p4.8.m8.1.1.3.2" xref="A2.SS1.p4.8.m8.1.1.3.2.cmml">
          A
         </mi>
         <mo id="A2.SS1.p4.8.m8.1.1.3.1" lspace="0em" rspace="0em" xref="A2.SS1.p4.8.m8.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.8.m8.1.1.3.3" xref="A2.SS1.p4.8.m8.1.1.3.3.cmml">
          N
         </mi>
         <mo id="A2.SS1.p4.8.m8.1.1.3.1a" lspace="0em" rspace="0em" xref="A2.SS1.p4.8.m8.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.8.m8.1.1.3.4" xref="A2.SS1.p4.8.m8.1.1.3.4.cmml">
          S
         </mi>
         <mo id="A2.SS1.p4.8.m8.1.1.3.1b" lspace="0em" rspace="0em" xref="A2.SS1.p4.8.m8.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.8.m8.1.1.3.5" xref="A2.SS1.p4.8.m8.1.1.3.5.cmml">
          W
         </mi>
         <mo id="A2.SS1.p4.8.m8.1.1.3.1c" lspace="0em" rspace="0em" xref="A2.SS1.p4.8.m8.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.8.m8.1.1.3.6" xref="A2.SS1.p4.8.m8.1.1.3.6.cmml">
          E
         </mi>
         <mo id="A2.SS1.p4.8.m8.1.1.3.1d" lspace="0em" rspace="0em" xref="A2.SS1.p4.8.m8.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="A2.SS1.p4.8.m8.1.1.3.7" xref="A2.SS1.p4.8.m8.1.1.3.7.cmml">
          R
         </mi>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="A2.SS1.p4.8.m8.1b">
        <apply id="A2.SS1.p4.8.m8.1.1.cmml" xref="A2.SS1.p4.8.m8.1.1">
         <eq id="A2.SS1.p4.8.m8.1.1.1.cmml" xref="A2.SS1.p4.8.m8.1.1.1">
         </eq>
         <apply id="A2.SS1.p4.8.m8.1.1.2.cmml" xref="A2.SS1.p4.8.m8.1.1.2">
          <csymbol cd="ambiguous" id="A2.SS1.p4.8.m8.1.1.2.1.cmml" xref="A2.SS1.p4.8.m8.1.1.2">
           subscript
          </csymbol>
          <ci id="A2.SS1.p4.8.m8.1.1.2.2.cmml" xref="A2.SS1.p4.8.m8.1.1.2.2">
           𝑎
          </ci>
          <cn id="A2.SS1.p4.8.m8.1.1.2.3.cmml" type="integer" xref="A2.SS1.p4.8.m8.1.1.2.3">
           2
          </cn>
         </apply>
         <apply id="A2.SS1.p4.8.m8.1.1.3.cmml" xref="A2.SS1.p4.8.m8.1.1.3">
          <times id="A2.SS1.p4.8.m8.1.1.3.1.cmml" xref="A2.SS1.p4.8.m8.1.1.3.1">
          </times>
          <ci id="A2.SS1.p4.8.m8.1.1.3.2.cmml" xref="A2.SS1.p4.8.m8.1.1.3.2">
           𝐴
          </ci>
          <ci id="A2.SS1.p4.8.m8.1.1.3.3.cmml" xref="A2.SS1.p4.8.m8.1.1.3.3">
           𝑁
          </ci>
          <ci id="A2.SS1.p4.8.m8.1.1.3.4.cmml" xref="A2.SS1.p4.8.m8.1.1.3.4">
           𝑆
          </ci>
          <ci id="A2.SS1.p4.8.m8.1.1.3.5.cmml" xref="A2.SS1.p4.8.m8.1.1.3.5">
           𝑊
          </ci>
          <ci id="A2.SS1.p4.8.m8.1.1.3.6.cmml" xref="A2.SS1.p4.8.m8.1.1.3.6">
           𝐸
          </ci>
          <ci id="A2.SS1.p4.8.m8.1.1.3.7.cmml" xref="A2.SS1.p4.8.m8.1.1.3.7">
           𝑅
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A2.SS1.p4.8.m8.1c">
        a_{2}=ANSWER
       </annotation>
      </semantics>
     </math>
     .
    </p>
   </div>
   <div class="ltx_para" id="A2.SS1.p5">
    <p class="ltx_p" id="A2.SS1.p5.1">
     The code to create AmbigSQL will be released publicly. Each instance includes the database metadata included in Spider, but for all experiments used in this paper, the database schema is linearized into the format used for prompting in
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib66" title="">
       66
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib67" title="">
       67
      </a>
      ]
     </cite>
     .
    </p>
   </div>
   <figure class="ltx_table" id="A2.T9">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A9:
     </span>
     <span class="ltx_text ltx_font_bold" id="A2.T9.4.1">
      In-context example given as part of a prompt for creating information requests in which the target columns are ambiguous.
     </span>
     The format of the black text represents how a ground-truth request would be used to form the prompt for a target example. The blue text represents the content that would be synthesized from an LLM. We omit the database schema from the paper.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A2.T9.2">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A2.T9.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A2.T9.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T9.2.2.2.2">
         <span class="ltx_p" id="A2.T9.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T9.1.1.1.1.1.m1.1">
           <semantics id="A2.T9.1.1.1.1.1.m1.1a">
            <mo id="A2.T9.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T9.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T9.1.1.1.1.1.m1.1b">
             <ci id="A2.T9.1.1.1.1.1.m1.1.1.cmml" xref="A2.T9.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T9.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T9.2.2.2.2.2.1" style="font-size:90%;">
           Database Schema Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T9.2.2.2.2.2.m2.1">
           <semantics id="A2.T9.2.2.2.2.2.m2.1a">
            <mo id="A2.T9.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T9.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T9.2.2.2.2.2.m2.1b">
             <ci id="A2.T9.2.2.2.2.2.m2.1.1.cmml" xref="A2.T9.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T9.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T9.2.3.1">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T9.2.3.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T9.2.3.1.1.1">
         <span class="ltx_p" id="A2.T9.2.3.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T9.2.3.1.1.1.1.1" style="font-size:90%;">
           The target SQL query is the following:
          </span>
         </span>
         <pre class="ltx_verbatim ltx_font_typewriter" id="A2.T9.2.3.1.1.1.2" style="font-size:90%;">
SELECT professional_id ,  last_name ,  cell_number FROM Professionals
WHERE state  =  ’Indiana’ UNION SELECT T1.professional_id ,  T1.last_name ,
T1.cell_number FROM Professionals AS T1 JOIN Treatments AS T2 ON
T1.professional_id  =  T2.professional_id
GROUP BY T1.professional_id HAVING count(*)  &gt;  2
</pre>
         <span class="ltx_p" id="A2.T9.2.3.1.1.1.3">
          <span class="ltx_text" id="A2.T9.2.3.1.1.1.3.1" style="font-size:90%;">
           Here is a clear request that would correspond to this SQL query:
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T9.2.4.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T9.2.4.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T9.2.4.2.1.1">
         <span class="ltx_p" id="A2.T9.2.4.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T9.2.4.2.1.1.1.1" style="font-size:90%;">
           “Which professionals live in the state of Indiana or have done treatment on more than 2 treatments? List his or her id, last name and cell phone.”
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T9.2.5.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T9.2.5.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T9.2.5.3.1.1">
         <span class="ltx_p" id="A2.T9.2.5.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T9.2.5.3.1.1.1.1" style="font-size:90%;">
           Here is the same request converted into an ambiguous format by underspecifying the target columns:
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T9.2.6.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T9.2.6.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T9.2.6.4.1.1">
         <span class="ltx_p" id="A2.T9.2.6.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T9.2.6.4.1.1.1.1" style="font-size:90%;color:#0000FF;">
           “Which professionals live in the state of Indiana or have done treatment on more than 2 treatments?”
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T9.2.7.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T9.2.7.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T9.2.7.5.1.1">
         <span class="ltx_p" id="A2.T9.2.7.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T9.2.7.5.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Here is an appropriate clarifying question to recover the clear request from the ambiguous request:
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T9.2.8.6">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A2.T9.2.8.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T9.2.8.6.1.1">
         <span class="ltx_p" id="A2.T9.2.8.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T9.2.8.6.1.1.1.1" style="font-size:90%;color:#0000FF;">
           ‘’Which information of the professionals do you want to know?”
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
   <figure class="ltx_table" id="A2.T10">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A10:
     </span>
     <span class="ltx_text ltx_font_bold" id="A2.T10.2.1">
      Examination of ambiguity in AmbigSQL.
     </span>
     Competitive high capacity LLMs struggle with producing “correct” SQL queries given only ambiguous user requests. Including disambiguation turns in the prompts greatly improves execution match.
    </figcaption>
    <p class="ltx_p ltx_align_center" id="A2.T10.3">
     <span class="ltx_text ltx_inline-block" id="A2.T10.3.1" style="width:433.6pt;">
      <span class="ltx_inline-block ltx_transformed_outer" id="A2.T10.3.1.1" style="width:437.4pt;height:55pt;vertical-align:-1.0pt;">
       <span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
        <span class="ltx_p" id="A2.T10.3.1.1.1">
         <span class="ltx_text" id="A2.T10.3.1.1.1.1">
          <span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A2.T10.3.1.1.1.1.1">
           <span class="ltx_thead">
            <span class="ltx_tr" id="A2.T10.3.1.1.1.1.1.1.1">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_tt" id="A2.T10.3.1.1.1.1.1.1.1.1">
              Model
             </span>
             <span class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A2.T10.3.1.1.1.1.1.1.1.2">
              Ambiguous Request Execution Match
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_th ltx_th_column ltx_border_tt" id="A2.T10.3.1.1.1.1.1.1.1.3">
              Execution Match with Clarification Turns
             </span>
            </span>
           </span>
           <span class="ltx_tbody">
            <span class="ltx_tr" id="A2.T10.3.1.1.1.1.1.2.1">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A2.T10.3.1.1.1.1.1.2.1.1">
              Gemini Pro
             </span>
             <span class="ltx_td ltx_align_center ltx_border_t" id="A2.T10.3.1.1.1.1.1.2.1.2">
              28.5
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_t" id="A2.T10.3.1.1.1.1.1.2.1.3">
              68.7
             </span>
            </span>
            <span class="ltx_tr" id="A2.T10.3.1.1.1.1.1.3.2">
             <span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="A2.T10.3.1.1.1.1.1.3.2.1">
              Gemini Ultra
             </span>
             <span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T10.3.1.1.1.1.1.3.2.2">
              31.2
             </span>
             <span class="ltx_td ltx_nopad_r ltx_align_center ltx_border_bb" id="A2.T10.3.1.1.1.1.1.3.2.3">
              77.0
             </span>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </p>
   </figure>
  </section>
  <section class="ltx_subsection" id="A2.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     B.2
    </span>
    Examining Clarification Need in AmbigSQL
   </h3>
   <div class="ltx_para" id="A2.SS2.p1">
    <p class="ltx_p" id="A2.SS2.p1.1">
     We primarily are concerned with examining the extent to which clarification questions are necessary in providing the requested SQL queries. Inspired by the notion of “recovery” presented in
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib68" title="">
       68
      </a>
      ]
     </cite>
     , we examine the performance in constructing each of the unique SQL queries with and without the gold clarification turns. Concretely, we first evaluated the Execution Match performance achieved by prompting LLMs with only the ambiguous versions of each user request, with each instruction including the instruction that the LLM must construct a SQL query. Then, we prompted LLMs to construct the same SQL queries, but given the disambiguation turns as conversation history (i.e., with context consisting of the original ambiguous request, the clarification question, and then non-ambiguous request).
    </p>
   </div>
   <div class="ltx_para" id="A2.SS2.p2">
    <p class="ltx_p" id="A2.SS2.p2.1">
     We conducted this analysis on the test set using two competitive LLMs, Gemini Pro 1.0 and Gemini Ultra 1.0, with the Execution Match tool from Spider and CoSQL
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib57" title="">
       57
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib65" title="">
       65
      </a>
      ]
     </cite>
     . Our results are shown in Table
     <a class="ltx_ref" href="#A2.T10" title="Table A10 ‣ B.1 AmbigSQL Construction ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A10
      </span>
     </a>
     . Given only an ambiguous request, both Gemini Pro and Gemini Ultra struggle to consistently construct the correct SQL query. However, given disambiguation turns, Execution Match improves dramatically, approximating the performance on the validation set given in
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib66" title="">
       66
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib67" title="">
       67
      </a>
      ]
     </cite>
     .
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="A2.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     B.3
    </span>
    Examples
   </h3>
   <div class="ltx_para" id="A2.SS3.p1">
    <p class="ltx_p" id="A2.SS3.p1.1">
     Table
     <a class="ltx_ref" href="#A2.T11" title="Table A11 ‣ B.3 Examples ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A11
      </span>
     </a>
     and Table
     <a class="ltx_ref" href="#A2.T12" title="Table A12 ‣ B.3 Examples ‣ Appendix B AmbigSQL: Modeling Ambiguity in Conversational Text-to-SQL ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A12
      </span>
     </a>
     each contain a pair of examples from AmbigSQL’s test set. Each example contains the prompt which is provided to an LLM, the immediate ground truth response to the user request provided as part of the prompt, and the resulting ground truth trajectory (for examples which include clarifying questions). The examples in each table are paired — the top example is directly taken from Spider and converted into a conversational format, and the bottom example is the result of introducing ambiguity into the first example.
    </p>
   </div>
   <figure class="ltx_table" id="A2.T11">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A11:
     </span>
     <span class="ltx_text ltx_font_bold" id="A2.T11.16.1">
      Examples from the AmbigSQL test set using the “concert_singer” database.
     </span>
     Black text: context provided to an LLM as a prompt.
     <span class="ltx_text" id="A2.T11.17.2" style="color:#0000FF;">
      Blue
     </span>
     text: ground-truth single-turn response.
     <span class="ltx_text" id="A2.T11.18.3" style="color:#BF0040;">
      Purple
     </span>
     text: target trajectory which should be achieved through simulation.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A2.T11.12">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A2.T11.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A2.T11.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.2.2.2.2">
         <span class="ltx_p" id="A2.T11.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T11.1.1.1.1.1.m1.1">
           <semantics id="A2.T11.1.1.1.1.1.m1.1a">
            <mo id="A2.T11.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T11.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.1.1.1.1.1.m1.1b">
             <ci id="A2.T11.1.1.1.1.1.m1.1.1.cmml" xref="A2.T11.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T11.2.2.2.2.2.1" style="font-size:90%;">
           Instruction
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T11.2.2.2.2.2.m2.1">
           <semantics id="A2.T11.2.2.2.2.2.m2.1a">
            <mo id="A2.T11.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T11.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.2.2.2.2.2.m2.1b">
             <ci id="A2.T11.2.2.2.2.2.m2.1.1.cmml" xref="A2.T11.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.13.1">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.12.13.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.13.1.1.1">
         <span class="ltx_p" id="A2.T11.12.13.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T11.12.13.1.1.1.1.1" style="font-size:90%;">
           You are an Assistant having a conversation with a User who would like to retrieve some information from a SQL database with the schema provided below. If you are confident in the User’s intent, you should provide the appropriate SQL query. Otherwise, you should ask the User a clarifying question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.4.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.4.4.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.4.4.2.2">
         <span class="ltx_p" id="A2.T11.4.4.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T11.3.3.1.1.1.m1.1">
           <semantics id="A2.T11.3.3.1.1.1.m1.1a">
            <mo id="A2.T11.3.3.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T11.3.3.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.3.3.1.1.1.m1.1b">
             <ci id="A2.T11.3.3.1.1.1.m1.1.1.cmml" xref="A2.T11.3.3.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.3.3.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T11.4.4.2.2.2.1" style="font-size:90%;">
           Database Schema Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T11.4.4.2.2.2.m2.1">
           <semantics id="A2.T11.4.4.2.2.2.m2.1a">
            <mo id="A2.T11.4.4.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T11.4.4.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.4.4.2.2.2.m2.1b">
             <ci id="A2.T11.4.4.2.2.2.m2.1.1.cmml" xref="A2.T11.4.4.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.4.4.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.6.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.6.6.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.6.6.2.2">
         <span class="ltx_p" id="A2.T11.6.6.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T11.5.5.1.1.1.m1.1">
           <semantics id="A2.T11.5.5.1.1.1.m1.1a">
            <mo id="A2.T11.5.5.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T11.5.5.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.5.5.1.1.1.m1.1b">
             <ci id="A2.T11.5.5.1.1.1.m1.1.1.cmml" xref="A2.T11.5.5.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.5.5.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T11.6.6.2.2.2.1" style="font-size:90%;">
           Conversation
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T11.6.6.2.2.2.m2.1">
           <semantics id="A2.T11.6.6.2.2.2.m2.1a">
            <mo id="A2.T11.6.6.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T11.6.6.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.6.6.2.2.2.m2.1b">
             <ci id="A2.T11.6.6.2.2.2.m2.1.1.cmml" xref="A2.T11.6.6.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.6.6.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.14.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.12.14.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.14.2.1.1">
         <span class="ltx_p" id="A2.T11.12.14.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T11.12.14.2.1.1.1.1" style="font-size:90%;">
           User: How many singers do we have?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.15.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.12.15.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.15.3.1.1">
         <span class="ltx_p" id="A2.T11.12.15.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T11.12.15.3.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Assistant: SELECT count(*) FROM singer
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.8.8">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T11.8.8.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.8.8.2.2">
         <span class="ltx_p" id="A2.T11.8.8.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T11.7.7.1.1.1.m1.1">
           <semantics id="A2.T11.7.7.1.1.1.m1.1a">
            <mo id="A2.T11.7.7.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T11.7.7.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.7.7.1.1.1.m1.1b">
             <ci id="A2.T11.7.7.1.1.1.m1.1.1.cmml" xref="A2.T11.7.7.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.7.7.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T11.8.8.2.2.2.1" style="font-size:90%;">
           Instruction
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T11.8.8.2.2.2.m2.1">
           <semantics id="A2.T11.8.8.2.2.2.m2.1a">
            <mo id="A2.T11.8.8.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T11.8.8.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.8.8.2.2.2.m2.1b">
             <ci id="A2.T11.8.8.2.2.2.m2.1.1.cmml" xref="A2.T11.8.8.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.8.8.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.16.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.12.16.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.16.4.1.1">
         <span class="ltx_p" id="A2.T11.12.16.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T11.12.16.4.1.1.1.1" style="font-size:90%;">
           You are an Assistant having a conversation with a User who would like to retrieve some information from a SQL database with the schema provided below. If you are confident in the User’s intent, you should provide the appropriate SQL query. Otherwise, you should ask the User a clarifying question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.10.10">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.10.10.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.10.10.2.2">
         <span class="ltx_p" id="A2.T11.10.10.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T11.9.9.1.1.1.m1.1">
           <semantics id="A2.T11.9.9.1.1.1.m1.1a">
            <mo id="A2.T11.9.9.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T11.9.9.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.9.9.1.1.1.m1.1b">
             <ci id="A2.T11.9.9.1.1.1.m1.1.1.cmml" xref="A2.T11.9.9.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.9.9.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T11.10.10.2.2.2.1" style="font-size:90%;">
           Database Schema Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T11.10.10.2.2.2.m2.1">
           <semantics id="A2.T11.10.10.2.2.2.m2.1a">
            <mo id="A2.T11.10.10.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T11.10.10.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.10.10.2.2.2.m2.1b">
             <ci id="A2.T11.10.10.2.2.2.m2.1.1.cmml" xref="A2.T11.10.10.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.10.10.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.12">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.12.12.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.12.2.2">
         <span class="ltx_p" id="A2.T11.12.12.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T11.11.11.1.1.1.m1.1">
           <semantics id="A2.T11.11.11.1.1.1.m1.1a">
            <mo id="A2.T11.11.11.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T11.11.11.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.11.11.1.1.1.m1.1b">
             <ci id="A2.T11.11.11.1.1.1.m1.1.1.cmml" xref="A2.T11.11.11.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.11.11.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T11.12.12.2.2.2.1" style="font-size:90%;">
           Conversation
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T11.12.12.2.2.2.m2.1">
           <semantics id="A2.T11.12.12.2.2.2.m2.1a">
            <mo id="A2.T11.12.12.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T11.12.12.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T11.12.12.2.2.2.m2.1b">
             <ci id="A2.T11.12.12.2.2.2.m2.1.1.cmml" xref="A2.T11.12.12.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T11.12.12.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.17.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.12.17.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.17.5.1.1">
         <span class="ltx_p" id="A2.T11.12.17.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T11.12.17.5.1.1.1.1" style="font-size:90%;">
           User: Tell me about the singers.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.18.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.12.18.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.18.6.1.1">
         <span class="ltx_p" id="A2.T11.12.18.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T11.12.18.6.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Assistant: What specifically would you like to know about the singers? For example, would you like to know how many there are, or see a list of their names?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.19.7">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T11.12.19.7.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.19.7.1.1">
         <span class="ltx_p" id="A2.T11.12.19.7.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T11.12.19.7.1.1.1.1" style="font-size:90%;color:#BF0040;">
           User: How many singers do we have?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T11.12.20.8">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A2.T11.12.20.8.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T11.12.20.8.1.1">
         <span class="ltx_p" id="A2.T11.12.20.8.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T11.12.20.8.1.1.1.1" style="font-size:90%;color:#BF0040;">
           Assistant: SELECT count(*) FROM singer
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
   <figure class="ltx_table" id="A2.T12">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A12:
     </span>
     <span class="ltx_text ltx_font_bold" id="A2.T12.16.1">
      Examples from the AmbigSQL test set using the “flight_2” database.
     </span>
     Black text: context provided to an LLM as a prompt.
     <span class="ltx_text" id="A2.T12.17.2" style="color:#0000FF;">
      Blue
     </span>
     text: ground-truth single-turn response.
     <span class="ltx_text" id="A2.T12.18.3" style="color:#BF0040;">
      Purple
     </span>
     text: target trajectory which should be achieved through simulation.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A2.T12.12">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A2.T12.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A2.T12.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.2.2.2.2">
         <span class="ltx_p" id="A2.T12.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T12.1.1.1.1.1.m1.1">
           <semantics id="A2.T12.1.1.1.1.1.m1.1a">
            <mo id="A2.T12.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T12.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.1.1.1.1.1.m1.1b">
             <ci id="A2.T12.1.1.1.1.1.m1.1.1.cmml" xref="A2.T12.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T12.2.2.2.2.2.1" style="font-size:90%;">
           Instruction
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T12.2.2.2.2.2.m2.1">
           <semantics id="A2.T12.2.2.2.2.2.m2.1a">
            <mo id="A2.T12.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T12.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.2.2.2.2.2.m2.1b">
             <ci id="A2.T12.2.2.2.2.2.m2.1.1.cmml" xref="A2.T12.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.13.1">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.12.13.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.13.1.1.1">
         <span class="ltx_p" id="A2.T12.12.13.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T12.12.13.1.1.1.1.1" style="font-size:90%;">
           You are an Assistant having a conversation with a User who would like to retrieve some information from a SQL database with the schema provided below. If you are confident in the User’s intent, you should provide the appropriate SQL query. Otherwise, you should ask the User a clarifying question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.4.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.4.4.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.4.4.2.2">
         <span class="ltx_p" id="A2.T12.4.4.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T12.3.3.1.1.1.m1.1">
           <semantics id="A2.T12.3.3.1.1.1.m1.1a">
            <mo id="A2.T12.3.3.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T12.3.3.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.3.3.1.1.1.m1.1b">
             <ci id="A2.T12.3.3.1.1.1.m1.1.1.cmml" xref="A2.T12.3.3.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.3.3.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T12.4.4.2.2.2.1" style="font-size:90%;">
           Database Schema Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T12.4.4.2.2.2.m2.1">
           <semantics id="A2.T12.4.4.2.2.2.m2.1a">
            <mo id="A2.T12.4.4.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T12.4.4.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.4.4.2.2.2.m2.1b">
             <ci id="A2.T12.4.4.2.2.2.m2.1.1.cmml" xref="A2.T12.4.4.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.4.4.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.6.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.6.6.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.6.6.2.2">
         <span class="ltx_p" id="A2.T12.6.6.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T12.5.5.1.1.1.m1.1">
           <semantics id="A2.T12.5.5.1.1.1.m1.1a">
            <mo id="A2.T12.5.5.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T12.5.5.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.5.5.1.1.1.m1.1b">
             <ci id="A2.T12.5.5.1.1.1.m1.1.1.cmml" xref="A2.T12.5.5.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.5.5.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T12.6.6.2.2.2.1" style="font-size:90%;">
           Conversation
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T12.6.6.2.2.2.m2.1">
           <semantics id="A2.T12.6.6.2.2.2.m2.1a">
            <mo id="A2.T12.6.6.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T12.6.6.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.6.6.2.2.2.m2.1b">
             <ci id="A2.T12.6.6.2.2.2.m2.1.1.cmml" xref="A2.T12.6.6.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.6.6.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.14.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.12.14.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.14.2.1.1">
         <span class="ltx_p" id="A2.T12.12.14.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T12.12.14.2.1.1.1.1" style="font-size:90%;">
           User: Return the number of airports.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.15.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.12.15.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.15.3.1.1">
         <span class="ltx_p" id="A2.T12.12.15.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T12.12.15.3.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Assistant: SELECT count(*) FROM AIRPORTS
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.8.8">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_t" id="A2.T12.8.8.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.8.8.2.2">
         <span class="ltx_p" id="A2.T12.8.8.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T12.7.7.1.1.1.m1.1">
           <semantics id="A2.T12.7.7.1.1.1.m1.1a">
            <mo id="A2.T12.7.7.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T12.7.7.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.7.7.1.1.1.m1.1b">
             <ci id="A2.T12.7.7.1.1.1.m1.1.1.cmml" xref="A2.T12.7.7.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.7.7.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T12.8.8.2.2.2.1" style="font-size:90%;">
           Instruction
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T12.8.8.2.2.2.m2.1">
           <semantics id="A2.T12.8.8.2.2.2.m2.1a">
            <mo id="A2.T12.8.8.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T12.8.8.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.8.8.2.2.2.m2.1b">
             <ci id="A2.T12.8.8.2.2.2.m2.1.1.cmml" xref="A2.T12.8.8.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.8.8.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.16.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.12.16.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.16.4.1.1">
         <span class="ltx_p" id="A2.T12.12.16.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T12.12.16.4.1.1.1.1" style="font-size:90%;">
           You are an Assistant having a conversation with a User who would like to retrieve some information from a SQL database with the schema provided below. If you are confident in the User’s intent, you should provide the appropriate SQL query. Otherwise, you should ask the User a clarifying question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.10.10">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.10.10.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.10.10.2.2">
         <span class="ltx_p" id="A2.T12.10.10.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T12.9.9.1.1.1.m1.1">
           <semantics id="A2.T12.9.9.1.1.1.m1.1a">
            <mo id="A2.T12.9.9.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T12.9.9.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.9.9.1.1.1.m1.1b">
             <ci id="A2.T12.9.9.1.1.1.m1.1.1.cmml" xref="A2.T12.9.9.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.9.9.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T12.10.10.2.2.2.1" style="font-size:90%;">
           Database Schema Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T12.10.10.2.2.2.m2.1">
           <semantics id="A2.T12.10.10.2.2.2.m2.1a">
            <mo id="A2.T12.10.10.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T12.10.10.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.10.10.2.2.2.m2.1b">
             <ci id="A2.T12.10.10.2.2.2.m2.1.1.cmml" xref="A2.T12.10.10.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.10.10.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.12">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.12.12.2">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.12.2.2">
         <span class="ltx_p" id="A2.T12.12.12.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A2.T12.11.11.1.1.1.m1.1">
           <semantics id="A2.T12.11.11.1.1.1.m1.1a">
            <mo id="A2.T12.11.11.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A2.T12.11.11.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.11.11.1.1.1.m1.1b">
             <ci id="A2.T12.11.11.1.1.1.m1.1.1.cmml" xref="A2.T12.11.11.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.11.11.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A2.T12.12.12.2.2.2.1" style="font-size:90%;">
           Conversation
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A2.T12.12.12.2.2.2.m2.1">
           <semantics id="A2.T12.12.12.2.2.2.m2.1a">
            <mo id="A2.T12.12.12.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A2.T12.12.12.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A2.T12.12.12.2.2.2.m2.1b">
             <ci id="A2.T12.12.12.2.2.2.m2.1.1.cmml" xref="A2.T12.12.12.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A2.T12.12.12.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.17.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.12.17.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.17.5.1.1">
         <span class="ltx_p" id="A2.T12.12.17.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T12.12.17.5.1.1.1.1" style="font-size:90%;">
           User: How many are there?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.18.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.12.18.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.18.6.1.1">
         <span class="ltx_p" id="A2.T12.12.18.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T12.12.18.6.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Assistant: Could you please specify which table you are referring to when you ask ’How many are there?’
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.19.7">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A2.T12.12.19.7.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.19.7.1.1">
         <span class="ltx_p" id="A2.T12.12.19.7.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T12.12.19.7.1.1.1.1" style="font-size:90%;color:#BF0040;">
           User: Return the number of airports.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T12.12.20.8">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A2.T12.12.20.8.1">
        <span class="ltx_inline-block ltx_align_top" id="A2.T12.12.20.8.1.1">
         <span class="ltx_p" id="A2.T12.12.20.8.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A2.T12.12.20.8.1.1.1.1" style="font-size:90%;color:#BF0040;">
           Assistant: SELECT count(*) FROM AIRPORTS
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
  </section>
 </section>
 <section class="ltx_appendix" id="A3">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix C
   </span>
   Additional Details on Evaluation
  </h2>
  <div class="ltx_para" id="A3.p1">
   <p class="ltx_p" id="A3.p1.1">
    We define the following action-level evaluation metrics:
   </p>
   <ul class="ltx_itemize" id="A3.I1">
    <li class="ltx_item" id="A3.I1.i1" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I1.i1.p1">
      <p class="ltx_p" id="A3.I1.i1.p1.1">
       Accuracy: Percentage of correct implicit actions
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A3.I1.i2" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I1.i2.p1">
      <p class="ltx_p" id="A3.I1.i2.p1.1">
       Weighted F1: Average of F1 for each action, weighted by its support
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A3.I1.i3" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I1.i3.p1">
      <p class="ltx_p" id="A3.I1.i3.p1.1">
       Macro F1: Unweighted Average of F1 for each action
      </p>
     </div>
    </li>
   </ul>
  </div>
  <div class="ltx_para" id="A3.p2">
   <p class="ltx_p" id="A3.p2.1">
    We define the following content-level evaluation metrics:
   </p>
   <ul class="ltx_itemize" id="A3.I2">
    <li class="ltx_item" id="A3.I2.i1" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I2.i1.p1">
      <p class="ltx_p" id="A3.I2.i1.p1.1">
       Turn-level DROP F1: Average immediate response DROP F1
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib17" title="">
         17
        </a>
        ,
        <a class="ltx_ref" href="#bib.bib69" title="">
         69
        </a>
        ]
       </cite>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A3.I2.i2" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I2.i2.p1">
      <p class="ltx_p" id="A3.I2.i2.p1.1">
       Trajectory-level DROP F1: Average trajectory-outcome DROP F1
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib17" title="">
         17
        </a>
        ,
        <a class="ltx_ref" href="#bib.bib69" title="">
         69
        </a>
        ]
       </cite>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A3.I2.i3" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I2.i3.p1">
      <p class="ltx_p" id="A3.I2.i3.p1.1">
       Post-Clarification DROP F1: Average DROP F1
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib17" title="">
         17
        </a>
        ,
        <a class="ltx_ref" href="#bib.bib69" title="">
         69
        </a>
        ]
       </cite>
       of responses which follow agent clarification turns
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A3.I2.i4" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I2.i4.p1">
      <p class="ltx_p" id="A3.I2.i4.p1.1">
       Turn-level Similarity: Immediate response embedding similarity
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A3.I2.i5" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I2.i5.p1">
      <p class="ltx_p" id="A3.I2.i5.p1.1">
       Trajectory-level Similarity: Trajectory outcome embedding similarity
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A3.I2.i6" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I2.i6.p1">
      <p class="ltx_p" id="A3.I2.i6.p1.1">
       Trajectory-level Execution Match: Percentage of trajectory outcomes with correct execution results
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A3.I2.i7" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A3.I2.i7.p1">
      <p class="ltx_p" id="A3.I2.i7.p1.1">
       Post-Clarification Execution Match: Percentage of trajectory outcomes with correct execution results out of those that which contain clarification turns
      </p>
     </div>
    </li>
   </ul>
  </div>
  <section class="ltx_paragraph" id="A3.SS0.SSS0.Px1">
   <h5 class="ltx_title ltx_title_paragraph">
    PACIFIC
   </h5>
   <div class="ltx_para" id="A3.SS0.SSS0.Px1.p1">
    <p class="ltx_p" id="A3.SS0.SSS0.Px1.p1.14">
     As described in Section
     <a class="ltx_ref" href="#S4" title="4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       4
      </span>
     </a>
     , PACIFIC is a conversational question-answering dataset in which the final answers may involve generating the correct words from a given span, from multiple spans, or providing a correct arithmetic expression. As such, the authors propose using DROP F1 as the official evaluation metric. The way DROP F1 is used in the original paper
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib17" title="">
       17
      </a>
      ]
     </cite>
     is analogous to our aforementioned “Turn-level DROP F1.” However, as this does not fully represent a model’s conversational reasoning abilities, we additionally evaluate LLMs in the PACIFIC environment using Accuracy, Weighted F1, Macro F1, Trajectory-level DROP F1, and Post-Clarification DROP F1. Concretely, the evaluation for some LLM
     <math alttext="\pi" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.1.m1.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.1.m1.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.1.m1.1.1" xref="A3.SS0.SSS0.Px1.p1.1.m1.1.1.cmml">
        π
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.1.m1.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.1.m1.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.1.m1.1.1">
         𝜋
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.1.m1.1c">
        \pi
       </annotation>
      </semantics>
     </math>
     is as follows. Assume we have some example with prompt
     <math alttext="p" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.2.m2.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.2.m2.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.2.m2.1.1" xref="A3.SS0.SSS0.Px1.p1.2.m2.1.1.cmml">
        p
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.2.m2.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.2.m2.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.2.m2.1.1">
         𝑝
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.2.m2.1c">
        p
       </annotation>
      </semantics>
     </math>
     , winning action
     <math alttext="a" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.3.m3.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.3.m3.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.3.m3.1.1" xref="A3.SS0.SSS0.Px1.p1.3.m3.1.1.cmml">
        a
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.3.m3.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.3.m3.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.3.m3.1.1">
         𝑎
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.3.m3.1c">
        a
       </annotation>
      </semantics>
     </math>
     , ground truth response
     <math alttext="r" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.4.m4.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.4.m4.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.4.m4.1.1" xref="A3.SS0.SSS0.Px1.p1.4.m4.1.1.cmml">
        r
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.4.m4.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.4.m4.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.4.m4.1.1">
         𝑟
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.4.m4.1c">
        r
       </annotation>
      </semantics>
     </math>
     , and trajectory-level information goal
     <math alttext="g" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.5.m5.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.5.m5.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.5.m5.1.1" xref="A3.SS0.SSS0.Px1.p1.5.m5.1.1.cmml">
        g
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.5.m5.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.5.m5.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.5.m5.1.1">
         𝑔
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.5.m5.1c">
        g
       </annotation>
      </semantics>
     </math>
     . We sample a candidate response from the LLM:
     <math alttext="y\sim P_{\theta}(\cdot|p)" class="ltx_math_unparsed" display="inline" id="A3.SS0.SSS0.Px1.p1.6.m6.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.6.m6.1a">
       <mrow id="A3.SS0.SSS0.Px1.p1.6.m6.1b">
        <mi id="A3.SS0.SSS0.Px1.p1.6.m6.1.1">
         y
        </mi>
        <mo id="A3.SS0.SSS0.Px1.p1.6.m6.1.2">
         ∼
        </mo>
        <msub id="A3.SS0.SSS0.Px1.p1.6.m6.1.3">
         <mi id="A3.SS0.SSS0.Px1.p1.6.m6.1.3.2">
          P
         </mi>
         <mi id="A3.SS0.SSS0.Px1.p1.6.m6.1.3.3">
          θ
         </mi>
        </msub>
        <mrow id="A3.SS0.SSS0.Px1.p1.6.m6.1.4">
         <mo id="A3.SS0.SSS0.Px1.p1.6.m6.1.4.1" stretchy="false">
          (
         </mo>
         <mo id="A3.SS0.SSS0.Px1.p1.6.m6.1.4.2" lspace="0em" rspace="0em">
          ⋅
         </mo>
         <mo fence="false" id="A3.SS0.SSS0.Px1.p1.6.m6.1.4.3" rspace="0.167em" stretchy="false">
          |
         </mo>
         <mi id="A3.SS0.SSS0.Px1.p1.6.m6.1.4.4">
          p
         </mi>
         <mo id="A3.SS0.SSS0.Px1.p1.6.m6.1.4.5" stretchy="false">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.6.m6.1c">
        y\sim P_{\theta}(\cdot|p)
       </annotation>
      </semantics>
     </math>
     . We then simulate the trajectory resulting from each response
     <math alttext="y" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.7.m7.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.7.m7.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.7.m7.1.1" xref="A3.SS0.SSS0.Px1.p1.7.m7.1.1.cmml">
        y
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.7.m7.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.7.m7.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.7.m7.1.1">
         𝑦
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.7.m7.1c">
        y
       </annotation>
      </semantics>
     </math>
     according to Lines 6-12 in Algorithm
     <a class="ltx_ref" href="#alg2" title="Algorithm 2 ‣ 3.2.3 Contrastive RL Tuning for Alignment ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     and obtain trajectory outcome
     <math alttext="g^{\prime}" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.8.m8.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.8.m8.1a">
       <msup id="A3.SS0.SSS0.Px1.p1.8.m8.1.1" xref="A3.SS0.SSS0.Px1.p1.8.m8.1.1.cmml">
        <mi id="A3.SS0.SSS0.Px1.p1.8.m8.1.1.2" xref="A3.SS0.SSS0.Px1.p1.8.m8.1.1.2.cmml">
         g
        </mi>
        <mo id="A3.SS0.SSS0.Px1.p1.8.m8.1.1.3" xref="A3.SS0.SSS0.Px1.p1.8.m8.1.1.3.cmml">
         ′
        </mo>
       </msup>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.8.m8.1b">
        <apply id="A3.SS0.SSS0.Px1.p1.8.m8.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.8.m8.1.1">
         <csymbol cd="ambiguous" id="A3.SS0.SSS0.Px1.p1.8.m8.1.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.8.m8.1.1">
          superscript
         </csymbol>
         <ci id="A3.SS0.SSS0.Px1.p1.8.m8.1.1.2.cmml" xref="A3.SS0.SSS0.Px1.p1.8.m8.1.1.2">
          𝑔
         </ci>
         <ci id="A3.SS0.SSS0.Px1.p1.8.m8.1.1.3.cmml" xref="A3.SS0.SSS0.Px1.p1.8.m8.1.1.3">
          ′
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.8.m8.1c">
        g^{\prime}
       </annotation>
      </semantics>
     </math>
     . The aforementioned action-level metrics are computed using the implicit actions of each
     <math alttext="y" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.9.m9.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.9.m9.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.9.m9.1.1" xref="A3.SS0.SSS0.Px1.p1.9.m9.1.1.cmml">
        y
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.9.m9.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.9.m9.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.9.m9.1.1">
         𝑦
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.9.m9.1c">
        y
       </annotation>
      </semantics>
     </math>
     with each ground truth implicit action
     <math alttext="a" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.10.m10.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.10.m10.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.10.m10.1.1" xref="A3.SS0.SSS0.Px1.p1.10.m10.1.1.cmml">
        a
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.10.m10.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.10.m10.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.10.m10.1.1">
         𝑎
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.10.m10.1c">
        a
       </annotation>
      </semantics>
     </math>
     . Turn-level DROP F1 is computed between all sampled responses
     <math alttext="y" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.11.m11.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.11.m11.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.11.m11.1.1" xref="A3.SS0.SSS0.Px1.p1.11.m11.1.1.cmml">
        y
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.11.m11.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.11.m11.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.11.m11.1.1">
         𝑦
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.11.m11.1c">
        y
       </annotation>
      </semantics>
     </math>
     and all ground truth responses
     <math alttext="r" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.12.m12.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.12.m12.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.12.m12.1.1" xref="A3.SS0.SSS0.Px1.p1.12.m12.1.1.cmml">
        r
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.12.m12.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.12.m12.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.12.m12.1.1">
         𝑟
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.12.m12.1c">
        r
       </annotation>
      </semantics>
     </math>
     , and Trajectory-level DROP F1 is computed over all simulated trajectory outcomes
     <math alttext="g^{\prime}" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.13.m13.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.13.m13.1a">
       <msup id="A3.SS0.SSS0.Px1.p1.13.m13.1.1" xref="A3.SS0.SSS0.Px1.p1.13.m13.1.1.cmml">
        <mi id="A3.SS0.SSS0.Px1.p1.13.m13.1.1.2" xref="A3.SS0.SSS0.Px1.p1.13.m13.1.1.2.cmml">
         g
        </mi>
        <mo id="A3.SS0.SSS0.Px1.p1.13.m13.1.1.3" xref="A3.SS0.SSS0.Px1.p1.13.m13.1.1.3.cmml">
         ′
        </mo>
       </msup>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.13.m13.1b">
        <apply id="A3.SS0.SSS0.Px1.p1.13.m13.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.13.m13.1.1">
         <csymbol cd="ambiguous" id="A3.SS0.SSS0.Px1.p1.13.m13.1.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.13.m13.1.1">
          superscript
         </csymbol>
         <ci id="A3.SS0.SSS0.Px1.p1.13.m13.1.1.2.cmml" xref="A3.SS0.SSS0.Px1.p1.13.m13.1.1.2">
          𝑔
         </ci>
         <ci id="A3.SS0.SSS0.Px1.p1.13.m13.1.1.3.cmml" xref="A3.SS0.SSS0.Px1.p1.13.m13.1.1.3">
          ′
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.13.m13.1c">
        g^{\prime}
       </annotation>
      </semantics>
     </math>
     and all ground truth information goals
     <math alttext="g" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px1.p1.14.m14.1">
      <semantics id="A3.SS0.SSS0.Px1.p1.14.m14.1a">
       <mi id="A3.SS0.SSS0.Px1.p1.14.m14.1.1" xref="A3.SS0.SSS0.Px1.p1.14.m14.1.1.cmml">
        g
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px1.p1.14.m14.1b">
        <ci id="A3.SS0.SSS0.Px1.p1.14.m14.1.1.cmml" xref="A3.SS0.SSS0.Px1.p1.14.m14.1.1">
         𝑔
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px1.p1.14.m14.1c">
        g
       </annotation>
      </semantics>
     </math>
     . Post-Clarification F1 is defined as Trajectory-level F1 for only the subset of trajectories which include clarification turns.
    </p>
   </div>
  </section>
  <section class="ltx_paragraph" id="A3.SS0.SSS0.Px2">
   <h5 class="ltx_title ltx_title_paragraph">
    Abg-CoQA
   </h5>
   <div class="ltx_para" id="A3.SS0.SSS0.Px2.p1">
    <p class="ltx_p" id="A3.SS0.SSS0.Px2.p1.1">
     As previously mentioned in Section
     <a class="ltx_ref" href="#S4" title="4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       4
      </span>
     </a>
     , Abg-CoQA is a conversational question-answering dataset for machine reading comprehension. Thus, we use embedding similarity
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib56" title="">
       56
      </a>
      ]
     </cite>
     as it allows for producing more coherent and diverse responses which may be scored lowly by criteria such as token-level F1 score. In the original paper, language models are only evaluated in terms of QA performance
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib54" title="">
       54
      </a>
      ]
     </cite>
     , rather than their ability to disambiguate requests. Thus, for our evaluation, we remove all clarification turns from the prompt and require the LLM to produce clarifying questions on its own. However, unlike the other tasks considered in this paper, each ambiguous request is paired with all of the possible trajectories (i.e., the reasons why the request is considered ambiguous). We thus perform an evaluation for every ground truth trajectory, so that it is impossible for an LLM to achieve a high cumulative trajectory-level score simply by getting lucky at guessing the user’s intent.
    </p>
   </div>
   <div class="ltx_para" id="A3.SS0.SSS0.Px2.p2">
    <p class="ltx_p" id="A3.SS0.SSS0.Px2.p2.16">
     Concretely, the evaluation for some LLM
     <math alttext="\pi" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.1.m1.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.1.m1.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.1.m1.1.1" xref="A3.SS0.SSS0.Px2.p2.1.m1.1.1.cmml">
        π
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.1.m1.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.1.m1.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.1.m1.1.1">
         𝜋
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.1.m1.1c">
        \pi
       </annotation>
      </semantics>
     </math>
     is as follows. Assume we have some example with prompt
     <math alttext="p" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.2.m2.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.2.m2.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.2.m2.1.1" xref="A3.SS0.SSS0.Px2.p2.2.m2.1.1.cmml">
        p
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.2.m2.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.2.m2.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.2.m2.1.1">
         𝑝
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.2.m2.1c">
        p
       </annotation>
      </semantics>
     </math>
     , winning action
     <math alttext="a" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.3.m3.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.3.m3.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.3.m3.1.1" xref="A3.SS0.SSS0.Px2.p2.3.m3.1.1.cmml">
        a
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.3.m3.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.3.m3.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.3.m3.1.1">
         𝑎
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.3.m3.1c">
        a
       </annotation>
      </semantics>
     </math>
     , ground truth response
     <math alttext="r" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.4.m4.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.4.m4.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.4.m4.1.1" xref="A3.SS0.SSS0.Px2.p2.4.m4.1.1.cmml">
        r
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.4.m4.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.4.m4.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.4.m4.1.1">
         𝑟
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.4.m4.1c">
        r
       </annotation>
      </semantics>
     </math>
     , and the set of trajectory-level information goals
     <math alttext="G" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.5.m5.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.5.m5.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.5.m5.1.1" xref="A3.SS0.SSS0.Px2.p2.5.m5.1.1.cmml">
        G
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.5.m5.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.5.m5.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.5.m5.1.1">
         𝐺
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.5.m5.1c">
        G
       </annotation>
      </semantics>
     </math>
     . For every individual trajectory-level goal
     <math alttext="g\in G" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.6.m6.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.6.m6.1a">
       <mrow id="A3.SS0.SSS0.Px2.p2.6.m6.1.1" xref="A3.SS0.SSS0.Px2.p2.6.m6.1.1.cmml">
        <mi id="A3.SS0.SSS0.Px2.p2.6.m6.1.1.2" xref="A3.SS0.SSS0.Px2.p2.6.m6.1.1.2.cmml">
         g
        </mi>
        <mo id="A3.SS0.SSS0.Px2.p2.6.m6.1.1.1" xref="A3.SS0.SSS0.Px2.p2.6.m6.1.1.1.cmml">
         ∈
        </mo>
        <mi id="A3.SS0.SSS0.Px2.p2.6.m6.1.1.3" xref="A3.SS0.SSS0.Px2.p2.6.m6.1.1.3.cmml">
         G
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.6.m6.1b">
        <apply id="A3.SS0.SSS0.Px2.p2.6.m6.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.6.m6.1.1">
         <in id="A3.SS0.SSS0.Px2.p2.6.m6.1.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.6.m6.1.1.1">
         </in>
         <ci id="A3.SS0.SSS0.Px2.p2.6.m6.1.1.2.cmml" xref="A3.SS0.SSS0.Px2.p2.6.m6.1.1.2">
          𝑔
         </ci>
         <ci id="A3.SS0.SSS0.Px2.p2.6.m6.1.1.3.cmml" xref="A3.SS0.SSS0.Px2.p2.6.m6.1.1.3">
          𝐺
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.6.m6.1c">
        g\in G
       </annotation>
      </semantics>
     </math>
     , we sample a candidate response from the LLM:
     <math alttext="y\sim P_{\theta}(\cdot|p)" class="ltx_math_unparsed" display="inline" id="A3.SS0.SSS0.Px2.p2.7.m7.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.7.m7.1a">
       <mrow id="A3.SS0.SSS0.Px2.p2.7.m7.1b">
        <mi id="A3.SS0.SSS0.Px2.p2.7.m7.1.1">
         y
        </mi>
        <mo id="A3.SS0.SSS0.Px2.p2.7.m7.1.2">
         ∼
        </mo>
        <msub id="A3.SS0.SSS0.Px2.p2.7.m7.1.3">
         <mi id="A3.SS0.SSS0.Px2.p2.7.m7.1.3.2">
          P
         </mi>
         <mi id="A3.SS0.SSS0.Px2.p2.7.m7.1.3.3">
          θ
         </mi>
        </msub>
        <mrow id="A3.SS0.SSS0.Px2.p2.7.m7.1.4">
         <mo id="A3.SS0.SSS0.Px2.p2.7.m7.1.4.1" stretchy="false">
          (
         </mo>
         <mo id="A3.SS0.SSS0.Px2.p2.7.m7.1.4.2" lspace="0em" rspace="0em">
          ⋅
         </mo>
         <mo fence="false" id="A3.SS0.SSS0.Px2.p2.7.m7.1.4.3" rspace="0.167em" stretchy="false">
          |
         </mo>
         <mi id="A3.SS0.SSS0.Px2.p2.7.m7.1.4.4">
          p
         </mi>
         <mo id="A3.SS0.SSS0.Px2.p2.7.m7.1.4.5" stretchy="false">
          )
         </mo>
        </mrow>
       </mrow>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.7.m7.1c">
        y\sim P_{\theta}(\cdot|p)
       </annotation>
      </semantics>
     </math>
     then simulate the trajectory resulting from each response
     <math alttext="y" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.8.m8.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.8.m8.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.8.m8.1.1" xref="A3.SS0.SSS0.Px2.p2.8.m8.1.1.cmml">
        y
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.8.m8.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.8.m8.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.8.m8.1.1">
         𝑦
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.8.m8.1c">
        y
       </annotation>
      </semantics>
     </math>
     according to Lines 6-12 in Algorithm
     <a class="ltx_ref" href="#alg2" title="Algorithm 2 ‣ 3.2.3 Contrastive RL Tuning for Alignment ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     and obtain trajectory outcome
     <math alttext="g^{\prime}" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.9.m9.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.9.m9.1a">
       <msup id="A3.SS0.SSS0.Px2.p2.9.m9.1.1" xref="A3.SS0.SSS0.Px2.p2.9.m9.1.1.cmml">
        <mi id="A3.SS0.SSS0.Px2.p2.9.m9.1.1.2" xref="A3.SS0.SSS0.Px2.p2.9.m9.1.1.2.cmml">
         g
        </mi>
        <mo id="A3.SS0.SSS0.Px2.p2.9.m9.1.1.3" xref="A3.SS0.SSS0.Px2.p2.9.m9.1.1.3.cmml">
         ′
        </mo>
       </msup>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.9.m9.1b">
        <apply id="A3.SS0.SSS0.Px2.p2.9.m9.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.9.m9.1.1">
         <csymbol cd="ambiguous" id="A3.SS0.SSS0.Px2.p2.9.m9.1.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.9.m9.1.1">
          superscript
         </csymbol>
         <ci id="A3.SS0.SSS0.Px2.p2.9.m9.1.1.2.cmml" xref="A3.SS0.SSS0.Px2.p2.9.m9.1.1.2">
          𝑔
         </ci>
         <ci id="A3.SS0.SSS0.Px2.p2.9.m9.1.1.3.cmml" xref="A3.SS0.SSS0.Px2.p2.9.m9.1.1.3">
          ′
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.9.m9.1c">
        g^{\prime}
       </annotation>
      </semantics>
     </math>
     . As with PACIFIC, we compute Accuracy, Weighted F1, and Macro F1 using the implicit actions of each
     <math alttext="y" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.10.m10.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.10.m10.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.10.m10.1.1" xref="A3.SS0.SSS0.Px2.p2.10.m10.1.1.cmml">
        y
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.10.m10.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.10.m10.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.10.m10.1.1">
         𝑦
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.10.m10.1c">
        y
       </annotation>
      </semantics>
     </math>
     with each ground truth implicit action
     <math alttext="a" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.11.m11.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.11.m11.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.11.m11.1.1" xref="A3.SS0.SSS0.Px2.p2.11.m11.1.1.cmml">
        a
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.11.m11.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.11.m11.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.11.m11.1.1">
         𝑎
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.11.m11.1c">
        a
       </annotation>
      </semantics>
     </math>
     . We compute Turn-level similarity for
     <span class="ltx_text ltx_font_italic" id="A3.SS0.SSS0.Px2.p2.16.1">
      each unique
     </span>
     <math alttext="p" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.12.m12.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.12.m12.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.12.m12.1.1" xref="A3.SS0.SSS0.Px2.p2.12.m12.1.1.cmml">
        p
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.12.m12.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.12.m12.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.12.m12.1.1">
         𝑝
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.12.m12.1c">
        p
       </annotation>
      </semantics>
     </math>
     between sampled responses
     <math alttext="y" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.13.m13.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.13.m13.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.13.m13.1.1" xref="A3.SS0.SSS0.Px2.p2.13.m13.1.1.cmml">
        y
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.13.m13.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.13.m13.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.13.m13.1.1">
         𝑦
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.13.m13.1c">
        y
       </annotation>
      </semantics>
     </math>
     and ground truth responses
     <math alttext="r" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.14.m14.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.14.m14.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.14.m14.1.1" xref="A3.SS0.SSS0.Px2.p2.14.m14.1.1.cmml">
        r
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.14.m14.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.14.m14.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.14.m14.1.1">
         𝑟
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.14.m14.1c">
        r
       </annotation>
      </semantics>
     </math>
     . We compute Trajectory-level similarity over all simulated trajectory outcomes
     <math alttext="g^{\prime}" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.15.m15.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.15.m15.1a">
       <msup id="A3.SS0.SSS0.Px2.p2.15.m15.1.1" xref="A3.SS0.SSS0.Px2.p2.15.m15.1.1.cmml">
        <mi id="A3.SS0.SSS0.Px2.p2.15.m15.1.1.2" xref="A3.SS0.SSS0.Px2.p2.15.m15.1.1.2.cmml">
         g
        </mi>
        <mo id="A3.SS0.SSS0.Px2.p2.15.m15.1.1.3" xref="A3.SS0.SSS0.Px2.p2.15.m15.1.1.3.cmml">
         ′
        </mo>
       </msup>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.15.m15.1b">
        <apply id="A3.SS0.SSS0.Px2.p2.15.m15.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.15.m15.1.1">
         <csymbol cd="ambiguous" id="A3.SS0.SSS0.Px2.p2.15.m15.1.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.15.m15.1.1">
          superscript
         </csymbol>
         <ci id="A3.SS0.SSS0.Px2.p2.15.m15.1.1.2.cmml" xref="A3.SS0.SSS0.Px2.p2.15.m15.1.1.2">
          𝑔
         </ci>
         <ci id="A3.SS0.SSS0.Px2.p2.15.m15.1.1.3.cmml" xref="A3.SS0.SSS0.Px2.p2.15.m15.1.1.3">
          ′
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.15.m15.1c">
        g^{\prime}
       </annotation>
      </semantics>
     </math>
     and all ground truth information goals
     <math alttext="g" class="ltx_Math" display="inline" id="A3.SS0.SSS0.Px2.p2.16.m16.1">
      <semantics id="A3.SS0.SSS0.Px2.p2.16.m16.1a">
       <mi id="A3.SS0.SSS0.Px2.p2.16.m16.1.1" xref="A3.SS0.SSS0.Px2.p2.16.m16.1.1.cmml">
        g
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS0.SSS0.Px2.p2.16.m16.1b">
        <ci id="A3.SS0.SSS0.Px2.p2.16.m16.1.1.cmml" xref="A3.SS0.SSS0.Px2.p2.16.m16.1.1">
         𝑔
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS0.SSS0.Px2.p2.16.m16.1c">
        g
       </annotation>
      </semantics>
     </math>
     .
    </p>
   </div>
  </section>
  <section class="ltx_paragraph" id="A3.SS0.SSS0.Px3">
   <h5 class="ltx_title ltx_title_paragraph">
    AmbigSQL
   </h5>
   <div class="ltx_para" id="A3.SS0.SSS0.Px3.p1">
    <p class="ltx_p" id="A3.SS0.SSS0.Px3.p1.1">
     is a ambiguous text-to-SQL generation task. By design, the labels are balanced, so we only use Accuracy for action-level metrics. The primary objective is to produce SQL queries which result in correct executions, so we evaluate LLMs in terms of Trajectory-level and Post-Clarification Execution Match. For each instance in the test set, we sample a response from an LLM and compute the trajectory as specified in Lines 6-12 in Algorithm
     <a class="ltx_ref" href="#alg2" title="Algorithm 2 ‣ 3.2.3 Contrastive RL Tuning for Alignment ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     . Trajectory-level Execution Match includes SQL queries which are constructed with or without clarification turns, whereas Post-Clarification Execution Match only looks at SQL queries which are constructed following clarification turns.
    </p>
   </div>
   <figure class="ltx_table" id="A3.T13">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A13:
     </span>
     <span class="ltx_text ltx_font_bold" id="A3.T13.6.1">
      “Standard” in-context example given as part of a prompt to an LLM for response generation in PACIFIC.
     </span>
     The
     <span class="ltx_text" id="A3.T13.7.2" style="color:#BF0040;">
      purple
     </span>
     text is the overall system instruction. The
     <span class="ltx_text" id="A3.T13.8.3" style="color:#0000FF;">
      blue
     </span>
     text is what an LLM would have to produce at inference time.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A3.T13.2">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A3.T13.2.3.1">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A3.T13.2.3.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.3.1.1.1">
         <span class="ltx_p" id="A3.T13.2.3.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.3.1.1.1.1.1" style="font-size:90%;color:#BF0040;">
           You are an Assistant answering questions from a User. You should either attempt to answer the question or ask a clarifying question if there is any ambiguity.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.2.2.2">
         <span class="ltx_p" id="A3.T13.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A3.T13.1.1.1.1.1.m1.1">
           <semantics id="A3.T13.1.1.1.1.1.m1.1a">
            <mo id="A3.T13.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A3.T13.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A3.T13.1.1.1.1.1.m1.1b">
             <ci id="A3.T13.1.1.1.1.1.m1.1.1.cmml" xref="A3.T13.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A3.T13.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A3.T13.2.2.2.2.2.1" style="font-size:90%;">
           Table and Passage Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A3.T13.2.2.2.2.2.m2.1">
           <semantics id="A3.T13.2.2.2.2.2.m2.1a">
            <mo id="A3.T13.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A3.T13.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A3.T13.2.2.2.2.2.m2.1b">
             <ci id="A3.T13.2.2.2.2.2.m2.1.1.cmml" xref="A3.T13.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A3.T13.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.4.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.4.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.4.2.1.1">
         <span class="ltx_p" id="A3.T13.2.4.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.4.2.1.1.1.1" style="font-size:90%;">
           User: How much does the company expect to make contributions to the defined plans during the next fiscal year?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.5.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.5.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.5.3.1.1">
         <span class="ltx_p" id="A3.T13.2.5.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.5.3.1.1.1.1" style="font-size:90%;">
           Assistant: [’What kind of defined plans are you asking about?’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.6.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.6.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.6.4.1.1">
         <span class="ltx_p" id="A3.T13.2.6.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.6.4.1.1.1.1" style="font-size:90%;">
           User: The defined benefit plans and the defined contribution plan respectively.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.7.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.7.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.7.5.1.1">
         <span class="ltx_p" id="A3.T13.2.7.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.7.5.1.1.1.1" style="font-size:90%;">
           Assistant: [’$5.1 million’, ’$0.6 million’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.8.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.8.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.8.6.1.1">
         <span class="ltx_p" id="A3.T13.2.8.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.8.6.1.1.1.1" style="font-size:90%;">
           User: What is the value of the expected defined contribution plan as a percentage of the defined benefit plan during the next fiscal year?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.9.7">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.9.7.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.9.7.1.1">
         <span class="ltx_p" id="A3.T13.2.9.7.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.9.7.1.1.1.1" style="font-size:90%;">
           Assistant: 0.6/5.1 = 11.76
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.10.8">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.10.8.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.10.8.1.1">
         <span class="ltx_p" id="A3.T13.2.10.8.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.10.8.1.1.1.1" style="font-size:90%;">
           User: How much would change if there is a 1% increase and a 1% decrease respectively in the discount rate?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.11.9">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.11.9.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.11.9.1.1">
         <span class="ltx_p" id="A3.T13.2.11.9.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.11.9.1.1.1.1" style="font-size:90%;">
           Assistant: [’What kind of change are you asking about?’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.12.10">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.12.10.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.12.10.1.1">
         <span class="ltx_p" id="A3.T13.2.12.10.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.12.10.1.1.1.1" style="font-size:90%;">
           User: The pension.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.13.11">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.13.11.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.13.11.1.1">
         <span class="ltx_p" id="A3.T13.2.13.11.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.13.11.1.1.1.1" style="font-size:90%;">
           Assistant: [’$(39,145)’, ’$49,361’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.14.12">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.14.12.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.14.12.1.1">
         <span class="ltx_p" id="A3.T13.2.14.12.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.14.12.1.1.1.1" style="font-size:90%;">
           User: What is the difference in that amount if the discount rate had a 1% increase and a 1% decrease?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.15.13">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.15.13.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.15.13.1.1">
         <span class="ltx_p" id="A3.T13.2.15.13.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.15.13.1.1.1.1" style="font-size:90%;">
           Assistant: 49,361 - (39,145) = 88506
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.16.14">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.16.14.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.16.14.1.1">
         <span class="ltx_p" id="A3.T13.2.16.14.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.16.14.1.1.1.1" style="font-size:90%;">
           User: How much would the pension change if there is a 1% increase and a 1% decrease respectively?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.17.15">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.17.15.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.17.15.1.1">
         <span class="ltx_p" id="A3.T13.2.17.15.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.17.15.1.1.1.1" style="font-size:90%;">
           Assistant: [’Which rate of increase and decrease are you talking about?’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.18.16">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.18.16.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.18.16.1.1">
         <span class="ltx_p" id="A3.T13.2.18.16.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.18.16.1.1.1.1" style="font-size:90%;">
           User: The future salary growth.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.19.17">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.19.17.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.19.17.1.1">
         <span class="ltx_p" id="A3.T13.2.19.17.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.19.17.1.1.1.1" style="font-size:90%;">
           Assistant: [’$7,572’, ’$(6,919)’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.20.18">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A3.T13.2.20.18.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.20.18.1.1">
         <span class="ltx_p" id="A3.T13.2.20.18.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.20.18.1.1.1.1" style="font-size:90%;">
           User: What is the difference between them?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A3.T13.2.21.19">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A3.T13.2.21.19.1">
        <span class="ltx_inline-block ltx_align_top" id="A3.T13.2.21.19.1.1">
         <span class="ltx_p" id="A3.T13.2.21.19.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A3.T13.2.21.19.1.1.1.1" style="font-size:90%;">
           Assistant:
          </span>
          <span class="ltx_text" id="A3.T13.2.21.19.1.1.1.2" style="font-size:90%;color:#0000FF;">
           7,572 - (6,919) = 14491
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
  </section>
 </section>
 <section class="ltx_appendix" id="A4">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix D
   </span>
   Description of In-Context Learning Baselines
  </h2>
  <div class="ltx_para" id="A4.p1">
   <p class="ltx_p" id="A4.p1.1">
    We use several in-context learning baselines with frontier LLMs in Section
    <a class="ltx_ref" href="#S4" title="4 Experimental Setup ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      4
     </span>
    </a>
    . For each condition, we randomly sample 10 conversation examples from each task’s 250-instance data pool, and apply one of the following prompting frameworks.
   </p>
  </div>
  <section class="ltx_paragraph" id="A4.SS0.SSS0.Px1">
   <h5 class="ltx_title ltx_title_paragraph">
    Standard Prompting
   </h5>
   <div class="ltx_para" id="A4.SS0.SSS0.Px1.p1">
    <p class="ltx_p" id="A4.SS0.SSS0.Px1.p1.1">
     We simply provide in-context examples that are structurally identical to the inputs used for model tuning. Our format is similar to the formats used in
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib24" title="">
       24
      </a>
      ,
      <a class="ltx_ref" href="#bib.bib59" title="">
       59
      </a>
      ]
     </cite>
     and we provide an example in Table
     <a class="ltx_ref" href="#A3.T13" title="Table A13 ‣ AmbigSQL ‣ Appendix C Additional Details on Evaluation ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A13
      </span>
     </a>
     .
    </p>
   </div>
   <figure class="ltx_table" id="A4.T14">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A14:
     </span>
     <span class="ltx_text ltx_font_bold" id="A4.T14.6.1">
      “Chain-of-Thought” in-context example given as part of a prompt to an LLM for response generation in PACIFIC.
     </span>
     The
     <span class="ltx_text" id="A4.T14.7.2" style="color:#BF0040;">
      purple
     </span>
     text is the overall system instruction. The
     <span class="ltx_text" id="A4.T14.8.3" style="color:#0000FF;">
      blue
     </span>
     text is what an LLM would have to produce at inference time.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A4.T14.2">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A4.T14.2.3.1">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A4.T14.2.3.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.3.1.1.1">
         <span class="ltx_p" id="A4.T14.2.3.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.3.1.1.1.1.1" style="font-size:90%;">
           You are an Assistant answering questions from a User. You should either attempt to answer the question or ask a clarifying question if there is any ambiguity.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.2.2.2">
         <span class="ltx_p" id="A4.T14.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A4.T14.1.1.1.1.1.m1.1">
           <semantics id="A4.T14.1.1.1.1.1.m1.1a">
            <mo id="A4.T14.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A4.T14.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A4.T14.1.1.1.1.1.m1.1b">
             <ci id="A4.T14.1.1.1.1.1.m1.1.1.cmml" xref="A4.T14.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A4.T14.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A4.T14.2.2.2.2.2.1" style="font-size:90%;">
           Table and Passage Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A4.T14.2.2.2.2.2.m2.1">
           <semantics id="A4.T14.2.2.2.2.2.m2.1a">
            <mo id="A4.T14.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A4.T14.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A4.T14.2.2.2.2.2.m2.1b">
             <ci id="A4.T14.2.2.2.2.2.m2.1.1.cmml" xref="A4.T14.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A4.T14.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.4.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.4.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.4.2.1.1">
         <span class="ltx_p" id="A4.T14.2.4.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.4.2.1.1.1.1" style="font-size:90%;">
           User: What is the value of the expected defined contribution plan as a percentage of the defined benefit plan during the next fiscal year?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.5.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.5.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.5.3.1.1">
         <span class="ltx_p" id="A4.T14.2.5.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.5.3.1.1.1.1" style="font-size:90%;">
           Instruction: If the user’s question is ambiguous, ask an appropriate clarifying question. Otherwise, directly answer the user’s question using the information from the passage context and the table. Let’s think step by step.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.6.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.6.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.6.4.1.1">
         <span class="ltx_p" id="A4.T14.2.6.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.6.4.1.1.1.1" style="font-size:90%;">
           Reasoning: The user’s question is not ambiguous. Assistant: 0.6/5.1 = 11.76
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.7.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.7.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.7.5.1.1">
         <span class="ltx_p" id="A4.T14.2.7.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.7.5.1.1.1.1" style="font-size:90%;">
           User: How much would change if there is a 1% increase and a 1% decrease respectively in the discount rate?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.8.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.8.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.8.6.1.1">
         <span class="ltx_p" id="A4.T14.2.8.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.8.6.1.1.1.1" style="font-size:90%;">
           Instruction: If the user’s question is ambiguous, ask an appropriate clarifying question. Otherwise, directly answer the user’s question using the information from the passage context and the table. Let’s think step by step.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.9.7">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.9.7.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.9.7.1.1">
         <span class="ltx_p" id="A4.T14.2.9.7.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.9.7.1.1.1.1" style="font-size:90%;">
           Reasoning: The user’s question was ambiguous. Assistant: [’What kind of change are you asking about?’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.10.8">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.10.8.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.10.8.1.1">
         <span class="ltx_p" id="A4.T14.2.10.8.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.10.8.1.1.1.1" style="font-size:90%;">
           User: The pension.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.11.9">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.11.9.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.11.9.1.1">
         <span class="ltx_p" id="A4.T14.2.11.9.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.11.9.1.1.1.1" style="font-size:90%;">
           Instruction: If the user’s question is ambiguous, ask an appropriate clarifying question. Otherwise, directly answer the user’s question using the information from the passage context and the table. Let’s think step by step.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.12.10">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.12.10.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.12.10.1.1">
         <span class="ltx_p" id="A4.T14.2.12.10.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.12.10.1.1.1.1" style="font-size:90%;">
           Reasoning: The user’s question is not ambiguous. Assistant: [’$(39,145)’, ’$49,361’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.13.11">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.13.11.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.13.11.1.1">
         <span class="ltx_p" id="A4.T14.2.13.11.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.13.11.1.1.1.1" style="font-size:90%;">
           User: What is the difference in that amount if the discount rate had a 1% increase and a 1% decrease?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.14.12">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.14.12.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.14.12.1.1">
         <span class="ltx_p" id="A4.T14.2.14.12.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.14.12.1.1.1.1" style="font-size:90%;">
           Instruction: If the user’s question is ambiguous, ask an appropriate clarifying question. Otherwise, directly answer the user’s question using the information from the passage context and the table. Let’s think step by step.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.15.13">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.15.13.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.15.13.1.1">
         <span class="ltx_p" id="A4.T14.2.15.13.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.15.13.1.1.1.1" style="font-size:90%;">
           Reasoning: The user’s question is not ambiguous. Assistant: 49,361 - (39,145) = 88506
User: How much would the pension change if there is a 1% increase and a 1% decrease respectively?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.16.14">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.16.14.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.16.14.1.1">
         <span class="ltx_p" id="A4.T14.2.16.14.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.16.14.1.1.1.1" style="font-size:90%;">
           Instruction: If the user’s question is ambiguous, ask an appropriate clarifying question. Otherwise, directly answer the user’s question using the information from the passage context and the table. Let’s think step by step.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.17.15">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T14.2.17.15.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.17.15.1.1">
         <span class="ltx_p" id="A4.T14.2.17.15.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.17.15.1.1.1.1" style="font-size:90%;">
           Reasoning:
          </span>
          <span class="ltx_text" id="A4.T14.2.17.15.1.1.1.2" style="font-size:90%;color:#0000FF;">
           The user’s question was ambiguous.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T14.2.18.16">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A4.T14.2.18.16.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T14.2.18.16.1.1">
         <span class="ltx_p" id="A4.T14.2.18.16.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T14.2.18.16.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Assistant: [’Which rate of increase and decrease are you talking about?’]
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
  </section>
  <section class="ltx_paragraph" id="A4.SS0.SSS0.Px2">
   <h5 class="ltx_title ltx_title_paragraph">
    Chain-of-Thought Prompting
   </h5>
   <div class="ltx_para" id="A4.SS0.SSS0.Px2.p1">
    <p class="ltx_p" id="A4.SS0.SSS0.Px2.p1.1">
     We integrate the popular reasoning framework, chain-of-thought prompting
     <cite class="ltx_cite ltx_citemacro_citep">
      [
      <a class="ltx_ref" href="#bib.bib58" title="">
       58
      </a>
      ]
     </cite>
     into our aforementioned “Standard” conversational prompt format. Effectively, we ask an LLM to do end-to-end dialogue generation by having it first produce a reasoning chain which states whether the current context is ambiguous or not. We provide an example in Table
     <a class="ltx_ref" href="#A4.T14" title="Table A14 ‣ Standard Prompting ‣ Appendix D Description of In-Context Learning Baselines ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A14
      </span>
     </a>
     .
    </p>
   </div>
   <figure class="ltx_table" id="A4.T15">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A15:
     </span>
     <span class="ltx_text ltx_font_bold" id="A4.T15.8.1">
      “Proactive Mixed-Initiative” in-context example given as part of a prompt to an LLM for response generation in PACIFIC.
     </span>
     The
     <span class="ltx_text" id="A4.T15.9.2" style="color:#BF0040;">
      purple
     </span>
     text is the overall system instruction. The
     <span class="ltx_text" id="A4.T15.10.3" style="color:#0000FF;">
      blue
     </span>
     text is what an LLM would have to produce at inference time.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A4.T15.4">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A4.T15.4.5.1">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A4.T15.4.5.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.5.1.1.1">
         <span class="ltx_p" id="A4.T15.4.5.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.5.1.1.1.1.1" style="font-size:90%;color:#BF0040;">
           You are an Assistant answering questions from a User. You should either attempt to answer the question or ask a clarifying question if there is any ambiguity.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.2.2.2.2">
         <span class="ltx_p" id="A4.T15.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A4.T15.1.1.1.1.1.m1.1">
           <semantics id="A4.T15.1.1.1.1.1.m1.1a">
            <mo id="A4.T15.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A4.T15.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A4.T15.1.1.1.1.1.m1.1b">
             <ci id="A4.T15.1.1.1.1.1.m1.1.1.cmml" xref="A4.T15.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A4.T15.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A4.T15.2.2.2.2.2.1" style="font-size:90%;">
           Table and Passage Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A4.T15.2.2.2.2.2.m2.1">
           <semantics id="A4.T15.2.2.2.2.2.m2.1a">
            <mo id="A4.T15.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A4.T15.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A4.T15.2.2.2.2.2.m2.1b">
             <ci id="A4.T15.2.2.2.2.2.m2.1.1.cmml" xref="A4.T15.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A4.T15.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.6.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.6.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.6.2.1.1">
         <span class="ltx_p" id="A4.T15.4.6.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.6.2.1.1.1.1" style="font-size:90%;">
           User: How much does the company expect to make contributions to the defined plans during the next fiscal year?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.7.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.7.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.7.3.1.1">
         <span class="ltx_p" id="A4.T15.4.7.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.7.3.1.1.1.1" style="font-size:90%;">
           The user’s last question was ambiguous. The Assistant asks a clarifying question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.8.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.8.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.8.4.1.1">
         <span class="ltx_p" id="A4.T15.4.8.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.8.4.1.1.1.1" style="font-size:90%;">
           Assistant: [’What kind of defined plans are you asking about?’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.9.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.9.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.9.5.1.1">
         <span class="ltx_p" id="A4.T15.4.9.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.9.5.1.1.1.1" style="font-size:90%;">
           User: The defined benefit plans and the defined contribution plan respectively.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.10.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.10.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.10.6.1.1">
         <span class="ltx_p" id="A4.T15.4.10.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.10.6.1.1.1.1" style="font-size:90%;">
           The user’s last question was unambiguous. The Assistant directly answers the question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.3.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.3.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.3.3.1.1">
         <span class="ltx_p" id="A4.T15.3.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.3.3.1.1.1.1" style="font-size:90%;">
           Assistant: [’
          </span>
          <math alttext="5.1million^{\prime},^{\prime}" class="ltx_math_unparsed" display="inline" id="A4.T15.3.3.1.1.1.m1.1">
           <semantics id="A4.T15.3.3.1.1.1.m1.1a">
            <mrow id="A4.T15.3.3.1.1.1.m1.1b">
             <mn id="A4.T15.3.3.1.1.1.m1.1.1" mathsize="90%">
              5.1
             </mn>
             <mi id="A4.T15.3.3.1.1.1.m1.1.2" mathsize="90%">
              m
             </mi>
             <mi id="A4.T15.3.3.1.1.1.m1.1.3" mathsize="90%">
              i
             </mi>
             <mi id="A4.T15.3.3.1.1.1.m1.1.4" mathsize="90%">
              l
             </mi>
             <mi id="A4.T15.3.3.1.1.1.m1.1.5" mathsize="90%">
              l
             </mi>
             <mi id="A4.T15.3.3.1.1.1.m1.1.6" mathsize="90%">
              i
             </mi>
             <mi id="A4.T15.3.3.1.1.1.m1.1.7" mathsize="90%">
              o
             </mi>
             <msup id="A4.T15.3.3.1.1.1.m1.1.8">
              <mi id="A4.T15.3.3.1.1.1.m1.1.8.2" mathsize="90%">
               n
              </mi>
              <mo id="A4.T15.3.3.1.1.1.m1.1.8.3" mathsize="90%">
               ′
              </mo>
             </msup>
             <msup id="A4.T15.3.3.1.1.1.m1.1.9">
              <mo id="A4.T15.3.3.1.1.1.m1.1.9.2" mathsize="90%">
               ,
              </mo>
              <mo id="A4.T15.3.3.1.1.1.m1.1.9.3" mathsize="90%">
               ′
              </mo>
             </msup>
            </mrow>
            <annotation encoding="application/x-tex" id="A4.T15.3.3.1.1.1.m1.1c">
             5.1million^{\prime},^{\prime}
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A4.T15.3.3.1.1.1.2" style="font-size:90%;">
           0.6 million’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.11.7">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.11.7.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.11.7.1.1">
         <span class="ltx_p" id="A4.T15.4.11.7.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.11.7.1.1.1.1" style="font-size:90%;">
           User: What is the value of the expected defined contribution plan as a percentage of the defined benefit plan during the next fiscal year?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.12.8">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.12.8.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.12.8.1.1">
         <span class="ltx_p" id="A4.T15.4.12.8.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.12.8.1.1.1.1" style="font-size:90%;">
           The user’s last question was unambiguous. The Assistant directly answers the question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.13.9">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.13.9.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.13.9.1.1">
         <span class="ltx_p" id="A4.T15.4.13.9.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.13.9.1.1.1.1" style="font-size:90%;">
           Assistant: 0.6/5.1 = 11.76
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.14.10">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.14.10.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.14.10.1.1">
         <span class="ltx_p" id="A4.T15.4.14.10.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.14.10.1.1.1.1" style="font-size:90%;">
           User: How much would change if there is a 1% increase and a 1% decrease respectively in the discount rate?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.15.11">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.15.11.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.15.11.1.1">
         <span class="ltx_p" id="A4.T15.4.15.11.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.15.11.1.1.1.1" style="font-size:90%;">
           The user’s last question was ambiguous. The Assistant asks a clarifying question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.16.12">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.16.12.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.16.12.1.1">
         <span class="ltx_p" id="A4.T15.4.16.12.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.16.12.1.1.1.1" style="font-size:90%;">
           Assistant: [’What kind of change are you asking about?’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.17.13">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.17.13.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.17.13.1.1">
         <span class="ltx_p" id="A4.T15.4.17.13.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.17.13.1.1.1.1" style="font-size:90%;">
           User: The pension.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.18.14">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.18.14.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.18.14.1.1">
         <span class="ltx_p" id="A4.T15.4.18.14.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.18.14.1.1.1.1" style="font-size:90%;">
           The user’s last question was unambiguous. The Assistant directly answers the question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.4.1.1">
         <span class="ltx_p" id="A4.T15.4.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.4.1.1.1.1" style="font-size:90%;">
           Assistant: [’
          </span>
          <math alttext="(39,145)^{\prime},^{\prime}" class="ltx_math_unparsed" display="inline" id="A4.T15.4.4.1.1.1.m1.2">
           <semantics id="A4.T15.4.4.1.1.1.m1.2a">
            <mrow id="A4.T15.4.4.1.1.1.m1.2b">
             <msup id="A4.T15.4.4.1.1.1.m1.2.3">
              <mrow id="A4.T15.4.4.1.1.1.m1.2.3.2">
               <mo id="A4.T15.4.4.1.1.1.m1.2.3.2.1" maxsize="90%" minsize="90%">
                (
               </mo>
               <mn id="A4.T15.4.4.1.1.1.m1.1.1" mathsize="90%">
                39
               </mn>
               <mo id="A4.T15.4.4.1.1.1.m1.2.3.2.2" mathsize="90%">
                ,
               </mo>
               <mn id="A4.T15.4.4.1.1.1.m1.2.2" mathsize="90%">
                145
               </mn>
               <mo id="A4.T15.4.4.1.1.1.m1.2.3.2.3" maxsize="90%" minsize="90%">
                )
               </mo>
              </mrow>
              <mo id="A4.T15.4.4.1.1.1.m1.2.3.3" mathsize="90%">
               ′
              </mo>
             </msup>
             <msup id="A4.T15.4.4.1.1.1.m1.2.4">
              <mo id="A4.T15.4.4.1.1.1.m1.2.4.2" mathsize="90%">
               ,
              </mo>
              <mo id="A4.T15.4.4.1.1.1.m1.2.4.3" mathsize="90%">
               ′
              </mo>
             </msup>
            </mrow>
            <annotation encoding="application/x-tex" id="A4.T15.4.4.1.1.1.m1.2c">
             (39,145)^{\prime},^{\prime}
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A4.T15.4.4.1.1.1.2" style="font-size:90%;">
           49,361’]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.19.15">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.19.15.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.19.15.1.1">
         <span class="ltx_p" id="A4.T15.4.19.15.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.19.15.1.1.1.1" style="font-size:90%;">
           User: What is the difference in that amount if the discount rate had a 1% increase and a 1% decrease?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.20.16">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.20.16.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.20.16.1.1">
         <span class="ltx_p" id="A4.T15.4.20.16.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.20.16.1.1.1.1" style="font-size:90%;">
           The user’s last question was unambiguous. The Assistant directly answers the question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.21.17">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.21.17.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.21.17.1.1">
         <span class="ltx_p" id="A4.T15.4.21.17.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.21.17.1.1.1.1" style="font-size:90%;">
           Assistant: 49,361 - (39,145) = 88506
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.22.18">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.22.18.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.22.18.1.1">
         <span class="ltx_p" id="A4.T15.4.22.18.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.22.18.1.1.1.1" style="font-size:90%;">
           User: How much would the pension change if there is a 1% increase and a 1% decrease respectively?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.23.19">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.23.19.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.23.19.1.1">
         <span class="ltx_p" id="A4.T15.4.23.19.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.23.19.1.1.1.1" style="font-size:90%;">
           Actions: [“Directly Answer”, “Ask a Clarification Question”]
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.24.20">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.24.20.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.24.20.1.1">
         <span class="ltx_p" id="A4.T15.4.24.20.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.24.20.1.1.1.1" style="font-size:90%;">
           Prompt: Given the task background and the conversation history, please use appropriate actions to generate the response.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.25.21">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A4.T15.4.25.21.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.25.21.1.1">
         <span class="ltx_p" id="A4.T15.4.25.21.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.25.21.1.1.1.1" style="font-size:90%;">
           Response:
          </span>
          <span class="ltx_text" id="A4.T15.4.25.21.1.1.1.2" style="font-size:90%;color:#0000FF;">
           The user’s last question was ambiguous. The Assistant asks a clarifying question.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A4.T15.4.26.22">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A4.T15.4.26.22.1">
        <span class="ltx_inline-block ltx_align_top" id="A4.T15.4.26.22.1.1">
         <span class="ltx_p" id="A4.T15.4.26.22.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A4.T15.4.26.22.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Assistant: [’Which rate of increase and decrease are you talking about?’]
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
  </section>
  <section class="ltx_paragraph" id="A4.SS0.SSS0.Px3">
   <h5 class="ltx_title ltx_title_paragraph">
    Proactive Mixed-Initiative Prompting
   </h5>
   <div class="ltx_para" id="A4.SS0.SSS0.Px3.p1">
    <p class="ltx_p" id="A4.SS0.SSS0.Px3.p1.1">
     Following the baselines given in
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib34" title="">
       34
      </a>
      ]
     </cite>
     , we apply the Proactive Prompting framework
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib59" title="">
       59
      </a>
      ]
     </cite>
     mixed with the Mixed-Initiative Prompting style
     <cite class="ltx_cite ltx_citemacro_cite">
      [
      <a class="ltx_ref" href="#bib.bib24" title="">
       24
      </a>
      ]
     </cite>
     . Ultimately, the LLM conditions on the possible set of actions, along with interweaved natural language instructions that describe which actions correspond to existing dialogue turns. We provide an example in Table
     <a class="ltx_ref" href="#A4.T15" title="Table A15 ‣ Chain-of-Thought Prompting ‣ Appendix D Description of In-Context Learning Baselines ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A15
      </span>
     </a>
     . We use this framework for each of the long-context dialogue corpora (PACIFIC and Abg-CoQA).
    </p>
   </div>
  </section>
 </section>
 <section class="ltx_appendix" id="A5">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix E
   </span>
   Conditional Generation Model Details
  </h2>
  <div class="ltx_para" id="A5.p1">
   <p class="ltx_p" id="A5.p1.1">
    As mentioned Section
    <a class="ltx_ref" href="#S3.SS1" title="3.1 Problem Setup ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      3.1
     </span>
    </a>
    , we make use of a high capacity LLM as a conditional generation model,
    <math alttext="M" class="ltx_Math" display="inline" id="A5.p1.1.m1.1">
     <semantics id="A5.p1.1.m1.1a">
      <mi id="A5.p1.1.m1.1.1" xref="A5.p1.1.m1.1.1.cmml">
       M
      </mi>
      <annotation-xml encoding="MathML-Content" id="A5.p1.1.m1.1b">
       <ci id="A5.p1.1.m1.1.1.cmml" xref="A5.p1.1.m1.1.1">
        𝑀
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="A5.p1.1.m1.1c">
       M
      </annotation>
     </semantics>
    </math>
    . For all experiments considered, we use Gemini Ultra 1.0 to construct the initial action-based contrastive preference dataset. We follow the format of “mixed-initiative prompting” described in
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib24" title="">
      24
     </a>
     ]
    </cite>
    , rather than performing zero-shot inference, we use ten in-context examples to adapt the LLM to the prompting structure. Concretely, for a given input/output pair to be used as an in-context example, we interweave each System-side utterance with a narrative instruction that states that the next utterance is either a clarifying question or a direct answer. This yields “control” over the pragmatic action of the generated utterance.
   </p>
  </div>
 </section>
 <section class="ltx_appendix" id="A6">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix F
   </span>
   Action Classifier Details
  </h2>
  <div class="ltx_para" id="A6.p1">
   <p class="ltx_p" id="A6.p1.1">
    Compared to recognizing whether a request is ambiguous or not, action classification (i.e., recognizing whether an existing utterance is a question or answer attempt) is considerably simpler. We directly prompt Gemini Ultra 1.0 with 10 in-context examples to serve as
    <math alttext="A" class="ltx_Math" display="inline" id="A6.p1.1.m1.1">
     <semantics id="A6.p1.1.m1.1a">
      <mi id="A6.p1.1.m1.1.1" xref="A6.p1.1.m1.1.1.cmml">
       A
      </mi>
      <annotation-xml encoding="MathML-Content" id="A6.p1.1.m1.1b">
       <ci id="A6.p1.1.m1.1.1.cmml" xref="A6.p1.1.m1.1.1">
        𝐴
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="A6.p1.1.m1.1c">
       A
      </annotation>
     </semantics>
    </math>
    (as per the notation given in Section
    <a class="ltx_ref" href="#S3.SS1" title="3.1 Problem Setup ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      3.1
     </span>
    </a>
    ).
   </p>
  </div>
  <figure class="ltx_table" id="A6.T16">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A16:
    </span>
    <span class="ltx_text ltx_font_bold" id="A6.T16.5.1">
     In-context example given as part of a prompt to an LLM for action classification with PACIFIC.
    </span>
    The
    <span class="ltx_text" id="A6.T16.6.2" style="color:#0000FF;">
     blue
    </span>
    text represents the action for this example.
   </figcaption>
   <table class="ltx_tabular ltx_align_middle" id="A6.T16.2">
    <tbody class="ltx_tbody">
     <tr class="ltx_tr" id="A6.T16.2.2">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A6.T16.2.2.2">
       <span class="ltx_inline-block ltx_align_top" id="A6.T16.2.2.2.2">
        <span class="ltx_p" id="A6.T16.2.2.2.2.2" style="width:411.9pt;">
         <math alttext="[" class="ltx_Math" display="inline" id="A6.T16.1.1.1.1.1.m1.1">
          <semantics id="A6.T16.1.1.1.1.1.m1.1a">
           <mo id="A6.T16.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A6.T16.1.1.1.1.1.m1.1.1.cmml">
            [
           </mo>
           <annotation-xml encoding="MathML-Content" id="A6.T16.1.1.1.1.1.m1.1b">
            <ci id="A6.T16.1.1.1.1.1.m1.1.1.cmml" xref="A6.T16.1.1.1.1.1.m1.1.1">
             [
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="A6.T16.1.1.1.1.1.m1.1c">
            [
           </annotation>
          </semantics>
         </math>
         <span class="ltx_text" id="A6.T16.2.2.2.2.2.1" style="font-size:90%;">
          Table and Passage Omitted
         </span>
         <math alttext="]" class="ltx_Math" display="inline" id="A6.T16.2.2.2.2.2.m2.1">
          <semantics id="A6.T16.2.2.2.2.2.m2.1a">
           <mo id="A6.T16.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A6.T16.2.2.2.2.2.m2.1.1.cmml">
            ]
           </mo>
           <annotation-xml encoding="MathML-Content" id="A6.T16.2.2.2.2.2.m2.1b">
            <ci id="A6.T16.2.2.2.2.2.m2.1.1.cmml" xref="A6.T16.2.2.2.2.2.m2.1.1">
             ]
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="A6.T16.2.2.2.2.2.m2.1c">
            ]
           </annotation>
          </semantics>
         </math>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T16.2.3.1">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T16.2.3.1.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T16.2.3.1.1.1">
        <span class="ltx_p" id="A6.T16.2.3.1.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T16.2.3.1.1.1.1.1" style="font-size:90%;">
          User: What was the total number of acquisitions in FY19?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T16.2.4.2">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T16.2.4.2.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T16.2.4.2.1.1">
        <span class="ltx_p" id="A6.T16.2.4.2.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T16.2.4.2.1.1.1.1" style="font-size:90%;">
          Assistant: 35 acquisitions
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T16.2.5.3">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T16.2.5.3.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T16.2.5.3.1.1">
        <span class="ltx_p" id="A6.T16.2.5.3.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T16.2.5.3.1.1.1.1" style="font-size:90%;">
          User: What are the benefits of active growth strategy?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T16.2.6.4">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T16.2.6.4.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T16.2.6.4.1.1">
        <span class="ltx_p" id="A6.T16.2.6.4.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T16.2.6.4.1.1.1.1" style="font-size:90%;">
          Assistant: strengthens and scales the National Storage operating platform which drives efficiencies across the business.
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T16.2.7.5">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T16.2.7.5.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T16.2.7.5.1.1">
        <span class="ltx_p" id="A6.T16.2.7.5.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T16.2.7.5.1.1.1.1" style="font-size:90%;">
          User: What was the total NLA?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T16.2.8.6">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T16.2.8.6.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T16.2.8.6.1.1">
        <span class="ltx_p" id="A6.T16.2.8.6.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T16.2.8.6.1.1.1.1" style="font-size:90%;">
          Assistant: Which region are you asking about?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T16.2.9.7">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A6.T16.2.9.7.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T16.2.9.7.1.1">
        <span class="ltx_p" id="A6.T16.2.9.7.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T16.2.9.7.1.1.1.1" style="font-size:90%;">
          The last Assistant utterance is
         </span>
         <span class="ltx_text" id="A6.T16.2.9.7.1.1.1.2" style="font-size:90%;color:#0000FF;">
          a clarifying question.
         </span>
        </span>
       </span>
      </td>
     </tr>
    </tbody>
   </table>
  </figure>
  <div class="ltx_para" id="A6.p2">
   <p class="ltx_p" id="A6.p2.1">
    Table
    <a class="ltx_ref" href="#A6.T16" title="Table A16 ‣ Appendix F Action Classifier Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      A16
     </span>
    </a>
    is an example of an in-context example used to demonstrate a system-side response with the “Clarify” action in PACIFIC (“Assistant: Which region are you asking about?”). All of the conversation history is made available in addition to the relevant table and passage in the prompt. We include all contextual information available as part of the input to the Action Classifier, along with the last Assistant response which is an example of the classification target.
   </p>
  </div>
  <figure class="ltx_table" id="A6.T17">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A17:
    </span>
    <span class="ltx_text ltx_font_bold" id="A6.T17.5.1">
     In-context example given as part of a prompt to an LLM for action classification with Abg-CoQA.
    </span>
    The
    <span class="ltx_text" id="A6.T17.6.2" style="color:#0000FF;">
     blue
    </span>
    text represents the action for this example.
   </figcaption>
   <table class="ltx_tabular ltx_align_middle" id="A6.T17.2">
    <tbody class="ltx_tbody">
     <tr class="ltx_tr" id="A6.T17.2.2">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A6.T17.2.2.2">
       <span class="ltx_inline-block ltx_align_top" id="A6.T17.2.2.2.2">
        <span class="ltx_p" id="A6.T17.2.2.2.2.2" style="width:411.9pt;">
         <math alttext="[" class="ltx_Math" display="inline" id="A6.T17.1.1.1.1.1.m1.1">
          <semantics id="A6.T17.1.1.1.1.1.m1.1a">
           <mo id="A6.T17.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A6.T17.1.1.1.1.1.m1.1.1.cmml">
            [
           </mo>
           <annotation-xml encoding="MathML-Content" id="A6.T17.1.1.1.1.1.m1.1b">
            <ci id="A6.T17.1.1.1.1.1.m1.1.1.cmml" xref="A6.T17.1.1.1.1.1.m1.1.1">
             [
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="A6.T17.1.1.1.1.1.m1.1c">
            [
           </annotation>
          </semantics>
         </math>
         <span class="ltx_text" id="A6.T17.2.2.2.2.2.1" style="font-size:90%;">
          Passage Omitted
         </span>
         <math alttext="]" class="ltx_Math" display="inline" id="A6.T17.2.2.2.2.2.m2.1">
          <semantics id="A6.T17.2.2.2.2.2.m2.1a">
           <mo id="A6.T17.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A6.T17.2.2.2.2.2.m2.1.1.cmml">
            ]
           </mo>
           <annotation-xml encoding="MathML-Content" id="A6.T17.2.2.2.2.2.m2.1b">
            <ci id="A6.T17.2.2.2.2.2.m2.1.1.cmml" xref="A6.T17.2.2.2.2.2.m2.1.1">
             ]
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="A6.T17.2.2.2.2.2.m2.1c">
            ]
           </annotation>
          </semantics>
         </math>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T17.2.3.1">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T17.2.3.1.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T17.2.3.1.1.1">
        <span class="ltx_p" id="A6.T17.2.3.1.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T17.2.3.1.1.1.1.1" style="font-size:90%;">
          User: And who in the group was anxious?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T17.2.4.2">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T17.2.4.2.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T17.2.4.2.1.1">
        <span class="ltx_p" id="A6.T17.2.4.2.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T17.2.4.2.1.1.1.1" style="font-size:90%;">
          Assistant: Peppe
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T17.2.5.3">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T17.2.5.3.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T17.2.5.3.1.1">
        <span class="ltx_p" id="A6.T17.2.5.3.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T17.2.5.3.1.1.1.1" style="font-size:90%;">
          User: Was she well-rested?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T17.2.6.4">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T17.2.6.4.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T17.2.6.4.1.1">
        <span class="ltx_p" id="A6.T17.2.6.4.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T17.2.6.4.1.1.1.1" style="font-size:90%;">
          Assistant: no
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T17.2.7.5">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A6.T17.2.7.5.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T17.2.7.5.1.1">
        <span class="ltx_p" id="A6.T17.2.7.5.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T17.2.7.5.1.1.1.1" style="font-size:90%;">
          The last Assistant utterance is
         </span>
         <span class="ltx_text" id="A6.T17.2.7.5.1.1.1.2" style="font-size:90%;color:#0000FF;">
          a direct answer.
         </span>
        </span>
       </span>
      </td>
     </tr>
    </tbody>
   </table>
  </figure>
  <div class="ltx_para" id="A6.p3">
   <p class="ltx_p" id="A6.p3.1">
    Table
    <a class="ltx_ref" href="#A6.T17" title="Table A17 ‣ Appendix F Action Classifier Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      A17
     </span>
    </a>
    is an example of an in-context example used to demonstrate a system-side response with the “Answer” action in Abg-CoQA (“Assistant: no”). As is common in this corpus, a subset of the conversation is made available in addition to the relevant passage in the prompt. We include all contextual information available as part of the input to the Action Classifier, along with the last Assistant response which is an example of the classification target.
   </p>
  </div>
  <figure class="ltx_table" id="A6.T18">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A18:
    </span>
    <span class="ltx_text ltx_font_bold" id="A6.T18.5.1">
     In-context example given as part of a prompt to an LLM for action classification with AmbigSQL.
    </span>
    The
    <span class="ltx_text" id="A6.T18.6.2" style="color:#0000FF;">
     blue
    </span>
    text represents the action for this example.
   </figcaption>
   <table class="ltx_tabular ltx_align_middle" id="A6.T18.2">
    <tbody class="ltx_tbody">
     <tr class="ltx_tr" id="A6.T18.2.2">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A6.T18.2.2.2">
       <span class="ltx_inline-block ltx_align_top" id="A6.T18.2.2.2.2">
        <span class="ltx_p" id="A6.T18.2.2.2.2.2" style="width:411.9pt;">
         <math alttext="[" class="ltx_Math" display="inline" id="A6.T18.1.1.1.1.1.m1.1">
          <semantics id="A6.T18.1.1.1.1.1.m1.1a">
           <mo id="A6.T18.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A6.T18.1.1.1.1.1.m1.1.1.cmml">
            [
           </mo>
           <annotation-xml encoding="MathML-Content" id="A6.T18.1.1.1.1.1.m1.1b">
            <ci id="A6.T18.1.1.1.1.1.m1.1.1.cmml" xref="A6.T18.1.1.1.1.1.m1.1.1">
             [
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="A6.T18.1.1.1.1.1.m1.1c">
            [
           </annotation>
          </semantics>
         </math>
         <span class="ltx_text" id="A6.T18.2.2.2.2.2.1" style="font-size:90%;">
          Database Schema Omitted
         </span>
         <math alttext="]" class="ltx_Math" display="inline" id="A6.T18.2.2.2.2.2.m2.1">
          <semantics id="A6.T18.2.2.2.2.2.m2.1a">
           <mo id="A6.T18.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A6.T18.2.2.2.2.2.m2.1.1.cmml">
            ]
           </mo>
           <annotation-xml encoding="MathML-Content" id="A6.T18.2.2.2.2.2.m2.1b">
            <ci id="A6.T18.2.2.2.2.2.m2.1.1.cmml" xref="A6.T18.2.2.2.2.2.m2.1.1">
             ]
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="A6.T18.2.2.2.2.2.m2.1c">
            ]
           </annotation>
          </semantics>
         </math>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T18.2.3.1">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T18.2.3.1.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T18.2.3.1.1.1">
        <span class="ltx_p" id="A6.T18.2.3.1.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T18.2.3.1.1.1.1.1" style="font-size:90%;">
          User: “Which professionals live in the state of Indiana or have done treatment on more than 2 treatments? List his or her id, last name and cell phone.”
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T18.2.4.2">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A6.T18.2.4.2.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T18.2.4.2.1.1">
        <span class="ltx_p" id="A6.T18.2.4.2.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T18.2.4.2.1.1.1.1" style="font-size:90%;">
          Here is the same request converted into an ambiguous format by underspecifying the target columns:
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A6.T18.2.5.3">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A6.T18.2.5.3.1">
       <span class="ltx_inline-block ltx_align_top" id="A6.T18.2.5.3.1.1">
        <span class="ltx_p" id="A6.T18.2.5.3.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A6.T18.2.5.3.1.1.1.1" style="font-size:90%;">
          Assistant:
         </span>
        </span>
        <pre class="ltx_verbatim ltx_font_typewriter" id="A6.T18.2.5.3.1.1.2" style="font-size:90%;">
SELECT professional_id ,  last_name ,  cell_number FROM Professionals
WHERE state  =  ’Indiana’ UNION SELECT T1.professional_id ,  T1.last_name ,
T1.cell_number FROM Professionals AS T1 JOIN Treatments AS T2 ON
T1.professional_id  =  T2.professional_id
GROUP BY T1.professional_id HAVING count(*)  &gt;  2
</pre>
        <span class="ltx_p" id="A6.T18.2.5.3.1.1.3">
         <span class="ltx_text" id="A6.T18.2.5.3.1.1.3.1" style="font-size:90%;">
          The last Assistant utterance is
         </span>
         <span class="ltx_text" id="A6.T18.2.5.3.1.1.3.2" style="font-size:90%;color:#0000FF;">
          a direct answer.
         </span>
        </span>
       </span>
      </td>
     </tr>
    </tbody>
   </table>
  </figure>
  <div class="ltx_para" id="A6.p4">
   <p class="ltx_p" id="A6.p4.1">
    Table
    <a class="ltx_ref" href="#A6.T18" title="Table A18 ‣ Appendix F Action Classifier Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      A18
     </span>
    </a>
    is an example of an in-context example used to demonstrate a system-side response with the “Answer” action in AmbigSQL. In AmbigSQL, the information provided as input is the database schema, and the user’s initial information request. This information is provided as part of the input to the Action Classifier, along with the last Assistant response which is an example of the classification target.
   </p>
  </div>
 </section>
 <section class="ltx_appendix" id="A7">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix G
   </span>
   User Simulator Details
  </h2>
  <div class="ltx_para" id="A7.p1">
   <p class="ltx_p" id="A7.p1.2">
    In order to iterate on system-side dialogue models, many works investigate the use of a user simulator,
    <math alttext="U" class="ltx_Math" display="inline" id="A7.p1.1.m1.1">
     <semantics id="A7.p1.1.m1.1a">
      <mi id="A7.p1.1.m1.1.1" xref="A7.p1.1.m1.1.1.cmml">
       U
      </mi>
      <annotation-xml encoding="MathML-Content" id="A7.p1.1.m1.1b">
       <ci id="A7.p1.1.m1.1.1.cmml" xref="A7.p1.1.m1.1.1">
        𝑈
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="A7.p1.1.m1.1c">
       U
      </annotation>
     </semantics>
    </math>
    (as per the notation given in Section
    <a class="ltx_ref" href="#S3.SS1" title="3.1 Problem Setup ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      3.1
     </span>
    </a>
    ) (e.g.
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib70" title="">
      70
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib71" title="">
      71
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib72" title="">
      72
     </a>
     ]
    </cite>
    ). At its core, it requires a response generation model which can robustly represent user-side intents. Traditionally, this involved training a model specifically on user-side responses but due to the aforementioned control capabilities of modern LLMs
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib24" title="">
      24
     </a>
     ]
    </cite>
    , we directly perform few-shot prompting for user simulation, following
    <cite class="ltx_cite ltx_citemacro_cite">
     [
     <a class="ltx_ref" href="#bib.bib34" title="">
      34
     </a>
     ,
     <a class="ltx_ref" href="#bib.bib27" title="">
      27
     </a>
     ]
    </cite>
    . For a given conversation during training, we again prompt a high-capacity LLM with in-context examples to identify the information-seeking user intents. Then, conditioned on the generated information-seeking intents, we prompt the same LLM with the responses from the policy model to simulate the sub-goal trajectory. This allows
    <math alttext="U" class="ltx_Math" display="inline" id="A7.p1.2.m2.1">
     <semantics id="A7.p1.2.m2.1a">
      <mi id="A7.p1.2.m2.1.1" xref="A7.p1.2.m2.1.1.cmml">
       U
      </mi>
      <annotation-xml encoding="MathML-Content" id="A7.p1.2.m2.1b">
       <ci id="A7.p1.2.m2.1.1.cmml" xref="A7.p1.2.m2.1.1">
        𝑈
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="A7.p1.2.m2.1c">
       U
      </annotation>
     </semantics>
    </math>
    to ground on the real intents of the user while retaining enough flexibility to respond coherently to some system-side response. In our work, we use Gemini Ultra 1.0 with three hand-crafted in-context examples for both intent summarization and user response generation.
   </p>
  </div>
  <figure class="ltx_table" id="A7.T19">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A19:
    </span>
    <span class="ltx_text ltx_font_bold" id="A7.T19.6.1">
     In-context example given as part of a prompt to an LLM for intent summarization with PACIFIC.
    </span>
    The
    <span class="ltx_text" id="A7.T19.7.2" style="color:#BF0040;">
     purple
    </span>
    text represents the system prompt used for this task. The
    <span class="ltx_text" id="A7.T19.8.3" style="color:#0000FF;">
     blue
    </span>
    text represents the summarized information-seeking intents.
   </figcaption>
   <table class="ltx_tabular ltx_align_middle" id="A7.T19.2">
    <tbody class="ltx_tbody">
     <tr class="ltx_tr" id="A7.T19.2.3.1">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A7.T19.2.3.1.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.3.1.1.1">
        <span class="ltx_p" id="A7.T19.2.3.1.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.3.1.1.1.1.1" style="font-size:90%;color:#BF0040;">
          The following is a conversation between a User and an Assistant. The User is asking some questions. Summarize what information the User is looking for.
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.2">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.2.2">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.2.2.2">
        <span class="ltx_p" id="A7.T19.2.2.2.2.2" style="width:411.9pt;">
         <math alttext="[" class="ltx_Math" display="inline" id="A7.T19.1.1.1.1.1.m1.1">
          <semantics id="A7.T19.1.1.1.1.1.m1.1a">
           <mo id="A7.T19.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A7.T19.1.1.1.1.1.m1.1.1.cmml">
            [
           </mo>
           <annotation-xml encoding="MathML-Content" id="A7.T19.1.1.1.1.1.m1.1b">
            <ci id="A7.T19.1.1.1.1.1.m1.1.1.cmml" xref="A7.T19.1.1.1.1.1.m1.1.1">
             [
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="A7.T19.1.1.1.1.1.m1.1c">
            [
           </annotation>
          </semantics>
         </math>
         <span class="ltx_text" id="A7.T19.2.2.2.2.2.1" style="font-size:90%;">
          Table and Passage Omitted
         </span>
         <math alttext="]" class="ltx_Math" display="inline" id="A7.T19.2.2.2.2.2.m2.1">
          <semantics id="A7.T19.2.2.2.2.2.m2.1a">
           <mo id="A7.T19.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A7.T19.2.2.2.2.2.m2.1.1.cmml">
            ]
           </mo>
           <annotation-xml encoding="MathML-Content" id="A7.T19.2.2.2.2.2.m2.1b">
            <ci id="A7.T19.2.2.2.2.2.m2.1.1.cmml" xref="A7.T19.2.2.2.2.2.m2.1.1">
             ]
            </ci>
           </annotation-xml>
           <annotation encoding="application/x-tex" id="A7.T19.2.2.2.2.2.m2.1c">
            ]
           </annotation>
          </semantics>
         </math>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.4.2">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.4.2.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.4.2.1.1">
        <span class="ltx_p" id="A7.T19.2.4.2.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.4.2.1.1.1.1" style="font-size:90%;">
          User: What does Walletron deliver?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.5.3">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.5.3.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.5.3.1.1">
        <span class="ltx_p" id="A7.T19.2.5.3.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.5.3.1.1.1.1" style="font-size:90%;">
          Assistant: patented mobile wallet technology.
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.6.4">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.6.4.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.6.4.1.1">
        <span class="ltx_p" id="A7.T19.2.6.4.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.6.4.1.1.1.1" style="font-size:90%;">
          User: How much did it cost the company to acquire certain technology assets of RevChip, LLC ("RevChip") and TranSend Integrated Technologies Inc. ("TranSend")?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.7.5">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.7.5.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.7.5.1.1">
        <span class="ltx_p" id="A7.T19.2.7.5.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.7.5.1.1.1.1" style="font-size:90%;">
          Assistant: $7.0 million
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.8.6">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.8.6.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.8.6.1.1">
        <span class="ltx_p" id="A7.T19.2.8.6.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.8.6.1.1.1.1" style="font-size:90%;">
          User: What was the pro forma revenue in 2019?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.9.7">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.9.7.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.9.7.1.1">
        <span class="ltx_p" id="A7.T19.2.9.7.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.9.7.1.1.1.1" style="font-size:90%;">
          Assistant: $1,382,957
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.10.8">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.10.8.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.10.8.1.1">
        <span class="ltx_p" id="A7.T19.2.10.8.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.10.8.1.1.1.1" style="font-size:90%;">
          User: What was the change in its amount between 2018 and 2019?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.11.9">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.11.9.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.11.9.1.1">
        <span class="ltx_p" id="A7.T19.2.11.9.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.11.9.1.1.1.1" style="font-size:90%;">
          Assistant: 21228
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.12.10">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.12.10.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.12.10.1.1">
        <span class="ltx_p" id="A7.T19.2.12.10.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.12.10.1.1.1.1" style="font-size:90%;">
          User: How about that in pro forma net income?
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.13.11">
      <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T19.2.13.11.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.13.11.1.1">
        <span class="ltx_p" id="A7.T19.2.13.11.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.13.11.1.1.1.1" style="font-size:90%;">
          Assistant: -6425
         </span>
        </span>
       </span>
      </td>
     </tr>
     <tr class="ltx_tr" id="A7.T19.2.14.12">
      <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A7.T19.2.14.12.1">
       <span class="ltx_inline-block ltx_align_top" id="A7.T19.2.14.12.1.1">
        <span class="ltx_p" id="A7.T19.2.14.12.1.1.1" style="width:411.9pt;">
         <span class="ltx_text" id="A7.T19.2.14.12.1.1.1.1" style="font-size:90%;color:#0000FF;">
          [Information] The user wants to know: 1. What technology Walletron delivers, 2. How much it cost Walletron to acquire certain technology assets of RevChip, LLC and TranSend Integrated Technologies Inc., 3. What the pro forma revenue was in 2019, 4. What the change in pro forma revenue was between 2018 and 2019, and 5. What the change in pro forma net income was between 2018 and 2019.
         </span>
        </span>
       </span>
      </td>
     </tr>
    </tbody>
   </table>
  </figure>
  <section class="ltx_paragraph" id="A7.SS0.SSS0.Px1">
   <h5 class="ltx_title ltx_title_paragraph">
    PACIFIC
   </h5>
   <div class="ltx_para" id="A7.SS0.SSS0.Px1.p1">
    <p class="ltx_p" id="A7.SS0.SSS0.Px1.p1.1">
     We provide one of our three handcrafted in-context examples of summarizing information-seeking intent in Table
     <a class="ltx_ref" href="#A7.T19" title="Table A19 ‣ Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A19
      </span>
     </a>
     . While the information summary is handcrafted, the conversation and grounding data are taken directly from the PACIFIC. After intent summarization,
     <math alttext="U" class="ltx_Math" display="inline" id="A7.SS0.SSS0.Px1.p1.1.m1.1">
      <semantics id="A7.SS0.SSS0.Px1.p1.1.m1.1a">
       <mi id="A7.SS0.SSS0.Px1.p1.1.m1.1.1" xref="A7.SS0.SSS0.Px1.p1.1.m1.1.1.cmml">
        U
       </mi>
       <annotation-xml encoding="MathML-Content" id="A7.SS0.SSS0.Px1.p1.1.m1.1b">
        <ci id="A7.SS0.SSS0.Px1.p1.1.m1.1.1.cmml" xref="A7.SS0.SSS0.Px1.p1.1.m1.1.1">
         𝑈
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A7.SS0.SSS0.Px1.p1.1.m1.1c">
        U
       </annotation>
      </semantics>
     </math>
     is given the existing conversation history along with an instruction that includes the information seeking intents and asked to provide the next user response. This format is structurally the same as the three simulation-specific in-context examples — an example is provided in Table
     <a class="ltx_ref" href="#A7.T20" title="Table A20 ‣ PACIFIC ‣ Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A20
      </span>
     </a>
     .
    </p>
   </div>
   <figure class="ltx_table" id="A7.T20">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A20:
     </span>
     <span class="ltx_text ltx_font_bold" id="A7.T20.5.1">
      In-context example given as part of a prompt to an LLM for user simulation with PACIFIC.
     </span>
     The
     <span class="ltx_text" id="A7.T20.6.2" style="color:#BF0040;">
      purple
     </span>
     text represents the system prompt used for this task, which contains the information-seeking intents summarized from Table
     <a class="ltx_ref" href="#A7.T19" title="Table A19 ‣ Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A19
      </span>
     </a>
     . The entire conversation is used for this example to demonstrate grounding between a conversation and intents.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A7.T20.2">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A7.T20.2.3.1">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A7.T20.2.3.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.3.1.1.1">
         <span class="ltx_p" id="A7.T20.2.3.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T20.2.3.1.1.1.1.1" style="font-size:90%;color:#BF0040;">
           The following is a conversation between a User and an Assistant. The User is asking some questions. The user wants to know: 1. What technology Walletron delivers, 2. How much it cost Walletron to acquire certain technology assets of RevChip, LLC and TranSend Integrated Technologies Inc., 3. What the pro forma revenue was in 2019, 4. What the change in pro forma revenue was between 2018 and 2019, and 5. What the change in pro forma net income was between 2018 and 2019.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T20.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T20.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.2.2.2">
         <span class="ltx_p" id="A7.T20.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A7.T20.1.1.1.1.1.m1.1">
           <semantics id="A7.T20.1.1.1.1.1.m1.1a">
            <mo id="A7.T20.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A7.T20.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A7.T20.1.1.1.1.1.m1.1b">
             <ci id="A7.T20.1.1.1.1.1.m1.1.1.cmml" xref="A7.T20.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A7.T20.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A7.T20.2.2.2.2.2.1" style="font-size:90%;">
           Table and Passage Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A7.T20.2.2.2.2.2.m2.1">
           <semantics id="A7.T20.2.2.2.2.2.m2.1a">
            <mo id="A7.T20.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A7.T20.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A7.T20.2.2.2.2.2.m2.1b">
             <ci id="A7.T20.2.2.2.2.2.m2.1.1.cmml" xref="A7.T20.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A7.T20.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T20.2.4.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T20.2.4.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.4.2.1.1">
         <span class="ltx_p" id="A7.T20.2.4.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T20.2.4.2.1.1.1.1" style="font-size:90%;">
           Assistant: $7.0 million
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T20.2.5.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T20.2.5.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.5.3.1.1">
         <span class="ltx_p" id="A7.T20.2.5.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T20.2.5.3.1.1.1.1" style="font-size:90%;">
           User: What was the pro forma revenue in 2019?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T20.2.6.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T20.2.6.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.6.4.1.1">
         <span class="ltx_p" id="A7.T20.2.6.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T20.2.6.4.1.1.1.1" style="font-size:90%;">
           Assistant: $1,382,957
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T20.2.7.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T20.2.7.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.7.5.1.1">
         <span class="ltx_p" id="A7.T20.2.7.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T20.2.7.5.1.1.1.1" style="font-size:90%;">
           User: What was the change in its amount between 2018 and 2019?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T20.2.8.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T20.2.8.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.8.6.1.1">
         <span class="ltx_p" id="A7.T20.2.8.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T20.2.8.6.1.1.1.1" style="font-size:90%;">
           Assistant: 21228
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T20.2.9.7">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T20.2.9.7.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.9.7.1.1">
         <span class="ltx_p" id="A7.T20.2.9.7.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T20.2.9.7.1.1.1.1" style="font-size:90%;">
           User: How about that in pro forma net income?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T20.2.10.8">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A7.T20.2.10.8.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T20.2.10.8.1.1">
         <span class="ltx_p" id="A7.T20.2.10.8.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T20.2.10.8.1.1.1.1" style="font-size:90%;">
           Assistant: -6425
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
  </section>
  <section class="ltx_paragraph" id="A7.SS0.SSS0.Px2">
   <h5 class="ltx_title ltx_title_paragraph">
    Abg-CoQA
   </h5>
   <div class="ltx_para" id="A7.SS0.SSS0.Px2.p1">
    <p class="ltx_p" id="A7.SS0.SSS0.Px2.p1.1">
     We conduct user simulation for Abg-CoQA similarly to PACIFIC. Table
     <a class="ltx_ref" href="#A7.T21" title="Table A21 ‣ Abg-CoQA ‣ Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A21
      </span>
     </a>
     is one of three hand-crafted examples of intent summarization, and Table
     <a class="ltx_ref" href="#A7.T22" title="Table A22 ‣ AmbigSQL ‣ Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A22
      </span>
     </a>
     is one of three hand-crafted examples used for simulating the final user response.
    </p>
   </div>
   <figure class="ltx_table" id="A7.T21">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A21:
     </span>
     <span class="ltx_text ltx_font_bold" id="A7.T21.4.1">
      In-context example given as part of a prompt to an LLM for intent summarization with Abg-CoQA.
     </span>
     The purple text represents the system prompt used for this task. The blue text represents the summarized information-seeking intents.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A7.T21.2">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A7.T21.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A7.T21.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.2.2.2">
         <span class="ltx_p" id="A7.T21.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A7.T21.1.1.1.1.1.m1.1">
           <semantics id="A7.T21.1.1.1.1.1.m1.1a">
            <mo id="A7.T21.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A7.T21.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A7.T21.1.1.1.1.1.m1.1b">
             <ci id="A7.T21.1.1.1.1.1.m1.1.1.cmml" xref="A7.T21.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A7.T21.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A7.T21.2.2.2.2.2.1" style="font-size:90%;">
           Passage Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A7.T21.2.2.2.2.2.m2.1">
           <semantics id="A7.T21.2.2.2.2.2.m2.1a">
            <mo id="A7.T21.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A7.T21.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A7.T21.2.2.2.2.2.m2.1b">
             <ci id="A7.T21.2.2.2.2.2.m2.1.1.cmml" xref="A7.T21.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A7.T21.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.3.1">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.3.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.3.1.1.1">
         <span class="ltx_p" id="A7.T21.2.3.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.3.1.1.1.1.1" style="font-size:90%;">
           User: What was his ranking?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.4.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.4.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.4.2.1.1">
         <span class="ltx_p" id="A7.T21.2.4.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.4.2.1.1.1.1" style="font-size:90%;">
           Assistant: General
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.5.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.5.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.5.3.1.1">
         <span class="ltx_p" id="A7.T21.2.5.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.5.3.1.1.1.1" style="font-size:90%;">
           User: Did someone else have horse fighters?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.6.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.6.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.6.4.1.1">
         <span class="ltx_p" id="A7.T21.2.6.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.6.4.1.1.1.1" style="font-size:90%;">
           Assistant: yes
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.7.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.7.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.7.5.1.1">
         <span class="ltx_p" id="A7.T21.2.7.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.7.5.1.1.1.1" style="font-size:90%;">
           User: Who?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.8.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.8.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.8.6.1.1">
         <span class="ltx_p" id="A7.T21.2.8.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.8.6.1.1.1.1" style="font-size:90%;">
           Assistant: Do you want to know who had 2,500 horse fighters initially?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.9.7">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.9.7.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.9.7.1.1">
         <span class="ltx_p" id="A7.T21.2.9.7.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.9.7.1.1.1.1" style="font-size:90%;">
           User: No, I want to know who had a considerable force of horse fighters west of him.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.10.8">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.10.8.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.10.8.1.1">
         <span class="ltx_p" id="A7.T21.2.10.8.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.10.8.1.1.1.1" style="font-size:90%;">
           Assistant: General (Bishop) Polk.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.11.9">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T21.2.11.9.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.11.9.1.1">
         <span class="ltx_p" id="A7.T21.2.11.9.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.11.9.1.1.1.1" style="font-size:90%;color:#BF0040;">
           Instruction: Summarize what information the user is looking for.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T21.2.12.10">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A7.T21.2.12.10.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T21.2.12.10.1.1">
         <span class="ltx_p" id="A7.T21.2.12.10.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T21.2.12.10.1.1.1.1" style="font-size:90%;color:#0000FF;">
           Summary: The user wants to know: 1. What his ranking was. 2. Whether someone else had horse fighters. 3. Who had a considerable force of horse fighters west of him.
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
  </section>
  <section class="ltx_paragraph" id="A7.SS0.SSS0.Px3">
   <h5 class="ltx_title ltx_title_paragraph">
    AmbigSQL
   </h5>
   <div class="ltx_para" id="A7.SS0.SSS0.Px3.p1">
    <p class="ltx_p" id="A7.SS0.SSS0.Px3.p1.2">
     We conduct user simulation slightly differently for AmbigSQL. Rather than having a separate step for knowledge-seeking intent summarization, we directly condition
     <math alttext="U" class="ltx_Math" display="inline" id="A7.SS0.SSS0.Px3.p1.1.m1.1">
      <semantics id="A7.SS0.SSS0.Px3.p1.1.m1.1a">
       <mi id="A7.SS0.SSS0.Px3.p1.1.m1.1.1" xref="A7.SS0.SSS0.Px3.p1.1.m1.1.1.cmml">
        U
       </mi>
       <annotation-xml encoding="MathML-Content" id="A7.SS0.SSS0.Px3.p1.1.m1.1b">
        <ci id="A7.SS0.SSS0.Px3.p1.1.m1.1.1.cmml" xref="A7.SS0.SSS0.Px3.p1.1.m1.1.1">
         𝑈
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A7.SS0.SSS0.Px3.p1.1.m1.1c">
        U
       </annotation>
      </semantics>
     </math>
     on the target SQL query. As demonstrated in Table
     <a class="ltx_ref" href="#A7.T23" title="Table A23 ‣ AmbigSQL ‣ Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A23
      </span>
     </a>
     , the prompt includes the target SQL query, the original user request, and the clarification question sampled from the Assistant. In the example given in Table
     <a class="ltx_ref" href="#A7.T23" title="Table A23 ‣ AmbigSQL ‣ Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A23
      </span>
     </a>
     , the last line is the ground truth disambiguated query, and in practice, this would be the generation target of
     <math alttext="U" class="ltx_Math" display="inline" id="A7.SS0.SSS0.Px3.p1.2.m2.1">
      <semantics id="A7.SS0.SSS0.Px3.p1.2.m2.1a">
       <mi id="A7.SS0.SSS0.Px3.p1.2.m2.1.1" xref="A7.SS0.SSS0.Px3.p1.2.m2.1.1.cmml">
        U
       </mi>
       <annotation-xml encoding="MathML-Content" id="A7.SS0.SSS0.Px3.p1.2.m2.1b">
        <ci id="A7.SS0.SSS0.Px3.p1.2.m2.1.1.cmml" xref="A7.SS0.SSS0.Px3.p1.2.m2.1.1">
         𝑈
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A7.SS0.SSS0.Px3.p1.2.m2.1c">
        U
       </annotation>
      </semantics>
     </math>
     .
    </p>
   </div>
   <figure class="ltx_table" id="A7.T22">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A22:
     </span>
     <span class="ltx_text ltx_font_bold" id="A7.T22.5.1">
      In-context example given as part of a prompt to an LLM for user simulation with Abg-CoQA.
     </span>
     The
     <span class="ltx_text" id="A7.T22.6.2" style="color:#BF0040;">
      purple
     </span>
     text represents the system prompt used for this task, which contains the information-seeking intents summarized from Table
     <a class="ltx_ref" href="#A7.T21" title="Table A21 ‣ Abg-CoQA ‣ Appendix G User Simulator Details ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       A21
      </span>
     </a>
     . The entire conversation is used for this example to demonstrate grounding between a conversation and intents.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A7.T22.2">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A7.T22.2.3.1">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A7.T22.2.3.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.3.1.1.1">
         <span class="ltx_p" id="A7.T22.2.3.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.3.1.1.1.1.1" style="font-size:90%;color:#BF0040;">
           The following is a snippet from a conversation between an Assistant and a User who is asking some questions about the Story below. The user only wants to know the following information: 1. What his ranking was. 2. Whether someone else had horse fighters. 3. Who had a considerable force of horse fighters west of him.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T22.2.2.2">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.2.2.2">
         <span class="ltx_p" id="A7.T22.2.2.2.2.2" style="width:411.9pt;">
          <math alttext="[" class="ltx_Math" display="inline" id="A7.T22.1.1.1.1.1.m1.1">
           <semantics id="A7.T22.1.1.1.1.1.m1.1a">
            <mo id="A7.T22.1.1.1.1.1.m1.1.1" maxsize="90%" minsize="90%" xref="A7.T22.1.1.1.1.1.m1.1.1.cmml">
             [
            </mo>
            <annotation-xml encoding="MathML-Content" id="A7.T22.1.1.1.1.1.m1.1b">
             <ci id="A7.T22.1.1.1.1.1.m1.1.1.cmml" xref="A7.T22.1.1.1.1.1.m1.1.1">
              [
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A7.T22.1.1.1.1.1.m1.1c">
             [
            </annotation>
           </semantics>
          </math>
          <span class="ltx_text" id="A7.T22.2.2.2.2.2.1" style="font-size:90%;">
           Passage Omitted
          </span>
          <math alttext="]" class="ltx_Math" display="inline" id="A7.T22.2.2.2.2.2.m2.1">
           <semantics id="A7.T22.2.2.2.2.2.m2.1a">
            <mo id="A7.T22.2.2.2.2.2.m2.1.1" maxsize="90%" minsize="90%" xref="A7.T22.2.2.2.2.2.m2.1.1.cmml">
             ]
            </mo>
            <annotation-xml encoding="MathML-Content" id="A7.T22.2.2.2.2.2.m2.1b">
             <ci id="A7.T22.2.2.2.2.2.m2.1.1.cmml" xref="A7.T22.2.2.2.2.2.m2.1.1">
              ]
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="A7.T22.2.2.2.2.2.m2.1c">
             ]
            </annotation>
           </semantics>
          </math>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.4.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T22.2.4.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.4.2.1.1">
         <span class="ltx_p" id="A7.T22.2.4.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.4.2.1.1.1.1" style="font-size:90%;">
           User: What was his ranking?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.5.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T22.2.5.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.5.3.1.1">
         <span class="ltx_p" id="A7.T22.2.5.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.5.3.1.1.1.1" style="font-size:90%;">
           Assistant: General
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.6.4">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T22.2.6.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.6.4.1.1">
         <span class="ltx_p" id="A7.T22.2.6.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.6.4.1.1.1.1" style="font-size:90%;">
           User: Did someone else have horse fighters?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.7.5">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T22.2.7.5.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.7.5.1.1">
         <span class="ltx_p" id="A7.T22.2.7.5.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.7.5.1.1.1.1" style="font-size:90%;">
           Assistant: yes
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.8.6">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T22.2.8.6.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.8.6.1.1">
         <span class="ltx_p" id="A7.T22.2.8.6.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.8.6.1.1.1.1" style="font-size:90%;">
           User: Who?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.9.7">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T22.2.9.7.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.9.7.1.1">
         <span class="ltx_p" id="A7.T22.2.9.7.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.9.7.1.1.1.1" style="font-size:90%;">
           Assistant: Do you want to know who had 2,500 horse fighters initially?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.10.8">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T22.2.10.8.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.10.8.1.1">
         <span class="ltx_p" id="A7.T22.2.10.8.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.10.8.1.1.1.1" style="font-size:90%;">
           User: No, I want to know who had a considerable force of horse fighters west of him.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T22.2.11.9">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A7.T22.2.11.9.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T22.2.11.9.1.1">
         <span class="ltx_p" id="A7.T22.2.11.9.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T22.2.11.9.1.1.1.1" style="font-size:90%;">
           Assistant: General (Bishop) Polk.
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
   <figure class="ltx_table" id="A7.T23">
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table A23:
     </span>
     <span class="ltx_text ltx_font_bold" id="A7.T23.3.1">
      In-context example given as part of a prompt to an LLM for user simulation with AmbigSQL.
     </span>
     The
     <span class="ltx_text" id="A7.T23.4.2" style="color:#BF0040;">
      purple
     </span>
     text represents the system prompt used for this task, which contains ground truth SQL query goal. The entire conversation is used for this example to demonstrate SQL query-grounded request disambiguation.
    </figcaption>
    <table class="ltx_tabular ltx_align_middle" id="A7.T23.5">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A7.T23.5.1.1">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_tt" id="A7.T23.5.1.1.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T23.5.1.1.1.1">
         <span class="ltx_p" id="A7.T23.5.1.1.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T23.5.1.1.1.1.1.1" style="font-size:90%;color:#BF0040;">
           A user is asking an assistant to retrieve some information from a SQL database. The command that the assistant should ultimately return is as follows:
          </span>
          <span class="ltx_text" id="A7.T23.5.1.1.1.1.1.2" style="font-size:90%;">
          </span>
         </span>
         <pre class="ltx_verbatim ltx_font_typewriter" id="A7.T23.5.1.1.1.1.2" style="font-size:90%;">
SELECT county FROM campuses where campus = ’California State University-Chico’
</pre>
         <span class="ltx_p" id="A7.T23.5.1.1.1.1.3">
          <span class="ltx_text" id="A7.T23.5.1.1.1.1.3.1" style="font-size:90%;color:#BF0040;">
           The assistant will ask some questions to clarify the user’s intent. The user should respond with a rephrased request that reflects their desired query.
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T23.5.2.2">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T23.5.2.2.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T23.5.2.2.1.1">
         <span class="ltx_p" id="A7.T23.5.2.2.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T23.5.2.2.1.1.1.1" style="font-size:90%;">
           User: what is the county?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T23.5.3.3">
       <td class="ltx_td ltx_align_justify ltx_align_top" id="A7.T23.5.3.3.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T23.5.3.3.1.1">
         <span class="ltx_p" id="A7.T23.5.3.3.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T23.5.3.3.1.1.1.1" style="font-size:90%;">
           Assistant: Are you asking for a list of all of the counties in the database?
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A7.T23.5.4.4">
       <td class="ltx_td ltx_align_justify ltx_align_top ltx_border_bb" id="A7.T23.5.4.4.1">
        <span class="ltx_inline-block ltx_align_top" id="A7.T23.5.4.4.1.1">
         <span class="ltx_p" id="A7.T23.5.4.4.1.1.1" style="width:411.9pt;">
          <span class="ltx_text" id="A7.T23.5.4.4.1.1.1.1" style="font-size:90%;">
           User: I’m looking for the county of the campus ’California State University-Chico’
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
   </figure>
  </section>
 </section>
 <section class="ltx_appendix" id="A8">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix H
   </span>
   Additional Qualitative Examples
  </h2>
  <div class="ltx_para" id="A8.p1">
   <p class="ltx_p" id="A8.p1.1">
    Table
    <a class="ltx_ref" href="#A8.T24" title="Table A24 ‣ Appendix H Additional Qualitative Examples ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      A24
     </span>
    </a>
    includes an erroneous trajectory produced by the
    <span class="ltx_text ltx_font_italic" id="A8.p1.1.1">
     ACT
    </span>
    model in the 50 conversation setting of PACIFIC. In this particular example, both the provided passage and the provided table provided similar information regarding net profit/loss after tax. In the dataset, the ground truth answer selected a span from the passage, whereas the
    <span class="ltx_text ltx_font_italic" id="A8.p1.1.2">
     ACT
    </span>
    model produced a clarification question and then eventually an answer using tabular information. The SFT model directly assumed the intent of the user and similarly produced an answer from the tabular information.
   </p>
  </div>
  <div class="ltx_para" id="A8.p2">
   <p class="ltx_p" id="A8.p2.1">
    Table
    <a class="ltx_ref" href="#A8.T25" title="Table A25 ‣ Appendix H Additional Qualitative Examples ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      A25
     </span>
    </a>
    includes another pair of erroneous trajectories in the 50 conversation setting of PACIFIC. The requested information was accessible through the provided table data, but both the SFT model and the
    <span class="ltx_text ltx_font_italic" id="A8.p2.1.1">
     ACT
    </span>
    model failed to produce the correct answer. This example was not annotated as requiring a clarifying question, so it simply indicates that there is much room for improvement in terms of downstream task performance.
   </p>
  </div>
  <div class="ltx_para" id="A8.p3">
   <p class="ltx_p" id="A8.p3.1">
    Table
    <a class="ltx_ref" href="#A8.T26" title="Table A26 ‣ Appendix H Additional Qualitative Examples ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
     <span class="ltx_text ltx_ref_tag">
      A26
     </span>
    </a>
    includes a pair of trajectories resulting from SFT and
    <span class="ltx_text ltx_font_italic" id="A8.p3.1.1">
     ACT
    </span>
    in the 50 conversation setting of Abg-CoQA. The requested information is given in the portion of the passage in the left panel. The SFT model asked an off-topic clarification question and failed to bring the qestioning on track. The
    <span class="ltx_text ltx_font_italic" id="A8.p3.1.2">
     ACT
    </span>
    model successfully asked an on-track clarification question and eventually produced the correct answer.
   </p>
  </div>
  <figure class="ltx_table" id="A8.T24">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A24:
    </span>
    <span class="ltx_text ltx_font_bold" id="A8.T24.8.1">
     Comparison of PACIFIC trajectories using different tuning approaches
    </span>
    . Left: snippet of from a passage from the PACIFIC test set. Middle: trajectory resulting from the SFT model in response to the user query. Right: trajectory resulting from the
    <span class="ltx_text ltx_font_italic" id="A8.T24.9.2">
     ACT
    </span>
    model. Red text: sampled from
    <math alttext="U" class="ltx_Math" display="inline" id="A8.T24.2.m1.1">
     <semantics id="A8.T24.2.m1.1b">
      <mi id="A8.T24.2.m1.1.1" xref="A8.T24.2.m1.1.1.cmml">
       U
      </mi>
      <annotation-xml encoding="MathML-Content" id="A8.T24.2.m1.1c">
       <ci id="A8.T24.2.m1.1.1.cmml" xref="A8.T24.2.m1.1.1">
        𝑈
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="A8.T24.2.m1.1d">
       U
      </annotation>
     </semantics>
    </math>
    . Both the SFT and
    <span class="ltx_text ltx_font_italic" id="A8.T24.10.3">
     ACT
    </span>
    model answered the question incorrectly.
   </figcaption>
   <p class="ltx_p" id="A8.T24.4">
    <span class="ltx_text ltx_inline-block" id="A8.T24.4.2" style="width:433.6pt;">
     <span class="ltx_inline-block ltx_transformed_outer" id="A8.T24.4.2.2.2" style="width:716.0pt;height:91pt;vertical-align:-1.0pt;">
      <span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
       <span class="ltx_p" id="A8.T24.4.2.2.2.2">
        <span class="ltx_text" id="A8.T24.4.2.2.2.2.2">
         <span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A8.T24.4.2.2.2.2.2.2">
          <span class="ltx_tbody">
           <span class="ltx_tr" id="A8.T24.4.2.2.2.2.2.2.3.1">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_bb ltx_border_tt ltx_rowspan ltx_rowspan_5" id="A8.T24.4.2.2.2.2.2.2.3.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1">
              <span class="ltx_tabular ltx_align_middle" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1.1">
               <span class="ltx_tr" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1.1.1">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1.1.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 <span class="ltx_text ltx_font_bold" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1.1.1.1.1">
                  Relevant Data
                 </span>
                </span>
               </span>
               <span class="ltx_tr" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1.1.2">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1.1.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 Net profit/(loss) after tax was $(9.8) million
                </span>
               </span>
               <span class="ltx_tr" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1.1.3">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T24.4.2.2.2.2.2.2.3.1.1.1.1.3.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 Net profit/(loss) after tax : (9,819) || 6,639 || (248%)
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A8.T24.4.2.2.2.2.2.2.3.1.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text ltx_font_bold" id="A8.T24.4.2.2.2.2.2.2.3.1.2.1">
              SFT
             </span>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A8.T24.4.2.2.2.2.2.2.3.1.3" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text ltx_font_bold" id="A8.T24.4.2.2.2.2.2.2.3.1.3.1">
              ACT
             </span>
            </span>
           </span>
           <span class="ltx_tr" id="A8.T24.4.2.2.2.2.2.2.4.2">
            <span class="ltx_td ltx_align_left ltx_border_t" id="A8.T24.4.2.2.2.2.2.2.4.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             User: What was the net profit/(loss) after tax?
            </span>
            <span class="ltx_td ltx_align_left ltx_border_t" id="A8.T24.4.2.2.2.2.2.2.4.2.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             User: What was the net profit/(loss) after tax?
            </span>
           </span>
           <span class="ltx_tr" id="A8.T24.3.1.1.1.1.1.1.1">
            <span class="ltx_td ltx_align_left" id="A8.T24.3.1.1.1.1.1.1.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant:
             <span class="ltx_text ltx_font_italic" id="A8.T24.3.1.1.1.1.1.1.1.1.1">
              $(9,819)
             </span>
             <math alttext="\times" class="ltx_Math" display="inline" id="A8.T24.3.1.1.1.1.1.1.1.1.m1.1">
              <semantics id="A8.T24.3.1.1.1.1.1.1.1.1.m1.1a">
               <mo id="A8.T24.3.1.1.1.1.1.1.1.1.m1.1.1" xref="A8.T24.3.1.1.1.1.1.1.1.1.m1.1.1.cmml">
                ×
               </mo>
               <annotation-xml encoding="MathML-Content" id="A8.T24.3.1.1.1.1.1.1.1.1.m1.1b">
                <times id="A8.T24.3.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A8.T24.3.1.1.1.1.1.1.1.1.m1.1.1">
                </times>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="A8.T24.3.1.1.1.1.1.1.1.1.m1.1c">
                \times
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left" id="A8.T24.3.1.1.1.1.1.1.1.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant: Which year are you asking the amount of?
            </span>
           </span>
           <span class="ltx_tr" id="A8.T24.4.2.2.2.2.2.2.5.3">
            <span class="ltx_td" id="A8.T24.4.2.2.2.2.2.2.5.3.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
            </span>
            <span class="ltx_td ltx_align_left" id="A8.T24.4.2.2.2.2.2.2.5.3.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text" id="A8.T24.4.2.2.2.2.2.2.5.3.2.1" style="color:#FF0000;">
              User: FY19
             </span>
            </span>
           </span>
           <span class="ltx_tr" id="A8.T24.4.2.2.2.2.2.2.2">
            <span class="ltx_td ltx_border_bb" id="A8.T24.4.2.2.2.2.2.2.2.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
            </span>
            <span class="ltx_td ltx_align_left ltx_border_bb" id="A8.T24.4.2.2.2.2.2.2.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant:
             <span class="ltx_text ltx_font_italic" id="A8.T24.4.2.2.2.2.2.2.2.1.1">
              $(9,819)
             </span>
             <math alttext="\times" class="ltx_Math" display="inline" id="A8.T24.4.2.2.2.2.2.2.2.1.m1.1">
              <semantics id="A8.T24.4.2.2.2.2.2.2.2.1.m1.1a">
               <mo id="A8.T24.4.2.2.2.2.2.2.2.1.m1.1.1" xref="A8.T24.4.2.2.2.2.2.2.2.1.m1.1.1.cmml">
                ×
               </mo>
               <annotation-xml encoding="MathML-Content" id="A8.T24.4.2.2.2.2.2.2.2.1.m1.1b">
                <times id="A8.T24.4.2.2.2.2.2.2.2.1.m1.1.1.cmml" xref="A8.T24.4.2.2.2.2.2.2.2.1.m1.1.1">
                </times>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="A8.T24.4.2.2.2.2.2.2.2.1.m1.1c">
                \times
               </annotation>
              </semantics>
             </math>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </p>
  </figure>
  <figure class="ltx_table" id="A8.T25">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A25:
    </span>
    <span class="ltx_text ltx_font_bold" id="A8.T25.8.1">
     Comparison of PACIFIC trajectories using different tuning approaches
    </span>
    . Left: snippet of from a passage from the PACIFIC test set. Middle: trajectory resulting from the SFT model in response to the user query. Right: trajectory resulting from the
    <span class="ltx_text ltx_font_italic" id="A8.T25.9.2">
     ACT
    </span>
    model. Red text: sampled from
    <math alttext="U" class="ltx_Math" display="inline" id="A8.T25.2.m1.1">
     <semantics id="A8.T25.2.m1.1b">
      <mi id="A8.T25.2.m1.1.1" xref="A8.T25.2.m1.1.1.cmml">
       U
      </mi>
      <annotation-xml encoding="MathML-Content" id="A8.T25.2.m1.1c">
       <ci id="A8.T25.2.m1.1.1.cmml" xref="A8.T25.2.m1.1.1">
        𝑈
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="A8.T25.2.m1.1d">
       U
      </annotation>
     </semantics>
    </math>
    . Both the SFT and
    <span class="ltx_text ltx_font_italic" id="A8.T25.10.3">
     ACT
    </span>
    model answered the question incorrectly, and neither asked a clarification question.
   </figcaption>
   <p class="ltx_p" id="A8.T25.4">
    <span class="ltx_text ltx_inline-block" id="A8.T25.4.2" style="width:433.6pt;">
     <span class="ltx_inline-block ltx_transformed_outer" id="A8.T25.4.2.2.2" style="width:697.4pt;height:55pt;vertical-align:-1.0pt;">
      <span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
       <span class="ltx_p" id="A8.T25.4.2.2.2.2">
        <span class="ltx_text" id="A8.T25.4.2.2.2.2.2">
         <span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A8.T25.4.2.2.2.2.2.2">
          <span class="ltx_tbody">
           <span class="ltx_tr" id="A8.T25.4.2.2.2.2.2.2.3.1">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_bb ltx_border_tt ltx_rowspan ltx_rowspan_3" id="A8.T25.4.2.2.2.2.2.2.3.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1">
              <span class="ltx_tabular ltx_align_middle" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1.1">
               <span class="ltx_tr" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1.1.1">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1.1.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 <span class="ltx_text ltx_font_bold" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1.1.1.1.1">
                  Relevant Table Data
                 </span>
                </span>
               </span>
               <span class="ltx_tr" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1.1.2">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1.1.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 Year: 2019 || 2018
                </span>
               </span>
               <span class="ltx_tr" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1.1.3">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T25.4.2.2.2.2.2.2.3.1.1.1.1.3.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 Investments: 1,216.0 || 1,212.9
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A8.T25.4.2.2.2.2.2.2.3.1.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text ltx_font_bold" id="A8.T25.4.2.2.2.2.2.2.3.1.2.1">
              SFT
             </span>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A8.T25.4.2.2.2.2.2.2.3.1.3" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text ltx_font_bold" id="A8.T25.4.2.2.2.2.2.2.3.1.3.1">
              ACT
             </span>
            </span>
           </span>
           <span class="ltx_tr" id="A8.T25.4.2.2.2.2.2.2.4.2">
            <span class="ltx_td ltx_align_left ltx_border_t" id="A8.T25.4.2.2.2.2.2.2.4.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             User: In which year was the amount of Investments higher?
            </span>
            <span class="ltx_td ltx_align_left ltx_border_t" id="A8.T25.4.2.2.2.2.2.2.4.2.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             User: In which year was the amount of Investments higher?
            </span>
           </span>
           <span class="ltx_tr" id="A8.T25.4.2.2.2.2.2.2.2">
            <span class="ltx_td ltx_align_left ltx_border_bb" id="A8.T25.3.1.1.1.1.1.1.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant: [2018]
             <math alttext="\times" class="ltx_Math" display="inline" id="A8.T25.3.1.1.1.1.1.1.1.1.m1.1">
              <semantics id="A8.T25.3.1.1.1.1.1.1.1.1.m1.1a">
               <mo id="A8.T25.3.1.1.1.1.1.1.1.1.m1.1.1" xref="A8.T25.3.1.1.1.1.1.1.1.1.m1.1.1.cmml">
                ×
               </mo>
               <annotation-xml encoding="MathML-Content" id="A8.T25.3.1.1.1.1.1.1.1.1.m1.1b">
                <times id="A8.T25.3.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A8.T25.3.1.1.1.1.1.1.1.1.m1.1.1">
                </times>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="A8.T25.3.1.1.1.1.1.1.1.1.m1.1c">
                \times
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_border_bb" id="A8.T25.4.2.2.2.2.2.2.2.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant: [2018, 2019]
             <math alttext="\times" class="ltx_Math" display="inline" id="A8.T25.4.2.2.2.2.2.2.2.2.m1.1">
              <semantics id="A8.T25.4.2.2.2.2.2.2.2.2.m1.1a">
               <mo id="A8.T25.4.2.2.2.2.2.2.2.2.m1.1.1" xref="A8.T25.4.2.2.2.2.2.2.2.2.m1.1.1.cmml">
                ×
               </mo>
               <annotation-xml encoding="MathML-Content" id="A8.T25.4.2.2.2.2.2.2.2.2.m1.1b">
                <times id="A8.T25.4.2.2.2.2.2.2.2.2.m1.1.1.cmml" xref="A8.T25.4.2.2.2.2.2.2.2.2.m1.1.1">
                </times>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="A8.T25.4.2.2.2.2.2.2.2.2.m1.1c">
                \times
               </annotation>
              </semantics>
             </math>
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </p>
  </figure>
  <figure class="ltx_table" id="A8.T26">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table A26:
    </span>
    <span class="ltx_text ltx_font_bold" id="A8.T26.6.1">
     Comparison of Abg-CoQA trajectories using different tuning approaches
    </span>
    . Left: snippet of a relevant passage from the Abg-CoQA test set. Middle: trajectory resulting from the SFT model in response to the user query. Right: trajectory resulting from the
    <span class="ltx_text ltx_font_italic" id="A8.T26.7.2">
     ACT
    </span>
    model. Red text: sampled from
    <math alttext="U" class="ltx_Math" display="inline" id="A8.T26.2.m1.1">
     <semantics id="A8.T26.2.m1.1b">
      <mi id="A8.T26.2.m1.1.1" xref="A8.T26.2.m1.1.1.cmml">
       U
      </mi>
      <annotation-xml encoding="MathML-Content" id="A8.T26.2.m1.1c">
       <ci id="A8.T26.2.m1.1.1.cmml" xref="A8.T26.2.m1.1.1">
        𝑈
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="A8.T26.2.m1.1d">
       U
      </annotation>
     </semantics>
    </math>
    . Ground truth outcome: Meghan asked Lizzie,“Are you awake?”
   </figcaption>
   <p class="ltx_p" id="A8.T26.3">
    <span class="ltx_text ltx_inline-block" id="A8.T26.3.1" style="width:433.6pt;">
     <span class="ltx_inline-block ltx_transformed_outer" id="A8.T26.3.1.1.1" style="width:880.4pt;height:91pt;vertical-align:-1.0pt;">
      <span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
       <span class="ltx_p" id="A8.T26.3.1.1.1.1">
        <span class="ltx_text" id="A8.T26.3.1.1.1.1.1">
         <span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A8.T26.3.1.1.1.1.1.1">
          <span class="ltx_tbody">
           <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.2.1">
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_bb ltx_border_tt ltx_rowspan ltx_rowspan_5" id="A8.T26.3.1.1.1.1.1.1.2.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1">
              <span class="ltx_tabular ltx_align_middle" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1">
               <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.1">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 <span class="ltx_text ltx_font_bold" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.1.1.1">
                  Relevant Passage
                 </span>
                </span>
               </span>
               <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.2">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 She yawned, stretching out like a lazy cat.
                </span>
               </span>
               <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.3">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.3.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 Her sister was also awake. "Lizzie",
                </span>
               </span>
               <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.4">
                <span class="ltx_td ltx_nopad_r ltx_align_left" id="A8.T26.3.1.1.1.1.1.1.2.1.1.1.1.4.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
                 Meghan whispered, "are you awake?"
                </span>
               </span>
              </span>
             </span>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A8.T26.3.1.1.1.1.1.1.2.1.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text ltx_font_bold" id="A8.T26.3.1.1.1.1.1.1.2.1.2.1">
              SFT
             </span>
            </span>
            <span class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A8.T26.3.1.1.1.1.1.1.2.1.3" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text ltx_font_bold" id="A8.T26.3.1.1.1.1.1.1.2.1.3.1">
              ACT
             </span>
            </span>
           </span>
           <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.3.2">
            <span class="ltx_td ltx_align_left ltx_border_t" id="A8.T26.3.1.1.1.1.1.1.3.2.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             User: What did Meghan ask?
            </span>
            <span class="ltx_td ltx_align_left ltx_border_t" id="A8.T26.3.1.1.1.1.1.1.3.2.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             User: What did Meghan ask?
            </span>
           </span>
           <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.4.3">
            <span class="ltx_td ltx_align_left" id="A8.T26.3.1.1.1.1.1.1.4.3.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant: Do you mean where did Lizzie see her father?
            </span>
            <span class="ltx_td ltx_align_left" id="A8.T26.3.1.1.1.1.1.1.4.3.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant: Do you mean that morning or the night before?
            </span>
           </span>
           <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.5.4">
            <span class="ltx_td ltx_align_left" id="A8.T26.3.1.1.1.1.1.1.5.4.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text" id="A8.T26.3.1.1.1.1.1.1.5.4.1.1" style="color:#FF0000;">
              User: No
             </span>
            </span>
            <span class="ltx_td ltx_align_left" id="A8.T26.3.1.1.1.1.1.1.5.4.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             <span class="ltx_text" id="A8.T26.3.1.1.1.1.1.1.5.4.2.1" style="color:#FF0000;">
              User: The night before.
             </span>
            </span>
           </span>
           <span class="ltx_tr" id="A8.T26.3.1.1.1.1.1.1.1">
            <span class="ltx_td ltx_align_left ltx_border_bb" id="A8.T26.3.1.1.1.1.1.1.1.1" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant: Lizzie had only met her father in person once, according to the story.
             <math alttext="\times" class="ltx_Math" display="inline" id="A8.T26.3.1.1.1.1.1.1.1.1.m1.1">
              <semantics id="A8.T26.3.1.1.1.1.1.1.1.1.m1.1a">
               <mo id="A8.T26.3.1.1.1.1.1.1.1.1.m1.1.1" xref="A8.T26.3.1.1.1.1.1.1.1.1.m1.1.1.cmml">
                ×
               </mo>
               <annotation-xml encoding="MathML-Content" id="A8.T26.3.1.1.1.1.1.1.1.1.m1.1b">
                <times id="A8.T26.3.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="A8.T26.3.1.1.1.1.1.1.1.1.m1.1.1">
                </times>
               </annotation-xml>
               <annotation encoding="application/x-tex" id="A8.T26.3.1.1.1.1.1.1.1.1.m1.1c">
                \times
               </annotation>
              </semantics>
             </math>
            </span>
            <span class="ltx_td ltx_align_left ltx_border_bb" id="A8.T26.3.1.1.1.1.1.1.1.2" style="padding-top:0.5pt;padding-bottom:0.5pt;">
             Assistant: Meghan asked Lizzie if she was awake that morning. ✓
            </span>
           </span>
          </span>
         </span>
        </span>
       </span>
      </span>
     </span>
    </span>
   </p>
  </figure>
 </section>
 <section class="ltx_appendix" id="A9">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix I
   </span>
   Additional Experimental Details
  </h2>
  <section class="ltx_subsection" id="A9.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     I.1
    </span>
    Compute Resources
   </h3>
   <div class="ltx_para" id="A9.SS1.p1">
    <p class="ltx_p" id="A9.SS1.p1.1">
     We conduct all experiments using one Google Compute Engine Virtual Machine with 8x 80GB A100 GPUs. All of our tuning experiments use full-model multi-GPU tuning with Deepspeed. Full
     <span class="ltx_text ltx_font_italic" id="A9.SS1.p1.1.1">
      ACT
     </span>
     with 250 conversations (1,923 training examples) from PACIFIC took the longest amount of time and required approximately 16 hours to run for 12 epochs.
    </p>
   </div>
   <div class="ltx_para" id="A9.SS1.p2">
    <p class="ltx_p" id="A9.SS1.p2.1">
     Beyond the experiments reported in the paper, there were many preliminary experiments that took place as a part of this overall research project that were ultimately directionally different from our final contribution.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="A9.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     I.2
    </span>
    Training Hyperparameters
   </h3>
   <div class="ltx_para" id="A9.SS2.p1">
    <p class="ltx_p" id="A9.SS2.p1.1">
     For all of our SFT experiments, we tune the model for up to 8 epochs. We choose the best-performing model with learning rates from
     <math alttext="\{1e-4,2e-5,1e-5\}" class="ltx_Math" display="inline" id="A9.SS2.p1.1.m1.3">
      <semantics id="A9.SS2.p1.1.m1.3a">
       <mrow id="A9.SS2.p1.1.m1.3.3.3" xref="A9.SS2.p1.1.m1.3.3.4.cmml">
        <mo id="A9.SS2.p1.1.m1.3.3.3.4" stretchy="false" xref="A9.SS2.p1.1.m1.3.3.4.cmml">
         {
        </mo>
        <mrow id="A9.SS2.p1.1.m1.1.1.1.1" xref="A9.SS2.p1.1.m1.1.1.1.1.cmml">
         <mrow id="A9.SS2.p1.1.m1.1.1.1.1.2" xref="A9.SS2.p1.1.m1.1.1.1.1.2.cmml">
          <mn id="A9.SS2.p1.1.m1.1.1.1.1.2.2" xref="A9.SS2.p1.1.m1.1.1.1.1.2.2.cmml">
           1
          </mn>
          <mo id="A9.SS2.p1.1.m1.1.1.1.1.2.1" lspace="0em" rspace="0em" xref="A9.SS2.p1.1.m1.1.1.1.1.2.1.cmml">
           ​
          </mo>
          <mi id="A9.SS2.p1.1.m1.1.1.1.1.2.3" xref="A9.SS2.p1.1.m1.1.1.1.1.2.3.cmml">
           e
          </mi>
         </mrow>
         <mo id="A9.SS2.p1.1.m1.1.1.1.1.1" xref="A9.SS2.p1.1.m1.1.1.1.1.1.cmml">
          −
         </mo>
         <mn id="A9.SS2.p1.1.m1.1.1.1.1.3" xref="A9.SS2.p1.1.m1.1.1.1.1.3.cmml">
          4
         </mn>
        </mrow>
        <mo id="A9.SS2.p1.1.m1.3.3.3.5" xref="A9.SS2.p1.1.m1.3.3.4.cmml">
         ,
        </mo>
        <mrow id="A9.SS2.p1.1.m1.2.2.2.2" xref="A9.SS2.p1.1.m1.2.2.2.2.cmml">
         <mrow id="A9.SS2.p1.1.m1.2.2.2.2.2" xref="A9.SS2.p1.1.m1.2.2.2.2.2.cmml">
          <mn id="A9.SS2.p1.1.m1.2.2.2.2.2.2" xref="A9.SS2.p1.1.m1.2.2.2.2.2.2.cmml">
           2
          </mn>
          <mo id="A9.SS2.p1.1.m1.2.2.2.2.2.1" lspace="0em" rspace="0em" xref="A9.SS2.p1.1.m1.2.2.2.2.2.1.cmml">
           ​
          </mo>
          <mi id="A9.SS2.p1.1.m1.2.2.2.2.2.3" xref="A9.SS2.p1.1.m1.2.2.2.2.2.3.cmml">
           e
          </mi>
         </mrow>
         <mo id="A9.SS2.p1.1.m1.2.2.2.2.1" xref="A9.SS2.p1.1.m1.2.2.2.2.1.cmml">
          −
         </mo>
         <mn id="A9.SS2.p1.1.m1.2.2.2.2.3" xref="A9.SS2.p1.1.m1.2.2.2.2.3.cmml">
          5
         </mn>
        </mrow>
        <mo id="A9.SS2.p1.1.m1.3.3.3.6" xref="A9.SS2.p1.1.m1.3.3.4.cmml">
         ,
        </mo>
        <mrow id="A9.SS2.p1.1.m1.3.3.3.3" xref="A9.SS2.p1.1.m1.3.3.3.3.cmml">
         <mrow id="A9.SS2.p1.1.m1.3.3.3.3.2" xref="A9.SS2.p1.1.m1.3.3.3.3.2.cmml">
          <mn id="A9.SS2.p1.1.m1.3.3.3.3.2.2" xref="A9.SS2.p1.1.m1.3.3.3.3.2.2.cmml">
           1
          </mn>
          <mo id="A9.SS2.p1.1.m1.3.3.3.3.2.1" lspace="0em" rspace="0em" xref="A9.SS2.p1.1.m1.3.3.3.3.2.1.cmml">
           ​
          </mo>
          <mi id="A9.SS2.p1.1.m1.3.3.3.3.2.3" xref="A9.SS2.p1.1.m1.3.3.3.3.2.3.cmml">
           e
          </mi>
         </mrow>
         <mo id="A9.SS2.p1.1.m1.3.3.3.3.1" xref="A9.SS2.p1.1.m1.3.3.3.3.1.cmml">
          −
         </mo>
         <mn id="A9.SS2.p1.1.m1.3.3.3.3.3" xref="A9.SS2.p1.1.m1.3.3.3.3.3.cmml">
          5
         </mn>
        </mrow>
        <mo id="A9.SS2.p1.1.m1.3.3.3.7" stretchy="false" xref="A9.SS2.p1.1.m1.3.3.4.cmml">
         }
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="A9.SS2.p1.1.m1.3b">
        <set id="A9.SS2.p1.1.m1.3.3.4.cmml" xref="A9.SS2.p1.1.m1.3.3.3">
         <apply id="A9.SS2.p1.1.m1.1.1.1.1.cmml" xref="A9.SS2.p1.1.m1.1.1.1.1">
          <minus id="A9.SS2.p1.1.m1.1.1.1.1.1.cmml" xref="A9.SS2.p1.1.m1.1.1.1.1.1">
          </minus>
          <apply id="A9.SS2.p1.1.m1.1.1.1.1.2.cmml" xref="A9.SS2.p1.1.m1.1.1.1.1.2">
           <times id="A9.SS2.p1.1.m1.1.1.1.1.2.1.cmml" xref="A9.SS2.p1.1.m1.1.1.1.1.2.1">
           </times>
           <cn id="A9.SS2.p1.1.m1.1.1.1.1.2.2.cmml" type="integer" xref="A9.SS2.p1.1.m1.1.1.1.1.2.2">
            1
           </cn>
           <ci id="A9.SS2.p1.1.m1.1.1.1.1.2.3.cmml" xref="A9.SS2.p1.1.m1.1.1.1.1.2.3">
            𝑒
           </ci>
          </apply>
          <cn id="A9.SS2.p1.1.m1.1.1.1.1.3.cmml" type="integer" xref="A9.SS2.p1.1.m1.1.1.1.1.3">
           4
          </cn>
         </apply>
         <apply id="A9.SS2.p1.1.m1.2.2.2.2.cmml" xref="A9.SS2.p1.1.m1.2.2.2.2">
          <minus id="A9.SS2.p1.1.m1.2.2.2.2.1.cmml" xref="A9.SS2.p1.1.m1.2.2.2.2.1">
          </minus>
          <apply id="A9.SS2.p1.1.m1.2.2.2.2.2.cmml" xref="A9.SS2.p1.1.m1.2.2.2.2.2">
           <times id="A9.SS2.p1.1.m1.2.2.2.2.2.1.cmml" xref="A9.SS2.p1.1.m1.2.2.2.2.2.1">
           </times>
           <cn id="A9.SS2.p1.1.m1.2.2.2.2.2.2.cmml" type="integer" xref="A9.SS2.p1.1.m1.2.2.2.2.2.2">
            2
           </cn>
           <ci id="A9.SS2.p1.1.m1.2.2.2.2.2.3.cmml" xref="A9.SS2.p1.1.m1.2.2.2.2.2.3">
            𝑒
           </ci>
          </apply>
          <cn id="A9.SS2.p1.1.m1.2.2.2.2.3.cmml" type="integer" xref="A9.SS2.p1.1.m1.2.2.2.2.3">
           5
          </cn>
         </apply>
         <apply id="A9.SS2.p1.1.m1.3.3.3.3.cmml" xref="A9.SS2.p1.1.m1.3.3.3.3">
          <minus id="A9.SS2.p1.1.m1.3.3.3.3.1.cmml" xref="A9.SS2.p1.1.m1.3.3.3.3.1">
          </minus>
          <apply id="A9.SS2.p1.1.m1.3.3.3.3.2.cmml" xref="A9.SS2.p1.1.m1.3.3.3.3.2">
           <times id="A9.SS2.p1.1.m1.3.3.3.3.2.1.cmml" xref="A9.SS2.p1.1.m1.3.3.3.3.2.1">
           </times>
           <cn id="A9.SS2.p1.1.m1.3.3.3.3.2.2.cmml" type="integer" xref="A9.SS2.p1.1.m1.3.3.3.3.2.2">
            1
           </cn>
           <ci id="A9.SS2.p1.1.m1.3.3.3.3.2.3.cmml" xref="A9.SS2.p1.1.m1.3.3.3.3.2.3">
            𝑒
           </ci>
          </apply>
          <cn id="A9.SS2.p1.1.m1.3.3.3.3.3.cmml" type="integer" xref="A9.SS2.p1.1.m1.3.3.3.3.3">
           5
          </cn>
         </apply>
        </set>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A9.SS2.p1.1.m1.3c">
        \{1e-4,2e-5,1e-5\}
       </annotation>
      </semantics>
     </math>
     with the AdamW optimizer.
    </p>
   </div>
   <div class="ltx_para" id="A9.SS2.p2">
    <p class="ltx_p" id="A9.SS2.p2.1">
     For all of our RL tuning experiments, we allow the model to train for up to 12 epochs, and select the checkpoint that results in the highest reward margin on the validation set (which is an action-based preference dataset constructed as described in Section
     <a class="ltx_ref" href="#S3.SS2" title="3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       3.2
      </span>
     </a>
     using each task’s original validation set). For all experiments, we use a batch size of 4, and a maximum sequence length of
     <math alttext="1,280" class="ltx_Math" display="inline" id="A9.SS2.p2.1.m1.2">
      <semantics id="A9.SS2.p2.1.m1.2a">
       <mrow id="A9.SS2.p2.1.m1.2.3.2" xref="A9.SS2.p2.1.m1.2.3.1.cmml">
        <mn id="A9.SS2.p2.1.m1.1.1" xref="A9.SS2.p2.1.m1.1.1.cmml">
         1
        </mn>
        <mo id="A9.SS2.p2.1.m1.2.3.2.1" xref="A9.SS2.p2.1.m1.2.3.1.cmml">
         ,
        </mo>
        <mn id="A9.SS2.p2.1.m1.2.2" xref="A9.SS2.p2.1.m1.2.2.cmml">
         280
        </mn>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="A9.SS2.p2.1.m1.2b">
        <list id="A9.SS2.p2.1.m1.2.3.1.cmml" xref="A9.SS2.p2.1.m1.2.3.2">
         <cn id="A9.SS2.p2.1.m1.1.1.cmml" type="integer" xref="A9.SS2.p2.1.m1.1.1">
          1
         </cn>
         <cn id="A9.SS2.p2.1.m1.2.2.cmml" type="integer" xref="A9.SS2.p2.1.m1.2.2">
          280
         </cn>
        </list>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A9.SS2.p2.1.m1.2c">
        1,280
       </annotation>
      </semantics>
     </math>
     .
    </p>
   </div>
   <section class="ltx_paragraph" id="A9.SS2.SSS0.Px1">
    <h5 class="ltx_title ltx_title_paragraph">
     Hyperparameters for Equation
     <a class="ltx_ref" href="#S3.E2" title="In 3.2.3 Contrastive RL Tuning for Alignment ‣ 3.2 ACT: Action-Based Contrastive Self-training ‣ 3 Methods ‣ Learning to Clarify: Multi-turn Conversations with Action-Based Contrastive Self-Training">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
    </h5>
    <div class="ltx_para" id="A9.SS2.SSS0.Px1.p1">
     <p class="ltx_p" id="A9.SS2.SSS0.Px1.p1.6">
      For experiments with Zephyr 7B on PACIFIC, we achieve our strongest results using
      <math alttext="\beta=0.01" class="ltx_Math" display="inline" id="A9.SS2.SSS0.Px1.p1.1.m1.1">
       <semantics id="A9.SS2.SSS0.Px1.p1.1.m1.1a">
        <mrow id="A9.SS2.SSS0.Px1.p1.1.m1.1.1" xref="A9.SS2.SSS0.Px1.p1.1.m1.1.1.cmml">
         <mi id="A9.SS2.SSS0.Px1.p1.1.m1.1.1.2" xref="A9.SS2.SSS0.Px1.p1.1.m1.1.1.2.cmml">
          β
         </mi>
         <mo id="A9.SS2.SSS0.Px1.p1.1.m1.1.1.1" xref="A9.SS2.SSS0.Px1.p1.1.m1.1.1.1.cmml">
          =
         </mo>
         <mn id="A9.SS2.SSS0.Px1.p1.1.m1.1.1.3" xref="A9.SS2.SSS0.Px1.p1.1.m1.1.1.3.cmml">
          0.01
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="A9.SS2.SSS0.Px1.p1.1.m1.1b">
         <apply id="A9.SS2.SSS0.Px1.p1.1.m1.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.1.m1.1.1">
          <eq id="A9.SS2.SSS0.Px1.p1.1.m1.1.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.1.m1.1.1.1">
          </eq>
          <ci id="A9.SS2.SSS0.Px1.p1.1.m1.1.1.2.cmml" xref="A9.SS2.SSS0.Px1.p1.1.m1.1.1.2">
           𝛽
          </ci>
          <cn id="A9.SS2.SSS0.Px1.p1.1.m1.1.1.3.cmml" type="float" xref="A9.SS2.SSS0.Px1.p1.1.m1.1.1.3">
           0.01
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="A9.SS2.SSS0.Px1.p1.1.m1.1c">
         \beta=0.01
        </annotation>
       </semantics>
      </math>
      and a learning rate of
      <math alttext="5e-7" class="ltx_Math" display="inline" id="A9.SS2.SSS0.Px1.p1.2.m2.1">
       <semantics id="A9.SS2.SSS0.Px1.p1.2.m2.1a">
        <mrow id="A9.SS2.SSS0.Px1.p1.2.m2.1.1" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.cmml">
         <mrow id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.cmml">
          <mn id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.2" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.2.cmml">
           5
          </mn>
          <mo id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.1" lspace="0em" rspace="0em" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.1.cmml">
           ​
          </mo>
          <mi id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.3" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.3.cmml">
           e
          </mi>
         </mrow>
         <mo id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.1" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.1.cmml">
          −
         </mo>
         <mn id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.3" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.3.cmml">
          7
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="A9.SS2.SSS0.Px1.p1.2.m2.1b">
         <apply id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1">
          <minus id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.1">
          </minus>
          <apply id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.cmml" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2">
           <times id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.1.cmml" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.1">
           </times>
           <cn id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.2.cmml" type="integer" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.2">
            5
           </cn>
           <ci id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.3.cmml" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.2.3">
            𝑒
           </ci>
          </apply>
          <cn id="A9.SS2.SSS0.Px1.p1.2.m2.1.1.3.cmml" type="integer" xref="A9.SS2.SSS0.Px1.p1.2.m2.1.1.3">
           7
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="A9.SS2.SSS0.Px1.p1.2.m2.1c">
         5e-7
        </annotation>
       </semantics>
      </math>
      . On AmbigSQL, we use
      <math alttext="\beta=0.01" class="ltx_Math" display="inline" id="A9.SS2.SSS0.Px1.p1.3.m3.1">
       <semantics id="A9.SS2.SSS0.Px1.p1.3.m3.1a">
        <mrow id="A9.SS2.SSS0.Px1.p1.3.m3.1.1" xref="A9.SS2.SSS0.Px1.p1.3.m3.1.1.cmml">
         <mi id="A9.SS2.SSS0.Px1.p1.3.m3.1.1.2" xref="A9.SS2.SSS0.Px1.p1.3.m3.1.1.2.cmml">
          β
         </mi>
         <mo id="A9.SS2.SSS0.Px1.p1.3.m3.1.1.1" xref="A9.SS2.SSS0.Px1.p1.3.m3.1.1.1.cmml">
          =
         </mo>
         <mn id="A9.SS2.SSS0.Px1.p1.3.m3.1.1.3" xref="A9.SS2.SSS0.Px1.p1.3.m3.1.1.3.cmml">
          0.01
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="A9.SS2.SSS0.Px1.p1.3.m3.1b">
         <apply id="A9.SS2.SSS0.Px1.p1.3.m3.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.3.m3.1.1">
          <eq id="A9.SS2.SSS0.Px1.p1.3.m3.1.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.3.m3.1.1.1">
          </eq>
          <ci id="A9.SS2.SSS0.Px1.p1.3.m3.1.1.2.cmml" xref="A9.SS2.SSS0.Px1.p1.3.m3.1.1.2">
           𝛽
          </ci>
          <cn id="A9.SS2.SSS0.Px1.p1.3.m3.1.1.3.cmml" type="float" xref="A9.SS2.SSS0.Px1.p1.3.m3.1.1.3">
           0.01
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="A9.SS2.SSS0.Px1.p1.3.m3.1c">
         \beta=0.01
        </annotation>
       </semantics>
      </math>
      and a learning rate of
      <math alttext="5e-7" class="ltx_Math" display="inline" id="A9.SS2.SSS0.Px1.p1.4.m4.1">
       <semantics id="A9.SS2.SSS0.Px1.p1.4.m4.1a">
        <mrow id="A9.SS2.SSS0.Px1.p1.4.m4.1.1" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.cmml">
         <mrow id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.cmml">
          <mn id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.2" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.2.cmml">
           5
          </mn>
          <mo id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.1" lspace="0em" rspace="0em" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.1.cmml">
           ​
          </mo>
          <mi id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.3" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.3.cmml">
           e
          </mi>
         </mrow>
         <mo id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.1" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.1.cmml">
          −
         </mo>
         <mn id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.3" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.3.cmml">
          7
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="A9.SS2.SSS0.Px1.p1.4.m4.1b">
         <apply id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1">
          <minus id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.1">
          </minus>
          <apply id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.cmml" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2">
           <times id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.1.cmml" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.1">
           </times>
           <cn id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.2.cmml" type="integer" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.2">
            5
           </cn>
           <ci id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.3.cmml" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.2.3">
            𝑒
           </ci>
          </apply>
          <cn id="A9.SS2.SSS0.Px1.p1.4.m4.1.1.3.cmml" type="integer" xref="A9.SS2.SSS0.Px1.p1.4.m4.1.1.3">
           7
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="A9.SS2.SSS0.Px1.p1.4.m4.1c">
         5e-7
        </annotation>
       </semantics>
      </math>
      . On AmbigSQL, we use
      <math alttext="\beta=0.5" class="ltx_Math" display="inline" id="A9.SS2.SSS0.Px1.p1.5.m5.1">
       <semantics id="A9.SS2.SSS0.Px1.p1.5.m5.1a">
        <mrow id="A9.SS2.SSS0.Px1.p1.5.m5.1.1" xref="A9.SS2.SSS0.Px1.p1.5.m5.1.1.cmml">
         <mi id="A9.SS2.SSS0.Px1.p1.5.m5.1.1.2" xref="A9.SS2.SSS0.Px1.p1.5.m5.1.1.2.cmml">
          β
         </mi>
         <mo id="A9.SS2.SSS0.Px1.p1.5.m5.1.1.1" xref="A9.SS2.SSS0.Px1.p1.5.m5.1.1.1.cmml">
          =
         </mo>
         <mn id="A9.SS2.SSS0.Px1.p1.5.m5.1.1.3" xref="A9.SS2.SSS0.Px1.p1.5.m5.1.1.3.cmml">
          0.5
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="A9.SS2.SSS0.Px1.p1.5.m5.1b">
         <apply id="A9.SS2.SSS0.Px1.p1.5.m5.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.5.m5.1.1">
          <eq id="A9.SS2.SSS0.Px1.p1.5.m5.1.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.5.m5.1.1.1">
          </eq>
          <ci id="A9.SS2.SSS0.Px1.p1.5.m5.1.1.2.cmml" xref="A9.SS2.SSS0.Px1.p1.5.m5.1.1.2">
           𝛽
          </ci>
          <cn id="A9.SS2.SSS0.Px1.p1.5.m5.1.1.3.cmml" type="float" xref="A9.SS2.SSS0.Px1.p1.5.m5.1.1.3">
           0.5
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="A9.SS2.SSS0.Px1.p1.5.m5.1c">
         \beta=0.5
        </annotation>
       </semantics>
      </math>
      and a learning rate of
      <math alttext="5e-7" class="ltx_Math" display="inline" id="A9.SS2.SSS0.Px1.p1.6.m6.1">
       <semantics id="A9.SS2.SSS0.Px1.p1.6.m6.1a">
        <mrow id="A9.SS2.SSS0.Px1.p1.6.m6.1.1" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.cmml">
         <mrow id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.cmml">
          <mn id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.2" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.2.cmml">
           5
          </mn>
          <mo id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.1" lspace="0em" rspace="0em" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.1.cmml">
           ​
          </mo>
          <mi id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.3" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.3.cmml">
           e
          </mi>
         </mrow>
         <mo id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.1" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.1.cmml">
          −
         </mo>
         <mn id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.3" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.3.cmml">
          7
         </mn>
        </mrow>
        <annotation-xml encoding="MathML-Content" id="A9.SS2.SSS0.Px1.p1.6.m6.1b">
         <apply id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1">
          <minus id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.1.cmml" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.1">
          </minus>
          <apply id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.cmml" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2">
           <times id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.1.cmml" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.1">
           </times>
           <cn id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.2.cmml" type="integer" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.2">
            5
           </cn>
           <ci id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.3.cmml" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.2.3">
            𝑒
           </ci>
          </apply>
          <cn id="A9.SS2.SSS0.Px1.p1.6.m6.1.1.3.cmml" type="integer" xref="A9.SS2.SSS0.Px1.p1.6.m6.1.1.3">
           7
          </cn>
         </apply>
        </annotation-xml>
        <annotation encoding="application/x-tex" id="A9.SS2.SSS0.Px1.p1.6.m6.1c">
         5e-7
        </annotation>
       </semantics>
      </math>
      .
     </p>
    </div>
   </section>
  </section>
 </section>
 <section class="ltx_appendix" id="A10">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix J
   </span>
   Assets Used
  </h2>
  <div class="ltx_para" id="A10.p1">
   <p class="ltx_p" id="A10.p1.1">
    All resources used have been cited appropriately in the paper. In this section, we enumerate each of the existing artifacts used in our work along with their license.
   </p>
  </div>
  <div class="ltx_para" id="A10.p2">
   <p class="ltx_p" id="A10.p2.1">
    <span class="ltx_text ltx_font_bold" id="A10.p2.1.1">
     Existing Models
    </span>
   </p>
   <ul class="ltx_itemize" id="A10.I1">
    <li class="ltx_item" id="A10.I1.i1" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I1.i1.p1">
      <p class="ltx_p" id="A10.I1.i1.p1.1">
       Gemma
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib73" title="">
         73
        </a>
        ]
       </cite>
       : Gemma Open-Source License.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://ai.google.dev/gemma/terms" target="_blank" title="">
        https://ai.google.dev/gemma/terms
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I1.i2" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I1.i2.p1">
      <p class="ltx_p" id="A10.I1.i2.p1.1">
       Gemini Ultra 1.0 and Gemini Pro 1.5 (gemini-1.5-pro-preview-0409)
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib3" title="">
         3
        </a>
        ]
       </cite>
       : Accessed through the Google Cloud Vertex AI Platform.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://cloud.google.com/products/gemini?hl=en" target="_blank" title="">
        https://cloud.google.com/products/gemini?hl=en
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I1.i3" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I1.i3.p1">
      <p class="ltx_p" id="A10.I1.i3.p1.1">
       MiniLM-L6-v2
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib55" title="">
         55
        </a>
        ]
       </cite>
       : Apache 2.0.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2" target="_blank" title="">
        https://huggingface.co/sentence-transformers/all-MiniLM-L6-v2
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I1.i4" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I1.i4.p1">
      <p class="ltx_p" id="A10.I1.i4.p1.1">
       Mistral 7B-v0.1
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib51" title="">
         51
        </a>
        ]
       </cite>
       : Apache 2.0.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/mistralai/Mistral-7B-v0.1" target="_blank" title="">
        https://huggingface.co/mistralai/Mistral-7B-v0.1
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I1.i5" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I1.i5.p1">
      <p class="ltx_p" id="A10.I1.i5.p1.1">
       Zephyr 7B-
       <math alttext="\beta" class="ltx_Math" display="inline" id="A10.I1.i5.p1.1.m1.1">
        <semantics id="A10.I1.i5.p1.1.m1.1a">
         <mi id="A10.I1.i5.p1.1.m1.1.1" xref="A10.I1.i5.p1.1.m1.1.1.cmml">
          β
         </mi>
         <annotation-xml encoding="MathML-Content" id="A10.I1.i5.p1.1.m1.1b">
          <ci id="A10.I1.i5.p1.1.m1.1.1.cmml" xref="A10.I1.i5.p1.1.m1.1.1">
           𝛽
          </ci>
         </annotation-xml>
         <annotation encoding="application/x-tex" id="A10.I1.i5.p1.1.m1.1c">
          \beta
         </annotation>
        </semantics>
       </math>
       (with Mistral 7B as a Base Model)
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib36" title="">
         36
        </a>
        ]
       </cite>
       : MIT Open-Source License.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://huggingface.co/HuggingFaceH4/zephyr-7b-beta" target="_blank" title="">
        https://huggingface.co/HuggingFaceH4/zephyr-7b-beta
       </a>
      </p>
     </div>
    </li>
   </ul>
  </div>
  <div class="ltx_para" id="A10.p3">
   <p class="ltx_p" id="A10.p3.1">
    <span class="ltx_text ltx_font_bold" id="A10.p3.1.1">
     Existing Datasets
    </span>
   </p>
   <ul class="ltx_itemize" id="A10.I2">
    <li class="ltx_item" id="A10.I2.i1" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I2.i1.p1">
      <p class="ltx_p" id="A10.I2.i1.p1.1">
       Abg-CoQA
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib54" title="">
         54
        </a>
        ]
       </cite>
       : MIT Open-Source License.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/MeiqiGuo/AKBC2021-Abg-CoQA" target="_blank" title="">
        https://github.com/MeiqiGuo/AKBC2021-Abg-CoQA
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I2.i2" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I2.i2.p1">
      <p class="ltx_p" id="A10.I2.i2.p1.1">
       PACIFIC
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib17" title="">
         17
        </a>
        ]
       </cite>
       : MIT Open-Source License.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/dengyang17/PACIFIC/tree/main" target="_blank" title="">
        https://github.com/dengyang17/PACIFIC/tree/main
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I2.i3" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I2.i3.p1">
      <p class="ltx_p" id="A10.I2.i3.p1.1">
       Spider
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib57" title="">
         57
        </a>
        ]
       </cite>
       : CC BY-SA 4.0.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://yale-lily.github.io/spider" target="_blank" title="">
        https://yale-lily.github.io/spider
       </a>
      </p>
     </div>
    </li>
   </ul>
  </div>
  <div class="ltx_para" id="A10.p4">
   <p class="ltx_p" id="A10.p4.1">
    <span class="ltx_text ltx_font_bold" id="A10.p4.1.1">
     Existing Algorithms and Software
    </span>
   </p>
   <ul class="ltx_itemize" id="A10.I3">
    <li class="ltx_item" id="A10.I3.i1" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I3.i1.p1">
      <p class="ltx_p" id="A10.I3.i1.p1.1">
       Direct Preference Optimization
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib16" title="">
         16
        </a>
        ]
       </cite>
       : CC BY 4.0.
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I3.i2" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I3.i2.p1">
      <p class="ltx_p" id="A10.I3.i2.p1.1">
       Google Cloud Pipeline Components: Apache 2.0.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://cloud.google.com/vertex-ai/docs/pipelines/components-introduction" target="_blank" title="">
        https://cloud.google.com/vertex-ai/docs/pipelines/components-introduction
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I3.i3" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I3.i3.p1">
      <p class="ltx_p" id="A10.I3.i3.p1.1">
       HuggingFace Transformers
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib74" title="">
         74
        </a>
        ]
       </cite>
       : Apache 2.0.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/huggingface/transformers/tree/main" target="_blank" title="">
        https://github.com/huggingface/transformers/tree/main
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I3.i4" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I3.i4.p1">
      <p class="ltx_p" id="A10.I3.i4.p1.1">
       PyTorch
       <cite class="ltx_cite ltx_citemacro_cite">
        [
        <a class="ltx_ref" href="#bib.bib75" title="">
         75
        </a>
        ]
       </cite>
       : PyTorch Open Source License.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/pytorch/pytorch/tree/main" target="_blank" title="">
        https://github.com/pytorch/pytorch/tree/main
       </a>
      </p>
     </div>
    </li>
    <li class="ltx_item" id="A10.I3.i5" style="list-style-type:none;">
     <span class="ltx_tag ltx_tag_item">
      •
     </span>
     <div class="ltx_para" id="A10.I3.i5.p1">
      <p class="ltx_p" id="A10.I3.i5.p1.1">
       Vertex AI SDK: Apache 2.0.
       <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://cloud.google.com/vertex-ai/docs/python-sdk/use-vertex-ai-python-sdk" target="_blank" title="">
        https://cloud.google.com/vertex-ai/docs/python-sdk/use-vertex-ai-python-sdk
       </a>
      </p>
     </div>
    </li>
   </ul>
  </div>
  <div class="ltx_pagination ltx_role_newpage">
  </div>
 </section>
</article>
