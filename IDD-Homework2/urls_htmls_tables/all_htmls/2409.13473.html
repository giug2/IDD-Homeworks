<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2409.13473] Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097).</title><meta property="og:description" content="We present Flotta 111‘Flotta’ is the Italian word for ‘fleet’, i.e., a set of heterogeneous entities acting collaboratively., a Federated Learning framework designed to train machine learning models on sensitive data d…">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097).">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097).">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2409.13473">

<!--Generated on Sat Oct  5 18:33:04 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line" lang="en">
<h1 class="ltx_title ltx_title_document">
<span id="id1.id1" class="ltx_text ltx_font_italic">Flotta</span>: a Secure and Flexible Spark-inspired Federated Learning Framework
<span id="id2.id2" class="ltx_note ltx_role_thanks"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">thanks: </span>This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097).
</span></span></span>
</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
1<sup id="id3.1.id1" class="ltx_sup">st</sup> Claudio Bonesana
<span id="id4.2.id2" class="ltx_text ltx_font_italic">IDSIA (USI-SUPSI)
<br class="ltx_break"></span>Lugano, Switzerland 
<br class="ltx_break">claudio.bonesana@idsia.ch
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">2<sup id="id5.1.id1" class="ltx_sup">nd</sup> Daniele Malpetti
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id6.2.id1" class="ltx_text ltx_font_italic">IDSIA (USI-SUPSI)
<br class="ltx_break"></span>Lugano, Switzerland 
<br class="ltx_break">daniele.malpetti@idsia.ch

</span></span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">3<sup id="id7.1.id1" class="ltx_sup">rd</sup> Sandra Mitrović


 <span id="id8.2.id2" class="ltx_text"></span><span id="id9.3.id3" class="ltx_text"></span> <span id="id10.4.id4" class="ltx_ERROR undefined">{@IEEEauthorhalign}</span>
4<sup id="id11.5.id5" class="ltx_sup">th</sup> Francesca Mangili
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id12.6.id1" class="ltx_text ltx_font_italic">IDSIA (USI-SUPSI)
<br class="ltx_break"></span>Lugano, Switzerland 
<br class="ltx_break">sandra.mitrovic@idsia.ch

</span>
<span class="ltx_contact ltx_role_affiliation"><span id="id13.7.id1" class="ltx_text ltx_font_italic">IDSIA (USI-SUPSI)
<br class="ltx_break"></span>Lugano, Switzerland 
<br class="ltx_break">francesca.mangili@idsia.ch

</span></span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">5<sup id="id14.1.id1" class="ltx_sup">th</sup> Laura Azzimonti
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation"><span id="id15.2.id1" class="ltx_text ltx_font_italic">IDSIA (USI-SUPSI)
<br class="ltx_break"></span>Lugano, Switzerland 
<br class="ltx_break">laura.azzimonti@idsia.ch

</span></span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id16.id1" class="ltx_p"><span id="id16.id1.1" class="ltx_text">We present Flotta <span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>‘Flotta’ is the Italian word for ‘fleet’, i.e., a set of heterogeneous entities acting collaboratively.</span></span></span>, a Federated Learning framework designed to train machine learning models on sensitive data distributed across a multi-party consortium conducting research in contexts requiring high levels of security, such as the biomedical field. Flotta is a Python package, inspired in several aspects by Apache Spark, which provides both flexibility and security and allows conducting research using solely machines internal to the consortium. In this paper, we describe the main components of the framework together with a practical use case to illustrate the framework’s capabilities and highlight its security, flexibility and user-friendliness.</span></p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Index Terms: </h6>
<span id="id17.id1" class="ltx_text">
federated learning, framework, machine learning, distributed computation, biomedical research
</span>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">I </span><span id="S1.1.1" class="ltx_text ltx_font_smallcaps">Introduction</span>
</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Federated Learning (FL) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite> allows multiple devices or institutions to collaboratively train a model while keeping the data decentralized. Each party performs training steps locally and independently, without disclosing the data, and shared only (some of) the model parameters for the creation of a single global model. FL emerged as a response to mitigate data privacy and security issues in scenarios with strict legal regulations regarding the manipulation of privacy-sensitive data, such as EU law on General Data Protection Regulation - GDPR <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>]</cite>.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">FL allows for a large variety of choices regarding different aspects. For instance, FL could be applied both to scenarios with only few parties (commonly evidenced in the healthcare domain) and scenarios with as much as millions of parties (typical for edge devices, such as mobile phones). The literature refers to the former as <span id="S1.p2.1.1" class="ltx_text ltx_font_italic">cross-silo</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite> and to the latter as <span id="S1.p2.1.2" class="ltx_text ltx_font_italic">cross-device</span> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>. In a cross-silo context, e.g., where data are distributed across hospitals, scalability issues commonly associated with FL are less critical because the number of nodes is relatively small, and they typically have reliable connections and substantial computational capacity.  Additionally, when it comes to the parties’ interactions, FL can follow either a <span id="S1.p2.1.3" class="ltx_text ltx_font_italic">centralized</span> topology, where one party takes an exclusive role of coordinating the training process, or, the opposite <span id="S1.p2.1.4" class="ltx_text ltx_font_italic">decentralized</span> topology, where no dedicated coordinator is present.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">Over the years, several frameworks have emerged to manage FL. Each framework is characterized by distinct features and often relies on different technologies. Some of them are general-purpose, while others focus on specific classes of algorithms, scenarios, topologies or domains of use. For instance, TensorFlow Federated <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>, and PySyft <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite>) focus on deep learning, Felicitas <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>, and FairFed <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>]</cite> are frameworks developed with a focus on the <span id="S1.p3.1.1" class="ltx_text ltx_font_italic">cross-device</span> scenario, while Substra <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite> implements the <span id="S1.p3.1.2" class="ltx_text ltx_font_italic">decentralized</span> topology. Among general purpose frameworks we can mention Flower <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>]</cite>, FedML <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite>, and FATE <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite>, while FeatureCloud <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>, and Sfkit <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite> are examples of frameworks specifically developed for the biomedical sector that come with user-friendly web interfaces, allowing for practical creation and management of FL consortia.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">In this paper, we are considering a cross-silo scenario including a relatively small number of parties that wish to collaboratively learn from the sensitive data they own, which is a typical scenario in the healthcare field. While this alleviates scalability concerns, it requires to guarantee high levels of security. In particular we consider a situation where not only data cannot be moved from their original locations, but also the parties possessing data cannot be exposed to the world. In addition to these requirements, we are also interested in going beyond the classic centralized topology and having a fair balance between flexibility and security when it comes to the code execution. Despite the plethora of existing FL frameworks, which excel in many different aspects, to the best of our knowledge, there are no existing frameworks which satisfy all the requested criteria.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">We propose Flotta, a framework to bridge this gap, enabling FL in contexts requiring high levels of security, where communication must remain inside a consortium of authorized partners, while jointly adapting and extending the best practices proposed in existing FL frameworks. For example, Flotta naturally supports both <span id="S1.p5.1.1" class="ltx_text ltx_font_italic">centralized</span> and <span id="S1.p5.1.2" class="ltx_text ltx_font_italic">decentralized</span> topologies, but it also allows for intermediate scenarios. Additionally, not only Flotta guarantees security, but it also enables a good trade-off between flexibility and security, as the flow of custom analysis pipelines can be built as a combination of pre-defined, granted instructions.
The user is therefore allowed to combine and execute only recognized pieces of code, preventing a malicious user from unveiling sensitive data. This is enabled by the software architecture of Flotta, which has been heavily inspired by Apache Spark <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>, a unified engine for large-scale data analytics in cluster of computers that permits the transfer of instructions across nodes through predefined operations.
While Spark is not directly used in the framework, its approach to distributed computed has inspired our work for what concerns the deployment procedure, and the concept of Workbench, and Artifact detailed in section <a href="#S2" title="II Why another framework ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">II</span></a>.</p>
</div>
<div id="S1.p6" class="ltx_para">
<p id="S1.p6.1" class="ltx_p">The paper is organised as follows: Section <a href="#S2" title="II Why another framework ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">II</span></a> motivates the development of a new framework; Section <a href="#S3" title="III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">III</span></a> elucidates the principal components of Flotta, while Section <a href="#S4" title="IV How to use Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">IV</span></a> elaborates on its usage. Finally, Section <a href="#S5" title="V Conclusion ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">V</span></a> concludes providing directions for future works.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">II </span><span id="S2.1.1" class="ltx_text ltx_font_smallcaps">Why another framework</span>
</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">In the research domain, particularly in healthcare-related initiatives, it is a common situation for multiple parties to engage in a consortium with the aim of developing federated machine learning models using data located at several different sites. This is the case of a number of projects operating within national and international research programs (e.g., Horizon Europe). In such consortia, several parties provide data (<span id="S2.p1.1.1" class="ltx_text ltx_font_bold">data holders</span>), and one party, often not holding any data, conducts the analyses (<span id="S2.p1.1.2" class="ltx_text ltx_font_bold">analyst</span>). Usually, this party also provides an aggregator server that receives model contributions from the other parties involved and builds a global model, thus playing a coordination role that entails both high-level decision-making regarding analyses and low-level task assignments to the different machines involved in the computational process. This scenario follows the classic centralized-topology FL setup, as illustrated in Figure <a href="#S2.F1" title="Figure 1 ‣ II Why another framework ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>a.</p>
</div>
<div id="S2.p2" class="ltx_para">
<p id="S2.p2.1" class="ltx_p">In some cases, consortia can evolve into the creation of a true <span id="S2.p2.1.1" class="ltx_text ltx_font_italic">federated data space</span>, where data holders offer the possibility to use their data to any authorized party interested in conducting analysis, possibly including data holders themselves. Figure <a href="#S2.F1" title="Figure 1 ‣ II Why another framework ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>b depicts this scenario where authorized parties, both holding and not holding data, have the opportunity to conduct analyses. Flotta was developed to address such situations, which demand moving beyond the standard static centralized topology approach. It achieves this by disentangling the aspects of high-level decision-making regarding the kind of analyses to be conducted (analyst capability) from the low-level task assignments (<span id="S2.p2.1.2" class="ltx_text ltx_font_bold">entry point</span> capability, emphasizing with this name the access to the federated data space). In this way, it can naturally handle a wide range of topologies, including cases where all parties are data holders and have the capability of acting both as analysts and as entry points, as shown in Figure <a href="#S2.F1" title="Figure 1 ‣ II Why another framework ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>c.</p>
</div>
<div id="S2.p3" class="ltx_para">
<p id="S2.p3.1" class="ltx_p">Flotta was developed specifically to address the needs of consortia conducting biomedical research. It shares similarities with FeatureCloud <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>, a ready-to-use solution accessible via a user-friendly web interface which provides algorithms ranging from linear regression to genomic-specific ones, while also allowing custom algorithm development. Both Flotta and FeatureCloud adopt a modular approach, offering a set of secure operations called Apps in FeatureCloud and instructions in Flotta. However, they differ in several key aspects. The main difference concerns the infrastructure; while FeatureCloud requires the use of its own servers, which is often not possible due to parties’ internal regulations prohibiting reliance on external servers, Flotta allows relying solely on machines internal to the consortium. Moreover, Flotta was designed to operate in a space where research can be conducted on a number of ready-to-use data resources shared by different parties, enabling authorized analysts to use these resources to perform multiple analyses (limited, for security reasons, to those recognized by the framework). This differs from FeatureCloud, which requires authorization from the data holders for each analysis.
</p>
</div>
<figure id="S2.F1" class="ltx_figure"><img src="/html/2409.13473/assets/Figures/funcs_scheme.png" id="S2.F1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="266" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>
Three different deployment topologies that can be realized with Flotta. Analysts can access the federated data space, created by data holders, through one of the entry points of the space.
Panel <span id="S2.F1.4.1" class="ltx_text ltx_font_bold">a)</span> represents the classic centralized scenario, in which party 3 acts as the entry point for its own analysts.
Panel <span id="S2.F1.5.2" class="ltx_text ltx_font_bold">b)</span> represents a scenario in which analysts are external to the entry point party.
Panel <span id="S2.F1.6.3" class="ltx_text ltx_font_bold">c)</span> represents a decentralized scenario, in which all the parties are equivalent and any of them can act as an entry point.
</figcaption>
</figure>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">III </span><span id="S3.1.1" class="ltx_text ltx_font_smallcaps">Flotta</span>
</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">In this section, we move from the high-level description of a consortium based on the functional capabilities of its parties to a process-level description of the functioning of Flotta. The main components for understanding the functioning of Flotta are the Nodes, that contribute to the process with data and computations, the Workbench, where an analyst designs an analysis, and the Artifact, which is created by the Workbench and encodes all the information necessary to run the analysis. We will refer to the set of Nodes as the <span id="S3.p1.1.1" class="ltx_text ltx_font_bold">federated data space</span>: the Workbench is outside of this space and interacts with it by submitting Artifacts to an entry point node of the space.</p>
</div>
<div id="S3.p2" class="ltx_para">
<p id="S3.p2.1" class="ltx_p">In the following subsection we provide a more in-depth description of Nodes, Workbenches, and Artifacts. Next, we briefly illustrate the functioning of the library with an example describing the execution of the process depicted in Figure <a href="#S3.F2" title="Figure 2 ‣ III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS1.5.1.1" class="ltx_text">III-A</span> </span><span id="S3.SS1.6.2" class="ltx_text ltx_font_italic">Components</span>
</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.1" class="ltx_p"><span id="S3.SS1.p1.1.1" class="ltx_text ltx_font_bold">Nodes</span> are the backbone of any process run through Flotta, as they are deployed for storing local data and carrying out all computations, such as, but not limited to, training machine learning models or aggregating them. Nodes can be characterized from two different perspectives: the functional one and the communication one.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">From a functional point of view, Nodes have two main features: scheduling tasks and executing tasks. In a process only one Node (i.e., the entry point node) is in charge of acting as scheduler. This Node translates the content of the Artifact into a graph of tasks, and distributes these tasks to the other Nodes, following the graph order. The scheduler also tracks the life cycle of all tasks created from an Artifact based on the updates on their status received from the executor Nodes. For example, it unlocks a task that is deeper in the execution graph only once all the tasks on which it depends are successfully completed. The scheduler may also interrupt the process in case of errors. It is worth noting that the scheduler functionality does not exclude the execution of tasks, in fact the entry point node could assign tasks to itself. Moreover, model aggregation is not a special task requiring a dedicated software in our framework; instead, it is a task like any other that the entry point node can assign either to itself or to another Node.</p>
</div>
<div id="S3.SS1.p3" class="ltx_para">
<p id="S3.SS1.p3.1" class="ltx_p">From a communication point of view, Nodes can work in two different modes. The default mode allows to receive communications directly from any other Node. This creates a bidirectional communication channel between two Nodes.
The <span id="S3.SS1.p3.1.1" class="ltx_text ltx_font_italic">client-mode</span>, in contrast, is a special restricted mode where a Node communicates unidirectionally with only a single reference Node (in most cases, this is the entry point node). When in <span id="S3.SS1.p3.1.2" class="ltx_text ltx_font_italic">client-mode</span>, a Node cannot be reached from the internet or from a Workbench, and its scheduler functionality is disabled. Instead, at startup, it activates a polling routine that periodically sends requests for updates and tasks to the reference Node. This mode is particularly suited for deploying Flotta with minimal maintenance efforts and in environments where access from the internet is not allowed, such as hospitals.</p>
</div>
<div id="S3.SS1.p4" class="ltx_para">
<p id="S3.SS1.p4.1" class="ltx_p">The Node is implemented reflecting the two previously-explained functional features. It is composed by i) a web service, written using the FastAPI package <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>, which performs the scheduling of tasks and also permits the interaction with other Nodes and Workbenches, and ii) the task executor, written using the Ray package <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite>, which spawns multiple processes and executes them in parallel. At implementation level, the exchanges of information between Nodes happens thanks to the Pydantic <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite> package, which converts Python objects in JSON objects, and back. Exchange of other resources, such as model parameters, instead, is performed through binary data. To enhance the security level of the communication, all the exchanged objects are encrypted using the asymmetric encryption (or public-key) algorithm. These keys are also used to identify Nodes and Workbenches through a signing system; a check on the signature of the transmitted objects allows accepting or discarding requests.</p>
</div>
<div id="S3.SS1.p5" class="ltx_para">
<p id="S3.SS1.p5.1" class="ltx_p">The <span id="S3.SS1.p5.1.1" class="ltx_text ltx_font_bold">Workbench</span> is the interface through which an analysis is submitted to the federated data space. Specifically, it is a Python module of Flotta used by the analyst to write the code of the analysis to be executed. In fact, the idea of this interface is inspired by Apache Spark, which offers an interactive interface in Python through the Pyspark package. Analogously, Flotta offers the Workbench interface that allows the interaction with the federated data space.
</p>
</div>
<div id="S3.SS1.p6" class="ltx_para">
<p id="S3.SS1.p6.1" class="ltx_p">We refer to the set of instructions sent from a Workbench to an entry point node as an <span id="S3.SS1.p6.1.1" class="ltx_text ltx_font_bold">Artifact</span>. These instructions are also inspired by Apache Spark functions, which are converted and sent to cluster worker nodes before code execution. A similar mechanism occurs in Flotta when an Artifact is submitted to the federated data space. Artifacts also share similarities with Extract-Transform-Load pipelines, with the difference that for Artifacts, the steps composing the pipeline are executed at different locations.</p>
</div>
<div id="S3.SS1.p7" class="ltx_para">
<p id="S3.SS1.p7.1" class="ltx_p">A single Artifact is composed of possibly nested multiple instructions, as those defined in the Workbench code example in Listing <a href="#LST1" title="Listing 1 ‣ III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, that will be discussed in the next subsection. Instructions cover a wide spectrum of operations, ranging from data pre-processing to local model training and model aggregation. As already noted, only a predefined collection of secure instructions can be executed, ensuring the security of the overall analysis. Instructions represent a good trade-off between flexibility and security, offering analysts a wide range of possible operations (to be constructed by composing instructions in different ways), while also preventing the execution of arbitrary code, which could compromise privacy by disclosing sensitive information from the data.
Moreover, the framework can be naturally extended by writing custom instructions and wrapping them into plugins. However, in this case, Flotta cannot guarantee the security of the operations executed, and the developer must ensure that the newly defined instructions are indeed secure.</p>
</div>
<div id="S3.SS1.p8" class="ltx_para">
<p id="S3.SS1.p8.1" class="ltx_p">Artifacts are submitted by a Workbench to an entry point node, where each instruction contained in the Artifact is converted into tasks. It is worth noting that a single instruction in an Artifact can generate more than one task: this is the case, for example, of an instruction activating a parallel operation, which generates a task for each of the data holder Nodes involved.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS2.5.1.1" class="ltx_text">III-B</span> </span><span id="S3.SS2.6.2" class="ltx_text ltx_font_italic">Example of process execution</span>
</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">In this example, illustrated in Figure <a href="#S3.F2" title="Figure 2 ‣ III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>, we consider the execution of a process within a five-party consortium. Two parties act as data holders, one acts as both data holder and analyst, one serves as entry point, and one (having only the analyst capability) is inactive. Note that the figure represents the same consortium as in Figure <a href="#S2.F1" title="Figure 1 ‣ II Why another framework ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>b, this time connoted into a specific process. As our present focus is on the functioning of Flotta, we assume that all the necessary installations and deployments have already been completed (details on this topic are in Section <a href="#S4" title="IV How to use Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">IV</span></a>), and that all parties are ready to start the process. Specifically, we consider the training of a global random forest model by merging locally trained random forests, which is one of the first experiments that we conducted in the early testing phase of Flotta. In Listing <a href="#LST1" title="Listing 1 ‣ III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, we provide the code that the Party 2 analyst would need to write in the Workbench for the analysis represented in Figure  <a href="#S3.F2" title="Figure 2 ‣ III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>. The numbers from (1) to (5) on the arrows of figure <a href="#S3.F2" title="Figure 2 ‣ III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>, which represent the different exchanges of information , are repeated as comments in Listing <a href="#LST1" title="Listing 1 ‣ III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> to highlight which operations the different lines of code determine. We first refer to the figure and then to the code, but it may be helpful to examine them both in parallel while reading.</p>
</div>
<figure id="S3.F2" class="ltx_figure"><img src="/html/2409.13473/assets/Figures/funcs_workflow.png" id="S3.F2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="598" height="466" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>
Visual representation of the example process outlined in Section <a href="#S3.SS2" title="III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag"><span class="ltx_text">III-B</span></span></a>.
Arrows in red show the direction of exchanges: Artifact submission (1), tasks distribution (2), local models transmission, (3), aggregation (4), and returning of the global model back to the Analyst (5).
In this example, the Analyst of Party 2 is the only analyst working with the federated data space, while the (Analyst of) Party 5 is idle. This can happen as the Analysts of Party 2 and 5 are independent and do not necessarily perform their different analysis at the same time.
</figcaption>
</figure>
<div id="S3.SS2.p2" class="ltx_para">
<p id="S3.SS2.p2.1" class="ltx_p">Once the code in Listing <a href="#LST1" title="Listing 1 ‣ III-B Example of process execution ‣ III Flotta ‣ Flotta: a Secure and Flexible Spark-inspired Federated Learning Framework This work was supported in part by Innosuisse through the Innosuisse Flagship project SPEARHEAD (PFFS-21-15), and by the Swiss State Secretariat for Education, Research and Innovation (SERI) through the Horizon Europe Project NextGen, which is also funded by the European Union’s Horizon Europe, under grant agreement number 101136962, and by the UK Research and Innovation (UKRI) under the UK government’s Horizon Europe funding guarantee (grant numbers 10104323 and 10098097)." class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> is submitted by Party 2, the Workbench generates an Artifact and sends it to the entry point node (1). The entry point node activates a scheduler, creates a graph of tasks, and assigns tasks to the data holder Nodes (2). These locally train their model, and once they have completed the training, send it to the entry point node (3). This latter Node assigns to itself (4) the task of aggregating the local models into a global one, completes the task, and finally sends the global model to the analyst (5).</p>
</div>
<figure id="LST1" class="ltx_float ltx_lstlisting">
<div id="LST1.1" class="ltx_listing ltx_lst_language_Python ltx_lst_numbers_left ltx_lstlisting ltx_listing">
<div class="ltx_listing_data"><a href="data:text/plain;base64,ZnJvbSBmZXJkZWxhbmNlLmNvcmUuZGlzdHJpYnV0aW9ucyBpbXBvcnQgQ29sbGVjdApmcm9tIGZlcmRlbGFuY2UuY29yZS5tb2RlbF9vcGVyYXRpb25zIGltcG9ydCBBZ2dyZWdhdGlvbiwgVHJhaW4sIFRyYWluVGVzdApmcm9tIGZlcmRlbGFuY2UuY29yZS5tb2RlbHMgaW1wb3J0IEZlZGVyYXRlZFJhbmRvbUZvcmVzdENsYXNzaWZpZXIsIFN0cmF0ZWd5UmFuZG9tRm9yZXN0Q2xhc3NpZmllcgpmcm9tIGZlcmRlbGFuY2UuY29yZS5zdGVwcyBpbXBvcnQgRmluYWxpemUsIFBhcmFsbGVsCmZyb20gZmVyZGVsYW5jZS5jb3JlLnRyYW5zZm9ybWVycyBpbXBvcnQgRmVkZXJhdGVkU3BsaXR0ZXIKZnJvbSBmZXJkZWxhbmNlLndvcmtiZW5jaCBpbXBvcnQgQ29udGV4dCwgUHJvamVjdCwgQXJ0aWZhY3QKCmN0eDogQ29udGV4dCA9IENvbnRleHQoZW50cnlfcG9pbnRfbm9kZV91cmwpCnByajogUHJvamVjdCA9IGN0eC5wcm9qZWN0KHByb2plY3RfY29kZSkKCm1vZGVsID0gRmVkZXJhdGVkUmFuZG9tRm9yZXN0Q2xhc3NpZmllcigKICBuX2VzdGltYXRvcnM9MTAsCiAgc3RyYXRlZ3k9U3RyYXRlZ3lSYW5kb21Gb3Jlc3RDbGFzc2lmaWVyLk1FUkdFCikKCmluc3RydWN0aW9ucyA9IFsKICBQYXJhbGxlbCgKICAgIFRyYWluVGVzdCggICMgKDIpCiAgICAgIHF1ZXJ5PXByai5leHRyYWN0KCkuYWRkKAogICAgICAgIEZlZGVyYXRlZFNwbGl0dGVyKAogICAgICAgICAgcmFuZG9tX3N0YXRlPTQyLAogICAgICAgICAgdGVzdF9wZXJjZW50YWdlPTAuMiwKICAgICAgICAgIGxhYmVsPSJ0YXJnZXQiLAogICAgICAgICkKICAgICAgKSwKICAgICAgdHJhaW5lcj1UcmFpbihtb2RlbD1tb2RlbCksCiAgICAgIG1vZGVsPW1vZGVsLAogICAgKSwKICAgIENvbGxlY3QoKSwgICMgKDMpCiAgKSwKICBGaW5hbGl6ZSggICMgKDQpCiAgICBBZ2dyZWdhdGlvbihtb2RlbD1tb2RlbCkKICApLApdCgphOiBBcnRpZmFjdCA9IGN0eC5zdWJtaXQocHJqLCBpbnN0cnVjdGlvbnMpICAjICgxKQphZ2dfbW9kZWwgPSBjdHguZ2V0X2xhdGVzdF9yZXNvdXJjZShhKVsibW9kZWwiXSAgIyAoNSkK" download="code_example.py">⬇</a></div>
<div id="lstnumberx1" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">1</span><span id="lstnumberx1.1" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">from</span><span id="lstnumberx1.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx1.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ferdelance</span><span id="lstnumberx1.4" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx1.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">core</span><span id="lstnumberx1.6" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx1.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">distributions</span><span id="lstnumberx1.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx1.9" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">import</span><span id="lstnumberx1.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx1.11" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Collect</span>
</div>
<div id="lstnumberx2" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">2</span><span id="lstnumberx2.1" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">from</span><span id="lstnumberx2.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx2.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ferdelance</span><span id="lstnumberx2.4" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx2.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">core</span><span id="lstnumberx2.6" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx2.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">model_operations</span><span id="lstnumberx2.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx2.9" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">import</span><span id="lstnumberx2.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx2.11" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Aggregation</span><span id="lstnumberx2.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx2.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx2.14" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Train</span><span id="lstnumberx2.15" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx2.16" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx2.17" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">TrainTest</span>
</div>
<div id="lstnumberx3" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">3</span><span id="lstnumberx3.1" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">from</span><span id="lstnumberx3.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ferdelance</span><span id="lstnumberx3.4" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx3.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">core</span><span id="lstnumberx3.6" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx3.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">models</span><span id="lstnumberx3.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.9" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">import</span><span id="lstnumberx3.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.11" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">FederatedRandomForestClassifier</span><span id="lstnumberx3.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx3.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx3.14" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">StrategyRandomForestClassifier</span>
</div>
<div id="lstnumberx4" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">4</span><span id="lstnumberx4.1" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">from</span><span id="lstnumberx4.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx4.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ferdelance</span><span id="lstnumberx4.4" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx4.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">core</span><span id="lstnumberx4.6" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx4.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">steps</span><span id="lstnumberx4.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx4.9" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">import</span><span id="lstnumberx4.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx4.11" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Finalize</span><span id="lstnumberx4.12" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx4.13" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx4.14" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Parallel</span>
</div>
<div id="lstnumberx5" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">5</span><span id="lstnumberx5.1" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">from</span><span id="lstnumberx5.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ferdelance</span><span id="lstnumberx5.4" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx5.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">core</span><span id="lstnumberx5.6" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx5.7" class="ltx_text ltx_lst_identifier" style="font-size:70%;">transformers</span><span id="lstnumberx5.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.9" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">import</span><span id="lstnumberx5.10" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx5.11" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">FederatedSplitter</span>
</div>
<div id="lstnumberx6" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">6</span><span id="lstnumberx6.1" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">from</span><span id="lstnumberx6.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx6.3" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ferdelance</span><span id="lstnumberx6.4" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx6.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">workbench</span><span id="lstnumberx6.6" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx6.7" class="ltx_text ltx_lst_keyword ltx_font_bold" style="font-size:70%;">import</span><span id="lstnumberx6.8" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx6.9" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">Context</span><span id="lstnumberx6.10" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx6.11" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx6.12" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">Project</span><span id="lstnumberx6.13" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx6.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx6.15" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">Artifact</span>
</div>
<div id="lstnumberx7" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">7</span>
</div>
<div id="lstnumberx8" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">8</span><span id="lstnumberx8.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ctx</span><span id="lstnumberx8.2" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx8.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx8.4" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">Context</span><span id="lstnumberx8.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx8.6" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx8.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx8.8" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">Context</span><span id="lstnumberx8.9" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx8.10" class="ltx_text ltx_lst_emph3" style="font-size:70%;color:#FF0000;">entry_point_node_url</span><span id="lstnumberx8.11" class="ltx_text" style="font-size:70%;">)</span>
</div>
<div id="lstnumberx9" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">9</span><span id="lstnumberx9.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">prj</span><span id="lstnumberx9.2" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx9.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx9.4" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">Project</span><span id="lstnumberx9.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx9.6" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx9.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx9.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ctx</span><span id="lstnumberx9.9" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx9.10" class="ltx_text ltx_lst_emph2" style="font-size:70%;color:#808080;">project</span><span id="lstnumberx9.11" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx9.12" class="ltx_text ltx_lst_emph3" style="font-size:70%;color:#FF0000;">project_code</span><span id="lstnumberx9.13" class="ltx_text" style="font-size:70%;">)</span>
</div>
<div id="lstnumberx10" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">10</span>
</div>
<div id="lstnumberx11" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">11</span><span id="lstnumberx11.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">model</span><span id="lstnumberx11.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx11.3" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx11.4" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx11.5" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">FederatedRandomForestClassifier</span><span id="lstnumberx11.6" class="ltx_text" style="font-size:70%;">(</span>
</div>
<div id="lstnumberx12" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">12</span><span id="lstnumberx12.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx12.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">n_estimators</span><span id="lstnumberx12.3" class="ltx_text" style="font-size:70%;">=10,</span>
</div>
<div id="lstnumberx13" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">13</span><span id="lstnumberx13.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx13.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">strategy</span><span id="lstnumberx13.3" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx13.4" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">StrategyRandomForestClassifier</span><span id="lstnumberx13.5" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx13.6" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">MERGE</span>
</div>
<div id="lstnumberx14" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">14</span><span id="lstnumberx14.1" class="ltx_text" style="font-size:70%;">)</span>
</div>
<div id="lstnumberx15" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">15</span>
</div>
<div id="lstnumberx16" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">16</span><span id="lstnumberx16.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">instructions</span><span id="lstnumberx16.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx16.3" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx16.4" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx16.5" class="ltx_text" style="font-size:70%;">[</span>
</div>
<div id="lstnumberx17" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">17</span><span id="lstnumberx17.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx17.2" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Parallel</span><span id="lstnumberx17.3" class="ltx_text" style="font-size:70%;">(</span>
</div>
<div id="lstnumberx18" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">18</span><span id="lstnumberx18.1" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx18.2" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">TrainTest</span><span id="lstnumberx18.3" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx18.4" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx18.5" class="ltx_text ltx_lst_comment" style="font-size:70%;color:#009900;">#<span id="lstnumberx18.5.1" class="ltx_text ltx_lst_space"> </span>(2)</span>
</div>
<div id="lstnumberx19" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">19</span><span id="lstnumberx19.1" class="ltx_text ltx_lst_space" style="font-size:70%;">      </span><span id="lstnumberx19.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">query</span><span id="lstnumberx19.3" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx19.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">prj</span><span id="lstnumberx19.5" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx19.6" class="ltx_text ltx_lst_emph2" style="font-size:70%;color:#808080;">extract</span><span id="lstnumberx19.7" class="ltx_text" style="font-size:70%;">().</span><span id="lstnumberx19.8" class="ltx_text ltx_lst_emph2" style="font-size:70%;color:#808080;">add</span><span id="lstnumberx19.9" class="ltx_text" style="font-size:70%;">(</span>
</div>
<div id="lstnumberx20" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">20</span><span id="lstnumberx20.1" class="ltx_text ltx_lst_space" style="font-size:70%;">        </span><span id="lstnumberx20.2" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">FederatedSplitter</span><span id="lstnumberx20.3" class="ltx_text" style="font-size:70%;">(</span>
</div>
<div id="lstnumberx21" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">21</span><span id="lstnumberx21.1" class="ltx_text ltx_lst_space" style="font-size:70%;">          </span><span id="lstnumberx21.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">random_state</span><span id="lstnumberx21.3" class="ltx_text" style="font-size:70%;">=42,</span>
</div>
<div id="lstnumberx22" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">22</span><span id="lstnumberx22.1" class="ltx_text ltx_lst_space" style="font-size:70%;">          </span><span id="lstnumberx22.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">test_percentage</span><span id="lstnumberx22.3" class="ltx_text" style="font-size:70%;">=0.2,</span>
</div>
<div id="lstnumberx23" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">23</span><span id="lstnumberx23.1" class="ltx_text ltx_lst_space" style="font-size:70%;">          </span><span id="lstnumberx23.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">label</span><span id="lstnumberx23.3" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx23.4" class="ltx_text ltx_lst_string" style="font-size:70%;">”target”</span><span id="lstnumberx23.5" class="ltx_text" style="font-size:70%;">,</span>
</div>
<div id="lstnumberx24" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">24</span><span id="lstnumberx24.1" class="ltx_text ltx_lst_space" style="font-size:70%;">        </span><span id="lstnumberx24.2" class="ltx_text" style="font-size:70%;">)</span>
</div>
<div id="lstnumberx25" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">25</span><span id="lstnumberx25.1" class="ltx_text ltx_lst_space" style="font-size:70%;">      </span><span id="lstnumberx25.2" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx26" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">26</span><span id="lstnumberx26.1" class="ltx_text ltx_lst_space" style="font-size:70%;">      </span><span id="lstnumberx26.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">trainer</span><span id="lstnumberx26.3" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx26.4" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Train</span><span id="lstnumberx26.5" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx26.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">model</span><span id="lstnumberx26.7" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx26.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">model</span><span id="lstnumberx26.9" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx27" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">27</span><span id="lstnumberx27.1" class="ltx_text ltx_lst_space" style="font-size:70%;">      </span><span id="lstnumberx27.2" class="ltx_text ltx_lst_identifier" style="font-size:70%;">model</span><span id="lstnumberx27.3" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx27.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">model</span><span id="lstnumberx27.5" class="ltx_text" style="font-size:70%;">,</span>
</div>
<div id="lstnumberx28" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">28</span><span id="lstnumberx28.1" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx28.2" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx29" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">29</span><span id="lstnumberx29.1" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx29.2" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Collect</span><span id="lstnumberx29.3" class="ltx_text" style="font-size:70%;">(),</span><span id="lstnumberx29.4" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx29.5" class="ltx_text ltx_lst_comment" style="font-size:70%;color:#009900;">#<span id="lstnumberx29.5.1" class="ltx_text ltx_lst_space"> </span>(3)</span>
</div>
<div id="lstnumberx30" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">30</span><span id="lstnumberx30.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx30.2" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx31" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">31</span><span id="lstnumberx31.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx31.2" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Finalize</span><span id="lstnumberx31.3" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx31.4" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx31.5" class="ltx_text ltx_lst_comment" style="font-size:70%;color:#009900;">#<span id="lstnumberx31.5.1" class="ltx_text ltx_lst_space"> </span>(4)</span>
</div>
<div id="lstnumberx32" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">32</span><span id="lstnumberx32.1" class="ltx_text ltx_lst_space" style="font-size:70%;">    </span><span id="lstnumberx32.2" class="ltx_text ltx_lst_emph" style="font-size:70%;color:#2E8CD9;">Aggregation</span><span id="lstnumberx32.3" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx32.4" class="ltx_text ltx_lst_identifier" style="font-size:70%;">model</span><span id="lstnumberx32.5" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx32.6" class="ltx_text ltx_lst_identifier" style="font-size:70%;">model</span><span id="lstnumberx32.7" class="ltx_text" style="font-size:70%;">)</span>
</div>
<div id="lstnumberx33" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">33</span><span id="lstnumberx33.1" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx33.2" class="ltx_text" style="font-size:70%;">),</span>
</div>
<div id="lstnumberx34" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">34</span><span id="lstnumberx34.1" class="ltx_text" style="font-size:70%;">]</span>
</div>
<div id="lstnumberx35" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">35</span>
</div>
<div id="lstnumberx36" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">36</span><span id="lstnumberx36.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">a</span><span id="lstnumberx36.2" class="ltx_text" style="font-size:70%;">:</span><span id="lstnumberx36.3" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx36.4" class="ltx_text ltx_lst_emph4" style="font-size:70%;color:#808080;">Artifact</span><span id="lstnumberx36.5" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx36.6" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx36.7" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx36.8" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ctx</span><span id="lstnumberx36.9" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx36.10" class="ltx_text ltx_lst_emph2" style="font-size:70%;color:#808080;">submit</span><span id="lstnumberx36.11" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx36.12" class="ltx_text ltx_lst_identifier" style="font-size:70%;">prj</span><span id="lstnumberx36.13" class="ltx_text" style="font-size:70%;">,</span><span id="lstnumberx36.14" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx36.15" class="ltx_text ltx_lst_identifier" style="font-size:70%;">instructions</span><span id="lstnumberx36.16" class="ltx_text" style="font-size:70%;">)</span><span id="lstnumberx36.17" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx36.18" class="ltx_text ltx_lst_comment" style="font-size:70%;color:#009900;">#<span id="lstnumberx36.18.1" class="ltx_text ltx_lst_space"> </span>(1)</span>
</div>
<div id="lstnumberx37" class="ltx_listingline">
<span class="ltx_tag ltx_tag_listingline">37</span><span id="lstnumberx37.1" class="ltx_text ltx_lst_identifier" style="font-size:70%;">agg_model</span><span id="lstnumberx37.2" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx37.3" class="ltx_text" style="font-size:70%;">=</span><span id="lstnumberx37.4" class="ltx_text ltx_lst_space" style="font-size:70%;"> </span><span id="lstnumberx37.5" class="ltx_text ltx_lst_identifier" style="font-size:70%;">ctx</span><span id="lstnumberx37.6" class="ltx_text" style="font-size:70%;">.</span><span id="lstnumberx37.7" class="ltx_text ltx_lst_emph2" style="font-size:70%;color:#808080;">get_latest_resource</span><span id="lstnumberx37.8" class="ltx_text" style="font-size:70%;">(</span><span id="lstnumberx37.9" class="ltx_text ltx_lst_identifier" style="font-size:70%;">a</span><span id="lstnumberx37.10" class="ltx_text" style="font-size:70%;">)[</span><span id="lstnumberx37.11" class="ltx_text ltx_lst_string" style="font-size:70%;">”model”</span><span id="lstnumberx37.12" class="ltx_text" style="font-size:70%;">]</span><span id="lstnumberx37.13" class="ltx_text ltx_lst_space" style="font-size:70%;">  </span><span id="lstnumberx37.14" class="ltx_text ltx_lst_comment" style="font-size:70%;color:#009900;">#<span id="lstnumberx37.14.1" class="ltx_text ltx_lst_space"> </span>(5)</span>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float">Listing 1: </span>Example of Artifact submission.</figcaption>
</figure>
<div id="S3.SS2.p3" class="ltx_para">
<p id="S3.SS2.p3.1" class="ltx_p">In the code example, lines 1-6 are dedicated to importing the modules that are necessary for executing the process. Line 8 creates a connection between the Workbench and an entry point node; in Flotta, we call the object used by the Workbench to communicate with the entry point node a <span id="S3.SS2.p3.1.1" class="ltx_text ltx_font_italic">context</span>. Subsequently, it is necessary to fetch a project, which represents a collection of datasets, using a project code (line 9). Lines 11-14 define the machine learning model to be trained by specifying the type of algorithm, one hyperparameter, and the aggregation strategy. Lines 16-34 contain the instructions to train the model inside the federated data space. Instructions are colored in blue in the code and, in this example, are nested. The block of code starting with the <span id="S3.SS2.p3.1.2" class="ltx_text ltx_font_italic">Parallel</span> instruction at line 17 instructs the scheduler to create multiple tasks that will be executed in parallel on all data holder Nodes. In these parallel operations, each Node, after extracting the data assigned to the project (line 19), splits the local data into train and test sets (line 20), and trains the model (line 26). Then, line 29 instructs for the collection of the trained local models for the merge step, concluding the operations to be performed in parallel. The block starting at line 31 finalizes the process and therefore requires that all the previous tasks have been successfully completed before it can be executed. In particular, line 32 invokes aggregation using the previously specified aggregation strategy. Finally, line 36 submits the instructions, creating the Artifact and starting the actual execution of the process, while line 37 fetches the global model.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">IV </span><span id="S4.1.1" class="ltx_text ltx_font_smallcaps">How to use Flotta</span>
</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">Flotta is a single, configurable, Python application, distributed as a Python package that contains everything needed to launch a Node application or write code within a Workbench.
It is available as an open source software under the <span id="S4.p1.1.1" class="ltx_text ltx_font_italic">LGPL 3.0</span> license. The code is available at the following GitHub repository: <a target="_blank" href="https://github.com/IDSIA/flotta" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/IDSIA/flotta</a> while a more in depth documentation of the software is available at <a target="_blank" href="https://readthedocs.org/projects/flotta/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://readthedocs.org/projects/flotta/</a>.</p>
</div>
<div id="S4.p2" class="ltx_para">
<p id="S4.p2.1" class="ltx_p">In this section, we detail all the necessary steps that a consortium must perform to conduct an analysis with Flotta, starting from the preliminary steps and then detailing the necessary deployments and installations.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS1.5.1.1" class="ltx_text">IV-A</span> </span><span id="S4.SS1.6.2" class="ltx_text ltx_font_italic">Preliminary preparations</span>
</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p">The first step for the consortium is obtaining all the necessary authorizations and approvals for deploying the federated data space and conducting analysis on the data. Even though the federated analysis will preserve privacy, given the relative novelty of the technology, this process may be time-consuming and complicated, especially in biomedical research. Once this phase is concluded, the consortium needs to define the functionalities that each party will have in the federated data space. For instance, due to stringent internal regulations, some parties may only be able to deploy Nodes in client-mode, and therefore only behave as data holders (and analysts). On the other hand, at least one party in the consortium needs to deploy an entry point Node.</p>
</div>
<div id="S4.SS1.p2" class="ltx_para">
<p id="S4.SS1.p2.1" class="ltx_p">Next, the consortium needs to define one or more <span id="S4.SS1.p2.1.1" class="ltx_text ltx_font_bold">projects</span>, where a project represents a collection of datasets. Each project is characterized by a unique <span id="S4.SS1.p2.1.2" class="ltx_text ltx_font_bold">project code</span>, which is a simple string. A given project code is assigned to all the locally available data files, named <span id="S4.SS1.p2.1.3" class="ltx_text ltx_font_bold">data source</span>, belonging to that project (note that each data source may belong to multiple projects). Projects are a key element for the use of Flotta, as every analysis starts with invoking a project code. By creating multiple projects, the consortium can grant access to different “regions” of the federated data space, i.e., to different subsets of the available datasets. For example, a bioinformatician working in a general-purpose biomedical consortium may be provided with a project code granting access only to genetic datasets instead of the whole set of available datasets, while a nephrologist may have a code granting access only to kidney-related datasets. Projects constitute a flexible way to manage authorizations and contribute to enforcing security in the analyses. Moreover, projects guarantee that, at execution time, the code generated from an Artifact has the expected data ready to be used. Once the different projects have been defined, their codes can be distributed to the different analysts.</p>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS2.5.1.1" class="ltx_text">IV-B</span> </span><span id="S4.SS2.6.2" class="ltx_text ltx_font_italic">Node side</span>
</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">The next step for a consortium is the deployment of Nodes. For this, a <span id="S4.SS2.p1.1.1" class="ltx_text ltx_font_bold">configuration file</span> to be used as input must be prepared for every Node. This file is a document in a human-readable format that contains the deployment parameters of the Node, such as the operative mode (default mode or client-mode) and the connection parameters. The list of data sources provided by a data node, together with the projects to which they are assigned are also included in this document.</p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p id="S4.SS2.p2.1" class="ltx_p">The procedure for deploying a Node is the same for all Nodes in the consortium; the difference is only in the configuration files used. The first Node needs to be configured to operate in the default mode and to be reachable by any other Node in the federated data space (<span id="S4.SS2.p2.1.1" class="ltx_text ltx_font_bold">cold start</span> scenario). Once this first Node is added, each subsequent Node will be able to join the federated data space by adding to their configuration file the URL connection to the first Node (<span id="S4.SS2.p2.1.2" class="ltx_text ltx_font_bold">warm start</span> scenario).
As previously mentioned, there is no need for any external entity, such as a cloud provider, outside the consortium parties, for Flotta to work as intended.</p>
</div>
<div id="S4.SS2.p3" class="ltx_para">
<p id="S4.SS2.p3.1" class="ltx_p">Deploying a node involves installing the Flotta package in a Python environment. Additionally, if the intention of the consortium is to use third-party plugins, they shall be installed on every Node during deployment, to avoid having different sets of instructions in the Nodes. After deployment, a Node is launched by executing the install Python package with the configuration file as an argument.
This deployment procedure has been designed in analogy with Apache Spark, since a Spark cluster is created by first installing the same software on all nodes and then configuring each single node. Flotta does the same by offering a single installation package that can be customized based on the necessity of the single party.
</p>
</div>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS3.5.1.1" class="ltx_text">IV-C</span> </span><span id="S4.SS3.6.2" class="ltx_text ltx_font_italic">Workbench side</span>
</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p id="S4.SS3.p1.1" class="ltx_p">As stated previously, any party in the consortium, be it a data holder or not, can perform analysis and interact with the federated data space through Workbenches. Multiple Workbenches may be active in the consortium and run different analyses at the same time.</p>
</div>
<div id="S4.SS3.p2" class="ltx_para">
<p id="S4.SS3.p2.1" class="ltx_p">A Workbench needs to be installed in a Python environment, alongside with the same extensions installed for the Nodes in the federated data space, but a Workbench does not require to be launched. In fact, the Workbench can just be imported as a Python package in any sort of Python script, notebook, or application that will perform the analyses.
The functioning of a Workbench has strong analogies with Apache Spark, where it is possible to create a similar context object using the <span id="S4.SS3.p2.1.1" class="ltx_text ltx_font_italic">Pyspark</span> module connected to a master node. Through this interface, Spark users write code and send instructions to the master node, which schedule the tasks on the distributed network.</p>
</div>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">V </span><span id="S5.1.1" class="ltx_text ltx_font_smallcaps">Conclusion</span>
</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">In this article, we presented Flotta, a FL framework designed for (but not limited to) consortia conducting biomedical research under stringent security requirements. The framework is designed to use machines within the consortium, instead of relying on cloud services. Moreover, the framework provides a good balance between flexibility and security, with the latter being guaranteed through the execution of only a predefined set of granted instructions. The foundational components of Flotta have been developed and tested, and we are currently expanding the selection of algorithms available for model training, as well as the set of possible aggregation strategies. Moreover, provided that the developer ensures their security, the framework can be naturally extended by adding custom instructions and wrapping them into plugins. We encourage interested readers to explore the Flotta code and documentation on GitHub, where updates and future extensions will be readily accessible.
</p>
</div>
</section>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_font_smallcaps ltx_title_section">Acknowledgment</h2>

<div id="Sx1.p1" class="ltx_para">
<p id="Sx1.p1.1" class="ltx_p">We are grateful to all SPEARHEAD partners for insightful discussions, in particular to Lina Aerts, Eden Sorolla and Julia Bielicki from Universitäts-Kinderspital beider Basel (UKBB) and Angélie Pham from University of Basel Innovation Office.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
B. McMahan, E. Moore, D. Ramage, S. Hampson, and B. A. y. Arcas,
“Communication-Efficient Learning of Deep Networks from Decentralized
Data,” in <em id="bib.bib1.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 20th International Conference on
Artificial Intelligence and Statistics</em>, ser. Proceedings of Machine Learning
Research, A. Singh and J. Zhu, Eds., vol. 54.   PMLR, 20–22 Apr 2017, pp. 1273–1282. [Online]. Available:
<a target="_blank" href="https://proceedings.mlr.press/v54/mcmahan17a.html" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://proceedings.mlr.press/v54/mcmahan17a.html</a>

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
P. Voigt and A. Von dem Bussche, “The eu general data protection regulation
(gdpr),” <em id="bib.bib2.1.1" class="ltx_emph ltx_font_italic">A Practical Guide, 1st Ed., Cham: Springer International
Publishing</em>, vol. 10, no. 3152676, pp. 10–5555, 2017.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
N. Rieke, J. Hancox, W. Li, F. Milletari, H. R. Roth, S. Albarqouni, S. Bakas,
M. N. Galtier, B. A. Landman, K. Maier-Hein <em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “The future of
digital health with federated learning,” <em id="bib.bib3.2.2" class="ltx_emph ltx_font_italic">NPJ digital medicine</em>,
vol. 3, no. 1, p. 119, 2020.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
K. Bonawitz, H. Eichner, W. Grieskamp, D. Huba, A. Ingerman, V. Ivanov,
C. Kiddon, J. Konečnỳ, S. Mazzocchi, B. McMahan <em id="bib.bib4.1.1" class="ltx_emph ltx_font_italic">et al.</em>,
“Towards federated learning at scale: System design,” <em id="bib.bib4.2.2" class="ltx_emph ltx_font_italic">Proceedings of
machine learning and systems</em>, vol. 1, pp. 374–388, 2019.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
“Tensorflow federated: Machine learning on decentralized data,” 2021,
https://www.tensorflow.org/federated.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
A. Ziller, A. Trask, A. Lopardo, B. Szymkow, B. Wagner, E. Bluemke, J.-M.
Nounahon, J. Passerat-Palmbach, K. Prakash, N. Rose <em id="bib.bib6.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Pysyft:
A library for easy federated learning,” <em id="bib.bib6.2.2" class="ltx_emph ltx_font_italic">Federated learning systems:
Towards next-generation AI</em>, pp. 111–139, 2021.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
Q. Zhang, T. Wu, P. Zhou, S. Zhou, Y. Yang, and X. Jin, “Felicitas: Federated
learning in distributed cross device collaborative frameworks,” in
<em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 28th ACM SIGKDD Conference on Knowledge Discovery
and Data Mining</em>, 2022, pp. 4502–4509.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
M. H. ur Rehman, A. M. Dirir, K. Salah, and D. Svetinovic, “Fairfed:
Cross-device fair federated learning,” in <em id="bib.bib8.1.1" class="ltx_emph ltx_font_italic">2020 IEEE Applied Imagery
Pattern Recognition Workshop (AIPR)</em>.   IEEE, 2020, pp. 1–7.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
M. N. Galtier and C. Marini, “Substra: a framework for privacy-preserving,
traceable and collaborative machine learning,” <em id="bib.bib9.1.1" class="ltx_emph ltx_font_italic">arXiv preprint
arXiv:1910.11567</em>, 2019.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
D. J. Beutel, T. Topal, A. Mathur, X. Qiu, J. Fernandez-Marques, Y. Gao,
L. Sani, K. H. Li, T. Parcollet, P. P. B. de Gusmão <em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">et al.</em>,
“Flower: A friendly federated learning framework,” 2022.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
C. He, S. Li, J. So, X. Zeng, M. Zhang, H. Wang, X. Wang, P. Vepakomma,
A. Singh, H. Qiu <em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Fedml: A research library and benchmark for
federated machine learning,” <em id="bib.bib11.2.2" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2007.13518</em>, 2020.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
Y. Liu, T. Fan, T. Chen, Q. Xu, and Q. Yang, “Fate: An industrial grade
platform for collaborative learning with data protection,” <em id="bib.bib12.1.1" class="ltx_emph ltx_font_italic">Journal of
Machine Learning Research</em>, vol. 22, no. 226, pp. 1–6, 2021.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
J. Matschinske, J. Späth, M. Bakhtiari, N. Probul, M. M. K. Majdabadi,
R. Nasirigerdeh, R. Torkzadehmahani, A. Hartebrodt, B.-A. Orban, S.-J.
Fejér <em id="bib.bib13.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “The featurecloud platform for federated learning
in biomedicine: unified approach,” <em id="bib.bib13.2.2" class="ltx_emph ltx_font_italic">Journal of Medical Internet
Research</em>, vol. 25, no. 1, p. e42621, 2023.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
S. Mendelsohn, D. Froelicher, D. Loginov, D. Bernick, B. Berger, and H. Cho,
“sfkit: a web-based toolkit for secure and federated genomic analysis,”
<em id="bib.bib14.1.1" class="ltx_emph ltx_font_italic">Nucleic Acids Research</em>, vol. 51, no. W1, pp. W535–W541, 2023.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
M. Zaharia, R. S. Xin, P. Wendell, T. Das, M. Armbrust, A. Dave, X. Meng,
J. Rosen, S. Venkataraman, M. J. Franklin <em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">et al.</em>, “Apache spark: a
unified engine for big data processing,” <em id="bib.bib15.2.2" class="ltx_emph ltx_font_italic">Communications of the ACM</em>,
vol. 59, no. 11, pp. 56–65, 2016.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
S. Ramírez, “Fastapi framework, high performance, easy to learn, fast to
code, ready for production.” [Online]. Available:
<a target="_blank" href="https://github.com/tiangolo/fastapi" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://github.com/tiangolo/fastapi</a>

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock">
P. Moritz, R. Nishihara, S. Wang, A. Tumanov, R. Liaw, E. Liang, M. Elibol,
Z. Yang, W. Paul, M. I. Jordan, and I. Stoica, “Ray: A distributed framework
for emerging ai applications,” 2018.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock">
S. Colvin, E. Jolibois, H. Ramezani, A. G. Badaracco, T. Dorsey, D. Montague,
S. Matveenko, M. Trylesinski, S. Runkle, D. Hewitt, and A. Hall,
“Pydantic,” 2024. [Online]. Available:
<a target="_blank" href="https://docs.pydantic.dev/latest/" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://docs.pydantic.dev/latest/</a>

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2409.13472" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2409.13473" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2409.13473">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2409.13473" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2409.13474" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Sat Oct  5 18:33:04 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
