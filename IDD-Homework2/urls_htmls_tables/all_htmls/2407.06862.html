<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2407.06862] Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems</title><meta property="og:description" content="In this paper, we present a study of a Federated Learning (FL) system, based on the use of decentralized architectures to ensure trust and increase reliability. The system is based on the idea that the FL collaborators‚Ä¶">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2407.06862">

<!--Generated on Mon Aug  5 17:39:34 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="keywords" lang="en" content="
Federated Learning,  Blockchain,  Decentralized Systems,  Machine Learning,  Smart Contracts
">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">

Lorenzo Cassano1,
Jacopo D‚ÄôAbramo1,
Siraj Munir2
Stefano Ferretti21



<span id="id1.1.id1" class="ltx_text ltx_font_typewriter" style="font-size:90%;">{lorenzo.cassano2,jacopo.dabramo}@studio.unibo.it,</span> 
<br class="ltx_break"><span id="id2.2.id2" class="ltx_text ltx_font_typewriter" style="font-size:90%;">s.munir@campus.uniurb.it,stefano.ferretti@uniurb.it</span>
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_affiliation">1Department of Computer Science and Engineering, University of Bologna, Italy
</span>
<span class="ltx_contact ltx_role_affiliation">2Department of Pure and Applied Sciences, University of Urbino Carlo Bo, Italy
</span></span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id3.id1" class="ltx_p">In this paper, we present a study of a Federated Learning (FL) system, based on the use of decentralized architectures to ensure trust and increase reliability. The system is based on the idea that the FL collaborators upload the (ciphered) model parameters on the Inter-Planetary File System (IPFS) and interact with a dedicated smart contract to track their behavior. Thank to this smart contract, the phases of parameter updates are managed efficiently, thereby strengthening data security.
We have carried out an experimental study that exploits two different methods of weight aggregation, i.e., a classic averaging scheme and a federated proximal aggregation. The results confirm the feasibility of the proposal.</p>
</div>
<div class="ltx_keywords">
<h6 class="ltx_title ltx_title_keywords">Index Terms: </h6>
Federated Learning, Blockchain, Decentralized Systems, Machine Learning, Smart Contracts

</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">I </span><span id="S1.1.1" class="ltx_text ltx_font_smallcaps">Introduction</span>
</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Federated Learning (FL) is a Machine Learning (ML) framework that enables multiple parties to collaboratively train a shared model without directly sharing their individual data <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>. FL holds the promise of enhancing data-driven learning models while safeguarding data owners‚Äô privacy. This makes it an appealing approach for developing ML models in several application domains. A prominent example is clinical diagnosis, where patient data privacy is critical, yet data aggregation from diverse sources is necessary.
However, a significant challenge revolves around ensuring FL collaborators actively participate in the protocol while securely contributing their data.
To this extent, recently several studies have explored the integration of blockchain technology within FL systems <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>, <a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib4" title="" class="ltx_ref">4</a>, <a href="#bib.bib5" title="" class="ltx_ref">5</a>, <a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite>. While existing research often emphasizes on participation incentives, traceability, and security aspects, there is an under-explored dimension that deserves attention, i.e., the impact of delays, number of collaborators, and collaborator failures on system performance and model training accuracy.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">In our work, we investigate the performance of our FL system and the accuracy of ML training when one or more collaborators experience failures.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">We propose a decentralized FL system that combines FL with two powerful components: the Inter-Planetary File System (IPFS) and smart contracts (executed over a permissioned Ethereum-like blockchain). Together, they create a tamper-proof storage mechanism for sharing encrypted model parameters. IPFS provides decentralized and fault-tolerant data storage, while smart contracts enforce rules and streamline interactions among participants <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>.
The presence of a smart contract forces Collaborators to adhere to a protocol organized into distinct phases, ensuring orderly updates of model parameters. Additionally, the smart contract automates compliance checks, maintaining the integrity of the FL process <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite>.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">In the paper, we present the overall decentralized system and we perform an experimental evaluation under varying failure scenarios among Collaborators. As concerns the FL model assessment, two weight update methods are used, <em id="S1.p4.1.1" class="ltx_emph ltx_font_italic">FedAvg</em> and <em id="S1.p4.1.2" class="ltx_emph ltx_font_italic">FedProx</em> <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>]</cite>.
We investigate the FL system‚Äôs performance in terms of classification accuracy, using a dataset coming from the healthcare image classification domain, i.e., brain tumor image dataset.
Furthermore, we measure the gas consumption of the smart contract, a critical aspect in blockchain-based FL systems.
Finally, we also evaluate the performance of the data retrieval and update, by both FL Manager and Collaborators, from/to IPFS.
Results confirm the viability of using decentralized systems in Federated Learning.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">The remainder of this paper is organized as follows.
Section <a href="#S2" title="II System Architecture ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">II</span></a> describes the proposed framework.
Section <a href="#S3" title="III Experimental Evaluation ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">III</span></a> describes the methodology, while
Section <a href="#S4" title="IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">IV</span></a> outlines the experimental results.
Section <a href="#S5" title="V Conclusions ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">V</span></a> provides some concluding remarks.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">II </span><span id="S2.1.1" class="ltx_text ltx_font_smallcaps">System Architecture</span>
</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.1" class="ltx_p">Our system architecture comprises four key actors. The first two are the classic actors involved in a typical FL system, while the last two ones are those of typical decentralized systems <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>:</p>
<ul id="S2.I1" class="ltx_itemize">
<li id="S2.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">‚Ä¢</span> 
<div id="S2.I1.i1.p1" class="ltx_para">
<p id="S2.I1.i1.p1.1" class="ltx_p"><span id="S2.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">FL Manager</span>: The Manager acts as the aggregator for the classification model parameters used in FL. It triggers requests, collects ML parameters from other Collaborators, and monitors parameter updates.</p>
</div>
</li>
<li id="S2.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">‚Ä¢</span> 
<div id="S2.I1.i2.p1" class="ltx_para">
<p id="S2.I1.i2.p1.1" class="ltx_p"><span id="S2.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">FL Collaborators</span>: these are the nodes participating to FL model training. They retrieve data, locally train their models, and upload the trained parameters to the system.</p>
</div>
</li>
<li id="S2.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">‚Ä¢</span> 
<div id="S2.I1.i3.p1" class="ltx_para">
<p id="S2.I1.i3.p1.1" class="ltx_p"><span id="S2.I1.i3.p1.1.1" class="ltx_text ltx_font_bold">Permissioned Blockchain</span>: This blockchain executes a Federated Learning Smart Contract (FLSC). The FLSC autonomously regulates parameter exchanges among participants, ensuring adherence to the protocol. Additionally, the use of blockchain digests prevents tampering with parameters, enhancing security <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>, <a href="#bib.bib10" title="" class="ltx_ref">10</a>]</cite>.</p>
</div>
</li>
<li id="S2.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">‚Ä¢</span> 
<div id="S2.I1.i4.p1" class="ltx_para">
<p id="S2.I1.i4.p1.1" class="ltx_p"><span id="S2.I1.i4.p1.1.1" class="ltx_text ltx_font_bold">Decentralized File Storage</span>: The Inter-Planetary File System (IPFS) stores the ML model parameters.</p>
</div>
</li>
</ul>
</div>
<section id="S2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S2.SS1.5.1.1" class="ltx_text">II-A</span> </span><span id="S2.SS1.6.2" class="ltx_text ltx_font_italic">System Interaction Overview</span>
</h3>

<figure id="S2.F1" class="ltx_figure"><img src="/html/2407.06862/assets/interactions.png" id="S2.F1.g1" class="ltx_graphics ltx_centering ltx_img_square" width="598" height="532" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S2.F1.2.1.1" class="ltx_text" style="font-size:90%;">Figure 1</span>: </span><span id="S2.F1.3.2" class="ltx_text" style="font-size:90%;">System diagram</span></figcaption>
</figure>
<div id="S2.SS1.p1" class="ltx_para ltx_noindent">
<p id="S2.SS1.p1.1" class="ltx_p">The diagram of the interactions among system components is shown in Figure <a href="#S2.F1" title="Figure 1 ‚Ä£ II-A System Interaction Overview ‚Ä£ II System Architecture ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>.
The protocol works as follows:</p>
<ol id="S2.I2" class="ltx_enumerate">
<li id="S2.I2.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="S2.I2.i1.p1" class="ltx_para">
<p id="S2.I2.i1.p1.1" class="ltx_p">The Manager deploys and initiates the Federated Learning Smart Contract (FLSC), inviting multiple Collaborators (for simplicity, only one is depicted in the figure).</p>
</div>
</li>
<li id="S2.I2.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="S2.I2.i2.p1" class="ltx_para">
<p id="S2.I2.i2.p1.1" class="ltx_p">The Manager publishes the model details required for compilation within FLSC.</p>
</div>
</li>
<li id="S2.I2.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="S2.I2.i3.p1" class="ltx_para">
<p id="S2.I2.i3.p1.1" class="ltx_p">Collaborators retrieve and adopt the model from the FL Smart Contract.</p>
</div>
</li>
</ol>
<p id="S2.SS1.p1.2" class="ltx_p"><span id="S2.SS1.p1.2.1" class="ltx_text ltx_font_bold">FL Loop</span></p>
<ol id="S2.I3" class="ltx_enumerate">
<li id="S2.I3.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="S2.I3.i4.p1" class="ltx_para">
<p id="S2.I3.i4.p1.1" class="ltx_p">Each Collaborator trains its local model using its dataset. By keeping data decentralized, FL avoids the need for centralizing sensitive information. This brings positive aspects possibly related to enhanced privacy, data protection, regulatory compliance, and scalability.</p>
</div>
</li>
<li id="S2.I3.i5" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">5.</span> 
<div id="S2.I3.i5.p1" class="ltx_para">
<p id="S2.I3.i5.p1.1" class="ltx_p">Periodically, Collaborators publish updated local parameters on IPFS and send their parameter hashes (along with retrieval information) to FLSC. Parameters are encrypted sequentially using the Collaborator‚Äôs private key and the Manager‚Äôs public key. This ensures confidentiality and verifiability ‚Äî only the Manager can read the data, and their origin is guaranteed.</p>
</div>
</li>
<li id="S2.I3.i6" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">6.</span> 
<div id="S2.I3.i6.p1" class="ltx_para">
<p id="S2.I3.i6.p1.1" class="ltx_p">The Manager decrypts these parameters using its private key and the Collaborator‚Äôs public key. The Manager further validates parameters by comparing their digest to the hashed value stored in the smart contract.</p>
</div>
</li>
<li id="S2.I3.i7" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">7.</span> 
<div id="S2.I3.i7.p1" class="ltx_para">
<p id="S2.I3.i7.p1.1" class="ltx_p">Based on an aggregation function, the Manager updates the ML model parameters, considering results obtained during training.</p>
</div>
</li>
<li id="S2.I3.i8" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">8.</span> 
<div id="S2.I3.i8.p1" class="ltx_para">
<p id="S2.I3.i8.p1.1" class="ltx_p">The Manager securely uploads the updated ML model parameters to IPFS, using the same encryption approach as previously described. These parameters represent the refined knowledge gained during the training process.</p>
</div>
</li>
<li id="S2.I3.i9" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">9.</span> 
<div id="S2.I3.i9.p1" class="ltx_para">
<p id="S2.I3.i9.p1.1" class="ltx_p">The Manager sends the digests (hashes) of these parameters to the smart contract. These digests serve as verifiable references for the stored parameters.</p>
</div>
</li>
<li id="S2.I3.i10" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">10.</span> 
<div id="S2.I3.i10.p1" class="ltx_para">
<p id="S2.I3.i10.p1.1" class="ltx_p">Collaborators retrieve the updated model parameters from IPFS. They decrypt the parameters using their private keys. Collaborators then verify the validity of these parameters through the FL Smart Contract, following the same process as before. This validation ensures that the parameters have not been tampered with and align with the agreed-upon protocol. Once validated, Collaborators incorporate these updated model parameters into their local training during the subsequent iteration.</p>
</div>
</li>
</ol>
</div>
<div id="S2.SS1.p2" class="ltx_para">
<p id="S2.SS1.p2.1" class="ltx_p">In our current implementation, Collaborators receive no rewards for parameter updates, assuming protocol compliance. However, our framework allows for alternative security-enhancing or incentive-based approaches. For example, participants might be automatically rewarded based on their contributions <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib2" title="" class="ltx_ref">2</a>, <a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib11" title="" class="ltx_ref">11</a>, <a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite>.</p>
</div>
</section>
<section id="S2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S2.SS2.5.1.1" class="ltx_text">II-B</span> </span><span id="S2.SS2.6.2" class="ltx_text ltx_font_italic">The Federated Learning Smart Contract</span>
</h3>

<div id="S2.SS2.p1" class="ltx_para">
<p id="S2.SS2.p1.1" class="ltx_p">The FLSC has been implemented in Solidity.
The contract structure incorporates methods that align with the state phases depicted in Figure <a href="#S2.F1" title="Figure 1 ‚Ä£ II-A System Interaction Overview ‚Ä£ II System Architecture ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, i.e,¬†all messages involving the FLSC. It establishes four states for the FL process: OPEN, START, LEARNING, and CLOSE. These states guide the progression of the FL process, ensuring it adheres to predefined rules. This structured approach forces Collaborators to engage with the FLSC only when necessary. Furthermore, the phase definitions facilitate synchronization among all parties involved in FL, effectively addressing issues related to node failures. This implies that if a node fails or is late in transmitting the hash of its weights, the training process is not hindered, and weight updates proceed without considering the contribution of that particular node.</p>
</div>
<div id="S2.SS2.p2" class="ltx_para">
<p id="S2.SS2.p2.1" class="ltx_p">Collaborators are added to the contract during the initialization phase, allowing only authorized users to participate. Collaborators can be added by the contract owner, and their interactions are monitored throughout the FL process.
In Figure <a href="#S2.F1" title="Figure 1 ‚Ä£ II-A System Interaction Overview ‚Ä£ II System Architecture ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>, we highlight the view functions, which correspond to methods within the smart contract that do not alter the contract state. These functions do not involve gas consumption for their execution and provide read-only access to specific data or parameters.
The contract includes security measures to restrict unauthorized access and ensure that actions are carried out only by authorized users. During each round of the FL, Collaborators can perform specific actions only once, and the contract owner (Manager) has control over the FL process.
Finally, the contract emits events to signal state transitions during the FL process, providing transparency and auditability.</p>
</div>
</section>
<section id="S2.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S2.SS3.5.1.1" class="ltx_text">II-C</span> </span><span id="S2.SS3.6.2" class="ltx_text ltx_font_italic">On the Security and Reliability of the Protocol</span>
</h3>

<div id="S2.SS3.p1" class="ltx_para">
<p id="S2.SS3.p1.1" class="ltx_p">The protocol is designed to handle the possibility of Collaborators failures. However, it clearly assumes that the Manager cannot fail. The Manager is responsible for coordinating all activities, including sending messages to the FLSC, computing the updated weights, uploading the new values to IPFS, and notifying the Collaborators via smart contract calls, which in turn will emit events that the Collaborators can wait for.</p>
</div>
<div id="S2.SS3.p2" class="ltx_para">
<p id="S2.SS3.p2.1" class="ltx_p">The security of the protocol also relies on the Manager. Collaborators encrypt their weights using the Manager‚Äôs public key and their own private key. This ensures verifiability (i.e., anyone can verify that the message was generated by a specific Collaborator) and confidentiality (i.e., only the Manager can decrypt the values).</p>
</div>
<div id="S2.SS3.p3" class="ltx_para">
<p id="S2.SS3.p3.1" class="ltx_p">These aspects make the Manager a possible single point of failure for the system. If the Manager fails, no one can carry out the training phase, as no one can invoke the appropriate functions of the FLSC smart contract or decrypt the values.</p>
</div>
<div id="S2.SS3.p4" class="ltx_para">
<p id="S2.SS3.p4.1" class="ltx_p">This limitation can be addressed by adopting one of the classic consensus protocols in an asynchronous network for managing a primary node election <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite>. Any problems related to data encryption could be solved by using mechanisms that facilitate the use of encrypted decentralized file storage while enabling data sharing, such as key re-distribution techniques and multi-party computation <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>]</cite>.</p>
</div>
</section>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">III </span><span id="S3.1.1" class="ltx_text ltx_font_smallcaps">Experimental Evaluation</span>
</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.1" class="ltx_p">We performed an experimental analysis to evaluate, on one side, the performance of the FL system, based on different aggregation methods and system setting. We also varied the amount of total nodes involved in the FL, with the possibility of having node failures during the training process, so as to assess how these node failures impact the overall performance. On the other hand, we measured the gas fees of the smart contract system, based on the amount of involved nodes.</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS1.5.1.1" class="ltx_text">III-A</span> </span><span id="S3.SS1.6.2" class="ltx_text ltx_font_italic">The Federated Learning Model and Weight Update Methods</span>
</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.1" class="ltx_p">Collaborators used the same ML approach for classification, i.e., a three-layered, two-dimensional Convolutional Neural Network (CNN) model, coupled with a final fully connected layer at the end for the final classification of each image.
The models are trained with the same setup: an Adam optimizer, a learning rate set to 10e-3, batch size equal to 32, softmax as the last activation function.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">In this work, we used two specific FL weight update methods, inspired by <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>]</cite>. In few words, we will denote with <em id="S3.SS1.p2.1.1" class="ltx_emph ltx_font_italic">FedAvg</em> the classic approach that assumes that all Collaborators contribute equally and that the dataset is evenly distributed across all nodes. Thus, when weights need to be updated at the end of a loop iteration, the novel weight is just the average value of weights received from the Collaborators.
In this case, the classic cross-entropy is used as the loss function.</p>
</div>
<div id="S3.SS1.p3" class="ltx_para">
<p id="S3.SS1.p3.1" class="ltx_p">Federated Proximal (<em id="S3.SS1.p3.1.1" class="ltx_emph ltx_font_italic">FexProx</em>), instead, removes the uniformity assumption.
Proximal optimization involves adding a regularization term to the objective function to encourage specific properties (e.g., sparsity).
At the end of the FL iteration happened at timestep <math id="S3.SS1.p3.1.m1.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S3.SS1.p3.1.m1.1a"><mi id="S3.SS1.p3.1.m1.1.1" xref="S3.SS1.p3.1.m1.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.1.m1.1b"><ci id="S3.SS1.p3.1.m1.1.1.cmml" xref="S3.SS1.p3.1.m1.1.1">ùë°</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.1.m1.1c">t</annotation></semantics></math>, weights are updated locally in order to minimize a loss function of this form</p>
<table id="S3.Ex1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.Ex1.m1.2" class="ltx_Math" alttext="\arg\min\limits_{w}F(w)+\frac{\mu}{2}\|w-w^{t}\|_{2}^{2}," display="block"><semantics id="S3.Ex1.m1.2a"><mrow id="S3.Ex1.m1.2.2.1" xref="S3.Ex1.m1.2.2.1.1.cmml"><mrow id="S3.Ex1.m1.2.2.1.1" xref="S3.Ex1.m1.2.2.1.1.cmml"><mrow id="S3.Ex1.m1.2.2.1.1.3" xref="S3.Ex1.m1.2.2.1.1.3.cmml"><mrow id="S3.Ex1.m1.2.2.1.1.3.2" xref="S3.Ex1.m1.2.2.1.1.3.2.cmml"><mi id="S3.Ex1.m1.2.2.1.1.3.2.1" xref="S3.Ex1.m1.2.2.1.1.3.2.1.cmml">arg</mi><mo lspace="0.167em" id="S3.Ex1.m1.2.2.1.1.3.2a" xref="S3.Ex1.m1.2.2.1.1.3.2.cmml">‚Å°</mo><mrow id="S3.Ex1.m1.2.2.1.1.3.2.2" xref="S3.Ex1.m1.2.2.1.1.3.2.2.cmml"><munder id="S3.Ex1.m1.2.2.1.1.3.2.2.1" xref="S3.Ex1.m1.2.2.1.1.3.2.2.1.cmml"><mi id="S3.Ex1.m1.2.2.1.1.3.2.2.1.2" xref="S3.Ex1.m1.2.2.1.1.3.2.2.1.2.cmml">min</mi><mi id="S3.Ex1.m1.2.2.1.1.3.2.2.1.3" xref="S3.Ex1.m1.2.2.1.1.3.2.2.1.3.cmml">w</mi></munder><mo lspace="0.167em" id="S3.Ex1.m1.2.2.1.1.3.2.2a" xref="S3.Ex1.m1.2.2.1.1.3.2.2.cmml">‚Å°</mo><mi id="S3.Ex1.m1.2.2.1.1.3.2.2.2" xref="S3.Ex1.m1.2.2.1.1.3.2.2.2.cmml">F</mi></mrow></mrow><mo lspace="0em" rspace="0em" id="S3.Ex1.m1.2.2.1.1.3.1" xref="S3.Ex1.m1.2.2.1.1.3.1.cmml">‚Äã</mo><mrow id="S3.Ex1.m1.2.2.1.1.3.3.2" xref="S3.Ex1.m1.2.2.1.1.3.cmml"><mo stretchy="false" id="S3.Ex1.m1.2.2.1.1.3.3.2.1" xref="S3.Ex1.m1.2.2.1.1.3.cmml">(</mo><mi id="S3.Ex1.m1.1.1" xref="S3.Ex1.m1.1.1.cmml">w</mi><mo stretchy="false" id="S3.Ex1.m1.2.2.1.1.3.3.2.2" xref="S3.Ex1.m1.2.2.1.1.3.cmml">)</mo></mrow></mrow><mo id="S3.Ex1.m1.2.2.1.1.2" xref="S3.Ex1.m1.2.2.1.1.2.cmml">+</mo><mrow id="S3.Ex1.m1.2.2.1.1.1" xref="S3.Ex1.m1.2.2.1.1.1.cmml"><mfrac id="S3.Ex1.m1.2.2.1.1.1.3" xref="S3.Ex1.m1.2.2.1.1.1.3.cmml"><mi id="S3.Ex1.m1.2.2.1.1.1.3.2" xref="S3.Ex1.m1.2.2.1.1.1.3.2.cmml">Œº</mi><mn id="S3.Ex1.m1.2.2.1.1.1.3.3" xref="S3.Ex1.m1.2.2.1.1.1.3.3.cmml">2</mn></mfrac><mo lspace="0em" rspace="0em" id="S3.Ex1.m1.2.2.1.1.1.2" xref="S3.Ex1.m1.2.2.1.1.1.2.cmml">‚Äã</mo><msubsup id="S3.Ex1.m1.2.2.1.1.1.1" xref="S3.Ex1.m1.2.2.1.1.1.1.cmml"><mrow id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.2" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.2.1.cmml">‚Äñ</mo><mrow id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.cmml"><mi id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.2" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.2.cmml">w</mi><mo id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.1" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.1.cmml">‚àí</mo><msup id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.2" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.2.cmml">w</mi><mi id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.3" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.3.cmml">t</mi></msup></mrow><mo stretchy="false" id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.3" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.2.1.cmml">‚Äñ</mo></mrow><mn id="S3.Ex1.m1.2.2.1.1.1.1.1.3" xref="S3.Ex1.m1.2.2.1.1.1.1.1.3.cmml">2</mn><mn id="S3.Ex1.m1.2.2.1.1.1.1.3" xref="S3.Ex1.m1.2.2.1.1.1.1.3.cmml">2</mn></msubsup></mrow></mrow><mo id="S3.Ex1.m1.2.2.1.2" xref="S3.Ex1.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex1.m1.2b"><apply id="S3.Ex1.m1.2.2.1.1.cmml" xref="S3.Ex1.m1.2.2.1"><plus id="S3.Ex1.m1.2.2.1.1.2.cmml" xref="S3.Ex1.m1.2.2.1.1.2"></plus><apply id="S3.Ex1.m1.2.2.1.1.3.cmml" xref="S3.Ex1.m1.2.2.1.1.3"><times id="S3.Ex1.m1.2.2.1.1.3.1.cmml" xref="S3.Ex1.m1.2.2.1.1.3.1"></times><apply id="S3.Ex1.m1.2.2.1.1.3.2.cmml" xref="S3.Ex1.m1.2.2.1.1.3.2"><arg id="S3.Ex1.m1.2.2.1.1.3.2.1.cmml" xref="S3.Ex1.m1.2.2.1.1.3.2.1"></arg><apply id="S3.Ex1.m1.2.2.1.1.3.2.2.cmml" xref="S3.Ex1.m1.2.2.1.1.3.2.2"><apply id="S3.Ex1.m1.2.2.1.1.3.2.2.1.cmml" xref="S3.Ex1.m1.2.2.1.1.3.2.2.1"><csymbol cd="ambiguous" id="S3.Ex1.m1.2.2.1.1.3.2.2.1.1.cmml" xref="S3.Ex1.m1.2.2.1.1.3.2.2.1">subscript</csymbol><min id="S3.Ex1.m1.2.2.1.1.3.2.2.1.2.cmml" xref="S3.Ex1.m1.2.2.1.1.3.2.2.1.2"></min><ci id="S3.Ex1.m1.2.2.1.1.3.2.2.1.3.cmml" xref="S3.Ex1.m1.2.2.1.1.3.2.2.1.3">ùë§</ci></apply><ci id="S3.Ex1.m1.2.2.1.1.3.2.2.2.cmml" xref="S3.Ex1.m1.2.2.1.1.3.2.2.2">ùêπ</ci></apply></apply><ci id="S3.Ex1.m1.1.1.cmml" xref="S3.Ex1.m1.1.1">ùë§</ci></apply><apply id="S3.Ex1.m1.2.2.1.1.1.cmml" xref="S3.Ex1.m1.2.2.1.1.1"><times id="S3.Ex1.m1.2.2.1.1.1.2.cmml" xref="S3.Ex1.m1.2.2.1.1.1.2"></times><apply id="S3.Ex1.m1.2.2.1.1.1.3.cmml" xref="S3.Ex1.m1.2.2.1.1.1.3"><divide id="S3.Ex1.m1.2.2.1.1.1.3.1.cmml" xref="S3.Ex1.m1.2.2.1.1.1.3"></divide><ci id="S3.Ex1.m1.2.2.1.1.1.3.2.cmml" xref="S3.Ex1.m1.2.2.1.1.1.3.2">ùúá</ci><cn type="integer" id="S3.Ex1.m1.2.2.1.1.1.3.3.cmml" xref="S3.Ex1.m1.2.2.1.1.1.3.3">2</cn></apply><apply id="S3.Ex1.m1.2.2.1.1.1.1.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex1.m1.2.2.1.1.1.1.2.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1">superscript</csymbol><apply id="S3.Ex1.m1.2.2.1.1.1.1.1.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex1.m1.2.2.1.1.1.1.1.2.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1">subscript</csymbol><apply id="S3.Ex1.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.Ex1.m1.2.2.1.1.1.1.1.1.2.1.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.2">norm</csymbol><apply id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1"><minus id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.1"></minus><ci id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.2">ùë§</ci><apply id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3">superscript</csymbol><ci id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.2">ùë§</ci><ci id="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.1.1.1.3.3">ùë°</ci></apply></apply></apply><cn type="integer" id="S3.Ex1.m1.2.2.1.1.1.1.1.3.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.1.3">2</cn></apply><cn type="integer" id="S3.Ex1.m1.2.2.1.1.1.1.3.cmml" xref="S3.Ex1.m1.2.2.1.1.1.1.3">2</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex1.m1.2c">\arg\min\limits_{w}F(w)+\frac{\mu}{2}\|w-w^{t}\|_{2}^{2},</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p id="S3.SS1.p3.6" class="ltx_p">where <math id="S3.SS1.p3.2.m1.1" class="ltx_Math" alttext="F(w)" display="inline"><semantics id="S3.SS1.p3.2.m1.1a"><mrow id="S3.SS1.p3.2.m1.1.2" xref="S3.SS1.p3.2.m1.1.2.cmml"><mi id="S3.SS1.p3.2.m1.1.2.2" xref="S3.SS1.p3.2.m1.1.2.2.cmml">F</mi><mo lspace="0em" rspace="0em" id="S3.SS1.p3.2.m1.1.2.1" xref="S3.SS1.p3.2.m1.1.2.1.cmml">‚Äã</mo><mrow id="S3.SS1.p3.2.m1.1.2.3.2" xref="S3.SS1.p3.2.m1.1.2.cmml"><mo stretchy="false" id="S3.SS1.p3.2.m1.1.2.3.2.1" xref="S3.SS1.p3.2.m1.1.2.cmml">(</mo><mi id="S3.SS1.p3.2.m1.1.1" xref="S3.SS1.p3.2.m1.1.1.cmml">w</mi><mo stretchy="false" id="S3.SS1.p3.2.m1.1.2.3.2.2" xref="S3.SS1.p3.2.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.2.m1.1b"><apply id="S3.SS1.p3.2.m1.1.2.cmml" xref="S3.SS1.p3.2.m1.1.2"><times id="S3.SS1.p3.2.m1.1.2.1.cmml" xref="S3.SS1.p3.2.m1.1.2.1"></times><ci id="S3.SS1.p3.2.m1.1.2.2.cmml" xref="S3.SS1.p3.2.m1.1.2.2">ùêπ</ci><ci id="S3.SS1.p3.2.m1.1.1.cmml" xref="S3.SS1.p3.2.m1.1.1">ùë§</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.2.m1.1c">F(w)</annotation></semantics></math> represents the local loss function, <math id="S3.SS1.p3.3.m2.1" class="ltx_Math" alttext="w" display="inline"><semantics id="S3.SS1.p3.3.m2.1a"><mi id="S3.SS1.p3.3.m2.1.1" xref="S3.SS1.p3.3.m2.1.1.cmml">w</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.3.m2.1b"><ci id="S3.SS1.p3.3.m2.1.1.cmml" xref="S3.SS1.p3.3.m2.1.1">ùë§</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.3.m2.1c">w</annotation></semantics></math> denotes the local weights to be identified, and <math id="S3.SS1.p3.4.m3.1" class="ltx_Math" alttext="w^{t}" display="inline"><semantics id="S3.SS1.p3.4.m3.1a"><msup id="S3.SS1.p3.4.m3.1.1" xref="S3.SS1.p3.4.m3.1.1.cmml"><mi id="S3.SS1.p3.4.m3.1.1.2" xref="S3.SS1.p3.4.m3.1.1.2.cmml">w</mi><mi id="S3.SS1.p3.4.m3.1.1.3" xref="S3.SS1.p3.4.m3.1.1.3.cmml">t</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.4.m3.1b"><apply id="S3.SS1.p3.4.m3.1.1.cmml" xref="S3.SS1.p3.4.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.4.m3.1.1.1.cmml" xref="S3.SS1.p3.4.m3.1.1">superscript</csymbol><ci id="S3.SS1.p3.4.m3.1.1.2.cmml" xref="S3.SS1.p3.4.m3.1.1.2">ùë§</ci><ci id="S3.SS1.p3.4.m3.1.1.3.cmml" xref="S3.SS1.p3.4.m3.1.1.3">ùë°</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.4.m3.1c">w^{t}</annotation></semantics></math> signifies the global weights sent by the Manager at the beginning of timestep <math id="S3.SS1.p3.5.m4.1" class="ltx_Math" alttext="t" display="inline"><semantics id="S3.SS1.p3.5.m4.1a"><mi id="S3.SS1.p3.5.m4.1.1" xref="S3.SS1.p3.5.m4.1.1.cmml">t</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.5.m4.1b"><ci id="S3.SS1.p3.5.m4.1.1.cmml" xref="S3.SS1.p3.5.m4.1.1">ùë°</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.5.m4.1c">t</annotation></semantics></math>.
The Manager collects these weights coming from Collaborators, and then computes a novel version of these weights <math id="S3.SS1.p3.6.m5.1" class="ltx_Math" alttext="w^{t+1}" display="inline"><semantics id="S3.SS1.p3.6.m5.1a"><msup id="S3.SS1.p3.6.m5.1.1" xref="S3.SS1.p3.6.m5.1.1.cmml"><mi id="S3.SS1.p3.6.m5.1.1.2" xref="S3.SS1.p3.6.m5.1.1.2.cmml">w</mi><mrow id="S3.SS1.p3.6.m5.1.1.3" xref="S3.SS1.p3.6.m5.1.1.3.cmml"><mi id="S3.SS1.p3.6.m5.1.1.3.2" xref="S3.SS1.p3.6.m5.1.1.3.2.cmml">t</mi><mo id="S3.SS1.p3.6.m5.1.1.3.1" xref="S3.SS1.p3.6.m5.1.1.3.1.cmml">+</mo><mn id="S3.SS1.p3.6.m5.1.1.3.3" xref="S3.SS1.p3.6.m5.1.1.3.3.cmml">1</mn></mrow></msup><annotation-xml encoding="MathML-Content" id="S3.SS1.p3.6.m5.1b"><apply id="S3.SS1.p3.6.m5.1.1.cmml" xref="S3.SS1.p3.6.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p3.6.m5.1.1.1.cmml" xref="S3.SS1.p3.6.m5.1.1">superscript</csymbol><ci id="S3.SS1.p3.6.m5.1.1.2.cmml" xref="S3.SS1.p3.6.m5.1.1.2">ùë§</ci><apply id="S3.SS1.p3.6.m5.1.1.3.cmml" xref="S3.SS1.p3.6.m5.1.1.3"><plus id="S3.SS1.p3.6.m5.1.1.3.1.cmml" xref="S3.SS1.p3.6.m5.1.1.3.1"></plus><ci id="S3.SS1.p3.6.m5.1.1.3.2.cmml" xref="S3.SS1.p3.6.m5.1.1.3.2">ùë°</ci><cn type="integer" id="S3.SS1.p3.6.m5.1.1.3.3.cmml" xref="S3.SS1.p3.6.m5.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p3.6.m5.1c">w^{t+1}</annotation></semantics></math> by taking the average of the received values.</p>
</div>
<div id="S3.SS1.p4" class="ltx_para">
<p id="S3.SS1.p4.2" class="ltx_p">During our experiments, we tried with different values for the <math id="S3.SS1.p4.1.m1.1" class="ltx_Math" alttext="\mu" display="inline"><semantics id="S3.SS1.p4.1.m1.1a"><mi id="S3.SS1.p4.1.m1.1.1" xref="S3.SS1.p4.1.m1.1.1.cmml">Œº</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.1.m1.1b"><ci id="S3.SS1.p4.1.m1.1.1.cmml" xref="S3.SS1.p4.1.m1.1.1">ùúá</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.1.m1.1c">\mu</annotation></semantics></math> hyper-parameter, finding that after the tuning the best results were obtained with <math id="S3.SS1.p4.2.m2.1" class="ltx_Math" alttext="\mu=0.001" display="inline"><semantics id="S3.SS1.p4.2.m2.1a"><mrow id="S3.SS1.p4.2.m2.1.1" xref="S3.SS1.p4.2.m2.1.1.cmml"><mi id="S3.SS1.p4.2.m2.1.1.2" xref="S3.SS1.p4.2.m2.1.1.2.cmml">Œº</mi><mo id="S3.SS1.p4.2.m2.1.1.1" xref="S3.SS1.p4.2.m2.1.1.1.cmml">=</mo><mn id="S3.SS1.p4.2.m2.1.1.3" xref="S3.SS1.p4.2.m2.1.1.3.cmml">0.001</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS1.p4.2.m2.1b"><apply id="S3.SS1.p4.2.m2.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1"><eq id="S3.SS1.p4.2.m2.1.1.1.cmml" xref="S3.SS1.p4.2.m2.1.1.1"></eq><ci id="S3.SS1.p4.2.m2.1.1.2.cmml" xref="S3.SS1.p4.2.m2.1.1.2">ùúá</ci><cn type="float" id="S3.SS1.p4.2.m2.1.1.3.cmml" xref="S3.SS1.p4.2.m2.1.1.3">0.001</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p4.2.m2.1c">\mu=0.001</annotation></semantics></math>. Thus, we show results obtained according to this setting.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S3.SS2.5.1.1" class="ltx_text">III-B</span> </span><span id="S3.SS2.6.2" class="ltx_text ltx_font_italic">Brain Tumor Dataset</span>
</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.1" class="ltx_p">The dataset we employed during the tests is Brain Tumor MRI Dataset: https://www.kaggle.com/datasets/iashiqul/brain-tumor-mri-image-classification.
This dataset contains 7,022 human brain MRI images classified into four classes: glioma, meningioma, no tumor, and pituitary.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">IV </span><span id="S4.1.1" class="ltx_text ltx_font_smallcaps">Results</span>
</h2>

<div id="S4.p1" class="ltx_para">
<p id="S4.p1.1" class="ltx_p">The implemented system involves various technologies, i.e., i) FL techniques for the decentralized analysis of datasets, which are partitioned across multiple sources; ii) blockchain technologies, particularly the FLSC, to coordinate the training phases, iii) IPFS, used for the decentralized yet secure exchange of information, thanks to data encryption. To evaluate this type of system, it is thus necessary to consider its various aspects.
In this section, we show results obtained by using the FL system on the mentioned dataset related to image classification in healthcare, which is a typical use-case application for FL. Then, we will show the performance of the FLSC used to orchestrate the interaction among FL nodes <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>, <a href="#bib.bib15" title="" class="ltx_ref">15</a>, <a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>. Finally, we show also experimental results obtained for the weights retrieval and transmission to IPFS.</p>
</div>
<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS1.5.1.1" class="ltx_text">IV-A</span> </span><span id="S4.SS1.6.2" class="ltx_text ltx_font_italic">FL performance</span>
</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p id="S4.SS1.p1.1" class="ltx_p">Table <a href="#S4.T1" title="TABLE I ‚Ä£ IV-A FL performance ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">I</span></a> shows the averaged accuracy and F1 score obtained by the two FL aggregation techniques, against a centralized approach, i.e., the one that uses a classic ML, where the whole dataset is stored at a central node. In this case, er show results obtained in the best configuration, i.e., when the amount of employed Collaborators was equal to 5, with no failing nodes, together with the Manager (i.e., 6 nodes in total). Without any surprise, best results are obtained with the centralized approach. Having all the instances in the same data-store eases the training, and this leads to best results. However, we discussed already that in certain scenarios this is not possible. Thus, the centralized approach should be taken as an upper bound for the FL methods. In this respect, it is interesting to observe that the FL schemes perform quite well, especially FedAvg that is only 0.02 scores below centralized.</p>
</div>
<figure id="S4.T1" class="ltx_table">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T1.2.1.1" class="ltx_text" style="font-size:90%;">TABLE I</span>: </span><span id="S4.T1.3.2" class="ltx_text" style="font-size:90%;">Accuracy Results. Number of Collaborators = 5</span></figcaption>
<table id="S4.T1.4" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T1.4.1.1" class="ltx_tr">
<th id="S4.T1.4.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t"><span id="S4.T1.4.1.1.1.1" class="ltx_text ltx_font_bold">Agg. Method</span></th>
<th id="S4.T1.4.1.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S4.T1.4.1.1.2.1" class="ltx_text ltx_font_bold">Accuracy</span></th>
<th id="S4.T1.4.1.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S4.T1.4.1.1.3.1" class="ltx_text ltx_font_bold">F1_score</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T1.4.2.1" class="ltx_tr">
<td id="S4.T1.4.2.1.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">Centralized</td>
<td id="S4.T1.4.2.1.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">0.98</td>
<td id="S4.T1.4.2.1.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">0.98</td>
</tr>
<tr id="S4.T1.4.3.2" class="ltx_tr">
<td id="S4.T1.4.3.2.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t">FedAvg</td>
<td id="S4.T1.4.3.2.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">0.96</td>
<td id="S4.T1.4.3.2.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">0.96</td>
</tr>
<tr id="S4.T1.4.4.3" class="ltx_tr">
<td id="S4.T1.4.4.3.1" class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r ltx_border_t">FedProx</td>
<td id="S4.T1.4.4.3.2" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">0.96</td>
<td id="S4.T1.4.4.3.3" class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">0.95</td>
</tr>
</tbody>
</table>
</figure>
<figure id="S4.T2" class="ltx_table">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T2.2.1.1" class="ltx_text" style="font-size:90%;">TABLE II</span>: </span><span id="S4.T2.3.2" class="ltx_text" style="font-size:90%;">Classification results for FedAvg and FedProx. Number of Collaborators = 5. Accuracy FedAvg=0.96, FedProx=0.96</span></figcaption>
<table id="S4.T2.4" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T2.4.1.1" class="ltx_tr">
<th id="S4.T2.4.1.1.1" class="ltx_td ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t"></th>
<th id="S4.T2.4.1.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S4.T2.4.1.1.2.1" class="ltx_text ltx_font_bold">Precision</span></th>
<th id="S4.T2.4.1.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S4.T2.4.1.1.3.1" class="ltx_text ltx_font_bold">Recall</span></th>
<th id="S4.T2.4.1.1.4" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S4.T2.4.1.1.4.1" class="ltx_text ltx_font_bold">F1-score</span></th>
<th id="S4.T2.4.1.1.5" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S4.T2.4.1.1.5.1" class="ltx_text ltx_font_bold">Support</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T2.4.2.1" class="ltx_tr">
<td id="S4.T2.4.2.1.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_t"><span id="S4.T2.4.2.1.1.1" class="ltx_text ltx_font_bold">Glioma</span></td>
<td id="S4.T2.4.2.1.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">0.99 / 0.94</td>
<td id="S4.T2.4.2.1.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">0.90 / 0.94</td>
<td id="S4.T2.4.2.1.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">0.94 / 0.94</td>
<td id="S4.T2.4.2.1.5" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">299</td>
</tr>
<tr id="S4.T2.4.3.2" class="ltx_tr">
<td id="S4.T2.4.3.2.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r"><span id="S4.T2.4.3.2.1.1" class="ltx_text ltx_font_bold">Meningioma</span></td>
<td id="S4.T2.4.3.2.2" class="ltx_td ltx_align_left ltx_border_r">0.89 / 0.92</td>
<td id="S4.T2.4.3.2.3" class="ltx_td ltx_align_left ltx_border_r">0.95 / 0.90</td>
<td id="S4.T2.4.3.2.4" class="ltx_td ltx_align_left ltx_border_r">0.92 / 0.91</td>
<td id="S4.T2.4.3.2.5" class="ltx_td ltx_align_left ltx_border_r">301</td>
</tr>
<tr id="S4.T2.4.4.3" class="ltx_tr">
<td id="S4.T2.4.4.3.1" class="ltx_td ltx_align_left ltx_border_l ltx_border_r"><span id="S4.T2.4.4.3.1.1" class="ltx_text ltx_font_bold">Notumor</span></td>
<td id="S4.T2.4.4.3.2" class="ltx_td ltx_align_left ltx_border_r">0.98 / 0.98</td>
<td id="S4.T2.4.4.3.3" class="ltx_td ltx_align_left ltx_border_r">0.99 / 0.99</td>
<td id="S4.T2.4.4.3.4" class="ltx_td ltx_align_left ltx_border_r">0.99 / 0.98</td>
<td id="S4.T2.4.4.3.5" class="ltx_td ltx_align_left ltx_border_r">381</td>
</tr>
<tr id="S4.T2.4.5.4" class="ltx_tr">
<td id="S4.T2.4.5.4.1" class="ltx_td ltx_align_left ltx_border_b ltx_border_l ltx_border_r"><span id="S4.T2.4.5.4.1.1" class="ltx_text ltx_font_bold">Pituitary</span></td>
<td id="S4.T2.4.5.4.2" class="ltx_td ltx_align_left ltx_border_b ltx_border_r">0.98 / 0.98</td>
<td id="S4.T2.4.5.4.3" class="ltx_td ltx_align_left ltx_border_b ltx_border_r">0.99 / 0.99</td>
<td id="S4.T2.4.5.4.4" class="ltx_td ltx_align_left ltx_border_b ltx_border_r">0.99 / 0.99</td>
<td id="S4.T2.4.5.4.5" class="ltx_td ltx_align_left ltx_border_b ltx_border_r">300</td>
</tr>
</tbody>
</table>
</figure>
<div id="S4.SS1.p2" class="ltx_para">
<p id="S4.SS1.p2.1" class="ltx_p">Table <a href="#S4.T2" title="TABLE II ‚Ä£ IV-A FL performance ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">II</span></a> shows FL results related to each class.
In each cell, the first value corresponds to FedAvg and the second value corresponds to FedProx.
Both methods seem to perform well, with FedAvg which is slightly superior to FedProx in terms of F1 score.</p>
</div>
<figure id="S4.F2" class="ltx_figure">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S4.F2.sf1" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2407.06862/assets/fedAvg_ROC_5nodes_0OFB.png" id="S4.F2.sf1.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="538" height="426" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F2.sf1.2.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S4.F2.sf1.3.2" class="ltx_text" style="font-size:90%;">FedAvg</span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S4.F2.sf2" class="ltx_figure ltx_figure_panel ltx_align_center"><img src="/html/2407.06862/assets/fedProx_ROC_5nodes_0OFB.png" id="S4.F2.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="538" height="426" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F2.sf2.2.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S4.F2.sf2.3.2" class="ltx_text" style="font-size:90%;">FedProx</span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F2.2.1.1" class="ltx_text" style="font-size:90%;">Figure 2</span>: </span><span id="S4.F2.3.2" class="ltx_text" style="font-size:90%;">ROC curves for Brain Tumor dataset. Number of Collaborators = 5</span></figcaption>
</figure>
<div id="S4.SS1.p3" class="ltx_para">
<p id="S4.SS1.p3.1" class="ltx_p">Figure <a href="#S4.F2" title="Figure 2 ‚Ä£ IV-A FL performance ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a> shows the ROC curves for both aggregation schemes, FedAvg (left chart) and FedProx (right chart). Each chart shows a different curve for each class of the dataset. The AUC values are reported as well in the legend, for each class. It is possible to appreciate how both schemes are able to obtain very good performance.</p>
</div>
<figure id="S4.F3" class="ltx_figure"><img src="/html/2407.06862/assets/brain_num_nodes.png" id="S4.F3.g1" class="ltx_graphics ltx_centering ltx_img_square" width="538" height="449" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F3.2.1.1" class="ltx_text" style="font-size:90%;">Figure 3</span>: </span><span id="S4.F3.3.2" class="ltx_text" style="font-size:90%;">Accuracy and F1 score performances with a varying number of Collaborators</span></figcaption>
</figure>
<div id="S4.SS1.p4" class="ltx_para">
<p id="S4.SS1.p4.1" class="ltx_p">Figure<a href="#S4.F3" title="Figure 3 ‚Ä£ IV-A FL performance ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a> shows the accuracy and F1 score, for both the aggregation methods, when different numbers of Collaborators are used. We can notice that FedAvg remains mostly stable, while FedProx has a decrement when the number of collaborators is equal to 10. This is a result that needs some further evaluation, but that is probably due to the limited size of the dataset. In fact, when we increase the number of Collaborators, the dataset is split into multiple parts and, evidently, not all Collaborators are able to improve the overall performance.</p>
</div>
<figure id="S4.F4" class="ltx_figure"><img src="/html/2407.06862/assets/brain_failing_nodes.png" id="S4.F4.g1" class="ltx_graphics ltx_centering ltx_img_square" width="538" height="449" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F4.2.1.1" class="ltx_text" style="font-size:90%;">Figure 4</span>: </span><span id="S4.F4.3.2" class="ltx_text" style="font-size:90%;">Accuracy and F1 score performances with node failures</span></figcaption>
</figure>
<div id="S4.SS1.p5" class="ltx_para">
<p id="S4.SS1.p5.1" class="ltx_p">Figure <a href="#S4.F4" title="Figure 4 ‚Ä£ IV-A FL performance ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> reports both the accuracy and F1 score as a function of the number of failing nodes, when the total amount of involved nodes (active and inactive) was equal to 20 Collaborators (plus the Manager). Both aggregation methods, FedProx and FedAvg, are reported. Accuracy and F1 scores of each method change as the number of failing nodes increases.
In general, the trend is that, as expected, as the number of failing nodes increases, the performance decreases. This is due to the fact that part of the whole dataset was distributed among nodes (also failed ones) and the loss of the contribution of certain collaborators affects the training.
It is worth pointing out that we obtained similar results for other settings with different number of nodes in the system (not shown here for the sake of space limits).</p>
</div>
<div id="S4.SS1.p6" class="ltx_para">
<p id="S4.SS1.p6.1" class="ltx_p">Overall, results show that for this dataset the two compared approaches behave quite similarly in terms of performance, hence confirming the effectiveness of using FL in the healthcare sector. They highlight the influence of node failures and the importance of being able to transparently assess the correct execution of the protocol.</p>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS2.5.1.1" class="ltx_text">IV-B</span> </span><span id="S4.SS2.6.2" class="ltx_text ltx_font_italic">Federated Learning Smart Contract Gas Consumption</span>
</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">In this section, we show the gas consumption analysis for the smart contract that governs the interactions in the FL system. Due to space limitations, we will show only results related to system settings with no node failures.</p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p id="S4.SS2.p2.1" class="ltx_p">Table <a href="#S4.T3" title="TABLE III ‚Ä£ IV-B Federated Learning Smart Contract Gas Consumption ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">III</span></a> shows the gas fee consumption for the <em id="S4.SS2.p2.1.1" class="ltx_emph ltx_font_italic">send_weights_hash()</em> , i.e., the only non-view function in FLSC called by Collaborators. Results show a low level of dispersion, since the standard deviation is relatively small compared to the mean. This outcome was indeed expected, since with this function a Collaborator registers in the smart contract a hash of the weights it just uploaded to IPFS. Thus, it basically sends a fixed length datum.</p>
</div>
<figure id="S4.T3" class="ltx_table">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T3.3.1.1" class="ltx_text" style="font-size:90%;">TABLE III</span>: </span><span id="S4.T3.4.2" class="ltx_text" style="font-size:90%;">Collaborators fee statistics for <em id="S4.T3.4.2.1" class="ltx_emph ltx_font_italic">send_weights_hash()</em> function</span></figcaption>
<table id="S4.T3.5" class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T3.5.1.1" class="ltx_tr">
<th id="S4.T3.5.1.1.1" class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_l ltx_border_r ltx_border_t"></th>
<th id="S4.T3.5.1.1.2" class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S4.T3.5.1.1.2.1" class="ltx_text ltx_font_bold">gas consumed</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T3.5.2.1" class="ltx_tr">
<th id="S4.T3.5.2.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r ltx_border_t"><span id="S4.T3.5.2.1.1.1" class="ltx_text ltx_font_bold">mean</span></th>
<td id="S4.T3.5.2.1.2" class="ltx_td ltx_align_right ltx_border_r ltx_border_t">1390385.00</td>
</tr>
<tr id="S4.T3.5.3.2" class="ltx_tr">
<th id="S4.T3.5.3.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r"><span id="S4.T3.5.3.2.1.1" class="ltx_text ltx_font_bold">std</span></th>
<td id="S4.T3.5.3.2.2" class="ltx_td ltx_align_right ltx_border_r">88532.56</td>
</tr>
<tr id="S4.T3.5.4.3" class="ltx_tr">
<th id="S4.T3.5.4.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r"><span id="S4.T3.5.4.3.1.1" class="ltx_text ltx_font_bold">median</span></th>
<td id="S4.T3.5.4.3.2" class="ltx_td ltx_align_right ltx_border_r">1376425.00</td>
</tr>
<tr id="S4.T3.5.5.4" class="ltx_tr">
<th id="S4.T3.5.5.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r"><span id="S4.T3.5.5.4.1.1" class="ltx_text ltx_font_bold">min</span></th>
<td id="S4.T3.5.5.4.2" class="ltx_td ltx_align_right ltx_border_r">1285740.00</td>
</tr>
<tr id="S4.T3.5.6.5" class="ltx_tr">
<th id="S4.T3.5.6.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r"><span id="S4.T3.5.6.5.1.1" class="ltx_text ltx_font_bold">25%</span></th>
<td id="S4.T3.5.6.5.2" class="ltx_td ltx_align_right ltx_border_r">1331082.50</td>
</tr>
<tr id="S4.T3.5.7.6" class="ltx_tr">
<th id="S4.T3.5.7.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r"><span id="S4.T3.5.7.6.1.1" class="ltx_text ltx_font_bold">50%</span></th>
<td id="S4.T3.5.7.6.2" class="ltx_td ltx_align_right ltx_border_r">1376425.00</td>
</tr>
<tr id="S4.T3.5.8.7" class="ltx_tr">
<th id="S4.T3.5.8.7.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_l ltx_border_r"><span id="S4.T3.5.8.7.1.1" class="ltx_text ltx_font_bold">75%</span></th>
<td id="S4.T3.5.8.7.2" class="ltx_td ltx_align_right ltx_border_r">1426507.50</td>
</tr>
<tr id="S4.T3.5.9.8" class="ltx_tr">
<th id="S4.T3.5.9.8.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_l ltx_border_r"><span id="S4.T3.5.9.8.1.1" class="ltx_text ltx_font_bold">max</span></th>
<td id="S4.T3.5.9.8.2" class="ltx_td ltx_align_right ltx_border_b ltx_border_r">1559830.00</td>
</tr>
</tbody>
</table>
</figure>
<figure id="S4.F5" class="ltx_figure"><img src="/html/2407.06862/assets/manager_fees.png" id="S4.F5.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="538" height="358" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F5.2.1.1" class="ltx_text" style="font-size:90%;">Figure 5</span>: </span><span id="S4.F5.3.2" class="ltx_text" style="font-size:90%;">Manager: Gas Fees Incurred</span></figcaption>
</figure>
<div id="S4.SS2.p3" class="ltx_para">
<p id="S4.SS2.p3.1" class="ltx_p">Figure <a href="#S4.F5" title="Figure 5 ‚Ä£ IV-B Federated Learning Smart Contract Gas Consumption ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a> shows gas fees for different methods called by the Manager as a function of the number of Collaborators involved in the FL system.
Each line represents a different method.
From the chart, it is possible to observe how the gas fees increase linearly with the amount of nodes in the system, with the exception of <em id="S4.SS2.p3.1.1" class="ltx_emph ltx_font_italic">send_model</em>, that clearly does not depend on this variable. The cost for the deployment of the contract was <math id="S4.SS2.p3.1.m1.1" class="ltx_Math" alttext="2151147" display="inline"><semantics id="S4.SS2.p3.1.m1.1a"><mn id="S4.SS2.p3.1.m1.1.1" xref="S4.SS2.p3.1.m1.1.1.cmml">2151147</mn><annotation-xml encoding="MathML-Content" id="S4.SS2.p3.1.m1.1b"><cn type="integer" id="S4.SS2.p3.1.m1.1.1.cmml" xref="S4.SS2.p3.1.m1.1.1">2151147</cn></annotation-xml><annotation encoding="application/x-tex" id="S4.SS2.p3.1.m1.1c">2151147</annotation></semantics></math> gas.
These results confirm the viability of the approach, especially if we assume that the number of Collaborators involved in a FL system is limited and does not require continuous updates to the set of participants. In this latter scenario, maybe some optimization techniques might be necessary.</p>
</div>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection"><span id="S4.SS3.5.1.1" class="ltx_text">IV-C</span> </span><span id="S4.SS3.6.2" class="ltx_text ltx_font_italic">IPFS Delays</span>
</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p id="S4.SS3.p1.1" class="ltx_p">Figures <a href="#S4.F6" title="Figure 6 ‚Ä£ IV-C IPFS Delays ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a> and <a href="#S4.F7" title="Figure 7 ‚Ä£ IV-C IPFS Delays ‚Ä£ IV Results ‚Ä£ Trust and Resilience in Federated Learning Through Smart Contracts Enabled Decentralized Systems" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a> show the average times required for the Manager and the Collaborators respectively, to perform essential actions related to updating weights on the Inter-Planetary File System (IPFS). Specifically, we examine the time taken to send (referred to as ‚ÄúAdd Operation‚Äù) and retrieve (referred to as ‚ÄúCat Operation‚Äù) the updated weights.
The figures display both the averages and standard deviations of the measurements collected. Each individual configuration was repeated 10 times. In each run, the total number of participating nodes was the sum of the Manager and the Collaborators, the number of which is indicated in the chart. The execution spanned 10 rounds of the FL protocol.
In this context, since the metrics measured were related to the transmission of weights to IPFS, all nodes were run on a single server with the following technical specifications: Intel(R) Core(TM) i7-8565U CPU (1.80 GHz - 1.99 GHz), 16.0 GB RAM, and a symmetrical bandwidth connection of 433/433 Mbps.</p>
</div>
<div id="S4.SS3.p2" class="ltx_para">
<p id="S4.SS3.p2.1" class="ltx_p">Figures show that, as expected, delays are comparable for both the Manager and Collaborators. This consistency arises since the amount of data to be sent or received is the same, i.e., the data comprises a set of numerical values representing the weights of the employed Convolutional Neural Network (CNN). Moreover, the time to retrieve the novel weights was slightly higher than sending them. Finally, average times do not significantly vary based on the amount of involved Collaborators, since the amount of data to be retrieved for each Collaborator remains constant. There are differences in average values and standard deviations, that are emphasized in the charts only because of the limited scale of the y-axis. But in the end, results do not show significant differences.</p>
</div>
<div id="S4.SS3.p3" class="ltx_para">
<p id="S4.SS3.p3.1" class="ltx_p">In summary, however, our measurements confirm that there is a non-negligible time overhead associated with coordinating FL activities.
Indeed, at the end of each round every Collaborator has to upload its weights to IPFS, compute and send the related hash value to the smart contract, and wait for an smart contract event, so as to retrieve the hash from the smart contract and the weights from IPFS. In the middle of this round step, the Manager has to retrieve all the hashes related to each Collaborator from the smart contract, retrieve all the weights of all the Collaborators, compute the average and upload the updated weights on IPFS. Given the measured times, depending on the number of Collaborators this upload phase requires some tens of seconds.</p>
</div>
<div id="S4.SS3.p4" class="ltx_para">
<p id="S4.SS3.p4.1" class="ltx_p">It is important to notice that we observed consistent performance on IPFS even in the event of node failures. Clearly enough, this process remains independent of other nodes, relying solely on the interaction with IPFS.
For this reason and for the sake of brevity, we thus omit these results.</p>
</div>
<figure id="S4.F6" class="ltx_figure"><img src="/html/2407.06862/assets/manager_IPFS.png" id="S4.F6.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="538" height="426" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F6.2.1.1" class="ltx_text" style="font-size:90%;">Figure 6</span>: </span><span id="S4.F6.3.2" class="ltx_text" style="font-size:90%;">Manager: IPFS delays based on the number of Collaborators</span></figcaption>
</figure>
<figure id="S4.F7" class="ltx_figure"><img src="/html/2407.06862/assets/collaborators_IPFS.png" id="S4.F7.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="538" height="426" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S4.F7.2.1.1" class="ltx_text" style="font-size:90%;">Figure 7</span>: </span><span id="S4.F7.3.2" class="ltx_text" style="font-size:90%;">Collaborators: IPFS delays based on the number of Collaborators</span></figcaption>
</figure>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">V </span><span id="S5.1.1" class="ltx_text ltx_font_smallcaps">Conclusions</span>
</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">In this study, we presented a Federated Learning (FL) system that is based on the use of blockchain technology, aiming for a secure and coordinated approach to data management. The design of the framework is centered around data privacy protection, where it exchanges encrypted model parameters instead of sensitive data. This system integrates the Inter-Planetary File System (IPFS) and smart contracts to create a secure, unalterable data storage infrastructure, thereby enhancing data security during FL operations.
The viability of our proposal is confirmed by the results from our validation and tests.</p>
</div>
<div id="S5.p2" class="ltx_para">
<p id="S5.p2.1" class="ltx_p">The complete code for the project can be accessed here: https://github.com/LorenzoCassano/Blockchain-FederatedLearning/tree/main.</p>
</div>
</section>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_font_smallcaps ltx_title_section">Acknowledgements</h2>

<div id="Sx1.p1" class="ltx_para">
<p id="Sx1.p1.1" class="ltx_p">This work has been partially funded by the European Union - NextGenerationEU within the framework of PNRR Mission 4 - Component 2 - Investment 1.1 under the Italian Ministry of University and Research (MUR) programme ‚ÄùPRIN 2022‚Äù - grant number 2022N2NH42 - SmartShires - CUP: H53D23003570006</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock">
J.¬†Wen, Z.¬†Zhang, Y.¬†Lan, Z.¬†Cui, J.¬†Cai, and W.¬†Zhang, ‚ÄúA survey on federated learning: challenges and applications,‚Äù <em id="bib.bib1.1.1" class="ltx_emph ltx_font_italic">International Journal of Machine Learning and Cybernetics</em>, vol.¬†14, no.¬†2, pp. 513‚Äì535, 2023.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock">
M.¬†R. Behera, S.¬†Upadhyay, and S.¬†Shetty, ‚ÄúFederated learning using smart contracts on blockchains, based on reward driven approach,‚Äù <em id="bib.bib2.1.1" class="ltx_emph ltx_font_italic">ArXiv</em>, vol. abs/2107.10243, 2021.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock">
A.¬†Qammar, A.¬†Karim, H.¬†Ning, and J.¬†Ding, ‚ÄúSecuring federated learning with blockchain: a systematic literature review,‚Äù <em id="bib.bib3.1.1" class="ltx_emph ltx_font_italic">Artificial Intelligence Review</em>, vol.¬†56, pp. 3951‚Äì3985, 2023.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock">
Y.¬†Qu, M.¬†P. Uddin, C.¬†Gan, Y.¬†Xiang, L.¬†Gao, and J.¬†Yearwood, ‚ÄúBlockchain-enabled federated learning: A survey,‚Äù <em id="bib.bib4.1.1" class="ltx_emph ltx_font_italic">ACM Comput. Surv.</em>, vol.¬†55, no.¬†4, nov 2022.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock">
X.¬†Bao, C.¬†Su, Y.¬†Xiong, W.¬†Huang, and Y.¬†Hu, ‚ÄúFlchain: A blockchain for auditable federated learning with trust and incentive,‚Äù in <em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">5th Int. Conf. on Big Data Computing and Communications (BIGCOM)</em>, 2019, pp. 151‚Äì159.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock">
F.¬†Imboccioli, G.¬†Cialone, and S.¬†Ferretti, ‚ÄúDecentralization of learning and trust in healthcare: Blockchain-driven federated learning for alzheimer‚Äôs mri image classification,‚Äù in <em id="bib.bib6.1.1" class="ltx_emph ltx_font_italic">Proc. of the IEEE PerCom Workshops</em>.¬†¬†¬†Biarritz, France: IEEE, March 2024.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock">
M.¬†Zichichi, S.¬†Ferretti, and G.¬†D‚ÄôAngelo, ‚ÄúOn the efficiency of decentralized file storage for personal information management systems,‚Äù in <em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">Proceedings of the IEEE Symposium on Computers and Communications</em>.¬†¬†¬†IEEE, July 2020.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock">
T.¬†L. et¬†al., ‚ÄúFederated optimization in heterogeneous networks,‚Äù in <em id="bib.bib8.1.1" class="ltx_emph ltx_font_italic">Proc. of Machine Learning and Systems 2020, MLSys 2020, March 2020</em>.¬†¬†¬†mlsys.org, 2020. [Online]. Available: <a target="_blank" href="https://proceedings.mlsys.org/book/316.pdf" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://proceedings.mlsys.org/book/316.pdf</a>

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock">
G.¬†Bigini, M.¬†Zichichi, E.¬†Lattanzi, S.¬†Ferretti, and G.¬†D‚ÄôAngelo, ‚ÄúDecentralized health data distribution: A dlt-based architecture for data protection,‚Äù 2022, Conference paper, p. 97 ‚Äì 104.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock">
L.¬†Serena, G.¬†D‚ÄôAngelo, and S.¬†Ferretti, ‚ÄúSecurity analysis of distributed ledgers and blockchains through agent-based simulation,‚Äù <em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">Simulation Modelling Practice and Theory</em>, vol. 114, 2022.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock">
M.¬†Zichichi, S.¬†Ferretti, G.¬†D‚ÄôAngelo, and V.¬†Rodr√≠guez-Doncel, ‚ÄúData governance through a multi-dlt architecture in view of the gdpr,‚Äù <em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">Cluster Computing</em>, pp. 1‚Äì32, 2022.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock">
F.¬†Barb√†ra, M.¬†Zichichi, S.¬†Ferretti, and C.¬†Schifanella, ‚ÄúDlt-based personal data access control with key-redistribution,‚Äù 2023, p. 166 ‚Äì 173.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock">
M.¬†Pease, R.¬†Shostak, and L.¬†Lamport, ‚ÄúReaching agreement in the presence of faults,‚Äù <em id="bib.bib13.1.1" class="ltx_emph ltx_font_italic">J. ACM</em>, vol.¬†27, no.¬†2, p. 228‚Äì234, apr 1980. [Online]. Available: <a target="_blank" href="https://doi.org/10.1145/322186.322188" title="" class="ltx_ref ltx_url ltx_font_typewriter">https://doi.org/10.1145/322186.322188</a>

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock">
K.¬†K. Coelho, M.¬†Nogueira, A.¬†B. Vieira, E.¬†F. Silva, and J.¬†A.¬†M. Nacif, ‚ÄúA survey on federated learning for security and privacy in healthcare applications,‚Äù <em id="bib.bib14.1.1" class="ltx_emph ltx_font_italic">Computer Communications</em>, vol. 207, pp. 113‚Äì127, 2023.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock">
R.¬†S. Antunes, C.¬†Andr√©¬†da Costa, A.¬†K√ºderle, I.¬†A. Yari, and B.¬†Eskofier, ‚ÄúFederated learning for healthcare: Systematic review and architecture proposal,‚Äù <em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">ACM Trans. Intell. Syst. Technol.</em>, vol.¬†13, 2022.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock">
T.S. Brisimi et al., ‚ÄúFederated learning of predictive models from federated electronic health records,‚Äù <em id="bib.bib16.1.1" class="ltx_emph ltx_font_italic">International Journal of Medical Informatics</em>, vol. 112, pp. 59‚Äì67, 2018.

</span>
</li>
</ul>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2407.06861" class="ar5iv-nav-button ar5iv-nav-button-prev">‚óÑ</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2407.06862" class="ar5iv-text-button ar5iv-severity-ok">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2407.06862">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2407.06862" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2407.06863" class="ar5iv-nav-button ar5iv-nav-button-next">‚ñ∫</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Mon Aug  5 17:39:34 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "√ó";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
