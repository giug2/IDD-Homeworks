<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering</title>
<!--Generated on Wed Sep 11 15:09:53 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<base href="/html/2409.07331v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx1" title="In Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx2" title="In Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Related Work</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx2.SSx1" title="In Related Work ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Multimodal Large Language Models</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx2.SSx2" title="In Related Work ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Knowledge-based Visual Question Answering</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx2.SSx3" title="In Related Work ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Prompt Compression</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx3" title="In Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Methods</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx3.SSx1" title="In Methods ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Problem Setup</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx3.SSx2" title="In Methods ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Our Proposed Framework: RACC</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx3.SSx2.SSSx1" title="In Our Proposed Framework: RACC ‣ Methods ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Learning to compress contexts by the hyperMLLM.</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx3.SSx2.SSSx2" title="In Our Proposed Framework: RACC ‣ Methods ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Learning to aggregate the compressed contexts</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx3.SSx2.SSSx3" title="In Our Proposed Framework: RACC ‣ Methods ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Modulating the baseMLLM with aggregated prompts</span></a></li>
</ol>
</li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4" title="In Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.SSx1" title="In Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Datasets and Knowledge Sources</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.SSx2" title="In Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Training Setup</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.SSx3" title="In Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Evaluation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.SSx4" title="In Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Comparative Study</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.SSx5" title="In Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Ablation Studies</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.SSx6" title="In Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Broad Applicability of RACC</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx5" title="In Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_title">Conclusion</span></a></li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Learning to Compress Contexts for 
<br class="ltx_break"/>Efficient Knowledge-based Visual Question Answering</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
Weixi Weng<sup class="ltx_sup" id="id1.1.id1">1</sup>,
Jieming Zhu<sup class="ltx_sup" id="id2.2.id2">2</sup>,
Hao Zhang<sup class="ltx_sup" id="id3.3.id3">2</sup>,
Xiaojun Meng<sup class="ltx_sup" id="id4.4.id4">2</sup>,
Rui Zhang<sup class="ltx_sup" id="id5.5.id5">3</sup>,
Chun Yuan<sup class="ltx_sup" id="id6.6.id6">1</sup>
</span></span>
</div>
<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p" id="id7.id1">Multimodal Large Language Models (MLLMs) have demonstrated great zero-shot performance on visual question answering (VQA). However, when it comes to knowledge-based VQA (KB-VQA), MLLMs may lack human commonsense or specialized domain knowledge to answer such questions and require obtaining necessary information from external knowledge sources. Previous works like Retrival-Augmented VQA-v2 (RAVQA-v2) focus on utilizing as much input information, such as image-based textual descriptions and retrieved knowledge, as possible to improve performance, but they all overlook the issue that with the number of input tokens increasing, inference efficiency significantly decreases, which contradicts the demands of practical applications.
To address this issue, we propose <span class="ltx_text ltx_font_bold" id="id7.id1.1">R</span>etrieval-<span class="ltx_text ltx_font_bold" id="id7.id1.2">A</span>ugmented MLLM with <span class="ltx_text ltx_font_bold" id="id7.id1.3">C</span>ompressed <span class="ltx_text ltx_font_bold" id="id7.id1.4">C</span>ontexts (RACC).
RACC learns to compress and aggregate retrieved contexts, from which it generates a compact modulation in the form of Key-Value (KV) cache. This modulation is then used to adapt the downstream frozen MLLM, thereby achieving effective and efficient inference.
RACC achieves a state-of-the-art (SOTA) performance of 62.9% on OK-VQA. Moreover, it significantly reduces inference latency by 22.0%-59.7% compared to the prominent RAVQA-v2.
Abundant experiments show RACC’s broad applicability. It is compatible with various off-the-shelf MLLMs and can also handle different knowledge sources including textual and multimodal documents.</p>
</div>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Introduction</h2>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">Multimodal Large Language Models (MLLMs) have attracted wide research attention, demonstrating great zero-shot performances among various visual question answering (VQA) datasets.
However, in practical applications, generating accurate answers to specific questions necessitates not just a precise grasp of image content, but also human commonsense or domain-specific knowledge. This category of VQA tasks is known as knowledge-based VQA (KB-VQA). Given that knowledge parameterized within MLLMs is static and limited, utilizing an external knowledge source to furnish necessary information to MLLMs emerges as a dependable strategy for addressing KB-VQA challenges.</p>
</div>
<div class="ltx_para" id="Sx1.p2">
<p class="ltx_p" id="Sx1.p2.5">In previous studies of KB-VQA, a line of works <cite class="ltx_cite ltx_citemacro_citep">(Hu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib10" title="">2023a</a>; Khademi et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib14" title="">2023</a>; An et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib2" title="">2024</a>)</cite> obtains knowledge from very large MLLMs (GPT-4) or LLMs (ChatGPT, GPT-3) that have been pretrained on extensive corpora. However, the static knowledge in these models can be out-of-date and potentially lead to unreliable knowledge due to hallucinations, particularly in specific domains.
Another line of research retrieves knowledge from external knowledge sources, such as knowledge graphs <cite class="ltx_cite ltx_citemacro_citep">(Speer, Chin, and Havasi <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib30" title="">2017</a>)</cite>, documents <cite class="ltx_cite ltx_citemacro_citep">(Luo et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib21" title="">2021</a>)</cite> <em class="ltx_emph ltx_font_italic" id="Sx1.p2.5.1">etc.</em>, which are cheaper, more reliable and up-to-date, better aligning with the needs of real-world applications. Retrieval Augmented VQA-v2 (RAVQA-v2)
represents a significant advancement in this kind of approach, where it concatenates <math alttext="K" class="ltx_Math" display="inline" id="Sx1.p2.1.m1.1"><semantics id="Sx1.p2.1.m1.1a"><mi id="Sx1.p2.1.m1.1.1" xref="Sx1.p2.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx1.p2.1.m1.1b"><ci id="Sx1.p2.1.m1.1.1.cmml" xref="Sx1.p2.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx1.p2.1.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx1.p2.1.m1.1d">italic_K</annotation></semantics></math> retrieved documents with each image-question pair and puts them into MLLMs to generate <math alttext="K" class="ltx_Math" display="inline" id="Sx1.p2.2.m2.1"><semantics id="Sx1.p2.2.m2.1a"><mi id="Sx1.p2.2.m2.1.1" xref="Sx1.p2.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx1.p2.2.m2.1b"><ci id="Sx1.p2.2.m2.1.1.cmml" xref="Sx1.p2.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx1.p2.2.m2.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx1.p2.2.m2.1d">italic_K</annotation></semantics></math> candidate answers.
RAVQA-v2 tackles the KB-VQA problem by performing straightforward retrieval-augmented generation (RAG) on MLLMs. However, it has a notable drawback, <em class="ltx_emph ltx_font_italic" id="Sx1.p2.5.2">i.e.</em>
low efficiency during inference. In the inference process of RAVQA-v2, <math alttext="K" class="ltx_Math" display="inline" id="Sx1.p2.3.m3.1"><semantics id="Sx1.p2.3.m3.1a"><mi id="Sx1.p2.3.m3.1.1" xref="Sx1.p2.3.m3.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx1.p2.3.m3.1b"><ci id="Sx1.p2.3.m3.1.1.cmml" xref="Sx1.p2.3.m3.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx1.p2.3.m3.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx1.p2.3.m3.1d">italic_K</annotation></semantics></math> candidate answers are initially generated based on <math alttext="K" class="ltx_Math" display="inline" id="Sx1.p2.4.m4.1"><semantics id="Sx1.p2.4.m4.1a"><mi id="Sx1.p2.4.m4.1.1" xref="Sx1.p2.4.m4.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx1.p2.4.m4.1b"><ci id="Sx1.p2.4.m4.1.1.cmml" xref="Sx1.p2.4.m4.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx1.p2.4.m4.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx1.p2.4.m4.1d">italic_K</annotation></semantics></math> retrieved documents, and the final answer is then selected from the <math alttext="K" class="ltx_Math" display="inline" id="Sx1.p2.5.m5.1"><semantics id="Sx1.p2.5.m5.1a"><mi id="Sx1.p2.5.m5.1.1" xref="Sx1.p2.5.m5.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx1.p2.5.m5.1b"><ci id="Sx1.p2.5.m5.1.1.cmml" xref="Sx1.p2.5.m5.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx1.p2.5.m5.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx1.p2.5.m5.1d">italic_K</annotation></semantics></math> candidates by their joint probabilities, which is undoubtedly very time-consuming and resource-intensive. Moreover, the retrieved documents can be quite long and often contain a lot of redundant information, which can further exacerbate the problem of low inference efficiency.</p>
</div>
<div class="ltx_para" id="Sx1.p3">
<p class="ltx_p" id="Sx1.p3.1">However, inference efficiency is a key concern in practical applications of MLLMs. Previous KB-VQA works have consistently focused on how to use as much knowledge as possible to improve performance, but they have overlooked the issue that inference efficiency significantly declines as the number of input tokens increases.</p>
</div>
<div class="ltx_para" id="Sx1.p4">
<p class="ltx_p" id="Sx1.p4.1">Therefore, in this work, we aim to propose a new RAG framework based on MLLMs, which can utilize the information of retrieved contexts in an effective and efficient manner to improve MLLMs’ inference efficiency for KB-VQA.</p>
</div>
<div class="ltx_para" id="Sx1.p5">
<p class="ltx_p" id="Sx1.p5.1">Furthermore, RAVQA-v2 and many previous works <cite class="ltx_cite ltx_citemacro_citep">(Luo et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib21" title="">2021</a>; Lin and Byrne <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib16" title="">2022</a>; Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib19" title="">2022</a>)</cite> on KB-VQA primarily focus on using textual documents as external knowledge sources, and there has been relatively less research on using multimodal documents as external knowledge sources.
However, multimodal documents are a common and important knowledge resource in real-world applications, and <cite class="ltx_cite ltx_citemacro_citet">Hu et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib11" title="">2023b</a>)</cite> demonstrates that leveraging information from multimodal documents can provide knowledge for models like T5 <cite class="ltx_cite ltx_citemacro_citep">(Raffel et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib27" title="">2020</a>)</cite> in handling KB-VQA tasks. More importantly, MLLMs inherently have the ability to directly comprehend multimodal knowledge, and we believe that exploring the effects of multimodal documents in RAG applications based on MLLMs is of significant importance. However, this area remains unexplored. We hope that our proposed framework can effectively utilize the inherent capabilities of MLLMs to employ both textual and multimodal documents as knowledge sources in a unified, effective, and efficient manner, thereby enhancing the KB-VQA performance of MLLMs.</p>
</div>
<div class="ltx_para" id="Sx1.p6">
<p class="ltx_p" id="Sx1.p6.1">Therefore, in this paper, we propose RACC, <em class="ltx_emph ltx_font_italic" id="Sx1.p6.1.1">i.e.</em> <span class="ltx_text ltx_font_bold" id="Sx1.p6.1.2">R</span>etrieval-<span class="ltx_text ltx_font_bold" id="Sx1.p6.1.3">A</span>ugmented MLLMs with <span class="ltx_text ltx_font_bold" id="Sx1.p6.1.4">C</span>ompressed <span class="ltx_text ltx_font_bold" id="Sx1.p6.1.5">C</span>ontexts, an effective and efficient RAG framework for KB-VQA based on MLLMs. Our proposed framework first leverages a frozen hyperMLLM to learn to compress retrieved documents into short soft prompts. Then, we design an elaborate aggregator module to aggregate compressed prompts. Finally, a set of Multi-Layer Perceptrons (MLPs) is used to generate a compact modulation in the form of Key-Value (KV) cache to adapt the downstream frozen baseMLLM. With the compact modulation, the baseMLLM can utilize the information in the retrieved documents in a highly efficient manner. Our contributions can be summarized as follows:</p>
<ul class="ltx_itemize" id="Sx1.I1">
<li class="ltx_item" id="Sx1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="Sx1.I1.i1.p1">
<p class="ltx_p" id="Sx1.I1.i1.p1.1">RACC achieves excellent performance comparable to many competitive baselines on two KB-VQA datasets at a very low cost, reaching a state-of-the-art (SOTA) performance of 62.9% on the OK-VQA dataset.</p>
</div>
</li>
<li class="ltx_item" id="Sx1.I1.i2" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="Sx1.I1.i2.p1">
<p class="ltx_p" id="Sx1.I1.i2.p1.1">We are the first to explore how to perform retrieval-augmented generation on MLLMs in a highly efficient manner. For time efficiency, RACC can save 22.0-59.7% of inference latency compared to RAVQA-v2. For space efficiency, RACC supports pre-saving documents that occupy a large storage footprint in the form of compressed prompts to save disk space.</p>
</div>
</li>
<li class="ltx_item" id="Sx1.I1.i3" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="Sx1.I1.i3.p1">
<p class="ltx_p" id="Sx1.I1.i3.p1.1">Furthermore, abundant experiments demonstrate that RACC can be applied to various off-the-shelf MLLMs, but also can handle different knowledge sources such as textual documents and multimodal documents.</p>
</div>
</li>
</ul>
</div>
<figure class="ltx_figure" id="Sx1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="490" id="Sx1.F1.g1" src="x1.png" width="842"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>
The structural framework of RACC.</figcaption>
</figure>
</section>
<section class="ltx_section" id="Sx2">
<h2 class="ltx_title ltx_title_section">Related Work</h2>
<section class="ltx_subsection" id="Sx2.SSx1">
<h3 class="ltx_title ltx_title_subsection">Multimodal Large Language Models</h3>
<div class="ltx_para" id="Sx2.SSx1.p1">
<p class="ltx_p" id="Sx2.SSx1.p1.1">Multimodal Large Language Models (MLLMs) bridge the gap between text modality and other modalities and unifies the understanding of different modalities. Although recent MLLMs <cite class="ltx_cite ltx_citemacro_citep">(Alayrac et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib1" title="">2022</a>; Li et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib15" title="">2023</a>; Dai et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib5" title="">2023</a>; Bai et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib3" title="">2023</a>; Liu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib20" title="">2023</a>; Hu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib9" title="">2024</a>)</cite> have demonstrated excellent zero-shot performance on VQA tasks, they need the assistance of external knowledge sources for questions that require specialized domain knowledge to answer. In this work, we investigate MLLMs of two mainstream architectures: the encoder-decoder MLLMs including BLIP2-FlanT5XL <cite class="ltx_cite ltx_citemacro_citep">(Li et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib15" title="">2023</a>)</cite> and InstructBLIP-FlanT5XL <cite class="ltx_cite ltx_citemacro_citep">(Dai et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib5" title="">2023</a>)</cite>, and the decoder-only models InstructBLIP-Vicuna7B and miniCPM-v2 <cite class="ltx_cite ltx_citemacro_citep">(Hu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib9" title="">2024</a>)</cite>.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx2.SSx2">
<h3 class="ltx_title ltx_title_subsection">Knowledge-based Visual Question Answering</h3>
<div class="ltx_para" id="Sx2.SSx2.p1">
<p class="ltx_p" id="Sx2.SSx2.p1.1">KB-VQA is a task that has received a lot of attention in the current era, aiming to use external knowledge to answer image-based questions.</p>
</div>
<div class="ltx_para" id="Sx2.SSx2.p2">
<p class="ltx_p" id="Sx2.SSx2.p2.1">Early KB-VQA works <cite class="ltx_cite ltx_citemacro_citep">(Luo et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib21" title="">2021</a>; Marino et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib22" title="">2021</a>)</cite> train specialized models with designated knowledge sources such as knowledge graphs (ConceptNet-<cite class="ltx_cite ltx_citemacro_citet">Speer, Chin, and Havasi <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib30" title="">2017</a></cite>), textual document sources (Google Search-<cite class="ltx_cite ltx_citemacro_citet">Luo et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib21" title="">2021</a></cite>; WikiData-<cite class="ltx_cite ltx_citemacro_citet">Vrandečić and Krötzsch <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib35" title="">2014</a></cite>), images sources (Google Image Search), <em class="ltx_emph ltx_font_italic" id="Sx2.SSx2.p2.1.1">etc.</em>. However, these methods often demonstrate limited performance.</p>
</div>
<div class="ltx_para" id="Sx2.SSx2.p3">
<p class="ltx_p" id="Sx2.SSx2.p3.1">With the emergence of pretrained large language models (LLMs), they have become a focus of research in this field. A series of works utilize very large LLMs like GPT-3 to generate auxiliary knowledge or directly answer the questions <cite class="ltx_cite ltx_citemacro_citep">(Gui et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib8" title="">2021</a>; Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib19" title="">2022</a>; Yang et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib39" title="">2022</a>; Shao et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib29" title="">2023</a>; Hu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib10" title="">2023a</a>)</cite>, achieving performance breakthroughs.
Due to the high costs associated with using very large LLMs like GPT-3, and the fact that the knowledge within them can be outdated and incorrect, another line of work focuses on how to conduct retrieval-augmented generation (RAG) on smaller LLMs with various external knowledge bases for KB-VQA <cite class="ltx_cite ltx_citemacro_citep">(Gui et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib8" title="">2021</a>; Gao et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib7" title="">2022</a>; Lin and Byrne <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib16" title="">2022</a>; Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite>. REVEAL <cite class="ltx_cite ltx_citemacro_citep">(Hu et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib11" title="">2023b</a>)</cite> designs a complex pipeline that utilizes a ViT encoder <cite class="ltx_cite ltx_citemacro_citep">(Dosovitskiy et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib6" title="">2020</a>)</cite> and a T5 encoder <cite class="ltx_cite ltx_citemacro_citep">(Raffel et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib27" title="">2020</a>)</cite> to extract information from multimodal knowledge sources and generates answers by a T5 decoder, which requires extensive pre-training to learn how to utilize multimodal knowledge. However, methods based on LLMs all face the same problem: they often require converting provided images into textual descriptions such as captions and object tags so that LLMs can understand <cite class="ltx_cite ltx_citemacro_citep">(Gui et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib8" title="">2021</a>; Gao et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib7" title="">2022</a>; Shao et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib29" title="">2023</a>; Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite>, which may result in loss of critical visual information in the images but also significantly increases the number of input tokens, leading to a notable rise in inference latency.</p>
</div>
<div class="ltx_para" id="Sx2.SSx2.p4">
<p class="ltx_p" id="Sx2.SSx2.p4.1">With the advent of multimodal large language models (MLLMs), the aforementioned problems have been perfectly resolved. Recent works have made new progress by utilizing MLLMs. A line of works proposes to combine MLLMs and LLMs together <cite class="ltx_cite ltx_citemacro_citep">(Khademi et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib14" title="">2023</a>; Xenos et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib37" title="">2023</a>; An et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib2" title="">2024</a>)</cite>. MM-Reasoner <cite class="ltx_cite ltx_citemacro_citep">(Khademi et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib14" title="">2023</a>)</cite> leverages vision APIs and rationales generated by GPT-4 to fine-tune MLLMs such as Flamingo. RAVQA-v2 <cite class="ltx_cite ltx_citemacro_citep">(Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite> builds a simple RAG framework on top of pure MLLMs. However, as mentioned earlier, it suffers from low efficiency during the inference stage.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx2.SSx3">
<h3 class="ltx_title ltx_title_subsection">Prompt Compression</h3>
<div class="ltx_para" id="Sx2.SSx3.p1">
<p class="ltx_p" id="Sx2.SSx3.p1.1">Given the inherent redundancy in natural language, prompt compression methods have been extensively studied to improve the efficiency of LLM inference. Prompt compression can be categorized into task-aware and task-agnostic methods. Since the generation of compressed prompts that perform well across diverse tasks is particularly challenging, we focus on the task-aware prompt compression paradigm. An important line of work <cite class="ltx_cite ltx_citemacro_citet">Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib12" title="">2023a</a>); Pan et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib25" title="">2024</a>); Jiang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib13" title="">2023b</a>)</cite> estimates the importance of the tokens within the original prompts by the information-based metric <em class="ltx_emph ltx_font_italic" id="Sx2.SSx3.p1.1.1">etc.</em> and removes redundant tokens. <cite class="ltx_cite ltx_citemacro_citet">Xu, Shi, and Choi (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib38" title="">2024</a>)</cite> trains a compressor model, which cuts redundant tokens in the passage based on the question.</p>
</div>
<div class="ltx_para" id="Sx2.SSx3.p2">
<p class="ltx_p" id="Sx2.SSx3.p2.1">In addition to the above methods, which detect and remove inherent redundant tokens in long contexts at the natural language level, a series of works aims at compressing long contexts into parameters, leveraging the capability of LLMs to implicitly eliminate redundant information within long contexts.
<cite class="ltx_cite ltx_citemacro_citet">Mu, Li, and Goodman (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib24" title="">2024</a>)</cite> supposes that each prompt is composed of a task instruction part and a content part, and finetunes LLMs to compress the task instruction part into several gist tokens. <cite class="ltx_cite ltx_citemacro_citet">Chevalier et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib4" title="">2023</a>); Wang, Ma, and Cai (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib36" title="">2024</a>); Tack et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib32" title="">2024</a>)</cite> learns to compress long contexts into compact summary vectors, parameters of a Lora-module and KV Cache, respectively.</p>
</div>
<figure class="ltx_table" id="Sx2.T1">
<table class="ltx_tabular ltx_centering ltx_align_middle" id="Sx2.T1.1">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx2.T1.1.1.1">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.1.1.1">Model</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.1.1.2">Image-base Textual Description</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.1.1.3">Base Model</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.1.1.4">knowledge source</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx2.T1.1.1.1.5">VQA Accuracy</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.2.2">
<td class="ltx_td ltx_align_left ltx_border_t" colspan="5" id="Sx2.T1.1.2.2.1"><span class="ltx_text ltx_font_italic" id="Sx2.T1.1.2.2.1.1">Specialized baselines</span></td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.3.3">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.3.3.1">KRISP</td>
<td class="ltx_td ltx_border_r ltx_border_t" id="Sx2.T1.1.3.3.2"></td>
<td class="ltx_td ltx_border_r ltx_border_t" id="Sx2.T1.1.3.3.3"></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.3.3.4">C</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx2.T1.1.3.3.5">38.35</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.4.4">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.4.4.1">VRR</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.4.4.2">Caption</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.4.4.3"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.4.4.4">GS</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.4.4.5">45.08</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.5.5">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.5.5.1">MALI</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.5.5.2"></td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.5.5.3"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.5.5.4">miniGPT4 + C</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.5.5.5">56.69</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.6.6">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.6.6.1">REVIVE</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.6.6.2">Caption + Object Tags</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.6.6.3"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.6.6.4">WD + GPT-3</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.6.6.5">58.00</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.7.7">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.7.7.1">REVEAL</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.7.7.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.7.7.3">T5-Large</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.7.7.4">WIT + CC + WD + V2</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.7.7.5">59.10</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.8.8">
<td class="ltx_td ltx_align_left ltx_border_t" colspan="5" id="Sx2.T1.1.8.8.1"><span class="ltx_text ltx_font_italic" id="Sx2.T1.1.8.8.1.1">Baselines on LLMs</span></td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.9.9">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.9.9.1">KAT</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.9.9.2">Caption + Object Tags</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.9.9.3">T5-large</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.9.9.4">W</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx2.T1.1.9.9.5">44.25</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.10.10">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.10.10.1">KGenVQA</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.10.10.2">Caption</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.10.10.3">UnifiedQA</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.10.10.4">PNP</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.10.10.5">45.40</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.11.11">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.11.11.1">PICa</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.11.11.2">Caption + Object Tags</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.11.11.3">GPT-3</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.11.11.4"></td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.11.11.5">48.00</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.12.12">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.12.12.1">RA-VQA</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.12.12.2">OCR + Caption + Object Tags</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.12.12.3">T5-large</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.12.12.4">GS</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.12.12.5">51.22</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.13.13">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.13.13.1">KAT-Ensemble</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.13.13.2">Caption + Object Tags</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.13.13.3">T5-large</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.13.13.4">W + GPT-3</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.13.13.5">54.41</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.14.14">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.14.14.1">RA-VQAv2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.14.14.2">OCR + Caption + Object Tags</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.14.14.3">T5-large</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.14.14.4">GS</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.14.14.5">54.85</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.15.15">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.15.15.1">Prophet</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.15.15.2">Caption</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.15.15.3">GPT-3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.15.15.4">MCAN</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.15.15.5">58.27</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.16.16">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.16.16.1">PromptCap</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.16.16.2">Caption</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.16.16.3">GPT-3</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.16.16.4">ICE (16)</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.16.16.5">60.40</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.17.17">
<td class="ltx_td ltx_align_left ltx_border_t" colspan="5" id="Sx2.T1.1.17.17.1"><span class="ltx_text ltx_font_italic" id="Sx2.T1.1.17.17.1.1">Baselines based on MLLMs</span></td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.18.18">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.18.18.1">PaLI</td>
<td class="ltx_td ltx_border_r ltx_border_t" id="Sx2.T1.1.18.18.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.18.18.3">PaLI-15B</td>
<td class="ltx_td ltx_border_r ltx_border_t" id="Sx2.T1.1.18.18.4"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx2.T1.1.18.18.5">56.50</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.19.19">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.19.19.1">Flamingo</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.19.19.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.19.19.3">Flamingo</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.19.19.4"></td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.19.19.5">57.80</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.20.20">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.20.20.1">BLIP2</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.20.20.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.20.20.3">BLIP2-FlanT5XL</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.20.20.4"></td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.20.20.5">31.76</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.21.21">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.21.21.1">RA-VQAv2</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.21.21.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.21.21.3">BLIP2-FlanT5XL</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.21.21.4">GS</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.21.21.5">60.40</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.22.22">
<td class="ltx_td ltx_align_left ltx_border_t" colspan="5" id="Sx2.T1.1.22.22.1"><span class="ltx_text ltx_font_italic" id="Sx2.T1.1.22.22.1.1">Baselines based on both LLMs and MLLMs</span></td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.23.23">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.23.23.1">MM-Reasoner</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.23.23.2">OCR + Caption + Object Tags…</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.23.23.3">Flamingo</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.23.23.4">GPT-4</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx2.T1.1.23.23.5">59.20</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.24.24">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.24.24.1">ASB</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.24.24.2">Caption</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.24.24.3">LLAMA-2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.24.24.4">PNP + ICE (14)</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.24.24.5">59.07</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.25.25">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.25.25.1">DKA</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.25.25.2">Caption</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.25.25.3">LLAMA-2</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.25.25.4">PNP + ChatGPT + ICE (14)</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.25.25.5">62.10</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.26.26">
<td class="ltx_td ltx_align_left ltx_border_t" colspan="5" id="Sx2.T1.1.26.26.1"><span class="ltx_text ltx_font_italic" id="Sx2.T1.1.26.26.1.1">Our proposed framework based on MLLMs</span></td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.27.27">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.27.27.1">RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.1.27.27.1.1">homo</span>
</td>
<td class="ltx_td ltx_border_r ltx_border_t" id="Sx2.T1.1.27.27.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.27.27.3">BLIP2-FlanT5XL</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx2.T1.1.27.27.4">WIT</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx2.T1.1.27.27.5">55.07</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.28.28">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.28.28.1">RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.1.28.28.1.1">homo</span>
</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.28.28.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.28.28.3">InstructBLIP-FlanT5XL</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.28.28.4">WIT</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.28.28.5">59.17</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.29.29">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.29.29.1">RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.1.29.29.1.1">homo</span>
</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.29.29.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.29.29.3">BLIP2-FlanT5XL</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.29.29.4">GS</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.29.29.5">55.26</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.30.30">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.30.30.1">RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.1.30.30.1.1">homo</span>
</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.30.30.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.30.30.3">InstructBLIP-FlanT5XL</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.30.30.4">GS</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.30.30.5">59.49</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.31.31">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.31.31.1">RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.1.31.31.1.1">hetero</span>
</td>
<td class="ltx_td ltx_border_r" id="Sx2.T1.1.31.31.2"></td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.31.31.3">BLIP2-Vicuna7B</td>
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx2.T1.1.31.31.4">GS</td>
<td class="ltx_td ltx_align_center" id="Sx2.T1.1.31.31.5">60.67</td>
</tr>
<tr class="ltx_tr" id="Sx2.T1.1.32.32">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="Sx2.T1.1.32.32.1">RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.1.32.32.1.1">hetero</span>
</td>
<td class="ltx_td ltx_border_b ltx_border_r" id="Sx2.T1.1.32.32.2"></td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="Sx2.T1.1.32.32.3">InstructBLIP-Vicuna7B</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="Sx2.T1.1.32.32.4">GS</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx2.T1.1.32.32.5"><span class="ltx_text ltx_font_bold" id="Sx2.T1.1.32.32.5.1">62.91</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>Model Performance on the OK-VQA dataset. Knowledge source abbreviations: C: ConceptNet; CC: CC12M; V2: VQA-2; W: Wikipedia; WD: WikiData; WIT: Wikipedia Image-Text; GS: Google Search; GI: Google Images; ICE: In-context Examples; PNP: Plug-and-Play VQA captioner <cite class="ltx_cite ltx_citemacro_citep">(Tiong et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib33" title="">2022</a>)</cite>. In RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.5.1">homo</span>, the hyperMLLM and baseMLLM share the same structures and weights, while in RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.6.2">hetero</span>, they differ in either structure or weights. In the last two rows of results of the RACC-<span class="ltx_text ltx_font_typewriter" id="Sx2.T1.7.3">hetero</span>, the hyperMLLM used is InstructBLIP-FlanT5XL. </figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="Sx3">
<h2 class="ltx_title ltx_title_section">Methods</h2>
<section class="ltx_subsection" id="Sx3.SSx1">
<h3 class="ltx_title ltx_title_subsection">Problem Setup</h3>
<div class="ltx_para" id="Sx3.SSx1.p1">
<p class="ltx_p" id="Sx3.SSx1.p1.1">A typical VQA dataset can be divided into three components: images, questions, and answers, which can be represented using the notation <math alttext="\{v,q,a\}_{n}" class="ltx_Math" display="inline" id="Sx3.SSx1.p1.1.m1.3"><semantics id="Sx3.SSx1.p1.1.m1.3a"><msub id="Sx3.SSx1.p1.1.m1.3.4" xref="Sx3.SSx1.p1.1.m1.3.4.cmml"><mrow id="Sx3.SSx1.p1.1.m1.3.4.2.2" xref="Sx3.SSx1.p1.1.m1.3.4.2.1.cmml"><mo id="Sx3.SSx1.p1.1.m1.3.4.2.2.1" stretchy="false" xref="Sx3.SSx1.p1.1.m1.3.4.2.1.cmml">{</mo><mi id="Sx3.SSx1.p1.1.m1.1.1" xref="Sx3.SSx1.p1.1.m1.1.1.cmml">v</mi><mo id="Sx3.SSx1.p1.1.m1.3.4.2.2.2" xref="Sx3.SSx1.p1.1.m1.3.4.2.1.cmml">,</mo><mi id="Sx3.SSx1.p1.1.m1.2.2" xref="Sx3.SSx1.p1.1.m1.2.2.cmml">q</mi><mo id="Sx3.SSx1.p1.1.m1.3.4.2.2.3" xref="Sx3.SSx1.p1.1.m1.3.4.2.1.cmml">,</mo><mi id="Sx3.SSx1.p1.1.m1.3.3" xref="Sx3.SSx1.p1.1.m1.3.3.cmml">a</mi><mo id="Sx3.SSx1.p1.1.m1.3.4.2.2.4" stretchy="false" xref="Sx3.SSx1.p1.1.m1.3.4.2.1.cmml">}</mo></mrow><mi id="Sx3.SSx1.p1.1.m1.3.4.3" xref="Sx3.SSx1.p1.1.m1.3.4.3.cmml">n</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p1.1.m1.3b"><apply id="Sx3.SSx1.p1.1.m1.3.4.cmml" xref="Sx3.SSx1.p1.1.m1.3.4"><csymbol cd="ambiguous" id="Sx3.SSx1.p1.1.m1.3.4.1.cmml" xref="Sx3.SSx1.p1.1.m1.3.4">subscript</csymbol><set id="Sx3.SSx1.p1.1.m1.3.4.2.1.cmml" xref="Sx3.SSx1.p1.1.m1.3.4.2.2"><ci id="Sx3.SSx1.p1.1.m1.1.1.cmml" xref="Sx3.SSx1.p1.1.m1.1.1">𝑣</ci><ci id="Sx3.SSx1.p1.1.m1.2.2.cmml" xref="Sx3.SSx1.p1.1.m1.2.2">𝑞</ci><ci id="Sx3.SSx1.p1.1.m1.3.3.cmml" xref="Sx3.SSx1.p1.1.m1.3.3">𝑎</ci></set><ci id="Sx3.SSx1.p1.1.m1.3.4.3.cmml" xref="Sx3.SSx1.p1.1.m1.3.4.3">𝑛</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p1.1.m1.3c">\{v,q,a\}_{n}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p1.1.m1.3d">{ italic_v , italic_q , italic_a } start_POSTSUBSCRIPT italic_n end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="Sx3.SSx1.p2">
<p class="ltx_p" id="Sx3.SSx1.p2.2">Following <cite class="ltx_cite ltx_citemacro_citep">(Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite>, we consider a realistic scenario of KB-VQA: an MLLM that takes an image <math alttext="v_{i}" class="ltx_Math" display="inline" id="Sx3.SSx1.p2.1.m1.1"><semantics id="Sx3.SSx1.p2.1.m1.1a"><msub id="Sx3.SSx1.p2.1.m1.1.1" xref="Sx3.SSx1.p2.1.m1.1.1.cmml"><mi id="Sx3.SSx1.p2.1.m1.1.1.2" xref="Sx3.SSx1.p2.1.m1.1.1.2.cmml">v</mi><mi id="Sx3.SSx1.p2.1.m1.1.1.3" xref="Sx3.SSx1.p2.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p2.1.m1.1b"><apply id="Sx3.SSx1.p2.1.m1.1.1.cmml" xref="Sx3.SSx1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p2.1.m1.1.1.1.cmml" xref="Sx3.SSx1.p2.1.m1.1.1">subscript</csymbol><ci id="Sx3.SSx1.p2.1.m1.1.1.2.cmml" xref="Sx3.SSx1.p2.1.m1.1.1.2">𝑣</ci><ci id="Sx3.SSx1.p2.1.m1.1.1.3.cmml" xref="Sx3.SSx1.p2.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p2.1.m1.1c">v_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p2.1.m1.1d">italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and its related question <math alttext="q_{i}" class="ltx_Math" display="inline" id="Sx3.SSx1.p2.2.m2.1"><semantics id="Sx3.SSx1.p2.2.m2.1a"><msub id="Sx3.SSx1.p2.2.m2.1.1" xref="Sx3.SSx1.p2.2.m2.1.1.cmml"><mi id="Sx3.SSx1.p2.2.m2.1.1.2" xref="Sx3.SSx1.p2.2.m2.1.1.2.cmml">q</mi><mi id="Sx3.SSx1.p2.2.m2.1.1.3" xref="Sx3.SSx1.p2.2.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p2.2.m2.1b"><apply id="Sx3.SSx1.p2.2.m2.1.1.cmml" xref="Sx3.SSx1.p2.2.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p2.2.m2.1.1.1.cmml" xref="Sx3.SSx1.p2.2.m2.1.1">subscript</csymbol><ci id="Sx3.SSx1.p2.2.m2.1.1.2.cmml" xref="Sx3.SSx1.p2.2.m2.1.1.2">𝑞</ci><ci id="Sx3.SSx1.p2.2.m2.1.1.3.cmml" xref="Sx3.SSx1.p2.2.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p2.2.m2.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p2.2.m2.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> as input, where the knowledge required to answer the question is supplied by external knowledge sources.
In this paper, we study two common and essential knowledge sources in real-world applications: documents, including multimodal documents and textual documents.</p>
</div>
<div class="ltx_para" id="Sx3.SSx1.p3">
<p class="ltx_p" id="Sx3.SSx1.p3.6">We utilize an off-the-shelf frozen multimodal retriever to retrieve <math alttext="K" class="ltx_Math" display="inline" id="Sx3.SSx1.p3.1.m1.1"><semantics id="Sx3.SSx1.p3.1.m1.1a"><mi id="Sx3.SSx1.p3.1.m1.1.1" xref="Sx3.SSx1.p3.1.m1.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p3.1.m1.1b"><ci id="Sx3.SSx1.p3.1.m1.1.1.cmml" xref="Sx3.SSx1.p3.1.m1.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p3.1.m1.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p3.1.m1.1d">italic_K</annotation></semantics></math> documents from the given knowledge source conditioned on the provided image and question. The <math alttext="K" class="ltx_Math" display="inline" id="Sx3.SSx1.p3.2.m2.1"><semantics id="Sx3.SSx1.p3.2.m2.1a"><mi id="Sx3.SSx1.p3.2.m2.1.1" xref="Sx3.SSx1.p3.2.m2.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p3.2.m2.1b"><ci id="Sx3.SSx1.p3.2.m2.1.1.cmml" xref="Sx3.SSx1.p3.2.m2.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p3.2.m2.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p3.2.m2.1d">italic_K</annotation></semantics></math> retrieved documents is denoted as <math alttext="\{d_{i}\}^{K}=\{d^{1}_{i},d^{2}_{i},\ldots,d^{K}_{i}\}" class="ltx_Math" display="inline" id="Sx3.SSx1.p3.3.m3.5"><semantics id="Sx3.SSx1.p3.3.m3.5a"><mrow id="Sx3.SSx1.p3.3.m3.5.5" xref="Sx3.SSx1.p3.3.m3.5.5.cmml"><msup id="Sx3.SSx1.p3.3.m3.2.2.1" xref="Sx3.SSx1.p3.3.m3.2.2.1.cmml"><mrow id="Sx3.SSx1.p3.3.m3.2.2.1.1.1" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.2.cmml"><mo id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.2" stretchy="false" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.2.cmml">{</mo><msub id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.cmml"><mi id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.2" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.2.cmml">d</mi><mi id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.3" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.3" stretchy="false" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.2.cmml">}</mo></mrow><mi id="Sx3.SSx1.p3.3.m3.2.2.1.3" xref="Sx3.SSx1.p3.3.m3.2.2.1.3.cmml">K</mi></msup><mo id="Sx3.SSx1.p3.3.m3.5.5.5" xref="Sx3.SSx1.p3.3.m3.5.5.5.cmml">=</mo><mrow id="Sx3.SSx1.p3.3.m3.5.5.4.3" xref="Sx3.SSx1.p3.3.m3.5.5.4.4.cmml"><mo id="Sx3.SSx1.p3.3.m3.5.5.4.3.4" stretchy="false" xref="Sx3.SSx1.p3.3.m3.5.5.4.4.cmml">{</mo><msubsup id="Sx3.SSx1.p3.3.m3.3.3.2.1.1" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1.cmml"><mi id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.2" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.2.cmml">d</mi><mi id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.3" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1.3.cmml">i</mi><mn id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.3" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.3.cmml">1</mn></msubsup><mo id="Sx3.SSx1.p3.3.m3.5.5.4.3.5" xref="Sx3.SSx1.p3.3.m3.5.5.4.4.cmml">,</mo><msubsup id="Sx3.SSx1.p3.3.m3.4.4.3.2.2" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2.cmml"><mi id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.2" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.2.cmml">d</mi><mi id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.3" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2.3.cmml">i</mi><mn id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.3" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.3.cmml">2</mn></msubsup><mo id="Sx3.SSx1.p3.3.m3.5.5.4.3.6" xref="Sx3.SSx1.p3.3.m3.5.5.4.4.cmml">,</mo><mi id="Sx3.SSx1.p3.3.m3.1.1" mathvariant="normal" xref="Sx3.SSx1.p3.3.m3.1.1.cmml">…</mi><mo id="Sx3.SSx1.p3.3.m3.5.5.4.3.7" xref="Sx3.SSx1.p3.3.m3.5.5.4.4.cmml">,</mo><msubsup id="Sx3.SSx1.p3.3.m3.5.5.4.3.3" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3.cmml"><mi id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.2" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.2.cmml">d</mi><mi id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.3" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3.3.cmml">i</mi><mi id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.3" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.3.cmml">K</mi></msubsup><mo id="Sx3.SSx1.p3.3.m3.5.5.4.3.8" stretchy="false" xref="Sx3.SSx1.p3.3.m3.5.5.4.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p3.3.m3.5b"><apply id="Sx3.SSx1.p3.3.m3.5.5.cmml" xref="Sx3.SSx1.p3.3.m3.5.5"><eq id="Sx3.SSx1.p3.3.m3.5.5.5.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.5"></eq><apply id="Sx3.SSx1.p3.3.m3.2.2.1.cmml" xref="Sx3.SSx1.p3.3.m3.2.2.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.3.m3.2.2.1.2.cmml" xref="Sx3.SSx1.p3.3.m3.2.2.1">superscript</csymbol><set id="Sx3.SSx1.p3.3.m3.2.2.1.1.2.cmml" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.1"><apply id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.cmml" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.1.cmml" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.2.cmml" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.2">𝑑</ci><ci id="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.3.cmml" xref="Sx3.SSx1.p3.3.m3.2.2.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.SSx1.p3.3.m3.2.2.1.3.cmml" xref="Sx3.SSx1.p3.3.m3.2.2.1.3">𝐾</ci></apply><set id="Sx3.SSx1.p3.3.m3.5.5.4.4.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.4.3"><apply id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.cmml" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.1.cmml" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1">subscript</csymbol><apply id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.cmml" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.1.cmml" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1">superscript</csymbol><ci id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.2.cmml" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.2">𝑑</ci><cn id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.3.cmml" type="integer" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1.2.3">1</cn></apply><ci id="Sx3.SSx1.p3.3.m3.3.3.2.1.1.3.cmml" xref="Sx3.SSx1.p3.3.m3.3.3.2.1.1.3">𝑖</ci></apply><apply id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.cmml" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.1.cmml" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2">subscript</csymbol><apply id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.cmml" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.1.cmml" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2">superscript</csymbol><ci id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.2.cmml" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.2">𝑑</ci><cn id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.3.cmml" type="integer" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2.2.3">2</cn></apply><ci id="Sx3.SSx1.p3.3.m3.4.4.3.2.2.3.cmml" xref="Sx3.SSx1.p3.3.m3.4.4.3.2.2.3">𝑖</ci></apply><ci id="Sx3.SSx1.p3.3.m3.1.1.cmml" xref="Sx3.SSx1.p3.3.m3.1.1">…</ci><apply id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.1.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3">subscript</csymbol><apply id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.1.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3">superscript</csymbol><ci id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.2.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.2">𝑑</ci><ci id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.3.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3.2.3">𝐾</ci></apply><ci id="Sx3.SSx1.p3.3.m3.5.5.4.3.3.3.cmml" xref="Sx3.SSx1.p3.3.m3.5.5.4.3.3.3">𝑖</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p3.3.m3.5c">\{d_{i}\}^{K}=\{d^{1}_{i},d^{2}_{i},\ldots,d^{K}_{i}\}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p3.3.m3.5d">{ italic_d start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT = { italic_d start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_d start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , … , italic_d start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT }</annotation></semantics></math>. The output confidence scores corresponding to the K documents are denoted as <math alttext="\{p_{i}\}^{K}=\{p^{1}_{i},p^{2}_{i},\ldots,p^{K}_{i}\}" class="ltx_Math" display="inline" id="Sx3.SSx1.p3.4.m4.5"><semantics id="Sx3.SSx1.p3.4.m4.5a"><mrow id="Sx3.SSx1.p3.4.m4.5.5" xref="Sx3.SSx1.p3.4.m4.5.5.cmml"><msup id="Sx3.SSx1.p3.4.m4.2.2.1" xref="Sx3.SSx1.p3.4.m4.2.2.1.cmml"><mrow id="Sx3.SSx1.p3.4.m4.2.2.1.1.1" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.2.cmml"><mo id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.2" stretchy="false" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.2.cmml">{</mo><msub id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.cmml"><mi id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.2" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.2.cmml">p</mi><mi id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.3" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.3" stretchy="false" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.2.cmml">}</mo></mrow><mi id="Sx3.SSx1.p3.4.m4.2.2.1.3" xref="Sx3.SSx1.p3.4.m4.2.2.1.3.cmml">K</mi></msup><mo id="Sx3.SSx1.p3.4.m4.5.5.5" xref="Sx3.SSx1.p3.4.m4.5.5.5.cmml">=</mo><mrow id="Sx3.SSx1.p3.4.m4.5.5.4.3" xref="Sx3.SSx1.p3.4.m4.5.5.4.4.cmml"><mo id="Sx3.SSx1.p3.4.m4.5.5.4.3.4" stretchy="false" xref="Sx3.SSx1.p3.4.m4.5.5.4.4.cmml">{</mo><msubsup id="Sx3.SSx1.p3.4.m4.3.3.2.1.1" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1.cmml"><mi id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.2" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.2.cmml">p</mi><mi id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.3" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1.3.cmml">i</mi><mn id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.3" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.3.cmml">1</mn></msubsup><mo id="Sx3.SSx1.p3.4.m4.5.5.4.3.5" xref="Sx3.SSx1.p3.4.m4.5.5.4.4.cmml">,</mo><msubsup id="Sx3.SSx1.p3.4.m4.4.4.3.2.2" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2.cmml"><mi id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.2" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.2.cmml">p</mi><mi id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.3" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2.3.cmml">i</mi><mn id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.3" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.3.cmml">2</mn></msubsup><mo id="Sx3.SSx1.p3.4.m4.5.5.4.3.6" xref="Sx3.SSx1.p3.4.m4.5.5.4.4.cmml">,</mo><mi id="Sx3.SSx1.p3.4.m4.1.1" mathvariant="normal" xref="Sx3.SSx1.p3.4.m4.1.1.cmml">…</mi><mo id="Sx3.SSx1.p3.4.m4.5.5.4.3.7" xref="Sx3.SSx1.p3.4.m4.5.5.4.4.cmml">,</mo><msubsup id="Sx3.SSx1.p3.4.m4.5.5.4.3.3" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3.cmml"><mi id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.2" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.2.cmml">p</mi><mi id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.3" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3.3.cmml">i</mi><mi id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.3" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.3.cmml">K</mi></msubsup><mo id="Sx3.SSx1.p3.4.m4.5.5.4.3.8" stretchy="false" xref="Sx3.SSx1.p3.4.m4.5.5.4.4.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p3.4.m4.5b"><apply id="Sx3.SSx1.p3.4.m4.5.5.cmml" xref="Sx3.SSx1.p3.4.m4.5.5"><eq id="Sx3.SSx1.p3.4.m4.5.5.5.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.5"></eq><apply id="Sx3.SSx1.p3.4.m4.2.2.1.cmml" xref="Sx3.SSx1.p3.4.m4.2.2.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.4.m4.2.2.1.2.cmml" xref="Sx3.SSx1.p3.4.m4.2.2.1">superscript</csymbol><set id="Sx3.SSx1.p3.4.m4.2.2.1.1.2.cmml" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.1"><apply id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.cmml" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.1.cmml" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.2.cmml" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.2">𝑝</ci><ci id="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.3.cmml" xref="Sx3.SSx1.p3.4.m4.2.2.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.SSx1.p3.4.m4.2.2.1.3.cmml" xref="Sx3.SSx1.p3.4.m4.2.2.1.3">𝐾</ci></apply><set id="Sx3.SSx1.p3.4.m4.5.5.4.4.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.4.3"><apply id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.cmml" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.1.cmml" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1">subscript</csymbol><apply id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.cmml" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.1.cmml" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1">superscript</csymbol><ci id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.2.cmml" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.2">𝑝</ci><cn id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.3.cmml" type="integer" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1.2.3">1</cn></apply><ci id="Sx3.SSx1.p3.4.m4.3.3.2.1.1.3.cmml" xref="Sx3.SSx1.p3.4.m4.3.3.2.1.1.3">𝑖</ci></apply><apply id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.cmml" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.1.cmml" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2">subscript</csymbol><apply id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.cmml" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.1.cmml" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2">superscript</csymbol><ci id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.2.cmml" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.2">𝑝</ci><cn id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.3.cmml" type="integer" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2.2.3">2</cn></apply><ci id="Sx3.SSx1.p3.4.m4.4.4.3.2.2.3.cmml" xref="Sx3.SSx1.p3.4.m4.4.4.3.2.2.3">𝑖</ci></apply><ci id="Sx3.SSx1.p3.4.m4.1.1.cmml" xref="Sx3.SSx1.p3.4.m4.1.1">…</ci><apply id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.1.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3">subscript</csymbol><apply id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.1.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3">superscript</csymbol><ci id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.2.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.2">𝑝</ci><ci id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.3.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3.2.3">𝐾</ci></apply><ci id="Sx3.SSx1.p3.4.m4.5.5.4.3.3.3.cmml" xref="Sx3.SSx1.p3.4.m4.5.5.4.3.3.3">𝑖</ci></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p3.4.m4.5c">\{p_{i}\}^{K}=\{p^{1}_{i},p^{2}_{i},\ldots,p^{K}_{i}\}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p3.4.m4.5d">{ italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT = { italic_p start_POSTSUPERSCRIPT 1 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_p start_POSTSUPERSCRIPT 2 end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , … , italic_p start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT }</annotation></semantics></math>. The MLLM needs to leverage these relevant documents to provide the correct answer to the question <math alttext="q_{i}" class="ltx_Math" display="inline" id="Sx3.SSx1.p3.5.m5.1"><semantics id="Sx3.SSx1.p3.5.m5.1a"><msub id="Sx3.SSx1.p3.5.m5.1.1" xref="Sx3.SSx1.p3.5.m5.1.1.cmml"><mi id="Sx3.SSx1.p3.5.m5.1.1.2" xref="Sx3.SSx1.p3.5.m5.1.1.2.cmml">q</mi><mi id="Sx3.SSx1.p3.5.m5.1.1.3" xref="Sx3.SSx1.p3.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p3.5.m5.1b"><apply id="Sx3.SSx1.p3.5.m5.1.1.cmml" xref="Sx3.SSx1.p3.5.m5.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.5.m5.1.1.1.cmml" xref="Sx3.SSx1.p3.5.m5.1.1">subscript</csymbol><ci id="Sx3.SSx1.p3.5.m5.1.1.2.cmml" xref="Sx3.SSx1.p3.5.m5.1.1.2">𝑞</ci><ci id="Sx3.SSx1.p3.5.m5.1.1.3.cmml" xref="Sx3.SSx1.p3.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p3.5.m5.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p3.5.m5.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> based on <math alttext="v_{i}" class="ltx_Math" display="inline" id="Sx3.SSx1.p3.6.m6.1"><semantics id="Sx3.SSx1.p3.6.m6.1a"><msub id="Sx3.SSx1.p3.6.m6.1.1" xref="Sx3.SSx1.p3.6.m6.1.1.cmml"><mi id="Sx3.SSx1.p3.6.m6.1.1.2" xref="Sx3.SSx1.p3.6.m6.1.1.2.cmml">v</mi><mi id="Sx3.SSx1.p3.6.m6.1.1.3" xref="Sx3.SSx1.p3.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx1.p3.6.m6.1b"><apply id="Sx3.SSx1.p3.6.m6.1.1.cmml" xref="Sx3.SSx1.p3.6.m6.1.1"><csymbol cd="ambiguous" id="Sx3.SSx1.p3.6.m6.1.1.1.cmml" xref="Sx3.SSx1.p3.6.m6.1.1">subscript</csymbol><ci id="Sx3.SSx1.p3.6.m6.1.1.2.cmml" xref="Sx3.SSx1.p3.6.m6.1.1.2">𝑣</ci><ci id="Sx3.SSx1.p3.6.m6.1.1.3.cmml" xref="Sx3.SSx1.p3.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx1.p3.6.m6.1c">v_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx1.p3.6.m6.1d">italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx3.SSx2">
<h3 class="ltx_title ltx_title_subsection">Our Proposed Framework: RACC</h3>
<div class="ltx_para" id="Sx3.SSx2.p1">
<p class="ltx_p" id="Sx3.SSx2.p1.1">Building on the above setup, we propose RACC, <em class="ltx_emph ltx_font_italic" id="Sx3.SSx2.p1.1.1">i.e.</em> <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.p1.1.2">R</span>etrieval-<span class="ltx_text ltx_font_bold" id="Sx3.SSx2.p1.1.3">A</span>ugmented MLLM with <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.p1.1.4">C</span>ompress <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.p1.1.5">C</span>ontexts. In this section, we first delineate our framework’s overall workflow and then discuss the strategies we have designed to optimize it in accordance with the task-specific characteristics. The framework structure of RACC is depicted in Figure <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx1.F1" title="Figure 1 ‣ Introduction ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">1</span></a>.</p>
</div>
<section class="ltx_subsubsection" id="Sx3.SSx2.SSSx1">
<h4 class="ltx_title ltx_title_subsubsection">Learning to compress contexts by the hyperMLLM.</h4>
<div class="ltx_para" id="Sx3.SSx2.SSSx1.p1">
<p class="ltx_p" id="Sx3.SSx2.SSSx1.p1.1">The first step in our framework is to compress the retrieved document into soft prompts of a specified length. <cite class="ltx_cite ltx_citemacro_citet">Phang et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib26" title="">2023</a>); Tack et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib32" title="">2024</a>)</cite> introduces the idea of amortized-based meta-learning into the online learning task, which brings us inspiration. We utilize MLLMs based on the encoder-decoder architecture (such as BLIP2-FlanT5XL <cite class="ltx_cite ltx_citemacro_citep">(Li et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib15" title="">2023</a>)</cite>, InstructBLIP-FlanT5XL <cite class="ltx_cite ltx_citemacro_citep">(Dai et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib5" title="">2023</a>)</cite>, <em class="ltx_emph ltx_font_italic" id="Sx3.SSx2.SSSx1.p1.1.1">etc.</em>) with a set of learnable prompts for the decoder to compress the input information. We refer to the frozen MLLM used to compress retrieved documents as hyperMLLM and denote it as <math alttext="g_{hyper}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p1.1.m1.1"><semantics id="Sx3.SSx2.SSSx1.p1.1.m1.1a"><msub id="Sx3.SSx2.SSSx1.p1.1.m1.1.1" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.2" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.2.cmml">g</mi><mrow id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.2" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.2.cmml">h</mi><mo id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.3" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.3.cmml">y</mi><mo id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1a" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.4" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.4.cmml">p</mi><mo id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1b" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.5" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.5.cmml">e</mi><mo id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1c" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.6" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.6.cmml">r</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p1.1.m1.1b"><apply id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.2">𝑔</ci><apply id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3"><times id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.2">ℎ</ci><ci id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.3">𝑦</ci><ci id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.4.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.4">𝑝</ci><ci id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.5.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.5">𝑒</ci><ci id="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.6.cmml" xref="Sx3.SSx2.SSSx1.p1.1.m1.1.1.3.6">𝑟</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p1.1.m1.1c">g_{hyper}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p1.1.m1.1d">italic_g start_POSTSUBSCRIPT italic_h italic_y italic_p italic_e italic_r end_POSTSUBSCRIPT</annotation></semantics></math>. The compressing process is denoted as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="Sx3.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\vspace{-1em}\theta^{k}_{i}=g_{hyper}(d^{k}_{i},\theta_{d})," class="ltx_Math" display="block" id="Sx3.E1.m1.1"><semantics id="Sx3.E1.m1.1a"><mrow id="Sx3.E1.m1.1.1.1" xref="Sx3.E1.m1.1.1.1.1.cmml"><mrow id="Sx3.E1.m1.1.1.1.1" xref="Sx3.E1.m1.1.1.1.1.cmml"><msubsup id="Sx3.E1.m1.1.1.1.1.4" xref="Sx3.E1.m1.1.1.1.1.4.cmml"><mi id="Sx3.E1.m1.1.1.1.1.4.2.2" xref="Sx3.E1.m1.1.1.1.1.4.2.2.cmml">θ</mi><mi id="Sx3.E1.m1.1.1.1.1.4.3" xref="Sx3.E1.m1.1.1.1.1.4.3.cmml">i</mi><mi id="Sx3.E1.m1.1.1.1.1.4.2.3" xref="Sx3.E1.m1.1.1.1.1.4.2.3.cmml">k</mi></msubsup><mo id="Sx3.E1.m1.1.1.1.1.3" xref="Sx3.E1.m1.1.1.1.1.3.cmml">=</mo><mrow id="Sx3.E1.m1.1.1.1.1.2" xref="Sx3.E1.m1.1.1.1.1.2.cmml"><msub id="Sx3.E1.m1.1.1.1.1.2.4" xref="Sx3.E1.m1.1.1.1.1.2.4.cmml"><mi id="Sx3.E1.m1.1.1.1.1.2.4.2" xref="Sx3.E1.m1.1.1.1.1.2.4.2.cmml">g</mi><mrow id="Sx3.E1.m1.1.1.1.1.2.4.3" xref="Sx3.E1.m1.1.1.1.1.2.4.3.cmml"><mi id="Sx3.E1.m1.1.1.1.1.2.4.3.2" xref="Sx3.E1.m1.1.1.1.1.2.4.3.2.cmml">h</mi><mo id="Sx3.E1.m1.1.1.1.1.2.4.3.1" xref="Sx3.E1.m1.1.1.1.1.2.4.3.1.cmml">⁢</mo><mi id="Sx3.E1.m1.1.1.1.1.2.4.3.3" xref="Sx3.E1.m1.1.1.1.1.2.4.3.3.cmml">y</mi><mo id="Sx3.E1.m1.1.1.1.1.2.4.3.1a" xref="Sx3.E1.m1.1.1.1.1.2.4.3.1.cmml">⁢</mo><mi id="Sx3.E1.m1.1.1.1.1.2.4.3.4" xref="Sx3.E1.m1.1.1.1.1.2.4.3.4.cmml">p</mi><mo id="Sx3.E1.m1.1.1.1.1.2.4.3.1b" xref="Sx3.E1.m1.1.1.1.1.2.4.3.1.cmml">⁢</mo><mi id="Sx3.E1.m1.1.1.1.1.2.4.3.5" xref="Sx3.E1.m1.1.1.1.1.2.4.3.5.cmml">e</mi><mo id="Sx3.E1.m1.1.1.1.1.2.4.3.1c" xref="Sx3.E1.m1.1.1.1.1.2.4.3.1.cmml">⁢</mo><mi id="Sx3.E1.m1.1.1.1.1.2.4.3.6" xref="Sx3.E1.m1.1.1.1.1.2.4.3.6.cmml">r</mi></mrow></msub><mo id="Sx3.E1.m1.1.1.1.1.2.3" xref="Sx3.E1.m1.1.1.1.1.2.3.cmml">⁢</mo><mrow id="Sx3.E1.m1.1.1.1.1.2.2.2" xref="Sx3.E1.m1.1.1.1.1.2.2.3.cmml"><mo id="Sx3.E1.m1.1.1.1.1.2.2.2.3" stretchy="false" xref="Sx3.E1.m1.1.1.1.1.2.2.3.cmml">(</mo><msubsup id="Sx3.E1.m1.1.1.1.1.1.1.1.1" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1.cmml"><mi id="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.2" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.2.cmml">d</mi><mi id="Sx3.E1.m1.1.1.1.1.1.1.1.1.3" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi><mi id="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.3" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="Sx3.E1.m1.1.1.1.1.2.2.2.4" xref="Sx3.E1.m1.1.1.1.1.2.2.3.cmml">,</mo><msub id="Sx3.E1.m1.1.1.1.1.2.2.2.2" xref="Sx3.E1.m1.1.1.1.1.2.2.2.2.cmml"><mi id="Sx3.E1.m1.1.1.1.1.2.2.2.2.2" xref="Sx3.E1.m1.1.1.1.1.2.2.2.2.2.cmml">θ</mi><mi id="Sx3.E1.m1.1.1.1.1.2.2.2.2.3" xref="Sx3.E1.m1.1.1.1.1.2.2.2.2.3.cmml">d</mi></msub><mo id="Sx3.E1.m1.1.1.1.1.2.2.2.5" stretchy="false" xref="Sx3.E1.m1.1.1.1.1.2.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="Sx3.E1.m1.1.1.1.2" xref="Sx3.E1.m1.1.1.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="Sx3.E1.m1.1b"><apply id="Sx3.E1.m1.1.1.1.1.cmml" xref="Sx3.E1.m1.1.1.1"><eq id="Sx3.E1.m1.1.1.1.1.3.cmml" xref="Sx3.E1.m1.1.1.1.1.3"></eq><apply id="Sx3.E1.m1.1.1.1.1.4.cmml" xref="Sx3.E1.m1.1.1.1.1.4"><csymbol cd="ambiguous" id="Sx3.E1.m1.1.1.1.1.4.1.cmml" xref="Sx3.E1.m1.1.1.1.1.4">subscript</csymbol><apply id="Sx3.E1.m1.1.1.1.1.4.2.cmml" xref="Sx3.E1.m1.1.1.1.1.4"><csymbol cd="ambiguous" id="Sx3.E1.m1.1.1.1.1.4.2.1.cmml" xref="Sx3.E1.m1.1.1.1.1.4">superscript</csymbol><ci id="Sx3.E1.m1.1.1.1.1.4.2.2.cmml" xref="Sx3.E1.m1.1.1.1.1.4.2.2">𝜃</ci><ci id="Sx3.E1.m1.1.1.1.1.4.2.3.cmml" xref="Sx3.E1.m1.1.1.1.1.4.2.3">𝑘</ci></apply><ci id="Sx3.E1.m1.1.1.1.1.4.3.cmml" xref="Sx3.E1.m1.1.1.1.1.4.3">𝑖</ci></apply><apply id="Sx3.E1.m1.1.1.1.1.2.cmml" xref="Sx3.E1.m1.1.1.1.1.2"><times id="Sx3.E1.m1.1.1.1.1.2.3.cmml" xref="Sx3.E1.m1.1.1.1.1.2.3"></times><apply id="Sx3.E1.m1.1.1.1.1.2.4.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4"><csymbol cd="ambiguous" id="Sx3.E1.m1.1.1.1.1.2.4.1.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4">subscript</csymbol><ci id="Sx3.E1.m1.1.1.1.1.2.4.2.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4.2">𝑔</ci><apply id="Sx3.E1.m1.1.1.1.1.2.4.3.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4.3"><times id="Sx3.E1.m1.1.1.1.1.2.4.3.1.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4.3.1"></times><ci id="Sx3.E1.m1.1.1.1.1.2.4.3.2.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4.3.2">ℎ</ci><ci id="Sx3.E1.m1.1.1.1.1.2.4.3.3.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4.3.3">𝑦</ci><ci id="Sx3.E1.m1.1.1.1.1.2.4.3.4.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4.3.4">𝑝</ci><ci id="Sx3.E1.m1.1.1.1.1.2.4.3.5.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4.3.5">𝑒</ci><ci id="Sx3.E1.m1.1.1.1.1.2.4.3.6.cmml" xref="Sx3.E1.m1.1.1.1.1.2.4.3.6">𝑟</ci></apply></apply><interval closure="open" id="Sx3.E1.m1.1.1.1.1.2.2.3.cmml" xref="Sx3.E1.m1.1.1.1.1.2.2.2"><apply id="Sx3.E1.m1.1.1.1.1.1.1.1.1.cmml" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.E1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.cmml" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.2.cmml" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.2">𝑑</ci><ci id="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.3.cmml" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="Sx3.E1.m1.1.1.1.1.1.1.1.1.3.cmml" xref="Sx3.E1.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="Sx3.E1.m1.1.1.1.1.2.2.2.2.cmml" xref="Sx3.E1.m1.1.1.1.1.2.2.2.2"><csymbol cd="ambiguous" id="Sx3.E1.m1.1.1.1.1.2.2.2.2.1.cmml" xref="Sx3.E1.m1.1.1.1.1.2.2.2.2">subscript</csymbol><ci id="Sx3.E1.m1.1.1.1.1.2.2.2.2.2.cmml" xref="Sx3.E1.m1.1.1.1.1.2.2.2.2.2">𝜃</ci><ci id="Sx3.E1.m1.1.1.1.1.2.2.2.2.3.cmml" xref="Sx3.E1.m1.1.1.1.1.2.2.2.2.3">𝑑</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.E1.m1.1c">\vspace{-1em}\theta^{k}_{i}=g_{hyper}(d^{k}_{i},\theta_{d}),</annotation><annotation encoding="application/x-llamapun" id="Sx3.E1.m1.1d">italic_θ start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = italic_g start_POSTSUBSCRIPT italic_h italic_y italic_p italic_e italic_r end_POSTSUBSCRIPT ( italic_d start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="Sx3.SSx2.SSSx1.p1.4">where <math alttext="\theta^{k}_{i}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p1.2.m1.1"><semantics id="Sx3.SSx2.SSSx1.p1.2.m1.1a"><msubsup id="Sx3.SSx2.SSSx1.p1.2.m1.1.1" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.2" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.3" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1.3.cmml">i</mi><mi id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.3" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.3.cmml">k</mi></msubsup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p1.2.m1.1b"><apply id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1">subscript</csymbol><apply id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.1.cmml" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1">superscript</csymbol><ci id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.2.cmml" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.2">𝜃</ci><ci id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.3.cmml" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1.2.3">𝑘</ci></apply><ci id="Sx3.SSx2.SSSx1.p1.2.m1.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p1.2.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p1.2.m1.1c">\theta^{k}_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p1.2.m1.1d">italic_θ start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> denotes the compressed prompts of the document <math alttext="d^{k}_{i}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p1.3.m2.1"><semantics id="Sx3.SSx2.SSSx1.p1.3.m2.1a"><msubsup id="Sx3.SSx2.SSSx1.p1.3.m2.1.1" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.2" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.2.cmml">d</mi><mi id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.3" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1.3.cmml">i</mi><mi id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.3" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.3.cmml">k</mi></msubsup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p1.3.m2.1b"><apply id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.cmml" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1">subscript</csymbol><apply id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.1.cmml" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1">superscript</csymbol><ci id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.2.cmml" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.2">𝑑</ci><ci id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.3.cmml" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1.2.3">𝑘</ci></apply><ci id="Sx3.SSx2.SSSx1.p1.3.m2.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p1.3.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p1.3.m2.1c">d^{k}_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p1.3.m2.1d">italic_d start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\theta_{d}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p1.4.m3.1"><semantics id="Sx3.SSx2.SSSx1.p1.4.m3.1a"><msub id="Sx3.SSx2.SSSx1.p1.4.m3.1.1" xref="Sx3.SSx2.SSSx1.p1.4.m3.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p1.4.m3.1.1.2" xref="Sx3.SSx2.SSSx1.p1.4.m3.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx1.p1.4.m3.1.1.3" xref="Sx3.SSx2.SSSx1.p1.4.m3.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p1.4.m3.1b"><apply id="Sx3.SSx2.SSSx1.p1.4.m3.1.1.cmml" xref="Sx3.SSx2.SSSx1.p1.4.m3.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p1.4.m3.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p1.4.m3.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx1.p1.4.m3.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p1.4.m3.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx1.p1.4.m3.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p1.4.m3.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p1.4.m3.1c">\theta_{d}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p1.4.m3.1d">italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> represents the predefined learnable prompts for compressing retrieved documents.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx1.p2">
<p class="ltx_p" id="Sx3.SSx2.SSSx1.p2.1">We also compress the image-question pairs in a similar manner. The key differences are that we first process the image and question independently using the hyperMLLM, and subsequently, we concatenate them for an additional round of compression. The reason behind this design choice will be elaborated in the following section. Denoting the predefined learnable prompts for compressing the image-question pairs as <math alttext="\theta_{vq}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p2.1.m1.1"><semantics id="Sx3.SSx2.SSSx1.p2.1.m1.1a"><msub id="Sx3.SSx2.SSSx1.p2.1.m1.1.1" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.2" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.2" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.1" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.3" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.3.cmml">q</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p2.1.m1.1b"><apply id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3"><times id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.2">𝑣</ci><ci id="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx1.p2.1.m1.1.1.3.3">𝑞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p2.1.m1.1c">\theta_{vq}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p2.1.m1.1d">italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT</annotation></semantics></math>, the compression process is as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="Sx3.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\begin{split}&amp;\theta_{v_{i}}=g_{hyper}(v_{i},\theta_{vq}),\\
&amp;\theta_{q_{i}}=g_{hyper}(q_{i},\theta_{vq}),\\
&amp;\theta_{vq_{i}}=g_{hyper}(\textsc{concat}(v_{i},q_{i}),\theta_{vq})\end{split}" class="ltx_Math" display="block" id="Sx3.E2.m1.50"><semantics id="Sx3.E2.m1.50a"><mtable columnspacing="0pt" displaystyle="true" id="Sx3.E2.m1.50.50.6" rowspacing="0pt"><mtr id="Sx3.E2.m1.50.50.6a"><mtd id="Sx3.E2.m1.50.50.6b" xref="Sx3.E2.m1.46.46.2.3.cmml"></mtd><mtd class="ltx_align_left" columnalign="left" id="Sx3.E2.m1.50.50.6c"><mrow id="Sx3.E2.m1.47.47.3.45.14.14.14"><mrow id="Sx3.E2.m1.47.47.3.45.14.14.14.1"><msub id="Sx3.E2.m1.47.47.3.45.14.14.14.1.3"><mi id="Sx3.E2.m1.1.1.1.1.1.1" xref="Sx3.E2.m1.1.1.1.1.1.1.cmml">θ</mi><msub id="Sx3.E2.m1.2.2.2.2.2.2.1" xref="Sx3.E2.m1.2.2.2.2.2.2.1.cmml"><mi id="Sx3.E2.m1.2.2.2.2.2.2.1.2" xref="Sx3.E2.m1.2.2.2.2.2.2.1.2.cmml">v</mi><mi id="Sx3.E2.m1.2.2.2.2.2.2.1.3" xref="Sx3.E2.m1.2.2.2.2.2.2.1.3.cmml">i</mi></msub></msub><mo id="Sx3.E2.m1.3.3.3.3.3.3" xref="Sx3.E2.m1.3.3.3.3.3.3.cmml">=</mo><mrow id="Sx3.E2.m1.47.47.3.45.14.14.14.1.2"><msub id="Sx3.E2.m1.47.47.3.45.14.14.14.1.2.4"><mi id="Sx3.E2.m1.4.4.4.4.4.4" xref="Sx3.E2.m1.4.4.4.4.4.4.cmml">g</mi><mrow id="Sx3.E2.m1.5.5.5.5.5.5.1" xref="Sx3.E2.m1.5.5.5.5.5.5.1.cmml"><mi id="Sx3.E2.m1.5.5.5.5.5.5.1.2" xref="Sx3.E2.m1.5.5.5.5.5.5.1.2.cmml">h</mi><mo id="Sx3.E2.m1.5.5.5.5.5.5.1.1" xref="Sx3.E2.m1.5.5.5.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.5.5.5.5.5.5.1.3" xref="Sx3.E2.m1.5.5.5.5.5.5.1.3.cmml">y</mi><mo id="Sx3.E2.m1.5.5.5.5.5.5.1.1a" xref="Sx3.E2.m1.5.5.5.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.5.5.5.5.5.5.1.4" xref="Sx3.E2.m1.5.5.5.5.5.5.1.4.cmml">p</mi><mo id="Sx3.E2.m1.5.5.5.5.5.5.1.1b" xref="Sx3.E2.m1.5.5.5.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.5.5.5.5.5.5.1.5" xref="Sx3.E2.m1.5.5.5.5.5.5.1.5.cmml">e</mi><mo id="Sx3.E2.m1.5.5.5.5.5.5.1.1c" xref="Sx3.E2.m1.5.5.5.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.5.5.5.5.5.5.1.6" xref="Sx3.E2.m1.5.5.5.5.5.5.1.6.cmml">r</mi></mrow></msub><mo id="Sx3.E2.m1.47.47.3.45.14.14.14.1.2.3" xref="Sx3.E2.m1.46.46.2.3.cmml">⁢</mo><mrow id="Sx3.E2.m1.47.47.3.45.14.14.14.1.2.2.2"><mo id="Sx3.E2.m1.6.6.6.6.6.6" stretchy="false" xref="Sx3.E2.m1.46.46.2.3.cmml">(</mo><msub id="Sx3.E2.m1.47.47.3.45.14.14.14.1.1.1.1.1"><mi id="Sx3.E2.m1.7.7.7.7.7.7" xref="Sx3.E2.m1.7.7.7.7.7.7.cmml">v</mi><mi id="Sx3.E2.m1.8.8.8.8.8.8.1" xref="Sx3.E2.m1.8.8.8.8.8.8.1.cmml">i</mi></msub><mo id="Sx3.E2.m1.9.9.9.9.9.9" xref="Sx3.E2.m1.46.46.2.3.cmml">,</mo><msub id="Sx3.E2.m1.47.47.3.45.14.14.14.1.2.2.2.2"><mi id="Sx3.E2.m1.10.10.10.10.10.10" xref="Sx3.E2.m1.10.10.10.10.10.10.cmml">θ</mi><mrow id="Sx3.E2.m1.11.11.11.11.11.11.1" xref="Sx3.E2.m1.11.11.11.11.11.11.1.cmml"><mi id="Sx3.E2.m1.11.11.11.11.11.11.1.2" xref="Sx3.E2.m1.11.11.11.11.11.11.1.2.cmml">v</mi><mo id="Sx3.E2.m1.11.11.11.11.11.11.1.1" xref="Sx3.E2.m1.11.11.11.11.11.11.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.11.11.11.11.11.11.1.3" xref="Sx3.E2.m1.11.11.11.11.11.11.1.3.cmml">q</mi></mrow></msub><mo id="Sx3.E2.m1.12.12.12.12.12.12" stretchy="false" xref="Sx3.E2.m1.46.46.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="Sx3.E2.m1.13.13.13.13.13.13" xref="Sx3.E2.m1.46.46.2.3.cmml">,</mo></mrow></mtd></mtr><mtr id="Sx3.E2.m1.50.50.6d"><mtd id="Sx3.E2.m1.50.50.6e" xref="Sx3.E2.m1.46.46.2.3.cmml"></mtd><mtd class="ltx_align_left" columnalign="left" id="Sx3.E2.m1.50.50.6f"><mrow id="Sx3.E2.m1.48.48.4.46.14.14.14"><mrow id="Sx3.E2.m1.48.48.4.46.14.14.14.1"><msub id="Sx3.E2.m1.48.48.4.46.14.14.14.1.3"><mi id="Sx3.E2.m1.14.14.14.1.1.1" xref="Sx3.E2.m1.14.14.14.1.1.1.cmml">θ</mi><msub id="Sx3.E2.m1.15.15.15.2.2.2.1" xref="Sx3.E2.m1.15.15.15.2.2.2.1.cmml"><mi id="Sx3.E2.m1.15.15.15.2.2.2.1.2" xref="Sx3.E2.m1.15.15.15.2.2.2.1.2.cmml">q</mi><mi id="Sx3.E2.m1.15.15.15.2.2.2.1.3" xref="Sx3.E2.m1.15.15.15.2.2.2.1.3.cmml">i</mi></msub></msub><mo id="Sx3.E2.m1.16.16.16.3.3.3" xref="Sx3.E2.m1.16.16.16.3.3.3.cmml">=</mo><mrow id="Sx3.E2.m1.48.48.4.46.14.14.14.1.2"><msub id="Sx3.E2.m1.48.48.4.46.14.14.14.1.2.4"><mi id="Sx3.E2.m1.17.17.17.4.4.4" xref="Sx3.E2.m1.17.17.17.4.4.4.cmml">g</mi><mrow id="Sx3.E2.m1.18.18.18.5.5.5.1" xref="Sx3.E2.m1.18.18.18.5.5.5.1.cmml"><mi id="Sx3.E2.m1.18.18.18.5.5.5.1.2" xref="Sx3.E2.m1.18.18.18.5.5.5.1.2.cmml">h</mi><mo id="Sx3.E2.m1.18.18.18.5.5.5.1.1" xref="Sx3.E2.m1.18.18.18.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.18.18.18.5.5.5.1.3" xref="Sx3.E2.m1.18.18.18.5.5.5.1.3.cmml">y</mi><mo id="Sx3.E2.m1.18.18.18.5.5.5.1.1a" xref="Sx3.E2.m1.18.18.18.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.18.18.18.5.5.5.1.4" xref="Sx3.E2.m1.18.18.18.5.5.5.1.4.cmml">p</mi><mo id="Sx3.E2.m1.18.18.18.5.5.5.1.1b" xref="Sx3.E2.m1.18.18.18.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.18.18.18.5.5.5.1.5" xref="Sx3.E2.m1.18.18.18.5.5.5.1.5.cmml">e</mi><mo id="Sx3.E2.m1.18.18.18.5.5.5.1.1c" xref="Sx3.E2.m1.18.18.18.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.18.18.18.5.5.5.1.6" xref="Sx3.E2.m1.18.18.18.5.5.5.1.6.cmml">r</mi></mrow></msub><mo id="Sx3.E2.m1.48.48.4.46.14.14.14.1.2.3" xref="Sx3.E2.m1.46.46.2.3.cmml">⁢</mo><mrow id="Sx3.E2.m1.48.48.4.46.14.14.14.1.2.2.2"><mo id="Sx3.E2.m1.19.19.19.6.6.6" stretchy="false" xref="Sx3.E2.m1.46.46.2.3.cmml">(</mo><msub id="Sx3.E2.m1.48.48.4.46.14.14.14.1.1.1.1.1"><mi id="Sx3.E2.m1.20.20.20.7.7.7" xref="Sx3.E2.m1.20.20.20.7.7.7.cmml">q</mi><mi id="Sx3.E2.m1.21.21.21.8.8.8.1" xref="Sx3.E2.m1.21.21.21.8.8.8.1.cmml">i</mi></msub><mo id="Sx3.E2.m1.22.22.22.9.9.9" xref="Sx3.E2.m1.46.46.2.3.cmml">,</mo><msub id="Sx3.E2.m1.48.48.4.46.14.14.14.1.2.2.2.2"><mi id="Sx3.E2.m1.23.23.23.10.10.10" xref="Sx3.E2.m1.23.23.23.10.10.10.cmml">θ</mi><mrow id="Sx3.E2.m1.24.24.24.11.11.11.1" xref="Sx3.E2.m1.24.24.24.11.11.11.1.cmml"><mi id="Sx3.E2.m1.24.24.24.11.11.11.1.2" xref="Sx3.E2.m1.24.24.24.11.11.11.1.2.cmml">v</mi><mo id="Sx3.E2.m1.24.24.24.11.11.11.1.1" xref="Sx3.E2.m1.24.24.24.11.11.11.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.24.24.24.11.11.11.1.3" xref="Sx3.E2.m1.24.24.24.11.11.11.1.3.cmml">q</mi></mrow></msub><mo id="Sx3.E2.m1.25.25.25.12.12.12" stretchy="false" xref="Sx3.E2.m1.46.46.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="Sx3.E2.m1.26.26.26.13.13.13" xref="Sx3.E2.m1.46.46.2.3.cmml">,</mo></mrow></mtd></mtr><mtr id="Sx3.E2.m1.50.50.6g"><mtd id="Sx3.E2.m1.50.50.6h" xref="Sx3.E2.m1.46.46.2.3.cmml"></mtd><mtd class="ltx_align_left" columnalign="left" id="Sx3.E2.m1.50.50.6i"><mrow id="Sx3.E2.m1.50.50.6.48.20.20"><msub id="Sx3.E2.m1.50.50.6.48.20.20.21"><mi id="Sx3.E2.m1.27.27.27.1.1.1" xref="Sx3.E2.m1.27.27.27.1.1.1.cmml">θ</mi><mrow id="Sx3.E2.m1.28.28.28.2.2.2.1" xref="Sx3.E2.m1.28.28.28.2.2.2.1.cmml"><mi id="Sx3.E2.m1.28.28.28.2.2.2.1.2" xref="Sx3.E2.m1.28.28.28.2.2.2.1.2.cmml">v</mi><mo id="Sx3.E2.m1.28.28.28.2.2.2.1.1" xref="Sx3.E2.m1.28.28.28.2.2.2.1.1.cmml">⁢</mo><msub id="Sx3.E2.m1.28.28.28.2.2.2.1.3" xref="Sx3.E2.m1.28.28.28.2.2.2.1.3.cmml"><mi id="Sx3.E2.m1.28.28.28.2.2.2.1.3.2" xref="Sx3.E2.m1.28.28.28.2.2.2.1.3.2.cmml">q</mi><mi id="Sx3.E2.m1.28.28.28.2.2.2.1.3.3" xref="Sx3.E2.m1.28.28.28.2.2.2.1.3.3.cmml">i</mi></msub></mrow></msub><mo id="Sx3.E2.m1.29.29.29.3.3.3" xref="Sx3.E2.m1.29.29.29.3.3.3.cmml">=</mo><mrow id="Sx3.E2.m1.50.50.6.48.20.20.20"><msub id="Sx3.E2.m1.50.50.6.48.20.20.20.4"><mi id="Sx3.E2.m1.30.30.30.4.4.4" xref="Sx3.E2.m1.30.30.30.4.4.4.cmml">g</mi><mrow id="Sx3.E2.m1.31.31.31.5.5.5.1" xref="Sx3.E2.m1.31.31.31.5.5.5.1.cmml"><mi id="Sx3.E2.m1.31.31.31.5.5.5.1.2" xref="Sx3.E2.m1.31.31.31.5.5.5.1.2.cmml">h</mi><mo id="Sx3.E2.m1.31.31.31.5.5.5.1.1" xref="Sx3.E2.m1.31.31.31.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.31.31.31.5.5.5.1.3" xref="Sx3.E2.m1.31.31.31.5.5.5.1.3.cmml">y</mi><mo id="Sx3.E2.m1.31.31.31.5.5.5.1.1a" xref="Sx3.E2.m1.31.31.31.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.31.31.31.5.5.5.1.4" xref="Sx3.E2.m1.31.31.31.5.5.5.1.4.cmml">p</mi><mo id="Sx3.E2.m1.31.31.31.5.5.5.1.1b" xref="Sx3.E2.m1.31.31.31.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.31.31.31.5.5.5.1.5" xref="Sx3.E2.m1.31.31.31.5.5.5.1.5.cmml">e</mi><mo id="Sx3.E2.m1.31.31.31.5.5.5.1.1c" xref="Sx3.E2.m1.31.31.31.5.5.5.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.31.31.31.5.5.5.1.6" xref="Sx3.E2.m1.31.31.31.5.5.5.1.6.cmml">r</mi></mrow></msub><mo id="Sx3.E2.m1.50.50.6.48.20.20.20.3" xref="Sx3.E2.m1.46.46.2.3.cmml">⁢</mo><mrow id="Sx3.E2.m1.50.50.6.48.20.20.20.2.2"><mo id="Sx3.E2.m1.32.32.32.6.6.6" stretchy="false" xref="Sx3.E2.m1.46.46.2.3.cmml">(</mo><mrow id="Sx3.E2.m1.49.49.5.47.19.19.19.1.1.1"><mtext class="ltx_font_smallcaps" id="Sx3.E2.m1.33.33.33.7.7.7" xref="Sx3.E2.m1.33.33.33.7.7.7a.cmml">concat</mtext><mo id="Sx3.E2.m1.49.49.5.47.19.19.19.1.1.1.3" xref="Sx3.E2.m1.46.46.2.3.cmml">⁢</mo><mrow id="Sx3.E2.m1.49.49.5.47.19.19.19.1.1.1.2.2"><mo id="Sx3.E2.m1.34.34.34.8.8.8" stretchy="false" xref="Sx3.E2.m1.46.46.2.3.cmml">(</mo><msub id="Sx3.E2.m1.49.49.5.47.19.19.19.1.1.1.1.1.1"><mi id="Sx3.E2.m1.35.35.35.9.9.9" xref="Sx3.E2.m1.35.35.35.9.9.9.cmml">v</mi><mi id="Sx3.E2.m1.36.36.36.10.10.10.1" xref="Sx3.E2.m1.36.36.36.10.10.10.1.cmml">i</mi></msub><mo id="Sx3.E2.m1.37.37.37.11.11.11" xref="Sx3.E2.m1.46.46.2.3.cmml">,</mo><msub id="Sx3.E2.m1.49.49.5.47.19.19.19.1.1.1.2.2.2"><mi id="Sx3.E2.m1.38.38.38.12.12.12" xref="Sx3.E2.m1.38.38.38.12.12.12.cmml">q</mi><mi id="Sx3.E2.m1.39.39.39.13.13.13.1" xref="Sx3.E2.m1.39.39.39.13.13.13.1.cmml">i</mi></msub><mo id="Sx3.E2.m1.40.40.40.14.14.14" stretchy="false" xref="Sx3.E2.m1.46.46.2.3.cmml">)</mo></mrow></mrow><mo id="Sx3.E2.m1.41.41.41.15.15.15" xref="Sx3.E2.m1.46.46.2.3.cmml">,</mo><msub id="Sx3.E2.m1.50.50.6.48.20.20.20.2.2.2"><mi id="Sx3.E2.m1.42.42.42.16.16.16" xref="Sx3.E2.m1.42.42.42.16.16.16.cmml">θ</mi><mrow id="Sx3.E2.m1.43.43.43.17.17.17.1" xref="Sx3.E2.m1.43.43.43.17.17.17.1.cmml"><mi id="Sx3.E2.m1.43.43.43.17.17.17.1.2" xref="Sx3.E2.m1.43.43.43.17.17.17.1.2.cmml">v</mi><mo id="Sx3.E2.m1.43.43.43.17.17.17.1.1" xref="Sx3.E2.m1.43.43.43.17.17.17.1.1.cmml">⁢</mo><mi id="Sx3.E2.m1.43.43.43.17.17.17.1.3" xref="Sx3.E2.m1.43.43.43.17.17.17.1.3.cmml">q</mi></mrow></msub><mo id="Sx3.E2.m1.44.44.44.18.18.18" stretchy="false" xref="Sx3.E2.m1.46.46.2.3.cmml">)</mo></mrow></mrow></mrow></mtd></mtr></mtable><annotation-xml encoding="MathML-Content" id="Sx3.E2.m1.50b"><apply id="Sx3.E2.m1.46.46.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.3a.cmml" xref="Sx3.E2.m1.50.50.6b">formulae-sequence</csymbol><apply id="Sx3.E2.m1.45.45.1.1.1.cmml" xref="Sx3.E2.m1.50.50.6b"><eq id="Sx3.E2.m1.3.3.3.3.3.3.cmml" xref="Sx3.E2.m1.3.3.3.3.3.3"></eq><apply id="Sx3.E2.m1.45.45.1.1.1.4.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.45.45.1.1.1.4.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.1.1.1.1.1.1.cmml" xref="Sx3.E2.m1.1.1.1.1.1.1">𝜃</ci><apply id="Sx3.E2.m1.2.2.2.2.2.2.1.cmml" xref="Sx3.E2.m1.2.2.2.2.2.2.1"><csymbol cd="ambiguous" id="Sx3.E2.m1.2.2.2.2.2.2.1.1.cmml" xref="Sx3.E2.m1.2.2.2.2.2.2.1">subscript</csymbol><ci id="Sx3.E2.m1.2.2.2.2.2.2.1.2.cmml" xref="Sx3.E2.m1.2.2.2.2.2.2.1.2">𝑣</ci><ci id="Sx3.E2.m1.2.2.2.2.2.2.1.3.cmml" xref="Sx3.E2.m1.2.2.2.2.2.2.1.3">𝑖</ci></apply></apply><apply id="Sx3.E2.m1.45.45.1.1.1.2.cmml" xref="Sx3.E2.m1.50.50.6b"><times id="Sx3.E2.m1.45.45.1.1.1.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"></times><apply id="Sx3.E2.m1.45.45.1.1.1.2.4.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.45.45.1.1.1.2.4.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.4.4.4.4.4.4.cmml" xref="Sx3.E2.m1.4.4.4.4.4.4">𝑔</ci><apply id="Sx3.E2.m1.5.5.5.5.5.5.1.cmml" xref="Sx3.E2.m1.5.5.5.5.5.5.1"><times id="Sx3.E2.m1.5.5.5.5.5.5.1.1.cmml" xref="Sx3.E2.m1.5.5.5.5.5.5.1.1"></times><ci id="Sx3.E2.m1.5.5.5.5.5.5.1.2.cmml" xref="Sx3.E2.m1.5.5.5.5.5.5.1.2">ℎ</ci><ci id="Sx3.E2.m1.5.5.5.5.5.5.1.3.cmml" xref="Sx3.E2.m1.5.5.5.5.5.5.1.3">𝑦</ci><ci id="Sx3.E2.m1.5.5.5.5.5.5.1.4.cmml" xref="Sx3.E2.m1.5.5.5.5.5.5.1.4">𝑝</ci><ci id="Sx3.E2.m1.5.5.5.5.5.5.1.5.cmml" xref="Sx3.E2.m1.5.5.5.5.5.5.1.5">𝑒</ci><ci id="Sx3.E2.m1.5.5.5.5.5.5.1.6.cmml" xref="Sx3.E2.m1.5.5.5.5.5.5.1.6">𝑟</ci></apply></apply><interval closure="open" id="Sx3.E2.m1.45.45.1.1.1.2.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"><apply id="Sx3.E2.m1.45.45.1.1.1.1.1.1.1.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.45.45.1.1.1.1.1.1.1.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.7.7.7.7.7.7.cmml" xref="Sx3.E2.m1.7.7.7.7.7.7">𝑣</ci><ci id="Sx3.E2.m1.8.8.8.8.8.8.1.cmml" xref="Sx3.E2.m1.8.8.8.8.8.8.1">𝑖</ci></apply><apply id="Sx3.E2.m1.45.45.1.1.1.2.2.2.2.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.45.45.1.1.1.2.2.2.2.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.10.10.10.10.10.10.cmml" xref="Sx3.E2.m1.10.10.10.10.10.10">𝜃</ci><apply id="Sx3.E2.m1.11.11.11.11.11.11.1.cmml" xref="Sx3.E2.m1.11.11.11.11.11.11.1"><times id="Sx3.E2.m1.11.11.11.11.11.11.1.1.cmml" xref="Sx3.E2.m1.11.11.11.11.11.11.1.1"></times><ci id="Sx3.E2.m1.11.11.11.11.11.11.1.2.cmml" xref="Sx3.E2.m1.11.11.11.11.11.11.1.2">𝑣</ci><ci id="Sx3.E2.m1.11.11.11.11.11.11.1.3.cmml" xref="Sx3.E2.m1.11.11.11.11.11.11.1.3">𝑞</ci></apply></apply></interval></apply></apply><apply id="Sx3.E2.m1.46.46.2.2.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.3a.cmml" xref="Sx3.E2.m1.50.50.6b">formulae-sequence</csymbol><apply id="Sx3.E2.m1.46.46.2.2.2.1.1.cmml" xref="Sx3.E2.m1.50.50.6b"><eq id="Sx3.E2.m1.16.16.16.3.3.3.cmml" xref="Sx3.E2.m1.16.16.16.3.3.3"></eq><apply id="Sx3.E2.m1.46.46.2.2.2.1.1.4.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.1.1.4.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.14.14.14.1.1.1.cmml" xref="Sx3.E2.m1.14.14.14.1.1.1">𝜃</ci><apply id="Sx3.E2.m1.15.15.15.2.2.2.1.cmml" xref="Sx3.E2.m1.15.15.15.2.2.2.1"><csymbol cd="ambiguous" id="Sx3.E2.m1.15.15.15.2.2.2.1.1.cmml" xref="Sx3.E2.m1.15.15.15.2.2.2.1">subscript</csymbol><ci id="Sx3.E2.m1.15.15.15.2.2.2.1.2.cmml" xref="Sx3.E2.m1.15.15.15.2.2.2.1.2">𝑞</ci><ci id="Sx3.E2.m1.15.15.15.2.2.2.1.3.cmml" xref="Sx3.E2.m1.15.15.15.2.2.2.1.3">𝑖</ci></apply></apply><apply id="Sx3.E2.m1.46.46.2.2.2.1.1.2.cmml" xref="Sx3.E2.m1.50.50.6b"><times id="Sx3.E2.m1.46.46.2.2.2.1.1.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"></times><apply id="Sx3.E2.m1.46.46.2.2.2.1.1.2.4.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.1.1.2.4.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.17.17.17.4.4.4.cmml" xref="Sx3.E2.m1.17.17.17.4.4.4">𝑔</ci><apply id="Sx3.E2.m1.18.18.18.5.5.5.1.cmml" xref="Sx3.E2.m1.18.18.18.5.5.5.1"><times id="Sx3.E2.m1.18.18.18.5.5.5.1.1.cmml" xref="Sx3.E2.m1.18.18.18.5.5.5.1.1"></times><ci id="Sx3.E2.m1.18.18.18.5.5.5.1.2.cmml" xref="Sx3.E2.m1.18.18.18.5.5.5.1.2">ℎ</ci><ci id="Sx3.E2.m1.18.18.18.5.5.5.1.3.cmml" xref="Sx3.E2.m1.18.18.18.5.5.5.1.3">𝑦</ci><ci id="Sx3.E2.m1.18.18.18.5.5.5.1.4.cmml" xref="Sx3.E2.m1.18.18.18.5.5.5.1.4">𝑝</ci><ci id="Sx3.E2.m1.18.18.18.5.5.5.1.5.cmml" xref="Sx3.E2.m1.18.18.18.5.5.5.1.5">𝑒</ci><ci id="Sx3.E2.m1.18.18.18.5.5.5.1.6.cmml" xref="Sx3.E2.m1.18.18.18.5.5.5.1.6">𝑟</ci></apply></apply><interval closure="open" id="Sx3.E2.m1.46.46.2.2.2.1.1.2.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"><apply id="Sx3.E2.m1.46.46.2.2.2.1.1.1.1.1.1.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.1.1.1.1.1.1.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.20.20.20.7.7.7.cmml" xref="Sx3.E2.m1.20.20.20.7.7.7">𝑞</ci><ci id="Sx3.E2.m1.21.21.21.8.8.8.1.cmml" xref="Sx3.E2.m1.21.21.21.8.8.8.1">𝑖</ci></apply><apply id="Sx3.E2.m1.46.46.2.2.2.1.1.2.2.2.2.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.1.1.2.2.2.2.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.23.23.23.10.10.10.cmml" xref="Sx3.E2.m1.23.23.23.10.10.10">𝜃</ci><apply id="Sx3.E2.m1.24.24.24.11.11.11.1.cmml" xref="Sx3.E2.m1.24.24.24.11.11.11.1"><times id="Sx3.E2.m1.24.24.24.11.11.11.1.1.cmml" xref="Sx3.E2.m1.24.24.24.11.11.11.1.1"></times><ci id="Sx3.E2.m1.24.24.24.11.11.11.1.2.cmml" xref="Sx3.E2.m1.24.24.24.11.11.11.1.2">𝑣</ci><ci id="Sx3.E2.m1.24.24.24.11.11.11.1.3.cmml" xref="Sx3.E2.m1.24.24.24.11.11.11.1.3">𝑞</ci></apply></apply></interval></apply></apply><apply id="Sx3.E2.m1.46.46.2.2.2.2.2.cmml" xref="Sx3.E2.m1.50.50.6b"><eq id="Sx3.E2.m1.29.29.29.3.3.3.cmml" xref="Sx3.E2.m1.29.29.29.3.3.3"></eq><apply id="Sx3.E2.m1.46.46.2.2.2.2.2.4.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.2.2.4.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.27.27.27.1.1.1.cmml" xref="Sx3.E2.m1.27.27.27.1.1.1">𝜃</ci><apply id="Sx3.E2.m1.28.28.28.2.2.2.1.cmml" xref="Sx3.E2.m1.28.28.28.2.2.2.1"><times id="Sx3.E2.m1.28.28.28.2.2.2.1.1.cmml" xref="Sx3.E2.m1.28.28.28.2.2.2.1.1"></times><ci id="Sx3.E2.m1.28.28.28.2.2.2.1.2.cmml" xref="Sx3.E2.m1.28.28.28.2.2.2.1.2">𝑣</ci><apply id="Sx3.E2.m1.28.28.28.2.2.2.1.3.cmml" xref="Sx3.E2.m1.28.28.28.2.2.2.1.3"><csymbol cd="ambiguous" id="Sx3.E2.m1.28.28.28.2.2.2.1.3.1.cmml" xref="Sx3.E2.m1.28.28.28.2.2.2.1.3">subscript</csymbol><ci id="Sx3.E2.m1.28.28.28.2.2.2.1.3.2.cmml" xref="Sx3.E2.m1.28.28.28.2.2.2.1.3.2">𝑞</ci><ci id="Sx3.E2.m1.28.28.28.2.2.2.1.3.3.cmml" xref="Sx3.E2.m1.28.28.28.2.2.2.1.3.3">𝑖</ci></apply></apply></apply><apply id="Sx3.E2.m1.46.46.2.2.2.2.2.2.cmml" xref="Sx3.E2.m1.50.50.6b"><times id="Sx3.E2.m1.46.46.2.2.2.2.2.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"></times><apply id="Sx3.E2.m1.46.46.2.2.2.2.2.2.4.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.2.2.2.4.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.30.30.30.4.4.4.cmml" xref="Sx3.E2.m1.30.30.30.4.4.4">𝑔</ci><apply id="Sx3.E2.m1.31.31.31.5.5.5.1.cmml" xref="Sx3.E2.m1.31.31.31.5.5.5.1"><times id="Sx3.E2.m1.31.31.31.5.5.5.1.1.cmml" xref="Sx3.E2.m1.31.31.31.5.5.5.1.1"></times><ci id="Sx3.E2.m1.31.31.31.5.5.5.1.2.cmml" xref="Sx3.E2.m1.31.31.31.5.5.5.1.2">ℎ</ci><ci id="Sx3.E2.m1.31.31.31.5.5.5.1.3.cmml" xref="Sx3.E2.m1.31.31.31.5.5.5.1.3">𝑦</ci><ci id="Sx3.E2.m1.31.31.31.5.5.5.1.4.cmml" xref="Sx3.E2.m1.31.31.31.5.5.5.1.4">𝑝</ci><ci id="Sx3.E2.m1.31.31.31.5.5.5.1.5.cmml" xref="Sx3.E2.m1.31.31.31.5.5.5.1.5">𝑒</ci><ci id="Sx3.E2.m1.31.31.31.5.5.5.1.6.cmml" xref="Sx3.E2.m1.31.31.31.5.5.5.1.6">𝑟</ci></apply></apply><interval closure="open" id="Sx3.E2.m1.46.46.2.2.2.2.2.2.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"><apply id="Sx3.E2.m1.46.46.2.2.2.2.2.1.1.1.1.cmml" xref="Sx3.E2.m1.50.50.6b"><times id="Sx3.E2.m1.46.46.2.2.2.2.2.1.1.1.1.3.cmml" xref="Sx3.E2.m1.50.50.6b"></times><ci id="Sx3.E2.m1.33.33.33.7.7.7a.cmml" xref="Sx3.E2.m1.33.33.33.7.7.7"><mtext class="ltx_font_smallcaps" id="Sx3.E2.m1.33.33.33.7.7.7.cmml" xref="Sx3.E2.m1.33.33.33.7.7.7">concat</mtext></ci><interval closure="open" id="Sx3.E2.m1.46.46.2.2.2.2.2.1.1.1.1.2.3.cmml" xref="Sx3.E2.m1.50.50.6b"><apply id="Sx3.E2.m1.46.46.2.2.2.2.2.1.1.1.1.1.1.1.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.2.2.1.1.1.1.1.1.1.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.35.35.35.9.9.9.cmml" xref="Sx3.E2.m1.35.35.35.9.9.9">𝑣</ci><ci id="Sx3.E2.m1.36.36.36.10.10.10.1.cmml" xref="Sx3.E2.m1.36.36.36.10.10.10.1">𝑖</ci></apply><apply id="Sx3.E2.m1.46.46.2.2.2.2.2.1.1.1.1.2.2.2.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.2.2.1.1.1.1.2.2.2.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.38.38.38.12.12.12.cmml" xref="Sx3.E2.m1.38.38.38.12.12.12">𝑞</ci><ci id="Sx3.E2.m1.39.39.39.13.13.13.1.cmml" xref="Sx3.E2.m1.39.39.39.13.13.13.1">𝑖</ci></apply></interval></apply><apply id="Sx3.E2.m1.46.46.2.2.2.2.2.2.2.2.2.cmml" xref="Sx3.E2.m1.50.50.6b"><csymbol cd="ambiguous" id="Sx3.E2.m1.46.46.2.2.2.2.2.2.2.2.2.1.cmml" xref="Sx3.E2.m1.50.50.6b">subscript</csymbol><ci id="Sx3.E2.m1.42.42.42.16.16.16.cmml" xref="Sx3.E2.m1.42.42.42.16.16.16">𝜃</ci><apply id="Sx3.E2.m1.43.43.43.17.17.17.1.cmml" xref="Sx3.E2.m1.43.43.43.17.17.17.1"><times id="Sx3.E2.m1.43.43.43.17.17.17.1.1.cmml" xref="Sx3.E2.m1.43.43.43.17.17.17.1.1"></times><ci id="Sx3.E2.m1.43.43.43.17.17.17.1.2.cmml" xref="Sx3.E2.m1.43.43.43.17.17.17.1.2">𝑣</ci><ci id="Sx3.E2.m1.43.43.43.17.17.17.1.3.cmml" xref="Sx3.E2.m1.43.43.43.17.17.17.1.3">𝑞</ci></apply></apply></interval></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.E2.m1.50c">\begin{split}&amp;\theta_{v_{i}}=g_{hyper}(v_{i},\theta_{vq}),\\
&amp;\theta_{q_{i}}=g_{hyper}(q_{i},\theta_{vq}),\\
&amp;\theta_{vq_{i}}=g_{hyper}(\textsc{concat}(v_{i},q_{i}),\theta_{vq})\end{split}</annotation><annotation encoding="application/x-llamapun" id="Sx3.E2.m1.50d">start_ROW start_CELL end_CELL start_CELL italic_θ start_POSTSUBSCRIPT italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT = italic_g start_POSTSUBSCRIPT italic_h italic_y italic_p italic_e italic_r end_POSTSUBSCRIPT ( italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT ) , end_CELL end_ROW start_ROW start_CELL end_CELL start_CELL italic_θ start_POSTSUBSCRIPT italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT = italic_g start_POSTSUBSCRIPT italic_h italic_y italic_p italic_e italic_r end_POSTSUBSCRIPT ( italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT ) , end_CELL end_ROW start_ROW start_CELL end_CELL start_CELL italic_θ start_POSTSUBSCRIPT italic_v italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT = italic_g start_POSTSUBSCRIPT italic_h italic_y italic_p italic_e italic_r end_POSTSUBSCRIPT ( concat ( italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT ) end_CELL end_ROW</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(2)</span></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx1.p3">
<p class="ltx_p" id="Sx3.SSx2.SSSx1.p3.5">The lengths of the two sets of learnable prompts are hyperparameters. We conducted a series of comparative experiments on these two hyperparameters, with the results presented in subsequent sections. In most of our experiments, we set <math alttext="L(\theta_{vq})" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p3.1.m1.1"><semantics id="Sx3.SSx2.SSSx1.p3.1.m1.1a"><mrow id="Sx3.SSx2.SSSx1.p3.1.m1.1.1" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.3" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.3.cmml">L</mi><mo id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.2" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.2.cmml">⁢</mo><mrow id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.cmml"><mo id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.cmml">(</mo><msub id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.2" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.2" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.1" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.3" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.3.cmml">q</mi></mrow></msub><mo id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p3.1.m1.1b"><apply id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1"><times id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.2"></times><ci id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.3">𝐿</ci><apply id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3"><times id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.2">𝑣</ci><ci id="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx1.p3.1.m1.1.1.1.1.1.3.3">𝑞</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p3.1.m1.1c">L(\theta_{vq})</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p3.1.m1.1d">italic_L ( italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT )</annotation></semantics></math> to 12 and <math alttext="L(\theta_{d})" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p3.2.m2.1"><semantics id="Sx3.SSx2.SSSx1.p3.2.m2.1a"><mrow id="Sx3.SSx2.SSSx1.p3.2.m2.1.1" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.3" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.3.cmml">L</mi><mo id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.2" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.2.cmml">⁢</mo><mrow id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.cmml"><mo id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.cmml">(</mo><msub id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.2" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.3.cmml">d</mi></msub><mo id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p3.2.m2.1b"><apply id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1"><times id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.2"></times><ci id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.3">𝐿</ci><apply id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p3.2.m2.1.1.1.1.1.3">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p3.2.m2.1c">L(\theta_{d})</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p3.2.m2.1d">italic_L ( italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT )</annotation></semantics></math> to 16. The initialization weights of learnable prompts also play a crucial role in the hyperMLLM’s ability to compress input contexts, particularly in the early training stage. We propose a strategy for initializing learnable prompts called PIPE, <em class="ltx_emph ltx_font_italic" id="Sx3.SSx2.SSSx1.p3.5.1">i.e.</em> <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx1.p3.5.2">P</span>rompt <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx1.p3.5.3">I</span>nitialization with hard <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx1.p3.5.4">P</span>rompt <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx1.p3.5.5">E</span>mbeddings.
We begin by manually designing two sets of hard prompts. For example, the hard prompt corresponding to <math alttext="\theta_{d}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p3.3.m3.1"><semantics id="Sx3.SSx2.SSSx1.p3.3.m3.1a"><msub id="Sx3.SSx2.SSSx1.p3.3.m3.1.1" xref="Sx3.SSx2.SSSx1.p3.3.m3.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p3.3.m3.1.1.2" xref="Sx3.SSx2.SSSx1.p3.3.m3.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx1.p3.3.m3.1.1.3" xref="Sx3.SSx2.SSSx1.p3.3.m3.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p3.3.m3.1b"><apply id="Sx3.SSx2.SSSx1.p3.3.m3.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.3.m3.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p3.3.m3.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.3.m3.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx1.p3.3.m3.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p3.3.m3.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx1.p3.3.m3.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p3.3.m3.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p3.3.m3.1c">\theta_{d}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p3.3.m3.1d">italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> is “Summarize the key information of the given passage in a concise manner.” The hard prompts are then processed by the tokenizer and embedding layer of the hyperMLLM to generate their embeddings. These embeddings are subsequently used to initialize the weights of the learnable prompts <math alttext="\theta_{d}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p3.4.m4.1"><semantics id="Sx3.SSx2.SSSx1.p3.4.m4.1a"><msub id="Sx3.SSx2.SSSx1.p3.4.m4.1.1" xref="Sx3.SSx2.SSSx1.p3.4.m4.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p3.4.m4.1.1.2" xref="Sx3.SSx2.SSSx1.p3.4.m4.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx1.p3.4.m4.1.1.3" xref="Sx3.SSx2.SSSx1.p3.4.m4.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p3.4.m4.1b"><apply id="Sx3.SSx2.SSSx1.p3.4.m4.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.4.m4.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p3.4.m4.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.4.m4.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx1.p3.4.m4.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p3.4.m4.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx1.p3.4.m4.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p3.4.m4.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p3.4.m4.1c">\theta_{d}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p3.4.m4.1d">italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\theta_{vq}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx1.p3.5.m5.1"><semantics id="Sx3.SSx2.SSSx1.p3.5.m5.1a"><msub id="Sx3.SSx2.SSSx1.p3.5.m5.1.1" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.cmml"><mi id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.2" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.2" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.1" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.3" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.3.cmml">q</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx1.p3.5.m5.1b"><apply id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.1.cmml" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.2.cmml" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.cmml" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3"><times id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.2">𝑣</ci><ci id="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx1.p3.5.m5.1.1.3.3">𝑞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx1.p3.5.m5.1c">\theta_{vq}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx1.p3.5.m5.1d">italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
</section>
<section class="ltx_subsubsection" id="Sx3.SSx2.SSSx2">
<h4 class="ltx_title ltx_title_subsubsection">Learning to aggregate the compressed contexts</h4>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p1">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p1.6">Now given the set of compressed prompts of the retrieved documents <math alttext="\{\theta_{i}\}^{K}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p1.1.m1.1"><semantics id="Sx3.SSx2.SSSx2.p1.1.m1.1a"><msup id="Sx3.SSx2.SSSx2.p1.1.m1.1.1" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.cmml"><mrow id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.2.cmml"><mo id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.2.cmml">{</mo><msub id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.2" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.2.cmml">}</mo></mrow><mi id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.3" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.3.cmml">K</mi></msup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p1.1.m1.1b"><apply id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1">superscript</csymbol><set id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1"><apply id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.SSx2.SSSx2.p1.1.m1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p1.1.m1.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p1.1.m1.1c">\{\theta_{i}\}^{K}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p1.1.m1.1d">{ italic_θ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math>, <math alttext="\theta_{v_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p1.2.m2.1"><semantics id="Sx3.SSx2.SSSx2.p1.2.m2.1a"><msub id="Sx3.SSx2.SSSx2.p1.2.m2.1.1" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.2" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.2.cmml">θ</mi><msub id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.2" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.2.cmml">v</mi><mi id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.3" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.3.cmml">i</mi></msub></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p1.2.m2.1b"><apply id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.2">𝑣</ci><ci id="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p1.2.m2.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p1.2.m2.1c">\theta_{v_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p1.2.m2.1d">italic_θ start_POSTSUBSCRIPT italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="\theta_{q_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p1.3.m3.1"><semantics id="Sx3.SSx2.SSSx2.p1.3.m3.1a"><msub id="Sx3.SSx2.SSSx2.p1.3.m3.1.1" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.2" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.2.cmml">θ</mi><msub id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.2" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.3" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.3.cmml">i</mi></msub></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p1.3.m3.1b"><apply id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p1.3.m3.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p1.3.m3.1c">\theta_{q_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p1.3.m3.1d">italic_θ start_POSTSUBSCRIPT italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\theta_{vq_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p1.4.m4.1"><semantics id="Sx3.SSx2.SSSx2.p1.4.m4.1a"><msub id="Sx3.SSx2.SSSx2.p1.4.m4.1.1" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.2" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.2" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.1" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.1.cmml">⁢</mo><msub id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.cmml"><mi id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.2" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.3" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.3.cmml">i</mi></msub></mrow></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p1.4.m4.1b"><apply id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3"><times id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.2">𝑣</ci><apply id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.1.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.2.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.3.cmml" xref="Sx3.SSx2.SSSx2.p1.4.m4.1.1.3.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p1.4.m4.1c">\theta_{vq_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p1.4.m4.1d">italic_θ start_POSTSUBSCRIPT italic_v italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, RACC aims to use <math alttext="\theta_{vq_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p1.5.m5.1"><semantics id="Sx3.SSx2.SSSx2.p1.5.m5.1a"><msub id="Sx3.SSx2.SSSx2.p1.5.m5.1.1" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.2" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.2" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.1" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.1.cmml">⁢</mo><msub id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.cmml"><mi id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.2" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.3" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.3.cmml">i</mi></msub></mrow></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p1.5.m5.1b"><apply id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3"><times id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.2">𝑣</ci><apply id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.1.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.2.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.3.cmml" xref="Sx3.SSx2.SSSx2.p1.5.m5.1.1.3.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p1.5.m5.1c">\theta_{vq_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p1.5.m5.1d">italic_θ start_POSTSUBSCRIPT italic_v italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> as a query to aggregate more relevant information from <math alttext="\{\theta_{i}\}^{K}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p1.6.m6.1"><semantics id="Sx3.SSx2.SSSx2.p1.6.m6.1a"><msup id="Sx3.SSx2.SSSx2.p1.6.m6.1.1" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.cmml"><mrow id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.2.cmml"><mo id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.2.cmml">{</mo><msub id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.2" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.2.cmml">}</mo></mrow><mi id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.3" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.3.cmml">K</mi></msup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p1.6.m6.1b"><apply id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1">superscript</csymbol><set id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1"><apply id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.SSx2.SSSx2.p1.6.m6.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p1.6.m6.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p1.6.m6.1c">\{\theta_{i}\}^{K}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p1.6.m6.1d">{ italic_θ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math>. Considering the characteristics of KB-VQA, we identify three key problems in designing the aggregator network and propose three corresponding strategies to address them.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p2">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p2.1"><span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p2.1.1">How to grasp the relationship between V and Q in VQA?</span> 
We first explore the relationship between V (images) and Q (questions) from the task and model perspectives.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p3">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p3.1">From the perspective of KB-VQA, both images and questions are crucial components and are complementary to each other. However, when it comes to a specific image-question pair, the importance of the image and question may differ. In some cases, it is necessary to retrieve relevant documents based on key details present in the image but not mentioned in the question. Conversely, when the question contains substantial information, it is more appropriate to focus on retrieving documents closely related to the question. Given that the retrieved documents contain a lot of tokens and the portion of content relevant to the image or question might be relatively small, we believe that enhancing the semantic information in retrieved documents using image and question-based information is essential.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p4">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p4.1">From the perspective of MLLMs, the relationship between images and questions is unequal, which is reflected in the number of tokens they occupy. In nearly all MLLMs, image features are converted into fixed-length tokens, such as 32, while the number of tokens for questions is often smaller. This disparity may result in the learnable prompts focusing too much on the image part in the early training stage.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p5">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p5.16">Based on the above discussion, we propose a strategy called <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p5.16.1">D</span>ecoupled <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p5.16.2">C</span>ompression of <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p5.16.3">V</span>ision and <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p5.16.4">Q</span>uestion (DCVQ).
Our strategy begins by decoupling the given image-question pair <math alttext="(v_{i},q_{i})" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.1.m1.2"><semantics id="Sx3.SSx2.SSSx2.p5.1.m1.2a"><mrow id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.3.cmml"><mo id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.3" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.3.cmml">(</mo><msub id="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.2" xref="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.2.cmml">v</mi><mi id="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.3" xref="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.4" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.3.cmml">,</mo><msub id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.cmml"><mi id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.2" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.3" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.3.cmml">i</mi></msub><mo id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.5" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.1.m1.2b"><interval closure="open" id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.3.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2"><apply id="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.2">𝑣</ci><ci id="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.1.1.1.1.3">𝑖</ci></apply><apply id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.1.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.2.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.3.cmml" xref="Sx3.SSx2.SSSx2.p5.1.m1.2.2.2.2.3">𝑖</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.1.m1.2c">(v_{i},q_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.1.m1.2d">( italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> and input them separately into the hyperMLLM with <math alttext="\theta_{vq}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.2.m2.1"><semantics id="Sx3.SSx2.SSSx2.p5.2.m2.1a"><msub id="Sx3.SSx2.SSSx2.p5.2.m2.1.1" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.2" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.2" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.1" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.3" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.3.cmml">q</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.2.m2.1b"><apply id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3"><times id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.2">𝑣</ci><ci id="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p5.2.m2.1.1.3.3">𝑞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.2.m2.1c">\theta_{vq}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.2.m2.1d">italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT</annotation></semantics></math>, generating <math alttext="\theta_{v_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.3.m3.1"><semantics id="Sx3.SSx2.SSSx2.p5.3.m3.1a"><msub id="Sx3.SSx2.SSSx2.p5.3.m3.1.1" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.2" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.2.cmml">θ</mi><msub id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.2" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.2.cmml">v</mi><mi id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.3" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.3.cmml">i</mi></msub></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.3.m3.1b"><apply id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.2">𝑣</ci><ci id="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p5.3.m3.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.3.m3.1c">\theta_{v_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.3.m3.1d">italic_θ start_POSTSUBSCRIPT italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\theta_{q_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.4.m4.1"><semantics id="Sx3.SSx2.SSSx2.p5.4.m4.1a"><msub id="Sx3.SSx2.SSSx2.p5.4.m4.1.1" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.2" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.2.cmml">θ</mi><msub id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.2" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.3" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.3.cmml">i</mi></msub></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.4.m4.1b"><apply id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p5.4.m4.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.4.m4.1c">\theta_{q_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.4.m4.1d">italic_θ start_POSTSUBSCRIPT italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, which respectively represent the compressed prompts of <math alttext="v_{i}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.5.m5.1"><semantics id="Sx3.SSx2.SSSx2.p5.5.m5.1a"><msub id="Sx3.SSx2.SSSx2.p5.5.m5.1.1" xref="Sx3.SSx2.SSSx2.p5.5.m5.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.5.m5.1.1.2" xref="Sx3.SSx2.SSSx2.p5.5.m5.1.1.2.cmml">v</mi><mi id="Sx3.SSx2.SSSx2.p5.5.m5.1.1.3" xref="Sx3.SSx2.SSSx2.p5.5.m5.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.5.m5.1b"><apply id="Sx3.SSx2.SSSx2.p5.5.m5.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.5.m5.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.5.m5.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.5.m5.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.5.m5.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.5.m5.1.1.2">𝑣</ci><ci id="Sx3.SSx2.SSSx2.p5.5.m5.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.5.m5.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.5.m5.1c">v_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.5.m5.1d">italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="q_{i}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.6.m6.1"><semantics id="Sx3.SSx2.SSSx2.p5.6.m6.1a"><msub id="Sx3.SSx2.SSSx2.p5.6.m6.1.1" xref="Sx3.SSx2.SSSx2.p5.6.m6.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.6.m6.1.1.2" xref="Sx3.SSx2.SSSx2.p5.6.m6.1.1.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p5.6.m6.1.1.3" xref="Sx3.SSx2.SSSx2.p5.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.6.m6.1b"><apply id="Sx3.SSx2.SSSx2.p5.6.m6.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.6.m6.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.6.m6.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.6.m6.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.6.m6.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.6.m6.1.1.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p5.6.m6.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.6.m6.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.6.m6.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. At the same time, both <math alttext="v_{i}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.7.m7.1"><semantics id="Sx3.SSx2.SSSx2.p5.7.m7.1a"><msub id="Sx3.SSx2.SSSx2.p5.7.m7.1.1" xref="Sx3.SSx2.SSSx2.p5.7.m7.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.7.m7.1.1.2" xref="Sx3.SSx2.SSSx2.p5.7.m7.1.1.2.cmml">v</mi><mi id="Sx3.SSx2.SSSx2.p5.7.m7.1.1.3" xref="Sx3.SSx2.SSSx2.p5.7.m7.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.7.m7.1b"><apply id="Sx3.SSx2.SSSx2.p5.7.m7.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.7.m7.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.7.m7.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.7.m7.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.7.m7.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.7.m7.1.1.2">𝑣</ci><ci id="Sx3.SSx2.SSSx2.p5.7.m7.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.7.m7.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.7.m7.1c">v_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.7.m7.1d">italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="q_{i}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.8.m8.1"><semantics id="Sx3.SSx2.SSSx2.p5.8.m8.1a"><msub id="Sx3.SSx2.SSSx2.p5.8.m8.1.1" xref="Sx3.SSx2.SSSx2.p5.8.m8.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.8.m8.1.1.2" xref="Sx3.SSx2.SSSx2.p5.8.m8.1.1.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p5.8.m8.1.1.3" xref="Sx3.SSx2.SSSx2.p5.8.m8.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.8.m8.1b"><apply id="Sx3.SSx2.SSSx2.p5.8.m8.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.8.m8.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.8.m8.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.8.m8.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.8.m8.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.8.m8.1.1.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p5.8.m8.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.8.m8.1c">q_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.8.m8.1d">italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> are used to retrieve <math alttext="K" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.9.m9.1"><semantics id="Sx3.SSx2.SSSx2.p5.9.m9.1a"><mi id="Sx3.SSx2.SSSx2.p5.9.m9.1.1" xref="Sx3.SSx2.SSSx2.p5.9.m9.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.9.m9.1b"><ci id="Sx3.SSx2.SSSx2.p5.9.m9.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.9.m9.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.9.m9.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.9.m9.1d">italic_K</annotation></semantics></math> documents from the knowledge source, which are then compressed into <math alttext="\{\theta_{i}\}^{K}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.10.m10.1"><semantics id="Sx3.SSx2.SSSx2.p5.10.m10.1a"><msup id="Sx3.SSx2.SSSx2.p5.10.m10.1.1" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.cmml"><mrow id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.2.cmml"><mo id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.2.cmml">{</mo><msub id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.2" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.2.cmml">}</mo></mrow><mi id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.3" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.3.cmml">K</mi></msup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.10.m10.1b"><apply id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1">superscript</csymbol><set id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1"><apply id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.SSx2.SSSx2.p5.10.m10.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.10.m10.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.10.m10.1c">\{\theta_{i}\}^{K}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.10.m10.1d">{ italic_θ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math>. Then, we concatenate the obtained <math alttext="\theta_{v_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.11.m11.1"><semantics id="Sx3.SSx2.SSSx2.p5.11.m11.1a"><msub id="Sx3.SSx2.SSSx2.p5.11.m11.1.1" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.2" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.2.cmml">θ</mi><msub id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.2" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.2.cmml">v</mi><mi id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.3" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.3.cmml">i</mi></msub></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.11.m11.1b"><apply id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.2">𝑣</ci><ci id="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p5.11.m11.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.11.m11.1c">\theta_{v_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.11.m11.1d">italic_θ start_POSTSUBSCRIPT italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\theta_{q_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.12.m12.1"><semantics id="Sx3.SSx2.SSSx2.p5.12.m12.1a"><msub id="Sx3.SSx2.SSSx2.p5.12.m12.1.1" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.2" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.2.cmml">θ</mi><msub id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.2" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.3" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.3.cmml">i</mi></msub></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.12.m12.1b"><apply id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p5.12.m12.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.12.m12.1c">\theta_{q_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.12.m12.1d">italic_θ start_POSTSUBSCRIPT italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> and pass them through a cross-attention block with <math alttext="\{\theta_{i}\}^{K}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.13.m13.1"><semantics id="Sx3.SSx2.SSSx2.p5.13.m13.1a"><msup id="Sx3.SSx2.SSSx2.p5.13.m13.1.1" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.cmml"><mrow id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.2.cmml"><mo id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.2.cmml">{</mo><msub id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.2" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.2.cmml">}</mo></mrow><mi id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.3" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.3.cmml">K</mi></msup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.13.m13.1b"><apply id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1">superscript</csymbol><set id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1"><apply id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.SSx2.SSSx2.p5.13.m13.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.13.m13.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.13.m13.1c">\{\theta_{i}\}^{K}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.13.m13.1d">{ italic_θ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math> as the query. Through cross-attention computations, the semantic information in <math alttext="\{\theta_{i}\}^{K}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.14.m14.1"><semantics id="Sx3.SSx2.SSSx2.p5.14.m14.1a"><msup id="Sx3.SSx2.SSSx2.p5.14.m14.1.1" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.cmml"><mrow id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.2.cmml"><mo id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.2.cmml">{</mo><msub id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.2" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.2.cmml">}</mo></mrow><mi id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.3" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.3.cmml">K</mi></msup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.14.m14.1b"><apply id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1">superscript</csymbol><set id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1"><apply id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.2">𝜃</ci><ci id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.SSx2.SSSx2.p5.14.m14.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.14.m14.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.14.m14.1c">\{\theta_{i}\}^{K}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.14.m14.1d">{ italic_θ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math> that is more relevant to <math alttext="\theta_{v_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.15.m15.1"><semantics id="Sx3.SSx2.SSSx2.p5.15.m15.1a"><msub id="Sx3.SSx2.SSSx2.p5.15.m15.1.1" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.2" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.2.cmml">θ</mi><msub id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.2" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.2.cmml">v</mi><mi id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.3" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.3.cmml">i</mi></msub></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.15.m15.1b"><apply id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.2">𝑣</ci><ci id="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p5.15.m15.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.15.m15.1c">\theta_{v_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.15.m15.1d">italic_θ start_POSTSUBSCRIPT italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> as well as <math alttext="\theta_{q_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.16.m16.1"><semantics id="Sx3.SSx2.SSSx2.p5.16.m16.1a"><msub id="Sx3.SSx2.SSSx2.p5.16.m16.1.1" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.2" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.2.cmml">θ</mi><msub id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.2" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.3" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.3.cmml">i</mi></msub></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.16.m16.1b"><apply id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.2">𝜃</ci><apply id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx2.p5.16.m16.1.1.3.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.16.m16.1c">\theta_{q_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.16.m16.1d">italic_θ start_POSTSUBSCRIPT italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> can be directly enhanced. This strategy also helps prevent learnable prompts from overly focusing on image tokens during the process of learning coupled and decoupled compression of image-question pairs. Denoting a naive cross-attention block <cite class="ltx_cite ltx_citemacro_citep">(Vaswani et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib34" title="">2017</a>)</cite> as <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p5.16.5">CA</span>, the computational process of DCVQ is represented as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="Sx3.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\{\theta^{*}_{i}\}^{K}=\textbf{CA}(\{\theta_{i}\}^{K},\textsc{concat}(\theta_{%
v_{i}},\theta_{q_{i}}))" class="ltx_Math" display="block" id="Sx3.E3.m1.3"><semantics id="Sx3.E3.m1.3a"><mrow id="Sx3.E3.m1.3.3" xref="Sx3.E3.m1.3.3.cmml"><msup id="Sx3.E3.m1.1.1.1" xref="Sx3.E3.m1.1.1.1.cmml"><mrow id="Sx3.E3.m1.1.1.1.1.1" xref="Sx3.E3.m1.1.1.1.1.2.cmml"><mo id="Sx3.E3.m1.1.1.1.1.1.2" stretchy="false" xref="Sx3.E3.m1.1.1.1.1.2.cmml">{</mo><msubsup id="Sx3.E3.m1.1.1.1.1.1.1" xref="Sx3.E3.m1.1.1.1.1.1.1.cmml"><mi id="Sx3.E3.m1.1.1.1.1.1.1.2.2" xref="Sx3.E3.m1.1.1.1.1.1.1.2.2.cmml">θ</mi><mi id="Sx3.E3.m1.1.1.1.1.1.1.3" xref="Sx3.E3.m1.1.1.1.1.1.1.3.cmml">i</mi><mo id="Sx3.E3.m1.1.1.1.1.1.1.2.3" xref="Sx3.E3.m1.1.1.1.1.1.1.2.3.cmml">∗</mo></msubsup><mo id="Sx3.E3.m1.1.1.1.1.1.3" stretchy="false" xref="Sx3.E3.m1.1.1.1.1.2.cmml">}</mo></mrow><mi id="Sx3.E3.m1.1.1.1.3" xref="Sx3.E3.m1.1.1.1.3.cmml">K</mi></msup><mo id="Sx3.E3.m1.3.3.4" xref="Sx3.E3.m1.3.3.4.cmml">=</mo><mrow id="Sx3.E3.m1.3.3.3" xref="Sx3.E3.m1.3.3.3.cmml"><mtext class="ltx_mathvariant_bold" id="Sx3.E3.m1.3.3.3.4" xref="Sx3.E3.m1.3.3.3.4a.cmml">CA</mtext><mo id="Sx3.E3.m1.3.3.3.3" xref="Sx3.E3.m1.3.3.3.3.cmml">⁢</mo><mrow id="Sx3.E3.m1.3.3.3.2.2" xref="Sx3.E3.m1.3.3.3.2.3.cmml"><mo id="Sx3.E3.m1.3.3.3.2.2.3" stretchy="false" xref="Sx3.E3.m1.3.3.3.2.3.cmml">(</mo><msup id="Sx3.E3.m1.2.2.2.1.1.1" xref="Sx3.E3.m1.2.2.2.1.1.1.cmml"><mrow id="Sx3.E3.m1.2.2.2.1.1.1.1.1" xref="Sx3.E3.m1.2.2.2.1.1.1.1.2.cmml"><mo id="Sx3.E3.m1.2.2.2.1.1.1.1.1.2" stretchy="false" xref="Sx3.E3.m1.2.2.2.1.1.1.1.2.cmml">{</mo><msub id="Sx3.E3.m1.2.2.2.1.1.1.1.1.1" xref="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.cmml"><mi id="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.2" xref="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.3" xref="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.E3.m1.2.2.2.1.1.1.1.1.3" stretchy="false" xref="Sx3.E3.m1.2.2.2.1.1.1.1.2.cmml">}</mo></mrow><mi id="Sx3.E3.m1.2.2.2.1.1.1.3" xref="Sx3.E3.m1.2.2.2.1.1.1.3.cmml">K</mi></msup><mo id="Sx3.E3.m1.3.3.3.2.2.4" xref="Sx3.E3.m1.3.3.3.2.3.cmml">,</mo><mrow id="Sx3.E3.m1.3.3.3.2.2.2" xref="Sx3.E3.m1.3.3.3.2.2.2.cmml"><mtext class="ltx_font_smallcaps" id="Sx3.E3.m1.3.3.3.2.2.2.4" xref="Sx3.E3.m1.3.3.3.2.2.2.4a.cmml">concat</mtext><mo id="Sx3.E3.m1.3.3.3.2.2.2.3" xref="Sx3.E3.m1.3.3.3.2.2.2.3.cmml">⁢</mo><mrow id="Sx3.E3.m1.3.3.3.2.2.2.2.2" xref="Sx3.E3.m1.3.3.3.2.2.2.2.3.cmml"><mo id="Sx3.E3.m1.3.3.3.2.2.2.2.2.3" stretchy="false" xref="Sx3.E3.m1.3.3.3.2.2.2.2.3.cmml">(</mo><msub id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.cmml"><mi id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.2" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.2.cmml">θ</mi><msub id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.cmml"><mi id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.2" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.2.cmml">v</mi><mi id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.3" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.3.cmml">i</mi></msub></msub><mo id="Sx3.E3.m1.3.3.3.2.2.2.2.2.4" xref="Sx3.E3.m1.3.3.3.2.2.2.2.3.cmml">,</mo><msub id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.cmml"><mi id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.2" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.2.cmml">θ</mi><msub id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.cmml"><mi id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.2" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.2.cmml">q</mi><mi id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.3" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.3.cmml">i</mi></msub></msub><mo id="Sx3.E3.m1.3.3.3.2.2.2.2.2.5" stretchy="false" xref="Sx3.E3.m1.3.3.3.2.2.2.2.3.cmml">)</mo></mrow></mrow><mo id="Sx3.E3.m1.3.3.3.2.2.5" stretchy="false" xref="Sx3.E3.m1.3.3.3.2.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.E3.m1.3b"><apply id="Sx3.E3.m1.3.3.cmml" xref="Sx3.E3.m1.3.3"><eq id="Sx3.E3.m1.3.3.4.cmml" xref="Sx3.E3.m1.3.3.4"></eq><apply id="Sx3.E3.m1.1.1.1.cmml" xref="Sx3.E3.m1.1.1.1"><csymbol cd="ambiguous" id="Sx3.E3.m1.1.1.1.2.cmml" xref="Sx3.E3.m1.1.1.1">superscript</csymbol><set id="Sx3.E3.m1.1.1.1.1.2.cmml" xref="Sx3.E3.m1.1.1.1.1.1"><apply id="Sx3.E3.m1.1.1.1.1.1.1.cmml" xref="Sx3.E3.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.E3.m1.1.1.1.1.1.1.1.cmml" xref="Sx3.E3.m1.1.1.1.1.1.1">subscript</csymbol><apply id="Sx3.E3.m1.1.1.1.1.1.1.2.cmml" xref="Sx3.E3.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.E3.m1.1.1.1.1.1.1.2.1.cmml" xref="Sx3.E3.m1.1.1.1.1.1.1">superscript</csymbol><ci id="Sx3.E3.m1.1.1.1.1.1.1.2.2.cmml" xref="Sx3.E3.m1.1.1.1.1.1.1.2.2">𝜃</ci><times id="Sx3.E3.m1.1.1.1.1.1.1.2.3.cmml" xref="Sx3.E3.m1.1.1.1.1.1.1.2.3"></times></apply><ci id="Sx3.E3.m1.1.1.1.1.1.1.3.cmml" xref="Sx3.E3.m1.1.1.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.E3.m1.1.1.1.3.cmml" xref="Sx3.E3.m1.1.1.1.3">𝐾</ci></apply><apply id="Sx3.E3.m1.3.3.3.cmml" xref="Sx3.E3.m1.3.3.3"><times id="Sx3.E3.m1.3.3.3.3.cmml" xref="Sx3.E3.m1.3.3.3.3"></times><ci id="Sx3.E3.m1.3.3.3.4a.cmml" xref="Sx3.E3.m1.3.3.3.4"><mtext class="ltx_mathvariant_bold" id="Sx3.E3.m1.3.3.3.4.cmml" xref="Sx3.E3.m1.3.3.3.4">CA</mtext></ci><interval closure="open" id="Sx3.E3.m1.3.3.3.2.3.cmml" xref="Sx3.E3.m1.3.3.3.2.2"><apply id="Sx3.E3.m1.2.2.2.1.1.1.cmml" xref="Sx3.E3.m1.2.2.2.1.1.1"><csymbol cd="ambiguous" id="Sx3.E3.m1.2.2.2.1.1.1.2.cmml" xref="Sx3.E3.m1.2.2.2.1.1.1">superscript</csymbol><set id="Sx3.E3.m1.2.2.2.1.1.1.1.2.cmml" xref="Sx3.E3.m1.2.2.2.1.1.1.1.1"><apply id="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.cmml" xref="Sx3.E3.m1.2.2.2.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.1.cmml" xref="Sx3.E3.m1.2.2.2.1.1.1.1.1.1">subscript</csymbol><ci id="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.2.cmml" xref="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.2">𝜃</ci><ci id="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.3.cmml" xref="Sx3.E3.m1.2.2.2.1.1.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.E3.m1.2.2.2.1.1.1.3.cmml" xref="Sx3.E3.m1.2.2.2.1.1.1.3">𝐾</ci></apply><apply id="Sx3.E3.m1.3.3.3.2.2.2.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2"><times id="Sx3.E3.m1.3.3.3.2.2.2.3.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.3"></times><ci id="Sx3.E3.m1.3.3.3.2.2.2.4a.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.4"><mtext class="ltx_font_smallcaps" id="Sx3.E3.m1.3.3.3.2.2.2.4.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.4">concat</mtext></ci><interval closure="open" id="Sx3.E3.m1.3.3.3.2.2.2.2.3.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2"><apply id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1"><csymbol cd="ambiguous" id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.1.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1">subscript</csymbol><ci id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.2.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.2">𝜃</ci><apply id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.1.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3">subscript</csymbol><ci id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.2.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.2">𝑣</ci><ci id="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.3.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.1.1.1.3.3">𝑖</ci></apply></apply><apply id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2"><csymbol cd="ambiguous" id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.1.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2">subscript</csymbol><ci id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.2.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.2">𝜃</ci><apply id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3"><csymbol cd="ambiguous" id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.1.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3">subscript</csymbol><ci id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.2.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.2">𝑞</ci><ci id="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.3.cmml" xref="Sx3.E3.m1.3.3.3.2.2.2.2.2.2.3.3">𝑖</ci></apply></apply></interval></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.E3.m1.3c">\{\theta^{*}_{i}\}^{K}=\textbf{CA}(\{\theta_{i}\}^{K},\textsc{concat}(\theta_{%
v_{i}},\theta_{q_{i}}))</annotation><annotation encoding="application/x-llamapun" id="Sx3.E3.m1.3d">{ italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT = CA ( { italic_θ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT , concat ( italic_θ start_POSTSUBSCRIPT italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT , italic_θ start_POSTSUBSCRIPT italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(3)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p5.17">where <math alttext="\{\theta^{*}_{i}\}^{K}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p5.17.m1.1"><semantics id="Sx3.SSx2.SSSx2.p5.17.m1.1a"><msup id="Sx3.SSx2.SSSx2.p5.17.m1.1.1" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.cmml"><mrow id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.2.cmml"><mo id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.2" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.2.cmml">{</mo><msubsup id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.2" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.3.cmml">i</mi><mo id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.3" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.3.cmml">∗</mo></msubsup><mo id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.3" stretchy="false" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.2.cmml">}</mo></mrow><mi id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.3" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.3.cmml">K</mi></msup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p5.17.m1.1b"><apply id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1">superscript</csymbol><set id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1"><apply id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1">subscript</csymbol><apply id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.1.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1">superscript</csymbol><ci id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.2.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.2">𝜃</ci><times id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.3.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.2.3"></times></apply><ci id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.SSx2.SSSx2.p5.17.m1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p5.17.m1.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p5.17.m1.1c">\{\theta^{*}_{i}\}^{K}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p5.17.m1.1d">{ italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT</annotation></semantics></math> denotes the query-enhanced compressed prompts of retrieved documents.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p6">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p6.1"><span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p6.1.1">How to utilize the document retrieval scores to guide the aggregation process?</span>
During the retrieval process of most retrievers, they assign a confidence score to each retrieved document based on metrics such as embedding similarity. In the following text, we will use the term ”retrieval score” to represent this score.
While determining whether a document can truly answer a question based on an image remains challenging, the retrieval score offers a relatively reliable metric for this purpose. Based on the principles of retrieval mechanisms, documents with higher retrieval scores are generally considered to provide more relevant and useful information for the given image and question. <cite class="ltx_cite ltx_citemacro_citet">Lin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite> uses the retrieval scores as a reference metric for selecting the final answer during the inference process, but it does not utilize this crucial metric in the training process. We try to utilize the retrieval scores to guide the process of aggregating information from multiple documents’ compressed prompts. Based on the above, we propose a strategy called <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p6.1.2">R</span>etrieval-<span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p6.1.3">G</span>uided <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p6.1.4">C</span>ross-<span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p6.1.5">A</span>ttention (RGCA), which integrates retrieval confidence scores into the attention computation process of the original cross-attention mechanism.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p7">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p7.1">The retrieval-guided cross-attention block not only considers the embedding similarity between compressed prompts but also assigns more attention to the compressed prompts corresponding to documents with higher retrieval scores. We denote the retrieval-guided cross-attention block as <math alttext="\textbf{CA}_{r}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p7.1.m1.1"><semantics id="Sx3.SSx2.SSSx2.p7.1.m1.1a"><msub id="Sx3.SSx2.SSSx2.p7.1.m1.1.1" xref="Sx3.SSx2.SSSx2.p7.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="Sx3.SSx2.SSSx2.p7.1.m1.1.1.2" xref="Sx3.SSx2.SSSx2.p7.1.m1.1.1.2a.cmml">CA</mtext><mi id="Sx3.SSx2.SSSx2.p7.1.m1.1.1.3" xref="Sx3.SSx2.SSSx2.p7.1.m1.1.1.3.cmml">r</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p7.1.m1.1b"><apply id="Sx3.SSx2.SSSx2.p7.1.m1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p7.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p7.1.m1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p7.1.m1.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p7.1.m1.1.1.2a.cmml" xref="Sx3.SSx2.SSSx2.p7.1.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="Sx3.SSx2.SSSx2.p7.1.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p7.1.m1.1.1.2">CA</mtext></ci><ci id="Sx3.SSx2.SSSx2.p7.1.m1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p7.1.m1.1.1.3">𝑟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p7.1.m1.1c">\textbf{CA}_{r}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p7.1.m1.1d">CA start_POSTSUBSCRIPT italic_r end_POSTSUBSCRIPT</annotation></semantics></math>, a forward pass of this module can be expressed as:</p>
<table class="ltx_equation ltx_eqn_table" id="Sx3.E4">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\theta^{*}_{vq_{i}}=\textbf{CA}_{r}(\theta_{vq_{i}},\{d^{*}_{i}\}^{K},\{p_{i}%
\}^{K})" class="ltx_Math" display="block" id="Sx3.E4.m1.3"><semantics id="Sx3.E4.m1.3a"><mrow id="Sx3.E4.m1.3.3" xref="Sx3.E4.m1.3.3.cmml"><msubsup id="Sx3.E4.m1.3.3.5" xref="Sx3.E4.m1.3.3.5.cmml"><mi id="Sx3.E4.m1.3.3.5.2.2" xref="Sx3.E4.m1.3.3.5.2.2.cmml">θ</mi><mrow id="Sx3.E4.m1.3.3.5.3" xref="Sx3.E4.m1.3.3.5.3.cmml"><mi id="Sx3.E4.m1.3.3.5.3.2" xref="Sx3.E4.m1.3.3.5.3.2.cmml">v</mi><mo id="Sx3.E4.m1.3.3.5.3.1" xref="Sx3.E4.m1.3.3.5.3.1.cmml">⁢</mo><msub id="Sx3.E4.m1.3.3.5.3.3" xref="Sx3.E4.m1.3.3.5.3.3.cmml"><mi id="Sx3.E4.m1.3.3.5.3.3.2" xref="Sx3.E4.m1.3.3.5.3.3.2.cmml">q</mi><mi id="Sx3.E4.m1.3.3.5.3.3.3" xref="Sx3.E4.m1.3.3.5.3.3.3.cmml">i</mi></msub></mrow><mo id="Sx3.E4.m1.3.3.5.2.3" xref="Sx3.E4.m1.3.3.5.2.3.cmml">∗</mo></msubsup><mo id="Sx3.E4.m1.3.3.4" xref="Sx3.E4.m1.3.3.4.cmml">=</mo><mrow id="Sx3.E4.m1.3.3.3" xref="Sx3.E4.m1.3.3.3.cmml"><msub id="Sx3.E4.m1.3.3.3.5" xref="Sx3.E4.m1.3.3.3.5.cmml"><mtext class="ltx_mathvariant_bold" id="Sx3.E4.m1.3.3.3.5.2" xref="Sx3.E4.m1.3.3.3.5.2a.cmml">CA</mtext><mi id="Sx3.E4.m1.3.3.3.5.3" xref="Sx3.E4.m1.3.3.3.5.3.cmml">r</mi></msub><mo id="Sx3.E4.m1.3.3.3.4" xref="Sx3.E4.m1.3.3.3.4.cmml">⁢</mo><mrow id="Sx3.E4.m1.3.3.3.3.3" xref="Sx3.E4.m1.3.3.3.3.4.cmml"><mo id="Sx3.E4.m1.3.3.3.3.3.4" stretchy="false" xref="Sx3.E4.m1.3.3.3.3.4.cmml">(</mo><msub id="Sx3.E4.m1.1.1.1.1.1.1" xref="Sx3.E4.m1.1.1.1.1.1.1.cmml"><mi id="Sx3.E4.m1.1.1.1.1.1.1.2" xref="Sx3.E4.m1.1.1.1.1.1.1.2.cmml">θ</mi><mrow id="Sx3.E4.m1.1.1.1.1.1.1.3" xref="Sx3.E4.m1.1.1.1.1.1.1.3.cmml"><mi id="Sx3.E4.m1.1.1.1.1.1.1.3.2" xref="Sx3.E4.m1.1.1.1.1.1.1.3.2.cmml">v</mi><mo id="Sx3.E4.m1.1.1.1.1.1.1.3.1" xref="Sx3.E4.m1.1.1.1.1.1.1.3.1.cmml">⁢</mo><msub id="Sx3.E4.m1.1.1.1.1.1.1.3.3" xref="Sx3.E4.m1.1.1.1.1.1.1.3.3.cmml"><mi id="Sx3.E4.m1.1.1.1.1.1.1.3.3.2" xref="Sx3.E4.m1.1.1.1.1.1.1.3.3.2.cmml">q</mi><mi id="Sx3.E4.m1.1.1.1.1.1.1.3.3.3" xref="Sx3.E4.m1.1.1.1.1.1.1.3.3.3.cmml">i</mi></msub></mrow></msub><mo id="Sx3.E4.m1.3.3.3.3.3.5" xref="Sx3.E4.m1.3.3.3.3.4.cmml">,</mo><msup id="Sx3.E4.m1.2.2.2.2.2.2" xref="Sx3.E4.m1.2.2.2.2.2.2.cmml"><mrow id="Sx3.E4.m1.2.2.2.2.2.2.1.1" xref="Sx3.E4.m1.2.2.2.2.2.2.1.2.cmml"><mo id="Sx3.E4.m1.2.2.2.2.2.2.1.1.2" stretchy="false" xref="Sx3.E4.m1.2.2.2.2.2.2.1.2.cmml">{</mo><msubsup id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.cmml"><mi id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.2" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.2.cmml">d</mi><mi id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.3" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.3.cmml">i</mi><mo id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.3" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.3.cmml">∗</mo></msubsup><mo id="Sx3.E4.m1.2.2.2.2.2.2.1.1.3" stretchy="false" xref="Sx3.E4.m1.2.2.2.2.2.2.1.2.cmml">}</mo></mrow><mi id="Sx3.E4.m1.2.2.2.2.2.2.3" xref="Sx3.E4.m1.2.2.2.2.2.2.3.cmml">K</mi></msup><mo id="Sx3.E4.m1.3.3.3.3.3.6" xref="Sx3.E4.m1.3.3.3.3.4.cmml">,</mo><msup id="Sx3.E4.m1.3.3.3.3.3.3" xref="Sx3.E4.m1.3.3.3.3.3.3.cmml"><mrow id="Sx3.E4.m1.3.3.3.3.3.3.1.1" xref="Sx3.E4.m1.3.3.3.3.3.3.1.2.cmml"><mo id="Sx3.E4.m1.3.3.3.3.3.3.1.1.2" stretchy="false" xref="Sx3.E4.m1.3.3.3.3.3.3.1.2.cmml">{</mo><msub id="Sx3.E4.m1.3.3.3.3.3.3.1.1.1" xref="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.cmml"><mi id="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.2" xref="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.2.cmml">p</mi><mi id="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.3" xref="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.E4.m1.3.3.3.3.3.3.1.1.3" stretchy="false" xref="Sx3.E4.m1.3.3.3.3.3.3.1.2.cmml">}</mo></mrow><mi id="Sx3.E4.m1.3.3.3.3.3.3.3" xref="Sx3.E4.m1.3.3.3.3.3.3.3.cmml">K</mi></msup><mo id="Sx3.E4.m1.3.3.3.3.3.7" stretchy="false" xref="Sx3.E4.m1.3.3.3.3.4.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.E4.m1.3b"><apply id="Sx3.E4.m1.3.3.cmml" xref="Sx3.E4.m1.3.3"><eq id="Sx3.E4.m1.3.3.4.cmml" xref="Sx3.E4.m1.3.3.4"></eq><apply id="Sx3.E4.m1.3.3.5.cmml" xref="Sx3.E4.m1.3.3.5"><csymbol cd="ambiguous" id="Sx3.E4.m1.3.3.5.1.cmml" xref="Sx3.E4.m1.3.3.5">subscript</csymbol><apply id="Sx3.E4.m1.3.3.5.2.cmml" xref="Sx3.E4.m1.3.3.5"><csymbol cd="ambiguous" id="Sx3.E4.m1.3.3.5.2.1.cmml" xref="Sx3.E4.m1.3.3.5">superscript</csymbol><ci id="Sx3.E4.m1.3.3.5.2.2.cmml" xref="Sx3.E4.m1.3.3.5.2.2">𝜃</ci><times id="Sx3.E4.m1.3.3.5.2.3.cmml" xref="Sx3.E4.m1.3.3.5.2.3"></times></apply><apply id="Sx3.E4.m1.3.3.5.3.cmml" xref="Sx3.E4.m1.3.3.5.3"><times id="Sx3.E4.m1.3.3.5.3.1.cmml" xref="Sx3.E4.m1.3.3.5.3.1"></times><ci id="Sx3.E4.m1.3.3.5.3.2.cmml" xref="Sx3.E4.m1.3.3.5.3.2">𝑣</ci><apply id="Sx3.E4.m1.3.3.5.3.3.cmml" xref="Sx3.E4.m1.3.3.5.3.3"><csymbol cd="ambiguous" id="Sx3.E4.m1.3.3.5.3.3.1.cmml" xref="Sx3.E4.m1.3.3.5.3.3">subscript</csymbol><ci id="Sx3.E4.m1.3.3.5.3.3.2.cmml" xref="Sx3.E4.m1.3.3.5.3.3.2">𝑞</ci><ci id="Sx3.E4.m1.3.3.5.3.3.3.cmml" xref="Sx3.E4.m1.3.3.5.3.3.3">𝑖</ci></apply></apply></apply><apply id="Sx3.E4.m1.3.3.3.cmml" xref="Sx3.E4.m1.3.3.3"><times id="Sx3.E4.m1.3.3.3.4.cmml" xref="Sx3.E4.m1.3.3.3.4"></times><apply id="Sx3.E4.m1.3.3.3.5.cmml" xref="Sx3.E4.m1.3.3.3.5"><csymbol cd="ambiguous" id="Sx3.E4.m1.3.3.3.5.1.cmml" xref="Sx3.E4.m1.3.3.3.5">subscript</csymbol><ci id="Sx3.E4.m1.3.3.3.5.2a.cmml" xref="Sx3.E4.m1.3.3.3.5.2"><mtext class="ltx_mathvariant_bold" id="Sx3.E4.m1.3.3.3.5.2.cmml" xref="Sx3.E4.m1.3.3.3.5.2">CA</mtext></ci><ci id="Sx3.E4.m1.3.3.3.5.3.cmml" xref="Sx3.E4.m1.3.3.3.5.3">𝑟</ci></apply><vector id="Sx3.E4.m1.3.3.3.3.4.cmml" xref="Sx3.E4.m1.3.3.3.3.3"><apply id="Sx3.E4.m1.1.1.1.1.1.1.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.E4.m1.1.1.1.1.1.1.1.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1">subscript</csymbol><ci id="Sx3.E4.m1.1.1.1.1.1.1.2.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1.2">𝜃</ci><apply id="Sx3.E4.m1.1.1.1.1.1.1.3.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1.3"><times id="Sx3.E4.m1.1.1.1.1.1.1.3.1.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1.3.1"></times><ci id="Sx3.E4.m1.1.1.1.1.1.1.3.2.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1.3.2">𝑣</ci><apply id="Sx3.E4.m1.1.1.1.1.1.1.3.3.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="Sx3.E4.m1.1.1.1.1.1.1.3.3.1.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1.3.3">subscript</csymbol><ci id="Sx3.E4.m1.1.1.1.1.1.1.3.3.2.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1.3.3.2">𝑞</ci><ci id="Sx3.E4.m1.1.1.1.1.1.1.3.3.3.cmml" xref="Sx3.E4.m1.1.1.1.1.1.1.3.3.3">𝑖</ci></apply></apply></apply><apply id="Sx3.E4.m1.2.2.2.2.2.2.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="Sx3.E4.m1.2.2.2.2.2.2.2.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2">superscript</csymbol><set id="Sx3.E4.m1.2.2.2.2.2.2.1.2.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1"><apply id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.1.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1">subscript</csymbol><apply id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1"><csymbol cd="ambiguous" id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.1.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1">superscript</csymbol><ci id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.2.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.2">𝑑</ci><times id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.3.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.2.3"></times></apply><ci id="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.3.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.E4.m1.2.2.2.2.2.2.3.cmml" xref="Sx3.E4.m1.2.2.2.2.2.2.3">𝐾</ci></apply><apply id="Sx3.E4.m1.3.3.3.3.3.3.cmml" xref="Sx3.E4.m1.3.3.3.3.3.3"><csymbol cd="ambiguous" id="Sx3.E4.m1.3.3.3.3.3.3.2.cmml" xref="Sx3.E4.m1.3.3.3.3.3.3">superscript</csymbol><set id="Sx3.E4.m1.3.3.3.3.3.3.1.2.cmml" xref="Sx3.E4.m1.3.3.3.3.3.3.1.1"><apply id="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.cmml" xref="Sx3.E4.m1.3.3.3.3.3.3.1.1.1"><csymbol cd="ambiguous" id="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.1.cmml" xref="Sx3.E4.m1.3.3.3.3.3.3.1.1.1">subscript</csymbol><ci id="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.2.cmml" xref="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.2">𝑝</ci><ci id="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.3.cmml" xref="Sx3.E4.m1.3.3.3.3.3.3.1.1.1.3">𝑖</ci></apply></set><ci id="Sx3.E4.m1.3.3.3.3.3.3.3.cmml" xref="Sx3.E4.m1.3.3.3.3.3.3.3">𝐾</ci></apply></vector></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.E4.m1.3c">\theta^{*}_{vq_{i}}=\textbf{CA}_{r}(\theta_{vq_{i}},\{d^{*}_{i}\}^{K},\{p_{i}%
\}^{K})</annotation><annotation encoding="application/x-llamapun" id="Sx3.E4.m1.3d">italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_v italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT = CA start_POSTSUBSCRIPT italic_r end_POSTSUBSCRIPT ( italic_θ start_POSTSUBSCRIPT italic_v italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT , { italic_d start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT , { italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT } start_POSTSUPERSCRIPT italic_K end_POSTSUPERSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p7.2">The number of retrieval-guided cross-attention blocks contained in the aggregator of our framework is set to <math alttext="n_{r}=3" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p7.2.m1.1"><semantics id="Sx3.SSx2.SSSx2.p7.2.m1.1a"><mrow id="Sx3.SSx2.SSSx2.p7.2.m1.1.1" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.cmml"><msub id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.cmml"><mi id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.2" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.2.cmml">n</mi><mi id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.3" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.3.cmml">r</mi></msub><mo id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.1" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.1.cmml">=</mo><mn id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.3" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.3.cmml">3</mn></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p7.2.m1.1b"><apply id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1"><eq id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.1"></eq><apply id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.1.cmml" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.2.cmml" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.2">𝑛</ci><ci id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.3.cmml" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.2.3">𝑟</ci></apply><cn id="Sx3.SSx2.SSSx2.p7.2.m1.1.1.3.cmml" type="integer" xref="Sx3.SSx2.SSSx2.p7.2.m1.1.1.3">3</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p7.2.m1.1c">n_{r}=3</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p7.2.m1.1d">italic_n start_POSTSUBSCRIPT italic_r end_POSTSUBSCRIPT = 3</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p8">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p8.1"><span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p8.1.1">How to deal with the irrelevant documents?</span>
When using document bases as the external knowledge source for KB-VQA, the documents retrieved by the multimodal retriever may sometimes be completely irrelevant. Even if they are relevant, they may not provide the model with useful information to give the correct answer. <cite class="ltx_cite ltx_citemacro_citet">Luo et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib21" title="">2021</a>); Lin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite> consider a document to be pseudo-relevant if it contains any of the human-annotated answers. RAVQA-v2 does not consider the impact of irrelevant documents and treats both irrelevant documents and useful documents in the same way, <em class="ltx_emph ltx_font_italic" id="Sx3.SSx2.SSSx2.p8.1.2">i.e.</em> inputting them with corresponding image-question pairs into MLLMs for loss calculation. RAVQA-v2 forces MLLMs to generate correct answers even based on irrelevant documents, which imposes incorrect supervised signals on the MLLM and may cause it to generate information that is absent from the documents after finetuning.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p9">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p9.1">Therefore, to better tackle the effects of irrelevant retrieved documents, we propose a strategy called <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p9.1.1">P</span>seudo-<span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p9.1.2">R</span>elevance-based <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p9.1.3">B</span>ackpropagation <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx2.p9.1.4">D</span>ropout (PRDB), which only computes the gradients of the corresponding compressed prompts of the pseudo-relevant documents.</p>
</div>
<div class="ltx_para" id="Sx3.SSx2.SSSx2.p10">
<p class="ltx_p" id="Sx3.SSx2.SSSx2.p10.1">Specifically, after hyperMLLM converts all documents into compressed prompts, we apply a stop gradient operation, <em class="ltx_emph ltx_font_italic" id="Sx3.SSx2.SSSx2.p10.1.1">i.e.</em> <span class="ltx_text ltx_font_smallcaps" id="Sx3.SSx2.SSSx2.p10.1.2">stopgrad</span>(<math alttext="g_{hyper}({d^{k}_{i}},\theta_{d})" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx2.p10.1.m1.2"><semantics id="Sx3.SSx2.SSSx2.p10.1.m1.2a"><mrow id="Sx3.SSx2.SSSx2.p10.1.m1.2.2" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.cmml"><msub id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.cmml"><mi id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.2" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.2.cmml">g</mi><mrow id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.cmml"><mi id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.2" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.2.cmml">h</mi><mo id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.3" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.3.cmml">y</mi><mo id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1a" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.4" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.4.cmml">p</mi><mo id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1b" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.5" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.5.cmml">e</mi><mo id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1c" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.6" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.6.cmml">r</mi></mrow></msub><mo id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.3" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.3.cmml">⁢</mo><mrow id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.3.cmml"><mo id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.3" stretchy="false" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.3.cmml">(</mo><msubsup id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.cmml"><mi id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.2" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.2.cmml">d</mi><mi id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.3" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.3.cmml">i</mi><mi id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.3" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.3.cmml">k</mi></msubsup><mo id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.4" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.3.cmml">,</mo><msub id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.cmml"><mi id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.2" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.2.cmml">θ</mi><mi id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.3" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.3.cmml">d</mi></msub><mo id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.5" stretchy="false" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.3.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx2.p10.1.m1.2b"><apply id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2"><times id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.3.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.3"></times><apply id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.1.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.2.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.2">𝑔</ci><apply id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3"><times id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.1"></times><ci id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.2.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.2">ℎ</ci><ci id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.3.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.3">𝑦</ci><ci id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.4.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.4">𝑝</ci><ci id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.5.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.5">𝑒</ci><ci id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.6.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.4.3.6">𝑟</ci></apply></apply><interval closure="open" id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.3.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2"><apply id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.1.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1">subscript</csymbol><apply id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.1.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1">superscript</csymbol><ci id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.2.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.2">𝑑</ci><ci id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.3.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.3.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.1.1.1.1.1.3">𝑖</ci></apply><apply id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.1.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2">subscript</csymbol><ci id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.2.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.2">𝜃</ci><ci id="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.3.cmml" xref="Sx3.SSx2.SSSx2.p10.1.m1.2.2.2.2.2.3">𝑑</ci></apply></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx2.p10.1.m1.2c">g_{hyper}({d^{k}_{i}},\theta_{d})</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx2.p10.1.m1.2d">italic_g start_POSTSUBSCRIPT italic_h italic_y italic_p italic_e italic_r end_POSTSUBSCRIPT ( italic_d start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT )</annotation></semantics></math>) to the compressed prompts of those irrelevant documents before they are passed into the aggregator.
In this way, after loss calculation and gradient backpropagation, the gradients of the compressed prompts corresponding to irrelevant documents will be truncated, preventing them from leading the learnable prompts’ weights to update in the wrong direction.</p>
</div>
</section>
<section class="ltx_subsubsection" id="Sx3.SSx2.SSSx3">
<h4 class="ltx_title ltx_title_subsubsection">Modulating the baseMLLM with aggregated prompts</h4>
<div class="ltx_para" id="Sx3.SSx2.SSSx3.p1">
<p class="ltx_p" id="Sx3.SSx2.SSSx3.p1.8">After aggregating the compressed prompts in the aggregator network, we have the documents-based compressed prompts of vision and question, which is denoted as <math alttext="\theta^{*}_{vq_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.1.m1.1"><semantics id="Sx3.SSx2.SSSx3.p1.1.m1.1a"><msubsup id="Sx3.SSx2.SSSx3.p1.1.m1.1.1" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.cmml"><mi id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.2" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.2" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.1" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.1.cmml">⁢</mo><msub id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.cmml"><mi id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.2" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.3" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.3.cmml">i</mi></msub></mrow><mo id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.3" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.1.m1.1b"><apply id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1">subscript</csymbol><apply id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.1.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1">superscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.2.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.2">𝜃</ci><times id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.3.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.2.3"></times></apply><apply id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3"><times id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.2">𝑣</ci><apply id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.1.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.2.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.3.cmml" xref="Sx3.SSx2.SSSx3.p1.1.m1.1.1.3.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.1.m1.1c">\theta^{*}_{vq_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.1.m1.1d">italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_v italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>. Then we convert <math alttext="\theta^{*}_{vq_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.2.m2.1"><semantics id="Sx3.SSx2.SSSx3.p1.2.m2.1a"><msubsup id="Sx3.SSx2.SSSx3.p1.2.m2.1.1" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.cmml"><mi id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.2" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.2" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.1" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.1.cmml">⁢</mo><msub id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.cmml"><mi id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.2" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.3" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.3.cmml">i</mi></msub></mrow><mo id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.3" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.2.m2.1b"><apply id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1">subscript</csymbol><apply id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.1.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1">superscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.2.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.2">𝜃</ci><times id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.3.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.2.3"></times></apply><apply id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3"><times id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.2">𝑣</ci><apply id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.1.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.2.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.3.cmml" xref="Sx3.SSx2.SSSx3.p1.2.m2.1.1.3.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.2.m2.1c">\theta^{*}_{vq_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.2.m2.1d">italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_v italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> into a P-Tuning v2 modulation for the downstream baseMLLM, which involves adding a small amount of KV cache at each layer of the baseMLLM. Given that different layers of MLLM process information at varying levels of abstraction and complexity, we employ a set of <math alttext="m" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.3.m3.1"><semantics id="Sx3.SSx2.SSSx3.p1.3.m3.1a"><mi id="Sx3.SSx2.SSSx3.p1.3.m3.1.1" xref="Sx3.SSx2.SSSx3.p1.3.m3.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.3.m3.1b"><ci id="Sx3.SSx2.SSSx3.p1.3.m3.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.3.m3.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.3.m3.1c">m</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.3.m3.1d">italic_m</annotation></semantics></math> Multi-Layer Perceptrons (MLPs) for projecting <math alttext="\theta^{*}_{vq_{i}}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.4.m4.1"><semantics id="Sx3.SSx2.SSSx3.p1.4.m4.1a"><msubsup id="Sx3.SSx2.SSSx3.p1.4.m4.1.1" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.cmml"><mi id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.2" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.2.cmml">θ</mi><mrow id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.2" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.2.cmml">v</mi><mo id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.1" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.1.cmml">⁢</mo><msub id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.cmml"><mi id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.2" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.2.cmml">q</mi><mi id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.3" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.3.cmml">i</mi></msub></mrow><mo id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.3" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.3.cmml">∗</mo></msubsup><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.4.m4.1b"><apply id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1">subscript</csymbol><apply id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.1.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1">superscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.2.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.2">𝜃</ci><times id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.3.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.2.3"></times></apply><apply id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3"><times id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.2">𝑣</ci><apply id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.1.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3">subscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.2.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.2">𝑞</ci><ci id="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.3.cmml" xref="Sx3.SSx2.SSSx3.p1.4.m4.1.1.3.3.3">𝑖</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.4.m4.1c">\theta^{*}_{vq_{i}}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.4.m4.1d">italic_θ start_POSTSUPERSCRIPT ∗ end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_v italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> into additional KV cache of each layer in the baseMLLM. <math alttext="m" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.5.m5.1"><semantics id="Sx3.SSx2.SSSx3.p1.5.m5.1a"><mi id="Sx3.SSx2.SSSx3.p1.5.m5.1.1" xref="Sx3.SSx2.SSSx3.p1.5.m5.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.5.m5.1b"><ci id="Sx3.SSx2.SSSx3.p1.5.m5.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.5.m5.1.1">𝑚</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.5.m5.1c">m</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.5.m5.1d">italic_m</annotation></semantics></math> is the number of layers in the baseMLLM. Here, we denote the P-Tuning v2 modulation as <math alttext="\Theta_{i}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.6.m6.1"><semantics id="Sx3.SSx2.SSSx3.p1.6.m6.1a"><msub id="Sx3.SSx2.SSSx3.p1.6.m6.1.1" xref="Sx3.SSx2.SSSx3.p1.6.m6.1.1.cmml"><mi id="Sx3.SSx2.SSSx3.p1.6.m6.1.1.2" mathvariant="normal" xref="Sx3.SSx2.SSSx3.p1.6.m6.1.1.2.cmml">Θ</mi><mi id="Sx3.SSx2.SSSx3.p1.6.m6.1.1.3" xref="Sx3.SSx2.SSSx3.p1.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.6.m6.1b"><apply id="Sx3.SSx2.SSSx3.p1.6.m6.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.6.m6.1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.6.m6.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.6.m6.1.1.2.cmml" xref="Sx3.SSx2.SSSx3.p1.6.m6.1.1.2">Θ</ci><ci id="Sx3.SSx2.SSSx3.p1.6.m6.1.1.3.cmml" xref="Sx3.SSx2.SSSx3.p1.6.m6.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.6.m6.1c">\Theta_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.6.m6.1d">roman_Θ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> and the baseMLLM as <math alttext="g_{base}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.7.m7.1"><semantics id="Sx3.SSx2.SSSx3.p1.7.m7.1a"><msub id="Sx3.SSx2.SSSx3.p1.7.m7.1.1" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.cmml"><mi id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.2" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.2.cmml">g</mi><mrow id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.cmml"><mi id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.2" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.2.cmml">b</mi><mo id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.1" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.3" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.3.cmml">a</mi><mo id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.1a" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.4" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.4.cmml">s</mi><mo id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.1b" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.1.cmml">⁢</mo><mi id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.5" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.5.cmml">e</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.7.m7.1b"><apply id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.2.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.2">𝑔</ci><apply id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3"><times id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.1.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.1"></times><ci id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.2.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.2">𝑏</ci><ci id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.3.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.3">𝑎</ci><ci id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.4.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.4">𝑠</ci><ci id="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.5.cmml" xref="Sx3.SSx2.SSSx3.p1.7.m7.1.1.3.5">𝑒</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.7.m7.1c">g_{base}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.7.m7.1d">italic_g start_POSTSUBSCRIPT italic_b italic_a italic_s italic_e end_POSTSUBSCRIPT</annotation></semantics></math>.
Our framework can be optimized in an end-to-end manner using the loss function <math alttext="\mathcal{L}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.8.m8.1"><semantics id="Sx3.SSx2.SSSx3.p1.8.m8.1a"><mi class="ltx_font_mathcaligraphic" id="Sx3.SSx2.SSSx3.p1.8.m8.1.1" xref="Sx3.SSx2.SSSx3.p1.8.m8.1.1.cmml">ℒ</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.8.m8.1b"><ci id="Sx3.SSx2.SSSx3.p1.8.m8.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.8.m8.1.1">ℒ</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.8.m8.1c">\mathcal{L}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.8.m8.1d">caligraphic_L</annotation></semantics></math>, namely the language modeling loss based on the ground truth answer:</p>
<table class="ltx_equation ltx_eqn_table" id="Sx3.E5">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\underset{\theta_{d},\theta_{vq},h}{\min}\frac{1}{N}\sum^{N}_{i=1}\mathcal{L}(%
g_{base}(v_{i},q_{i};\Theta_{i}),a_{i})" class="ltx_Math" display="block" id="Sx3.E5.m1.5"><semantics id="Sx3.E5.m1.5a"><mrow id="Sx3.E5.m1.5.5" xref="Sx3.E5.m1.5.5.cmml"><munder accentunder="true" id="Sx3.E5.m1.3.3" xref="Sx3.E5.m1.3.3.cmml"><mi id="Sx3.E5.m1.3.3.4" xref="Sx3.E5.m1.3.3.4.cmml">min</mi><mrow id="Sx3.E5.m1.3.3.3.3" xref="Sx3.E5.m1.3.3.3.4.cmml"><msub id="Sx3.E5.m1.2.2.2.2.1" xref="Sx3.E5.m1.2.2.2.2.1.cmml"><mi id="Sx3.E5.m1.2.2.2.2.1.2" xref="Sx3.E5.m1.2.2.2.2.1.2.cmml">θ</mi><mi id="Sx3.E5.m1.2.2.2.2.1.3" xref="Sx3.E5.m1.2.2.2.2.1.3.cmml">d</mi></msub><mo id="Sx3.E5.m1.3.3.3.3.3" xref="Sx3.E5.m1.3.3.3.4.cmml">,</mo><msub id="Sx3.E5.m1.3.3.3.3.2" xref="Sx3.E5.m1.3.3.3.3.2.cmml"><mi id="Sx3.E5.m1.3.3.3.3.2.2" xref="Sx3.E5.m1.3.3.3.3.2.2.cmml">θ</mi><mrow id="Sx3.E5.m1.3.3.3.3.2.3" xref="Sx3.E5.m1.3.3.3.3.2.3.cmml"><mi id="Sx3.E5.m1.3.3.3.3.2.3.2" xref="Sx3.E5.m1.3.3.3.3.2.3.2.cmml">v</mi><mo id="Sx3.E5.m1.3.3.3.3.2.3.1" xref="Sx3.E5.m1.3.3.3.3.2.3.1.cmml">⁢</mo><mi id="Sx3.E5.m1.3.3.3.3.2.3.3" xref="Sx3.E5.m1.3.3.3.3.2.3.3.cmml">q</mi></mrow></msub><mo id="Sx3.E5.m1.3.3.3.3.4" xref="Sx3.E5.m1.3.3.3.4.cmml">,</mo><mi id="Sx3.E5.m1.1.1.1.1" xref="Sx3.E5.m1.1.1.1.1.cmml">h</mi></mrow></munder><mo id="Sx3.E5.m1.5.5.3" lspace="0.167em" xref="Sx3.E5.m1.5.5.3.cmml">⁢</mo><mfrac id="Sx3.E5.m1.5.5.4" xref="Sx3.E5.m1.5.5.4.cmml"><mn id="Sx3.E5.m1.5.5.4.2" xref="Sx3.E5.m1.5.5.4.2.cmml">1</mn><mi id="Sx3.E5.m1.5.5.4.3" xref="Sx3.E5.m1.5.5.4.3.cmml">N</mi></mfrac><mo id="Sx3.E5.m1.5.5.3a" xref="Sx3.E5.m1.5.5.3.cmml">⁢</mo><mrow id="Sx3.E5.m1.5.5.2" xref="Sx3.E5.m1.5.5.2.cmml"><munderover id="Sx3.E5.m1.5.5.2.3" xref="Sx3.E5.m1.5.5.2.3.cmml"><mo id="Sx3.E5.m1.5.5.2.3.2.2" movablelimits="false" xref="Sx3.E5.m1.5.5.2.3.2.2.cmml">∑</mo><mrow id="Sx3.E5.m1.5.5.2.3.3" xref="Sx3.E5.m1.5.5.2.3.3.cmml"><mi id="Sx3.E5.m1.5.5.2.3.3.2" xref="Sx3.E5.m1.5.5.2.3.3.2.cmml">i</mi><mo id="Sx3.E5.m1.5.5.2.3.3.1" xref="Sx3.E5.m1.5.5.2.3.3.1.cmml">=</mo><mn id="Sx3.E5.m1.5.5.2.3.3.3" xref="Sx3.E5.m1.5.5.2.3.3.3.cmml">1</mn></mrow><mi id="Sx3.E5.m1.5.5.2.3.2.3" xref="Sx3.E5.m1.5.5.2.3.2.3.cmml">N</mi></munderover><mrow id="Sx3.E5.m1.5.5.2.2" xref="Sx3.E5.m1.5.5.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="Sx3.E5.m1.5.5.2.2.4" xref="Sx3.E5.m1.5.5.2.2.4.cmml">ℒ</mi><mo id="Sx3.E5.m1.5.5.2.2.3" xref="Sx3.E5.m1.5.5.2.2.3.cmml">⁢</mo><mrow id="Sx3.E5.m1.5.5.2.2.2.2" xref="Sx3.E5.m1.5.5.2.2.2.3.cmml"><mo id="Sx3.E5.m1.5.5.2.2.2.2.3" stretchy="false" xref="Sx3.E5.m1.5.5.2.2.2.3.cmml">(</mo><mrow id="Sx3.E5.m1.4.4.1.1.1.1.1" xref="Sx3.E5.m1.4.4.1.1.1.1.1.cmml"><msub id="Sx3.E5.m1.4.4.1.1.1.1.1.5" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.cmml"><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.5.2" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.2.cmml">g</mi><mrow id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.cmml"><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.2" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.2.cmml">b</mi><mo id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.1" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.1.cmml">⁢</mo><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.3" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.3.cmml">a</mi><mo id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.1a" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.1.cmml">⁢</mo><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.4" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.4.cmml">s</mi><mo id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.1b" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.1.cmml">⁢</mo><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.5" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.5.cmml">e</mi></mrow></msub><mo id="Sx3.E5.m1.4.4.1.1.1.1.1.4" xref="Sx3.E5.m1.4.4.1.1.1.1.1.4.cmml">⁢</mo><mrow id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.4.cmml"><mo id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.4" stretchy="false" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.4.cmml">(</mo><msub id="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1" xref="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.cmml"><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.2" xref="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.2.cmml">v</mi><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.3" xref="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.5" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.4.cmml">,</mo><msub id="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2" xref="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.cmml"><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.2" xref="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.2.cmml">q</mi><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.3" xref="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.3.cmml">i</mi></msub><mo id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.6" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.4.cmml">;</mo><msub id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.cmml"><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.2" mathvariant="normal" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.2.cmml">Θ</mi><mi id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.3" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.3.cmml">i</mi></msub><mo id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.7" stretchy="false" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.4.cmml">)</mo></mrow></mrow><mo id="Sx3.E5.m1.5.5.2.2.2.2.4" xref="Sx3.E5.m1.5.5.2.2.2.3.cmml">,</mo><msub id="Sx3.E5.m1.5.5.2.2.2.2.2" xref="Sx3.E5.m1.5.5.2.2.2.2.2.cmml"><mi id="Sx3.E5.m1.5.5.2.2.2.2.2.2" xref="Sx3.E5.m1.5.5.2.2.2.2.2.2.cmml">a</mi><mi id="Sx3.E5.m1.5.5.2.2.2.2.2.3" xref="Sx3.E5.m1.5.5.2.2.2.2.2.3.cmml">i</mi></msub><mo id="Sx3.E5.m1.5.5.2.2.2.2.5" stretchy="false" xref="Sx3.E5.m1.5.5.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx3.E5.m1.5b"><apply id="Sx3.E5.m1.5.5.cmml" xref="Sx3.E5.m1.5.5"><times id="Sx3.E5.m1.5.5.3.cmml" xref="Sx3.E5.m1.5.5.3"></times><apply id="Sx3.E5.m1.3.3.cmml" xref="Sx3.E5.m1.3.3"><list id="Sx3.E5.m1.3.3.3.4.cmml" xref="Sx3.E5.m1.3.3.3.3"><apply id="Sx3.E5.m1.2.2.2.2.1.cmml" xref="Sx3.E5.m1.2.2.2.2.1"><csymbol cd="ambiguous" id="Sx3.E5.m1.2.2.2.2.1.1.cmml" xref="Sx3.E5.m1.2.2.2.2.1">subscript</csymbol><ci id="Sx3.E5.m1.2.2.2.2.1.2.cmml" xref="Sx3.E5.m1.2.2.2.2.1.2">𝜃</ci><ci id="Sx3.E5.m1.2.2.2.2.1.3.cmml" xref="Sx3.E5.m1.2.2.2.2.1.3">𝑑</ci></apply><apply id="Sx3.E5.m1.3.3.3.3.2.cmml" xref="Sx3.E5.m1.3.3.3.3.2"><csymbol cd="ambiguous" id="Sx3.E5.m1.3.3.3.3.2.1.cmml" xref="Sx3.E5.m1.3.3.3.3.2">subscript</csymbol><ci id="Sx3.E5.m1.3.3.3.3.2.2.cmml" xref="Sx3.E5.m1.3.3.3.3.2.2">𝜃</ci><apply id="Sx3.E5.m1.3.3.3.3.2.3.cmml" xref="Sx3.E5.m1.3.3.3.3.2.3"><times id="Sx3.E5.m1.3.3.3.3.2.3.1.cmml" xref="Sx3.E5.m1.3.3.3.3.2.3.1"></times><ci id="Sx3.E5.m1.3.3.3.3.2.3.2.cmml" xref="Sx3.E5.m1.3.3.3.3.2.3.2">𝑣</ci><ci id="Sx3.E5.m1.3.3.3.3.2.3.3.cmml" xref="Sx3.E5.m1.3.3.3.3.2.3.3">𝑞</ci></apply></apply><ci id="Sx3.E5.m1.1.1.1.1.cmml" xref="Sx3.E5.m1.1.1.1.1">ℎ</ci></list><min id="Sx3.E5.m1.3.3.4.cmml" xref="Sx3.E5.m1.3.3.4"></min></apply><apply id="Sx3.E5.m1.5.5.4.cmml" xref="Sx3.E5.m1.5.5.4"><divide id="Sx3.E5.m1.5.5.4.1.cmml" xref="Sx3.E5.m1.5.5.4"></divide><cn id="Sx3.E5.m1.5.5.4.2.cmml" type="integer" xref="Sx3.E5.m1.5.5.4.2">1</cn><ci id="Sx3.E5.m1.5.5.4.3.cmml" xref="Sx3.E5.m1.5.5.4.3">𝑁</ci></apply><apply id="Sx3.E5.m1.5.5.2.cmml" xref="Sx3.E5.m1.5.5.2"><apply id="Sx3.E5.m1.5.5.2.3.cmml" xref="Sx3.E5.m1.5.5.2.3"><csymbol cd="ambiguous" id="Sx3.E5.m1.5.5.2.3.1.cmml" xref="Sx3.E5.m1.5.5.2.3">subscript</csymbol><apply id="Sx3.E5.m1.5.5.2.3.2.cmml" xref="Sx3.E5.m1.5.5.2.3"><csymbol cd="ambiguous" id="Sx3.E5.m1.5.5.2.3.2.1.cmml" xref="Sx3.E5.m1.5.5.2.3">superscript</csymbol><sum id="Sx3.E5.m1.5.5.2.3.2.2.cmml" xref="Sx3.E5.m1.5.5.2.3.2.2"></sum><ci id="Sx3.E5.m1.5.5.2.3.2.3.cmml" xref="Sx3.E5.m1.5.5.2.3.2.3">𝑁</ci></apply><apply id="Sx3.E5.m1.5.5.2.3.3.cmml" xref="Sx3.E5.m1.5.5.2.3.3"><eq id="Sx3.E5.m1.5.5.2.3.3.1.cmml" xref="Sx3.E5.m1.5.5.2.3.3.1"></eq><ci id="Sx3.E5.m1.5.5.2.3.3.2.cmml" xref="Sx3.E5.m1.5.5.2.3.3.2">𝑖</ci><cn id="Sx3.E5.m1.5.5.2.3.3.3.cmml" type="integer" xref="Sx3.E5.m1.5.5.2.3.3.3">1</cn></apply></apply><apply id="Sx3.E5.m1.5.5.2.2.cmml" xref="Sx3.E5.m1.5.5.2.2"><times id="Sx3.E5.m1.5.5.2.2.3.cmml" xref="Sx3.E5.m1.5.5.2.2.3"></times><ci id="Sx3.E5.m1.5.5.2.2.4.cmml" xref="Sx3.E5.m1.5.5.2.2.4">ℒ</ci><interval closure="open" id="Sx3.E5.m1.5.5.2.2.2.3.cmml" xref="Sx3.E5.m1.5.5.2.2.2.2"><apply id="Sx3.E5.m1.4.4.1.1.1.1.1.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1"><times id="Sx3.E5.m1.4.4.1.1.1.1.1.4.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.4"></times><apply id="Sx3.E5.m1.4.4.1.1.1.1.1.5.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5"><csymbol cd="ambiguous" id="Sx3.E5.m1.4.4.1.1.1.1.1.5.1.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5">subscript</csymbol><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.5.2.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.2">𝑔</ci><apply id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3"><times id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.1.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.1"></times><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.2.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.2">𝑏</ci><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.3.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.3">𝑎</ci><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.4.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.4">𝑠</ci><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.5.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.5.3.5">𝑒</ci></apply></apply><vector id="Sx3.E5.m1.4.4.1.1.1.1.1.3.4.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.3"><apply id="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.1.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.2.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.2">𝑣</ci><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.3.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2"><csymbol cd="ambiguous" id="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.1.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2">subscript</csymbol><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.2.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.2">𝑞</ci><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.3.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.2.2.2.3">𝑖</ci></apply><apply id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3"><csymbol cd="ambiguous" id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.1.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3">subscript</csymbol><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.2.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.2">Θ</ci><ci id="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.3.cmml" xref="Sx3.E5.m1.4.4.1.1.1.1.1.3.3.3.3">𝑖</ci></apply></vector></apply><apply id="Sx3.E5.m1.5.5.2.2.2.2.2.cmml" xref="Sx3.E5.m1.5.5.2.2.2.2.2"><csymbol cd="ambiguous" id="Sx3.E5.m1.5.5.2.2.2.2.2.1.cmml" xref="Sx3.E5.m1.5.5.2.2.2.2.2">subscript</csymbol><ci id="Sx3.E5.m1.5.5.2.2.2.2.2.2.cmml" xref="Sx3.E5.m1.5.5.2.2.2.2.2.2">𝑎</ci><ci id="Sx3.E5.m1.5.5.2.2.2.2.2.3.cmml" xref="Sx3.E5.m1.5.5.2.2.2.2.2.3">𝑖</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.E5.m1.5c">\underset{\theta_{d},\theta_{vq},h}{\min}\frac{1}{N}\sum^{N}_{i=1}\mathcal{L}(%
g_{base}(v_{i},q_{i};\Theta_{i}),a_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx3.E5.m1.5d">start_UNDERACCENT italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT , italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT , italic_h end_UNDERACCENT start_ARG roman_min end_ARG divide start_ARG 1 end_ARG start_ARG italic_N end_ARG ∑ start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT caligraphic_L ( italic_g start_POSTSUBSCRIPT italic_b italic_a italic_s italic_e end_POSTSUBSCRIPT ( italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ; roman_Θ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) , italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="Sx3.SSx2.SSSx3.p1.12">where <math alttext="h" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.9.m1.1"><semantics id="Sx3.SSx2.SSSx3.p1.9.m1.1a"><mi id="Sx3.SSx2.SSSx3.p1.9.m1.1.1" xref="Sx3.SSx2.SSSx3.p1.9.m1.1.1.cmml">h</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.9.m1.1b"><ci id="Sx3.SSx2.SSSx3.p1.9.m1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.9.m1.1.1">ℎ</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.9.m1.1c">h</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.9.m1.1d">italic_h</annotation></semantics></math> includes a single <span class="ltx_text ltx_font_bold" id="Sx3.SSx2.SSSx3.p1.12.1">CA</span> block, <math alttext="n_{r}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.10.m2.1"><semantics id="Sx3.SSx2.SSSx3.p1.10.m2.1a"><msub id="Sx3.SSx2.SSSx3.p1.10.m2.1.1" xref="Sx3.SSx2.SSSx3.p1.10.m2.1.1.cmml"><mi id="Sx3.SSx2.SSSx3.p1.10.m2.1.1.2" xref="Sx3.SSx2.SSSx3.p1.10.m2.1.1.2.cmml">n</mi><mi id="Sx3.SSx2.SSSx3.p1.10.m2.1.1.3" xref="Sx3.SSx2.SSSx3.p1.10.m2.1.1.3.cmml">r</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.10.m2.1b"><apply id="Sx3.SSx2.SSSx3.p1.10.m2.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.10.m2.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.10.m2.1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.10.m2.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.10.m2.1.1.2.cmml" xref="Sx3.SSx2.SSSx3.p1.10.m2.1.1.2">𝑛</ci><ci id="Sx3.SSx2.SSSx3.p1.10.m2.1.1.3.cmml" xref="Sx3.SSx2.SSSx3.p1.10.m2.1.1.3">𝑟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.10.m2.1c">n_{r}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.10.m2.1d">italic_n start_POSTSUBSCRIPT italic_r end_POSTSUBSCRIPT</annotation></semantics></math> <math alttext="\textbf{CA}_{r}" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.11.m3.1"><semantics id="Sx3.SSx2.SSSx3.p1.11.m3.1a"><msub id="Sx3.SSx2.SSSx3.p1.11.m3.1.1" xref="Sx3.SSx2.SSSx3.p1.11.m3.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="Sx3.SSx2.SSSx3.p1.11.m3.1.1.2" xref="Sx3.SSx2.SSSx3.p1.11.m3.1.1.2a.cmml">CA</mtext><mi id="Sx3.SSx2.SSSx3.p1.11.m3.1.1.3" xref="Sx3.SSx2.SSSx3.p1.11.m3.1.1.3.cmml">r</mi></msub><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.11.m3.1b"><apply id="Sx3.SSx2.SSSx3.p1.11.m3.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.11.m3.1.1"><csymbol cd="ambiguous" id="Sx3.SSx2.SSSx3.p1.11.m3.1.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.11.m3.1.1">subscript</csymbol><ci id="Sx3.SSx2.SSSx3.p1.11.m3.1.1.2a.cmml" xref="Sx3.SSx2.SSSx3.p1.11.m3.1.1.2"><mtext class="ltx_mathvariant_bold" id="Sx3.SSx2.SSSx3.p1.11.m3.1.1.2.cmml" xref="Sx3.SSx2.SSSx3.p1.11.m3.1.1.2">CA</mtext></ci><ci id="Sx3.SSx2.SSSx3.p1.11.m3.1.1.3.cmml" xref="Sx3.SSx2.SSSx3.p1.11.m3.1.1.3">𝑟</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.11.m3.1c">\textbf{CA}_{r}</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.11.m3.1d">CA start_POSTSUBSCRIPT italic_r end_POSTSUBSCRIPT</annotation></semantics></math> blocks and a set of MLPs. <math alttext="N" class="ltx_Math" display="inline" id="Sx3.SSx2.SSSx3.p1.12.m4.1"><semantics id="Sx3.SSx2.SSSx3.p1.12.m4.1a"><mi id="Sx3.SSx2.SSSx3.p1.12.m4.1.1" xref="Sx3.SSx2.SSSx3.p1.12.m4.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="Sx3.SSx2.SSSx3.p1.12.m4.1b"><ci id="Sx3.SSx2.SSSx3.p1.12.m4.1.1.cmml" xref="Sx3.SSx2.SSSx3.p1.12.m4.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx3.SSx2.SSSx3.p1.12.m4.1c">N</annotation><annotation encoding="application/x-llamapun" id="Sx3.SSx2.SSSx3.p1.12.m4.1d">italic_N</annotation></semantics></math> is the batch size of training inputs. Depending on whether the hyperMLLM and baseMLLM are initialized from the same MLLM, our framework offers two variants: RACC-<span class="ltx_text ltx_font_typewriter" id="Sx3.SSx2.SSSx3.p1.12.2">homogeneous</span> and RACC-<span class="ltx_text ltx_font_typewriter" id="Sx3.SSx2.SSSx3.p1.12.3">heterogeneous</span>, abbreviated as RACC-<span class="ltx_text ltx_font_typewriter" id="Sx3.SSx2.SSSx3.p1.12.4">homo</span> and RACC-<span class="ltx_text ltx_font_typewriter" id="Sx3.SSx2.SSSx3.p1.12.5">hetero</span>, respectively.</p>
</div>
</section>
</section>
</section>
<section class="ltx_section" id="Sx4">
<h2 class="ltx_title ltx_title_section">Experiments</h2>
<section class="ltx_subsection" id="Sx4.SSx1">
<h3 class="ltx_title ltx_title_subsection">Datasets and Knowledge Sources</h3>
<div class="ltx_para" id="Sx4.SSx1.p1">
<p class="ltx_p" id="Sx4.SSx1.p1.1">We evaluate our framework on OK-VQA <cite class="ltx_cite ltx_citemacro_citep">(Marino et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib23" title="">2019</a>)</cite>, which is the most widely studied KB-VQA dataset.
We also conducted experiments on AOK-VQA <cite class="ltx_cite ltx_citemacro_citep">(Schwenk et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib28" title="">2022</a>)</cite>, which is the successor of OK-VQA.</p>
</div>
<div class="ltx_para" id="Sx4.SSx1.p2">
<p class="ltx_p" id="Sx4.SSx1.p2.1">In terms of the knowledge source, following <cite class="ltx_cite ltx_citemacro_citet">Lin et al. (<a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite>, we adopt Google Search <cite class="ltx_cite ltx_citemacro_citep">(Luo et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib21" title="">2021</a>)</cite> for OKVQA and AOKVQA, which is a textual document base comprised of nearly 200 thousand documents. We also carefully curated a multimodal document source from the Wikipedia Image-Text dataset <cite class="ltx_cite ltx_citemacro_citep">(Srinivasan et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib31" title="">2021</a>)</cite> for OK-VQA to further demonstrate the applicability of our framework on multimodal knowledge sources. In this paper, we use GS and WIT to refer to these two knowledge sources.</p>
</div>
<div class="ltx_para" id="Sx4.SSx1.p3">
<p class="ltx_p" id="Sx4.SSx1.p3.1">We use FLMR <cite class="ltx_cite ltx_citemacro_citep">(Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite> and PREFLMR <cite class="ltx_cite ltx_citemacro_citep">(Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib18" title="">2024b</a>)</cite> as retrievers for document retrieval. The FLMR retriever was used to retrieve information from the GS knowledge source, while the PREFLMR retriever was used to retrieve information from the WIT knowledge source.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx4.SSx2">
<h3 class="ltx_title ltx_title_subsection">Training Setup</h3>
<div class="ltx_para" id="Sx4.SSx2.p1">
<p class="ltx_p" id="Sx4.SSx2.p1.4">Most of the experiments are conducted on a 32G V100 GPU. The chosen optimizer is AdamW. During the first 1000 steps of training, the learning rate linearly increases from <math alttext="10^{-5}" class="ltx_Math" display="inline" id="Sx4.SSx2.p1.1.m1.1"><semantics id="Sx4.SSx2.p1.1.m1.1a"><msup id="Sx4.SSx2.p1.1.m1.1.1" xref="Sx4.SSx2.p1.1.m1.1.1.cmml"><mn id="Sx4.SSx2.p1.1.m1.1.1.2" xref="Sx4.SSx2.p1.1.m1.1.1.2.cmml">10</mn><mrow id="Sx4.SSx2.p1.1.m1.1.1.3" xref="Sx4.SSx2.p1.1.m1.1.1.3.cmml"><mo id="Sx4.SSx2.p1.1.m1.1.1.3a" xref="Sx4.SSx2.p1.1.m1.1.1.3.cmml">−</mo><mn id="Sx4.SSx2.p1.1.m1.1.1.3.2" xref="Sx4.SSx2.p1.1.m1.1.1.3.2.cmml">5</mn></mrow></msup><annotation-xml encoding="MathML-Content" id="Sx4.SSx2.p1.1.m1.1b"><apply id="Sx4.SSx2.p1.1.m1.1.1.cmml" xref="Sx4.SSx2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx2.p1.1.m1.1.1.1.cmml" xref="Sx4.SSx2.p1.1.m1.1.1">superscript</csymbol><cn id="Sx4.SSx2.p1.1.m1.1.1.2.cmml" type="integer" xref="Sx4.SSx2.p1.1.m1.1.1.2">10</cn><apply id="Sx4.SSx2.p1.1.m1.1.1.3.cmml" xref="Sx4.SSx2.p1.1.m1.1.1.3"><minus id="Sx4.SSx2.p1.1.m1.1.1.3.1.cmml" xref="Sx4.SSx2.p1.1.m1.1.1.3"></minus><cn id="Sx4.SSx2.p1.1.m1.1.1.3.2.cmml" type="integer" xref="Sx4.SSx2.p1.1.m1.1.1.3.2">5</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx2.p1.1.m1.1c">10^{-5}</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx2.p1.1.m1.1d">10 start_POSTSUPERSCRIPT - 5 end_POSTSUPERSCRIPT</annotation></semantics></math> to <math alttext="10^{-4}" class="ltx_Math" display="inline" id="Sx4.SSx2.p1.2.m2.1"><semantics id="Sx4.SSx2.p1.2.m2.1a"><msup id="Sx4.SSx2.p1.2.m2.1.1" xref="Sx4.SSx2.p1.2.m2.1.1.cmml"><mn id="Sx4.SSx2.p1.2.m2.1.1.2" xref="Sx4.SSx2.p1.2.m2.1.1.2.cmml">10</mn><mrow id="Sx4.SSx2.p1.2.m2.1.1.3" xref="Sx4.SSx2.p1.2.m2.1.1.3.cmml"><mo id="Sx4.SSx2.p1.2.m2.1.1.3a" xref="Sx4.SSx2.p1.2.m2.1.1.3.cmml">−</mo><mn id="Sx4.SSx2.p1.2.m2.1.1.3.2" xref="Sx4.SSx2.p1.2.m2.1.1.3.2.cmml">4</mn></mrow></msup><annotation-xml encoding="MathML-Content" id="Sx4.SSx2.p1.2.m2.1b"><apply id="Sx4.SSx2.p1.2.m2.1.1.cmml" xref="Sx4.SSx2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="Sx4.SSx2.p1.2.m2.1.1.1.cmml" xref="Sx4.SSx2.p1.2.m2.1.1">superscript</csymbol><cn id="Sx4.SSx2.p1.2.m2.1.1.2.cmml" type="integer" xref="Sx4.SSx2.p1.2.m2.1.1.2">10</cn><apply id="Sx4.SSx2.p1.2.m2.1.1.3.cmml" xref="Sx4.SSx2.p1.2.m2.1.1.3"><minus id="Sx4.SSx2.p1.2.m2.1.1.3.1.cmml" xref="Sx4.SSx2.p1.2.m2.1.1.3"></minus><cn id="Sx4.SSx2.p1.2.m2.1.1.3.2.cmml" type="integer" xref="Sx4.SSx2.p1.2.m2.1.1.3.2">4</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx2.p1.2.m2.1c">10^{-4}</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx2.p1.2.m2.1d">10 start_POSTSUPERSCRIPT - 4 end_POSTSUPERSCRIPT</annotation></semantics></math>. Subsequently, a cosine-decaying scheduler is applied to the learning rate to reduce it from <math alttext="10^{-4}" class="ltx_Math" display="inline" id="Sx4.SSx2.p1.3.m3.1"><semantics id="Sx4.SSx2.p1.3.m3.1a"><msup id="Sx4.SSx2.p1.3.m3.1.1" xref="Sx4.SSx2.p1.3.m3.1.1.cmml"><mn id="Sx4.SSx2.p1.3.m3.1.1.2" xref="Sx4.SSx2.p1.3.m3.1.1.2.cmml">10</mn><mrow id="Sx4.SSx2.p1.3.m3.1.1.3" xref="Sx4.SSx2.p1.3.m3.1.1.3.cmml"><mo id="Sx4.SSx2.p1.3.m3.1.1.3a" xref="Sx4.SSx2.p1.3.m3.1.1.3.cmml">−</mo><mn id="Sx4.SSx2.p1.3.m3.1.1.3.2" xref="Sx4.SSx2.p1.3.m3.1.1.3.2.cmml">4</mn></mrow></msup><annotation-xml encoding="MathML-Content" id="Sx4.SSx2.p1.3.m3.1b"><apply id="Sx4.SSx2.p1.3.m3.1.1.cmml" xref="Sx4.SSx2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="Sx4.SSx2.p1.3.m3.1.1.1.cmml" xref="Sx4.SSx2.p1.3.m3.1.1">superscript</csymbol><cn id="Sx4.SSx2.p1.3.m3.1.1.2.cmml" type="integer" xref="Sx4.SSx2.p1.3.m3.1.1.2">10</cn><apply id="Sx4.SSx2.p1.3.m3.1.1.3.cmml" xref="Sx4.SSx2.p1.3.m3.1.1.3"><minus id="Sx4.SSx2.p1.3.m3.1.1.3.1.cmml" xref="Sx4.SSx2.p1.3.m3.1.1.3"></minus><cn id="Sx4.SSx2.p1.3.m3.1.1.3.2.cmml" type="integer" xref="Sx4.SSx2.p1.3.m3.1.1.3.2">4</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx2.p1.3.m3.1c">10^{-4}</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx2.p1.3.m3.1d">10 start_POSTSUPERSCRIPT - 4 end_POSTSUPERSCRIPT</annotation></semantics></math> to 0. The batch size is set to 2. The hyperparameter <math alttext="K" class="ltx_Math" display="inline" id="Sx4.SSx2.p1.4.m4.1"><semantics id="Sx4.SSx2.p1.4.m4.1a"><mi id="Sx4.SSx2.p1.4.m4.1.1" xref="Sx4.SSx2.p1.4.m4.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx4.SSx2.p1.4.m4.1b"><ci id="Sx4.SSx2.p1.4.m4.1.1.cmml" xref="Sx4.SSx2.p1.4.m4.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx2.p1.4.m4.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx2.p1.4.m4.1d">italic_K</annotation></semantics></math>, <em class="ltx_emph ltx_font_italic" id="Sx4.SSx2.p1.4.1">i.e.</em> the number of retrieved documents for each image-question pair, is always set to 5. Note that during the training process of RACC, all parameters of the hyperMLLM, baseMLLM, and multimodal retrievers are kept frozen.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx4.SSx3">
<h3 class="ltx_title ltx_title_subsection">Evaluation</h3>
<div class="ltx_para" id="Sx4.SSx3.p1">
<p class="ltx_p" id="Sx4.SSx3.p1.4">We evaluate the performance of our framework using the official VQA Accuracy <cite class="ltx_cite ltx_citemacro_citep">(Marino et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib23" title="">2019</a>)</cite>. Let <math alttext="a_{i}" class="ltx_Math" display="inline" id="Sx4.SSx3.p1.1.m1.1"><semantics id="Sx4.SSx3.p1.1.m1.1a"><msub id="Sx4.SSx3.p1.1.m1.1.1" xref="Sx4.SSx3.p1.1.m1.1.1.cmml"><mi id="Sx4.SSx3.p1.1.m1.1.1.2" xref="Sx4.SSx3.p1.1.m1.1.1.2.cmml">a</mi><mi id="Sx4.SSx3.p1.1.m1.1.1.3" xref="Sx4.SSx3.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx4.SSx3.p1.1.m1.1b"><apply id="Sx4.SSx3.p1.1.m1.1.1.cmml" xref="Sx4.SSx3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.1.m1.1.1.1.cmml" xref="Sx4.SSx3.p1.1.m1.1.1">subscript</csymbol><ci id="Sx4.SSx3.p1.1.m1.1.1.2.cmml" xref="Sx4.SSx3.p1.1.m1.1.1.2">𝑎</ci><ci id="Sx4.SSx3.p1.1.m1.1.1.3.cmml" xref="Sx4.SSx3.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx3.p1.1.m1.1c">a_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx3.p1.1.m1.1d">italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> be the list of human-annotated answers of the given image-question pair <math alttext="(v_{i},q_{i})" class="ltx_Math" display="inline" id="Sx4.SSx3.p1.2.m2.2"><semantics id="Sx4.SSx3.p1.2.m2.2a"><mrow id="Sx4.SSx3.p1.2.m2.2.2.2" xref="Sx4.SSx3.p1.2.m2.2.2.3.cmml"><mo id="Sx4.SSx3.p1.2.m2.2.2.2.3" stretchy="false" xref="Sx4.SSx3.p1.2.m2.2.2.3.cmml">(</mo><msub id="Sx4.SSx3.p1.2.m2.1.1.1.1" xref="Sx4.SSx3.p1.2.m2.1.1.1.1.cmml"><mi id="Sx4.SSx3.p1.2.m2.1.1.1.1.2" xref="Sx4.SSx3.p1.2.m2.1.1.1.1.2.cmml">v</mi><mi id="Sx4.SSx3.p1.2.m2.1.1.1.1.3" xref="Sx4.SSx3.p1.2.m2.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx4.SSx3.p1.2.m2.2.2.2.4" xref="Sx4.SSx3.p1.2.m2.2.2.3.cmml">,</mo><msub id="Sx4.SSx3.p1.2.m2.2.2.2.2" xref="Sx4.SSx3.p1.2.m2.2.2.2.2.cmml"><mi id="Sx4.SSx3.p1.2.m2.2.2.2.2.2" xref="Sx4.SSx3.p1.2.m2.2.2.2.2.2.cmml">q</mi><mi id="Sx4.SSx3.p1.2.m2.2.2.2.2.3" xref="Sx4.SSx3.p1.2.m2.2.2.2.2.3.cmml">i</mi></msub><mo id="Sx4.SSx3.p1.2.m2.2.2.2.5" stretchy="false" xref="Sx4.SSx3.p1.2.m2.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="Sx4.SSx3.p1.2.m2.2b"><interval closure="open" id="Sx4.SSx3.p1.2.m2.2.2.3.cmml" xref="Sx4.SSx3.p1.2.m2.2.2.2"><apply id="Sx4.SSx3.p1.2.m2.1.1.1.1.cmml" xref="Sx4.SSx3.p1.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.2.m2.1.1.1.1.1.cmml" xref="Sx4.SSx3.p1.2.m2.1.1.1.1">subscript</csymbol><ci id="Sx4.SSx3.p1.2.m2.1.1.1.1.2.cmml" xref="Sx4.SSx3.p1.2.m2.1.1.1.1.2">𝑣</ci><ci id="Sx4.SSx3.p1.2.m2.1.1.1.1.3.cmml" xref="Sx4.SSx3.p1.2.m2.1.1.1.1.3">𝑖</ci></apply><apply id="Sx4.SSx3.p1.2.m2.2.2.2.2.cmml" xref="Sx4.SSx3.p1.2.m2.2.2.2.2"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.2.m2.2.2.2.2.1.cmml" xref="Sx4.SSx3.p1.2.m2.2.2.2.2">subscript</csymbol><ci id="Sx4.SSx3.p1.2.m2.2.2.2.2.2.cmml" xref="Sx4.SSx3.p1.2.m2.2.2.2.2.2">𝑞</ci><ci id="Sx4.SSx3.p1.2.m2.2.2.2.2.3.cmml" xref="Sx4.SSx3.p1.2.m2.2.2.2.2.3">𝑖</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx3.p1.2.m2.2c">(v_{i},q_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx3.p1.2.m2.2d">( italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, and <math alttext="y_{i}" class="ltx_Math" display="inline" id="Sx4.SSx3.p1.3.m3.1"><semantics id="Sx4.SSx3.p1.3.m3.1a"><msub id="Sx4.SSx3.p1.3.m3.1.1" xref="Sx4.SSx3.p1.3.m3.1.1.cmml"><mi id="Sx4.SSx3.p1.3.m3.1.1.2" xref="Sx4.SSx3.p1.3.m3.1.1.2.cmml">y</mi><mi id="Sx4.SSx3.p1.3.m3.1.1.3" xref="Sx4.SSx3.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx4.SSx3.p1.3.m3.1b"><apply id="Sx4.SSx3.p1.3.m3.1.1.cmml" xref="Sx4.SSx3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.3.m3.1.1.1.cmml" xref="Sx4.SSx3.p1.3.m3.1.1">subscript</csymbol><ci id="Sx4.SSx3.p1.3.m3.1.1.2.cmml" xref="Sx4.SSx3.p1.3.m3.1.1.2">𝑦</ci><ci id="Sx4.SSx3.p1.3.m3.1.1.3.cmml" xref="Sx4.SSx3.p1.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx3.p1.3.m3.1c">y_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx3.p1.3.m3.1d">italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> be the model’s outputs. The VQA accuracy for <math alttext="(v_{i},q_{i})" class="ltx_Math" display="inline" id="Sx4.SSx3.p1.4.m4.2"><semantics id="Sx4.SSx3.p1.4.m4.2a"><mrow id="Sx4.SSx3.p1.4.m4.2.2.2" xref="Sx4.SSx3.p1.4.m4.2.2.3.cmml"><mo id="Sx4.SSx3.p1.4.m4.2.2.2.3" stretchy="false" xref="Sx4.SSx3.p1.4.m4.2.2.3.cmml">(</mo><msub id="Sx4.SSx3.p1.4.m4.1.1.1.1" xref="Sx4.SSx3.p1.4.m4.1.1.1.1.cmml"><mi id="Sx4.SSx3.p1.4.m4.1.1.1.1.2" xref="Sx4.SSx3.p1.4.m4.1.1.1.1.2.cmml">v</mi><mi id="Sx4.SSx3.p1.4.m4.1.1.1.1.3" xref="Sx4.SSx3.p1.4.m4.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx4.SSx3.p1.4.m4.2.2.2.4" xref="Sx4.SSx3.p1.4.m4.2.2.3.cmml">,</mo><msub id="Sx4.SSx3.p1.4.m4.2.2.2.2" xref="Sx4.SSx3.p1.4.m4.2.2.2.2.cmml"><mi id="Sx4.SSx3.p1.4.m4.2.2.2.2.2" xref="Sx4.SSx3.p1.4.m4.2.2.2.2.2.cmml">q</mi><mi id="Sx4.SSx3.p1.4.m4.2.2.2.2.3" xref="Sx4.SSx3.p1.4.m4.2.2.2.2.3.cmml">i</mi></msub><mo id="Sx4.SSx3.p1.4.m4.2.2.2.5" stretchy="false" xref="Sx4.SSx3.p1.4.m4.2.2.3.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="Sx4.SSx3.p1.4.m4.2b"><interval closure="open" id="Sx4.SSx3.p1.4.m4.2.2.3.cmml" xref="Sx4.SSx3.p1.4.m4.2.2.2"><apply id="Sx4.SSx3.p1.4.m4.1.1.1.1.cmml" xref="Sx4.SSx3.p1.4.m4.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.4.m4.1.1.1.1.1.cmml" xref="Sx4.SSx3.p1.4.m4.1.1.1.1">subscript</csymbol><ci id="Sx4.SSx3.p1.4.m4.1.1.1.1.2.cmml" xref="Sx4.SSx3.p1.4.m4.1.1.1.1.2">𝑣</ci><ci id="Sx4.SSx3.p1.4.m4.1.1.1.1.3.cmml" xref="Sx4.SSx3.p1.4.m4.1.1.1.1.3">𝑖</ci></apply><apply id="Sx4.SSx3.p1.4.m4.2.2.2.2.cmml" xref="Sx4.SSx3.p1.4.m4.2.2.2.2"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.4.m4.2.2.2.2.1.cmml" xref="Sx4.SSx3.p1.4.m4.2.2.2.2">subscript</csymbol><ci id="Sx4.SSx3.p1.4.m4.2.2.2.2.2.cmml" xref="Sx4.SSx3.p1.4.m4.2.2.2.2.2">𝑞</ci><ci id="Sx4.SSx3.p1.4.m4.2.2.2.2.3.cmml" xref="Sx4.SSx3.p1.4.m4.2.2.2.2.3">𝑖</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx3.p1.4.m4.2c">(v_{i},q_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx3.p1.4.m4.2d">( italic_v start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_q start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> is calculated as follows:</p>
<table class="ltx_equation ltx_eqn_table" id="Sx4.E6">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\textsc{VQAAccuracy}(a_{i},y_{i})=min(\frac{\#S(y_{i})}{3},1)" class="ltx_Math" display="block" id="Sx4.E6.m1.4"><semantics id="Sx4.E6.m1.4a"><mrow id="Sx4.E6.m1.4.4" xref="Sx4.E6.m1.4.4.cmml"><mrow id="Sx4.E6.m1.4.4.2" xref="Sx4.E6.m1.4.4.2.cmml"><mtext class="ltx_font_smallcaps" id="Sx4.E6.m1.4.4.2.4" xref="Sx4.E6.m1.4.4.2.4a.cmml">VQAAccuracy</mtext><mo id="Sx4.E6.m1.4.4.2.3" xref="Sx4.E6.m1.4.4.2.3.cmml">⁢</mo><mrow id="Sx4.E6.m1.4.4.2.2.2" xref="Sx4.E6.m1.4.4.2.2.3.cmml"><mo id="Sx4.E6.m1.4.4.2.2.2.3" stretchy="false" xref="Sx4.E6.m1.4.4.2.2.3.cmml">(</mo><msub id="Sx4.E6.m1.3.3.1.1.1.1" xref="Sx4.E6.m1.3.3.1.1.1.1.cmml"><mi id="Sx4.E6.m1.3.3.1.1.1.1.2" xref="Sx4.E6.m1.3.3.1.1.1.1.2.cmml">a</mi><mi id="Sx4.E6.m1.3.3.1.1.1.1.3" xref="Sx4.E6.m1.3.3.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx4.E6.m1.4.4.2.2.2.4" xref="Sx4.E6.m1.4.4.2.2.3.cmml">,</mo><msub id="Sx4.E6.m1.4.4.2.2.2.2" xref="Sx4.E6.m1.4.4.2.2.2.2.cmml"><mi id="Sx4.E6.m1.4.4.2.2.2.2.2" xref="Sx4.E6.m1.4.4.2.2.2.2.2.cmml">y</mi><mi id="Sx4.E6.m1.4.4.2.2.2.2.3" xref="Sx4.E6.m1.4.4.2.2.2.2.3.cmml">i</mi></msub><mo id="Sx4.E6.m1.4.4.2.2.2.5" stretchy="false" xref="Sx4.E6.m1.4.4.2.2.3.cmml">)</mo></mrow></mrow><mo id="Sx4.E6.m1.4.4.3" xref="Sx4.E6.m1.4.4.3.cmml">=</mo><mrow id="Sx4.E6.m1.4.4.4" xref="Sx4.E6.m1.4.4.4.cmml"><mi id="Sx4.E6.m1.4.4.4.2" xref="Sx4.E6.m1.4.4.4.2.cmml">m</mi><mo id="Sx4.E6.m1.4.4.4.1" xref="Sx4.E6.m1.4.4.4.1.cmml">⁢</mo><mi id="Sx4.E6.m1.4.4.4.3" xref="Sx4.E6.m1.4.4.4.3.cmml">i</mi><mo id="Sx4.E6.m1.4.4.4.1a" xref="Sx4.E6.m1.4.4.4.1.cmml">⁢</mo><mi id="Sx4.E6.m1.4.4.4.4" xref="Sx4.E6.m1.4.4.4.4.cmml">n</mi><mo id="Sx4.E6.m1.4.4.4.1b" xref="Sx4.E6.m1.4.4.4.1.cmml">⁢</mo><mrow id="Sx4.E6.m1.4.4.4.5.2" xref="Sx4.E6.m1.4.4.4.5.1.cmml"><mo id="Sx4.E6.m1.4.4.4.5.2.1" stretchy="false" xref="Sx4.E6.m1.4.4.4.5.1.cmml">(</mo><mfrac id="Sx4.E6.m1.1.1" xref="Sx4.E6.m1.1.1.cmml"><mrow id="Sx4.E6.m1.1.1.1" xref="Sx4.E6.m1.1.1.1.cmml"><mi id="Sx4.E6.m1.1.1.1.3" mathvariant="normal" xref="Sx4.E6.m1.1.1.1.3.cmml">#</mi><mo id="Sx4.E6.m1.1.1.1.2" xref="Sx4.E6.m1.1.1.1.2.cmml">⁢</mo><mi id="Sx4.E6.m1.1.1.1.4" xref="Sx4.E6.m1.1.1.1.4.cmml">S</mi><mo id="Sx4.E6.m1.1.1.1.2a" xref="Sx4.E6.m1.1.1.1.2.cmml">⁢</mo><mrow id="Sx4.E6.m1.1.1.1.1.1" xref="Sx4.E6.m1.1.1.1.1.1.1.cmml"><mo id="Sx4.E6.m1.1.1.1.1.1.2" stretchy="false" xref="Sx4.E6.m1.1.1.1.1.1.1.cmml">(</mo><msub id="Sx4.E6.m1.1.1.1.1.1.1" xref="Sx4.E6.m1.1.1.1.1.1.1.cmml"><mi id="Sx4.E6.m1.1.1.1.1.1.1.2" xref="Sx4.E6.m1.1.1.1.1.1.1.2.cmml">y</mi><mi id="Sx4.E6.m1.1.1.1.1.1.1.3" xref="Sx4.E6.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx4.E6.m1.1.1.1.1.1.3" stretchy="false" xref="Sx4.E6.m1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mn id="Sx4.E6.m1.1.1.3" xref="Sx4.E6.m1.1.1.3.cmml">3</mn></mfrac><mo id="Sx4.E6.m1.4.4.4.5.2.2" xref="Sx4.E6.m1.4.4.4.5.1.cmml">,</mo><mn id="Sx4.E6.m1.2.2" xref="Sx4.E6.m1.2.2.cmml">1</mn><mo id="Sx4.E6.m1.4.4.4.5.2.3" stretchy="false" xref="Sx4.E6.m1.4.4.4.5.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx4.E6.m1.4b"><apply id="Sx4.E6.m1.4.4.cmml" xref="Sx4.E6.m1.4.4"><eq id="Sx4.E6.m1.4.4.3.cmml" xref="Sx4.E6.m1.4.4.3"></eq><apply id="Sx4.E6.m1.4.4.2.cmml" xref="Sx4.E6.m1.4.4.2"><times id="Sx4.E6.m1.4.4.2.3.cmml" xref="Sx4.E6.m1.4.4.2.3"></times><ci id="Sx4.E6.m1.4.4.2.4a.cmml" xref="Sx4.E6.m1.4.4.2.4"><mtext class="ltx_font_smallcaps" id="Sx4.E6.m1.4.4.2.4.cmml" xref="Sx4.E6.m1.4.4.2.4">VQAAccuracy</mtext></ci><interval closure="open" id="Sx4.E6.m1.4.4.2.2.3.cmml" xref="Sx4.E6.m1.4.4.2.2.2"><apply id="Sx4.E6.m1.3.3.1.1.1.1.cmml" xref="Sx4.E6.m1.3.3.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.E6.m1.3.3.1.1.1.1.1.cmml" xref="Sx4.E6.m1.3.3.1.1.1.1">subscript</csymbol><ci id="Sx4.E6.m1.3.3.1.1.1.1.2.cmml" xref="Sx4.E6.m1.3.3.1.1.1.1.2">𝑎</ci><ci id="Sx4.E6.m1.3.3.1.1.1.1.3.cmml" xref="Sx4.E6.m1.3.3.1.1.1.1.3">𝑖</ci></apply><apply id="Sx4.E6.m1.4.4.2.2.2.2.cmml" xref="Sx4.E6.m1.4.4.2.2.2.2"><csymbol cd="ambiguous" id="Sx4.E6.m1.4.4.2.2.2.2.1.cmml" xref="Sx4.E6.m1.4.4.2.2.2.2">subscript</csymbol><ci id="Sx4.E6.m1.4.4.2.2.2.2.2.cmml" xref="Sx4.E6.m1.4.4.2.2.2.2.2">𝑦</ci><ci id="Sx4.E6.m1.4.4.2.2.2.2.3.cmml" xref="Sx4.E6.m1.4.4.2.2.2.2.3">𝑖</ci></apply></interval></apply><apply id="Sx4.E6.m1.4.4.4.cmml" xref="Sx4.E6.m1.4.4.4"><times id="Sx4.E6.m1.4.4.4.1.cmml" xref="Sx4.E6.m1.4.4.4.1"></times><ci id="Sx4.E6.m1.4.4.4.2.cmml" xref="Sx4.E6.m1.4.4.4.2">𝑚</ci><ci id="Sx4.E6.m1.4.4.4.3.cmml" xref="Sx4.E6.m1.4.4.4.3">𝑖</ci><ci id="Sx4.E6.m1.4.4.4.4.cmml" xref="Sx4.E6.m1.4.4.4.4">𝑛</ci><interval closure="open" id="Sx4.E6.m1.4.4.4.5.1.cmml" xref="Sx4.E6.m1.4.4.4.5.2"><apply id="Sx4.E6.m1.1.1.cmml" xref="Sx4.E6.m1.1.1"><divide id="Sx4.E6.m1.1.1.2.cmml" xref="Sx4.E6.m1.1.1"></divide><apply id="Sx4.E6.m1.1.1.1.cmml" xref="Sx4.E6.m1.1.1.1"><times id="Sx4.E6.m1.1.1.1.2.cmml" xref="Sx4.E6.m1.1.1.1.2"></times><ci id="Sx4.E6.m1.1.1.1.3.cmml" xref="Sx4.E6.m1.1.1.1.3">#</ci><ci id="Sx4.E6.m1.1.1.1.4.cmml" xref="Sx4.E6.m1.1.1.1.4">𝑆</ci><apply id="Sx4.E6.m1.1.1.1.1.1.1.cmml" xref="Sx4.E6.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.E6.m1.1.1.1.1.1.1.1.cmml" xref="Sx4.E6.m1.1.1.1.1.1">subscript</csymbol><ci id="Sx4.E6.m1.1.1.1.1.1.1.2.cmml" xref="Sx4.E6.m1.1.1.1.1.1.1.2">𝑦</ci><ci id="Sx4.E6.m1.1.1.1.1.1.1.3.cmml" xref="Sx4.E6.m1.1.1.1.1.1.1.3">𝑖</ci></apply></apply><cn id="Sx4.E6.m1.1.1.3.cmml" type="integer" xref="Sx4.E6.m1.1.1.3">3</cn></apply><cn id="Sx4.E6.m1.2.2.cmml" type="integer" xref="Sx4.E6.m1.2.2">1</cn></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.E6.m1.4c">\textsc{VQAAccuracy}(a_{i},y_{i})=min(\frac{\#S(y_{i})}{3},1)</annotation><annotation encoding="application/x-llamapun" id="Sx4.E6.m1.4d">VQAAccuracy ( italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) = italic_m italic_i italic_n ( divide start_ARG # italic_S ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_ARG start_ARG 3 end_ARG , 1 )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
<p class="ltx_p" id="Sx4.SSx3.p1.7">where <math alttext="\#S(y_{i})" class="ltx_Math" display="inline" id="Sx4.SSx3.p1.5.m1.1"><semantics id="Sx4.SSx3.p1.5.m1.1a"><mrow id="Sx4.SSx3.p1.5.m1.1.1" xref="Sx4.SSx3.p1.5.m1.1.1.cmml"><mi id="Sx4.SSx3.p1.5.m1.1.1.3" mathvariant="normal" xref="Sx4.SSx3.p1.5.m1.1.1.3.cmml">#</mi><mo id="Sx4.SSx3.p1.5.m1.1.1.2" xref="Sx4.SSx3.p1.5.m1.1.1.2.cmml">⁢</mo><mi id="Sx4.SSx3.p1.5.m1.1.1.4" xref="Sx4.SSx3.p1.5.m1.1.1.4.cmml">S</mi><mo id="Sx4.SSx3.p1.5.m1.1.1.2a" xref="Sx4.SSx3.p1.5.m1.1.1.2.cmml">⁢</mo><mrow id="Sx4.SSx3.p1.5.m1.1.1.1.1" xref="Sx4.SSx3.p1.5.m1.1.1.1.1.1.cmml"><mo id="Sx4.SSx3.p1.5.m1.1.1.1.1.2" stretchy="false" xref="Sx4.SSx3.p1.5.m1.1.1.1.1.1.cmml">(</mo><msub id="Sx4.SSx3.p1.5.m1.1.1.1.1.1" xref="Sx4.SSx3.p1.5.m1.1.1.1.1.1.cmml"><mi id="Sx4.SSx3.p1.5.m1.1.1.1.1.1.2" xref="Sx4.SSx3.p1.5.m1.1.1.1.1.1.2.cmml">y</mi><mi id="Sx4.SSx3.p1.5.m1.1.1.1.1.1.3" xref="Sx4.SSx3.p1.5.m1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="Sx4.SSx3.p1.5.m1.1.1.1.1.3" stretchy="false" xref="Sx4.SSx3.p1.5.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx4.SSx3.p1.5.m1.1b"><apply id="Sx4.SSx3.p1.5.m1.1.1.cmml" xref="Sx4.SSx3.p1.5.m1.1.1"><times id="Sx4.SSx3.p1.5.m1.1.1.2.cmml" xref="Sx4.SSx3.p1.5.m1.1.1.2"></times><ci id="Sx4.SSx3.p1.5.m1.1.1.3.cmml" xref="Sx4.SSx3.p1.5.m1.1.1.3">#</ci><ci id="Sx4.SSx3.p1.5.m1.1.1.4.cmml" xref="Sx4.SSx3.p1.5.m1.1.1.4">𝑆</ci><apply id="Sx4.SSx3.p1.5.m1.1.1.1.1.1.cmml" xref="Sx4.SSx3.p1.5.m1.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.5.m1.1.1.1.1.1.1.cmml" xref="Sx4.SSx3.p1.5.m1.1.1.1.1">subscript</csymbol><ci id="Sx4.SSx3.p1.5.m1.1.1.1.1.1.2.cmml" xref="Sx4.SSx3.p1.5.m1.1.1.1.1.1.2">𝑦</ci><ci id="Sx4.SSx3.p1.5.m1.1.1.1.1.1.3.cmml" xref="Sx4.SSx3.p1.5.m1.1.1.1.1.1.3">𝑖</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx3.p1.5.m1.1c">\#S(y_{i})</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx3.p1.5.m1.1d"># italic_S ( italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> is the occurrence of <math alttext="y_{i}" class="ltx_Math" display="inline" id="Sx4.SSx3.p1.6.m2.1"><semantics id="Sx4.SSx3.p1.6.m2.1a"><msub id="Sx4.SSx3.p1.6.m2.1.1" xref="Sx4.SSx3.p1.6.m2.1.1.cmml"><mi id="Sx4.SSx3.p1.6.m2.1.1.2" xref="Sx4.SSx3.p1.6.m2.1.1.2.cmml">y</mi><mi id="Sx4.SSx3.p1.6.m2.1.1.3" xref="Sx4.SSx3.p1.6.m2.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx4.SSx3.p1.6.m2.1b"><apply id="Sx4.SSx3.p1.6.m2.1.1.cmml" xref="Sx4.SSx3.p1.6.m2.1.1"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.6.m2.1.1.1.cmml" xref="Sx4.SSx3.p1.6.m2.1.1">subscript</csymbol><ci id="Sx4.SSx3.p1.6.m2.1.1.2.cmml" xref="Sx4.SSx3.p1.6.m2.1.1.2">𝑦</ci><ci id="Sx4.SSx3.p1.6.m2.1.1.3.cmml" xref="Sx4.SSx3.p1.6.m2.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx3.p1.6.m2.1c">y_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx3.p1.6.m2.1d">italic_y start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> in <math alttext="a_{i}" class="ltx_Math" display="inline" id="Sx4.SSx3.p1.7.m3.1"><semantics id="Sx4.SSx3.p1.7.m3.1a"><msub id="Sx4.SSx3.p1.7.m3.1.1" xref="Sx4.SSx3.p1.7.m3.1.1.cmml"><mi id="Sx4.SSx3.p1.7.m3.1.1.2" xref="Sx4.SSx3.p1.7.m3.1.1.2.cmml">a</mi><mi id="Sx4.SSx3.p1.7.m3.1.1.3" xref="Sx4.SSx3.p1.7.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="Sx4.SSx3.p1.7.m3.1b"><apply id="Sx4.SSx3.p1.7.m3.1.1.cmml" xref="Sx4.SSx3.p1.7.m3.1.1"><csymbol cd="ambiguous" id="Sx4.SSx3.p1.7.m3.1.1.1.cmml" xref="Sx4.SSx3.p1.7.m3.1.1">subscript</csymbol><ci id="Sx4.SSx3.p1.7.m3.1.1.2.cmml" xref="Sx4.SSx3.p1.7.m3.1.1.2">𝑎</ci><ci id="Sx4.SSx3.p1.7.m3.1.1.3.cmml" xref="Sx4.SSx3.p1.7.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx3.p1.7.m3.1c">a_{i}</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx3.p1.7.m3.1d">italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>. The VQA accuracy on the entire dataset is obtained by averaging the accuracy of all image-question pairs.</p>
</div>
<figure class="ltx_table" id="Sx4.T2">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="Sx4.T2.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="Sx4.T2.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="Sx4.T2.1.1.1.1" rowspan="2"><span class="ltx_text" id="Sx4.T2.1.1.1.1.1">Method</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="Sx4.T2.1.1.1.2" rowspan="2"><span class="ltx_text" id="Sx4.T2.1.1.1.2.1">Base Model</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" colspan="2" id="Sx4.T2.1.1.1.3">Direct Answer</th>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.2.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="Sx4.T2.1.2.2.1">Val</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="Sx4.T2.1.2.2.2">Test</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx4.T2.1.3.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="Sx4.T2.1.3.1.1">ClipCap</th>
<th class="ltx_td ltx_th ltx_th_row ltx_border_r ltx_border_t" id="Sx4.T2.1.3.1.2"></th>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T2.1.3.1.3">30.9</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T2.1.3.1.4">25.9</td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.4.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.4.2.1">LXMERT</th>
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.4.2.2"></th>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.4.2.3">30.7</td>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.4.2.4">25.9</td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.5.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.5.3.1">KRISP</th>
<th class="ltx_td ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.5.3.2"></th>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.5.3.3">33.7</td>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.5.3.4">27.1</td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.6.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.6.4.1">KGenVQA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.6.4.2">UnifiedQA</th>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.6.4.3">39.1</td>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.6.4.4">-</td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.7.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.7.5.1">GPV-2</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.7.5.2">T5-Large</th>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.7.5.3">48.6</td>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.7.5.4">40.7</td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.8.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.8.6.1">REVEAL</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.8.6.2">T5-Large</th>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.8.6.3">52.2</td>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.8.6.4">-</td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.9.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.9.7.1">PromptCap</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.9.7.2">GPT-3</th>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.9.7.3">56.3</td>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.9.7.4">59.6</td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.10.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.10.8.1">MM-Reasoner</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.10.8.2">Flamingo + i-Code</th>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.10.8.3">-</td>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.10.8.4"><span class="ltx_text ltx_font_bold" id="Sx4.T2.1.10.8.4.1">60.2</span></td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.11.9">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.11.9.1">ASB</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T2.1.11.9.2">LLAMA-2</th>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.11.9.3">58.6</td>
<td class="ltx_td ltx_align_center" id="Sx4.T2.1.11.9.4">57.5</td>
</tr>
<tr class="ltx_tr" id="Sx4.T2.1.12.10">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="Sx4.T2.1.12.10.1">RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.T2.1.12.10.1.1">homo</span>
</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="Sx4.T2.1.12.10.2">InstructBLIP-FlanT5XL</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T2.1.12.10.3"><span class="ltx_text ltx_font_bold" id="Sx4.T2.1.12.10.3.1">62.1</span></td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T2.1.12.10.4">58.1</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>The results on the AOK-VQA dataset. We use the GS knowledge for AOK-VQA here. </figcaption>
</figure>
</section>
<section class="ltx_subsection" id="Sx4.SSx4">
<h3 class="ltx_title ltx_title_subsection">Comparative Study</h3>
<div class="ltx_para" id="Sx4.SSx4.p1">
<p class="ltx_p" id="Sx4.SSx4.p1.1">In this section, we will elaborate on the advantages of RACC compared to previous works from three aspects: performance, cost, and inference efficiency.</p>
</div>
<div class="ltx_para" id="Sx4.SSx4.p2">
<p class="ltx_p" id="Sx4.SSx4.p2.1">First of all, RACC outperforms many competitive baselines. The performance comparison of RACC and other competitive baselines on the OK-VQA dataset is presented in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx2.T1" title="Table 1 ‣ Prompt Compression ‣ Related Work ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">1</span></a>. Based on InstructBLIP-FlanT5XL, RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.SSx4.p2.1.1">homo</span> with GS as the knowledge source reaches an accuracy of 59.65%. With WIT as the knowledge source, our framework achieves 59.17%. When adopting RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.SSx4.p2.1.2">hetero</span>, with InstructBLIP-FlanT5XL as the hyperMLLM and InstructBLIP-Vicuna7B as the baseMLLM, we achieve a state-of-the-art (SOTA) accuracy of 62.9%.</p>
</div>
<div class="ltx_para" id="Sx4.SSx4.p3">
<p class="ltx_p" id="Sx4.SSx4.p3.1">The results of AOK-VQA are shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.T2" title="Table 2 ‣ Evaluation ‣ Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">2</span></a>. Since the GS knowledge source we use for AOK-VQA is not designed for it, the documents in GS may not provide the required knowledge for all questions in AOK-VQA. However, RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.SSx4.p3.1.1">homo</span> based on InstructBLIP-FlanT5XL still achieves a state-of-the-art (SOTA) accuracy of 62.1% on the validation set. The performance on the test set is 58.1%.</p>
</div>
<figure class="ltx_table" id="Sx4.T3">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="Sx4.T3.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="Sx4.T3.1.1.1">
<th class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="Sx4.T3.1.1.1.1"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" id="Sx4.T3.1.1.1.2" rowspan="2"><span class="ltx_text" id="Sx4.T3.1.1.1.2.1">RAVQA-v2</span></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" colspan="2" id="Sx4.T3.1.1.1.3">RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.T3.1.1.1.3.1">homo</span>
</th>
</tr>
<tr class="ltx_tr" id="Sx4.T3.1.2.2">
<th class="ltx_td ltx_th ltx_th_column ltx_th_row ltx_border_r" id="Sx4.T3.1.2.2.1"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="Sx4.T3.1.2.2.2">w/o pre</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column" id="Sx4.T3.1.2.2.3">w pre</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx4.T3.1.3.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="Sx4.T3.1.3.1.1">Eval Time (s)</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t" id="Sx4.T3.1.3.1.2">1.1242</th>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T3.1.3.1.3">0.8768</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T3.1.3.1.4">0.4576</td>
</tr>
<tr class="ltx_tr" id="Sx4.T3.1.4.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T3.1.4.2.1">Disk Space (M)</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r" id="Sx4.T3.1.4.2.2">6.9680</th>
<td class="ltx_td ltx_align_center" id="Sx4.T3.1.4.2.3">6.9680</td>
<td class="ltx_td ltx_align_center" id="Sx4.T3.1.4.2.4">0.6280</td>
</tr>
<tr class="ltx_tr" id="Sx4.T3.1.5.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="Sx4.T3.1.5.3.1">VQA Accuracy</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r" id="Sx4.T3.1.5.3.2">58.77</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T3.1.5.3.3">59.17</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T3.1.5.3.4">59.17</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Comparison of inference efficiency between RAVQA-v2 and RACC when adopting the WIT knowledge source. “Eval time” and “Disk Space” are metrics measured for a single image-question pair input, while “VQA Accuracy” represents the performance on the OK-VQA test set. “w pre” indicates that pre-saving the compressed prompts of retrieved documents before inference. The MLLM used in both two frameworks is InstructBLIP-FlanT5XL.</figcaption>
</figure>
<div class="ltx_para" id="Sx4.SSx4.p4">
<p class="ltx_p" id="Sx4.SSx4.p4.1">In terms of cost, our work has notable advantages. First, we do not utilize any image-based textual descriptions provided by external APIs or models <cite class="ltx_cite ltx_citemacro_citep">(Gui et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib8" title="">2021</a>; Lin and Byrne <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib16" title="">2022</a>; An et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib2" title="">2024</a>)</cite>, such as captions, object tags, OCR <em class="ltx_emph ltx_font_italic" id="Sx4.SSx4.p4.1.1">etc.</em> Second, RACC does not use any very large LLMs (ChatGPT, GPT-3) or MLLMs (GPT-4) but still achieves excellent performance even with small-scale MLLMs.</p>
</div>
<div class="ltx_para" id="Sx4.SSx4.p5">
<p class="ltx_p" id="Sx4.SSx4.p5.1">The inference efficiency is the main concern of this paper.
RACC demonstrates significant advantages in inference efficiency compared to RAVQA-v2 <cite class="ltx_cite ltx_citemacro_citep">(Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite>. RACC not only significantly reduces inference latency but also minimizes disk space usage by pre-saving compressed prompts corresponding to the documents of the knowledge source. We present a comparison of the inference efficiency between RACC and RAVQA-v2 <cite class="ltx_cite ltx_citemacro_citep">(Lin et al. <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#bib.bib17" title="">2024a</a>)</cite> in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.T3" title="Table 3 ‣ Comparative Study ‣ Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">3</span></a>. When pre-saving compressed prompts, we achieve a substantial reduction of 59.7% in inference latency and 91.0% in disk space usage. Even without pre-saved compressed prompts, the inference latency can still be reduced by 22.0%.</p>
</div>
</section>
<section class="ltx_subsection" id="Sx4.SSx5">
<h3 class="ltx_title ltx_title_subsection">Ablation Studies</h3>
<div class="ltx_para" id="Sx4.SSx5.p1">
<p class="ltx_p" id="Sx4.SSx5.p1.1">We propose four strategies to improve the aggregation process of compressed contexts and conduct ablation studies to verify their effectiveness. The settings and results of ablation studies are depicted in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.T4" title="Table 4 ‣ Ablation Studies ‣ Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">4</span></a> and Table <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.T5" title="Table 5 ‣ Ablation Studies ‣ Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">5</span></a>. Note that we adopt RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.SSx5.p1.1.1">homo</span> with the GS knowledge source in the ablation studies, where the hyperMLLM and baseMLLM are both initialized from InstructBLIP-FlanT5XL.</p>
</div>
<div class="ltx_para" id="Sx4.SSx5.p2">
<p class="ltx_p" id="Sx4.SSx5.p2.1">Firstly, comparing lines 2 and 3, as well as lines 7 and 8, we can observe that the PIPE strategy brings improvements of 0.31% and 0.42% under different settings. From the difference between lines 3 and 4 in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.T4" title="Table 4 ‣ Ablation Studies ‣ Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">4</span></a>, we observe that the DCVQ strategy brings an improvement of 0.77%. On the other hand, the RGCA strategy results in a performance gain of 0.37%, as shown in lines 3 and 5. Last but not least, the performance difference between lines 6 and 8 shows that the PRDB strategy leads to a performance gain of 0.54%.</p>
</div>
<div class="ltx_para" id="Sx4.SSx5.p3">
<p class="ltx_p" id="Sx4.SSx5.p3.5">We also explore how to set the length of learnable prompts (<em class="ltx_emph ltx_font_italic" id="Sx4.SSx5.p3.2.2">i.e. <math alttext="L(\theta_{vq})" class="ltx_Math" display="inline" id="Sx4.SSx5.p3.1.1.m1.1"><semantics id="Sx4.SSx5.p3.1.1.m1.1a"><mrow id="Sx4.SSx5.p3.1.1.m1.1.1" xref="Sx4.SSx5.p3.1.1.m1.1.1.cmml"><mi id="Sx4.SSx5.p3.1.1.m1.1.1.3" xref="Sx4.SSx5.p3.1.1.m1.1.1.3.cmml">L</mi><mo id="Sx4.SSx5.p3.1.1.m1.1.1.2" xref="Sx4.SSx5.p3.1.1.m1.1.1.2.cmml">⁢</mo><mrow id="Sx4.SSx5.p3.1.1.m1.1.1.1.1" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.cmml"><mo id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.2" stretchy="false" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.cmml">(</mo><msub id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.cmml"><mi id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.2" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.2.cmml">θ</mi><mrow id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.cmml"><mi id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.2" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.2.cmml">v</mi><mo id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.1" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.3" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.3.cmml">q</mi></mrow></msub><mo id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.3" stretchy="false" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx4.SSx5.p3.1.1.m1.1b"><apply id="Sx4.SSx5.p3.1.1.m1.1.1.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1"><times id="Sx4.SSx5.p3.1.1.m1.1.1.2.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.2"></times><ci id="Sx4.SSx5.p3.1.1.m1.1.1.3.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.3">𝐿</ci><apply id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.1.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1">subscript</csymbol><ci id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.2.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.2">𝜃</ci><apply id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3"><times id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.1.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.1"></times><ci id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.2.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.2">𝑣</ci><ci id="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.3.cmml" xref="Sx4.SSx5.p3.1.1.m1.1.1.1.1.1.3.3">𝑞</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx5.p3.1.1.m1.1c">L(\theta_{vq})</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx5.p3.1.1.m1.1d">italic_L ( italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT )</annotation></semantics></math> and <math alttext="L(\theta_{d})" class="ltx_Math" display="inline" id="Sx4.SSx5.p3.2.2.m2.1"><semantics id="Sx4.SSx5.p3.2.2.m2.1a"><mrow id="Sx4.SSx5.p3.2.2.m2.1.1" xref="Sx4.SSx5.p3.2.2.m2.1.1.cmml"><mi id="Sx4.SSx5.p3.2.2.m2.1.1.3" xref="Sx4.SSx5.p3.2.2.m2.1.1.3.cmml">L</mi><mo id="Sx4.SSx5.p3.2.2.m2.1.1.2" xref="Sx4.SSx5.p3.2.2.m2.1.1.2.cmml">⁢</mo><mrow id="Sx4.SSx5.p3.2.2.m2.1.1.1.1" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.cmml"><mo id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.2" stretchy="false" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.cmml">(</mo><msub id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.cmml"><mi id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.2" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.3" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.3.cmml">d</mi></msub><mo id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.3" stretchy="false" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx4.SSx5.p3.2.2.m2.1b"><apply id="Sx4.SSx5.p3.2.2.m2.1.1.cmml" xref="Sx4.SSx5.p3.2.2.m2.1.1"><times id="Sx4.SSx5.p3.2.2.m2.1.1.2.cmml" xref="Sx4.SSx5.p3.2.2.m2.1.1.2"></times><ci id="Sx4.SSx5.p3.2.2.m2.1.1.3.cmml" xref="Sx4.SSx5.p3.2.2.m2.1.1.3">𝐿</ci><apply id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.cmml" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.1.cmml" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1">subscript</csymbol><ci id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.2.cmml" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.2">𝜃</ci><ci id="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.3.cmml" xref="Sx4.SSx5.p3.2.2.m2.1.1.1.1.1.3">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx5.p3.2.2.m2.1c">L(\theta_{d})</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx5.p3.2.2.m2.1d">italic_L ( italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT )</annotation></semantics></math></em>), and the results are shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.T5" title="Table 5 ‣ Ablation Studies ‣ Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">5</span></a>. We select the best configuration, setting <math alttext="L(\theta_{vq})" class="ltx_Math" display="inline" id="Sx4.SSx5.p3.3.m1.1"><semantics id="Sx4.SSx5.p3.3.m1.1a"><mrow id="Sx4.SSx5.p3.3.m1.1.1" xref="Sx4.SSx5.p3.3.m1.1.1.cmml"><mi id="Sx4.SSx5.p3.3.m1.1.1.3" xref="Sx4.SSx5.p3.3.m1.1.1.3.cmml">L</mi><mo id="Sx4.SSx5.p3.3.m1.1.1.2" xref="Sx4.SSx5.p3.3.m1.1.1.2.cmml">⁢</mo><mrow id="Sx4.SSx5.p3.3.m1.1.1.1.1" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.cmml"><mo id="Sx4.SSx5.p3.3.m1.1.1.1.1.2" stretchy="false" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.cmml">(</mo><msub id="Sx4.SSx5.p3.3.m1.1.1.1.1.1" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.cmml"><mi id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.2" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.2.cmml">θ</mi><mrow id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.cmml"><mi id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.2" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.2.cmml">v</mi><mo id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.1" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.3" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.3.cmml">q</mi></mrow></msub><mo id="Sx4.SSx5.p3.3.m1.1.1.1.1.3" stretchy="false" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx4.SSx5.p3.3.m1.1b"><apply id="Sx4.SSx5.p3.3.m1.1.1.cmml" xref="Sx4.SSx5.p3.3.m1.1.1"><times id="Sx4.SSx5.p3.3.m1.1.1.2.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.2"></times><ci id="Sx4.SSx5.p3.3.m1.1.1.3.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.3">𝐿</ci><apply id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.1.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.1.1">subscript</csymbol><ci id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.2.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.2">𝜃</ci><apply id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3"><times id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.1.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.1"></times><ci id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.2.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.2">𝑣</ci><ci id="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.3.cmml" xref="Sx4.SSx5.p3.3.m1.1.1.1.1.1.3.3">𝑞</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx5.p3.3.m1.1c">L(\theta_{vq})</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx5.p3.3.m1.1d">italic_L ( italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT )</annotation></semantics></math> and <math alttext="L(\theta_{d})" class="ltx_Math" display="inline" id="Sx4.SSx5.p3.4.m2.1"><semantics id="Sx4.SSx5.p3.4.m2.1a"><mrow id="Sx4.SSx5.p3.4.m2.1.1" xref="Sx4.SSx5.p3.4.m2.1.1.cmml"><mi id="Sx4.SSx5.p3.4.m2.1.1.3" xref="Sx4.SSx5.p3.4.m2.1.1.3.cmml">L</mi><mo id="Sx4.SSx5.p3.4.m2.1.1.2" xref="Sx4.SSx5.p3.4.m2.1.1.2.cmml">⁢</mo><mrow id="Sx4.SSx5.p3.4.m2.1.1.1.1" xref="Sx4.SSx5.p3.4.m2.1.1.1.1.1.cmml"><mo id="Sx4.SSx5.p3.4.m2.1.1.1.1.2" stretchy="false" xref="Sx4.SSx5.p3.4.m2.1.1.1.1.1.cmml">(</mo><msub id="Sx4.SSx5.p3.4.m2.1.1.1.1.1" xref="Sx4.SSx5.p3.4.m2.1.1.1.1.1.cmml"><mi id="Sx4.SSx5.p3.4.m2.1.1.1.1.1.2" xref="Sx4.SSx5.p3.4.m2.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx4.SSx5.p3.4.m2.1.1.1.1.1.3" xref="Sx4.SSx5.p3.4.m2.1.1.1.1.1.3.cmml">d</mi></msub><mo id="Sx4.SSx5.p3.4.m2.1.1.1.1.3" stretchy="false" xref="Sx4.SSx5.p3.4.m2.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx4.SSx5.p3.4.m2.1b"><apply id="Sx4.SSx5.p3.4.m2.1.1.cmml" xref="Sx4.SSx5.p3.4.m2.1.1"><times id="Sx4.SSx5.p3.4.m2.1.1.2.cmml" xref="Sx4.SSx5.p3.4.m2.1.1.2"></times><ci id="Sx4.SSx5.p3.4.m2.1.1.3.cmml" xref="Sx4.SSx5.p3.4.m2.1.1.3">𝐿</ci><apply id="Sx4.SSx5.p3.4.m2.1.1.1.1.1.cmml" xref="Sx4.SSx5.p3.4.m2.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.SSx5.p3.4.m2.1.1.1.1.1.1.cmml" xref="Sx4.SSx5.p3.4.m2.1.1.1.1">subscript</csymbol><ci id="Sx4.SSx5.p3.4.m2.1.1.1.1.1.2.cmml" xref="Sx4.SSx5.p3.4.m2.1.1.1.1.1.2">𝜃</ci><ci id="Sx4.SSx5.p3.4.m2.1.1.1.1.1.3.cmml" xref="Sx4.SSx5.p3.4.m2.1.1.1.1.1.3">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx5.p3.4.m2.1c">L(\theta_{d})</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx5.p3.4.m2.1d">italic_L ( italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT )</annotation></semantics></math> to 12 and 16, respectively. All other experiments in this paper are conducted using this configuration. In the supplementary materials, we provide additional results of ablation studies and comparative experiments on the hyperparameter <math alttext="K" class="ltx_Math" display="inline" id="Sx4.SSx5.p3.5.m3.1"><semantics id="Sx4.SSx5.p3.5.m3.1a"><mi id="Sx4.SSx5.p3.5.m3.1.1" xref="Sx4.SSx5.p3.5.m3.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="Sx4.SSx5.p3.5.m3.1b"><ci id="Sx4.SSx5.p3.5.m3.1.1.cmml" xref="Sx4.SSx5.p3.5.m3.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="Sx4.SSx5.p3.5.m3.1c">K</annotation><annotation encoding="application/x-llamapun" id="Sx4.SSx5.p3.5.m3.1d">italic_K</annotation></semantics></math>.</p>
</div>
<figure class="ltx_table" id="Sx4.T4">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="Sx4.T4.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="Sx4.T4.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_t" id="Sx4.T4.1.1.1.1">No.</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T4.1.1.1.2">PIPE</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T4.1.1.1.3">DCVQ</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T4.1.1.1.4">RGCA</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T4.1.1.1.5">PRDB</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T4.1.1.1.6">VQA Accuracy (%)</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx4.T4.1.2.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" id="Sx4.T4.1.2.1.1">1</th>
<td class="ltx_td ltx_border_t" id="Sx4.T4.1.2.1.2"></td>
<td class="ltx_td ltx_border_t" id="Sx4.T4.1.2.1.3"></td>
<td class="ltx_td ltx_border_t" id="Sx4.T4.1.2.1.4"></td>
<td class="ltx_td ltx_border_t" id="Sx4.T4.1.2.1.5"></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T4.1.2.1.6">57.60</td>
</tr>
<tr class="ltx_tr" id="Sx4.T4.1.3.2">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="Sx4.T4.1.3.2.1">2</th>
<td class="ltx_td" id="Sx4.T4.1.3.2.2"></td>
<td class="ltx_td" id="Sx4.T4.1.3.2.3"></td>
<td class="ltx_td" id="Sx4.T4.1.3.2.4"></td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.3.2.5">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.3.2.6">58.18 (+0.58)</td>
</tr>
<tr class="ltx_tr" id="Sx4.T4.1.4.3">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="Sx4.T4.1.4.3.1">3</th>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.4.3.2">✓</td>
<td class="ltx_td" id="Sx4.T4.1.4.3.3"></td>
<td class="ltx_td" id="Sx4.T4.1.4.3.4"></td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.4.3.5">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.4.3.6">58.49 (+0.89)</td>
</tr>
<tr class="ltx_tr" id="Sx4.T4.1.5.4">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="Sx4.T4.1.5.4.1">4</th>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.5.4.2">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.5.4.3">✓</td>
<td class="ltx_td" id="Sx4.T4.1.5.4.4"></td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.5.4.5">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.5.4.6">59.26 (+1.66)</td>
</tr>
<tr class="ltx_tr" id="Sx4.T4.1.6.5">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="Sx4.T4.1.6.5.1">5</th>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.6.5.2">✓</td>
<td class="ltx_td" id="Sx4.T4.1.6.5.3"></td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.6.5.4">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.6.5.5">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.6.5.6">58.86 (+1.26)</td>
</tr>
<tr class="ltx_tr" id="Sx4.T4.1.7.6">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="Sx4.T4.1.7.6.1">6</th>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.7.6.2">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.7.6.3">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.7.6.4">✓</td>
<td class="ltx_td" id="Sx4.T4.1.7.6.5"></td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.7.6.6">58.95 (+1.35)</td>
</tr>
<tr class="ltx_tr" id="Sx4.T4.1.8.7">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row" id="Sx4.T4.1.8.7.1">7</th>
<td class="ltx_td" id="Sx4.T4.1.8.7.2"></td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.8.7.3">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.8.7.4">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.8.7.5">✓</td>
<td class="ltx_td ltx_align_center" id="Sx4.T4.1.8.7.6">59.07 (+1.47)</td>
</tr>
<tr class="ltx_tr" id="Sx4.T4.1.9.8">
<th class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b" id="Sx4.T4.1.9.8.1">8</th>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T4.1.9.8.2">✓</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T4.1.9.8.3">✓</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T4.1.9.8.4">✓</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T4.1.9.8.5">✓</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T4.1.9.8.6"><span class="ltx_text ltx_font_bold" id="Sx4.T4.1.9.8.6.1">59.49 (+1.89)</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>The results of ablation studies on the design of our aggregator module. The GS knowledge source is adopted here. The ablation experiments are conducted based on RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.T4.3.1">homo</span> with InstructBLIP-FlanT5XL. </figcaption>
</figure>
<figure class="ltx_table" id="Sx4.T5">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="Sx4.T5.2">
<thead class="ltx_thead">
<tr class="ltx_tr" id="Sx4.T5.2.2">
<th class="ltx_td ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx4.T5.2.2.3"></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T5.1.1.1"><math alttext="L(\theta_{vq})" class="ltx_Math" display="inline" id="Sx4.T5.1.1.1.m1.1"><semantics id="Sx4.T5.1.1.1.m1.1a"><mrow id="Sx4.T5.1.1.1.m1.1.1" xref="Sx4.T5.1.1.1.m1.1.1.cmml"><mi id="Sx4.T5.1.1.1.m1.1.1.3" xref="Sx4.T5.1.1.1.m1.1.1.3.cmml">L</mi><mo id="Sx4.T5.1.1.1.m1.1.1.2" xref="Sx4.T5.1.1.1.m1.1.1.2.cmml">⁢</mo><mrow id="Sx4.T5.1.1.1.m1.1.1.1.1" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.cmml"><mo id="Sx4.T5.1.1.1.m1.1.1.1.1.2" stretchy="false" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.cmml">(</mo><msub id="Sx4.T5.1.1.1.m1.1.1.1.1.1" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.cmml"><mi id="Sx4.T5.1.1.1.m1.1.1.1.1.1.2" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.2.cmml">θ</mi><mrow id="Sx4.T5.1.1.1.m1.1.1.1.1.1.3" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.cmml"><mi id="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.2" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.2.cmml">v</mi><mo id="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.1" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.1.cmml">⁢</mo><mi id="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.3" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.3.cmml">q</mi></mrow></msub><mo id="Sx4.T5.1.1.1.m1.1.1.1.1.3" stretchy="false" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx4.T5.1.1.1.m1.1b"><apply id="Sx4.T5.1.1.1.m1.1.1.cmml" xref="Sx4.T5.1.1.1.m1.1.1"><times id="Sx4.T5.1.1.1.m1.1.1.2.cmml" xref="Sx4.T5.1.1.1.m1.1.1.2"></times><ci id="Sx4.T5.1.1.1.m1.1.1.3.cmml" xref="Sx4.T5.1.1.1.m1.1.1.3">𝐿</ci><apply id="Sx4.T5.1.1.1.m1.1.1.1.1.1.cmml" xref="Sx4.T5.1.1.1.m1.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.T5.1.1.1.m1.1.1.1.1.1.1.cmml" xref="Sx4.T5.1.1.1.m1.1.1.1.1">subscript</csymbol><ci id="Sx4.T5.1.1.1.m1.1.1.1.1.1.2.cmml" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.2">𝜃</ci><apply id="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.cmml" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.3"><times id="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.1.cmml" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.1"></times><ci id="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.2.cmml" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.2">𝑣</ci><ci id="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.3.cmml" xref="Sx4.T5.1.1.1.m1.1.1.1.1.1.3.3">𝑞</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.T5.1.1.1.m1.1c">L(\theta_{vq})</annotation><annotation encoding="application/x-llamapun" id="Sx4.T5.1.1.1.m1.1d">italic_L ( italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT )</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T5.2.2.2"><math alttext="L(\theta_{d})" class="ltx_Math" display="inline" id="Sx4.T5.2.2.2.m1.1"><semantics id="Sx4.T5.2.2.2.m1.1a"><mrow id="Sx4.T5.2.2.2.m1.1.1" xref="Sx4.T5.2.2.2.m1.1.1.cmml"><mi id="Sx4.T5.2.2.2.m1.1.1.3" xref="Sx4.T5.2.2.2.m1.1.1.3.cmml">L</mi><mo id="Sx4.T5.2.2.2.m1.1.1.2" xref="Sx4.T5.2.2.2.m1.1.1.2.cmml">⁢</mo><mrow id="Sx4.T5.2.2.2.m1.1.1.1.1" xref="Sx4.T5.2.2.2.m1.1.1.1.1.1.cmml"><mo id="Sx4.T5.2.2.2.m1.1.1.1.1.2" stretchy="false" xref="Sx4.T5.2.2.2.m1.1.1.1.1.1.cmml">(</mo><msub id="Sx4.T5.2.2.2.m1.1.1.1.1.1" xref="Sx4.T5.2.2.2.m1.1.1.1.1.1.cmml"><mi id="Sx4.T5.2.2.2.m1.1.1.1.1.1.2" xref="Sx4.T5.2.2.2.m1.1.1.1.1.1.2.cmml">θ</mi><mi id="Sx4.T5.2.2.2.m1.1.1.1.1.1.3" xref="Sx4.T5.2.2.2.m1.1.1.1.1.1.3.cmml">d</mi></msub><mo id="Sx4.T5.2.2.2.m1.1.1.1.1.3" stretchy="false" xref="Sx4.T5.2.2.2.m1.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="Sx4.T5.2.2.2.m1.1b"><apply id="Sx4.T5.2.2.2.m1.1.1.cmml" xref="Sx4.T5.2.2.2.m1.1.1"><times id="Sx4.T5.2.2.2.m1.1.1.2.cmml" xref="Sx4.T5.2.2.2.m1.1.1.2"></times><ci id="Sx4.T5.2.2.2.m1.1.1.3.cmml" xref="Sx4.T5.2.2.2.m1.1.1.3">𝐿</ci><apply id="Sx4.T5.2.2.2.m1.1.1.1.1.1.cmml" xref="Sx4.T5.2.2.2.m1.1.1.1.1"><csymbol cd="ambiguous" id="Sx4.T5.2.2.2.m1.1.1.1.1.1.1.cmml" xref="Sx4.T5.2.2.2.m1.1.1.1.1">subscript</csymbol><ci id="Sx4.T5.2.2.2.m1.1.1.1.1.1.2.cmml" xref="Sx4.T5.2.2.2.m1.1.1.1.1.1.2">𝜃</ci><ci id="Sx4.T5.2.2.2.m1.1.1.1.1.1.3.cmml" xref="Sx4.T5.2.2.2.m1.1.1.1.1.1.3">𝑑</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.T5.2.2.2.m1.1c">L(\theta_{d})</annotation><annotation encoding="application/x-llamapun" id="Sx4.T5.2.2.2.m1.1d">italic_L ( italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT )</annotation></semantics></math></th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T5.2.2.4">VQA Accuracy</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx4.T5.2.3.1">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx4.T5.2.3.1.1" rowspan="5"><span class="ltx_text" id="Sx4.T5.2.3.1.1.1">w/o PIPE</span></td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T5.2.3.1.2">8</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T5.2.3.1.3">12</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T5.2.3.1.4">58.77</td>
</tr>
<tr class="ltx_tr" id="Sx4.T5.2.4.2">
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.4.2.1">8</td>
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.4.2.2">16</td>
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.4.2.3">58.83</td>
</tr>
<tr class="ltx_tr" id="Sx4.T5.2.5.3">
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.5.3.1">12</td>
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.5.3.2">12</td>
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.5.3.3">58.96</td>
</tr>
<tr class="ltx_tr" id="Sx4.T5.2.6.4">
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.6.4.1">12</td>
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.6.4.2">16</td>
<td class="ltx_td ltx_align_center" id="Sx4.T5.2.6.4.3"><span class="ltx_text ltx_font_bold" id="Sx4.T5.2.6.4.3.1">59.07</span></td>
</tr>
<tr class="ltx_tr" id="Sx4.T5.2.7.5">
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T5.2.7.5.1">12</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T5.2.7.5.2">20</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T5.2.7.5.3">58.56</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.T5.8.1">homo</span>’s results of the comparative experiments on the length of the predefined learnable prompts <math alttext="\theta_{vq}" class="ltx_Math" display="inline" id="Sx4.T5.5.m1.1"><semantics id="Sx4.T5.5.m1.1b"><msub id="Sx4.T5.5.m1.1.1" xref="Sx4.T5.5.m1.1.1.cmml"><mi id="Sx4.T5.5.m1.1.1.2" xref="Sx4.T5.5.m1.1.1.2.cmml">θ</mi><mrow id="Sx4.T5.5.m1.1.1.3" xref="Sx4.T5.5.m1.1.1.3.cmml"><mi id="Sx4.T5.5.m1.1.1.3.2" xref="Sx4.T5.5.m1.1.1.3.2.cmml">v</mi><mo id="Sx4.T5.5.m1.1.1.3.1" xref="Sx4.T5.5.m1.1.1.3.1.cmml">⁢</mo><mi id="Sx4.T5.5.m1.1.1.3.3" xref="Sx4.T5.5.m1.1.1.3.3.cmml">q</mi></mrow></msub><annotation-xml encoding="MathML-Content" id="Sx4.T5.5.m1.1c"><apply id="Sx4.T5.5.m1.1.1.cmml" xref="Sx4.T5.5.m1.1.1"><csymbol cd="ambiguous" id="Sx4.T5.5.m1.1.1.1.cmml" xref="Sx4.T5.5.m1.1.1">subscript</csymbol><ci id="Sx4.T5.5.m1.1.1.2.cmml" xref="Sx4.T5.5.m1.1.1.2">𝜃</ci><apply id="Sx4.T5.5.m1.1.1.3.cmml" xref="Sx4.T5.5.m1.1.1.3"><times id="Sx4.T5.5.m1.1.1.3.1.cmml" xref="Sx4.T5.5.m1.1.1.3.1"></times><ci id="Sx4.T5.5.m1.1.1.3.2.cmml" xref="Sx4.T5.5.m1.1.1.3.2">𝑣</ci><ci id="Sx4.T5.5.m1.1.1.3.3.cmml" xref="Sx4.T5.5.m1.1.1.3.3">𝑞</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.T5.5.m1.1d">\theta_{vq}</annotation><annotation encoding="application/x-llamapun" id="Sx4.T5.5.m1.1e">italic_θ start_POSTSUBSCRIPT italic_v italic_q end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\theta_{d}" class="ltx_Math" display="inline" id="Sx4.T5.6.m2.1"><semantics id="Sx4.T5.6.m2.1b"><msub id="Sx4.T5.6.m2.1.1" xref="Sx4.T5.6.m2.1.1.cmml"><mi id="Sx4.T5.6.m2.1.1.2" xref="Sx4.T5.6.m2.1.1.2.cmml">θ</mi><mi id="Sx4.T5.6.m2.1.1.3" xref="Sx4.T5.6.m2.1.1.3.cmml">d</mi></msub><annotation-xml encoding="MathML-Content" id="Sx4.T5.6.m2.1c"><apply id="Sx4.T5.6.m2.1.1.cmml" xref="Sx4.T5.6.m2.1.1"><csymbol cd="ambiguous" id="Sx4.T5.6.m2.1.1.1.cmml" xref="Sx4.T5.6.m2.1.1">subscript</csymbol><ci id="Sx4.T5.6.m2.1.1.2.cmml" xref="Sx4.T5.6.m2.1.1.2">𝜃</ci><ci id="Sx4.T5.6.m2.1.1.3.cmml" xref="Sx4.T5.6.m2.1.1.3">𝑑</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="Sx4.T5.6.m2.1d">\theta_{d}</annotation><annotation encoding="application/x-llamapun" id="Sx4.T5.6.m2.1e">italic_θ start_POSTSUBSCRIPT italic_d end_POSTSUBSCRIPT</annotation></semantics></math>. “w/o PIPE” means that the learnable prompts are randomly initialized here.
</figcaption>
</figure>
</section>
<section class="ltx_subsection" id="Sx4.SSx6">
<h3 class="ltx_title ltx_title_subsection">Broad Applicability of RACC</h3>
<div class="ltx_para" id="Sx4.SSx6.p1">
<p class="ltx_p" id="Sx4.SSx6.p1.1">RACC shows broad applicability from multiple aspects.</p>
</div>
<div class="ltx_para" id="Sx4.SSx6.p2">
<p class="ltx_p" id="Sx4.SSx6.p2.1">1. RACC can utilize different types of knowledge sources to aid its efficient retrieval-augmented generation process. We evaluate RACC with two different knowledge sources, <em class="ltx_emph ltx_font_italic" id="Sx4.SSx6.p2.1.1">i.e.</em> WIT and GS, which represent multimodal documents and textual documents. These two types of knowledge sources are quite common and important in practical applications, making them of significant research importance.</p>
</div>
<div class="ltx_para" id="Sx4.SSx6.p3">
<p class="ltx_p" id="Sx4.SSx6.p3.1">2. RACC can leverage any off-the-shelf multimodal retriever for retrieval, and our proposed RGCA strategy enables the retrieval results from high-performance retrievers to effectively guide the aggregation of the compressed prompts of retrieved documents. Therefore, RACC can benefit from advancements in multimodal retrieval technology.</p>
</div>
<div class="ltx_para" id="Sx4.SSx6.p4">
<p class="ltx_p" id="Sx4.SSx6.p4.1">3. RACC can be applied to any off-the-shelf MLLMs. In the setup of RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.SSx6.p4.1.1">homo</span>, the hyperMLLM, and the baseMLLM are identical, which means that the MLLM learns to compress contexts for itself. For RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.SSx6.p4.1.2">hetero</span>, the hyperMLLM and the baseMLLM differ in either structure or weights. We conduct experiments under this setup and present the results in Table <a class="ltx_ref" href="https://arxiv.org/html/2409.07331v1#Sx4.T6" title="Table 6 ‣ Broad Applicability of RACC ‣ Experiments ‣ Learning to Compress Contexts for Efficient Knowledge-based Visual Question Answering"><span class="ltx_text ltx_ref_tag">6</span></a>. RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.SSx6.p4.1.3">hetero</span> also performs well across different baseMLLMs. The setup of RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.SSx6.p4.1.4">hetero</span> is also of practical significance:
When it is not feasible to directly fine-tune the baseMLLM due to resource constraints, our framework can still work by adopting a much smaller hyperMLLM to help produce P-Tuningv2 modulations to adapt the frozen baseMLLM.</p>
</div>
<figure class="ltx_table" id="Sx4.T6">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="Sx4.T6.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="Sx4.T6.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="Sx4.T6.1.1.1.1">baseMLLM</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" id="Sx4.T6.1.1.1.2">VQA Accuracy</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="Sx4.T6.1.2.1">
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="Sx4.T6.1.2.1.1">miniCPM-v2</td>
<td class="ltx_td ltx_align_center ltx_border_t" id="Sx4.T6.1.2.1.2">48.21</td>
</tr>
<tr class="ltx_tr" id="Sx4.T6.1.3.2">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx4.T6.1.3.2.1">BLIP2-FlanT5XL</td>
<td class="ltx_td ltx_align_center" id="Sx4.T6.1.3.2.2">54.91</td>
</tr>
<tr class="ltx_tr" id="Sx4.T6.1.4.3">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx4.T6.1.4.3.1">InstructBLIP-FlanT5XL</td>
<td class="ltx_td ltx_align_center" id="Sx4.T6.1.4.3.2">59.49</td>
</tr>
<tr class="ltx_tr" id="Sx4.T6.1.5.4">
<td class="ltx_td ltx_align_center ltx_border_r" id="Sx4.T6.1.5.4.1">BLIP2-Vicuna7B</td>
<td class="ltx_td ltx_align_center" id="Sx4.T6.1.5.4.2">60.67</td>
</tr>
<tr class="ltx_tr" id="Sx4.T6.1.6.5">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r" id="Sx4.T6.1.6.5.1">InstructBLIP-Vicuna7B</td>
<td class="ltx_td ltx_align_center ltx_border_b" id="Sx4.T6.1.6.5.2"><span class="ltx_text ltx_font_bold" id="Sx4.T6.1.6.5.2.1">62.91</span></td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>RACC-<span class="ltx_text ltx_font_typewriter" id="Sx4.T6.3.1">hetero</span>’s experimental results on OK-VQA using different MLLMs as the baseMLLM. The hyperMLLM is fixed as InstructBLIP-FlanT5XL here.</figcaption>
</figure>
</section>
</section>
<section class="ltx_section" id="Sx5">
<h2 class="ltx_title ltx_title_section">Conclusion</h2>
<div class="ltx_para" id="Sx5.p1">
<p class="ltx_p" id="Sx5.p1.1">In this paper, we propose a KB-VQA framework named RACC, <em class="ltx_emph ltx_font_italic" id="Sx5.p1.1.1">i.e.</em> <span class="ltx_text ltx_font_bold" id="Sx5.p1.1.2">R</span>etrieval-<span class="ltx_text ltx_font_bold" id="Sx5.p1.1.3">A</span>ugmented MLLMs with <span class="ltx_text ltx_font_bold" id="Sx5.p1.1.4">C</span>ompressed <span class="ltx_text ltx_font_bold" id="Sx5.p1.1.5">C</span>ontexts, which achieves efficient inference by learning to compress, aggregate and leverage retrieved contexts. The contributions of this paper can be summarized as follows:</p>
</div>
<div class="ltx_para" id="Sx5.p2">
<p class="ltx_p" id="Sx5.p2.1">1. RACC achieves state-of-the-art (SOTA) performance at a very low cost on the challenging OK-VQA datasets.</p>
</div>
<div class="ltx_para" id="Sx5.p3">
<p class="ltx_p" id="Sx5.p3.1">2. As the first work to explore how to conduct efficient RAG on MLLMs for KB-VQA tasks, RACC provides a reliable way that not only reduces inference latency but also significantly saves disk space.</p>
</div>
<div class="ltx_para" id="Sx5.p4">
<p class="ltx_p" id="Sx5.p4.1">3. RACC demonstrates broad applicability, as experiments show that it is applicable to different MLLMs and various kinds of external knowledge sources.</p>
</div>
<div class="ltx_para" id="Sx5.p5">
<p class="ltx_p" id="Sx5.p5.1">With the rapid development of RAG technology and MLLMs, RAG on MLLMs will certainly attract increasing research attention. In the RAG of MLLMs, multimodal documents are very common and easily accessible in practical applications, which is of significant research importance. More importantly, we believe that inference latency is a key concern in practical applications, which has often been overlooked in previous KB-VQA works. For the above reasons, we conducted the research described in this paper and hope to provide some inspiration for future work.</p>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Alayrac et al. (2022)</span>
<span class="ltx_bibblock">
Alayrac, J.-B.; Donahue, J.; Luc, P.; Miech, A.; Barr, I.; Hasson, Y.; Lenc, K.; Mensch, A.; Millican, K.; Reynolds, M.; et al. 2022.

</span>
<span class="ltx_bibblock">Flamingo: a visual language model for few-shot learning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">Advances in Neural Information Processing Systems</em>, 35: 23716–23736.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">An et al. (2024)</span>
<span class="ltx_bibblock">
An, W.; Tian, F.; Nie, J.; Shi, W.; Lin, H.; Chen, Y.; Wang, Q.; Wu, Y.; Dai, G.; and Chen, P. 2024.

</span>
<span class="ltx_bibblock">Knowledge Acquisition Disentanglement for Knowledge-based Visual Question Answering with Large Language Models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">arXiv preprint arXiv:2407.15346</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et al. (2023)</span>
<span class="ltx_bibblock">
Bai, J.; Bai, S.; Yang, S.; Wang, S.; Tan, S.; Wang, P.; Lin, J.; Zhou, C.; and Zhou, J. 2023.

</span>
<span class="ltx_bibblock">Qwen-vl: A frontier large vision-language model with versatile abilities.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">arXiv preprint arXiv:2308.12966</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Chevalier et al. (2023)</span>
<span class="ltx_bibblock">
Chevalier, A.; Wettig, A.; Ajith, A.; and Chen, D. 2023.

</span>
<span class="ltx_bibblock">Adapting language models to compress contexts.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">arXiv preprint arXiv:2305.14788</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dai et al. (2023)</span>
<span class="ltx_bibblock">
Dai, W.; Li, J.; Li, D.; Tiong, A. M. H.; Zhao, J.; Wang, W.; Li, B.; Fung, P.; and Hoi, S. 2023.

</span>
<span class="ltx_bibblock">InstructBLIP: Towards General-purpose Vision-Language Models with Instruction Tuning.

</span>
<span class="ltx_bibblock">arXiv:2305.06500.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dosovitskiy et al. (2020)</span>
<span class="ltx_bibblock">
Dosovitskiy, A.; Beyer, L.; Kolesnikov, A.; Weissenborn, D.; Zhai, X.; Unterthiner, T.; Dehghani, M.; Minderer, M.; Heigold, G.; Gelly, S.; et al. 2020.

</span>
<span class="ltx_bibblock">An image is worth 16x16 words: Transformers for image recognition at scale.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">arXiv preprint arXiv:2010.11929</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gao et al. (2022)</span>
<span class="ltx_bibblock">
Gao, F.; Ping, Q.; Thattai, G.; Reganti, A.; Wu, Y. N.; and Natarajan, P. 2022.

</span>
<span class="ltx_bibblock">Transform-Retrieve-Generate: Natural Language-Centric Outside-Knowledge Visual Question Answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR)</em>, 5067–5077.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Gui et al. (2021)</span>
<span class="ltx_bibblock">
Gui, L.; Wang, B.; Huang, Q.; Hauptmann, A.; Bisk, Y.; and Gao, J. 2021.

</span>
<span class="ltx_bibblock">Kat: A knowledge augmented transformer for vision-and-language.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">arXiv preprint arXiv:2112.08614</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2024)</span>
<span class="ltx_bibblock">
Hu, S.; Tu, Y.; Han, X.; He, C.; Cui, G.; Long, X.; Zheng, Z.; Fang, Y.; Huang, Y.; Zhao, W.; et al. 2024.

</span>
<span class="ltx_bibblock">Minicpm: Unveiling the potential of small language models with scalable training strategies.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">arXiv preprint arXiv:2404.06395</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2023a)</span>
<span class="ltx_bibblock">
Hu, Y.; Hua, H.; Yang, Z.; Shi, W.; Smith, N. A.; and Luo, J. 2023a.

</span>
<span class="ltx_bibblock">Promptcap: Prompt-guided image captioning for vqa with gpt-3.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Proceedings of the IEEE/CVF International Conference on Computer Vision</em>, 2963–2975.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et al. (2023b)</span>
<span class="ltx_bibblock">
Hu, Z.; Iscen, A.; Sun, C.; Wang, Z.; Chang, K.-W.; Sun, Y.; Schmid, C.; Ross, D. A.; and Fathi, A. 2023b.

</span>
<span class="ltx_bibblock">Reveal: Retrieval-augmented visual-language pre-training with multi-source multimodal knowledge memory.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Proceedings of the IEEE/CVF conference on computer vision and pattern recognition</em>, 23369–23379.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023a)</span>
<span class="ltx_bibblock">
Jiang, H.; Wu, Q.; Lin, C.-Y.; Yang, Y.; and Qiu, L. 2023a.

</span>
<span class="ltx_bibblock">Llmlingua: Compressing prompts for accelerated inference of large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">arXiv preprint arXiv:2310.05736</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023b)</span>
<span class="ltx_bibblock">
Jiang, H.; Wu, Q.; Luo, X.; Li, D.; Lin, C.-Y.; Yang, Y.; and Qiu, L. 2023b.

</span>
<span class="ltx_bibblock">Longllmlingua: Accelerating and enhancing llms in long context scenarios via prompt compression.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">arXiv preprint arXiv:2310.06839</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Khademi et al. (2023)</span>
<span class="ltx_bibblock">
Khademi, M.; Yang, Z.; Frujeri, F.; and Zhu, C. 2023.

</span>
<span class="ltx_bibblock">MM-Reasoner: A Multi-Modal Knowledge-Aware Framework for Knowledge-Based Visual Question Answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Findings of the Association for Computational Linguistics: EMNLP 2023</em>, 6571–6581.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et al. (2023)</span>
<span class="ltx_bibblock">
Li, J.; Li, D.; Savarese, S.; and Hoi, S. 2023.

</span>
<span class="ltx_bibblock">Blip-2: Bootstrapping language-image pre-training with frozen image encoders and large language models.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">arXiv preprint arXiv:2301.12597</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin and Byrne (2022)</span>
<span class="ltx_bibblock">
Lin, W.; and Byrne, B. 2022.

</span>
<span class="ltx_bibblock">Retrieval augmented visual question answering with outside knowledge.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">arXiv preprint arXiv:2210.03809</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin et al. (2024a)</span>
<span class="ltx_bibblock">
Lin, W.; Chen, J.; Mei, J.; Coca, A.; and Byrne, B. 2024a.

</span>
<span class="ltx_bibblock">Fine-grained late-interaction multi-modal retrieval for retrieval augmented visual question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Advances in Neural Information Processing Systems</em>, 36.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin et al. (2024b)</span>
<span class="ltx_bibblock">
Lin, W.; Mei, J.; Chen, J.; and Byrne, B. 2024b.

</span>
<span class="ltx_bibblock">PreFLMR: Scaling Up Fine-Grained Late-Interaction Multi-modal Retrievers.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">arXiv preprint arXiv:2402.08327</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin et al. (2022)</span>
<span class="ltx_bibblock">
Lin, Y.; Xie, Y.; Chen, D.; Xu, Y.; Zhu, C.; and Yuan, L. 2022.

</span>
<span class="ltx_bibblock">Revive: Regional visual representation matters in knowledge-based visual question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Advances in Neural Information Processing Systems</em>, 35: 10560–10571.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et al. (2023)</span>
<span class="ltx_bibblock">
Liu, H.; Li, C.; Wu, Q.; and Lee, Y. J. 2023.

</span>
<span class="ltx_bibblock">Visual instruction tuning.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">arXiv preprint arXiv:2304.08485</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Luo et al. (2021)</span>
<span class="ltx_bibblock">
Luo, M.; Zeng, Y.; Banerjee, P.; and Baral, C. 2021.

</span>
<span class="ltx_bibblock">Weakly-supervised visual-retriever-reader for knowledge-based question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">arXiv preprint arXiv:2109.04014</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Marino et al. (2021)</span>
<span class="ltx_bibblock">
Marino, K.; Chen, X.; Parikh, D.; Gupta, A.; and Rohrbach, M. 2021.

</span>
<span class="ltx_bibblock">Krisp: Integrating implicit and symbolic knowledge for open-domain knowledge-based vqa.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition</em>, 14111–14121.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Marino et al. (2019)</span>
<span class="ltx_bibblock">
Marino, K.; Rastegari, M.; Farhadi, A.; and Mottaghi, R. 2019.

</span>
<span class="ltx_bibblock">Ok-vqa: A visual question answering benchmark requiring external knowledge.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Proceedings of the IEEE/cvf conference on computer vision and pattern recognition</em>, 3195–3204.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mu, Li, and Goodman (2024)</span>
<span class="ltx_bibblock">
Mu, J.; Li, X.; and Goodman, N. 2024.

</span>
<span class="ltx_bibblock">Learning to compress prompts with gist tokens.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">Advances in Neural Information Processing Systems</em>, 36.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Pan et al. (2024)</span>
<span class="ltx_bibblock">
Pan, Z.; Wu, Q.; Jiang, H.; Xia, M.; Luo, X.; Zhang, J.; Lin, Q.; Rühle, V.; Yang, Y.; Lin, C.-Y.; et al. 2024.

</span>
<span class="ltx_bibblock">Llmlingua-2: Data distillation for efficient and faithful task-agnostic prompt compression.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">arXiv preprint arXiv:2403.12968</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Phang et al. (2023)</span>
<span class="ltx_bibblock">
Phang, J.; Mao, Y.; He, P.; and Chen, W. 2023.

</span>
<span class="ltx_bibblock">Hypertuning: Toward adapting large language models without back-propagation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">International Conference on Machine Learning</em>, 27854–27875. PMLR.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Raffel et al. (2020)</span>
<span class="ltx_bibblock">
Raffel, C.; Shazeer, N.; Roberts, A.; Lee, K.; Narang, S.; Matena, M.; Zhou, Y.; Li, W.; and Liu, P. J. 2020.

</span>
<span class="ltx_bibblock">Exploring the limits of transfer learning with a unified text-to-text transformer.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">Journal of machine learning research</em>, 21(140): 1–67.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Schwenk et al. (2022)</span>
<span class="ltx_bibblock">
Schwenk, D.; Khandelwal, A.; Clark, C.; Marino, K.; and Mottaghi, R. 2022.

</span>
<span class="ltx_bibblock">A-okvqa: A benchmark for visual question answering using world knowledge.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">European conference on computer vision</em>, 146–162. Springer.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Shao et al. (2023)</span>
<span class="ltx_bibblock">
Shao, Z.; Yu, Z.; Wang, M.; and Yu, J. 2023.

</span>
<span class="ltx_bibblock">Prompting large language models with answer heuristics for knowledge-based visual question answering.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">Proceedings of the IEEE/CVF Conference on computer vision and pattern recognition</em>, 14974–14983.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Speer, Chin, and Havasi (2017)</span>
<span class="ltx_bibblock">
Speer, R.; Chin, J.; and Havasi, C. 2017.

</span>
<span class="ltx_bibblock">Conceptnet 5.5: An open multilingual graph of general knowledge.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">Proceedings of the AAAI conference on artificial intelligence</em>, volume 31.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Srinivasan et al. (2021)</span>
<span class="ltx_bibblock">
Srinivasan, K.; Raman, K.; Chen, J.; Bendersky, M.; and Najork, M. 2021.

</span>
<span class="ltx_bibblock">Wit: Wikipedia-based image text dataset for multimodal multilingual machine learning.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">Proceedings of the 44th international ACM SIGIR conference on research and development in information retrieval</em>, 2443–2449.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tack et al. (2024)</span>
<span class="ltx_bibblock">
Tack, J.; Kim, J.; Mitchell, E.; Shin, J.; Teh, Y. W.; and Schwarz, J. R. 2024.

</span>
<span class="ltx_bibblock">Online adaptation of language models with a memory of amortized contexts.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">arXiv preprint arXiv:2403.04317</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tiong et al. (2022)</span>
<span class="ltx_bibblock">
Tiong, A. M. H.; Li, J.; Li, B.; Savarese, S.; and Hoi, S. C. 2022.

</span>
<span class="ltx_bibblock">Plug-and-play vqa: Zero-shot vqa by conjoining large pretrained models with zero training.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">arXiv preprint arXiv:2210.08773</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Vaswani et al. (2017)</span>
<span class="ltx_bibblock">
Vaswani, A.; Shazeer, N.; Parmar, N.; Uszkoreit, J.; Jones, L.; Gomez, A. N.; Kaiser, Ł.; and Polosukhin, I. 2017.

</span>
<span class="ltx_bibblock">Attention is all you need.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">Advances in neural information processing systems</em>, 30.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Vrandečić and Krötzsch (2014)</span>
<span class="ltx_bibblock">
Vrandečić, D.; and Krötzsch, M. 2014.

</span>
<span class="ltx_bibblock">Wikidata: a free collaborative knowledgebase.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">Communications of the ACM</em>, 57(10): 78–85.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang, Ma, and Cai (2024)</span>
<span class="ltx_bibblock">
Wang, Y.; Ma, D.; and Cai, D. 2024.

</span>
<span class="ltx_bibblock">With Greater Text Comes Greater Necessity: Inference-Time Training Helps Long Text Generation.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">arXiv preprint arXiv:2401.11504</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xenos et al. (2023)</span>
<span class="ltx_bibblock">
Xenos, A.; Stafylakis, T.; Patras, I.; and Tzimiropoulos, G. 2023.

</span>
<span class="ltx_bibblock">A simple baseline for knowledge-based visual question answering.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">arXiv preprint arXiv:2310.13570</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu, Shi, and Choi (2024)</span>
<span class="ltx_bibblock">
Xu, F.; Shi, W.; and Choi, E. 2024.

</span>
<span class="ltx_bibblock">RECOMP: Improving retrieval-augmented LMs with context compression and selective augmentation.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">The Twelfth International Conference on Learning Representations</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yang et al. (2022)</span>
<span class="ltx_bibblock">
Yang, Z.; Gan, Z.; Wang, J.; Hu, X.; Lu, Y.; Liu, Z.; and Wang, L. 2022.

</span>
<span class="ltx_bibblock">An empirical study of gpt-3 for few-shot knowledge-based vqa.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib39.1.1">Proceedings of the AAAI conference on artificial intelligence</em>, volume 36, 3081–3089.

</span>
</li>
</ul>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Wed Sep 11 15:09:53 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
