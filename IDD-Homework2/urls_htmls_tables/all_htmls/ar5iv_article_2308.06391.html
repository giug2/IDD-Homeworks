<article class="ltx_document ltx_authors_1line">
 <h1 class="ltx_title ltx_title_document">
  Dynamic Planning with a LLM
 </h1>
 <div class="ltx_authors">
  <span class="ltx_creator ltx_role_author">
   <span class="ltx_personname">
    Gautier Dagan    Frank Keller    Alex Lascarides
    <br class="ltx_break"/>
    School of Informatics
    <br class="ltx_break"/>
    University of Edinburgh, UK
    <br class="ltx_break"/>
    <span class="ltx_text ltx_font_typewriter" id="id1.1.id1">
     gautier.dagan@ed.ac.uk
    </span>
    ,
    <span class="ltx_text ltx_font_typewriter" id="id2.2.id2">
     {keller, alex}@inf.ed.ac.uk
    </span>
    <br class="ltx_break"/>
   </span>
  </span>
 </div>
 <div class="ltx_abstract">
  <h6 class="ltx_title ltx_title_abstract">
   Abstract
  </h6>
  <p class="ltx_p" id="id3.id1">
   While Large Language Models (LLMs) can solve many NLP tasks in zero-shot settings, applications involving embodied agents remain problematic.
In particular, complex plans that require multi-step reasoning become difficult and too costly as the context window grows.
Planning requires understanding the likely effects of one’s actions and identifying whether the current environment satisfies the goal state.
While symbolic planners find optimal solutions quickly, they require a complete and accurate representation of the planning problem, severely limiting their use in practical scenarios.
In contrast, modern LLMs cope with noisy observations and high levels of uncertainty when reasoning about a task.
Our work presents LLM Dynamic Planner (LLM-DP): a neuro-symbolic framework where an LLM works hand-in-hand with a traditional planner to solve an embodied task.
Given action-descriptions, LLM-DP solves Alfworld faster and more efficiently than a naive LLM ReAct baseline.
  </p>
 </div>
 <section class="ltx_section" id="S1">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    1
   </span>
   Introduction
  </h2>
  <figure class="ltx_figure" id="S1.F1">
   <img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="146" id="S1.F1.g1" src="/html/2308.06391/assets/x1.png" width="461"/>
   <figcaption class="ltx_caption ltx_centering">
    <span class="ltx_tag ltx_tag_figure">
     Figure 1:
    </span>
    LLM Dynamic Planner (LLM-DP). The LLM grounds observations and processes natural language instructions into
    <span class="ltx_text ltx_font_typewriter" id="S1.F1.2.1">
     PDDL
    </span>
    to use with a symbolic planner. This model can solve plans for unobserved or previously unknown objects because the LLM generates plausible predicates for relevant objects through semantic and pragmatic inference. Through sampling possible predicates, multiple plans can be found, and an Action Selector decides whether to act, review its understanding of the problem, or ask clarification questions.
   </figcaption>
  </figure>
  <div class="ltx_para" id="S1.p1">
   <p class="ltx_p" id="S1.p1.1">
    Large Language Models (LLMs), like GPT-4
    <cite class="ltx_cite ltx_citemacro_citep">
     (OpenAI,
     <a class="ltx_ref" href="#bib.bib15" title="">
      2023
     </a>
     )
    </cite>
    , have proven remarkably effective at various natural language processing tasks, particularly in zero-shot or few-shot settings
    <cite class="ltx_cite ltx_citemacro_cite">
     Brown et al. (
     <a class="ltx_ref" href="#bib.bib1" title="">
      2020
     </a>
     )
    </cite>
    .
However, employing LLMs in embodied agents, which interact with dynamic environments, presents substantial challenges.
LLMs tend to generate incorrect or spurious information, a phenomenon known as hallucination, and their performance is brittle to the phrasing of prompts
    <cite class="ltx_cite ltx_citemacro_cite">
     Ji et al. (
     <a class="ltx_ref" href="#bib.bib10" title="">
      2022
     </a>
     )
    </cite>
    .
Moreover, LLMs are ill-equipped for naive long-term planning since managing an extensive context over multiple steps is complex and resource-consuming
    <cite class="ltx_cite ltx_citemacro_citep">
     (Silver et al.,
     <a class="ltx_ref" href="#bib.bib23" title="">
      2022
     </a>
     ; Liu et al.,
     <a class="ltx_ref" href="#bib.bib12" title="">
      2023
     </a>
     )
    </cite>
    .
   </p>
  </div>
  <div class="ltx_para" id="S1.p2">
   <p class="ltx_p" id="S1.p2.1">
    Various approaches have aimed to mitigate some of these limitations.
For instance, methods like Chain-of-Thought
    <cite class="ltx_cite ltx_citemacro_citep">
     (Wei et al.,
     <a class="ltx_ref" href="#bib.bib27" title="">
      2022
     </a>
     )
    </cite>
    and Self-Consistency
    <cite class="ltx_cite ltx_citemacro_citep">
     (Wang et al.,
     <a class="ltx_ref" href="#bib.bib26" title="">
      2023b
     </a>
     )
    </cite>
    augment the context with reasoning traces.
Other, agent-based approaches, such as ReAct
    <cite class="ltx_cite ltx_citemacro_citep">
     (Yao et al.,
     <a class="ltx_ref" href="#bib.bib29" title="">
      2023
     </a>
     )
    </cite>
    , integrate feedback from the environment iteratively, giving the agent the ability to take ‘thinking’ steps or to augment its context with a reasoning trace.
However, these approaches frequently involve high computational costs due to the iterated invocations of LLMs and still face challenges dealing with the limits of the context window and recovering from hallucinations, which can compromise the quality of the plans.
   </p>
  </div>
  <div class="ltx_para" id="S1.p3">
   <p class="ltx_p" id="S1.p3.1">
    Conversely, traditional symbolic planners, such as the Fast-Forward planner
    <cite class="ltx_cite ltx_citemacro_citep">
     (Hoffmann and Nebel,
     <a class="ltx_ref" href="#bib.bib7" title="">
      2001
     </a>
     )
    </cite>
    or the BFS(f) planner
    <cite class="ltx_cite ltx_citemacro_cite">
     Lipovetzky et al. (
     <a class="ltx_ref" href="#bib.bib11" title="">
      2014
     </a>
     )
    </cite>
    , excel at finding optimal plans efficiently.
But symbolic planners require problem and domain descriptions as prerequisites
    <cite class="ltx_cite ltx_citemacro_citep">
     (McDermott,
     <a class="ltx_ref" href="#bib.bib13" title="">
      2000
     </a>
     )
    </cite>
    , which hampers their applicability in real-world scenarios where it may be infeasible to achieve these high informational demands.
For instance, knowing a complete and accurate description of the goal may not be possible before exploring the environment through actions.
   </p>
  </div>
  <div class="ltx_para" id="S1.p4">
   <p class="ltx_p" id="S1.p4.1">
    Previous work by
    <cite class="ltx_cite ltx_citemacro_cite">
     Liu et al. (
     <a class="ltx_ref" href="#bib.bib12" title="">
      2023
     </a>
     )
    </cite>
    has shown that LLMs can generate valid problem files in the Planning Domain Definition Language (
    <span class="ltx_text ltx_font_typewriter" id="S1.p4.1.1">
     PDDL
    </span>
    ) for many simple examples.
Yet, the problem of incomplete information remains: agents often need to interact with the world to discover their surroundings before optimal planning can be applied.
Some versions of
    <span class="ltx_text ltx_font_typewriter" id="S1.p4.1.2">
     PDDL
    </span>
    have been proposed in the past to deal with probabilities or Task and Motion Planning, such as PPDDL and PDDLStream
    <cite class="ltx_cite ltx_citemacro_cite">
     Younes and Littman (
     <a class="ltx_ref" href="#bib.bib30" title="">
      2004
     </a>
     ); Garrett et al. (
     <a class="ltx_ref" href="#bib.bib5" title="">
      2018
     </a>
     )
    </cite>
    , but these still assume a human designer encoding the agent’s understanding of the domain and the planning problem, rather than the agent learning from interactions.
Therefore, where modern LLMs need minimal information to figure out a task, e.g. through Few-shot or In-Context Learning
    <cite class="ltx_cite ltx_citemacro_citep">
     (Honovich et al.,
     <a class="ltx_ref" href="#bib.bib8" title="">
      2022
     </a>
     ; Chen et al.,
     <a class="ltx_ref" href="#bib.bib2" title="">
      2022
     </a>
     ; Min et al.,
     <a class="ltx_ref" href="#bib.bib14" title="">
      2022
     </a>
     )
    </cite>
    , traditional planners need maximal information.
   </p>
  </div>
  <div class="ltx_para" id="S1.p5">
   <p class="ltx_p" id="S1.p5.1">
    In this work,
    <span class="ltx_text ltx_font_bold" id="S1.p5.1.1">
     we introduce the LLM Dynamic Planner (LLM-DP), a neuro-symbolic framework that integrates an LLM with a symbolic planner to solve embodied tasks
    </span>
    .
    <span class="ltx_note ltx_role_footnote" id="footnote1">
     <sup class="ltx_note_mark">
      1
     </sup>
     <span class="ltx_note_outer">
      <span class="ltx_note_content">
       <sup class="ltx_note_mark">
        1
       </sup>
       <span class="ltx_tag ltx_tag_note">
        1
       </span>
       Our code is available at
       <a class="ltx_ref ltx_href" href="https://github.com/itl-ed/llm-dp" target="_blank" title="">
        github.com/itl-ed/llm-dp
       </a>
      </span>
     </span>
    </span>
    LLM-DP capitalises on the LLM’s ability to understand actions and their impact on their environment and combines it with the planner’s efficiency in finding solutions.
Using domain knowledge, LLM-DP solves the Alfworld test set faster and more efficiently than a LLM-only (ReAct) approach.
The remainder of this paper explores the architecture of LLM-DP, discusses how to combine the strengths of LLMs and symbolic planning and presents potential research avenues for future work in LLM-driven agents.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S2">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    2
   </span>
   Related Work
  </h2>
  <div class="ltx_para" id="S2.p1">
   <p class="ltx_p" id="S2.p1.1">
    <span class="ltx_text ltx_font_bold" id="S2.p1.1.1">
     Symbolic Planners
    </span>
    Symbolic planners have been a cornerstone in automated planning and artificial intelligence for decades
    <cite class="ltx_cite ltx_citemacro_cite">
     Fikes and Nilsson (
     <a class="ltx_ref" href="#bib.bib4" title="">
      1971
     </a>
     )
    </cite>
    .
Based on formal logic, they operate over symbolic representations of the world to find a sequence of actions that transition from an initial state to a goal state.
Since the introduction of
    <span class="ltx_text ltx_font_typewriter" id="S2.p1.1.2">
     PDDL
    </span>
    <cite class="ltx_cite ltx_citemacro_citep">
     (McDermott,
     <a class="ltx_ref" href="#bib.bib13" title="">
      2000
     </a>
     )
    </cite>
    , the AI planning community has developed an array of efficient planning algorithms.
For example, the Fast-Forward planner (FF)
    <cite class="ltx_cite ltx_citemacro_citep">
     (Hoffmann and Nebel,
     <a class="ltx_ref" href="#bib.bib7" title="">
      2001
     </a>
     )
    </cite>
    employs heuristics derived from a relaxed version of the planning problem.
Similarly, the BFS(f) planner
    <cite class="ltx_cite ltx_citemacro_citep">
     (Lipovetzky et al.,
     <a class="ltx_ref" href="#bib.bib11" title="">
      2014
     </a>
     )
    </cite>
    combines breadth-first search and specialised heuristics.
These planners find high-quality or optimal solutions quickly in well-defined domains.
However, their up-front requirement for comprehensive problem and domain descriptions limits their applicability in complex real-world settings where complete information may not be available.
   </p>
  </div>
  <div class="ltx_para ltx_noindent" id="S2.p2">
   <p class="ltx_p" id="S2.p2.1">
    <span class="ltx_text ltx_font_bold" id="S2.p2.1.1">
     LLMs in Planning and Reasoning
    </span>
    In contrast to symbolic planners, LLMs have shown promise in adapting to noisy planning and reasoning tasks through various methods.
Some general approaches such as Chain-of-Thought
    <cite class="ltx_cite ltx_citemacro_citep">
     (Wei et al.,
     <a class="ltx_ref" href="#bib.bib27" title="">
      2022
     </a>
     )
    </cite>
    , Self-Consistency
    <cite class="ltx_cite ltx_citemacro_citep">
     (Wang et al.,
     <a class="ltx_ref" href="#bib.bib26" title="">
      2023b
     </a>
     )
    </cite>
    , and Reasoning via Planning
    <cite class="ltx_cite ltx_citemacro_citep">
     (Hao et al.,
     <a class="ltx_ref" href="#bib.bib6" title="">
      2023
     </a>
     )
    </cite>
    augment the context with a reasoning trace that the LLM generates to improve its final prediction.
Alternatively, giving access to tools/APIs
    <cite class="ltx_cite ltx_citemacro_cite">
     Schick et al. (
     <a class="ltx_ref" href="#bib.bib19" title="">
      2023
     </a>
     ); Patil et al. (
     <a class="ltx_ref" href="#bib.bib16" title="">
      2023
     </a>
     )
    </cite>
    , outside knowledge or databases
    <cite class="ltx_cite ltx_citemacro_cite">
     Peng et al. (
     <a class="ltx_ref" href="#bib.bib17" title="">
      2023
     </a>
     ); Hu et al. (
     <a class="ltx_ref" href="#bib.bib9" title="">
      2023
     </a>
     )
    </cite>
    , code
    <cite class="ltx_cite ltx_citemacro_cite">
     Surís et al. (
     <a class="ltx_ref" href="#bib.bib24" title="">
      2023
     </a>
     )
    </cite>
    , and even symbolic reasoners
    <cite class="ltx_cite ltx_citemacro_cite">
     Yang et al. (
     <a class="ltx_ref" href="#bib.bib28" title="">
      2023
     </a>
     )
    </cite>
    to enrich an LLM’s context and ability to reason.
The LLM can trigger these external sources of information or logic (through fine-tuning or prompting) to obtain additional context and improve its downstream performance.
   </p>
  </div>
  <div class="ltx_para ltx_noindent" id="S2.p3">
   <p class="ltx_p" id="S2.p3.1">
    <span class="ltx_text ltx_font_bold" id="S2.p3.1.1">
     Embodied Agents with LLMs
    </span>
    In a parallel direction, recent works such as ReAct
    <cite class="ltx_cite ltx_citemacro_citep">
     (Yao et al.,
     <a class="ltx_ref" href="#bib.bib29" title="">
      2023
     </a>
     )
    </cite>
    , Reflexion
    <cite class="ltx_cite ltx_citemacro_citep">
     (Shinn et al.,
     <a class="ltx_ref" href="#bib.bib20" title="">
      2023
     </a>
     )
    </cite>
    , AutoGPT
    <cite class="ltx_cite ltx_citemacro_citep">
     (Significant-Gravitas,
     <a class="ltx_ref" href="#bib.bib22" title="">
      2023
     </a>
     )
    </cite>
    , and Voyager
    <cite class="ltx_cite ltx_citemacro_citep">
     (Wang et al.,
     <a class="ltx_ref" href="#bib.bib25" title="">
      2023a
     </a>
     )
    </cite>
    , take an agent-based approach and augment the reasoning process through a closed ‘while’ loop that feeds environment observations back to the LLM.
ReAct
    <cite class="ltx_cite ltx_citemacro_citep">
     (Yao et al.,
     <a class="ltx_ref" href="#bib.bib29" title="">
      2023
     </a>
     )
    </cite>
    allows the LLM agent to either take an action or a ‘thinking’ step.
This allows the LLM to augment its context with its reasoning, which can be seen as agent-driven Chain-of-Thought prompting.
Voyager
    <cite class="ltx_cite ltx_citemacro_citep">
     (Wang et al.,
     <a class="ltx_ref" href="#bib.bib25" title="">
      2023a
     </a>
     )
    </cite>
    incrementally builds an agent’s capabilities from its interactions with the environment and an accessible memory component (skill library).
While many of these works show promising results in building general executable agents in embodied environments
    <cite class="ltx_cite ltx_citemacro_citep">
     (Wang et al.,
     <a class="ltx_ref" href="#bib.bib25" title="">
      2023a
     </a>
     )
    </cite>
    , they still require many expensive calls to the LLMs, are limited by the LLM’s context window, and do not guarantee optimal plans.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S3">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    3
   </span>
   Alfworld
  </h2>
  <div class="ltx_para" id="S3.p1">
   <p class="ltx_p" id="S3.p1.1">
    Alfworld
    <cite class="ltx_cite ltx_citemacro_citep">
     (Shridhar et al.,
     <a class="ltx_ref" href="#bib.bib21" title="">
      2020
     </a>
     )
    </cite>
    is a text-only home environment where an agent is tasked with seven possible tasks, such as interacting with one or more objects and placing them in a specific receptacle.
At the start of each episode, the goal is given in natural language, and the initial observation does not include the location of any objects.
Therefore an agent must navigate the environment to search for the relevant objects and perform the correct actions.
The possible locations of the environment are known, and the agent can navigate to any receptacle by using a ‘go to’ action.
However, since none of the objects’ locations are initially observed, the agent must be able to plan around uncertainty, estimate where objects are likely to be observed and adjust accordingly.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S4">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    4
   </span>
   LLM-DP
  </h2>
  <div class="ltx_para" id="S4.p1">
   <p class="ltx_p" id="S4.p1.2">
    To tackle an embodied environment like Alfworld, we introduce the Large Language Model Dynamic Planner (LLM-DP), which operates as a closed-loop agent.
LLM-DP uses a combination of language understanding and symbolic reasoning to plan and solve tasks in the simulated environment.
The model tracks a World State
    <math alttext="\mathcal{W}" class="ltx_Math" display="inline" id="S4.p1.1.m1.1">
     <semantics id="S4.p1.1.m1.1a">
      <mi class="ltx_font_mathcaligraphic" id="S4.p1.1.m1.1.1" xref="S4.p1.1.m1.1.1.cmml">
       𝒲
      </mi>
      <annotation-xml encoding="MathML-Content" id="S4.p1.1.m1.1b">
       <ci id="S4.p1.1.m1.1.1.cmml" xref="S4.p1.1.m1.1.1">
        𝒲
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S4.p1.1.m1.1c">
       \mathcal{W}
      </annotation>
     </semantics>
    </math>
    and beliefs
    <math alttext="\mathcal{B}" class="ltx_Math" display="inline" id="S4.p1.2.m2.1">
     <semantics id="S4.p1.2.m2.1a">
      <mi class="ltx_font_mathcaligraphic" id="S4.p1.2.m2.1.1" xref="S4.p1.2.m2.1.1.cmml">
       ℬ
      </mi>
      <annotation-xml encoding="MathML-Content" id="S4.p1.2.m2.1b">
       <ci id="S4.p1.2.m2.1.1.cmml" xref="S4.p1.2.m2.1.1">
        ℬ
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S4.p1.2.m2.1c">
       \mathcal{B}
      </annotation>
     </semantics>
    </math>
    about predicates in the environment, uses an LLM to translate the task description into an executable goal state and samples its beliefs to generate plausible world states.
We describe the working of the LLM-DP agent as pseudo-code in Algorithm
    <a class="ltx_ref" href="#alg1" title="Algorithm 1 ‣ 4 LLM-DP ‣ Dynamic Planning with a LLM">
     <span class="ltx_text ltx_ref_tag">
      1
     </span>
    </a>
    .
   </p>
  </div>
  <figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_float">
     <span class="ltx_text ltx_font_bold" id="alg1.2.1.1">
      Algorithm 1
     </span>
    </span>
    LLM-DP Pseudo-code
   </figcaption>
   <div class="ltx_listing ltx_listing" id="alg1.3">
    <div class="ltx_listingline" id="alg1.l1">
     LLM, PG, AS, Domain,
     <math alttext="task" class="ltx_Math" display="inline" id="alg1.l1.m1.1">
      <semantics id="alg1.l1.m1.1a">
       <mrow id="alg1.l1.m1.1.1" xref="alg1.l1.m1.1.1.cmml">
        <mi id="alg1.l1.m1.1.1.2" xref="alg1.l1.m1.1.1.2.cmml">
         t
        </mi>
        <mo id="alg1.l1.m1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l1.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="alg1.l1.m1.1.1.3" xref="alg1.l1.m1.1.1.3.cmml">
         a
        </mi>
        <mo id="alg1.l1.m1.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l1.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="alg1.l1.m1.1.1.4" xref="alg1.l1.m1.1.1.4.cmml">
         s
        </mi>
        <mo id="alg1.l1.m1.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l1.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="alg1.l1.m1.1.1.5" xref="alg1.l1.m1.1.1.5.cmml">
         k
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l1.m1.1b">
        <apply id="alg1.l1.m1.1.1.cmml" xref="alg1.l1.m1.1.1">
         <times id="alg1.l1.m1.1.1.1.cmml" xref="alg1.l1.m1.1.1.1">
         </times>
         <ci id="alg1.l1.m1.1.1.2.cmml" xref="alg1.l1.m1.1.1.2">
          𝑡
         </ci>
         <ci id="alg1.l1.m1.1.1.3.cmml" xref="alg1.l1.m1.1.1.3">
          𝑎
         </ci>
         <ci id="alg1.l1.m1.1.1.4.cmml" xref="alg1.l1.m1.1.1.4">
          𝑠
         </ci>
         <ci id="alg1.l1.m1.1.1.5.cmml" xref="alg1.l1.m1.1.1.5">
          𝑘
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l1.m1.1c">
        task
       </annotation>
      </semantics>
     </math>
     ,
     <math alttext="obs_{0}" class="ltx_Math" display="inline" id="alg1.l1.m2.1">
      <semantics id="alg1.l1.m2.1a">
       <mrow id="alg1.l1.m2.1.1" xref="alg1.l1.m2.1.1.cmml">
        <mi id="alg1.l1.m2.1.1.2" xref="alg1.l1.m2.1.1.2.cmml">
         o
        </mi>
        <mo id="alg1.l1.m2.1.1.1" lspace="0em" rspace="0em" xref="alg1.l1.m2.1.1.1.cmml">
         ​
        </mo>
        <mi id="alg1.l1.m2.1.1.3" xref="alg1.l1.m2.1.1.3.cmml">
         b
        </mi>
        <mo id="alg1.l1.m2.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l1.m2.1.1.1.cmml">
         ​
        </mo>
        <msub id="alg1.l1.m2.1.1.4" xref="alg1.l1.m2.1.1.4.cmml">
         <mi id="alg1.l1.m2.1.1.4.2" xref="alg1.l1.m2.1.1.4.2.cmml">
          s
         </mi>
         <mn id="alg1.l1.m2.1.1.4.3" xref="alg1.l1.m2.1.1.4.3.cmml">
          0
         </mn>
        </msub>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l1.m2.1b">
        <apply id="alg1.l1.m2.1.1.cmml" xref="alg1.l1.m2.1.1">
         <times id="alg1.l1.m2.1.1.1.cmml" xref="alg1.l1.m2.1.1.1">
         </times>
         <ci id="alg1.l1.m2.1.1.2.cmml" xref="alg1.l1.m2.1.1.2">
          𝑜
         </ci>
         <ci id="alg1.l1.m2.1.1.3.cmml" xref="alg1.l1.m2.1.1.3">
          𝑏
         </ci>
         <apply id="alg1.l1.m2.1.1.4.cmml" xref="alg1.l1.m2.1.1.4">
          <csymbol cd="ambiguous" id="alg1.l1.m2.1.1.4.1.cmml" xref="alg1.l1.m2.1.1.4">
           subscript
          </csymbol>
          <ci id="alg1.l1.m2.1.1.4.2.cmml" xref="alg1.l1.m2.1.1.4.2">
           𝑠
          </ci>
          <cn id="alg1.l1.m2.1.1.4.3.cmml" type="integer" xref="alg1.l1.m2.1.1.4.3">
           0
          </cn>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l1.m2.1c">
        obs_{0}
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l2">
     <math alttext="goal\leftarrow" class="ltx_Math" display="inline" id="alg1.l2.m1.1">
      <semantics id="alg1.l2.m1.1a">
       <mrow id="alg1.l2.m1.1.1" xref="alg1.l2.m1.1.1.cmml">
        <mrow id="alg1.l2.m1.1.1.2" xref="alg1.l2.m1.1.1.2.cmml">
         <mi id="alg1.l2.m1.1.1.2.2" xref="alg1.l2.m1.1.1.2.2.cmml">
          g
         </mi>
         <mo id="alg1.l2.m1.1.1.2.1" lspace="0em" rspace="0em" xref="alg1.l2.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l2.m1.1.1.2.3" xref="alg1.l2.m1.1.1.2.3.cmml">
          o
         </mi>
         <mo id="alg1.l2.m1.1.1.2.1a" lspace="0em" rspace="0em" xref="alg1.l2.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l2.m1.1.1.2.4" xref="alg1.l2.m1.1.1.2.4.cmml">
          a
         </mi>
         <mo id="alg1.l2.m1.1.1.2.1b" lspace="0em" rspace="0em" xref="alg1.l2.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l2.m1.1.1.2.5" xref="alg1.l2.m1.1.1.2.5.cmml">
          l
         </mi>
        </mrow>
        <mo id="alg1.l2.m1.1.1.1" stretchy="false" xref="alg1.l2.m1.1.1.1.cmml">
         ←
        </mo>
        <mi id="alg1.l2.m1.1.1.3" xref="alg1.l2.m1.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l2.m1.1b">
        <apply id="alg1.l2.m1.1.1.cmml" xref="alg1.l2.m1.1.1">
         <ci id="alg1.l2.m1.1.1.1.cmml" xref="alg1.l2.m1.1.1.1">
          ←
         </ci>
         <apply id="alg1.l2.m1.1.1.2.cmml" xref="alg1.l2.m1.1.1.2">
          <times id="alg1.l2.m1.1.1.2.1.cmml" xref="alg1.l2.m1.1.1.2.1">
          </times>
          <ci id="alg1.l2.m1.1.1.2.2.cmml" xref="alg1.l2.m1.1.1.2.2">
           𝑔
          </ci>
          <ci id="alg1.l2.m1.1.1.2.3.cmml" xref="alg1.l2.m1.1.1.2.3">
           𝑜
          </ci>
          <ci id="alg1.l2.m1.1.1.2.4.cmml" xref="alg1.l2.m1.1.1.2.4">
           𝑎
          </ci>
          <ci id="alg1.l2.m1.1.1.2.5.cmml" xref="alg1.l2.m1.1.1.2.5">
           𝑙
          </ci>
         </apply>
         <csymbol cd="latexml" id="alg1.l2.m1.1.1.3.cmml" xref="alg1.l2.m1.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l2.m1.1c">
        goal\leftarrow
       </annotation>
      </semantics>
     </math>
     LLM
     <math alttext="(" class="ltx_Math" display="inline" id="alg1.l2.m2.1">
      <semantics id="alg1.l2.m2.1a">
       <mo id="alg1.l2.m2.1.1" stretchy="false" xref="alg1.l2.m2.1.1.cmml">
        (
       </mo>
       <annotation-xml encoding="MathML-Content" id="alg1.l2.m2.1b">
        <ci id="alg1.l2.m2.1.1.cmml" xref="alg1.l2.m2.1.1">
         (
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l2.m2.1c">
        (
       </annotation>
      </semantics>
     </math>
     Domain
     <math alttext=",task)" class="ltx_math_unparsed" display="inline" id="alg1.l2.m3.1">
      <semantics id="alg1.l2.m3.1a">
       <mrow id="alg1.l2.m3.1b">
        <mo id="alg1.l2.m3.1.1">
         ,
        </mo>
        <mi id="alg1.l2.m3.1.2">
         t
        </mi>
        <mi id="alg1.l2.m3.1.3">
         a
        </mi>
        <mi id="alg1.l2.m3.1.4">
         s
        </mi>
        <mi id="alg1.l2.m3.1.5">
         k
        </mi>
        <mo id="alg1.l2.m3.1.6" stretchy="false">
         )
        </mo>
       </mrow>
       <annotation encoding="application/x-tex" id="alg1.l2.m3.1c">
        ,task)
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l3">
     <math alttext="\mathcal{W},\mathcal{B}\leftarrow" class="ltx_Math" display="inline" id="alg1.l3.m1.2">
      <semantics id="alg1.l3.m1.2a">
       <mrow id="alg1.l3.m1.2.3" xref="alg1.l3.m1.2.3.cmml">
        <mrow id="alg1.l3.m1.2.3.2.2" xref="alg1.l3.m1.2.3.2.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1.cmml">
          𝒲
         </mi>
         <mo id="alg1.l3.m1.2.3.2.2.1" xref="alg1.l3.m1.2.3.2.1.cmml">
          ,
         </mo>
         <mi class="ltx_font_mathcaligraphic" id="alg1.l3.m1.2.2" xref="alg1.l3.m1.2.2.cmml">
          ℬ
         </mi>
        </mrow>
        <mo id="alg1.l3.m1.2.3.1" stretchy="false" xref="alg1.l3.m1.2.3.1.cmml">
         ←
        </mo>
        <mi id="alg1.l3.m1.2.3.3" xref="alg1.l3.m1.2.3.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l3.m1.2b">
        <apply id="alg1.l3.m1.2.3.cmml" xref="alg1.l3.m1.2.3">
         <ci id="alg1.l3.m1.2.3.1.cmml" xref="alg1.l3.m1.2.3.1">
          ←
         </ci>
         <list id="alg1.l3.m1.2.3.2.1.cmml" xref="alg1.l3.m1.2.3.2.2">
          <ci id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1">
           𝒲
          </ci>
          <ci id="alg1.l3.m1.2.2.cmml" xref="alg1.l3.m1.2.2">
           ℬ
          </ci>
         </list>
         <csymbol cd="latexml" id="alg1.l3.m1.2.3.3.cmml" xref="alg1.l3.m1.2.3.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l3.m1.2c">
        \mathcal{W},\mathcal{B}\leftarrow
       </annotation>
      </semantics>
     </math>
     observe
     <math alttext="(goal,obs_{0})" class="ltx_Math" display="inline" id="alg1.l3.m2.2">
      <semantics id="alg1.l3.m2.2a">
       <mrow id="alg1.l3.m2.2.2.2" xref="alg1.l3.m2.2.2.3.cmml">
        <mo id="alg1.l3.m2.2.2.2.3" stretchy="false" xref="alg1.l3.m2.2.2.3.cmml">
         (
        </mo>
        <mrow id="alg1.l3.m2.1.1.1.1" xref="alg1.l3.m2.1.1.1.1.cmml">
         <mi id="alg1.l3.m2.1.1.1.1.2" xref="alg1.l3.m2.1.1.1.1.2.cmml">
          g
         </mi>
         <mo id="alg1.l3.m2.1.1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l3.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l3.m2.1.1.1.1.3" xref="alg1.l3.m2.1.1.1.1.3.cmml">
          o
         </mi>
         <mo id="alg1.l3.m2.1.1.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l3.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l3.m2.1.1.1.1.4" xref="alg1.l3.m2.1.1.1.1.4.cmml">
          a
         </mi>
         <mo id="alg1.l3.m2.1.1.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l3.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l3.m2.1.1.1.1.5" xref="alg1.l3.m2.1.1.1.1.5.cmml">
          l
         </mi>
        </mrow>
        <mo id="alg1.l3.m2.2.2.2.4" xref="alg1.l3.m2.2.2.3.cmml">
         ,
        </mo>
        <mrow id="alg1.l3.m2.2.2.2.2" xref="alg1.l3.m2.2.2.2.2.cmml">
         <mi id="alg1.l3.m2.2.2.2.2.2" xref="alg1.l3.m2.2.2.2.2.2.cmml">
          o
         </mi>
         <mo id="alg1.l3.m2.2.2.2.2.1" lspace="0em" rspace="0em" xref="alg1.l3.m2.2.2.2.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l3.m2.2.2.2.2.3" xref="alg1.l3.m2.2.2.2.2.3.cmml">
          b
         </mi>
         <mo id="alg1.l3.m2.2.2.2.2.1a" lspace="0em" rspace="0em" xref="alg1.l3.m2.2.2.2.2.1.cmml">
          ​
         </mo>
         <msub id="alg1.l3.m2.2.2.2.2.4" xref="alg1.l3.m2.2.2.2.2.4.cmml">
          <mi id="alg1.l3.m2.2.2.2.2.4.2" xref="alg1.l3.m2.2.2.2.2.4.2.cmml">
           s
          </mi>
          <mn id="alg1.l3.m2.2.2.2.2.4.3" xref="alg1.l3.m2.2.2.2.2.4.3.cmml">
           0
          </mn>
         </msub>
        </mrow>
        <mo id="alg1.l3.m2.2.2.2.5" stretchy="false" xref="alg1.l3.m2.2.2.3.cmml">
         )
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l3.m2.2b">
        <interval closure="open" id="alg1.l3.m2.2.2.3.cmml" xref="alg1.l3.m2.2.2.2">
         <apply id="alg1.l3.m2.1.1.1.1.cmml" xref="alg1.l3.m2.1.1.1.1">
          <times id="alg1.l3.m2.1.1.1.1.1.cmml" xref="alg1.l3.m2.1.1.1.1.1">
          </times>
          <ci id="alg1.l3.m2.1.1.1.1.2.cmml" xref="alg1.l3.m2.1.1.1.1.2">
           𝑔
          </ci>
          <ci id="alg1.l3.m2.1.1.1.1.3.cmml" xref="alg1.l3.m2.1.1.1.1.3">
           𝑜
          </ci>
          <ci id="alg1.l3.m2.1.1.1.1.4.cmml" xref="alg1.l3.m2.1.1.1.1.4">
           𝑎
          </ci>
          <ci id="alg1.l3.m2.1.1.1.1.5.cmml" xref="alg1.l3.m2.1.1.1.1.5">
           𝑙
          </ci>
         </apply>
         <apply id="alg1.l3.m2.2.2.2.2.cmml" xref="alg1.l3.m2.2.2.2.2">
          <times id="alg1.l3.m2.2.2.2.2.1.cmml" xref="alg1.l3.m2.2.2.2.2.1">
          </times>
          <ci id="alg1.l3.m2.2.2.2.2.2.cmml" xref="alg1.l3.m2.2.2.2.2.2">
           𝑜
          </ci>
          <ci id="alg1.l3.m2.2.2.2.2.3.cmml" xref="alg1.l3.m2.2.2.2.2.3">
           𝑏
          </ci>
          <apply id="alg1.l3.m2.2.2.2.2.4.cmml" xref="alg1.l3.m2.2.2.2.2.4">
           <csymbol cd="ambiguous" id="alg1.l3.m2.2.2.2.2.4.1.cmml" xref="alg1.l3.m2.2.2.2.2.4">
            subscript
           </csymbol>
           <ci id="alg1.l3.m2.2.2.2.2.4.2.cmml" xref="alg1.l3.m2.2.2.2.2.4.2">
            𝑠
           </ci>
           <cn id="alg1.l3.m2.2.2.2.2.4.3.cmml" type="integer" xref="alg1.l3.m2.2.2.2.2.4.3">
            0
           </cn>
          </apply>
         </apply>
        </interval>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l3.m2.2c">
        (goal,obs_{0})
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l4">
     <span class="ltx_text ltx_font_bold" id="alg1.l4.1">
      while
     </span>
     <math alttext="goal" class="ltx_Math" display="inline" id="alg1.l4.m1.1">
      <semantics id="alg1.l4.m1.1a">
       <mrow id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml">
        <mi id="alg1.l4.m1.1.1.2" xref="alg1.l4.m1.1.1.2.cmml">
         g
        </mi>
        <mo id="alg1.l4.m1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l4.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="alg1.l4.m1.1.1.3" xref="alg1.l4.m1.1.1.3.cmml">
         o
        </mi>
        <mo id="alg1.l4.m1.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l4.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="alg1.l4.m1.1.1.4" xref="alg1.l4.m1.1.1.4.cmml">
         a
        </mi>
        <mo id="alg1.l4.m1.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l4.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="alg1.l4.m1.1.1.5" xref="alg1.l4.m1.1.1.5.cmml">
         l
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b">
        <apply id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1">
         <times id="alg1.l4.m1.1.1.1.cmml" xref="alg1.l4.m1.1.1.1">
         </times>
         <ci id="alg1.l4.m1.1.1.2.cmml" xref="alg1.l4.m1.1.1.2">
          𝑔
         </ci>
         <ci id="alg1.l4.m1.1.1.3.cmml" xref="alg1.l4.m1.1.1.3">
          𝑜
         </ci>
         <ci id="alg1.l4.m1.1.1.4.cmml" xref="alg1.l4.m1.1.1.4">
          𝑎
         </ci>
         <ci id="alg1.l4.m1.1.1.5.cmml" xref="alg1.l4.m1.1.1.5">
          𝑙
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l4.m1.1c">
        goal
       </annotation>
      </semantics>
     </math>
     not reached
     <span class="ltx_text ltx_font_bold" id="alg1.l4.2">
      do
     </span>
    </div>
    <div class="ltx_listingline" id="alg1.l5">
     <math alttext="plans\leftarrow\emptyset" class="ltx_Math" display="inline" id="alg1.l5.m1.1">
      <semantics id="alg1.l5.m1.1a">
       <mrow id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml">
        <mrow id="alg1.l5.m1.1.1.2" xref="alg1.l5.m1.1.1.2.cmml">
         <mi id="alg1.l5.m1.1.1.2.2" xref="alg1.l5.m1.1.1.2.2.cmml">
          p
         </mi>
         <mo id="alg1.l5.m1.1.1.2.1" lspace="0em" rspace="0em" xref="alg1.l5.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l5.m1.1.1.2.3" xref="alg1.l5.m1.1.1.2.3.cmml">
          l
         </mi>
         <mo id="alg1.l5.m1.1.1.2.1a" lspace="0em" rspace="0em" xref="alg1.l5.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l5.m1.1.1.2.4" xref="alg1.l5.m1.1.1.2.4.cmml">
          a
         </mi>
         <mo id="alg1.l5.m1.1.1.2.1b" lspace="0em" rspace="0em" xref="alg1.l5.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l5.m1.1.1.2.5" xref="alg1.l5.m1.1.1.2.5.cmml">
          n
         </mi>
         <mo id="alg1.l5.m1.1.1.2.1c" lspace="0em" rspace="0em" xref="alg1.l5.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l5.m1.1.1.2.6" xref="alg1.l5.m1.1.1.2.6.cmml">
          s
         </mi>
        </mrow>
        <mo id="alg1.l5.m1.1.1.1" stretchy="false" xref="alg1.l5.m1.1.1.1.cmml">
         ←
        </mo>
        <mi id="alg1.l5.m1.1.1.3" mathvariant="normal" xref="alg1.l5.m1.1.1.3.cmml">
         ∅
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b">
        <apply id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1">
         <ci id="alg1.l5.m1.1.1.1.cmml" xref="alg1.l5.m1.1.1.1">
          ←
         </ci>
         <apply id="alg1.l5.m1.1.1.2.cmml" xref="alg1.l5.m1.1.1.2">
          <times id="alg1.l5.m1.1.1.2.1.cmml" xref="alg1.l5.m1.1.1.2.1">
          </times>
          <ci id="alg1.l5.m1.1.1.2.2.cmml" xref="alg1.l5.m1.1.1.2.2">
           𝑝
          </ci>
          <ci id="alg1.l5.m1.1.1.2.3.cmml" xref="alg1.l5.m1.1.1.2.3">
           𝑙
          </ci>
          <ci id="alg1.l5.m1.1.1.2.4.cmml" xref="alg1.l5.m1.1.1.2.4">
           𝑎
          </ci>
          <ci id="alg1.l5.m1.1.1.2.5.cmml" xref="alg1.l5.m1.1.1.2.5">
           𝑛
          </ci>
          <ci id="alg1.l5.m1.1.1.2.6.cmml" xref="alg1.l5.m1.1.1.2.6">
           𝑠
          </ci>
         </apply>
         <emptyset id="alg1.l5.m1.1.1.3.cmml" xref="alg1.l5.m1.1.1.3">
         </emptyset>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l5.m1.1c">
        plans\leftarrow\emptyset
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l6">
     <span class="ltx_text ltx_font_bold" id="alg1.l6.1">
      for
     </span>
     <math alttext="i" class="ltx_Math" display="inline" id="alg1.l6.m1.1">
      <semantics id="alg1.l6.m1.1a">
       <mi id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml">
        i
       </mi>
       <annotation-xml encoding="MathML-Content" id="alg1.l6.m1.1b">
        <ci id="alg1.l6.m1.1.1.cmml" xref="alg1.l6.m1.1.1">
         𝑖
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l6.m1.1c">
        i
       </annotation>
      </semantics>
     </math>
     in
     <math alttext="N" class="ltx_Math" display="inline" id="alg1.l6.m2.1">
      <semantics id="alg1.l6.m2.1a">
       <mi id="alg1.l6.m2.1.1" xref="alg1.l6.m2.1.1.cmml">
        N
       </mi>
       <annotation-xml encoding="MathML-Content" id="alg1.l6.m2.1b">
        <ci id="alg1.l6.m2.1.1.cmml" xref="alg1.l6.m2.1.1">
         𝑁
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l6.m2.1c">
        N
       </annotation>
      </semantics>
     </math>
     <span class="ltx_text ltx_font_bold" id="alg1.l6.2">
      do
     </span>
    </div>
    <div class="ltx_listingline" id="alg1.l7">
     <math alttext="w_{belief}\leftarrow" class="ltx_Math" display="inline" id="alg1.l7.m1.1">
      <semantics id="alg1.l7.m1.1a">
       <mrow id="alg1.l7.m1.1.1" xref="alg1.l7.m1.1.1.cmml">
        <msub id="alg1.l7.m1.1.1.2" xref="alg1.l7.m1.1.1.2.cmml">
         <mi id="alg1.l7.m1.1.1.2.2" xref="alg1.l7.m1.1.1.2.2.cmml">
          w
         </mi>
         <mrow id="alg1.l7.m1.1.1.2.3" xref="alg1.l7.m1.1.1.2.3.cmml">
          <mi id="alg1.l7.m1.1.1.2.3.2" xref="alg1.l7.m1.1.1.2.3.2.cmml">
           b
          </mi>
          <mo id="alg1.l7.m1.1.1.2.3.1" lspace="0em" rspace="0em" xref="alg1.l7.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="alg1.l7.m1.1.1.2.3.3" xref="alg1.l7.m1.1.1.2.3.3.cmml">
           e
          </mi>
          <mo id="alg1.l7.m1.1.1.2.3.1a" lspace="0em" rspace="0em" xref="alg1.l7.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="alg1.l7.m1.1.1.2.3.4" xref="alg1.l7.m1.1.1.2.3.4.cmml">
           l
          </mi>
          <mo id="alg1.l7.m1.1.1.2.3.1b" lspace="0em" rspace="0em" xref="alg1.l7.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="alg1.l7.m1.1.1.2.3.5" xref="alg1.l7.m1.1.1.2.3.5.cmml">
           i
          </mi>
          <mo id="alg1.l7.m1.1.1.2.3.1c" lspace="0em" rspace="0em" xref="alg1.l7.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="alg1.l7.m1.1.1.2.3.6" xref="alg1.l7.m1.1.1.2.3.6.cmml">
           e
          </mi>
          <mo id="alg1.l7.m1.1.1.2.3.1d" lspace="0em" rspace="0em" xref="alg1.l7.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="alg1.l7.m1.1.1.2.3.7" xref="alg1.l7.m1.1.1.2.3.7.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <mo id="alg1.l7.m1.1.1.1" stretchy="false" xref="alg1.l7.m1.1.1.1.cmml">
         ←
        </mo>
        <mi id="alg1.l7.m1.1.1.3" xref="alg1.l7.m1.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l7.m1.1b">
        <apply id="alg1.l7.m1.1.1.cmml" xref="alg1.l7.m1.1.1">
         <ci id="alg1.l7.m1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1">
          ←
         </ci>
         <apply id="alg1.l7.m1.1.1.2.cmml" xref="alg1.l7.m1.1.1.2">
          <csymbol cd="ambiguous" id="alg1.l7.m1.1.1.2.1.cmml" xref="alg1.l7.m1.1.1.2">
           subscript
          </csymbol>
          <ci id="alg1.l7.m1.1.1.2.2.cmml" xref="alg1.l7.m1.1.1.2.2">
           𝑤
          </ci>
          <apply id="alg1.l7.m1.1.1.2.3.cmml" xref="alg1.l7.m1.1.1.2.3">
           <times id="alg1.l7.m1.1.1.2.3.1.cmml" xref="alg1.l7.m1.1.1.2.3.1">
           </times>
           <ci id="alg1.l7.m1.1.1.2.3.2.cmml" xref="alg1.l7.m1.1.1.2.3.2">
            𝑏
           </ci>
           <ci id="alg1.l7.m1.1.1.2.3.3.cmml" xref="alg1.l7.m1.1.1.2.3.3">
            𝑒
           </ci>
           <ci id="alg1.l7.m1.1.1.2.3.4.cmml" xref="alg1.l7.m1.1.1.2.3.4">
            𝑙
           </ci>
           <ci id="alg1.l7.m1.1.1.2.3.5.cmml" xref="alg1.l7.m1.1.1.2.3.5">
            𝑖
           </ci>
           <ci id="alg1.l7.m1.1.1.2.3.6.cmml" xref="alg1.l7.m1.1.1.2.3.6">
            𝑒
           </ci>
           <ci id="alg1.l7.m1.1.1.2.3.7.cmml" xref="alg1.l7.m1.1.1.2.3.7">
            𝑓
           </ci>
          </apply>
         </apply>
         <csymbol cd="latexml" id="alg1.l7.m1.1.1.3.cmml" xref="alg1.l7.m1.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l7.m1.1c">
        w_{belief}\leftarrow
       </annotation>
      </semantics>
     </math>
     LLM
     <math alttext="(\mathcal{B},\mathcal{W})" class="ltx_Math" display="inline" id="alg1.l7.m2.2">
      <semantics id="alg1.l7.m2.2a">
       <mrow id="alg1.l7.m2.2.3.2" xref="alg1.l7.m2.2.3.1.cmml">
        <mo id="alg1.l7.m2.2.3.2.1" stretchy="false" xref="alg1.l7.m2.2.3.1.cmml">
         (
        </mo>
        <mi class="ltx_font_mathcaligraphic" id="alg1.l7.m2.1.1" xref="alg1.l7.m2.1.1.cmml">
         ℬ
        </mi>
        <mo id="alg1.l7.m2.2.3.2.2" xref="alg1.l7.m2.2.3.1.cmml">
         ,
        </mo>
        <mi class="ltx_font_mathcaligraphic" id="alg1.l7.m2.2.2" xref="alg1.l7.m2.2.2.cmml">
         𝒲
        </mi>
        <mo id="alg1.l7.m2.2.3.2.3" stretchy="false" xref="alg1.l7.m2.2.3.1.cmml">
         )
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l7.m2.2b">
        <interval closure="open" id="alg1.l7.m2.2.3.1.cmml" xref="alg1.l7.m2.2.3.2">
         <ci id="alg1.l7.m2.1.1.cmml" xref="alg1.l7.m2.1.1">
          ℬ
         </ci>
         <ci id="alg1.l7.m2.2.2.cmml" xref="alg1.l7.m2.2.2">
          𝒲
         </ci>
        </interval>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l7.m2.2c">
        (\mathcal{B},\mathcal{W})
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l8">
     <math alttext="plans\leftarrow" class="ltx_Math" display="inline" id="alg1.l8.m1.1">
      <semantics id="alg1.l8.m1.1a">
       <mrow id="alg1.l8.m1.1.1" xref="alg1.l8.m1.1.1.cmml">
        <mrow id="alg1.l8.m1.1.1.2" xref="alg1.l8.m1.1.1.2.cmml">
         <mi id="alg1.l8.m1.1.1.2.2" xref="alg1.l8.m1.1.1.2.2.cmml">
          p
         </mi>
         <mo id="alg1.l8.m1.1.1.2.1" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l8.m1.1.1.2.3" xref="alg1.l8.m1.1.1.2.3.cmml">
          l
         </mi>
         <mo id="alg1.l8.m1.1.1.2.1a" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l8.m1.1.1.2.4" xref="alg1.l8.m1.1.1.2.4.cmml">
          a
         </mi>
         <mo id="alg1.l8.m1.1.1.2.1b" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l8.m1.1.1.2.5" xref="alg1.l8.m1.1.1.2.5.cmml">
          n
         </mi>
         <mo id="alg1.l8.m1.1.1.2.1c" lspace="0em" rspace="0em" xref="alg1.l8.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l8.m1.1.1.2.6" xref="alg1.l8.m1.1.1.2.6.cmml">
          s
         </mi>
        </mrow>
        <mo id="alg1.l8.m1.1.1.1" stretchy="false" xref="alg1.l8.m1.1.1.1.cmml">
         ←
        </mo>
        <mi id="alg1.l8.m1.1.1.3" xref="alg1.l8.m1.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l8.m1.1b">
        <apply id="alg1.l8.m1.1.1.cmml" xref="alg1.l8.m1.1.1">
         <ci id="alg1.l8.m1.1.1.1.cmml" xref="alg1.l8.m1.1.1.1">
          ←
         </ci>
         <apply id="alg1.l8.m1.1.1.2.cmml" xref="alg1.l8.m1.1.1.2">
          <times id="alg1.l8.m1.1.1.2.1.cmml" xref="alg1.l8.m1.1.1.2.1">
          </times>
          <ci id="alg1.l8.m1.1.1.2.2.cmml" xref="alg1.l8.m1.1.1.2.2">
           𝑝
          </ci>
          <ci id="alg1.l8.m1.1.1.2.3.cmml" xref="alg1.l8.m1.1.1.2.3">
           𝑙
          </ci>
          <ci id="alg1.l8.m1.1.1.2.4.cmml" xref="alg1.l8.m1.1.1.2.4">
           𝑎
          </ci>
          <ci id="alg1.l8.m1.1.1.2.5.cmml" xref="alg1.l8.m1.1.1.2.5">
           𝑛
          </ci>
          <ci id="alg1.l8.m1.1.1.2.6.cmml" xref="alg1.l8.m1.1.1.2.6">
           𝑠
          </ci>
         </apply>
         <csymbol cd="latexml" id="alg1.l8.m1.1.1.3.cmml" xref="alg1.l8.m1.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l8.m1.1c">
        plans\leftarrow
       </annotation>
      </semantics>
     </math>
     PG
     <math alttext="(w_{belief}\bigcup\mathcal{W})" class="ltx_Math" display="inline" id="alg1.l8.m2.1">
      <semantics id="alg1.l8.m2.1a">
       <mrow id="alg1.l8.m2.1.1.1" xref="alg1.l8.m2.1.1.1.1.cmml">
        <mo id="alg1.l8.m2.1.1.1.2" stretchy="false" xref="alg1.l8.m2.1.1.1.1.cmml">
         (
        </mo>
        <mrow id="alg1.l8.m2.1.1.1.1" xref="alg1.l8.m2.1.1.1.1.cmml">
         <msub id="alg1.l8.m2.1.1.1.1.2" xref="alg1.l8.m2.1.1.1.1.2.cmml">
          <mi id="alg1.l8.m2.1.1.1.1.2.2" xref="alg1.l8.m2.1.1.1.1.2.2.cmml">
           w
          </mi>
          <mrow id="alg1.l8.m2.1.1.1.1.2.3" xref="alg1.l8.m2.1.1.1.1.2.3.cmml">
           <mi id="alg1.l8.m2.1.1.1.1.2.3.2" xref="alg1.l8.m2.1.1.1.1.2.3.2.cmml">
            b
           </mi>
           <mo id="alg1.l8.m2.1.1.1.1.2.3.1" lspace="0em" rspace="0em" xref="alg1.l8.m2.1.1.1.1.2.3.1.cmml">
            ​
           </mo>
           <mi id="alg1.l8.m2.1.1.1.1.2.3.3" xref="alg1.l8.m2.1.1.1.1.2.3.3.cmml">
            e
           </mi>
           <mo id="alg1.l8.m2.1.1.1.1.2.3.1a" lspace="0em" rspace="0em" xref="alg1.l8.m2.1.1.1.1.2.3.1.cmml">
            ​
           </mo>
           <mi id="alg1.l8.m2.1.1.1.1.2.3.4" xref="alg1.l8.m2.1.1.1.1.2.3.4.cmml">
            l
           </mi>
           <mo id="alg1.l8.m2.1.1.1.1.2.3.1b" lspace="0em" rspace="0em" xref="alg1.l8.m2.1.1.1.1.2.3.1.cmml">
            ​
           </mo>
           <mi id="alg1.l8.m2.1.1.1.1.2.3.5" xref="alg1.l8.m2.1.1.1.1.2.3.5.cmml">
            i
           </mi>
           <mo id="alg1.l8.m2.1.1.1.1.2.3.1c" lspace="0em" rspace="0em" xref="alg1.l8.m2.1.1.1.1.2.3.1.cmml">
            ​
           </mo>
           <mi id="alg1.l8.m2.1.1.1.1.2.3.6" xref="alg1.l8.m2.1.1.1.1.2.3.6.cmml">
            e
           </mi>
           <mo id="alg1.l8.m2.1.1.1.1.2.3.1d" lspace="0em" rspace="0em" xref="alg1.l8.m2.1.1.1.1.2.3.1.cmml">
            ​
           </mo>
           <mi id="alg1.l8.m2.1.1.1.1.2.3.7" xref="alg1.l8.m2.1.1.1.1.2.3.7.cmml">
            f
           </mi>
          </mrow>
         </msub>
         <mo id="alg1.l8.m2.1.1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l8.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mrow id="alg1.l8.m2.1.1.1.1.3" xref="alg1.l8.m2.1.1.1.1.3.cmml">
          <mo id="alg1.l8.m2.1.1.1.1.3.1" xref="alg1.l8.m2.1.1.1.1.3.1.cmml">
           ⋃
          </mo>
          <mi class="ltx_font_mathcaligraphic" id="alg1.l8.m2.1.1.1.1.3.2" xref="alg1.l8.m2.1.1.1.1.3.2.cmml">
           𝒲
          </mi>
         </mrow>
        </mrow>
        <mo id="alg1.l8.m2.1.1.1.3" stretchy="false" xref="alg1.l8.m2.1.1.1.1.cmml">
         )
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l8.m2.1b">
        <apply id="alg1.l8.m2.1.1.1.1.cmml" xref="alg1.l8.m2.1.1.1">
         <times id="alg1.l8.m2.1.1.1.1.1.cmml" xref="alg1.l8.m2.1.1.1.1.1">
         </times>
         <apply id="alg1.l8.m2.1.1.1.1.2.cmml" xref="alg1.l8.m2.1.1.1.1.2">
          <csymbol cd="ambiguous" id="alg1.l8.m2.1.1.1.1.2.1.cmml" xref="alg1.l8.m2.1.1.1.1.2">
           subscript
          </csymbol>
          <ci id="alg1.l8.m2.1.1.1.1.2.2.cmml" xref="alg1.l8.m2.1.1.1.1.2.2">
           𝑤
          </ci>
          <apply id="alg1.l8.m2.1.1.1.1.2.3.cmml" xref="alg1.l8.m2.1.1.1.1.2.3">
           <times id="alg1.l8.m2.1.1.1.1.2.3.1.cmml" xref="alg1.l8.m2.1.1.1.1.2.3.1">
           </times>
           <ci id="alg1.l8.m2.1.1.1.1.2.3.2.cmml" xref="alg1.l8.m2.1.1.1.1.2.3.2">
            𝑏
           </ci>
           <ci id="alg1.l8.m2.1.1.1.1.2.3.3.cmml" xref="alg1.l8.m2.1.1.1.1.2.3.3">
            𝑒
           </ci>
           <ci id="alg1.l8.m2.1.1.1.1.2.3.4.cmml" xref="alg1.l8.m2.1.1.1.1.2.3.4">
            𝑙
           </ci>
           <ci id="alg1.l8.m2.1.1.1.1.2.3.5.cmml" xref="alg1.l8.m2.1.1.1.1.2.3.5">
            𝑖
           </ci>
           <ci id="alg1.l8.m2.1.1.1.1.2.3.6.cmml" xref="alg1.l8.m2.1.1.1.1.2.3.6">
            𝑒
           </ci>
           <ci id="alg1.l8.m2.1.1.1.1.2.3.7.cmml" xref="alg1.l8.m2.1.1.1.1.2.3.7">
            𝑓
           </ci>
          </apply>
         </apply>
         <apply id="alg1.l8.m2.1.1.1.1.3.cmml" xref="alg1.l8.m2.1.1.1.1.3">
          <union id="alg1.l8.m2.1.1.1.1.3.1.cmml" xref="alg1.l8.m2.1.1.1.1.3.1">
          </union>
          <ci id="alg1.l8.m2.1.1.1.1.3.2.cmml" xref="alg1.l8.m2.1.1.1.1.3.2">
           𝒲
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l8.m2.1c">
        (w_{belief}\bigcup\mathcal{W})
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l9">
     <span class="ltx_text ltx_font_bold" id="alg1.l9.1">
      end
     </span>
     <span class="ltx_text ltx_font_bold" id="alg1.l9.2">
      for
     </span>
    </div>
    <div class="ltx_listingline" id="alg1.l10">
     <math alttext="action\leftarrow" class="ltx_Math" display="inline" id="alg1.l10.m1.1">
      <semantics id="alg1.l10.m1.1a">
       <mrow id="alg1.l10.m1.1.1" xref="alg1.l10.m1.1.1.cmml">
        <mrow id="alg1.l10.m1.1.1.2" xref="alg1.l10.m1.1.1.2.cmml">
         <mi id="alg1.l10.m1.1.1.2.2" xref="alg1.l10.m1.1.1.2.2.cmml">
          a
         </mi>
         <mo id="alg1.l10.m1.1.1.2.1" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m1.1.1.2.3" xref="alg1.l10.m1.1.1.2.3.cmml">
          c
         </mi>
         <mo id="alg1.l10.m1.1.1.2.1a" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m1.1.1.2.4" xref="alg1.l10.m1.1.1.2.4.cmml">
          t
         </mi>
         <mo id="alg1.l10.m1.1.1.2.1b" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m1.1.1.2.5" xref="alg1.l10.m1.1.1.2.5.cmml">
          i
         </mi>
         <mo id="alg1.l10.m1.1.1.2.1c" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m1.1.1.2.6" xref="alg1.l10.m1.1.1.2.6.cmml">
          o
         </mi>
         <mo id="alg1.l10.m1.1.1.2.1d" lspace="0em" rspace="0em" xref="alg1.l10.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m1.1.1.2.7" xref="alg1.l10.m1.1.1.2.7.cmml">
          n
         </mi>
        </mrow>
        <mo id="alg1.l10.m1.1.1.1" stretchy="false" xref="alg1.l10.m1.1.1.1.cmml">
         ←
        </mo>
        <mi id="alg1.l10.m1.1.1.3" xref="alg1.l10.m1.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l10.m1.1b">
        <apply id="alg1.l10.m1.1.1.cmml" xref="alg1.l10.m1.1.1">
         <ci id="alg1.l10.m1.1.1.1.cmml" xref="alg1.l10.m1.1.1.1">
          ←
         </ci>
         <apply id="alg1.l10.m1.1.1.2.cmml" xref="alg1.l10.m1.1.1.2">
          <times id="alg1.l10.m1.1.1.2.1.cmml" xref="alg1.l10.m1.1.1.2.1">
          </times>
          <ci id="alg1.l10.m1.1.1.2.2.cmml" xref="alg1.l10.m1.1.1.2.2">
           𝑎
          </ci>
          <ci id="alg1.l10.m1.1.1.2.3.cmml" xref="alg1.l10.m1.1.1.2.3">
           𝑐
          </ci>
          <ci id="alg1.l10.m1.1.1.2.4.cmml" xref="alg1.l10.m1.1.1.2.4">
           𝑡
          </ci>
          <ci id="alg1.l10.m1.1.1.2.5.cmml" xref="alg1.l10.m1.1.1.2.5">
           𝑖
          </ci>
          <ci id="alg1.l10.m1.1.1.2.6.cmml" xref="alg1.l10.m1.1.1.2.6">
           𝑜
          </ci>
          <ci id="alg1.l10.m1.1.1.2.7.cmml" xref="alg1.l10.m1.1.1.2.7">
           𝑛
          </ci>
         </apply>
         <csymbol cd="latexml" id="alg1.l10.m1.1.1.3.cmml" xref="alg1.l10.m1.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l10.m1.1c">
        action\leftarrow
       </annotation>
      </semantics>
     </math>
     AS
     <math alttext="(plans)" class="ltx_Math" display="inline" id="alg1.l10.m2.1">
      <semantics id="alg1.l10.m2.1a">
       <mrow id="alg1.l10.m2.1.1.1" xref="alg1.l10.m2.1.1.1.1.cmml">
        <mo id="alg1.l10.m2.1.1.1.2" stretchy="false" xref="alg1.l10.m2.1.1.1.1.cmml">
         (
        </mo>
        <mrow id="alg1.l10.m2.1.1.1.1" xref="alg1.l10.m2.1.1.1.1.cmml">
         <mi id="alg1.l10.m2.1.1.1.1.2" xref="alg1.l10.m2.1.1.1.1.2.cmml">
          p
         </mi>
         <mo id="alg1.l10.m2.1.1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l10.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m2.1.1.1.1.3" xref="alg1.l10.m2.1.1.1.1.3.cmml">
          l
         </mi>
         <mo id="alg1.l10.m2.1.1.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l10.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m2.1.1.1.1.4" xref="alg1.l10.m2.1.1.1.1.4.cmml">
          a
         </mi>
         <mo id="alg1.l10.m2.1.1.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l10.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m2.1.1.1.1.5" xref="alg1.l10.m2.1.1.1.1.5.cmml">
          n
         </mi>
         <mo id="alg1.l10.m2.1.1.1.1.1c" lspace="0em" rspace="0em" xref="alg1.l10.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l10.m2.1.1.1.1.6" xref="alg1.l10.m2.1.1.1.1.6.cmml">
          s
         </mi>
        </mrow>
        <mo id="alg1.l10.m2.1.1.1.3" stretchy="false" xref="alg1.l10.m2.1.1.1.1.cmml">
         )
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l10.m2.1b">
        <apply id="alg1.l10.m2.1.1.1.1.cmml" xref="alg1.l10.m2.1.1.1">
         <times id="alg1.l10.m2.1.1.1.1.1.cmml" xref="alg1.l10.m2.1.1.1.1.1">
         </times>
         <ci id="alg1.l10.m2.1.1.1.1.2.cmml" xref="alg1.l10.m2.1.1.1.1.2">
          𝑝
         </ci>
         <ci id="alg1.l10.m2.1.1.1.1.3.cmml" xref="alg1.l10.m2.1.1.1.1.3">
          𝑙
         </ci>
         <ci id="alg1.l10.m2.1.1.1.1.4.cmml" xref="alg1.l10.m2.1.1.1.1.4">
          𝑎
         </ci>
         <ci id="alg1.l10.m2.1.1.1.1.5.cmml" xref="alg1.l10.m2.1.1.1.1.5">
          𝑛
         </ci>
         <ci id="alg1.l10.m2.1.1.1.1.6.cmml" xref="alg1.l10.m2.1.1.1.1.6">
          𝑠
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l10.m2.1c">
        (plans)
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l11">
     <math alttext="obs\leftarrow" class="ltx_Math" display="inline" id="alg1.l11.m1.1">
      <semantics id="alg1.l11.m1.1a">
       <mrow id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml">
        <mrow id="alg1.l11.m1.1.1.2" xref="alg1.l11.m1.1.1.2.cmml">
         <mi id="alg1.l11.m1.1.1.2.2" xref="alg1.l11.m1.1.1.2.2.cmml">
          o
         </mi>
         <mo id="alg1.l11.m1.1.1.2.1" lspace="0em" rspace="0em" xref="alg1.l11.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l11.m1.1.1.2.3" xref="alg1.l11.m1.1.1.2.3.cmml">
          b
         </mi>
         <mo id="alg1.l11.m1.1.1.2.1a" lspace="0em" rspace="0em" xref="alg1.l11.m1.1.1.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l11.m1.1.1.2.4" xref="alg1.l11.m1.1.1.2.4.cmml">
          s
         </mi>
        </mrow>
        <mo id="alg1.l11.m1.1.1.1" stretchy="false" xref="alg1.l11.m1.1.1.1.cmml">
         ←
        </mo>
        <mi id="alg1.l11.m1.1.1.3" xref="alg1.l11.m1.1.1.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l11.m1.1b">
        <apply id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1">
         <ci id="alg1.l11.m1.1.1.1.cmml" xref="alg1.l11.m1.1.1.1">
          ←
         </ci>
         <apply id="alg1.l11.m1.1.1.2.cmml" xref="alg1.l11.m1.1.1.2">
          <times id="alg1.l11.m1.1.1.2.1.cmml" xref="alg1.l11.m1.1.1.2.1">
          </times>
          <ci id="alg1.l11.m1.1.1.2.2.cmml" xref="alg1.l11.m1.1.1.2.2">
           𝑜
          </ci>
          <ci id="alg1.l11.m1.1.1.2.3.cmml" xref="alg1.l11.m1.1.1.2.3">
           𝑏
          </ci>
          <ci id="alg1.l11.m1.1.1.2.4.cmml" xref="alg1.l11.m1.1.1.2.4">
           𝑠
          </ci>
         </apply>
         <csymbol cd="latexml" id="alg1.l11.m1.1.1.3.cmml" xref="alg1.l11.m1.1.1.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l11.m1.1c">
        obs\leftarrow
       </annotation>
      </semantics>
     </math>
     Env
     <math alttext="(action)" class="ltx_Math" display="inline" id="alg1.l11.m2.1">
      <semantics id="alg1.l11.m2.1a">
       <mrow id="alg1.l11.m2.1.1.1" xref="alg1.l11.m2.1.1.1.1.cmml">
        <mo id="alg1.l11.m2.1.1.1.2" stretchy="false" xref="alg1.l11.m2.1.1.1.1.cmml">
         (
        </mo>
        <mrow id="alg1.l11.m2.1.1.1.1" xref="alg1.l11.m2.1.1.1.1.cmml">
         <mi id="alg1.l11.m2.1.1.1.1.2" xref="alg1.l11.m2.1.1.1.1.2.cmml">
          a
         </mi>
         <mo id="alg1.l11.m2.1.1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l11.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l11.m2.1.1.1.1.3" xref="alg1.l11.m2.1.1.1.1.3.cmml">
          c
         </mi>
         <mo id="alg1.l11.m2.1.1.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l11.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l11.m2.1.1.1.1.4" xref="alg1.l11.m2.1.1.1.1.4.cmml">
          t
         </mi>
         <mo id="alg1.l11.m2.1.1.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l11.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l11.m2.1.1.1.1.5" xref="alg1.l11.m2.1.1.1.1.5.cmml">
          i
         </mi>
         <mo id="alg1.l11.m2.1.1.1.1.1c" lspace="0em" rspace="0em" xref="alg1.l11.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l11.m2.1.1.1.1.6" xref="alg1.l11.m2.1.1.1.1.6.cmml">
          o
         </mi>
         <mo id="alg1.l11.m2.1.1.1.1.1d" lspace="0em" rspace="0em" xref="alg1.l11.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l11.m2.1.1.1.1.7" xref="alg1.l11.m2.1.1.1.1.7.cmml">
          n
         </mi>
        </mrow>
        <mo id="alg1.l11.m2.1.1.1.3" stretchy="false" xref="alg1.l11.m2.1.1.1.1.cmml">
         )
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l11.m2.1b">
        <apply id="alg1.l11.m2.1.1.1.1.cmml" xref="alg1.l11.m2.1.1.1">
         <times id="alg1.l11.m2.1.1.1.1.1.cmml" xref="alg1.l11.m2.1.1.1.1.1">
         </times>
         <ci id="alg1.l11.m2.1.1.1.1.2.cmml" xref="alg1.l11.m2.1.1.1.1.2">
          𝑎
         </ci>
         <ci id="alg1.l11.m2.1.1.1.1.3.cmml" xref="alg1.l11.m2.1.1.1.1.3">
          𝑐
         </ci>
         <ci id="alg1.l11.m2.1.1.1.1.4.cmml" xref="alg1.l11.m2.1.1.1.1.4">
          𝑡
         </ci>
         <ci id="alg1.l11.m2.1.1.1.1.5.cmml" xref="alg1.l11.m2.1.1.1.1.5">
          𝑖
         </ci>
         <ci id="alg1.l11.m2.1.1.1.1.6.cmml" xref="alg1.l11.m2.1.1.1.1.6">
          𝑜
         </ci>
         <ci id="alg1.l11.m2.1.1.1.1.7.cmml" xref="alg1.l11.m2.1.1.1.1.7">
          𝑛
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l11.m2.1c">
        (action)
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l12">
     <math alttext="\mathcal{W},\mathcal{B}\leftarrow" class="ltx_Math" display="inline" id="alg1.l12.m1.2">
      <semantics id="alg1.l12.m1.2a">
       <mrow id="alg1.l12.m1.2.3" xref="alg1.l12.m1.2.3.cmml">
        <mrow id="alg1.l12.m1.2.3.2.2" xref="alg1.l12.m1.2.3.2.1.cmml">
         <mi class="ltx_font_mathcaligraphic" id="alg1.l12.m1.1.1" xref="alg1.l12.m1.1.1.cmml">
          𝒲
         </mi>
         <mo id="alg1.l12.m1.2.3.2.2.1" xref="alg1.l12.m1.2.3.2.1.cmml">
          ,
         </mo>
         <mi class="ltx_font_mathcaligraphic" id="alg1.l12.m1.2.2" xref="alg1.l12.m1.2.2.cmml">
          ℬ
         </mi>
        </mrow>
        <mo id="alg1.l12.m1.2.3.1" stretchy="false" xref="alg1.l12.m1.2.3.1.cmml">
         ←
        </mo>
        <mi id="alg1.l12.m1.2.3.3" xref="alg1.l12.m1.2.3.3.cmml">
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l12.m1.2b">
        <apply id="alg1.l12.m1.2.3.cmml" xref="alg1.l12.m1.2.3">
         <ci id="alg1.l12.m1.2.3.1.cmml" xref="alg1.l12.m1.2.3.1">
          ←
         </ci>
         <list id="alg1.l12.m1.2.3.2.1.cmml" xref="alg1.l12.m1.2.3.2.2">
          <ci id="alg1.l12.m1.1.1.cmml" xref="alg1.l12.m1.1.1">
           𝒲
          </ci>
          <ci id="alg1.l12.m1.2.2.cmml" xref="alg1.l12.m1.2.2">
           ℬ
          </ci>
         </list>
         <csymbol cd="latexml" id="alg1.l12.m1.2.3.3.cmml" xref="alg1.l12.m1.2.3.3">
          absent
         </csymbol>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l12.m1.2c">
        \mathcal{W},\mathcal{B}\leftarrow
       </annotation>
      </semantics>
     </math>
     observe
     <math alttext="(action,obs)" class="ltx_Math" display="inline" id="alg1.l12.m2.2">
      <semantics id="alg1.l12.m2.2a">
       <mrow id="alg1.l12.m2.2.2.2" xref="alg1.l12.m2.2.2.3.cmml">
        <mo id="alg1.l12.m2.2.2.2.3" stretchy="false" xref="alg1.l12.m2.2.2.3.cmml">
         (
        </mo>
        <mrow id="alg1.l12.m2.1.1.1.1" xref="alg1.l12.m2.1.1.1.1.cmml">
         <mi id="alg1.l12.m2.1.1.1.1.2" xref="alg1.l12.m2.1.1.1.1.2.cmml">
          a
         </mi>
         <mo id="alg1.l12.m2.1.1.1.1.1" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l12.m2.1.1.1.1.3" xref="alg1.l12.m2.1.1.1.1.3.cmml">
          c
         </mi>
         <mo id="alg1.l12.m2.1.1.1.1.1a" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l12.m2.1.1.1.1.4" xref="alg1.l12.m2.1.1.1.1.4.cmml">
          t
         </mi>
         <mo id="alg1.l12.m2.1.1.1.1.1b" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l12.m2.1.1.1.1.5" xref="alg1.l12.m2.1.1.1.1.5.cmml">
          i
         </mi>
         <mo id="alg1.l12.m2.1.1.1.1.1c" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l12.m2.1.1.1.1.6" xref="alg1.l12.m2.1.1.1.1.6.cmml">
          o
         </mi>
         <mo id="alg1.l12.m2.1.1.1.1.1d" lspace="0em" rspace="0em" xref="alg1.l12.m2.1.1.1.1.1.cmml">
          ​
         </mo>
         <mi id="alg1.l12.m2.1.1.1.1.7" xref="alg1.l12.m2.1.1.1.1.7.cmml">
          n
         </mi>
        </mrow>
        <mo id="alg1.l12.m2.2.2.2.4" xref="alg1.l12.m2.2.2.3.cmml">
         ,
        </mo>
        <mrow id="alg1.l12.m2.2.2.2.2" xref="alg1.l12.m2.2.2.2.2.cmml">
         <mi id="alg1.l12.m2.2.2.2.2.2" xref="alg1.l12.m2.2.2.2.2.2.cmml">
          o
         </mi>
         <mo id="alg1.l12.m2.2.2.2.2.1" lspace="0em" rspace="0em" xref="alg1.l12.m2.2.2.2.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l12.m2.2.2.2.2.3" xref="alg1.l12.m2.2.2.2.2.3.cmml">
          b
         </mi>
         <mo id="alg1.l12.m2.2.2.2.2.1a" lspace="0em" rspace="0em" xref="alg1.l12.m2.2.2.2.2.1.cmml">
          ​
         </mo>
         <mi id="alg1.l12.m2.2.2.2.2.4" xref="alg1.l12.m2.2.2.2.2.4.cmml">
          s
         </mi>
        </mrow>
        <mo id="alg1.l12.m2.2.2.2.5" stretchy="false" xref="alg1.l12.m2.2.2.3.cmml">
         )
        </mo>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="alg1.l12.m2.2b">
        <interval closure="open" id="alg1.l12.m2.2.2.3.cmml" xref="alg1.l12.m2.2.2.2">
         <apply id="alg1.l12.m2.1.1.1.1.cmml" xref="alg1.l12.m2.1.1.1.1">
          <times id="alg1.l12.m2.1.1.1.1.1.cmml" xref="alg1.l12.m2.1.1.1.1.1">
          </times>
          <ci id="alg1.l12.m2.1.1.1.1.2.cmml" xref="alg1.l12.m2.1.1.1.1.2">
           𝑎
          </ci>
          <ci id="alg1.l12.m2.1.1.1.1.3.cmml" xref="alg1.l12.m2.1.1.1.1.3">
           𝑐
          </ci>
          <ci id="alg1.l12.m2.1.1.1.1.4.cmml" xref="alg1.l12.m2.1.1.1.1.4">
           𝑡
          </ci>
          <ci id="alg1.l12.m2.1.1.1.1.5.cmml" xref="alg1.l12.m2.1.1.1.1.5">
           𝑖
          </ci>
          <ci id="alg1.l12.m2.1.1.1.1.6.cmml" xref="alg1.l12.m2.1.1.1.1.6">
           𝑜
          </ci>
          <ci id="alg1.l12.m2.1.1.1.1.7.cmml" xref="alg1.l12.m2.1.1.1.1.7">
           𝑛
          </ci>
         </apply>
         <apply id="alg1.l12.m2.2.2.2.2.cmml" xref="alg1.l12.m2.2.2.2.2">
          <times id="alg1.l12.m2.2.2.2.2.1.cmml" xref="alg1.l12.m2.2.2.2.2.1">
          </times>
          <ci id="alg1.l12.m2.2.2.2.2.2.cmml" xref="alg1.l12.m2.2.2.2.2.2">
           𝑜
          </ci>
          <ci id="alg1.l12.m2.2.2.2.2.3.cmml" xref="alg1.l12.m2.2.2.2.2.3">
           𝑏
          </ci>
          <ci id="alg1.l12.m2.2.2.2.2.4.cmml" xref="alg1.l12.m2.2.2.2.2.4">
           𝑠
          </ci>
         </apply>
        </interval>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="alg1.l12.m2.2c">
        (action,obs)
       </annotation>
      </semantics>
     </math>
    </div>
    <div class="ltx_listingline" id="alg1.l13">
     <span class="ltx_text ltx_font_bold" id="alg1.l13.1">
      end
     </span>
     <span class="ltx_text ltx_font_bold" id="alg1.l13.2">
      while
     </span>
    </div>
   </div>
  </figure>
  <figure class="ltx_table" id="S4.T1">
   <div class="ltx_flex_figure ltx_flex_table">
    <div class="ltx_flex_cell ltx_flex_size_1">
     <figure class="ltx_table ltx_figure_panel ltx_align_center" id="S4.T1.st1">
      <table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T1.st1.2">
       <thead class="ltx_thead">
        <tr class="ltx_tr" id="S4.T1.st1.2.3.1">
         <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt" colspan="8" id="S4.T1.st1.2.3.1.1">
          Average Accuracy (%)
         </th>
         <th class="ltx_td ltx_th ltx_th_column ltx_border_tt" id="S4.T1.st1.2.3.1.2">
         </th>
        </tr>
        <tr class="ltx_tr" id="S4.T1.st1.2.2">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row" id="S4.T1.st1.2.2.3">
          Model
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st1.2.2.4">
          clean
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st1.2.2.5">
          cool
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st1.2.2.6">
          examine
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st1.2.2.7">
          heat
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st1.2.2.8">
          put
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_r" id="S4.T1.st1.2.2.9">
          puttwo
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_r" id="S4.T1.st1.1.1.1">
          overall (
          <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T1.st1.1.1.1.m1.1">
           <semantics id="S4.T1.st1.1.1.1.m1.1a">
            <mo id="S4.T1.st1.1.1.1.m1.1.1" stretchy="false" xref="S4.T1.st1.1.1.1.m1.1.1.cmml">
             ↑
            </mo>
            <annotation-xml encoding="MathML-Content" id="S4.T1.st1.1.1.1.m1.1b">
             <ci id="S4.T1.st1.1.1.1.m1.1.1.cmml" xref="S4.T1.st1.1.1.1.m1.1.1">
              ↑
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="S4.T1.st1.1.1.1.m1.1c">
             \uparrow
            </annotation>
           </semantics>
          </math>
          )
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st1.2.2.2">
          LLM Tokens (
          <math alttext="\downarrow" class="ltx_Math" display="inline" id="S4.T1.st1.2.2.2.m1.1">
           <semantics id="S4.T1.st1.2.2.2.m1.1a">
            <mo id="S4.T1.st1.2.2.2.m1.1.1" stretchy="false" xref="S4.T1.st1.2.2.2.m1.1.1.cmml">
             ↓
            </mo>
            <annotation-xml encoding="MathML-Content" id="S4.T1.st1.2.2.2.m1.1b">
             <ci id="S4.T1.st1.2.2.2.m1.1.1.cmml" xref="S4.T1.st1.2.2.2.m1.1.1">
              ↓
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="S4.T1.st1.2.2.2.m1.1c">
             \downarrow
            </annotation>
           </semantics>
          </math>
          )
         </th>
        </tr>
       </thead>
       <tbody class="ltx_tbody">
        <tr class="ltx_tr" id="S4.T1.st1.2.4.1">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.st1.2.4.1.1">
          <span class="ltx_text ltx_font_typewriter" id="S4.T1.st1.2.4.1.1.1">
           LLM-DP
          </span>
         </th>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st1.2.4.1.2">
          0.94
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st1.2.4.1.3">
          1.00
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st1.2.4.1.4">
          1.00
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st1.2.4.1.5">
          0.87
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st1.2.4.1.6">
          1.00
         </td>
         <td class="ltx_td ltx_align_right ltx_border_r ltx_border_t" id="S4.T1.st1.2.4.1.7">
          0.94
         </td>
         <td class="ltx_td ltx_align_right ltx_border_r ltx_border_t" id="S4.T1.st1.2.4.1.8">
          0.96
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st1.2.4.1.9">
          633k
         </td>
        </tr>
        <tr class="ltx_tr" id="S4.T1.st1.2.5.2">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.st1.2.5.2.1">
          <span class="ltx_text ltx_font_typewriter" id="S4.T1.st1.2.5.2.1.1">
           LLM-DP-random
          </span>
         </th>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.5.2.2">
          0.94
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.5.2.3">
          1.00
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.5.2.4">
          1.00
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.5.2.5">
          0.87
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.5.2.6">
          0.96
         </td>
         <td class="ltx_td ltx_align_right ltx_border_r" id="S4.T1.st1.2.5.2.7">
          1.00
         </td>
         <td class="ltx_td ltx_align_right ltx_border_r" id="S4.T1.st1.2.5.2.8">
          0.96
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.5.2.9">
          67k
         </td>
        </tr>
        <tr class="ltx_tr" id="S4.T1.st1.2.6.3">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.st1.2.6.3.1">
          <span class="ltx_text ltx_font_typewriter" id="S4.T1.st1.2.6.3.1.1">
           ReAct
          </span>
          <cite class="ltx_cite ltx_citemacro_citep">
           (Yao et al.,
           <a class="ltx_ref" href="#bib.bib29" title="">
            2023
           </a>
           )
          </cite>
         </th>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.6.3.2">
          0.61
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.6.3.3">
          0.81
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.6.3.4">
          0.89
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.6.3.5">
          0.30
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.6.3.6">
          0.79
         </td>
         <td class="ltx_td ltx_align_right ltx_border_r" id="S4.T1.st1.2.6.3.7">
          0.47
         </td>
         <td class="ltx_td ltx_align_right ltx_border_r" id="S4.T1.st1.2.6.3.8">
          0.64
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st1.2.6.3.9">
          —*
         </td>
        </tr>
        <tr class="ltx_tr" id="S4.T1.st1.2.7.4">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b" id="S4.T1.st1.2.7.4.1">
          <span class="ltx_text ltx_font_typewriter" id="S4.T1.st1.2.7.4.1.1">
           ReAct
          </span>
          (ours)
         </th>
         <td class="ltx_td ltx_align_right ltx_border_b" id="S4.T1.st1.2.7.4.2">
          0.35
         </td>
         <td class="ltx_td ltx_align_right ltx_border_b" id="S4.T1.st1.2.7.4.3">
          0.90
         </td>
         <td class="ltx_td ltx_align_right ltx_border_b" id="S4.T1.st1.2.7.4.4">
          0.33
         </td>
         <td class="ltx_td ltx_align_right ltx_border_b" id="S4.T1.st1.2.7.4.5">
          0.65
         </td>
         <td class="ltx_td ltx_align_right ltx_border_b" id="S4.T1.st1.2.7.4.6">
          0.71
         </td>
         <td class="ltx_td ltx_align_right ltx_border_b ltx_border_r" id="S4.T1.st1.2.7.4.7">
          0.29
         </td>
         <td class="ltx_td ltx_align_right ltx_border_b ltx_border_r" id="S4.T1.st1.2.7.4.8">
          0.54
         </td>
         <td class="ltx_td ltx_align_right ltx_border_b" id="S4.T1.st1.2.7.4.9">
          9.16M
         </td>
        </tr>
       </tbody>
      </table>
      <figcaption class="ltx_caption ltx_centering">
       <span class="ltx_tag ltx_tag_table">
        (a)
       </span>
       The average accuracy and number of LLM Tokens processed (context + generation) for each model. *Not reported.
      </figcaption>
     </figure>
    </div>
    <div class="ltx_flex_break">
    </div>
    <div class="ltx_flex_cell ltx_flex_size_1">
     <figure class="ltx_table ltx_figure_panel ltx_align_center" id="S4.T1.st2">
      <table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S4.T1.st2.1">
       <thead class="ltx_thead">
        <tr class="ltx_tr" id="S4.T1.st2.1.2.1">
         <th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row" colspan="8" id="S4.T1.st2.1.2.1.1">
          Average Episode Length
         </th>
        </tr>
        <tr class="ltx_tr" id="S4.T1.st2.1.1">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row" id="S4.T1.st2.1.1.2">
          Model
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st2.1.1.3">
          clean
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st2.1.1.4">
          cool
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st2.1.1.5">
          examine
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st2.1.1.6">
          heat
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st2.1.1.7">
          put
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column ltx_border_r" id="S4.T1.st2.1.1.8">
          puttwo
         </th>
         <th class="ltx_td ltx_align_right ltx_th ltx_th_column" id="S4.T1.st2.1.1.1">
          overall (
          <math alttext="\downarrow" class="ltx_Math" display="inline" id="S4.T1.st2.1.1.1.m1.1">
           <semantics id="S4.T1.st2.1.1.1.m1.1a">
            <mo id="S4.T1.st2.1.1.1.m1.1.1" stretchy="false" xref="S4.T1.st2.1.1.1.m1.1.1.cmml">
             ↓
            </mo>
            <annotation-xml encoding="MathML-Content" id="S4.T1.st2.1.1.1.m1.1b">
             <ci id="S4.T1.st2.1.1.1.m1.1.1.cmml" xref="S4.T1.st2.1.1.1.m1.1.1">
              ↓
             </ci>
            </annotation-xml>
            <annotation encoding="application/x-tex" id="S4.T1.st2.1.1.1.m1.1c">
             \downarrow
            </annotation>
           </semantics>
          </math>
          )
         </th>
        </tr>
       </thead>
       <tbody class="ltx_tbody">
        <tr class="ltx_tr" id="S4.T1.st2.1.3.1">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T1.st2.1.3.1.1">
          <span class="ltx_text ltx_font_typewriter" id="S4.T1.st2.1.3.1.1.1">
           LLM-DP
          </span>
         </th>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st2.1.3.1.2">
          12.00
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st2.1.3.1.3">
          13.67
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st2.1.3.1.4">
          12.06
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st2.1.3.1.5">
          12.30
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st2.1.3.1.6">
          12.75
         </td>
         <td class="ltx_td ltx_align_right ltx_border_r ltx_border_t" id="S4.T1.st2.1.3.1.7">
          17.59
         </td>
         <td class="ltx_td ltx_align_right ltx_border_t" id="S4.T1.st2.1.3.1.8">
          13.16
         </td>
        </tr>
        <tr class="ltx_tr" id="S4.T1.st2.1.4.2">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T1.st2.1.4.2.1">
          <span class="ltx_text ltx_font_typewriter" id="S4.T1.st2.1.4.2.1.1">
           LLM-DP-random
          </span>
         </th>
         <td class="ltx_td ltx_align_right" id="S4.T1.st2.1.4.2.2">
          15.06
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st2.1.4.2.3">
          17.14
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st2.1.4.2.4">
          10.56
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st2.1.4.2.5">
          14.04
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st2.1.4.2.6">
          14.62
         </td>
         <td class="ltx_td ltx_align_right ltx_border_r" id="S4.T1.st2.1.4.2.7">
          18.94
         </td>
         <td class="ltx_td ltx_align_right" id="S4.T1.st2.1.4.2.8">
          15.02
         </td>
        </tr>
        <tr class="ltx_tr" id="S4.T1.st2.1.5.3">
         <th class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T1.st2.1.5.3.1">
          <span class="ltx_text ltx_font_typewriter" id="S4.T1.st2.1.5.3.1.1">
           ReAct
          </span>
          (ours)
         </th>
         <td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.st2.1.5.3.2">
          25.10
         </td>
         <td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.st2.1.5.3.3">
          9.86
         </td>
         <td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.st2.1.5.3.4">
          21.67
         </td>
         <td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.st2.1.5.3.5">
          14.70
         </td>
         <td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.st2.1.5.3.6">
          15.33
         </td>
         <td class="ltx_td ltx_align_right ltx_border_bb ltx_border_r" id="S4.T1.st2.1.5.3.7">
          24.94
         </td>
         <td class="ltx_td ltx_align_right ltx_border_bb" id="S4.T1.st2.1.5.3.8">
          18.69
         </td>
        </tr>
       </tbody>
      </table>
      <figcaption class="ltx_caption ltx_centering">
       <span class="ltx_tag ltx_tag_table">
        (b)
       </span>
       The average episode length for each model, where the length of an episode denotes how many actions the agent has taken or attempted to take to complete a task. We do not count the ‘thinking’ action of
       <span class="ltx_text ltx_font_typewriter" id="S4.T1.st2.3.1">
        ReAct
       </span>
       as an action in this metric.
      </figcaption>
     </figure>
    </div>
   </div>
   <figcaption class="ltx_caption ltx_centering">
    <span class="ltx_tag ltx_tag_table">
     Table 1:
    </span>
    Summary of model performance on the Alfword test set.
    <span class="ltx_text ltx_font_typewriter" id="S4.T1.9.1">
     LLM-DP
    </span>
    and
    <span class="ltx_text ltx_font_typewriter" id="S4.T1.10.2">
     LLM-DP-random
    </span>
    differ in the sampling strategy of the belief.
    <span class="ltx_text ltx_font_typewriter" id="S4.T1.11.3">
     LLM-DP
    </span>
    uses an LLM to generate
    <math alttext="n=3" class="ltx_Math" display="inline" id="S4.T1.3.m1.1">
     <semantics id="S4.T1.3.m1.1b">
      <mrow id="S4.T1.3.m1.1.1" xref="S4.T1.3.m1.1.1.cmml">
       <mi id="S4.T1.3.m1.1.1.2" xref="S4.T1.3.m1.1.1.2.cmml">
        n
       </mi>
       <mo id="S4.T1.3.m1.1.1.1" xref="S4.T1.3.m1.1.1.1.cmml">
        =
       </mo>
       <mn id="S4.T1.3.m1.1.1.3" xref="S4.T1.3.m1.1.1.3.cmml">
        3
       </mn>
      </mrow>
      <annotation-xml encoding="MathML-Content" id="S4.T1.3.m1.1c">
       <apply id="S4.T1.3.m1.1.1.cmml" xref="S4.T1.3.m1.1.1">
        <eq id="S4.T1.3.m1.1.1.1.cmml" xref="S4.T1.3.m1.1.1.1">
        </eq>
        <ci id="S4.T1.3.m1.1.1.2.cmml" xref="S4.T1.3.m1.1.1.2">
         𝑛
        </ci>
        <cn id="S4.T1.3.m1.1.1.3.cmml" type="integer" xref="S4.T1.3.m1.1.1.3">
         3
        </cn>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S4.T1.3.m1.1d">
       n=3
      </annotation>
     </semantics>
    </math>
    plausible world states, while
    <span class="ltx_text ltx_font_typewriter" id="S4.T1.12.4">
     LLM-DP-random
    </span>
    randomly samples
    <math alttext="n=3" class="ltx_Math" display="inline" id="S4.T1.4.m2.1">
     <semantics id="S4.T1.4.m2.1b">
      <mrow id="S4.T1.4.m2.1.1" xref="S4.T1.4.m2.1.1.cmml">
       <mi id="S4.T1.4.m2.1.1.2" xref="S4.T1.4.m2.1.1.2.cmml">
        n
       </mi>
       <mo id="S4.T1.4.m2.1.1.1" xref="S4.T1.4.m2.1.1.1.cmml">
        =
       </mo>
       <mn id="S4.T1.4.m2.1.1.3" xref="S4.T1.4.m2.1.1.3.cmml">
        3
       </mn>
      </mrow>
      <annotation-xml encoding="MathML-Content" id="S4.T1.4.m2.1c">
       <apply id="S4.T1.4.m2.1.1.cmml" xref="S4.T1.4.m2.1.1">
        <eq id="S4.T1.4.m2.1.1.1.cmml" xref="S4.T1.4.m2.1.1.1">
        </eq>
        <ci id="S4.T1.4.m2.1.1.2.cmml" xref="S4.T1.4.m2.1.1.2">
         𝑛
        </ci>
        <cn id="S4.T1.4.m2.1.1.3.cmml" type="integer" xref="S4.T1.4.m2.1.1.3">
         3
        </cn>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S4.T1.4.m2.1d">
       n=3
      </annotation>
     </semantics>
    </math>
    plausible world states.
   </figcaption>
  </figure>
  <section class="ltx_subsection" id="S4.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.1
    </span>
    Assumptions
   </h3>
   <div class="ltx_para" id="S4.SS1.p1">
    <p class="ltx_p" id="S4.SS1.p1.1">
     We make several simplifying assumptions when applying the LLM-DP framework to Alfworld:
    </p>
   </div>
   <div class="ltx_para" id="S4.SS1.p2">
    <ol class="ltx_enumerate" id="S4.I1">
     <li class="ltx_item" id="S4.I1.i1" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       1.
      </span>
      <div class="ltx_para" id="S4.I1.i1.p1">
       <p class="ltx_p" id="S4.I1.i1.p1.1">
        <span class="ltx_text ltx_font_bold" id="S4.I1.i1.p1.1.1">
         Known action-descriptions and predicates
        </span>
        : Our input to the planner and the LLM requires the
        <span class="ltx_text ltx_font_typewriter" id="S4.I1.i1.p1.1.2">
         PDDL
        </span>
        domain file, which describes what actions can be taken, their pre- and post-conditions, and what predicates exist.
       </p>
      </div>
     </li>
     <li class="ltx_item" id="S4.I1.i2" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       2.
      </span>
      <div class="ltx_para" id="S4.I1.i2.p1">
       <p class="ltx_p" id="S4.I1.i2.p1.1">
        <span class="ltx_text ltx_font_bold" id="S4.I1.i2.p1.1.1">
         Perfect observations
        </span>
        : The Alfworld environment provides a perfect textual description of the current location.
This observation also contains the intrinsic attributes of observed objects and receptacles, such as whether or not a given receptacle can be opened.
       </p>
      </div>
     </li>
     <li class="ltx_item" id="S4.I1.i3" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       3.
      </span>
      <div class="ltx_para" id="S4.I1.i3.p1">
       <p class="ltx_p" id="S4.I1.i3.p1.1">
        <span class="ltx_text ltx_font_bold" id="S4.I1.i3.p1.1.1">
         Causal Environment
        </span>
        : changes in the environment are entirely caused by the agent.
       </p>
      </div>
     </li>
     <li class="ltx_item" id="S4.I1.i4" style="list-style-type:none;">
      <span class="ltx_tag ltx_tag_item">
       4.
      </span>
      <div class="ltx_para" id="S4.I1.i4.p1">
       <p class="ltx_p" id="S4.I1.i4.p1.1">
        <span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.I1.i4.p1.1.1">
         Valid
         <span class="ltx_text ltx_font_upright" id="S4.I1.i4.p1.1.1.1">
          actions always succeed
         </span>
        </span>
       </p>
      </div>
     </li>
    </ol>
   </div>
  </section>
  <section class="ltx_subsection" id="S4.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.2
    </span>
    Generating the Goal State
   </h3>
   <div class="ltx_para" id="S4.SS2.p1">
    <p class="ltx_p" id="S4.SS2.p1.1">
     LLM-DP uses an LLM to generate a
     <span class="ltx_text ltx_font_typewriter" id="S4.SS2.p1.1.1">
      PDDL
     </span>
     goal, given the natural language instruction (
     <math alttext="task" class="ltx_Math" display="inline" id="S4.SS2.p1.1.m1.1">
      <semantics id="S4.SS2.p1.1.m1.1a">
       <mrow id="S4.SS2.p1.1.m1.1.1" xref="S4.SS2.p1.1.m1.1.1.cmml">
        <mi id="S4.SS2.p1.1.m1.1.1.2" xref="S4.SS2.p1.1.m1.1.1.2.cmml">
         t
        </mi>
        <mo id="S4.SS2.p1.1.m1.1.1.1" lspace="0em" rspace="0em" xref="S4.SS2.p1.1.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="S4.SS2.p1.1.m1.1.1.3" xref="S4.SS2.p1.1.m1.1.1.3.cmml">
         a
        </mi>
        <mo id="S4.SS2.p1.1.m1.1.1.1a" lspace="0em" rspace="0em" xref="S4.SS2.p1.1.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="S4.SS2.p1.1.m1.1.1.4" xref="S4.SS2.p1.1.m1.1.1.4.cmml">
         s
        </mi>
        <mo id="S4.SS2.p1.1.m1.1.1.1b" lspace="0em" rspace="0em" xref="S4.SS2.p1.1.m1.1.1.1.cmml">
         ​
        </mo>
        <mi id="S4.SS2.p1.1.m1.1.1.5" xref="S4.SS2.p1.1.m1.1.1.5.cmml">
         k
        </mi>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS2.p1.1.m1.1b">
        <apply id="S4.SS2.p1.1.m1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1">
         <times id="S4.SS2.p1.1.m1.1.1.1.cmml" xref="S4.SS2.p1.1.m1.1.1.1">
         </times>
         <ci id="S4.SS2.p1.1.m1.1.1.2.cmml" xref="S4.SS2.p1.1.m1.1.1.2">
          𝑡
         </ci>
         <ci id="S4.SS2.p1.1.m1.1.1.3.cmml" xref="S4.SS2.p1.1.m1.1.1.3">
          𝑎
         </ci>
         <ci id="S4.SS2.p1.1.m1.1.1.4.cmml" xref="S4.SS2.p1.1.m1.1.1.4">
          𝑠
         </ci>
         <ci id="S4.SS2.p1.1.m1.1.1.5.cmml" xref="S4.SS2.p1.1.m1.1.1.5">
          𝑘
         </ci>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS2.p1.1.m1.1c">
        task
       </annotation>
      </semantics>
     </math>
     ) and the valid predicates defined by the
     <span class="ltx_text ltx_font_typewriter" id="S4.SS2.p1.1.2">
      PDDL
     </span>
     domain file.
Figure
     <a class="ltx_ref" href="#S1.F1" title="Figure 1 ‣ 1 Introduction ‣ Dynamic Planning with a LLM">
      <span class="ltx_text ltx_ref_tag">
       1
      </span>
     </a>
     shows an example task converted to a valid
     <span class="ltx_text ltx_font_typewriter" id="S4.SS2.p1.1.3">
      PDDL
     </span>
     goal.
For each episode, we use a set of three in-context examples that are fixed for the entire evaluation duration.
We use the OpenAI
     <span class="ltx_text ltx_font_typewriter" id="S4.SS2.p1.1.4">
      gpt-3.5-turbo-0613
     </span>
     LLM model with a temperature of 0 in all our LLM-DP experiments.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S4.SS3">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.3
    </span>
    Sampling Beliefs
   </h3>
   <div class="ltx_para" id="S4.SS3.p1">
    <p class="ltx_p" id="S4.SS3.p1.4">
     We parse the initial scene description into a structured representation of the environment
     <math alttext="\mathcal{W}" class="ltx_Math" display="inline" id="S4.SS3.p1.1.m1.1">
      <semantics id="S4.SS3.p1.1.m1.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p1.1.m1.1.1" xref="S4.SS3.p1.1.m1.1.1.cmml">
        𝒲
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p1.1.m1.1b">
        <ci id="S4.SS3.p1.1.m1.1.1.cmml" xref="S4.SS3.p1.1.m1.1.1">
         𝒲
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p1.1.m1.1c">
        \mathcal{W}
       </annotation>
      </semantics>
     </math>
     and a set of beliefs
     <math alttext="\mathcal{B}" class="ltx_Math" display="inline" id="S4.SS3.p1.2.m2.1">
      <semantics id="S4.SS3.p1.2.m2.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p1.2.m2.1.1" xref="S4.SS3.p1.2.m2.1.1.cmml">
        ℬ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p1.2.m2.1b">
        <ci id="S4.SS3.p1.2.m2.1.1.cmml" xref="S4.SS3.p1.2.m2.1.1">
         ℬ
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p1.2.m2.1c">
        \mathcal{B}
       </annotation>
      </semantics>
     </math>
     .
The internal representation of the world
     <math alttext="\mathcal{W}" class="ltx_Math" display="inline" id="S4.SS3.p1.3.m3.1">
      <semantics id="S4.SS3.p1.3.m3.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p1.3.m3.1.1" xref="S4.SS3.p1.3.m3.1.1.cmml">
        𝒲
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p1.3.m3.1b">
        <ci id="S4.SS3.p1.3.m3.1.1.cmml" xref="S4.SS3.p1.3.m3.1.1">
         𝒲
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p1.3.m3.1c">
        \mathcal{W}
       </annotation>
      </semantics>
     </math>
     contains all
     <span class="ltx_text ltx_font_italic" id="S4.SS3.p1.4.1">
      known
     </span>
     information, for instance, all receptacles (possible locations) in the scene from the initial observation and their intrinsic attributes are known (i.e. a fridge holds the
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p1.4.2">
      isFridge
     </span>
     predicate).
Whereas the set of beliefs
     <math alttext="\mathcal{B}" class="ltx_Math" display="inline" id="S4.SS3.p1.4.m4.1">
      <semantics id="S4.SS3.p1.4.m4.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p1.4.m4.1.1" xref="S4.SS3.p1.4.m4.1.1.cmml">
        ℬ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p1.4.m4.1b">
        <ci id="S4.SS3.p1.4.m4.1.1.cmml" xref="S4.SS3.p1.4.m4.1.1">
         ℬ
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p1.4.m4.1c">
        \mathcal{B}
       </annotation>
      </semantics>
     </math>
     are a set of possible valid predicates that can be true or false and which the model does not have enough information to disambiguate.
In Alfworld, the objects’ locations are unknown; therefore, the set of possible predicates for each object includes all possible locations.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS3.p2">
    <p class="ltx_p" id="S4.SS3.p2.4">
     LLM-DP uses stored observations
     <math alttext="\mathcal{W}" class="ltx_Math" display="inline" id="S4.SS3.p2.1.m1.1">
      <semantics id="S4.SS3.p2.1.m1.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p2.1.m1.1.1" xref="S4.SS3.p2.1.m1.1.1.cmml">
        𝒲
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p2.1.m1.1b">
        <ci id="S4.SS3.p2.1.m1.1.1.cmml" xref="S4.SS3.p2.1.m1.1.1">
         𝒲
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p2.1.m1.1c">
        \mathcal{W}
       </annotation>
      </semantics>
     </math>
     , beliefs
     <math alttext="\mathcal{B}" class="ltx_Math" display="inline" id="S4.SS3.p2.2.m2.1">
      <semantics id="S4.SS3.p2.2.m2.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p2.2.m2.1.1" xref="S4.SS3.p2.2.m2.1.1.cmml">
        ℬ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p2.2.m2.1b">
        <ci id="S4.SS3.p2.2.m2.1.1.cmml" xref="S4.SS3.p2.2.m2.1.1">
         ℬ
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p2.2.m2.1c">
        \mathcal{B}
       </annotation>
      </semantics>
     </math>
     and an LLM to construct different planning problem files in
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p2.4.1">
      PDDL
     </span>
     .
A
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p2.4.2">
      PDDL
     </span>
     problem file includes the objects observed (
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p2.4.3">
      :objects
     </span>
     ), a representation of the current state (
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p2.4.4">
      :init
     </span>
     ) of the world and the object attributes, and the goal to be achieved (
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p2.4.5">
      :goal
     </span>
     ).
The goal is derived from the LLM (Section
     <a class="ltx_ref" href="#S4.SS2" title="4.2 Generating the Goal State ‣ 4 LLM-DP ‣ Dynamic Planning with a LLM">
      <span class="ltx_text ltx_ref_tag">
       4.2
      </span>
     </a>
     ), while the objects and their attributes are obtained from
     <math alttext="\mathcal{W}" class="ltx_Math" display="inline" id="S4.SS3.p2.3.m3.1">
      <semantics id="S4.SS3.p2.3.m3.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p2.3.m3.1.1" xref="S4.SS3.p2.3.m3.1.1.cmml">
        𝒲
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p2.3.m3.1b">
        <ci id="S4.SS3.p2.3.m3.1.1.cmml" xref="S4.SS3.p2.3.m3.1.1">
         𝒲
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p2.3.m3.1c">
        \mathcal{W}
       </annotation>
      </semantics>
     </math>
     (observations) and the beliefs the
     <math alttext="\mathcal{B}" class="ltx_Math" display="inline" id="S4.SS3.p2.4.m4.1">
      <semantics id="S4.SS3.p2.4.m4.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p2.4.m4.1.1" xref="S4.SS3.p2.4.m4.1.1.cmml">
        ℬ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p2.4.m4.1b">
        <ci id="S4.SS3.p2.4.m4.1.1.cmml" xref="S4.SS3.p2.4.m4.1.1">
         ℬ
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p2.4.m4.1c">
        \mathcal{B}
       </annotation>
      </semantics>
     </math>
     has about the objects.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS3.p3">
    <p class="ltx_p" id="S4.SS3.p3.4">
     Since
     <math alttext="\mathcal{B}" class="ltx_Math" display="inline" id="S4.SS3.p3.1.m1.1">
      <semantics id="S4.SS3.p3.1.m1.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p3.1.m1.1.1" xref="S4.SS3.p3.1.m1.1.1.cmml">
        ℬ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p3.1.m1.1b">
        <ci id="S4.SS3.p3.1.m1.1.1.cmml" xref="S4.SS3.p3.1.m1.1.1">
         ℬ
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p3.1.m1.1c">
        \mathcal{B}
       </annotation>
      </semantics>
     </math>
     includes possible predicates which are unknown, we sample from
     <math alttext="\mathcal{B}" class="ltx_Math" display="inline" id="S4.SS3.p3.2.m2.1">
      <semantics id="S4.SS3.p3.2.m2.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p3.2.m2.1.1" xref="S4.SS3.p3.2.m2.1.1.cmml">
        ℬ
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p3.2.m2.1b">
        <ci id="S4.SS3.p3.2.m2.1.1.cmml" xref="S4.SS3.p3.2.m2.1.1">
         ℬ
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p3.2.m2.1c">
        \mathcal{B}
       </annotation>
      </semantics>
     </math>
     using an LLM to obtain
     <math alttext="w_{belief}" class="ltx_Math" display="inline" id="S4.SS3.p3.3.m3.1">
      <semantics id="S4.SS3.p3.3.m3.1a">
       <msub id="S4.SS3.p3.3.m3.1.1" xref="S4.SS3.p3.3.m3.1.1.cmml">
        <mi id="S4.SS3.p3.3.m3.1.1.2" xref="S4.SS3.p3.3.m3.1.1.2.cmml">
         w
        </mi>
        <mrow id="S4.SS3.p3.3.m3.1.1.3" xref="S4.SS3.p3.3.m3.1.1.3.cmml">
         <mi id="S4.SS3.p3.3.m3.1.1.3.2" xref="S4.SS3.p3.3.m3.1.1.3.2.cmml">
          b
         </mi>
         <mo id="S4.SS3.p3.3.m3.1.1.3.1" lspace="0em" rspace="0em" xref="S4.SS3.p3.3.m3.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S4.SS3.p3.3.m3.1.1.3.3" xref="S4.SS3.p3.3.m3.1.1.3.3.cmml">
          e
         </mi>
         <mo id="S4.SS3.p3.3.m3.1.1.3.1a" lspace="0em" rspace="0em" xref="S4.SS3.p3.3.m3.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S4.SS3.p3.3.m3.1.1.3.4" xref="S4.SS3.p3.3.m3.1.1.3.4.cmml">
          l
         </mi>
         <mo id="S4.SS3.p3.3.m3.1.1.3.1b" lspace="0em" rspace="0em" xref="S4.SS3.p3.3.m3.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S4.SS3.p3.3.m3.1.1.3.5" xref="S4.SS3.p3.3.m3.1.1.3.5.cmml">
          i
         </mi>
         <mo id="S4.SS3.p3.3.m3.1.1.3.1c" lspace="0em" rspace="0em" xref="S4.SS3.p3.3.m3.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S4.SS3.p3.3.m3.1.1.3.6" xref="S4.SS3.p3.3.m3.1.1.3.6.cmml">
          e
         </mi>
         <mo id="S4.SS3.p3.3.m3.1.1.3.1d" lspace="0em" rspace="0em" xref="S4.SS3.p3.3.m3.1.1.3.1.cmml">
          ​
         </mo>
         <mi id="S4.SS3.p3.3.m3.1.1.3.7" xref="S4.SS3.p3.3.m3.1.1.3.7.cmml">
          f
         </mi>
        </mrow>
       </msub>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p3.3.m3.1b">
        <apply id="S4.SS3.p3.3.m3.1.1.cmml" xref="S4.SS3.p3.3.m3.1.1">
         <csymbol cd="ambiguous" id="S4.SS3.p3.3.m3.1.1.1.cmml" xref="S4.SS3.p3.3.m3.1.1">
          subscript
         </csymbol>
         <ci id="S4.SS3.p3.3.m3.1.1.2.cmml" xref="S4.SS3.p3.3.m3.1.1.2">
          𝑤
         </ci>
         <apply id="S4.SS3.p3.3.m3.1.1.3.cmml" xref="S4.SS3.p3.3.m3.1.1.3">
          <times id="S4.SS3.p3.3.m3.1.1.3.1.cmml" xref="S4.SS3.p3.3.m3.1.1.3.1">
          </times>
          <ci id="S4.SS3.p3.3.m3.1.1.3.2.cmml" xref="S4.SS3.p3.3.m3.1.1.3.2">
           𝑏
          </ci>
          <ci id="S4.SS3.p3.3.m3.1.1.3.3.cmml" xref="S4.SS3.p3.3.m3.1.1.3.3">
           𝑒
          </ci>
          <ci id="S4.SS3.p3.3.m3.1.1.3.4.cmml" xref="S4.SS3.p3.3.m3.1.1.3.4">
           𝑙
          </ci>
          <ci id="S4.SS3.p3.3.m3.1.1.3.5.cmml" xref="S4.SS3.p3.3.m3.1.1.3.5">
           𝑖
          </ci>
          <ci id="S4.SS3.p3.3.m3.1.1.3.6.cmml" xref="S4.SS3.p3.3.m3.1.1.3.6">
           𝑒
          </ci>
          <ci id="S4.SS3.p3.3.m3.1.1.3.7.cmml" xref="S4.SS3.p3.3.m3.1.1.3.7">
           𝑓
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p3.3.m3.1c">
        w_{belief}
       </annotation>
      </semantics>
     </math>
     .
For instance, our belief could be that
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p3.4.1">
      (inReceptacle tomato ?x)
     </span>
     where
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p3.4.2">
      ?x
     </span>
     can be
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p3.4.3">
      countertop
     </span>
     ,
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p3.4.4">
      cabinet
     </span>
     ,
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p3.4.5">
      fridge
     </span>
     , etc.
Since we want to condition the sampling of where the
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p3.4.6">
      tomato
     </span>
     can appear, we pass the known world state
     <math alttext="\mathcal{W}" class="ltx_Math" display="inline" id="S4.SS3.p3.4.m4.1">
      <semantics id="S4.SS3.p3.4.m4.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p3.4.m4.1.1" xref="S4.SS3.p3.4.m4.1.1.cmml">
        𝒲
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p3.4.m4.1b">
        <ci id="S4.SS3.p3.4.m4.1.1.cmml" xref="S4.SS3.p3.4.m4.1.1">
         𝒲
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p3.4.m4.1c">
        \mathcal{W}
       </annotation>
      </semantics>
     </math>
     along with the predicate (in this case
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p3.4.7">
      inReceptacle
     </span>
     ) and its options to the LLM.This sampling leverages the LLM to complete a world state and is extendable to any unknown predicate from which a set of beliefs can be deduced.
We also compare LLM sampling with random sampling (
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p3.4.8">
      llmdp-random
     </span>
     ).
    </p>
   </div>
   <div class="ltx_para" id="S4.SS3.p4">
    <p class="ltx_p" id="S4.SS3.p4.3">
     We describe our likely world state as the union between a sampled set of beliefs and the known world state
     <math alttext="w_{belief}\bigcup\mathcal{W}" class="ltx_Math" display="inline" id="S4.SS3.p4.1.m1.1">
      <semantics id="S4.SS3.p4.1.m1.1a">
       <mrow id="S4.SS3.p4.1.m1.1.1" xref="S4.SS3.p4.1.m1.1.1.cmml">
        <msub id="S4.SS3.p4.1.m1.1.1.2" xref="S4.SS3.p4.1.m1.1.1.2.cmml">
         <mi id="S4.SS3.p4.1.m1.1.1.2.2" xref="S4.SS3.p4.1.m1.1.1.2.2.cmml">
          w
         </mi>
         <mrow id="S4.SS3.p4.1.m1.1.1.2.3" xref="S4.SS3.p4.1.m1.1.1.2.3.cmml">
          <mi id="S4.SS3.p4.1.m1.1.1.2.3.2" xref="S4.SS3.p4.1.m1.1.1.2.3.2.cmml">
           b
          </mi>
          <mo id="S4.SS3.p4.1.m1.1.1.2.3.1" lspace="0em" rspace="0em" xref="S4.SS3.p4.1.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="S4.SS3.p4.1.m1.1.1.2.3.3" xref="S4.SS3.p4.1.m1.1.1.2.3.3.cmml">
           e
          </mi>
          <mo id="S4.SS3.p4.1.m1.1.1.2.3.1a" lspace="0em" rspace="0em" xref="S4.SS3.p4.1.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="S4.SS3.p4.1.m1.1.1.2.3.4" xref="S4.SS3.p4.1.m1.1.1.2.3.4.cmml">
           l
          </mi>
          <mo id="S4.SS3.p4.1.m1.1.1.2.3.1b" lspace="0em" rspace="0em" xref="S4.SS3.p4.1.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="S4.SS3.p4.1.m1.1.1.2.3.5" xref="S4.SS3.p4.1.m1.1.1.2.3.5.cmml">
           i
          </mi>
          <mo id="S4.SS3.p4.1.m1.1.1.2.3.1c" lspace="0em" rspace="0em" xref="S4.SS3.p4.1.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="S4.SS3.p4.1.m1.1.1.2.3.6" xref="S4.SS3.p4.1.m1.1.1.2.3.6.cmml">
           e
          </mi>
          <mo id="S4.SS3.p4.1.m1.1.1.2.3.1d" lspace="0em" rspace="0em" xref="S4.SS3.p4.1.m1.1.1.2.3.1.cmml">
           ​
          </mo>
          <mi id="S4.SS3.p4.1.m1.1.1.2.3.7" xref="S4.SS3.p4.1.m1.1.1.2.3.7.cmml">
           f
          </mi>
         </mrow>
        </msub>
        <mo id="S4.SS3.p4.1.m1.1.1.1" lspace="0em" rspace="0em" xref="S4.SS3.p4.1.m1.1.1.1.cmml">
         ​
        </mo>
        <mrow id="S4.SS3.p4.1.m1.1.1.3" xref="S4.SS3.p4.1.m1.1.1.3.cmml">
         <mo id="S4.SS3.p4.1.m1.1.1.3.1" xref="S4.SS3.p4.1.m1.1.1.3.1.cmml">
          ⋃
         </mo>
         <mi class="ltx_font_mathcaligraphic" id="S4.SS3.p4.1.m1.1.1.3.2" xref="S4.SS3.p4.1.m1.1.1.3.2.cmml">
          𝒲
         </mi>
        </mrow>
       </mrow>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p4.1.m1.1b">
        <apply id="S4.SS3.p4.1.m1.1.1.cmml" xref="S4.SS3.p4.1.m1.1.1">
         <times id="S4.SS3.p4.1.m1.1.1.1.cmml" xref="S4.SS3.p4.1.m1.1.1.1">
         </times>
         <apply id="S4.SS3.p4.1.m1.1.1.2.cmml" xref="S4.SS3.p4.1.m1.1.1.2">
          <csymbol cd="ambiguous" id="S4.SS3.p4.1.m1.1.1.2.1.cmml" xref="S4.SS3.p4.1.m1.1.1.2">
           subscript
          </csymbol>
          <ci id="S4.SS3.p4.1.m1.1.1.2.2.cmml" xref="S4.SS3.p4.1.m1.1.1.2.2">
           𝑤
          </ci>
          <apply id="S4.SS3.p4.1.m1.1.1.2.3.cmml" xref="S4.SS3.p4.1.m1.1.1.2.3">
           <times id="S4.SS3.p4.1.m1.1.1.2.3.1.cmml" xref="S4.SS3.p4.1.m1.1.1.2.3.1">
           </times>
           <ci id="S4.SS3.p4.1.m1.1.1.2.3.2.cmml" xref="S4.SS3.p4.1.m1.1.1.2.3.2">
            𝑏
           </ci>
           <ci id="S4.SS3.p4.1.m1.1.1.2.3.3.cmml" xref="S4.SS3.p4.1.m1.1.1.2.3.3">
            𝑒
           </ci>
           <ci id="S4.SS3.p4.1.m1.1.1.2.3.4.cmml" xref="S4.SS3.p4.1.m1.1.1.2.3.4">
            𝑙
           </ci>
           <ci id="S4.SS3.p4.1.m1.1.1.2.3.5.cmml" xref="S4.SS3.p4.1.m1.1.1.2.3.5">
            𝑖
           </ci>
           <ci id="S4.SS3.p4.1.m1.1.1.2.3.6.cmml" xref="S4.SS3.p4.1.m1.1.1.2.3.6">
            𝑒
           </ci>
           <ci id="S4.SS3.p4.1.m1.1.1.2.3.7.cmml" xref="S4.SS3.p4.1.m1.1.1.2.3.7">
            𝑓
           </ci>
          </apply>
         </apply>
         <apply id="S4.SS3.p4.1.m1.1.1.3.cmml" xref="S4.SS3.p4.1.m1.1.1.3">
          <union id="S4.SS3.p4.1.m1.1.1.3.1.cmml" xref="S4.SS3.p4.1.m1.1.1.3.1">
          </union>
          <ci id="S4.SS3.p4.1.m1.1.1.3.2.cmml" xref="S4.SS3.p4.1.m1.1.1.3.2">
           𝒲
          </ci>
         </apply>
        </apply>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p4.1.m1.1c">
        w_{belief}\bigcup\mathcal{W}
       </annotation>
      </semantics>
     </math>
     .
Then sampling
     <math alttext="i=1,..,N" class="ltx_math_unparsed" display="inline" id="S4.SS3.p4.2.m2.1">
      <semantics id="S4.SS3.p4.2.m2.1a">
       <mrow id="S4.SS3.p4.2.m2.1b">
        <mi id="S4.SS3.p4.2.m2.1.1">
         i
        </mi>
        <mo id="S4.SS3.p4.2.m2.1.2">
         =
        </mo>
        <mn id="S4.SS3.p4.2.m2.1.3">
         1
        </mn>
        <mo id="S4.SS3.p4.2.m2.1.4">
         ,
        </mo>
        <mo id="S4.SS3.p4.2.m2.1.5" lspace="0em" rspace="0.0835em">
         .
        </mo>
        <mo id="S4.SS3.p4.2.m2.1.6" lspace="0.0835em" rspace="0.167em">
         .
        </mo>
        <mo id="S4.SS3.p4.2.m2.1.7">
         ,
        </mo>
        <mi id="S4.SS3.p4.2.m2.1.8">
         N
        </mi>
       </mrow>
       <annotation encoding="application/x-tex" id="S4.SS3.p4.2.m2.1c">
        i=1,..,N
       </annotation>
      </semantics>
     </math>
     different sets of beliefs during the planning loop, we obtain
     <math alttext="N" class="ltx_Math" display="inline" id="S4.SS3.p4.3.m3.1">
      <semantics id="S4.SS3.p4.3.m3.1a">
       <mi id="S4.SS3.p4.3.m3.1.1" xref="S4.SS3.p4.3.m3.1.1.cmml">
        N
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS3.p4.3.m3.1b">
        <ci id="S4.SS3.p4.3.m3.1.1.cmml" xref="S4.SS3.p4.3.m3.1.1">
         𝑁
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS3.p4.3.m3.1c">
        N
       </annotation>
      </semantics>
     </math>
     likely world states.
Finally, we convert each likely world state to lists of predicates to interface with the
     <span class="ltx_text ltx_font_typewriter" id="S4.SS3.p4.3.1">
      PDDL
     </span>
     planner.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S4.SS4">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.4
    </span>
    Plan Generator
   </h3>
   <div class="ltx_para" id="S4.SS4.p1">
    <p class="ltx_p" id="S4.SS4.p1.1">
     Upon constructing the different
     <span class="ltx_text ltx_font_typewriter" id="S4.SS4.p1.1.1">
      PDDL
     </span>
     problems, the agent uses a Plan Generator (PG) to solve each problem and obtain a plan.
We use the BFS(f) solver
     <cite class="ltx_cite ltx_citemacro_citep">
      (Lipovetzky et al.,
      <a class="ltx_ref" href="#bib.bib11" title="">
       2014
      </a>
      )
     </cite>
     implemented as an executable by LAPKT
     <cite class="ltx_cite ltx_citemacro_citep">
      (Ramirez et al.,
      <a class="ltx_ref" href="#bib.bib18" title="">
       2015
      </a>
      )
     </cite>
     .
A generated plan is a sequence of actions, where each action is represented in a symbolic form, which, if executed, would lead to the goal state from the initial state.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S4.SS5">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.5
    </span>
    Action Selector
   </h3>
   <div class="ltx_para" id="S4.SS5.p1">
    <p class="ltx_p" id="S4.SS5.p1.1">
     The Action Selector (AS) module decides the agent’s immediate next action.
It takes the planner’s output, a set of plans, and selects an action from them.
In our Alfworld experiments, the Action Selector simply selects the shortest plan returned.
If no valid plans are returned, all sampled states were satisfying goal states, there is a mistake with the constructed domain/problem files, or the planner has failed to find a path to the goal.
In the first case, we re-sample random world states and re-run the planners once.
    </p>
   </div>
   <div class="ltx_para" id="S4.SS5.p2">
    <p class="ltx_p" id="S4.SS5.p2.1">
     We also propose exploring different strategies when valid plans cannot be found.
For instance, similarly to self-reflection
     <cite class="ltx_cite ltx_citemacro_cite">
      Shinn et al. (
      <a class="ltx_ref" href="#bib.bib20" title="">
       2023
      </a>
      )
     </cite>
     , the Action Selector could prompt an update in the agent’s belief about the world state if none of generated problem descriptions are solvable.
The Action Selector could also interact with a human teacher or oracle to adjust its understanding of the environment (problem) or its logic (domain).
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="S4.SS6">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     4.6
    </span>
    Observation Processing
   </h3>
   <div class="ltx_para" id="S4.SS6.p1">
    <p class="ltx_p" id="S4.SS6.p1.1">
     LLM-DP uses the result of each action to update its internal state representation.
It uses the symbolic effects of the action to infer changes in the state of the objects and receptacles.
Then it integrates the information from the new observation, which might reveal additional details not directly inferred from the action itself.
For instance, opening an unseen drawer might reveal new objects inside.
Observing also updates the beliefs – if an object is observed at a location, it cannot be elsewhere, but if an object is not observed at a location, it cannot be there.
Observations incorporate beliefs into
     <math alttext="\mathcal{W}" class="ltx_Math" display="inline" id="S4.SS6.p1.1.m1.1">
      <semantics id="S4.SS6.p1.1.m1.1a">
       <mi class="ltx_font_mathcaligraphic" id="S4.SS6.p1.1.m1.1.1" xref="S4.SS6.p1.1.m1.1.1.cmml">
        𝒲
       </mi>
       <annotation-xml encoding="MathML-Content" id="S4.SS6.p1.1.m1.1b">
        <ci id="S4.SS6.p1.1.m1.1.1.cmml" xref="S4.SS6.p1.1.m1.1.1">
         𝒲
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="S4.SS6.p1.1.m1.1c">
        \mathcal{W}
       </annotation>
      </semantics>
     </math>
     .
    </p>
   </div>
   <div class="ltx_para" id="S4.SS6.p2">
    <p class="ltx_p" id="S4.SS6.p2.1">
     If the agent detects new information from the scene - such as discovering new objects - it triggers a re-planning process.
The agent then generates a new set of possible
     <span class="ltx_text ltx_font_typewriter" id="S4.SS6.p2.1.1">
      PDDL
     </span>
     problems using the updated state representation and corresponding plans using the Plan Generator.
This approach is similar to some Task and Motion Planning (TAMP) methods
     <cite class="ltx_cite ltx_citemacro_citep">
      (Garrett et al.,
      <a class="ltx_ref" href="#bib.bib5" title="">
       2018
      </a>
      ; Chen et al.,
      <a class="ltx_ref" href="#bib.bib3" title="">
       2023
      </a>
      )
     </cite>
     , enabling the agent to adapt to environmental changes and unexpected outcomes of actions.
    </p>
   </div>
  </section>
 </section>
 <section class="ltx_section" id="S5">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    5
   </span>
   Results
  </h2>
  <div class="ltx_para" id="S5.p1">
   <p class="ltx_p" id="S5.p1.1">
    We contrast the LLM-DP approach with ReAct (LLM-only baseline) from the original implementation by
    <cite class="ltx_cite ltx_citemacro_citet">
     Yao et al. (
     <a class="ltx_ref" href="#bib.bib29" title="">
      2023
     </a>
     )
    </cite>
    .
Since we use a different backbone LLM model (
    <span class="ltx_text ltx_font_typewriter" id="S5.p1.1.1">
     gpt-3.5-turbo
    </span>
    rather than
    <span class="ltx_text ltx_font_typewriter" id="S5.p1.1.2">
     text-davinci-002
    </span>
    ) than the ReAct baseline for cost purposes, we also reproduce their results using
    <span class="ltx_text ltx_font_typewriter" id="S5.p1.1.3">
     gpt-3.5-turbo
    </span>
    and adapt the ReAct prompts to a chat format.
   </p>
  </div>
  <div class="ltx_para" id="S5.p2">
   <p class="ltx_p" id="S5.p2.3">
    As shown in Table
    <a class="ltx_ref" href="#S4.T1" title="Table 1 ‣ 4 LLM-DP ‣ Dynamic Planning with a LLM">
     <span class="ltx_text ltx_ref_tag">
      1
     </span>
    </a>
    , LLM-DP solves Alfworld almost perfectly (
    <math alttext="96\%" class="ltx_Math" display="inline" id="S5.p2.1.m1.1">
     <semantics id="S5.p2.1.m1.1a">
      <mrow id="S5.p2.1.m1.1.1" xref="S5.p2.1.m1.1.1.cmml">
       <mn id="S5.p2.1.m1.1.1.2" xref="S5.p2.1.m1.1.1.2.cmml">
        96
       </mn>
       <mo id="S5.p2.1.m1.1.1.1" xref="S5.p2.1.m1.1.1.1.cmml">
        %
       </mo>
      </mrow>
      <annotation-xml encoding="MathML-Content" id="S5.p2.1.m1.1b">
       <apply id="S5.p2.1.m1.1.1.cmml" xref="S5.p2.1.m1.1.1">
        <csymbol cd="latexml" id="S5.p2.1.m1.1.1.1.cmml" xref="S5.p2.1.m1.1.1.1">
         percent
        </csymbol>
        <cn id="S5.p2.1.m1.1.1.2.cmml" type="integer" xref="S5.p2.1.m1.1.1.2">
         96
        </cn>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S5.p2.1.m1.1c">
       96\%
      </annotation>
     </semantics>
    </math>
    ) compared to our baseline reproduction of ReAct (
    <math alttext="53\%" class="ltx_Math" display="inline" id="S5.p2.2.m2.1">
     <semantics id="S5.p2.2.m2.1a">
      <mrow id="S5.p2.2.m2.1.1" xref="S5.p2.2.m2.1.1.cmml">
       <mn id="S5.p2.2.m2.1.1.2" xref="S5.p2.2.m2.1.1.2.cmml">
        53
       </mn>
       <mo id="S5.p2.2.m2.1.1.1" xref="S5.p2.2.m2.1.1.1.cmml">
        %
       </mo>
      </mrow>
      <annotation-xml encoding="MathML-Content" id="S5.p2.2.m2.1b">
       <apply id="S5.p2.2.m2.1.1.cmml" xref="S5.p2.2.m2.1.1">
        <csymbol cd="latexml" id="S5.p2.2.m2.1.1.1.cmml" xref="S5.p2.2.m2.1.1.1">
         percent
        </csymbol>
        <cn id="S5.p2.2.m2.1.1.2.cmml" type="integer" xref="S5.p2.2.m2.1.1.2">
         53
        </cn>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S5.p2.2.m2.1c">
       53\%
      </annotation>
     </semantics>
    </math>
    ).
The LLM-DP can translate the task description into an executable
    <span class="ltx_text ltx_font_typewriter" id="S5.p2.3.1">
     PDDL
    </span>
    goal
    <math alttext="97\%" class="ltx_Math" display="inline" id="S5.p2.3.m3.1">
     <semantics id="S5.p2.3.m3.1a">
      <mrow id="S5.p2.3.m3.1.1" xref="S5.p2.3.m3.1.1.cmml">
       <mn id="S5.p2.3.m3.1.1.2" xref="S5.p2.3.m3.1.1.2.cmml">
        97
       </mn>
       <mo id="S5.p2.3.m3.1.1.1" xref="S5.p2.3.m3.1.1.1.cmml">
        %
       </mo>
      </mrow>
      <annotation-xml encoding="MathML-Content" id="S5.p2.3.m3.1b">
       <apply id="S5.p2.3.m3.1.1.cmml" xref="S5.p2.3.m3.1.1">
        <csymbol cd="latexml" id="S5.p2.3.m3.1.1.1.cmml" xref="S5.p2.3.m3.1.1.1">
         percent
        </csymbol>
        <cn id="S5.p2.3.m3.1.1.2.cmml" type="integer" xref="S5.p2.3.m3.1.1.2">
         97
        </cn>
       </apply>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="S5.p2.3.m3.1c">
       97\%
      </annotation>
     </semantics>
    </math>
    of the time, but sampling reduces the accuracy further when it fails to select a valid set of possible world states – for instance, by sampling states where the goal is already satisfied.
   </p>
  </div>
  <div class="ltx_para" id="S5.p3">
   <p class="ltx_p" id="S5.p3.1">
    We note, that the ReAct baseline makes different assumptions about the problem; while it does not require a domain file containing the action-descriptions and object predicates, it uses two separate human-annotated episodes per example to bootstrap its in-context logic.
ReAct also switches out which examples to use in-context based on the type of task, such that two examples of the same type of task being solved are always shown.
We also find that our reproduction of ReAct is worse than the original and attribute this to the
    <span class="ltx_text ltx_font_typewriter" id="S5.p3.1.1">
     gpt-3.5-turbo
    </span>
    model being more conversational than
    <span class="ltx_text ltx_font_typewriter" id="S5.p3.1.2">
     text-davinci-002
    </span>
    , and thus less likely to output valid actions as it favours fluency over following the templated action language.
   </p>
  </div>
  <div class="ltx_para" id="S5.p4">
   <p class="ltx_p" id="S5.p4.1">
    We also measure the length of each successful episode and find that LLM-DP reaches the goal state faster on average (13.16 actions) versus ReAct (18.69 actions) and a random search strategy (15.02 actions).
The Average Episode Length measures the number of actions taken in the environment and how efficient the agent is.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="S6">
  <h2 class="ltx_title ltx_title_section">
   <span class="ltx_tag ltx_tag_section">
    6
   </span>
   Conclusion
  </h2>
  <div class="ltx_para" id="S6.p1">
   <p class="ltx_p" id="S6.p1.1">
    The LLM-DP agent effectively integrates language understanding, symbolic planning, and state tracking in a dynamic environment.
It uses the language model to understand tasks and scenes expressed in natural language, constructs and solves planning problems to decide on a course of action, and keeps track of the world state to adapt to changes and make informed decisions.
This workflow enables the agent to perform complex tasks in the Alfworld environment, making it a promising approach for embodied tasks that involve language understanding, reasoning, and decision-making.
   </p>
  </div>
  <div class="ltx_para" id="S6.p2">
   <p class="ltx_p" id="S6.p2.1">
    LLM-DP offers a cost and efficiency trade-off between a wholly symbolic solution and an LLM-only model.
The LLM’s semantic knowledge of the world is leveraged to translate the problem into
    <span class="ltx_text ltx_font_typewriter" id="S6.p2.1.1">
     PDDL
    </span>
    while guiding the search process through belief instantiation.
We find that not only is LLM-DP cheaper, on a per-token comparison, but it is also faster and more successful at long-term planning in an embodied environment.
LLM-DP validates the need for LLM research to incorporate specialised tools, such as
    <span class="ltx_text ltx_font_typewriter" id="S6.p2.1.2">
     PDDL
    </span>
    solvers, in embodied agents to promote valid
   </p>
  </div>
  <div class="ltx_para" id="S6.p3">
   <p class="ltx_p" id="S6.p3.1">
    Despite these promising results, numerous topics and unresolved issues remain open for future investigation.
Key among these is devising strategies to encode the world model and belief, currently handled symbolically, and managing uncertain observations — particularly from an image model — along with propagating any uncertainty to the planner and Action Selector.
We intentionally kept the Action Selector simple for our experiments, but future work may also explore different strategies to encourage self-reflection within the agent loop.
For instance, if all plans prove invalid, beliefs may be updated, or it might indicate an incorrect domain definition.
Such instances may necessitate agents to interact with an instructor who can provide insights about action pre-conditions and effects.
This direction could lead us from a static domain file towards an agent truly adaptable to new environments, fostering continual learning and adaptation.
   </p>
  </div>
 </section>
 <section class="ltx_section" id="Sx1">
  <h2 class="ltx_title ltx_title_section">
   Acknowledgements
  </h2>
  <div class="ltx_para" id="Sx1.p1">
   <p class="ltx_p" id="Sx1.p1.1">
    This work was supported in part by the UKRI Centre for Doctoral Training in Natural Language Processing, funded by the UKRI (grant EP/S022481/1) at the University of Edinburgh, School of Informatics and School of Philosophy, Psychology &amp; Language Sciences and by the UKRI-funded TAS Governance Node (grant number EP/V026607/1).
   </p>
  </div>
 </section>
 <section class="ltx_bibliography" id="bib">
  <h2 class="ltx_title ltx_title_bibliography">
   References
  </h2>
  <ul class="ltx_biblist">
   <li class="ltx_bibitem" id="bib.bib1">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Brown et al. (2020)
    </span>
    <span class="ltx_bibblock">
     Tom B. Brown, Benjamin Mann, Nick Ryder, Melanie Subbiah, Jared Kaplan,
Prafulla Dhariwal, Arvind Neelakantan, Pranav Shyam, Girish Sastry, Amanda
Askell, Sandhini Agarwal, Ariel Herbert-Voss, Gretchen Krueger, Tom
Henighan, Rewon Child, Aditya Ramesh, Daniel M. Ziegler, Jeffrey Wu, Clemens
Winter, Christopher Hesse, Mark Chen, Eric Sigler, Mateusz Litwin, Scott
Gray, Benjamin Chess, Jack Clark, Christopher Berner, Sam McCandlish, Alec
Radford, Ilya Sutskever, and Dario Amodei. 2020.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="https://proceedings.neurips.cc/paper/2020/hash/1457c0d6bfcb4967418bfb8ac142f64a-Abstract.html" target="_blank" title="">
      Language models are few-shot learners
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib1.1.1">
      Advances in Neural Information Processing Systems 33: Annual
Conference on Neural Information Processing Systems 2020, NeurIPS 2020,
December 6-12, 2020, virtual
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib2">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Chen et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Yanda Chen, Ruiqi Zhong, Sheng Zha, George Karypis, and He He. 2022.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2022.acl-long.53" target="_blank" title="">
      Meta-learning
via language model in-context tuning
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">
      Proceedings of the 60th Annual Meeting of the Association
for Computational Linguistics (Volume 1: Long Papers)
     </em>
     , pages 719–730,
Dublin, Ireland. Association for Computational Linguistics.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib3">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Chen et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Yongchao Chen, Jacob Arkin, Yang Zhang, Nicholas A. Roy, and Chuchu Fan. 2023.
    </span>
    <span class="ltx_bibblock">
     Autotamp: Autoregressive task and motion planning with llms as
translators and checkers.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">
      ArXiv
     </em>
     , abs/2306.06531.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib4">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Fikes and Nilsson (1971)
    </span>
    <span class="ltx_bibblock">
     Richard E. Fikes and Nils J. Nilsson. 1971.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="https://doi.org/https://doi.org/10.1016/0004-3702(71)90010-5" target="_blank" title="">
      Strips: A new approach to the application of theorem proving to problem
solving
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">
      Artificial Intelligence
     </em>
     , 2(3):189–208.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib5">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Garrett et al. (2018)
    </span>
    <span class="ltx_bibblock">
     Caelan Reed Garrett, Tomas Lozano-Perez, and Leslie Pack Kaelbling. 2018.
    </span>
    <span class="ltx_bibblock">
     Pddlstream: Integrating symbolic planners and blackbox samplers via
optimistic adaptive planning.
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">
      International Conference on Automated Planning and
Scheduling
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib6">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Hao et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Shibo Hao, Yilan Gu, Haodi Ma, Joshua Jiahua Hong, Zhen Wang, Daisy Zhe Wang,
and Zhiting Hu. 2023.
    </span>
    <span class="ltx_bibblock">
     Reasoning with language model is planning with world model.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">
      ArXiv
     </em>
     , abs/2305.14992.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib7">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Hoffmann and Nebel (2001)
    </span>
    <span class="ltx_bibblock">
     Jörg Hoffmann and Bernhard Nebel. 2001.
    </span>
    <span class="ltx_bibblock">
     The FF planning system: Fast plan generation through heuristic
search.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">
      Journal of Artificial Intelligence Research
     </em>
     , 14:253–302.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib8">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Honovich et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Or Honovich, Uri Shaham, Samuel R. Bowman, and Omer Levy. 2022.
    </span>
    <span class="ltx_bibblock">
     Instruction induction: From few examples to natural language task
descriptions.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">
      ArXiv
     </em>
     , abs/2205.10782.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib9">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Hu et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Chenxu Hu, Jie Fu, Chenzhuang Du, Simian Luo, Junbo Jake Zhao, and Hang Zhao.
2023.
    </span>
    <span class="ltx_bibblock">
     Chatdb: Augmenting llms with databases as their symbolic memory.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">
      ArXiv
     </em>
     , abs/2306.03901.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib10">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Ji et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Ziwei Ji, Nayeon Lee, Rita Frieske, Tiezheng Yu, Dan Su, Yan Xu, Etsuko Ishii,
Yejin Bang, Wenliang Dai, Andrea Madotto, and Pascale Fung. 2022.
    </span>
    <span class="ltx_bibblock">
     Survey of hallucination in natural language generation.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">
      ACM Computing Surveys
     </em>
     , 55:1 – 38.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib11">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Lipovetzky et al. (2014)
    </span>
    <span class="ltx_bibblock">
     Nir Lipovetzky, Miquel Ramirez, Christian Muise, and Hector Geffner. 2014.
    </span>
    <span class="ltx_bibblock">
     Width and inference based planners: Siw, bfs (f), and probe.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">
      Proceedings of the 8th International Planning Competition
(IPC-2014)
     </em>
     , page 43.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib12">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Liu et al. (2023)
    </span>
    <span class="ltx_bibblock">
     B. Liu, Yuqian Jiang, Xiaohan Zhang, Qian Liu, Shiqi Zhang, Joydeep Biswas, and
Peter Stone. 2023.
    </span>
    <span class="ltx_bibblock">
     Llm+p: Empowering large language models with optimal planning
proficiency.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">
      ArXiv
     </em>
     , abs/2304.11477.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib13">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     McDermott (2000)
    </span>
    <span class="ltx_bibblock">
     Drew McDermott. 2000.
    </span>
    <span class="ltx_bibblock">
     The 1998 ai planning systems competition.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">
      AI Magazine
     </em>
     , 21(2):35–55.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib14">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Min et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Sewon Min, Xinxi Lyu, Ari Holtzman, Mikel Artetxe, Mike Lewis, Hannaneh
Hajishirzi, and Luke Zettlemoyer. 2022.
    </span>
    <span class="ltx_bibblock">
     Rethinking the role of demonstrations: What makes in-context learning
work?
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">
      Conference on Empirical Methods in Natural Language
Processing
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib15">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     OpenAI (2023)
    </span>
    <span class="ltx_bibblock">
     OpenAI. 2023.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="https://doi.org/10.48550/arXiv.2303.08774" target="_blank" title="">
      Gpt-4 technical
report
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">
      arXiv preprint arXiv:2303.08774
     </em>
     .
    </span>
    <span class="ltx_bibblock">
     Computation and Language (cs.CL); Artificial Intelligence (cs.AI).
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib16">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Patil et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Shishir G. Patil, Tianjun Zhang, Xin Wang, and Joseph E. Gonzalez. 2023.
    </span>
    <span class="ltx_bibblock">
     Gorilla: Large language model connected with massive apis.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">
      arXiv preprint arXiv:2305.15334
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib17">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Peng et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Baolin Peng, Michel Galley, Pengcheng He, Hao Cheng, Yujia Xie, Yu Hu, Qiuyuan
Huang, Lars Lidén, Zhou Yu, Weizhu Chen, and Jianfeng Gao. 2023.
    </span>
    <span class="ltx_bibblock">
     Check your facts and try again: Improving large language models with
external knowledge and automated feedback.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">
      ArXiv
     </em>
     , abs/2302.12813.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib18">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Ramirez et al. (2015)
    </span>
    <span class="ltx_bibblock">
     Miquel Ramirez, Nir Lipovetzky, and Christian Muise. 2015.
    </span>
    <span class="ltx_bibblock">
     Lightweight Automated Planning ToolKiT.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_url ltx_font_typewriter" href="http://lapkt.org/" target="_blank" title="">
      http://lapkt.org/
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     Accessed: 2020.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib19">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Schick et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Timo Schick, Jane Dwivedi-Yu, Roberto Dessì, Roberta Raileanu, Maria
Lomeli, Luke Zettlemoyer, Nicola Cancedda, and Thomas Scialom. 2023.
    </span>
    <span class="ltx_bibblock">
     Toolformer: Language models can teach themselves to use tools.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">
      ArXiv
     </em>
     , abs/2302.04761.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib20">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Shinn et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Noah Shinn, Beck Labash, and Ashwin Gopinath. 2023.
    </span>
    <span class="ltx_bibblock">
     Reflexion: An autonomous agent with dynamic memory and
self-reflection.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">
      arXiv preprint arXiv:2303.11366
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib21">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Shridhar et al. (2020)
    </span>
    <span class="ltx_bibblock">
     Mohit Shridhar, Xingdi Yuan, Marc-Alexandre Côté, Yonatan Bisk,
Adam Trischler, and Matthew J. Hausknecht. 2020.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="http://arxiv.org/abs/2010.03768" target="_blank" title="">
      Alfworld: Aligning text and
embodied environments for interactive learning
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">
      CoRR
     </em>
     , abs/2010.03768.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib22">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Significant-Gravitas (2023)
    </span>
    <span class="ltx_bibblock">
     Significant-Gravitas. 2023.
    </span>
    <span class="ltx_bibblock">
     An experimental open-source attempt to make gpt-4 fully autonomous.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/significant-gravitas/auto-gpt" target="_blank" title="">
      https://github.com/significant-gravitas/auto-gpt
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     Accessed: 2023-06-09.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib23">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Silver et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Tom Silver, Varun Hariprasad, Reece S Shuttleworth, Nishanth Kumar, Tomás
Lozano-Pérez, and Leslie Pack Kaelbling. 2022.
    </span>
    <span class="ltx_bibblock">
     Pddl planning with pretrained large language models.
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">
      NeurIPS 2022 Foundation Models for Decision Making
Workshop
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib24">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Surís et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Dídac Surís, Sachit Menon, and Carl Vondrick. 2023.
    </span>
    <span class="ltx_bibblock">
     Vipergpt: Visual inference via python execution for reasoning.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">
      ArXiv
     </em>
     , abs/2303.08128.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib25">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wang et al. (2023a)
    </span>
    <span class="ltx_bibblock">
     Guanzhi Wang, Yuqi Xie, Yunfan Jiang, Ajay Mandlekar, Chaowei Xiao, Yuke Zhu,
Linxi (Jim) Fan, and Anima Anandkumar. 2023a.
    </span>
    <span class="ltx_bibblock">
     Voyager: An open-ended embodied agent with large language models.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib25.1.1">
      ArXiv
     </em>
     , abs/2305.16291.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib26">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wang et al. (2023b)
    </span>
    <span class="ltx_bibblock">
     Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed Huai hsin Chi, and Denny
Zhou. 2023b.
    </span>
    <span class="ltx_bibblock">
     Self-consistency improves chain of thought reasoning in language
models.
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">
      International Conference on Learning Representations
(ICLR)
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib27">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Wei et al. (2022)
    </span>
    <span class="ltx_bibblock">
     Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Brian Ichter, Fei Xia,
Ed H. Chi, Quoc V. Le, and Denny Zhou. 2022.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="http://papers.nips.cc/paper_files/paper/2022/hash/9d5609613524ecf4f15af0f7b31abca4-Abstract-Conference.html" target="_blank" title="">
      Chain-of-thought prompting elicits reasoning in large language models
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">
      NeurIPS
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib28">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Yang et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Zhun Yang, Adam Ishay, and Joohyung Lee. 2023.
    </span>
    <span class="ltx_bibblock">
     <a class="ltx_ref ltx_href" href="https://doi.org/10.18653/v1/2023.findings-acl.321" target="_blank" title="">
      Coupling
large language models with logic programming for robust and general reasoning
from text
     </a>
     .
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">
      Findings of the Association for Computational Linguistics:
ACL 2023, Toronto, Canada, July 9-14, 2023
     </em>
     , pages 5186–5219. Association
for Computational Linguistics.
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib29">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Yao et al. (2023)
    </span>
    <span class="ltx_bibblock">
     Shunyu Yao, Jeffrey Zhao, Dian Yu, Nan Du, Izhak Shafran, Karthik Narasimhan,
and Yuan Cao. 2023.
    </span>
    <span class="ltx_bibblock">
     ReAct: Synergizing reasoning and acting in language models.
    </span>
    <span class="ltx_bibblock">
     In
     <em class="ltx_emph ltx_font_italic" id="bib.bib29.1.1">
      International Conference on Learning Representations
(ICLR)
     </em>
     .
    </span>
   </li>
   <li class="ltx_bibitem" id="bib.bib30">
    <span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">
     Younes and Littman (2004)
    </span>
    <span class="ltx_bibblock">
     Håkan LS Younes and Michael L Littman. 2004.
    </span>
    <span class="ltx_bibblock">
     Ppddl1. 0: An extension to pddl for expressing planning domains with
probabilistic effects.
    </span>
    <span class="ltx_bibblock">
     <em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">
      Techn. Rep. CMU-CS-04-162
     </em>
     , 2:99.
    </span>
   </li>
  </ul>
 </section>
 <figure class="ltx_table" id="A0.T2">
  <table class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A0.T2.7">
   <tbody class="ltx_tbody">
    <tr class="ltx_tr" id="A0.T2.7.1.1">
     <td class="ltx_td" id="A0.T2.7.1.1.1">
     </td>
     <th class="ltx_td ltx_align_left ltx_th ltx_th_column" id="A0.T2.7.1.1.2">
      SR
     </th>
     <th class="ltx_td ltx_align_left ltx_th ltx_th_column" id="A0.T2.7.1.1.3">
      EL
     </th>
    </tr>
    <tr class="ltx_tr" id="A0.T2.7.2.2">
     <td class="ltx_td ltx_align_left ltx_border_tt" id="A0.T2.7.2.2.1">
      LLM-DP (n=3)
     </td>
     <td class="ltx_td ltx_align_left ltx_border_tt" id="A0.T2.7.2.2.2">
      0.96
     </td>
     <td class="ltx_td ltx_align_left ltx_border_tt" id="A0.T2.7.2.2.3">
      13.16
     </td>
    </tr>
    <tr class="ltx_tr" id="A0.T2.7.3.3">
     <td class="ltx_td ltx_align_left" id="A0.T2.7.3.3.1">
      LLM-DP (n=3) - fallback
     </td>
     <td class="ltx_td ltx_align_left" id="A0.T2.7.3.3.2">
      0.92
     </td>
     <td class="ltx_td ltx_align_left" id="A0.T2.7.3.3.3">
      12.80
     </td>
    </tr>
    <tr class="ltx_tr" id="A0.T2.7.4.4">
     <td class="ltx_td ltx_align_left" id="A0.T2.7.4.4.1">
      LLM-DP (n=5)
     </td>
     <td class="ltx_td ltx_align_left" id="A0.T2.7.4.4.2">
      0.96
     </td>
     <td class="ltx_td ltx_align_left" id="A0.T2.7.4.4.3">
      12.54
     </td>
    </tr>
    <tr class="ltx_tr" id="A0.T2.7.5.5">
     <td class="ltx_td ltx_align_left" id="A0.T2.7.5.5.1">
      LLM-DP (n=5) - fallback
     </td>
     <td class="ltx_td ltx_align_left" id="A0.T2.7.5.5.2">
      0.94
     </td>
     <td class="ltx_td ltx_align_left" id="A0.T2.7.5.5.3">
      12.24
     </td>
    </tr>
   </tbody>
  </table>
  <figcaption class="ltx_caption">
   <span class="ltx_tag ltx_tag_table">
    Table 2:
   </span>
   We compare the average Success Rate (SR) and average Episode Length (EL) for different sampling sizes
   <math alttext="n" class="ltx_Math" display="inline" id="A0.T2.4.m1.1">
    <semantics id="A0.T2.4.m1.1b">
     <mi id="A0.T2.4.m1.1.1" xref="A0.T2.4.m1.1.1.cmml">
      n
     </mi>
     <annotation-xml encoding="MathML-Content" id="A0.T2.4.m1.1c">
      <ci id="A0.T2.4.m1.1.1.cmml" xref="A0.T2.4.m1.1.1">
       𝑛
      </ci>
     </annotation-xml>
     <annotation encoding="application/x-tex" id="A0.T2.4.m1.1d">
      n
     </annotation>
    </semantics>
   </math>
   and with or without a fallback to random sampling. The random sampling fallback affects the success rate as the LLM sampler can more often sample
   <math alttext="n" class="ltx_Math" display="inline" id="A0.T2.5.m2.1">
    <semantics id="A0.T2.5.m2.1b">
     <mi id="A0.T2.5.m2.1.1" xref="A0.T2.5.m2.1.1.cmml">
      n
     </mi>
     <annotation-xml encoding="MathML-Content" id="A0.T2.5.m2.1c">
      <ci id="A0.T2.5.m2.1.1.cmml" xref="A0.T2.5.m2.1.1">
       𝑛
      </ci>
     </annotation-xml>
     <annotation encoding="application/x-tex" id="A0.T2.5.m2.1d">
      n
     </annotation>
    </semantics>
   </math>
   world states which are already satisfied.
However as
   <math alttext="n" class="ltx_Math" display="inline" id="A0.T2.6.m3.1">
    <semantics id="A0.T2.6.m3.1b">
     <mi id="A0.T2.6.m3.1.1" xref="A0.T2.6.m3.1.1.cmml">
      n
     </mi>
     <annotation-xml encoding="MathML-Content" id="A0.T2.6.m3.1c">
      <ci id="A0.T2.6.m3.1.1.cmml" xref="A0.T2.6.m3.1.1">
       𝑛
      </ci>
     </annotation-xml>
     <annotation encoding="application/x-tex" id="A0.T2.6.m3.1d">
      n
     </annotation>
    </semantics>
   </math>
   increases, we see that it becomes more likely for the sampling procedure to at find at least one plan, and therefore the SR increases when no fallback (- fallback) is used.
  </figcaption>
 </figure>
 <section class="ltx_appendix" id="A1">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix A
   </span>
   Prompts and Few-shot details
  </h2>
  <div class="ltx_para" id="A1.p1">
   <p class="ltx_p" id="A1.p1.1">
    See Table
    <a class="ltx_ref" href="#A1.T3" title="Table 3 ‣ Appendix A Prompts and Few-shot details ‣ Dynamic Planning with a LLM">
     <span class="ltx_text ltx_ref_tag">
      3
     </span>
    </a>
    and Table
    <a class="ltx_ref" href="#A1.T4" title="Table 4 ‣ Appendix A Prompts and Few-shot details ‣ Dynamic Planning with a LLM">
     <span class="ltx_text ltx_ref_tag">
      4
     </span>
    </a>
    for LLM-DP prompts used.
   </p>
  </div>
  <figure class="ltx_table" id="A1.T3">
   <pre class="ltx_verbatim ltx_font_typewriter" id="A1.T3.1">
(define (domain alfred)
(:predicates
    (isReceptacle ?o - object) ; true if the object is a receptacle
    (atReceptacleLocation ?r - object) ; true if the robot is at the receptacle location
    (inReceptacle ?o - object ?r - object) ; true if object ?o is in receptacle ?r
    (openable ?r - object) ; true if a receptacle is openable
    (opened ?r - object) ; true if a receptacle is opened
    (isLight ?o - object) ; true if an object is light source
    (examined ?o - object ?l - object) ; whether the object has been looked at with light
    (holds ?o - object) ; object ?o is held by robot
    (isClean ?o - object) ; true if the object has been cleaned in sink
    (isHot ?o - object) ; true if the object has been heated up
    (isCool ?o - object) ; true if the object has been cooled
    (isSink ?o - object) ; true if the object is a sink
    (isMicrowave ?o - object) ; true if the object is a microwave
    (isFridge ?o - object) ; true if the object is a fridge
))
</pre>
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table 3:
    </span>
    System Prompt used by
    <span class="ltx_text ltx_font_typewriter" id="A1.T3.4.1">
     gpt-3.5-turbo
    </span>
    for generating the
    <span class="ltx_text ltx_font_typewriter" id="A1.T3.5.2">
     :goal
    </span>
    in LLM-DP
   </figcaption>
  </figure>
  <figure class="ltx_table" id="A1.T4">
   <pre class="ltx_verbatim ltx_font_typewriter" id="A1.T4.1">
Your task is to: put a clean plate in microwave.
(:goal
(exists (?t - plate ?r - microwave)
(and (inReceptacle ?t ?r)
(isClean ?t)
)))

Your task is to: examine an alarmclock with the desklamp",
(:goal
(exists (?t - alarmclock ?l - desklamp)
(and (examined ?t ?l) (holds ?t)
)))

Your task is to: put two cellphone in bed
(:goal
(exists (?t1 - cellphone ?t2 - cellphone ?r - bed)
(and (inReceptacle ?t1 ?r)
(inReceptacle ?t2 ?r)
(not (= ?t1 ?t2))
)))
</pre>
   <figcaption class="ltx_caption">
    <span class="ltx_tag ltx_tag_table">
     Table 4:
    </span>
    Fixed Few-shot examples used by
    <span class="ltx_text ltx_font_typewriter" id="A1.T4.4.1">
     gpt-3.5-turbo
    </span>
    for generating the
    <span class="ltx_text ltx_font_typewriter" id="A1.T4.5.2">
     :goal
    </span>
    in LLM-DP
   </figcaption>
  </figure>
 </section>
 <section class="ltx_appendix" id="A2">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix B
   </span>
   ReAct
  </h2>
  <section class="ltx_subsection" id="A2.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     B.1
    </span>
    Reproduction with Chat Model
   </h3>
   <div class="ltx_para" id="A2.SS1.p1">
    <p class="ltx_p" id="A2.SS1.p1.1">
     We slightly modify the ‘system’ prompt of the original ReAct (see Table
     <a class="ltx_ref" href="#A2.T5" title="Table 5 ‣ B.1 Reproduction with Chat Model ‣ Appendix B ReAct ‣ Dynamic Planning with a LLM">
      <span class="ltx_text ltx_ref_tag">
       5
      </span>
     </a>
     ) to guide the model away from its conversational tendencies.
     <span class="ltx_text ltx_font_typewriter" id="A2.SS1.p1.1.1">
      gpt-3.5-turbo
     </span>
     apologises significantly more than the
     <span class="ltx_text ltx_font_typewriter" id="A2.SS1.p1.1.2">
      text-davinci-002
     </span>
     model, and we found that it would often get stuck in loops of apologising.
We also modify the code so that we replace all generated instances of ‘in’ and ‘on’ with ‘in/on’ if the model did not generate it correctly, since Alfworld expects ‘in/on’ but
     <span class="ltx_text ltx_font_typewriter" id="A2.SS1.p1.1.3">
      gpt-3.5-turbo
     </span>
     tends to generate only the correct preposition.
Without these changes, ReAct would be significantly worse than our reported metric.
    </p>
   </div>
   <figure class="ltx_table" id="A2.T5">
    <pre class="ltx_verbatim ltx_font_typewriter" id="A2.T5.1">
Interact with a household to solve a task.
Only reply with &gt; followed by the action to take or ’think’.
Do not apologize.
Follow the format of the two examples below.
</pre>
    <figcaption class="ltx_caption">
     <span class="ltx_tag ltx_tag_table">
      Table 5:
     </span>
     System Prompt used by
     <span class="ltx_text ltx_font_typewriter" id="A2.T5.3.1">
      gpt-3.5-turbo
     </span>
     in our reproduction of ReAct
    </figcaption>
   </figure>
   <figure class="ltx_table" id="A2.T6">
    <table class="ltx_tabular ltx_centering ltx_align_middle" id="A2.T6.1">
     <tbody class="ltx_tbody">
      <tr class="ltx_tr" id="A2.T6.1.1.1">
       <td class="ltx_td ltx_align_left ltx_border_l ltx_border_r ltx_border_tt" id="A2.T6.1.1.1.1">
        <span class="ltx_inline-block ltx_minipage ltx_align_middle" id="A2.T6.1.1.1.1.1" style="width:216.8pt;">
         <span class="ltx_p" id="A2.T6.1.1.1.1.1.1">
          <span class="ltx_text ltx_inline-block" id="A2.T6.1.1.1.1.1.1.1" style="width:0.0pt;">
          </span>
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.1.1.1.2" style="width:469.8pt;">
           task: put some peppershaker on drawer.
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.1.1.2" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.1.1.2.1" style="width:469.8pt;">
           Generated:
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.1.1.3" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.1.1.3.1" style="width:469.8pt;">
           (:goal
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.1.1.4" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.1.1.4.1" style="width:469.8pt;">
           (exists (?t - peppershaker ?r - drawer)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.1.1.5" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.1.1.5.1" style="width:469.8pt;">
           (inReceptacle ?t ?r)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.1.1.6" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.1.1.6.1" style="width:469.8pt;">
           ))
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.1.1.7" style="width:469.8pt;">
          <span class="ltx_text ltx_inline-block" id="A2.T6.1.1.1.1.1.7.1" style="width:469.8pt;">
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.1.1.8" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.1.1.8.1" style="width:469.8pt;">
           VALID ✓
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_left ltx_border_r ltx_border_tt" id="A2.T6.1.1.1.2">
        <span class="ltx_inline-block ltx_minipage ltx_align_middle" id="A2.T6.1.1.1.2.1" style="width:216.8pt;">
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.1">
          <span class="ltx_text ltx_inline-block" id="A2.T6.1.1.1.2.1.1.1" style="width:0.0pt;">
          </span>
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.2.1.1.2" style="width:469.8pt;">
           task: put a clean mug in coffeemachine.
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.2" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.2.1.2.1" style="width:469.8pt;">
           Generated:
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.3" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.2.1.3.1" style="width:469.8pt;">
           (:goal
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.4" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.2.1.4.1" style="width:469.8pt;">
           (exists (?t - mug ?r - coffeemachine)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.5" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.2.1.5.1" style="width:469.8pt;">
           (and (inReceptacle ?t ?r)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.6" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.2.1.6.1" style="width:469.8pt;">
           (isClean ?t)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.7" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.2.1.7.1" style="width:469.8pt;">
           )))
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.8" style="width:469.8pt;">
          <span class="ltx_text ltx_inline-block" id="A2.T6.1.1.1.2.1.8.1" style="width:469.8pt;">
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.1.1.2.1.9" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.1.1.2.1.9.1" style="width:469.8pt;">
           VALID ✓
          </span>
         </span>
        </span>
       </td>
      </tr>
      <tr class="ltx_tr" id="A2.T6.1.2.2">
       <td class="ltx_td ltx_align_left ltx_border_bb ltx_border_l ltx_border_r ltx_border_t" id="A2.T6.1.2.2.1">
        <span class="ltx_inline-block ltx_minipage ltx_align_middle" id="A2.T6.1.2.2.1.1" style="width:216.8pt;">
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.1">
          <span class="ltx_text ltx_inline-block" id="A2.T6.1.2.2.1.1.1.1" style="width:0.0pt;">
          </span>
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.1.2" style="width:469.8pt;">
           task: put two cd in safe.
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.2" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.2.1" style="width:469.8pt;">
           Generated:
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.3" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.3.1" style="width:469.8pt;">
           (:goal
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.4" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.4.1" style="width:469.8pt;">
           (exists (?t1 - cd ?t2 - cd ?r - safe)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.5" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.5.1" style="width:469.8pt;">
           (and (inReceptacle ?t1 ?r)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.6" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.6.1" style="width:469.8pt;">
           (inReceptacle ?t2 ?r)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.7" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.7.1" style="width:469.8pt;">
           (not (= ?t1 ?t2))
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.8" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.8.1" style="width:469.8pt;">
           )))
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.1.1.9" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.1.1.9.1" style="width:469.8pt;">
           VALID ✓
          </span>
         </span>
        </span>
       </td>
       <td class="ltx_td ltx_align_left ltx_border_bb ltx_border_r ltx_border_t" id="A2.T6.1.2.2.2">
        <span class="ltx_inline-block ltx_minipage ltx_align_middle" id="A2.T6.1.2.2.2.1" style="width:216.8pt;">
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.1">
          <span class="ltx_text ltx_inline-block" id="A2.T6.1.2.2.2.1.1.1" style="width:0.0pt;">
          </span>
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.1.2" style="width:469.8pt;">
           task: heat some mug and put it in coffeemachine.
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.2" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.2.1" style="width:469.8pt;">
           Generated:
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.3" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.3.1" style="width:469.8pt;">
           (:goal
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.4" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.4.1" style="width:469.8pt;">
           (exists (?m - mug ?c - coffeemachine)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.5" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.5.1" style="width:469.8pt;">
           (and
           <span class="ltx_text" id="A2.T6.1.2.2.2.1.5.1.1" style="color:#FF0000;">
            (isReceptacle ?m)
           </span>
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.6" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.6.1" style="width:469.8pt;">
           (isHot ?m)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.7" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.7.1" style="width:469.8pt;">
           (inReceptacle ?m ?c)
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.8" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.8.1" style="width:469.8pt;">
           )))
          </span>
         </span>
         <span class="ltx_p" id="A2.T6.1.2.2.2.1.9" style="width:469.8pt;">
          <span class="ltx_text ltx_font_typewriter ltx_inline-block" id="A2.T6.1.2.2.2.1.9.1" style="width:469.8pt;">
           INVALID ✗
          </span>
         </span>
        </span>
       </td>
      </tr>
     </tbody>
    </table>
    <figcaption class="ltx_caption ltx_centering">
     <span class="ltx_tag ltx_tag_table">
      Table 6:
     </span>
     Sample of generated
     <span class="ltx_text ltx_font_typewriter" id="A2.T6.3.1">
      PDDL
     </span>
     goals from LLM-DP. The generation gets confused by the semantics of ‘receptacle’ and identifies a mug as a receptacle. While it is true that a mug is a receptacle, in our defined logic, receptacles are fixed, immovable objects which can contain other objects and therefore, a mug is not a Receptacle which leads the planning to fail subsequently.
    </figcaption>
   </figure>
  </section>
 </section>
 <section class="ltx_appendix" id="A3">
  <h2 class="ltx_title ltx_title_appendix">
   <span class="ltx_tag ltx_tag_appendix">
    Appendix C
   </span>
   LLM-DP
  </h2>
  <section class="ltx_subsection" id="A3.SS1">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     C.1
    </span>
    Generated Goal Examples
   </h3>
   <div class="ltx_para" id="A3.SS1.p1">
    <p class="ltx_p" id="A3.SS1.p1.1">
     See Table
     <a class="ltx_ref" href="#A2.T6" title="Table 6 ‣ B.1 Reproduction with Chat Model ‣ Appendix B ReAct ‣ Dynamic Planning with a LLM">
      <span class="ltx_text ltx_ref_tag">
       6
      </span>
     </a>
     for examples of generated goals, both valid and invalid.
    </p>
   </div>
  </section>
  <section class="ltx_subsection" id="A3.SS2">
   <h3 class="ltx_title ltx_title_subsection">
    <span class="ltx_tag ltx_tag_subsection">
     C.2
    </span>
    Varying
    <math alttext="n" class="ltx_Math" display="inline" id="A3.SS2.1.m1.1">
     <semantics id="A3.SS2.1.m1.1b">
      <mi id="A3.SS2.1.m1.1.1" xref="A3.SS2.1.m1.1.1.cmml">
       n
      </mi>
      <annotation-xml encoding="MathML-Content" id="A3.SS2.1.m1.1c">
       <ci id="A3.SS2.1.m1.1.1.cmml" xref="A3.SS2.1.m1.1.1">
        𝑛
       </ci>
      </annotation-xml>
      <annotation encoding="application/x-tex" id="A3.SS2.1.m1.1d">
       n
      </annotation>
     </semantics>
    </math>
   </h3>
   <div class="ltx_para" id="A3.SS2.p1">
    <p class="ltx_p" id="A3.SS2.p1.2">
     See Table
     <a class="ltx_ref" href="#A0.T2" title="Table 2 ‣ Dynamic Planning with a LLM">
      <span class="ltx_text ltx_ref_tag">
       2
      </span>
     </a>
     for results when different varying
     <math alttext="n" class="ltx_Math" display="inline" id="A3.SS2.p1.1.m1.1">
      <semantics id="A3.SS2.p1.1.m1.1a">
       <mi id="A3.SS2.p1.1.m1.1.1" xref="A3.SS2.p1.1.m1.1.1.cmml">
        n
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS2.p1.1.m1.1b">
        <ci id="A3.SS2.p1.1.m1.1.1.cmml" xref="A3.SS2.p1.1.m1.1.1">
         𝑛
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS2.p1.1.m1.1c">
        n
       </annotation>
      </semantics>
     </math>
     and fallback. Fallback is when no plans are sampled successfully through the LLM, LLM-DP re-samples
     <math alttext="n" class="ltx_Math" display="inline" id="A3.SS2.p1.2.m2.1">
      <semantics id="A3.SS2.p1.2.m2.1a">
       <mi id="A3.SS2.p1.2.m2.1.1" xref="A3.SS2.p1.2.m2.1.1.cmml">
        n
       </mi>
       <annotation-xml encoding="MathML-Content" id="A3.SS2.p1.2.m2.1b">
        <ci id="A3.SS2.p1.2.m2.1.1.cmml" xref="A3.SS2.p1.2.m2.1.1">
         𝑛
        </ci>
       </annotation-xml>
       <annotation encoding="application/x-tex" id="A3.SS2.p1.2.m2.1c">
        n
       </annotation>
      </semantics>
     </math>
     plans randomly.
    </p>
   </div>
  </section>
 </section>
</article>
