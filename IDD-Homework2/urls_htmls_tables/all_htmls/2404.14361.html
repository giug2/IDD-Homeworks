<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2404.14361] Better Synthetic Data by Retrieving and Transforming Existing Datasets</title><meta property="og:description" content="Despite recent advances in large language models, building dependable and deployable NLP models typically requires abundant, high-quality training data. However, task-specific data is not available for many use cases, …">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Better Synthetic Data by Retrieving and Transforming Existing Datasets">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Better Synthetic Data by Retrieving and Transforming Existing Datasets">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2404.14361">

<!--Generated on Sun May  5 17:07:51 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<div id="p1" class="ltx_para">
<span id="p1.1" class="ltx_ERROR undefined">\addauthor</span>
<p id="p1.2" class="ltx_p">gnmagenta
<span id="p1.2.1" class="ltx_ERROR undefined">\addauthor</span>vijayteal
<span id="p1.2.2" class="ltx_ERROR undefined">\addauthor</span>rituorange
<span id="p1.2.3" class="ltx_ERROR undefined">\addauthor</span>swblue
<span id="p1.2.4" class="ltx_ERROR undefined">\addauthor</span>sgviolet

 </p>
</div>
<h1 class="ltx_title ltx_title_document"> Better Synthetic Data by Retrieving and Transforming 
<br class="ltx_break">Existing Datasets</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Saumya Gandhi  , Ritu Gala<math id="id1.1.m1.1" class="ltx_Math" alttext="{}^{*}\hskip 0.80002pt" display="inline"><semantics id="id1.1.m1.1a"><msup id="id1.1.m1.1.1" xref="id1.1.m1.1.1.cmml"><mi id="id1.1.m1.1.1a" xref="id1.1.m1.1.1.cmml"></mi><mo id="id1.1.m1.1.1.1" xref="id1.1.m1.1.1.1.cmml">∗</mo></msup><annotation-xml encoding="MathML-Content" id="id1.1.m1.1b"><apply id="id1.1.m1.1.1.cmml" xref="id1.1.m1.1.1"><times id="id1.1.m1.1.1.1.cmml" xref="id1.1.m1.1.1.1"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="id1.1.m1.1c">{}^{*}\hskip 0.80002pt</annotation></semantics></math>, Vijay Viswanathan,
<br class="ltx_break"><span id="id2.2.id1" class="ltx_text ltx_font_bold">Tongshuang Wu</span>, <span id="id3.3.id2" class="ltx_text ltx_font_bold">Graham Neubig 
<br class="ltx_break"></span>Carnegie Mellon University
</span><span class="ltx_author_notes">  equal contribution.</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id4.id1" class="ltx_p">Despite recent advances in large language models, building dependable and deployable NLP models typically requires abundant, high-quality training data. However, task-specific data is not available for many use cases, and manually curating task-specific data is labor-intensive. Recent work has studied prompt-driven synthetic data generation using large language models, but these generated datasets tend to lack complexity and diversity. To address these limitations, we introduce a method, <span id="id4.id1.1" class="ltx_text ltx_font_italic">DataTune</span>, to make better use of existing, publicly available datasets to improve automatic dataset generation. DataTune performs <span id="id4.id1.2" class="ltx_text ltx_font_italic">dataset transformation</span>, enabling the repurposing of publicly available datasets into a format that is directly aligned with the specific requirements of target tasks. On a diverse set of language-based tasks from the BIG-Bench benchmark, we find that finetuning language models via DataTune improves over a few-shot prompting baseline by 49% and improves over existing methods that use synthetic or retrieved training data by 34%. We find that dataset transformation significantly increases the diversity and difficulty of generated data on many tasks. We integrate DataTune into an open-source repository to make this method accessible to the community.<span id="footnote1" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span><a target="_blank" href="https://github.com/neulab/prompt2model" title="" class="ltx_ref ltx_href">https://github.com/neulab/prompt2model</a></span></span></span></p>
</div>
<figure id="S0.F1" class="ltx_figure"><img src="/html/2404.14361/assets/x1.png" id="S0.F1.g1" class="ltx_graphics ltx_centering ltx_img_square" width="461" height="385" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Obtaining task-specific annotated data can be tricky. Existing solutions include (1) <span id="S0.F1.3.1" class="ltx_text ltx_font_italic">data generation methods</span> either by employing human annotators (incurring high costs) or synthetically, such as using LLMs (risking low diversity) or (2) <span id="S0.F1.4.2" class="ltx_text ltx_font_italic">cross-task transfer</span>, where related but task-misaligned datasets are used (for instance, for the task of generating English language descriptions based on code, this could be a public dataset with coding questions, solutions, and test cases but no explicit descriptions). Our approach combines these strategies by adaptively transforming existing datasets for the target task (using the "solution" field from the public dataset and asking an LLM to create description or make any formatting changes required) preserving original dataset diversity while ensuring the quality of synthetically generated data. </figcaption>
</figure>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">The major bottleneck in modern AI research is data. Despite the paradigm-shifting developments of pretraining and prompting, the recipe for achieving peak performance on any particular task has hardly changed: obtain large amounts of high-quality training data and fine-tune your model. This is particularly valuable for developing models with fewer than 3 billion parameters; in this regime, supervised finetuning can be significantly more effective than in-context learning <cite class="ltx_cite ltx_citemacro_cite">Mosbach et al. (<a href="#bib.bib11" title="" class="ltx_ref">2023</a>)</cite>.
However, this recipe can be challenging for specialized or novel tasks where task-specific annotated data is limited.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">Prior works have proposed strategies for fine-tuning in this low-resource setting. The most intuitive way is <em id="S1.p2.1.1" class="ltx_emph ltx_font_italic">obtain labeled data</em> through manual curation <cite class="ltx_cite ltx_citemacro_cite">Callison-Burch (<a href="#bib.bib2" title="" class="ltx_ref">2009</a>); Zhang et al. (<a href="#bib.bib29" title="" class="ltx_ref">2022</a>)</cite>, which assumes access to domain experts and may require considerable financial resources to compensate annotators fairly <cite class="ltx_cite ltx_citemacro_citep">(Huang et al., <a href="#bib.bib5" title="" class="ltx_ref">2023</a>)</cite>. An increasingly popular alternative to large-scale manual annotation is to synthetically produce datasets using existing large models <cite class="ltx_cite ltx_citemacro_cite">Wang et al. (<a href="#bib.bib25" title="" class="ltx_ref">2022</a>); Peng et al. (<a href="#bib.bib12" title="" class="ltx_ref">2023</a>); Tang et al. (<a href="#bib.bib18" title="" class="ltx_ref">2023</a>)</cite>. We will refer to this method as <span id="S1.p2.1.2" class="ltx_text ltx_font_italic">synthetic data generation</span>. Unfortunately, directly generating synthetic datasets that simultaneously have high correctness and sufficient diversity is difficult. Models trained on synthetic datasets are typically significantly worse than those trained on manually curated data when standardizing for dataset size, suggesting that current synthetic dataset generation methods still leave significant room for improvement in dataset quality <cite class="ltx_cite ltx_citemacro_citep">(Ding et al., <a href="#bib.bib4" title="" class="ltx_ref">2023</a>)</cite>.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">On the other hand, <em id="S1.p3.1.1" class="ltx_emph ltx_font_italic">cross-task transfer</em> entirely sidesteps the need for strictly in-domain data by training models either in a multi-task fashion on a wide range of datasets <cite class="ltx_cite ltx_citemacro_citep">(Sanh et al., <a href="#bib.bib15" title="" class="ltx_ref">2021</a>)</cite> or on task-specific datasets closest to the new target task <cite class="ltx_cite ltx_citemacro_citep">(Vu et al., <a href="#bib.bib22" title="" class="ltx_ref">2020</a>)</cite>.
We focus on the latter, which we refer to as <span id="S1.p3.1.2" class="ltx_text ltx_font_italic">existing data</span>. Recent methods such as Prompt2Model <cite class="ltx_cite ltx_citemacro_cite">Viswanathan et al. (<a href="#bib.bib21" title="" class="ltx_ref">2023b</a>)</cite> combine both of the above methods, showing the additive benefits of synthetic data generation and existing datasets for finetuning in few-shot settings. However, they report that even for the machine reading question answering dataset of SQuAD <cite class="ltx_cite ltx_citemacro_citep">(Rajpurkar et al., <a href="#bib.bib13" title="" class="ltx_ref">2016</a>)</cite>, a dataset considered today to be largely “solved”, training on <span id="S1.p3.1.3" class="ltx_text ltx_font_italic">existing data</span> alone is significantly worse than training on manually or synthetically created data.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">To overcome the limitations of these approaches, we introduce DataTune, a system that automatically repurposes public datasets for new tasks. DataTune identifies the most relevant public datasets and uses a large language model to transform them into a format aligned with the target task’s needs. For instance, for a task requiring descriptions of Python code in English (as shown in Figure <a href="#S0.F1" title="Figure 1 ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>), DataTune finds a dataset with programming questions and code solutions (along with other, irrelevant data columns). It transforms the retrieved dataset by using the code solutions as input and generating a synthetic description of the code as output. This approach maintains the original dataset’s diversity while matching the task specification, boosting performance by 22 points over baselines. We refer to this synthetic adaptation of publicly available datasets as <span id="S1.p4.1.1" class="ltx_text ltx_font_italic">Dataset Transformation</span>.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">We evaluate the effectiveness of DataTune on six challenging language-based tasks from the BIG-Bench benchmark <cite class="ltx_cite ltx_citemacro_citep">(BIG Bench Authors, <a href="#bib.bib1" title="" class="ltx_ref">2023</a>)</cite>, which are designed to gauge the system’s performance across diverse NLP task categories.
When compared to few-shot prompting of the same base model (<span id="S1.p5.1.1" class="ltx_text ltx_font_italic">Mistral-7B</span>) without fine-tuning, DataTune-enhanced models improve by an average of 5.2 points on five tasks, demonstrating its value for domain-specific fine-tuning. DataTune also can be used additively with existing synthetic dataset generation approaches, yielding an 8-point improvement over the few-shot prompting baseline. Comparing DataTune with existing methods of synthetic data generation, we find that DataTune often produces more difficult and diverse examples, and on a small sample of data we observe that these benefits do not come at the expense of data correctness.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Problem Setup</h2>

<div id="S2.p1" class="ltx_para">
<p id="S2.p1.3" class="ltx_p">We study the problem of how to automatically <span id="S2.p1.3.1" class="ltx_text ltx_font_italic">retrieve</span> and <span id="S2.p1.3.2" class="ltx_text ltx_font_italic">transform</span> existing datasets to prepare a fine-tuning dataset for a new task. In our problem setting, a user specifies the task of interest with a textual prompt <math id="S2.p1.1.m1.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S2.p1.1.m1.1a"><mi id="S2.p1.1.m1.1.1" xref="S2.p1.1.m1.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S2.p1.1.m1.1b"><ci id="S2.p1.1.m1.1.1.cmml" xref="S2.p1.1.m1.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.1.m1.1c">T</annotation></semantics></math> (optionally containing a few demonstration examples). We assume access to a large, diverse collection of labeled datasets <math id="S2.p1.2.m2.1" class="ltx_Math" alttext="\mathcal{D}" display="inline"><semantics id="S2.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p1.2.m2.1.1" xref="S2.p1.2.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S2.p1.2.m2.1b"><ci id="S2.p1.2.m2.1.1.cmml" xref="S2.p1.2.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.2.m2.1c">\mathcal{D}</annotation></semantics></math>, a large language model that can be prompted, and a small language model <math id="S2.p1.3.m3.1" class="ltx_Math" alttext="M" display="inline"><semantics id="S2.p1.3.m3.1a"><mi id="S2.p1.3.m3.1.1" xref="S2.p1.3.m3.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S2.p1.3.m3.1b"><ci id="S2.p1.3.m3.1.1.cmml" xref="S2.p1.3.m3.1.1">𝑀</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.3.m3.1c">M</annotation></semantics></math> that we can fine-tune.</p>
</div>
<div id="S2.p2" class="ltx_para">
<p id="S2.p2.8" class="ltx_p">The goal here is to automatically generate a synthetic training dataset <math id="S2.p2.1.m1.1" class="ltx_Math" alttext="D^{\prime}" display="inline"><semantics id="S2.p2.1.m1.1a"><msup id="S2.p2.1.m1.1.1" xref="S2.p2.1.m1.1.1.cmml"><mi id="S2.p2.1.m1.1.1.2" xref="S2.p2.1.m1.1.1.2.cmml">D</mi><mo id="S2.p2.1.m1.1.1.3" xref="S2.p2.1.m1.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S2.p2.1.m1.1b"><apply id="S2.p2.1.m1.1.1.cmml" xref="S2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S2.p2.1.m1.1.1.1.cmml" xref="S2.p2.1.m1.1.1">superscript</csymbol><ci id="S2.p2.1.m1.1.1.2.cmml" xref="S2.p2.1.m1.1.1.2">𝐷</ci><ci id="S2.p2.1.m1.1.1.3.cmml" xref="S2.p2.1.m1.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.1.m1.1c">D^{\prime}</annotation></semantics></math> which, after finetuning <math id="S2.p2.2.m2.1" class="ltx_Math" alttext="M" display="inline"><semantics id="S2.p2.2.m2.1a"><mi id="S2.p2.2.m2.1.1" xref="S2.p2.2.m2.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S2.p2.2.m2.1b"><ci id="S2.p2.2.m2.1.1.cmml" xref="S2.p2.2.m2.1.1">𝑀</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.2.m2.1c">M</annotation></semantics></math> on <math id="S2.p2.3.m3.1" class="ltx_Math" alttext="D^{\prime}" display="inline"><semantics id="S2.p2.3.m3.1a"><msup id="S2.p2.3.m3.1.1" xref="S2.p2.3.m3.1.1.cmml"><mi id="S2.p2.3.m3.1.1.2" xref="S2.p2.3.m3.1.1.2.cmml">D</mi><mo id="S2.p2.3.m3.1.1.3" xref="S2.p2.3.m3.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S2.p2.3.m3.1b"><apply id="S2.p2.3.m3.1.1.cmml" xref="S2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S2.p2.3.m3.1.1.1.cmml" xref="S2.p2.3.m3.1.1">superscript</csymbol><ci id="S2.p2.3.m3.1.1.2.cmml" xref="S2.p2.3.m3.1.1.2">𝐷</ci><ci id="S2.p2.3.m3.1.1.3.cmml" xref="S2.p2.3.m3.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.3.m3.1c">D^{\prime}</annotation></semantics></math>, will improve <math id="S2.p2.4.m4.1" class="ltx_Math" alttext="M" display="inline"><semantics id="S2.p2.4.m4.1a"><mi id="S2.p2.4.m4.1.1" xref="S2.p2.4.m4.1.1.cmml">M</mi><annotation-xml encoding="MathML-Content" id="S2.p2.4.m4.1b"><ci id="S2.p2.4.m4.1.1.cmml" xref="S2.p2.4.m4.1.1">𝑀</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.4.m4.1c">M</annotation></semantics></math>’s ability to satisfy the task specification. For each task <math id="S2.p2.5.m5.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S2.p2.5.m5.1a"><mi id="S2.p2.5.m5.1.1" xref="S2.p2.5.m5.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S2.p2.5.m5.1b"><ci id="S2.p2.5.m5.1.1.cmml" xref="S2.p2.5.m5.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.5.m5.1c">T</annotation></semantics></math> in a known set of task descriptions <math id="S2.p2.6.m6.1" class="ltx_Math" alttext="\mathcal{T}" display="inline"><semantics id="S2.p2.6.m6.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p2.6.m6.1.1" xref="S2.p2.6.m6.1.1.cmml">𝒯</mi><annotation-xml encoding="MathML-Content" id="S2.p2.6.m6.1b"><ci id="S2.p2.6.m6.1.1.cmml" xref="S2.p2.6.m6.1.1">𝒯</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.6.m6.1c">\mathcal{T}</annotation></semantics></math>, we can measure our progress towards this goal by evaluating the trained model <math id="S2.p2.7.m7.1" class="ltx_Math" alttext="M_{T}" display="inline"><semantics id="S2.p2.7.m7.1a"><msub id="S2.p2.7.m7.1.1" xref="S2.p2.7.m7.1.1.cmml"><mi id="S2.p2.7.m7.1.1.2" xref="S2.p2.7.m7.1.1.2.cmml">M</mi><mi id="S2.p2.7.m7.1.1.3" xref="S2.p2.7.m7.1.1.3.cmml">T</mi></msub><annotation-xml encoding="MathML-Content" id="S2.p2.7.m7.1b"><apply id="S2.p2.7.m7.1.1.cmml" xref="S2.p2.7.m7.1.1"><csymbol cd="ambiguous" id="S2.p2.7.m7.1.1.1.cmml" xref="S2.p2.7.m7.1.1">subscript</csymbol><ci id="S2.p2.7.m7.1.1.2.cmml" xref="S2.p2.7.m7.1.1.2">𝑀</ci><ci id="S2.p2.7.m7.1.1.3.cmml" xref="S2.p2.7.m7.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.7.m7.1c">M_{T}</annotation></semantics></math> against labeled data obtained for task <math id="S2.p2.8.m8.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S2.p2.8.m8.1a"><mi id="S2.p2.8.m8.1.1" xref="S2.p2.8.m8.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S2.p2.8.m8.1b"><ci id="S2.p2.8.m8.1.1.cmml" xref="S2.p2.8.m8.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.8.m8.1c">T</annotation></semantics></math>.</p>
</div>
<figure id="S2.F2" class="ltx_figure"><img src="/html/2404.14361/assets/x2.png" id="S2.F2.g1" class="ltx_graphics ltx_img_landscape" width="461" height="170" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>The data transformation component of DataTune, explained with an example (in yellow). </figcaption>
</figure>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Methods</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.2" class="ltx_p">DataTune focuses on selecting and transforming a dataset to align it with a specific task.
First, it finds relevant datasets from <math id="S3.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{D}" display="inline"><semantics id="S3.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.p1.1.m1.1.1" xref="S3.p1.1.m1.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.p1.1.m1.1b"><ci id="S3.p1.1.m1.1.1.cmml" xref="S3.p1.1.m1.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.1.m1.1c">\mathcal{D}</annotation></semantics></math> that are good candidates for further transformation, through dataset retrieval and reranking.
Then, it performs data transformation (i.e., synthetically modify each entries in the selected dataset) to create a new dataset <math id="S3.p1.2.m2.1" class="ltx_Math" alttext="\mathcal{D^{\prime}}" display="inline"><semantics id="S3.p1.2.m2.1a"><msup id="S3.p1.2.m2.1.1" xref="S3.p1.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.p1.2.m2.1.1.2" xref="S3.p1.2.m2.1.1.2.cmml">𝒟</mi><mo id="S3.p1.2.m2.1.1.3" xref="S3.p1.2.m2.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S3.p1.2.m2.1b"><apply id="S3.p1.2.m2.1.1.cmml" xref="S3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.p1.2.m2.1.1.1.cmml" xref="S3.p1.2.m2.1.1">superscript</csymbol><ci id="S3.p1.2.m2.1.1.2.cmml" xref="S3.p1.2.m2.1.1.2">𝒟</ci><ci id="S3.p1.2.m2.1.1.3.cmml" xref="S3.p1.2.m2.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.2.m2.1c">\mathcal{D^{\prime}}</annotation></semantics></math> that better aligns with the task requirements.</p>
</div>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Dataset Retrieval</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.1" class="ltx_p">The first phase of DataTune involves identifying relevant datasets for our task from a large repository of existing datasets. We confine our dataset space <math id="S3.SS1.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{D}" display="inline"><semantics id="S3.SS1.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><ci id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">\mathcal{D}</annotation></semantics></math> to the HuggingFace Hub <cite class="ltx_cite ltx_citemacro_citep">(Lhoest et al., <a href="#bib.bib8" title="" class="ltx_ref">2021</a>)</cite>, which consists of over 75,000 datasets.</p>
</div>
<div id="S3.SS1.p2" class="ltx_para">
<p id="S3.SS1.p2.1" class="ltx_p">To efficiently complete this task, we use a dual-stage retrieval approach. We first <em id="S3.SS1.p2.1.1" class="ltx_emph ltx_font_italic">retrieve</em> a set of documents using DataFinder <cite class="ltx_cite ltx_citemacro_citep">(Viswanathan et al., <a href="#bib.bib20" title="" class="ltx_ref">2023a</a>)</cite>, a bi-encoder retriever specifically trained for retrieving datasets from natural language queries using textual descriptions of each dataset. We then rerank these datasets to increase the likelihood that our selected dataset can be effectively transformed for the target task.
Inspired by <cite class="ltx_cite ltx_citemacro_citet">Sun et al. (<a href="#bib.bib17" title="" class="ltx_ref">2023</a>)</cite>, who showed that LLMs can effectively rerank documents, we similarly use LLMs for reranking datasets. While we use only descriptions of the dataset to generate our initial candidate datasets, this is often inadequate for localizing to the best dataset for a given task. For instance, for a math-based task which have multiple choice questions (MCQs), the dataset descriptions of both <span id="S3.SS1.p2.1.2" class="ltx_text ltx_font_italic">GSM8K<span id="footnote2" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_tag ltx_tag_note"><span id="footnote2.1.1.1" class="ltx_text ltx_font_upright">2</span></span><span id="footnote2.5" class="ltx_text ltx_font_upright">https://huggingface.co/datasets/gsm8k</span></span></span></span></span> and <span id="S3.SS1.p2.1.3" class="ltx_text ltx_font_italic">math_qa<span id="footnote3" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_tag ltx_tag_note"><span id="footnote3.1.1.1" class="ltx_text ltx_font_upright">3</span></span><span id="footnote3.5" class="ltx_text ltx_font_upright">https://huggingface.co/datasets/math_qa</span></span></span></span></span> make them valid choices, but it is only when we look at the schema and sample rows of <span id="S3.SS1.p2.1.4" class="ltx_text ltx_font_italic">math_qa</span> (which has multiple choice options) do we see that it is a better choice for our task than <span id="S3.SS1.p2.1.5" class="ltx_text ltx_font_italic">GSM8K</span> (which has open-ended questions). Thus we also provide additional dataset attributes such as its schema and a small sampling of rows, to aid with the reranking. The reranking step concludes with the name (and any versions) of the chosen dataset <math id="S3.SS1.p2.1.m1.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS1.p2.1.m1.1a"><msub id="S3.SS1.p2.1.m1.1.1" xref="S3.SS1.p2.1.m1.1.1.cmml"><mi id="S3.SS1.p2.1.m1.1.1.2" xref="S3.SS1.p2.1.m1.1.1.2.cmml">D</mi><mi id="S3.SS1.p2.1.m1.1.1.3" xref="S3.SS1.p2.1.m1.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p2.1.m1.1b"><apply id="S3.SS1.p2.1.m1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p2.1.m1.1.1.1.cmml" xref="S3.SS1.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p2.1.m1.1.1.2.cmml" xref="S3.SS1.p2.1.m1.1.1.2">𝐷</ci><ci id="S3.SS1.p2.1.m1.1.1.3.cmml" xref="S3.SS1.p2.1.m1.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p2.1.m1.1c">D_{R}</annotation></semantics></math>.
We include the reranking prompt we used in Appendix. <a href="#A1.SS1" title="A.1 Reranking Prompt ‣ Appendix A Example Appendix ‣ Ethical Considerations ‣ Limitations ‣ 6 Conclusion and Future Work ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">A.1</span></a>.
<br class="ltx_break">Additionally, to improve the reliability of dataset chosen, we employ self-consistency decoding <cite class="ltx_cite ltx_citemacro_cite">Wang et al. (<a href="#bib.bib24" title="" class="ltx_ref">2023</a>)</cite>, where we run the reranker multiple times, and choose the most frequently returned dataset. It is also possible for no suitable dataset being found, acknowledging that not every task has a relevant dataset.</p>
</div>
<figure id="S3.F3" class="ltx_figure"><svg id="S3.F3.pic1" class="ltx_picture" height="327.67" overflow="visible" version="1.1" width="600"><g transform="translate(0,327.67) matrix(1 0 0 -1 0 0)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#0000BF" fill-opacity="1.0"><path d="M 0 5.91 L 0 321.77 C 0 325.03 2.64 327.67 5.91 327.67 L 594.09 327.67 C 597.36 327.67 600 325.03 600 321.77 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2FF" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 303.56 L 598.03 303.56 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 309.47)"><foreignObject width="556.69" height="12.3" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#FFFFFF">
<span id="S3.F3.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_bottom" style="width:402.3pt;">
<span id="S3.F3.pic1.1.1.1.1.1.1" class="ltx_p">Sample Plan</span>
</span></foreignObject></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignObject width="556.69" height="277.97" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#000000">
<span id="S3.F3.pic1.2.2.2.1.1" class="ltx_inline-block ltx_minipage ltx_align_bottom" style="width:402.3pt;">
<span id="S3.F3.pic1.2.2.2.1.1.1" class="ltx_p">1. Extract the "solutions" field from the dataset as this contains the Python code snippets.</span>
<span id="S3.F3.pic1.2.2.2.1.1.2" class="ltx_p">2. For each "solutions" entry, identify the primary operation or functionality of the Python code. This may require parsing the code and understanding its logic.</span>
<span id="S3.F3.pic1.2.2.2.1.1.3" class="ltx_p">3. Generate a set of multiple-choice descriptions ("choices") for each code snippet. These should include one correct description of what the code does and several incorrect descriptions. The incorrect descriptions can be plausible but should not accurately describe the code’s functionality.</span>
<span id="S3.F3.pic1.2.2.2.1.1.4" class="ltx_p">4. Format the "input" field by labeling it as "Python code:" followed by the actual code snippet from the "solutions" field. Below the code, list the generated "choices" with the label "choice:" preceding each option.</span>
<span id="S3.F3.pic1.2.2.2.1.1.5" class="ltx_p">5. Determine the correct "choice" that accurately describes the code’s behavior. This will be the "output" field.</span>
<span id="S3.F3.pic1.2.2.2.1.1.6" class="ltx_p">6. Combine the "input" field and the "output" field to create the final data in the required format for the task examples.</span>
<span id="S3.F3.pic1.2.2.2.1.1.7" class="ltx_p">7. If a "solutions" entry does not contain a Python code snippet or is not relevant to the task description, ignore the data sample and return null for that entry.</span>
</span></foreignObject></g></g></svg>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>We show an example plan for the task of providing concise descriptions of Python code. The retrieved dataset contains natural language questions and code solutions. The plan then specifies that the transformation must create the correct description, create incorrect descriptions to create an multiple choice dataset, and format changes required to match the target task examples.</figcaption>
</figure>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Dataset Transformation</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.3" class="ltx_p">Having selected an appropriate dataset <math id="S3.SS2.p1.1.m1.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.p1.1.m1.1a"><msub id="S3.SS2.p1.1.m1.1.1" xref="S3.SS2.p1.1.m1.1.1.cmml"><mi id="S3.SS2.p1.1.m1.1.1.2" xref="S3.SS2.p1.1.m1.1.1.2.cmml">D</mi><mi id="S3.SS2.p1.1.m1.1.1.3" xref="S3.SS2.p1.1.m1.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.1.m1.1b"><apply id="S3.SS2.p1.1.m1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.1.m1.1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p1.1.m1.1.1.2.cmml" xref="S3.SS2.p1.1.m1.1.1.2">𝐷</ci><ci id="S3.SS2.p1.1.m1.1.1.3.cmml" xref="S3.SS2.p1.1.m1.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.1.m1.1c">D_{R}</annotation></semantics></math> from <math id="S3.SS2.p1.2.m2.1" class="ltx_Math" alttext="\mathcal{D}" display="inline"><semantics id="S3.SS2.p1.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p1.2.m2.1.1" xref="S3.SS2.p1.2.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.2.m2.1b"><ci id="S3.SS2.p1.2.m2.1.1.cmml" xref="S3.SS2.p1.2.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.2.m2.1c">\mathcal{D}</annotation></semantics></math>, we now focus on tailoring it to the task requirements to create <math id="S3.SS2.p1.3.m3.1" class="ltx_Math" alttext="D^{\prime}" display="inline"><semantics id="S3.SS2.p1.3.m3.1a"><msup id="S3.SS2.p1.3.m3.1.1" xref="S3.SS2.p1.3.m3.1.1.cmml"><mi id="S3.SS2.p1.3.m3.1.1.2" xref="S3.SS2.p1.3.m3.1.1.2.cmml">D</mi><mo id="S3.SS2.p1.3.m3.1.1.3" xref="S3.SS2.p1.3.m3.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.3.m3.1b"><apply id="S3.SS2.p1.3.m3.1.1.cmml" xref="S3.SS2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.3.m3.1.1.1.cmml" xref="S3.SS2.p1.3.m3.1.1">superscript</csymbol><ci id="S3.SS2.p1.3.m3.1.1.2.cmml" xref="S3.SS2.p1.3.m3.1.1.2">𝐷</ci><ci id="S3.SS2.p1.3.m3.1.1.3.cmml" xref="S3.SS2.p1.3.m3.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.3.m3.1c">D^{\prime}</annotation></semantics></math>. This transformation process can include modifications ranging from adjusting the input/output format to more closely match that of the few shot examples to more substantial changes like generating new fields that the present dataset may not currently have.</p>
</div>
<div id="S3.SS2.p2" class="ltx_para">
<p id="S3.SS2.p2.3" class="ltx_p">To accomplish this complex task, we split it into two primary steps. First, the <span id="S3.SS2.p2.3.1" class="ltx_text ltx_font_italic">Planning Module</span> generate a multi-step plan illustrating the sequence of transformations needed to convert examples from <math id="S3.SS2.p2.1.m1.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.p2.1.m1.1a"><msub id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml"><mi id="S3.SS2.p2.1.m1.1.1.2" xref="S3.SS2.p2.1.m1.1.1.2.cmml">D</mi><mi id="S3.SS2.p2.1.m1.1.1.3" xref="S3.SS2.p2.1.m1.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><apply id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p2.1.m1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1.2">𝐷</ci><ci id="S3.SS2.p2.1.m1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">D_{R}</annotation></semantics></math> into the desired output. Next, the <span id="S3.SS2.p2.3.2" class="ltx_text ltx_font_italic">Execution Module</span> executes the plan on each datapoint in <math id="S3.SS2.p2.2.m2.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.p2.2.m2.1a"><msub id="S3.SS2.p2.2.m2.1.1" xref="S3.SS2.p2.2.m2.1.1.cmml"><mi id="S3.SS2.p2.2.m2.1.1.2" xref="S3.SS2.p2.2.m2.1.1.2.cmml">D</mi><mi id="S3.SS2.p2.2.m2.1.1.3" xref="S3.SS2.p2.2.m2.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.2.m2.1b"><apply id="S3.SS2.p2.2.m2.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.1.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1">subscript</csymbol><ci id="S3.SS2.p2.2.m2.1.1.2.cmml" xref="S3.SS2.p2.2.m2.1.1.2">𝐷</ci><ci id="S3.SS2.p2.2.m2.1.1.3.cmml" xref="S3.SS2.p2.2.m2.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.2.m2.1c">D_{R}</annotation></semantics></math> to create our resulting synthetic training dataset <math id="S3.SS2.p2.3.m3.1" class="ltx_Math" alttext="D^{\prime}" display="inline"><semantics id="S3.SS2.p2.3.m3.1a"><msup id="S3.SS2.p2.3.m3.1.1" xref="S3.SS2.p2.3.m3.1.1.cmml"><mi id="S3.SS2.p2.3.m3.1.1.2" xref="S3.SS2.p2.3.m3.1.1.2.cmml">D</mi><mo id="S3.SS2.p2.3.m3.1.1.3" xref="S3.SS2.p2.3.m3.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.3.m3.1b"><apply id="S3.SS2.p2.3.m3.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.3.m3.1.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1">superscript</csymbol><ci id="S3.SS2.p2.3.m3.1.1.2.cmml" xref="S3.SS2.p2.3.m3.1.1.2">𝐷</ci><ci id="S3.SS2.p2.3.m3.1.1.3.cmml" xref="S3.SS2.p2.3.m3.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.3.m3.1c">D^{\prime}</annotation></semantics></math>.</p>
</div>
<div id="S3.SS2.p3" class="ltx_para">
<p id="S3.SS2.p3.4" class="ltx_p">Empirically, we notice that the Planning Module is more effective when given descriptions of the source dataset (<math id="S3.SS2.p3.1.m1.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.p3.1.m1.1a"><msub id="S3.SS2.p3.1.m1.1.1" xref="S3.SS2.p3.1.m1.1.1.cmml"><mi id="S3.SS2.p3.1.m1.1.1.2" xref="S3.SS2.p3.1.m1.1.1.2.cmml">D</mi><mi id="S3.SS2.p3.1.m1.1.1.3" xref="S3.SS2.p3.1.m1.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.1.m1.1b"><apply id="S3.SS2.p3.1.m1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.1.m1.1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p3.1.m1.1.1.2.cmml" xref="S3.SS2.p3.1.m1.1.1.2">𝐷</ci><ci id="S3.SS2.p3.1.m1.1.1.3.cmml" xref="S3.SS2.p3.1.m1.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.1.m1.1c">D_{R}</annotation></semantics></math>) and target task (<math id="S3.SS2.p3.2.m2.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S3.SS2.p3.2.m2.1a"><mi id="S3.SS2.p3.2.m2.1.1" xref="S3.SS2.p3.2.m2.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.2.m2.1b"><ci id="S3.SS2.p3.2.m2.1.1.cmml" xref="S3.SS2.p3.2.m2.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.2.m2.1c">T</annotation></semantics></math>) that are detailed and specific.
As such, we further implement two more scaffolding modules — a <em id="S3.SS2.p3.4.1" class="ltx_emph ltx_font_italic">Schema Selector</em> that removes irrelevant columns from dataset <math id="S3.SS2.p3.3.m3.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.p3.3.m3.1a"><msub id="S3.SS2.p3.3.m3.1.1" xref="S3.SS2.p3.3.m3.1.1.cmml"><mi id="S3.SS2.p3.3.m3.1.1.2" xref="S3.SS2.p3.3.m3.1.1.2.cmml">D</mi><mi id="S3.SS2.p3.3.m3.1.1.3" xref="S3.SS2.p3.3.m3.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.3.m3.1b"><apply id="S3.SS2.p3.3.m3.1.1.cmml" xref="S3.SS2.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.3.m3.1.1.1.cmml" xref="S3.SS2.p3.3.m3.1.1">subscript</csymbol><ci id="S3.SS2.p3.3.m3.1.1.2.cmml" xref="S3.SS2.p3.3.m3.1.1.2">𝐷</ci><ci id="S3.SS2.p3.3.m3.1.1.3.cmml" xref="S3.SS2.p3.3.m3.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.3.m3.1c">D_{R}</annotation></semantics></math> (providing a clearer source description) and a <em id="S3.SS2.p3.4.2" class="ltx_emph ltx_font_italic">Task Expansion Module</em> that enriches task descriptions <math id="S3.SS2.p3.4.m4.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S3.SS2.p3.4.m4.1a"><mi id="S3.SS2.p3.4.m4.1.1" xref="S3.SS2.p3.4.m4.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.4.m4.1b"><ci id="S3.SS2.p3.4.m4.1.1.cmml" xref="S3.SS2.p3.4.m4.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.4.m4.1c">T</annotation></semantics></math> with requirements (giving a better target specification).</p>
</div>
<div id="S3.SS2.p4" class="ltx_para">
<p id="S3.SS2.p4.1" class="ltx_p">Below, we describe the four modules in their execution sequence (examples in <a href="#S2.F2" title="Figure 2 ‣ 2 Problem Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 2</span></a>).</p>
</div>
<section id="S3.SS2.SSS0.Px1" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Task Expansion</h4>

<div id="S3.SS2.SSS0.Px1.p1" class="ltx_para">
<p id="S3.SS2.SSS0.Px1.p1.1" class="ltx_p">The brevity of task descriptions often hampers the creation of an effective plan, and often the subtleties of the task are more readily grasped through the examination of examples.<span id="footnote4" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_tag ltx_tag_note">4</span>This is akin to requirement elicitation in Software Engineering, where a deeper understanding of requirements is achieved through further analysis <cite class="ltx_cite ltx_citemacro_cite">Lamsweerde (<a href="#bib.bib7" title="" class="ltx_ref">2009</a>)</cite>.</span></span></span> To address this issue, we implemented an intermediate step wherein the LLM is utilized to scrutinize both the task description and provided examples and generate an expanded version of the task description. This enhanced task specification helps in devising a more detailed and actionable plan, encompassing more explicit steps tailored to the task at hand. The task expansion prompt is linked in the Appendix <a href="#A1.SS6" title="A.6 Difficulty estimation prompt: Code Line Descriptions example ‣ Appendix A Example Appendix ‣ Ethical Considerations ‣ Limitations ‣ 6 Conclusion and Future Work ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">A.6</span></a>.</p>
</div>
</section>
<section id="S3.SS2.SSS0.Px2" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Schema Selection</h4>

<div id="S3.SS2.SSS0.Px2.p1" class="ltx_para">
<p id="S3.SS2.SSS0.Px2.p1.6" class="ltx_p">The schema selection component is designed by instructing LLMs to identify the most pertinent columns within a dataset for a given task. For example, for the task of code comment generation, where we have a dataset of internet code, the <span id="S3.SS2.SSS0.Px2.p1.6.1" class="ltx_text ltx_font_italic">code snippet</span> column is extremely useful, whereas the <span id="S3.SS2.SSS0.Px2.p1.6.2" class="ltx_text ltx_font_italic">URL</span> column code would not be useful. To identify these relevant columns, we provide the LLM with detailed information, including the task description <math id="S3.SS2.SSS0.Px2.p1.1.m1.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S3.SS2.SSS0.Px2.p1.1.m1.1a"><mi id="S3.SS2.SSS0.Px2.p1.1.m1.1.1" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.1.m1.1b"><ci id="S3.SS2.SSS0.Px2.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.1.m1.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.1.m1.1c">T</annotation></semantics></math>, the chosen dataset <math id="S3.SS2.SSS0.Px2.p1.2.m2.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.SSS0.Px2.p1.2.m2.1a"><msub id="S3.SS2.SSS0.Px2.p1.2.m2.1.1" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.cmml"><mi id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.2" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.2.cmml">D</mi><mi id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.3" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.2.m2.1b"><apply id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.2.cmml" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.2">𝐷</ci><ci id="S3.SS2.SSS0.Px2.p1.2.m2.1.1.3.cmml" xref="S3.SS2.SSS0.Px2.p1.2.m2.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.2.m2.1c">D_{R}</annotation></semantics></math>, the names of existing columns in <math id="S3.SS2.SSS0.Px2.p1.3.m3.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.SSS0.Px2.p1.3.m3.1a"><msub id="S3.SS2.SSS0.Px2.p1.3.m3.1.1" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.cmml"><mi id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.2" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.2.cmml">D</mi><mi id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.3" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.3.m3.1b"><apply id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.2.cmml" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.2">𝐷</ci><ci id="S3.SS2.SSS0.Px2.p1.3.m3.1.1.3.cmml" xref="S3.SS2.SSS0.Px2.p1.3.m3.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.3.m3.1c">D_{R}</annotation></semantics></math>, and samples of dataset rows from <math id="S3.SS2.SSS0.Px2.p1.4.m4.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.SSS0.Px2.p1.4.m4.1a"><msub id="S3.SS2.SSS0.Px2.p1.4.m4.1.1" xref="S3.SS2.SSS0.Px2.p1.4.m4.1.1.cmml"><mi id="S3.SS2.SSS0.Px2.p1.4.m4.1.1.2" xref="S3.SS2.SSS0.Px2.p1.4.m4.1.1.2.cmml">D</mi><mi id="S3.SS2.SSS0.Px2.p1.4.m4.1.1.3" xref="S3.SS2.SSS0.Px2.p1.4.m4.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.4.m4.1b"><apply id="S3.SS2.SSS0.Px2.p1.4.m4.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px2.p1.4.m4.1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px2.p1.4.m4.1.1.2.cmml" xref="S3.SS2.SSS0.Px2.p1.4.m4.1.1.2">𝐷</ci><ci id="S3.SS2.SSS0.Px2.p1.4.m4.1.1.3.cmml" xref="S3.SS2.SSS0.Px2.p1.4.m4.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.4.m4.1c">D_{R}</annotation></semantics></math>. The LLM is then tasked with identifying which columns are relevant to the specific task <math id="S3.SS2.SSS0.Px2.p1.5.m5.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S3.SS2.SSS0.Px2.p1.5.m5.1a"><mi id="S3.SS2.SSS0.Px2.p1.5.m5.1.1" xref="S3.SS2.SSS0.Px2.p1.5.m5.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.5.m5.1b"><ci id="S3.SS2.SSS0.Px2.p1.5.m5.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.5.m5.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.5.m5.1c">T</annotation></semantics></math>. This approach ensures a targeted selection of dataset features that are directly applicable to the task requirements, optimizing the dataset <math id="S3.SS2.SSS0.Px2.p1.6.m6.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.SSS0.Px2.p1.6.m6.1a"><msub id="S3.SS2.SSS0.Px2.p1.6.m6.1.1" xref="S3.SS2.SSS0.Px2.p1.6.m6.1.1.cmml"><mi id="S3.SS2.SSS0.Px2.p1.6.m6.1.1.2" xref="S3.SS2.SSS0.Px2.p1.6.m6.1.1.2.cmml">D</mi><mi id="S3.SS2.SSS0.Px2.p1.6.m6.1.1.3" xref="S3.SS2.SSS0.Px2.p1.6.m6.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px2.p1.6.m6.1b"><apply id="S3.SS2.SSS0.Px2.p1.6.m6.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px2.p1.6.m6.1.1.1.cmml" xref="S3.SS2.SSS0.Px2.p1.6.m6.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px2.p1.6.m6.1.1.2.cmml" xref="S3.SS2.SSS0.Px2.p1.6.m6.1.1.2">𝐷</ci><ci id="S3.SS2.SSS0.Px2.p1.6.m6.1.1.3.cmml" xref="S3.SS2.SSS0.Px2.p1.6.m6.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px2.p1.6.m6.1c">D_{R}</annotation></semantics></math> for the intended application. The schema selection prompt is linked in the Appendix <a href="#A1.SS2" title="A.2 Schema Selection Prompt ‣ Appendix A Example Appendix ‣ Ethical Considerations ‣ Limitations ‣ 6 Conclusion and Future Work ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">A.2</span></a>.</p>
</div>
</section>
<section id="S3.SS2.SSS0.Px3" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Planning Module</h4>

<div id="S3.SS2.SSS0.Px3.p1" class="ltx_para">
<p id="S3.SS2.SSS0.Px3.p1.1" class="ltx_p">Now, the LLM generates a comprehensive plan to adapt each data point from the retrieved dataset <math id="S3.SS2.SSS0.Px3.p1.1.m1.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.SSS0.Px3.p1.1.m1.1a"><msub id="S3.SS2.SSS0.Px3.p1.1.m1.1.1" xref="S3.SS2.SSS0.Px3.p1.1.m1.1.1.cmml"><mi id="S3.SS2.SSS0.Px3.p1.1.m1.1.1.2" xref="S3.SS2.SSS0.Px3.p1.1.m1.1.1.2.cmml">D</mi><mi id="S3.SS2.SSS0.Px3.p1.1.m1.1.1.3" xref="S3.SS2.SSS0.Px3.p1.1.m1.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px3.p1.1.m1.1b"><apply id="S3.SS2.SSS0.Px3.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS0.Px3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px3.p1.1.m1.1.1.1.cmml" xref="S3.SS2.SSS0.Px3.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px3.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS0.Px3.p1.1.m1.1.1.2">𝐷</ci><ci id="S3.SS2.SSS0.Px3.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS0.Px3.p1.1.m1.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px3.p1.1.m1.1c">D_{R}</annotation></semantics></math> to the task requirements. This plan is a series of concrete, concise steps. These steps may include combining data fields, elaborating on existing fields, or creating new fields derived from the existing data or excluding the data sample altogether if it is irrelevant. The LLM is provided with the expanded task description, along with the optimized dataset, complete with its description and sample rows. A sample plan is shown in <a href="#S3.F3" title="Figure 3 ‣ 3.1 Dataset Retrieval ‣ 3 Methods ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 3</span></a>.
We are only required to create a plan once per task, since the same task-level plan will get executed for each row of the retrieved dataset. The planning module prompt is linked in the Appendix <a href="#A1.SS3" title="A.3 Planning Module Prompt ‣ Appendix A Example Appendix ‣ Ethical Considerations ‣ Limitations ‣ 6 Conclusion and Future Work ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">A.3</span></a>.</p>
</div>
<figure id="S3.T1" class="ltx_table">
<div id="S3.T1.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:433.6pt;height:85.2pt;vertical-align:-0.7pt;"><span class="ltx_transformed_inner" style="transform:translate(-106.4pt,20.7pt) scale(0.670775769333193,0.670775769333193) ;">
<table id="S3.T1.1.1" class="ltx_tabular ltx_align_middle">
<tr id="S3.T1.1.1.1" class="ltx_tr">
<td id="S3.T1.1.1.1.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt"><span id="S3.T1.1.1.1.1.1" class="ltx_text ltx_font_bold">Task Name</span></td>
<td id="S3.T1.1.1.1.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt"><span id="S3.T1.1.1.1.2.1" class="ltx_text ltx_font_bold">Task Category</span></td>
<td id="S3.T1.1.1.1.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt"><span id="S3.T1.1.1.1.3.1" class="ltx_text ltx_font_bold">Abbreviation</span></td>
<td id="S3.T1.1.1.1.4" class="ltx_td ltx_align_left ltx_border_tt"><span id="S3.T1.1.1.1.4.1" class="ltx_text ltx_font_bold">Task Instruction</span></td>
</tr>
<tr id="S3.T1.1.1.2" class="ltx_tr">
<td id="S3.T1.1.1.2.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Temporal Sequences</td>
<td id="S3.T1.1.1.2.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Logical Reasoning</td>
<td id="S3.T1.1.1.2.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Time</td>
<td id="S3.T1.1.1.2.4" class="ltx_td ltx_align_left ltx_border_t">Answer questions about which times certain events could have occurred.</td>
</tr>
<tr id="S3.T1.1.1.3" class="ltx_tr">
<td id="S3.T1.1.1.3.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Code Line Descriptions</td>
<td id="S3.T1.1.1.3.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Coding</td>
<td id="S3.T1.1.1.3.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Code</td>
<td id="S3.T1.1.1.3.4" class="ltx_td ltx_align_left ltx_border_t">Give an English language description of Python code.</td>
</tr>
<tr id="S3.T1.1.1.4" class="ltx_tr">
<td id="S3.T1.1.1.4.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Elementary Math</td>
<td id="S3.T1.1.1.4.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Math</td>
<td id="S3.T1.1.1.4.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Math</td>
<td id="S3.T1.1.1.4.4" class="ltx_td ltx_align_left ltx_border_t">Answer a multiple choice mathematical word problem.</td>
</tr>
<tr id="S3.T1.1.1.5" class="ltx_tr">
<td id="S3.T1.1.1.5.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Cause and Effect</td>
<td id="S3.T1.1.1.5.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Causal Reasoning</td>
<td id="S3.T1.1.1.5.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">C&amp;E</td>
<td id="S3.T1.1.1.5.4" class="ltx_td ltx_align_left ltx_border_t">Answer multiple-choice questions distinguishing cause and effect.</td>
</tr>
<tr id="S3.T1.1.1.6" class="ltx_tr">
<td id="S3.T1.1.1.6.1" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Medical Questions in Russian</td>
<td id="S3.T1.1.1.6.2" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Domain Specific</td>
<td id="S3.T1.1.1.6.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Russian</td>
<td id="S3.T1.1.1.6.4" class="ltx_td ltx_align_left ltx_border_t">Answer a yes/no question about medical text in Russian.</td>
</tr>
<tr id="S3.T1.1.1.7" class="ltx_tr">
<td id="S3.T1.1.1.7.1" class="ltx_td ltx_align_left ltx_border_bb ltx_border_r ltx_border_t">Implicatures</td>
<td id="S3.T1.1.1.7.2" class="ltx_td ltx_align_left ltx_border_bb ltx_border_r ltx_border_t">Contextual QA</td>
<td id="S3.T1.1.1.7.3" class="ltx_td ltx_align_left ltx_border_bb ltx_border_r ltx_border_t">Impl.</td>
<td id="S3.T1.1.1.7.4" class="ltx_td ltx_align_left ltx_border_bb ltx_border_t">Predict whether Speaker 2’s answer to Speaker 1 is affirmative or negative.</td>
</tr>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>We evaluate our method on 6 diverse text-based tasks from BIG-Bench.</figcaption>
</figure>
</section>
<section id="S3.SS2.SSS0.Px4" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Execution Module</h4>

<div id="S3.SS2.SSS0.Px4.p1" class="ltx_para">
<p id="S3.SS2.SSS0.Px4.p1.2" class="ltx_p">The execution of the transformation plan for each dataset sample from <math id="S3.SS2.SSS0.Px4.p1.1.m1.1" class="ltx_Math" alttext="D_{R}" display="inline"><semantics id="S3.SS2.SSS0.Px4.p1.1.m1.1a"><msub id="S3.SS2.SSS0.Px4.p1.1.m1.1.1" xref="S3.SS2.SSS0.Px4.p1.1.m1.1.1.cmml"><mi id="S3.SS2.SSS0.Px4.p1.1.m1.1.1.2" xref="S3.SS2.SSS0.Px4.p1.1.m1.1.1.2.cmml">D</mi><mi id="S3.SS2.SSS0.Px4.p1.1.m1.1.1.3" xref="S3.SS2.SSS0.Px4.p1.1.m1.1.1.3.cmml">R</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px4.p1.1.m1.1b"><apply id="S3.SS2.SSS0.Px4.p1.1.m1.1.1.cmml" xref="S3.SS2.SSS0.Px4.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px4.p1.1.m1.1.1.1.cmml" xref="S3.SS2.SSS0.Px4.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.SSS0.Px4.p1.1.m1.1.1.2.cmml" xref="S3.SS2.SSS0.Px4.p1.1.m1.1.1.2">𝐷</ci><ci id="S3.SS2.SSS0.Px4.p1.1.m1.1.1.3.cmml" xref="S3.SS2.SSS0.Px4.p1.1.m1.1.1.3">𝑅</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px4.p1.1.m1.1c">D_{R}</annotation></semantics></math> is done using an LLM. The LLM receives three key pieces of information for each row of the dataset: the row itself, detailed specifications of the input task, and the transformation plan formulated earlier. Conditioned on these pieces of information, the model responds by producing an adjusted dataset row which, hopefully, meets the requirements of the input task. The execution module prompt is linked in Appendix <a href="#A1.SS4" title="A.4 Execution Module Prompt ‣ Appendix A Example Appendix ‣ Ethical Considerations ‣ Limitations ‣ 6 Conclusion and Future Work ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">A.4</span></a>. The adjusted dataset rows form our synthetic dataset <math id="S3.SS2.SSS0.Px4.p1.2.m2.1" class="ltx_Math" alttext="D^{\prime}" display="inline"><semantics id="S3.SS2.SSS0.Px4.p1.2.m2.1a"><msup id="S3.SS2.SSS0.Px4.p1.2.m2.1.1" xref="S3.SS2.SSS0.Px4.p1.2.m2.1.1.cmml"><mi id="S3.SS2.SSS0.Px4.p1.2.m2.1.1.2" xref="S3.SS2.SSS0.Px4.p1.2.m2.1.1.2.cmml">D</mi><mo id="S3.SS2.SSS0.Px4.p1.2.m2.1.1.3" xref="S3.SS2.SSS0.Px4.p1.2.m2.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.SSS0.Px4.p1.2.m2.1b"><apply id="S3.SS2.SSS0.Px4.p1.2.m2.1.1.cmml" xref="S3.SS2.SSS0.Px4.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.SSS0.Px4.p1.2.m2.1.1.1.cmml" xref="S3.SS2.SSS0.Px4.p1.2.m2.1.1">superscript</csymbol><ci id="S3.SS2.SSS0.Px4.p1.2.m2.1.1.2.cmml" xref="S3.SS2.SSS0.Px4.p1.2.m2.1.1.2">𝐷</ci><ci id="S3.SS2.SSS0.Px4.p1.2.m2.1.1.3.cmml" xref="S3.SS2.SSS0.Px4.p1.2.m2.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.SSS0.Px4.p1.2.m2.1c">D^{\prime}</annotation></semantics></math> used for fine-tuning.</p>
</div>
</section>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Using Multiple Datasets</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.1" class="ltx_p">The transformation process of data points may result in a significant number of them getting filtered out. Additionally many datasets may be small to begin with. Both these factors can result in a reduced quantity of transformed data.
To balance quantity and quality, we adopt a strategy of transforming multiple highly ranked datasets until we reach our desired dataset set.
Furthermore, if a considerable proportion of data sample transformations fail (e.g. noisy data samples in the dataset) for a specific dataset, we opt to exclude it from consideration.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experimental Setup</h2>

<section id="S4.SS0.SSS0.Px1" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Evaluation procedure</h4>

<div id="S4.SS0.SSS0.Px1.p1" class="ltx_para">
<p id="S4.SS0.SSS0.Px1.p1.1" class="ltx_p">We evaluate DataTune and related baselines over 6 tasks from the BIG-Bench benchmark <cite class="ltx_cite ltx_citemacro_cite">BIG Bench Authors (<a href="#bib.bib1" title="" class="ltx_ref">2023</a>)</cite>, which we list in <a href="#S3.T1" title="Table 1 ‣ Planning Module ‣ 3.2 Dataset Transformation ‣ 3 Methods ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 1</span></a>. BIG-Bench focuses on tasks believed to be beyond the capabilities of current language models, covering a variety of task categories. We choose tasks spanning logical reasoning, coding, math, causal reasoning, multilinguality, and domain specific tasks. For each task, we create 3000 data points through DataTune, and apply the training procedure highlighted earlier. We evaluate all models for two-shot performance, as per the BIG-Bench testing suite.<span id="footnote5" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_tag ltx_tag_note">5</span><a target="_blank" href="https://github.com/google/BIG-bench" title="" class="ltx_ref ltx_href">https://github.com/google/BIG-bench</a></span></span></span>
<br class="ltx_break"></p>
</div>
</section>
<section id="S4.SS0.SSS0.Px2" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Methods</h4>

<div id="S4.SS0.SSS0.Px2.p1" class="ltx_para">
<p id="S4.SS0.SSS0.Px2.p1.1" class="ltx_p">We compare the effectiveness of various <span id="S4.SS0.SSS0.Px2.p1.1.1" class="ltx_text ltx_font_bold">dataset collection</span> strategies, by using the resulting data to finetune the same base model, Mistral-7B <cite class="ltx_cite ltx_citemacro_cite">Jiang et al. (<a href="#bib.bib6" title="" class="ltx_ref">2023</a>)</cite>, a leading open-source LLM within its size category. As shown in <span id="S4.SS0.SSS0.Px2.p1.1.2" class="ltx_ERROR undefined">\swedit</span><a href="#S4.SS0.SSS0.Px5" title="Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">section 4</span></a>, this includes:
(1) retrieving existing data using dense retrieval <cite class="ltx_cite ltx_citemacro_cite">Viswanathan et al. (<a href="#bib.bib20" title="" class="ltx_ref">2023a</a>)</cite>, (2) generating synthetic data, (3) Prompt2Model <cite class="ltx_cite ltx_citemacro_cite">Viswanathan et al. (<a href="#bib.bib21" title="" class="ltx_ref">2023b</a>)</cite> (a state-of-the-art method that combines retrieving existing data and synthetic data generation), (4) our DataTune approach, and (5) a combination of DataTune and synthetic data generation, which represents an integration of all the existing methods.</p>
</div>
<div id="S4.SS0.SSS0.Px2.p2" class="ltx_para">
<p id="S4.SS0.SSS0.Px2.p2.1" class="ltx_p">We also include two <span id="S4.SS0.SSS0.Px2.p2.1.1" class="ltx_text ltx_font_bold">prompting</span> baselines: (6)
few-shot prompting on the base model Mistral-7B, and (7) <span id="S4.SS0.SSS0.Px2.p2.1.2" class="ltx_text ltx_font_typewriter">GPT-3.5-Turbo</span>, a significantly larger model, which we include as a robust benchmark due to its extensive capabilities.</p>
</div>
</section>
<section id="S4.SS0.SSS0.Px3" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Dataset Creation Setup</h4>

<div id="S4.SS0.SSS0.Px3.p1" class="ltx_para">
<p id="S4.SS0.SSS0.Px3.p1.1" class="ltx_p">Our initial retrieval step using DataFinder retrieves 25 candidate datasets that are processed for reranking. We transform upto 4 datasets per task until we meet our desired set of 3000 data points. The LLM used for all components is GPT-4-Turbo, except for the final execution step, which uses GPT 3.5-Turbo.<span id="footnote6" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">6</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">6</sup><span class="ltx_tag ltx_tag_note">6</span>Our dataset transformation method requires making an LLM query for each instance in the dataset. Therefore, the decision to use GPT-3.5-turbo was made for budgetary reasons.</span></span></span></p>
</div>
</section>
<section id="S4.SS0.SSS0.Px4" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Training Setup</h4>

<div id="S4.SS0.SSS0.Px4.p1" class="ltx_para">
<p id="S4.SS0.SSS0.Px4.p1.4" class="ltx_p">We used the Mistral-7B model, following the approach of <cite class="ltx_cite ltx_citemacro_citet">Jiang et al. (<a href="#bib.bib6" title="" class="ltx_ref">2023</a>)</cite>, and applied the QLoRA technique from <cite class="ltx_cite ltx_citemacro_citet">Dettmers et al. (<a href="#bib.bib3" title="" class="ltx_ref">2023</a>)</cite> for fine-tuning. The process was carried out over 3 epochs. We select parameters by running 4 runs across two sets of hyperparameters over two values( learning rate: <math id="S4.SS0.SSS0.Px4.p1.1.m1.1" class="ltx_Math" alttext="5e^{-5}" display="inline"><semantics id="S4.SS0.SSS0.Px4.p1.1.m1.1a"><mrow id="S4.SS0.SSS0.Px4.p1.1.m1.1.1" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.cmml"><mn id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.2" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.2.cmml">5</mn><mo lspace="0em" rspace="0em" id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.1" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.1.cmml">​</mo><msup id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.cmml"><mi id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.2" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.2.cmml">e</mi><mrow id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3.cmml"><mo id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3a" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3.cmml">−</mo><mn id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3.2" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3.2.cmml">5</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.1.m1.1b"><apply id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1"><times id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.1"></times><cn type="integer" id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.2.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.2">5</cn><apply id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.1.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3">superscript</csymbol><ci id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.2.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.2">𝑒</ci><apply id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3"><minus id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3.1.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3"></minus><cn type="integer" id="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3.2.cmml" xref="S4.SS0.SSS0.Px4.p1.1.m1.1.1.3.3.2">5</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.1.m1.1c">5e^{-5}</annotation></semantics></math> and <math id="S4.SS0.SSS0.Px4.p1.2.m2.1" class="ltx_Math" alttext="1e^{-4}" display="inline"><semantics id="S4.SS0.SSS0.Px4.p1.2.m2.1a"><mrow id="S4.SS0.SSS0.Px4.p1.2.m2.1.1" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.cmml"><mn id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.2" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.2.cmml">1</mn><mo lspace="0em" rspace="0em" id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.1" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.1.cmml">​</mo><msup id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.cmml"><mi id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.2" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.2.cmml">e</mi><mrow id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3.cmml"><mo id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3a" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3.cmml">−</mo><mn id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3.2" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3.2.cmml">4</mn></mrow></msup></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.2.m2.1b"><apply id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1"><times id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.1"></times><cn type="integer" id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.2.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.2">1</cn><apply id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.1.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3">superscript</csymbol><ci id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.2.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.2">𝑒</ci><apply id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3"><minus id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3.1.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3"></minus><cn type="integer" id="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3.2.cmml" xref="S4.SS0.SSS0.Px4.p1.2.m2.1.1.3.3.2">4</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.2.m2.1c">1e^{-4}</annotation></semantics></math>, and QLoRA’s <math id="S4.SS0.SSS0.Px4.p1.3.m3.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS0.SSS0.Px4.p1.3.m3.1a"><mi id="S4.SS0.SSS0.Px4.p1.3.m3.1.1" xref="S4.SS0.SSS0.Px4.p1.3.m3.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.3.m3.1b"><ci id="S4.SS0.SSS0.Px4.p1.3.m3.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.3.m3.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.3.m3.1c">\alpha</annotation></semantics></math> parameter between 16 and 24 and choose the run with the lowest validation loss at any point. We used the AdamW optimizer <cite class="ltx_cite ltx_citemacro_cite">Loshchilov and Hutter (<a href="#bib.bib10" title="" class="ltx_ref">2017</a>)</cite> and set QLoRA <math id="S4.SS0.SSS0.Px4.p1.4.m4.1" class="ltx_Math" alttext="r=8" display="inline"><semantics id="S4.SS0.SSS0.Px4.p1.4.m4.1a"><mrow id="S4.SS0.SSS0.Px4.p1.4.m4.1.1" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1.cmml"><mi id="S4.SS0.SSS0.Px4.p1.4.m4.1.1.2" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1.2.cmml">r</mi><mo id="S4.SS0.SSS0.Px4.p1.4.m4.1.1.1" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1.1.cmml">=</mo><mn id="S4.SS0.SSS0.Px4.p1.4.m4.1.1.3" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1.3.cmml">8</mn></mrow><annotation-xml encoding="MathML-Content" id="S4.SS0.SSS0.Px4.p1.4.m4.1b"><apply id="S4.SS0.SSS0.Px4.p1.4.m4.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1"><eq id="S4.SS0.SSS0.Px4.p1.4.m4.1.1.1.cmml" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1.1"></eq><ci id="S4.SS0.SSS0.Px4.p1.4.m4.1.1.2.cmml" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1.2">𝑟</ci><cn type="integer" id="S4.SS0.SSS0.Px4.p1.4.m4.1.1.3.cmml" xref="S4.SS0.SSS0.Px4.p1.4.m4.1.1.3">8</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS0.SSS0.Px4.p1.4.m4.1c">r=8</annotation></semantics></math>. We conduct our training on 2 NVIDIA RTX A6000 GPUs.
<br class="ltx_break"></p>
</div>
</section>
<section id="S4.SS0.SSS0.Px5" class="ltx_paragraph">
<h4 class="ltx_title ltx_title_paragraph">Metrics</h4>

<div id="S4.SS0.SSS0.Px5.p1" class="ltx_para">
<p id="S4.SS0.SSS0.Px5.p1.1" class="ltx_p">Following <cite class="ltx_cite ltx_citemacro_citet">BIG Bench Authors (<a href="#bib.bib1" title="" class="ltx_ref">2023</a>)</cite>, we use a <span id="S4.SS0.SSS0.Px5.p1.1.1" class="ltx_text ltx_font_italic">normalized aggregate score</span> evaluation that normalizes a multiple choice grade score, such that a score of 0 implies random chance performance, and 100 implies human expert performance. Additionally, a score less than 0 indicates performance worse than random chance.</p>
</div>
<figure id="S4.SS0.SSS0.Px5.tab1" class="ltx_table">
<div class="ltx_flex_figure ltx_flex_table">
<div class="ltx_flex_cell ltx_flex_size_1">
<div id="S4.SS0.SSS0.Px5.tab1.1" class="ltx_inline-block ltx_figure_panel ltx_transformed_outer" style="width:433.6pt;height:149.6pt;vertical-align:-0.8pt;"><span class="ltx_transformed_inner" style="transform:translate(-71.8pt,24.6pt) scale(0.751281773934143,0.751281773934143) ;">
<table id="S4.SS0.SSS0.Px5.tab1.1.1" class="ltx_tabular ltx_align_middle">
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.1" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.1.1" class="ltx_td ltx_border_tt"></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.1.2" class="ltx_td ltx_align_center ltx_border_tt"><span id="S4.SS0.SSS0.Px5.tab1.1.1.1.2.1" class="ltx_text ltx_font_bold">Method</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.1.3" class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_tt" colspan="2"><span id="S4.SS0.SSS0.Px5.tab1.1.1.1.3.1" class="ltx_text ltx_font_bold">Steps</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.1.4" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt" rowspan="2">
<span id="S4.SS0.SSS0.Px5.tab1.1.1.1.4.1" class="ltx_text ltx_font_bold"># Train.</span><span id="S4.SS0.SSS0.Px5.tab1.1.1.1.4.2" class="ltx_text ltx_font_bold">
Points</span>
</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.1.5" class="ltx_td ltx_align_center ltx_border_tt" colspan="7"><span id="S4.SS0.SSS0.Px5.tab1.1.1.1.5.1" class="ltx_text ltx_font_bold">Tasks</span></td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.2" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.1" class="ltx_td ltx_border_r" colspan="2"></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.2" class="ltx_td ltx_align_left ltx_border_t">Retrieval Type</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.3" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Generation</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.4" class="ltx_td ltx_align_right ltx_border_t">Time</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.5" class="ltx_td ltx_align_right ltx_border_t">Code</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.6" class="ltx_td ltx_align_right ltx_border_t">Math</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.7" class="ltx_td ltx_align_right ltx_border_t">C&amp;E</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.8" class="ltx_td ltx_align_right ltx_border_t">Russn.</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.9" class="ltx_td ltx_align_right ltx_border_r ltx_border_t">Impl.</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.2.10" class="ltx_td ltx_align_right ltx_border_t"><span id="S4.SS0.SSS0.Px5.tab1.1.1.2.10.1" class="ltx_text ltx_font_bold">Avg.</span></td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.3" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.3.1" class="ltx_td ltx_border_t"></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.3.2" class="ltx_td ltx_align_center ltx_border_t" colspan="3"><span id="S4.SS0.SSS0.Px5.tab1.1.1.3.2.1" class="ltx_text ltx_font_bold">Few-Shot Baselines</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.3.3" class="ltx_td ltx_border_t" colspan="7"></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.3.4" class="ltx_td ltx_border_t"></td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.4" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.1" class="ltx_td" rowspan="2"></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.2" class="ltx_td ltx_align_right ltx_border_r">GPT-3.5</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.3" class="ltx_td ltx_align_left">-</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.4" class="ltx_td ltx_align_left ltx_border_r">-</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.5" class="ltx_td ltx_align_left ltx_border_r">0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.6" class="ltx_td ltx_align_right">50.6</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.7" class="ltx_td ltx_align_right">75.6</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.8" class="ltx_td ltx_align_right">30.4</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.9" class="ltx_td ltx_align_right">96.7</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.10" class="ltx_td ltx_align_right">90.6</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.11" class="ltx_td ltx_align_right ltx_border_r">64.2</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.4.12" class="ltx_td ltx_align_right">68.0</td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.5" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.1" class="ltx_td ltx_align_right ltx_border_r">Mistral-7B</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.2" class="ltx_td ltx_align_left">-</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.3" class="ltx_td ltx_align_left ltx_border_r">-</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.4" class="ltx_td ltx_align_left ltx_border_r">0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.5" class="ltx_td ltx_align_right">-2.5</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.6" class="ltx_td ltx_align_right">62.3</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.7" class="ltx_td ltx_align_right">2.9</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.8" class="ltx_td ltx_align_right">37.2</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.9" class="ltx_td ltx_align_right">39.8</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.10" class="ltx_td ltx_align_right ltx_border_r">39.0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.5.11" class="ltx_td ltx_align_right">29.8</td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.6" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.6.1" class="ltx_td ltx_align_center ltx_border_bb ltx_border_t" rowspan="6"><span id="S4.SS0.SSS0.Px5.tab1.1.1.6.1.1" class="ltx_text">
<span id="S4.SS0.SSS0.Px5.tab1.1.1.6.1.1.1" class="ltx_inline-block ltx_transformed_outer" style="width:7.8pt;height:54.7pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="width:54.7pt;transform:translate(-23.44pt,-23.03pt) rotate(-90deg) ;">
<span id="S4.SS0.SSS0.Px5.tab1.1.1.6.1.1.1.1" class="ltx_p">Mistral-7B+</span>
</span></span></span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.6.2" class="ltx_td ltx_align_center ltx_border_t" colspan="3"><span id="S4.SS0.SSS0.Px5.tab1.1.1.6.2.1" class="ltx_text ltx_font_bold">Synthetic Finetuning Baselines</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.6.3" class="ltx_td ltx_border_t" colspan="7"></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.6.4" class="ltx_td ltx_border_t"></td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.7" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.1" class="ltx_td ltx_align_right ltx_border_r">Existing data</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.2" class="ltx_td ltx_align_left">Dense</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.3" class="ltx_td ltx_align_left ltx_border_r">-</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.4" class="ltx_td ltx_align_left ltx_border_r">3000</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.5" class="ltx_td ltx_align_right">-4.7</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.6" class="ltx_td ltx_align_right">62.3</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.7" class="ltx_td ltx_align_right">0.8</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.8" class="ltx_td ltx_align_right">52.9</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.9" class="ltx_td ltx_align_right">0.0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.10" class="ltx_td ltx_align_right ltx_border_r">39.9</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.7.11" class="ltx_td ltx_align_right">25.2</td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.8" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.1" class="ltx_td ltx_align_right ltx_border_r">Synthetic data</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.2" class="ltx_td ltx_align_left">-</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.3" class="ltx_td ltx_align_left ltx_border_r">Synthetic</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.4" class="ltx_td ltx_align_left ltx_border_r">3000</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.5" class="ltx_td ltx_align_right">2.0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.6" class="ltx_td ltx_align_right">60.8</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.7" class="ltx_td ltx_align_right">3.8</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.8" class="ltx_td ltx_align_right">37.2</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.9" class="ltx_td ltx_align_right">54.0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.10" class="ltx_td ltx_align_right ltx_border_r">41.9</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.8.11" class="ltx_td ltx_align_right">33.3</td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.9" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.1" class="ltx_td ltx_align_right ltx_border_r">DataTune (DT)</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.2" class="ltx_td ltx_align_left">+ Reranker</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.3" class="ltx_td ltx_align_left ltx_border_r">Transformed</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.4" class="ltx_td ltx_align_left ltx_border_r">3000</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.5" class="ltx_td ltx_align_right">-2.1</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.6" class="ltx_td ltx_align_right">71.2</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.7" class="ltx_td ltx_align_right">1.3</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.8" class="ltx_td ltx_align_right"><span id="S4.SS0.SSS0.Px5.tab1.1.1.9.8.1" class="ltx_text ltx_font_bold">56.9</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.9" class="ltx_td ltx_align_right">48.0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.10" class="ltx_td ltx_align_right ltx_border_r">41.9</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.9.11" class="ltx_td ltx_align_right">36.2</td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.10" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.1" class="ltx_td ltx_align_right ltx_border_r">Prompt2Model</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.2" class="ltx_td ltx_align_left">Dense</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.3" class="ltx_td ltx_align_left ltx_border_r">Synthetic</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.4" class="ltx_td ltx_align_left ltx_border_r">6000</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.5" class="ltx_td ltx_align_right">-2.0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.6" class="ltx_td ltx_align_right">73.4</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.7" class="ltx_td ltx_align_right">4.7</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.8" class="ltx_td ltx_align_right">33.8</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.9" class="ltx_td ltx_align_right"><span id="S4.SS0.SSS0.Px5.tab1.1.1.10.9.1" class="ltx_text ltx_font_bold">86.0</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.10" class="ltx_td ltx_align_right ltx_border_r">44.0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.10.11" class="ltx_td ltx_align_right">40.0</td>
</tr>
<tr id="S4.SS0.SSS0.Px5.tab1.1.1.11" class="ltx_tr">
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.1" class="ltx_td ltx_align_right ltx_border_bb ltx_border_r">DT+Synthetic</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.2" class="ltx_td ltx_align_left ltx_border_bb">+ Reranker</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.3" class="ltx_td ltx_align_left ltx_border_bb ltx_border_r">Both</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.4" class="ltx_td ltx_align_left ltx_border_bb ltx_border_r">6000</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.5" class="ltx_td ltx_align_right ltx_border_bb"><span id="S4.SS0.SSS0.Px5.tab1.1.1.11.5.1" class="ltx_text ltx_font_bold">16.9</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.6" class="ltx_td ltx_align_right ltx_border_bb"><span id="S4.SS0.SSS0.Px5.tab1.1.1.11.6.1" class="ltx_text ltx_font_bold">84.5</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.7" class="ltx_td ltx_align_right ltx_border_bb"><span id="S4.SS0.SSS0.Px5.tab1.1.1.11.7.1" class="ltx_text ltx_font_bold">8.1</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.8" class="ltx_td ltx_align_right ltx_border_bb">41.2</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.9" class="ltx_td ltx_align_right ltx_border_bb">68.0</td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.10" class="ltx_td ltx_align_right ltx_border_bb ltx_border_r"><span id="S4.SS0.SSS0.Px5.tab1.1.1.11.10.1" class="ltx_text ltx_font_bold">48.0</span></td>
<td id="S4.SS0.SSS0.Px5.tab1.1.1.11.11" class="ltx_td ltx_align_right ltx_border_bb"><span id="S4.SS0.SSS0.Px5.tab1.1.1.11.11.1" class="ltx_text ltx_font_bold">44.5</span></td>
</tr>
</table>
</span></div>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_table">Table 2: </span>We compare the performance of different few-shot learning methods across six BIG-Bench tasks. Here, we categorize each method by what base model is used (Mistral-7B or GPT-3.5-Turbo), whether data is retrieved (and, if so, whether a dense retriever or dense retriever + reranker is used), how the data points are generated (whether transformed from an existing dataset, generated synthetically, or both). “# Train. Points” refers to the number of training examples produced by the method for each task. Normalized aggregate scores below zero imply performance worse than chance. </figcaption><div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<section id="S5" class="ltx_section ltx_figure_panel">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Results and Analysis</h2>

<section id="S5.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.1 </span>Performance Comparison</h3>

<div id="S5.SS1.p1" class="ltx_para">
<p id="S5.SS1.p1.1" class="ltx_p"><em id="S5.SS1.p1.1.1" class="ltx_emph ltx_font_italic">DataTune consistently outperforms few-shot prompting, as well as existing individual data collection methods.</em>
From Table <a href="#S4.SS0.SSS0.Px5" title="Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a>, we see that fine-tuning our base model on DataTune outperforms the base Mistral-7B model by 6.4 points on average, improving over it in five out of six tasks.
We also show that DataTune provides an average improvement of 11 and 2.9 points over fine-tuning on existing data and synthetically generated data respectively.</p>
</div>
<div id="S5.SS1.p2" class="ltx_para">
<p id="S5.SS1.p2.1" class="ltx_p"><em id="S5.SS1.p2.1.1" class="ltx_emph ltx_font_italic">DataTune’s transformation is complementary to synthetic data generation.</em>
It is noteworthy that the combination of DataTune and synthetically generated data results in a marked performance increase. This synergistic improvement yields an overall average score of 44.5 on the BIG-Bench tasks we consider. We provide a more detailed analysis of the synergy between DataTune and existing synthetic dataset generation methods in Section <a href="#S5.SS5" title="5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.5</span></a>.</p>
</div>
<div id="S5.SS1.p3" class="ltx_para">
<p id="S5.SS1.p3.1" class="ltx_p"><em id="S5.SS1.p3.1.1" class="ltx_emph ltx_font_italic">Our system (DataTune + Synthetic Data Generation) outperforms SOTA baselines like Prompt2Model.</em>
In order to make a fair comparison with baselines such as Prompt2Model that fine-tune on both existing data and synthetically generated data, we define our system as the base Mistral-7B model fine-tuned on DataTune-created data and synthetically generated data.
Our analysis in Table <a href="#S4.SS0.SSS0.Px5" title="Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> highlights significant differences in performance between our system and Prompt2Model, with our system demonstrating a notable advantage over Prompt2Model five out of six tasks, with an average improvement of 8.3 points. These findings underscore the effectiveness of our system to create quality datasets for fine-tuning across a wide range of tasks and domains.</p>
</div>
</section>
<section id="S5.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.2 </span>DataTune Impact on Dataset Diversity</h3>

<div id="S5.SS2.p1" class="ltx_para">
<p id="S5.SS2.p1.1" class="ltx_p">Sampling diverse yet high-quality examples from a language model is a challenging task. Prior work has shown that the correctness of a synthetic dataset sampled from a language model is inversely correlated with its diversity <cite class="ltx_cite ltx_citemacro_citep">(Ye et al., <a href="#bib.bib28" title="" class="ltx_ref">2022</a>)</cite>. Generating synthetic data directly from a language model (using a method like Prompt2Model) often contains near-duplicate examples.</p>
</div>
<div id="S5.SS2.p2" class="ltx_para">
<p id="S5.SS2.p2.4" class="ltx_p">Does transforming existing datasets reduce the incidence of duplicate examples? Using ROUGE-L to determine lexical uniqueness <cite class="ltx_cite ltx_citemacro_citep">(Lin, <a href="#bib.bib9" title="" class="ltx_ref">2004</a>; Wang et al., <a href="#bib.bib25" title="" class="ltx_ref">2022</a>)</cite>, we determine a sentence <math id="S5.SS2.p2.1.m1.1" class="ltx_Math" alttext="s" display="inline"><semantics id="S5.SS2.p2.1.m1.1a"><mi id="S5.SS2.p2.1.m1.1.1" xref="S5.SS2.p2.1.m1.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.1.m1.1b"><ci id="S5.SS2.p2.1.m1.1.1.cmml" xref="S5.SS2.p2.1.m1.1.1">𝑠</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.1.m1.1c">s</annotation></semantics></math> in dataset <math id="S5.SS2.p2.2.m2.1" class="ltx_Math" alttext="D^{\prime}" display="inline"><semantics id="S5.SS2.p2.2.m2.1a"><msup id="S5.SS2.p2.2.m2.1.1" xref="S5.SS2.p2.2.m2.1.1.cmml"><mi id="S5.SS2.p2.2.m2.1.1.2" xref="S5.SS2.p2.2.m2.1.1.2.cmml">D</mi><mo id="S5.SS2.p2.2.m2.1.1.3" xref="S5.SS2.p2.2.m2.1.1.3.cmml">′</mo></msup><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.2.m2.1b"><apply id="S5.SS2.p2.2.m2.1.1.cmml" xref="S5.SS2.p2.2.m2.1.1"><csymbol cd="ambiguous" id="S5.SS2.p2.2.m2.1.1.1.cmml" xref="S5.SS2.p2.2.m2.1.1">superscript</csymbol><ci id="S5.SS2.p2.2.m2.1.1.2.cmml" xref="S5.SS2.p2.2.m2.1.1.2">𝐷</ci><ci id="S5.SS2.p2.2.m2.1.1.3.cmml" xref="S5.SS2.p2.2.m2.1.1.3">′</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.2.m2.1c">D^{\prime}</annotation></semantics></math> to be <span id="S5.SS2.p2.4.1" class="ltx_text ltx_font_italic">unique</span> up to threshold<span id="footnote7" class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">7</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">7</sup><span class="ltx_tag ltx_tag_note">7</span>We set the ROUGE-L threshold to 0.8 for Code Line Descriptions, where examples are Python snippets, 0.9 for Temporal Sequences, where examples are long English texts, and 0.7 for the other datasets.</span></span></span> <math id="S5.SS2.p2.3.m3.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S5.SS2.p2.3.m3.1a"><mi id="S5.SS2.p2.3.m3.1.1" xref="S5.SS2.p2.3.m3.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.3.m3.1b"><ci id="S5.SS2.p2.3.m3.1.1.cmml" xref="S5.SS2.p2.3.m3.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.3.m3.1c">T</annotation></semantics></math> if <math id="S5.SS2.p2.4.m4.3" class="ltx_Math" alttext="\max_{s^{\prime}\in D^{\prime}\setminus\{s\}}ROUGE(s,s^{\prime})&lt;T" display="inline"><semantics id="S5.SS2.p2.4.m4.3a"><mrow id="S5.SS2.p2.4.m4.3.3" xref="S5.SS2.p2.4.m4.3.3.cmml"><mrow id="S5.SS2.p2.4.m4.3.3.1" xref="S5.SS2.p2.4.m4.3.3.1.cmml"><mrow id="S5.SS2.p2.4.m4.3.3.1.3" xref="S5.SS2.p2.4.m4.3.3.1.3.cmml"><msub id="S5.SS2.p2.4.m4.3.3.1.3.1" xref="S5.SS2.p2.4.m4.3.3.1.3.1.cmml"><mi id="S5.SS2.p2.4.m4.3.3.1.3.1.2" xref="S5.SS2.p2.4.m4.3.3.1.3.1.2.cmml">max</mi><mrow id="S5.SS2.p2.4.m4.1.1.1" xref="S5.SS2.p2.4.m4.1.1.1.cmml"><msup id="S5.SS2.p2.4.m4.1.1.1.3" xref="S5.SS2.p2.4.m4.1.1.1.3.cmml"><mi id="S5.SS2.p2.4.m4.1.1.1.3.2" xref="S5.SS2.p2.4.m4.1.1.1.3.2.cmml">s</mi><mo id="S5.SS2.p2.4.m4.1.1.1.3.3" xref="S5.SS2.p2.4.m4.1.1.1.3.3.cmml">′</mo></msup><mo id="S5.SS2.p2.4.m4.1.1.1.2" xref="S5.SS2.p2.4.m4.1.1.1.2.cmml">∈</mo><mrow id="S5.SS2.p2.4.m4.1.1.1.4" xref="S5.SS2.p2.4.m4.1.1.1.4.cmml"><msup id="S5.SS2.p2.4.m4.1.1.1.4.2" xref="S5.SS2.p2.4.m4.1.1.1.4.2.cmml"><mi id="S5.SS2.p2.4.m4.1.1.1.4.2.2" xref="S5.SS2.p2.4.m4.1.1.1.4.2.2.cmml">D</mi><mo id="S5.SS2.p2.4.m4.1.1.1.4.2.3" xref="S5.SS2.p2.4.m4.1.1.1.4.2.3.cmml">′</mo></msup><mo id="S5.SS2.p2.4.m4.1.1.1.4.1" xref="S5.SS2.p2.4.m4.1.1.1.4.1.cmml">∖</mo><mrow id="S5.SS2.p2.4.m4.1.1.1.4.3.2" xref="S5.SS2.p2.4.m4.1.1.1.4.3.1.cmml"><mo stretchy="false" id="S5.SS2.p2.4.m4.1.1.1.4.3.2.1" xref="S5.SS2.p2.4.m4.1.1.1.4.3.1.cmml">{</mo><mi id="S5.SS2.p2.4.m4.1.1.1.1" xref="S5.SS2.p2.4.m4.1.1.1.1.cmml">s</mi><mo stretchy="false" id="S5.SS2.p2.4.m4.1.1.1.4.3.2.2" xref="S5.SS2.p2.4.m4.1.1.1.4.3.1.cmml">}</mo></mrow></mrow></mrow></msub><mo lspace="0.167em" id="S5.SS2.p2.4.m4.3.3.1.3a" xref="S5.SS2.p2.4.m4.3.3.1.3.cmml">⁡</mo><mrow id="S5.SS2.p2.4.m4.3.3.1.3.2" xref="S5.SS2.p2.4.m4.3.3.1.3.2.cmml"><mi id="S5.SS2.p2.4.m4.3.3.1.3.2.2" xref="S5.SS2.p2.4.m4.3.3.1.3.2.2.cmml">R</mi><mo lspace="0em" rspace="0em" id="S5.SS2.p2.4.m4.3.3.1.3.2.1" xref="S5.SS2.p2.4.m4.3.3.1.3.2.1.cmml">​</mo><mi id="S5.SS2.p2.4.m4.3.3.1.3.2.3" xref="S5.SS2.p2.4.m4.3.3.1.3.2.3.cmml">O</mi><mo lspace="0em" rspace="0em" id="S5.SS2.p2.4.m4.3.3.1.3.2.1a" xref="S5.SS2.p2.4.m4.3.3.1.3.2.1.cmml">​</mo><mi id="S5.SS2.p2.4.m4.3.3.1.3.2.4" xref="S5.SS2.p2.4.m4.3.3.1.3.2.4.cmml">U</mi><mo lspace="0em" rspace="0em" id="S5.SS2.p2.4.m4.3.3.1.3.2.1b" xref="S5.SS2.p2.4.m4.3.3.1.3.2.1.cmml">​</mo><mi id="S5.SS2.p2.4.m4.3.3.1.3.2.5" xref="S5.SS2.p2.4.m4.3.3.1.3.2.5.cmml">G</mi><mo lspace="0em" rspace="0em" id="S5.SS2.p2.4.m4.3.3.1.3.2.1c" xref="S5.SS2.p2.4.m4.3.3.1.3.2.1.cmml">​</mo><mi id="S5.SS2.p2.4.m4.3.3.1.3.2.6" xref="S5.SS2.p2.4.m4.3.3.1.3.2.6.cmml">E</mi></mrow></mrow><mo lspace="0em" rspace="0em" id="S5.SS2.p2.4.m4.3.3.1.2" xref="S5.SS2.p2.4.m4.3.3.1.2.cmml">​</mo><mrow id="S5.SS2.p2.4.m4.3.3.1.1.1" xref="S5.SS2.p2.4.m4.3.3.1.1.2.cmml"><mo stretchy="false" id="S5.SS2.p2.4.m4.3.3.1.1.1.2" xref="S5.SS2.p2.4.m4.3.3.1.1.2.cmml">(</mo><mi id="S5.SS2.p2.4.m4.2.2" xref="S5.SS2.p2.4.m4.2.2.cmml">s</mi><mo id="S5.SS2.p2.4.m4.3.3.1.1.1.3" xref="S5.SS2.p2.4.m4.3.3.1.1.2.cmml">,</mo><msup id="S5.SS2.p2.4.m4.3.3.1.1.1.1" xref="S5.SS2.p2.4.m4.3.3.1.1.1.1.cmml"><mi id="S5.SS2.p2.4.m4.3.3.1.1.1.1.2" xref="S5.SS2.p2.4.m4.3.3.1.1.1.1.2.cmml">s</mi><mo id="S5.SS2.p2.4.m4.3.3.1.1.1.1.3" xref="S5.SS2.p2.4.m4.3.3.1.1.1.1.3.cmml">′</mo></msup><mo stretchy="false" id="S5.SS2.p2.4.m4.3.3.1.1.1.4" xref="S5.SS2.p2.4.m4.3.3.1.1.2.cmml">)</mo></mrow></mrow><mo id="S5.SS2.p2.4.m4.3.3.2" xref="S5.SS2.p2.4.m4.3.3.2.cmml">&lt;</mo><mi id="S5.SS2.p2.4.m4.3.3.3" xref="S5.SS2.p2.4.m4.3.3.3.cmml">T</mi></mrow><annotation-xml encoding="MathML-Content" id="S5.SS2.p2.4.m4.3b"><apply id="S5.SS2.p2.4.m4.3.3.cmml" xref="S5.SS2.p2.4.m4.3.3"><lt id="S5.SS2.p2.4.m4.3.3.2.cmml" xref="S5.SS2.p2.4.m4.3.3.2"></lt><apply id="S5.SS2.p2.4.m4.3.3.1.cmml" xref="S5.SS2.p2.4.m4.3.3.1"><times id="S5.SS2.p2.4.m4.3.3.1.2.cmml" xref="S5.SS2.p2.4.m4.3.3.1.2"></times><apply id="S5.SS2.p2.4.m4.3.3.1.3.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3"><apply id="S5.SS2.p2.4.m4.3.3.1.3.1.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.1"><csymbol cd="ambiguous" id="S5.SS2.p2.4.m4.3.3.1.3.1.1.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.1">subscript</csymbol><max id="S5.SS2.p2.4.m4.3.3.1.3.1.2.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.1.2"></max><apply id="S5.SS2.p2.4.m4.1.1.1.cmml" xref="S5.SS2.p2.4.m4.1.1.1"><in id="S5.SS2.p2.4.m4.1.1.1.2.cmml" xref="S5.SS2.p2.4.m4.1.1.1.2"></in><apply id="S5.SS2.p2.4.m4.1.1.1.3.cmml" xref="S5.SS2.p2.4.m4.1.1.1.3"><csymbol cd="ambiguous" id="S5.SS2.p2.4.m4.1.1.1.3.1.cmml" xref="S5.SS2.p2.4.m4.1.1.1.3">superscript</csymbol><ci id="S5.SS2.p2.4.m4.1.1.1.3.2.cmml" xref="S5.SS2.p2.4.m4.1.1.1.3.2">𝑠</ci><ci id="S5.SS2.p2.4.m4.1.1.1.3.3.cmml" xref="S5.SS2.p2.4.m4.1.1.1.3.3">′</ci></apply><apply id="S5.SS2.p2.4.m4.1.1.1.4.cmml" xref="S5.SS2.p2.4.m4.1.1.1.4"><setdiff id="S5.SS2.p2.4.m4.1.1.1.4.1.cmml" xref="S5.SS2.p2.4.m4.1.1.1.4.1"></setdiff><apply id="S5.SS2.p2.4.m4.1.1.1.4.2.cmml" xref="S5.SS2.p2.4.m4.1.1.1.4.2"><csymbol cd="ambiguous" id="S5.SS2.p2.4.m4.1.1.1.4.2.1.cmml" xref="S5.SS2.p2.4.m4.1.1.1.4.2">superscript</csymbol><ci id="S5.SS2.p2.4.m4.1.1.1.4.2.2.cmml" xref="S5.SS2.p2.4.m4.1.1.1.4.2.2">𝐷</ci><ci id="S5.SS2.p2.4.m4.1.1.1.4.2.3.cmml" xref="S5.SS2.p2.4.m4.1.1.1.4.2.3">′</ci></apply><set id="S5.SS2.p2.4.m4.1.1.1.4.3.1.cmml" xref="S5.SS2.p2.4.m4.1.1.1.4.3.2"><ci id="S5.SS2.p2.4.m4.1.1.1.1.cmml" xref="S5.SS2.p2.4.m4.1.1.1.1">𝑠</ci></set></apply></apply></apply><apply id="S5.SS2.p2.4.m4.3.3.1.3.2.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.2"><times id="S5.SS2.p2.4.m4.3.3.1.3.2.1.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.2.1"></times><ci id="S5.SS2.p2.4.m4.3.3.1.3.2.2.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.2.2">𝑅</ci><ci id="S5.SS2.p2.4.m4.3.3.1.3.2.3.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.2.3">𝑂</ci><ci id="S5.SS2.p2.4.m4.3.3.1.3.2.4.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.2.4">𝑈</ci><ci id="S5.SS2.p2.4.m4.3.3.1.3.2.5.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.2.5">𝐺</ci><ci id="S5.SS2.p2.4.m4.3.3.1.3.2.6.cmml" xref="S5.SS2.p2.4.m4.3.3.1.3.2.6">𝐸</ci></apply></apply><interval closure="open" id="S5.SS2.p2.4.m4.3.3.1.1.2.cmml" xref="S5.SS2.p2.4.m4.3.3.1.1.1"><ci id="S5.SS2.p2.4.m4.2.2.cmml" xref="S5.SS2.p2.4.m4.2.2">𝑠</ci><apply id="S5.SS2.p2.4.m4.3.3.1.1.1.1.cmml" xref="S5.SS2.p2.4.m4.3.3.1.1.1.1"><csymbol cd="ambiguous" id="S5.SS2.p2.4.m4.3.3.1.1.1.1.1.cmml" xref="S5.SS2.p2.4.m4.3.3.1.1.1.1">superscript</csymbol><ci id="S5.SS2.p2.4.m4.3.3.1.1.1.1.2.cmml" xref="S5.SS2.p2.4.m4.3.3.1.1.1.1.2">𝑠</ci><ci id="S5.SS2.p2.4.m4.3.3.1.1.1.1.3.cmml" xref="S5.SS2.p2.4.m4.3.3.1.1.1.1.3">′</ci></apply></interval></apply><ci id="S5.SS2.p2.4.m4.3.3.3.cmml" xref="S5.SS2.p2.4.m4.3.3.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S5.SS2.p2.4.m4.3c">\max_{s^{\prime}\in D^{\prime}\setminus\{s\}}ROUGE(s,s^{\prime})&lt;T</annotation></semantics></math>. In <a href="#S5.F4" title="Figure 4 ‣ 5.2 DataTune Impact on Dataset Diversity ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 4</span></a>, we observe that over 50% of examples generated synthetically are near-duplicates for 3 of 5 tasks; in each of those cases, using DataTune instead effectively eliminates this problem.</p>
</div>
<figure id="S5.F4" class="ltx_figure"><img src="/html/2404.14361/assets/x3.png" id="S5.F4.g1" class="ltx_graphics ltx_img_landscape" width="221" height="132" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Synthetic dataset generation often suffers from the problem of generating multiple duplicates of the same example in a given dataset. On 3 of 5 tasks, we find that data transformation from retrieved datasets significantly mitigates this issue. The other two datasets, Russian and Temporal, represent failure modes of our system. Gold represents the BigBench Dataset for a given task.</figcaption>
</figure>
<div id="S5.SS2.p3" class="ltx_para">
<p id="S5.SS2.p3.1" class="ltx_p">We observe similar trends with lexical diversity across all dataset creation methods. In <a href="#S5.T3" title="Table 3 ‣ 5.2 DataTune Impact on Dataset Diversity ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Table 3</span></a>, we measure the number of unique bigrams per generated input example. DataTune significantly increases the number unique bigrams per example (and moderately increases the length of each example) on 3 of 5 datasets.</p>
</div>
<div id="S5.SS2.p4" class="ltx_para">
<p id="S5.SS2.p4.1" class="ltx_p">According to both measures, dataset diversity decreases on <span id="S5.SS2.p4.1.1" class="ltx_text ltx_font_italic">Temporal Sequences</span> and <span id="S5.SS2.p4.1.2" class="ltx_text ltx_font_italic">Medical Questions in Russian</span>, which are also the two tasks where DataTune fails to improve over training on fully synthetic data. We discuss these two tasks in Section <a href="#S5.SS5" title="5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.5</span></a> and <a href="#Sx1" title="Limitations ‣ 6 Conclusion and Future Work ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref">Limitations</a>, respectively.</p>
</div>
<figure id="S5.T3" class="ltx_table">
<table id="S5.T3.1" class="ltx_tabular ltx_centering ltx_align_middle">
<tr id="S5.T3.1.1" class="ltx_tr">
<td id="S5.T3.1.1.1" class="ltx_td ltx_align_left ltx_border_tt" style="padding:0.5pt 2.5pt;"><span id="S5.T3.1.1.1.1" class="ltx_text ltx_font_bold">Dataset</span></td>
<td id="S5.T3.1.1.2" class="ltx_td ltx_align_left ltx_border_tt" style="padding:0.5pt 2.5pt;"><span id="S5.T3.1.1.2.1" class="ltx_text ltx_font_bold">Unique Bigrams</span></td>
<td id="S5.T3.1.1.3" class="ltx_td ltx_align_left ltx_border_tt" style="padding:0.5pt 2.5pt;"><span id="S5.T3.1.1.3.1" class="ltx_text ltx_font_bold">Total Tokens</span></td>
</tr>
<tr id="S5.T3.1.2" class="ltx_tr">
<td id="S5.T3.1.2.1" class="ltx_td" style="padding:0.5pt 2.5pt;"></td>
<td id="S5.T3.1.2.2" class="ltx_td ltx_align_left" style="padding:0.5pt 2.5pt;"><span id="S5.T3.1.2.2.1" class="ltx_text ltx_font_bold">Per Example</span></td>
<td id="S5.T3.1.2.3" class="ltx_td ltx_align_left" style="padding:0.5pt 2.5pt;"><span id="S5.T3.1.2.3.1" class="ltx_text ltx_font_bold">Per Example</span></td>
</tr>
<tr id="S5.T3.1.3" class="ltx_tr">
<td id="S5.T3.1.3.1" class="ltx_td ltx_align_center ltx_border_t" style="padding:0.5pt 2.5pt;" colspan="3"><span id="S5.T3.1.3.1.1" class="ltx_text ltx_font_bold">Code Line Description</span></td>
</tr>
<tr id="S5.T3.1.4" class="ltx_tr">
<td id="S5.T3.1.4.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Gold</td>
<td id="S5.T3.1.4.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">13.2</td>
<td id="S5.T3.1.4.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">32.3</td>
</tr>
<tr id="S5.T3.1.5" class="ltx_tr">
<td id="S5.T3.1.5.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Synthetic</td>
<td id="S5.T3.1.5.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">2.5</td>
<td id="S5.T3.1.5.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">35.0</td>
</tr>
<tr id="S5.T3.1.6" class="ltx_tr">
<td id="S5.T3.1.6.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Transformed</td>
<td id="S5.T3.1.6.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">14.9</td>
<td id="S5.T3.1.6.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">86.9</td>
</tr>
<tr id="S5.T3.1.7" class="ltx_tr">
<td id="S5.T3.1.7.1" class="ltx_td ltx_align_center ltx_border_t" style="padding:0.5pt 2.5pt;" colspan="3"><span id="S5.T3.1.7.1.1" class="ltx_text ltx_font_bold">Elementary Math</span></td>
</tr>
<tr id="S5.T3.1.8" class="ltx_tr">
<td id="S5.T3.1.8.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Gold</td>
<td id="S5.T3.1.8.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">10.8</td>
<td id="S5.T3.1.8.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">48.6</td>
</tr>
<tr id="S5.T3.1.9" class="ltx_tr">
<td id="S5.T3.1.9.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Synthetic</td>
<td id="S5.T3.1.9.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">3.3</td>
<td id="S5.T3.1.9.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">34.4</td>
</tr>
<tr id="S5.T3.1.10" class="ltx_tr">
<td id="S5.T3.1.10.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Transformed</td>
<td id="S5.T3.1.10.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">11.6</td>
<td id="S5.T3.1.10.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">43.8</td>
</tr>
<tr id="S5.T3.1.11" class="ltx_tr">
<td id="S5.T3.1.11.1" class="ltx_td ltx_align_center ltx_border_t" style="padding:0.5pt 2.5pt;" colspan="3"><span id="S5.T3.1.11.1.1" class="ltx_text ltx_font_bold">Implicatures</span></td>
</tr>
<tr id="S5.T3.1.12" class="ltx_tr">
<td id="S5.T3.1.12.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Gold</td>
<td id="S5.T3.1.12.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">9.9</td>
<td id="S5.T3.1.12.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">24.1</td>
</tr>
<tr id="S5.T3.1.13" class="ltx_tr">
<td id="S5.T3.1.13.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Synthetic</td>
<td id="S5.T3.1.13.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">2.7</td>
<td id="S5.T3.1.13.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">27.7</td>
</tr>
<tr id="S5.T3.1.14" class="ltx_tr">
<td id="S5.T3.1.14.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Transformed</td>
<td id="S5.T3.1.14.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">17.8</td>
<td id="S5.T3.1.14.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">39.8</td>
</tr>
<tr id="S5.T3.1.15" class="ltx_tr">
<td id="S5.T3.1.15.1" class="ltx_td ltx_align_center ltx_border_t" style="padding:0.5pt 2.5pt;" colspan="3"><span id="S5.T3.1.15.1.1" class="ltx_text ltx_font_bold">Temporal Sequences</span></td>
</tr>
<tr id="S5.T3.1.16" class="ltx_tr">
<td id="S5.T3.1.16.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Gold</td>
<td id="S5.T3.1.16.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">1.0</td>
<td id="S5.T3.1.16.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">99.7</td>
</tr>
<tr id="S5.T3.1.17" class="ltx_tr">
<td id="S5.T3.1.17.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Synthetic</td>
<td id="S5.T3.1.17.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">20.8</td>
<td id="S5.T3.1.17.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">54.6</td>
</tr>
<tr id="S5.T3.1.18" class="ltx_tr">
<td id="S5.T3.1.18.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Transformed</td>
<td id="S5.T3.1.18.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">0.2</td>
<td id="S5.T3.1.18.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">73.7</td>
</tr>
<tr id="S5.T3.1.19" class="ltx_tr">
<td id="S5.T3.1.19.1" class="ltx_td ltx_align_center ltx_border_t" style="padding:0.5pt 2.5pt;" colspan="3"><span id="S5.T3.1.19.1.1" class="ltx_text ltx_font_bold">Medical Questions in Russian</span></td>
</tr>
<tr id="S5.T3.1.20" class="ltx_tr">
<td id="S5.T3.1.20.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Gold</td>
<td id="S5.T3.1.20.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">62.0</td>
<td id="S5.T3.1.20.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">79.4</td>
</tr>
<tr id="S5.T3.1.21" class="ltx_tr">
<td id="S5.T3.1.21.1" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">Synthetic</td>
<td id="S5.T3.1.21.2" class="ltx_td ltx_align_right" style="padding:0.5pt 2.5pt;">20.8</td>
<td id="S5.T3.1.21.3" class="ltx_td ltx_nopad_r ltx_align_right" style="padding:0.5pt 2.5pt;">54.6</td>
</tr>
<tr id="S5.T3.1.22" class="ltx_tr">
<td id="S5.T3.1.22.1" class="ltx_td ltx_align_right ltx_border_bb" style="padding:0.5pt 2.5pt;">Transformed</td>
<td id="S5.T3.1.22.2" class="ltx_td ltx_align_right ltx_border_bb" style="padding:0.5pt 2.5pt;">11.6</td>
<td id="S5.T3.1.22.3" class="ltx_td ltx_nopad_r ltx_align_right ltx_border_bb" style="padding:0.5pt 2.5pt;">44.8</td>
</tr>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>We observe that dataset transformation yields datasets with greater lexical diversity than synthetic dataset generation on 3 of 5 datasets.
</figcaption>
</figure>
</section>
<section id="S5.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.3 </span>DataTune Generates Harder Examples</h3>

<figure id="S5.F5" class="ltx_figure"><img src="/html/2404.14361/assets/x4.png" id="S5.F5.g1" class="ltx_graphics ltx_img_square" width="221" height="221" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>Dataset Transformation leads to more difficult examples than synthetically generated examples, which are over-represented by easy examples, relative to manually-curated BIG-Bench evaluation datasets (Gold).</figcaption>
</figure>
<div id="S5.SS3.p1" class="ltx_para">
<p id="S5.SS3.p1.1" class="ltx_p">Synthetic datasets sampled directly from a language model tend to overrepresent with easy-to-solve examples <cite class="ltx_cite ltx_citemacro_citep">(Xu et al., <a href="#bib.bib27" title="" class="ltx_ref">2023</a>)</cite>. To test our ability to overcome this issue, we used <span id="S5.SS3.p1.1.1" class="ltx_text ltx_font_typewriter">gpt-3.5-turbo</span> to estimate the difficulty of each example generated from each method (DataTune, synthetic generation, and manual curation) for four tasks. We wrote a custom difficulty estimation prompt (including in-context examples) for each task; in all prompts, we specify that the LLM should rate the example on a scale of 1 to 5. We outline an example of this prompt in Appendix <a href="#A1.SS6" title="A.6 Difficulty estimation prompt: Code Line Descriptions example ‣ Appendix A Example Appendix ‣ Ethical Considerations ‣ Limitations ‣ 6 Conclusion and Future Work ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref"><span class="ltx_text ltx_ref_tag">A.6</span></a>. As illustrated in <a href="#S5.F5" title="Figure 5 ‣ 5.3 DataTune Generates Harder Examples ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 5</span></a>, we observe that the data from DataTune exhibits a higher level of difficulty compared to synthetically generated data for all datasets other than <span id="S5.SS3.p1.1.2" class="ltx_text ltx_font_italic">Medical Questions in Russian</span>. We attribute this increase in difficulty to the added knowledge introduced by the existing dataset selected for transformation, which is often more nuanced and, consequently, more challenging. In contrast, unconditional generation from LLMs tends to produce examples that are likely to have a high prior (prompt-independent) probability under the language model. The exception to this effect, <span id="S5.SS3.p1.1.3" class="ltx_text ltx_font_italic">Medical Question in Russian</span>, can be attributed to the failure of our approach’s transformation plan to generate data in the correct language for this task. We provide more details of this failure mode in <a href="#Sx1" title="Limitations ‣ 6 Conclusion and Future Work ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref">Limitations</a>.</p>
</div>
</section>
<section id="S5.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.4 </span>Does generating harder examples lead to lower label accuracy?</h3>

<div id="S5.SS4.p1" class="ltx_para">
<p id="S5.SS4.p1.1" class="ltx_p">We evaluated the label accuracy of generated data for the Code Line Description task by comparing DataTune against synthetic dataset generation. Manually annotating a random sample of 300 data points from each generation method for the Code Line Description Task, we found the label accuracy from DataTune is 88%, compared to 86.6% for synthetic data generation. This comparison suggests that DataTune can produce datasets that are comparable in accuracy to purely-synthetic datasets, despite DataTune generating significantly more diverse and challenging examples on this task.</p>
</div>
</section>
<section id="S5.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">5.5 </span>Transformed Data Can Be Complementary to Synthetic Data</h3>

<div id="S5.SS5.p1" class="ltx_para">
<p id="S5.SS5.p1.1" class="ltx_p">In two cases where DataTune fails to improve over a synthetic data baseline, <span id="S5.SS5.p1.1.1" class="ltx_text ltx_font_italic">Temporal Sequences</span> and <span id="S5.SS5.p1.1.2" class="ltx_text ltx_font_italic">Elementary Math</span>, our combined DataTune + Synthetic system still outperforms all other comparable (Mistral-based) baselines. We observe these two approaches to dataset generation can be complementary to each other, yielding additive improvements when combined.</p>
</div>
<div id="S5.SS5.p2" class="ltx_para">
<p id="S5.SS5.p2.1" class="ltx_p">For a concrete example of this, we can visually observe the two-dimensional semantic distribution of questions generated for the Elementary Math task via DataTune, Synthetic Generation, and from the gold dataset in <a href="#S5.F6" title="Figure 6 ‣ 5.5 Transformed Data Can Be Complementary to Synthetic Data ‣ 5 Results and Analysis ‣ Metrics ‣ 4 Experimental Setup ‣ Better Synthetic Data by Retrieving and Transforming Existing Datasets" class="ltx_ref ltx_refmacro_autoref"><span class="ltx_text ltx_ref_tag">Figure 6</span></a>. We encoded each question using MiniLM v2 <cite class="ltx_cite ltx_citemacro_citep">(Wang et al., <a href="#bib.bib23" title="" class="ltx_ref">2021</a>)</cite> via <span id="S5.SS5.p2.1.1" class="ltx_text ltx_font_typewriter">sentence-transformers</span> <cite class="ltx_cite ltx_citemacro_citep">(Reimers and Gurevych, <a href="#bib.bib14" title="" class="ltx_ref">2019</a>)</cite>, then projected each embedding into a 2D space using t-SNE <cite class="ltx_cite ltx_citemacro_citep">(van der Maaten and Hinton, <a href="#bib.bib19" title="" class="ltx_ref">2008</a>)</cite>.</p>
</div>
<figure id="S5.F6" class="ltx_figure"><img src="/html/2404.14361/assets/x5.png" id="S5.F6.g1" class="ltx_graphics ltx_img_square" width="221" height="221" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>We observe that examples generated via DataTune and synthetic dataset generation fall into visually well-separated regions of embedding space, after projecting to two dimensions via t-SNE.</figcaption>
</figure>
<div id="S5.SS5.p3" class="ltx_para">
<p id="S5.SS5.p3.1" class="ltx_p">Visually, we observe that the embedding clusters of questions generated via DataTune and Synthetic Generation appear to be largely disjoint. This supports our hypothesis that these two methods systematically cover different distributions of the target task space, and therefore combining the examples from each method can lead to a synergistic effect.</p>
</div>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion and Future Work</h2>

<div id="S6.p1" class="ltx_para">
<p id="S6.p1.1" class="ltx_p">We presented DataTune, an improved approach for enhancing automatic dataset generation by transforming existing labeled datasets. Our method significantly outperforms existing automatic dataset generation techniques on several challenging tasks from BIG-Bench. When used in conjunction with existing synthetic dataset generation methods, it achieve superior performance compared to other few-shot learning methods on the base model we used (Mistral-7B). Our analysis reveals that DataTune not only creates more diverse and accurate datasets but also increases their complexity for fine-tuning. An important direction is whether transformation-based dataset creation methods like DataTune can still be effective when examples are retrieved from the open web rather than from the collections of manually-curated datasets we consider in our work. Another important direction for future work will be to generate code to execute a transformation plan (rather than querying an LLM for each instance of data). Both of these future directions would improve the accessibility and scalability of our suggested approach.</p>
</div>
<section id="Sx1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">Limitations</h2>

<div id="Sx1.p1" class="ltx_para">
<p id="Sx1.p1.1" class="ltx_p">We identify four key limitations in our system:</p>
<ol id="Sx1.I1" class="ltx_enumerate">
<li id="Sx1.I1.i1" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">1.</span> 
<div id="Sx1.I1.i1.p1" class="ltx_para">
<p id="Sx1.I1.i1.p1.1" class="ltx_p"><span id="Sx1.I1.i1.p1.1.1" class="ltx_text ltx_font_bold">LLM Query Cost</span>: Our dataset transformation component requires running the Execution Module on each row of each dataset we wish to transform. Given that our Execution Module prompts a large language model, the number of LLM queries scales linearly with the amount of data to be transformed. This could be cost-prohibitive for transforming very large datasets. This LLM usage requirement could also exclude members of the research community without consistent LLM access from benefiting from our work.</p>
</div>
</li>
<li id="Sx1.I1.i2" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">2.</span> 
<div id="Sx1.I1.i2.p1" class="ltx_para">
<p id="Sx1.I1.i2.p1.1" class="ltx_p"><span id="Sx1.I1.i2.p1.1.1" class="ltx_text ltx_font_bold">Dependence on the Planning Module</span>: Our dataset transformation system relies heavily on the Planning Module to produce clear and comprehensive instructions for the Execution Module to enact. Our Planning Module operates by prompting a large language model. Given that prompted LLMs can behave unpredictably in changes in prompts <cite class="ltx_cite ltx_citemacro_citep">(Sclar et al., <a href="#bib.bib16" title="" class="ltx_ref">2023</a>)</cite>, an important limitation of our method is that its success depends on a large language model following a prompt correctly. We see this failure with Medical Questions in Russian, where the agent is supposed to translate a Russian dataset into English to facilitate the generation of question-answer pairs. When running our benchmarking, the Planning Agent failed to translate the generated question-answer pairs back to Russian. This resulted in a training dataset that, despite being conceptually close, was practically far from correct.</p>
</div>
</li>
<li id="Sx1.I1.i3" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">3.</span> 
<div id="Sx1.I1.i3.p1" class="ltx_para">
<p id="Sx1.I1.i3.p1.1" class="ltx_p"><span id="Sx1.I1.i3.p1.1.1" class="ltx_text ltx_font_bold">Handling Non-English Data</span>: Our transformation agent’s ability to process non-English data tasks is substantially compromised, frequently altering example tasks instead of the actual data. This deficiency is primarily due to the reliance on models like GPT 3.5, which have been extensively trained on English data, thereby diminishing their proficiency with other languages.</p>
</div>
</li>
<li id="Sx1.I1.i4" class="ltx_item" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">4.</span> 
<div id="Sx1.I1.i4.p1" class="ltx_para">
<p id="Sx1.I1.i4.p1.1" class="ltx_p"><span id="Sx1.I1.i4.p1.1.1" class="ltx_text ltx_font_bold">Dependence on Instruction-Following LLMs</span>: The system’s execution component depends on Large Language Models (LLMs) that are specifically designed to adhere to instructions. We have identified discrepancies in performance among LLMs tailored for instruction-based tasks versus those developed for conversational purposes. This limitation confines our system to using only a narrow selection of LLMs that demonstrate the ability to follow instructions accurately.</p>
</div>
</li>
</ol>
</div>
<section id="Sx2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">Ethical Considerations</h2>

<div id="Sx2.p1" class="ltx_para">
<p id="Sx2.p1.1" class="ltx_p">DataTune could make it easier for the general public to build custom language models. The broadening of open-ended technology induces ethical concerns, similar to the issues with open-source deepfake libraries described by <cite class="ltx_cite ltx_citemacro_citet">Widder et al. (<a href="#bib.bib26" title="" class="ltx_ref">2022</a>)</cite>. While DataTune has potential for misuse, this is likely no greater than the potential harms presented by the underlying open-source large language models. By making it easier to build task-specific language models, we hope that these risks are balanced by the benefits of making NLP models accessible to those outside the NLP community or those without the resources to manually collect labeled data. We aim to be transparent in our documentation about the potential limitations of the system.</p>
</div>
<div id="Sx2.p2" class="ltx_para">
<p id="Sx2.p2.1" class="ltx_p">The platform is particularly valuable for individuals outside the NLP community who can benefit from using NLP models in their work but lack the specialized knowledge to develop these tools independently. The decision to open-source DataTune invites community contributions, emphasizing a collaborative approach to improve and expand the tool’s capabilities. This strategy not only enhances the system’s utility but also aligns with a broader goal of increasing the accessibility of NLP innovations and fostering a more inclusive technological environment.</p>
</div>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">BIG Bench Authors (2023)</span>
<span class="ltx_bibblock">
BIG Bench Authors. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://openreview.net/forum?id=uyTL5Bvosj" title="" class="ltx_ref ltx_href">Beyond the imitation game: Quantifying and extrapolating the capabilities of language models</a>.

</span>
<span class="ltx_bibblock"><em id="bib.bib1.1.1" class="ltx_emph ltx_font_italic">Transactions on Machine Learning Research</em>.

</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Callison-Burch (2009)</span>
<span class="ltx_bibblock">
Chris Callison-Burch. 2009.

</span>
<span class="ltx_bibblock">Fast, cheap, and creative: Evaluating translation quality using amazon’s mechanical turk.

</span>
<span class="ltx_bibblock">In <em id="bib.bib2.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2009 conference on empirical methods in natural language processing</em>, pages 286–295.

</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Dettmers et al. (2023)</span>
<span class="ltx_bibblock">
Tim Dettmers, Artidoro Pagnoni, Ari Holtzman, and Luke Zettlemoyer. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/2305.14314" title="" class="ltx_ref ltx_href">Qlora: Efficient finetuning of quantized llms</a>.

</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ding et al. (2023)</span>
<span class="ltx_bibblock">
Bosheng Ding, Chengwei Qin, Linlin Liu, Yew Ken Chia, Boyang Li, Shafiq Joty, and Lidong Bing. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://doi.org/10.18653/v1/2023.acl-long.626" title="" class="ltx_ref ltx_href">Is GPT-3 a good data annotator?</a>

</span>
<span class="ltx_bibblock">In <em id="bib.bib4.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 11173–11195, Toronto, Canada. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Huang et al. (2023)</span>
<span class="ltx_bibblock">
Olivia Huang, Eve Fleisig, and Dan Klein. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://doi.org/10.18653/v1/2023.emnlp-main.64" title="" class="ltx_ref ltx_href">Incorporating worker perspectives into MTurk annotation practices for NLP</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib5.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2023 Conference on Empirical Methods in Natural Language Processing</em>, pages 1010–1028, Singapore. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Jiang et al. (2023)</span>
<span class="ltx_bibblock">
Albert Q. Jiang, Alexandre Sablayrolles, Arthur Mensch, Chris Bamford, Devendra Singh Chaplot, Diego de las Casas, Florian Bressand, Gianna Lengyel, Guillaume Lample, Lucile Saulnier, Lélio Renard Lavaud, Marie-Anne Lachaux, Pierre Stock, Teven Le Scao, Thibaut Lavril, Thomas Wang, Timothée Lacroix, and William El Sayed. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/2310.06825" title="" class="ltx_ref ltx_href">Mistral 7b</a>.

</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lamsweerde (2009)</span>
<span class="ltx_bibblock">
A van Lamsweerde. 2009.

</span>
<span class="ltx_bibblock"><em id="bib.bib7.1.1" class="ltx_emph ltx_font_italic">Requirements engineering: from system goals to UML models to software specifications</em>.

</span>
<span class="ltx_bibblock">John Wiley &amp; Sons, Ltd.

</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lhoest et al. (2021)</span>
<span class="ltx_bibblock">
Quentin Lhoest, Albert Villanova del Moral, Yacine Jernite, Abhishek Thakur, Patrick von Platen, Suraj Patil, Julien Chaumond, Mariama Drame, Julien Plu, Lewis Tunstall, Joe Davison, Mario vSavsko, Gunjan Chhablani, Bhavitvya Malik, Simon Brandeis, Teven Le Scao, Victor Sanh, Canwen Xu, Nicolas Patry, Angelina McMillan-Major, Philipp Schmid, Sylvain Gugger, Clement Delangue, Th’eo Matussiere, Lysandre Debut, Stas Bekman, Pierric Cistac, Thibault Goehringer, Victor Mustar, François Lagunas, Alexander M. Rush, and Thomas Wolf. 2021.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://api.semanticscholar.org/CorpusID:237431340" title="" class="ltx_ref ltx_href">Datasets: A community library for natural language processing</a>.

</span>
<span class="ltx_bibblock"><em id="bib.bib8.1.1" class="ltx_emph ltx_font_italic">ArXiv</em>, abs/2109.02846.

</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin (2004)</span>
<span class="ltx_bibblock">
Chin-Yew Lin. 2004.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://aclanthology.org/W04-1013" title="" class="ltx_ref ltx_href">ROUGE: A package for automatic evaluation of summaries</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib9.1.1" class="ltx_emph ltx_font_italic">Text Summarization Branches Out</em>, pages 74–81, Barcelona, Spain. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Loshchilov and Hutter (2017)</span>
<span class="ltx_bibblock">
Ilya Loshchilov and Frank Hutter. 2017.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/1711.05101" title="" class="ltx_ref ltx_href">Fixing weight decay regularization in adam</a>.

</span>
<span class="ltx_bibblock"><em id="bib.bib10.1.1" class="ltx_emph ltx_font_italic">CoRR</em>, abs/1711.05101.

</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Mosbach et al. (2023)</span>
<span class="ltx_bibblock">
Marius Mosbach, Tiago Pimentel, Shauli Ravfogel, Dietrich Klakow, and Yanai Elazar. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://doi.org/10.18653/v1/2023.findings-acl.779" title="" class="ltx_ref ltx_href">Few-shot fine-tuning vs. in-context learning: A fair comparison and evaluation</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib11.1.1" class="ltx_emph ltx_font_italic">Findings of the Association for Computational Linguistics: ACL 2023</em>, pages 12284–12314, Toronto, Canada. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Peng et al. (2023)</span>
<span class="ltx_bibblock">
Baolin Peng, Chunyuan Li, Pengcheng He, Michel Galley, and Jianfeng Gao. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/2304.03277" title="" class="ltx_ref ltx_href">Instruction tuning with gpt-4</a>.

</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rajpurkar et al. (2016)</span>
<span class="ltx_bibblock">
Pranav Rajpurkar, Jian Zhang, Konstantin Lopyrev, and Percy Liang. 2016.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://doi.org/10.18653/v1/D16-1264" title="" class="ltx_ref ltx_href">SQuAD: 100,000+ questions for machine comprehension of text</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib13.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2016 Conference on Empirical Methods in Natural Language Processing</em>, pages 2383–2392, Austin, Texas. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Reimers and Gurevych (2019)</span>
<span class="ltx_bibblock">
Nils Reimers and Iryna Gurevych. 2019.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/1908.10084" title="" class="ltx_ref ltx_href">Sentence-bert: Sentence embeddings using siamese bert-networks</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib14.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2019 Conference on Empirical Methods in Natural Language Processing</em>. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sanh et al. (2021)</span>
<span class="ltx_bibblock">
Victor Sanh, Albert Webson, Colin Raffel, Stephen H Bach, Lintang Sutawika, Zaid Alyafeai, Antoine Chaffin, Arnaud Stiegler, Teven Le Scao, Arun Raja, et al. 2021.

</span>
<span class="ltx_bibblock">Multitask prompted training enables zero-shot task generalization.

</span>
<span class="ltx_bibblock"><em id="bib.bib15.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2110.08207</em>.

</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sclar et al. (2023)</span>
<span class="ltx_bibblock">
Melanie Sclar, Yejin Choi, Yulia Tsvetkov, and Alane Suhr. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/2310.11324" title="" class="ltx_ref ltx_href">Quantifying language models’ sensitivity to spurious features in prompt design or: How i learned to start worrying about prompt formatting</a>.

</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sun et al. (2023)</span>
<span class="ltx_bibblock">
Weiwei Sun, Lingyong Yan, Xinyu Ma, Pengjie Ren, Dawei Yin, and Zhaochun Ren. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://api.semanticscholar.org/CorpusID:258212638" title="" class="ltx_ref ltx_href">Is chatgpt good at search? investigating large language models as re-ranking agent</a>.

</span>
<span class="ltx_bibblock"><em id="bib.bib17.1.1" class="ltx_emph ltx_font_italic">ArXiv</em>, abs/2304.09542.

</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Tang et al. (2023)</span>
<span class="ltx_bibblock">
Ruixiang Tang, Xiaotian Han, Xiaoqian Jiang, and Xia Hu. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/2303.04360" title="" class="ltx_ref ltx_href">Does synthetic data generation of llms help clinical text mining?</a>

</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">van der Maaten and Hinton (2008)</span>
<span class="ltx_bibblock">
Laurens van der Maaten and Geoffrey Hinton. 2008.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://jmlr.org/papers/v9/vandermaaten08a.html" title="" class="ltx_ref ltx_href">Visualizing data using t-sne</a>.

</span>
<span class="ltx_bibblock"><em id="bib.bib19.1.1" class="ltx_emph ltx_font_italic">Journal of Machine Learning Research</em>, 9(86):2579–2605.

</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Viswanathan et al. (2023a)</span>
<span class="ltx_bibblock">
Vijay Viswanathan, Luyu Gao, Tongshuang Wu, Pengfei Liu, and Graham Neubig. 2023a.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://doi.org/10.18653/v1/2023.acl-long.573" title="" class="ltx_ref ltx_href">DataFinder: Scientific dataset recommendation from natural language descriptions</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib20.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 61st Annual Meeting of the Association for Computational Linguistics (Volume 1: Long Papers)</em>, pages 10288–10303, Toronto, Canada. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Viswanathan et al. (2023b)</span>
<span class="ltx_bibblock">
Vijay Viswanathan, Chenyang Zhao, Amanda Bertsch, Tongshuang Wu, and Graham Neubig. 2023b.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/2308.12261" title="" class="ltx_ref ltx_href">Prompt2model: Generating deployable models from natural language instructions</a>.

</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Vu et al. (2020)</span>
<span class="ltx_bibblock">
Tu Vu, Tong Wang, Tsendsuren Munkhdalai, Alessandro Sordoni, Adam Trischler, Andrew Mattarella-Micke, Subhransu Maji, and Mohit Iyyer. 2020.

</span>
<span class="ltx_bibblock">Exploring and predicting transferability across nlp tasks.

</span>
<span class="ltx_bibblock"><em id="bib.bib22.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2005.00770</em>.

</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2021)</span>
<span class="ltx_bibblock">
Wenhui Wang, Hangbo Bao, Shaohan Huang, Li Dong, and Furu Wei. 2021.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://doi.org/10.18653/v1/2021.findings-acl.188" title="" class="ltx_ref ltx_href">MiniLMv2: Multi-head self-attention relation distillation for compressing pretrained transformers</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib23.1.1" class="ltx_emph ltx_font_italic">Findings of the Association for Computational Linguistics: ACL-IJCNLP 2021</em>, pages 2140–2151, Online. Association for Computational Linguistics.

</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2023)</span>
<span class="ltx_bibblock">
Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/2203.11171" title="" class="ltx_ref ltx_href">Self-consistency improves chain of thought reasoning in language models</a>.

</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et al. (2022)</span>
<span class="ltx_bibblock">
Yizhong Wang, Yeganeh Kordi, Swaroop Mishra, Alisa Liu, Noah A Smith, Daniel Khashabi, and Hannaneh Hajishirzi. 2022.

</span>
<span class="ltx_bibblock">Self-instruct: Aligning language model with self generated instructions.

</span>
<span class="ltx_bibblock"><em id="bib.bib25.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2212.10560</em>.

</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Widder et al. (2022)</span>
<span class="ltx_bibblock">
David Gray Widder, Dawn Nafus, Laura Dabbish, and James Herbsleb. 2022.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://doi.org/10.1145/3531146.3533779" title="" class="ltx_ref ltx_href">Limits and possibilities for “ethical ai” in open source: A study of deepfakes</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib26.1.1" class="ltx_emph ltx_font_italic">Proceedings of the 2022 ACM Conference on Fairness, Accountability, and Transparency</em>, FAccT ’22, page 2035–2046, New York, NY, USA. Association for Computing Machinery.

</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xu et al. (2023)</span>
<span class="ltx_bibblock">
Can Xu, Qingfeng Sun, Kai Zheng, Xiubo Geng, Pu Zhao, Jiazhan Feng, Chongyang Tao, and Daxin Jiang. 2023.

</span>
<span class="ltx_bibblock"><a target="_blank" href="http://arxiv.org/abs/2304.12244" title="" class="ltx_ref ltx_href">Wizardlm: Empowering large language models to follow complex instructions</a>.

</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ye et al. (2022)</span>
<span class="ltx_bibblock">
Jiacheng Ye, Jiahui Gao, Jiangtao Feng, Zhiyong Wu, Tao Yu, and Lingpeng Kong. 2022.

</span>
<span class="ltx_bibblock"><a target="_blank" href="https://api.semanticscholar.org/CorpusID:253098311" title="" class="ltx_ref ltx_href">Progen: Progressive zero-shot dataset generation via in-context feedback</a>.

</span>
<span class="ltx_bibblock">In <em id="bib.bib28.1.1" class="ltx_emph ltx_font_italic">Conference on Empirical Methods in Natural Language Processing</em>.

</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et al. (2022)</span>
<span class="ltx_bibblock">
Zhisong Zhang, Emma Strubell, and Eduard Hovy. 2022.

</span>
<span class="ltx_bibblock">A survey of active learning for natural language processing.

</span>
<span class="ltx_bibblock"><em id="bib.bib29.1.1" class="ltx_emph ltx_font_italic">arXiv preprint arXiv:2210.10109</em>.

</span>
</li>
</ul>
</section>
<section id="A1" class="ltx_appendix">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Example Appendix</h2>

<section id="A1.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>Reranking Prompt</h3>

<div id="A1.SS1.p1" class="ltx_para ltx_noindent">
<svg id="A1.SS1.p1.pic1" class="ltx_picture" height="186.61" overflow="visible" version="1.1" width="600"><g transform="translate(0,186.61) matrix(1 0 0 -1 0 0)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 180.7 C 0 183.96 2.64 186.61 5.91 186.61 L 594.09 186.61 C 597.36 186.61 600 183.96 600 180.7 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 180.7 C 1.97 182.88 3.73 184.64 5.91 184.64 L 594.09 184.64 C 596.27 184.64 598.03 182.88 598.03 180.7 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignObject width="556.69" height="159.05" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#000000">
<span id="A1.SS1.p1.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_bottom" style="width:402.3pt;">
<span id="A1.SS1.p1.pic1.1.1.1.1.1.1" class="ltx_p">Your objective is to choose the most relevant dataset for a given a task (and few examples of the task). For each dataset, you will be provided with the dataset description, and tags related to the dataset. Please return the most relevant dataset, e.g., squad</span>
<span id="A1.SS1.p1.pic1.1.1.1.1.1.2" class="ltx_p">The following is the task</span>
<span id="A1.SS1.p1.pic1.1.1.1.1.1.3" class="ltx_p">{{instruction}}</span>
<span id="A1.SS1.p1.pic1.1.1.1.1.1.4" class="ltx_p">and these are some examples of the same:</span>
<span id="A1.SS1.p1.pic1.1.1.1.1.1.5" class="ltx_p">{{examples}}</span>
<span id="A1.SS1.p1.pic1.1.1.1.1.1.6" class="ltx_p">There are {{num}} datasets available for this task.</span>
<span id="A1.SS1.p1.pic1.1.1.1.1.1.7" class="ltx_p">{{datasets}}</span>
<span id="A1.SS1.p1.pic1.1.1.1.1.1.8" class="ltx_p">The name of the most relevant dataset for this task is:</span>
</span></foreignObject></g></g></svg>
</div>
<div id="A1.SS1.p2" class="ltx_para">
<p id="A1.SS1.p2.1" class="ltx_p">where each dataset in {{datasets}} is defined as:</p>
</div>
<div id="A1.SS1.p3" class="ltx_para ltx_noindent">
<svg id="A1.SS1.p3.pic1" class="ltx_picture" height="74.6" overflow="visible" version="1.1" width="600"><g transform="translate(0,74.6) matrix(1 0 0 -1 0 0)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 68.7 C 0 71.96 2.64 74.6 5.91 74.6 L 594.09 74.6 C 597.36 74.6 600 71.96 600 68.7 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 68.7 C 1.97 70.87 3.73 72.64 5.91 72.64 L 594.09 72.64 C 596.27 72.64 598.03 70.87 598.03 68.7 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignObject width="556.69" height="47.05" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#000000">
<span id="A1.SS1.p3.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_bottom" style="width:402.3pt;">
<span id="A1.SS1.p3.pic1.1.1.1.1.1.1" class="ltx_p">{counter}{{dataset_name}}:Description-{{dataset_description}}.</span>
<span id="A1.SS1.p3.pic1.1.1.1.1.1.2" class="ltx_p">This dataset has the following tags:</span>
<span id="A1.SS1.p3.pic1.1.1.1.1.1.3" class="ltx_p">{{tags}}</span>
</span></foreignObject></g></g></svg>
</div>
</section>
<section id="A1.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.2 </span>Schema Selection Prompt</h3>

<div id="A1.SS2.p1" class="ltx_para ltx_noindent">
<svg id="A1.SS2.p1.pic1" class="ltx_picture" height="255.72" overflow="visible" version="1.1" width="600"><g transform="translate(0,255.72) matrix(1 0 0 -1 0 0)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 249.81 C 0 253.07 2.64 255.72 5.91 255.72 L 594.09 255.72 C 597.36 255.72 600 253.07 600 249.81 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 249.81 C 1.97 251.98 3.73 253.75 5.91 253.75 L 594.09 253.75 C 596.27 253.75 598.03 251.98 598.03 249.81 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignObject width="556.69" height="228.16" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#000000">
<span id="A1.SS2.p1.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_bottom" style="width:402.3pt;">
<span id="A1.SS2.p1.pic1.1.1.1.1.1.1" class="ltx_p">Your objective is to carefully analyze the task and the dataset mentioned, and decide whether the columns are relevant input, relevant output, irrelevant for the given task, or if it is ambiguous. There should be at most one output column. It is possible to have no relevant columns, in which case return the input and output column as empty lists. Answer in a json format, with the following keys: input, output, irrelevant, ambiguous.</span>
<span id="A1.SS2.p1.pic1.1.1.1.1.1.2" class="ltx_p">{{INCONTEXT_EXAMPLES}}</span>
<span id="A1.SS2.p1.pic1.1.1.1.1.1.3" class="ltx_p">After seeing these examples with the required columns, please provide the relevant columns for this context:</span>
<span id="A1.SS2.p1.pic1.1.1.1.1.1.4" class="ltx_p">You are tasked with the following process. {{instruction}} For this task, you will use the {{dataset_name}} dataset from HuggingFace. Dataset Description: {{dataset_description}}</span>
<span id="A1.SS2.p1.pic1.1.1.1.1.1.5" class="ltx_p">A sample data instance from this is as follows. {{sample_row}}.</span>
<span id="A1.SS2.p1.pic1.1.1.1.1.1.6" class="ltx_p">This dataset has the following columns: {{dataset_columns}}</span>
<span id="A1.SS2.p1.pic1.1.1.1.1.1.7" class="ltx_p">Required Columns :</span>
</span></foreignObject></g></g></svg>
</div>
</section>
<section id="A1.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.3 </span>Planning Module Prompt</h3>

<div id="A1.SS3.p1" class="ltx_para ltx_noindent">
<svg id="A1.SS3.p1.pic1" class="ltx_picture" height="355.34" overflow="visible" version="1.1" width="600"><g transform="translate(0,355.34) matrix(1 0 0 -1 0 0)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 349.44 C 0 352.7 2.64 355.34 5.91 355.34 L 594.09 355.34 C 597.36 355.34 600 352.7 600 349.44 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 349.44 C 1.97 351.61 3.73 353.37 5.91 353.37 L 594.09 353.37 C 596.27 353.37 598.03 351.61 598.03 349.44 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignObject width="556.69" height="327.78" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#000000">
<span id="A1.SS3.p1.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_bottom" style="width:402.3pt;">
<span id="A1.SS3.p1.pic1.1.1.1.1.1.1" class="ltx_p">You are a Planning Agent. You create a plan to transform data samples from their existing format into the required format for a given task.</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.2" class="ltx_p">————————————————-</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.3" class="ltx_p">Here are some examples for your reference.</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.4" class="ltx_p">{{in_context_examples}}</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.5" class="ltx_p">————————————————</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.6" class="ltx_p">Now do the following task:</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.7" class="ltx_p">Task Description: {{task_description}}</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.8" class="ltx_p">Task Examples:
example</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.9" class="ltx_p">Here are samples from a potentially relevant dataset for the task above. Notice how the format below is not as required by the task above.</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.10" class="ltx_p">Dataset Samples:
{{dataset_row}}</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.11" class="ltx_p">Carefully analyze the ‘Task Description‘ and the ‘Task Examples‘. Propose a higher-level plan to convert data from the Dataset Sample to data in the required format task examples. Your plan should be a list of sequential steps that can be taken to perform the data transformation. You don’t need to use all columns, as the dataset may not be fully relevant. Keep steps as simple, explicit and concise as possible. Each step in the plan may take any of the following actions:
1. Generate new columns as required by the task, and save them</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.12" class="ltx_p">2. Expand on a particular column to make it something more relevant to the task and save it</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.13" class="ltx_p">3. Combine multiple columns from the dataset</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.14" class="ltx_p">4. Choose columns that will form "input"</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.15" class="ltx_p">5. After the input field is created, carefully analyze it to choose/generate the output field</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.16" class="ltx_p">6. Ignore a data sample because it is not all relevant and return null for them.</span>
<span id="A1.SS3.p1.pic1.1.1.1.1.1.17" class="ltx_p">Return only the plan.</span>
</span></foreignObject></g></g></svg>
</div>
</section>
<section id="A1.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.4 </span>Execution Module Prompt</h3>

<div id="A1.SS4.p1" class="ltx_para ltx_noindent">
<svg id="A1.SS4.p1.pic1" class="ltx_picture" height="305.68" overflow="visible" version="1.1" width="600"><g transform="translate(0,305.68) matrix(1 0 0 -1 0 0)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 299.78 C 0 303.04 2.64 305.68 5.91 305.68 L 594.09 305.68 C 597.36 305.68 600 303.04 600 299.78 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 299.78 C 1.97 301.95 3.73 303.71 5.91 303.71 L 594.09 303.71 C 596.27 303.71 598.03 301.95 598.03 299.78 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignObject width="556.69" height="278.12" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#000000">
<span id="A1.SS4.p1.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_bottom" style="width:402.3pt;">
<span id="A1.SS4.p1.pic1.1.1.1.1.1.1" class="ltx_p">You are a Data Transforming Agent. Your job is to transform data from a given format to the required format. Following are the detailed instructions for the same:
1. Read the ‘Task Description‘.</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.2" class="ltx_p">2. An example of the input and output looks like for the task is shown in ‘Task Examples‘</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.3" class="ltx_p">3. The sample to be transformed is in ‘Data Sample‘.</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.4" class="ltx_p">4. Read the data transformation plan carefully that will help you convert the ‘Data Sample‘ into the required format. This should be relevant and intune to the ‘Task Description‘</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.5" class="ltx_p">5. Perform the plan step by step and explain your thinking.</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.6" class="ltx_p">6. End your response with the transformed sample as a JSON response with exactly 2 fields: "input" and "output".</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.7" class="ltx_p">————————————————-</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.8" class="ltx_p">Here are some examples for your reference.
{{incontext_examples}}</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.9" class="ltx_p">————————————————</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.10" class="ltx_p">Now do the following task:</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.11" class="ltx_p">Task Description: {{task_description}}</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.12" class="ltx_p">Task Examples:
{{sample}}</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.13" class="ltx_p">{{plan}}</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.14" class="ltx_p">Dataset Sample:
{{dataset_row}}</span>
<span id="A1.SS4.p1.pic1.1.1.1.1.1.15" class="ltx_p">Think step by step through the plan to convert the above ‘Dataset Sample‘ and show your working. End your response as a JSON with exactly two fields: "input", and "output"
Response:</span>
</span></foreignObject></g></g></svg>
</div>
</section>
<section id="A1.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.5 </span>Task Expansion Prompt</h3>

<div id="A1.SS5.p1" class="ltx_para ltx_noindent">
<svg id="A1.SS5.p1.pic1" class="ltx_picture" height="107.81" overflow="visible" version="1.1" width="600"><g transform="translate(0,107.81) matrix(1 0 0 -1 0 0)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 101.91 C 0 105.17 2.64 107.81 5.91 107.81 L 594.09 107.81 C 597.36 107.81 600 105.17 600 101.91 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 101.91 C 1.97 104.08 3.73 105.85 5.91 105.85 L 594.09 105.85 C 596.27 105.85 598.03 104.08 598.03 101.91 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignObject width="556.69" height="80.25" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#000000">
<span id="A1.SS5.p1.pic1.1.1.1.1.1" class="ltx_inline-block ltx_minipage ltx_align_bottom" style="width:402.3pt;">
<span id="A1.SS5.p1.pic1.1.1.1.1.1.1" class="ltx_p">Carefully analyse the task description and examples of the task, and explain the task to give a clearer description. Do not explain each example, but rather capture the general trends. Also place special focus on the format of the input/output examples.</span>
<span id="A1.SS5.p1.pic1.1.1.1.1.1.2" class="ltx_p">————————————————-</span>
<span id="A1.SS5.p1.pic1.1.1.1.1.1.3" class="ltx_p">Task Description: {task description}</span>
<span id="A1.SS5.p1.pic1.1.1.1.1.1.4" class="ltx_p">Task Examples: {examples}</span>
</span></foreignObject></g></g></svg>
</div>
</section>
<section id="A1.SS6" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.6 </span>Difficulty estimation prompt: Code Line Descriptions example</h3>

<div id="A1.SS6.p1" class="ltx_para ltx_noindent">
<svg id="A1.SS6.p1.pic1" class="ltx_picture" height="240.65" overflow="visible" version="1.1" width="600"><g transform="translate(0,240.65) matrix(1 0 0 -1 0 0)" fill="#000000" stroke="#000000" stroke-width="0.4pt"><g fill="#404040" fill-opacity="1.0"><path d="M 0 5.91 L 0 234.74 C 0 238 2.64 240.65 5.91 240.65 L 594.09 240.65 C 597.36 240.65 600 238 600 234.74 L 600 5.91 C 600 2.64 597.36 0 594.09 0 L 5.91 0 C 2.64 0 0 2.64 0 5.91 Z" style="stroke:none"></path></g><g fill="#F2F2F2" fill-opacity="1.0"><path d="M 1.97 5.91 L 1.97 234.74 C 1.97 236.92 3.73 238.68 5.91 238.68 L 594.09 238.68 C 596.27 238.68 598.03 236.92 598.03 234.74 L 598.03 5.91 C 598.03 3.73 596.27 1.97 594.09 1.97 L 5.91 1.97 C 3.73 1.97 1.97 3.73 1.97 5.91 Z" style="stroke:none"></path></g><g fill-opacity="1.0" transform="matrix(1.0 0.0 0.0 1.0 21.65 13.78)"><foreignObject class="ltx_minipage" width="402.3pt" height="213.09" transform="matrix(1 0 0 -1 0 16.6)" overflow="visible" color="#000000"><pre id="A1.SS6.p1.pic1.1.1.1.1.1" class="ltx_verbatim ltx_font_typewriter">
We are building a dataset for automatically describing code
(in words). Evaluate and rate the difficulty and complexity
of describing the following code lines. You should give an
overall score on a scale of 1 to 5,
where a higher score indicates higher difficulty.
You must just give a score without any other reasons.
Here’s the grading scale:
1: Very easy. Anyone who understands the
programming language could describe this almost instantly
2: Easy. Anyone who understands the programming
language could describe this with a bit of thought
3. Neutral. Most non-expert people who understand
the programming language would be able to describe this,
but it might take time for them to understand the code
4. Hard. It would require at least a minute
for a non-expert person who understand the
programming lanugage to understand and describe this code.
5. Very hard. Most non-experts would make a mistake
when trying to describe this code in a fixed timeframe.
Professional programmers would have an easier time.

Your answer shoud be a single number, 1 through 5,
with nothing else in your response.

{Incontext examples with code and difficulty}

{Input Code}
</pre></foreignObject></g></g></svg>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
</section>
</section>
</section>
</section>
</section>
</div>
</div>
</figure>
</section>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2404.14360" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2404.14361" class="ar5iv-text-button ar5iv-severity-error">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2404.14361">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2404.14361" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2404.14362" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Sun May  5 17:07:51 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
